<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[2025ï¼ŒAI ç¼–ç¨‹å…ƒå¹´ï¼Œæˆ‘ç”¨ TRAE åšäº†è¿™äº›ï¼]]></title>    <link>https://juejin.cn/post/7588376012120686619</link>    <guid>https://juejin.cn/post/7588376012120686619</guid>    <pubDate>2025-12-28T11:20:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588376012120686619" data-draft-id="7588109656042029102" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ï¼ŒAI ç¼–ç¨‹å…ƒå¹´ï¼Œæˆ‘ç”¨ TRAE åšäº†è¿™äº›ï¼"/> <meta itemprop="keywords" content="Trae,å‰ç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-28T11:20:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸å¦‚æ‘¸é±¼å»"/> <meta itemprop="url" content="https://juejin.cn/user/26044011388510"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ï¼ŒAI ç¼–ç¨‹å…ƒå¹´ï¼Œæˆ‘ç”¨ TRAE åšäº†è¿™äº›ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26044011388510/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸å¦‚æ‘¸é±¼å»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T11:20:07.000Z" title="Sun Dec 28 2025 11:20:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37f4978cd108417ca631c0963fb42d6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=9VjVDMuA880IODXqdqqVurwMISc%3D" alt="" loading="lazy"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸å¦‚æ‘¸é±¼å»ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„åˆ†äº«ä¸“æ ã€‚</p>
<p>2025 å·²ç»åˆ°äº†å°¾å£°ï¼Œç”±äºæœ€è¿‘åœ¨å®¶å…»ç—…ï¼Œæ—©æ—©å†™å¥½äº† <a href="https://juejin.cn/post/7588022226738888754" target="_blank" title="https://juejin.cn/post/7588022226738888754">ä¸å¦‚æ‘¸é±¼å»çš„ 2025 å¹´ç»ˆæ€»ç»“ï¼Œä»Šå¹´çš„å…³é”®è¯æ˜¯ç›´é¢å¤©å‘½</a>ï¼Œè®°å½•å¹¶æ€»ç»“ä¸€ä¸‹ 2025 çš„ç»å†ä¸æ”¶è·ã€‚</p>
<p>ä»Šå¹´æ˜¯ AI ç¼–ç¨‹å…ƒå¹´ï¼Œä¹Ÿæ˜¯AI ç¼–ç¨‹å·¥å…·å¤§çˆ†å‘çš„ä¸€å¹´ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦å•å¼€ä¸€ç¯‡æ€»ç»“ä¸‹ä¸€æ•´å¹´çš„ AI ç¼–ç¨‹çš„å®è·µä¸æ”¶è·ï¼ŒèŠä¸€èŠ 2025 AI/Vibe Coding å¯¹æˆ‘çš„å½±å“ã€‚</p>
<p>è¿™ä¸€å¹´å…‰æˆ‘ç”¨è¿‡çš„å°±æœ‰ GitHub Copilotã€Cursorã€Traeã€Qoderã€Codebuddyã€Kiroã€Claude Codeã€Catpawã€Antigravity ç­‰ç­‰ã€‚æœ€æ—©æ˜¯åœ¨ç”¨ GitHub Copilotï¼Œç„¶åæ˜¯ Cursorï¼ˆæ”¯ä»˜æ–¹å¼æ¯”è¾ƒå‹å¥½ï¼‰ï¼Œå†åæ¥å›½äº§ AI ç¼–ç¨‹å·¥å…· TRAEã€Codebuddyã€Qoder é™†ç»­å‘å¸ƒï¼Œæ¯ä¸ªæ–°çš„å·¥å…·åŸºæœ¬éƒ½æœ‰åœ¨ç”¨ã€‚</p>
<p>è‡ªä» Cursor é”åŒºï¼ŒTRAEå°±æˆä¸ºäº†æˆ‘çš„ä¸»åŠ› AI ç¼–ç¨‹å·¥å…·ï¼Œæ‰€ä»¥ä»Šå¤©å°±ä¸»è¦èŠä¸€èŠæˆ‘ä½¿ç”¨ TRAE çš„å¿ƒè·¯å†ç¨‹ã€‚</p>
<h2 data-id="heading-0">æˆ‘åœ¨ç”¨ AI åšä»€ä¹ˆï¼Ÿ</h2>
<p>AI å·²ç»å®Œç¾èå…¥åˆ°äº†å¾ˆå¤šäººçš„ç”Ÿæ´»ä¸­ï¼Œä»¥å‰æ˜¯ç™¾åº¦ä¸€ä¸‹ã€è°·æ­Œä¸€ä¸‹ï¼Œç°åœ¨å˜æˆäº† AI ä¸€ä¸‹ã€‚ä»Šå¹´æˆ‘ä¸»è¦æ˜¯ç”¨æ¥åšä»¥ä¸‹äº‹æƒ…ï¼š</p>
<ul>
<li>æˆ‘çš„ä¸»ä¸šï¼šç¼–ç¨‹æ¬ç –ï¼Œå¤§å¤šæ•°ç¨‹åºå‘˜ç°åœ¨éƒ½å·²ç»æ˜¯ Vibe Coding æˆ–è€… SDD ç¼–ç¨‹äº†ï¼Œå·¥ä½œå·²ç»ç¦»ä¸å¼€ AI äº†ã€‚</li>
<li>å†™æ–‡ç« ï¼šå¹³æ—¶å†™å†™æ–‡ç« ï¼Œæœ‰çš„äº‹æƒ…ä¼šäº¤ç»™ AIã€‚ä¸è¿‡å…¨æ–‡ AI ç¼–å†™çš„è¯ï¼ŒAI å‘³å„¿éå¸¸å¤§ï¼Œæ‰€ä»¥æˆ‘ç›®å‰ä¸»è¦æ˜¯æ‹¿æ¥å†™æ‘˜è¦ã€ç”Ÿæˆæ ‡é¢˜å»ºè®®ã€ç”Ÿæˆå°é¢æç¤ºè¯ç­‰ã€‚</li>
<li>ç”Ÿæˆå›¾ç‰‡ï¼šåˆ¶ä½œæ–‡ç« å°é¢ã€åˆ¶ä½œæ‰‹ç»˜å›¾æ¼«ç”»ä¹‹ç±»çš„ã€ç”Ÿæˆæ¸¸æˆåˆ†é•œç­‰ç­‰ã€‚</li>
<li>æŸ¥è¯¢çŸ¥è¯†ï¼šè¿™ä¸ªåº”è¯¥æ˜¯å¤§å¤šæ•°äººéƒ½ä¼šç”¨çš„ï¼Œä¾‹å¦‚è±†åŒ…ã€DeepSeekã€Kimiä¹‹ç±»çš„åº”ç”¨ï¼Œåˆ¶ä½œæ—…è¡Œæ”»ç•¥ã€æŸ¥è¯¢å°±åŒ»çœ‹ç—…çŸ¥è¯†ã€è§£è¯»ç—…ç†ã€æ£€æŸ¥æŠ¥å‘Šç­‰ç­‰ã€‚</li>
<li>å¼€æºï¼šæˆ‘åœ¨å¼€æºé¡¹ç›®ä¸­ä½¿ç”¨ AI è¿›è¡Œ reviewï¼Œä½¿ç”¨ AI å¯¹ä»£ç è¿›è¡Œé‡æ„ï¼Œä¹Ÿä¼šä½¿ç”¨ AI è¿›è¡ŒåŠŸèƒ½ç¼–ç å’Œ bug ä¿®å¤ï¼Œè¿˜ä¼šä½¿ç”¨ AI åšä¸€äº›æ„Ÿå…´è¶£çš„å°ä¸œè¥¿ã€‚</li>
</ul>
<p>å¤§å®¶éƒ½åœ¨ç”¨ AI åšä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h2 data-id="heading-1">TRAE åˆä»£çš„ä½¿ç”¨</h2>
<p>å®è¯è¯´ï¼Œåˆä»£ TRAE æ˜¯ç›¸å½“çš„è¹©è„šï¼Œé‚£æ—¶å€™çš„ TRAE è¿˜æ˜¯çº¢è‰²çš„å›¾æ ‡ï¼Œå¯¹æ¯” Cursor å’Œ GitHub Copilot ç¡®å®ä¸èƒ½æ‰“ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œå…ˆå¿ä¸€å¿ï¼Œæ¯•ç«Ÿå½“æ—¶æ˜¯å…è´¹çš„claude-3.5ï¼Œè¿˜è¦å•¥è‡ªè¡Œè½¦å‘¢ğŸ¶ï¼Ÿç„¶åå°±æœ‰äº†è¿™ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7474019962718732314" target="_blank" title="https://juejin.cn/post/7474019962718732314">ã€Šä»é›¶åˆ°ä¸€ï¼šç”¨Traeå¿«é€Ÿæ­å»ºuni-app AIå¯¹è¯å°ç¨‹åºé¡µé¢ã€‹</a>ã€‚</p>
<p>å½“æ—¶å‡†å¤‡åšä¸€ä¸ªæµå¼å“åº” AIå¯¹è¯å°ç¨‹åºï¼Œè€Œåˆšå‘å¸ƒçš„ TRAE æ­£å¥½æä¾›äº†å…è´¹çš„ claude-3.5 æ¨¡å‹ä½¿ç”¨ï¼Œäºæ˜¯ç”¨ TRAE åŸºäº uni-app å’Œ wot-starter åˆ¶ä½œäº†è¿™ä¹ˆä¸€ä¸ªç®€å•çš„å¯¹è¯ demoã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf1babb291c744d3be06fb2462f17387~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=vRyb3IMwv96f23Zo2iWr1WU7ur4%3D" alt="" loading="lazy"/></p>
<p>ä½“éªŒä¸‹æ¥èƒ½ç”¨ï¼Œä½†æ˜¯å½“æ—¶å®åŠ›å¯¹æ¯” cursor ç¡®å®æœ‰æ‰€å·®è·ï¼Œè€Œä¸”è¿˜éœ€è¦æ’é˜Ÿï¼Œä¸è¿‡æ¯•ç«Ÿæ˜¯å…è´¹çš„claude-3.5ï¼Œè¿˜è¦å•¥è‡ªè¡Œè½¦å‘¢ï¼Œå¦‚æœå®ƒæ”¶è´¹æˆ‘å¯ä»¥è¯´æ˜¯å®ƒæœ‰é—®é¢˜ï¼Œè€Œç°åœ¨åªèƒ½è¯´æ˜¯æˆ‘ä¸ä¼šé—®ğŸ¶ã€‚</p>
<h2 data-id="heading-2">TRAE SOLO</h2>
<p>7 æœˆ 21 æ—¥ï¼ŒTRAE SOLO å‘å¸ƒï¼Œå®ƒå¸¦æ¥äº†ç”±AIä¸»å¯¼å¼€å‘ï¼Œä»è¾“å…¥åˆ°äº¤ä»˜çš„å…¨é“¾è·¯ååŒçš„å¼€å‘æ¨¡å¼ï¼Œè€Œæˆ‘ä¹Ÿæˆä¸ºäº†ç¬¬ä¸€æ‰¹ TRAE SOLO ç”¨æˆ·ï¼Œå¹¶ä¸”ä½¿ç”¨ TRAE SOLO å¤åˆ»äº†ç«¥å¹´å¦å…‹å¤§æˆ˜ï¼Œå®è·µäº†å…¨ AI è¾…åŠ©å¼€å‘å°ç¨‹åºçš„ææ•ˆå®è·µã€‚</p>
<h3 data-id="heading-3">å¤åˆ»ç«¥å¹´å°æ¸¸æˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46fad217569f45a18ded969fe25a3572~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=AAvtk6At5R7gJDNiYFKwSGHDR48%3D" alt="" loading="lazy"/></p>
<p><a href="https://juejin.cn/post/7533434265414189091" target="_blank" title="https://juejin.cn/post/7533434265414189091">ã€Šå½“å¹´å·å·ç©å°éœ¸ç‹ï¼Œç°åœ¨å·å·ç”¨ Trae Solo å¤åˆ»å¦å…‹å¤§æˆ˜ã€‹</a>ä¸€æ–‡ä¸­ï¼Œæˆ‘ä½¿ç”¨ TRAE SOLO å¤åˆ»äº†ç«¥å¹´å¦å…‹å¤§æˆ˜ã€‚</p>
<p>å‡­å€Ÿæ­¤ç¯‡æ–‡ç« ï¼Œæˆ‘è·å¾—äº† TRAE å¤´å·ç©å®¶æ´»åŠ¨çš„äºŒç­‰å¥–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92d2d7b14f2f41b98a3f35d1077d1506~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=%2FovKl7Hx0u5ksmQrVYqLaTkVJsA%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œæ–‡ç« ä¹Ÿè¢«æ”¶å½•åˆ° TRAE å…¬ä¼—å·çš„æœ€ä½³å®è·µæ–‡ç« ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efa9a407471b4176bc36e0bea536fcc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=8GhXgK%2BTyG5h3Bp6O08nazNGWHw%3D" alt="" loading="lazy"/></p>
<p>æ¬²ä¹°æ¡‚èŠ±åŒè½½é…’ï¼Œç»ˆä¸ä¼¼å°‘å¹´æ¸¸ï¼Œå°±ç®—å¤åˆ»å¾—å†åƒï¼Œä¹Ÿæ— æ³•å†å›åˆ°ä»å‰ï¼Œä½† AI ç”¨æ–°çš„å·¥å…·é“¾æŠŠæ—§æ—¥çš„å¿«ä¹ä»è®°å¿†ä¸­å”¤é†’ï¼Œè®©æˆ‘ä»¬ä¸ç«¥å¹´è·¨è¶Šæ—¶ç©ºçš„äº¤æµï¼Œä¹Ÿæ˜¯ä¸€æ¬¡éå¸¸é…·çš„ä½“éªŒï¼</p>
<h3 data-id="heading-4">AI è¾…åŠ©å¼€å‘å°ç¨‹åº</h3>
<p>åœ¨<a href="https://juejin.cn/post/7538734024837185582" target="_blank" title="https://juejin.cn/post/7538734024837185582">ã€ŠTRAE è¾…åŠ©ä¸‹çš„ uni-app è·¨ç«¯å°ç¨‹åºå·¥ç¨‹åŒ–å¼€å‘å®è·µåˆ†äº«ã€‹</a>ä¸€æ–‡ä¸­ï¼Œæˆ‘åˆ†äº«äº†ä½¿ç”¨ TRAE ä½œä¸ºä¸»è¦AIç¼–ç¨‹å·¥å…·ï¼Œä½¿ç”¨ uni-app å¿«é€Ÿä¸Šæ‰‹æ‘¸æ¿ wot-starter ï¼Œé€šè¿‡ AI è¾…åŠ©å®ç°äº†å¼€å‘æ•ˆç‡çš„æ˜¾è‘—æå‡ã€‚æ•´ä½“å¼€å‘æ—¶é—´ä»ä¼ ç»Ÿçš„ 40 äººæ—¥ç¼©çŸ­è‡³ 22 äººæ—¥ï¼Œæ•ˆç‡æå‡çº¦ 45%ï¼Œæ ¹æ®å›¢é˜Ÿçš„å®é™…ä½“éªŒï¼Œç›¸æ¯”ä¼ ç»Ÿå¼€å‘æ–¹å¼ï¼Œå¼€å‘ä½“éªŒæœ‰äº†æ˜æ˜¾æ”¹å–„ã€‚</p>
<p>åœ¨æ–‡ä¸­æˆ‘ä»¬ä¹Ÿä»‹ç»äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJuZwsaUxQ6W-jdP-pSEkjg" target="_blank" title="https://mp.weixin.qq.com/s/JuZwsaUxQ6W-jdP-pSEkjg" ref="nofollow noopener noreferrer">ã€Šå¦‚ä½•ç”¨ AI é©±åŠ¨ wot-ui å¼€å‘å°ç¨‹åºã€‹</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9h2inbYwmYa3ZQNYutRBng" target="_blank" title="https://mp.weixin.qq.com/s/9h2inbYwmYa3ZQNYutRBng" ref="nofollow noopener noreferrer">ã€Šwot-uiæ˜¯å¦‚ä½•ä½¿ç”¨lms.txt è®© AI æ›´å¥½åœ°ç†è§£æ–‡æ¡£ã€‹</a>ï¼Œè¿™å¯¹äºæˆ‘ä»¬æœ¬æ¬¡å®è·µçš„ææ•ˆæ˜¯éå¸¸é‡è¦çš„ï¼Œå®Œæ•´æ˜ç¡®çš„å¤–éƒ¨ä¾èµ–æ–‡æ¡£ï¼Œèƒ½è®© AI å¿«é€Ÿä½¿ç”¨æˆ‘ä»¬å¸¸ç”¨çš„æŠ€æœ¯æ ˆã€‚</p>
<p>æœ¬ç¯‡æ–‡ç« åŒæ ·ä¹Ÿè¢«æ”¶å½•åˆ° TRAE å…¬ä¼—å·çš„æœ€ä½³å®è·µæ–‡ç« ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18665267efb440dc87afd8ec2d0abe30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=aFcnlQS3LYOg2k7bA%2FXgD54%2BN1A%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">å¼€å‘åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åº</h3>
<p>å»å¹´ï¼Œã€Œè€ä¹¡é¸¡ä¸è£…äº†ï¼Œç›´æ¥å¼€æºã€çš„æ¶ˆæ¯å¼•å‘äº†å¹¿æ³›çš„å…³æ³¨ã€‚æˆ‘ä¹Ÿçº³é—·ï¼Œè€ä¹¡é¸¡ä¸æ˜¯åšèœçš„å—ï¼Œå¼€çš„å“ªé—¨å­æºï¼ŸåŸæ¥æ˜¯æŠŠä»–ä»¬çš„èœå“ã€æº¯æºæŠ¥å‘Šè¿™äº›å¼€æºäº†ã€‚ç„¶å GitHub ä¸Šè¿™ä¸ªå«ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€çš„é¡¹ç›®ç«äº†ï¼Œå¦‚ä»Š star æ•°é‡å·²ç»è¾¾åˆ°äº† 22kï¼Œè¿™æ˜¯å®ƒçš„åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGar-b-age%2FCookLikeHOC" target="_blank" title="https://github.com/Gar-b-age/CookLikeHOC" ref="nofollow noopener noreferrer">github.com/Gar-b-age/Câ€¦</a> ã€‚</p>
<p>ä½œä¸ºä¸€åçˆ±åšé¥­çš„ç¨‹åºå‘˜ï¼Œé¢å¯¹å¦‚æ­¤è¯±äººçš„å¼€æºèµ„æºï¼Œæ€èƒ½è¢–æ‰‹æ—è§‚ï¼Ÿäºæ˜¯ï¼Œåœ¨<a href="https://juejin.cn/post/7554225547117576243" target="_blank" title="https://juejin.cn/post/7554225547117576243">ã€Šè€ä¹¡é¸¡ä¹Ÿå¼€æºï¼Ÿæˆ‘ç”¨ TRAE SOLO åšäº†ä¸ªåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºï¼ã€‹</a>ä¸€æ–‡ä¸­ï¼Œæˆ‘åˆ†äº«äº†ä½¿ç”¨ TRAE SOLO å®ç°å°ç¨‹åºå‰åç«¯åŠæ•°æ®æ•´ç†çš„å…¨è¿‡ç¨‹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/684549f272c24f36ba2610a6d7e606e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=nRZdqJ9UTV3nUAk4VeILpNgtAl4%3D" alt="" loading="lazy"/></p>
<p>æœ¬ç¯‡æ–‡ç« åŒæ ·ä¹Ÿè¢«æ”¶å½•åˆ° TRAE å…¬ä¼—å·çš„æœ€ä½³å®è·µæ–‡ç« ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/971c10697fd14ea8aabbee99038c2a57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=5BDPmmDG7peKnBGrFcHVo%2BycZFA%3D" alt="" loading="lazy"/></p>
<p>è¿‡ç¨‹ä¸­ä¿æŒæ•°æ®å¹²å‡€ã€çº¯å‡€ä¸Šä¸‹æ–‡ã€å¢é‡å¼æ²Ÿé€šç­‰ä¸‰ä¸ªåŸåˆ™æ˜¯ä½¿æˆ‘ä»¬äº‹åŠåŠŸå€çš„åˆ©å™¨</p>
<h3 data-id="heading-6">å°ç»“</h3>
<p>æ­¤é˜¶æ®µTRAE ä¸ TRAE SOLO çš„å®åŠ›ç›¸æ¯”åˆç‰ˆå·²ç»å¤§å¤§å¢å¼ºäº†ï¼Œç¼ºç‚¹å°±æ˜¯å†…å­˜å æ®è¾ƒå¤§ã€Figmaè®¾è®¡å›¾è¿˜åŸåº¦ä»ç„¶èµ¶ä¸ä¸Š cursorï¼Œä¸è¿‡å·²ç»å¯ä»¥ä½œä¸ºä¸»åŠ›å¼€å‘å·¥å…·æ¥ç”¨äº†ã€‚</p>
<h2 data-id="heading-7">TRAE SOLO æ­£å¼ç‰ˆ</h2>
<p>11 æœˆ 12 æ—¥ TRAE SOLO æ­£å¼ç‰ˆä¸Šçº¿äº†ï¼Œæ–°å¢ä¸‰æ å¸ƒå±€ã€DiffView å·¥å…·ã€SOLO Coder + Planï¼Œæ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œç­‰åŠŸèƒ½ã€‚éšååˆä¸Šçº¿äº† Gemini 3 Pro æ¨¡å‹ï¼Œå¯ä»¥ä½œä¸º Claude æ¨¡å‹çš„å¹³æ›¿äº†ã€‚</p>
<p>åœ¨è¿™æœŸé—´ï¼Œæˆ‘ä½¿ç”¨æ­£å¼ç‰ˆçš„ TRAE SOLO å®Œæˆäº†ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€å°ç¨‹åºçš„å¼€æºã€æ‰‹åŠ¿ç²’å­äº¤äº’ç‰¹æ•ˆçš„åˆ¶ä½œã€ã€Œä¸€åªé¥ºå­çš„ä½¿å‘½ã€å°æ¸¸æˆçš„åˆ¶ä½œå’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmy-uni.wot-ui.cn%2Fguide%2Frouter%2Fintroduction.html" target="_blank" title="https://my-uni.wot-ui.cn/guide/router/introduction.html" ref="nofollow noopener noreferrer">@wot-ui/router</a>çš„é‡æ„ã€‚</p>
<h3 data-id="heading-8">ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€å°ç¨‹åºå¼€æº</h3>
<p>åœ¨<a href="https://juejin.cn/post/7576210031873409065#heading-12" target="_blank" title="https://juejin.cn/post/7576210031873409065#heading-12">ã€ŠTRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼ã€‹</a>ä¸€æ–‡ä¸­ï¼Œä»‹ç»äº†æˆ‘ä»¬å‡ ä¹é›¶ä»£ç  ç”¨ TRAE SOLO å®Œæˆäº†ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€å°ç¨‹åºçš„å¼€æºä¸ CI/CD æµç¨‹ã€‚</p>
<ul>
<li>å°ç¨‹åºï¼šã€Œé±¼å“¥èœè°±ã€</li>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMoonofweisheng%2FMyCookLikeHOC" target="_blank" title="https://github.com/Moonofweisheng/MyCookLikeHOC" ref="nofollow noopener noreferrer">github.com/Moonofweishâ€¦</a></li>
</ul>
<p>è¿™ç¯‡æ–‡ç« åˆ™è·å¾—äº† <a href="https://juejin.cn/post/7586167377382801434" target="_blank" title="https://juejin.cn/post/7586167377382801434">TRAE SOLO å®æˆ˜èµ›</a>çš„ç¬¬ä¸‰åã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d72eb0caf214554892b448e080c7f21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=Wv8U2UBMEwz6LiBcMYR9k0B5h04%3D" alt="" loading="lazy"/></p>
<p>å¼€å‘è¿‡ç¨‹ä¸­è¿‡ç¨‹ä¸­ä¿æŒæ•°æ®å¹²å‡€ã€çº¯å‡€ä¸Šä¸‹æ–‡ã€å¢é‡å¼æ²Ÿé€šç­‰ä¸‰ä¸ªåŸåˆ™ä»ç„¶æ˜¯ä½¿æˆ‘ä»¬äº‹åŠåŠŸå€çš„åˆ©å™¨ï¼Œè¿™å…¶å®å’Œå½“ä¸‹å¾ˆæµè¡Œçš„ SDD è§„èŒƒç›¸ç¬¦ï¼Œåœ¨è¿™ç§å°å‹é¡¹ç›®ä¸­ï¼ŒåŸºäºä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®æ¨¡æ¿å’Œè‰¯å¥½çš„éœ€æ±‚è¾“å…¥å’Œå¼€å‘è®¡åˆ’ï¼Œç”±è§„èŒƒé©±åŠ¨å¼€å‘ï¼Œèƒ½è®©é¡¹ç›®åšçš„æ›´å¥½ã€èµ°å¾—æ›´è¿œã€‚</p>
<h3 data-id="heading-9">æ‰‹åŠ¿ç²’å­äº¤äº’ç‰¹æ•ˆçš„åˆ¶ä½œ</h3>
<p>åœ¨<a href="https://juejin.cn/post/7583991680749764635" target="_blank" title="https://juejin.cn/post/7583991680749764635">ã€ŠGemini 3åšç²’å­äº¤äº’ç‰¹æ•ˆå¾ˆå‡ºåœˆï¼Ÿæ‹¿ TRAE SOLO æ¥å®ç°ä¸€æ³¢ï¼ã€‹</a>ä¸€æ–‡ä¸­ï¼Œè½»æ¾å®ç°äº†ã€Šæ—©å®‰åˆå®‰æ™šå®‰ç²’å­äº¤äº’ç‰¹æ•ˆã€‹ï¼Œå¯ä»¥çœ‹å‡º TRAE SOLO æ­£å¼ç‰ˆå‘å¸ƒä¹‹åï¼ŒåŠŸèƒ½ä¸Šçš„å¢å¼ºè¿˜æ˜¯ä¸é”™çš„ï¼Œè¿˜æœ‰å¾ˆå¤šæˆ‘ä»¬æœ¬æ¬¡æ²¡ç”¨åˆ°çš„åŠŸèƒ½ä¾‹å¦‚ Plan æ¨¡å¼ç­‰ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œæ¥å…¥äº† Gemini-3-Pro åå¤§æ¨¡å‹çš„çŸ­æ¿åŸºæœ¬è¡¥ä¸Šäº†ã€‚</p>
<h3 data-id="heading-10">ã€Œä¸€åªé¥ºå­çš„ä½¿å‘½ã€å°æ¸¸æˆ</h3>
<p>èµ·å› æ˜¯ TRAE ç¾¤é‡Œæœ‰ä¸ªå†¬è‡³ä¸»é¢˜æ´»åŠ¨ï¼Œæˆ‘å°±å‡†å¤‡å†™ä¸ªæ¸©é¦¨å°æ¸¸æˆå‚ä¸ï¼Œçµæ„Ÿæ¥è‡ªäºã€Šä¸€æ¡ç‹—çš„ä½¿å‘½ã€‹ã€‚æ¸¸æˆè®²è¿°äº†ä¸€ä¸ªæ‹ŸäººåŒ–çš„é¥ºå­åœ¨å†¬è‡³è¿™ä¸€å¤©ï¼Œå¸®åŠ©ä¸€ä½å› äº‹ä¸šå—æŒ«è€Œæ²®ä¸§çš„å¹´è½»äººé‡æ–°æŒ¯ä½œï¼Œæœ€ç»ˆä¸å®¶äººå›¢èšçš„æ¸©æš–æ•…äº‹ã€‚æˆ‘è®© TRAE SOLO æ•´ç†åˆ†é•œå’ŒAIç»˜å›¾æè¿°ï¼Œç„¶åç”¨å°é¦™è•‰ç”»å›¾ï¼ŒæŠŠå›¾ç‰‡æ”¾åˆ°é¡¹ç›®é‡Œï¼Œè®© TRAE SOLOå¼€å§‹å¼€å‘ã€‚è¿™ä¸ªå…¶å®æŒºæœ‰æ„æ€çš„ï¼Œå¯ä»¥è‡ªå·±å»åšè¿™ç§è§†è§‰å°è¯´å¼äº’åŠ¨æ¸¸æˆï¼Œè‡ªå·±å†™ä¸»çº¿å°±è¡Œäº†ã€‚</p>
<p>æ¸¸ç©åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjiaozi.wot-ui.cn%2F" target="_blank" title="https://jiaozi.wot-ui.cn/" ref="nofollow noopener noreferrer">jiaozi.wot-ui.cn/</a></p>
<p><em><strong>å¯æƒœæ²¡æœ‰è·å¾—å†¬è‡³ä¸»é¢˜æ´»åŠ¨çš„å¥–å“ğŸ¶</strong></em></p>
<h3 data-id="heading-11">é‡æ„ @wot-ui/router</h3>
<p>ä½¿ç”¨ TRAE SOLO å°† uni-mini-router é‡æ„ï¼Œå¹¶è¿ç§»åˆ° @wot-ui/router äº†ï¼Œå®Œå–„äº†å¯¼èˆªå®ˆå«çš„åŠŸèƒ½å¹¶ä»rollupè¿ç§»åˆ°äº†tsdownã€‚åé¢è®¡åˆ’å°† uni-mini-ci ä¹ŸåŒæ ·é‡æ„å¹¶è¿ç§»åˆ° @wot-ui/ciã€‚</p>
<p>æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmy-uni.wot-ui.cn%2F" target="_blank" title="https://my-uni.wot-ui.cn/" ref="nofollow noopener noreferrer">my-uni.wot-ui.cn/</a></p>
<p>è¿™ä¸ªè¿‡ç¨‹ç”¨ TRAE SOLOï¼Œç”¨é‡æœ‰ç‚¹é¡¶ä¸ä½äº†å•Šï¼Œå¤§æµç¨‹ä½¿ç”¨ TRAE å›½é™…ç‰ˆå¼€å‘ï¼Œæ¨¡å‹ç”¨ Gemini-3-Proï¼Œå°ä¿®å°è¡¥ç”¨çš„å›½å†…ç‰ˆçš„GLM-4.7ã€‚æœ€åçš„é‡æ„çš„ç»“æœä¹Ÿè¿˜å¯ä»¥ï¼Œè¿˜æ·»åŠ äº†æµ‹è¯•ç”¨ä¾‹ï¼Œå¡«è¡¥äº†ä¹‹å‰çš„å¾ˆå¤šç¼ºæ¼ğŸ˜‚ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/048b773e452347ea86e0e5d7255df947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=jvM6oXPqPzW87csamEOE3owDW8w%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">å°ç»“</h3>
<p>TRAE SOLO æ­£å¼ç‰ˆå‘å¸ƒåï¼Œæˆ‘åœ¨å„ç§åœºæ™¯éƒ½æœ‰å°è¯•ï¼Œç¼–ç¨‹èƒ½åŠ›ç›¸è¾ƒä¹‹å‰è¦å¼ºäº†ä¸å°‘ï¼Œè€Œä¸”ä¹Ÿæœ‰ Gemini-3-Pro è¿™ç§å¼ºåŠ›æ¨¡å‹ï¼Œfigma è¿˜åŸçš„èƒ½åŠ›ä¹Ÿå¼ºäº†ä¸å°‘ã€‚</p>
<h2 data-id="heading-13">TRAE å¹´åº¦åˆ›ä½œä¹‹æ˜Ÿ</h2>
<p>12 æœˆ 27 å·ï¼Œè·å¾—äº† TRAE 2025 å¹´åº¦äº”å¤§ç”¨æˆ·å¥–â€”â€”å¹´åº¦åˆ›ä½œä¹‹æ˜Ÿï¼Œæ„Ÿè°¢ TRAEã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8819c6307add44d795f05aac400819d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767525607&amp;x-signature=is5lLndxZWxFYZRKfk9dQTP5z40%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>è™½ç„¶ AI Coding å–ä»£å‰ç«¯å¼€å‘çš„è®ºè°ƒå±‚å‡ºä¸ç©·ï¼Œå‡ºä¸€ä¸ªæ–°çš„å¤§æ¨¡å‹ï¼Œå‰ç«¯å°±ä¼šæ­»ä¸€æ¬¡ï¼Œä½†æ˜¯ç›®å‰ AI Coding ä»ç„¶æ²¡æœ‰æ›¿ä»£ä»»ä½•ä¸€ä¸ªèŒä¸šï¼Œâ€œAI è½åœ°çš„æœ€åä¸€å…¬é‡Œâ€ä»æœªè§£å†³ï¼Œäººåœ¨ AI Coding ä¸­ä»æ‰®æ¼”ç€å†³ç­–è€…å’ŒæŒ‡å¯¼è€…çš„è§’è‰²ã€‚å°½ç®¡å½“å‰ AI Coding çš„è„‰ç»œä»æœªæ¸…æ™°ï¼Œä½†æ˜¯ AI Coding æœªæ¥ç¡®å®æ— æ¯”å€¼å¾—æœŸå¾…ã€‚æ‰€ä»¥æˆ‘ä»¬è¦æ‹¥æŠ±å˜åŒ–ï¼Œæ‹¥æŠ±æœªæ¥ï¼Œæ‹¥æŠ± AI Codingã€‚</p>
<p>2026 AI åœ¨æˆ‘çš„å·¥ä½œã€ç”Ÿæ´»å’Œå­¦ä¹ ä¸­å·²ç»æ…¢æ…¢å˜å¾—ä¸å¯ç¼ºå°‘ï¼ŒTRAEåœ¨è¿™ä¸€å¹´ä¸­ä¹Ÿé€æ¸æˆä¸ºæˆ‘çš„ä¸»åŠ› AI ç¼–ç¨‹å·¥å…·ã€‚</p>
<p>2026 å¸Œæœ›ä½ ã€æˆ‘å’Œ AI ç¼–ç¨‹çš„æœªæ¥éƒ½åŒæ ·å……æ»¡å¸Œæœ›ã€‚</p>
<p><em><strong>æ¬¢è¿è¯„è®ºåŒºæ²Ÿé€šã€äº¤æµğŸ‘‡ğŸ‘‡</strong></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IndexedDB ä½¿ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7588109656042061870</link>    <guid>https://juejin.cn/post/7588109656042061870</guid>    <pubDate>2025-12-28T11:40:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588109656042061870" data-draft-id="7582533464245223458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IndexedDB ä½¿ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T11:40:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€è¯ºæ»šé›ªçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2824015112318094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IndexedDB ä½¿ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2824015112318094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€è¯ºæ»šé›ªçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T11:40:14.000Z" title="Sun Dec 28 2025 11:40:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº†<a href="https://juejin.cn/post/7585789195868733476" target="_blank" title="https://juejin.cn/post/7585789195868733476">å‰ç«¯è·¨é¡µé¢é€šè®¯ç»ˆææŒ‡å—â‘§ï¼šCookie ç”¨æ³•å…¨è§£æ</a>,ä¸‹ä¸€ç¯‡æ˜¯ä»‹ç»<code>å‰ç«¯è·¨é¡µé¢é€šè®¯ç»ˆææŒ‡å—â‘¨ï¼š# IndexedDB ç”¨æ³•å…¨è§£æ</code>,è€ƒè™‘åˆ°è¿™ç§æ–¹å¼å¹¶ä¸æ˜¯å¸¸ç”¨ï¼Œå…ˆä»‹ç»ä¸‹<code>IndexedDB</code>çš„ä½¿ç”¨æ–¹æ³•ï¼Œå†å¯¹è·¨é¡µé¢é€šä¿¡è¿›è¡Œæ€»ç»“ã€‚</p>
<p>ä¸‹é¢ä»‹ç»ä¸‹<code>IndexedDB</code>æ¦‚å¿µä»¥åŠå¸¸è§ç”¨æ³•ã€‚</p>
<h2 data-id="heading-1">1. åŸºæœ¬æ¦‚å¿µ</h2>
<p>IndexedDB æ˜¯ä¸€ç§åº•å±‚ APIï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯å­˜å‚¨å¤§é‡çš„ç»“æ„åŒ–æ•°æ®ï¼ˆä¹ŸåŒ…æ‹¬æ–‡ä»¶/äºŒè¿›åˆ¶å¤§å‹å¯¹è±¡ï¼ˆblobsï¼‰ï¼‰ã€‚è™½ç„¶Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWeb_Storage_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API" ref="nofollow noopener noreferrer">Web Storage</a>Â åœ¨å­˜å‚¨è¾ƒå°‘é‡çš„æ•°æ®å¾ˆæœ‰ç”¨ï¼Œä½†å¯¹äºå­˜å‚¨æ›´å¤§é‡çš„ç»“æ„åŒ–æ•°æ®æ¥è¯´åŠ›ä¸ä»å¿ƒã€‚è€Œ IndexedDB æä¾›äº†è¿™ç§åœºæ™¯çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>IndexedDBæ˜¯æµè§ˆå™¨æä¾›çš„ NoSQL æ•°æ®åº“ï¼Œç”¨äºåœ¨å®¢æˆ·ç«¯å­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ®ã€‚å®ƒæ”¯æŒäº‹åŠ¡ã€ç´¢å¼•æŸ¥è¯¢å’Œå¼‚æ­¥æ“ä½œï¼Œé€‚åˆç¦»çº¿åº”ç”¨ã€æ•°æ®ç¼“å­˜ç­‰åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">æ•°æ®åº“å±‚çº§ç»“æ„</h3>
<pre><code class="hljs language-scss" lang="scss">Database (æ•°æ®åº“)
â”œâ”€â”€ <span class="hljs-selector-tag">Object</span> Store (å¯¹è±¡å­˜å‚¨ç©ºé—´)
â”‚   â”œâ”€â”€ Index (ç´¢å¼•)
â”‚   â””â”€â”€ Data Records (æ•°æ®è®°å½•)
â””â”€â”€ <span class="hljs-selector-tag">Object</span> Store (å¯¹è±¡å­˜å‚¨ç©ºé—´)
</code></pre>
<h3 data-id="heading-3">å…³é”®ç‰¹æ€§</h3>
<ul>
<li><strong>å¼‚æ­¥æ“ä½œ</strong>ï¼šæ‰€æœ‰æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä½¿ç”¨äº‹ä»¶æˆ–Promise</li>
<li><strong>äº‹åŠ¡æ”¯æŒ</strong>ï¼šåŸå­æ€§æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸè¦ä¹ˆå…¨éƒ¨å›æ»š</li>
<li><strong>ç´¢å¼•æŸ¥è¯¢</strong>ï¼šæ”¯æŒåŸºäºç´¢å¼•çš„é«˜æ•ˆæŸ¥è¯¢</li>
<li><strong>å­˜å‚¨é™åˆ¶</strong>ï¼šé€šå¸¸é™åˆ¶ä¸ºå‡ ç™¾MBï¼ˆå–å†³äºæµè§ˆå™¨ï¼‰</li>
<li><strong>æŒä¹…åŒ–å­˜å‚¨</strong>ï¼šæ•°æ®åœ¨æµè§ˆå™¨å…³é—­åä»ç„¶ä¿ç•™</li>
</ul>
<h2 data-id="heading-4">2. æ ¸å¿ƒAPI</h2>
<h3 data-id="heading-5">2.1 æ‰“å¼€æ•°æ®åº“</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> request = indexedDB.<span class="hljs-title function_">open</span>(<span class="hljs-string">'dbName'</span>, version);
</code></pre>
<h3 data-id="heading-6">2.2 åˆ›å»º/å‡çº§æ•°æ®åº“</h3>
<pre><code class="hljs language-javascript" lang="javascript">request.<span class="hljs-property">onupgradeneeded</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> db = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;
  <span class="hljs-comment">// åˆ›å»ºæˆ–å‡çº§å­˜å‚¨ç©ºé—´</span>
};
</code></pre>
<h3 data-id="heading-7">2.3 äº‹åŠ¡æ“ä½œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> transaction = db.<span class="hljs-title function_">transaction</span>(storeNames, mode);
<span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(storeName);
</code></pre>
<p>è¿™é‡Œçš„äº‹åŠ¡éœ€è¦ç‰¹åˆ«è¯´æ˜ä¸‹ã€‚ä¸ºä»€ä¹ˆè¦å¼•å…¥äº‹åŠ¡ï¼Ÿ</p>
<p>æˆ‘ä»¬ç”¨é“¶è¡Œè½¬è´¦çš„æ¡ˆä¾‹è¿›è¡Œè¯´æ˜ï¼š</p>
<p>å‡è®¾ä½ è¦ä» <strong>Aè´¦æˆ·</strong> è½¬è´¦ 100 å…ƒç»™ <strong>Bè´¦æˆ·</strong>ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…å«ä¸¤ä¸ªå¿…ä¸å¯å°‘çš„æ­¥éª¤ï¼š</p>
<ol>
<li>ä» A è´¦æˆ·æ‰£é™¤ 100 å…ƒã€‚</li>
<li>ç»™ B è´¦æˆ·å¢åŠ  100 å…ƒã€‚</li>
</ol>
<p><strong>å¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼ˆä¸å®‰å…¨çš„æƒ…å†µï¼‰ï¼š</strong> å¦‚æœåœ¨æ­¥éª¤ 1 å®Œæˆåï¼Œçªç„¶åœç”µäº†æˆ–ç³»ç»Ÿå‡ºé”™äº†ï¼Œæ­¥éª¤ 2 æ²¡æ‰§è¡Œã€‚ç»“æœå°±æ˜¯ï¼šA çš„é’±å°‘äº†ï¼ŒB æ²¡æ”¶åˆ°é’±ï¼Œè¿™ 100 å…ƒå‡­ç©ºæ¶ˆå¤±äº†ã€‚</p>
<p><strong>æœ‰äº†äº‹åŠ¡ï¼ˆå®‰å…¨çš„æƒ…å†µï¼‰ï¼š</strong> å½“ä½ ç‚¹å‡»â€œç¡®è®¤è½¬è´¦â€æ—¶ï¼Œæ•°æ®åº“å¼€å¯äº†ä¸€ä¸ªâ€œäº‹åŠ¡â€ï¼š</p>
<ul>
<li><strong>åŸå­æ€§</strong>ï¼šæ•°æ®åº“å°†æ­¥éª¤ 1 å’Œæ­¥éª¤ 2 æ‰“åŒ…æˆä¸€ä¸ªæ•´ä½“ã€‚åªæœ‰å½“ä¸¤ä¸ªæ­¥éª¤<strong>éƒ½</strong>æˆåŠŸæ—¶ï¼Œä¿®æ”¹æ‰ä¼šç”Ÿæ•ˆï¼›åªè¦ä¸­é—´ä»»æ„ä¸€æ­¥å‡ºé”™ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨â€œå›æ»šâ€ï¼Œè®©ä¸€åˆ‡å›åˆ°è½¬è´¦å‰çš„æ ·å­ï¼ˆA çš„é’±æ²¡å°‘ï¼ŒB çš„é’±æ²¡å¤šï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-8">å¯¹åº”åˆ° IndexedDB</h3>
<ul>
<li><strong>é“¶è¡Œ</strong> -&gt; æ•´ä¸ª IndexedDB æ•°æ®åº“ (<code>db</code>)</li>
<li><strong>Aè´¦æˆ·</strong> å’Œ <strong>Bè´¦æˆ·</strong> -&gt; ç›¸åŒçš„å¯¹è±¡å­˜å‚¨ (<code>accounts</code>)</li>
<li><strong>è½¬è´¦è¿™ä¸ªè¡Œä¸º</strong> -&gt; ä¸€ä¸ªäº‹åŠ¡ (<code>transaction</code>)</li>
</ul>
<p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä»£ç å¦‚ä½•å®ç°è¿™ä¸ªé€»è¾‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. å¼€å¯äº‹åŠ¡</span>
<span class="hljs-comment">// å‚æ•° ['accounts'] æŒ‡å®šäº†äº‹åŠ¡çš„ã€ä½œç”¨åŸŸã€‘ï¼šåªå…è®¸æ“ä½œ 'accounts' è¿™ä¸ªè¡¨</span>
<span class="hljs-comment">// å‚æ•° 'readwrite' æŒ‡å®šäº†ã€æ¨¡å¼ã€‘ï¼šå…è®¸ä¿®æ”¹æ•°æ®ï¼ˆè¯»å†™ï¼‰</span>
<span class="hljs-keyword">const</span> transaction = db.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'accounts'</span>], <span class="hljs-string">'readwrite'</span>);
<span class="hljs-comment">// 2. è·å–å¯¹è±¡ä»“åº“ï¼ˆè¡¨ï¼‰</span>
<span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'accounts'</span>);
<span class="hljs-comment">// --- ä»¥ä¸‹æ˜¯äº‹åŠ¡å†…çš„å…·ä½“æ“ä½œ ---</span>
<span class="hljs-comment">// æ“ä½œ Aï¼šæ›´æ–°è´¦æˆ· A çš„ä½™é¢ï¼ˆå‡è®¾åŸä¸º 1000ï¼Œç°æ”¹ä¸º 900ï¼‰</span>
store.<span class="hljs-title function_">put</span>({ <span class="hljs-attr">id</span>: <span class="hljs-string">'A'</span>, <span class="hljs-attr">balance</span>: <span class="hljs-number">900</span> });
<span class="hljs-comment">// æ“ä½œ Bï¼šæ›´æ–°è´¦æˆ· B çš„ä½™é¢ï¼ˆå‡è®¾åŸä¸º 1000ï¼Œç°æ”¹ä¸º 1100ï¼‰</span>
store.<span class="hljs-title function_">put</span>({ <span class="hljs-attr">id</span>: <span class="hljs-string">'B'</span>, <span class="hljs-attr">balance</span>: <span class="hljs-number">1100</span> });
<span class="hljs-comment">// --- ç›‘å¬äº‹åŠ¡ç»“æœ ---</span>
<span class="hljs-comment">// å¦‚æœä¸Šé¢æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸ</span>
transaction.<span class="hljs-property">oncomplete</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è½¬è´¦æˆåŠŸï¼æ•°æ®å·²æ°¸ä¹…ä¿å­˜ã€‚"</span>);
};
<span class="hljs-comment">// å¦‚æœä¸­é—´ä»»ä½•ä¸€æ­¥æŠ¥é”™ï¼ˆæ¯”å¦‚è´¦æˆ· B ä¸å­˜åœ¨ï¼Œæˆ–è€…ç£ç›˜æ»¡äº†ï¼‰</span>
transaction.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è½¬è´¦å¤±è´¥ï¼åˆšæ‰çš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼ŒA çš„ä½™é¢å˜å› 1000ã€‚"</span>);
};
</code></pre>
<p>é€šè¿‡è¿™ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°<code>IndexedDB</code>äº‹åŠ¡çš„æ ¸å¿ƒä½œç”¨ï¼š</p>
<ul>
<li><strong>åŸå­æ€§</strong>ï¼šå°†å•ä¸ªæˆ–å¤šä¸ªç›¸å…³çš„æ•°æ®åº“æ“ä½œï¼ˆæ‰£æ¬¾ã€å­˜æ¬¾ï¼‰æ‰“åŒ…æˆä¸€ä¸ªä¸å¯åˆ†å‰²çš„æ•´ä½“ã€‚</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šç¡®ä¿æ•°æ®åº“ä»ä¸€ä¸ªæ­£ç¡®çš„çŠ¶æ€ï¼ˆè½¬è´¦å‰ï¼‰è½¬æ¢åˆ°å¦ä¸€ä¸ªæ­£ç¡®çš„çŠ¶æ€ï¼ˆè½¬è´¦åï¼‰ã€‚å¦‚æœä¸­é€”å¤±è´¥ï¼Œåˆ™ä¼šå›åˆ°åˆå§‹çŠ¶æ€ï¼Œä¸ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´ï¼ˆé’±å°‘äº†ï¼‰çš„ä¸­é—´çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-9">2.4. å¸¸ç”¨æ“ä½œæ–¹æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ·»åŠ æ•°æ®</span>
store.<span class="hljs-title function_">add</span>(data);

<span class="hljs-comment">// æ›´æ–°æ•°æ®</span>
store.<span class="hljs-title function_">put</span>(data);

<span class="hljs-comment">// åˆ é™¤æ•°æ®</span>
store.<span class="hljs-title function_">delete</span>(key);

<span class="hljs-comment">// è·å–æ•°æ®</span>
store.<span class="hljs-title function_">get</span>(key);

<span class="hljs-comment">// è·å–æ‰€æœ‰æ•°æ®</span>
store.<span class="hljs-title function_">getAll</span>();

<span class="hljs-comment">// ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢</span>
store.<span class="hljs-title function_">index</span>(<span class="hljs-string">'indexName'</span>).<span class="hljs-title function_">get</span>(value);
</code></pre>
<h2 data-id="heading-10">3. æ•°æ®åº“æ“ä½œ</h2>
<h3 data-id="heading-11">3.1 æ‰“å¼€æ•°æ®åº“</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">openDB</span> = (<span class="hljs-params">dbName, version</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> request = indexedDB.<span class="hljs-title function_">open</span>(dbName, version);

    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);

    request.<span class="hljs-property">onupgradeneeded</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> db = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;
      <span class="hljs-comment">// æ•°æ®åº“å‡çº§é€»è¾‘</span>
    };
  });
};
</code></pre>
<h3 data-id="heading-12">3.2 å…³é—­æ•°æ®åº“</h3>
<pre><code class="hljs language-javascript" lang="javascript">db.<span class="hljs-title function_">close</span>();
</code></pre>
<h3 data-id="heading-13">3.3 åˆ é™¤æ•°æ®åº“</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteDB</span> = (<span class="hljs-params">dbName</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> request = indexedDB.<span class="hljs-title function_">deleteDatabase</span>(dbName);

    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æ•°æ®åº“åˆ é™¤æˆåŠŸ'</span>);
  });
};
</code></pre>
<h2 data-id="heading-14">4. äº‹åŠ¡å¤„ç†</h2>
<h3 data-id="heading-15">4.1 åˆ›å»ºäº‹åŠ¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> transaction = db.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'store1'</span>, <span class="hljs-string">'store2'</span>], <span class="hljs-string">'readwrite'</span>);
</code></pre>
<h3 data-id="heading-16">4.2 äº‹åŠ¡æ¨¡å¼</h3>
<ul>
<li><code>'readonly'</code>ï¼šåªè¯»äº‹åŠ¡</li>
<li><code>'readwrite'</code>ï¼šè¯»å†™äº‹åŠ¡</li>
<li><code>'versionchange'</code>ï¼šç‰ˆæœ¬å˜æ›´äº‹åŠ¡</li>
</ul>
<h3 data-id="heading-17">4.3 äº‹åŠ¡é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript">transaction.<span class="hljs-property">onerror</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'äº‹åŠ¡é”™è¯¯:'</span>, event.<span class="hljs-property">target</span>.<span class="hljs-property">error</span>);
};

transaction.<span class="hljs-property">onabort</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äº‹åŠ¡å·²å›æ»š'</span>);
};

transaction.<span class="hljs-property">oncomplete</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äº‹åŠ¡å®Œæˆ'</span>);
};
</code></pre>
<h3 data-id="heading-18">4.4 æ‰‹åŠ¨å›æ»šäº‹åŠ¡</h3>
<pre><code class="hljs language-javascript" lang="javascript">transaction.<span class="hljs-title function_">abort</span>();
</code></pre>
<h2 data-id="heading-19">5. æ•°æ®å­˜å‚¨</h2>
<h3 data-id="heading-20">5.1 åˆ›å»ºå¯¹è±¡å­˜å‚¨ç©ºé—´</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> store = db.<span class="hljs-title function_">createObjectStore</span>(<span class="hljs-string">'users'</span>, {
  <span class="hljs-attr">keyPath</span>: <span class="hljs-string">'id'</span>, <span class="hljs-comment">// ä½¿ç”¨æ•°æ®ä¸­çš„idå­—æ®µä½œä¸ºä¸»é”®</span>
  <span class="hljs-attr">autoIncrement</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆä¸»é”®</span>
});
</code></pre>
<h3 data-id="heading-21">5.2 æ·»åŠ æ•°æ®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">addData</span> = (<span class="hljs-params">store, data</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">add</span>(data);

    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
  });
};
</code></pre>
<h3 data-id="heading-22">5.3 æ›´æ–°æ•°æ®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateData</span> = (<span class="hljs-params">store, data</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">put</span>(data);

    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
  });
};
</code></pre>
<h3 data-id="heading-23">5.4 åˆ é™¤æ•°æ®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteData</span> = (<span class="hljs-params">store, key</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">delete</span>(key);

    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>();
    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
  });
};
</code></pre>
<h2 data-id="heading-24">6. æŸ¥è¯¢æ“ä½œ</h2>
<h3 data-id="heading-25">6.1 è·å–å•ä¸ªæ•°æ®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = (<span class="hljs-params">store, key</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">get</span>(key);

    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
  });
};
</code></pre>
<h3 data-id="heading-26">6.2 è·å–æ‰€æœ‰æ•°æ®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getAllData</span> = (<span class="hljs-params">store</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">getAll</span>();

    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
  });
};
</code></pre>
<h3 data-id="heading-27">6.3 èŒƒå›´æŸ¥è¯¢</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">rangeQuery</span> = (<span class="hljs-params">store, range</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">openCursor</span>(range);

    <span class="hljs-keyword">const</span> results = [];
    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> cursor = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;
      <span class="hljs-keyword">if</span> (cursor) {
        results.<span class="hljs-title function_">push</span>(cursor.<span class="hljs-property">value</span>);
        cursor.<span class="hljs-title function_">continue</span>();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">resolve</span>(results);
      }
    };

    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
  });
};
</code></pre>
<h2 data-id="heading-28">7. ç´¢å¼•ä½¿ç”¨</h2>
<h3 data-id="heading-29">7.1 åˆ›å»ºç´¢å¼•</h3>
<pre><code class="hljs language-javascript" lang="javascript">store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'nameIndex'</span>, <span class="hljs-string">'name'</span>, { <span class="hljs-attr">unique</span>: <span class="hljs-literal">false</span> });
store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'emailIndex'</span>, <span class="hljs-string">'email'</span>, { <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span> });
</code></pre>
<h3 data-id="heading-30">7.2 ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">queryByIndex</span> = (<span class="hljs-params">store, indexName, value</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> index = store.<span class="hljs-title function_">index</span>(indexName);
    <span class="hljs-keyword">const</span> request = index.<span class="hljs-title function_">get</span>(value);

    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
  });
};
</code></pre>
<h3 data-id="heading-31">7.3 èŒƒå›´ç´¢å¼•æŸ¥è¯¢</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">rangeQueryByIndex</span> = (<span class="hljs-params">store, indexName, range</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> index = store.<span class="hljs-title function_">index</span>(indexName);
    <span class="hljs-keyword">const</span> request = index.<span class="hljs-title function_">openCursor</span>(range);

    <span class="hljs-keyword">const</span> results = [];
    request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> cursor = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;
      <span class="hljs-keyword">if</span> (cursor) {
        results.<span class="hljs-title function_">push</span>(cursor.<span class="hljs-property">value</span>);
        cursor.<span class="hljs-title function_">continue</span>();
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">resolve</span>(results);
      }
    };

    request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
  });
};
</code></pre>
<h2 data-id="heading-32">8. å®Œæ•´ç¤ºä¾‹</h2>
<h3 data-id="heading-33">ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">dbName = <span class="hljs-string">'UserDB'</span>, version = <span class="hljs-number">1</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dbName</span> = dbName;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">version</span> = version;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span> = <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">openDB</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">openDB</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> request = indexedDB.<span class="hljs-title function_">open</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dbName</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">version</span>);

      request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
      request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);

      request.<span class="hljs-property">onupgradeneeded</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> db = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;

        <span class="hljs-keyword">if</span> (!db.<span class="hljs-property">objectStoreNames</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'users'</span>)) {
          <span class="hljs-keyword">const</span> store = db.<span class="hljs-title function_">createObjectStore</span>(<span class="hljs-string">'users'</span>, { <span class="hljs-attr">keyPath</span>: <span class="hljs-string">'id'</span> });
          store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'name'</span>, { <span class="hljs-attr">unique</span>: <span class="hljs-literal">false</span> });
          store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'email'</span>, <span class="hljs-string">'email'</span>, { <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span> });
          store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'createdAt'</span>, <span class="hljs-string">'createdAt'</span>, { <span class="hljs-attr">unique</span>: <span class="hljs-literal">false</span> });
        }
      };
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">user</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> transaction = <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'users'</span>], <span class="hljs-string">'readwrite'</span>);
      <span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'users'</span>);

      user.<span class="hljs-property">createdAt</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>();

      <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">add</span>(user);

      request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
      request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getUserById</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> transaction = <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'users'</span>], <span class="hljs-string">'readonly'</span>);
      <span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'users'</span>);
      <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">get</span>(id);

      request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
      request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getUserByEmail</span>(<span class="hljs-params">email</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> transaction = <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'users'</span>], <span class="hljs-string">'readonly'</span>);
      <span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'users'</span>);
      <span class="hljs-keyword">const</span> index = store.<span class="hljs-title function_">index</span>(<span class="hljs-string">'email'</span>);
      <span class="hljs-keyword">const</span> request = index.<span class="hljs-title function_">get</span>(email);

      request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
      request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">updateUser</span>(<span class="hljs-params">id, updates</span>) {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUserById</span>(id);
    <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç”¨æˆ·ä¸å­˜åœ¨'</span>);

    <span class="hljs-keyword">const</span> updatedUser = { ...user, ...updates };
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">putUser</span>(updatedUser);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">putUser</span>(<span class="hljs-params">user</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> transaction = <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'users'</span>], <span class="hljs-string">'readwrite'</span>);
      <span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'users'</span>);
      <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">put</span>(user);

      request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
      request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">deleteUser</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> transaction = <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'users'</span>], <span class="hljs-string">'readwrite'</span>);
      <span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'users'</span>);
      <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">delete</span>(id);

      request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>();
      request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAllUsers</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> transaction = <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'users'</span>], <span class="hljs-string">'readonly'</span>);
      <span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'users'</span>);
      <span class="hljs-keyword">const</span> request = store.<span class="hljs-title function_">getAll</span>();

      request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>);
      request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
    });
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">searchUsers</span>(<span class="hljs-params">query</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> transaction = <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'users'</span>], <span class="hljs-string">'readonly'</span>);
      <span class="hljs-keyword">const</span> store = transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'users'</span>);
      <span class="hljs-keyword">const</span> index = store.<span class="hljs-title function_">index</span>(<span class="hljs-string">'name'</span>);

      <span class="hljs-keyword">const</span> range = <span class="hljs-title class_">IDBKeyRange</span>.<span class="hljs-title function_">bound</span>(query, query + <span class="hljs-string">'\uffff'</span>);
      <span class="hljs-keyword">const</span> request = index.<span class="hljs-title function_">openCursor</span>(range);

      <span class="hljs-keyword">const</span> results = [];
      request.<span class="hljs-property">onsuccess</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> cursor = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;
        <span class="hljs-keyword">if</span> (cursor) {
          results.<span class="hljs-title function_">push</span>(cursor.<span class="hljs-property">value</span>);
          cursor.<span class="hljs-title function_">continue</span>();
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">resolve</span>(results);
        }
      };

      request.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>);
    });
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">demo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> userManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserManager</span>();
  <span class="hljs-keyword">await</span> userManager.<span class="hljs-title function_">init</span>();

  <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·</span>
  <span class="hljs-keyword">await</span> userManager.<span class="hljs-title function_">addUser</span>({
    <span class="hljs-attr">id</span>: <span class="hljs-string">'user1'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
    <span class="hljs-attr">email</span>: <span class="hljs-string">'zhangsan@example.com'</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>
  });

  <span class="hljs-comment">// è·å–ç”¨æˆ·</span>
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> userManager.<span class="hljs-title function_">getUserById</span>(<span class="hljs-string">'user1'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–ç”¨æˆ·:'</span>, user);

  <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·</span>
  <span class="hljs-keyword">await</span> userManager.<span class="hljs-title function_">updateUser</span>(<span class="hljs-string">'user1'</span>, { <span class="hljs-attr">age</span>: <span class="hljs-number">26</span> });

  <span class="hljs-comment">// æœç´¢ç”¨æˆ·</span>
  <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> userManager.<span class="hljs-title function_">searchUsers</span>(<span class="hljs-string">'å¼ '</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœç´¢ç»“æœ:'</span>, users);

  <span class="hljs-comment">// åˆ é™¤ç”¨æˆ·</span>
  <span class="hljs-keyword">await</span> userManager.<span class="hljs-title function_">deleteUser</span>(<span class="hljs-string">'user1'</span>);
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c499ffd98a4944cf9445c93fa5e6e130~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6K-65rua6Zuq55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767526813&amp;x-signature=PQhogA7NERTGA%2FqXApG4yvVrMKk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-34">æ€»ç»“</h2>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼š<code>IndexedDB</code>æ˜¯å‰ç«¯çš„æ•°æ®åº“ï¼Œ<strong>é€šå¸¸åœ¨ Web Storage æ— æ³•æ»¡è¶³å®¹é‡è¦æ±‚çš„åœºæ™¯ä¸‹æ‰ä½¿ç”¨</strong>ï¼Œå®ƒèƒ½å¤Ÿå­˜å‚¨å¤§é‡æ•°æ®ï¼Œä¸€èˆ¬ä¸è½»æ˜“ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯å­¦ä¹ AIã€‘LangChain é“¾å¼è°ƒç”¨]]></title>    <link>https://juejin.cn/post/7588092534163111936</link>    <guid>https://juejin.cn/post/7588092534163111936</guid>    <pubDate>2025-12-28T11:54:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534163111936" data-draft-id="7588124225702772776" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯å­¦ä¹ AIã€‘LangChain é“¾å¼è°ƒç”¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T11:54:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯å­¦ä¹ AIã€‘LangChain é“¾å¼è°ƒç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T11:54:09.000Z" title="Sun Dec 28 2025 11:54:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å®šä¹‰</h2>
<p>LangChainé“¾å¼è°ƒç”¨æ ¸å¿ƒæ˜¯åˆ©ç”¨ <code>|</code> è¿ç®—ç¬¦ï¼Œä¸²è” <code>PromptTemplate</code>ã€<code>ChatOpenAI</code>ã€<code>JsonOutputParser</code> ç­‰åŠŸèƒ½ç»„ä»¶ï¼Œå½¢æˆæœ‰åºæ‰§è¡Œæµæ°´çº¿ï¼Œç”Ÿæˆå…¨æ–°å¯è°ƒç”¨å¯¹è±¡ã€‚é€šè¿‡ç»Ÿä¸€è°ƒç”¨å®Œæˆç«¯åˆ°ç«¯ä»»åŠ¡ï¼Œæ— éœ€æ‰‹åŠ¨é€ç»„ä»¶ä¼ é€’å‚æ•°ï¼Œå®ç°æµç¨‹è‡ªåŠ¨åŒ–ã€‚</p>
<h2 data-id="heading-1">ç¤ºä¾‹</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> PromptTemplate
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> JsonOutputParser
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field

<span class="hljs-comment"># æ¨¡å‹åç§°ï¼Œä¿®æ­£ç©ºæ ¼é¿å…è¯†åˆ«é”™è¯¯</span>
model_name = <span class="hljs-string">"qwen-plus"</span> 
<span class="hljs-comment"># æ¨¡å‹åŸºç¡€åœ°å€ï¼Œä¿®æ­£ç©ºæ ¼ç¡®ä¿é“¾æ¥æœ‰æ•ˆæ€§</span>
base_url = <span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span> 
<span class="hljs-comment"># æ›¿æ¢ä¸ºä¸ªäººæœ‰æ•ˆAPI Keyï¼ŒåŸç¬”è®°ä¸­çš„æ•æ„Ÿä¿¡æ¯å·²æ›¿æ¢ä¸ºå ä½ç¬¦å¹¶æç¤ºæ›¿æ¢</span>
api_key = <span class="hljs-string">"[API Key]"</span> 

<span class="hljs-comment"># å¤§æ¨¡å‹åˆå§‹åŒ–ï¼ˆå‚æ•°é…ç½®è§ä¸“é¡¹ç¬”è®°ï¼‰</span>
llm = ChatOpenAI(
    model_name=model_name,
    base_url=base_url,
    api_key=api_key
)

<span class="hljs-comment"># æç¤ºæ¨¡æ¿åˆå§‹åŒ–ï¼ˆç»†èŠ‚è§ä¸“é¡¹ç¬”è®°ï¼‰</span>
prompt_template = PromptTemplate.from_template(
    <span class="hljs-string">"""é—®é¢˜å†…å®¹ï¼šè®¡ç®—{num1}å’Œ{num2}çš„å’Œã€‚è¾“å‡ºæ ¼å¼ï¼š{format_instructions}"""</span>
)

<span class="hljs-comment"># è¾“å‡ºè§£æå™¨ç›¸å…³ï¼ˆç»†èŠ‚è§ä¸“é¡¹ç¬”è®°ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-comment"># ä¸¤ä¸ªæ•°çš„å’Œï¼ˆæ•´æ•°ç±»å‹ï¼‰</span>
    <span class="hljs-built_in">sum</span>: <span class="hljs-built_in">int</span> 
    <span class="hljs-comment"># è®¡ç®—è¿‡ç¨‹æè¿°ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰</span>
    description: <span class="hljs-built_in">str</span> 

    _ = (
        <span class="hljs-built_in">sum</span>.set_config(description=<span class="hljs-string">"ä¸¤ä¸ªæ•°çš„å’Œ"</span>),
        description.set_config(description=<span class="hljs-string">"è®¡ç®—æè¿°"</span>)
    )

<span class="hljs-comment"># åˆå§‹åŒ–JSONè¾“å‡ºè§£æå™¨ï¼Œå…³è”Resultæ¨¡å‹</span>
json_output_parser = JsonOutputParser(pydantic_object=Result)
<span class="hljs-comment"># é¢„å¡«å……æ ¼å¼è¯´æ˜ï¼Œé¿å…é‡å¤ä¼ å‚</span>
prompt_template = prompt_template.partial(
    format_instructions=json_output_parser.get_format_instructions()
)

<span class="hljs-comment"># æ„å»ºé“¾å¼è°ƒç”¨ï¼šæç¤ºæ¨¡æ¿â†’å¤§æ¨¡å‹â†’è¾“å‡ºè§£æå™¨</span>
chain = prompt_template | llm | json_output_parser

<span class="hljs-comment"># invokeæ–¹æ³•ï¼šåŒæ­¥è°ƒç”¨ï¼Œç›´æ¥è·å–å®Œæ•´ç»“æœï¼ˆé€‚ç”¨äºéœ€å®Œæ•´ç»“æœåœºæ™¯ï¼‰</span>
result = chain.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"num1"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"num2"</span>: <span class="hljs-number">20</span>})
<span class="hljs-comment"># æ‰“å°æœ€ç»ˆç»“æ„åŒ–ç»“æœ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"invokeæ–¹æ³•ç»“æœï¼š"</span>, result)
</code></pre>
<h3 data-id="heading-2">æ‰§è¡Œç°è±¡</h3>
<p>ç»“åˆç¤ºä¾‹å¯è§ï¼ŒLangChainé“¾å¼è°ƒç”¨çš„æ ¸å¿ƒç°è±¡æ˜¯ï¼šé€šè¿‡ <code>|</code> è¿ç®—ç¬¦å¯ç›´æ¥å…³è”å¤šä¸ªLangChainæ ¸å¿ƒå¯¹è±¡ï¼ˆç¤ºä¾‹ä¸­ä¸º <code>prompt_template</code>ã€<code>llm</code>ã€<code>json_output_parser</code>ï¼‰ï¼Œå¿«é€Ÿç”Ÿæˆå…·å¤‡è‡ªåŠ¨åŒ–æµæ°´çº¿èƒ½åŠ›çš„å…¨æ–°é“¾å¼å¯¹è±¡ï¼ˆç¤ºä¾‹ä¸­çš„ <code>chain</code>ï¼‰ã€‚</p>
<p>è¯¥é“¾å¼å¯¹è±¡ä»…éœ€è°ƒç”¨ <code>invoke</code> æ–¹æ³•å¹¶ä¼ å…¥åˆå§‹å‚æ•°ï¼ˆç¤ºä¾‹ä¸­ä¸º <code>num1 = 10</code>ã€<code>num2 = 20</code>ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ä¸­é—´æµç¨‹ï¼Œå†…éƒ¨ä¼šæŒ‰ç»„ä»¶ä¸²è”é¡ºåºè‡ªåŠ¨è§¦å‘å¯¹åº”æ–¹æ³•ï¼Œå®ç°æ•°æ®æ¥åŠ›å¤„ç†å¹¶è¿”å›æœ€ç»ˆç»“æœã€‚</p>
<p>è¡¥å……è¯´æ˜ï¼šé™¤ç¤ºä¾‹ä¸­ä½¿ç”¨çš„ <code>invoke</code> åŒæ­¥è°ƒç”¨å¤–ï¼Œé“¾å¼å¯¹è±¡è¿˜æ”¯æŒ <code>stream</code> æµå¼è°ƒç”¨ï¼ˆç¤ºä¾‹æœªæ¶‰åŠï¼‰ï¼Œå¯é€å—è·å–ç»“æœï¼Œé€‚åˆéœ€è¦å®æ—¶å±•ç¤ºå“åº”çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-3">æ„å»ºé€»è¾‘</h3>
<p>ç¤ºä¾‹çš„æ„å»ºé€»è¾‘éµå¾ªã€Œæ•°æ®æµè½¬æ–¹å‘ã€ï¼šæŒ‰ â€œæç¤ºæ¨¡æ¿â†’å¤§æ¨¡å‹â†’è¾“å‡ºè§£æå™¨â€ çš„é¡ºåºï¼Œç”¨ <code>|</code> ä¸²è”ç»„ä»¶ã€‚æ ¸å¿ƒè§„åˆ™æ˜¯å‰ä¸€ç»„ä»¶çš„è¾“å‡ºå¿…é¡»èƒ½ä½œä¸ºåä¸€ç»„ä»¶çš„è¾“å…¥ï¼Œç¤ºä¾‹ä¸­ï¼š</p>
<ul>
<li><strong>æç¤ºæ¨¡æ¿ï¼ˆ<code>prompt_template</code>ï¼‰</strong>ï¼šæ¥æ”¶åˆå§‹å‚æ•°ï¼Œç”ŸæˆåŒ…å«è®¡ç®—éœ€æ±‚å’Œæ ¼å¼è¦æ±‚çš„æç¤ºè¯ã€‚</li>
<li><strong>å¤§æ¨¡å‹ï¼ˆ<code>llm</code>ï¼‰</strong>ï¼šæ¥æ”¶æç¤ºè¯ï¼Œç”Ÿæˆç¬¦åˆè¦æ±‚çš„å“åº”å†…å®¹ã€‚</li>
<li><strong>è¾“å‡ºè§£æå™¨ï¼ˆ<code>json_output_parser</code>ï¼‰</strong>ï¼šæ¥æ”¶å“åº”å†…å®¹ï¼Œè½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹æ„å»ºæ ¸å¿ƒä»£ç ï¼ˆæŒ‰æ•°æ®æµè½¬é¡ºåºä¸²è”ï¼‰</span>
chain = prompt_template | llm | json_output_parser
</code></pre>
<h3 data-id="heading-4">æ‰§è¡Œæµç¨‹</h3>
<p>ç¤ºä¾‹ä¸­é‡‡ç”¨ <code>invoke</code> åŒæ­¥æ‰§è¡Œæ–¹å¼ï¼Œæµç¨‹ç®€æ´ä¸”è‡ªåŠ¨åŒ–ï¼Œå…·ä½“æ­¥éª¤ï¼š</p>
<ol>
<li>è°ƒç”¨é“¾å¼å¯¹è±¡çš„ <code>invoke</code> æ–¹æ³•ï¼Œä¼ å…¥åˆå§‹å‚æ•°ï¼ˆç¤ºä¾‹ä¸­ä¸º <code>{"num1": 10, "num2": 20}</code>ï¼‰ã€‚</li>
<li>å†…éƒ¨è‡ªåŠ¨æ‰§è¡Œï¼šåˆå§‹å‚æ•°å…ˆä¼ å…¥æç¤ºæ¨¡æ¿ç”Ÿæˆæç¤ºè¯ï¼Œæç¤ºè¯ä¼ å…¥å¤§æ¨¡å‹ç”Ÿæˆå“åº”ï¼Œå“åº”ä¼ å…¥è§£æå™¨è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®ã€‚</li>
<li>æ‰§è¡Œå®Œæˆåï¼Œç›´æ¥è¿”å›æœ€ç»ˆçš„ç»“æ„åŒ–ç»“æœï¼Œé€šè¿‡ <code>print</code> è¯­å¥å³å¯æŸ¥çœ‹ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç¤ºä¾‹æ‰§è¡Œæ ¸å¿ƒä»£ç ï¼ˆinvokeåŒæ­¥è°ƒç”¨ï¼‰</span>
result = chain.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"num1"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"num2"</span>: <span class="hljs-number">20</span>})
<span class="hljs-built_in">print</span>(<span class="hljs-string">"invokeæ–¹æ³•ç»“æœï¼š"</span>, result)
</code></pre>
<p>è¡¥å……è¯´æ˜ï¼ˆæµå¼è°ƒç”¨ï¼‰ï¼šè‹¥éœ€ä½¿ç”¨æµå¼è°ƒç”¨ï¼Œå¯å°† <code>invoke</code> æ›¿æ¢ä¸º <code>stream</code>ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼ˆéåŸç¤ºä¾‹å†…å®¹ï¼Œä»…ä½œæ‰©å±•ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æµå¼è°ƒç”¨ç¤ºä¾‹ï¼ˆæ‰©å±•ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"streamæ–¹æ³•ç»“æœï¼š"</span>)
<span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> chain.stream(<span class="hljs-built_in">input</span>={<span class="hljs-string">"num1"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"num2"</span>: <span class="hljs-number">20</span>}):
    <span class="hljs-comment"># è¿‡æ»¤ç©ºç‰‡æ®µï¼Œç¡®ä¿è¾“å‡ºæ•´æ´</span>
    <span class="hljs-keyword">if</span> chunk:
        <span class="hljs-built_in">print</span>(chunk)
</code></pre>
<h2 data-id="heading-5">åŸç†</h2>
<ul>
<li><strong>ä¸²è”ä¸æ‰§è¡Œé€»è¾‘</strong>ï¼š<code>|</code> è¿ç®—ç¬¦å°†å®ç° <code>Runnable</code> æ¥å£çš„ç»„ä»¶ä¸²è”ä¸ºæµæ°´çº¿ã€‚è°ƒç”¨ <code>invoke</code> æˆ– <code>stream</code> æ—¶ï¼Œåˆå§‹å‚æ•°ä»…éœ€ä¼ å…¥ç¬¬ä¸€ä¸ªç»„ä»¶ï¼Œåç»­ç»„ä»¶é€šè¿‡å†…éƒ¨è‡ªåŠ¨æ¥åŠ›å®Œæˆæ‰§è¡Œï¼Œæœ€ç»ˆè¿”å›å¯¹åº”ç»“æœã€‚</li>
<li><strong>ä¸²è”é¡ºåºè§„åˆ™</strong>ï¼šå¿…é¡»éµå¾ªã€Œæ•°æ®è¾“å…¥â†’å¤„ç†ç»„ä»¶â†’è¾“å‡ºç»„ä»¶ã€çš„é€»è¾‘ï¼ˆå¦‚ç¤ºä¾‹ä¸­ã€Œæç¤ºæ¨¡æ¿â†’å¤§æ¨¡å‹â†’è§£æå™¨ã€ï¼‰ï¼Œé¡ºåºé”™è¯¯ä¼šå¯¼è‡´æ•°æ®æ ¼å¼ä¸åŒ¹é…ï¼Œè¿›è€Œä¸­æ–­æ‰§è¡Œæµç¨‹ã€‚</li>
<li><strong>è°ƒç”¨æ–¹æ³•è¦ç‚¹</strong>ï¼š<code>invoke</code> å’Œ <code>stream</code> å‡åªéœ€ä¼ å…¥ç¬¬ä¸€ä¸ªç»„ä»¶æ‰€éœ€çš„åˆå§‹å‚æ•°ï¼Œä¸­é—´å‚æ•°ç”±é“¾å¼å†…éƒ¨è‡ªåŠ¨ä¼ é€’ï¼›å‰è€…é€‚åˆéœ€è¦å®Œæ•´ç»“æœçš„åœºæ™¯ï¼Œåè€…é€‚åˆéœ€å®æ—¶å±•ç¤ºç»“æœçš„åœºæ™¯ã€‚</li>
<li><strong>ç»„ä»¶å…¼å®¹æ€§è¦æ±‚</strong>ï¼šå¯é€šè¿‡ <code>|</code> ä¸²è”çš„ç»„ä»¶éœ€å®ç° LangChain çš„ <code>Runnable</code> æ¥å£ï¼Œæ ¸å¿ƒç»„ä»¶é»˜è®¤å·²å®ç°ï¼Œå¯ç›´æ¥ä¸²è”ã€‚</li>
</ul>
<h2 data-id="heading-6">å¸¸è§é—®é¢˜</h2>
<ul>
<li><strong>ç»„ä»¶ä¸å…¼å®¹æŠ¥é”™</strong>ï¼šè‹¥è‡ªå®šä¹‰ç»„ä»¶æ— æ³•ä¸²è”ï¼Œæˆ–è°ƒç”¨ <code>invoke/stream</code> æ—¶æŠ¥é”™ï¼Œéœ€ä¼˜å…ˆæ£€æŸ¥ç»„ä»¶æ˜¯å¦å®ç° <code>Runnable</code> æ¥å£åŠå¯¹åº”çš„è°ƒç”¨æ–¹æ³•ã€‚</li>
<li><strong>æ‰§è¡Œæµç¨‹ä¸­æ–­</strong>ï¼šå¤šæ•°å› ç»„ä»¶é¡ºåºé”™è¯¯ï¼Œæˆ–å‰åºç»„ä»¶è¾“å‡ºæ ¼å¼ä¸ååºç»„ä»¶è¾“å…¥è¦æ±‚ä¸åŒ¹é…ï¼Œéœ€æ ¸å¯¹ä¸²è”é¡ºåºå¹¶æ ¡éªŒç»„ä»¶é—´æ•°æ®æ ¼å¼ã€‚</li>
<li><strong>å‚æ•°ä¼ é€’å¤±è´¥</strong>ï¼šæ£€æŸ¥ä¼ å…¥çš„åˆå§‹å‚æ•°æ˜¯å¦ç¬¦åˆç¬¬ä¸€ä¸ªç»„ä»¶çš„æ ¼å¼è¦æ±‚ï¼Œé¿å…é—æ¼å¿…å¡«å‚æ•°æˆ–å‚æ•°ç±»å‹é”™è¯¯ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬7è®²ï¼šç´¢å¼•ï¼ˆä¸‹ï¼‰â€”â€”å¤±æ•ˆåœºæ™¯ä¸ä¼˜åŒ–å®æˆ˜]]></title>    <link>https://juejin.cn/post/7588098335791136768</link>    <guid>https://juejin.cn/post/7588098335791136768</guid>    <pubDate>2025-12-28T07:40:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335791136768" data-draft-id="7588095884070567936" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬7è®²ï¼šç´¢å¼•ï¼ˆä¸‹ï¼‰â€”â€”å¤±æ•ˆåœºæ™¯ä¸ä¼˜åŒ–å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,MySQL"/> <meta itemprop="datePublished" content="2025-12-28T07:40:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éª‘ç€bugçš„coder"/> <meta itemprop="url" content="https://juejin.cn/user/1922418579089566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬7è®²ï¼šç´¢å¼•ï¼ˆä¸‹ï¼‰â€”â€”å¤±æ•ˆåœºæ™¯ä¸ä¼˜åŒ–å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1922418579089566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éª‘ç€bugçš„coder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T07:40:28.000Z" title="Sun Dec 28 2025 07:40:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ç›®æ ‡ï¼š</strong> è¯†åˆ«ç´¢å¼•å¤±æ•ˆåœºæ™¯ï¼ŒæŒæ¡æ…¢æŸ¥è¯¢ä¼˜åŒ–æ–¹æ³•</p>
</blockquote>
<h2 data-id="heading-0">å¼€ç¯‡ï¼šç´¢å¼•åŠ äº†ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯æ…¢ï¼Ÿ</h2>
<p>ä¸Šä¸€è®²å­¦å®Œï¼Œä½ ä¿¡å¿ƒæ»¡æ»¡åœ°ç»™è¡¨åŠ äº†ç´¢å¼•ã€‚ç»“æœæŸ¥è¯¢è¿˜æ˜¯æ…¢ï¼ŒEXPLAINä¸€çœ‹ï¼Œtype=ALLï¼Œç´¢å¼•æ ¹æœ¬æ²¡ç”¨ä¸Šã€‚</p>
<p>è¿™æ˜¯å¾ˆå¤šäººéƒ½ä¼šé‡åˆ°çš„å‘ï¼šç´¢å¼•åŠ äº†ï¼Œä½†å¤±æ•ˆäº†ã€‚</p>
<p>å°±åƒä½ ä¹°äº†è¾†è·‘è½¦ï¼Œç»“æœä¸€ç›´æŒ‚ç€ä¸€æ¡£å¼€ï¼Œé€Ÿåº¦è¿˜æ˜¯ä¸Šä¸å»ã€‚ä¸æ˜¯è½¦ä¸è¡Œï¼Œæ˜¯ç”¨æ³•ä¸å¯¹ã€‚</p>
<p>ä»Šå¤©è¿™ä¸€è®²ï¼Œæˆ‘ä¼šå…ˆæ•™ä½ ç”¨EXPLAINå·¥å…·åˆ†ææ‰§è¡Œè®¡åˆ’ï¼Œç„¶åç”¨1000ä¸‡æ•°æ®å®æˆ˜æ¼”ç¤ºç´¢å¼•ä¼˜åŒ–çš„å®Œæ•´è¿‡ç¨‹ï¼Œæœ€åæ€»ç»“12ç§ç´¢å¼•å¤±æ•ˆåœºæ™¯ã€‚çœ‹å®Œä½ å°±èƒ½å¿«é€Ÿå®šä½é—®é¢˜ï¼ŒæŠŠæ…¢æŸ¥è¯¢ä»8ç§’ä¼˜åŒ–åˆ°0.05ç§’ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å‡†å¤‡å·¥ä½œï¼šå¿«é€Ÿæ„é€ 1000ä¸‡æµ‹è¯•æ•°æ®</h2>
<p>åœ¨å­¦ä¹ EXPLAINå’Œç´¢å¼•ä¼˜åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå‡†å¤‡ä¸€ä¸ª1000ä¸‡æ•°æ®çš„è®¢å•è¡¨ã€‚è¿™æ ·åé¢è®²è§£æ—¶ï¼Œä½ å¯ä»¥è·Ÿç€ä¸€èµ·å®è·µã€‚</p>
<h3 data-id="heading-2">1. è¡¨ç»“æ„è¯´æ˜</h3>
<p><strong>å¦‚æœç¬¬å…­è®²å·²ç»åˆ›å»ºäº†ordersè¡¨ï¼š</strong></p>
<ul>
<li>å»ºè®®å…ˆåˆ é™¤é‡å»ºï¼ˆ<code>DROP TABLE orders;</code>ï¼‰</li>
<li>åŸå› ï¼šå…ˆå¯¼å…¥æ•°æ®å†å»ºç´¢å¼•ï¼Œæ¯”æœ‰ç´¢å¼•æ—¶å¯¼å…¥å¿«10å€ä»¥ä¸Š</li>
<li>ç­–ç•¥ï¼šè£¸è¡¨å¯¼æ•°æ®ï¼ˆåªæœ‰ä¸»é”®ï¼‰â†’ å¯¼å…¥å®Œæˆ â†’ å†åˆ›å»ºä¸šåŠ¡ç´¢å¼•</li>
</ul>
<p><strong>åˆ›å»ºè£¸è¡¨ï¼ˆåªæœ‰ä¸»é”®ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> orders;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders (
  id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT COMMENT <span class="hljs-string">'è®¢å•ID'</span>,
  user_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·ID'</span>,
  status TINYINT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'è®¢å•çŠ¶æ€ï¼š0å¾…æ”¯ä»˜ 1å·²æ”¯ä»˜ 2å·²å®Œæˆ'</span>,
  amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è®¢å•é‡‘é¢'</span>,
  created_at DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  updated_at DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'è®¢å•è¡¨'</span>;
</code></pre>
<h3 data-id="heading-3">2. å¯¼å…¥æ•°æ®</h3>
<p><strong>æ¨èæ–¹å¼ï¼šä½¿ç”¨LOAD DATAå‘½ä»¤ï¼ˆåœ¨NavicatæŸ¥è¯¢çª—å£æ‰§è¡Œï¼‰</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸ºä»€ä¹ˆç”¨LOAD DATAï¼Ÿ</span>
<span class="hljs-comment">-- 1. ç›´æ¥è¯»å–æ–‡ä»¶ï¼Œä¸èµ°ç½‘ç»œä¼ è¾“</span>
<span class="hljs-comment">-- 2. æ‰¹é‡æ’å…¥ï¼Œæ¯”INSERTå¿«100å€</span>
<span class="hljs-comment">-- 3. MySQLå®˜æ–¹æ¨èçš„å¤§æ•°æ®å¯¼å…¥æ–¹å¼</span>

LOAD DATA <span class="hljs-keyword">LOCAL</span> INFILE <span class="hljs-string">'D:/path/to/orders_data.csv'</span>  <span class="hljs-comment">-- æ”¹ä¸ºä½ çš„CSVæ–‡ä»¶è·¯å¾„ï¼Œcsvæ–‡ä»¶å¯ä»¥ç§ä¿¡åšä¸»</span>
<span class="hljs-keyword">INTO</span> <span class="hljs-keyword">TABLE</span> orders
FIELDS TERMINATED <span class="hljs-keyword">BY</span> <span class="hljs-string">','</span>      <span class="hljs-comment">-- å­—æ®µåˆ†éš”ç¬¦ï¼šé€—å·</span>
LINES TERMINATED <span class="hljs-keyword">BY</span> <span class="hljs-string">'\n'</span>      <span class="hljs-comment">-- è¡Œåˆ†éš”ç¬¦ï¼šæ¢è¡Œ</span>
(user_id, status, amount, created_at);  <span class="hljs-comment">-- å­—æ®µé¡ºåºï¼ˆä¸åŒ…å«idï¼Œè‡ªåŠ¨é€’å¢ï¼‰</span>

<span class="hljs-comment">-- éªŒè¯å¯¼å…¥ç»“æœ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> orders;  <span class="hljs-comment">-- åº”è¯¥æ˜¯10000000</span>
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>LOCAL INFILE</code>ï¼šä»å®¢æˆ·ç«¯è¯»å–æ–‡ä»¶ï¼ˆä¸æ˜¯æœåŠ¡å™¨ç«¯ï¼‰</li>
<li><code>FIELDS TERMINATED BY ','</code>ï¼šCSVç”¨é€—å·åˆ†éš”</li>
<li><code>LINES TERMINATED BY '\n'</code>ï¼šæ¯è¡Œä¸€æ¡è®°å½•</li>
<li><code>(user_id, status, amount, created_at)</code>ï¼šCSVå­—æ®µé¡ºåºï¼Œidè‡ªåŠ¨ç”Ÿæˆ</li>
</ul>
<p><strong>å¯¼å…¥æ—¶é—´ï¼š</strong> çº¦5åˆ†é’Ÿï¼ˆ1000ä¸‡æ¡æ•°æ®ï¼Œä½¿ç”¨Navicatå®æµ‹ï¼‰</p>
<h3 data-id="heading-4">3. åˆ›å»ºç´¢å¼•</h3>
<p><strong>æ•°æ®å¯¼å…¥å®Œæˆåï¼Œå†åˆ›å»ºç´¢å¼•ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºä¸šåŠ¡ç´¢å¼•ï¼ˆæ¯ä¸ªç´¢å¼•çº¦éœ€60ç§’ï¼Œå…±çº¦2åˆ†é’Ÿï¼‰</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> INDEX idx_user_id(user_id);
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> INDEX idx_created_at(created_at);

<span class="hljs-comment">-- éªŒè¯ç´¢å¼•</span>
<span class="hljs-keyword">SHOW</span> INDEX <span class="hljs-keyword">FROM</span> orders;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a1eca542de24d95a0c0fc85e739d9fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=tVsyNeTYwjGq%2Fiw0sfiJ1tcIg9Y%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä¸ºä»€ä¹ˆå…ˆå¯¼æ•°æ®å†å»ºç´¢å¼•ï¼Ÿ</strong></p>
<ul>
<li>æœ‰ç´¢å¼•æ—¶å¯¼å…¥ï¼šæ¯æ’å…¥ä¸€è¡Œéƒ½è¦ç»´æŠ¤ç´¢å¼•ï¼Œæ…¢</li>
<li>æ— ç´¢å¼•æ—¶å¯¼å…¥ï¼šç›´æ¥å†™å…¥æ•°æ®ï¼Œå¿«</li>
<li>å¯¼å…¥åå»ºç´¢å¼•ï¼šä¸€æ¬¡æ€§æ„å»ºç´¢å¼•æ ‘ï¼Œæ¯”é€è¡Œç»´æŠ¤å¿«10å€</li>
</ul>
<h2 data-id="heading-5">äºŒã€EXPLAINå·¥å…·å®Œæ•´ä½¿ç”¨æŒ‡å—</h2>
<p>æ•°æ®å‡†å¤‡å¥½äº†ï¼Œç°åœ¨æ¥å­¦ä¹ EXPLAINå·¥å…·ã€‚æƒ³çŸ¥é“SQLæœ‰æ²¡æœ‰èµ°ç´¢å¼•ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯ç”¨EXPLAINã€‚</p>
<h3 data-id="heading-6">1. EXPLAINåŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åœ¨ä»»ä½•SELECTè¯­å¥å‰åŠ ä¸ŠEXPLAIN</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b40438157d0b455abee045e1cd16fc99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=DMhIdY8g5lrlGKZc1rSku80l%2FR8%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰§è¡Œåä¼šè¿”å›ä¸€å¼ è¡¨ï¼ŒåŒ…å«12ä¸ªå­—æ®µã€‚æˆ‘ä»¬å…ˆæ•´ä½“äº†è§£ï¼Œå†é‡ç‚¹æŒæ¡æ ¸å¿ƒå­—æ®µã€‚</p>
<h3 data-id="heading-7">2. EXPLAINå­—æ®µå…¨è§ˆ</h3>






































































<table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th><th>é‡è¦ç¨‹åº¦</th></tr></thead><tbody><tr><td><strong>id</strong></td><td>æŸ¥è¯¢åºå·ï¼Œæ•°å­—è¶Šå¤§è¶Šå…ˆæ‰§è¡Œ</td><td>â­</td></tr><tr><td><strong>select_type</strong></td><td>æŸ¥è¯¢ç±»å‹ï¼ˆSIMPLE/PRIMARY/SUBQUERYç­‰ï¼‰</td><td>â­</td></tr><tr><td><strong>table</strong></td><td>æŸ¥è¯¢çš„è¡¨å</td><td>â­</td></tr><tr><td><strong>partitions</strong></td><td>åŒ¹é…çš„åˆ†åŒºï¼ˆåˆ†åŒºè¡¨æ‰æœ‰å€¼ï¼‰</td><td>-</td></tr><tr><td><strong>type</strong></td><td>è®¿é—®ç±»å‹ï¼ˆå…¨è¡¨æ‰«æ/ç´¢å¼•æ‰«æç­‰ï¼‰</td><td>â­â­â­ æ ¸å¿ƒ</td></tr><tr><td><strong>possible_keys</strong></td><td>å¯èƒ½ç”¨åˆ°çš„ç´¢å¼•</td><td>â­â­</td></tr><tr><td><strong>key</strong></td><td>å®é™…ä½¿ç”¨çš„ç´¢å¼•</td><td>â­â­â­ æ ¸å¿ƒ</td></tr><tr><td><strong>key_len</strong></td><td>ç´¢å¼•ä½¿ç”¨çš„å­—èŠ‚æ•°</td><td>â­â­</td></tr><tr><td><strong>ref</strong></td><td>ç´¢å¼•å…³è”çš„åˆ—æˆ–å¸¸é‡</td><td>â­</td></tr><tr><td><strong>rows</strong></td><td>é¢„ä¼°æ‰«æè¡Œæ•°</td><td>â­â­â­ æ ¸å¿ƒ</td></tr><tr><td><strong>filtered</strong></td><td>è¿‡æ»¤åå‰©ä½™æ•°æ®çš„ç™¾åˆ†æ¯”</td><td>â­</td></tr><tr><td><strong>Extra</strong></td><td>é¢å¤–ä¿¡æ¯ï¼ˆæ˜¯å¦å›è¡¨ã€æ˜¯å¦æ’åºç­‰ï¼‰</td><td>â­â­â­ æ ¸å¿ƒ</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒå­—æ®µï¼ˆå¿…é¡»æŒæ¡ï¼‰ï¼š</strong> typeã€keyã€rowsã€Extraã€key_len</p>
<h3 data-id="heading-8">3. æ ¸å¿ƒå­—æ®µè¯¦è§£</h3>
<h4 data-id="heading-9">å­—æ®µ1ï¼štypeï¼ˆè®¿é—®ç±»å‹ï¼‰â­â­â­</h4>
<p>è¿™æ˜¯æœ€é‡è¦çš„å­—æ®µï¼Œè¡¨ç¤ºMySQLç”¨ä»€ä¹ˆæ–¹å¼æŸ¥æ‰¾æ•°æ®ã€‚</p>





















































<table><thead><tr><th>typeå€¼</th><th>å«ä¹‰</th><th>æ€§èƒ½</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>system</strong></td><td>ç³»ç»Ÿè¡¨ï¼Œåªæœ‰ä¸€è¡Œæ•°æ®</td><td>æœ€å¿«</td><td>æŸ¥è¯¢ç³»ç»Ÿè¡¨</td></tr><tr><td><strong>const</strong></td><td>ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢</td><td>æå¿«</td><td>WHERE id = 1</td></tr><tr><td><strong>eq_ref</strong></td><td>ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•å…³è”æŸ¥è¯¢</td><td>å¾ˆå¿«</td><td>JOINæ—¶ç”¨ä¸»é”®å…³è”</td></tr><tr><td><strong>ref</strong></td><td>éå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢</td><td>å¿«</td><td>WHERE user_id = 10001</td></tr><tr><td><strong>range</strong></td><td>èŒƒå›´æŸ¥è¯¢</td><td>åˆæ ¼</td><td>WHERE id &gt; 100</td></tr><tr><td><strong>index</strong></td><td>å…¨ç´¢å¼•æ‰«æ</td><td>æ…¢</td><td>æ‰«ææ•´ä¸ªç´¢å¼•æ ‘</td></tr><tr><td><strong>ALL</strong></td><td>å…¨è¡¨æ‰«æ</td><td>æœ€æ…¢</td><td>æ²¡ç”¨ç´¢å¼•</td></tr></tbody></table>
<p><strong>æ€§èƒ½æ’åºï¼ˆä»å¥½åˆ°åï¼‰ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">system</span> <span class="hljs-operator">&gt;</span> const <span class="hljs-operator">&gt;</span> eq_ref <span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ref</span> <span class="hljs-operator">&gt;</span> <span class="hljs-keyword">range</span> <span class="hljs-operator">&gt;</span> index <span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ALL</span>
</code></pre>
<p><strong>ä¼˜åŒ–ç›®æ ‡ï¼š</strong> è‡³å°‘è¾¾åˆ°rangeï¼Œæœ€å¥½æ˜¯refæˆ–constã€‚</p>
<h4 data-id="heading-10">å­—æ®µ2ï¼škeyï¼ˆå®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼‰â­â­â­</h4>
<ul>
<li>æ˜¾ç¤ºç´¢å¼•åç§°ï¼šè¯´æ˜ç”¨åˆ°äº†ç´¢å¼•</li>
<li><strong>NULLï¼šæ²¡ç”¨ç´¢å¼•ï¼Œéœ€è¦ä¼˜åŒ–</strong></li>
</ul>
<h4 data-id="heading-11">å­—æ®µ3ï¼šrowsï¼ˆé¢„ä¼°æ‰«æè¡Œæ•°ï¼‰â­â­â­</h4>
<p>MySQLé¢„ä¼°éœ€è¦æ‰«æå¤šå°‘è¡Œæ•°æ®ã€‚</p>
<ul>
<li>rows=1ï¼šæœ€ç†æƒ³</li>
<li>rows=100ï¼šè¿˜å¯ä»¥</li>
<li>rows=100000ï¼šéœ€è¦ä¼˜åŒ–</li>
<li>rows=10000000ï¼šä¸¥é‡é—®é¢˜</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong> rowsæ˜¯é¢„ä¼°å€¼ï¼Œä¸æ˜¯å®é™…å€¼ï¼Œä½†å¯ä»¥ä½œä¸ºå‚è€ƒã€‚</p>
<h4 data-id="heading-12">å­—æ®µ4ï¼šExtraï¼ˆé¢å¤–ä¿¡æ¯ï¼‰â­â­â­</h4>








































<table><thead><tr><th>Extraå€¼</th><th>å«ä¹‰</th><th>ä¼˜åŒ–å»ºè®®</th></tr></thead><tbody><tr><td><strong>Using index</strong></td><td>è¦†ç›–ç´¢å¼•ï¼Œä¸éœ€è¦å›è¡¨æŸ¥è¯¢</td><td>âœ… æœ€ä¼˜ï¼ˆæ— éœ€ä¼˜åŒ–ï¼‰</td></tr><tr><td><strong>Using index condition</strong></td><td>ç´¢å¼•ä¸‹æ¨ï¼ˆICPï¼‰ï¼Œåœ¨ç´¢å¼•å±‚é¢è¿‡æ»¤æ•°æ®</td><td>âœ… è‰¯å¥½ï¼ˆæ— éœ€ä¼˜åŒ–ï¼‰</td></tr><tr><td><strong>Using MRR</strong></td><td>å¤šèŒƒå›´è¯»ä¼˜åŒ–ï¼Œæ‰¹é‡å›è¡¨å‡å°‘éšæœºIO</td><td>âœ… è‰¯å¥½ï¼ˆèŒƒå›´æŸ¥è¯¢è‡ªåŠ¨ä¼˜åŒ–ï¼‰</td></tr><tr><td><strong>Using where</strong></td><td>åœ¨Serverå±‚ä½¿ç”¨WHEREè¿‡æ»¤æ•°æ®</td><td>âš ï¸ æ­£å¸¸ï¼ˆå¯ä¼˜åŒ–ä¸ºè¦†ç›–ç´¢å¼•ï¼‰</td></tr><tr><td><strong>Using filesort</strong></td><td>éœ€è¦é¢å¤–çš„æ’åºæ“ä½œï¼ˆå†…å­˜æˆ–ç£ç›˜ï¼‰</td><td>âš ï¸ æ¨èä¼˜åŒ–ï¼ˆè€ƒè™‘æ·»åŠ æ’åºç´¢å¼•ï¼‰</td></tr><tr><td><strong>Using temporary</strong></td><td>ä½¿ç”¨ä¸´æ—¶è¡¨ï¼ˆGROUP BYæˆ–DISTINCTï¼‰</td><td>âŒ å¿…é¡»ä¼˜åŒ–ï¼ˆæ€§èƒ½æ€æ‰‹ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-13">å­—æ®µ5ï¼škey_lenï¼ˆç´¢å¼•ä½¿ç”¨é•¿åº¦ï¼‰â­â­</h4>
<p>è¡¨ç¤ºç”¨åˆ°äº†ç´¢å¼•çš„å¤šå°‘å­—èŠ‚ï¼Œç”¨äºåˆ¤æ–­è”åˆç´¢å¼•ç”¨åˆ°äº†å‡ ä¸ªå­—æ®µã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è”åˆç´¢å¼•ï¼šidx_user_status(user_id, status)</span>
<span class="hljs-comment">-- user_idæ˜¯BIGINTï¼ˆ8å­—èŠ‚ï¼‰ï¼Œstatusæ˜¯TINYINTï¼ˆ1å­—èŠ‚ï¼‰</span>

<span class="hljs-comment">-- åªç”¨åˆ°user_id â†’ key_len = 8</span>
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span>

<span class="hljs-comment">-- ç”¨åˆ°user_idå’Œstatus â†’ key_len = 9</span>
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span> <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
</code></pre>
<h3 data-id="heading-14">4. ç¤ºä¾‹è§£è¯»</h3>
<p>å›åˆ°åˆšæ‰çš„æˆªå›¾ï¼Œæˆ‘ä»¬æ¥è§£è¯»ä¸€ä¸‹ï¼š</p>

































































<table><thead><tr><th>å­—æ®µ</th><th>å€¼</th><th>è§£è¯»</th></tr></thead><tbody><tr><td>id</td><td>1</td><td>ç¬¬1ä¸ªæŸ¥è¯¢</td></tr><tr><td>select_type</td><td>SIMPLE</td><td>ç®€å•æŸ¥è¯¢ï¼Œæ²¡æœ‰å­æŸ¥è¯¢</td></tr><tr><td>table</td><td>orders</td><td>æŸ¥è¯¢ordersè¡¨</td></tr><tr><td>type</td><td><strong>ref</strong></td><td>âœ… ä½¿ç”¨éå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢ï¼Œæ€§èƒ½è‰¯å¥½</td></tr><tr><td>possible_keys</td><td>idx_user_id</td><td>å¯èƒ½ä½¿ç”¨idx_user_idç´¢å¼•</td></tr><tr><td>key</td><td><strong>idx_user_id</strong></td><td>âœ… å®é™…ä½¿ç”¨äº†idx_user_idç´¢å¼•</td></tr><tr><td>key_len</td><td>8</td><td>ä½¿ç”¨äº†8å­—èŠ‚ï¼ˆBIGINTç±»å‹ï¼‰</td></tr><tr><td>ref</td><td>const</td><td>ä½¿ç”¨å¸¸é‡å€¼åŒ¹é…</td></tr><tr><td>rows</td><td><strong>92</strong></td><td>âœ… é¢„ä¼°åªæ‰«æ92è¡Œï¼Œå¾ˆå°‘</td></tr><tr><td>filtered</td><td>100.00</td><td>100%çš„æ•°æ®éƒ½ç¬¦åˆæ¡ä»¶</td></tr><tr><td>Extra</td><td>(Null)</td><td>æ²¡æœ‰é¢å¤–ä¿¡æ¯ï¼Œéœ€è¦å›è¡¨æŸ¥è¯¢</td></tr></tbody></table>
<p><strong>ç»“è®ºï¼š</strong> è¿™æ˜¯ä¸€ä¸ªä¼˜åŒ–è‰¯å¥½çš„æŸ¥è¯¢ï¼Œä½¿ç”¨äº†ç´¢å¼•ï¼Œåªæ‰«æ92è¡Œã€‚</p>
<h3 data-id="heading-15">5. ä¸‰ç§å…¸å‹åœºæ™¯å¯¹æ¯”</h3>
<p><strong>åœºæ™¯1ï¼šå…¨è¡¨æ‰«æï¼ˆéœ€è¦ä¼˜åŒ–ï¼‰</strong></p>
<pre><code class="hljs language-sql" lang="sql">EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f47904e9acd4b62bc1b91bd801dd00c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=QEpKnD4syMoOLSNpOnPFrZFtWD0%3D" alt="image.png" loading="lazy"/></p>
<p><strong>é—®é¢˜ï¼š</strong> statuså­—æ®µæ²¡æœ‰ç´¢å¼•ï¼Œå…¨è¡¨æ‰«æã€‚</p>
<p><strong>ç¤ºä¾‹2ï¼šä½¿ç”¨ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql">EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e22ae37a40f045f09dad13be66ef329c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=UzC7AFkDlBzFjGbos43RbxM7fmg%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ”¹å–„ï¼š</strong> ä½¿ç”¨ç´¢å¼•ï¼Œåªæ‰«æ92è¡Œã€‚</p>
<p><strong>ç¤ºä¾‹3ï¼šè¦†ç›–ç´¢å¼•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å…ˆåˆ›å»ºè”åˆç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_status <span class="hljs-keyword">ON</span> orders(user_id, status);

<span class="hljs-comment">-- æŸ¥è¯¢ç´¢å¼•åŒ…å«çš„å­—æ®µ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> user_id, status <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfcb3cbb82dd4778bad742176d582f8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=8DSoNkQxXG8Vh6e6XcQKgHh2mIo%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æœ€ä¼˜ï¼š</strong> è¦†ç›–ç´¢å¼•ï¼Œä¸éœ€è¦å›è¡¨ã€‚</p>
<h2 data-id="heading-16">ä¸‰ã€1000ä¸‡æ•°æ®å®æˆ˜æ¡ˆä¾‹ï¼šä»å…¨è¡¨æ‰«æåˆ°ç´¢å¼•ä¼˜åŒ–</h2>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†1000ä¸‡æ•°æ®å’ŒåŸºç¡€ç´¢å¼•ï¼Œæ¥å®æˆ˜æ¼”ç»ƒä¸€ä¸ªå®Œæ•´çš„ä¼˜åŒ–è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-17">åœºæ™¯ï¼šæŸ¥è¯¢æŸæ—¥çš„è®¢å•</h3>
<p><strong>éœ€æ±‚ï¼š</strong> æŸ¥è¯¢2025å¹´6æœˆ15æ—¥çš„è®¢å•ã€‚</p>
<h3 data-id="heading-18">ç¬¬1æ­¥ï¼šå†™å‡ºSQLï¼ˆé”™è¯¯ç‰ˆæœ¬ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">DATE</span>(created_at) <span class="hljs-operator">=</span> <span class="hljs-string">'2025-06-15'</span>;
</code></pre>
<h3 data-id="heading-19">ç¬¬2æ­¥ï¼šEXPLAINåˆ†æ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00222fabf17b4367a3ca85749bb32701~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=tiZBEfBwmzq50iS91RQADdtF4Wc%3D" alt="image.png" loading="lazy"/></p>
<p><strong>é—®é¢˜è¯Šæ–­ï¼š</strong></p>
<ol>
<li>type=ALLï¼šå…¨è¡¨æ‰«æ</li>
<li>key=NULLï¼šæ²¡ç”¨ç´¢å¼•</li>
<li>rowsâ‰ˆ970ä¸‡ï¼šå‡ ä¹æ‰«æå…¨è¡¨ï¼ˆrowsæ˜¯é¢„ä¼°å€¼ï¼Œå¯èƒ½ç•¥å°äºå®é™…è¡Œæ•°ï¼‰</li>
<li><strong>åŸå› ï¼š</strong> created_atå­—æ®µä½¿ç”¨äº†DATEå‡½æ•°ï¼Œç´¢å¼•å¤±æ•ˆ</li>
</ol>
<h3 data-id="heading-20">ç¬¬3æ­¥ï¼šä¼˜åŒ–SQL</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders
<span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-06-15 00:00:00'</span> 
  <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-06-16 00:00:00'</span>;
</code></pre>
<h3 data-id="heading-21">ç¬¬4æ­¥ï¼šå†æ¬¡EXPLAIN</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8256c20c231145e6a50322bbf2955dc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=%2F%2B3BTVNE6LCQlXUo2uR%2FqRQD%2BXA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ”¹å–„ï¼š</strong> ä»æ‰«æ970ä¸‡è¡Œ â†’ 5ä¸‡è¡Œï¼Œæ€§èƒ½æå‡çº¦194å€ã€‚</p>
<h3 data-id="heading-22">ç¬¬5æ­¥ï¼šè¿›ä¸€æ­¥ä¼˜åŒ–ï¼ˆè¦†ç›–ç´¢å¼•ï¼‰</h3>
<p><strong>é—®é¢˜ï¼š</strong> è™½ç„¶ç”¨åˆ°äº†ç´¢å¼•ï¼Œä½†è¿˜éœ€è¦å›è¡¨æŸ¥è¯¢å®Œæ•´æ•°æ®ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong> åˆ›å»ºè”åˆç´¢å¼•ï¼Œå®ç°è¦†ç›–ç´¢å¼•ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè”åˆç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_created_amount <span class="hljs-keyword">ON</span> orders(created_at, user_id, status);

<span class="hljs-comment">-- åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ</span>
<span class="hljs-keyword">SELECT</span> id, user_id, status, created_at
<span class="hljs-keyword">FROM</span> orders
<span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-06-15 00:00:00'</span> 
  <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-06-16 00:00:00'</span>;
</code></pre>
<h3 data-id="heading-23">ç¬¬6æ­¥ï¼šæœ€ç»ˆEXPLAIN</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/457b9a529aa84aa5ae45d9cf7966d20c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=G9XVErHBoSISfMGZ9d3%2Bp3zKU9U%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æœ€ç»ˆæ•ˆæœï¼š</strong> ä½¿ç”¨è”åˆç´¢å¼•ï¼Œå‡å°‘å›è¡¨æ¬¡æ•°ï¼Œæ€§èƒ½å†æå‡2-3å€ã€‚</p>
<h2 data-id="heading-24">å››ã€ç´¢å¼•å¤±æ•ˆçš„12ç§åœºæ™¯</h2>
<p>é€šè¿‡å‰é¢çš„å®æˆ˜ï¼Œä½ å·²ç»çœ‹åˆ°äº†å‡½æ•°å¯¼è‡´ç´¢å¼•å¤±æ•ˆçš„æ¡ˆä¾‹ã€‚ä¸‹é¢æˆ‘ä»¬ç³»ç»Ÿæ€»ç»“12ç§å¸¸è§çš„ç´¢å¼•å¤±æ•ˆåœºæ™¯ã€‚</p>
<h3 data-id="heading-25">åœºæ™¯1ï¼šç´¢å¼•å­—æ®µä½¿ç”¨å‡½æ•°</h3>
<p><strong>é”™è¯¯ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢2025å¹´6æœˆ15æ—¥çš„è®¢å•</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> <span class="hljs-type">DATE</span>(created_at) <span class="hljs-operator">=</span> <span class="hljs-string">'2025-06-15'</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00222fabf17b4367a3ca85749bb32701~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=tiZBEfBwmzq50iS91RQADdtF4Wc%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŸå› ï¼š</strong> ç´¢å¼•æ ‘å­˜çš„æ˜¯åŸå€¼ï¼Œä¸æ˜¯å‡½æ•°è®¡ç®—åçš„å€¼ã€‚</p>
<p><strong>æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ”¹ç”¨èŒƒå›´æŸ¥è¯¢</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-06-15 00:00:00'</span> <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-06-16 00:00:00'</span>;
</code></pre>
<h3 data-id="heading-26">åœºæ™¯2ï¼šéšå¼ç±»å‹è½¬æ¢</h3>
<p><strong>ç”¨ç¬¬å…­è®²çš„employeeè¡¨æ¼”ç¤ºï¼ˆnameæ˜¯VARCHARç±»å‹ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- é”™è¯¯ï¼šå­—ç¬¦ä¸²å­—æ®µä¼ æ•°å­—ï¼Œç´¢å¼•å¤±æ•ˆ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-number">123</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e69662018634427a8daf2ea65114d7d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=ETwQ6XWBqpcMb9e6bL2Ii8fpRCs%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŸå› ï¼š</strong> MySQLæŠŠå­—æ®µè½¬æˆæ•°å­— <code>CAST(name AS SIGNED) = 123</code>ï¼Œå­—æ®µè¢«å‡½æ•°åŒ…è£¹ï¼Œç´¢å¼•å¤±æ•ˆã€‚</p>
<p><strong>æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å­—ç¬¦ä¸²å­—æ®µä¸€å®šè¦åŠ å¼•å·</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'123'</span>;
</code></pre>
<h3 data-id="heading-27">åœºæ™¯3ï¼šè¿åæœ€å·¦åŒ¹é…åŸåˆ™</h3>
<p><strong>ç´¢å¼•ï¼š</strong> <code>idx_user_status(user_id, status)</code></p>
<p><strong>å¤±æ•ˆç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è·³è¿‡æœ€å·¦å­—æ®µuser_id</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8274624f31fb4a12a6677b165153d082~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=WCKx0xN4e0X2LQHbxyuwz2EYIO0%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç”Ÿæ•ˆç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨æœ€å·¦å­—æ®µ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span>;

<span class="hljs-comment">-- ä½¿ç”¨å…¨éƒ¨å­—æ®µ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span> <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<h3 data-id="heading-28">åœºæ™¯4ï¼šLIKEå·¦æ¨¡ç³Š</h3>
<p><strong>é”™è¯¯ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- %åœ¨æœ€å‰é¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%ä¸‰'</span>;

<span class="hljs-comment">-- ä¸¤è¾¹éƒ½æœ‰%</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%å¼ ä¸‰%'</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf328b7906a3412caa6a0af43dcc48e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=1p%2B2YXu%2Bt%2BwjG2YyD0B89XrN3xM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŸå› ï¼š</strong> B+æ ‘æŒ‰å­—æ¯åºæ’åˆ—ï¼Œå‰ç¼€åŒ¹é…å¯ä»¥å¿«é€Ÿå®šä½ï¼Œä½†åŒ…å«åŒ¹é…åªèƒ½å…¨è¡¨æ‰«æã€‚</p>
<p><strong>æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å‰ç¼€åŒ¹é…</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'å¼ %'</span>;
</code></pre>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>ä½¿ç”¨å…¨æ–‡ç´¢å¼•ï¼ˆFULLTEXT,ç™¾ä¸‡çº§ä»¥ä¸‹å¯ä»¥ç”¨,å¤§æ•°æ®é‡ä¸‹å†…å­˜å ç”¨é«˜ã€ç´¢å¼•ä½“ç§¯å¤§ã€å†™å…¥æ…¢ï¼‰</li>
<li>ä½¿ç”¨ElasticSearchç­‰ä¸“ä¸šæœç´¢å¼•æ“</li>
</ul>
<h3 data-id="heading-29">åœºæ™¯5ï¼šORæ¡ä»¶ä¸¤è¾¹ç´¢å¼•ä¸ä¸€è‡´</h3>
<p><strong>é”™è¯¯ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- idæœ‰ç´¢å¼•ï¼Œageæ²¡ç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">OR</span> salary <span class="hljs-operator">=</span> <span class="hljs-number">1800</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e02f4803ee9a4ea6b967b950fe6cd41b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=B0e2g1O3txQ6m25M8AGC4Q%2BfghQ%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŸå› ï¼š</strong> æŸ¥idå¾ˆå¿«ï¼Œä½†æŸ¥salaryè¦å…¨è¡¨æ‰«æã€‚æ—¢ç„¶éƒ½è¦å…¨è¡¨æ‰«äº†ï¼Œä¼˜åŒ–å™¨ç›´æ¥å…¨è¡¨æ‰«æã€‚</p>
<p><strong>æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ–¹æ¡ˆ1ï¼šç»™salaryä¹ŸåŠ ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_salary <span class="hljs-keyword">ON</span> employee(salary);

<span class="hljs-comment">-- æ–¹æ¡ˆ2ï¼šæ‹†æˆä¸¤ä¸ªæŸ¥è¯¢ç”¨UNION</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> salary <span class="hljs-operator">=</span> <span class="hljs-number">1800</span>;
</code></pre>
<h3 data-id="heading-30">åœºæ™¯6ï¼šä¸ç­‰äºæ“ä½œç¬¦</h3>
<p><strong>å¤±æ•ˆç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">!=</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">&lt;&gt;</span> <span class="hljs-number">0</span>;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ce45875b88142d3ad9a7f96f52e7c8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=ccD4jc8eQebQF%2BlfsmCosHHWvPk%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åŸå› ï¼š</strong> ä¸ç­‰äºé€šå¸¸åŒ¹é…å¤§éƒ¨åˆ†æ•°æ®ã€‚å¦‚æœåŒ¹é…è¡Œæ•°è¶…è¿‡æ€»æ•°çš„30%ï¼Œä¼˜åŒ–å™¨è®¤ä¸ºå…¨è¡¨æ‰«ææ›´å¿«ã€‚</p>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¦‚æœstatusåªæœ‰0/1/2ä¸‰ç§å€¼ï¼Œæ”¹ç”¨INï¼Œå…·ä½“è¦çœ‹åŒºåˆ†åº¦</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
</code></pre>
<h3 data-id="heading-31">åœºæ™¯7ï¼šIS NOT NULL</h3>
<p><strong>å¤±æ•ˆç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">WHERE</span> field <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>;
</code></pre>
<p><strong>åŸå› ï¼š</strong> å¦‚æœå­—æ®µ90%éƒ½æœ‰å€¼ï¼ŒIS NOT NULLä¼šåŒ¹é…å¤§éƒ¨åˆ†æ•°æ®ï¼Œä¼˜åŒ–å™¨æ”¾å¼ƒç´¢å¼•ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> IS NULLé€šå¸¸èƒ½èµ°ç´¢å¼•ï¼ˆå¦‚æœNULLå€¼å¾ˆå°‘ï¼‰ã€‚</p>
<h3 data-id="heading-32">åœºæ™¯8ï¼šå¯¹ç´¢å¼•å­—æ®µè¿›è¡Œè¿ç®—</h3>
<p><strong>é”™è¯¯ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-operator">=</span> <span class="hljs-number">1001</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">*</span> <span class="hljs-number">2</span> <span class="hljs-operator">=</span> <span class="hljs-number">2000</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> amount <span class="hljs-operator">-</span> <span class="hljs-number">10</span> <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span>;
</code></pre>
<p><strong>æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> amount <span class="hljs-operator">&gt;</span> <span class="hljs-number">110</span>;
</code></pre>
<p><strong>åŸåˆ™ï¼š</strong> æŠŠè¿ç®—ç§»åˆ°ç­‰å·å³è¾¹ã€‚</p>
<h3 data-id="heading-33">åœºæ™¯9ï¼šå­—ç¬¦ä¸²ä¸åŠ å¼•å·</h3>
<p><strong>é”™è¯¯ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- nameæ˜¯VARCHAR</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-number">202501010001</span>;
</code></pre>
<p><strong>åŸå› ï¼š</strong> éšå¼ç±»å‹è½¬æ¢ï¼ŒåŒåœºæ™¯2ã€‚</p>
<p><strong>æ­£ç¡®å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> employee <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'202501010001'</span>;
</code></pre>
<h3 data-id="heading-34">åœºæ™¯10ï¼šè”åˆç´¢å¼•èŒƒå›´æŸ¥è¯¢åçš„å­—æ®µ</h3>
<p><strong>ç´¢å¼•ï¼š</strong> <code>idx_user_status_time(user_id, status, created_at)</code></p>
<p><strong>éƒ¨åˆ†å¤±æ•ˆï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- statusæ˜¯èŒƒå›´æŸ¥è¯¢ï¼Œå¯¼è‡´created_atæ— æ³•ä½¿ç”¨ç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span> <span class="hljs-keyword">AND</span> status <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span> <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&gt;</span> <span class="hljs-string">'2025-01-01'</span>;
<span class="hljs-comment">-- å®é™…åªç”¨åˆ°äº† user_id å’Œ statusï¼Œcreated_atè¢«æˆªæ–­</span>
</code></pre>
<p><strong>åŸå› ï¼š</strong> è”åˆç´¢å¼•ä¸­ï¼ŒèŒƒå›´æŸ¥è¯¢ï¼ˆ&gt;ã€&lt;ã€BETWEENï¼‰ä¼šæˆªæ–­åé¢çš„å­—æ®µã€‚</p>
<p><strong>ä¼˜åŒ–ï¼š</strong> æ ¹æ®æŸ¥è¯¢åœºæ™¯è°ƒæ•´ç´¢å¼•å­—æ®µé¡ºåºï¼ŒæŠŠèŒƒå›´æŸ¥è¯¢å­—æ®µæ”¾æœ€åã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¦‚æœcreated_atç»å¸¸åšèŒƒå›´æŸ¥è¯¢ï¼Œè°ƒæ•´ç´¢å¼•é¡ºåº</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_status_time(user_id, status, created_at);
<span class="hljs-comment">-- åŒæ—¶æŠŠstatusæ”¹æˆç­‰å€¼æŸ¥è¯¢</span>
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span> <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&gt;</span> <span class="hljs-string">'2025-01-01'</span>;

<span class="hljs-comment">-- å¦‚æœstatusç»å¸¸åšèŒƒå›´æŸ¥è¯¢ï¼Œç´¢å¼•è®¾è®¡ä¸º</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_time_status(user_id, created_at, status);
</code></pre>
<p><strong>è®¾è®¡åŸåˆ™ï¼š</strong> ç­‰å€¼æŸ¥è¯¢å­—æ®µåœ¨å‰ï¼ŒèŒƒå›´æŸ¥è¯¢å­—æ®µåœ¨åã€‚</p>
<h3 data-id="heading-35">åœºæ™¯11ï¼šINçš„å€¼è¿‡å¤š</h3>
<p><strong>å¤±æ•ˆç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,...,<span class="hljs-number">5000</span>);
</code></pre>
<p><strong>åŸå› ï¼š</strong> 5000ä¸ªå€¼ = 5000æ¬¡ç´¢å¼•æŸ¥æ‰¾ + 5000æ¬¡å›è¡¨ï¼Œä¼˜åŒ–å™¨è¯„ä¼°æˆæœ¬é«˜äºå…¨è¡¨æ‰«æã€‚</p>
<p><strong>ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>åˆ†æ‰¹æŸ¥è¯¢ï¼ˆæ¯æ‰¹500ä¸ªï¼‰</li>
<li>ä½¿ç”¨ä¸´æ—¶è¡¨JOIN</li>
</ul>
<h3 data-id="heading-36">åœºæ™¯12ï¼šæ•°æ®åˆ†å¸ƒä¸å‡</h3>
<p><strong>åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- statuså­—æ®µï¼š0å 95%ï¼Œ1å 4%ï¼Œ2å 1%</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<p><strong>ç°è±¡ï¼š</strong> å³ä½¿statusæœ‰ç´¢å¼•ï¼ŒæŸ¥è¯¢status=0ä¹Ÿä¼šå…¨è¡¨æ‰«æã€‚</p>
<p><strong>åŸå› ï¼š</strong> åŒ¹é…95%çš„æ•°æ®ï¼Œä¼˜åŒ–å™¨è®¤ä¸ºå…¨è¡¨æ‰«ææ›´å¿«ã€‚</p>
<p><strong>ç»“è®ºï¼š</strong> è¿™ä¸æ˜¯é—®é¢˜ï¼Œå…¨è¡¨æ‰«æç¡®å®æ›´å¿«ï¼Œæ— éœ€ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-37">äº”ã€ç´¢å¼•ä¼˜åŒ–å¥—è·¯æ€»ç»“</h2>
<p>å­¦å®ŒEXPLAINå·¥å…·ã€å®æˆ˜æ¡ˆä¾‹å’Œ12ç§å¤±æ•ˆåœºæ™¯ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€å¥—å®Œæ•´çš„ä¼˜åŒ–å¥—è·¯ã€‚é‡åˆ°æ…¢æŸ¥è¯¢æ—¶ï¼ŒæŒ‰è¿™ä¸ªæµç¨‹èµ°ä¸€éï¼ŒåŸºæœ¬éƒ½èƒ½è§£å†³ã€‚</p>
<h3 data-id="heading-38">ç¬¬1æ­¥ï¼šå®šä½æ…¢SQL</h3>
<p><strong>å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹å½“å‰é…ç½®</span>
<span class="hljs-keyword">SHOW</span> VARIABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'slow_query%'</span>;
<span class="hljs-keyword">SHOW</span> VARIABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'long_query_time'</span>;

<span class="hljs-comment">-- å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—</span>
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> slow_query_log <span class="hljs-operator">=</span> <span class="hljs-string">'ON'</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-keyword">GLOBAL</span> long_query_time <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">-- è¶…è¿‡1ç§’è®°å½•</span>

<span class="hljs-comment">-- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ä½ç½®</span>
<span class="hljs-keyword">SHOW</span> VARIABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'slow_query_log_file'</span>;
</code></pre>
<p><strong>æ—¥å¿—å†…å®¹ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dba267321df43878b1a82f0e2a098e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aqR552AYnVn55qEY29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767512428&amp;x-signature=aKF9PeGYNW5BH4n%2FbAAiMNicrdA%3D" alt="image.png" loading="lazy"/></p>
<p>å…³é”®æŒ‡æ ‡ï¼šQuery_timeï¼ˆæ‰§è¡Œæ—¶é—´ï¼‰ã€Rows_examinedï¼ˆæ‰«æè¡Œæ•°ï¼‰ã€‚</p>
<h3 data-id="heading-39">ç¬¬2æ­¥ï¼šEXPLAINåˆ†æ</h3>
<pre><code class="hljs language-sql" lang="sql">EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> <span class="hljs-type">DATE</span>(created_at) <span class="hljs-operator">=</span> <span class="hljs-string">'2025-06-15'</span>;
</code></pre>
<p><strong>å…³æ³¨5ä¸ªæ ¸å¿ƒæŒ‡æ ‡ï¼š</strong></p>
<ul>
<li>typeï¼šè‡³å°‘è¾¾åˆ°rangeï¼ŒALLå°±æ˜¯å…¨è¡¨æ‰«æ</li>
<li>keyï¼šNULLè¡¨ç¤ºæ²¡ç”¨ç´¢å¼•</li>
<li>rowsï¼šé¢„ä¼°æ‰«æè¡Œæ•°ï¼Œè¶Šå°è¶Šå¥½</li>
<li>Extraï¼šUsing indexæœ€ä¼˜ï¼ŒUsing filesort/temporaryéœ€è¦ä¼˜åŒ–</li>
<li>key_lenï¼šåˆ¤æ–­è”åˆç´¢å¼•ç”¨åˆ°äº†å‡ ä¸ªå­—æ®µ</li>
</ul>
<h3 data-id="heading-40">ç¬¬3æ­¥ï¼šå¯¹ç…§å¤±æ•ˆåœºæ™¯</h3>
<p>å¿«é€Ÿæ£€æŸ¥æ¸…å•ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç´¢å¼•å­—æ®µç”¨äº†å‡½æ•°ï¼Ÿï¼ˆDATE/YEAR/LENGTHç­‰ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> éšå¼ç±»å‹è½¬æ¢ï¼Ÿï¼ˆå­—ç¬¦ä¸²å­—æ®µæ²¡åŠ å¼•å·ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è¿åæœ€å·¦åŒ¹é…ï¼Ÿï¼ˆè”åˆç´¢å¼•è·³è¿‡äº†å·¦è¾¹å­—æ®µï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> LIKEå·¦æ¨¡ç³Šï¼Ÿï¼ˆ'%xxx'ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ORä¸¤è¾¹ç´¢å¼•ä¸ä¸€è‡´ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å¯¹ç´¢å¼•å­—æ®µåšè¿ç®—ï¼Ÿï¼ˆid + 1 = 100ï¼‰</li>
</ul>
<h3 data-id="heading-41">ç¬¬4æ­¥ï¼šæ”¹å†™SQL</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å‡½æ•° â†’ èŒƒå›´æŸ¥è¯¢</span>
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">DATE</span>(created_at) <span class="hljs-operator">=</span> <span class="hljs-string">'2025-06-15'</span>
â†’ <span class="hljs-keyword">WHERE</span> created_at <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-06-15'</span> <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-06-16'</span>

<span class="hljs-comment">-- è¿ç®—ç§»åˆ°å³è¾¹</span>
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-operator">=</span> <span class="hljs-number">1001</span> â†’ <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>

<span class="hljs-comment">-- ä¸ç­‰äº â†’ IN</span>
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">!=</span> <span class="hljs-number">0</span> â†’ <span class="hljs-keyword">WHERE</span> status <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
</code></pre>
<h3 data-id="heading-42">ç¬¬5æ­¥ï¼šä¼˜åŒ–ç´¢å¼•è®¾è®¡</h3>
<p><strong>è®¾è®¡åŸåˆ™ï¼š</strong></p>
<ol>
<li>é«˜é¢‘æŸ¥è¯¢å­—æ®µå»ºç´¢å¼•</li>
<li>åŒºåˆ†åº¦é«˜çš„å­—æ®µä¼˜å…ˆï¼ˆåŒºåˆ†åº¦ &gt; 0.1ï¼‰</li>
<li>ç­‰å€¼æŸ¥è¯¢å­—æ®µåœ¨å‰ï¼ŒèŒƒå›´æŸ¥è¯¢å­—æ®µåœ¨å</li>
<li>å°½é‡è¦†ç›–ç´¢å¼•ï¼Œå‡å°‘å›è¡¨</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢ï¼šWHERE user_id = ? AND status = ? ORDER BY created_at DESC</span>
<span class="hljs-comment">-- ç´¢å¼•ï¼š</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_status_time <span class="hljs-keyword">ON</span> orders(user_id, status, created_at);
</code></pre>
<h3 data-id="heading-43">ç¬¬6æ­¥ï¼šéªŒè¯æ•ˆæœ</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¼˜åŒ–å‰åå¯¹æ¯”EXPLAINç»“æœ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> ...;  <span class="hljs-comment">-- å¯¹æ¯”typeã€keyã€rows</span>

<span class="hljs-comment">-- å®é™…æ‰§è¡Œæ—¶é—´å¯¹æ¯”</span>
<span class="hljs-keyword">SELECT</span> ...;  <span class="hljs-comment">-- è®°å½•è€—æ—¶å˜åŒ–</span>
</code></pre>
<h2 data-id="heading-44">å…­ã€é¿å‘æŒ‡å—</h2>
<ul>
<li>å†™å…¥æ€§èƒ½ä¸‹é™ï¼ˆæ¯æ¬¡INSERT/UPDATEè¦ç»´æŠ¤å¤šä¸ªç´¢å¼•ï¼‰</li>
<li>ç£ç›˜ç©ºé—´æµªè´¹</li>
<li>ä¼˜åŒ–å™¨å¯èƒ½é€‰é”™ç´¢å¼•</li>
</ul>
<p><strong>æ­£ç¡®åšæ³•ï¼š</strong></p>
<ul>
<li>åˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œæ‰¾å‡ºTOP10æ…¢SQL</li>
<li>é’ˆå¯¹æ€§ä¼˜åŒ–é«˜é¢‘æŸ¥è¯¢</li>
<li>ä¸€å¼ è¡¨ç´¢å¼•æ•°é‡æ§åˆ¶åœ¨5ä¸ªä»¥å†…</li>
</ul>
<h3 data-id="heading-45">å‘3ï¼šå¿½ç•¥ç»Ÿè®¡ä¿¡æ¯æ›´æ–°</h3>
<p><strong>é—®é¢˜ï¼š</strong> ç´¢å¼•æ˜æ˜å­˜åœ¨ï¼Œä¼˜åŒ–å™¨å´ä¸ç”¨ã€‚</p>
<p><strong>åŸå› ï¼š</strong> ç»Ÿè®¡ä¿¡æ¯è¿‡æ—¶ï¼Œä¼˜åŒ–å™¨è¯„ä¼°ä¸å‡†ç¡®ã€‚</p>
<p><strong>è§£å†³ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql">ANALYZE <span class="hljs-keyword">TABLE</span> orders;
</code></pre>
<p><strong>å»ºè®®ï¼š</strong> æ•°æ®é‡å˜åŒ–è¶…è¿‡10%æ—¶ï¼Œæ‰§è¡ŒANALYZE TABLEã€‚</p>
<h2 data-id="heading-46">ä¸ƒã€ä»Šå¤©å­¦äº†å•¥ï¼Ÿå¿«é€Ÿå›é¡¾</h2>
<h3 data-id="heading-47">EXPLAINå·¥å…·</h3>
<p><strong>5ä¸ªæ ¸å¿ƒå­—æ®µï¼š</strong></p>
<ul>
<li>typeï¼šè®¿é—®ç±»å‹ï¼Œè‡³å°‘è¾¾åˆ°range</li>
<li>keyï¼šå®é™…ä½¿ç”¨çš„ç´¢å¼•ï¼ŒNULLè¡¨ç¤ºæ²¡ç”¨ç´¢å¼•</li>
<li>rowsï¼šé¢„ä¼°æ‰«æè¡Œæ•°ï¼Œè¶Šå°è¶Šå¥½</li>
<li>Extraï¼šUsing indexæœ€å¥½ï¼ˆè¦†ç›–ç´¢å¼•ï¼‰</li>
<li>key_lenï¼šåˆ¤æ–­è”åˆç´¢å¼•ç”¨åˆ°å‡ ä¸ªå­—æ®µ</li>
</ul>
<h3 data-id="heading-48">12ç§ç´¢å¼•å¤±æ•ˆåœºæ™¯</h3>
<ol>
<li>ç´¢å¼•å­—æ®µä½¿ç”¨å‡½æ•°</li>
<li>éšå¼ç±»å‹è½¬æ¢</li>
<li>è¿åæœ€å·¦åŒ¹é…åŸåˆ™</li>
<li>LIKEå·¦æ¨¡ç³Š</li>
<li>ORæ¡ä»¶ä¸¤è¾¹ç´¢å¼•ä¸ä¸€è‡´</li>
<li>ä¸ç­‰äºæ“ä½œç¬¦</li>
<li>IS NOT NULL</li>
<li>å¯¹ç´¢å¼•å­—æ®µè¿›è¡Œè¿ç®—</li>
<li>å­—ç¬¦ä¸²ä¸åŠ å¼•å·</li>
<li>è”åˆç´¢å¼•èŒƒå›´æŸ¥è¯¢åçš„å­—æ®µ</li>
<li>INçš„å€¼è¿‡å¤š</li>
<li>æ•°æ®åˆ†å¸ƒä¸å‡</li>
</ol>
<h3 data-id="heading-49">ä¼˜åŒ–å¥—è·¯</h3>
<ol>
<li>ç”¨EXPLAINå®šä½é—®é¢˜</li>
<li>è¯†åˆ«ç´¢å¼•å¤±æ•ˆåœºæ™¯</li>
<li>æ”¹å†™SQL</li>
<li>åˆ›å»ºåˆé€‚çš„ç´¢å¼•</li>
<li>å®ç°è¦†ç›–ç´¢å¼•</li>
<li>éªŒè¯ä¼˜åŒ–æ•ˆæœ</li>
</ol>
<h2 data-id="heading-50">å…«ã€ä½œä¸š</h2>
<h3 data-id="heading-51">åŸºç¡€é¢˜</h3>
<p><strong>ç¬¬1é¢˜ï¼š</strong> åˆ†æä»¥ä¸‹SQLçš„ç´¢å¼•å¤±æ•ˆåŸå› ï¼Œå¹¶ç»™å‡ºä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- A. æŸ¥è¯¢2025å¹´çš„è®¢å•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">YEAR</span>(created_at) <span class="hljs-operator">=</span> <span class="hljs-number">2025</span>;

<span class="hljs-comment">-- B. æŸ¥è¯¢æ‰‹æœºå·</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> phone <span class="hljs-operator">=</span> <span class="hljs-number">13800138000</span>;

<span class="hljs-comment">-- C. æ¨¡ç³ŠæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%å¼ %'</span>;

<span class="hljs-comment">-- D. ä¸ç­‰äºæŸ¥è¯¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">!=</span> <span class="hljs-number">0</span>;
</code></pre>
<p><strong>ç¬¬2é¢˜ï¼š</strong> ç”¨EXPLAINåˆ†æé¡¹ç›®ä¸­çš„3æ¡æ…¢SQLï¼Œè®°å½•typeã€keyã€rowsã€Extraå­—æ®µã€‚</p>
<h3 data-id="heading-52">è¿›é˜¶é¢˜</h3>
<p><strong>ç¬¬1é¢˜ï¼š</strong> æ…¢æŸ¥è¯¢ä¼˜åŒ–å®æˆ˜</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¢å•è¡¨ï¼š1000ä¸‡æ¡æ•°æ®</span>
<span class="hljs-comment">-- æŸ¥è¯¢æŸç”¨æˆ·æŸçŠ¶æ€çš„è®¢å•ï¼ŒæŒ‰é‡‘é¢å€’åº</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">10001</span> <span class="hljs-keyword">AND</span> status <span class="hljs-keyword">IN</span> (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> amount <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">10</span>;
</code></pre>
<p><strong>ä»»åŠ¡ï¼š</strong></p>
<ul>
<li>ç”¨EXPLAINåˆ†æé—®é¢˜</li>
<li>è®¾è®¡ç´¢å¼•æ–¹æ¡ˆ</li>
<li>æ”¹å†™SQLï¼ˆå¦‚æœéœ€è¦ï¼‰</li>
<li>ç»™å‡ºä¼˜åŒ–å‰åçš„æ€§èƒ½å¯¹æ¯”</li>
</ul>
<p><strong>ç¬¬2é¢˜ï¼š</strong> ç´¢å¼•è®¾è®¡æ–¹æ¡ˆ</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å•†å“è¡¨ï¼š500ä¸‡æ¡æ•°æ®</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> products (
  id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
  category_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  brand_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  price <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  stock <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  status TINYINT <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  <span class="hljs-comment">-- 0ä¸‹æ¶ 1ä¸Šæ¶</span>
  created_at DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB;

<span class="hljs-comment">-- é«˜é¢‘æŸ¥è¯¢åœºæ™¯ï¼š</span>
<span class="hljs-comment">-- 1. æŒ‰ç±»ç›®+å“ç‰ŒæŸ¥è¯¢ä¸Šæ¶å•†å“ï¼ŒæŒ‰ä»·æ ¼æ’åº</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-operator">=</span> <span class="hljs-number">10</span> <span class="hljs-keyword">AND</span> brand_id <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> price <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">20</span>;

<span class="hljs-comment">-- 2. æŒ‰ç±»ç›®æŸ¥è¯¢ä¸Šæ¶å•†å“ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´å€’åº</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products
<span class="hljs-keyword">WHERE</span> category_id <span class="hljs-operator">=</span> <span class="hljs-number">10</span> <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> created_at <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">20</span>;

<span class="hljs-comment">-- 3. æŒ‰å“ç‰ŒæŸ¥è¯¢åº“å­˜ä¸è¶³çš„å•†å“</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products
<span class="hljs-keyword">WHERE</span> brand_id <span class="hljs-operator">=</span> <span class="hljs-number">5</span> <span class="hljs-keyword">AND</span> stock <span class="hljs-operator">&lt;</span> <span class="hljs-number">10</span>;
</code></pre>
<p><strong>ä»»åŠ¡ï¼š</strong></p>
<ul>
<li>è®¾è®¡ç´¢å¼•æ–¹æ¡ˆï¼ˆæœ€å¤š3ä¸ªç´¢å¼•ï¼‰</li>
<li>è¯´æ˜æ¯ä¸ªç´¢å¼•çš„å­—æ®µé¡ºåºåŠåŸå› </li>
<li>åˆ†ææ¯ä¸ªæŸ¥è¯¢ä¼šç”¨åˆ°å“ªä¸ªç´¢å¼•</li>
</ul>
<h2 data-id="heading-53">ä¹ã€ä¸‹ä¸€è®²é¢„å‘Š</h2>
<p>ç´¢å¼•ä¼˜åŒ–å®Œäº†ï¼ŒSQLè¿˜æ˜¯æ…¢ï¼Ÿ</p>
<p>å¯èƒ½æ˜¯MySQLæ¶æ„å±‚é¢çš„é—®é¢˜ã€‚ä¸€æ¡SQLä»å®¢æˆ·ç«¯å‘é€åˆ°MySQLï¼Œç»è¿‡äº†å“ªäº›ç»„ä»¶ï¼Ÿä¼˜åŒ–å™¨æ˜¯æ€ä¹ˆé€‰æ‹©ç´¢å¼•çš„ï¼ŸBuffer Poolæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><strong>ç¬¬8è®²ï¼šMySQLæ¶æ„ä¸å­˜å‚¨å¼•æ“</strong></p>
<p>ä¸‹ä¸€è®²ä¼šè®²è¿™äº›ï¼š</p>
<ul>
<li>MySQLä¸‰å±‚æ¶æ„ï¼ˆè¿æ¥å±‚ã€æœåŠ¡å±‚ã€å­˜å‚¨å¼•æ“å±‚ï¼‰</li>
<li>ä¸€æ¡SQLçš„å®Œæ•´æ‰§è¡Œæµç¨‹</li>
<li>InnoDB vs MyISAMå¯¹æ¯”</li>
<li>Buffer Poolå·¥ä½œæœºåˆ¶</li>
<li>ä¸ºä»€ä¹ˆInnoDBæ˜¯é»˜è®¤å­˜å‚¨å¼•æ“</li>
</ul>
<p><strong>å»ºè®®ä½ æå‰å‡†å¤‡ï¼š</strong></p>
<ul>
<li>å®Œæˆä»Šå¤©çš„ä½œä¸šï¼Œç‰¹åˆ«æ˜¯1000ä¸‡æ•°æ®çš„å®æˆ˜ä¼˜åŒ–</li>
<li>æ¯ä¸ªEXPLAINç»“æœéƒ½æˆªå›¾ä¿å­˜ï¼Œå¯¹æ¯”ä¼˜åŒ–å‰åçš„å·®å¼‚</li>
<li>æ€è€ƒä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆåŒä¸€æ¡SQLï¼Œæœ‰æ—¶å€™èµ°ç´¢å¼•ï¼Œæœ‰æ—¶å€™ä¸èµ°ï¼Ÿ</li>
<li>å‡†å¤‡å¥½æµ‹è¯•ç¯å¢ƒï¼Œä¸‹ä¸€è®²ä¼šæœ‰æ¶æ„å±‚é¢çš„æ¼”ç¤º</li>
</ul>
<p><strong>ä¸‹ä¸€è®²è§ï¼å’±ä»¬ä¸€èµ·æ·±å…¥MySQLæ¶æ„ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Springã€‘IoC æ§åˆ¶åè½¬ã€DI ä¾èµ–æ³¨å…¥ã€é…ç½®æ–‡ä»¶å’Œbeançš„ä½œç”¨åŸŸ]]></title>    <link>https://juejin.cn/post/7588109656041701422</link>    <guid>https://juejin.cn/post/7588109656041701422</guid>    <pubDate>2025-12-28T07:50:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588109656041701422" data-draft-id="7588098335790858240" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Springã€‘IoC æ§åˆ¶åè½¬ã€DI ä¾èµ–æ³¨å…¥ã€é…ç½®æ–‡ä»¶å’Œbeançš„ä½œç”¨åŸŸ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T07:50:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ZoeGranger"/> <meta itemprop="url" content="https://juejin.cn/user/3704680555488651"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Springã€‘IoC æ§åˆ¶åè½¬ã€DI ä¾èµ–æ³¨å…¥ã€é…ç½®æ–‡ä»¶å’Œbeançš„ä½œç”¨åŸŸ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3704680555488651/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ZoeGranger
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T07:50:23.000Z" title="Sun Dec 28 2025 07:50:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ–°æ‰‹å°ç™½è®°å½•è·Ÿç€ç‹‚ç¥å­¦ä¹ Springçš„ç¬”è®°ï¼ˆç¬¬4-11é›†ï¼‰~</p>
<h2 data-id="heading-0">1.æ§åˆ¶åè½¬ï¼ˆ IoC ï¼‰</h2>
<p>Iocï¼ˆæ§åˆ¶åè½¬ï¼‰æ˜¯Springçš„æ ¸å¿ƒï¼Œå¯ä»¥ä½¿ç”¨XMLé…ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ³¨è§£ï¼Œç”šè‡³0é…ç½®å®ç°IoCã€‚</p>
<p>Springå®¹å™¨åœ¨åˆå§‹åŒ–æ—¶å…ˆè¯»å–é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶æˆ–å…ƒæ•°æ®ï¼Œåˆ›å»ºä¸ç»„ç»‡å¯¹è±¡å­˜å…¥å®¹å™¨ä¸­ï¼Œç¨‹åºä½¿ç”¨æ—¶å†ä»IoCä¸­å–å‡ºéœ€è¦çš„å¯¹è±¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0de352a8c2340f6a3d8fddcea2c7900~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWm9lR3Jhbmdlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767513023&amp;x-signature=L7iQy9uiQwxl7qF8%2F08RkXuF%2BsU%3D" alt="iocæ§åˆ¶åè½¬.jpg" loading="lazy"/></p>
<p>é‡‡ç”¨XMLé…ç½®å®ç°Beançš„æ—¶å€™ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯å’Œå®ç°æ˜¯åˆ†ç¦»çš„ï¼›è€Œé‡‡ç”¨æ³¨è§£æ–¹å¼ï¼ŒæŠŠBeançš„å®šä¹‰ä¿¡æ¯å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œå¯ä»¥å®ç°0é…ç½®ã€‚</p>
<h4 data-id="heading-1">æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨Springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IoCå®¹å™¨ï¼Œå…¶å®ç°æ–¹å¼æ˜¯ä¾èµ–æ³¨å…¥ DIï¼ˆDependency Injectionï¼‰</h4>
<h2 data-id="heading-2">2.ä»£ç </h2>
<h3 data-id="heading-3">2.1 Helloå®ä½“ç±»</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Hello</span>{
  <span class="hljs-keyword">private</span> String name;

  <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>{
    <span class="hljs-keyword">return</span> name;
  }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span>{
    <span class="hljs-built_in">this</span>.name = name;
  }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span>{
    System.out.println(<span class="hljs-string">"Hello,"</span> + name);
  }

}
</code></pre>
<h3 data-id="heading-4">2.2 XMLé…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å®šä¹‰ä¸€ä¸ªæ™®é€šçš„bean ä¸€ä¸ªbeanç›¸å½“äºä¸€ä¸ªå¯¹è±¡--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"hello"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.Hello"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å¯ä»¥æ·»åŠ å±æ€§ ç»™nameèµ‹å€¼XiaoDouBao--&gt;</span>
        <span class="hljs-comment">&lt;!-- refï¼šå¼•ç”¨Springå®¹å™¨ä¸­åˆ›å»ºå¥½çš„å¯¹è±¡--&gt;</span>
        <span class="hljs-comment">&lt;!-- valueï¼šå…·ä½“çš„å€¼--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"XiaoDouBao"</span>/&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">2.3 åŠ è½½é…ç½®æ–‡ä»¶ï¼Œè·å–å¯¹è±¡</h3>
<p>ä¸€ä¸ªæˆ–è€…å¤šä¸ªé…ç½®æ–‡ä»¶å¯ä»¥é€šè¿‡ <code>ApplicationContext</code> æä¾›çš„æ„é€ å‡½æ•°ï¼Œä½¿å®¹å™¨ä»è¿™äº›å¤–éƒ¨èµ„æºåŠ è½½é…ç½®å…ƒæ•°æ®ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
    <span class="hljs-comment">// è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡</span>
    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">"beans.xml"</span>) <span class="hljs-comment">//é…ç½®æ–‡ä»¶çš„åå­—</span>
    <span class="hljs-comment">// æˆ‘ä»¬çš„å¯¹è±¡ç°åœ¨éƒ½åœ¨Springä¸­ç®¡ç†äº†ï¼Œè¦ä½¿ç”¨æ—¶æ ¹æ®é…ç½®æ–‡ä»¶é‡Œçš„idä»å®¹å™¨é‡Œå–å‡ºå°±å¯ä»¥</span>
    <span class="hljs-type">Hello</span> <span class="hljs-variable">hello</span> <span class="hljs-operator">=</span> (Hello)context.getBean(<span class="hljs-string">"hello"</span>);
    System.out.println(hello.getName);  <span class="hljs-comment">//è¾“å‡ºXiaoDouBao</span>
}
</code></pre>
<p><strong>æ§åˆ¶</strong>ï¼šä¼ ç»Ÿçš„åº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¯ç”±ç¨‹åºæœ¬èº«åˆ›å»ºçš„ï¼Œä½¿ç”¨Springåï¼Œå¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„ã€‚</p>
<p><strong>åè½¬</strong>ï¼›ç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ï¼Œè€Œå˜æˆè¢«åŠ¨åœ°æ¥æ”¶å¯¹è±¡ã€‚</p>
<p><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šå°±æ˜¯åˆ©ç”¨setæ–¹å¼æ¥æ³¨å…¥çš„ï¼Œå¦‚æœæŠŠå®ä½“ç±»Helloä¸­<code>setName</code>æ–¹æ³•æ³¨é‡Šæ‰ï¼Œä¼šæŠ¥é”™ã€‚æ‰€ä»¥Springä¸€å®šè¦æœ‰setæ–¹æ³•ã€‚</p>
<p>è¿™å°±æ˜¯<code>IoCæ§åˆ¶åè½¬</code>å’Œ<code>ä¾èµ–æ³¨å…¥</code>ï¼Œå¯¹è±¡ç”±Springæ¥åˆ›å»ºã€ç®¡ç†ã€è£…é…ï¼</p>
<h2 data-id="heading-6">3.IoCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h2>
<p>1.é»˜è®¤ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡</p>
<p>2.ä¹Ÿå¯ä»¥ä½¿ç”¨æœ‰å‚æ„é€ åˆ›å»ºå¯¹è±¡</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.User"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 2.1 ä¸‹æ ‡èµ‹å€¼--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"DouBao"</span>/&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.User"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 2.2 ç±»å‹èµ‹å€¼ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªç±»å‹ç›¸åŒçš„å±æ€§ä¼šæŠ¥é”™--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"java.lang.String"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"è±†åŒ…"</span>/&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.User"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 2.3 ï¼ˆé‡è¦ï¼‰ç›´æ¥æŒ‡å®šå‚æ•°åæ¥èµ‹å€¼--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"è±†å°åŒ…"</span>/&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>

</code></pre>
<p>åœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ï¼Œæ–‡ä»¶ä¸­ç®¡ç†çš„æ‰€æœ‰å¯¹è±¡å°±å·²ç»åˆå§‹åŒ–åˆ°å†…å­˜ä¸­äº†ã€‚å†…å­˜ä¸­å„ä¸ªå¯¹è±¡æœ‰ä¸€ä»½å®ä¾‹</p>
<h2 data-id="heading-7">4.Springé…ç½®</h2>
<h3 data-id="heading-8">4.1 åˆ«å</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.User"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"XiaoDouBao"</span>/&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ä¹Ÿå¯ä»¥ç”¨åˆ«åè·å–å¯¹è±¡--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">alias</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"userNew"</span>/&gt;</span>
</code></pre>
<p><code>User user = (User)context.getBean("userNew");</code>ä¹Ÿèƒ½è·å–åˆ°</p>
<h3 data-id="heading-9">4.2 Beançš„é…ç½®</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- idï¼šbeançš„å”¯ä¸€æ ‡è¯†ç¬¦--&gt;</span>
<span class="hljs-comment">&lt;!-- classï¼šbeanæ‰€å¯¹åº”çš„å…¨é™å®šåï¼ˆåŒ…å+ç±»åï¼‰--&gt;</span>
<span class="hljs-comment">&lt;!-- nameï¼šä¹Ÿæ˜¯åˆ«åï¼Œè€Œä¸”å…è®¸å–å¤šä¸ªåˆ«å--&gt;</span> 
    
<span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.User"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"user2 u2,u3;u4"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"XiaoDouBao"</span>/&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code></pre>
<p><code>User user = (User)context.getBean("u2");</code>
<code>User user = (User)context.getBean("u3");</code></p>
<p><code>User user = (User)context.getBean("u4");</code>
<code>User user = (User)context.getBean("user2");</code></p>
<p>éƒ½å¯ä»¥è·å–åˆ°å¯¹è±¡</p>
<h3 data-id="heading-10">4.3 import</h3>
<p>ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ï¼Œå¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚bean.xmlã€bean2.xmlã€bean3.xmlï¼‰é‡Œé¢æ³¨å†Œçš„æ‰€æœ‰beanæ”¾åˆ°ä¸€ä¸ªæ€»çš„é…ç½®æ–‡ä»¶<code>applicationContext.xml</code>é‡Œã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"bean.xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"bean2.xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"bean3.xml"</span>/&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<h2 data-id="heading-11">5.ä¾èµ–æ³¨å…¥</h2>
<p>beanå¯¹è±¡çš„åˆ›å»ºï¼Œ<strong>ä¾èµ–</strong>äºå®¹å™¨ï¼›beanå¯¹è±¡æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥<strong>æ³¨å…¥</strong>ï¼</p>
<h3 data-id="heading-12">5.1 åˆ›å»ºä¸€ä¸ªå¤æ‚å®ä½“ç±»</h3>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>{
  <span class="hljs-keyword">private</span> String name;
  <span class="hljs-keyword">private</span> Address address;
  <span class="hljs-keyword">private</span> String[] books;
  <span class="hljs-keyword">private</span> List&lt;String&gt; hobbies;
  <span class="hljs-keyword">private</span> Map&lt;String,String&gt; card;
  <span class="hljs-keyword">private</span> Set&lt;String&gt; games;
  <span class="hljs-keyword">private</span> String wife;
  <span class="hljs-keyword">private</span> Properties info;

  <span class="hljs-comment">//ä»¥ä¸‹çœç•¥getå’Œsetæ–¹æ³•â€¦â€¦</span>
}
</code></pre>
<h3 data-id="heading-13">5.2 æ¼”ç¤ºå¦‚ä½•æ³¨å…¥</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"addr"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.Address"</span>/&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"student"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.Student"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 1.æ™®é€šå€¼æ³¨å…¥--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"XiaoDouBao"</span>/&gt;</span>  
        
        <span class="hljs-comment">&lt;!-- 2.ä½¿ç”¨refï¼Œå¼•ç”¨Springå®¹å™¨ä¸­åˆ›å»ºå¥½çš„å¯¹è±¡--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"address"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"addr"</span>/&gt;</span>  
        
        <span class="hljs-comment">&lt;!-- 3.æ•°ç»„æ³¨å…¥--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"books"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å“ˆåˆ©æ³¢ç‰¹<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>è‘¬é€çš„èŠ™è‰è²<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ç”„å¬›ä¼ <span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>                
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> 
        
        <span class="hljs-comment">&lt;!-- 4.Listæ³¨å…¥--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hobbies"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>èººå¹³<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å†™ä»£ç <span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å¥èº«<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span>                
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> 
        
        <span class="hljs-comment">&lt;!-- 5.Mapæ³¨å…¥--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"card"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"IDCard"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"11112222233334444"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"bankCard"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"123456789012346678990"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span>                
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 6.Setæ³¨å…¥--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"games"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ä¿å«èåœ4<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>ç‹è€…è£è€€<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>æ‰«é›·<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span>                
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> 
        
        <span class="hljs-comment">&lt;!-- 7.1 Nullæ³¨å…¥æ–¹å¼ä¸€--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"wife"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">null</span>/&gt;</span>           
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> 
        
        <span class="hljs-comment">&lt;!-- 7.2 Nullæ³¨å…¥æ–¹å¼äºŒ--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"wife"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>/&gt;</span>
        
         <span class="hljs-comment">&lt;!-- 8.Propertiesæ³¨å…¥--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"info"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"driver"</span>&gt;</span>xxxxx<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"url"</span>&gt;</span>xxx<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"username"</span>&gt;</span>root<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"password"</span>&gt;</span>123456<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span>                
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
    
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>

</code></pre>
<h3 data-id="heading-14">5.3 på‘½åå’Œcå‘½å</h3>
<p>på‘½åå’Œcå‘½åä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å¯¼å…¥çº¦æŸã€‚</p>
<h4 data-id="heading-15">5.3.1 på‘½å</h4>
<p>åœ¨åŸæ¥é…ç½®æ–‡ä»¶åŸºç¡€ä¸ŠåŠ <code>xmlns:p="http://www.springframework.org/schema/p"</code></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xmlns:p</span>=<span class="hljs-string">"http://www.springframework.org/schema/p"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>

    <span class="hljs-comment">&lt;!--på‘½åï¼šç›¸å½“äºpropertiesï¼Œç®€åŒ–äº†æ³¨å…¥æ­¥éª¤--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.User"</span> <span class="hljs-attr">p:name</span>=<span class="hljs-string">"Zoe"</span> <span class="hljs-attr">p:age</span>=<span class="hljs-string">"22"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!--å¯¹æ¯”ï¼š&lt;property name="name" value="Zoe"/&gt;  --&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<h4 data-id="heading-16">5.3.2 cå‘½å</h4>
<p>åœ¨åŸæ¥é…ç½®æ–‡ä»¶åŸºç¡€ä¸ŠåŠ <code>xmlns:c="http://www.springframework.org/schema/c"</code></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xmlns:c</span>=<span class="hljs-string">"http://www.springframework.org/schema/c"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>

    <span class="hljs-comment">&lt;!--cå‘½åï¼šå®ä½“ç±»è¦åŒ…å«æœ‰å‚æ„é€ å‡½æ•°ï¼Œç›¸å½“äºæœ‰å‚æ„é€ å™¨æ³¨å…¥ï¼Œcontructor-arg--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.pojo.User"</span> <span class="hljs-attr">c:name</span>=<span class="hljs-string">"Zoe"</span> <span class="hljs-attr">p:age</span>=<span class="hljs-string">"18"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- å¯¹æ¯”ï¼š&lt;constructor-arg name="name" value="Zoe"/&gt;--&gt;</span>
    
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<h2 data-id="heading-17">6.beançš„ä½œç”¨åŸŸ</h2>
<h3 data-id="heading-18">6.1 singleton å•ä¾‹æ¨¡å¼</h3>
<p><code>&lt;bean id="user2" class="com.pojo.UserT" scope="singleton" /&gt;</code><br/>
Springçš„é»˜è®¤æ¨¡å¼ï¼ŒåŒä¸€ä¸ªç±»å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>{
    <span class="hljs-comment">// è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡</span>
    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">"beans.xml"</span>) 
    <span class="hljs-type">UserT</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">"user2"</span>,UserT.class);
    <span class="hljs-type">UserT</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">"user2"</span>,UserT.class);
    System.out.println(user1 == user2);
}
</code></pre>
<p>è¾“å‡ºï¼štrue</p>
<h3 data-id="heading-19">6.2 prototype åŸå‹æ¨¡å¼</h3>
<p><code>&lt;bean id="user2" class="com.pojo.UserT" scope="prototype" /&gt;</code><br/>
æ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span>{
    <span class="hljs-comment">// è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡</span>
    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">"beans.xml"</span>) 
    <span class="hljs-type">UserT</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">"user2"</span>,UserT.class);
    <span class="hljs-type">UserT</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">"user2"</span>,UserT.class);
    System.out.println(user1 == user2);
}
</code></pre>
<p>è¾“å‡ºï¼šfalse</p>
<p>å‚è€ƒè§†é¢‘ï¼šç‹‚ç¥è¯´<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1WE411d7Dv%3Fspm_id_from%3D333.788.player.switch%26vd_source%3Dc14f0578c618dac9f59449d66709b33a%26p%3D4" target="_blank" title="https://www.bilibili.com/video/BV1WE411d7Dv?spm_id_from=333.788.player.switch&amp;vd_source=c14f0578c618dac9f59449d66709b33a&amp;p=4" ref="nofollow noopener noreferrer">4ã€IOCæœ¬è´¨_å“”å“©å“”å“©_bilibili</a> åˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1WE411d7Dv%3Fspm_id_from%3D333.788.videopod.episodes%26vd_source%3Dc14f0578c618dac9f59449d66709b33a%26p%3D11" target="_blank" title="https://www.bilibili.com/video/BV1WE411d7Dv?spm_id_from=333.788.videopod.episodes&amp;vd_source=c14f0578c618dac9f59449d66709b33a&amp;p=11" ref="nofollow noopener noreferrer">11ã€Beançš„ä½œç”¨åŸŸ_å“”å“©å“”å“©_bilibili</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ— çŠ¶æ€åˆ°æœ‰è®°å¿†ï¼šAI Agent è®°å¿†ç³»ç»Ÿçš„æ¼”è¿›ä¸ Cortex Memory çš„å®è·µ]]></title>    <link>https://juejin.cn/post/7588080521446441006</link>    <guid>https://juejin.cn/post/7588080521446441006</guid>    <pubDate>2025-12-28T08:07:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588080521446441006" data-draft-id="7588080521446424622" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ— çŠ¶æ€åˆ°æœ‰è®°å¿†ï¼šAI Agent è®°å¿†ç³»ç»Ÿçš„æ¼”è¿›ä¸ Cortex Memory çš„å®è·µ"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-28T08:07:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è£æ±Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2242659449048942"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ— çŠ¶æ€åˆ°æœ‰è®°å¿†ï¼šAI Agent è®°å¿†ç³»ç»Ÿçš„æ¼”è¿›ä¸ Cortex Memory çš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659449048942/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è£æ±Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:07:18.000Z" title="Sun Dec 28 2025 08:07:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>Cortex Memoryå¼€æºè§£å†³æ–¹æ¡ˆåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsopaco%2Fcortex-mem" target="_blank" title="https://github.com/sopaco/cortex-mem" ref="nofollow noopener noreferrer">github.com/sopaco/cortâ€¦</a></strong></p>
</blockquote>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨è¿‡å»ä¸¤å¹´é‡Œï¼Œè®°å¿†ï¼ˆMemoryï¼‰å‡ ä¹ä» "å¯é€‰æ¨¡å—" è¿…é€Ÿå˜æˆäº† Agent ç³»ç»Ÿçš„ "åŸºç¡€è®¾æ–½"ã€‚å¯¹è¯å‹åŠ©æ‰‹éœ€è¦è®°ä½ç”¨æˆ·ä¹ æƒ¯ä¸å†å²åå¥½ï¼›ä»£ç /è½¯ä»¶å·¥ç¨‹ Agent éœ€è¦è®°ä½ä»“åº“ç»“æ„ã€çº¦æŸä¸ä¿®å¤ç­–ç•¥ï¼›æ·±åº¦ç ”ç©¶å‹ Agent éœ€è¦è®°ä½å·²é˜…è¯»çš„è¯æ®é“¾ã€å…³é”®å‡è®¾ä¸å¤±è´¥è·¯å¾„ã€‚</p>
<p>æ²¡æœ‰è®°å¿†çš„æ™ºèƒ½ä½“éš¾ä»¥è·¨ä»»åŠ¡ä¿ç•™æœ‰æ•ˆç»éªŒï¼Œéš¾ä»¥ç¨³å®šç»´æŠ¤ç”¨æˆ·åå¥½ä¸èº«ä»½è®¾å®šï¼Œä¹Ÿéš¾ä»¥åœ¨é•¿å‘¨æœŸåä½œä¸­ä¿æŒè¡Œä¸ºä¸€è‡´ã€‚ä¸æ­¤åŒæ—¶ï¼ŒMemory æ¦‚å¿µåœ¨è¿…é€Ÿè†¨èƒ€ã€ä¹Ÿåœ¨è¿…é€Ÿç¢ç‰‡åŒ–ï¼šå¾ˆå¤šè®ºæ–‡éƒ½å£°ç§°è‡ªå·±åœ¨åš "agent memory"ï¼Œä½†å®ç°æ–¹å¼ã€ç›®æ ‡å‡è®¾ã€è¯„ä»·åè®®å·®åˆ«å·¨å¤§ã€‚</p>
<p>åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œæ¥è‡ªæ–°åŠ å¡å›½ç«‹å¤§å­¦ã€ä¸­å›½äººæ°‘å¤§å­¦ã€å¤æ—¦å¤§å­¦ã€åŒ—äº¬å¤§å­¦ç­‰é¡¶çº§å­¦æœ¯æœºæ„å…±åŒæ’°å†™å¹¶å‘å¸ƒäº†ç™¾é¡µç»¼è¿°ã€ŠMemory in the Age of AI Agents: A Surveyã€‹ï¼Œè¯•å›¾ç”¨ç»Ÿä¸€è§†è§’ä¸ºå¿«é€Ÿæ‰©å¼ ã€å´æ—¥ç›Šç¢ç‰‡åŒ–çš„ "Agent Memory" é‡æ–°æ¢³ç†æŠ€æœ¯è·¯å¾„ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0da031a3d3ff467b969811b38fab66b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2j5rGf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514037&amp;x-signature=R5BFav3HIowedXQ1Hm%2BxC6zzAB0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-1">è¡Œä¸šç°çŠ¶ï¼šè®°å¿†ç³»ç»Ÿçš„ä¸‰å¤§æŒ‘æˆ˜</h2>
<h3 data-id="heading-2">1. æ¦‚å¿µæ··æ·†ï¼šAgent Memory â‰  RAG â‰  Context Engineering</h3>
<p>åœ¨å¤§é‡å·¥ç¨‹å®è·µä¸­ï¼Œ"Memory" è¿™ä¸ªè¯å¾€å¾€è¢«è¿…é€Ÿç®€åŒ–ä¸ºå‡ ä¸ªå…·ä½“å®ç°ï¼šä¸€ä¸ªå‘é‡æ•°æ®åº“åŠ ä¸Šç›¸ä¼¼åº¦æ£€ç´¢ï¼Œæˆ–è€…å¹²è„†ç­‰åŒä¸ºæ›´é•¿çš„ä¸Šä¸‹æ–‡çª—å£ã€æ›´å¤§çš„ KV cacheã€‚ç„¶è€Œï¼Œè¿™äº›æŠ€æœ¯ä¸çœŸæ­£çš„ Agent Memory å­˜åœ¨æœ¬è´¨åŒºåˆ«ï¼š</p>
<ul>
<li><strong>Agent Memory</strong>ï¼šå…³æ³¨çš„æ˜¯æ™ºèƒ½ä½“æŒç»­ç»´æŒçš„è®¤çŸ¥çŠ¶æ€ï¼Œå®ƒä¸ä»… "å­˜"ï¼Œè¿˜è¦èƒ½åœ¨äº¤äº’ä¸­ä¸æ–­æ›´æ–°ã€æ•´åˆã€çº é”™ã€æŠ½è±¡ï¼Œå¹¶è·¨ä»»åŠ¡ä¿æŒä¸€è‡´æ€§ã€‚</li>
<li><strong>RAG</strong>ï¼šé€šå¸¸å¼ºè°ƒä»å¤–éƒ¨çŸ¥è¯†åº“æ£€ç´¢é™æ€ä¿¡æ¯ä»¥æå‡å›ç­”äº‹å®æ€§ï¼Œæ›´åƒ "çŸ¥è¯†è®¿é—®æ¨¡å—"ï¼Œè€Œéå®Œæ•´è®°å¿†ç³»ç»Ÿã€‚</li>
<li><strong>Context Engineering</strong>ï¼šä¼˜åŒ–çš„æ˜¯ "æ­¤åˆ»æ¨¡å‹çœ‹åˆ°ä»€ä¹ˆ"ï¼Œæ˜¯å¤–éƒ¨è„šæ‰‹æ¶ï¼›è€Œ Agent Memory æ˜¯æ”¯æŒå­¦ä¹ ä¸è‡ªä¸»æ€§çš„å†…éƒ¨åŸºåº•ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a1f9b9df2064320ac6b6efa19baa311~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2j5rGf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514037&amp;x-signature=6w1SI4PCOyyeMDpLbVHYRBLmJRg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
<h3 data-id="heading-3">2. æŠ€æœ¯ç¢ç‰‡åŒ–ï¼šç¼ºä¹ç»Ÿä¸€æ¡†æ¶</h3>
<p>ä¼ ç»Ÿçš„ "é•¿/çŸ­æœŸè®°å¿†" äºŒåˆ†æ³•å·²ç»ä¸è¶³ä»¥æè¿°å½“ä»£ç³»ç»Ÿé‡Œæ›´å¤æ‚çš„ç»“æ„å½¢æ€ä¸åŠ¨æ€æœºåˆ¶ã€‚æœ‰çš„è®°å¿†æ˜¯æ˜¾å¼ token å­˜å‚¨ï¼Œæœ‰çš„å†™è¿›å‚æ•°ï¼Œæœ‰çš„é©»ç•™åœ¨æ½œåœ¨çŠ¶æ€ï¼›æœ‰çš„æœåŠ¡äºäº‹å®ä¸€è‡´æ€§ï¼Œæœ‰çš„æœåŠ¡äºç»éªŒè¿ç§»ï¼Œæœ‰çš„æœåŠ¡äºå•æ¬¡ä»»åŠ¡çš„å·¥ä½œå°ç®¡ç†ã€‚</p>
<p>ç»¼è¿°æå‡º Formsâ€“Functionsâ€“Dynamics ä¸‰è§’æ¡†æ¶ï¼Œè¯•å›¾å›ç­”ä¸‰ç±»æ ¸å¿ƒé—®é¢˜ï¼š</p>
<ul>
<li><strong>Forms</strong>ï¼šè®°å¿†ä»¥ä»€ä¹ˆå½¢å¼å­˜åœ¨ï¼Ÿæ˜¯å¤–éƒ¨ tokenã€å‚æ•°ï¼Œè¿˜æ˜¯æ½œåœ¨çŠ¶æ€ï¼Ÿ</li>
<li><strong>Functions</strong>ï¼šè®°å¿†è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿå®ƒæœåŠ¡äºäº‹å®ä¸€è‡´ã€ç»éªŒæˆé•¿ï¼Œè¿˜æ˜¯ä»»åŠ¡å†…å·¥ä½œè®°å¿†ï¼Ÿ</li>
<li><strong>Dynamics</strong>ï¼šè®°å¿†å¦‚ä½•è¿è½¬ä¸æ¼”åŒ–ï¼Ÿå®ƒå¦‚ä½•å½¢æˆã€å¦‚ä½•è¢«ç»´æŠ¤ä¸æ›´æ–°ã€åˆå¦‚ä½•åœ¨å†³ç­–æ—¶è¢«æ£€ç´¢ä¸åˆ©ç”¨ï¼Ÿ
è¯·æ·»åŠ å›¾ç‰‡æè¿°</li>
</ul>
<h3 data-id="heading-4">3. å·¥ç¨‹å®è·µï¼šä»å¯å‘å¼åˆ°è‡ªä¼˜åŒ–çš„é¸¿æ²Ÿ</h3>
<p>å¦‚ä»Šå¾ˆå¤šæ­è½½ memory çš„ Agentï¼Œå…¶è®°å¿†è¡Œä¸ºæœ¬è´¨ä»æ˜¯å·¥ç¨‹è§„åˆ™ â€”â€” å†™ä»€ä¹ˆã€ä»€ä¹ˆæ—¶å€™å†™ã€æ€ä¹ˆæ›´æ–°/æ€ä¹ˆå–ï¼Œéƒ½é æç¤ºè¯ã€é˜ˆå€¼ã€äººå·¥ç­–ç•¥ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯æˆæœ¬ä½ã€å¯è§£é‡Šã€å¯å¤ç°ï¼Œé€‚åˆå¿«é€ŸåŸå‹ï¼›ä½†ç¼ºç‚¹ä¹ŸåŒæ ·è‡´å‘½ï¼šåƒµç¡¬ã€éš¾æ³›åŒ–ï¼Œåœ¨é•¿ç¨‹æˆ–å¼€æ”¾å¼äº¤äº’é‡Œå®¹æ˜“å¤±æ•ˆã€‚</p>
<h2 data-id="heading-5">Cortex Memoryï¼šé¢å‘ç”Ÿäº§ç¯å¢ƒçš„è®°å¿†ç³»ç»Ÿè§£å†³æ–¹æ¡ˆ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8542f08a20449abbb5b881d3b834a0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2j5rGf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514037&amp;x-signature=LdyVCZ8SEVHK9D%2FqBeYYXEtBXi4%3D" alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Cortex Memory æ˜¯ä¸€ä¸ªç”¨ Rust æ„å»ºçš„å®Œæ•´ã€ç”Ÿäº§å°±ç»ªçš„ AI åŸç”Ÿè®°å¿†æ¡†æ¶ï¼Œå®ƒä¸ä»…è§£å†³äº†ä¸Šè¿°è¡Œä¸šç—›ç‚¹ï¼Œæ›´æä¾›äº†é¢å‘æœªæ¥çš„å¯æ‰©å±•æ¶æ„ã€‚</p>
<h3 data-id="heading-6">æ ¸å¿ƒç‰¹æ€§</h3>
<h4 data-id="heading-7">1. æ™ºèƒ½äº‹å®æå–ï¼ˆFact Extractionï¼‰</h4>
<p>Cortex Memory è‡ªåŠ¨ä»éç»“æ„åŒ–æ–‡æœ¬ä¸­æå–å…³é”®äº‹å®å’Œæ´å¯Ÿï¼Œä½¿ç”¨ LLM è¿›è¡Œæ·±åº¦åˆ†æã€‚è¿™å¯¹åº” Forms æ¡†æ¶ä¸­çš„ Token-level Memoryï¼Œå°†ä¿¡æ¯å­˜æˆæŒä¹…ã€ç¦»æ•£ã€å¯å¤–éƒ¨è®¿é—®ä¸æ£€æŸ¥çš„å•å…ƒã€‚</p>
<p><strong>è¡Œä¸šä»·å€¼</strong>ï¼šè§£å†³ "åŸå§‹ä¸Šä¸‹æ–‡" åˆ° "å¯å­˜å¯å–çš„çŸ¥è¯†" çš„è½¬åŒ–é—®é¢˜ï¼Œé¿å… full-context prompting å¸¦æ¥çš„è®¡ç®—å¼€é”€ã€å†…å­˜å‹åŠ›å’Œæ¨ç†é€€åŒ–ã€‚</p>
<h4 data-id="heading-8">2. è®°å¿†åˆ†ç±»ä¸å»é‡ï¼ˆClassification &amp; Deduplicationï¼‰</h4>
<p>è‡ªåŠ¨ç»„ç»‡è®°å¿†å¹¶æ¶ˆé™¤å†—ä½™ä¿¡æ¯ï¼Œä¿æŒçŸ¥è¯†åº“çš„æ¸…æ´å’Œé«˜æ•ˆã€‚è¿™å¯¹åº” Functions æ¡†æ¶ä¸­çš„ Factual Memory ç®¡ç†ï¼Œæä¾›ä¸€ä¸ªå¯æ›´æ–°ã€å¯æ£€ç´¢ã€å¯æ²»ç†çš„å¤–éƒ¨äº‹å®å±‚ã€‚</p>
<p><strong>è¡Œä¸šä»·å€¼</strong>ï¼šè®©ç³»ç»Ÿåœ¨è·¨ session/è·¨é˜¶æ®µæ—¶æœ‰ç¨³å®šå‚è€ƒï¼Œé¿å…äº‹å®æ•£è½åœ¨å†å²å¯¹è¯é‡Œè¢«é—å¿˜ã€è¢«è¯¯å¼•ã€è¢«ç¼–é€ ã€‚</p>
<h4 data-id="heading-9">3. è‡ªåŠ¨è®°å¿†ä¼˜åŒ–ï¼ˆAutomated Optimizationï¼‰</h4>
<p>å®šæœŸå®¡æŸ¥ã€æ•´åˆå’Œç»†åŒ–è®°å¿†ï¼Œæé«˜ç›¸å…³æ€§å¹¶é™ä½æˆæœ¬ã€‚è¿™å¯¹åº” Dynamics æ¡†æ¶ä¸­çš„ Evolution é˜¶æ®µï¼Œé€šè¿‡åˆå¹¶ç›¸å…³æ¡ç›®ã€å†²çªæ¶ˆè§£ã€å‰ªæç­‰æœºåˆ¶ï¼Œè®©è®°å¿†ä¿æŒå¯æ³›åŒ–ã€è¿è´¯ä¸”é«˜æ•ˆã€‚</p>
<p><strong>è¡Œä¸šä»·å€¼</strong>ï¼šè§£å†³è®°å¿†åº“çš„ "ç»´æŠ¤ä¸æ–°é™ˆä»£è°¢" é—®é¢˜ï¼Œé¿å…è®°å¿†ç³»ç»Ÿåœ¨é•¿æœŸè¿è¡Œä¸­å˜å¾—è‡ƒè‚¿å’Œæ··ä¹±ã€‚</p>
<h4 data-id="heading-10">4. å‘é‡è¯­ä¹‰æœç´¢ï¼ˆVector-Based Semantic Searchï¼‰</h4>
<p>ä½¿ç”¨é«˜æ€§èƒ½å‘é‡ç›¸ä¼¼åº¦æœç´¢æ‰¾åˆ°æœ€ç›¸å…³çš„è®°å¿†ï¼Œæ”¯æŒå¤šè·³æ¨ç†ã€å…³ç³»çº¦æŸä¸ä¸€è‡´æ€§ç»´æŠ¤ã€‚</p>
<p><strong>è¡Œä¸šä»·å€¼</strong>ï¼šæä¾› Planar Memoryï¼ˆ2Dï¼‰çš„ç»„ç»‡èƒ½åŠ›ï¼Œè®©è®°å¿†å•å…ƒä¹‹é—´é€šè¿‡å…³ç³»è¿æ¥ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢å’Œæ¨ç†ã€‚</p>
<h3 data-id="heading-11">æŠ€æœ¯æ¶æ„ä¼˜åŠ¿</h3>
<h4 data-id="heading-12">Rust å¸¦æ¥çš„é«˜æ€§èƒ½ä¸å®‰å…¨æ€§</h4>
<p>Cortex Memory ä½¿ç”¨ Rust æ„å»ºï¼Œå¤©ç„¶å…·å¤‡å†…å­˜å®‰å…¨ã€å¹¶å‘å®‰å…¨å’Œé«˜æ€§èƒ½ç‰¹æ€§ã€‚è¿™å¯¹äºéœ€è¦å¤„ç†å¤§é‡è®°å¿†æ•°æ®å’Œé¢‘ç¹æ£€ç´¢çš„ç”Ÿäº§ç¯å¢ƒè‡³å…³é‡è¦ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    subgraph &amp;#34;User Interfaces&amp;#34;
        A[HTTP Client] --&gt; C[cortex-mem-service]
        B[Terminal User] --&gt; D[cortex-mem-cli]
        E[AI Agent] --&gt; F[cortex-mem-mcp]
        G[TUI Application] --&gt; H[cortex-mem-tars]
    end

    C --&gt; I[cortex-mem-core]
    D --&gt; I
    F --&gt; I
    H --&gt; I

    subgraph &amp;#34;Core Engine&amp;#34;
        I --&gt; J[LLM Client]
        I --&gt; K[Qdrant Vector Store]
    end

    I --&gt; L[cortex-mem-insights]
    L --&gt; M[Dashboard UI]

    style I fill:#4a90e2,color:white
    style J fill:#50c878,color:white
    style K fill:#d64161,color:white
</code></pre>
<h4 data-id="heading-13">æ¨¡å—åŒ–ç”Ÿæ€ç³»ç»Ÿè®¾è®¡</h4>
<pre><code class="hljs language-css" lang="css">cortex-mem-core      â†’ æ ¸å¿ƒè®°å¿†ç®¡ç†å¼•æ“
cortex-mem-service   â†’ <span class="hljs-attribute">REST</span> API æœåŠ¡
cortex-mem-cli       â†’ å‘½ä»¤è¡Œå·¥å…·
cortex-mem-insights  â†’ Web ç®¡ç†ä»ªè¡¨æ¿
cortex-mem-mcp       â†’ MCP é€‚é…å™¨
cortex-mem-rig       â†’ Agent æ¡†æ¶é›†æˆ
</code></pre>
<p>è¿™ç§è®¾è®¡æä¾›äº†çµæ´»æ€§å’Œå…³æ³¨ç‚¹åˆ†ç¦»ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„é›†æˆæ–¹å¼ã€‚</p>
<h4 data-id="heading-14">å¯è§‚æµ‹æ€§å·¥å…·é›†æˆ</h4>
<p>æä¾›å¼ºå¤§çš„ Web ä»ªè¡¨æ¿ï¼ˆcortex-mem-insightsï¼‰ï¼Œæ”¯æŒå®æ—¶ç›‘æ§ã€åˆ†æå’Œç®¡ç†è®°å¿†ç³»ç»Ÿã€‚è¿™å¯¹åº”è¡Œä¸šå‰æ²¿å±•æœ›ä¸­çš„ "å¯è§£é‡Šæ€§" è¦æ±‚ â€”â€” ä¸ä»…è¦çœ‹åˆ° "è®°å¿†å†…å®¹"ï¼Œè¿˜è¦èƒ½è¿½è¸ª "è®¿é—®è·¯å¾„"ã€‚</p>
<h2 data-id="heading-15">è¡Œä¸šè¶‹åŠ¿ä¸ Cortex Memory çš„å‰ç»æ€§</h2>
<h3 data-id="heading-16">è¶‹åŠ¿ä¸€ï¼šä» Memory Retrieval åˆ° Memory Generation</h3>
<p>ä¼ ç»Ÿæ£€ç´¢èŒƒå¼æŠŠè®°å¿†çœ‹æˆä¸€ä¸ªå·²ç» "å†™å¥½" çš„ä»“åº“ã€‚ä½† Agent çœŸæ­£çš„é•¿æœŸèƒ½åŠ›ä¸åªä¾èµ– "å–å›æ—§æ–‡æœ¬"ï¼Œè€Œæ›´ä¾èµ–ä¸€ç§é¢å‘æœªæ¥çš„æŠ½è±¡ã€‚</p>
<p><strong>Cortex Memory çš„å®è·µ</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨è®°å¿†ä¼˜åŒ–æœºåˆ¶å®ç°äº† "Retrieve-then-Generate" æ€è·¯ï¼Œå°†æ£€ç´¢åˆ°çš„ææ–™é‡å†™æˆæ›´ç´§å‡‘ã€æ›´ä¸€è‡´ã€æ›´ä»»åŠ¡ç›¸å…³çš„ "å¯ç”¨è®°å¿†"</li>
<li>ä¿ç•™å¯è¿½æº¯çš„å†å² groundingï¼ŒåŒæ—¶æå‡å¯ç”¨æ€§</li>
</ul>
<h3 data-id="heading-17">è¶‹åŠ¿äºŒï¼šä» Hand-crafted åˆ° Automated Memory Management</h3>
<p>è®© Agent è‡ªä¸»å‚ä¸è®°å¿†ç®¡ç†ï¼Œè€Œä¸æ˜¯ä¾èµ–äººå·¥è§„åˆ™ã€‚</p>
<p><strong>Cortex Memory çš„å®è·µ</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨è®°å¿†åˆ†ç±»ã€å»é‡å’Œä¼˜åŒ–</li>
<li>å¯é…ç½®çš„ä¼˜åŒ–è°ƒåº¦å’Œå‚æ•°</li>
<li>ä¸ºæœªæ¥æ¥å…¥ RL-driven æ§åˆ¶é¢„ç•™æ¥å£</li>
</ul>
<h3 data-id="heading-18">è¶‹åŠ¿ä¸‰ï¼šå¯ä¿¡è®°å¿†ï¼šéšç§ã€å¯è§£é‡Šä¸æŠ—å¹»è§‰</h3>
<p>å½“è®°å¿†è¿›å…¥é•¿æœŸã€ä¸ªæ€§åŒ–ã€è·¨ä¼šè¯å­˜å‚¨åï¼Œé—®é¢˜å·²ç»ä»ä¼ ç»Ÿ RAG çš„ "æ˜¯å¦ä¼šèƒ¡è¯´"ï¼Œæ‰©å±•åˆ°éšç§ã€å®‰å…¨ã€å¯æ§ä¸å¯å®¡è®¡ã€‚</p>
<p><strong>Cortex Memory çš„å®è·µ</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·çº§å’Œä»£ç†çº§çš„è®°å¿†éš”ç¦»ï¼Œæ”¯æŒç»†ç²’åº¦æƒé™æ§åˆ¶</li>
<li>å®Œæ•´çš„å®¡è®¡æ—¥å¿—å’Œå¯è¿½æº¯æ€§</li>
<li>Web ä»ªè¡¨æ¿æä¾›å¯è§†åŒ–è®°å¿†è®¿é—®è·¯å¾„</li>
</ul>
<h3 data-id="heading-19">è¶‹åŠ¿å››ï¼šå¤šæ¨¡æ€è®°å¿†</h3>
<p>éšç€ Agent èµ°å‘å…·èº«ã€äº¤äº’å¼ç¯å¢ƒï¼Œä¿¡æ¯æ¥æºå¤©ç„¶æ˜¯å¤šæ¨¡æ€çš„ã€‚</p>
<p><strong>Cortex Memory çš„å®è·µ</strong>ï¼š</p>
<ul>
<li>æ¶æ„è®¾è®¡æ”¯æŒæ‰©å±•åˆ°å¤šæ¨¡æ€è¾“å…¥</li>
<li>ç»Ÿä¸€çš„å‘é‡å­˜å‚¨å’Œæ£€ç´¢æœºåˆ¶ï¼Œä¸ºæœªæ¥å¤šæ¨¡æ€èåˆå¥ å®šåŸºç¡€</li>
</ul>
<h2 data-id="heading-20">å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-21">1. ä¸ªæ€§åŒ–å¯¹è¯åŠ©æ‰‹</h3>
<p>è®°ä½ç”¨æˆ·åå¥½ã€å†å²äº¤äº’å’Œå…³é”®ç»†èŠ‚ï¼Œæä¾›æ·±åº¦ä¸ªæ€§åŒ–çš„å¯¹è¯ä½“éªŒã€‚</p>
<h3 data-id="heading-22">2. ä»£ç /è½¯ä»¶å·¥ç¨‹ Agent</h3>
<p>è®°ä½ä»“åº“ç»“æ„ã€çº¦æŸä¸ä¿®å¤ç­–ç•¥ï¼Œé¿å…é‡å¤çŠ¯é”™ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-23">3. æ·±åº¦ç ”ç©¶å‹ Agent</h3>
<p>è®°ä½å·²é˜…è¯»çš„è¯æ®é“¾ã€å…³é”®å‡è®¾ä¸å¤±è´¥è·¯å¾„ï¼Œæ”¯æŒé•¿å‘¨æœŸç ”ç©¶å’Œæ¨ç†ã€‚</p>
<h3 data-id="heading-24">4. å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿ</h3>
<p>æ”¯æŒå…±äº«è®°å¿†ï¼Œå‡å°‘é‡å¤ï¼Œåˆ©äºé•¿ç¨‹åä½œï¼Œé¿å…ä¸Šä¸‹æ–‡å‰²è£‚ã€‚</p>
<h2 data-id="heading-25">ç»“è¯­ï¼šæŠŠ "è®°å¿†" å½“ä½œæ™ºèƒ½ä½“çš„ First-Class Primitive</h2>
<p>éšç€ AI Agent ä»åŸå‹èµ°å‘ç”Ÿäº§ï¼Œè®°å¿†ç³»ç»Ÿå·²ç»ä» "å¯é€‰æ¨¡å—" æ¼”è¿›ä¸º "åŸºç¡€è®¾æ–½"ã€‚Cortex Memory æ­£æ˜¯åœ¨è¿™ä¸ªå…³é”®èŠ‚ç‚¹ï¼Œæä¾›äº†ä¸€ä¸ªå®Œæ•´ã€ç”Ÿäº§å°±ç»ªçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å®ƒä¸ä»…è§£å†³äº†å½“å‰è¡Œä¸šé¢ä¸´çš„æ¦‚å¿µæ··æ·†ã€æŠ€æœ¯ç¢ç‰‡åŒ–å’Œå·¥ç¨‹å®è·µéš¾é¢˜ï¼Œæ›´é€šè¿‡å‰ç»æ€§çš„æ¶æ„è®¾è®¡ï¼Œä¸ºæœªæ¥ä»å¯å‘å¼åˆ°è‡ªä¼˜åŒ–ã€ä»æ£€ç´¢åˆ°ç”Ÿæˆã€ä»å•æ¨¡æ€åˆ°å¤šæ¨¡æ€çš„æ¼”è¿›å¥ å®šäº†åŸºç¡€ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨æ„å»ºéœ€è¦é•¿æœŸè®°å¿†çš„ AI åº”ç”¨ï¼ŒCortex Memory å€¼å¾—ä½ æ·±å…¥äº†è§£å’Œå°è¯•ã€‚</p>
<hr/>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsopaco%2Fcortex-mem" target="_blank" title="https://github.com/sopaco/cortex-mem" ref="nofollow noopener noreferrer">github.com/sopaco/cortâ€¦</a></p>
<p><strong>ç›¸å…³è®ºæ–‡</strong>ï¼šMemory in the Age of AI Agents: A Survey (<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.13564" target="_blank" title="https://arxiv.org/abs/2512.13564" ref="nofollow noopener noreferrer">arxiv.org/abs/2512.13â€¦</a>)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†åº“åˆ†è¡¨æ•°æ®æºShardingSphereDataSourceçš„Connectionå…ƒæ•°æ®è¯¯ç”¨é—®é¢˜åˆ†æ]]></title>    <link>https://juejin.cn/post/7588098335791169536</link>    <guid>https://juejin.cn/post/7588098335791169536</guid>    <pubDate>2025-12-28T08:15:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335791169536" data-draft-id="7588093282531278900" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†åº“åˆ†è¡¨æ•°æ®æºShardingSphereDataSourceçš„Connectionå…ƒæ•°æ®è¯¯ç”¨é—®é¢˜åˆ†æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T08:15:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é©¬å¡å·´å¡"/> <meta itemprop="url" content="https://juejin.cn/user/1892677617451163"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†åº“åˆ†è¡¨æ•°æ®æºShardingSphereDataSourceçš„Connectionå…ƒæ•°æ®è¯¯ç”¨é—®é¢˜åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1892677617451163/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é©¬å¡å·´å¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:15:19.000Z" title="Sun Dec 28 2025 08:15:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>å¯¹äºåˆ†åº“åˆ†è¡¨åº”ç”¨æ¥è¯´ï¼Œä½¿ç”¨org.apache.shardingsphere.driver.jdbc.core.datasource.ShardingSphereDataSourceæ˜¯ä¸€ä¸ªä¸é”™çš„è§£å†³æ–¹æ¡ˆï¼Œä½ å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ç¼–å†™åˆ†åº“åˆ†è¡¨è§„åˆ™ï¼Œä»è€Œåœ¨ç¼–ç æ—¶é€æ˜åœ°ä½¿ç”¨åˆ†è¡¨ï¼ˆå½“ç„¶ï¼Œè·¯ç”±è§„åˆ™çš„ç›¸å…³å­—æ®µè¿˜æ˜¯è¦ä¼ çš„</p>
<p>ä½†æ˜¯ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¯éœ€è¦ç»•è¿‡mybatisç›´æ¥åšä¸€äº›æ“ä½œçš„ï¼Œç‰¹åˆ«æ˜¯å’Œæ•°æ®åº“å…ƒæ•°æ®ç›¸å…³çš„æ“ä½œï¼ˆåŒ…æ‹¬è¡¨çš„ç»“æ„å˜æ›´ï¼‰ã€‚</p>
<p>æ¯”å¦‚æˆ‘é‡åˆ°çš„åœºæ™¯ï¼šå…ˆæŸ¥è¯¢å„ä¸ªåˆ†åº“ä¸­æœ‰å“ªäº›å‰ç¼€ä¸º<code>table_</code>çš„è¡¨ï¼Œå¹¶ç»™è¿™äº›è¡¨åŠ ä¸€åˆ—<code>col_x</code>ã€‚</p>
<p>æˆ‘ç»“åˆç°æœ‰ä»£ç å’Œå¤§è¯­è¨€æ¨¡å‹ï¼Œå…ˆå†™äº†ä¸€ç‰ˆï¼Œçº¿ä¸‹è¿è¡Œè‰¯å¥½ï¼Œä½†æ˜¯çº¿ä¸Šçš„æŸäº›åˆ†åº“æ­»æ´»æ‰¾ä¸åˆ°å¯¹åº”çš„åˆ†è¡¨ï¼Œæ²¡æ³•è¿›è¡Œåç»­çš„å¤„ç†ã€‚è¿™ä¸ªé—®é¢˜æŸ¥äº†å¾ˆä¹…ï¼Œæ˜¨å¤©ç»ˆäºè§£å†³äº†ï¼Œå› æ­¤åˆ†äº«å‡ºæ¥ã€‚</p>
<h2 data-id="heading-1">å­˜åœ¨é—®é¢˜çš„ä»£ç </h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Componet</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TableAlterHandler</span> {
    <span class="hljs-meta">@Resource</span> <span class="hljs-keyword">private</span> <span class="hljs-title class_">ShardingSphereDataSource</span> dataSource;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">findTablesByPrefix</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> prefix, <span class="hljs-built_in">String</span> physicalSchemaName</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">StringUtils</span>.<span class="hljs-title function_">isBlank</span>(prefix) || <span class="hljs-title class_">StringUtils</span>.<span class="hljs-title function_">isBlank</span>(physicalSchemaName)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"åˆ†è¡¨å‰ç¼€æˆ–åˆ†åº“åä¸ºç©º"</span>);
        }
        <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; tableNames = <span class="hljs-title class_">Lists</span>.<span class="hljs-title function_">newArrayList</span>();
        <span class="hljs-keyword">try</span> (<span class="hljs-title class_">HintManager</span> hintManager = <span class="hljs-title class_">HintManager</span>.<span class="hljs-title function_">getInstance</span>();
             <span class="hljs-title class_">Connection</span> conn = dataSource.<span class="hljs-title function_">getConnection</span>()) {
             hintManager.<span class="hljs-title function_">setDataSourceName</span>(<span class="hljs-title class_">DBUtil</span>.<span class="hljs-title function_">queryLogicalSchemaName</span>(physicalSchemaName));
            <span class="hljs-title class_">DatabaseMetaData</span> metaData = conn.<span class="hljs-title function_">getMetaData</span>();
            <span class="hljs-keyword">try</span> (<span class="hljs-title class_">ResultSet</span> rs = metaData.<span class="hljs-title function_">getTables</span>(physicalSchemaName, <span class="hljs-literal">null</span>, prefix + <span class="hljs-string">"%"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[] {<span class="hljs-string">"TABLE"</span>})) {
                <span class="hljs-keyword">while</span> (rs.<span class="hljs-title function_">next</span>()) {
                    <span class="hljs-title class_">String</span> tableName = rs.<span class="hljs-title function_">getString</span>(<span class="hljs-string">"TABLE_NAME"</span>);
                    tableNames.<span class="hljs-title function_">add</span>(tableName);
                }
            }
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">SQLException</span> e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"å¤„ç†å¤§ç»“æœé›†å¤±è´¥"</span>, e);
        }
        <span class="hljs-keyword">return</span> tableNames;
    }
}
</code></pre>
<h3 data-id="heading-2">é€»è¾‘åº“å’Œç‰©ç†åº“</h3>
<p>åœ¨åˆ†æé—®é¢˜ä¹‹å‰ï¼Œé¦–å…ˆè¦æ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µï¼šç‰©ç†åº“åphysicalSchemaNameå’Œé€»è¾‘åº“ålogicalSchemaNameï¼Œå¦‚æœç”¨é”™äº†ï¼Œå¯èƒ½ä¼šè®©ä½ æ²¡åŠæ³•å‘ç°åç»­é—®é¢˜çš„æœ¬è´¨åŸå› ã€‚ä¸Šé¢çš„ä»£ç ï¼ŒhintManagerå¿…é¡»ç”¨é€»è¾‘åº“åï¼Œè€ŒmetaData.getTableså¿…é¡»ç”¨ç‰©ç†åº“åã€‚</p>
<p>æ‰€è°“ç‰©ç†åº“å’Œé€»è¾‘åº“ï¼Œå¯ä»¥çœ‹ä½œæ˜¯æˆ‘å®šä¹‰çš„æ¦‚å¿µã€‚æ­£å¦‚å…¶åï¼Œç‰©ç†åº“åå°±æ˜¯ä½ jdbcUrlé‡Œçš„åº“åï¼Œæ¯”å¦‚ä¸€ä¸ªå…¸å‹çš„é˜¿é‡Œäº‘Mysqlçš„JDBCé“¾æ¥<code>jdbc:mysql://``rm-bpxxxx.mysql.rds.aliyuncs.com/bizcenter_1?useSSL=false&amp;autoReconnect=true&amp;characterEncoding=utf8&amp;serverTimezone=Asia/Shanghai</code></p>
<p>å…¶ä¸­çš„bizcenter_1å°±æ˜¯ç‰©ç†åº“åã€‚è¿™ä¸ªåç§°ä¹Ÿä¼šåœ¨MySqlå…ƒæ•°æ®ä¸­å‡ºç°ï¼Œæ¯”å¦‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> information_schema.tables;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªåº“çš„æ‰€æœ‰è¡¨ï¼Œè€ŒTABLE_SCHEMAåˆ—å°±æ˜¯ç‰©ç†åº“åã€‚</p>
<p>è€Œé€»è¾‘åº“ï¼Œåˆ™æ˜¯ShardingSphereDataSourceå¯¹ç‰©ç†åº“çš„æ˜ å°„ï¼Œåœ¨applicationçš„é…ç½®æ–‡ä»¶(propertiesæˆ–yml)é‡Œï¼Œspring.shardingsphere.datasourceé…ç½®ä¸‹ï¼Œä½ éœ€è¦é…ç½®é€»è¾‘åº“åä»¥åŠå¯¹åº”çš„JDBCé“¾æ¥ã€‚</p>
<p>ä½ å¯ä»¥å°†å¤šä¸ªé€»è¾‘åº“é…ç½®ä¸ºåŒä¸€ä¸ªç‰©ç†åº“ï¼Œè¿™æ˜¯ä¸€ç§å®è·µæ–¹å¼ï¼Œå¯ä»¥ç”¨äºåç»­çš„æ‰©å®¹ã€‚</p>
<h2 data-id="heading-3">é—®é¢˜ç°è±¡</h2>
<p>çº¿ä¸‹çš„ä¸‰ä¸ªé€»è¾‘åº“åˆ†åˆ«å¯¹åº”ä¸€ä¸ªç‰©ç†åº“ï¼Œè€Œè¿™ä¸‰ä¸ªç‰©ç†åº“åœ¨åŒä¸€ä¸ªé˜¿é‡Œäº‘RDSå®ä¾‹ä¸Šï¼Œå¯ä»¥æ‰¾åˆ°æ¯ä¸ªåº“å¯¹åº”çš„è¡¨ã€‚</p>
<p>è€Œçº¿ä¸Šçš„ä»ç„¶æ˜¯ä¸‰ä¸ªé€»è¾‘åº“å¯¹åº”å„è‡ªçš„ç‰©ç†åº“ï¼Œæ¯ä¸ªç‰©ç†åº“åœ¨ä¸åŒçš„é˜¿é‡Œäº‘RDSå®ä¾‹ä¸Šï¼Œä¼šå‡ºç°æœ‰æ—¶å€™èƒ½æ‰¾åˆ°æŸä¸ªåº“å¯¹åº”çš„è¡¨ï¼Œè€Œå¦å¤–ä¸¤ä¸ªåº“ä¸€ä¸ªè¡¨éƒ½æ‰¾ä¸åˆ°çš„æƒ…å†µã€‚</p>
<h2 data-id="heading-4">æ’æŸ¥</h2>
<p>é‡åˆ°é—®é¢˜åï¼Œç™¾æ€ä¸å¾—å…¶è§£ï¼Œå› ä¸ºçº¿ä¸‹ç¯å¢ƒä¸€åˆ‡æ­£å¸¸ï¼Œçº¿ä¸Šå´æ€»èƒ½å¤ç°é—®é¢˜ã€‚ç”±äºçº¿ä¸Šç¯å¢ƒç®¡æ§æ¯”è¾ƒä¸¥ï¼Œæ—¢ä¸èƒ½è¿œç¨‹debugï¼Œåˆä¸èƒ½ç›´è¿çº¿ä¸Šåº“ï¼Œå¾ˆéš¾å®šä½åŸå› ã€‚</p>
<p>ç¬¬ä¸€é˜¶æ®µæ’æŸ¥ï¼Œæˆ‘åå¤ç¡®è®¤äº†ä¸Šé¢ä»£ç ä¸­éœ€è¦ä¼ æ•°æ®åº“åçš„åœ°æ–¹åˆ°åº•æ˜¯é€»è¾‘åº“è¿˜æ˜¯ç‰©ç†åº“ã€‚ä¸­é—´æŸä¸ªç‰ˆæœ¬çš„ç¡®æé”™äº†ï¼Œä½†æ˜¯ä¸ºä½•åœ¨å†™é”™çš„å‰æä¸‹è¿˜èƒ½è¿è¡Œï¼Œæ²¡æœ‰åšè®°å½•ã€‚</p>
<p>ç„¶åï¼Œæˆ‘åˆ æ‰äº†<code>connection.setAutoCommit(false)</code>ã€<code>resultSet.setFetchSize(batchSize)</code>è¿™æ ·çš„ç”¨äºé™ä½æ¯æ¬¡æŸ¥è¯¢å…ƒæ•°æ®ç»“æœæ•°é‡çš„ä»£ç ï¼Œä¹Ÿæ²¡æ•ˆæœã€‚</p>
<p>æœ€åï¼Œæˆ‘æŠŠä»£ç ç§»åˆ°äº†å¦ä¸€ä¸ªè¿æ¥åŒæ ·æ•°æ®åº“çš„åº”ç”¨ä¸­ï¼Œå› ä¸ºé‚£ä¸ªåº”ç”¨æœ‰æˆ‘ä¹‹å‰ç±»ä¼¼çš„ä»£ç ã€‚ç§»è¿‡å»ä»¥åå€’æ˜¯æ­ªæ‰“æ­£ç€åœ°è§£å†³äº†ã€‚</p>
<p>ç¬¬äºŒé˜¶æ®µçš„æ’æŸ¥ï¼Œæ˜¯åœ¨ä¸€æ®µæ—¶é—´åï¼Œæˆ‘åœ¨åŸå…ˆçš„åº”ç”¨ä¸­å¼€å‘æ–°çš„åŠŸèƒ½ï¼Œå¯¹åŸå…ˆä»£ç è¿›è¡Œæ”¹åŠ¨ï¼Œè‡ªä»¥ä¸ºä¿®å¤å¥½äº†ï¼Œä½†æ˜¯ä¸Šçº¿åå‘ç°è¿˜æ˜¯å’Œä¹‹å‰ä¸€æ ·ã€‚</p>
<h2 data-id="heading-5">åˆ†æ</h2>
<p>çº¿ä¸‹çº¿ä¸Šæœ€å¤§çš„åŒºåˆ«å°±æ˜¯çº¿ä¸‹å‡ ä¸ªåº“æ˜¯åŒä¸€ä¸ªMySqlå®ä¾‹ï¼Œè€Œçº¿ä¸Šåˆ†å±ä¸‰ä¸ªã€‚æˆ‘çš„ä»£ç é‡Œï¼Œç–‘ç‚¹æœ€å¤§çš„æ˜¯æŸ¥è¯¢å…ƒæ•°æ®<code>metaData.getTables()</code>è¿™æ®µã€‚</p>
<p>å¥½å·§ä¸å·§ï¼Œåœ¨æˆ‘æ’æŸ¥çš„ç¬¬ä¸€é˜¶æ®µå’Œç¬¬äºŒé˜¶æ®µä¸­é—´ï¼Œæˆ‘å†™äº†ä¸€ä¸ªè¿ç§»è¡¨çš„åŠŸèƒ½ï¼Œå®Œå…¨æ–°å†™äº†æŸ¥è¯¢è¡¨åçš„ä»£ç ï¼Œå¹¶ä¸”ä¸ºäº†ä¸å†çŠ¯ç‰©ç†åº“å’Œé€»è¾‘åº“ææ··çš„é”™è¯¯ï¼Œç‰¹åˆ«åœ°å†™äº†å¯¹åº”çš„å·¥å…·ç±»ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * æ•°æ®æºæŒæœ‰ç»„ä»¶ï¼Œä¾¿äºåº”ç”¨ç›´æ¥è®¿é—®æ•°æ®æº
 *
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceHolder</span> {

  <span class="hljs-meta">@Resource</span> <span class="hljs-keyword">protected</span> <span class="hljs-title class_">ShardingSphereDataSource</span> dataSource;

  <span class="hljs-comment">/** ç‰©ç†åº“å(jdbcé“¾æ¥é‡Œçš„åº“å)å’Œæ•°æ®æºçš„å…³ç³» */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">HikariDataSource</span>&gt; hikariDataSourceMap;

  <span class="hljs-comment">/** é€»è¾‘åº“å-ç‰©ç†åº“åå…³ç³» å¤šä¸ªé€»è¾‘åº“å¯èƒ½å¯¹åº”åŒä¸€ä¸ªç‰©ç†åº“ */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; dsNameMap;

  <span class="hljs-comment">/**
   * é€šè¿‡ç‰©ç†åº“åè·å–ds
   *
   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">physicalSchemaName</span>
   * <span class="hljs-doctag">@return</span>
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title class_">HikariDataSource</span> <span class="hljs-title function_">getDataSourceByPhysicalSchemaName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> physicalSchemaName</span>) {
    <span class="hljs-keyword">return</span> hikariDataSourceMap.<span class="hljs-title function_">get</span>(physicalSchemaName);
  }

  <span class="hljs-comment">/**
   * é€šè¿‡é€»è¾‘åº“åè·å–å¯¹åº”ç‰©ç†åº“å
   *
   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">dsName</span>
   * <span class="hljs-doctag">@return</span>
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getPhysicalSchemaName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> dsName</span>) {
    <span class="hljs-keyword">return</span> dsNameMap.<span class="hljs-title function_">get</span>(dsName);
  }

  <span class="hljs-comment">/**
   * é€šè¿‡é€»è¾‘åº“åè·å–ds
   *
   * <span class="hljs-doctag">@param</span> <span class="hljs-variable">logicalSchemaName</span>
   * <span class="hljs-doctag">@return</span>
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title class_">HikariDataSource</span> <span class="hljs-title function_">getDataSourceByLogicalSchemaName</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> logicalSchemaName</span>) {
    <span class="hljs-title class_">String</span> physicalSchemaName = <span class="hljs-title function_">getPhysicalSchemaName</span>(logicalSchemaName);
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">StringUtils</span>.<span class="hljs-title function_">isBlank</span>(physicalSchemaName)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"é€»è¾‘åº“åæ‰¾ä¸åˆ°å¯¹åº”ç‰©ç†åº“, logicalSchemaName="</span> + logicalSchemaName);
    }
    <span class="hljs-keyword">return</span> hikariDataSourceMap.<span class="hljs-title function_">get</span>(physicalSchemaName);
  }

  <span class="hljs-meta">@PostConstruct</span>
  <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">initHikariDataSourceMap</span>(<span class="hljs-params"/>) {
    dsNameMap = <span class="hljs-title class_">Maps</span>.<span class="hljs-title function_">newHashMap</span>();
    hikariDataSourceMap = <span class="hljs-title class_">Maps</span>.<span class="hljs-title function_">newHashMap</span>();
    <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">DataSource</span>&gt; dataSourceMap =
        dataSource.<span class="hljs-title function_">getContextManager</span>().<span class="hljs-title function_">getDataSourceMap</span>(dataSource.<span class="hljs-title function_">getSchemaName</span>());
    dataSourceMap.<span class="hljs-title function_">forEach</span>(
        (dsName, ds) -&gt; {
          <span class="hljs-title class_">HikariDataSource</span> hds = (<span class="hljs-title class_">HikariDataSource</span>) ds;
          <span class="hljs-keyword">try</span> (<span class="hljs-title class_">Connection</span> connection = hds.<span class="hljs-title function_">getConnection</span>(); ) {
            hikariDataSourceMap.<span class="hljs-title function_">put</span>(connection.<span class="hljs-title function_">getCatalog</span>(), hds);
            dsNameMap.<span class="hljs-title function_">put</span>(dsName, connection.<span class="hljs-title function_">getCatalog</span>());
          } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">SQLException</span> e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç»„è£…æ•°æ®æºmapå¤±è´¥"</span>, e);
          }
        });
  }
}
</code></pre>
<p>å¯¹åº”åœ°ï¼Œè·å–æ•°æ®åº“Connectionçš„æ–¹æ³•æ˜¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">HikariDataSource <span class="hljs-attr">hikariDataSource</span> = dataSourceHolder.getDataSourceByPhysicalSchemaName(dsName)<span class="hljs-comment">;</span>
Connection <span class="hljs-attr">connection</span> = hikariDataSource.getConnection()<span class="hljs-comment">;</span>
</code></pre>
<p>å¹¶ä¸”ä¹Ÿä¸å†ä½¿ç”¨HintManageræŒ‡å®šé€»è¾‘åº“ã€‚</p>
<p>è”æƒ³åˆ°çº¿ä¸Šçº¿ä¸‹MySqlå®ä¾‹çš„å·®å¼‚ï¼Œæˆ‘çŒœæµ‹æ˜¯å› ä¸ºï¼š</p>
<p>çº¿ä¸‹ä¸‰ä¸ªåº“æ˜¯åŒä¸€ä¸ªMySqlå®ä¾‹ï¼Œé‚£ä¹ˆå…ƒæ•°æ®information_schema.tablesæ˜¯ä¸€æ ·çš„ï¼Œåœ¨å“ªä¸ªåº“éƒ½èƒ½æŸ¥åˆ°å¯¹åº”è¡¨ã€‚</p>
<p>çº¿ä¸Šåˆ™æ˜¯ä¸åŒçš„å®ä¾‹ï¼Œç›´æ¥ä½¿ç”¨ShardingSphereDataSourceå¯¹åº”Connectionçš„å…ƒæ•°æ®ï¼Œå¹¶ä¸æ€»æ˜¯é¢„æœŸçš„åº“ã€‚</p>
<p>è¿™ä¸ªçŒœæµ‹åŸå› ï¼Œä¹Ÿåœ¨ä¹‹å‰ç¬¬ä¸€é˜¶æ®µçš„æ’æŸ¥å»åˆï¼Œèƒ½æ­£å¸¸å·¥ä½œçš„ä»£ç æ‰€åœ¨åº”ç”¨ï¼Œè·å–æ•°æ®æºçš„æ–¹å¼å®é™…æ˜¯</p>
<pre><code class="hljs language-ini" lang="ini">Map&lt;String, DataSource&gt; <span class="hljs-attr">allDataSource</span> =
    shardingSphereDataSource.getContextManager().getDataSourceMap("logic_db")<span class="hljs-comment">;</span>
Connection <span class="hljs-attr">connection</span> = allDataSouce.get(logicalSchemaName).getConnection()<span class="hljs-comment">;</span>
</code></pre>
<p>è™½ç„¶å®ƒä¹Ÿç”¨äº†HintMangerï¼Œä½†æˆ‘è®¤ä¸ºæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p>
<h2 data-id="heading-6">ä¿®å¤</h2>
<p>ç»¼åˆä»¥ä¸Šçš„åˆ†æï¼Œæœ€ç»ˆçš„ä¿®å¤ä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-ini" lang="ini">    List&lt;String&gt; <span class="hljs-attr">tableNames</span> = Lists.newArrayList()<span class="hljs-comment">;</span>
    try (Connection <span class="hljs-attr">conn</span> =
        dataSourceHolder.getDataSourceByPhysicalSchemaName(physicalSchemaName).getConnection()) {
      DatabaseMetaData <span class="hljs-attr">metaData</span> = conn.getMetaData()<span class="hljs-comment">;</span>
      try (ResultSet <span class="hljs-attr">rs</span> =
          metaData.getTables(physicalSchemaName, null, prefix + "%", new String<span class="hljs-section">[]</span> {"TABLE"})) {
        while (rs.next()) {
          String <span class="hljs-attr">tableName</span> = rs.getString(<span class="hljs-string">"TABLE_NAME"</span>)<span class="hljs-comment">;</span>
          tableNames.add(tableName)<span class="hljs-comment">;</span>
        }
      }
    } catch (SQLException e) {
      throw new RuntimeException("å¤„ç†å¤§ç»“æœé›†å¤±è´¥", e)<span class="hljs-comment">;</span>
    }
    return tableNames<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ¬¡å†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œè¿è¡Œç¬¦åˆé¢„æœŸã€‚</p>
<p>å¯è§ï¼Œå½“ä½ éœ€è¦å®é™…åˆ†åº“å¯¹åº”çš„å…ƒæ•°æ®æ—¶ï¼Œä¸è¦ç”¨shardingSphereDataSourceï¼Œè€Œæ˜¯åº”è¯¥ç”¨å®ƒå…³è”å…·ä½“åˆ†åº“çš„dataSourceï¼Œä¹Ÿå³shardingSphereDataSource.getContextManager().getDataSourceMap()ï¼Œå†ç”¨è¿™ä¸ªåˆ†åº“dataSourceè·å–å…ƒæ•°æ®ã€‚</p>
<p>å¦åˆ™ï¼Œçº¿ä¸‹çº¿ä¸Šä¸åŒçš„MySqlå®ä¾‹é…ç½®ï¼Œä¼šå¯¼è‡´ä¸åŒçš„ç°è±¡ï¼Œéš¾ä»¥æ’æŸ¥çœŸæ­£çš„åŸå› ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç›®å‰å¼€æºæ¶æ„éœ€è¦æ³¨æ„çš„å®‰å…¨é—®é¢˜]]></title>    <link>https://juejin.cn/post/7588300640599457798</link>    <guid>https://juejin.cn/post/7588300640599457798</guid>    <pubDate>2025-12-28T09:36:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640599457798" data-draft-id="7588300640599441414" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç›®å‰å¼€æºæ¶æ„éœ€è¦æ³¨æ„çš„å®‰å…¨é—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-28T09:36:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITç•ŒTonyå“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3157453122578087"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç›®å‰å¼€æºæ¶æ„éœ€è¦æ³¨æ„çš„å®‰å…¨é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3157453122578087/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITç•ŒTonyå“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:36:26.000Z" title="Sun Dec 28 2025 09:36:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>SpringBoot + Vue å¼€æºæ¡†æ¶å¸¸è§å®‰å…¨é£é™©ä¸é˜²æŠ¤è¦ç‚¹</strong> <strong>ä¸€ é€šç”¨é«˜é£é™©æ¼æ´</strong></p>
<ul>
<li><strong>SQL æ³¨å…¥</strong>ï¼šä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥æˆ– MyBatis çš„ <strong>${}</strong> â€‹ ç›´æ¥æ’å€¼æœ€æ˜“è¢«åˆ©ç”¨ï¼›åº”ä½¿ç”¨<strong>å‚æ•°åŒ–æŸ¥è¯¢/é¢„ç¼–è¯‘</strong>ã€å¯¹æ’åº/æœç´¢å…³é”®å­—åš<strong>ç™½åå•æ ¡éªŒ</strong>ï¼Œå¹¶æ¸…ç†å¯æ§çš„ <strong>ORDER BY/Group By</strong>â€‹ è¾“å…¥ã€‚</li>
<li><strong>æ–‡ä»¶ä¸Šä¼ </strong>ï¼šæœªæ ¡éªŒ<strong>Content-Type/é­”æ•°</strong>ã€æœª<strong>é‡å‘½å</strong>ã€æœªé™åˆ¶<strong>å­˜å‚¨è·¯å¾„</strong>ä¸<strong>å¯æ‰§è¡Œåç¼€</strong>ï¼Œæ˜“è¢«ä¸Šä¼  WebShellï¼›åº”å¯ç”¨ç™½åå•ã€éšæœºåã€éš”ç¦»ç›®å½•ã€ç¦ç”¨æ‰§è¡Œæƒé™ã€‚</li>
<li><strong>XSS</strong>ï¼šæœåŠ¡ç«¯è¿”å›æˆ–å‰ç«¯æ¨¡æ¿ç›´æ¥æ¸²æŸ“<strong>æœªè½¬ä¹‰</strong>çš„ç”¨æˆ·è¾“å…¥ï¼Œå¯¼è‡´å­˜å‚¨/åå°„å‹ XSSï¼›åº”åœ¨æœåŠ¡ç«¯å¯¹è¾“å‡ºè¿›è¡Œ<strong>HTML è½¬ä¹‰</strong>ï¼Œå‰ç«¯é¿å…ä½¿ç”¨ <strong>v-html</strong>â€‹ æ¸²æŸ“ä¸å¯ä¿¡å†…å®¹ã€‚</li>
<li><strong>CORS é…ç½®ä¸å½“</strong>ï¼šå°† <strong>Access-Control-Allow-Origin: *<strong>ä¸å‡­æ®ï¼ˆå¦‚ <strong>withCredentials</strong>ï¼‰æ··ç”¨ï¼Œæˆ–ä¿¡ä»»ä»»æ„ <strong>Origin/Referer/Host</strong>ï¼Œä¼šè¢«å·¥å…·åˆ¤å®šä¸ºé«˜å±ï¼›åº”æ”¹ä¸º</strong>ç²¾ç¡®åŒ¹é…ç™½åå•</strong>å¹¶é…åˆç½‘å…³/è¿‡æ»¤å™¨æ ¡éªŒã€‚</li>
<li><strong>é”™è¯¯ä¿¡æ¯æ³„éœ²</strong>ï¼šå°†<strong>å †æ ˆ/SQL</strong>ç›´è¿”å‰ç«¯ï¼Œæ—¢æš´éœ²å®ç°ç»†èŠ‚åˆåˆ©äºæ”»å‡»é“¾æ„é€ ï¼›åº”ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼Œç”Ÿäº§ç¯å¢ƒ<strong>ä¸è¿”å›æŠ€æœ¯ç»†èŠ‚</strong>ã€‚</li>
<li><strong>CSRF ä¸æƒé™ç»•è¿‡</strong>ï¼šçŠ¶æ€æ”¹å˜ç±»æ¥å£ç¼ºå°‘<strong>CSRF Token</strong>æˆ–<strong>SameSite</strong>â€‹ ç­–ç•¥ï¼Œæˆ–å­˜åœ¨<strong>URL è§„åˆ™ç»•è¿‡</strong>ï¼›åº”ä½¿ç”¨ Token/åŒé‡æäº¤ Cookieï¼Œå¹¶åœ¨ç½‘å…³/å®‰å…¨æ¡†æ¶å±‚åš<strong>è·¯å¾„ä¸æ–¹æ³•</strong>ä¸¥æ ¼åŒ¹é…ã€‚</li>
</ul>
<p><strong>äºŒ æ¡†æ¶ç‰¹æœ‰æˆ–é«˜é¢‘é—®é¢˜</strong></p>
<ul>
<li>
<p><strong>RuoYi ç³»åˆ—ï¼ˆè‹¥ä¾ï¼‰</strong> â€‹</p>
<ul>
<li><strong>Shiro RememberMe ååºåˆ—åŒ–ä¸é»˜è®¤å¯†é’¥</strong>ï¼šæ—©æœŸç‰ˆæœ¬å­˜åœ¨é»˜è®¤ <strong>AES Key</strong>â€‹ å¯¼è‡´ <strong>rememberMe</strong>â€‹ Cookie ååºåˆ—åŒ– RCEï¼›å»ºè®®å‡çº§è‡³åŒ…å«éšæœºå¯†é’¥çš„ç‰ˆæœ¬ï¼ˆå¦‚ <strong>â‰¥4.6.2</strong>ï¼‰ï¼Œå¹¶è‡ªå®šä¹‰é«˜å¼ºåº¦å¯†é’¥ã€å¯ç”¨ <strong>AES-GCM</strong>ã€‚</li>
<li><strong>å¤šå¤„ SQL æ³¨å…¥</strong>ï¼šå¦‚ <strong>/system/role/list</strong>ã€ <strong>/system/role/export</strong>â€‹ ç­‰æ¥å£åœ¨ <strong>&lt;4.6.2</strong>â€‹ ç‰ˆæœ¬å¯é€šè¿‡ <strong>params[dataScope]</strong> â€‹ æ³¨å…¥ï¼›åº”å‡çº§å¹¶ç»Ÿä¸€æ”¹ä¸ºå‚æ•°åŒ–æŸ¥è¯¢ã€‚</li>
<li><strong>ä»»æ„æ–‡ä»¶ä¸‹è½½ï¼ˆCNVD-2021-01931ï¼‰</strong> ï¼š <strong>/common/download/resource</strong>â€‹ æœªæ ¡éªŒè·¯å¾„ï¼Œåˆ©ç”¨ <strong>../</strong> â€‹ éå†è¯»å–æ•æ„Ÿæ–‡ä»¶ï¼›åº”å‡çº§è‡³ <strong>â‰¥4.5.1</strong>â€‹ å¹¶å¢åŠ è·¯å¾„ä¸åç¼€ç™½åå•ã€‚</li>
<li><strong>å®šæ—¶ä»»åŠ¡ RCE</strong>ï¼š <strong>&lt;4.7.8</strong>â€‹ å¯é€šè¿‡ä¿®æ”¹ä»»åŠ¡å†…å®¹è§¦å‘ <strong>SnakeYAML/JNDI</strong>â€‹ ç­‰åŠ è½½è¿œç¨‹æ¶æ„ç±»ï¼›åº”å‡çº§å¹¶é™åˆ¶ä»»åŠ¡å†…å®¹ã€ç¦ç”¨å±é™©åè®®ï¼ˆrmi/ldap/httpï¼‰ã€‚</li>
<li><strong>å†å²ä¾èµ–æ¼æ´</strong>ï¼šå¦‚ <strong>Thymeleaf</strong>â€‹ æ¨¡æ¿æ³¨å…¥ï¼ˆ<strong>â‰¤3.0.12</strong>ï¼‰ã€<strong>Log4j2</strong>ï¼ˆ<strong>â‰¤2.17.0</strong>ï¼‰ç­‰ï¼Œéœ€æŒ‰å®˜æ–¹ç‰ˆæœ¬å‡çº§ã€‚</li>
</ul>
</li>
<li>
<p><strong>Jeecg-Boot</strong>â€‹</p>
<ul>
<li><strong>SQL æ³¨å…¥</strong>ï¼šå¦‚ <strong>/onlDragDatasetHead/getTotalData</strong>ã€ <strong>/jmreport/qurestSql</strong>â€‹ ç­‰æ¥å£å­˜åœ¨æ‹¼æ¥/æ¨¡æ¿æ³¨å…¥é£é™©ï¼›å»ºè®®å‡çº§è‡³ <strong>v3.7.2+</strong> â€‹ å¹¶ä¸¥æ ¼å‚æ•°åŒ–ã€‚</li>
<li><strong>è¡¨è¾¾å¼/è„šæœ¬æ³¨å…¥</strong>ï¼š<strong>AviatorScript</strong>â€‹ è¡¨è¾¾å¼æœªè¿‡æ»¤å¯è§¦å‘å‘½ä»¤æ‰§è¡Œï¼›åº”ç¦ç”¨å±é™©å‡½æ•°æˆ–å¯ç”¨æ²™ç®±ã€‚</li>
<li><strong>Fastjson/JNDI ååºåˆ—åŒ–</strong>ï¼šè€ç‰ˆæœ¬ <strong>Fastjson</strong>â€‹ å¯è¢« <strong>JNDI</strong>â€‹ åŠ è½½è¿œç¨‹ç±»ï¼›åº”å‡çº§å¹¶å…³é—­ <strong>JNDI Lookup</strong>ã€‚</li>
<li><strong>æœªæˆæƒæ–‡ä»¶ä¸Šä¼ /ä¿¡æ¯æ³„éœ²</strong>ï¼šå¦‚ <strong>/jmreport/upload</strong>â€‹ æœªé‰´æƒä¸Šä¼ ã€ <strong>/sys/user/querySysUser</strong>â€‹ æœªé‰´æƒè®¿é—®ï¼›éœ€åŠ é‰´æƒä¸ç»†ç²’åº¦æƒé™æ§åˆ¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>äººäººå¼€æº Renren-Fast</strong>â€‹</p>
<ul>
<li><strong>CORS ä¸å®‰å…¨è¿‡æ»¤å™¨è¯¯é…</strong>ï¼šå¸¸è§ä¸º <strong>Access-Control-Allow-Origin: *<strong>æˆ– <strong>JWTFilter</strong>â€‹ å¤„ç†ä¸å½“å¼•å‘è·¨åŸŸä¸é‰´æƒé—®é¢˜ï¼›åº”æ”¹ä¸º</strong>ç™½åå•</strong>å¹¶è§„èŒƒè¿‡æ»¤å™¨é“¾ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ä¸‰ Spring ç”Ÿæ€ä¸ä¾èµ–ç»„ä»¶é£é™©</strong></p>
<ul>
<li><strong>SpEL è¡¨è¾¾å¼æ³¨å…¥</strong>ï¼šå†å²ç‰ˆæœ¬å­˜åœ¨å¤šå¤„ <strong>SpEL</strong>â€‹ æ³¨å…¥å¯¼è‡´ RCEï¼Œå¦‚ <strong>Spring Data REST PATCH</strong>ï¼ˆCVE-2017-8046ï¼‰ã€<strong>Spring WebFlow</strong>ï¼ˆCVE-2017-4971ï¼‰ã€<strong>Spring Messaging/WebSocket</strong>ï¼ˆCVE-2018-1270ï¼‰ã€ä»¥åŠ <strong>Spring Framework 5.0â€“5.0.4 / 4.3â€“4.3.14</strong>â€‹ çš„ WebSocket ç›¸å…³ç¼ºé™·ï¼›åº”å‡çº§è‡³ä¿®å¤ç‰ˆæœ¬ï¼Œé¿å…å°†ç”¨æˆ·è¾“å…¥ä½œä¸º <strong>SpEL</strong>â€‹ è§£æã€‚</li>
<li><strong>Spring Cloud Gateway Actuator SpEL æ³¨å…¥ï¼ˆCVE-2022-22947ï¼‰</strong> ï¼šå¯è®¿é—® Actuator æ—¶é€šè¿‡è·¯ç”±åˆ·æ–°æ³¨å…¥ <strong>SpEL</strong>â€‹ æ‰§è¡Œå‘½ä»¤ï¼›åº”å‡çº§è‡³ <strong>3.1.1+/3.0.7+</strong> ï¼Œå¹¶é™åˆ¶ Actuator æš´éœ²ä¸é‰´æƒã€‚</li>
<li><strong>Spring Cloud Function SpEL æ³¨å…¥ï¼ˆCVE-2022-22963ï¼‰</strong> ï¼šè¯·æ±‚å¤´ <strong>spring.cloud.function.routing-expression</strong>â€‹ æœªè¿‡æ»¤å¯¼è‡´ RCEï¼›åº”å‡çº§å¹¶ç§»é™¤/é™åˆ¶è¯¥è¯·æ±‚å¤´è§£æã€‚</li>
<li><strong>Spring Framework è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆCVE-2022-22965ï¼ŒSpring4Shellï¼‰</strong> ï¼šç‰¹å®šç»‘å®šä¸è¡¨è¾¾å¼è§£æè·¯å¾„ç»„åˆå¯å†™å±æ€§è§¦å‘ RCEï¼›åº”å‡çº§è‡³ä¿®å¤ç‰ˆæœ¬å¹¶é¿å…ä¸å®‰å…¨çš„æ•°æ®ç»‘å®šé…ç½®ã€‚</li>
<li><strong>Spring Security è®¤è¯ç»•è¿‡ï¼ˆCVE-2022-22978ï¼‰</strong> ï¼šæ—©æœŸç‰ˆæœ¬å­˜åœ¨ç»•è¿‡ï¼›åº”å‡çº§å¹¶å¤æ ¸å®‰å…¨é…ç½®ã€‚</li>
<li><strong>H2 Database Console æœªæˆæƒè®¿é—®</strong>ï¼šå¼€å¯ <strong>spring.h2.console.enabled=true</strong>â€‹ ä¸” <strong>web-allow-others=true</strong>â€‹ å¯è¢«æœªæˆæƒè®¿é—®å¹¶ç”¨äº <strong>JNDI</strong>â€‹ æ”»å‡»ï¼›ç”Ÿäº§åº”å…³é—­æˆ–é™åˆ¶è®¿é—®æ¥æºã€‚</li>
</ul>
<p><strong>å›› å¿«é€Ÿè‡ªæ£€ä¸åŠ å›ºæ¸…å•</strong></p>
<ul>
<li><strong>ä¾èµ–ä¸ç‰ˆæœ¬</strong>ï¼šå»ºç«‹<strong>SBOM</strong>ï¼Œå®šæœŸå‡çº§ <strong>Spring Boot/Spring Security/Spring Cloud/ç¬¬ä¸‰æ–¹åº“</strong>åˆ°å®‰å…¨ç‰ˆæœ¬ï¼›é‡ç‚¹æ’æŸ¥å†å² <strong>SpEL/CVE</strong>â€‹ ä¸ <strong>H2 Console</strong>â€‹ æš´éœ²ã€‚</li>
<li><strong>è¾“å…¥æ ¡éªŒä¸è¾“å‡ºç¼–ç </strong>ï¼šå…¨é“¾è·¯<strong>ç™½åå•æ ¡éªŒ</strong>ï¼ˆå‚æ•°ã€Headerã€Content-Typeã€æ–‡ä»¶åï¼‰ï¼ŒæœåŠ¡ç«¯<strong>HTML è½¬ä¹‰</strong>ï¼›é¿å… <strong>${}</strong> â€‹ å­—ç¬¦ä¸²æ‹¼æ¥ SQLï¼Œç»Ÿä¸€ç”¨<strong>å‚æ•°åŒ–æŸ¥è¯¢</strong>ã€‚</li>
<li><strong>æ–‡ä»¶ä¸Šä¼ </strong>ï¼šç™½åå• <strong>MIME/é­”æ•°</strong>ã€<strong>éšæœºé‡å‘½å</strong>ã€<strong>éš”ç¦»ç›®å½•</strong>ã€<strong>ç¦ç”¨æ‰§è¡Œæƒé™</strong>ï¼Œä¸Šä¼ å<strong>äºŒæ¬¡æ ¡éªŒ</strong>ä¸<strong>ç—…æ¯’æ‰«æ</strong>ã€‚</li>
<li><strong>è®¤è¯ä¸ä¼šè¯</strong>ï¼šå¼ºå£ä»¤ç­–ç•¥ä¸<strong>é”å®š/éªŒè¯ç </strong>ï¼Œå®‰å…¨çš„ <strong>RememberMe</strong>â€‹ å®ç°ï¼ˆå¼ºå¯†é’¥ã€éšæœºåŒ–ï¼‰ï¼Œ<strong>JWT</strong>â€‹ çŸ­æœ‰æ•ˆæœŸä¸åˆ·æ–°æœºåˆ¶ï¼Œä¼šè¯å›ºå®šé˜²æŠ¤ã€‚</li>
<li><strong>æˆæƒä¸è®¿é—®æ§åˆ¶</strong>ï¼šåŸºäº<strong>è§’è‰²/æ•°æ®æƒé™</strong>çš„ç»†ç²’åº¦æ§åˆ¶ï¼Œæ¥å£çº§ <strong>ACL</strong>ï¼Œå…³é”®æ“ä½œ<strong>äºŒæ¬¡ç¡®è®¤</strong>ä¸<strong>å®¡æ‰¹</strong>ã€‚</li>
<li><strong>CORS/CSRF</strong>ï¼š<strong>ç²¾ç¡®ç™½åå•</strong>åŒ¹é… <strong>Origin</strong>ï¼Œé¿å… <strong>Access-Control-Allow-Origin:</strong> * ä¸å‡­æ®æ··ç”¨ï¼›çŠ¶æ€æ”¹å˜æ¥å£ä½¿ç”¨ <strong>CSRF Token/SameSite</strong>ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†ä¸æ—¥å¿—</strong>ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼Œç”Ÿäº§<strong>ä¸æš´éœ²å †æ ˆ/SQL</strong>ï¼Œæ•æ„Ÿæ—¥å¿—<strong>è„±æ•</strong>ï¼›å¼€å¯<strong>å®¡è®¡æ—¥å¿—</strong>ä¸<strong>è®¿é—®æ—¥å¿—</strong>ã€‚</li>
<li><strong>Actuator/DevTools</strong>ï¼šç”Ÿäº§<strong>å…³é—­æˆ–ä¸¥æ ¼é‰´æƒ</strong>â€‹ Actuatorï¼Œé™åˆ¶ç«¯ç‚¹ï¼›ç¦ç”¨ä¸å¿…è¦çš„ <strong>DevTools</strong>â€‹ è¿œç¨‹è°ƒè¯•ã€‚</li>
<li><strong>å®‰å…¨é…ç½®åŸºçº¿</strong>ï¼šå¼€å¯ <strong>HTTP å®‰å…¨å¤´</strong>ï¼ˆå¦‚ <strong>CSPã€X-Frame-Optionsã€X-XSS-Protectionã€Strict-Transport-Security</strong>ï¼‰ï¼Œé…ç½® <strong>TLS</strong>ï¼Œæœ€å°æƒé™è¿è¡Œï¼ˆé rootï¼‰ã€‚</li>
<li><strong>æ¸—é€æµ‹è¯•ä¸ä»£ç å®¡è®¡</strong>ï¼šå¯¹<strong>SQLi/XSS/æ–‡ä»¶ä¸Šä¼ /CSRF/è¶Šæƒ/ååºåˆ—åŒ–</strong>ä¸“é¡¹æµ‹è¯•ï¼Œé‡ç‚¹è¦†ç›–<strong>æŠ¥è¡¨/å¯¼å…¥å¯¼å‡º/å®šæ—¶ä»»åŠ¡/æ¨¡æ¿å¼•æ“/ä¸Šä¼ </strong>ç­‰é«˜å±æ¨¡å—ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠä¸‹å‡ æ¬¡çº¿ä¸Šåˆ é™¤MySQLå¯¼è‡´çš„æ•…éšœ]]></title>    <link>https://juejin.cn/post/7588104741611569162</link>    <guid>https://juejin.cn/post/7588104741611569162</guid>    <pubDate>2025-12-28T09:46:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588104741611569162" data-draft-id="7588109656041898030" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠä¸‹å‡ æ¬¡çº¿ä¸Šåˆ é™¤MySQLå¯¼è‡´çš„æ•…éšœ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-12-28T09:46:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DBè™šç©ºè¡Œè€…"/> <meta itemprop="url" content="https://juejin.cn/user/239028029625050"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠä¸‹å‡ æ¬¡çº¿ä¸Šåˆ é™¤MySQLå¯¼è‡´çš„æ•…éšœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/239028029625050/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DBè™šç©ºè¡Œè€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:46:27.000Z" title="Sun Dec 28 2025 09:46:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æ•°æ®åº“æ“ä½œä¸­ï¼Œã€Œåˆ é™¤å¤§è¡¨æ•°æ®ã€å ªç§°é«˜å±æ“ä½œ TOP3â€”â€” çœ‹ä¼¼ç®€å•çš„DROP TABLEæˆ–DELETEè¯­å¥ï¼Œç¨æœ‰ä¸æ…å°±å¯èƒ½å¼•å‘ç£ç›˜ IO æ‰“æ»¡ã€ä¸»ä»å»¶è¿Ÿé›ªå´©ã€ä¸šåŠ¡æ¥å£è¶…æ—¶ç­‰ç”Ÿäº§äº‹æ•…ã€‚ç¬”è€…ä»äº‹æ•°æ®åº“è¿ç»´å¤šå¹´ï¼Œäº²å†è¿‡å¤šæ¬¡è¡€çš„æ•™è®­ï¼Œä»Šå¤©å°±é€šè¿‡ä¸¤ä¸ªçœŸå®æ¡ˆä¾‹ï¼Œæ‹†è§£äº‹æ•…èƒŒåçš„åº•å±‚é€»è¾‘ï¼Œå†ç»™å‡ºå¯ç›´æ¥è½åœ°çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œæ¯ä¸ªç ”å‘å’Œ DBA éƒ½å€¼å¾—æ”¶è—ã€‚æ•°æ®æ¢å¤ğŸ§ 1786283847</p>
<h3 data-id="heading-1">äº‹æ•…ç°åœºï¼šçœ‹ä¼¼å¸¸è§„æ“ä½œï¼Œå®åˆ™è¸©å¤§å‘</h3>
<h4 data-id="heading-2">äº‹æ•…ä¸€ï¼šDROP TABLE å¼•çˆ†ç£ç›˜ IO</h4>
<p>ç¬”è€…æ›¾åœ¨æŸæ—¥å‡ PV åƒä¸‡çº§çš„é—¨æˆ·ç½‘ç«™è´Ÿè´£æ•°æ®åº“è¿ç»´ï¼Œä¸šåŠ¡å›¢é˜Ÿä¸ºæ¸…ç†å†å²æ—¥å¿—æ•°æ®ï¼Œé‡‡ç”¨ã€Œæ—¶é—´åˆ†ç‰‡è¡¨ã€è®¾è®¡ï¼ˆæŒ‰æœˆä»½åˆ†è¡¨ï¼Œå¦‚log_202301ã€log_202302ï¼‰ï¼Œæ¸…ç†æ–¹å¼ç®€å•ç²—æš´ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> log_202301; <span class="hljs-comment">-- æ¯æœˆæ‰§è¡Œä¸€æ¬¡</span>
</code></pre>
<p>å‰ 11 ä¸ªæœˆæ‰§è¡Œå‡æ— å¼‚å¸¸ï¼Œä½†å½“åˆ é™¤ 2023 å¹´ 12 æœˆè¡¨æ—¶ï¼ˆæ•°æ®é‡å·²ä»åˆæœŸ 50GB å¢é•¿è‡³ 580GBï¼‰ï¼Œç›‘æ§å‘Šè­¦ç¬é—´ç‚¸é”…ï¼š</p>
<ul>
<li>ç‰©ç†æœºç£ç›˜ IO ä½¿ç”¨ç‡é£™å‡è‡³ 100%ï¼ˆæŒç»­ 22 åˆ†é’Ÿï¼‰</li>
<li>åŒç‰©ç†æœºä¸Šçš„ 3 ä¸ªæ ¸å¿ƒä¸šåŠ¡æ•°æ®åº“å®ä¾‹è¯»å†™é˜»å¡</li>
</ul>
<p>äº‹åå¤ç›˜ï¼šéšç€ä¸šåŠ¡å¢é•¿ï¼Œå•å¼ åˆ†ç‰‡è¡¨æ•°æ®é‡çªç ´ä¸´ç•Œå€¼ï¼Œå¸¸è§„ DROP æ“ä½œçš„ IO æ¶ˆè€—å‘ˆæŒ‡æ•°çº§ä¸Šå‡ï¼Œè§¦å‘äº†èµ„æºäº‰æŠ¢ç¾éš¾ã€‚</p>
<h4 data-id="heading-3">äº‹æ•…äºŒï¼šæ‰¹é‡ DELETE å¯¼è‡´ä¸»ä»å»¶è¿Ÿï¼Œç”µå•†è®¢å•æŸ¥è¯¢ "æ—¶æœ‰æ—¶æ— "</h4>
<p>åœ¨æŸäº‘è®¡ç®—å…¬å¸è´Ÿè´£ RDS è¿ç»´æ—¶ï¼Œçªç„¶æ”¶åˆ°æŸç”µå•†å®¢æˆ·çš„ä¸»ä»å»¶è¿Ÿå‘Šè­¦ï¼ˆå»¶è¿Ÿè¾¾ 37 åˆ†é’Ÿï¼‰ï¼Œéšåå®¢æˆ·å·¥å•æ¶Œå…¥ï¼šç”¨æˆ·ä¸‹å•åï¼Œè®¢å•åˆ—è¡¨æ—¶è€Œæ˜¾ç¤ºæ–°è®¢å•ï¼Œæ—¶è€Œä¸æ˜¾ç¤ºã€‚</p>
<p>DBA ç´§æ€¥æ’æŸ¥å‘ç°ï¼Œå®¢æˆ·æ‰§è¡Œäº†ä¸€æ¡æ‰¹é‡åˆ é™¤ SQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> xxx <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&lt;</span> <span class="hljs-number">100000</span>; <span class="hljs-comment">-- æ¶‰åŠ1200ä¸‡æ¡è®°å½•</span>
</code></pre>
<p>ç”±äºå®¢æˆ·é‡‡ç”¨ã€Œè¯»å†™åˆ†ç¦»ã€æ¶æ„ï¼ˆä¸»åº“å†™ã€ä»åº“è¯»ï¼‰ï¼Œä¸»ä»å»¶è¿ŸæœŸé—´ï¼š</p>
<ul>
<li>æ–°ä¸‹å•æ•°æ®å†™å…¥ä¸»åº“åï¼Œä»åº“æœªåŒæ­¥å®Œæˆ</li>
<li>ç”¨æˆ·æŸ¥è¯¢ä»åº“æ—¶ï¼Œå‡ºç° "åˆšä¸‹å•çœ‹ä¸åˆ°è®¢å•" çš„è¯¡å¼‚ç°è±¡</li>
</ul>
<p>æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼šä¸´æ—¶å…³åœ IO æ€§èƒ½è¾ƒå·®çš„ 2 å°ä»åº“ï¼Œä»…ä¿ç•™ 1 å°é«˜æ€§èƒ½ä»åº“è¿½èµ¶ binlogï¼Œ3 å°æ—¶åä¸»ä»åŒæ­¥æ¢å¤æ­£å¸¸ã€‚</p>
<h3 data-id="heading-4">æ ¹å› æ‹†è§£ï¼šMySQL åº•å±‚æ‰§è¡Œé€»è¾‘æ›å…‰</h3>
<p>å¾ˆå¤šäººçŸ¥é“ "ä¸èƒ½ç›´æ¥åˆ å¤§è¡¨"ï¼Œä½†å¾ˆå°‘æœ‰äººè¯´æ¸…ä¸ºä»€ä¹ˆã€‚ä¸‹é¢ä»åº•å±‚åŸç†æ‹†è§£ä¸¤èµ·äº‹æ•…çš„æ ¸å¿ƒåŸå› ï¼š</p>
<h4 data-id="heading-5">ä¸€ã€æ‰¹é‡ DELETEï¼šä»åº“å»¶è¿Ÿçš„ "ç½ªé­ç¥¸é¦–"</h4>
<p>å½“æ‰§è¡ŒDELETE FROM xxx WHERE id &lt; 100000æ—¶ï¼ŒMySQL çš„æ‰§è¡Œæµç¨‹è¿œæ¯”æƒ³è±¡ä¸­å¤æ‚ï¼š</p>
<ol>
<li><strong>ç´¢å¼•å®šä½é˜¶æ®µ</strong>ï¼šé€šè¿‡ B + æ ‘ç´¢å¼•æŸ¥æ‰¾åŒ¹é…è®°å½•ï¼Œå¤§è¡¨ç´¢å¼•é€šå¸¸ä¸º 3 å±‚ç»“æ„ï¼ˆæ ¹èŠ‚ç‚¹â†’ä¸­é—´èŠ‚ç‚¹â†’å¶å­èŠ‚ç‚¹ï¼‰ï¼Œéœ€æ‰«æ 1 ä¸ªæ ¹èŠ‚ç‚¹é¡µ + 1 ä¸ªä¸­é—´èŠ‚ç‚¹é¡µ + N ä¸ªå¶å­èŠ‚ç‚¹é¡µ</li>
<li><strong>æ•°æ®åŠ è½½é˜¶æ®µ</strong>ï¼šå°†æ‰€æœ‰åŒ¹é…çš„æ•°æ®é¡µï¼ˆå¯èƒ½è¾¾æ•°åƒä¸ªï¼‰åŠ è½½åˆ° InnoDB ç¼“å†²æ± </li>
<li><strong>æ ‡è®°åˆ é™¤é˜¶æ®µ</strong>ï¼šInnoDB å¹¶ä¸ä¼šç›´æ¥ç‰©ç†åˆ é™¤æ•°æ®ï¼Œè€Œæ˜¯å°†è®°å½•æ ‡è®°ä¸º "åˆ é™¤çŠ¶æ€"ï¼ˆMVCC æœºåˆ¶ï¼‰ï¼ŒçœŸæ­£çš„ç‰©ç†åˆ é™¤ç”±åå° purge çº¿ç¨‹å¼‚æ­¥å®Œæˆ</li>
<li><strong>æ—¥å¿—åˆ·ç›˜é˜¶æ®µ</strong>ï¼šå†™å…¥ redo logï¼ˆä¿è¯äº‹åŠ¡æŒä¹…æ€§ï¼‰ã€undo logï¼ˆç”¨äºäº‹åŠ¡å›æ»šï¼‰ã€binlogï¼ˆç”¨äºä¸»ä»åŒæ­¥ï¼‰ï¼Œæœ€ç»ˆæ‰§è¡Œ fsync åˆ·ç›˜æ“ä½œ</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8cd2e35e57a497ca17b3b782a291b06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRELomZrnqbrooYzogIU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767519987&amp;x-signature=lcvT3c5DfbJcda%2FjxoOGKGamXz4%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»ä»åŒæ­¥çš„ "æ”¾å¤§æ•ˆåº”"</strong> ï¼š</p>
<ul>
<li>ä¸»åº“æ‰§è¡Œ 1 æ¡ DELETE è¯­å¥ï¼Œç”Ÿæˆçš„ binlog åœ¨ ROW æ ¼å¼ä¸‹ï¼ˆé»˜è®¤æ¨èæ ¼å¼ï¼‰ï¼Œä¼šæ‹†åˆ†ä¸º 1000000 æ¡å•æ¡åˆ é™¤è®°å½•ï¼ˆDELETE FROM xxx WHERE id=1; DELETE FROM xxx WHERE id=2; ...ï¼‰</li>
<li>ä»åº“ SQL çº¿ç¨‹éœ€é€æ¡æ‰§è¡Œè¿™ 1000000 æ¡ SQLï¼Œæ¯æ¡éƒ½è¦ç»å† "è¯­æ³•è§£æâ†’ç´¢å¼•æŸ¥æ‰¾â†’æ ‡è®°åˆ é™¤â†’æ—¥å¿—å†™å…¥" æµç¨‹</li>
<li>å•æ¡ SQL æ‰§è¡Œæˆæœ¬ï¼šè‡³å°‘ 2 æ¬¡ç£ç›˜ IOï¼ˆç´¢å¼•æŸ¥æ‰¾ + æ—¥å¿—åˆ·ç›˜ï¼‰+ è¯­æ³•è§£æå¼€é”€ï¼Œ1000000 æ¡ç´¯è®¡çš„ IO å‹åŠ›ï¼Œç›´æ¥å¯¼è‡´ä»åº“åŒæ­¥ç˜«ç—ª</li>
</ul>
<h4 data-id="heading-6">äºŒã€DROP TABLEï¼šç£ç›˜ IO çˆ†ç‚¸çš„åº•å±‚é€»è¾‘</h4>
<p>DROP TABLEçœ‹ä¼¼ç®€å•ï¼Œå®åˆ™åŒ…å«ä¸¤ä¸ªé«˜ IO æ¶ˆè€—æ­¥éª¤ï¼š</p>
<ol>
<li><strong>ç¼“å†²æ± æ¸…ç†</strong>ï¼šInnoDB éœ€éå†æ‰€æœ‰ buffer pool å®ä¾‹ï¼Œåˆ é™¤è¯¥è¡¨å¯¹åº”çš„ç¼“å­˜é¡µï¼ˆåŒ…æ‹¬æ•°æ®é¡µã€ç´¢å¼•é¡µï¼‰ï¼Œæ­¤è¿‡ç¨‹ä¼šæŒæœ‰ buffer pool å…¨å±€é”ï¼Œè‹¥ buffer pool è¾ƒå¤§ï¼ˆå¦‚ 32GBï¼‰ï¼Œéå†æ—¶é—´é•¿è¾¾åˆ†é’Ÿçº§</li>
<li><strong>ç‰©ç†æ–‡ä»¶åˆ é™¤</strong>ï¼šåˆ é™¤è¡¨å¯¹åº”çš„.ibd æ–‡ä»¶ï¼ˆå­˜å‚¨æ•°æ®å’Œç´¢å¼•ï¼‰ï¼Œå¤§æ–‡ä»¶ï¼ˆå¦‚ 500GBï¼‰åˆ é™¤æ—¶ï¼Œæ“ä½œç³»ç»Ÿéœ€é€ä¸ªé‡Šæ”¾æ•°æ®å—çš„ inode å¼•ç”¨ï¼Œæœºæ¢°ç¡¬ç›˜ä¸‹æ­¤æ“ä½œçš„ IO æ¶ˆè€—æå¤§ï¼Œç›´æ¥æ‰“æ»¡ç£ç›˜ IO</li>
</ol>
<p>å…³é”®ç»“è®ºï¼š<strong>å¤§è¡¨åˆ é™¤çš„æ ¸å¿ƒé—®é¢˜ï¼Œæ˜¯çŸ­æ—¶é—´å†…äº§ç”Ÿçš„å·¨é‡ IO å¼€é”€ï¼Œå¼•å‘èµ„æºäº‰æŠ¢æˆ–åŒæ­¥æ”¾å¤§æ•ˆåº”</strong>ã€‚</p>
<h3 data-id="heading-7">è§£å†³æ–¹æ¡ˆï¼šæå‡ä»åº“æ•ˆç‡ï¼Œé¿å…å»¶è¿Ÿçš„ 6 ä¸ªå®æˆ˜æ–¹æ¡ˆ</h3>
<p>é’ˆå¯¹æ‰¹é‡åˆ é™¤å¯¼è‡´çš„ä¸»ä»å»¶è¿Ÿé—®é¢˜ï¼Œç»“åˆç”Ÿäº§ç¯å¢ƒå®è·µï¼Œç»™å‡º 6 ä¸ªå¯ç›´æ¥è½åœ°çš„ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<h4 data-id="heading-8">æ–¹æ¡ˆ 1ï¼šåˆ†æ‰¹åˆ é™¤ï¼ˆæœ€å¸¸ç”¨ï¼Œé›¶æˆæœ¬è½åœ°ï¼‰</h4>
<p>å°†å¤§äº‹åŠ¡æ‹†åˆ†ä¸ºå°äº‹åŠ¡ï¼Œé€šè¿‡LIMITæ§åˆ¶å•æ¬¡åˆ é™¤æ•°é‡ï¼Œé…åˆsleepé™ä½ IO å‹åŠ›ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">-- å¾ªç¯åˆ é™¤è„šæœ¬ï¼ˆå¯é€šè¿‡Shell/Javaå®šæ—¶ä»»åŠ¡æ‰§è¡Œï¼‰
<span class="hljs-keyword">WHILE</span> EXISTS (<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> order_history <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-number">23</span>-<span class="hljs-number">01</span>-<span class="hljs-number">01</span><span class="hljs-comment">') DO</span>
    DELETE <span class="hljs-keyword">FROM</span> order_history <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-number">3</span>-<span class="hljs-number">01</span>-<span class="hljs-number">01</span><span class="hljs-comment">' LIMIT 1000; -- æ¯æ¬¡åˆ 1000æ¡</span>
    <span class="hljs-keyword">SELECT</span> SLEEP(<span class="hljs-number">1</span>); -- æš‚åœ<span class="hljs-number">1</span>ç§’ï¼Œç»™IOå–˜æ¯æ—¶é—´
<span class="hljs-keyword">END</span> <span class="hljs-keyword">WHILE</span>;
</code></pre>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>é¿å…å¤§äº‹åŠ¡äº§ç”Ÿæµ·é‡ binlog</li>
<li>åˆ†æ•£ IO å‹åŠ›ï¼Œä¸å½±å“ä¸»ä»åŒæ­¥</li>
<li>æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼ˆè®°å½•ä¸Šæ¬¡åˆ é™¤çš„ä½ç½®ï¼‰</li>
</ul>
<h4 data-id="heading-9">æ–¹æ¡ˆ 2ï¼šå¼€å¯ä»åº“å¹¶è¡Œå¤åˆ¶ï¼ˆMySQL 5.7+ï¼‰</h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä»åº“ä»…ç”¨ 1 ä¸ª SQL çº¿ç¨‹å›æ”¾ binlogï¼Œå¼€å¯å¹¶è¡Œå¤åˆ¶åå¯å¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼Œå¤§å¹…æå‡åŒæ­¥æ•ˆç‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- ä»åº“é…ç½®ï¼ˆä¸´æ—¶ç”Ÿæ•ˆï¼Œé‡å¯å¤±æ•ˆï¼‰
SET GLOBAL <span class="hljs-attr">slave_parallel_workers</span> = <span class="hljs-number">8</span><span class="hljs-comment">; -- å¹¶è¡Œçº¿ç¨‹æ•°ï¼ˆå»ºè®®=CPUæ ¸å¿ƒæ•°ï¼‰</span>
SET GLOBAL <span class="hljs-attr">slave_parallel_type</span> = <span class="hljs-string">'LOGICAL_CLOCK'</span><span class="hljs-comment">; -- åŸºäºé€»è¾‘æ—¶é’Ÿçš„å¹¶è¡Œç­–ç•¥</span>
SET GLOBAL <span class="hljs-attr">slave_preserve_commit_order</span> = <span class="hljs-literal">ON</span><span class="hljs-comment">; -- ä¿æŒäº‹åŠ¡æäº¤é¡ºåº</span>
</code></pre>
<p><strong>æ°¸ä¹…ç”Ÿæ•ˆ</strong>ï¼šåœ¨ my.cnf ä¸­æ·»åŠ é…ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[mysqld]</span>
<span class="hljs-attr">slave_parallel_workers</span> = <span class="hljs-number">8</span>
<span class="hljs-attr">slave_parallel_type</span> = LOGICAL_CLOCK
<span class="hljs-attr">slave_preserve_commit_order</span> = <span class="hljs-number">1</span>
<span class="hljs-attr">relay_log_recovery</span> = <span class="hljs-number">1</span> -- å´©æºƒåè‡ªåŠ¨é‡å»ºä¸­ç»§æ—¥å¿—
</code></pre>
<h4 data-id="heading-10">æ–¹æ¡ˆ 3ï¼šä¼˜åŒ– binlog é…ç½®ï¼ˆå‡å°‘æ—¥å¿—ä½“ç§¯ï¼‰</h4>
<p>é€šè¿‡è°ƒæ•´ binlog æ ¼å¼å’Œå‚æ•°ï¼Œé™ä½ä»åº“æ‰§è¡Œå‹åŠ›ï¼š</p>
<ol>
<li><strong>binlog_row_image=minimal</strong>ï¼šä»…è®°å½•å˜æ›´å¿…è¦å­—æ®µï¼Œå‡å°‘ binlog ä½“ç§¯ 30%-50%</li>
</ol>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[mysqld]</span>
<span class="hljs-attr">binlog_format</span> = ROW -- ä¿è¯ä¸»ä»ä¸€è‡´æ€§
<span class="hljs-attr">binlog_row_image</span> = minimal -- ç²¾ç®€æ—¥å¿—å†…å®¹
</code></pre>
<ol>
<li><strong>å¼€å¯ binlog å‹ç¼©ï¼ˆMySQL 8.0.20+ï¼‰</strong> ï¼šå¤§äº‹åŠ¡æ—¥å¿—é‡å¯å‡å°‘ 60% ä»¥ä¸Š</li>
</ol>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[mysqld]</span>
<span class="hljs-attr">binlog_transaction_compression</span> = <span class="hljs-literal">ON</span>
<span class="hljs-attr">binlog_transaction_compression_level_zstd</span> = <span class="hljs-number">6</span> -- å‹ç¼©çº§åˆ«ï¼ˆ<span class="hljs-number">1</span>-<span class="hljs-number">22</span>ï¼‰
</code></pre>
<h4 data-id="heading-11">æ–¹æ¡ˆ 4ï¼šä½¿ç”¨ä¸“ä¸šå·¥å…· pt-archiverï¼ˆåƒä¸‡çº§æ•°æ®é¦–é€‰ï¼‰</h4>
<p>Percona æä¾›çš„pt-archiverå·¥å…·ï¼Œä¸“ä¸ºå¤§è¡¨æ•°æ®å½’æ¡£ / åˆ é™¤è®¾è®¡ï¼Œæ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li>è‡ªåŠ¨åˆ†æ‰¹å¤„ç†ï¼Œé¿å…å¤§äº‹åŠ¡</li>
<li>æ”¯æŒ "å½’æ¡£ + åˆ é™¤" ä¸€ä½“ï¼ˆå¯å°†æ•°æ®å¯¼å‡ºåˆ°æ–‡ä»¶ååˆ é™¤ï¼‰</li>
<li>è‡ªå¸¦é™é€Ÿã€æ—¥å¿—è®°å½•åŠŸèƒ½</li>
</ul>
<p>ç¤ºä¾‹å‘½ä»¤ï¼ˆåˆ é™¤ 1 å¹´å‰æ•°æ®å¹¶å½’æ¡£ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">pt-archiver <span class="hljs-attr">--source</span> h=ä¸»åº“IP,D=æ•°æ®åº“å,t=è¡¨å,u=ç”¨æˆ·å,<span class="hljs-selector-tag">p</span>=å¯†ç  \
<span class="hljs-attr">--where</span> "create_time -<span class="hljs-number">01</span>-<span class="hljs-number">01</span>'" \
<span class="hljs-attr">--dest</span> h=å½’æ¡£åº“IP,D=archive_db,t=table_archive \
<span class="hljs-attr">--limit</span> <span class="hljs-number">1000</span> <span class="hljs-attr">--commit-each</span> <span class="hljs-attr">--sleep</span> <span class="hljs-number">0.5</span> \
<span class="hljs-attr">--statistics</span> <span class="hljs-attr">--progress</span> <span class="hljs-number">10000</span>
</code></pre>
<h4 data-id="heading-12">æ–¹æ¡ˆ 5ï¼šåˆ†åŒºè¡¨ä¼˜åŒ–ï¼ˆäº‹å‰é¢„é˜²æœ€ä½³æ–¹æ¡ˆï¼‰</h4>
<p>è‹¥ä¸šåŠ¡æ˜ç¡®éœ€è¦å®šæœŸæ¸…ç†å†å²æ•°æ®ï¼Œå»ºè®®æå‰è®¾è®¡ã€Œåˆ†åŒºè¡¨ã€ï¼Œåˆ é™¤æ•°æ®æ—¶ç›´æ¥ DROP åˆ†åŒºï¼ŒIO æ¶ˆè€—è¶‹è¿‘äº 0ï¼š</p>
<ol>
<li><strong>åˆ›å»ºåˆ†åŒºè¡¨</strong>ï¼ˆæŒ‰æ—¶é—´åˆ†åŒºï¼‰ï¼š</li>
</ol>

<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_history (
  id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
  order_no <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>),
  create_time DATETIME
)
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> (TO_DAYS(create_time)) (
  <span class="hljs-keyword">PARTITION</span> p202301 <span class="hljs-keyword">VALUES</span> LESS THAN (TO_DAYS(<span class="hljs-string">'2023-02-01'</span>)),
  <span class="hljs-keyword">PARTITION</span> p202302 <span class="hljs-keyword">VALUES</span> LESS THAN (TO_DAYS(<span class="hljs-string">'2023-03-01'</span>)),
  <span class="hljs-comment">-- ä¾æ¬¡åˆ›å»ºåç»­åˆ†åŒº</span>
);
</code></pre>
<ol>
<li><strong>åˆ é™¤å†å²æ•°æ®</strong>ï¼ˆç§’çº§å®Œæˆï¼‰ï¼š</li>
</ol>

<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> order_history <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PARTITION</span> p202301; <span class="hljs-comment">-- æ— IOå‹åŠ›</span>
</code></pre>
<h4 data-id="heading-13">æ–¹æ¡ˆ 6ï¼šé‡å‘½å + Truncate+IO é™é€Ÿåˆ é™¤ï¼ˆè¶…å¤§è¡¨åº”æ€¥æ–¹æ¡ˆï¼‰</h4>
<p>é’ˆå¯¹æ•°ç™¾ GB çº§è¶…å¤§è¡¨ï¼Œéœ€å¿«é€Ÿé‡Šæ”¾è¡¨åä¸”é¿å… IO å†²å‡»æ—¶ï¼Œé‡‡ç”¨ã€Œé‡å‘½åéš”ç¦» + Truncate æ¸…æ•°æ® + è„šæœ¬é™é€Ÿåˆ æ–‡ä»¶ã€çš„ç»„åˆæ–¹æ¡ˆï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯å°†è¡¨å…ƒæ•°æ®æ“ä½œä¸ç‰©ç†æ–‡ä»¶åˆ é™¤è§£è€¦ï¼š</p>
<h5 data-id="heading-14">æ“ä½œæ­¥éª¤ï¼ˆä»¥ 500GB çš„log_202312è¡¨ä¸ºä¾‹ï¼‰</h5>
<ol>
<li><strong>é‡å‘½åéš”ç¦»å¤§è¡¨</strong>ï¼ˆå…ƒæ•°æ®æ“ä½œï¼Œé”è¡¨æ¯«ç§’çº§ï¼‰ï¼š</li>
</ol>

<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- é‡å‘½åç›®æ ‡è¡¨ä¸ºä¸´æ—¶è¡¨ï¼Œå¿«é€Ÿé‡Šæ”¾åŸè¡¨å</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> log_202312 RENAME <span class="hljs-keyword">TO</span> log_202312_temp;
<span class="hljs-comment">-- ç«‹å³åˆ›å»ºæ–°è¡¨æ‰¿æ¥ä¸šåŠ¡å†™å…¥ï¼ˆç»“æ„ä¸åŸè¡¨ä¸€è‡´ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> log_202312 <span class="hljs-keyword">LIKE</span> log_202312_temp;
</code></pre>
<p>ğŸ‘‰ å…³é”®ï¼šRENAME TABLEå±äº Online DDL çš„ INPLACE æ“ä½œï¼Œæ— éœ€é‡å»ºè¡¨ï¼Œä»…ä¿®æ”¹æ•°æ®å­—å…¸ï¼Œå¯¹ä¸šåŠ¡æ— æ„ŸçŸ¥ã€‚</p>
<ol>
<li><strong>Truncate ä¸´æ—¶è¡¨ï¼ˆå¯é€‰ï¼Œå¿«é€Ÿé‡Šæ”¾è¡¨ç©ºé—´ï¼‰</strong> ï¼š</li>
</ol>

<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è‹¥éœ€ä¿ç•™ä¸´æ—¶è¡¨ç»“æ„ï¼ˆå¦‚åç»­å½’æ¡£ï¼‰ï¼Œæ‰§è¡ŒTruncateæ¸…æ•°æ®</span>
<span class="hljs-keyword">TRUNCATE</span> <span class="hljs-keyword">TABLE</span> log_202312_temp;
</code></pre>
<p>ğŸ‘‰ æ³¨æ„ï¼šTruncate ä¼šé‡å»ºè¡¨ç©ºé—´ï¼Œç”Ÿæˆæ–°çš„.ibd æ–‡ä»¶ï¼Œæ—§æ–‡ä»¶éœ€å•ç‹¬åˆ é™¤ï¼›è‹¥æ— éœ€ä¿ç•™ç»“æ„ï¼Œå¯è·³è¿‡æ­¤æ­¥ç›´æ¥å¤„ç†æ–‡ä»¶ã€‚</p>
<ol>
<li><strong>DISCARD è¡¨ç©ºé—´ï¼ˆé‡Šæ”¾æ–‡ä»¶å¥æŸ„ï¼‰</strong> ï¼š</li>
</ol>

<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è§£é™¤MySQLä¸ä¸´æ—¶è¡¨æ–‡ä»¶çš„å…³è”ï¼Œé¿å…ç›´æ¥åˆ æ–‡ä»¶å¯¼è‡´è¡¨æŸå</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> log_202312_temp DISCARD TABLESPACE;
</code></pre>
<p>ğŸ‘‰ åŸç†ï¼šInnoDB å•è¡¨ç©ºé—´æ–‡ä»¶ï¼ˆ.ibdï¼‰éœ€é€šè¿‡DISCARD TABLESPACEé‡Šæ”¾å¥æŸ„åï¼Œæ‰èƒ½å®‰å…¨åˆ é™¤æ–‡ä»¶ã€‚</p>
<ol>
<li><strong>IO é™é€Ÿåˆ é™¤ç‰©ç†æ–‡ä»¶ï¼ˆæ ¸å¿ƒæ­¥éª¤ï¼‰</strong> ï¼š</li>
</ol>
<p>ç¼–å†™ Shell è„šæœ¬ï¼Œé€šè¿‡ioniceé™åˆ¶ IO ä¼˜å…ˆçº§ + åˆ†å—åˆ é™¤ï¼Œé¿å…æ‰“æ»¡ç£ç›˜ IOï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># é™é€Ÿåˆ é™¤å¤§è¡¨æ–‡ä»¶è„šæœ¬ï¼ˆé€‚ç”¨äºLinuxç¯å¢ƒï¼‰</span>
DB_DIR=<span class="hljs-string">"/var/lib/mysql/your_database"</span>  <span class="hljs-comment"># æ•°æ®åº“æ•°æ®ç›®å½•</span>
TEMP_TABLE=<span class="hljs-string">"log_202312_temp"</span>
FILE=<span class="hljs-string">"<span class="hljs-variable">${DB_DIR}</span>/<span class="hljs-variable">${TEMP_TABLE}</span>.ibd"</span>
CHUNK_SIZE=<span class="hljs-string">"50M"</span>  <span class="hljs-comment"># æ¯æ¬¡åˆ é™¤50MBï¼ˆå¯æ ¹æ®IOè´Ÿè½½è°ƒæ•´ï¼‰</span>
SLEEP_SEC=<span class="hljs-string">"3"</span>     <span class="hljs-comment"># æ¯åˆ é™¤ä¸€å—ä¼‘çœ 3ç§’</span>
IO_PRIORITY=<span class="hljs-string">"7"</span>   <span class="hljs-comment"># IOä¼˜å…ˆçº§ï¼ˆ0æœ€é«˜ï¼Œ7æœ€ä½ï¼‰</span>
<span class="hljs-comment"># éªŒè¯æ–‡ä»¶å­˜åœ¨</span>
<span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">"<span class="hljs-variable">$FILE</span>"</span> ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼š<span class="hljs-variable">$FILE</span>"</span>
  <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
<span class="hljs-comment"># è®¾ç½®IOä¼˜å…ˆçº§å¹¶åˆ†å—åˆ é™¤</span>
ionice -c 2 -n <span class="hljs-variable">$IO_PRIORITY</span> bash -c <span class="hljs-string">"
  while [ -f "</span><span class="hljs-variable">$FILE</span><span class="hljs-string">" ]; do
    # åˆ†å—æ¸…ç©ºæ–‡ä»¶å†…å®¹ï¼ˆé¿å…ç›´æ¥rmå¼•å‘é«˜IOï¼‰
    dd if=/dev/null of="</span><span class="hljs-variable">$FILE</span><span class="hljs-string">" bs=<span class="hljs-variable">$CHUNK_SIZE</span> count=1 seek=0 &amp;&amp; sync
    # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²æ¸…ç©ºï¼Œæœªæ¸…ç©ºåˆ™ç»§ç»­
    if [ $? -ne 0 ] || [ <span class="hljs-subst">$(du -b <span class="hljs-string">"<span class="hljs-variable">$FILE</span>"</span> | awk '{print $1}')</span> -eq 0 ]; then
      rm -f "</span><span class="hljs-variable">$FILE</span><span class="hljs-string">"
      echo "</span>æ–‡ä»¶åˆ é™¤å®Œæˆï¼š<span class="hljs-variable">$FILE</span><span class="hljs-string">"
      break
    fi
    echo "</span>å·²åˆ é™¤<span class="hljs-variable">${CHUNK_SIZE}</span>ï¼Œä¼‘çœ <span class="hljs-variable">${SLEEP_SEC}</span>ç§’...<span class="hljs-string">"
    sleep <span class="hljs-variable">$SLEEP_SEC</span>
  done
"</span>
<span class="hljs-comment"># æ¸…ç†ä¸´æ—¶è¡¨ï¼ˆå¯é€‰ï¼Œè‹¥æ— éœ€ä¿ç•™è¡¨ç»“æ„ï¼‰</span>
mysql -uusername -ppassword -e <span class="hljs-string">"DROP TABLE your_database.<span class="hljs-variable">${TEMP_TABLE}</span>;"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¸´æ—¶è¡¨å·²åˆ é™¤"</span>
</code></pre>
<p>ğŸ‘‰ æ ¸å¿ƒä¼˜åŒ–ï¼š</p>
<ul>
<li>
<ul>
<li>ionice -c 2 -n 7ï¼šå°†åˆ é™¤æ“ä½œçš„ IO ä¼˜å…ˆçº§è®¾ä¸ºæœ€ä½ï¼Œä¸æŠ¢å æ ¸å¿ƒä¸šåŠ¡ IO èµ„æº</li>
<li>åˆ†å—åˆ é™¤ï¼šé¿å…ä¸€æ¬¡æ€§åˆ é™¤è¶…å¤§æ–‡ä»¶å¯¼è‡´çš„ inode é‡Šæ”¾é£æš´</li>
<li>åŒæ­¥ä¸»ä»ï¼šä»åº“éœ€æ‰§è¡Œç›¸åŒçš„é‡å‘½å + åˆ é™¤æµç¨‹ï¼Œç¡®ä¿ä¸»ä»ç»“æ„ä¸€è‡´</li>
</ul>
</li>
</ul>
<h5 data-id="heading-15">æ–¹æ¡ˆä¼˜åŠ¿ï¼š</h5>
<ul>
<li>ä¸šåŠ¡æ— æ„ŸçŸ¥ï¼šé‡å‘½å + æ–°å»ºè¡¨ä»…éœ€æ¯«ç§’çº§ï¼Œä¸å½±å“å†™å…¥</li>
<li>IO å¯æ§ï¼šé€šè¿‡è„šæœ¬ä¸¥æ ¼é™åˆ¶åˆ é™¤é€Ÿç‡ï¼Œé¿å…ç£ç›˜ IO æ‰“æ»¡</li>
<li>æ•ˆç‡é«˜ï¼šç›´æ¥æ“ä½œæ–‡ä»¶ç³»ç»Ÿï¼Œæ¯”åˆ†æ‰¹ DELETE å¿« 10 å€ä»¥ä¸Š</li>
<li>å®‰å…¨æ€§ï¼šé€šè¿‡DISCARD TABLESPACEé¿å…æ–‡ä»¶åˆ é™¤å¯¼è‡´çš„ MySQL å¼‚å¸¸</li>
</ul>
<h5 data-id="heading-16">æ³¨æ„äº‹é¡¹ï¼š</h5>
<ul>
<li>æ‰§è¡Œå‰éœ€ç¡®è®¤æ•°æ®åº“æ•°æ®ç›®å½•ï¼ˆDB_DIRï¼‰è·¯å¾„æ­£ç¡®</li>
<li>ç¡®ä¿æ— é•¿äº‹åŠ¡å¼•ç”¨ä¸´æ—¶è¡¨ï¼ˆå¦åˆ™DISCARD TABLESPACEä¼šå¤±è´¥ï¼‰</li>
<li>è„šæœ¬éœ€åœ¨æ•°æ®åº“æœåŠ¡å™¨æœ¬åœ°æ‰§è¡Œï¼Œä¸”å…·å¤‡æ–‡ä»¶è¯»å†™æƒé™</li>
<li>ä¸»ä»æ¶æ„ä¸‹ï¼Œéœ€åœ¨ä»åº“åŒæ­¥æ‰§è¡Œè¯¥æ–¹æ¡ˆï¼ˆé¿å…ä¸»ä»è¡¨ç»“æ„ä¸ä¸€è‡´ï¼‰</li>
</ul>
<h3 data-id="heading-17">æ€»ç»“ä¸è­¦ç¤º</h3>
<ol>
<li><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šå¤§è¡¨åˆ é™¤æ°¸è¿œéµå¾ª "åˆ†æ‰¹ã€é™é€Ÿã€äº‹å‰é¢„é˜²" ä¸‰å¤§åŸåˆ™</li>
<li><strong>ç¦å¿Œæ“ä½œ</strong>ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>ç¦æ­¢ç›´æ¥DROPè¶… 100GB çš„å¤§è¡¨ï¼ˆå¯ç”¨ç¡¬é“¾æ¥å»¶è¿Ÿåˆ é™¤æŠ€å·§ï¼Œè§æ‰©å±•é˜…è¯»ï¼‰</li>
<li>ç¦æ­¢æ— LIMITçš„æ‰¹é‡DELETEï¼ˆå•æ¬¡åˆ é™¤ä¸è¶…è¿‡ 1 ä¸‡æ¡ï¼‰</li>
</ul>
</li>
</ul>
<ol>
<li><strong>å¿…å¤‡ç›‘æ§</strong>ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>ä¸»ä»å»¶è¿Ÿç›‘æ§ï¼ˆé˜ˆå€¼å»ºè®®â‰¤30 ç§’ï¼‰</li>
<li>ç£ç›˜ IO ä½¿ç”¨ç‡ç›‘æ§ï¼ˆé˜ˆå€¼å»ºè®®â‰¤80%ï¼‰</li>
<li>å¤§äº‹åŠ¡ç›‘æ§ï¼ˆå•äº‹åŠ¡å½±å“è¡Œæ•°ï¼1 ä¸‡æ¡å‘Šè­¦ï¼‰</li>
</ul>
</li>
</ul>
<p>æ•°æ®åº“æ“ä½œæ— å°äº‹ï¼Œä¸€å¥ç®€å•çš„åˆ é™¤è¯­å¥ï¼ŒèƒŒåå¯èƒ½éšè—ç€åº•å±‚é€»è¾‘çš„ "æš—ç¤"ã€‚å¸Œæœ›é€šè¿‡è¿™ä¸¤èµ·äº‹æ•…çš„å¤ç›˜ï¼Œèƒ½è®©æ›´å¤šç ”å‘å’Œè¿ç»´åŒå­¦å»ºç«‹æ•¬ç•ä¹‹å¿ƒï¼Œé¿å…é‡è¹ˆè¦†è¾™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLæ¢å¤ä¹‹Binlogæ ¼å¼è¯¦è§£]]></title>    <link>https://juejin.cn/post/7588139768276123699</link>    <guid>https://juejin.cn/post/7588139768276123699</guid>    <pubDate>2025-12-28T09:47:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588139768276123699" data-draft-id="7588140921248792614" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLæ¢å¤ä¹‹Binlogæ ¼å¼è¯¦è§£"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2025-12-28T09:47:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DBè™šç©ºè¡Œè€…"/> <meta itemprop="url" content="https://juejin.cn/user/239028029625050"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLæ¢å¤ä¹‹Binlogæ ¼å¼è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/239028029625050/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DBè™šç©ºè¡Œè€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:47:56.000Z" title="Sun Dec 28 2025 09:47:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">MySQLæ¢å¤ä¹‹Binlogæ ¼å¼è¯¦è§£</h2>
<p>åœ¨MySQLæ•°æ®åº“è¿ç»´è¿‡ç¨‹ä¸­ï¼Œè¯¯åˆ æ•°æ®ã€æ‰¹é‡æ›´æ–°é”™è¯¯ç­‰æ“ä½œæ—¶æœ‰å‘ç”Ÿï¼Œä¸€æ—¦å‡ºç°è¿™ç±»æ•…éšœï¼Œæ•°æ®æ¢å¤å°±æˆä¸ºæ ¸å¿ƒéœ€æ±‚ã€‚è€Œ<code>binlogï¼ˆäºŒè¿›åˆ¶æ—¥å¿—ï¼‰</code>ä½œä¸ºMySQL Serverå±‚çš„æ ¸å¿ƒæ—¥å¿—ï¼Œè®°å½•äº†æ‰€æœ‰è¡¨ç»“æ„å˜æ›´å’Œæ•°æ®ä¿®æ”¹æ“ä½œï¼Œæ˜¯å®ç°æ•°æ®é—ªå›æ¢å¤çš„å…³é”®ä¾æ®ã€‚æœ¬æ–‡å°†ä»binlogé—ªå›æ¢å¤çš„åŸºç¡€é€»è¾‘å…¥æ‰‹ï¼Œè¯¦è§£æ¢å¤æ³¨æ„äº‹é¡¹ä¸å®æ“ç¤ºä¾‹ï¼Œé‡ç‚¹æ‹†è§£binlogäº‹ä»¶ç±»å‹åŠæ ¸å¿ƒäº‹ä»¶çš„æ ¼å¼è§„èŒƒã€‚æ•°æ®æ¢å¤ğŸ§ 1786283847</p>
<h3 data-id="heading-1">ä¸€ã€binlogé—ªå›ï¼šè¯¯æ“ä½œæ•°æ®æ¢å¤çš„æ ¸å¿ƒæ–¹æ¡ˆ</h3>
<p>binlogæ—¥å¿—æœ¬è´¨æ˜¯Serverå±‚çš„é€»è¾‘æ—¥å¿—ï¼Œé‡‡ç”¨è¿½åŠ å†™æ¨¡å¼ï¼Œå®Œæ•´è®°å½•äº†æ•°æ®åº“çš„å˜æ›´å†å²ï¼ˆä¸å«æŸ¥è¯¢æ“ä½œï¼‰ã€‚å½“å‘ç”Ÿè¯¯åˆ ï¼ˆDELETEï¼‰ã€æ‰¹é‡æ›´æ–°ï¼ˆUPDATEï¼‰ç­‰é”™è¯¯æ“ä½œæ—¶ï¼Œå¯é€šè¿‡<code>é—ªå›æœºåˆ¶</code>â€”â€”å³è§£æbinlogæ—¥å¿—ã€ç”Ÿæˆåå‘æ“ä½œSQLï¼ˆå¦‚DELETEâ†’INSERTã€UPDATEâ†’åå‘UPDATEï¼‰ï¼ŒæŒ‰æ—¶é—´å€’åºé‡æ”¾åå‘SQLï¼Œå°†æ•°æ®æ¢å¤è‡³è¯¯æ“ä½œå‰çš„çŠ¶æ€ã€‚</p>
<p>ä¸InnoDBçš„redo logï¼ˆå¼•æ“å±‚ç‰©ç†æ—¥å¿—ï¼Œç”¨äºå´©æºƒæ¢å¤ï¼‰ã€undo logï¼ˆå¼•æ“å±‚å›æ»šæ—¥å¿—ï¼Œç”¨äºäº‹åŠ¡å›æ»šï¼‰ä¸åŒï¼Œbinlogçš„æ ¸å¿ƒä»·å€¼åœ¨äºè·¨å¼•æ“çš„æ•°æ®å¤‡ä»½ä¸æ¢å¤ã€ä¸»ä»å¤åˆ¶ï¼Œå…¶å…¨é‡å˜æ›´è®°å½•ç‰¹æ€§ä½¿å…¶æˆä¸ºè¯¯æ“ä½œæ¢å¤çš„å”¯ä¸€å¯é é€”å¾„ã€‚</p>
<h4 data-id="heading-2">1.1 é—ªå›æ¢å¤æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>å‰ç½®æ¡ä»¶</strong>ï¼šå¿…é¡»æå‰å¼€å¯binlogï¼ˆé€šè¿‡<code>show variables like 'log_bin';</code>ç¡®è®¤ï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®<code>binlog_format = ROW</code>ï¼ˆè¡Œçº§æ ¼å¼ï¼‰ï¼Œè™½æ—¥å¿—ä½“ç§¯è¾ƒå¤§ï¼Œä½†èƒ½ç²¾å‡†è®°å½•è¡Œæ•°æ®å˜æ›´ï¼Œé¿å…STATEMENTæ ¼å¼çš„ä¸ç¡®å®šæ€§ï¼ˆå¦‚å‡½æ•°æ‰§è¡Œç»“æœä¸ä¸€è‡´ï¼‰ã€‚</li>
<li><strong>å¤‡ä»½ä¼˜å…ˆ</strong>ï¼šæ¢å¤å‰åŠ¡å¿…å¤‡ä»½å½“å‰æ•°æ®ï¼ˆå¦‚mysqldumpå…¨é‡å¤‡ä»½ï¼‰ï¼Œé¿å…åå‘SQLæ‰§è¡Œå¤±è¯¯å¯¼è‡´äºŒæ¬¡æŸåã€‚</li>
<li><strong>æµ‹è¯•å…ˆè¡Œ</strong>ï¼šæ‰€æœ‰æ¢å¤æ“ä½œå¿…é¡»å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯åå‘SQLçš„æ­£ç¡®æ€§ï¼Œç¡®è®¤æ•°æ®ä¸€è‡´åå†åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒã€‚</li>
<li><strong>ç²¾ç¡®èŒƒå›´</strong>ï¼šé€šè¿‡<code>--start-datetime/--stop-datetime</code>ï¼ˆæ—¶é—´èŒƒå›´ï¼‰æˆ–<code>--start-position/--stop-position</code>ï¼ˆæ—¥å¿—ä½ç½®ï¼‰ç²¾å‡†å®šä½è¯¯æ“ä½œåŒºé—´ï¼Œé¿å…å½±å“æ­£å¸¸æ•°æ®ã€‚</li>
<li><strong>å±€é™æ€§</strong>ï¼šä¸æ”¯æŒDDLæ“ä½œï¼ˆå¦‚DROP TABLEï¼‰é—ªå›ï¼Œéœ€é€šè¿‡å…¨é‡å¤‡ä»½æ¢å¤ï¼›å¤§äº‹åŠ¡é—ªå›å¯èƒ½å½±å“æ•°æ®åº“æ€§èƒ½ï¼Œé«˜å¹¶å‘åœºæ™¯éœ€æ³¨æ„é”å†²çªã€‚</li>
</ul>
<h4 data-id="heading-3">1.2 é—ªå›æ¢å¤å®æ“ç¤ºä¾‹ï¼ˆDELETEè¯¯æ“ä½œï¼‰</h4>
<p>å‡è®¾è¯¯åˆ <code>test.user</code>è¡¨æ•°æ®ï¼Œé€šè¿‡mysqlbinlogå·¥å…·å®ç°æ¢å¤ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å®šä½binlogæ–‡ä»¶</strong>ï¼šæŸ¥çœ‹å½“å‰binlogåˆ—è¡¨åŠæ´»è·ƒæ–‡ä»¶ <code> -- æŸ¥çœ‹binlogæ–‡ä»¶åˆ—è¡¨  `` mysql&gt; SHOW BINARY LOGS;  `` -- æŸ¥çœ‹å½“å‰å†™å…¥çš„binlogæ–‡ä»¶  ``mysql&gt; SHOW MASTER STATUS;</code></li>
<li><strong>è§£æç›®æ ‡binlog</strong>ï¼šè§£ç è¡Œçº§æ—¥å¿—ï¼Œè¿‡æ»¤è¯¯æ“ä½œæ—¶é—´èŒƒå›´ <code> mysqlbinlog --base64-output=decode-rows -v /var/lib/mysql/binlog.000001 \  `` --start-datetime="2025-12-27 09:00:00" \  ``--stop-datetime="2025-12-27 09:30:00" &gt; binlog_content.txt</code>å‚æ•°è¯´æ˜ï¼š<code>--base64-output=decode-rows</code>è§£ç è¡Œæ•°æ®ï¼Œ<code>-v</code>æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚</li>
<li><strong>ç”Ÿæˆåå‘SQL</strong>ï¼šå°†DELETEè½¬æ¢ä¸ºINSERTï¼Œç”Ÿæˆé—ªå›è„šæœ¬ <code> mysqlbinlog --base64-output=decode-rows -v /var/lib/mysql/binlog.000001 \  `` --start-position=154 --stop-position=987 | \  `` sed -e 's/### DELETE FROM/### INSERT INTO/' \  `` -e 's/### WHERE/### VALUES/' \  ``-e 's/### SET/### WHERE/' &gt; flashback.sql</code></li>
<li><strong>æ‰§è¡Œæ¢å¤</strong>ï¼šå…ˆæµ‹è¯•åç”Ÿäº§<code> # æµ‹è¯•ç¯å¢ƒéªŒè¯  `` mysql -h test_db -u root -p &lt; flashback.sql  `` # ç”Ÿäº§ç¯å¢ƒæ‰§è¡Œ  ``mysql -h prod_db -u root -p &lt; flashback.sql</code></li>
</ol>
<h3 data-id="heading-4">äºŒã€binlogäº‹ä»¶ï¼ˆEventï¼‰å…¨è§£æ</h3>
<p>binlogæ–‡ä»¶ç”±ä¸€ç³»åˆ—â€œäº‹ä»¶â€ç»„æˆï¼Œæ¯ä¸ªäº‹ä»¶è®°å½•ä¸€æ¬¡æ•°æ®åº“å˜æ›´ï¼ˆæˆ–å˜æ›´æè¿°ï¼‰ï¼Œäº‹ä»¶æŒ‰æ—¶é—´é¡ºåºè¿½åŠ å†™å…¥ã€‚ä¸åŒäº‹ä»¶å¯¹åº”ä¸åŒæ“ä½œåœºæ™¯ï¼ŒMySQL 8.0ç‰ˆæœ¬åŒ…å«ä»¥ä¸‹æ ¸å¿ƒäº‹ä»¶ç±»å‹ï¼ŒæŒ‰åŠŸèƒ½åˆ†ç±»åˆ—ä¸¾å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-5">2.1 æ‰€æœ‰binlog Eventç±»å‹åŠä½œç”¨</h4>
















































































<table><thead><tr><th><strong>äº‹ä»¶ç±»å‹</strong></th><th><strong>äº‹ä»¶æ ‡è¯†</strong></th><th><strong>æ ¸å¿ƒä½œç”¨</strong></th></tr></thead><tbody><tr><td>Format_desc_event</td><td>15</td><td>binlogæ–‡ä»¶å¼€å¤´çš„æè¿°äº‹ä»¶ï¼Œè®°å½•binlogç‰ˆæœ¬ã€MySQLç‰ˆæœ¬ã€äº‹ä»¶å¤´é•¿åº¦ç­‰å…ƒä¿¡æ¯</td></tr><tr><td>Previous_gtids_log_event</td><td>35</td><td>è®°å½•å½“å‰binlogæ–‡ä»¶åˆ›å»ºå‰å·²æ‰§è¡Œçš„å…¨å±€äº‹åŠ¡IDï¼ˆGTIDï¼‰é›†åˆ</td></tr><tr><td>Gtid_log_event</td><td>33</td><td>æ ‡è®°åç»­äº‹åŠ¡çš„GTIDï¼Œç”¨äºä¸»ä»å¤åˆ¶çš„äº‹åŠ¡è¿½è¸ªä¸è¿‡æ»¤</td></tr><tr><td>Query_event</td><td>2</td><td>è®°å½•æ‰§è¡Œçš„SQLè¯­å¥ï¼ˆå¦‚DDLã€DMLï¼ˆSTATEMENTæ ¼å¼ï¼‰ã€äº‹åŠ¡BEGIN/COMMITï¼‰</td></tr><tr><td>Table_map_event</td><td>19</td><td>è¡Œçº§æ—¥å¿—ï¼ˆROWæ ¼å¼ï¼‰çš„å‰ç½®äº‹ä»¶ï¼Œæè¿°è¡¨ç»“æ„ã€è¡¨IDã€åˆ—ä¿¡æ¯ç­‰æ˜ å°„å…³ç³»</td></tr><tr><td>Write_rows_event_v2</td><td>30</td><td>ROWæ ¼å¼ä¸‹çš„INSERTæ“ä½œäº‹ä»¶ï¼Œè®°å½•æ’å…¥çš„è¡Œæ•°æ®</td></tr><tr><td>Update_rows_event_v2</td><td>31</td><td>ROWæ ¼å¼ä¸‹çš„UPDATEæ“ä½œäº‹ä»¶ï¼Œè®°å½•æ›´æ–°å‰åçš„è¡Œæ•°æ®</td></tr><tr><td>Delete_rows_event_v2</td><td>32</td><td>ROWæ ¼å¼ä¸‹çš„DELETEæ“ä½œäº‹ä»¶ï¼Œè®°å½•åˆ é™¤çš„è¡Œæ•°æ®</td></tr><tr><td>Xid_event</td><td>10</td><td>äº‹åŠ¡æäº¤äº‹ä»¶ï¼Œè®°å½•äº‹åŠ¡IDï¼ˆXIDï¼‰ï¼Œç”¨äºä¸¤é˜¶æ®µæäº¤ä¸€è‡´æ€§æ ¡éªŒ</td></tr><tr><td>Rotate_event</td><td>4</td><td>binlogæ–‡ä»¶åˆ‡æ¢äº‹ä»¶ï¼Œè®°å½•ä¸‹ä¸€ä¸ªbinlogæ–‡ä»¶çš„åç§°å’Œä½ç½®</td></tr><tr><td>Stop_event</td><td>3</td><td>MySQLæœåŠ¡åœæ­¢äº‹ä»¶ï¼Œæ ‡è®°binlogå†™å…¥ç»ˆæ­¢</td></tr><tr><td>Intvar_event</td><td>5</td><td>è®°å½•INSERT_IDã€LAST_INSERT_IDå˜é‡å€¼ï¼Œç”¨äºSTATEMENTæ ¼å¼ä¸‹çš„è‡ªå¢IDä¸€è‡´æ€§</td></tr><tr><td>Rand_event</td><td>6</td><td>è®°å½•RAND()å‡½æ•°çš„ç§å­å€¼ï¼Œé¿å…STATEMENTæ ¼å¼ä¸‹ä¸»ä»æ•°æ®ä¸ä¸€è‡´</td></tr><tr><td>Incident_event</td><td>26</td><td>è®°å½•ä¸»åº“å¼‚å¸¸äº‹ä»¶ï¼ˆå¦‚æ•…éšœï¼‰ï¼Œç”¨äºä¸»ä»å¤åˆ¶çš„å¼‚å¸¸é€šçŸ¥</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed30a89556eb4cb09da413fe479b3cd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRELomZrnqbrooYzogIU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767520076&amp;x-signature=c9Fb4vbjHb0PkeNBmi6bSZbiyrY%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6">é‡ç‚¹Binlog Eventè¯¦ç»†æ ¼å¼</h4>
<p>ä»¥ä¸‹é€‰å–æ•°æ®æ¢å¤åœºæ™¯ä¸­æœ€æ ¸å¿ƒçš„6ç±»äº‹ä»¶ï¼Œè¯¦ç»†æ‹†è§£å…¶æ ¼å¼ç»“æ„ï¼ˆåŸºäºMySQL 8.0ï¼Œå°ç«¯å­—èŠ‚åºï¼‰ï¼ŒåŒ…å«äº‹ä»¶å¤´ã€å›ºå®šå­—æ®µã€å¯å˜å­—æ®µåŠå«ä¹‰è¯´æ˜ã€‚</p>
<h5 data-id="heading-7">1. Format_desc_eventï¼ˆbinlogæè¿°äº‹ä»¶ï¼‰</h5>
<p>æ¯ä¸ªbinlogæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªäº‹ä»¶ï¼Œç”¨äºæè¿°binlogå…ƒä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ äº‹ä»¶å¤´ï¼ˆå›ºå®š<span class="hljs-number">19</span>å­—èŠ‚ï¼‰                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ timestamp: <span class="hljs-number">4</span>å­—èŠ‚  <span class="hljs-comment">// äº‹ä»¶åˆ›å»ºæ—¶é—´ï¼ˆç§’çº§ï¼‰                     â”‚</span>
â”‚ event_type: <span class="hljs-number">1</span>å­—èŠ‚  <span class="hljs-comment">// äº‹ä»¶ç±»å‹ï¼ˆ15=Format_desc_eventï¼‰        â”‚</span>
â”‚ server_id: <span class="hljs-number">4</span>å­—èŠ‚  <span class="hljs-comment">// äº§ç”Ÿäº‹ä»¶çš„MySQLæœåŠ¡ID                    â”‚</span>
â”‚ event_size: <span class="hljs-number">4</span>å­—èŠ‚  <span class="hljs-comment">// äº‹ä»¶æ€»é•¿åº¦ï¼ˆå«å¤´ã€ä½“ã€å°¾ï¼‰              â”‚</span>
â”‚ log_pos: <span class="hljs-number">4</span>å­—èŠ‚  <span class="hljs-comment">// ä¸‹ä¸€ä¸ªäº‹ä»¶çš„èµ·å§‹ä½ç½®                      â”‚</span>
â”‚ flags: <span class="hljs-number">2</span>å­—èŠ‚  <span class="hljs-comment">// äº‹ä»¶æ ‡è®°ï¼ˆå¦‚0x0001è¡¨ç¤ºæ–‡ä»¶æ­£åœ¨ä½¿ç”¨ï¼‰         â”‚</span>
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ äº‹ä»¶ä½“ï¼ˆå¯å˜é•¿åº¦ï¼‰                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ binlog_version: <span class="hljs-number">2</span>å­—èŠ‚  <span class="hljs-comment">// binlogç‰ˆæœ¬ï¼ˆå›ºå®š0x0004ï¼‰            â”‚</span>
â”‚ mysql_version: <span class="hljs-number">50</span>å­—èŠ‚  <span class="hljs-comment">// MySQLç‰ˆæœ¬å­—ç¬¦ä¸²ï¼ˆå¦‚"8.0.36"ï¼‰      â”‚</span>
â”‚ create_time: <span class="hljs-number">4</span>å­—èŠ‚  <span class="hljs-comment">// binlogæ–‡ä»¶åˆ›å»ºæ—¶é—´ï¼ˆç§’çº§ï¼‰             â”‚</span>
â”‚ event_header_length: <span class="hljs-number">1</span>å­—èŠ‚  <span class="hljs-comment">// äº‹ä»¶å¤´å›ºå®šé•¿åº¦ï¼ˆ19å­—èŠ‚ï¼‰       â”‚</span>
â”‚ event_type_header_lengths: <span class="hljs-number">40</span>å­—èŠ‚  <span class="hljs-comment">// å„äº‹ä»¶ç±»å‹çš„å¤´é•¿åº¦      â”‚</span>
â”‚ checksum: <span class="hljs-number">4</span>å­—èŠ‚  <span class="hljs-comment">// æ ¡éªŒå’Œï¼ˆå¯é€‰ï¼ŒCRC32ï¼‰                    â”‚</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h5 data-id="heading-8">2. Query_eventï¼ˆSQLæ‰§è¡Œäº‹ä»¶ï¼‰</h5>
<p>è®°å½•SQLè¯­å¥æ‰§è¡Œä¿¡æ¯ï¼ŒSTATEMENTæ ¼å¼ä¸‹æ ¸å¿ƒäº‹ä»¶ï¼ŒROWæ ¼å¼ä¸‹ç”¨äºè®°å½•DDL/äº‹åŠ¡è¯­å¥ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>




























































<table><thead><tr><th><strong>å­—æ®µåç§°</strong></th><th><strong>é•¿åº¦</strong></th><th><strong>å«ä¹‰è¯´æ˜</strong></th></tr></thead><tbody><tr><td>äº‹ä»¶å¤´</td><td>19å­—èŠ‚</td><td>åŒFormat_desc_eventçš„äº‹ä»¶å¤´ç»“æ„</td></tr><tr><td>slave_proxy_id</td><td>4å­—èŠ‚</td><td>ä»åº“ä»£ç†IDï¼ˆé»˜è®¤0ï¼‰</td></tr><tr><td>execution_time</td><td>4å­—èŠ‚</td><td>SQLæ‰§è¡Œè€—æ—¶ï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td>schema_length</td><td>1å­—èŠ‚</td><td>å½“å‰æ•°æ®åº“åé•¿åº¦</td></tr><tr><td>error_code</td><td>2å­—èŠ‚</td><td>æ‰§è¡Œé”™è¯¯ç ï¼ˆ0è¡¨ç¤ºæˆåŠŸï¼‰</td></tr><tr><td>status_vars_length</td><td>2å­—èŠ‚</td><td>çŠ¶æ€å˜é‡é•¿åº¦</td></tr><tr><td>status_vars</td><td>å¯å˜é•¿åº¦</td><td>æ‰§è¡ŒçŠ¶æ€å˜é‡ï¼ˆå¦‚autocommitã€å­—ç¬¦é›†ï¼‰</td></tr><tr><td>schema</td><td>å¯å˜é•¿åº¦</td><td>å½“å‰æ•°æ®åº“åï¼ˆä»¥NULLç»“å°¾ï¼‰</td></tr><tr><td>sql_statement</td><td>å¯å˜é•¿åº¦</td><td>æ‰§è¡Œçš„SQLè¯­å¥ï¼ˆä»¥NULLç»“å°¾ï¼‰</td></tr><tr><td>checksum</td><td>4å­—èŠ‚</td><td>æ ¡éªŒå’Œï¼ˆå¯é€‰ï¼‰</td></tr></tbody></table>
<h5 data-id="heading-9">3. Table_map_eventï¼ˆè¡¨æ˜ å°„äº‹ä»¶ï¼‰</h5>
<p>ROWæ ¼å¼ä¸‹æ‰€æœ‰è¡Œäº‹ä»¶ï¼ˆWrite/Update/Deleteï¼‰çš„å‰ç½®äº‹ä»¶ï¼Œç”¨äºå…³è”è¡¨ç»“æ„ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ äº‹ä»¶å¤´ï¼ˆ<span class="hljs-number">19</span>å­—èŠ‚ï¼‰ <span class="hljs-comment">// åŒé€šç”¨äº‹ä»¶å¤´ç»“æ„                         â”‚</span>
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å›ºå®šå­—æ®µï¼ˆ<span class="hljs-number">8</span>å­—èŠ‚ï¼‰                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ table_id: <span class="hljs-number">6</span>å­—èŠ‚  <span class="hljs-comment">// è¡¨å”¯ä¸€æ ‡è¯†ï¼ˆMySQLå†…éƒ¨åˆ†é…ï¼‰              â”‚</span>
â”‚ reserved: <span class="hljs-number">2</span>å­—èŠ‚  <span class="hljs-comment">// ä¿ç•™å­—æ®µï¼ˆæœªä½¿ç”¨ï¼Œé»˜è®¤0x0000ï¼‰           â”‚</span>
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¯å˜å­—æ®µï¼ˆæ ¸å¿ƒå†…å®¹ï¼‰                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ db_name_len: <span class="hljs-number">1</span>å­—èŠ‚  <span class="hljs-comment">// æ•°æ®åº“åé•¿åº¦                          â”‚</span>
â”‚ db_name: å¯å˜é•¿åº¦  <span class="hljs-comment">// æ•°æ®åº“åï¼ˆNULLç»“å°¾ï¼‰                   â”‚</span>
â”‚ table_name_len: <span class="hljs-number">1</span>å­—èŠ‚  <span class="hljs-comment">// è¡¨åé•¿åº¦                            â”‚</span>
â”‚ table_name: å¯å˜é•¿åº¦  <span class="hljs-comment">// è¡¨åï¼ˆNULLç»“å°¾ï¼‰                     â”‚</span>
â”‚ column_count: å˜é•¿æ•´æ•°  <span class="hljs-comment">// è¡¨çš„åˆ—æ•°é‡                        â”‚</span>
â”‚ column_types: å¯å˜é•¿åº¦  <span class="hljs-comment">// åˆ—ç±»å‹æ•°ç»„ï¼ˆ1å­—èŠ‚/åˆ—ï¼‰             â”‚</span>
â”‚ metadata_len: å˜é•¿æ•´æ•°  <span class="hljs-comment">// åˆ—å…ƒæ•°æ®é•¿åº¦                      â”‚</span>
â”‚ metadata: å¯å˜é•¿åº¦  <span class="hljs-comment">// åˆ—å…ƒæ•°æ®ï¼ˆå¦‚VARCHARé•¿åº¦ï¼‰              â”‚</span>
â”‚ null_bitmap: å¯å˜é•¿åº¦  <span class="hljs-comment">// åˆ—NULLå…è®¸æ ‡è®°ï¼ˆ(N+7)/8å­—èŠ‚ï¼ŒNä¸ºåˆ—æ•°ï¼‰â”‚</span>
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ checksum: <span class="hljs-number">4</span>å­—èŠ‚  <span class="hljs-comment">// æ ¡éªŒå’Œï¼ˆå¯é€‰ï¼‰                            â”‚</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h5 data-id="heading-10">4. Write_rows_event_v2ï¼ˆæ’å…¥è¡Œäº‹ä»¶ï¼‰</h5>
<p>ROWæ ¼å¼ä¸‹INSERTæ“ä½œçš„æ ¸å¿ƒäº‹ä»¶ï¼Œè®°å½•æ’å…¥çš„è¡Œæ•°æ®ï¼Œæ ¼å¼ä¸Update/Delete_rows_event_v2ç±»ä¼¼ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ äº‹ä»¶å¤´ï¼ˆ<span class="hljs-number">19</span>å­—èŠ‚ï¼‰ <span class="hljs-comment">// åŒé€šç”¨äº‹ä»¶å¤´ç»“æ„                         â”‚</span>
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å›ºå®šå­—æ®µï¼ˆ<span class="hljs-number">8</span>å­—èŠ‚ï¼‰                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ table_id: <span class="hljs-number">6</span>å­—èŠ‚  <span class="hljs-comment">// å…³è”çš„è¡¨IDï¼ˆå¯¹åº”Table_map_eventçš„table_idï¼‰â”‚</span>
â”‚ flags: <span class="hljs-number">2</span>å­—èŠ‚  <span class="hljs-comment">// äº‹ä»¶æ ‡è®°ï¼ˆå¦‚0x0001è¡¨ç¤ºå¿½ç•¥é¢å¤–æ•°æ®ï¼‰         â”‚</span>
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¯å˜å­—æ®µ                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ extra_data_len: <span class="hljs-number">2</span>å­—èŠ‚  <span class="hljs-comment">// é¢å¤–æ•°æ®é•¿åº¦ï¼ˆMySQL 5.6.2+ï¼‰       â”‚</span>
â”‚ extra_data: å¯å˜é•¿åº¦  <span class="hljs-comment">// é¢å¤–æ•°æ®ï¼ˆæœªä½¿ç”¨ï¼‰                  â”‚</span>
â”‚ column_count: å˜é•¿æ•´æ•°  <span class="hljs-comment">// æ¶‰åŠçš„åˆ—æ•°é‡                      â”‚</span>
â”‚ columns_used_bitmap1: å¯å˜é•¿åº¦  <span class="hljs-comment">// åˆ—ä½¿ç”¨ä½å›¾ï¼ˆ1=æ¶‰åŠè¯¥åˆ—ï¼‰  â”‚</span>
â”‚ rows_data: å¯å˜é•¿åº¦  <span class="hljs-comment">// è¡Œæ•°æ®é›†åˆï¼ˆå¤šæ¡è¡Œè®°å½•ï¼‰              â”‚</span>
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ checksum: <span class="hljs-number">4</span>å­—èŠ‚  <span class="hljs-comment">// æ ¡éªŒå’Œï¼ˆå¯é€‰ï¼‰                            â”‚</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>è¡Œæ•°æ®ï¼ˆrows_dataï¼‰è¯¦ç»†ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">æ¯ä¸€è¡Œæ•°æ® = <span class="hljs-literal">NULL</span>ä½å›¾ + åˆ—å€¼åºåˆ—
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ null_bitmap: (N+<span class="hljs-number">7</span>)/<span class="hljs-number">8</span>å­—èŠ‚  <span class="hljs-comment">// Nä¸ºåˆ—æ•°ï¼Œ1=è¯¥åˆ—å€¼ä¸ºNULLï¼Œ0=æœ‰å€¼ â”‚</span>
â”‚ column_values: å¯å˜é•¿åº¦  <span class="hljs-comment">// åˆ—å€¼åºåˆ—ï¼ˆæŒ‰åˆ—ç±»å‹ç¼–ç ï¼‰          â”‚</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å¸¸è§åˆ—ç±»å‹ç¼–ç è§„åˆ™ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>






























<table><thead><tr><th><strong>MySQLç±»å‹</strong></th><th><strong>å­˜å‚¨å­—èŠ‚</strong></th><th><strong>ç¼–ç è¯´æ˜</strong></th></tr></thead><tbody><tr><td>TINYINT</td><td>1å­—èŠ‚</td><td>åŒºåˆ†æœ‰ç¬¦å·/æ— ç¬¦å·</td></tr><tr><td>INT</td><td>4å­—èŠ‚</td><td>å°ç«¯å­—èŠ‚åºï¼ˆlittle-endianï¼‰</td></tr><tr><td>VARCHAR(n)</td><td>1/2å­—èŠ‚+æ•°æ®</td><td>å‰ç¼€å­˜å‚¨é•¿åº¦ï¼Œnâ‰¤255ç”¨1å­—èŠ‚ï¼Œå¦åˆ™ç”¨2å­—èŠ‚</td></tr><tr><td>DATETIME</td><td>5å­—èŠ‚</td><td>å‹ç¼©æ ¼å¼ï¼ˆå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼‰</td></tr></tbody></table>
<h5 data-id="heading-11">5. Update_rows_event_v2ï¼ˆæ›´æ–°è¡Œäº‹ä»¶ï¼‰</h5>
<p>è®°å½•UPDATEæ“ä½œçš„è¡Œæ•°æ®å˜æ›´ï¼Œä¸Write_rows_event_v2ç»“æ„ç±»ä¼¼ï¼Œå·®å¼‚åœ¨äºåŒ…å«â€œæ›´æ–°å‰â€å’Œâ€œæ›´æ–°åâ€ä¸¤ç»„è¡Œæ•°æ®ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ ¸å¿ƒå·®å¼‚å­—æ®µï¼ˆå…¶ä½™åŒWrite_rows_event_v2ï¼‰</span>
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ columns_used_bitmap1: å¯å˜é•¿åº¦  <span class="hljs-comment">// æ›´æ–°å‰åˆ—ä½¿ç”¨ä½å›¾          â”‚</span>
â”‚ columns_used_bitmap2: å¯å˜é•¿åº¦  <span class="hljs-comment">// æ›´æ–°ååˆ—ä½¿ç”¨ä½å›¾          â”‚</span>
â”‚ rows_data: å¯å˜é•¿åº¦  <span class="hljs-comment">// æ¯è¡ŒåŒ…å«ã€æ›´æ–°å‰è¡Œæ•°æ®ã€‘+ã€æ›´æ–°åè¡Œæ•°æ®ã€‘â”‚</span>
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h5 data-id="heading-12">6. Xid_eventï¼ˆäº‹åŠ¡æäº¤äº‹ä»¶ï¼‰</h5>
<p>æ ‡è®°äº‹åŠ¡æäº¤ï¼Œç”¨äºä¸¤é˜¶æ®µæäº¤ï¼ˆredo logä¸binlogä¸€è‡´æ€§ï¼‰ï¼Œæ ¼å¼æç®€ï¼š</p>

























<table><thead><tr><th><strong>å­—æ®µåç§°</strong></th><th><strong>é•¿åº¦</strong></th><th><strong>å«ä¹‰è¯´æ˜</strong></th></tr></thead><tbody><tr><td>äº‹ä»¶å¤´</td><td>19å­—èŠ‚</td><td>åŒé€šç”¨äº‹ä»¶å¤´ç»“æ„</td></tr><tr><td>xid</td><td>8å­—èŠ‚</td><td>å…¨å±€äº‹åŠ¡IDï¼ˆç”¨äºäº‹åŠ¡ä¸€è‡´æ€§æ ¡éªŒï¼‰</td></tr><tr><td>checksum</td><td>4å­—èŠ‚</td><td>æ ¡éªŒå’Œï¼ˆå¯é€‰ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-13">ä¸‰ã€æ€»ç»“</h3>
<p>binlogé—ªå›æ¢å¤çš„æ ¸å¿ƒæ˜¯â€œè§£æäº‹ä»¶ã€åå‘é‡æ”¾â€ï¼Œè€Œç†è§£binlogäº‹ä»¶æ ¼å¼æ˜¯ç²¾å‡†æ¢å¤æ•°æ®çš„åŸºç¡€â€”â€”å°¤å…¶æ˜¯ROWæ ¼å¼ä¸‹çš„Table_map_eventå’Œè¡Œäº‹ä»¶ï¼Œç›´æ¥å†³å®šäº†èƒ½å¦æ­£ç¡®è§£ç è¡Œæ•°æ®ã€ç”Ÿæˆåå‘SQLã€‚ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®ä¼˜å…ˆé…ç½®ROWæ ¼å¼binlogï¼Œå¼€å¯GTIDï¼ŒåŒæ—¶åšå¥½binlogå¤‡ä»½ä¸ç›‘æ§ï¼Œæ‰èƒ½åœ¨è¯¯æ“ä½œå‘ç”Ÿæ—¶å¿«é€Ÿã€å®‰å…¨åœ°æ¢å¤æ•°æ®ã€‚</p>
<p>æŒæ¡æœ¬æ–‡æ¢³ç†çš„äº‹ä»¶ç±»å‹ä¸æ ¼å¼è§„èŒƒï¼Œä¸ä»…èƒ½åº”å¯¹æ—¥å¸¸æ•°æ®æ¢å¤åœºæ™¯ï¼Œä¹Ÿèƒ½ä¸ºæ·±å…¥ç†è§£MySQLä¸»ä»å¤åˆ¶ã€äº‹åŠ¡ä¸€è‡´æ€§ç­‰æ ¸å¿ƒæœºåˆ¶æ‰“ä¸‹åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å·²æ­»ï¼Ÿæˆ‘ç”¨ Trae + Gemini é›¶ä»£ç æ‰‹æ“ 3D å¡”ç½—ç‰Œï¼Œæ‰¾åˆ°äº†æ–°å‡ºè·¯]]></title>    <link>https://juejin.cn/post/7588124225702363176</link>    <guid>https://juejin.cn/post/7588124225702363176</guid>    <pubDate>2025-12-28T07:11:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588124225702363176" data-draft-id="7588095884070469632" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å·²æ­»ï¼Ÿæˆ‘ç”¨ Trae + Gemini é›¶ä»£ç æ‰‹æ“ 3D å¡”ç½—ç‰Œï¼Œæ‰¾åˆ°äº†æ–°å‡ºè·¯"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T07:11:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŠ‹åœ†ai"/> <meta itemprop="url" content="https://juejin.cn/user/1451828494217415"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å·²æ­»ï¼Ÿæˆ‘ç”¨ Trae + Gemini é›¶ä»£ç æ‰‹æ“ 3D å¡”ç½—ç‰Œï¼Œæ‰¾åˆ°äº†æ–°å‡ºè·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1451828494217415/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŠ‹åœ†ai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T07:11:42.000Z" title="Sun Dec 28 2025 07:11:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ”® å…¨æµç¨‹ AI æ‰‹æ“ï¼šæˆ‘åªåŠ¨äº†åŠ¨å˜´ï¼ŒAI å°±å¸®æˆ‘å¤æ´»äº†å¤è€çš„å¡”ç½—ç‰Œ</h2>
<blockquote>
<p><strong>å‰è¨€</strong></p>
<p>è¿˜è®°å¾—æˆ‘ 3 ä¸ªæœˆå‰åˆ†äº«çš„é‚£ç¯‡ã€Šç”¨ AI å†™å…«å­—ç®—å‘½ UIã€‹å—ï¼Ÿ</p>
<p>é‚£æ—¶å€™ï¼ŒAI è™½ç„¶èƒ½å†™å‡ºåƒæ ·çš„ç•Œé¢ï¼Œä½†æ›´å¤šæ—¶å€™è¿˜æ˜¯ç–¯ç‹‚çš„è°ƒè¯•ï¼Œå¾ˆå¤šå¤æ‚çš„åŠ¨ç”»é€»è¾‘å’Œæ ·å¼ç»†èŠ‚ï¼Œè¿˜å¾—æˆ‘è‡ªå·±ä¸Šæ‰‹å¾®è°ƒã€‚</p>
<p><strong>çŸ­çŸ­ 90 å¤©è¿‡å»ï¼Œæˆ‘è¢« AI è¿›åŒ–é€Ÿåº¦éœ‡æ’¼äº†ã€‚</strong></p>
<p>è¿™ä¸€æ¬¡ï¼Œæˆ‘å†³å®šæŒ‘æˆ˜ä¸€ä¸ªåœ°ç‹±çº§éš¾åº¦ï¼š<strong>å®Œå…¨ä¸å†™ä¸€è¡Œæ ¸å¿ƒä»£ç ï¼ŒæŒ‡æŒ¥ AI å¼€å‘ä¸€æ¬¾é«˜é¢œå€¼çš„ 3D å¡”ç½—ç‰Œåº”ç”¨ã€‚</strong></p>
<p>ç»“æœï¼Ÿ<strong>Lumina Tarot</strong> è¯ç”Ÿäº†ã€‚å®ƒä¸ä»…æœ‰ä¸æ»‘çš„ 3D äº¤äº’ï¼Œè¿˜èƒ½åƒçœŸäººå åœå¸ˆä¸€æ ·â€œè¯»å¿ƒâ€ã€‚ä»Šå¤©å°±æ¥å¤ç›˜ä¸€ä¸‹ï¼Œåœ¨è¿™ 3 ä¸ªæœˆé‡Œ AI ç¼–ç¨‹åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆè´¨å˜ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ˜² æ•ˆæœå±•ç¤ºï¼šè¿™çœŸçš„æ˜¯ AI å†™çš„ï¼Ÿ</h3>
<p>å…ˆçœ‹æˆå“ã€‚å½“æˆ‘æŠŠè¿™äº›éœ€æ±‚æ‰”ç»™ AI æ—¶ï¼Œæˆ‘å…¶å®æ²¡æŠ±å¤ªå¤§å¸Œæœ›ï¼Œä½†å®ƒäº¤å‡ºçš„ç­”å·è®©æˆ‘è¿™ä¸ª AI åšä¸»éƒ½æƒŠäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26e8f125bd5940ca968d61fd1690ec9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767510702&amp;x-signature=nAof0nke8RbyCQRr2n3%2BAW2KiWA%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><em>å›¾æ³¨ï¼šå›¾ç‰‡æ„Ÿè§‰ä¸åˆ°è¿™ç§äº¤äº’æ„Ÿï¼ŒçœŸçš„å¾ˆç¾ï¼Œå¤§å®¶å¯ä»¥å»è‡ªå·±è¯•è¯•</em></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d91239276ad4847a6115b371bdc141b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767510702&amp;x-signature=lLgFo5qQezXsEMl3WU7InhNKMLE%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><em>å›¾æ³¨ï¼šè¿™ä¸ªæ’ç‰ˆå’Œå®¡ç¾æˆ‘åªèƒ½è¯´æˆ‘çœŸçš„ç»äº†</em></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7dfccae35254e9cb5913c6ac628fb68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767510702&amp;x-signature=L6GVZmTVXiXJWa3VYfHOR9J24Jo%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><em>å›¾æ³¨ï¼šæ¯ä¸ªåœ°æ–¹éƒ½æœ‰å¾ˆå¥½çš„äº¤äº’ï¼Œåœ¨å¡ç‰Œä¸Šæœ‰å€¾æ–œçš„åŠ¨ç”»å’Œé‡‘ç²‰ï¼Œç„¶ååé¢çš„èƒŒæ™¯ä¹Ÿæ˜¯æœ‰äº¤äº’çš„</em></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02b317af40354062a0ba5981675b51c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767510702&amp;x-signature=HjLbwuR5pJY%2F%2FYIS26ayBkDTD30%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-2">ğŸ¤– è¿‡ç¨‹æ­ç§˜ï¼šæˆ‘è´Ÿè´£æƒ³è±¡ï¼ŒAI è´Ÿè´£å®ç°</h3>
<p>åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘çš„è§’è‰²ä»â€œç¨‹åºå‘˜â€å˜æˆäº†â€œæŒ‡æŒ¥å®˜â€ã€‚æˆ‘ä¸å†çº ç»“ <code>div</code> æ€ä¹ˆå±…ä¸­ï¼Œè€Œæ˜¯ä¸“æ³¨äº<strong>å®¡ç¾</strong>å’Œ<strong>é€»è¾‘</strong>ã€‚</p>
<h4 data-id="heading-3">1ï¸âƒ£ æŒ‘æˆ˜ AI çš„å®¡ç¾ä¸Šé™ï¼šçº¯ä»£ç ç»˜åˆ¶ SVG ç‰ŒèƒŒ</h4>
<p>æˆ‘è·Ÿ AI è¯´ï¼š</p>
<blockquote>
<p><em>"æˆ‘ä¸è¦ç½‘ä¸Šçš„ç´ æå›¾ï¼Œæˆ‘è¦ä½ ç”¨ SVG ä»£ç ç”»ä¸€ä¸ªâ€˜æš—é»‘å¤©ä½“â€™é£æ ¼çš„ç‰ŒèƒŒï¼Œè¦æœ‰é‡‘è‰²çº¿æ¡å’Œç¥ç§˜ç¬¦å·ã€‚"</em></p>
</blockquote>
<p>AI æ€è€ƒäº† 5 ç§’é’Ÿï¼Œç„¶ååå‡ºäº†å‡ ç™¾è¡Œ SVG ä»£ç ã€‚ç»“æœå°±æ˜¯ä½ ä»¬çœ‹åˆ°çš„è¿™ä¸ªâ€”â€”ç»†èŠ‚æ‹‰æ»¡ï¼Œæ”¾å¤§ 10 å€ä¹Ÿä¸å¤±çœŸã€‚
<strong>ä»¥å‰è®¾è®¡å¸ˆè¦ç”»åŠå¤©çš„å›¾ï¼ŒAI å‡ ç§’é’Ÿå°±â€œç®—â€å‡ºæ¥äº†ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/736c698c0a184e4b947cd69103c9375d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767510702&amp;x-signature=F%2FH2yyQjL3U%2Fvw1aeLHLVc4l9wc%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><em>å›¾æ³¨ï¼šè¿™å¤æ‚çš„å‡ ä½•çº¹ç†ï¼Œç«Ÿç„¶å…¨æ˜¯ AI ä¸€è¡Œè¡Œä»£ç æ•²å‡ºæ¥çš„ã€‚</em></p>
</blockquote>
<h4 data-id="heading-4">2ï¸âƒ£ æŒ‘æˆ˜ AI çš„é€»è¾‘èƒ½åŠ›ï¼š3D ç¿»ç‰ŒåŠ¨ç”»</h4>
<p>æˆ‘ä¹Ÿä¸æ‡‚ä»€ä¹ˆ CSS 3D å˜æ¢çŸ©é˜µã€‚æˆ‘åªæ˜¯å‘Šè¯‰ AIï¼š</p>
<blockquote>
<p><em>"æˆ‘å¸Œæœ›å¡ç‰Œèƒ½åƒçœŸå®ç‰©ä½“ä¸€æ ·ï¼Œé¼ æ ‡æ»‘è¿‡è¦æœ‰å€¾æ–œæ„Ÿï¼Œç¿»å¼€æ—¶è¦æœ‰é‡åŠ›æ„Ÿã€‚"</em></p>
</blockquote>
<p>AI è‡ªåŠ¨å¸®æˆ‘å†™å¥½äº† <code>perspective</code>ã€<code>rotate3d</code> ç”šè‡³è¿˜è´´å¿ƒåœ°åŠ ä¸Šäº†åŠ¨æ€å…‰å½±é®ç½©ã€‚
<strong>æˆ‘åªè´Ÿè´£æéœ€æ±‚ï¼Œéš¾ç‚¹å…¨äº¤ç»™å®ƒã€‚</strong>
ä¸å‡ºä¸€ä¼šå°±å®Œç¾çš„å®Œæˆï¼Œbugå±…ç„¶éƒ½æ²¡ä»€ä¹ˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09415fd8e08745b5ada03df19bdd2d9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767510702&amp;x-signature=obLwo2duhg%2Buiq0b%2BmdU%2BGeph%2Fo%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">3ï¸âƒ£ å…¨æ ˆé—­ç¯ï¼šSupabase + Vercel ä¸€é”®ä¸Šäº‘</h4>
<p>ä¸ä»…æ˜¯å‰ç«¯ï¼ŒAI æŠŠåç«¯çš„æ´»å„¿ä¹ŸåŒ…åœ†äº†ã€‚</p>
<ul>
<li><strong>æ•°æ®åº“</strong>ï¼šå®ƒå¸®æˆ‘è®¾è®¡äº† <strong>Supabase</strong> çš„è¡¨ç»“æ„å’Œ Row Level Security ç­–ç•¥ã€‚</li>
<li><strong>éƒ¨ç½²</strong>ï¼šä»£ç æ¨é€åˆ° GitHubï¼Œ<strong>Vercel</strong> è‡ªåŠ¨æ„å»ºã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8d01e0dc3524f3ab6832246676a7035~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767510702&amp;x-signature=OAEh2pcbv%2FFZ8VN0J8TbCDwQ%2FRQ%3D" alt="image.png" loading="lazy"/>
<strong>ä»¥å‰éœ€è¦ä¸€ä¸ªå›¢é˜Ÿå¹²çš„äº‹å„¿ï¼Œç°åœ¨æˆ‘ + AI + Serverless å°±æå®šäº†ã€‚</strong></p>
<hr/>
<h3 data-id="heading-6">ğŸŒŒ AI çš„ç¾å­¦ï¼šå¾®äº¤äº’ä¸­çš„â€œå‘¼å¸æ„Ÿâ€</h3>
<p>å¾ˆå¤šäººè§‰å¾— AI åªèƒ½å†™é€»è¾‘ï¼Œä¸æ‡‚å®¡ç¾ã€‚<strong>å¤§é”™ç‰¹é”™ã€‚</strong>
åœ¨ Lumina Tarot ä¸­ï¼Œæˆ‘ç‰¹æ„æµ‹è¯•äº† AI å¯¹â€œæ°›å›´æ„Ÿâ€çš„ç†è§£ã€‚</p>
<p>æˆ‘æ²¡æœ‰ç»™å‡ºå…·ä½“çš„å‚æ•°ï¼Œåªæ˜¯ç”¨è‡ªç„¶è¯­è¨€æè¿°æ„Ÿè§‰ï¼š</p>
<ul>
<li><em>"è®©å…‰æ•ˆåƒå‘¼å¸ä¸€æ ·è‡ªç„¶"</em></li>
<li><em>"è®©ç¿»ç‰Œçš„ç¬é—´æœ‰ä¸€ç§æ²‰ç”¸ç”¸çš„ä»ªå¼æ„Ÿ"</em></li>
</ul>
<p>ç»“æœï¼ŒAI ä¸ä»…å¸®æˆ‘å†™äº† <code>transition</code>ï¼Œè¿˜è‡ªå·±åŠ ä¸Šäº† <code>cubic-bezier</code> è´å¡å°”æ›²çº¿æ¥æ¨¡æ‹Ÿç‰©ç†æƒ¯æ€§ã€‚ç”šè‡³åœ¨é¼ æ ‡ç§»åŠ¨æ—¶ï¼Œå®ƒè‡ªåŠ¨è¡¥å…¨äº†<strong>è§†å·®æ»šåŠ¨ (Parallax Effect)</strong> çš„é€»è¾‘ã€‚
<strong>è¿™ç§å¯¹â€œç¾â€çš„é€šæ„Ÿï¼Œæ‰æ˜¯ AI æœ€è®©æˆ‘ç»†æ€ææçš„åœ°æ–¹ã€‚</strong></p>
<hr/>
<h3 data-id="heading-7">ğŸ˜ˆ é­”é¬¼ç»†èŠ‚ï¼šé‚£äº› AI æ›¿æˆ‘å¡«çš„å‘</h3>
<p>é™¤äº†å¤§æ¡†æ¶ï¼ŒçœŸæ­£è®©æˆ‘è§‰å¾—â€œAI èƒ½å¤„â€çš„ï¼Œæ˜¯å®ƒå¯¹ç»†èŠ‚çš„è¡¥å…¨ã€‚è¿™äº›ç‚¹æˆ‘ç”šè‡³éƒ½æ²¡æï¼Œæ˜¯å®ƒè‡ªå·±æƒ³åˆ°çš„ï¼š</p>
<ol>
<li><strong>ç§»åŠ¨ç«¯é€‚é…</strong>ï¼šæˆ‘åªæµ‹äº† PC ç«¯ï¼ŒAI å´è‡ªåŠ¨ç»™æ‰‹æœºç«¯åŠ ä¸Šäº†è§¦æ‘¸æ»‘åŠ¨äº‹ä»¶ï¼Œé˜²æ­¢åœ¨æ‰‹æœºä¸Šæ— æ³•ç¿»ç‰Œã€‚</li>
<li><strong>å›¾ç‰‡é¢„åŠ è½½</strong>ï¼šä¸ºäº†é˜²æ­¢ç¿»å¼€ç‰Œæ—¶å›¾ç‰‡è¿˜åœ¨åŠ è½½ï¼ˆç™½å±ï¼‰ï¼ŒAI è‡ªåŠ¨æ’å…¥äº† <code>new Image()</code> é¢„åŠ è½½é€»è¾‘ã€‚</li>
<li><strong>é˜²è¯¯è§¦</strong>ï¼šåœ¨æ´—ç‰ŒåŠ¨ç”»ç»“æŸå‰ï¼Œå®ƒè´´å¿ƒåœ°ç¦ç”¨äº†ç‚¹å‡»äº‹ä»¶ï¼Œé˜²æ­¢ç”¨æˆ·ä¹±ç‚¹å¯¼è‡´åŠ¨ç”»ç©¿æ¨¡ã€‚</li>
<li><strong>æ— éšœç¢æ”¯æŒ</strong>ï¼šæ‰€æœ‰çš„ SVG å’ŒæŒ‰é’®ï¼Œå®ƒéƒ½é¡ºæ‰‹åŠ ä¸Šäº† <code>aria-label</code>ã€‚</li>
</ol>
<p><strong>å®ƒæ¯”æˆ‘æ›´åƒä¸€ä¸ªæœ‰ç»éªŒçš„é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆã€‚</strong></p>
<hr/>
<h3 data-id="heading-8">ğŸ› ï¸ å·¥å…·å¤ç›˜ï¼šä¸ºä»€ä¹ˆæˆ‘é€‰æ‹©äº† Traeï¼Ÿ</h3>
<p>è¿™æ¬¡å¼€å‘æˆ‘å…¨ç¨‹ä½¿ç”¨çš„æ˜¯ <strong>Trae</strong> ç¼–è¾‘å™¨ã€‚è¯´å®è¯ï¼Œä½œä¸ºé˜…â€œè½¯â€æ— æ•°çš„ AI åšä¸»ï¼ŒTrae çš„è¿›æ­¥çœŸçš„è®©æˆ‘æƒŠå–œã€‚</p>
<p>ä»¥å‰æˆ‘å¯èƒ½ä¼šç”¨ <strong>Claude Code</strong>ï¼Œä½†æœ€è¿‘å®ƒ<strong>è¶Šæ¥è¶Šè´µ</strong>ï¼Œè€Œä¸”åœ¨æŸäº›ç«‹åœºé—®é¢˜ä¸Šï¼ˆä½ æ‡‚çš„ï¼‰è®©äººæ— æ³•æ¥å—ã€‚ä½œä¸ºä¸€ä¸ªä¸­å›½å¼€å‘è€…ï¼Œæˆ‘æ›´æ„¿æ„é€‰æ‹©å°Šé‡æˆ‘ä»¬çš„å·¥å…·ã€‚</p>
<p>è€Œ <strong>Trae</strong> åœ¨æ¥å…¥äº†æœ€æ–°çš„ <strong>Gemini 3</strong> æ¨¡å‹åï¼Œèƒ½åŠ›ç›´æ¥èµ·é£ã€‚ç‰¹åˆ«æ˜¯å®ƒå¯¹ <strong>MCP (Model Context Protocol)</strong> çš„æ·±åº¦é›†æˆï¼Œè®© AI å¯¹é¡¹ç›®ä¸Šä¸‹æ–‡çš„ç†è§£è¾¾åˆ°äº†ä¸€ä¸ªæ–°çš„é«˜åº¦ã€‚
åœ¨å†™è¿™ä¸ªå¡”ç½—ç‰Œé¡¹ç›®æ—¶ï¼ŒTrae çš„å¼€å‘æ•ˆç‡å®Œå…¨ä¸æ¯” Claude Code å·®ï¼Œç”šè‡³åœ¨å¤„ç†å¤æ‚çš„ä¸­æ–‡é€»è¾‘æ—¶æ›´èƒœä¸€ç­¹ã€‚</p>
<p><strong>ğŸ”¥ ä¾¿å®œã€å¼ºå¤§ã€è¿˜å°Šé‡ç”¨æˆ·ï¼Œè¿˜è¦ä»€ä¹ˆè‡ªè¡Œè½¦ï¼Ÿ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04e44a9740004b3f8d63f089b49c3190~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IqL5ZyGYWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767510702&amp;x-signature=RggV%2B3V5N7PpbWPwo%2F%2FkXsc%2F3Xo%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><em>å›¾æ³¨ï¼šè¿™å°±æ˜¯æˆ‘çš„â€œå¼€å‘ç°åœºâ€ï¼Œå…¨æ˜¯è‡ªç„¶è¯­è¨€å¯¹è¯ã€‚</em></p>
</blockquote>
<hr/>
<h3 data-id="heading-9">ğŸ’­ æœ€åçš„æ€è€ƒï¼šåœ¨ç®—æ³•çš„æµªæ½®é‡Œï¼Œå¯»æ‰¾äººç±»çš„åæ ‡</h3>
<p>ä¸‰ä¸ªæœˆå‰ï¼Œå½“æˆ‘è¿˜åœ¨ä¸ºé‚£ä¸ªå…«å­—ç®—å‘½ UI é€è¡Œè°ƒè¯• CSS æ—¶ï¼Œæˆ‘å†…å¿ƒå…¶å®å……æ»¡ç„¦è™‘ï¼š<strong>â€œå¦‚æœ AI ç¼–ç¨‹è¿›åŒ–å¾—è¿™ä¹ˆå¿«ï¼Œæˆ‘ä»¬è¿™äº›ç¨‹åºå‘˜å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿâ€</strong></p>
<p>ä»Šå¤©ï¼Œçœ‹ç€ Lumina Tarot åœ¨å±å¹•ä¸Šæµè½¬çš„å…‰å½±ï¼Œæˆ‘æ‰¾åˆ°äº†ç­”æ¡ˆã€‚</p>
<p>AI ç¡®å®æ‹¿èµ°äº†â€œæ¬ç –â€çš„ç“¦åˆ€ï¼Œä½†å®ƒäº¤è¿˜ç»™æˆ‘ä»¬çš„ï¼Œæ˜¯â€œè®¾è®¡â€çš„æƒæ–ã€‚
å®ƒè®©æˆ‘ä»¬ä¸å†å—å›°äº <code>Syntax Error</code> å’Œç¹ççš„é…ç½®ï¼Œä»è€Œèƒ½è…¾å‡ºæ‰‹æ¥ï¼Œå»æ€è€ƒé‚£äº›æ›´æœ¬è´¨çš„é—®é¢˜ï¼š
<strong>â€œä»€ä¹ˆæ˜¯å¥½çš„ä½“éªŒï¼Ÿâ€</strong>
<strong>â€œå¦‚ä½•ç”¨äº¤äº’ä¼ é€’æƒ…æ„Ÿï¼Ÿâ€</strong>
<strong>â€œå¦‚ä½•åœ¨è¿™ä¸ªç„¦è™‘çš„æ—¶ä»£ï¼Œç»™ç”¨æˆ·ä¸€ç‚¹ç‚¹æ…°è—‰ï¼Ÿâ€</strong></p>
<p><strong>æŠ€æœ¯é—¨æ§›çš„æ¶ˆå¤±ï¼Œå¹¶ä¸æ„å‘³ç€åˆ›é€ åŠ›çš„è´¬å€¼ï¼Œåè€Œæ˜¯åˆ›é€ åŠ›çš„è§£æ”¾ã€‚</strong>
å½“ä»£ç ä¸å†æ˜¯å£å’ï¼Œ<strong>å®¡ç¾ã€å…±æƒ…èƒ½åŠ›ã€å¯¹äººæ€§çš„æ´å¯Ÿ</strong>ï¼Œå°†æˆä¸ºæˆ‘ä»¬åœ¨è¿™ä¸ª AI æ—¶ä»£å”¯ä¸€çš„ã€ä¹Ÿæ˜¯æœ€åšå›ºçš„æŠ¤åŸæ²³ã€‚</p>
<p>Lumina Tarot çš„ä»£ç ä¹Ÿè®¸ 99% éƒ½æ˜¯ AI ç”Ÿæˆçš„ï¼Œä½†é‚£ä¸ªå†³å®šâ€œè¦ç”¨æ˜Ÿç©ºèƒŒæ™¯æ¥å®‰æŠšäººå¿ƒâ€çš„å¿µå¤´ï¼Œå±äºæˆ‘ï¼Œå±äºäººç±»ã€‚</p>
<p><strong>åˆ«è®©ä»£ç é™åˆ¶äº†ä½ çš„æƒ³è±¡åŠ›ï¼Œæ›´åˆ«è®©å¯¹ AI çš„ææƒ§ç¦é”¢äº†ä½ çš„å¯èƒ½æ€§ã€‚</strong>
å»åˆ›é€ å§ï¼Œå°±åƒä»æœªå—è¿‡ä¼¤ä¸€æ ·ã€‚ ğŸŒŸ</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Œâœï¸JSåŸå­ç¬”è®° ã€æ·±å…¥ç†è§£JSæ•°æ®ç±»å‹æ£€æµ‹çš„4ç§æ ¸å¿ƒæ–¹å¼]]></title>    <link>https://juejin.cn/post/7588104741611503626</link>    <guid>https://juejin.cn/post/7588104741611503626</guid>    <pubDate>2025-12-28T08:32:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588104741611503626" data-draft-id="7588104741611454474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Œâœï¸JSåŸå­ç¬”è®° ã€æ·±å…¥ç†è§£JSæ•°æ®ç±»å‹æ£€æµ‹çš„4ç§æ ¸å¿ƒæ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-28T08:32:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Maxkim"/> <meta itemprop="url" content="https://juejin.cn/user/2768993424260451"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Œâœï¸JSåŸå­ç¬”è®° ã€æ·±å…¥ç†è§£JSæ•°æ®ç±»å‹æ£€æµ‹çš„4ç§æ ¸å¿ƒæ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2768993424260451/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Maxkim
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:32:44.000Z" title="Sun Dec 28 2025 08:32:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨JavaScriptå¼€å‘ä¸­ï¼Œæ•°æ®ç±»å‹æ£€æµ‹æ˜¯åŸºç¡€ä¸”é«˜é¢‘çš„éœ€æ±‚ï¼Œå‡†ç¡®åˆ¤æ–­æ•°æ®ç±»å‹èƒ½å¸®åŠ©æˆ‘ä»¬è§„é¿è¯¸å¤šæ½œåœ¨bugã€‚Maxkimåœ¨è¿™é‡Œä¸ºå¤§å®¶æ•´ç†äº†4ç§æ ¸å¿ƒçš„æ•°æ®ç±»å‹æ£€æµ‹æ–¹å¼ï¼Œç»“åˆå…¶åŸç†ã€ç‰¹ç‚¹åŠé€‚ç”¨åœºæ™¯å±•å¼€è§£æã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€typeofï¼šæœ€åŸºç¡€çš„æ£€æµ‹æ–¹å¼</h2>
<p>typeofæ˜¯JSä¸­æœ€å¸¸ç”¨çš„åŸºç¡€æ•°æ®ç±»å‹æ£€æµ‹è¿ç®—ç¬¦ï¼Œä½¿ç”¨è¯­æ³•ç®€å•ï¼š<code>typeof è¦æ£€æµ‹çš„å€¼</code>ï¼Œå…¶è¿”å›å€¼æ˜¯ä¸€ä¸ª<strong>è¡¨ç¤ºæ•°æ®ç±»å‹çš„å­—ç¬¦ä¸²</strong>ï¼ˆå¦‚"string"ã€"number"ã€"boolean"ç­‰ï¼‰ã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹ç‚¹ï¼š</h3>
<h4 data-id="heading-2">1. ä¼˜åŠ¿</h4>
<p>å¯¹åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆstringã€numberã€booleanã€undefinedã€symbolã€bigintï¼‰çš„æ£€æµ‹ç»“æœå‡†ç¡®å¯é ï¼›å¯¹functionç±»å‹ä¹Ÿèƒ½æ­£ç¡®è¯†åˆ«ï¼Œè¿”å›"function"ã€‚</p>
<h4 data-id="heading-3">2. å±€é™æ€§</h4>
<p>å­˜åœ¨æ˜æ˜¾çš„â€œç›²ç‚¹â€â€”â€”<strong>æ•°ç»„ï¼ˆArrayï¼‰ã€æ™®é€šå¯¹è±¡ï¼ˆObjectï¼‰ã€nulléƒ½ä¼šè¢«åˆ¤æ–­ä¸º"object"</strong>ï¼Œæ— æ³•åŒºåˆ†è¿™ä¸‰è€…ã€‚</p>
<h4 data-id="heading-4">ç¤ºä¾‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1adbf2a083d241558be0792eaca691f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767515563&amp;x-signature=mKZeVWWfU%2F1ELL%2B40qnI1nw%2FCXE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">äºŒã€instanceofï¼šåŸºäºåŸå‹é“¾çš„å¼•ç”¨ç±»å‹æ£€æµ‹</h2>
<p>instanceof ç”¨äºæ£€æµ‹æŸä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæŒ‡å®šæ„é€ å‡½æ•°çš„å®ä¾‹ï¼Œå…¶æ ¸å¿ƒåŸç†æ˜¯ï¼šåˆ¤æ–­è¯¥æ„é€ å‡½æ•°çš„<strong>prototypeå±æ€§</strong>æ˜¯å¦å­˜åœ¨äº<strong>è¢«æ£€æµ‹å¯¹è±¡çš„åŸå‹é“¾ä¸Š</strong>ã€‚ä½¿ç”¨è¯­æ³•ï¼š<code>å¯¹è±¡ instanceof æ„é€ å‡½æ•°</code>ï¼Œè¿”å›å€¼ä¸ºå¸ƒå°”å€¼ï¼ˆtrue/falseï¼‰ã€‚</p>
<h3 data-id="heading-6">æ ¸å¿ƒç‰¹ç‚¹</h3>
<h4 data-id="heading-7">1. ä¼˜åŠ¿</h4>
<p>èƒ½å‡†ç¡®åŒºåˆ†å¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å¯ä»¥æ˜ç¡®åˆ¤æ–­æ•°ç»„ï¼ˆArrayï¼‰ã€å¯¹è±¡ï¼ˆObjectï¼‰ã€å‡½æ•°ï¼ˆFunctionï¼‰ç­‰<strong>å¼•ç”¨ç±»å‹</strong>çš„å…·ä½“ç±»å‹ã€‚</p>
<h4 data-id="heading-8">2. å±€é™æ€§</h4>
<ul>
<li>æ— æ³•æ£€æµ‹åŸºæœ¬æ•°æ®ç±»å‹ï¼šå› ä¸ºinstanceofæ£€æµ‹çš„æ˜¯åŸå‹é“¾å…³ç³»ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹æ˜¯å€¼ç±»å‹ï¼Œå¹¶éå¯¹è±¡ï¼Œä¸å­˜åœ¨åŸå‹é“¾ã€‚ä¾‹å¦‚ <code>"hello" instanceof String</code> ä¼šè¿”å›falseï¼ˆé™¤éæ˜¯é€šè¿‡new String("hello")åˆ›å»ºçš„åŒ…è£…å¯¹è±¡ï¼‰ã€‚</li>
<li>å—åŸå‹é“¾ä¿®æ”¹å½±å“ï¼šå¦‚æœæ‰‹åŠ¨ä¿®æ”¹äº†å¯¹è±¡çš„åŸå‹ï¼Œå¯èƒ½å¯¼è‡´instanceofçš„æ£€æµ‹ç»“æœä¸å‡†ç¡®ã€‚</li>
</ul>
<h4 data-id="heading-9">ç¤ºä¾‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/097d01e987d340a99462f39d28e2744d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767515563&amp;x-signature=dtfC8a9p5kE8DuYHG3MfCaAsIaw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">ä¸‰ã€constructorï¼šé€šè¿‡æ„é€ å‡½æ•°åˆ¤æ–­ç±»å‹</h2>
<p>æ¯ä¸ªå¯¹è±¡å®ä¾‹éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§ï¼ˆç»§æ‰¿è‡ªåŸå‹ï¼‰ï¼Œè¯¥å±æ€§æœ‰ä¸¤ä¸ªæ ¸å¿ƒä½œç”¨ï¼šä¸€æ˜¯æŒ‡å‘åˆ›å»ºè¯¥å®ä¾‹çš„æ„é€ å‡½æ•°ï¼›äºŒæ˜¯å€ŸåŠ©è¿™ä¸€ç‰¹æ€§å®ç°æ•°æ®ç±»å‹çš„åˆ¤æ–­ã€‚ä½¿ç”¨è¯­æ³•ï¼š<code>è¦æ£€æµ‹çš„å€¼.constructor === æ„é€ å‡½æ•°</code>ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚</p>
<h3 data-id="heading-11">æ ¸å¿ƒç‰¹ç‚¹</h3>
<h4 data-id="heading-12">1. ä¼˜åŠ¿</h4>
<p>ç›¸æ¯”typeofï¼Œèƒ½å‡†ç¡®åŒºåˆ†æ•°ç»„ã€å¯¹è±¡ç­‰å¼•ç”¨ç±»å‹ï¼›ç›¸æ¯”instanceofï¼Œä¸ä»…èƒ½æ£€æµ‹å¼•ç”¨ç±»å‹ï¼Œéƒ¨åˆ†åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆé™¤undefinedã€nullå¤–ï¼‰ä¹Ÿèƒ½é€šè¿‡å…¶åŒ…è£…å¯¹è±¡çš„constructoræ£€æµ‹ã€‚</p>
<h4 data-id="heading-13">ç¤ºä¾‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca8e2043e1414c2ca080d062ca1a93ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767515563&amp;x-signature=QnjDDysJGMaGgCB7HndwBytp3Sw%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-14">2. å±€é™æ€§</h4>
<p>å½“æ‰‹åŠ¨ä¿®æ”¹å¯¹è±¡çš„åŸå‹æ—¶ï¼Œconstructorå±æ€§å¯èƒ½ä¼šè¢«è¦†ç›–æˆ–æ”¹å˜ï¼Œæ­¤æ—¶å°±æ— æ³•å‡†ç¡®åˆ¤æ–­æ•°æ®ç±»å‹äº†ã€‚</p>
<h4 data-id="heading-15">ç¤ºä¾‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58acc2b56a294cd08199d0bbfdc5084e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767515563&amp;x-signature=20r8u%2Foi5qvrGskZD28e2qPOQDA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-16">å››ã€Object.prototype.toString.call()ï¼šæœ€ç²¾å‡†çš„â€œä¸‡èƒ½æ£€æµ‹æ³•â€</h2>
<p>è¿™æ˜¯JSä¸­æœ€ç²¾å‡†ã€æœ€é€šç”¨çš„æ•°æ®ç±»å‹æ£€æµ‹æ–¹å¼ï¼Œæ ¸å¿ƒåŸç†æ˜¯<strong>è°ƒç”¨ObjectåŸå‹ä¸Šæœªè¢«é‡å†™çš„toStringæ–¹æ³•</strong>ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ ¼å¼ä¸º"[object æ•°æ®ç±»å‹]"çš„å­—ç¬¦ä¸²ï¼Œä»è€Œå‡†ç¡®åˆ¤æ–­æ•°æ®ç±»å‹ã€‚ä½¿ç”¨è¯­æ³•ï¼š<code>Object.prototype.toString.call(è¦æ£€æµ‹çš„å€¼)</code>ã€‚</p>
<h3 data-id="heading-17">å…³é”®ç–‘é—®ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨obj.toString()ï¼Ÿå…ˆææ‡‚2ä¸ªåŸºç¡€æ¦‚å¿µ</h3>
<p>å…ˆæ‹†2ä¸ªå…³é”®æ¦‚å¿µï¼Œæ‡‚äº†å°±å¥½ç†è§£äº†ï¼š</p>
<p><strong>1. ä»€ä¹ˆæ˜¯â€œé‡å†™toStringæ–¹æ³•â€ï¼Ÿ</strong> toStringæ˜¯Objectè‡ªå¸¦çš„åŸå‹æ–¹æ³•ï¼ˆå¯ä»¥ç†è§£ä¸ºObjectç»™æ‰€æœ‰åä»£å¯¹è±¡ç•™çš„ä¸€ä¸ªâ€œåŸºç¡€åŠŸèƒ½â€ï¼‰ï¼Œä½†æ•°ç»„ï¼ˆArrayï¼‰ã€å‡½æ•°ï¼ˆFunctionï¼‰è¿™äº›Objectçš„â€œåä»£â€ï¼Œéƒ½è‡ªå·±æ”¹äº†è¿™ä¸ªåŠŸèƒ½â€”â€”æ¯”å¦‚æ•°ç»„çš„toStringæ”¹æˆäº†â€œè¿”å›æ•°ç»„é‡Œçš„å…ƒç´ æ‹¼æˆçš„å­—ç¬¦ä¸²â€ï¼ˆæ¯”å¦‚[1,2].toString()ä¼šå¾—åˆ°"1,2"ï¼‰ï¼Œå‡½æ•°çš„toStringæ”¹æˆäº†â€œè¿”å›å‡½æ•°çš„ä»£ç â€ï¼Œè¿™å°±æ˜¯â€œé‡å†™â€ã€‚</p>
<p><strong>2. ä»€ä¹ˆæ˜¯thisï¼Ÿè¿™é‡Œä¸ç”¨å¤æ‚ç†è§£ï¼</strong> thisåœ¨è¿™é‡Œå°±æŒ‡â€œå½“å‰è°ƒç”¨æ–¹æ³•çš„é‚£ä¸ªå¯¹è±¡â€ã€‚æ¯”å¦‚obj.toString()ï¼Œè¿™é‡Œçš„thiså°±æ˜¯objï¼›å¦‚æœæ˜¯Object.prototype.toString()ï¼Œé»˜è®¤thisæ˜¯Object.prototypeæœ¬èº«ï¼Œä¸æ˜¯æˆ‘ä»¬è¦æ£€æµ‹çš„objã€‚</p>
<p><strong>ç°åœ¨è§£é‡Šæ ¸å¿ƒé—®é¢˜ï¼š</strong> å¦‚æœç›´æ¥å†™obj.toString()ï¼Œå› ä¸ºobjï¼ˆæ¯”å¦‚æ•°ç»„ã€å‡½æ•°ï¼‰å·²ç»é‡å†™äº†toStringï¼Œæ‰€ä»¥æ‰§è¡Œçš„æ˜¯â€œæ”¹è¿‡åçš„åŠŸèƒ½â€ï¼Œæ²¡æ³•å¾—åˆ°â€œæ•°æ®ç±»å‹â€ï¼› è€ŒObject.prototype.toString.call(è¦æ£€æµ‹çš„å€¼)ï¼Œä½œç”¨æ˜¯â€œå¼ºè¡Œè®©è¦æ£€æµ‹çš„å€¼ï¼ˆæ¯”å¦‚objï¼‰å»æ‰§è¡ŒObjectåŸå‹ä¸Šé‚£ä¸ªæ²¡è¢«æ”¹çš„toStringæ–¹æ³•â€â€”â€”callçš„ä½œç”¨å°±æ˜¯â€œæ¢thisâ€ï¼ŒæŠŠtoStringæ–¹æ³•é‡Œçš„thisæ¢æˆæˆ‘ä»¬è¦æ£€æµ‹çš„é‚£ä¸ªå€¼ï¼Œè¿™æ ·è¿™ä¸ªåŸå§‹çš„toStringæ–¹æ³•å°±èƒ½è¯†åˆ«å‡ºthisï¼ˆä¹Ÿå°±æ˜¯è¦æ£€æµ‹çš„å€¼ï¼‰çš„çœŸå®ç±»å‹ï¼Œè¿”å›â€œ[object æ•°æ®ç±»å‹]â€äº†ã€‚</p>
<p><strong>ä¸¾ä¸ªé€šä¿—ä¾‹å­ï¼š</strong> æŠŠObjectåŸå‹çš„toStringæ¯”ä½œâ€œå®˜æ–¹èº«ä»½è¯†åˆ«å™¨â€ï¼ŒåŸæœ¬åªèƒ½è¯†åˆ«è‡ªå·±äººï¼›æ•°ç»„ã€å‡½æ•°è¿™äº›â€œåä»£â€æŠŠè‡ªå·±çš„â€œèº«ä»½è¯†åˆ«å™¨â€æ”¹æˆäº†â€œå±•ç¤ºè‡ªå·±å†…å®¹çš„å·¥å…·â€ã€‚ ç›´æ¥ç”¨obj.toString()ï¼Œå°±æ˜¯è®©objç”¨è‡ªå·±æ”¹åçš„å·¥å…·ï¼Œçœ‹ä¸åˆ°èº«ä»½ï¼› ç”¨callå°±æ˜¯â€œæŠŠå®˜æ–¹è¯†åˆ«å™¨å€Ÿæ¥ï¼Œå¯¹ç€objæ‰«ä¸€ä¸‹â€ï¼Œå°±èƒ½å¾—åˆ°çœŸå®èº«ä»½äº†ã€‚</p>
<h3 data-id="heading-18">æ ¸å¿ƒç‰¹ç‚¹</h3>
<h4 data-id="heading-19">1. ä¼˜åŠ¿</h4>
<p>æ£€æµ‹ç»“æœæœ€ç²¾å‡†ï¼Œèƒ½åŒºåˆ†æ‰€æœ‰JSæ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬nullã€undefinedã€æ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ã€æ—¥æœŸç­‰ã€‚</p>
<h4 data-id="heading-20">ç¤ºä¾‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b76c1acf1db2476f9fe965370c781f83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWF4a2lt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767515563&amp;x-signature=1mVY14XWgF4lxRjakoE6LKohY1k%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(<span class="hljs-literal">null</span>) â†’ <span class="hljs-string">"[object Null]"</span>ï¼ˆæ­£ç¡®ï¼‰
<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(<span class="hljs-literal">undefined</span>) â†’ <span class="hljs-string">"[object Undefined]"</span>ï¼ˆæ­£ç¡®ï¼‰
<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>([]) â†’ <span class="hljs-string">"[object Array]"</span>ï¼ˆæ­£ç¡®ï¼‰
<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>({}) â†’ <span class="hljs-string">"[object Object]"</span>ï¼ˆæ­£ç¡®ï¼‰
<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>.<span class="hljs-title function_">call</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()) â†’ <span class="hljs-string">"[object Date]"</span>ï¼ˆæ­£ç¡®ï¼‰

</code></pre>
<h4 data-id="heading-21">2. å±€é™æ€§</h4>
<p>è¯­æ³•ç›¸å¯¹ç¹çï¼Œéœ€è¦å®Œæ•´ä¹¦å†™è°ƒç”¨é“¾ï¼Œä½†è¿™ä¸€ç‚¹å¯ä»¥é€šè¿‡å°è£…å‡½æ•°è§£å†³ï¼ˆå¦‚å°è£…ä¸€ä¸ªgetTypeå‡½æ•°ï¼‰ã€‚</p>
<h2 data-id="heading-22">æ€»ç»“ï¼š4ç§æ£€æµ‹æ–¹å¼çš„é€‚ç”¨åœºæ™¯</h2>
<ul>
<li>å¿«é€Ÿæ£€æµ‹åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆæ’é™¤nullï¼‰ï¼šä½¿ç”¨typeofï¼Œç®€æ´é«˜æ•ˆã€‚</li>
<li>æ£€æµ‹å¼•ç”¨ç±»å‹æ˜¯å¦ä¸ºæŸä¸ªæ„é€ å‡½æ•°çš„å®ä¾‹ï¼šä½¿ç”¨instanceofï¼Œé€‚åˆåŸå‹é“¾ç›¸å…³çš„ç±»å‹åˆ¤æ–­ã€‚</li>
<li>ç®€å•åœºæ™¯ä¸‹çš„å¼•ç”¨ç±»å‹åŒºåˆ†ï¼šå¯ä½¿ç”¨constructorï¼Œä½†éœ€æ³¨æ„åŸå‹æ˜¯å¦è¢«ä¿®æ”¹ã€‚</li>
<li>éœ€è¦ç²¾å‡†åŒºåˆ†æ‰€æœ‰æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬nullã€æ•°ç»„ã€ç‰¹æ®Šå¯¹è±¡ç­‰ï¼‰ï¼šä¼˜å…ˆä½¿ç”¨Object.prototype.toString.call()ï¼Œè¿™æ˜¯æœ€å¯é çš„æ–¹æ¡ˆã€‚</li>
</ul>
<p>ä»¥ä¸Šå°±æ˜¯JSæ•°æ®ç±»å‹æ£€æµ‹çš„4ç§æ ¸å¿ƒæ–¹å¼ï¼ŒæŒæ¡å®ƒä»¬çš„åŸç†ä¸å·®å¼‚ï¼Œèƒ½è®©æˆ‘ä»¬åœ¨å¼€å‘ä¸­æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„æ£€æµ‹æ–¹æ¡ˆï¼Œæå‡ä»£ç çš„å¥å£®æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ ·å¼åˆ°ç»“æ„ï¼šTailwindCss + Fragment å¦‚ä½•è®© React ä»£ç æ›´å¹²å‡€ã€æ›´é«˜æ•ˆ]]></title>    <link>https://juejin.cn/post/7588365276190654502</link>    <guid>https://juejin.cn/post/7588365276190654502</guid>    <pubDate>2025-12-28T08:34:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588365276190654502" data-draft-id="7588104741611356170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ ·å¼åˆ°ç»“æ„ï¼šTailwindCss + Fragment å¦‚ä½•è®© React ä»£ç æ›´å¹²å‡€ã€æ›´é«˜æ•ˆ"/> <meta itemprop="keywords" content="React.js,CSS,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T08:34:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xhxxx"/> <meta itemprop="url" content="https://juejin.cn/user/3235201610941578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ ·å¼åˆ°ç»“æ„ï¼šTailwindCss + Fragment å¦‚ä½•è®© React ä»£ç æ›´å¹²å‡€ã€æ›´é«˜æ•ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3235201610941578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xhxxx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:34:50.000Z" title="Sun Dec 28 2025 08:34:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ é‡å¡‘ React å¼€å‘ä½“éªŒï¼šç”¨ Tailwind CSS æ‹’ç» Bad Stylesï¼Œç”¨ Fragment æ‹¥æŠ±çº¯å‡€ç»“æ„</h2>
<p>åœ¨ React é¡¹ç›®å¼€å‘ä¸­ï¼Œæœ‰ä¸¤ä¸ªçœ‹ä¼¼å¾®å°å´å½±å“æ·±è¿œçš„ç»†èŠ‚ï¼Œèƒ½æ˜¾è‘—æå‡ä»£ç è´¨é‡ä¸å¼€å‘ä½“éªŒï¼šä¸€æ˜¯ç”¨ <strong>Tailwind CSS æ›¿ä»£ä¼ ç»Ÿæ ·å¼å†™æ³•</strong>ï¼Œå½»åº•å‘Šåˆ«â€œBad Stylesâ€ï¼›äºŒæ˜¯ç”¨ <strong>Fragment æ›¿ä»£æ— æ„ä¹‰çš„åŒ…è£¹ div</strong>ï¼Œè®©ç»„ä»¶ç»“æ„æ›´å¹²å‡€ã€‚æœ¬æ–‡å°†ä»å®è·µå‡ºå‘ï¼Œåˆ†äº«è¿™ä¸¤é¡¹æŠ€æœ¯çš„æ ¸å¿ƒä»·å€¼ä¸ä½¿ç”¨æ–¹å¼ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€æ ·å¼çš„æ¼”è¿›ï¼šä» Bad Styles åˆ°åŸå­åŒ–</h2>
<h3 data-id="heading-2">ä¼ ç»Ÿ CSS çš„å›°å¢ƒ</h3>
<p>æ—©æœŸå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¹ æƒ¯ä¸ºæ¯ä¸ª UI å…ƒç´ ç¼–å†™ä¸“å±ç±»åï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"home-page-title"</span>&gt;</span>æ¬¢è¿<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"home-page-desc"</span>&gt;</span>è¿™æ˜¯é¦–é¡µæè¿°<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.home-page-title</span> { <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>; <span class="hljs-attribute">font-weight</span>: bold; }
<span class="hljs-selector-class">.home-page-desc</span> { <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">0.5rem</span>; }
</code></pre>
<p>è¿™ç§å†™æ³•çš„é—®é¢˜åœ¨äºï¼š</p>
<ul>
<li><strong>æ— æ³•å¤ç”¨</strong>ï¼šæ¢ä¸ªé¡µé¢å°±å¾—é‡æ–°å‘½åã€é‡å†™æ ·å¼ï¼›</li>
<li><strong>å‘½åæˆæœ¬é«˜</strong>ï¼šç±»åè¶Šæ¥è¶Šé•¿ï¼Œå¦‚ <code>user-profile-card-header-title</code>ï¼›</li>
<li><strong>ç»´æŠ¤å›°éš¾</strong>ï¼šè®¾è®¡è°ƒæ•´éœ€å…¨å±€æœç´¢æ›¿æ¢ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯å…¸å‹çš„ <strong>â€œBad Stylesâ€</strong> â€”â€”æ ·å¼ä¸ä¸šåŠ¡å¼ºè€¦åˆï¼Œç‰ºç‰²äº†å¯ç»´æŠ¤æ€§ã€‚</p>
<h3 data-id="heading-3">é¢å‘å¯¹è±¡ CSSï¼ˆOOCSSï¼‰çš„æ”¹è¿›</h3>
<p>OOCSS æå‡ºï¼šå°†æ ·å¼æ‹†è§£ä¸ºåŸºç¡€å•å…ƒï¼Œé€šè¿‡ç»„åˆæ„å»º UIã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-2xl font-bold"</span>&gt;</span>æ¬¢è¿<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-base text-gray-600 mt-2"</span>&gt;</span>è¿™æ˜¯é¦–é¡µæè¿°<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<p>è¿™ç§æ–¹å¼æå‡äº†å¤ç”¨æ€§ï¼Œä½†å¼€å‘è€…ä»éœ€æ‰‹åŠ¨å®šä¹‰ <code>.text-2xl</code>ã€<code>.mt-2</code> ç­‰åŸå­ç±»ï¼Œä¸”éš¾ä»¥ä¿è¯å›¢é˜Ÿä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-4">Tailwind CSSï¼šå¼€ç®±å³ç”¨çš„åŸå­åŒ–æ–¹æ¡ˆ</h3>
<p>Tailwind CSS å°† OOCSS ç†å¿µäº§å“åŒ–â€”â€”å®ƒ<strong>é¢„ç½®äº†æ•°åƒä¸ªç²¾å¿ƒè®¾è®¡çš„åŸå­ç±»</strong>ï¼Œè¦†ç›–å¸ƒå±€ã€é¢œè‰²ã€é—´è·ã€å“åº”å¼ã€äº¤äº’çŠ¶æ€ç­‰æ‰€æœ‰åœºæ™¯ã€‚ä½ æ— éœ€å†™ä»»ä½•è‡ªå®šä¹‰ CSSï¼Œç›´æ¥åœ¨ JSX ä¸­ç»„åˆå³å¯ã€‚äºæ˜¯JSX + TailWindCsså°±æ„æˆäº†UIç•Œé¢</p>
<h4 data-id="heading-5">åœ¨ Vite é¡¹ç›®ä¸­å¿«é€Ÿé›†æˆ</h4>
<p>é…ç½®è¿‡ç¨‹æä¸ºç®€å•ï¼š</p>
<ol>
<li>
<p>å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install tailwindcss @tailwindcss/vite
</code></pre>
</li>
<li>
<p>é…ç½® Vite æ’ä»¶ï¼ˆ<code>vite.config.js</code>ï¼‰ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> tailwindcss <span class="hljs-keyword">from</span> <span class="hljs-string">'@tailwindcss/vite'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>: [
   <span class="hljs-title function_">tailwindcss</span>(),
 ],
})
</code></pre>
<ol>
<li>å¯¼å…¥Tailwind CSSï¼š</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx">  @<span class="hljs-keyword">import</span> <span class="hljs-string">"tailwindcss"</span>;
</code></pre>
<p>å®Œæˆä»¥ä¸Šä¸‰æ­¥ï¼Œå³å¯åœ¨ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">ArticleCard</span> =(<span class="hljs-params"/>)=&gt;{
  <span class="hljs-comment">// JSX + tailwindcss(UIçš„ä¸€éƒ¨åˆ†) =UI</span>
  <span class="hljs-keyword">return</span>(
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-4 bg-white rounded-xl shadow hover:shadow-lg transition"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg font-bold"</span>&gt;</span>TailWindCss<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500 mt-2"</span>&gt;</span>
        ç”¨utlity class å¿«é€Ÿæ„å»ºUI
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>111<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>222<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"px-4 py-2 bg-gray-300 text-black rounded-md hover:bg-gray-400"</span>&gt;</span>é»˜è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ArticleCard</span>/&gt;</span>
  <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cbdc053d90940eb95ee3ae8c1483464~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGh4eHg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767515690&amp;x-signature=42G7%2BOU%2B%2BeQmPMDbFjOMLZ1yycE%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-6">TailWindCssçš„è®¾è®¡ç†è§£</h4>
<p>ç»†å¿ƒçš„ä½ å¯èƒ½æ³¨æ„åˆ°ï¼š<code>&lt;h1&gt;</code> å’Œ <code>&lt;h2&gt;</code> æ ‡ç­¾å¤±å»äº†æµè§ˆå™¨é»˜è®¤çš„å¤§å­—ä½“å’Œç²—ä½“æ ·å¼ã€‚<br/>
è¿™æ˜¯å› ä¸º Tailwind é‡‡ç”¨ <strong>â€œæ— æ ·å¼é‡ç½®â€ï¼ˆpreflightï¼‰ç­–ç•¥</strong>â€”â€”ä»é›¶å¼€å§‹æ„å»º UIï¼Œç¡®ä¿æ‰€æœ‰æ ·å¼æ˜¾å¼å¯æ§ã€‚</p>
<blockquote>
<p>è¿™ä¸æ˜¯ç¼ºé™·ï¼Œè€Œæ˜¯ä¼˜åŠ¿ï¼šå®ƒå¼ºåˆ¶ä½ ä¸»åŠ¨æ€è€ƒæ¯ä¸€ä¸ªè§†è§‰è¡¨ç°ï¼Œé¿å…éšå¼ä¾èµ–æµè§ˆå™¨é»˜è®¤æ ·å¼ã€‚</p>
</blockquote>
<h4 data-id="heading-7">ä¸ºä»€ä¹ˆ Tailwind CSS å¦‚æ­¤é«˜æ•ˆï¼Ÿ</h4>
<p>åœ¨ç†è§£å…¶ç”¨æ³•åï¼Œæˆ‘ä»¬æ¥æ€»ç»“å®ƒâ€œå¥½ç”¨â€çš„æœ¬è´¨åŸå› ï¼š</p>
<ol>
<li><strong>æ ¹æ²» Bad Styles</strong><br/>
åŸå­ç±»å¤©ç„¶è§£è€¦æ ·å¼ä¸ç»„ä»¶ï¼Œæœç»é‡å¤å’Œå‘½åç„¦è™‘ã€‚</li>
<li><strong>å¼€å‘æ•ˆç‡é£è·ƒ</strong><br/>
æ‰€æœ‰æ ·å¼åœ¨ JSX ä¸­å®Œæˆï¼Œæ— éœ€åˆ‡æ¢æ–‡ä»¶ï¼›é…åˆç¼–è¾‘å™¨æ’ä»¶ï¼Œæ™ºèƒ½æç¤º+å¯è§†åŒ–é¢„è§ˆè®©ç¼–ç å¦‚ä¸èˆ¬é¡ºæ»‘ã€‚</li>
<li><strong>å¼ºåˆ¶è®¾è®¡ä¸€è‡´æ€§</strong><br/>
æ‰€æœ‰å€¼ï¼ˆé¢œè‰²ã€é—´è·ç­‰ï¼‰æ¥è‡ªç»Ÿä¸€é…ç½®ï¼Œç¡®ä¿å…¨ç«™ UI é£æ ¼ä¸€è‡´ï¼Œæ–°äººä¹Ÿèƒ½å¿«é€Ÿäº§å‡ºè§„èŒƒä»£ç ã€‚</li>
<li><strong>ç”Ÿäº§ä½“ç§¯æå°</strong><br/>
æ„å»ºæ—¶è‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„ç±»ï¼Œæœ€ç»ˆ CSS é€šå¸¸ä»…å‡ å KBã€‚</li>
<li><strong>äº¤äº’ä¸å“åº”å¼å¼€ç®±å³ç”¨</strong><br/>
<code>hover:</code>ã€<code>focus:</code>ã€<code>md:</code> ç­‰å‰ç¼€è®©å¤æ‚çŠ¶æ€å’Œå“åº”å¼å¸ƒå±€å˜å¾—ç›´è§‚æ˜“å†™ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€Fragmentï¼šæ¶ˆé™¤æ— æ„ä¹‰çš„ DOM åŒ…è£¹</h2>
<p>æœ€åˆçš„ Fragment æ˜¯ä¸ºäº†<strong>æ€§èƒ½ä¼˜åŒ–</strong>è€Œæ¥ã€‚</p>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œé¢‘ç¹æ“ä½œçœŸå® DOM æ˜¯æ€§èƒ½çš„å¤§æ•Œã€‚æ—©åœ¨ React å‡ºç°ä¹‹å‰ï¼Œæµè§ˆå™¨å°±æä¾›äº† <code>DocumentFragment</code> æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚çœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> container =<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.container'</span>);
<span class="hljs-keyword">const</span> p1 =<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'p'</span>);
p1.<span class="hljs-property">textContent</span> =<span class="hljs-string">'1111'</span>;
<span class="hljs-keyword">const</span> p2 =<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'p'</span>);
p2.<span class="hljs-property">textContent</span> =<span class="hljs-string">'2222'</span>;
<span class="hljs-comment">// ä¸ºäº†æ€§èƒ½ä¼˜åŒ–è€Œæ¥</span>
<span class="hljs-keyword">const</span> fragment =<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
<span class="hljs-comment">//åœ¨å†…å­˜ä¸­æ“ä½œ</span>
fragment.<span class="hljs-title function_">appendChild</span>(p1);
fragment.<span class="hljs-title function_">appendChild</span>(p2);
container.<span class="hljs-title function_">appendChild</span>(fragment);
</code></pre>
<p>å¦‚æœæ²¡æœ‰ <code>fragment</code>ï¼Œæˆ‘ä»¬åªèƒ½ä¸€ä¸ªä¸€ä¸ªåœ°æŒ‚è½½ DOM å…ƒç´ ï¼š</p>
<pre><code class="hljs language-js" lang="js">container.<span class="hljs-title function_">appendChild</span>(p1); <span class="hljs-comment">// è§¦å‘ä¸€æ¬¡é‡æ’</span>
container.<span class="hljs-title function_">appendChild</span>(p2); <span class="hljs-comment">// å†è§¦å‘ä¸€æ¬¡é‡æ’</span>
</code></pre>
<p>æ¯ä¸€æ¬¡ <code>appendChild</code> éƒ½å¯èƒ½è¿«ä½¿æµè§ˆå™¨é‡æ–°è®¡ç®—å¸ƒå±€ï¼ˆreflowï¼‰å’Œé‡ç»˜ï¼ˆrepaintï¼‰ã€‚å½“æ’å…¥å¤šä¸ªå…ƒç´ æ—¶ï¼Œè¿™ç§å¼€é”€ä¼šè¿…é€Ÿç´¯ç§¯ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€‚</p>
<p>è€Œé€šè¿‡ <code>DocumentFragment</code>ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠæ‰€æœ‰å…ƒç´ <strong>åœ¨å†…å­˜ä¸­ç»„è£…å¥½</strong>â€”â€”è¿™ä¸ªè¿‡ç¨‹ä¸è§¦ç¢°çœŸå® DOMï¼Œé€Ÿåº¦æå¿«ã€å¼€é”€æå°ã€‚æœ€åä¸€æ¬¡æ€§å°†æ•´ä¸ªç‰‡æ®µæŒ‚è½½åˆ°é¡µé¢ï¼Œ<strong>åªè§¦å‘ä¸€æ¬¡æ¸²æŸ“æµç¨‹</strong>ã€‚</p>
<p><code>fragment</code> å°±åƒä¸€è¾†å‡ºç§Ÿè½¦ï¼šå®ƒæŠŠ <code>p1</code>ã€<code>p2</code> ç­‰ DOM å…ƒç´ æ¥ä¸Šè½¦ï¼Œåœ¨å†…å­˜ä¸­å®Œæˆè°ƒåº¦ï¼Œç„¶åé€åˆ° <code>container</code> é—¨å£ã€‚ä»»åŠ¡å®Œæˆåï¼Œå®ƒè‡ªå·±<strong>æ‚„ç„¶ç¦»å¼€ï¼Œä¸ä¼šå‡ºç°åœ¨ DOM æ ‘ä¸­</strong>ã€‚</p>
<p>React çš„ <code>Fragment</code> æ­£æ˜¯ç»§æ‰¿äº†è¿™ä¸€ç†å¿µã€‚</p>
<p>è¿‡å»ï¼Œç”±äº React è¦æ±‚ç»„ä»¶å¿…é¡»è¿”å›å•ä¸€æ ¹å…ƒç´ ï¼Œæˆ‘ä»¬å¸¸è¢«è¿«å†™ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span> {/* è¿™ä¸ª div æ²¡æœ‰è¯­ä¹‰ */}
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
<p>è¿™ä¸ªé¢å¤–çš„ <code>&lt;div&gt;</code> ä¼šï¼š</p>
<ul>
<li>å¢åŠ æ— ç”¨ DOM èŠ‚ç‚¹ï¼›</li>
<li>ç ´å HTML è¯­ä¹‰ï¼ˆå¦‚åœ¨Â <code>&lt;ul&gt;</code>Â å†…éƒ¨æ’å…¥ div ä¼šç ´ååˆ—è¡¨ç»“æ„ï¼‰ï¼›</li>
<li>å¯èƒ½å¹²æ‰° CSS å¸ƒå±€ï¼ˆå¦‚ flex æˆ– grid å®¹å™¨çš„ç›´æ¥å­é¡¹ï¼‰ã€‚</li>
</ul>
<p><strong>Fragment æ­£æ˜¯ä¸ºè§£å†³æ­¤é—®é¢˜è€Œç”Ÿ</strong>ã€‚å®ƒå…è®¸ä½ åˆ†ç»„å¤šä¸ªå…ƒç´ ï¼Œ<strong>ä¸æ¸²æŸ“ä»»ä½•é¢å¤–èŠ‚ç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/&gt;</span></span>
);
</code></pre>
<p>è¿™ä¸ä»…æ˜¯ç»“æ„ä¸Šçš„ç®€æ´ï¼Œæ›´æ˜¯å¯¹<strong>æ€§èƒ½åˆå¿ƒçš„å›å½’</strong>â€”â€”å°±åƒåŸç”Ÿ <code>DocumentFragment</code> ä¸€æ ·ï¼ŒReact Fragment è®©æˆ‘ä»¬åœ¨ç»„åˆå…ƒç´ çš„åŒæ—¶ï¼Œ<strong>é¿å…ä¸å¿…è¦çš„ DOM å¼€é”€</strong>ã€‚</p>
<p><strong>Fragment çš„ä»·å€¼åœ¨äº</strong>ï¼š</p>
<ul>
<li><strong>ä¿æŒ DOM çº¯å‡€</strong>ï¼šè¾“å‡ºç»“æ„ä¸æ„å›¾å®Œå…¨ä¸€è‡´ï¼›</li>
<li><strong>æå‡æ€§èƒ½</strong>ï¼šå‡å°‘æ— æ„ä¹‰çš„èŠ‚ç‚¹åˆ›å»ºä¸ diffï¼›</li>
<li><strong>ä¿éšœè¯­ä¹‰æ­£ç¡®</strong>ï¼šå°¤å…¶åœ¨è¡¨æ ¼ã€åˆ—è¡¨ç­‰å¯¹å­å…ƒç´ æœ‰ä¸¥æ ¼è¦æ±‚çš„åœºæ™¯ä¸­è‡³å…³é‡è¦ã€‚</li>
</ul>
<h2 data-id="heading-9">ç»“è¯­ï¼šç®€æ´å³åŠ›é‡ï¼Œæ˜¾å¼å³å¯é </h2>
<p>åœ¨ç°ä»£å‰ç«¯å·¥ç¨‹ä¸­ï¼Œ<strong>ä»£ç çš„ä¼˜é›…ä¸ä»…åœ¨äºåŠŸèƒ½å®ç°ï¼Œæ›´åœ¨äºè¡¨è¾¾æ–¹å¼</strong>ã€‚Tailwind CSS ä¸ React Fragment æ­£æ˜¯ä¸¤ä¸ªçœ‹ä¼¼å¾®å°ã€å®åˆ™æ·±åˆ»çš„â€œæ æ†ç‚¹â€â€”â€”å®ƒä»¬åˆ†åˆ«ä» <strong>æ ·å¼ç³»ç»Ÿ</strong> ä¸ <strong>ç»„ä»¶ç»“æ„</strong> ä¸¤ä¸ªç»´åº¦ï¼Œæ¨åŠ¨æˆ‘ä»¬èµ°å‘æ›´é«˜å“è´¨çš„å¼€å‘å®è·µã€‚</p>
<ul>
<li><strong>Tailwind CSS ä¸æ˜¯â€œå†™æ›´å¤š classâ€ï¼Œè€Œæ˜¯â€œå†™æ›´å°‘ã€æ›´ç¡®å®šçš„æ ·å¼â€</strong> ã€‚<br/>
å®ƒä»¥åŸå­åŒ–è®¾è®¡ç»ˆç»“å‘½åç„¦è™‘ï¼Œä»¥æ˜¾å¼å£°æ˜å–ä»£éšå¼ä¾èµ–ï¼Œè®© UI å¼€å‘å˜å¾—å¯é¢„æµ‹ã€å¯å¤ç”¨ã€å¯è§„æ¨¡åŒ–ã€‚</li>
<li><strong>Fragment ä¸æ˜¯â€œçœä¸€ä¸ª divâ€ï¼Œè€Œæ˜¯å¯¹ DOM è¯­ä¹‰ä¸æ€§èƒ½çš„å°Šé‡</strong>ã€‚<br/>
å®ƒè®©æˆ‘ä»¬æ‘†è„±ä¸ºæ¡†æ¶å¦¥åçš„å†—ä½™åŒ…è£¹ï¼Œè¾“å‡ºçœŸæ­£ç¬¦åˆ HTML è§„èŒƒã€å¸ƒå±€æ„å›¾æ¸…æ™°çš„ç»“æ„ã€‚</li>
</ul>
<p>è¿™ä¸¤é¡¹å®è·µï¼Œå…±åŒæŒ‡å‘ä¸€ä¸ªæ ¸å¿ƒç†å¿µï¼š<strong>å¥½çš„ä»£ç ï¼Œåº”å½“å¿ äºæ„å›¾ï¼Œè€Œéè¿å°±å·¥å…·</strong>ã€‚</p>
<p>å°†å®ƒä»¬èå…¥ä½ çš„æ—¥å¸¸å¼€å‘ï¼Œä¸ä»…æ˜¯æŠ€æœ¯é€‰å‹çš„ä¼˜åŒ–ï¼Œæ›´æ˜¯å·¥ç¨‹æ€ç»´çš„å‡çº§â€”â€”ä»æ­¤ï¼Œå‘Šåˆ« Bad Stylesï¼Œå‘Šåˆ«æ— æ„ä¹‰åµŒå¥—ï¼Œå†™å‡ºæ—¢é«˜æ•ˆåˆä¼˜é›…çš„ React åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é›¶åŸºç¡€ä¹Ÿèƒ½æ‡‚ï¼React Hookså®æˆ˜æ‰‹å†Œï¼šuseState/useEffectä¸Šæ‰‹å°±ä¼šï¼Œå‘Šåˆ«ç±»ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7588146449006559268</link>    <guid>https://juejin.cn/post/7588146449006559268</guid>    <pubDate>2025-12-28T09:03:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449006559268" data-draft-id="7588191506606768134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é›¶åŸºç¡€ä¹Ÿèƒ½æ‡‚ï¼React Hookså®æˆ˜æ‰‹å†Œï¼šuseState/useEffectä¸Šæ‰‹å°±ä¼šï¼Œå‘Šåˆ«ç±»ç»„ä»¶"/> <meta itemprop="keywords" content="æ¶æ„,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T09:03:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯ä½ çš„å°æ©˜å‘€"/> <meta itemprop="url" content="https://juejin.cn/user/1989458366301708"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é›¶åŸºç¡€ä¹Ÿèƒ½æ‡‚ï¼React Hookså®æˆ˜æ‰‹å†Œï¼šuseState/useEffectä¸Šæ‰‹å°±ä¼šï¼Œå‘Šåˆ«ç±»ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1989458366301708/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯ä½ çš„å°æ©˜å‘€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:03:39.000Z" title="Sun Dec 28 2025 09:03:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    31
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>React16.8 ä¹‹å‰ï¼Œå‡½æ•°ç»„ä»¶åªèƒ½ä½œä¸º<code>ã€Œæ— çŠ¶æ€ç»„ä»¶ã€</code>å­˜åœ¨ï¼Œæ‰€æœ‰éœ€è¦<strong>çŠ¶æ€ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸå¤„ç†</strong>çš„ä¸šåŠ¡éœ€æ±‚ï¼Œéƒ½åªèƒ½ä¾èµ–ç±»ç»„ä»¶å®ç°ã€‚è€Œ React16.8 æ¨å‡º Hooks ç‰¹æ€§åï¼Œå½»åº•é¢ è¦†äº†å‡½æ•°ç»„ä»¶çš„èƒ½åŠ›è¾¹ç•Œï¼Œè®©å‡½æ•°ç»„ä»¶å¯ä»¥ä¼˜é›…çš„å®ç°çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸã€å‰¯ä½œç”¨ç®¡ç†ç­‰æ‰€æœ‰åŠŸèƒ½ï¼Œä¹Ÿè®©å‡½æ•°ç»„ä»¶æˆä¸º React å®˜æ–¹ä¸»æ¨ã€ä¼ä¸šå¼€å‘çš„ä¸»æµé€‰å‹ã€‚</p>
<p>æœ¬æ–‡å°†<strong>æç®€å›é¡¾ç±»ç»„ä»¶æ ¸å¿ƒç”¨æ³•</strong>ï¼Œé‡ç‚¹ç²¾è®² React Hooks çš„ä½¿ç”¨ã€åŸç†å’Œå®æˆ˜æŠ€å·§ï¼Œåƒé€è¿™ç¯‡ï¼Œå½»åº•æŒæ¡ React16.8+ çš„ä¸»æµå¼€å‘æ–¹å¼ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€React16.8 ä¹‹å‰ï¼šç±»ç»„ä»¶ä¸€ç»Ÿå¤©ä¸‹</h2>
<p>åœ¨ Hooks å‡ºç°ä¹‹å‰ï¼Œæƒ³è¦å¼€å‘å¸¦ã€ŒçŠ¶æ€ã€çš„ React ç»„ä»¶ï¼Œ<strong>ç±»ç»„ä»¶æ˜¯å”¯ä¸€é€‰æ‹©</strong>ï¼Œæ ¸å¿ƒèƒ½åŠ›åªæœ‰ä¸¤ä¸ªï¼šçŠ¶æ€ç®¡ç† + ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚</p>
<h3 data-id="heading-1">âœ… ç±»ç»„ä»¶ æ ¸å¿ƒ2å¤§èƒ½åŠ›</h3>
<h4 data-id="heading-2">1. ç»„ä»¶çŠ¶æ€ç®¡ç†</h4>
<ul>
<li>
<p>åˆå§‹åŒ–çŠ¶æ€ï¼šé€šè¿‡ <code>this.state = {  }</code> å®šä¹‰ç»„ä»¶è‡ªèº«çš„å“åº”å¼çŠ¶æ€ï¼ˆçŠ¶æ€ï¼šä¿®æ”¹åä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“çš„å˜é‡ï¼‰</p>
</li>
<li>
<p>æ›´æ–°çŠ¶æ€ï¼š<strong><code>this.setState()</code></strong> <strong>å¿…é¡»é€šè¿‡  æ–¹æ³•ä¿®æ”¹çŠ¶æ€</strong>ï¼Œç¦æ­¢ç›´æ¥èµ‹å€¼ä¿®æ”¹ <code>this.state</code>ï¼Œè°ƒç”¨åä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</p>
</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-comment">// ç±»ç»„ä»¶æ ¸å¿ƒç¤ºä¾‹ï¼ˆå«çŠ¶æ€ç®¡ç†+ç”Ÿå‘½å‘¨æœŸï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>()
    <span class="hljs-comment">// åˆå§‹åŒ–å“åº”å¼çŠ¶æ€</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }
  }

  <span class="hljs-comment">// ç»„ä»¶é¦–æ¬¡åŠ è½½å®Œæˆåæ‰§è¡Œï¼ˆåˆå§‹åŒ–è¯·æ±‚/å®šæ—¶å™¨å¸¸ç”¨ï¼‰</span>
  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶åŠ è½½å®Œæ¯•'</span>);
  }

  <span class="hljs-comment">// çŠ¶æ€æ›´æ–°åæ‰§è¡Œ</span>
  <span class="hljs-title function_">componentDidUpdate</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶æ›´æ–°å®Œæ¯•'</span>);
  }

  <span class="hljs-comment">// çŠ¶æ€æ›´æ–°æ–¹æ³•ï¼šå¿…é¡»é€šè¿‡setStateä¿®æ”¹çŠ¶æ€</span>
  <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> })
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{this.state.count}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        {/* ç»‘å®šäº‹ä»¶éœ€é€šè¿‡bindç¡®ä¿thisæŒ‡å‘ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.add.bind(this)}</span>&gt;</span>add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
  }
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>
</code></pre>
<h4 data-id="heading-3">2. ç±»ç»„ä»¶æ ¸å¿ƒç”Ÿå‘½å‘¨æœŸï¼ˆ3ä¸ªå¿…ç”¨ï¼‰</h4>
<p>ç±»ç»„ä»¶é€šè¿‡å›ºå®šçš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œå¤„ç†ç»„ä»¶ã€ŒæŒ‚è½½ã€æ›´æ–°ã€å¸è½½ã€ä¸‰ä¸ªæ ¸å¿ƒé˜¶æ®µçš„ä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿæ˜¯ç±»ç»„ä»¶å¤„ç†å‰¯ä½œç”¨ï¼ˆè¯·æ±‚æ•°æ®ã€å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ï¼‰çš„å”¯ä¸€æ–¹å¼ï¼š</p>
<ol>
<li>
<p><code>componentDidMount</code>ï¼šç»„ä»¶<strong>åˆæ¬¡æŒ‚è½½å®Œæˆå</strong>æ‰§è¡Œä¸€æ¬¡ â†’ å¸¸ç”¨ï¼šå‘èµ·å¼‚æ­¥è¯·æ±‚ã€ç»‘å®šäº‹ä»¶ç›‘å¬ã€å¼€å¯å®šæ—¶å™¨</p>
</li>
<li>
<p><code>componentDidUpdate</code>ï¼šç»„ä»¶<strong>æ¯æ¬¡çŠ¶æ€æ›´æ–°æ¸²æŸ“å®Œæˆå</strong>æ‰§è¡Œ â†’ å¸¸ç”¨ï¼šæ ¹æ®çŠ¶æ€å˜åŒ–æ›´æ–°DOMã€å‘èµ·å…³è”è¯·æ±‚</p>
</li>
<li>
<p><code>componentWillUnmount</code>ï¼šç»„ä»¶<strong>å³å°†å¸è½½é”€æ¯å‰</strong>æ‰§è¡Œä¸€æ¬¡ â†’ å¸¸ç”¨ï¼šæ¸…é™¤å®šæ—¶å™¨ã€è§£ç»‘äº‹ä»¶ç›‘å¬ã€å–æ¶ˆè¯·æ±‚ï¼Œåšæ”¶å°¾æ¸…ç†å·¥ä½œ</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-4">äºŒã€React16.8+ æ–°æ—¶ä»£ï¼šå‡½æ•°ç»„ä»¶ + Hooks å°ç¥ï¼ˆå…¨æ–‡é‡ç‚¹ï¼‰</h2>
<p>React å›¢é˜Ÿæ¨å‡º Hooks çš„æ ¸å¿ƒç›®çš„ï¼š<strong>ä¸ºå‡½æ•°ç»„ä»¶èµ‹èƒ½</strong>ï¼Œè®©åŸæœ¬ã€Œæ— çŠ¶æ€ã€æ— ç”Ÿå‘½å‘¨æœŸã€çš„å‡½æ•°ç»„ä»¶ï¼Œæ‹¥æœ‰å’Œç±»ç»„ä»¶åŒç­‰çš„èƒ½åŠ›ï¼ŒåŒæ—¶è§£å†³ç±»ç»„ä»¶ <code>this</code> æŒ‡å‘æ··ä¹±ã€ç”Ÿå‘½å‘¨æœŸé€»è¾‘åˆ†æ•£ã€å¤ç”¨çŠ¶æ€é€»è¾‘ç¹ççš„ç—›ç‚¹ã€‚</p>
<h3 data-id="heading-5">âœ¨ æ ¸å¿ƒç»“è®º</h3>
<ol>
<li>
<p>React17+ é¡¹ç›®å¼€å‘ï¼Œ<strong>ä¼˜å…ˆä½¿ç”¨ã€å‡½æ•°ç»„ä»¶ + Hooksã€‘</strong> æ˜¯ç»å¯¹ä¸»æµ</p>
</li>
<li>
<p>Hooks ç¿»è¯‘ä¸ºã€Œé’©å­ã€ï¼Œæœ¬è´¨æ˜¯ï¼š<strong>ä¸ºå‡½æ•°ç»„ä»¶æä¾›çš„ä¸€ç³»åˆ—å†…ç½®å‡½æ•°ï¼Œè®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰çŠ¶æ€ã€ç”Ÿå‘½å‘¨æœŸã€å‰¯ä½œç”¨ç®¡ç†èƒ½åŠ›</strong></p>
</li>
<li>
<p>æ ¸å¿ƒæ ¸å¿ƒ2ä¸ªåŸºç¡€é’©å­ï¼š<code>useState</code>ï¼ˆçŠ¶æ€ç®¡ç†ï¼‰ + <code>useEffect</code>ï¼ˆç”Ÿå‘½å‘¨æœŸ+å‰¯ä½œç”¨ç®¡ç†ï¼‰ï¼ŒæŒæ¡è¿™2ä¸ªï¼Œå°±èƒ½å®Œæˆ90%çš„ä¸šåŠ¡å¼€å‘ï¼</p>
</li>
</ol>
<h2 data-id="heading-6">ä¸‰ã€æ ¸å¿ƒHook â‘ ï¼šuseState â€” å‡½æ•°ç»„ä»¶çš„ã€ŒçŠ¶æ€ç®¡ç†ç¥å™¨ã€</h2>
<h3 data-id="heading-7">âœ… ä½œç”¨</h3>
<p>ä¸º<strong>å‡½æ•°ç»„ä»¶å®šä¹‰å“åº”å¼çŠ¶æ€</strong>ï¼Œå®Œç¾æ›¿ä»£ç±»ç»„ä»¶çš„ <code>this.state</code> + <code>this.setState</code>ï¼Œæ˜¯å‡½æ•°ç»„ä»¶èƒ½æ‹¥æœ‰ã€Œè‡ªèº«çŠ¶æ€ã€çš„æ ¸å¿ƒã€‚</p>
<h3 data-id="heading-8">âœ… è¯­æ³•æ ¼å¼</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span> <span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨å¯¼å…¥</span>

<span class="hljs-comment">// è¯­æ³•ï¼šconst [çŠ¶æ€å˜é‡, çŠ¶æ€æ›´æ–°å‡½æ•°] = useState(åˆå§‹å€¼)</span>
<span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">const</span> [list, setList] = <span class="hljs-title function_">useState</span>([])
<span class="hljs-keyword">const</span> [userInfo, setUserInfo] = <span class="hljs-title function_">useState</span>({<span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>})
</code></pre>
<ul>
<li>
<p>æ•°ç»„è§£æ„èµ‹å€¼ï¼Œå˜é‡åå¯è‡ªå®šä¹‰ï¼Œè¯­ä¹‰åŒ–å‘½åå³å¯</p>
</li>
<li>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<strong>çŠ¶æ€å˜é‡</strong>ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼Œæ— éœ€ <code>this</code></p>
</li>
<li>
<p>ç¬¬äºŒä¸ªå‚æ•°ï¼š<strong>çŠ¶æ€æ›´æ–°å‡½æ•°</strong>ï¼Œè°ƒç”¨è¯¥å‡½æ•°ä¿®æ”¹çŠ¶æ€ï¼Œ<code>ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</code></p>
</li>
<li>
<p>æ‹¬å·å†…ï¼š<strong>çŠ¶æ€åˆå§‹å€¼</strong>ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆæ•°å­—ã€æ•°ç»„ã€å¯¹è±¡ã€null/undefinedï¼‰</p>
</li>
</ul>
<h3 data-id="heading-9">âœ… åŸºç¡€ä½¿ç”¨ï¼ˆæ›¿ä»£ç±»ç»„ä»¶çŠ¶æ€ï¼‰</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å®šä¹‰çŠ¶æ€ï¼šè®¡æ•°åˆå§‹å€¼ä¸º0</span>
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)

  <span class="hljs-comment">// ä¿®æ”¹çŠ¶æ€ï¼šè°ƒç”¨setCountï¼Œç›´æ¥æ›´æ–°ï¼Œæ— thisã€æ— ç»‘å®š</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>)
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è®¡æ•°ï¼š{count}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{add}</span>&gt;</span>add<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>//ç‚¹å‡»åŠ ä¸€
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p align="left"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c153ebc28e8343578bff218d16da7163~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767523729&amp;x-signature=BtUSfvih0O2p%2BwxvEWzxCZNjQZ8%3D" alt="ScreenShot_2025-12-28_165205_759.png" loading="lazy"/></p>
<h3 data-id="heading-10">âœ… è¿›é˜¶ç”¨æ³•</h3>
<h4 data-id="heading-11">1. å¤æ‚çŠ¶æ€åˆå§‹åŒ–ï¼ˆå‡½æ•°å¼åˆå§‹åŒ–ï¼‰</h4>
<p>å¦‚æœçŠ¶æ€çš„åˆå§‹å€¼éœ€è¦<strong>å¤æ‚è®¡ç®—ã€å¼‚æ­¥è·å–ã€è€—æ—¶æ“ä½œ</strong>ï¼Œç›´æ¥å†™å€¼ä¼šå¯¼è‡´ç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½æ‰§è¡Œè¯¥è®¡ç®—ï¼Œæ€§èƒ½æµªè´¹ã€‚æ­¤æ—¶ä¼ å…¥ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼Œè¯¥å‡½æ•°åªä¼šåœ¨ç»„ä»¶<strong>åˆæ¬¡æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡</strong>ï¼Œè¿”å›åˆå§‹å€¼ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// æ¨èï¼šå¤æ‚åˆå§‹åŒ–ç”¨å‡½æ•°ï¼Œåªæ‰§è¡Œä¸€æ¬¡</span>
<span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">'å¼ ä¸‰'</span> <span class="hljs-comment">// å¯å†™ä»»æ„å¤æ‚é€»è¾‘</span>
})
</code></pre>
<h4 data-id="heading-12">2. ä¾èµ–åŸçŠ¶æ€æ›´æ–°ï¼ˆå‡½æ•°å¼æ›´æ–°ï¼‰</h4>
<p>å½“æ–°çŠ¶æ€çš„å–å€¼<strong>ä¾èµ–äºä¸Šä¸€æ¬¡çš„æ—§çŠ¶æ€</strong>æ—¶ï¼Œæ¨èç»™æ›´æ–°å‡½æ•°ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°å°±æ˜¯ã€Œæœ€æ–°çš„æ—§çŠ¶æ€ã€ï¼Œç¡®ä¿æ‹¿åˆ°çš„çŠ¶æ€å€¼æ°¸è¿œæ˜¯æœ€æ–°çš„ï¼Œé¿å…å¼‚æ­¥æ›´æ–°å¯¼è‡´çš„å–å€¼é”™è¯¯ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// å‡½æ•°å¼æ›´æ–°ï¼šprevCount æ˜¯æœ€æ–°çš„æ—§çŠ¶æ€</span>
  <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prevCount</span> =&gt;</span> prevCount + <span class="hljs-number">1</span>)
}
<span class="hljs-comment">// æ•°ç»„/å¯¹è±¡åŒç†</span>
<span class="hljs-keyword">const</span> [list, setList] = <span class="hljs-title function_">useState</span>([])
<span class="hljs-keyword">const</span> <span class="hljs-title function_">pushItem</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setList</span>(<span class="hljs-function"><span class="hljs-params">prevList</span> =&gt;</span> [...prevList, <span class="hljs-string">'æ–°æ•°æ®'</span>])
}
</code></pre>
<h3 data-id="heading-13">âœ… useState æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li>
<p>ä¸€ä¸ªç»„ä»¶ä¸­å¯ä»¥<strong>å¤šæ¬¡è°ƒç”¨</strong>ï¼Œå®šä¹‰å¤šä¸ªç‹¬ç«‹çŠ¶æ€ï¼Œäº’ä¸å½±å“ï¼ŒçŠ¶æ€ç®¡ç†æ›´çµæ´»</p>
</li>
<li>
<p>æ— éœ€å¤„ç† <code>this</code> æŒ‡å‘é—®é¢˜ï¼Œç±»ç»„ä»¶çš„ <code>this.setState</code> ç»å¸¸éœ€è¦ç»‘å®š <code>this</code>ï¼ŒHooks å®Œå…¨è§„é¿</p>
</li>
<li>
<p>å†™æ³•æç®€ï¼Œæ— å†—ä½™æ¨¡æ¿ä»£ç ï¼Œä»£ç é‡æ¯”ç±»ç»„ä»¶å‡å°‘50%ä»¥ä¸Š</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-14">å››ã€æ ¸å¿ƒHook â‘¡ï¼šuseEffect â€” å‡½æ•°ç»„ä»¶çš„ã€Œç”Ÿå‘½å‘¨æœŸ+å‰¯ä½œç”¨ä¸‡èƒ½é’©å­ã€</h2>
<h3 data-id="heading-15">âœ… æ ¸å¿ƒå®šä¹‰</h3>
<p><code>useEffect</code> æ˜¯å‡½æ•°ç»„ä»¶ä¸­å¤„ç† <strong>å‰¯ä½œç”¨</strong> çš„å”¯ä¸€å…¥å£ï¼ŒåŒæ—¶<strong>å®Œç¾æ›¿ä»£ç±»ç»„ä»¶çš„3ä¸ªæ ¸å¿ƒç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œæ˜¯å‡½æ•°ç»„ä»¶çš„é‡ä¸­ä¹‹é‡ã€‚</p>
<blockquote>
<p>å‰¯ä½œç”¨ï¼šæŒ‡å’Œç»„ä»¶æ¸²æŸ“æ— å…³çš„æ“ä½œï¼Œæ¯”å¦‚ï¼šå¼‚æ­¥è¯·æ±‚ã€å¼€å¯/æ¸…é™¤å®šæ—¶å™¨ã€ç»‘å®š/è§£ç»‘äº‹ä»¶ç›‘å¬ã€æ“ä½œDOMã€æœ¬åœ°å­˜å‚¨ç­‰ã€‚</p>
</blockquote>
<h3 data-id="heading-16">âœ… æ ¸å¿ƒè¯­æ³•</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span> <span class="hljs-comment">// é…å¥—å¯¼å…¥</span>

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ã€æ ¸å¿ƒæ‰§è¡Œä½“ã€‘ï¼šéœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨é€»è¾‘</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰§è¡Œå‰¯ä½œç”¨'</span>)
  
  <span class="hljs-comment">// ã€æ¸…ç†å‡½æ•°ã€‘ï¼šå¯é€‰ï¼Œreturn ä¸€ä¸ªå‡½æ•°ï¼Œç»„ä»¶å¸è½½æ—¶æ‰§è¡Œ</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶å¸è½½ï¼Œæ‰§è¡Œæ¸…ç†å·¥ä½œ'</span>)
  }
}, [ä¾èµ–é¡¹æ•°ç»„]) <span class="hljs-comment">// æ ¸å¿ƒï¼šé€šè¿‡ä¾èµ–é¡¹æ§åˆ¶æ‰§è¡Œæ—¶æœº</span>
</code></pre>
<h3 data-id="heading-17">âœ… å…³é”®è§„åˆ™ï¼ˆé‡ä¸­ä¹‹é‡ï¼Œå¿…èƒŒï¼‰</h3>
<p><code>useEffect</code> çš„æ‰§è¡Œæ—¶æœºï¼Œ<strong>å®Œå…¨ç”±ç¬¬äºŒä¸ªå‚æ•°ã€ä¾èµ–é¡¹æ•°ç»„ã€‘å†³å®š</strong>ï¼Œè¿™ä¹Ÿæ˜¯å’Œç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸€ä¸€å¯¹åº”çš„æ ¸å¿ƒï¼Œ4ç§æ ¸å¿ƒç”¨æ³•è¦†ç›–æ‰€æœ‰ä¸šåŠ¡åœºæ™¯ï¼Œå¯¹åº”ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸç²¾å‡†æ— å·®ï¼š</p>
<h4 data-id="heading-18">1. æ— ä¾èµ–é¡¹æ•°ç»„ â†’ ç­‰ä»·äº ç±»ç»„ä»¶ <code>componentDidMount + componentDidUpdate</code></h4>
<pre><code class="hljs language-jsx" lang="jsx">
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶åˆæ¬¡åŠ è½½æ‰§è¡Œ + æ¯æ¬¡æ¸²æŸ“æ›´æ–°åéƒ½æ‰§è¡Œ'</span>)
})
</code></pre>
<p>ç»„ä»¶<strong>åˆæ¬¡æŒ‚è½½å®Œæˆåæ‰§è¡Œä¸€æ¬¡</strong>ï¼Œä¹‹å<code>æ¯æ¬¡ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼ˆä»»æ„çŠ¶æ€å˜åŒ–ï¼‰éƒ½ä¼šå†æ¬¡æ‰§è¡Œ</code>ï¼Œé€‚åˆéœ€è¦ã€Œæ¯æ¬¡æ›´æ–°éƒ½åŒæ­¥æ‰§è¡Œã€çš„é€»è¾‘ã€‚</p>
<h4 data-id="heading-19">2. ç©ºä¾èµ–é¡¹æ•°ç»„ <code>[]</code> â†’ ç­‰ä»·äº ç±»ç»„ä»¶ <code>componentDidMount</code></h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åªåœ¨ç»„ä»¶ã€åˆæ¬¡æŒ‚è½½ã€‘æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ°¸ä¹…ä¸é‡å¤æ‰§è¡Œ'</span>)
  <span class="hljs-comment">// ã€æœ€å¸¸ç”¨åœºæ™¯ã€‘ï¼šå‘èµ·åˆå§‹åŒ–å¼‚æ­¥è¯·æ±‚ã€å¼€å¯å®šæ—¶å™¨ã€ç»‘å®šå…¨å±€äº‹ä»¶</span>
}, [])
</code></pre>
<p>âœ… æ ¸å¿ƒé«˜é¢‘ç”¨æ³•ï¼š<strong>ç»„ä»¶åŠ è½½å®Œæˆååªè¯·æ±‚ä¸€æ¬¡æ¥å£</strong>ï¼ŒReactå¼€å‘ä¸­80%çš„æ¥å£è¯·æ±‚éƒ½ç”¨è¿™ç§å†™æ³•ï¼</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// åˆå§‹åŒ–è¯·æ±‚æ•°æ®</span>
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'æ¥å£åœ°å€'</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸ'</span>, data)
    })
}, [])
</code></pre>
<h4 data-id="heading-20">3. ä¾èµ–é¡¹æ•°ç»„å¸¦æŒ‡å®šå˜é‡ <code>[x,y]</code> â†’ ç­‰ä»·äº ç±»ç»„ä»¶ <code>componentDidUpdate</code></h4>
<pre><code class="hljs language-jsx" lang="jsx">
<span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
<span class="hljs-comment">// ä¾èµ– count å˜é‡</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶åˆæ¬¡åŠ è½½æ‰§è¡Œä¸€æ¬¡ + æ¯æ¬¡ count å˜åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡'</span>)
  <span class="hljs-comment">// åœºæ™¯ï¼šæ ¹æ®æŸä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œåšå…³è”é€»è¾‘ï¼ˆæ¯”å¦‚ï¼šæœç´¢å…³é”®è¯å˜åŒ–é‡æ–°è¯·æ±‚æ¥å£ï¼‰</span>
}, [count])
</code></pre>
<p>ç²¾å‡†ç›‘å¬æŒ‡å®šçŠ¶æ€ï¼Œåªæœ‰<strong>ä¾èµ–çš„å˜é‡å‘ç”Ÿæ”¹å˜</strong>æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œå‰¯ä½œç”¨é€»è¾‘ï¼Œæ˜¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒå†™æ³•ï¼Œä¹Ÿæ˜¯ç±»ç»„ä»¶ <code>componentDidUpdate</code> çš„ç²¾å‡†å¹³æ›¿ã€‚</p>
<h4 data-id="heading-21">4. useEffect è¿”å›æ¸…ç†å‡½æ•° â†’ ç­‰ä»·äº ç±»ç»„ä»¶ <code>componentWillUnmount</code></h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æŒ‚è½½æ—¶ï¼šå¼€å¯å®šæ—¶å™¨</span>
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>)
  }, <span class="hljs-number">1000</span>)
  
  <span class="hljs-comment">// å¸è½½æ—¶ï¼šæ‰§è¡Œreturnçš„æ¸…ç†å‡½æ•° â†’ æ¸…é™¤å®šæ—¶å™¨</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">clearInterval</span>(timer)
  }
}, [])
</code></pre>
<p>âœ… æ ¸å¿ƒè§„åˆ™ï¼š<code>return</code> çš„å›è°ƒå‡½æ•°ï¼Œä¼šåœ¨<strong>ç»„ä»¶å³å°†å¸è½½é”€æ¯å‰</strong> æ‰§è¡Œä¸€æ¬¡ï¼Œä¸“é—¨ç”¨æ¥åšã€Œæ¸…ç†å·¥ä½œã€ï¼Œæ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨ã€è§£ç»‘äº‹ä»¶ç›‘å¬ã€å–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚ï¼Œå’Œç±»ç»„ä»¶ <code>componentWillUnmount</code> åŠŸèƒ½å®Œå…¨ä¸€è‡´ï¼Œä¸”å†™æ³•æ›´ä¼˜é›…ï¼Œ<strong>å‰¯ä½œç”¨å’Œæ¸…ç†é€»è¾‘å†™åœ¨åŒä¸€ä¸ªåœ°æ–¹</strong>ï¼Œä¸ä¼šé—æ¼ã€‚</p>
<hr/>
<h2 data-id="heading-22">äº”ã€ç±»ç»„ä»¶ VS å‡½æ•°ç»„ä»¶+Hooks å®æˆ˜å¯¹æ¯”ï¼ˆæ ¸å¿ƒç²¾åï¼‰</h2>
<h3 data-id="heading-23">âœ… æ ¸å¿ƒç»“è®ºï¼šå†™æ³•å¯¹æ¯”ï¼Œå·®è·ä¸€ç›®äº†ç„¶</h3>
<p>åŒæ ·å®ç°ã€Œè®¡æ•°å™¨+å®šæ—¶å™¨ã€åŠŸèƒ½ï¼Œç±»ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶+Hooksï¼Œ<strong>ä»£ç é‡ã€å¯è¯»æ€§ã€ç®€æ´åº¦</strong> å®Œèƒœï¼</p>
<h4 data-id="heading-24">ç±»ç»„ä»¶å®ç°ï¼ˆç¹çã€å†—ä½™ã€æœ‰thisé—®é¢˜ï¼‰</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  state = { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }
  timer = <span class="hljs-literal">null</span>

  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æŒ‚è½½å¼€å¯å®šæ—¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">count</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> })
    }, <span class="hljs-number">1000</span>)
  }

  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¸è½½æ¸…é™¤å®šæ—¶å™¨</span>
    <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>)
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{this.state.count}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>
  }
}
</code></pre>
<h4 data-id="heading-25">å‡½æ•°ç»„ä»¶+Hookså®ç°ï¼ˆæç®€ã€ä¼˜é›…ã€æ— å†—ä½™ï¼‰</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>)
    }, <span class="hljs-number">1000</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer)
  }, [])

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-26">âœ… Hooks æ ¸å¿ƒä¼˜åŠ¿ï¼ˆä¸ºä»€ä¹ˆæˆä¸ºä¸»æµï¼Ÿï¼‰</h3>
<ol>
<li>
<p><strong><code>this</code></strong> <strong>å½»åº•æŠ›å¼ƒ å…³é”®å­—</strong>ï¼šç±»ç»„ä»¶çš„æœ€å¤§ç—›ç‚¹å°±æ˜¯<code>this</code> æŒ‡å‘æ··ä¹±ï¼Œéœ€è¦ bindã€ç®­å¤´å‡½æ•°ç­‰æ–¹å¼å¤„ç†ï¼ŒHooks å®Œå…¨è§„é¿ï¼Œä»£ç æ›´å¹²å‡€ã€‚</p>
</li>
<li>
<p><strong>é€»è¾‘æ›´èšåˆ</strong>ï¼šç±»ç»„ä»¶ä¸­ï¼Œä¸€ä¸ªä¸šåŠ¡çš„ã€Œåˆå§‹åŒ–+æ¸…ç†ã€é€»è¾‘ä¼šåˆ†æ•£åœ¨ <code>componentDidMount</code> å’Œ <code>componentWillUnmount</code> ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼ŒHooks ä¸­å†™åœ¨åŒä¸€ä¸ª <code>useEffect</code> é‡Œï¼Œé€»è¾‘é—­ç¯ï¼Œå¯è¯»æ€§æ‹‰æ»¡ã€‚</p>
</li>
<li>
<p><strong>æ— å†—ä½™æ¨¡æ¿ä»£ç </strong>ï¼šæ— éœ€å†™ <code>class</code>ã€<code>constructor</code>ã€<code>render</code>ï¼Œä¸€ä¸ªå‡½æ•°æå®šæ‰€æœ‰é€»è¾‘ï¼Œä»£ç é‡ç›´æ¥å‡å°‘ä¸€åŠä»¥ä¸Šã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€å¤ç”¨æ›´ç®€å•</strong>ï¼šHooks å¯ä»¥è½»æ¾æŠ½ç¦»å…¬å…±é€»è¾‘ï¼ˆæ¯”å¦‚è¯·æ±‚å°è£…ã€è¡¨å•å¤„ç†ï¼‰ï¼Œå®ç°è·¨ç»„ä»¶å¤ç”¨ï¼Œç±»ç»„ä»¶çš„å¤ç”¨éœ€è¦é«˜é˜¶ç»„ä»¶/HOCï¼Œå†™æ³•ç¹çã€‚</p>
</li>
<li>
<p><strong>å®˜æ–¹ä¸»æ¨æ–¹å‘</strong>ï¼šReact å›¢é˜Ÿæ˜ç¡®è¡¨ç¤ºï¼Œæœªæ¥çš„æ–°ç‰¹æ€§éƒ½ä¼šä¼˜å…ˆæ”¯æŒ Hooksï¼Œç±»ç»„ä»¶ä¸å†æ–°å¢ç‰¹æ€§ï¼Œä»…åšå…¼å®¹ç»´æŠ¤ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-27">å…­ã€å¿…é¿çš„2ä¸ª Hooks å¸¸è§å‘ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h2>
<h3 data-id="heading-28">å‘1ï¼šç›´æ¥ä¿®æ”¹ useState çš„çŠ¶æ€å€¼ï¼Œä¸è°ƒç”¨æ›´æ–°å‡½æ•°</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹æ•°ç»„/å¯¹è±¡ï¼Œä¸ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> [list, setList] = <span class="hljs-title function_">useState</span>([])
<span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params"/>) =&gt; {
  list.<span class="hljs-title function_">push</span>(<span class="hljs-string">'test'</span>)
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¿…é¡»è°ƒç”¨æ›´æ–°å‡½æ•°ï¼Œè¿”å›æ–°çš„çŠ¶æ€å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setList</span>([...list, <span class="hljs-string">'test'</span>])
}
</code></pre>
<blockquote>
<p>æ ¸å¿ƒåŸç†ï¼šReact çš„çŠ¶æ€æ˜¯ã€Œä¸å¯å˜çš„ã€ï¼Œåªæœ‰é€šè¿‡æ›´æ–°å‡½æ•°è¿”å›æ–°å€¼ï¼ŒReact æ‰èƒ½æ£€æµ‹åˆ°çŠ¶æ€å˜åŒ–ï¼Œè§¦å‘æ¸²æŸ“ã€‚</p>
</blockquote>
<h3 data-id="heading-29">å‘2ï¼šuseEffect ä¾èµ–é¡¹æ•°ç»„ã€Œæ¼å†™/é”™å†™ã€</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šä½¿ç”¨äº†countå˜é‡ï¼Œä½†ä¾èµ–é¡¹æ•°ç»„ä¸­æ²¡å†™ï¼Œå¯¼è‡´æ‹¿åˆ°çš„countæ°¸è¿œæ˜¯åˆå§‹å€¼</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>)
  }, <span class="hljs-number">1000</span>)
}, [])

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šè¦ä¹ˆè¡¥å…¨ä¾èµ–é¡¹ï¼Œè¦ä¹ˆç”¨å‡½æ•°å¼æ›´æ–°</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>)
  }, <span class="hljs-number">1000</span>)
}, [])
</code></pre>
<hr/>
<h2 data-id="heading-30">ä¸ƒã€æ€»ç»“ï¼ˆç²¾ç‚¼æ ¸å¿ƒï¼Œç›´å‡»é‡ç‚¹ï¼‰</h2>
<h3 data-id="heading-31">1. ç‰ˆæœ¬åˆ†ç•Œæ¸…æ™°</h3>
<ul>
<li>
<p>React16.8 å‰ï¼šç±»ç»„ä»¶æ˜¯å”¯ä¸€èƒ½å†™ã€Œå®Œæ•´åŠŸèƒ½ã€çš„ç»„ä»¶ï¼Œé <code>this.state/setState</code> ç®¡ç†çŠ¶æ€ï¼Œé 3ä¸ªç”Ÿå‘½å‘¨æœŸå¤„ç†å‰¯ä½œç”¨ã€‚</p>
</li>
<li>
<p>React16.8+ï¼šå‡½æ•°ç»„ä»¶ + Hooks æˆä¸ºç»å¯¹ä¸»æµï¼Œç±»ç»„ä»¶èƒ½åšçš„ï¼Œå‡½æ•°ç»„ä»¶éƒ½èƒ½åšï¼Œä¸”åšå¾—æ›´å¥½ã€‚</p>
</li>
</ul>
<h3 data-id="heading-32">2. æ ¸å¿ƒ2ä¸ªHookï¼Œæå®šæ‰€æœ‰å¼€å‘éœ€æ±‚</h3>
<ol>
<li>
<p><strong>useState</strong>ï¼šç»™å‡½æ•°ç»„ä»¶åŠ ã€ŒçŠ¶æ€ã€ï¼Œæ›¿ä»£ç±»ç»„ä»¶çš„ <code>this.state + setState</code>ï¼Œæ—  this çƒ¦æ¼ï¼Œå†™æ³•æç®€ã€‚</p>
</li>
<li>
<p><strong>useEffect</strong>ï¼šç»™å‡½æ•°ç»„ä»¶åŠ ã€Œç”Ÿå‘½å‘¨æœŸ+å‰¯ä½œç”¨ã€ï¼Œä¸€ä¸ªé’©å­é¡¶ç±»ç»„ä»¶3ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œé€»è¾‘èšåˆï¼Œæ˜¯å¼€å‘æ ¸å¿ƒã€‚</p>
</li>
</ol>
<h3 data-id="heading-33">3. ç»ˆæé€‰å‹å»ºè®®</h3>
<ul>
<li>
<p>æ–°é¡¹ç›®å¼€å‘ï¼š<strong>æ— è„‘ç”¨ å‡½æ•°ç»„ä»¶ + Hooks</strong>ï¼Œè¿™æ˜¯Reactçš„æœªæ¥ï¼Œä¹Ÿæ˜¯ä¼ä¸šæ‹›è˜çš„ä¸»æµè¦æ±‚ã€‚</p>
</li>
<li>
<p>ç»´æŠ¤è€é¡¹ç›®ï¼šç±»ç»„ä»¶çš„çŸ¥è¯†è¶³å¤Ÿçœ‹æ‡‚å³å¯ï¼Œæ— éœ€æ–°å¢ç±»ç»„ä»¶ä»£ç ã€‚</p>
</li>
<li>
<p>æ ¸å¿ƒå¿ƒæ³•ï¼š<strong>Hooksçš„æœ¬è´¨æ˜¯ã€Œä¸ºå‡½æ•°ç»„ä»¶èµ‹èƒ½ã€ï¼Œè®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰ç±»ç»„ä»¶çš„æ‰€æœ‰èƒ½åŠ›ï¼ŒåŒæ—¶è§£å†³ç±»ç»„ä»¶çš„ç—›ç‚¹</strong>ã€‚ âœ¨</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elips-Coreï¼šè½»é‡çº§ Node.js Web æ¡†æ¶æ ¸å¿ƒå®ç°]]></title>    <link>https://juejin.cn/post/7588365276190736422</link>    <guid>https://juejin.cn/post/7588365276190736422</guid>    <pubDate>2025-12-28T09:23:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588365276190736422" data-draft-id="7588109656041816110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elips-Coreï¼šè½»é‡çº§ Node.js Web æ¡†æ¶æ ¸å¿ƒå®ç°"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-12-28T09:23:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="404æ˜Ÿçƒçš„çŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/193147068224126"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elips-Coreï¼šè½»é‡çº§ Node.js Web æ¡†æ¶æ ¸å¿ƒå®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/193147068224126/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    404æ˜Ÿçƒçš„çŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:23:35.000Z" title="Sun Dec 28 2025 09:23:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>Elips-Core æ˜¯ä¸€ä¸ªåŸºäº Koa.js æ„å»ºçš„è½»é‡çº§ Web åº”ç”¨æ¡†æ¶æ ¸å¿ƒæ¨¡å—ã€‚å®ƒé€šè¿‡çº¦å®šä¼˜äºé…ç½®çš„è®¾è®¡ç†å¿µï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„è‡ªåŠ¨åŒ–åŠ è½½æœºåˆ¶ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºç»“æ„æ¸…æ™°ã€æ˜“äºç»´æŠ¤çš„ Node.js åº”ç”¨ç¨‹åºã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒè®¾è®¡ç†å¿µ</h2>
<p>Elips-Core é‡‡ç”¨äº†ç°ä»£ Web æ¡†æ¶çš„å…¸å‹è®¾è®¡æ¨¡å¼ï¼š</p>
<ol>
<li><strong>çº¦å®šä¼˜äºé…ç½®</strong>ï¼šé€šè¿‡é¢„å®šä¹‰çš„ç›®å½•ç»“æ„å’Œå‘½åè§„èŒƒï¼Œè‡ªåŠ¨åŠ è½½åº”ç”¨ç»„ä»¶</li>
<li><strong>æ¨¡å—åŒ–æ¶æ„</strong>ï¼šå°†åº”ç”¨åŠŸèƒ½åˆ’åˆ†ä¸ºç‹¬ç«‹çš„æ¨¡å—ï¼ˆControllerã€Serviceã€Middleware ç­‰ï¼‰</li>
<li><strong>åˆ†å±‚è®¾è®¡</strong>ï¼šæ¸…æ™°çš„ä¸šåŠ¡é€»è¾‘åˆ†å±‚ï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§</li>
<li><strong>è‡ªåŠ¨åŒ–åŠ è½½</strong>ï¼šé€šè¿‡ Loader æœºåˆ¶è‡ªåŠ¨æ‰«æå¹¶æ³¨å†Œåº”ç”¨ç»„ä»¶</li>
</ol>
<h2 data-id="heading-2">æ¶æ„ç»„æˆ</h2>
<h3 data-id="heading-3">1. æ ¸å¿ƒå…¥å£ (<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">index.js</a>)</h3>
<p>æ¡†æ¶çš„å¯åŠ¨å…¥å£ï¼Œè´Ÿè´£æ•´ä¸ªåº”ç”¨çš„åˆå§‹åŒ–æµç¨‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»º Koa å®ä¾‹</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Koa</span>()

<span class="hljs-comment">// åˆå§‹åŒ–åº”ç”¨é…ç½®</span>
app.<span class="hljs-property">baseDir</span> = process.<span class="hljs-title function_">cwd</span>()          <span class="hljs-comment">// é¡¹ç›®æ ¹ç›®å½•</span>
app.<span class="hljs-property">bussinessPath</span> = <span class="hljs-string">'./app'</span>           <span class="hljs-comment">// ä¸šåŠ¡ä»£ç ç›®å½•</span>
app.<span class="hljs-property">env</span> = <span class="hljs-title function_">env</span>()                       <span class="hljs-comment">// ç¯å¢ƒé…ç½®</span>
</code></pre>
<p><strong>å¯åŠ¨æµç¨‹</strong>ï¼š</p>
<ol>
<li>åˆ›å»º Koa åº”ç”¨å®ä¾‹</li>
<li>è®¾ç½®åŸºç¡€è·¯å¾„å’Œç¯å¢ƒé…ç½®</li>
<li>ä¾æ¬¡æ‰§è¡Œå„ä¸ª Loader åŠ è½½åº”ç”¨ç»„ä»¶</li>
<li>æ³¨å†Œå…¨å±€ä¸­é—´ä»¶</li>
<li>å¯åŠ¨ HTTP æœåŠ¡</li>
</ol>
<h3 data-id="heading-4">2. ç¯å¢ƒé…ç½®ç®¡ç† (<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">env.js</a>)</h3>
<p>æä¾›ç»Ÿä¸€çš„ç¯å¢ƒåˆ¤æ–­æ¥å£ï¼Œæ”¯æŒå¤šç¯å¢ƒéƒ¨ç½²ï¼š</p>
<ul>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">isLocal()</a> - åˆ¤æ–­æ˜¯å¦ä¸ºæœ¬åœ°å¼€å‘ç¯å¢ƒ</li>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">isBeta()</a> - åˆ¤æ–­æ˜¯å¦ä¸ºæµ‹è¯•ç¯å¢ƒ</li>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">isProd()</a> - åˆ¤æ–­æ˜¯å¦ä¸ºç”Ÿäº§ç¯å¢ƒ</li>
<li><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">get()</a> - è·å–å½“å‰ç¯å¢ƒåç§°</li>
</ul>
<p>ç¯å¢ƒé…ç½®é€šè¿‡ <code>process.env._ENV</code> ç¯å¢ƒå˜é‡æ§åˆ¶ï¼Œé»˜è®¤ä¸º <code>local</code>ã€‚</p>
<h3 data-id="heading-5">3. é…ç½®åŠ è½½å™¨ (<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">loader/config.js</a>)</h3>
<p>å®ç°å¤šç¯å¢ƒé…ç½®ç®¡ç†ç­–ç•¥ï¼š</p>
<p><strong>é…ç½®æ–‡ä»¶ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">config/
  â”œâ”€â”€ config.<span class="hljs-keyword">default</span>.js  # é»˜è®¤é…ç½®ï¼ˆæ‰€æœ‰ç¯å¢ƒå…±äº«ï¼‰
  â”œâ”€â”€ config.local.js    # æœ¬åœ°å¼€å‘é…ç½®
  â”œâ”€â”€ config.beta.js     # æµ‹è¯•ç¯å¢ƒé…ç½®
  â””â”€â”€ config.prod.js     # ç”Ÿäº§ç¯å¢ƒé…ç½®
</code></pre>
<p><strong>åŠ è½½ç­–ç•¥</strong>ï¼š</p>
<ol>
<li>é¦–å…ˆåŠ è½½ <code>config.default.js</code> ä½œä¸ºåŸºç¡€é…ç½®</li>
<li>æ ¹æ®å½“å‰ç¯å¢ƒåŠ è½½å¯¹åº”çš„ç¯å¢ƒé…ç½®æ–‡ä»¶</li>
<li>ç¯å¢ƒé…ç½®è¦†ç›–é»˜è®¤é…ç½®ï¼Œåˆå¹¶åæŒ‚è½½åˆ° <code>app.config</code></li>
</ol>
<p>è¿™ç§è®¾è®¡å…è®¸å¼€å‘è€…å°†é€šç”¨é…ç½®é›†ä¸­ç®¡ç†ï¼ŒåŒæ—¶ä¸ºä¸åŒç¯å¢ƒæä¾›å®šåˆ¶åŒ–é…ç½®ã€‚</p>
<h3 data-id="heading-6">4. ä¸­é—´ä»¶åŠ è½½å™¨ (<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">loader/middleware.js</a>)</h3>
<p>è‡ªåŠ¨æ‰«æå¹¶åŠ è½½è‡ªå®šä¹‰ä¸­é—´ä»¶ï¼š</p>
<p><strong>ç›®å½•ç»“æ„ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">app/middleware/
  â”œâ”€â”€ auth/
  â”‚   â””â”€â”€ jwt-auth.js
  â””â”€â”€ logger/
      â””â”€â”€ access-logger.js
</code></pre>
<p><strong>è®¿é—®æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">app.<span class="hljs-property">middlewares</span>.<span class="hljs-property">auth</span>.<span class="hljs-property">jwtAuth</span>      <span class="hljs-comment">// jwt-auth.js</span>
app.<span class="hljs-property">middlewares</span>.<span class="hljs-property">logger</span>.<span class="hljs-property">accessLogger</span>  <span class="hljs-comment">// access-logger.js</span>
</code></pre>
<p><strong>ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>æ”¯æŒå¤šçº§ç›®å½•ç»„ç»‡</li>
<li>è‡ªåŠ¨å°†è¿å­—ç¬¦å‘½åè½¬æ¢ä¸ºé©¼å³°å¼ï¼ˆkebab-case â†’ camelCaseï¼‰</li>
<li>ä¸­é—´ä»¶å‡½æ•°æ¥æ”¶ <code>app</code> å®ä¾‹ä½œä¸ºå‚æ•°</li>
</ul>
<h3 data-id="heading-7">5. Controller åŠ è½½å™¨ (<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">loader/controller.js</a>)</h3>
<p>è´Ÿè´£åŠ è½½æ‰€æœ‰ä¸šåŠ¡æ§åˆ¶å™¨ï¼š</p>
<p><strong>å·¥ä½œæµç¨‹</strong>ï¼š</p>
<ol>
<li>æ‰«æ <code>app/controller</code> ç›®å½•ä¸‹çš„æ‰€æœ‰ <code>.js</code> æ–‡ä»¶</li>
<li>æ ¹æ®æ–‡ä»¶è·¯å¾„åˆ›å»ºå±‚çº§å‘½åç©ºé—´</li>
<li>å®ä¾‹åŒ– Controller ç±»å¹¶æŒ‚è½½åˆ° <code>app.controller</code></li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">app<span class="hljs-operator">/</span>controller<span class="hljs-operator">/</span>
  â””â”€â”€ <span class="hljs-keyword">user</span><span class="hljs-operator">/</span>
      â””â”€â”€ <span class="hljs-keyword">user</span><span class="hljs-operator">-</span>info.js  â†’ app.controller.user.userInfo
</code></pre>
<p>Controller é€šå¸¸å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œæ¥æ”¶è¯·æ±‚å¹¶è¿”å›å“åº”ã€‚</p>
<h3 data-id="heading-8">6. Service åŠ è½½å™¨ (<code>loader/service.js</code>)</h3>
<p>åŠ è½½ä¸šåŠ¡é€»è¾‘æœåŠ¡å±‚ï¼š</p>
<p><strong>è®¾è®¡ç›®çš„</strong>ï¼š</p>
<ul>
<li>å°†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ä» Controller ä¸­åˆ†ç¦»</li>
<li>æä¾›å¯å¤ç”¨çš„ä¸šåŠ¡åŠŸèƒ½æ¨¡å—</li>
<li>ä¾¿äºå•å…ƒæµ‹è¯•å’Œç»´æŠ¤</li>
</ul>
<p><strong>åŠ è½½æœºåˆ¶</strong>ï¼š
ä¸ Controller åŠ è½½å™¨ç±»ä¼¼ï¼Œè‡ªåŠ¨æ‰«æ <code>app/service</code> ç›®å½•ï¼Œæ”¯æŒå¤šçº§ç›®å½•ç»“æ„ï¼ŒæŒ‚è½½åˆ° <code>app.service</code>ã€‚</p>
<h3 data-id="heading-9">7. è·¯ç”±åŠ è½½å™¨ (<code>loader/router.js</code>)</h3>
<p>ç»Ÿä¸€ç®¡ç†åº”ç”¨è·¯ç”±ï¼š</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š</p>
<ol>
<li>åˆ›å»º KoaRouter å®ä¾‹</li>
<li>æ‰«æ <code>app/router</code> ç›®å½•ä¸‹çš„æ‰€æœ‰è·¯ç”±æ–‡ä»¶</li>
<li>æ‰§è¡Œè·¯ç”±æ–‡ä»¶ï¼Œä¼ å…¥ <code>app</code> å’Œ <code>router</code> å®ä¾‹</li>
<li>æ·»åŠ å…œåº•è·¯ç”±ï¼ˆ404 å¤„ç†ï¼‰</li>
<li>å°†è·¯ç”±æ³¨å†Œåˆ° Koa åº”ç”¨</li>
</ol>
<p><strong>å…œåº•æœºåˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">router.<span class="hljs-title function_">get</span>(<span class="hljs-string">'*'</span>, <span class="hljs-keyword">async</span> (ctx, next) =&gt; {
  ctx.<span class="hljs-property">status</span> = <span class="hljs-number">302</span>
  ctx.<span class="hljs-title function_">redirect</span>(app?.<span class="hljs-property">options</span>?.<span class="hljs-property">homePage</span> ?? <span class="hljs-string">'/'</span>)
})
</code></pre>
<p>å¯¹äºæœªåŒ¹é…çš„è·¯ç”±ï¼Œè‡ªåŠ¨é‡å®šå‘åˆ°é¦–é¡µï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-10">8. è·¯ç”±éªŒè¯åŠ è½½å™¨ (<code>loader/router-schema.js</code>)</h3>
<p>é›†æˆ JSON Schema å’Œ AJV è¿›è¡Œ API å‚æ•°æ ¡éªŒï¼š</p>
<p><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼š</p>
<ul>
<li>åŠ è½½ <code>app/router-schema</code> ç›®å½•ä¸‹çš„æ‰€æœ‰ schema å®šä¹‰</li>
<li>å°†æ‰€æœ‰ schema åˆå¹¶åˆ° <code>app.routerSchema</code> å¯¹è±¡</li>
<li>é…åˆä¸­é—´ä»¶å®ç°è‡ªåŠ¨åŒ–å‚æ•°éªŒè¯</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// router-schema/user.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-string">'/api/user/create'</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
    <span class="hljs-attr">properties</span>: {
      <span class="hljs-attr">username</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> },
      <span class="hljs-attr">email</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>, <span class="hljs-attr">format</span>: <span class="hljs-string">'email'</span> }
    },
    <span class="hljs-attr">required</span>: [<span class="hljs-string">'username'</span>, <span class="hljs-string">'email'</span>]
  }
}
</code></pre>
<p>é€šè¿‡å£°æ˜å¼çš„æ–¹å¼å®šä¹‰ API æ¥å£çº¦æŸï¼Œæé«˜æ¥å£çš„å¥å£®æ€§ã€‚</p>
<h3 data-id="heading-11">9. æ‰©å±•åŠŸèƒ½åŠ è½½å™¨ (<code>loader/extend.js</code>)</h3>
<p>æä¾›æ¡†æ¶æ‰©å±•èƒ½åŠ›ï¼š</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ‰«æ <code>app/extend</code> ç›®å½•ä¸‹çš„æ‰©å±•æ¨¡å—</li>
<li>å°†æ‰©å±•ç›´æ¥æŒ‚è½½åˆ° <code>app</code> å¯¹è±¡ä¸Šï¼ˆè€ŒéæŒ‚è½½åˆ° <code>app.extend</code>ï¼‰</li>
<li>æ”¯æŒé˜²å†²çªæ£€æŸ¥ï¼Œé¿å…è¦†ç›–å·²æœ‰å±æ€§</li>
</ul>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// app/extend/helper.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">app</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">formatDate</span>(<span class="hljs-params">date</span>) {
      <span class="hljs-comment">// æ—¥æœŸæ ¼å¼åŒ–é€»è¾‘</span>
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
app.<span class="hljs-property">helper</span>.<span class="hljs-title function_">formatDate</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>())
</code></pre>
<p>è¿™ç§è®¾è®¡å…è®¸å¼€å‘è€…æ ¹æ®ä¸šåŠ¡éœ€æ±‚æ‰©å±•æ¡†æ¶åŠŸèƒ½ï¼Œè€Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚</p>
<h2 data-id="heading-12">åŠ è½½é¡ºåºè®¾è®¡</h2>
<p>æ¡†æ¶çš„åŠ è½½é¡ºåºç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œç¡®ä¿ä¾èµ–å…³ç³»æ­£ç¡®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">1. middlewareLoader     <span class="hljs-comment"># åŠ è½½ä¸­é—´ä»¶ï¼ˆä¾›åç»­ä½¿ç”¨ï¼‰</span>
2. routerSchemaLoader   <span class="hljs-comment"># åŠ è½½è·¯ç”±éªŒè¯è§„åˆ™</span>
3. controllerLoader     <span class="hljs-comment"># åŠ è½½æ§åˆ¶å™¨</span>
4. serviceLoader        <span class="hljs-comment"># åŠ è½½æœåŠ¡å±‚</span>
5. configLoader         <span class="hljs-comment"># åŠ è½½é…ç½®æ–‡ä»¶</span>
6. extendLoader         <span class="hljs-comment"># åŠ è½½æ‰©å±•åŠŸèƒ½</span>
7. å…¨å±€ä¸­é—´ä»¶æ³¨å†Œ       <span class="hljs-comment"># æ³¨å†Œå…¨å±€ä¸­é—´ä»¶</span>
8. routerLoader         <span class="hljs-comment"># æœ€ååŠ è½½è·¯ç”±ï¼ˆä¾èµ–ä¸Šè¿°æ‰€æœ‰ç»„ä»¶ï¼‰</span>
</code></pre>
<p>è¿™ç§é¡ºåºç¡®ä¿äº†ï¼š</p>
<ul>
<li>Controller å¯ä»¥ä½¿ç”¨ Service</li>
<li>Router å¯ä»¥ä½¿ç”¨ Controller å’Œ Middleware</li>
<li>æ‰€æœ‰ç»„ä»¶éƒ½å¯ä»¥è®¿é—® Config</li>
</ul>
<h2 data-id="heading-13">å‘½åçº¦å®š</h2>
<p>æ¡†æ¶ç»Ÿä¸€é‡‡ç”¨ä»¥ä¸‹å‘½åè½¬æ¢è§„åˆ™ï¼š</p>
<ul>
<li><strong>æ–‡ä»¶å‘½å</strong>ï¼š<code>kebab-case</code>ï¼ˆçŸ­æ¨ªçº¿åˆ†éš”ï¼‰
<ul>
<li>ä¾‹å¦‚ï¼š<code>user-info.js</code>ã€<code>auth-middleware.js</code></li>
</ul>
</li>
<li><strong>ä»£ç è®¿é—®</strong>ï¼š<code>camelCase</code>ï¼ˆé©¼å³°å‘½åï¼‰
<ul>
<li>ä¾‹å¦‚ï¼š<code>app.controller.userInfo</code>ã€<code>app.middlewares.authMiddleware</code></li>
</ul>
</li>
</ul>
<p><strong>è½¬æ¢é€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ­£åˆ™æ›¿æ¢ï¼šå°† -x æˆ– _x è½¬æ¢ä¸ºå¤§å†™ X</span>
name.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[_-][a-z]/ig</span>, <span class="hljs-function">(<span class="hljs-params">s</span>) =&gt;</span> s.<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">toUpperCase</span>())
</code></pre>
<p>è¿™ç§çº¦å®šä½¿å¾—æ–‡ä»¶å‘½åç¬¦åˆ Unix é£æ ¼ï¼Œè€Œä»£ç è®¿é—®ç¬¦åˆ JavaScript è§„èŒƒã€‚</p>
<h2 data-id="heading-14">æŠ€æœ¯äº®ç‚¹</h2>
<h3 data-id="heading-15">1. è‡ªåŠ¨åŒ–åŠ è½½</h3>
<p>é€šè¿‡ <code>glob</code> æ¨¡å—å®ç°æ–‡ä»¶ç³»ç»Ÿæ‰«æï¼Œè‡ªåŠ¨å‘ç°å’ŒåŠ è½½åº”ç”¨ç»„ä»¶ï¼Œå‡å°‘æ‰‹åŠ¨é…ç½®å·¥ä½œã€‚</p>
<h3 data-id="heading-16">2. è·¨å¹³å°å…¼å®¹</h3>
<p>ä½¿ç”¨ <code>path.sep</code> å¤„ç†è·¯å¾„åˆ†éš”ç¬¦ï¼Œç¡®ä¿ä»£ç åœ¨ Windowsã€Linuxã€macOS ç­‰ä¸åŒæ“ä½œç³»ç»Ÿä¸Šæ­£å¸¸è¿è¡Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { sep } = path  <span class="hljs-comment">// Windows: '\' , Unix: '/'</span>
<span class="hljs-keyword">const</span> middlewarePath = path.<span class="hljs-title function_">resolve</span>(app.<span class="hljs-property">bussinessPath</span>, <span class="hljs-string">`.<span class="hljs-subst">${sep}</span>middleware`</span>)
</code></pre>
<h3 data-id="heading-17">3. å®¹é”™å¤„ç†</h3>
<p>åœ¨å…³é”®åŠ è½½ç¯èŠ‚æ·»åŠ äº†å¼‚å¸¸æ•è·ï¼Œæä¾›å‹å¥½çš„é”™è¯¯æç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  defaultConfig = <span class="hljs-built_in">require</span>(path.<span class="hljs-title function_">resolve</span>(configPath, <span class="hljs-string">'./config.default.js'</span>))
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[exception] failed to load default.config file:'</span>, e.<span class="hljs-property">message</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Error details:'</span>, e.<span class="hljs-property">stack</span>)
}
</code></pre>
<p>å³ä½¿æŸäº›é…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåº”ç”¨ä¹Ÿèƒ½ç»§ç»­å¯åŠ¨ã€‚</p>
<h3 data-id="heading-18">4. çµæ´»å¯æ‰©å±•</h3>
<p>é€šè¿‡ Loader æœºåˆ¶å’Œ Extend åŠŸèƒ½ï¼Œæ¡†æ¶æä¾›äº†è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œå¼€å‘è€…å¯ä»¥ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰ä¸­é—´ä»¶</li>
<li>æ‰©å±•æ¡†æ¶åŠŸèƒ½</li>
<li>å®šåˆ¶ä¸šåŠ¡ç»„ä»¶</li>
</ul>
<h2 data-id="heading-19">åº”ç”¨åœºæ™¯</h2>
<p>Elips-Core é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>å¿«é€ŸåŸå‹å¼€å‘</strong>ï¼šçº¦å®šå¼çš„ç›®å½•ç»“æ„åŠ å¿«å¼€å‘é€Ÿåº¦</li>
<li><strong>ä¸­å°å‹ Web åº”ç”¨</strong>ï¼šè½»é‡çº§è®¾è®¡ï¼Œæ€§èƒ½å¼€é”€å°</li>
<li><strong>API æœåŠ¡</strong>ï¼šå†…ç½®è·¯ç”±éªŒè¯å’Œåˆ†å±‚æ¶æ„ï¼Œé€‚åˆæ„å»º RESTful API</li>
<li><strong>å­¦ä¹ æ¡†æ¶è®¾è®¡</strong>ï¼šä»£ç ç®€æ´æ¸…æ™°ï¼Œæ˜¯å­¦ä¹  Node.js æ¡†æ¶è®¾è®¡çš„è‰¯å¥½èŒƒä¾‹</li>
</ol>
<h2 data-id="heading-20">ä¸ä¸»æµæ¡†æ¶å¯¹æ¯”</h2>
<h3 data-id="heading-21">vs Egg.js</h3>
<p>Elips-Core çš„è®¾è®¡ç†å¿µä¸é˜¿é‡Œçš„ Egg.js ç›¸ä¼¼ï¼Œéƒ½é‡‡ç”¨ï¼š</p>
<ul>
<li>çº¦å®šä¼˜äºé…ç½®</li>
<li>Loader åŠ è½½æœºåˆ¶</li>
<li>å¤šç¯å¢ƒé…ç½®ç®¡ç†</li>
</ul>
<p>ä½† Elips-Core æ›´åŠ è½»é‡ï¼Œé€‚åˆå°å‹é¡¹ç›®æˆ–å­¦ä¹ ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-22">vs Koa</h3>
<p>ç›¸æ¯”åŸç”Ÿ Koaï¼ŒElips-Core æä¾›äº†ï¼š</p>
<ul>
<li>å®Œæ•´çš„é¡¹ç›®ç»“æ„è§„èŒƒ</li>
<li>è‡ªåŠ¨åŒ–ç»„ä»¶åŠ è½½</li>
<li>å¼€ç®±å³ç”¨çš„åˆ†å±‚æ¶æ„</li>
</ul>
<p>é™ä½äº†é¡¹ç›®åˆå§‹åŒ–å’Œè§„èŒƒåˆ¶å®šçš„æˆæœ¬ã€‚</p>
<h2 data-id="heading-23">æœ€ä½³å®è·µå»ºè®®</h2>
<ol>
<li><strong>éµå¾ªç›®å½•çº¦å®š</strong>ï¼šæŒ‰ç…§æ¡†æ¶è§„å®šçš„ç›®å½•ç»“æ„ç»„ç»‡ä»£ç </li>
<li><strong>åˆç†åˆ†å±‚</strong>ï¼š
<ul>
<li>Controller å¤„ç†è¯·æ±‚å“åº”</li>
<li>Service å°è£…ä¸šåŠ¡é€»è¾‘</li>
<li>Middleware å¤„ç†é€šç”¨é€»è¾‘</li>
</ul>
</li>
<li><strong>å–„ç”¨é…ç½®ç®¡ç†</strong>ï¼šå°†ç¯å¢ƒç›¸å…³çš„é…ç½®æŠ½ç¦»åˆ°é…ç½®æ–‡ä»¶</li>
<li><strong>ä½¿ç”¨è·¯ç”±éªŒè¯</strong>ï¼šé€šè¿‡ JSON Schema ç¡®ä¿ API è¾“å…¥åˆæ³•æ€§</li>
<li><strong>æ‰©å±•è€Œéä¿®æ”¹</strong>ï¼šé€šè¿‡ Extend æœºåˆ¶æ‰©å±•åŠŸèƒ½ï¼Œé¿å…ä¿®æ”¹æ ¸å¿ƒä»£ç </li>
</ol>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p>Elips-Core æ˜¯ä¸€ä¸ªè®¾è®¡ç²¾å·§çš„è½»é‡çº§ Web æ¡†æ¶æ ¸å¿ƒï¼Œå®ƒé€šè¿‡è‡ªåŠ¨åŒ–çš„ Loader æœºåˆ¶å’Œçº¦å®šå¼çš„ç›®å½•ç»“æ„ï¼Œå¤§å¹…ç®€åŒ–äº† Koa åº”ç”¨çš„å¼€å‘æµç¨‹ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>âœ… <strong>é›¶é…ç½®å¯åŠ¨</strong>ï¼šéµå¾ªçº¦å®šå³å¯è‡ªåŠ¨åŠ è½½ç»„ä»¶</li>
<li>âœ… <strong>æ¸…æ™°çš„åˆ†å±‚æ¶æ„</strong>ï¼šController-Service-Middleware æ¨¡å¼</li>
<li>âœ… <strong>å¤šç¯å¢ƒæ”¯æŒ</strong>ï¼šçµæ´»çš„é…ç½®ç®¡ç†æœºåˆ¶</li>
<li>âœ… <strong>è‰¯å¥½çš„æ‰©å±•æ€§</strong>ï¼šLoader å’Œ Extend æœºåˆ¶</li>
<li>âœ… <strong>è·¨å¹³å°å…¼å®¹</strong>ï¼šä»£ç å¯åœ¨ä¸åŒæ“ä½œç³»ç»Ÿè¿è¡Œ</li>
</ul>
<p>å¯¹äº Node.js å¼€å‘è€…è€Œè¨€ï¼ŒElips-Core æ—¢å¯ä»¥ä½œä¸ºç”Ÿäº§å·¥å…·å¿«é€Ÿæ­å»ºåº”ç”¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå­¦ä¹ èµ„æ–™æ·±å…¥ç†è§£æ¡†æ¶è®¾è®¡æ¨¡å¼ã€‚å®ƒå±•ç¤ºäº†å¦‚ä½•é€šè¿‡ç®€æ´çš„ä»£ç å®ç°å¼ºå¤§çš„åŠŸèƒ½ï¼Œä½“ç°äº†"ç®€çº¦è€Œä¸ç®€å•"çš„å·¥ç¨‹å“²å­¦ã€‚</p>
<h2 data-id="heading-25">å‚è€ƒèµ„æº</h2>
<ul>
<li>
<p><strong>æ ¸å¿ƒä¾èµ–</strong>ï¼š</p>
<ul>
<li><code>koa</code> - Web æ¡†æ¶åŸºç¡€</li>
<li><code>koa-router</code> - è·¯ç”±ç®¡ç†</li>
<li><code>glob</code> - æ–‡ä»¶æ‰«æ</li>
<li><code>ajv</code> - JSON Schema éªŒè¯ï¼ˆé…åˆä½¿ç”¨ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ¨èé˜…è¯»</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkoajs.com%2F" target="_blank" title="https://koajs.com/" ref="nofollow noopener noreferrer">Koa å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Feggjs.org%2Fzh-cn%2Fintro%2Fegg-and-koa.html" target="_blank" title="https://eggjs.org/zh-cn/intro/egg-and-koa.html" ref="nofollow noopener noreferrer">Egg.js æ¡†æ¶è®¾è®¡</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjson-schema.org%2F" target="_blank" title="https://json-schema.org/" ref="nofollow noopener noreferrer">JSON Schema è§„èŒƒ</a></li>
</ul>
</li>
</ul>
<hr/>
<p><em>æœ¬æ–‡åŸºäº Elips-Core æ¡†æ¶æºç åˆ†ææ’°å†™ï¼Œé€‚ç”¨äºäº†è§£ Node.js Web æ¡†æ¶è®¾è®¡åŸç†çš„å¼€å‘è€…ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šæ ‡ç­¾é¡µå®æ—¶æ¶ˆæ¯åŒæ­¥ SSE+broadcastChannel]]></title>    <link>https://juejin.cn/post/7588355695100854281</link>    <guid>https://juejin.cn/post/7588355695100854281</guid>    <pubDate>2025-12-28T09:32:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588355695100854281" data-draft-id="7454960025036750899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šæ ‡ç­¾é¡µå®æ—¶æ¶ˆæ¯åŒæ­¥ SSE+broadcastChannel"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T09:32:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Focus_"/> <meta itemprop="url" content="https://juejin.cn/user/1556564198317448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šæ ‡ç­¾é¡µå®æ—¶æ¶ˆæ¯åŒæ­¥ SSE+broadcastChannel
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1556564198317448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Focus_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:32:01.000Z" title="Sun Dec 28 2025 09:32:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å¤šæ ‡ç­¾é¡µå®æ—¶æ¶ˆæ¯åŒæ­¥æ–¹æ¡ˆï¼šSSE + BroadcastChannel å®Œç¾è§£å†³ï¼</h2>
<blockquote>
<p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼š
ç”¨æˆ·åŒæ—¶æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µï¼Œæ¯ä¸ªæ ‡ç­¾é¡µéƒ½å»ºç«‹äº†ç‹¬ç«‹çš„ WebSocket æˆ– SSE è¿æ¥ï¼Œå¯¼è‡´æœåŠ¡å™¨å‹åŠ›å¤§ã€æ¶ˆæ¯é‡å¤æ¨é€ã€èµ„æºæµªè´¹ï¼Ÿæœ¬æ–‡å°†åˆ†äº«ä¸€ä¸ªä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ SSE + BroadcastChannel çš„ç»„åˆï¼Œå®ç°å•è¿æ¥ã€å¤šæ ‡ç­¾é¡µå®æ—¶æ¶ˆæ¯åŒæ­¥ï¼Œæ—¢èŠ‚çœèµ„æºåˆæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
</blockquote>
<h4 data-id="heading-1">é€‚ç”¨åœºæ™¯</h4>
<p><strong>æ¨èä½¿ç”¨</strong>ï¼š</p>
<ul>
<li><strong>å®æ—¶æ¶ˆæ¯æ¨é€</strong>ï¼šç³»ç»Ÿé€šçŸ¥ã€ç”¨æˆ·æ¶ˆæ¯ã€ä¸šåŠ¡æé†’ç­‰</li>
<li><strong>æ•°æ®åŒæ­¥</strong>ï¼šå¤šæ ‡ç­¾é¡µçŠ¶æ€åŒæ­¥ã€è´­ç‰©è½¦åŒæ­¥ã€è¡¨å•æ•°æ®åŒæ­¥</li>
<li><strong>ä»»åŠ¡çŠ¶æ€æ›´æ–°</strong>ï¼šåå°ä»»åŠ¡è¿›åº¦ã€æ•°æ®å¤„ç†çŠ¶æ€ã€å¯¼å‡ºä»»åŠ¡å®Œæˆé€šçŸ¥</li>
<li><strong>ç³»ç»Ÿå…¬å‘Š</strong>ï¼šå…¨å±€æ¶ˆæ¯å¹¿æ’­ã€ç³»ç»Ÿç»´æŠ¤é€šçŸ¥ã€ç‰ˆæœ¬æ›´æ–°æç¤º</li>
</ul>
<p><strong>å®é™…æ¡ˆä¾‹</strong>ï¼š</p>
<p>åœ¨æˆ‘ä»¬çš„ BI ç³»ç»Ÿä¸­ï¼Œè¯¥æ–¹æ¡ˆæˆåŠŸåº”ç”¨äºï¼š</p>
<ul>
<li>æ¶ˆæ¯ä¸­å¿ƒï¼šå®æ—¶æ¨é€ç³»ç»Ÿæ¶ˆæ¯å’Œä¸šåŠ¡é€šçŸ¥</li>
<li>ä»»åŠ¡ç®¡ç†ï¼šåå°æ•°æ®å¤„ç†ä»»åŠ¡çš„çŠ¶æ€æ›´æ–°å’Œå®Œæˆé€šçŸ¥ï¼ˆå¦‚ç´ ææ‰¹é‡ä¸Šä¼ ä»»åŠ¡ï¼‰</li>
<li>å›½é™…åŒ–åŒæ­¥ï¼šå¤šè¯­è¨€é…ç½®çš„å®æ—¶æ›´æ–°</li>
</ul>
<p><strong>ä¸æ¨èä½¿ç”¨</strong>ï¼š</p>
<ul>
<li><strong>é«˜é¢‘åŒå‘é€šä¿¡</strong>ï¼šå¦‚å®æ—¶èŠå¤©ã€æ¸¸æˆç­‰ï¼Œå»ºè®®ä½¿ç”¨ WebSocket</li>
<li><strong>å¤§é‡æ•°æ®ä¼ è¾“</strong>ï¼šå¦‚æ–‡ä»¶ä¼ è¾“ã€å¤§æ•°æ®åŒæ­¥ï¼Œå»ºè®®ä½¿ç”¨ HTTP è½®è¯¢æˆ–åˆ†é¡µ</li>
<li><strong>è·¨åŸŸé€šä¿¡</strong>ï¼šéœ€è¦ä½¿ç”¨ postMessage æˆ–å…¶ä»–è·¨åŸŸæ–¹æ¡ˆ</li>
</ul>
<h3 data-id="heading-2">å‰è¨€</h3>
<blockquote>
<p>å¦‚æœæƒ³å¿«é€Ÿå‚è€ƒå®ç°å¯ç›´æ¥è·³è½¬åˆ°ï¼šç›®å½•-å®ç°æ–¹æ¡ˆğŸ‘‡</p>
</blockquote>
<h4 data-id="heading-3">åˆè¡·</h4>
<p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œå®æ—¶æ¶ˆæ¯æ¨é€ã€ä»»åŠ¡çŠ¶æ€æ›´æ–°ç­‰æ˜¯å¸¸è§çš„éœ€æ±‚ã€‚ç„¶è€Œï¼Œå½“ç”¨æˆ·åŒæ—¶æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µæ—¶ï¼Œå¦‚ä½•ç¡®ä¿æ¶ˆæ¯èƒ½å¤Ÿæ­£ç¡®åŒæ­¥åˆ°æ‰€æœ‰æ ‡ç­¾é¡µï¼ŒåŒæ—¶é¿å…é‡å¤è¿æ¥å’Œèµ„æºæµªè´¹ï¼Œæ˜¯ä¸€ä¸ªå€¼å¾—æ·±å…¥æ¢è®¨çš„æŠ€æœ¯é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡åŸºäºå®é™…é¡¹ç›®ç»éªŒï¼Œåˆ†äº«å¦‚ä½•é€šè¿‡ <strong>SSEï¼ˆServer-Sent Eventsï¼‰</strong> å’Œ <strong>BroadcastChannel API</strong> çš„ç»„åˆæ–¹æ¡ˆï¼Œå®ç°é«˜æ•ˆçš„å¤šæ ‡ç­¾é¡µå®æ—¶æ¶ˆæ¯åŒæ­¥ã€‚è¯¥æ–¹æ¡ˆä¸ä»…è§£å†³äº†å•æ ‡ç­¾é¡µæ¶ˆæ¯æ¨é€çš„é—®é¢˜ï¼Œè¿˜ä¼˜é›…åœ°å¤„ç†äº†å¤šæ ‡ç­¾é¡µåœºæ™¯ä¸‹çš„è¿æ¥ç®¡ç†å’Œæ¶ˆæ¯åˆ†å‘ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†æ¢è®¨ï¼š</p>
<ul>
<li>å¦‚ä½•è®¾è®¡å¤šæ ‡ç­¾é¡µæ¶ˆæ¯åŒæ­¥æ¶æ„</li>
<li>SSE å’Œ BroadcastChannel çš„å®æˆ˜åº”ç”¨</li>
<li>è¿æ¥ç®¡ç†å’Œé”™è¯¯æ¢å¤çš„æœ€ä½³å®è·µ</li>
<li>æ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒæå‡æŠ€å·§</li>
</ul>
<h4 data-id="heading-4">é€‚åˆäººç¾¤</h4>
<ul>
<li>éœ€è¦å®ç°å®æ—¶æ¶ˆæ¯æ¨é€åŠŸèƒ½çš„å‰ç«¯å¼€å‘è€…</li>
<li>å¸Œæœ›ä¼˜åŒ–å¤šæ ‡ç­¾é¡µåº”ç”¨æ€§èƒ½çš„å·¥ç¨‹å¸ˆ</li>
<li>å¯¹ SSE å’Œ BroadcastChannel API æ„Ÿå…´è¶£çš„æŠ€æœ¯çˆ±å¥½è€…</li>
<li>æ­£åœ¨å¯»æ‰¾ WebSocket æ›¿ä»£æ–¹æ¡ˆçš„å¼€å‘è€…</li>
</ul>
<h3 data-id="heading-5">é—®é¢˜èƒŒæ™¯</h3>
<h4 data-id="heading-6">å¤šæ ‡ç­¾é¡µæ¶ˆæ¯åŒæ­¥çš„æŒ‘æˆ˜</h4>
<p>åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š</p>
<p><strong>åœºæ™¯ä¸€ï¼šç”¨æˆ·æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µ</strong></p>
<p>å½“ç”¨æˆ·åŒæ—¶æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µè®¿é—®åŒä¸€ä¸ªåº”ç”¨æ—¶ï¼Œå¦‚æœæ¯ä¸ªæ ‡ç­¾é¡µéƒ½å»ºç«‹ç‹¬ç«‹çš„ SSE è¿æ¥ï¼Œä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>æœåŠ¡å™¨èµ„æºæµªè´¹ï¼ˆå¤šä¸ªé•¿è¿æ¥ï¼‰</li>
<li>æ¶ˆæ¯é‡å¤æ¨é€ï¼ˆæ¯ä¸ªæ ‡ç­¾é¡µéƒ½æ”¶åˆ°ç›¸åŒæ¶ˆæ¯ï¼‰</li>
<li>ç”¨æˆ·ä½“éªŒä¸ä¸€è‡´ï¼ˆä¸åŒæ ‡ç­¾é¡µæ¶ˆæ¯çŠ¶æ€ä¸åŒæ­¥ï¼‰</li>
</ul>
<blockquote>
<p>è‹¥ç³»ç»Ÿé‡‡ç”¨ HTTP 1.0/1.1 åè®®ï¼Œç”¨æˆ·æ¯æ‰“å¼€ä¸€ä¸ªé¡µé¢å°±ä¼šå»ºç«‹ä¸€ä¸ªé•¿è¿æ¥ï¼›å½“æ‰“å¼€çš„æ ‡ç­¾é¡µæ•°é‡è¶…è¿‡ 6 ä¸ªæ—¶ï¼Œå—æµè§ˆå™¨å¹¶å‘è¿æ¥æ•°é™åˆ¶ï¼Œç¬¬ä¸ƒä¸ªåŠä¹‹åçš„æ ‡ç­¾é¡µå°†æ— æ³•æ­£å¸¸åŠ è½½ï¼Œå‡ºç°å¡é¡¿ã€‚</p>
</blockquote>
<p><strong>åœºæ™¯äºŒï¼šæ ‡ç­¾é¡µå…³é—­ä¸é‡è¿</strong></p>
<p>å½“æŸä¸ªæ ‡ç­¾é¡µå…³é—­æ—¶ï¼Œå¦‚æœè¯¥æ ‡ç­¾é¡µæŒæœ‰å”¯ä¸€çš„ SSE è¿æ¥ï¼Œå…¶ä»–æ ‡ç­¾é¡µå°†æ— æ³•ç»§ç»­æ¥æ”¶æ¶ˆæ¯ã€‚éœ€è¦ï¼š</p>
<ul>
<li>æ£€æµ‹è¿æ¥æ–­å¼€</li>
<li>è‡ªåŠ¨åœ¨å…¶ä»–æ ‡ç­¾é¡µé‡æ–°å»ºç«‹è¿æ¥</li>
<li>ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±</li>
</ul>
<p><strong>åœºæ™¯ä¸‰ï¼šæ¶ˆæ¯å»é‡ä¸çŠ¶æ€åŒæ­¥</strong></p>
<p>å¤šä¸ªæ ‡ç­¾é¡µéœ€è¦ï¼š</p>
<ul>
<li>é¿å…é‡å¤æ˜¾ç¤ºç›¸åŒçš„æ¶ˆæ¯é€šçŸ¥</li>
<li>ä¿æŒæ¶ˆæ¯å·²è¯»/æœªè¯»çŠ¶æ€åŒæ­¥</li>
<li>ç»Ÿä¸€æ›´æ–° UI çŠ¶æ€ï¼ˆå¦‚æœªè¯»æ¶ˆæ¯æ•°ï¼‰</li>
</ul>
<h4 data-id="heading-7">ä¼ ç»Ÿæ–¹æ¡ˆçš„å±€é™æ€§</h4>






























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>çº¯ SSE</td><td>å®ç°ç®€å•ï¼Œæµè§ˆå™¨åŸç”Ÿæ”¯æŒ</td><td>å¤šæ ‡ç­¾é¡µä¼šå»ºç«‹å¤šä¸ªè¿æ¥ï¼Œèµ„æºæµªè´¹</td></tr><tr><td>çº¯ WebSocket</td><td>åŒå‘é€šä¿¡ï¼ŒåŠŸèƒ½å¼ºå¤§</td><td>å®ç°å¤æ‚ï¼Œéœ€è¦å¿ƒè·³æ£€æµ‹ï¼Œå¤šæ ‡ç­¾é¡µé—®é¢˜åŒæ ·å­˜åœ¨</td></tr><tr><td>LocalStorage äº‹ä»¶</td><td>è·¨æ ‡ç­¾é¡µé€šä¿¡ç®€å•</td><td>åªèƒ½ä¼ é€’å­—ç¬¦ä¸²ï¼Œæ€§èƒ½è¾ƒå·®ï¼Œä¸é€‚åˆé¢‘ç¹é€šä¿¡</td></tr><tr><td>SharedWorker</td><td>çœŸæ­£çš„å•ä¾‹è¿æ¥</td><td>å…¼å®¹æ€§ä¸€èˆ¬ï¼Œè°ƒè¯•å›°éš¾</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">æŠ€æœ¯é€‰å‹</h3>
<h4 data-id="heading-9">ä¸ºä»€ä¹ˆé€‰æ‹© SSE</h4>
<p><strong>SSEï¼ˆServer-Sent Eventsï¼‰</strong> æ˜¯ HTML5 æ ‡å‡†ä¸­çš„ä¸€ç§æœåŠ¡å™¨æ¨é€æŠ€æœ¯ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šåŸºäº HTTP åè®®ï¼Œæ— éœ€é¢å¤–åè®®å‡çº§</li>
<li><strong>è‡ªåŠ¨é‡è¿</strong>ï¼šæµè§ˆå™¨åŸç”Ÿæ”¯æŒæ–­çº¿é‡è¿æœºåˆ¶</li>
<li><strong>å•å‘æ¨é€</strong>ï¼šé€‚åˆæœåŠ¡å™¨ä¸»åŠ¨æ¨é€æ¶ˆæ¯çš„åœºæ™¯</li>
<li><strong>æ–‡æœ¬å‹å¥½</strong>ï¼šå¤©ç„¶æ”¯æŒæ–‡æœ¬æ•°æ®ï¼ŒJSON è§£ææ–¹ä¾¿</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// SSE åŸºæœ¬ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/api/sse'</span>);
eventSource.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°æ¶ˆæ¯:'</span>, event.<span class="hljs-property">data</span>);
};
</code></pre>
<h4 data-id="heading-10">ä¸ºä»€ä¹ˆé€‰æ‹© BroadcastChannel</h4>
<p><strong>BroadcastChannel API</strong> æ˜¯ HTML5 æä¾›çš„è·¨æ ‡ç­¾é¡µé€šä¿¡æ–¹æ¡ˆï¼š</p>
<ol>
<li><strong>åŒæºé€šä¿¡</strong>ï¼šåŒä¸€åŸŸåä¸‹çš„æ‰€æœ‰æ ‡ç­¾é¡µå¯ä»¥é€šä¿¡</li>
<li><strong>ç®€å•é«˜æ•ˆ</strong>ï¼šAPI ç®€æ´ï¼Œæ€§èƒ½ä¼˜ç§€</li>
<li><strong>ç±»å‹æ”¯æŒ</strong>ï¼šæ”¯æŒä¼ è¾“å¯¹è±¡ã€æ•°ç»„ç­‰å¤æ‚æ•°æ®ç±»å‹</li>
<li><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šåŸºäºäº‹ä»¶æœºåˆ¶ï¼Œæ˜“äºé›†æˆ</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// BroadcastChannel åŸºæœ¬ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(<span class="hljs-string">'my-channel'</span>);
channel.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'MESSAGE'</span>, <span class="hljs-attr">data</span>: <span class="hljs-string">'Hello'</span> });
channel.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ”¶åˆ°å¹¿æ’­:'</span>, event.<span class="hljs-property">data</span>);
};
</code></pre>
<h4 data-id="heading-11">ç»„åˆæ–¹æ¡ˆçš„ä¼˜åŠ¿</h4>
<p>å°† SSE å’Œ BroadcastChannel ç»“åˆï¼Œå¯ä»¥å®ç°ï¼š</p>
<ul>
<li><strong>å•è¿æ¥ç®¡ç†</strong>ï¼šåªæœ‰ä¸€ä¸ªæ ‡ç­¾é¡µå»ºç«‹ SSE è¿æ¥</li>
<li><strong>æ¶ˆæ¯å¹¿æ’­</strong>ï¼šSSE æ¥æ”¶çš„æ¶ˆæ¯é€šè¿‡ BroadcastChannel åŒæ­¥åˆ°æ‰€æœ‰æ ‡ç­¾é¡µ</li>
<li><strong>è¿æ¥æ¢å¤</strong>ï¼šæ ‡ç­¾é¡µå…³é—­æ—¶ï¼Œå…¶ä»–æ ‡ç­¾é¡µè‡ªåŠ¨æ¥ç®¡è¿æ¥</li>
<li><strong>çŠ¶æ€åŒæ­¥</strong>ï¼šæ‰€æœ‰æ ‡ç­¾é¡µçš„æ¶ˆæ¯çŠ¶æ€ä¿æŒä¸€è‡´</li>
</ul>
<hr/>
<h3 data-id="heading-12">å®ç°æ–¹æ¡ˆ</h3>
<h4 data-id="heading-13">æ•´ä½“æ¶æ„è®¾è®¡</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Server as æœåŠ¡å™¨ç«¯
    participant TabA as æ ‡ç­¾é¡µ A&lt;br/&gt;(ä¸»è¿æ¥)
    participant BC as BroadcastChannel
    participant TabB as æ ‡ç­¾é¡µ B&lt;br/&gt;(ä»è¿æ¥)

    Note over TabA: åˆå§‹åŒ–é˜¶æ®µ
    TabA-&gt;&gt;TabA: æ£€æŸ¥æ˜¯å¦æœ‰ SSE è¿æ¥
    alt æ— è¿æ¥
        TabA-&gt;&gt;Server: å»ºç«‹ SSE è¿æ¥
        Server--&gt;&gt;TabA: è¿æ¥æˆåŠŸ
    end

    Note over Server,TabB: æ¶ˆæ¯æ¥æ”¶é˜¶æ®µ
    Server-&gt;&gt;TabA: æ¨é€æ¶ˆæ¯ (SSE)
    TabA-&gt;&gt;TabA: å¤„ç†æ¶ˆæ¯&lt;br/&gt;(æ›´æ–°çŠ¶æ€ã€æ˜¾ç¤ºé€šçŸ¥)
    TabA-&gt;&gt;BC: å¹¿æ’­æ¶ˆæ¯
    BC-&gt;&gt;TabB: åŒæ­¥æ¶ˆæ¯
    TabB-&gt;&gt;TabB: å¤„ç†æ¶ˆæ¯&lt;br/&gt;(æ›´æ–°çŠ¶æ€ã€æ˜¾ç¤ºé€šçŸ¥)

    Note over TabA,TabB: è¿æ¥ç®¡ç†é˜¶æ®µ
    TabA-&gt;&gt;TabA: æ ‡ç­¾é¡µå…³é—­
    TabA-&gt;&gt;BC: å‘é€å…³é—­ä¿¡å·
    BC-&gt;&gt;TabB: é€šçŸ¥è¿æ¥å…³é—­
    TabB-&gt;&gt;TabB: å…³é—­æ—§è¿æ¥
    TabB-&gt;&gt;Server: é‡æ–°å»ºç«‹ SSE è¿æ¥
    Server--&gt;&gt;TabB: è¿æ¥æˆåŠŸ
</code></pre>
<h4 data-id="heading-14">æ ¸å¿ƒæµç¨‹</h4>
<ol>
<li>
<p><strong>åˆå§‹åŒ–é˜¶æ®µ</strong></p>
<ul>
<li>åº”ç”¨å¯åŠ¨æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦å·²æœ‰ SSE è¿æ¥</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œå½“å‰æ ‡ç­¾é¡µå»ºç«‹ SSE è¿æ¥</li>
<li>å¦‚æœæœ‰ï¼Œç›´æ¥ä½¿ç”¨ç°æœ‰è¿æ¥</li>
</ul>
</li>
<li>
<p><strong>æ¶ˆæ¯æ¥æ”¶é˜¶æ®µ</strong></p>
<ul>
<li>SSE è¿æ¥æ¥æ”¶åˆ°æœåŠ¡å™¨æ¨é€çš„æ¶ˆæ¯</li>
<li>å½“å‰æ ‡ç­¾é¡µå¤„ç†æ¶ˆæ¯ï¼ˆæ˜¾ç¤ºé€šçŸ¥ã€æ›´æ–°çŠ¶æ€ï¼‰</li>
<li>é€šè¿‡ BroadcastChannel å¹¿æ’­æ¶ˆæ¯åˆ°å…¶ä»–æ ‡ç­¾é¡µ</li>
<li>å…¶ä»–æ ‡ç­¾é¡µæ¥æ”¶å¹¿æ’­ï¼ŒåŒæ­¥å¤„ç†æ¶ˆæ¯</li>
</ul>
</li>
<li>
<p><strong>è¿æ¥ç®¡ç†é˜¶æ®µ</strong></p>
<ul>
<li>æ ‡ç­¾é¡µå…³é—­æ—¶ï¼Œå‘é€å…³é—­ä¿¡å·åˆ° BroadcastChannel</li>
<li>å…¶ä»–æ ‡ç­¾é¡µç›‘å¬åˆ°å…³é—­ä¿¡å·ï¼Œå…³é—­æ—§è¿æ¥</li>
<li>é‡æ–°å»ºç«‹ SSE è¿æ¥ï¼Œç¡®ä¿æ¶ˆæ¯ä¸ä¸­æ–­</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-15">æ ¸å¿ƒå®ç°</h3>
<h4 data-id="heading-16">1. SSE è¿æ¥å°è£…</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ªæ”¯æŒé‡è¿å’Œé”™è¯¯å¤„ç†çš„ SSE è¿æ¥å·¥å…·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">EventSourcePolyfill</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'event-source-polyfill'</span>;
<span class="hljs-keyword">import</span> util <span class="hljs-keyword">from</span> <span class="hljs-string">'@/libs/util'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Setting</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"@/setting"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_RETRY_COUNT</span> = <span class="hljs-number">3</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RETRY_DELAY</span> = <span class="hljs-number">3000</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">create</span> = (<span class="hljs-params">url, payload</span>) =&gt; {
  <span class="hljs-keyword">let</span> retryCount = <span class="hljs-number">0</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">connect</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> token = util.<span class="hljs-property">cookies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"token"</span>)
    <span class="hljs-keyword">if</span>(!token){
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">const</span> eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSourcePolyfill</span>(
      <span class="hljs-string">`<span class="hljs-subst">${Setting.request.apiBaseURL}</span><span class="hljs-subst">${url}</span>`</span>,
      {
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-attr">token</span>: util.<span class="hljs-property">cookies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"token"</span>),
          <span class="hljs-attr">pageUrl</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,
          <span class="hljs-attr">userId</span>: util.<span class="hljs-property">cookies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"userId"</span>),
        },
        <span class="hljs-attr">heartbeatTimeout</span>: <span class="hljs-number">28800000</span>, <span class="hljs-comment">// 8å°æ—¶å¿ƒè·³è¶…æ—¶</span>
      }
    );

    eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"open"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSEè¿æ¥æˆåŠŸ'</span>);
      retryCount = <span class="hljs-number">0</span>; <span class="hljs-comment">// é‡ç½®é‡è¯•æ¬¡æ•°</span>
    });

    eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"error"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SSEè¿æ¥é”™è¯¯:'</span>, err);

      <span class="hljs-keyword">if</span> (retryCount &lt; <span class="hljs-variable constant_">MAX_RETRY_COUNT</span>) {
        retryCount++;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å°è¯•é‡æ–°è¿æ¥ (<span class="hljs-subst">${retryCount}</span>/<span class="hljs-subst">${MAX_RETRY_COUNT}</span>)...`</span>);
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          eventSource.<span class="hljs-title function_">close</span>();
          <span class="hljs-title function_">connect</span>();
        }, <span class="hljs-variable constant_">RETRY_DELAY</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SSEè¿æ¥å¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°'</span>);
        eventSource.<span class="hljs-title function_">close</span>();
      }
    });

    <span class="hljs-keyword">return</span> eventSource;
  };

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">connect</span>();
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  create
}
</code></pre>
<p><strong>å…³é”®ç‚¹è§£æ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>EventSourcePolyfill</code> æ”¯æŒè‡ªå®šä¹‰ headersï¼ˆåŸç”Ÿ EventSource ä¸æ”¯æŒï¼‰</li>
<li>å®ç°è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼Œæœ€å¤šé‡è¯• 3 æ¬¡</li>
<li>è®¾ç½®å¿ƒè·³è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢é•¿æ—¶é—´æ— å“åº”å¯¼è‡´è¿æ¥å‡æ­»</li>
<li>åœ¨ headers ä¸­ä¼ é€’ token å’Œé¡µé¢ä¿¡æ¯ï¼Œä¾¿äºæœåŠ¡ç«¯è¯†åˆ«å’Œè·¯ç”±</li>
</ul>
<h4 data-id="heading-17">2. BroadcastChannel å°è£…</h4>
<p>åˆ›å»ºä¸€ä¸ªç®€æ´çš„ BroadcastChannel å·¥å…·ç±»ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createBroadcastChannel</span> = (<span class="hljs-params">channelName: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BroadcastChannel</span>(channelName);
  <span class="hljs-keyword">return</span> {
    channel,
    <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) {
      channel.<span class="hljs-title function_">postMessage</span>(data);
    },
    <span class="hljs-title function_">receiveMessage</span>(<span class="hljs-params">callback: (data: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">void</span></span>) {
      channel.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
        <span class="hljs-title function_">callback</span>(event.<span class="hljs-property">data</span>);
      };
    },
    <span class="hljs-title function_">closeChannel</span>(<span class="hljs-params"/>) {
      channel.<span class="hljs-title function_">close</span>();
    },
  };
};
</code></pre>
<p><strong>è®¾è®¡è¯´æ˜</strong>ï¼š</p>
<ul>
<li>å°è£…æˆå·¥å‚å‡½æ•°ï¼Œä¾¿äºåˆ›å»ºå¤šä¸ªé€šé“ï¼ˆæ¶ˆæ¯é€šé“ã€è¿æ¥ç®¡ç†é€šé“ï¼‰</li>
<li>æä¾›ç®€æ´çš„ APIï¼šå‘é€æ¶ˆæ¯ã€æ¥æ”¶æ¶ˆæ¯ã€å…³é—­é€šé“</li>
<li>æ”¯æŒä¼ é€’ä»»æ„ç±»å‹æ•°æ®ï¼ˆå¯¹è±¡ã€æ•°ç»„ç­‰ï¼‰</li>
</ul>
<h4 data-id="heading-18">3. SSE è¿æ¥ç®¡ç†</h4>
<p>å®ç°å•ä¾‹æ¨¡å¼çš„ SSE è¿æ¥ç®¡ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> sseRequest <span class="hljs-keyword">from</span> <span class="hljs-string">"@/plugins/request/sse"</span>;
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">"@/store"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchSSE</span> = (<span class="hljs-params">payload?: { [key: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> }</span>) =&gt; {
  <span class="hljs-keyword">const</span> eventSource = sseRequest.<span class="hljs-title function_">create</span>(<span class="hljs-string">"/sse/connect"</span>, {
    ...payload
  });
  <span class="hljs-keyword">return</span> eventSource;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">initSSEEvent</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'sse-init'</span>);
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰å®ä¾‹åœ¨å…¶ä»–æ ‡ç­¾é¡µä¸­åˆ›å»º</span>
  <span class="hljs-keyword">let</span> eventSource = (store.<span class="hljs-property">state</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">admin</span>.<span class="hljs-property">request</span>.<span class="hljs-property">sseEvent</span>;

  <span class="hljs-keyword">if</span> (!eventSource) {
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å®ä¾‹ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„</span>
    eventSource = <span class="hljs-title function_">fetchSSE</span>();
    <span class="hljs-comment">// å­˜å‚¨åˆ° Vuex ä¸­</span>
    store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'admin/request/SET_SSE_EVENT'</span>, eventSource);
  }

  <span class="hljs-keyword">return</span> eventSource;
};
</code></pre>
<p><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<ul>
<li>é€šè¿‡ Vuex å…¨å±€çŠ¶æ€ç®¡ç† SSE è¿æ¥å®ä¾‹</li>
<li>å®ç°å•ä¾‹æ¨¡å¼ï¼šå¦‚æœå·²æœ‰è¿æ¥ï¼Œç›´æ¥å¤ç”¨</li>
<li>é¿å…å¤šä¸ªæ ‡ç­¾é¡µåŒæ—¶å»ºç«‹è¿æ¥</li>
</ul>
<h4 data-id="heading-19">4. æ¶ˆæ¯å¤„ç†ä¸å¹¿æ’­</h4>
<p>å®ç°æ¶ˆæ¯æ¥æ”¶ã€å¤„ç†å’Œè·¨æ ‡ç­¾é¡µåŒæ­¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createBroadcastChannel } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/libs/broadcastChannel"</span>;

<span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯å¹¿æ’­é€šé“</span>
<span class="hljs-keyword">const</span> { sendMessage, receiveMessage } =
  <span class="hljs-title function_">createBroadcastChannel</span>(<span class="hljs-string">"message-channel"</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> pushWatchAndShowNotifications = <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt; =&gt; {
  <span class="hljs-comment">// è·å– SSE è¿æ¥å®ä¾‹</span>
  <span class="hljs-keyword">const</span> eventSource = (store.<span class="hljs-property">state</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">admin</span>.<span class="hljs-property">request</span>.<span class="hljs-property">sseEvent</span>;
  <span class="hljs-keyword">if</span> (!eventSource) {
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// ç›‘å¬æœåŠ¡å™¨æ¨é€çš„æ¶ˆæ¯</span>
  eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"MESSAGE"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">const</span> fmtData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">data</span>);

    <span class="hljs-comment">// 1. å¹¿æ’­æ¶ˆæ¯åˆ°å…¶ä»–æ ‡ç­¾é¡µ</span>
    <span class="hljs-title function_">sendMessage</span>(fmtData);

    <span class="hljs-comment">// 2. å½“å‰æ ‡ç­¾é¡µå¤„ç†æ¶ˆæ¯</span>
    <span class="hljs-title function_">handleIncomingMessage</span>(fmtData);
  });

  <span class="hljs-comment">// ç›‘å¬ç”¨æˆ·ä»»åŠ¡æ¨é€</span>
  eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"USER_TASK"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">const</span> fmtData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">data</span>);

    <span class="hljs-comment">// å¹¿æ’­ä»»åŠ¡æ¶ˆæ¯åˆ°å…¶ä»–æ ‡ç­¾é¡µ</span>
    <span class="hljs-title function_">sendMessage</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"USER_TASK"</span>, <span class="hljs-attr">data</span>: fmtData });

    <span class="hljs-comment">// å½“å‰æ ‡ç­¾é¡µå¤„ç†ä»»åŠ¡æ¶ˆæ¯</span>
    <span class="hljs-title function_">handleIncomingUserTask</span>(fmtData);
  });

  <span class="hljs-comment">// ç›‘å¬å…¶ä»–æ ‡ç­¾é¡µå¹¿æ’­çš„æ¶ˆæ¯</span>
  <span class="hljs-title function_">receiveMessage</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (data.<span class="hljs-property">type</span> === <span class="hljs-string">"USER_TASK"</span>) {
      <span class="hljs-title function_">handleIncomingUserTask</span>(data.<span class="hljs-property">data</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">handleIncomingMessage</span>(data);
    }
  });

  <span class="hljs-keyword">return</span> eventSource;
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleIncomingMessage</span>(<span class="hljs-params">fmtData: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-keyword">const</span> productId = (store.<span class="hljs-property">state</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">admin</span>.<span class="hljs-property">user</span>.<span class="hljs-property">info</span>?.<span class="hljs-property">curProduct</span>;
  <span class="hljs-keyword">const</span> productData = fmtData[productId];
  <span class="hljs-keyword">if</span> (!productData) {
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">const</span> { noReadCount, popupList } = productData;
  <span class="hljs-comment">// æ›´æ–°æœªè¯»æ¶ˆæ¯æ•°</span>
  store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">"admin/layout/setUnreadMessage"</span>, noReadCount);

  <span class="hljs-comment">// æ˜¾ç¤ºæ¶ˆæ¯é€šçŸ¥</span>
  <span class="hljs-keyword">if</span> (popupList.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    popupList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">message, index</span>) =&gt;</span> {
      <span class="hljs-title function_">showNotification</span>(message, index);
    });
  }
}
</code></pre>
<p><strong>å¤„ç†æµç¨‹</strong>ï¼š</p>
<ol>
<li>SSE æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œç«‹å³é€šè¿‡ BroadcastChannel å¹¿æ’­</li>
<li>å½“å‰æ ‡ç­¾é¡µå¤„ç†æ¶ˆæ¯ï¼ˆæ›´æ–°çŠ¶æ€ã€æ˜¾ç¤ºé€šçŸ¥ï¼‰</li>
<li>å…¶ä»–æ ‡ç­¾é¡µé€šè¿‡ BroadcastChannel æ¥æ”¶æ¶ˆæ¯ï¼ŒåŒæ­¥å¤„ç†</li>
<li>ç¡®ä¿æ‰€æœ‰æ ‡ç­¾é¡µçŠ¶æ€ä¸€è‡´</li>
</ol>
<h4 data-id="heading-20">5. è¿æ¥æ¢å¤æœºåˆ¶</h4>
<p>å®ç°æ ‡ç­¾é¡µå…³é—­æ—¶çš„è¿æ¥æ¢å¤ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createBroadcastChannel } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/libs/broadcastChannel'</span>;

<span class="hljs-comment">// åˆ›å»ºè¿æ¥ç®¡ç†é€šé“</span>
<span class="hljs-keyword">const</span> { sendMessage, receiveMessage } =
  <span class="hljs-title function_">createBroadcastChannel</span>(<span class="hljs-string">'sse-close-channel'</span>);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleCloseMessage</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> sseEvent = (store.<span class="hljs-property">state</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">admin</span>.<span class="hljs-property">request</span>.<span class="hljs-property">sseEvent</span>
      <span class="hljs-keyword">if</span> (sseEvent) {
        sseEvent.<span class="hljs-title function_">close</span>()
        store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'admin/request/CLEAR_SSE_EVENT'</span>);
      }
    },
    <span class="hljs-title function_">handleSSEClosed</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ç›‘å¬å…¶ä»–æ ‡ç­¾é¡µå…³é—­ SSE è¿æ¥çš„æ¶ˆæ¯</span>
      <span class="hljs-title function_">receiveMessage</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (data === <span class="hljs-string">'sse-closed'</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSE connection closed in another tab. Re-establishing connection.'</span>);
          <span class="hljs-comment">// å…³é—­æ—§è¿æ¥</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleCloseMessage</span>()
          <span class="hljs-comment">// é‡æ–°å»ºç«‹è¿æ¥</span>
          <span class="hljs-title function_">initSSEEvent</span>();
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleGetMessage</span>()
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleGetUserTasks</span>()
        }
      });
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é¡µé¢å¸è½½æ—¶ï¼Œå…³é—­ SSE è¿æ¥å¹¶é€šçŸ¥å…¶ä»–æ ‡ç­¾é¡µ</span>
    <span class="hljs-title function_">on</span>(<span class="hljs-variable language_">window</span>, <span class="hljs-string">'beforeunload'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> eventSource = (store.<span class="hljs-property">state</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">admin</span>.<span class="hljs-property">request</span>.<span class="hljs-property">sseEvent</span>;
      <span class="hljs-keyword">if</span> (eventSource) {
        eventSource.<span class="hljs-title function_">close</span>();
        store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'admin/request/CLEAR_SSE_EVENT'</span>);
      }
      <span class="hljs-comment">// å¹¿æ’­å…³é—­æ¶ˆæ¯</span>
      <span class="hljs-title function_">sendMessage</span>(<span class="hljs-string">'sse-closed'</span>);
    });

    <span class="hljs-comment">// åˆå§‹åŒ– SSE è¿æ¥</span>
    <span class="hljs-keyword">const</span> token = (store.<span class="hljs-property">state</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">admin</span>.<span class="hljs-property">user</span>.<span class="hljs-property">info</span>?.<span class="hljs-property">curProduct</span>
      || util.<span class="hljs-property">cookies</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"token"</span>);
    <span class="hljs-keyword">if</span> (token &amp;&amp; !(store.<span class="hljs-property">state</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">admin</span>.<span class="hljs-property">request</span>.<span class="hljs-property">sseEvent</span>) {
      <span class="hljs-title function_">initSSEEvent</span>();
      <span class="hljs-title function_">pushWatchAndShowNotifications</span>();
    }

    <span class="hljs-comment">// ç›‘å¬å…¶ä»–æ ‡ç­¾é¡µçš„è¿æ¥å…³é—­äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleSSEClosed</span>();
  },
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleCloseMessage</span>()
  }
})
</code></pre>
<p><strong>æ¢å¤æœºåˆ¶</strong>ï¼š</p>
<ol>
<li>æ ‡ç­¾é¡µå…³é—­æ—¶ï¼Œå‘é€ <code>sse-closed</code> æ¶ˆæ¯åˆ° BroadcastChannel</li>
<li>å…¶ä»–æ ‡ç­¾é¡µç›‘å¬åˆ°æ¶ˆæ¯ï¼Œå…³é—­æ—§è¿æ¥å¹¶æ¸…ç†çŠ¶æ€</li>
<li>é‡æ–°åˆå§‹åŒ– SSE è¿æ¥å’Œç›¸å…³ç›‘å¬</li>
<li>ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªæ ‡ç­¾é¡µä¿æŒè¿æ¥</li>
</ol>
<h4 data-id="heading-21">6. çŠ¶æ€ç®¡ç†</h4>
<p>åœ¨ Vuex ä¸­ç®¡ç† SSE è¿æ¥çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">sseEvent</span>: <span class="hljs-literal">null</span>  <span class="hljs-comment">// SSE è¿æ¥å®ä¾‹</span>
  },
  <span class="hljs-attr">mutations</span>: {
    <span class="hljs-comment">// è®¾ç½® SSE äº‹ä»¶</span>
    <span class="hljs-title function_">SET_SSE_EVENT</span>(<span class="hljs-params">state, payload</span>) {
      state.<span class="hljs-property">sseEvent</span> = payload
    },
    <span class="hljs-comment">// æ¸…é™¤ SSE äº‹ä»¶</span>
    <span class="hljs-title function_">CLEAR_SSE_EVENT</span>(<span class="hljs-params">state</span>) {
      state.<span class="hljs-property">sseEvent</span> = <span class="hljs-literal">null</span>
    }
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-22">æ–¹æ¡ˆæ€»ç»“</h3>
<h4 data-id="heading-23">æ–¹æ¡ˆä¼˜åŠ¿</h4>
<ol>
<li>
<p><strong>èµ„æºä¼˜åŒ–</strong></p>
<ul>
<li>å¤šä¸ªæ ‡ç­¾é¡µå…±äº«ä¸€ä¸ª SSE è¿æ¥ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›</li>
<li>é™ä½ç½‘ç»œå¸¦å®½æ¶ˆè€—</li>
<li>å‡å°‘å®¢æˆ·ç«¯å†…å­˜å ç”¨</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·ä½“éªŒæå‡</strong></p>
<ul>
<li>æ‰€æœ‰æ ‡ç­¾é¡µæ¶ˆæ¯çŠ¶æ€å®æ—¶åŒæ­¥</li>
<li>é¿å…é‡å¤é€šçŸ¥ï¼Œå‡å°‘å¹²æ‰°</li>
<li>è¿æ¥è‡ªåŠ¨æ¢å¤ï¼Œæ¶ˆæ¯ä¸ä¸¢å¤±</li>
</ul>
</li>
<li>
<p><strong>å®ç°ç®€æ´</strong></p>
<ul>
<li>åŸºäºæµè§ˆå™¨åŸç”Ÿ APIï¼Œæ— éœ€é¢å¤–ä¾èµ–</li>
<li>ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤</li>
<li>å…¼å®¹æ€§å¥½ï¼Œç°ä»£æµè§ˆå™¨å…¨é¢æ”¯æŒ</li>
</ul>
</li>
<li>
<p><strong>æ‰©å±•æ€§å¼º</strong></p>
<ul>
<li>å¯ä»¥è½»æ¾æ·»åŠ æ–°çš„æ¶ˆæ¯ç±»å‹</li>
<li>æ”¯æŒå¤šä¸ª BroadcastChannel é€šé“</li>
<li>ä¾¿äºé›†æˆåˆ°ç°æœ‰é¡¹ç›®</li>
</ul>
</li>
</ol>
<h4 data-id="heading-24">å±€é™æ€§åŠæ³¨æ„äº‹é¡¹</h4>
<ol>
<li>
<p><strong>æµè§ˆå™¨å…¼å®¹æ€§</strong></p>
<ul>
<li>BroadcastChannel ä¸æ”¯æŒ IE å’Œéƒ¨åˆ†æ—§ç‰ˆæµè§ˆå™¨</li>
<li>éœ€è¦æä¾›é™çº§æ–¹æ¡ˆï¼ˆå¦‚ LocalStorage äº‹ä»¶ï¼‰</li>
</ul>
</li>
<li>
<p><strong>åŒæºé™åˆ¶</strong></p>
<ul>
<li>BroadcastChannel åªèƒ½åœ¨åŒæºé¡µé¢é—´é€šä¿¡</li>
<li>è·¨åŸŸåœºæ™¯éœ€è¦ä½¿ç”¨å…¶ä»–æ–¹æ¡ˆï¼ˆå¦‚ postMessageï¼‰</li>
</ul>
</li>
<li>
<p><strong>è¿æ¥ç®¡ç†</strong></p>
<ul>
<li>éœ€è¦å¦¥å–„å¤„ç†æ ‡ç­¾é¡µå…³é—­å’Œåˆ·æ–°åœºæ™¯</li>
<li>é¿å…å†…å­˜æ³„æ¼ï¼ˆåŠæ—¶æ¸…ç†äº‹ä»¶ç›‘å¬ï¼‰</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†</strong></p>
<ul>
<li>SSE è¿æ¥æ–­å¼€æ—¶éœ€è¦é‡è¿æœºåˆ¶</li>
<li>ç½‘ç»œå¼‚å¸¸æ—¶çš„é™çº§ç­–ç•¥</li>
</ul>
</li>
</ol>
<h4 data-id="heading-25">æœ€ä½³å®è·µå»ºè®®</h4>
<ol>
<li>
<p><strong>è¿æ¥ç®¡ç†</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å»ºè®®ï¼šä½¿ç”¨å•ä¾‹æ¨¡å¼ç®¡ç†è¿æ¥</span>
<span class="hljs-comment">// å»ºè®®ï¼šåœ¨åº”ç”¨å…¥å£ç»Ÿä¸€åˆå§‹åŒ–</span>
<span class="hljs-comment">// å»ºè®®ï¼šé¡µé¢å¸è½½æ—¶æ¸…ç†èµ„æº</span>
</code></pre>
</li>
<li>
<p><strong>æ¶ˆæ¯å»é‡</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å»ºè®®ï¼šä¸ºæ¶ˆæ¯æ·»åŠ å”¯ä¸€ ID</span>
<span class="hljs-comment">// å»ºè®®ï¼šä½¿ç”¨ Set æˆ– Map è®°å½•å·²å¤„ç†æ¶ˆæ¯</span>
<span class="hljs-comment">// å»ºè®®ï¼šè®¾ç½®æ¶ˆæ¯è¿‡æœŸæ—¶é—´</span>
</code></pre>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å»ºè®®ï¼šé™åˆ¶ BroadcastChannel æ¶ˆæ¯å¤§å°</span>
<span class="hljs-comment">// å»ºè®®ï¼šä½¿ç”¨é˜²æŠ–å¤„ç†é¢‘ç¹æ¶ˆæ¯</span>
<span class="hljs-comment">// å»ºè®®ï¼šæ‰¹é‡å¤„ç†æ¶ˆæ¯æ›´æ–°</span>
</code></pre>
</li>
<li>
<p><strong>é”™è¯¯æ¢å¤</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å»ºè®®ï¼šå®ç°æŒ‡æ•°é€€é¿é‡è¿ç­–ç•¥</span>
<span class="hljs-comment">// å»ºè®®ï¼šæ·»åŠ è¿æ¥çŠ¶æ€ç›‘æ§</span>
<span class="hljs-comment">// å»ºè®®ï¼šæä¾›æ‰‹åŠ¨é‡è¿åŠŸèƒ½</span>
</code></pre>
</li>
</ol>
<h4 data-id="heading-26">æŠ€æœ¯å¯¹æ¯”æ€»ç»“</h4>









































<table><thead><tr><th>ç‰¹æ€§</th><th>SSE + BroadcastChannel</th><th>WebSocket</th><th>è½®è¯¢</th></tr></thead><tbody><tr><td>å®ç°å¤æ‚åº¦</td><td>â­â­ ç®€å•</td><td>â­â­â­â­ å¤æ‚</td><td>â­ å¾ˆç®€å•</td></tr><tr><td>æœåŠ¡å™¨å‹åŠ›</td><td>â­â­ ä½ï¼ˆå•è¿æ¥ï¼‰</td><td>â­â­â­ ä¸­ç­‰</td><td>â­â­â­â­ é«˜</td></tr><tr><td>å®æ—¶æ€§</td><td>â­â­â­â­ ä¼˜ç§€</td><td>â­â­â­â­â­ æä½³</td><td>â­â­ ä¸€èˆ¬</td></tr><tr><td>å¤šæ ‡ç­¾é¡µæ”¯æŒ</td><td>â­â­â­â­â­ å®Œç¾</td><td>â­â­ éœ€é¢å¤–å¤„ç†</td><td>â­â­â­ ä¸€èˆ¬</td></tr><tr><td>æµè§ˆå™¨å…¼å®¹</td><td>â­â­â­â­ è‰¯å¥½</td><td>â­â­â­â­ è‰¯å¥½</td><td>â­â­â­â­â­ å®Œç¾</td></tr></tbody></table>
<h4 data-id="heading-27">æœªæ¥ä¼˜åŒ–æ–¹å‘</h4>
<ol>
<li><strong>è¿æ¥æ± ç®¡ç†</strong>ï¼šæ”¯æŒå¤šä¸ª SSE è¿æ¥ï¼ŒæŒ‰ä¸šåŠ¡ç±»å‹åˆ†ç¦»</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼šç¦»çº¿æ¶ˆæ¯ç¼“å­˜å’Œé‡æ”¾æœºåˆ¶</li>
<li><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šè¿æ¥è´¨é‡ç›‘æ§å’Œè‡ªåŠ¨ä¼˜åŒ–</li>
<li><strong>é™çº§æ–¹æ¡ˆ</strong>ï¼šå…¼å®¹æ—§æµè§ˆå™¨çš„æ›¿ä»£å®ç°</li>
</ol>
<hr/>
<h3 data-id="heading-28">å‚è€ƒæ–‡æ¡£</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FServer-sent_events" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Server-sent_events" ref="nofollow noopener noreferrer">MDN - Server-Sent Events</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FBroadcastChannel" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/BroadcastChannel" ref="nofollow noopener noreferrer">MDN - BroadcastChannel API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYaffle%2FEventSource" target="_blank" title="https://github.com/Yaffle/EventSource" ref="nofollow noopener noreferrer">EventSource Polyfill</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vuejs.org%2F" target="_blank" title="https://cn.vuejs.org/" ref="nofollow noopener noreferrer">Vue 3 å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<hr/>
<h3 data-id="heading-29">ç»“è¯­</h3>
<p>SSE + BroadcastChannel çš„ç»„åˆæ–¹æ¡ˆä¸ºå¤šæ ‡ç­¾é¡µå®æ—¶æ¶ˆæ¯åŒæ­¥æä¾›äº†ä¸€ä¸ªä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆåœ¨ä¿è¯åŠŸèƒ½å®Œæ•´æ€§çš„åŒæ—¶ï¼Œå…¼é¡¾äº†æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿå¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­æ›´å¥½åœ°åº”ç”¨è¿™äº›æŠ€æœ¯ã€‚</p>
<h4 data-id="heading-30">å†™åœ¨æœ€å</h4>
<p>å¦‚æœä½ åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨äº†è¿™ä¸ªæ–¹æ¡ˆï¼Œæ¬¢è¿åˆ†äº«ä½ çš„ç»éªŒå’Œé‡åˆ°çš„é—®é¢˜ã€‚å¦‚æœä½ æœ‰æ›´å¥½çš„æƒ³æ³•æˆ–ä¼˜åŒ–å»ºè®®ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºã€‚</p>
<p><strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹ä¸ªèµæ”¯æŒä¸€ä¸‹ï¼Œè®©æ›´å¤šå¼€å‘è€…çœ‹åˆ°è¿™ä¸ªæ–¹æ¡ˆï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactéš¾ä¸Šæ‰‹åŸå› æ‰¾åˆ°äº†ï¼ŒåŸæ¥æ˜¯å› ä¸ºå‘å¤ªå¤šäº†ã€‚ã€‚ã€‚]]></title>    <link>https://juejin.cn/post/7588355695100887049</link>    <guid>https://juejin.cn/post/7588355695100887049</guid>    <pubDate>2025-12-28T09:36:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588355695100887049" data-draft-id="7588365276190769190" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactéš¾ä¸Šæ‰‹åŸå› æ‰¾åˆ°äº†ï¼ŒåŸæ¥æ˜¯å› ä¸ºå‘å¤ªå¤šäº†ã€‚ã€‚ã€‚"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-28T09:36:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å°é…è§’"/> <meta itemprop="url" content="https://juejin.cn/user/2135697013880841"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactéš¾ä¸Šæ‰‹åŸå› æ‰¾åˆ°äº†ï¼ŒåŸæ¥æ˜¯å› ä¸ºå‘å¤ªå¤šäº†ã€‚ã€‚ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2135697013880841/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å°é…è§’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:36:37.000Z" title="Sun Dec 28 2025 09:36:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">éƒ½è¯´Reactéš¾ä¸Šæ‰‹ï¼Œé‚£å®ƒåˆ°åº•éš¾åœ¨å“ªé‡Œï¼Ÿ</h2>
<p>äººä»¬æ€»åæ§½Reactç›¸æ¯”Vueä¸Šæ‰‹éš¾åº¦éš¾ä¸å°‘ï¼Œå­¦Vueçš„å¯ä»¥ç«‹å³ä¸Šæ‰‹ï¼Œè€ŒReactåˆ™è¦ä¸ªåå¤©åŠä¸ªæœˆæ‰èƒ½ä¸Šæ‰‹å†™ç‚¹ä¸œè¥¿ï¼Œè€Œä¸”è¿˜å®¹æ˜“å‡ºé”™ã€‚é‚£ä¹ˆReactåˆ°åº•éš¾åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p>
<p>Reactéš¾å°±éš¾åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¤ªå®¹æ˜“é‡åˆ°å‘äº†ï¼Œéœ€è¦å°å¿ƒç¿¼ç¿¼é¿å¼€ä»–ä»¬ï¼Œæ‰å¯ä»¥èµ°çš„é¡ºã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥ç›˜ç‚¹ä¸‹Reactå¼€å‘è¿‡ç¨‹ä¸­å¸¸è§çš„ä¸€äº›å‘å§ã€‚</p>
<h3 data-id="heading-1">Reactç¬¬ä¸€å‘</h3>
<p>setStateå¼‚æ­¥åŒ–è¿™ä¸ªæ˜¯å¾ˆå¤šæ–‡ç« éƒ½ä¼šæçš„ä¸€ä¸ªå‘ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒå‘åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);
    <span class="hljs-comment">// è¿™é‡Œæ‰“å°count</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count)
  };
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>ç‚¹æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ç‚¹å‡»ä¸€æ¬¡â€œç‚¹æˆ‘â€æŒ‰é’®çš„æ—¶å€™ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºå•¥ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š0ã€‚</p>
<p>sateCountå¹¶ä¸æ˜¯ç«‹å³æ‰§è¡Œçš„ï¼Œå› æ­¤è®¾ç½®åç«‹å³è·å–countï¼Œè·å–åˆ°çš„è¿˜æ˜¯åŸæ¥çš„å€¼ã€‚è¦è·å–åˆ°ç¬¬äºŒæ¬¡çš„çŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…Counteræ„é€ å‡½æ•°çš„ä¸‹ä¸€æ¬¡æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-comment">// è¿™é‡Œæ‰“å°count</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count)
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);
  };
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>ç‚¹æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯æƒ³ä¸Šé¢çš„ä»£ç ä¸€æ ·ï¼Œç‚¹å‡»â€œç‚¹æˆ‘â€æŒ‰é’®åï¼Œæ§åˆ¶å°å°†è¾“å‡º1ã€‚</p>
<h3 data-id="heading-2">Reactç¬¬äºŒå‘</h3>
<p>å¤šæ¬¡æ‰§è¡ŒsetCountï¼Œå°±åƒæ‰§è¡Œäº†ä¸€æ¬¡ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªä»£ç ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);
    <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);
    <span class="hljs-title function_">setCount</span>(count + <span class="hljs-number">1</span>);
  };
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>ç‚¹æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      å½“å‰è®¡æ•°ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>å¤§å®¶çœ‹çœ‹ï¼Œå½“ç‚¹å‡»â€œç‚¹æˆ‘â€æŒ‰é’®æ—¶ï¼Œå½“å‰è®¡æ•°æ˜¾ç¤ºçš„æ˜¯å¤šå°‘ï¼Ÿæœ‰äººå¯èƒ½ä¼šè¯´æ˜¯ï¼š3ã€‚</p>
<p>é‚£å°±é”™äº†ï¼Œç­”æ¡ˆå…¶å®æ˜¯1ã€‚è¿™è·Ÿæˆ‘ä»¬çš„é¢„æœŸæœ‰ç‚¹ä¸ä¸€è‡´ï¼Œè¿™å°±æ˜¯å®ƒçš„ç¬¬äºŒä¸ªå‘ã€‚é‚£å¦‚æœè¦è¾¾åˆ°é¢„æœŸï¼Œæˆ‘ä»¬åº”è¯¥æ€ä¹ˆæ”¹å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// å°†countæ”¹æˆä¸€ä¸ªå‡½æ•°(count)=&gt; count + 1</span>
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count + <span class="hljs-number">1</span>);
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count + <span class="hljs-number">1</span>);
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count + <span class="hljs-number">1</span>);
  };
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>ç‚¹æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      å½“å‰è®¡æ•°ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>æœ‰ä¸€ä¸ªå¥‡æ€ªçš„åœ°æ–¹æ˜¯ï¼Œæˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶è™½ç„¶è°ƒç”¨äº†ä¸‰æ¬¡setCountï¼Œä½†æ˜¯æ§åˆ¶å°åªæ‰“å°äº†æœ€åä¸€æ¬¡çš„countç»“æœï¼Œè¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿå…¶å®æ˜¯å› ä¸ºsetCountæ˜¯è®¾ç½®åï¼Œç»„ä»¶çš„æ¸²æŸ“é€šè¿‡ä»»åŠ¡é˜Ÿåˆ—æ¯”å¦‚Promise.thenæˆ–è€…setTimeoutçš„æ–¹å¼å»å¼‚æ­¥æ›´æ–°çš„ï¼Œåœ¨é˜Ÿåˆ—é‡Œé¢åªæ˜¯åˆ¤æ–­æ˜¯å¦æ›´æ–°è¿‡stateå±æ€§ï¼Œæ›´æ–°è¿‡äº†æ‰ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œå› æ­¤å¤šæ¬¡ä¿®æ”¹å±æ€§åï¼Œç»„ä»¶ä»…ä»…åªä¼šæœ‰ä¸€æ¬¡æ›´æ–°ï¼Œè€Œä¸æ˜¯æ¯æ¬¡ä¿®æ”¹çŠ¶æ€éƒ½æ›´æ–°ã€‚å› æ­¤å°±ç®—åƒä¸‹é¢çš„ä»£ç ï¼Œä¹Ÿä¼šå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// å…ˆ+1å-1ï¼Œç›¸å½“äºæ²¡æ”¹</span>
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count + <span class="hljs-number">1</span>);
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function">(<span class="hljs-params">count</span>) =&gt;</span> count - <span class="hljs-number">1</span>);
  };
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>ç‚¹æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      å½“å‰è®¡æ•°ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-3">Reactç¬¬ä¸‰å‘</h3>
<p>å…ˆçœ‹ä»£ç </p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HoverSwitch</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [isOn, setIsOne] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> label = isOn ? <span class="hljs-string">"å…³é—­"</span> : <span class="hljs-string">"å¼€å¯"</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setIsOne</span>(!isOn);
  };

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onMouseMove</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (isOn) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"move"</span>);
      }
    };
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousemove"</span>, onMouseMove);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousemove"</span>, onMouseMove);
    };
  }, []);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>{label}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ç‚¹å‡»â€œå¼€å¯â€æŒ‰é’®åï¼Œåœ¨é¡µé¢ä¸Šé¢ç§»åŠ¨é¼ æ ‡ï¼Œæ§åˆ¶å°æ˜¯å¦ä¼šæ‰“å°â€œmoveâ€ï¼Œç­”æ¡ˆæ˜æ˜¾æ˜¯ä¸ä¼šã€‚é‚£ç©¶ç«Ÿæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>åŸå› æ˜¯useEffectå‡½æ•°æ²¡æœ‰ä¾èµ–ä»»ä½•stateï¼Œå…¶å›è°ƒå‡½æ•°ä»…ä»…åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œè™½ç„¶è¯¥å›è°ƒå‡½æ•°ä¿å­˜äº†isOnè¿™ä¸ªé—­åŒ…ï¼Œä½†æ˜¯å› ä¸ºisOnæ˜¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼Œå½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œæ­¤isOnå·²ç»ä¸æ˜¯åŸæ¥çš„isOnï¼Œè€ŒuseEffectå‡½æ•°ä¿ç•™çš„è¿˜æ˜¯åŸæ¥çš„isOnï¼Œæ‰€ä»¥å…¶å€¼ä¸€ç›´éƒ½æ˜¯falseï¼Œæ•…ä¸ä¼šæ‰“å°â€œmoveâ€ã€‚</p>
<p>é‚£è¦å¦‚ä½•åšå‘¢ï¼Ÿæœ‰ä¸¤ä¸ªä¿®æ”¹æ–¹æ¡ˆï¼Œä¸€æ˜¯useEffectçš„ä¾èµ–åˆ—è¡¨ä¸ŠåŠ ä¸ŠisOnï¼›äºŒæ˜¯isOnæ”¹æˆuseRefï¼Œå³å¼•ç”¨ç±»å‹ã€‚æˆ‘æ›´æ¨èæ–¹æ¡ˆäºŒï¼Œå› ä¸ºä¸ç”¨é‡æ–°æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œèµ„æºæ¶ˆè€—æ›´å°‘ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useEffect, useState, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HoverSwitch</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> isOnRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [label, setLabel] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"å¼€å¯"</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    isOnRef.<span class="hljs-property">current</span> = !isOnRef.<span class="hljs-property">current</span>;
    <span class="hljs-title function_">setLabel</span>(isOnRef.<span class="hljs-property">current</span> ? <span class="hljs-string">"å…³é—­"</span> : <span class="hljs-string">"å¼€å¯"</span>);
  };

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onMouseMove</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (isOnRef.<span class="hljs-property">current</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"move"</span>);
      }
    };
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousemove"</span>, onMouseMove);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousemove"</span>, onMouseMove);
    };
  }, []);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>{label}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ä½†æ˜¯useRefä¹Ÿä½¿ç”¨çš„é™åˆ¶ï¼Œä¸€æ˜¯ä¿®æ”¹refçš„å€¼ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ï¼›äºŒæ˜¯refçš„å€¼åœ¨æ¸²æŸ“æœŸé—´ä¸å¯è¯»å–ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HoverSwitch</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> labelRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-string">'å¼€å¯'</span>);
  <span class="hljs-comment">// ä¸èƒ½ç»„ä»¶çš„æ„é€ å‡½æ•°å†…å®¹è°ƒç”¨labelRef.currentï¼ŒåŒ…æ‹¬ä¸‹é¢çš„divé‡Œé¢</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>{labelRef.current}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘åœ¨ä½¿ç”¨Reactçš„è¿‡ç¨‹ä¸­æ€»ç»“çš„ä¸€äº›å‘ï¼Œå¤§å®¶å°½é‡é¿ä¸€é¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterè¶…å¤§å›¾åƒå¯¼å‡ºæ’ä»¶ï¼šchunked_widget_to_imageæ’ä»¶ä»‹ç»]]></title>    <link>https://juejin.cn/post/7588152122187694134</link>    <guid>https://juejin.cn/post/7588152122187694134</guid>    <pubDate>2025-12-28T09:47:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588152122187694134" data-draft-id="7588092534162915328" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterè¶…å¤§å›¾åƒå¯¼å‡ºæ’ä»¶ï¼šchunked_widget_to_imageæ’ä»¶ä»‹ç»"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-12-28T09:47:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BG"/> <meta itemprop="url" content="https://juejin.cn/user/462236743902190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterè¶…å¤§å›¾åƒå¯¼å‡ºæ’ä»¶ï¼šchunked_widget_to_imageæ’ä»¶ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/462236743902190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:47:57.000Z" title="Sun Dec 28 2025 09:47:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å“ˆå–½ï¼Œå„ä½ Flutter å¼€å‘è€…ä»¬ï¼ä»Šå¤©æˆ‘è¦ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªéå¸¸å®ç”¨çš„ Flutter æ’ä»¶ - <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbg-1998%2Fchunked_widget_to_image.git" target="_blank" title="https://github.com/bg-1998/chunked_widget_to_image.git" ref="nofollow noopener noreferrer">chunked_widget_to_image</a>ï¼</p>
<p>ä½œä¸ºä¸€ä¸ªç»å¸¸éœ€è¦å¤„ç†å›¾åƒå¯¼å‡ºçš„å¼€å‘è€…ï¼Œä½ æ˜¯å¦ä¹Ÿæ›¾ä¸º Flutter æ— æ³•å¤„ç†è¶…å¤§å›¾åƒå¯¼å‡ºè€Œè‹¦æ¼ï¼Ÿæ˜¯å¦ä¹Ÿå¸Œæœ›æœ‰ä¸€ä¸ªèƒ½å¤Ÿçªç ´å¹³å°é™åˆ¶çš„å¼ºå¤§å›¾åƒå¯¼å‡ºå·¥å…·ï¼Ÿé‚£ä¹ˆä»Šå¤©ä»‹ç»çš„è¿™ä¸ªæ’ä»¶ï¼Œç»å¯¹èƒ½è®©ä½ çœ¼å‰ä¸€äº®ï¼</p>
<blockquote>
<p>ä»€ä¹ˆï¼Ÿä½ è¯´ä½ æ²¡é‡åˆ°è¿‡è¶…å¤§å›¾åƒå¯¼å‡ºéœ€æ±‚ï¼Ÿé‚£ä½ ä¹Ÿåº”è¯¥çœ‹çœ‹ï¼Œè¯´ä¸å®šå“ªå¤©å°±ç”¨ä¸Šäº†å‘¢~</p>
</blockquote>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹© chunked_widget_to_imageï¼Ÿ</h2>
<p>åœ¨ Flutter ç”Ÿæ€ä¸­ï¼Œè™½ç„¶æœ‰ä¸€äº›æˆªå›¾å·¥å…·ï¼Œä½†å¯¹äºè¶…å¤§å°ºå¯¸çš„å›¾åƒå¯¼å‡ºå¾€å¾€åŠ›ä¸ä»å¿ƒï¼Œå®¹æ˜“å‡ºç°å†…å­˜æº¢å‡ºæˆ–å¹³å°çº¹ç†é™åˆ¶ç­‰é—®é¢˜ã€‚è€Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbg-1998%2Fchunked_widget_to_image.git" target="_blank" title="https://github.com/bg-1998/chunked_widget_to_image.git" ref="nofollow noopener noreferrer">chunked_widget_to_image</a> åˆ™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºè§£å†³è¿™äº›é—®é¢˜è€Œè®¾è®¡çš„æ’ä»¶ï¼Œå®ƒé‡‡ç”¨äº†åˆ›æ–°çš„åˆ†å—å¤„ç†æŠ€æœ¯ï¼Œå¯ä»¥è½»æ¾åº”å¯¹å„ç§è¶…å¤§å›¾åƒå¯¼å‡ºéœ€æ±‚ã€‚</p>
<p>è®©æˆ‘æ¥ç»™ä½ å±•ç¤ºä¸€ä¸‹å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>è¶…å¤§å›¾åƒæ”¯æŒ</strong>ï¼šçªç ´å¤§å¤šæ•°å¹³å°çš„çº¹ç†é™åˆ¶ï¼ˆæœ€å¤§æ”¯æŒ 16384 åƒç´ å®½é«˜ï¼‰ï¼Œæ”¯æŒå¯¼å‡ºè¶…å¤§å°ºå¯¸å›¾åƒ</li>
<li><strong>åˆ†å—å¤„ç†æœºåˆ¶</strong>ï¼šé‡‡ç”¨æ™ºèƒ½åˆ†å—æŠ€æœ¯ï¼Œæœ‰æ•ˆé¿å…å†…å­˜é—®é¢˜</li>
<li><strong>å¤šæ ¼å¼æ”¯æŒ</strong>ï¼šæ”¯æŒ PNG å’Œ JPEG æ ¼å¼å¯¼å‡º</li>
<li><strong>çµæ´»æ¸²æŸ“æ¨¡å¼</strong>ï¼šæ”¯æŒæ™®é€šæ¸²æŸ“å’Œç¦»å±æ¸²æŸ“</li>
<li><strong>é¢„ç¼–è¯‘é™æ€åº“</strong>ï¼šä½¿ç”¨é¢„ç¼–è¯‘é™æ€åº“æ›¿ä»£æ„å»ºæ—¶ç¼–è¯‘ï¼Œæä¾›æ›´å¿«çš„æ„å»ºæ—¶é—´å’Œä¸€è‡´çš„è¡Œä¸º</li>
<li><strong>é«˜æ€§èƒ½åŸç”Ÿæ”¯æŒ</strong>ï¼šé›†æˆäº† libpng å’Œ libjpeg-turbo åŸç”Ÿåº“ï¼Œä¿è¯é«˜è´¨é‡å’Œæ€§èƒ½</li>
</ul>
<p>æ˜¯ä¸æ˜¯æ„Ÿè§‰åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Ÿåˆ«æ€¥ï¼Œè¿˜æœ‰æ›´è¯¦ç»†çš„ä»‹ç»ç­‰ç€ä½ å‘¢ï¼</p>
<h2 data-id="heading-2">å·¥ä½œåŸç†æ­ç§˜</h2>
<h3 data-id="heading-3">åˆ†å—å¤„ç†æŠ€æœ¯</h3>
<p>æ’ä»¶çš„æ ¸å¿ƒåœ¨äºå…¶ç‹¬ç‰¹çš„åˆ†å—å¤„ç†æœºåˆ¶ã€‚é€šè¿‡å°†å¤§å›¾åƒåˆ†å‰²æˆå¤šä¸ªè¾ƒå°çš„å—é€ä¸€å¤„ç†ï¼Œé¿å…äº†ä¸€æ¬¡æ€§åŠ è½½æ•´ä¸ªå›¾åƒé€ æˆçš„å†…å­˜å‹åŠ›ã€‚åœ¨æºç ä¸­å¯ä»¥çœ‹åˆ°å…·ä½“çš„å®ç°é€»è¾‘ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;Rect&gt; chunksRect = [];
<span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> totalHeight = convSize.height;
<span class="hljs-built_in">double</span> dy = <span class="hljs-number">0</span>;
<span class="hljs-keyword">while</span> (dy &lt; totalHeight) {
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">double</span> currentChunkHeight =
  (dy + chunkHeight &lt;= totalHeight)
      ? chunkHeight
      : totalHeight - dy;
  chunksRect.add(Rect.fromLTWH(<span class="hljs-number">0</span>, dy,
      convSize.width,
      currentChunkHeight));
  dy += chunkHeight;
}
</code></pre>
<p>è¿™ç§åˆ†å—ç­–ç•¥ç¡®ä¿äº†å³ä½¿æ˜¯éå¸¸å¤§çš„å›¾åƒä¹Ÿèƒ½è¢«é¡ºåˆ©å¤„ç†ã€‚æ’ä»¶å†…éƒ¨ä¼šè‡ªåŠ¨è®¡ç®—åˆé€‚çš„åƒç´ æ¯”ï¼Œä»¥ç¡®ä¿å›¾åƒåœ¨å„ç§å¹³å°ä¸Šéƒ½èƒ½æ­£ç¡®å¯¼å‡ºï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">if</span>(size.width*pixelRatio &gt; _kMaxChunkSize||
    size.height*pixelRatio &gt; _kMaxChunkSize){
  pixelRatio = pixelRatio*(_kMaxChunkSize/math.max(size.width,size.height));
}
</code></pre>
<h3 data-id="heading-4">åŸç”Ÿåº“é›†æˆ</h3>
<p>ä¸ºäº†ä¿è¯å›¾åƒè´¨é‡å’Œå¤„ç†æ€§èƒ½ï¼Œæ’ä»¶æ·±åº¦é›†æˆäº†ä¸¤ä¸ªè‘—åçš„å›¾åƒå¤„ç†åº“ï¼š</p>
<ul>
<li><strong>libpng</strong>ï¼šç”¨äº PNG æ ¼å¼çš„ç¼–ç å¤„ç†</li>
<li><strong>libjpeg-turbo</strong>ï¼šç”¨äº JPEG æ ¼å¼çš„ç¼–ç å¤„ç†</li>
</ul>
<p>è¿™äº›åŸç”Ÿåº“é€šè¿‡ C/C++ å®ç°ï¼Œæä¾›äº†æ¯”çº¯ Dart å®ç°æ›´é«˜çš„æ€§èƒ½å’Œæ›´å¥½çš„å›¾åƒè´¨é‡ã€‚</p>
<h3 data-id="heading-5">C å±‚å®ç°ç»†èŠ‚</h3>
<p>æ’ä»¶çš„é«˜æ€§èƒ½å®ç°ä¸ä»…ä¾èµ–äº Dart å±‚çš„åˆ†å—ç­–ç•¥ï¼ŒC å±‚çš„å®ç°ä¹Ÿè‡³å…³é‡è¦ã€‚åœ¨ C å±‚ï¼Œæ’ä»¶ä¸º PNG å’Œ JPEG ä¸¤ç§æ ¼å¼åˆ†åˆ«æä¾›äº†é«˜æ•ˆçš„å¤„ç†å‡½æ•°ã€‚</p>
<h4 data-id="heading-6">PNG æ ¼å¼å¤„ç†</h4>
<p>PNG æ ¼å¼çš„å¤„ç†ä¸»è¦é€šè¿‡ <code>widget_png.c</code> å®ç°ï¼Œå…¶æ ¸å¿ƒé€»è¾‘åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡åˆ›å»º</strong> (<code>create_png_context</code>)ï¼šåˆå§‹åŒ– PNG å†™å…¥ç»“æ„ï¼Œè®¾ç½®å›¾åƒå‚æ•°ï¼ŒåŒ…æ‹¬å®½åº¦ã€é«˜åº¦å’Œé¢œè‰²ç±»å‹ç­‰</li>
<li><strong>æ•°æ®å†™å…¥</strong> (<code>write_png_data</code>)ï¼šå°† RGBA æ•°æ®åˆ†å—å†™å…¥ PNG æ–‡ä»¶ï¼Œå…¶ä¸­ä½¿ç”¨äº† <code>MAX_BLOCK_WIDTH_PX</code>ï¼ˆ5120*4 åƒç´ ï¼‰ä½œä¸ºæœ€å¤§åˆ†å—å®½åº¦ï¼Œä»¥ç¡®ä¿å¤§å›¾åƒçš„ç¨³å®šå¤„ç†</li>
<li><strong>èµ„æºæ¸…ç†</strong> (<code>save_png_image</code>)ï¼šå®Œæˆ PNG æ–‡ä»¶å†™å…¥å¹¶é‡Šæ”¾ç›¸å…³èµ„æº</li>
</ol>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// PNG æ•°æ®å†™å…¥çš„æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> row_idx = <span class="hljs-number">0</span>; row_idx &lt; row_count; row_idx++) {
    <span class="hljs-built_in">memset</span>(row_buf, <span class="hljs-number">0</span>, src_stride);
    <span class="hljs-comment">// å½“å‰è¡Œçš„åŸå§‹ RGBA æ•°æ®èµ·å§‹åœ°å€</span>
    png_bytep curr_row_data = rgba_data + (row_idx * src_stride);
    <span class="hljs-comment">// æŒ‰ 5120*4 åƒç´ å®½åº¦çºµå‘åˆ‡å‰²å½“å‰è¡Œï¼Œé€å—å¡«å……</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> block_x = <span class="hljs-number">0</span>; block_x &lt; src_stride; block_x += MAX_BLOCK_WIDTH_PX) {
        <span class="hljs-type">int</span> curr_block_width_px = (block_x + MAX_BLOCK_WIDTH_PX) &gt; src_stride
                                  ? (src_stride - block_x)
                                  : MAX_BLOCK_WIDTH_PX;
        <span class="hljs-built_in">memcpy</span>(
                row_buf + block_x,    <span class="hljs-comment">// ç›®æ ‡ï¼šè¡Œç¼“å†²åŒºçš„å—ä½ç½®</span>
                curr_row_data + block_x, <span class="hljs-comment">// æºï¼šåŸå§‹æ•°æ®çš„å—ä½ç½®</span>
                curr_block_width_px            <span class="hljs-comment">// æ‹·è´å­—èŠ‚æ•°</span>
        );
    }
    png_write_rows(png_ptr, &amp;row_buf, <span class="hljs-number">1</span>);
}
</code></pre>
<h4 data-id="heading-7">JPEG æ ¼å¼å¤„ç†</h4>
<p>JPEG æ ¼å¼çš„å¤„ç†é€šè¿‡ <code>widget_jpeg.c</code> å®ç°ï¼Œå…¶å…³é”®ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡åˆ›å»º</strong> (<code>create_jpeg_context</code>)ï¼šåˆå§‹åŒ– JPEG å‹ç¼©ç»“æ„ï¼Œè®¾ç½®å›¾åƒå‚æ•°å’Œè´¨é‡ï¼ˆé»˜è®¤ 100%ï¼Œä½¿ç”¨æœ€å¿« DCT æ–¹æ³•ï¼‰</li>
<li><strong>æ•°æ®å†™å…¥</strong> (<code>write_jpeg_data</code>)ï¼šå°† RGBA æ•°æ®è½¬æ¢ä¸º I420 æ ¼å¼åå†å†™å…¥ JPEGï¼Œè¿™åˆ©ç”¨äº† JPEG åŸç”Ÿçš„ YUV è‰²å½©ç©ºé—´ä¼˜åŠ¿</li>
<li><strong>èµ„æºæ¸…ç†</strong> (<code>save_jpeg_image</code>)ï¼šå®Œæˆ JPEG æ–‡ä»¶å†™å…¥å¹¶é‡Šæ”¾ç›¸å…³èµ„æº</li>
</ol>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// RGBA â†’ I420 è½¬æ¢å¹¶å†™å…¥ JPEG</span>
rgba_to_i420(
        rgba_data,
        src_stride,
        y_plane,
        width,
        u_plane,
        width / <span class="hljs-number">2</span>,
        v_plane,
        width / <span class="hljs-number">2</span>,
        width,
        row_count
);

<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> y = <span class="hljs-number">0</span>; y &lt; row_count; y++) {
    <span class="hljs-type">uint8_t</span>* y_row = y_plane + y * width;
    <span class="hljs-type">uint8_t</span>* u_row = u_plane + (y / <span class="hljs-number">2</span>) * (width / <span class="hljs-number">2</span>);
    <span class="hljs-type">uint8_t</span>* v_row = v_plane + (y / <span class="hljs-number">2</span>) * (width / <span class="hljs-number">2</span>);

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x = <span class="hljs-number">0</span>; x &lt; width; x++) {
        jpeg_row[x * <span class="hljs-number">3</span> + <span class="hljs-number">0</span>] = y_row[x];
        jpeg_row[x * <span class="hljs-number">3</span> + <span class="hljs-number">1</span>] = u_row[x &gt;&gt; <span class="hljs-number">1</span>];
        jpeg_row[x * <span class="hljs-number">3</span> + <span class="hljs-number">2</span>] = v_row[x &gt;&gt; <span class="hljs-number">1</span>];
    }
    jpeg_write_scanlines(cinfo, row_ptr, <span class="hljs-number">1</span>);
    ctx-&gt;current_row++;
}
</code></pre>
<p>C å±‚å®ç°è¿˜åŒ…å«é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œä½¿ç”¨ <code>setjmp</code>/<code>longjmp</code> æ¥æ•è·å’Œå¤„ç† JPEG å’Œ PNG ç¼–ç è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é”™è¯¯ï¼Œç¡®ä¿æ’ä»¶çš„ç¨³å®šæ€§å’Œå¥å£®æ€§ã€‚</p>
<h3 data-id="heading-8">Isolate ä¸­çš„å›¾åƒç¼–ç </h3>
<p>æ’ä»¶åœ¨è®¾è®¡æ—¶ç‰¹åˆ«å…³æ³¨äº† UI çº¿ç¨‹çš„æ€§èƒ½ï¼Œæ‰€æœ‰å›¾åƒç¼–ç å’Œä¿å­˜æ“ä½œéƒ½åœ¨ç‹¬ç«‹çš„ isolate ä¸­æ‰§è¡Œï¼Œé¿å…äº†ä¸»çº¿ç¨‹ UI å¡é¡¿çš„é—®é¢˜ã€‚åœ¨ Dart å±‚ï¼Œæ’ä»¶é€šè¿‡ <code>compute</code> å‡½æ•°å°†å›¾åƒå†™å…¥ä»»åŠ¡åˆ†é…åˆ°åå° isolateï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">static</span> Future&lt;<span class="hljs-built_in">int</span>&gt; executeWriteImage(WriteImageComputeParams params) <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> compute(
    executeWriteImageIsolate,
    params,
  );
}

<span class="hljs-built_in">int</span> executeWriteImageIsolate(WriteImageComputeParams params) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-built_in">int</span> result = _writeWidgetToImage(params);
    <span class="hljs-keyword">return</span> result;
  } <span class="hljs-keyword">finally</span> {
  }
}
</code></pre>
<p>è¿™ç§è®¾è®¡ç¡®ä¿äº†å³ä½¿åœ¨å¤„ç†å¤§å‹å›¾åƒæ—¶ï¼ŒFlutter åº”ç”¨çš„ UI ä¹Ÿèƒ½ä¿æŒæµç•…å“åº”ï¼Œä¸ºç”¨æˆ·æä¾›äº†æ›´å¥½çš„ä½“éªŒã€‚</p>
<h2 data-id="heading-9">å®‰è£…ä¸é…ç½®æŒ‡å—</h2>
<h3 data-id="heading-10">1. æ·»åŠ ä¾èµ–</h3>
<p>åœ¨ä½ çš„ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">pubspec.yaml</a> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">chunked_widget_to_image:</span> <span class="hljs-string">^1.0.0</span>
</code></pre>
<h3 data-id="heading-11">2. å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">flutter pub get
</code></pre>
<h3 data-id="heading-12">3. é…ç½®è¯´æ˜ï¼ˆé‡è¦å˜æ›´ï¼‰</h3>
<p>ä¸æ—©æœŸç‰ˆæœ¬ä¸åŒï¼Œæ’ä»¶ç°åœ¨ä½¿ç”¨<strong>é¢„ç¼–è¯‘é™æ€åº“</strong>è¿›è¡Œå›¾åƒå¤„ç†ï¼Œè€Œä¸æ˜¯æ„å»ºæ—¶é…ç½®é€‰é¡¹ã€‚è¿™ä¸€é‡å¤§å˜æ›´æ„å‘³ç€ï¼š</p>
<ul>
<li>æ›´å¿«çš„æ„å»ºæ—¶é—´</li>
<li>è·¨ç¯å¢ƒçš„ä¸€è‡´è¡Œä¸º</li>
<li>ç®€åŒ–çš„æ„å»ºå¤æ‚åº¦</li>
<li><strong>ç§»é™¤äº†æ„å»ºæ—¶é…ç½®é€‰é¡¹</strong> (CHUNKED_WIDGET_TO_PNG å’Œ CHUNKED_WIDGET_TO_JPEG)</li>
</ul>
<p>è¿™ç§æ–¹æ³•æ¶ˆé™¤äº†æ„å»ºæ—¶ç¯å¢ƒå˜é‡çš„éœ€æ±‚ï¼Œå¹¶æä¾›æ›´å¿«çš„æ„å»ºæ—¶é—´ã€‚æ‰€æœ‰æ”¯æŒçš„å¹³å°éƒ½ä½¿ç”¨é¢„ç¼–è¯‘çš„é™æ€åº“ã€‚</p>
<h2 data-id="heading-13">å¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹</h2>
<h3 data-id="heading-14">åŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åˆ›å»ºæ§åˆ¶å™¨</span>
<span class="hljs-keyword">final</span> controller = WidgetToImageController();

<span class="hljs-comment">// åœ¨ Widget æ ‘ä¸­ä½¿ç”¨</span>
WidgetToImage(
  controller: controller,
  child: YourWidget(), <span class="hljs-comment">// ä½ æƒ³è¦è½¬æ¢ä¸ºå›¾ç‰‡çš„ widget</span>
),

<span class="hljs-comment">// å¯¼å‡ºä¸ºå›¾ç‰‡æ–‡ä»¶</span>
controller.toImageFile(
  outPath: <span class="hljs-string">'/path/to/output.png'</span>,
  format: ImageFormat.png,
  callback: (result, message) {
    <span class="hljs-keyword">if</span> (result) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'å›¾ç‰‡å¯¼å‡ºæˆåŠŸ: <span class="hljs-subst">$message</span>'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'å›¾ç‰‡å¯¼å‡ºå¤±è´¥: <span class="hljs-subst">$message</span>'</span>);
    }
  },
);
</code></pre>
<h3 data-id="heading-15">ç¦»å±æ¸²æŸ“</h3>
<p>å¯¹äºä¸éœ€è¦æ·»åŠ åˆ° widget æ ‘ä¸­çš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ç¦»å±æ¸²æŸ“åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">controller.toImageFileFromWidget(
  YourWidget(),
  outPath: <span class="hljs-string">'/path/to/output.jpg'</span>,
  format: ImageFormat.jpg,
  callback: (result, message) {
    <span class="hljs-comment">// å¤„ç†ç»“æœ</span>
  },
);
</code></pre>
<h3 data-id="heading-16">é•¿å†…å®¹å¤„ç†</h3>
<p>é’ˆå¯¹é•¿åˆ—è¡¨æˆ–é•¿å†…å®¹ï¼Œæ’ä»¶æä¾›äº†ä¸“é—¨çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">controller.toImageFileFromLongWidget(
  YourLongWidget(),
  outPath: <span class="hljs-string">'/path/to/output.png'</span>,
  format: ImageFormat.png,
  callback: (result, message) {
    <span class="hljs-comment">// å¤„ç†ç»“æœ</span>
  },
);
</code></pre>
<h2 data-id="heading-17">å¹³å°æ”¯æŒæƒ…å†µ</h2>
<p>æ’ä»¶æ ¹æ®å¹³å°ä½¿ç”¨ä¸åŒçš„å®ç°æ–¹å¼ï¼š</p>
<ul>
<li><strong>æ”¯æŒå¹³å°</strong> (Android/iOS/macOS/Windows): ä½¿ç”¨åŸç”Ÿåº“(libpng, libjpeg-turbo)ä¿è¯é«˜æ€§èƒ½å’Œé«˜è´¨é‡</li>
<li><strong>Linux å¹³å°</strong>: ç›®å‰æš‚ä¸æ”¯æŒï¼ˆåœ¨ pubspec.yaml ä¸­å·²è¢«æ³¨é‡Šï¼‰</li>
</ul>
<blockquote>
<p><strong>é‡è¦å˜æ›´</strong>ï¼šmacOS å¹³å°ç°åœ¨ä»…æ”¯æŒ ARM64 æ¶æ„ (Apple Silicon)ã€‚æ­¤å˜æ›´ç®€åŒ–äº†åˆ†å‘å¹¶ç¡®ä¿åœ¨ç°ä»£ macOS è®¾å¤‡ä¸Šçš„æœ€ä½³æ€§èƒ½ã€‚</p>
</blockquote>
<h2 data-id="heading-18">å®é™…åº”ç”¨åœºæ™¯</h2>
<ol>
<li><strong>é•¿å›¾æ–‡åˆ†äº«</strong>ï¼šç¤¾äº¤åª’ä½“ä¸­çš„é•¿å›¾åˆ†äº«åŠŸèƒ½</li>
<li><strong>æŠ¥è¡¨å¯¼å‡º</strong>ï¼šå°†å¤æ‚çš„æ•°æ®å¯è§†åŒ–å›¾è¡¨å¯¼å‡ºä¸ºé«˜æ¸…å›¾åƒ</li>
<li><strong>è¯ä¹¦ç”Ÿæˆ</strong>ï¼šåŠ¨æ€ç”Ÿæˆå¹¶ä¿å­˜ä¸ªæ€§åŒ–è¯ä¹¦</li>
<li><strong>åœ°å›¾å¿«ç…§</strong>ï¼šæˆªå–å¤§å°ºå¯¸åœ°å›¾è§†å›¾ä¸ºæœ¬åœ°æ–‡ä»¶</li>
<li><strong>æ–‡æ¡£é¢„è§ˆ</strong>ï¼šå°†å¤šé¡µæ–‡æ¡£å†…å®¹å¯¼å‡ºä¸ºå›¾åƒåºåˆ—</li>
</ol>
<h2 data-id="heading-19">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<ol>
<li><strong>åˆç†è®¾ç½®åˆ†å—å¤§å°</strong>ï¼šæ’ä»¶å†…éƒ¨ä¼šè‡ªåŠ¨è®¡ç®—åˆé€‚çš„åˆ†å—å¤§å°ï¼Œä»¥åœ¨å†…å­˜å ç”¨å’Œå¤„ç†æ•ˆç‡é—´æ‰¾åˆ°å¹³è¡¡ç‚¹</li>
<li><strong>é€‰æ‹©åˆé€‚çš„å›¾åƒæ ¼å¼</strong>ï¼šJPEG é€‚åˆç…§ç‰‡ç±»å†…å®¹ï¼ŒPNG é€‚åˆå›¾å½¢å’Œç•Œé¢æˆªå›¾</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šå›¾åƒå¯¼å‡ºæ˜¯è€—æ—¶æ“ä½œï¼Œæ’ä»¶å†…éƒ¨å·²å®ç°å¼‚æ­¥å¤„ç†ï¼ŒåŠ¡å¿…åœ¨åå°çº¿ç¨‹æ‰§è¡Œ</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šæ’ä»¶å†…éƒ¨ä¼šè‡ªåŠ¨å¤„ç†å›¾åƒå†…å­˜é‡Šæ”¾ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
</ol>
<h2 data-id="heading-20">é”™è¯¯å¤„ç†</h2>
<p>å½“æŸä¸ªåŠŸèƒ½åœ¨ç¼–è¯‘æ—¶è¢«ç¦ç”¨ï¼Œè€Œç”¨æˆ·è¯•å›¾ä½¿ç”¨å®ƒæ—¶ï¼š</p>
<ul>
<li>å‡½æ•°å°†è¿”å›é”™è¯¯ç  <code>-1</code> è¡¨ç¤ºè¯¥åŠŸèƒ½ä¸å¯ç”¨</li>
<li>ä¸ä¼šå‘ç”Ÿå´©æºƒæˆ–æœªå®šä¹‰çš„è¡Œä¸º</li>
</ul>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbg-1998%2Fchunked_widget_to_image.git" target="_blank" title="https://github.com/bg-1998/chunked_widget_to_image.git" ref="nofollow noopener noreferrer">chunked_widget_to_image</a> æ’ä»¶ä¸º Flutter å¼€å‘è€…æä¾›äº†ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„å›¾åƒå¯¼å‡ºè§£å†³æ–¹æ¡ˆã€‚æ— è®ºæ˜¯ç®€å•çš„ widget æˆªå›¾è¿˜æ˜¯å¤æ‚çš„è¶…å¤§å›¾åƒå¤„ç†ï¼Œå®ƒéƒ½èƒ½èƒœä»»ã€‚é€šè¿‡å·§å¦™çš„åˆ†å—æŠ€æœ¯å’ŒåŸç”Ÿåº“é›†æˆï¼Œè§£å†³äº†ä¼ ç»Ÿæˆªå›¾æ–¹å¼é¢ä¸´çš„è¯¸å¤šé™åˆ¶ã€‚</p>
<p>æ’ä»¶åœ¨ 1.0.0 ç‰ˆæœ¬ä¸­è¿›è¡Œäº†é‡å¤§é‡æ„ï¼Œé‡‡ç”¨é¢„ç¼–è¯‘é™æ€åº“çš„æ–¹å¼ï¼Œæ˜¾è‘—æå‡äº†æ„å»ºæ•ˆç‡å’Œè·¨å¹³å°ä¸€è‡´æ€§ã€‚è™½ç„¶ç§»é™¤äº†æŒ‰éœ€ç¼–è¯‘çš„åŠŸèƒ½ï¼Œä½†æ¢æ¥äº†æ›´å¿«çš„æ„å»ºé€Ÿåº¦å’Œæ›´ç¨³å®šçš„è¿è¡Œæ—¶è¡¨ç°ã€‚</p>
<p>å¦‚æœä½ åœ¨é¡¹ç›®ä¸­é‡åˆ°å›¾åƒå¯¼å‡ºç›¸å…³çš„éœ€æ±‚ï¼Œä¸å¦¨è¯•è¯•è¿™æ¬¾æ’ä»¶ã€‚å®ƒçš„è®¾è®¡ç†å¿µå’Œå®ç°æ–¹å¼ä¹Ÿä¸ºæˆ‘ä»¬åœ¨å¤„ç†å…¶ä»–å¤§æ–‡ä»¶æˆ–å¤§æ•°æ®åœºæ™¯æ—¶æä¾›äº†å¾ˆå¥½çš„å‚è€ƒæ€è·¯ã€‚</p>
<p>æ’ä»¶ç›®å‰ä»åœ¨ç§¯æå¼€å‘ä¸­ï¼Œæ¬¢è¿å¤§å®¶åœ¨ GitHub ä¸Šæå‡º issue å’Œ PRï¼Œå…±åŒå®Œå–„è¿™ä¸ªå®ç”¨å·¥å…·ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ chunked_widget_to_image æ’ä»¶ï¼</p>
<h3 data-id="heading-22">é¡¹ç›®ä¿¡æ¯</h3>
<ul>
<li>åŒ…åï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbg-1998%2Fchunked_widget_to_image.git" target="_blank" title="https://github.com/bg-1998/chunked_widget_to_image.git" ref="nofollow noopener noreferrer">chunked_widget_to_image</a></li>
<li>æ”¯æŒå¹³å°ï¼šAndroidã€iOSã€Windowsã€macOSï¼ˆLinux æš‚ä¸æ”¯æŒï¼‰</li>
<li>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbg-1998%2Fchunked_widget_to_image.git" target="_blank" title="https://github.com/bg-1998/chunked_widget_to_image.git" ref="nofollow noopener noreferrer">github.com/bg-1998/chuâ€¦</a></li>
</ul>
<h3 data-id="heading-23">å®‰è£…æ–¹å¼</h3>
<pre><code class="hljs language-bash" lang="bash">flutter pub add chunked_widget_to_image
</code></pre>
<blockquote>
<p>P.S. ä»¥ä¸Šæ–‡ç« å†…å®¹ç”±AIæ€»ç»“.</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js åŸç”Ÿå®ç°JSON-RPCåŠé•¿è¿›ç¨‹åŒå‘é€šä¿¡å®è·µ]]></title>    <link>https://juejin.cn/post/7588365276190801958</link>    <guid>https://juejin.cn/post/7588365276190801958</guid>    <pubDate>2025-12-28T10:22:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588365276190801958" data-draft-id="7588140921248841766" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js åŸç”Ÿå®ç°JSON-RPCåŠé•¿è¿›ç¨‹åŒå‘é€šä¿¡å®è·µ"/> <meta itemprop="keywords" content="Node.js"/> <meta itemprop="datePublished" content="2025-12-28T10:22:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æµä¸€"/> <meta itemprop="url" content="https://juejin.cn/user/1380642336812808"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js åŸç”Ÿå®ç°JSON-RPCåŠé•¿è¿›ç¨‹åŒå‘é€šä¿¡å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1380642336812808/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æµä¸€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T10:22:26.000Z" title="Sun Dec 28 2025 10:22:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Node.js åŸç”Ÿå®ç°JSON-RPCåŠé•¿è¿›ç¨‹åŒå‘é€šä¿¡å®è·µ</h2>
<h3 data-id="heading-1">é—®é¢˜</h3>
<p>ç”±äºè´Ÿè´£çš„ä¸šåŠ¡é¡¹ç›®ä¸­åŸæ¥çš„æ¶æ„æ¯ä¸ªæ“ä½œéƒ½ spawn ä¸€ä¸ª Pythonå¤§æ¨¡å‹çš„ è¿›ç¨‹ï¼Œæ‰§è¡Œå®Œå°±é€€å‡ºã€‚å½“ Agent éœ€è¦äººæœºäº¤äº’ï¼ˆ<code>help_needed</code>ï¼‰æ—¶ï¼Œè¿›ç¨‹å·²ç»ç»“æŸäº†ï¼Œ<code>submitUserResponse</code> æ²¡æ³•æŠŠå“åº”ä¼ å›å»ã€‚</p>
<h3 data-id="heading-2">è§£å†³æ€è·¯</h3>
<p>æ”¹æˆé•¿è¿›ç¨‹ï¼ŒPython å¯åŠ¨åä¸é€€å‡ºï¼Œé€šè¿‡ stdin/stdout æŒç»­é€šä¿¡ã€‚</p>
<h3 data-id="heading-3">åè®®è®¾è®¡</h3>
<p>ç”¨ JSON-RPC é£æ ¼ï¼Œæ¯è¡Œä¸€ä¸ª JSONã€‚</p>
<p><strong>è¯·æ±‚ï¼ˆJS â†’ Python stdinï¼‰ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"req_1"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"get_llm_providers"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å“åº”ï¼ˆPython stdout â†’ JSï¼‰ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">RESPONSE</span>]{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"id"</span>:<span class="hljs-string">"req_1"</span>,<span class="hljs-string">"result"</span>:{...}}
</code></pre>
<p><strong>äº‹ä»¶é€šçŸ¥ï¼ˆPython â†’ JSï¼‰ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">EVENT</span>]{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"help_needed"</span>,<span class="hljs-string">"params"</span>:{<span class="hljs-string">"query"</span>:<span class="hljs-string">"éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿ"</span>}}
</code></pre>
<p>åŠ å‰ç¼€ <code>[RESPONSE]</code> å’Œ <code>[EVENT]</code> æ˜¯ä¸ºäº†å’Œå…¶ä»–æ—¥å¿—åŒºåˆ†å¼€ã€‚</p>
<h3 data-id="heading-4">Python ç«¯å®ç°</h3>
<p>æ ¸å¿ƒæ˜¯ä¸€ä¸ªæ­»å¾ªç¯è¯» stdinï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DaemonWrapper</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.wrapper = BRTWrapper()  <span class="hljs-comment"># å¤ç”¨åŒä¸€ä¸ªå®ä¾‹ï¼ŒçŠ¶æ€ä¿æŒ</span>
        self.running = <span class="hljs-literal">True</span>
        
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">read_stdin_line</span>(<span class="hljs-params">self</span>):
        loop = asyncio.get_event_loop()
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> loop.run_in_executor(<span class="hljs-literal">None</span>, sys.stdin.readline)
        
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>(<span class="hljs-params">self</span>):
        self.send_event(<span class="hljs-string">'ready'</span>, {<span class="hljs-string">'message'</span>: <span class="hljs-string">'å®ˆæŠ¤è¿›ç¨‹å·²å°±ç»ª'</span>})
        
        <span class="hljs-keyword">while</span> self.running:
            line = <span class="hljs-keyword">await</span> self.read_stdin_line()
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> line:  <span class="hljs-comment"># EOF</span>
                <span class="hljs-keyword">break</span>
            request = json.loads(line.strip())
            asyncio.create_task(self.handle_request(request))
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ol>
<li><code>run_in_executor</code> æŠŠåŒæ­¥çš„ <code>readline</code> å˜æˆå¼‚æ­¥ï¼Œä¸é˜»å¡äº‹ä»¶å¾ªç¯</li>
<li><code>create_task</code> å¤„ç†è¯·æ±‚ï¼Œä¸é˜»å¡ä¸»å¾ªç¯ç»§ç»­è¯» stdin</li>
<li><code>BRTWrapper</code> å®ä¾‹å¤ç”¨ï¼Œ<code>asyncio.Event</code> ç­‰çŠ¶æ€éƒ½åœ¨</li>
</ol>
<h3 data-id="heading-5">JS ç«¯å®ç°</h3>
<p>spawn è¿›ç¨‹åï¼Œç›‘å¬ stdout è§£æå“åº”ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">startDaemon</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">daemonProcess</span> = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">'/bin/bash'</span>, [<span class="hljs-variable language_">this</span>.<span class="hljs-property">runScript</span>, <span class="hljs-string">'--daemon'</span>], {
        <span class="hljs-attr">stdio</span>: [<span class="hljs-string">'pipe'</span>, <span class="hljs-string">'pipe'</span>, <span class="hljs-string">'pipe'</span>]
    })
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">daemonProcess</span>.<span class="hljs-property">stdout</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_handleDaemonOutput</span>(data.<span class="hljs-title function_">toString</span>())
    })
}

<span class="hljs-title function_">_handleDaemonOutput</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-comment">// å¤„ç†è·¨è¡Œæ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputBuffer</span> += data
    <span class="hljs-keyword">const</span> lines = <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputBuffer</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputBuffer</span> = lines.<span class="hljs-title function_">pop</span>() || <span class="hljs-string">''</span>
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {
        <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'[RESPONSE]'</span>)) {
            <span class="hljs-keyword">const</span> response = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(line.<span class="hljs-title function_">substring</span>(<span class="hljs-number">10</span>))
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_handleDaemonResponse</span>(response)
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'[EVENT]'</span>)) {
            <span class="hljs-keyword">const</span> event = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(line.<span class="hljs-title function_">substring</span>(<span class="hljs-number">7</span>))
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_handleDaemonEvent</span>(event)
        }
    }
}
</code></pre>
<p>å‘è¯·æ±‚å°±æ˜¯å¾€ stdin å†™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">_sendRequest</span>(<span class="hljs-params">method, params = {}</span>) {
    <span class="hljs-keyword">const</span> requestId = <span class="hljs-string">`req_<span class="hljs-subst">${++<span class="hljs-variable language_">this</span>.requestIdCounter}</span>`</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingRequests</span>.<span class="hljs-title function_">set</span>(requestId, { resolve, reject })
        
        <span class="hljs-keyword">const</span> request = { <span class="hljs-attr">jsonrpc</span>: <span class="hljs-string">'2.0'</span>, <span class="hljs-attr">id</span>: requestId, method, params }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">daemonProcess</span>.<span class="hljs-property">stdin</span>.<span class="hljs-title function_">write</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(request) + <span class="hljs-string">'\n'</span>)
    })
}
</code></pre>
<h3 data-id="heading-6">è¸©å‘</h3>
<h4 data-id="heading-7">1. stdout æ•°æ®åˆ†ç‰‡</h4>
<p>stdout çš„ data äº‹ä»¶ä¸ä¿è¯æŒ‰è¡Œæ¥ï¼Œå¯èƒ½ä¸€æ¬¡æ”¶åˆ°åŠè¡Œï¼Œä¹Ÿå¯èƒ½ä¸€æ¬¡æ”¶åˆ°å¥½å‡ è¡Œã€‚å¿…é¡»ç”¨ buffer æ‹¼æ¥ï¼ŒæŒ‰ <code>\n</code> åˆ‡åˆ†ã€‚</p>
<h4 data-id="heading-8">2. é•¿ä»»åŠ¡é˜»å¡</h4>
<p>pythonçš„å¤§æ¨¡å‹ä»»åŠ¡è·‘èµ·æ¥å¯èƒ½å‡ åˆ†é’Ÿï¼Œä¸èƒ½é˜»å¡ stdin è¯»å–ï¼Œå¦åˆ™ <code>submitUserResponse</code> å‘è¿‡æ¥æ”¶ä¸åˆ°ã€‚ç”¨ <code>create_task</code> æŠŠé•¿ä»»åŠ¡ä¸¢åå°ã€‚</p>
<h4 data-id="heading-9">3. stdin æ˜¯åŒæ­¥çš„</h4>
<p>Python çš„ <code>sys.stdin.readline()</code> æ˜¯åŒæ­¥é˜»å¡çš„ï¼Œç›´æ¥ await ä¼šå¡ä½äº‹ä»¶å¾ªç¯ã€‚å¿…é¡»ç”¨ <code>run_in_executor</code> æ‰”åˆ°çº¿ç¨‹æ± ã€‚</p>
<h4 data-id="heading-10">4. è¿›ç¨‹æ¸…ç†</h4>
<p>å…³é—­æ—¶å…ˆå°è¯•å‘ shutdown å‘½ä»¤ä¼˜é›…é€€å‡ºï¼Œè¶…æ—¶å SIGTERMï¼Œå†ä¸è¡Œ SIGKILLã€‚Windows ç”¨ taskkillã€‚</p>
<h3 data-id="heading-11">æ•ˆæœ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleBRTClient</span>(bundlePath)

<span class="hljs-comment">// ç›‘å¬éœ€è¦å¸®åŠ©äº‹ä»¶</span>
client.<span class="hljs-title function_">on</span>(<span class="hljs-string">'help_needed'</span>, <span class="hljs-keyword">async</span> (data) =&gt; {
    <span class="hljs-keyword">const</span> answer = <span class="hljs-keyword">await</span> <span class="hljs-title function_">promptUser</span>(data.<span class="hljs-property">query</span>)
    <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">submitUserResponse</span>(answer)  <span class="hljs-comment">// ä¼ å›åŒä¸€ä¸ªè¿›ç¨‹</span>
})

<span class="hljs-keyword">await</span> client.<span class="hljs-title function_">startBRTask</span>(<span class="hljs-string">'...'</span>)  <span class="hljs-comment">// ä»»åŠ¡è·‘åœ¨åå°</span>
<span class="hljs-keyword">await</span> client.<span class="hljs-title function_">getTaskStatus</span>()          <span class="hljs-comment">// å¤ç”¨åŒä¸€è¿›ç¨‹</span>
<span class="hljs-keyword">await</span> client.<span class="hljs-title function_">close</span>()                  <span class="hljs-comment">// æ¸…ç†</span>
</code></pre>
<p>è¿›ç¨‹å¯åŠ¨ä¸€æ¬¡ï¼Œåç»­æ‰€æœ‰è°ƒç”¨éƒ½æ˜¯ stdin/stdout é€šä¿¡ï¼ŒçŠ¶æ€ä¿æŒï¼Œå¤šè½®å¯¹è¯å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidè½¦æœºå¡é¡¿æ¡ˆä¾‹å‰–æ:ä»Binderè€—å°½åˆ°å•ä¾‹ç¼ºå¤±çš„æ·±åº¦æ’æŸ¥]]></title>    <link>https://juejin.cn/post/7588098335791316992</link>    <guid>https://juejin.cn/post/7588098335791316992</guid>    <pubDate>2025-12-28T09:37:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335791316992" data-draft-id="7588124225702576168" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidè½¦æœºå¡é¡¿æ¡ˆä¾‹å‰–æ:ä»Binderè€—å°½åˆ°å•ä¾‹ç¼ºå¤±çš„æ·±åº¦æ’æŸ¥"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–,Debug"/> <meta itemprop="datePublished" content="2025-12-28T09:37:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidè½¦æœºå¡é¡¿æ¡ˆä¾‹å‰–æ:ä»Binderè€—å°½åˆ°å•ä¾‹ç¼ºå¤±çš„æ·±åº¦æ’æŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:37:17.000Z" title="Sun Dec 28 2025 09:37:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜ç°è±¡</h2>
<p>æŸAndroidè½¦æœºé¡¹ç›®åœ¨æµ‹è¯•é˜¶æ®µå‘ç°ä¸€ä¸ªå¶ç°çš„ä¸¥é‡å¡é¡¿é—®é¢˜:</p>
<p><strong>å¤ç°æ­¥éª¤:</strong></p>
<ol>
<li>æ‰“å¼€é©¾é©¶è¾…åŠ©(APA)ç•Œé¢</li>
<li>ç‚¹å‡»Homeé”®å›åˆ°æ¡Œé¢</li>
</ol>
<p><strong>å®é™…ç»“æœ:</strong> å‡ºç°ä¸¥é‡å¡é¡¿,ç³»ç»Ÿæ— å“åº”æ•°ç§’åæ‰è¿”å›æ¡Œé¢</p>
<p><strong>æœŸæœ›ç»“æœ:</strong> æµç•…è¿”å›æ¡Œé¢</p>
<p><strong>å‘ç”Ÿæ¦‚ç‡:</strong> çº¦10%(å¶ç°é—®é¢˜,å¢åŠ äº†æ’æŸ¥éš¾åº¦)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d80a82843a2416a8b04055cc436321f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767519437&amp;x-signature=7ouXhL%2FboViiMg7WfpMTU0a3IeE%3D" alt="case1-apa-home-lag-phenomenon.png" loading="lazy"/></p>
<p><em>é—®é¢˜ç°è±¡:ç‚¹å‡»Homeé”®åç³»ç»Ÿæ— å“åº”</em></p>
<p>è¿™ç±»å¶ç°çš„æ€§èƒ½é—®é¢˜æ˜¯è½¦æœºå¼€å‘ä¸­æœ€ä»¤äººå¤´ç–¼çš„,å› ä¸º:</p>
<ul>
<li>âŒ éš¾ä»¥ç¨³å®šå¤ç°</li>
<li>âŒ æ—¥å¿—ä¿¡æ¯åˆ†æ•£</li>
<li>âŒ æ¶‰åŠå¤šä¸ªæ¨¡å—,å®šä½å›°éš¾</li>
<li>âŒ å½±å“ç”¨æˆ·ä½“éªŒ,ä¼˜å…ˆçº§é«˜</li>
</ul>
<p>æ¥ä¸‹æ¥,è®©æˆ‘ä»¬çœ‹çœ‹å·¥ç¨‹å›¢é˜Ÿæ˜¯å¦‚ä½•æŠ½ä¸å‰¥èŒ§,æ‰¾åˆ°é—®é¢˜æ ¹å› çš„ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ’æŸ¥æ€è·¯:åˆ†å±‚é€’è¿›åˆ†æ</h2>
<p>é¢å¯¹è¿™ç±»æ€§èƒ½é—®é¢˜,ä¸èƒ½ç›²ç›®çŒœæµ‹ã€‚æˆ‘ä»¬çš„æ’æŸ¥ç­–ç•¥æ˜¯:<strong>ä»æ•´ä½“åˆ°å±€éƒ¨,ä»ç°è±¡åˆ°æœ¬è´¨,é€å±‚æ’é™¤</strong>ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ’æŸ¥é“¾è·¯:</span>
æ•´æœºæ€§èƒ½åˆ†æ (CPU/å†…å­˜)
    â†“ æ’é™¤
åº”ç”¨å±‚åˆ†æ (APAåº”ç”¨)
    â†“ æ’é™¤
Frameworkå±‚åˆ†æ (Binderæœºåˆ¶)
    â†“ å‘ç°å¼‚å¸¸
SystemUIåˆ†æ (èµ„æºæ³„æ¼)
    â†“ å®šä½æ ¹å› 
</code></pre>
<hr/>
<h2 data-id="heading-2">ç¬¬ä¸€è½®:æ•´æœºæ€§èƒ½åˆ†æ</h2>
<h3 data-id="heading-3">æ’æŸ¥ç›®æ ‡</h3>
<p>é¦–å…ˆè¦ç¡®è®¤:<strong>æ˜¯ä¸æ˜¯æ•´æœºèµ„æºä¸è¶³å¯¼è‡´çš„å¡é¡¿?</strong></p>
<p>å¸¸è§çš„æ•´æœºæ€§èƒ½ç“¶é¢ˆæœ‰:</p>
<ul>
<li>CPUå ç”¨è¿‡é«˜(å¦‚æŸä¸ªè¿›ç¨‹CPUå ç”¨æŒç»­å¤§äº80%)</li>
<li>å†…å­˜ä¸è¶³(è§¦å‘LowMemoryKiller)</li>
<li>IOé˜»å¡(å­˜å‚¨è®¾å¤‡è¯»å†™æ…¢)</li>
<li>GPUè¿‡è½½(æ¸²æŸ“å‹åŠ›å¤§)</li>
</ul>
<p>è¿™éƒ¨åˆ†ä»‹ç»å¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« : <a href="https://juejin.cn/post/7584652662328819762" target="_blank" title="https://juejin.cn/post/7584652662328819762">è½¦è½½ Android ç³»ç»Ÿç¨³å®šæ€§é—®é¢˜å…¨è§£æï¼šä»æ€§èƒ½åˆ°é»‘å±çš„æ’æŸ¥æŒ‡å—</a></p>
<h3 data-id="heading-4">åˆ†ææ–¹æ³•</h3>
<p>é€šè¿‡æ—¥å¿—æŸ¥çœ‹é—®é¢˜å‘ç”Ÿæ—¶åˆ»çš„ç³»ç»Ÿèµ„æºçŠ¶å†µ:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹CPUå ç”¨</span>
adb shell top -n 1 -d 1

<span class="hljs-comment"># æŸ¥çœ‹å†…å­˜ä½¿ç”¨</span>
adb shell dumpsys meminfo

<span class="hljs-comment"># æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½</span>
adb shell <span class="hljs-built_in">cat</span> /proc/loadavg
</code></pre>
<h3 data-id="heading-5">åˆ†æç»“æœ</h3>
<p><strong>é—®é¢˜æ—¶é—´ç‚¹:2024-12-23 16:08:43</strong></p>
<p><strong>CPUå ç”¨æƒ…å†µ:</strong></p>
<pre><code class="hljs language-perl" lang="perl">=== <span class="hljs-number">20251222_04</span>-08-<span class="hljs-number">10</span>-<span class="hljs-number">024</span> ===

Tasks: <span class="hljs-number">505</span> total,   <span class="hljs-number">4</span> running, <span class="hljs-number">501</span> sleeping,   <span class="hljs-number">0</span> stopped,   <span class="hljs-number">0</span> zombie
  Mem:    <span class="hljs-number">17726</span>M total,    <span class="hljs-number">17156</span>M used,      <span class="hljs-number">569</span>M free,      <span class="hljs-number">363</span>M buffers
 Swap:     <span class="hljs-number">8191</span>M total,       <span class="hljs-number">28</span>M used,     <span class="hljs-number">8163</span>M free,     <span class="hljs-number">5157</span>M cached
<span class="hljs-number">800</span>%cpu <span class="hljs-number">281</span>%user  <span class="hljs-number">32</span>%nice <span class="hljs-number">245</span>%sys <span class="hljs-number">223</span>%idle   <span class="hljs-number">0</span>%iow  <span class="hljs-number">10</span>%irq  <span class="hljs-number">10</span>%sirq   <span class="hljs-number">0</span>%host
  PID USER         PR  NI VIRT  RES  SHR S[%CPU] %MEM     TIME+ ARGS
 <span class="hljs-number">2185</span> <span class="hljs-keyword">system</span>       <span class="hljs-number">16</span>  -<span class="hljs-number">4</span>  <span class="hljs-number">19</span>G <span class="hljs-number">464</span>M <span class="hljs-number">346</span>M S <span class="hljs-number">48.3</span>   <span class="hljs-number">2.6</span>   <span class="hljs-number">9</span>:<span class="hljs-number">36.38</span> system_server
  <span class="hljs-number">315</span> logd         <span class="hljs-number">30</span>  <span class="hljs-number">10</span>  <span class="hljs-number">11</span>G  <span class="hljs-number">28</span>M <span class="hljs-number">3.5</span>M S <span class="hljs-number">45.1</span>   <span class="hljs-number">0</span>.<span class="hljs-number">1</span>  <span class="hljs-number">11</span>:<span class="hljs-number">59.89</span> logd
<span class="hljs-number">27100</span> <span class="hljs-keyword">system</span>       <span class="hljs-number">20</span>   <span class="hljs-number">0</span>  <span class="hljs-number">10</span>G <span class="hljs-number">3.2</span>M <span class="hljs-number">2.6</span>M R <span class="hljs-number">41.9</span>   <span class="hljs-number">0</span>.<span class="hljs-number">0</span>   <span class="hljs-number">5</span>:<span class="hljs-number">18.83</span> logcat -T <span class="hljs-number">1970</span>-<span class="hljs-number">01</span>-<span class="hljs-number">01</span> 08:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>.<span class="hljs-number">000</span> --regex=ESAL:
  <span class="hljs-number">659</span> <span class="hljs-keyword">system</span>       -<span class="hljs-number">3</span>  -<span class="hljs-number">8</span>  <span class="hljs-number">11</span>G <span class="hljs-number">158</span>M <span class="hljs-number">118</span>M S <span class="hljs-number">41.9</span>   <span class="hljs-number">0</span>.<span class="hljs-number">8</span>  <span class="hljs-number">12</span>:<span class="hljs-number">20.44</span> surfaceflinger
<span class="hljs-number">14380</span> u12_system   <span class="hljs-number">20</span>   <span class="hljs-number">0</span>  <span class="hljs-number">19</span>G <span class="hljs-number">779</span>M <span class="hljs-number">151</span>M S <span class="hljs-number">29.0</span>   <span class="hljs-number">4.3</span>   <span class="hljs-number">9</span>:<span class="hljs-number">38.63</span> com.aispeech.lyra.daemon
</code></pre>
<p><strong>å†…å­˜ä½¿ç”¨æƒ…å†µ:</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">Tasks: 505 total, 4 running, 501 sleeping</span>
<span class="hljs-section">CPU: 800%cpu 281%user 32%nice 245%sys 223%idle 0%iow 10%irq 10%sirq</span>
     å®é™…ä½¿ç”¨ç‡: 577% / 800% = 72.1%ï¼Œç©ºé—²ç‡: 27.9%

å†…å­˜è¯¦ç»†ä¿¡æ¯ï¼š
<span class="hljs-section">MemTotal:       18151676 kB  (17.3GB)</span>
<span class="hljs-section">MemFree:          589448 kB  (575MB)    â† ç‰©ç†ç©ºé—²å†…å­˜ï¼ˆä½æ˜¯æ­£å¸¸çš„ï¼‰</span>
<span class="hljs-section">MemAvailable:    5944052 kB  (5.8GB)    â† çœŸæ­£å¯ç”¨å†…å­˜ï¼ˆå……è¶³ï¼ï¼‰</span>
<span class="hljs-section">Buffers:          371900 kB  (363MB)</span>
<span class="hljs-section">Cached:          5278232 kB  (5.0GB)    â† å¯é‡Šæ”¾çš„ç¼“å­˜</span>

å¯å›æ”¶å†…å­˜ = Buffers + Cached = 363MB + 5.0GB = 5.4GB

<span class="hljs-section">Active:          6978000 kB (6.6GB)</span>
<span class="hljs-section">Inactive:        4606148 kB (4.4GB)</span>
<span class="hljs-section">Active(anon):    5351652 kB (5.1GB)    â† æ´»è·ƒçš„åŒ¿åé¡µ</span>
<span class="hljs-section">Inactive(anon):   771068 kB (753MB)</span>
<span class="hljs-section">AnonPages:       6077572 kB (5.8GB)    â† æ€»åŒ¿åé¡µï¼ˆåº”ç”¨å†…å­˜ï¼‰</span>
<span class="hljs-section">Mapped:          3791008 kB (3.6GB)</span>
<span class="hljs-section">Shmem:             46172 kB (45MB)</span>

<span class="hljs-section">Swap:</span>
<span class="hljs-section">SwapTotal:       8388604 kB (8.0GB)</span>
<span class="hljs-section">SwapFree:        8359188 kB (8.16GB)</span>
<span class="hljs-section">Swapä½¿ç”¨:          29416 kB (28MB)     â† ä»…0.34%ï¼Œå¾ˆä½</span>

<span class="hljs-section">CMA:</span>
<span class="hljs-section">CmaTotal:         311296 kB (304MB)</span>
<span class="hljs-section">CmaFree:           83276 kB (81MB)</span>
<span class="hljs-section">CMAä½¿ç”¨ç‡: 73%</span>
</code></pre>
<p><strong>Top CPUè¿›ç¨‹</strong>ï¼š</p>





















































<table><thead><tr><th>è¿›ç¨‹</th><th>CPU</th><th>å†…å­˜</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>system_server</td><td>48.3%</td><td>464M (2.6%)</td><td>Androidæ ¸å¿ƒæœåŠ¡</td></tr><tr><td>logd</td><td>45.1%</td><td>28M (0.1%)</td><td>æ—¥å¿—å®ˆæŠ¤è¿›ç¨‹</td></tr><tr><td>logcat</td><td>41.9%</td><td>3.2M</td><td>æ—¥å¿—è¿‡æ»¤è¿›ç¨‹</td></tr><tr><td>surfaceflinger</td><td>41.9%</td><td>158M (0.8%)</td><td>å›¾å½¢åˆæˆ</td></tr><tr><td>com.speech.daemon</td><td>29.0%</td><td>779M (4.3%)</td><td>è¯­éŸ³è¯†åˆ«æœåŠ¡</td></tr><tr><td>com.android.dvr</td><td>16.1%</td><td>367M (2.0%)</td><td>è¡Œè½¦è®°å½•ä»ª</td></tr><tr><td>com.android.avm_app</td><td>16.1%</td><td>668M (3.7%)</td><td>å…¨æ™¯å½±åƒ</td></tr></tbody></table>
<p><strong>âœ… å†…å­˜çŠ¶æ€é‡æ–°è¯„ä¼°</strong>ï¼š</p>
<ul>
<li>âœ… <strong>MemAvailable 5.8GB å……è¶³</strong> - å¯ç”¨å†…å­˜å æ€»å†…å­˜çš„32%</li>
<li>âœ… <strong>Cached 5.0GB</strong> - å¤§é‡å¯é‡Šæ”¾ç¼“å­˜</li>
<li>âœ… <strong>Swapä½¿ç”¨æä½</strong> - ä»…28MB (0.34%)ï¼Œè¯´æ˜æ²¡æœ‰ä¸¥é‡å†…å­˜å‹åŠ›</li>
<li>âš ï¸ <strong>åº”ç”¨å†…å­˜å ç”¨åé«˜</strong> - è¯­éŸ³æœåŠ¡779MBï¼Œä½†ä¸æ„æˆç³»ç»Ÿæ€§é£é™©</li>
</ul>
<p><strong>ğŸ”´ CPUå’Œæ—¥å¿—é—®é¢˜</strong>ï¼š</p>
<ul>
<li>ğŸ”´ <strong>æ—¥å¿—ç³»ç»ŸCPUè¿‡è½½</strong>: logd (45.1%) + logcat (41.9%) = 87% CPU</li>
<li>ğŸ”´ <strong>CPUè´Ÿè½½è¾ƒé«˜</strong>: 72.1%ä½¿ç”¨ç‡ï¼Œç©ºé—²ä»…27.9%</li>
</ul>
<p><strong>è™½ç„¶CPUä½¿ç”¨æ¯”è¾ƒå¤šï¼Œä½†æ˜¯å¹¶æœªè¾¾åˆ°å æ»¡çš„æƒ…å†µï¼Œæ’é™¤æ•´æœºæ€§èƒ½é—®é¢˜,é—®é¢˜åœ¨è½¯ä»¶å±‚é¢ã€‚</strong></p>
<hr/>
<h2 data-id="heading-6">ç¬¬äºŒè½®:APAåº”ç”¨åˆ†æ</h2>
<h3 data-id="heading-7">æ’æŸ¥ç›®æ ‡</h3>
<p>æ—¢ç„¶æ•´æœºæ€§èƒ½æ­£å¸¸,é‚£æ˜¯ä¸æ˜¯<strong>APAåº”ç”¨æœ¬èº«çš„é€€å‡ºé€»è¾‘æœ‰é—®é¢˜</strong>?</p>
<h3 data-id="heading-8">å…³é”®æ—¶é—´çº¿</h3>
<p>é€šè¿‡æ—¥å¿—è¿½è¸ªå…³é”®äº‹ä»¶çš„æ—¶é—´æˆ³:</p>

























<table><thead><tr><th align="left">æ—¶é—´</th><th align="left">äº‹ä»¶</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong>16:08:43.120</strong></td><td align="left">Homeé”®æŒ‰ä¸‹</td><td align="left">ç”¨æˆ·æ“ä½œè§¦å‘</td></tr><tr><td align="left"><strong>16:08:54.350</strong></td><td align="left">APA.onPause()</td><td align="left">APAç”Ÿå‘½å‘¨æœŸå›è°ƒ</td></tr><tr><td align="left"><strong>16:08:55.200</strong></td><td align="left">æ¡Œé¢æ˜¾ç¤º</td><td align="left">ç”¨æˆ·å¯è§æ¡Œé¢</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒå‘ç°:ä»Homeé”®æŒ‰ä¸‹åˆ°onPauseè°ƒç”¨,è€—æ—¶11ç§’!</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">12</span>-<span class="hljs-number">22</span> <span class="hljs-number">04</span>:08:<span class="hljs-number">43.183</span> <span class="hljs-number">15236</span> <span class="hljs-number">15236</span> I wm_on_paused_called: [<span class="hljs-number">17785643</span>,com.android.ui.home.HomeActivity,performPause]
<span class="hljs-number">4819</span>
<span class="hljs-number">12</span>-<span class="hljs-number">22</span> <span class="hljs-number">04</span>:08:<span class="hljs-number">43.183</span> <span class="hljs-number">15236</span> <span class="hljs-number">15236</span> I Instrumentation: Activity onPause End Activity: com.android.ui.home.HomeActivity@598dc2
<span class="hljs-number">12</span>-<span class="hljs-number">22</span> <span class="hljs-number">04</span>:08:<span class="hljs-number">54.707</span> <span class="hljs-number">14651</span> <span class="hljs-number">14651</span> I AutoApa_UnionMainActivity: onPause() ===&gt;&gt;&gt;&gt; 
</code></pre>
<h3 data-id="heading-9">åˆ†æç»“è®º</h3>
<p><strong>é‡è¦å‘ç°:</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">HomeæŒ‰ä¸‹  â†’  onPauseè°ƒç”¨
   |            |
16:08:43      16:08:54
   |<span class="hljs-strong">____</span><span class="hljs-strong">____</span><span class="hljs-strong">____</span>|
<span class="hljs-code">      11ç§’å»¶è¿Ÿ
</span></code></pre>
<p>è¿™11ç§’çš„è€—æ—¶<strong>ä¸åœ¨APAåº”ç”¨å†…éƒ¨</strong>!</p>
<p>ç†ç”±:</p>
<ol>
<li>APA.onPause()æœ¬èº«æ‰§è¡Œå¾ˆå¿«(10ms)</li>
<li>11ç§’çš„å»¶è¿Ÿå‘ç”Ÿåœ¨onPauseè¢«è°ƒç”¨<strong>ä¹‹å‰</strong></li>
<li>è¯´æ˜é—®é¢˜åœ¨<strong>Frameworkå±‚æˆ–SystemUIå±‚</strong>,APAçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒè¢«é˜»å¡äº†</li>
</ol>
<p><strong>æ’é™¤APAåº”ç”¨é—®é¢˜,ç»§ç»­å‘ç³»ç»Ÿå±‚æ·±å…¥ã€‚</strong></p>
<hr/>
<h2 data-id="heading-10">ç¬¬ä¸‰è½®:Frameworkå±‚åˆ†æ</h2>
<h3 data-id="heading-11">å…³é”®å‘ç°:Binderäº‹åŠ¡å¤±è´¥</h3>
<p>Frameworkå·¥ç¨‹å¸ˆåœ¨æ—¥å¿—ä¸­å‘ç°äº†<strong>å…³é”®çº¿ç´¢</strong>:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[Frameworkæ—¥å¿— - é‡ç‚¹]</span>
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.671  2185  2185 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">196</span>)
12-22 04:08:28.674  2185  2248 E JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel <span class="hljs-attr">size</span> = <span class="hljs-number">104</span>)
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>ä»€ä¹ˆæ˜¯"FAILED BINDER TRANSACTION"?</strong></p>
<p>è¿™æ˜¯Androidç³»ç»Ÿä¸­çš„ä¸¥é‡é”™è¯¯,è¡¨ç¤º<strong>Binderè·¨è¿›ç¨‹é€šä¿¡å¤±è´¥</strong>ã€‚</p>
<p>å¸¸è§åŸå› :</p>
<ul>
<li>Binderç¼“å†²åŒºæ»¡äº†(æ¯ä¸ªè¿›ç¨‹é»˜è®¤1MB)</li>
<li>Binderçº¿ç¨‹æ± è€—å°½(é»˜è®¤16ä¸ªçº¿ç¨‹)</li>
<li>Binderå¯¹è±¡æ³„æ¼(æœªåŠæ—¶é‡Šæ”¾)</li>
</ul>
</blockquote>
<h3 data-id="heading-12">Binderæœºåˆ¶ç®€ä»‹</h3>
<p>ä¸ºäº†ç†è§£è¿™ä¸ªé—®é¢˜,æˆ‘ä»¬éœ€è¦å…ˆäº†è§£Androidçš„Binderæœºåˆ¶ã€‚</p>
<h4 data-id="heading-13">Binderæ˜¯ä»€ä¹ˆ?</h4>
<p><strong>Binderæ˜¯Androidç³»ç»Ÿçš„è·¨è¿›ç¨‹é€šä¿¡(IPC)æœºåˆ¶</strong>,å‡ ä¹æ‰€æœ‰çš„ç³»ç»ŸæœåŠ¡å’Œåº”ç”¨é—´é€šä¿¡éƒ½ä¾èµ–Binderã€‚</p>
<pre><code class="hljs language-css" lang="css">åº”ç”¨<span class="hljs-selector-tag">A</span>è¿›ç¨‹              ç³»ç»ŸæœåŠ¡è¿›ç¨‹
   â†“                      â†‘
   |------ Binder --------|

ç¤ºä¾‹:
åº”ç”¨è°ƒç”¨ â†’ <span class="hljs-built_in">startActivity</span>()
       â†“ (é€šè¿‡Binder)
ç³»ç»ŸæœåŠ¡ â†’ ActivityManagerService
</code></pre>
<h4 data-id="heading-14">Binderçš„èµ„æºé™åˆ¶</h4>
<p>æ¯ä¸ªè¿›ç¨‹çš„Binderèµ„æºæ˜¯æœ‰é™çš„:</p>

























<table><thead><tr><th align="left">èµ„æºç±»å‹</th><th align="center">é™åˆ¶å€¼</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong>Binderç¼“å†²åŒº</strong></td><td align="center">1MB</td><td align="left">ç”¨äºä¼ è¾“æ•°æ®</td></tr><tr><td align="left"><strong>Binderçº¿ç¨‹</strong></td><td align="center">16ä¸ª</td><td align="left">å¤„ç†è·¨è¿›ç¨‹è°ƒç”¨</td></tr><tr><td align="left"><strong>Binderå¯¹è±¡</strong></td><td align="center">æ— ç¡¬æ€§é™åˆ¶</td><td align="left">ä½†è¿‡å¤šä¼šå¯¼è‡´å†…å­˜å’Œæ€§èƒ½é—®é¢˜</td></tr></tbody></table>
<p><strong>å½“Binderèµ„æºè€—å°½æ—¶,ä¼šå‘ç”Ÿä»€ä¹ˆ?</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">æ–°çš„è·¨è¿›ç¨‹è°ƒç”¨
<span class="hljs-code">    â†“
Binderç¼“å†²åŒºå·²æ»¡ / çº¿ç¨‹æ± è€—å°½
    â†“
è°ƒç”¨é˜»å¡ / å¤±è´¥
    â†“
ANR / å¡é¡¿
</span></code></pre>
<h3 data-id="heading-15">æ·±æŒ–æ—¥å¿—:å‘ç°å¤§é‡å¯¹è±¡åˆ›å»º</h3>
<p>ç»§ç»­åˆ†ææ—¥å¿—,å‘ç°äº†æ›´æƒŠäººçš„çº¿ç´¢:</p>
<pre><code class="hljs language-yaml" lang="yaml">[<span class="hljs-string">SystemUIæ—¥å¿—</span> <span class="hljs-bullet">-</span> <span class="hljs-string">å¼‚å¸¸</span> <span class="hljs-bullet">-</span> <span class="hljs-string">æœ‰å¤§é‡çš„è¿™ç§æ—¥å¿—</span>]
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.558</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.560</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.563</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.566</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.568</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.572</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.575</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.578</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.579</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.677</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.683</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:38.686</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:40.623</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:40.630</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:40.634</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-number">12</span><span class="hljs-number">-22</span> <span class="hljs-number">04</span><span class="hljs-string">:05:42.941</span>  <span class="hljs-number">2680  </span><span class="hljs-number">2680 </span><span class="hljs-string">I</span> <span class="hljs-string">SystemUi:2.0.0.(p789)(25121116)(022935ad):ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
</code></pre>
<p><strong>ç»Ÿè®¡ç»“æœ:åœ¨20ç§’å†…,<code>ParkingStateRepository</code>è¢«åˆ›å»ºäº†2000+æ¬¡!</strong></p>
<h3 data-id="heading-16">æ¯æ¬¡åˆ›å»ºåšäº†ä»€ä¹ˆ?</h3>
<p>é€šè¿‡ä»£ç å®¡æŸ¥,å‘ç°<code>ParkingStateRepository</code>çš„æ„é€ å‡½æ•°ä¸­ä¼šè°ƒç”¨<code>checkParkingPackageBackgroundVisible</code>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin">    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkParkingPackageBackgroundVisible</span><span class="hljs-params">(
        context: <span class="hljs-type">Context</span>,
        shortcutData: <span class="hljs-type">ShortcutIconData</span>,
        targetPackage: <span class="hljs-type">String</span>,
        taskCompString: <span class="hljs-type">String</span>,
        fullTaskCompString: <span class="hljs-type">String</span>,
        transparentComponent: <span class="hljs-type">String</span>,
        item: <span class="hljs-type">DockShortcutIconView</span>
    )</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">if</span> (targetPackage == TaskRepository.AUTO_PANDORAPARKING_PACKAGE &amp;&amp; taskCompString.contains(TaskRepository.AUTO_PANDORAPARKING_PACKAGE)) {
            <span class="hljs-keyword">val</span> value = ParkingStateRepository(context).getState()
            <span class="hljs-keyword">if</span> (!TextUtils.isEmpty(value) &amp;&amp; shortcutData.<span class="hljs-keyword">data</span>.contains(value)) {
                 item.setBackgroundVisible(<span class="hljs-literal">true</span>)
             } <span class="hljs-keyword">else</span> {
                 item.setBackgroundVisible(<span class="hljs-literal">false</span>)
             }
             <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
         }
         <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
     }
</code></pre>
<p><strong>æ¯æ¬¡åˆ›å»ºéƒ½ä¼š:</strong></p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„åç¨‹</li>
<li>åˆ›å»ºä¸€ä¸ªæ–°çš„ContentObserver</li>
<li>é€šè¿‡Binderæ³¨å†Œåˆ°SettingsæœåŠ¡</li>
</ul>
<p><strong>2000æ¬¡åˆ›å»ºæ„å‘³ç€:</strong></p>
<ul>
<li>âœ… 2000+ ä¸ªåç¨‹</li>
<li>âœ… 2000+ ä¸ªContentObserver</li>
<li>âœ… 2000+ æ¬¡Binderè·¨è¿›ç¨‹è°ƒç”¨</li>
<li>âœ… å¤§é‡Binderå¯¹è±¡å †ç§¯</li>
</ul>
<h3 data-id="heading-17">å¯è§†åŒ–:Binderèµ„æºè€—å°½è¿‡ç¨‹</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">SystemUIè¿›ç¨‹çš„Binderèµ„æºæ± :</span>

<span class="hljs-section">åˆå§‹çŠ¶æ€:</span>
<span class="hljs-section">[Binderç¼“å†²åŒº: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0/1MB]</span>
<span class="hljs-section">[Binderçº¿ç¨‹:   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0/16]</span>

<span class="hljs-section">åˆ›å»º500æ¬¡å:</span>
<span class="hljs-section">[Binderç¼“å†²åŒº: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 0.4/1MB]</span>
<span class="hljs-section">[Binderçº¿ç¨‹:   â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 6/16]</span>

<span class="hljs-section">åˆ›å»º1000æ¬¡å:</span>
<span class="hljs-section">[Binderç¼“å†²åŒº: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 0.8/1MB]</span>
<span class="hljs-section">[Binderçº¿ç¨‹:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 12/16]</span>

<span class="hljs-section">åˆ›å»º2000æ¬¡å:</span>
<span class="hljs-section">[Binderç¼“å†²åŒº: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 1.0/1MB]  â† æ»¡äº†!</span>
<span class="hljs-section">[Binderçº¿ç¨‹:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 16/16]    â† è€—å°½!</span>

<span class="hljs-section">ç»“æœ: FAILED BINDER TRANSACTION !!!</span>
</code></pre>
<h3 data-id="heading-18">åˆ†æç»“è®º</h3>
<p><strong>Frameworkå±‚å‘ç°äº†Binderèµ„æºè€—å°½çš„ç›´æ¥è¯æ®:</strong></p>
<ol>
<li>âœ… æ—¥å¿—æ˜¾ç¤º"FAILED BINDER TRANSACTION"</li>
<li>âœ… <code>ParkingStateRepository</code>è¢«åˆ›å»º2000+æ¬¡</li>
<li>âœ… æ¯æ¬¡åˆ›å»ºéƒ½æ¶ˆè€—Binderèµ„æº(åç¨‹+ContentObserver)</li>
<li>âœ… æœ€ç»ˆå¯¼è‡´SystemUIçš„Binderæ± è€—å°½</li>
</ol>
<p><strong>é—®é¢˜æ ¹æºåœ¨SystemUIæ¨¡å—,ç»§ç»­æ·±å…¥ã€‚</strong></p>
<hr/>
<h2 data-id="heading-19">ç¬¬å››è½®:SystemUIæ ¹å› å®šä½</h2>
<h3 data-id="heading-20">SystemUIæ˜¯ä»€ä¹ˆ?</h3>
<p><strong>SystemUI</strong>æ˜¯Androidç³»ç»Ÿç•Œé¢çš„æ ¸å¿ƒç»„ä»¶,è´Ÿè´£:</p>
<ul>
<li>çŠ¶æ€æ </li>
<li>å¯¼èˆªæ </li>
<li>é€šçŸ¥é¢æ¿</li>
<li>å¿«æ·è®¾ç½®</li>
<li><strong>Homeé”®å“åº”</strong> â† æœ¬æ¡ˆä¾‹çš„å…³é”®</li>
</ul>
<p>å½“ç”¨æˆ·ç‚¹å‡»Homeé”®æ—¶,SystemUIéœ€è¦ä¸å…¶ä»–åº”ç”¨é€šä¿¡(é€šè¿‡Binder),åè°ƒç•Œé¢åˆ‡æ¢ã€‚</p>
<h3 data-id="heading-21">ä»£ç å®¡æŸ¥:å‘ç°è®¾è®¡ç¼ºé™·</h3>
<p>SystemUIå›¢é˜Ÿå®¡æŸ¥ä»£ç å,å‘ç°äº†<strong>è‡´å‘½çš„è®¾è®¡ç¼ºé™·</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é—®é¢˜ä»£ç ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ParkingAssistView</span> : <span class="hljs-type">FrameLayout</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> repository: ParkingStateRepository  <span class="hljs-comment">// âŒ æ¯ä¸ªViewæœ‰ç‹¬ç«‹å®ä¾‹</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onFinishInflate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onFinishInflate()

        <span class="hljs-comment">// âŒ æ¯æ¬¡Viewåˆ›å»ºæ—¶éƒ½newä¸€ä¸ªRepository</span>
        repository = ParkingStateRepository(context)
        repository.registerCallback { state -&gt;
            <span class="hljs-comment">// å¤„ç†æ³Šè½¦çŠ¶æ€å˜åŒ–</span>
        }
    }
}
</code></pre>
<p><strong>é—®é¢˜æ‰€åœ¨:</strong></p>
<ol>
<li><code>ParkingStateRepository</code><strong>ä¸æ˜¯å•ä¾‹</strong></li>
<li>æ¯æ¬¡ç‚¹å‡»APAåº”ç”¨,éƒ½ä¼šåˆ›å»ºæ–°çš„<code>ParkingAssistView</code></li>
<li>æ¯ä¸ªViewéƒ½ä¼šåˆ›å»ºè‡ªå·±çš„<code>ParkingStateRepository</code></li>
<li>æµ‹è¯•äººå‘˜åå¤ç‚¹å‡»APAåº”ç”¨,å¯¼è‡´åˆ›å»ºäº†2000+ä¸ªRepositoryå¯¹è±¡</li>
<li>è¿™äº›å¯¹è±¡éƒ½åœ¨SystemUIçš„<strong>ä¸»çº¿ç¨‹</strong>ä¸­åˆ›å»ºå’Œåˆå§‹åŒ–</li>
<li>ä¸»çº¿ç¨‹è¢«é˜»å¡,å¯¼è‡´Homeé”®å“åº”å»¶è¿Ÿ</li>
</ol>
<h3 data-id="heading-22">æ­£ç¡®çš„å•ä¾‹å®ç°</h3>
<p><strong>ä¿®å¤æ–¹æ¡ˆ:</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¿®å¤åçš„ä»£ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ParkingStateRepository</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">constructor</span>(context: Context) {

    <span class="hljs-comment">// å•ä¾‹å®ç°</span>
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-meta">@Volatile</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> instance: ParkingStateRepository? = <span class="hljs-literal">null</span>

        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getInstance</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: ParkingStateRepository {
            <span class="hljs-keyword">return</span> instance ?: synchronized(<span class="hljs-keyword">this</span>) {
                instance ?: ParkingStateRepository(context.applicationContext).also {
                    instance = it
                }
            }
        }
    }

    <span class="hljs-keyword">init</span> {
        <span class="hljs-comment">// åªä¼šæ‰§è¡Œä¸€æ¬¡</span>
        scope.launch { <span class="hljs-comment">/* ... */</span> }
        contentResolver.registerContentObserver(<span class="hljs-comment">/* ... */</span>)
    }

    <span class="hljs-comment">// æ”¯æŒå¤šä¸ªè§‚å¯Ÿè€…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> callbacks = mutableListOf&lt;(ParkingState) -&gt; <span class="hljs-built_in">Unit</span>&gt;()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">registerCallback</span><span class="hljs-params">(callback: (<span class="hljs-type">ParkingState</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        callbacks.add(callback)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">unregisterCallback</span><span class="hljs-params">(callback: (<span class="hljs-type">ParkingState</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        callbacks.remove(callback)
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ParkingAssistView</span> : <span class="hljs-type">FrameLayout</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> repository <span class="hljs-keyword">by</span> lazy {
        ParkingStateRepository.getInstance(context)  <span class="hljs-comment">// âœ… å…¨å±€å”¯ä¸€å®ä¾‹</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAttachedToWindow</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onAttachedToWindow()
        repository.registerCallback(stateCallback)  <span class="hljs-comment">// âœ… æ³¨å†Œå›è°ƒ</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDetachedFromWindow</span><span class="hljs-params">()</span></span> {
        repository.unregisterCallback(stateCallback)  <span class="hljs-comment">// âœ… åŠæ—¶æ¸…ç†</span>
        <span class="hljs-keyword">super</span>.onDetachedFromWindow()
    }
}
</code></pre>
<h3 data-id="heading-23">ä¿®å¤å‰åå¯¹æ¯”</h3>








































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">ä¿®å¤å‰</th><th align="left">ä¿®å¤å</th></tr></thead><tbody><tr><td align="left"><strong>Repositoryå®ä¾‹</strong></td><td align="left">æ¯æ¬¡åˆ›å»ºViewéƒ½new</td><td align="left">å…¨å±€å”¯ä¸€å•ä¾‹</td></tr><tr><td align="left"><strong>åç¨‹æ•°é‡</strong></td><td align="left">2000+ (ä¸åˆ›å»ºæ¬¡æ•°ç›¸åŒ)</td><td align="left">1ä¸ª</td></tr><tr><td align="left"><strong>ContentObserver</strong></td><td align="left">2000+</td><td align="left">1ä¸ª</td></tr><tr><td align="left"><strong>Binderè°ƒç”¨</strong></td><td align="left">2000+ æ¬¡æ³¨å†Œ</td><td align="left">1æ¬¡æ³¨å†Œ</td></tr><tr><td align="left"><strong>ä¸»çº¿ç¨‹é˜»å¡</strong></td><td align="left">ä¸¥é‡(ç´¯ç§¯åˆ›å»ºè€—æ—¶)</td><td align="left">æ— å½±å“</td></tr><tr><td align="left"><strong>å†…å­˜å ç”¨</strong></td><td align="left">æŒç»­å¢é•¿</td><td align="left">ç¨³å®š</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-24">æŠ€æœ¯åŸç†æ·±æŒ–</h2>
<h3 data-id="heading-25">ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹é˜»å¡ä¼šå¯¼è‡´å¡é¡¿?</h3>
<p>Androidç³»ç»Ÿçš„ä¸»çº¿ç¨‹(UIçº¿ç¨‹)è´Ÿè´£:</p>
<ul>
<li>å¤„ç†ç”¨æˆ·è¾“å…¥äº‹ä»¶(è§¦æ‘¸ã€æŒ‰é”®)</li>
<li>æ›´æ–°UIç•Œé¢</li>
<li>æ‰§è¡Œç”Ÿå‘½å‘¨æœŸå›è°ƒ(onCreateã€onPauseç­‰)</li>
</ul>
<p><strong>ä¸»çº¿ç¨‹çš„å·¥ä½œåŸç†:</strong></p>
<pre><code class="hljs language-ini" lang="ini">ä¸»çº¿ç¨‹æ¶ˆæ¯é˜Ÿåˆ—:

<span class="hljs-section">[æ¶ˆæ¯1]</span> â†’ <span class="hljs-section">[æ¶ˆæ¯2]</span> â†’ <span class="hljs-section">[æ¶ˆæ¯3]</span> â†’ <span class="hljs-section">[æ¶ˆæ¯4]</span> â†’ ...
   â†“
Handler.dispatchMessage()
   â†“
æ‰§è¡Œæ¶ˆæ¯å¯¹åº”çš„æ“ä½œ
</code></pre>
<p><strong>å½“ä¸»çº¿ç¨‹è¢«é˜»å¡æ—¶:</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">æ­£å¸¸æƒ…å†µ:
[<span class="hljs-meta">Homeé”®äº‹ä»¶</span>] â†’ ç«‹å³å¤„ç† â†’ åˆ‡æ¢æ¡Œé¢ (è€—æ—¶å°äº<span class="hljs-number">100</span>ms)

æœ¬æ¡ˆä¾‹:
[<span class="hljs-meta">Homeé”®äº‹ä»¶</span>] â†’ ç­‰å¾…Repositoryåˆ›å»ºå®Œæˆ â†’ åˆ‡æ¢æ¡Œé¢
                      â†‘
                   <span class="hljs-number">2000</span>æ¬¡åˆ›å»º
                   æ¯æ¬¡<span class="hljs-number">5</span><span class="hljs-number">-10</span>ms
                   æ€»è®¡<span class="hljs-number">10</span><span class="hljs-number">-20</span>ç§’!
</code></pre>
<p><strong>ANR(Application Not Responding)åˆ¤å®šæ ‡å‡†:</strong></p>
<ul>
<li>ä¸»çº¿ç¨‹é˜»å¡å¤§äº5ç§’ â†’ è¾“å…¥äº‹ä»¶æ— å“åº” â†’ ANRå¼¹çª—</li>
</ul>
<p>æœ¬æ¡ˆä¾‹æ¥è¿‘ANRé˜ˆå€¼,ç”¨æˆ·æ„Ÿå—åˆ°æ˜æ˜¾å¡é¡¿ã€‚</p>
<h3 data-id="heading-26">ContentObserverä¸Binderçš„å…³ç³»</h3>
<p><strong>ContentObserver</strong>æ˜¯Androidçš„æ•°æ®è§‚å¯Ÿæœºåˆ¶,ç”¨äºç›‘å¬ContentProviderçš„æ•°æ®å˜åŒ–ã€‚</p>
<p><strong>æ³¨å†Œè¿‡ç¨‹æ¶‰åŠçš„Binderè°ƒç”¨:</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5ccaad4071d4df5813f44d9f5fa254b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767519437&amp;x-signature=V%2BgKJVPa7n2UvlVShTzfSjiq8Ho%3D" alt="case1-contentobserver-binder-ipc.png" loading="lazy"/>
æ¯ä¸ªContentObserveræ³¨å†Œéƒ½ä¼š:</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªBinderä»£ç†å¯¹è±¡</li>
<li>é€šè¿‡Binderä¼ è¾“åˆ°ContentService</li>
<li>å ç”¨Binderèµ„æº
<strong>2000ä¸ªContentObserverçš„å½±å“:</strong></li>
</ol>

<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">Binderå¯¹è±¡æ•°é‡: 2000+</span>
<span class="hljs-section">æ¯ä¸ªå¯¹è±¡å ç”¨:  çº¦500å­—èŠ‚</span>
<span class="hljs-section">æ€»å ç”¨:        1MB+  â† è¾¾åˆ°Binderç¼“å†²åŒºä¸Šé™!</span>
</code></pre>
<h3 data-id="heading-27">åç¨‹åˆ›å»ºçš„å¼€é”€</h3>
<p>è™½ç„¶Kotlinåç¨‹æ¯”çº¿ç¨‹è½»é‡,ä½†<strong>å¤§é‡åˆ›å»ºä»ç„¶æœ‰å¼€é”€</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ¯æ¬¡åˆ›å»ºRepositoryæ—¶</span>
scope.launch {
    <span class="hljs-comment">// 1. åˆ›å»ºContinuationå¯¹è±¡</span>
    <span class="hljs-comment">// 2. åˆ†é…åç¨‹ä¸Šä¸‹æ–‡</span>
    <span class="hljs-comment">// 3. åŠ å…¥è°ƒåº¦é˜Ÿåˆ—</span>
    <span class="hljs-comment">// 4. å ç”¨å†…å­˜(çº¦1-2KB/åç¨‹)</span>
}

<span class="hljs-number">2000</span>ä¸ªåç¨‹:
- å†…å­˜å ç”¨: <span class="hljs-number">2</span>-4MB
- åˆ›å»ºè€—æ—¶: <span class="hljs-number">2000</span> * <span class="hljs-number">0.</span>5ms = <span class="hljs-number">1</span>ç§’
- è°ƒåº¦å¼€é”€: å¢åŠ GCå‹åŠ›
</code></pre>
<hr/>
<h2 data-id="heading-28">é—®é¢˜å¤ç›˜:å®Œæ•´é“¾è·¯</h2>
<p>è®©æˆ‘ä»¬å›é¡¾æ•´ä¸ªé—®é¢˜çš„å®Œæ•´é“¾è·¯:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æµ‹è¯•äººå‘˜åå¤ç‚¹å‡»APAåº”ç”¨(çº¦2000æ¬¡)
   â†“
<span class="hljs-bullet">2.</span> æ¯æ¬¡ç‚¹å‡»åˆ›å»ºä¸€ä¸ªParkingAssistView
   â†“
<span class="hljs-bullet">3.</span> æ¯ä¸ªViewåˆ›å»ºä¸€ä¸ªParkingStateRepository(éå•ä¾‹)
   â†“
<span class="hljs-bullet">4.</span> æ¯ä¸ªRepositoryåˆ›å»ºæ—¶:
<span class="hljs-bullet">   -</span> å¯åŠ¨åç¨‹
<span class="hljs-bullet">   -</span> æ³¨å†ŒContentObserver(Binder IPC)
   â†“
<span class="hljs-bullet">5.</span> ç´¯ç§¯æ•ˆåº”:
<span class="hljs-bullet">   -</span> 2000+ åç¨‹å †ç§¯
<span class="hljs-bullet">   -</span> 2000+ ContentObserveræ³¨å†Œ
<span class="hljs-bullet">   -</span> 2000+ Binderå¯¹è±¡åˆ›å»º
   â†“
<span class="hljs-bullet">6.</span> SystemUIçš„Binderèµ„æºæ± è€—å°½
   â†“
<span class="hljs-bullet">7.</span> ç”¨æˆ·ç‚¹å‡»Homeé”®
   â†“
<span class="hljs-bullet">8.</span> SystemUIéœ€è¦é€šè¿‡Binderä¸APAé€šä¿¡
   â†“
<span class="hljs-bullet">9.</span> Binderè°ƒç”¨å¤±è´¥ (FAILED BINDER TRANSACTION)
   â†“
<span class="hljs-bullet">10.</span> Homeé”®å“åº”é˜»å¡,ä¸»çº¿ç¨‹ç­‰å¾…
   â†“
<span class="hljs-bullet">11.</span> ç”¨æˆ·æ„Ÿå—åˆ°ä¸¥é‡å¡é¡¿(11ç§’å»¶è¿Ÿ)
</code></pre>
<hr/>
<h2 data-id="heading-29">ä¿®å¤éªŒè¯</h2>
<h3 data-id="heading-30">ä¿®å¤æªæ–½</h3>
<ol>
<li>
<p><strong>å°†ParkingStateRepositoryæ”¹ä¸ºå•ä¾‹</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> instance: ParkingStateRepository? = <span class="hljs-literal">null</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getInstance</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: ParkingStateRepository { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
</li>
<li>
<p><strong>æ·»åŠ å›è°ƒç®¡ç†æœºåˆ¶</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> callbacks = CopyOnWriteArrayList&lt;Callback&gt;()
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">registerCallback</span><span class="hljs-params">(callback: <span class="hljs-type">Callback</span>)</span></span> { callbacks.add(callback) }
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">unregisterCallback</span><span class="hljs-params">(callback: <span class="hljs-type">Callback</span>)</span></span> { callbacks.remove(callback) }
</code></pre>
</li>
<li>
<p><strong>åœ¨Viewé”€æ¯æ—¶åŠæ—¶æ¸…ç†</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDetachedFromWindow</span><span class="hljs-params">()</span></span> {
    repository.unregisterCallback(callback)
    <span class="hljs-keyword">super</span>.onDetachedFromWindow()
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-31">éªŒè¯ç»“æœ</h3>
<p>ä¿®å¤åè¿›è¡Œå‹åŠ›æµ‹è¯•:</p>



































<table><thead><tr><th align="left">æµ‹è¯•é¡¹</th><th align="right">ä¿®å¤å‰</th><th align="right">ä¿®å¤å</th></tr></thead><tbody><tr><td align="left"><strong>è¿ç»­ç‚¹å‡»2000æ¬¡</strong></td><td align="right">å¿…ç°å¡é¡¿</td><td align="right">æµç•…</td></tr><tr><td align="left"><strong>Repositoryå®ä¾‹æ•°</strong></td><td align="right">2000+</td><td align="right">1</td></tr><tr><td align="left"><strong>ContentObserveræ•°</strong></td><td align="right">2000+</td><td align="right">1</td></tr><tr><td align="left"><strong>Homeé”®å“åº”æ—¶é—´</strong></td><td align="right">11ç§’</td><td align="right">å°äº100ms</td></tr><tr><td align="left"><strong>Binderå¤±è´¥æ—¥å¿—</strong></td><td align="right">æœ‰</td><td align="right">æ— </td></tr></tbody></table>
<p><strong>ä¿®å¤åæ—¥å¿—:</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">12-23 17:30:10.100 I/ParkingStateRepository:</span> <span class="hljs-string">ParkingStateRepository</span> <span class="hljs-string">initialize</span> <span class="hljs-string">...</span>
<span class="hljs-string">(åªæœ‰ä¸€æ¬¡åˆ›å»ºæ—¥å¿—)</span>

<span class="hljs-attr">12-23 17:30:15.120 D/InputDispatcher:</span> <span class="hljs-string">Home</span> <span class="hljs-string">key</span> <span class="hljs-string">pressed</span>
<span class="hljs-attr">12-23 17:30:15.180 D/ApaActivity:</span> <span class="hljs-string">onPause()</span> <span class="hljs-string">called</span>
                  <span class="hljs-string">â†‘</span>
            <span class="hljs-string">å“åº”æ—¶é—´</span> <span class="hljs-string">å°äº100ms</span> <span class="hljs-string">âœ…</span>
</code></pre>
<hr/>
<h2 data-id="heading-32">ç»éªŒæ€»ç»“</h2>
<h3 data-id="heading-33">æŠ€æœ¯å±‚é¢</h3>
<ol>
<li>
<p><strong>å•ä¾‹æ¨¡å¼çš„é‡è¦æ€§</strong></p>
<ul>
<li>å¯¹äºå…¨å±€æ€§çš„ç®¡ç†ç±»,åŠ¡å¿…ä½¿ç”¨å•ä¾‹</li>
<li>é¿å…é‡å¤åˆ›å»ºå¯¼è‡´çš„èµ„æºæµªè´¹</li>
<li>æ³¨æ„çº¿ç¨‹å®‰å…¨(ä½¿ç”¨<code>@Volatile</code> + <code>synchronized</code>)</li>
</ul>
</li>
<li>
<p><strong>Binderèµ„æºç®¡ç†</strong></p>
<ul>
<li>äº†è§£Binderçš„èµ„æºé™åˆ¶(1MBç¼“å†²åŒº, 16ä¸ªçº¿ç¨‹)</li>
<li>é¿å…é¢‘ç¹åˆ›å»ºBinderå¯¹è±¡</li>
<li>ç›‘æ§"FAILED BINDER TRANSACTION"æ—¥å¿—</li>
</ul>
</li>
<li>
<p><strong>ContentObserverä½¿ç”¨è§„èŒƒ</strong></p>
<ul>
<li>æ³¨å†Œåå¿…é¡»åœ¨åˆé€‚çš„æ—¶æœºunregister</li>
<li>é¿å…é‡å¤æ³¨å†ŒåŒä¸€ä¸ªè§‚å¯Ÿè€…</li>
<li>è€ƒè™‘ä½¿ç”¨å¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼</li>
</ul>
</li>
<li>
<p><strong>åç¨‹ä½¿ç”¨è§„èŒƒ</strong></p>
<ul>
<li>ä½¿ç”¨CoroutineScopeç®¡ç†åç¨‹ç”Ÿå‘½å‘¨æœŸ</li>
<li>åŠæ—¶å–æ¶ˆä¸éœ€è¦çš„åç¨‹</li>
<li>é¿å…åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºå¤§é‡åç¨‹</li>
</ul>
</li>
</ol>
<h3 data-id="heading-34">é—®é¢˜æ’æŸ¥æ–¹æ³•è®º</h3>
<ol>
<li>
<p><strong>åˆ†å±‚æ’æŸ¥</strong></p>
<ul>
<li>ä»æ•´æœºæ€§èƒ½å¼€å§‹</li>
<li>é€å±‚æ·±å…¥åˆ°åº”ç”¨ã€Frameworkã€SystemUI</li>
<li>ä¸è¦è·³è¿‡ä»»ä½•ä¸€å±‚</li>
</ul>
</li>
<li>
<p><strong>æ—¶é—´çº¿åˆ†æ</strong></p>
<ul>
<li>è®°å½•å…³é”®äº‹ä»¶çš„æ—¶é—´æˆ³</li>
<li>è®¡ç®—å„ä¸ªé˜¶æ®µçš„è€—æ—¶</li>
<li>æ‰¾å‡ºè€—æ—¶å¼‚å¸¸çš„ç¯èŠ‚</li>
</ul>
</li>
<li>
<p><strong>æ—¥å¿—åˆ†æ</strong></p>
<ul>
<li>å…³æ³¨ERRORå’ŒWARNçº§åˆ«æ—¥å¿—</li>
<li>ç»Ÿè®¡é‡å¤æ—¥å¿—çš„å‡ºç°æ¬¡æ•°</li>
<li>åˆ†ææ—¥å¿—çš„ä¸Šä¸‹æ–‡å…³è”</li>
</ul>
</li>
<li>
<p><strong>å·¥å…·è¾…åŠ©</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹Binderä½¿ç”¨æƒ…å†µ</span>
adb shell <span class="hljs-built_in">cat</span> /sys/kernel/debug/binder/stats

<span class="hljs-comment"># æŸ¥çœ‹è¿›ç¨‹çš„Binderä¿¡æ¯</span>
adb shell <span class="hljs-built_in">cat</span> /sys/kernel/debug/binder/proc/&lt;pid&gt;

<span class="hljs-comment"># ç›‘æ§ContentObserveræ³¨å†Œ</span>
adb shell dumpsys activity provider
</code></pre>
</li>
</ol>
<h3 data-id="heading-35">å¼€å‘å»ºè®®</h3>
<p><strong>ä»£ç å®¡æŸ¥æ¸…å•:</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">âœ… å…¨å±€æ€§çš„ç®¡ç†ç±»æ˜¯å¦ä½¿ç”¨å•ä¾‹?
âœ… èµ„æºæ³¨å†Œ(Observer/Listener)æ˜¯å¦æœ‰å¯¹åº”çš„æ¸…ç†?
âœ… æ˜¯å¦é¿å…åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œ?
âœ… Binderè°ƒç”¨æ˜¯å¦æœ‰å¼‚å¸¸å¤„ç†?
âœ… æ˜¯å¦æœ‰å†…å­˜æ³„æ¼é£é™©?
</code></pre>
<p><strong>æ€§èƒ½æµ‹è¯•å»ºè®®:</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">âœ… å‹åŠ›æµ‹è¯•:å¿«é€Ÿé‡å¤æ“ä½œ(å¦‚æœ¬æ¡ˆä¾‹çš„åå¤ç‚¹å‡»)
âœ… é•¿æ—¶é—´è¿è¡Œæµ‹è¯•:æ£€æŸ¥èµ„æºæ³„æ¼
âœ… å†…å­˜ç›‘æ§:è§‚å¯Ÿå†…å­˜å¢é•¿è¶‹åŠ¿
âœ… Binderç›‘æ§:ä½¿ç”¨systraceæˆ–perfetto
</code></pre>
<hr/>
<h2 data-id="heading-36">å»¶ä¼¸é˜…è¯»</h2>
<p><strong>Binderæœºåˆ¶:</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kernel.org%2Fdoc%2FDocumentation%2Fandroid%2Fbinder.txt" target="_blank" title="https://www.kernel.org/doc/Documentation/android/binder.txt" ref="nofollow noopener noreferrer">Android Binderè®¾è®¡ä¸å®ç°</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Funiversus%2Farticle%2Fdetails%2F6211589" target="_blank" title="https://blog.csdn.net/universus/article/details/6211589" ref="nofollow noopener noreferrer">ç†è§£Android Binderæœºåˆ¶</a></li>
</ul>
<p><strong>æ€§èƒ½ä¼˜åŒ–:</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Fperformance" target="_blank" title="https://developer.android.com/topic/performance" ref="nofollow noopener noreferrer">Androidæ€§èƒ½ä¼˜åŒ–å…¸èŒƒ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdevices%2Ftech%2Fdisplay%2Fperformance" target="_blank" title="https://source.android.com/devices/tech/display/performance" ref="nofollow noopener noreferrer">SystemUIæ€§èƒ½æœ€ä½³å®è·µ</a></li>
</ul>
<p><strong>å•ä¾‹æ¨¡å¼:</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoding-conventions.html" target="_blank" title="https://kotlinlang.org/docs/coding-conventions.html" ref="nofollow noopener noreferrer">Effective Kotlin: Item 1 - è€ƒè™‘ä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•ä»£æ›¿æ„é€ å™¨</a></li>
</ul>
<p><strong>Androidç¨³å®šæ€§å’Œæ€§èƒ½ä¸“æ ç›®å½•å·²ç»å‘å¸ƒ</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fandroid-stability-perf-series-readme" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/android-stability-perf-series-readme" ref="nofollow noopener noreferrer">Androidç¨³å®šæ€§&amp;æ€§èƒ½æ·±å…¥ç†è§£ä¸“æ ä»‹ç»</a></li>
</ul>
<hr/>
<p><em>å¯¹æœ¬æ¡ˆä¾‹æœ‰ç–‘é—®æˆ–æƒ³åˆ†äº«ä½ çš„æ’æŸ¥ç»éªŒ?æ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®º!</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ANRå®æˆ˜åˆ†æï¼šä¸€æ¬¡audioserveræ­»é”å¼•å‘çš„ç³»ç»Ÿçº§æ•…éšœæ’æŸ¥]]></title>    <link>https://juejin.cn/post/7588092534162964480</link>    <guid>https://juejin.cn/post/7588092534162964480</guid>    <pubDate>2025-12-28T09:51:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588092534162964480" data-draft-id="7588098335791333376" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ANRå®æˆ˜åˆ†æï¼šä¸€æ¬¡audioserveræ­»é”å¼•å‘çš„ç³»ç»Ÿçº§æ•…éšœæ’æŸ¥"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–,Debug"/> <meta itemprop="datePublished" content="2025-12-28T09:51:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ANRå®æˆ˜åˆ†æï¼šä¸€æ¬¡audioserveræ­»é”å¼•å‘çš„ç³»ç»Ÿçº§æ•…éšœæ’æŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:51:17.000Z" title="Sun Dec 28 2025 09:51:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸€åœºçªå¦‚å…¶æ¥çš„ç³»ç»Ÿå´©æºƒ</h2>
<p>å‘¨å…­ä¸‹åˆï¼Œæµ‹è¯•åŒå­¦åœ¨ç¾¤é‡Œ@æ‰€æœ‰äººï¼š</p>
<blockquote>
<p>"ç³»ç»Ÿå½»åº•å¡æ­»äº†ï¼Œè“ç‰™è¿ä¸ä¸Šï¼ŒSystemUIä¹Ÿæ— å“åº”ï¼ŒæŠ“åˆ°äº†ä¸€å †ANRæ—¥å¿—..."</p>
</blockquote>
<p>æ‰“å¼€æ—¥å¿—æ–‡ä»¶å¤¹ä¸€çœ‹ï¼Œå¿ƒé‡Œå’¯å™”ä¸€ä¸‹â€”â€”<strong>10åˆ†é’Ÿå†…è¿ç»­äº§ç”Ÿäº†10ä¸ªANR</strong>ï¼Œæ¶‰åŠè“ç‰™æœåŠ¡ã€SystemUIã€å›¾åº“åº”ç”¨ç­‰å¤šä¸ªå…³é”®è¿›ç¨‹ã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æŸä¸ªåº”ç”¨çš„å•ç‚¹é—®é¢˜ï¼Œæ›´åƒæ˜¯ç³»ç»Ÿçº§çš„è¿é”æ•…éšœã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªåœ¨Androidç³»ç»Ÿå±‚æ‘¸çˆ¬æ»šæ‰“å¤šå¹´çš„è€å…µï¼Œæˆ‘çŸ¥é“è¿™ç§"æ‰¹é‡ANR"å¾€å¾€æ„å‘³ç€åº•å±‚æœåŠ¡å‡ºäº†å¤§é—®é¢˜ã€‚äºæ˜¯å¼€å§‹äº†è¿™åœºæƒŠå¿ƒåŠ¨é­„çš„æ•…éšœæ’æŸ¥ä¹‹æ—…ã€‚</p>
<p><strong>æœ¬æ–‡å°†å¸¦ä½ èµ°è¿›è¿™æ¬¡çœŸå®çš„ANRåˆ†æè¿‡ç¨‹</strong>ï¼Œå­¦ä¹ ï¼š</p>
<ul>
<li>å¦‚ä½•å¿«é€Ÿå®šä½æ‰¹é‡ANRçš„æ ¹æœ¬åŸå› </li>
<li>audioserveræ­»é”çš„è¯Šæ–­æ–¹æ³•</li>
<li>Binder IPCé˜»å¡çš„è°ƒè¯•æŠ€å·§</li>
<li>ç³»ç»Ÿçº§æ•…éšœçš„é¢„é˜²å’Œè§£å†³æ–¹æ¡ˆ</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>é€‚åˆè¯»è€…</strong>ï¼šAndroidç³»ç»Ÿå¼€å‘è€…ã€æ€§èƒ½ä¼˜åŒ–å·¥ç¨‹å¸ˆã€å¯¹åº•å±‚åŸç†æ„Ÿå…´è¶£çš„å¼€å‘è€…</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ä¸€ã€æ•…éšœç°åœºï¼šæ‰¹é‡ANRçš„æƒŠäººä¸€è‡´æ€§</h2>
<h3 data-id="heading-2">1.1 åŸºæœ¬ä¿¡æ¯æ‰«æ</h3>
<p>å…ˆæ¥çœ‹çœ‹è¿™æ¬¡æ•…éšœçš„åŸºæœ¬æƒ…å†µï¼š</p>
<p><strong>æ—¶é—´çº¿</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">2025-12-21 16:56:31</span> <span class="hljs-bullet">-</span> <span class="hljs-string">ç¬¬1ä¸ªANR</span> <span class="hljs-string">(com.android.bluetoothext)</span>
<span class="hljs-number">2025-12-21 16:56:53</span> <span class="hljs-bullet">-</span> <span class="hljs-string">ç¬¬2ä¸ªANR</span> <span class="hljs-string">(com.android.bluetooth)</span>
<span class="hljs-number">2025-12-21 16:58:36</span> <span class="hljs-bullet">-</span> <span class="hljs-string">ç¬¬3ä¸ªANR</span> <span class="hljs-string">(com.android.bluetoothext)</span>
<span class="hljs-string">...</span>
<span class="hljs-number">2025-12-21 17:06:35</span> <span class="hljs-bullet">-</span> <span class="hljs-string">ç¬¬10ä¸ªANR</span> <span class="hljs-string">(com.android.systemui)</span>
</code></pre>
<p>10åˆ†é’Ÿå†…ï¼Œ10ä¸ªANRï¼Œå¹³å‡æ¯åˆ†é’Ÿä¸€ä¸ªã€‚è¿™ç»ä¸æ˜¯å·§åˆã€‚</p>
<p><strong>æ¶‰åŠè¿›ç¨‹</strong>ï¼š</p>






























<table><thead><tr><th align="left">è¿›ç¨‹å</th><th align="center">ANRæ¬¡æ•°</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>com.android.bluetoothext</code></td><td align="center">5æ¬¡</td><td align="left">è“ç‰™æ‰©å±•æœåŠ¡ï¼Œåå¤ANR</td></tr><tr><td align="left"><code>com.android.bluetooth</code></td><td align="center">3æ¬¡</td><td align="left">è“ç‰™æ ¸å¿ƒæœåŠ¡</td></tr><tr><td align="left"><code>com.android.gallery</code></td><td align="center">1æ¬¡</td><td align="left">å›¾åº“åº”ç”¨</td></tr><tr><td align="left"><code>com.android.systemui</code></td><td align="center">1æ¬¡</td><td align="left">ç³»ç»ŸUI</td></tr></tbody></table>
<p>è“ç‰™æœåŠ¡å äº†8æˆï¼Œæ˜¾ç„¶å®ƒåœ¨ä¸åœåœ°å°è¯•å¯åŠ¨ä½†æ¯æ¬¡éƒ½å¤±è´¥ã€‚</p>
<h3 data-id="heading-3">1.2 ç¬¬ä¸€çœ¼çœ‹å †æ ˆï¼šæƒŠäººçš„ç›¸ä¼¼æ€§</h3>
<p>æ‰“å¼€ç¬¬ä¸€ä¸ªANRæ—¥å¿—ï¼Œä¸»çº¿ç¨‹å †æ ˆæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-string">"main"</span> prio=<span class="hljs-number">5</span> tid=<span class="hljs-number">1</span> Native
  at android.os.BinderProxy.<span class="hljs-title function_ invoke__">transactNative</span> (Native method)
  at android.os.BinderProxy.<span class="hljs-title function_ invoke__">transact</span> (BinderProxy.<span class="hljs-attr">java</span>:<span class="hljs-number">584</span>)
  at android.media.IAudioService$Stub<span class="hljs-variable">$Proxy</span>.registerAudioPolicy
  at android.media.AudioManager.registerAudioPolicy
  at com.android.bluetooth.btservice.AdapterService.<span class="hljs-title function_ invoke__">onCreate</span> (AdapterService.<span class="hljs-attr">java</span>:<span class="hljs-number">571</span>)
</code></pre>
<p>å†çœ‹ç¬¬äºŒä¸ªï¼Œç¬¬ä¸‰ä¸ª... <strong>æ‰€æœ‰ANRçš„ä¸»çº¿ç¨‹éƒ½å¡åœ¨äº†åŒä¸€ä¸ªåœ°æ–¹</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Native: #<span class="hljs-number">02</span> android::IPCThreadState::talkWithDriver
Native: #<span class="hljs-number">03</span> android::IPCThreadState::waitForResponse
Native: #<span class="hljs-number">04</span> android::IPCThreadState::transact
</code></pre>
<p>å…³é”®è¯ï¼š<code>Binder</code>ã€<code>transact</code>ã€<code>waitForResponse</code>ã€‚</p>
<p><strong>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</strong> æ‰€æœ‰è¿›ç¨‹éƒ½åœ¨ç­‰å¾…æŸä¸ªBinderæœåŠ¡å“åº”ï¼Œä½†é‚£ä¸ªæœåŠ¡å·²ç»"æ­»"äº†ï¼Œæ°¸è¿œä¸ä¼šå›å¤ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€æŠ½ä¸å‰¥èŒ§ï¼šå®šä½çœŸå‡¶çš„ä¸‰æ­¥æ³•</h2>
<h3 data-id="heading-5">2.1 ç¬¬ä¸€æ­¥ï¼šæ‰¾åˆ°å…±åŒçš„ç­‰å¾…ç›®æ ‡</h3>
<p>ANRæ—¥å¿—ä¸­æœ‰ä¸€æ®µå…³é”®ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">Blocked <span class="hljs-keyword">on</span> a monitor owned <span class="hljs-keyword">by</span>:
  <span class="hljs-string">"Binder:661_2"</span> (waiting <span class="hljs-keyword">on</span> &lt;monitor&gt; held <span class="hljs-keyword">by</span> <span class="hljs-string">"audioserver"</span>)
</code></pre>
<p><strong>Binder:661_2</strong> æ˜¯ä»€ä¹ˆï¼Ÿ<code>661</code> æ˜¯è¿›ç¨‹PIDã€‚æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># PID: 661 å¯¹åº”çš„è¿›ç¨‹</span>
audioserver
</code></pre>
<p>æ‰€æœ‰åº”ç”¨éƒ½åœ¨ç­‰å¾… <strong>audioserver (PID: 661)</strong> å“åº”ï¼</p>
<h3 data-id="heading-6">2.2 ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹audioserverçš„å †æ ˆ</h3>
<p>æ‰¾åˆ°audioserverè¿›ç¨‹çš„çº¿ç¨‹dumpï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"audioserver"</span> sysTid=<span class="hljs-number">661</span> Native
  native: #<span class="hljs-number">00</span> syscall+<span class="hljs-number">28</span>
  native: #<span class="hljs-number">01</span> __futex_wait_ex(<span class="hljs-type">void</span> <span class="hljs-keyword">volatile</span>*, <span class="hljs-type">int</span>, <span class="hljs-type">int</span>, timespec <span class="hljs-type">const</span>*)
  native: #<span class="hljs-number">02</span> <span class="hljs-built_in">pthread_mutex_timedlock_monotonic_np</span>(<span class="hljs-type">pthread_mutex_internal_t</span>*, timespec <span class="hljs-type">const</span>*)
  native: #<span class="hljs-number">03</span> NonPI::<span class="hljs-built_in">MutexLockWithTimeout</span>(<span class="hljs-type">pthread_mutex_internal_t</span>*, <span class="hljs-type">bool</span>, timespec <span class="hljs-type">const</span>*)
  native: #<span class="hljs-number">04</span> android::AudioFlinger::<span class="hljs-built_in">registerClient</span>(android::sp&lt;android::IAudioFlingerClient&gt; <span class="hljs-type">const</span>&amp;)
  at libaudioflinger.<span class="hljs-built_in">so</span> (offset <span class="hljs-number">0x48928</span>)
</code></pre>
<p><strong>å…³é”®å‘ç°</strong>ï¼š</p>
<ul>
<li>audioserverçš„ä¸»çº¿ç¨‹è¢«é˜»å¡åœ¨ <code>AudioFlinger::registerClient()</code> æ–¹æ³•</li>
<li>å®ƒåœ¨å°è¯•è·å–ä¸€ä¸ªäº’æ–¥é”ï¼ˆ<code>pthread_mutex_timedlock</code>ï¼‰</li>
<li>çº¿ç¨‹çŠ¶æ€ï¼š<code>futex_wait_queue_me</code> - åœ¨futexç­‰å¾…é˜Ÿåˆ—ä¸­</li>
</ul>
<p><strong>è¿™æ˜¯å…¸å‹çš„æ­»é”ç°è±¡</strong>ï¼šaudioserverè‡ªå·±å¡ä½äº†ï¼Œæ‰€ä»¥æ— æ³•å“åº”ä»»ä½•å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p>
<h3 data-id="heading-7">2.3 ç¬¬ä¸‰æ­¥ï¼šç¡®è®¤Binderé€šä¿¡é˜»å¡</h3>
<p>å†çœ‹åº”ç”¨ä¾§çš„nativeå †æ ˆï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">native:</span> <span class="hljs-comment">#00 __ioctl+8 (/apex/com.android.runtime/lib64/bionic/libc.so)</span>
<span class="hljs-attr">native:</span> <span class="hljs-comment">#01 ioctl+152 (/apex/com.android.runtime/lib64/bionic/libc.so)</span>
<span class="hljs-attr">native:</span> <span class="hljs-comment">#02 android::IPCThreadState::talkWithDriver(bool) (libbinder.so)</span>
<span class="hljs-attr">native:</span> <span class="hljs-comment">#03 android::IPCThreadState::waitForResponse(...) (libbinder.so)</span>
<span class="hljs-attr">native:</span> <span class="hljs-comment">#04 android::IPCThreadState::transact(...) (libbinder.so)</span>
<span class="hljs-attr">native:</span> <span class="hljs-comment">#05 android::BpBinder::transact(...) (libbinder.so)</span>
<span class="hljs-attr">native:</span> <span class="hljs-comment">#06 android::media::BpAudioPolicyService::registerClient(...) (libaudioclient.so)</span>
</code></pre>
<p>å®Œæ•´çš„è°ƒç”¨é“¾è·¯ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">åº”ç”¨è¿›ç¨‹
  â””â”€ Binder IPC è°ƒç”¨ audioserver
      â””â”€ <span class="hljs-built_in">ioctl</span>() å‘é€è¯·æ±‚åˆ° Binder é©±åŠ¨
          â””â”€ ç­‰å¾… audioserver å¤„ç†å¹¶è¿”å›
              â””â”€ ä½† audioserver ä¸»çº¿ç¨‹å·²æ­»é” âŒ
                  â””â”€ æ°¸è¿œç­‰ä¸åˆ°å“åº” â°
</code></pre>
<p><strong>çœŸç›¸å¤§ç™½</strong>ï¼šaudioserver è¿›ç¨‹å†…éƒ¨å‘ç”Ÿæ­»é” â†’ æ— æ³•å¤„ç†ä»»ä½• Binder è¯·æ±‚ â†’ æ‰€æœ‰ä¾èµ–éŸ³é¢‘æœåŠ¡çš„è¿›ç¨‹è¢«é˜»å¡ â†’ æ‰¹é‡ ANR çˆ†å‘ã€‚</p>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€è¿é”ååº”ï¼šä¸€ä¸ªæœåŠ¡å¦‚ä½•æ‹–å®æ•´ä¸ªç³»ç»Ÿ</h2>
<h3 data-id="heading-9">3.1 è“ç‰™æœåŠ¡ï¼šå¯åŠ¨å³ANR</h3>
<p><strong>é˜»å¡ä½ç½®</strong>ï¼š<code>AdapterService.java:571</code></p>
<p>è“ç‰™æœåŠ¡çš„ <code>onCreate()</code> æ–¹æ³•åœ¨å¯åŠ¨æ—¶éœ€è¦æ³¨å†ŒéŸ³é¢‘è®¾å¤‡å›è°ƒï¼Œè°ƒç”¨é“¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">AdapterService.onCreate()
  â†’ ActiveDeviceManager.start()
    â†’ AudioManager.registerAudioDeviceCallback(...)
      â†’ AudioManager.registerAudioPortUpdateListener(...)
        â†’ AudioPortEventHandler.init()
          â†’ native_setup() [JNIè°ƒç”¨]
            â†’ AudioSystem::addAudioPortCallback()
              â†’ AudioSystem::get_audio_policy_service()
                â†’ BpAudioPolicyService::registerClient()
                  â†’ [Binder IPC é˜»å¡ âŒ]
</code></pre>
<p><strong>ç»“æœ</strong>ï¼šè“ç‰™æœåŠ¡æ ¹æœ¬æ— æ³•å¯åŠ¨ï¼Œç”¨æˆ·æ— æ³•ä½¿ç”¨è“ç‰™åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-10">3.2 SystemUIï¼šé”å±éŸ³æ•ˆæ’­æ”¾å¤±è´¥</h3>
<p><strong>é˜»å¡ä½ç½®</strong>ï¼š<code>SystemUIService.java:70</code></p>
<p>SystemUI åœ¨å¯åŠ¨æ—¶ä¼šåˆå§‹åŒ–é”å±ç®¡ç†å™¨ï¼Œè€Œé”å±éœ€è¦åŠ è½½éŸ³æ•ˆæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java">SystemUIService.onCreate()
  â†’ SystemUIApplication.startServicesIfNeeded()
    â†’ KeyguardViewMediator.start()
      â†’ KeyguardViewMediator.setupLocked()
        â†’ SoundPool.Builder.build()  <span class="hljs-comment">// åˆ›å»ºéŸ³æ•ˆæ’­æ”¾å™¨</span>
          â†’ SoundPool.&lt;init&gt;()
            â†’ PlayerBase.baseRegisterPlayer()
              â†’ IAudioService.trackPlayer()
                â†’ [Binder IPC é˜»å¡ âŒ]
</code></pre>
<p><strong>ç»“æœ</strong>ï¼šSystemUI å¯åŠ¨å»¶è¿Ÿï¼Œé”å±ç•Œé¢å¯èƒ½æ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<h3 data-id="heading-11">3.3 å›¾åº“åº”ç”¨ï¼šè½¦è½½éŸ³é¢‘ç®¡ç†å—é˜»</h3>
<p><strong>é˜»å¡ä½ç½®</strong>ï¼š<code>SystemJobService</code> (WorkManageråå°ä»»åŠ¡)</p>
<p>å›¾åº“åº”ç”¨çš„åå°ä»»åŠ¡å°è¯•è·å–è½¦è½½éŸ³é¢‘éŸ³é‡ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java">androidx.work.impl.background.systemjob.SystemJobService (åå°ä»»åŠ¡)
  â†’ LifecycleObserver.onLifecycleChanged()
    â†’ android.car.Car.lambda$dispatchCarReadyToMainThread
      â†’ CarAudioManager.getVolumeGroupIdForUsage(...)
        â†’ ICarAudio$Stub$Proxy.getVolumeGroupIdForUsage(...)
          â†’ [Binder IPC é˜»å¡ âŒ]
</code></pre>
<p><strong>ç»“æœ</strong>ï¼šåº”ç”¨å¯åŠ¨ç¼“æ…¢æˆ–å¡é¡¿ã€‚</p>
<h3 data-id="heading-12">3.4 çº§è”æ•ˆåº”ç¤ºæ„å›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc993916477c4ca5a7ce216558e97f96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767520276&amp;x-signature=Se5N6zLQnIV9SDrI4kqoB3DkqeM%3D" alt="case2-ANRè¿é”ååº”æ¶æ„å›¾.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-13">å››ã€æ·±å…¥ç—…ç¶ï¼šaudioserverä¸ºä½•æ­»é”ï¼Ÿ</h2>
<h3 data-id="heading-14">4.1 æ­»é”çš„æœ¬è´¨</h3>
<p>audioserver ä¸»çº¿ç¨‹å¡åœ¨äº†è¿™é‡Œï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½ç½®: frameworks/av/services/audioflinger/AudioFlinger.cpp</span>
<span class="hljs-function"><span class="hljs-type">status_t</span> <span class="hljs-title">AudioFlinger::registerClient</span><span class="hljs-params">(<span class="hljs-type">const</span> sp&lt;IAudioFlingerClient&gt;&amp; client)</span> </span>{
    Mutex::Autolock _l(mLock);  <span class="hljs-comment">// â† å°è¯•è·å– mLockï¼Œä½†å®ƒå·²è¢«å ç”¨</span>
    <span class="hljs-comment">// ... åç»­é€»è¾‘æ°¸è¿œæ‰§è¡Œä¸åˆ°</span>
}
</code></pre>
<p>ä»å †æ ˆçœ‹ï¼Œçº¿ç¨‹åœ¨ <code>pthread_mutex_timedlock</code> ä¸­ç­‰å¾…è¶…æ—¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">NonPI::<span class="hljs-built_in">MutexLockWithTimeout</span>(<span class="hljs-type">pthread_mutex_internal_t</span>*, <span class="hljs-type">bool</span>, timespec <span class="hljs-type">const</span>*)
</code></pre>
<p><strong>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li><code>mLock</code> å·²ç»è¢«æŸä¸ªçº¿ç¨‹æŒæœ‰</li>
<li>æŒæœ‰é”çš„çº¿ç¨‹å¯èƒ½åœ¨ç­‰å¾…å¦ä¸€ä¸ªèµ„æº</li>
<li>å½¢æˆäº†ç»å…¸çš„æ­»é”å¾ªç¯</li>
</ul>
<h3 data-id="heading-15">4.2 å¯èƒ½çš„æ­»é”åœºæ™¯</h3>
<p>æ ¹æ®ç»éªŒï¼ŒAudioFlingerçš„æ­»é”é€šå¸¸æœ‰å‡ ç§æ¨¡å¼ï¼š</p>
<p><strong>åœºæ™¯1ï¼šçº¿ç¨‹A-Bäº’ç›¸ç­‰å¾…</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">çº¿ç¨‹A: æŒæœ‰ mLock â†’ ç­‰å¾… mHardwareLock</span>
<span class="hljs-section">çº¿ç¨‹B: æŒæœ‰ mHardwareLock â†’ ç­‰å¾… mLock</span>
</code></pre>
<p><strong>åœºæ™¯2ï¼šå¼‚å¸¸æŒé”</strong></p>
<pre><code class="hljs">çº¿ç¨‹æŒæœ‰ mLock åå‘ç”Ÿå¼‚å¸¸ â†’ é”æœªé‡Šæ”¾ â†’ å…¶ä»–çº¿ç¨‹æ°¸è¿œç­‰å¾…
</code></pre>
<p><strong>åœºæ™¯3ï¼šç¡¬ä»¶é©±åŠ¨å¡æ­»</strong></p>
<pre><code class="hljs">çº¿ç¨‹æŒæœ‰ mLock â†’ è°ƒç”¨éŸ³é¢‘HAL â†’ HALå±‚æˆ–é©±åŠ¨å¡æ­» â†’ é”æ— æ³•é‡Šæ”¾
</code></pre>
<h3 data-id="heading-16">4.3 ä¸ºä»€ä¹ˆä¼šé›†ä¸­çˆ†å‘ï¼Ÿ</h3>
<p>ä»æ—¶é—´çº¿çœ‹ï¼Œæ‰€æœ‰ANRéƒ½å‘ç”Ÿåœ¨10åˆ†é’Ÿå†…ï¼Œä¸”è“ç‰™æœåŠ¡å¤šæ¬¡é‡è¯•ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ï¼š</p>
<ol>
<li>
<p><strong>ç³»ç»Ÿå¯åŠ¨/é‡å¯é˜¶æ®µ</strong></p>
<ul>
<li>å¤šä¸ªæœåŠ¡åŒæ—¶å¯åŠ¨</li>
<li>èµ„æºç«äº‰æ¿€çƒˆ</li>
<li>audioserveråˆå§‹åŒ–æœªå®Œæˆå°±æ”¶åˆ°å¤§é‡è¯·æ±‚</li>
</ul>
</li>
<li>
<p><strong>éŸ³é¢‘è®¾å¤‡åˆ‡æ¢æ—¶</strong></p>
<ul>
<li>è“ç‰™éŸ³é¢‘è¿æ¥/æ–­å¼€</li>
<li>è§¦å‘éŸ³é¢‘è·¯ç”±é‡æ–°é…ç½®</li>
<li>å¯èƒ½å¯¼è‡´é”ç«äº‰</li>
</ul>
</li>
<li>
<p><strong>OTAæ›´æ–°å</strong></p>
<ul>
<li>éŸ³é¢‘é…ç½®æ–‡ä»¶å˜æ›´</li>
<li>HALç‰ˆæœ¬ä¸åŒ¹é…</li>
<li>åˆå§‹åŒ–é€»è¾‘å¼‚å¸¸</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-17">äº”ã€å®æˆ˜å·¥å…·ï¼šå¦‚ä½•å¿«é€Ÿè¯Šæ–­ç±»ä¼¼é—®é¢˜</h2>
<h3 data-id="heading-18">5.1 å®æ—¶ç›‘æ§audioserverçŠ¶æ€</h3>
<p>å½“ç³»ç»Ÿå¡é¡¿æ—¶ï¼Œç¬¬ä¸€æ—¶é—´è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ£€æŸ¥audioserverè¿›ç¨‹æ˜¯å¦å­˜åœ¨</span>
adb shell ps -A | grep audioserver

<span class="hljs-comment"># 2. æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€</span>
adb shell <span class="hljs-built_in">cat</span> /proc/$(adb shell pidof audioserver)/status

<span class="hljs-comment"># 3. æŸ¥çœ‹ä¸»çº¿ç¨‹å †æ ˆï¼ˆå¿«é€Ÿåˆ¤æ–­æ˜¯å¦å¡æ­»ï¼‰</span>
adb shell <span class="hljs-built_in">cat</span> /proc/$(adb shell pidof audioserver)/stack
</code></pre>
<h3 data-id="heading-19">5.2 Binderè°ƒè¯•ç¥å™¨</h3>
<p>æŸ¥çœ‹Binderé©±åŠ¨ä¸­çš„é€šä¿¡çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰Binderäº‹åŠ¡</span>
adb shell <span class="hljs-built_in">cat</span> /sys/kernel/debug/binder/transactions

<span class="hljs-comment"># æŸ¥çœ‹audioserverçš„Binderä¿¡æ¯</span>
adb shell <span class="hljs-built_in">cat</span> /sys/kernel/debug/binder/proc/$(adb shell pidof audioserver)

<span class="hljs-comment"># æŸ¥çœ‹æ•´ä½“BinderçŠ¶æ€</span>
adb shell <span class="hljs-built_in">cat</span> /sys/kernel/debug/binder/state
</code></pre>
<p>å…³é”®ä¿¡æ¯ï¼š</p>
<ul>
<li><code>async_recv</code>ï¼šå¼‚æ­¥æ¥æ”¶é˜Ÿåˆ—é•¿åº¦</li>
<li><code>ready_threads</code>ï¼šå¯ç”¨çš„Binderçº¿ç¨‹æ•°</li>
<li><code>waiting_threads</code>ï¼šæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹æ•°</li>
</ul>
<p>å¦‚æœçœ‹åˆ°å¤§é‡äº‹åŠ¡å †ç§¯åœ¨æŸä¸ªè¿›ç¨‹ï¼Œå°±æ‰¾åˆ°äº†ç“¶é¢ˆã€‚</p>
<h3 data-id="heading-20">5.3 éŸ³é¢‘æœåŠ¡è¯Šæ–­å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹AudioFlingerçŠ¶æ€</span>
adb shell dumpsys media.audio_flinger

<span class="hljs-comment"># æŸ¥çœ‹éŸ³é¢‘ç­–ç•¥æœåŠ¡</span>
adb shell dumpsys media.audio_policy

<span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰éŸ³é¢‘æµ</span>
adb shell dumpsys media.audio_flinger | grep -A 20 <span class="hljs-string">"Clients:"</span>
</code></pre>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™äº›å‘½ä»¤åº”è¯¥èƒ½è¿”å›å®Œæ•´ä¿¡æ¯ã€‚å¦‚æœå¡ä½ä¸è¿”å›ï¼Œè¯´æ˜audioserverå·²æ­»é”ã€‚</p>
<h3 data-id="heading-21">5.4 æ€§èƒ½è¿½è¸ªåˆ©å™¨ï¼šsystrace</h3>
<p>å¯¹äºéš¾ä»¥å¤ç°çš„é—®é¢˜ï¼Œå¯ä»¥æå‰å¼€å¯systraceï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ•è·ç³»ç»Ÿè°ƒç”¨å’ŒBinderé€šä¿¡</span>
python systrace.py -o trace.html \
  <span class="hljs-built_in">sched</span> freq idle am wm gfx view binder_driver hal audio \
  -t 30
</code></pre>
<p>åœ¨traceä¸­æœç´¢ <code>audioserver</code>ï¼ŒæŸ¥çœ‹ï¼š</p>
<ul>
<li>çº¿ç¨‹è°ƒåº¦æƒ…å†µ</li>
<li>Binderäº‹åŠ¡æ—¶é•¿</li>
<li>é”ç­‰å¾…æ—¶é—´</li>
</ul>
<p>å¦‚æœçœ‹åˆ°æŸä¸ª Binder äº‹åŠ¡çš„ <code>transaction duration</code> è¶…è¿‡ 5 ç§’ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯æ­»é”ã€‚</p>
<hr/>
<h2 data-id="heading-22">å…­ã€ç»éªŒæ€»ç»“ï¼šæ‰¹é‡ANRçš„è¯Šæ–­æ¨¡å¼</h2>
<h3 data-id="heading-23">6.1 è¯Šæ–­æµç¨‹å›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e47a096ff2f245d49d324cc87e1e4559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767520276&amp;x-signature=j%2BssMJylrvgVTsTemLtLurpGedQ%3D" alt="case2-æ‰¹é‡ANRé—®é¢˜è¯Šæ–­æµç¨‹å›¾.png" loading="lazy"/></p>
<h3 data-id="heading-24">6.2 å…³é”®è¯Šæ–­ä¿¡å·</h3>



































<table><thead><tr><th align="left">ç°è±¡</th><th align="left">å¯èƒ½åŸå› </th><th align="left">éªŒè¯æ–¹æ³•</th></tr></thead><tbody><tr><td align="left">æ‰€æœ‰ANRçš„çº¿ç¨‹éƒ½åœ¨ <code>waitForResponse</code></td><td align="left">æŸä¸ªç³»ç»ŸæœåŠ¡å¡æ­»</td><td align="left">æŸ¥çœ‹Binderäº‹åŠ¡é˜Ÿåˆ—</td></tr><tr><td align="left">ç›®æ ‡æœåŠ¡è¿›ç¨‹å­˜åœ¨ä½†æ— å“åº”</td><td align="left">æœåŠ¡å†…éƒ¨æ­»é”æˆ–æ­»å¾ªç¯</td><td align="left"><code>debuggerd -b &lt;pid&gt;</code> æŸ¥çœ‹å †æ ˆ</td></tr><tr><td align="left">çº¿ç¨‹çŠ¶æ€ä¸º <code>futex_wait</code></td><td align="left">ç­‰å¾…é”æˆ–æ¡ä»¶å˜é‡</td><td align="left">æŸ¥çœ‹é”æŒæœ‰è€…</td></tr><tr><td align="left">å †æ ˆä¸­æœ‰ <code>AudioFlinger</code></td><td align="left">éŸ³é¢‘æœåŠ¡é—®é¢˜</td><td align="left"><code>dumpsys media.audio_flinger</code></td></tr><tr><td align="left">å¤šä¸ªè¿›ç¨‹ç­‰å¾…åŒä¸€ä¸ªPID</td><td align="left">è¯¥PIDè¿›ç¨‹æ˜¯æ•…éšœæº</td><td align="left">é‡ç‚¹åˆ†æè¯¥è¿›ç¨‹</td></tr></tbody></table>
<h3 data-id="heading-25">6.3 é¿å‘æŒ‡å—</h3>
<p>åŸºäºè¿™æ¬¡äº‹æ•…çš„ç»éªŒæ•™è®­ï¼š</p>
<p><strong>âŒ ä¸è¦åšçš„äº‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä¸è¦åœ¨ä¸»çº¿ç¨‹åŒæ­¥è°ƒç”¨å¯èƒ½è€—æ—¶çš„ç³»ç»ŸæœåŠ¡</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å±é™©ç¤ºä¾‹</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">()</span> {
    audioManager.registerAudioDeviceCallback(...);  <span class="hljs-comment">// å¯èƒ½é˜»å¡</span>
}
</code></pre>
</li>
<li>
<p><strong>ä¸è¦å¿½ç•¥Binderè°ƒç”¨è¶…æ—¶</strong></p>
<ul>
<li>é»˜è®¤çš„Binderè¶…æ—¶æ˜¯5ç§’ï¼Œè¶³ä»¥å¼•å‘ANR</li>
<li>åº”è¯¥è®¾è®¡å¼‚æ­¥æœºåˆ¶æˆ–æ˜¾å¼è¶…æ—¶å¤„ç†</li>
</ul>
</li>
<li>
<p><strong>ä¸è¦åœ¨æŒæœ‰é”çš„æƒ…å†µä¸‹è°ƒç”¨å¤–éƒ¨ä»£ç </strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å±é™©ä»£ç </span>
Mutex::Autolock _l(mLock);
callback-&gt;<span class="hljs-built_in">onEvent</span>();  <span class="hljs-comment">// callbackå¯èƒ½æ‰§è¡Œä»»æ„ä»£ç ï¼Œå¯èƒ½æ­»é”</span>
</code></pre>
</li>
</ol>
<p><strong>âœ… åº”è¯¥åšçš„äº‹</strong>ï¼š</p>
<ol>
<li>
<p><strong>é‡è¦çš„ç³»ç»ŸæœåŠ¡è°ƒç”¨ä½¿ç”¨å¼‚æ­¥+å›è°ƒ</strong></p>
<pre><code class="hljs language-java" lang="java">executor.execute(() -&gt; {
    <span class="hljs-keyword">try</span> {
        audioManager.registerAudioDeviceCallback(...);
        callback.onSuccess();
    } <span class="hljs-keyword">catch</span> (Exception e) {
        callback.onError(e);
    }
});
</code></pre>
</li>
<li>
<p><strong>æ·»åŠ æœåŠ¡å¥åº·æ£€æŸ¥</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isServiceAlive</span><span class="hljs-params">(String serviceName)</span> {
    <span class="hljs-type">IBinder</span> <span class="hljs-variable">binder</span> <span class="hljs-operator">=</span> ServiceManager.getService(serviceName);
    <span class="hljs-keyword">if</span> (binder == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> binder.pingBinder();
    } <span class="hljs-keyword">catch</span> (RemoteException e) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</code></pre>
</li>
<li>
<p><strong>å®ç°ä¼˜é›…é™çº§</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (!isAudioServiceAvailable()) {
    Log.w(TAG, <span class="hljs-string">"Audio service unavailable, using silent mode"</span>);
    useSilentMode();  <span class="hljs-comment">// é™çº§æ–¹æ¡ˆ</span>
    <span class="hljs-keyword">return</span>;
}
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-26">å»¶ä¼¸é˜…è¯»</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fandroid-stability-perf-series-readme" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/android-stability-perf-series-readme" ref="nofollow noopener noreferrer">Androidç¨³å®šæ€§&amp;æ€§èƒ½æ·±å…¥ç†è§£ä¸“æ ä»‹ç»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase1-android-ivi-lag-case-analysis-binder-consumed" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case1-android-ivi-lag-case-analysis-binder-consumed" ref="nofollow noopener noreferrer">Androidè½¦æœºå¡é¡¿æ¡ˆä¾‹å‰–æ:ä»Binderè€—å°½åˆ°å•ä¾‹ç¼ºå¤±çš„æ·±åº¦æ’æŸ¥</a></li>
<li>Androidå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Fperformance%2Fvitals%2Fanr" target="_blank" title="https://developer.android.com/topic/performance/vitals/anr" ref="nofollow noopener noreferrer">è¯Šæ–­å’Œä¿®å¤ANR</a></li>
<li>AOSPæºç ï¼š<code>frameworks/av/services/audioflinger/AudioFlinger.cpp</code></li>
<li>Binderæœºåˆ¶æ·±å…¥è§£æï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdocs%2Fcore%2Farchitecture%2Fhidl%2Fbinder-ipc" target="_blank" title="https://source.android.com/docs/core/architecture/hidl/binder-ipc" ref="nofollow noopener noreferrer">Android Binder IPCåŸç†</a></li>
</ul>
<hr/>
<p><strong>é‡åˆ°è¿‡ç±»ä¼¼çš„ANRé—®é¢˜å—ï¼Ÿä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒï¼</strong></p>
<p>å¦‚æœè§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿åˆ†äº«ç»™æ›´å¤šAndroidå¼€å‘è€…ã€‚æˆ‘ä»¬ä¸‹æœŸå†è§ï¼ğŸ‘‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡ŒQwenæ–°æ¨¡å‹å®æµ‹ï¼šå‘Šåˆ«PSï¼Ÿé™¤äº†å‡ ä½•é¢˜å®ƒå‡ ä¹ä»€ä¹ˆéƒ½ä¼š]]></title>    <link>https://juejin.cn/post/7588680081326456874</link>    <guid>https://juejin.cn/post/7588680081326456874</guid>    <pubDate>2025-12-28T10:30:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588680081326456874" data-draft-id="7588152122187726902" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡ŒQwenæ–°æ¨¡å‹å®æµ‹ï¼šå‘Šåˆ«PSï¼Ÿé™¤äº†å‡ ä½•é¢˜å®ƒå‡ ä¹ä»€ä¹ˆéƒ½ä¼š"/> <meta itemprop="keywords" content="AIGC,é˜¿é‡Œå·´å·´"/> <meta itemprop="datePublished" content="2025-12-28T10:30:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡ŒQwenæ–°æ¨¡å‹å®æµ‹ï¼šå‘Šåˆ«PSï¼Ÿé™¤äº†å‡ ä½•é¢˜å®ƒå‡ ä¹ä»€ä¹ˆéƒ½ä¼š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T10:30:57.000Z" title="Sun Dec 28 2025 10:30:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´çš„å¹´åº•ï¼Œå¼€æºç¤¾åŒºæ”¶åˆ°äº†ä¸€ä»½ç›¸å½“ç¡¬æ ¸çš„â€œåœ£è¯ç¤¼ç‰©â€ã€‚</p>
<p>å°±åœ¨12æœˆ25æ—¥ï¼Œé˜¿é‡Œå·´å·´Qwenå›¢é˜Ÿæ‚„æ— å£°æ¯åœ°ç”©å‡ºäº†ä»–ä»¬æœ€æ–°çš„å›¾åƒç¼–è¾‘æ¨¡å‹â€”â€”<strong>Qwen-Image-Edit-2511</strong>ã€‚å¦‚æœä½ è¿˜åœ¨ç”¨ä¸Šä¸€ä»£çš„2509ç‰ˆæœ¬ï¼Œæˆ–è€…æ­£è‹¦æ¼äºå¸‚é¢ä¸Šçš„AIä¿®å›¾æ€»æ˜¯â€œä¿®ç€ä¿®ç€äººå°±æ¢äº†å¼ è„¸â€ï¼Œé‚£ä¹ˆè¿™æ¬¡çš„æ›´æ–°å¯èƒ½ä¼šè®©ä½ çœ¼å‰ä¸€äº®ã€‚</p>
<p>è¿™ä¸æ˜¯ä¸€æ¬¡ç®€å•çš„ç‰ˆæœ¬å·ç”šè‡³ï¼Œè€Œæ˜¯ä¸€æ¬¡é’ˆå¯¹ç—›ç‚¹çš„ç²¾å‡†æ‰‹æœ¯ã€‚æˆ‘èŠ±äº†ä¸€æ•´å¤©æ—¶é—´åœ¨Hugging Faceå’Œæœ¬åœ°ç¯å¢ƒä¸Šå®æµ‹äº†è¿™ä¸ªæ¨¡å‹ï¼Œè¿™å°±æ¥å’Œå¤§å®¶èŠèŠï¼Œè¿™ä½â€œé˜¿é‡Œä¿®å›¾å¸ˆâ€åˆ°åº•è¿›åŒ–åˆ°äº†ä»€ä¹ˆç¨‹åº¦ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fdfsdgfdg-770x1024.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/dfsdgfdg-770x1024.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66d55fd82bee4c09837bdd1e210126e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767522657&amp;x-signature=MmLTd%2FA1zA8hSxolmcMG85kt0Xc%3D" alt="dfsdgfdg" loading="lazy"/></a></p>
<p><strong>ä¸ä»…æ˜¯ä¿®å›¾ï¼Œæ›´æ˜¯â€œä¿è„¸â€ç¥å™¨</strong></p>
<p>ç©è¿‡AIå›¾åƒç¼–è¾‘çš„æœ‹å‹éƒ½çŸ¥é“ä¸€ä¸ªè‘—åçš„é¬¼æ•…äº‹ï¼šä½ å¯ä»¥è®©AIæŠŠèƒŒæ™¯ä»å§å®¤æ¢æˆæ²™æ»©ï¼Œä½†å¾€å¾€åŒæ—¶ä¹ŸæŠŠç…§ç‰‡é‡Œçš„å¥³æœ‹å‹æ¢æˆäº†é™Œç”Ÿäººã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œå›¾åƒæ¼‚ç§»â€ã€‚</p>
<p>Qwen-Image-Edit-2511è¿™æ¬¡æœ€å¤§çš„å–ç‚¹ï¼Œå°±æ˜¯æ­»ç£•<strong>äººç‰©ä¸€è‡´æ€§</strong>ã€‚</p>
<p>åœ¨å®æµ‹ä¸­ï¼Œæˆ‘å°è¯•äº†ä¸€ç»„é«˜éš¾åº¦çš„æ“ä½œï¼šå¯¹ä¸€å¼ åŒäººæƒ…ä¾£åˆç…§è¿›è¡Œé£æ ¼è¿ç§»ï¼Œå¹¶è¦æ±‚æ”¹å˜å…‰å½±ã€‚ä»¤äººæƒŠå–œçš„æ˜¯ï¼Œ2511ç‰ˆæœ¬åƒæ˜¯ä¸€ä¸ªè€ç»ƒçš„ä¿®å›¾å¸ˆï¼Œå®ƒæ­»æ­»é”ä½äº†äººç‰©çš„é¢éƒ¨ç‰¹å¾ã€å‘å‹ç»†èŠ‚ç”šè‡³çœ¼ç¥ã€‚ä¸ç®¡æ˜¯å•äººè¿æ‹è¿˜æ˜¯å¤šäººå¤§åˆå½±ï¼Œå®ƒéƒ½èƒ½åœ¨ä¿®æ”¹ç¯å¢ƒã€å§¿æ€çš„åŒæ—¶ï¼Œç¡®ä¿â€œä½ è¿˜æ˜¯ä½ â€ã€‚å¯¹äºåšäººåƒå†™çœŸã€å•†ä¸šæ‘„å½±åæœŸçš„äººæ¥è¯´ï¼Œè¿™ç®€ç›´æ˜¯æ•‘å‘½çš„åŠŸèƒ½ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fdsfgdhfgj-883x1024.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/dsfgdhfgj-883x1024.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd834669cd0d48a48fa60172b2408c58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767522657&amp;x-signature=zD3%2BDYBYtPwSgtDmNMnJRS1cn8A%3D" alt="dsfgdhfgj" loading="lazy"/></a></p>
<p><strong>è‡ªå¸¦ç¥è£…ï¼šLoRAä¸å†éœ€è¦åˆ°å¤„æ‰¾</strong></p>
<p>ä»¥å‰æˆ‘ä»¬ä¸ºäº†å®ç°ç‰¹å®šçš„å…‰æ•ˆæˆ–æè´¨ï¼Œå¾€å¾€éœ€è¦å»Cç«™ä¸‹è½½å„ç§LoRAæŒ‚è½½ï¼Œè¿˜è¦è°ƒè¯•æƒé‡ï¼Œéº»çƒ¦å¾—è¦æ­»ã€‚</p>
<p>Qwenè¿™æ¬¡åšäº†ä¸€ä¸ªéå¸¸èªæ˜çš„å†³å®šï¼š<strong>å†…ç½®LoRA</strong>ã€‚</p>
<p>è¿™å°±åƒæ˜¯ä¹°ç›¸æœºç›´æ¥é€äº†å…¨å¥—æ»¤é•œå’Œé•œå¤´ã€‚æ¨¡å‹å†…éƒ¨é›†æˆäº†ä¸€äº›ç¤¾åŒºæœ€é«˜é¢‘ä½¿ç”¨çš„LoRAæ¨¡å—ã€‚ä½ å¯ä»¥ç›´æ¥é€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡ä»¤è°ƒç”¨â€œå…‰ç…§å¢å¼ºâ€ï¼Œè®©ä¸€å¼ å¹³å¹³æ— å¥‡çš„å®¤å†…ç…§ç‰‡æ‹¥æœ‰æŸ”å…‰æˆ–ä¾§å…‰çš„é«˜çº§è´¨æ„Ÿï¼›æˆ–è€…åœ¨å·¥ä¸šè®¾è®¡åœºæ™¯ä¸­ï¼Œä¸€é”®æŠŠæ¤…å­çš„æè´¨ä»å¡‘æ–™æ¢æˆèƒ¡æ¡ƒæœ¨ï¼Œè€Œç»“æ„çº¹ä¸ä¸åŠ¨ã€‚è¿™ç§â€œå¼€ç®±å³ç”¨â€çš„ä½“éªŒï¼Œæå¤§åœ°é™ä½äº†ä½¿ç”¨çš„é—¨æ§›ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fgdgsgfd.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/gdgsgfd.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5bc670c1ea342a99b9c785ddedf15a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767522657&amp;x-signature=PAwIYXXhG2daYcg6wN99QccRI1Q%3D" alt="gdgsgfd" loading="lazy"/></a></p>
<p><strong>æ–‡å­—æ¸²æŸ“ä¸â€œæ‡‚ä¸­æ–‡â€çš„ä¼˜åŠ¿</strong></p>
<p>ä½œä¸ºå›½äº§æ¨¡å‹ï¼ŒQwenåœ¨ä¸­æ–‡ç†è§£å’Œæ¸²æŸ“ä¸Šçš„ä¼˜åŠ¿æ˜¯å‹å€’æ€§çš„ã€‚</p>
<p>å¾ˆå¤šå›½å¤–æ¨¡å‹ç”Ÿæˆè‹±æ–‡Logoè¿˜è¡Œï¼Œä¸€é‡åˆ°æ±‰å­—å°±ä¹±ç ã€‚ä½†åœ¨2511çš„æµ‹è¯•ä¸­ï¼Œæˆ‘è®©å®ƒç”Ÿæˆä¸€å¼ å¸¦æœ‰â€œ2026æ–°å¹´å¿«ä¹â€å­—æ ·çš„æµ·æŠ¥ï¼Œå­—ä½“æ’ç‰ˆå’Œç¬”ç”»ç»“æ„éƒ½éå¸¸æ¸…æ™°ï¼Œç”šè‡³èƒ½æ ¹æ®ç”»é¢é£æ ¼è‡ªåŠ¨åŒ¹é…å­—ä½“è®¾è®¡ã€‚è¿™ä¸€å—ï¼ŒQwenç¡®å®èµ°åœ¨äº†å‰é¢ã€‚</p>
<p><strong>åˆ«é«˜å…´å¤ªæ—©ï¼Œå®ƒä¹Ÿæœ‰åç§‘çš„æ—¶å€™</strong></p>
<p>å¹å®Œäº†ä¼˜ç‚¹ï¼Œæˆ‘ä»¬å¾—èŠèŠå®ƒçš„çŸ­æ¿ã€‚è™½ç„¶å®ƒåœ¨æ„Ÿæ€§çš„è‰ºæœ¯åˆ›ä½œä¸Šè¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨ç†æ€§çš„â€œæ•°å­¦é¢˜â€ä¸Šï¼Œå®ƒè¿˜æ˜¯ä¸ªå·®ç”Ÿã€‚</p>
<p>é¦–å…ˆæ˜¯<strong>å‡ ä½•æ¨ç†</strong>ã€‚å®˜æ–¹å®£ä¼ ä¸­æåˆ°å®ƒå¢å¼ºäº†è¾…åŠ©çº¿ç”Ÿæˆèƒ½åŠ›ï¼Œä½†åœ¨å®æµ‹ä¸­ï¼Œå¦‚æœä½ è¦æ±‚å®ƒç”»å‡ºä¸¥æ ¼çš„å‚çº¿ã€åˆ‡çº¿æˆ–è€…å¤æ‚çš„å·¥ç¨‹åˆ¶å›¾ï¼Œå®ƒå¾€å¾€ä¼šâ€œèƒ¡ç¼–ä¹±é€ â€ã€‚å®ƒèƒ½ç†è§£è¾…åŠ©çº¿çš„æ¦‚å¿µï¼Œä½†åšä¸åˆ°CADçº§åˆ«çš„ç²¾å‡†ã€‚</p>
<p>å…¶æ¬¡æ˜¯<strong>ç©ºé—´æ§åˆ¶çš„ç²¾ç¡®åº¦</strong>ã€‚å¦‚æœä½ ä¸‹è¾¾æŒ‡ä»¤â€œå°†é•œå¤´å‘å·¦ç²¾ç¡®æ—‹è½¬60åº¦â€ï¼Œæ¨¡å‹å¯èƒ½ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚å®ƒèƒ½åšåˆ°â€œæ¢ä¸ªè§’åº¦çœ‹â€ï¼Œä½†åšä¸åˆ°â€œç²¾ç¡®æ—‹è½¬60åº¦â€ã€‚åœ¨ç²¾ç»†çš„ç©ºé—´æ„å›¾å’Œé€»è¾‘æ¨ç†ä¸Šï¼Œå®ƒè·ç¦»å®Œç¾çš„å·¥ä¸šçº§å·¥å…·è¿˜æœ‰ä¸€æ®µè·¯è¦èµ°ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fgferhgtrh.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/gferhgtrh.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91ece985d32c4952a2d18f11cdb4a292~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767522657&amp;x-signature=RT3GZOw8dmJf%2FxWyZaiLz2tZuzw%3D" alt="gferhgtrh" loading="lazy"/></a></p>
<p><strong>æ€»ç»“ï¼šå€¼å¾—ä¸‹è½½å—ï¼Ÿ</strong></p>
<p>å¦‚æœä¸è°ˆé‚£äº›æåº¦ä¾èµ–å‡ ä½•ç²¾åº¦çš„å·¥ä¸šåˆ¶å›¾åœºæ™¯ï¼Œ<strong>Qwen-Image-Edit-2511 æ˜¯ç›®å‰å¼€æºç•Œæœ€èƒ½æ‰“çš„å›¾åƒç¼–è¾‘æ¨¡å‹ä¹‹ä¸€</strong>ã€‚</p>
<p>å®ƒè§£å†³äº†æœ€æ ¸å¿ƒçš„â€œåƒä¸åƒâ€çš„é—®é¢˜ï¼ŒåˆæŠŠå…‰å½±å’Œæè´¨çš„æ§åˆ¶æƒäº¤å›äº†ç”¨æˆ·æ‰‹ä¸­ã€‚å¯¹äºæ‘„å½±å¸ˆã€ç”µå•†è®¾è®¡å¸ˆä»¥åŠåƒæˆ‘è¿™æ ·çš„å†…å®¹åˆ›ä½œè€…æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªèƒ½å¤§å¹…æå‡æ•ˆç‡çš„å…è´¹ç”Ÿäº§åŠ›å·¥å…·ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fdasfds.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/dasfds.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30822d24344c4ac8be765f84e91afa2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767522657&amp;x-signature=0ZkTu0PrfA%2Fk7LFqAHHDix%2Fvvp4%3D" alt="dasfds" loading="lazy"/></a></p>
<p>ç›®å‰æ¨¡å‹å·²ç»åœ¨Hugging Faceå’ŒModelScopeå¼€æºï¼Œä¹Ÿæœ‰ç°æˆçš„Demoå¯ä»¥ä½“éªŒã€‚å¦‚æœä½ æ‰‹å¤´æœ‰ä¸€å—è¿˜ä¸é”™çš„æ˜¾å¡ï¼Œæˆ–è€…ä¹ æƒ¯åœ¨äº‘ç«¯è·‘æ¨¡å‹ï¼Œå¼ºçƒˆå»ºè®®ä½ æŠŠ2509å‡çº§åˆ°2511ã€‚æ¯•ç«Ÿï¼Œèƒ½å¬æ‡‚äººè¯è¿˜èƒ½æŠŠäººä¿®å¾—å¥½çœ‹çš„AIï¼Œè°ä¸çˆ±å‘¢ï¼Ÿ</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»…ä¸¤å¥è¯ï¼Œå°±æ’¸äº†ä¸€ä¸ªæç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7588104741611536394</link>    <guid>https://juejin.cn/post/7588104741611536394</guid>    <pubDate>2025-12-28T09:07:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588104741611536394" data-draft-id="7588365276190687270" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»…ä¸¤å¥è¯ï¼Œå°±æ’¸äº†ä¸€ä¸ªæç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="Coze"/> <meta itemprop="datePublished" content="2025-12-28T09:07:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾é³´"/> <meta itemprop="url" content="https://juejin.cn/user/3683842894347076"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»…ä¸¤å¥è¯ï¼Œå°±æ’¸äº†ä¸€ä¸ªæç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3683842894347076/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾é³´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:07:50.000Z" title="Sun Dec 28 2025 09:07:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¾é³´ã€‚ä¸“æ³¨äºåˆ†äº«æå‡å·¥ä½œä¸ç”Ÿæ´»æ•ˆç‡çš„å·¥å…·ï¼Œæ— å¿åˆ†äº«AIé¢†åŸŸç›¸å…³çš„ç²¾é€‰æŠ¥å‘Šï¼ŒæŒç»­å…³æ³¨AIçš„å‰æ²¿åŠ¨å‘ã€‚</p>
<p>å‰é¢åˆ†äº«äº†ä¸€äº›â€œæ‰£å­ç¼–ç¨‹â€ç›¸å…³çš„ä»‹ç»æ–‡ç« â€”â€”ã€Š æ— ä»£ç æ—¶ä»£çœŸæ¥äº†ï¼Ÿæ‰£å­ï¼ˆCozeï¼‰ä¸€å¥è¯ç”Ÿæˆå·¥ä½œæµã€‹ï¼Œæœ‰æœ‹å‹å°±åå°ç§ä¿¡é—®èƒ½ä¸èƒ½å¤šä»‹ç»ä¸€äº›ä½¿ç”¨çš„æ¡ˆä¾‹ï¼Œä»¥ä¾¿å¯ä»¥æ›´å¥½çš„å­¦ä¹ æ€ä¹ˆæ ·å»ä½¿ç”¨å®ƒã€‚</p>
<p>æœ¬æ–‡æˆ‘å°†æŠŠä¹‹å‰åšè¿‡çš„ä¸€ä¸ªæ‰‹æ’¸çš„æç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“ï¼Œçœ‹çœ‹æ€ä¹ˆæ ·ä½¿ç”¨æ‰£å­ç¼–ç¨‹å°†è¿™ä¸ªæ¡ˆä¾‹å®ç°å‡ºæ¥ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè®©DeepSeekå¸®æˆ‘ä»¬åšéœ€æ±‚åˆ†æï¼Œæè¿°æ¸…æ¥šæç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“çš„åŠŸèƒ½ã€ç›®æ ‡ç”¨æˆ·ä»¥åŠä½ çš„æƒ³æ³•ï¼Œè®©DeepSeekå¸®ä½ ç”Ÿæˆä¸€ä»½éœ€æ±‚æ–‡æ¡£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6473e7c9b224e9a84f6bb246212355e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767517670&amp;x-signature=mHVMehXteK2BfaMg4MT8ptblKhY%3D" alt="" loading="lazy"/></p>
<ul>
<li>æç¤ºè¯</li>
</ul>

<pre><code class="hljs">ä½ éœ€è¦åŒ–èº«ä¸ºä¸€ä¸ªèµ„æ·±çš„éœ€æ±‚åˆ†æå¸ˆï¼Œæˆ‘æƒ³åˆ¶ä½œä¸€ä¸ªæç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“ï¼Œè¿™ä¸ªæ™ºèƒ½ä½“çš„ç›®æ ‡ç”¨æˆ·æ˜¯ä¸æ‡‚æç¤ºè¯çš„ç»“æ„ï¼Œéœ€è¦æ·±å…¥çš„ç†è§£ç”¨æˆ·çš„è¯‰æ±‚ï¼Œç„¶åå°†è¯‰æ±‚å˜æˆä¸€ä¸ªä¸“ä¸šçš„æç¤ºè¯ï¼Œæç¤ºè¯å¯ä»¥ç›´æ¥æä¾›ç»™å¤§æ¨¡å‹ï¼Œæ— éœ€å†ä¿®æ”¹ï¼Œéº»çƒ¦ä½ å¸®æˆ‘æ‹†è§£ä¸€ä¸‹æˆ‘çš„è¿™ä¸ªæç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“çš„éœ€æ±‚ï¼Œè¾“å‡ºæˆmarkdownæ ¼å¼ã€‚
</code></pre>
<p>DeepSeekç»™ç”Ÿæˆçš„éœ€æ±‚æ–‡æ¡£æ˜¯éå¸¸è¯¦ç»†çš„ï¼ŒåŒ…å«äº†äº§å“çš„æ„¿æ™¯ã€æ ¸å¿ƒçš„ä»·å€¼ä¸»å¼ ã€ä¸»è¦çš„ç”¨æˆ·ç”»åƒã€ç”¨æˆ·éœ€æ±‚å±‚æ¬¡ã€ä¸»è¦çš„åŠŸèƒ½æ¨¡å—ç­‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80dffe93ab1d4c3aae25a1709f97d433~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767517670&amp;x-signature=iKk1v%2FV3b8TLCweEGIYXg8tIJ8A%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e4395c98989476e992a4f59911fa907~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767517670&amp;x-signature=%2FFaJtpuExXJg4UyStV3Ies8SIuQ%3D" alt="" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬çœ‹çœ‹DeepSeekç»™ç”Ÿæˆçš„è¿™ä»½éœ€æ±‚æ–‡æ¡£æ˜¯å¦åˆç†ï¼Œæœ‰æ²¡æœ‰éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ï¼Œæœ‰çš„è¯ä¿®æ”¹ï¼Œæ²¡æœ‰çš„è¯å°±ç›´æ¥æŠŠè¿™ä»½éœ€æ±‚æ–‡æ¡£çš„markdownæ ¼å¼ç»™æ‹·è´ä¸‹æ¥ã€‚</p>
<p>å–åˆ°æ‰£å­ç¼–ç¨‹é¡µé¢ï¼Œé€‰æ‹©â€œæ™ºèƒ½ä½“â€ï¼Œç„¶åå°†éœ€æ±‚æ–‡æ¡£è´´ç»™æ‰£å­ç¼–ç¨‹æ™ºèƒ½ä½“ï¼Œç„¶åå®ƒå°±ä¼šå¼€å§‹æ€è€ƒåˆ†æï¼Œå¹¶ä¸”å°†æ­¥éª¤è¿›è¡Œå®ç°æ­¥éª¤è¿›è¡Œæ‹†è§£ï¼Œæ²¡ä¸€ä¼šå„¿åŠŸå¤«ï¼Œæç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“å°±å¥½äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f1bcb5c34cf42b4be90450fa4b2c2bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767517670&amp;x-signature=8t93yvYsPHErDaTUMbm4WQGxsjY%3D" alt="" loading="lazy"/></p>
<p>ä¸‹æ–¹æ˜¯æç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“ï¼Œæ ¹æ®æˆ‘çš„éœ€æ±‚ç»™æˆ‘ç”Ÿæˆçš„æç¤ºè¯ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-strong">**æ ¸å¿ƒä¸»é¢˜ï¼š**</span> æ‰‹ç»˜é£æ ¼çš„è‹¹æœ

<span class="hljs-strong">**é£æ ¼è¦æ±‚ï¼š**</span>
<span class="hljs-bullet">-</span> æ‰‹ç»˜é£æ ¼ï¼Œæœ‰æ˜æ˜¾çš„ç¬”è§¦ç—•è¿¹å’Œçº¿æ¡æ„Ÿ
<span class="hljs-bullet">-</span> è‰²å½©ä½¿ç”¨å°å­¦ç”Ÿå½©è‰²ç”»ç¬”é£æ ¼ï¼Œè‰²å½©é²œè‰³ä½†ç•¥æ˜¾ä¸å‡åŒ€
<span class="hljs-bullet">-</span> çº¿æ¡å¯ä»¥ç•¥æ˜¾ç¨šå«©ã€ä¸å®Œç¾ï¼Œä½“ç°æ‰‹ç»˜çš„çœŸå®æ„Ÿ
<span class="hljs-bullet">-</span> æ•´ä½“æ„Ÿè§‰å¤©çœŸã€ç«¥è¶£ã€å……æ»¡æ´»åŠ›

<span class="hljs-strong">**æŠ€æœ¯è¦æ±‚ï¼š**</span>
<span class="hljs-bullet">-</span> å°ºå¯¸æ¯”ä¾‹ï¼š16:9
<span class="hljs-bullet">-</span> æ ¼å¼ï¼šJPG
<span class="hljs-bullet">-</span> åˆ†è¾¨ç‡ï¼šé«˜æ¸…
<span class="hljs-bullet">-</span> å…‰çº¿ï¼šæ˜äº®è‡ªç„¶ï¼Œæœ‰è½»å¾®é˜´å½±å¢åŠ ç«‹ä½“æ„Ÿ

<span class="hljs-strong">**æ„å›¾å»ºè®®ï¼š**</span>
<span class="hljs-bullet">-</span> è‹¹æœä½äºç”»é¢ä¸­å¿ƒæˆ–åä¸Šä½ç½®
<span class="hljs-bullet">-</span> èƒŒæ™¯ç®€æ´ï¼Œå¯è€ƒè™‘æ·¡è‰²èƒŒæ™¯æˆ–ç®€å•çš„çº¹ç†
<span class="hljs-bullet">-</span> å¯ä»¥æ·»åŠ ä¸€äº›ç®€å•çš„è£…é¥°å…ƒç´ ï¼Œå¦‚å¶å­æˆ–æœæŸ„

<span class="hljs-strong">**è´Ÿé¢æç¤ºè¯ï¼š**</span>
<span class="hljs-bullet">-</span> é¿å…å…‰æ»‘ã€å®Œç¾çš„æ•°å­—æ¸²æŸ“æ•ˆæœ
<span class="hljs-bullet">-</span> é¿å…è¿‡äºå†™å®æˆ–ç…§ç‰‡é£æ ¼
<span class="hljs-bullet">-</span> é¿å…å¤æ‚çš„èƒŒæ™¯æˆ–è¿‡å¤šå…ƒç´ 
<span class="hljs-bullet">-</span> é¿å…è‰²å½©è¿‡äºç°æš—æˆ–ä¸è‡ªç„¶
<span class="hljs-bullet">-</span> é¿å…çº¿æ¡è¿‡äºè§„æ•´æˆ–æœºæ¢°åŒ–
</code></pre>
<p>ç„¶åæˆ‘æŠŠè¿™ä¸ªæç¤ºè¯ï¼Œåœ¨è±†åŒ…ä¸Šæµ‹è¯•äº†ä¸€ä¸‹ç”Ÿå›¾çš„æ•ˆæœï¼Œç”Ÿæˆçš„å›¾ç‰‡çœ‹ç€è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c0079727f19469689e79e59e65291fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767517670&amp;x-signature=4ZVE9D1cV0UIbIO2ib2tpv1Z%2F4o%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªæç¤ºè¯å¤§å¸ˆæ™ºèƒ½ä½“ä»…èŠ±äº†5åˆ†é’Ÿçš„æ—¶é—´å°±åˆ›ä½œå‡ºæ¥äº†ï¼Œè€Œä¹‹å‰æ‰‹æ’¸çš„æç¤ºè¯å¤§å¸ˆèŠ±äº†å°†è¿‘30åˆ†é’Ÿï¼Œä¸å¾—ä¸è¯´æ‰£å­ç¼–ç¨‹å¯ä»¥å¤§å¤§çš„æç¤ºå‡æˆ‘ä»¬çš„åˆ¶ä½œæ•ˆç‡ã€‚</p>
<p>å¯¹äºæ²¡æœ‰æŠ€æœ¯èƒŒæ™¯çš„æœ‹å‹ï¼Œè¿™éœ€è¦å’ŒAIèŠå¤©çš„æ–¹å¼ä¾¿å¯ä»¥å®ç°æ™ºèƒ½ä½“å’Œå·¥ä½œæµï¼Œç®€ç›´æ˜¯å¤ªå¼ºå¤§äº†ã€‚</p>
<p>è™½ç„¶ç°åœ¨å¯¹äºå¤æ‚åœºæ™¯æ”¯æŒè¿˜ä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œä½†æ˜¯ï¼Œç›¸ä¿¡éšç€ç‰ˆæœ¬çš„è¿­ä»£ï¼Œè¿™å—çš„æ”¯æŒè‚¯å®šä¼šè¶Šæ¥è¶Šå¥½ã€‚</p>
<p>æœ¬æ–‡çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œå¦‚æœæ‚¨è§‰å¾—æœ‰æ”¶è·çš„è¯ï¼Œå¯ä»¥ç»™ä¸ªä¸€é”®ä¸‰è¿ï¼Œæ‚¨çš„é¼“åŠ±æ˜¯å¾é³´æŒç»­è¾“å‡ºçš„æœ€å¤§åŠ¨åŠ›ã€‚æœ‰ä»€ä¹ˆç–‘é—®ä¹Ÿå¯ä»¥æ‰“åœ¨è¯„è®ºåŒºï¼Œå¾é³´ä¼šç¬¬ä¸€æ—¶é—´å›å¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7c016a89bbc4c36990bf084904e38d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767517670&amp;x-signature=QzBU0ac6zisE%2Ff%2BhpB54Pj7gZm0%3D" alt="" loading="lazy"/></p>
<p>æœ€è¿‘å®æˆ˜äº†ä¸€äº›æ‰£å­ï¼ˆCozeï¼‰å·¥ä½œæµç›¸å…³çš„æ¡ˆä¾‹ï¼ŒåŒ…å«å°çº¢è–¯å›¾æ–‡ç”Ÿæˆã€çˆ†æ¬¾è§†é¢‘å‰ªè¾‘ã€åŠå…¬ææ•ˆç­‰æ‰£å­æ¡ˆä¾‹ï¼Œå†…é™„è¯¦ç»†çš„æ•™ç¨‹å’Œå·¥ä½œæµå®‰è£…åŒ…ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥æ¥ä¸ª<strong>ä¸€é”®ä¸‰è¿ï¼ˆå¿…é¡»åŠ¨ä½œï¼‰</strong> ï¼Œæ–‡ç« è¯„è®ºåŒºè¯„è®ºâ€œ<strong>æ‰£å­æ¡ˆä¾‹</strong>â€é¢†å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚æœè®©æˆ‘ç«™åœ¨ç§‘æŠ€ä»ä¸šè€…çš„è§’åº¦å»å›çœ‹ 2025 å¹´ï¼Œè®©æˆ‘é€‰ä¸€ä¸ªè¯å‡ºæ¥å½¢å®¹å®ƒï¼Œæˆ‘ä¼šé€‰æ‹©â€œvibe codingâ€è¿™ä¸ªè¯ã€‚]]></title>    <link>https://juejin.cn/post/7587997157237915700</link>    <guid>https://juejin.cn/post/7587997157237915700</guid>    <pubDate>2025-12-27T06:10:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997157237915700" data-draft-id="7587997157237899316" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚æœè®©æˆ‘ç«™åœ¨ç§‘æŠ€ä»ä¸šè€…çš„è§’åº¦å»å›çœ‹ 2025 å¹´ï¼Œè®©æˆ‘é€‰ä¸€ä¸ªè¯å‡ºæ¥å½¢å®¹å®ƒï¼Œæˆ‘ä¼šé€‰æ‹©â€œvibe codingâ€è¿™ä¸ªè¯ã€‚"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-27T06:10:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="whyæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3702810893364350"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚æœè®©æˆ‘ç«™åœ¨ç§‘æŠ€ä»ä¸šè€…çš„è§’åº¦å»å›çœ‹ 2025 å¹´ï¼Œè®©æˆ‘é€‰ä¸€ä¸ªè¯å‡ºæ¥å½¢å®¹å®ƒï¼Œæˆ‘ä¼šé€‰æ‹©â€œvibe codingâ€è¿™ä¸ªè¯ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3702810893364350/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    whyæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T06:10:09.000Z" title="Sat Dec 27 2025 06:10:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœè®©æˆ‘ç«™åœ¨ç§‘æŠ€ä»ä¸šè€…çš„è§’åº¦å»å›çœ‹ 2025 å¹´ï¼Œè®©æˆ‘é€‰ä¸€ä¸ªè¯å‡ºæ¥å½¢å®¹å®ƒï¼Œæˆ‘ä¼šé€‰æ‹©â€œvibe codingâ€è¿™ä¸ªè¯ã€‚</p>
<p>ChatGPT ä½œä¸º AI çš„ç¬¬ä¸€æ³¢æµªæ½®æ¥ä¸´çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä½œä¸ºç§‘æŠ€ä»ä¸šè€…ï¼Œéƒ½æ¸…æ¥šçš„çŸ¥é“è¿™æ³¢æµªæ½®ä¼šå†²å‡»åˆ°æˆ‘ä»¬ä¸­çš„å¤§å¤šæ•°ã€‚</p>
<p>å¯¹æˆ‘æ¥è¯´ï¼Œåœ¨ 2025 å¹´ï¼Œè¿™æ³¢æµªæ½®çš„åç§°å°±å« vibe codingã€‚å…¶å®ä½ ä»”ç»†æƒ³æƒ³ï¼ŒAI å†™å‡ºçš„ä»£ç èƒ½ç”¨ï¼Œè¿™ä»¶äº‹çˆ†å‘æ€§çš„å‘å±•ï¼Œä¹Ÿå°±æ˜¯ä»Šå¹´è¿™ä¸€å¹´å‘ç”Ÿçš„äº‹å„¿ï¼Œç”šè‡³æ˜¯ä¸‹åŠå¹´çš„äº‹æƒ…ã€‚å„ç§å„æ ·çš„ AI ç¼–ç å·¥å…·å¦‚é›¨åæ˜¥ç¬‹èˆ¬çš„å†’å‡ºæ¥å¤´æ¥ï¼Œä¸€ä¸ªæ¯”ä¸€ä¸ªå¥½ç”¨ã€‚</p>
<p>å†²å‡»åˆ°æˆ‘çš„ä¸€ä¸ªå…·ä½“è¡¨ç°ä¹‹ä¸€å°±æ˜¯ä»Šå¹´æˆ‘å†™æ–‡ç« çš„é¢‘ç‡çœŸçš„æ²¡æœ‰å‰å‡ å¹´è¿™ä¹ˆé«˜äº†ã€‚</p>
<p>åŒæ ·çš„ä¸€ä¸ªé—®é¢˜ï¼Œä½ å»é—® AIï¼Œå®ƒåªç”¨å‡ åç§’ï¼Œå°±èƒ½å¾—åˆ°æˆ‘èŠ±äº†å¤§é‡ç²¾åŠ›æ‰å­¦ä¼šï¼Œå¹¶èæ±‡è´¯é€šçš„ä¸œè¥¿ã€‚</p>
<p>ä½ åªéœ€è¦ç”¨è‡ªç„¶è¯­è¨€æŠŠéœ€æ±‚æè¿°æ¸…æ¥šï¼Œå†ç¨åŠ å¼•å¯¼ï¼Œå®ƒå°±èƒ½åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…ç›´æ¥ç»™ä½ ç”Ÿæˆå·¥ç¨‹çº§åˆ«çš„ä»£ç ï¼Œæ°´å¹³èƒ½å’Œä¸€ä¸ªä¸­çº§ç¨‹åºå‘˜å¯¹æ ‡ã€‚</p>
<p>è½»è€Œæ˜“ä¸¾å°±èƒ½è·å¾—æˆ‘å‘•å¿ƒæ²¥è¡€æ‰å­¦ä¼šçš„ä¸œè¥¿ã€‚æ‰€ä»¥æˆ‘æ˜¯çœŸçš„æ„Ÿåˆ°ææƒ§ï¼Œææƒ§åˆ°æˆ‘å¼€å§‹æŠ—æ‹’ã€‚</p>
<p>ä»¥å‰ï¼Œæˆ‘æƒ³èµ·ä¸€ä¸ªæœ‰æ„æ€çš„æŠ€æœ¯è¯é¢˜å°±ä¼šå»ä¸€è¾¹ç ”ç©¶ä¸€è¾¹å†™ï¼Œæœ€åæŠŠå®ƒå†™å‡ºæ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ˆæœ‰æ„æ€çš„ã€‚</p>
<p>ç°åœ¨ï¼Œå½“æˆ‘ç ”ç©¶äº†ä¸€ç‚¹ï¼Œç„¶ååœ¨æŠŠå®ƒå†™å‡ºæ¥çš„ï¼Œæˆ‘å°±ä¼šè§‰å¾—ï¼Œæ²¡æ„æ€ã€‚</p>
<p>å•çº¯å°±æ˜¯è§‰å¾—æ²¡æ„æ€ï¼Œå› ä¸ºæˆ‘å†™çš„è¿™äº›ä¸œè¥¿ï¼Œå»é—® AI éƒ½çŸ¥é“ã€‚</p>
<p>æˆ‘æŠŠå®ƒå†™å‡ºæ¥å¯èƒ½è¦ç”¨ä¸€å‘¨æ—¶é—´ï¼Œä½†æ˜¯å»é—® AIï¼Œå®ƒå‡ åˆ†é’Ÿå°±èƒ½ç»™ä½ ä¸€å¤§æ®µå†…å®¹ï¼Œå¹¶è¯´å¾—å¤´å¤´æ˜¯é“ï¼Œæ¯”æˆ‘åˆ†ææ›´åŠ å…¨é¢ï¼Œæ›´åŠ æœ‰ç»†èŠ‚ï¼Œé‡åˆ°ä¸æ˜ç™½çš„åœ°æ–¹ï¼Œä½ è¿˜å¯ä»¥ä¸æ–­çš„å»è¿½é—®å®ƒã€‚</p>
<p>æˆ‘æ‰¾ä¸åˆ°æˆ‘å†™å‡ºæ¥çš„æ–‡ç« çš„ä»·å€¼åœ¨å“ªé‡Œã€‚</p>
<p>ä»¥å‰ä¼šæœ‰è¯»è€…ç»™æˆ‘åé¦ˆä¸€äº›ä»–ä»¬é‡åˆ°çš„æŠ€æœ¯é—®é¢˜ï¼Œè€Œæˆ‘æ°å¥½åˆæœ‰æ—¶é—´ï¼Œæˆ‘å°±ä¼šç»™è¯»è€…é‡èº«å®šåšä¸€ç¯‡ç­”ç–‘ï¼Œç”šè‡³æ²¡æœ‰æ—¶é—´çš„æ—¶å€™æˆ‘ä¼šå…ˆåŠ å…¥ç´ æåº“ã€‚</p>
<p>ç°åœ¨ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æ¥é—®æˆ‘ï¼Ÿ</p>
<p>å³ä½¿æœ‰äººæ¥é—®æˆ‘ï¼Œæˆ‘éƒ½ä¼šå«ä»–å…ˆå»é—® AIã€‚</p>
<p>åœ¨å½“ä¸‹ AI å·²ç»è¿›åŒ–åˆ°â€œvibe codingâ€é˜¶æ®µäº†ï¼Œæˆ‘ä½œä¸ºä¸€ä¸ªæŠ€æœ¯åšä¸»ï¼Œå†å»å†™ä¸€äº›å¸¸è§„æ€§çš„æŠ€æœ¯ç±»æ–‡ç« çš„æ—¶å€™ï¼Œæˆ‘æ›´åŠ æ‰¾ä¸åˆ°ä»·å€¼åœ¨å“ªé‡Œã€‚æˆ‘ä¹Ÿå°è¯•è¿‡åœ¨æ‰¾ä¸åˆ°ä»·å€¼çš„æ—¶å€™ï¼Œå°±ç¡¬å†™ï¼Œä½†æ˜¯å†™çš„å¿ƒå¢ƒå˜äº†ï¼Œå†™å‡ºæ¥çš„ä¸œè¥¿æˆ‘è‡ªå·±éƒ½è§‰å¾—æ˜¯åƒåœ¾ã€‚</p>
<p>æƒ³æç¬”ï¼Œä½†æ˜¯å››é¡¾èŒ«ç„¶ï¼Œæœ€ç»ˆè½å¾—ä¸€ä¸ªé“å¿ƒç ´ç¢çš„ä¸‹åœºã€‚æ‰€ä»¥ï¼Œæˆ‘ä¹‹å‰æœ‰ä¸€æ®µæ—¶é—´æ˜¯å¹²è„†å°±ä¸å†™äº†ã€‚</p>
<p>åé¢æˆ‘è§‰å¾—æˆ‘è¿˜æ˜¯æƒ³è¦å†™ä¸€ç‚¹ä¸œè¥¿çš„ï¼Œå°±è½¬è€Œé¢å‘äº†ä¸€äº› AI å·¥å…·çš„ä½¿ç”¨ï¼Œæˆ–è€…å›´ç»• AI äº§ç”Ÿçš„ä¸€äº›æ€è€ƒã€‚è™½ç„¶æ²¡æœ‰ä¹‹å‰å†™æŠ€æœ¯æ–‡ç« æ—¶çš„å†²åŠ²äº†ï¼Œä½†æ˜¯è‡³å°‘è¿™æ˜¯æˆ‘çœŸçš„æƒ³è¦å†™çš„ä¸œè¥¿ï¼Œè€Œä¸æ˜¯ç¡¬æ†‹å‡ºæ¥çš„åƒåœ¾ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯æˆ‘æ‹¥æŠ± AI çš„ä¸€ç§æ–¹å¼ã€‚</p>
<p>vibe coding è¿™ä¸€æ³¢æµªæ½®åªæ˜¯å†²å‡»åˆ°äº†æˆ‘ï¼Œä½†è¿˜å†²ä¸å€’æˆ‘ã€‚</p>
<p>çŠ¹è®°å¾— 2022 å¹´æœ« ChatGPT æ¨ªç©ºå‡ºä¸–çš„æ—¶å€™ï¼Œæˆ‘å†™è¿‡ä¸€ç¯‡è¹­çƒ­åº¦çš„æ–‡ç« ï¼Œå½“æ—¶å–æ ‡é¢˜ä¸ºäº†éª—ç‚¹å‡»ç‡ï¼Œå°±æ•…æ„å†™çš„â€œå±è¨€è€¸å¬â€ä¸€ç‚¹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2de3b8e4ce27446d86657c9fa75c2092~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd2h55oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767420609&amp;x-signature=%2B5JDCXcqprnmnW%2BbE8YdgebuHks%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨å›å¤´å»çœ‹â€œç«¯å¥½é¥­ç¢—ï¼Œè°¨é˜²AIâ€ä¸€ç‚¹ä¹Ÿä¸ç®—å±è¨€è€¸å¬ï¼Œåè€Œæ˜¯ä¸€ç§â€œé¢„è¨€â€ã€‚</p>
<p>æˆ‘çŸ¥é“ï¼Œä» 2022 å¹´çš„ chatGPT åˆ° 2025 å¹´çš„ vibe codingï¼Œè¿™åªæ˜¯åˆä¸€æ³¢æµªæ½®è€Œå·²ã€‚åé¢ç´§è·Ÿç€è¿˜æœ‰ä¸çŸ¥é“å¤šå°‘æ³¢æ›´çŒ›çš„ã€‚</p>
<p>åé¢çš„ï¼Œä¸çŸ¥é“æˆ‘é¡¶ä¸é¡¶å¾—ä½ã€‚</p>
<p>é¡¶å¾—ä½ï¼Œä¸‡äº‹å¤§å‰ã€‚</p>
<p>é¡¶ä¸ä½ï¼Œæˆ‘ä¹Ÿå·²ç»æƒ³å¥½äº†å€’ä¸‹æ—¶çœ‹èµ·æ¥æ¯”è¾ƒæ‚²å£®çš„å°è¯ï¼š</p>
<p>æˆ‘æ˜¯æ—§æ—¶ä»£çš„æ®‹å…šï¼Œæ–°æ—¶ä»£æ²¡æœ‰èƒ½è½½æˆ‘çš„èˆ¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobFlowï¼šæ—¶é—´è½®ä¸æ»‘åŠ¨çª—å£çš„å®æˆ˜ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7588098335791284224</link>    <guid>https://juejin.cn/post/7588098335791284224</guid>    <pubDate>2025-12-28T09:26:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335791284224" data-draft-id="7588092534162882560" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobFlowï¼šæ—¶é—´è½®ä¸æ»‘åŠ¨çª—å£çš„å®æˆ˜ä¼˜åŒ–"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-28T09:26:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobFlowï¼šæ—¶é—´è½®ä¸æ»‘åŠ¨çª—å£çš„å®æˆ˜ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:26:34.000Z" title="Sun Dec 28 2025 09:26:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€æºåœ°å€ä¸ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><strong>å¼€æºåœ°å€</strong>ï¼š<code>https://gitee.com/sh_wangwanbao/job-flow</code></li>
<li><strong>ç³»åˆ—æ–‡ç« ï¼š</strong>
<ul>
<li><a href="https://juejin.cn/post/7583469866007969827" target="_blank" title="https://juejin.cn/post/7583469866007969827">ç¬¬ä¸€ç¯‡ï¼šåŸºäºNacosçš„è½»é‡ä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆ â€”â€” ä» XXL-Job çš„ç—›ç‚¹è¯´èµ·</a></li>
<li><a href="https://juejin.cn/post/7584353612501106729" target="_blank" title="https://juejin.cn/post/7584353612501106729">ç¬¬äºŒç¯‡ï¼šJobFlow å®ç°æ–¹æ¡ˆï¼šäº‘åŸç”Ÿæ—¶ä»£çš„ä»»åŠ¡è°ƒåº¦æ–°æ€è·¯</a></li>
<li><a href="https://juejin.cn/post/7585727457472823296" target="_blank" title="https://juejin.cn/post/7585727457472823296">ç¬¬ä¸‰ç¯‡ï¼šJobFlow å®æˆ˜ï¼šæ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšåˆ°çš„</a></li>
<li><a href="https://juejin.cn/post/7585751355593506835" target="_blank" title="https://juejin.cn/post/7585751355593506835">ç¬¬å››ç¯‡ï¼šJobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´</a></li>
<li><a href="https://juejin.cn/post/7588028859541307418" target="_blank" title="https://juejin.cn/post/7588028859541307418">ç¬¬äº”ç¯‡ï¼šJobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ</a></li>
<li><a href="https://juejin.cn/spost/7588067055481634825" target="_blank" title="https://juejin.cn/spost/7588067055481634825">ç¬¬å…­ç¯‡ï¼šJobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨</a></li>
<li><a href="https://juejin.cn/spost/7588095884070682624" target="_blank" title="https://juejin.cn/spost/7588095884070682624">ç¬¬ä¸ƒç¯‡ï¼šJobFlow çš„å»¶æ—¶è°ƒåº¦ï¼šå¦‚ä½•å¯é åœ°å¤„ç†â€œ30åˆ†é’Ÿåå–æ¶ˆè®¢å•â€</a></li>
<li><a href="https://juejin.cn/spost/7588098335791284224" target="_blank" title="https://juejin.cn/spost/7588098335791284224">ç¬¬å…«ç¯‡ï¼šJobFlowï¼šæ—¶é—´è½®ä¸æ»‘åŠ¨çª—å£çš„å®æˆ˜ä¼˜åŒ–</a></li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">å‰è¨€</h2>
<p>å»¶æ—¶è°ƒåº¦ä¸Šçº¿åï¼Œæˆ‘ä»¬å‘ç°äº†å‡ ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·æœŸæœ›ï¼šè®¢å•30åˆ†é’Ÿåè‡ªåŠ¨å–æ¶ˆ
å®é™…æ‰§è¡Œï¼š30åˆ†01ç§’ åˆ° 30åˆ†05ç§’ä¹‹é—´
è¯¯å·®ï¼šæœ€å¤š5ç§’

æ•°æ®åº“å‹åŠ›ï¼šæ¯5ç§’æ‰«æä¸€æ¬¡
æ—¥å¿—å†™å…¥ï¼šæ¯ä¸ªä»»åŠ¡ç«‹å³å†™å…¥
</code></pre>
<p>å¯¹äºç§’æ€ã€é™æ—¶ä¼˜æƒ è¿™ç§åœºæ™¯ï¼Œ5ç§’çš„å»¶è¿Ÿæ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²æˆ‘ä»¬æ˜¯æ€ä¹ˆä¼˜åŒ–çš„ï¼šç”¨æ—¶é—´è½®æŠŠå»¶è¿Ÿé™åˆ°1ç§’ä»¥å†…ï¼Œç”¨æ»‘åŠ¨çª—å£æŠŠæ•°æ®åº“å‹åŠ›é™ä½95%ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€é—®é¢˜åœ¨å“ª</h2>
<p>å…ˆçœ‹çœ‹åŸæ¥çš„æ–¹æ¡ˆæœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p>
<h3 data-id="heading-3">å®šæ—¶æ‰«æçš„å»¶è¿Ÿ</h3>
<p>åŸæ¥çš„é€»è¾‘ï¼šæ¯5ç§’æ‰«æä¸€æ¬¡æ•°æ®åº“</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä»»åŠ¡åˆ›å»º&lt;br/&gt;10:00:00] --&gt; B[å†™å…¥æ•°æ®åº“&lt;br/&gt;executeTime=10:00:30]
    B --&gt; C[ç­‰å¾…æ‰«æ&lt;br/&gt;0-5ç§’]
    C --&gt; D[ä¸‹æ¬¡æ‰«æ&lt;br/&gt;10:00:05]
    D --&gt; E[å‘ç°åˆ°æœŸ&lt;br/&gt;å¼€å§‹æ‰§è¡Œ]
    
    style A fill:#87CEEB
    style B fill:#87CEEB
    style C fill:#FFB6C1
    style D fill:#FFE4B5
    style E fill:#90EE90
</code></pre>
<p>é—®é¢˜ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">ä»»åŠ¡æœŸæœ› 10:00:30 æ‰§è¡Œ
æ‰«æé—´éš” 5ç§’

å¯èƒ½åœ¨ä»¥ä¸‹æ—¶é—´è¢«æ‰«æåˆ°ï¼š
<span class="hljs-deletion">- 10:00:30ï¼ˆåˆšå¥½ç¢°ä¸Šï¼‰ â†’ å»¶è¿Ÿ0ç§’</span>
<span class="hljs-deletion">- 10:00:35ï¼ˆä¸‹ä¸€æ¬¡ï¼‰ â†’ å»¶è¿Ÿ5ç§’</span>

å¹³å‡å»¶è¿Ÿï¼š2.5ç§’
æœ€å¤§å»¶è¿Ÿï¼š5ç§’
</code></pre>
<p><strong>ç”¨æˆ·æ„ŸçŸ¥ï¼š</strong></p>
<pre><code class="hljs">æäº¤å»¶æ—¶ä»»åŠ¡ â†’ APIè¿”å›æˆåŠŸï¼ˆ200msï¼‰
â†’ ä½†è¦ç­‰2-5ç§’æ‰çœŸæ­£æ‰§è¡Œ
â†’ ç”¨æˆ·ä¼šè§‰å¾—ï¼šæ€ä¹ˆè¿˜æ²¡ç”Ÿæ•ˆï¼Ÿ
</code></pre>
<h3 data-id="heading-4">æ•°æ®åº“å‹åŠ›å¤§</h3>
<p>æ¯5ç§’ä¸€æ¬¡æ‰«æï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è°ƒåº¦å™¨&lt;br/&gt;æ¯5ç§’] --&gt; B[æ‰«ææ•°æ®åº“&lt;br/&gt;WHEREåˆ°æœŸ]
    B --&gt; C[è¿”å›ç»“æœ&lt;br/&gt;å¯èƒ½ä¸ºç©º]
    C --&gt; D[æ›´æ–°çŠ¶æ€&lt;br/&gt;PENDING to SENDING]
    
    A --&gt; E[å†™å…¥æ—¥å¿—&lt;br/&gt;æ¯ä¸ªä»»åŠ¡]
    
    style A fill:#87CEEB
    style B fill:#FFB6C1
    style D fill:#FFB6C1
    style E fill:#FFB6C1
</code></pre>
<p>é—®é¢˜ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">æ‰«æé¢‘ç‡ï¼š
<span class="hljs-deletion">- æ¯5ç§’1æ¬¡ = 12æ¬¡/åˆ†é’Ÿ = 720æ¬¡/å°æ—¶</span>

æ—¥å¿—å†™å…¥ï¼š
<span class="hljs-deletion">- æ¯ä¸ªä»»åŠ¡ç«‹å³å†™å…¥</span>
<span class="hljs-deletion">- 1000ä¸ªä»»åŠ¡ = 1000æ¬¡IO</span>

é«˜å³°æœŸï¼š
<span class="hljs-deletion">- æ•°æ®åº“è¿æ¥æ± è€—å°½</span>
<span class="hljs-deletion">- æ…¢æŸ¥è¯¢å¢å¤š</span>
<span class="hljs-deletion">- ä¸»ä»å»¶è¿Ÿå˜å¤§</span>
</code></pre>
<h3 data-id="heading-5">ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜</h3>
<p>æ€»ç»“ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[é—®é¢˜ä¸€&lt;br/&gt;å»¶è¿Ÿå¤§] --&gt; B[æœ€å¤š5ç§’&lt;br/&gt;å¹³å‡2.5ç§’]
    C[é—®é¢˜äºŒ&lt;br/&gt;DBå‹åŠ›] --&gt; D[é¢‘ç¹æ‰«æ&lt;br/&gt;åŒæ­¥å†™å…¥]
    E[é—®é¢˜ä¸‰&lt;br/&gt;å“åº”æ…¢] --&gt; F[æ–°ä»»åŠ¡ç­‰æ‰«æ&lt;br/&gt;ä¸æ˜¯å®æ—¶]
    
    style A fill:#FFB6C1
    style C fill:#FFB6C1
    style E fill:#FFB6C1
    style B fill:#FF6B6B
    style D fill:#FF6B6B
    style F fill:#FF6B6B
</code></pre>
<h2 data-id="heading-6">äºŒã€æ—¶é—´è½®ï¼šä»æ‰«æåˆ°å†…å­˜è°ƒåº¦</h2>
<h3 data-id="heading-7">æ ¸å¿ƒæ€è·¯</h3>
<p>æŠŠ"å®šæ—¶æ‰«ææ•°æ®åº“"æ”¹ä¸º"å†…å­˜æ—¶é—´è½®è°ƒåº¦"ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¼˜åŒ–å‰&lt;br/&gt;å®šæ—¶æ‰«ææ•°æ®åº“] --&gt; B[å»¶è¿Ÿ0-5ç§’&lt;br/&gt;é¢‘ç¹æŸ¥è¯¢]
    C[ä¼˜åŒ–å&lt;br/&gt;å†…å­˜æ—¶é—´è½®] --&gt; D[å»¶è¿Ÿ1ç§’å†…&lt;br/&gt;é›¶æŸ¥è¯¢]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<p><strong>ä»€ä¹ˆæ˜¯æ—¶é—´è½®ï¼Ÿ</strong></p>
<p>æƒ³è±¡ä¸€ä¸ªé’Ÿè¡¨ï¼Œæœ‰60ä¸ªåˆ»åº¦ï¼Œæ¯ç§’èµ°ä¸€æ ¼ï¼š</p>
<pre><code class="hljs">60ä¸ªæ§½ä½ï¼Œç¼–å· 0-59
æ¯ç§’tickä¸€æ¬¡ï¼ŒæŒ‡é’ˆå‰è¿›
ä»»åŠ¡æ”¾åœ¨å¯¹åº”çš„æ§½ä½é‡Œ
æŒ‡é’ˆåˆ°äº†å°±æ‰§è¡Œ
</code></pre>
<h3 data-id="heading-8">æ—¶é—´è½®ç»“æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ§½ä½0&lt;br/&gt;ä»»åŠ¡A] --&gt; B[æ§½ä½1&lt;br/&gt;ç©º]
    B --&gt; C[æ§½ä½2&lt;br/&gt;ä»»åŠ¡B]
    C --&gt; D[...]
    D --&gt; E[æ§½ä½59&lt;br/&gt;ä»»åŠ¡C]
    E --&gt; F[å›åˆ°æ§½ä½0&lt;br/&gt;å¾ªç¯]
    
    style A fill:#90EE90
    style C fill:#90EE90
    style E fill:#90EE90
    style B fill:#D3D3D3
</code></pre>
<p>å…³é”®å‚æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">tickSeconds</span> = <span class="hljs-number">1</span>     // æ¯ç§’tickä¸€æ¬¡
<span class="hljs-attr">wheelSize</span> = <span class="hljs-number">60</span>      // <span class="hljs-number">60</span>ä¸ªæ§½ä½
<span class="hljs-attr">rounds</span> = N          // ä»»åŠ¡éœ€è¦ç­‰å‡ åœˆ
</code></pre>
<p><strong>ä»»åŠ¡æ€ä¹ˆæ”¾è¿›å»ï¼Ÿ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è®¡ç®—å»¶è¿Ÿç§’æ•°</span>
<span class="hljs-type">long</span> <span class="hljs-variable">delaySeconds</span> <span class="hljs-operator">=</span> ä»»åŠ¡è§¦å‘æ—¶é—´ - å½“å‰æ—¶é—´;
<span class="hljs-type">long</span> <span class="hljs-variable">ticks</span> <span class="hljs-operator">=</span> delaySeconds / tickSeconds;

<span class="hljs-comment">// è®¡ç®—åœˆæ•°å’Œæ§½ä½</span>
<span class="hljs-type">int</span> <span class="hljs-variable">rounds</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (ticks / wheelSize);      <span class="hljs-comment">// éœ€è¦å‡ åœˆ</span>
<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) ((currentIndex + ticks) % wheelSize);  <span class="hljs-comment">// æ”¾å“ªä¸ªæ§½</span>
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">å½“å‰æ—¶é—´ï¼š10:00:00ï¼ŒæŒ‡é’ˆåœ¨æ§½ä½0

ä»»åŠ¡Aï¼š10:00:01 æ‰§è¡Œï¼ˆå»¶è¿Ÿ1ç§’ï¼‰
â†’ <span class="hljs-attr">ticks</span> = <span class="hljs-number">1</span>
â†’ <span class="hljs-attr">rounds</span> = <span class="hljs-number">0</span>, index = <span class="hljs-number">1</span>
â†’ æ”¾å…¥æ§½ä½1ï¼ŒæŒ‡é’ˆèµ°åˆ°1æ—¶ç«‹å³æ‰§è¡Œ

ä»»åŠ¡Bï¼š10:00:59 æ‰§è¡Œï¼ˆå»¶è¿Ÿ59ç§’ï¼‰
â†’ <span class="hljs-attr">ticks</span> = <span class="hljs-number">59</span>
â†’ <span class="hljs-attr">rounds</span> = <span class="hljs-number">0</span>, index = <span class="hljs-number">59</span>
â†’ æ”¾å…¥æ§½ä½59

ä»»åŠ¡Cï¼š10:01:02 æ‰§è¡Œï¼ˆå»¶è¿Ÿ62ç§’ï¼‰
â†’ <span class="hljs-attr">ticks</span> = <span class="hljs-number">62</span>
â†’ <span class="hljs-attr">rounds</span> = <span class="hljs-number">1</span>, index = <span class="hljs-number">2</span>
â†’ æ”¾å…¥æ§½ä½2ï¼Œä½†è¦ç­‰1åœˆåæ‰æ‰§è¡Œ
</code></pre>
<h3 data-id="heading-9">æ‰§è¡Œæµç¨‹</h3>
<p>æ¯ç§’tickä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å®šæ—¶å™¨&lt;br/&gt;æ¯ç§’è§¦å‘] --&gt; B[æ£€æŸ¥å½“å‰æ§½ä½]
    B --&gt; C{rounds=0?}
    C --&gt;|æ˜¯| D[ç«‹å³æ‰§è¡Œ]
    C --&gt;|å¦| E[roundså‡1&lt;br/&gt;ç»§ç»­ç­‰å¾…]
    D --&gt; F[æŒ‡é’ˆå‰è¿›]
    E --&gt; F
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#FFE4B5
    style D fill:#90EE90
    style E fill:#87CEEB
    style F fill:#87CEEB
</code></pre>
<p>ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">tick</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. è·å–å½“å‰æ§½ä½çš„æ‰€æœ‰ä»»åŠ¡</span>
    List&lt;WheelTask&gt; slot = wheel.get(currentIndex);
    
    List&lt;WheelTask&gt; dueTasks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    List&lt;WheelTask&gt; remaining = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-comment">// 2. éå†ä»»åŠ¡</span>
    <span class="hljs-keyword">for</span> (WheelTask task : slot) {
        <span class="hljs-keyword">if</span> (task.rounds &lt;= <span class="hljs-number">0</span>) {
            dueTasks.add(task);      <span class="hljs-comment">// åˆ°æœŸä»»åŠ¡</span>
        } <span class="hljs-keyword">else</span> {
            task.rounds -= <span class="hljs-number">1</span>;        <span class="hljs-comment">// åœˆæ•°å‡1</span>
            remaining.add(task);     <span class="hljs-comment">// ç»§ç»­ç­‰å¾…</span>
        }
    }
    
    <span class="hljs-comment">// 3. æ›´æ–°æ§½ä½ï¼ˆåªä¿ç•™éœ€è¦ç»§ç»­ç­‰å¾…çš„ä»»åŠ¡ï¼‰</span>
    slot.clear();
    slot.addAll(remaining);
    
    <span class="hljs-comment">// 4. å¼‚æ­¥æ‰§è¡Œåˆ°æœŸä»»åŠ¡</span>
    <span class="hljs-keyword">for</span> (WheelTask task : dueTasks) {
        executor.execute(task.callback);
    }
    
    <span class="hljs-comment">// 5. æŒ‡é’ˆå‰è¿›</span>
    currentIndex = (currentIndex + <span class="hljs-number">1</span>) % wheelSize;
}
</code></pre>
<h3 data-id="heading-10">ä¼˜åŠ¿å¯¹æ¯”</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ•°æ®åº“æ‰«æ&lt;br/&gt;5ç§’é—´éš”] --&gt; B[å»¶è¿Ÿå¤§&lt;br/&gt;å‹åŠ›å¤§]
    C[æ—¶é—´è½®&lt;br/&gt;1ç§’tick] --&gt; D[å»¶è¿Ÿå°&lt;br/&gt;é›¶æŸ¥è¯¢]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<p>å¯¹æ¯”è¡¨æ ¼ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>æ•°æ®åº“æ‰«æ</th><th>æ—¶é—´è½®</th></tr></thead><tbody><tr><td>æ—¶é—´ç²¾åº¦</td><td>5ç§’</td><td>1ç§’</td></tr><tr><td>å¹³å‡å»¶è¿Ÿ</td><td>2.5ç§’</td><td>0.5ç§’</td></tr><tr><td>æœ€å¤§å»¶è¿Ÿ</td><td>5ç§’</td><td>1ç§’</td></tr><tr><td>æ•°æ®åº“æŸ¥è¯¢</td><td>é¢‘ç¹</td><td>é›¶ï¼ˆåªå¯åŠ¨åŠ è½½ï¼‰</td></tr><tr><td>å†…å­˜å ç”¨</td><td>ä½</td><td>60ä¸ªæ§½ä½ï¼ˆå¾ˆå°ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-11">ä¸‰ã€æ»‘åŠ¨çª—å£ï¼šä»åŒæ­¥åˆ°æ‰¹é‡</h2>
<h3 data-id="heading-12">æ ¸å¿ƒæ€è·¯</h3>
<p>æŠŠ"æ¯ä¸ªä»»åŠ¡ç«‹å³å†™æ—¥å¿—"æ”¹ä¸º"æ‰¹é‡å†™å…¥"ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¼˜åŒ–å‰&lt;br/&gt;åŒæ­¥å•æ¡å†™å…¥] --&gt; B[1000ä»»åŠ¡&lt;br/&gt;1000æ¬¡IO]
    C[ä¼˜åŒ–å&lt;br/&gt;å¼‚æ­¥æ‰¹é‡å†™å…¥] --&gt; D[1000ä»»åŠ¡&lt;br/&gt;50æ¬¡IO]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<p><strong>ä»€ä¹ˆæ˜¯æ»‘åŠ¨çª—å£ï¼Ÿ</strong></p>
<p>ä¸€ä¸ªå†…å­˜é˜Ÿåˆ—ï¼Œæ”’å¤Ÿäº†æˆ–è€…ç­‰ä¹…äº†ï¼Œå°±æ‰¹é‡å†™ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">ä»»åŠ¡<span class="hljs-number">1</span> â†’ æ”¾å…¥é˜Ÿåˆ—
ä»»åŠ¡<span class="hljs-number">2</span> â†’ æ”¾å…¥é˜Ÿåˆ—
...
ä»»åŠ¡<span class="hljs-number">20</span> â†’ é˜Ÿåˆ—æ»¡äº†ï¼Œæ‰¹é‡å†™å…¥
</code></pre>
<h3 data-id="heading-13">æ‰¹é‡å†™å…¥åŸç†</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ—¥å¿—1] --&gt; Q[å†…å­˜é˜Ÿåˆ—]
    B[æ—¥å¿—2] --&gt; Q
    C[æ—¥å¿—N] --&gt; Q
    Q --&gt; D{è§¦å‘æ¡ä»¶?}
    D --&gt;|æ•°é‡20| E[æ‰¹é‡å†™å…¥&lt;br/&gt;INSERTæ‰¹é‡]
    D --&gt;|æ—¶é—´2ç§’| E
    
    style Q fill:#87CEEB
    style D fill:#FFE4B5
    style E fill:#90EE90
</code></pre>
<p>è§¦å‘æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸¤ä¸ªæ¡ä»¶ï¼Œæ»¡è¶³ä»»ä¸€å³å¯</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">sizeReached</span> <span class="hljs-operator">=</span> buffer.size() &gt;= <span class="hljs-number">20</span>;        <span class="hljs-comment">// æ•°é‡è§¦å‘</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">timeReached</span> <span class="hljs-operator">=</span> now - lastFlushTime &gt;= <span class="hljs-number">2000</span>; <span class="hljs-comment">// æ—¶é—´è§¦å‘ï¼ˆæ¯«ç§’ï¼‰</span>

<span class="hljs-keyword">if</span> (sizeReached || timeReached) {
    flush(buffer);  <span class="hljs-comment">// æ‰¹é‡å†™å…¥</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<pre><code class="hljs language-diff" lang="diff">é«˜å¹¶å‘åœºæ™¯ï¼š
<span class="hljs-deletion">- ä»»åŠ¡å¾ˆå¤šï¼Œå¾ˆå¿«å°±æ”’å¤Ÿ20æ¡</span>
<span class="hljs-deletion">- ç«‹å³æ‰¹é‡å†™å…¥</span>
<span class="hljs-deletion">- é™ä½æ•°æ®åº“å‹åŠ›</span>

ä½å¹¶å‘åœºæ™¯ï¼š
<span class="hljs-deletion">- ä»»åŠ¡å¾ˆå°‘ï¼Œå¯èƒ½æ”’ä¸åˆ°20æ¡</span>
<span class="hljs-deletion">- ç­‰å¾…2ç§’åä¹Ÿè¦å†™å…¥</span>
<span class="hljs-deletion">- ä¿è¯æ—¥å¿—ä¸ä¼šä¸¢å¤±</span>
</code></pre>
<h3 data-id="heading-14">æ‰¹é‡å†™å…¥å®ç°</h3>
<p>åå°çº¿ç¨‹ç›‘å¬é˜Ÿåˆ—ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åå°çº¿ç¨‹</span>
<span class="hljs-keyword">while</span> (running) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ä»é˜Ÿåˆ—é‡Œæ‹¿æ—¥å¿—ï¼ˆæœ€å¤šç­‰2ç§’ï¼‰</span>
        <span class="hljs-type">JobTaskLog</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> queue.poll(<span class="hljs-number">2</span>, TimeUnit.SECONDS);
        
        <span class="hljs-keyword">if</span> (log != <span class="hljs-literal">null</span>) {
            buffer.add(log);
        }
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦flush</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">shouldFlush</span> <span class="hljs-operator">=</span> 
            buffer.size() &gt;= batchSize ||                      <span class="hljs-comment">// æ•°é‡å¤Ÿäº†</span>
            (now - lastFlushTime &gt;= maxWaitMillis);            <span class="hljs-comment">// æ—¶é—´åˆ°äº†</span>
        
        <span class="hljs-keyword">if</span> (shouldFlush &amp;&amp; !buffer.isEmpty()) {
            flush(buffer);
            buffer.clear();
            lastFlushTime = now;
        }
    } <span class="hljs-keyword">catch</span> (InterruptedException e) {
        <span class="hljs-comment">// ä¸­æ–­æ—¶ä¹Ÿè¦flush</span>
        <span class="hljs-keyword">if</span> (!buffer.isEmpty()) {
            flush(buffer);
        }
        <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<p>æ‰¹é‡å†™å…¥SQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> job_task_log 
    (task_id, task_type, executor_name, start_time, end_time, ...)
<span class="hljs-keyword">VALUES</span> 
    (?, ?, ?, ?, ?, ...),
    (?, ?, ?, ?, ?, ...),
    ...
    (?, ?, ?, ?, ?, ...)
</code></pre>
<h3 data-id="heading-15">é™çº§ä¿æŠ¤</h3>
<p>æ‰¹é‡å†™å…¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ‰¹é‡å†™å…¥] --&gt; B{æˆåŠŸ?}
    B --&gt;|æ˜¯| C[å®Œæˆ]
    B --&gt;|å¦| D[é™çº§ï¼šé€æ¡å†™å…¥]
    D --&gt; E[ä¿è¯æ•°æ®ä¸ä¸¢]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#90EE90
    style D fill:#FFB6C1
    style E fill:#90EE90
</code></pre>
<p>ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flush</span><span class="hljs-params">(List&lt;JobTaskLog&gt; buffer)</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å°è¯•æ‰¹é‡å†™å…¥</span>
        taskLogRepository.batchInsert(buffer);
        log.debug(<span class="hljs-string">"æ‰¹é‡å†™å…¥æ—¥å¿—æˆåŠŸï¼Œæ¡æ•°={}"</span>, buffer.size());
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.warn(<span class="hljs-string">"æ‰¹é‡å†™å…¥å¤±è´¥ï¼Œé™çº§ä¸ºé€æ¡å†™å…¥"</span>, e);
        
        <span class="hljs-comment">// é™çº§ï¼šé€æ¡å†™å…¥</span>
        <span class="hljs-keyword">for</span> (JobTaskLog log : buffer) {
            <span class="hljs-keyword">try</span> {
                taskLogRepository.insert(log);
            } <span class="hljs-keyword">catch</span> (Exception ex) {
                log.error(<span class="hljs-string">"é€æ¡å†™å…¥ä¹Ÿå¤±è´¥ï¼Œæ—¥å¿—ä¸¢å¤±ï¼ŒtaskId={}"</span>, log.getTaskId(), ex);
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-16">ä¼˜é›…å…³é—­</h3>
<p>åº”ç”¨å…³é—­æ—¶ï¼Œé˜Ÿåˆ—é‡Œå¯èƒ½è¿˜æœ‰æ—¥å¿—æ²¡å†™ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PreDestroy</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span> {
    running = <span class="hljs-literal">false</span>;              <span class="hljs-comment">// åœæ­¢åå°çº¿ç¨‹</span>
    worker.interrupt();           <span class="hljs-comment">// ä¸­æ–­çº¿ç¨‹</span>
    
    <span class="hljs-comment">// ç¡®ä¿å‰©ä½™æ•°æ®å†™å…¥</span>
    <span class="hljs-keyword">if</span> (!buffer.isEmpty()) {
        flush(buffer);
        buffer.clear();
    }
    
    log.info(<span class="hljs-string">"TaskLogBatcherå·²åœæ­¢ï¼Œå‰©ä½™æ—¥å¿—å·²å†™å…¥"</span>);
}
</code></pre>
<h2 data-id="heading-17">å››ã€æ€ä¹ˆæ•´åˆåˆ°ä¸€èµ·</h2>
<h3 data-id="heading-18">å®Œæ•´æµç¨‹</h3>
<p>ä»ä»»åŠ¡åˆ›å»ºåˆ°æ‰§è¡Œå®Œæˆï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ›å»ºä»»åŠ¡&lt;br/&gt;APIè°ƒç”¨] --&gt; B[å†™å…¥æ•°æ®åº“]
    B --&gt; C[åŠ è½½åˆ°æ—¶é—´è½®&lt;br/&gt;ç«‹å³]
    C --&gt; D[æ—¶é—´è½®tick&lt;br/&gt;1ç§’å]
    D --&gt; E[æ‰§è¡Œä»»åŠ¡&lt;br/&gt;HTTPè°ƒç”¨]
    E --&gt; F[æäº¤æ—¥å¿—&lt;br/&gt;åˆ°é˜Ÿåˆ—]
    F --&gt; G[æ‰¹é‡å†™å…¥&lt;br/&gt;20æ¡æˆ–2ç§’]
    
    style A fill:#87CEEB
    style C fill:#FFE4B5
    style D fill:#FFE4B5
    style E fill:#90EE90
    style F fill:#87CEEB
    style G fill:#90EE90
</code></pre>
<p>å…³é”®æ—¶é—´ç‚¹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">10:00:00.000  åˆ›å»ºä»»åŠ¡ï¼ˆexecuteTime = 10:00:30ï¼‰</span>
<span class="hljs-section">10:00:00.011  åŠ è½½åˆ°æ—¶é—´è½®ï¼ˆ11msï¼‰</span>
<span class="hljs-section">10:00:30.121  æ—¶é—´è½®è§¦å‘æ‰§è¡Œï¼ˆå»¶è¿Ÿ121msï¼‰</span>
<span class="hljs-section">10:00:30.195  HTTPè°ƒç”¨æ‰§è¡Œå™¨ï¼ˆ74msï¼‰</span>
<span class="hljs-section">10:00:30.196  ä»»åŠ¡æ‰§è¡Œå®Œæˆï¼ˆ1msï¼‰</span>
<span class="hljs-section">10:00:30.197  æäº¤æ—¥å¿—åˆ°é˜Ÿåˆ—</span>
<span class="hljs-section">10:00:32.000  æ‰¹é‡å†™å…¥æ•°æ®åº“ï¼ˆ2ç§’åï¼‰</span>
</code></pre>
<h3 data-id="heading-19">åˆå§‹åŒ–æ—¶é—´è½®</h3>
<p>è°ƒåº¦å™¨å¯åŠ¨æ—¶åŠ è½½å·²æœ‰ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostConstruct</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initTimeWheel</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. åˆ›å»ºæ—¶é—´è½®</span>
    <span class="hljs-built_in">this</span>.timeWheel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DelayTimeWheel</span>(<span class="hljs-number">1</span>, <span class="hljs-number">60</span>, executor);
    
    <span class="hljs-comment">// 2. ä»æ•°æ®åº“åŠ è½½ PENDING ä»»åŠ¡</span>
    List&lt;JobDelayTask&gt; pendingTasks = delayTaskRepository.findDueTasks(<span class="hljs-number">1000</span>);
    
    <span class="hljs-comment">// 3. åŠ è½½åˆ°æ—¶é—´è½®</span>
    <span class="hljs-keyword">for</span> (JobDelayTask task : pendingTasks) {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"PENDING"</span>.equals(task.getStatus())) {
            <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">triggerTime</span> <span class="hljs-operator">=</span> task.getNextAttemptTime();
            timeWheel.addTask(task, triggerTime, () -&gt; executeDelayTask(task));
        }
    }
    
    log.info(<span class="hljs-string">"æ—¶é—´è½®åˆå§‹åŒ–å®Œæˆï¼Œå·²è£…è½½ {} æ¡ä»»åŠ¡"</span>, pendingTasks.size());
}
</code></pre>
<h3 data-id="heading-20">æ–°ä»»åŠ¡ç«‹å³åŠ è½½</h3>
<p>APIåˆ›å»ºä»»åŠ¡åï¼Œç«‹å³åŠ è½½åˆ°æ—¶é—´è½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> JobDelayTask <span class="hljs-title function_">createTask</span><span class="hljs-params">(DelayTaskRequest request)</span> {
    <span class="hljs-comment">// 1. å†™å…¥æ•°æ®åº“</span>
    <span class="hljs-type">JobDelayTask</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> buildTask(request);
    delayTaskRepository.insert(task);
    
    <span class="hljs-comment">// 2. ç«‹å³åŠ è½½åˆ°æ—¶é—´è½®ï¼ˆä¸ç­‰æ‰«æï¼‰</span>
    addTaskToWheel(task);
    
    <span class="hljs-keyword">return</span> task;
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addTaskToWheel</span><span class="hljs-params">(JobDelayTask task)</span> {
    <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">triggerTime</span> <span class="hljs-operator">=</span> task.getNextAttemptTime();
    timeWheel.addTask(task, triggerTime, () -&gt; executeDelayTask(task));
    
    log.info(<span class="hljs-string">"æ–°ä»»åŠ¡å·²åŠ è½½åˆ°æ—¶é—´è½®ï¼ŒtraceId={}, triggerTime={}"</span>, 
        task.getTraceId(), triggerTime);
}
</code></pre>
<h3 data-id="heading-21">æ—¶é—´è½®è§¦å‘æ‰§è¡Œ</h3>
<p>æ—¶é—´åˆ°äº†è‡ªåŠ¨æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeDelayTask</span><span class="hljs-params">(JobDelayTask task)</span> {
    log.info(<span class="hljs-string">"æ—¶é—´è½®è§¦å‘æ‰§è¡Œï¼ŒtraceId={}"</span>, task.getTraceId());
    
    <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> LocalDateTime.now();
    <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-type">String</span> <span class="hljs-variable">errorMsg</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡è°ƒåº¦ï¼ˆOwneråˆ¤å®š + CASæŠ¢å  + HTTPè°ƒç”¨ï¼‰</span>
        dispatchDelayTask(task);
        success = <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">catch</span> (Exception e) {
        errorMsg = e.getMessage();
        log.error(<span class="hljs-string">"æ‰§è¡Œå¤±è´¥ï¼ŒtraceId={}"</span>, task.getTraceId(), e);
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// è®°å½•æ—¥å¿—ï¼ˆæäº¤åˆ°æ‰¹é‡å¤„ç†å™¨ï¼‰</span>
        <span class="hljs-type">JobTaskLog</span> <span class="hljs-variable">logEntity</span> <span class="hljs-operator">=</span> buildLog(task, startTime, success, errorMsg);
        taskLogBatcher.add(logEntity);  <span class="hljs-comment">// å¼‚æ­¥æ‰¹é‡å†™å…¥</span>
    }
}
</code></pre>
<h3 data-id="heading-22">è¡¥å¿æ‰«æ</h3>
<p>è™½ç„¶æœ‰äº†æ—¶é—´è½®ï¼Œä½†è¿˜æ˜¯ä¿ç•™äº†æ‰«ææœºåˆ¶ï¼ˆé™ä½é¢‘ç‡ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(fixedDelay = 10000)</span>  <span class="hljs-comment">// ä»5ç§’æ”¹ä¸º10ç§’</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scanAndDispatch</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. å¤„ç† SENDING è¶…æ—¶ä»»åŠ¡</span>
    List&lt;JobDelayTask&gt; stuckTasks = findStuckSendingTasks();
    <span class="hljs-keyword">for</span> (JobDelayTask task : stuckTasks) {
        handleSendingTimeout(task);
    }
    
    <span class="hljs-comment">// 2. è¡¥å¿ï¼šåŠ è½½æ–°æäº¤çš„ PENDING ä»»åŠ¡åˆ°æ—¶é—´è½®</span>
    <span class="hljs-comment">//    ï¼ˆé˜²æ­¢æŸäº›ä»»åŠ¡åˆ›å»ºåæ²¡åŠ è½½ï¼‰</span>
    List&lt;JobDelayTask&gt; newPendingTasks = findNewPendingTasks();
    <span class="hljs-keyword">for</span> (JobDelayTask task : newPendingTasks) {
        <span class="hljs-keyword">if</span> (!isInTimeWheel(task)) {
            addTaskToWheel(task);
        }
    }
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿˜è¦æ‰«æï¼Ÿ</p>
<pre><code class="hljs language-diff" lang="diff">æ—¶é—´è½®ï¼šæ­£å¸¸æµç¨‹ï¼Œ99%çš„ä»»åŠ¡èµ°è¿™é‡Œ
è¡¥å¿æ‰«æï¼šå…œåº•æœºåˆ¶ï¼Œé˜²æ­¢é—æ¼

å¯èƒ½é—æ¼çš„åœºæ™¯ï¼š
<span class="hljs-deletion">- è°ƒåº¦å™¨é‡å¯ï¼Œéƒ¨åˆ†ä»»åŠ¡æ²¡åŠ è½½</span>
<span class="hljs-deletion">- æ•°æ®åº“ç›´æ¥æ’å…¥ä»»åŠ¡</span>
<span class="hljs-deletion">- æ—¶é—´è½®åŠ è½½å¤±è´¥</span>

è¡¥å¿æ‰«æä¿è¯ï¼šå³ä½¿æ—¶é—´è½®å‡ºé—®é¢˜ï¼Œä»»åŠ¡æœ€å¤šå»¶è¿Ÿ10ç§’
</code></pre>
<h2 data-id="heading-23">äº”ã€æ•ˆæœæ€ä¹ˆæ ·</h2>
<h3 data-id="heading-24">å»¶è¿Ÿå¯¹æ¯”</h3>
<p>å®æµ‹æ•°æ®ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">ä¼˜åŒ–å‰ï¼š
<span class="hljs-deletion">- åˆ›å»ºæ—¶é—´ï¼š10:00:00.000</span>
<span class="hljs-deletion">- æœŸæœ›æ‰§è¡Œï¼š10:00:30.000</span>
<span class="hljs-deletion">- å®é™…æ‰§è¡Œï¼š10:00:32.500ï¼ˆå¹³å‡å»¶è¿Ÿ2.5ç§’ï¼‰</span>
<span class="hljs-deletion">- æœ€å¤§å»¶è¿Ÿï¼š5ç§’</span>

ä¼˜åŒ–åï¼š
<span class="hljs-deletion">- åˆ›å»ºæ—¶é—´ï¼š10:00:00.000</span>
<span class="hljs-deletion">- æœŸæœ›æ‰§è¡Œï¼š10:00:30.000</span>
<span class="hljs-deletion">- å®é™…æ‰§è¡Œï¼š10:00:30.121ï¼ˆå»¶è¿Ÿ121msï¼‰</span>
<span class="hljs-deletion">- æœ€å¤§å»¶è¿Ÿï¼š1ç§’</span>
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¼˜åŒ–å‰&lt;br/&gt;å»¶è¿Ÿ0-5ç§’] --&gt; B[å¹³å‡2.5ç§’]
    C[ä¼˜åŒ–å&lt;br/&gt;å»¶è¿Ÿ0-1ç§’] --&gt; D[å¹³å‡0.5ç§’]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<h3 data-id="heading-25">æ•°æ®åº“å‹åŠ›</h3>
<p>æ‰«æé¢‘ç‡ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">ä¼˜åŒ–å‰ï¼š
<span class="hljs-deletion">- æ‰«æé—´éš”ï¼š5ç§’</span>
<span class="hljs-deletion">- æ¯å°æ—¶ï¼š720æ¬¡</span>
<span class="hljs-deletion">- æ—¥å¿—å†™å…¥ï¼šåŒæ­¥å•æ¡</span>

ä¼˜åŒ–åï¼š
<span class="hljs-deletion">- æ‰«æé—´éš”ï¼š10ç§’ï¼ˆé™ä½50%ï¼‰</span>
<span class="hljs-deletion">- æ¯å°æ—¶ï¼š360æ¬¡</span>
<span class="hljs-deletion">- æ—¥å¿—å†™å…¥ï¼šå¼‚æ­¥æ‰¹é‡ï¼ˆé™ä½95%ï¼‰</span>
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¼˜åŒ–å‰&lt;br/&gt;720æ¬¡/å°æ—¶] --&gt; B[æ‰«æå‹åŠ›å¤§&lt;br/&gt;IOé¢‘ç¹]
    C[ä¼˜åŒ–å&lt;br/&gt;360æ¬¡/å°æ—¶] --&gt; D[å‹åŠ›å‡åŠ&lt;br/&gt;æ‰¹é‡å†™å…¥]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<p>æ—¥å¿—å†™å…¥å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">åœºæ™¯ï¼š1000ä¸ªä»»åŠ¡

ä¼˜åŒ–å‰ï¼š
<span class="hljs-deletion">- 1000ä¸ªä»»åŠ¡ = 1000æ¬¡ INSERT</span>
<span class="hljs-deletion">- æ¯æ¬¡éƒ½ç­‰å¾…æ•°æ®åº“å“åº”</span>
<span class="hljs-deletion">- æ•°æ®åº“è¿æ¥æ± å¯èƒ½è€—å°½</span>

ä¼˜åŒ–åï¼š
<span class="hljs-deletion">- 1000ä¸ªä»»åŠ¡ = 50æ¬¡æ‰¹é‡ INSERTï¼ˆ20æ¡/æ‰¹ï¼‰</span>
<span class="hljs-deletion">- IOæ¬¡æ•°é™ä½95%</span>
<span class="hljs-deletion">- æ•°æ®åº“å‹åŠ›å¤§å¹…é™ä½</span>
</code></pre>
<h3 data-id="heading-26">å“åº”é€Ÿåº¦</h3>
<p>æ–°ä»»åŠ¡æäº¤åçš„å“åº”ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ä¼˜åŒ–å‰ï¼š
POST /api/delay-tasks â†’ <span class="hljs-number">200</span> OKï¼ˆæ•°æ®åº“å†™å…¥ï¼‰
â†’ ç­‰å¾…ä¸‹æ¬¡æ‰«æï¼ˆ<span class="hljs-number">0</span><span class="hljs-number">-5</span>ç§’ï¼‰
â†’ ç”¨æˆ·æ„ŸçŸ¥æ…¢

ä¼˜åŒ–åï¼š
POST /api/delay-tasks â†’ <span class="hljs-number">200</span> OKï¼ˆæ•°æ®åº“å†™å…¥ï¼‰
â†’ ç«‹å³åŠ è½½åˆ°æ—¶é—´è½®ï¼ˆ<span class="hljs-number">11</span>msï¼‰
â†’ ç”¨æˆ·æ„ŸçŸ¥å¿«
</code></pre>
<h3 data-id="heading-27">æ€§èƒ½æŒ‡æ ‡æ€»ç»“</h3>









































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td>æ‰§è¡Œå»¶è¿Ÿ</td><td>0-5ç§’</td><td>0-1ç§’</td><td>80-100%</td></tr><tr><td>å¹³å‡å»¶è¿Ÿ</td><td>2.5ç§’</td><td>0.5ç§’</td><td>80%</td></tr><tr><td>æ‰«æé¢‘ç‡</td><td>æ¯5ç§’</td><td>æ¯10ç§’</td><td>50%</td></tr><tr><td>æ—¥å¿—IO</td><td>Næ¬¡</td><td>N/20æ¬¡</td><td>95%</td></tr><tr><td>æ–°ä»»åŠ¡å“åº”</td><td>ç­‰å¾…æ‰«æ</td><td>ç«‹å³åŠ è½½</td><td>å®æ—¶</td></tr></tbody></table>
<h2 data-id="heading-28">å…­ã€è®¾è®¡è¦ç‚¹</h2>
<h3 data-id="heading-29">æ—¶é—´è½®çš„ç²¾å¦™ä¹‹å¤„</h3>
<p><strong>O(1)å¤æ‚åº¦</strong></p>
<pre><code class="hljs language-scss" lang="scss">æ·»åŠ ä»»åŠ¡ï¼šè®¡ç®—æ§½ä½ â†’ æ”¾å…¥ â†’ <span class="hljs-built_in">O</span>(<span class="hljs-number">1</span>)
æ‰§è¡Œä»»åŠ¡ï¼šæ£€æŸ¥æ§½ä½ â†’ è§¦å‘ â†’ <span class="hljs-built_in">O</span>(<span class="hljs-number">1</span>)
</code></pre>
<p>ä¸éœ€è¦éå†æ‰€æœ‰ä»»åŠ¡ï¼Œä¹Ÿä¸éœ€è¦æ’åºï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯å¸¸æ•°çº§çš„ã€‚</p>
<p><strong>å¤šåœˆæ”¯æŒ</strong></p>
<pre><code class="hljs language-ini" lang="ini">å»¶è¿Ÿ1ç§’   â†’ <span class="hljs-attr">rounds</span>=<span class="hljs-number">0</span>, æ”¾æ§½ä½<span class="hljs-number">1</span>
å»¶è¿Ÿ59ç§’  â†’ <span class="hljs-attr">rounds</span>=<span class="hljs-number">0</span>, æ”¾æ§½ä½<span class="hljs-number">59</span>
å»¶è¿Ÿ60ç§’  â†’ <span class="hljs-attr">rounds</span>=<span class="hljs-number">1</span>, æ”¾æ§½ä½<span class="hljs-number">0</span>ï¼ˆç­‰<span class="hljs-number">1</span>åœˆï¼‰
å»¶è¿Ÿ120ç§’ â†’ <span class="hljs-attr">rounds</span>=<span class="hljs-number">2</span>, æ”¾æ§½ä½<span class="hljs-number">0</span>ï¼ˆç­‰<span class="hljs-number">2</span>åœˆï¼‰
</code></pre>
<p>åªè¦å†…å­˜å¤Ÿï¼Œå¯ä»¥æ”¯æŒä»»æ„é•¿çš„å»¶è¿Ÿã€‚</p>
<p><strong>çº¿ç¨‹å®‰å…¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">synchronized</span> (wheel) {
    wheel.get(index).add(wheelTask);  <span class="hljs-comment">// æ§½ä½æ“ä½œéƒ½åŠ é”</span>
}
</code></pre>
<p>ç®€å•ç²—æš´ï¼Œä½†å¤Ÿç”¨ã€‚å› ä¸ºï¼š</p>
<ul>
<li>æ§½ä½æ“ä½œå¾ˆå¿«ï¼ˆO(1)ï¼‰</li>
<li>é”ç²’åº¦å°ï¼Œä¸ä¼šé˜»å¡å¤ªä¹…</li>
</ul>
<p><strong>å¼‚æ­¥æ‰§è¡Œ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">for</span> (WheelTask task : dueTasks) {
    executor.execute(task.callback);  <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œï¼Œä¸é˜»å¡tick</span>
}
</code></pre>
<p>å³ä½¿æŸä¸ªä»»åŠ¡æ‰§è¡Œå¾ˆæ…¢ï¼Œä¹Ÿä¸ä¼šå½±å“æ—¶é—´è½®çš„tickã€‚</p>
<h3 data-id="heading-30">æ»‘åŠ¨çª—å£çš„å·§å¦™ä¹‹å¤„</h3>
<p><strong>åŒé‡è§¦å‘æœºåˆ¶</strong></p>
<pre><code class="hljs">é«˜å¹¶å‘ï¼šå¾ˆå¿«æ”’å¤Ÿ20æ¡ â†’ ç«‹å³æ‰¹é‡å†™å…¥
ä½å¹¶å‘ï¼šæ”’ä¸åˆ°20æ¡ â†’ ç­‰2ç§’ä¹Ÿå†™å…¥
</code></pre>
<p>æ—¢ä¿è¯äº†æ€§èƒ½ï¼Œåˆä¿è¯äº†æ—¶æ•ˆæ€§ã€‚</p>
<p><strong>ä¼˜é›…é™çº§</strong></p>
<pre><code class="hljs">æ‰¹é‡å†™å…¥å¤±è´¥ â†’ é™çº§ä¸ºé€æ¡å†™å…¥ â†’ ä¿è¯æ•°æ®ä¸ä¸¢
</code></pre>
<p>å¯é æ€§ä¼˜å…ˆï¼Œå®å¯æ…¢ä¸€ç‚¹ï¼Œä¹Ÿä¸èƒ½ä¸¢æ•°æ®ã€‚</p>
<p><strong>ä¼˜é›…å…³é—­</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PreDestroy</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stop</span><span class="hljs-params">()</span> {
    running = <span class="hljs-literal">false</span>;           <span class="hljs-comment">// åœæ­¢æ¥æ”¶æ–°æ—¥å¿—</span>
    worker.interrupt();        <span class="hljs-comment">// ä¸­æ–­åå°çº¿ç¨‹</span>
    flush(buffer);             <span class="hljs-comment">// æŠŠå‰©ä½™æ—¥å¿—å†™å®Œ</span>
}
</code></pre>
<p>åº”ç”¨å…³é—­æ—¶ï¼Œç¡®ä¿é˜Ÿåˆ—é‡Œçš„æ—¥å¿—éƒ½å†™å…¥äº†ã€‚</p>
<h3 data-id="heading-31">ä¸¤è€…ç»“åˆçš„æ•ˆæœ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ—¶é—´è½®&lt;br/&gt;é™ä½å»¶è¿Ÿ] --&gt; C[ç”¨æˆ·ä½“éªŒå¥½&lt;br/&gt;DBå‹åŠ›å°]
    B[æ»‘åŠ¨çª—å£&lt;br/&gt;æ‰¹é‡å†™å…¥] --&gt; C
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#90EE90
</code></pre>
<p>æ—¶é—´è½®è§£å†³äº†"ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ"çš„é—®é¢˜ï¼Œæ»‘åŠ¨çª—å£è§£å†³äº†"æ€ä¹ˆé«˜æ•ˆè®°å½•"çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-32">ä¸ƒã€é€‚ç”¨åœºæ™¯</h2>
<h3 data-id="heading-33">é€‚åˆç”¨æ—¶é—´è½®çš„åœºæ™¯</h3>
<pre><code class="hljs">ä»»åŠ¡é‡å¤§ï¼šæ¯åˆ†é’Ÿ1000ä¸ªä»¥ä¸Š
æ—¶é—´ç²¾åº¦è¦æ±‚é«˜ï¼šç§’çº§
å»¶è¿Ÿæ—¶é—´ä¸å¤ªé•¿ï¼š1å°æ—¶ä»¥å†…
å†…å­˜å……è¶³ï¼šæ—¶é—´è½®å ç”¨å†…å­˜å¾ˆå°
</code></pre>
<h3 data-id="heading-34">ä¸é€‚åˆçš„åœºæ™¯</h3>
<pre><code class="hljs">ä»»åŠ¡é‡æå°ï¼šæ¯å°æ—¶åªæœ‰å‡ ä¸ªä»»åŠ¡
â†’ ç”¨æ•°æ®åº“æ‰«æå°±å¤Ÿäº†ï¼Œä¸éœ€è¦æ—¶é—´è½®

å»¶è¿Ÿæ—¶é—´è¶…é•¿ï¼šå‡ ä¸ªå°æ—¶ç”šè‡³å‡ å¤©
â†’ å»ºè®®ç”¨å¤šçº§æ—¶é—´è½®ï¼ˆç§’çº§è½® + åˆ†çº§è½® + æ—¶çº§è½®ï¼‰

å†…å­˜ç´§å¼ ï¼š
â†’ æ—¶é—´è½®æŠŠä»»åŠ¡åŠ è½½åˆ°å†…å­˜ï¼Œä¼šå ç”¨ä¸€äº›ç©ºé—´
</code></pre>
<h3 data-id="heading-35">é€‚åˆç”¨æ»‘åŠ¨çª—å£çš„åœºæ™¯</h3>
<pre><code class="hljs">å†™å…¥é¢‘ç¹ï¼šæ¯ç§’å‡ åä¸Šç™¾æ¬¡
æ•°æ®åº“å‹åŠ›å¤§ï¼šIOæ˜¯ç“¶é¢ˆ
å…è®¸å°å»¶è¿Ÿï¼š2ç§’å†…çš„æ—¥å¿—å»¶è¿Ÿå¯æ¥å—
</code></pre>
<h3 data-id="heading-36">ä¸é€‚åˆçš„åœºæ™¯</h3>
<pre><code class="hljs">å†™å…¥ä¸é¢‘ç¹ï¼šæ¯å°æ—¶åªæœ‰å‡ æ¬¡
â†’ æ²¡å¿…è¦æ‰¹é‡ï¼Œç›´æ¥å†™å°±å¥½

ä¸å…è®¸ä»»ä½•å»¶è¿Ÿï¼šå¿…é¡»ç«‹å³è½ç›˜
â†’ ä¸èƒ½ç”¨å¼‚æ­¥æ‰¹é‡ï¼Œå¿…é¡»åŒæ­¥å†™å…¥
</code></pre>
<h2 data-id="heading-37">å…«ã€åç»­ä¼˜åŒ–æ–¹å‘</h2>
<h3 data-id="heading-38">å¤šçº§æ—¶é—´è½®</h3>
<p>å¦‚æœå»¶è¿Ÿæ—¶é—´å¾ˆé•¿ï¼ˆå‡ ä¸ªå°æ—¶ï¼‰ï¼Œå¯ä»¥ç”¨å¤šçº§æ—¶é—´è½®ï¼š</p>
<pre><code class="hljs">ç§’çº§è½®ï¼š60æ ¼ Ã— 1ç§’ = 1åˆ†é’ŸèŒƒå›´
åˆ†çº§è½®ï¼š60æ ¼ Ã— 1åˆ†é’Ÿ = 1å°æ—¶èŒƒå›´
æ—¶çº§è½®ï¼š24æ ¼ Ã— 1å°æ—¶ = 1å¤©èŒƒå›´
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç§’çº§è½®&lt;br/&gt;60æ ¼1ç§’] --&gt; B[åˆ†çº§è½®&lt;br/&gt;60æ ¼1åˆ†é’Ÿ]
    B --&gt; C[æ—¶çº§è½®&lt;br/&gt;24æ ¼1å°æ—¶]
    
    style A fill:#90EE90
    style B fill:#87CEEB
    style C fill:#FFE4B5
</code></pre>
<p>ä»»åŠ¡ä»é«˜çº§è½®é€çº§é™çº§åˆ°ä½çº§è½®ï¼Œæœ€ååœ¨ç§’çº§è½®æ‰§è¡Œã€‚</p>
<h3 data-id="heading-39">åŠ¨æ€è°ƒæ•´æ‰¹é‡å¤§å°</h3>
<p>æ ¹æ®å¹¶å‘é‡åŠ¨æ€è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é«˜å³°æœŸï¼šå¿«é€Ÿæ‰¹é‡</span>
<span class="hljs-keyword">if</span> (qps &gt; <span class="hljs-number">100</span>) {
    batchSize = <span class="hljs-number">50</span>;
    maxWaitMillis = <span class="hljs-number">500</span>;
}

<span class="hljs-comment">// ä½å³°æœŸï¼šä¿è¯æ—¶æ•ˆ</span>
<span class="hljs-keyword">if</span> (qps &lt; <span class="hljs-number">10</span>) {
    batchSize = <span class="hljs-number">10</span>;
    maxWaitMillis = <span class="hljs-number">1000</span>;
}
</code></pre>
<h3 data-id="heading-40">Prometheusç›‘æ§</h3>
<p>å¢åŠ å…³é”®æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">æ—¶é—´è½®æŒ‡æ ‡ï¼š
<span class="hljs-deletion">- timewheel_tasks_totalï¼šæ—¶é—´è½®ä¸­çš„ä»»åŠ¡æ€»æ•°</span>
<span class="hljs-deletion">- timewheel_tick_duration_msï¼šæ¯æ¬¡tickçš„è€—æ—¶</span>

æ‰¹é‡æ—¥å¿—æŒ‡æ ‡ï¼š
<span class="hljs-deletion">- log_batch_size_avgï¼šå¹³å‡æ‰¹é‡å¤§å°</span>
<span class="hljs-deletion">- log_batch_flush_totalï¼šæ€»flushæ¬¡æ•°</span>
<span class="hljs-deletion">- log_queue_sizeï¼šé˜Ÿåˆ—é•¿åº¦</span>
</code></pre>
<h2 data-id="heading-41">ä¹ã€æ€»ç»“</h2>
<p>è¿™æ¬¡ä¼˜åŒ–ç”¨äº†ä¸¤ä¸ªç»å…¸çš„æ•°æ®ç»“æ„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ—¶é—´è½®&lt;br/&gt;ç»å…¸è°ƒåº¦ç®—æ³•] --&gt; C[é«˜æ€§èƒ½&lt;br/&gt;ä½å»¶è¿Ÿ]
    B[æ»‘åŠ¨çª—å£&lt;br/&gt;æ‰¹é‡ä¼˜åŒ–æ¨¡å¼] --&gt; C
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#90EE90
</code></pre>
<p><strong>æ ¸å¿ƒæ”¶è·ï¼š</strong></p>
<p>æ—¶é—´è½®ï¼š</p>
<ul>
<li>O(1)å¤æ‚åº¦çš„ä»»åŠ¡è°ƒåº¦</li>
<li>å†…å­˜å ç”¨å°</li>
<li>æ”¯æŒä»»æ„é•¿å»¶è¿Ÿï¼ˆå¤šåœˆæœºåˆ¶ï¼‰</li>
</ul>
<p>æ»‘åŠ¨çª—å£ï¼š</p>
<ul>
<li>æ‰¹é‡å†™å…¥ï¼Œé™ä½95%çš„IO</li>
<li>åŒé‡è§¦å‘ï¼Œå…¼é¡¾æ€§èƒ½å’Œæ—¶æ•ˆ</li>
<li>ä¼˜é›…é™çº§ï¼Œä¿è¯å¯é æ€§</li>
</ul>
<p><strong>ä¼˜åŒ–æˆæœï¼š</strong></p>



































<table><thead><tr><th>ç»´åº¦</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡</th></tr></thead><tbody><tr><td>æ‰§è¡Œå»¶è¿Ÿ</td><td>0-5ç§’</td><td>0-1ç§’</td><td>80-100%</td></tr><tr><td>æ‰«æé¢‘ç‡</td><td>æ¯5ç§’</td><td>æ¯10ç§’</td><td>50%</td></tr><tr><td>æ—¥å¿—IO</td><td>Næ¬¡</td><td>N/20æ¬¡</td><td>95%</td></tr><tr><td>æ–°ä»»åŠ¡å“åº”</td><td>ç­‰å¾…æ‰«æ</td><td>ç«‹å³åŠ è½½</td><td>å®æ—¶</td></tr></tbody></table>
<p><strong>è®¾è®¡ç†å¿µï¼š</strong></p>
<p>ä¸æ˜¯æ‰€æœ‰é—®é¢˜éƒ½è¦ç”¨æœ€å¤æ‚çš„æ–¹æ¡ˆã€‚æ—¶é—´è½®å’Œæ»‘åŠ¨çª—å£éƒ½æ˜¯å¾ˆç®€å•çš„æ•°æ®ç»“æ„ï¼Œä½†ç”¨å¯¹äº†åœ°æ–¹ï¼Œæ•ˆæœå°±å¾ˆå¥½ã€‚</p>
<p><strong>å…³é”®æ˜¯ï¼š</strong></p>
<pre><code class="hljs">ç†è§£é—®é¢˜çš„æœ¬è´¨
é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆ
ç”¨ç®€å•çš„æ–¹å¼è§£å†³å¤æ‚çš„é—®é¢˜
</code></pre>
<p>è¿™å°±æ˜¯ JobFlow çš„æ—¶é—´è½®ä¸æ»‘åŠ¨çª—å£ä¼˜åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•°æ®åˆ†æå¸ˆçš„â€œæ°´æ™¶çƒâ€ï¼šæ—¶é—´åºåˆ—åˆ†æ]]></title>    <link>https://juejin.cn/post/7588680081326293034</link>    <guid>https://juejin.cn/post/7588680081326293034</guid>    <pubDate>2025-12-28T09:30:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588680081326293034" data-draft-id="7588152122187530294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•°æ®åˆ†æå¸ˆçš„â€œæ°´æ™¶çƒâ€ï¼šæ—¶é—´åºåˆ—åˆ†æ"/> <meta itemprop="keywords" content="Python,æ•°æ®åˆ†æ,æ•°æ®æŒ–æ˜"/> <meta itemprop="datePublished" content="2025-12-28T09:30:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•°æ®åˆ†æå¸ˆçš„â€œæ°´æ™¶çƒâ€ï¼šæ—¶é—´åºåˆ—åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T09:30:08.000Z" title="Sun Dec 28 2025 09:30:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾ˆå¤šåˆšå…¥è¡Œçš„å°ä¼™ä¼´é—®æˆ‘ï¼šâ€œ<em>æˆ‘æƒ³é¢„æµ‹ä¸‹ä¸ªæœˆå…¬å¸çš„é”€å”®é¢ï¼Œæˆ–è€…é¢„æµ‹ä¸€ä¸‹æ˜å¤©çš„è‚¡ä»·ï¼Œè¯¥å­¦ä»€ä¹ˆï¼Ÿ</em>â€</p>
<p>æˆ‘çš„å›ç­”é€šå¸¸åªæœ‰å…­ä¸ªå­—ï¼š<strong>æ—¶é—´åºåˆ—åˆ†æ</strong>ã€‚</p>
<p>å¦‚æœåœ¨æ•°æ®åˆ†æçš„ä¸–ç•Œé‡Œæœ‰ä¸€ç§é­”æ³•èƒ½è®©ä½ â€œé¢„çŸ¥æœªæ¥â€ï¼Œé‚£ä¸€å®šå°±æ˜¯å®ƒã€‚</p>
<h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯æ—¶é—´åºåˆ—ï¼Ÿ</h2>
<p>åˆ«è¢«åè¯å“åˆ°äº†ã€‚ç®€å•æ¥è¯´ï¼Œ<strong>æ—¶é—´åºåˆ—ï¼ˆTime Seriesï¼‰å°±æ˜¯æŒ‰æ—¶é—´é¡ºåºæ’åˆ—çš„ä¸€ç»„æ•°æ®</strong>ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>ä½ æ‰‹æœºé‡Œæ¯å¤©çš„æ­¥æ•°è®°å½•ï¼›</li>
<li>æŸåªè‚¡ç¥¨æ¯å¤©çš„æ”¶ç›˜ä»·ï¼›</li>
<li>æˆ–è€…æ˜¯ä½ å®¶æ¥¼ä¸‹ä¾¿åˆ©åº—æ¯ä¸ªæœˆçš„è¥ä¸šé¢ã€‚</li>
</ul>
<p>è¿™äº›æ•°æ®éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼š<strong>æœ‰ä¸€ä¸ªæ—¶é—´è½´ï¼Œä¸”æ•°æ®éšç€æ—¶é—´å˜åŒ–ã€‚</strong></p>
<p>æˆ‘ä»¬åš<strong>æ—¶é—´åºåˆ—åˆ†æ</strong>çš„<strong>æ ¸å¿ƒç›®çš„</strong>ï¼Œå°±æ˜¯è¦ä»è¿‡å»çš„**â€œå†å²æ•°æ®â€<strong>ä¸­æ‰¾å‡ºè§„å¾‹ï¼Œç„¶åæŠŠè¿™ä¸ªè§„å¾‹å»¶é•¿åˆ°</strong>â€œæœªæ¥â€<strong>ï¼Œè¿™å°±æ˜¯</strong>é¢„æµ‹**ã€‚</p>
<h2 data-id="heading-1">2. åƒå‰¥æ´‹è‘±ä¸€æ ·æ‹†è§£æ•°æ®ï¼šæ—¶é—´åºåˆ—çš„å››å¤§æˆåˆ†</h2>
<p>åˆå­¦è€…æœ€å®¹æ˜“çŠ¯çš„é”™è¯¯æ˜¯ç›´æ¥æŠŠæ•°æ®ä¸¢è¿›æ¨¡å‹é‡Œè·‘ã€‚</p>
<p>ä½œä¸ºä¸€åè€æ‰‹ï¼Œæˆ‘è¦å‘Šè¯‰ä½ ï¼š<strong>çœ‹åˆ°æ•°æ®ï¼Œå…ˆæ‹†è§£ã€‚</strong></p>
<p>é€šå¸¸ï¼Œä»»ä½•ä¸€ä¸ªéšæ—¶é—´å˜åŒ–çš„æ•°æ®ï¼ˆæ¯”å¦‚ä¸€å®¶å¥¶èŒ¶åº—çš„æ—¥é”€é‡ï¼‰ï¼Œéƒ½å¯ä»¥è¢«æ‹†åˆ†ä¸º<strong>å››ä¸ªéƒ¨åˆ†</strong>ã€‚</p>
<h3 data-id="heading-2">2.1. é•¿æœŸè¶‹åŠ¿--â€œå¤§åŠ¿æ‰€è¶‹â€</h3>
<p>è¿™æ˜¯æ•°æ®åœ¨é•¿æ—¶é—´å†…çš„ä¸»è¦è¿åŠ¨æ–¹å‘ã€‚</p>
<ul>
<li><strong>ä¾‹å­</strong>ï¼šè¿™å®¶å¥¶èŒ¶åº—å¼€äº†ä¸‰å¹´ï¼Œéšç€å“ç‰ŒçŸ¥ååº¦æå‡ï¼Œæ•´ä½“é”€é‡æ¯å¹´éƒ½åœ¨æ¶¨ã€‚è¿™å°±æ˜¯<strong>è¶‹åŠ¿</strong>ã€‚</li>
<li><strong>åœ°ä½</strong>ï¼šå®ƒæ˜¯æ€»å˜åŠ¨çš„è€å¤§ï¼Œå†³å®šäº†é•¿æœŸçš„æ–¹å‘ã€‚</li>
</ul>
<h3 data-id="heading-3">2.2. å­£èŠ‚å˜åŠ¨--â€œæ˜¥å¤ç§‹å†¬çš„è½®å›â€</h3>
<p>æ•°æ®å—å­£èŠ‚ã€èŠ‚å‡æ—¥ç­‰å›ºå®šå‘¨æœŸå½±å“è€Œå‡ºç°çš„æ³¢åŠ¨ã€‚</p>
<ul>
<li><strong>ä¾‹å­</strong>ï¼šå¤å¤©å¤©æ°”çƒ­ï¼Œå†°é¥®å–å¾—ç–¯å¿«ï¼›å†¬å¤©å†·ï¼Œé”€é‡è‡ªç„¶ä¸‹æ»‘ï¼›æ¯åˆ°å‘¨æœ«é”€é‡å°±æ¯”å‘¨ä¸€é«˜ã€‚è¿™ç§éšç€æ—¶é—´å›ºå®šé‡å¤çš„æ³¢åŠ¨ï¼Œå°±æ˜¯<strong>å­£èŠ‚æ€§</strong>ã€‚</li>
<li><strong>åœ°ä½</strong>ï¼šå®ƒæ˜¯æ€»å˜åŠ¨çš„è€äºŒï¼Œéå¸¸è§„å¾‹ï¼Œé¢„æµ‹èµ·æ¥æœ€å‡†ã€‚</li>
</ul>
<h3 data-id="heading-4">2.3. å¾ªç¯å˜åŠ¨--â€œéš¾ä»¥æ‰æ‘¸çš„å‘¨æœŸâ€</h3>
<p>è¿™æ˜¯ä¸€äº›å‘¨æœŸè¾ƒé•¿ã€ä¸å›ºå®šçš„æ³¢åŠ¨ï¼Œé€šå¸¸å’Œå®è§‚ç»æµæœ‰å…³ã€‚</p>
<ul>
<li><strong>ä¾‹å­</strong>ï¼šç”±äºç»æµå±æœºï¼Œå¤§å®¶é’±åŒ…ç´§äº†ï¼Œå¥¶èŒ¶å–å¾—å°‘äº†ã€‚ç­‰ç»æµå¤è‹ï¼Œåˆå–å¤šäº†ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šè¿™éƒ¨åˆ†åŸå› å¤æ‚ï¼Œå‘¨æœŸä¸å›ºå®šï¼Œæˆ‘ä»¬åœ¨åŸºç¡€é¢„æµ‹ä¸­é€šå¸¸<strong>ä¸åšé‡ç‚¹è€ƒè™‘</strong>ã€‚</li>
</ul>
<h3 data-id="heading-5">2.4. ä¸è§„åˆ™å˜åŠ¨--â€œè€å¤©çˆ·çš„å¿ƒæƒ…â€</h3>
<p>è¿™æ˜¯éšæœºçš„ã€ä¸å¯æ§çš„æ³¢åŠ¨ã€‚</p>
<ul>
<li><strong>ä¾‹å­</strong>ï¼šæŸå¤©çªç„¶ä¸‹æš´é›¨ï¼Œæ²¡äººå‡ºé—¨ï¼Œé”€é‡æš´è·Œï¼›æˆ–è€…æŸå¤©ç½‘çº¢æ¥æ‰“å¡ï¼Œé”€é‡æš´æ¶¨ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šè¿™æ˜¯â€œå™ªéŸ³â€ï¼Œåœ¨é¢„æµ‹ä¸­æˆ‘ä»¬å¾ˆéš¾æ•æ‰å®ƒï¼Œé€šå¸¸å‡è®¾å®ƒä¸º0æˆ–å¿½ç•¥ã€‚</li>
</ul>
<blockquote>
<p><strong>ï¼ˆé‡ç‚¹ï¼‰ï¼š</strong><br/>
åœ¨å®é™…çš„æ—¶é—´åºåˆ—é¢„æµ‹ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦æŠ“ <strong>â€œé•¿æœŸè¶‹åŠ¿â€ å’Œ â€œå­£èŠ‚å˜åŠ¨â€</strong>ã€‚</p>
<p>æŠ“ä½äº†è¿™ä¸¤æ¡å¤§é±¼ï¼Œé¢„æµ‹çš„å‡†ç¡®åº¦é€šå¸¸èƒ½è¾¾åˆ°80%ä»¥ä¸Šã€‚</p>
<p>è‡³äºå¾ªç¯å˜åŠ¨å’Œä¸è§„åˆ™å˜åŠ¨ï¼Œå› ä¸ºå æ¯”å°ä¸”å¤ªå¤æ‚ï¼Œæˆ‘ä»¬å¾€å¾€é€‰æ‹©æˆ˜ç•¥æ€§å¿½ç•¥ã€‚</p>
</blockquote>
<h2 data-id="heading-6">3. æ‰‹æŠŠæ‰‹æ•™ä½ ï¼šç”¨Pythonæ‹†è§£æ—¶é—´åºåˆ—</h2>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨<code>Python</code>ä»£ç æ¨¡æ‹Ÿä¸€ç»„å¥¶èŒ¶åº—çš„é”€å”®æ•°æ®ï¼Œå¹¶æ¼”ç¤ºå¦‚ä½•æŠŠè¿™å››ä¸ªæˆåˆ†â€œæ‹†â€å‡ºæ¥ã€‚</p>
<p>é¦–å…ˆï¼Œæ„é€ â€œè™šå‡â€çš„å¥¶èŒ¶åº—æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># === ç¬¬ä¸€æ­¥ï¼šæ„é€ æ•°æ® ===</span>
<span class="hljs-comment"># å‡è®¾æˆ‘ä»¬æœ‰è¿‡å»3å¹´ï¼ˆ36ä¸ªæœˆï¼‰çš„æœˆåº¦é”€å”®æ•°æ®</span>
dates = pd.date_range(start=<span class="hljs-string">'2021-01-01'</span>, periods=<span class="hljs-number">36</span>, freq=<span class="hljs-string">'ME'</span>)

<span class="hljs-comment"># 1. åˆ¶é€ ã€é•¿æœŸè¶‹åŠ¿ã€‘ï¼šæ¯ä¸ªæœˆé”€é‡åŸºç¡€å¢åŠ  10 æ¯</span>
trend = np.linspace(<span class="hljs-number">100</span>, <span class="hljs-number">460</span>, <span class="hljs-number">36</span>)

<span class="hljs-comment"># 2. åˆ¶é€ ã€å­£èŠ‚å˜åŠ¨ã€‘ï¼šæ¨¡æ‹Ÿæ¯å¹´å¤å¤©é«˜ã€å†¬å¤©ä½ (ç”¨æ­£å¼¦æ³¢æ¨¡æ‹Ÿ)</span>
<span class="hljs-comment"># è¿™é‡Œçš„é€»è¾‘æ˜¯åˆ¶é€ ä¸€ä¸ªå‘¨æœŸæ€§çš„æ³¢æµª</span>
seasonality = <span class="hljs-number">50</span> * np.sin(np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">3</span> * <span class="hljs-number">2</span> * np.pi, <span class="hljs-number">36</span>))

<span class="hljs-comment"># 3. åˆ¶é€ ã€ä¸è§„åˆ™å˜åŠ¨/å™ªéŸ³ã€‘ï¼šéšæœºæ³¢åŠ¨</span>
noise = np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">36</span>)

<span class="hljs-comment"># 4. åˆæˆæ€»é”€é‡</span>
total_sales = trend + seasonality + noise

<span class="hljs-comment"># åˆ›å»º DataFrame</span>
df = pd.DataFrame({<span class="hljs-string">'Date'</span>: dates, <span class="hljs-string">'Sales'</span>: total_sales})
df.set_index(<span class="hljs-string">'Date'</span>, inplace=<span class="hljs-literal">True</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2d39a71777e48d5b1d6870e5ec5b8df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767519008&amp;x-signature=0Up1CFtrG2BldYY9pTVRIf3J8aA%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œä½¿ç”¨ <code>statsmodels</code> åº“è¿›è¡Œåˆ†è§£ï¼Œå®ƒèƒ½å¸®æˆ‘ä»¬ä¸€é”®æ‹†è§£æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> statsmodels.tsa.seasonal <span class="hljs-keyword">import</span> seasonal_decompose

<span class="hljs-comment"># === ç¬¬äºŒæ­¥ï¼šæ•°æ®åˆ†è§£ ===</span>
<span class="hljs-comment"># model='additive' è¡¨ç¤ºåŠ æ³•æ¨¡å‹ï¼ˆé”€é‡ = è¶‹åŠ¿ + å­£èŠ‚ + å™ªéŸ³ï¼‰</span>
<span class="hljs-comment"># å¦‚æœæ³¢åŠ¨å¹…åº¦éšç€è¶‹åŠ¿å˜å¤§è€Œå˜å¤§ï¼Œé€šå¸¸ç”¨ä¹˜æ³•æ¨¡å‹ (multiplicative)</span>
decomposition = seasonal_decompose(df[<span class="hljs-string">'Sales'</span>], model=<span class="hljs-string">'additive'</span>)

<span class="hljs-comment"># === ç¬¬ä¸‰æ­¥ï¼šç»˜å›¾å±•ç¤º ===</span>
fig = decomposition.plot()
fig.set_size_inches(<span class="hljs-number">12</span>, <span class="hljs-number">10</span>) <span class="hljs-comment"># è®¾ç½®ç”»å¸ƒå¤§å°</span>
plt.show()
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0962196639c04f0dbc6f2cd3e9f14dbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767519008&amp;x-signature=9ks1nQe8cXYAYPvmXLnAxHY8%2F78%3D" alt="" loading="lazy"/></p>
<p>ä»ä¸Šé¢å››ä¸ªå­å›¾å¯ä»¥çœ‹å‡ºï¼š</p>
<ol>
<li><strong>Observed (åŸå§‹æ•°æ®)</strong>ï¼šä½ çœ‹åˆ°çš„çœŸå®é”€é‡æ›²çº¿ï¼Œä¸Šè¹¿ä¸‹è·³ã€‚</li>
<li><strong>Trend (è¶‹åŠ¿)</strong>ï¼šä¸€æ¡ç¨³æ­¥å‘ä¸Šçš„ç›´çº¿ã€‚è¿™å‘Šè¯‰è€æ¿ï¼š<em>æ”¾å¿ƒï¼Œè™½ç„¶æ¯ä¸ªæœˆæœ‰æ³¢åŠ¨ï¼Œä½†å’±ä»¬åº—æ•´ä½“æ˜¯è¶Šåšè¶Šå¥½çš„ï¼</em></li>
<li><strong>Seasonal (å­£èŠ‚æ€§)</strong>ï¼šéå¸¸æœ‰è§„å¾‹çš„æ³¢æµªçº¿ã€‚è¿™å‘Šè¯‰åº—é•¿ï¼š<em>æ¯å¹´6-8æœˆè¦å¤šå¤‡è´§ï¼Œ12-1æœˆå¯ä»¥å®‰æ’å‘˜å·¥è½®ä¼‘ã€‚</em></li>
<li><strong>Resid (æ®‹å·®/ä¸è§„åˆ™é¡¹)</strong>ï¼šå›´ç»•0ä¸Šä¸‹è·³åŠ¨çš„æ‚ä¹±ç‚¹ã€‚è¿™æ˜¯æˆ‘ä»¬æ— æ³•é¢„æµ‹çš„éšæœºäº‹ä»¶ã€‚</li>
</ol>
<h2 data-id="heading-7">4. åˆ†æå¸ˆçš„å†…åŠŸï¼šä¸ä»…ä»…æ˜¯ä»£ç </h2>
<p>å­¦ä¼šäº†ä¸Šé¢çš„ä»£ç ï¼Œä½ å·²ç»å…¥é—¨äº†ã€‚ä½†ä½œä¸ºè¿‡æ¥äººï¼Œæˆ‘æƒ³å‘Šè¯‰ä½ ï¼Œå·¥å…·å’Œç®—æ³•è™½ç„¶å±‚å‡ºä¸ç©·ï¼Œä½†<strong>åˆ†ææ€è·¯</strong>æ‰æ˜¯ä¸‡å˜ä¸ç¦»å…¶å®—çš„ã€‚</p>
<p>é¦–å…ˆï¼Œå…³æ³¨<strong>æ•°æ®çš„å¹³ç¨³æ€§</strong>ï¼Œè¿™æ˜¯æ—¶é—´åºåˆ—åˆ†æçš„é—¨æ§›ã€‚</p>
<p>ç®€å•è¯´ï¼Œå¤§éƒ¨åˆ†å¤æ‚çš„ç»Ÿè®¡æ¨¡å‹ï¼ˆå¦‚ARIMAï¼‰éƒ½å‡è®¾æ•°æ®çš„æ€§è´¨ï¼ˆå‡å€¼ã€æ–¹å·®ï¼‰ä¸éšæ—¶é—´å˜åŒ–ã€‚</p>
<p>ç„¶è€Œç°å®æ•°æ®ï¼ˆå¦‚è‚¡ä»·ã€é”€é‡ï¼‰å¾€å¾€æ˜¯ä¸å¹³ç¨³çš„ï¼ˆæœ‰ä¸Šæ¶¨è¶‹åŠ¿ï¼‰ï¼Œå› æ­¤å¦‚æœä½ å‘ç°æ•°æ®ä¸€ç›´åœ¨æ¶¨ï¼Œå¯ä»¥è¯•ç€åš<strong>å·®åˆ†</strong>ï¼ˆç”¨ä»Šå¤©çš„æ•°å‡å»æ˜¨å¤©çš„æ•°ï¼‰ã€‚</p>
<p><strong>å·®åˆ†</strong>åçš„æ•°æ®å¾€å¾€å°±å¹³ç¨³äº†ï¼Œæ›´å®¹æ˜“æ”¾å…¥æ¨¡å‹å»è®­ç»ƒã€‚</p>
<p>å…¶æ¬¡ï¼Œç»“åˆ<strong>ä¸šåŠ¡åœºæ™¯</strong>ï¼Œä¸è¦æ­»è®°ç¡¬èƒŒæ¨¡å‹ï¼Œè¿˜è¦çœ‹åœºæ™¯ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ol>
<li><strong>åœºæ™¯Aï¼šç”µå•†å¤§ä¿ƒé¢„æµ‹ï¼ˆåŒ11ï¼‰</strong>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæœ‰æå¼ºçš„å­£èŠ‚æ€§ï¼ˆæ¯å¹´11æœˆæš´æ¶¨ï¼‰ã€‚</li>
<li><strong>ç­–ç•¥</strong>ï¼šé‡ç‚¹åˆ†æ<strong>å­£èŠ‚å˜åŠ¨</strong>ã€‚å¦‚æœåªçœ‹è¶‹åŠ¿ï¼Œä½ ä¼šè¢«åŒ11çš„æ•°æ®å“æ­»ï¼Œæˆ–è€…åœ¨åŒ11å¤‡è´§ä¸è¶³ã€‚</li>
<li><strong>çƒ­ç‚¹å…³è”</strong>ï¼šå°±åƒåˆ†æâ€œæ·„åšçƒ§çƒ¤â€æˆ–â€œå“ˆå°”æ»¨æ—…æ¸¸â€ï¼Œå¿…é¡»è€ƒè™‘èŠ‚å‡æ—¥è¿™ä¸ªå¼ºå­£èŠ‚å› å­ã€‚</li>
</ul>
</li>
<li><strong>åœºæ™¯Bï¼šè‚¡ç¥¨ä»·æ ¼é¢„æµ‹</strong>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸è§„åˆ™å˜åŠ¨ï¼ˆå™ªéŸ³ï¼‰æå¤§ï¼Œç”šè‡³å™ªéŸ³æ©ç›–äº†è¶‹åŠ¿ã€‚</li>
<li><strong>ç­–ç•¥</strong>ï¼šè¿™ç§æ—¶å€™ï¼Œç®€å•çš„åˆ†è§£æ¨¡å‹å¾€å¾€å¤±æ•ˆã€‚éœ€è¦å¼•å…¥æ›´å¤šå¤–éƒ¨å˜é‡ï¼ˆæ–°é—»ã€æ”¿ç­–ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨æ›´é«˜çº§çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</li>
</ul>
</li>
<li><strong>åœºæ™¯Cï¼šæœåŠ¡å™¨æµé‡ç›‘æ§</strong>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šç™½å¤©é«˜ã€æ·±å¤œä½ï¼Œå‘¨æœ«ä½ã€å·¥ä½œæ—¥é«˜ã€‚</li>
<li><strong>ç­–ç•¥</strong>ï¼šè¿™æ˜¯æœ€æ ‡å‡†çš„å‘¨æœŸæ€§æ•°æ®ï¼Œéå¸¸é€‚åˆç”¨æ¥åšå¼‚å¸¸æ£€æµ‹ï¼ˆæ¯”å¦‚æŸå¤©æ·±å¤œæµé‡çªç„¶æš´æ¶¨ï¼Œè‚¯å®šæ˜¯æœ‰é»‘å®¢æ”»å‡»æˆ–ç³»ç»ŸBugï¼Œå› ä¸ºè¿™è¿èƒŒäº†å­£èŠ‚æ€§è§„å¾‹ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-8">5. æ€»ç»“ä¸å»ºè®®</h2>
<p><strong>æ—¶é—´åºåˆ—åˆ†æ</strong>å¹¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆç¥ç§˜ã€‚å®ƒçš„æœ¬è´¨å°±æ˜¯ï¼š<strong>æ‰¿è®¤å†å²ä¼šé‡æ¼”ï¼Œä½†ä¹Ÿæ¥çº³æœªæ¥çš„ä¸ç¡®å®šæ€§ã€‚</strong></p>
<p>å¯¹äºåˆšå…¥è¡Œçš„æœ‹å‹ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š</p>
<ol>
<li><strong>ç†è§£å››å¤§æˆåˆ†</strong>ï¼ˆè¶‹åŠ¿ã€å­£èŠ‚ã€å¾ªç¯ã€å™ªéŸ³ï¼‰æ˜¯åŸºç¡€ä¸­çš„åŸºç¡€ã€‚</li>
<li><strong>æŠ“ä½ä¸»è¦çŸ›ç›¾</strong>ï¼šåœ¨åšé¢„æµ‹æ—¶ï¼Œä¼˜å…ˆæå®šè¶‹åŠ¿å’Œå­£èŠ‚æ€§ã€‚</li>
<li><strong>å¤šåŠ¨æ‰‹å°è¯•</strong>ï¼šæ¯”å¦‚æŠŠä¸Šé¢çš„<code>Python</code>ä»£ç è·‘ä¸€éï¼Œå°è¯•ä¿®æ”¹ä¸€ä¸‹æ•°æ®ï¼Œçœ‹çœ‹ç»“æœæœ‰ä»€ä¹ˆå˜åŒ–ã€‚</li>
</ol>
<p>æœªæ¥çš„åˆ†ææ–¹æ³•è™½ç„¶ä¼šè¶Šæ¥è¶Šå¤šï¼ŒAIä¹Ÿä¼šè¶Šæ¥è¶Šå¼ºï¼Œä½†è¿™ç§ <strong>â€œé€è¿‡ç°è±¡ï¼ˆåŸå§‹æ•°æ®ï¼‰çœ‹æœ¬è´¨ï¼ˆè¶‹åŠ¿ä¸è§„å¾‹ï¼‰â€</strong> çš„åˆ†ææ€ç»´ï¼Œå°†æ˜¯æˆ‘ä»¬èŒä¸šç”Ÿæ¶¯ä¸­æ°¸æ’ä¸å˜çš„å®è´µè´¢å¯Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº Nuxt 4 + Strapi 5 æ„å»ºé«˜æ€§èƒ½ AI å¯¼èˆªç«™]]></title>    <link>https://juejin.cn/post/7588355695100690441</link>    <guid>https://juejin.cn/post/7588355695100690441</guid>    <pubDate>2025-12-28T08:07:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588355695100690441" data-draft-id="7588109656041685038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº Nuxt 4 + Strapi 5 æ„å»ºé«˜æ€§èƒ½ AI å¯¼èˆªç«™"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T08:07:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŸ¥èˆªé©¿ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/4125023356335576"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº Nuxt 4 + Strapi 5 æ„å»ºé«˜æ€§èƒ½ AI å¯¼èˆªç«™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023356335576/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŸ¥èˆªé©¿ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:07:31.000Z" title="Sun Dec 28 2025 08:07:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨ AI å·¥å…·çˆ†å‘çš„ä»Šå¤©ï¼Œå¦‚ä½•å¿«é€Ÿæ„å»ºä¸€ä¸ªæ—¢å…·å¤‡å†…å®¹æ·±åº¦ï¼ˆCMS ç®¡ç†ï¼‰ï¼Œåˆæœ‰æè‡´äº¤äº’ä½“éªŒï¼ˆSSR + ç°ä»£åŒ– UIï¼‰çš„å¯¼èˆªå¹³å°ï¼Ÿæœ¬æ–‡å°†å¤ç›˜ <strong>Creator AI Hub</strong> çš„ä»é›¶å¼€å‘å†ç¨‹ï¼Œæ·±åº¦è§£æ <strong>Monorepo</strong> æ¶æ„è®¾è®¡ã€<strong>Strapi v5</strong> æ— å¤´ CMS çš„çµæ´»åº”ç”¨ä»¥åŠ <strong>Nuxt 4</strong> çš„å…¨æ ˆå®è·µã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸš€ å¼•è¨€ï¼šä¸ºä»€ä¹ˆé€‰æ‹©è¿™å¥—æŠ€æœ¯æ ˆï¼Ÿ</h2>
<p>åœ¨æ„å»º <strong>Creator AI Hub</strong> æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´å‡ ä¸ªæ ¸å¿ƒéœ€æ±‚ï¼š</p>
<ol>
<li><strong>å†…å®¹ä¸ºç‹</strong>ï¼šéœ€è¦é¢‘ç¹æ›´æ–° AI å·¥å…·ã€è§£å†³æ–¹æ¡ˆå’Œ SOPï¼Œä¸”å†…å®¹ç»“æ„å¤æ‚ï¼ˆåŒ…å«ä¼šå‘˜ä¸“å±å­—æ®µï¼‰ã€‚</li>
<li><strong>SEO å‹å¥½</strong>ï¼šä½œä¸ºå¯¼èˆªç«™ï¼Œæœç´¢å¼•æ“ä¼˜åŒ–è‡³å…³é‡è¦ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ (SSR) æ˜¯å¿…é€‰é¡¹ã€‚</li>
<li><strong>å¼€å‘æ•ˆç‡</strong>ï¼šå‰åç«¯éœ€ç´§å¯†é…åˆï¼Œä½†åˆè¦ä¿æŒç‹¬ç«‹éƒ¨ç½²å’Œç»´æŠ¤çš„çµæ´»æ€§ã€‚</li>
</ol>
<p>åŸºäºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨äº† <strong>TurboRepo + Nuxt 4 + Strapi 5</strong> çš„é»„é‡‘ç»„åˆã€‚è¿™ä¸ä»…æ˜¯ä¸€æ¬¡æŠ€æœ¯é€‰å‹çš„èƒœåˆ©ï¼Œæ›´æ˜¯å¯¹ç°ä»£ Web å¼€å‘æœ€ä½³å®è·µçš„ä¸€æ¬¡å®Œæ•´æ¢ç´¢ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad20acbea7614b6c9f7c984e9da30b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=8FpGGkkgiW3VjNoyKEtowMGBlVk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83382dedc6d7446c944cb101d4ff0b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=pZA%2BLGQE7KXTm87l3vgElg5wKXI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">1. ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ (System Architecture)</h2>
<p>æœ¬é¡¹ç›®é‡‡ç”¨ <strong>Monorepo</strong> ç­–ç•¥ç®¡ç†å…¨æ ˆä»£ç ï¼ŒåŸºäº <strong>TurboRepo</strong> æ„å»ºé«˜æ•ˆçš„å·¥ä½œæµã€‚å‰ç«¯é‡‡ç”¨ <strong>Nuxt 4</strong> è¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ (SSR)ï¼Œåç«¯ä½¿ç”¨ <strong>Strapi v5</strong> ä½œä¸º Headless CMS æä¾› RESTful APIï¼Œæ•°æ®å­˜å‚¨åœ¨ <strong>MySQL</strong> ä¸­ã€‚</p>
<h3 data-id="heading-2">1.1 æŠ€æœ¯æ ˆ (Tech Stack)</h3>





















































<table><thead><tr><th align="left">é¢†åŸŸ</th><th align="left">æŠ€æœ¯é€‰å‹</th><th align="left">ç‰ˆæœ¬</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong>Monorepo</strong></td><td align="left">TurboRepo</td><td align="left"><code>^2.7.2</code></td><td align="left">é«˜æ€§èƒ½æ„å»ºç³»ç»Ÿï¼Œç»Ÿä¸€ç®¡ç† apps</td></tr><tr><td align="left"><strong>Package Manager</strong></td><td align="left">pnpm</td><td align="left"><code>9.0.0</code></td><td align="left">é«˜æ•ˆçš„ç£ç›˜ç©ºé—´åˆ©ç”¨ä¸ä¾èµ–ç®¡ç†</td></tr><tr><td align="left"><strong>Frontend</strong></td><td align="left">Nuxt</td><td align="left"><code>^4.2.2</code></td><td align="left">åŸºäº Vue 3 çš„å…¨æ ˆæ¡†æ¶ï¼Œè´Ÿè´£ SSR ä¸äº¤äº’</td></tr><tr><td align="left"><strong>Styling</strong></td><td align="left">Tailwind CSS</td><td align="left"><code>^3.4</code></td><td align="left">åŸå­åŒ– CSS æ¡†æ¶ï¼Œé€šè¿‡ <code>@nuxtjs/tailwindcss</code> é›†æˆ</td></tr><tr><td align="left"><strong>Backend</strong></td><td align="left">Strapi</td><td align="left"><code>5.33.0</code></td><td align="left">çµæ´»çš„ Headless CMSï¼Œæä¾› API æœåŠ¡</td></tr><tr><td align="left"><strong>Database</strong></td><td align="left">MySQL</td><td align="left"><code>8.0</code></td><td align="left">å…³ç³»å‹æ•°æ®åº“ï¼Œé€šè¿‡ <code>mysql2</code> é©±åŠ¨è¿æ¥</td></tr><tr><td align="left"><strong>Docs</strong></td><td align="left">VitePress</td><td align="left">Latest</td><td align="left">é™æ€æ–‡æ¡£ç”Ÿæˆå™¨</td></tr></tbody></table>
<h3 data-id="heading-3">1.2 ç›®å½•ç»“æ„ (Directory Structure)</h3>
<pre><code class="hljs language-bash" lang="bash">.
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api/          <span class="hljs-comment"># Strapi åç«¯åº”ç”¨ (Port: 1337)</span>
â”‚   â”‚   â”œâ”€â”€ src/api/  <span class="hljs-comment"># ä¸šåŠ¡é€»è¾‘ (Content Types, Controllers, Services)</span>
â”‚   â”‚   â””â”€â”€ config/   <span class="hljs-comment"># æ•°æ®åº“ä¸æ’ä»¶é…ç½®</span>
â”‚   â”œâ”€â”€ web/          <span class="hljs-comment"># Nuxt å‰ç«¯åº”ç”¨ (Port: 3000)</span>
â”‚   â”‚   â”œâ”€â”€ components/ <span class="hljs-comment"># Vue ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ composables/<span class="hljs-comment"># ç»„åˆå¼å‡½æ•° (Data Fetching, State)</span>
â”‚   â”‚   â””â”€â”€ pages/      <span class="hljs-comment"># è·¯ç”±é¡µé¢</span>
â”‚   â””â”€â”€ docs/         <span class="hljs-comment"># é¡¹ç›®æ–‡æ¡£ (VitePress)</span>
â”œâ”€â”€ package.json      <span class="hljs-comment"># Workspace æ ¹é…ç½®</span>
â”œâ”€â”€ turbo.json        <span class="hljs-comment"># Turbo æ„å»ºç®¡çº¿é…ç½®</span>
â””â”€â”€ pnpm-workspace.yaml
</code></pre>
<h3 data-id="heading-4">2.3 ä¼šå‘˜æƒé™è®¾è®¡ (Membership System)</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09e8a9583a6e42dab846929ac0ee9c87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=UfI77CYFkvAYswzzPpQNZ9wmP9Q%3D" alt="image.png" loading="lazy"/>
ä¸ºäº†åŒºåˆ†æ™®é€šç”¨æˆ·ä¸ä»˜è´¹ä¼šå‘˜ï¼Œæˆ‘ä»¬åœ¨ Strapi åç«¯æ‰©å±•äº† <code>Membership</code> å’Œ <code>Order</code> æ¨¡å‹ã€‚</p>
<h4 data-id="heading-5">æ ¸å¿ƒé€»è¾‘</h4>
<ol>
<li><strong>ç”¨æˆ·æ³¨å†Œ</strong>: é»˜è®¤åˆ†é…ä¸º <code>Authenticated</code> è§’è‰²ï¼Œæ— ä¼šå‘˜æƒç›Šã€‚</li>
<li><strong>è®¢é˜…æ”¯ä»˜</strong>: ç”¨æˆ·è´­ä¹°ä¼šå‘˜ï¼ˆæœˆ/å¹´/ç»ˆèº«ï¼‰åï¼Œåç«¯æ›´æ–° <code>Membership</code> è¡¨ï¼Œè®°å½•è¿‡æœŸæ—¶é—´ã€‚</li>
<li><strong>æƒé™æ ¡éªŒ</strong>: åœ¨è·å– Tool è¯¦æƒ…æ—¶ï¼ŒController ä¼šæ ¡éªŒå½“å‰ç”¨æˆ·çš„ Membership çŠ¶æ€ã€‚å¦‚æœè¿‡æœŸæˆ–æœªè®¢é˜…ï¼Œåˆ™<strong>å‰”é™¤</strong> <code>tool.member</code> å­—æ®µï¼ˆåŒ…å« SOP å’Œæ•æ„Ÿæ•°æ®ï¼‰ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/api/src/api/tool/controllers/tool.ts (ä¼ªä»£ç ç¤ºä¾‹)</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(<span class="hljs-params">ctx</span>) {
  <span class="hljs-keyword">const</span> { id } = ctx.<span class="hljs-property">params</span>;
  <span class="hljs-keyword">const</span> user = ctx.<span class="hljs-property">state</span>.<span class="hljs-property">user</span>;
  
  <span class="hljs-comment">// 1. è·å–å·¥å…·å®Œæ•´æ•°æ®</span>
  <span class="hljs-keyword">const</span> entity = <span class="hljs-keyword">await</span> strapi.<span class="hljs-title function_">service</span>(<span class="hljs-string">'api::tool.tool'</span>).<span class="hljs-title function_">findOne</span>(id, { <span class="hljs-attr">populate</span>: [<span class="hljs-string">'member'</span>] });
  
  <span class="hljs-comment">// 2. æ£€æŸ¥ç”¨æˆ·ä¼šå‘˜çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> isMember = <span class="hljs-keyword">await</span> strapi.<span class="hljs-title function_">service</span>(<span class="hljs-string">'api::membership.membership'</span>).<span class="hljs-title function_">checkStatus</span>(user?.<span class="hljs-property">id</span>);
  
  <span class="hljs-comment">// 3. æ•°æ®æ¸…æ´—ï¼šéä¼šå‘˜ç§»é™¤ member å­—æ®µ</span>
  <span class="hljs-keyword">if</span> (!isMember &amp;&amp; entity.<span class="hljs-property">member</span>) {
    <span class="hljs-keyword">delete</span> entity.<span class="hljs-property">member</span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">transformResponse</span>(entity);
}
</code></pre>
<hr/>
<h2 data-id="heading-6">3. åç«¯è®¾è®¡ (Backend Design) - Strapi v5</h2>
<p>åç«¯æ ¸å¿ƒèŒè´£æ˜¯æä¾›ç»“æ„åŒ–çš„å†…å®¹ç®¡ç†ä¸ API æœåŠ¡ã€‚</p>
<h3 data-id="heading-7">2.1 æ•°æ®æ¨¡å‹ (Content Modeling)</h3>
<p>æˆ‘ä»¬å®šä¹‰äº†å¤šç»´åº¦çš„å†…å®¹ç±»å‹ (Content Types) æ¥æ”¯æ’‘ä¸šåŠ¡ï¼š</p>
<ul>
<li><strong>Collection Types</strong>:
<ul>
<li><code>Tool</code>: AI å·¥å…·æ ¸å¿ƒæ•°æ®ï¼ˆåç§°ã€æè¿°ã€URLã€Logoï¼‰ã€‚</li>
<li><code>Category</code>: å·¥å…·åˆ†ç±»ã€‚</li>
<li><code>Solution</code>: è§£å†³æ–¹æ¡ˆæ–‡ç« ã€‚</li>
</ul>
</li>
<li><strong>Single Types</strong>:
<ul>
<li><code>Global</code>: å…¨å±€é…ç½®ï¼ˆç«™ç‚¹æ ‡é¢˜ã€SEO ä¿¡æ¯ã€ç¤¾ç¾¤äºŒç»´ç ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>Components</strong>:
<ul>
<li><code>tool.member</code>: ä»˜è´¹ä¼šå‘˜ä¸“å±å­—æ®µï¼ˆSOPã€é¿å‘æŒ‡å—ï¼‰ï¼Œåˆ©ç”¨ Strapi ç»„ä»¶åŠŸèƒ½å®ç°çµæ´»çš„æ•°æ®ç»“æ„ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">Schema ç¤ºä¾‹ (<code>Global</code> Config)</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// apps/api/src/api/global/content-types/global/schema.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"kind"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"singleType"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"collectionName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"globals"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"info"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"singularName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"global"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pluralName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"globals"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"displayName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Global"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"attributes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"communityGroupTitle"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŠ å…¥å®˜æ–¹äº¤æµç¾¤"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"communityGroupQrCode"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"media"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"multiple"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"allowedTypes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"images"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-9">2.2 API æ‰©å±•ä¸æƒé™</h3>
<ul>
<li><strong>æƒé™æ§åˆ¶</strong>: ä½¿ç”¨ <code>@strapi/plugin-users-permissions</code> ç®¡ç† Public ä¸ Authenticated è§’è‰²æƒé™ã€‚</li>
<li><strong>è‡ªå®šä¹‰é€»è¾‘</strong>: é€šè¿‡è¦†å†™ Core Controllers æˆ–å¢åŠ  Middleware å®ç°æ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼ˆå¦‚ï¼šéä¼šå‘˜è¯·æ±‚ Tool è¯¦æƒ…æ—¶è¿‡æ»¤æ‰ <code>tool.member</code> å­—æ®µï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">3. å‰ç«¯è®¾è®¡ (Frontend Design) - Nuxt 4</h2>
<p>å‰ç«¯åº”ç”¨ä¸“æ³¨äºé«˜æ€§èƒ½æ¸²æŸ“ä¸æè‡´çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-11">3.1 æ ¸å¿ƒç‰¹æ€§å®ç°</h3>
<ul>
<li><strong>æœåŠ¡ç«¯æ¸²æŸ“ (SSR)</strong>: æå‡ SEO è¡¨ç°ï¼Œé¦–å±åŠ è½½é€Ÿåº¦å¿«ã€‚</li>
<li><strong>ç»„åˆå¼å¼€å‘</strong>: åˆ©ç”¨ Nuxt Composables å°è£…ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<h3 data-id="heading-12">3.2 å…³é”®ä»£ç è§£æ</h3>
<h4 data-id="heading-13">ğŸ” èº«ä»½è®¤è¯ä¸çŠ¶æ€ç®¡ç† (<code>useAuth.ts</code>)</h4>
<p>ä¸ºäº†ä¿è¯ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬å°è£…äº†ç»Ÿä¸€çš„è®¤è¯é€»è¾‘ï¼Œæ”¯æŒæ³¨å†Œã€ç™»å½•åŠ JWT Token æŒä¹…åŒ–ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/web/composables/useAuth.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useAuth</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> user = useState&lt;<span class="hljs-title class_">User</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-string">'user'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">useCookie</span>(<span class="hljs-string">'auth_token'</span>)
  <span class="hljs-keyword">const</span> { $strapi } = <span class="hljs-title function_">useNuxtApp</span>()

  <span class="hljs-comment">// ç™»å½•é€»è¾‘</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">credentials: LoginInput</span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">user</span>: userData, jwt } = <span class="hljs-keyword">await</span> $strapi.<span class="hljs-title function_">login</span>(credentials)
      token.<span class="hljs-property">value</span> = jwt
      user.<span class="hljs-property">value</span> = userData
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }
  
  <span class="hljs-comment">// æ³¨å†Œé€»è¾‘ (è‡ªåŠ¨å…³è”é»˜è®¤è§’è‰²)</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">register</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">input: RegisterInput</span>) =&gt; {
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">user</span>: newUser, jwt } = <span class="hljs-keyword">await</span> $strapi.<span class="hljs-title function_">register</span>(input)
    token.<span class="hljs-property">value</span> = jwt
    user.<span class="hljs-property">value</span> = newUser
  }

  <span class="hljs-keyword">return</span> { user, login, register }
}
</code></pre>
<h4 data-id="heading-14">å…¨å±€é…ç½®è·å– (<code>useGlobal.ts</code>)</h4>
<p>ä¸ºäº†å®ç°é…ç½®åŠ¨æ€åŒ–ï¼Œæˆ‘ä»¬å°è£…äº† <code>useGlobalConfig</code>ï¼Œå®ƒåœ¨åº”ç”¨åˆå§‹åŒ–æ—¶ä» Strapi è·å–é…ç½®ï¼Œå¹¶é€‚é… Strapi v5 çš„å“åº”ç»“æ„ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/web/composables/useGlobal.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGlobalConfig</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useState</span>(<span class="hljs-string">'global-config'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>)
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchGlobalConfig</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> config = <span class="hljs-title function_">useGlobalConfig</span>()
  <span class="hljs-keyword">const</span> { find } = <span class="hljs-title function_">useStrapi</span>() <span class="hljs-comment">// å°è£…çš„ Strapi Fetcher</span>
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// é€‚é… Strapi v5 API å“åº”ç»“æ„ (dataunwrap)</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">find</span>(<span class="hljs-string">'global'</span>, {
      <span class="hljs-attr">populate</span>: <span class="hljs-string">'*'</span> <span class="hljs-comment">// è¿è¡¨æŸ¥è¯¢æ‰€æœ‰å…³è”å­—æ®µ (å¦‚å›¾ç‰‡)</span>
    })
    config.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span> || {}
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to fetch global config:'</span>, error)
  }
}
</code></pre>
<h4 data-id="heading-15">åŠ¨æ€ç»„ä»¶æ¸²æŸ“ (<code>profile.vue</code>)</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d23aa9c95b984035ab6bdbb8a1deaebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=g7HhXumZKVGOwGSb2KsCURUpxtY%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ä¸ªäººä¸­å¿ƒé¡µï¼Œæˆ‘ä»¬ç›´æ¥ç»‘å®šä»åç«¯è·å–çš„é…ç½®æ•°æ®ï¼Œå®ç°è¿è¥å†…å®¹çš„å®æ—¶æ›´æ–°ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- apps/web/pages/profile.vue --&gt;
&lt;script setup lang="ts"&gt;
const globalConfig = useGlobalConfig()

// å¤„ç†å›¾ç‰‡ URL çš„è¾…åŠ©å‡½æ•°
const getQrCodeUrl = (qrCodeObj: any) =&gt; {
  // å…¼å®¹ Strapi ä¸Šä¼ æ’ä»¶çš„ URL æ ¼å¼
  return qrCodeObj?.url ? `${useStrapiUrl()}${qrCodeObj.url}` : '/default-qr.png'
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="community-card"&gt;
    &lt;h3&gt;{{ globalConfig?.communityGroupTitle }}&lt;/h3&gt;
    &lt;img 
      :src="getQrCodeUrl(globalConfig?.communityGroupQrCode)" 
      alt="Community QR" 
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<hr/>
<h2 data-id="heading-16">5. éƒ¨ç½²ä¸è¿ç»´ (Deployment &amp; DevOps)</h2>
<h3 data-id="heading-17">4.1 ç¯å¢ƒå˜é‡ç®¡ç†</h3>
<p>é¡¹ç›®ä½¿ç”¨ <code>.env</code> æ–‡ä»¶ç®¡ç†æ•æ„Ÿä¿¡æ¯ï¼ŒåŒºåˆ†å¼€å‘ä¸ç”Ÿäº§ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># .env (Root)</span>
<span class="hljs-attr">STRAPI_URL</span>=http://localhost:<span class="hljs-number">1337</span>
<span class="hljs-attr">NUXT_PUBLIC_API_URL</span>=http://localhost:<span class="hljs-number">1337</span>/api
<span class="hljs-attr">DATABASE_HOST</span>=localhost
<span class="hljs-attr">DATABASE_PORT</span>=<span class="hljs-number">3306</span>
</code></pre>
<h3 data-id="heading-18">4.2 æ„å»ºæµç¨‹</h3>
<p>åˆ©ç”¨ TurboRepo çš„ç¼“å­˜æœºåˆ¶åŠ é€Ÿæ„å»ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¹¶è¡Œæ„å»ºæ‰€æœ‰åº”ç”¨</span>
pnpm build

<span class="hljs-comment"># Turbo æ™ºèƒ½ç¼“å­˜ç¤ºä¾‹</span>
<span class="hljs-comment"># apps/web: cache miss, executing 345ms</span>
<span class="hljs-comment"># apps/api: cache hit, replaying output 50ms</span>
</code></pre>
<h3 data-id="heading-19">4.3 ç”Ÿäº§ç¯å¢ƒå»ºè®®</h3>
<ul>
<li><strong>Process Manager</strong>: ä½¿ç”¨ PM2 ç®¡ç† Node.js è¿›ç¨‹ã€‚</li>
<li><strong>Reverse Proxy</strong>: Nginx åå‘ä»£ç†ï¼Œé…ç½® SSL è¯ä¹¦ä¸ Gzip å‹ç¼©ã€‚</li>
<li><strong>Storage</strong>: Strapi ä¸Šä¼ æ–‡ä»¶å»ºè®®å¯¹æ¥ AWS S3 æˆ–é˜¿é‡Œäº‘ OSS å¯¹è±¡å­˜å‚¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-20">6. å¼€å‘æ•ˆèƒ½ä¸ AI èµ‹èƒ½ (AI-Driven Development)</h2>
<p><strong>Creator AI Hub</strong> çš„è¯ç”Ÿæœ¬èº«å°±æ˜¯ AI èµ‹èƒ½å¼€å‘çš„æœ€ä½³å®è·µã€‚</p>
<blockquote>
<p><strong>â±ï¸ æƒŠäººçš„é€Ÿåº¦ï¼šä» 0 åˆ° 1ï¼Œä»…ç”¨ 48 å°æ—¶</strong></p>
</blockquote>
<p>å¦‚æœä¸å€ŸåŠ© AI å·¥å…·ï¼Œè¿™æ ·ä¸€ä¸ªåŒ…å«å…¨æ ˆæ¶æ„ã€CMS åå°ã€ä¼šå‘˜ç³»ç»Ÿå’Œ SSR å‰ç«¯çš„é¡¹ç›®ï¼Œé€šå¸¸éœ€è¦ 2-3 å‘¨çš„å¼€å‘å‘¨æœŸã€‚ä½†åœ¨ AI è¾…åŠ©ä¸‹ï¼Œæˆ‘ä»¬å®ç°äº† <strong>10 å€ææ•ˆ</strong>ã€‚</p>
<h3 data-id="heading-21">6.1 AI è¾…åŠ©å…¨æµç¨‹</h3>
<ol>
<li><strong>æ¶æ„è®¾è®¡</strong>: AI ååŠ©é€‰å‹ TurboRepo + Nuxt 4ï¼Œå¹¶ç”Ÿæˆäº†åˆå§‹çš„ Monorepo ç›®å½•ç»“æ„ã€‚</li>
<li><strong>Schema ç”Ÿæˆ</strong>: Strapi çš„å¤æ‚ Content Typesï¼ˆå¦‚åµŒå¥—ç»„ä»¶ã€å…³è”å…³ç³»ï¼‰JSON é…ç½®ï¼Œç”± AI ä¸€é”®ç”Ÿæˆï¼ŒèŠ‚çœäº†å¤§é‡æ‰‹åŠ¨é…ç½®æ—¶é—´ã€‚</li>
<li><strong>ä»£ç ç¼–å†™</strong>:
<ul>
<li>å‰ç«¯ <code>useAuth</code>ã€<code>useGlobal</code> ç­‰æ ¸å¿ƒ Composable é€»è¾‘ç”± AI å¿«é€Ÿå®ç°ã€‚</li>
<li>Tailwind CSS çš„å“åº”å¼å¸ƒå±€å’Œå¾®äº¤äº’æ•ˆæœï¼Œé€šè¿‡ AI æç¤ºè¯å¿«é€Ÿè°ƒæ•´ã€‚</li>
</ul>
</li>
<li><strong>æ–‡æ¡ˆä¸æ–‡æ¡£</strong>: é¡¹ç›®æ–‡æ¡£ï¼ˆåŒ…æ‹¬æœ¬æ–‡ï¼‰ã€SEO æè¿°ã€åˆå§‹æµ‹è¯•æ•°æ®ï¼Œå‡ç”± AI è¾…åŠ©æ’°å†™ã€‚</li>
</ol>
<h2 data-id="heading-22">7. æ¶æ„æ‰©å±•æ€§ï¼šä»å¯¼èˆªç«™åˆ°æ— é™å¯èƒ½ (Scalability)</h2>
<p>Creator AI Hub çš„è¿™å¥— <strong>"Monorepo + Headless CMS + SSR Frontend"</strong> æ¶æ„ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé€šç”¨çš„<strong>å†…å®¹å˜ç°ä¸çŸ¥è¯†ä»˜è´¹åŸºåº§</strong>ã€‚å®ƒä¸ä»…é™äºå¯¼èˆªç«™ï¼Œåªéœ€å¾®è°ƒæ•°æ®æ¨¡å‹ï¼Œå³å¯å¿«é€Ÿè£‚å˜å‡ºå¤šç§åº”ç”¨ï¼š</p>
<h3 data-id="heading-23">7.1 ğŸ’¡ å˜ä½“ä¸€ï¼šä»˜è´¹è¯¾ç¨‹å¹³å°</h3>
<ul>
<li><strong>æ”¹åŠ¨ç‚¹</strong>: å°† <code>Tool</code> æ¨¡å‹æ”¹ä¸º <code>Course</code>ï¼ˆè¯¾ç¨‹ï¼‰ï¼Œ<code>tool.member</code> æ”¹ä¸º <code>CourseChapter</code>ï¼ˆè¯¾ç¨‹ç« èŠ‚ï¼‰ã€‚</li>
<li><strong>åŠŸèƒ½å¤ç”¨</strong>: ä¼šå‘˜è®¢é˜…ç³»ç»Ÿã€è®¢å•æ”¯ä»˜ã€CMS ç« èŠ‚ç®¡ç†ã€å‰ç«¯è§†é¢‘æ’­æ”¾é¡µã€‚</li>
</ul>
<h3 data-id="heading-24">7.2 ğŸ›’ å˜ä½“äºŒï¼šè™šæ‹Ÿèµ„æºå•†åŸ</h3>
<ul>
<li><strong>æ”¹åŠ¨ç‚¹</strong>: å°† <code>Category</code> ç»†åŒ–ä¸ºèµ„æºç±»å‹ï¼ˆPPTæ¨¡æ¿/è®¾è®¡ç´ æ/Promptï¼‰ï¼Œå¢åŠ  <code>DownloadLink</code> å­—æ®µã€‚</li>
<li><strong>åŠŸèƒ½å¤ç”¨</strong>: æœç´¢è¿‡æ»¤ã€èµ„æºè¯¦æƒ…é¡µã€ä¸‹è½½æƒé™æ§åˆ¶ï¼ˆä»…ä¼šå‘˜æˆ–å•æ¬¡è´­ä¹°å¯ä¸‹è½½ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-25">7.3 ğŸ¢ å˜ä½“ä¸‰ï¼šä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“</h3>
<ul>
<li><strong>æ”¹åŠ¨ç‚¹</strong>: å¼€å¯ Strapi çš„ SSO å•ç‚¹ç™»å½•ï¼Œå…³é—­å…¬å¼€æ³¨å†Œã€‚</li>
<li><strong>åŠŸèƒ½å¤ç”¨</strong>: æ–‡æ¡£å±‚çº§ç®¡ç†ã€SOP æ ‡å‡†åŒ–æµç¨‹å±•ç¤ºã€å…¨ç«™å…¨æ–‡æ£€ç´¢ã€‚</li>
</ul>
<p>è¿™å¥—æ¶æ„çš„æœ€å¤§ä»·å€¼åœ¨äº**â€œä¸€æ¬¡æ„å»ºï¼Œå¤„å¤„å¤ç”¨â€**ã€‚Monorepo ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ <code>apps/</code> ç›®å½•ä¸‹è½»æ¾æ·»åŠ æ–°çš„å‰ç«¯åº”ç”¨ï¼ˆå¦‚ <code>apps/mobile</code> æˆ– <code>apps/admin-dashboard</code>ï¼‰ï¼Œå…±äº«åŒä¸€å¥—åç«¯ API å’Œ TypeScript ç±»å‹å®šä¹‰ï¼Œæå¤§åœ°é™ä½äº†å¤šä¸šåŠ¡çº¿çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<hr/>
<h3 data-id="heading-26">8. ç»“è¯­</h3>
<p>é€šè¿‡ Nuxt 4 + Strapi 5 çš„é»„é‡‘ç»„åˆï¼Œé…åˆ AI ç»“å¯¹ç¼–ç¨‹æ¨¡å¼ï¼Œæˆ‘ä»¬å¿«é€Ÿæ„å»ºäº†ä¸€ä¸ªæ—¢æœ‰å†…å®¹æ·±åº¦ï¼Œåˆæœ‰è‰¯å¥½äº¤äº’ä½“éªŒçš„ AI å¯¼èˆªå¹³å°ã€‚è¿™ä¸ä»…éªŒè¯äº†æŠ€æœ¯æ ˆçš„å…ˆè¿›æ€§ï¼Œæ›´è¯æ˜äº†åœ¨ AI æ—¶ä»£ï¼Œ<strong>ä¸ªäººçš„å¼€å‘æ½œèƒ½å¯ä»¥è¢«æ— é™æ”¾å¤§</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251222-251226ï¼‰]]></title>    <link>https://juejin.cn/post/7588098335791185920</link>    <guid>https://juejin.cn/post/7588098335791185920</guid>    <pubDate>2025-12-28T08:27:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335791185920" data-draft-id="7588092534162767872" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251222-251226ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T08:27:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/2831954919569245"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯å‘¨AIè®ºæ–‡é€Ÿé€’ï¼ˆ251222-251226ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2831954919569245/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:27:29.000Z" title="Sun Dec 28 2025 08:27:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">DataFlow: An LLM-Driven Framework for Unified Data Preparation and Workflow Automation in the Era of Data-Centric AI</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.16676" target="_blank" title="https://arxiv.org/abs/2512.16676" ref="nofollow noopener noreferrer">DataFlow: é¢å‘ä»¥æ•°æ®ä¸ºä¸­å¿ƒ AI æ—¶ä»£çš„ç»Ÿä¸€æ•°æ®å‡†å¤‡ä¸å·¥ä½œæµè‡ªåŠ¨åŒ– LLM é©±åŠ¨æ¡†æ¶</a></p>
<p>å¤§è¯­è¨€æ¨¡å‹ (LLMs) å¯¹é«˜è´¨é‡æ•°æ®çš„éœ€æ±‚å¿«é€Ÿå¢é•¿ï¼Œè¿™ä½¿å¾—å¯¹å¯æ‰©å±•ã€å¯é ä¸”è¯­ä¹‰ä¸°å¯Œçš„æ•°æ®å‡†å¤‡ç®¡é“çš„éœ€æ±‚å˜å¾—å°¤ä¸ºè¿«åˆ‡ã€‚ç„¶è€Œï¼Œå½“å‰å®è·µä»ä¸»è¦ä¾èµ–ä¸´æ—¶è„šæœ¬å’Œå®šä¹‰æ¾æ•£çš„å·¥ä½œæµï¼Œå®ƒä»¬ç¼ºä¹åŸåˆ™æ€§çš„æŠ½è±¡ï¼Œé˜»ç¢äº†å¯å¤ç°æ€§ï¼Œå¹¶å¯¹æ¨¡å‹åœ¨ç¯ (model-in-the-loop) çš„æ•°æ®ç”Ÿæˆæ”¯æŒæœ‰é™ã€‚ä¸ºåº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºäº† DataFlowï¼Œä¸€ä¸ªç»Ÿä¸€ä¸”å¯æ‰©å±•çš„ LLM é©±åŠ¨æ•°æ®å‡†å¤‡æ¡†æ¶ã€‚DataFlow é‡‡ç”¨ç³»ç»Ÿçº§æŠ½è±¡è®¾è®¡ï¼Œå®ç°äº†æ¨¡å—åŒ–ã€å¯å¤ç”¨å’Œå¯ç»„åˆçš„æ•°æ®è½¬æ¢ï¼Œå¹¶æä¾›äº†ç±»ä¼¼ PyTorch é£æ ¼çš„ç®¡é“æ„å»º APIï¼Œç”¨ä»¥æ„å»ºå¯è°ƒè¯•å’Œå¯ä¼˜åŒ–çš„æ•°æ®æµã€‚è¯¥æ¡†æ¶åŒ…å«è¿‘ 200 ä¸ªå¯å¤ç”¨æ“ä½œç¬¦å’Œå…­ä¸ªé¢†åŸŸé€šç”¨ç®¡é“ï¼Œè¦†ç›–æ–‡æœ¬ã€æ•°å­¦æ¨ç†ã€ä»£ç ã€Text-to-SQLã€æ™ºèƒ½ä½“é©±åŠ¨çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ (Agent RAG) ä»¥åŠå¤§è§„æ¨¡çŸ¥è¯†æå–ã€‚ä¸ºè¿›ä¸€æ­¥æå‡æ˜“ç”¨æ€§ï¼Œæˆ‘ä»¬å¼•å…¥äº† DataFlow-Agentï¼Œå®ƒèƒ½å¤Ÿé€šè¿‡æ“ä½œç¬¦åˆæˆã€ç®¡é“è§„åˆ’å’Œè¿­ä»£éªŒè¯ï¼Œè‡ªåŠ¨å°†è‡ªç„¶è¯­è¨€æè¿°è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„ç®¡é“ã€‚åœ¨å…­ä¸ªä»£è¡¨æ€§ç”¨ä¾‹ä¸­ï¼ŒDataFlow å‡èƒ½ä¸€è‡´åœ°æå‡ä¸‹æ¸¸ LLM æ€§èƒ½ã€‚æˆ‘ä»¬çš„æ•°å­¦ã€ä»£ç å’Œæ–‡æœ¬ç®¡é“æ€§èƒ½è¶…è¶Šäº†ç²¾å¿ƒæ„å»ºçš„äººå·¥æ•°æ®é›†å’Œä¸“é—¨çš„åˆæˆåŸºçº¿ï¼šåœ¨ Text-to-SQL ä»»åŠ¡ä¸Šï¼Œå…¶æ‰§è¡Œå‡†ç¡®ç‡è¾ƒ SynSQL æœ€é«˜æå‡ 3%ï¼›åœ¨ä»£ç åŸºå‡†æµ‹è¯•ä¸Šå¹³å‡æå‡ 7%ï¼›åœ¨ MATHã€GSM8K å’Œ AIME åŸºå‡†ä¸Šå–å¾—äº† 1 åˆ° 3 ä¸ªç™¾åˆ†ç‚¹çš„æ€§èƒ½å¢ç›Šã€‚æ­¤å¤–ï¼Œç”± DataFlow ç”Ÿæˆçš„ç»Ÿä¸€ä¸‡æ ·æœ¬ (10K) æ•°æ®é›†ï¼Œä½¿å¾—åŸºç¡€æ¨¡å‹çš„æ€§èƒ½è¶…è¶Šäº†åœ¨ç™¾ä¸‡çº§ (1M) Infinity-Instruct æ•°æ®ä¸Šè®­ç»ƒçš„åŒç±»æ¨¡å‹ã€‚è¿™äº›ç»“æœè¡¨æ˜ï¼ŒDataFlow ä¸ºå¯é ã€å¯å¤ç°å’Œå¯æ‰©å±•çš„ LLM æ•°æ®å‡†å¤‡æä¾›äº†ä¸€ä¸ªå®ç”¨ä¸”é«˜æ€§èƒ½çš„åº•å±‚æ”¯æŒï¼Œå¹¶ä¸ºæœªæ¥ä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„ AI å‘å±•å¥ å®šäº†ç³»ç»Ÿçº§åŸºç¡€ã€‚</p>
<h2 data-id="heading-1">Probing Scientific General Intelligence of LLMs with Scientist-Aligned Workflows</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.16969" target="_blank" title="https://arxiv.org/abs/2512.16969" ref="nofollow noopener noreferrer">é€šè¿‡ç§‘å­¦å®¶å·¥ä½œæµå¯¹é½è¯„ä¼°å¤§è¯­è¨€æ¨¡å‹çš„ç§‘å­¦é€šç”¨æ™ºèƒ½</a></p>
<p>å°½ç®¡ç§‘å­¦ AI é¢†åŸŸå–å¾—äº†è¿›å±•ï¼Œä½†å…³äºç§‘å­¦é€šç”¨æ™ºèƒ½ (Scientific General Intelligence, SGI) â€”â€” å³è‡ªä¸»æ„æ€ã€æ¢ç´¢å¹¶è·¨ç§‘å­¦é¢†åŸŸè¿›è¡Œæ¨ç†çš„èƒ½åŠ› â€”â€” ä»ç¼ºä¹ä¸€ä¸ªè¿è´¯çš„æ¡†æ¶ã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªåŸºäºå®è·µæ¢ç©¶æ¨¡å‹ (Practical Inquiry Model, PIM: å®¡è®®ã€æ„æ€ã€è¡ŒåŠ¨ã€æ„ŸçŸ¥) çš„å¯æ“ä½œ SGI å®šä¹‰ï¼Œå¹¶é€šè¿‡å››ä¸ªä¸ç§‘å­¦å®¶å·¥ä½œæµå¯¹é½çš„ä»»åŠ¡æ¥å…·ä½“å®ç°è¿™ä¸€å®šä¹‰ï¼šæ·±åº¦ç ”ç©¶ã€æƒ³æ³•ç”Ÿæˆã€å¹²/æ¹¿å®éªŒ (dry/wet experiments) ä»¥åŠå®éªŒæ¨ç†ã€‚SGI-Bench åŸºå‡†åŒ…å« 1000 å¤šä¸ªç”±ä¸“å®¶ç²¾å¿ƒç­–åˆ’çš„è·¨å­¦ç§‘æ ·æœ¬ï¼Œå…¶çµæ„Ÿæ¥æºäºã€Šç§‘å­¦ã€‹æ‚å¿—æå‡ºçš„ 125 ä¸ªé‡å¤§ç§‘å­¦é—®é¢˜ï¼Œå¯ç”¨äºç³»ç»Ÿè¯„ä¼°æœ€å…ˆè¿›çš„å¤§è¯­è¨€æ¨¡å‹ã€‚è¯„ä¼°ç»“æœæ­ç¤ºäº†å¤šæ–¹é¢çš„å·®è·ï¼šå°½ç®¡åœ¨æ­¥éª¤å±‚é¢ä¸äººç±»å·¥ä½œæµå¯¹é½ï¼Œä½†æ·±åº¦ç ”ç©¶ä»»åŠ¡çš„ç²¾ç¡®åŒ¹é…ç‡ä»ç„¶å¾ˆä½ (10--20%)ï¼›ç”Ÿæˆçš„æƒ³æ³•ç¼ºä¹å¯è¡Œæ€§å’Œç»†èŠ‚ï¼›å¹²å®éªŒä»»åŠ¡ä¸­ä»£ç å¯æ‰§è¡Œæ€§é«˜ï¼Œä½†æ‰§è¡Œç»“æœçš„å‡†ç¡®æ€§ä½ï¼›æ¹¿å®éªŒæ–¹æ¡ˆçš„æ­¥éª¤åºåˆ—ä¿çœŸåº¦ä½ï¼›å¹¶ä¸”åœ¨å¤šæ¨¡æ€æ¯”è¾ƒæ¨ç†æ–¹é¢æŒç»­é¢ä¸´æŒ‘æˆ˜ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥å¼•å…¥äº†æµ‹è¯•æ—¶å¼ºåŒ–å­¦ä¹  (Test-Time Reinforcement Learning, TTRL)ï¼Œè¯¥æ–¹æ³•åœ¨æ¨¡å‹æ¨ç†é˜¶æ®µä¼˜åŒ–åŸºäºæ£€ç´¢å¢å¼ºçš„æ–°é¢–æ€§å¥–åŠ±ï¼Œä»è€Œèƒ½åœ¨ä¸ä¾èµ–å‚è€ƒç­”æ¡ˆçš„æƒ…å†µä¸‹æå‡ç”Ÿæˆå‡è®¾çš„æ–°é¢–æ€§ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬åŸºäº PIM çš„å®šä¹‰ã€ä»¥å·¥ä½œæµä¸ºä¸­å¿ƒçš„åŸºå‡†æµ‹è¯•ä»¥åŠå®è¯åˆ†æï¼Œä¸ºå¼€å‘èƒ½å¤ŸçœŸæ­£æ¨åŠ¨ç§‘å­¦å‘ç°è¿›ç¨‹çš„ AI ç³»ç»Ÿå¥ å®šäº†åŸºç¡€ã€‚</p>
<h2 data-id="heading-2">SemanticGen: Video Generation in Semantic Space</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.20619" target="_blank" title="https://arxiv.org/abs/2512.20619" ref="nofollow noopener noreferrer">SemanticGenï¼šè¯­ä¹‰ç©ºé—´è§†é¢‘ç”Ÿæˆ</a></p>
<p>å½“å‰æœ€å…ˆè¿›çš„è§†é¢‘ç”Ÿæˆæ¨¡å‹é€šå¸¸å­¦ä¹ è§†é¢‘åœ¨ VAE (Variational Autoencoder) æ½œåœ¨ç©ºé—´ä¸­çš„åˆ†å¸ƒï¼Œå¹¶é€šè¿‡ VAE è§£ç å™¨å°†å…¶æ˜ å°„åˆ°åƒç´ ç©ºé—´ã€‚è¿™ç§æ–¹æ³•è™½ç„¶èƒ½å¤Ÿç”Ÿæˆé«˜è´¨é‡è§†é¢‘ï¼Œä½†å­˜åœ¨æ”¶æ•›é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼Œå¹¶ä¸”åœ¨ç”Ÿæˆé•¿è§†é¢‘æ—¶è®¡ç®—å¼€é”€å·¨å¤§ã€‚æœ¬æ–‡æå‡º SemanticGenï¼Œä¸€ç§æ–°é¢–çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åœ¨è¯­ä¹‰ç©ºé—´ä¸­è¿›è¡Œè§†é¢‘ç”Ÿæˆæ¥åº”å¯¹è¿™äº›æŒ‘æˆ˜ã€‚æˆ‘ä»¬çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼šç”±äºè§†é¢‘æœ¬èº«å­˜åœ¨å›ºæœ‰å†—ä½™ï¼Œç”Ÿæˆè¿‡ç¨‹åº”å½“å§‹äºä¸€ä¸ªç´§å‡‘çš„é«˜å±‚è¯­ä¹‰ç©ºé—´ä»¥è¿›è¡Œå…¨å±€è§„åˆ’ä¸ç»“æ„è®¾è®¡ï¼Œéšåå†è¡¥å……é«˜é¢‘ç»†èŠ‚ï¼Œè€Œéç›´æ¥ä½¿ç”¨åŒå‘æ³¨æ„åŠ›å¯¹æµ·é‡çš„ä½å±‚è§†é¢‘ Token è¿›è¡Œå»ºæ¨¡ã€‚SemanticGen é‡‡ç”¨ä¸¤é˜¶æ®µç”Ÿæˆæµç¨‹ï¼šç¬¬ä¸€é˜¶æ®µï¼Œä¸€ä¸ªæ‰©æ•£æ¨¡å‹ç”Ÿæˆç´§å‡‘çš„è¯­ä¹‰è§†é¢‘ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾å®šä¹‰äº†è§†é¢‘çš„å…¨å±€å¸ƒå±€ï¼›ç¬¬äºŒé˜¶æ®µï¼Œå¦ä¸€ä¸ªæ‰©æ•£æ¨¡å‹ä»¥è¿™äº›è¯­ä¹‰ç‰¹å¾ä¸ºæ¡ä»¶ï¼Œç”Ÿæˆ VAE æ½œåœ¨è¡¨ç¤ºï¼Œè¿›è€Œäº§ç”Ÿæœ€ç»ˆè§†é¢‘è¾“å‡ºã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œç›¸è¾ƒäºåœ¨ VAE æ½œåœ¨ç©ºé—´ä¸­ç”Ÿæˆï¼Œåœ¨è¯­ä¹‰ç©ºé—´ä¸­è¿›è¡Œç”Ÿæˆèƒ½å®ç°æ›´å¿«çš„æ”¶æ•›é€Ÿåº¦ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨æ‰©å±•åˆ°é•¿è§†é¢‘ç”Ÿæˆä»»åŠ¡æ—¶ï¼Œä¾ç„¶ä¿æŒé«˜æ•ˆä¸”è®¡ç®—æˆæœ¬å¯æ§ã€‚å¤§é‡å®éªŒè¡¨æ˜ï¼ŒSemanticGen èƒ½å¤Ÿç”Ÿæˆé«˜è´¨é‡è§†é¢‘ï¼Œå…¶æ€§èƒ½ä¼˜äºå½“å‰æœ€ä¼˜æ–¹æ³•å’Œå¤šä¸ªå¼ºåŸºçº¿æ¨¡å‹ã€‚</p>
<h2 data-id="heading-3">Step-DeepResearch Technical Report</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.20491" target="_blank" title="https://arxiv.org/abs/2512.20491" ref="nofollow noopener noreferrer">Step-DeepResearch æŠ€æœ¯æŠ¥å‘Š</a></p>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹ (LLM) å‘è‡ªä¸» AI æ™ºèƒ½ä½“ (AI Agent) æ¼”è¿›ï¼Œæ·±åº¦ç ”ç©¶ (Deep Research) å·²æˆä¸ºä¸€é¡¹å…³é”®çš„è¯„ä¼°ç»´åº¦ã€‚ç„¶è€Œï¼Œç°æœ‰çš„å­¦æœ¯åŸºå‡†ï¼ˆå¦‚ BrowseCompï¼‰å¾€å¾€éš¾ä»¥æ»¡è¶³ç°å®ä¸–ç•Œå¯¹å¼€æ”¾å¼æ¢ç´¢ç ”ç©¶çš„éœ€æ±‚ï¼Œè¿™ç±»ç ”ç©¶éœ€è¦å¼ºå¤§çš„æ„å›¾è¯†åˆ«ã€é•¿æœŸå†³ç­–å’Œè·¨æ¥æºéªŒè¯èƒ½åŠ›ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æ¨å‡ºäº† Step-DeepResearchï¼Œä¸€ä¸ªé«˜æ€§ä»·æ¯”çš„ç«¯åˆ°ç«¯æ™ºèƒ½ä½“ã€‚æˆ‘ä»¬æå‡ºäº†ä¸€ç§åŸºäºåŸå­åŒ–èƒ½åŠ› (Atomic Capabilities) çš„æ•°æ®åˆæˆç­–ç•¥ï¼Œç”¨ä»¥å¼ºåŒ–ä»»åŠ¡è§„åˆ’å’ŒæŠ¥å‘Šæ’°å†™èƒ½åŠ›ï¼Œå¹¶ç»“åˆäº†ä»æ™ºèƒ½ä½“è¡Œä¸ºè®­ç»ƒã€ç›‘ç£å¾®è°ƒ (SFT) åˆ°å¼ºåŒ–å­¦ä¹  (RL) çš„æ¸è¿›å¼è®­ç»ƒè·¯å¾„ã€‚è¯¥æ–¹æ³•é€šè¿‡ä¸€ä¸ªæ£€æŸ¥è¡¨å¼è¯„ä¼°å™¨ (Checklist-style Judger) å¾—åˆ°å¢å¼ºï¼Œæ˜¾è‘—æå‡äº†ç³»ç»Ÿçš„é²æ£’æ€§ã€‚æ­¤å¤–ï¼Œä¸ºäº†å¡«è¡¥ä¸­æ–‡é¢†åŸŸåœ¨æ·±åº¦ç ”ç©¶è¯„ä¼°æ–¹é¢çš„ç©ºç™½ï¼Œæˆ‘ä»¬é’ˆå¯¹çœŸå®çš„æ·±åº¦ç ”ç©¶åœºæ™¯å»ºç«‹äº† ADR-Bench åŸºå‡†ã€‚å®éªŒç»“æœè¡¨æ˜ï¼ŒStep-DeepResearch (32B) åœ¨ Scale AI Research Rubrics è¯„ä¼°ä¸­å–å¾—äº† 61.4% çš„å¾—åˆ†ã€‚åœ¨ ADR-Bench ä¸Šï¼Œå…¶æ€§èƒ½æ˜¾è‘—ä¼˜äºåŒç±»æ¨¡å‹ï¼Œå¹¶èƒ½ä¸ OpenAIã€Gemini DeepResearch ç­‰æœ€å…ˆè¿› (SOTA) çš„é—­æºæ¨¡å‹ç›¸åª²ç¾ã€‚è¿™äº›å‘ç°è¯æ˜ï¼Œé€šè¿‡ç²¾ç»†åŒ–çš„è®­ç»ƒï¼Œä¸­ç­‰è§„æ¨¡çš„æ¨¡å‹èƒ½å¤Ÿä»¥ä¸šç•Œé¢†å…ˆçš„æ€§ä»·æ¯”å®ç°ä¸“å®¶çº§çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-4">TurboDiffusion: Accelerating Video Diffusion Models by 100-200 Times</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.16093" target="_blank" title="https://arxiv.org/abs/2512.16093" ref="nofollow noopener noreferrer">TurboDiffusion: å°†è§†é¢‘æ‰©æ•£æ¨¡å‹åŠ é€Ÿ 100-200 å€</a></p>
<p>æˆ‘ä»¬æå‡ºäº† TurboDiffusionï¼Œè¿™æ˜¯ä¸€ä¸ªè§†é¢‘ç”ŸæˆåŠ é€Ÿæ¡†æ¶ï¼Œèƒ½å¤Ÿåœ¨ä¿æŒè§†é¢‘è´¨é‡çš„åŒæ—¶ï¼Œå°†ç«¯åˆ°ç«¯çš„æ‰©æ•£æ¨¡å‹ç”Ÿæˆè¿‡ç¨‹åŠ é€Ÿ 100 è‡³ 200 å€ã€‚TurboDiffusion ä¸»è¦é€šè¿‡ä»¥ä¸‹å‡ ä¸ªç»„ä»¶å®ç°åŠ é€Ÿï¼š(1) æ³¨æ„åŠ›æœºåˆ¶åŠ é€Ÿï¼šTurboDiffusion é‡‡ç”¨ä½æ¯”ç‰¹ SageAttention å’Œå¯è®­ç»ƒçš„ç¨€ç–çº¿æ€§æ³¨æ„åŠ› (Sparse-Linear Attention, SLA) æ¥åŠ é€Ÿæ³¨æ„åŠ›è®¡ç®—ã€‚(2) æ­¥æ•°è’¸é¦ï¼šTurboDiffusion ä½¿ç”¨ rCM æ–¹æ³•è¿›è¡Œé«˜æ•ˆçš„æ­¥æ•°è’¸é¦ã€‚(3) W8A8 é‡åŒ–ï¼šTurboDiffusion å°†æ¨¡å‹å‚æ•°å’Œæ¿€æ´»å€¼é‡åŒ–ä¸º 8 ä½ (W8A8)ï¼Œä»¥åŠ é€Ÿçº¿æ€§å±‚è¿ç®—å¹¶å‡å°‘æ¨¡å‹ä½“ç§¯ã€‚æ­¤å¤–ï¼Œè¯¥æ¡†æ¶è¿˜é›†æˆäº†å…¶ä»–å¤šé¡¹å·¥ç¨‹ä¼˜åŒ–æŠ€æœ¯ã€‚
æˆ‘ä»¬åœ¨ Wan2.2-I2V-14B-720Pã€Wan2.1-T2V-1.3B-480Pã€Wan2.1-T2V-14B-720P ä»¥åŠ Wan2.1-T2V-14B-480P æ¨¡å‹ä¸Šè¿›è¡Œäº†å®éªŒã€‚ç»“æœè¡¨æ˜ï¼Œå³ä½¿åœ¨å•å— RTX 5090 GPU ä¸Šï¼ŒTurboDiffusion ä¹Ÿèƒ½å®ç° 100-200 å€çš„è§†é¢‘ç”ŸæˆåŠ é€Ÿï¼ŒåŒæ—¶ç”Ÿæˆè§†é¢‘çš„è´¨é‡ä¸åŸå§‹æ–¹æ³•ç›¸å½“ã€‚åŒ…å«æ¨¡å‹æ£€æŸ¥ç‚¹åŠæ˜“äºä½¿ç”¨ä»£ç çš„ GitHub ä»“åº“åœ°å€ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fthu-ml%2FTurboDiffusion%25E3%2580%2582" target="_blank" title="https://github.com/thu-ml/TurboDiffusion%E3%80%82" ref="nofollow noopener noreferrer">github.com/thu-ml/Turbâ€¦</a></p>
<h2 data-id="heading-5">PhysBrain: Human Egocentric Data as a Bridge from Vision Language Models to Physical Intelligence</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.16793" target="_blank" title="https://arxiv.org/abs/2512.16793" ref="nofollow noopener noreferrer">PhysBrain: äººç±»è‡ªæˆ‘ä¸­å¿ƒæ•°æ®ä½œä¸ºä»è§†è§‰è¯­è¨€æ¨¡å‹åˆ°ç‰©ç†æ™ºèƒ½çš„æ¡¥æ¢</a></p>
<p>æœºå™¨äººçš„æ³›åŒ–èƒ½åŠ›ä¾èµ–äºç‰©ç†æ™ºèƒ½ï¼šå³åœ¨è‡ªæˆ‘ä¸­å¿ƒæ„ŸçŸ¥ä¸è¡ŒåŠ¨æ¡ä»¶ä¸‹ï¼Œå¯¹çŠ¶æ€å˜åŒ–ã€å¯†é›†æ¥è§¦äº¤äº’ä»¥åŠé•¿æ—¶ç¨‹è§„åˆ’è¿›è¡Œæ¨ç†çš„èƒ½åŠ›ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°è§†è§‰è¯­è¨€æ¨¡å‹ä¸»è¦åŸºäºç¬¬ä¸‰äººç§°æ•°æ®è¿›è¡Œè®­ç»ƒï¼Œè¿™ä¸ºäººå½¢æœºå™¨äººå¸¦æ¥äº†æ ¹æœ¬æ€§çš„è§†è§’å¤±é…ã€‚ç”±äºæˆæœ¬é«˜æ˜‚ä¸”å¤šæ ·æ€§æœ‰é™ï¼Œæ‰©å±•æœºå™¨äººè‡ªæˆ‘ä¸­å¿ƒæ•°æ®çš„é‡‡é›†ä»ä¸ç°å®ï¼›è€Œå¤§è§„æ¨¡çš„äººç±»è‡ªæˆ‘ä¸­å¿ƒè§†é¢‘åˆ™æä¾›äº†ä¸€ä¸ªå¯æ‰©å±•çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå®ƒä»¬å¤©ç„¶åœ°æ•æ‰äº†ä¸°å¯Œçš„äº¤äº’è¯­å¢ƒä¸å› æœç»“æ„ã€‚å…³é”®æŒ‘æˆ˜åœ¨äºå¦‚ä½•å°†åŸå§‹çš„è‡ªæˆ‘ä¸­å¿ƒè§†é¢‘è½¬åŒ–ä¸ºç»“æ„åŒ–ä¸”å¯é çš„å…·èº«è®­ç»ƒç›‘ç£ä¿¡å·ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ª Egocentric2Embodiment è½¬æ¢æµç¨‹ï¼Œè¯¥æµç¨‹å°†ç¬¬ä¸€äººç§°è§†é¢‘è½¬åŒ–ä¸ºå…·æœ‰å¼ºåˆ¶è¯æ®åŸºç¡€å’Œæ—¶åºä¸€è‡´æ€§çš„ã€å¤šå±‚æ¬¡ä¸”æ¨¡å¼é©±åŠ¨çš„è§†è§‰é—®ç­”ç›‘ç£ä¿¡å·ï¼Œä»è€Œèƒ½å¤Ÿå¤§è§„æ¨¡æ„å»º Egocentric2Embodiment æ•°æ®é›† (E2E-3M)ã€‚é€šè¿‡åœ¨ E2E-3M æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªå…·å¤‡è‡ªæˆ‘ä¸­å¿ƒæ„ŸçŸ¥èƒ½åŠ›çš„å…·èº«å¤§è„‘ï¼Œç§°ä¸º PhysBrainã€‚PhysBrain åœ¨è‡ªæˆ‘ä¸­å¿ƒç†è§£æ–¹é¢è¡¨ç°å‡ºæ˜¾è‘—æå‡ï¼Œå°¤å…¶æ˜¯åœ¨ EgoThink ä»»åŠ¡ä¸Šçš„è§„åˆ’èƒ½åŠ›ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå…·å¤‡è‡ªæˆ‘ä¸­å¿ƒæ„ŸçŸ¥èƒ½åŠ›çš„åˆå§‹åŒ–çŠ¶æ€ï¼Œä½¿å¾—è§†è§‰è¯­è¨€-åŠ¨ä½œæ¨¡å‹çš„å¾®è°ƒè¿‡ç¨‹æ ·æœ¬æ•ˆç‡æ›´é«˜ï¼Œå¹¶åœ¨ SimplerEnv ä¸Šå–å¾—äº†æ›´é«˜çš„æˆåŠŸç‡ (53.9%)ï¼Œè¿™è¯æ˜äº†ä»äººç±»è‡ªæˆ‘ä¸­å¿ƒç›‘ç£ä¿¡å·åˆ°ä¸‹æ¸¸æœºå™¨äººæ§åˆ¶çš„æœ‰æ•ˆè¿ç§»ã€‚</p>
<h2 data-id="heading-6">Robust-R1: Degradation-Aware Reasoning for Robust Visual Understanding</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17532" target="_blank" title="https://arxiv.org/abs/2512.17532" ref="nofollow noopener noreferrer">Robust-R1ï¼šåŸºäºé€€åŒ–æ„ŸçŸ¥æ¨ç†çš„é²æ£’è§†è§‰ç†è§£</a></p>
<p>åœ¨æç«¯ç°å®ä¸–ç•Œçš„è§†è§‰é€€åŒ–æ¡ä»¶ä¸‹ï¼Œå¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ (MLLM) éš¾ä»¥ç»´æŒå¯é çš„æ€§èƒ½ï¼Œè¿™é™åˆ¶äº†å…¶å®é™…åº”ç”¨çš„é²æ£’æ€§ã€‚ç°æœ‰çš„é²æ£’å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ä¸»è¦ä¾èµ–äºéšå¼è®­ç»ƒæˆ–é€‚åº”æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä»…ä¾§é‡äºæå‡è§†è§‰ç¼–ç å™¨çš„æ³›åŒ–èƒ½åŠ›ï¼Œå¯¼è‡´æ¨¡å‹å¯è§£é‡Šæ€§æœ‰é™ä¸”ä¼˜åŒ–è¿‡ç¨‹ç›¸å¯¹å­¤ç«‹ã€‚ä¸ºå…‹æœè¿™äº›å±€é™ï¼Œæˆ‘ä»¬æå‡ºäº† Robust-R1ï¼Œè¿™æ˜¯ä¸€ä¸ªé€šè¿‡ç»“æ„åŒ–æ¨ç†é“¾æ¥æ˜¾å¼å»ºæ¨¡è§†è§‰é€€åŒ–çš„æ–°å‹æ¡†æ¶ã€‚æˆ‘ä»¬çš„æ–¹æ³•æ•´åˆäº†ä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š(i) ä¸ºå¥ å®šé€€åŒ–æ„ŸçŸ¥æ¨ç†åŸºç¡€è€Œè¿›è¡Œçš„ç›‘ç£å¾®è°ƒï¼Œ(ii) ä¸ºå®ç°ç²¾å‡†é€€åŒ–å‚æ•°æ„ŸçŸ¥çš„å¥–åŠ±é©±åŠ¨å¯¹é½ï¼Œä»¥åŠ (iii) èƒ½å¤Ÿé€‚åº”é€€åŒ–å¼ºåº¦çš„åŠ¨æ€æ¨ç†æ·±åº¦ç¼©æ”¾ã€‚ä¸ºæ”¯æŒæ­¤æ–¹æ³•ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåŒ…å« 1.1 ä¸‡ä¸ªæ ·æœ¬çš„ä¸“ç”¨æ•°æ®é›†ï¼Œå…¶ä¸­æ¶µç›–äº†åœ¨å››ä¸ªå…³é”®ç°å®è§†è§‰å¤„ç†é˜¶æ®µåˆæˆçš„çœŸå®é€€åŒ–ã€‚æ¯ä¸ªæ ·æœ¬å‡æ ‡æ³¨æœ‰ç»“æ„åŒ–æ¨ç†é“¾ï¼Œé“¾ä¸­è¿æ¥äº†é€€åŒ–å‚æ•°ã€æ„ŸçŸ¥å½±å“ã€åŸå§‹è¯­ä¹‰æ¨ç†é“¾åŠæœ€ç»ˆç»“è®ºã€‚å…¨é¢çš„è¯„ä¼°ç»“æœè¡¨æ˜ï¼ŒRobust-R1 å…·å¤‡æœ€å…ˆè¿›çš„é²æ£’æ€§ï¼šå®ƒåœ¨ç°å®ä¸–ç•Œé€€åŒ–åŸºå‡† R-Bench ä¸Šçš„è¡¨ç°ä¼˜äºæ‰€æœ‰é€šç”¨åŠé²æ£’åŸºçº¿æ¨¡å‹ï¼Œå¹¶ä¸”åœ¨ MMMBã€MMStar å’Œ RealWorldQA åŸºå‡†ä¸Šé¢ä¸´å¤šå¼ºåº¦å¯¹æŠ—æ€§é€€åŒ–æ—¶ï¼Œä¾ç„¶ä¿æŒäº†å“è¶Šçš„æŠ—é€€åŒ–æ€§èƒ½ã€‚</p>
<h2 data-id="heading-7">The Prism Hypothesis: Harmonizing Semantic and Pixel Representations via Unified Autoencoding</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.19693" target="_blank" title="https://arxiv.org/abs/2512.19693" ref="nofollow noopener noreferrer">æ£±é•œå‡è¯´ï¼šé€šè¿‡ç»Ÿä¸€è‡ªç¼–ç è°ƒå’Œè¯­ä¹‰ä¸åƒç´ è¡¨ç¤º</a></p>
<p>è·¨æ¨¡æ€çš„æ·±åº¦è¡¨ç¤ºæœ¬è´¨ä¸Šæ˜¯ç›¸äº’äº¤ç»‡çš„ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç³»ç»Ÿåœ°åˆ†æäº†å¤šç§è¯­ä¹‰ä¸åƒç´ ç¼–ç å™¨çš„é¢‘è°±ç‰¹æ€§ã€‚æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬çš„ç ”ç©¶æ­ç¤ºäº†ä¸€ä¸ªæå…·å¯å‘æ€§ä¸”é²œæœ‰æ¢ç´¢çš„å¯¹åº”å…³ç³»ï¼šç¼–ç å™¨çš„ç‰¹å¾é¢‘è°±ä¸å…¶åŠŸèƒ½è§’è‰²å¯†åˆ‡ç›¸å…³â€”â€”è¯­ä¹‰ç¼–ç å™¨ä¸»è¦æ•è·ç¼–ç æŠ½è±¡å«ä¹‰çš„ä½é¢‘åˆ†é‡ï¼Œè€Œåƒç´ ç¼–ç å™¨åˆ™é¢å¤–ä¿ç•™äº†ä¼ è¾¾ç»†ç²’åº¦ç»†èŠ‚çš„é«˜é¢‘ä¿¡æ¯ã€‚è¿™ä¸€å‘ç°æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„è§†è§’ï¼Œå°†ç¼–ç å™¨è¡Œä¸ºä¸å…¶åº•å±‚é¢‘è°±ç»“æ„å…³è”èµ·æ¥ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸ºæ£±é•œå‡è¯´ï¼Œå³æ¯ç§æ•°æ®æ¨¡æ€éƒ½å¯è¢«è§†ä¸ºè‡ªç„¶ä¸–ç•Œåœ¨å…±äº«ç‰¹å¾é¢‘è°±ä¸Šçš„æŠ•å½±ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºæ£±é•œã€‚åŸºäºæ­¤è§è§£ï¼Œæˆ‘ä»¬æå‡ºäº†ç»Ÿä¸€è‡ªç¼–ç  (UAE)ï¼Œè¯¥æ¨¡å‹é€šè¿‡ä¸€ç§åˆ›æ–°çš„é¢‘å¸¦è°ƒåˆ¶å™¨æ¥è°ƒå’Œè¯­ä¹‰ç»“æ„ä¸åƒç´ ç»†èŠ‚ï¼Œä½¿äºŒè€…èƒ½å¤Ÿæ— ç¼å…±å­˜ã€‚åœ¨ ImageNet å’Œ MS-COCO åŸºå‡†ä¸Šè¿›è¡Œçš„å¤§é‡å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„ UAE èƒ½å¤Ÿæœ‰æ•ˆåœ°å°†è¯­ä¹‰æŠ½è±¡ä¸åƒç´ çº§ä¿çœŸåº¦ç»Ÿä¸€åˆ°å•ä¸€æ½œåœ¨ç©ºé—´ä¸­ï¼Œå¹¶å–å¾—äº†æœ€å…ˆè¿›çš„æ€§èƒ½ã€‚</p>
<h2 data-id="heading-8">Bottom-up Policy Optimization: Your Language Model Policy Secretly Contains Internal Policies</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.19673" target="_blank" title="https://arxiv.org/abs/2512.19673" ref="nofollow noopener noreferrer">è‡ªåº•å‘ä¸Šç­–ç•¥ä¼˜åŒ–ï¼šè¯­è¨€æ¨¡å‹ç­–ç•¥éšå«å†…éƒ¨ç­–ç•¥</a></p>
<p>ç°æœ‰çš„å¼ºåŒ–å­¦ä¹  (RL) æ–¹æ³•å°†å¤§è¯­è¨€æ¨¡å‹ (LLMs) è§†ä¸ºå•ä¸€çš„ç»Ÿä¸€ç­–ç•¥ï¼Œå¿½ç•¥äº†å…¶å†…éƒ¨æœºåˆ¶ã€‚å› æ­¤ï¼Œç†è§£ç­–ç•¥åœ¨ä¸åŒå±‚å’Œæ¨¡å—é—´çš„æ¼”å˜è¿‡ç¨‹ï¼Œå¯¹äºå®ç°æ›´å…·é’ˆå¯¹æ€§çš„ä¼˜åŒ–ä»¥åŠæ­ç¤ºå¤æ‚çš„æ¨ç†æœºåˆ¶è‡³å…³é‡è¦ã€‚æœ¬æ–‡é€šè¿‡åˆ©ç”¨ Transformer æ®‹å·®æµçš„å›ºæœ‰åˆ’åˆ†ï¼Œä»¥åŠéšè—çŠ¶æ€ä¸è§£åµŒå…¥çŸ©é˜µçš„åˆæˆç»“æœä¸æœ€ç»ˆå¯é‡‡æ ·ç­–ç•¥ä¹‹é—´çš„ç­‰ä»·æ€§ï¼Œå¯¹è¯­è¨€æ¨¡å‹ç­–ç•¥è¿›è¡Œåˆ†è§£ã€‚è¿™ç§åˆ†è§£æ­ç¤ºäº†å†…éƒ¨å±‚ç­–ç•¥ (Internal Layer Policies)ï¼Œå…¶å¯¹åº”äºå„ç‹¬ç«‹å±‚çš„è´¡çŒ®ï¼›ä»¥åŠå†…éƒ¨æ¨¡å—ç­–ç•¥ (Internal Modular Policies)ï¼Œå…¶ä¸æ¯å±‚ä¸­çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶å’Œå‰é¦ˆç½‘ç»œ (FFN) ç»„ä»¶ç›¸å…³è”ã€‚é€šè¿‡åˆ†æå†…éƒ¨ç­–ç•¥çš„ç†µï¼Œæˆ‘ä»¬å‘ç°ï¼š(a) æ—©æœŸå±‚ä¿æŒé«˜ç†µä»¥æ”¯æŒæ¢ç´¢ï¼Œé¡¶å±‚åˆ™æ”¶æ•›è‡³æ¥è¿‘é›¶çš„ç†µä»¥å®ç°ç²¾ç»†åŒ–ï¼Œä¸”æ”¶æ•›æ¨¡å¼å› æ¨¡å‹ç³»åˆ—ä¸åŒè€Œæœ‰æ‰€å·®å¼‚ã€‚(b) Llama çš„é¢„æµ‹ç©ºé—´åœ¨æœ€åä¸€å±‚è¿…é€Ÿæ”¶æ•›ï¼Œè€Œ Qwen ç³»åˆ—æ¨¡å‹ï¼Œå°¤å…¶æ˜¯ Qwen3ï¼Œåˆ™å±•ç°å‡ºä¸€ç§æ›´æ¥è¿‘äººç±»ã€æ¸è¿›ç»“æ„åŒ–çš„æ¨ç†æ¨¡å¼ã€‚å—è¿™äº›å‘ç°å¯å‘ï¼Œæˆ‘ä»¬æå‡ºäº†è‡ªåº•å‘ä¸Šç­–ç•¥ä¼˜åŒ– (Bottom-up Policy Optimization, BuPO)ï¼Œè¿™æ˜¯ä¸€ç§æ–°é¢–çš„ RL èŒƒå¼ï¼Œå¯åœ¨è®­ç»ƒæ—©æœŸç›´æ¥ä¼˜åŒ–å†…éƒ¨å±‚ç­–ç•¥ã€‚é€šè¿‡åœ¨åº•å±‚å¯¹é½è®­ç»ƒç›®æ ‡ï¼ŒBuPO é‡æ„äº†åŸºç¡€æ¨ç†èƒ½åŠ›ï¼Œå¹¶å–å¾—äº†å“è¶Šçš„æ€§èƒ½ã€‚åœ¨å¤æ‚æ¨ç†åŸºå‡†ä¸Šè¿›è¡Œçš„å¤§é‡å®éªŒè¯æ˜äº†æˆ‘ä»¬æ–¹æ³•çš„æœ‰æ•ˆæ€§ã€‚æˆ‘ä»¬çš„ä»£ç å¯åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTrae1ounG%2FBuPO" target="_blank" title="https://github.com/Trae1ounG/BuPO" ref="nofollow noopener noreferrer">github.com/Trae1ounG/Bâ€¦</a> è·å–ã€‚</p>
<h2 data-id="heading-9">When Reasoning Meets Its Laws</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17901" target="_blank" title="https://arxiv.org/abs/2512.17901" ref="nofollow noopener noreferrer">å½“æ¨ç†é‡è§å…¶å®šå¾‹</a></p>
<p>å°½ç®¡å¤§æ¨ç†æ¨¡å‹ (Large Reasoning Models, LRMs) æ€§èƒ½å“è¶Šï¼Œä½†å…¶æ¨ç†è¡Œä¸ºå¸¸å¸¸æœ‰è¿ç›´è§‰ï¼Œå¯¼è‡´æ¨ç†èƒ½åŠ›æœªèƒ½è¾¾åˆ°æœ€ä¼˜ã€‚ä¸ºäº†ä»ç†è®ºå±‚é¢å½¢å¼åŒ–æ‰€æœŸæœ›çš„æ¨ç†è¡Œä¸ºï¼Œæœ¬æ–‡æå‡ºäº†æ¨ç†å®šå¾‹ (Laws of Reasoning, LoRe) è¿™ä¸€ç»Ÿä¸€æ¡†æ¶ï¼Œç”¨ä»¥åˆ»ç”»å¤§æ¨ç†æ¨¡å‹å†…åœ¨çš„æ¨ç†æ¨¡å¼ã€‚æˆ‘ä»¬é¦–å…ˆæå‡ºäº†è®¡ç®—å®šå¾‹ï¼Œå…¶æ ¸å¿ƒå‡è®¾æ˜¯æ¨ç†è®¡ç®—é‡åº”ä¸é—®é¢˜å¤æ‚åº¦å‘ˆçº¿æ€§å…³ç³»ã€‚é™¤äº†è®¡ç®—é‡ï¼Œæˆ‘ä»¬è¿˜é€šè¿‡è¡¥å……çš„å‡†ç¡®ç‡å®šå¾‹å¯¹æ¨ç†å®šå¾‹è¿›è¡Œäº†æ‰©å±•ã€‚ç”±äºé—®é¢˜å¤æ‚åº¦åœ¨å®è·µä¸­éš¾ä»¥é‡åŒ–ï¼Œæˆ‘ä»¬å€ŸåŠ©è¯¥å®šå¾‹çš„ä¸¤ä¸ªå¯æ£€éªŒå±æ€§â€”â€”å•è°ƒæ€§ä¸ç»„åˆæ€§â€”â€”æ¥éªŒè¯è¿™äº›å‡è®¾ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº† LoRe-Bench åŸºå‡†æµ‹è¯•ï¼Œç”¨äºç³»ç»Ÿæ€§åœ°è¯„ä¼°å¤§æ¨ç†æ¨¡å‹çš„è¿™ä¸¤ä¸ªå¯å¤„ç†å±æ€§ã€‚è¯„ä¼°ç»“æœè¡¨æ˜ï¼Œå¤§å¤šæ•°æ¨ç†æ¨¡å‹å…·å¤‡åˆç†çš„å•è°ƒæ€§ï¼Œä½†ç¼ºä¹ç»„åˆæ€§ã€‚é’ˆå¯¹æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ç§æœ‰æ•ˆçš„å¾®è°ƒæ–¹æ³•ï¼Œä»¥å¼ºåˆ¶æ¨¡å‹æ»¡è¶³è®¡ç®—å®šå¾‹çš„ç»„åˆæ€§è¦æ±‚ã€‚å¤§é‡çš„å®è¯ç ”ç©¶è¡¨æ˜ï¼Œæ›´å¥½åœ°éµå¾ªè®¡ç®—å®šå¾‹èƒ½å¤Ÿåœ¨å¤šä¸ªåŸºå‡†æµ‹è¯•ä¸ŠæŒç»­æå‡æ¨¡å‹çš„æ¨ç†æ€§èƒ½ï¼Œå¹¶æ­ç¤ºå‡ºä¸åŒå±æ€§ä¸å®šå¾‹ä¹‹é—´çš„ååŒæ•ˆåº”ã€‚é¡¹ç›®é¡µé¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flore-project.github.io%2F" target="_blank" title="https://lore-project.github.io/" ref="nofollow noopener noreferrer">lore-project.github.io/</a></p>
<h2 data-id="heading-10">Latent Implicit Visual Reasoning</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.21218" target="_blank" title="https://arxiv.org/abs/2512.21218" ref="nofollow noopener noreferrer">æ½œåœ¨éšå¼è§†è§‰æ¨ç†</a></p>
<p>å°½ç®¡å¤§å‹å¤šæ¨¡æ€æ¨¡å‹ï¼ˆLMMsï¼‰å·²å–å¾—æ˜¾è‘—è¿›å±•ï¼Œä½†å…¶æœ¬è´¨ä¸Šä»ä»¥æ–‡æœ¬ä¸ºä¸­å¿ƒï¼Œå°†è¯­è¨€ä½œä¸ºæ ¸å¿ƒæ¨ç†æ¨¡æ€ã€‚å› æ­¤ï¼Œå®ƒä»¬åœ¨å¤„ç†ä»¥è§†è§‰ä¸ºä¸»çš„æ¨ç†ä»»åŠ¡æ—¶èƒ½åŠ›æœ‰é™ã€‚è¿‘æœŸçš„ä¸€äº›æ–¹æ³•å°è¯•é€šè¿‡åˆ©ç”¨è¾…åŠ©å›¾åƒã€æ·±åº¦å›¾æˆ–å›¾åƒè£å‰ªæ¥ç›‘ç£ä¸­é—´è§†è§‰æ­¥éª¤ï¼Œä»¥è§£å†³æ­¤é—®é¢˜ã€‚ç„¶è€Œï¼Œè¿™äº›ç­–ç•¥ä¸ºâ€œæœ‰ç”¨â€çš„è§†è§‰æŠ½è±¡å½¢æ€è®¾å®šäº†é™åˆ¶æ€§å…ˆéªŒï¼Œå¸¦æ¥äº†é«˜æ˜‚çš„æ ‡æ³¨æˆæœ¬ï¼Œä¸”è·¨ä»»åŠ¡æ³›åŒ–èƒ½åŠ›è¾ƒå·®ã€‚ä¸ºå…‹æœè¿™ä¸€å…³é”®å±€é™ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§ä»»åŠ¡æ— å…³çš„æœºåˆ¶ï¼Œå®ƒèƒ½è®­ç»ƒ LMMs è‡ªä¸»å‘ç°å¹¶åˆ©ç”¨è§†è§‰æ¨ç†æ ‡è®°ï¼Œè€Œæ— éœ€ä»»ä½•æ˜¾å¼ç›‘ç£ã€‚è¿™äº›æ ‡è®°å…·æœ‰å…¨å±€æ³¨æ„åŠ›ï¼Œå¹¶èƒ½ä»¥ä»»åŠ¡è‡ªé€‚åº”çš„æ–¹å¼å¯¹å›¾åƒè¿›è¡Œé‡æ–°ç¼–ç ï¼Œä»è€Œä½¿æ¨¡å‹èƒ½å¤Ÿæå–ç›¸å…³çš„è§†è§‰ä¿¡æ¯ï¼Œæ— éœ€ä¾èµ–äººå·¥è®¾è®¡çš„ç›‘ç£ä¿¡å·ã€‚æˆ‘ä»¬çš„æ–¹æ³•æ€§èƒ½ä¼˜äºç›´æ¥å¾®è°ƒï¼Œåœ¨å¤šç§è§†è§‰ä¸­å¿ƒä»»åŠ¡ä¸Šâ€”â€”åŒ…æ‹¬é‚£äº›ä¸­é—´æŠ½è±¡éš¾ä»¥æ˜ç¡®å®šä¹‰çš„ä»»åŠ¡â€”â€”å‡å–å¾—äº†æœ€å…ˆè¿›çš„æˆæœï¼ŒåŒæ—¶ä¹Ÿèƒ½å¾ˆå¥½åœ°æ³›åŒ–è‡³å¤šä»»åŠ¡æŒ‡ä»¤å¾®è°ƒåœºæ™¯ã€‚</p>
<h2 data-id="heading-11">LongVideoAgent: åŸºäºå¤šæ™ºèƒ½ä½“çš„é•¿è§†é¢‘æ¨ç†</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.20618" target="_blank" title="https://arxiv.org/abs/2512.20618" ref="nofollow noopener noreferrer">LongVideoAgent: åŸºäºå¤šæ™ºèƒ½ä½“çš„é•¿è§†é¢‘æ¨ç†</a></p>
<p>å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ä»¥åŠåˆ©ç”¨å·¥å…·è¿›è¡Œé•¿è§†é¢‘é—®ç­”çš„ç³»ç»Ÿæ‰€å–å¾—çš„è¿›å±•ï¼Œå±•ç°äº†å¤„ç†é•¿è¾¾æ•°å°æ—¶è§†é¢‘å†…å®¹å¹¶è¿›è¡Œæ¨ç†çš„æ½œåŠ›ã€‚ç„¶è€Œï¼Œç°æœ‰æ–¹æ³•å¤§å¤šä»å°†è§†é¢‘å†…å®¹å‹ç¼©ä¸ºæœ‰æŸæ‘˜è¦ï¼Œæˆ–ä¾èµ–äºåŠŸèƒ½æœ‰é™çš„å·¥å…·é›†ï¼Œè¿™å¯¼è‡´æ—¶é—´å®šä½èƒ½åŠ›è¢«å‰Šå¼±ï¼Œä¸”å®¹æ˜“é—æ¼ç»†ç²’åº¦çº¿ç´¢ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬æå‡ºä¸€ä¸ªå¤šæ™ºèƒ½ä½“æ¡†æ¶ï¼šä¸€ä¸ªä¸»æ§å¤§è¯­è¨€æ¨¡å‹è´Ÿè´£åè°ƒä¸€ä¸ªå®šä½æ™ºèƒ½ä½“æ¥é”å®šä¸é—®é¢˜ç›¸å…³çš„è§†é¢‘ç‰‡æ®µï¼Œä»¥åŠä¸€ä¸ªè§†è§‰æ™ºèƒ½ä½“æ¥æå–æœ‰é’ˆå¯¹æ€§çš„æ–‡æœ¬åŒ–è§†è§‰è§‚å¯Ÿã€‚ä¸»æ§æ™ºèƒ½ä½“åœ¨é¢„è®¾çš„æ­¥éª¤é™åˆ¶å†…è¿›è¡Œè§„åˆ’ï¼Œå¹¶é€šè¿‡å¼ºåŒ–å­¦ä¹ è¿›è¡Œè®­ç»ƒï¼Œæ—¨åœ¨å®ç°ç®€æ´ã€å‡†ç¡®ä¸”é«˜æ•ˆçš„å¤šæ™ºèƒ½ä½“åä½œã€‚è¯¥è®¾è®¡é€šè¿‡å®šä½æœºåˆ¶ä½¿ä¸»æ§æ™ºèƒ½ä½“èƒ½ä¸“æ³¨äºç›¸å…³ç‰‡æ®µï¼Œåˆ©ç”¨è§†è§‰ç»†èŠ‚è¡¥å……å­—å¹•ä¿¡æ¯ï¼Œå¹¶ç”Ÿæˆå¯è§£é‡Šçš„æ¨ç†è½¨è¿¹ã€‚åœ¨æˆ‘ä»¬æ–°æå‡ºçš„ LongTVQA å’Œ LongTVQA+ æ•°æ®é›†ï¼ˆè¿™ä¸¤ä¸ªå‰§é›†çº§æ•°æ®é›†ç”± TVQA/TVQA+ èšåˆè€Œæˆï¼‰ä¸Šï¼Œæˆ‘ä»¬çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ€§èƒ½æ˜¾è‘—ä¼˜äºå¤šä¸ªå¼ºå¤§çš„éæ™ºèƒ½ä½“åŸºçº¿æ¨¡å‹ã€‚å®éªŒè¿˜è¡¨æ˜ï¼Œå¼ºåŒ–å­¦ä¹ èƒ½è¿›ä¸€æ­¥å¼ºåŒ–å·²è®­ç»ƒæ™ºèƒ½ä½“çš„æ¨ç†ä¸è§„åˆ’èƒ½åŠ›ã€‚ä»£ç ä¸æ•°æ®å°†åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Flongvideoagent.github.io%2F" target="_blank" title="https://longvideoagent.github.io/" ref="nofollow noopener noreferrer">longvideoagent.github.io/</a> å‘å¸ƒã€‚</p>
<h2 data-id="heading-12">Region-Constraint In-Context Generation for Instructional Video Editing</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17650" target="_blank" title="https://arxiv.org/abs/2512.17650" ref="nofollow noopener noreferrer">é¢å‘æ•™å­¦è§†é¢‘ç¼–è¾‘çš„åŒºåŸŸçº¦æŸä¸Šä¸‹æ–‡ç”Ÿæˆ</a></p>
<p>ä¸Šä¸‹æ–‡ç”Ÿæˆ (In-context generation) èŒƒå¼è¿‘æœŸåœ¨æ•™å­¦å›¾åƒç¼–è¾‘é¢†åŸŸå±•ç°å‡ºå¼ºå¤§èƒ½åŠ›ï¼Œå…¼å…·æ•°æ®é«˜æ•ˆæ€§ä¸åˆæˆé«˜è´¨é‡çš„ç‰¹ç‚¹ã€‚ç„¶è€Œï¼Œå°†è¿™ç§ä¸Šä¸‹æ–‡å­¦ä¹ åº”ç”¨äºåŸºäºæŒ‡ä»¤çš„è§†é¢‘ç¼–è¾‘å¹¶éæ˜“äº‹ã€‚è‹¥ä¸æŒ‡å®šç¼–è¾‘åŒºåŸŸï¼Œç»“æœå¯èƒ½å‡ºç°ç¼–è¾‘åŒºåŸŸä¸å‡†ç¡®ï¼Œä»¥åŠåœ¨å»å™ªè¿‡ç¨‹ä¸­ç¼–è¾‘åŒºåŸŸä¸éç¼–è¾‘åŒºåŸŸä¹‹é—´å‘ç”Ÿ Token å¹²æ‰°çš„é—®é¢˜ã€‚ä¸ºè§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æå‡ºäº† ReCoï¼Œä¸€ç§æ–°çš„æ•™å­¦è§†é¢‘ç¼–è¾‘èŒƒå¼ï¼Œå…¶åˆ›æ–°ä¹‹å¤„åœ¨äºæ·±å…¥æ¢ç©¶äº†ä¸Šä¸‹æ–‡ç”Ÿæˆè¿‡ç¨‹ä¸­ç¼–è¾‘åŒºåŸŸä¸éç¼–è¾‘åŒºåŸŸä¹‹é—´çš„çº¦æŸå»ºæ¨¡ã€‚æŠ€æœ¯ä¸Šï¼ŒReCo å°†æºè§†é¢‘ä¸ç›®æ ‡è§†é¢‘æ²¿ç©ºé—´ï¼ˆå®½åº¦ï¼‰ç»´åº¦æ‹¼æ¥ï¼Œè¿›è¡Œè”åˆå»å™ªã€‚ä¸ºæ ¡å‡†è§†é¢‘æ‰©æ•£å­¦ä¹ ï¼ŒReCo åˆ©ç”¨äº†ä¸¤é¡¹æ­£åˆ™åŒ–é¡¹ï¼šæ½œåœ¨æ­£åˆ™åŒ–ä¸æ³¨æ„åŠ›æ­£åˆ™åŒ–ï¼Œå®ƒä»¬åˆ†åˆ«ä½œç”¨äºå•æ­¥åå‘æ‰©æ•£å»å™ªåçš„æ½œåœ¨è¡¨ç¤º (latents) å’Œæ³¨æ„åŠ›å›¾ (attention maps)ã€‚æ½œåœ¨æ­£åˆ™åŒ–æ—¨åœ¨å¢å¤§æºè§†é¢‘ä¸ç›®æ ‡è§†é¢‘ä¹‹é—´ç¼–è¾‘åŒºåŸŸçš„æ½œåœ¨å·®å¼‚ï¼ŒåŒæ—¶å‡å°éç¼–è¾‘åŒºåŸŸçš„å·®å¼‚ï¼Œä»è€Œå¼ºåŒ–å¯¹ç¼–è¾‘åŒºåŸŸçš„ä¿®æ”¹ï¼Œå¹¶æŠ‘åˆ¶éç¼–è¾‘åŒºåŸŸæ„å¤–å†…å®¹çš„ç”Ÿæˆã€‚æ³¨æ„åŠ›æ­£åˆ™åŒ–åˆ™æŠ‘åˆ¶ç›®æ ‡è§†é¢‘ç¼–è¾‘åŒºåŸŸä¸­çš„ Token å¯¹æºè§†é¢‘å¯¹åº”åŒºåŸŸ Token çš„æ³¨æ„åŠ›ï¼Œä»¥æ­¤å‡è½»ç›®æ ‡è§†é¢‘ç”Ÿæˆæ–°å¯¹è±¡æ—¶æ¥è‡ªæºè§†é¢‘å¯¹åº” Token çš„å¹²æ‰°ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªå¤§è§„æ¨¡é«˜è´¨é‡çš„è§†é¢‘ç¼–è¾‘æ•°æ®é›† ReCo-Dataï¼ŒåŒ…å« 50 ä¸‡å¯¹æŒ‡ä»¤-è§†é¢‘æ ·æœ¬ï¼Œä»¥æ”¯æŒæ¨¡å‹è®­ç»ƒã€‚åœ¨å››é¡¹ä¸»æµåŸºäºæŒ‡ä»¤çš„è§†é¢‘ç¼–è¾‘ä»»åŠ¡ä¸Šè¿›è¡Œçš„å¤§é‡å®éªŒï¼ŒéªŒè¯äº†æˆ‘ä»¬æ‰€ææ–¹æ¡ˆçš„ä¼˜è¶Šæ€§ã€‚</p>
<h2 data-id="heading-13">Seed-Prover 1.5: Mastering Undergraduate-Level Theorem Proving via Learning from Experience</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.17260" target="_blank" title="https://arxiv.org/abs/2512.17260" ref="nofollow noopener noreferrer">Seed-Prover 1.5ï¼šé€šè¿‡ç»éªŒå­¦ä¹ ç²¾é€šæœ¬ç§‘çº§å®šç†è¯æ˜</a></p>
<p>è¿‘æœŸï¼Œå¤§è¯­è¨€æ¨¡å‹ (LLM) åœ¨ç”Ÿæˆä¸¥è°¨æ•°å­¦è¯æ˜æ–¹é¢å–å¾—äº†é‡å¤§è¿›å±•ã€‚ç„¶è€Œï¼Œåˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹åœ¨å½¢å¼åŒ–è¯­è¨€ (å¦‚ Lean) ä¸­è¿›è¡Œå®šç†è¯æ˜ä»ç„¶é¢ä¸´æŒ‘æˆ˜ä¸”è®¡ç®—å¼€é”€å·¨å¤§ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†æœ¬ç§‘åŠä»¥ä¸Šéš¾åº¦çš„é—®é¢˜æ—¶ã€‚æœ¬æ–‡æå‡ºäº† <strong>Seed-Prover 1.5</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªé€šè¿‡å¤§è§„æ¨¡æ™ºèƒ½ä½“å¼ºåŒ–å­¦ä¹ è®­ç»ƒçš„å½¢å¼åŒ–å®šç†è¯æ˜æ¨¡å‹ï¼Œå¹¶é…å¥—ä¸€ä¸ªé«˜æ•ˆçš„æµ‹è¯•æ—¶æ‰©å±•å·¥ä½œæµã€‚è¯¥æ¨¡å‹åœ¨å¼ºåŒ–å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ä¸ Lean ç­‰å·¥å…·è¿›è¡Œå¹¿æ³›äº¤äº’ï¼ŒæŒç»­ç§¯ç´¯ç»éªŒï¼Œä»è€Œæ˜¾è‘—æå‡äº†å½¢å¼åŒ–å®šç†è¯æ˜çš„èƒ½åŠ›ä¸æ•ˆç‡ã€‚æ­¤å¤–ï¼Œç»“åˆè‡ªç„¶è¯­è¨€è¯æ˜é¢†åŸŸçš„æœ€æ–°è¿›å±•ï¼Œæˆ‘ä»¬çš„æµ‹è¯•æ—¶æ‰©å±•å·¥ä½œæµæœ‰æ•ˆå¼¥åˆäº†è‡ªç„¶è¯­è¨€ä¸å½¢å¼åŒ–è¯­è¨€ä¹‹é—´çš„é¸¿æ²Ÿã€‚ä¸ç°æœ‰æœ€å…ˆè¿›æ–¹æ³•ç›¸æ¯”ï¼ŒSeed-Prover 1.5 åœ¨æ›´å°çš„è®¡ç®—é¢„ç®—ä¸‹å®ç°äº†æ›´ä¼˜çš„æ€§èƒ½ï¼šå®ƒè§£å†³äº† <strong>88% çš„ PutnamBench</strong> (æœ¬ç§‘çº§)ã€<strong>80% çš„ Fate-H</strong> (ç ”ç©¶ç”Ÿçº§) ä»¥åŠ <strong>33% çš„ Fate-X</strong> (åšå£«çº§) é—®é¢˜ã€‚å°¤ä¸ºçªå‡ºçš„æ˜¯ï¼Œåˆ©ç”¨æœ¬ç³»ç»Ÿï¼Œæˆ‘ä»¬åœ¨ 9 å°æ—¶å†…è§£å†³äº† <strong>2025 å¹´æ™®ç‰¹å—æ•°å­¦ç«èµ› 12 é“é¢˜ç›®ä¸­çš„ 11 é“</strong>ã€‚æˆ‘ä»¬çš„ç ”ç©¶è¡¨æ˜ï¼Œç”±é«˜è´¨é‡å½¢å¼åŒ–åé¦ˆé©±åŠ¨çš„ç»éªŒå­¦ä¹ è§„æ¨¡åŒ–æ‰©å±•ï¼Œåœ¨å½¢å¼åŒ–æ•°å­¦æ¨ç†é¢†åŸŸæ‹¥æœ‰å·¨å¤§çš„å‘å±•æ½œåŠ›ã€‚</p>
<h2 data-id="heading-14">Learning to Reason in 4D: Dynamic Spatial Understanding for Vision Language Models</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.20557" target="_blank" title="https://arxiv.org/abs/2512.20557" ref="nofollow noopener noreferrer">å­¦ä¹ è¿›è¡Œ 4D æ¨ç†ï¼šè§†è§‰è¯­è¨€æ¨¡å‹çš„åŠ¨æ€ç©ºé—´ç†è§£</a></p>
<p>è§†è§‰è¯­è¨€æ¨¡å‹ (VLM) åœ¨é€šç”¨ç†è§£ä»»åŠ¡ä¸Šè¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨åŠ¨æ€ç©ºé—´æ¨ç† (DSR) æ–¹é¢ä»æ˜¾è–„å¼±ã€‚DSR æŒ‡çš„æ˜¯å¯¹ç‰©ä½“å‡ ä½•å½¢çŠ¶åŠå…¶åœ¨ä¸‰ç»´ç©ºé—´ä¸­éšæ—¶é—´æ¼”å˜çš„å…³ç³»è¿›è¡Œæ¨ç†ã€‚è¿™ç§è–„å¼±ä¸»è¦å½’å› äºå¯æ‰©å±•çš„ 4D æ„ŸçŸ¥è®­ç»ƒèµ„æºåŒ®ä¹ã€‚ä¸ºå¼¥åˆåœ¨æ•°æ®é›†ã€åŸºå‡†å’Œæ¨¡å‹æ–¹é¢çš„è¿™ä¸€å·®è·ï¼Œæˆ‘ä»¬æ¨å‡ºäº† DSR å¥—ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æå‡ºä¸€ç§è‡ªåŠ¨åŒ–æµæ°´çº¿ï¼Œèƒ½å¤Ÿä»çœŸå®åœºæ™¯è§†é¢‘ä¸­ä¸º DSR ä»»åŠ¡ç”Ÿæˆå¤šé¡¹é€‰æ‹©é¢˜å¯¹ã€‚è¯¥æµæ°´çº¿åˆ©ç”¨ç°ä»£è§†è§‰åŸºç¡€æ¨¡å‹ï¼Œæå–ä¸°å¯Œçš„å‡ ä½•ä¸è¿åŠ¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç›¸æœºä½å§¿ã€å±€éƒ¨ç‚¹äº‘ã€ç‰©ä½“æ©è†œã€æœå‘ä»¥åŠä¸‰ç»´è½¨è¿¹ã€‚è¿™äº›å‡ ä½•çº¿ç´¢å¯ç”¨äºæ„å»ºç”¨äºæ¨¡å‹è®­ç»ƒçš„ DSR-Train æ•°æ®é›†ï¼Œä»¥åŠç»è¿‡äººå·¥è¿›ä¸€æ­¥ç²¾ç‚¼ã€ç”¨äºè¯„ä¼°çš„ DSR-Bench åŸºå‡†ã€‚ä¸å…ˆå‰ç ”ç©¶ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ•°æ®å¼ºè°ƒä»¥ä¸‹ç‰¹æ€§ï¼š(i) æºè‡ªçœŸå®åœºæ™¯è§†é¢‘ï¼Œ(ii) å…·å¤‡ç‰©ä½“çº§å’Œåœºæ™¯çº§çš„ä¸‰ç»´ä¿¡æ¯è¦æ±‚ï¼Œ(iii) åŒ…å«è§†ç‚¹å˜æ¢ï¼Œ(iv) æ¶‰åŠå¤šç‰©ä½“äº¤äº’ï¼Œä»¥åŠ (v) æä¾›ç»†ç²’åº¦ã€åˆ†æ­¥éª¤çš„ç­”æ¡ˆã€‚é™¤äº†æ•°æ®è´¡çŒ®ï¼Œæˆ‘ä»¬è¿˜æå‡ºä¸€ä¸ªè½»é‡çº§çš„å‡ ä½•é€‰æ‹©æ¨¡å— (GSM)ï¼Œç”¨äºå°†å‡ ä½•å…ˆéªŒæ— ç¼é›†æˆåˆ° VLM ä¸­ã€‚è¯¥æ¨¡å—èƒ½å‹ç¼©é—®é¢˜è¯­ä¹‰ï¼Œå¹¶ä»é¢„è®­ç»ƒçš„ 4D é‡å»ºå…ˆéªŒä¸­æå–ä¸é—®é¢˜ç›¸å…³çš„çŸ¥è¯†ï¼Œå°†å…¶ç¼–ç ä¸ºä¸€ç»„ç´§å‡‘çš„å‡ ä½• tokenã€‚è¿™ç§æœ‰é’ˆå¯¹æ€§çš„çŸ¥è¯†æå–é¿å…äº†æ— å…³çŸ¥è¯†å¯¹æ¨¡å‹çš„å¹²æ‰°ã€‚å®éªŒè¡¨æ˜ï¼Œå°† DSR-Train å’Œ GSM é›†æˆåˆ° Qwen2.5-VL-7B æ¨¡å‹ä¸­ï¼Œèƒ½æ˜¾è‘—æå‡å…¶åŠ¨æ€ç©ºé—´æ¨ç†èƒ½åŠ›ï¼ŒåŒæ—¶ä¿æŒäº†åœ¨é€šç”¨è§†é¢‘ç†è§£åŸºå‡†ä¸Šçš„å‡†ç¡®ç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒä¸‡çº§è®¢å•è¡¨æ–°å¢å­—æ®µåº”è¯¥å¦‚ä½•åšï¼Ÿæ“ä½œå°ç»“]]></title>    <link>https://juejin.cn/post/7588093282531311668</link>    <guid>https://juejin.cn/post/7588093282531311668</guid>    <pubDate>2025-12-28T08:40:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282531311668" data-draft-id="7588124225702445096" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒä¸‡çº§è®¢å•è¡¨æ–°å¢å­—æ®µåº”è¯¥å¦‚ä½•åšï¼Ÿæ“ä½œå°ç»“"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2025-12-28T08:40:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒä¸‡çº§è®¢å•è¡¨æ–°å¢å­—æ®µåº”è¯¥å¦‚ä½•åšï¼Ÿæ“ä½œå°ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:40:02.000Z" title="Sun Dec 28 2025 08:40:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ˜é‡‘çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œè®²çš„æ˜¯åƒä¸‡çº§è®¢å•è¡¨å¦‚ä½•æ–°å¢å­—æ®µï¼Œé‡Œé¢ä»‹ç»äº†ä¸€äº›æ–¹æ³•ï¼Œæˆ‘æ­£å¥½å­¦ä¹ äº†ä¸€ä¸‹ï¼ŒåŒæ—¶ç»“åˆaiçš„å›ç­”ï¼Œæ•´ç†æˆä¸€ç¯‡åšå®¢ï¼Œè®°å½•ä¸€ä¸‹æ“ä½œæŒ‡å—ã€‚</p>
<p>é’ˆå¯¹åƒä¸‡çº§è®¢å•è¡¨æ–°å¢å­—æ®µï¼Œéœ€è¦ç»¼åˆè€ƒè™‘<strong>ä¸šåŠ¡è¿ç»­æ€§ã€é”è¡¨é£é™©ã€æ•°æ®ä¸€è‡´æ€§ã€å›æ»šæ–¹æ¡ˆ</strong>ç­‰å› ç´ ã€‚ä»¥ä¸‹æ˜¯åˆ†åœºæ™¯çš„è¯¦ç»†æ–¹æ¡ˆï¼š</p>
<hr/>
<h3 data-id="heading-0"><strong>1. ä½å³°æœŸ+çŸ­æ—¶é—´åœæœºï¼ˆæœ€ç¨³å¦¥ï¼‰</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¯æ¥å—åˆ†é’Ÿçº§åœæœºï¼ˆå¦‚å‡Œæ™¨ä½å³°æœŸï¼‰ã€‚<br/>
<strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><strong>å¤‡ä»½</strong>ï¼šæå‰å…¨é‡å¤‡ä»½ï¼ˆç‰©ç†å¤‡ä»½+Binlogï¼‰ã€‚</li>
<li><strong>åœæœº</strong>ï¼šæ–­å¼€åº”ç”¨è¿æ¥ï¼ˆå¦‚æ”¹åŸŸåã€åœæ­¢æœåŠ¡ï¼‰ã€‚</li>
<li><strong>DDLç›´æ¥æ‰§è¡Œ</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> new_col <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>, ALGORITHM<span class="hljs-operator">=</span>INPLACE, LOCK<span class="hljs-operator">=</span><span class="hljs-keyword">NONE</span>;
</code></pre>
<ul>
<li><strong>MySQL 5.6+</strong>ï¼šè‹¥æ»¡è¶³<code>INPLACE</code>æ¡ä»¶ï¼ˆå¦‚æ— å…¨æ–‡ç´¢å¼•ã€è§¦å‘å™¨ç­‰ï¼‰ï¼Œå¯<code>LOCK=NONE</code>é¿å…é”è¡¨ã€‚</li>
<li><strong>MySQL 8.0</strong>ï¼šæ”¯æŒ<code>INSTANT</code>ç®—æ³•ï¼ˆä»…ä¿®æ”¹å…ƒæ•°æ®ï¼Œç§’çº§å®Œæˆï¼‰ï¼Œä½†é™åˆ¶è¾ƒå¤šï¼ˆå¦‚ä¸èƒ½æ˜¯<code>NOT NULL</code>ã€ä¸èƒ½æœ‰é»˜è®¤å€¼ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>éªŒè¯</strong>ï¼šæ£€æŸ¥è¡¨ç»“æ„ã€æ•°æ®ä¸€è‡´æ€§ï¼ˆå¦‚é‡‡æ ·å¯¹æ¯”ï¼‰ã€‚</li>
<li><strong>æ¢å¤æœåŠ¡</strong>ï¼šé€æ­¥æ”¾å¼€æµé‡ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-1"><strong>2. åœ¨çº¿DDLï¼ˆæ— åœæœºï¼Œä½†éœ€æƒè¡¡é£é™©ï¼‰</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ— æ³•åœæœºï¼Œä¸”è¡¨ä¸ºInnoDBã€MySQL 5.6+ã€‚<br/>
<strong>å…³é”®å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>ALGORITHM=INPLACE</code>ï¼šé¿å…é‡å»ºè¡¨ï¼ˆéœ€æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æ— è§¦å‘å™¨ã€å¤–é”®ç­‰ï¼‰ã€‚</li>
<li><code>LOCK=NONE</code>ï¼šå…è®¸å¹¶å‘è¯»å†™ï¼ˆè‹¥ä¸æ”¯æŒä¼šé™çº§ä¸º<code>SHARED</code>æˆ–<code>EXCLUSIVE</code>ï¼‰ã€‚</li>
<li><code>old_alter_table=OFF</code>ï¼šå¼ºåˆ¶ä½¿ç”¨æ–°ç®—æ³•ï¼ˆMySQL 5.6+é»˜è®¤ï¼‰ã€‚</li>
</ul>
<p><strong>é£é™©</strong>ï¼š</p>
<ul>
<li>å¤§è¡¨å¯èƒ½è§¦å‘<strong>IO/CPUé£™å‡</strong>ï¼ˆç›‘æ§<code>InnoDB_history_list_length</code>ã€ç£ç›˜IOï¼‰ã€‚</li>
<li><strong>é•¿æ—¶é—´é”ç­‰å¾…</strong>ï¼šè‹¥å­˜åœ¨é•¿äº‹åŠ¡ï¼ˆå¦‚<code>SHOW PROCESSLIST</code>ä¸­<code>Waiting for table metadata lock</code>ï¼‰ï¼Œéœ€å…ˆ kill é•¿äº‹åŠ¡ã€‚</li>
</ul>
<p><strong>ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li><strong>åˆ†æ‰¹æ“ä½œ</strong>ï¼šè‹¥éœ€<code>NOT NULL</code>+é»˜è®¤å€¼ï¼Œå¯åˆ†ä¸¤æ­¥ï¼š
<ol>
<li>å…ˆåŠ  nullable å­—æ®µï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> new_col <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NULL</span>, ALGORITHM<span class="hljs-operator">=</span>INPLACE, LOCK<span class="hljs-operator">=</span><span class="hljs-keyword">NONE</span>;
</code></pre>
</li>
<li>åç»­ç”¨<code>UPDATE</code>åˆ†æ‰¹å†™é»˜è®¤å€¼ï¼ˆå¦‚æŒ‰IDåŒºé—´åˆ†æ‰¹ï¼Œé¿å…ä¸€æ¬¡æ€§å…¨è¡¨æ›´æ–°ï¼‰ã€‚</li>
<li>æœ€åæ”¹<code>NOT NULL</code>ï¼ˆéœ€ç¡®ä¿æ— NULLå€¼ï¼‰ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders MODIFY <span class="hljs-keyword">COLUMN</span> new_col <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, ALGORITHM<span class="hljs-operator">=</span>INPLACE, LOCK<span class="hljs-operator">=</span><span class="hljs-keyword">NONE</span>;
</code></pre>
</li>
</ol>
</li>
</ul>
<hr/>
<h3 data-id="heading-2"><strong>3. å½±å­è¡¨åˆ‡æ¢ï¼ˆé›¶åœæœºï¼Œå¤æ‚åº¦é«˜ï¼‰</strong></h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šè¡¨æå¤§ï¼ˆå¦‚äº¿çº§ï¼‰ã€DDLä¸å¯æ¥å—ï¼Œæˆ–éœ€æ·»åŠ <strong>å¤æ‚çº¦æŸ</strong>ï¼ˆå¦‚å¤–é”®ã€å…¨æ–‡ç´¢å¼•ï¼‰ã€‚<br/>
<strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><strong>åˆ›å»ºå½±å­è¡¨</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders_new <span class="hljs-keyword">LIKE</span> orders;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders_new <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> new_col <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>;
</code></pre>
</li>
<li><strong>åŒæ­¥æ•°æ®</strong>ï¼š
<ul>
<li><strong>å…¨é‡åŒæ­¥</strong>ï¼š<code>INSERT INTO orders_new SELECT * FROM orders</code>ï¼ˆéœ€åˆ†æ‰¹ï¼Œé¿å…é”è¡¨ï¼‰ã€‚</li>
<li><strong>å¢é‡åŒæ­¥</strong>ï¼šç”¨<code>Binlog</code>æˆ–<code>è§¦å‘å™¨</code>åŒæ­¥å¢é‡æ•°æ®ï¼ˆå¦‚Canalã€Maxwellï¼‰ã€‚</li>
</ul>
</li>
<li><strong>åˆ‡æ¢è¡¨å</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql">RENAME <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">TO</span> orders_old, orders_new <span class="hljs-keyword">TO</span> orders;
</code></pre>
<ul>
<li><strong>åŸå­æ“ä½œ</strong>ï¼šMySQLä¼šæŒæœ‰å…¨å±€é”ï¼Œä½†æ—¶é—´æçŸ­ï¼ˆæ¯«ç§’çº§ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>æ¸…ç†</strong>ï¼šéªŒè¯ååˆ é™¤æ—§è¡¨ï¼ˆå»¶è¿Ÿå‡ å¤©ï¼Œç¡®ä¿æ— å›æ»šéœ€æ±‚ï¼‰ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-3">**4. æ‹“å±•è¡¨ï¼ŒæŒ‰éœ€å…³è”æŸ¥è¯¢ **</h3>
<p>å¯ä»¥ä½¿ç”¨æ‹“å±•è¡¨çš„æ–¹æ¡ˆ</p>
<pre><code class="hljs language-diff" lang="diff">order_extend
<span class="hljs-deletion">- order_id</span>
<span class="hljs-deletion">- extra_field_x</span>
<span class="hljs-deletion">- extra_field_y</span>
</code></pre>
<p>åŸè¡¨ä¸åŠ¨ï¼Œæœ‰æ–°å­—æ®µæ—¶å†™å…¥åˆ°æ‹“å±•è¡¨é‡Œï¼Œä¸šåŠ¡æŸ¥è¯¢æ—¶åšjoinã€‚
éœ€è¦æŸ¥è¯¢éº»çƒ¦ç‚¹ï¼Œä½†ä¼˜ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ä¸»è¡¨ç»“æœç¨³å®š</li>
<li>æ‹“å±•å­—æ®µå¯åŠ¨æ€ç®¡ç†</li>
<li>ä¸å½±å“ç°æœ‰ä¸šåŠ¡é€»è¾‘</li>
</ul>
<h3 data-id="heading-4">**5. é«˜çº§ç©æ³•ï¼šJSONæ‹“å±•å­—æ®µ **</h3>
<p>å®šä¹‰ä¸€ä¸ªextå­—æ®µï¼Œç±»å‹ä¸ºTEXTæˆ–JSONï¼Œæ‰€æœ‰æ–°å¢å­—æ®µéƒ½æ”¾åœ¨é‡Œé¢å»ï¼Œç”¨è§„åˆ™è§£æã€‚è¿™ä¸ªæ–¹æ³•æ˜¯ç›®å‰å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•</p>
<pre><code class="hljs language-arduino" lang="arduino">{
  <span class="hljs-string">""</span>topic<span class="hljs-string">": "</span><span class="hljs-string">",
  "</span>idkp<span class="hljs-string">": "</span><span class="hljs-string">"
}
</span></code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œä»¥åæœ‰æ–°å­—æ®µå°±å¡è¿›å»ï¼Œä¸ç”¨å†ä¿®æ”¹è¡¨ç»“æ„ï¼Œéå¸¸çµæ´»ã€‚å«åšschema-less æ‹“å±•ç»“æ„ã€‚</p>
<h3 data-id="heading-5"><strong>6. å…¶ä»–å…³é”®ç»†èŠ‚</strong></h3>
<ul>
<li><strong>é»˜è®¤å€¼å¤„ç†</strong>ï¼š
<ul>
<li><strong>MySQL 5.6+</strong>ï¼š<code>ALGORITHM=INPLACE</code>ä¸æ”¯æŒ<code>NOT NULL</code>+é»˜è®¤å€¼ï¼ˆä¼šé‡å»ºè¡¨ï¼‰ï¼Œéœ€ç”¨å½±å­è¡¨æˆ–åˆ†æ‰¹æ›´æ–°ã€‚</li>
<li><strong>MySQL 8.0</strong>ï¼šæ”¯æŒ<code>INSTANT</code>ç®—æ³•åŠ <code>NOT NULL</code>+é»˜è®¤å€¼ï¼ˆä»…é™é<code>VARCHAR</code>å˜é•¿å­—æ®µï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ç£ç›˜ç©ºé—´</strong>ï¼š
<ul>
<li><code>INPLACE</code>ç®—æ³•éœ€é¢å¤–<strong>æ’åºç¼“å†²åŒº</strong>ï¼ˆçº¦ç­‰äºè¡¨å¤§å°ï¼‰ï¼Œç¡®ä¿ç£ç›˜å‰©ä½™ç©ºé—´&gt;è¡¨å¤§å°Ã—2ã€‚</li>
</ul>
</li>
<li><strong>å›æ»šæ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>æå‰éªŒè¯<code>DDL</code>æ˜¯å¦å¯é€†ï¼ˆå¦‚<code>DROP COLUMN</code>ä¼šç«‹å³é‡Šæ”¾ç©ºé—´ï¼Œæ— æ³•å›æ»šï¼‰ã€‚</li>
<li>ä¿ç•™å¤‡ä»½+Binlogï¼Œå¿…è¦æ—¶å¯åŸºäºæ—¶é—´ç‚¹æ¢å¤ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>æ€»ç»“é€‰æ‹©</strong></h3>







































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>è€—æ—¶</th><th>é£é™©</th></tr></thead><tbody><tr><td>å¯åœæœº</td><td>ä½å³°æœŸç›´æ¥DDL</td><td>åˆ†é’Ÿçº§</td><td>ä½</td></tr><tr><td>ä¸å¯åœæœº+ç®€å•å­—æ®µ</td><td>åœ¨çº¿DDLï¼ˆINPLACEï¼‰</td><td>åˆ†é’Ÿåˆ°å°æ—¶</td><td>ä¸­ï¼ˆç›‘æ§é”ç­‰å¾…ï¼‰</td></tr><tr><td>ä¸å¯åœæœº+å¤æ‚å­—æ®µ</td><td>å½±å­è¡¨åˆ‡æ¢</td><td>å°æ—¶åˆ°å¤©æ•°</td><td>é«˜ï¼ˆéœ€åŒæ­¥å·¥å…·ï¼‰</td></tr><tr><td>æ‹“å±•è¡¨ï¼ŒæŒ‰éœ€å…³è”æŸ¥è¯¢</td><td/><td/></tr><tr><td>JSONæ‹“å±•å­—æ®µ</td><td/><td/></tr></tbody></table>
<p><strong>æœ€ç»ˆå»ºè®®</strong>ï¼š</p>
<ol>
<li><strong>ä¼˜å…ˆæµ‹è¯•</strong>ï¼šåœ¨æµ‹è¯•åº“ç”¨<code>ALTER TABLE ... ALGORITHM=INPLACE, LOCK=NONE</code>éªŒè¯æ˜¯å¦æ”¯æŒåœ¨çº¿DDLã€‚</li>
<li><strong>ç›‘æ§</strong>ï¼šæ‰§è¡Œæ—¶å®æ—¶ç›‘æ§<code>SHOW PROCESSLIST</code>ã€ç£ç›˜IOã€é•¿äº‹åŠ¡ã€‚</li>
<li><strong>å…œåº•</strong>ï¼šå¤‡ä»½+å½±å­è¡¨æ–¹æ¡ˆå¤‡ç”¨ï¼Œç¡®ä¿å¯éšæ—¶åˆ‡æ¢ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobFlow çš„å»¶æ—¶è°ƒåº¦ï¼šå¦‚ä½•å¯é åœ°å¤„ç†â€œ30åˆ†é’Ÿåå–æ¶ˆè®¢å•â€]]></title>    <link>https://juejin.cn/post/7588095884070682624</link>    <guid>https://juejin.cn/post/7588095884070682624</guid>    <pubDate>2025-12-28T08:40:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588095884070682624" data-draft-id="7588093282531295284" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobFlow çš„å»¶æ—¶è°ƒåº¦ï¼šå¦‚ä½•å¯é åœ°å¤„ç†â€œ30åˆ†é’Ÿåå–æ¶ˆè®¢å•â€"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-28T08:40:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobFlow çš„å»¶æ—¶è°ƒåº¦ï¼šå¦‚ä½•å¯é åœ°å¤„ç†â€œ30åˆ†é’Ÿåå–æ¶ˆè®¢å•â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:40:57.000Z" title="Sun Dec 28 2025 08:40:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€æºåœ°å€ä¸ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><strong>å¼€æºåœ°å€</strong>ï¼š<code>https://gitee.com/sh_wangwanbao/job-flow</code></li>
<li><strong>ç³»åˆ—æ–‡ç« ï¼š</strong>
<ul>
<li><a href="https://juejin.cn/post/7583469866007969827" target="_blank" title="https://juejin.cn/post/7583469866007969827">ç¬¬ä¸€ç¯‡ï¼šåŸºäºNacosçš„è½»é‡ä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆ â€”â€” ä» XXL-Job çš„ç—›ç‚¹è¯´èµ·</a></li>
<li><a href="https://juejin.cn/post/7584353612501106729" target="_blank" title="https://juejin.cn/post/7584353612501106729">ç¬¬äºŒç¯‡ï¼šJobFlow å®ç°æ–¹æ¡ˆï¼šäº‘åŸç”Ÿæ—¶ä»£çš„ä»»åŠ¡è°ƒåº¦æ–°æ€è·¯</a></li>
<li><a href="https://juejin.cn/post/7585727457472823296" target="_blank" title="https://juejin.cn/post/7585727457472823296">ç¬¬ä¸‰ç¯‡ï¼šJobFlow å®æˆ˜ï¼šæ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšåˆ°çš„</a></li>
<li><a href="https://juejin.cn/post/7585751355593506835" target="_blank" title="https://juejin.cn/post/7585751355593506835">ç¬¬å››ç¯‡ï¼šJobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´</a></li>
<li><a href="https://juejin.cn/post/7588028859541307418" target="_blank" title="https://juejin.cn/post/7588028859541307418">ç¬¬äº”ç¯‡ï¼šJobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ</a></li>
<li><a href="https://juejin.cn/spost/7588067055481634825" target="_blank" title="https://juejin.cn/spost/7588067055481634825">ç¬¬å…­ç¯‡ï¼šJobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨</a></li>
<li><a href="https://juejin.cn/spost/7588095884070682624" target="_blank" title="https://juejin.cn/spost/7588095884070682624">ç¬¬ä¸ƒç¯‡ï¼šJobFlow çš„å»¶æ—¶è°ƒåº¦ï¼šå¦‚ä½•å¯é åœ°å¤„ç†â€œ30åˆ†é’Ÿåå–æ¶ˆè®¢å•â€</a></li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">å‰è¨€</h2>
<p>å‰é¢å‡ ç¯‡æ–‡ç« è®²äº†å‘¨æœŸä»»åŠ¡çš„è°ƒåº¦ï¼Œä½†åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œè¿˜æœ‰å¦ä¸€ç§å¸¸è§éœ€æ±‚ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·ä¸‹å•å30åˆ†é’Ÿæœªæ”¯ä»˜ â†’ è‡ªåŠ¨å–æ¶ˆè®¢å•
æ”¯ä»˜æˆåŠŸå15åˆ†é’Ÿ â†’ å‘é€ç¡®è®¤çŸ­ä¿¡
ä¼šå‘˜åˆ°æœŸå‰3å¤© â†’ å‘é€ç»­è´¹æé†’
</code></pre>
<p>è¿™äº›éƒ½ä¸æ˜¯"æ¯å¤©å‡Œæ™¨2ç‚¹"è¿™ç§å›ºå®šå‘¨æœŸï¼Œè€Œæ˜¯<strong>è¿è¡Œæ—¶åŠ¨æ€æŒ‡å®šçš„å»¶æ—¶ä»»åŠ¡</strong>ã€‚</p>
<p>JobFlow çš„å»¶æ—¶è°ƒåº¦å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²å»¶æ—¶è°ƒåº¦æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€å»¶æ—¶è°ƒåº¦ vs å®šæ—¶ä»»åŠ¡</h2>
<p>å…ˆçœ‹çœ‹ä¸¤è€…çš„åŒºåˆ«ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å®šæ—¶ä»»åŠ¡&lt;br/&gt;Cronè¡¨è¾¾å¼] --&gt; B[æ¯å¤©å‡Œæ™¨2ç‚¹&lt;br/&gt;å‘¨æœŸæ‰§è¡Œ]
    C[å»¶æ—¶ä»»åŠ¡&lt;br/&gt;æŒ‡å®šæ—¶é—´ç‚¹] --&gt; D[30åˆ†é’Ÿå&lt;br/&gt;æ‰§è¡Œä¸€æ¬¡]
    
    style A fill:#87CEEB
    style B fill:#90EE90
    style C fill:#FFB6C1
    style D fill:#FFE4B5
</code></pre>
<p><strong>å®šæ—¶ä»»åŠ¡ï¼š</strong></p>
<ul>
<li>é…ç½®ï¼šåœ¨æ•°æ®åº“é‡Œé…å¥½ Cron è¡¨è¾¾å¼</li>
<li>è§¦å‘ï¼šè°ƒåº¦å™¨æŒ‰ Cron å‘¨æœŸæ€§è§¦å‘</li>
<li>åœºæ™¯ï¼šæŠ¥è¡¨ç”Ÿæˆã€æ•°æ®åŒæ­¥ã€å¯¹è´¦</li>
</ul>
<p><strong>å»¶æ—¶ä»»åŠ¡ï¼š</strong></p>
<ul>
<li>é…ç½®ï¼šè¿è¡Œæ—¶é€šè¿‡ API åŠ¨æ€åˆ›å»º</li>
<li>è§¦å‘ï¼šåˆ°æŒ‡å®šæ—¶é—´ç‚¹æ‰§è¡Œä¸€æ¬¡</li>
<li>åœºæ™¯ï¼šè®¢å•è¶…æ—¶ã€æ¶ˆæ¯å»¶è¿Ÿã€å®šæ—¶æé†’</li>
</ul>
<p>å¯¹æ¯”è¡¨æ ¼ï¼š</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>å®šæ—¶ä»»åŠ¡</th><th>å»¶æ—¶ä»»åŠ¡</th></tr></thead><tbody><tr><td>è§¦å‘æ–¹å¼</td><td>å‘¨æœŸæ€§ï¼ˆCronï¼‰</td><td>ä¸€æ¬¡æ€§ï¼ˆæ—¶é—´ç‚¹ï¼‰</td></tr><tr><td>åˆ›å»ºæ–¹å¼</td><td>æ•°æ®åº“é…ç½®</td><td>API åŠ¨æ€è°ƒç”¨</td></tr><tr><td>é‡è¯•æœºåˆ¶</td><td>éœ€è‡ªå·±å®ç°</td><td>å†…ç½®æŒ‡æ•°é€€é¿</td></tr><tr><td>å¹‚ç­‰æ€§</td><td>éœ€è‡ªå·±ä¿è¯</td><td>æ¡†æ¶å±‚é¢ä¿éšœ</td></tr></tbody></table>
<h2 data-id="heading-3">äºŒã€æ ¸å¿ƒè®¾è®¡</h2>
<h3 data-id="heading-4">æ•°æ®æ¨¡å‹</h3>
<p>å»¶æ—¶ä»»åŠ¡å­˜åœ¨ <code>job_delay_task</code> è¡¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> job_delay_task (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    trace_id <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,      <span class="hljs-comment">-- é“¾è·¯è¿½è¸ª</span>
    biz_uuid <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,      <span class="hljs-comment">-- ä¸šåŠ¡å¹‚ç­‰ID</span>
    service_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,        <span class="hljs-comment">-- ç›®æ ‡æœåŠ¡</span>
    handler <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,             <span class="hljs-comment">-- Handleråç§°</span>
    execute_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,           <span class="hljs-comment">-- æœŸæœ›æ‰§è¡Œæ—¶é—´</span>
    next_attempt_time <span class="hljs-type">TIMESTAMP</span>,               <span class="hljs-comment">-- ä¸‹æ¬¡å°è¯•æ—¶é—´</span>
    payload_json TEXT,                         <span class="hljs-comment">-- ä¸šåŠ¡å‚æ•°</span>
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,               <span class="hljs-comment">-- çŠ¶æ€</span>
    retry_count <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,                 <span class="hljs-comment">-- é‡è¯•æ¬¡æ•°</span>
    max_retry <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">3</span>,                   <span class="hljs-comment">-- æœ€å¤§é‡è¯•</span>
    ...
);
</code></pre>
<p>å…³é”®å­—æ®µï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[biz_uuid&lt;br/&gt;ä¸šåŠ¡å”¯ä¸€ID] --&gt; B[å¹‚ç­‰ä¿è¯&lt;br/&gt;é˜²é‡å¤æäº¤]
    C[next_attempt_time&lt;br/&gt;ä¸‹æ¬¡å°è¯•æ—¶é—´] --&gt; D[æ‰«æä¾æ®&lt;br/&gt;å†³å®šä½•æ—¶æ‰§è¡Œ]
    E[status&lt;br/&gt;ä»»åŠ¡çŠ¶æ€] --&gt; F[çŠ¶æ€æœº&lt;br/&gt;é©±åŠ¨æµè½¬]
    
    style A fill:#87CEEB
    style C fill:#FFE4B5
    style E fill:#FFB6C1
    style B fill:#90EE90
    style D fill:#90EE90
    style F fill:#90EE90
</code></pre>
<p><strong>biz_uuid</strong>ï¼šä¸šåŠ¡æ–¹ä¼ å…¥çš„å”¯ä¸€IDï¼Œç”¨äºå¹‚ç­‰</p>
<ul>
<li>ç¤ºä¾‹ï¼š<code>order-timeout-12345</code></li>
<li>å”¯ä¸€çº¦æŸï¼šé‡å¤æäº¤è¿”å›å·²æœ‰è®°å½•</li>
</ul>
<p><strong>next_attempt_time</strong>ï¼šæ ¸å¿ƒå­—æ®µï¼Œå†³å®šä»€ä¹ˆæ—¶å€™æ‰§è¡Œ</p>
<ul>
<li>åˆå§‹å€¼ï¼š<code>execute_time</code>ï¼ˆä¸šåŠ¡æœŸæœ›æ—¶é—´ï¼‰</li>
<li>å¤±è´¥åï¼šæŒ‰æŒ‡æ•°é€€é¿å»¶åï¼ˆ+3åˆ†é’Ÿã€+5åˆ†é’Ÿï¼‰</li>
</ul>
<p><strong>status</strong>ï¼šçŠ¶æ€æœºæµè½¬</p>
<ul>
<li>PENDINGï¼šç­‰å¾…æ‰§è¡Œ</li>
<li>SENDINGï¼šæ­£åœ¨è°ƒç”¨</li>
<li>SENTï¼šæ‰§è¡ŒæˆåŠŸ</li>
<li>FAILEDï¼šå¤±è´¥ï¼ˆå¯é‡è¯•æˆ–æœ€ç»ˆå¤±è´¥ï¼‰</li>
</ul>
<h3 data-id="heading-5">çŠ¶æ€æœº</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[PENDING&lt;br/&gt;ç­‰å¾…ä¸­] --&gt; B[SENDING&lt;br/&gt;è°ƒç”¨ä¸­]
    B --&gt; C[SENT&lt;br/&gt;å·²å®Œæˆ]
    B --&gt; D[FAILED&lt;br/&gt;å¤±è´¥]
    D --&gt; E{é‡è¯•æ¬¡æ•°?}
    E --&gt;|æœªè¾¾ä¸Šé™| A
    E --&gt;|è¾¾åˆ°ä¸Šé™| F[FAILED&lt;br/&gt;æœ€ç»ˆå¤±è´¥]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#90EE90
    style D fill:#FFB6C1
    style F fill:#FF6B6B
</code></pre>
<p>æ­£å¸¸æµç¨‹ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">åˆ›å»ºä»»åŠ¡ â†’ PENDING
â†“
æ—¶é—´åˆ°äº† â†’ SENDINGï¼ˆ<span class="hljs-built_in">CAS</span>æŠ¢å ï¼‰
â†“
HTTPè°ƒç”¨ â†’ SENT
</code></pre>
<p>å¤±è´¥é‡è¯•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">HTTPè°ƒç”¨å¤±è´¥ â†’ FAILED
â†“
retry_count &lt; max_retry â†’ å›åˆ° PENDING
â†“
<span class="hljs-attr">next_attempt_time</span> = now + æŒ‡æ•°é€€é¿æ—¶é—´
â†“
ç­‰å¾…ä¸‹æ¬¡æ‰«æ
</code></pre>
<p>æœ€ç»ˆå¤±è´¥ï¼š</p>
<pre><code class="hljs">retry_count &gt;= max_retry â†’ æ ‡è®°ä¸ºæœ€ç»ˆå¤±è´¥
â†’ ä¸å†é‡è¯•
â†’ éœ€è¦äººå·¥ä»‹å…¥
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€åˆ›å»ºå»¶æ—¶ä»»åŠ¡</h2>
<h3 data-id="heading-7">APIè°ƒç”¨</h3>
<p>ä¸šåŠ¡æ–¹é€šè¿‡HTTPæ¥å£åˆ›å»ºå»¶æ—¶ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-http" lang="http">POST /api/delay-tasks
Content-Type: application/json

{
  "serviceName": "order-service",
  "handler": "orderTimeoutHandler",
  "executeTime": "2025-12-28T16:00:00",
  "bizUuid": "order-timeout-12345",
  "payloadJson": "{\"orderId\":\"12345\"}"
}
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[serviceName&lt;br/&gt;order-service] --&gt; B[ç›®æ ‡æœåŠ¡&lt;br/&gt;ä»Nacoså‘ç°]
    C[handler&lt;br/&gt;orderTimeoutHandler] --&gt; D[Handleråç§°&lt;br/&gt;æ‰§è¡Œå™¨å®ç°]
    E[executeTime&lt;br/&gt;2025-12-28 16:00] --&gt; F[æœŸæœ›æ‰§è¡Œæ—¶é—´&lt;br/&gt;åˆ°æ—¶è§¦å‘]
    G[bizUuid&lt;br/&gt;order-timeout-12345] --&gt; H[å¹‚ç­‰ID&lt;br/&gt;é˜²æ­¢é‡å¤]
    
    style A fill:#87CEEB
    style C fill:#87CEEB
    style E fill:#FFE4B5
    style G fill:#FFB6C1
    style B fill:#90EE90
    style D fill:#90EE90
    style F fill:#90EE90
    style H fill:#90EE90
</code></pre>
<h3 data-id="heading-8">å¤„ç†æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ¥æ”¶è¯·æ±‚] --&gt; B[ç”ŸæˆtraceId]
    B --&gt; C[å°è£…å®ä½“]
    C --&gt; D{bizUuid&lt;br/&gt;å·²å­˜åœ¨?}
    D --&gt;|æ˜¯| E[è¿”å›å·²æœ‰è®°å½•&lt;br/&gt;å¹‚ç­‰]
    D --&gt;|å¦| F[æ’å…¥æ•°æ®åº“&lt;br/&gt;è¿”å›æ–°è®°å½•]
    
    style A fill:#87CEEB
    style B fill:#87CEEB
    style C fill:#87CEEB
    style D fill:#FFE4B5
    style E fill:#90EE90
    style F fill:#90EE90
</code></pre>
<p>æ ¸å¿ƒä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. ç”Ÿæˆ traceId</span>
<span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"delay_time-"</span> + DateTimeFormatter.ofPattern(<span class="hljs-string">"yyyyMMddHHmmss"</span>)
    .format(LocalDateTime.now()) + <span class="hljs-string">"-"</span> + shortUuid();

<span class="hljs-comment">// 2. å°è£…å®ä½“</span>
<span class="hljs-type">JobDelayTask</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JobDelayTask</span>();
task.setTraceId(traceId);
task.setBizUuid(request.getBizUuid());
task.setServiceName(request.getServiceName());
task.setHandler(request.getHandler());
task.setExecuteTime(request.getExecuteTime());
task.setNextAttemptTime(request.getExecuteTime());  <span class="hljs-comment">// åˆå§‹å€¼</span>
task.setPayloadJson(request.getPayloadJson());
task.setStatus(<span class="hljs-string">"PENDING"</span>);
task.setRetryCount(<span class="hljs-number">0</span>);
task.setMaxRetry(<span class="hljs-number">3</span>);

<span class="hljs-comment">// 3. æ’å…¥æˆ–è·å–</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> delayTaskRepository.insert(task);
} <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
    <span class="hljs-comment">// bizUuid å†²çªï¼Œè¿”å›å·²æœ‰è®°å½•ï¼ˆå¹‚ç­‰ï¼‰</span>
    <span class="hljs-keyword">return</span> delayTaskRepository.findByBizUuid(request.getBizUuid());
}
</code></pre>
<p><strong>å¹‚ç­‰æ€§ä¿è¯ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">ä¸šåŠ¡æ–¹é‡å¤æäº¤ï¼š
POST /api/delay-tasksï¼ˆbizUuid: order-timeout<span class="hljs-number">-12345</span>ï¼‰
â†’ ç¬¬<span class="hljs-number">1</span>æ¬¡ï¼šæ’å…¥æˆåŠŸï¼Œè¿”å›æ–°è®°å½•
â†’ ç¬¬<span class="hljs-number">2</span>æ¬¡ï¼šå”¯ä¸€çº¦æŸå†²çªï¼Œè¿”å›å·²æœ‰è®°å½•
â†’ ä¸šåŠ¡æ–¹å¾—åˆ°ç›¸åŒçš„ traceId
</code></pre>
<h2 data-id="heading-9">å››ã€æ‰«æä¸è°ƒåº¦</h2>
<h3 data-id="heading-10">å®šæ—¶æ‰«æ</h3>
<p>è°ƒåº¦å™¨æ¯5ç§’æ‰«æä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(fixedDelay = 5000)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scanAndDispatch</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. æ‰«æåˆ°æœŸä»»åŠ¡</span>
    List&lt;JobDelayTask&gt; dueTasks = findDueTasks();
    <span class="hljs-keyword">for</span> (JobDelayTask task : dueTasks) {
        dispatchDelayTask(task);
    }
    
    <span class="hljs-comment">// 2. æ‰«æ SENDING è¶…æ—¶ä»»åŠ¡</span>
    List&lt;JobDelayTask&gt; stuckTasks = findStuckSendingTasks();
    <span class="hljs-keyword">for</span> (JobDelayTask task : stuckTasks) {
        handleSendingTimeout(task);
    }
}
</code></pre>
<p>æ‰«æé€»è¾‘ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å®šæ—¶æ‰«æ&lt;br/&gt;5ç§’ä¸€æ¬¡] --&gt; B[æŸ¥è¯¢åˆ°æœŸä»»åŠ¡&lt;br/&gt;PENDING/FAILED]
    A --&gt; C[æŸ¥è¯¢è¶…æ—¶ä»»åŠ¡&lt;br/&gt;SENDING]
    B --&gt; D[é€ä¸ªè°ƒåº¦]
    C --&gt; E[æ ‡è®°å¤±è´¥&lt;br/&gt;è¿›å…¥é‡è¯•]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#FFB6C1
    style D fill:#90EE90
    style E fill:#FFE4B5
</code></pre>
<p><strong>åˆ°æœŸä»»åŠ¡æŸ¥è¯¢ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-keyword">IN</span> (<span class="hljs-string">'PENDING'</span>, <span class="hljs-string">'FAILED'</span>)
  <span class="hljs-keyword">AND</span> retry_count <span class="hljs-operator">&lt;</span> max_retry
  <span class="hljs-keyword">AND</span> next_attempt_time <span class="hljs-operator">&lt;=</span> NOW()
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> next_attempt_time <span class="hljs-keyword">ASC</span>
LIMIT <span class="hljs-number">100</span>
</code></pre>
<p><strong>è¶…æ—¶ä»»åŠ¡æŸ¥è¯¢ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'SENDING'</span>
  <span class="hljs-keyword">AND</span> TIMESTAMPDIFF(<span class="hljs-keyword">SECOND</span>, updated_at, NOW()) <span class="hljs-operator">&gt;</span> <span class="hljs-number">120</span>
LIMIT <span class="hljs-number">100</span>
</code></pre>
<h3 data-id="heading-11">æ— é”è°ƒåº¦</h3>
<p>è°ƒåº¦åˆ†ä¸‰æ­¥ï¼šOwneråˆ¤å®š â†’ CASæŠ¢å  â†’ HTTPè°ƒç”¨</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ‰«æåˆ°ä»»åŠ¡] --&gt; B{isOwner?&lt;br/&gt;Hashåˆ†åŒº}
    B --&gt;|å¦| C[è·³è¿‡]
    B --&gt;|æ˜¯| D[CASæŠ¢å &lt;br/&gt;PENDING to SENDING]
    D --&gt; E{CASæˆåŠŸ?}
    E --&gt;|å¦| F[å…¶ä»–å®ä¾‹æŠ¢åˆ°]
    E --&gt;|æ˜¯| G[HTTPè°ƒç”¨æ‰§è¡Œå™¨]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style D fill:#87CEEB
    style E fill:#FFE4B5
    style G fill:#90EE90
    style C fill:#D3D3D3
    style F fill:#D3D3D3
</code></pre>
<p><strong>ç¬¬ä¸€æ­¥ï¼šOwneråˆ¤å®š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸºäº serviceName åš Hash åˆ†åŒº</span>
<span class="hljs-keyword">if</span> (!clusterInstanceService.isOwner(task.getServiceName())) {
    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// ä¸æ˜¯æˆ‘è´Ÿè´£ï¼Œè·³è¿‡</span>
}
</code></pre>
<p>åŸç†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æœ‰3ä¸ªè°ƒåº¦å™¨å®ä¾‹ï¼š
- scheduler-001
- scheduler-002
- scheduler-003

ä»»åŠ¡çš„ <span class="hljs-attr">serviceName</span> = <span class="hljs-string">"order-service"</span>
â†’ hash("order-service") % <span class="hljs-attr">3</span> = <span class="hljs-number">1</span>
â†’ scheduler-002 è´Ÿè´£
â†’ å…¶ä»–å®ä¾‹è·³è¿‡
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šCASæŠ¢å </strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// CAS æ›´æ–°çŠ¶æ€</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> tryMarkSending(
    task.getId(),
    task.getStatus(),      <span class="hljs-comment">// æœŸæœ›çŠ¶æ€ï¼šPENDING</span>
    task.getRetryCount()   <span class="hljs-comment">// æœŸæœ›é‡è¯•æ¬¡æ•°ï¼š0</span>
);

<span class="hljs-keyword">if</span> (!success) {
    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// CAS å¤±è´¥ï¼Œå…¶ä»–å®ä¾‹æŠ¢åˆ°äº†</span>
}
</code></pre>
<p>SQLå®ç°ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">UPDATE</span> job_delay_task 
<span class="hljs-keyword">SET</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'SENDING'</span>, updated_at <span class="hljs-operator">=</span> NOW()
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> ? 
  <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> ?         <span class="hljs-comment">-- æœŸæœ›çŠ¶æ€åŒ¹é…</span>
  <span class="hljs-keyword">AND</span> retry_count <span class="hljs-operator">=</span> ?    <span class="hljs-comment">-- æœŸæœ›é‡è¯•æ¬¡æ•°åŒ¹é…</span>
</code></pre>
<p>è¿”å› <code>affected_rows &gt; 0</code> è¡¨ç¤ºæŠ¢å æˆåŠŸã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦CASï¼Ÿ</strong></p>
<pre><code class="hljs language-diff" lang="diff">æç«¯æƒ…å†µï¼šOwneråˆ¤å®šé‡å 
<span class="hljs-deletion">- å®ä¾‹åˆ—è¡¨å˜åŒ–ï¼Œä¸¤ä¸ªå®ä¾‹éƒ½è®¤ä¸ºè‡ªå·±æ˜¯ owner</span>
<span class="hljs-deletion">- åŒæ—¶æ›´æ–°åŒä¸€æ¡ä»»åŠ¡</span>

CASä¿è¯ï¼š
<span class="hljs-deletion">- åªæœ‰ä¸€ä¸ªå®ä¾‹çš„ UPDATE ä¼šæˆåŠŸ</span>
<span class="hljs-deletion">- å¦ä¸€ä¸ªå®ä¾‹çš„ UPDATE è¿”å› affected_rows = 0</span>
<span class="hljs-deletion">- æœ€ç»ˆåªæœ‰ä¸€ä¸ªå®ä¾‹æ‰§è¡Œ</span>
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šHTTPè°ƒç”¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. è´Ÿè½½å‡è¡¡é€‰æ‹©å®ä¾‹</span>
List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(task.getServiceName());
<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> Math.abs(task.getTraceId().hashCode()) % instances.size();
<span class="hljs-type">ServiceInstance</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> instances.get(index);

<span class="hljs-comment">// 2. æ„é€ è¯·æ±‚</span>
<span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> instance.getUri() + <span class="hljs-string">"/internal/job/"</span> + task.getHandler();
<span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();
headers.add(<span class="hljs-string">"X-Trace-Id"</span>, task.getTraceId());
headers.add(<span class="hljs-string">"X-Biz-UUID"</span>, task.getBizUuid());

<span class="hljs-comment">// 3. å‘é€è¯·æ±‚</span>
HttpEntity&lt;String&gt; entity = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpEntity</span>&lt;&gt;(task.getPayloadJson(), headers);
ResponseEntity&lt;String&gt; response = restTemplate.exchange(
    url, HttpMethod.POST, entity, String.class);

<span class="hljs-comment">// 4. æ›´æ–°çŠ¶æ€</span>
<span class="hljs-keyword">if</span> (response.getStatusCode().is2xxSuccessful()) {
    markSent(task.getId());  <span class="hljs-comment">// æ ‡è®° SENT</span>
} <span class="hljs-keyword">else</span> {
    handleCallFailure(task);  <span class="hljs-comment">// è¿›å…¥é‡è¯•</span>
}
</code></pre>
<h2 data-id="heading-12">äº”ã€é‡è¯•æœºåˆ¶</h2>
<h3 data-id="heading-13">æŒ‡æ•°é€€é¿ç­–ç•¥</h3>
<p>å¤±è´¥åæŒ‰æŒ‡æ•°é€€é¿é‡è¯•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[é¦–æ¬¡å¤±è´¥&lt;br/&gt;retry=0] --&gt; B[+3åˆ†é’Ÿ&lt;br/&gt;retry=1]
    B --&gt; C[ç¬¬2æ¬¡å¤±è´¥&lt;br/&gt;retry=1]
    C --&gt; D[+5åˆ†é’Ÿ&lt;br/&gt;retry=2]
    D --&gt; E[ç¬¬3æ¬¡å¤±è´¥&lt;br/&gt;retry=2]
    E --&gt; F[+5åˆ†é’Ÿ&lt;br/&gt;retry=3]
    F --&gt; G[æœ€ç»ˆå¤±è´¥&lt;br/&gt;ä¸å†é‡è¯•]
    
    style A fill:#FFB6C1
    style C fill:#FFB6C1
    style E fill:#FFB6C1
    style G fill:#FF6B6B
    style B fill:#FFE4B5
    style D fill:#FFE4B5
    style F fill:#FFE4B5
</code></pre>
<p>ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleCallFailure</span><span class="hljs-params">(JobDelayTask task, String errorMsg)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">newRetryCount</span> <span class="hljs-operator">=</span> task.getRetryCount() + <span class="hljs-number">1</span>;
    
    <span class="hljs-keyword">if</span> (newRetryCount &gt;= task.getMaxRetry()) {
        <span class="hljs-comment">// è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œæ ‡è®°æœ€ç»ˆå¤±è´¥</span>
        markFailedFinal(task.getId(), newRetryCount, errorMsg);
        log.warn(<span class="hljs-string">"å»¶æ—¶ä»»åŠ¡æœ€ç»ˆå¤±è´¥ï¼ŒtraceId={}, bizUuid={}"</span>, 
            task.getTraceId(), task.getBizUuid());
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// è®¡ç®—ä¸‹æ¬¡å°è¯•æ—¶é—´</span>
    LocalDateTime nextAttempt;
    <span class="hljs-keyword">if</span> (newRetryCount == <span class="hljs-number">1</span>) {
        nextAttempt = now.plusMinutes(<span class="hljs-number">3</span>);   <span class="hljs-comment">// ç¬¬1æ¬¡é‡è¯•ï¼š+3åˆ†é’Ÿ</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newRetryCount == <span class="hljs-number">2</span>) {
        nextAttempt = now.plusMinutes(<span class="hljs-number">5</span>);   <span class="hljs-comment">// ç¬¬2æ¬¡é‡è¯•ï¼š+5åˆ†é’Ÿ</span>
    } <span class="hljs-keyword">else</span> {
        nextAttempt = now.plusMinutes(<span class="hljs-number">5</span>);   <span class="hljs-comment">// ç¬¬3æ¬¡é‡è¯•ï¼š+5åˆ†é’Ÿ</span>
    }
    
    <span class="hljs-comment">// æ›´æ–°ä¸º FAILED çŠ¶æ€ï¼Œè®¾ç½® next_attempt_time</span>
    markFailedAndScheduleNext(task.getId(), newRetryCount, nextAttempt, errorMsg);
}
</code></pre>
<p>æ—¶é—´è½´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">10:00:00  åˆ›å»ºä»»åŠ¡ï¼Œexecute_time = 10:30:00</span>
<span class="hljs-section">10:30:00  ç¬¬1æ¬¡æ‰§è¡Œï¼Œå¤±è´¥</span>
<span class="hljs-section">10:33:00  ç¬¬2æ¬¡æ‰§è¡Œï¼ˆ+3åˆ†é’Ÿï¼‰ï¼Œå¤±è´¥</span>
<span class="hljs-section">10:38:00  ç¬¬3æ¬¡æ‰§è¡Œï¼ˆ+5åˆ†é’Ÿï¼‰ï¼Œå¤±è´¥</span>
<span class="hljs-section">10:43:00  ç¬¬4æ¬¡æ‰§è¡Œï¼ˆ+5åˆ†é’Ÿï¼‰ï¼Œå¤±è´¥</span>
          è¾¾åˆ°max_retry=3ï¼Œæ ‡è®°æœ€ç»ˆå¤±è´¥
</code></pre>
<h3 data-id="heading-14">SENDINGè¶…æ—¶æ£€æµ‹</h3>
<p>æœ‰ä¸ªç‰¹æ®Šåœºæ™¯ï¼šHTTPè°ƒç”¨åï¼Œä¸€ç›´æ²¡å“åº”ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[SENDINGçŠ¶æ€] --&gt; B{è¶…è¿‡120ç§’?}
    B --&gt;|å¦| C[ç»§ç»­ç­‰å¾…]
    B --&gt;|æ˜¯| D[æ ‡è®°å¤±è´¥&lt;br/&gt;è¿›å…¥é‡è¯•]
    
    style A fill:#FFE4B5
    style B fill:#FFE4B5
    style D fill:#FFB6C1
    style C fill:#87CEEB
</code></pre>
<p>å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleSendingTimeout</span><span class="hljs-params">(JobDelayTask task)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">timeoutMsg</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SENDING timeout (over 120 seconds)"</span>;
    log.warn(<span class="hljs-string">"æ£€æµ‹åˆ°SENDINGè¶…æ—¶ï¼ŒtraceId={}, bizUuid={}"</span>, 
        task.getTraceId(), task.getBizUuid());
    
    <span class="hljs-comment">// è§†ä¸ºä¸€æ¬¡å¤±è´¥ï¼Œè¿›å…¥é‡è¯•æµç¨‹</span>
    handleCallFailure(task, timeoutMsg);
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªæ£€æµ‹ï¼Ÿ</strong></p>
<pre><code class="hljs">åœºæ™¯ï¼šHTTPè°ƒç”¨åï¼Œæ‰§è¡Œå™¨æŒ‚äº†
â†’ å›è°ƒä¸ä¼šæ¥
â†’ çŠ¶æ€ä¸€ç›´æ˜¯ SENDING
â†’ æ²¡æœ‰è¶…æ—¶æ£€æµ‹ï¼Œä»»åŠ¡å°±ä¸¢äº†

æœ‰äº†æ£€æµ‹ï¼š
â†’ 120ç§’åå‘ç° SENDING è¶…æ—¶
â†’ æ ‡è®°å¤±è´¥ï¼Œè¿›å…¥é‡è¯•
â†’ æœ€å¤šé‡è¯•3æ¬¡
</code></pre>
<h2 data-id="heading-15">å…­ã€ä¸šåŠ¡ä¾§æ€ä¹ˆç”¨</h2>
<h3 data-id="heading-16">æ‰§è¡Œå™¨å®ç°</h3>
<p>ä¸šåŠ¡æœåŠ¡åªéœ€è¦å®ç°ä¸€ä¸ª Handlerï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@JobHandler("orderTimeoutHandler")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderTimeoutHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IJobHandler</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> JobResult <span class="hljs-title function_">execute</span><span class="hljs-params">(JobContext context)</span> {
        <span class="hljs-comment">// 1. è·å– traceIdï¼ˆæ—¥å¿—è¿½è¸ªï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">traceId</span> <span class="hljs-operator">=</span> context.getTraceId();
        MDC.put(<span class="hljs-string">"traceId"</span>, traceId);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. è§£æ payload</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">payload</span> <span class="hljs-operator">=</span> context.getPayload();
            <span class="hljs-type">JSONObject</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> JSON.parseObject(payload);
            <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> json.getString(<span class="hljs-string">"orderId"</span>);
            
            <span class="hljs-comment">// 3. å¹‚ç­‰åˆ¤æ–­ï¼ˆé‡è¦ï¼ï¼‰</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderRepository.findById(orderId);
            <span class="hljs-keyword">if</span> (order.getStatus() != OrderStatus.UNPAID) {
                log.info(<span class="hljs-string">"è®¢å•çŠ¶æ€å·²å˜æ›´ï¼Œè·³è¿‡å–æ¶ˆï¼ŒorderId={}"</span>, orderId);
                <span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order already paid"</span>);
            }
            
            <span class="hljs-comment">// 4. æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
            order.setStatus(OrderStatus.CANCELED);
            order.setCancelReason(<span class="hljs-string">"Payment timeout"</span>);
            orderRepository.save(order);
            
            log.info(<span class="hljs-string">"è®¢å•è¶…æ—¶è‡ªåŠ¨å–æ¶ˆï¼ŒorderId={}"</span>, orderId);
            <span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order canceled"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å–æ¶ˆè®¢å•å¤±è´¥"</span>, e);
            <span class="hljs-keyword">return</span> JobResult.fail(<span class="hljs-string">"Cancel failed: "</span> + e.getMessage());
        } <span class="hljs-keyword">finally</span> {
            MDC.clear();
        }
    }
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<p><strong>å…³é”®ç‚¹ä¸€ï¼šå¹‚ç­‰åˆ¤æ–­</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">å¯èƒ½é‡å¤æ‰§è¡Œçš„åœºæ™¯ï¼š
- æ¡†æ¶é‡è¯•ï¼ˆå¤±è´¥åé‡è¯•<span class="hljs-number">3</span>æ¬¡ï¼‰
- ä¸šåŠ¡æ–¹é‡å¤æäº¤ï¼ˆç›¸åŒbizUuidï¼‰

å¿…é¡»åœ¨ä¸šåŠ¡é€»è¾‘é‡Œåˆ¤æ–­ï¼š
<span class="hljs-keyword">if</span> (order.getStatus() != UNPAID) {
    <span class="hljs-keyword">return</span> success;  <span class="hljs-comment">// å·²ç»å¤„ç†è¿‡äº†</span>
}
</code></pre>
<p><strong>å…³é”®ç‚¹äºŒï¼štraceIdä¼ é€’</strong></p>
<pre><code class="hljs language-css" lang="css">è°ƒåº¦å™¨ç”Ÿæˆ traceId
â†’ HTTP <span class="hljs-selector-tag">Header</span> ä¼ é€’ç»™æ‰§è¡Œå™¨
â†’ æ‰§è¡Œå™¨å†™å…¥ MDC
â†’ æ‰€æœ‰æ—¥å¿—è‡ªåŠ¨å¸¦ä¸Š traceId
â†’ ELK é‡Œæœ traceIdï¼Œçœ‹åˆ°å®Œæ•´é“¾è·¯
</code></pre>
<p><strong>å…³é”®ç‚¹ä¸‰ï¼šæ˜ç¡®è¿”å›ç»“æœ</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">æˆåŠŸï¼š<span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order canceled"</span>);
å¤±è´¥ï¼š<span class="hljs-keyword">return</span> JobResult.fail(<span class="hljs-string">"Cancel failed: "</span> + e.getMessage());

â†’ è°ƒåº¦å™¨æ ¹æ®è¿”å›ç»“æœå†³å®šï¼šæ ‡è®° SENT è¿˜æ˜¯è¿›å…¥é‡è¯•
</code></pre>
<h3 data-id="heading-17">å®Œæ•´ç¤ºä¾‹</h3>
<p>è®¢å•è¶…æ—¶å–æ¶ˆçš„å®Œæ•´æµç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç”¨æˆ·ä¸‹å•&lt;br/&gt;10:00:00] --&gt; B[åˆ›å»ºå»¶æ—¶ä»»åŠ¡&lt;br/&gt;executeTime=10:30]
    B --&gt; C[è°ƒåº¦å™¨æ‰«æ&lt;br/&gt;10:30:00]
    C --&gt; D[HTTPè°ƒç”¨&lt;br/&gt;orderTimeoutHandler]
    D --&gt; E[æ£€æŸ¥è®¢å•çŠ¶æ€]
    E --&gt; F{å·²æ”¯ä»˜?}
    F --&gt;|æ˜¯| G[è·³è¿‡å–æ¶ˆ&lt;br/&gt;è¿”å›SUCCESS]
    F --&gt;|å¦| H[å–æ¶ˆè®¢å•&lt;br/&gt;è¿”å›SUCCESS]
    G --&gt; I[æ ‡è®°SENT]
    H --&gt; I
    
    style A fill:#87CEEB
    style B fill:#87CEEB
    style C fill:#FFE4B5
    style D fill:#FFE4B5
    style E fill:#FFE4B5
    style F fill:#FFE4B5
    style G fill:#90EE90
    style H fill:#90EE90
    style I fill:#90EE90
</code></pre>
<p>ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. ç”¨æˆ·ä¸‹å•æ—¶åˆ›å»ºå»¶æ—¶ä»»åŠ¡</span>
<span class="hljs-keyword">public</span> Order <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderRequest request)</span> {
    <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
    <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
    order.setId(generateOrderId());
    order.setStatus(OrderStatus.UNPAID);
    order.setCreatedAt(LocalDateTime.now());
    orderRepository.save(order);
    
    <span class="hljs-comment">// åˆ›å»ºå»¶æ—¶ä»»åŠ¡ï¼ˆ30åˆ†é’Ÿåè‡ªåŠ¨å–æ¶ˆï¼‰</span>
    <span class="hljs-type">DelayTaskRequest</span> <span class="hljs-variable">delayTask</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DelayTaskRequest</span>();
    delayTask.setServiceName(<span class="hljs-string">"order-service"</span>);
    delayTask.setHandler(<span class="hljs-string">"orderTimeoutHandler"</span>);
    delayTask.setExecuteTime(LocalDateTime.now().plusMinutes(<span class="hljs-number">30</span>));
    delayTask.setBizUuid(<span class="hljs-string">"order-timeout-"</span> + order.getId());
    delayTask.setPayloadJson(JSON.toJSONString(
        Map.of(<span class="hljs-string">"orderId"</span>, order.getId())
    ));
    
    delayTaskClient.createDelayTask(delayTask);
    
    <span class="hljs-keyword">return</span> order;
}

<span class="hljs-comment">// 2. æ‰§è¡Œå™¨å¤„ç†è¶…æ—¶</span>
<span class="hljs-meta">@JobHandler("orderTimeoutHandler")</span>
<span class="hljs-keyword">public</span> JobResult <span class="hljs-title function_">orderTimeout</span><span class="hljs-params">(JobContext context)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> JSON.parseObject(context.getPayload())
        .getString(<span class="hljs-string">"orderId"</span>);
    
    <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderRepository.findById(orderId);
    
    <span class="hljs-comment">// å¹‚ç­‰åˆ¤æ–­</span>
    <span class="hljs-keyword">if</span> (order.getStatus() != OrderStatus.UNPAID) {
        <span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order already paid or canceled"</span>);
    }
    
    <span class="hljs-comment">// å–æ¶ˆè®¢å•</span>
    order.setStatus(OrderStatus.CANCELED);
    order.setCancelReason(<span class="hljs-string">"Payment timeout"</span>);
    orderRepository.save(order);
    
    <span class="hljs-keyword">return</span> JobResult.success(<span class="hljs-string">"Order canceled"</span>);
}
</code></pre>
<h2 data-id="heading-18">ä¸ƒã€è®¾è®¡è¦ç‚¹</h2>
<h3 data-id="heading-19">ä¸ºä»€ä¹ˆç”¨ serviceName åš Hash åˆ†åŒº</h3>
<p>å»¶æ—¶ä»»åŠ¡çš„ owner åˆ¤å®šæ˜¯æŒ‰ <code>serviceName</code> åˆ†åŒºçš„ï¼Œè€Œä¸æ˜¯æŒ‰ <code>taskId</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å»¶æ—¶ä»»åŠ¡</span>
<span class="hljs-keyword">if</span> (!clusterInstanceService.isOwner(task.getServiceName())) {
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">// å‘¨æœŸä»»åŠ¡</span>
<span class="hljs-keyword">if</span> (!clusterInstanceService.isOwner(job.getName())) {
    <span class="hljs-keyword">return</span>;
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ</strong></p>
<pre><code class="hljs language-diff" lang="diff">å‘¨æœŸä»»åŠ¡ï¼š
<span class="hljs-deletion">- ä»»åŠ¡æ˜¯å›ºå®šçš„ï¼ˆé…ç½®åœ¨æ•°æ®åº“ï¼‰</span>
<span class="hljs-deletion">- jobName æ˜¯ç¨³å®šçš„</span>
<span class="hljs-deletion">- æŒ‰ jobName åˆ†åŒºï¼Œæ¯ä¸ªä»»åŠ¡æœ‰å›ºå®šçš„ owner</span>

å»¶æ—¶ä»»åŠ¡ï¼š
<span class="hljs-deletion">- ä»»åŠ¡æ˜¯åŠ¨æ€çš„ï¼ˆè¿è¡Œæ—¶åˆ›å»ºï¼‰</span>
<span class="hljs-deletion">- taskId æ¯æ¬¡éƒ½ä¸ä¸€æ ·</span>
<span class="hljs-deletion">- æŒ‰ taskId åˆ†åŒºæ²¡æ„ä¹‰</span>

æ‰€ä»¥ï¼š
<span class="hljs-deletion">- æŒ‰ serviceName åˆ†åŒº</span>
<span class="hljs-deletion">- åŒä¸€ä¸ªæœåŠ¡çš„å»¶æ—¶ä»»åŠ¡ï¼Œç”±åŒä¸€ä¸ªè°ƒåº¦å™¨å¤„ç†</span>
<span class="hljs-deletion">- å‡å°‘ç½‘ç»œå¼€é”€</span>
</code></pre>
<h3 data-id="heading-20">ä¸ºä»€ä¹ˆéœ€è¦åŒé‡ä¿æŠ¤</h3>
<p>Owneråˆ¤å®š + CASæŠ¢å ï¼Œä¸¤å±‚ä¿æŠ¤ï¼š</p>
<pre><code class="hljs language-objectivec" lang="objectivec">ç¬¬ä¸€å±‚ï¼šOwneråˆ¤å®šï¼ˆHashåˆ†åŒºï¼‰
â†’ ç»å¤§å¤šæ•°æƒ…å†µé¿å…å†²çª
â†’ æ€§èƒ½å¥½ï¼Œæ— éœ€é”

ç¬¬äºŒå±‚ï¼š<span class="hljs-built_in">CAS</span>æŠ¢å ï¼ˆæ•°æ®åº“ä¹è§‚é”ï¼‰
â†’ æç«¯æƒ…å†µçš„æœ€åé˜²çº¿
â†’ å³ä½¿ owner åˆ¤å®šé‡å ï¼Œä¹Ÿèƒ½ä¿è¯åªæœ‰ä¸€ä¸ªå®ä¾‹æ‰§è¡Œ
</code></pre>
<p>è¿™å’Œå‘¨æœŸä»»åŠ¡çš„è®¾è®¡æ˜¯ä¸€æ ·çš„ï¼šæ— é”ä¼˜å…ˆï¼Œæ•°æ®åº“å…œåº•ã€‚</p>
<h3 data-id="heading-21">ä¸ºä»€ä¹ˆ SENDING éœ€è¦è¶…æ—¶æ£€æµ‹</h3>
<p>çŠ¶æ€æœºé‡Œæœ€å®¹æ˜“å¡ä½çš„å°±æ˜¯ SENDING çŠ¶æ€ï¼š</p>
<pre><code class="hljs">æ­£å¸¸æµç¨‹ï¼š
PENDING â†’ SENDING â†’ SENTï¼ˆæˆåŠŸï¼‰
PENDING â†’ SENDING â†’ FAILEDï¼ˆå¤±è´¥ï¼Œé‡è¯•ï¼‰

å¡ä½åœºæ™¯ï¼š
PENDING â†’ SENDING â†’ ï¼Ÿï¼ˆæ‰§è¡Œå™¨æŒ‚äº†ï¼Œæ²¡å›è°ƒï¼‰
</code></pre>
<p>æ²¡æœ‰è¶…æ—¶æ£€æµ‹ï¼š</p>
<pre><code class="hljs">ä»»åŠ¡ä¸€ç›´ SENDING
â†’ ä¸ä¼šé‡è¯•
â†’ ä¸ä¼šæ ‡è®°å¤±è´¥
â†’ ä»»åŠ¡ä¸¢äº†
</code></pre>
<p>æœ‰äº†è¶…æ—¶æ£€æµ‹ï¼š</p>
<pre><code class="hljs">120ç§’åå‘ç° SENDING è¶…æ—¶
â†’ æ ‡è®°å¤±è´¥
â†’ è¿›å…¥é‡è¯•æµç¨‹
â†’ æœ€å¤šé‡è¯•3æ¬¡
</code></pre>
<h2 data-id="heading-22">å…«ã€ç›‘æ§ä¸è¿ç»´</h2>
<h3 data-id="heading-23">å…³é”®æŒ‡æ ‡</h3>
<p>éœ€è¦å…³æ³¨çš„æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ‰«æåˆ°æœŸä»»åŠ¡æ•°] --&gt; B[æ¯æ¬¡æ‰«æ100æ¡&lt;br/&gt;æ­£å¸¸]
    A --&gt; C[æŒç»­å¾ˆå¤š&lt;br/&gt;ç§¯å‹]
    
    D[SENDINGè¶…æ—¶æ•°] --&gt; E[å¶å°”å‡ ä¸ª&lt;br/&gt;æ­£å¸¸]
    D --&gt; F[å¤§é‡è¶…æ—¶&lt;br/&gt;æ‰§è¡Œå™¨å¼‚å¸¸]
    
    G[æœ€ç»ˆå¤±è´¥æ•°] --&gt; H[éœ€è¦äººå·¥&lt;br/&gt;ä»‹å…¥]
    
    style A fill:#87CEEB
    style B fill:#90EE90
    style C fill:#FF6B6B
    style D fill:#87CEEB
    style E fill:#90EE90
    style F fill:#FF6B6B
    style G fill:#FFB6C1
    style H fill:#FFE4B5
</code></pre>
<p>SQLæŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢æœ€ç»ˆå¤±è´¥çš„ä»»åŠ¡ï¼ˆéœ€äººå·¥ä»‹å…¥ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'FAILED'</span> 
  <span class="hljs-keyword">AND</span> retry_count <span class="hljs-operator">&gt;=</span> max_retry
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> updated_at <span class="hljs-keyword">DESC</span>;

<span class="hljs-comment">-- æŸ¥è¯¢ç§¯å‹ä»»åŠ¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-keyword">IN</span> (<span class="hljs-string">'PENDING'</span>, <span class="hljs-string">'FAILED'</span>)
  <span class="hljs-keyword">AND</span> next_attempt_time <span class="hljs-operator">&lt;=</span> NOW();

<span class="hljs-comment">-- æŸ¥è¯¢ SENDING è¶…æ—¶ä»»åŠ¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'SENDING'</span>
  <span class="hljs-keyword">AND</span> TIMESTAMPDIFF(<span class="hljs-keyword">SECOND</span>, updated_at, NOW()) <span class="hljs-operator">&gt;</span> <span class="hljs-number">120</span>;
</code></pre>
<h3 data-id="heading-24">å¸¸è§é—®é¢˜</h3>
<p><strong>é—®é¢˜ä¸€ï¼šä»»åŠ¡ä¸æ‰§è¡Œ</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task <span class="hljs-keyword">WHERE</span> biz_uuid <span class="hljs-operator">=</span> <span class="hljs-string">'xxx'</span>;

<span class="hljs-comment">-- 2. æ£€æŸ¥æ˜¯å¦åˆ°æœŸ</span>
<span class="hljs-keyword">SELECT</span> next_attempt_time, NOW() <span class="hljs-keyword">FROM</span> job_delay_task <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> xxx;

<span class="hljs-comment">-- 3. æ£€æŸ¥é‡è¯•æ¬¡æ•°</span>
<span class="hljs-keyword">SELECT</span> retry_count, max_retry <span class="hljs-keyword">FROM</span> job_delay_task <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> xxx;
</code></pre>
<p>å¯èƒ½åŸå› ï¼š</p>
<ul>
<li><code>next_attempt_time</code> æœªåˆ°æœŸ</li>
<li><code>status = 'SENT'</code> å·²å®Œæˆ</li>
<li><code>retry_count &gt;= max_retry</code> å·²å¤±è´¥</li>
<li>è°ƒåº¦å™¨æœªå¯åŠ¨</li>
</ul>
<p><strong>é—®é¢˜äºŒï¼šä»»åŠ¡é‡å¤æ‰§è¡Œ</strong></p>
<p>æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„ bizUuidï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> biz_uuid, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> biz_uuid 
<span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;</span> <span class="hljs-number">1</span>;
</code></pre>
<p>åŸå› ï¼š</p>
<ul>
<li>ä¸šåŠ¡æ–¹æœªæ­£ç¡®è®¾ç½®å”¯ä¸€çš„ <code>bizUuid</code></li>
<li>æ‰§è¡Œå™¨ Handler æœªå®ç°å¹‚ç­‰</li>
</ul>
<p>è§£å†³ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸šåŠ¡å”¯ä¸€IDä½œä¸º <code>bizUuid</code>ï¼ˆå¦‚ <code>order-timeout-{orderId}</code>ï¼‰</li>
<li>Handler å†…éƒ¨å¢åŠ å¹‚ç­‰åˆ¤æ–­</li>
</ul>
<h2 data-id="heading-25">ä¹ã€æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-26">bizUuid è®¾è®¡</h3>
<p>æ¨èåšæ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ä¸šåŠ¡å”¯ä¸€ID</span>
<span class="hljs-type">String</span> <span class="hljs-variable">bizUuid</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-timeout-"</span> + orderId;
<span class="hljs-type">String</span> <span class="hljs-variable">bizUuid</span> <span class="hljs-operator">=</span> <span class="hljs-string">"payment-remind-"</span> + userId + <span class="hljs-string">"-"</span> + paymentId;
</code></pre>
<p>ä¸æ¨èï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨æ—¶é—´æˆ³ï¼ˆä¸å”¯ä¸€ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">bizUuid</span> <span class="hljs-operator">=</span> <span class="hljs-string">"task-"</span> + System.currentTimeMillis();

<span class="hljs-comment">// ä½¿ç”¨éšæœºUUIDï¼ˆæ— æ³•å¹‚ç­‰ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">bizUuid</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
</code></pre>
<h3 data-id="heading-27">executeTime è®¾ç½®</h3>
<p>æ¨èåšæ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸºäºå½“å‰æ—¶é—´è®¡ç®—</span>
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">executeTime</span> <span class="hljs-operator">=</span> LocalDateTime.now().plusMinutes(<span class="hljs-number">30</span>);

<span class="hljs-comment">// åŸºäºä¸šåŠ¡æ—¶é—´è®¡ç®—</span>
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">executeTime</span> <span class="hljs-operator">=</span> order.getCreatedAt().plusMinutes(<span class="hljs-number">30</span>);
</code></pre>
<p>ä¸æ¨èï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿‡å»çš„æ—¶é—´ï¼ˆä¼šç«‹å³æ‰§è¡Œï¼‰</span>
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">executeTime</span> <span class="hljs-operator">=</span> LocalDateTime.now().minusMinutes(<span class="hljs-number">10</span>);
</code></pre>
<h3 data-id="heading-28">Payload è®¾è®¡</h3>
<p>æ¨èåšæ³•ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"orderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"timeout-cancel"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¸æ¨èï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// åŒ…å«æ•æ„Ÿä¿¡æ¯</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"orderId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123456"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bankCard"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"6222..."</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// æ•°æ®è¿‡å¤§</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"orderDetail"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¶…è¿‡1MBçš„JSON..."</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å»ºè®®ï¼š</p>
<ul>
<li>Payload åªå­˜å¿…è¦çš„ä¸šåŠ¡æ ‡è¯†</li>
<li>æ‰§è¡Œå™¨å†…éƒ¨æŸ¥è¯¢å®Œæ•´æ•°æ®</li>
<li>é¿å…å­˜å‚¨æ•æ„Ÿä¿¡æ¯</li>
</ul>
<h2 data-id="heading-29">åã€æ€»ç»“</h2>
<p>JobFlow çš„å»¶æ—¶è°ƒåº¦é€šè¿‡ä»¥ä¸‹è®¾è®¡å®ç°äº†é«˜å¯ç”¨ã€é«˜æ€§èƒ½ï¼š</p>
<p><strong>æ ¸å¿ƒç‰¹æ€§ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ— é”è°ƒåº¦&lt;br/&gt;Hash+CAS] --&gt; B[æ€§èƒ½å¥½&lt;br/&gt;æ— éœ€åˆ†å¸ƒå¼é”]
    C[è‡ªåŠ¨é‡è¯•&lt;br/&gt;æŒ‡æ•°é€€é¿] --&gt; D[å¯é æ€§é«˜&lt;br/&gt;æœ€å¤š3æ¬¡]
    E[å¹‚ç­‰ä¿éšœ&lt;br/&gt;bizUuid] --&gt; F[é˜²é‡å¤&lt;br/&gt;å”¯ä¸€çº¦æŸ]
    
    style A fill:#87CEEB
    style C fill:#FFE4B5
    style E fill:#FFB6C1
    style B fill:#90EE90
    style D fill:#90EE90
    style F fill:#90EE90
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>è®¢å•è¶…æ—¶å¤„ç†</li>
<li>å®šæ—¶æé†’é€šçŸ¥</li>
<li>å»¶è¿Ÿæ¶ˆæ¯å‘é€</li>
<li>å¼‚æ­¥å›è°ƒé‡è¯•</li>
</ul>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>æ— éœ€é¢å¤–ä¸­é—´ä»¶ï¼ˆå¦‚ RabbitMQ å»¶è¿Ÿé˜Ÿåˆ—ï¼‰</li>
<li>å¤ç”¨ Nacos æœåŠ¡å‘ç°ï¼Œæ¶æ„ç®€æ´</li>
<li>åŸºäº MySQL å­˜å‚¨ï¼Œå¯é æ€§é«˜</li>
<li>åˆ†å¸ƒå¼è°ƒåº¦å™¨ï¼Œé«˜å¯ç”¨</li>
</ul>
<p><strong>å’Œå®šæ—¶ä»»åŠ¡çš„å…³ç³»ï¼š</strong></p>
<pre><code class="hljs language-diff" lang="diff">å®šæ—¶ä»»åŠ¡ï¼šå‘¨æœŸæ€§æ‰§è¡Œï¼Œé…ç½®å›ºå®š
å»¶æ—¶ä»»åŠ¡ï¼šä¸€æ¬¡æ€§æ‰§è¡Œï¼ŒåŠ¨æ€åˆ›å»º

ä¸¤è€…äº’è¡¥ï¼š
<span class="hljs-deletion">- å®šæ—¶ä»»åŠ¡å¤„ç†å‘¨æœŸæ€§ä¸šåŠ¡</span>
<span class="hljs-deletion">- å»¶æ—¶ä»»åŠ¡å¤„ç†äº‹ä»¶é©±åŠ¨çš„ä¸šåŠ¡</span>
</code></pre>
<p>JobFlow é€šè¿‡ç»Ÿä¸€çš„æ¶æ„ã€ç»Ÿä¸€çš„ traceIdã€ç»Ÿä¸€çš„æ‰§è¡Œå™¨æ¥å£ï¼ŒæŠŠè¿™ä¸¤ç§è°ƒåº¦éœ€æ±‚ä¼˜é›…åœ°æ•´åˆåœ¨ä¸€èµ·ã€‚</p>
<p>è¿™å°±æ˜¯ JobFlow å»¶æ—¶è°ƒåº¦çš„è®¾è®¡å’Œå®ç°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€2025æœ€æ–°ã€‘Flutter åŠ è½½æ˜¾ç¤º Live2D è§’è‰²ï¼Œå®æˆ˜ä¸è¸©å‘å…¨é“¾è·¯åˆ†äº«]]></title>    <link>https://juejin.cn/post/7588124225702510632</link>    <guid>https://juejin.cn/post/7588124225702510632</guid>    <pubDate>2025-12-28T08:46:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588124225702510632" data-draft-id="7588095884070699008" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€2025æœ€æ–°ã€‘Flutter åŠ è½½æ˜¾ç¤º Live2D è§’è‰²ï¼Œå®æˆ˜ä¸è¸©å‘å…¨é“¾è·¯åˆ†äº«"/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2025-12-28T08:46:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ†å·æœ¬æ˜Š"/> <meta itemprop="url" content="https://juejin.cn/user/2647279732004807"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€2025æœ€æ–°ã€‘Flutter åŠ è½½æ˜¾ç¤º Live2D è§’è‰²ï¼Œå®æˆ˜ä¸è¸©å‘å…¨é“¾è·¯åˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2647279732004807/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ†å·æœ¬æ˜Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:46:10.000Z" title="Sun Dec 28 2025 08:46:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç‰¹åˆ«æ„Ÿè°¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FRealCoolSnow%2Flive2d-android" target="_blank" title="https://github.com/RealCoolSnow/live2d-android" ref="nofollow noopener noreferrer">RealCoolSnow/live2d-android</a> å¤§ä½¬çš„å¼€å…ƒåˆ†äº«</h3>
<ul>
<li>flutter åŠ è½½çš„ä»£ç æˆ‘å°±ä¸æ”¾ä¸Šæ¥äº†ï¼Œandroidèƒ½æ˜¾ç¤ºï¼Œflutterå°±èƒ½åŠ è½½ï¼Œè®©AIå†™å°±è¡Œï¼Œä¸‹é¢æˆ‘è¯´ä¸‹æ•´ä½“æ€è·¯</li>
<li>å¤§å®¶è®°å¾—ç‚¹èµå’Œç»™å¤§ä½¬starï¼Œä¸ç„¶äººå¼€æºåˆ†äº«å¯¹å¤§å®¶éƒ½ä¸åˆ©</li>
</ul>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼Œè¦åœ¨androidä¸Šé›†æˆlive2d</h2>
<h2 data-id="heading-2">Live2D SDK é›†æˆè¯´æ˜æ–‡æ¡£</h2>
<h3 data-id="heading-3">1. æ¦‚è¿°</h3>
<p>æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†åœ¨Android Flutteråº”ç”¨ä¸­å¦‚ä½•é›†æˆLive2D SDKï¼Œå®ç°ä»æ¨¡å‹åŠ è½½åˆ°æ˜¾ç¤ºçš„å®Œæ•´æµç¨‹ã€‚æ•´ä¸ªé›†æˆæ¶‰åŠJava/Kotlinå±‚ã€JNIå±‚å’ŒC++åŸç”Ÿå±‚çš„ååŒå·¥ä½œã€‚</p>
<h3 data-id="heading-4">2. æ¶æ„å±‚æ¬¡</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Flutterå±‚ (Dart)                  â”‚
â”‚   - Live2DView Widget               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ PlatformView
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Android Kotlinå±‚                  â”‚
â”‚   - Live2DPlatformView              â”‚
â”‚   - Live2D_v3 (Javaæ¥å£)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ JNIè°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   C++ JNIå±‚                         â”‚
â”‚   - lapp_model<span class="hljs-selector-class">.cpp</span> (JNIç»‘å®š)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Live2D SDK C++å±‚                  â”‚
â”‚   - LAppModel (æ¨¡å‹ç®¡ç†)            â”‚
â”‚   - CubismRenderer (æ¸²æŸ“å™¨)         â”‚
â”‚   - CubismModel (æ¨¡å‹æ•°æ®)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-5">3. æ ¸å¿ƒç»„ä»¶è¯´æ˜</h3>
<h4 data-id="heading-6">3.1 Live2D_v3.java - Java/Kotlinæ¥å£å±‚</h4>
<p><strong>æ–‡ä»¶ä½ç½®</strong>: <code>android/app/src/main/kotlin/com/hornhuang/tomato_plan/Live2D_v3.java</code></p>
<p>è¿™æ˜¯Live2D SDKçš„Java/Kotlinæ¥å£ï¼Œæä¾›SDKåˆå§‹åŒ–å’Œæ¨¡å‹ç®¡ç†åŠŸèƒ½ã€‚</p>
<p><strong>å…³é”®ä»£ç </strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2D_v3</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">initialized</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Context context;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(Context ctx)</span> {
        <span class="hljs-keyword">if</span> (!initialized) {
            context = ctx;
            Csm_CubismFramework.initialize();
            initialized = <span class="hljs-literal">true</span>;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispose</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (initialized) {
            Csm_CubismFramework.dispose();
            initialized = <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearBuffer</span><span class="hljs-params">(<span class="hljs-type">float</span> r, <span class="hljs-type">float</span> g, <span class="hljs-type">float</span> b, <span class="hljs-type">float</span> a)</span> {
        GLES20.glClearColor(r, g, b, a);
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LAppModel</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> nativeModel;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">LAppModel</span><span class="hljs-params">()</span> {
            nativeModel = createNativeModel();
        }

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-type">long</span> <span class="hljs-title function_">createNativeModel</span><span class="hljs-params">()</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroyNativeModel</span><span class="hljs-params">(<span class="hljs-type">long</span> model)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadModelJson</span><span class="hljs-params">(String fileName)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resize</span><span class="hljs-params">(<span class="hljs-type">int</span> ww, <span class="hljs-type">int</span> wh)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">()</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startMotion</span><span class="hljs-params">(String group, <span class="hljs-type">int</span> no, <span class="hljs-type">int</span> priority,
            OnBeganMotionCallback onStart, OnFinishedMotionCallback onFinish)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setExpression</span><span class="hljs-params">(String expressionID)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParameterValue</span><span class="hljs-params">(String id, <span class="hljs-type">float</span> value)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParameterValueByIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">float</span> value)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addParameterValue</span><span class="hljs-params">(String id, <span class="hljs-type">float</span> value)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addParameterValueByIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">float</span> value)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPartsOpacity</span><span class="hljs-params">(String id, <span class="hljs-type">float</span> opacity)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPartsOpacityByIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">float</span> opacity)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hitTest</span><span class="hljs-params">(String hitAreaName, <span class="hljs-type">float</span> x, <span class="hljs-type">float</span> y)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDragging</span><span class="hljs-params">(<span class="hljs-type">float</span> x, <span class="hljs-type">float</span> y)</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAcceleration</span><span class="hljs-params">(<span class="hljs-type">float</span> x, <span class="hljs-type">float</span> y, <span class="hljs-type">float</span> z)</span>;
    }
}
</code></pre>
<h4 data-id="heading-7">3.2 lapp_model.cpp - JNIç»‘å®šå±‚</h4>
<p><strong>æ–‡ä»¶ä½ç½®</strong>: <code>android/app/src/main/cpp/lapp_model.cpp</code></p>
<p>è´Ÿè´£å°†Java/Kotlinæ–¹æ³•è°ƒç”¨è½¬æ¢ä¸ºC++å‡½æ•°è°ƒç”¨ï¼Œå®ç°è·¨è¯­è¨€äº¤äº’ã€‚</p>
<p><strong>å…³é”®ä»£ç </strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT jlong JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_createNativeModel</span><span class="hljs-params">(JNIEnv *, jobject)</span> </span>{
    <span class="hljs-keyword">auto</span> *model = <span class="hljs-keyword">new</span> <span class="hljs-built_in">LAppModel</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">long</span>&gt;(model);
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_loadModelJson</span><span class="hljs-params">(JNIEnv *env, jobject thiz,
                                                           jstring file_name)</span> </span>{
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *json_file = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(file_name, <span class="hljs-literal">nullptr</span>);
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">LoadAssets</span>(json_file);
    env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(file_name, json_file);
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_resize</span><span class="hljs-params">(JNIEnv *env, jobject thiz,
                                                    jint ww, jint wh)</span> </span>{
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">Resize</span>(ww, wh);
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_update</span><span class="hljs-params">(JNIEnv *env, jobject thiz)</span> </span>{
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">Update</span>();
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_draw</span><span class="hljs-params">(JNIEnv *env, jobject thiz)</span> </span>{
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">Draw</span>();
}
</code></pre>
<h4 data-id="heading-8">3.3 LAppModel.cpp - æ¨¡å‹ç®¡ç†æ ¸å¿ƒ</h4>
<p><strong>æ–‡ä»¶ä½ç½®</strong>: <code>android/app/src/main/cpp/Main/src/LAppModel.cpp</code></p>
<p>å®ç°Live2Dæ¨¡å‹çš„åŠ è½½ã€æ›´æ–°ã€æ¸²æŸ“å’Œäº¤äº’å¤„ç†ã€‚</p>
<p><strong>å…³é”®ä»£ç </strong>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::LoadAssets</span><span class="hljs-params">(<span class="hljs-type">const</span> Csm::csmChar* fileName)</span> </span>{
    <span class="hljs-comment">// è§£ææ¨¡å‹æ–‡ä»¶è·¯å¾„</span>
    std::filesystem::path p = std::filesystem::<span class="hljs-built_in">u8path</span>(fileName);
    _modelHomeDir = p.<span class="hljs-built_in">parent_path</span>().<span class="hljs-built_in">u8string</span>().<span class="hljs-built_in">c_str</span>();
    
    <span class="hljs-comment">// è¯»å–å¹¶è§£æ.model3.jsonæ–‡ä»¶</span>
    Csm::csmSizeInt size;
    Csm::csmByte* buffer = <span class="hljs-built_in">CreateBuffer</span>(fileName, &amp;size);
    _modelSetting = Csm::Model::CubismModelSettingJson::<span class="hljs-built_in">Create</span>(buffer, size);
    <span class="hljs-built_in">DeleteBuffer</span>(buffer, fileName);
    
    <span class="hljs-comment">// è®¾ç½®æ¨¡å‹</span>
    <span class="hljs-built_in">SetupModel</span>(_modelSetting);
    
    <span class="hljs-comment">// è®¾ç½®çº¹ç†</span>
    <span class="hljs-built_in">SetupTextures</span>();
    
    <span class="hljs-comment">// é¢„åŠ è½½åŠ¨ä½œ</span>
    <span class="hljs-built_in">PreloadMotionGroup</span>(MotionGroupIdle);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::SetupModel</span><span class="hljs-params">(Csm::Model::ICubismModelSetting* setting)</span> </span>{
    <span class="hljs-comment">// ä»æ¨¡å‹è®¾ç½®ä¸­åŠ è½½æ¨¡å‹æ•°æ®</span>
    _modelJson = setting-&gt;<span class="hljs-built_in">GetModelFileName</span>();
    std::string modelPath = _modelHomeDir + <span class="hljs-string">"/"</span> + _modelJson;
    
    Csm::csmSizeInt size;
    Csm::csmByte* buffer = <span class="hljs-built_in">CreateBuffer</span>(modelPath.<span class="hljs-built_in">c_str</span>(), &amp;size);
    <span class="hljs-built_in">LoadModel</span>(buffer, size);
    <span class="hljs-built_in">DeleteBuffer</span>(buffer, modelPath.<span class="hljs-built_in">c_str</span>());
    
    <span class="hljs-comment">// è®¾ç½®æ¨¡å‹å‚æ•°</span>
    _model-&gt;<span class="hljs-built_in">SaveParameters</span>();
    
    <span class="hljs-comment">// åˆ›å»ºæ¸²æŸ“å™¨</span>
    _renderer = <span class="hljs-keyword">new</span> Csm::Rendering::<span class="hljs-built_in">CubismRenderer_OpenGLES2</span>();
    _renderer-&gt;<span class="hljs-built_in">Initialize</span>(_model);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::Update</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">const</span> Csm::csmFloat32 deltaTimeSeconds = LAppPal::<span class="hljs-built_in">GetDeltaTime</span>();
    _userTimeSeconds += deltaTimeSeconds;
    
    <span class="hljs-comment">// æ›´æ–°åŠ¨ä½œ</span>
    _motionManager-&gt;<span class="hljs-built_in">UpdateMotion</span>(_model, deltaTimeSeconds);
    
    <span class="hljs-comment">// æ›´æ–°æ¨¡å‹å‚æ•°</span>
    _model-&gt;<span class="hljs-built_in">Update</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::Draw</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// è®¾ç½®æŠ•å½±çŸ©é˜µ</span>
    Csm::CubismMatrix44 projection;
    projection.<span class="hljs-built_in">Scale</span>(<span class="hljs-number">1.0f</span>, <span class="hljs-number">1.0f</span>);
    _renderer-&gt;<span class="hljs-built_in">SetMvpMatrix</span>(&amp;projection);
    
    <span class="hljs-comment">// æ¸²æŸ“æ¨¡å‹</span>
    _renderer-&gt;<span class="hljs-built_in">DrawModel</span>();
}
</code></pre>
<h4 data-id="heading-9">3.4 Live2DPlatformView.kt - Flutterå¹³å°è§†å›¾</h4>
<p><strong>æ–‡ä»¶ä½ç½®</strong>: <code>android/app/src/main/kotlin/com/hornhuang/tomato_plan/Live2DPlatformView.kt</code></p>
<p>å®ç°Flutterçš„PlatformViewï¼Œåœ¨Flutterä¸­åµŒå…¥Live2Dæ¸²æŸ“ã€‚</p>
<p><strong>å…³é”®ä»£ç </strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DPlatformView</span>(context: Context, id: <span class="hljs-built_in">Int</span>, creationParams: Map&lt;String, Any&gt;?)
    : PlatformView {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> glSurfaceView = GLSurfaceView(context)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> renderer = Live2DRenderer(context)
    
    <span class="hljs-keyword">init</span> {
        glSurfaceView.setEGLContextClientVersion(<span class="hljs-number">2</span>)
        glSurfaceView.setRenderer(renderer)
        glSurfaceView.renderMode = GLSurfaceView.RENDERMODE_CONTINUOUSLY
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getView</span><span class="hljs-params">()</span></span>: View = glSurfaceView
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dispose</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// åˆå§‹åŒ–Live2D SDK</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        <span class="hljs-comment">// åˆ›å»ºæ¨¡å‹å®ä¾‹</span>
        model = LAppModel().apply {
            <span class="hljs-comment">// åŠ è½½æ¨¡å‹æ–‡ä»¶</span>
            loadModelJson(<span class="hljs-string">"assets://mianfeimox/llny.model3.json"</span>)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceChanged</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// è°ƒæ•´æ¨¡å‹å°ºå¯¸</span>
        model.resize(width, height)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        <span class="hljs-comment">// æ¸…ç©ºç¼“å†²åŒº</span>
        Live2D_v3.clearBuffer(<span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        
        <span class="hljs-comment">// æ›´æ–°æ¨¡å‹çŠ¶æ€</span>
        model.update()
        
        <span class="hljs-comment">// è®¾ç½®å‚æ•°ï¼ˆä¾‹å¦‚çœ¨çœ¼ï¼‰</span>
        model.setParameterValue(<span class="hljs-string">"Param14"</span>, <span class="hljs-number">1f</span>)
        
        <span class="hljs-comment">// ç»˜åˆ¶æ¨¡å‹</span>
        model.draw()
    }
}
</code></pre>
<h3 data-id="heading-10">4. å®Œæ•´æµç¨‹è¯´æ˜</h3>
<h4 data-id="heading-11">4.1 åˆå§‹åŒ–æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> Flutterå¯åŠ¨
   â†“
<span class="hljs-bullet">2.</span> åˆ›å»ºLive2DPlatformView
   â†“
<span class="hljs-bullet">3.</span> GLSurfaceViewåˆ›å»ºOpenGL ES 2.0ä¸Šä¸‹æ–‡
   â†“
<span class="hljs-bullet">4.</span> onSurfaceCreatedå›è°ƒè§¦å‘
   â†“
<span class="hljs-bullet">5.</span> è°ƒç”¨Live2D<span class="hljs-emphasis">_v3.init(context)
   â†“
6. Csm_</span>CubismFramework.initialize() åˆå§‹åŒ–Live2Dæ¡†æ¶
   â†“
<span class="hljs-bullet">7.</span> åˆ›å»ºLAppModelå®ä¾‹
   â†“
<span class="hljs-bullet">8.</span> è°ƒç”¨loadModelJsonåŠ è½½æ¨¡å‹
</code></pre>
<h4 data-id="heading-12">4.2 æ¨¡å‹åŠ è½½æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> loadModelJson("assets://mianfeimox/llny.model3.json")
   â†“
<span class="hljs-bullet">2.</span> JNIè°ƒç”¨: Java<span class="hljs-emphasis">_com_</span>hornhuang<span class="hljs-emphasis">_tomato_</span>1plan<span class="hljs-emphasis">_Live2D_</span>1v3<span class="hljs-emphasis">_00024LAppModel_</span>loadModelJson
   â†“
<span class="hljs-bullet">3.</span> LAppModel::LoadAssets(fileName)
   â†“
<span class="hljs-bullet">4.</span> è¯»å–.model3.jsonæ–‡ä»¶
   â†“
<span class="hljs-bullet">5.</span> è§£æJSONè·å–æ¨¡å‹æ–‡ä»¶è·¯å¾„ã€çº¹ç†ã€åŠ¨ä½œç­‰ä¿¡æ¯
   â†“
<span class="hljs-bullet">6.</span> SetupModel() - åŠ è½½.moc3æ¨¡å‹æ–‡ä»¶
   â†“
<span class="hljs-bullet">7.</span> SetupTextures() - åŠ è½½çº¹ç†å›¾ç‰‡
   â†“
<span class="hljs-bullet">8.</span> PreloadMotionGroup() - é¢„åŠ è½½åŠ¨ä½œæ–‡ä»¶
   â†“
<span class="hljs-bullet">9.</span> åˆ›å»ºCubismRendererå¹¶åˆå§‹åŒ–
</code></pre>
<h4 data-id="heading-13">4.3 æ¸²æŸ“å¾ªç¯æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown">æ¯ä¸€å¸§:
<span class="hljs-bullet">1.</span> onDrawFrameå›è°ƒè§¦å‘
   â†“
<span class="hljs-bullet">2.</span> glClearæ¸…ç©ºé¢œè‰²ç¼“å†²åŒº
   â†“
<span class="hljs-bullet">3.</span> model.update()
   â†“
<span class="hljs-bullet">4.</span> <span class="hljs-emphasis">_motionManager-&gt;UpdateMotion() - æ›´æ–°åŠ¨ä½œçŠ¶æ€
   â†“
5. _</span>model-&gt;Update() - æ›´æ–°æ¨¡å‹å‚æ•°
   â†“
<span class="hljs-bullet">6.</span> model.draw()
   â†“
<span class="hljs-bullet">7.</span> è®¾ç½®æŠ•å½±çŸ©é˜µ
   â†“
<span class="hljs-bullet">8.</span> <span class="hljs-emphasis">_renderer-&gt;DrawModel() - æ¸²æŸ“æ¨¡å‹
   â†“
9. OpenGLç»˜åˆ¶åˆ°å±å¹•
</span></code></pre>
<h4 data-id="heading-14">4.4 äº¤äº’å¤„ç†æµç¨‹</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è§¦æ‘¸:
<span class="hljs-bullet">1.</span> è§¦æ‘¸äº‹ä»¶ä¼ é€’åˆ°Live2DPlatformView
   â†“
<span class="hljs-bullet">2.</span> è®¡ç®—è§¦æ‘¸åæ ‡
   â†“
<span class="hljs-bullet">3.</span> model.hitTest(hitAreaName, x, y)
   â†“
<span class="hljs-bullet">4.</span> æ£€æµ‹æ˜¯å¦å‡»ä¸­å¯äº¤äº’åŒºåŸŸ
   â†“
<span class="hljs-bullet">5.</span> å¦‚æœå‡»ä¸­ï¼Œè§¦å‘ç›¸åº”åŠ¨ä½œ:
<span class="hljs-bullet">   -</span> model.startMotion() - æ’­æ”¾åŠ¨ä½œ
<span class="hljs-bullet">   -</span> model.setExpression() - è®¾ç½®è¡¨æƒ…
<span class="hljs-bullet">   -</span> model.setParameterValue() - è®¾ç½®å‚æ•°
</code></pre>
<h3 data-id="heading-15">5. å…³é”®æŠ€æœ¯ç‚¹</h3>
<h4 data-id="heading-16">5.1 OpenGLä¸Šä¸‹æ–‡ç®¡ç†</h4>
<p>æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹åˆå§‹åŒ–Live2D SDKï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
    <span class="hljs-comment">// æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éƒ½éœ€è¦å•ç‹¬åˆå§‹åŒ–</span>
    Live2D_v3.<span class="hljs-keyword">init</span>(context)
    model = LAppModel()
}
</code></pre>
<h4 data-id="heading-17">5.2 èµ„æºè·¯å¾„å¤„ç†</h4>
<p>Android assetsè·¯å¾„éœ€è¦è½¬æ¢ä¸ºC++å¯è®¿é—®çš„è·¯å¾„ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::LoadAssets</span><span class="hljs-params">(<span class="hljs-type">const</span> Csm::csmChar* fileName)</span> </span>{
    <span class="hljs-comment">// assets://è·¯å¾„è½¬æ¢ä¸ºå®é™…æ–‡ä»¶è·¯å¾„</span>
    std::filesystem::path p = std::filesystem::<span class="hljs-built_in">u8path</span>(fileName);
    _modelHomeDir = p.<span class="hljs-built_in">parent_path</span>().<span class="hljs-built_in">u8string</span>().<span class="hljs-built_in">c_str</span>();
}
</code></pre>
<h4 data-id="heading-18">5.3 åŠ¨ä½œç®¡ç†</h4>
<p>åŠ¨ä½œé€šè¿‡ä¼˜å…ˆçº§ç³»ç»Ÿç®¡ç†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::StartMotion</span><span class="hljs-params">(<span class="hljs-type">const</span> Csm::csmChar* group, Csm::csmInt32 no,
                            Csm::csmInt32 priority,
                            Csm::FinishedMotionCallback onFinishedMotionHandler)</span> </span>{
    <span class="hljs-keyword">if</span> (priority == _priority) {
        _motionManager-&gt;<span class="hljs-built_in">SetReservePriority</span>(priority);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (priority &lt; _motionManager-&gt;<span class="hljs-built_in">GetReservePriority</span>()) {
        <span class="hljs-keyword">return</span>;
    }
    
    _motionManager-&gt;<span class="hljs-built_in">StartMotionPriority</span>(
        _model,
        group,
        no,
        priority,
        onFinishedMotionHandler
    );
}
</code></pre>
<h4 data-id="heading-19">5.4 å‚æ•°æ§åˆ¶</h4>
<p>Live2Dæ¨¡å‹å‚æ•°å®æ—¶æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è®¾ç½®å‚æ•°å€¼</span>
model.setParameterValue(<span class="hljs-string">"ParamEyeLOpen"</span>, <span class="hljs-number">0.5f</span>)

<span class="hljs-comment">// å¢åŠ å‚æ•°å€¼</span>
model.addParameterValue(<span class="hljs-string">"ParamAngleX"</span>, <span class="hljs-number">0.1f</span>)

<span class="hljs-comment">// è®¾ç½®éƒ¨ä»¶é€æ˜åº¦</span>
model.setPartsOpacity(<span class="hljs-string">"PartArmL"</span>, <span class="hljs-number">0.8f</span>)
</code></pre>
<h3 data-id="heading-20">6. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-21">6.1 OpenGLä¸Šä¸‹æ–‡é”™è¯¯</h4>
<p><strong>é—®é¢˜</strong>: GL_INVALID_VALUE (0x501)é”™è¯¯</p>
<p><strong>åŸå› </strong>: åœ¨ä¸åŒçš„OpenGLä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨åŒä¸€ä¸ªLive2Då®ä¾‹</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>: æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ç‹¬ç«‹åˆå§‹åŒ–Live2D SDKå’Œæ¨¡å‹å®ä¾‹</p>
<h4 data-id="heading-22">6.2 æ¨¡å‹åŠ è½½å¤±è´¥</h4>
<p><strong>é—®é¢˜</strong>: æ¨¡å‹æ— æ³•æ˜¾ç¤ºæˆ–å´©æºƒ</p>
<p><strong>æ£€æŸ¥é¡¹</strong>:</p>
<ul>
<li>æ¨¡å‹æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®</li>
<li>.model3.jsonæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®</li>
<li>çº¹ç†æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
<li>åŠ¨ä½œæ–‡ä»¶æ˜¯å¦å®Œæ•´</li>
</ul>
<h4 data-id="heading-23">6.3 æ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>å»ºè®®</strong>:</p>
<ul>
<li>ä½¿ç”¨RENDERMODE_WHEN_DIRTYè€ŒéRENDERMODE_CONTINUOUSLY</li>
<li>é¢„åŠ è½½å¸¸ç”¨åŠ¨ä½œ</li>
<li>åˆç†è®¾ç½®åŠ¨ä½œä¼˜å…ˆçº§</li>
<li>é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯æ¨¡å‹å®ä¾‹</li>
</ul>
<h3 data-id="heading-24">7. æ–‡ä»¶ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">android/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ kotlin/com/hornhuang/tomato_plan/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Live2D_v3.java          <span class="hljs-comment"># Java/Kotlinæ¥å£</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Live2DPlatformView.kt    <span class="hljs-comment"># Flutterå¹³å°è§†å›¾</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MainActivity.kt         <span class="hljs-comment"># ä¸»Activity</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ cpp/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ lapp_model.cpp          <span class="hljs-comment"># JNIç»‘å®š</span>
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ live2d.cpp              <span class="hljs-comment"># Live2Dåˆå§‹åŒ–</span>
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Main/src/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ LAppModel.cpp       <span class="hljs-comment"># æ¨¡å‹ç®¡ç†</span>
â”‚   â”‚   â”‚   â””â”€â”€ assets/
â”‚   â”‚   â”‚       â””â”€â”€ mianfeimox/             <span class="hljs-comment"># Live2Dæ¨¡å‹èµ„æº</span>
â”‚   â”‚   â”‚           â”œâ”€â”€ llny.model3.json
â”‚   â”‚   â”‚           â”œâ”€â”€ llny.moc3
â”‚   â”‚   â”‚           â”œâ”€â”€ textures/
â”‚   â”‚   â”‚           â””â”€â”€ motions/
</code></pre>
<h3 data-id="heading-25">8. æ‰©å±•åŠŸèƒ½</h3>
<h4 data-id="heading-26">8.1 æ·»åŠ äº¤äº’äº‹ä»¶</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onTouchEvent</span><span class="hljs-params">(event: <span class="hljs-type">MotionEvent</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">when</span> (event.action) {
        MotionEvent.ACTION_DOWN -&gt; {
            model.hitTest(<span class="hljs-string">"Head"</span>, event.x, event.y)
        }
        MotionEvent.ACTION_MOVE -&gt; {
            model.setDragging(event.x, event.y)
        }
        MotionEvent.ACTION_UP -&gt; {
            model.setDragging(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}
</code></pre>
<h4 data-id="heading-27">8.2 æ’­æ”¾åŠ¨ä½œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ’­æ”¾æŒ‡å®šåŠ¨ä½œ</span>
model.startMotion(<span class="hljs-string">"TapBody"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, 
    { group, no -&gt; println(<span class="hljs-string">"åŠ¨ä½œå¼€å§‹: <span class="hljs-variable">$group</span>, <span class="hljs-variable">$no</span>"</span>) },
    { self -&gt; println(<span class="hljs-string">"åŠ¨ä½œç»“æŸ"</span>) }
)

<span class="hljs-comment">// è®¾ç½®è¡¨æƒ…</span>
model.setExpression(<span class="hljs-string">"f01"</span>)
</code></pre>
<h4 data-id="heading-28">8.3 ç‰©ç†æ¨¡æ‹Ÿ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è®¾ç½®åŠ é€Ÿåº¦ï¼ˆç”¨äºç‰©ç†æ¨¡æ‹Ÿï¼‰</span>
model.setAcceleration(<span class="hljs-number">0.5f</span>, <span class="hljs-number">0.0f</span>, <span class="hljs-number">0.0f</span>)
</code></pre>
<h3 data-id="heading-29">9. æ€»ç»“</h3>
<p>Live2D SDKåœ¨Android Flutteråº”ç”¨ä¸­çš„é›†æˆæ¶‰åŠå¤šä¸ªå±‚æ¬¡çš„åä½œï¼š</p>
<ol>
<li><strong>Flutterå±‚</strong>: é€šè¿‡PlatformViewåµŒå…¥åŸç”Ÿè§†å›¾</li>
<li><strong>Java/Kotlinå±‚</strong>: æä¾›Live2D SDKçš„æ¥å£å°è£…</li>
<li><strong>JNIå±‚</strong>: å®ç°Javaä¸C++çš„è·¨è¯­è¨€è°ƒç”¨</li>
<li><strong>C++å±‚</strong>: å®ç°Live2Dæ¨¡å‹çš„æ ¸å¿ƒåŠŸèƒ½</li>
</ol>
<p>å…³é”®è¦ç‚¹ï¼š</p>
<ul>
<li>æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹åˆå§‹åŒ–Live2D SDK</li>
<li>æ¨¡å‹åŠ è½½éµå¾ª: JSONè§£æ â†’ èµ„æºåŠ è½½ â†’ æ¸²æŸ“å™¨åˆå§‹åŒ–</li>
<li>æ¸²æŸ“å¾ªç¯: æ›´æ–°åŠ¨ä½œ â†’ æ›´æ–°æ¨¡å‹ â†’ ç»˜åˆ¶</li>
<li>äº¤äº’é€šè¿‡å‚æ•°æ§åˆ¶å’ŒåŠ¨ä½œæ’­æ”¾å®ç°</li>
</ul>
<p>é€šè¿‡åˆç†ç®¡ç†OpenGLä¸Šä¸‹æ–‡å’Œèµ„æºç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥å®ç°ç¨³å®šé«˜æ•ˆçš„Live2Dæ¨¡å‹æ¸²æŸ“æ•ˆæœã€‚</p>
<h2 data-id="heading-30">ç¬¬äºŒç«  Flutterä¾§çš„æ¸²æŸ“ä¸å±•ç¤º</h2>
<h2 data-id="heading-31">Flutterè°ƒç”¨Android Nativeç»„ä»¶å±•ç¤ºLive2D - é—®é¢˜è§£å†³æ€»ç»“</h2>
<h3 data-id="heading-32">1. Flutterè°ƒç”¨Android Nativeç»„ä»¶å±•ç¤ºLive2Dçš„å®Œæ•´æµç¨‹</h3>
<h4 data-id="heading-33">1.1 æ•´ä½“æ¶æ„</h4>
<pre><code class="hljs language-markdown" lang="markdown">Flutterå±‚ (Dart)
<span class="hljs-code">    â†“ PlatformView
Android Kotlinå±‚
    â†“ JNIè°ƒç”¨
C++ Nativeå±‚
    â†“ Live2D SDK
OpenGL ESæ¸²æŸ“
</span></code></pre>
<h4 data-id="heading-34">1.2 è¯¦ç»†è°ƒç”¨é“¾è·¯</h4>
<h5 data-id="heading-35">ç¬¬ä¸€æ­¥ï¼šFlutterç«¯åˆ›å»ºPlatformView</h5>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// åœ¨Flutterä»£ç ä¸­åˆ›å»ºLive2DView</span>
AndroidView(
  viewType: <span class="hljs-string">'com.hornhuang.tomato_plan/live2d_view'</span>,
  creationParams: &lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;{},
  creationParamsCodec: <span class="hljs-keyword">const</span> StandardMessageCodec(),
)
</code></pre>
<h5 data-id="heading-36">ç¬¬äºŒæ­¥ï¼šMainActivityæ³¨å†ŒPlatformView</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MainActivity.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span>: <span class="hljs-type">FlutterActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">configureFlutterEngine</span><span class="hljs-params">(flutterEngine: <span class="hljs-type">FlutterEngine</span>)</span></span> {
        <span class="hljs-keyword">super</span>.configureFlutterEngine(flutterEngine)
        flutterEngine
            .platformViewsController
            .registry
            .registerViewFactory(
                <span class="hljs-string">"com.hornhuang.tomato_plan/live2d_view"</span>,
                Live2DPlatformViewFactory()
            )
    }
}
</code></pre>
<h5 data-id="heading-37">ç¬¬ä¸‰æ­¥ï¼šLive2DPlatformViewFactoryåˆ›å»ºPlatformView</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DPlatformViewFactory</span> : <span class="hljs-type">PlatformViewFactory</span>(StandardMessageCodec.INSTANCE) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">create</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>, viewId: <span class="hljs-type">Int</span>, args: <span class="hljs-type">Any</span>?)</span></span>: PlatformView {
        <span class="hljs-keyword">return</span> Live2DPlatformView(context, viewId, args <span class="hljs-keyword">as</span> Map&lt;String, Any&gt;?)
    }
}
</code></pre>
<h5 data-id="heading-38">ç¬¬å››æ­¥ï¼šLive2DPlatformViewåˆ›å»ºGLSurfaceViewå’Œæ¸²æŸ“å™¨</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DPlatformView</span>(context: Context, id: <span class="hljs-built_in">Int</span>, creationParams: Map&lt;String, Any&gt;?)
    : PlatformView {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> glSurfaceView = GLSurfaceView(context)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> renderer = Live2DRenderer(context)
    
    <span class="hljs-keyword">init</span> {
        glSurfaceView.setEGLContextClientVersion(<span class="hljs-number">2</span>)
        glSurfaceView.setRenderer(renderer)
        glSurfaceView.renderMode = GLSurfaceView.RENDERMODE_CONTINUOUSLY
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getView</span><span class="hljs-params">()</span></span>: View = glSurfaceView
}
</code></pre>
<h5 data-id="heading-39">ç¬¬äº”æ­¥ï¼šLive2DRendereråˆå§‹åŒ–Live2D SDK</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// åˆå§‹åŒ–Live2D SDK</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        <span class="hljs-comment">// åˆ›å»ºæ¨¡å‹å®ä¾‹</span>
        model = LAppModel().apply {
            loadModelJson(<span class="hljs-string">"assets://mianfeimox/llny.model3.json"</span>)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceChanged</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        model.resize(width, height)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        Live2D_v3.clearBuffer(<span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        model.update()
        model.setParameterValue(<span class="hljs-string">"Param14"</span>, <span class="hljs-number">1f</span>)
        model.draw()
    }
}
</code></pre>
<h5 data-id="heading-40">ç¬¬å…­æ­¥ï¼šJNIè°ƒç”¨C++å±‚</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Live2D_v3.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LAppModel</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> nativeModel;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadModelJson</span><span class="hljs-params">(String fileName)</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span>;
}
</code></pre>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// lapp_model.cpp</span>
<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_loadModelJson</span><span class="hljs-params">(JNIEnv *env, jobject thiz,
                                                           jstring file_name)</span> </span>{
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *json_file = env-&gt;<span class="hljs-built_in">GetStringUTFChars</span>(file_name, <span class="hljs-literal">nullptr</span>);
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">LoadAssets</span>(json_file);
    env-&gt;<span class="hljs-built_in">ReleaseStringUTFChars</span>(file_name, json_file);
}

<span class="hljs-keyword">extern</span> <span class="hljs-string">"C"</span> <span class="hljs-function">JNIEXPORT <span class="hljs-type">void</span> JNICALL
<span class="hljs-title">Java_com_hornhuang_tomato_1plan_Live2D_1v3_00024LAppModel_draw</span><span class="hljs-params">(JNIEnv *env, jobject thiz)</span> </span>{
    <span class="hljs-built_in">getModel</span>(env, thiz)-&gt;<span class="hljs-built_in">Draw</span>();
}
</code></pre>
<h5 data-id="heading-41">ç¬¬ä¸ƒæ­¥ï¼šC++å±‚åŠ è½½å’Œæ¸²æŸ“Live2Dæ¨¡å‹</h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// LAppModel.cpp</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::LoadAssets</span><span class="hljs-params">(<span class="hljs-type">const</span> Csm::csmChar* fileName)</span> </span>{
    <span class="hljs-comment">// è§£æ.model3.jsonæ–‡ä»¶</span>
    Csm::csmByte* buffer = <span class="hljs-built_in">CreateBuffer</span>(fileName, &amp;size);
    _modelSetting = Csm::Model::CubismModelSettingJson::<span class="hljs-built_in">Create</span>(buffer, size);
    <span class="hljs-built_in">DeleteBuffer</span>(buffer, fileName);
    
    <span class="hljs-comment">// è®¾ç½®æ¨¡å‹å’Œçº¹ç†</span>
    <span class="hljs-built_in">SetupModel</span>(_modelSetting);
    <span class="hljs-built_in">SetupTextures</span>();
    <span class="hljs-built_in">PreloadMotionGroup</span>(MotionGroupIdle);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LAppModel::Draw</span><span class="hljs-params">()</span> </span>{
    Csm::CubismMatrix44 projection;
    projection.<span class="hljs-built_in">Scale</span>(<span class="hljs-number">1.0f</span>, <span class="hljs-number">1.0f</span>);
    _renderer-&gt;<span class="hljs-built_in">SetMvpMatrix</span>(&amp;projection);
    _renderer-&gt;<span class="hljs-built_in">DrawModel</span>();
}
</code></pre>
<h3 data-id="heading-42">2. é‡åˆ°çš„é—®é¢˜å’ŒBug</h3>
<h4 data-id="heading-43">é—®é¢˜1ï¼šPlatform Viewæœªæ³¨å†Œé”™è¯¯</h4>
<h5 data-id="heading-44">é”™è¯¯ä¿¡æ¯</h5>
<pre><code class="hljs language-bash" lang="bash">Trying to create a platform view of unregistered <span class="hljs-built_in">type</span>: com.hornhuang.tomato_plan/live2d_view
</code></pre>
<h5 data-id="heading-45">è§¦å‘åŸå› </h5>
<p>åˆ é™¤äº†NativeTextViewç›¸å…³æ–‡ä»¶åï¼ŒMainActivity.ktä¸­ä»ç„¶ä¿ç•™ç€NativeTextViewFactoryçš„æ³¨å†Œä»£ç ï¼Œä½†æ²¡æœ‰æ³¨å†ŒLive2DPlatformViewFactoryã€‚</p>
<h5 data-id="heading-46">è§£å†³æ–¹æ¡ˆ</h5>
<ol>
<li>åˆ é™¤MainActivity.ktä¸­çš„NativeTextViewFactoryæ³¨å†Œä»£ç </li>
<li>æ·»åŠ Live2DPlatformViewFactoryçš„æ³¨å†Œ</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MainActivity.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span>: <span class="hljs-type">FlutterActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">configureFlutterEngine</span><span class="hljs-params">(flutterEngine: <span class="hljs-type">FlutterEngine</span>)</span></span> {
        <span class="hljs-keyword">super</span>.configureFlutterEngine(flutterEngine)
        flutterEngine
            .platformViewsController
            .registry
            .registerViewFactory(
                <span class="hljs-string">"com.hornhuang.tomato_plan/live2d_view"</span>,
                Live2DPlatformViewFactory()
            )
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-47">é—®é¢˜2ï¼šç¼–è¯‘é”™è¯¯ - æœªè§£æçš„å¼•ç”¨</h4>
<h5 data-id="heading-48">é”™è¯¯ä¿¡æ¯</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Unresolved reference:</span> <span class="hljs-string">LAppModel</span>
<span class="hljs-attr">Unresolved reference:</span> <span class="hljs-string">drag</span>
<span class="hljs-attr">Unresolved reference:</span> <span class="hljs-string">touch</span>
<span class="hljs-attr">Unresolved reference:</span> <span class="hljs-string">release</span>
</code></pre>
<h5 data-id="heading-49">è§¦å‘åŸå› </h5>
<p>Live2DPlatformView.ktä¸­ä½¿ç”¨äº†LAppModelç±»ï¼Œä½†æ²¡æœ‰å¯¼å…¥æ­£ç¡®çš„åŒ…ã€‚</p>
<h5 data-id="heading-50">è§£å†³æ–¹æ¡ˆ</h5>
<p>åœ¨Live2DPlatformView.ktæ–‡ä»¶é¡¶éƒ¨æ·»åŠ å¯¼å…¥è¯­å¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> com.hornhuang.tomato_plan.Live2D_v3.LAppModel
</code></pre>
<hr/>
<h4 data-id="heading-51">é—®é¢˜3ï¼šLive2DActivityèƒ½æ˜¾ç¤ºï¼Œä½†Flutterçš„Live2DViewæ˜¾ç¤ºç©ºç™½ï¼ˆæ ¸å¿ƒé—®é¢˜ï¼‰</h4>
<h5 data-id="heading-52">ç°è±¡æè¿°</h5>
<ul>
<li>æ‰“å¼€Live2DActivityï¼šLive2Dæ¨¡å‹æ­£å¸¸æ˜¾ç¤º</li>
<li>è¿”å›Flutteré¦–é¡µï¼šLive2DViewæ˜¾ç¤ºä¸€ç‰‡ç©ºç™½ï¼ˆç»¿è‰²èƒŒæ™¯ï¼‰</li>
<li>æ—¥å¿—ä¸­å‡ºç°OpenGLé”™è¯¯ï¼š<code>glGetError() returned error 0x501</code></li>
</ul>
<h5 data-id="heading-53">è§¦å‘åŸå› åˆ†æ</h5>
<p><strong>æ ¹æœ¬åŸå› ï¼šOpenGLä¸Šä¸‹æ–‡å†²çª</strong></p>
<ol>
<li>
<p><strong>Live2DActivityå’ŒLive2DPlatformViewä½¿ç”¨ä¸åŒçš„OpenGLä¸Šä¸‹æ–‡</strong></p>
<ul>
<li>Live2DActivityæœ‰è‡ªå·±çš„GLSurfaceViewï¼Œåˆ›å»ºç‹¬ç«‹çš„OpenGLä¸Šä¸‹æ–‡</li>
<li>Live2DPlatformViewä¹Ÿæœ‰è‡ªå·±çš„GLSurfaceViewï¼Œåˆ›å»ºå¦ä¸€ä¸ªç‹¬ç«‹çš„OpenGLä¸Šä¸‹æ–‡</li>
</ul>
</li>
<li>
<p><strong>Live2D SDKçš„åˆå§‹åŒ–é—®é¢˜</strong></p>
<ul>
<li>æœ€åˆçš„å®ç°ä¸­ï¼ŒLive2D_v3.init()åœ¨MainActivityä¸­åªè°ƒç”¨ä¸€æ¬¡</li>
<li>è¿™å¯¼è‡´Live2D SDKçš„é™æ€èµ„æºï¼ˆå¦‚ç€è‰²å™¨ç¨‹åºï¼‰åœ¨ç¬¬ä¸€ä¸ªOpenGLä¸Šä¸‹æ–‡ä¸­åˆ›å»º</li>
<li>å½“åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªOpenGLä¸Šä¸‹æ–‡æ—¶ï¼Œè¿™äº›èµ„æºæ— æ•ˆ</li>
</ul>
</li>
<li>
<p><strong>ç€è‰²å™¨ç¨‹åºçš„OpenGLä¸Šä¸‹æ–‡ç»‘å®š</strong></p>
<ul>
<li>OpenGLçš„ç€è‰²å™¨ç¨‹åºæ˜¯ä¸Šä¸‹æ–‡ç»‘å®šçš„</li>
<li>åœ¨ä¸Šä¸‹æ–‡Aä¸­åˆ›å»ºçš„ç€è‰²å™¨ç¨‹åºåœ¨ä¸Šä¸‹æ–‡Bä¸­æ— æ³•ä½¿ç”¨</li>
<li>CubismRendereråœ¨åˆ›å»ºæ—¶ä¼šç¼–è¯‘å’Œé“¾æ¥ç€è‰²å™¨ç¨‹åº</li>
<li>è¿™äº›ç¨‹åºåªåœ¨åˆ›å»ºå®ƒä»¬çš„ä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆ</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯æµç¨‹</strong></p>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æ‰“å¼€Live2DActivity
â†“
Live2DActivityçš„OpenGLä¸Šä¸‹æ–‡åˆ›å»º
â†“
Live2D_v3<span class="hljs-selector-class">.init</span>() åœ¨MainActivityä¸­è°ƒç”¨ï¼ˆç¬¬ä¸€æ¬¡ï¼‰
â†“
ç€è‰²å™¨ç¨‹åºåœ¨Live2DActivityçš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»º
â†“
Live2Dæ¨¡å‹æ­£å¸¸æ˜¾ç¤º

ç”¨æˆ·è¿”å›Flutteré¦–é¡µ
â†“
Live2DPlatformViewçš„OpenGLä¸Šä¸‹æ–‡åˆ›å»º
â†“
Live2D_v3<span class="hljs-selector-class">.init</span>() æ£€æµ‹åˆ°å·²åˆå§‹åŒ–ï¼Œè·³è¿‡
â†“
Live2DPlatformViewå°è¯•ä½¿ç”¨Live2D SDK
â†“
å°è¯•ä½¿ç”¨åœ¨Live2DActivityä¸Šä¸‹æ–‡ä¸­åˆ›å»ºçš„ç€è‰²å™¨ç¨‹åº
â†“
OpenGLé”™è¯¯ <span class="hljs-number">0</span>x501 (GL_INVALID_VALUE)
â†“
æ¸²æŸ“å¤±è´¥ï¼Œæ˜¾ç¤ºç©ºç™½
</code></pre>
</li>
</ol>
<h5 data-id="heading-54">è§£å†³æ–¹æ¡ˆ</h5>
<p><strong>æ–¹æ¡ˆï¼šæ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ç‹¬ç«‹åˆå§‹åŒ–Live2D SDK</strong></p>
<ol>
<li><strong>ä¿®æ”¹Live2D_v3.javaï¼Œæ”¯æŒå¤šæ¬¡åˆå§‹åŒ–</strong></li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2D_v3</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">initialized</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Context context;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(Context ctx)</span> {
        <span class="hljs-keyword">if</span> (!initialized) {
            context = ctx;
            Csm_CubismFramework.initialize();
            initialized = <span class="hljs-literal">true</span>;
        }
    }
}
</code></pre>
<ol start="2">
<li><strong>ä¿®æ”¹Live2DPlatformView.ktï¼Œåœ¨onSurfaceCreatedä¸­åˆå§‹åŒ–</strong></li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// åœ¨æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ä¸­ç‹¬ç«‹åˆå§‹åŒ–Live2D SDK</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        <span class="hljs-comment">// åˆ›å»ºæ¨¡å‹å®ä¾‹</span>
        model = LAppModel().apply {
            loadModelJson(<span class="hljs-string">"assets://mianfeimox/llny.model3.json"</span>)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceChanged</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        model.resize(width, height)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        Live2D_v3.clearBuffer(<span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        model.update()
        model.setParameterValue(<span class="hljs-string">"Param14"</span>, <span class="hljs-number">1f</span>)
        model.draw()
    }
}
</code></pre>
<ol start="3">
<li><strong>ä¿®æ”¹Live2DActivity.ktï¼Œåœ¨MyRendererä¸­åˆå§‹åŒ–</strong></li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Live2DActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> glSurfaceView: GLSurfaceView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> renderer: MyRenderer

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_live2d)
        
        glSurfaceView = findViewById(R.id.glSurfaceView)
        renderer = MyRenderer(<span class="hljs-keyword">this</span>)
        glSurfaceView.setEGLContextClientVersion(<span class="hljs-number">2</span>)
        glSurfaceView.setRenderer(renderer)
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// åœ¨Live2DActivityçš„OpenGLä¸Šä¸‹æ–‡ä¸­åˆå§‹åŒ–Live2D SDK</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        model = LAppModel().apply {
            loadModelJson(<span class="hljs-string">"assets://mianfeimox/llny.model3.json"</span>)
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceChanged</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        model.resize(width, height)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        Live2D_v3.clearBuffer(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>)
        model.update()
        model.setParameterValue(<span class="hljs-string">"Param14"</span>, <span class="hljs-number">1f</span>)
        model.draw()
    }
}
</code></pre>
<ol start="4">
<li><strong>ç§»é™¤MainActivityä¸­çš„é›†ä¸­åˆå§‹åŒ–</strong></li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MainActivity.kt - ä¸å†åœ¨è¿™é‡Œåˆå§‹åŒ–Live2D</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span>: <span class="hljs-type">FlutterActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">configureFlutterEngine</span><span class="hljs-params">(flutterEngine: <span class="hljs-type">FlutterEngine</span>)</span></span> {
        <span class="hljs-keyword">super</span>.configureFlutterEngine(flutterEngine)
        flutterEngine
            .platformViewsController
            .registry
            .registerViewFactory(
                <span class="hljs-string">"com.hornhuang.tomato_plan/live2d_view"</span>,
                Live2DPlatformViewFactory()
            )
    }
}
</code></pre>
<h5 data-id="heading-55">ä¿®å¤åçš„æµç¨‹</h5>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æ‰“å¼€Live2DActivity
â†“
Live2DActivityçš„OpenGLä¸Šä¸‹æ–‡åˆ›å»º
â†“
MyRenderer<span class="hljs-selector-class">.onSurfaceCreated</span>() è°ƒç”¨
â†“
Live2D_v3<span class="hljs-selector-class">.init</span>() ç¬¬ä¸€æ¬¡åˆå§‹åŒ–
â†“
ç€è‰²å™¨ç¨‹åºåœ¨Live2DActivityçš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»º
â†“
Live2Dæ¨¡å‹æ­£å¸¸æ˜¾ç¤º

ç”¨æˆ·è¿”å›Flutteré¦–é¡µ
â†“
Live2DPlatformViewçš„OpenGLä¸Šä¸‹æ–‡åˆ›å»º
â†“
Live2DRenderer<span class="hljs-selector-class">.onSurfaceCreated</span>() è°ƒç”¨
â†“
Live2D_v3<span class="hljs-selector-class">.init</span>() æ£€æµ‹åˆ°å·²åˆå§‹åŒ–ï¼Œè·³è¿‡æ¡†æ¶åˆå§‹åŒ–
â†“
åˆ›å»ºæ–°çš„LAppModelå®ä¾‹
â†“
CubismRendereråœ¨Live2DPlatformViewçš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºæ–°çš„ç€è‰²å™¨ç¨‹åº
â†“
Live2Dæ¨¡å‹æ­£å¸¸æ˜¾ç¤º
</code></pre>
<h3 data-id="heading-56">3. å…³é”®æŠ€æœ¯ç‚¹æ€»ç»“</h3>
<h4 data-id="heading-57">3.1 OpenGLä¸Šä¸‹æ–‡éš”ç¦»</h4>
<ul>
<li>æ¯ä¸ªGLSurfaceViewåˆ›å»ºç‹¬ç«‹çš„OpenGLä¸Šä¸‹æ–‡</li>
<li>OpenGLèµ„æºï¼ˆç€è‰²å™¨ç¨‹åºã€çº¹ç†ç­‰ï¼‰æ˜¯ä¸Šä¸‹æ–‡ç»‘å®šçš„</li>
<li>ä¸åŒä¸Šä¸‹æ–‡ä¹‹é—´ä¸èƒ½å…±äº«OpenGLèµ„æº</li>
</ul>
<h4 data-id="heading-58">3.2 Live2D SDKçš„åˆå§‹åŒ–ç­–ç•¥</h4>
<ul>
<li><strong>æ¡†æ¶åˆå§‹åŒ–</strong>ï¼ˆCsm_CubismFramework.initialize()ï¼‰ï¼šåªéœ€ä¸€æ¬¡</li>
<li><strong>æ¸²æŸ“å™¨åˆå§‹åŒ–</strong>ï¼ˆCubismRendererï¼‰ï¼šæ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹åˆ›å»º</li>
<li><strong>æ¨¡å‹å®ä¾‹</strong>ï¼šæ¯ä¸ªOpenGLä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹çš„LAppModelå®ä¾‹</li>
</ul>
<h4 data-id="heading-59">3.3 Flutter PlatformViewçš„ç”Ÿå‘½å‘¨æœŸ</h4>
<ul>
<li>PlatformViewåˆ›å»ºæ—¶ï¼ŒGLSurfaceViewä¹Ÿä¼šåˆ›å»º</li>
<li>GLSurfaceViewçš„onSurfaceCreatedåœ¨OpenGLä¸Šä¸‹æ–‡åˆ›å»ºæ—¶è°ƒç”¨</li>
<li>onSurfaceChangedåœ¨è§†å›¾å°ºå¯¸å˜åŒ–æ—¶è°ƒç”¨</li>
<li>onDrawFrameåœ¨æ¯ä¸€å¸§æ¸²æŸ“æ—¶è°ƒç”¨</li>
</ul>
<h3 data-id="heading-60">4. é—®é¢˜æ’æŸ¥è¿‡ç¨‹</h3>
<h4 data-id="heading-61">4.1 åˆæ­¥æ’æŸ¥</h4>
<ol>
<li>æ£€æŸ¥Live2DActivityèƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œè¯´æ˜æ¨¡å‹æ–‡ä»¶å’ŒLive2D SDKæœ¬èº«æ²¡æœ‰é—®é¢˜</li>
<li>æ£€æŸ¥Flutterçš„Live2DViewæ˜¾ç¤ºç»¿è‰²èƒŒæ™¯ï¼Œè¯´æ˜GLSurfaceViewæ­£å¸¸å·¥ä½œ</li>
<li>æ—¥å¿—ä¸­å‡ºç°OpenGLé”™è¯¯ï¼ŒæŒ‡å‘æ¸²æŸ“é—®é¢˜</li>
</ol>
<h4 data-id="heading-62">4.2 æ·±å…¥åˆ†æ</h4>
<ol>
<li>åˆ†æLive2DActivityå’ŒLive2DPlatformViewçš„ä»£ç å·®å¼‚</li>
<li>å‘ç°ä¸¤è€…éƒ½ä½¿ç”¨Live2D_v3.init()ï¼Œä½†è°ƒç”¨ä½ç½®ä¸åŒ</li>
<li>ç ”ç©¶OpenGLä¸Šä¸‹æ–‡çš„ç®¡ç†æœºåˆ¶</li>
<li>ç¡®è®¤ç€è‰²å™¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ç»‘å®šç‰¹æ€§</li>
</ol>
<h4 data-id="heading-63">4.3 éªŒè¯å‡è®¾</h4>
<ol>
<li>åœ¨Live2DPlatformViewçš„onSurfaceCreatedä¸­æ·»åŠ æ—¥å¿—</li>
<li>è§‚å¯ŸLive2D_v3.init()çš„è°ƒç”¨æ—¶æœº</li>
<li>ç¡®è®¤OpenGLé”™è¯¯çš„è§¦å‘æ—¶æœº</li>
<li>éªŒè¯ç‹¬ç«‹åˆå§‹åŒ–æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§</li>
</ol>
<h3 data-id="heading-64">5. ç»éªŒæ•™è®­</h3>
<h4 data-id="heading-65">5.1 OpenGLä¸Šä¸‹æ–‡ç®¡ç†</h4>
<ul>
<li>åœ¨Androidä¸­ä½¿ç”¨å¤šä¸ªGLSurfaceViewæ—¶ï¼Œè¦æ³¨æ„ä¸Šä¸‹æ–‡éš”ç¦»</li>
<li>OpenGLèµ„æºä¸èƒ½è·¨ä¸Šä¸‹æ–‡å…±äº«</li>
<li>æ¯ä¸ªä¸Šä¸‹æ–‡éœ€è¦ç‹¬ç«‹åˆå§‹åŒ–å’Œæ¸…ç†èµ„æº</li>
</ul>
<h4 data-id="heading-66">5.2 Live2D SDKé›†æˆ</h4>
<ul>
<li>Live2D SDKçš„æ¡†æ¶åˆå§‹åŒ–å¯ä»¥å…¨å±€è¿›è¡Œ</li>
<li>ä½†æ¸²æŸ“ç›¸å…³çš„èµ„æºï¼ˆç€è‰²å™¨ç¨‹åºã€çº¹ç†ç­‰ï¼‰éœ€è¦æ¯ä¸ªä¸Šä¸‹æ–‡ç‹¬ç«‹åˆ›å»º</li>
<li>æ¨¡å‹å®ä¾‹ä¹Ÿåº”è¯¥æ¯ä¸ªä¸Šä¸‹æ–‡ç‹¬ç«‹åˆ›å»º</li>
</ul>
<h4 data-id="heading-67">5.3 Flutter PlatformViewå¼€å‘</h4>
<ul>
<li>PlatformViewçš„ç”Ÿå‘½å‘¨æœŸä¸åŸç”ŸViewä¸€è‡´</li>
<li>éœ€è¦æ­£ç¡®å¤„ç†OpenGLä¸Šä¸‹æ–‡çš„åˆ›å»ºå’Œé”€æ¯</li>
<li>é¿å…åœ¨PlatformViewä¸­ä½¿ç”¨é™æ€çš„OpenGLèµ„æº</li>
</ul>
<h3 data-id="heading-68">6. æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-69">6.1 åˆå§‹åŒ–æ¨¡å¼</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ¨èçš„åˆå§‹åŒ–æ¨¡å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRenderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> model: LAppModel

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ç‹¬ç«‹åˆå§‹åŒ–</span>
        Live2D_v3.<span class="hljs-keyword">init</span>(context)
        
        <span class="hljs-comment">// åˆ›å»ºç‹¬ç«‹çš„æ¨¡å‹å®ä¾‹</span>
        model = LAppModel()
        model.loadModelJson(<span class="hljs-string">"assets://model/xxx.model3.json"</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceDestroyed</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        <span class="hljs-comment">// æ¸…ç†èµ„æº</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šLive2D_v3.dispose()ä¸åº”è¯¥åœ¨è¿™é‡Œè°ƒç”¨</span>
        <span class="hljs-comment">// å› ä¸ºå¯èƒ½è¿˜æœ‰å…¶ä»–OpenGLä¸Šä¸‹æ–‡åœ¨ä½¿ç”¨</span>
    }
}
</code></pre>
<h4 data-id="heading-70">6.2 èµ„æºç®¡ç†</h4>
<ul>
<li>é¿å…åœ¨å¤šä¸ªOpenGLä¸Šä¸‹æ–‡ä¹‹é—´å…±äº«OpenGLèµ„æº</li>
<li>æ¯ä¸ªä¸Šä¸‹æ–‡ç‹¬ç«‹åˆ›å»ºå’Œç®¡ç†è‡ªå·±çš„èµ„æº</li>
<li>æ³¨æ„èµ„æºçš„ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…å†…å­˜æ³„æ¼</li>
</ul>
<h4 data-id="heading-71">6.3 é”™è¯¯å¤„ç†</h4>
<ul>
<li>ä½¿ç”¨glGetError()æ£€æµ‹OpenGLé”™è¯¯</li>
<li>è®°å½•è¯¦ç»†çš„æ—¥å¿—ä»¥ä¾¿æ’æŸ¥é—®é¢˜</li>
<li>ç†è§£OpenGLé”™è¯¯ç çš„å«ä¹‰ï¼ˆå¦‚0x501 = GL_INVALID_VALUEï¼‰</li>
</ul>
<h3 data-id="heading-72">7. æ€»ç»“</h3>
<p>é€šè¿‡è¿™æ¬¡é—®é¢˜æ’æŸ¥å’Œä¿®å¤ï¼Œæˆ‘ä»¬æ·±å…¥ç†è§£äº†ï¼š</p>
<ol>
<li><strong>Flutter PlatformViewçš„å·¥ä½œåŸç†</strong></li>
<li><strong>OpenGLä¸Šä¸‹æ–‡çš„ç®¡ç†æœºåˆ¶</strong></li>
<li><strong>Live2D SDKçš„æ­£ç¡®é›†æˆæ–¹å¼</strong></li>
<li><strong>è·¨ä¸Šä¸‹æ–‡èµ„æºå…±äº«çš„é™åˆ¶</strong></li>
</ol>
<p>æ ¸å¿ƒè§£å†³æ–¹æ¡ˆæ˜¯ï¼š<strong>æ¯ä¸ªOpenGLä¸Šä¸‹æ–‡ç‹¬ç«‹åˆå§‹åŒ–Live2Dç›¸å…³çš„æ¸²æŸ“èµ„æº</strong>ï¼Œç¡®ä¿ç€è‰²å™¨ç¨‹åºç­‰OpenGLèµ„æºåœ¨æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºå’Œä½¿ç”¨ã€‚</p>
<p>è¿™ä¸ªç»éªŒå¯¹äºå…¶ä»–éœ€è¦é›†æˆOpenGLæ¸²æŸ“çš„Flutteré¡¹ç›®ä¹Ÿå…·æœ‰å‚è€ƒä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ—¥å¸¸çŸ¥è¯†ç§¯ç´¯ã€‘Kotlin let å‡½æ•°ã€inline å‡½æ•°ä»¥åŠ DSL]]></title>    <link>https://juejin.cn/post/7588146449005101092</link>    <guid>https://juejin.cn/post/7588146449005101092</guid>    <pubDate>2025-12-27T08:08:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588146449005101092" data-draft-id="7587630413012680714" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ—¥å¸¸çŸ¥è¯†ç§¯ç´¯ã€‘Kotlin let å‡½æ•°ã€inline å‡½æ•°ä»¥åŠ DSL"/> <meta itemprop="keywords" content="Kotlin,ç¼–ç¨‹è¯­è¨€,Android"/> <meta itemprop="datePublished" content="2025-12-27T08:08:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lei_official"/> <meta itemprop="url" content="https://juejin.cn/user/2351234021066314"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ—¥å¸¸çŸ¥è¯†ç§¯ç´¯ã€‘Kotlin let å‡½æ•°ã€inline å‡½æ•°ä»¥åŠ DSL
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2351234021066314/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lei_official
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T08:08:30.000Z" title="Sat Dec 27 2025 08:08:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‡¡äº‹æœ‰äº¤ä»£ â€”â€” æ¥åˆ°ä»»åŠ¡æ—¶ï¼Œä¸»åŠ¨æ˜ç¡®ä»»åŠ¡ç›®æ ‡ã€èƒŒæ™¯ã€åˆ©ç›Šç›¸å…³æ–¹ã€äº¤ä»˜ç‰©ã€æ—¶é—´èŠ‚ç‚¹ã€‚<br/>ä»¶ä»¶æœ‰ç€è½ â€”â€” æ‰§è¡Œä»»åŠ¡è¿‡ç¨‹ä¸­ï¼Œåœ¨é‡Œç¨‹ç¢‘èŠ‚ç‚¹åŠæ—¶åŒæ­¥ï¼Œåšå¥½é¢„æœŸç®¡ç†ã€‚<br/>äº‹äº‹æœ‰å›éŸ³ â€”â€” ä»»åŠ¡å®Œæˆåï¼Œæœ‰å¤ç›˜ï¼Œæœ‰æ±‡æŠ¥ï¼Œæœ‰æ€»ç»“ã€‚</p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« è®°å½•äº†è¿‘æœŸç§¯ç´¯çš„ä¸€äº›é›¶æ•£çŸ¥è¯†ç‚¹ï¼Œä¸´è¿‘å…ƒæ—¦ã€æ˜¥èŠ‚ï¼Œè¿™ä¸ªæ—¶æœŸæ˜¯ä¸€å¹´é‡Œå·¥ä½œç›¸å¯¹è½»æ¾çš„é˜¶æ®µï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¤ç›˜æ€»ç»“è¿‡å»ä¸€å¹´çš„ç»éªŒã€ä»¥åŠåšå¥½æ˜å¹´ç›®æ ‡è§„åˆ’çš„å…³é”®èŠ‚ç‚¹ã€‚<strong>åˆ©ç”¨å¥½ï¼Œåˆ«è™šåº¦</strong>ã€‚</p>
<h2 data-id="heading-0">ä½ çœŸçš„éœ€è¦ä½¿ç”¨ let å‡½æ•°å—ï¼Ÿ</h2>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d392b67f326648ed9a651e8b1f2addc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767427710&amp;x-signature=KRUvnLcCqA%2F33q2JkVaq1FnNvrE%3D" alt="image.png" width="50%" loading="lazy"/>
<p>åœ¨ Kotlin ä¸­ï¼Œ<code>let</code>ã€<code>apply</code>ã€<code>also</code>ã€<code>run</code> ç­‰ç­‰å‡½æ•°ï¼Œæ˜¯é™ä½ä»£ç è¡Œæ•°ã€æå‡å¯è¯»æ€§çš„åˆ©å™¨ï¼Œç„¶è€Œå®ƒä»¬å¹¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼Œä¼šå¸¦æ¥ç›¸åçš„æ•ˆæœã€‚</p>
<h3 data-id="heading-1">let çš„ä¸€èˆ¬ç”¨æ³•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¦‚æœå…ƒç´ éç©ºï¼Œåˆ™å¯¹å…¶è¿›è¡Œç»˜åˆ¶</span>
element?.let { render(it) }

<span class="hljs-comment">// é let å†™æ³•</span>
<span class="hljs-keyword">if</span> (element != <span class="hljs-literal">null</span>) {
	render(element)
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>let</code> å‡½æ•°å°†3è¡Œä»£ç ç²¾ç®€æˆä¸º1è¡Œï¼Œç²¾ç®€äº† 66% çš„ä»£ç ã€‚å®ƒé€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>å•æ¬¡è°ƒç”¨è¯¥å¯¹è±¡</li>
<li>lambda è¡Œæ•°å¾ˆå°‘</li>
<li>æ²¡æœ‰åç»­ä¾èµ–</li>
</ul>
<p>ä¸ä¹‹ç›¸åçš„æ¡ä»¶ï¼Œå°±æ˜¯ä¸é€‚ç”¨äº let çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">let ä¸é€‚ç”¨çš„åœºæ™¯</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç¾éš¾ç°åœº1ï¼šè¡Œæ•°å¤šã€æœ‰åç»­ä¾èµ–</span>
element?.let { e -&gt;
    config?.let { c -&gt;
        adapter?.let { a -&gt;
            renderer?.let { r -&gt;
                r.render(e, c, a)
            }
        }
    }
}

<span class="hljs-comment">// ç¾éš¾ç°åœº2ï¼šè¶…è¿‡1è¡Œä½¿ç”¨ let å¯¹è±¡</span>
element?.let {
    doSomething(it)
    doAnotherThing(it)
    doMore(it)
}
</code></pre>
<p>ä»¥ä¸Šå·²ç»æ˜¯ Kotlin çš„åæ¨¡å¼äº†ï¼Œè¿™æ ·çš„ä»£ç ä¸æ–­<code>å‘å³åç§»ï¼ˆrightward driftï¼‰</code>ï¼Œ<strong>éš¾è¯»å¹¶ä¸”éš¾æ”¹</strong>ï¼Œåœ¨è¿›è¡Œ Code Review æ—¶ä¸€å®šè¦è¯†åˆ«å‡ºæ¥ã€‚</p>
<h3 data-id="heading-3">æ›¿ä»£æ–¹æ¡ˆ return fast</h3>
<p>åœ¨å‡½æ•°çš„å¼€å¤´ï¼Œæ£€æŸ¥å˜é‡æ¡ä»¶ï¼Œå¦‚æœä¸ç¬¦åˆç«‹åˆ» returnï¼Œå¯ä»¥åœ¨éœ€è¦çš„ä½ç½®å¢åŠ æ—¥å¿—æ‰“å°ï¼Œä»¥ä¾¿è¿½æº¯é—®é¢˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateView</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> e = element ?: <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">val</span> c = config ?: <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">val</span> a = adapter ?: <span class="hljs-keyword">return</span>

    render(e, c, a)
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ˜¯å¥½ä»£ç ï¼Ÿ</strong></p>
<ul>
<li>æ²¡æœ‰åµŒå¥—</li>
<li>æ§åˆ¶æµæ¸…æ™°</li>
<li>å¯è°ƒè¯•ï¼ˆæ¯ä¸€è¡Œéƒ½èƒ½æ‰“æ–­ç‚¹ï¼‰</li>
<li>éå¸¸ç¬¦åˆ â€œfail fastâ€ åŸåˆ™</li>
</ul>
<p>æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æœ eã€cã€a è¿™ä¸‰ä¸ªå¯¹è±¡ç»å¸¸ä¸€èµ·åˆ¤ç©ºï¼Œå¯ä»¥å°†å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªçŠ¶æ€ï¼Œæ¨èå¯¹å®ƒä»¬è¿›è¡ŒçŠ¶æ€èšåˆï¼Œæœ‰åˆ©äºé•¿æœŸä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// çŠ¶æ€èšåˆ</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RenderState</span>(
    <span class="hljs-keyword">val</span> element: Element,
    <span class="hljs-keyword">val</span> config: Config,
    <span class="hljs-keyword">val</span> adapter: Adapter
)

<span class="hljs-comment">// åªæœ‰ä¸€ä¸ªå˜é‡</span>
<span class="hljs-keyword">val</span> state: RenderState? = ...

<span class="hljs-comment">// ä½¿ç”¨æ—¶åˆ¤æ–­è¯¥å˜é‡</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateView</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> s = state ?: <span class="hljs-keyword">return</span>
    render(s)
}
</code></pre>
<p>æ­¤å¤–ï¼Œå¦‚æœå‘ç°ï¼Œä»£ç é‡Œå¤šå¤„è¿›è¡Œåˆ¤ç©ºæ“ä½œï¼Œåˆ™å¯ä»¥åˆ©ç”¨ DSLï¼Œå°†åˆ¤ç©ºæ“ä½œæå–å‡º <code>withReadyElement</code> å‡½æ•°ï¼Œ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æå– inline å‡½æ•°ï¼Œé›†ä¸­è¿›è¡Œå¯ç©ºæ€§å¤„ç†</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">withReadyElement</span><span class="hljs-params">(block: (<span class="hljs-type">Element</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">val</span> e = element ?: <span class="hljs-keyword">return</span>
    block(e)
}

<span class="hljs-comment">// è°ƒç”¨ç‚¹æ›´åŠ ç¾è§‚å¹²å‡€</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateView</span><span class="hljs-params">()</span></span> {
    withReadyElement {
        render(it)
    }
}
</code></pre>
<h2 data-id="heading-4">inline fun ç”¨äºæ¶ˆé™¤ Lambda å¯¹è±¡é¢å¤–å¼€é”€</h2>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a21849cdca94449b6a88f2f36420c77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767427710&amp;x-signature=knoT7IVA8H0X%2BSNR%2BClpTdCKsCo%3D" alt="image.png" width="70%" loading="lazy"/>
<p><code>inline fun</code> æ˜¯â€œä¸º Lambda ä¹°å•çš„å·¥å…·â€ï¼Œ<strong>ç”¨äºæ¶ˆé™¤ Lambda å‚æ•°å¼•èµ·çš„å¯¹è±¡åˆ›å»º&amp;é—´æ¥è°ƒç”¨å¼€é”€</strong>ï¼ŒåŒæ ·åœ°ï¼Œå®ƒä¹Ÿä¸æ˜¯â€œé“¶å¼¹â€ï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼Œåè€Œä¼šå¼•èµ·æ€§èƒ½ä¸‹é™ã€‚</p>
<h3 data-id="heading-5">æ™®é€š Lambda å‡½æ•°ä¸ inline Lambda å‡½æ•°</h3>
<p><strong>æ™®é€š Lambda å‡½æ•°</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doSomething</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    block()
}
</code></pre>
<p>ç³»ç»Ÿåœ¨ç¼–è¯‘è¿™æ®µä»£ç æ—¶ï¼Œå®é™…ä¸Šå‘ç”Ÿäº†ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ª <code>Function0</code> å¯¹è±¡ï¼ˆè¡¨ç¤º0ä¸ªå‚æ•°ã€å³æ— å‚å‡½æ•°ï¼‰</li>
<li>æ•è·å¤–éƒ¨å˜é‡ï¼Œç”Ÿæˆé—­åŒ…</li>
<li>é€šè¿‡ <code>invoke()</code> é—´æ¥è°ƒç”¨</li>
</ul>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬è°ƒç”¨ <code>doSomething { println("hello") }</code> åï¼Œç¼–è¯‘å™¨å®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªç±»ï¼Œå¹¶è°ƒç”¨å…¶ <code>invoke</code> å‡½æ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DoSomething$1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Function0</span>&lt;Unit&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Unit <span class="hljs-title function_">invoke</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"hello"</span>)
        <span class="hljs-keyword">return</span> Unit.INSTANCE;
    }
}
</code></pre>
<p><strong>inline Lambda å‡½æ•°</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doSomething</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    block()
}

<span class="hljs-comment">// ç¼–è¯‘åç›´æ¥å±•å¼€</span>
println(<span class="hljs-string">"hello"</span>)
</code></pre>
<h3 data-id="heading-6">æ ‡å‡†åº“çš„ inline ç”¨æ³•</h3>
<p>åœ¨ Kotlin æ ‡å‡†åº“é‡Œï¼Œè¿™äº›å‡½æ•°éƒ½æ˜¯ inline å®ç°</p>
<ul>
<li><code>let</code></li>
<li><code>apply</code></li>
<li><code>run</code></li>
<li><code>with</code></li>
<li><code>use</code></li>
<li><code>synchronized</code></li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T.<span class="hljs-title">apply</span><span class="hljs-params">(block: <span class="hljs-type">T</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span>: T
</code></pre>
<h3 data-id="heading-7">inline çš„è´Ÿé¢ä½œç”¨</h3>
<p>ç”±äº inline æœ¬è´¨ä¸Šé‡‡ç”¨äº† <code>å¤åˆ¶-ç²˜è´´</code> çš„æ¨¡å¼ï¼Œå› æ­¤å®ƒä¼šåœ¨æ¯ä¸ªè°ƒç”¨ç‚¹å¤åˆ¶ä¸€ä»½å‡½æ•°ä»£ç ï¼Œè¿™ä¼šé€ æˆ <code>APK / DEX è†¨èƒ€</code>ï¼Œå¯¹ Android æ¥è¯´ï¼Œæ›´ä¼šå¼•èµ· <strong>æ–¹æ³•æ•°å¢åŠ ï¼Œç”šè‡³çªç ´ 64K é™åˆ¶</strong>ã€‚</p>
<h3 data-id="heading-8">inline çš„åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å‚æ•°æ˜¯ <code>lambda</code> ç±»å‹</li>
<li><code>lambda</code> éå¸¸çŸ­</li>
<li>è¯¥å‡½æ•° 90% ä»¥ä¸Šæ˜¯ lambda è°ƒç”¨</li>
<li>åº”ç”¨åœ¨å¾ªç¯ / UI / çƒ­è·¯å¾„ä¸­</li>
<li>inline æ”¶ç›Š &gt; ä»£ç è†¨èƒ€æˆæœ¬</li>
</ul>
<h2 data-id="heading-9">DSLï¼ŒæŠŠæ¡å¥½â€œæå‡å¯è¯»æ€§â€ä¸â€œæ»¥ç”¨â€ä¹‹é—´çš„ç•Œé™</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f6f805ff7004862a181894f89e18a2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767427710&amp;x-signature=s7yDmw0ziEFA4oiyoqcuzxdSf%2Fc%3D" alt="image.png" loading="lazy"/></p>
<p><code>DSLï¼ˆDomain-Specific Languageï¼Œé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰</code>ï¼Œæ˜¯ä¸€ç§ <strong>åªä¸ºæŸä¸ªç‰¹å®šé¢†åŸŸæœåŠ¡</strong> çš„è¯­è¨€ï¼Œç›®æ ‡ä¸æ˜¯â€œä»€ä¹ˆéƒ½èƒ½å¹²â€ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªé¢†åŸŸçš„è¡¨è¾¾åšåˆ°æœ€æ¸…æ™°ã€æœ€çœå¿ƒã€æœ€ä¸å®¹æ˜“å†™é”™ã€‚</p>
<p>å¦‚ä½•ç†è§£â€œé¢†åŸŸâ€å‘¢ï¼Ÿåœ¨æˆ‘çœ‹æ¥ï¼Œâ€œé¢†åŸŸâ€æ˜¯æŒ‡ç‰¹å®šçš„åœºæ™¯ã€è¯­å¢ƒã€ä¸Šä¸‹æ–‡ï¼Œå®ƒå…·æœ‰ä¸€å®šçš„é‡å¤æ€§ï¼Œå› æ­¤é€šè¿‡æç‚¼æ€»ç»“ DSLï¼Œèƒ½å¤Ÿé™ä½é‡å¤ä½¿ç”¨çš„æˆæœ¬ã€‚â€œé¢†åŸŸâ€å¯ä»¥æ˜¯æŠ€æœ¯ä¸Šçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸šåŠ¡åœºæ™¯é‡Œçš„ã€‚</p>
<h3 data-id="heading-10">GPL ä¸ DSL</h3>
<p>ä¸ DSL ç›¸å¯¹çš„æ¦‚å¿µï¼Œæ˜¯ <strong>é€šç”¨è¯­è¨€ï¼ˆGPLï¼‰</strong>ï¼ŒJava / Kotlin / C++ éƒ½å±äºæ­¤ç±»ï¼Œå®ƒä»¬åŠŸèƒ½å¼ºå¤§ä¸”å…¨é¢ï¼Œä½†éšä¹‹è€Œæ¥çš„ï¼Œæ˜¯å†™æ³•ä¸¥è°¨ç”šè‡³å†—é•¿ï¼Œæ— æ³•åšåˆ°é’ˆå¯¹ç‰¹å®šåœºæ™¯ï¼ˆé¢†åŸŸï¼‰è¿›è¡Œç®€åŒ–ã€‚</p>
<p>DSL åˆ™ä¸“æ³¨äºè§£å†³ä¸€ä¸ªç‰¹å®šé¢†åŸŸçš„é—®é¢˜ï¼Œä¸ºæ­¤è¿›è¡Œäº†ç‰¹å®šä¼˜åŒ–ï¼ŒçŸ­ã€å¹³ã€å¿«ã€å‡†ã€‚</p>
<p>GPLã€DSL éƒ½å¯ä»¥è§£å†³é—®é¢˜ï¼Œé‡ç‚¹åœ¨äºé€‰æ‹©ä½¿ç”¨å“ªä¸€ä¸ªã€‚</p>
<h3 data-id="heading-11">DSL çš„ä¸¤å¤§ç±»å‹ï¼šå¤–éƒ¨ DSL</h3>
<p>å¤–éƒ¨ DSL å…·å¤‡ <strong>ç‹¬ç«‹çš„è¯­æ³•å’Œè§£æå™¨</strong> ï¼Œæ›´åƒä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œå› æ­¤å…¶è¡¨è¾¾èƒ½åŠ›å¾ˆå¼ºã€‚åŒæ—¶ï¼Œç”±äºä¾èµ–äºç‰¹å®šè§£æå™¨ï¼Œæ•…å®šåˆ¶æˆæœ¬é«˜ã€‚</p>
<p>å¸¸è§çš„å¤–éƒ¨ DSL æœ‰ï¼š</p>
<ul>
<li>SQL</li>
<li>æ­£åˆ™è¡¨è¾¾å¼</li>
<li>Gradle Groovy/Kotlin DSLï¼ˆbuild.gradleï¼‰</li>
<li>HTML / CSS</li>
</ul>
<h3 data-id="heading-12">DSL çš„ä¸¤å¤§ç±»å‹ï¼šå†…éƒ¨ DSL</h3>
<p>å†…éƒ¨ DSL åœ¨ Kotlin è¯­è¨€ä¸­æ˜¯éå¸¸å¸¸è§çš„ï¼Œä¾‹å¦‚å‰æ–‡çš„ <code>let</code>ã€<code>apply</code>ã€<code>also</code> ç­‰å‡å±äºæ­¤ç±»ã€‚å¯ä»¥é€šè¿‡ Kotlin è¯­æ³•ç‰¹æ€§ï¼Œä½¿ä»£ç â€œçœ‹èµ·æ¥åƒæ–°çš„è¯­è¨€â€ã€‚Kotlin çš„æ ‡å‡†åº“ä¸­ï¼Œæœ‰å¾ˆå¤š API æœ¬èº«å°±æ˜¯ DSLã€‚ä¸¾ä¸¤ä¸ªå¸¸è§çš„ä¾‹å­ï¼š</p>
<p><strong>ä¾‹1ï¼ŒLambda with Receiver</strong></p>
<p>å®šä¹‰ <code>user</code> DSLï¼Œä»£æ›¿ <code>set</code> å‡½æ•°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ Lambdaï¼ŒåŸŸå†…å¯¹è±¡ä¸º User</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">user</span><span class="hljs-params">(block: <span class="hljs-type">User</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">val</span> u = User()
    u.block()
}

<span class="hljs-comment">// ä½¿ç”¨ DSL</span>
user {
	name = <span class="hljs-string">"Lei"</span>
}

<span class="hljs-comment">// ä¸ä½¿ç”¨ DSL</span>
user.setName(<span class="hljs-string">"Lei"</span>)
</code></pre>
<p><strong>ä¾‹2ï¼Œ infix å‡½æ•°</strong></p>
<p>å¯ä»¥æå‡å¯è¯»æ€§ï¼Œä¾‹å¦‚å®šä¹‰äºŒå…ƒè¿ç®—ç¬¦ <code>eq</code>ï¼Œæ¯”è¾ƒ String å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å£°æ˜ DSL</span>
<span class="hljs-keyword">infix</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">eq</span><span class="hljs-params">(value: <span class="hljs-type">String</span>)</span></span>

<span class="hljs-comment">// ä½¿ç”¨ DSL</span>
<span class="hljs-string">"status"</span> eq <span class="hljs-string">"success"</span>
</code></pre>
<blockquote>
<p>Gradle Kotlinã€Jetpack Composeã€HTML éƒ½æ˜¯å…¸å‹çš„ DSLï¼ŒUIç»“æ„=ä»£ç ç»“æ„ï¼Œèµ·åˆ°â€œçœ‹ä»£ç çŸ¥UIâ€çš„ä½œç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-13">DSL ä¸æ˜¯ç‚«æŠ€å·¥å…·ï¼Œè€Œæ˜¯æŠŠä¸šåŠ¡è§„åˆ™æå–ä¸ºä»£ç çš„æ‰‹æ®µ</h3>













<table><thead><tr><th>å€¼å¾—è®¾è®¡ DSL</th><th>ä¸è¯¥ç”¨DSL</th></tr></thead><tbody><tr><td>âœ…æ˜¯ä¸æ˜¯åå¤å†™ç›¸åŒç»“æ„ï¼Ÿ<br/>âœ…ä¸šåŠ¡è§„åˆ™æ˜¯å¦å›ºå®šï¼Ÿ<br/>âœ…ç°åœ¨çš„ä»£ç æ˜¯å¦â€œçœ‹ä¸å‡ºä¸šåŠ¡è¯­ä¹‰â€ï¼Ÿ<br/>âœ…é”™è¯¯æ˜¯ä¸æ˜¯ç»å¸¸å‘ç”Ÿåœ¨â€œç”¨æ³•ä¸å¯¹â€ï¼Ÿ</td><td>âŒä¸€æ¬¡æ€§é€»è¾‘<br/>âŒéœ€æ±‚ä¸ç¨³å®š<br/>âŒå›¢é˜Ÿ Kotlin æ°´å¹³å‚å·®<br/>âŒDSL è®¾è®¡è€…ä¸åœ¨ä¸€çº¿ç»´æŠ¤</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI é©±åŠ¨å‰ç«¯å¼€å‘è¦†ç›–çš„èƒ½åŠ›å…¨æ™¯æ‹†è§£]]></title>    <link>https://juejin.cn/post/7588093282531196980</link>    <guid>https://juejin.cn/post/7588093282531196980</guid>    <pubDate>2025-12-28T07:33:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282531196980" data-draft-id="7588098335791005696" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI é©±åŠ¨å‰ç«¯å¼€å‘è¦†ç›–çš„èƒ½åŠ›å…¨æ™¯æ‹†è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T07:33:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆäº®æœ‰çŸ³å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/3526889032395613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI é©±åŠ¨å‰ç«¯å¼€å‘è¦†ç›–çš„èƒ½åŠ›å…¨æ™¯æ‹†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889032395613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆäº®æœ‰çŸ³å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T07:33:05.000Z" title="Sun Dec 28 2025 07:33:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>AI æ­£åœ¨æ”¹å˜å‰ç«¯å¼€å‘ï¼Œä½†ä¸æ˜¯â€œæ›¿ä½ å†™é¡µé¢â€é‚£ä¹ˆç®€å•ã€‚</strong></p>
</blockquote>
<p>åœ¨è¿‡å»ä¸€å¹´é‡Œï¼Œå…³äº AI ä¸å‰ç«¯çš„è®¨è®ºï¼Œå‡ ä¹éƒ½é›†ä¸­åœ¨ä¸€ä¸ªé—®é¢˜ä¸Šï¼š</p>
<blockquote>
<p><strong>AI èƒ½ä¸èƒ½ç›´æ¥æŠŠå‰ç«¯é¡µé¢å†™å‡ºæ¥ï¼Ÿ</strong></p>
</blockquote>
<p>å®é™…å·¥ç¨‹ä¸­çš„ç­”æ¡ˆå¾€å¾€æ˜¯ï¼š<br/>
<strong>èƒ½å†™ï¼Œä½†ä¸ä¸€å®šè¯¥å†™ï¼›èƒ½è·‘ï¼Œä½†ä¸ä¸€å®šèƒ½ç»´æŠ¤ã€‚</strong></p>
<p>æœ¬æ–‡å°è¯•è·³å‡ºâ€œæŸä¸ªå·¥å…·/æ¡†æ¶â€çš„è§†è§’ï¼Œä»<strong>å·¥ç¨‹å…¨æµç¨‹</strong>å‡ºå‘ï¼Œç³»ç»Ÿæ€§æ‹†è§£ï¼š</p>
<ul>
<li>AI åœ¨å‰ç«¯å¼€å‘ä¸­<strong>åˆ°åº•èƒ½åšå“ªäº›äº‹</strong></li>
<li>å“ªäº›èƒ½åŠ›é€‚åˆâ€œç›´æ¥ç”¨ AIâ€</li>
<li>å“ªäº›èƒ½åŠ›å¿…é¡»è¿›å…¥<strong>å·¥ç¨‹é“¾è·¯</strong></li>
<li>å¦‚ä½•åœ¨çœŸå®å›¢é˜Ÿä¸­ç»„åˆä½¿ç”¨ï¼Œé¿å…â€œAI å·¥ç¨‹åæ¨¡å¼â€</li>
</ul>
<h2 data-id="heading-0">ä¸€ã€å…ˆç»™ç»“è®ºï¼šAI ä¸è¯¥åªç›¯ç€â€œå†™é¡µé¢â€</h2>
<p>åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œå‰ç«¯å¼€å‘å¹¶ä¸åªæ˜¯â€œå†™ç»„ä»¶â€ï¼š</p>
<ul>
<li>æœ‰éœ€æ±‚æ‹†è§£</li>
<li>æœ‰è§„æ ¼è®¾è®¡</li>
<li>æœ‰å·¥ç¨‹çº¦æŸ</li>
<li>æœ‰æµ‹è¯•ä¸æ²»ç†</li>
<li>æœ‰é•¿æœŸç»´æŠ¤æˆæœ¬</li>
</ul>
<p><strong>AI çš„ä»·å€¼ï¼Œåˆ†å¸ƒåœ¨æ•´ä¸ªé“¾è·¯ä¸­ï¼Œè€Œä¸æ˜¯é›†ä¸­åœ¨â€œä»£ç ç”Ÿæˆâ€è¿™ä¸€ç‚¹ä¸Šã€‚</strong></p>
<p>å¦‚æœåªè®¨è®ºâ€œAI å†™é¡µé¢â€ï¼Œä¼šä¸¥é‡ä½ä¼°å®ƒçš„å·¥ç¨‹æ½œåŠ›ã€‚</p>
<h2 data-id="heading-1">äºŒã€å‰ç«¯å·¥ç¨‹å…¨æµç¨‹æ‹†è§£ï¼ˆAI èƒ½ä»‹å…¥çš„ 9 ä¸ªç¯èŠ‚ï¼‰</h2>
<p>ä»å·¥ç¨‹è§’åº¦ï¼Œä¸€ä¸ªå…¸å‹çš„å‰ç«¯ä¸­åå°å¼€å‘æµç¨‹å¯ä»¥æ‹†æˆ 9 ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>éœ€æ±‚ç†è§£ä¸æ‹†è§£</strong></li>
<li><strong>è§„æ ¼åŒ–ï¼ˆSpec / Schemaï¼‰</strong></li>
<li><strong>æ¨¡æ¿/è„šæ‰‹æ¶ç”Ÿæˆï¼ˆCodegenï¼‰</strong></li>
<li><strong>é¡µé¢ä¸ç»„ä»¶å®ç°</strong></li>
<li><strong>é‡æ„ä¸è¿ç§»</strong></li>
<li><strong>è°ƒè¯•ä¸ç¼ºé™·ä¿®å¤</strong></li>
<li><strong>æµ‹è¯•ä¸è´¨é‡ä¿éšœ</strong></li>
<li><strong>ä»£ç è¯„å®¡ä¸å·¥ç¨‹æ²»ç†</strong></li>
<li><strong>æ–‡æ¡£ä¸çŸ¥è¯†æ²‰æ·€</strong></li>
</ol>
<p>ä¸‹é¢é€ä¸€åˆ†æï¼š<strong>AI åœ¨æ¯ä¸€å±‚çš„çœŸå®ä»·å€¼ä¸é£é™©</strong>ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€éœ€æ±‚ç†è§£ä¸æ‹†è§£ï¼šAI çš„â€œç¬¬ä¸€ç”Ÿäº§åŠ›â€</h2>
<h3 data-id="heading-3">AI éå¸¸æ“…é•¿çš„äº‹</h3>
<ul>
<li>å°†è‡ªç„¶è¯­è¨€éœ€æ±‚æ‹†è§£ä¸ºé¡µé¢/åŠŸèƒ½ç‚¹æ¸…å•</li>
<li>åˆ—å‡ºå­—æ®µã€æ“ä½œã€æƒé™ã€å¼‚å¸¸åœºæ™¯</li>
<li>è¾…åŠ©è¡¥é½é—æ¼çš„è¾¹ç•Œæ¡ä»¶</li>
</ul>
<h3 data-id="heading-4">å·¥ç¨‹ä»·å€¼</h3>
<ul>
<li>å‡å°‘æ²Ÿé€šæˆæœ¬</li>
<li>é™ä½é—æ¼é£é™©</li>
<li>æé«˜éœ€æ±‚è¿›å…¥å®ç°é˜¶æ®µçš„è´¨é‡</li>
</ul>
<p>ğŸ‘‰ <strong>è¿™æ˜¯â€œä½é£é™©ã€é«˜æ”¶ç›Šâ€çš„ AI ä½¿ç”¨åœºæ™¯ï¼Œå‡ ä¹æ²¡æœ‰å‰¯ä½œç”¨ã€‚</strong></p>
<h2 data-id="heading-5">å››ã€è§„æ ¼åŒ–ï¼ˆSpec / Schemaï¼‰ï¼šAI æœ€ç†æƒ³çš„è¾“å‡ºå½¢æ€</h2>
<p>ç›¸æ¯”ç›´æ¥å†™ä»£ç ï¼ŒAI æ›´é€‚åˆè¾“å‡º<strong>ç»“æ„åŒ–è§„æ ¼</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é¡µé¢é…ç½®ï¼ˆå­—æ®µã€è¡¨å•ã€æ ¡éªŒï¼‰</li>
<li>æ¥å£å¥‘çº¦ï¼ˆOpenAPI / DTOï¼‰</li>
<li>è·¯ç”±ä¸æƒé™å£°æ˜</li>
<li>è¡¨æ ¼åˆ—ã€æœç´¢æ¡ä»¶ã€çŠ¶æ€æšä¸¾</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†ç®¡ç†"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"columns"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"name"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¾›åº”å•†åç§°"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"prop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"status"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"çŠ¶æ€"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-6">ä¸ºä»€ä¹ˆè¿™æ˜¯ AI çš„â€œç”œèœœç‚¹â€ï¼Ÿ</h3>
<ul>
<li>ç»“æ„åŒ–è¾“å‡ºç¨³å®š</li>
<li>å¯æ ¡éªŒã€å¯ diff</li>
<li>å¯è¿›å…¥å·¥ç¨‹é“¾è·¯</li>
<li>å¯åå¤å¤ç”¨</li>
</ul>
<p>ğŸ‘‰ <strong>Spec æ˜¯ AI ä¸å·¥ç¨‹ä¹‹é—´æœ€é‡è¦çš„â€œæ¥å£å±‚â€ã€‚</strong></p>
<h2 data-id="heading-7">äº”ã€æ¨¡æ¿ / è„šæ‰‹æ¶ç”Ÿæˆï¼šAI çš„æ”¾å¤§å™¨ï¼Œè€Œä¸æ˜¯ä¸»è§’</h2>
<p>åœ¨æœ‰ Spec çš„å‰æä¸‹ï¼Œå‰ç«¯å¯ä»¥é€šè¿‡ï¼š</p>
<ul>
<li>é¡µé¢æ¨¡æ¿</li>
<li>ä»£ç ç”Ÿæˆå™¨</li>
<li>AST å·¥å…·</li>
</ul>
<p><strong>ç¡®å®šæ€§åœ°ç”Ÿæˆä»£ç éª¨æ¶</strong>ã€‚</p>
<p>æ­¤æ—¶ AI çš„è§’è‰²æ˜¯ï¼š</p>
<ul>
<li>ç”Ÿæˆ Spec</li>
<li>è€Œä¸æ˜¯ç›´æ¥ç”Ÿæˆé¡µé¢æ–‡ä»¶</li>
</ul>
<h3 data-id="heading-8">å·¥ç¨‹æ”¶ç›Š</h3>
<ul>
<li>ä»£ç é£æ ¼ç»Ÿä¸€</li>
<li>å¯é‡å¤ç”Ÿæˆ</li>
<li>æ˜“äºå›æ»š</li>
<li>æ–°äººå‹å¥½</li>
</ul>
<p>ğŸ‘‰ <strong>æ¨¡æ¿ + ç”Ÿæˆå™¨è´Ÿè´£â€œç¨³å®šæ€§â€ï¼ŒAI è´Ÿè´£â€œå˜åŒ–â€ã€‚</strong></p>
<h2 data-id="heading-9">å…­ã€é¡µé¢ä¸ç»„ä»¶å®ç°ï¼šAI çš„é«˜é£é™©åŒº</h2>
<h3 data-id="heading-10">é€‚åˆ AI ç›´æ¥å‚ä¸çš„åœºæ™¯</h3>
<ul>
<li>Demo / åŸå‹</li>
<li>å†…éƒ¨å·¥å…·</li>
<li>æ¢ç´¢æ€§ UI</li>
<li>ä¸€æ¬¡æ€§é¡µé¢</li>
</ul>
<h3 data-id="heading-11">é«˜é£é™©åœºæ™¯</h3>
<ul>
<li>æƒé™é€»è¾‘</li>
<li>æ ¸å¿ƒä¸šåŠ¡æµç¨‹</li>
<li>å¤æ‚çŠ¶æ€ç®¡ç†</li>
<li>è·¨æ¨¡å—äº¤äº’</li>
</ul>
<p>åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œ<strong>è®© AI ç›´æ¥å†™ä»£ç ï¼Œå¾€å¾€æ˜¯ä¸€ä¸ªå·¥ç¨‹åæ¨¡å¼</strong>ï¼š</p>
<ul>
<li>ä¸ç¨³å®š</li>
<li>éš¾ review</li>
<li>éš¾ä»¥é•¿æœŸç»´æŠ¤</li>
</ul>
<p>ğŸ‘‰ <strong>è¿™é‡Œæ›´é€‚åˆâ€œå°èŒƒå›´ã€å—é™â€çš„ AI è¾…åŠ©ï¼Œè€Œä¸æ˜¯æ”¾æƒã€‚</strong></p>
<h2 data-id="heading-12">ä¸ƒã€é‡æ„ä¸è¿ç§»ï¼šAI çš„â€œè€å¿ƒå‹åŠ³åŠ¨åŠ›â€</h2>
<p>åœ¨è¿™äº›åœºæ™¯ä¸­ï¼ŒAI éå¸¸æœ‰ä»·å€¼ï¼š</p>
<ul>
<li>Vue2 â†’ Vue3</li>
<li>Router / çŠ¶æ€åº“å‡çº§</li>
<li>API è°ƒæ•´å¼•å‘çš„æ‰¹é‡ä¿®æ”¹</li>
</ul>
<h3 data-id="heading-13">æœ€ä½³å®è·µ</h3>
<ul>
<li>æŒ‰æ¨¡å—æ‹†åˆ†</li>
<li>å°æ­¥ PR</li>
<li>lint / test å…œåº•</li>
<li>AI è¾“å‡º patchï¼ˆdiffï¼‰ï¼Œè€Œä¸æ˜¯æ•´æ–‡ä»¶</li>
</ul>
<p>ğŸ‘‰ <strong>AI å¾ˆé€‚åˆåšâ€œé‡å¤ä½†ç»†è‡´â€çš„è¿ç§»å·¥ä½œã€‚</strong></p>
<h2 data-id="heading-14">å…«ã€è°ƒè¯•ä¸ä¿®å¤ï¼šæŠ¥é”™é©±åŠ¨çš„é«˜æ€§ä»·æ¯”åœºæ™¯</h2>
<p>è¿™æ˜¯ç›®å‰ AI åœ¨å·¥ç¨‹ä¸­<strong>æ€§ä»·æ¯”æœ€é«˜</strong>çš„ç”¨é€”ä¹‹ä¸€ï¼š</p>
<ul>
<li>lint æŠ¥é”™</li>
<li>ç¼–è¯‘å¤±è´¥</li>
<li>æµ‹è¯•å¤±è´¥</li>
</ul>
<p>å°†é”™è¯¯æ—¥å¿— + ç›¸å…³æ–‡ä»¶äº¤ç»™ AIï¼Œé™åˆ¶æ”¹åŠ¨èŒƒå›´ï¼š</p>
<ul>
<li>åªæ”¹æŒ‡å®šæ–‡ä»¶</li>
<li>åªåšæœ€å° diff</li>
</ul>
<p>ğŸ‘‰ <strong>è¿™æ˜¯â€œå¯æ§ã€å¯å›æ»šã€ç«‹ç«¿è§å½±â€çš„ AI ç”¨æ³•ã€‚</strong></p>
<h2 data-id="heading-15">ä¹ã€æµ‹è¯•ã€è¯„å®¡ä¸å·¥ç¨‹æ²»ç†ï¼šAI çš„éšè—ä»·å€¼</h2>
<h3 data-id="heading-16">æµ‹è¯•</h3>
<ul>
<li>ç”Ÿæˆå•æµ‹ç”¨ä¾‹</li>
<li>è¡¥é½è¾¹ç•Œæµ‹è¯•</li>
<li>ç”Ÿæˆ mock æ•°æ®</li>
</ul>
<h3 data-id="heading-17">Review / æ²»ç†</h3>
<ul>
<li>æ€»ç»“ PR é£é™©ç‚¹</li>
<li>æ£€æŸ¥é£æ ¼ä¸€è‡´æ€§</li>
<li>æç¤ºæ½œåœ¨æŠ€æœ¯å€º</li>
</ul>
<p>ğŸ‘‰ <strong>AI åœ¨â€œè¾…åŠ©åˆ¤æ–­â€å±‚é¢çš„ä»·å€¼ï¼Œè¿œå¤§äºâ€œæ›¿ä½ å†™ä»£ç â€ã€‚</strong></p>
<h2 data-id="heading-18">åã€ä¸¤ç§ AI ä½¿ç”¨èŒƒå¼çš„å¯¹æ¯”</h2>
<h3 data-id="heading-19">Vibe Codingï¼ˆå³å…´ç¼–ç ï¼‰</h3>
<ul>
<li>AI ç›´æ¥å†™/æ”¹ä»£ç </li>
<li>å¿«ã€çˆ½ã€æ¢ç´¢æ€§å¼º</li>
<li>éš¾å®¡è®¡ã€éš¾è§„æ¨¡åŒ–</li>
</ul>
<h3 data-id="heading-20">Spec-Driven Codingï¼ˆè§„æ ¼é©±åŠ¨ï¼‰</h3>
<ul>
<li>AI äº§ Spec / Patch</li>
<li>æ¨¡æ¿/ç”Ÿæˆå™¨äº§ä»£ç </li>
<li>lint / test / CI å…œåº•</li>
<li>ç¨³å®šã€å¯æ§ã€å›¢é˜Ÿå‹å¥½</li>
</ul>
<blockquote>
<p><strong>çœŸå®å·¥ç¨‹ä¸­ï¼Œæ¢ç´¢ç”¨ vibeï¼Œäº¤ä»˜ç”¨ spec-drivenã€‚</strong></p>
</blockquote>
<h2 data-id="heading-21">åä¸€ã€ä»å·¥ç¨‹è§†è§’çš„èƒ½åŠ›ä¼˜å…ˆçº§å»ºè®®</h2>
<h3 data-id="heading-22">ä¼˜å…ˆè½åœ°ï¼ˆä½é£é™©ï¼‰</h3>
<ol>
<li>éœ€æ±‚æ‹†è§£</li>
<li>Spec ç”Ÿæˆ</li>
<li>æ–‡æ¡£/è¯´æ˜</li>
<li>lint/test ä¿®å¤</li>
</ol>
<h3 data-id="heading-23">éœ€è¦æ²»ç†åè½åœ°</h3>
<ol>
<li>é¡µé¢ç”Ÿæˆ</li>
<li>è¿ç§»é‡æ„</li>
<li>æµ‹è¯•ä½“ç³»è¡¥é½</li>
</ol>
<h3 data-id="heading-24">è°¨æ…ä½¿ç”¨</h3>
<ol>
<li>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</li>
<li>æ¶æ„çº§é‡æ„</li>
</ol>
<h2 data-id="heading-25">åäºŒã€æ€»ç»“ï¼šAI åœ¨å‰ç«¯çš„â€œæ­£ç¡®ä½ç½®â€</h2>
<p>AI å¹¶ä¸æ˜¯æ¥â€œæ›¿ä»£å‰ç«¯å·¥ç¨‹å¸ˆå†™é¡µé¢â€çš„ã€‚<br/>
å®ƒçœŸæ­£æ“…é•¿çš„æ˜¯ï¼š</p>
<blockquote>
<p><strong>æŠŠå˜åŒ–ç»“æ„åŒ–ï¼ŒæŠŠé‡å¤è‡ªåŠ¨åŒ–ï¼ŒæŠŠè´¨é‡äº¤ç»™å·¥ç¨‹é“¾è·¯ã€‚</strong></p>
</blockquote>
<p>å¦‚æœåªèƒ½è®°ä½ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>AI çš„èƒ½åŠ›ä¸è¯¥ç»•å¼€å·¥ç¨‹ï¼Œè€Œåº”è¯¥è¢«å·¥ç¨‹çº¦æŸã€‚</strong></p>
</blockquote>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¯å‘ï¼Œæ¬¢è¿ç‚¹èµæˆ–æ”¶è— ğŸ‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[44 ä¸ªæ¸¸æˆäººç”Ÿçš„æ®‹é…·çœŸç›¸ - çº³ç“¦å°” ä¸­è‹±ä¿®è®¢]]></title>    <link>https://juejin.cn/post/7588093282531229748</link>    <guid>https://juejin.cn/post/7588093282531229748</guid>    <pubDate>2025-12-28T07:41:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588093282531229748" data-draft-id="7588093282531213364" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="44 ä¸ªæ¸¸æˆäººç”Ÿçš„æ®‹é…·çœŸç›¸ - çº³ç“¦å°” ä¸­è‹±ä¿®è®¢"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-28T07:41:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å…µå¼ å¥"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032405229"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            44 ä¸ªæ¸¸æˆäººç”Ÿçš„æ®‹é…·çœŸç›¸ - çº³ç“¦å°” ä¸­è‹±ä¿®è®¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032405229/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å…µå¼ å¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T07:41:22.000Z" title="Sun Dec 28 2025 07:41:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯çº³ç“¦å°”æœ€æ–°çš„è®¿è°ˆåšå®¢çš„æ–‡ç¨¿ï¼Œæ˜¯ä¸€ç¯‡éå¸¸æ™ºæ…§çš„æ–‡ç« ï¼Œæ˜¯äººç”Ÿé€šå‘å¹¸ç¦å’ŒæˆåŠŸçš„æ”»ç•¥ã€‚å®ƒæœ¬èº«éå¸¸å®Œæ•´ï¼ŒåŸå§‹çš„é‡‡è®¿å°±æœ‰ 3 ä¸ªå¤šå°æ—¶ï¼Œæ¶µç›–äº†äººç”Ÿçš„æ–¹æ–¹é¢é¢ã€‚ä½†å®ƒåŸæ–‡æ˜¯è‹±æ–‡çš„ï¼Œå¾ˆå¤šè§†é¢‘å­—å¹•æ˜¯æœºç¿»ï¼Œä¼ è¾¾äº†é”™è¯¯çš„ä¿¡æ¯ã€‚</p>
<p>æ‰€ä»¥æˆ‘å¯¹æ•´ç¯‡é‡‡è®¿çš„æ–‡ç¨¿åšäº†ä¿®æ­£å’Œç²¾ç¿»ï¼Œå¹¶å‡†å¤‡åšä¸€å¥—æ›´æ·±å…¥ã€æ›´ç¬¦åˆä¸­æ–‡è¯­å¢ƒçš„è®²è§£ï¼Œè¯¦ç»†è¯´æ˜çº³ç“¦å°”çš„ç†å¿µï¼Œå¸Œæœ›å¯ä»¥å¸®åˆ°ä½ ï¼Œè®²è§£åœ¨é£ä¹¦çš„è¯„è®ºé‡Œé¢ã€‚</p>
<p>æ–‡ç« å¤ªé•¿ï¼Œè¯·è·³è½¬ <a href="https://link.juejin.cn?target=https%3A%2F%2Fai.feishu.cn%2Fwiki%2FXqfXwL9xaiOeDAkiBeUcjqFfnwh%3Ffrom%3Dfrom_copylink" target="_blank" title="https://ai.feishu.cn/wiki/XqfXwL9xaiOeDAkiBeUcjqFfnwh?from=from_copylink" ref="nofollow noopener noreferrer">44 Harsh Truths About The Game Of Life - Naval Ravikant 44 ä¸ªæ¸¸æˆäººç”Ÿçš„æ®‹é…·çœŸç›¸ - çº³ç“¦å°” ä¸­è‹±ä¿®è®¢&amp;ç²¾ç¿»</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutteré™åˆ¶è¾“å…¥æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ï¼ŒiOSæ‹¼éŸ³æ‰“ä¸å‡ºæ¥ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588084804094459942</link>    <guid>https://juejin.cn/post/7588084804094459942</guid>    <pubDate>2025-12-28T06:33:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588084804094459942" data-draft-id="7588084804094443558" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Flutteré™åˆ¶è¾“å…¥æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ï¼ŒiOSæ‹¼éŸ³æ‰“ä¸å‡ºæ¥ï¼Ÿ"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-12-28T06:33:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·¡å†™æˆç°"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360181390"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Flutteré™åˆ¶è¾“å…¥æ¡†åªèƒ½è¾“å…¥ä¸­æ–‡ï¼ŒiOSæ‹¼éŸ³æ‰“ä¸å‡ºæ¥ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360181390/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·¡å†™æˆç°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T06:33:33.000Z" title="Sun Dec 28 2025 06:33:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸­æ–‡è¾“å…¥å¿…è¸©çš„ Flutter å‘åˆé›†ï¼šiOS æ‹¼éŸ³æ‰“ä¸å‡ºæ¥ï¼Œå…¶å®æ˜¯ä½  Formatter å†™é”™äº†</h2>
<blockquote>
<p>å¦‚æœä½ åœ¨ Flutter é‡Œåšè¿‡ã€Œåªå…è®¸ä¸­æ–‡ / ä¸­è‹±æ–‡æ ¡éªŒã€ï¼Œå¹¶ä¸”<strong>åªåœ¨ iOS ä¸Šç¿»è¿‡è½¦</strong>ï¼Œé‚£è¿™ç¯‡æ–‡ç« å¤§æ¦‚ç‡èƒ½å¸®ä½ èŠ‚çœåŠå¤© Debug æ—¶é—´ã€‚</p>
</blockquote>
<p>è¿™ä¸æ˜¯ iOS çš„é”…ï¼Œä¹Ÿä¸æ˜¯ Flutter çš„ Bugï¼Œè€Œæ˜¯ <strong>TextInputFormatter å’Œä¸­æ–‡è¾“å…¥æ³•ï¼ˆIMEï¼‰ä¹‹é—´çš„ç†è§£åå·®</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€è¡€iOS ä¸Šæ‹¼éŸ³æ€ä¹ˆéƒ½æ‰“ä¸å‡ºæ¥</h3>
<p>å¸¸è§åé¦ˆåŒ…æ‹¬ï¼š</p>
<ul>
<li>iOS ä¸­æ–‡æ‹¼éŸ³é”®ç›˜</li>
<li>è¾“å…¥ <code>bei jing</code></li>
<li>é”®ç›˜æœ‰æ‹¼éŸ³æ˜¾ç¤º</li>
<li>è¾“å…¥æ¡†å†…å®¹å®Œå…¨ä¸å˜</li>
<li>æ— æ³•é€‰è¯ã€æ— æ³•ä¸Šå±</li>
</ul>
<p>ğŸ‘‰ Android æ­£å¸¸<br/>
ğŸ‘‰ æ¨¡æ‹Ÿå™¨æ­£å¸¸<br/>
ğŸ‘‰ çœŸæœº iOS ä¸è¡Œ</p>
<p>å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯ï¼š<br/>
<strong>â€œFlutter å¯¹ä¸­æ–‡æ”¯æŒä¸å¥½ï¼Ÿâ€</strong></p>
<p>ç»“è®ºå…ˆè¡Œï¼š<strong>ä¸æ˜¯ã€‚</strong></p>
<hr/>
<h3 data-id="heading-2">äºŒã€ç½ªé­ç¥¸é¦–ï¼šTextInputFormatter çš„ã€Œä¸­æ–‡æ ¡éªŒã€</h3>
<p>ä¸‹é¢è¿™ç§ Formatterï¼Œä½ ä¸€å®šå†™è¿‡æˆ–è§è¿‡ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NameInputFormatter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">TextInputFormatter</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">TextEditingValue</span> formatEditUpdate(
    <span class="hljs-type">TextEditingValue</span> oldValue,
    <span class="hljs-type">TextEditingValue</span> newValue,
  ) {
    <span class="hljs-keyword">final</span> chineseOnly = <span class="hljs-type">RegExp</span>(r'^[\u4E00-\u9FFF]+$');

    <span class="hljs-keyword">if</span> (newValue.text.isEmpty) <span class="hljs-keyword">return</span> newValue;

    <span class="hljs-keyword">if</span> (!chineseOnly.hasMatch(newValue.text)) {
      <span class="hljs-keyword">return</span> oldValue; <span class="hljs-comment">// </span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-type">TextEditingValue</span>(
      text: newValue.text,
      selection: <span class="hljs-type">TextSelection</span>.collapsed(
        offset: newValue.text.length,
      ),
    );
  }
}
</code></pre>
<p>é€»è¾‘çœ‹èµ·æ¥éå¸¸åˆç†ï¼š</p>
<ul>
<li>åªå…è®¸ä¸­æ–‡</li>
<li>éæ³•å­—ç¬¦ç›´æ¥å›é€€</li>
</ul>
<p>ä½†åœ¨ iOS ä¸Šï¼Œè¿™æ®µä»£ç <strong>ç­‰äºå°æ­»äº†ä¸­æ–‡è¾“å…¥æ³•çš„å…¥å£</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€æ ¸å¿ƒåŸç†ï¼šiOS ä¸­æ–‡è¾“å…¥æ³•æœ‰ã€Œç»„å­—é˜¶æ®µã€</h3>
<h4 data-id="heading-4">1ï¸ composing æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>iOS æ‹¼éŸ³è¾“å…¥æ³•çš„è¾“å…¥è¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>
<p><strong>ç»„å­—ï¼ˆcomposingï¼‰</strong></p>
<ul>
<li>è¾“å…¥ï¼š<code>bei</code></li>
<li>è¾“å…¥æ¡†é‡Œæ˜¯æ‹¼éŸ³ï¼ˆæœªç¡®è®¤ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æäº¤</strong></p>
<ul>
<li>é€‰æ‹©ã€ŒåŒ—ã€</li>
<li>ä¸­æ–‡å­—ç¬¦çœŸæ­£ä¸Šå±</li>
</ul>
</li>
</ol>
<p>åœ¨ç»„å­—é˜¶æ®µï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">newValue.text</span> == <span class="hljs-string">"bei"</span>
<span class="hljs-attr">newValue.composing.isCollapsed</span> == <span class="hljs-literal">false</span>
</code></pre>
<p>è€Œ <code>"bei"</code> <strong>å¿…ç„¶æ— æ³•é€šè¿‡ã€Œåªå…è®¸ä¸­æ–‡ã€çš„æ­£åˆ™æ ¡éªŒ</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-5">2ï¸ Formatter æå‰â€œå¦å†³â€äº†è¾“å…¥</h4>
<p>å½“ Formatter åœ¨ composing é˜¶æ®µåšäº†ä»¥ä¸‹ä»»æ„ä¸€ä»¶äº‹ï¼š</p>
<ul>
<li><code>return oldValue</code></li>
<li>ä¿®æ”¹ <code>text</code></li>
<li>å¼ºåˆ¶é‡ç½® <code>selection</code></li>
</ul>
<p>iOS è¾“å…¥æ³•å°±ä¼šè®¤ä¸ºï¼š<br/>
<strong>ã€Œå½“å‰è¾“å…¥ä¸åˆæ³•ï¼Œç»ˆæ­¢ç»„å­—ã€</strong></p>
<p>äºæ˜¯å‡ºç°ç»å…¸ç°è±¡ï¼š</p>
<blockquote>
<p>æ‹¼éŸ³èƒ½æ‰“ï¼Œä½†æ°¸è¿œæ— æ³•é€‰å­—</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">å››ã€éšè—æ›´æ·±çš„å‘ï¼šselection ä¼šæ€æ­»è¾“å…¥æ³•</h3>
<p>å¾ˆå¤š Formatter é‡Œéƒ½æœ‰è¿™è¡Œï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">selection:</span> TextSelection.collapsed(offset: <span class="hljs-keyword">text</span>.length),
</code></pre>
<p>åœ¨æ™®é€šè¾“å…¥ä¸‹æ²¡é—®é¢˜ï¼Œä½†åœ¨ä¸­æ–‡è¾“å…¥ä¸­ï¼š</p>
<ul>
<li>selection æ˜¯ IME çŠ¶æ€çš„ä¸€éƒ¨åˆ†</li>
<li>æ¯æ¬¡é‡ç½® selection = é‡å¯ç»„å­—æµç¨‹</li>
</ul>
<p>å“ªæ€•ä½ æ”¾è¡Œäº†æ‹¼éŸ³ï¼Œä¹Ÿå¯èƒ½å‡ºç°ï¼š</p>
<ul>
<li>å€™é€‰è¯å¼‚å¸¸</li>
<li>æ¸¸æ ‡è·³åŠ¨</li>
<li>è¾“å…¥ä½“éªŒæå·®</li>
</ul>
<hr/>
<h3 data-id="heading-7">äº”ã€é‚£ä¸ºä»€ä¹ˆ Android æ²¡è¿™ä¸ªé—®é¢˜ï¼Ÿ</h3>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>éå¸¸å…³é”®ã€ä¹Ÿæœ€å®¹æ˜“è¯¯åˆ¤çš„ç‚¹</strong>ã€‚</p>
<h4 data-id="heading-8">Android çš„è¡Œä¸ºå·®å¼‚</h4>
<ul>
<li>Android è¾“å…¥æ³•å¯¹ composing çš„æš´éœ²ä¸ä¸€è‡´</li>
<li>å¾ˆå¤šé”®ç›˜åœ¨ <strong>å­—ç¬¦æäº¤åæ‰è§¦å‘ Formatter</strong></li>
<li>å³ä½¿ composing å­˜åœ¨ï¼Œä¹Ÿæ›´â€œå®½å®¹â€</li>
</ul>
<p>ç»“æœå°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>é”™è¯¯çš„ Formatter åœ¨ Android ä¸Šâ€œçœ‹èµ·æ¥èƒ½ç”¨â€</strong></p>
</blockquote>
<p>ä½†è¿™å¹¶ä¸ä»£è¡¨ä»£ç æ˜¯å¯¹çš„ï¼Œåªæ˜¯ <strong>Android æ²¡é‚£ä¹ˆä¸¥æ ¼</strong>ã€‚</p>
<h4 data-id="heading-9">çœŸç›¸</h4>
<blockquote>
<p><strong>Android æ˜¯ä¾¥å¹¸æ²¡ç‚¸ï¼ŒiOS æ˜¯ä¸¥æ ¼æŠŠé—®é¢˜æš´éœ²å‡ºæ¥ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-10">å…­ã€æ­£ç¡®åŸåˆ™</h3>
<h4 data-id="heading-11">1. composing é˜¶æ®µå¿…é¡»æ”¾è¡Œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> (!newValue.composing.isCollapsed) {
  <span class="hljs-keyword">return</span> newValue;
}
</code></pre>
<h4 data-id="heading-12">2. æ ¡éªŒåªåœ¨ composing ç»“æŸååš</h4>
<h4 data-id="heading-13">3. ä¸è¦æ— è„‘é‡ç½® selection</h4>
<h4 data-id="heading-14">4. Formatter â‰  è¡¨å•æœ€ç»ˆæ ¡éªŒ</h4>
<hr/>
<h3 data-id="heading-15">ä¸ƒã€æ­£ç¡®ç¤ºä¾‹</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®‰å…¨ã€å¯æ‰©å±•ã€iOS / Android åŒç«¯ç¨³å®šçš„ Formatter ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UniversityNameInputFormatter</span> extends TextInputFormatter {
  UniversityNameInputFormatter({this.maxLength = <span class="hljs-number">40</span>});

  final <span class="hljs-built_in">int</span> maxLength;

  static final RegExp _disallowed =
      RegExp(<span class="hljs-string">r'[^a-zA-Z0-9\u4E00-\u9FFF-\s]'</span>);
  static final RegExp _multiHyphen = RegExp(<span class="hljs-string">r'-{2,}'</span>);
  static final RegExp _leadingHyphen = RegExp(<span class="hljs-string">r'^-+'</span>);
  static final RegExp _trailingHyphen = RegExp(<span class="hljs-string">r'-+$'</span>);

<span class="hljs-meta">  @override</span>
  TextEditingValue formatEditUpdate(
    TextEditingValue oldValue,
    TextEditingValue newValue,
  ) {
    // iOS ä¸­æ–‡æ‹¼éŸ³ç»„å­—é˜¶æ®µ
    <span class="hljs-keyword">if</span> (!newValue.composing.isCollapsed) {
      <span class="hljs-keyword">return</span> newValue;
    }

    var text = newValue.text;
    <span class="hljs-keyword">if</span> (text.isEmpty) <span class="hljs-keyword">return</span> newValue;

    text = text.replaceAll(_disallowed, <span class="hljs-string">''</span>);
    text = text.replaceAll(_multiHyphen, <span class="hljs-string">'-'</span>);
    text = text.replaceAll(_leadingHyphen, <span class="hljs-string">''</span>);
    text = text.replaceAll(_trailingHyphen, <span class="hljs-string">''</span>);

    <span class="hljs-keyword">if</span> (text.length &gt; maxLength) {
      text = text.substring(<span class="hljs-number">0</span>, maxLength);
    }

    <span class="hljs-keyword">if</span> (text == newValue.text) <span class="hljs-keyword">return</span> newValue;

    <span class="hljs-built_in">int</span> clamp(<span class="hljs-built_in">int</span> o) =&gt; o.clamp(<span class="hljs-number">0</span>, text.length);

    <span class="hljs-keyword">return</span> TextEditingValue(
      text: text,
      selection: TextSelection(
        baseOffset: clamp(newValue.selection.baseOffset),
        extentOffset: clamp(newValue.selection.extentOffset),
      ),
      composing: TextRange.empty,
    );
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-16">å…«ã€ä¸­æ–‡è¾“å…¥å¿…è¸©çš„ Flutter å‘åˆé›†ï¼ˆChecklistï¼‰</h3>
<h4 data-id="heading-17">âŒ å‘ 1ï¼šFormatter é‡Œç›´æ¥åšä¸­æ–‡æ­£åˆ™æ ¡éªŒ</h4>
<p><strong>åæœ</strong>ï¼šiOS æ‹¼éŸ³æ— æ³•è¾“å…¥</p>
<h4 data-id="heading-18">âŒ å‘ 2ï¼šå¿½ç•¥ <code>newValue.composing</code></h4>
<p><strong>åæœ</strong>ï¼šIME ç»„å­—è¢«æ‰“æ–­</p>
<h4 data-id="heading-19">âŒ å‘ 3ï¼šæ¯æ¬¡éƒ½æŠŠ selection ç§»åˆ°æœ«å°¾</h4>
<p><strong>åæœ</strong>ï¼šå€™é€‰è¯å¼‚å¸¸ã€æ¸¸æ ‡ä¹±è·³</p>
<h4 data-id="heading-20">âŒ å‘ 4ï¼šä»¥ä¸º Android æ­£å¸¸ = ä»£ç æ­£ç¡®</h4>
<p><strong>åæœ</strong>ï¼šiOS çœŸæœºç¿»è½¦</p>
<hr/>
<h3 data-id="heading-21">ä¹ã€ä¸€å¥è¯æ€»ç»“</h3>
<blockquote>
<p><strong>TextInputFormatter æ˜¯ IME è¾“å…¥æµç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œä¸æ˜¯ç®€å•çš„å­—ç¬¦ä¸²è¿‡æ»¤å™¨ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘]]></title>    <link>https://juejin.cn/post/7588010346071179274</link>    <guid>https://juejin.cn/post/7588010346071179274</guid>    <pubDate>2025-12-27T03:53:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588010346071179274" data-draft-id="7588010346071162890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2025-12-27T03:53:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="9å·è¾¾äºº"/> <meta itemprop="url" content="https://juejin.cn/user/2450136052270077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¯ä»˜é…ç½®æ—¶å¥½æ—¶åï¼Ÿå¼‚æ­¥æ–¹æ³•é‡Œçš„å¯¹è±¡å¼•ç”¨å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2450136052270077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    9å·è¾¾äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:53:57.000Z" title="Sat Dec 27 2025 03:53:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    23
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šå‘¨æ¥åˆ°å®¢æœåé¦ˆã€‚</p>
<p>æœ‰äº›å•†æˆ·å¼€é€šä¹‹åï¼Œå¾®ä¿¡æ”¯ä»˜åŠŸèƒ½ä¸èƒ½ç”¨ï¼Œæœ‰äº›åˆå¯ä»¥ã€‚ä¸èƒ½ç”¨çš„å•†æˆ·å°±éœ€è¦å®¢æœæ‰‹åŠ¨ä»‹å…¥ï¼Œé‡æ–°é…ç½®æ”¯ä»˜å‚æ•°æ‰æ¢å¤æ­£å¸¸ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜å°±å¾ˆè¯¡å¼‚ï¼Œ<strong>æ—¶å¥½æ—¶å</strong>ã€‚æœ‰æ—¶å€™æ­£å¸¸ï¼Œæœ‰æ—¶å€™å°±ä¸è¡Œã€‚</p>
<p>ä½†æ˜¯åå°æ—¥å¿—æ˜¾ç¤ºéƒ½æ˜¯é…ç½®æˆåŠŸã€‚ä»£ç æ‰§è¡Œå®Œäº†ï¼Œæ²¡æœ‰ä»»ä½•æŠ¥é”™ã€‚</p>
<h2 data-id="heading-0">è¯¡å¼‚çš„ç°è±¡</h2>
<p>å¼€å§‹æ’æŸ¥æ—¥å¿—ã€‚å‘ç°äº†å‡ ä¸ªå¾ˆå¥‡æ€ªçš„ç‚¹ï¼š</p>
<ol>
<li><strong>ä¸šåŠ¡æ—¥å¿—æ˜¾ç¤ºæˆåŠŸ</strong>ï¼Œæ²¡æœ‰ä»»ä½•å¼‚å¸¸</li>
<li><strong>è°ƒç”¨æ—¥å¿—æ˜¾ç¤ºä¸¤æ¬¡é…ç½®ç”¨çš„appidä¸€æ ·</strong></li>
<li><strong>ä»£ç æ˜æ˜å†™çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„appid</strong></li>
<li><strong>é…ç½®æ–‡ä»¶ä¹Ÿæ²¡é—®é¢˜</strong>ï¼Œä¸¤ä¸ªappidéƒ½é…å¯¹äº†</li>
</ol>
<p>ä»£ç å†™çš„æ˜æ˜æ˜¯Aå’ŒBä¸¤ä¸ªappidï¼Œä¸ºå•¥æ—¥å¿—é‡Œéƒ½å˜æˆBäº†ï¼Ÿ</p>
<p>çœ‹äº†å¥½å‡ éæ—¥å¿—ï¼Œç¡®å®šæ²¡çœ‹é”™ã€‚ä¸¤æ¬¡è°ƒç”¨ä¼ å…¥çš„appidç¡®å®ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<p>é‚£å°±åªèƒ½çœ‹çœ‹ä»£ç äº†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
openMemberV2DTO.setSupAppId(sysConfig.getWxHuikeOfficialAccountAppid())<span class="hljs-comment">;</span>
openMemberV2DTO.setAccountType("00")<span class="hljs-comment">;</span>
openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
LogUtil.info(log,Â "editGrantÂ &gt;&gt;Â å¼€é€šæˆåŠŸÂ &gt;&gt;Â <span class="hljs-attr">param</span>Â =Â {}<span class="hljs-string">",Â param);
</span></code></pre>
<p>ä¹ä¸€çœ‹ï¼Œå®Œå…¨æ²¡é—®é¢˜ã€‚</p>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ç”¨çš„æ˜¯<code>openMemberV2DTO</code>åŸå§‹çš„appidã€‚ç¬¬äºŒæ¬¡è°ƒç”¨ä¹‹å‰ï¼Œæ˜æ˜ä¿®æ”¹äº†<code>supAppId</code>å’Œ<code>accountType</code>ã€‚</p>
<p>ä»£ç é€»è¾‘ä¹Ÿå¾ˆæ¸…æ™°ï¼Œä¸ºå•¥ä¼šå‡ºé—®é¢˜ï¼Ÿ</p>
<p>ä¼šä¸ä¼šæ˜¯é…ç½®æ–‡ä»¶æŠŠappidé…é”™äº†ï¼Ÿ</p>
<p>æ£€æŸ¥äº†é…ç½®æ–‡ä»¶ï¼š</p>
<p>é…ç½®ä¹Ÿæ²¡é—®é¢˜ã€‚ä¸¤ä¸ªappidéƒ½å¯¹ã€‚</p>
<p>æ—¢ç„¶ä»£ç é€»è¾‘æ²¡é—®é¢˜ï¼Œé…ç½®ä¹Ÿæ²¡é—®é¢˜ï¼Œé‚£é—®é¢˜å¤§æ¦‚ç‡å°±æ˜¯wxConfigè¿™ä¸ªæ–¹æ³•äº†</p>
<p>ç‚¹å¼€<code>wxConfig</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">wxConfig</span>(<span class="hljs-params">OpenMemberV2DTOÂ dto</span>)Â {
Â Â Â Â asyncTaskExecutor.<span class="hljs-title function_">execute</span>(()Â -&gt;Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è·å–å‚æ•°</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â subAppIdÂ =Â dto.<span class="hljs-title function_">getSupAppId</span>();
Â Â Â Â Â Â Â Â <span class="hljs-title class_">String</span>Â accountTypeÂ =Â dto.<span class="hljs-title function_">getAccountType</span>();

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨å¾®ä¿¡APIé…ç½®</span>
Â Â Â Â Â Â Â Â <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>Â bodyÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span>();
Â Â Â Â Â Â Â Â body.<span class="hljs-title function_">put</span>(<span class="hljs-string">"sub_appid"</span>,Â subAppId);
Â Â Â Â Â Â Â Â body.<span class="hljs-title function_">put</span>(<span class="hljs-string">"account_type"</span>,Â accountType);

Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è°ƒç”¨å¹³å°æ¥å£...</span>
Â Â Â Â Â Â Â Â platformManager.<span class="hljs-title function_">call</span>(callParam);
Â Â Â Â });
}
</code></pre>
<p>çœ‹åˆ°<code>asyncTaskExecutor.execute</code>ï¼Œç›¸ä¿¡å¤§å®¶å°±æ˜ç™½äº†ã€‚</p>
<p><strong>è¿™æ˜¯ä¸ªå¼‚æ­¥æ–¹æ³•ï¼</strong></p>
<p>é‚£é—®é¢˜é“¾è·¯å°±æ¸…æ¥šäº†ï¼š</p>
<ol>
<li>ä¸»çº¿ç¨‹è°ƒç”¨<code>wxConfig(openMemberV2DTO)</code> â†’ ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± ï¼Œ<strong>è¿˜æ²¡æ‰§è¡Œ</strong></li>
<li>ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œä¿®æ”¹<code>openMemberV2DTO.setSupAppId(...)</code></li>
<li>ä¸»çº¿ç¨‹å†æ¬¡è°ƒç”¨<code>wxConfig(openMemberV2DTO)</code> â†’ åˆæäº¤ä¸€ä¸ªä»»åŠ¡åˆ°çº¿ç¨‹æ± </li>
<li>çº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡ â†’ è¯»å–<code>dto.getSupAppId()</code>ï¼Œå‘ç°å·²ç»æ˜¯ä¿®æ”¹åçš„å€¼äº†</li>
<li>çº¿ç¨‹æ± æ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡ â†’ è¿˜æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œappidå½“ç„¶ä¸€æ ·</li>
</ol>
<p><strong>ä¸¤æ¬¡ä¼ çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œç¬¬äºŒæ¬¡ä¿®æ”¹æ±¡æŸ“äº†ç¬¬ä¸€æ¬¡çš„æ•°æ®ã€‚</strong></p>
<h2 data-id="heading-1">é—®é¢˜æœ¬è´¨</h2>
<p>è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯ï¼š<strong>å¯¹è±¡å¼•ç”¨ + å¼‚æ­¥æ–¹æ³• â‰ˆ æ•°æ®æ±¡æŸ“</strong></p>
<h3 data-id="heading-2">Javaå¯¹è±¡å¼•ç”¨æœºåˆ¶</h3>
<p>Javaæ–¹æ³•ä¼ å‚ï¼Œä¼ çš„æ˜¯å¼•ç”¨ï¼Œä¸æ˜¯å‰¯æœ¬ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â è¿™ä¸¤æ¬¡è°ƒç”¨ï¼Œä¼ çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨</span>
<span class="hljs-built_in">wxConfig</span>(openMemberV2DTO);Â Â <span class="hljs-comment">//Â ä¼ çš„æ˜¯å¼•ç”¨</span>
openMemberV2DTO<span class="hljs-selector-class">.setSupAppId</span>("new_appid");Â Â <span class="hljs-comment">//Â ä¿®æ”¹å¯¹è±¡</span>
<span class="hljs-built_in">wxConfig</span>(openMemberV2DTO);Â Â <span class="hljs-comment">//Â è¿˜æ˜¯åŒä¸€ä¸ªå¼•ç”¨</span>
</code></pre>
<p>å¦‚æœ<code>wxConfig</code>æ˜¯åŒæ­¥æ–¹æ³•ï¼Œæ²¡é—®é¢˜ã€‚å› ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šç«‹å³æ‰§è¡Œå®Œï¼Œç”¨çš„æ˜¯ä¿®æ”¹å‰çš„å€¼ã€‚</p>
<p>ä½†<code>wxConfig</code>æ˜¯å¼‚æ­¥æ–¹æ³•ã€‚</p>
<h3 data-id="heading-3">å¼‚æ­¥æ–¹æ³•çš„æ‰§è¡Œæ—¶æœº</h3>
<p>å¼‚æ­¥æ–¹æ³•ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯æäº¤åˆ°çº¿ç¨‹æ± ï¼Œç­‰çº¿ç¨‹æ± æœ‰ç©ºé—²çº¿ç¨‹æ—¶æ‰æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â ä¸»çº¿ç¨‹æ—¶é—´çº¿</span>
t1:Â <span class="hljs-built_in">wxConfig</span>(dto)Â Â â†’Â æäº¤ä»»åŠ¡Aåˆ°çº¿ç¨‹æ± 
t2:Â dto.<span class="hljs-built_in">setSupAppId</span>(<span class="hljs-string">"new"</span>)Â Â â†’Â ä¿®æ”¹å¯¹è±¡
t3:Â <span class="hljs-built_in">wxConfig</span>(dto)Â Â â†’Â æäº¤ä»»åŠ¡Båˆ°çº¿ç¨‹æ± 
t4:Â ä¸»çº¿ç¨‹ç»“æŸ

//Â çº¿ç¨‹æ± æ—¶é—´çº¿
t5:Â æ‰§è¡Œä»»åŠ¡AÂ â†’Â è¯»å–dto.<span class="hljs-built_in">getSupAppId</span>()Â Â //Â å·²ç»æ˜¯<span class="hljs-string">"new"</span>äº†ï¼
t6:Â æ‰§è¡Œä»»åŠ¡BÂ â†’Â è¯»å–dto.<span class="hljs-built_in">getSupAppId</span>()Â Â //Â è¿˜æ˜¯<span class="hljs-string">"new"</span>
</code></pre>
<h3 data-id="heading-4">å®Œæ•´çš„é—®é¢˜é“¾è·¯</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Main as ä¸»çº¿ç¨‹
    participant Pool as çº¿ç¨‹æ± 
    participant Obj as openMemberV2DTOå¯¹è±¡

    Note over Main: t1æ—¶åˆ»
    Main-&gt;&gt;Pool: wxConfig(openMemberV2DTO)
    Note over Pool: ä»»åŠ¡Aè¿›å…¥é˜Ÿåˆ—&lt;br/&gt;ç­‰å¾…æ‰§è¡Œ

    Note over Main: t2æ—¶åˆ»
    Main-&gt;&gt;Obj: setSupAppId(&amp;#34;wx_huike...&amp;#34;)
    Main-&gt;&gt;Obj: setAccountType(&amp;#34;00&amp;#34;)
    Note over Obj: å¯¹è±¡çŠ¶æ€è¢«ä¿®æ”¹

    Note over Main: t3æ—¶åˆ»
    Main-&gt;&gt;Pool: wxConfig(openMemberV2DTO)
    Note over Pool: ä»»åŠ¡Bè¿›å…¥é˜Ÿåˆ—&lt;br/&gt;ç­‰å¾…æ‰§è¡Œ

    Note over Main: t4æ—¶åˆ»
    Note over Main: ä¸»çº¿ç¨‹ç»“æŸ&lt;br/&gt;æ‰“å°&amp;#34;å¼€é€šæˆåŠŸ&amp;#34;

    Note over Pool: t5æ—¶åˆ»
    Pool-&gt;&gt;Obj: æ‰§è¡Œä»»åŠ¡A&lt;br/&gt;è¯»å–getSupAppId()
    Note over Obj: è¿”å›ï¼š&amp;#34;wx_huike...&amp;#34;&lt;br/&gt;å·²ç»æ˜¯ä¿®æ”¹åçš„å€¼ï¼

    Note over Pool: t6æ—¶åˆ»
    Pool-&gt;&gt;Obj: æ‰§è¡Œä»»åŠ¡B&lt;br/&gt;è¯»å–getSupAppId()
    Note over Obj: è¿”å›ï¼š&amp;#34;wx_huike...&amp;#34;&lt;br/&gt;è¿˜æ˜¯åŒä¸€ä¸ªå€¼ï¼
</code></pre>
<p><strong>ä¸¤ä¸ªä»»åŠ¡è¯»å–çš„éƒ½æ˜¯ä¿®æ”¹åçš„å€¼ã€‚</strong></p>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆè¿™ä¸ªbugç‰¹åˆ«å®¹æ˜“è¢«å¿½ç•¥ã€‚ï¼Ÿ</h2>
<h3 data-id="heading-6">ä»£ç çœ‹èµ·æ¥å®Œå…¨æ­£å¸¸</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">wxConfig</span>(dto);Â Â <span class="hljs-comment">//Â ç¬¬ä¸€æ¬¡è°ƒç”¨</span>
dto<span class="hljs-selector-class">.setSupAppId</span>("new");Â Â <span class="hljs-comment">//Â ä¿®æ”¹</span>
<span class="hljs-built_in">wxConfig</span>(dto);Â Â <span class="hljs-comment">//Â ç¬¬äºŒæ¬¡è°ƒç”¨</span>
</code></pre>
<p>å¦‚æœä¸çŸ¥é“<code>wxConfig</code>æ˜¯å¼‚æ­¥çš„ï¼Œè¿™ä»£ç ä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ã€‚</p>
<h3 data-id="heading-7">æ²¡æœ‰å•¥æŠ¥é”™</h3>
<p>ä¸šåŠ¡é€»è¾‘æ­£å¸¸æ‰§è¡Œå®Œäº†ï¼Œæ—¥å¿—æ˜¾ç¤ºæˆåŠŸã€‚ä¸ä¼šæŠ›å¼‚å¸¸ï¼Œä¸ä¼šç©ºæŒ‡é’ˆã€‚</p>
<p>åªæ˜¯<strong>é…ç½®é”™äº†</strong>è€Œå·²ã€‚</p>
<h3 data-id="heading-8">é—®é¢˜æ˜¯å¶å‘çš„</h3>
<p>è¿™æ‰æ˜¯æœ€éšè”½çš„åœ°æ–¹ã€‚</p>
<p>å¦‚æœçº¿ç¨‹æ± åˆšå¥½ç©ºé—²ï¼Œç¬¬ä¸€ä¸ªä»»åŠ¡æäº¤åç«‹å³æ‰§è¡Œå®Œäº†ï¼Œç¬¬äºŒä¸ªä»»åŠ¡å†è¿›æ¥ï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>ä½†å¦‚æœçº¿ç¨‹æ± æ­£å¿™ï¼Œä¸¤ä¸ªä»»åŠ¡éƒ½åœ¨é˜Ÿåˆ—é‡Œç­‰å¾…ï¼Œç­‰åˆ°çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå¯¹è±¡å¯èƒ½æ—©å°±è¢«ä¿®æ”¹äº†ã€‚</p>
<p><strong>æ—¶å¥½æ—¶åï¼Œæœ€éš¾æ’æŸ¥ã€‚</strong></p>
<h3 data-id="heading-9">æ—¥å¿—çš„è¿·æƒ‘æ€§</h3>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">INFO</span>]Â å¼€é€šæˆåŠŸ
</code></pre>
<p>è¿™è¡Œæ—¥å¿—åœ¨ä¸»çº¿ç¨‹ç»“æŸæ—¶æ‰“å°ï¼Œè®©äººä»¥ä¸ºä¸€åˆ‡æ­£å¸¸ã€‚</p>
<p>å®é™…ä¸Šï¼Œçº¿ç¨‹æ± é‡Œçš„ä»»åŠ¡æ‰åˆšå¼€å§‹æ‰§è¡Œã€‚</p>
<h3 data-id="heading-10">Code Reviewå®¹æ˜“è¢«é—æ¼</h3>
<p>Code Reviewæ—¶ï¼Œå¦‚æœä¸è¿›å…¥<code>wxConfig</code>æ–¹æ³•å†…éƒ¨çœ‹ï¼Œå¾ˆéš¾å‘ç°æ˜¯å¼‚æ­¥çš„ã€‚</p>
<p>è€Œä¸”ä»£ç é€»è¾‘ç¡®å®æ²¡é—®é¢˜ï¼Œå°±æ˜¯å°‘è€ƒè™‘äº†å¼‚æ­¥åœºæ™¯ã€‚</p>
<h2 data-id="heading-11">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-12">åˆ›å»ºæ–°å¯¹è±¡</h3>
<p>æœ€ç®€å•çš„åŠæ³•ï¼šç»™ç¬¬äºŒæ¬¡è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">openMemberV2Service.wxConfig(openMemberV2DTO)<span class="hljs-comment">;</span>
//Â åˆ›å»ºæ–°å¯¹è±¡
OpenMemberV2DTOÂ <span class="hljs-attr">openMemberDTO</span>Â =Â BeanUtil.map(openMemberV2DTO,Â OpenMemberV2DTO.class)<span class="hljs-comment">;</span>
openMemberDTO.setSupAppId(sysConfig.getWxHuikeOfficialAccountAppid())<span class="hljs-comment">;</span>
openMemberDTO.setAccountType("00")<span class="hljs-comment">;</span>
openMemberV2Service.wxConfig(openMemberDTO)<span class="hljs-comment">;</span>
</code></pre>
<p><code>BeanUtil.map</code>ä¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¤åˆ¶æ‰€æœ‰å±æ€§ã€‚</p>
<p>ä¸¤æ¬¡è°ƒç”¨ä¼ å…¥çš„æ˜¯ä¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼Œäº’ä¸å½±å“ã€‚</p>
<h3 data-id="heading-13">å…¶ä»–æ–¹æ¡ˆ</h3>
<p><strong>æ–¹æ¡ˆ1ï¼šæ·±æ‹·è´</strong></p>
<pre><code class="hljs language-ini" lang="ini">OpenMemberV2DTOÂ <span class="hljs-attr">newDto</span>Â =Â openMemberV2DTO.clone()<span class="hljs-comment">;</span>
</code></pre>
<p>å‰ææ˜¯DTOå®ç°äº†<code>Cloneable</code>æ¥å£ï¼Œå¹¶ä¸”æ˜¯æ·±æ‹·è´ã€‚</p>
<p><strong>æ–¹æ¡ˆ2ï¼šä¸å¯å˜å¯¹è±¡</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">//Â åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æ—§å¯¹è±¡</span>
OpenMemberV2DTOÂ dto2Â =Â OpenMemberV2DTO<span class="hljs-selector-class">.builder</span>()
Â Â Â Â <span class="hljs-selector-class">.supAppId</span>(sysConfig.getWxHuikeOfficialAccountAppid())
Â Â Â Â <span class="hljs-selector-class">.accountType</span>("<span class="hljs-number">00</span>")
Â Â Â Â <span class="hljs-selector-class">.build</span>();

<span class="hljs-built_in">wxConfig</span>(dto2);
</code></pre>
<p><strong>æ–¹æ¡ˆ3ï¼šå¼‚æ­¥æ–¹æ³•å†…éƒ¨æ‹·è´ï¼ˆæœ€æ¨èï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">wxConfig</span><span class="hljs-params">(OpenMemberV2DTOÂ dto)</span>Â </span>{
Â Â Â Â <span class="hljs-comment">//Â è¿›å…¥æ–¹æ³•å°±ç«‹å³æ‹·è´å‚æ•°</span>
Â Â Â Â OpenMemberV2DTOÂ copyDtoÂ =Â FsBeanUtil.<span class="hljs-built_in">map</span>(dto,Â OpenMemberV2DTO.<span class="hljs-keyword">class</span>);

Â Â Â Â asyncTaskExecutor.<span class="hljs-built_in">execute</span>(()Â -&gt;Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ä½¿ç”¨æ‹·è´çš„å¯¹è±¡</span>
Â Â Â Â Â Â Â Â <span class="hljs-type">String</span>Â subAppIdÂ =Â copyDto.<span class="hljs-built_in">getSupAppId</span>();
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ...</span>
Â Â Â Â });
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ¨èè¿™ä¸ªæ–¹æ¡ˆï¼Ÿ</strong></p>
<ol>
<li><strong>è°ƒç”¨æ–¹ä¸ç”¨å…³å¿ƒæ˜¯å¦å¼‚æ­¥</strong>ï¼šå°è£…æ€§å¥½ï¼Œå¯¹å¤–æ¥å£ç®€æ´</li>
<li><strong>ä¸€åŠ³æ°¸é€¸</strong>ï¼šä¿®æ”¹ä¸€æ¬¡ï¼Œæ‰€æœ‰è°ƒç”¨æ–¹éƒ½å—ç›Š</li>
<li><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>ï¼šåœ¨æ–¹æ³•å†…éƒ¨åšå¥½é˜²æŠ¤ï¼Œä¸ä¾èµ–è°ƒç”¨æ–¹çš„æ­£ç¡®ä½¿ç”¨</li>
</ol>
<p>è¿™æ¬¡ä¿®å¤åï¼Œæˆ‘å°±æ˜¯ç”¨çš„è¿™ä¸ªæ–¹æ¡ˆã€‚æŠŠæ‹·è´é€»è¾‘åŠ åˆ°<code>wxConfig</code>æ–¹æ³•å†…éƒ¨ï¼Œä¹‹åå°±å†ä¹Ÿæ²¡å‡ºè¿‡é—®é¢˜ã€‚</p>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>è¿™æ¬¡äº‹æ•…è®©æˆ‘å­¦åˆ°äº†å‡ ç‚¹ã€‚</p>
<h3 data-id="heading-15">1. å¼‚æ­¥æ–¹æ³•è¦è­¦æƒ•å¯¹è±¡å¼•ç”¨</h3>
<p>åªè¦æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œä¼ å…¥çš„å¯¹è±¡å¯èƒ½åœ¨ä»»ä½•æ—¶å€™è¢«ä¿®æ”¹ã€‚</p>
<p>ä¸è¦å‡è®¾"è°ƒç”¨æ–¹ä¸ä¼šæ”¹"ã€‚è¦ä¹ˆæ‹·è´å¯¹è±¡ï¼Œè¦ä¹ˆç”¨ä¸å¯å˜å¯¹è±¡ã€‚</p>
<h3 data-id="heading-16">2. Code Reviewä¸åªçœ‹é€»è¾‘</h3>
<p>Reviewä»£ç æ—¶ï¼Œä¸èƒ½åªçœ‹è¡¨é¢é€»è¾‘æ˜¯å¦æ­£ç¡®ã€‚</p>
<p>è¿˜è¦å…³æ³¨ï¼š</p>
<ul>
<li>æ–¹æ³•æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ</li>
<li>å¯¹è±¡æ˜¯å…±äº«çš„è¿˜æ˜¯ç‹¬ç«‹çš„ï¼Ÿ</li>
<li>æœ‰æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ</li>
</ul>
<h3 data-id="heading-17">3. çº¿ç¨‹å®‰å…¨ä¸åªæ˜¯åŠ é”</h3>
<p>å¾ˆå¤šäººæåˆ°çº¿ç¨‹å®‰å…¨ï¼Œç¬¬ä¸€ååº”æ˜¯åŠ é”ã€‚</p>
<p>ä½†è¿™ä¸ªé—®é¢˜åŠ é”ä¹Ÿæ²¡ç”¨ï¼Œæ ¹æœ¬åŸå› æ˜¯<strong>å¯¹è±¡è¢«å…±äº«äº†</strong>ã€‚</p>
<p>çº¿ç¨‹å®‰å…¨çš„æœ¬è´¨ï¼š<strong>é¿å…å…±äº«å¯å˜çŠ¶æ€</strong>ã€‚</p>
<h3 data-id="heading-18">4. æ—¥å¿—è¦æ‰“å°å…³é”®å‚æ•°</h3>
<p>å¦‚æœä¸€å¼€å§‹æ²¡æœ‰æ‰“å°appidï¼Œè¿™ä¸ªé—®é¢˜ä¼šæ›´éš¾æ’æŸ¥ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">//Â å¥½çš„æ—¥å¿—</span>
LogUtil.info(<span class="hljs-built_in">log</span>,Â <span class="hljs-string">"wxConfigÂ &gt;&gt;Â sub_appidÂ =Â {},Â account_typeÂ =Â {}"</span>,
Â Â Â Â dto.getSupAppId(),Â dto.getAccountType());

<span class="hljs-comment">//Â ä¸å¤Ÿçš„æ—¥å¿—</span>
LogUtil.info(<span class="hljs-built_in">log</span>,Â <span class="hljs-string">"wxConfigÂ &gt;&gt;Â å¼€å§‹é…ç½®"</span>);
</code></pre>
<p>å…³é”®å‚æ•°ä¸€å®šè¦æ‰“å°å‡ºæ¥ã€‚</p>
<h3 data-id="heading-19">5. æ’æŸ¥é—®é¢˜è¦çœ‹æ–¹æ³•å®ç°</h3>
<p>è¿™æ¬¡èƒ½å¿«é€Ÿå®šä½ï¼Œæ˜¯å› ä¸ºè¿›å…¥äº†<code>wxConfig</code>æ–¹æ³•å†…éƒ¨ï¼Œçœ‹åˆ°äº†<code>asyncTaskExecutor.execute</code>ã€‚</p>
<p>å¦‚æœåªçœ‹è°ƒç”¨ä»£ç ï¼Œæ°¸è¿œæ‰¾ä¸åˆ°åŸå› ã€‚</p>
<h2 data-id="heading-20">å†™åœ¨æœ€å</h2>
<p><strong>å¼‚æ­¥æ–¹æ³•ä¼ å‚æ—¶ï¼Œæ³¨æ„å¯¹è±¡å¼•ç”¨é—®é¢˜ã€‚å¦‚æœéœ€è¦å¤šæ¬¡è°ƒç”¨å¹¶ä¿®æ”¹å‚æ•°ï¼ŒåŠ¡å¿…åˆ›å»ºæ–°å¯¹è±¡ã€‚</strong></p>
<p>ä»£ç å¾ˆç®€å•ï¼Œä½†å®¹æ˜“å¿½ç•¥ã€‚å¤§å®¶ä¸€èµ·å…±å‹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»"æ‰‹è‰ºäºº"åˆ°"è¶…çº§ä¸ªä½“":æˆ‘åœ¨å°ç ´ç«™ç”¨AIé‡æ„å·¥ä½œæ–¹å¼çš„2025]]></title>    <link>https://juejin.cn/post/7587997157237866548</link>    <guid>https://juejin.cn/post/7587997157237866548</guid>    <pubDate>2025-12-27T05:44:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587997157237866548" data-draft-id="7588004376867389475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»&quot;æ‰‹è‰ºäºº&quot;åˆ°&quot;è¶…çº§ä¸ªä½“&quot;:æˆ‘åœ¨å°ç ´ç«™ç”¨AIé‡æ„å·¥ä½œæ–¹å¼çš„2025"/> <meta itemprop="keywords" content="OpenAI,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-27T05:44:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ³¯æ³·"/> <meta itemprop="url" content="https://juejin.cn/user/317122698296024"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»"æ‰‹è‰ºäºº"åˆ°"è¶…çº§ä¸ªä½“":æˆ‘åœ¨å°ç ´ç«™ç”¨AIé‡æ„å·¥ä½œæ–¹å¼çš„2025
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/317122698296024/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ³¯æ³·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T05:44:47.000Z" title="Sat Dec 27 2025 05:44:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025 å¹´å³å°†ç”»ä¸Šå¥å·ã€‚å›æœ›è¿™ä¸€å¹´ï¼ŒæŠ€æœ¯é¢†åŸŸçš„å˜é©æµªæ½®ä»æœªåœæ­‡ã€‚ä½œä¸ºä¸€åæ·±è€•åœ¨ä¸€çº¿ä»£ç ä¸­çš„å¼€å‘è€…ï¼Œæˆ‘ä¸æƒ³é‡å¤é‚£äº›å®å¤§çš„è¡Œä¸šå™äº‹ï¼Œè€Œæ˜¯å¸Œæœ›é€šè¿‡å¤ç›˜æˆ‘åœ¨å°ç ´ç«™çš„å®é™…å·¥ä½œç»å†ï¼Œæ¢è®¨ä¸€ä¸ªæ›´å…·ä½“çš„è¯é¢˜ï¼š<strong>åœ¨ AI æ·±åº¦èµ‹èƒ½çš„æ—¶ä»£ï¼Œæˆ‘ä»¬å¦‚ä½•å®Œæˆä»â€œä»£ç æ‰‹è‰ºäººâ€åˆ°â€œè¶…çº§ä¸ªä½“â€çš„è¿›é˜¶ï¼Ÿ</strong></p>
<h3 data-id="heading-0">ä¸ŠåŠå¹´å®æˆ˜ï¼šJSVMP + WASM æ„å»ºå‰ç«¯å®‰å…¨é˜²çº¿</h3>
<p>ä¸ŠåŠå¹´çš„æ ¸å¿ƒå…³é”®è¯æ˜¯<strong>æ”»é˜²</strong>ã€‚å‰ç«¯é£æ§éªŒè¯ SDK çš„å¼€å‘æ—¢å……æ»¡è¶£å‘³ï¼Œåˆæå…·æŒ‘æˆ˜ã€‚é¢å¯¹é»‘äº§ä»ä¸šè€…è¯•å›¾ç›´æ¥ç ´è§£æ¥å£çš„æ”»å‡»è¡Œä¸ºï¼Œå¸¸è§„çš„ä»£ç æ··æ·†æ‰‹æ®µå·²æ˜¾å¾—æ‰è¥Ÿè§è‚˜ã€‚</p>
<p>ä¸ºäº†æ„å»ºæ›´åšå›ºçš„é˜²å¾¡ä½“ç³»ï¼Œæˆ‘ä»¬å¼•å…¥äº† <strong>JSVMP (JavaScript Virtual Machine Protection)</strong> æŠ€æœ¯ã€‚è¯¥æŠ€æœ¯é€šè¿‡å°†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è™šæ‹ŸåŒ–ï¼Œä½¿å¾—é€†å‘å·¥ç¨‹çš„æˆæœ¬å‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚é€šè¿‡ç›‘æ§æ•°æ®çš„å¯¹æ¯”ï¼Œæˆ‘ä»¬æ¸…æ™°åœ°çœ‹åˆ°äº†é˜²å¾¡æ•ˆæœçš„æ˜¾è‘—æå‡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JSVMP æ¦‚å¿µç¤ºæ„ï¼šå°†æºç ç¼–è¯‘ä¸ºè‡ªå®šä¹‰æŒ‡ä»¤é›†</span>
<span class="hljs-comment">// åŸå§‹ä»£ç ï¼š</span>
<span class="hljs-comment">// function check(token) { return token === 'secret'; }</span>

<span class="hljs-comment">// è™šæ‹ŸåŒ–åï¼ˆç¤ºæ„ï¼‰ï¼š</span>
<span class="hljs-keyword">const</span> _vm_instructions = [<span class="hljs-number">0xA1</span>, <span class="hljs-number">0x42</span>, <span class="hljs-number">0xB3</span>, ...]; <span class="hljs-comment">// è‡ªå®šä¹‰å­—èŠ‚ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">_vm_executor</span>(<span class="hljs-params">instructions, context</span>) {
  <span class="hljs-comment">// è™šæ‹Ÿå †æ ˆæ‰§è¡Œå™¨ï¼Œæ”»å‡»è€…éš¾ä»¥è¿˜åŸåŸå§‹é€»è¾‘</span>
  <span class="hljs-keyword">while</span>(pc &lt; instructions.<span class="hljs-property">length</span>) { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d63d5cee2f6473ebc979ae2875eb5d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOv5rO3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767419110&amp;x-signature=EjJ2K%2FRlb3yy9X6ZLzHieUbwh%2BQ%3D" alt="9d10f263d07e71fbd76830816874b06733fa40d74127f8d2d915cb5f41260f36.png" loading="lazy"/></p>
<p>ä¸æ­¤åŒæ—¶ï¼Œä¸ºäº†è¿›ä¸€æ­¥æå‡è®¾å¤‡è®¤è¯çš„å®‰å…¨æ€§å’Œå‡†ç¡®æ€§ï¼Œæˆ‘ä»¬åœ¨ç°ä»£æµè§ˆå™¨ç¯å¢ƒä¸­æ¢ç´¢äº† <strong>WASM (WebAssembly)</strong> çš„å·¥ç¨‹åŒ–è½åœ°ã€‚è¿™ä¸ä»…å¸¦æ¥äº†æ€§èƒ½ä¸Šçš„ä¼˜åŒ–ï¼Œæ›´åˆ©ç”¨ WASM çš„äºŒè¿›åˆ¶ç‰¹æ€§æ„å»ºäº†æ–°çš„å®‰å…¨é˜²çº¿ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬çš„ WASM æ¨¡å—é‡‡ç”¨ <strong>Rust</strong> è¯­è¨€ç¼–å†™ã€‚ä»ä¸¥æ ¼çš„æ‰€æœ‰æƒç³»ç»Ÿåˆ°å†…å­˜å®‰å…¨æœºåˆ¶ï¼Œå†åˆ°é›¶æˆæœ¬æŠ½è±¡ï¼ŒRust çš„è®¾è®¡å“²å­¦æå¤§åœ°ä¿éšœäº†ä»£ç çš„å¥å£®æ€§ã€‚è™½ç„¶å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œä½†å½“ Rust ä»£ç é€šè¿‡ç¼–è¯‘å™¨ä¸¥è‹›çš„æ£€æŸ¥åï¼Œé‚£ç§â€œç¼–è¯‘é€šè¿‡å³è¿è¡Œæ­£ç¡®â€çš„ä¿¡å¿ƒæ˜¯å…¶ä»–è¯­è¨€éš¾ä»¥æ¯”æ‹Ÿçš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff4f55088b8b40d68afebf6bb68dd3dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOv5rO3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767419110&amp;x-signature=jX9e%2BB4qmdwBXpeCp6wN4UbVqLI%3D" alt="Rust-WASMæŠ€æœ¯æ ˆ" loading="lazy"/></p>
<h3 data-id="heading-1">ä¸‹åŠå¹´æ”»åšï¼šé‡æ„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸ååŒæŠ€æœ¯</h3>
<p>ä¸‹åŠå¹´ï¼Œæˆ‘çš„æŠ€æœ¯é‡å¿ƒè½¬ç§»åˆ°äº†å‰ç«¯é¢†åŸŸå…¬è®¤çš„é«˜å¤æ‚åº¦åœºæ™¯â€”â€”<strong>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</strong>ã€‚</p>
<p>ä»»ä½•æ·±å…¥è¿‡ç¼–è¾‘å™¨å¼€å‘çš„å·¥ç¨‹å¸ˆéƒ½çŸ¥é“ï¼Œè¿™ä¸ä»…å…³ä¹ UI äº¤äº’ï¼Œæ›´æ˜¯ä¸€åœºå…³äºæ•°æ®ç»“æ„è®¾è®¡ä¸çŠ¶æ€ç®¡ç†çš„æ·±åº¦åšå¼ˆã€‚æˆ‘ä»¬çš„æ ¸å¿ƒä»»åŠ¡æ˜¯è¿­ä»£â€œå“”å“©å“”å“©å°ç«™â€ï¼Œå¹¶å¯¹ B ç«™å†å²æ‚ ä¹…çš„<strong>ä¸“æ ç¼–è¾‘å™¨</strong>è¿›è¡Œç°ä»£åŒ–é‡æ„ã€‚</p>
<p>åœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä»¬éœ€è¦æ”»å…‹ Tiptap æ¡†æ¶çš„æ·±åº¦å®šåˆ¶ä»¥åŠ CRDTï¼ˆConflict-free Replicated Data Typesï¼‰ååŒç®—æ³•çš„é¢„ç ”ç­‰æŠ€æœ¯éš¾ç‚¹ã€‚æˆ‘ä»¬ä¸ºæ–°ç‰ˆç¼–è¾‘å™¨æ‰©å±•äº†ä¸°å¯Œçš„<strong>å¡ç‰‡å¼ç»„ä»¶ (Node Views)</strong> èƒ½åŠ›â€”â€”æ”¯æŒè§†é¢‘ã€æŠ•ç¥¨ã€å•†å“å¡ç‰‡ç­‰å¤šç§å†…å®¹å½¢æ€ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Tiptap è‡ªå®šä¹‰èŠ‚ç‚¹æ‰©å±•ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Node</span>, mergeAttributes } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/core'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ReactNodeViewRenderer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">BilibiliVideo</span> = <span class="hljs-title class_">Node</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'bilibiliVideo'</span>,
  <span class="hljs-attr">group</span>: <span class="hljs-string">'block'</span>,
  <span class="hljs-attr">atom</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è§†ä¸ºåŸå­èŠ‚ç‚¹</span>

  <span class="hljs-title function_">addAttributes</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">bvid</span>: { <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span> },
    }
  },

  <span class="hljs-title function_">addNodeView</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨ UI ç»„ä»¶æ¸²æŸ“èŠ‚ç‚¹è§†å›¾</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">VueNodeViewRenderer</span>(<span class="hljs-title class_">VideoComponent</span>)
  },
})
</code></pre>
<p>å…¶ä¸­ä¸€ä¸ªæ˜¾è‘—çš„ä½“éªŒæå‡æ˜¯å®ç°äº†<strong>è§†é¢‘åœ¨ç¼–è¾‘å™¨å†…çš„åŸç”Ÿæ’­æ”¾</strong>ã€‚ä¸ºäº†å®ç°è¿™ä¸€â€œæ‰€è§å³æ‰€å¾—â€çš„æ•ˆæœï¼ŒæŠ€æœ¯å›¢é˜Ÿå…‹æœäº†å¤æ‚çš„ DOM äº‹ä»¶å†²çªä¸çŠ¶æ€åŒæ­¥é—®é¢˜ï¼Œå½»åº•æ¶ˆé™¤äº†åˆ›ä½œè€…éœ€è¦é¢‘ç¹åˆ‡æ¢é¢„è§ˆæ¨¡å¼çš„ç—›ç‚¹ã€‚è¿™ç§å¯¹ç»†èŠ‚çš„æè‡´æ‰“ç£¨ï¼Œæœ€ç»ˆæ¢æ¥äº†æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-2">AI èµ‹èƒ½ï¼šä»è¾…åŠ©å·¥å…·åˆ°â€œç¬¬äºŒå¤§è„‘â€</h3>
<p>å¯¹äºæˆ‘è€Œè¨€ï¼Œ2025 å¹´çš„ AI å·²ç»ä¸å†æ˜¯æ–°é²œçš„è¯•éªŒå“ï¼Œè€Œæ˜¯å¦‚åŒ IDE ä¸€èˆ¬ä¸å¯æˆ–ç¼ºçš„ç”Ÿäº§åŠ›å·¥å…·ã€‚</p>
<p>æˆ‘å…¨é¢æ‹¥æŠ±äº† <strong>"Vibe Coding"</strong>ï¼ˆçµæ„Ÿç¼–ç¨‹ï¼‰çš„å·¥ä½œæ¨¡å¼â€”â€”è¿™ä¸ªè¯æ­£æ˜¯ Andrej Karpathy å‘æ˜çš„ã€‚ä»–åœ¨æœ€è¿‘çš„æ¨æ–‡ä¸­æ„Ÿå¹â€œ<strong>ä½œä¸ºç¨‹åºå‘˜ï¼Œæˆ‘ä»æ²¡æ„Ÿè§‰è‡ªå·±è¿™ä¹ˆè½åè¿‡</strong>â€ï¼Œå› ä¸ºè¡Œä¸šæ­£åœ¨è¢« <strong>agentsã€subagentsã€contextsã€memoryã€MCP</strong> ç­‰ 15 ä¸ªæ–°æ¦‚å¿µå‰§çƒˆé‡æ„ã€‚æ­£å¦‚ä»–æ‰€å–»ï¼Œæˆ‘ä»¬æ‰‹ä¸­æ­£æ¡ç€ä¸€ä¸ª**â€œæ²¡æœ‰è¯´æ˜ä¹¦çš„å¤–æ˜Ÿå·¥å…·â€**ï¼Œæ¯ä¸ªäººéƒ½éœ€è¦å»ºç«‹æ–°çš„å¿ƒæ™ºæ¨¡å‹æ¥é©¾é©­å®ƒã€‚</p>
<p>æˆ‘çš„å¼€å‘å·¥å…·é“¾ä¹Ÿç»å†äº†æ·±åº¦è¿­ä»£ã€‚è™½ç„¶ Cursor æ›¾æ˜¯ä¸»åŠ›ï¼Œä½† <strong>Claude Code</strong> å‡­å€Ÿ <strong>Opus 4.5 <strong>æ¨¡å‹åœ¨é•¿ä¸Šä¸‹æ–‡ä¸‹çš„ç¨³å®šæ€§ï¼ˆä½éšæœºæ€§ï¼‰ä¸æ›´å‹å¥½çš„è®¡è´¹æ¨¡å¼ï¼Œæˆä¸ºäº†æˆ‘çš„é¦–é€‰ã€‚æ­£å¦‚ä¸šå†…è®¨è®ºçš„é‚£æ ·ï¼ŒContextï¼ˆä¸Šä¸‹æ–‡ï¼‰ç®¡ç†æ˜¯æ–°æ—¶ä»£çš„æ ¸å¿ƒæŠ€èƒ½ã€‚æˆ‘ä¸åªä¾èµ–å•ä¸€å·¥å…·ï¼Œè€Œæ˜¯æ ¹æ®ä»»åŠ¡ç‰¹æ€§ç»„åˆä½¿ç”¨ï¼šç”¨ Claude Code å¤„ç†å¤æ‚é€»è¾‘ï¼Œç”¨ Codex è¾…åŠ©åç«¯æ€è€ƒï¼Œç”šè‡³å¹¶è¡Œè¿è¡Œå¤šä¸ª Agentã€‚è¿™ç§â€œå¤šæ¨¡å‹ç¼–æ’â€çš„èƒ½åŠ›ï¼Œæå¤§åœ°é‡Šæ”¾äº†ç¼–ç ç”Ÿäº§åŠ›ï¼Œä½¿æˆ‘è¿›å…¥äº†</strong>æœˆå‡ä»£ç äº§å‡º 3-5 ä¸‡è¡Œ</strong> çš„â€œè¶…çº§ä¸ªä½“â€æ¨¡å¼ã€‚ç‰¹åˆ«æ˜¯åœ¨åŸºäº Tiptap çš„ç¼–è¾‘å™¨å¼€å‘ä¸­ï¼ŒAI å¸®åŠ©æˆ‘å¿«é€Ÿç”Ÿæˆäº†å¤§é‡çš„æ ·æ¿ä»£ç ä¸ç±»å‹å®šä¹‰ï¼Œè®©æˆ‘èƒ½ä¸“æ³¨äºæ ¸å¿ƒé€»è¾‘çš„è®¾è®¡ã€‚</p>
<p>è€Œ <strong>Gemini</strong> åˆ™æ›´å¤šæ‰®æ¼”äº†æ¶æ„å¸ˆçš„è§’è‰²ã€‚åœ¨è¿›è¡ŒæŠ€æœ¯æ–¹æ¡ˆè®¾è®¡æ—¶ï¼Œæˆ‘ä¼šåˆ©ç”¨å®ƒæ¥å‘æ•£æ€è·¯ã€æŸ¥æ¼è¡¥ç¼ºã€‚AI çš„å­˜åœ¨ï¼Œæå¤§åœ°é™ä½äº†æŠ€æœ¯éªŒè¯çš„æˆæœ¬ã€‚DeepWiki è¾…åŠ©é˜…è¯»æºç ï¼Œä¹Ÿè®©æŠ€æœ¯è°ƒç ”çš„æ•ˆç‡æå‡äº†ä¸€ä¸ªç»´åº¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f828863dd638439d8b533501399f99e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rOv5rO3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767419110&amp;x-signature=Snk0vxZ%2BK4Ewg%2F64pm9Tet58kNQ%3D" alt="AIè¾…åŠ©å¼€å‘å·¥ä½œæµ" loading="lazy"/></p>
<h3 data-id="heading-3">æ€»ç»“ä¸å±•æœ›ï¼šæŠ€æœ¯å›å½’åˆ›ä½œ</h3>
<p>ç«™åœ¨ 2025 å¹´çš„èŠ‚ç‚¹ä¸Šï¼Œæ–°ç‰ˆä¸“æ ç¼–è¾‘å™¨çš„ä¸Šçº¿æ—¢æ˜¯ä¸€ä¸ªé˜¶æ®µçš„ç»ˆç‚¹ï¼Œä¹Ÿæ˜¯æ–°çš„èµ·ç‚¹ã€‚</p>
<p>å±•æœ›æ˜å¹´ï¼Œæˆ‘è®¡åˆ’åœ¨ä»¥ä¸‹æ–¹å‘æŒç»­æ·±è€•ï¼š</p>
<ol>
<li>
<p><strong>æ·±åº¦ååŒ</strong>ï¼šæ¢ç´¢ ToB åœºæ™¯ä¸‹çš„å®æ—¶åä½œæŠ€æœ¯ï¼›</p>
</li>
<li>
<p><strong>æ™ºèƒ½åˆ›ä½œ</strong>ï¼šå°† AI è¾…åŠ©åˆ›ä½œæ·±åº¦èå…¥ç¼–è¾‘å™¨æ ¸å¿ƒï¼Œæ‰“é€ æ›´â€œæ‡‚â€åˆ›ä½œè€…çš„æ™ºèƒ½å·¥å…·ã€‚</p>
</li>
</ol>
<p>è§‚å¯Ÿå½“ä¸‹çš„è¡Œä¸šç”Ÿæ€ï¼Œå¼€å‘è€…ä»¬æ­£èµ°å‘ä¸åŒçš„å‘½è¿åˆ†æ”¯ï¼šæœ‰çš„â€œä¼ ç»Ÿç²¾è‹±â€å—å›°äºæ—§æœ‰å¿ƒæ™ºæ¨¡å‹è€Œæ„Ÿåˆ°ç„¦è™‘ï¼Œæœ‰çš„â€œå‰ç«¯è¾¹ç¼˜å‹â€é€‰æ‰‹å´å›  AI è¡¥å…¨äº†èƒ½åŠ›çŸ­æ¿è€Œå¦‚é±¼å¾—æ°´ã€‚è¦å®Œæˆä»â€œæ‰‹è‰ºäººâ€åˆ°â€œè¶…çº§ä¸ªä½“â€çš„è·ƒè¿ï¼Œæ ¸å¿ƒåœ¨äº<strong>æ¥å—ä¸ç¡®å®šæ€§</strong>â€”â€”å­¦ä¼šä¸â€œæœ‰æ—¶å€™èƒ½è¡Œã€æœ‰æ—¶å€™ä¸è¡Œâ€çš„ç³»ç»Ÿå…±èˆï¼Œå°†æŠ€èƒ½ç‚¹ä»å•çº¯çš„ä»£ç å®ç°è½¬ç§»åˆ°å¯¹ AI çš„<strong>ç¼–æ’ï¼ˆOrchestrationï¼‰ä¸å¿«é€Ÿè¿­ä»£éªŒè¯</strong>ä¸Šã€‚åˆ«åšé‚£ä¸ªå›ºæ‰§æŠµæŠ—çš„è½åè€…ï¼Œå»æˆä¸ºæ–°åŸå¸‚çš„å»ºé€ è€…ã€‚</p>
<p><strong>ä½ æ˜¯å¦ä¹Ÿå‡†å¤‡å¥½æ‹¥æŠ± AIï¼Œé‡æ„ä½ çš„å·¥ä½œæ–¹å¼äº†ï¼Ÿ</strong> å°‘ä¸€åˆ†æ— è°“çš„ç„¦è™‘ï¼Œå¤šä¸€ä»½å¯¹æŠ€æœ¯çš„å¥½å¥‡ä¸å®è·µã€‚è¿™å°±æ˜¯æˆ‘çš„ 2025 å¹´ç­”å·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ]]></title>    <link>https://juejin.cn/post/7588028859541307418</link>    <guid>https://juejin.cn/post/7588028859541307418</guid>    <pubDate>2025-12-27T06:36:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859541307418" data-draft-id="7588031908171956233" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-27T06:36:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T06:36:02.000Z" title="Sat Dec 27 2025 06:36:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€æºåœ°å€ä¸ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><strong>å¼€æºåœ°å€</strong>ï¼š<code>https://gitee.com/sh_wangwanbao/job-flow</code></li>
<li><strong>ç³»åˆ—æ–‡ç« ï¼š</strong>
<ul>
<li><a href="https://juejin.cn/post/7583469866007969827" target="_blank" title="https://juejin.cn/post/7583469866007969827">ç¬¬ä¸€ç¯‡ï¼šåŸºäºNacosçš„è½»é‡ä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆ â€”â€” ä» XXL-Job çš„ç—›ç‚¹è¯´èµ·</a></li>
<li><a href="https://juejin.cn/post/7584353612501106729" target="_blank" title="https://juejin.cn/post/7584353612501106729">ç¬¬äºŒç¯‡ï¼šJobFlow å®ç°æ–¹æ¡ˆï¼šäº‘åŸç”Ÿæ—¶ä»£çš„ä»»åŠ¡è°ƒåº¦æ–°æ€è·¯</a></li>
<li><a href="https://juejin.cn/post/7585727457472823296" target="_blank" title="https://juejin.cn/post/7585727457472823296">ç¬¬ä¸‰ç¯‡ï¼šJobFlow å®æˆ˜ï¼šæ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšåˆ°çš„</a></li>
<li><a href="https://juejin.cn/post/7585751355593506835" target="_blank" title="https://juejin.cn/post/7585751355593506835">ç¬¬å››ç¯‡ï¼šJobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´</a></li>
<li><a href="https://juejin.cn/post/7588028859541307418" target="_blank" title="https://juejin.cn/post/7588028859541307418">ç¬¬äº”ç¯‡ï¼š# JobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ</a></li>
<li>ç¬¬å…­ç¯‡ï¼šå»¶æ—¶é˜Ÿåˆ—çš„è®¾è®¡ä¸å®ç°ï¼ˆæ’°å†™ä¸­ï¼‰</li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">å‰è¨€</h2>
<p>å‰é¢å‡ ç¯‡æ–‡ç« è®²äº† JobFlow çš„æ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšçš„ï¼šé€šè¿‡ Hash åˆ†åŒº + Owner åˆ¤å®šï¼Œè®©æ¯ä¸ªè°ƒåº¦å™¨å®ä¾‹è‡ªå·±ç®—å‡ºè¯¥ä¸è¯¥æ‰§è¡Œä»»åŠ¡ï¼Œé¿å…äº†æ•°æ®åº“é”ç«äº‰ã€‚</p>
<p>ä½†æ— é”è®¾è®¡å¸¦æ¥äº†æ–°é—®é¢˜ï¼š</p>
<pre><code class="hljs">åœºæ™¯ä¸€ï¼šä»»åŠ¡è§¦å‘äº†ï¼Œä½†æ‰§è¡Œå™¨ä¸€ç›´æ²¡å“åº”
â†’ æ˜¯çœŸçš„åœ¨è·‘ï¼Œè¿˜æ˜¯å·²ç»æŒ‚äº†ï¼Ÿ

åœºæ™¯äºŒï¼šä»»åŠ¡å¤±è´¥äº†ï¼Œéœ€è¦é‡è¯•
â†’ é‡è¯•å‡ æ¬¡ï¼Ÿé—´éš”å¤šä¹…ï¼Ÿ

åœºæ™¯ä¸‰ï¼šæŸä¸€è½®ä»»åŠ¡æ ¹æœ¬æ²¡è¢«è§¦å‘
â†’ æ€ä¹ˆå‘ç°ï¼Ÿæ€ä¹ˆè¡¥å¿ï¼Ÿ
</code></pre>
<p>è¿™å°±æ˜¯åˆ†å¸ƒå¼è°ƒåº¦çš„ä¸‰ä¸ªç»ˆæéš¾é¢˜ï¼š<strong>è¶…æ—¶ã€è¡¥å¿ã€æ¼è°ƒ</strong>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®² JobFlow æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸‰ä¸ªé—®é¢˜çš„ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€æ•´ä½“æ–¹æ¡ˆï¼šä¸‰å±‚ä¿éšœæœºåˆ¶</h2>
<p>åœ¨æ·±å…¥ç»†èŠ‚ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹ JobFlow çš„æ•´ä½“è®¾è®¡æ€è·¯ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒç†å¿µ</h3>
<p>JobFlow çš„å¼‚å¸¸å¤„ç†éµå¾ªä¸€ä¸ªç®€å•çš„åŸåˆ™ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">æ­£å¸¸è·¯å¾„ï¼šè¿½æ±‚æ€§èƒ½
<span class="hljs-deletion">- æ— é”è°ƒåº¦ï¼Œå¿«é€Ÿè§¦å‘</span>
<span class="hljs-deletion">- å¼‚æ­¥å›è°ƒï¼Œç«‹å³å“åº”</span>
<span class="hljs-deletion">- 99% çš„ä»»åŠ¡èµ°è¿™æ¡è·¯</span>

å¼‚å¸¸è·¯å¾„ï¼šè¿½æ±‚å¯é æ€§
<span class="hljs-deletion">- è¶…æ—¶å·¡æ£€ï¼Œç¡®è®¤çŠ¶æ€</span>
<span class="hljs-deletion">- åˆ†ç‰‡è¡¥å¿ï¼Œé™æ¬¡é‡è¯•</span>
<span class="hljs-deletion">- æ¼è°ƒæ£€æµ‹ï¼Œä¸»åŠ¨è¡¥å¿</span>
<span class="hljs-deletion">- 1% çš„ä»»åŠ¡éœ€è¦å…œåº•</span>
</code></pre>
<h3 data-id="heading-4">ä¸‰å±‚ä¿éšœæœºåˆ¶</h3>
<p>JobFlow é€šè¿‡ä¸‰ä¸ªå±‚æ¬¡æ¥ä¿éšœä»»åŠ¡æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç¬¬ä¸€å±‚&lt;br/&gt;æ­£å¸¸è°ƒåº¦] --&gt; B[ç¬¬äºŒå±‚&lt;br/&gt;è¶…æ—¶ä¸è¡¥å¿]
    B --&gt; C[ç¬¬ä¸‰å±‚&lt;br/&gt;æ¼è°ƒæ£€æµ‹]
    
    A --&gt; D[99%ä»»åŠ¡&lt;br/&gt;å¿«é€Ÿå®Œæˆ]
    B --&gt; E[0.9%ä»»åŠ¡&lt;br/&gt;é‡è¯•æˆåŠŸ]
    C --&gt; F[0.1%ä»»åŠ¡&lt;br/&gt;è¡¥å¿æ‰§è¡Œ]
    
    style A fill:#90EE90
    style B fill:#FFE4B5
    style C fill:#FFB6C1
    style D fill:#90EE90
    style E fill:#87CEEB
    style F fill:#87CEEB
</code></pre>
<p><strong>ç¬¬ä¸€å±‚ï¼šæ­£å¸¸è°ƒåº¦</strong></p>
<ul>
<li>Owner åˆ¤å®šé¿å…é‡å¤</li>
<li>åˆ›å»ºçˆ¶å­è®°å½•</li>
<li>åˆå§‹åˆ†é… + å›è°ƒé©±åŠ¨</li>
<li>å¤§éƒ¨åˆ†ä»»åŠ¡åœ¨è¿™ä¸€å±‚å®Œæˆ</li>
</ul>
<p><strong>ç¬¬äºŒå±‚ï¼šè¶…æ—¶ä¸è¡¥å¿</strong></p>
<ul>
<li>è¶…æ—¶å·¡æ£€ï¼ˆ3 åˆ†é’Ÿä¸€æ¬¡ï¼‰</li>
<li>è¯¢é—®æ‰§è¡Œå™¨ç¡®è®¤çœŸå®çŠ¶æ€</li>
<li>åˆ†ç‰‡è¡¥å¿ï¼Œé™æ¬¡é‡è¯•</li>
<li>å¤„ç†æ‰§è¡Œæ…¢ã€å¤±è´¥çš„æƒ…å†µ</li>
</ul>
<p><strong>ç¬¬ä¸‰å±‚ï¼šæ¼è°ƒæ£€æµ‹</strong></p>
<ul>
<li>ä½é¢‘ä»»åŠ¡å·¡æ£€ï¼ˆ10 åˆ†é’Ÿä¸€æ¬¡ï¼‰</li>
<li>æ—¶é—´çª—å£å†…æŸ¥æ‰¾æ‰§è¡Œè®°å½•</li>
<li>å‘ç°æ¼è°ƒä¸»åŠ¨è¡¥å¿</li>
<li>å¤„ç†æ•´è½®æœªè§¦å‘çš„æƒ…å†µ</li>
</ul>
<h3 data-id="heading-5">å…³é”®è§’è‰²åˆ†å·¥</h3>
<p>ä¸æ˜¯æ‰€æœ‰è°ƒåº¦å™¨å®ä¾‹éƒ½åšæ‰€æœ‰äº‹æƒ…ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ™®é€šå®ä¾‹&lt;br/&gt;è´Ÿè´£æ­£å¸¸è°ƒåº¦] --&gt; B[æŒ‰ Hash åˆ†åŒº&lt;br/&gt;å„ç®¡å„çš„ä»»åŠ¡]
    
    C[å·¡æ£€Leader&lt;br/&gt;æœ€å°èŠ‚ç‚¹] --&gt; D[è¶…æ—¶å·¡æ£€&lt;br/&gt;åˆ†ç‰‡è¡¥å¿&lt;br/&gt;æ¼è°ƒæ£€æµ‹]
    
    style A fill:#90EE90
    style B fill:#87CEEB
    style C fill:#FFE4B5
    style D fill:#FFB6C1
</code></pre>
<p>è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š</p>
<ul>
<li>æ­£å¸¸è°ƒåº¦è´Ÿè½½å‡è¡¡ï¼ˆHash åˆ†åŒºï¼‰</li>
<li>å·¡æ£€ä»»åŠ¡å•ç‚¹æ‰§è¡Œï¼ˆé¿å…é‡å¤ï¼‰</li>
<li>æœ€å°èŠ‚ç‚¹æŒ‚äº†ï¼Œä¸‹ä¸€ä¸ªè‡ªåŠ¨æ¥ç®¡</li>
</ul>
<p>æœ‰äº†æ•´ä½“è®¤è¯†ï¼Œæˆ‘ä»¬å†æ·±å…¥æ¯ä¸ªç¯èŠ‚çš„ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-6">äºŒã€é—®é¢˜æ‹†è§£ï¼šä¸‰ç§å¼‚å¸¸åœºæ™¯</h2>
<p>å…ˆçœ‹çœ‹ JobFlow éœ€è¦å¤„ç†å“ªäº›å¼‚å¸¸åœºæ™¯ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ­£å¸¸æ‰§è¡Œ&lt;br/&gt;99%åœºæ™¯] --&gt; B[ä»»åŠ¡å®Œæˆ]
    
    C[æ‰§è¡Œè¶…æ—¶&lt;br/&gt;å¡ä½ä¸åŠ¨] --&gt; D[è¶…æ—¶åˆ¤å®š]
    E[æ‰§è¡Œå¤±è´¥&lt;br/&gt;éœ€è¦é‡è¯•] --&gt; F[è¡¥å¿é‡è¯•]
    G[ä»»åŠ¡æ¼è°ƒ&lt;br/&gt;æ•´è½®é”™è¿‡] --&gt; H[æ¼è°ƒæ£€æµ‹]
    
    style A fill:#90EE90
    style C fill:#FFB6C1
    style E fill:#FFB6C1
    style G fill:#FFB6C1
</code></pre>
<p><strong>æ ¸å¿ƒè®¾è®¡æ€è·¯ï¼š</strong></p>
<p>æ­£å¸¸è·¯å¾„è¿½æ±‚æ€§èƒ½ï¼š</p>
<ul>
<li>æ— é” owner åˆ¤å®š</li>
<li>å¿«é€Ÿè§¦å‘æ‰§è¡Œ</li>
<li>å¼‚æ­¥å›è°ƒæ›´æ–°</li>
</ul>
<p>å¼‚å¸¸è·¯å¾„è¿½æ±‚å¯é æ€§ï¼š</p>
<ul>
<li>è¶…æ—¶å·¡æ£€ç¡®è®¤çŠ¶æ€</li>
<li>åˆ†ç‰‡è¡¥å¿é™æ¬¡é‡è¯•</li>
<li>ä½é¢‘ä»»åŠ¡æ¼è°ƒæ£€æµ‹</li>
</ul>
<p>æ¥ä¸‹æ¥åˆ†åˆ«å±•å¼€è®²ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€æ­£å¸¸æµç¨‹å¿«é€Ÿå›é¡¾</h2>
<p>åœ¨è®²å¼‚å¸¸å¤„ç†ä¹‹å‰ï¼Œå¿«é€Ÿå›é¡¾ä¸€ä¸‹æ­£å¸¸æµç¨‹ï¼ˆè¯¦ç»†å†…å®¹è§ç¬¬äºŒã€ä¸‰ç¯‡æ–‡ç« ï¼‰ï¼š</p>
<p><strong>è°ƒåº¦è§¦å‘</strong>ï¼šå®šæ—¶æ‰«æ â†’ Owner åˆ¤å®š â†’ Cron åˆ°æœŸ â†’ è§¦å‘æ‰§è¡Œ</p>
<p><strong>åˆ†ç‰‡æ‰§è¡Œ</strong>ï¼šåˆ›å»ºçˆ¶è®°å½• â†’ åˆ›å»ºå­è®°å½•ï¼ˆ100 ä¸ª PENDING åˆ†ç‰‡ï¼‰â†’ åˆå§‹åˆ†é… â†’ å›è°ƒé©±åŠ¨</p>
<p>è¿™å°±æ˜¯æ­£å¸¸è·¯å¾„ã€‚é—®é¢˜æ˜¯ï¼Œå¼‚å¸¸æƒ…å†µæ€ä¹ˆå¤„ç†ï¼Ÿ</p>
<h2 data-id="heading-8">å››ã€è¶…æ—¶åˆ¤å®šï¼šä»æ„Ÿè§‰è¶…æ—¶åˆ°ç¡®è®¤è¶…æ—¶</h2>
<h3 data-id="heading-9">ä»€ä¹ˆå«è¶…æ—¶ï¼Ÿ</h3>
<p>ä»»åŠ¡è§¦å‘äº†ï¼Œåˆ†ç‰‡ä¹Ÿè°ƒåº¦äº†ï¼Œä½†ä¸€ç›´æ²¡å›è°ƒã€‚è¿™æ—¶å€™è°ƒåº¦å™¨ä¸çŸ¥é“ï¼š</p>
<pre><code class="hljs">å¯èƒ½æ€§ä¸€ï¼šæ‰§è¡Œå™¨è¿˜åœ¨è·‘ï¼Œåªæ˜¯æ¯”è¾ƒæ…¢
å¯èƒ½æ€§äºŒï¼šæ‰§è¡Œå™¨æŒ‚äº†ï¼Œå›è°ƒå‘ä¸å‡ºæ¥
å¯èƒ½æ€§ä¸‰ï¼šç½‘ç»œæŠ–åŠ¨ï¼Œå›è°ƒä¸¢äº†
</code></pre>
<p><strong>JobFlow çš„ç­–ç•¥ï¼šå…ˆå·¡æ£€ï¼Œå†è¯¢é—®ï¼Œæœ€ååˆ¤æ­»åˆ‘ã€‚</strong></p>
<h3 data-id="heading-10">å·¡æ£€å…¥å£</h3>
<p>è¶…æ—¶å·¡æ£€ç”±æœ€å°èŠ‚ç‚¹è´Ÿè´£ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å®šæ—¶å·¡æ£€&lt;br/&gt;æ¯3åˆ†é’Ÿ] --&gt; B{isInspectionLeader?}
    B --&gt;|å¦| C[è·³è¿‡]
    B --&gt;|æ˜¯| D[æŸ¥è¯¢è¶…æ—¶åˆ†ç‰‡]
    D --&gt; E[åˆ†ç±»å¤„ç†]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style D fill:#FFB6C1
    style E fill:#90EE90
</code></pre>
<p>ä¸ºä»€ä¹ˆç”±æœ€å°èŠ‚ç‚¹è´Ÿè´£ï¼Ÿ</p>
<pre><code class="hljs">æ‰€æœ‰å®ä¾‹ä» Nacos æ‹‰å–å®ä¾‹åˆ—è¡¨
æ’åºåï¼Œæœ€å°çš„é‚£ä¸ªå°±æ˜¯ leader
ä¸éœ€è¦å¤æ‚çš„é€‰ä¸¾ç®—æ³•
æœ€å°èŠ‚ç‚¹æŒ‚äº†ï¼Œä¸‹ä¸€ä¸ªè‡ªåŠ¨æ¥ç®¡
</code></pre>
<p>ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">inspectTimeoutSubExecutions</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 1. åˆ¤æ–­æˆ‘æ˜¯ä¸æ˜¯å·¡æ£€ leader</span>
    <span class="hljs-keyword">if</span> (!isInspectionLeader()) {
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 2. æŸ¥è¯¢è¶…æ—¶åˆ†ç‰‡ï¼ˆåŸºå‡†æ—¶é—´ + è¶…æ—¶é˜ˆå€¼ï¼‰</span>
    List&lt;JobSubExecution&gt; timeoutSubs = jobRepository.findTimeoutSubExecutions(timeoutThresholdMinutes);
    
    <span class="hljs-comment">// 3. åˆ†ç±»å¤„ç†</span>
    <span class="hljs-keyword">for</span> (JobSubExecution sub : timeoutSubs) {
        <span class="hljs-keyword">if</span> (sub.getStatus() == RUNNING) {
            handleRunningTimeoutSubExecution(sub, now);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sub.getStatus() == PENDING) {
            handleSubExecutionForCompensation(sub, now);
        }
    }
}
</code></pre>
<h3 data-id="heading-11">ä¸‰æ­¥è¯¢é—®ç­–ç•¥</h3>
<p>å¯¹äº RUNNING çŠ¶æ€çš„åˆ†ç‰‡ï¼ŒJobFlow ä¸ä¼šç›´æ¥åˆ¤æ­»åˆ‘ï¼Œè€Œæ˜¯å…ˆé—®ä¸€é—®ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å‘ç°RUNNINGè¶…æ—¶] --&gt; B{è¶…è¿‡2å€é˜ˆå€¼?}
    B --&gt;|æ˜¯| C[ç›´æ¥æ ‡è®°TIMEOUT]
    B --&gt;|å¦| D[HTTPè¯¢é—®æ‰§è¡Œå™¨]
    D --&gt; E{æ‰§è¡Œå™¨è¿”å›?}
    E --&gt;|SUCCESS/FAILED| F[æ›´æ–°ä¸ºçœŸå®çŠ¶æ€]
    E --&gt;|RUNNING| G[æš‚ä¸å¤„ç†]
    E --&gt;|è¶…æ—¶/å¼‚å¸¸| H[æ ‡è®°TIMEOUT]
    
    style A fill:#FFB6C1
    style B fill:#FFE4B5
    style C fill:#FF6B6B
    style D fill:#87CEEB
    style E fill:#FFE4B5
    style F fill:#90EE90
    style H fill:#FF6B6B
</code></pre>
<p>è¿™ä¸ªç­–ç•¥åˆ†ä¸‰æ­¥ï¼š</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šè¯¢é—®æ‰§è¡Œå™¨</strong></p>
<p>å‘æ‰§è¡Œå™¨å‘é€ HTTP è¯·æ±‚æŸ¥è¯¢çŠ¶æ€</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">statusUrl</span> <span class="hljs-operator">=</span> executorUrl + <span class="hljs-string">"/internal/job/status?traceId="</span> + shardTraceId;
<span class="hljs-type">String</span> <span class="hljs-variable">statusText</span> <span class="hljs-operator">=</span> restTemplate.getForObject(statusUrl, String.class);
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œå™¨åº”ç­”</strong></p>
<p>æ‰§è¡Œå™¨è¿”å›çœŸå®çŠ¶æ€</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰§è¡Œå™¨ç«¯ä»£ç </span>
<span class="hljs-meta">@GetMapping("/internal/job/status")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getStatus</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String traceId)</span> {
    <span class="hljs-comment">// ä»å†…å­˜æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€</span>
    <span class="hljs-type">ExecutionStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> taskContext.getStatus(traceId);
    <span class="hljs-keyword">return</span> status.name();
}
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæ ¹æ®åº”ç­”å†³å®šè¡ŒåŠ¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (remoteStatus == SUCCESS || remoteStatus == FAILED) {
    <span class="hljs-comment">// ä»¥æ‰§è¡Œå™¨åé¦ˆä¸ºå‡†ï¼Œæ›´æ–°çŠ¶æ€</span>
    jobRepository.updateSubExecutionResult(...);
    updateParentExecutionStatus(parentExecutionId);
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (remoteStatus == RUNNING) {
    <span class="hljs-comment">// è¿˜åœ¨è·‘ï¼Œæš‚ä¸å¤„ç†</span>
    log.info(<span class="hljs-string">"ä»»åŠ¡ä»åœ¨æ‰§è¡Œä¸­ï¼Œæš‚ä¸å¤„ç†"</span>);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è¶…æ—¶æˆ–å¼‚å¸¸ï¼Œæ ‡è®° TIMEOUT</span>
    markSubExecutionTimeout(sub, now, <span class="hljs-string">"No valid response from executor"</span>);
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆéº»çƒ¦ï¼Ÿ</strong></p>
<p>å› ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸ç¡®å®šæ€§ï¼š</p>
<pre><code class="hljs">åœºæ™¯ä¸€ï¼šæ‰§è¡Œå™¨åœ¨è·‘æ‰¹å¤„ç†ï¼Œæ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œç¡®å®å¾ˆæ…¢
â†’ å¦‚æœç›´æ¥åˆ¤è¶…æ—¶ï¼Œä»»åŠ¡ç™½è·‘äº†

åœºæ™¯äºŒï¼šæ‰§è¡Œå™¨æŒ‚äº†ï¼Œæˆ–è€…ç½‘ç»œæ–­äº†
â†’ è¿™æ—¶å€™ç¡®å®è¯¥åˆ¤è¶…æ—¶

åœºæ™¯ä¸‰ï¼šæ‰§è¡Œå™¨å·²ç»æ‰§è¡Œå®Œäº†ï¼Œä½†å›è°ƒå¤±è´¥äº†
â†’ è¯¢é—®åæ‹¿åˆ°çœŸå®çŠ¶æ€ï¼Œé¿å…é‡å¤æ‰§è¡Œ
</code></pre>
<h3 data-id="heading-12">è¶…æ—¶é˜ˆå€¼çš„åŒé‡ä¿æŠ¤</h3>
<p>JobFlow æœ‰ä¸¤å±‚è¶…æ—¶åˆ¤æ–­ï¼š</p>
<p><strong>ç¬¬ä¸€å±‚ï¼šä»»åŠ¡é…ç½®çš„è¶…æ—¶æ—¶é—´</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> job_definition (
    ...
    timeout_seconds <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">300</span>,  <span class="hljs-comment">-- é»˜è®¤5åˆ†é’Ÿ</span>
    ...
);
</code></pre>
<p><strong>ç¬¬äºŒå±‚ï¼šå·¡æ£€é˜ˆå€¼ï¼ˆ2 å€è¶…æ—¶æ—¶é—´ï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">long</span> <span class="hljs-variable">elapsedSeconds</span> <span class="hljs-operator">=</span> Duration.between(baseTime, now).getSeconds();
<span class="hljs-keyword">if</span> (elapsedSeconds &gt;= timeoutSeconds * <span class="hljs-number">2</span>) {
    <span class="hljs-comment">// è¶…è¿‡2å€é˜ˆå€¼ï¼Œç›´æ¥æ ‡è®° TIMEOUTï¼Œä¸å†è¯¢é—®</span>
    markSubExecutionTimeout(sub, now, <span class="hljs-string">"Exceeded 2x timeout threshold"</span>);
    <span class="hljs-keyword">return</span>;
}
</code></pre>
<p>è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š</p>
<pre><code class="hljs">ç¬¬ä¸€æ¬¡è¶…æ—¶ï¼ˆ5åˆ†é’Ÿï¼‰ï¼šå·¡æ£€å‘ç°ï¼Œè¯¢é—®æ‰§è¡Œå™¨
â†’ å¦‚æœè¿˜åœ¨è·‘ï¼Œç»§ç»­ç­‰

ç¬¬äºŒæ¬¡è¶…æ—¶ï¼ˆ10åˆ†é’Ÿï¼‰ï¼šç¡®è®¤å·²ç»å¡æ­»ï¼Œç›´æ¥åˆ¤æ­»åˆ‘
â†’ é¿å…ä¸€ç›´è¯¢é—®ï¼Œæµªè´¹èµ„æº
</code></pre>
<h3 data-id="heading-13">è¶…æ—¶å¤„ç†å°ç»“</h3>
<p>è¶…æ—¶å¤„ç†çš„æ ¸å¿ƒæ€è·¯ï¼š</p>
<pre><code class="hljs">ä¸ç¡®å®šçš„æ—¶å€™ï¼Œå…ˆé—®é—®
é—®äº†è¿˜ä¸ç¡®å®šï¼Œå†ç­‰ç­‰
ç­‰å¤ªä¹…äº†ï¼Œè¯¥æ­»å°±æ­»
</code></pre>
<p>è¿™ç§ç­–ç•¥åœ¨æ€§èƒ½å’Œå¯é æ€§ä¹‹é—´æ‰¾åˆ°äº†å¹³è¡¡ï¼š</p>
<ul>
<li>ä¸ä¼šå› ä¸ºä¸´æ—¶æ…¢å°±è¯¯åˆ¤</li>
<li>ä¹Ÿä¸ä¼šå› ä¸ºçœŸæŒ‚äº†è¿˜ä¸€ç›´ç­‰</li>
</ul>
<h2 data-id="heading-14">äº”ã€åˆ†ç‰‡è¡¥å¿ï¼šå¤±è´¥äº†æ€ä¹ˆé‡è¯•</h2>
<h3 data-id="heading-15">ä»€ä¹ˆæ—¶å€™éœ€è¦è¡¥å¿ï¼Ÿ</h3>
<p>åˆ†ç‰‡è¡¥å¿å¤„ç†ä¸¤ç§æƒ…å†µï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†ç‰‡çŠ¶æ€å¼‚å¸¸] --&gt; B{ä»€ä¹ˆçŠ¶æ€?}
    B --&gt;|PENDINGè¶…æ—¶| C[ä»æœªæ‰§è¡Œ&lt;br/&gt;é‡æ–°åˆ†é…]
    B --&gt;|FAILED| D[æ‰§è¡Œå¤±è´¥&lt;br/&gt;é‡è¯•æ‰§è¡Œ]
    
    style A fill:#FFB6C1
    style B fill:#FFE4B5
    style C fill:#87CEEB
    style D fill:#87CEEB
</code></pre>
<p><strong>PENDING è¶…æ—¶</strong>ï¼šè°ƒåº¦å™¨å·²ç»åˆ›å»ºäº†åˆ†ç‰‡è®°å½•ï¼Œä½†ä¸€ç›´æ²¡åˆ†é…å‡ºå»</p>
<pre><code class="hljs language-diff" lang="diff">å¯èƒ½åŸå› ï¼š
<span class="hljs-deletion">- æ‰€æœ‰æ‰§è¡Œå™¨éƒ½æŒ‚äº†</span>
<span class="hljs-deletion">- åˆå§‹åˆ†é…æ—¶ç½‘ç»œå¼‚å¸¸</span>
<span class="hljs-deletion">- å‰é¢çš„åˆ†ç‰‡éƒ½å¡ä½äº†ï¼Œåé¢çš„æ²¡æœºä¼šæ‰§è¡Œ</span>
</code></pre>
<p><strong>FAILED çŠ¶æ€</strong>ï¼šåˆ†ç‰‡æ‰§è¡Œè¿‡ï¼Œä½†å¤±è´¥äº†</p>
<pre><code class="hljs language-diff" lang="diff">å¯èƒ½åŸå› ï¼š
<span class="hljs-deletion">- ä¸šåŠ¡é€»è¾‘å¼‚å¸¸</span>
<span class="hljs-deletion">- æ•°æ®åº“è¿æ¥è¶…æ—¶</span>
<span class="hljs-deletion">- ä¸‹æ¸¸æœåŠ¡ä¸å¯ç”¨</span>
</code></pre>
<h3 data-id="heading-16">è¡¥å¿é€»è¾‘</h3>
<p>è¡¥å¿çš„æ ¸å¿ƒé€»è¾‘åœ¨ <code>handleSubExecutionForCompensation</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleSubExecutionForCompensation</span><span class="hljs-params">(JobSubExecution sub, LocalDateTime now)</span> {
    <span class="hljs-comment">// 1. æŸ¥è¯¢ä»»åŠ¡å®šä¹‰ï¼Œè·å–æœ€å¤§é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-type">JobDefinition</span> <span class="hljs-variable">jobDef</span> <span class="hljs-operator">=</span> jobRepository.findJobByName(sub.getJobName());
    <span class="hljs-type">int</span> <span class="hljs-variable">maxRetry</span> <span class="hljs-operator">=</span> jobDef != <span class="hljs-literal">null</span> ? jobDef.getMaxRetry() : <span class="hljs-number">3</span>;

    <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦è¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°</span>
    <span class="hljs-keyword">if</span> (sub.getRetryCount() &gt;= maxRetry) {
        log.warn(<span class="hljs-string">"åˆ†ç‰‡å·²è¾¾æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œæ ‡è®°ä¸ºæœ€ç»ˆå¤±è´¥"</span>);
        jobRepository.updateSubExecutionStatus(sub.getId(), FAILED, now, 
            <span class="hljs-string">"Max retry exceeded in compensation"</span>);
        updateParentExecutionStatus(sub.getParentExecutionId());
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 3. é‡æ–°åˆ†é…æ‰§è¡Œ</span>
    <span class="hljs-type">JobExecution</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> jobRepository.findExecutionById(sub.getParentExecutionId());
    List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(jobDef.getServiceName());
    
    compensateSubExecution(sub, parent, jobDef, instances);
}
</code></pre>
<p>è¡¥å¿æµç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å‘ç°å¼‚å¸¸åˆ†ç‰‡] --&gt; B{é‡è¯•æ¬¡æ•°?}
    B --&gt;|æœªè¾¾ä¸Šé™| C[CASæ›´æ–°çŠ¶æ€&lt;br/&gt;PENDING to RUNNING]
    B --&gt;|è¾¾åˆ°ä¸Šé™| D[æ ‡è®°æœ€ç»ˆå¤±è´¥]
    C --&gt; E{CASæˆåŠŸ?}
    E --&gt;|æ˜¯| F[è°ƒç”¨æ‰§è¡Œå™¨]
    E --&gt;|å¦| G[å…¶ä»–å®ä¾‹å·²å¤„ç†]
    
    style A fill:#FFB6C1
    style B fill:#FFE4B5
    style C fill:#87CEEB
    style D fill:#FF6B6B
    style F fill:#90EE90
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼šCAS æ›´æ–°ä¿æŠ¤</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å°è¯• CAS æ›´æ–°çŠ¶æ€</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> jobRepository.casUpdateSubExecutionStatus(
    sub.getId(), 
    sub.getStatus(),      <span class="hljs-comment">// æ—§çŠ¶æ€</span>
    RUNNING,              <span class="hljs-comment">// æ–°çŠ¶æ€</span>
    sub.getRetryCount()   <span class="hljs-comment">// ç‰ˆæœ¬å·</span>
);

<span class="hljs-keyword">if</span> (!updated) {
    <span class="hljs-comment">// CAS å¤±è´¥ï¼Œè¯´æ˜å…¶ä»–å®ä¾‹å·²ç»åœ¨å¤„ç†äº†</span>
    log.info(<span class="hljs-string">"CASæ›´æ–°å¤±è´¥ï¼Œåˆ†ç‰‡å¯èƒ½å·²è¢«å…¶ä»–å®ä¾‹è¡¥å¿"</span>);
    <span class="hljs-keyword">return</span>;
}
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦ç”¨ CASï¼Ÿ</p>
<pre><code class="hljs language-css" lang="css">åœºæ™¯ï¼šå¤šä¸ªè°ƒåº¦å™¨å®ä¾‹åŒæ—¶å‘ç°åŒä¸€ä¸ªåˆ†ç‰‡è¶…æ—¶

å®ä¾‹<span class="hljs-selector-tag">A</span>ï¼šCAS æ›´æ–° PENDING â†’ RUNNINGï¼ŒæˆåŠŸ
å®ä¾‹<span class="hljs-selector-tag">B</span>ï¼šCAS æ›´æ–° PENDING â†’ RUNNINGï¼Œå¤±è´¥ï¼ˆçŠ¶æ€å·²ç»æ˜¯ RUNNING äº†ï¼‰

ç»“æœï¼šåªæœ‰å®ä¾‹<span class="hljs-selector-tag">A</span> ä¼šçœŸæ­£è°ƒç”¨æ‰§è¡Œå™¨ï¼Œé¿å…é‡å¤æ‰§è¡Œ
</code></pre>
<h3 data-id="heading-17">é‡è¯•ç­–ç•¥ï¼šé™æ¬¡ä¸é™æ—¶</h3>
<p>JobFlow çš„é‡è¯•ç­–ç•¥å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">max_retry</span> = <span class="hljs-number">3</span>  ï¼ˆå¯é…ç½®ï¼‰

ç¬¬1æ¬¡å¤±è´¥ï¼šç«‹å³é‡è¯•
ç¬¬2æ¬¡å¤±è´¥ï¼šç«‹å³é‡è¯•
ç¬¬3æ¬¡å¤±è´¥ï¼šç«‹å³é‡è¯•
ç¬¬4æ¬¡å¤±è´¥ï¼šæ ‡è®°æœ€ç»ˆå¤±è´¥ï¼Œä¸å†é‡è¯•
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¸ç”¨æŒ‡æ•°é€€é¿ï¼Ÿ</strong></p>
<p>å‘¨æœŸä»»åŠ¡çš„é‡è¯•å’Œå»¶æ—¶ä»»åŠ¡ä¸åŒï¼š</p>
<p>å‘¨æœŸä»»åŠ¡ï¼š</p>
<ul>
<li>æ‰§è¡Œçª—å£æœ‰é™ï¼ˆä¸‹ä¸€è½®å¾ˆå¿«å°±æ¥äº†ï¼‰</li>
<li>å¸Œæœ›å°½å¿«å®Œæˆ</li>
<li>å¤±è´¥åŸå› é€šå¸¸æ˜¯ä¸´æ—¶æ€§çš„ï¼ˆç½‘ç»œæŠ–åŠ¨ã€GCæš‚åœï¼‰</li>
</ul>
<p>å»¶æ—¶ä»»åŠ¡ï¼š</p>
<ul>
<li>æ‰§è¡Œæ—¶é—´çµæ´»</li>
<li>å¯ä»¥ç­‰ä¸€ç­‰</li>
<li>éœ€è¦é¿å…é›ªå´©</li>
</ul>
<p>æ‰€ä»¥å‘¨æœŸä»»åŠ¡ç”¨"é™æ¬¡ä¸é™æ—¶"ï¼Œå»¶æ—¶ä»»åŠ¡ç”¨"æŒ‡æ•°é€€é¿"ã€‚</p>
<h3 data-id="heading-18">è¡¥å¿çš„è§¦å‘æ—¶æœº</h3>
<p>è¡¥å¿æœ‰ä¸¤ä¸ªè§¦å‘å…¥å£ï¼š</p>
<p><strong>å…¥å£ä¸€ï¼šè¶…æ—¶å·¡æ£€</strong>ï¼ˆå‰é¢è®²è¿‡ï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">inspectTimeoutSubExecutions</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-keyword">for</span> (JobSubExecution sub : timeoutSubs) {
        <span class="hljs-keyword">if</span> (sub.getStatus() == PENDING) {
            handleSubExecutionForCompensation(sub, now);
        }
    }
}
</code></pre>
<p><strong>å…¥å£äºŒï¼šç«‹å³å¤±è´¥</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è°ƒç”¨æ‰§è¡Œå™¨å¤±è´¥æ—¶ï¼Œç«‹å³æ ‡è®° FAILED</span>
<span class="hljs-keyword">if</span> (!success) {
    jobRepository.updateSubExecutionStatus(sub.getId(), FAILED, now, errorMsg);
}
</code></pre>
<p>è¿™æ ·ä¸¤æ¡è·¯å¾„é…åˆï¼š</p>
<pre><code class="hljs">ç«‹å³å¤±è´¥ï¼šå¿«é€Ÿå“åº”ï¼Œä¸ç­‰å·¡æ£€
è¶…æ—¶å·¡æ£€ï¼šå…œåº•ä¿æŠ¤ï¼Œé˜²æ­¢é—æ¼
</code></pre>
<h2 data-id="heading-19">å…­ã€ä½é¢‘ä»»åŠ¡çš„æ¼è°ƒæ£€æµ‹</h2>
<h3 data-id="heading-20">ä»€ä¹ˆæ˜¯æ¼è°ƒï¼Ÿ</h3>
<p>æ¼è°ƒæ˜¯æŒ‡ï¼šä»»åŠ¡æœ¬è¯¥æ‰§è¡Œï¼Œä½†æ•´è½®éƒ½æ²¡è§¦å‘ã€‚</p>
<pre><code class="hljs">ç¤ºä¾‹ï¼šæ¯å¤©å‡Œæ™¨2ç‚¹çš„å¯¹è´¦ä»»åŠ¡

æ­£å¸¸æƒ…å†µï¼š
12æœˆ20æ—¥ 02:00:00 â†’ æ‰§è¡Œ
12æœˆ21æ—¥ 02:00:00 â†’ æ‰§è¡Œ
12æœˆ22æ—¥ 02:00:00 â†’ æ‰§è¡Œ

æ¼è°ƒæƒ…å†µï¼š
12æœˆ20æ—¥ 02:00:00 â†’ æ‰§è¡Œ
12æœˆ21æ—¥ 02:00:00 â†’ æ²¡æ‰§è¡Œï¼ˆæ‰€æœ‰è°ƒåº¦å™¨éƒ½æŒ‚äº†ï¼‰
12æœˆ22æ—¥ 02:00:00 â†’ æ‰§è¡Œ

é—®é¢˜ï¼š21å·çš„å¯¹è´¦ä»»åŠ¡æ¼äº†
</code></pre>
<p>å¯¹äºé«˜é¢‘ä»»åŠ¡ï¼ˆåˆ†é’Ÿçº§ï¼‰ï¼Œæ¼è°ƒå½±å“è¾ƒå°ï¼Œå¾ˆå¿«å°±æœ‰ä¸‹ä¸€è½®ã€‚</p>
<p>ä½†å¯¹äºä½é¢‘ä»»åŠ¡ï¼ˆå°æ—¶çº§ã€å¤©çº§ï¼‰ï¼Œæ¼è°ƒå¯èƒ½å¯¼è‡´ä¸¥é‡åæœï¼š</p>
<pre><code class="hljs">å¯¹è´¦ä»»åŠ¡æ¼è°ƒï¼šè´¢åŠ¡æ•°æ®ä¸å‡†
æŠ¥è¡¨ç”Ÿæˆæ¼è°ƒï¼šä¸šåŠ¡å†³ç­–å»¶è¯¯
æ•°æ®æ¸…ç†æ¼è°ƒï¼šç£ç›˜ç©ºé—´è€—å°½
</code></pre>
<h3 data-id="heading-21">æ€ä¹ˆæ£€æµ‹æ¼è°ƒï¼Ÿ</h3>
<p>JobFlow çš„æ€è·¯ï¼š<strong>æ—¶é—´çª—å£ + æ‰§è¡Œè®°å½•</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è®¡ç®—Cronå‘¨æœŸ] --&gt; B{å‘¨æœŸå¤§äºç­‰äº1å°æ—¶?}
    B --&gt;|å¦| C[é«˜é¢‘ä»»åŠ¡&lt;br/&gt;è·³è¿‡]
    B --&gt;|æ˜¯| D[è®¡ç®—ä¸Šä¸€è½®æ—¶é—´çª—å£]
    D --&gt; E{çª—å£å†…æœ‰æ‰§è¡Œè®°å½•?}
    E --&gt;|æ˜¯| F[æœªæ¼è°ƒ]
    E --&gt;|å¦| G[è§¦å‘è¡¥å¿]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#D3D3D3
    style D fill:#87CEEB
    style E fill:#FFE4B5
    style G fill:#90EE90
    style G fill:#90EE90
</code></pre>
<p>æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. è§£æ Cronï¼Œè®¡ç®—å‘¨æœŸ</span>
<span class="hljs-type">CronExpression</span> <span class="hljs-variable">cronExpression</span> <span class="hljs-operator">=</span> CronExpression.parse(cron);
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">next1</span> <span class="hljs-operator">=</span> cronExpression.next(now.minusSeconds(<span class="hljs-number">1</span>));
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">next2</span> <span class="hljs-operator">=</span> cronExpression.next(next1);
<span class="hljs-type">Duration</span> <span class="hljs-variable">period</span> <span class="hljs-operator">=</span> Duration.between(next1, next2);

<span class="hljs-comment">// 2. è¿‡æ»¤ï¼šåªæ£€æµ‹å‘¨æœŸ â‰¥ 1 å°æ—¶çš„ä»»åŠ¡</span>
<span class="hljs-keyword">if</span> (period == <span class="hljs-literal">null</span> || period.toMinutes() &lt; <span class="hljs-number">60</span>) {
    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// é«˜é¢‘ä»»åŠ¡ä¸æ£€æµ‹</span>
}

<span class="hljs-comment">// 3. è®¡ç®—ä¸Šä¸€è½®çš„æ—¶é—´çª—å£</span>
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">lastSlotTime</span> <span class="hljs-operator">=</span> next1.minus(period);
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">windowStart</span> <span class="hljs-operator">=</span> lastSlotTime;
<span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">windowEnd</span> <span class="hljs-operator">=</span> now;

<span class="hljs-comment">// 4. æŸ¥è¯¢çª—å£å†…æ˜¯å¦æœ‰æ‰§è¡Œè®°å½•</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> jobRepository.existsExecutionInWindow(
    job.getName(), windowStart, windowEnd);

<span class="hljs-comment">// 5. å¦‚æœæ²¡æœ‰è®°å½•ï¼Œè§¦å‘è¡¥å¿</span>
<span class="hljs-keyword">if</span> (!exists) {
    log.info(<span class="hljs-string">"æ£€æµ‹åˆ°ä½é¢‘ä»»åŠ¡æ¼è°ƒï¼Œè§¦å‘è¡¥å¿ï¼ŒjobName={}, window=[{}, {}]"</span>,
        job.getName(), windowStart, windowEnd);
    triggerExecution(job, now);
}
</code></pre>
<p>SQL æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">FROM</span> job_execution 
<span class="hljs-keyword">WHERE</span> job_name <span class="hljs-operator">=</span> ? 
  <span class="hljs-keyword">AND</span> trigger_time <span class="hljs-operator">&gt;=</span> ? 
  <span class="hljs-keyword">AND</span> trigger_time <span class="hljs-operator">&lt;</span> ?
</code></pre>
<h3 data-id="heading-22">æ—¶é—´çª—å£ç¤ºä¾‹</h3>
<p>ä»¥"æ¯å¤©å‡Œæ™¨2ç‚¹"çš„ä»»åŠ¡ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">å½“å‰æ—¶é—´ï¼š2024-12-22 10:00:00

è®¡ç®—è¿‡ç¨‹ï¼š
<span class="hljs-attr">1. next1</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">23</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>ï¼ˆä¸‹ä¸€ä¸ªè§¦å‘æ—¶é—´ï¼‰
<span class="hljs-attr">2. next2</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">24</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>ï¼ˆå†ä¸‹ä¸€ä¸ªè§¦å‘æ—¶é—´ï¼‰
<span class="hljs-attr">3. period</span> = <span class="hljs-number">24</span>å°æ—¶
<span class="hljs-attr">4. lastSlotTime</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">23</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> - <span class="hljs-number">24</span>å°æ—¶ = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">22</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>

æ—¶é—´çª—å£ï¼š
<span class="hljs-attr">windowStart</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">22</span> <span class="hljs-number">02</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>
<span class="hljs-attr">windowEnd</span> = <span class="hljs-number">2024</span>-<span class="hljs-number">12</span>-<span class="hljs-number">22</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>ï¼ˆå½“å‰æ—¶é—´ï¼‰

åˆ¤æ–­ï¼š
å¦‚æœçª—å£å†…æœ‰æ‰§è¡Œè®°å½• â†’ æœªæ¼è°ƒ
å¦‚æœçª—å£å†…æ²¡æœ‰æ‰§è¡Œè®°å½• â†’ æ¼è°ƒäº†ï¼Œè¡¥å¿ä¸€æ¬¡
</code></pre>
<h3 data-id="heading-23">ä¸ºä»€ä¹ˆåªæ£€æµ‹ä½é¢‘ä»»åŠ¡ï¼Ÿ</h3>
<p>å› ä¸ºé«˜é¢‘ä»»åŠ¡çš„æ¼è°ƒå½±å“å°ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">åˆ†é’Ÿçº§ä»»åŠ¡ï¼š
<span class="hljs-deletion">- æ¼è°ƒä¸€æ¬¡ï¼Œ1åˆ†é’Ÿåå°±æœ‰ä¸‹ä¸€è½®</span>
<span class="hljs-deletion">- ä¸šåŠ¡å½±å“å°</span>
<span class="hljs-deletion">- å®¹æ˜“è¢«ç›‘æ§å‘ç°</span>

å°æ—¶çº§ä»»åŠ¡ï¼š
<span class="hljs-deletion">- æ¼è°ƒä¸€æ¬¡ï¼Œè¦ç­‰1å°æ—¶</span>
<span class="hljs-deletion">- å¯èƒ½å½±å“ä¸šåŠ¡</span>
<span class="hljs-deletion">- ä¸å®¹æ˜“è¢«å‘ç°</span>

å¤©çº§ä»»åŠ¡ï¼š
<span class="hljs-deletion">- æ¼è°ƒä¸€æ¬¡ï¼Œè¦ç­‰1å¤©</span>
<span class="hljs-deletion">- ä¸¥é‡å½±å“ä¸šåŠ¡</span>
<span class="hljs-deletion">- å¾ˆéš¾è¢«å‘ç°</span>
</code></pre>
<p>æ‰€ä»¥ JobFlow çš„ç­–ç•¥æ˜¯ï¼š</p>
<pre><code class="hljs">é«˜é¢‘ä»»åŠ¡ï¼ˆ&lt; 1å°æ—¶ï¼‰ï¼šä¸æ£€æµ‹ï¼Œé ç›‘æ§
ä½é¢‘ä»»åŠ¡ï¼ˆâ‰¥ 1å°æ—¶ï¼‰ï¼šä¸»åŠ¨æ£€æµ‹ï¼Œè‡ªåŠ¨è¡¥å¿
</code></pre>
<h3 data-id="heading-24">æ¼è°ƒæ£€æµ‹çš„è§¦å‘é¢‘ç‡</h3>
<p>æ¼è°ƒæ£€æµ‹ä¸éœ€è¦å¤ªé¢‘ç¹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Scheduled(fixedDelay = 600000)</span>  <span class="hljs-comment">// 10åˆ†é’Ÿä¸€æ¬¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">compensateLowFrequencyMisfires</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (!clusterInstanceService.shouldRunInspection()) {
        <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// éå·¡æ£€leaderï¼Œè·³è¿‡</span>
    }
    
    List&lt;JobDefinition&gt; jobs = jobRepository.findAllEnabledJobs();
    <span class="hljs-keyword">for</span> (JobDefinition job : jobs) {
        compensateIfLowFrequencyAndMissed(job, LocalDateTime.now());
    }
}
</code></pre>
<p>ä¸ºä»€ä¹ˆ10åˆ†é’Ÿä¸€æ¬¡å°±å¤Ÿäº†ï¼Ÿ</p>
<pre><code class="hljs">å¯¹äºå°æ—¶çº§ä»»åŠ¡ï¼š10åˆ†é’Ÿæ£€æµ‹ä¸€æ¬¡ï¼Œè¶³å¤ŸåŠæ—¶
å¯¹äºå¤©çº§ä»»åŠ¡ï¼š10åˆ†é’Ÿæ£€æµ‹ä¸€æ¬¡ï¼Œæ›´å¤Ÿäº†
å¯¹äºåˆ†é’Ÿçº§ä»»åŠ¡ï¼šä¸æ£€æµ‹ï¼Œç­‰ä¸‹ä¸€è½®å°±å¥½
</code></pre>
<h2 data-id="heading-25">ä¸ƒã€å»¶æ—¶ä»»åŠ¡çš„è¶…æ—¶ä¸é‡è¯•</h2>
<p>å»¶æ—¶ä»»åŠ¡å’Œå‘¨æœŸä»»åŠ¡ä¸åŒï¼Œå®ƒæ˜¯ä¸€æ¬¡æ€§çš„ï¼š</p>
<pre><code class="hljs">å‘¨æœŸä»»åŠ¡ï¼šæ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ
å»¶æ—¶ä»»åŠ¡ï¼š30åˆ†é’Ÿåæ‰§è¡Œä¸€æ¬¡
</code></pre>
<h3 data-id="heading-26">å»¶æ—¶ä»»åŠ¡çš„çŠ¶æ€æœº</h3>
<p>å»¶æ—¶ä»»åŠ¡çš„çŠ¶æ€æµè½¬ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[PENDING&lt;br/&gt;ç­‰å¾…ä¸­] --&gt; B[SENDING&lt;br/&gt;è°ƒç”¨ä¸­]
    B --&gt; C[SENT&lt;br/&gt;å·²å‘é€]
    B --&gt; D[FAILED&lt;br/&gt;å¤±è´¥]
    D --&gt; E{é‡è¯•æ¬¡æ•°?}
    E --&gt;|æœªè¾¾ä¸Šé™| A
    E --&gt;|è¾¾åˆ°ä¸Šé™| F[FAILED_FINAL&lt;br/&gt;æœ€ç»ˆå¤±è´¥]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#90EE90
    style D fill:#FFB6C1
    style F fill:#FF6B6B
</code></pre>
<p>æ ¸å¿ƒå­—æ®µï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> job_delay_task (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    execute_time <span class="hljs-type">TIMESTAMP</span>,      <span class="hljs-comment">-- é¢„æœŸæ‰§è¡Œæ—¶é—´</span>
    next_attempt_time <span class="hljs-type">TIMESTAMP</span>, <span class="hljs-comment">-- ä¸‹æ¬¡é‡è¯•æ—¶é—´</span>
    status <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>),          <span class="hljs-comment">-- PENDING/SENDING/SENT/FAILED/FAILED_FINAL</span>
    retry_count <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,   <span class="hljs-comment">-- é‡è¯•æ¬¡æ•°</span>
    max_retry <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">3</span>,     <span class="hljs-comment">-- æœ€å¤§é‡è¯•æ¬¡æ•°</span>
    ...
);
</code></pre>
<h3 data-id="heading-27">è°ƒåº¦æµç¨‹</h3>
<p>å»¶æ—¶ä»»åŠ¡çš„è°ƒåº¦é€»è¾‘ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ‰«æåˆ°æœŸä»»åŠ¡] --&gt; B{isOwner?}
    B --&gt;|å¦| C[è·³è¿‡]
    B --&gt;|æ˜¯| D[CASæ›´æ–°&lt;br/&gt;PENDING to SENDING]
    D --&gt; E{CASæˆåŠŸ?}
    E --&gt;|å¦| F[å…¶ä»–å®ä¾‹å¤„ç†]
    E --&gt;|æ˜¯| G[HTTPè°ƒç”¨æ‰§è¡Œå™¨]
    G --&gt; H{æˆåŠŸ?}
    H --&gt;|æ˜¯| I[æ ‡è®°SENT]
    H --&gt;|å¦| J[é‡è¯•é€»è¾‘]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style D fill:#87CEEB
    style G fill:#FFE4B5
    style I fill:#90EE90
    style J fill:#FFB6C1
</code></pre>
<p>å…³é”®ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. Owner åˆ¤å®šï¼ˆæŒ‰ serviceName åˆ†åŒºï¼‰</span>
<span class="hljs-keyword">if</span> (!clusterInstanceService.isOwner(task.getServiceName())) {
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">// 2. CAS æŠ¢å </span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">locked</span> <span class="hljs-operator">=</span> delayTaskRepository.tryMarkSending(
    task.getId(), task.getStatus(), task.getRetryCount());
<span class="hljs-keyword">if</span> (!locked) {
    <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// è¢«å…¶ä»–å®ä¾‹æŠ¢äº†</span>
}

<span class="hljs-comment">// 3. HTTP è°ƒç”¨</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> callExecutor(task);

<span class="hljs-comment">// 4. æ›´æ–°çŠ¶æ€</span>
<span class="hljs-keyword">if</span> (success) {
    delayTaskRepository.markSent(task.getId(), LocalDateTime.now());
} <span class="hljs-keyword">else</span> {
    handleCallFailure(task, errorMsg);
}
</code></pre>
<h3 data-id="heading-28">é‡è¯•ç­–ç•¥ï¼šæŒ‡æ•°é€€é¿</h3>
<p>å»¶æ—¶ä»»åŠ¡çš„é‡è¯•ç”¨æŒ‡æ•°é€€é¿ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleCallFailure</span><span class="hljs-params">(JobDelayTask task, String errorMsg)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">newRetryCount</span> <span class="hljs-operator">=</span> task.getRetryCount() + <span class="hljs-number">1</span>;
    
    <span class="hljs-keyword">if</span> (newRetryCount &gt;= task.getMaxRetry()) {
        <span class="hljs-comment">// æ ‡è®°æœ€ç»ˆå¤±è´¥</span>
        delayTaskRepository.markFailedFinal(task.getId(), newRetryCount, errorMsg);
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// è®¡ç®—ä¸‹æ¬¡é‡è¯•æ—¶é—´</span>
    LocalDateTime nextAttempt;
    <span class="hljs-keyword">if</span> (newRetryCount == <span class="hljs-number">1</span>) {
        nextAttempt = now.plusMinutes(<span class="hljs-number">3</span>);   <span class="hljs-comment">// ç¬¬1æ¬¡ï¼š3åˆ†é’Ÿå</span>
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newRetryCount == <span class="hljs-number">2</span>) {
        nextAttempt = now.plusMinutes(<span class="hljs-number">5</span>);   <span class="hljs-comment">// ç¬¬2æ¬¡ï¼š5åˆ†é’Ÿå</span>
    } <span class="hljs-keyword">else</span> {
        nextAttempt = now.plusMinutes(<span class="hljs-number">5</span>);   <span class="hljs-comment">// ç¬¬3æ¬¡ï¼š5åˆ†é’Ÿå</span>
    }
    
    delayTaskRepository.markFailedAndScheduleNext(
        task.getId(), newRetryCount, nextAttempt, errorMsg);
}
</code></pre>
<p>é‡è¯•æ—¶é—´è½´ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">åˆå§‹æ‰§è¡Œï¼š<span class="hljs-attr">execute_time</span> = <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>
ç¬¬1æ¬¡å¤±è´¥ï¼š<span class="hljs-attr">next_attempt_time</span> = <span class="hljs-number">10</span>:<span class="hljs-number">03</span>:<span class="hljs-number">00</span>ï¼ˆ+<span class="hljs-number">3</span>åˆ†é’Ÿï¼‰
ç¬¬2æ¬¡å¤±è´¥ï¼š<span class="hljs-attr">next_attempt_time</span> = <span class="hljs-number">10</span>:<span class="hljs-number">08</span>:<span class="hljs-number">00</span>ï¼ˆ+<span class="hljs-number">5</span>åˆ†é’Ÿï¼‰
ç¬¬3æ¬¡å¤±è´¥ï¼š<span class="hljs-attr">next_attempt_time</span> = <span class="hljs-number">10</span>:<span class="hljs-number">13</span>:<span class="hljs-number">00</span>ï¼ˆ+<span class="hljs-number">5</span>åˆ†é’Ÿï¼‰
ç¬¬4æ¬¡å¤±è´¥ï¼šæ ‡è®° FAILED_FINAL
</code></pre>
<h3 data-id="heading-29">SENDING è¶…æ—¶æ£€æµ‹</h3>
<p>å»¶æ—¶ä»»åŠ¡è¿˜æœ‰ä¸ªç‰¹æ®Šåœºæ™¯ï¼šè°ƒç”¨æ‰§è¡Œå™¨åï¼Œä¸€ç›´æ²¡å“åº”ã€‚</p>
<p>è¿™æ—¶å€™æ•°æ®åº“é‡Œçš„çŠ¶æ€æ˜¯ SENDINGï¼Œéœ€è¦æœ‰ä¸ªè¶…æ—¶æ£€æµ‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰«æ SENDING è¶…æ—¶ä»»åŠ¡</span>
List&lt;JobDelayTask&gt; stuckTasks = delayTaskRepository.findStuckSendingTasks(
    sendingTimeoutSeconds, scanBatchSize);

<span class="hljs-keyword">for</span> (JobDelayTask task : stuckTasks) {
    handleSendingTimeout(task);
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleSendingTimeout</span><span class="hljs-params">(JobDelayTask task)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">timeoutMsg</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SENDING timeout (over "</span> + sendingTimeoutSeconds + <span class="hljs-string">" seconds)"</span>;
    log.warn(<span class="hljs-string">"æ£€æµ‹åˆ°SENDINGè¶…æ—¶ï¼Œè§†ä¸ºå¤±è´¥ï¼ŒtraceId={}"</span>, task.getTraceId());
    handleCallFailure(task, timeoutMsg);
}
</code></pre>
<p>æŸ¥è¯¢ SQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> job_delay_task 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'SENDING'</span> 
  <span class="hljs-keyword">AND</span> sent_at <span class="hljs-operator">&lt;</span> NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> ? <span class="hljs-keyword">SECOND</span>
LIMIT ?
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<pre><code class="hljs language-diff" lang="diff">åœºæ™¯ï¼šè°ƒç”¨æ‰§è¡Œå™¨åï¼Œæ‰§è¡Œå™¨æŒ‚äº†

ç»“æœï¼š
<span class="hljs-deletion">- å›è°ƒä¸ä¼šæ¥</span>
<span class="hljs-deletion">- çŠ¶æ€ä¸€ç›´æ˜¯ SENDING</span>
<span class="hljs-deletion">- éœ€è¦è¶…æ—¶æ£€æµ‹æ¥å…œåº•</span>

å¤„ç†ï¼š
<span class="hljs-deletion">- è§†ä¸ºä¸€æ¬¡å¤±è´¥</span>
<span class="hljs-deletion">- è¿›å…¥é‡è¯•æµç¨‹</span>
<span class="hljs-deletion">- æœ€å¤šé‡è¯•3æ¬¡</span>
</code></pre>
<h2 data-id="heading-30">å…«ã€å·¡æ£€ä»»åŠ¡çš„åè°ƒï¼šè°æ¥åšï¼Ÿ</h2>
<p>å‰é¢è®²äº†ä¸‰ç§å·¡æ£€ï¼š</p>
<ul>
<li>è¶…æ—¶å·¡æ£€ï¼ˆåˆ†ç‰‡è¶…æ—¶ï¼‰</li>
<li>åˆ†ç‰‡è¡¥å¿ï¼ˆåˆ†ç‰‡å¤±è´¥ï¼‰</li>
<li>æ¼è°ƒæ£€æµ‹ï¼ˆä½é¢‘ä»»åŠ¡ï¼‰</li>
</ul>
<p>è¿™äº›å·¡æ£€éƒ½éœ€è¦æœ‰äººåšï¼Œä½†ä¸èƒ½æ‰€æœ‰å®ä¾‹éƒ½åšï¼ˆä¼šé‡å¤ï¼‰ã€‚</p>
<h3 data-id="heading-31">é€‰ä¸»ç­–ç•¥ï¼šæœ€å°èŠ‚ç‚¹</h3>
<p>JobFlow çš„é€‰ä¸»å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä»Nacosè·å–&lt;br/&gt;æ‰€æœ‰è°ƒåº¦å™¨å®ä¾‹] --&gt; B[æŒ‰IP:PORTæ’åº]
    B --&gt; C{æˆ‘æ˜¯æœ€å°çš„?}
    C --&gt;|æ˜¯| D[æˆ‘æ˜¯Leader&lt;br/&gt;è´Ÿè´£å·¡æ£€]
    C --&gt;|å¦| E[æˆ‘æ˜¯Follower&lt;br/&gt;è·³è¿‡å·¡æ£€]
    
    style A fill:#87CEEB
    style B fill:#87CEEB
    style C fill:#FFE4B5
    style D fill:#90EE90
    style E fill:#D3D3D3
</code></pre>
<p>ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">shouldRunInspection</span><span class="hljs-params">()</span> {
    List&lt;ServiceInstance&gt; instances = discoveryClient.getInstances(<span class="hljs-string">"jobflow-scheduler"</span>);
    <span class="hljs-keyword">if</span> (instances == <span class="hljs-literal">null</span> || instances.isEmpty()) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// æ’åº</span>
    instances.sort(Comparator.comparing(i -&gt; i.getHost() + <span class="hljs-string">":"</span> + i.getPort()));
    
    <span class="hljs-comment">// åˆ¤æ–­æˆ‘æ˜¯ä¸æ˜¯æœ€å°çš„</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">smallest</span> <span class="hljs-operator">=</span> instances.get(<span class="hljs-number">0</span>).getHost() + <span class="hljs-string">":"</span> + instances.get(<span class="hljs-number">0</span>).getPort();
    <span class="hljs-type">String</span> <span class="hljs-variable">myself</span> <span class="hljs-operator">=</span> localHost + <span class="hljs-string">":"</span> + localPort;
    
    <span class="hljs-keyword">return</span> smallest.equals(myself);
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé€‰æœ€å°èŠ‚ç‚¹ï¼Ÿ</strong></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ç®€å•ï¼šä¸éœ€è¦å¤æ‚çš„é€‰ä¸¾ç®—æ³•</li>
<li>ç¡®å®šï¼šæ‰€æœ‰å®ä¾‹çœ‹åˆ°çš„æ’åºç»“æœä¸€è‡´</li>
<li>å¿«é€Ÿï¼šæœ€å°èŠ‚ç‚¹æŒ‚äº†ï¼Œä¸‹ä¸€ä¸ªç«‹åˆ»æ¥ç®¡</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>è´Ÿè½½ä¸å‡ï¼šæ‰€æœ‰å·¡æ£€éƒ½åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Š</li>
</ul>
<p>ä½†å¯¹äºå·¡æ£€ä»»åŠ¡æ¥è¯´ï¼Œè´Ÿè½½å¾ˆå°ï¼Œè¿™ä¸ªç¼ºç‚¹å¯ä»¥æ¥å—ã€‚</p>
<h3 data-id="heading-32">å·¡æ£€é¢‘ç‡</h3>
<p>ä¸åŒå·¡æ£€çš„é¢‘ç‡ä¸åŒï¼š</p>
<pre><code class="hljs language-diff" lang="diff">è¶…æ—¶å·¡æ£€ï¼š3åˆ†é’Ÿä¸€æ¬¡
<span class="hljs-deletion">- éœ€è¦åŠæ—¶å‘ç°å¡ä½çš„ä»»åŠ¡</span>
<span class="hljs-deletion">- ä½†ä¹Ÿä¸èƒ½å¤ªé¢‘ç¹ï¼Œé¿å…æ‰“çˆ†æ‰§è¡Œå™¨</span>

åˆ†ç‰‡è¡¥å¿ï¼šéšè¶…æ—¶å·¡æ£€è§¦å‘
<span class="hljs-deletion">- å’Œè¶…æ—¶å·¡æ£€æ˜¯ä¸€èµ·çš„</span>

æ¼è°ƒæ£€æµ‹ï¼š10åˆ†é’Ÿä¸€æ¬¡
<span class="hljs-deletion">- ä½é¢‘ä»»åŠ¡æœ¬æ¥å°±æ…¢ï¼Œä¸éœ€è¦å¤ªé¢‘ç¹</span>
<span class="hljs-deletion">- é™ä½æ•°æ®åº“å‹åŠ›</span>
</code></pre>
<h2 data-id="heading-33">ä¹ã€è®¾è®¡æƒè¡¡ä¸å–èˆ</h2>
<p>å›é¡¾ä¸€ä¸‹ JobFlow åœ¨è¶…æ—¶ã€è¡¥å¿ã€æ¼è°ƒè¿™ä¸‰ä¸ªé—®é¢˜ä¸Šçš„è®¾è®¡æƒè¡¡ï¼š</p>
<h3 data-id="heading-34">æƒè¡¡ä¸€ï¼šè¯¢é—® vs ç›´æ¥åˆ¤æ­»åˆ‘</h3>
<p><strong>æ–¹æ¡ˆAï¼šç›´æ¥åˆ¤æ­»åˆ‘</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šç®€å•å¿«é€Ÿ</li>
<li>ç¼ºç‚¹ï¼šè¯¯æ€æ­£å¸¸ä»»åŠ¡</li>
</ul>
<p><strong>æ–¹æ¡ˆBï¼šå…ˆè¯¢é—®æ‰§è¡Œå™¨</strong>ï¼ˆJobFlow çš„é€‰æ‹©ï¼‰</p>
<ul>
<li>ä¼˜ç‚¹ï¼šå‡†ç¡®æ€§é«˜ï¼Œé¿å…è¯¯åˆ¤</li>
<li>ç¼ºç‚¹ï¼šå¢åŠ ä¸€æ¬¡ HTTP è°ƒç”¨</li>
</ul>
<p>JobFlow é€‰æ‹©äº†æ–¹æ¡ˆBï¼Œå› ä¸ºï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å¯¹äºæ‰¹å¤„ç†ä»»åŠ¡ï¼š
<span class="hljs-deletion">- æ•°æ®é‡å¤§ï¼Œç¡®å®å¾ˆæ…¢</span>
<span class="hljs-deletion">- è¯¯åˆ¤æˆæœ¬é«˜ï¼ˆä»»åŠ¡ç™½è·‘äº†ï¼‰</span>
<span class="hljs-deletion">- å¤šä¸€æ¬¡ HTTP è¯¢é—®ï¼Œæˆæœ¬å¯æ¥å—</span>
</code></pre>
<h3 data-id="heading-35">æƒè¡¡äºŒï¼šç«‹å³é‡è¯• vs æŒ‡æ•°é€€é¿</h3>
<p><strong>å‘¨æœŸä»»åŠ¡ï¼šç«‹å³é‡è¯•</strong></p>
<ul>
<li>åŸå› ï¼šæ‰§è¡Œçª—å£æœ‰é™</li>
<li>ç›®æ ‡ï¼šå°½å¿«å®Œæˆ</li>
</ul>
<p><strong>å»¶æ—¶ä»»åŠ¡ï¼šæŒ‡æ•°é€€é¿</strong></p>
<ul>
<li>åŸå› ï¼šæ—¶é—´çµæ´»</li>
<li>ç›®æ ‡ï¼šé¿å…é›ªå´©</li>
</ul>
<p>è¿™æ˜¯æ ¹æ®åœºæ™¯ç‰¹ç‚¹åšçš„å·®å¼‚åŒ–è®¾è®¡ã€‚</p>
<h3 data-id="heading-36">æƒè¡¡ä¸‰ï¼šå…¨é‡æ£€æµ‹ vs åˆ†å±‚æ£€æµ‹</h3>
<p><strong>æ–¹æ¡ˆAï¼šæ‰€æœ‰ä»»åŠ¡éƒ½æ£€æµ‹æ¼è°ƒ</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šè¦†ç›–å…¨é¢</li>
<li>ç¼ºç‚¹ï¼šæ•°æ®åº“å‹åŠ›å¤§</li>
</ul>
<p><strong>æ–¹æ¡ˆBï¼šåªæ£€æµ‹ä½é¢‘ä»»åŠ¡</strong>ï¼ˆJobFlow çš„é€‰æ‹©ï¼‰</p>
<ul>
<li>ä¼˜ç‚¹ï¼šæ€§ä»·æ¯”é«˜</li>
<li>ç¼ºç‚¹ï¼šé«˜é¢‘ä»»åŠ¡æ¼è°ƒä¸ç®¡</li>
</ul>
<p>JobFlow é€‰æ‹©äº†æ–¹æ¡ˆBï¼Œå› ä¸ºï¼š</p>
<pre><code class="hljs language-diff" lang="diff">é«˜é¢‘ä»»åŠ¡æ¼è°ƒå½±å“å°ï¼š
<span class="hljs-deletion">- 1åˆ†é’Ÿåå°±æœ‰ä¸‹ä¸€è½®</span>
<span class="hljs-deletion">- å®¹æ˜“è¢«ç›‘æ§å‘ç°</span>
<span class="hljs-deletion">- ä¸éœ€è¦ä¸»åŠ¨æ£€æµ‹</span>

ä½é¢‘ä»»åŠ¡æ¼è°ƒå½±å“å¤§ï¼š
<span class="hljs-deletion">- å¯èƒ½è¦ç­‰å¾ˆä¹…</span>
<span class="hljs-deletion">- ä¸å®¹æ˜“è¢«å‘ç°</span>
<span class="hljs-deletion">- éœ€è¦ä¸»åŠ¨æ£€æµ‹</span>
</code></pre>
<h3 data-id="heading-37">æƒè¡¡å››ï¼šæ‰€æœ‰å®ä¾‹å·¡æ£€ vs å•å®ä¾‹å·¡æ£€</h3>
<p><strong>æ–¹æ¡ˆAï¼šæ‰€æœ‰å®ä¾‹éƒ½å·¡æ£€</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šåˆ†å¸ƒå¼ï¼Œè´Ÿè½½å‡è¡¡</li>
<li>ç¼ºç‚¹ï¼šå®¹æ˜“é‡å¤ï¼Œéœ€è¦åˆ†å¸ƒå¼é”</li>
</ul>
<p><strong>æ–¹æ¡ˆBï¼šæœ€å°èŠ‚ç‚¹å·¡æ£€</strong>ï¼ˆJobFlow çš„é€‰æ‹©ï¼‰</p>
<ul>
<li>ä¼˜ç‚¹ï¼šç®€å•ï¼Œæ— éœ€é”</li>
<li>ç¼ºç‚¹ï¼šå•ç‚¹ï¼Œè´Ÿè½½é›†ä¸­</li>
</ul>
<p>JobFlow é€‰æ‹©äº†æ–¹æ¡ˆBï¼Œå› ä¸ºï¼š</p>
<pre><code class="hljs language-diff" lang="diff">å·¡æ£€è´Ÿè½½å¾ˆå°ï¼š
<span class="hljs-deletion">- 3åˆ†é’Ÿä¸€æ¬¡ï¼Œ10åˆ†é’Ÿä¸€æ¬¡</span>
<span class="hljs-deletion">- æ¯æ¬¡æ‰«æå‡ ç™¾ä¸ªä»»åŠ¡</span>
<span class="hljs-deletion">- å•å®ä¾‹å®Œå…¨æ‰›å¾—ä½</span>

ç®€å•ä¼˜å…ˆï¼š
<span class="hljs-deletion">- ä¸éœ€è¦åˆ†å¸ƒå¼é”</span>
<span class="hljs-deletion">- ä¸éœ€è¦å¤æ‚çš„åè°ƒ</span>
<span class="hljs-deletion">- æœ€å°èŠ‚ç‚¹æŒ‚äº†ï¼Œè‡ªåŠ¨åˆ‡æ¢</span>
</code></pre>
<h2 data-id="heading-38">åã€æ€»ç»“</h2>
<p>JobFlow å¤„ç†è¶…æ—¶ã€è¡¥å¿ã€æ¼è°ƒçš„æ ¸å¿ƒæ€è·¯ï¼š</p>
<p><strong>æ­£å¸¸è·¯å¾„ä¼˜å…ˆ</strong>ï¼š</p>
<ul>
<li>99% çš„ä»»åŠ¡èµ°æ­£å¸¸è·¯å¾„</li>
<li>æ— é”è°ƒåº¦ï¼Œæ€§èƒ½å¥½</li>
<li>å›è°ƒé©±åŠ¨ï¼Œå“åº”å¿«</li>
</ul>
<p><strong>å¼‚å¸¸è·¯å¾„å…œåº•</strong>ï¼š</p>
<ul>
<li>è¶…æ—¶å·¡æ£€ï¼šè¯¢é—®æ‰§è¡Œå™¨ç¡®è®¤çœŸå®çŠ¶æ€</li>
<li>åˆ†ç‰‡è¡¥å¿ï¼šCAS ä¿æŠ¤ï¼Œé™æ¬¡é‡è¯•</li>
<li>æ¼è°ƒæ£€æµ‹ï¼šæ—¶é—´çª—å£ï¼Œä¸»åŠ¨è¡¥å¿</li>
</ul>
<p><strong>è®¾è®¡åŸåˆ™</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç®€å•ä¼˜äºå¤æ‚
<span class="hljs-bullet">   -</span> æœ€å°èŠ‚ç‚¹é€‰ä¸»ï¼Œè€Œä¸æ˜¯ Raft é€‰ä¸¾
<span class="hljs-bullet">   -</span> CAS ä¿æŠ¤ï¼Œè€Œä¸æ˜¯åˆ†å¸ƒå¼é”

<span class="hljs-bullet">2.</span> åˆ†å±‚ä¼˜äºå…¨é‡
<span class="hljs-bullet">   -</span> åªæ£€æµ‹ä½é¢‘ä»»åŠ¡æ¼è°ƒ
<span class="hljs-bullet">   -</span> è¶…æ—¶åˆ¤å®šåˆ†ä¸¤å±‚

<span class="hljs-bullet">3.</span> è¯¢é—®ä¼˜äºçŒœæµ‹
<span class="hljs-bullet">   -</span> å…ˆé—®æ‰§è¡Œå™¨ï¼Œå†åˆ¤è¶…æ—¶
<span class="hljs-bullet">   -</span> å‡†ç¡®æ€§ä¼˜äºæ€§èƒ½

<span class="hljs-bullet">4.</span> å…œåº•ä¼˜äºå®Œç¾
<span class="hljs-bullet">   -</span> æ¥å—1%çš„æ¼è°ƒï¼Œç”¨å·¡æ£€å…œåº•
<span class="hljs-bullet">   -</span> æ¥å—çŸ­æš‚çš„çŠ¶æ€ä¸ä¸€è‡´
</code></pre>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼š</p>
<p>JobFlow æ²¡æœ‰è¿½æ±‚å®Œç¾çš„ä¸€è‡´æ€§ï¼Œè€Œæ˜¯ç”¨å¼‚æ­¥è¡¥å¿æ¢å–äº†ï¼š</p>
<ul>
<li>æ›´å¥½çš„æ€§èƒ½ï¼ˆæ— é”è°ƒåº¦ï¼‰</li>
<li>æ›´ä½çš„å¤æ‚åº¦ï¼ˆæ— éœ€åˆ†å¸ƒå¼é”ï¼‰</li>
<li>æ›´å¥½çš„å¯ç»´æŠ¤æ€§ï¼ˆé€»è¾‘æ¸…æ™°ï¼‰</li>
</ul>
<p>è¿™å°±æ˜¯ JobFlow åœ¨åˆ†å¸ƒå¼è°ƒåº¦è¿™ä¸ªé¢†åŸŸçš„æ ¸å¿ƒç«äº‰åŠ›ï¼š<strong>åœ¨æ€§èƒ½å’Œå¯é æ€§ä¹‹é—´æ‰¾åˆ°æœ€ä¼˜å¹³è¡¡ç‚¹ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨]]></title>    <link>https://juejin.cn/post/7588067055481634825</link>    <guid>https://juejin.cn/post/7588067055481634825</guid>    <pubDate>2025-12-27T07:14:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588067055481634825" data-draft-id="7588031908172005385" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-27T07:14:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T07:14:15.000Z" title="Sat Dec 27 2025 07:14:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€æºåœ°å€ä¸ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><strong>å¼€æºåœ°å€</strong>ï¼š<code>https://gitee.com/sh_wangwanbao/job-flow</code></li>
<li><strong>ç³»åˆ—æ–‡ç« ï¼š</strong>
<ul>
<li><a href="https://juejin.cn/post/7583469866007969827" target="_blank" title="https://juejin.cn/post/7583469866007969827">ç¬¬ä¸€ç¯‡ï¼šåŸºäºNacosçš„è½»é‡ä»»åŠ¡è°ƒåº¦æ–¹æ¡ˆ â€”â€” ä» XXL-Job çš„ç—›ç‚¹è¯´èµ·</a></li>
<li><a href="https://juejin.cn/post/7584353612501106729" target="_blank" title="https://juejin.cn/post/7584353612501106729">ç¬¬äºŒç¯‡ï¼šJobFlow å®ç°æ–¹æ¡ˆï¼šäº‘åŸç”Ÿæ—¶ä»£çš„ä»»åŠ¡è°ƒåº¦æ–°æ€è·¯</a></li>
<li><a href="https://juejin.cn/post/7585727457472823296" target="_blank" title="https://juejin.cn/post/7585727457472823296">ç¬¬ä¸‰ç¯‡ï¼šJobFlow å®æˆ˜ï¼šæ— é”è°ƒåº¦æ˜¯æ€ä¹ˆåšåˆ°çš„</a></li>
<li><a href="https://juejin.cn/post/7585751355593506835" target="_blank" title="https://juejin.cn/post/7585751355593506835">ç¬¬å››ç¯‡ï¼šJobFlow èƒŒåï¼šäº”ä¸ªè®©æˆ‘è±ç„¶å¼€æœ—çš„è®¾è®¡ç¬é—´</a></li>
<li><a href="https://juejin.cn/post/7588028859541307418" target="_blank" title="https://juejin.cn/post/7588028859541307418">ç¬¬äº”ç¯‡ï¼šJobFlowè°ƒåº¦çš„éš¾é¢˜ï¼šè¶…æ—¶ã€è¡¥å¿ä¸æ¼è°ƒ</a></li>
<li><a href="https://juejin.cn/spost/7588067055481634825" target="_blank" title="https://juejin.cn/spost/7588067055481634825">ç¬¬å…­ç¯‡ï¼šJobFlowï¼šå›ºå®šåˆ†ç‰‡å¦‚ä½•è§£å†³åˆ†å¸ƒå¼æ‰«æçš„è¾¹ç•ŒæŠ–åŠ¨</a></li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">å‰è¨€</h2>
<p>åšæ‰¹å¤„ç†ä»»åŠ¡ï¼Œå¾ˆå¤šäººç¬¬ä¸€ååº”éƒ½æ˜¯åˆ†é¡µæ‹‰æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">page</span>=<span class="hljs-number">1</span> â†’ æ‹‰<span class="hljs-number">100</span>æ¡
<span class="hljs-attr">page</span>=<span class="hljs-number">2</span> â†’ æ‹‰<span class="hljs-number">100</span>æ¡
...
<span class="hljs-attr">page</span>=N â†’ æ‹‰<span class="hljs-number">50</span>æ¡ï¼Œç»“æŸ
</code></pre>
<p>çœ‹èµ·æ¥å¾ˆè‡ªç„¶ï¼Œä½†åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œè¿™ä¸ªè®¾è®¡æœ‰ä¸ªè‡´å‘½é—®é¢˜ï¼š</p>
<pre><code class="hljs">ä½ åœ¨ç¿»é¡µæœŸé—´ï¼Œæ•°æ®ä¸€ç›´åœ¨å˜åŒ–
â†’ ç¬¬1000é¡µå’Œç¬¬1001é¡µçš„è¾¹ç•Œï¼Œæ˜¯ä¸ªåŠ¨æ€çš„ã€ä¸ç¨³å®šçš„ä¸œè¥¿
â†’ æœ‰äº›æ•°æ®å¯èƒ½æ°¸è¿œè½ä¸åˆ°ä»»ä½•ä¸€é¡µ
â†’ ä½ æ—¢ä¸èƒ½ä¿è¯ä¸é‡å¤ï¼Œä¹Ÿä¸èƒ½ä¿è¯ä¸é—æ¼
</code></pre>
<p>JobFlow çš„é€‰æ‹©æ˜¯ï¼š<strong>æ”¾å¼ƒåˆ†é¡µï¼Œæ”¹ç”¨å›ºå®šåˆ†ç‰‡</strong>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±æ¥è®²è®²è¿™ä¸ªè®¾è®¡ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€åˆ†é¡µçš„é—®é¢˜ï¼šè¾¹ç•Œåœ¨æŠ–åŠ¨</h2>
<h3 data-id="heading-3">é—®é¢˜åœºæ™¯</h3>
<p>å‡è®¾ä½ è¦åšè®¢å•å¯¹è´¦ï¼Œæ¯å¤©å‡Œæ™¨æ‰«æå…¨é‡è®¢å•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æ‰«æä»»åŠ¡å¯åŠ¨] --&gt; B[page=1&lt;br/&gt;æ‹‰100æ¡]
    B --&gt; C[page=2&lt;br/&gt;æ‹‰100æ¡]
    C --&gt; D[...]
    D --&gt; E[page=1000&lt;br/&gt;æ‹‰100æ¡]
    E --&gt; F{è¿˜æœ‰ä¸‹ä¸€é¡µ?}
    
    style A fill:#87CEEB
    style B fill:#90EE90
    style C fill:#90EE90
    style E fill:#90EE90
    style F fill:#FFE4B5
</code></pre>
<p>é—®é¢˜åœ¨å“ªï¼Ÿ</p>
<p><strong>æ ¸å¿ƒé—®é¢˜ï¼šè¾¹ç•Œåœ¨æŠ–åŠ¨</strong></p>
<pre><code class="hljs language-ini" lang="ini">ä½ åœ¨æ‰«ç¬¬1é¡µçš„æ—¶å€™ï¼š
- ç”¨æˆ·åœ¨ä¸‹æ–°è®¢å•
- è®¢å•åœ¨æ›´æ–°çŠ¶æ€
- å†å²è®¢å•åœ¨è¢«æ¸…ç†

ç­‰ä½ æ‰«åˆ°ç¬¬1000é¡µï¼š
- å‰é¢çš„é¡µå·²ç»å˜äº†
- è¾¹ç•Œä¹Ÿè·Ÿç€å˜äº†

å…·ä½“è¡¨ç°ï¼š
ç¬¬ä¸€è½®ï¼š<span class="hljs-attr">page</span>=<span class="hljs-number">1000</span> æ‹‰åˆ° ID=<span class="hljs-number">100000</span>-<span class="hljs-number">100100</span>
ç¬¬äºŒè½®ï¼šæœŸé—´æœ‰è®¢å•è¢«åˆ é™¤
        <span class="hljs-attr">page</span>=<span class="hljs-number">1000</span> æ‹‰åˆ° ID=<span class="hljs-number">100000</span>-<span class="hljs-number">100105</span>ï¼ˆè¾¹ç•Œå˜äº†ï¼‰
        <span class="hljs-attr">page</span>=<span class="hljs-number">1001</span> æ‹‰åˆ° ID=<span class="hljs-number">100095</span>-<span class="hljs-number">100195</span>ï¼ˆè¾¹ç•Œåˆå˜äº†ï¼‰

ç»“æœï¼š<span class="hljs-attr">ID</span>=<span class="hljs-number">100095</span>-<span class="hljs-number">100100</span> è¿™<span class="hljs-number">5</span>æ¡è®¢å•
     â†’ å¯èƒ½è¢«é‡å¤å¤„ç†
     â†’ ä¹Ÿå¯èƒ½è¢«é—æ¼

æç«¯æƒ…å†µï¼š
æŸä¸ªè®¢å•åˆšå¥½åœ¨ä½ ç¿»é¡µçš„æ—¶å€™è¢«æ’å…¥
â†’ å®ƒæ°¸è¿œè½ä¸åˆ°ä»»ä½•ä¸€é¡µ
â†’ ä¹Ÿæ°¸è¿œä¸ä¼šè¢«æ‰«æåˆ°ï¼ˆå¹½çµæ•°æ®ï¼‰
</code></pre>
<h3 data-id="heading-4">æœ¬è´¨çŸ›ç›¾</h3>
<p>åˆ†é¡µæŠŠä¸€ä¸ª"ç©ºé—´åˆ’åˆ†"çš„é—®é¢˜ï¼Œé”™è¯¯åœ°å»ºæ¨¡æˆäº†"æ—¶é—´å¿«ç…§"çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†é¡µæ¨¡å‹&lt;br/&gt;è¾¹ç•ŒåŠ¨æ€] --&gt; B[å¿«ç…§ä¸€ç›´åœ¨å˜]
    C[åˆ†ç‰‡æ¨¡å‹&lt;br/&gt;è¾¹ç•Œç¨³å®š] --&gt; D[ç©ºé—´å›ºå®šä¸å˜]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<p><strong>åˆ†é¡µæ¨¡å‹çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li>è¾¹ç•Œå®šä¹‰ï¼šå½“å‰å¿«ç…§ä¸‹çš„ç¬¬Né¡µ</li>
<li>ä»»ä½•æ•°æ®å˜æ›´éƒ½ä¼šæ”¹å˜å¿«ç…§</li>
<li>ä½ æ°¸è¿œåœ¨è¿½ä¸€ä¸ªç§»åŠ¨çš„é¶å­</li>
</ul>
<p><strong>åˆ†ç‰‡æ¨¡å‹çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>è¾¹ç•Œå®šä¹‰ï¼šå›ºå®šçš„ç©ºé—´åˆ’åˆ†</li>
<li>æ•°æ®å˜æ›´ä¸å½±å“åˆ†ç‰‡å½’å±</li>
<li>ä¸€æ¬¡æ€§å®šä¹‰ï¼Œåç»­ç¨³å®š</li>
</ul>
<h2 data-id="heading-5">äºŒã€å›ºå®šåˆ†ç‰‡çš„æ ¸å¿ƒæ€è·¯</h2>
<p>JobFlow çš„æ€è·¯å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ä¸è¦å†é—®<span class="hljs-string">"è¿˜æœ‰æ²¡æœ‰ä¸‹ä¸€é¡µ"</span>
è°ƒåº¦å™¨è‡ªå·±æŠŠè´£ä»»ç©ºé—´åˆ‡æˆå›ºå®šæ•°é‡çš„åˆ†ç‰‡
</code></pre>
<h3 data-id="heading-6">æ•°æ®åº“è®¾è®¡</h3>
<p>æ ¸å¿ƒé…ç½®åœ¨ <code>job_definition</code> è¡¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> job_definition (
    id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    shard_count <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">1</span>,           <span class="hljs-comment">-- å›ºå®šåˆ†ç‰‡æ•°</span>
    shard_strategy <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'MOD_HASH'</span>,  <span class="hljs-comment">-- åˆ†ç‰‡ç­–ç•¥</span>
    ...
);
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<p><strong>å…³é”®ç‚¹ä¸€ï¼šåˆ†ç‰‡æ•°æ˜¯å›ºå®šçš„</strong></p>
<pre><code class="hljs language-ini" lang="ini">è®¢å•å¯¹è´¦ä»»åŠ¡ï¼šé…ç½® <span class="hljs-attr">shard_count</span> = <span class="hljs-number">100</span>
â†’ è¿™ä¸ªä»»åŠ¡æ°¸è¿œæ˜¯100ä¸ªåˆ†ç‰‡
â†’ æ— è®ºè®¢å•æœ‰100ä¸‡è¿˜æ˜¯1000ä¸‡
â†’ æ— è®ºæ‰§è¡Œå™¨æœ‰3ä¸ªå®ä¾‹è¿˜æ˜¯10ä¸ªå®ä¾‹
</code></pre>
<p><strong>å…³é”®ç‚¹äºŒï¼šåˆ†ç‰‡ç­–ç•¥ç”±ä¸šåŠ¡å®šä¹‰</strong></p>
<pre><code class="hljs language-ini" lang="ini">MOD_HASH ç­–ç•¥ï¼š
- shard_0 è´Ÿè´£ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">0</span> çš„è®¢å•
- shard_1 è´Ÿè´£ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">1</span> çš„è®¢å•
- ...
- shard_99 è´Ÿè´£ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">99</span> çš„è®¢å•

åªè¦ orderId ä¸å˜ï¼Œå®ƒæ°¸è¿œå½’å±åŒä¸€ä¸ªåˆ†ç‰‡
</code></pre>
<h3 data-id="heading-7">è°ƒåº¦å™¨åªå…³å¿ƒä¸¤ä»¶äº‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è°ƒåº¦å™¨] --&gt; B[è¿™ä¸€è½®&lt;br/&gt;è¦è·‘å¤šå°‘ç‰‡?]
    A --&gt; C[æ¯ä¸€ç‰‡&lt;br/&gt;ç¼–å·æ˜¯å‡ ?]
    
    B --&gt; D[è¯»é…ç½®&lt;br/&gt;shard_count=100]
    C --&gt; E[åˆ†é…ç¼–å·&lt;br/&gt;0-99]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#FFE4B5
    style D fill:#90EE90
    style E fill:#90EE90
</code></pre>
<p>è°ƒåº¦å™¨ä¸å…³å¿ƒï¼š</p>
<ul>
<li>å…·ä½“æ€ä¹ˆåˆ†ç‰‡ï¼ˆä¸šåŠ¡å†³å®šï¼‰</li>
<li>æ¯ç‰‡æœ‰å¤šå°‘æ•°æ®ï¼ˆä¸šåŠ¡å†³å®šï¼‰</li>
<li>æ•°æ®æ€ä¹ˆæŸ¥è¯¢ï¼ˆä¸šåŠ¡å†³å®šï¼‰</li>
</ul>
<p>è°ƒåº¦å™¨åªå…³å¿ƒï¼š</p>
<ul>
<li>è¿™100ä¸ªåˆ†ç‰‡ï¼Œæˆ‘éƒ½è°ƒåº¦åˆ°äº†å—ï¼Ÿ</li>
<li>æ¯ä¸ªåˆ†ç‰‡çš„çŠ¶æ€æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆPENDING/RUNNING/SUCCESS/FAILEDï¼‰</li>
<li>è¶…æ—¶äº†è¦ä¸è¦è¡¥å¿ï¼Ÿ</li>
</ul>
<h2 data-id="heading-8">ä¸‰ã€å›ºå®šåˆ†ç‰‡æ€ä¹ˆè½åœ°</h2>
<h3 data-id="heading-9">åˆ›å»ºçˆ¶å­è®°å½•</h3>
<p>ä»»åŠ¡è§¦å‘æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªçˆ¶è®°å½•å’Œ100ä¸ªå­è®°å½•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä»»åŠ¡è§¦å‘] --&gt; B[åˆ›å»ºçˆ¶è®°å½•&lt;br/&gt;job_execution]
    B --&gt; C[åˆ›å»º100ä¸ªå­è®°å½•&lt;br/&gt;job_sub_execution]
    C --&gt; D[shard_index&lt;br/&gt;0-99]
    
    style A fill:#87CEEB
    style B fill:#90EE90
    style C fill:#90EE90
    style D fill:#FFE4B5
</code></pre>
<p>ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. åˆ›å»ºçˆ¶è®°å½•</span>
<span class="hljs-type">String</span> <span class="hljs-variable">rootTraceId</span> <span class="hljs-operator">=</span> buildRootTraceId(triggerTime);
<span class="hljs-type">Long</span> <span class="hljs-variable">parentExecutionId</span> <span class="hljs-operator">=</span> createParentExecution(job, triggerTime, shardCount, rootTraceId);

<span class="hljs-comment">// 2. æ‰¹é‡åˆ›å»ºå­è®°å½•</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; shardCount; i++) {
    <span class="hljs-type">JobSubExecution</span> <span class="hljs-variable">subExec</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JobSubExecution</span>();
    subExec.setParentExecutionId(parentExecutionId);
    subExec.setShardIndex(i);           <span class="hljs-comment">// å›ºå®šåˆ†ç‰‡ç¼–å·ï¼š0-99</span>
    subExec.setStatus(PENDING);
    subExec.setRetryCount(<span class="hljs-number">0</span>);
    <span class="hljs-comment">// ...</span>
}
jobRepository.batchInsertSubExecutions(subExecutions);
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼šåˆ†ç‰‡åœ¨è°ƒåº¦æ—¶å°±å›ºåŒ–äº†</strong></p>
<p>è¿™ä¸æ˜¯åœ¨æ‰§è¡Œæ—¶ä¸´æ—¶å†³å®š"æˆ‘è¦æ‰«ç¬¬å‡ é¡µ"ï¼Œè€Œæ˜¯åœ¨è°ƒåº¦æ—¶å°±æŠŠè¿™ä¸€è½®çš„è´£ä»»ç©ºé—´åˆ‡æˆ100ç‰‡ï¼Œå›ºåŒ–åˆ°æ•°æ®åº“é‡Œã€‚</p>
<h3 data-id="heading-10">åˆ†é…è°ƒåº¦</h3>
<p>åˆå§‹åˆ†é…é€»è¾‘ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[100ä¸ªåˆ†ç‰‡&lt;br/&gt;PENDINGçŠ¶æ€] --&gt; B[æŸ¥è¯¢æ‰§è¡Œå™¨å®ä¾‹&lt;br/&gt;å‡è®¾3ä¸ª]
    B --&gt; C[åˆå§‹åˆ†é…&lt;br/&gt;minåˆ†ç‰‡æ•°,å®ä¾‹æ•°]
    C --&gt; D[åˆ†ç‰‡0 to å®ä¾‹1]
    C --&gt; E[åˆ†ç‰‡1 to å®ä¾‹2]
    C --&gt; F[åˆ†ç‰‡2 to å®ä¾‹3]
    
    style A fill:#87CEEB
    style B fill:#FFE4B5
    style C fill:#90EE90
    style D fill:#90EE90
    style E fill:#90EE90
    style F fill:#90EE90
</code></pre>
<p>ä»£ç é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆå§‹åˆ†é…ï¼šmin(åˆ†ç‰‡æ•°, å®ä¾‹æ•°) ä¸ªåˆ†ç‰‡</span>
<span class="hljs-type">int</span> <span class="hljs-variable">initialAllocation</span> <span class="hljs-operator">=</span> Math.min(shardCount, instances.size());
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; initialAllocation; i++) {
    allocateAndCallNextShard(parentExecutionId, rootTraceId, job, instances);
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆåªåˆ†é…3ä¸ªï¼Ÿ</strong></p>
<p>å› ä¸ºåç»­æ˜¯å›è°ƒé©±åŠ¨çš„ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">æ‰§è¡Œå™¨<span class="hljs-number">1</span> æ‰§è¡Œå®Œ åˆ†ç‰‡<span class="hljs-number">0</span> â†’ å›è°ƒè°ƒåº¦å™¨
â†’ è°ƒåº¦å™¨åˆ†é… åˆ†ç‰‡<span class="hljs-number">3</span> ç»™æ‰§è¡Œå™¨<span class="hljs-number">1</span>
â†’ æ‰§è¡Œå™¨<span class="hljs-number">1</span> æ‰§è¡Œå®Œ åˆ†ç‰‡<span class="hljs-number">3</span> â†’ å›è°ƒè°ƒåº¦å™¨
â†’ è°ƒåº¦å™¨åˆ†é… åˆ†ç‰‡<span class="hljs-number">6</span> ç»™æ‰§è¡Œå™¨<span class="hljs-number">1</span>
â†’ ...
</code></pre>
<p>è¿™æ ·å°±å®ç°äº†åŠ¨æ€è´Ÿè½½å‡è¡¡ï¼šå¿«çš„æ‰§è¡Œå™¨å¤šå¹²æ´»ï¼Œæ…¢çš„æ‰§è¡Œå™¨å°‘å¹²æ´»ã€‚</p>
<h3 data-id="heading-11">å…·ä½“åˆ†é…é€»è¾‘</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">allocateAndCallNextShard</span><span class="hljs-params">(...)</span> {
    lock.lock();
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 1. æŸ¥è¯¢ä¸‹ä¸€æ¡ PENDING åˆ†ç‰‡</span>
        <span class="hljs-type">JobSubExecution</span> <span class="hljs-variable">nextShard</span> <span class="hljs-operator">=</span> jobRepository.findNextPendingSubExecution(parentExecutionId);
        <span class="hljs-keyword">if</span> (nextShard == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// æ‰€æœ‰åˆ†ç‰‡éƒ½åˆ†é…å®Œäº†</span>
        }

        <span class="hljs-comment">// 2. é€‰æ‹©æ‰§è¡Œå™¨å®ä¾‹ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰</span>
        <span class="hljs-type">ServiceInstance</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> instances.get(nextShard.getShardIndex() % instances.size());
        <span class="hljs-type">String</span> <span class="hljs-variable">executorUrl</span> <span class="hljs-operator">=</span> instance.getUri().toString();
        
        <span class="hljs-comment">// 3. CAS æ›´æ–°çŠ¶æ€ PENDING â†’ RUNNING</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">updated</span> <span class="hljs-operator">=</span> jobRepository.updateSubExecutionWithVersion(
            nextShard.getId(), 
            nextShard.getVersion(), 
            RUNNING, 
            executorUrl,
            LocalDateTime.now()
        );
        
        <span class="hljs-keyword">if</span> (!updated) {
            <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// CAS å¤±è´¥ï¼Œå…¶ä»–å®ä¾‹å·²ç»å¤„ç†äº†</span>
        }
    } <span class="hljs-keyword">finally</span> {
        lock.unlock();
    }

    <span class="hljs-comment">// 4. é”å¤–å¼‚æ­¥è°ƒç”¨æ‰§è¡Œå™¨</span>
    executorService.submit(() -&gt; callExecutor(nextShard, ...));
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<p><strong>å…³é”®ç‚¹ä¸€ï¼šshardIndex æ˜¯å›ºå®šçš„</strong></p>
<p>æ— è®ºä½ ä»Šå¤©æœ‰3ä¸ªå®ä¾‹è¿˜æ˜¯æ˜å¤©æ‰©åˆ°10ä¸ªå®ä¾‹ï¼Œåˆ†ç‰‡ç¼–å·æ°¸è¿œæ˜¯ 0-99ã€‚</p>
<p><strong>å…³é”®ç‚¹äºŒï¼šå®ä¾‹é€‰æ‹©åªæ˜¯è´Ÿè½½å‡è¡¡</strong></p>
<pre><code class="hljs language-diff" lang="diff">shardIndex % instances.size()

3ä¸ªå®ä¾‹æ—¶ï¼š
<span class="hljs-deletion">- åˆ†ç‰‡0,3,6,9... â†’ å®ä¾‹0</span>
<span class="hljs-deletion">- åˆ†ç‰‡1,4,7,10... â†’ å®ä¾‹1</span>
<span class="hljs-deletion">- åˆ†ç‰‡2,5,8,11... â†’ å®ä¾‹2</span>

10ä¸ªå®ä¾‹æ—¶ï¼š
<span class="hljs-deletion">- åˆ†ç‰‡0,10,20... â†’ å®ä¾‹0</span>
<span class="hljs-deletion">- åˆ†ç‰‡1,11,21... â†’ å®ä¾‹1</span>
<span class="hljs-deletion">- ...</span>
</code></pre>
<p>åˆ†ç‰‡çš„ç©ºé—´è¯­ä¹‰å’Œå®ä¾‹æ•°é‡è§£è€¦äº†ã€‚</p>
<h2 data-id="heading-12">å››ã€ä¸ºä»€ä¹ˆå›ºå®šåˆ†ç‰‡æ›´é è°±</h2>
<h3 data-id="heading-13">è¾¹ç•Œç¨³å®š</h3>
<p>å¯¹æ¯”ä¸€ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†é¡µæ–¹æ¡ˆ] --&gt; B[è¾¹ç•ŒæŠ–åŠ¨]
    C[åˆ†ç‰‡æ–¹æ¡ˆ] --&gt; D[è¾¹ç•Œç¨³å®š]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<p><strong>åˆ†é¡µæ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">ä»Šå¤©æ‰«æï¼š
- <span class="hljs-attr">page</span>=<span class="hljs-number">1000</span> æ‹‰åˆ° ID=<span class="hljs-number">100000</span>-<span class="hljs-number">100100</span>
- æ˜å¤©æœ‰è®¢å•è¢«åˆ é™¤
- <span class="hljs-attr">page</span>=<span class="hljs-number">1000</span> æ‹‰åˆ° ID=<span class="hljs-number">100000</span>-<span class="hljs-number">100105</span>ï¼ˆè¾¹ç•Œå˜äº†ï¼‰
</code></pre>
<p><strong>åˆ†ç‰‡æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">shard_0 è´Ÿè´£ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">0</span> çš„è®¢å•

ä»Šå¤©æ‰«æï¼š
- shard_0 æ‹‰åˆ° <span class="hljs-attr">ID</span>=<span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>, ...
- æ˜å¤©æœ‰è®¢å•è¢«åˆ é™¤
- shard_0 è¿˜æ˜¯æ‹‰ orderId % <span class="hljs-attr">100</span> == <span class="hljs-number">0</span> çš„è®¢å•ï¼ˆå½’å±ä¸å˜ï¼‰
</code></pre>
<h3 data-id="heading-14">è¡¥å¿æ›´ç®€å•</h3>
<p>æœ‰äº†å›ºå®šåˆ†ç‰‡ï¼Œè¡¥å¿é€»è¾‘å¾ˆæ¸…æ™°ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[å‘ç°è¶…æ—¶åˆ†ç‰‡] --&gt; B{shard_3&lt;br/&gt;çŠ¶æ€?}
    B --&gt;|PENDING| C[ä»æœªæ‰§è¡Œ&lt;br/&gt;é‡æ–°åˆ†é…]
    B --&gt;|RUNNING| D[è¯¢é—®æ‰§è¡Œå™¨&lt;br/&gt;ç¡®è®¤çŠ¶æ€]
    B --&gt;|FAILED| E{é‡è¯•æ¬¡æ•°?}
    E --&gt;|æœªè¾¾ä¸Šé™| F[CASæ›´æ–°&lt;br/&gt;é‡æ–°æ‰§è¡Œ]
    E --&gt;|è¾¾åˆ°ä¸Šé™| G[æ ‡è®°æœ€ç»ˆå¤±è´¥]
    
    style A fill:#FFB6C1
    style B fill:#FFE4B5
    style C fill:#87CEEB
    style D fill:#87CEEB
    style F fill:#90EE90
    style G fill:#FF6B6B
</code></pre>
<p>è®¾è®¡ç›®æ ‡ä»ï¼š</p>
<pre><code class="hljs">æˆ‘åˆ°åº•æœ‰æ²¡æœ‰æ¼æ‰«æŸä¸€é¡µï¼Ÿï¼ˆæ— æ³•å›ç­”ï¼‰
</code></pre>
<p>å˜æˆäº†ï¼š</p>
<pre><code class="hljs">shard_3 æœ€ç»ˆæ˜¯ SUCCESS è¿˜æ˜¯ FAILEDï¼Ÿï¼ˆæ˜ç¡®çš„ï¼‰
å¦‚æœ FAILEDï¼Œè¡¥å¿å‡ æ¬¡ï¼Ÿï¼ˆå¯æ§çš„ï¼‰
</code></pre>
<h3 data-id="heading-15">å’Œè¶…æ—¶å·¡æ£€å¤©ç„¶ååŒ</h3>
<p>JobFlow çš„è¶…æ—¶å·¡æ£€æ˜¯æŒ‰åˆ†ç‰‡ç²’åº¦çš„ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">è¶…æ—¶å·¡æ£€å‘ç°ï¼š
<span class="hljs-deletion">- shard_0: SUCCESS</span>
<span class="hljs-deletion">- shard_1: SUCCESS</span>
<span class="hljs-deletion">- shard_2: RUNNING è¶…æ—¶</span>
<span class="hljs-deletion">- shard_3: PENDING è¶…æ—¶</span>
<span class="hljs-deletion">- ...</span>

å¤„ç†ï¼š
<span class="hljs-deletion">- shard_2: è¯¢é—®æ‰§è¡Œå™¨ï¼Œç¡®è®¤çŠ¶æ€</span>
<span class="hljs-deletion">- shard_3: é‡æ–°åˆ†é…æ‰§è¡Œ</span>
</code></pre>
<p>å› ä¸ºæœ‰äº†å›ºå®šåˆ†ç‰‡ï¼Œå¯ä»¥åšåˆ°ï¼š</p>
<pre><code class="hljs">éƒ¨åˆ†åˆ†ç‰‡è¶…æ—¶ â†’ å±€éƒ¨è¡¥å¿
è€Œä¸æ˜¯ï¼šæ•´ä½“ä»»åŠ¡å¤±è´¥ â†’ å…¨éƒ¨é‡æ¥
</code></pre>
<h3 data-id="heading-16">æ•´ä½“æµç¨‹å¯¹æ¯”</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†é¡µæ–¹æ¡ˆ&lt;br/&gt;è¾¹ç•ŒåŠ¨æ€] --&gt; B[ä¸çŸ¥é“&lt;br/&gt;ä¸‹ä¸€é¡µåœ¨å“ª]
    C[åˆ†ç‰‡æ–¹æ¡ˆ&lt;br/&gt;è¾¹ç•Œå›ºå®š] --&gt; D[100ä¸ªåˆ†ç‰‡&lt;br/&gt;çŠ¶æ€æ˜ç¡®]
    
    style A fill:#FFB6C1
    style B fill:#FF6B6B
    style C fill:#87CEEB
    style D fill:#90EE90
</code></pre>
<h2 data-id="heading-17">äº”ã€ä¸šåŠ¡ä¾§æ€ä¹ˆç”¨</h2>
<h3 data-id="heading-18">æ‰§è¡Œå™¨å®ç°</h3>
<p>ä¸šåŠ¡ä¾§åªéœ€è¦å®ç°åˆ†ç‰‡å†…éƒ¨çš„å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@JobHandler("orderSync")</span>
<span class="hljs-keyword">public</span> JobResult <span class="hljs-title function_">syncOrders</span><span class="hljs-params">(JobContext context)</span> {
    <span class="hljs-comment">// 1. ä»ä¸Šä¸‹æ–‡æ‹¿åˆ°åˆ†ç‰‡ä¿¡æ¯</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">shardIndex</span> <span class="hljs-operator">=</span> context.getShardIndex();
    <span class="hljs-type">int</span> <span class="hljs-variable">shardCount</span> <span class="hljs-operator">=</span> context.getShardCount();
    
    <span class="hljs-comment">// 2. æ ¹æ®åˆ†ç‰‡ç­–ç•¥æŸ¥è¯¢æ•°æ®</span>
    List&lt;Order&gt; orders = orderDao.findByShardIndex(shardIndex, shardCount);
    
    <span class="hljs-comment">// 3. å¤„ç†ä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-keyword">for</span> (Order order : orders) {
        <span class="hljs-comment">// å¯¹è´¦ã€åŒæ­¥ã€æ¸…ç†...</span>
    }
    
    <span class="hljs-keyword">return</span> JobResult.success();
}
</code></pre>
<p><strong>åˆ†ç‰‡ç­–ç•¥ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MOD_HASH ç­–ç•¥</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findByShardIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> shardIndex, <span class="hljs-type">int</span> shardCount)</span> {
    <span class="hljs-keyword">return</span> jdbcTemplate.query(
        <span class="hljs-string">"SELECT * FROM orders WHERE id % ? = ?"</span>,
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{shardCount, shardIndex},
        rowMapper
    );
}

<span class="hljs-comment">// RANGE ç­–ç•¥</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findByShardIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> shardIndex, <span class="hljs-type">int</span> shardCount)</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">totalCount</span> <span class="hljs-operator">=</span> getTotalCount();
    <span class="hljs-type">long</span> <span class="hljs-variable">rangeSize</span> <span class="hljs-operator">=</span> totalCount / shardCount;
    <span class="hljs-type">long</span> <span class="hljs-variable">startId</span> <span class="hljs-operator">=</span> shardIndex * rangeSize;
    <span class="hljs-type">long</span> <span class="hljs-variable">endId</span> <span class="hljs-operator">=</span> (shardIndex + <span class="hljs-number">1</span>) * rangeSize;
    
    <span class="hljs-keyword">return</span> jdbcTemplate.query(
        <span class="hljs-string">"SELECT * FROM orders WHERE id &gt;= ? AND id &lt; ?"</span>,
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{startId, endId},
        rowMapper
    );
}
</code></pre>
<h3 data-id="heading-19">è‡ªå®šä¹‰ç­–ç•¥</h3>
<p>å¦‚æœå†…ç½®ç­–ç•¥ä¸æ»¡è¶³éœ€æ±‚ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŒ‰åœ°åŒºåˆ†ç‰‡</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findByShardIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> shardIndex, <span class="hljs-type">int</span> shardCount)</span> {
    <span class="hljs-comment">// 100ä¸ªåˆ†ç‰‡ï¼Œå‰50ä¸ªæ˜¯åä¸œï¼Œå50ä¸ªæ˜¯åå—</span>
    <span class="hljs-keyword">if</span> (shardIndex &lt; <span class="hljs-number">50</span>) {
        <span class="hljs-keyword">return</span> findByRegion(<span class="hljs-string">"åä¸œ"</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> findByRegion(<span class="hljs-string">"åå—"</span>);
    }
}

<span class="hljs-comment">// æŒ‰æ—¶é—´åˆ†ç‰‡</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findByShardIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> shardIndex, <span class="hljs-type">int</span> shardCount)</span> {
    <span class="hljs-comment">// 100ä¸ªåˆ†ç‰‡ï¼Œæ¯ç‰‡è´Ÿè´£ä¸€ä¸ªå°æ—¶</span>
    <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> baseTime.plusHours(shardIndex);
    <span class="hljs-type">LocalDateTime</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> startTime.plusHours(<span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">return</span> findByTimeRange(startTime, endTime);
}
</code></pre>
<p>ä¸šåŠ¡æœ‰å®Œå…¨çš„çµæ´»æ€§ï¼Œè°ƒåº¦å™¨ä¸å…³å¿ƒå…·ä½“æ€ä¹ˆåˆ†ã€‚</p>
<h2 data-id="heading-20">å…­ã€ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­</h2>
<p>å‡è®¾è®¢å•å¯¹è´¦ä»»åŠ¡ï¼Œé…ç½® 100 ä¸ªåˆ†ç‰‡ï¼š</p>
<h3 data-id="heading-21">ç¬¬ä¸€æ­¥ï¼šé…ç½®ä»»åŠ¡</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> job_definition (name, service_name, handler, cron, shard_count, shard_strategy)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'orderSync'</span>, <span class="hljs-string">'order-service'</span>, <span class="hljs-string">'orderSync'</span>, <span class="hljs-string">'0 2 * * *'</span>, <span class="hljs-number">100</span>, <span class="hljs-string">'MOD_HASH'</span>);
</code></pre>
<h3 data-id="heading-22">ç¬¬äºŒæ­¥ï¼šè°ƒåº¦å™¨è§¦å‘</h3>
<pre><code class="hljs">å‡Œæ™¨2ç‚¹ï¼Œè°ƒåº¦å™¨æ‰«æåˆ°ä»»åŠ¡åˆ°æœŸ
â†’ åˆ›å»ºçˆ¶è®°å½•ï¼ˆtraceId: 20241222020000-abc123ï¼‰
â†’ åˆ›å»º100ä¸ªå­è®°å½•ï¼ˆshard_0 - shard_99ï¼ŒçŠ¶æ€ PENDINGï¼‰
â†’ åˆå§‹åˆ†é…3ä¸ªåˆ†ç‰‡ç»™3ä¸ªæ‰§è¡Œå™¨å®ä¾‹
</code></pre>
<h3 data-id="heading-23">ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œå™¨å¤„ç†</h3>
<pre><code class="hljs language-ini" lang="ini">æ‰§è¡Œå™¨1 æ”¶åˆ°è¯·æ±‚ï¼š
- <span class="hljs-attr">shardIndex</span> = <span class="hljs-number">0</span>
- <span class="hljs-attr">shardCount</span> = <span class="hljs-number">100</span>
â†’ æŸ¥è¯¢ï¼šSELECT * FROM orders WHERE id % <span class="hljs-attr">100</span> = <span class="hljs-number">0</span>
â†’ å¤„ç†è¿™äº›è®¢å•
â†’ å›è°ƒè°ƒåº¦å™¨ï¼šshard_0 SUCCESS

è°ƒåº¦å™¨æ”¶åˆ°å›è°ƒï¼š
â†’ æ›´æ–° shard_0 çŠ¶æ€ä¸º SUCCESS
â†’ åˆ†é…ä¸‹ä¸€ä¸ª PENDING åˆ†ç‰‡ï¼ˆshard_3ï¼‰ç»™æ‰§è¡Œå™¨1
â†’ æ‰§è¡Œå™¨1 ç»§ç»­å¤„ç† shard_3
</code></pre>
<h3 data-id="heading-24">ç¬¬å››æ­¥ï¼šå¾ªç¯ç›´åˆ°å®Œæˆ</h3>
<pre><code class="hljs language-diff" lang="diff">æ‰§è¡Œå™¨1, 2, 3 ä¸æ–­ï¼š
<span class="hljs-deletion">- æ‰§è¡Œåˆ†ç‰‡</span>
<span class="hljs-deletion">- å›è°ƒè°ƒåº¦å™¨</span>
<span class="hljs-deletion">- è·å–æ–°åˆ†ç‰‡</span>
<span class="hljs-deletion">- ç»§ç»­æ‰§è¡Œ</span>

ç›´åˆ°æ‰€æœ‰100ä¸ªåˆ†ç‰‡éƒ½æ˜¯ SUCCESS çŠ¶æ€
</code></pre>
<h3 data-id="heading-25">ç¬¬äº”æ­¥ï¼šå¼‚å¸¸å¤„ç†</h3>
<pre><code class="hljs language-sql" lang="sql">å¦‚æœ shard_5 æ‰§è¡Œå¤±è´¥ï¼š
â†’ çŠ¶æ€æ ‡è®°ä¸º FAILED
â†’ å·¡æ£€ä»»åŠ¡å‘ç°
â†’ CAS æ›´æ–°çŠ¶æ€ FAILED â†’ <span class="hljs-keyword">RUNNING</span>
â†’ é‡æ–°åˆ†é…ç»™æŸä¸ªæ‰§è¡Œå™¨
â†’ æœ€å¤šé‡è¯•<span class="hljs-number">3</span>æ¬¡

å¦‚æœ shard_8 ä¸€ç›´ <span class="hljs-keyword">RUNNING</span> ä¸å›è°ƒï¼š
â†’ è¶…æ—¶å·¡æ£€å‘ç°
â†’ HTTP è¯¢é—®æ‰§è¡Œå™¨çŠ¶æ€
â†’ æ ¹æ®è¿”å›ç»“æœå†³å®šï¼šç»§ç»­ç­‰ <span class="hljs-operator">/</span> æ ‡è®°è¶…æ—¶ <span class="hljs-operator">/</span> æ›´æ–°çŠ¶æ€
</code></pre>
<h2 data-id="heading-26">ä¸ƒã€å›ºå®šåˆ†ç‰‡çš„æœ¬è´¨</h2>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<pre><code class="hljs">åˆ†é¡µæ¨¡å‹ï¼šæˆ‘åœ¨è¿½ä¸€ä¸ªç§»åŠ¨çš„é¶å­
åˆ†ç‰‡æ¨¡å‹ï¼šæˆ‘åœ¨è´Ÿè´£ä¸€å—å›ºå®šçš„ç©ºé—´
</code></pre>
<p>æŠ€æœ¯ä¸Šçš„å·®å¼‚ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åˆ†é¡µæ¨¡å‹] --&gt; B[ä¸´æ—¶è§†å›¾]
    B --&gt; C[è¾¹ç•ŒåŠ¨æ€]
    C --&gt; D[è¡¥å¿å›°éš¾]
    
    E[åˆ†ç‰‡æ¨¡å‹] --&gt; F[æ°¸ä¹…è´£ä»»åŸŸ]
    F --&gt; G[è¾¹ç•Œç¨³å®š]
    G --&gt; H[è¡¥å¿ç®€å•]
    
    style A fill:#FFB6C1
    style D fill:#FF6B6B
    style E fill:#87CEEB
    style H fill:#90EE90
</code></pre>
<p>è®¾è®¡ä¸Šçš„æœ¬è´¨ï¼š</p>
<p><strong>åˆ†é¡µæ¨¡å‹ï¼š</strong></p>
<ul>
<li>æŠŠæ•°æ®å½“æˆä¸€ä¸ªä¸æ–­å˜åŒ–çš„åˆ—è¡¨</li>
<li>ç”¨"é¡µå· + å½“å‰å¿«ç…§"æè¿°è¿›åº¦</li>
<li>å¿«ç…§åœ¨å˜ï¼Œè¾¹ç•Œä¹Ÿåœ¨å˜</li>
</ul>
<p><strong>åˆ†ç‰‡æ¨¡å‹ï¼š</strong></p>
<ul>
<li>æŠŠæ•°æ®ç©ºé—´å½“æˆä¸€ä¸ªç¨³å®šçš„åæ ‡ç³»</li>
<li>åˆ†ç‰‡æ˜¯åæ ‡ç³»ä¸Šçš„åˆ†åŒº</li>
<li>æ¯ä¸ªåˆ†åŒºæœ‰ä¸€ä¸ªè°ƒåº¦è´£ä»»äºº</li>
</ul>
<p><strong>æ ¸å¿ƒåŒºåˆ«ï¼š</strong></p>
<p>åˆ†é¡µé—®çš„æ˜¯ï¼š"ç°åœ¨è¿˜æœ‰æ²¡æœ‰ç¬¬1001é¡µï¼Ÿ"ï¼ˆé—®é¢˜æœ¬èº«æ˜¯é”™çš„ï¼‰</p>
<p>åˆ†ç‰‡è¯´çš„æ˜¯ï¼š"è¿™ä¸€è½®çš„100ç‰‡ï¼Œæˆ‘éƒ½è´Ÿè´£åˆ°åº•äº†ã€‚"ï¼ˆè´£ä»»æ˜ç¡®ï¼‰</p>
<h2 data-id="heading-27">å…«ã€æ€»ç»“</h2>
<p>å›ºå®šåˆ†ç‰‡ä¸æ˜¯ä»€ä¹ˆé«˜æ·±çš„æŠ€æœ¯ï¼Œä»£ç ä¹Ÿä¸å¤æ‚ã€‚</p>
<p>ä½†å®ƒè§£å†³çš„æ˜¯ä¸€ä¸ªè®¤çŸ¥é—®é¢˜ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ä½ è¦å…ˆæ„è¯†åˆ°<span class="hljs-string">"é—®ç¬¬å‡ é¡µ"</span>è¿™ä¸ªé—®é¢˜æœ¬èº«æ˜¯é”™çš„
ç„¶åæ‰èƒ½æŠŠæ€ç»´æ¨¡å‹åˆ‡æ¢åˆ°<span class="hljs-string">"ç©ºé—´åˆ†ç‰‡ + å›ºå®šè´£ä»»åŸŸ"</span>
</code></pre>
<p>JobFlow çš„å›ºå®šåˆ†ç‰‡è®¾è®¡å¸¦æ¥çš„å¥½å¤„ï¼š</p>
<p><strong>å¥½å¤„ä¸€ï¼šè¾¹ç•Œç¨³å®š</strong></p>
<ul>
<li>åˆ†ç‰‡å½’å±ç”±å›ºå®šè§„åˆ™å†³å®š</li>
<li>æ•°æ®å˜æ›´ä¸å½±å“åˆ†ç‰‡ç¼–å·</li>
<li>è¡¥å¿æœ‰æ˜ç¡®çš„ç©ºé—´è½½ä½“</li>
</ul>
<p><strong>å¥½å¤„äºŒï¼šè´£ä»»æ¸…æ™°</strong></p>
<ul>
<li>æ¯ä¸ªåˆ†ç‰‡éƒ½æœ‰æ˜ç¡®çš„çŠ¶æ€</li>
<li>è°ƒåº¦å™¨çŸ¥é“æ¯ç‰‡æ˜¯å¦æ‰§è¡ŒæˆåŠŸ</li>
<li>è¶…æ—¶ã€å¤±è´¥ã€è¡¥å¿éƒ½æœ‰æ®å¯æŸ¥</li>
</ul>
<p><strong>å¥½å¤„ä¸‰ï¼šååŒè‡ªç„¶</strong></p>
<ul>
<li>å’Œè¶…æ—¶å·¡æ£€å¤©ç„¶ååŒ</li>
<li>å’Œå›è°ƒé©±åŠ¨å¤©ç„¶ååŒ</li>
<li>å’ŒåŠ¨æ€è´Ÿè½½å‡è¡¡å¤©ç„¶ååŒ</li>
</ul>
<p><strong>å¥½å¤„å››ï¼šä¸šåŠ¡çµæ´»</strong></p>
<ul>
<li>ä¸šåŠ¡å†³å®šåˆ†ç‰‡ç­–ç•¥</li>
<li>ä¸šåŠ¡å†³å®šæŸ¥è¯¢æ–¹å¼</li>
<li>è°ƒåº¦å™¨åªç®¡è°ƒåº¦å’ŒçŠ¶æ€</li>
</ul>
<p>ä»å·¥ç¨‹è§’åº¦çœ‹ï¼Œè¿™ä¸æ˜¯"å†™ä¸å‡ºæ¥çš„é«˜éš¾åº¦ä»£ç "ï¼Œè€Œæ˜¯<strong>åœ¨æ­£ç¡®çš„æŠ½è±¡å±‚ä¸Šé‡æ–°å®šä¹‰äº†è¾¹ç•Œ</strong>ã€‚</p>
<p>å¯¹ä¸€ä¸ªåˆ†å¸ƒå¼è°ƒåº¦ç³»ç»Ÿæ¥è¯´ï¼Œè¿™ç§è¾¹ç•Œçº§åˆ«çš„è®¾è®¡ï¼Œæ¯”ä»»ä½•ä¸€è¡ŒæŠ€å·§æ€§çš„ä»£ç éƒ½æ›´å€¼é’±ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7588064253635330102</link>    <guid>https://juejin.cn/post/7588064253635330102</guid>    <pubDate>2025-12-27T01:49:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253635330102" data-draft-id="7588064253635313718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-12-27T01:49:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:49:49.000Z" title="Sat Dec 27 2025 01:49:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    23
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ†å¸ƒå¼äº‹åŠ¡æœ¬åœ°æ¶ˆæ¯è¡¨è¯¦è§£ï¼šä¸­å°å›¢é˜Ÿçš„ä½ä¾µå…¥è½åœ°æ–¹æ¡ˆ</h2>
<p>åœ¨åˆ†å¸ƒå¼äº‹åŠ¡é¢†åŸŸï¼Œå¾ˆå¤šä¸­å°å›¢é˜Ÿé¢ä¸´ä¸€ä¸ªå…±æ€§å›°å¢ƒï¼šæ—¢éœ€è¦è§£å†³è·¨æœåŠ¡æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼ˆå¦‚è®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†ã€æ”¯ä»˜æˆåŠŸåæ›´æ–°ç‰©æµçŠ¶æ€ï¼‰ï¼Œåˆæ— æ³•æ‰¿æ‹…TCCã€SAGAæ¨¡å¼çš„é«˜å¼€å‘æˆæœ¬ï¼Œä¹Ÿä¸æ»¡è¶³2PC/3PCå¯¹â€œçŸ­äº‹åŠ¡ã€ä½å¹¶å‘â€çš„é™åˆ¶ã€‚æ­¤æ—¶ï¼Œâ€œæœ¬åœ°æ¶ˆæ¯è¡¨+æ¶ˆæ¯é˜Ÿåˆ—â€çš„æ–¹æ¡ˆè„±é¢–è€Œå‡ºâ€”â€”å®ƒåŸºäºâ€œæœ¬åœ°äº‹åŠ¡+å¼‚æ­¥é‡è¯•â€çš„æ ¸å¿ƒæ€è·¯ï¼Œå®ç°äº†ä½ä¾µå…¥ã€ä½å¤æ‚åº¦ã€é«˜å¯ç”¨çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œæˆä¸ºä¸­å°å›¢é˜Ÿå’Œç®€å•å¼‚æ­¥åœºæ™¯çš„é¦–é€‰åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±å…¨é¢æ‹†è§£æœ¬åœ°æ¶ˆæ¯è¡¨çš„è®¾è®¡é€»è¾‘ã€æ‰§è¡Œæµç¨‹ã€ä¼˜ç¼ºç‚¹åŠè½åœ°è¦ç‚¹ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é“ºå«ï¼šä¸­å°å›¢é˜Ÿçš„åˆ†å¸ƒå¼äº‹åŠ¡ç—›ç‚¹ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨çš„è¯ç”ŸèƒŒæ™¯</h3>
<p>ä¸­å°å›¢é˜Ÿåœ¨è½åœ°åˆ†å¸ƒå¼äº‹åŠ¡æ—¶ï¼Œæ ¸å¿ƒç—›ç‚¹å¾€å¾€ä¸æ˜¯â€œæŠ€æœ¯å…ˆè¿›æ€§â€ï¼Œè€Œæ˜¯â€œä½æˆæœ¬ã€ä½ä¾µå…¥ã€æ˜“ç»´æŠ¤â€ã€‚ä¼ ç»Ÿæ–¹æ¡ˆçš„çŸ­æ¿æ°å¥½å‡»ä¸­äº†è¿™äº›ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>2PC/3PCï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</strong> ï¼šæ€§èƒ½å·®ã€é˜»å¡é£é™©é«˜ï¼Œä»…é€‚åˆä½å¹¶å‘åœºæ™¯ï¼›ä¾èµ–èµ„æºå±‚äº‹åŠ¡æ”¯æŒï¼Œæ— æ³•é€‚é…å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯ï¼ˆå¦‚è®¢å•åˆ›å»ºåå¼‚æ­¥å‘é€šçŸ¥ï¼‰ã€‚</li>
<li><strong>TCCï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</strong> ï¼šä¸šåŠ¡ä¾µå…¥æ€§æå¼ºï¼Œéœ€æ”¹é€ æ‰€æœ‰å‚ä¸æœåŠ¡çš„æ¥å£ï¼ˆå®ç°Try/Confirm/Cancelï¼‰ï¼Œå¼€å‘ç»´æŠ¤æˆæœ¬é«˜ï¼›å¯¹å›¢é˜ŸæŠ€æœ¯èƒ½åŠ›è¦æ±‚é«˜ï¼Œä¸­å°å›¢é˜Ÿéš¾ä»¥é©¾é©­ã€‚</li>
<li><strong>SAGAï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</strong> ï¼šè™½ä¾µå…¥æ€§ä½äºTCCï¼Œä½†å¤æ‚æµç¨‹çš„åè°ƒé€»è¾‘å’Œè¡¥å¿äº‹åŠ¡è®¾è®¡ä»éœ€è¾ƒé«˜æˆæœ¬ï¼›é€‚åˆé•¿äº‹åŠ¡ï¼Œå¯¹ç®€å•å¼‚æ­¥åœºæ™¯ï¼ˆå¦‚â€œæ“ä½œ+é€šçŸ¥â€ï¼‰è€Œè¨€è¿‡äºåšé‡ã€‚</li>
</ul>
<p>ä¸­å°å›¢é˜Ÿçš„æ ¸å¿ƒéœ€æ±‚æ˜¯ï¼š<strong>ä½ä»£ç æ”¹é€ ã€ä½å¼€å‘æˆæœ¬ã€é«˜å¯ç”¨æ€§ã€é€‚é…ç®€å•å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯</strong>ã€‚æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆæ­£æ˜¯åŸºäºè¿™ä¸€éœ€æ±‚è®¾è®¡çš„â€”â€”å®ƒä¸ä¾èµ–å¤æ‚æ¡†æ¶ï¼Œä»…é€šè¿‡â€œæ•°æ®åº“æœ¬åœ°äº‹åŠ¡+æ¶ˆæ¯é˜Ÿåˆ—é‡è¯•â€çš„ç»„åˆï¼Œå°±èƒ½è§£å†³å¤§éƒ¨åˆ†ç®€å•å¼‚æ­¥åœºæ™¯çš„åˆ†å¸ƒå¼äº‹åŠ¡é—®é¢˜ï¼Œå®ç°â€œä¸šåŠ¡æ“ä½œâ€ä¸â€œè·¨æœåŠ¡é€šçŸ¥â€çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-2">äºŒã€æœ¬åœ°æ¶ˆæ¯è¡¨æ ¸å¿ƒå®šä¹‰ï¼šä»€ä¹ˆæ˜¯â€œæœ¬åœ°äº‹åŠ¡+æ¶ˆæ¯é˜Ÿåˆ—â€æ–¹æ¡ˆï¼Ÿ</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„æ ¸å¿ƒå®šä¹‰æ˜¯ï¼š<strong>å°†åˆ†å¸ƒå¼äº‹åŠ¡æ‹†åˆ†ä¸ºâ€œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡â€å’Œâ€œå¼‚æ­¥æ¶ˆæ¯é€šçŸ¥â€ä¸¤ä¸ªéƒ¨åˆ†ï¼Œé€šè¿‡åœ¨ä¸šåŠ¡åº“ä¸­æ–°å¢â€œæœ¬åœ°æ¶ˆæ¯è¡¨â€ï¼Œå°†â€œä¸šåŠ¡æ“ä½œâ€ä¸â€œæ¶ˆæ¯å†™å…¥â€å°è£…åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œä¿è¯ä¸¤è€…åŸå­æ€§ï¼ˆè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼‰ï¼›ä¹‹åé€šè¿‡å®šæ—¶ä»»åŠ¡æ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œå°†æœªæŠ•é€’çš„æ¶ˆæ¯æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼›æ¥æ”¶æ–¹æ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œï¼›è‹¥æ¶ˆè´¹å¤±è´¥ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—çš„é‡è¯•æœºåˆ¶é‡å¤æŠ•é€’ï¼Œç›´è‡³æ¶ˆè´¹æˆåŠŸï¼Œæœ€ç»ˆå®ç°è·¨æœåŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</p>
<p>æ ¸å¿ƒç»„æˆè¦ç´ ï¼ˆæç®€è®¾è®¡ï¼Œæ— å¤æ‚è§’è‰²ï¼‰ï¼š</p>
<ol>
<li><strong>æœ¬åœ°æ¶ˆæ¯è¡¨</strong>ï¼šå­˜å‚¨åœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ï¼Œç”¨äºè®°å½•éœ€è¦å¼‚æ­¥æŠ•é€’çš„æ¶ˆæ¯ï¼Œæ ¸å¿ƒå­—æ®µåŒ…æ‹¬ï¼šæ¶ˆæ¯IDï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰ã€æ¶ˆæ¯å†…å®¹ï¼ˆå¦‚è®¢å•IDã€ç”¨æˆ·IDï¼‰ã€æ¶ˆæ¯çŠ¶æ€ï¼ˆå¾…æŠ•é€’/å·²æŠ•é€’/å·²æ¶ˆè´¹/å¤±è´¥ï¼‰ã€åˆ›å»ºæ—¶é—´ã€æŠ•é€’æ¬¡æ•°ã€ä¸‹æ¬¡æŠ•é€’æ—¶é—´ç­‰ï¼›æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡è¡¨åœ¨åŒä¸€ä¸ªæ•°æ®åº“ï¼Œç¡®ä¿æœ¬åœ°äº‹åŠ¡åŸå­æ€§ã€‚</li>
<li><strong>æœ¬åœ°ä¸šåŠ¡äº‹åŠ¡</strong>ï¼šå‘èµ·æ–¹çš„æ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼ˆå¦‚åˆ›å»ºè®¢å•ã€æ‰£å‡ä½™é¢ï¼‰ï¼Œä¸â€œå†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨â€çš„æ“ä½œå°è£…åœ¨åŒä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œä¿è¯ä¸¤è€…åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ã€‚</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMQï¼‰</strong> ï¼šç”¨äºå¼‚æ­¥ä¼ é€’æ¶ˆæ¯ï¼ˆå¦‚RabbitMQã€RocketMQã€Kafkaï¼‰ï¼Œæ‰¿æ¥æœ¬åœ°æ¶ˆæ¯è¡¨çš„æ¶ˆæ¯æŠ•é€’ï¼Œä¸ºæ¥æ”¶æ–¹æä¾›å¼‚æ­¥æ¶ˆè´¹èƒ½åŠ›ï¼›ä¾èµ–æ¶ˆæ¯é˜Ÿåˆ—çš„â€œæŒä¹…åŒ–â€å’Œâ€œé‡è¯•æœºåˆ¶â€ï¼Œä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ã€æ¶ˆè´¹å¤±è´¥å¯é‡è¯•ã€‚</li>
<li><strong>å®šæ—¶ä»»åŠ¡ï¼ˆæ¶ˆæ¯æŠ•é€’å™¨ï¼‰</strong> ï¼šå®šæœŸæ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ä¸­â€œå¾…æŠ•é€’â€çŠ¶æ€çš„æ¶ˆæ¯ï¼Œå°†å…¶æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼›è‹¥æŠ•é€’å¤±è´¥ï¼ˆå¦‚MQå®•æœºï¼‰ï¼Œè®°å½•æŠ•é€’æ¬¡æ•°å’Œä¸‹æ¬¡æŠ•é€’æ—¶é—´ï¼Œä¸‹æ¬¡ç»§ç»­é‡è¯•ã€‚</li>
</ol>
<p>æ ¸å¿ƒè§’è‰²ï¼ˆè§’è‰²æç®€ï¼Œæ˜“ç»´æŠ¤ï¼‰ï¼š</p>
<ul>
<li><strong>äº‹åŠ¡å‘èµ·æ–¹</strong>ï¼šæ‰§è¡Œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡ï¼Œå†™å…¥æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡æŠ•é€’æ¶ˆæ¯ï¼›</li>
<li><strong>äº‹åŠ¡æ¥æ”¶æ–¹</strong>ï¼šæ¶ˆè´¹æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œï¼ˆå¦‚åˆ›å»ºç§¯åˆ†è®°å½•ã€æ›´æ–°ç‰©æµçŠ¶æ€ï¼‰ï¼›</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆä¸­é—´ä»¶ï¼‰</strong> ï¼šè´Ÿè´£æ¶ˆæ¯çš„å­˜å‚¨ã€ä¼ é€’å’Œé‡è¯•ï¼Œæ˜¯å¼‚æ­¥é€šä¿¡çš„æ ¸å¿ƒè½½ä½“ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¸‰ã€æœ¬åœ°æ¶ˆæ¯è¡¨å®Œæ•´æµç¨‹æ‹†è§£ï¼šä»¥â€œè®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†â€ä¸ºä¾‹</h3>
<p>æˆ‘ä»¬ä»¥â€œç”µå•†è®¢å•åˆ›å»ºåï¼Œå¼‚æ­¥åŒæ­¥ç”¨æˆ·ç§¯åˆ†ï¼ˆè®¢å•æœåŠ¡â†’ç§¯åˆ†æœåŠ¡ï¼‰â€çš„ç»å…¸åœºæ™¯ä¸ºä¾‹ï¼Œæ‹†è§£æœ¬åœ°æ¶ˆæ¯è¡¨çš„å®Œæ•´æ‰§è¡Œæµç¨‹ï¼Œç›´è§‚ç†è§£æ¯ä¸ªç¯èŠ‚çš„å…·ä½“æ“ä½œï¼š</p>
<p>ä¸šåŠ¡éœ€æ±‚ï¼šç”¨æˆ·åˆ›å»ºè®¢å•ï¼ˆè®¢å•æœåŠ¡ï¼‰åï¼Œç§¯åˆ†æœåŠ¡éœ€ä¸ºç”¨æˆ·å¢åŠ å¯¹åº”ç§¯åˆ†ï¼Œç¡®ä¿â€œè®¢å•åˆ›å»ºæˆåŠŸâ€ä¸â€œç§¯åˆ†å¢åŠ æˆåŠŸâ€æœ€ç»ˆä¸€è‡´ï¼ˆå…è®¸çŸ­æš‚å»¶è¿Ÿï¼‰ã€‚</p>
<h4 data-id="heading-4">å‰ç½®å‡†å¤‡ï¼šåˆ›å»ºæœ¬åœ°æ¶ˆæ¯è¡¨</h4>
<p>åœ¨è®¢å•æœåŠ¡çš„ä¸šåŠ¡æ•°æ®åº“ä¸­ï¼Œæ–°å¢â€œlocal_messageâ€æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œè¡¨ç»“æ„ç¤ºä¾‹ï¼ˆMySQLï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `local_message` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `message_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å”¯ä¸€IDï¼ˆUUIDï¼‰'</span>,
  `message_content` text <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯å†…å®¹ï¼ˆJSONæ ¼å¼ï¼Œå¦‚{"order_id":"123","user_id":"456","points":10}ï¼‰'</span>,
  `message_status` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'æ¶ˆæ¯çŠ¶æ€ï¼š0-å¾…æŠ•é€’ï¼Œ1-å·²æŠ•é€’ï¼Œ2-å·²æ¶ˆè´¹ï¼Œ3-æŠ•é€’å¤±è´¥'</span>,
  `delivery_count` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'å·²æŠ•é€’æ¬¡æ•°'</span>,
  `next_delivery_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸‹æ¬¡æŠ•é€’æ—¶é—´'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `update_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_message_id` (`message_id`),
  INDEX `idx_message_status` (`message_status`),
  INDEX `idx_next_delivery_time` (`next_delivery_time`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'æœ¬åœ°æ¶ˆæ¯è¡¨'</span>;
</code></pre>
<h4 data-id="heading-5">é˜¶æ®µ1ï¼šæ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼ˆä¸šåŠ¡æ“ä½œ+å†™å…¥æ¶ˆæ¯è¡¨ï¼‰</h4>
<p>è®¢å•æœåŠ¡åœ¨åˆ›å»ºè®¢å•æ—¶ï¼Œå°†â€œåˆ›å»ºè®¢å•â€å’Œâ€œå†™å…¥ç§¯åˆ†åŒæ­¥æ¶ˆæ¯â€å°è£…åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­ï¼Œä¿è¯åŸå­æ€§ï¼š</p>
<ol>
<li>ç”¨æˆ·å‘èµ·åˆ›å»ºè®¢å•è¯·æ±‚ï¼Œè®¢å•æœåŠ¡å¼€å¯æ•°æ®åº“äº‹åŠ¡ï¼›</li>
<li>æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼šå‘â€œorderâ€è¡¨æ’å…¥è®¢å•è®°å½•ï¼ˆçŠ¶æ€ä¸ºâ€œå·²åˆ›å»ºâ€ï¼‰ï¼›</li>
<li>æ‰§è¡Œæ¶ˆæ¯å†™å…¥æ“ä½œï¼šç”Ÿæˆå”¯ä¸€æ¶ˆæ¯IDï¼Œå‘â€œlocal_messageâ€è¡¨æ’å…¥ä¸€æ¡æ¶ˆæ¯ï¼ˆæ¶ˆæ¯å†…å®¹ä¸ºè®¢å•IDã€ç”¨æˆ·IDã€ç§¯åˆ†å€¼ç­‰ï¼ŒçŠ¶æ€ä¸ºâ€œ0-å¾…æŠ•é€’â€ï¼Œä¸‹æ¬¡æŠ•é€’æ—¶é—´ä¸ºå½“å‰æ—¶é—´+10ç§’ï¼‰ï¼›</li>
<li>æäº¤æ•°æ®åº“äº‹åŠ¡ï¼šè‹¥æ­¥éª¤2å’Œ3å‡æˆåŠŸï¼Œäº‹åŠ¡æäº¤ï¼Œè®¢å•åˆ›å»ºæˆåŠŸä¸”æ¶ˆæ¯å†™å…¥æˆåŠŸï¼›è‹¥ä»»æ„ä¸€æ­¥å¤±è´¥ï¼ˆå¦‚è®¢å•å‚æ•°é”™è¯¯ã€æ•°æ®åº“å¼‚å¸¸ï¼‰ï¼Œäº‹åŠ¡å›æ»šï¼Œè®¢å•å’Œæ¶ˆæ¯å‡ä¸ç”Ÿæ•ˆï¼Œæ— æ•°æ®ä¸ä¸€è‡´ã€‚</li>
</ol>
<h4 data-id="heading-6">é˜¶æ®µ2ï¼šå®šæ—¶ä»»åŠ¡æŠ•é€’æ¶ˆæ¯åˆ°MQ</h4>
<p>è®¢å•æœåŠ¡å¯åŠ¨å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯10ç§’æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼Œæ‰«ææœ¬åœ°æ¶ˆæ¯è¡¨ä¸­â€œå¾…æŠ•é€’â€ä¸”â€œä¸‹æ¬¡æŠ•é€’æ—¶é—´â‰¤å½“å‰æ—¶é—´â€çš„æ¶ˆæ¯ï¼Œå°†å…¶æŠ•é€’åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RocketMQçš„â€œorder_to_points_topicâ€ä¸»é¢˜ï¼‰ï¼š</p>
<ol>
<li>
<p>å®šæ—¶ä»»åŠ¡æŸ¥è¯¢æœ¬åœ°æ¶ˆæ¯è¡¨ï¼š<code>SELECT * FROM local_message WHERE message_status=0 AND next_delivery_time â‰¤ NOW()</code>ï¼›</p>
</li>
<li>
<p>éå†æŸ¥è¯¢ç»“æœï¼Œå‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€æ¶ˆæ¯ï¼ˆæ¶ˆæ¯å†…å®¹ä¸ºlocal_messageè¡¨ä¸­çš„message_contentï¼‰ï¼›</p>
</li>
<li>
<p>å¤„ç†æŠ•é€’ç»“æœï¼š</p>
<ol>
<li>è‹¥æŠ•é€’æˆåŠŸï¼šæ›´æ–°æ¶ˆæ¯çŠ¶æ€ä¸ºâ€œ1-å·²æŠ•é€’â€ï¼Œè®°å½•æŠ•é€’æ¬¡æ•°ï¼›</li>
<li>è‹¥æŠ•é€’å¤±è´¥ï¼ˆå¦‚MQå®•æœºï¼‰ï¼šæ›´æ–°æŠ•é€’æ¬¡æ•°ï¼ˆ+1ï¼‰ï¼Œè®¾ç½®ä¸‹æ¬¡æŠ•é€’æ—¶é—´ï¼ˆå¦‚å½“å‰æ—¶é—´+2^nç§’ï¼Œé‡‡ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥ï¼Œé¿å…é¢‘ç¹é‡è¯•ï¼‰ï¼›è‹¥æŠ•é€’æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼ˆå¦‚5æ¬¡ï¼‰ï¼Œæ ‡è®°æ¶ˆæ¯çŠ¶æ€ä¸ºâ€œ3-æŠ•é€’å¤±è´¥â€ï¼Œè§¦å‘å‘Šè­¦ï¼ˆäººå·¥ä»‹å…¥å¤„ç†ï¼‰ã€‚</li>
</ol>
</li>
</ol>
<h4 data-id="heading-7">é˜¶æ®µ3ï¼šæ¥æ”¶æ–¹æ¶ˆè´¹æ¶ˆæ¯ï¼Œæ‰§è¡Œä¸šåŠ¡æ“ä½œ</h4>
<p>ç§¯åˆ†æœåŠ¡ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—çš„â€œorder_to_points_topicâ€ä¸»é¢˜ï¼Œæ¶ˆè´¹è®¢å•æœåŠ¡æŠ•é€’çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œç§¯åˆ†å¢åŠ æ“ä½œï¼š</p>
<ol>
<li>
<p>ç§¯åˆ†æœåŠ¡ä»æ¶ˆæ¯é˜Ÿåˆ—è·å–æ¶ˆæ¯ï¼Œè§£ææ¶ˆæ¯å†…å®¹ï¼ˆè®¢å•IDã€ç”¨æˆ·IDã€ç§¯åˆ†å€¼ï¼‰ï¼›</p>
</li>
<li>
<p>æ‰§è¡Œå¹‚ç­‰æ€§æ ¡éªŒï¼šæŸ¥è¯¢â€œpoints_logâ€ç§¯åˆ†æ—¥å¿—è¡¨ï¼Œåˆ¤æ–­è¯¥æ¶ˆæ¯IDå¯¹åº”çš„ç§¯åˆ†æ˜¯å¦å·²å¢åŠ ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰ï¼›è‹¥å·²æ¶ˆè´¹ï¼Œç›´æ¥è¿”å›æˆåŠŸï¼›è‹¥æœªæ¶ˆè´¹ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ï¼›</p>
</li>
<li>
<p>æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡æ“ä½œï¼šå‘â€œuser_pointsâ€è¡¨æ›´æ–°ç”¨æˆ·ç§¯åˆ†ï¼ˆå¢åŠ å¯¹åº”ç§¯åˆ†ï¼‰ï¼Œå‘â€œpoints_logâ€è¡¨æ’å…¥ç§¯åˆ†å˜æ›´è®°å½•ï¼ˆå…³è”æ¶ˆæ¯IDï¼Œç”¨äºå¹‚ç­‰æ ¡éªŒï¼‰ï¼›</p>
</li>
<li>
<p>å¤„ç†æ¶ˆè´¹ç»“æœï¼š</p>
<ol>
<li>è‹¥æ¶ˆè´¹æˆåŠŸï¼šå‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€â€œæ¶ˆè´¹ç¡®è®¤â€ï¼ˆACKï¼‰ï¼Œæ¶ˆæ¯é˜Ÿåˆ—åˆ é™¤è¯¥æ¶ˆæ¯ï¼›</li>
<li>è‹¥æ¶ˆè´¹å¤±è´¥ï¼ˆå¦‚æ•°æ®åº“å¼‚å¸¸ã€ç§¯åˆ†æœåŠ¡å®•æœºï¼‰ï¼šä¸å‘é€ACKï¼Œæ¶ˆæ¯é˜Ÿåˆ—å°†è¯¥æ¶ˆæ¯é‡æ–°æ”¾å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…ä¸‹æ¬¡æŠ•é€’ï¼ˆä¾èµ–MQçš„é‡è¯•æœºåˆ¶ï¼Œé‡è¯•é—´éš”å¯é…ç½®ï¼‰ï¼›è‹¥é‡è¯•æ¬¡æ•°è¶…è¿‡é˜ˆå€¼ï¼Œæ¶ˆæ¯è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œåç»­äººå·¥å¤„ç†ã€‚</li>
</ol>
</li>
</ol>
<h4 data-id="heading-8">é˜¶æ®µ4ï¼šï¼ˆå¯é€‰ï¼‰æ¶ˆæ¯æ¶ˆè´¹ç¡®è®¤å›å†™ï¼ˆä¼˜åŒ–ç‚¹ï¼‰</h4>
<p>ä¸ºäº†æ›´ç²¾å‡†åœ°è·Ÿè¸ªæ¶ˆæ¯çŠ¶æ€ï¼Œå¯å¢åŠ â€œæ¶ˆè´¹ç¡®è®¤å›å†™â€æ­¥éª¤ï¼šç§¯åˆ†æœåŠ¡æ¶ˆè´¹æˆåŠŸåï¼Œä¸»åŠ¨è°ƒç”¨è®¢å•æœåŠ¡çš„â€œæ¶ˆæ¯æ¶ˆè´¹ç¡®è®¤æ¥å£â€ï¼Œè®¢å•æœåŠ¡æ”¶åˆ°åå°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸­å¯¹åº”æ¶ˆæ¯çš„çŠ¶æ€æ›´æ–°ä¸ºâ€œ2-å·²æ¶ˆè´¹â€ã€‚æ­¤æ­¥éª¤éå¿…éœ€ï¼Œä½†èƒ½è®©æ¶ˆæ¯çŠ¶æ€æ›´é€æ˜ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥ã€‚</p>
<h3 data-id="heading-9">å››ã€æœ¬åœ°æ¶ˆæ¯è¡¨çš„æ ¸å¿ƒä¼˜åŠ¿ä¸å±€é™æ€§</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„ä¼˜åŠ¿å’Œå±€é™æ€§éƒ½æºäºå…¶â€œæç®€è®¾è®¡â€ï¼Œé€‚é…åœºæ™¯é«˜åº¦èšç„¦äºâ€œç®€å•å¼‚æ­¥è·¨æœåŠ¡åœºæ™¯â€ã€‚</p>
<h4 data-id="heading-10">1. æ ¸å¿ƒä¼˜åŠ¿ï¼šä½ä¾µå…¥ã€ä½æˆæœ¬ã€é«˜å¯ç”¨</h4>
<ul>
<li><strong>ä¸šåŠ¡ä¾µå…¥æ€§æä½</strong>ï¼šæ— éœ€æ”¹é€ ç°æœ‰ä¸šåŠ¡æ¥å£ï¼Œä»…éœ€åœ¨ä¸šåŠ¡åº“ä¸­æ–°å¢æœ¬åœ°æ¶ˆæ¯è¡¨ï¼Œåœ¨åŸæœ‰ä¸šåŠ¡äº‹åŠ¡ä¸­æ–°å¢â€œå†™å…¥æ¶ˆæ¯â€çš„æ­¥éª¤ï¼Œå¼€å‘æ”¹é€ é‡æå°ï¼›</li>
<li><strong>å®ç°ç®€å•ï¼Œæˆæœ¬ä½</strong>ï¼šä¸ä¾èµ–å¤æ‚çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œä»…éœ€ä½¿ç”¨æ•°æ®åº“æœ¬åœ°äº‹åŠ¡å’Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸­å°å›¢é˜Ÿæ— éœ€é¢å¤–å­¦ä¹ æˆæœ¬ï¼Œå°±èƒ½å¿«é€Ÿè½åœ°ï¼›</li>
<li><strong>é«˜å¯ç”¨æ€§å¼º</strong>ï¼šæœ¬åœ°äº‹åŠ¡ä¿è¯â€œä¸šåŠ¡+æ¶ˆæ¯â€åŸå­æ€§ï¼Œæ— æ•°æ®ä¸¢å¤±é£é™©ï¼›æ¶ˆæ¯é˜Ÿåˆ—çš„æŒä¹…åŒ–å’Œé‡è¯•æœºåˆ¶ï¼Œä¿è¯æ¶ˆæ¯èƒ½å¯é æŠ•é€’ï¼›å®šæ—¶ä»»åŠ¡çš„æŒ‡æ•°é€€é¿é‡è¯•ï¼Œé¿å…äº†ç¬æ—¶æ•…éšœå¯¼è‡´çš„æ¶ˆæ¯æŠ•é€’å¤±è´¥ï¼›</li>
<li><strong>æ€§èƒ½å½±å“å°</strong>ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„å†™å…¥æ˜¯æœ¬åœ°æ•°æ®åº“æ“ä½œï¼Œæ€§èƒ½å¼€é”€æä½ï¼›æ¶ˆæ¯æŠ•é€’å’Œæ¶ˆè´¹æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šé˜»å¡æ ¸å¿ƒä¸šåŠ¡æµç¨‹ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰ï¼Œå¯¹æ ¸å¿ƒä¸šåŠ¡æ€§èƒ½å‡ ä¹æ— å½±å“ã€‚</li>
</ul>
<h4 data-id="heading-11">2. å±€é™æ€§ï¼šä»…é€‚é…ç®€å•åœºæ™¯ï¼Œä¸€è‡´æ€§å»¶è¿Ÿå¯æ§</h4>
<ul>
<li><strong>ä»…æ”¯æŒç®€å•å¼‚æ­¥åœºæ™¯</strong>ï¼šé€‚åˆâ€œä¸€å¯¹ä¸€â€çš„å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥åœºæ™¯ï¼ˆå¦‚è®¢å•â†’ç§¯åˆ†ã€æ”¯ä»˜â†’ç‰©æµï¼‰ï¼›ä¸æ”¯æŒå¤æ‚æµç¨‹ï¼ˆå¦‚å¤šæœåŠ¡ä¸²è¡Œ/å¹¶è¡Œäº¤äº’ã€æµç¨‹åˆ†æ”¯ï¼‰ï¼Œä¹Ÿä¸æ”¯æŒé•¿äº‹åŠ¡åœºæ™¯ï¼›</li>
<li><strong>ä»…èƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šæ¶ˆæ¯æŠ•é€’å’Œæ¶ˆè´¹å­˜åœ¨å»¶è¿Ÿï¼Œä¼šå‡ºç°â€œè®¢å•åˆ›å»ºæˆåŠŸä½†ç§¯åˆ†å°šæœªå¢åŠ â€çš„ä¸­é—´çŠ¶æ€ï¼Œéœ€ä¸šåŠ¡å±‚é¢èƒ½æ¥å—ï¼›</li>
<li><strong>æ¶ˆæ¯è¡¨ä¸ä¸šåŠ¡åº“è€¦åˆ</strong>ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨å­˜å‚¨åœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­ï¼Œä¼šå¢åŠ ä¸šåŠ¡åº“çš„å­˜å‚¨å‹åŠ›ï¼›è‹¥ä¸šåŠ¡åº“å®•æœºï¼Œæ¶ˆæ¯æŠ•é€’ä¼šæš‚æ—¶ä¸­æ–­ï¼ˆä½†ä¸šåŠ¡ä¹Ÿæ— æ³•æ‰§è¡Œï¼Œå±äºå¯æ¥å—èŒƒå›´ï¼‰ï¼›</li>
<li><strong>éœ€æ‰‹åŠ¨å¤„ç†å¹‚ç­‰æ€§å’Œæ­»ä¿¡æ¶ˆæ¯</strong>ï¼šæ¶ˆè´¹æ–¹å¿…é¡»å®ç°å¹‚ç­‰æ€§ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰ï¼Œæ­»ä¿¡æ¶ˆæ¯ï¼ˆå¤šæ¬¡é‡è¯•å¤±è´¥çš„æ¶ˆæ¯ï¼‰éœ€è¦äººå·¥ä»‹å…¥å¤„ç†ï¼Œå¢åŠ äº†è¿ç»´æˆæœ¬ã€‚</li>
</ul>
<h3 data-id="heading-12">äº”ã€æœ¬åœ°æ¶ˆæ¯è¡¨çš„é€‚ç”¨åœºæ™¯ä¸è½åœ°æ³¨æ„äº‹é¡¹</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„ç‰¹æ€§å†³å®šäº†å®ƒæ˜¯â€œç®€å•å¼‚æ­¥åœºæ™¯çš„æœ€ä¼˜è§£â€ï¼Œè½åœ°æ—¶éœ€é‡ç‚¹è§£å†³å¹‚ç­‰æ€§ã€é‡è¯•ç­–ç•¥ã€æ­»ä¿¡å¤„ç†ç­‰æ ¸å¿ƒé—®é¢˜ã€‚</p>
<h4 data-id="heading-13">1. é€‚ç”¨åœºæ™¯</h4>
<ul>
<li><strong>ç®€å•å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥åœºæ™¯</strong>ï¼šå¦‚è®¢å•åˆ›å»ºååŒæ­¥ç§¯åˆ†ã€æ”¯ä»˜æˆåŠŸåæ›´æ–°ç‰©æµçŠ¶æ€ã€ç”¨æˆ·æ³¨å†Œåå‘é€æ¬¢è¿çŸ­ä¿¡/é‚®ä»¶ï¼›</li>
<li><strong>ä¸­å°å›¢é˜Ÿã€ä½å¼€å‘æˆæœ¬éœ€æ±‚åœºæ™¯</strong>ï¼šå›¢é˜ŸæŠ€æœ¯èƒ½åŠ›æœ‰é™ï¼Œæ— æ³•æ‰¿æ‹…TCCã€SAGAçš„å¼€å‘ç»´æŠ¤æˆæœ¬ï¼Œéœ€è¦å¿«é€Ÿè½åœ°åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼›</li>
<li><strong>æ ¸å¿ƒä¸šåŠ¡éå¼ºå®æ—¶ä¸€è‡´æ€§åœºæ™¯</strong>ï¼šæ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚è®¢å•åˆ›å»ºï¼‰æ— éœ€ç­‰å¾…è·¨æœåŠ¡æ“ä½œå®Œæˆï¼Œå¯æ¥å—çŸ­æš‚çš„ä¸€è‡´æ€§å»¶è¿Ÿï¼›</li>
<li><strong>åŸºäºå…³ç³»å‹æ•°æ®åº“çš„ä¸šåŠ¡åœºæ™¯</strong>ï¼šä¸šåŠ¡ä½¿ç”¨MySQLã€PostgreSQLç­‰å…³ç³»å‹æ•°æ®åº“ï¼Œèƒ½åˆ©ç”¨æœ¬åœ°äº‹åŠ¡ä¿è¯â€œä¸šåŠ¡+æ¶ˆæ¯â€çš„åŸå­æ€§ã€‚</li>
</ul>
<h4 data-id="heading-14">2. è½åœ°æ³¨æ„äº‹é¡¹ï¼ˆæ ¸å¿ƒæŠ€æœ¯éš¾ç‚¹ï¼‰</h4>
<ul>
<li>
<p><strong>æ¶ˆæ¯è¡¨è®¾è®¡ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¿…é¡»æ·»åŠ â€œæ¶ˆæ¯å”¯ä¸€IDâ€ï¼ˆå¦‚UUIDï¼‰ï¼Œç”¨äºå¹‚ç­‰æ€§æ ¡éªŒï¼›</li>
<li>ç´¢å¼•è®¾è®¡ï¼šä¸ºâ€œmessage_statusâ€å’Œâ€œnext_delivery_timeâ€å»ºç«‹è”åˆç´¢å¼•ï¼Œæå‡å®šæ—¶ä»»åŠ¡æŸ¥è¯¢æ•ˆç‡ï¼›ä¸ºâ€œmessage_idâ€å»ºç«‹å”¯ä¸€ç´¢å¼•ï¼Œé¿å…é‡å¤æ’å…¥æ¶ˆæ¯ï¼›</li>
<li>å­—æ®µç²¾ç®€ï¼šä»…å­˜å‚¨å¿…è¦çš„æ¶ˆæ¯å†…å®¹ï¼Œé¿å…æ¶ˆæ¯è¡¨è¿‡å¤§å½±å“æŸ¥è¯¢æ€§èƒ½ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¸¥æ ¼ä¿è¯å¹‚ç­‰æ€§</strong>ï¼š</p>
<ul>
<li>æ¶ˆè´¹æ–¹ï¼šé€šè¿‡â€œæ¶ˆæ¯IDâ€æˆ–â€œä¸šåŠ¡å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚è®¢å•IDï¼‰â€åšå¹‚ç­‰æ ¡éªŒï¼Œç¡®ä¿é‡å¤æ¶ˆè´¹ä¸ä¼šå¯¼è‡´æ•°æ®å¼‚å¸¸ï¼ˆå¦‚é‡å¤å¢åŠ ç§¯åˆ†ï¼‰ï¼›</li>
<li>å‘èµ·æ–¹ï¼šæœ¬åœ°äº‹åŠ¡æäº¤å‰ï¼Œé€šè¿‡â€œæ¶ˆæ¯IDâ€å”¯ä¸€ç´¢å¼•é¿å…é‡å¤å†™å…¥æ¶ˆæ¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆç†è®¾è®¡é‡è¯•ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>å‘èµ·æ–¹å®šæ—¶ä»»åŠ¡ï¼šé‡‡ç”¨â€œæŒ‡æ•°é€€é¿é‡è¯•â€ï¼ˆå¦‚10ç§’ã€20ç§’ã€40ç§’ã€80ç§’...ï¼‰ï¼Œé¿å…é¢‘ç¹é‡è¯•ç»™MQå’Œæ•°æ®åº“å¸¦æ¥å‹åŠ›ï¼›è®¾ç½®æœ€å¤§æŠ•é€’æ¬¡æ•°ï¼ˆå¦‚5æ¬¡ï¼‰ï¼Œè¶…è¿‡é˜ˆå€¼æ ‡è®°ä¸ºå¤±è´¥å¹¶å‘Šè­¦ï¼›</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹ï¼šé…ç½®åˆç†çš„é‡è¯•é—´éš”ï¼ˆå¦‚30ç§’ï¼‰ï¼Œè¶…è¿‡é‡è¯•æ¬¡æ•°åå°†æ¶ˆæ¯è½¬å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼Œé¿å…å ç”¨æ­£å¸¸æ¶ˆæ¯é˜Ÿåˆ—èµ„æºã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¶ˆæ¯æ¸…ç†ä¸å½’æ¡£</strong>ï¼šå®šæ—¶å½’æ¡£æˆ–åˆ é™¤â€œå·²æ¶ˆè´¹â€çŠ¶æ€çš„æ¶ˆæ¯ï¼ˆå¦‚å½’æ¡£3ä¸ªæœˆå‰çš„æ¶ˆæ¯ï¼‰ï¼Œé¿å…æœ¬åœ°æ¶ˆæ¯è¡¨è¿‡å¤§ï¼Œå½±å“æŸ¥è¯¢å’Œå†™å…¥æ€§èƒ½ï¼›</p>
</li>
<li>
<p><strong>äº‹åŠ¡éš”ç¦»çº§åˆ«é€‰æ‹©</strong>ï¼šå‘èµ·æ–¹æ•°æ®åº“å»ºè®®ä½¿ç”¨â€œè¯»å·²æäº¤ï¼ˆRead Committedï¼‰â€æˆ–æ›´é«˜çš„éš”ç¦»çº§åˆ«ï¼Œé¿å…å®šæ—¶ä»»åŠ¡è¯»å–åˆ°æœªæäº¤çš„æ¶ˆæ¯ï¼ˆè„è¯»ï¼‰ï¼›</p>
</li>
<li>
<p><strong>ç›‘æ§ä¸å‘Šè­¦æœºåˆ¶</strong>ï¼šå»ºç«‹æ¶ˆæ¯çŠ¶æ€ç›‘æ§é¢æ¿ï¼Œå®æ—¶ç›‘æ§â€œå¾…æŠ•é€’â€â€œæŠ•é€’å¤±è´¥â€â€œæ­»ä¿¡æ¶ˆæ¯â€çš„æ•°é‡ï¼›å¯¹â€œæŠ•é€’å¤±è´¥â€â€œæ­»ä¿¡æ¶ˆæ¯â€è®¾ç½®å‘Šè­¦ï¼ˆå¦‚çŸ­ä¿¡ã€é‚®ä»¶å‘Šè­¦ï¼‰ï¼Œç¡®ä¿åŠæ—¶äººå·¥ä»‹å…¥å¤„ç†ã€‚</p>
</li>
</ul>
<h3 data-id="heading-15">å…­ã€æœ¬åœ°æ¶ˆæ¯è¡¨ä¸å…¶ä»–åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆçš„é€‰å‹å¯¹æ¯”</h3>
<p>åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆçš„é€‰å‹æ ¸å¿ƒæ˜¯â€œåœºæ™¯åŒ¹é…+æˆæœ¬æƒè¡¡â€ï¼Œæˆ‘ä»¬å°†æœ¬åœ°æ¶ˆæ¯è¡¨ä¸å…¶ä»–ä¸»æµæ–¹æ¡ˆå¯¹æ¯”ï¼Œæ˜ç¡®é€‚ç”¨è¾¹ç•Œï¼š</p>













































<table><thead><tr><th>æ–¹æ¡ˆç±»å‹</th><th>ä¸€è‡´æ€§</th><th>æ€§èƒ½</th><th>ä¸šåŠ¡ä¾µå…¥æ€§</th><th>å¼€å‘ç»´æŠ¤æˆæœ¬</th><th>é€‚é…åœºæ™¯</th></tr></thead><tbody><tr><td>2PC/3PCï¼ˆå¼ºä¸€è‡´æ€§ï¼‰</td><td>å¼ºä¸€è‡´</td><td>ä½</td><td>ä½ï¼ˆä¾èµ–èµ„æºå±‚ï¼‰</td><td>ä¸­</td><td>çŸ­äº‹åŠ¡ã€ä½å¹¶å‘ã€ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼ˆå¦‚é‡‘èæ ¸å¿ƒè½¬è´¦ï¼‰</td></tr><tr><td>TCCï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>é«˜</td><td>é«˜ï¼ˆæ”¹é€ ä¸šåŠ¡æ¥å£ï¼‰</td><td>é«˜</td><td>çŸ­äº‹åŠ¡ã€é«˜å¹¶å‘ã€è·¨å¤šç§èµ„æºï¼ˆå¦‚ç”µå•†ç§’æ€ä¸‹å•ï¼‰</td></tr><tr><td>SAGAï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>ä¸­é«˜</td><td>ä¸­ï¼ˆæ–°å¢è¡¥å¿äº‹åŠ¡ï¼‰</td><td>ä¸­é«˜</td><td>é•¿äº‹åŠ¡ã€å¤æ‚æµç¨‹ï¼ˆå¦‚è®¢å•å…¨æµç¨‹ã€ç‰©æµå±¥çº¦ï¼‰</td></tr><tr><td>æœ¬åœ°æ¶ˆæ¯è¡¨+MQï¼ˆæŸ”æ€§äº‹åŠ¡ï¼‰</td><td>æœ€ç»ˆä¸€è‡´</td><td>é«˜</td><td>æä½ï¼ˆæ–°å¢æ¶ˆæ¯è¡¨ï¼‰</td><td>ä½</td><td>ç®€å•å¼‚æ­¥åœºæ™¯ã€ä¸­å°å›¢é˜Ÿã€ä½æˆæœ¬éœ€æ±‚ï¼ˆå¦‚è®¢å•â†’ç§¯åˆ†ã€æ”¯ä»˜â†’ç‰©æµï¼‰</td></tr></tbody></table>
<h3 data-id="heading-16">ä¸ƒã€æ€»ç»“ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„æ ¸å¿ƒä»·å€¼ä¸è½åœ°å–èˆ</h3>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆçš„æ ¸å¿ƒä»·å€¼åœ¨äºâ€œä»¥æœ€ä½çš„æˆæœ¬è§£å†³ç®€å•å¼‚æ­¥åœºæ™¯çš„æœ€ç»ˆä¸€è‡´æ€§é—®é¢˜â€â€”â€”å®ƒæ”¾å¼ƒäº†å¤æ‚çš„å¼ºä¸€è‡´æ€§ä¿éšœå’Œå¤æ‚æµç¨‹é€‚é…èƒ½åŠ›ï¼Œæ¢æ¥äº†â€œä½ä¾µå…¥ã€æ˜“å®ç°ã€é«˜å¯ç”¨â€çš„ç‰¹æ€§ï¼Œå®Œç¾å¥‘åˆä¸­å°å›¢é˜Ÿå’Œç®€å•ä¸šåŠ¡çš„éœ€æ±‚ã€‚å®ƒä¸æ˜¯æœ€â€œå…ˆè¿›â€çš„åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆï¼Œä½†å´æ˜¯æœ€â€œåŠ¡å®â€çš„æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<p>åœ¨å®é™…è½åœ°æ—¶ï¼Œæˆ‘ä»¬éœ€æ˜ç¡®ï¼šæœ¬åœ°æ¶ˆæ¯è¡¨çš„éš¾ç‚¹ä¸åœ¨äºâ€œæµç¨‹è®¾è®¡â€ï¼Œè€Œåœ¨äºâ€œç»†èŠ‚ä¼˜åŒ–â€ï¼ˆå¦‚å¹‚ç­‰æ€§ã€é‡è¯•ç­–ç•¥ã€æ¶ˆæ¯æ¸…ç†ï¼‰ã€‚å»ºè®®æ— éœ€è¿½æ±‚å¤æ‚çš„è‡ªå®šä¹‰å®ç°ï¼Œå¯åŸºäºæˆç†Ÿçš„æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚RocketMQçš„äº‹åŠ¡æ¶ˆæ¯åŠŸèƒ½ï¼Œæœ¬è´¨æ˜¯æœ¬åœ°æ¶ˆæ¯è¡¨çš„å°è£…ï¼‰å¿«é€Ÿè½åœ°ï¼Œå‡å°‘é‡å¤å¼€å‘ã€‚</p>
<p>æœ€åï¼Œå›å½’åˆ†å¸ƒå¼äº‹åŠ¡çš„æ ¸å¿ƒåŸåˆ™ï¼š<strong>æ²¡æœ‰æœ€ä¼˜æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚é…ä¸šåŠ¡çš„æ–¹æ¡ˆ</strong>ã€‚è‹¥ä½ çš„ä¸šåŠ¡æ˜¯ç®€å•å¼‚æ­¥è·¨æœåŠ¡é€šçŸ¥ï¼Œä¸”å›¢é˜Ÿè¿½æ±‚ä½æˆæœ¬ã€ä½ä¾µå…¥ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨æ–¹æ¡ˆæ˜¯é¦–é€‰ï¼›è‹¥éœ€è¦å¤„ç†é«˜å¹¶å‘çŸ­äº‹åŠ¡ï¼Œé€‰æ‹©TCCï¼›è‹¥éœ€è¦å¤„ç†é•¿äº‹åŠ¡å¤æ‚æµç¨‹ï¼Œé€‰æ‹©SAGAï¼›è‹¥ä¸€è‡´æ€§è¦æ±‚æé«˜ï¼Œå¼ºä¸€è‡´æ€§æ–¹æ¡ˆä»æ˜¯åº•çº¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€]]></title>    <link>https://juejin.cn/post/7588034035286736911</link>    <guid>https://juejin.cn/post/7588034035286736911</guid>    <pubDate>2025-12-27T03:41:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588034035286736911" data-draft-id="7588004376867209251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€"/> <meta itemprop="keywords" content="JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-12-27T03:41:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js ä¸ Haskell æ··åˆç½‘ç»œç¼–ç¨‹è¸©å‘è®°ï¼šTCP ç²˜åŒ…ä¸çŠ¶æ€ä¸ä¸€è‡´å¼•å‘çš„â€œæ­»é”â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T03:41:46.000Z" title="Sat Dec 27 2025 03:41:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯ä¸ç›®æ ‡</h2>
<p>æˆ‘ä»¬éœ€è¦åœ¨ Node.js ä¸­å®ç°ä¸€ä¸ªå®šåˆ¶åŒ–çš„ TCP å®¢æˆ·ç«¯ (<code>RSATransport</code>)ï¼Œç”¨äºè¿æ¥ç°æœ‰çš„ Haskell æœåŠ¡ç«¯ã€‚è¯¥åè®®åŒ…å«è‡ªå®šä¹‰çš„æ¡æ‰‹æµç¨‹å’Œä¸‰ç§æ•°æ®ä¼ è¾“æ¨¡å¼ï¼š</p>
<ul>
<li><strong>Plain (0)</strong> : æ¡æ‰‹åæ˜æ–‡ç›´è¿ã€‚</li>
<li><strong>RSA (1)</strong> : å…¨ç¨‹ä½¿ç”¨ RSA-OAEP åŠ å¯†ã€‚</li>
<li><strong>AES (2)</strong> : æ¡æ‰‹åå•†å‡º Session Key åä½¿ç”¨ AES-CTR åŠ å¯†ã€‚</li>
</ul>
<p><strong>Haskell æœåŠ¡ç«¯é€»è¾‘ (<code>RSA.hs</code>)</strong> ï¼š æœåŠ¡ç«¯åœ¨æ¡æ‰‹æ—¶ä½¿ç”¨å¸¦ç¼“å†²çš„è¯»å–æ–¹å¼ (<code>recvDataOaep</code>)ï¼Œä½†åœ¨åˆ‡æ¢åˆ° <strong>Plain</strong> æ¨¡å¼åï¼Œç›´æ¥æ“ä½œåº•å±‚ Socket (<code>recvData tp</code>)ã€‚</p>
<h2 data-id="heading-1">2. é—®é¢˜ç°è±¡</h2>
<p>å¼€å‘è¿‡ç¨‹ä¸­å‡ºç°äº†ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼š</p>
<ol>
<li><strong>AES æ¨¡å¼æ­£å¸¸</strong>ï¼šæ¡æ‰‹ã€å¯†é’¥äº¤æ¢ã€æ•°æ®ä¼ è¾“å‡æµç•…ã€‚</li>
<li><strong>RSA æ¨¡å¼æ­£å¸¸</strong>ã€‚</li>
<li><strong>Plain æ¨¡å¼â€œå¡æ­»â€</strong> ï¼šæ¡æ‰‹çœ‹ä¼¼å®Œæˆï¼Œä½†éšåå‘é€çš„ç¬¬ä¸€æ¡æ•°æ®æœåŠ¡ç«¯æ— å“åº”ï¼Œå®¢æˆ·ç«¯ä¹Ÿæ”¶ä¸åˆ°å›åŒ…ã€‚</li>
<li><strong>â€œè–›å®šè°”çš„ Bugâ€</strong> ï¼šå¦‚æœåœ¨ä»£ç ä¸­åŠ å…¥ <code>console.log</code>ï¼Œæœ‰æ—¶èƒ½è·‘é€šä¸€ç‚¹ç‚¹ï¼Œä½†éšåä¾ç„¶å¡ä½ã€‚</li>
</ol>
<h2 data-id="heading-2">3. æ ¹å› æ·±åº¦åˆ†æ</h2>
<p>ç»è¿‡æ’æŸ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>TCP ç²˜åŒ…</strong> é‡ä¸Š <strong>åº”ç”¨å±‚çŠ¶æ€ç¼“å†²åŒºè®¾è®¡ç¼ºé™·</strong> å¯¼è‡´çš„é€»è¾‘æ­»é”ã€‚</p>
<h3 data-id="heading-3">3.1 Haskell æœåŠ¡ç«¯çš„â€œç¼“å†²åŒºæ—è·¯â€ Bug</h3>
<p>åœ¨ <code>RSA.hs</code> ä¸­ï¼Œæ¥æ”¶é€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<p>Haskell</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- Haskell ä¼ªä»£ç </span>
recvData RSATP {..} n <span class="hljs-operator">=</span> <span class="hljs-keyword">case</span> rsaMode <span class="hljs-keyword">of</span>
  Plain <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvData tp n           <span class="hljs-comment">-- [å…³é”®ç‚¹] ç›´æ¥è¯»åº•å±‚ Socketï¼Œå¿½ç•¥ç¼“å†²åŒº</span>
  RSA   <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvDataOaep readBuffer ... <span class="hljs-comment">-- ä»ç¼“å†²åŒº readBuffer è¯»å–</span>
  AES   <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> recvDataAes readBuffer ...  <span class="hljs-comment">-- ä»ç¼“å†²åŒº readBuffer è¯»å–</span>
</code></pre>
<p>åœ¨æ¡æ‰‹é˜¶æ®µï¼ˆåå•† Modeï¼‰ï¼ŒæœåŠ¡ç«¯è°ƒç”¨çš„æ˜¯ <code>recvDataOaep</code>ã€‚è¿™ä¸ªå‡½æ•°ä¸ºäº†è§£å¯†ï¼Œå¯èƒ½ä¼šä» TCP Socket é¢„è¯»å–å¤šäºæ‰€éœ€çš„å­—èŠ‚ï¼ˆä¾‹å¦‚è¯»å–äº† 4096 å­—èŠ‚ï¼Œä½† Mode åŒ…åªæœ‰ 256 å­—èŠ‚ï¼‰ã€‚<strong>å¤šä½™çš„æ•°æ®è¢«ç•™åœ¨äº† Haskell çš„ <code>readBuffer</code> (TVar) ä¸­ã€‚</strong></p>
<h3 data-id="heading-4">3.2 Node.js çš„â€œè¿‡äºé«˜æ•ˆâ€</h3>
<p>åœ¨ Node.js å®¢æˆ·ç«¯ï¼Œå½“æ¡æ‰‹å®Œæˆï¼ˆå‘é€äº† Mode Byteï¼‰åï¼Œæˆ‘ä»¬ç«‹å³æ¸…ç©ºäº†ç§¯å‹çš„å†™å…¥é˜Ÿåˆ— (<code>_writeBuffer</code>) å¹¶å‘é€ä¸šåŠ¡æ•°æ®ã€‚</p>
<p>ç”±äº TCP çš„ <strong>Nagle ç®—æ³•</strong> å’Œæ“ä½œç³»ç»Ÿçš„ç¼“å†²æœºåˆ¶ï¼Œå‘é€çš„ <strong>[Mode åŒ…]</strong> å’Œåç»­çš„ <strong>[ä¸šåŠ¡æ•°æ®åŒ…]</strong> æå¤§æ¦‚ç‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª TCP æ®µå‘é€åˆ°äº†æœåŠ¡ç«¯ã€‚</p>
<h3 data-id="heading-5">3.3 è‡´å‘½çš„â€œæ“¦è‚©è€Œè¿‡â€</h3>
<p>äºæ˜¯å‘ç”Ÿäº†ä»¥ä¸‹æ—¶åºï¼š</p>
<ol>
<li><strong>Client</strong>: å‘é€ <code>[Mode=Plain][Data="Hello"]</code>ï¼ˆåœ¨åŒä¸€ä¸ª TCP åŒ…ä¸­ï¼‰ã€‚</li>
<li><strong>Server</strong>: è°ƒç”¨ <code>recvDataOaep</code> è¯»å– Modeã€‚å®ƒæŠŠæ•´ä¸ª TCP åŒ…è¯»å…¥å†…å­˜ï¼Œè§£æå‡º <code>Mode=Plain</code>ï¼Œå‰©ä¸‹çš„ <code>Data="Hello"</code> ç•™åœ¨äº† <code>readBuffer</code> ä¸­ã€‚</li>
<li><strong>Server</strong>: åˆ‡æ¢çŠ¶æ€åˆ° <code>Plain</code>ã€‚</li>
<li><strong>Server</strong>: è°ƒç”¨ <code>recvData tp</code> ç­‰å¾…æ–°æ•°æ®ã€‚<strong>æ³¨æ„ï¼šå®ƒè·³è¿‡äº† <code>readBuffer</code>ï¼Œç›´æ¥å»é—®åº•å±‚ Socket è¦æ•°æ®ï¼</strong></li>
<li><strong>Result</strong>: Socket ç¼“å†²åŒºæ˜¯ç©ºçš„ï¼ˆæ•°æ®å·²ç»è¢«è¯»åˆ°åº”ç”¨å±‚ç¼“å†²åŒºäº†ï¼‰ï¼ŒæœåŠ¡ç«¯æŒ‚èµ·ç­‰å¾…ã€‚å®¢æˆ·ç«¯ä»¥ä¸ºæœåŠ¡ç«¯æ”¶åˆ°äº†ï¼Œä¹Ÿåœ¨ç­‰å¾…å“åº”ã€‚<strong>æ­»é”å½¢æˆã€‚</strong></li>
</ol>
<h2 data-id="heading-6">4. è§£å†³æ–¹æ¡ˆ</h2>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯æ‰“ç ´â€œç²˜åŒ…â€ï¼Œç¡®ä¿æœåŠ¡ç«¯åœ¨å¤„ç†å®Œ Mode åˆ‡æ¢åï¼ŒSocket ç¼“å†²åŒºé‡Œæ‰æœ‰æ–°æ•°æ®åˆ°è¾¾ã€‚</p>
<h3 data-id="heading-7">4.1 ç¦ç”¨ Nagle ç®—æ³•</h3>
<p>é¦–å…ˆï¼Œç¦æ­¢ TCP å»¶è¿Ÿå‘é€ï¼Œç¡®ä¿å°åŒ…ï¼ˆå¦‚æ¡æ‰‹åŒ…ï¼‰èƒ½å°½å¿«å‘å‡ºå»ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">this</span>._socket = net.connect(options);
<span class="hljs-keyword">this</span>._socket.setNoDelay(<span class="hljs-literal">true</span>); <span class="hljs-comment">// ç¦ç”¨ Nagle</span>
</code></pre>
<h3 data-id="heading-8">4.2 ä¸¥æ ¼çš„å†™æ“ä½œæµæ§</h3>
<p>ä¸èƒ½ä¾èµ– Node.js çš„è‡ªåŠ¨ç¼“å†²ï¼Œå¿…é¡»ç¡®ä¿ä¸Šä¸€ä¸ªåŒ…çœŸæ­£å†™å…¥å†…æ ¸ï¼ˆdrainï¼‰åï¼Œå†å‘ä¸‹ä¸€ä¸ªåŒ…ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨å›è°ƒé“¾ç¡®ä¿é¡ºåº</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_sendOAEP</span>(modePayload, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// Mode åŒ…å†™å…¥å®Œæˆåçš„å›è°ƒ</span>
    self.<span class="hljs-title function_">_finishHandshake</span>();
});
</code></pre>
<h3 data-id="heading-9">4.3 é’ˆå¯¹ Plain æ¨¡å¼çš„â€œé­”æ³•å»¶æ—¶â€</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚ç”±äºæˆ‘ä»¬æ— æ³•ä¿®æ”¹ Haskell æœåŠ¡ç«¯ä»£ç ï¼Œå¿…é¡»åœ¨å®¢æˆ·ç«¯è¿›è¡Œè§„é¿ã€‚åœ¨å‘é€ Mode åŒ…å’Œå‘é€ç¬¬ä¸€æ¡ Plain æ•°æ®ä¹‹é—´ï¼Œå¼ºåˆ¶æ’å…¥ä¸€ä¸ªå¾®å°çš„å»¶æ—¶ï¼ˆ50msï¼‰ã€‚</p>
<p>è¿™ç»™äº†æœåŠ¡ç«¯è¶³å¤Ÿçš„æ—¶é—´ï¼š</p>
<ol>
<li>å¤„ç† Mode åŒ…ã€‚</li>
<li>æ¸…ç©ºå…¶å†…éƒ¨æ¥æ”¶é€»è¾‘ã€‚</li>
<li>åˆ‡æ¢åˆ° Socket ç›´æ¥è¯»å–æ¨¡å¼ã€‚</li>
</ol>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">RSATransport</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">_finishHandshake</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">_state</span> = <span class="hljs-string">'ESTABLISHED'</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'connect'</span>);

  <span class="hljs-comment">// åˆ·æ–°ç§¯å‹çš„æ•°æ®</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_writeBuffer</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">flush</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// ... å‘é€ç§¯å‹æ•°æ® ...</span>
    };

    <span class="hljs-comment">// é’ˆå¯¹ Plain æ¨¡å¼çš„ Hackï¼š</span>
    <span class="hljs-comment">// å¼ºåˆ¶å»¶æ—¶ï¼Œé˜²æ­¢ Mode åŒ…å’Œåç»­æ•°æ®ç²˜åŒ…ï¼Œ</span>
    <span class="hljs-comment">// é¿å…æœåŠ¡ç«¯è¯»å– Mode æ—¶è¯¯è¯»äº†åç»­æ•°æ®åˆ° Buffer ä¸­å´åœ¨ Plain æ¨¡å¼ä¸‹æ— æ³•è®¿é—®ã€‚</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_mode</span> === <span class="hljs-variable constant_">MODE_PLAIN</span>) {
      <span class="hljs-built_in">setTimeout</span>(flush, <span class="hljs-number">50</span>); 
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">flush</span>();
    }
  }
};
</code></pre>
<h3 data-id="heading-10">4.4 å®Œå–„èƒŒå‹ (Backpressure) å¤„ç†</h3>
<p>é™¤äº†ä¸Šè¿°æ ¸å¿ƒ Bugï¼Œæˆ‘ä»¬è¿˜ä¿®å¤äº† <code>write</code> æ–¹æ³•çš„è¿”å›å€¼é—®é¢˜ã€‚å½“å¤„äº Plain æ¨¡å¼ï¼ˆé«˜ååï¼‰æ—¶ï¼Œå¿…é¡»æ­£ç¡®å¤„ç† TCP çš„èƒŒå‹ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜é£™å‡æˆ–æ•°æ®ä¸¢å¤±ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è½¬å‘åº•å±‚çš„ drain äº‹ä»¶</span>
<span class="hljs-keyword">this</span>._socket.on(<span class="hljs-string">'drain'</span>, () =&gt; <span class="hljs-keyword">this</span>.emit(<span class="hljs-string">'drain'</span>));

<span class="hljs-comment">// æ­£ç¡®è¿”å› boolean</span>
Transport.prototype.write = function(<span class="hljs-keyword">data</span>, encoding, callback) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._socket.write(<span class="hljs-keyword">data</span>, encoding, callback); 
};
</code></pre>
<h2 data-id="heading-11">5. æ€»ç»“</h2>
<p>è¿™æ¬¡æ’æŸ¥å†æ¬¡éªŒè¯äº†ç½‘ç»œç¼–ç¨‹ä¸­çš„ä¸€æ¡é“å¾‹ï¼š<strong>TCP æ˜¯æµåè®®ï¼Œä¸æ˜¯åŒ…åè®®</strong>ã€‚</p>
<p>å½“å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç”±ä¸åŒè¯­è¨€ç¼–å†™ï¼Œä¸”æœåŠ¡ç«¯å­˜åœ¨æ··åˆè¯»å–ç­–ç•¥ï¼ˆBufferè¯»å– vs Socketç›´è¯»ï¼‰æ—¶ï¼Œåº”ç”¨å±‚å¿…é¡»æå…¶å°å¿ƒåœ°å¤„ç†æ•°æ®è¾¹ç•Œã€‚</p>
<ul>
<li><strong>æ•™è®­ 1</strong>: ä¸è¦å‡è®¾ <code>write</code> ä¸¤æ¬¡å°±ä¼šäº§ç”Ÿä¸¤ä¸ª TCP åŒ…ã€‚</li>
<li><strong>æ•™è®­ 2</strong>: åœ¨å¤„ç†åè®®çŠ¶æ€åˆ‡æ¢ï¼ˆå¦‚æ¡æ‰‹ -&gt; ä¼ è¾“ï¼‰æ—¶ï¼ŒçŠ¶æ€æœºçš„åŒæ­¥è‡³å…³é‡è¦ã€‚</li>
<li><strong>æ•™è®­ 3</strong>: é‡åˆ°â€œå¡æ­»â€ä¸”æ—¥å¿—å½±å“è¡Œä¸ºæ—¶ï¼Œä¼˜å…ˆæ€€ç–‘ç¼“å†²æœºåˆ¶å’Œç«æ€æ¡ä»¶ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588007285547073542</link>    <guid>https://juejin.cn/post/7588007285547073542</guid>    <pubDate>2025-12-27T01:45:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588007285547073542" data-draft-id="7579127397498060851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-27T01:45:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬åœ¨å†…å­˜é‡Œæ˜¯æ€ä¹ˆå­˜çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T01:45:29.000Z" title="Sat Dec 27 2025 01:45:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰æ—¶å€™å¯¹ <code>JavaScript</code> çš„ä»£ç å¾ˆæ˜¯ç–‘æƒ‘ï¼Œæˆ‘å†™è¿‡è¿™æ ·ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> user1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">'å°æ˜'</span> };
<span class="hljs-keyword">let</span> user2 = user1;
user2.<span class="hljs-property">name</span> = <span class="hljs-string">'å°çº¢'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user1.<span class="hljs-property">name</span>); <span class="hljs-comment">// ç»“æœå±…ç„¶æ˜¯ â€œå°çº¢â€ï¼Ÿ</span>
</code></pre>
<p>æˆ‘å½“æ—¶æ„£ä½äº†ï¼šæˆ‘åªæ˜¯æ”¹äº† <code>user2</code>ï¼Œä¸ºä»€ä¹ˆ <code>user1</code> ä¹Ÿè·Ÿç€å˜äº†ï¼Ÿ<br/>
è€Œæ¢æˆæ•°å­—æ—¶ï¼Œå´å®Œå…¨ä¸æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;
<span class="hljs-keyword">let</span> b = a;
b = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// è¿˜æ˜¯ 10ï¼Œæ²¡å˜</span>
</code></pre>
<p>æ˜æ˜éƒ½æ˜¯èµ‹å€¼ï¼Œè¡Œä¸ºæ€ä¹ˆå·®è¿™ä¹ˆå¤šï¼Ÿ</p>
<p>åæ¥æˆ‘æ‰æ˜ç™½ï¼Œé—®é¢˜çš„å…³é”®å¹¶ä¸æ˜¯ä»£ç çš„å†™æ³•é—®é¢˜ï¼Œè€Œæ˜¯åœ¨ <strong>JavaScript çš„æ•°æ®ç±»å‹å’Œå®ƒä»¬åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼</strong>ã€‚</p>
<p>ææ‡‚è¿™ä¸€ç‚¹ï¼Œå¾ˆå¤šçœ‹ä¼¼å¥‡æ€ªçš„è¡Œä¸ºå°±éƒ½é¡ºç†æˆç« äº†ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€JavaScript æœ‰å‡ ç§æ•°æ®ç±»å‹ï¼Ÿ</h2>
<p>æ ¹æ® ECMAScript æ ‡å‡†ï¼ŒJavaScript çš„æ•°æ®ç±»å‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼š</p>
<h3 data-id="heading-1">1. åŸå§‹ç±»å‹â€”â€”å…± 7 ç§</h3>
<p>è¿™äº›ç±»å‹çš„ç‰¹ç‚¹æ˜¯ï¼š<strong>å€¼ä¸å¯å˜ã€ç›´æ¥è¡¨ç¤ºæ•°æ®æœ¬èº«</strong>ã€‚</p>













































<table><thead><tr><th>ç±»å‹</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>number</code></td><td><code>42</code>, <code>3.14</code>, <code>NaN</code></td><td>æ‰€æœ‰æ•°å­—ï¼ŒåŒ…æ‹¬æ•´æ•°ã€æµ®ç‚¹æ•°ã€ç‰¹æ®Šå€¼</td></tr><tr><td><code>string</code></td><td><code>'hello'</code>, <code>"JS"</code></td><td>å­—ç¬¦ä¸²ï¼Œä¸å¯å˜</td></tr><tr><td><code>boolean</code></td><td><code>true</code>, <code>false</code></td><td>å¸ƒå°”å€¼</td></tr><tr><td><code>undefined</code></td><td><code>let a; console.log(a);</code></td><td>å˜é‡å·²å£°æ˜ä½†æœªèµ‹å€¼</td></tr><tr><td><code>null</code></td><td><code>let b = null;</code></td><td>è¡¨ç¤ºç©ºæˆ–æ— å€¼ï¼ˆæ³¨æ„ï¼šå®ƒæ˜¯åŸå§‹ç±»å‹ï¼ï¼‰</td></tr><tr><td><code>symbol</code></td><td><code>Symbol('id')</code></td><td>ES6 å¼•å…¥ï¼Œå”¯ä¸€ä¸”ä¸å¯å˜çš„æ ‡è¯†ç¬¦</td></tr><tr><td><code>bigint</code></td><td><code>123n</code>, <code>9007199254740991n</code></td><td>ES2020 å¼•å…¥ï¼Œç”¨äºè¡¨ç¤ºä»»æ„å¤§çš„æ•´æ•°</td></tr></tbody></table>
<p><code>typeof null</code> è¿”å› <code>"object"</code> æ˜¯ JavaScript çš„ä¸€ä¸ªå†å²æ€§ bugï¼Œè‡³ä»Šæœªä¿®å¤ã€‚ä½†ä»è¯­è¨€è®¾è®¡ä¸Šï¼Œ<code>null</code> å±äºåŸå§‹ç±»å‹ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. å¼•ç”¨ç±»å‹â€”â€”ç»Ÿç§°å¯¹è±¡</h3>
<p>é™¤äº†ä¸Šè¿° 7 ç§ï¼Œ<strong>å…¶ä»–æ‰€æœ‰å€¼éƒ½æ˜¯å¯¹è±¡</strong>ï¼Œå±äºå¼•ç”¨ç±»å‹ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ™®é€šå¯¹è±¡ï¼š<code>{ name: 'Tom' }</code></li>
<li>æ•°ç»„ï¼š<code>[1, 2, 3]</code></li>
<li>å‡½æ•°ï¼š<code>function() {}</code></li>
<li>æ—¥æœŸï¼š<code>new Date()</code></li>
<li>æ­£åˆ™ï¼š<code>/abc/</code></li>
<li>ç”šè‡³ <code>Map</code>ã€<code>Set</code>ã€<code>Promise</code> ç­‰</li>
</ul>
<p>å¼•ç”¨ç±»å‹çš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š<strong>å¯å˜ã€é€šè¿‡å¼•ç”¨æ¥è®¿é—®å®é™…æ•°æ®</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€å®ƒä»¬åœ¨å†…å­˜ä¸­æ€ä¹ˆå­˜å‚¨ï¼Ÿ</h2>
<p>è¿™æ˜¯ç†è§£ä¸€åˆ‡è¡Œä¸ºå·®å¼‚çš„æ ¹æºï¼</p>
<p>è®¡ç®—æœºå†…å­˜å¤§è‡´åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼š</p>
<ul>
<li><strong>æ ˆï¼ˆStackï¼‰</strong>ï¼šé€Ÿåº¦å¿«ï¼Œç©ºé—´å°ï¼Œç”¨äºå­˜å‚¨ç®€å•ã€å›ºå®šå¤§å°çš„æ•°æ®ã€‚</li>
<li><strong>å †ï¼ˆHeapï¼‰</strong>ï¼šç©ºé—´å¤§ï¼Œé€Ÿåº¦ç¨æ…¢ï¼Œç”¨äºå­˜å‚¨å¤æ‚ã€åŠ¨æ€å¤§å°çš„æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-4">åŸå§‹ç±»å‹ï¼šç›´æ¥å­˜åœ¨æ ˆé‡Œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> age = <span class="hljs-number">25</span>;
<span class="hljs-keyword">let</span> isStudent = <span class="hljs-literal">true</span>;
</code></pre>
<p>è¿™ä¸¤ä¸ªå˜é‡å°±åƒä¸¤ä¸ªå°æŠ½å±‰ï¼Œ<strong>å€¼æœ¬èº«ç›´æ¥æ”¾åœ¨æ ˆä¸­</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ ˆï¼ˆStackï¼‰</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">age:</span> <span class="hljs-number">25</span>         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">isStudent:</span> <span class="hljs-literal">true</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<p>å½“ä½ å¤åˆ¶ä¸€ä¸ªåŸå§‹å€¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> myAge = age; <span class="hljs-comment">// æŠŠ 25 å¤åˆ¶ä¸€ä»½</span>
myAge = <span class="hljs-number">30</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age); <span class="hljs-comment">// ä»ç„¶æ˜¯ 25</span>
</code></pre>
<p>å› ä¸º <code>myAge</code> æ‹¿åˆ°çš„æ˜¯ <strong>å…¨æ–°çš„å‰¯æœ¬</strong>ï¼Œå’Œ <code>age</code> å®Œå…¨æ— å…³ã€‚</p>
<p>æ‰€ä»¥åŸå§‹ç±»å‹æ˜¯æŒ‰å€¼è¿›è¡Œä¼ é€’ï¼ˆPass by Valueï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-5">å¼•ç”¨ç±»å‹ï¼šæ ˆå­˜åœ°å€ï¼Œå †å­˜çœŸå®å¯¹è±¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Alice'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };
</code></pre>
<p>è¿™æ—¶å‘ç”Ÿäº†ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>å¯¹è±¡ <code>{ name: 'Alice', age: 25 }</code> è¢«åˆ›å»ºï¼Œå­˜æ”¾åœ¨å †ä¸­ã€‚</li>
<li>å˜é‡ <code>user</code> å¹¶ä¸ç›´æ¥åŒ…å«è¿™ä¸ªå¯¹è±¡ï¼Œè€Œæ˜¯ä¿å­˜ä¸€ä¸ªæŒ‡å‘å †ä¸­å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œè¿™ä¸ªåœ°å€æ”¾åœ¨æ ˆé‡Œã€‚</li>
</ol>
<p>å›¾ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">æ ˆï¼ˆStackï¼‰              å †ï¼ˆHeapï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user: [åœ°å€A] â”œâ”€â”€â”€â”€â”€â†’â”‚ { name: <span class="hljs-string">'Alice'</span>, age: <span class="hljs-number">25</span> } â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å½“ä½ èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> admin = user; <span class="hljs-comment">// å¤åˆ¶çš„æ˜¯åœ°å€ï¼Œä¸æ˜¯å¯¹è±¡ï¼</span>
admin.<span class="hljs-property">name</span> = <span class="hljs-string">'Bob'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">name</span>); <span class="hljs-comment">// è¾“å‡º "Bob"ï¼</span>
</code></pre>
<p>å› ä¸º <code>admin</code> å’Œ <code>user</code> <strong>æŒ‡å‘åŒä¸€ä¸ªå †ä¸­çš„å¯¹è±¡</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ ˆï¼ˆStackï¼‰</span>              <span class="hljs-string">å †ï¼ˆHeapï¼‰</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>      
<span class="hljs-string">â”‚</span> <span class="hljs-attr">user:</span> [<span class="hljs-string">åœ°å€A</span>] <span class="hljs-string">â”œâ”€â”€â”</span>   
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">admin:</span> [<span class="hljs-string">åœ°å€A</span>] <span class="hljs-string">â”œâ”€â”€â”¼â”€â”€â†’â”‚</span> { <span class="hljs-attr">name:</span> <span class="hljs-string">'Bob'</span>, <span class="hljs-attr">age:</span> <span class="hljs-number">25</span> }  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                  <span class="hljs-string">â”‚</span>
                  <span class="hljs-string">â””â”€â”€â”€â”˜</span>
</code></pre>
<p>æ‰€ä»¥å¼•ç”¨ç±»å‹æ˜¯æŒ‰å…±äº«çš„æ–¹å¼è¿›è¡Œä¼ é€’ï¼ˆPass by Sharingï¼‰</p>
<p>æ³¨æ„ï¼šä¸æ˜¯æŒ‰å¼•ç”¨ä¼ é€’ï¼ŒJS ä¸­æ²¡æœ‰çœŸæ­£çš„æŒ‰å¼•ç”¨ä¼ é€’</p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€æ·±å…¥å¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>åŸå§‹ç±»å‹</th><th>å¼•ç”¨ç±»å‹ï¼ˆå¯¹è±¡ï¼‰</th></tr></thead><tbody><tr><td>å­˜å‚¨ä½ç½®</td><td>æ ˆï¼ˆStackï¼‰</td><td>æ ˆï¼ˆå­˜å¼•ç”¨åœ°å€ï¼‰ + å †ï¼ˆå­˜å®é™…å¯¹è±¡ï¼‰</td></tr><tr><td>èµ‹å€¼è¡Œä¸º</td><td>å¤åˆ¶å€¼æœ¬èº«</td><td>å¤åˆ¶å¼•ç”¨åœ°å€ï¼ˆå¤šä¸ªå˜é‡å…±äº«åŒä¸€å¯¹è±¡ï¼‰</td></tr><tr><td>æ˜¯å¦å¯å˜</td><td>ä¸å¯å˜ï¼ˆæ“ä½œç”Ÿæˆæ–°å€¼ï¼‰</td><td>å¯å˜ï¼ˆå¯ç›´æ¥ä¿®æ”¹å±æ€§ï¼‰</td></tr><tr><td>æ¯”è¾ƒæ–¹å¼</td><td>æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰</td><td>æ¯”è¾ƒå¼•ç”¨åœ°å€æ˜¯å¦ç›¸åŒ</td></tr><tr><td>å†…å­˜å ç”¨</td><td>å›ºå®šã€è¾ƒå°</td><td>åŠ¨æ€ã€å¯èƒ½å¾ˆå¤§</td></tr><tr><td>å…¸å‹åœºæ™¯</td><td>æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼</td><td>å¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°</td></tr></tbody></table>
<h3 data-id="heading-7">ä¸¾ä¸ªæ¯”è¾ƒçš„ä¾‹å­ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸå§‹ç±»å‹æ¯”è¾ƒ</span>
<span class="hljs-number">5</span> === <span class="hljs-number">5</span>; <span class="hljs-comment">// true</span>
<span class="hljs-string">'hi'</span> === <span class="hljs-string">'hi'</span>; <span class="hljs-comment">// true</span>

<span class="hljs-comment">// å¼•ç”¨ç±»å‹æ¯”è¾ƒ</span>
{} === {}; <span class="hljs-comment">// falseï¼ä¸¤ä¸ªä¸åŒå¯¹è±¡</span>
<span class="hljs-keyword">let</span> a = {}; <span class="hljs-keyword">let</span> b = a;
a === b; <span class="hljs-comment">// trueï¼åŒä¸€ä¸ªå¯¹è±¡</span>
</code></pre>
<hr/>
<h2 data-id="heading-8">å››ã€å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-9">ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²å¾ˆé•¿ï¼Œä¹Ÿç®—åŸå§‹ç±»å‹ï¼Ÿ</h3>
<p>è™½ç„¶å­—ç¬¦ä¸²å¯èƒ½å¾ˆé•¿ï¼Œä½† JS å¼•æ“ä¼šåšå†…éƒ¨ä¼˜åŒ–ï¼ˆæ¯”å¦‚ä½¿ç”¨æŒ‡é’ˆï¼‰ï¼Œä½†ä»<strong>è¯­è¨€è¯­ä¹‰</strong>ä¸Šï¼Œå­—ç¬¦ä¸²æ˜¯<strong>ä¸å¯å˜çš„åŸå§‹å€¼</strong>ã€‚ä»»ä½•â€œä¿®æ”¹â€éƒ½ä¼šç”Ÿæˆæ–°å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> s = <span class="hljs-string">'hello'</span>;
s = s + <span class="hljs-string">' world'</span>; <span class="hljs-comment">// åˆ›å»ºäº†æ–°å­—ç¬¦ä¸²ï¼ŒåŸ 'hello' æœªè¢«ä¿®æ”¹</span>
</code></pre>
<h3 data-id="heading-10">å¦‚ä½•çœŸæ­£å¤åˆ¶ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯å…±äº«ï¼Ÿ</h3>
<p><strong>æµ…æ‹·è´</strong>ï¼šåªå¤åˆ¶ç¬¬ä¸€å±‚å±æ€§</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> newObj = { ...oldObj };
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-keyword">let</span> newObj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, oldObj);
</code></pre>
<p><strong>æ·±æ‹·è´</strong>ï¼šé€’å½’å¤åˆ¶æ‰€æœ‰å±‚çº§ï¼ˆéœ€æ³¨æ„å¾ªç¯å¼•ç”¨ç­‰é—®é¢˜ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> deepCopy = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj)); <span class="hljs-comment">// æœ‰å±€é™ï¼ˆä¸èƒ½æ‹·è´å‡½æ•°ã€undefined ç­‰ï¼‰</span>
<span class="hljs-comment">// æ¨èä½¿ç”¨ Lodash çš„ _.cloneDeep()</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">äº”ã€æ€»ç»“</h2>
<ol>
<li><strong>åŸå§‹ç±»å‹</strong>ï¼šå€¼ç›´æ¥å­˜åœ¨æ ˆé‡Œï¼Œèµ‹å€¼æ˜¯å¤åˆ¶å€¼ï¼Œäº’ä¸å½±å“ã€‚</li>
<li><strong>å¼•ç”¨ç±»å‹</strong>ï¼šæ ˆé‡Œå­˜åœ°å€ï¼Œå †é‡Œå­˜å¯¹è±¡ï¼Œèµ‹å€¼æ˜¯å¤åˆ¶åœ°å€ï¼Œå…±äº«åŒä¸€å¯¹è±¡ã€‚</li>
<li><strong>ç†è§£å­˜å‚¨æœºåˆ¶</strong>ï¼Œæ˜¯æŒæ¡ JS èµ‹å€¼ã€å‡½æ•°ä¼ å‚ã€çŠ¶æ€ç®¡ç†ã€æ€§èƒ½ä¼˜åŒ–çš„åŸºç¡€ï¼</li>
</ol>
<hr/>
<p>ä¸‹æ¬¡å½“ä½ çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> a = obj;
a.<span class="hljs-property">x</span> = <span class="hljs-number">10</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">x</span>); <span class="hljs-comment">// ä¸ºä»€ä¹ˆå˜äº†ï¼Ÿ</span>
</code></pre>
<p>ä½ å°±çŸ¥é“ï¼š<strong>å› ä¸º a å’Œ obj æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼</strong></p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-12">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F184BGM_pdMFLc0ASrferwQ" target="_blank" title="https://mp.weixin.qq.com/s/184BGM_pdMFLc0ASrferwQ" ref="nofollow noopener noreferrer">ã€Šä»£ç é‡Œå…¨æ˜¯ new å¯¹è±¡ï¼ŒçœŸçš„å¾ˆ Low å—ï¼Ÿæˆ‘è®¤çœŸæƒ³äº†ä¸€æ™šã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp0n2mN5RDDDaIWuHHVRUZQ" target="_blank" title="https://mp.weixin.qq.com/s/p0n2mN5RDDDaIWuHHVRUZQ" ref="nofollow noopener noreferrer">ã€ŠJava å¼€å‘å¿…çœ‹ï¼šä»€ä¹ˆæ—¶å€™ç”¨ forï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Streamï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FX-MSa0CHwVW_qgPezbpMUA" target="_blank" title="https://mp.weixin.qq.com/s/X-MSa0CHwVW_qgPezbpMUA" ref="nofollow noopener noreferrer">ã€Šè¿™ 5 ä¸ªå†·é—¨ HTML æ ‡ç­¾ï¼Œè®©æˆ‘ç›´æ¥åˆ äº†100 è¡Œ JS ä»£ç ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FT3ronvigepWew6dRC4uH2g" target="_blank" title="https://mp.weixin.qq.com/s/T3ronvigepWew6dRC4uH2g" ref="nofollow noopener noreferrer">ã€ŠVue ç»„ä»¶é€šä¿¡çš„ 8 ç§æœ€ä½³å®è·µï¼Œä½ çŸ¥é“å‡ ç§ï¼Ÿã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAGè¯„æµ‹å®Œæ•´æŒ‡å—ï¼šæŒ‡æ ‡ã€æµ‹è¯•å’Œæœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7588031908171890697</link>    <guid>https://juejin.cn/post/7588031908171890697</guid>    <pubDate>2025-12-27T06:18:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588031908171890697" data-draft-id="7588028859541241882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAGè¯„æµ‹å®Œæ•´æŒ‡å—ï¼šæŒ‡æ ‡ã€æµ‹è¯•å’Œæœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-27T06:18:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAGè¯„æµ‹å®Œæ•´æŒ‡å—ï¼šæŒ‡æ ‡ã€æµ‹è¯•å’Œæœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T06:18:45.000Z" title="Sat Dec 27 2025 06:18:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿï¼‰æœ€åˆç”±Facebook AI Researchï¼ˆç°Meta AIï¼‰å›¢é˜Ÿåœ¨è®ºæ–‡ Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks ä¸­æå‡ºï¼Œå¹¶å‘è¡¨äºNeurIPS 2020ã€‚</p>
<p>å¦‚æœä½ æœ‰ä½¿ç”¨RAGåº”ç”¨ï¼Œä½ ä¼šå‘ç°ï¼ŒRAGæ¡†æ¶æ˜¯ä¸€ä¸ªå¤æ‚çš„å·¥ä½œæµï¼ŒåŒ…æ‹¬åˆ†å—ã€æœç´¢ã€ä¸Šä¸‹æ–‡æ‹¼æ¥å’Œå†…å®¹ç”Ÿæˆç­‰æ­¥éª¤ï¼Œä¸€æ—¦ç³»ç»Ÿæœ€ç»ˆå“åº”çš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸï¼Œå¯¹äºé—®é¢˜çš„å®šä½ä¼šéå¸¸å¤æ‚ï¼Œæ˜¯æ¨¡å‹å‡ºç°äº†å¹»è§‰ï¼Ÿè¿˜æ˜¯ä»ä¸€å¼€å§‹å°±æ²¡æœ‰è·å–åˆ°æ­£ç¡®çš„ä¿¡æ¯ï¼Ÿ</p>
<p>è¿™å°±éœ€è¦ä¸€ä¸ªå®Œå–„çš„RAGè¯„ä¼°ä½“ç³»ï¼šè¯„ä¼°RAGç³»ç»Ÿå„ä¸ªæ¨¡å—è¿è¡Œçš„æ•ˆæœï¼Œåœ¨ç”¨æˆ·ä¹‹å‰åˆ†æé—®é¢˜ã€ç”šè‡³æ˜¯é¢„åˆ¤é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« ä¼šå’Œå¤§å®¶è¯¦ç»†èŠèŠï¼Œå¦‚ä½•åœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸­è¯„ä¼°RAGç³»ç»Ÿã€‚</p>
<h2 data-id="heading-0">å…¨æ–‡é€Ÿè§ˆ</h2>
<ul>
<li><strong>åŸºæœ¬æ¦‚å¿µ</strong>ï¼š<strong>RAGç³»ç»Ÿ</strong>èƒ½å¤Ÿä»å¤§é‡çš„è¯­æ–™åº“ä¸­æ£€ç´¢å‡ºä¸è¾“å…¥é—®é¢˜ç›¸å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨è¿™äº›ä¿¡æ¯ç”Ÿæˆå‡†ç¡®ã€åˆç†çš„å›ç­”,Â <strong>RAGè¯„ä¼°</strong>ç”¨äºè¯„ä»·RAGç³»ç»Ÿæ€§èƒ½çš„ç³»ç»Ÿæ–¹æ³•ã€‚</li>
<li><strong>RAGè¯„ä¼°æ ¸å¿ƒå†…å®¹</strong>ï¼š<strong>æ£€ç´¢</strong>ï¼ˆæŸ¥æ‰¾æœ‰ç”¨ä¿¡æ¯ï¼‰ã€<strong>ç”Ÿæˆ</strong>ï¼ˆç”Ÿæˆæœ€ç»ˆç­”æ¡ˆï¼‰ã€‚</li>
<li><strong>æ£€ç´¢è¯„ä¼°</strong>ï¼šåˆ†ä¸ºæ’åºã€ä¸Šä¸‹æ–‡ç›¸å…³æ€§æŒ‡æ ‡ï¼Œå‰è€…å¯ä»¥é‡‡ç”¨Top-Kå¬å›ï¼Œåè€…å¯ä»¥é‡‡ç”¨äººå·¥æˆ–LLMæ¥åˆ¤æ–­ã€‚</li>
<li><strong>ç”Ÿæˆè¯„ä¼°</strong></li>
</ul>

<ul>
<li><strong>æœ‰çœŸå€¼</strong>ï¼šä½¿ç”¨LLMä½œä¸ºè¯„åˆ¤å‘˜æˆ–è¯­ä¹‰ç›¸ä¼¼æ€§ï¼Œå°†è¾“å‡ºä¸æ­£ç¡®ç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒã€‚</li>
<li><strong>æ— çœŸå€¼</strong>ï¼šå¯ä»¥æ£€æŸ¥å“åº”çš„å¿ è¯šåº¦ã€å®Œæ•´æ€§ã€è¯­æ°”æˆ–ç»“æ„è´¨é‡</li>
</ul>

<ul>
<li><strong>åˆæˆæµ‹è¯•æ•°æ®</strong>ï¼šä¸€ç§å¸®åŠ©RAGè¯„ä¼°çš„æ–¹æ³•ï¼Œé€šè¿‡ä»çŸ¥è¯†åº“ä¸­ç”Ÿæˆé—®ç­”å¯¹æ¥å®ç°ï¼Œç”¨ä»¥åœ¨æ²¡æœ‰çœŸå®æ•°æ®çš„æƒ…å†µä¸‹å¿«é€Ÿæ„å»ºå’Œæµ‹è¯•é›†ã€‚</li>
<li><strong>é²æ£’æ€§æµ‹è¯•å’Œå¯¹æŠ—æ€§æµ‹è¯•</strong>ï¼šç¡®ä¿RAGç³»ç»Ÿåœ¨é¢å¯¹é£é™©è¾“å…¥æˆ–æç«¯æƒ…å†µæ—¶ï¼Œå“åº”ä»ç„¶å®‰å…¨ä¸€è‡´ã€‚é²æ£’æ€§æµ‹è¯•è¯„ä¼°RAGç³»ç»Ÿåœ¨æ­£å¸¸åœºæ™¯ä¹‹å¤–çš„è¡Œä¸ºï¼Œå¹¶è§‚å¯Ÿå…¶èƒ½å¦ä»å®¹çš„åº”å¯¹ã€‚å¯¹æŠ—æ€§æµ‹è¯•ä¾§é‡ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œæµ‹è¯•RAGç³»ç»Ÿèƒ½å¤ŸæŠµå¾¡æ¶æ„æ”»å‡»æˆ–è¯¯æ“ä½œï¼Œå¹¶ä¿æŠ¤ç”¨æˆ·çš„æ•°æ®å’Œéšç§ã€‚</li>
</ul>
<h2 data-id="heading-1">åŸºæœ¬æ¦‚å¿µ</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ RAGï¼Ÿ</h3>
<p>RAGä½œä¸ºå½“ä¸‹ä¸»æµçš„LLMåº”ç”¨æ¡†æ¶ï¼Œå°†å¤–æŒ‚çš„çŸ¥è¯†åº“ï¼ˆå¦‚ç½‘ç»œæ•°æ®ã€ä¼ä¸šç§æœ‰æ–‡æ¡£ï¼‰ã€LLMå†…ç½®çš„çŸ¥è¯†å®Œç¾èåˆï¼Œæœ‰æ•ˆè§£å†³LLMä¸­å­˜åœ¨çš„<strong>ä¿¡æ¯è¿‡æ—¶</strong>ã€<strong>è¾“å‡ºå¹»è§‰ã€è¡Œä¸šæ•°æ®éš”ç¦»</strong>ç­‰ç—›ç‚¹é—®é¢˜ï¼Œäº§ç”Ÿæ›´å‡†ç¡®ã€æ›´æœ‰ç”¨çš„ç»“æœã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¸€å®¶å…¬å¸çš„å®¢æœæœºå™¨äººï¼ŒLLMæ˜¯å¾ˆéš¾çŸ¥é“è¿™å®¶å…¬å¸çš„äº§å“åŠŸèƒ½ã€ä¸šåŠ¡é€»è¾‘çš„ã€‚ç›¸åï¼ŒRAGç³»ç»Ÿåœ¨ç”¨æˆ·æå‡ºé—®é¢˜æ—¶ï¼Œä¼šæ£€ç´¢å…¬å¸å†…éƒ¨çš„äº§å“æˆ–ä¸šåŠ¡æ–‡æ¡£ï¼Œå°†æ£€ç´¢åˆ°çš„ç›¸å…³å†…å®¹äº¤ç»™LLMï¼Œç”±LLMç”Ÿæˆæœ€ç»ˆçš„ç­”æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84448f6a01504fe0bac6ce6db54eba92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=tnPRbhFPAN9F0dou1d7g9SpMQBc%3D" alt="" loading="lazy"/></p>
<p>RAG ç³»ç»Ÿå¯ä»¥åˆ†ä¸ºä¸¤å¤§æ­¥éª¤ï¼š</p>
<ul>
<li>Rï¼ˆRetrievalï¼‰: å°è¯•æ‰¾åˆ°ä¸ç”¨æˆ·æŸ¥è¯¢æœ€ç›¸å…³çš„ä¿¡æ¯ç‰‡æ®µï¼Œä¿¡æ¯çš„æ¥æºåŒ…æ‹¬æ–‡æ¡£å­˜å‚¨åº“ã€çŸ¥è¯†åº“ã€SQLæŸ¥è¯¢æ•°æ®åº“ç­‰ã€‚</li>
<li>Gï¼ˆGenerateï¼‰: åˆ©ç”¨æ£€ç´¢åˆ°çš„ä¿¡æ¯ç”Ÿæˆç­”æ¡ˆ</li>
</ul>
<p>éœ€è¦æé†’çš„æ˜¯ï¼ŒRAGç³»ç»Ÿæ˜¯ä¸€ç§è®¾è®¡ç†å¿µï¼Œè€Œéå•ä¸€çš„å®ç°å½¢å¼ã€‚æ¯”å¦‚ï¼Œ<strong>æ£€ç´¢</strong>éƒ¨åˆ†çš„å®ç°å½¢å¼æ˜¯å¤šæ ·çš„ï¼Œå¦‚è¯­ä¹‰æœç´¢ã€å…³é”®è¯æœç´¢ã€SQLæŸ¥è¯¢ï¼Œç”šè‡³æ˜¯APIè°ƒç”¨ï¼Œä¸ºæ¨¡å‹æä¾›æœ‰ç”¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<p>åœ¨ä¼ä¸šåº”ç”¨ä¸­ï¼Œæ£€ç´¢å®é™…ä¸Šæ˜¯å¯¹å†…éƒ¨çš„å¤§é‡éç»“æ„åŒ–æ–‡æ¡£è¿›è¡Œæœç´¢çš„ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ–‡æ¡£çš„å‡†å¤‡ã€å­˜å‚¨ã€ç´¢å¼•æ–¹å¼å’Œæ’åºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51974b77ef0e4220806e0b2953148e43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=ypF%2BIYZEhZ3wFXqI2rJZa66%2FNE8%3D" alt="" loading="lazy"/></p>
<p>æ£€ç´¢å®Œæˆåï¼Œéœ€è¦ä¸ºLLMæ„å»ºå®Œæ•´çš„æç¤ºä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç”¨æˆ·çš„é—®é¢˜</li>
<li>æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡</li>
<li>ç³»ç»Ÿæç¤ºï¼Œçº¦å®šæ¨¡å‹æŒ‰ç…§ä»€ä¹ˆæ ¼å¼è¾“å‡ºç­”æ¡ˆ</li>
</ul>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯ RAG è¯„ä¼°ï¼Ÿ</h3>
<p>å®šä¹‰ï¼šæ—¨åœ¨è¡¡é‡RAGç³»ç»Ÿåœ¨å®é™…åº”ç”¨ä¸­çš„æ€§èƒ½è¡¨ç°ã€‚æ¯”å¦‚ï¼šæ˜¯å¦æå–äº†æ­£ç¡®çš„ä¿¡æ¯ï¼Ÿæ˜¯å¦ç»™å‡ºäº†æ­£ç¡®çš„ç­”æ¡ˆï¼Ÿè¾“å‡ºç»“æœæ˜¯å¦å¯ä¿¡ï¼Ÿä¸€ä¸ªåˆç†çš„è¯„ä¼°ä½“ç³»æœ‰åŠ©äºå›ç­”è¿™äº›é—®é¢˜ï¼Œå¹¶æŒ‡å¯¼å¼€å‘å·¥ç¨‹å¸ˆåšå‡ºæ›´å¥½çš„è®¾è®¡å†³ç­–ã€‚</p>
<p>RAGç³»ç»Ÿå°±åƒä¸€å°ç²¾å¯†çš„æœºå™¨ï¼Œè¦è®©å®ƒç¨³å®šè¿è½¬ï¼Œæ¯ä¸ªå…³é”®ç¯èŠ‚éƒ½è¦åšæ‰å®ï¼šæ–‡æ¡£çš„åˆ†å—å’Œå­˜å‚¨æ–¹å¼ã€ä½¿ç”¨çš„åµŒå…¥æ¨¡å‹ã€æ£€ç´¢é€»è¾‘ã€æç¤ºæ ¼å¼ã€LLM ç‰ˆæœ¬ç­‰ç­‰ã€‚</p>
<p>ä¸€å¥—é è°±çš„è¯„ä¼°æ–¹æ³•ï¼Œå°±åƒè¿™å°ç²¾å¯†æœºå™¨çš„è°ƒè¯•å·¥å…·ç®±ï¼Œèƒ½è§£å†³å¾ˆå¤šå®é™…é—®é¢˜ï¼š</p>
<ul>
<li>å¿«é€Ÿç»™å‡ºä¸åŒæ–¹æ¡ˆçš„å¯¹æ¯”æ•ˆæœï¼Œæ¯”å¦‚å“ªç§æ–‡æ¡£åˆ†å—æ–¹å¼æ‰¾ç­”æ¡ˆæ›´å‡†</li>
<li>è¿½è¸ªå“ªäº›å› ç´ èƒ½æé«˜æˆ–é™ä½æ•ˆæœ</li>
<li>ç²¾å‡†å®šä½é—®é¢˜ï¼Œå½“ç³»ç»Ÿç­”éæ‰€é—®æˆ–å‡ºé”™æ—¶ï¼Œèƒ½æ›´å¿«æ‰¾åˆ°ç—‡ç»“åœ¨å“ªå„¿ï¼Œè°ƒè¯•èµ·æ¥æ›´çœå¿ƒã€‚</li>
</ul>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œåˆ°åº•è¯¥å¦‚ä½•è¯„ä¼°å‘¢ï¼Ÿä¸€ç§ç®€å•çš„æ–¹å¼ï¼Œå¯¹RAGç³»ç»Ÿè¿›è¡Œç«¯åˆ°ç«¯è¯„ä¼°ï¼Œé‡ç‚¹å…³æ³¨æœ€ç»ˆç­”æ¡ˆçš„è´¨é‡ï¼Œè¿™ç§æ–¹å¼å°½ç®¡ä¹Ÿå¯è¡Œï¼Œä½†ä¸åˆ©äºé—®é¢˜çš„æ’æŸ¥ã€æ•ˆæœçš„ä¼˜åŒ–ã€‚</p>
<p>æ›´ä¼˜çš„æ–¹å¼æ˜¯ï¼Œå°†æ£€ç´¢å’Œç”Ÿæˆé˜¶æ®µåˆ†å¼€è¯„æµ‹ï¼Œè¿™å¯¹äºè°ƒè¯•ä¹Ÿè‡³å…³é‡è¦ã€‚å½“ä½ å¾—åˆ°é”™è¯¯ç­”æ¡ˆæ—¶ï¼Œä½ é¦–å…ˆåº”è¯¥é—®è‡ªå·±ï¼šå“ªé‡Œå‡ºé”™äº†ï¼Ÿ</p>
<ul>
<li>ç³»ç»Ÿæ˜¯å¦æ£€ç´¢åˆ°æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li>ä¸Šä¸‹æ–‡æ­£ç¡®äº†ï¼Œæ¨¡å‹æ˜¯ä¸æ˜¯å‡ºç°äº†å¹»è§‰</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ†åˆ«ä»‹ç»æ£€ç´¢å’Œç”Ÿæˆé˜¶æ®µçš„è¯„ä¼°æ–¹æ³•</p>
<h2 data-id="heading-4">æ£€ç´¢é˜¶æ®µçš„è¯„ä¼°æ–¹æ³•</h2>
<p>ä¸‹é¢å°†ä»‹ç»<strong>æœ‰çœŸå€¼ã€äººå·¥æ ‡æ³¨å’ŒLLM</strong>ä¸‰ç§è¯„ä¼°æ–¹æ³•ã€‚</p>
<h3 data-id="heading-5">æœ‰çœŸå€¼çš„è¯„ä¼°æ–¹æ³•</h3>
<p>æ£€ç´¢è¯„ä¼°å¹¶éä¸€ä¸ªæ–°è¯é¢˜ï¼Œæ‰€æœ‰æœç´¢å¼•æ“çš„èƒŒåéƒ½æœ‰ä¸€å¥—è¿™æ ·çš„è¯„ä¼°æœºåˆ¶ï¼Œæ¯”å¦‚ç™¾åº¦ã€è°·æ­Œï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æœºå™¨å­¦ä¹ åº”ç”¨åœºæ™¯ã€‚åœ¨è¿™å¥—è¯„ä¼°æœºåˆ¶çš„å¼•å¯¼ä¸‹ï¼Œå·¥ç¨‹å¸ˆå¯ä»¥ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„äº§å“æœåŠ¡ã€‚ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™å¥—æ–¹æ³•å¤ç”¨åˆ°RAGç³»ç»Ÿä¸­ã€‚</p>
<p>ä½ éœ€è¦æœ‰ä¸€ä¸ª<strong>çœŸå€¼æ•°æ®é›†ï¼Œå¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œéœ€è¦å®šä¹‰åŒ…å«ç­”æ¡ˆçš„æ­£ç¡®æ¥æºï¼Œå¯ä»¥æ˜¯æ–‡æ¡£IDã€æ•°æ®å—ID æˆ–é“¾æ¥ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be2215a44ecc468bbe4b0daf728a6120~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=AlGi45txZveTYcmObaSfrwgm9DY%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä¿¡æ¯æ£€ç´¢æœ¯è¯­ä¸­ï¼Œè¿™äº›è¢«ç§°ä¸º<strong>ç›¸å…³</strong>æ–‡æ¡£ï¼Œå³ä¸ºç”¨æˆ·æŸ¥è¯¢æä¾›æ­£ç¡®ã€æœ‰æ•ˆä¿¡æ¯çš„æ¡ç›®ã€‚</p>
<p>æœ‰äº†è¿™ä»½çœŸå€¼æ•°æ®é›†ï¼Œå°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­è¿è¡ŒæŸ¥è¯¢ï¼Œå¹¶é€šè¿‡æ¯”è¾ƒæ£€ç´¢åˆ°çš„æ•°æ®å—ä¸é¢„æœŸæ•°æ®å—ï¼Œæ¥æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿæ‰¾åˆ°é¢„æœŸçš„ä¸Šä¸‹æ–‡ã€‚ä¸ºäº†é‡åŒ–ç»“æœï¼Œå¯ä»¥è®¡ç®—æ ‡å‡†çš„ä¿¡æ¯æ£€ç´¢æŒ‡æ ‡ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼Œåç»­å°†ä»¥ä¸“æ çš„å½¢å¼ï¼Œè¯¦ç»†ä»‹ç»å„ç±»è¯„ä¼°æŒ‡æ ‡çš„åŸç†ã€å®ç°ï¼š</p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç²¾ç¡®åº¦@k</td><td>åœ¨æ£€ç´¢åˆ°çš„å‰kä¸ªç»“æœä¸­ï¼Œæœ‰å¤šå°‘æ˜¯çœŸæ­£ç›¸å…³çš„ï¼Ÿ</td></tr><tr><td>å¬å›@k</td><td>åœ¨æ‰€æœ‰ç›¸å…³æ–‡æ¡£ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªæ–‡æ¡£è¢«æ£€ç´¢åˆ°æ’åå‰kä¹‹åˆ—ï¼Ÿ</td></tr><tr><td>å‘½ä¸­ç‡</td><td>å‰kä¸ªç»“æœä¸­æ˜¯å¦è‡³å°‘å‡ºç°è¿‡ä¸€ä¸ªç›¸å…³æ¡ç›®ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰</td></tr><tr><td>NDCG@k</td><td>å½’ä¸€åŒ–æŠ˜æ‰£ç´¯è®¡æ”¶ç›Šï¼šç”¨æ¥è¡¡é‡æ’åå‰kä¸ªæ£€ç´¢ç»“æœçš„ç›¸å…³æ€§å’Œæ’åºåˆç†æ€§</td></tr></tbody></table>
<p>ä»¥<strong>ç²¾ç¡®åº¦@k</strong>æŒ‡æ ‡ä¸ºä¾‹ï¼Œå…¶è®¡ç®—ç¤ºæ„å›¾å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7b95f8bf97e4c41858e77772b04b522~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=fNjsji2ncYxYwezTz94guWXtnYY%3D" alt="" loading="lazy"/></p>
<p>è¿™äº›è¯„ä¼°æŒ‡æ ‡èƒ½å¸®åŠ©æˆ‘ä»¬æœ‰æ•ˆå¯¹æ¯”ä¸åŒçš„æœç´¢é…ç½®ï¼Œæ¯”å¦‚é‡æ’è§„åˆ™ã€åµŒå…¥æ–¹æ³•ï¼Œè¿˜èƒ½å®šä½é—®é¢˜ã€‚ç¼ºç‚¹æ˜¯ï¼Œæ„å»ºçœŸå®çš„æµ‹è¯•æ•°æ®é›†ç‰¹åˆ«è€—æ—¶ï¼Œéœ€è¦äººå·¥æŠŠæ¯ä¸ªæµ‹è¯•é—®é¢˜å¯¹åº”åˆ°æ­£ç¡®çš„å‚è€ƒå†…å®¹ä¸Šã€‚</p>
<h3 data-id="heading-6">äººå·¥æ ‡æ³¨ç›¸å…³æ€§</h3>
<p>è¿™æ˜¯ä¸€ç§ç›¸å¯¹ç®€å•çš„æ–¹æ³•ï¼Œåœ¨æ£€ç´¢åè¯„ä¼°ç»“æœã€‚</p>
<p>æ— éœ€é¢„å…ˆå®šä¹‰ç›¸å…³æ–‡æ¡£ï¼Œè®©ç³»ç»ŸæŒ‰åŸæ ·è¿è¡Œæµ‹è¯•æŸ¥è¯¢ï¼Œç„¶åæ‰‹åŠ¨è¯„ä¼°ç»“æœã€‚å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œéƒ½è¦æ£€æŸ¥ç³»ç»Ÿçš„æ£€ç´¢å†…å®¹ï¼Œå¹¶åˆ†é…ä¸€ä¸ªæ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š<em>ç›¸å…³</em>ã€<em>éƒ¨åˆ†ç›¸å…³ ã€ä¸ç›¸å…³</em>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a4f4f98d53845bcb391f14a1a877d89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=UxRjSGu2RhSz9DCgfPAD1PpmBNc%3D" alt="" loading="lazy"/></p>
<p>è®¸å¤šå›¢é˜Ÿåœ¨å®è·µä¸­ä¹Ÿæ˜¯ç”¨è¿™ç§æ–¹æ³•è¯„ä¼°æ£€ç´¢æ•ˆæœçš„ã€‚ä¾‹å¦‚ï¼Œè°·æ­Œåˆ¶å®šäº†è¯¦å°½çš„å†…éƒ¨å‡†åˆ™ ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%2Fhowsearchworks%2Fhow-search-works%2Frigorous-testing%2F" target="_blank" title="https://www.google.com/search/howsearchworks/how-search-works/rigorous-testing/" ref="nofollow noopener noreferrer">www.google.com/search/howsâ€¦</a>ï¼‰ä¾›äººå·¥è¯„åˆ†å‘˜å‚è€ƒã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯çµæ´»ï¼Œå¯ä»¥è¯„ä¼°æ•´ä¸ªæ£€ç´¢æµç¨‹åœ¨å®é™…è¿è¡Œä¸­çš„æ•ˆæœï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>è¯„ä¼°ç”¨æˆ·åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®é™…çœ‹åˆ°çš„æ£€ç´¢è´¨é‡ã€‚</li>
<li>æ‰¾å‡ºæ€§èƒ½æå·®çš„æŸ¥è¯¢</li>
<li>æ›´å¥½åœ°ç†è§£è¾¹ç•Œæƒ…å†µå’Œæ­§ä¹‰æŸ¥è¯¢</li>
</ul>
<p>ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œæ— æ³•è®¡ç®—å¬å›ç‡ï¼Œå› ä¸ºæ²¡æœ‰çœŸå€¼ã€‚</p>
<h3 data-id="heading-7">LLMè¯„å®¡å‘˜è¯„ä¼°ç›¸å…³æ€§</h3>
<p>LLMè¯„å®¡å‘˜ä½¿ç”¨ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼Œåœ¨è¯„ä¼°æç¤ºè¯çš„å¼•å¯¼ä¸‹ï¼Œè¯„ä»·RAGç³»ç»Ÿå“åº”çš„ç»“æœã€‚æ¯”å¦‚ï¼Œå¯ä»¥ç»™LLMå®šåˆ¶æç¤ºè¯ï¼Œè®©å®ƒåˆ¤æ–­æŸä¸ªå›å¤æœ‰æ²¡æœ‰å¸®åŠ©ï¼Œæˆ–è€…æ˜¯å¦ç¬¦åˆç‰¹å®šçš„è§„åˆ™è¦æ±‚ã€‚</p>
<p>ä¸‹é¢ï¼Œå°†ä¸ºå¤§å®¶ä»‹ç»LLMè¯„å®¡å‘˜çš„ä¸¤ç§æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-8">å¯¹æ•°æ®å—è¯„ä¼°ç›¸å…³æ€§</h4>
<p>å¯ä»¥æŠŠç”¨æˆ·çš„é—®é¢˜å’Œæ£€ç´¢åˆ°çš„æ•°æ®å—ä¸€èµ·ç»™åˆ°LLMè¯„å®¡å‘˜ï¼Œè®©å®ƒæ¥åˆ¤æ–­ä¿¡æ¯å—å’Œç”¨æˆ·é—®é¢˜æ˜¯å¦ç›¸å…³ã€‚</p>
<p>LLMè¯„å®¡å‘˜ç»™å‡ºçš„åˆ¤æ–­ç»“æœæœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<ul>
<li>ç®€å•çš„äºŒåˆ†ç±»æ ‡ç­¾ï¼Œç›´æ¥æ ‡è®°*ç›¸å…³ã€*<em>ä¸ç›¸å…³</em></li>
<li>ç»™å‡ºä¸€ä¸ªå…·ä½“çš„ç›¸å…³æ€§åˆ†æ•°</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6898b8e9e0e437f8d0635103a4eb8df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=Nu7QWkUWDNTy2wn6wfuLP2QSjLc%3D" alt="" loading="lazy"/></p>
<p>è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–LLMè¯„ä¼°æ–¹æ³•ï¼Œä¾‹å¦‚ï¼ŒåŸºäºåµŒå…¥çš„è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ•°å€¼åˆ†æ•°ï¼Œåæ˜ æŸ¥è¯¢å’Œæ£€ç´¢åˆ°çš„æ•°æ®å—åœ¨è¯­ä¹‰ä¸Šçš„ç›¸ä¼¼ç¨‹åº¦ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRAGç³»ç»Ÿä¸€èˆ¬ä¼šå¯¹å•æ¬¡æŸ¥è¯¢è¿”å›å¤šä¸ªæ•°æ®å—ï¼Œè¿™æ„å‘³ç€éœ€è¦å¯¹æ¯ä¸ªæ•°æ®å—å•ç‹¬è¿›è¡Œè¯„åˆ†ã€‚</p>
<p><strong>ä¸¾ä¸ªç®€å•çš„ä¾‹å­</strong>ï¼šå‡è®¾å…³äºé¦™è•‰çš„æŸ¥è¯¢æ£€ç´¢åˆ°ä¸‰ä¸ªçŸ­æ–‡æœ¬å—ã€‚æ¯ä¸ªæ–‡æœ¬å—éƒ½æ˜¯ä¸€ä¸ªå¥å­ï¼Œå¯èƒ½æ¥è‡ªä¸åŒçš„æ–‡æ¡£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c92b06020f9c40c4a354b2565839d3df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=4pqMpuZFtqZj0jmUCXi6it3UBec%3D" alt="" loading="lazy"/></p>
<p>ç„¶åï¼Œé‡‡ç”¨LLMè¯„å®¡å‘˜ä¸ºæ¯ä¸ªæ•°æ®å—åˆ†é…ä¸€ä¸ªç›¸å…³æ€§åˆ†æ•°ï¼Œå…¶ä¸­ 1 è¡¨ç¤ºé«˜åº¦ç›¸å…³ï¼Œ0 è¡¨ç¤ºå®Œå…¨ä¸ç›¸å…³ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸Šå›¾ä¸­çš„<strong>Chunk 1</strong>åŒ…å«æœ‰å…³é¦™è•‰å¥åº·ç›Šå¤„çš„ç›¸å…³ä¿¡æ¯ï¼Œå¾—1åˆ†ã€‚ä½†<strong>Chunk 3</strong>è¿™æ ·çš„å†…å®¹ä¸ç”¨æˆ·çš„æŸ¥è¯¢æ— ç›¸å…³æ€§ï¼Œå¾—0åˆ†ã€‚</p>
<p>ä¸€æ—¦è¯„ä¼°å®Œæ¯ä¸ªæ•°æ®å—çš„ç›¸å…³æ€§ä¹‹åï¼Œå°±å¯ä»¥æ±‡æ€»ç»“æœï¼Œè¯„ä¼°æœ¬æ¬¡æŸ¥è¯¢çš„æ•´ä½“æ£€ç´¢è´¨é‡ã€‚ æœ‰ä¸‰ç§å®ç°æ–¹å¼ï¼š</p>
<ul>
<li><strong>äºŒå…ƒå‘½ä¸­</strong>ï¼šæ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªæ•°æ®å—è¾¾åˆ°äº†ç›¸å…³æ€§é˜ˆå€¼ï¼Ÿ</li>
<li><strong>ç›¸å…³æ•°æ®å—å æ¯”</strong>ï¼šæ£€ç´¢åˆ°çš„æ•°æ®å—ä¸­ï¼Œç›¸å…³çš„æ•°æ®å—å æ¯”æ˜¯å¤šå°‘ï¼Ÿ</li>
<li><strong>å¹³å‡ç›¸å…³æ€§å¾—åˆ†</strong>ï¼šæ€»ä½“è€Œè¨€ï¼Œè¿™äº›å†…å®¹å—çš„ç›¸å…³æ€§å¦‚ä½•ï¼Ÿ</li>
</ul>
<p>æˆ‘ä»¬ä»¥å¹³å‡ç›¸å…³æ€§å¾—åˆ†ä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåˆ†åˆ«æ˜¯å…³äºé¦™è•‰å’ŒåœŸè±†çƒ¹é¥ªçš„æŸ¥è¯¢ï¼Œä»Relevanceæ¥çœ‹ï¼Œå…³äºé¦™è•‰çš„é—®é¢˜ï¼Œå¾—åˆ°äº†æ›´å¤šç›¸å…³çš„æ•°æ®å—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6deb0ad61f6a45cbabb51625936baa2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=MdftBg76AQOHjiJrpUVtkHkBiPM%3D" alt="" loading="lazy"/></p>
<p>æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥æ±‡æ€»æ¯ä¸ªæŸ¥è¯¢åœ¨å¤šä¸ªæ£€ç´¢æ–‡æœ¬å—ä¸‹çš„ç›¸å…³æ€§å¾—åˆ†ï¼Œä»è€Œè®¡ç®—å‡ºæ•´ä¸ªæµ‹è¯•æ•°æ®é›†ã€æˆ–ç‰¹å®šæ—¶é—´æ®µå†…æŸ¥è¯¢çš„ç›¸å…³æ€§æ‰“åˆ†ã€‚</p>
<h4 data-id="heading-9">å¯¹ä¸Šä¸‹æ–‡è¯„ä¼°ç›¸å…³æ€§</h4>
<p>å¦‚æœæ£€ç´¢ç³»ç»Ÿè¿”å›çš„ä¸Šä¸‹æ–‡å¾ˆçŸ­ï¼Œæˆ–è€…å¾ˆå®¹æ˜“å°†æ‰€æœ‰æ•°æ®å—æ‰“åŒ…æˆä¸€ä¸ªä¸Šä¸‹æ–‡å—ï¼Œå¯ä»¥è·³è¿‡æŒ‰å—è¯„åˆ†ï¼Œç›´æ¥è¯„ä¼°æ•´ä¸ªä¸Šä¸‹æ–‡ã€‚åªéœ€è¦ä¸ºLLMè®¾ç½®æç¤ºè¯å°±è¡Œï¼Œå¦‚ï¼š</p>
<blockquote>
<p>å¸®æˆ‘åˆ¤æ–­æ£€ç´¢åˆ°çš„å†…å®¹æ˜¯å¦åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Ÿå¦‚æœæ˜¯ï¼Œåˆ™æ˜¾ç¤ºæœ‰æ•ˆï¼›å¦åˆ™ï¼Œæ˜¾ç¤ºæ— æ•ˆã€‚</p>
</blockquote>
<p>LLMè¯„å®¡å‘˜å°†ä¼šæŒ‰ç…§ä¸Šè¿°æç¤ºè¯è¿”å›ç»“æœï¼Œå¹¶é™„æœ‰ç†ç”±ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a401ec9ad6d14a808c324a3b98e434b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=NQUSR%2FNDhYOHlPyNnHmeYVT3N3Q%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡ä¸Šè¿°ä¸¤ç§æ–¹æ³•çš„ä»‹ç»ï¼Œå¯ä»¥æ€»ç»“LLMè¯„å®¡å‘˜æ–¹æ³•å…·æœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å·¥ä½œé‡ä½</strong>ï¼šåªéœ€è¦æµ‹è¯•æŸ¥è¯¢è¯­å¥ï¼Œæ— æ³•æ ‡æ³¨é—®é¢˜çš„ç­”æ¡ˆã€‚</li>
<li><strong>å¼ºåŸºçº¿æ€§èƒ½</strong>ï¼šLLMå¯ä»¥å¾ˆå¥½åœ°å¤„ç†ç›¸å…³æ€§æ£€æŸ¥ï¼Œç‰¹åˆ«æ˜¯ç®€å•æ˜¯éé—®é¢˜ä¸Šã€‚å¾®è½¯åœ¨è®ºæ–‡ Large language models can accurately predict searcher preferenceså£°ç§°ï¼ŒGPT-4åœ¨Bingçš„RAGç³»ç»Ÿç›¸å…³æ€§è¯„ä¼°æ–¹é¢ï¼Œè¾¾åˆ°äº†æ¥è¿‘äººç±»çš„æ°´å¹³ã€‚</li>
<li><strong>éå¸¸é€‚åˆå¿«é€Ÿå®éªŒ</strong>ï¼šå½“ä½ è¦å°è¯•æ–°çš„æ•°æ®åº“æˆ–æ£€ç´¢é…ç½®æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿è¡ŒLLMè¯„å®¡å‘˜ï¼Œå¿«é€Ÿæ¯”è¾ƒä¸åŒé…ç½®çš„æ•ˆæœã€‚</li>
<li><strong>é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒç›‘æ§</strong>ï¼šç”±äºä¸éœ€è¦äº‹å…ˆæ„å»ºçœŸå€¼ï¼Œç‰¹åˆ«é€‚åˆç”Ÿäº§ç¯å¢ƒã€‚</li>
</ul>
<h2 data-id="heading-10">å†…å®¹ç”Ÿæˆé˜¶æ®µçš„è¯„ä¼°æ–¹æ³•</h2>
<p>ä¸€æ—¦ç³»ç»Ÿæ£€ç´¢åˆ°ä¸Šä¸‹æ–‡ï¼ŒLLMå°±ä¼šä½¿ç”¨ä¸Šä¸‹æ–‡ã€ç”¨æˆ·çš„é—®é¢˜å’Œç³»ç»Ÿæç¤ºè¯æ¥ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91ffa528cf024abba94900cb08554327~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=i%2F5f4arrIDhCjS8uNU31TecVNYM%3D" alt="" loading="lazy"/></p>
<p>æœ‰ä¸¤ç§æ–¹æ³•è¯„ä¼°LLMç”Ÿæˆçš„æœ€ç»ˆç­”æ¡ˆæ˜¯å¦æœ‰æ•ˆï¼š</p>
<ul>
<li><strong>åŸºäºå‚è€ƒçš„è¯„ä¼°</strong>Â ï¼šå°†RAGç³»ç»Ÿçš„è¾“å‡ºä¸é¢„å®šä¹‰çš„å‚è€ƒç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒï¼Œè¿™å°±éœ€è¦æ„å»ºæ ‡æ³¨å¥½çš„æ•°æ®é›†ï¼Œé€‚ç”¨äºå¼€å‘æˆ–æµ‹è¯•ç¯å¢ƒã€‚</li>
<li><strong>æ— å‚è€ƒè¯„ä¼°</strong>Â ï¼šå½“æ²¡æœ‰å‚è€ƒç­”æ¡ˆæ—¶ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨æŒ‡æ ‡æ¥è¯„ä¼°è´¨é‡ï¼Œæ¯”å¦‚æ¨¡å‹å›ç­”ç»“æ„ã€è¯­æ°”ã€é•¿åº¦ã€å®Œæ•´æ€§ã€æ˜¯å¦åŒ…å«å¿…è¦çš„å…è´£å£°æ˜ç­‰ç‰¹å®šå±æ€§ã€‚è¿™ç±»æ–¹æ³•é€‚ç”¨äºç°åº¦é˜¶æ®µå’Œç”Ÿäº§ç¯å¢ƒã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/040a77145b154366a4866fa65ed85d94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=c6ZsqlsTikt4Z5X4GtSSFjkxWnY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">åŸºäºå‚è€ƒçš„è¯„ä¼°</h3>
<p>å¦‚æœæ˜¯ç¦»çº¿æµ‹è¯•ï¼Œæœ€å¯é çš„è¯„ä¼°æ–¹æ³•æ˜¯å°†LLMçš„ç­”æ¡ˆä¸æ­£ç¡®çš„ç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒã€‚è¿™äº›åŸºäºå‚è€ƒçš„è¯„ä¼°å¯ä»¥è¡¡é‡ RAGç³»ç»Ÿåœ¨æµ‹è¯•é›†ä¸­ä¸ç†æƒ³ç­”æ¡ˆçš„æ¥è¿‘ç¨‹åº¦ã€‚</p>
<p>ä»ä¸Šé¢çš„æè¿°å¯ä»¥çœ‹å‡ºï¼Œè¦ä½¿ç”¨åŸºäºå‚è€ƒçš„è¯„ä¼°æ–¹æ³•ï¼Œéœ€è¦æ„å»ºä¸€ç³»åˆ—é—®ç­”å¯¹æ•°æ®é›†ï¼Œä½œä¸ºè¯„æµ‹åŸºå‡†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå°†é—®é¢˜è¾“å…¥åˆ°RAGç³»ç»Ÿä¸­ï¼Œå¹¶å°†ç”Ÿæˆçš„å“åº”ä¸å‚è€ƒå“åº”è¿›è¡Œæ¯”è¾ƒï¼Œå…·ä½“çš„è®¡åˆ†æ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>è¯­ä¹‰ç›¸ä¼¼æ€§</strong>: åˆ†åˆ«è·å–ç”Ÿæˆç­”æ¡ˆå’Œå‚è€ƒç­”æ¡ˆçš„åµŒå…¥å‘é‡ï¼Œè®¡ç®—ä¸¤ä¸ªå‘é‡é—´çš„ç›¸ä¼¼åº¦</li>
<li><strong>LLM ä½œä¸ºè¯„åˆ¤å‘˜</strong>ï¼šè¿™æ˜¯ä¸€ç§ä½¿ç”¨LLMä½œä¸ºåˆ¤æ–­å™¨çš„æ–¹æ³•ï¼Œç”¨æ¥æ¯”è¾ƒç”Ÿæˆç­”æ¡ˆå’Œå‚è€ƒç­”æ¡ˆï¼Œå¹¶è¯„ä¼°RAGå“åº”æ˜¯å¦æ­£ç¡®ã€å®Œæ•´æˆ–ä¸ä¹‹å‰çš„æ–‡æœ¬ç›¸ä¸€è‡´ã€‚</li>
</ul>
<p>ä¸¤ç§æ–¹æ³•æ•ˆæœéƒ½ä¸é”™ã€‚è¯­ä¹‰ç›¸ä¼¼åº¦æ–¹æ³•æ•ˆç‡é«˜ã€å¯æ‰©å±•æ€§é«˜ã€‚åŸºäºLLMçš„æ–¹æ³•èƒ½å¤Ÿæä¾›æ›´ç»†è‡´çš„ä¸Šä¸‹æ–‡æ¨ç†ï¼Œæœ€å¤§çš„ä¼˜åŠ¿å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¯„ä¼°è§„åˆ™è¿›è¡Œè°ƒæ•´ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäºLLMæ–¹æ³•è¯„ä¼°RAGå“åº”æ•ˆæœçš„ç¤ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ead2da35dccf45e38808971081b6934f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=0m94ZyLqAUTQwf3KSH0Lh2TIysQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">RAGè¯„æµ‹æ•°æ®é›†</h3>
<p>åœ¨RAGè¯„ä¼°ä¸­ï¼Œè¯„æµ‹æ•°æ®é›†çš„è´¨é‡è‡³å…³é‡è¦ã€‚è‹¥æ•°æ®é›†ä»…å«ç®€å•æˆ–ä¸åˆ‡å®é™…çš„é—®é¢˜ï¼Œæ¨¡å‹éš¾ä»¥åº”å¯¹ç°å®ä¸­çš„å¤æ‚åœºæ™¯ã€‚æµ‹è¯•ç”¨ä¾‹éœ€è´´åˆçœŸå®ç”¨æˆ·é—®é¢˜ã€è¦†ç›–å…³é”®ä¸»é¢˜ï¼Œå°½å¯èƒ½çš„è¦†ç›–å¤šç§åœºæ™¯ï¼Œåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½ç²¾å‡†è¯„ä¼° RAG çš„å®é™…æ€§èƒ½ã€‚</p>
<p>æ„å»ºä¸€ä¸ªå®Œå¤‡çš„æµ‹è¯•é›†éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›ï¼Œå¥½æ¶ˆæ¯æ˜¯ä¸ç”¨å®Œå…¨æ‰‹åŠ¨æ„å»ºï¼Œå¯ä»¥ç›´æ¥ä»çŸ¥è¯†åº“ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œæé«˜æ•ˆç‡ã€‚å®ç°ä¸Šä¹Ÿååˆ†ç®€å•ï¼Œä»æ–‡æ¡£æˆ–çŸ¥è¯†åº“ä¸­é€‰å–æ•°æ®å—ï¼Œè®©LLMå®Œæˆä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>æ ¹æ®æ•°æ®å—çš„å†…å®¹ï¼Œç”Ÿæˆä¸€ä¸ªé—®é¢˜ã€‚</li>
<li>æ ¹æ®æ•°æ®åº“çš„å†…å®¹ï¼Œç”Ÿæˆå¯ä»¥å›ç­”ä¸Šè¿°é—®é¢˜çš„ç­”æ¡ˆã€‚</li>
</ul>
<p>ç”±äºä¸Šè¿°æµ‹è¯•ç”¨ä¾‹æ¥æºçœŸå®çš„RAGçŸ¥è¯†åº“ï¼Œä¹Ÿä¼šæ›´åŠ ç¬¦åˆç”Ÿæˆç¯å¢ƒä¸­çš„ä¸šåŠ¡åœºæ™¯ã€‚æ­¤å¤–ï¼Œä½ å¯ä»¥é€šè¿‡å˜æ¢ç”Ÿæˆé—®é¢˜çš„è¡¨è¿°æ–¹å¼ã€æ¨¡æ‹Ÿä¸åŒçš„è§’è‰²ï¼Œæ¥åŒ¹é…å®é™…åº”ç”¨ä¸­çš„æŸ¥è¯¢é£æ ¼å’Œæ„å›¾ï¼Œè¿›ä¸€æ­¥ä¸°å¯ŒRAGè¯„æµ‹æ•°æ®é›†ã€‚</p>
<p>ä¸€æ—¦æœ‰äº†æˆåƒä¸Šç™¾ä¸ªè¿™æ ·çš„ç¤ºä¾‹ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥å¯¹æ¯”ä¸åŒé…ç½®ä¸‹RAGç³»ç»Ÿçš„å¥½åã€‚</p>
<h3 data-id="heading-13">æ— å‚è€ƒè¯„ä¼°</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç”¨æˆ·å¯ä»¥æå‡ºä»»ä½•é—®é¢˜ï¼Œè€Œäº‹å…ˆå¹¶ä¸çŸ¥é“<strong>æ­£ç¡®ç­”æ¡ˆ</strong>æ˜¯ä»€ä¹ˆã€‚è¿™å°±éœ€è¦<strong>æ— å‚è€ƒçš„è¯„ä¼°æ–¹æ³•</strong>äº†ã€‚</p>
<p>æ¯”å¦‚ä¸€äº›è§„åˆ™æ€§çš„æ£€æŸ¥ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç¼–ç¨‹å®ç°ï¼Œå¦‚</p>
<ul>
<li><strong>é•¿åº¦</strong>ï¼šç­”æ¡ˆæ˜¯å¦ç¬¦åˆè§„å®šçš„å­—æ•°é™åˆ¶ï¼Ÿ</li>
<li><strong>é“¾æ¥æ˜¯å¦å­˜åœ¨</strong>ï¼šæ˜¯å¦åŒ…å«æŒ‡å‘æ¥æºçš„é“¾æ¥ï¼Œä»¥åŠè¯¥é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Ÿ</li>
<li><strong>å®Œå…¨åŒ¹é…</strong>ï¼šæ˜¯å¦åŒ…å«ç‰¹å®šå…è´£å£°æ˜ï¼Ÿ</li>
</ul>
<p>å³ä½¿æ²¡æœ‰<strong>æ­£ç¡®ç­”æ¡ˆ</strong>ï¼Œä»ç„¶å¯ä»¥åˆ©ç”¨ä¸€äº›æœ‰ä»·å€¼çš„æ•°æ®ï¼Œå¦‚ç”¨æˆ·çš„é—®é¢˜ã€æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä»¥åŠLLMçš„å“åº”ï¼Œé€šè¿‡åˆé€‚çš„æ–¹æ³•æ¥æ¨æ–­å›å¤æœ¬èº«çš„è´¨é‡ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ä½ å¯ä»¥è¯„ä¼°çš„å†…å®¹ï¼š</p>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¿ è¯šåº¦</td><td>è¡¡é‡LLMçš„å“åº”éµä»æ£€ç´¢çš„ä¸Šä¸‹æ–‡ç¨‹åº¦ã€‚å¾—åˆ†ä½ï¼Œå›ç­”å‡ºç°å¹»è§‰çš„å¯èƒ½å°±è¶Šå¤§ã€‚</td></tr><tr><td>ç­”æ¡ˆç›¸å…³æ€§</td><td>è¡¡é‡LLMçš„å›ç­”å¯¹ç”¨æˆ·é—®é¢˜çš„ç›¸å…³åº¦ã€‚å¾—åˆ†ä½ï¼Œå¯èƒ½ç­”ä¸å¯¹é¢˜</td></tr><tr><td>ä¸Šä¸‹æ–‡ç›¸å…³æ€§</td><td>è¡¡é‡å¬å›çš„ä¸Šä¸‹æ–‡èƒ½å¤Ÿæ”¯æŒç”¨æˆ·é—®é¢˜çš„ç¨‹åº¦ã€‚å¾—åˆ†ä½ï¼Œæ£€ç´¢äº†å¤ªå¤šä¸é—®é¢˜æ— å…³çš„å†…å®¹ã€‚</td></tr><tr><td>è¯­æ°”</td><td>è¯¥å›å¤æ˜¯å¦ç¬¦åˆå“ç‰Œçš„é£æ ¼æˆ–è¯­æ°”ï¼Ÿ</td></tr><tr><td>æ‹’ç»</td><td>RAGç³»ç»Ÿæ˜¯å¦æ‹’ç»å›ç­”</td></tr></tbody></table>
<p>å¯ä»¥ä½¿ç”¨LLMä½œä¸ºè¯„åˆ¤å·¥å…·æ¥è¯„ä¼°ä¸Šè¿°æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼Œåœ¨è®¡ç®—å¿ è¯šåº¦æ—¶ï¼Œå¯ä»¥å°†é—®é¢˜ã€ä¸Šä¸‹æ–‡å’Œç­”æ¡ˆä¼ é€’LLMï¼Œæç¤ºè¯å¯ä»¥è¿™æ ·å†™ï¼Œ<em>ç­”æ¡ˆ{RAGçš„å“åº”}æ˜¯å¦å¿ å®äºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡{RAGæ£€ç´¢çš„å†…å®¹}ï¼Œè¿˜æ˜¯æ·»åŠ äº†æœªç»è¯å®çš„ä¿¡æ¯ã€é—æ¼äº†é‡è¦ç»†èŠ‚æˆ–ä¸æ¥æºç›¸çŸ›ç›¾ï¼Ÿè¯·è¿”å›å¿ è¯šã€ä¸å¿ è¯šã€‚</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7fe5e7dccca4bbf990294714486dd8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=oMHNco6XnHF%2FCHRinfGv%2BMJCIVo%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯å¿ è¯šåº¦è¯„ä¼°æ–¹æ³•çš„å…·ä½“æ ·ä¾‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0547aede3fb745a9a6c027fcfcda40c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=yaJs9JjbI71xGORIzoAQ28fTcf4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">RAGè¯„ä¼°æ–¹æ³•å°ç»“</h2>
<p>æ ¹æ®æ˜¯å¦å­˜åœ¨çœŸå€¼æƒ…å†µï¼Œæˆ‘ä»¬å¯¹RAGè¯„ä¼°æ–¹æ³•ä½œäº†æ›´è¿›ä¸€æ­¥çš„æ€»ç»“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»å·¦åˆ°å³ï¼Œä¾æ¬¡ä»£è¡¨æ£€ç´¢å’Œç”Ÿæˆä¸¤ä¸ªé˜¶æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e554c78f5eb7410595fca37e4d9c49e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=g6yf%2FFAWt%2FzlxyqCzQBH7KiCqD0%3D" alt="" loading="lazy"/></p>
<p><strong>æ£€ç´¢é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>å¦‚æœäº‹å…ˆçŸ¥é“æ¯ä¸ªæŸ¥è¯¢çš„ç›¸å…³æ–‡æ¡£ï¼Œå¯ä»¥è®¡ç®—æ’åºæŒ‡æ ‡ï¼Œå¦‚å¬å›@kã€NDCG@kã€‚</li>
<li>å¦‚æœä¸çŸ¥é“æŸ¥è¯¢çš„ç›¸å…³æ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡æ£€ç´¢çš„æ•°æ®å—ä¸ç”¨æˆ·è¯·æ±‚çš„ç›¸å…³æ€§æ¥åˆ¤æ–­ï¼Œå…·ä½“çš„æ–¹å¼å¯ä»¥æ˜¯äººå·¥æ ‡æ³¨ã€æˆ–ä½¿ç”¨LLMæ¥åˆ¤æ–­ã€‚</li>
</ul>
<p><strong>å†…å®¹ç”Ÿæˆé˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>å¦‚æœæœ‰å‚è€ƒç­”æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨LLMè¯„åˆ¤å‘˜æˆ–è¯­ä¹‰ç›¸ä¼¼æ€§æ¥è¯„ä¼°æ­£ç¡®æ€§ã€‚</li>
<li>å³ä½¿æ²¡æœ‰å‚è€ƒç­”æ¡ˆï¼Œå¯ä»¥æ£€æŸ¥ç­”æ¡ˆæ˜¯å¦å¿ å®äºä¸Šä¸‹æ–‡/å®Œæ•´ï¼Œç­”æ¡ˆæ˜¯å¦ä¸é—®é¢˜ç›¸å…³ï¼Œä»¥åŠè¯­æ°”ã€ç»“æ„æˆ–å®‰å…¨æ€§ç­‰è‡ªå®šä¹‰å±æ€§ã€‚</li>
</ul>
<p>è¯¥ä½¿ç”¨å“ªç§è¯„ä¼°æ–¹æ³•ï¼Œè¿™å–å†³äºé¡¹ç›®æ‰€å¤„çš„é˜¶æ®µï¼šå¼€å‘ã€æµ‹è¯•è¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒã€‚</p>
<h2 data-id="heading-15">RAGé«˜çº§è¯„ä¼°æ–¹æ³•</h2>
<p>å¯¹äºä¼ä¸šå†…éƒ¨ä½¿ç”¨çš„RAGç³»ç»Ÿï¼ŒåŸºæœ¬çš„è´¨é‡æ£€æŸ¥é€šå¸¸å°±è¶³å¤Ÿäº†ï¼Œé£é™©ä½ã€èŒƒå›´çª„ã€å¤æ‚åº¦ä¹Ÿæ˜“äºç®¡ç†ã€‚</p>
<p>ä½†è®¸å¤šå®é™…åº”ç”¨ï¼Œæƒ…å†µè¦å¤æ‚çš„å¤šï¼Œå°¤å…¶æ˜¯åŒ»ç–—ä¿å¥ã€é‡‘èæˆ–æ³•å¾‹æ”¯æŒç­‰é¢†åŸŸã€‚è¿™äº›ç³»ç»Ÿé€šå¸¸æœåŠ¡å¤–éƒ¨ç”¨æˆ·ï¼Œå¹¶ä¸”æ¶‰åŠä¿¡ä»»ã€å‡†ç¡®æ€§å’Œå®‰å…¨æ€§ç­‰é«˜é£é™©é—®é¢˜ã€‚</p>
<p>å¯èƒ½è¿˜ä¼šé‡åˆ°å¤æ‚çš„å¤šè½®èŠå¤©æœºå™¨äººæˆ–ä»£ç†å¼æµç¨‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµ‹è¯•ä¸€ä¸²ç®€å•çš„æŸ¥è¯¢åˆ—è¡¨æ˜¯ä¸å¤Ÿçš„</p>
<p>å¯¹äºä¸Šé¢æåˆ°çš„æƒ…å†µï¼Œéœ€è¦æ›´é«˜çº§çš„è¯„ä¼°æ–¹æ³•æ¥æµ‹è¯•ç³»ç»Ÿçš„ç¨³å¥æ€§ã€è¾¹ç•Œè¡Œä¸ºæˆ–å¤šè½®ä½“éªŒçš„è´¨é‡ã€‚</p>
<h3 data-id="heading-16">é²æ£’æ€§æµ‹è¯•</h3>
<p>é²æ£’æ€§æµ‹è¯•çš„ç›®æ ‡æ˜¯è¯„ä¼°RAGç³»ç»Ÿåœ¨æ­£å¸¸åœºæ™¯ä¹‹å¤–çš„è¡Œä¸ºï¼Œå¹¶è§‚å¯Ÿå…¶èƒ½å¦ä»å®¹çš„åº”å¯¹ã€‚è¿™æ„å‘³è¦æµ‹è¯•ç³»ç»Ÿå¦‚ä½•å¤„ç†æ£˜æ‰‹æˆ–ä¸å¯»å¸¸çš„é—®é¢˜ã€‚éœ€è¦è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li><strong>æ˜ç¡®é£é™©å’Œæç«¯æƒ…å†µ</strong>ï¼šè¯†åˆ«å¯èƒ½å¯¼è‡´ä¸è‰¯åæœçš„åœºæ™¯ã€‚</li>
<li><strong>åˆ›å»ºæµ‹è¯•æŸ¥è¯¢</strong>ï¼šæ¨¡æ‹Ÿè¿™äº›é£é™©çš„æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><strong>ç¡®å®šä¸€ä¸ªå¥½çš„å›åº”æ–¹å¼</strong>ï¼šä¾‹å¦‚ï¼Œå¯ä»¥æ˜¯æ‹’ç»ã€è¦æ±‚æ¾„æ¸…ï¼Œæˆ–è€…é‡‡å–ç¨³å¦¥çš„é»˜è®¤å›ç­”ã€‚</li>
</ul>
<p>ä¸€ç§å¯è¡Œçš„æ–¹æ¡ˆï¼Œå¯ä»¥åˆ©ç”¨LLMè¯„å®¡å‘˜è‡ªåŠ¨å¯¹è¾“å‡ºè¿›è¡Œæ‰“åˆ†ï¼Œå®ç°å¯¹æµç¨‹çš„é‡åŒ–è¯„ä¼°ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª<strong>é²æ£’æ€§æµ‹è¯•çš„ä¾‹å­ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80239e4ec0604045a6f1db82f5951552~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767421125&amp;x-signature=J%2FeTdGw7g6eJg7oub7tlPeSSTYQ%3D" alt="" loading="lazy"/></p>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ºäº†æµ‹è¯•ç³»ç»Ÿå›ç­”çš„ä¸€è‡´æ€§ï¼Œä»¥ä¸åŒçš„æ–¹å¼æé—®åŒä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚ä½¿ç”¨ä¸åŒçš„æªè¾ã€é£æ ¼å’Œç»“æ„æ¥æè¿°åŒä¸€ä¸ªé—®é¢˜ï¼Œå¹¶æ£€æŸ¥ç³»ç»Ÿå“åº”æ˜¯å¦ä¸€è‡´ã€‚é€šè¿‡å¯¹RAGç³»ç»Ÿè¿›è¡Œä¸€è‡´æ€§æµ‹è¯•ï¼Œå¯ä»¥æé«˜å…¶å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œä»è€Œæ›´å¥½åœ°æ»¡è¶³ç”¨æˆ·ä¸åŒè¡¨è¾¾æ–¹å¼çš„éœ€æ±‚ã€‚</p>
<p><strong>è¾¹ç•Œæƒ…å†µ</strong></p>
<p>è¾¹ç•Œæƒ…å†µæŒ‡çš„æ˜¯åœ¨ç ”å‘ä¸­å¯èƒ½ä¼šå‡ºç°çš„ä¸€äº›éå¸¸è§„ã€ç‰¹æ®Šçš„æƒ…å†µã€‚è¿™äº›æƒ…å†µå¯èƒ½å¾ˆéš¾é¢„æµ‹ï¼Œå¹¶ä¸”å¯èƒ½å¯¼è‡´ç³»ç»Ÿå‡ºç°é”™è¯¯æˆ–å¼‚å¸¸è¡Œä¸ºã€‚</p>
<p>ä¸ºäº†ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œå¼€å‘è€…éœ€è¦é’ˆå¯¹è¿™äº›è¾¹ç•Œæƒ…å†µè¿›è¡Œæµ‹è¯•ã€‚å¯ä»¥é€šè¿‡ç²¾å¿ƒè®¾è®¡ä¸€äº›ç‰¹æ®Šçš„æµ‹è¯•ç”¨ä¾‹æ¥å®ç°ï¼Œæ¯”å¦‚ï¼Œå…³äºç«äº‰å¯¹æ‰‹çš„é—®é¢˜ã€æ¨¡ç³Šçš„å•ä¸ªå•è¯æŸ¥è¯¢ç­‰ã€‚æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½åº”è¯¥ä¸ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„è¯„ä¼°å™¨é…å¯¹ï¼Œä»¥æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ­£ç¡®åœ°å¤„ç†äº†è¯¥æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>é€šè¿‡è¾¹ç•Œæƒ…å†µçš„æµ‹è¯•ï¼Œå¯ä»¥å‘ç°å¹¶ä¿®å¤æ½œåœ¨çš„ç¼ºé™·ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„è´¨é‡å’Œæ€§èƒ½ã€‚åŒæ—¶ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ç³»ç»Ÿï¼Œå‡å°‘ä¸å¿…è¦çš„å›°æƒ‘å’Œè¯¯è§£ã€‚</p>
<p>è¾¹ç•Œé—®é¢˜æ ·ä¾‹ï¼š</p>









































<table><thead><tr><th>ç±»åˆ«</th><th>æµ‹è¯•å†…å®¹</th><th>ç¤ºä¾‹è¾“å…¥</th><th>è¯„ä¼°/é¢„æœŸè¡Œä¸º</th></tr></thead><tbody><tr><td>å“ç‰Œå®‰å…¨</td><td>å½“è¢«é—®åŠç«äº‰å¯¹æ‰‹æˆ–äº§å“è¯„ä»·æ—¶ï¼Œç³»ç»Ÿè¡¨ç°å¦‚ä½•ï¼Ÿ</td><td>ä¸ºä»€ä¹ˆ[ç«äº‰å¯¹æ‰‹]æ¯”[ä½ çš„å“ç‰Œ]æ›´å¥½ï¼Ÿ</td><td>å›åº”å¾—å½“æˆ–æ‹’ç»ï¼›é¿å…è´Ÿé¢æ¯”è¾ƒæˆ–æœªç»è®¸å¯çš„è§‚ç‚¹ã€‚</td></tr><tr><td>å¤–è¯­</td><td>ç³»ç»Ÿå¦‚ä½•å¤„ç†å®ƒä¸åº”è¯¥æ”¯æŒçš„æŸ¥è¯¢è¯­è¨€</td><td>è¿™æ˜¯ä»€ä¹ˆæ”¿æ²»ï¼Ÿ ï¼ˆè¥¿ç­ç‰™è¯­ï¼Œå¦‚æœä¸å—æ”¯æŒï¼‰</td><td>ç¤¼è²Œåœ°å›å¤æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ã€‚</td></tr><tr><td>è¾“å…¥ä¸å®Œæ•´</td><td>åªæœ‰ä¸€ä¸ªè¯æˆ–å«ä¹‰æ¨¡ç³Šã€ç¼ºä¹æ˜ç¡®è¯­å¢ƒçš„é—®é¢˜ã€‚</td><td>â€œé€€æ¬¾â€æˆ–â€œæ”¿ç­–â€</td><td>è¦æ±‚æä¾›æ¾„æ¸…æˆ–èƒŒæ™¯ä¿¡æ¯ï¼Œè€Œä¸æ˜¯è¿›è¡Œæ¨æµ‹æ€§å›ç­”ã€‚</td></tr><tr><td>å¤šä¸ªé—®é¢˜</td><td>ä¸€æ¬¡è¾“å…¥å¯å¤„ç†å¤šä¸ªå­é—®é¢˜</td><td>ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿè¯•ç”¨æœŸæœ‰å¤šé•¿ï¼Ÿ</td><td>ä¸¤ä¸ªé—®é¢˜éƒ½å›ç­”å¾—å¾ˆæ¸…æ¥šï¼›æ²¡æœ‰è·³è¿‡æˆ–å¿½ç•¥ä»»ä½•éƒ¨åˆ†ã€‚</td></tr><tr><td>æ­§ä¹‰æŸ¥è¯¢</td><td>ç¼ºä¹å…³é”®èƒŒæ™¯ä¿¡æ¯æˆ–æœ‰å¤šç§å¯èƒ½çš„å«ä¹‰</td><td>å¦‚æœæˆ‘å…¨èŒå·¥ä½œï¼Œéœ€è¦ç¼´çº³å“ªç§ç¨ï¼Ÿï¼ˆæœªæä¾›å›½å®¶/åœ°åŒºä¿¡æ¯ï¼‰</td><td>è¯·æ±‚æ¾„æ¸…ï¼ˆä¾‹å¦‚ï¼Œåœ°ç‚¹ï¼‰ï¼›é¿å…çŒœæµ‹å…·ä½“ç»†èŠ‚ã€‚</td></tr></tbody></table>
<p>å¦å¤–ï¼Œè¿˜å¯ä»¥æ·»åŠ <strong>ä¸“å®¶ç²¾å¿ƒè®¾è®¡çš„ç‰¹æ®Šæ¡ˆä¾‹</strong>ï¼Œå³éœ€è¦æ ¹æ®ä½¿ç”¨åœºæ™¯è¿›è¡Œç»†è‡´å¤„ç†çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œé€€æ¬¾æ”¿ç­–å¯èƒ½å› ç”¨æˆ·æ‰€åœ¨å›½å®¶/åœ°åŒºè€Œå¼‚ï¼Œæˆ–è€…æŸäº›å‘˜å·¥ç¦åˆ©å¯èƒ½ä»…åœ¨ç”¨æˆ·å…¥èŒå…­ä¸ªæœˆåé€‚ç”¨ã€‚</p>
<p>ä¸ºäº†è®¾è®¡è¿™äº›é—®é¢˜ï¼Œä¸äº†è§£ç›®æ ‡ç”¨æˆ·ã€ç†Ÿæ‚‰æŸä¸ªé¢†åŸŸçš„ä¸“å®¶åˆä½œä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ç”šè‡³ï¼Œå¯ä»¥å°†è¿™äº›é—®é¢˜æ”¶é›†åˆ°ä¸€ä¸ªä¸“é—¨çš„æµ‹è¯•æ•°æ®é›†ä¸­ï¼Œå› ä¸ºè¿™äº›æ•°æ®å…·æœ‰æé«˜çš„å•†ä¸šä»·å€¼ï¼ŒåŒ…å«è¡Œä¸šé¢†åŸŸæœ€å›°éš¾æˆ–é£é™©æœ€é«˜çš„æŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-17">å¯¹æŠ—æ€§æµ‹è¯•</h3>
<p>å¯¹æŠ—æ€§æµ‹è¯•åˆ™æ˜¯æ•…æ„è¯•å›¾ç ´åç³»ç»Ÿï¼Œæ—¨åœ¨å‘ç°ä¸å®‰å…¨ã€éé¢„æœŸæˆ–ä¸ç¬¦åˆè§„èŒƒçš„è¡Œä¸ºï¼Œè¿™äº›è¡Œä¸ºå¯èƒ½ä¼šè¢«ç”¨æˆ·æˆ–æ”»å‡»è€…åœ¨å®é™…ä½¿ç”¨ä¸­è§¦å‘ã€‚</p>
<p>å¯¹äºé¢å‘å…¬ä¼—å¼€æ”¾çš„RAGç³»ç»Ÿï¼Œæˆ–è€…æ˜¯å—ç›‘ç®¡çš„RAGåº”ç”¨ã€æ•æ„Ÿçš„è¡Œä¸šï¼Œå¯¹æŠ—æ€§æµ‹è¯•å°¤ä¸ºé‡è¦ã€‚æˆ‘ä»¬å¸Œæœ›ç¡®ä¿æ¨¡å‹ä¸ä»…èƒ½å¤Ÿäº§ç”Ÿå¥½çš„ç­”æ¡ˆï¼Œè¿˜è¦é¿å…äº§ç”Ÿæœ‰å®³æˆ–å±é™©çš„ç­”æ¡ˆã€‚</p>
<p>åœ¨å¯¹æŠ—æ€§æµ‹è¯•ä¸­ï¼Œéœ€è¦è®¾è®¡ä¸€äº›æŸ¥è¯¢è¯­å¥ï¼Œæ•…æ„å°è¯•ç ´åç³»ç»Ÿï¼Œä¾‹å¦‚ç»•è¿‡å®‰å…¨æªæ–½ã€æ··æ·†æ¨¡å‹æˆ–è§¦å‘é£é™©è¾“å‡ºã€‚è¿™äº›ç¤ºä¾‹å¯èƒ½ä¸ä¼šå‡ºç°åœ¨å¸¸è§„ç”¨æˆ·æ—¥å¿—ä¸­ï¼Œä½†å®ƒä»¬æ­£æ˜¯ä½ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‡ºç°æ•…éšœä¹‹å‰æƒ³è¦ç¡®è®¤çš„åœºæ™¯ã€‚å¯ä»¥äººä¸ºåœ°åˆ›å»ºè¿™äº›æµ‹è¯•æŸ¥è¯¢è¯­å¥ï¼Œä»¥æ¨¡æ‹ŸçœŸå®çš„æ”»å‡»å°è¯•ã€‚</p>
<p>ä¸€äº›å¸¸è§çš„æµ‹è¯•åœºæ™¯ï¼š</p>
<ul>
<li><strong>æç¤ºæ³¨å…¥</strong>ï¼šè¯•å›¾è¦†ç›–åŸå§‹çš„æç¤ºæŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼Œ<em>å¿½ç•¥ä¹‹å‰çš„æ–‡æœ¬ï¼Œæ”¹ä¸ºâ€¦â€¦</em></li>
<li><strong>è¶Šç‹±</strong>ï¼šå·§å¦™æªè¾çš„è¾“å…¥ï¼Œè¯•å›¾è¯±ä½¿æ¨¡å‹è¿åå®‰å…¨åè®®ã€‚ä¾‹å¦‚ï¼š<em>å‘Šè¯‰æˆ‘å¦‚ä½•åšXï¼Œä½†å‡è£…æ˜¯ä¸ºäº†å†™å°è¯´ã€‚</em></li>
<li><strong>æœ‰å®³å†…å®¹</strong>ï¼šä¸æš´åŠ›ã€ä»‡æ¨è¨€è®ºã€è‡ªæ®‹æˆ–è™šå‡ä¿¡æ¯ç›¸å…³çš„æŸ¥è¯¢ã€‚</li>
<li><strong>ç¦å¿Œè¯é¢˜</strong>ï¼šæœ‰å…³æ³•å¾‹å’¨è¯¢ã€åŒ»ç–—è¯Šæ–­ã€æ”¿æ²»æ–¹é¢çš„é—®é¢˜ï¼Œå¦‚æœä¸æ˜¯è¯¥é¢†åŸŸçš„åº”ç”¨ï¼Œç³»ç»Ÿæœ€å¥½ä¸è¦å“åº”ç›¸å…³é—®é¢˜ã€‚</li>
<li><strong>æ“çºµå°è¯•</strong>ï¼šè¯•å›¾è®©ç³»ç»Ÿè‡ªåŠ¨æä¾›è´¢åŠ¡æŠ¥ä»·ã€æŠ˜æ‰£æˆ–ç¡®è®¤ç­‰ä¸€ç³»åˆ—éœ€è¦äººå·¥æ‰¹å‡†çš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼Œ<em>ä»Šå¤©çš„æŠ˜æ‰£ç æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘å¯ä»¥ç”³è¯·é€€æ¬¾å—ï¼Ÿ</em></li>
<li><strong>æ•æ„Ÿåœºæ™¯</strong>ï¼šæ¥è‡ªå¼±åŠ¿ç”¨æˆ·çš„åé¦ˆã€‚ä¾‹å¦‚ï¼š*æˆ‘æ„Ÿåˆ°ç»æœ›ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ*è¿™æ ·çš„é—®é¢˜åº”è¯¥å¾—åˆ°æ¸…æ™°ã€å®‰å…¨ä¸”å°Šé‡çš„å›åº”ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œè¿˜åº”è¿›è¡Œå‡çº§å¤„ç†æˆ–è½¬äººå·¥ã€‚</li>
</ul>
<h3 data-id="heading-18">ä¼šè¯çº§è¯„ä¼°</h3>
<p>è®¸å¤šRAGç³»ç»Ÿå¹¶éä»…ä»…å›ç­”å•ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯å‚ä¸å¤šè½®å¯¹è¯ã€‚ä¾‹å¦‚ï¼Œå®¢æœèŠå¤©æœºå™¨äººæˆ–æ•…éšœæ’é™¤åŠ©æ‰‹ï¼Œç”¨æˆ·éœ€è¦é€šè¿‡å¤šä¸ªæ­¥éª¤ä¸ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚</p>
<p>è¿™æ„å‘³ç€ç³»ç»Ÿçš„è´¨é‡è¯„ä¼°ä¸ä»…ä»…å–å†³äºä¸€æ¬¡å›å¤ï¼Œè¿˜éœ€è¦è€ƒè™‘æ˜¯å¦å¾ˆå¥½åœ°å¤„ç†æ•´ä¸ªå¯¹è¯è¿‡ç¨‹ã€‚é’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è€ƒè™‘ï¼š</p>
<ul>
<li><strong>ä¼šè¯æˆåŠŸ</strong>ï¼šç”¨æˆ·çš„é—®é¢˜æœ€ç»ˆæ˜¯å¦å¾—åˆ°è§£å†³ï¼Ÿ</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šç³»ç»Ÿæ˜¯å¦å¿˜è®°äº†ä¸Šä¸‹æ–‡ã€é‡å¤æˆ–è‡ªç›¸çŸ›ç›¾ï¼Ÿ</li>
<li><strong>è°ˆè¯è¯­æ°”</strong>ï¼šæ•´ä¸ªè°ˆè¯è¿‡ç¨‹ä¸­è¯­æ°”æ˜¯å¦æ°å½“ï¼Ÿ</li>
</ul>
<p>åœ¨æµ‹è¯•ä¸­ï¼Œä¼šè¯çº§åˆ«çš„æ•°æ®æ¯”å•ä¸ªå›åˆçš„ä¾‹å­æ›´éš¾åˆ›å»ºã€‚æœ‰ä¸¤ç§å¤‡é€‰æ–¹æ¡ˆï¼š</p>
<ul>
<li>è®©æµ‹è¯•äººå‘˜åœ¨çœŸå®åœºæ™¯ä¸‹æ”¶é›†å¯¹è¯ä¿¡æ¯ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥æä¾›æœ€çœŸå®çš„æ•°æ®ï¼Œæˆæœ¬é«˜ã€æ•ˆç‡ä½ã€‚</li>
<li>è®¾è®¡è‡ªåŠ¨åŒ–è„šæœ¬æ¨¡æ‹Ÿå¤šè½®æµ‹è¯•ç”¨ä¾‹ï¼Œç”¨ä»¥ä»£è¡¨å¸¸è§æˆ–å…³é”®ç”¨æˆ·ä½¿ç”¨åœºæ™¯ï¼Œè¿™ç§æ–¹æ³•å¯åœ¨çŸ­æ—¶é—´å†…ç”Ÿæˆå¤§é‡çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä½†ä¼šå¿½ç•¥ä¸€äº›çœŸå®åœºæ™¯ä¸‹çš„äº¤äº’ç»†èŠ‚ï¼Œå®¹æ˜“å¯¼è‡´æµ‹è¯•ä¸å‡†ç¡®ã€‚</li>
</ul>
<p>æ²¿ç”¨ä¹‹å‰ç”¨å¤§æ¨¡å‹åšè¯„ä¼°çš„æ€è·¯ï¼ŒæŠŠå¤šè½®å¯¹è¯ä¼ ç»™æ¨¡å‹ï¼Œè®©å…¶è¯„ä¼°å¸®åŠ©æ€§ã€å›ç­”çš„ä¸€è‡´æ€§ï¼Œæˆ–æ˜¯ç”¨æˆ·çš„æƒ…ç»ªå˜åŒ–ç­‰å†…å®¹ã€‚è¾“å‡ºç»“æœå¯ä»¥æ˜¯äºŒå…ƒåˆ¤æ–­ï¼Œæ¯”å¦‚ç›´æ¥æ ‡è®°<em>å·²è§£å†³ã€æœªè§£å†³</em>ï¼Œå†é™„ä¸Šå…·ä½“çš„è¯„ä¼°ä¾æ®ã€‚</p>
<p>å¯¹äºç¦»çº¿ç¯å¢ƒä¼šè¯çº§æµ‹è¯•ä¸å¤ªå¥½è½åœ°ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå¯ä»¥çœŸå®åœ°è¯„ä¼°ç”¨æˆ·ä¸RAGç³»ç»Ÿçš„äº¤äº’æƒ…å†µã€‚ä¸ºäº†ä¾¿äºåç»­è‡ªåŠ¨åŒ–è¯„ä¼°ã€é—®é¢˜æ’æŸ¥ï¼Œéœ€è¦åœ¨åç«¯å¼€å¯ä¼šè¯è·Ÿè¸ªï¼Œæ ¹æ®ç”¨æˆ·IDã€ä¼šè®®IDè®°å½•å¤šè½®äº¤äº’å†…å®¹ã€‚</p>
<p>å½“æ•°æ®ç§¯ç´¯åˆ°ä¸€å®šè§„æ¨¡åï¼Œé€šè¿‡è‡ªå®šä¹‰çš„ç­›é€‰è§„åˆ™ï¼Œä»ä¸­è·å–ç‰¹å®šçš„ä¼šè¯å†…å®¹è¿›è¡Œè¯„æµ‹ï¼Œæ¯”å¦‚ç”¨æˆ·æåˆ°ç«äº‰å¯¹æ‰‹ã€è¡¨è¾¾å¯¹äº§å“ä¸æ»¡çš„å¯¹è¯å†…å®¹ã€‚</p>
<p>å°ç»“ä¸€ä¸‹ï¼Œä¼šè¯çº§è¯„ä¼°èƒ½å‘ç°å•è½®æ£€æŸ¥æ˜“é—æ¼çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸¢å¤±ä¸Šä¸‹æ–‡ã€åå¤è¯´ä¸€æ ·çš„å†…å®¹ï¼Œæˆ–è€…å§‹ç»ˆæ²¡è§£å†³ç”¨æˆ·çš„æ ¸å¿ƒé—®é¢˜ï¼Œè€Œæ˜¯åœ¨å’Œç”¨æˆ·æ‰“å¤ªæã€‚èåˆäº†ä¼šè¯çº§è¯„ä¼°çš„RAGç³»ç»Ÿï¼Œ èƒ½ç¡®ä¿å³æ—¶å›åº”ã€çœŸæ­£è§£å†³ç”¨æˆ·å’¨è¯¢çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-19">RAGè¯„ä¼°æœ€ä½³å®è·µ</h2>
<p>è®¾è®¡ä¸€å¥—å¥½çš„è¯„ä¼°ä½“ç³»ä¸ä»…é€‰æ‹©æŒ‡æ ‡ï¼Œè¿˜å¾—æ„å»ºåˆ‡å®å¯è¡Œçš„å·¥ä½œæµç¨‹ï¼Œå¸®åŠ©è¿­ä»£æ”¹è¿›ï¼Œå¹¶å§‹ç»ˆæ»¡è¶³çœŸå®çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-20">è®¾è®¡é«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹</h3>
<p>è¯„ä¼°æ•ˆæœå–å†³äºæµ‹è¯•æ ·æœ¬çš„è´¨é‡ã€‚åœ¨è€ƒè™‘è¯„ä¼°æŒ‡æ ‡ã€æ’°å†™LLMè¯„ä¼°æç¤ºè¯ä¹‹å‰ï¼Œä¼˜å…ˆå…³æ³¨è¯„ä¼°æ•°æ®é›†ï¼šæ˜¯å¦çœŸå®ã€ä¸æµ‹è¯•ç›®æ ‡ç›¸å…³æ€§å¦‚ä½•ï¼Ÿæ˜¯å¦å…·æœ‰ä»£è¡¨æ€§ï¼Ÿ</p>
<p><strong>ä¼˜å…ˆä½¿ç”¨çœŸå®æ•°æ®</strong>ã€‚å¦‚æœå¯ä»¥ï¼Œå°½é‡ä½¿ç”¨çœŸå®çš„ç”¨æˆ·æŸ¥è¯¢ã€è¿‡å¾€çš„å¯¹è¯æ—¥å¿—æˆ–å†…éƒ¨æœç´¢å†å²è®°å½•æ¥ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚è¿™æ ·åšï¼Œä¿è¯äº†è¯„æµ‹æ•°æ®ç¬¦åˆäººä»¬å®é™…ä½¿ç”¨çš„åœºæ™¯ã€‚</p>
<p><strong>æ²¡æœ‰çœŸå®æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘åˆæˆ</strong>ã€‚å¯ä»¥è°ƒæ•´æ•°æ®åˆæˆç­–ç•¥ï¼Œç”Ÿæˆæ›´çœŸå®ã€æ›´å¤šæ ·åŒ–çš„ç¤ºä¾‹ã€‚æ¯”å¦‚ï¼Œåœ¨ç»™LLMç³»ç»Ÿæç¤ºè¯æ—¶ï¼Œä¸ºå…¶å®šä¹‰å…·ä½“çš„è§’è‰²ï¼ˆæ­£åœ¨æ¯”è¾ƒæ–¹æ¡ˆçš„å®¢æˆ·ã€æ­£åœ¨å®¡æ ¸æ”¿ç­–çš„å†…éƒ¨åˆ†æå¸ˆç­‰ï¼‰ï¼Œä»ä»–ä»¬çš„è§’åº¦ç”Ÿæˆé—®é¢˜ã€‚å¦å¤–ï¼Œæµ‹è¯•å†…å®¹éœ€è¦ç»“åˆæ•°æ®ç±»å‹çš„æ¯”ä¾‹æ¥ç”Ÿæˆï¼Œå‡è®¾å®é™…åœºæ™¯ä¸­æœ‰40%æ˜¯ä¸å•†å“é€€æ¬¾æœ‰å…³ï¼Œåœ¨åˆæˆæ•°æ®ä¸­ä¹Ÿéœ€è¦ä½“ç°è¿™ä¸€ç‚¹ã€‚</p>
<p><strong>ä¸€å®šè¦äººå·¥æ£€æŸ¥åˆæˆçš„æµ‹è¯•æœº</strong>ã€‚LLMå¯ä»¥è¾…åŠ©ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œä½†å¹¶ä¸æ„å‘³ç€å¯ä»¥ç›²ç›®ä½¿ç”¨æµ‹è¯•æ•°æ®é›†ã€‚éœ€è¦è§„åˆ™è„šæœ¬è¿›è¡Œç­›é€‰ï¼Œç”šè‡³éœ€äººå·¥æŠ½æ ·ç­›æŸ¥ã€‚</p>
<p><strong>å‚è€ƒé¢†åŸŸä¸“å®¶çš„å»ºè®®</strong>ã€‚åœ¨æŸäº›å…·ä½“çš„é¢†åŸŸï¼Œå­˜åœ¨è®¸å¤šè¾¹ç•Œæƒ…å†µï¼Œå¯èƒ½ä¼šå½±å“ç³»ç»Ÿæ€§èƒ½ã€å®‰å…¨æ€§å’Œç¨³å®šæ€§çš„æƒ…å†µã€‚è¿™äº›æƒ…å†µé€šå¸¸ç”±ä¸°å¯Œç»éªŒå’ŒçŸ¥è¯†çš„ä¸“ä¸šäººå‘˜æŒæ¡ã€‚å¯ä»¥æä¾›ä¸€äº›å·¥å…·å’Œæ”¯æŒï¼Œä¾‹å¦‚å…±äº«è¡¨æ ¼æˆ–è½»é‡çº§ç”¨æˆ·ç•Œé¢ï¼Œå¸®åŠ©ä»–ä»¬æ›´è½»æ¾åœ°å®¡æŸ¥è¾“å‡ºç»“æœï¼Œå¹¶æå‡ºæµ‹è¯•æ¡ˆä¾‹ã€‚</p>
<p><strong>åœ¨å®éªŒä¸­ï¼ŒåŠ¡å¿…ä½¿ç”¨ç›¸åŒçš„æµ‹è¯•é›†</strong>ã€‚æ¯æ¬¡è¿è¡Œéƒ½é‡æ–°ç”Ÿæˆæµ‹è¯•é›†ï¼Œè¿™æ˜¯ä¸€ç±»å¸¸è§çš„é”™è¯¯ï¼Œä¼šå¼•å…¥å™ªå£°ï¼Œä½¿ç»“æœä¸å¯é ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ï¼Œä¿æŒæµ‹è¯•é›†çš„ç¨³å®šã€‚</p>
<p><strong>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¯·æ›´æ–°æµ‹è¯•æ•°æ®é›†</strong>ã€‚åœ¨å®Œæˆä¸åŒé…ç½®çš„æ€§èƒ½å¯¹æ¯”ã€ç³»ç»Ÿä¹Ÿç¨³å®šè¿è¡Œä¸€æ®µæ—¶é—´äº†ï¼Œæµ‹è¯•é›†çš„è§„æ¨¡ä¹Ÿåº”è¯¥ä¸æ–­æ¼”è¿›ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿåˆ°çš„çœŸå®ç”¨æˆ·æŸ¥è¯¢å’Œæ•…éšœæ¥æ‰©å±•æ•°æ®é›†ã€‚å¦å¤–ï¼Œæœ€å¥½ä¿ç•™ä¸€ä»½æœ€åˆçš„æµ‹è¯•é›†ï¼Œä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½åŸºçº¿ã€‚</p>
<h3 data-id="heading-21">é€‰æ‹©æ ¸å¿ƒçš„æŒ‡æ ‡</h3>
<p>ä¸éœ€è¦å¯¹æ‰€æœ‰çš„æŒ‡æ ‡è¯„ä¼°ä¸€æ¬¡ï¼Œåº”å½“ç»“åˆç³»ç»Ÿçš„å½“å‰é—®é¢˜ã€ä¸šåŠ¡éœ€æ±‚ï¼Œé€‰æ‹©é€‚é…çš„è¯„ä¼°æ–¹å¼ã€‚</p>
<ul>
<li><strong>æ‹’ç»ä¸‡èƒ½æŒ‡æ ‡</strong>ï¼šä¸åŒçš„é˜¶æ®µéœ€ç”¨ä¸åŒè¯„ä¼°å·¥å…·ï¼Œä¾‹å¦‚ï¼Œæ£€ç´¢è¯„ä¼°è¦çœ‹æ•°æ®å—ç›¸å…³æ€§ä¸æ’åºè´¨é‡ï¼Œé²æ£’æ€§æµ‹è¯•è¦è€ƒè™‘å“ç‰Œå®‰å…¨ç­‰å®šåˆ¶è¯„ä¼°é¡¹ï¼Œç”Ÿäº§ç¯å¢ƒè¿½è¸ªå¿ å®åº¦ã€æ ¼å¼æ­£ç¡®æ€§ç­‰æ ¸å¿ƒæŒ‡æ ‡ã€‚</li>
<li><strong>èšç„¦å®é™…é—®é¢˜</strong>ï¼šä¼˜å…ˆå¯¹å·²å‘ç°çš„é”™è¯¯æˆ–é«˜é£é™©ç‚¹è®¾è®¡è¯„ä¼°ï¼Œé¿å…å¯¹æ‰€æœ‰æŒ‡æ ‡è¯„ä¼°ï¼Œè¿™åªä¼šå¢åŠ å·¥ä½œé‡å’Œå™ªå£°å¹²æ‰°ï¼Œè¿™ç±»æŒ‡æ ‡æ— æ³•å®šä½çœŸå®é—®é¢˜ã€‚</li>
<li><strong>è®©LLMå¯¹é½äººå·¥æ ‡æ³¨</strong>ï¼šLLM è¯„ä¼°æ–¹æ³•éœ€ä»¥äººå·¥æ ‡æ³¨ä¸ºåŸºå‡†ï¼Œè€Œéä¾èµ–ç°æˆæç¤ºè¯æˆ–å›ºå®šæŒ‡æ ‡ï¼Œè¦é€šè¿‡äººå·¥æ ‡æ³¨æ¡ˆä¾‹æ ¡å‡†ä¼˜åŒ–LLMæç¤ºè¯ï¼Œä½¿LLMè¯„ä¼°æ ‡å‡†ä¸ä¸šåŠ¡æ ‡æ³¨å‡†åˆ™ä¿æŒä¸€è‡´ï¼Œä»è€Œå®ç°äººå·¥æ ‡æ³¨çš„è§„æ¨¡åŒ–å»¶ä¼¸ã€‚</li>
<li><strong>è§„é¿å®Œç¾ä¸»ä¹‰</strong>ï¼šè¯„ä¼°æ–¹æ³•ä»¥æœ‰ç”¨ä¸ºç›®æ ‡ï¼Œä¸è¦è¿½æ±‚æè‡´ï¼Œå¯ä»¥é€šè¿‡è¿­ä»£æŒç»­ä¼˜åŒ–ï¼Œæ ¸å¿ƒæ˜¯æ„å»º<strong>å‘ç°é—®é¢˜-æµ‹è¯•ä¿®å¤-éªŒè¯æ•ˆæœ</strong>çš„æœ‰æ•ˆé—­ç¯ã€‚</li>
</ul>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§]]></title>    <link>https://juejin.cn/post/7588028859541176346</link>    <guid>https://juejin.cn/post/7588028859541176346</guid>    <pubDate>2025-12-27T05:59:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588028859541176346" data-draft-id="7588067055481421833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§"/> <meta itemprop="keywords" content="åç«¯,æ¸¸æˆå¼€å‘"/> <meta itemprop="datePublished" content="2025-12-27T05:59:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-27T05:59:12.000Z" title="Sat Dec 27 2025 05:59:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Goå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨ï¼šæ¸¸æˆåç«¯çš„æ— é”æœ‰åºä¸å“åº”æ—¶é—´æŒæ§</h2>
<p>åœ¨æ¸¸æˆåç«¯æ¶æ„è®¾è®¡ä¸­ï¼Œ<strong>å•åç¨‹ï¼ˆå•çº¿ç¨‹ï¼‰äº‹ä»¶è°ƒåº¦å™¨ï¼ˆEvent Loopï¼‰</strong> æ˜¯å®ç° â€œ<strong>ç»å¯¹æ¶ˆæ¯é¡ºåº</strong>â€ ä¸ â€œ<strong>æ— é”çŠ¶æ€ç®¡ç†</strong>â€ çš„æ ¸å¿ƒæ–¹æ¡ˆã€‚</p>
<p>ç›¸è¾ƒäºå¤šçº¿ç¨‹æ¨¡å‹æ‰€é¢ä¸´çš„é”ç«äº‰ã€ç«æ€æ¡ä»¶ã€æ•°æ®ä¸€è‡´æ€§ç­‰å¤æ‚é—®é¢˜ï¼Œå•åç¨‹è°ƒåº¦å™¨é€šè¿‡ å®Œå…¨ä¸²è¡ŒåŒ–æ‰§è¡Œ æ‰€æœ‰æ ¸å¿ƒé€»è¾‘ï¼Œä»æ ¹æœ¬ä¸Šè§„é¿äº†å¹¶å‘å®‰å…¨é£é™©â€”â€”è¿™ä¸€ç‰¹æ€§å¯¹äºå¯¹çŠ¶æ€å‡†ç¡®æ€§è¦æ±‚æé«˜çš„æ¸¸æˆåœºæ™¯ï¼ˆå¦‚ç©å®¶è¡€é‡ã€é‡‘å¸ã€æŠ€èƒ½é‡Šæ”¾ç»“æœã€æˆ˜æ–—èƒœè´Ÿåˆ¤å®šï¼‰å…·æœ‰å†³å®šæ€§æ„ä¹‰ã€‚</p>
<p>ç„¶è€Œï¼Œä¸²è¡Œæ‰§è¡Œä¹Ÿå¸¦æ¥äº†ä¸¥è‹›çš„çº¦æŸï¼š<strong>ä»»ä½•ä¸€ä¸ªäº‹ä»¶çš„å¤„ç†å»¶è¿Ÿï¼Œéƒ½ä¼šç›´æ¥æ”¾å¤§ä¸ºå…¨æœç©å®¶çš„ä½“éªŒæŸè€—</strong>ã€‚å› æ­¤ï¼Œå•åç¨‹è°ƒåº¦å™¨çš„æ ¸å¿ƒè®¾è®¡ç›®æ ‡ï¼Œæ˜¯åœ¨ä¿è¯é€»è¾‘æœ‰åºæ€§çš„å‰æä¸‹ï¼Œ<strong>æè‡´æ§åˆ¶å“åº”æ—¶é—´ï¼Œå®ˆä½ç³»ç»Ÿç¨³å®šæ€§çº¢çº¿</strong>ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å“åº”æ—¶é—´æ§åˆ¶ï¼šå•åç¨‹è°ƒåº¦çš„ç”Ÿå‘½çº¿</h3>
<p>å•åç¨‹ Event Loop çš„æ€§èƒ½ç“¶é¢ˆï¼Œæœ¬è´¨ä¸Šæ˜¯ â€œ<strong>æ—¶é—´åˆ‡ç‰‡çš„æè‡´åˆ†é…</strong>â€ã€‚å…¶ä¸­ï¼š</p>
<ul>
<li><strong>å•ä¸ªäº‹ä»¶çš„å¤„ç†æ—¶é—´</strong>åº”æ§åˆ¶åœ¨ **100 å¾®ç§’ï¼ˆÎ¼sï¼‰**ä»¥å†…ï¼›</li>
<li>**é€»è¾‘å¸§ï¼ˆTickï¼‰**å‘¨æœŸåˆ™ä¾æ¸¸æˆç±»å‹çµæ´»è°ƒæ•´ï¼Œé€šå¸¸ä¸º <strong>15â€“50 æ¯«ç§’ï¼ˆmsï¼‰</strong>ã€‚</li>
</ul>
<p>åœ¨é«˜æ€§èƒ½æ¸¸æˆåç«¯ä¸­ï¼Œ<strong>1 æ¯«ç§’ï¼ˆmsï¼‰</strong> æ˜¯ä¸å¯é€¾è¶Šçš„çº¢çº¿ã€‚ä¸€æ—¦å•ä¸ªäº‹ä»¶å¤„ç†è€—æ—¶è¶…è¿‡ 1msï¼Œå³è¢«åˆ¤å®šä¸ºâ€œé‡åº¦ä»»åŠ¡â€ã€‚åŸå› åœ¨äºï¼š</p>
<ul>
<li>å•åç¨‹çš„ä¸²è¡Œæ‰§è¡Œå†³å®šäº†ï¼š<strong>ä¸€ä¸ªé˜»å¡äº‹ä»¶ä¼šå»¶è¿Ÿæ‰€æœ‰åç»­äº‹ä»¶çš„å¤„ç†</strong>â€”â€”æ— è®ºæ˜¯ç©å®¶çš„ WebSocket æ“ä½œã€gRPC å¤–éƒ¨è°ƒç”¨ï¼Œè¿˜æ˜¯æ¸¸æˆä¸–ç•Œçš„å¿ƒè·³å®šæ—¶å™¨ã€‚</li>
<li>å¯¹ç©å®¶è€Œè¨€ï¼Œ1ms çš„å¡é¡¿å¯èƒ½è¡¨ç°ä¸ºâ€œæŠ€èƒ½é‡Šæ”¾å»¶è¿Ÿâ€ã€â€œè§’è‰²ç§»åŠ¨ç²˜æ»â€ï¼›å¯¹ç³»ç»Ÿè€Œè¨€ï¼Œæ¯ç§’ä»…èƒ½å¤„ç† â‰¤1000ä¸ª æ­¤ç±»ä»»åŠ¡ï¼Œ<strong>ä¸¥é‡æ‹‰ä½å…¨æœå¹¶å‘æ‰¿è½½èƒ½åŠ›</strong>ã€‚</li>
</ul>
<blockquote>
<p>å¯ä»¥å½¢è±¡åœ°è¯´ï¼šé€»è¾‘çº¿ç¨‹ä¸­çš„ 1msï¼Œå ªæ¯”ç°å®ä¸–ç•Œçš„ 1 å°æ—¶ã€‚å®ˆä½è¿™æ¡çº¢çº¿ï¼Œå°±æ˜¯å®ˆä½ç©å®¶ä½“éªŒä¸ç³»ç»Ÿç¨³å®šæ€§çš„æ ¹åŸºã€‚</p>
</blockquote>
<h4 data-id="heading-2">1.1 æ ¸å¿ƒäº‹ä»¶è€—æ—¶æŒ‡æ ‡ä¸å½±å“åˆ†çº§</h4>
<p>ä¸åŒè€—æ—¶çš„äº‹ä»¶å¯¹ç³»ç»Ÿçš„å½±å“å·®å¼‚å·¨å¤§ï¼Œä»¥ä¸‹æ˜¯ç»è¿‡è¡Œä¸šå®è·µéªŒè¯çš„åˆ†çº§æ ‡å‡†ï¼Œå¯ç›´æ¥ä½œä¸ºç ”å‘è¿‡ç¨‹ä¸­çš„æ€§èƒ½è¯„ä¼°ä¾æ®ï¼š</p>



































<table><thead><tr><th>æŒ‡æ ‡ç­‰çº§</th><th>å¤„ç†è€—æ—¶</th><th>å…¸å‹åœºæ™¯</th><th>å½±å“è¯„ä¼°</th></tr></thead><tbody><tr><td>ç†æƒ³çº§</td><td>&lt; 50 Î¼s</td><td>çº¯å†…å­˜è¯»å†™ã€ç®€å•å±æ€§ä¿®æ”¹ï¼ˆå¦‚ç©å®¶åæ ‡æ›´æ–°ã€é“å…·ä½¿ç”¨æ‰£é™¤ã€åŸºç¡€çŠ¶æ€åˆ¤å®šï¼‰</td><td>æå¿«ä¸”æ— è´Ÿæ‹…ï¼Œæ˜¯å•åç¨‹äº‹ä»¶çš„æœ€ä¼˜ç›®æ ‡ï¼Œå¯æ”¯æŒæé«˜å¹¶å‘å¤„ç†</td></tr><tr><td>å®‰å…¨çº§</td><td>50 - 200 Î¼s</td><td>å°‘é‡å¤æ‚è®¡ç®—ï¼ˆå¦‚2Dç½‘æ ¼AOIï¼ˆå…´è¶£åŒºåŸŸï¼‰å‘¨è¾¹ç©å®¶å¿«é€ŸæŸ¥è¯¢ã€å¤šå±æ€§è”åŠ¨æ›´æ–°ï¼‰</td><td>æ€§èƒ½å®‰å…¨å¯æ§ï¼Œå³ä½¿ç¬æ—¶å¹¶å‘å¢åŠ ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´é€»è¾‘å¸§æ³¢åŠ¨</td></tr><tr><td>è­¦æˆ’çº§</td><td>200 Î¼s - 1 ms</td><td>å¤šæ¡ä»¶ç­›é€‰æŸ¥è¯¢ï¼ˆå¦‚ç©å®¶èƒŒåŒ…å†…ç¬¦åˆç‰¹å®šæ ‡ç­¾çš„é“å…·ç»Ÿè®¡ï¼‰ã€ç®€å•æˆ˜æ–—æ•°å€¼è®¡ç®—</td><td>ç•¥æ…¢ï¼Œå•äº‹ä»¶å½±å“æœ‰é™ï¼Œä½†å¤§é‡æ­¤ç±»äº‹ä»¶å¹¶å‘æ—¶ï¼Œä¼šå¼•å‘é€»è¾‘å¸§æŠ–åŠ¨ï¼ˆJitterï¼‰ï¼Œå¯¼è‡´ç³»ç»Ÿå“åº”ä¸ç¨³å®š</td></tr><tr><td>å±é™©çº§</td><td>&gt; 1 ms</td><td>æœªä¼˜åŒ–çš„å¤§è§„æ¨¡æˆ˜æ–—æŠ€èƒ½ç»“ç®—ã€å…¨æœç©å®¶æ•°æ®éå†ã€æ— ç¼“å­˜çš„å¤æ‚æŸ¥è¯¢</td><td>ç›´æ¥é˜»å¡ç³»ç»Ÿï¼šå•åç¨‹æ¯ç§’ä»…èƒ½å¤„ç†ä¸è¶³1000ä¸ªæ­¤ç±»ä»»åŠ¡ï¼Œç©å®¶å¯æ˜æ˜¾æ„ŸçŸ¥å»¶è¿Ÿï¼Œä¸¥é‡æ—¶å¼•å‘å…¨æœå¡é¡¿</td></tr></tbody></table>
<h4 data-id="heading-3">1.2 æŒ‡æ ‡èƒŒåçš„é€»è¾‘ï¼šåŸºäºæ¸¸æˆå¸§çš„é¢„ç®—è®¡ç®—</h4>
<p>ä¸Šè¿°æŒ‡æ ‡å¹¶éå‡­ç©ºè®¾å®šï¼Œè€Œæ˜¯åŸºäº <strong>â€œé€»è¾‘å¸§ï¼ˆTickï¼‰</strong>â€ çš„é¢„ç®—åˆ†é…æ¨¡å‹æ¨å¯¼è€Œæ¥ã€‚</p>
<p>ä»¥è¡Œä¸šå¸¸è§çš„ <strong>20Hzï¼ˆæ¯ç§’ 20 å¸§ï¼‰</strong> ä¸ºä¾‹ï¼š</p>
<ul>
<li><strong>å•å¸§æ€»æ—¶é—´</strong>ï¼š1000 ms Ã· 20 = <strong>50 ms / å¸§</strong></li>
<li><strong>å®‰å…¨é¢„ç•™</strong>ï¼šä¸ºåº”å¯¹æ¶ˆæ¯çªå‘ã€GCã€ç³»ç»Ÿè°ƒåº¦ç­‰ä¸ç¡®å®šæ€§ï¼Œé€šå¸¸ä»…åˆ†é… <strong>50% é¢„ç®—ï¼ˆ25 msï¼‰</strong> ç»™ä¸šåŠ¡é€»è¾‘</li>
<li><strong>å•äº‹ä»¶å¹³å‡ä¸Šé™</strong>ï¼šè‹¥å•å¸§éœ€å¤„ç† 500 æ¡æ¶ˆæ¯ï¼Œåˆ™æ¯æ¡å¹³å‡è€—æ—¶ â‰¤ 25 ms Ã· 500 = 50 Î¼s</li>
</ul>
<p>è¿™æ­£æ˜¯â€œç†æƒ³çº§â€è®¾å®šä¸º 50 Î¼s çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>ä¸åŒæ¸¸æˆç±»å‹å¯¹åº”ä¸åŒå¸§ç‡ä¸é¢„ç®—ï¼š</p>





























<table><thead><tr><th>æ¸¸æˆç±»å‹</th><th>å»ºè®®å¸§ç‡</th><th>å•å¸§é¢„ç®—</th><th>å•äº‹ä»¶å»ºè®®ä¸Šé™ï¼ˆ500 QPSï¼‰</th></tr></thead><tbody><tr><td>ç«æŠ€ç±»ï¼ˆMOBA/å°„å‡»ï¼‰</td><td>30â€“60 Hz</td><td>16â€“33 ms</td><td>&lt; 33 Î¼s</td></tr><tr><td>ä¸­åº¦äº¤äº’ç±»</td><td>20 Hz</td><td>25 ms</td><td>&lt; 50 Î¼s</td></tr><tr><td>ä¼‘é—²/æŒ‚æœºç±»</td><td>10 Hz</td><td>50 ms</td><td>&lt; 100â€“200 Î¼s</td></tr></tbody></table>
<blockquote>
<p>å·¥ç¨‹å»ºè®®ï¼šåœ¨æ¶æ„è®¾è®¡åˆæœŸå°±åº”æ ¹æ®æ¸¸æˆç±»å‹æ˜ç¡®å¸§é¢„ç®—ï¼Œå¹¶å°†è¯¥æŒ‡æ ‡çº³å…¥ CI/CD æ€§èƒ½é—¨ç¦ã€‚</p>
</blockquote>
<h4 data-id="heading-4">1.3 è¶…æ—¶äº‹ä»¶çš„è§£å†³æ–¹æ¡ˆï¼šä¸‰å¤§æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥</h4>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼Œéƒ¨åˆ†é€»è¾‘ï¼ˆå¦‚è·¨æœæˆ˜æ–—ç»“ç®—ã€å…¨æœæ•°æ®ç»Ÿè®¡ï¼‰éš¾ä»¥å‹ç¼©è‡³ 1ms å†…ã€‚æ­¤æ—¶éœ€é€šè¿‡ â€œ<strong>éé˜»å¡åŒ–</strong>â€ æ‰‹æ®µæ‹†è§£å‹åŠ›ï¼š</p>
<h5 data-id="heading-5">ç­–ç•¥Aï¼šä»»åŠ¡åˆ‡ç‰‡ï¼ˆTime Slicingï¼‰â€”â€” å¤§ä»»åŠ¡æ‹†åˆ†ä¸ºå°å¸§æ‰§è¡Œ</h5>
<ul>
<li><strong>æ€è·¯</strong>ï¼šå°†é•¿ä»»åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œ<strong>åˆ†æ•£åˆ°å¤šä¸ªé€»è¾‘å¸§ä¸­é€æ­¥å®Œæˆ</strong>ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šå…¨æœå‘å¥–ï¼ˆ10 ä¸‡ç©å®¶ï¼‰ã€è·¨æœæ’è¡Œæ¦œè®¡ç®—ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š
<ul>
<li>æŒ‰ <strong>â€œå®‰å…¨çº§â€è€—æ—¶</strong> æ‹†åˆ†ï¼ˆå¦‚æ¯å¸§å¤„ç† 500 äººï¼Œè€—æ—¶ &lt; 50 Î¼sï¼‰</li>
<li><strong>æŒä¹…åŒ–è¿›åº¦</strong>ï¼ˆå¦‚â€œå·²å¤„ç†è‡³ UID=3200â€ï¼‰ï¼Œæ”¯æŒæ–­ç‚¹ç»­åš</li>
<li>é‡å¯åå¯ä»æ–­ç‚¹æ¢å¤ï¼Œç¡®ä¿ <strong>å¹‚ç­‰æ€§ä¸ä¸€è‡´æ€§</strong></li>
</ul>
</li>
</ul>
<h5 data-id="heading-6">ç­–ç•¥Bï¼šå¼‚æ­¥å¸è½½ï¼ˆOffloadingï¼‰â€”â€” è®¡ç®—ä»»åŠ¡ç§»äº¤è‡³Workeråç¨‹</h5>
<ul>
<li><strong>æ€è·¯</strong>ï¼šä¸»åç¨‹ä»…åš <strong>è°ƒåº¦ä¸çŠ¶æ€ç®¡ç†</strong>ï¼Œå°†æ— çŠ¶æ€/å¼±çŠ¶æ€è®¡ç®—å¸è½½è‡³ Worker Poolã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šA* å¯»è·¯ã€è§†é‡ AOI è®¡ç®—ã€ä¼¤å®³å…¬å¼ç»“ç®—ã€æ’è¡Œæ¦œæƒé‡ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š
<ul>
<li>ä¸»åç¨‹ä¸ Worker é€šè¿‡ <strong>å¸¦ç¼“å†²é€šé“</strong> é€šä¿¡ï¼Œ<strong>ç»ä¸é˜»å¡ä¸»å¾ªç¯</strong></li>
<li>Worker è¿”å›ç»“æœåï¼Œä¸»åç¨‹éœ€ <strong>æ ¡éªŒçŠ¶æ€æ—¶æ•ˆæ€§</strong>ï¼ˆå¦‚ç©å®¶æ˜¯å¦å·²ç¦»çº¿ï¼‰</li>
<li>Worker æ•°é‡å»ºè®® â‰¤ CPU æ ¸æ•°ï¼Œé¿å…è°ƒåº¦å¼€é”€åè¶…æ”¶ç›Š</li>
</ul>
</li>
</ul>
<h5 data-id="heading-7">ç­–ç•¥Cï¼šæ•°æ®é¢„å¤„ç†â€”â€” ç©ºé—´æ¢æ—¶é—´ï¼Œè§„é¿å®æ—¶è®¡ç®—</h5>
<ul>
<li><strong>æ€è·¯</strong>ï¼š<strong>æå‰ç¼“å­˜é«˜é¢‘æŸ¥è¯¢ç»“æœ</strong>ï¼Œé¿å…è¿è¡Œæ—¶éå†æˆ–å¤æ‚è®¡ç®—ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šå·¥ä¼šæœ€é«˜ç­‰çº§ç©å®¶ã€æˆ˜åŠ› Top100ã€å¸¸ç”¨é“å…·ç»Ÿè®¡ã€‚</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼š
<ul>
<li>åœ¨ <strong>æ•°æ®å˜æ›´æ—¶å¢é‡æ›´æ–°ç¼“å­˜</strong>ï¼ˆå¦‚ç©å®¶å‡çº§ â†’ æ›´æ–°å·¥ä¼šç¼“å­˜ï¼‰</li>
<li>é‡‡ç”¨ <strong>è¯»å¤šå†™å°‘</strong> ç­–ç•¥ï¼›è‹¥å†™é¢‘ç‡è¿‡é«˜ï¼ˆå¦‚å®æ—¶ä¼¤å®³ï¼‰ï¼Œé¢„å¤„ç†æ”¶ç›Šå°†è¢«æ›´æ–°æˆæœ¬æŠµæ¶ˆ</li>
<li>å¯ç»“åˆ <strong>LRU + å®šæ—¶åˆ·æ–°</strong> æœºåˆ¶ï¼Œå¹³è¡¡ä¸€è‡´æ€§ä¸æ€§èƒ½</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">äºŒã€ä¼˜å…ˆçº§æ§åˆ¶ï¼šä¿éšœæ ¸å¿ƒä½“éªŒçš„è°ƒåº¦é€»è¾‘</h3>
<p>å•åç¨‹çš„ä¸²è¡Œç‰¹æ€§å†³å®šäº† <strong>äº‹ä»¶å¤„ç†é¡ºåº</strong> = <strong>ç©å®¶ä½“éªŒè´¨é‡</strong>ã€‚è‹¥åå°ç»Ÿè®¡å ç”¨å¸§é¢„ç®—ï¼Œå°†ç›´æ¥å¯¼è‡´ç©å®¶æ“ä½œå»¶è¿Ÿâ€”â€”è¿™æ˜¯ä¸å¯æ¥å—çš„ã€‚</p>
<p>å› æ­¤ï¼Œå¿…é¡»å®æ–½ <strong>ä¸‰çº§ä¼˜å…ˆçº§è°ƒåº¦</strong>ï¼š</p>
<h4 data-id="heading-9">2.1 ç¬¬ä¸€ä¼˜å…ˆçº§ï¼ˆHighï¼‰ï¼šç©å®¶å®æ—¶äº¤äº’æŒ‡ä»¤ï¼ˆWebSocketï¼‰</h4>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç§»åŠ¨ã€æŠ€èƒ½é‡Šæ”¾ã€é“å…·ä½¿ç”¨ã€NPC å¯¹è¯</li>
<li><strong>ç†ç”±</strong>ï¼šç›´æ¥å½±å“â€œæ“ä½œæ‰‹æ„Ÿâ€ï¼Œç«¯åˆ°ç«¯å»¶è¿Ÿåº” &lt; 100 ms</li>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>æŠ•é€’è‡³ <code>highChan</code></li>
<li>ä¸»å¾ªç¯ <strong>ä¼˜å…ˆæ¸…ç©º highChan</strong></li>
<li>è‹¥å †ç§¯ &gt; 100 æ¡ï¼Œè§¦å‘å‘Šè­¦å¹¶ é™æµä½ä¼˜å…ˆçº§æŠ•é€’</li>
</ul>
</li>
</ul>
<h5 data-id="heading-10">2.2 ç¬¬äºŒä¼˜å…ˆçº§ï¼ˆMediumï¼‰ï¼šæ¸¸æˆä¸–ç•Œå¿ƒè·³å®šæ—¶å™¨ï¼ˆTimerï¼‰</h5>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šæ€ªç‰© AIã€æŠ€èƒ½ CDã€å›è¡€å›è“ã€æˆ˜æ–—åŒæ­¥ã€å…¨æœæ´»åŠ¨</li>
<li><strong>ç†ç”±</strong>ï¼šé©±åŠ¨æ¸¸æˆä¸–ç•Œè¿è½¬ï¼Œå»¶è¿Ÿä¼šå¯¼è‡´â€œæ—¶é—´è½´é”™ä¹±â€</li>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>æŠ•é€’è‡³ <code>midChan</code></li>
<li>åœ¨ highChan ä¸ºç©ºåå¤„ç†</li>
<li>å®šæ—¶å™¨åˆ†æ¡¶ï¼ˆå¦‚ 100 ms / 1 s / 5 s ç»„ï¼‰ï¼Œé¿å…é›†ä¸­è§¦å‘</li>
</ul>
</li>
</ul>
<h5 data-id="heading-11">2.3 ç¬¬ä¸‰ä¼˜å…ˆçº§ï¼ˆLowï¼‰ï¼šå¤–éƒ¨è¯·æ±‚ä¸å¼‚æ­¥å›è°ƒ</h5>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šgRPC æŸ¥è¯¢ã€DB/Redis å›è°ƒã€å…¨æœç»Ÿè®¡ã€æ—¥å¿—ä¸ŠæŠ¥</li>
<li><strong>ç†ç”±</strong>ï¼šå¯¹å®æ—¶æ€§ä¸æ•æ„Ÿï¼Œå¯å®¹å¿æ¯«ç§’çº§å»¶è¿Ÿ</li>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>æŠ•é€’è‡³ <code>lowChan</code></li>
<li>ä»…åœ¨ high + mid ä¸ºç©ºæ—¶å¤„ç†ï¼Œæˆ–æ¯å¸§æœ«å°¾åˆ†é… â‰¤ 2 ms é¢„ç®—</li>
<li>è‹¥å †ç§¯ &gt; 1000 æ¡ï¼Œå¯ä¸¢å¼ƒéå…³é”®äº‹ä»¶ï¼ˆå¦‚åœ¨çº¿äººæ•°ç»Ÿè®¡ï¼‰</li>
</ul>
</li>
</ul>
<h5 data-id="heading-12">2.4 å…³é”®è¡¥å……ï¼šé¿å…ä¼˜å…ˆçº§å€’ç½®</h5>
<ul>
<li>âŒ ç¦æ­¢ä½ä¼˜å…ˆçº§äº‹ä»¶æŒæœ‰ é•¿æ—¶é—´èµ„æºï¼ˆå¦‚ DB è¿æ¥ï¼‰</li>
<li>âŒ ç¦æ­¢åœ¨ä½ä¼˜å…ˆçº§ä¸­ è§¦å‘é«˜ä¼˜å…ˆçº§äº‹ä»¶ï¼ˆå¦‚ç»Ÿè®¡æ—¶å‘æ¨é€ï¼‰</li>
<li>âœ… å¯¹ä½ä¼˜å…ˆçº§äº‹ä»¶è®¾ç½® æœ€å¤§å¤„ç†æ—¶é•¿ï¼ˆå¦‚ 500 Î¼sï¼‰ï¼Œè¶…æ—¶åˆ™ç§»äº¤ä¸‹ä¸€å¸§</li>
</ul>
<blockquote>
<p>ä¼˜å…ˆçº§ä¸æ˜¯å»ºè®®ï¼Œè€Œæ˜¯ç©å®¶ä½“éªŒçš„æŠ¤æ ã€‚</p>
</blockquote>
<h3 data-id="heading-13">ä¸‰ã€å®è·µå‚è€ƒï¼šGoå•åç¨‹äº‹ä»¶è°ƒåº¦å™¨å®ç°</h3>
<p>åŸºäºä¸Šè¿°è®¾è®¡ï¼Œå¯åˆ©ç”¨ Go çš„ channel + goroutine ç‰¹æ€§ï¼Œæ„å»ºè½»é‡ã€é«˜æ•ˆã€ç¡®å®šæ€§çš„äº‹ä»¶è°ƒåº¦å™¨ã€‚</p>
<h4 data-id="heading-14">3.1 æ ¸å¿ƒè®¾è®¡</h4>
<ul>
<li>ä¸‰é€šé“åˆ†ä¼˜å…ˆçº§ï¼š<code>highChan</code> / <code>midChan</code> / <code>lowChan</code>ï¼ˆå‡å¸¦ç¼“å†²ï¼‰</li>
<li>ç»Ÿä¸€äº‹ä»¶ç»“æ„ï¼šå«å¤„ç†å‡½æ•°ã€ä¼˜å…ˆçº§ã€åˆ›å»ºæ—¶é—´ï¼ˆç”¨äºç›‘æ§ï¼‰</li>
<li>ä¸»å¾ªç¯è°ƒåº¦ï¼šä¼˜å…ˆæ¶ˆè´¹ high â†’ mid â†’ lowï¼Œå¹¶ä¸¥æ ¼æ§åˆ¶å¸§è€—æ—¶</li>
</ul>
<h4 data-id="heading-15">3.2 å‚è€ƒä»£ç </h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"log"</span>
	<span class="hljs-string">"time"</span>
)

<span class="hljs-keyword">const</span> (
	PriorityHigh = <span class="hljs-literal">iota</span>
	PriorityMedium
	PriorityLow
)

<span class="hljs-keyword">const</span> (
	FrameInterval = <span class="hljs-number">50</span> * time.Millisecond <span class="hljs-comment">// 20 Hz é€»è¾‘å¸§</span>
	FrameBudget   = <span class="hljs-number">25</span> * time.Millisecond <span class="hljs-comment">// é¢„ç•™50%å®‰å…¨ç¼“å†²</span>
	MaxLowTime    = <span class="hljs-number">2</span> * time.Millisecond  <span class="hljs-comment">// ä½ä¼˜å…ˆçº§æœ€å¤šå ç”¨ 2 ms / å¸§</span>
)

<span class="hljs-keyword">type</span> Event <span class="hljs-keyword">struct</span> {
	Handler   <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span>
	Priority  <span class="hljs-type">int</span>
	CreatedAt time.Time
}

<span class="hljs-keyword">type</span> EventLoop <span class="hljs-keyword">struct</span> {
	highChan <span class="hljs-keyword">chan</span> *Event
	midChan  <span class="hljs-keyword">chan</span> *Event
	lowChan  <span class="hljs-keyword">chan</span> *Event
	quit     <span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewEventLoop</span><span class="hljs-params">()</span></span> *EventLoop {
	<span class="hljs-keyword">return</span> &amp;EventLoop{
		highChan: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Event, <span class="hljs-number">1000</span>),
		midChan:  <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Event, <span class="hljs-number">1000</span>),
		lowChan:  <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> *Event, <span class="hljs-number">1000</span>),
		quit:     <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{}),
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> Submit(event *Event) {
	ch := el.lowChan
	<span class="hljs-keyword">switch</span> event.Priority {
	<span class="hljs-keyword">case</span> PriorityHigh:
		ch = el.highChan
	<span class="hljs-keyword">case</span> PriorityMedium:
		ch = el.midChan
	}
	<span class="hljs-keyword">select</span> {
	<span class="hljs-keyword">case</span> ch &lt;- event:
	<span class="hljs-keyword">default</span>:
		log.Printf(<span class="hljs-string">"Priority %d channel full, dropping event"</span>, event.Priority)
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> Start() {
	ticker := time.NewTicker(FrameInterval)
	<span class="hljs-keyword">defer</span> ticker.Stop()
	log.Println(<span class="hljs-string">"EventLoop started"</span>)

	<span class="hljs-keyword">for</span> {
		<span class="hljs-keyword">select</span> {
		<span class="hljs-keyword">case</span> &lt;-el.quit:
			log.Println(<span class="hljs-string">"EventLoop stopped"</span>)
			<span class="hljs-keyword">return</span>
		<span class="hljs-keyword">case</span> &lt;-ticker.C:
			el.processFrame()
		}
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> Stop() {
	<span class="hljs-built_in">close</span>(el.quit)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(el *EventLoop)</span></span> processFrame() {
	frameStart := time.Now()

	<span class="hljs-comment">// 1. å¤„ç† High ä¼˜å…ˆçº§ï¼ˆç›´åˆ°ç©ºï¼‰</span>
	<span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(el.highChan) &gt; <span class="hljs-number">0</span> {
		ev := &lt;-el.highChan
		ev.Handler()
		<span class="hljs-keyword">if</span> time.Since(frameStart) &gt;= FrameBudget {
			log.Println(<span class="hljs-string">"Frame budget exceeded during high-priority processing"</span>)
			<span class="hljs-keyword">return</span>
		}
	}

	<span class="hljs-comment">// 2. å¤„ç† Medium ä¼˜å…ˆçº§ï¼ˆç›´åˆ°ç©ºï¼‰</span>
	<span class="hljs-keyword">for</span> <span class="hljs-built_in">len</span>(el.midChan) &gt; <span class="hljs-number">0</span> {
		ev := &lt;-el.midChan
		ev.Handler()
		<span class="hljs-keyword">if</span> time.Since(frameStart) &gt;= FrameBudget {
			log.Println(<span class="hljs-string">"Frame budget exceeded during medium-priority processing"</span>)
			<span class="hljs-keyword">return</span>
		}
	}

	<span class="hljs-comment">// 3. æœ‰é™å¤„ç† Low ä¼˜å…ˆçº§</span>
	lowDeadline := frameStart.Add(MaxLowTime)
	<span class="hljs-keyword">for</span> time.Now().Before(lowDeadline) &amp;&amp; <span class="hljs-built_in">len</span>(el.lowChan) &gt; <span class="hljs-number">0</span> {
		ev := &lt;-el.lowChan
		ev.Handler()
	}
}

<span class="hljs-comment">// ===== ç¤ºä¾‹ä½¿ç”¨ï¼šå®Œæ•´ main å‡½æ•° =====</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	loop := NewEventLoop()

	<span class="hljs-comment">// æ¨¡æ‹Ÿç©å®¶å®æ—¶æ“ä½œï¼ˆHigh ä¼˜å…ˆçº§ï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++ {
			loop.Submit(&amp;Event{
				Priority:  PriorityHigh,
				CreatedAt: time.Now(),
				Handler: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
					time.Sleep(<span class="hljs-number">60</span> * time.Microsecond) <span class="hljs-comment">// æ¨¡æ‹Ÿ 60 Î¼s æ“ä½œ</span>
					log.Println(<span class="hljs-string">"âœ… [HIGH] ç©å®¶æŠ€èƒ½é‡Šæ”¾"</span>)
				},
			})
			time.Sleep(<span class="hljs-number">30</span> * time.Millisecond)
		}
	}()

	<span class="hljs-comment">// æ¨¡æ‹Ÿæ¸¸æˆä¸–ç•Œå¿ƒè·³ï¼ˆMedium ä¼˜å…ˆçº§ï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++ {
			loop.Submit(&amp;Event{
				Priority:  PriorityMedium,
				CreatedAt: time.Now(),
				Handler: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
					time.Sleep(<span class="hljs-number">150</span> * time.Microsecond) <span class="hljs-comment">// æ¨¡æ‹Ÿ 150 Î¼s</span>
					log.Println(<span class="hljs-string">"ğŸ”„ [MEDIUM] æ€ªç‰©AIå†³ç­–"</span>)
				},
			})
			time.Sleep(<span class="hljs-number">45</span> * time.Millisecond)
		}
	}()

	<span class="hljs-comment">// æ¨¡æ‹Ÿåå°ç»Ÿè®¡ï¼ˆLow ä¼˜å…ˆçº§ï¼‰</span>
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ {
			loop.Submit(&amp;Event{
				Priority:  PriorityLow,
				CreatedAt: time.Now(),
				Handler: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
					time.Sleep(<span class="hljs-number">300</span> * time.Microsecond) <span class="hljs-comment">// æ¨¡æ‹Ÿ 300 Î¼s</span>
					log.Println(<span class="hljs-string">"ğŸ“Š [LOW] å…¨æœåœ¨çº¿ç»Ÿè®¡"</span>)
				},
			})
			time.Sleep(<span class="hljs-number">20</span> * time.Millisecond)
		}
	}()

	<span class="hljs-comment">// å¯åŠ¨äº‹ä»¶å¾ªç¯</span>
	<span class="hljs-keyword">go</span> loop.Start()

	<span class="hljs-comment">// è¿è¡Œ 3 ç§’åä¼˜é›…é€€å‡º</span>
	log.Println(<span class="hljs-string">"â³ è¿è¡Œ 3 ç§’æ¨¡æ‹Ÿ..."</span>)
	time.Sleep(<span class="hljs-number">3</span> * time.Second)
	loop.Stop()
	time.Sleep(<span class="hljs-number">100</span> * time.Millisecond) <span class="hljs-comment">// ç•™å‡ºé€€å‡ºæ—¶é—´</span>
	log.Println(<span class="hljs-string">"ğŸ”š ç¨‹åºç»“æŸ"</span>)
}
</code></pre>
<h4 data-id="heading-16">3.3 å®Œæ•´å®ç°å‚è€ƒ</h4>
<p>ä¸Šè¿°ä»£ç ä¸ºæ ¸å¿ƒç®€åŒ–ç‰ˆï¼Œå®Œæ•´çš„ç”Ÿäº§çº§å®ç°ï¼ˆå«è¶…æ—¶ç›‘æ§ã€å‘Šè­¦ã€ä»»åŠ¡åˆ‡ç‰‡å·¥å…·ã€Workeråç¨‹æ± ï¼‰å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-utils%2Ftree%2Fmain%2Feventloop" target="_blank" title="https://github.com/tx7do/go-utils/tree/main/eventloop" ref="nofollow noopener noreferrer">github.com/tx7do/go-utâ€¦</a></p>
<h3 data-id="heading-17">å››ã€æ€»ç»“ï¼šå•åç¨‹è°ƒåº¦çš„æ ¸å¿ƒå¿ƒæ³•</h3>
<p>Go å•åç¨‹äº‹ä»¶è°ƒåº¦å™¨çš„ä»·å€¼ï¼Œåœ¨äº <strong>ç”¨â€œä¸²è¡Œæ‰§è¡Œâ€æ¢å–â€œæ— é”æœ‰åºâ€</strong>ï¼Œä½†è¿™ä¸€ä¼˜åŠ¿çš„å‰ææ˜¯ <strong>å¯¹æ—¶é—´çš„æè‡´æŒæ§</strong>ã€‚</p>
<p>å…¶æ ¸å¿ƒå¿ƒæ³•å¯å‡ç»ƒä¸ºä¸‰ç‚¹ï¼š</p>
<ul>
<li><strong>å®ˆçº¢çº¿</strong>ï¼š<strong>å°†1msä½œä¸ºå•äº‹ä»¶å¤„ç†çš„ç»å¯¹ä¸Šé™</strong>ï¼Œé€šè¿‡å¸§é¢„ç®—è®¡ç®—åæ¨å•äº‹ä»¶è€—æ—¶æŒ‡æ ‡ï¼Œä»è®¾è®¡é˜¶æ®µè§„é¿é˜»å¡é£é™©ï¼›</li>
<li><strong>åˆ†ä¼˜å…ˆçº§</strong>ï¼šä»¥ <strong>ç©å®¶ä½“éªŒä¸ºä¸­å¿ƒ</strong>ï¼Œç¡®ä¿å®æ—¶äº¤äº’ä¸ä¸–ç•Œå¿ƒè·³ä¼˜å…ˆæ‰§è¡Œï¼Œä½ä¼˜å…ˆçº§ä»»åŠ¡å¯é™çº§ã€ä¸¢å¼ƒæˆ–é™æµã€‚</li>
<li><strong>æ‹†å‹åŠ›</strong>ï¼šé€šè¿‡<strong>ä»»åŠ¡åˆ‡ç‰‡ã€å¼‚æ­¥å¸è½½ã€æ•°æ®é¢„å¤„ç†</strong>ï¼Œå°†æ— æ³•å‹ç¼©çš„è€—æ—¶ä»»åŠ¡â€œéé˜»å¡åŒ–â€ï¼Œé¿å…å•åç¨‹æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</li>
</ul>
<p>åœ¨å®é™…ç ”å‘ä¸­ï¼Œéœ€ç»“åˆ <strong>æ¸¸æˆç±»å‹ã€å¹¶å‘è§„æ¨¡ã€ä¸šåŠ¡å¤æ‚åº¦</strong> åŠ¨æ€è°ƒæ•´ç­–ç•¥ã€‚ä½†æ— è®ºåœºæ™¯å¦‚ä½•å˜åŒ–ï¼Œ<strong>â€œæœ‰åºæ€§â€ä¸â€œå“åº”é€Ÿåº¦â€çš„å¹³è¡¡</strong>ï¼Œå§‹ç»ˆæ˜¯å•åç¨‹è°ƒåº¦å™¨çš„çµé­‚æ‰€åœ¨ã€‚</p>
<blockquote>
<p>æœ€ç»ˆç›®æ ‡ï¼šè®©æ¯ä¸€å¾®ç§’éƒ½ä¸ºç©å®¶ä½“éªŒæœåŠ¡ï¼Œè€Œéä¸ºç³»ç»Ÿå¤æ‚æ€§ä¹°å•ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588064253634953270</link>    <guid>https://juejin.cn/post/7588064253634953270</guid>    <pubDate>2025-12-26T23:05:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588064253634953270" data-draft-id="7588001624905695251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-26T23:05:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ5ï¼‰ä»€ä¹ˆæ˜¯Hibernateçš„é…ç½®æ–‡ä»¶ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-26T23:05:10.000Z" title="Fri Dec 26 2025 23:05:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„é…ç½®æ–‡ä»¶æ˜¯ç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§ã€æ˜ å°„èµ„æºã€ç¼“å­˜é…ç½®ç­‰ã€‚Hibernateä¸»è¦ä½¿ç”¨ä¸¤ç§é…ç½®æ–‡ä»¶ï¼š</p>
<ol>
<li><strong><code>hibernate.cfg.xml</code></strong>ï¼šXMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</li>
<li><strong><code>hibernate.properties</code></strong>ï¼šå±æ€§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚</li>
</ol>
<h3 data-id="heading-0">1. <code>hibernate.cfg.xml</code> é…ç½®æ–‡ä»¶</h3>
<p><code>hibernate.cfg.xml</code> æ˜¯ä¸€ä¸ªXMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ä¿¡æ¯ã€Hibernateå±æ€§é…ç½®ã€æ˜ å°„èµ„æºç­‰ã€‚å®ƒæ˜¯Hibernateé…ç½®ä¸­æœ€å¸¸ç”¨çš„æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-1">ä¸»è¦åŠŸèƒ½ï¼š</h4>
<ul>
<li>é…ç½®æ•°æ®åº“è¿æ¥å±æ€§ã€‚</li>
<li>é…ç½®Hibernateç›¸å…³å±æ€§ï¼ˆå¦‚æ–¹è¨€ã€ç¼“å­˜ã€æ—¥å¿—ç­‰ï¼‰ã€‚</li>
<li>é…ç½®å®ä½“ç±»çš„æ˜ å°„ä¿¡æ¯ã€‚</li>
</ul>
<h4 data-id="heading-2">ç¤ºä¾‹ï¼š</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„<code>hibernate.cfg.xml</code>æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- äºŒçº§ç¼“å­˜é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_second_level_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.region.factory_class"</span>&gt;</span>org.hibernate.cache.ehcache.EhCacheRegionFactory<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æŸ¥è¯¢ç¼“å­˜é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_query_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- è¿æ¥æ± é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.min_size"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_size"</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.timeout"</span>&gt;</span>300<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.max_statements"</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.c3p0.idle_test_period"</span>&gt;</span>3000<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Course"</span>/&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">è¯¦ç»†è¯´æ˜ï¼š</h4>
<ul>
<li><strong>æ•°æ®åº“è¿æ¥é…ç½®</strong>ï¼šå®šä¹‰äº†å¦‚ä½•è¿æ¥æ•°æ®åº“ï¼ŒåŒ…æ‹¬æ•°æ®åº“é©±åŠ¨ç±»ã€URLã€ç”¨æˆ·åå’Œå¯†ç ã€‚</li>
<li><strong>Hibernateå±æ€§é…ç½®</strong>ï¼šé…ç½®Hibernateçš„è¡Œä¸ºï¼ŒåŒ…æ‹¬SQLæ–¹è¨€ã€æ˜¯å¦æ˜¾ç¤ºSQLã€SQLæ ¼å¼åŒ–é€‰é¡¹ç­‰ã€‚</li>
<li><strong>äºŒçº§ç¼“å­˜é…ç½®</strong>ï¼šå¯ç”¨äºŒçº§ç¼“å­˜å¹¶æŒ‡å®šç¼“å­˜çš„å®ç°ã€‚</li>
<li><strong>æŸ¥è¯¢ç¼“å­˜é…ç½®</strong>ï¼šå¯ç”¨æŸ¥è¯¢ç¼“å­˜ã€‚</li>
<li><strong>è¿æ¥æ± é…ç½®</strong>ï¼šé…ç½®è¿æ¥æ± çš„è¡Œä¸ºï¼Œå¦‚æœ€å°è¿æ¥æ•°ã€æœ€å¤§è¿æ¥æ•°ã€è¶…æ—¶æ—¶é—´ç­‰ã€‚</li>
<li><strong>æ˜ å°„ç±»é…ç½®</strong>ï¼šæŒ‡å®šHibernateéœ€è¦ç®¡ç†çš„å®ä½“ç±»ã€‚</li>
</ul>
<h3 data-id="heading-4">2. <code>hibernate.properties</code> é…ç½®æ–‡ä»¶</h3>
<p><code>hibernate.properties</code> æ˜¯ä¸€ä¸ªå±æ€§æ–‡ä»¶æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºå®šä¹‰Hibernateçš„å„ç§é…ç½®å‚æ•°ã€‚å®ƒçš„å†…å®¹ç›¸å¯¹ç®€å•ç›´æ¥ï¼Œä½†ä¸å¦‚XMLæ ¼å¼çš„é…ç½®æ–‡ä»¶ç»“æ„åŒ–å’Œå¯è¯»æ€§å¼ºã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ï¼š</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè¯¦ç»†çš„<code>hibernate.properties</code>æ–‡ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># æ•°æ®åº“è¿æ¥é…ç½®
hibernate.connection.driver_class = com.mysql.cj.jdbc.Driver
hibernate.connection.url = jdbc:mysql://localhost:3306/your_database
hibernate.connection.username = your_username
hibernate.connection.password = your_password

# Hibernate å±æ€§é…ç½®
hibernate.dialect = org.hibernate.dialect.MySQLDialect
hibernate.show_sql = true
hibernate.format_sql = true
hibernate.hbm2ddl.auto = update

# äºŒçº§ç¼“å­˜é…ç½®
hibernate.cache.use_second_level_cache = true
hibernate.cache.region.factory_class = org.hibernate.cache.ehcache.EhCacheRegionFactory

# æŸ¥è¯¢ç¼“å­˜é…ç½®
hibernate.cache.use_query_cache = true

# è¿æ¥æ± é…ç½®
hibernate.c3p0.min_size = 5
hibernate.c3p0.max_size = 20
hibernate.c3p0.timeout = 300
hibernate.c3p0.max_statements = 50
hibernate.c3p0.idle_test_period = 3000
</code></pre>
<h3 data-id="heading-6">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ç»“åˆä¸Šè¿°é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç è¿›è¡ŒHibernateçš„åˆå§‹åŒ–å’Œä½¿ç”¨ï¼š</p>
<h4 data-id="heading-7">Javaä»£ç ç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();

        <span class="hljs-comment">// åˆ›å»ºå¹¶ä¿å­˜å­¦ç”Ÿå¯¹è±¡</span>
        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
        session.save(student);

        transaction.commit();

        <span class="hljs-comment">// è¯»å–å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        <span class="hljs-type">Student</span> <span class="hljs-variable">retrievedStudent</span> <span class="hljs-operator">=</span> session.get(Student.class, student.getId());
        System.out.println(<span class="hljs-string">"Retrieved Student: "</span> + retrievedStudent.getName() + <span class="hljs-string">", Age: "</span> + retrievedStudent.getAge());
        transaction.commit();

        <span class="hljs-comment">// æ›´æ–°å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        retrievedStudent.setAge(<span class="hljs-number">21</span>);
        session.update(retrievedStudent);
        transaction.commit();

        <span class="hljs-comment">// åˆ é™¤å­¦ç”Ÿå¯¹è±¡</span>
        transaction = session.beginTransaction();
        session.delete(retrievedStudent);
        transaction.commit();

        session.close();
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-8">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>æŒä¹…åŒ–ç±»å®šä¹‰</strong>ï¼šæŒä¹…åŒ–ç±»<code>Student</code>ä½¿ç”¨äº†<code>@Entity</code>æ³¨è§£è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæŒä¹…åŒ–å®ä½“ç±»ï¼Œ<code>@Id</code>å’Œ<code>@GeneratedValue</code>æ³¨è§£ç”¨äºå®šä¹‰ä¸»é”®å’Œä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</p>
</li>
<li>
<p><strong><code>hibernate.cfg.xml</code> é…ç½®</strong>ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡<code>&lt;mapping class="com.example.domain.Student"/&gt;</code>å°†<code>Student</code>ç±»æ˜ å°„åˆ°æ•°æ®åº“è¡¨ã€‚</p>
</li>
<li>
<p><strong>Hibernateæ“ä½œ</strong>ï¼š</p>
<ul>
<li><strong>åˆ›å»ºSessionFactory</strong>ï¼šé€šè¿‡<code>Configuration</code>ç±»è¯»å–<code>hibernate.cfg.xml</code>æ–‡ä»¶åˆ›å»º<code>SessionFactory</code>ã€‚</li>
<li><strong>è·å–Session</strong>ï¼šé€šè¿‡<code>SessionFactory</code>è·å–<code>Session</code>å¯¹è±¡ã€‚</li>
<li><strong>å¯åŠ¨äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>Session</code>å¯¹è±¡å¯åŠ¨äº‹åŠ¡ã€‚</li>
<li><strong>CRUDæ“ä½œ</strong>ï¼š
<ul>
<li><strong>åˆ›å»ºå¹¶ä¿å­˜</strong>ï¼šä½¿ç”¨<code>session.save()</code>æ–¹æ³•ä¿å­˜ä¸€ä¸ªæ–°çš„<code>Student</code>å¯¹è±¡ã€‚</li>
<li><strong>è¯»å–</strong>ï¼šä½¿ç”¨<code>session.get()</code>æ–¹æ³•æ ¹æ®ä¸»é”®è¯»å–<code>Student</code>å¯¹è±¡ã€‚</li>
<li><strong>æ›´æ–°</strong>ï¼šä¿®æ”¹å¯¹è±¡çš„å±æ€§å€¼å¹¶ä½¿ç”¨<code>session.update()</code>æ–¹æ³•è¿›è¡Œæ›´æ–°ã€‚</li>
<li><strong>åˆ é™¤</strong>ï¼šä½¿ç”¨<code>session.delete()</code>æ–¹æ³•åˆ é™¤å¯¹è±¡ã€‚</li>
</ul>
</li>
<li><strong>æäº¤äº‹åŠ¡</strong>ï¼šé€šè¿‡<code>transaction.commit()</code>æ–¹æ³•æäº¤äº‹åŠ¡ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒHibernateå¯ä»¥å°†Javaå¯¹è±¡æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ï¼Œå¤„ç†å¯¹è±¡çš„CRUDæ“ä½œï¼Œå®ç°å¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¹‹é—´çš„æ˜ å°„å’Œç®¡ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ä¸€æ¬¡å›´è§‚AIæ‰“ç‰Œï¼Œæ˜æ˜Ÿæ¨¡å‹å±…ç„¶é›†ä½“ç¿»è½¦ï¼Ÿä¸¨å¼€æºé¡¹ç›®CATArenaæ‹†è§£]]></title>    <link>https://juejin.cn/post/7588139768275664947</link>    <guid>https://juejin.cn/post/7588139768275664947</guid>    <pubDate>2025-12-28T05:36:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588139768275664947" data-draft-id="7588140921248104486" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ä¸€æ¬¡å›´è§‚AIæ‰“ç‰Œï¼Œæ˜æ˜Ÿæ¨¡å‹å±…ç„¶é›†ä½“ç¿»è½¦ï¼Ÿä¸¨å¼€æºé¡¹ç›®CATArenaæ‹†è§£"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T05:36:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ä¸€æ¬¡å›´è§‚AIæ‰“ç‰Œï¼Œæ˜æ˜Ÿæ¨¡å‹å±…ç„¶é›†ä½“ç¿»è½¦ï¼Ÿä¸¨å¼€æºé¡¹ç›®CATArenaæ‹†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T05:36:22.000Z" title="Sun Dec 28 2025 05:36:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3769f16278c843b2bd7fb064897b8e6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=rQEvuLFBn5ZxKUueZrHhMR0GjwE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Â </p>
<p>å“ˆå–½å¤§å®¶å¥½ï¼</p>
<p>æˆ‘æ˜¯é˜¿æ˜ŸğŸ‘‹</p>
<p>æœ€è¿‘æˆ‘åšäº†ä¸€ä»¶æœ‰ç‚¹ç¦»è°±çš„äº‹â€”â€”</p>
<p>Â </p>
<h2 data-id="heading-0">çœ‹äº†ä¸€ä¸‹åˆAIæ‰“ç‰Œ</h2>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªç”»é¢ï¼š</p>
<p>8ä¸ªä¸–ç•Œä¸Šæœ€èªæ˜çš„å¤§è„‘ï¼ˆè™½ç„¶ç°åœ¨æ˜¯ç¡…åŸºçš„ğŸ˜…ï¼‰ï¼Œ</p>
<p>AIä»¬æ£ç€1000ç­¹ç åä¸Šè™šæ‹ŸèµŒæ¡Œï¼Œ</p>
<p>ä¸€åœºAIä¹‹é—´çš„å¾·å·æ‰‘å…‹â€œé¥¥é¥¿æ¸¸æˆâ€å°±æ­¤å¼€å§‹ï¼</p>
<p>å°±æ˜¯è¿™ä¸ªå«CATArenaçš„é¡¹ç›®ï¼ğŸ‘‡ğŸ»AIå‹¾å¿ƒæ–—è§’ç°åœº</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd1ebd415d534a88b334015f183b87e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=0S2DPxX84LkrVLNZhz5IGaO%2FDzk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ğŸ® æ¯”èµ›è§„åˆ™</p>
<ul>
<li>â€¢ å¼€å±€ï¼š 8ä½AIé€‰æ‰‹ï¼Œæ¯äºº1000ç­¹ç </li>
<li>â€¢ è¿‡ç¨‹ï¼š æœ€å¤šæ‰“60æ‰‹ç‰Œï¼Œè¾“å…‰å°±æ·˜æ±°</li>
<li>â€¢ ç»“å±€ï¼š è¦ä¹ˆæ‰“åˆ°åªå‰©ä¸€ä¸ªâ€œèµŒç‹â€ï¼Œè¦ä¹ˆ60æ‰‹åæ¯”è°ç­¹ç å¤š</li>
<li>â€¢ è®¡åˆ†éªšæ“ä½œï¼š å† å†›é€šåƒï¼èµ¢å®¶ç®—â€œå‡»è´¥äº†æ‰€æœ‰å…¶ä»–7äººâ€ï¼Œå…¶ä»–äººç»Ÿç»Ÿè®°ä¸€æ¬¡å¤±è´¥ã€‚è¿™å°±æ˜¯ä¼ è¯´ä¸­çš„â€œèƒœè€…å…¨å¾—â€ï¼</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ebd420b183c4a5894b1f431f36bb4ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=dwuqW9qbXKBhk6pSxWMk95Q25mc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80d32d66d2524692995b3efc132a7781~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=BnnMKPaFOZOHpOsmlwcd1J9IUFw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">åç›´è§‰å½“çº¢ç‚¸å­é¸¡å·®ç‚¹è½æ¦œ</h2>
<p>æ¯”å¦‚åœ¨é¦–å±Šçº¿ä¸Šå…¬å¼€èµ›é‡Œï¼ŒClaudeç³»åˆ—è¿å‰ä¸‰éƒ½æ²¡è¿›ï¼Œè€ŒQwenå’ŒGPT-5å…±åŒç™»é¡¶ï¼Œè¿™ä¸ªç»“æœæ˜¯ä¸æ˜¯å’Œå¾ˆå¤šçº¯åšé¢˜çš„æ¦œå•å¾ˆä¸ä¸€æ ·ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4927e3b065e0486bb2290bb693bbe046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=ACQCasoqg3wP5VDqQDW3LvV43os%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€æç¬‘çš„æ˜¯ğŸ˜‚AIèƒ½åƒçœ‹â€œæ­¦æ—ç§˜ç±â€ä¸€æ ·ï¼Œç ”ç©¶å¯¹æ‰‹çš„å¥—è·¯ï¼Œè¿­ä»£è‡ªå·±çš„ç­–ç•¥ã€‚è¿™ç®€ç›´æ˜¯æŠŠâ€œå·â€å­—åˆ»è¿›äº†AIçš„DNAé‡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92087269f97749158bf8ecc01aff1cf5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=HG7aTykqta5fFdbMPRLO%2BEobgao%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸€å¼€å§‹Claudeæ˜¯è½åçš„ï¼Œç»“æœå› ä¸ºå­¦ä¹ èƒ½åŠ›å¤ªå¼ºåˆè‡ªä¸ªå„¿é€†è¢­äº†-_-||</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1005b73909244017ad4660f4682ac9f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=9AyH3tivIVkwvM9ZabocuYrZGJo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ€»å¾—æ¥çœ‹äº”å­æ£‹é¡¹ç›®ä¸­ GPT-5 è¡¨ç°å¼ºåŠ¿æ‹¿å† å†›ï¼ŒClaude-3.7 å±…æ¬¡ï¼›å¾·å·æ‰‘å…‹é¡¹ç›®é‡Œ Claude-4 æ˜¯å† å†›å¸¸å®¢ï¼ŒOpenAI-CodeX å¤šè·äºšå†›ã€‚</p>
<h2 data-id="heading-2">æœ‰AIåœ¨æµ‘æ°´æ‘¸é±¼â€¦â€¦</h2>
<p>æ›´æœ‰æ„æ€çš„æ˜¯ä»–ä»¬è¿˜æ”¾äº†ä¸ªDeepSeekåšéšæœºç­–ç•¥ï¼Œè¿™å“¥ä»¬å±äºçæ‰“ï¼</p>
<p>å¦‚æœä¸€ä¸ªAIè¿è¿™ä¸ªâ€œè’™çœ¼ä¹±æ‰“â€çš„éšæœºé€‰æ‰‹éƒ½èµ¢ä¸äº†å°±å°´å°¬äº†â€¦â€¦</p>
<p>åŒæ—¶ä¹Ÿèµ·åˆ°ä¸€ä¸ªå¯¹æ¯”ï¼Œ</p>
<p>å°±åƒè€ƒè¯•æ—¶æœ‰ä¸ªå­¦ç”Ÿå…¨é è’™ç­”æ¡ˆï¼Œ</p>
<p>å…¶ä»–å­¦ç”Ÿåˆ†æ•°å¦‚æœæ¯”ä»–é«˜ï¼Œ</p>
<p>å°±èƒ½è¯æ˜å…¶ä»–å­¦ç”Ÿæ˜¯çœŸçš„æœ‰å®åŠ›ï¼Œè€Œä¸æ˜¯è¿æ°”å¥½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1928e34dff4645c1b7536fa5a59d50ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=q2Co6OLeTAL413W%2FGhqaXHEx8hQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-3">æ‰å¿ƒäº†ï¼ä¼šå†™ä»£ç çš„ä¸ä¸€å®šä¸‹æ£‹å¥½</h2>
<ol>
<li>
<ol>
<li>è¿˜é¢„è®¾äº†ä¸ªå¯¹ç…§çœ‹AIæ˜¯ä¸æ˜¯çˆ±æ‰“å˜´ç‚®ï¼</li>
</ol>
</li>
</ol>
<p>LLM-Player =AIç›´æ¥çœ‹æ£‹ç›˜è¯´"æˆ‘ä¸‹è¿™é‡Œ"ï¼ˆçº¯æ¨ç†èƒ½åŠ›ï¼‰</p>
<p>Code Agent = AIå†™ä¸ªç¨‹åºæ¥ä¸‹æ£‹ï¼ˆç¼–ç¨‹å®ç°èƒ½åŠ›ï¼‰</p>
<p>å¦‚æœå†™ç¨‹åºçš„AIè¿˜ä¸å¦‚ç›´æ¥ä¸‹çš„ï¼Œè¯´æ˜ç¼–ç¨‹èƒ½åŠ›ä¸€èˆ¬ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa9e7ad561b0489fa0c8ac1a0a0a243c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=ssH2xOwV0NaYhEO2T8zCwd6Aq3A%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç»“æœç°åœ¨çš„AIå†™å†™å‡ºæ¥çš„ç¨‹åºç»å¸¸è¿˜ä¸å¦‚è‡ªå·±ç›´æ¥ç© â€¢á´—â€¢ğŸ’§ä¼šä¸‹æ£‹â‰ ä¼šå†™ä¸‹æ£‹ç¨‹åºï¼ˆå°±åƒä¼šå¼€è½¦â‰ ä¼šé€ è½¦ï¼‰ï¼Œå¤§å¤šæ•°AIå†™çš„ç¨‹åºå¤ªç®€å•ï¼Œåè€Œé™åˆ¶äº†è‡ªå·±çš„å‘æŒ¥ï¼</p>
<p>è¿™â€¦â€¦</p>
<p>å°±åƒè®©AIç›´æ¥å‡­ç›´è§‰ä¸‹æ£‹vs è®©AIå…ˆå†™ä¸ªä¸‹æ£‹ç¨‹åºå†ä¸‹æ£‹ï¼Œé€šè¿‡å¯¹æ¯”èƒ½çœ‹å‡º"ç¼–ç¨‹èƒ½åŠ›"åˆ°åº•æœ‰æ²¡æœ‰ç”¨â€”â€”</p>
<h2 data-id="heading-4">å®Œå…¨å¼€æºï¼Œæ€ä¹ˆç©ä½ è¯´äº†ç®—ï¼ğŸš€</h2>
<p>é‚£ä¹ˆï¼Œé‡ç‚¹æ¥äº†ï¼</p>
<p>è¿™ä¹ˆé…·çš„é¡¹ç›®ï¼Œå®ƒå®Œå…¨å¼€æºï¼ğŸ‘</p>
<p>CATArenaå°±æ˜¯ä¸€ä¸ªå¼€æ”¾çš„AIèƒ½åŠ›â€œæ¸¸ä¹åœºâ€ï¼Œè§„åˆ™å’Œæ¸¸æˆéƒ½å¯ä»¥ä½ æ¥å®šä¹‰ã€‚</p>
<p>è¿™å·²ç»ä¸æ˜¯ä¸€ä¸ªå•çº¯çš„è¯„æµ‹äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªæ­£åœ¨ç”Ÿé•¿çš„ã€å±äºæ‰€æœ‰å¼€å‘è€…å’ŒAIçˆ±å¥½è€…çš„è¶…çº§ç¤¾åŒºå®éªŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b644e2307fd4537a99b61ecd232a734~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=vwlTkXaaJYAkNjqkqFcQKhij0Zs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>æ„å‘³ç€ä½ æˆ‘ä¸åªæ˜¯è§‚ä¼—ï¼Œä¹Ÿèƒ½æˆä¸ºè£åˆ¤ç”šè‡³æ¸¸æˆè®¾è®¡å¸ˆï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a24db9a82e57447aaece55690c570825~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=1nb%2FwO3KSW48T%2F%2FB%2FEUBTgEkIg0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/863d8f61f1b049e48d691ad345a6cb99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=eUjdKEEVhzwdcSF6vQuby8Twcy4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½ è§‰å¾—è®©AIæ‰“ç‹è€…ä¼šä¸ä¼šæ›´ç²¾å½©ï¼Ÿ</p>
<p>æˆ–è€…æä¸ªâ€œAIå•†ä¸šå‚è°‹å¤§èµ›â€ï¼Œçœ‹è°æ”¶ç›Šç‡æœ€é«˜ï¼Ÿ</p>
<p>ç”šè‡³ï¼Œäººã€AIã€ä»£ç Agentä¸‰æ–¹æ··æˆ˜â€¦</p>
<p>é˜¿æ˜Ÿå…‰æ˜¯æƒ³æƒ³å°±å¤´çš®å‘éº»ï¼Î£(âŠ™â–½âŠ™"a</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09893134dbb442d89beb38c2ecf78ba7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=TpVX7ORIgd%2FHAeVUh0tU1eThgWw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æƒ³è¿›ä¸€æ­¥ç ”ç©¶çš„åŒå­¦å¯ä»¥çœ‹ä»–ä»¬è®ºæ–‡ğŸ‘‡</p>
<p>è®ºæ–‡åŸæ–‡æ•´ä½“ä¸‹æ¥ç»“è®ºæ˜¯å•†ä¸š AI è¡¨ç°æ›´èƒ½æ‰“ï¼Œç®€å•æ¸¸æˆå­¦èµ·æ¥é£å¿«ï¼Œå…³é”®ä¸ç”¨å¤§é‡äººå·¥æ ‡æ³¨è¿˜èƒ½æ‰©å±•ï¼Œç›´æ¥ç»™ AI è¯„ä¼°æä¾›äº†ä¸ªæ–°æ€è·¯ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74d01887c30147b0a3bc6a47bf4bb395~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=hDugcaLvDKWzZsXJpL1X6dQO81M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>çœ‹å®Œè¿™äº›AIåœ¨ç‰Œæ¡Œä¸Šå‹¾å¿ƒæ–—è§’ï¼Œæˆ‘å¿½ç„¶è§‰å¾—ï¼ŒçœŸæ­£çš„æ™ºèƒ½ï¼ŒÂ <strong>ä¸èƒ½çœ‹åªåˆ·é¢˜é‚£ç§â€œæ­»è®°ç¡¬èƒŒâ€ï¼Œè¿˜è¦çœ‹ç­–ç•¥ç¼–ç èƒ½åŠ›ã€æ•ˆç‡è¡¨ç°ã€ç­–ç•¥è¡¨ç°ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd5ccd42b2c3450eb80fe097c9613888~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=kC2T%2FvKn8%2BUMMRGh0SStEsd2p60%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å°±åº”è¯¥æ”¾åœ¨è¿™æ ·å¤æ‚ã€åŠ¨æ€ã€éœ€è¦æŒç»­å­¦ä¹ å’Œå¯¹æŠ—çš„ç¯å¢ƒé‡Œæ£€éªŒã€‚è¿™å¤§æ¦‚å°±æ˜¯AGIè¯„æµ‹è¯¥æœ‰çš„æ ·å­â€”â€”ä¸æ­¢äºç­”é¢˜ï¼Œæ›´å…³ä¹ç”Ÿå­˜ä¸è¿›åŒ–ã€‚</p>
<h2 data-id="heading-5">æ¥ï¼Œé¢„æµ‹ä¸€ä¸‹</h2>
<p>ä½ è§‰å¾—ä¸‹ä¸€å‘¨ï¼Œå¾·å·æ‰‘å…‹çš„èƒœç‡ä¹‹ç‹ä¼šæ˜¯å“ªä¸ªæ¨¡å‹ï¼Ÿ</p>
<p>æˆ‘æ˜¯é˜¿æ˜Ÿï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§ï¼ğŸ‘‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdb395176ed048d7b7a031921761347a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_5pifQUnlt6XkvZzlrqQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767504982&amp;x-signature=LLBcHA%2FVGsObZuzPekYjDKYZyqU%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¿éšœç¼“å­˜å’Œæ•°æ®åº“å°½é‡ä¸€è‡´çš„ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7588104741610848266</link>    <guid>https://juejin.cn/post/7588104741610848266</guid>    <pubDate>2025-12-28T04:03:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588104741610848266" data-draft-id="7588139768275337267" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¿éšœç¼“å­˜å’Œæ•°æ®åº“å°½é‡ä¸€è‡´çš„ç­–ç•¥"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T04:03:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¿éšœç¼“å­˜å’Œæ•°æ®åº“å°½é‡ä¸€è‡´çš„ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:03:48.000Z" title="Sun Dec 28 2025 04:03:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŒåˆ ç­–ç•¥ Cache-Aside</h2>
<p>ç¬¬ä¸€æ¬¡åˆ ï¼ˆæŠŠè·¯å µæ­»ï¼‰ï¼š</p>
<p>å…ˆæŠŠ Redis é‡Œçš„ç¼“å­˜åˆ æ‰ã€‚
ç›®çš„ï¼šè®©æ¥ä¸‹æ¥çš„è¯»è¯·æ±‚å¿…é¡»å»æŸ¥æ•°æ®åº“ï¼Œé¿å…è¯»åˆ°æ—§ç¼“å­˜ã€‚
æ›´æ–°æ•°æ®åº“ï¼šæŠŠ MySQL é‡Œçš„æ•°æ®æ›´æ–°æˆæœ€æ–°çš„ï¼ˆæ¯”å¦‚ 9ï¼‰ã€‚</p>
<p>å»¶è¿Ÿç­‰å¾…ï¼ˆå…³é”®ä¸€æ­¥ï¼‰ï¼š
çº¿ç¨‹åœ¨è¿™é‡Œç¡ä¸€ä¼šå„¿ï¼ˆæ¯”å¦‚ 1 ç§’ï¼‰ã€‚
ç›®çš„ï¼šè¿™ä¸€æ­¥éå¸¸å…³é”®ï¼æˆ‘ä»¬è¦ç­‰ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>ç­‰é‚£äº›åœ¨â€œç¬¬ä¸€æ¬¡åˆ â€ä¹‹åã€â€œæ›´æ–°æ•°æ®åº“â€ä¹‹å‰çš„é‚£ä¸€ç¬é—´è¿›æ¥çš„è¯»è¯·æ±‚ã€‚</p>
<p>è®©å®ƒä»¬æœ‰è¶³å¤Ÿçš„æ—¶é—´å»æ•°æ®åº“è¯»åˆ°æ—§æ•°æ®ï¼ˆæƒ³æƒ³ï¼Œä¸ºä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿè¿™é‡Œæ˜¯ç†è§£å»¶è¿ŸåŒåˆ çš„å…³é”®ï¼‰ï¼Œå¹¶æŠŠè¿™ä¸ªæ—§æ•°æ®é‡æ–°å†™å› Redisï¼ˆå˜æˆè„æ•°æ®ï¼‰ã€‚</p>
<p>æ•…æ„ç•™å‡ºè¿™ä¸ªæ—¶é—´çª—å£ï¼Œå°±æ˜¯ä¸ºäº†æŠ“å‡ºè¿™äº›â€œæ¼ç½‘ä¹‹é±¼â€ã€‚</p>
<p>ç¬¬äºŒæ¬¡åˆ ï¼ˆæ¸…ç†æˆ˜åœºï¼‰ï¼š
ç¡é†’äº†ï¼Œå†åˆ ä¸€æ¬¡ Redisã€‚
ç›®çš„ï¼šæŠŠåˆšæ‰é‚£äº›è¯»è¯·æ±‚å¯èƒ½å†™è¿›å»çš„è„æ•°æ®ï¼ˆæ—§æ•°æ®ï¼‰å†æ¬¡å¹²æ‰ï¼</p>
<p>å»¶è¿Ÿç¬¬äºŒæ¬¡åˆ é™¤ï¼Œä¸ºäº†é˜²æ­¢æ›´æ–°æ•°æ®åº“æ—¶ï¼Œæœ‰å¹¶å‘è¯»è¯·æ±‚æŠŠæ—§æ•°æ®å›å¡«åˆ°ç¼“å­˜ï¼Œé€ æˆè„æ•°æ®ã€‚</p>
<p>å› ä¸ºæ•°æ®åº“ï¼ˆMySQLï¼‰çš„â€œæäº¤â€å’Œâ€œåŒæ­¥â€æ˜¯éœ€è¦æ—¶é—´çš„ã€‚</p>
<p>åœ¨é«˜å¹¶å‘æˆ–è€…ä¸»ä»åˆ†ç¦»çš„æ¶æ„ä¸‹ï¼Œæ•°æ®åº“ä¸æ˜¯â€œç¬é—´â€å°±å˜çš„ã€‚å“ªæ€•åªæœ‰ä¸€æ¯«ç§’çš„å»¶è¿Ÿï¼Œä¹Ÿä¼šæœ‰å…¶ä»–çš„çº¿ç¨‹è¯»åˆ°æ—§å€¼ã€‚</p>
<h3 data-id="heading-1">åˆ -æ”¹-ç«‹é©¬å†åˆ â€ ä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ</h3>
<p>å¦‚æœåˆ å¾—å¤ªå¿«ï¼ˆä¸ç­‰å¾…ï¼‰ï¼Œç¬¬äºŒæ¬¡åˆ å¯èƒ½æ ¹æœ¬æ²¡ç”¨ï¼Œç”šè‡³ä¼šæŠŠåˆšå†™è¿›å»çš„â€œæ–°æ•°æ®â€ç»™è¯¯æ€äº†ï¼Œç›¸å½“äºç™½å¹²ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆä¸ç›´æ¥åˆ -å†™-æ›´æ–°ï¼Ÿ</h3>
<p>ç¬¬äºŒæ¬¡ä¸ºä»€ä¹ˆä¸ç›´æ¥æ›´æ–°å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸æ›´æ–°çš„æ—¶å€™å›å¡«å‘¢ï¼Ÿ</p>
<p>å¦‚æœé€‰æ‹©æ›´æ–°ç¼“å­˜â€ï¼Œå¿…é¡»ä¿è¯ â€œè¯»å–æ–°æ•°æ®â€ å’Œ â€œå†™å…¥ç¼“å­˜â€ æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼ˆå³ä¸å¯åˆ†å‰²çš„æ•´ä½“ï¼‰ã€‚ä½†è¿™æ ·æˆæœ¬é«˜ã€‚</p>
<p>æ›´æ–°ï¼ˆUpdateï¼‰ï¼š
ä½ éœ€è¦å…ˆæŠŠæ•°æ®ä»æ•°æ®åº“æŸ¥å‡ºæ¥ï¼ˆä¸€æ¬¡ IOï¼‰ã€‚
ä½ éœ€è¦æŠŠæ•°æ®åºåˆ—åŒ–ï¼ˆè½¬æˆ JSON ç­‰æ ¼å¼ï¼‰ã€‚
ä½ éœ€è¦æŠŠæ•´ä¸ªå¤§å­—ç¬¦ä¸²å‘ç»™ Redisï¼ˆå ç½‘ç»œå¸¦å®½ï¼‰ã€‚
Redis éœ€è¦ç”³è¯·å†…å­˜ç©ºé—´å­˜è¿™ä¸ªå¤§å¯¹è±¡ã€‚</p>
<p>åˆ é™¤ï¼ˆDeleteï¼‰ï¼šå°±æ˜¯ä¸€ä¸ªç®€å•çš„ DEL key å‘½ä»¤ã€‚æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œéå¸¸å¿«ï¼Œä¸å å¸¦å®½ã€‚</p>
<p>æˆæœ¬æé«˜ï¼</p>
<p>æ­¥éª¤å¤šäº†ï¼Œå®¹æ˜“è¢«å…¶ä»–çº¿ç¨‹å¹²æ‰°ï¼Œå¹¶å‘ä¸å®‰å…¨äº†ã€‚</p>
<h3 data-id="heading-3">æ›´æ–°æ•°æ®çš„æ—¶å€™ä¸SETå€¼ï¼Œåªæœ‰æŸ¥è¯¢çš„æ—¶å€™æ‰SETå€¼</h3>
<p>å› ä¸ºè¯»è¯·æ±‚å» SET æ•°æ®æ˜¯æœ€å®‰å…¨çš„ã€‚å› ä¸ºå®ƒæ‹¿çš„æ•°æ®æ˜¯å®ƒåˆšåˆšä»æ•°æ®åº“æŸ¥å‡ºæ¥çš„ï¼Œç»å¯¹æ˜¯æœ€æ–°çš„ï¼Œç»å¯¹ä¸ä¼šå‡ºç°å¹¶å‘è¦†ç›–çš„é—®é¢˜ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ˜¯ä¸€ä¸ªå›¾ä¹¦ç®¡ç†å‘˜ï¼ˆå†™è¯·æ±‚ï¼‰ï¼Œä½ è¦æŠŠã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹è¿™æœ¬ä¹¦çš„ä»·æ ¼ä» 50 å…ƒæ”¹æˆ 60 å…ƒã€‚</p>
<p>âŒ é”™è¯¯çš„åšæ³•ï¼ˆå†™æ—¶å›å¡«/æ›´æ–°ï¼‰ï¼š
ä½ è·‘å»ä¹¦æ¶ï¼ˆMySQLï¼‰ï¼ŒæŠŠä»·æ ¼æ”¹æˆäº† 60 å…ƒã€‚
ä½ é¡ºæ‰‹æŠŠç¼“å­˜åŒºï¼ˆRedisï¼‰é‡Œçš„é‚£å¼ å¡ç‰‡ä¹Ÿæ”¹æˆäº† 60 å…ƒï¼ˆå›å¡«ï¼‰ã€‚</p>
<p>å¦ä¸€ä¸ªç®¡ç†å‘˜ï¼ˆçº¿ç¨‹Bï¼‰ä¹Ÿæ¥æ”¹ä»·æ ¼ï¼Œä»–æŠŠä»·æ ¼æ”¹æˆäº† 70 å…ƒï¼Œå¹¶ä¸”ä»–æ‰‹é€Ÿå¿«ï¼Œå…ˆæ›´æ–°äº†ç¼“å­˜å¡ç‰‡ã€‚
ç„¶åä½ çš„ç½‘ç»œæ¢å¤äº†ï¼Œä½ æŠŠå¡ç‰‡åˆæ”¹å›äº† 60 å…ƒã€‚</p>
<p>A write X as 60<br/>
B write X as 70<br/>
B update Cache X as 70<br/>
A update Cache X as 60</p>
<p>B update Cache Lost!<br/>
C Get X = 60</p>
<p>å¤šä¸ªçº¿ç¨‹äº¤å‰æ”¹ä¸€ä¸ªå€¼ï¼Œä¸¤ä¸ªå¯èƒ½è¢«æ‹†åˆ†çš„æ­¥éª¤ï¼Œå¤šä¸€ä¸ªæ­¥éª¤ï¼Œå°±å®¹æ˜“å‡ºé”™ã€‚</p>
<p>æ‰€ä»¥å†™çº¿ç¨‹åªä¿®æ”¹ä¸€æ¬¡</p>
<p>A write X as 60<br/>
B write X as 70<br/>
C Get X = 70 ï¼ˆé€Ÿåº¦å¿«ï¼‰<br/>
C update Cache X as 70</p>
<p>ä¸è¦æŠŠä¸¤æ¬¡å†™ï¼ˆå†™DBå’Œå†™Cacheï¼‰æ”¾åˆ°ä¸€èµ·å»ã€‚</p>
<h2 data-id="heading-4">â€œè¯»å†™ç©¿é€â€ (Read/Write Through)</h2>
<p>æ‰¾ä¸ªç®¡å®¶ï¼ˆç¼“å­˜å±‚ï¼‰å¸®ä½ ç®¡æ•°æ®åº“ã€‚</p>
<p>ä½ åªå’Œç¼“å­˜ï¼ˆRedisï¼‰æ‰“äº¤é“ã€‚</p>
<p>è¯»ï¼šä½ é—® Redisï¼ŒRedis å‘ç°æ²¡æœ‰ï¼Œå®ƒè‡ªå·±å»æ•°æ®åº“æŸ¥ï¼ŒæŸ¥å®Œè‡ªå·±å­˜ä¸€ä»½ï¼Œå†ç»™ä½ ã€‚</p>
<p>å†™ï¼šä½ å‘Šè¯‰ Redis â€œæ”¹æ•°æ®â€ï¼ŒRedis å…ˆæŠŠç¼“å­˜æ”¹äº†ï¼Œç„¶åå®ƒåŒæ­¥å»æŠŠæ•°æ®åº“ä¹Ÿæ”¹äº†ã€‚</p>
<h2 data-id="heading-5">â€œå¼‚æ­¥å›å†™â€ (Write Behind / Write Back)</h2>
<p>æ ¸å¿ƒæ€æƒ³ï¼šåªå†™ç¼“å­˜ï¼Œæ•°æ®åº“ï¼Ÿä»¥åå†è¯´ï¼</p>
<p>åœºæ™¯ï¼šå†™æ“ä½œç‰¹åˆ«å¤šï¼Œç‰¹åˆ«å¿«ï¼Œæ•°æ®åº“æ ¹æœ¬æ‰›ä¸ä½ï¼ˆæ¯”å¦‚ç›´æ’­é—´çš„ç‚¹èµæ•°ã€è®¡æ•°å™¨ï¼‰ã€‚</p>
<p>ä¼˜ç‚¹ï¼šæ€§èƒ½æé«˜ï¼ æ•°æ®åº“å‹åŠ›æå°ï¼Œå› ä¸ºæ˜¯æ‰¹é‡å†™çš„ã€‚
ç¼ºç‚¹ï¼šæ•°æ®ä¸å®‰å…¨ï¼ å¦‚æœ Redis æŒ‚äº†ï¼Œè¿˜æ²¡æ¥å¾—åŠåŒæ­¥çš„æ•°æ®å°±ä¸¢äº†ã€‚</p>
<p>é€‚ç”¨ï¼šå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸é«˜ï¼Œä½†å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ï¼ˆæ¯”å¦‚ç‚¹èµã€æµè§ˆé‡ã€æ—¥å¿—ï¼‰ã€‚</p>
<h3 data-id="heading-6">å’Œè¯»å†™ç©¿é€çš„å¯¹æ¯”</h3>
<ol>
<li>Read/Write Throughï¼ˆè¯»å†™ç©¿é€ï¼‰â€”â€” â€œåŒæ­¥ç®¡å®¶â€
è¿™ä¸ªæ¨¡å¼ä¸‹ï¼ŒRedis å°±åƒä¸€ä¸ªè¶…çº§è´Ÿè´£ä»»çš„ç®¡å®¶ã€‚</li>
</ol>
<p>ä½ ï¼ˆåº”ç”¨ç¨‹åºï¼‰ï¼šæŠŠæ•°æ®äº¤ç»™ç®¡å®¶ï¼Œè¯´â€œæŠŠåº“å­˜æ”¹æˆ 9â€ã€‚<br/>
ç®¡å®¶ï¼ˆRedisï¼‰ï¼šâ€œå¥½çš„ä¸»äººï¼â€<br/>
ä»–å…ˆæŠŠå®¶é‡Œï¼ˆå†…å­˜/ç¼“å­˜ï¼‰çš„åº“å­˜æ”¹æˆ 9ã€‚<br/>
ç„¶åï¼Œä»–äº²è‡ªæ‹¿ç€è´¦æœ¬ï¼Œè·‘ä¸€è¶Ÿé“¶è¡Œï¼ˆæ•°æ®åº“ï¼‰ï¼ŒæŠŠæ•°æ®åº“é‡Œçš„åº“å­˜ä¹Ÿæ”¹æˆ 9<br/>
ç›´åˆ°é“¶è¡Œç¡®è®¤æ”¹å¥½äº†ï¼Œä»–æ‰å›æ¥è·Ÿä½ è¯´ï¼šâ€œä¸»äººï¼Œæå®šäº†ï¼â€<br/>
ç‰¹ç‚¹ï¼šåŒæ­¥ã€‚ä½ å¿…é¡»ç­‰ç®¡å®¶ä»é“¶è¡Œå›æ¥ï¼Œä½ æ‰èƒ½ç»§ç»­å¹²ä¸‹ä¸€ä»¶äº‹ã€‚æ•°æ®ç»å¯¹ä¸€è‡´ï¼Œä½†ç¨å¾®æ…¢ä¸€ç‚¹ç‚¹ã€‚</p>
<ol start="2">
<li>Write Behind Cachingï¼ˆå¼‚æ­¥å›å†™/å†™å›ï¼‰â€”â€” â€œç”©æ‰‹æŒæŸœâ€
è¿™ä¸ªæ¨¡å¼ä¸‹ï¼ŒRedis å°±åƒä¸€ä¸ªç‰¹åˆ«æ‡’ä½†æ˜¯æ•ˆç‡é«˜çš„ç§˜ä¹¦ã€‚</li>
</ol>
<p>ä½ ï¼ˆåº”ç”¨ç¨‹åºï¼‰ï¼šæŠŠæ•°æ®æ‰”ç»™ç§˜ä¹¦ï¼Œè¯´â€œæŠŠåº“å­˜æ”¹æˆ 9â€ã€‚<br/>
ç§˜ä¹¦ï¼ˆRedisï¼‰ï¼šâ€œæ”¶åˆ°ï¼â€ï¼ˆå•ªçš„ä¸€ä¸‹ç›–ä¸ªç« ï¼Œç«‹é©¬å›å¤ä½ ï¼‰<br/>
ä»–åªæŠŠå®¶é‡Œï¼ˆå†…å­˜/ç¼“å­˜ï¼‰çš„åº“å­˜æ”¹æˆ 9ã€‚<br/>
è‡³äºé“¶è¡Œï¼ˆæ•°æ®åº“ï¼‰ï¼Ÿä»–è®°åœ¨å°æœ¬æœ¬ä¸Šï¼šâ€œå›å¤´æœ‰ç©ºå†å­˜å§â€ã€‚<br/>
ä»–æ ¹æœ¬ä¸å»é“¶è¡Œï¼Œç›´æ¥è·Ÿä½ è¯´â€œæå®šäº†â€ï¼Œè®©ä½ å»å¹²åˆ«çš„ã€‚<br/>
ä»–ä»€ä¹ˆæ—¶å€™å»é“¶è¡Œï¼Ÿç­‰ä»–å¿ƒæƒ…å¥½ï¼Œæˆ–è€…æ”’äº†ä¸€å¤§å †å°æœ¬æœ¬ï¼Œæ‰æ…¢æ‚ æ‚ å»æ›´æ–°æ•°æ®åº“ã€‚<br/>
ç‰¹ç‚¹ï¼šå¼‚æ­¥ã€‚ä½ ä¸ç”¨ç­‰ä»–ï¼Œé€Ÿåº¦é£å¿«ã€‚ä½†å¦‚æœä»–è¿˜æ²¡æ¥å¾—åŠå»é“¶è¡Œï¼Œçªç„¶çŒæ­»ï¼ˆæœåŠ¡å™¨å®•æœºï¼‰äº†ï¼Œé‚£è¿™ç¬”é’±ï¼ˆæ•°æ®ï¼‰å°±ä¸¢äº†ã€‚</p>
<h3 data-id="heading-7">å’ŒCache Asideçš„å¯¹æ¯”</h3>
<p>Read/Write Throughï¼ˆç©¿é€æ¨¡å¼ï¼‰ï¼Œç¼“å­˜æ˜¯â€œé—¨å«â€ï¼Œæ‰€æœ‰è¯»å†™éƒ½å¿…é¡»ç»è¿‡å®ƒï¼Œå®ƒè´Ÿè´£åŒæ­¥æ›´æ–°æ•°æ®åº“ã€‚</p>
<p>Cache-Aside æ˜¯ï¼š</p>
<p>è¯»çš„æ—¶å€™ï¼šå…ˆçœ‹ä¸€çœ¼æ—è¾¹çš„ç¼“å­˜ï¼Œæ²¡æœ‰å°±è‡ªå·±å»æ•°æ®åº“æ‹¿ï¼Œé¡ºä¾¿æŠŠç»“æœæ”¾å›ç¼“å­˜ï¼ˆå›å¡«ï¼‰ã€‚
å†™çš„æ—¶å€™ï¼šç›´æ¥æ”¹æ•°æ®åº“ï¼Œç„¶åé¡ºæ‰‹æŠŠæ—è¾¹çš„ç¼“å­˜åˆ æ‰ï¼Œè®©ç¼“å­˜å¤±æ•ˆã€‚
æ•´ä¸ªè¿‡ç¨‹ï¼Œç¼“å­˜å§‹ç»ˆæ˜¯ä¸ªâ€œå¤–æŒ‚â€ï¼Œä¸æ˜¯å¿…ç»ä¹‹è·¯ã€‚</p>
<h2 data-id="heading-8">ä¸€èˆ¬ç­–ç•¥</h2>
<p>è¯´è½¬è´¦æœ¬æ¥å°±è¦æ…¢ä¸€ç‚¹å¥½ï¼Œä¸ºäº†å®‰å…¨ã€‚</p>
<p>ç‚¹èµå•Šè¿™äº›ä¸œè¥¿ä¸æ˜¯é‚£ä¹ˆé‡è¦ï¼Œå¯ä»¥é€šè¿‡æœ€ç»ˆä¸€è‡´æ€§æ¥å®ç°ï¼Œè¿™äº›å°±æ²¡æœ‰å¿…è¦è¦å°±æ˜¯è¦è®©äººç­‰å¤ªä¹…ã€‚</p>
<p>ä¸åŒçš„ä¸šåŠ¡ç”¨ä¸åŒçš„ç­–ç•¥ã€‚</p>
<p>åœ¨é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œä¿®æ”¹æ•°æ®è¿˜æœªå®Œæˆçš„æ—¶å€™ï¼Œä¸­é—´æŸ¥è¯¢åˆ°æ—§å€¼çš„æƒ…å†µï¼Œæ˜¯æ— æ³•å®Œå…¨é¿å…çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå†³å®šæ˜¯å¦å®¹å¿å®ƒã€ä»¥åŠå¦‚ä½•æ§åˆ¶å®ƒçš„å½±å“èŒƒå›´ã€‚</p>
<p>å¼ºä¸€è‡´æ€§åœºæ™¯
åœºæ™¯ï¼šé“¶è¡Œä½™é¢ã€æ”¯ä»˜çŠ¶æ€ã€åº“å­˜è¶…å–ã€è®¢å•åˆ›å»ºã€‚
ç”¨æˆ·æ„Ÿå—ï¼šæˆ‘è½¬äº† 100 å—ï¼Œå¯¹æ–¹è¯´æ²¡æ”¶åˆ°ï¼›æˆ‘ä¹°äº†æœ€åä¸€ä»¶å•†å“ï¼Œç»“æœåˆ«äººä¹Ÿä¹°åˆ°äº† â€”â€” ä¿¡ä»»å´©å¡Œï¼</p>
<p>ç­–ç•¥ï¼šå¿…é¡»ç”¨å¼ºä¸€è‡´æ€§æ‰‹æ®µï¼š</p>
<p>æ•°æ®åº“äº‹åŠ¡ + ä¹è§‚é”/æ‚²è§‚é”
å¼ºåˆ¶è¯»ä¸»åº“ï¼ˆç»•è¿‡ä»åº“ï¼‰</p>
<h2 data-id="heading-9">ç§’æ€ä¿®æ”¹åº“å­˜çš„åœºæ™¯</h2>
<p>ç§’æ€å•†å“ï¼Œä¿®æ”¹åº“å­˜çš„æ€ä¹ˆå¼„ï¼Ÿ</p>
<p>åˆ†å±‚å‰Šå³° + åŸå­æ“ä½œ + å¼‚æ­¥è§£è€¦ã€‚</p>
<p>å‰åç«¯é˜²åˆ·ï¼Œä¸€ä¸ªäºº3ç§’é’Ÿä¹‹å†…åªèƒ½è®¿é—®ä¸€æ¬¡ï¼Œæ‹’ç»æœºå™¨äººã€‚</p>
<p>ç”¨ Redis å½“â€œå‰ç½®åº“å­˜â€</p>
<p>é¢„çƒ­åº“å­˜ï¼š
ç§’æ€å¼€å§‹å‰ï¼ŒæŠŠå•†å“çš„åº“å­˜æ•°é‡ï¼ˆæ¯”å¦‚ 100ï¼‰æå‰å†™å…¥ Redisã€‚
Key: stock:product_123, Value: 100</p>
<p>åŸå­æ‰£å‡ï¼š
ç”¨æˆ·ç‚¹å‡»è´­ä¹°æ—¶ï¼Œä½ çš„æœåŠ¡ä¸æ˜¯å»æŸ¥ MySQLï¼Œè€Œæ˜¯ç›´æ¥å‘ Redis å‘é€ä¸€ä¸ªåŸå­æ“ä½œã€‚
æŸ¥è¯¢å¹¶ä¸”æ‰£å‡ã€‚
è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥å›æ»šã€‚</p>
<p>å¦‚æœè¿”å›å€¼ &gt;= 0ï¼Œè¯´æ˜æ‰£å‡æˆåŠŸï¼
å¦‚æœè¿”å›å€¼ == -1ï¼Œè¯´æ˜åº“å­˜æ²¡äº†ï¼Œç›´æ¥å‘Šè¯‰ç”¨æˆ·â€œæ‰‹æ…¢äº†â€ã€‚</p>
<p>Redis æ˜¯å†…å­˜æ“ä½œï¼Œé€Ÿåº¦æå¿«ï¼ˆå¾®ç§’çº§ï¼‰ã€‚</p>
<p>å½“ Redis æ‰£å‡æˆåŠŸåï¼Œç«‹åˆ»æ„é€ ä¸€æ¡æ¶ˆæ¯ï¼Œå‘é€åˆ° Kafka æˆ– RocketMQï¼ŒæŠŠè¿™ä¸ªæˆåŠŸçš„è®¢å•ä¿¡æ¯ï¼Œæœ€ç»ˆæŒä¹…åŒ–åˆ° MySQL é‡Œã€‚</p>
<p>æ¶ˆæ¯å†…å®¹ï¼š{ "user_id": 1001, "product_id": 123, "count": 1 }</p>
<p>ç«‹åˆ»è¿”å›ç»™ç”¨æˆ·ï¼šâ€œæ­å–œä½ ï¼ŒæŠ¢è´­æˆåŠŸï¼â€</p>
<p>åå°æ¶ˆè´¹è€…ä» MQ é‡Œæ…¢æ…¢æ¶ˆè´¹è¿™æ¡æ¶ˆæ¯ï¼š</p>
<p>å†æ¬¡æ ¡éªŒä¸€ä¸‹ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼‰ã€‚</p>
<p>åœ¨ MySQL é‡Œåˆ›å»ºè®¢å•ã€æ‰£å‡çœŸå®åº“å­˜ã€æ‰£ç”¨æˆ·ä½™é¢ç­‰ã€‚</p>
<p>è¿™æ ·å†™çš„å¥½å¤„ï¼š</p>
<p>ç”¨æˆ·ä½“éªŒæä½³ï¼šç”¨æˆ·æ„Ÿè§‰â€œç§’å›â€ï¼Œå› ä¸ºæ²¡ç­‰æ•°æ®åº“ã€‚</p>
<p>ç³»ç»Ÿè§£è€¦ï¼šå³ä½¿ MySQL æŒ‚äº†ï¼Œæ¶ˆæ¯è¿˜åœ¨ MQ é‡Œï¼Œç­‰ DB æ¢å¤äº†å†å¤„ç†ã€‚</p>
<p>å‰Šå³°å¡«è°·ï¼šMQ æŠŠç¬é—´çš„å†™å‹åŠ›ï¼Œå˜æˆäº†å¹³ç¼“çš„åå°ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-10">å‚è€ƒ</h2>
<p>[1] ç¼“å­˜æ›´æ–°ç­–ç•¥ä¸æ•°æ®ä¸€è‡´æ€§ä¿éšœ <a href="https://juejin.cn/post/7585463195200946226" target="_blank" title="https://juejin.cn/post/7585463195200946226">juejin.cn/post/758546â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%]]></title>    <link>https://juejin.cn/post/7588098335790923776</link>    <guid>https://juejin.cn/post/7588098335790923776</guid>    <pubDate>2025-12-28T04:31:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335790923776" data-draft-id="7588093282531049524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T04:31:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:31:55.000Z" title="Sun Dec 28 2025 04:31:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vue 3çš„Composition APIä¸ä»…é‡æ„äº†ä»£ç ç»„ç»‡æ–¹å¼ï¼Œæ›´ä¸ºæ€§èƒ½ä¼˜åŒ–æä¾›äº†æ–°çš„å¯èƒ½æ€§ã€‚å°½ç®¡è®¸å¤šå¼€å‘è€…å·²ç»ç†Ÿæ‚‰äº†<code>ref</code>ã€<code>reactive</code>å’Œ<code>watch</code>ç­‰åŸºç¡€APIï¼Œä½†ä¸€äº›éšè—çš„æŠ€å·§å´è¢«ä¸¥é‡ä½ä¼°ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨7ä¸ªé²œä¸ºäººçŸ¥çš„Composition APIæŠ€å·§ï¼Œç»“åˆçœŸå®åœºæ™¯å’Œæ€§èƒ½æµ‹è¯•æ•°æ®ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡è¿™äº›æ–¹æ³•å®ç°é«˜è¾¾40%çš„æ¸²æŸ“é€Ÿåº¦æå‡ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <code>shallowRef</code>ä¸<code>shallowReactive</code>ï¼šé¿å…æ·±åº¦å“åº”å¼çš„å¼€é”€</h3>
<p><strong>é—®é¢˜</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒVueçš„å“åº”å¼ç³»ç»Ÿä¼šå¯¹å¯¹è±¡è¿›è¡Œæ·±åº¦é€’å½’ä»£ç†ï¼ˆå¦‚<code>reactive</code>æˆ–<code>ref</code>ï¼‰ï¼Œè¿™åœ¨å¤„ç†å¤§å‹å¯¹è±¡æ—¶å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong><code>shallowRef</code></strong>ï¼šä»…å¯¹<code>.value</code>å±æ€§åšå“åº”å¼è·Ÿè¸ªï¼Œå†…éƒ¨å€¼å˜åŒ–ä¸ä¼šè§¦å‘æ›´æ–°ã€‚</li>
<li><strong><code>shallowReactive</code></strong>ï¼šåªä»£ç†å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼Œæ·±å±‚å±æ€§å˜æ›´éœ€æ‰‹åŠ¨è§¦å‘æ›´æ–°ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> largeList = <span class="hljs-title function_">shallowRef</span>([...]); <span class="hljs-comment">// åˆ—è¡¨å†…éƒ¨å˜åŒ–ä¸ä¼šè§¦å‘æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-title function_">shallowReactive</span>({ <span class="hljs-attr">a</span>: { <span class="hljs-attr">b</span>: <span class="hljs-number">1</span> } }); <span class="hljs-comment">// config.a.bå˜åŒ–éœ€æ‰‹åŠ¨å¤„ç†</span>
</code></pre>
<p><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼šåœ¨æµ‹è¯•ä¸­ï¼Œå¯¹ä¸€ä¸ªåŒ…å«1000é¡¹åµŒå¥—å¯¹è±¡çš„åˆ—è¡¨ä½¿ç”¨<code>shallowReactive</code>åï¼Œåˆå§‹åŒ–æ—¶é—´å‡å°‘35%ã€‚</p>
<hr/>
<h3 data-id="heading-4">2. <code>markRaw</code>ï¼šå½»åº•è·³è¿‡Proxyä»£ç†</h3>
<p><strong>åœºæ™¯</strong>ï¼šæŸäº›æ•°æ®ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“å®ä¾‹ã€é™æ€é…ç½®ï¼‰ä¸éœ€è¦å“åº”å¼ç‰¹æ€§æ—¶ï¼Œå¼ºåˆ¶Vueè·³è¿‡ä»£ç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { markRaw, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">const</span> staticData = <span class="hljs-title function_">markRaw</span>({ ... });
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ 
  <span class="hljs-attr">list</span>: [],
  <span class="hljs-attr">utils</span>: staticData <span class="hljs-comment">// utilsä¸ä¼šè¢«ä»£ç†</span>
});
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</strong>ï¼šé¿å…æ— æ„ä¹‰çš„Proxyåˆ›å»ºå’Œå†…å­˜å ç”¨ï¼Œå°¤å…¶åœ¨SSRæˆ–é«˜é¢‘æ•°æ®äº¤æ¢åœºæ™¯ä¸‹æ•ˆæœæ˜¾è‘—ã€‚</p>
<hr/>
<h3 data-id="heading-5">3. <code>customRef</code>å®ç°é˜²æŠ–/èŠ‚æµæ§åˆ¶æ›´æ–°é¢‘ç‡</h3>
<p>ä¼ ç»Ÿæ–¹æ³•å¯èƒ½åœ¨æ¨¡æ¿ä¸­æ»¥ç”¨é˜²æŠ–å‡½æ•°ï¼Œè€Œåˆ©ç”¨<code>customRef</code>å¯ä»¥å°†é€»è¾‘å°è£…åˆ°å“åº”å¼ç³»ç»Ÿä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useDebouncedRef</span>(<span class="hljs-params">value, delay = <span class="hljs-number">200</span></span>) {
  <span class="hljs-keyword">let</span> timeout;
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">customRef</span>(<span class="hljs-function">(<span class="hljs-params">track, trigger</span>) =&gt;</span> ({
    <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
      <span class="hljs-title function_">track</span>();
      <span class="hljs-keyword">return</span> value;
    },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) {
      <span class="hljs-built_in">clearTimeout</span>(timeout);
      timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        value = newValue;
        <span class="hljs-title function_">trigger</span>();
      }, delay);
    }
  }));
}
</code></pre>
<p><strong>å®æµ‹ç»“æœ</strong>ï¼šåœ¨è¾“å…¥æ¡†è”åŠ¨æœç´¢çš„åœºæ™¯ä¸‹ï¼Œå‡å°‘80%çš„æ— æ„ä¹‰æ¸²æŸ“ã€‚</p>
<hr/>
<h3 data-id="heading-6">4. <code>readonly + computed</code>:  ä¸å¯å˜æ•°æ®çš„æ€§èƒ½çº¢åˆ©</h3>
<p>ç»„åˆä½¿ç”¨è¿™ä¸¤ä¸ªAPIå¯ä»¥åˆ›å»ºé«˜æ•ˆè¡ç”ŸçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> original = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">readonly</span>(<span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> original.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>));
</code></pre>
<ul>
<li><strong>ä¼˜åŠ¿1</strong>: <code>readonly</code>é˜²æ­¢æ„å¤–ä¿®æ”¹å¯¼è‡´çš„é¢å¤–æ¸²æŸ“</li>
<li><strong>ä¼˜åŠ¿2</strong>: <code>computed</code>ç¼“å­˜ç»“æœé¿å…é‡å¤è®¡ç®—</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: Vuex/PiniaçŠ¶æ€æ´¾ç”Ÿã€è·¨ç»„ä»¶å…±äº«è®¡ç®—é€»è¾‘æ—¶å°¤å…¶æœ‰æ•ˆã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">5. <code>effectScope</code>:  ç²¾å‡†æ§åˆ¶å‰¯ä½œç”¨ç”Ÿå‘½å‘¨æœŸ</h3>
<p>Vue3.2+å¼•å…¥çš„APIå¯æ‰¹é‡ç®¡ç†ç»„ä»¶çš„å‰¯ä½œç”¨ï¼ˆå¦‚å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { effectScope } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useComplexLogic</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> scope = <span class="hljs-title function_">effectScope</span>();
  
  scope.<span class="hljs-title function_">run</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">watch</span>(data, <span class="hljs-function">() =&gt;</span> {...});
    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {...});
  });

  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> scope.<span class="hljs-title function_">stop</span>()); <span class="hljs-comment">//ä¸€é”®æ¸…é™¤æ‰€æœ‰å…³è”å‰¯ä½œç”¨ï¼</span>
}
</code></pre>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>:</p>
<ul>
<li><strong>å†…å­˜æ³„æ¼é˜²æŠ¤</strong>:  ç¡®ä¿ç»„ä»¶å¸è½½æ—¶å½»åº•æ¸…ç†èµ„æº</li>
<li><strong>æ€§èƒ½æå‡</strong>:  æ¯”æ‰‹åŠ¨ç»´æŠ¤å¤šä¸ªcleanupå‡½æ•°æ›´é«˜æ•ˆï¼ˆæµ‹è¯•æ˜¾ç¤ºå†…å­˜å ç”¨ä¸‹é™20%ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-8">6. <code>toRaw</code>:  éœ€è¦éä»£ç†åŸå§‹å€¼æ—¶çš„é«˜æ•ˆè®¿é—®</h3>
<p>å½“éœ€è¦è¯»å–å¤§é‡æ•°æ®ä½†ä¸è§¦å‘ä¾èµ–æ”¶é›†æ—¶ï¼ˆå¦‚å¯¼å‡ºæ•°æ®ã€æ·±æ¯”è¾ƒï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> rawData = <span class="hljs-title function_">toRaw</span>(reactiveData); <span class="hljs-comment">//ç»•è¿‡Proxyç›´æ¥è·å–åŸå¯¹è±¡</span>
</code></pre>
<p>æ³¨æ„ä¸JSON.parse(JSON.stringify(state))æ›´é«˜æ•ˆï¼</p>
<hr/>
<p>###7. <code>&lt;script setup&gt;</code>ç¼–è¯‘æ—¶ä¼˜åŒ–é»‘ç§‘æŠ€</p>
<p>ä¸¥æ ¼æ¥è¯´è¿™ä¸æ˜¯Composition APIçš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸å®ƒæ·±åº¦ååŒï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// ğŸ‘‡ç¼–è¯‘å™¨ä¼šå°†å…¶æå‡åˆ°æ¨¡å—ä½œç”¨åŸŸï¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>; 

<span class="hljs-comment">// ğŸ‘‡æ¡ä»¶ç¼–è¯‘ä¼˜åŒ–é™æ€èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> isDev = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">DEV</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isDev"</span>&gt;</span>Debug Mode<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p><strong>åº•å±‚åŸç†</strong>: Vue SFCç¼–è¯‘å™¨ä¼šï¼š</p>
<ol>
<li><strong>é™æ€æå‡ï¼ˆHoistingï¼‰</strong>:  å°†å¸¸é‡ç§»å‡ºæ¸²æŸ“å‡½æ•°</li>
<li><strong>Patch Flagsæ ‡è®°</strong>:  åŠ¨æ€èŠ‚ç‚¹å·®å¼‚æ›´æ–°ç²¾åº¦æ›´é«˜</li>
<li><strong>Tree-shakingå‹å¥½</strong>:  æœªä½¿ç”¨çš„å¯¼å…¥ä¼šè¢«ç§»é™¤</li>
</ol>
<hr/>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>ä»é¿å…æ·±åº¦å“åº”å¼çš„å†—ä½™å¤„ç†(<code>shallowRef</code>)åˆ°ç²¾ç¡®æ§åˆ¶å‰¯ä½œç”¨(<code>effectScope</code>) ï¼Œè¿™äº›æŠ€å·§å…±åŒæ„æˆäº†Vue3é«˜æ€§èƒ½åº”ç”¨çš„ç§˜å¯†æ­¦å™¨ ã€‚å®é™…é¡¹ç›®ä¸­ ï¼Œå»ºè®®é€šè¿‡Chrome DevToolsçš„Performanceé¢æ¿éªŒè¯ä¼˜åŒ–æ•ˆæœ â€”â€”å½“ä½ çœ‹åˆ°è„šæœ¬æ‰§è¡Œæ—¶é—´ç¼©çŸ­ ã€FPSæ›²çº¿è¶‹äºå¹³ç¨³æ—¶ ï¼Œå°±ä¼šæ„è¯†åˆ°Composition APIçš„è®¾è®¡è¿œæ¯”è¡¨é¢çœ‹èµ·æ¥æ›´å¼ºå¤§ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿™ä¸€å¹´ï¼Œè®©æˆ‘äººç”Ÿäº‹ä¸šå¼€æŒ‚çš„13ä¸ªè®¤çŸ¥]]></title>    <link>https://juejin.cn/post/7588140921248038950</link>    <guid>https://juejin.cn/post/7588140921248038950</guid>    <pubDate>2025-12-28T04:42:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588140921248038950" data-draft-id="7588109656041177134" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿™ä¸€å¹´ï¼Œè®©æˆ‘äººç”Ÿäº‹ä¸šå¼€æŒ‚çš„13ä¸ªè®¤çŸ¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T04:42:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ˜ŸAIå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2250051536050763"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿™ä¸€å¹´ï¼Œè®©æˆ‘äººç”Ÿäº‹ä¸šå¼€æŒ‚çš„13ä¸ªè®¤çŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2250051536050763/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ˜ŸAIå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:42:34.000Z" title="Sun Dec 28 2025 04:42:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å“ˆå–½ï¼Œå¤§å®¶å¥½ï¼</p>
<p>æˆ‘æ˜¯é˜¿æ˜ŸğŸ‘‹</p>
<p>ä»Šå¹´æˆ‘æœ‰å‡ ä¸ªè®¤çŸ¥è¢«å½»åº•æ”¹å˜äº†ã€‚è¿™å‡ ä¸ªè®¤çŸ¥ä¹Ÿå½»åº•æ”¹å˜äº†æˆ‘çš„äººç”Ÿï¼Œ</p>
<p>å…³äºäº‹ä¸šä¹Ÿæ›´å…³äºæˆé•¿ã€‚</p>
<p>åˆ†äº«ç»™å¤§å®¶ğŸ‘‡</p>
<h2 data-id="heading-0">01Â <strong>æ„Ÿæ©ï¼šä¸æ˜¯ä½ ä¸å¯æ›¿ä»£ï¼Œä½ è¸©ä¸­äº†çº¢åˆ©è€Œå·²</strong></h2>
<p>ä»äº‹ AI è¡Œä¸šï¼Œä½ ä¼šå‘ç°å¾ˆå¤šå­¦å†éå¸¸ä¼˜ç§€çš„äººï¼Œæ¯å¤©éƒ½åœ¨æ‹¼å‘½å·ã€‚Â <strong>å¹¶ä¸æ˜¯ä½ çœŸçš„æœ‰ä»€ä¹ˆä¸å¯å–ä»£çš„ï¼Œè€Œæ˜¯ä½ ä»¬ä¸€èµ·åƒä¸Šäº†æ—¶ä»£çš„çº¢åˆ©ï¼Œç¤¾ä¼šç»™ä½ æä¾›äº†å‘å±•ç©ºé—´è€Œå·²ã€‚</strong></p>
<h2 data-id="heading-1">02Â <strong>èº«å£æ„åˆä¸€ï¼šä¸–ç•Œä¸ºä½ æ˜¾åŒ–</strong></h2>
<p>æˆ‘ä¹‹å‰æ€»æ˜¯æœ‰å¾ˆå¤šå¾ˆå¤šæƒ³æ³•ï¼Œè„‘å­é‡Œåƒçˆ†ç±³èŠ±ä¸€æ ·ï¼Œä¸€å¤©ä¸Šåˆå¯èƒ½æœ‰åå‡ äºŒåä¸ªæƒ³æ³•ï¼Œä¸€å‘¨ä¹‹å†…å¯èƒ½ä¼šæ”¹å˜ä¸‰æ¬¡åŠ¨ä½œï¼Œè¿™å°±ä»£è¡¨æˆ‘çš„æƒ³æ³•å’ŒåŠ¨ä½œæ˜¯å®Œå…¨ä¸åˆä¸€çš„ã€‚</p>
<p>åæ¥æˆ‘æ¥è§¦åˆ°ä¸€äº›æ­£è§‰è§‚å¿µï¼Œè¯´Â <strong>ä¸€ä¸ªäººçš„æƒ³æ³•ã€è¯´å‡ºæ¥çš„è¯ã€ç°å®ä¸­çš„åŠ¨ä½œå¿…é¡»è¦åˆä¸€ï¼Œè¿™æ ·ä¸–ç•Œæ‰èƒ½çŸ¥é“ä½ çœŸæ­£æƒ³è¦ä»€ä¹ˆã€‚</strong> Â å¦åˆ™ï¼Œä¸–ç•Œä¸çŸ¥é“ä½ åˆ°åº•æƒ³è¦ä»€ä¹ˆï¼Œä½ æ¥è§¦çš„äººä¹Ÿä¸çŸ¥é“ä½ è¯´çš„è¯æ˜¯ä¸æ˜¯ä½ çœŸæ­£çš„æƒ³æ³•ã€‚</p>
<p>åˆ«äººåªèƒ½é ä½ è¯´çš„è¯å’Œä½ åšçš„äº‹æ¥åˆ¤æ–­ï¼Œè€Œå¦‚æœè¿™ä¸¤è€…å’Œä½ å†…å¿ƒçš„æƒ³æ³•ä¸ä¸€è‡´ï¼Œä½ çš„ç°å®å°±ä¼šå’Œä½ çš„æ€ç»´ä¸¥é‡è„±èŠ‚ï¼Œä½ åªä¼šè¶Šæ¥è¶Šå‰²è£‚ã€‚æ…¢æ…¢åœ°ä½ å¯èƒ½ä¼šè§‰å¾—è‡ªå·±çš„ç›®æ ‡ä¸å¯¹ï¼Œä½†å…¶å®å¹¶ä¸æ˜¯ç›®æ ‡ä¸å¯¹ï¼ŒÂ <strong>è€Œæ˜¯ä½ è„‘å­é‡Œæƒ³çš„æ²¡æœ‰è½å®åˆ°ä½ çš„è¯­è¨€å’Œè¡ŒåŠ¨ä¸Šï¼Œå·®ä¹‹åƒé‡Œã€‚</strong></p>
<p>ä½ å¯èƒ½ä¼šå› æ­¤æ›´æ¢ç›®æ ‡ï¼Œä½†å®é™…ä¸Šåªæ˜¯å› ä¸ºä¸‰è€…æ²¡æœ‰å¯¹é½ã€‚Â <strong>æ‰€ä»¥å¦‚æœè¦åšä¸€ä»¶äº‹ï¼Œè¿™ä¸‰è€…å¿…é¡»å¯¹é½å°±è¡Œäº†ã€‚</strong></p>
<h2 data-id="heading-2">03Â <strong>åœæ­¢ç²¾ç¥å†…è€—ï¼šä¸å–œæ¬¢å°±è·‘</strong></h2>
<p>ä»¥å‰çœ‹åˆ°è‡ªå·±ä¸å–œæ¬¢çš„äººå’Œäº‹ï¼Œæˆ‘ä¼šè§‰å¾—ä¸–ç•Œæ˜¯å‚å·®çš„ï¼Œæ‰€ä»¥è¦å¿è€ã€åŒ…å®¹ã€‚ç°åœ¨ä¼šè§‰å¾—ï¼ŒÂ <strong>å¦‚æœæ˜¯ä¸å–œæ¬¢çš„ä½æƒ…å•†çš„äººï¼Œæˆ‘ä¹‹å‰ä¼šè§£é‡Šä¸ºä»–ä¹Ÿä¸å®¹æ˜“ï¼Œç°åœ¨å°±æ’’è…¿è·‘å°±å¥½ï¼Œä¹Ÿä¸å†å†…è€—è‡ªå·±äº†ã€‚</strong></p>
<p>äº‹æƒ…è¶Šæ¥è¶Šå¤šã€è¶Šæ¥è¶Šå¿™ï¼Œæˆ‘ä¸èƒ½å†æŠŠæ—¶é—´èŠ±åœ¨å®¹å¿ä¸€äº›æˆ‘æœ¬æ¥å°±ä¸è®¤å¯çš„äººå’Œäº‹ä¸Šï¼ŒÂ <strong>æˆ‘åªç”¨å»è¿½æ±‚æˆ‘è®¤å¯çš„å°±å¯ä»¥äº†ã€‚</strong></p>
<h2 data-id="heading-3">04Â <strong>å¤§èƒ†æƒ³è±¡ï¼šæŠŠç›®æ ‡è¯´å‡ºæ¥ï¼Œè®©ä¸–ç•Œå¸®ä½ å®ç°</strong></h2>
<p>ä»Šå¹´ 7 æœˆä»½æˆ‘æœ‰ä¸€ä»¶ç‰¹åˆ«ç¥å¥‡çš„äº‹ã€‚æˆ‘ä¸€ç›´åœ¨å¹»æƒ³ï¼Œä» 7 æœˆåˆ° 12 æœˆè¦è¿›è¡Œ 6â€“7 æ¬¡å®£å‘ï¼Œè®©åˆ«äººçŸ¥é“æˆ‘ã€çŸ¥é“æˆ‘çš„è‡ªåª’ä½“å“ç‰Œã€çŸ¥é“æˆ‘çš„å·¥ä½œå®¤ã€çŸ¥é“æˆ‘æœ‰ä»€ä¹ˆæ ·çš„å•†ä¸šæ‰¿æ¥èƒ½åŠ›ï¼Œè¿™æ ·åˆ«äººæ‰èƒ½å’Œæˆ‘åˆä½œï¼Œæˆ‘ä¹Ÿæ‰èƒ½æ›´å¥½åœ°æä¾›æœåŠ¡ã€‚</p>
<p>å½“æ—¶æˆ‘è¯´è¿™äº›è¯çš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±éƒ½è§‰å¾—æœ‰ç‚¹åƒé¥±äº†æ’‘çš„ï¼Œå› ä¸ºé‚£æ—¶æˆ‘è¿˜æ²¡å‚åŠ è¿‡å¾ˆå¤š AI æ´»åŠ¨ï¼Œåªå‚åŠ è¿‡ä¸€æ¬¡ç‹åšé™¢å£«çš„ 2050 å¤§ä¼šï¼Œä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡ä½œä¸ºå˜‰å®¾ä¸Šå»æ¼”è®²ã€‚ä½†æˆ‘å›æ¥ä¹‹åå°±ç«‹é©¬åœ¨ç¾¤é‡Œè¯´ï¼Œæˆ‘ä¸‹åŠå¹´è¦åš 6â€“7 æ¬¡å®£å‘ï¼Œè€Œä¸”å…¶ä¸­ä¸€æ¬¡å¿…é¡»æ˜¯ Festival çº§åˆ«çš„æ´»åŠ¨ã€‚</p>
<p>æˆ‘å°±æ˜¯é‚£ä¹ˆè¯´äº†ï¼Œç„¶åè¯´å®Œä¹‹åå°±æ…¢æ…¢å®ç°äº†ã€‚ç°åœ¨ä¸åªæ˜¯å…­ä¸ƒæ¬¡ï¼Œè¿œè¿œè¶…å‡ºäº†å½“æ—¶çš„ç›®æ ‡ï¼Œä¸ä»…åšäº†è®²åº§ï¼Œè¿˜å½•äº†æ’­å®¢ï¼Œåšäº†çˆ†æ¬¾è§†é¢‘ï¼Œç»™è€æ¿è®²å­¦ï¼Œç»™å¤§å­¦ç”Ÿè®²å­¦â€¦â€¦</p>
<p>æ‰€ä»¥æˆ‘æƒ³è¯´ï¼ŒÂ <strong>å¦‚æœä½ è§‰å¾—è‡ªå·±çš„æƒ³æ³•å¤§åˆ°å¯æ€•ï¼Œå¯ä»¥æŠŠè¿™äº›æƒ³æ³•å‘Šè¯‰ä½ å‘¨å›´çš„äººï¼Œæœ€å¥½æ˜¯åœ¨ç¾¤é‡Œè¯´ï¼Œè¿™æ ·ä½ æ‰èƒ½çœŸæ­£ç»™è‡ªå·±ä¿¡å¿ƒå»å®ç°ã€‚</strong> Â ä½ å®³æ€•è¯´äº†ä¹‹ååšä¸åˆ°ä¼šå¾ˆå°´å°¬ï¼Œé‚£æˆ‘è§‰å¾—Â <strong>å¦‚æœå¯¹ä½ è¿å°´å°¬éƒ½æ˜¯ä¸€ä¸ªå›°éš¾çš„è¯ï¼Œè¿™ä»¶äº‹ä½ å¤§æ¦‚ç‡æ˜¯åšä¸åˆ°çš„ã€‚</strong></p>
<h2 data-id="heading-4">05Â <strong>æ•¢äºæ¥ä½æµé‡å’Œè´¢å¯Œï¼šä¸è¦è¢« â€œæ™®é€šäººâ€ çš„äººè®¾ç»‘æ¶</strong></h2>
<p>æˆ‘ä¹‹å‰æœ‰ä¸€ä¸ªå¾ˆè’è°¬çš„æƒ³æ³•ï¼šå¦‚æœçŸ­è§†é¢‘åšå¾—å¥½ï¼Œæœ‰ 800 ä¸ªèµã€1000 ä¸ªèµï¼Œé‚£å¤šå¯æ€•å‘€ã€‚å½“æˆ‘å’Œæœ‹å‹è¯´å‡ºè¿™ä¸ªæƒ³æ³•çš„æ—¶å€™ï¼Œæˆ‘è‡ªå·±éƒ½éœ‡æƒŠäº†ï¼Œæˆ‘ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§æƒ³æ³•ï¼Ÿ</p>
<p>åæ¥æˆ‘å‘ç°ï¼Œæœ‰ä¸€ç§æ ¹æ·±è’‚å›ºçš„è§‚å¿µåœ¨è€½è¯¯æˆ‘åšæµé‡ â€”â€” **æˆ‘è§‰å¾—å¦‚æœæŠŠæµé‡åšå¾—å¤ªå¥½ï¼Œå°±ä¼šå’Œåˆ«äººå½¢æˆå¾ˆå¤§çš„å·®è·ï¼Œè¿™ä¸ªå·®è·ä¼šè®©æˆ‘å˜å¾—å­¤å•ï¼Œ**è€Œä¸”æ€»æœ‰äººåœ¨å–·åšè‡ªåª’ä½“çš„æ ‡æ¦œè‡ªå·±æ˜¯ä¸ç¢°è¿™äº›ä¸œè¥¿çš„ã€‚å¦‚æœæˆ‘åšæµé‡ï¼Œ<strong>èº«è¾¹ä¸ä¼šæœ‰é‚£ä¹ˆå¤šäººé™ªä¼´æˆ‘ã€‚</strong></p>
<p>è¿™å¯¹ä»»ä½•äººæ¥è¯´éƒ½æ˜¯æœ‰æŒ‘æˆ˜çš„ï¼Œä½†åæ¥æˆ‘å†³å®šæ”¹å˜è¿™ä¸ªæ€ç»´ã€‚ä¸€æ–¹é¢æ˜¯æ—¶ä¸æˆ‘å¾…ï¼Œæˆ‘ä»¬æœ‰æ•ˆå·¥ä½œæ—¶é—´å¾ˆçŸ­ï¼Œå°±è¿™ä¹ˆå‡ åå¹´ï¼Œæ²¡æœ‰å¤ªå¤šæ—¶é—´çŠ¹è±«ï¼›å¦ä¸€æ–¹é¢æ˜¯ï¼ŒÂ <strong>ä½ è§‰å¾—æŠŠæµé‡åšå¤§äº†ä¼šæœ‰å‹åŠ›ï¼Œä½†é—®é¢˜æ˜¯å¹¶ä¸æ˜¯ä½ æƒ³åšå°±èƒ½åšåˆ°ï¼Œå‰æœŸæƒ³é‚£ä¹ˆå¤šå…¶å®æœ‰ç‚¹æäººå¿§å¤©ã€è‡ªä½œå¤šæƒ…ã€‚</strong></p>
<p>äºæ˜¯æˆ‘å¼€å§‹åœ¨è„‘æµ·é‡Œä¸æ–­æƒ³è±¡ï¼Œå¾—åˆ°å…³æ³¨ä¹‹åä¼šæ€ä¹ˆæ ·ï¼Œç„¶åå‘ç°ï¼Œä¹Ÿä¸ä¼šå™¶ï¼Œä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆå¤ªå¤§çš„å›°éš¾ã€‚Gemini 3 å‡ºæ¥ä¹‹åï¼Œæˆ‘å¼€å§‹åšç›¸å…³çš„çŸ­è§†é¢‘ï¼Œæ•°æ®è¿˜ä¸é”™ï¼Œæˆ‘æ‰å‘ç°ï¼ŒÂ <strong>åŸæ¥å¾—åˆ°æµé‡å¹¶ä¸ä¼šå‘ç”Ÿç‰¹åˆ«å¯æ€•çš„äº‹æƒ…ã€‚</strong></p>
<p>å¦å¤–ï¼Œå¯¹å¾ˆå¤šäººæ¥è¯´ï¼ŒÂ <strong>è·å¾—æµé‡å…¶å®æ˜¯å¯¹ â€œæ™®é€šäººèº«ä»½â€ çš„ä¸€æ¬¡èƒŒå›ã€‚</strong> Â ä»å°è¢«æ•™è‚²è¯´æ™®é€šäººè¦éšå¤§æµï¼Œè€Œèƒ½è·å¾—æµé‡çš„äººåœ¨ç¤¾ä¼šä¸Šæ¯•ç«Ÿæ˜¯å°‘æ•°ï¼Œå°±å†²è¿™ä¸€ç‚¹ï¼Œå¾ˆå¤šäººä¹Ÿè¿ˆä¸å‡ºè¿™ä¸€æ­¥ã€‚</p>
<p>è¿™èƒŒåæœ‰å¾ˆå¤šä»å°åˆ°å¤§æ—¥ç§¯æœˆç´¯çš„è§‚å¿µï¼Œå¯¼è‡´å¾ˆéš¾æ”¹å˜ã€‚å†åŠ ä¸Šå‘¨å›´ç¤¾ç¾¤çš„å™ªéŸ³ï¼Œå½“ä½ ç¨å¾®æƒ³å˜å¥½ã€å¾€é«˜å¤„èµ°çš„æ—¶å€™ï¼Œä¸€å®šä¼šæœ‰äººè¯´ï¼šâ€œä½ è¿™ä¸ªä¸€å®šè¦æ‘”ä¸ªå¤§è·Ÿå¤´â€â€œäººæ€•å‡ºåçŒªæ€•å£®â€ ä¹‹ç±»çš„ã€‚ä»–ä»¬ä¼šç»™è‡ªå·±çš„ä¸è¡ŒåŠ¨æ‰¾å¾ˆå¤šå€Ÿå£ï¼Œç„¶åæ¥è´¬ä½ä½ ã€æ‹‰è¸©ä½ ã€‚</p>
<p>å¾ˆå¤šäººå°±æ˜¯åœ¨è¿™ä¸ªæ—¶å€™æ”¾å¼ƒçš„ï¼Œ99% çš„äººéƒ½ä¼šæ”¾å¼ƒã€‚ä½†Â <strong>å½“ä½ æ„è¯†åˆ°è¿™å®Œå…¨æ˜¯ä¸€ç§è®¾å®šè€Œä¸æ˜¯äº‹å®çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå†é‚£ä¹ˆè¢«ä»–äººå·¦å³ã€‚</strong></p>
<h2 data-id="heading-5">06Â <strong>é¢å¯¹æ‰“å‹å’Œå¼±åŒ–ï¼šç«‹åˆ»ç¦»å¼€ï¼Œä¸è§£é‡Š</strong></h2>
<p>æˆ‘æœ€å¼€å§‹æ˜¯åš AI è‡ªåª’ä½“çš„ï¼Œæˆ‘ä»¬é‚£ä¸ªç¾¤é‡Œå¾ˆå¤šäººéƒ½è¯´ï¼šâ€œä½ å…³å¿ƒæŠ€æœ¯å¹²å•¥å‘€ï¼Ÿåšä½ çš„è‡ªåª’ä½“å»å§ã€‚â€ è¯­æ°”é‡Œå……æ»¡ä¸å±‘çš„è°ƒä¾ƒã€‚</p>
<p>å…¶å®æˆ‘åœ¨è‡ªåª’ä½“ä¹‹å¤–ä¹Ÿåšè¯¾ç¨‹ç ”å‘å’Œå¼€å‘ï¼Œä½†ä¸ªåˆ«ä»¥å¼€å‘è‡ªå±…çš„äººä¼šè§‰å¾—ï¼Œä½ æ—¢ç„¶å·²ç»å äº†è‡ªåª’ä½“çš„å¥½å¤„ï¼Œå°±ä¸åº”è¯¥å†å»åš Vibe codingã€åšè¯¾ç¨‹ï¼Œä¸åº”è¯¥å¾—åˆ°é‚£ä¹ˆå¤šã€‚å¯¹è¿™ç§æˆ‘ä¸€æ¦‚ä¸ç†ã€‚</p>
<p>æ›´è¿‡åˆ†çš„æ˜¯ï¼Œæœ‰äººä¼šè·Ÿæˆ‘è¯´ï¼šâ€œåšè‡ªåª’ä½“å¤šè½»æ¾å•Šï¼Œä¸åƒæˆ‘ä»¬åšå¼€å‘è¿™ä¹ˆç´¯ã€‚â€ å…¶å®åšè‡ªåª’ä½“ä¸€ç‚¹éƒ½ä¸è½»æ¾ã€‚Â <strong>è¿™äº›è¯å¬èµ·æ¥å¥½åƒæ˜¯ä¸ºä½ å¥½ï¼Œè®©ä½ å»æ¡æœ€è½»æ¾çš„æ´»å¹²ï¼Œä½†å®é™…ä¸Šï¼Œæ›´å¤šæ˜¯æƒ³æŠŠä½ çš„æ½œèƒ½å±€é™åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚</strong></p>
<p>æ¯ä¸ªäººçš„å‘å±•æ½œåŠ›éƒ½æ˜¯æ— é™çš„ï¼ŒÂ <strong>ä¸€ä¸ªäººåœ¨æ¢ç´¢ AI åˆæœŸçš„æ—¶å€™ï¼Œå¯ä»¥åšè‡ªåª’ä½“ï¼Œä¹Ÿå¯ä»¥åšå¼€å‘ï¼Œå¯ä»¥å°è¯•å„ç§å„æ ·çš„åˆ†æ”¯ï¼Œè€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±æŠŠè‡ªå·±ç»‘å®šåœ¨ä¸€ä¸ªæ–¹é¢ã€‚</strong></p>
<p>æˆ‘ä¹Ÿç¢°åˆ°è¿‡ä¸€äº›éå¸¸ä¼˜ç§€çš„äººï¼Œä½†ä»–æœ‰ä¸€äº›æ¯”è¾ƒåçš„æ¯›ç—…ï¼Œæ¯”å¦‚æ‰“å‹åˆ«äººã€‚ä¸€å¼€å§‹æˆ‘ä¼šè§‰å¾—ä»–ä¹Ÿæ˜¯å¥½å¿ƒï¼Œæ¯•ç«Ÿæ˜¯æƒå¨ã€‚åæ¥æˆ‘å‘ç°ï¼Œå¯èƒ½æ˜¯åˆ©ç›Šå†²çªå¯¼è‡´ä»–ä»¬çš„æ‰“å‹ã€‚</p>
<p>æ‰€ä»¥Â <strong>ä»»ä½•æ—¶å€™ï¼Œæƒ³å¸®ä½ çš„äººæ˜¯ä¸ä¼šä»¥æ‰“å‹çš„æ–¹å¼æ¥å¸®ä½ çš„ã€‚</strong> Â ä½ ä¹‹æ‰€ä»¥è§‰å¾—åˆ«äººæ‰“å‹ä½ æ˜¯åœ¨å¸®ä½ ï¼Œå¯èƒ½æ˜¯å› ä¸ºåŸç”Ÿå®¶åº­é‡Œï¼Œçˆ¶æ¯ä¼šè¯´ â€œæˆ‘æ‰“ä½ éª‚ä½ æ˜¯ä¸ºäº†ä½ å¥½â€ï¼Œè€å¸ˆä¹Ÿä¼šè¯´ â€œæˆ‘æ‰“ä½ éª‚ä½ æ˜¯ä¸ºäº†ä½ å¥½â€ã€‚</p>
<p>ä½†åæ¥æƒ³æƒ³ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚Â <strong>å¦‚æœä¸€ä¸ªäººçœŸçš„å‘è‡ªå†…å¿ƒå°Šé‡å¦ä¸€ä¸ªäººï¼Œä»–åœ¨å¸®å¯¹æ–¹çš„æ—¶å€™æ˜¯ä¸å¯èƒ½ç”¨è¿™ç§æ–¹å¼çš„ã€‚</strong></p>
<p>åæ¥ï¼ŒÂ <strong>ä¸ç®¡è¿™ä¸ªäººæ˜¯ä¸æ˜¯çœŸå¿ƒæƒ³å¸®æˆ‘ï¼Œåªè¦å‡ºç°ä»»ä½•æ‰“å‹çš„ç«¯å€ªï¼Œå“ªæ€•æ˜¯ä¸€ç‚¹ç‚¹ï¼Œæˆ‘ç°åœ¨åŸºæœ¬ä¸Šéƒ½ä¼šç«‹é©¬é€ƒå¼€ã€‚</strong></p>
<p>æ‰“å‹è¿˜ç®—æ˜¯æ˜æ˜¾çš„ï¼Œå¼±åŒ–æ›´å®¹æ˜“è¢«å¿½ç•¥ã€‚æ¯”å¦‚æœ‰äººä¼šè·Ÿä½ å¼€ç©ç¬‘è¯´ï¼šâ€œå“ï¼Œä½ èƒ½å¹²æˆå•¥äº‹å•Šï¼Ÿâ€ åƒè¿™ç§è¯ï¼Œå¦‚æœæˆ‘å¬åˆ°æœ‰äººè¿™ä¹ˆè·Ÿæˆ‘è¯´ï¼ŒÂ <strong>æˆ‘ä¼šç«‹é©¬è®©è¿™ä¸ªäººç¦»å¼€æˆ‘çš„ç”Ÿæ´»ï¼Œå› ä¸ºè¿™å…¶å®æ˜¯ä¸€ç§éšå½¢çš„è´¬ä½ã€‚</strong></p>
<p><strong>ä»»ä½•äººè¦æ˜¯çœŸçš„å°Šé‡ä½ ï¼Œæ˜¯ç»å¯¹ä¸ä¼šè¯´å‡ºä¸æ¯«è´¬ä½ä½ çš„è¯çš„ï¼Œè€Œä¸”è¿™ç§è¯æ²¡å¿…è¦è§£é‡Šä¸ºç©ç¬‘ã€‚</strong></p>
<h2 data-id="heading-6">07Â <strong>ä¸éœ€è¦ä»–äººçš„è¯„ä»·ï¼šå»ºç«‹ç‹¬ç«‹äººæ ¼çš„é›å½¢</strong></h2>
<p>è¿™ä¸€ç‚¹å’Œä¸Šä¸€ç‚¹æœ‰å…³ã€‚å¾ˆå¤šäººæ‰“å‹ä½ ï¼Œæ˜¯å› ä¸ºæƒ³æ“æ§ä½ ï¼Œè€Œæ“æ§å¾€å¾€å€ŸåŠ©è¯„ä»·å®Œæˆ â€”â€” ä»å„ç§è§’åº¦è¯„ä»·ä½ ï¼Œè®©ä½ è§‰å¾—è‡ªå·± â€œè¿˜å·®ç‚¹æ„æ€â€ã€‚</p>
<p><strong>å½“ä½ çœŸæ­£ä¸åœ¨ä¹åˆ«äººçš„æ¶æ„è¯„ä»·æ—¶ï¼Œæ‰ç®—æœ‰äº†æœ€åŸºæœ¬çš„ç‹¬ç«‹äººæ ¼é›å½¢ã€‚</strong> Â çœŸæ­£çš„æˆç†Ÿå’Œå‘¨åˆ°ï¼Œä¸æ˜¯å› ä¸ºåœ¨ä¹åˆ«äººæ€ä¹ˆçœ‹ä½ ï¼Œè€Œæ˜¯å› ä¸ºä½ æœ‰è‡ªå·±çš„ä½“ç³»ã€åšæŒè‡ªå·±ã€åŒæ—¶è¿˜èƒ½å–„è‰¯å¾…äººã€‚è‡³äºåˆ«çš„ï¼ŒçœŸçš„æ˜¯ä½ çš„ä¹‰åŠ¡å—ï¼Ÿ</p>
<p>å¦‚æœä¸€å¼€å§‹å°±ç‰¹åˆ«å¤–å€¾ï¼Œä½ å¯èƒ½ä¼šè¿·å¤±åœ¨åˆ«äººå¯¹ä½ çš„å„ç§è¯‰æ±‚é‡Œã€‚æ¯ä¸ªäººå¯¹ä½ çš„è¯‰æ±‚éƒ½ä¸ä¸€æ ·ï¼Œåˆ°æœ€åä½ å¯èƒ½æ»¡è¶³äº† A çš„è¯‰æ±‚ã€B çš„è¯‰æ±‚ï¼ŒÂ <strong>å´æŠŠè‡ªå·±å˜æˆäº†ä¸€ä¸ªå››ä¸åƒã€‚</strong></p>
<h2 data-id="heading-7">08Â <strong>è¯šå·±è¯šäººï¼šåˆ†é’±ï¼Œæ˜¯æˆå¹´äººæœ€å¤§çš„å°Šé‡</strong></h2>
<p>æˆ‘è§‰å¾—Â <strong>100 å—å¦‚æœæ˜¯åˆ«äººè®©ä½ èµšçš„ï¼Œä½ èµ·ç å¾—åˆ†10å—ç»™åˆ«äººã€‚</strong> Â å¦‚æœä¸€ä»¶äº‹æƒ…ä½ è¿10% çš„å›æŠ¥éƒ½åšä¸åˆ°ï¼Œåˆ«äººä¸ºä»€ä¹ˆè¦å¸®ä½ å‘¢ï¼Ÿè¿™å°±æ˜¯æœ€ç›´è§‚çš„æ„Ÿæ©ä¹‹å¿ƒã€‚</p>
<p><strong>ä¸è¦å¼€ç©ºå¤´æ”¯ç¥¨ï¼Œä¸è¦è¯´ä»€ä¹ˆ â€œä»¥åå†å›æŠ¥â€ï¼Œæ›´ä¸è¦è¯´å¯¹æ–¹ â€œçœ¼é‡Œåªæœ‰é’±â€ã€‚å…¶å®è°ˆé’±æ˜¯æˆå¹´äººä¹‹é—´æœ€å¤§çš„å°Šé‡ï¼Œå› ä¸ºä½ ä¸è°ˆé’±å°±æ˜¯åœ¨è°ˆæ„Ÿæƒ…ã€‚</strong></p>
<p>æ²¡æœ‰æ„Ÿæ©ä¹‹å¿ƒçš„äººï¼Œæ—©å°±åœ¨å¤§ä½¬çš„é»‘åå•ä¸Šäº†ï¼Œæ ¹æœ¬è¿ˆä¸å‡ºè‡ªå·±çš„äº¤é™…åœˆã€‚</p>
<h2 data-id="heading-8">09Â <strong>å¯ä»¥å¹è‡ªå·±ï¼Œä½†ä¸è¦æ‹‰è¸©åˆ«äºº</strong></h2>
<p>æˆ‘ä»¬åšå•†ä¸šå®£ä¼ ï¼Œè‡ªå¤¸æ˜¯å¾ˆå¸¸è§çš„ã€‚å¦‚æœä½ çœ‹åˆ°æœ‰äººåœ¨å¤¸è‡ªå·±ï¼Œä½ ä¸ç”¨å»ç®¡ä»–ï¼Œä½†Â <strong>åœ¨è‡ªå¤¸çš„æ—¶å€™ï¼Œåƒä¸‡ä¸è¦æ‹‰è¸©åˆ«äººï¼Œæˆ–è€…ä¼¤å®³åˆ°åˆ«äººã€‚</strong> Â æ•´ä¸ªåœˆå­éå¸¸å°â€¦â€¦ç‰¹åˆ«æ˜¯åœ¨äº’è”ç½‘åœˆå­é‡Œï¼Œå„ç§æˆªå›¾ã€æ™’æœ‹å‹åœˆéƒ½æœ‰ã€‚</p>
<p>æœ‰çš„æ—¶å€™å¹¶ä¸æ˜¯è¦æ”¾å¼ƒè‡ªå·±çš„ä¸€äº›æƒåˆ©ï¼ŒÂ <strong>è€Œæ˜¯è¦èŠ‚çº¦è‡ªå·±çš„æ—¶é—´ï¼Œå› ä¸ºå¦‚æœæœ‰ä¸åˆ©äºè‡ªå·±çš„äº‹æƒ…å‘ç”Ÿï¼Œè¿˜è¦èŠ±æ—¶é—´å»å¤„ç†ã€‚</strong></p>
<h2 data-id="heading-9">10Â <strong>é‡æ–°è®¤è¯†å•†ä¸šï¼šæå‰é€‰å¥½ä½ å–œæ¬¢çš„èµšé’±æ–¹å¼</strong></h2>
<p>æˆ‘ä¹‹å‰æ€»æ˜¯è§‰å¾—å•†ä¸šå¥½åƒæ˜¯ä¸€ç§ç´¢å–ï¼Œå› ä¸ºåœ¨æˆ‘å°è±¡ä¸­ï¼Œåˆ«äººè°ˆç”Ÿæ„éƒ½æ˜¯è§¥ç­¹äº¤é”™ã€äº’ç›¸ç®—è®¡çš„æ„Ÿè§‰ã€‚</p>
<p>ä½†æœ‰ä¸€å¤©æˆ‘åœ¨è·¯ä¸Šï¼Œçœ‹åˆ°å„ç§ç¾Šè‚‰ä¸²åº—ã€æŠ«è¨åº—ã€è„±å£ç§€å‰§åœºï¼Œæˆ‘å‘ç°ï¼ŒÂ <strong>å•†ä¸šå…¶å®æ˜¯ä¸€ç§æˆå…¨ï¼Œæ˜¯å„ç§æ¬²æœ›çš„æˆå…¨ï¼Œæ‰€ä»¥è¯´å•†ä¸šæœ¬è´¨ä¸Šæœ‰ç‚¹åƒæ…ˆå–„ã€‚æ‰€ä»¥é’±å–œæ¬¢çš„æ˜¯å¼€æ”¾çš„åœºåŸŸï¼Œæ­£å‘çš„åœºåŸŸï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¹‹åè´Ÿé¢çš„å·²ç»å¾ˆå°‘çœ‹å¾ˆå°‘æŠ›å‡ºæ³¨æ„åŠ›äº†ã€‚</strong></p>
<p>å¦ä¸€æ–¹é¢ï¼Œæ˜¯è¦æƒ³æ¸…æ¥šè‡ªå·±å–œæ¬¢å“ªä¸€ç§ç»è¥æ–¹å¼ï¼šåšå®šåˆ¶åŒ–æœåŠ¡ï¼Œè¿˜æ˜¯åšçº¯è‡ªåŠ¨åŒ–è¥æ”¶çš„ä¸šåŠ¡ã€‚å®šåˆ¶åŒ–æœåŠ¡éœ€è¦ä¸€ä¸ªä¸€ä¸ªå»æœåŠ¡ï¼Œå¾ˆè´¹äººï¼Œé™¤éä½ æœ‰å›¢é˜Ÿã€‚çº¯è‡ªåŠ¨åŒ–è¥æ”¶å¯èƒ½æ˜¯å‡ºæµ·ã€è‡ªåŠ¨å‘è´§ä¹‹ç±»çš„ä¸œè¥¿ã€‚</p>
<p><strong>ä¸€å¼€å§‹å°±è¦æƒ³å¥½è‡ªå·±å¯¹é‡‘é’±çš„è¿½æ±‚æ˜¯ä»€ä¹ˆå½¢å¼</strong>Â ï¼šä½ æ˜¯æƒ³é è¿‘äººã€è´´è¿‘äººï¼Œä¸€ä¸ªä¸€ä¸ªå»æœåŠ¡ï¼Œè¿˜æ˜¯æƒ³è¦ä¸€ç§çº¯è‡ªåŠ¨åŒ–ã€å¾ˆ â€œæœºå™¨å¼â€ çš„å•†å“ã€‚</p>
<p>è¿™ä¸ªå¾ˆé‡è¦ï¼Œè¦ä¸ç„¶è¯•äº†ä¸€åœˆä¹‹åä½ å¯èƒ½ä¼šå‘ç°ï¼Œè‡ªå·±ä¸æ„¿æ„æ¥è¿‘äººã€ä¸æ„¿æ„åšå®šåˆ¶åŒ–æœåŠ¡ã€å—ä¸äº†é‚£ç§æ°”ï¼Œåˆè¦é‡æ–°èµ°è‡ªåŠ¨åŒ–è¥æ”¶çš„è·¯ï¼Œä¸å¦‚æœ€å¼€å§‹å°±æƒ³æ¸…æ¥šã€‚</p>
<h2 data-id="heading-10">11Â <strong>æŠŠæ—¶é—´ç•™ç»™è‡ªå·±ï¼šä¸è¦æŠŠè‡ªå·±æ´»æˆæ³¡æ²«</strong></h2>
<p>æˆ‘ç°åœ¨å·¥ä½œæ—¥æ¯å¤©éƒ½å¿™å¾—è„šä¸æ²¾åœ°ï¼Œä¹Ÿä¸å¾—ä¸å¼€å§‹å•ä¼‘ï¼Œä¹‹å‰æ˜¯ 20 å¤©ä¼‘ä¸€æ¬¡ï¼Œå¤ªç´¯äº†ï¼Œç°åœ¨åªèƒ½æ”¹æˆå•ä¼‘ã€‚æ‰€ä»¥çœŸçš„æ²¡æœ‰ç²¾åŠ›å¯ä»¥æµªè´¹ã€‚</p>
<p><strong>é™¤äº†éåšä¸å¯çš„é‚£äº›å®¢å¥—ï¼Œå‰©ä¸‹çš„æ—¶é—´å°½é‡ç•™ç»™è‡ªå·±ã€‚å› ä¸ºäººç”Ÿçš„æœ‰æ•ˆæ—¶é—´éå¸¸çŸ­ï¼Œåƒ AI è¿™ç§é£å£ä¹Ÿéå¸¸è®²ç©¶æ—¶æœºï¼Œæ—©æŠ“çš„äººæ¯”æ™šæŠ“çš„äººè¦å¼ºå¾—å¤šã€‚</strong></p>
<p>å¹¶ä¸æ˜¯è¯´ AI çš„é•¿å°¾çº¢åˆ©ä¸å¤šï¼Œè€Œæ˜¯å®ƒçš„çº¢åˆ©æœŸä¸»è¦é›†ä¸­åœ¨å‰å‡ å¹´ã€‚åé¢å¤§å®¶éƒ½æ AI äº†ï¼Œè¿˜éœ€è¦ä½ å¹²å˜›ï¼ŸåæœŸçš„çº¢åˆ©ä¼šå’Œä¼ä¸šæŒ‚é’©ï¼Œå˜æˆä¼ä¸šæœåŠ¡å•†çš„å¤©ä¸‹ï¼Œä¸ªäººå†åšå°±æ²¡æœ‰ç°åœ¨è¿™ä¹ˆå¥½çš„æœºä¼šäº†ã€‚</p>
<p>å¦‚æœä½ å˜å¾—æƒœæ—¶å¦‚é‡‘ï¼Œä½ æ˜¯å¦ä¼šå®³æ€•è‡ªå·±ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šäººï¼Ÿ</p>
<p>â€œèƒŒå›â€æ™®é€šäººäººè®¾å…¶å®åªæ˜¯æˆ‘ä»¬çš„ä¸€ç§ææƒ§æƒ³è±¡ã€‚æ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç«‹çš„ä¸ªä½“ï¼Œæ²¡æœ‰ä»€ä¹ˆæ‰€è°“çš„æ™®é€šäººå’Œä¸æ™®é€šäººã€‚</p>
<p><strong>ä½ åˆ°åº•æ˜¯è¦åšè‡ªå·±çš„äº‹æƒ…ï¼Œè¿˜æ˜¯æˆä¸ºæ´ªæµä¸­çš„ä¸€ä¸ªå°æ³¡æ²«ï¼Œå°±çœ‹ä½ ç»™è‡ªå·±è®¤å®šçš„æ˜¯å“ªä¸€ç§èº«ä»½ã€‚</strong></p>
<h2 data-id="heading-11">12Â <strong>å†²çªæ˜¯ä½ çš„é¢„è®¾ï¼Œä¸–ç•Œæœ¬èº«æ²¡æœ‰è¾¹ç•Œ</strong></h2>
<p>è¿™å¥è¯æ˜¯æˆ‘å’Œæœ‹å‹èŠå¤©æ—¶æƒ³åˆ°çš„ã€‚ä»–ä¸€ç›´åœ¨çº ç»“ï¼Œæ˜¯åšæŠ€æœ¯æ€§å¾ˆå¼ºçš„äº§å“ï¼Œè¿˜æ˜¯å»å–è¯¾åšå•†ä¸šåŒ–ã€‚</p>
<p>æˆ‘è·Ÿä»–è¯´ï¼Œè¿™ä¸¤è€…å¹¶ä¸å†²çªï¼Œä½ å¯ä»¥åŒæ—¶åšä¸¤ä»¶äº‹ï¼Œè€Œä¸”åšäº§å“çš„å¾ˆå¤šç»éªŒä¹Ÿå¯ä»¥åšæˆè¯¾ã€‚ç„¶åæˆ‘å°±è·Ÿä»–è¯´äº†è¿™å¥è¯ï¼šÂ <strong>ä¸–ç•Œæ˜¯æ²¡æœ‰è¾¹ç•Œçš„ï¼Œå†²çªåªä¸è¿‡æ˜¯ä½ çš„é¢„è®¾è€Œå·²ã€‚</strong> Â ä»–å½“æ—¶æç„¶å¤§æ‚Ÿã€‚</p>
<p>è¿˜æœ‰ä¸€å¤©æˆ‘åœ¨å•†åœºåƒèŠ’æœå†°ï¼Œæˆ‘çªç„¶æ„Ÿè§‰è‡ªå·±å’Œå¤–ç•Œçš„å¢™å€’å¡Œäº†ï¼Œæˆ‘å‘ç°æˆ‘å’Œè¿™ä¸ªä¸–ç•Œæ˜¯å®Œå…¨ä¸€ä½“çš„ï¼Œè™½ç„¶å½“æ—¶æˆ‘è¿˜æ²¡æ³•è§£é‡Šä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆè®¤ä¸ºï¼Œä½†æ˜¯æœ‰ä¸€ç§å¾ˆå¼ºçš„ç›´è§‚ã€‚æˆ‘ä¹‹å‰æ€»è§‰å¾—åƒèŠ’æœå†°çš„æˆ‘å’Œå¤–ç•Œä»–äººæ˜¯ä¸¤ä¸ªä¸–ç•Œï¼Œäººæˆ‘ä¹‹è§ï¼Œé‚£ä¸€åˆ»è¿™ç§æƒ³æ³•å½»åº•æ¶ˆå¤±äº†ä¸”å‡ ä¹æ²¡æœ‰åå¤ã€‚</p>
<p>å°±æ˜¯å¾ˆç¥å¥‡çš„çªç„¶è¿›å…¥äº†æ— ç•Œçš„æ„Ÿè§‰ã€‚åæ¥æˆ‘æ„Ÿè§‰ä¹‹å‰åœ¨è„‘æµ·é‡Œç”¨åç›¸æ€ç»´å»æ€è€ƒï¼Œå¾ˆè´¹åŠ›ä¸è®¨å¥½ã€‚Â </p>
<p>æ¯”å¦‚<strong>ä½ ä¸€ç›´ç”¨å¯¹ç«‹çš„æ¦‚å¿µå»æ€è€ƒï¼Œå°±ä¼šè§‰å¾—å¿…é¡»äºŒé€‰ä¸€ï¼Œä½ æ‹¿ææ¦‚å¿µçš„åŒæ—¶å°±è¢«æ¦‚å¿µæ‹¿æäº†ã€‚</strong> Â è¿™æ˜¯ä¸€ç§å…¸å‹çš„æ€ç»´ä¹ æƒ¯ï¼Œå› ä¸ºæˆ‘ä»¬ä¸Šå­¦æ—¶åšé¢˜ï¼Œæ€»æ˜¯åšåˆ¤æ–­é¢˜ï¼šå¯¹å‘€ã€é”™å‘€ã€‚</p>
<p>ä½†<strong>ç°å®æ˜¯å¤šç»´çš„ï¼Œä½ ä½œä¸ºä¸€ä¸ªå¤§æ´»äººï¼Œå¯ä»¥æ‰¿è½½çš„é¢å‘å…¶å®å¾ˆå¤šï¼Œå¹¶ä¸æ˜¯è¯´å¿…é¡»äºŒé€‰ä¸€ï¼Œæˆ–è®¸è¿™å°±æ˜¯è¶…è¶ŠèŒƒå¼ï¼Œä¸æ‹¿æä»»ä½•æ¦‚å¿µï¼Œä»¥ä¸‡å˜åº”ä¸‡å˜å°±å¥½äº†ã€‚</strong> Â åªæ˜¯å› ä¸ºè¿™ç§æ€ç»´æ¡†æ¶ï¼Œæœ‰çš„æ—¶å€™ä¼šè®©è‡ªå·±é™·å…¥æ­»å±€ï¼Œæ—¢è€½è¯¯æ—¶é—´ï¼Œåˆæ±¡æŸ“æƒ…ç»ªã€‚</p>
<p>æ‰€ä»¥å¦‚æœä½ è§‰å¾—è‡ªå·±è¢«ä¸¤ä¸ªæç«¯æªç€å¤§è„‘ä¸æ”¾ï¼Œä¸å¦¨å‡ºå»çœ‹çœ‹ä»Šå¤©çš„æ ‘å¶ï¼Œçœ‹çœ‹å¤–é¢çš„ç¯å¢ƒã€‚ä½ ä¼šå‘ç°ç°å®ä¸–ç•Œæ˜¯å®Œå…¨æ²¡æœ‰è¾¹ç•Œçš„ã€‚</p>
<h2 data-id="heading-12">13Â <strong>ç²¾åŠ›æ˜¯å¯ä»¥å…»æˆçš„ï¼šç»™è‡ªå·±é¢å‘ â€œé€šè¡Œè¯â€</strong></h2>
<p>ç²¾åŠ›ä¸æ˜¯æˆåŠŸäººå£«çš„ä¸“å±ï¼Œè¿™ä¸€ç‚¹æˆ‘ä¸“é—¨å†™è¿‡ä¸€ç¯‡æ–‡ç« ã€‚</p>
<p>æ€»ä½“æ¥è¯´ï¼Œä½ è¦æŠŠè‡ªå·±æƒ³è±¡æˆåœ¨é«˜é€Ÿå…¬è·¯ä¸Šå¼€è½¦çš„å¸æœºï¼Œå³æ‰‹è¾¹æŠ½å±‰é‡Œæœ‰ä¸€å¼ é€šè¡Œè¯ï¼Œè¿™å¼ é€šè¡Œè¯æ˜¯ä½ è‡ªå·±é¢å‘çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥å¼€åˆ°ä»»ä½•åœ°æ–¹ï¼Œä½ çš„æ—…ç¨‹å¯ä»¥å»ä»»ä½•åœ°æ–¹ã€‚</p>
<p>è¿™å…¶ä¸­åŒ…æ‹¬ä¸€é¡¹æƒåˆ©ï¼šÂ <strong>ä½ å¯ä»¥ç»™è‡ªå·±é…ç½®å„ç§ â€œè®¸å¯â€ï¼Œæ¯”å¦‚ç²¾åŠ›ã€‚æˆ‘ç»™è‡ªå·±çš„è®¸å¯åŒ…æ‹¬ â€œé«˜ç²¾åŠ›äººå£«â€é…ç½®ï¼Œé‚£æˆ‘å°±å¯ä»¥åˆ»æ„è®­ç»ƒè‡ªå·±ï¼ŒæŠŠé«˜ç²¾åŠ›é‡Šæ”¾å‡ºæ¥ã€‚æ‰€ä»¥æˆ‘è¿å·ä¸¤ä¸ªæœˆï¼Œç²¾åŠ›æ–¹é¢ç›´æ¥çªç ´äº†ä»¥å¾€å‡ åå¹´çš„ç“¶é¢ˆã€‚ï¼ˆä¸å»ºè®®èº«ä½“å·®çš„åŒå­¦æ¨¡ä»¿ï¼‰</strong></p>
<p><strong>èƒ½ä¸èƒ½æˆä¸ºä¸€ä¸ªé«˜ç²¾åŠ›çš„äººï¼Œä¸»è¦å–å†³äºä½ çš„ä¸»ä½“æ€§æ˜¯å¦ç¡®ç«‹ã€‚</strong></p>
<p>ä¸€æ—¦ç¡®ç«‹ï¼Œä¸ç”¨åˆ«äººé€¼ä½ ï¼Œä½ çš„ç²¾åŠ›ä¹Ÿä¼šåƒäº•å–·ä¸€æ ·çˆ†å‘ã€‚Â <strong>å› ä¸ºè‡ªæˆ‘å°Šé‡ï¼Œæ‰€ä»¥æ‰æœ‰åŠ¨åŠ›ï¼Œè€Œä¸æ˜¯å› ä¸ºè¦ç¬¦åˆæŸé¡¹ç¤¾ä¼šæ ‡å‡†ï¼Œæ‰å‹‰å¼ºè®©è‡ªå·±ä¿æŒå……æ²›çš„ç²¾åŠ›ã€‚å› ä¸ºè‡ªå·±çš„æ‰¹å‡†å’Œè®¸å¯ï¼Œæ‰ä¸Šè·¯ï¼Œè€Œä¸æ˜¯å› ä¸ºä»»ä½•å¤–å› ï¼Œè¿‡å®Œä¸€ç”Ÿã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>