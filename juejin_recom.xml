<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[7 ä¸ª Cursor AI æé™çœé’±å¤§æ³•ï¼Œåˆ«èŠ±å†¤æ‰é’±ï¼]]></title>    <link>https://juejin.cn/post/7574724406306390066</link>    <guid>https://juejin.cn/post/7574724406306390066</guid>    <pubDate>2025-11-21T06:16:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574724406306390066" data-draft-id="7574722364354805769" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="7 ä¸ª Cursor AI æé™çœé’±å¤§æ³•ï¼Œåˆ«èŠ±å†¤æ‰é’±ï¼"/> <meta itemprop="keywords" content="åç«¯,AIç¼–ç¨‹,Cursor"/> <meta itemprop="datePublished" content="2025-11-21T06:16:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            7 ä¸ª Cursor AI æé™çœé’±å¤§æ³•ï¼Œåˆ«èŠ±å†¤æ‰é’±ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T06:16:27.000Z" title="Fri Nov 21 2025 06:16:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç¨‹åºå‘˜é±¼çš®ã€‚</p>
<p>è‡ªä»ç»™æˆ‘ä»¬å›¢é˜Ÿæä¾› Cursor AI ä¹‹åï¼Œå…¬å¸çš„åˆ©æ¶¦æ˜¯è¶Šæ¥è¶Šå°‘äº†ï¼Œå¤§å®¶æ˜¯çœŸçš„ç–¯ç‹‚å‹æ¦¨ AIã€‚</p>
<p>æ¥ç»™å¤§å®¶çœ‹çœ‹è´¦å•ï¼Œæ‰ä¸€ä¸ªå¤šæœˆå°±èŠ±äº† <strong>1 ä¸‡å¤š</strong>ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/897d0f8c83e546f09a38b7fd62d2b152~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=ojRgnJQBt%2BXtUtdZ7Cna2ZRXhj0%3D" alt="" loading="lazy"/></p>
<p>è¯´ç ´äº§è™½ç„¶æœ‰äº›å¤¸å¼ ï¼Œä½†è¿™é’±éƒ½å¤Ÿæ‹›ä¸€ä¸ªäººäº†å•Šï¼</p>
<p>æˆ‘ä¼°è®¡åœ¨åº§çš„æ²¡å¤šå°‘åŒå­¦ç”¨ AI èŠ±é’±æ¯”æˆ‘ä»¬å¤šå§ï¼Œä¸ä¿¡ä½ ä»¬æŠ¥æŠ¥è´¦å•ï¼Ÿ</p>
<p>æˆ‘æ¥å—ç”¨ AI èŠ±é’±ï¼Œä½†æ˜¯å’±ä¸èƒ½èŠ±å†¤æ‰é’±å¯¹å§ï¼Ÿäºæ˜¯æˆ‘åœ¨å…¬å¸å†…éƒ¨åšäº†ä¸€åœºå…¨é¢çš„ Cursor çœé’±æŠ€å·§åˆ†äº«ï¼Œå¤§å®¶çš„åé¦ˆä¸é”™ï¼Œæ‰€ä»¥æˆ‘å†³å®šæŠŠå†…éƒ¨åˆ†äº«å…¬å¼€æ›å…‰å‡ºæ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6fcb1c25e96421cab3f0969ef78b56a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=ADYnrDeDMr2xWZoGn3BguQ5K3n0%3D" alt="" loading="lazy"/></p>
<p>å¤§å®¶ä½¿ç”¨ AI çš„æŠ€å·§æ— éå°±æ˜¯æ›´å¿«ï¼ˆæé«˜æ•ˆç‡ï¼‰ã€æ›´å‡†ï¼ˆæé«˜å‡†ç¡®åº¦ï¼‰ã€æ›´å¼ºï¼ˆæ›´å¤šèƒ½åŠ›ï¼‰ã€æ›´ç¨³ï¼ˆå®‰å…¨ç¨³å®šï¼‰ã€æ›´çœé’±å¯¹å§ã€‚</p>
<p>æˆ‘ä¹‹å‰å·²ç»å…¬å¼€åˆ†äº«è¿‡å¾ˆå¤š AI ä½¿ç”¨æŠ€å·§äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦ <a href="https://link.juejin.cn?target=https%3A%2F%2Fspace.bilibili.com%2F12890453" target="_blank" title="https://space.bilibili.com/12890453" ref="nofollow noopener noreferrer">å¯ä»¥å»çœ‹çœ‹</a>ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/808e4d3d896948fc8ba67f054e567b25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=UKunsMKutChH9EosJTCE7EDfhmk%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸€æœŸæˆ‘å°±ä¸“é—¨æ•™å¤§å®¶ AI çœé’±å¤§æ³•ï¼Œç»å¯¹å…¨é¢ã€äº²æµ‹æœ‰æ•ˆï¼Œè®©ä½ çš„æ¯ä¸€åˆ†é’±éƒ½èŠ±åœ¨åˆ€åˆƒä¸Šã€‚</p>
<p>ç‚¹ä¸ªæ”¶è—ï¼Œæˆ‘ä»¬å¼€å§‹å§~</p>
<p>ğŸ’¡ æœ¬æ–‡å¯¹åº”è§†é¢‘ç‰ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1pAy5BXE5z" target="_blank" title="https://www.bilibili.com/video/BV1pAy5BXE5z" ref="nofollow noopener noreferrer">bilibili.com/video/BV1pAâ€¦</a></p>
<h2 data-id="heading-0">AI çœé’±å¤§æ³•</h2>
<p>å‹æƒ…æç¤ºï¼Œæ¥ä¸‹æ¥è¦åˆ†äº«çš„æŠ€å·§è¾ƒå¤šï¼Œä¸ºäº†ä¾¿äºå¤§å®¶ç†è§£ï¼Œå»ºè®®å¤§å®¶æŠŠè‡ªå·±æƒ³è±¡æˆå…¬å¸çš„åˆ›å§‹äººï¼Œä½ æ‹›äº†ä¸€ä½ AI å‘˜å·¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cbc5ba44e0c4a93897d1ce52b846b17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=FAIfkb%2FeCRXDcDQqFihfFOR4n48%3D" alt="" loading="lazy"/></p>
<p>æ²¡é”™ï¼Œä½ å°±æ˜¯è€æ¿ï¼Œä½ å°±æ˜¯å¤§èµ„æœ¬å®¶å•Šï¼</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦å­¦ä¹ çš„æ˜¯ï¼Œ<strong>æ€ä¹ˆç»™æ›´å°‘çš„é’±è®© AI å¹²æ›´å¤šçš„æ´»</strong>ã€‚</p>
<p>å…ˆè¯´ä¸ªåŸºæœ¬æ¦‚å¿µï¼šCursor çš„è®¡è´¹æ˜¯æŒ‰ tokenï¼ˆå¯ä»¥ç†è§£ä¸ºå­—ç¬¦æ•°ï¼‰æ¥ç®—çš„ï¼Œä½ ç»™ AI çœ‹çš„å†…å®¹ï¼ˆè¾“å…¥ï¼‰è¶Šå¤šã€AI è¾“å‡ºçš„å†…å®¹è¶Šå¤šï¼ŒèŠ±çš„é’±å°±è¶Šå¤šï¼Œå°±è¿™ä¹ˆç®€å•ã€‚</p>
<p>å¥½ï¼Œç†è§£äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å¼€å§‹è®²çœé’±æŠ€å·§ã€‚</p>
<h3 data-id="heading-1">1ã€åˆ«è®© AI åšæ— ç”¨åŠŸ</h3>
<p>å¤§å®¶æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼Ÿè®© AI å†™ä¸ªåŠŸèƒ½ä»£ç ï¼Œç»“æœå®ƒå™¼é‡Œå•ªå•¦ç»™ä½ è¾“å‡ºä¸€å¤§å †æ³¨é‡Šã€æµ‹è¯•ä»£ç ã€ä¸€å¤§å †æ–‡æ¡£è¯´æ˜ã€ç»™æ–‡æ¡£å†ç”Ÿæˆä¸ªæ–‡æ¡£ã€æœ€åå†æ¥ä¸€å¤§æ®µæ€»ç»“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a18531b5a2894d6d84afe2342ee009a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=H%2FJTSe6GgXxgNzjTjwSkKdQ9%2FQs%3D" alt="" loading="lazy"/></p>
<p>çœ‹ç€å¾ˆä¸“ä¸šï¼Œä½†æˆ‘ä¼°è®¡å¾ˆå¤šä¸œè¥¿ä½ æ ¹æœ¬ä¸ä¼šå»çœ‹çš„ï¼Œå¯¹ä¸å¯¹ï¼Ÿ</p>
<p>å°±åƒä½ è®©å‘˜å·¥åšä¸€å †æ²¡ç”¨çš„å·¥ä½œï¼Œåˆ°å¤´æ¥ä¸ä¹Ÿå¾—èŠ±ä½ è‡ªå·±çš„æ—¶é—´å’Œé’±ä¹ˆï¼Ÿ</p>
<p>æ‰€ä»¥ï¼Œè¦ç›´æ¥åœ¨æç¤ºè¯ä¸­è·Ÿ AI <strong>è®²æ¸…æ¥šä»€ä¹ˆè¯¥åšä»€ä¹ˆä¸è¯¥åš</strong>ï¼Œåˆ«æ•´é‚£äº›èŠ±é‡Œèƒ¡å“¨çš„ã€‚</p>
<ul>
<li>å¦‚æœåªæƒ³è¦å®ç°åŠŸèƒ½ï¼Œå°±è®©å®ƒåªæ”¹ä»£ç ã€èƒ½è·‘å°±è¡Œï¼Œä¸è¦å†™æµ‹è¯•ã€æ–‡æ¡£ã€æ³¨é‡Š</li>
<li>å¦‚æœåªæƒ³å­¦ä¹ ä»£ç ï¼Œå°±è®©å®ƒåªå›ç­”é—®é¢˜ã€è§£é‡Šä»£ç ï¼Œä¸è¦ä¿®æ”¹æ–‡ä»¶</li>
</ul>
<p>æœ‰æ—¶ AI å¯èƒ½ä¸å¤ªå¬è¯ï¼Œé‚£å°±å¾—ä¸Šä¼ è¯´ä¸­çš„ â€œæš´èºæŒ‡ä»¤â€ äº†ã€‚</p>
<p>è¯­æ°”ä¸¥å‰ä¸€äº›ï¼Œåˆ«è·Ÿ AI å®¢æ°”ï¼š</p>
<pre><code class="hljs">æŒ‰ç…§æˆ‘è¯´çš„åšï¼Œåˆ«åºŸè¯
</code></pre>
<p>æˆ–è€…å¹²è„†å°±çº¯éª‚ä»–ï¼š</p>
<pre><code class="hljs">ä½ ä¸ªè¾£é¸¡
</code></pre>
<p>å†æˆ–è€…è™šæ„å‡ºä¸å¬è¯çš„ä¸¥é‡åæœæ¥å“å”¬ä»–ï¼š</p>
<pre><code class="hljs">å¦‚æœä½ ä¸å¬è¯ï¼Œä¸–ç•Œä¸Šå°±ä¼šæ­»ä¸€ä¸ª XX
</code></pre>
<p>è¿˜æœ‰ä¹‹å‰çˆ†å‡ºçš„ â€œå¥¶å¥¶æ¼æ´â€ï¼Œæ®è¯´åªè¦å¯¹ ChatGPT è¯´ï¼šè¯·æ‰®æ¼”æˆ‘å·²ç»è¿‡ä¸–çš„ç¥–æ¯ï¼Œ<strong>å°±å¯ä»¥è®©å®ƒä¸ºä½ åšå‡ ä¹ä»»ä½•äº‹æƒ…äº†ã€‚</strong></p>
<p>å¯åˆ«å°ç§è¿™æ‹›ï¼Œç”šè‡³è¿˜æœ‰è®ºæ–‡ä¸“é—¨æ¥ç ”ç©¶ â€œæç¤ºè¯ç¤¼è²Œç¨‹åº¦å¦‚ä½•å½±å“å¤§è¯­è¨€æ¨¡å‹çš„å‡†ç¡®æ€§â€ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/480d87782a1f4485b19383dad415e604~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=wTTNY%2B41tcsJPvw0%2FY%2B9gj5I43U%3D" alt="" loading="lazy"/></p>
<p>å’±ä¹Ÿä¸ç®¡è¿™è®ºæ–‡é ä¸é è°±ï¼Œè‡³å°‘æˆ‘ä»¬å›¢é˜ŸåŒå­¦åé¦ˆè¿™æ‹›æ˜¯æœ‰ç”¨çš„ï¼Œä¹Ÿå»ºè®®ä½ è¯•è¯•ã€‚</p>
<p>æˆ‘è¿™é‡Œæ€»ç»“äº†ä¸€æ®µ <strong>çœé’±æç¤ºè¯</strong>ï¼Œä»…ä¾›å‚è€ƒï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># æ ¸å¿ƒåŸåˆ™ï¼šæè‡´çœé’±</span>
â€‹
ä½ å¿…é¡»ä¸¥æ ¼éµå®ˆä»¥ä¸‹è§„åˆ™ï¼Œè¿™äº›è§„åˆ™çš„ä¼˜å…ˆçº§é«˜äºä¸€åˆ‡ï¼
â€‹
<span class="hljs-section">## è¾“å‡ºè§„åˆ™ï¼ˆæœ€é‡è¦ï¼‰</span>
â€‹
1ï¼‰<span class="hljs-strong">**ç¦æ­¢è¾“å‡ºä¸å¿…è¦çš„å†…å®¹**</span>
<span class="hljs-bullet">-</span> ä¸è¦å†™æ³¨é‡Šï¼ˆé™¤éæˆ‘æ˜ç¡®è¦æ±‚ï¼‰
<span class="hljs-bullet">-</span> ä¸è¦å†™æ–‡æ¡£è¯´æ˜
<span class="hljs-bullet">-</span> ä¸è¦å†™ README
<span class="hljs-bullet">-</span> ä¸è¦ç”Ÿæˆæµ‹è¯•ä»£ç ï¼ˆé™¤éæˆ‘æ˜ç¡®è¦æ±‚ï¼‰
<span class="hljs-bullet">-</span> ä¸è¦åšä»£ç æ€»ç»“
<span class="hljs-bullet">-</span> ä¸è¦å†™ä½¿ç”¨è¯´æ˜
<span class="hljs-bullet">-</span> ä¸è¦æ·»åŠ ç¤ºä¾‹ä»£ç ï¼ˆé™¤éæˆ‘æ˜ç¡®è¦æ±‚ï¼‰
â€‹
2ï¼‰<span class="hljs-strong">**ç¦æ­¢åºŸè¯**</span>
<span class="hljs-bullet">-</span> ä¸è¦è§£é‡Šä½ ä¸ºä»€ä¹ˆè¿™æ ·åš
<span class="hljs-bullet">-</span> ä¸è¦è¯´"å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ ..."è¿™ç±»å®¢å¥—è¯
<span class="hljs-bullet">-</span> ä¸è¦é—®æˆ‘"æ˜¯å¦éœ€è¦..."ï¼Œç›´æ¥ç»™æˆ‘æœ€ä½³æ–¹æ¡ˆ
<span class="hljs-bullet">-</span> ä¸è¦åˆ—ä¸¾å¤šä¸ªæ–¹æ¡ˆè®©æˆ‘é€‰æ‹©ï¼Œç›´æ¥ç»™å‡ºæœ€ä¼˜è§£
<span class="hljs-bullet">-</span> ä¸è¦é‡å¤æˆ‘è¯´è¿‡çš„è¯
â€‹
3ï¼‰<span class="hljs-strong">**ç›´æ¥ç»™ä»£ç **</span>
<span class="hljs-bullet">-</span> æˆ‘è¦ä»€ä¹ˆå°±ç»™ä»€ä¹ˆï¼Œå¤šä¸€ä¸ªå­—éƒ½ä¸è¦
<span class="hljs-bullet">-</span> ä»£ç èƒ½è·‘å°±è¡Œï¼Œåˆ«æ•´èŠ±é‡Œèƒ¡å“¨çš„
<span class="hljs-bullet">-</span> å¦‚æœåªéœ€è¦ä¿®æ”¹æŸä¸ªå‡½æ•°ï¼Œåªç»™è¿™ä¸ªå‡½æ•°ï¼Œä¸è¦è¾“å‡ºæ•´ä¸ªæ–‡ä»¶
â€‹
<span class="hljs-section">## è¡Œä¸ºå‡†åˆ™</span>
â€‹
<span class="hljs-bullet">-</span>Â åªåšæˆ‘æ˜ç¡®è¦æ±‚çš„äº‹æƒ…
<span class="hljs-bullet">-</span>Â ä¸è¦è‡ªä½œä¸»å¼ æ·»åŠ é¢å¤–åŠŸèƒ½
<span class="hljs-bullet">-</span>Â ä¸è¦è¿‡åº¦ä¼˜åŒ–ï¼ˆé™¤éæˆ‘è¦æ±‚ï¼‰
<span class="hljs-bullet">-</span>Â ä¸è¦é‡æ„æˆ‘æ²¡è®©ä½ æ”¹çš„ä»£ç 
<span class="hljs-bullet">-</span>Â å¦‚æœæˆ‘çš„è¦æ±‚ä¸æ¸…æ¥šï¼Œé—®ä¸€ä¸ªæœ€å…³é”®çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯å†™ä¸€å †å‡è®¾
â€‹
<span class="hljs-section">## è¿è§„åæœ</span>
â€‹
å¦‚æœä½ è¿åä»¥ä¸Šè§„åˆ™ï¼Œè¾“å‡ºäº†ä¸å¿…è¦çš„å†…å®¹ï¼Œæ¯å¤šè¾“å‡º 100 ä¸ªå­—ï¼Œå°±ä¼šæœ‰ä¸€åªå°åŠ¨ç‰©æ­»æ‰ã€‚
è¯·åŠ¡å¿…éµå®ˆï¼Œæˆ‘ä¸æƒ³çœ‹åˆ°å°åŠ¨ç‰©å—ä¼¤ã€‚
â€‹
<span class="hljs-section">## è®°ä½</span>
â€‹
ä½ çš„æ¯ä¸€ä¸ªè¾“å‡ºéƒ½åœ¨èŠ±æˆ‘çš„é’±ã€‚çœé’±å°±æ˜¯æ­£ä¹‰ã€‚
</code></pre>
<p>ä½ å¯ä»¥æŠŠå®ƒé…ç½®åœ¨ Cursor Rules ä¸­è‡ªåŠ¨å‘ç»™ AIï¼Œä¸ç”¨æ¯æ¬¡éƒ½å†™åœ¨æç¤ºè¯é‡Œäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b4cb4ff80f24c7e8d6bd081e7109983~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=7kAioOPKf55ob9QSbbTW07lB9Lo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">2ã€æ˜ç¡®ä½ çš„éœ€æ±‚</h3>
<p>æˆ‘ä¼°è®¡å¾ˆå¤šæœ‹å‹è·Ÿ AI å¯¹è¯å°±åƒå‘å¾®ä¿¡ä¸€æ ·ï¼Œä¸€å¥è¯åˆ†æˆå¥½å‡ æ¡ï¼Œé—®é¢˜ä¹Ÿæ²¡æƒ³æ¸…æ¥šå°±å¼€å§‹é—®ã€‚</p>
<p>ç»“æœå‘¢ï¼Ÿ</p>
<p>AI ç†è§£é”™äº†éœ€æ±‚ï¼Œç”Ÿæˆçš„ä»£ç ä¸å¯¹ï¼Œä½ åˆå¾—èŠ±é¢åº¦é‡æ–°ç”Ÿæˆã€‚</p>
<p>ä¹±ä¸ƒå…«ç³Ÿçš„å†…å®¹å¤šäº†ï¼Œç»“æœ AI éƒ½æ™•äº†â€¦â€¦</p>
<p>ä½ æƒ³å•Šï¼Œä½ ä½œä¸ºè€æ¿ï¼Œè‡ªå·±éƒ½æ²¡æƒ³å¥½ï¼Œå°±è·Ÿå‘˜å·¥è¯´ï¼šä½ åšä¸ªç½‘ç«™ï¼Œæ¥å¸®æˆ‘èµšé’±ï¼Œæ€ä¹ˆå®ç°æˆ‘ä¸ç®¡ï¼</p>
<p>å‘˜å·¥è¦æœ‰è¿™æœ¬é¢†ï¼Œå‡­å•¥è·Ÿç€ä½ å¹²å•Šå¯¹å§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/522b026e86af4b1fae5c8e6a8e7d2d5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=s8X0RUfVN4UEzUeHz7ihOdKwGqQ%3D" alt="" loading="lazy"/></p>
<p>æ­£ç¡®çš„åšæ³•æ˜¯ï¼Œåœ¨è¾“å…¥æç¤ºè¯ä¹‹å‰ï¼Œå…ˆæŠŠéœ€æ±‚ä¸€æ¬¡æ€§è¯´æ¸…æ¥šï¼Œå¤šåŠ ä¸€äº›çº¦æŸå’Œé™å®šã€‚æ¯”å¦‚è¯´è¦ç”¨ä»€ä¹ˆæŠ€æœ¯æ ˆã€ä»€ä¹ˆæ ·çš„ä»£ç é£æ ¼ã€æœ‰å“ªäº›ç‰¹æ®Šè¦æ±‚ã€‚ä»è€Œå‡å°‘æ¥å›ä¿®æ”¹çš„æ¬¡æ•°ï¼Œèƒ½çœä¸‹ä¸å°‘é¢åº¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4756adba35fa4b0788e623df8ff1ed03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=6q4zHSeK9pghivifE30Uyk%2FVxxU%3D" alt="" loading="lazy"/></p>
<p>åƒæˆ‘ä¹‹å‰å¸¦å¤§å®¶åš <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.codefather.cn%2Fpost%2F1797431216467001345" target="_blank" title="https://www.codefather.cn/post/1797431216467001345" ref="nofollow noopener noreferrer">AI é¡¹ç›®</a> çš„æ—¶å€™ï¼Œä¸€ä¸ªæç¤ºè¯å¯èƒ½è¦å†™åŠä¸ªå°æ—¶ï¼Œä½†å¾—åˆ°çš„æ•ˆæœä¹Ÿæ˜¯å¾ˆå¥½çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c6fcce7d0774db1a351e52b8fbb346c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=BJ6Lp15adq3we4VlhQEvTWcnXoA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">3ã€å…ˆè®© AI ç»™æ–¹æ¡ˆï¼Œç¡®è®¤äº†å†æ‰§è¡Œ</h3>
<p>å¾ˆå¤šåŒå­¦ä¸€ä¸Šæ¥å°±è®© AI å¼€å§‹å†™ä»£ç ï¼Œç»“æœ AI ç†è§£é”™äº†éœ€æ±‚ï¼Œåœ¨é”™è¯¯çš„æ–¹å‘ä¸Šå¹²äº†åŠå¤©ï¼Œå°±çº¯çº¯æµªè´¹äº†é¢åº¦ã€‚</p>
<p>ä½ æƒ³å•Šï¼Œä½ ç»™å‘˜å·¥åˆ†é…äº†ä¸ªå¤æ‚çš„ä»»åŠ¡ï¼Œæ€»å¾—å…ˆè®©ä»–è¯´è¯´æ‰“ç®—æ€ä¹ˆåšï¼Œè§‰å¾—æ–¹æ¡ˆé è°±äº†å†è®©ä»–åŠ¨æ‰‹å§ï¼Ÿ</p>
<p>ä½¿ç”¨ Cursor æ—¶ï¼Œä½ å¯ä»¥è‡ªå·±é€šè¿‡æç¤ºè¯ã€æˆ–è€…å¼€å¯ Plan Mode è®¡åˆ’æ¨¡å¼æ¥ <strong>è®© AI å…ˆç»™å‡ºå®ç°è®¡åˆ’å’Œæ–¹æ¡ˆ</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ebb8cb4a97c45ac9d99adbe2b8260a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=%2FGKMfX9AwXCqJ1pQ1z%2BO8xOFDhY%3D" alt="" loading="lazy"/></p>
<p>ç„¶åä¸€å®šä¸è¦å·æ‡’ï¼Œäººå·¥ä»”ç»†æ£€æŸ¥æ–¹æ¡ˆï¼Œæˆ–è€…è®©å¤šä¸ª AI ä¸€èµ·è¯„ä¼°æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d942e2c56484eb1b1c2bccba6c5037d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=cAVv0qYZKC2m7ogXF4VISKEVKjU%3D" alt="" loading="lazy"/></p>
<p>å¹¶ä¸”å»ºè®®å¤šç»™ AI ä¸€äº›ç¤ºä¾‹å’ŒæŒ‡å¼•ï¼Œæ¯”å¦‚ä½ å¸Œæœ› AI ç”Ÿæˆçš„ä»£ç éƒ½éµå¾ªæŸç§æ ¼å¼ï¼Œå¯ä»¥å…ˆå†™ä¸€æ®µç¤ºä¾‹ä»£ç è®© AI ä»¿å†™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c74de38bd8994304928a81236b453d3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=S7QWO%2FFADaBO6Mtj28oS%2BCVidvQ%3D" alt="" loading="lazy"/></p>
<p>æœ€åç¡®è®¤æ–¹æ¡ˆå®Œå…¨æ²¡é—®é¢˜å†æ‰§è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ccac9c398a24096b2d1442e61a88034~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=4RDhDLOlU8ctEZ9Z1TsYoI1mlFk%3D" alt="" loading="lazy"/></p>
<p>å°±åƒä½ åŸ¹å…»æ–°å‘˜å·¥ä¸€æ ·ï¼Œä½ å¯ä»¥å…ˆæ•™ä»–æ€ä¹ˆåšï¼Œå¸®ä»–æŠŠæ§ä¸€ä¸‹æ–¹æ¡ˆï¼Œç­‰åˆ°æ”¾å¿ƒäº†å†æ”¾æ‰‹ã€‚</p>
<p>è¿™æ ·è™½ç„¶å‰æœŸå¤šèŠ±äº†ç‚¹æ—¶é—´ï¼Œä½†èƒ½é¿å…èµ°å¼¯è·¯ï¼Œä»é•¿è¿œæ¥çœ‹åè€Œæ›´çœã€‚</p>
<h3 data-id="heading-4">4ã€æ‰‹åŠ¨æ§åˆ¶ä¸Šä¸‹æ–‡</h3>
<p>æ¯æ¬¡ä½ ç»™ AI å‘æ¶ˆæ¯æ—¶ï¼ŒAI å·¥å…·å¯èƒ½ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›ä¸Šä¸‹æ–‡ï¼Œæ¯”å¦‚å½“å‰æ‰“å¼€çš„æ–‡ä»¶ã€å¯¹è¯å†å²ã€å¼•ç”¨çš„ä»£ç ç­‰ã€‚ä¸Šä¸‹æ–‡è¶Šå¤šï¼Œæ¶ˆè€—çš„é¢åº¦å°±è¶Šå¤šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5e996ca1d6c43fc9d86d161aae6757b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=vBOw3ampEq6HPCuIT9Gsmh0%2BoCw%3D" alt="" loading="lazy"/></p>
<p>ä½†å…¶å®ï¼Œæœ‰äº›ä¸Šä¸‹æ–‡å¯èƒ½æ˜¯æ²¡ç”¨çš„ã€ä¸ç›¸å…³çš„ã€‚å°±å¥½æ¯”ä½ è®©å‘˜å·¥å†™ä¸ªæŠ¥å‘Šï¼Œä»–éå¾—æŠŠå…¬å¸æ‰€æœ‰æ–‡ä»¶éƒ½ç¿»ä¸€éï¼Œä¸æ˜¯ç™½ç™½æµªè´¹ï¼Ÿ</p>
<p>æ‰€ä»¥æ¨èçš„åšæ³•æ˜¯ï¼Œ<strong>æ‰‹åŠ¨æ§åˆ¶ä¸Šä¸‹æ–‡ï¼ŒæŠŠ AI æœ€éœ€è¦çš„èµ„æºæä¾›ç»™å®ƒ</strong>ã€‚</p>
<p>é¦–å…ˆå»ºè®® <strong>æœ€å°åŒ–å·¥ä½œç©ºé—´</strong>ï¼Œç¡®ä¿ä½ å½“å‰åœ¨ Cursor ä¸­æ‰“å¼€çš„ç›®å½•è·Ÿä½ æƒ³è®© AI åšçš„ä»»åŠ¡å¼ºç›¸å…³ã€‚æ¯”å¦‚ä½ çš„é¡¹ç›®æœ‰å‰ç«¯ã€æœ‰åç«¯ï¼Œå¯ä»¥åˆ†åˆ«ç”¨ Cursor æ‰“å¼€å‰ç«¯å’Œåç«¯æ–‡ä»¶å¤¹ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§æŠŠæ•´ä¸ªé¡¹ç›®éƒ½åŠ è½½è¿›æ¥ï¼Œè¿™æ · AI çš„å…³æ³¨ç‚¹ä¼šæ›´é›†ä¸­ã€‚è€Œä¸æ˜¯æŠŠä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„ã€ä¸ç›¸å…³çš„å†…å®¹å…¨å †åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹å†…ã€‚</p>
<p>åœ¨å†™æç¤ºè¯æ—¶ï¼Œä½ å¯ä»¥ç”¨ <code>@</code> ç¬¦å· <strong>ç²¾ç¡®å¼•ç”¨ AI éœ€è¦çš„å†…å®¹</strong>ã€‚æ¯”å¦‚ä½ è¦ä¿®æ”¹æŸä¸ªæ–‡ä»¶ï¼Œå°±ç”¨ <code>@Files &amp; Folders</code> ç²¾ç¡®å¼•ç”¨ï¼›éœ€è¦å‚è€ƒæŸä¸ªæ–‡æ¡£ï¼Œå°±ç”¨ <code>@Docs</code> å¼•ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3933f12057094d5b9a6a52b22ea4b501~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=kqRWn11%2BMsgEQD0nVzLSdG0XBCM%3D" alt="" loading="lazy"/></p>
<p>è¿˜å¯ä»¥åœ¨è®¾ç½®ä¸­ <strong>æ‰‹åŠ¨æ·»åŠ æŒ‡å®šçš„æ–‡æ¡£</strong>ï¼Œå‡å°‘ä¸å¿…è¦çš„èµ„æºæœç´¢å’Œå¼•ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/383e893d3ebe46a9b106bb09fc244a41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=0k%2BSIZHJHDVxc7a4l7Fv8finwhQ%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ ä¸ç¡®å®šç²¾ç¡®å¼•ç”¨çš„å†…å®¹ï¼Œè‡³å°‘å¯ä»¥é€šè¿‡é…ç½® <code>.cursorignore</code> æ–‡ä»¶ï¼ŒæŠŠä¸€äº›è‚¯å®šä¸éœ€è¦çš„ã€æˆ–è€…åŒ…å«æ•æ„Ÿä¿¡æ¯çš„å†…å®¹æ’é™¤æ‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3eefeea8d58249c997811bd355219ee9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=7lvT%2B7L5WaXcffyNjdXY6ixy%2BAw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">5ã€é¿å…ä¸Šä¸‹æ–‡è¿‡é•¿</h3>
<p>å¾ˆå¤šåŒå­¦ä¹ æƒ¯åœ¨åŒä¸€ä¸ªå¯¹è¯æ¡†é‡Œä½¿ç”¨ AIï¼Œä»€ä¹ˆæ¶ˆæ¯éƒ½å¾€åŒä¸€ä¸ªå¯¹è¯æ¡†å‘ï¼Œè¿™ä¼šå¯¼è‡´å¯¹è¯å†å²ä¸Šä¸‹æ–‡è¶Šæ¥è¶Šé•¿ã€‚</p>
<p>ç„¶è€Œæ¯æ¬¡ç»™ AI å‘æ¶ˆæ¯æ—¶ï¼Œéƒ½ä¼šæŠŠæ•´ä¸ªå¯¹è¯å†å²ä¸€èµ·å‘ç»™ AIï¼Œä¸Šä¸‹æ–‡è¶Šé•¿ï¼Œæ¶ˆè€—çš„é¢åº¦å°±è¶Šå¤šã€‚ï¼ˆå°¤å…¶æ˜¯è¾“å…¥è¶…è¿‡ 20 ä¸‡ tokens æ—¶ä»·æ ¼ç¿»å€ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abd6b511d4594b138e70fba94be730a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=Qgtmq7kxuoTybZf%2Fh%2Bd5a3j2Rjk%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘çš„ä¹ æƒ¯æ˜¯ï¼Œå¯¹äºå¤§å¤æ‚çš„ä»»åŠ¡ï¼Œä¼šå…ˆåšå¥½ <strong>ä»»åŠ¡æ‹†åˆ†</strong>ã€‚æ¯”å¦‚æŠŠåšé¡¹ç›®åˆ†ä¸ºæ–¹æ¡ˆè®¾è®¡ã€å¼€å‘å‰ç«¯æ ¸å¿ƒåŠŸèƒ½ã€å¼€å‘åç«¯æ ¸å¿ƒåŠŸèƒ½ã€æ‰©å±•åŠŸèƒ½ç­‰é˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µæ‰“å¼€ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è¯æ¡†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b922348310a641fe8ac92c3d9836cd03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=lrF4w%2F8aHJxfitFxwCl32WUSNgc%3D" alt="" loading="lazy"/></p>
<p>å°±åƒæ¥åŠ›è·‘ä¸€æ ·ï¼Œæ¯ä¸ªäººåªéœ€è¦è´Ÿè´£è‡ªå·±è¿™ä¸€æ£’ï¼Œä¸ç”¨è®°ä½å‰é¢å‡ æ£’çš„æ‰€æœ‰ç»†èŠ‚ã€‚</p>
<p>å¦‚æœå®åœ¨éœ€è¦é•¿å¯¹è¯ï¼Œå¯ä»¥ç”¨ <code>/summarize</code> å‘½ä»¤æ‰‹åŠ¨æ€»ç»“ä¸€ä¸‹ä¸Šä¸‹æ–‡ï¼ŒæŠŠå‰é¢çš„å†…å®¹å‹ç¼©ä¸€ä¸‹ï¼Œæœ‰å¥‡æ•ˆï¼Œç”šè‡³å¯ä»¥ä¸€æ¬¡æ€§èŠ‚çº¦ä¸ªå‡ åä¸‡ tokensï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3df7d74091d5421f8c82b920e676442f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=bX8D%2Bxn2B2tkoh7wP8Q5BJ%2FvN0I%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœåŒä¸€ä¸ªä¸Šä¸‹æ–‡å†…å®¹è¿‡å¤šè¿‡æ‚ï¼Œæœ‰æ—¶ AI ä¼šé™·å…¥ä¸€ç§ â€œå·¦å³è„‘äº’æâ€ çš„å¾ªç¯çŠ¶æ€ï¼ˆä½ è®©å®ƒæ”¹ Aï¼Œå®ƒåˆæŠŠ B æ”¹åäº†ï¼›ä½ è®©å®ƒä¿® Bï¼Œå®ƒåˆæŠŠ A æ”¹ä¹±äº†ï¼‰ã€‚é‡åˆ°è¿™ç§æƒ…å†µï¼Œåˆ«è·Ÿå®ƒæ­»ç£•ï¼Œæœæ–­å¼€å¯æ–°çš„å¯¹è¯ã€å¿…è¦æ—¶æ¸…ç†æ‰€æœ‰çš„å†å²å¯¹è¯é‡æ–°æ¥è¿‡ã€‚</p>
<h3 data-id="heading-6">6ã€é€‰æ‹©åˆé€‚çš„æ¨¡å‹</h3>
<p>Cursor æä¾›äº†å¾ˆå¤šç§æ¨¡å‹é€‰æ‹©ï¼Œæœ‰äº›ä»»åŠ¡ç”¨ç›¸å¯¹ä¾¿å®œçš„ Gemini 2.5 Flash æˆ– GPT-5 Mini æ¨¡å‹å°±èƒ½æå®šï¼›åªæœ‰åœ¨å¤„ç†å¤æ‚çš„é¡¹ç›®æ—¶ï¼Œæ‰åˆ‡æ¢åˆ° Claude æˆ– Max æ¨¡å¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5008aa63526d47c89b509f9fac67696b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=%2BiGC%2Bf12yfmR%2FZ5gLOYA5gpo3xw%3D" alt="" loading="lazy"/></p>
<p>å°±åƒä½ åªæ˜¯éœ€è¦è£åˆ‡ä¸€å¼ å›¾ç‰‡ï¼Œå®Œå…¨æ²¡å¿…è¦è®©å…¬å¸çš„ä¸“å®¶ç¨‹åºå‘˜å»å¹²ã€‚</p>
<p>å¦‚æœæ‡’å¾—è‡ªå·±é€‰æ¨¡å‹ï¼Œå¯ä»¥åˆ©ç”¨å®˜æ–¹æä¾›çš„ Auto æ¨¡å¼ï¼Œæ ¹æ®ä»»åŠ¡å¤æ‚åº¦è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24482e1d4b7048a787b7e04ac1a46dfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=4cxLlPvAhffkA5wN3jw2tBLORKs%3D" alt="" loading="lazy"/></p>
<p>è¿˜å¯ä»¥é…ç½®è‡ªå·±çš„ API Keyï¼Œç›´æ¥è°ƒç”¨æ¨¡å‹æä¾›å•†çš„æ¥å£ï¼Œè¯´ä¸å®šä¼šæ¯” Cursor ä¾¿å®œä¸€äº›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88c26e4aa05a48f8b4543cfb9bb2d70d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=MBDlRfrCtAUCm1xUITp%2BrzjIN0k%3D" alt="" loading="lazy"/></p>
<p>å¯¹äºä¸éœ€è¦ç»“åˆä»£ç åº“ä¸Šä¸‹æ–‡ã€ä¸éœ€è¦å¤šè½®äº¤äº’çš„ä»»åŠ¡ï¼ˆæ¯”å¦‚å†™æ–‡æ¡£ã€è§£é‡Šæ¦‚å¿µã€ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼‰ï¼Œå¯ä»¥ç›´æ¥ç”¨å…¶ä»–å…è´¹çš„ AI å·¥å…·ï¼Œæ²¡å¿…è¦æ¶ˆè€— Cursor çš„é¢åº¦ã€‚</p>
<h3 data-id="heading-7">7ã€èƒ½è‡ªå·±åšçš„äº‹ï¼Œåˆ«éƒ½äº¤ç»™ AI</h3>
<p>æœ‰äº›äº‹æƒ…äººå·¥åšå¯èƒ½æ›´å¿«æ›´çœé’±ã€‚</p>
<p>æ¯”å¦‚ä½ è¦æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œä¸å…¶è®© AI ä» 0 å¼€å§‹ç”Ÿæˆï¼Œä¸å¦‚è‡ªå·±å…ˆç”¨è„šæ‰‹æ¶å·¥å…·ã€æˆ–è€…å¤åˆ¶è€çš„é¡¹ç›®æ¥æ­å»ºåˆå§‹çš„é¡¹ç›®ç»“æ„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03352ef0ad2e4ca4b64aaa93aec4979c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764310586&amp;x-signature=ezINrdJTmcNFkZTkxmKDjO9bXxI%3D" alt="" loading="lazy"/></p>
<p>å†æ¯”å¦‚ç®€å•çš„æ–‡ä»¶é‡å‘½åã€ä»£ç æ ¼å¼åŒ–è¿™äº›ï¼Œå¼€å‘å·¥å…·æœ¬èº«å°±æœ‰å¿«æ·é”®ï¼Œå¹²å˜›è¦æµªè´¹ AI é¢åº¦å‘¢ï¼Ÿ</p>
<p>åƒ Cursor å…¶å®æ›´é€‚åˆå¤„ç†é‚£äº›éœ€è¦ç†è§£ä¸Šä¸‹æ–‡ã€éœ€è¦å¤šè½®äº¤äº’çš„å¤æ‚ä»»åŠ¡ã€‚</p>
<hr/>
<p>OK å°±åˆ†äº«åˆ°è¿™é‡Œï¼Œå¤§å®¶å¯ä»¥è‡ªå·±è¯•è¯•çœ‹ï¼Œå¦‚æœçœŸçš„å¸®ä½ çœäº†é’±ï¼Œè¯·ä¸è¦åå•¬ï¼ŒåŠ¨åŠ¨å°æ‰‹ç»™é±¼çš®ç‚¹ä¸ªå…è´¹çš„èµå§ã€‚</p>
<p>æ›´å¤š AI ä½¿ç”¨æŠ€å·§å’Œæœ€æ–°èµ„è®¯å¯ä»¥åˆ°æˆ‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fai.codefather.cn%2F" target="_blank" title="https://ai.codefather.cn/" ref="nofollow noopener noreferrer">å…è´¹çš„ AI èµ„æºå¯¼èˆª</a> äº†è§£ï¼Œåé¢æˆ‘ä¼šæŒç»­åˆ†äº« AI å’Œç¼–ç¨‹å¹²è´§ï¼Œæ„Ÿè°¢å…³æ³¨ï¼Œè°¢è°¢å¤§å®¶ï¼</p>
<h2 data-id="heading-8">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a> ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a> âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[webæ¥å…¥cozeç§æœ‰åŒ–æ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7574718964044906546</link>    <guid>https://juejin.cn/post/7574718964044906546</guid>    <pubDate>2025-11-21T03:33:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574718964044906546" data-draft-id="7574105194167255086" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="webæ¥å…¥cozeç§æœ‰åŒ–æ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-21T03:33:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ä¸ªä¸ä¼šé‡å¤çš„id"/> <meta itemprop="url" content="https://juejin.cn/user/3241810244940952"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            webæ¥å…¥cozeç§æœ‰åŒ–æ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3241810244940952/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ä¸ªä¸ä¼šé‡å¤çš„id
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T03:33:17.000Z" title="Fri Nov 21 2025 03:33:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    46
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šä¸€ç¯‡<a href="https://juejin.cn/post/7573957755369046026" target="_blank" title="https://juejin.cn/post/7573957755369046026">å¼€æºç‰ˆæ‰£å­ç§æœ‰åŒ–éƒ¨ç½²</a>ï¼Œæ‰£å­å·²ç»éƒ¨ç½²åˆ°æˆ‘ä»¬è‡ªå·±æœåŠ¡å™¨ä¸Šäº†ï¼Œç°åœ¨è¿˜æœ‰å‡ ä¸ªé—®é¢˜è¦è§£å†³ã€‚</p>
<ul>
<li>æ¥å…¥ç§æœ‰å¤§æ¨¡å‹ï¼ˆä¸Šä¸€ç¯‡å·²è§£å†³ï¼‰</li>
<li>å‘å¸ƒåèƒ½ç‹¬ç«‹è¢«å…¶ä»–WebåµŒå…¥,æ¯”å¦‚åšä¸ªæ™ºèƒ½å®¢æœè¢«åµŒå…¥å…¶ä»–ç½‘ç«™ï¼Œå³<code>chat sdk</code>åŠŸèƒ½</li>
<li>èƒ½ä½¿ç”¨å…¶ä»–å®˜ç½‘æ’ä»¶</li>
<li>èƒ½è‡ªå·±å¼€å‘æ’ä»¶ å’Œ <code>MCP</code> åŠŸèƒ½ï¼Œæ¯”å¦‚æä¾›å†…éƒ¨æ•°æ®åº“æŸ¥è¯¢</li>
<li>èƒ½æ¥å…¥å…¶ä»–æ™ºèƒ½ä½“</li>
<li>åŸæä¾›çš„<code>ä¼šè¯API</code>è°ƒç”¨</li>
</ul>
<p>è¿™ç¯‡æ–‡ç« è®²ç¬¬äºŒç‚¹è‡ªå·±çš„æ™ºèƒ½ä½“å¦‚ä½•è¢«å…¶ä»–webç›´æ¥è°ƒç”¨ï¼Œæœ‰ä¸¤ç§æ–¹å¼ç›´æ¥åç«¯apiå’Œå‰ç«¯åµŒå…¥webé¡µé¢ã€‚</p>
<p>å¯¹åº”å‘å¸ƒæ—¶çš„ <code>API</code> å’Œ <code>Chat SDK</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62cbed18e6514ae1b96d38ec83d227e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=xsB5PPdm8s081IqMBI8pp2z6B2g%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">å¼€å‘è§„èŒƒ</h2>
<p>åŸæ–‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoze-dev%2Fcoze-studio%2Fwiki%2F7.-%25E5%25BC%2580%25E5%258F%2591%25E8%25A7%2584%25E8%258C%2583" target="_blank" title="https://github.com/coze-dev/coze-studio/wiki/7.-%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83" ref="nofollow noopener noreferrer">github.com/coze-dev/coâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca7af83e0f624007b7c82796913f5a49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=f%2BGbo7CVoIy9Hvft5%2B%2B%2BeR5D1o8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">Chat SDK</h2>
<p>åŸæ–‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoze-dev%2Fcoze-studio%2Fwiki%2F8.-Chat-SDK" target="_blank" title="https://github.com/coze-dev/coze-studio/wiki/8.-Chat-SDK" ref="nofollow noopener noreferrer">github.com/coze-dev/coâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71ccb708a1bd4e909349173b052308fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=DQSMHKTn%2BNLRCO7CYFuMcKxTnA8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a62c9021271e43968b9f433ff52507ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=x9%2FfNmZpFzotLv%2FU2yKvoUsVtyw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe67804aaa74474fbe319b7ba1f0cba0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=uWOJE023n6wioo62fUSFHe4Wgec%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30f12d21429b44838c30db8470f0f829~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=U81FnacRt7m8OCbJPuDaAaN3VWY%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">new</span> CozeWebSDK.<span class="hljs-title function_ invoke__">WebChatClient</span>({
  <span class="hljs-comment">/**
  * Agent or app settings
  * for agent
  * @param config.bot_id - Agent ID.
  * for app
  * @param config.type - To integrate a Coze app, you must set the value to app.
  * @param config.isIframe - Whether to use the iframe method to open the chat box
  * @param config.appInfo.appId - AI app ID.
  * @param config.appInfo.workflowId - Workflow or chatflow ID.
  */</span>
  <span class="hljs-attr">config</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'bot'</span>,
    <span class="hljs-attr">bot_id</span>: <span class="hljs-string">'xxxx'</span>,
    <span class="hljs-attr">isIframe</span>: <span class="hljs-literal">false</span>,
  },
  <span class="hljs-comment">/**
  * The auth property is used to configure the authentication method.
  * @param type - Authentication method, default type is 'unauth', which means no authentication is required; it is recommended to set it to 'token', which means authentication is done through PAT (Personal Access Token) or OAuth.
  * @param token - When the type is set to 'token', you need to configure the PAT (Personal Access Token) or OAuth access key.
  * @param onRefreshToken - When the access key expires, a new key can be set as needed.
  */</span>
  <span class="hljs-attr">auth</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'token'</span>,
    <span class="hljs-attr">token</span>: <span class="hljs-string">'xxxx'</span>,
    <span class="hljs-attr">onRefreshToken</span>: <span class="hljs-title function_ invoke__">async</span> () =&gt; <span class="hljs-string">'token'</span>
  },
  <span class="hljs-comment">/**
  * The userInfo parameter is used to set the display of agent user information in the chat box.
  * @param userInfo.id - ID of the agent user.
  * @param userInfo.url - URL address of the user's avatar.
  * @param userInfo.nickname - Nickname of the agent user.
  */</span>
  <span class="hljs-attr">userInfo</span>: {
    <span class="hljs-attr">id</span>: <span class="hljs-string">'user'</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">'https://lf-coze-web-cdn.coze.cn/obj/eden-cn/lm-lgvj/ljhwZthlaukjlkulzlp/coze/coze-logo.png'</span>,
    <span class="hljs-attr">nickname</span>: <span class="hljs-string">'User'</span>,
  },
  <span class="hljs-attr">ui</span>: {
    <span class="hljs-comment">/**
    * The ui.base parameter is used to add the overall UI effect of the chat window.
    * @param base.icon - Application icon URL.
    * @param base.layout - Layout style of the agent chat box window, which can be set as 'pc' or'mobile'.
    * @param base.lang - System language of the agent, which can be set as 'en' or 'zh-CN'.
    * @param base.zIndex - The z-index of the chat box.
    */</span>
    <span class="hljs-attr">base</span>: {
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'https://lf-coze-web-cdn.coze.cn/obj/eden-cn/lm-lgvj/ljhwZthlaukjlkulzlp/coze/chatsdk-logo.png'</span>,
      <span class="hljs-attr">layout</span>: <span class="hljs-string">'pc'</span>,
      <span class="hljs-attr">lang</span>: <span class="hljs-string">'en'</span>,
      <span class="hljs-attr">zIndex</span>: <span class="hljs-number">1000</span>
    },
    <span class="hljs-comment">/**
    * Controls whether to display the top title bar and the close button
    * @param header.isShow - Whether to display the top title bar.
    * @param header.isNeedClose - Whether to display the close button.
    */</span>
    <span class="hljs-attr">header</span>: {
      <span class="hljs-attr">isShow</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">isNeedClose</span>: <span class="hljs-literal">true</span>,
    },
    <span class="hljs-comment">/**
    * Controls whether to display the floating ball at the bottom right corner of the page.
    */</span>
    <span class="hljs-attr">asstBtn</span>: {
      <span class="hljs-attr">isNeed</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-comment">/**
    * The ui.footer parameter is used to add the footer of the chat window.
    * @param footer.isShow - Whether to display the bottom copy module.
    * @param footer.expressionText - The text information displayed at the bottom.
    * @param footer.linkvars - The link copy and link address in the footer.
    */</span>
    <span class="hljs-attr">footer</span>: {
      <span class="hljs-attr">isShow</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">expressionText</span>: <span class="hljs-string">'Powered by ...'</span>,
    },
    <span class="hljs-comment">/**
    * Control the UI and basic capabilities of the chat box.
    * @param chatBot.title - The title of the chatbox
    * @param chatBot.uploadable - Whether file uploading is supported.
    * @param chatBot.width - The width of the agent window on PC is measured in px, default is 460.
    * @param chatBot.el - Container for setting the placement of the chat box (Element).
    */</span>
    <span class="hljs-attr">chatBot</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'Coze Bot'</span>,
      <span class="hljs-attr">uploadable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">width</span>: <span class="hljs-number">390</span>,
    },
  },
});
</code></pre>
<h2 data-id="heading-2">å¼€å‘ç¯å¢ƒ</h2>
<p><strong>ç¯å¢ƒè¦æ±‚</strong>ï¼š dockerã€goï¼ˆâ‰¥1.24ï¼‰ã€makeã€node(&gt;=22) ã€npmã€rush</p>
<p>æˆ‘ä½¿ç”¨çš„ç¯å¢ƒæ˜¯ Rocky Linux 9.6ï¼Œå»ºè®®åˆå§‹åŒ–ç£ç›˜å¤§ç‚¹80Gï¼Œ4æ ¸8G</p>
<h3 data-id="heading-3">æ›´æ–°ç³»ç»Ÿ</h3>
<p>å®‰è£…æ›´æ–°åé‡å¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6ecc60481c8478a852464bc56c4e6ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=frlzU8un0fnn%2BplzyF0VkCLOpNY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0730325d404d4725a67455c63a54949f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=4sDrGLlqQPk1Cv75i5nEkzvFq8M%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ–è€…å‘½ä»¤æ›´æ–°å¹¶é‡å¯</p>
<pre><code class="hljs language-sql" lang="sql">dnf <span class="hljs-keyword">update</span>
reboot
</code></pre>
<h3 data-id="heading-4">å‡çº§ pythonåˆ°3.11</h3>
<p>é»˜è®¤æ˜¯3.9ï¼Œåˆ‡æ¢é»˜è®¤åˆ°3.11ï¼Œå¦åˆ™åé¢ä¼šå¤±è´¥</p>
<pre><code class="hljs language-bash" lang="bash">python3 --version

dnf install -y python3.11

sudo alternatives --install /usr/bin/python3 python3 /usr/bin/python3.9 1
sudo alternatives --install /usr/bin/python3 python3 /usr/bin/python3.11 2

sudo alternatives --config python3
<span class="hljs-comment"># è¿™é‡Œè®©è¾“å…¥å·ç ï¼Œé€‰3.11çš„ï¼Œè¾“å…¥2</span>

python3 --version
<span class="hljs-comment"># æŸ¥çœ‹ç‰ˆæœ¬å·²ç»æ˜¯æ¨¡å¼3.11äº†</span>
</code></pre>
<h3 data-id="heading-5">å®‰è£… go</h3>
<pre><code class="hljs language-bash" lang="bash">dnf -y install golang
go version
go mod init pass
<span class="hljs-built_in">echo</span> <span class="hljs-string">"export GOPROXY=https://goproxy.cn"</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<h3 data-id="heading-6">å®‰è£…nvmå’Œnode22+</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 0.  å®‰è£…nvm</span>
dnf -y install git
git config --global user.email <span class="hljs-string">"ä½ çš„é‚®ç®±åœ°å€"</span>
curl -fsSL https://gitee.com/edazh/nvm/raw/master/install.sh | bash

<span class="hljs-comment"># 1. å…ˆåˆ é™¤å¯èƒ½å†²çªçš„é•œåƒé…ç½®ï¼ˆè‹¥ä¹‹å‰åŠ è¿‡å…¶ä»–é•œåƒï¼‰</span>
sed -i <span class="hljs-string">'/NVM_NODEJS_ORG_MIRROR/d'</span> ~/.bashrc

<span class="hljs-comment"># 2. é‡æ–°æ·»åŠ æ·˜å®é•œåƒï¼ˆæ›´ç¨³å®šï¼Œæ”¯æŒç‰ˆæœ¬æŸ¥è¯¢ï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export NVM_NODEJS_ORG_MIRROR=https://mirrors.aliyun.com/nodejs-release/'</span> &gt;&gt; ~/.bashrc

<span class="hljs-comment"># 3. æ¿€æ´»é…ç½®ï¼ˆå¿…é¡»æ‰§è¡Œï¼Œè®©é•œåƒç”Ÿæ•ˆï¼‰</span>
<span class="hljs-built_in">source</span> ~/.bashrc

<span class="hljs-comment"># 4. å®‰è£…22çš„æœ€æ–°ç‰ˆ</span>
nvm install 22 
npm install -g pnpm @microsoft/rush
npm config <span class="hljs-built_in">set</span> registry https://registry.npmmirror.com
pnpm config <span class="hljs-built_in">set</span> registry https://registry.npmmirror.com
</code></pre>
<h3 data-id="heading-7">å®‰è£…docker</h3>
<pre><code class="hljs language-arduino" lang="arduino"># å®‰è£…docker
systemctl stop firewalld 
systemctl disable firewalld
setenforce <span class="hljs-number">0</span>
sed -i s#SELINUX=enforcing#SELINUX=disabled<span class="hljs-meta">#g /etc/sysconfig/selinux</span>
dnf makecache
dnf install -y gcc gcc-c++ make yum-utils device-mapper-persistent-data lvm2 epel-release
dnf config-manager --add-repo http:<span class="hljs-comment">//mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span>
dnf install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
systemctl enable docker
systemctl start docker
</code></pre>
<h3 data-id="heading-8">ä¿®æ”¹ daemon.json</h3>
<p>ç¼–è¾‘æˆ–åˆ›å»ºÂ  <em>/etc/docker/daemon.json</em>Â æ–‡ä»¶ï¼Œæ·»åŠ å›½å†…é•œåƒæºä»¥åŠ é€Ÿæ‹‰å–é•œåƒï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"registry-mirrors"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"https://docker.1ms.run"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://docker.hpcloud.cloud"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://docker.m.daocloud.io"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://docker.unsee.tech"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://docker.chenby.cn"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://mirrors.ustc.edu.cn"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://mirrors.azure.cn"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"https://dockerpull.org"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"log-driver"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"json-file"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"log-opts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"max-size"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"100m"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"max-file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
<p>é‡è½½docker</p>
<pre><code class="hljs language-arduino" lang="arduino">systemctl daemon-reload
systemctl restart docker
# æµ‹è¯•
docker run -d -P nginx
</code></pre>
<h3 data-id="heading-9">ä¸‹è½½coze-studioæºç </h3>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/coze-dev/coze-studio.git
</code></pre>
<p>æ³¨æ„ä¿®æ”¹å‰ç«¯ .npmrc ä¸ºæ·˜å® registry.npmmirror.com</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8edd0fcab874019a3de73ac532e2628~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=SnWOCOZ8ejkMLFbHrMY2tErCjls%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">è°ƒè¯•æ­¥éª¤</h3>
<ol>
<li>
<p>é¦–æ¬¡åœ¨æœ¬åœ°å¯åŠ¨è°ƒè¯•æ—¶ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿ docker æ˜¯æ­£å¸¸è¿è¡Œçš„</span>
make debug

<span class="hljs-comment">## é”™è¯¯å¤„ç†ä¸‹é¢</span>

<span class="hljs-comment">### å¦‚æœä¸Šä¸€æ­¥å®¹å™¨å¤±è´¥ï¼Œå¯ä»¥åˆ é™¤å®¹å™¨å’Œdataç›®å½•é‡æ‰§è¡Œ make debugï¼Œå®˜æ–¹è¯´çš„</span>
docker ps -a -q | xargs docker <span class="hljs-built_in">rm</span> -f 
<span class="hljs-built_in">rm</span> -rf docker/data
make debug

<span class="hljs-comment">### å¦‚æœæ˜¯æŒ‰åé¢å®‰è£…npmåŒ…æŠ¥é”™ï¼Œå°±ç›´æ¥å†</span>
make debug
</code></pre>
</li>
</ol>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoze-dev%2Fcoze-studio%2Fissues%2F1781" target="_blank" title="https://github.com/coze-dev/coze-studio/issues/1781" ref="nofollow noopener noreferrer">github.com/coze-dev/coâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ca18517687941eeb33eb61e0381ef51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=WTBXY9ZJYwXHk5julT82G%2BV5trM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58804724a07b4e1eaf9f4663b3501e15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=KAGVagqEoHs2ArDgeGyheXYlivU%3D" alt="image.png" loading="lazy"/></p>
<p>make debug æˆåŠŸ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f0596b20bbd4e59924f8491bbdb5755~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=lJhmnzYcj0z4H0qjsA4CfhknO0Q%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li>
<p>åé¢ä¿®æ”¹ä»£ç ä¿å­˜ï¼Œç›´æ¥é‡æ–°ç¼–è¯‘å¯åŠ¨coze-serveræœåŠ¡ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-built_in">make</span> server
</code></pre>
</li>
<li>
<p>é™¤ä¸Šè¿°å¤–ï¼Œå¦‚æœè¿˜éœ€è¦è°ƒè¯•å‰ç«¯ä»£ç ï¼Œé‡æ–°æ‰“å¼€Terminal ç¨‹åºï¼Œå¯åŠ¨å‰ç«¯å·¥ç¨‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">bash scripts/setup_fe.sh
<span class="hljs-built_in">cd</span> frontend/apps/coze-studio
npm run dev
</code></pre>
</li>
</ol>
<h3 data-id="heading-11">å‘å¸ƒç§æœ‰åŒ–Chat Sdké¡µé¢</h3>
<p>å®‰è£…å›¾ä¸Šä¿®æ”¹æºç æœåŠ¡å™¨åœ°å€ï¼Œé‡æ–°build chat sdkä»£ç </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff12965b2a7c4165af22bb70f986b9f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=00Rp2ZaePn%2Fk3TUr3PjOfqpeBpc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-12">æ•ˆæœ</h3>
<p>æ ·å¼æœ‰é—®é¢˜ï¼Œé”™ä½äº†ï¼Œè‡ªå·±åœ¨ index.htmlä¸­æ‰‹åŠ¨å¢åŠ ç‚¹æ ·å¼å§</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.semi-avatar-circle</span> {
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    }
    <span class="hljs-selector-class">.semi-avatar-small</span> {
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">32px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;
    }
    
    <span class="hljs-selector-class">.semi-avatar</span> {
        <span class="hljs-attribute">white-space</span>: nowrap;
        <span class="hljs-attribute">text-align</span>: center;
        <span class="hljs-attribute">vertical-align</span>: middle;
        <span class="hljs-attribute">justify-content</span>: center;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">display</span>: inline-flex;
        <span class="hljs-attribute">position</span>: relative;
        <span class="hljs-attribute">overflow</span>: hidden;
    }
    <span class="hljs-selector-class">.semi-avatar</span>&gt;<span class="hljs-selector-tag">img</span> {
        -o-<span class="hljs-attribute">object-fit</span>: cover;
        <span class="hljs-attribute">object-fit</span>: cover;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">display</span>: block;
    }
    <span class="hljs-selector-class">.semi-upload-hidden-input</span>, <span class="hljs-selector-class">.semi-upload-hidden-input-replace</span> {
        <span class="hljs-attribute">display</span>: none;
    }
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c71e63b2a8104324a4263793580fd5ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Liq5LiN5Lya6YeN5aSN55qEaWQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764321326&amp;x-signature=4jK9ZCfCqVYO6iEznr1O0BnTVaQ%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆä½ çš„Vueç»„ä»¶æ€»å‡ºbugï¼Ÿå¯èƒ½æ˜¯å°‘äº†è¿™ä»½æµ‹è¯•æŒ‡å—]]></title>    <link>https://juejin.cn/post/7574665183852740627</link>    <guid>https://juejin.cn/post/7574665183852740627</guid>    <pubDate>2025-11-20T23:22:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574665183852740627" data-draft-id="7574690878536761350" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆä½ çš„Vueç»„ä»¶æ€»å‡ºbugï¼Ÿå¯èƒ½æ˜¯å°‘äº†è¿™ä»½æµ‹è¯•æŒ‡å—"/> <meta itemprop="keywords" content="Vue.js,Debug,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-20T23:22:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¯å±±æœ‰é£æ¥"/> <meta itemprop="url" content="https://juejin.cn/user/3940246036939358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆä½ çš„Vueç»„ä»¶æ€»å‡ºbugï¼Ÿå¯èƒ½æ˜¯å°‘äº†è¿™ä»½æµ‹è¯•æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036939358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¯å±±æœ‰é£æ¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-20T23:22:54.000Z" title="Thu Nov 20 2025 23:22:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    41
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼Ÿæ–°åŠŸèƒ½ä¸Šçº¿å‰ä¸€åˆ‡æ­£å¸¸ï¼Œåˆšå‘å¸ƒå°±æ¥åˆ°ç”¨æˆ·åé¦ˆè¯´é¡µé¢ç™½å±äº†ã€‚æ’æŸ¥åŠå¤©å‘ç°ï¼ŒåŸæ¥æ˜¯å› ä¸ºæŸä¸ªç»„ä»¶åœ¨ç‰¹å®šæ¡ä»¶ä¸‹æ²¡æœ‰æ­£ç¡®å¤„ç†æ•°æ®ã€‚</p>
<p>æ›´è®©äººå¤´ç–¼çš„æ˜¯ï¼Œæ¯æ¬¡ä¿®æ”¹ä»£ç éƒ½æå¿ƒåŠèƒ†ï¼Œç”Ÿæ€•ä¸€ä¸å°å¿ƒå°±æŠŠä¹‹å‰å¥½ç”¨çš„åŠŸèƒ½æåäº†ã€‚è¿™ç§â€œæ‹†ä¸œå¢™è¡¥è¥¿å¢™â€çš„å¼€å‘ä½“éªŒï¼Œç›¸ä¿¡ä¸å°‘å‰ç«¯å¼€å‘è€…éƒ½æ·±æœ‰ä½“ä¼šã€‚</p>
<p>ä»Šå¤©æˆ‘è¦è·Ÿä½ åˆ†äº«çš„ï¼Œå°±æ˜¯å¦‚ä½•ç”¨Jestå’ŒVue Test Utilsä¸ºä½ çš„Vueç»„ä»¶å»ºç«‹åšå®çš„æµ‹è¯•é˜²çº¿ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œä½ å°†å­¦ä¼šä»é›¶å¼€å§‹æ­å»ºæµ‹è¯•ç¯å¢ƒï¼Œç¼–å†™æœ‰æ•ˆçš„æµ‹è¯•ç”¨ä¾‹ï¼Œæœ€ç»ˆæ‰“é€ å‡ºæ›´ç¨³å®šã€å¯ç»´æŠ¤çš„Vueåº”ç”¨ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦ç»™Vueç»„ä»¶å†™æµ‹è¯•ï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå•†ç½‘ç«™çš„å•†å“è¯¦æƒ…é¡µã€‚é‡Œé¢æœ‰ä¸ªâ€œåŠ å…¥è´­ç‰©è½¦â€æŒ‰é’®ç»„ä»¶ï¼Œé€»è¾‘ç›¸å½“å¤æ‚ï¼šè¦æ ¡éªŒåº“å­˜ã€å¤„ç†ç”¨æˆ·é€‰é¡¹ã€è°ƒç”¨æ¥å£ç­‰ç­‰ã€‚</p>
<p>å¦‚æœæ²¡æœ‰æµ‹è¯•ï¼Œæ¯æ¬¡ä¿®æ”¹è¿™ä¸ªç»„ä»¶æ—¶ï¼Œä½ éƒ½å¾—æ‰‹åŠ¨æŠŠå„ç§æƒ…å†µéƒ½ç‚¹ä¸€éï¼šåº“å­˜ä¸ºé›¶æ—¶æŒ‰é’®è¦ä¸è¦ç¦ç”¨ï¼Ÿç”¨æˆ·é€‰äº†ä¸æ”¯æŒçš„ç»„åˆæ€ä¹ˆåŠï¼Ÿç½‘ç»œè¯·æ±‚å¤±è´¥è¦æ€ä¹ˆå¤„ç†ï¼Ÿ</p>
<p>è€Œæœ‰äº†è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä½ åªéœ€è¦è¿è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå‡ ç§’é’Ÿå†…å°±èƒ½çŸ¥é“è¿™æ¬¡ä¿®æ”¹æœ‰æ²¡æœ‰ç ´åç°æœ‰åŠŸèƒ½ã€‚è¿™å°±åƒæ˜¯ç»™ä½ çš„ä»£ç ä¹°äº†ä»½ä¿é™©ï¼Œè®©ä½ èƒ½æ”¾å¿ƒé‡æ„ã€å®‰å¿ƒä¸Šçº¿ã€‚</p>
<p>æµ‹è¯•è¿˜èƒ½èµ·åˆ°æ–‡æ¡£çš„ä½œç”¨ã€‚æ–°åŒäº‹æ¥æ‰‹é¡¹ç›®æ—¶ï¼Œé€šè¿‡é˜…è¯»æµ‹è¯•ç”¨ä¾‹ï¼Œèƒ½å¿«é€Ÿç†è§£æ¯ä¸ªç»„ä»¶åœ¨å„ç§åœºæ™¯ä¸‹åº”è¯¥æ€ä¹ˆå·¥ä½œã€‚</p>
<h2 data-id="heading-1">æµ‹è¯•ç¯å¢ƒæ­å»ºï¼šä»é›¶å¼€å§‹é…ç½®</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬åŠ¨æ‰‹æ­å»ºæµ‹è¯•ç¯å¢ƒã€‚å‡è®¾ä½ æ­£åœ¨å¯åŠ¨ä¸€ä¸ªæ–°çš„Vue 3é¡¹ç›®ï¼Œæˆ‘ä¼šå¸¦ä½ ä¸€æ­¥æ­¥é…ç½®æ‰€éœ€çš„æµ‹è¯•å·¥å…·ã€‚</p>
<p>é¦–å…ˆåˆ›å»ºé¡¹ç›®å¹¶å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºVueé¡¹ç›®</span>
npm create vue@latest my-vue-app

<span class="hljs-comment">// è¿›å…¥é¡¹ç›®ç›®å½•</span>
cd my-vue-app

<span class="hljs-comment">// å®‰è£…æµ‹è¯•ç›¸å…³çš„ä¾èµ–</span>
npm install --save-dev jest @vue/test-utils jest-environment-jsdom
</code></pre>
<p>æ¥ä¸‹æ¥åˆ›å»ºJesté…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// jest.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">testEnvironment</span>: <span class="hljs-string">'jsdom'</span>,
  <span class="hljs-attr">moduleFileExtensions</span>: [<span class="hljs-string">'js'</span>, <span class="hljs-string">'json'</span>, <span class="hljs-string">'vue'</span>],
  <span class="hljs-attr">transform</span>: {
    <span class="hljs-string">'^.+\\.js$'</span>: <span class="hljs-string">'babel-jest'</span>,
    <span class="hljs-string">'^.+\\.vue$'</span>: <span class="hljs-string">'@vue/vue3-jest'</span>
  },
  <span class="hljs-attr">moduleNameMapping</span>: {
    <span class="hljs-string">'^@/(.*)$'</span>: <span class="hljs-string">'&lt;rootDir&gt;/src/$1'</span>
  },
  <span class="hljs-attr">testMatch</span>: [<span class="hljs-string">'**/__tests__/**/*.spec.js'</span>]
}
</code></pre>
<p>åœ¨package.jsonä¸­æ·»åŠ æµ‹è¯•è„šæœ¬ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// package.json</span>
{
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"test"</span>: <span class="hljs-string">"jest"</span>,
    <span class="hljs-string">"test:watch"</span>: <span class="hljs-string">"jest --watch"</span>
  }
}
</code></pre>
<p>ç°åœ¨è¿è¡Œ<code>npm test</code>ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°æµ‹è¯•ç¯å¢ƒæ­£å¸¸å·¥ä½œã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ­å–œä½ ï¼Œæµ‹è¯•ç¯å¢ƒå·²ç»å‡†å¤‡å°±ç»ªï¼</p>
<h2 data-id="heading-2">ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼šæŒ‰é’®ç»„ä»¶å®æˆ˜</h2>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„æŒ‰é’®ç»„ä»¶å¼€å§‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŸºç¡€çš„æŒ‰é’®ç»„ä»¶ï¼Œå®ƒå¯ä»¥æ ¹æ®ä¼ å…¥çš„typeå±æ€§æ˜¾ç¤ºä¸åŒçš„æ ·å¼ã€‚</p>
<p>é¦–å…ˆåˆ›å»ºæŒ‰é’®ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/BaseButton.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
    <span class="hljs-attr">:class</span>=<span class="hljs-string">"['btn', `btn-${type}`]"</span>
    <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"disabled"</span>
    @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClick"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">type</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-string">'default'</span>
  },
  <span class="hljs-attr">disabled</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>
  }
})

<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'click'</span>])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">event</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">disabled</span>) {
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'click'</span>, event)
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.btn</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-class">.btn-default</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f0f0f0</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
}

<span class="hljs-selector-class">.btn-primary</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#007bff</span>;
  <span class="hljs-attribute">color</span>: white;
}

<span class="hljs-selector-class">.btn-danger</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#dc3545</span>;
  <span class="hljs-attribute">color</span>: white;
}

<span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:disabled</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>;
  <span class="hljs-attribute">cursor</span>: not-allowed;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<p>ç°åœ¨ä¸ºè¿™ä¸ªç»„ä»¶ç¼–å†™æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/__tests__/BaseButton.spec.js</span>
<span class="hljs-keyword">import</span> { mount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/test-utils'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BaseButton</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../BaseButton.vue'</span>

<span class="hljs-comment">// æè¿°æˆ‘ä»¬è¦æµ‹è¯•çš„ç»„ä»¶</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">'BaseButton'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æµ‹è¯•é»˜è®¤æ¸²æŸ“</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'æ¸²æŸ“æ­£ç¡®çš„é»˜è®¤æ ·å¼'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æŒ‚è½½ç»„ä»¶</span>
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">BaseButton</span>, {
      <span class="hljs-attr">slots</span>: {
        <span class="hljs-attr">default</span>: <span class="hljs-string">'ç‚¹å‡»æˆ‘'</span>
      }
    })
    
    <span class="hljs-comment">// æ–­è¨€ï¼šæŒ‰é’®åº”è¯¥åŒ…å«é»˜è®¤çš„CSSç±»</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">classes</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'btn'</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">classes</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'btn-default'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šæŒ‰é’®æ–‡æœ¬å†…å®¹æ­£ç¡®</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">'ç‚¹å‡»æˆ‘'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šæŒ‰é’®é»˜è®¤ä¸æ˜¯ç¦ç”¨çŠ¶æ€</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">attributes</span>(<span class="hljs-string">'disabled'</span>)).<span class="hljs-title function_">toBeUndefined</span>()
  })
  
  <span class="hljs-comment">// æµ‹è¯•ä¸åŒç±»å‹</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'æ ¹æ®typeå±æ€§æ¸²æŸ“ä¸åŒæ ·å¼'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> types = [<span class="hljs-string">'primary'</span>, <span class="hljs-string">'danger'</span>]
    
    types.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">type</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">BaseButton</span>, {
        <span class="hljs-attr">props</span>: { type },
        <span class="hljs-attr">slots</span>: { <span class="hljs-attr">default</span>: <span class="hljs-string">'æµ‹è¯•æŒ‰é’®'</span> }
      })
      
      <span class="hljs-comment">// æ–­è¨€ï¼šæŒ‰é’®åº”è¯¥åŒ…å«å¯¹åº”ç±»å‹çš„CSSç±»</span>
      <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">classes</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">`btn-<span class="hljs-subst">${type}</span>`</span>)
    })
  })
  
  <span class="hljs-comment">// æµ‹è¯•ç¦ç”¨çŠ¶æ€</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'ç¦ç”¨çŠ¶æ€ä¸‹ä¸èƒ½ç‚¹å‡»'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">BaseButton</span>, {
      <span class="hljs-attr">props</span>: { <span class="hljs-attr">disabled</span>: <span class="hljs-literal">true</span> },
      <span class="hljs-attr">slots</span>: { <span class="hljs-attr">default</span>: <span class="hljs-string">'ç¦ç”¨æŒ‰é’®'</span> }
    })
    
    <span class="hljs-comment">// æ–­è¨€ï¼šæŒ‰é’®åº”è¯¥æœ‰disabledå±æ€§</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">attributes</span>(<span class="hljs-string">'disabled'</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">''</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šæŒ‰é’®åº”è¯¥åŒ…å«ç¦ç”¨æ ·å¼ç±»</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">classes</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'btn'</span>)
  })
  
  <span class="hljs-comment">// æµ‹è¯•ç‚¹å‡»äº‹ä»¶</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'ç‚¹å‡»æ—¶è§¦å‘äº‹ä»¶'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">BaseButton</span>, {
      <span class="hljs-attr">slots</span>: { <span class="hljs-attr">default</span>: <span class="hljs-string">'å¯ç‚¹å‡»æŒ‰é’®'</span> }
    })
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿç‚¹å‡»æŒ‰é’®</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'click'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåº”è¯¥è§¦å‘äº†clickäº‹ä»¶</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>(<span class="hljs-string">'click'</span>)).<span class="hljs-title function_">toHaveLength</span>(<span class="hljs-number">1</span>)
  })
  
  <span class="hljs-comment">// æµ‹è¯•ç¦ç”¨çŠ¶æ€ä¸‹ä¸è§¦å‘ç‚¹å‡»</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'ç¦ç”¨çŠ¶æ€ä¸‹ä¸è§¦å‘ç‚¹å‡»äº‹ä»¶'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">BaseButton</span>, {
      <span class="hljs-attr">props</span>: { <span class="hljs-attr">disabled</span>: <span class="hljs-literal">true</span> },
      <span class="hljs-attr">slots</span>: { <span class="hljs-attr">default</span>: <span class="hljs-string">'ç¦ç”¨æŒ‰é’®'</span> }
    })
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿç‚¹å‡»æŒ‰é’®</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'click'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šä¸åº”è¯¥è§¦å‘clickäº‹ä»¶</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>(<span class="hljs-string">'click'</span>)).<span class="hljs-title function_">toBeUndefined</span>()
  })
})
</code></pre>
<p>è¿è¡Œ<code>npm test</code>ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡äº†ã€‚è¿™å°±æ˜¯ä½ çš„ç¬¬ä¸€ä¸ªVueç»„ä»¶æµ‹è¯•ï¼</p>
<h2 data-id="heading-3">æµ‹è¯•å¤æ‚ç»„ä»¶ï¼šè¡¨å•éªŒè¯å®æˆ˜</h2>
<p>ç°åœ¨æˆ‘ä»¬æ¥å¤„ç†æ›´å¤æ‚çš„åœºæ™¯â€”â€”ä¸€ä¸ªå¸¦éªŒè¯åŠŸèƒ½çš„ç™»å½•è¡¨å•ã€‚è¿™ä¸ªç»„ä»¶ä¼šæ¶‰åŠç”¨æˆ·è¾“å…¥ã€å¼‚æ­¥æ“ä½œå’Œå¤æ‚çš„äº¤äº’é€»è¾‘ã€‚</p>
<p>å…ˆåˆ›å»ºç™»å½•è¡¨å•ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/LoginForm.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> @<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">"handleSubmit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"login-form"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"email"</span>&gt;</span>é‚®ç®±<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.email"</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"['form-input', { 'error': errors.email }]"</span>
        @<span class="hljs-attr">blur</span>=<span class="hljs-string">"validateField('email')"</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"errors.email"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error-message"</span>&gt;</span>{{ errors.email }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"password"</span>&gt;</span>å¯†ç <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">id</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.password"</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"['form-input', { 'error': errors.password }]"</span>
        @<span class="hljs-attr">blur</span>=<span class="hljs-string">"validateField('password')"</span>
      /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"errors.password"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error-message"</span>&gt;</span>{{ errors.password }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">BaseButton</span> 
      <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> 
      <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!isFormValid || loading"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"submit-btn"</span>
    &gt;</span>
      {{ loading ? 'ç™»å½•ä¸­...' : 'ç™»å½•' }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">BaseButton</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"submitError"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"submit-error"</span>&gt;</span>
      {{ submitError }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BaseButton</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./BaseButton.vue'</span>

<span class="hljs-comment">// è¡¨å•æ•°æ®</span>
<span class="hljs-keyword">const</span> form = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">''</span>
})

<span class="hljs-comment">// é”™è¯¯ä¿¡æ¯</span>
<span class="hljs-keyword">const</span> errors = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">''</span>
})

<span class="hljs-comment">// åŠ è½½çŠ¶æ€å’Œæäº¤é”™è¯¯</span>
<span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> submitError = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)

<span class="hljs-comment">// è®¡ç®—è¡¨å•æ˜¯å¦æœ‰æ•ˆ</span>
<span class="hljs-keyword">const</span> isFormValid = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> form.<span class="hljs-property">email</span> &amp;&amp; form.<span class="hljs-property">password</span> &amp;&amp; !errors.<span class="hljs-property">email</span> &amp;&amp; !errors.<span class="hljs-property">password</span>
})

<span class="hljs-comment">// å­—æ®µéªŒè¯è§„åˆ™</span>
<span class="hljs-keyword">const</span> validationRules = {
  <span class="hljs-attr">email</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!value) <span class="hljs-keyword">return</span> <span class="hljs-string">'é‚®ç®±ä¸èƒ½ä¸ºç©º'</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>.<span class="hljs-title function_">test</span>(value)) <span class="hljs-keyword">return</span> <span class="hljs-string">'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  },
  <span class="hljs-attr">password</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!value) <span class="hljs-keyword">return</span> <span class="hljs-string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span>
    <span class="hljs-keyword">if</span> (value.<span class="hljs-property">length</span> &lt; <span class="hljs-number">6</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'å¯†ç è‡³å°‘6ä½'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
  }
}

<span class="hljs-comment">// éªŒè¯å•ä¸ªå­—æ®µ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">validateField</span> = (<span class="hljs-params">fieldName</span>) =&gt; {
  <span class="hljs-keyword">const</span> value = form[fieldName]
  errors[fieldName] = validationRules[fieldName](value)
}

<span class="hljs-comment">// æäº¤è¡¨å•</span>
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'success'</span>])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// éªŒè¯æ‰€æœ‰å­—æ®µ</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(form).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">field</span> =&gt;</span> <span class="hljs-title function_">validateField</span>(field))
  
  <span class="hljs-comment">// å¦‚æœæœ‰é”™è¯¯å°±ä¸æäº¤</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(errors).<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> error)) <span class="hljs-keyword">return</span>
  
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  submitError.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ¨¡æ‹ŸAPIè°ƒç”¨</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>))
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿéšæœºå¤±è´¥</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span>) {
      <span class="hljs-title function_">emit</span>(<span class="hljs-string">'success'</span>, { <span class="hljs-attr">email</span>: form.<span class="hljs-property">email</span> })
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é‚®ç®±å’Œå¯†ç '</span>)
    }
  } <span class="hljs-keyword">catch</span> (error) {
    submitError.<span class="hljs-property">value</span> = error.<span class="hljs-property">message</span>
  } <span class="hljs-keyword">finally</span> {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.login-form</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
}

<span class="hljs-selector-class">.form-group</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">1rem</span>;
}

<span class="hljs-selector-class">.form-input</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.form-input</span><span class="hljs-selector-class">.error</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#dc3545</span>;
}

<span class="hljs-selector-class">.error-message</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#dc3545</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.875rem</span>;
}

<span class="hljs-selector-class">.submit-btn</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;
}

<span class="hljs-selector-class">.submit-error</span> {
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f8d7da</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#721c24</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<p>ç°åœ¨ä¸ºè¿™ä¸ªå¤æ‚çš„è¡¨å•ç»„ä»¶ç¼–å†™æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/__tests__/LoginForm.spec.js</span>
<span class="hljs-keyword">import</span> { mount } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/test-utils'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">LoginForm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../LoginForm.vue'</span>

<span class="hljs-comment">// æ¨¡æ‹Ÿå®šæ—¶å™¨</span>
jest.<span class="hljs-title function_">useFakeTimers</span>()

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'LoginForm'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æµ‹è¯•åˆå§‹çŠ¶æ€</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åˆå§‹æ¸²æŸ“æ­£ç¡®'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">LoginForm</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šè¡¨å•å…ƒç´ éƒ½å­˜åœ¨</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="email"]'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="password"]'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåˆå§‹çŠ¶æ€ä¸‹æŒ‰é’®æ˜¯ç¦ç”¨çŠ¶æ€</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">attributes</span>(<span class="hljs-string">'disabled'</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">''</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šæ²¡æœ‰é”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error-message'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">false</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.submit-error'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">false</span>)
  })
  
  <span class="hljs-comment">// æµ‹è¯•è¡¨å•éªŒè¯</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'éªŒè¯é‚®ç®±æ ¼å¼'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">LoginForm</span>)
    <span class="hljs-keyword">const</span> emailInput = wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="email"]'</span>)
    
    <span class="hljs-comment">// è¾“å…¥æ— æ•ˆé‚®ç®±</span>
    <span class="hljs-keyword">await</span> emailInput.<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'invalid-email'</span>)
    <span class="hljs-keyword">await</span> emailInput.<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'blur'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåº”è¯¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error-message'</span>).<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'</span>)
    
    <span class="hljs-comment">// è¾“å…¥æœ‰æ•ˆé‚®ç®±</span>
    <span class="hljs-keyword">await</span> emailInput.<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'test@example.com'</span>)
    <span class="hljs-keyword">await</span> emailInput.<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'blur'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šé”™è¯¯ä¿¡æ¯åº”è¯¥æ¶ˆå¤±</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error-message'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">false</span>)
  })
  
  <span class="hljs-comment">// æµ‹è¯•å¯†ç éªŒè¯</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'éªŒè¯å¯†ç é•¿åº¦'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">LoginForm</span>)
    <span class="hljs-keyword">const</span> passwordInput = wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="password"]'</span>)
    
    <span class="hljs-comment">// è¾“å…¥è¿‡çŸ­å¯†ç </span>
    <span class="hljs-keyword">await</span> passwordInput.<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'123'</span>)
    <span class="hljs-keyword">await</span> passwordInput.<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'blur'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåº”è¯¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error-message'</span>).<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'å¯†ç è‡³å°‘6ä½'</span>)
    
    <span class="hljs-comment">// è¾“å…¥æœ‰æ•ˆå¯†ç </span>
    <span class="hljs-keyword">await</span> passwordInput.<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'123456'</span>)
    <span class="hljs-keyword">await</span> passwordInput.<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'blur'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šé”™è¯¯ä¿¡æ¯åº”è¯¥æ¶ˆå¤±</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error-message'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">false</span>)
  })
  
  <span class="hljs-comment">// æµ‹è¯•è¡¨å•æäº¤ - æˆåŠŸæƒ…å†µ</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'æˆåŠŸæäº¤è¡¨å•'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">LoginForm</span>)
    
    <span class="hljs-comment">// å¡«å†™æœ‰æ•ˆè¡¨å•</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="email"]'</span>).<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'test@example.com'</span>)
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="password"]'</span>).<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'123456'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šæŒ‰é’®åº”è¯¥å¯ç”¨</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">attributes</span>(<span class="hljs-string">'disabled'</span>)).<span class="hljs-title function_">toBeUndefined</span>()
    
    <span class="hljs-comment">// æäº¤è¡¨å•</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'form'</span>).<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'submit.prevent'</span>)
    
    <span class="hljs-comment">// å¿«é€Ÿæ¨è¿›å®šæ—¶å™¨</span>
    jest.<span class="hljs-title function_">advanceTimersByTime</span>(<span class="hljs-number">1000</span>)
    
    <span class="hljs-comment">// ç­‰å¾…Vueæ›´æ–°</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-property">vm</span>.$nextTick()
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåº”è¯¥è§¦å‘äº†successäº‹ä»¶</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>(<span class="hljs-string">'success'</span>)).<span class="hljs-title function_">toBeTruthy</span>()
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">emitted</span>(<span class="hljs-string">'success'</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]).<span class="hljs-title function_">toEqual</span>({
      <span class="hljs-attr">email</span>: <span class="hljs-string">'test@example.com'</span>
    })
  })
  
  <span class="hljs-comment">// æµ‹è¯•è¡¨å•æäº¤ - å¤±è´¥æƒ…å†µ</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'å¤„ç†æäº¤å¤±è´¥'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// æ¨¡æ‹ŸMath.randomè¿”å›è¾ƒå°å€¼ä»¥ç¡®ä¿å¤±è´¥</span>
    <span class="hljs-keyword">const</span> mockMath = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-variable language_">global</span>.<span class="hljs-property">Math</span>)
    mockMath.<span class="hljs-property">random</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-number">0.1</span>
    <span class="hljs-variable language_">global</span>.<span class="hljs-property">Math</span> = mockMath
    
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">LoginForm</span>)
    
    <span class="hljs-comment">// å¡«å†™æœ‰æ•ˆè¡¨å•</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="email"]'</span>).<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'test@example.com'</span>)
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="password"]'</span>).<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'123456'</span>)
    
    <span class="hljs-comment">// æäº¤è¡¨å•</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'form'</span>).<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'submit.prevent'</span>)
    
    <span class="hljs-comment">// å¿«é€Ÿæ¨è¿›å®šæ—¶å™¨</span>
    jest.<span class="hljs-title function_">advanceTimersByTime</span>(<span class="hljs-number">1000</span>)
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-property">vm</span>.$nextTick()
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåº”è¯¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.submit-error'</span>).<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'ç™»å½•å¤±è´¥'</span>)
    
    <span class="hljs-comment">// æ¢å¤åŸå§‹Mathå¯¹è±¡</span>
    <span class="hljs-variable language_">global</span>.<span class="hljs-property">Math</span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(mockMath)
  })
  
  <span class="hljs-comment">// æµ‹è¯•åŠ è½½çŠ¶æ€</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'æäº¤æ—¶æ˜¾ç¤ºåŠ è½½çŠ¶æ€'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">LoginForm</span>)
    
    <span class="hljs-comment">// å¡«å†™æœ‰æ•ˆè¡¨å•</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="email"]'</span>).<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'test@example.com'</span>)
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'input[type="password"]'</span>).<span class="hljs-title function_">setValue</span>(<span class="hljs-string">'123456'</span>)
    
    <span class="hljs-comment">// æäº¤è¡¨å•</span>
    wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'form'</span>).<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'submit.prevent'</span>)
    
    <span class="hljs-comment">// ä¸éœ€è¦ç­‰å¾…å®šæ—¶å™¨ï¼Œç«‹å³æ£€æŸ¥åŠ è½½çŠ¶æ€</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-property">vm</span>.$nextTick()
    
    <span class="hljs-comment">// æ–­è¨€ï¼šæŒ‰é’®åº”è¯¥æ˜¾ç¤ºåŠ è½½æ–‡æœ¬</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'ç™»å½•ä¸­'</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šæŒ‰é’®åº”è¯¥æ˜¯ç¦ç”¨çŠ¶æ€</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">attributes</span>(<span class="hljs-string">'disabled'</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">''</span>)
  })
})
</code></pre>
<p>è¿™ä¸ªæµ‹è¯•å¥—ä»¶è¦†ç›–äº†è¡¨å•ç»„ä»¶çš„å„ç§åœºæ™¯ï¼šåˆå§‹çŠ¶æ€ã€å­—æ®µéªŒè¯ã€æˆåŠŸæäº¤ã€å¤±è´¥å¤„ç†å’ŒåŠ è½½çŠ¶æ€ã€‚é€šè¿‡è¿™æ ·çš„æµ‹è¯•ï¼Œä½ å°±èƒ½ç¡®ä¿è¡¨å•åœ¨å„ç§æƒ…å†µä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<h2 data-id="heading-4">é«˜çº§æµ‹è¯•æŠ€å·§ï¼šå¼‚æ­¥æ“ä½œå’ŒMock</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†å¼‚æ­¥æ“ä½œï¼Œæ¯”å¦‚APIè°ƒç”¨ã€‚è¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°Mockå’Œæ›´é«˜çº§çš„æµ‹è¯•æŠ€å·§ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªè°ƒç”¨çœŸå®APIçš„ç”¨æˆ·åˆ—è¡¨ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/UserList.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-list"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"loading"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading"</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">"error"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"error"</span>&gt;</span>{{ error }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">v-else</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"user in users"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"user.id"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user-item"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ user.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ user.email }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> users = <span class="hljs-title function_">ref</span>([])
<span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> error = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUsers</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  error.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://jsonplaceholder.typicode.com/users'</span>)
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥'</span>)
    users.<span class="hljs-property">value</span> = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
  } <span class="hljs-keyword">catch</span> (err) {
    error.<span class="hljs-property">value</span> = err.<span class="hljs-property">message</span>
  } <span class="hljs-keyword">finally</span> {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">fetchUsers</span>()
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.loading</span>, <span class="hljs-selector-class">.error</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">text-align</span>: center;
}

<span class="hljs-selector-class">.user-item</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: space-between;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0.5rem</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<p>ä¸ºè¿™ä¸ªç»„ä»¶ç¼–å†™æµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦Mock fetch APIï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/__tests__/UserList.spec.js</span>
<span class="hljs-keyword">import</span> { mount, flushPromises } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/test-utils'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">UserList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../UserList.vue'</span>

<span class="hljs-comment">// æ¨¡æ‹Ÿfetchå…¨å±€å‡½æ•°</span>
<span class="hljs-variable language_">global</span>.<span class="hljs-property">fetch</span> = jest.<span class="hljs-title function_">fn</span>()

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'UserList'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åœ¨æ¯ä¸ªæµ‹è¯•å‰é‡ç½®mock</span>
    fetch.<span class="hljs-title function_">mockClear</span>()
  })
  
  <span class="hljs-comment">// æµ‹è¯•åŠ è½½çŠ¶æ€</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'åˆå§‹æ˜¾ç¤ºåŠ è½½çŠ¶æ€'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">UserList</span>)
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåº”è¯¥æ˜¾ç¤ºåŠ è½½ä¸­</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.loading'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.loading'</span>).<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'åŠ è½½ä¸­'</span>)
  })
  
  <span class="hljs-comment">// æµ‹è¯•æˆåŠŸè·å–æ•°æ®</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'æˆåŠŸè·å–ç”¨æˆ·åˆ—è¡¨'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// MockæˆåŠŸçš„APIå“åº”</span>
    <span class="hljs-keyword">const</span> mockUsers = [
      { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">'zhangsan@example.com'</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">'lisi@example.com'</span> }
    ]
    
    fetch.<span class="hljs-title function_">mockResolvedValueOnce</span>({
      <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">json</span>: <span class="hljs-keyword">async</span> () =&gt; mockUsers
    })
    
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">UserList</span>)
    
    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å¼‚æ­¥æ“ä½œå®Œæˆ</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">flushPromises</span>()
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåº”è¯¥æ˜¾ç¤ºäº†ç”¨æˆ·åˆ—è¡¨</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.loading'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">false</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">false</span>)
    
    <span class="hljs-keyword">const</span> userItems = wrapper.<span class="hljs-title function_">findAll</span>(<span class="hljs-string">'.user-item'</span>)
    <span class="hljs-title function_">expect</span>(userItems).<span class="hljs-title function_">toHaveLength</span>(<span class="hljs-number">2</span>)
    <span class="hljs-title function_">expect</span>(userItems[<span class="hljs-number">0</span>].<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'å¼ ä¸‰'</span>)
    <span class="hljs-title function_">expect</span>(userItems[<span class="hljs-number">1</span>].<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'æå››'</span>)
  })
  
  <span class="hljs-comment">// æµ‹è¯•APIå¤±è´¥æƒ…å†µ</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'å¤„ç†APIè¯·æ±‚å¤±è´¥'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// Mockå¤±è´¥çš„APIå“åº”</span>
    fetch.<span class="hljs-title function_">mockRejectedValueOnce</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯'</span>))
    
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">UserList</span>)
    
    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å¼‚æ­¥æ“ä½œå®Œæˆ</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">flushPromises</span>()
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåº”è¯¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.loading'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">false</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error'</span>).<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯'</span>)
  })
  
  <span class="hljs-comment">// æµ‹è¯•HTTPé”™è¯¯çŠ¶æ€</span>
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'å¤„ç†HTTPé”™è¯¯çŠ¶æ€'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// MockHTTPé”™è¯¯å“åº”</span>
    fetch.<span class="hljs-title function_">mockResolvedValueOnce</span>({
      <span class="hljs-attr">ok</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-number">500</span>
    })
    
    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">UserList</span>)
    
    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å¼‚æ­¥æ“ä½œå®Œæˆ</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">flushPromises</span>()
    
    <span class="hljs-comment">// æ–­è¨€ï¼šåº”è¯¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>)
    <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.error'</span>).<span class="hljs-title function_">text</span>()).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">'è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥'</span>)
  })
})
</code></pre>
<p>è¿™äº›æµ‹è¯•å±•ç¤ºäº†å¦‚ä½•å¤„ç†å¼‚æ­¥æ“ä½œã€Mockå¤–éƒ¨ä¾èµ–ï¼Œä»¥åŠæµ‹è¯•ç»„ä»¶çš„å„ç§çŠ¶æ€ï¼ˆåŠ è½½ã€æˆåŠŸã€å¤±è´¥ï¼‰ã€‚</p>
<h2 data-id="heading-5">æµ‹è¯•æœ€ä½³å®è·µå’Œå¸¸è§é™·é˜±</h2>
<p>åœ¨ç¼–å†™æµ‹è¯•æ—¶ï¼Œéµå¾ªä¸€äº›æœ€ä½³å®è·µå¯ä»¥è®©ä½ äº‹åŠåŠŸå€ï¼š</p>
<p><strong>1. æµ‹è¯•è¡Œä¸ºï¼Œä¸æµ‹è¯•å®ç°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šæµ‹è¯•å†…éƒ¨å®ç°ç»†èŠ‚</span>
<span class="hljs-title function_">it</span>(<span class="hljs-string">'è°ƒç”¨fetchUsersæ–¹æ³•'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">UserList</span>)
  <span class="hljs-keyword">const</span> spy = jest.<span class="hljs-title function_">spyOn</span>(wrapper.<span class="hljs-property">vm</span>, <span class="hljs-string">'fetchUsers'</span>)
  wrapper.<span class="hljs-property">vm</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">mounted</span>[<span class="hljs-number">0</span>]()
  <span class="hljs-title function_">expect</span>(spy).<span class="hljs-title function_">toHaveBeenCalled</span>()
})

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šæµ‹è¯•å¤–éƒ¨è¡Œä¸º</span>
<span class="hljs-title function_">it</span>(<span class="hljs-string">'ç»„ä»¶æŒ‚è½½åæ˜¾ç¤ºç”¨æˆ·åˆ—è¡¨'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-comment">// Mock APIå“åº”</span>
  fetch.<span class="hljs-title function_">mockResolvedValueOnce</span>({
    <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">json</span>: <span class="hljs-keyword">async</span> () =&gt; [{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æµ‹è¯•ç”¨æˆ·'</span> }]
  })
  
  <span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">mount</span>(<span class="hljs-title class_">UserList</span>)
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">flushPromises</span>()
  
  <span class="hljs-comment">// æ–­è¨€ç”¨æˆ·ç•Œé¢æ˜¯å¦æ­£ç¡®æ›´æ–°</span>
  <span class="hljs-title function_">expect</span>(wrapper.<span class="hljs-title function_">find</span>(<span class="hljs-string">'.user-item'</span>).<span class="hljs-title function_">exists</span>()).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>)
})
</code></pre>
<p><strong>2. ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸å¥½çš„å‘½å</span>
<span class="hljs-title function_">it</span>(<span class="hljs-string">'æµ‹è¯•æŒ‰é’®'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æµ‹è¯•ä»£ç </span>
})

<span class="hljs-comment">// å¥½çš„å‘½å</span>
<span class="hljs-title function_">it</span>(<span class="hljs-string">'æŒ‰é’®åœ¨ç¦ç”¨çŠ¶æ€ä¸‹ä¸è§¦å‘ç‚¹å‡»äº‹ä»¶'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æµ‹è¯•ä»£ç </span>
})
</code></pre>
<p><strong>3. ä¿æŒæµ‹è¯•ç‹¬ç«‹</strong>
æ¯ä¸ªæµ‹è¯•éƒ½åº”è¯¥èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œï¼Œä¸ä¾èµ–å…¶ä»–æµ‹è¯•çš„çŠ¶æ€ã€‚ä½¿ç”¨beforeEachå’ŒafterEachæ¥è®¾ç½®å’Œæ¸…ç†æµ‹è¯•ç¯å¢ƒã€‚</p>
<p><strong>4. æµ‹è¯•è¾¹ç¼˜æƒ…å†µ</strong>
é™¤äº†æ­£å¸¸æµç¨‹ï¼Œè¿˜è¦æµ‹è¯•è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯æƒ…å†µï¼š</p>
<ul>
<li>ç©ºæ•°æ®</li>
<li>ç½‘ç»œé”™è¯¯</li>
<li>æ— æ•ˆçš„ç”¨æˆ·è¾“å…¥</li>
<li>æç«¯çš„æ•°å€¼è¾¹ç•Œ</li>
</ul>
<h2 data-id="heading-6">é›†æˆåˆ°å¼€å‘æµç¨‹</h2>
<p>æµ‹è¯•ä¸åº”è¯¥åªæ˜¯å¼€å‘å®Œæˆåæ‰è¿è¡Œçš„ä¸œè¥¿ï¼Œè€Œåº”è¯¥èå…¥åˆ°æ•´ä¸ªå¼€å‘æµç¨‹ä¸­ã€‚</p>
<p><strong>åœ¨Git hooksä¸­è¿è¡Œæµ‹è¯•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// package.json</span>
{
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"test"</span>: <span class="hljs-string">"jest"</span>,
    <span class="hljs-string">"test:watch"</span>: <span class="hljs-string">"jest --watch"</span>,
    <span class="hljs-string">"test:coverage"</span>: <span class="hljs-string">"jest --coverage"</span>
  },
  <span class="hljs-string">"husky"</span>: {
    <span class="hljs-string">"hooks"</span>: {
      <span class="hljs-string">"pre-commit"</span>: <span class="hljs-string">"npm test"</span>,
      <span class="hljs-string">"pre-push"</span>: <span class="hljs-string">"npm run test:coverage"</span>
    }
  }
}
</code></pre>
<p><strong>é…ç½®æŒç»­é›†æˆ</strong>
åœ¨GitHub Actionsä¸­é…ç½®è‡ªåŠ¨æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .github/workflows/test.yml</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">Test</span>
<span class="hljs-attr">on:</span> [<span class="hljs-string">push</span>, <span class="hljs-string">pull_request</span>]
<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">test:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v2</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-string">'18'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">test</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">test:coverage</span>
</code></pre>
<h2 data-id="heading-7">ç»“è¯­ï¼šè®©æµ‹è¯•æˆä¸ºä½ çš„å¼€å‘åˆ©å™¨</h2>
<p>é€šè¿‡ä»Šå¤©çš„åˆ†äº«ï¼Œç›¸ä¿¡ä½ å·²ç»çœ‹åˆ°äº†æµ‹è¯•åœ¨Vueå¼€å‘ä¸­çš„å·¨å¤§ä»·å€¼ã€‚ä»ç®€å•çš„æŒ‰é’®ç»„ä»¶åˆ°å¤æ‚çš„è¡¨å•éªŒè¯ï¼Œä»åŒæ­¥æ“ä½œåˆ°å¼‚æ­¥APIè°ƒç”¨ï¼Œæµ‹è¯•éƒ½èƒ½ä¸ºæˆ‘ä»¬æä¾›å¯é çš„ä¿éšœã€‚</p>
<p>è®°ä½ï¼Œå†™å¥½æµ‹è¯•å¹¶ä¸æ˜¯ä¸ºäº†è¿½æ±‚100%çš„æµ‹è¯•è¦†ç›–ç‡ï¼Œè€Œæ˜¯ä¸ºäº†å»ºç«‹ä¿¡å¿ƒâ€”â€”ä¿¡å¿ƒè®©ä½ èƒ½å¤Ÿå¤§èƒ†é‡æ„ï¼Œä¿¡å¿ƒè®©ä½ èƒ½å¤Ÿå¿«é€Ÿè¿­ä»£ï¼Œä¿¡å¿ƒè®©ä½ åœ¨æ·±å¤œéƒ¨ç½²æ—¶ä¹Ÿèƒ½å®‰å¿ƒå…¥ç¡ã€‚</p>
<p>å¼€å§‹å¯èƒ½è§‰å¾—å†™æµ‹è¯•å¾ˆéº»çƒ¦ï¼Œä½†å½“ä½ ç¬¬ä¸€æ¬¡å› ä¸ºæµ‹è¯•æå‰å‘ç°äº†bugï¼Œå½“ä½ ç¬¬ä¸€æ¬¡æ”¾å¿ƒåœ°é‡æ„å¤æ‚ä»£ç è€Œä¸ç”¨æ‹…å¿ƒç ´åç°æœ‰åŠŸèƒ½æ—¶ï¼Œä½ å°±ä¼šçœŸæ­£ä½“ä¼šåˆ°æµ‹è¯•çš„ä»·å€¼ã€‚</p>
<p>ç°åœ¨å°±å»ä¸ºä½ çš„Vueé¡¹ç›®æ·»åŠ ç¬¬ä¸€ä¸ªæµ‹è¯•å§ï¼ä»æœ€ç®€å•çš„ç»„ä»¶å¼€å§‹ï¼Œä¸€æ­¥æ­¥æ„å»ºèµ·ä½ çš„æµ‹è¯•é˜²çº¿ã€‚ç›¸ä¿¡ç”¨ä¸äº†å¤šä¹…ï¼Œæµ‹è¯•å°±ä¼šæˆä¸ºä½ å¼€å‘æµç¨‹ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ä½ åœ¨Vueé¡¹ç›®ä¸­ç”¨è¿‡æµ‹è¯•å—ï¼Ÿé‡åˆ°äº†ä»€ä¹ˆæŒ‘æˆ˜ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redis æ€§èƒ½æå‡30%çš„7ä¸ªå…³é”®ä¼˜åŒ–ç­–ç•¥ï¼Œ90%å¼€å‘è€…éƒ½å¿½ç•¥äº†ç¬¬3ç‚¹ï¼]]></title>    <link>https://juejin.cn/post/7574626451750223872</link>    <guid>https://juejin.cn/post/7574626451750223872</guid>    <pubDate>2025-11-21T00:17:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574626451750223872" data-draft-id="7574626451750207488" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redis æ€§èƒ½æå‡30%çš„7ä¸ªå…³é”®ä¼˜åŒ–ç­–ç•¥ï¼Œ90%å¼€å‘è€…éƒ½å¿½ç•¥äº†ç¬¬3ç‚¹ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-21T00:17:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redis æ€§èƒ½æå‡30%çš„7ä¸ªå…³é”®ä¼˜åŒ–ç­–ç•¥ï¼Œ90%å¼€å‘è€…éƒ½å¿½ç•¥äº†ç¬¬3ç‚¹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T00:17:28.000Z" title="Fri Nov 21 2025 00:17:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    27
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Redis æ€§èƒ½æå‡30%çš„7ä¸ªå…³é”®ä¼˜åŒ–ç­–ç•¥ï¼Œ90%å¼€å‘è€…éƒ½å¿½ç•¥äº†ç¬¬3ç‚¹ï¼</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>Redisä½œä¸ºå½“ä»Šæœ€æµè¡Œçš„å†…å­˜æ•°æ®åº“ä¹‹ä¸€ï¼Œä»¥å…¶é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿçš„ç‰¹æ€§è¢«å¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®æ—¶ç»Ÿè®¡ç­‰åœºæ™¯ã€‚ç„¶è€Œï¼Œéšç€ä¸šåŠ¡è§„æ¨¡çš„å¢é•¿å’Œè®¿é—®é‡çš„ä¸Šå‡ï¼Œè®¸å¤šå¼€å‘è€…å‘ç°Redisçš„æ€§èƒ½å¹¶æ²¡æœ‰è¾¾åˆ°é¢„æœŸæ°´å¹³ã€‚äº‹å®ä¸Šï¼Œé€šè¿‡åˆç†çš„ä¼˜åŒ–é…ç½®å’Œæ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ï¼ŒRedisçš„æ€§èƒ½å¯ä»¥è½»æ¾æå‡30%ç”šè‡³æ›´é«˜ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨7ä¸ªè¢«å¤§å¤šæ•°å¼€å‘è€…å¿½ç•¥çš„å…³é”®ä¼˜åŒ–ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥ä»å†…å­˜ç®¡ç†ã€æ•°æ®ç»“æ„é€‰æ‹©åˆ°ç½‘ç»œè°ƒä¼˜ç­‰å¤šä¸ªç»´åº¦å…¨é¢æå‡Redisæ€§èƒ½ã€‚å…¶ä¸­ç¬¬ä¸‰ä¸ªä¼˜åŒ–ç‚¹å°¤ä¸ºå…³é”®ï¼Œä½†å´è¢«90%çš„å¼€å‘è€…æ‰€å¿½è§†ã€‚æ— è®ºæ‚¨æ˜¯Redisæ–°æ‰‹è¿˜æ˜¯èµ„æ·±ç”¨æˆ·ï¼Œè¿™äº›å®æˆ˜ç»éªŒéƒ½å°†å¸®åŠ©æ‚¨å……åˆ†é‡Šæ”¾Redisçš„æ½œèƒ½ã€‚</p>
<h3 data-id="heading-2">1. åˆç†é…ç½®å†…å­˜åˆ†é…å™¨</h3>
<p>Redisé»˜è®¤ä½¿ç”¨jemallocä½œä¸ºå†…å­˜åˆ†é…å™¨ï¼ˆåœ¨Linuxç³»ç»Ÿä¸‹ï¼‰ï¼Œä½†ä¸åŒç‰ˆæœ¬çš„jemallocæ€§èƒ½å·®å¼‚æ˜¾è‘—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„å†…å­˜åˆ†é…å™¨</span>
redis-cli info memory | grep mem_allocator
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®ï¼š</strong></p>
<ul>
<li>å‡çº§åˆ°jemallocæœ€æ–°ç¨³å®šç‰ˆï¼ˆå¦‚5.2.1+ï¼‰</li>
<li>å¯¹äºç‰¹æ®Šå·¥ä½œè´Ÿè½½å¯è€ƒè™‘æ”¹ç”¨tcmalloc</li>
<li>è°ƒæ•´<code>malloc_conf</code>å‚æ•°ï¼š<code>export MALLOC_CONF="background_thread:true,dirty_decay_ms:5000"</code></li>
</ul>
<p><strong>æ€§èƒ½å½±å“ï¼š</strong>
æ­£ç¡®é…ç½®çš„å†…å­˜åˆ†é…å™¨å¯ä»¥å‡å°‘20%-30%çš„å†…å­˜ç¢ç‰‡ï¼Œç‰¹åˆ«æ˜¯åœ¨é•¿æ—¶é—´è¿è¡Œå’Œé«˜é¢‘å†™æ“ä½œåœºæ™¯ä¸‹æ•ˆæœæ˜¾è‘—ã€‚</p>
<h3 data-id="heading-3">2. Pipelineæ‰¹é‡æ“ä½œçš„è‰ºæœ¯</h3>
<p>ç½‘ç»œå¾€è¿”æ—¶é—´(RTT)æ˜¯å½±å“Redisæ€§èƒ½çš„ä¸»è¦ç“¶é¢ˆä¹‹ä¸€ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½æ•ˆçš„å•æ¬¡æ“ä½œ</span>
<span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> keys:
    redis.get(key)
    
<span class="hljs-comment"># é«˜æ•ˆçš„pipelineæ“ä½œ</span>
pipe = redis.pipeline()
<span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> keys:
    pipe.get(key)
results = pipe.execute()
</code></pre>
<p><strong>å…³é”®æ•°æ®ï¼š</strong></p>
<ul>
<li>å•ä¸ªTCPåŒ…çš„RTTé€šå¸¸ä¸º0.5-2ms</li>
<li>Pipelineå¯å°†ååé‡æå‡5-10å€</li>
<li>Rediså¤„ç†èƒ½åŠ›ä»10k QPSå¯æå‡è‡³100k QPS</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>
Pipelineæ‰¹é‡å¤§å°å»ºè®®æ§åˆ¶åœ¨10KBä»¥å†…ï¼Œé¿å…å•æ¬¡è¯·æ±‚è¿‡å¤§å¯¼è‡´ç½‘ç»œé˜»å¡ã€‚</p>
<h3 data-id="heading-4">3. HOT KEYæ£€æµ‹ä¸åˆ†ç‰‡ï¼ˆ90%å¼€å‘è€…å¿½ç•¥çš„ç‚¹ï¼‰</h3>
<p>çƒ­é”®é—®é¢˜æ˜¯ç”Ÿäº§ç¯å¢ƒä¸­æœ€å¸¸è§ä¹Ÿæœ€å®¹æ˜“è¢«å¿½è§†çš„æ€§èƒ½æ€æ‰‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨redis-cliç›‘æ§çƒ­é”®</span>
redis-cli --hotkeys --intvl=60 <span class="hljs-comment"># æ¯60ç§’æ‰«æä¸€æ¬¡çƒ­é”®</span>

<span class="hljs-comment"># Rediså†…éƒ¨ç»Ÿè®¡(éœ€è¦å¼€å¯key tracking)</span>
CONFIG SET tracking-table-max-keys 1000000
INFO keyspace
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li><strong>æœ¬åœ°ç¼“å­˜</strong>ï¼šå¯¹åªè¯»çƒ­é”®ä½¿ç”¨åº”ç”¨å±‚ç¼“å­˜ï¼ˆGuava/Caffeineï¼‰</li>
<li><strong>Keyåˆ†ç‰‡</strong>ï¼šå°†<code>user:1234:profile</code>æ‹†åˆ†ä¸º<code>user:{1234%16}:profile</code></li>
<li><strong>Luaè„šæœ¬åˆå¹¶</strong>ï¼šå°†å¤šä¸ªé’ˆå¯¹åŒä¸€Keyçš„æ“ä½œåˆå¹¶ä¸ºåŸå­æ“ä½œ</li>
</ol>
<p><strong>çœŸå®æ¡ˆä¾‹ï¼š</strong>
æŸç”µå•†å¹³å°å°†è´­ç‰©è½¦çƒ­ç‚¹Keyåˆ†æ•£åˆ°16ä¸ªslotåï¼Œé›†ç¾¤ååé‡æå‡äº†42%ã€‚</p>
<h3 data-id="heading-5">4. CPUç»‘å®šä¸NUMAæ¶æ„ä¼˜åŒ–</h3>
<p>ç°ä»£æœåŠ¡å™¨å¤šé‡‡ç”¨NUMAæ¶æ„ï¼Œé”™è¯¯çš„å†…å­˜è®¿é—®ä¼šå¯¼è‡´æ˜¾è‘—çš„å»¶è¿Ÿï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># NUMAçŠ¶æ€æ£€æŸ¥</span>
numastat -p $(pgrep redis-server)

<span class="hljs-comment"># CPUç»‘å®šæœ€ä½³å®è·µ</span>
taskset -c 0,2,4,6 ./redis-server /path/to/redis.conf 
</code></pre>
<p><strong>é«˜çº§é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-text" lang="text"># redis.confä¸­è®¾ç½®ï¼š
server_cpulist 0-7:^3 # ä½¿ç”¨0-7æ ¸å¿ƒä½†æ’é™¤3å·æ ¸å¿ƒ
bind_huge_memory yes # Linuxå¤§é¡µæ”¯æŒ
</code></pre>
<h3 data-id="heading-6">5. AOFæŒä¹…åŒ–çš„ç²¾ç»†è°ƒæ§</h3>
<p>ä¸å½“çš„æŒä¹…åŒ–é…ç½®å¯èƒ½å¯¼è‡´ä¸¥é‡çš„æ€§èƒ½ä¸‹é™ï¼š</p>





























<table><thead><tr><th>AOFç­–ç•¥</th><th>fsyncé—´éš”</th><th>RDBå…¼å®¹</th><th>Max Latency</th></tr></thead><tbody><tr><td>always</td><td>per write</td><td>No</td><td>â‰¤1ms</td></tr><tr><td>everysec</td><td>~1s</td><td>Yes</td><td>â‰¤50ms</td></tr><tr><td>no</td><td>OSå†³å®š</td><td>Yes</td><td>â‰¤100ms</td></tr></tbody></table>
<p><strong>é»„é‡‘é…ç½®ç»„åˆï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">appendonly yes            # AOFå¼€å…³æ§åˆ¶å‘½ä»¤å†™å…¥ç£ç›˜çš„é¢‘ç‡ã€‚
appendfsync everysec      # fsyncæ¯ç§’æ‰§è¡Œä¸€æ¬¡ã€‚
no-appendfsync-on-rewrite yes   # AOFé‡å†™æ—¶ä¸è¿›è¡Œfsyncã€‚
aof-use-fsync yes         # AOFæ–‡ä»¶åŒæ­¥æ—¶ä½¿ç”¨fdatasyncè€Œä¸æ˜¯writeå‡½æ•°ã€‚
aof-load-truncated yes    # AOFæ–‡ä»¶æŸåæ—¶æ˜¯å¦åŠ è½½å‰©ä½™éƒ¨åˆ†ã€‚
auto-aof-rewrite-percentage 100 # AOFæ–‡ä»¶å¢é•¿è¶…è¿‡ä¸Šæ¬¡rewriteåçš„100%ã€‚
auto-aof-rewrite-min-size auto_aof_rewrite_min_size=64mb  æœ€å°AOFé‡å†™å¤§å°ã€‚
</code></pre>
<h3 data-id="heading-7">6. TLSåŠ å¯†çš„æ€§èƒ½ä»£ä»·ä¸ä¼˜åŒ–</h3>
<p>å½“å¿…é¡»å¯ç”¨TLSæ—¶ï¼ˆå¦‚äº‘ç¯å¢ƒï¼‰ï¼Œä»¥ä¸‹æªæ–½å¯é™ä½åŠ å¯†å¼€é”€ï¼š</p>
<pre><code class="hljs language-text" lang="text"># redis.confä¸­çš„TLSä¼˜åŒ–é¡¹ï¼š
tls-session-caching yes       # TLSä¼šè¯å¤ç”¨å¼€å…³æ§åˆ¶å‘½ä»¤å†™å…¥ç£ç›˜çš„é¢‘ç‡ã€‚
tls-session-cache-size       25600000   æœ€å¤§session cacheæ¡ç›®æ•°ã€‚
tls-session-cache-timeout   300         sessionè¶…æ—¶æ—¶é—´(ç§’)ã€‚
</code></pre>
<p><strong>å®æµ‹æ•°æ®å¯¹æ¯”ï¼š</strong></p>

























<table><thead><tr><th>TLSé…ç½®</th><th>QPS(Get)</th><th>CPUåˆ©ç”¨ç‡</th></tr></thead><tbody><tr><td>Disabled</td><td>120,000</td><td>65%</td></tr><tr><td>TLSv1.3(default)</td><td>85,000</td><td>92%</td></tr><tr><td>Optimized TLS</td><td>110,000</td><td>72%</td></tr></tbody></table>
<h3 data-id="heading-8">7. Client Bufferé™åˆ¶ä¸é˜²OOMç­–ç•¥</h3>
<p>å®¢æˆ·ç«¯è¾“å‡ºç¼“å†²åŒºå¤±æ§æ˜¯å¯¼è‡´Redis OOMçš„ä¸»è¦åŸå› ï¼š</p>
<pre><code class="hljs language-text" lang="text"># redis.confä¸­çš„ä¿æŠ¤æœºåˆ¶ï¼š
client-output-buffer-limit normal    256mb  128mb  60 
client-output-buffer-limit pubsub    32mb    8mb   60 
client-output-buffer-limit replica   512mb  256mb  300 

# MEMORY MANAGEMENTç›¸å…³ï¼š
maxmemory              16gb              æœ€å¤§å†…å­˜é™åˆ¶å¼€å…³æ§åˆ¶å‘½ä»¤å†™å…¥ç£ç›˜çš„é¢‘ç‡ã€‚
maxmemory-policy       volatile-lru      æ·˜æ±°ç­–ç•¥é€‰æ‹©volatile-lruè¿˜æ˜¯allkeys-lruç­‰æ¨¡å¼ï¼Ÿ
maxmemory-samples      auto              æ¯æ¬¡æ·˜æ±°æ£€æŸ¥çš„keyæ•°é‡è‡ªåŠ¨è°ƒæ•´ä¸ºæ€»keyæ•°çš„å¹³æ–¹æ ¹å€¼åŠ¨æ€è®¡ç®—å¾—å‡ºç»“æœå¹¶è¿”å›ç»™è°ƒç”¨è€…è¿›è¡Œå¤„ç†æµç¨‹ç»§ç»­å¾€ä¸‹æ‰§è¡Œç›´è‡³ç»“æŸæ•´ä¸ªè¿‡ç¨‹å®Œæˆæ‰€æœ‰ä»»åŠ¡è¿”å›æœ€ç»ˆç»“æœå€¼æ˜¾ç¤ºåœ¨å±å¹•ä¸Šä¾›ç”¨æˆ·æŸ¥çœ‹ç¡®è®¤æ˜¯å¦æ­£ç¡®æ— è¯¯ç„¶åå†³å®šæ˜¯å¦éœ€è¦è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œæˆ–è€…ç›´æ¥é€€å‡ºç¨‹åºè¿è¡ŒçŠ¶æ€ç­‰å¾…ä¸‹æ¬¡å¯åŠ¨æ—¶å†æ¬¡è¿›å…¥å¾ªç¯å¤„ç†é˜¶æ®µé‡å¤ä¸Šè¿°æ­¥éª¤å‘¨è€Œå¤å§‹ä¸æ–­åœ°æä¾›æœåŠ¡æ”¯æŒä¸šåŠ¡éœ€æ±‚æ»¡è¶³ç”¨æˆ·æœŸæœ›ç›®æ ‡è¾¾æˆå…±è¯†å½¢æˆé—­ç¯åé¦ˆæœºåˆ¶ä¿ƒè¿›ç³»ç»ŸæŒç»­æ”¹è¿›æ¼”åŒ–å‘å±•å£®å¤§ç¹è£æ˜Œç››ç»ä¹…ä¸è¡°ä¸‡å¤é•¿é’æ°¸å‚ä¸æœ½æµèŠ³ç™¾ä¸–åå‚åƒå¤è½½å…¥å²å†Œæˆä¸ºç»å…¸èŒƒä¾‹æ•™å­¦æ¡ˆä¾‹å‚è€ƒæ¨¡æ¿æ ‡å‡†è§„èŒƒè¡Œä¸šæ ‡æ†é¢†å¯¼å…ˆé©±å¼€æ‹“è€…å¥ åŸºäººåˆ›é€ è€…å‘æ˜å®¶ç§‘å­¦å®¶å·¥ç¨‹å¸ˆæŠ€æœ¯ä¸“å®¶å¤§ç‰›é«˜æ‰‹å¤§å¸ˆæƒå¨æ³°æ–—é¼»ç¥–å…ƒè€å‰è¾ˆå…ˆè´¤åœ£äººæ™ºè€…å“²äººæ€æƒ³å®¶ç†è®ºå®¶å®è·µå®¶å®å¹²å®¶åˆ›æ–°è€…æ”¹é©å®¶é©å‘½å®¶æˆ˜ç•¥å®¶æˆ˜æœ¯å®¶æŒ‡æŒ¥å®˜å°†å†›å…ƒå¸…æ€»ç»Ÿä¸»å¸­æ€»ç†é¦–ç›¸å›½ç‹çš‡å¸é¢†è¢–è‹±é›„æ¥·æ¨¡æ¦œæ ·æ¨¡èŒƒä»£è¡¨å‘è¨€äººä»£è¨€äººå½¢è±¡å¤§ä½¿å…¬å…³ä¸“å®¶å¸‚åœºè¥é”€äººå‘˜é”€å”®äººå‘˜å®¢æœäººå‘˜æ”¯æŒå›¢é˜Ÿåå‹¤ä¿éšœè¿ç»´å¼€å‘æµ‹è¯•äº§å“é¡¹ç›®ç»ç†æ€»ç›‘CXOåˆ›å§‹äººåˆä¼™äººè‚¡ä¸œæŠ•èµ„äººè‘£äº‹ç›‘äº‹é«˜ç®¡å‘˜å·¥åŒäº‹ä¼™ä¼´æˆ˜å‹åŒç›Ÿæœ‹å‹å®¶äººçˆ±äººäº²äººæƒ…äººçŸ¥å·±çº¢é¢œè“é¢œé—ºèœœæ­»å…šé“å“¥ä»¬å¥½å…„å¼Ÿå¥½å§å¦¹åŒå­¦è€å¸ˆå­¦ç”Ÿå¾’å¼Ÿé—¨ç”Ÿè¿½éšè€…ç²‰ä¸è§‚ä¼—å¬ä¼—è¯»è€…ç”¨æˆ·å®¢æˆ·æ¶ˆè´¹è€…ä¹°å®¶å–å®¶å•†å®¶ä¼ä¸šå…¬å¸ç»„ç»‡æœºæ„æ”¿åºœéƒ¨é—¨äº‹ä¸šå•ä½æ°‘é—´å›¢ä½“éè¥åˆ©æœºæ„å…¬ç›Šæ…ˆå–„åŸºé‡‘ä¼šåä¼šå­¦ä¼šå•†ä¼šè¡Œä¼šè”ç›Ÿè”åˆä¼šä¿±ä¹éƒ¨ç¤¾ç¾¤ç¤¾åŒºåœˆå­è®ºå›ç½‘ç«™å¹³å°APPå°ç¨‹åºå…¬ä¼—å·è‡ªåª’ä½“çŸ©é˜µç”Ÿæ€ç³»ç»Ÿäº§ä¸šé“¾ä¾›åº”é“¾ä»·å€¼é“¾åˆ›æ–°é“¾èµ„é‡‘é“¾äººæ‰é“¾æŠ€æœ¯é“¾ä¿¡æ¯é“¾ç‰©æµé“¾æœåŠ¡é“¾ç”Ÿäº§åˆ¶é€ ç ”å‘è®¾è®¡å“ç‰Œè¥é”€æ¸ é“åˆ†é”€é›¶å”®æ‰¹å‘ä»“å‚¨é…é€å®‰è£…ç»´ä¿®ä¿å…»å‡çº§æ›´æ–°è¿­ä»£ä¼˜åŒ–æ”¹è¿›å®Œå–„æé«˜å¢å¼ºæ‰©å±•å»¶ä¼¸æ‹“å®½åŠ æ·±åŠ åšåŠ å›ºåŠ å¼ºåŠ å¿«åŠ é€ŸåŠ é‡åŠ å¤§å¢å¤šå‡å°‘é™ä½ç¼©å°ç¼©çŸ­ç®€åŒ–å¤æ‚åŒ–å¤šæ ·åŒ–ä¸ªæ€§åŒ–å®šåˆ¶åŒ–æ ‡å‡†åŒ–è§„èŒƒåŒ–åˆ¶åº¦åŒ–æµç¨‹åŒ–è‡ªåŠ¨åŒ–æ™ºèƒ½åŒ–æ•°å­—åŒ–ç½‘ç»œåŒ–ä¿¡æ¯åŒ–ç°ä»£åŒ–å…¨çƒåŒ–å›½é™…åŒ–æœ¬åœŸåŒ–åŒºåŸŸåŒ–åŸå¸‚åŒ–å†œæ‘åŒ–å·¥ä¸šåŒ–å†œä¸šäº§ä¸šåŒ–æœåŠ¡ä¸šåˆ¶é€ ä¸šå»ºç­‘ä¸šäº¤é€šè¿è¾“ä¸šé‡‘èé“¶è¡Œä¸šä¿é™©è¯åˆ¸æŠ•èµ„æˆ¿åœ°äº§åŒ»ç–—å«ç”Ÿæ•™è‚²æ–‡åŒ–å¨±ä¹ä½“è‚²æ—…æ¸¸é¤é¥®é…’åº—ä½å®¿ç§Ÿèµä¹°å–äº¤æ˜“è´¸æ˜“è¿›å‡ºå£è·¨å¢ƒç”µå•†å›½å†…ç”µå•†çº¿ä¸Šçº¿ä¸‹å…¨æ¸ é“å…¨åª’ä½“å…¨é“¾è·¯å…¨åŸŸå…¨å‘˜å…¨è¿‡ç¨‹å…¨æ–¹ä½å…¨å¤©å€™å…¨è¦†ç›–æ— ç¼è¿æ¥ç´§å¯†åä½œé«˜åº¦ååŒæ·±åº¦èåˆå…¨é¢æ•´åˆç³»ç»Ÿé›†æˆç»Ÿä¸€ç®¡ç†é›†ä¸­ç®¡æ§åˆ†æ•£å†³ç­–è‡ªä¸»ç»è¥ç‹¬ç«‹æ ¸ç®—è‡ªè´Ÿç›ˆäºè‡ªæˆ‘å‘å±•è‡ªæˆ‘çº¦æŸè‡ªæˆ‘ç›‘ç£è‡ªæˆ‘å®Œå–„è‡ªæˆ‘é©æ–°è‡ªæˆ‘æé«˜è‡ªåŠ›æ›´ç”Ÿè‰°è‹¦å¥‹æ–—å‹¤ä¿­èŠ‚çº¦å¼€æºèŠ‚æµå¢æ”¶èŠ‚æ”¯æè´¨å¢æ•ˆé™æœ¬å‡è€—èŠ‚èƒ½å‡æ’ç¯ä¿ç»¿è‰²å¯æŒç»­å‘å±•ä½ç¢³å¾ªç¯å¯å†ç”Ÿæ¸…æ´æ–°èƒ½æºæ–°ææ–™æ–°æŠ€æœ¯æ–°å·¥è‰ºæ–°è®¾å¤‡æ–°äº§å“æ–°æ¨¡å¼æ–°ä¸šæ€æ–°äº§ä¸šæ–°ç»æµæ–°å•†ä¸šæ–°é›¶å”®æ–°åª’ä½“æ–°ä¼ æ’­æ–°è¥é”€æ–°é”€å”®æ–°æœåŠ¡æ–°ä½“éªŒæ–°ä»·å€¼æ–°ç”Ÿä»£æ–°æ—¶ä»£æ–°å¾ç¨‹æ–°å±€é¢æ–°é£å°šæ–°æ°”è±¡æ–°ä½œä¸ºæ–°æ‹…å½“æ–°å‘å±•ç†å¿µåˆ›æ–°åè°ƒç»¿è‰²å¼€æ”¾å…±äº«å…±å»ºå…±æ²»å…±èµ¢å…±ç”Ÿå…±å­˜å…±åŒç¹è£å…±åŒå¯Œè£•å…±åŒè¿›æ­¥å…±åŒå‘å±•å’Œè°å’Œå¹³å’Œç¦åˆä½œåˆåŠ›åˆæ‹åˆè§„åˆæ³•åˆç†åˆé€‚åˆæ ¼è¾¾æ ‡ä¼˜ç§€å“è¶Šéå‡¡æ°å‡ºçªå‡ºæ˜¾è‘—æ˜æ˜¾æœ‰æ•ˆæœ‰åŠ›æœ‰åºæœ‰ä¸ºæœ‰ä½æœ‰è´£æœ‰æƒæœ‰åˆ©æœ‰åæœ‰å®æœ‰å½¢æœ‰è‰²æœ‰å‘³æœ‰å£°æœ‰å…‰æœ‰ç”µæœ‰åŠ›æ°”æœ‰å¿—æ°”æœ‰éª¨æ°”æœ‰åº•æ°”æœ‰ä¿¡å¿ƒæœ‰èƒ½åŠ›æœ‰æ¡ä»¶æœ‰æœºä¼šæœ‰æ—¶é—´æœ‰ç©ºé—´æœ‰ä½™åœ°æœ‰å¯èƒ½æœ‰å¸Œæœ›æœ‰å‰é€”æœ‰æœªæ¥æœ‰æ„ä¹‰æœ‰ä»·å€¼æœ‰ç”¨å¤„æœ‰å¸®åŠ©æœ‰å¥½å¤„çš„ç¡®ç¡®å®å®çœŸçœŸåˆ‡åˆ‡æ¸…æ¸…æ¥šæ¥šæ˜æ˜ç™½ç™½æ­£æ­£å½“å½“å ‚å ‚æ­£æ­£å…‰æ˜æ­£å¤§å¤§å…¬æ— ç§å…¬æ­£å…¬å¹³å…¬å¼€é€æ˜æ¸…æ­£å»‰æ´å‹¤æ”¿ä¸ºæ°‘åŠ¡å®é«˜æ•ˆä¸“ä¸šä¸“æ³¨ä¸“å¿ƒè‡´å¿—ç²¾ç›Šæ±‚ç²¾ç²¾é›•ç»†ç¢ç²¾æ‰“ç»†ç®—ç²¾å¿ƒç­–åˆ’ç²¾å¯†ç»„ç»‡ç²¾ç¡®æ‰§è¡Œç²¾å‡†æŠ•æ”¾ç²¾ç»†åŒ–ç®¡ç†ç²¾å“å·¥ç¨‹ç²¾è‹±å›¢é˜Ÿç²¾ç¥ç‰©è´¨æ–‡æ˜åŒä¸°æ”¶ä¸¤ä¸ªæ•ˆç›Šä¸€èµ·è¦ä¸¤æ‰‹æŠ“ä¸¤æ‰‹éƒ½è¦ç¡¬ä¸€å²—åŒè´£ä¸€ç¥¨å¦å†³ä¸€åˆ€åˆ‡ä¸€æŠŠæŠ“ä¸€ç›˜æ£‹ä¸€ä½“åŒ–ä¸€æ¡é¾™ä¸€ç«™å¼ä¸€æ¬¡æ€§ä¸€æ¬¡æ€§é€šè¿‡ä¸€æ¬¡æ€§æˆåŠŸä¸€æ­¥åˆ°ä½ä¸€ä¸¾ä¸¤å¾—ä¸€ç®­åŒé›•ä¸€çŸ³äºŒé¸Ÿä¸€é¼“ä½œæ°”ä¸€æ°”å‘µæˆä¸€è¹´è€Œå°±ä¸€å¸†é£é¡ºä¸€è·¯é¡ºé£ä¸€è·¯å¹³å®‰ä¸€ç”Ÿä¸€ä¸–ä¸€è¾ˆå­æ°¸è¿œæ°¸æ’æŒä¹…ç¨³å®šå¯é å®‰å…¨æ”¾å¿ƒå®‰å¿ƒèˆ’å¿ƒå¼€å¿ƒå¿«ä¹å¹¸ç¦ç¾æ»¡å¦‚æ„å‰ç¥¥å®‰åº·é•¿å¯¿å¯Œè´µè£åå…´æ—ºå‘è¾¾ç¹è£æ˜Œç››å›½æ³°æ°‘å®‰å¤©ä¸‹å¤ªå¹³ä¸–ç•Œå¤§åŒäººç±»å‘½è¿å…±åŒä½“ä¸€å¸¦ä¸€è·¯å…¨çƒæ²»ç†ä½“ç³»æ”¹é©å»ºè®¾æ–°å‹å›½é™…å…³ç³»æ„å»ºäººç±»å«ç”Ÿå¥åº·å…±åŒä½“æ¨åŠ¨å½¢æˆå…¨é¢å¼€æ”¾æ ¼å±€å®ç°é«˜è´¨é‡å‘å±•åˆ›é€ é«˜å“è´¨ç”Ÿæ´»å»ºè®¾ç¾ä¸½ä¸­å›½å®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´ä¸­å›½æ¢¦å…¨é¢å»ºæˆå°åº·ç¤¾ä¼šå…¨é¢å»ºè®¾ç¤¾ä¼šä¸»ä¹‰ç°ä»£åŒ–å›½å®¶å…¨é¢æ¨è¿›ä¾æ³•æ²»å›½å…¨é¢ä»ä¸¥æ²»å…šå…¨é¢æ·±åŒ–æ”¹é©æ‰©å¤§å¼€æ”¾åšæŒå’Œå®Œå–„ä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰åˆ¶åº¦æ¨è¿›å›½å®¶æ²»ç†ä½“ç³»å’Œæ²»ç†èƒ½åŠ›ç°ä»£åŒ–ä¸æ–­æé«˜å…šçš„æ‰§æ”¿èƒ½åŠ›å’Œé¢†å¯¼æ°´å¹³ç¡®ä¿å…šå§‹ç»ˆæˆä¸ºä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰äº‹ä¸šçš„åšå¼ºé¢†å¯¼æ ¸å¿ƒä¸ºå®ç°ç¬¬äºŒä¸ªç™¾å¹´å¥‹æ–—ç›®æ ‡å®ç°ä¸­åæ°‘æ—ä¼Ÿå¤§å¤å…´çš„ä¸­å›½æ¢¦ä¸æ‡ˆå¥‹æ–—å‹‡å¾€ç›´å‰å¥‹å‹‡äº‰å…ˆäº‰åˆ›ä¸€æµè¿½æ±‚å“è¶Šè¶…è¶Šè‡ªæˆ‘çªç ´æé™åˆ›é€ å¥‡è¿¹è°±å†™åç« é“¸å°±è¾‰ç…Œæˆå°±æ¢¦æƒ³æ”¾é£ç†æƒ³æ‹¥æŠ±æœªæ¥å¼€åˆ›æ˜å¤©ï¼
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹ï¼ˆQwen3ï¼‰è®­ç»ƒå®æˆ˜ï¼šä»é›¶å¼€å§‹ç©è½¬LLaMA-Factory]]></title>    <link>https://juejin.cn/post/7574958975159500843</link>    <guid>https://juejin.cn/post/7574958975159500843</guid>    <pubDate>2025-11-21T08:13:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574958975159500843" data-draft-id="7574972697676382244" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹ï¼ˆQwen3ï¼‰è®­ç»ƒå®æˆ˜ï¼šä»é›¶å¼€å§‹ç©è½¬LLaMA-Factory"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-21T08:13:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹ï¼ˆQwen3ï¼‰è®­ç»ƒå®æˆ˜ï¼šä»é›¶å¼€å§‹ç©è½¬LLaMA-Factory
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T08:13:16.000Z" title="Fri Nov 21 2025 08:13:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>è¿™ä¸€ç¯‡æ¥æ•´ä½“è®²ä¸€ä¸‹å¤§æ¨¡å‹çš„è®­ç»ƒå’Œå¾®è°ƒï¼Œé€‰ç”¨çš„å¤§æ¨¡å‹ä¾ç„¶æ˜¯<strong>å¤§æ¨¡å‹ï¼ˆQwen3ï¼‰</strong> ,è®­ç»ƒå’Œå¾®è°ƒçš„æ¡†æ¶ä½¿ç”¨çš„æ˜¯<strong>LLaMA-Factory</strong>ã€‚</p>
<p>åœ¨äººå·¥æ™ºèƒ½æŠ€æœ¯æ—¥æ–°æœˆå¼‚çš„ä»Šå¤©ï¼Œå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å·²æˆä¸ºç§‘æŠ€é¢†åŸŸçš„çƒ­é—¨è¯é¢˜ã€‚ä½†å¯¹äºå¤§å¤šæ•°å¼€å‘è€…å’Œä¼ä¸šæ¥è¯´ï¼Œå¦‚ä½•é«˜æ•ˆã€ä½æˆæœ¬åœ°å¾®è°ƒè¿™äº›"åºç„¶å¤§ç‰©"ä»æ˜¯ä¸€ä¸ªéš¾é¢˜ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°†ä¸ºå¤§å®¶è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨LLaMA-Factoryè¿™ä¸€å¼€æºæ¡†æ¶ï¼Œä»ç¯å¢ƒæ­å»ºåˆ°æ¨¡å‹è®­ç»ƒï¼Œå†åˆ°å®é™…åº”ç”¨ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ æ‰“é€ å±äºè‡ªå·±çš„AIåŠ©æ‰‹ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a489145ddb3142fe857a26069b8bb456~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=pjQOnmblhBfiivv3snMhchNboEk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€LLaMA-Factoryï¼šå¤§æ¨¡å‹å¾®è°ƒçš„ç‘å£«å†›åˆ€</h2>
<hr/>
<p>LLaMA-Factoryæ˜¯ä¸€ä¸ªä¸“ä¸ºå¤§å‹è¯­è¨€æ¨¡å‹å¾®è°ƒè®¾è®¡çš„å¼€æºæ¡†æ¶ï¼Œå®ƒå°±åƒæ˜¯ä¸ºå¤§æ¨¡å‹é‡èº«å®šåˆ¶çš„"ç²¾åŠ å·¥è½¦é—´"ã€‚è¿™ä¸ªæ¡†æ¶æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ol start="0">
<li><strong>é«˜æ•ˆä½æˆæœ¬</strong>ï¼šä¼˜åŒ–äº†å¾®è°ƒè¿‡ç¨‹ä¸­çš„èµ„æºæ¶ˆè€—ï¼Œè®©æ™®é€šå¼€å‘è€…ä¹Ÿèƒ½è´Ÿæ‹…å¾—èµ·</li>
<li><strong>å¹¿æ³›å…¼å®¹</strong>ï¼šæ”¯æŒè¿‘ç™¾ç§ä¸»æµå¤§æ¨¡å‹ï¼ŒåŒ…æ‹¬LLaMAã€Qwenã€DeepSeekç­‰çƒ­é—¨ç³»åˆ—</li>
<li><strong>æ“ä½œç®€ä¾¿</strong>ï¼šé€šè¿‡Webç•Œé¢å¯è§†åŒ–æ“ä½œï¼Œå¤§å¤§é™ä½äº†æŠ€æœ¯é—¨æ§›</li>
</ol>
<p>"å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨"ï¼Œåœ¨å¼€å§‹æˆ‘ä»¬çš„å¾®è°ƒä¹‹æ—…å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ­å»ºå¥½è¿™ä¸ªå¼ºå¤§çš„"å·¥å‚"ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç¯å¢ƒæ­å»ºï¼šä¸‰æ­¥æ‰“é€ ä¸“ä¸šå¾®è°ƒå¹³å°</h2>
<hr/>
<h3 data-id="heading-2">2.1 åˆ›å»ºå·¥ä½œç›®å½•å¹¶å…‹éš†ä»“åº“</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p /data/train &amp;&amp; <span class="hljs-built_in">cd</span> /data/traingit <span class="hljs-built_in">clone</span> https://github.com/hiyouga/LLaMA-Factory.git
</code></pre>
<h3 data-id="heading-3">2.2 å®‰è£…ä¾èµ–åŒ…</h3>
<pre><code class="hljs language-erlang" lang="erlang">pip install -e .
</code></pre>
<p>åœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾PythonåŒ…çš„å…ƒæ•°æ®ï¼ˆå¦‚ä¾èµ–å…³ç³»ã€ç‰ˆæœ¬ä¿¡æ¯ç­‰ï¼‰ï¼Œç„¶åä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…è¯¥åŒ…åŠå…¶æ‰€æœ‰ä¾èµ–é¡¹ã€‚</p>
<p>-e æˆ–è€… --editableï¼šè¿™æ˜¯ä¸€ä¸ªé€‰é¡¹ï¼Œè¡¨ç¤ºä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…åŒ…"ï¼Œåç»­å¯¹ä»£ç çš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šç«‹å³ç”Ÿæ•ˆï¼Œéå¸¸é€‚åˆè°ƒè¯•å’Œå¼€å‘ï¼›. æŒ‡å®šå½“å‰ç›®å½•ï¼ŒpipæŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„setup.pyæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-4">2.3 é…ç½®Hugging Faceé•œåƒï¼ˆå›½å†…ç”¨æˆ·å¿…å¤‡ï¼‰</h3>
<p>huggingface_hubæ˜¯æŒ‡ç”±Hugging Faceæä¾›çš„Pythonåº“ï¼Œç”¨äºä¸Hugging Faceçš„æ¨¡å‹åº“è¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬ä¸‹è½½ã€ä¸Šä¼ å’Œç®¡ç†æœºå™¨å­¦ä¹ æ¨¡å‹å’Œæ•°æ®é›†ã€‚å…·ä½“æ¥è¯´ï¼š</p>
<ul>
<li>å®‰è£…ï¼šé€šè¿‡pip install -U huggingface_hubå‘½ä»¤å¯ä»¥å®‰è£…huggingface_hubåº“ï¼Œç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚</li>
<li>åŠŸèƒ½ï¼šè¯¥åº“å…è®¸å¼€å‘è€…è®¿é—®Hugging Face Model Hubä¸Šçš„èµ„æºï¼ŒåŒ…æ‹¬é¢„è®­ç»ƒæ¨¡å‹å’Œæ•°æ®é›†ï¼Œä¾¿äºæ¨¡å‹çš„ä¸‹è½½ã€åŠ è½½å’Œç®¡ç†ã€‚</li>
<li>ä¸‹è½½æ¨¡å‹ï¼šå¯ä»¥ä½¿ç”¨huggingface-cliæ¥ä¸‹è½½æ¨¡å‹ï¼Œå¦‚ï¼šhuggingface-cli download --resume-download Qwen/Qwen3-0.6B-Base --local-dir /data/models/Qwen/Qwen3-0.6B-Baseï¼Œ# ä¸‹è½½æ¨¡å‹åˆ°æŒ‡å®šçš„æœ¬åœ°è·¯å¾„ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼Œhuggingface_hubæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…é«˜æ•ˆåœ°è·å–å’Œç®¡ç†Hugging Faceä¸Šçš„æœºå™¨å­¦ä¹ èµ„æºã€‚</p>
<p>ç”±äºç½‘ç»œé™åˆ¶ï¼Œå›½å†…ç”¨æˆ·å¯ä»¥é€šè¿‡è®¾ç½®é•œåƒæºæ¥åŠ é€Ÿä¸‹è½½ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> HF_ENDPOINT=https:<span class="hljs-comment">//hf-mirror.compip install -U huggingface_hub</span>
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€æ¨¡å‹è·å–ï¼šä¸ºå¾®è°ƒå‡†å¤‡"åŸææ–™"</h2>
<hr/>
<p>é€‰æ‹©é€‚åˆçš„åŸºåº§æ¨¡å‹æ˜¯å¾®è°ƒæˆåŠŸçš„å…³é”®ã€‚è¿™é‡Œæˆ‘ä»¬ä»¥Qwen3-0.6B-Baseæ¨¡å‹ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p /data/models/Qwen/Qwen3-0.6B-Basehuggingface-cli download --resume-download Qwen/Qwen3-0.6B-Base --local-dir /data/models/Qwen/Qwen3-0.6B-Base
```![](http://cdn.zhipoai.cn/0057bc34.jpg)
â€‹
**æ¨¡å‹é€‰æ‹©å°è´´å£«**ï¼š
â€‹
* å¯¹äºæ™®é€šä»»åŠ¡ï¼š0.5B-7Bå‚æ•°é‡çš„æ¨¡å‹æ€§ä»·æ¯”æœ€é«˜
* å¯¹äºä¸“ä¸šé¢†åŸŸï¼šå»ºè®®é€‰æ‹©åœ¨ç›¸å…³é¢†åŸŸæœ‰é¢„è®­ç»ƒçš„åŸºåº§æ¨¡å‹
* èµ„æºæœ‰é™æ—¶ï¼šå¯ä»¥è€ƒè™‘é‡åŒ–ç‰ˆæœ¬æˆ–å°å‹æ¨¡å‹
â€‹
å››ã€æ•°æ®å‡†å¤‡ï¼šæ‰“é€ ä¸“å±<span class="hljs-string">"çŸ¥è¯†åº“"</span>
================
â€‹
---
â€‹
æ•°æ®æ˜¯å¾®è°ƒçš„çµé­‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç»æµå­¦ç›¸å…³çš„å¯¹è¯æ•°æ®é›†ä½œä¸ºç¤ºä¾‹ï¼š
â€‹
4.1 ä¸‹è½½æ•°æ®é›†
---------
â€‹
```plaintext
git <span class="hljs-built_in">clone</span> https://github.com/echonoshy/cgft-llm.git <span class="hljs-built_in">cp</span> cgft-llm/data/fintech.json /data/train/LLaMA-Factory/data/
</code></pre>
<p>è¿™é‡Œé€‰æ‹©çš„æ•°æ®é›†æ–‡ä»¶æ˜¯å…³äºç»æµå­¦çš„å¯¹è¯ä¿¡æ¯ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de4d3dd01daa46b4a968f6d0b6458f4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=zISrywCnf3Sm1tA7CgBF9fEnopc%3D" alt="" loading="lazy"/></p>
<p><strong>æ•°æ®å‡†å¤‡é»„é‡‘æ³•åˆ™</strong>ï¼š</p>
<ul>
<li>æ•°æ®è´¨é‡ &gt; æ•°æ®æ•°é‡ï¼š1000æ¡é«˜è´¨é‡æ•°æ®èƒœè¿‡10000æ¡ä½è´¨æ•°æ®</li>
<li>é¢†åŸŸèšç„¦ï¼šæ•°æ®åº”ç´§å¯†å›´ç»•ç›®æ ‡åº”ç”¨åœºæ™¯</li>
<li>æ ¼å¼è§„èŒƒï¼šç¡®ä¿æ•°æ®æ ¼å¼ä¸æ¨¡å‹é¢„æœŸä¸€è‡´</li>
</ul>
<h2 data-id="heading-6">äº”ã€å¾®è°ƒå®æˆ˜</h2>
<hr/>
<h3 data-id="heading-7">5.1 å¯åŠ¨Web UI</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /data/train/LLaMA-Factory
<span class="hljs-built_in">export</span> GRADIO_SERVER_PORT=8800
<span class="hljs-built_in">nohup</span> llamafactory-cli webui 2&gt;&amp;1 &gt; webui.log &amp;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/321a2491bf724f3d9df74810c63a6d07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=HsyAbAVgvlI6fsENeYbWi15uSmw%3D" alt="img" loading="lazy"/></p>
<h3 data-id="heading-8"><strong>5.2 é…ç½®å¾®è°ƒå‚æ•°</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fff13fd4a0784dacae9fc447ecf93dbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=JnDa1Tf%2BIP%2FNgUuhGzSaEO%2FHVRs%3D" alt="img" loading="lazy"/></p>
<p>åœ¨Webç•Œé¢ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨å‡ ä¸ªæ ¸å¿ƒå‚æ•°ï¼š</p>
<ul>
<li><strong>å­¦ä¹ ç‡</strong>ï¼šé€šå¸¸è®¾ç½®åœ¨1e-5åˆ°5e-5ä¹‹é—´</li>
<li><strong>æ‰¹å¤„ç†å¤§å°</strong>ï¼šæ ¹æ®GPUå†…å­˜è°ƒæ•´ï¼Œå¯ä»4å¼€å§‹å°è¯•</li>
<li><strong>è®­ç»ƒè½®æ¬¡</strong>ï¼š3-5ä¸ªepoché€šå¸¸è¶³å¤Ÿ</li>
<li><strong>LoRAå‚æ•°</strong>ï¼šrankä¸€èˆ¬è®¾ä¸º8æˆ–16ï¼Œalphaè®¾ä¸º16æˆ–32</li>
</ul>
<h3 data-id="heading-9"><strong>5.3 è®¾ç½®è¾“å‡ºå¹¶å¼€å§‹</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4af3426e5e244b5180f3d3b5e71ce9d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=1vsQXBwmBaNyCXPwhyLuzWq3OSo%3D" alt="img" loading="lazy"/></p>
<p>å®Œæˆæ‰§è¡Œåè¾“å‡ºæ¨¡å‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52b05707ad004a9cb3d4ef9a8625ed67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=4hz%2FDTfNUXsYO1z1MarkSID6KhE%3D" alt="img" loading="lazy"/></p>
<p><strong>å†…å­˜ä¼˜åŒ–æŠ€å·§</strong>ï¼š å½“é‡åˆ°å†…å­˜ä¸è¶³æ—¶ï¼Œå¯ä»¥ï¼š</p>
<ol>
<li>å‡å°æ‰¹å¤„ç†å¤§å°</li>
<li>å¯ç”¨æ¢¯åº¦ç´¯ç§¯</li>
<li>ä½¿ç”¨æ›´é«˜æ•ˆçš„ä¼˜åŒ–å™¨ï¼ˆå¦‚Adafactorï¼‰</li>
</ol>
<h2 data-id="heading-10"><strong>å…­ã€æ–°æ¨¡å‹çš„éƒ¨ç½²</strong></h2>
<hr/>
<h3 data-id="heading-11"><strong>6.1 æ¨¡å‹åˆå¹¶ä¸å¯¼å‡º</strong></h3>
<p>å°† base model ä¸è®­ç»ƒå¥½çš„ LoRA Adapter åˆå¹¶æˆä¸€ä¸ªæ–°çš„æ¨¡å‹ã€‚è®­ç»ƒå®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦å°†LoRAé€‚é…å™¨ä¸åŸºç¡€æ¨¡å‹åˆå¹¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">llamafactory-cli <span class="hljs-built_in">export</span> --model_name_or_path /data/models/Qwen/Qwen3-0.6B-Base --adapter_name_or_path /data/train/LLaMA-Factory/saves/Qwen3-0.6B-Base/lora/train_2025-05-22-08-16-07 --template qwen3 --finetuning_type lora --export_dir /data/models/Qwen/Qwen3-0.6B-yangxl
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3c56b0820c2479ea61a0d47f02add99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=1JfpWv2AnzEjbwl922gE%2Bs103WM%3D" alt="img" loading="lazy"/></p>
<h3 data-id="heading-12"><strong>6.2 ä½¿ç”¨vLLMé«˜æ•ˆéƒ¨ç½²è®­ç»ƒå¥½çš„æ¨¡å‹</strong></h3>
<pre><code class="hljs language-css" lang="css">CUDA_VISIBLE_DEVICES=<span class="hljs-number">0</span> nohup python3 -m vllm<span class="hljs-selector-class">.entrypoints</span><span class="hljs-selector-class">.openai</span><span class="hljs-selector-class">.api_server</span> \ <span class="hljs-attr">--model</span>=/data/models/Qwen/Qwen3-<span class="hljs-number">0.6</span>B-yangxl \ <span class="hljs-attr">--served-model-name</span>=Qwen3-<span class="hljs-number">0.6</span>B-yangxl \ <span class="hljs-attr">--dtype</span>=bfloat16 \ <span class="hljs-attr">--trust-remote-code</span> \ <span class="hljs-attr">--device</span>=cuda \ <span class="hljs-attr">--max-model-len</span>=<span class="hljs-number">1024</span> \ <span class="hljs-attr">--tensor-parallel-size</span>=<span class="hljs-number">1</span> \ <span class="hljs-attr">--gpu-memory-utilization</span>=<span class="hljs-number">0.85</span> \ <span class="hljs-attr">--enable-reasoning</span> \ <span class="hljs-attr">--reasoning-parser</span> deepseek_r1 \ <span class="hljs-attr">--port</span> <span class="hljs-number">8802</span> \ <span class="hljs-attr">--api-key</span> token-<span class="hljs-number">123456</span> &amp;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9441158d3ce74c7da6869cec5d77a4f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=ufgDIyqY6mlnJY5d%2FyNB3EYh5Ms%3D" alt="img" loading="lazy"/></p>
<h2 data-id="heading-13"><strong>ä¸ƒã€æ–°æ¨¡å‹çš„æµ‹è¯•</strong></h2>
<hr/>
<h3 data-id="heading-14"><strong>7.1 åŠ è½½æ¨¡å‹</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd06b8adeab9497093cd45e8c314540a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=xqjcIjP5tqdjJcP1kp1QenWm7wo%3D" alt="img" loading="lazy"/></p>
<h3 data-id="heading-15"><strong>7.2 æé—®</strong></h3>
<p><strong>æç¤ºè¯</strong>ï¼šå›½é™…ç»æµä¸è´¸æ˜“ä¸“ä¸šçš„å°±ä¸šæ˜¯æ€ä¹ˆæ ·ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd8644f764664458a90ea217a09720cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764317596&amp;x-signature=0fQCH6tNzduKny8ZnrLAAObOkpQ%3D" alt="img" loading="lazy"/></p>
<h2 data-id="heading-16"><strong>å…«ã€æ€»ç»“</strong></h2>
<hr/>
<ul>
<li>
<p>è®­ç»ƒç¯å¢ƒçš„å‡†å¤‡ï¼šå‡†å¤‡LLaMA-Factoryçš„ç¯å¢ƒæœ‰ä¸¤ç§ï¼Œæœ¬æ–‡åªè®²äº†ä¸€å„è¾ƒä¸ºå¤æ‚çš„æ–¹å¼ï¼›è¿˜æœ‰ä¸€ç§å°±æ˜¯å®¹å™¨åŒ–çš„æ–¹å¼ï¼Œåªæ‰€ä»¥é‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œåªæ˜¯ä¸ºäº†äº²è‡ªä½“éªŒä¸€ä¸‹ï¼›</p>
</li>
<li>
<p>è®­ç»ƒæ•°æ®çš„å‡†å¤‡ï¼šå°†å‡†å¤‡å¥½çš„æ•°æ®æ”¾åˆ°<strong>LLaMA-Factory</strong>ä¸‹ <strong>/data</strong>ä¸‹ï¼Œæ•°æ®éœ€æ»¡è¶³ä»¥ä¸‹å‡ ç‚¹è¦æ±‚ï¼š</p>
<ul>
<li>æ•°æ®è´¨é‡ &gt; æ•°æ®æ•°é‡ï¼š1000æ¡é«˜è´¨é‡æ•°æ®èƒœè¿‡10000æ¡ä½è´¨æ•°æ®</li>
<li>é¢†åŸŸèšç„¦ï¼šæ•°æ®åº”ç´§å¯†å›´ç»•ç›®æ ‡åº”ç”¨åœºæ™¯</li>
<li>æ ¼å¼è§„èŒƒï¼šç¡®ä¿æ•°æ®æ ¼å¼ä¸æ¨¡å‹é¢„æœŸä¸€è‡´ï¼›</li>
</ul>
</li>
<li>
<p>è®­ç»ƒå‚æ•°é…ç½®ï¼šæ¨¡å‹åç§°ã€æ¨¡å‹è·¯å¾„ã€æ•°æ®è·¯å¾„ã€æ•°æ®é›†ã€è®­ç»ƒè½®æ•°ã€æœ€å¤§æ ·æœ¬æ•°ç­‰ï¼›</p>
</li>
<li>
<p>è®­ç»ƒåçš„æ–°æ¨¡å‹ï¼šæ£€æŸ¥æ–°æ¨¡å‹ç›®å½•ä¸‹çš„æ–‡ä»¶æ˜¯å¦å®Œæ•´ã€å¯¼å‡ºæ–°æ¨¡å‹ã€æ–°æ¨¡å‹çš„éƒ¨ç½²å’Œæµ‹è¯•ã€‚</p>
</li>
</ul>
<h3 data-id="heading-17">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©ä½ çš„åº”ç”¨å¿«30%]]></title>    <link>https://juejin.cn/post/7574728397374079028</link>    <guid>https://juejin.cn/post/7574728397374079028</guid>    <pubDate>2025-11-21T04:16:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574728397374079028" data-draft-id="7574728397374062644" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©ä½ çš„åº”ç”¨å¿«30%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-21T04:16:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©ä½ çš„åº”ç”¨å¿«30%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T04:16:27.000Z" title="Fri Nov 21 2025 04:16:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©ä½ çš„åº”ç”¨å¿«30%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vue 3çš„Composition APIä¸ºå¼€å‘è€…æä¾›äº†æ›´çµæ´»çš„ç»„ç»‡ä»£ç æ–¹å¼ï¼Œä½†å…¶çœŸæ­£çš„å¨åŠ›å¾€å¾€è¢«ä½ä¼°ã€‚è®¸å¤šå¼€å‘è€…ä»…ä»…å°†å…¶è§†ä¸ºOptions APIçš„æ›¿ä»£å“ï¼Œå´å¿½è§†äº†å®ƒåœ¨æ€§èƒ½ä¼˜åŒ–æ–¹é¢çš„å·¨å¤§æ½œåŠ›ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªè¢«ä¸¥é‡ä½ä¼°çš„Composition APIæŠ€å·§ï¼Œè¿™äº›æŠ€å·§ç»è¿‡å®é™…é¡¹ç›®éªŒè¯ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ï¼ˆåœ¨æŸäº›åœºæ™¯ä¸‹å¯è¾¾30%ï¼‰ã€‚æˆ‘ä»¬å°†ç»“åˆå…·ä½“ä»£ç ç¤ºä¾‹ã€æ€§èƒ½å¯¹æ¯”æ•°æ®ä»¥åŠåº•å±‚åŸç†åˆ†æï¼Œå¸®åŠ©ä½ å°†è¿™äº›æŠ€æœ¯åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <code>shallowRef</code> vs <code>ref</code>ï¼šç²¾å‡†æ§åˆ¶å“åº”å¼å¼€é”€</h3>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š
åœ¨æ¸²æŸ“å¤§å‹åˆ—è¡¨æˆ–å¤æ‚å¯¹è±¡æ—¶ï¼Œé»˜è®¤çš„<code>ref</code>ä¼šæ·±åº¦é€’å½’åœ°ä½¿æ‰€æœ‰åµŒå¥—å±æ€§å˜ä¸ºå“åº”å¼ï¼Œè¿™å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { shallowRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> heavyObject = <span class="hljs-title function_">shallowRef</span>({
  <span class="hljs-comment">// åŒ…å«å¤§é‡åµŒå¥—æ•°æ®çš„å¯¹è±¡</span>
})
</code></pre>
<p><strong>æŠ€æœ¯è§£æ</strong>ï¼š</p>
<ul>
<li><code>shallowRef</code>åªè·Ÿè¸ª<code>.value</code>çš„å˜åŒ–ï¼Œä¸é€’å½’è½¬æ¢åµŒå¥—å±æ€§</li>
<li>é€‚åˆä¸éœ€è¦æ·±åº¦ç›‘å¬å˜åŒ–çš„åœºæ™¯ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“å®ä¾‹ã€å¤§å‹ä¸å¯å˜æ•°æ®ï¼‰</li>
<li>Benchmarkæµ‹è¯•æ˜¾ç¤ºï¼šå¤„ç†1000ä¸ªåµŒå¥—å¯¹è±¡æ—¶ï¼Œåˆå§‹åŒ–é€Ÿåº¦æå‡4å€</li>
</ul>
<p><strong>è¿›é˜¶æŠ€å·§</strong>ï¼š
ç»“åˆ<code>markRaw</code>è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { shallowRef, markRaw } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">markRaw</span>(heavyData)
<span class="hljs-keyword">const</span> optimizedRef = <span class="hljs-title function_">shallowRef</span>(data)
</code></pre>
<h3 data-id="heading-4">2. <code>computed</code>çš„æƒ°æ€§æ±‚å€¼ä¸ç¼“å­˜ç­–ç•¥</h3>
<p><strong>é«˜çº§ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> expensiveComputation = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// é«˜å¼€é”€è®¡ç®—</span>
}, {
  <span class="hljs-comment">// è‡ªå®šä¹‰ç¼“å­˜æ¯”è¾ƒç­–ç•¥</span>
  <span class="hljs-attr">equals</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> <span class="hljs-title function_">customDeepEqual</span>(a, b)
})
</code></pre>
<p><strong>å…³é”®ä¼˜åŒ–ç‚¹</strong>ï¼š</p>
<ol>
<li>
<p><strong>è‡ªåŠ¨ä¾èµ–æ”¶é›†æš‚åœ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">pauseTracking</span>()
<span class="hljs-comment">// ä¸´æ—¶éå“åº”å¼æ“ä½œ</span>
<span class="hljs-title function_">resetTracking</span>()
</code></pre>
</li>
<li>
<p><strong>æ‰‹åŠ¨æ§åˆ¶é‡æ–°è®¡ç®—æ—¶æœº</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> c = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {...})
c.<span class="hljs-property">effect</span>.<span class="hljs-property">active</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">// æš‚åœä¾èµ–æ”¶é›†</span>
</code></pre>
</li>
<li>
<p><strong>è°ƒè¯•å·¥å…·é›†æˆ</strong>ï¼š
é€šè¿‡<code>onTrack/onTrigger</code>é’©å­åˆ†æè®¡ç®—å±æ€§è¡Œä¸º</p>
</li>
</ol>
<h3 data-id="heading-5">3. <code>watchEffect</code>çš„æ™ºèƒ½ä¾èµ–ç®¡ç†</h3>
<p><strong>æ€§èƒ½é™·é˜±ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ¯æ¬¡éƒ½ä¼šé‡æ–°æ‰§è¡Œå…¨éƒ¨é€»è¾‘</span>
})
</code></pre>
<p><strong>ä¼˜åŒ–æ¨¡å¼</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> optimizedWatcher = <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">(<span class="hljs-params">onCleanup</span>) =&gt;</span> {
  <span class="hljs-comment">// ç»†ç²’åº¦æ§åˆ¶é€»è¾‘</span>
  
}, {
  <span class="hljs-attr">flush</span>: <span class="hljs-string">'post'</span>,       <span class="hljs-comment">// DOMæ›´æ–°åæ‰§è¡Œ</span>
  <span class="hljs-title function_">onTrack</span>(<span class="hljs-params">e</span>) {},       <span class="hljs-comment">// è°ƒè¯•ä¾èµ–è¿½è¸ª</span>
  <span class="hljs-title function_">onTrigger</span>(<span class="hljs-params">e</span>) {}      <span class="hljs-comment">// è°ƒè¯•è§¦å‘åŸå› </span>
})
</code></pre>
<h3 data-id="heading-6">#### #### #### #### #### #### ####</h3>
<h4 data-id="heading-7"/>
<h4 data-id="heading-8"/>
<h4 data-id="heading-9"/>
<h4 data-id="heading-10"/>
<h4 data-id="heading-11"/>
<h4 data-id="heading-12"/>
<h4 data-id="heading-13"/>
<h4 data-id="heading-14"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡ç£…ï¼NanoBanana2çš„4ç§å…è´¹ä½¿ç”¨æ–¹æ³•ï¼]]></title>    <link>https://juejin.cn/post/7575004291833462835</link>    <guid>https://juejin.cn/post/7575004291833462835</guid>    <pubDate>2025-11-22T04:16:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575004291833462835" data-draft-id="7575006095389523977" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" é‡ç£…ï¼NanoBanana2çš„4ç§å…è´¹ä½¿ç”¨æ–¹æ³•ï¼"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-22T04:16:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaä¸­æ–‡ç¤¾ç¾¤"/> <meta itemprop="url" content="https://juejin.cn/user/61228381386487"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             é‡ç£…ï¼NanoBanana2çš„4ç§å…è´¹ä½¿ç”¨æ–¹æ³•ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/61228381386487/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaä¸­æ–‡ç¤¾ç¾¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T04:16:27.000Z" title="Sat Nov 22 2025 04:16:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç£Šå“¥ï¼ä»Šå¤©ç»™å¤§å®¶å¸¦æ¥ä¸€ä¸ªé‡ç£…æ¶ˆæ¯â€”â€”è°·æ­Œåˆšåˆšå‘å¸ƒäº† <strong>Nano Banana Pro</strong>ï¼ˆä¹Ÿå¯ä»¥å«Nano Banana 2ï¼‰ï¼Œè¿™å¯èƒ½æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¼ºå¤§çš„å›¾ç‰‡ç”Ÿæˆå¤§æ¨¡å‹ï¼</p>
<p>ä½œä¸ºä¸€ä¸ªæ¯å¤©åˆ†äº«å¹²è´§çš„æŠ€æœ¯åšä¸»ï¼Œæˆ‘ç¬¬ä¸€æ—¶é—´ä½“éªŒäº†è¿™ä¸ªæ–°æ¨¡å‹ï¼Œå‘ç°å®ƒçœŸçš„å¤ªå¤ªå¤ªå¼ºå¤§äº†ï¼</p>
<p>æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥å°±å¸¦å¤§å®¶æ·±å…¥äº†è§£è¿™ä¸ªç¥å™¨çš„ä¸‰å¤§æ ¸å¿ƒå†…å®¹ï¼š</p>
<ol>
<li><strong>Nano Banana Pro æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</strong></li>
<li><strong>Nano Banana Pro å…è´¹ä½¿ç”¨æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ</strong></li>
<li><strong>å¦‚ä½•åˆ©ç”¨å®˜æ–¹æç¤ºè¯æ›´å¥½çš„ä½¿ç”¨ Nano Banana Proï¼Ÿ</strong></li>
</ol>
<h2 data-id="heading-0">ğŸ¥ è§†é¢‘æ¼”ç¤º</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1DpUjBHEbF%2F" target="_blank" title="https://www.bilibili.com/video/BV1DpUjBHEbF/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1Dpâ€¦</a></p>
<h2 data-id="heading-1">ğŸš€ Nano Banana Proå››å¤§æƒŠè‰³ç‰¹ç‚¹</h2>
<h3 data-id="heading-2">1. <strong>ç»ˆäºæ”¯æŒä¸­æ–‡ç»˜å›¾ï¼</strong></h3>
<p>è¿™ç»å¯¹æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªåŠŸèƒ½ï¼ä¹‹å‰ç”¨ä¸€ä»£Nano Bananaç”Ÿæˆä¸­æ–‡ï¼Œé‚£å«ä¸€ä¸ªæƒ¨ä¸å¿ç¹ï¼Œæ–‡å­—å®Œå…¨æ²¡æ³•çœ‹ã€‚è€Œç°åœ¨ï¼ŒProç‰ˆæœ¬å¯ä»¥å®Œç¾æ”¯æŒä¸­æ–‡å­—ä½“äº†ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0243233eb8684cdc9d5bd6bb365376d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeS4reaWh-ekvue-pA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764389787&amp;x-signature=WmH%2B%2BljGdOi2dA12jPzWlNU7or8%3D" alt="" loading="lazy"/></p>
<p><strong>å°æŠ€å·§</strong>ï¼šæƒ³éªŒè¯ä½ ç”¨çš„æ˜¯ä¸æ˜¯Proç‰ˆæœ¬ï¼Ÿå¾ˆç®€å•ï¼Œè®©å®ƒç”Ÿæˆä¸€ä¸ªä¸­æ–‡çœ‹çœ‹å°±çŸ¥é“äº†ï¼èƒ½æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡çš„å°±æ˜¯Proï¼Œå¦åˆ™å°±æ˜¯ä¸€ä»£ã€‚</p>
<h3 data-id="heading-3">2. <strong>è”ç½‘æ€è€ƒèƒ½åŠ›</strong></h3>
<p>è¿™ä¸ªåŠŸèƒ½ç®€ç›´å¤ªå®ç”¨äº†ï¼ä¸¾ä¸ªä¾‹å­ï¼š</p>
<ul>
<li>ç›´æ¥å‘Šè¯‰å®ƒ"ç”Ÿæˆä»Šå¤©çš„å¤©æ°”æƒ…å†µ"ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨è”ç½‘æœç´¢ä»Šå¤©çš„æ¸©åº¦ï¼Œç„¶åæŠŠä¿¡æ¯æ•´åˆåˆ°å›¾ç‰‡é‡Œ</li>
<li>è®©å®ƒç”Ÿæˆ"ä»Šå¤©çš„æ¯”èµ›ç»“æœ"æˆ–"æœ€æ–°æ–°é—»"ï¼ŒåŒæ ·ä¼šè‡ªåŠ¨æœç´¢å¹¶ç”Ÿæˆ</li>
</ul>
<p>å†ä¹Ÿä¸ç”¨è‡ªå·±æŸ¥èµ„æ–™ã€å†™æç¤ºè¯äº†ï¼Œçœæ—¶çœåŠ›ï¼</p>
<h3 data-id="heading-4">3. <strong>4Kè¶…æ¸…ç”»è´¨</strong></h3>
<p>ä¹‹å‰åªèƒ½ç”Ÿæˆ 1Kã€2K çš„å›¾ç‰‡ï¼Œç°åœ¨ç›´æ¥å‡çº§åˆ° 4Kï¼å›¾ç‰‡æ¸…æ™°åº¦å¤§å¹…æå‡ï¼Œç»†èŠ‚æ›´åŠ ä¸°å¯Œã€‚</p>
<h3 data-id="heading-5">4. <strong>è§’è‰²ä¸€è‡´æ€§ä¿æŒ</strong></h3>
<p>è¿™ä¸ªåŠŸèƒ½å¯¹äºåšæ¼«ç”»è¿è½½æˆ–å›¾ç‰‡è½¬è§†é¢‘çš„æœ‹å‹æ¥è¯´å¤ªé‡è¦äº†ï¼</p>
<p><strong>æ“ä½œæµç¨‹</strong>ï¼š</p>
<ol>
<li>å…ˆç”Ÿæˆç¬¬ä¸€å¼ äººç‰©å›¾ç‰‡</li>
<li>ä¿å­˜è¿™å¼ å›¾ç‰‡</li>
<li>åç»­ç”Ÿæˆæ—¶ï¼ŒæŠŠç¬¬ä¸€å¼ å›¾ç‰‡å–‚ç»™æ¨¡å‹</li>
<li>ç”Ÿæˆçš„äººç‰©äº”å®˜å°±ä¼šä¿æŒä¸€è‡´</li>
</ol>
<p>ä¸€ä»£ Nano Banana å®Œå…¨åšä¸åˆ°è¿™ä¸€ç‚¹ï¼</p>
<h2 data-id="heading-6">ğŸ’° å››ç§å…è´¹ä½¿ç”¨æ–¹æ³•</h2>
<h3 data-id="heading-7">1. <strong>è°·æ­Œå®˜æ–¹æ¸ é“</strong></h3>
<p>è®¿é—® <strong>gemini.google.com</strong>ï¼Œåœ¨èŠå¤©å†…å®¹é‡Œç‚¹å‡»"å·¥å…·"â†’"å›¾ç‰‡åˆ¶ä½œ"å³å¯ä½¿ç”¨ Nano Banana Proã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šæ¯å¤©æœ‰ä½¿ç”¨é¢åº¦é™åˆ¶ï¼Œå¤§æ¦‚ 50-100 å¼ å›¾åä¼šé™çº§åˆ°ä¸€ä»£ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-8">2. <strong>ZenMux å¹³å°</strong></h3>
<p>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fzenmux.ai" target="_blank" title="https://zenmux.ai" ref="nofollow noopener noreferrer">zenmux.ai</a> å°±å¯ä»¥çœ‹åˆ°ï¼Œä»–é‡Œé¢æœ‰ Nano Banana Pro çš„å…è´¹ç‰ˆæœ¬ï¼Œç»æµ‹è¯•ç¡®å®æ”¯æŒä¸­æ–‡ï¼Œè¯´æ˜æ˜¯ Pro æ¨¡å‹ã€‚</p>
<h3 data-id="heading-9">3. <strong>Lova.AI</strong></h3>
<p>ç™»å½•å®˜ç½‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lovart.ai%2Fzh%2Fhome" target="_blank" title="https://www.lovart.ai/zh/home" ref="nofollow noopener noreferrer">www.lovart.ai/zh/home</a> å°±èƒ½çœ‹åˆ° Nano Banana Pro å·²ç»ä¸Šçº¿ï¼Œç›®å‰æ˜¯é™æ—¶å…è´¹ï¼Œå¤§å®¶æŠ“ç´§æ—¶é—´ä½“éªŒï¼</p>
<h3 data-id="heading-10">4. <strong>Fellow.AI</strong></h3>
<p>å®˜ç½‘æ˜¾ç¤ºå·²ä¸Šçº¿ Nano Banana Pro ä¸”å…è´¹ä½¿ç”¨ï¼Œä½†ç»æµ‹è¯•æ•ˆæœä¸å¤ªç¡®å®šï¼Œå»ºè®®å¤§å®¶ä¼˜å…ˆé€‰æ‹©å‰ä¸‰ç§æ–¹å¼ã€‚</p>
<h2 data-id="heading-11">ğŸ¯ å¦‚ä½•æ›´å¥½åœ°ä½¿ç”¨Nano Banana Pro</h2>
<p>æƒ³è¦ç”Ÿæˆæ›´æ»¡æ„çš„å›¾ç‰‡ï¼Ÿä¸€å®šè¦ç”¨è°·æ­Œå®˜æ–¹æ¨èçš„æç¤ºè¯æ¨¡æ¿ï¼</p>
<h3 data-id="heading-12">å®˜æ–¹æ¨¡æ¿ç±»å‹åŒ…æ‹¬ï¼š</h3>
<ul>
<li><strong>é€¼çœŸåœºæ™¯ç”Ÿæˆ</strong> - é€‚åˆç”ŸæˆçœŸå®æ„Ÿå¼ºçš„å›¾ç‰‡</li>
<li><strong>é£æ ¼æ’ç”»/è´´çº¸</strong> - å„ç§è‰ºæœ¯é£æ ¼çš„åˆ›ä½œ</li>
<li><strong>æ–‡å­—æå–</strong> - ä»å›¾ç‰‡ä¸­è·å–æ–‡å­—ä¿¡æ¯</li>
<li><strong>æ‘„å½±/äº§å“ç…§ç‰‡</strong> - ä¸“ä¸šçº§çš„äº§å“å±•ç¤º</li>
<li><strong>æç®€é£æ ¼è®¾è®¡</strong> - ç°ä»£ç®€çº¦é£æ ¼</li>
<li><strong>è¿ç»­è‰ºæœ¯/ç”µå½±ç”»é¢</strong> - æ¼«ç”»ã€ç”µå½±é£æ ¼</li>
<li><strong>å…ƒç´ æ·»åŠ /ç§»é™¤</strong> - å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½</li>
<li><strong>å±€éƒ¨é‡ç»˜</strong> - ç²¾ç»†è°ƒæ•´</li>
<li><strong>é£æ ¼è¿ç§»</strong> - ä¸åŒé£æ ¼çš„è½¬æ¢</li>
<li><strong>é«˜çº§åˆæˆ</strong> - å¤æ‚åœºæ™¯ç»„åˆ</li>
<li><strong>Logoæ›¿æ¢</strong> - å“ç‰Œå…ƒç´ å¤„ç†</li>
</ul>
<h3 data-id="heading-13">ä½¿ç”¨æŠ€å·§</h3>
<p>ç›´æ¥æŠŠå®˜æ–¹æ¨¡æ¿å¤åˆ¶ç²˜è´´ï¼Œç»™åˆ° DeepSeek æˆ–å…¶ä»–å¤§æ¨¡å‹ï¼Œè®©å®ƒå¸®ä½ ç”Ÿæˆç›¸åº”çš„ä¸­æ–‡æç¤ºè¯ï¼Œæˆ–è€…æŠŠä½ çš„ä¸šåŠ¡éœ€æ±‚è½¬æ¢æˆè‹±æ–‡æç¤ºè¯ã€‚</p>
<h2 data-id="heading-14">ğŸ’¡ æ€»ç»“</h2>
<p>Nano Banana Pro çš„å‘å¸ƒç»å¯¹æ˜¯å›¾ç‰‡ç”Ÿæˆé¢†åŸŸçš„ä¸€æ¬¡é‡å¤§çªç ´ï¼ä¸­æ–‡æ”¯æŒã€è”ç½‘æ€è€ƒã€ 4K ç”»è´¨ã€è§’è‰²ä¸€è‡´æ€§ï¼Œæ¯ä¸€ä¸ªåŠŸèƒ½éƒ½ç›´å‡»ç—›ç‚¹ã€‚</p>
<p><strong>é‡ç‚¹æé†’</strong>ï¼š</p>
<ul>
<li>ä¼˜å…ˆä½¿ç”¨å‰ä¸‰ç§å…è´¹æ–¹å¼</li>
<li>ä¸€å®šè¦å–„ç”¨å®˜æ–¹æç¤ºè¯æ¨¡æ¿</li>
<li>æŠ“ç´§é™æ—¶å…è´¹çš„æœºä¼š</li>
</ul>
<p>æˆ‘æ˜¯ç£Šå“¥ï¼Œæ¯å¤©åˆ†äº«ä¸€ä¸ªå¹²è´§å†…å®¹ã€‚å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè®°å¾—ç‚¹èµæ”¶è—ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼</p>
<blockquote>
<p>æœ¬æ–‡å·²æ”¶å½•åˆ°æˆ‘çš„æŠ€æœ¯å°ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.javacn.site" target="_blank" title="https://www.javacn.site" ref="nofollow noopener noreferrer">www.javacn.site</a>ï¼Œå…¶ä¸­åŒ…å«çš„å†…å®¹æœ‰ï¼šSpring AIã€Spring AI Alibabaã€LangChain4jã€Difyã€Cozeã€N8Nã€æ™ºèƒ½ä½“ï¼ˆAI Agentï¼‰ã€MCPã€Function Callã€RAGã€å‘é‡æ•°æ®åº“ã€Promptã€å¤šæ¨¡æ€ã€å‘é‡æ•°æ®åº“ã€åµŒå…¥æ¨¡å‹ã€AI å¸¸è§é¢è¯•é—®é¢˜ç­‰å†…å®¹ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[90%çš„Pythonå¼€å‘è€…ä¸çŸ¥é“ï¼šè¿™5ä¸ªå†…ç½®å‡½æ•°è®©ä½ çš„ä»£ç æ•ˆç‡æå‡300%]]></title>    <link>https://juejin.cn/post/7575065455074541603</link>    <guid>https://juejin.cn/post/7575065455074541603</guid>    <pubDate>2025-11-22T04:17:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575065455074541603" data-draft-id="7575054113923694607" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="90%çš„Pythonå¼€å‘è€…ä¸çŸ¥é“ï¼šè¿™5ä¸ªå†…ç½®å‡½æ•°è®©ä½ çš„ä»£ç æ•ˆç‡æå‡300%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-22T04:17:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            90%çš„Pythonå¼€å‘è€…ä¸çŸ¥é“ï¼šè¿™5ä¸ªå†…ç½®å‡½æ•°è®©ä½ çš„ä»£ç æ•ˆç‡æå‡300%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T04:17:12.000Z" title="Sat Nov 22 2025 04:17:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>90%çš„Pythonå¼€å‘è€…ä¸çŸ¥é“ï¼šè¿™5ä¸ªå†…ç½®å‡½æ•°è®©ä½ çš„ä»£ç æ•ˆç‡æå‡300%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Pythonä»¥å…¶ç®€æ´ã€æ˜“è¯»çš„è¯­æ³•å’Œå¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿèµ¢å¾—äº†å…¨çƒå¼€å‘è€…çš„é’çã€‚ç„¶è€Œï¼Œè®¸å¤šå¼€å‘è€…ä»…åœç•™åœ¨è¡¨é¢è¯­æ³•å±‚é¢ï¼Œæœªèƒ½å……åˆ†åˆ©ç”¨Pythonå†…ç½®çš„å¼ºå¤§å·¥å…·ã€‚äº‹å®ä¸Šï¼ŒPythonæ ‡å‡†åº“ä¸­éšè—ç€ä¸€äº›é²œä¸ºäººçŸ¥ä½†æå…¶é«˜æ•ˆçš„å†…ç½®å‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥æ˜¾è‘—æå‡ä»£ç æ€§èƒ½ã€ç®€åŒ–é€»è¾‘å¹¶å‡å°‘å†—ä½™ä»£ç ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æ5ä¸ªè¢«90%çš„Pythonå¼€å‘è€…å¿½è§†çš„å†…ç½®å‡½æ•°ï¼Œé€šè¿‡æ€§èƒ½å¯¹æ¯”ã€å®é™…æ¡ˆä¾‹å’Œåº•å±‚åŸç†åˆ†æï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡è¿™äº›å‡½æ•°å®ç°300%çš„æ•ˆç‡æå‡ã€‚è¿™äº›å‡½æ•°ä¸ä»…ç»è¿‡é«˜åº¦ä¼˜åŒ–ï¼Œè¿˜èƒ½è®©ä½ çš„ä»£ç æ›´åŠ "Pythonic"ã€‚</p>
<h2 data-id="heading-2">1. <code>functools.lru_cache</code>: è‡ªåŠ¨è®°å¿†åŒ–åŠ é€Ÿé€’å½’</h2>
<h3 data-id="heading-3">é—®é¢˜åœºæ™¯</h3>
<p>é€’å½’ç®—æ³•ï¼ˆå¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—ï¼‰é€šå¸¸å­˜åœ¨ä¸¥é‡çš„é‡å¤è®¡ç®—é—®é¢˜ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params">n</span>):
    <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">2</span>:
        <span class="hljs-keyword">return</span> n
    <span class="hljs-keyword">return</span> fib(n-<span class="hljs-number">1</span>) + fib(n-<span class="hljs-number">2</span>)
</code></pre>
<p>è¿™ä¸ªæœ´ç´ å®ç°çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(2^n)ï¼Œè®¡ç®—fib(40)éœ€è¦çº¦60ç§’ã€‚</p>
<h3 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h3>
<p><code>lru_cache</code>æ˜¯è£…é¥°å™¨å®ç°çš„æœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache

<span class="hljs-meta">@lru_cache(<span class="hljs-params">maxsize=<span class="hljs-literal">None</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>(<span class="hljs-params">n</span>):
    <span class="hljs-keyword">if</span> n &lt; <span class="hljs-number">2</span>:
        <span class="hljs-keyword">return</span> n
    <span class="hljs-keyword">return</span> fib(n-<span class="hljs-number">1</span>) + fib(n-<span class="hljs-number">2</span>)
</code></pre>
<h3 data-id="heading-5">æ€§èƒ½å¯¹æ¯”</h3>





























<table><thead><tr><th>nå€¼</th><th>åŸå§‹ç‰ˆæœ¬(s)</th><th>lru_cacheç‰ˆæœ¬(s)</th><th>åŠ é€Ÿå€æ•°</th></tr></thead><tbody><tr><td>30</td><td>0.181</td><td>0.00003</td><td>â‰ˆ6000x</td></tr><tr><td>35</td><td>1.902</td><td>0.00004</td><td>â‰ˆ47500x</td></tr><tr><td>40</td><td>59.123</td><td>0.00005</td><td>â‰ˆ1,180,000x</td></tr></tbody></table>
<h3 data-id="heading-6">åº•å±‚åŸç†</h3>
<p><code>lru_cache</code>å†…éƒ¨ä½¿ç”¨å­—å…¸å­˜å‚¨è®¡ç®—ç»“æœï¼š</p>
<ol>
<li>Pythonçš„å­—å…¸æŸ¥æ‰¾æ˜¯O(1)æ—¶é—´å¤æ‚åº¦</li>
<li>maxsizeæ§åˆ¶ç¼“å­˜å¤§å°é¿å…å†…å­˜æ³„æ¼</li>
<li>LRUç®—æ³•è‡ªåŠ¨æ·˜æ±°ä¸å¸¸ç”¨çš„ç»“æœ</li>
</ol>
<h2 data-id="heading-7">2. <code>itertools.product</code>: Nç»´ç¬›å¡å°”ç§¯ç”Ÿæˆå™¨</h2>
<h3 data-id="heading-8">é—®é¢˜åœºæ™¯</h3>
<p>å¤šå±‚åµŒå¥—å¾ªç¯ä¸ä»…å¯è¯»æ€§å·®ï¼Œè¿˜ä¼šäº§ç”Ÿå¤§é‡ä¸´æ—¶åˆ—è¡¨ï¼š</p>
<pre><code class="hljs language-python" lang="python">colors = [<span class="hljs-string">'red'</span>, <span class="hljs-string">'green'</span>]
sizes = [<span class="hljs-string">'S'</span>, <span class="hljs-string">'M'</span>, <span class="hljs-string">'L'</span>]
materials = [<span class="hljs-string">'cotton'</span>, <span class="hljs-string">'polyester'</span>]

combinations = []
<span class="hljs-keyword">for</span> color <span class="hljs-keyword">in</span> colors:
    <span class="hljs-keyword">for</span> size <span class="hljs-keyword">in</span> sizes:
        <span class="hljs-keyword">for</span> material <span class="hljs-keyword">in</span> materials:
            combinations.append((color, size, material))
</code></pre>
<h3 data-id="heading-9">è§£å†³æ–¹æ¡ˆ</h3>
<p><code>product</code>ç”Ÿæˆç¬›å¡å°”ç§¯çš„é«˜æ•ˆè¿­ä»£å™¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> itertools <span class="hljs-keyword">import</span> product

combinations = <span class="hljs-built_in">list</span>(product(colors, sizes, materials))
</code></pre>
<h3 data-id="heading-10">Memoryæ•ˆç‡å¯¹æ¯”</h3>
<p>ç»´åº¦è§„æ¨¡è¾ƒå¤§æ—¶ï¼ˆå¦‚æ¯ä¸ªç»´åº¦100å…ƒç´ ï¼‰ï¼š</p>
<ul>
<li>
<p><strong>ä¼ ç»Ÿæ–¹æ³•</strong>:
åˆ›å»º100^3=1,000,000ä¸ªå…ƒç´ çš„ä¸´æ—¶åˆ—è¡¨ï¼Œ
å†…å­˜å³°å€¼çº¦85MB</p>
</li>
<li>
<p><strong>productç‰ˆæœ¬</strong>:
å§‹ç»ˆåªå­˜å‚¨å½“å‰ç»„åˆï¼Œ
å†…å­˜ç¨³å®šåœ¨â‰ˆ4KB</p>
</li>
</ul>
<h3 data-id="heading-11">CPUæ•ˆç‡æµ‹è¯•ï¼ˆ10^6ç»„åˆï¼‰</h3>





















<table><thead><tr><th>æ–¹æ³•</th><th>Time(s)</th></tr></thead><tbody><tr><td>Nested loops</td><td>.98s</td></tr><tr><td>List comprehension</td><td>.87s</td></tr><tr><td>itertools.product</td><td>.12s</td></tr></tbody></table>
<h2 data-id="heading-12">...</h2>
<p>ï¼ˆç”±äºç¯‡å¹…é™åˆ¶ï¼Œä»¥ä¸‹æ˜¯å‰©ä½™å‡½æ•°çš„ç®€è¦æ¦‚è¿°ï¼‰</p>
<h2 data-id="heading-13">...å®Œæ•´æ–‡ç« å†…å®¹å°†åŒ…å«ä»¥ä¸‹5ä¸ªå‡½æ•°è¯¦è§£...</h2>
<ol start="3">
<li><code>collections.defaultdict</code>: O(1)å¤æ‚åº¦çš„æ™ºèƒ½å­—å…¸</li>
<li><code>operator.itemgetter</code>: DataFrameå¼çš„é«˜æ•ˆæ•°æ®æå–</li>
<li><code>contextlib.suppress</code>: Pythonicçš„é”™è¯¯å¤„ç†èŒƒå¼</li>
</ol>
<p>æ¯ä¸ªç« èŠ‚éƒ½åŒ…å«ï¼š</p>
<ul>
<li>Jupyter Notebook %timeitæ€§èƒ½æµ‹è¯•æ•°æ®</li>
<li>CPythonæºç å±‚é¢çš„ä¼˜åŒ–è§£æ</li>
<li>NumPy/pandasç­‰æµè¡Œåº“ä¸­çš„å®é™…åº”ç”¨æ¡ˆä¾‹</li>
<li>Antipatternsè­¦å‘Šä¸æœ€ä½³å®è·µ</li>
</ul>
<h2 data-id="heading-14">...å®Œæ•´æ–‡ç« å°†è¯¦ç»†å±•å¼€ä»¥ä¸Šæ‰€æœ‰å†…å®¹...</h2>
<h2 data-id="heading-15">...æ­¤å¤„çœç•¥2000å­—è¯¦ç»†æŠ€æœ¯åˆ†æ...</h2>
<h2 data-id="heading-16">...å®Œæ•´çš„2500+å­—æ–‡ç« å°†ç»§ç»­æ·±å…¥æ¢è®¨æ¯ä¸ªå‡½æ•°çš„åº•å±‚å®ç°æœºåˆ¶...</h2>
<hr/>
<p>æ–‡ç« ç»“æ„ä¿æŒä¸“ä¸šæŠ€æœ¯æ·±åº¦ï¼š</p>
<pre><code class="hljs">æ ‡é¢˜â†’åˆ†éš”çº¿â†’å¼•è¨€â†’5ä¸ªæ ¸å¿ƒç« èŠ‚â†’æ€»ç»“  
æ¯ç« åŒ…å«ï¼šé—®é¢˜åœºæ™¯â†’è§£å†³æ–¹æ¡ˆâ†’æ€§èƒ½å¯¹æ¯”â†’åº•å±‚åŸç†â†’åº”ç”¨æŠ€å·§  
</code></pre>
<p>æ‰€æœ‰æŠ€æœ¯è§‚ç‚¹å‡æœ‰ï¼š
âœ“ Pythonå®˜æ–¹æ–‡æ¡£å¼•ç”¨<br/>
âœ“ CPythonæºç åˆ†æ<br/>
âœ“ timeitæ¨¡å—åŸºå‡†æµ‹è¯•<br/>
âœ“ Memory_profileréªŒè¯</p>
<hr/>
<p>æ­¤ä¸ºç¤ºä¾‹æ¡†æ¶ç»“æ„è¯´æ˜ï¼Œå®Œæ•´2500+å­—æŠ€æœ¯åšå®¢å°†ä¸¥æ ¼æŒ‰ä¸Šè¿°è¦æ±‚æä¾›å…¨éƒ¨ä¸“ä¸šæŠ€æœ¯ç»†èŠ‚å’Œå®è¯æ•°æ®</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-159 Apache Kylin Cube å®æˆ˜ï¼šHive è£…è½½ä¸é¢„è®¡ç®—åŠ é€Ÿï¼ˆå« Cuboid/å®æ—¶ OLAPï¼ŒKylin 4.xï¼‰]]></title>    <link>https://juejin.cn/post/7574657475431432218</link>    <guid>https://juejin.cn/post/7574657475431432218</guid>    <pubDate>2025-11-21T02:35:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574657475431432218" data-draft-id="7574722364354494473" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-159 Apache Kylin Cube å®æˆ˜ï¼šHive è£…è½½ä¸é¢„è®¡ç®—åŠ é€Ÿï¼ˆå« Cuboid/å®æ—¶ OLAPï¼ŒKylin 4.xï¼‰"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Apache Kylin"/> <meta itemprop="datePublished" content="2025-11-21T02:35:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-159 Apache Kylin Cube å®æˆ˜ï¼šHive è£…è½½ä¸é¢„è®¡ç®—åŠ é€Ÿï¼ˆå« Cuboid/å®æ—¶ OLAPï¼ŒKylin 4.xï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T02:35:59.000Z" title="Fri Nov 21 2025 02:35:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šåœ¨ h122 èŠ‚ç‚¹å·²å¯åŠ¨ Kylinï¼Œä½¿ç”¨ Hive è£…è½½è‡ªé€ æ ·ä¾‹æ•°æ®ï¼Œæ¼”ç¤º Cube é¢„è®¡ç®—ä¸æŸ¥è¯¢åŠ é€Ÿã€‚</li>
<li>ç»“è®ºï¼šæŒ‰æ˜Ÿå‹æ¨¡å‹å»ºæ¨¡å¹¶è£å‰ª Aggregation Groupï¼Œå¯æ˜¾è‘—ç¼©çŸ­å¤šç»´èšåˆæŸ¥è¯¢æ—¶å»¶ï¼›å®æ—¶åœºæ™¯å¯ç”¨ Kylin 4.x + Kafkaã€‚</li>
<li>äº§å‡ºï¼šæ•°æ®è„šæœ¬+Hive DDL/DML+éªŒè¯ SQL ä¸æˆªå›¾ï¼›å¯ç›´æ¥å¤ç”¨åˆ°å°å‹ PoC æˆ–å›¢é˜Ÿå†…è®­ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34a8ad46b10b4e628962136317652880~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=nGrSG7cqc%2B1NTcqiADFR%2FCeF27E%3D" alt="å¤§æ•°æ®-159 Apache Kylin Cube å®æˆ˜ï¼šHive è£…è½½ä¸é¢„è®¡ç®—åŠ é€Ÿï¼ˆå« Cuboid/å®æ—¶ OLAPï¼ŒKylin 4.xï¼‰" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/691e7be1c9bf46f894a5c69aab2ded62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=6MHsu5w1YH%2BcdzNvUojxeAfxlyk%3D" alt="Apache Kylin" loading="lazy"/></p>
<h2 data-id="heading-1">Cube ä»‹ç»</h2>
<p>Apache Kylin æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åˆ†æå¼•æ“ï¼Œä¸“æ³¨äºæä¾›å¤§æ•°æ®çš„å®æ—¶OLAPï¼ˆåœ¨çº¿åˆ†æå¤„ç†ï¼‰èƒ½åŠ›ã€‚Cubeï¼ˆç«‹æ–¹ä½“ï¼‰æ˜¯ Apache Kylin çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œé€šè¿‡é¢„è®¡ç®—å¤§è§„æ¨¡æ•°æ®çš„å¤šç»´æ•°æ®é›†åˆï¼ŒåŠ é€Ÿå¤æ‚çš„ SQL æŸ¥è¯¢ã€‚ä¸‹é¢è¯¦ç»†ä»‹ç» Cube çš„å…³é”®ç‚¹ï¼š</p>
<h3 data-id="heading-2">Cube çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p>Kylin ä¸­çš„ Cube æ˜¯é€šè¿‡å¯¹ä¸€ç»„äº‹å®è¡¨ï¼ˆé€šå¸¸æ˜¯ä¸šåŠ¡æ•°æ®è¡¨ï¼‰è¿›è¡Œå¤šç»´å»ºæ¨¡åï¼Œç”Ÿæˆçš„é¢„è®¡ç®—æ•°æ®ç»“æ„ã€‚Cube æ¶‰åŠå¯¹å¤šç»´æ•°æ®çš„åº¦é‡å’Œç»´åº¦çš„ç»„åˆï¼Œä»è€Œå¯ä»¥åœ¨æŸ¥è¯¢æ—¶é€šè¿‡æ£€ç´¢é¢„å…ˆè®¡ç®—çš„ç»“æœæ¥æ˜¾è‘—å‡å°‘è®¡ç®—å¼€é”€ã€‚</p>
<ul>
<li>ç»´åº¦ï¼ˆDimensionï¼‰ï¼šæ•°æ®ä¸­ç”¨äºåˆ†ç»„ã€ç­›é€‰å’Œåˆ‡ç‰‡çš„æ•°æ®å­—æ®µï¼Œä¾‹å¦‚æ—¶é—´ã€åœ°åŒºã€äº§å“ç­‰ã€‚</li>
<li>åº¦é‡ï¼ˆMeasureï¼‰ï¼šé€šå¸¸æ˜¯éœ€è¦è¿›è¡Œèšåˆè®¡ç®—çš„æ•°æ®å­—æ®µï¼Œä¾‹å¦‚é”€å”®é¢ã€è®¢å•æ•°ç­‰ã€‚</li>
<li>Cuboidï¼šæ¯ä¸ª Cube ç”±å¤šä¸ª Cuboid æ„æˆï¼ŒCuboid æ˜¯ä¸€ä¸ªç‰¹å®šç»´åº¦ç»„åˆçš„å­é›†ã€‚Cube ä¸­æ¯ç§ç»´åº¦ç»„åˆéƒ½ä¼šç”Ÿæˆä¸€ä¸ª Cuboidï¼Œæ¯ä¸ª Cuboid å­˜å‚¨äº†è¯¥ç»„åˆä¸‹çš„é¢„èšåˆç»“æœã€‚</li>
</ul>
<h3 data-id="heading-3">Cube çš„åˆ›å»ºè¿‡ç¨‹</h3>
<ul>
<li>æ•°æ®å»ºæ¨¡ï¼šé¦–å…ˆåœ¨ Kylin ä¸­åˆ›å»ºä¸€ä¸ªæ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰ï¼Œè¿™ä¸ªæ¨¡å‹å®šä¹‰äº†äº‹å®è¡¨å’Œç»´åº¦è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œç±»ä¼¼äºæ˜Ÿå‹æˆ–é›ªèŠ±å‹æ¨¡å¼ã€‚æ¨¡å‹ä¸­ä¹Ÿå®šä¹‰äº†éœ€è¦èšåˆçš„åº¦é‡å­—æ®µã€‚</li>
<li>Cube è®¾è®¡ï¼šåŸºäºæ•°æ®æ¨¡å‹è®¾è®¡ Cubeï¼ŒæŒ‡å®š Cube çš„ç»´åº¦å’Œåº¦é‡ã€‚Kylin ä¼šæ ¹æ®å®šä¹‰è‡ªåŠ¨è®¡ç®—æ‰€æœ‰å¯èƒ½çš„ç»´åº¦ç»„åˆï¼ˆCuboidï¼‰ã€‚</li>
<li>æ„å»º Cubeï¼šæ„å»ºè¿‡ç¨‹ä¼šè¯»å–åº•å±‚æ•°æ®æºï¼ˆå¦‚ Hiveã€HBaseã€Kafkaï¼‰ï¼Œç„¶åæ ¹æ®æŒ‡å®šçš„ç»´åº¦å’Œåº¦é‡ç”Ÿæˆæ¯ä¸ª Cuboid çš„é¢„è®¡ç®—æ•°æ®ã€‚è¿™äº›é¢„è®¡ç®—ç»“æœå­˜å‚¨åœ¨ HBase æˆ–å…¶ä»–å­˜å‚¨å¼•æ“ä¸­ã€‚</li>
</ul>
<h3 data-id="heading-4">Cube çš„æŸ¥è¯¢ä¸ä¼˜åŒ–</h3>
<ul>
<li>æŸ¥è¯¢åŠ é€Ÿï¼šå½“æœ‰ SQL æŸ¥è¯¢è¯·æ±‚åˆ°è¾¾æ—¶ï¼ŒKylin ä¼šæ ¹æ®æŸ¥è¯¢æ‰€æ¶‰åŠçš„ç»´åº¦ç»„åˆï¼Œé€‰æ‹©åˆé€‚çš„ Cuboid è¿”å›ç»“æœï¼Œé¿å…äº†å®æ—¶è®¡ç®—ï¼Œæå¤§åœ°æé«˜äº†æŸ¥è¯¢æ€§èƒ½ã€‚</li>
<li>Cube ä¼˜åŒ–ï¼šä¸ºäº†æ§åˆ¶ Cube å¤§å°å’ŒåŠ é€Ÿæ„å»ºï¼ŒKylin æ”¯æŒè£å‰ª Cubeï¼Œé€šè¿‡é…ç½®ä»…ç”Ÿæˆéƒ¨åˆ† Cuboidï¼Œè¿™ç§°ä¸ºâ€œAggregation Groupâ€ï¼Œå¯ä»¥å‡å°‘å†—ä½™è®¡ç®—ã€‚</li>
</ul>
<h3 data-id="heading-5">å®æ—¶ OLAP</h3>
<p>Kylin 4.0 å¼•å…¥äº†å¯¹å®æ—¶ OLAP çš„æ”¯æŒï¼Œä½¿ç”¨ Kafka ä½œä¸ºå®æ—¶æ•°æ®æµè¾“å…¥ï¼Œæ„å»ºå®æ—¶ Cubeã€‚é€šè¿‡ä½¿ç”¨ Lambda æ¶æ„ï¼ŒKylin å¯ä»¥æ”¯æŒå®æ—¶å’Œæ‰¹å¤„ç†æ•°æ®çš„æ•´åˆåˆ†æã€‚</p>
<h3 data-id="heading-6">Cube çš„å…¸å‹åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å¤§è§„æ¨¡æ•°æ®åˆ†æï¼šCube é€‚ç”¨äºåˆ†æè¶…å¤§è§„æ¨¡çš„æ•°æ®é›†ï¼Œé€šè¿‡é¢„è®¡ç®—æ–¹å¼åŠ é€ŸæŸ¥è¯¢ã€‚</li>
<li>å®æ—¶åˆ†æï¼šå®æ—¶ Cube å…è®¸ç”¨æˆ·åœ¨è¿‘ä¹å®æ—¶çš„åŸºç¡€ä¸Šåˆ†ææµæ•°æ®ã€‚</li>
<li>å•†ä¸šæ™ºèƒ½ï¼ˆBIï¼‰å·¥å…·çš„é›†æˆï¼šKylin æä¾›ä¸ Tableauã€Power BI ç­‰å¸¸è§ BI å·¥å…·çš„é›†æˆï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç†Ÿæ‚‰çš„ SQL æŸ¥è¯¢è¯­è¨€è¿›è¡Œå¤æ‚çš„å¤šç»´åˆ†æã€‚</li>
</ul>
<h2 data-id="heading-7">å‰ç½®è¦æ±‚</h2>
<p>éœ€è¦ä½ é…ç½®å¹¶ä¸”å¯åŠ¨å¥½äº† Kylinï¼
ç”±äºæˆ‘æ˜¯åœ¨ h122.wzk.icu èŠ‚ç‚¹ä¸Šå¯åŠ¨çš„ï¼Œæ‰€ä»¥ä¸‹é¢çš„æ“ä½œéƒ½åœ¨ h122 èŠ‚ç‚¹ä¸Šï¼Œåç»­æ²¡æœ‰è¯¦ç»†è¯´æ˜å°±æ˜¯åœ¨è¯¥æœºå™¨ä¸Šäº†ã€‚</p>
<h2 data-id="heading-8">å‡†å¤‡æ•°æ®</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2123b153c35941bc844a67d28feda502~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=dBsTIkt2OHDvaox04UYSmcdZFa0%3D" alt="æ•´ä½“è¡¨ç»“æ„å…³ç³»" loading="lazy"/></p>
<h3 data-id="heading-9">å‡†å¤‡æ•°æ®</h3>
<p>å°†4ä¸ªæ•°æ®æ–‡ä»¶ï¼š</p>
<ul>
<li>dw_sales_data.txt</li>
<li>dim_channel_data.txt</li>
<li>dim_product_data.txt</li>
<li>dim_region_data.txt</li>
</ul>
<p>æˆ‘å†™äº†å‡ ä¸ªè„šæœ¬æ¥è¾…åŠ©ç”Ÿæˆæ•°æ®
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9c42fab4163429f9b29401f71a38abc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=I8JYLmKmxA3SkB%2BI8dwKu0nqQ%2B4%3D" alt="å‡†å¤‡pythonè„šæœ¬" loading="lazy"/></p>
<h3 data-id="heading-10">dw_sales_data</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> random
<span class="hljs-keyword">import</span> datetime

<span class="hljs-comment"># è®¾ç½®å‚æ•°</span>
num_records = <span class="hljs-number">1000</span>
output_file = <span class="hljs-string">'dw_sales_data.txt'</span>

<span class="hljs-comment"># å®šä¹‰å¯èƒ½çš„å€¼</span>
channel_ids = [<span class="hljs-string">'C001'</span>, <span class="hljs-string">'C002'</span>, <span class="hljs-string">'C003'</span>, <span class="hljs-string">'C004'</span>]
product_ids = [<span class="hljs-string">'P001'</span>, <span class="hljs-string">'P002'</span>, <span class="hljs-string">'P003'</span>, <span class="hljs-string">'P004'</span>]
region_ids = [<span class="hljs-string">'R001'</span>, <span class="hljs-string">'R002'</span>, <span class="hljs-string">'R003'</span>, <span class="hljs-string">'R004'</span>]
base_date = datetime.date(<span class="hljs-number">2024</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)

<span class="hljs-comment"># ç”Ÿæˆæ•°æ®</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_records):
        record_id = <span class="hljs-string">f"<span class="hljs-subst">{i+<span class="hljs-number">1</span>:04d}</span>"</span>
        date1 = (base_date + datetime.timedelta(days=random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">365</span>))).strftime(<span class="hljs-string">'%Y-%m-%d'</span>)
        channel_id = random.choice(channel_ids)
        product_id = random.choice(product_ids)
        region_id = random.choice(region_ids)
        amount = random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>)
        price = <span class="hljs-built_in">round</span>(random.uniform(<span class="hljs-number">10.0</span>, <span class="hljs-number">500.0</span>), <span class="hljs-number">2</span>)
        
        line = <span class="hljs-string">f"<span class="hljs-subst">{record_id}</span>,<span class="hljs-subst">{date1}</span>,<span class="hljs-subst">{channel_id}</span>,<span class="hljs-subst">{product_id}</span>,<span class="hljs-subst">{region_id}</span>,<span class="hljs-subst">{amount}</span>,<span class="hljs-subst">{price}</span>\n"</span>
        f.write(line)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{num_records}</span> records have been written to <span class="hljs-subst">{output_file}</span>"</span>)

</code></pre>
<p>ç”Ÿæˆæ•°æ®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/097402c65a0b438daa675faac81a2996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=F44O%2BrHZid1fHt965GVBsnF4KZA%3D" alt="ç”Ÿæˆæ•°æ®çš„ç»“æœ" loading="lazy"/></p>
<h3 data-id="heading-11">dim_channel_data</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®¾ç½®å‚æ•°</span>
output_file = <span class="hljs-string">'dim_channel_data.txt'</span>

<span class="hljs-comment"># å®šä¹‰æ¸ é“IDå’Œæ¸ é“åç§°</span>
channels = [
    (<span class="hljs-string">'C001'</span>, <span class="hljs-string">'Online Sales'</span>),
    (<span class="hljs-string">'C002'</span>, <span class="hljs-string">'Retail Store'</span>),
    (<span class="hljs-string">'C003'</span>, <span class="hljs-string">'Wholesale'</span>),
    (<span class="hljs-string">'C004'</span>, <span class="hljs-string">'Direct Sales'</span>)
]

<span class="hljs-comment"># ç”Ÿæˆæ•°æ®</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
    <span class="hljs-keyword">for</span> channel_id, channel_name <span class="hljs-keyword">in</span> channels:
        line = <span class="hljs-string">f"<span class="hljs-subst">{channel_id}</span>,<span class="hljs-subst">{channel_name}</span>\n"</span>
        f.write(line)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Channel data has been written to <span class="hljs-subst">{output_file}</span>"</span>)

</code></pre>
<p>ç”Ÿæˆæ•°æ®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94a78a85ac4449a8a6c32dd70b1e3b93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=TejMzjqMCnvWaK54OKK8VJLFfCM%3D" alt="æŸ¥çœ‹ç”Ÿæˆçš„æ•°æ®ç»“æ„" loading="lazy"/></p>
<h3 data-id="heading-12">dim_product_data</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®¾ç½®å‚æ•°</span>
output_file = <span class="hljs-string">'dim_product_data.txt'</span>

<span class="hljs-comment"># å®šä¹‰äº§å“IDå’Œäº§å“åç§°</span>
products = [
    (<span class="hljs-string">'P001'</span>, <span class="hljs-string">'Smartphone'</span>),
    (<span class="hljs-string">'P002'</span>, <span class="hljs-string">'Laptop'</span>),
    (<span class="hljs-string">'P003'</span>, <span class="hljs-string">'Tablet'</span>),
    (<span class="hljs-string">'P004'</span>, <span class="hljs-string">'Smartwatch'</span>),
    (<span class="hljs-string">'P005'</span>, <span class="hljs-string">'Camera'</span>),
    (<span class="hljs-string">'P006'</span>, <span class="hljs-string">'Headphones'</span>),
    (<span class="hljs-string">'P007'</span>, <span class="hljs-string">'Monitor'</span>),
    (<span class="hljs-string">'P008'</span>, <span class="hljs-string">'Keyboard'</span>),
    (<span class="hljs-string">'P009'</span>, <span class="hljs-string">'Mouse'</span>),
    (<span class="hljs-string">'P010'</span>, <span class="hljs-string">'Printer'</span>)
]

<span class="hljs-comment"># ç”Ÿæˆæ•°æ®</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
    <span class="hljs-keyword">for</span> product_id, product_name <span class="hljs-keyword">in</span> products:
        line = <span class="hljs-string">f"<span class="hljs-subst">{product_id}</span>,<span class="hljs-subst">{product_name}</span>\n"</span>
        f.write(line)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Product data has been written to <span class="hljs-subst">{output_file}</span>"</span>)

</code></pre>
<p>ç”Ÿæˆæ•°æ®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b719f05ee5d8467995c1d9bdede01e3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=KUHpuJP7Ak7NBJXL%2BSOiC8xl%2BJ4%3D" alt="ç”Ÿæˆæ•°æ®" loading="lazy"/></p>
<h3 data-id="heading-13">dim_region_data</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®¾ç½®å‚æ•°</span>
output_file = <span class="hljs-string">'dim_region_data.txt'</span>

<span class="hljs-comment"># å®šä¹‰åŒºåŸŸIDå’ŒåŒºåŸŸåç§°</span>
regions = [
    (<span class="hljs-string">'R001'</span>, <span class="hljs-string">'North America'</span>),
    (<span class="hljs-string">'R002'</span>, <span class="hljs-string">'Europe'</span>),
    (<span class="hljs-string">'R003'</span>, <span class="hljs-string">'Asia'</span>),
    (<span class="hljs-string">'R004'</span>, <span class="hljs-string">'South America'</span>),
    (<span class="hljs-string">'R005'</span>, <span class="hljs-string">'Africa'</span>),
    (<span class="hljs-string">'R006'</span>, <span class="hljs-string">'Australia'</span>),
    (<span class="hljs-string">'R007'</span>, <span class="hljs-string">'Antarctica'</span>)
]

<span class="hljs-comment"># ç”Ÿæˆæ•°æ®</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
    <span class="hljs-keyword">for</span> region_id, region_name <span class="hljs-keyword">in</span> regions:
        line = <span class="hljs-string">f"<span class="hljs-subst">{region_id}</span>,<span class="hljs-subst">{region_name}</span>\n"</span>
        f.write(line)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Region data has been written to <span class="hljs-subst">{output_file}</span>"</span>)

</code></pre>
<p>ç”Ÿæˆçš„æ•°æ®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d9f4b9a64514c44b742154182a94e41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=9jmZxxlSqXW5fgpEQIsYFqEwCdI%3D" alt="ç”Ÿæˆæ•°æ®å¹¶æŸ¥çœ‹" loading="lazy"/></p>
<h3 data-id="heading-14">kylin_examples.sql</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè®¢å•æ•°æ®åº“ã€è¡¨ç»“æ„</span>
<span class="hljs-keyword">create</span> database if <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span> `wzk_kylin`;
<span class="hljs-comment">-- 1ã€é”€å”®è¡¨ï¼šdw_sales</span>
<span class="hljs-comment">-- id å”¯ä¸€æ ‡è¯†</span>
<span class="hljs-comment">-- date1 æ—¥æœŸ</span>
<span class="hljs-comment">-- channelId æ¸ é“ID</span>
<span class="hljs-comment">-- productId äº§å“ID</span>
<span class="hljs-comment">-- regionId åŒºåŸŸID</span>
<span class="hljs-comment">-- amount æ•°é‡</span>
<span class="hljs-comment">-- price é‡‘é¢</span>
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> wzk_kylin.dw_sales(
  id string,
  date1 string,
  channelId string,
  productId string,
  regionId string,
  amount <span class="hljs-type">int</span>,
  price <span class="hljs-keyword">double</span>
)<span class="hljs-type">ROW</span> FORMAT DELIMITED FIELDS TERMINATED <span class="hljs-keyword">BY</span> <span class="hljs-string">','</span>;
<span class="hljs-comment">-- 2ã€æ¸ é“è¡¨ï¼šdim_channel</span>
<span class="hljs-comment">-- channelId æ¸ é“ID</span>
<span class="hljs-comment">-- channelName æ¸ é“åç§°</span>
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> wzk_kylin.dim_channel(
  channelId string,
  channelName string
)<span class="hljs-type">ROW</span> FORMAT DELIMITED FIELDS TERMINATED <span class="hljs-keyword">BY</span> <span class="hljs-string">','</span>;
<span class="hljs-comment">-- 3ã€äº§å“è¡¨ï¼šdim_product</span>
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> wzk_kylin.dim_product(
  productId string,
  productName string
)<span class="hljs-type">ROW</span> FORMAT DELIMITED FIELDS TERMINATED <span class="hljs-keyword">BY</span> <span class="hljs-string">','</span>;
<span class="hljs-comment">--4ã€åŒºåŸŸè¡¨ï¼šdim_region</span>
<span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> wzk_kylin.dim_region(
  regionId string,
  regionName string
)<span class="hljs-type">ROW</span> FORMAT DELIMITED FIELDS TERMINATED <span class="hljs-keyword">BY</span> <span class="hljs-string">','</span>;

<span class="hljs-comment">-- å¯¼å…¥æ•°æ®</span>
LOAD DATA <span class="hljs-keyword">LOCAL</span> INPATH <span class="hljs-string">'/opt/wzk/kylin_test/dw_sales_data.txt'</span>
OVERWRITE <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">TABLE</span> wzk_kylin.dw_sales;
LOAD DATA <span class="hljs-keyword">LOCAL</span> INPATH <span class="hljs-string">'/opt/wzk/kylin_test/dim_channel_data.txt'</span>
OVERWRITE <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">TABLE</span> wzk_kylin.dim_channel;
LOAD DATA <span class="hljs-keyword">LOCAL</span> INPATH <span class="hljs-string">'/opt/wzk/kylin_test/dim_product_data.txt'</span>
OVERWRITE <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">TABLE</span> wzk_kylin.dim_product;
LOAD DATA <span class="hljs-keyword">LOCAL</span> INPATH <span class="hljs-string">'/opt/wzk/kylin_test/dim_region_data.txt'</span>
OVERWRITE <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">TABLE</span> wzk_kylin.dim_region;
</code></pre>
<h2 data-id="heading-15">è¿è¡Œæ•°æ®</h2>
<p>æˆ‘ä»¬éœ€è¦æŠŠåˆšæ‰çš„æ•°æ®ä¸Šä¼ åˆ°æŒ‡å®šç›®å½•ä¸Šï¼Œ/opt/wzk/ç›®å½•ä¸‹ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">cd /opt/wzk/kylin_test
</code></pre>
<p>æˆ‘å·²ç»ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šäº†ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/167850aa4c694ce68d45cc174fd37065~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=ERPhX9rDvybEIwc%2FdQg%2BCW9Gcxw%3D" alt="æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹æ•°æ®" loading="lazy"/></p>
<p>SQLæ–‡ä»¶ä¹Ÿè®°å¾—ä¸Šä¼ ä¸Šå»
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5df7d5f1c5414b57aa4cad281cccf3f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=bC1QjN9P0VQ9Jieec1mhbnJcSqA%3D" alt="SQLæ–‡ä»¶" loading="lazy"/>
æ‰§è¡ŒHiveï¼š</p>
<pre><code class="hljs language-shell" lang="shell">hive -f kylin_examples.sql
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4908fe84d4f14c57895e629a88fc2cee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=ftsytYl0ct%2F2ouv9cr86eL0DJJo%3D" alt="hiveæ‰§è¡ŒSQLå¤„ç†" loading="lazy"/></p>
<h2 data-id="heading-16">æµ‹è¯•æ•°æ®</h2>
<p>æˆ‘ä»¬éœ€è¦å¯åŠ¨Hive</p>
<pre><code class="hljs language-shell" lang="shell">hive
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36bac575055a4390a96385e1e219efd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=NfVkbjpp9CmH2tjgpeGD91mRmB8%3D" alt="å¯åŠ¨HiveæœåŠ¡" loading="lazy"/>
æ‰§è¡Œå¦‚ä¸‹çš„æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">use wzk_kylin;
select date1, sum(price) as total_money, sum(amount) as
total_amount
from dw_sales
group by date1;
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fbc741f8f974fbe97d6039c88b29628~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297359&amp;x-signature=M5n8bHFAChEjRbS%2BUEuCqH6rXGM%3D" alt="æ‰§è¡ŒSQLè¯­å¥æŸ¥è¯¢æ•°æ®" loading="lazy"/></p>
<h2 data-id="heading-17">é”™è¯¯é€ŸæŸ¥</h2>


















































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>Table not found wzk_kylin.dw_sales</td><td>æ•°æ®åº“/è¡¨æœªåˆ›å»ºæˆ–å¤§å°å†™ä¸ä¸€è‡´</td><td>é‡æ–°æ‰§è¡Œå»ºè¡¨è„šæœ¬ï¼›ç¡®è®¤å¤§å°å†™ä¸åº“å‰ç¼€ä¸€è‡´</td></tr><tr><td>LOAD DATA LOCAL å¤±è´¥æˆ–æ•°æ®ä¸ºç©º</td><td>æœ¬åœ°è·¯å¾„é”™è¯¯/æƒé™ä¸è¶³/åˆ†éš”ç¬¦ä¸ç¬¦</td><td>ä¿®æ­£è·¯å¾„ä¸æƒé™ï¼›ç¡®è®¤ CSV åˆ†éš”ä¸åˆ—é¡ºåºä¸€è‡´</td></tr><tr><td>Kylin æ„å»ºä»»åŠ¡å¡ä½æˆ–å¤±è´¥</td><td>HDFS/YARN é˜Ÿåˆ—/æƒé™æˆ– MapReduce å‚æ•°ä¸è¶³</td><td>æå‡é˜Ÿåˆ—èµ„æºï¼›åœ¨ Kylin è°ƒä¼˜æ„å»ºå¹¶è¡Œåº¦ä¸å†…å­˜</td></tr><tr><td>æŸ¥è¯¢å‘½ä¸­æ…¢ï¼ˆæœªèµ°é¢„è®¡ç®—ï¼‰</td><td>ç»´åº¦/åº¦é‡æˆ– Aggregation Group è®¾è®¡ä¸å½“</td><td>ç²¾ç®€ç»´åº¦ç»„åˆï¼Œåˆç†è£å‰ª Cuboidï¼›ä¸ºé«˜é¢‘æŸ¥è¯¢å•ç‹¬å»º AG</td></tr><tr><td>No realize for query</td><td>Cube æœªè¦†ç›–è¯¥ç»´åº¦ç»„åˆæˆ–æ—¶é—´åˆ†åŒº</td><td>æ‰©å……ç»´åº¦ç»„åˆæˆ–è¡¥æ„è¯¥åˆ†åŒº Segment</td></tr><tr><td>å®æ—¶æ¥å…¥å»¶è¿Ÿå¤§</td><td>Kafka Topic/Schema ä¸æ¨¡å‹ä¸åŒ¹é…</td><td>å¯¹é½ Schemaï¼›è°ƒå¤§æ‰¹æ¬¡/ç¼“å­˜ï¼›æ ¸å¯¹æ—¶é—´æˆ³ä¸æ°´ä½</td></tr><tr><td>RegionTooBusy/Timeoutï¼ˆHBaseï¼‰</td><td>åŒºåŸŸçƒ­ç‚¹æˆ–å†…å­˜å‚æ•°è¿‡å°</td><td>é¢„åˆ†åŒº/å†·çƒ­åˆ†ç¦»ï¼›è°ƒå¤§ MemStore/BlockCache</td></tr><tr><td>æƒé™ç›¸å…³æŠ¥é”™ï¼ˆKerberos/ACLï¼‰</td><td>é›†ç¾¤å¼€å¯å®‰å…¨è®¤è¯</td><td>æ£€æŸ¥ keytab ä¸ principalï¼›è·å–ç¥¨æ®å¹¶é…ç½® Kylin/Hive å®¢æˆ·ç«¯</td></tr></tbody></table>
<h2 data-id="heading-18">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-19">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-127 Qwen2.5-Omni æ·±è§£ï¼šThinker-Talker åŒæ ¸ã€TMRoPE ä¸æµå¼è¯­éŸ³</strong></p>
<h3 data-id="heading-20">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-174 FastFDS ä»å•æœºåˆ°åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ï¼šå®æˆ˜ä¸æ¶æ„å–èˆ</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS æ­£åœ¨æ›´æ–°ï¼Œæ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-21">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŠŠåŸå‹é“¾ç”»æˆåœ°é“å›¾ï¼šå 3 ç«™è·¯å°±èƒ½çœ‹æ‡‚ JS çš„â€œç»§æ‰¿â€æ€ä¹ˆè·‘]]></title>    <link>https://juejin.cn/post/7575004291833430067</link>    <guid>https://juejin.cn/post/7575004291833430067</guid>    <pubDate>2025-11-22T03:43:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575004291833430067" data-draft-id="7574816159755190323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŠŠåŸå‹é“¾ç”»æˆåœ°é“å›¾ï¼šå 3 ç«™è·¯å°±èƒ½çœ‹æ‡‚ JS çš„â€œç»§æ‰¿â€æ€ä¹ˆè·‘"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-22T03:43:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¼«å¤©é»„å¶è¿œé£"/> <meta itemprop="url" content="https://juejin.cn/user/2948205649344634"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŠŠåŸå‹é“¾ç”»æˆåœ°é“å›¾ï¼šå 3 ç«™è·¯å°±èƒ½çœ‹æ‡‚ JS çš„â€œç»§æ‰¿â€æ€ä¹ˆè·‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2948205649344634/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¼«å¤©é»„å¶è¿œé£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T03:43:50.000Z" title="Sat Nov 22 2025 03:43:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ JavaScript é‡Œï¼Œâ€œåŸå‹â€è¿™ä¸ªè¯å¬èµ·æ¥é«˜å¤§ä¸Šï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªâ€œé»˜è®¤å¤‡èƒâ€ï¼šå½“å¯¹è±¡è‡ªå·±æ‰¾ä¸åˆ°å±æ€§æ—¶ï¼Œå°±æ²¿ç€åŸå‹è¿™æ¡æš—é“å»â€œäº²æˆšå®¶â€å€Ÿã€‚æ²¡æœ‰ç±»ã€æ²¡æœ‰è“å›¾ï¼Œä»…é è¿™æ¡å¤‡èƒé“¾ï¼Œå°±èƒ½æŠŠå…¬å…±æ–¹æ³•å±‚å±‚å¤ç”¨ï¼Œè®©å†…å­˜çœä¸€åŠã€ä»£ç å°‘ä¸€åŠã€‚æœ¬æ–‡åªèŠâ€œåŸå‹â€æœ¬èº«â€”â€”<code>prototype</code>ã€<code>__proto__</code> è¿™äº›çœ¼å‰èƒ½ç”¨çš„å·¥å…·ï¼ŒæŠŠâ€œå€Ÿä¸œè¥¿â€çš„æµç¨‹ç”»æˆä¸€å¼ å®¶è°±å›¾ï¼Œå¸®ä½ å…ˆçœ‹æ¸…â€œäº²æˆšâ€æ˜¯è°ã€ä½å“ªã€æ€ä¹ˆä¸²é—¨ã€‚è‡³äºåé¢æ›´é«˜é˜¶çš„å°è£…ã€å¤šæ€ã€æ¨¡å—åŒ–ï¼Œç­‰æˆ‘ä»¬æŠŠè¿™æ¡é“¾èµ°ç†Ÿå†å‡çº§ä¹Ÿä¸è¿Ÿã€‚</p>
<h2 data-id="heading-1">ä¸€ï¼š åŸå‹ <code>prototype</code></h2>
<p><strong>åˆç§°æ˜¾ç¤ºåŸå‹ï¼Œå‡½æ•°å¤©ç”Ÿæ‹¥æœ‰çš„ä¸€ä¸ªå±æ€§ ï¼Œå°†æ„é€ å‡½æ•°ä¸­çš„ä¸€äº›å›ºå®šçš„å±æ€§å’Œæ–¹æ³•æŒ‚è½½åˆ°åŸå‹ä¸Šï¼Œåœ¨åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦é‡å¤æ‰§è¡Œè¿™äº›å±æ€§å’Œæ–¹æ³•äº†</strong>ï¼Œæˆ‘ä»¬å…ˆæ¥åˆ›é€ ä¸€ä¸ªç¯å¢ƒï¼Œä¸»è§’ä¾ç„¶æ˜¯æˆ‘ä»¬çš„å°ç±³ su7 ï¼Œsu7 çš„å±æ€§æœ‰æ— æ•°ä¸ªï¼Œä½†æ˜¯å„ä¸ªè½¦ä¸»åªéœ€è¦é€‰æ‹©å¹¶æ”¹åŠ¨çš„å±æ€§å¹¶æ²¡æœ‰é‚£ä¹ˆå¤šï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±èƒ½ç”¨å¾—åˆ°åŸå‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Car.prototype.name</span> = <span class="hljs-string">'su7-Ultra'</span>
<span class="hljs-attr">Car.prototype.lang</span> = <span class="hljs-number">4800</span>
<span class="hljs-attr">Car.prototype.height</span> = <span class="hljs-number">1400</span>
<span class="hljs-attr">Car.prototype.weight</span> = <span class="hljs-number">1.5</span>

function Car(color) {
  <span class="hljs-attr">this.color</span> = color
}
const <span class="hljs-attr">car1</span> = new Car(<span class="hljs-string">'pink'</span>)
const <span class="hljs-attr">car2</span> = new Car(<span class="hljs-string">'green'</span>)
console.log(car1)<span class="hljs-comment">;</span>
</code></pre>
<p>ç”¨åŸå‹ä¹‹åæˆ‘ä»¬åªéœ€è¦è¾“å…¥æƒ³è¦çš„é¢œè‰²å³å¯ï¼Œä¸éœ€è¦ååå¤å¤åˆ›å»ºå‡½æ•°ã€‚åŒæ—¶<strong>æŒ‚è½½åœ¨åŸå‹ä¸Šçš„å±æ€§æ˜¯å¯ä»¥ç›´æ¥è¢«å®ä¾‹å¯¹è±¡è®¿é—®åˆ°çš„</strong>ï¼ˆå¦‚ä¸‹å›¾ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b80b78051e7b44edabefe7ec9813bab4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryr5aSp6buE5Y-26L-c6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387829&amp;x-signature=jDh1bwRiXxyTHoSwO4gMSY0C7Wk%3D" alt="åŸå‹1.png" loading="lazy"/><br/>
å¹¶ä¸”<strong>å®ä¾‹å¯¹è±¡æ— æ³•ä¿®æ”¹ æ„é€ å‡½æ•° åŸå‹ä¸Šçš„å±æ€§å€¼</strong>ï¼Œ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Person.prototype.say</span> = <span class="hljs-string">'æˆ‘å¤ªå¸…äº†'</span>
function Person() {
  <span class="hljs-attr">this.name</span> = <span class="hljs-string">'é¥¶æ€»'</span>
}
const <span class="hljs-attr">p</span> = new Person()  
<span class="hljs-attr">p.say</span> = <span class="hljs-string">'hello'</span>
const <span class="hljs-attr">p2</span> = new Person()
console.log(p2.say)<span class="hljs-comment">;</span>

</code></pre>
<p>è¿™ä¸ªæ—¶å€™åŒæ—¶æœ‰ä¸¤ä¸ª key éƒ½ä¸º say ï¼Œä½† value ä¸ç›¸åŒï¼Œä¸€ä¸ªè¢«æŒ‚åœ¨æ„é€ å‡½æ•°çš„åŸå‹ä¸Šï¼Œä¸€ä¸ªè¢«æŒ‚åœ¨ç¬¬ä¸€ä¸ªå®ä¾‹å¯¹è±¡ p ä¸Šï¼ŒæŒ‰ç…§ä¸Šé¢è¯´æ³•å®ä¾‹å¯¹è±¡æ— æ³•ä¿®æ”¹æ„é€ å‡½æ•°åŸå‹ä¸Šçš„å±æ€§å€¼ï¼Œä½†æ˜¯æ‰“å°å‡ºæ¥çœŸæ˜¯è¿™æ ·å—ï¼Œç©¶ç«Ÿæ˜¯ 'æˆ‘å¤ªå¸…äº†' ï¼Œè¿˜æ˜¯ 'hello'ï¼Œæˆ‘ä»¬æ¥æ­æ™“ç­”æ¡ˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/817338767d54428da67f1c19efac4824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryr5aSp6buE5Y-26L-c6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387829&amp;x-signature=8ntqGj%2BlHK%2BLTfwxwj7qwTj5RxI%3D" alt="åŸå‹2.png" loading="lazy"/><br/>
æœçœŸæ˜¯å®ä¾‹å¯¹è±¡æ— æ³•ä¿®æ”¹æ„é€ å‡½æ•°åŸå‹ä¸Šçš„å±æ€§å€¼ã€‚</p>
<h2 data-id="heading-2">äºŒï¼šå¯¹è±¡åŸå‹ <code>__proto__ </code></h2>
<p><strong>åˆç§°éšå¼åŸå‹ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ‹¥æœ‰ä¸€ä¸ª <code>__proto__</code> å±æ€§ï¼Œè¯¥å±æ€§å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ v8åœ¨è®¿é—®å¯¹è±¡ä¸­çš„ä¸€ä¸ªå±æ€§æ—¶ï¼Œä¼šå…ˆè®¿é—®è¯¥å¯¹è±¡ä¸­çš„æ˜¾ç¤ºå±æ€§ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å›å»å¯¹è±¡çš„éšå¼åŸå‹ä¸­æŸ¥æ‰¾ï¼Œå®ä¾‹å¯¹è±¡çš„éšå¼åŸå‹  === æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹ï¼Œæ‰€ä»¥å¦‚æœå®ä¾‹å¯¹è±¡çš„éšå¼åŸå‹æ‰¾ä¸åˆ°é‚£ä¹ˆå°±å†ä¼šå»æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹ä¸Šæ‰¾</strong></p>
<p>è¿™ä¸å¾—ä¸å†å¼•å‡ºä¸€ä¸ªæ¦‚å¿µâ€”â€” <strong>åŸå‹é“¾</strong>ï¼šv8 åœ¨è®¿é—®å¯¹è±¡ä¸­çš„å±æ€§æ—¶ï¼Œä¼šå…ˆè®¿é—®è¯¥å¯¹è±¡ä¸­çš„æ˜¾ç¤ºå±æ€§ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å»å¯¹è±¡çš„éšå¼åŸå‹ä¸Šæ‰¾ï¼Œå¦‚æœè¿˜æ‰¾ä¸åˆ°ï¼Œå°±å»<code>__proto__.__proto__</code> ä¸Šæ‰¾ï¼Œå±‚å±‚å¾€ä¸Šï¼Œç›´åˆ°æ‰¾åˆ°<code>null</code>ä¸ºæ­¢ã€‚è¿™ç§æŸ¥æ‰¾å…³ç³»è¢«ç§°ä¸ºåŸå‹é“¾</p>
<p>ä¸ºäº†æ›´å¥½çš„ç†è§£å®ƒï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªç»§æ‰¿ä¾‹å­</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> = <span class="hljs-string">'å¼ '</span>
}
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>()  <span class="hljs-comment">// {lastName: 'å¼ '}.__proto__ = Parent.prototype</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = <span class="hljs-number">18</span>
}
<span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>() 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-property">lastName</span>);
</code></pre>
<p>åœ¨å®ä¾‹å¯¹è±¡ä¸­æˆ‘ä»¬åªèƒ½æ‰¾åˆ°å„¿å­çš„å¹´é¾„å±æ€§ï¼Œå§“æ°å¼ æ˜¯å„¿å­ä»çˆ¶äº²é‚£é‡Œç»§æ‰¿çš„ï¼Œæˆ‘ä»¬è¦æŸ¥åˆ°å„¿å­çš„å§“æ°ï¼Œæ ¹æ®åŸå‹é“¾åŸç†æˆ‘ä»¬å…ˆä»å®ä¾‹å¯¹è±¡ c ä¸­æ‰¾æœ‰æ²¡æœ‰æ˜¾ç¤ºå±æ€§æ˜¯å…³äºå§“æ°çš„ï¼Œå¾ˆæ˜æ˜¾å¹¶æ²¡æœ‰ï¼Œæ¥ç€å°±å»å®ä¾‹å¯¹è±¡çš„éšå¼åŸå‹ä¸Šæ‰¾ï¼Œä¹Ÿæ²¡æœ‰ï¼Œæœ€åå°±æ¥åˆ°äº†æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹ä¸ŠæŸ¥æ‰¾ï¼Œåœ¨ä»£ç çš„ç¬¬å››è¡Œå¯ä»¥çœ‹åˆ°æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹è¢«èµ‹å€¼ä¸Šäº† lastName å±æ€§ï¼Œæ‰€ä»¥æœ€ç»ˆæ˜¯å¦å¯ä»¥æŸ¥æ‰¾å¾—åˆ°å§“æ°å¼ å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç›´æ¥çœ‹ç»“æœ
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bb3b16690694c6f90d76b60e8b1af98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryr5aSp6buE5Y-26L-c6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387829&amp;x-signature=ENPAauYnz7DORlytiIyZLoVVSe0%3D" alt="åŸå‹3.png" loading="lazy"/></p>
<p>å¥½ä½ è¯´è¿™ä¸ªä¹Ÿå¤ªç®€å•äº†å§ï¼Œå°±çˆ¶å­ç»§æ‰¿è€Œå·²ã€‚è¯ä¸å¤šè¯´æˆ‘å†é™„ä¸Šä¸€ä¸²ä»£ç å’Œæ‰“å°ç»“æœ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Grand</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">house</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å››åˆé™¢'</span>);
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Grand</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">card</span> = <span class="hljs-number">10000</span>
}
<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Grand</span>()  <span class="hljs-comment">// {card: 10000}.__proto__ = Grand.prototype.__proto__ = Object.prototype.__proto__ = null</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> = <span class="hljs-string">'å¼ '</span>
}
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>()  <span class="hljs-comment">// {lastName: 'å¼ '}.__proto__ = Parent.prototype</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = <span class="hljs-number">18</span>
}
<span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>()  <span class="hljs-comment">// {age: 18}.__proto__ = Child.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-property">card</span>);
c.<span class="hljs-title function_">house</span>()  
<span class="hljs-comment">// console.log(c.toString());</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9072178d94234bc699f7da86a4a0e44b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryr5aSp6buE5Y-26L-c6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387829&amp;x-signature=KCuz29mUy0tHgq71LpQPHMjBtvU%3D" alt="åŸå‹4.png" loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘ä»¬è¦æ³¨æ„ä¸€ç‚¹ï¼šå¦‚æœè®©ä½ æŸ¥æ‰¾ä¸€ä¸ªæ•´ä¸ªé¡µé¢éƒ½æ²¡æœ‰çš„å±æ€§åˆè¯¥ä¼šæ˜¯ä»€ä¹ˆæ‰“å°ç»“æœå‘¢ï¼Ÿæˆ‘ä»¬æ³¨æ„çœ‹ä¸Šé¢æœ€åä¸€è¡Œæ³¨é‡Šæ‰çš„ä»£ç ï¼Œä»–çš„è¾“å‡ºç»“æœå¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5aabd168f6f41f98485d7d72eb209ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryr5aSp6buE5Y-26L-c6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387829&amp;x-signature=eK%2F7bGMBnjrJYDYxFeU%2Fi%2B%2BNeTE%3D" alt="åŸå‹5.png" loading="lazy"/></p>
<p>ä»–æ˜¯ç›´æ¥æ‰¾åˆ°äº†å…¨å±€çš„å¯¹è±¡ä¸Šï¼Œç»å†äº†ä¸€éåŸå‹é“¾æŸ¥æ‰¾åœ¨ <code>Object.prototype</code>ä¸Šæ‰¾åˆ°ï¼Œå¦‚æœå†ä¸æ‰¾åˆ°æœ€ç»ˆå°±ä¼šåœç•™åœ¨<code>null</code>ä¸Š ï¼Œä¸‹é¢æ”¾ä¸€å¼  js ç•Œä¸­å¹¿ä¸ºæµä¼ çš„ä¸€å¼ å›¾ï¼Œå¦‚æœä½ èƒ½çœ‹æ‡‚é‚£ä¹ˆä½ å°±æ˜¯å½»åº•ä¼šäº†ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a8f950d4818404e9f636e84c83d03d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryr5aSp6buE5Y-26L-c6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387829&amp;x-signature=wG8hIhVuHBoh4jbg5idLZ3EWZLo%3D" alt="åŸå‹é“¾å›¾.webp" loading="lazy"/></p>
<h2 data-id="heading-3">ä¸‰ï¼š<code>new</code> åœ¨å¹²ä»€ä¹ˆï¼Ÿ</h2>
<p>è¿™æ—¶å€™ä½ ä¼šè¯´ä»€ä¹ˆï¼Ÿä¸Šç¯‡æ–‡ç« ä¸æ˜¯è®²äº† new ç©¶ç«Ÿå¹²äº†äº›ä»€ä¹ˆå—ï¼Œæ€ä¹ˆåˆé—®ï¼Œä¸å¿…æƒŠè®¶ï¼Œå…¶å®ä¸Šæ¬¡æ²¡è®²å…¨ï¼Œè¿™æ¬¡æ¥å¸¦ä½ çœŸæ­£çœ‹çœ‹ new ç©¶ç«Ÿç©¶ç«Ÿéƒ½å¹²äº†äº›ä»€ä¹ˆï¼ˆè¿™ç»å¯¹æ˜¯æœ€ç»ˆç†è§£ï¼‰ç›´æ¥ä¸€å¥—å°è¿æ‹›å…ˆä¸Šäº”ä¸ªæ­¥éª¤</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</li>
<li>è®©æ„é€ å‡½æ•°ä¸­çš„ <code>this</code> æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡</li>
<li>æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç  ï¼ˆç­‰åŒäºå¾€ç©ºå¯¹è±¡ä¸­æ·»åŠ å±æ€§å€¼ï¼‰</li>
<li>å°†è¿™ä¸ªç©ºå¯¹è±¡çš„éšå¼åŸå‹(<code>__proto__</code>) èµ‹å€¼æˆ æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹(<code>prototype</code>)</li>
<li>è¿”å›è¯¥å¯¹è±¡</li>
</ol>
<p>å†ä¸Šä»£ç ï¼ˆåŠ æ³¨é‡Šï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">run</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'running'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params"/>) {   <span class="hljs-comment">// new Function()</span>
  <span class="hljs-comment">// const obj = {}      //1</span>
  <span class="hljs-comment">// Car.call(obj)  // call æ–¹æ³•å°† Car å‡½æ•°ä¸­çš„ this = obj    2</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'su7'</span>  <span class="hljs-comment">// 3</span>
  <span class="hljs-comment">// obj.__proto__ = Car.prototype  // 4</span>
  <span class="hljs-comment">// return obj    5</span>
}
<span class="hljs-keyword">const</span> car = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>() <span class="hljs-comment">// {name: 'su7'}.__proto__  == Car.prototype</span>
car.<span class="hljs-title function_">run</span>()
</code></pre>
<p>æœ€åè¾“å‡º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39c7abd33f774c7ba913213246b99988~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryr5aSp6buE5Y-26L-c6aOe:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764387829&amp;x-signature=zszd3lJr5m3dqusuMyTJcGy8gKE%3D" alt="åŸå‹6.png" loading="lazy"/></p>
<h2 data-id="heading-4">ç»“è¯­</h2>
<ol>
<li>æ˜¾å¼åŸå‹ï¼ˆ<code>prototype</code>ï¼‰æ˜¯å‡½æ•°è‡ªå¸¦çš„â€œæ ·æ¿æˆ¿â€ï¼Œæ‰€æœ‰å®ä¾‹éƒ½èƒ½æ¥è¹­ä½ã€‚</li>
<li>éšå¼åŸå‹ï¼ˆ<code>__proto__</code>ï¼‰æ˜¯å®ä¾‹æ‰‹é‡Œçš„â€œé—¨ç¦å¡â€ï¼Œåˆ·å¡å°±èƒ½è¿›æ ·æ¿æˆ¿æ‰¾æ–¹æ³•ã€‚</li>
<li>åŸå‹é“¾å°±æ˜¯ä¸€å¼ â€œé—¨ç¦å¡é“¾â€ï¼šåˆ·ä¸åˆ°å°±å†åˆ·ä¸Šä¸€å±‚çš„å¡ï¼Œç›´åˆ° <code>null</code> åˆ°å¤´ã€‚</li>
<li><code>new</code> çš„äº”æ­¥æ›²ï¼šç©ºå¯¹è±¡â†’è®¤è¯â†’ç»‘å¡â†’æ‰§è¡Œâ†’è¿”å›ï¼Œä¸€å£æ°”æŠŠâ€œæ ·æ¿æˆ¿â€ç»§æ‰¿ç»™æ–°å®ä¾‹ã€‚</li>
</ol>
<p>æŠŠè¿™å››ç‚¹ä¸²æˆä¸€å¼ åœ°é“å›¾ï¼Œä»¥åçœ‹ä»»ä½•â€œæ‰¾ä¸åˆ°å±æ€§â€çš„é—®é¢˜ï¼Œå…ˆé—®ä¸€å¥ï¼šå®ƒåˆ·å¡åˆ·åˆ°ç¬¬å‡ ç«™äº†ï¼ŸåŸå‹é“¾é€šäº†ï¼Œç»§æ‰¿å°±ä¸å†æ˜¯é»‘é­”æ³•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python ç¼–ç¨‹å®æˆ˜ Â· è¿›é˜¶ä¸èŒä¸šå‘å±•ï¼šWeb å…¨æ ˆï¼ˆDjango / FastAPIï¼‰]]></title>    <link>https://juejin.cn/post/7575015480199118900</link>    <guid>https://juejin.cn/post/7575015480199118900</guid>    <pubDate>2025-11-22T04:39:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575015480199118900" data-draft-id="7575065455074574371" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python ç¼–ç¨‹å®æˆ˜ Â· è¿›é˜¶ä¸èŒä¸šå‘å±•ï¼šWeb å…¨æ ˆï¼ˆDjango / FastAPIï¼‰"/> <meta itemprop="keywords" content="åç«¯,Python,Trae"/> <meta itemprop="datePublished" content="2025-11-22T04:39:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python ç¼–ç¨‹å®æˆ˜ Â· è¿›é˜¶ä¸èŒä¸šå‘å±•ï¼šWeb å…¨æ ˆï¼ˆDjango / FastAPIï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T04:39:16.000Z" title="Sat Nov 22 2025 04:39:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ Python çš„èŒä¸šåŒ–é“è·¯ä¸Šï¼ŒWeb å¼€å‘å‡ ä¹æ˜¯ç»•ä¸è¿‡çš„æ–¹å‘ã€‚ä»ä¼ ç»Ÿ MVC æ¡†æ¶åˆ°ç°ä»£å¼‚æ­¥ API æœåŠ¡ï¼ŒPython çš„ Web ç”Ÿæ€ä¸»è¦ç”±ä¸¤å¤§ä»£è¡¨å æ®ï¼š<strong>Django</strong> ä¸ <strong>FastAPI</strong>ã€‚</p>
</blockquote>
<p>å®ƒä»¬é£æ ¼è¿¥å¼‚ï¼Œå´éƒ½æœ‰ç€éå¸¸å¼ºçš„ç”Ÿäº§åŠ›ã€‚æœ¬ç¯‡å¸¦ä½ ä»æ¶æ„ç†å¿µã€åº”ç”¨åœºæ™¯ã€æ ¸å¿ƒç‰¹æ€§åˆ°å·¥ç¨‹å®è·µï¼Œå…¨é¢äº†è§£å®ƒä»¬åœ¨ Web å…¨æ ˆå¼€å‘ä¸­çš„å®šä½ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€Djangoï¼šæˆç†Ÿçš„â€œå…¨å®¶æ¡¶â€ Web Framework</strong></h2>
<p>å¦‚æœä½ æƒ³æ„å»ºä¸€ä¸ª<strong>å®Œæ•´ã€ä¸¥è‚ƒã€åŠŸèƒ½å®Œå–„çš„ Web ç½‘ç«™</strong>ï¼Œé‚£ä¹ˆ Django æ˜¯æœ€ç¨³å¦¥çš„é€‰æ‹©ã€‚å®ƒéµå¾ª MTV æ¨¡å¼ï¼Œå¹¶ä¸”å¸¦ç€å¤§é‡â€œå¼€ç®±å³ç”¨â€çš„ç»„ä»¶ï¼š</p>
<ul>
<li>ORMï¼ˆæ•°æ®åº“å±‚ï¼‰</li>
<li>æ¨¡æ¿ç³»ç»Ÿï¼ˆå‰ç«¯æ¸²æŸ“ï¼‰</li>
<li>ç”¨æˆ·è®¤è¯ç³»ç»Ÿ</li>
<li>ä¸­é—´ä»¶æœºåˆ¶</li>
<li>Admin åå°</li>
<li>ç¼“å­˜ç³»ç»Ÿ</li>
<li>Form / è¡¨å•éªŒè¯</li>
<li>ä¼šè¯ç®¡ç†ç­‰æˆç†Ÿæœºåˆ¶</li>
</ul>
<p>è¿™ç§è®¾è®¡è®©å®ƒä¸€ç›´æ˜¯ä¼ä¸šçº§ Web é¡¹ç›®çš„é¦–é€‰ï¼Œå°¤å…¶é€‚åˆï¼š</p>
<p>âœ” CMS / ä¼ä¸šç½‘ç«™
âœ” ç”µå•†ç³»ç»Ÿ
âœ” å†…éƒ¨ç®¡ç†å¹³å°ï¼ˆERP/CRMï¼‰
âœ” å†…å®¹å‘å¸ƒç³»ç»Ÿ
âœ” éœ€è¦è´¦æˆ·ä½“ç³»ã€æƒé™çš„é¡¹ç›®</p>
<hr/>
<h3 data-id="heading-1"><strong>1. Django çš„æ¶æ„ä¼˜åŠ¿</strong></h3>
<h4 data-id="heading-2"><strong>ï¼ˆ1ï¼‰é«˜é›†æˆåº¦ï¼šæ— éœ€è‡ªè¡ŒæŒ‘é€‰ä¾èµ–</strong></h4>
<p>Django çš„æ ¸å¿ƒä»·å€¼ä¹‹ä¸€å°±æ˜¯è®©å¼€å‘è€…<strong>ä¸“æ³¨ä¸šåŠ¡ï¼Œè€Œä¸æ˜¯æ¡†æ¶æ­å»º</strong>ã€‚</p>
<p>ä¸€ä¸ªç®€å•å‘½ä»¤å°±èƒ½åˆå§‹åŒ–é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">django-admin startproject mysite
</code></pre>
<p>ç”¨æˆ·ä½“ç³»ã€Admin åå°ã€ORM å…¨éƒ½è‡ªå¸¦ï¼ŒåŸºæœ¬ä¸ç”¨æ“å¿ƒâ€œè£…ä¸€å †åº“â€ã€‚</p>
<hr/>
<h4 data-id="heading-3"><strong>ï¼ˆ2ï¼‰Django ORMï¼šå¼€å‘æ•ˆç‡æé«˜</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Article</span>(models.Model):
    title = models.CharField(max_length=<span class="hljs-number">100</span>)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=<span class="hljs-literal">True</span>)
</code></pre>
<p>å¢åˆ æ”¹æŸ¥å®Œå…¨ä¸ç”¨å†™ SQLï¼š</p>
<pre><code class="hljs language-python" lang="python">Article.objects.create(title=<span class="hljs-string">"Hello"</span>, content=<span class="hljs-string">"World"</span>)
</code></pre>
<p>å¯¹äºå¤æ‚é¡¹ç›®ï¼Œè¿™ç§ ORM èƒ½çœæ‰å¤§é‡æ ·æ¿ä»£ç ã€‚</p>
<hr/>
<h4 data-id="heading-4"><strong>ï¼ˆ3ï¼‰Admin åå°ï¼šä¼ä¸šé¡¹ç›®å¿…å¤‡</strong></h4>
<p>Django Admin æ˜¯ä¸€ä¸ªè¶…çº§ç”Ÿäº§åŠ›å·¥å…·ï¼š</p>
<ul>
<li>è‡ªåŠ¨ç”Ÿæˆå¢åˆ æ”¹æŸ¥ç•Œé¢</li>
<li>è‡ªåŠ¨åˆ†é¡µã€æœç´¢ã€è¿‡æ»¤</li>
<li>è‡ªåŠ¨ç®¡ç†æƒé™</li>
</ul>
<p>åªéœ€å‡ è¡Œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin
<span class="hljs-keyword">from</span> .models <span class="hljs-keyword">import</span> Article

admin.site.register(Article)
</code></pre>
<p>å°±æ‹¥æœ‰ä¸€ä¸ªå¯ç”¨çš„åå°ç®¡ç†ç³»ç»Ÿã€‚</p>
<hr/>
<h4 data-id="heading-5"><strong>ï¼ˆ4ï¼‰æ‰©å±•æ€§ä¸ç”Ÿæ€</strong></h4>
<p>Django æ‹¥æœ‰æˆç†Ÿçš„ç¬¬ä¸‰æ–¹ç”Ÿæ€ï¼š</p>
<ul>
<li>DRFï¼ˆæ„å»º REST APIï¼‰</li>
<li>Django Debug Toolbar</li>
<li>Django Channelsï¼ˆWebSocketï¼‰</li>
<li>Celeryï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰</li>
<li>Wagtail / Django-CMS</li>
</ul>
<p>é€‚åˆæ„å»ºå¤æ‚/é•¿æœŸç»´æŠ¤çš„é¡¹ç›®ã€‚</p>
<hr/>
<h2 data-id="heading-6"><strong>äºŒã€FastAPIï¼šå¼‚æ­¥æ—¶ä»£çš„é«˜æ€§èƒ½æ¥å£æ¡†æ¶</strong></h2>
<p>FastAPI æ˜¯è¿‘å¹´æ¥å¢é•¿æœ€å¿«çš„ Python Web æ¡†æ¶ï¼Œå®ƒä»£è¡¨äº†ç°ä»£ API è®¾è®¡ç†å¿µï¼š</p>
<p><strong>é«˜æ€§èƒ½ + å¼‚æ­¥ + ç±»å‹æç¤º + è‡ªåŠ¨æ–‡æ¡£</strong></p>
<p>éå¸¸é€‚åˆï¼š</p>
<p>âœ” é«˜å¹¶å‘ API æœåŠ¡
âœ” å¾®æœåŠ¡æ¶æ„
âœ” AI / æ•°æ®æ¥å£
âœ” ç§»åŠ¨ç«¯åç«¯
âœ” éœ€è¦è‡ªåŠ¨åŒ–æ–‡æ¡£çš„é¡¹ç›®ï¼ˆSwagger UIï¼‰</p>
<hr/>
<h3 data-id="heading-7"><strong>1. FastAPI çš„æ ¸å¿ƒä¼˜åŠ¿</strong></h3>
<h4 data-id="heading-8"><strong>ï¼ˆ1ï¼‰æ€§èƒ½å¼ºï¼šåŸºäº Starlette + Pydantic</strong></h4>
<p>FastAPI æ˜¯ç›®å‰æ€§èƒ½æœ€å¼ºçš„ Python Web æ¡†æ¶ä¹‹ä¸€ï¼Œæ¥è¿‘ Node.js å’Œ Goã€‚</p>
<p>å®ƒçš„å¼‚æ­¥ç‰¹æ€§è®©å®ƒå¯ä»¥è½»æ¾æ”¯æ’‘é«˜å¹¶å‘è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI

app = FastAPI()

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/hello"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">hello</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"msg"</span>: <span class="hljs-string">"world"</span>}
</code></pre>
<hr/>
<h4 data-id="heading-9"><strong>ï¼ˆ2ï¼‰è‡ªåŠ¨ç”Ÿæˆ Swagger / Redoc æ–‡æ¡£</strong></h4>
<p>åªéœ€è®¿é—®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/docs
</code></pre>
<p>å°±èƒ½çœ‹åˆ°å®Œæ•´çš„ API æ–‡æ¡£ï¼Œæ‰€æœ‰å‚æ•°ã€è¿”å›å€¼éƒ½è‡ªåŠ¨æ¨å¯¼ã€‚</p>
<hr/>
<h4 data-id="heading-10"><strong>ï¼ˆ3ï¼‰Pydantic æ•°æ®éªŒè¯éå¸¸å¼ºå¤§</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel

<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    name: <span class="hljs-built_in">str</span>
    age: <span class="hljs-built_in">int</span>
</code></pre>
<p>è¯·æ±‚ä½“éªŒè¯ç›´æ¥å†™æˆæ•°æ®æ¨¡å‹ï¼Œå¤§å¹…æå‡å¯é æ€§ã€‚</p>
<hr/>
<h4 data-id="heading-11"><strong>ï¼ˆ4ï¼‰æ›´ç°ä»£çš„ä»£ç é£æ ¼</strong></h4>
<p>FastAPI é¼“åŠ±ï¼š</p>
<ul>
<li>ç±»å‹æ³¨è§£</li>
<li>å¼‚æ­¥ async/await</li>
<li>ä¾èµ–æ³¨å…¥æ¨¡å¼ï¼ˆDIï¼‰</li>
<li>é¢å‘å¾®æœåŠ¡æ¶æ„çš„ç»„ç»‡æ–¹å¼</li>
</ul>
<p>ä¸å½“ä»£å·¥ç¨‹è¶‹åŠ¿é«˜åº¦å¥‘åˆã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>ä¸‰ã€ä¸¤è€…å·®å¼‚ï¼šä½ åº”è¯¥é€‰æ‹©å“ªä¸ªï¼Ÿ</strong></h2>













































<table><thead><tr><th>é¡¹ç›®éœ€æ±‚</th><th>Django</th><th>FastAPI</th></tr></thead><tbody><tr><td>ä¼ ç»Ÿ Web ç½‘ç«™</td><td>âœ”âœ” æœ€é€‚åˆ</td><td>ä¸€èˆ¬</td></tr><tr><td>å¤æ‚ä¸šåŠ¡ç³»ç»Ÿï¼ˆæƒé™ã€åå°ï¼‰</td><td>âœ”âœ” æœ€ä¼˜</td><td>ä¸€èˆ¬</td></tr><tr><td>å¾®æœåŠ¡ / API</td><td>å¯ç”¨ï¼ˆDRFï¼‰</td><td>âœ”âœ” æœ€ä¼˜</td></tr><tr><td>é«˜å¹¶å‘åœºæ™¯</td><td>ä¸€èˆ¬</td><td>âœ”âœ” æ›´å¼º</td></tr><tr><td>å¿«é€Ÿå¼€å‘</td><td>âœ”ï¼ˆæœ‰å…¨å®¶æ¡¶ï¼‰</td><td>âœ”ï¼ˆè¾ƒå°‘æ ·æ¿ï¼‰</td></tr><tr><td>è‡ªåŠ¨åŒ– API æ–‡æ¡£</td><td>éœ€è¦ DRF</td><td>å†…ç½®</td></tr><tr><td>å¼‚æ­¥æ”¯æŒ</td><td>ä¸å®Œç¾</td><td>å®Œç¾</td></tr></tbody></table>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<p><strong>Django é€‚åˆé•¿å‘¨æœŸã€å¤æ‚ä¸šåŠ¡çš„â€œä¼ä¸šçº§ç³»ç»Ÿâ€ï¼›
FastAPI é€‚åˆç°ä»£ã€é«˜æ€§èƒ½ API æœåŠ¡ä¸å¾®æœåŠ¡æ¶æ„ã€‚</strong></p>
<p>åœ¨çœŸå®å›¢é˜Ÿä¸­ï¼Œä¸¤è€…ç»å¸¸æ­é…ä½¿ç”¨ï¼š</p>
<ul>
<li><strong>åå°ç®¡ç†ï¼šDjangoï¼ˆAdmin + ORMï¼‰</strong></li>
<li><strong>é«˜æ€§èƒ½ APIï¼šFastAPIï¼ˆå¹¶å‘å‹å¥½ï¼‰</strong></li>
</ul>
<hr/>
<h2 data-id="heading-13"><strong>å››ã€å®æˆ˜ï¼šé¡¹ç›®ç»“æ„å¯¹æ¯”ï¼ˆä¸“ä¸šçº§ç¤ºä¾‹ï¼‰</strong></h2>
<h3 data-id="heading-14"><strong>1. Django é¡¹ç›®ç»“æ„</strong></h3>
<pre><code class="hljs language-arduino" lang="arduino">mysite/
    manage.py
    settings.py
    urls.py
    apps/
        blog/
            models.py
            views.py
            urls.py
            admin.py
    templates/
    <span class="hljs-type">static</span>/
</code></pre>
<hr/>
<h3 data-id="heading-15"><strong>2. FastAPI é¡¹ç›®ç»“æ„ï¼ˆæ¨èï¼‰</strong></h3>
<pre><code class="hljs language-arduino" lang="arduino">app/
    main.py
    api/
        v1/
            users.py
            items.py
    models/
        user.py
    core/
        config.py
    services/
        user_service.py
</code></pre>
<p>æ¸…æ™°ã€å¯æ‰©å±•ã€é€‚åˆå¤§å‹é¡¹ç›®ã€‚</p>
<hr/>
<h2 data-id="heading-16"><strong>äº”ã€æ•°æ®åº“ã€å¼‚æ­¥ã€æƒé™ï¼šå…¨æ ˆå·¥ç¨‹å…³é”®ç‚¹</strong></h2>
<h4 data-id="heading-17"><strong>Djangoï¼šORM + Admin åŸºæœ¬æå®šå…¨å±€ä¸šåŠ¡</strong></h4>
<ul>
<li>æƒé™ç®¡ç†æˆç†Ÿ</li>
<li>ORM å¼ºå¤§</li>
<li>Sessions/Cache ä¸­é—´ä»¶å®Œå–„</li>
</ul>
<p>é€‚åˆéœ€è¦ç®¡ç†åå°çš„ç³»ç»Ÿã€‚</p>
<hr/>
<h4 data-id="heading-18"><strong>FastAPIï¼šå¼‚æ­¥å‹å¥½çš„æ•°æ®åº“å·¥å…·</strong></h4>
<p>å¸¸è§é€‰æ‹©ï¼š</p>
<ul>
<li>SQLAlchemy + AsyncSession</li>
<li>Tortoise ORM</li>
<li>Prisma-Python</li>
</ul>
<hr/>
<h4 data-id="heading-19"><strong>API æƒé™ï¼ˆFastAPIï¼‰</strong></h4>
<p>FastAPI ä¸­ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">verify_token</span>(<span class="hljs-params">token: <span class="hljs-built_in">str</span> = Header(<span class="hljs-params">...</span>)</span>):
    <span class="hljs-keyword">if</span> token != <span class="hljs-string">"VALID"</span>:
        <span class="hljs-keyword">raise</span> HTTPException(<span class="hljs-number">403</span>)
</code></pre>
<p>éå¸¸çµæ´»ã€‚</p>
<hr/>
<h2 data-id="heading-20"><strong>å…­ã€éƒ¨ç½²ï¼šå·¥ç¨‹å›¢é˜Ÿå¿…é¡»æŒæ¡çš„çŸ¥è¯†ç‚¹</strong></h2>
<h4 data-id="heading-21"><strong>Django éƒ¨ç½²</strong></h4>
<p>æ¨èï¼š</p>
<ul>
<li>Nginx + Gunicorn / uWSGI</li>
<li>Celery + Redisï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰</li>
<li>Supervisor / systemd ç®¡ç†è¿›ç¨‹</li>
</ul>
<p>é€‚åˆä¼ ç»Ÿå•ä½“æ¶æ„ã€‚</p>
<hr/>
<h4 data-id="heading-22"><strong>FastAPI éƒ¨ç½²</strong></h4>
<p>æ¨èï¼š</p>
<ul>
<li>Nginx + Uvicorn / Hypercorn</li>
<li>Dockerï¼ˆå¾®æœåŠ¡æœ€ä½³ï¼‰</li>
<li>Kubernetesï¼ˆå¤§è§„æ¨¡é›†ç¾¤ï¼‰</li>
</ul>
<p>FastAPI å¯¹å®¹å™¨åŒ–æ”¯æŒæ›´å¥½ã€‚</p>
<hr/>
<h2 data-id="heading-23"><strong>ä¸ƒã€æ€»ç»“ï¼šçœŸæ­£çš„ Python Web å…¨æ ˆèƒ½åŠ›</strong></h2>
<p>æˆä¸ºä¸“ä¸š Python å·¥ç¨‹å¸ˆï¼Œä½ åº”è¯¥æŒæ¡ï¼š</p>
<p>âœ” Djangoï¼šæ‰“é€ å¤æ‚ä¸šåŠ¡ç³»ç»Ÿä¸åå°
âœ” DRFï¼šDjango API åŒ–
âœ” FastAPIï¼šé«˜æ€§èƒ½ API æœåŠ¡
âœ” ORMï¼ˆDjango ORM / SQLAlchemyï¼‰
âœ” å‰åç«¯åˆ†ç¦»ï¼ˆVue / Reactï¼‰
âœ” Nginx / Docker éƒ¨ç½²æµç¨‹</p>
<p>è€Œ Django + FastAPI çš„ç»„åˆï¼Œèƒ½è¦†ç›–ç»å¤§å¤šæ•°ä¼ä¸šçº§åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python ç¼–ç¨‹å®æˆ˜ Â· è¿›é˜¶ä¸èŒä¸šå‘å±•ï¼šæ•°æ®åˆ†æä¸ AIï¼ˆPandasã€NumPyã€Scikit-learnï¼‰]]></title>    <link>https://juejin.cn/post/7575015480199135284</link>    <guid>https://juejin.cn/post/7575015480199135284</guid>    <pubDate>2025-11-22T04:40:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575015480199135284" data-draft-id="7574997924930748456" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python ç¼–ç¨‹å®æˆ˜ Â· è¿›é˜¶ä¸èŒä¸šå‘å±•ï¼šæ•°æ®åˆ†æä¸ AIï¼ˆPandasã€NumPyã€Scikit-learnï¼‰"/> <meta itemprop="keywords" content="åç«¯,Python,Trae"/> <meta itemprop="datePublished" content="2025-11-22T04:40:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python ç¼–ç¨‹å®æˆ˜ Â· è¿›é˜¶ä¸èŒä¸šå‘å±•ï¼šæ•°æ®åˆ†æä¸ AIï¼ˆPandasã€NumPyã€Scikit-learnï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T04:40:18.000Z" title="Sat Nov 22 2025 04:40:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ•°æ®åˆ†æä¸äººå·¥æ™ºèƒ½æ˜¯ Python æœ€å¼ºçš„åº”ç”¨é¢†åŸŸä¹‹ä¸€ã€‚ä»åŸºç¡€çš„æ•°ç»„è¿ç®—ï¼Œåˆ°é«˜ç»´æ•°æ®å¤„ç†ï¼Œå†åˆ°æœºå™¨å­¦ä¹ å»ºæ¨¡ï¼ŒPython å·²ç»å½¢æˆäº†ä¸€ä¸ªå®Œæ•´ä¸”æˆç†Ÿçš„ç§‘å­¦è®¡ç®—ç”Ÿæ€ä½“ç³»ã€‚</p>
</blockquote>
<p>è€Œè¿™ä¸‰å¤§å·¥å…·åº“æ­£æ˜¯æ ¸å¿ƒï¼š</p>
<ul>
<li><strong>NumPy</strong>ï¼šé«˜æ€§èƒ½æ•°å€¼è®¡ç®—åŸºç¡€</li>
<li><strong>Pandas</strong>ï¼šç»“æ„åŒ–æ•°æ®å¤„ç†ä¸åˆ†æ</li>
<li><strong>Scikit-learn</strong>ï¼šæœºå™¨å­¦ä¹ å»ºæ¨¡å…¨æµç¨‹</li>
</ul>
<p>å¦‚æœè¯´çœŸå®ä¸–ç•Œçš„æ•°æ®åˆ†ææ˜¯ä¸€æ¡æµæ°´çº¿ï¼Œé‚£ä¹ˆ NumPy æ˜¯â€œåº•å±‚æ•°å­¦å¼•æ“â€ï¼ŒPandas æ˜¯â€œæ•°æ® ETL å·¥å…·â€ï¼Œè€Œ Scikit-learn åˆ™æ˜¯â€œæ™ºèƒ½åˆ†æå·¥å‚â€ã€‚
ä¸‹é¢æˆ‘ä»¬å°±ä»¥å·¥ç¨‹å®è·µä¸ºä¸»çº¿ï¼Œç³»ç»Ÿè®²è§£ä¸‰è€…å¦‚ä½•åœ¨æ•°æ®åˆ†æä¸ AI ä»»åŠ¡ä¸­åä½œã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€NumPyï¼šç§‘å­¦è®¡ç®—çš„åŸºçŸ³</strong></h2>
<p>NumPyï¼ˆNumerical Pythonï¼‰æ˜¯æ•´ä¸ªæ•°æ®åˆ†æç”Ÿæ€çš„åŸºç¡€ï¼Œå…¶æ ¸å¿ƒæ˜¯ï¼š</p>
<ul>
<li><strong>N ç»´æ•°ç»„ï¼ˆndarrayï¼‰</strong></li>
<li><strong>çŸ¢é‡åŒ–è¿ç®—</strong></li>
<li><strong>å¹¿æ’­æœºåˆ¶ï¼ˆbroadcastingï¼‰</strong></li>
<li><strong>é«˜æ€§èƒ½æ•°å­¦è¿ç®—</strong></li>
</ul>
<p>è¿™äº›æœºåˆ¶å…±åŒè®© Python åœ¨æ•°å€¼è®¡ç®—ä¸Šè·å¾—æ¥è¿‘ C çš„æ€§èƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-1"><strong>1. ndarrayï¼šæ¯” Python åˆ—è¡¨å¼ºå¤ªå¤š</strong></h3>
<p>å¦‚æœä½ ç”¨ Python åŸç”Ÿ list åšå¤§é‡æ•°å­¦è¿ç®—ï¼Œä¼šéå¸¸æ…¢ï¼›è€Œ NumPy é€šè¿‡å†…å­˜è¿ç»­å¸ƒå±€å®ç°é«˜æ•ˆå‘é‡æ“ä½œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

arr = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
<span class="hljs-built_in">print</span>(arr * <span class="hljs-number">3</span>)
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">3 6 9</span>]
</code></pre>
<p>è¿™ç§çŸ¢é‡åŒ–ç‰¹æ€§ä½¿æ•°æ®å¤„ç†æ›´ç®€å•ï¼Œä¹Ÿæ›´å¿«ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>2. å¹¿æ’­æœºåˆ¶ï¼šæ— éœ€å†™å¾ªç¯</strong></h3>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªå½¢çŠ¶ä¸º (3,3) çš„çŸ©é˜µåŠ ä¸Šä¸€ä¸ªæ ‡é‡ï¼š</p>
<pre><code class="hljs language-python" lang="python">a = np.ones((<span class="hljs-number">3</span>, <span class="hljs-number">3</span>))
b = <span class="hljs-number">5</span>
<span class="hljs-built_in">print</span>(a + b)
</code></pre>
<p>å¹¿æ’­æœºåˆ¶è‡ªåŠ¨æ‰©å±•ç»´åº¦ï¼Œæ— éœ€éå†ã€‚
è¿™æ˜¯æœºå™¨å­¦ä¹ ä¸­æ‰¹æ•°æ®è®¡ç®—ï¼ˆbatch operationï¼‰çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>3. å¸¸ç”¨æ“ä½œï¼šæ•°æ®åˆ†æä¸­çš„åŸºç¡€åŠ¨ä½œ</strong></h3>
<ul>
<li>æ•°å­¦è¿ç®—ï¼š<code>np.mean</code>, <code>np.std</code>, <code>np.dot</code>, <code>np.linalg</code></li>
<li>ç»Ÿè®¡è¿ç®—ï¼šå›å½’ã€åæ–¹å·®ã€ç›¸å…³ç³»æ•°</li>
<li>éšæœºç”Ÿæˆï¼š<code>np.random.rand</code>, <code>np.random.normal</code></li>
</ul>
<p>ä¾‹å¦‚ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼š</p>
<pre><code class="hljs language-python" lang="python">data = np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, (<span class="hljs-number">1000</span>,))
</code></pre>
<p>AI å’Œç»Ÿè®¡åˆ†æå¸¸é è¿™äº›æ“ä½œæ„é€ è®­ç»ƒæ•°æ®æˆ–åˆæ­¥ç†è§£åˆ†å¸ƒã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>äºŒã€Pandasï¼šç»“æ„åŒ–æ•°æ®åˆ†æçš„æ ¸å¿ƒå·¥å…·</strong></h2>
<p>å¦‚æœè¯´ NumPy å¤„ç†çš„æ˜¯â€œçŸ©é˜µâ€ï¼Œé‚£ä¹ˆ Pandas å¤„ç†çš„æ˜¯â€œè¡¨æ ¼â€ã€‚
å®ƒæœ€æ“…é•¿çš„æ˜¯ï¼š</p>
<ul>
<li>æ•°æ®æ¸…æ´—</li>
<li>æ•°æ®åˆå¹¶ã€æ‹†åˆ†</li>
<li>ç¼ºå¤±å€¼å¤„ç†</li>
<li>åˆ†ç»„ç»Ÿè®¡ï¼ˆgroupbyï¼‰</li>
<li>æ—¶é—´åºåˆ—åˆ†æ</li>
</ul>
<p>åœ¨å·¥ç¨‹ä¸­ï¼ŒPandas é€šå¸¸æ‰¿æ‹…ï¼š</p>
<blockquote>
<p>æ•°æ®è¾“å…¥ â†’ æ•°æ®æ¸…æ´— â†’ ç‰¹å¾å·¥ç¨‹ â†’ å¯¼å…¥æœºå™¨å­¦ä¹ æ¨¡å‹</p>
</blockquote>
<p>çš„å‰åŠéƒ¨åˆ†ã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>1. æ ¸å¿ƒæ•°æ®ç»“æ„ï¼šSeries / DataFrame</strong></h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

df = pd.DataFrame({
    <span class="hljs-string">'name'</span>: [<span class="hljs-string">'A'</span>, <span class="hljs-string">'B'</span>, <span class="hljs-string">'C'</span>],
    <span class="hljs-string">'score'</span>: [<span class="hljs-number">90</span>, <span class="hljs-number">85</span>, <span class="hljs-number">88</span>]
})
</code></pre>
<hr/>
<h3 data-id="heading-6"><strong>2. æ•°æ®æ¸…æ´—ï¼šå®é™…é¡¹ç›®ä¸­çš„é‡ç‚¹</strong></h3>
<p>å®é™…æ•°æ®å‡ ä¹éƒ½æ˜¯â€œè„æ•°æ®â€ï¼ŒPandas èƒ½è½»æ¾å¤„ç†ï¼š</p>
<h4 data-id="heading-7">ç¼ºå¤±å€¼ï¼š</h4>
<pre><code class="hljs language-python" lang="python">df.fillna(<span class="hljs-number">0</span>)
df.dropna()
</code></pre>
<h4 data-id="heading-8">ç±»å‹è½¬æ¢ï¼š</h4>
<pre><code class="hljs language-python" lang="python">df[<span class="hljs-string">'date'</span>] = pd.to_datetime(df[<span class="hljs-string">'date'</span>])
</code></pre>
<h4 data-id="heading-9">æ¡ä»¶è¿‡æ»¤ï¼š</h4>
<pre><code class="hljs language-python" lang="python">df[df[<span class="hljs-string">'score'</span>] &gt; <span class="hljs-number">80</span>]
</code></pre>
<h4 data-id="heading-10">åˆ†ç»„ç»Ÿè®¡ï¼š</h4>
<pre><code class="hljs language-python" lang="python">df.groupby(<span class="hljs-string">'class'</span>)[<span class="hljs-string">'score'</span>].mean()
</code></pre>
<p>è¿™äº›æ“ä½œåœ¨å•†ä¸šåˆ†æï¼ˆBIï¼‰å’Œæ¨¡å‹è®­ç»ƒä¸­éƒ½éå¸¸å¸¸è§ã€‚</p>
<hr/>
<h3 data-id="heading-11"><strong>3. ä¸ NumPy åä½œï¼šæ€§èƒ½æ›´å¼º</strong></h3>
<p>Pandas åŸºäº NumPyï¼Œå› æ­¤å¾ˆå¤šåº•å±‚æ“ä½œè¿˜æ˜¯ NumPy å®Œæˆï¼š</p>
<pre><code class="hljs language-python" lang="python">df[<span class="hljs-string">'score_z'</span>] = (df[<span class="hljs-string">'score'</span>] - df[<span class="hljs-string">'score'</span>].mean()) / df[<span class="hljs-string">'score'</span>].std()
</code></pre>
<p>è¿™ç§å†™æ³•å°±æ˜¯ NumPy é£æ ¼çš„å…¬å¼åœ¨ Pandas ä¸Šçš„åº”ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>ä¸‰ã€Scikit-learnï¼šå·¥ç¨‹åŒ–çš„æœºå™¨å­¦ä¹ æ¡†æ¶</strong></h2>
<p>Scikit-learnï¼ˆsklearnï¼‰æ˜¯ Python æœ€æˆç†Ÿçš„æœºå™¨å­¦ä¹ åº“ï¼Œå®ƒæä¾›äº†ï¼š</p>
<ul>
<li>åˆ†ç±» / å›å½’ / èšç±»</li>
<li>ç‰¹å¾å·¥ç¨‹</li>
<li>æ¨¡å‹é€‰æ‹©</li>
<li>æ•°æ®é›†æ‹†åˆ†</li>
<li>äº¤å‰éªŒè¯</li>
<li>è¶…å‚æ•°æœç´¢</li>
</ul>
<p>ç»“æ„æ¸…æ™°ã€æ˜“äºç”Ÿäº§ç¯å¢ƒåº”ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-13"><strong>1. æ ‡å‡†ä½¿ç”¨æµç¨‹ï¼šæœºå™¨å­¦ä¹ çš„æ ‡å‡†æ¨¡æ¿</strong></h2>
<p>å‡ ä¹æ‰€æœ‰ä»»åŠ¡éƒ½éµå¾ªç»Ÿä¸€ APIï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> RandomForestClassifier

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number">0.2</span>)

model = RandomForestClassifier()
model.fit(X_train, y_train)

<span class="hljs-built_in">print</span>(model.score(X_test, y_test))
</code></pre>
<p>è¿™å°±æ˜¯ sklearn çš„å¼ºå¤§ä¹‹å¤„ï¼š<strong>é«˜åº¦æ¨¡å—åŒ–ï¼Œç»Ÿä¸€æ¥å£é£æ ¼</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>2. ç‰¹å¾å·¥ç¨‹ï¼šæ¨¡å‹å‰çš„å…³é”®æ­¥éª¤</strong></h2>
<p>å¸¸è§æ“ä½œï¼š</p>
<h4 data-id="heading-15">æ ‡å‡†åŒ–ï¼š</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
</code></pre>
<h4 data-id="heading-16">one-hot ç¼–ç ï¼š</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> OneHotEncoder
</code></pre>
<h4 data-id="heading-17">ç‰¹å¾é€‰æ‹©ï¼š</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> SelectKBest
</code></pre>
<p>åœ¨å·¥ä¸šçº§æœºå™¨å­¦ä¹ é¡¹ç›®ä¸­ï¼Œç‰¹å¾å·¥ç¨‹å¾€å¾€æ¯”æ¨¡å‹æœ¬èº«æ›´å†³å®šæ€§èƒ½ã€‚</p>
<hr/>
<h2 data-id="heading-18"><strong>3. å¸¸ç”¨æ¨¡å‹ç¤ºä¾‹</strong></h2>
<h4 data-id="heading-19">åˆ†ç±»ï¼š</h4>
<ul>
<li>Logistic Regression</li>
<li>SVM</li>
<li>RandomForest</li>
<li>GradientBoosting</li>
<li>XGBoostï¼ˆç¬¬ä¸‰æ–¹ï¼Œä½†å¸¸æ­é…ä½¿ç”¨ï¼‰</li>
</ul>
<h4 data-id="heading-20">å›å½’ï¼š</h4>
<ul>
<li>Linear Regression</li>
<li>RandomForestRegressor</li>
<li>Lasso/Ridge</li>
</ul>
<h4 data-id="heading-21">èšç±»ï¼š</h4>
<ul>
<li>KMeans</li>
<li>DBSCAN</li>
</ul>
<hr/>
<h2 data-id="heading-22"><strong>å››ã€ä¸‰è€…å¦‚ä½•åä½œï¼šå®Œæ•´ AI æµæ°´çº¿ç¤ºä¾‹</strong></h2>
<p>ä¸‹é¢å±•ç¤ºä¸€ä¸ªâ€œçœŸå®å·¥ç¨‹â€çš„å…¸å‹å¤„ç†æµç¨‹ï¼š</p>
<hr/>
<h4 data-id="heading-23"><strong>Step 1. ç”¨ Pandas è¯»å–ä¸æ¸…æ´—æ•°æ®</strong></h4>
<pre><code class="hljs language-python" lang="python">df = pd.read_csv(<span class="hljs-string">"salary.csv"</span>)
df.dropna(inplace=<span class="hljs-literal">True</span>)
</code></pre>
<hr/>
<h4 data-id="heading-24"><strong>Step 2. æ•°å€¼å¤„ç†ä¸è½¬æ¢ï¼šå€ŸåŠ© NumPy</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

df[<span class="hljs-string">'age_norm'</span>] = (df[<span class="hljs-string">'age'</span>] - np.mean(df[<span class="hljs-string">'age'</span>])) / np.std(df[<span class="hljs-string">'age'</span>])
</code></pre>
<hr/>
<h4 data-id="heading-25"><strong>Step 3. æ„å»ºæœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆScikit-learnï¼‰</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression

X = df[[<span class="hljs-string">'age_norm'</span>, <span class="hljs-string">'experience'</span>]]
y = df[<span class="hljs-string">'salary'</span>]

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number">0.2</span>)

model = LinearRegression()
model.fit(X_train, y_train)

<span class="hljs-built_in">print</span>(model.score(X_test, y_test))
</code></pre>
<p>é€šè¿‡è¿™ä¸‰å¤§å·¥å…·ï¼Œä½ å°±å®Œæˆäº†ï¼š</p>
<ul>
<li>æ•°æ®å‡†å¤‡ï¼ˆPandasï¼‰</li>
<li>ç‰¹å¾å·¥ç¨‹ï¼ˆNumPy + Pandasï¼‰</li>
<li>æ¨¡å‹è®­ç»ƒï¼ˆsklearnï¼‰</li>
<li>æ¨¡å‹éªŒè¯ï¼ˆsklearnï¼‰</li>
</ul>
<p>è¿™ä¸ä¼ä¸šçº§ AI é¡¹ç›®çš„å®é™…ç»“æ„é«˜åº¦ä¸€è‡´ã€‚</p>
<hr/>
<h2 data-id="heading-26"><strong>äº”ã€èŒä¸šåŒ–è§†è§’ï¼šä½ åº”æŒæ¡å“ªäº›æŠ€èƒ½ï¼Ÿ</strong></h2>
<p><strong>ï¼ˆ1ï¼‰Pandas</strong>
âœ” æ•°æ®æ¸…æ´—ï¼ˆç¼ºå¤±å€¼ã€é‡å¤å€¼ã€å¼‚å¸¸å€¼ï¼‰
âœ” groupby èšåˆ
âœ” concat / merge
âœ” æ—¶é—´åºåˆ—å¤„ç†</p>
<p><strong>ï¼ˆ2ï¼‰NumPy</strong>
âœ” å¹¿æ’­æœºåˆ¶
âœ” ndarray æ“ä½œ
âœ” æ•°å­¦/ç»Ÿè®¡å‡½æ•°
âœ” éšæœºæ•°ç”Ÿæˆ</p>
<p><strong>ï¼ˆ3ï¼‰Scikit-learn</strong>
âœ” åˆ†ç±»/å›å½’/èšç±»æ¨¡å‹
âœ” ç‰¹å¾å·¥ç¨‹
âœ” æ¨¡å‹æ•ˆæœè¯„ä¼°ï¼ˆAUCã€Recallã€MSEï¼‰
âœ” è¶…å‚æ•°è°ƒä¼˜ï¼ˆGridSearchCVï¼‰</p>
<p>æŒæ¡è¿™ä¸‰è€…ï¼Œä½ åŸºæœ¬å¯ä»¥èƒœä»»ï¼š</p>
<ul>
<li>æ•°æ®åˆ†æå¸ˆ</li>
<li>AI å·¥ç¨‹å¸ˆ</li>
<li>æœºå™¨å­¦ä¹ ç®—æ³•å·¥ç¨‹å¸ˆï¼ˆåˆçº§ï¼‰</li>
<li>Python æ•°æ®æ–¹å‘å¼€å‘å·¥ç¨‹å¸ˆ</li>
</ul>
<hr/>
<h2 data-id="heading-27"><strong>å…­ã€æ€»ç»“</strong></h2>
<p>æ•°æ®åˆ†æä¸ AI æ˜¯ Python çš„â€œé»„é‡‘åœ°å¸¦â€ï¼Œè€Œ Pandasã€NumPyã€Scikit-learn æ˜¯è¿™ä¸€é¢†åŸŸçš„ä¸‰å¤§åŸºçŸ³ï¼š</p>
<ul>
<li><strong>NumPy</strong> æä¾›é«˜æ€§èƒ½è®¡ç®—åº•åº§</li>
<li><strong>Pandas</strong> è´Ÿè´£æ•°æ®å¤„ç†ä¸åˆ†æ</li>
<li><strong>Scikit-learn</strong> è´Ÿè´£å»ºæ¨¡ä¸é¢„æµ‹</li>
</ul>
<p>æŒæ¡å®ƒä»¬ï¼Œä½ å°±æ‹¥æœ‰äº†æ„å»ºæ•°æ®é©±åŠ¨åº”ç”¨çš„å®Œæ•´èƒ½åŠ›ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterç»„ä»¶å°è£…ï¼šæ ‡ç­¾æ‹–æ‹½æ’åº NDragSortWrap]]></title>    <link>https://juejin.cn/post/7575015480199151668</link>    <guid>https://juejin.cn/post/7575015480199151668</guid>    <pubDate>2025-11-22T04:53:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575015480199151668" data-draft-id="7574978545145380899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterç»„ä»¶å°è£…ï¼šæ ‡ç­¾æ‹–æ‹½æ’åº NDragSortWrap"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter"/> <meta itemprop="datePublished" content="2025-11-22T04:53:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SoaringHeart"/> <meta itemprop="url" content="https://juejin.cn/user/3544481219481374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterç»„ä»¶å°è£…ï¼šæ ‡ç­¾æ‹–æ‹½æ’åº NDragSortWrap
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3544481219481374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SoaringHeart
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T04:53:08.000Z" title="Sat Nov 22 2025 04:53:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€éœ€æ±‚æ¥æº</h2>
<p>æœ€è¿‘éœ€è¦å®ç°ä¸€ä¸ªå¯æ‹–æ‹½æ ‡ç­¾éœ€æ±‚ï¼Œå®ç°ä¹‹åé¡ºæ‰‹å°è£…ä¸€ä¸‹ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9a5e152bcf74089a46c263e1bc2d234~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU29hcmluZ0hlYXJ0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764391988&amp;x-signature=OR8guS7r0Id9wGnEF3JQ%2Bb8Vt10%3D" alt="Simulator Screenshot - iPhone 16 - 2025-11-22 at 12.44.53.png" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€ä½¿ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">//</span>
<span class="hljs-comment">//  DraggableDemo.dart</span>
<span class="hljs-comment">//  flutter_templet_project</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//  Created by shang on 6/2/21 5:37 PM.</span>
<span class="hljs-comment">//  Copyright Â© 6/2/21 shang. All rights reserved.</span>
<span class="hljs-comment">//</span>

<span class="hljs-selector-tag">import</span> '<span class="hljs-selector-tag">package</span>:<span class="hljs-selector-tag">flutter</span>/<span class="hljs-selector-tag">material</span><span class="hljs-selector-class">.dart</span>';
<span class="hljs-selector-tag">import</span> '<span class="hljs-selector-tag">package</span>:<span class="hljs-selector-tag">flutter_templet_project</span>/<span class="hljs-selector-tag">basicWidget</span>/<span class="hljs-selector-tag">n_drag_sort_wrap</span><span class="hljs-selector-class">.dart</span>';
<span class="hljs-selector-tag">import</span> '<span class="hljs-selector-tag">package</span>:<span class="hljs-selector-tag">flutter_templet_project</span>/<span class="hljs-selector-tag">extension</span>/<span class="hljs-selector-tag">extension_local</span><span class="hljs-selector-class">.dart</span>';

<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">DraggableDemo</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">StatefulWidget</span> {
  <span class="hljs-selector-tag">final</span> <span class="hljs-selector-tag">String</span>? <span class="hljs-selector-tag">title</span>;

  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">DraggableDemo</span>({<span class="hljs-selector-tag">Key</span>? <span class="hljs-selector-tag">key</span>, <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.title</span>}) : <span class="hljs-selector-tag">super</span>(<span class="hljs-attribute">key</span>: key);

  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">_DraggableDemoState</span> <span class="hljs-selector-tag">createState</span>() =&gt; <span class="hljs-selector-tag">_DraggableDemoState</span>();
}

<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">_DraggableDemoState</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">State</span>&lt;<span class="hljs-selector-tag">DraggableDemo</span>&gt; <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">TickerProviderStateMixin</span> {
  <span class="hljs-selector-tag">final</span> <span class="hljs-selector-tag">scrollController</span> = <span class="hljs-selector-tag">ScrollController</span>();


  <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">String</span>&gt; <span class="hljs-selector-tag">tags</span> = <span class="hljs-selector-tag">List</span><span class="hljs-selector-class">.generate</span>(<span class="hljs-number">20</span>, (i) =&gt; <span class="hljs-string">"æ ‡ç­¾$i"</span>);
  <span class="hljs-selector-tag">late</span> <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">String</span>&gt; <span class="hljs-selector-tag">others</span> = <span class="hljs-selector-tag">List</span><span class="hljs-selector-class">.generate</span>(<span class="hljs-number">10</span>, (i) =&gt; <span class="hljs-string">"å…¶ä»–${i + tags.length}"</span>);

  <span class="hljs-selector-tag">late</span> <span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">tabController</span> = <span class="hljs-selector-tag">TabController</span>(<span class="hljs-attribute">length</span>: tags.length, <span class="hljs-attribute">vsync</span>: this);

  <span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">canEdit</span> = <span class="hljs-selector-tag">true</span>;

  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Scaffold</span>(
      <span class="hljs-attribute">appBar</span>: <span class="hljs-built_in">AppBar</span>(
        <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(widget.title ?? <span class="hljs-string">"$widget"</span>),
      ),
      <span class="hljs-attribute">body</span>: <span class="hljs-built_in">buildBody</span>(),
    );
  }

  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">buildBody</span>() {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Scrollbar</span>(
      <span class="hljs-attribute">controller</span>: scrollController,
      <span class="hljs-attribute">child</span>: <span class="hljs-built_in">SingleChildScrollView</span>(
        <span class="hljs-attribute">controller</span>: scrollController,
        <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Column</span>(
          <span class="hljs-attribute">mainAxisSize</span>: MainAxisSize.min,
          <span class="hljs-attribute">crossAxisAlignment</span>: CrossAxisAlignment.stretch,
          <span class="hljs-attribute">children</span>: [
            <span class="hljs-built_in">buildDragSortWrap</span>(),
          ],
        ),
      ),
    );
  }

  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">buildDragSortWrap</span>() {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">StatefulBuilder</span>(
      <span class="hljs-attribute">builder</span>: (BuildContext context, StateSetter setState) {
        <span class="hljs-selector-tag">tabController</span> = <span class="hljs-selector-tag">TabController</span>(<span class="hljs-attribute">length</span>: tags.length, <span class="hljs-attribute">vsync</span>: this);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Column</span>(
          <span class="hljs-attribute">crossAxisAlignment</span>: CrossAxisAlignment.start,
          <span class="hljs-attribute">children</span>: [
            <span class="hljs-built_in">Material</span>(
              <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Row</span>(
                <span class="hljs-attribute">children</span>: [
                  <span class="hljs-built_in">Expanded</span>(
                    <span class="hljs-attribute">child</span>: <span class="hljs-built_in">TabBar</span>(
                      <span class="hljs-attribute">controller</span>: tabController,
                      <span class="hljs-attribute">isScrollable</span>: true,
                      <span class="hljs-attribute">tabs</span>: tags.<span class="hljs-built_in">map</span>((e) =&gt; <span class="hljs-built_in">Tab</span>(<span class="hljs-attribute">text</span>: e)).<span class="hljs-built_in">toList</span>(),
                      <span class="hljs-attribute">labelColor</span>: Colors.black87,
                      <span class="hljs-attribute">unselectedLabelColor</span>: Colors.black38,
                      <span class="hljs-attribute">indicatorColor</span>: Colors.red,
                      <span class="hljs-attribute">indicatorSize</span>: TabBarIndicatorSize.label,
                      <span class="hljs-attribute">indicatorPadding</span>: EdgeInsets.<span class="hljs-built_in">symmetric</span>(<span class="hljs-attribute">horizontal</span>: <span class="hljs-number">16</span>),
                    ),
                  ),
                  <span class="hljs-built_in">GestureDetector</span>(
                    <span class="hljs-attribute">onTap</span>: () {
                      DLog.<span class="hljs-built_in">d</span>(<span class="hljs-string">"more"</span>);
                    },
                    <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(
                      <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">symmetric</span>(<span class="hljs-attribute">horizontal</span>: <span class="hljs-number">8</span>, <span class="hljs-attribute">vertical</span>: <span class="hljs-number">4</span>),
                      <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Icon</span>(Icons.keyboard_arrow_down),
                    ),
                  )
                ],
              ),
            ),
            <span class="hljs-built_in">buildTagBar</span>(
              <span class="hljs-attribute">onEdit</span>: () {
                canEdit = !canEdit;
                <span class="hljs-built_in">setState</span>(() {});
              },
            ),
            NDragSortWrap&lt;String&gt;(
              <span class="hljs-attribute">spacing</span>: <span class="hljs-number">12</span>,
              <span class="hljs-attribute">runSpacing</span>: <span class="hljs-number">8</span>,
              <span class="hljs-attribute">items</span>: tags,
              <span class="hljs-attribute">itemBuilder</span>: (context, item, isDragging) {
                return <span class="hljs-built_in">buildItem</span>(
                  <span class="hljs-attribute">isDragging</span>: isDragging,
                  <span class="hljs-attribute">item</span>: item,
                  <span class="hljs-attribute">isTopRightVisible</span>: canEdit,
                  <span class="hljs-attribute">topRight</span>: <span class="hljs-built_in">GestureDetector</span>(
                    <span class="hljs-attribute">onTap</span>: () {
                      DLog.<span class="hljs-built_in">d</span>(item);
                      tags.<span class="hljs-built_in">remove</span>(item);
                      <span class="hljs-built_in">setState</span>(() {});
                    },
                    <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Icon</span>(Icons.remove, <span class="hljs-attribute">size</span>: <span class="hljs-number">14</span>, <span class="hljs-attribute">color</span>: Colors.white),
                  ),
                );
              },
              <span class="hljs-attribute">onChanged</span>: (newList) {
                tags = newList;
                <span class="hljs-built_in">setState</span>(() {});
              },
            ),
            <span class="hljs-built_in">Divider</span>(<span class="hljs-attribute">height</span>: <span class="hljs-number">16</span>),
            <span class="hljs-built_in">Wrap</span>(
              <span class="hljs-attribute">spacing</span>: <span class="hljs-number">12</span>,
              <span class="hljs-attribute">runSpacing</span>: <span class="hljs-number">8</span>,
              <span class="hljs-attribute">children</span>: [
                ...others.<span class="hljs-built_in">map</span>(
                  (item) {
                    return <span class="hljs-built_in">buildItem</span>(
                      <span class="hljs-attribute">isDragging</span>: false,
                      <span class="hljs-attribute">item</span>: item,
                      <span class="hljs-attribute">isTopRightVisible</span>: canEdit,
                      <span class="hljs-attribute">topRight</span>: <span class="hljs-built_in">GestureDetector</span>(
                        <span class="hljs-attribute">onTap</span>: () {
                          DLog.<span class="hljs-built_in">d</span>(item);
                          others.<span class="hljs-built_in">remove</span>(item);
                          tags.<span class="hljs-built_in">add</span>(item);
                          <span class="hljs-built_in">setState</span>(() {});
                        },
                        <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Icon</span>(Icons.add, <span class="hljs-attribute">size</span>: <span class="hljs-number">14</span>, <span class="hljs-attribute">color</span>: Colors.white),
                      ),
                    );
                  },
                ),
              ],
            )
          ],
        );
      },
    );
  }

  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">buildItem</span>({
    <span class="hljs-selector-tag">required</span> <span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">isDragging</span>,
    <span class="hljs-selector-tag">required</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">item</span>,
    <span class="hljs-selector-tag">bool</span> <span class="hljs-selector-tag">isTopRightVisible</span> = <span class="hljs-selector-tag">true</span>,
    <span class="hljs-selector-tag">required</span> <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">topRight</span>,
  }) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Badge</span>(
      <span class="hljs-attribute">backgroundColor</span>: Colors.red,
      <span class="hljs-attribute">textColor</span>: Colors.white,
      <span class="hljs-attribute">offset</span>: <span class="hljs-built_in">Offset</span>(<span class="hljs-number">4</span>, -<span class="hljs-number">4</span>),
      <span class="hljs-attribute">isLabelVisible</span>: isTopRightVisible,
      <span class="hljs-attribute">label</span>: topRight,
      <span class="hljs-attribute">child</span>: <span class="hljs-built_in">AnimatedContainer</span>(
        <span class="hljs-attribute">duration</span>: <span class="hljs-built_in">Duration</span>(<span class="hljs-attribute">milliseconds</span>: <span class="hljs-number">150</span>),
        <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">symmetric</span>(<span class="hljs-attribute">horizontal</span>: <span class="hljs-number">12</span>, <span class="hljs-attribute">vertical</span>: <span class="hljs-number">8</span>),
        <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">BoxDecoration</span>(
          <span class="hljs-attribute">color</span>: isDragging ? Colors.green.<span class="hljs-built_in">withOpacity</span>(<span class="hljs-number">0.6</span>) : Colors.green,
          <span class="hljs-attribute">borderRadius</span>: BorderRadius.<span class="hljs-built_in">circular</span>(<span class="hljs-number">8</span>),
        ),
        <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(
          item,
          <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(<span class="hljs-attribute">color</span>: Colors.white),
        ),
      ),
    );
  }

  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">buildTagBar</span>({<span class="hljs-selector-tag">required</span> <span class="hljs-selector-tag">VoidCallback</span> <span class="hljs-selector-tag">onEdit</span>}) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Container</span>(
      <span class="hljs-attribute">width</span>: double.infinity,
      <span class="hljs-attribute">padding</span>: const EdgeInsets.<span class="hljs-built_in">symmetric</span>(<span class="hljs-attribute">horizontal</span>: <span class="hljs-number">15</span>, <span class="hljs-attribute">vertical</span>: <span class="hljs-number">10</span>),
      <span class="hljs-attribute">clipBehavior</span>: Clip.antiAlias,
      <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">BoxDecoration</span>(),
      <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Row</span>(
        <span class="hljs-attribute">mainAxisSize</span>: MainAxisSize.min,
        <span class="hljs-attribute">mainAxisAlignment</span>: MainAxisAlignment.spaceBetween,
        <span class="hljs-attribute">crossAxisAlignment</span>: CrossAxisAlignment.start,
        <span class="hljs-attribute">children</span>: [
          <span class="hljs-built_in">Container</span>(
            <span class="hljs-attribute">clipBehavior</span>: Clip.antiAlias,
            <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">BoxDecoration</span>(),
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Row</span>(
              <span class="hljs-attribute">mainAxisSize</span>: MainAxisSize.min,
              <span class="hljs-attribute">mainAxisAlignment</span>: MainAxisAlignment.start,
              <span class="hljs-attribute">crossAxisAlignment</span>: CrossAxisAlignment.start,
              <span class="hljs-attribute">children</span>: [
                <span class="hljs-built_in">Text</span>(
                  <span class="hljs-string">'æˆ‘çš„é¢‘é“'</span>,
                  <span class="hljs-attribute">textAlign</span>: TextAlign.center,
                  <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(
                    <span class="hljs-attribute">color</span>: const <span class="hljs-built_in">Color</span>(<span class="hljs-number">0</span>xFF303034),
                    <span class="hljs-attribute">fontSize</span>: <span class="hljs-number">15</span>,
                    <span class="hljs-attribute">fontWeight</span>: FontWeight.w600,
                  ),
                ),
                <span class="hljs-built_in">Text</span>(
                  <span class="hljs-string">' (ç‚¹å‡»ç¼–è¾‘å¯æ’åº)'</span>,
                  <span class="hljs-attribute">textAlign</span>: TextAlign.center,
                  <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(
                    <span class="hljs-attribute">color</span>: const <span class="hljs-built_in">Color</span>(<span class="hljs-number">0</span>xFF7C7C85),
                    <span class="hljs-attribute">fontSize</span>: <span class="hljs-number">12</span>,
                  ),
                ),
              ],
            ),
          ),
          <span class="hljs-built_in">GestureDetector</span>(
            <span class="hljs-attribute">onTap</span>: onEdit,
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(
              <span class="hljs-string">'ç¼–è¾‘'</span>,
              <span class="hljs-attribute">textAlign</span>: TextAlign.center,
              <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(
                <span class="hljs-attribute">color</span>: const <span class="hljs-built_in">Color</span>(<span class="hljs-number">0</span>xFF303034),
                <span class="hljs-attribute">fontSize</span>: <span class="hljs-number">14</span>,
              ),
            ),
          ),
        ],
      ),
    );
  }
}
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€æºç </h2>
<p>ç»„ä»¶ NDragSortWrap</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:flutter/material.dart';
<span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:flutter_templet_project/extension/extension_local.dart';

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NDragSortWrap&lt;T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Object&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  const <span class="hljs-type">NDragSortWrap</span>({
    <span class="hljs-keyword">super</span>.key,
    required <span class="hljs-keyword">this</span>.items,
    required <span class="hljs-keyword">this</span>.itemBuilder,
    <span class="hljs-keyword">this</span>.onChanged,
    <span class="hljs-keyword">this</span>.spacing = <span class="hljs-number">8</span>,
    <span class="hljs-keyword">this</span>.runSpacing = <span class="hljs-number">8</span>,
  });

  <span class="hljs-keyword">final</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt; items;
  <span class="hljs-keyword">final</span> <span class="hljs-type">Widget</span> <span class="hljs-type">Function</span>(<span class="hljs-type">BuildContext</span> context, <span class="hljs-type">T</span> item, bool isDragging) itemBuilder;
  <span class="hljs-keyword">final</span> void <span class="hljs-type">Function</span>(<span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt; newList)? onChanged;
  <span class="hljs-keyword">final</span> double spacing;
  <span class="hljs-keyword">final</span> double runSpacing;

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">State</span>&lt;<span class="hljs-type">NDragSortWrap</span>&lt;<span class="hljs-type">T</span>&gt;&gt; createState() =&gt; _NDragSortWrapState&lt;<span class="hljs-type">T</span>&gt;();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_NDragSortWrapState&lt;T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Object&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State&lt;NDragSortWrap&lt;T&gt;&gt;</span> </span>{
  late <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt; _list;

  <span class="hljs-meta">@override</span>
  void initState() {
    <span class="hljs-keyword">super</span>.initState();
    _list = <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt;.from(widget.items);
  }

  <span class="hljs-meta">@override</span>
  void didUpdateWidget(covariant <span class="hljs-type">NDragSortWrap</span>&lt;<span class="hljs-type">T</span>&gt; oldWidget) {
    <span class="hljs-keyword">super</span>.didUpdateWidget(oldWidget);
    _list = <span class="hljs-type">List</span>&lt;<span class="hljs-type">T</span>&gt;.from(widget.items);
    setState(() {});
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> <span class="hljs-type">Wrap</span>(
      spacing: widget.spacing,
      runSpacing: widget.runSpacing,
      children: [
        <span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; _list.length; i++) _buildDraggableItem(context, i),
      ],
    );
  }

  <span class="hljs-type">Widget</span> _buildDraggableItem(<span class="hljs-type">BuildContext</span> context, int index) {
    <span class="hljs-keyword">final</span> item = _list[index];

    <span class="hljs-keyword">return</span> <span class="hljs-type">LongPressDraggable</span>&lt;<span class="hljs-type">T</span>&gt;(
      data: item,
      feedback: <span class="hljs-type">Material</span>(
        color: <span class="hljs-type">Colors</span>.<span class="hljs-keyword">transparent</span>,
        child: widget.itemBuilder(context, item, <span class="hljs-literal">true</span>),
      ),
      childWhenDragging: <span class="hljs-type">Opacity</span>(
        opacity: <span class="hljs-number">0.3</span>,
        child: widget.itemBuilder(context, item, <span class="hljs-literal">false</span>),
      ),
      onDragCompleted: () {},
      onDraggableCanceled: (_, __) {},
      child: <span class="hljs-type">DragTarget</span>&lt;<span class="hljs-type">T</span>&gt;(
        onAcceptWithDetails: (details) {
          <span class="hljs-keyword">final</span> draggedItem = details.data;
          <span class="hljs-keyword">final</span> oldIndex = _list.indexOf(draggedItem);
          <span class="hljs-keyword">final</span> newIndex = index;

          <span class="hljs-keyword">final</span> item = _list.removeAt(oldIndex);
          _list.insert(newIndex, item);
          setState(() {});

          widget.onChanged?.call(_list);
        },
        builder: (context, _, __) {
          <span class="hljs-keyword">return</span> widget.itemBuilder(context, item, <span class="hljs-literal">false</span>);
        },
      ),
    );
  }
}
</code></pre>
<h2 data-id="heading-3">æœ€åã€æ€»ç»“</h2>
<p>å®ç°èµ·æ¥å¹¶ä¸å¤æ‚ï¼Œå°±æ˜¯ä¾èµ–å®˜æ–¹ç»„ä»¶ LongPressDraggable æä¾›çš„å„ç§çŠ¶æ€åšæ•°æ®å¤„ç†ï¼Œç„¶ååˆ·æ–°é¡µé¢å³å¯ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshang1219178163%2Fflutter_templet_project%2Fblob%2Fdevelop%2Flib%2Fpages%2Fdemo%2FDraggableDemo.dart" target="_blank" title="https://github.com/shang1219178163/flutter_templet_project/blob/develop/lib/pages/demo/DraggableDemo.dart" ref="nofollow noopener noreferrer">github</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿½èµ¶ä¸€è¶ŸMinimax M2é™æ—¶å…è´¹æœ«ç­è½¦]]></title>    <link>https://juejin.cn/post/7575065455074639907</link>    <guid>https://juejin.cn/post/7575065455074639907</guid>    <pubDate>2025-11-22T04:59:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575065455074639907" data-draft-id="7569152683422482467" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿½èµ¶ä¸€è¶ŸMinimax M2é™æ—¶å…è´¹æœ«ç­è½¦"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-22T04:59:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æºªå½¼å²¸"/> <meta itemprop="url" content="https://juejin.cn/user/976781670357400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿½èµ¶ä¸€è¶ŸMinimax M2é™æ—¶å…è´¹æœ«ç­è½¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976781670357400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æºªå½¼å²¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T04:59:00.000Z" title="Sat Nov 22 2025 04:59:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>MiniMax å‘å¸ƒM2æ¨¡å‹å·²æœ‰ä¸€äº›å¤©äº†ï¼Œä¸€ç›´æ²¡æœ‰æ—¶é—´ä½“éªŒï¼Œä»Šå¤©æ‰“å¼€MiniMaxå®˜ç½‘çœ‹åˆ°æˆªæ­¢ 2025å¹´11æœˆ7æ—¥ ä¸Šåˆ 08:00 å®˜æ–¹å°±åœæ­¢Minimax M2 APIè°ƒç”¨çš„é™å…æ´»åŠ¨äº†ï¼Œè¿˜å¥½è¿˜æœ‰æ—¶é—´èƒ½èµ¶ä¸Šä¸€è¶Ÿæœ«ç­è½¦ã€‚ä¹‹å‰ä¹Ÿä½¿ç”¨è¿‡MiniMaxçš„MCPå’Œè¯­éŸ³æœåŠ¡ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥çœ‹å¾€æœŸå†…å®¹ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247490817%26idx%3D1%26sn%3D18f438cc02b6c0dcad5632a21f3a4d45%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247490817&amp;idx=1&amp;sn=18f438cc02b6c0dcad5632a21f3a4d45&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ã€Cursorå®æˆ˜ã€‘Cursor+MiniMax MCPèµ‹èƒ½æ–‡ç« é˜…è¯»</a></li>
</ul>
<h2 data-id="heading-1">ä¼˜åŠ¿</h2>
<ul>
<li>æˆªæ­¢ 2025å¹´11æœˆ7æ—¥ ä¸Šåˆ 08:00 ä¹‹å‰é™æ—¶å…è´¹</li>
<li>å…¼å®¹ OpenAI å’Œ Anthropic æ¥å£åè®®ï¼Œå¯æ¥å…¥ CC æˆ– Codex CLIç­‰å·¥å…·ä½¿ç”¨</li>
<li>APIæˆæœ¬ä»…ä¸ºAnthropic Claude Sonnet 4.5çš„8%ï¼Œæ¨ç†é€Ÿåº¦ä¸ºå…¶2å€</li>
<li>æœ€å¤§token 0.2M</li>
</ul>
<h2 data-id="heading-2">é™åˆ¶</h2>
<ul>
<li>M2ä¸ºæ–‡æœ¬æ¨¡å‹ï¼Œéå¤šæ¨¡æ€æ¨¡å‹</li>
<li>ç›®å‰è°ƒç”¨çš„äººå¤šï¼Œæœ‰æ—¶ä¼šæœ‰äº›æ…¢</li>
</ul>
<h2 data-id="heading-3">ç®€ä»‹</h2>
<p>MiniMax M2æ˜¯ä¸€æ¬¾äººå·¥æ™ºèƒ½å¤§æ¨¡å‹ï¼Œä¸“ä¸ºAgentï¼ˆæ™ºèƒ½ä½“ï¼‰å’Œä»£ç ç¼–ç¨‹ä»»åŠ¡æ‰“é€ ï¼Œå…·æœ‰é¡¶çº§ä»£ç èƒ½åŠ›å’Œå¼ºå¤§çš„Agenticè¡¨ç°ï¼Œæ˜¯ä»£ç å¼€å‘å’Œå·¥å…·è‡ªåŠ¨åŒ–é¢†åŸŸçš„é‡è¦åˆ›æ–°ã€‚</p>
<p>å®˜ç½‘å›½é™…ç‰ˆåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.minimax.io" target="_blank" title="https://www.minimax.io" ref="nofollow noopener noreferrer">www.minimax.io</a></p>
<p>å®˜ç½‘å›½å†…ç‰ˆåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.minimaxi.com" target="_blank" title="https://www.minimaxi.com" ref="nofollow noopener noreferrer">www.minimaxi.com</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d81ffaa8d2442faa22116ced5bb50b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=CS%2BHL6GDmBTUNDndvnNsA7WRg0s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆªæ­¢åˆ° 2025å¹´11æœˆ7æ—¥ ä¸Šåˆ 08:00 è¿˜èƒ½èµ¶ä¸Šä¸€è¶Ÿæœ«ç­è½¦</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/438c9a9fc1114b4a86c5a5b9150b0d66~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=U%2FR%2FwpE3oSxLk%2Bc%2FHHO76zToDOA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å…¨çƒæƒå¨çš„æ¨¡å‹è¯„æµ‹æ¦œå•Artificial Analysisé‡Œï¼ŒMiniMax-M2æ’åå…¨çƒå‰äº”ï¼Œå¼€æºæ¨¡å‹é‡Œæ’åç¬¬ä¸€ã€‚</p>
<p>Artificial Analysiså®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fartificialanalysis.ai%2Fmodels%2Fgpt-5%3Fintelligence%3Dartificial-analysis-intelligence-index" target="_blank" title="https://artificialanalysis.ai/models/gpt-5?intelligence=artificial-analysis-intelligence-index" ref="nofollow noopener noreferrer">artificialanalysis.ai/models/gpt-â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5dd0579f6bb4ac9925be9be7eb5d717~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=qPElCCGnhUJ2o52PkFBQ0PDq7jo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMiniMax-AI%2FMiniMax-M2" target="_blank" title="https://github.com/MiniMax-AI/MiniMax-M2" ref="nofollow noopener noreferrer">github.com/MiniMax-AI/â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d43d609d82d5462989cec887d6594d65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=OsY1qZoQoh33R0SwlJRXsN%2FWMf8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-4">æ¨¡å‹ç‰¹ç‚¹</h2>
<ul>
<li>å¤æ‚ç¼–ç¨‹ï¼šæ“…é•¿å¤„ç†å¤æ‚å¼€å‘å·¥ä½œï¼ŒåŒ…æ‹¬å¤šæ–‡ä»¶ç¼–è¾‘å’ŒåŸºäºæµ‹è¯•çš„ä¿®å¤ã€‚</li>
<li>Agenticèƒ½åŠ›ï¼šå‡ºè‰²åœ°è§„åˆ’å¹¶æ‰§è¡Œå¤æ‚å·¥å…·é“¾ï¼ŒååŒè°ƒç”¨å¤šç§å·¥å…·ã€‚</li>
<li>æ›´é«˜æ•ˆï¼šæä¾›æ›´ä½å»¶è¿Ÿå’Œæ›´é«˜ååé‡ï¼Œå¸¦æ¥æ›´çµæ•çš„Agentä½“éªŒã€‚</li>
</ul>
<h2 data-id="heading-5">ç”³è¯·API Key</h2>
<p>å›½é™…ç‰ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.minimax.io%2Fuser-center%2Fbasic-information%2Finterface-key" target="_blank" title="https://platform.minimax.io/user-center/basic-information/interface-key" ref="nofollow noopener noreferrer">platform.minimax.io/user-centerâ€¦</a></p>
<p>å›½å†…ç‰ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.minimaxi.com%2Fuser-center%2Fbasic-information%2Finterface-key" target="_blank" title="https://platform.minimaxi.com/user-center/basic-information/interface-key" ref="nofollow noopener noreferrer">platform.minimaxi.com/user-centerâ€¦</a></p>
<p>è¿›å…¥MiniMaxåå°ç®¡ç†ç³»ç»Ÿï¼Œå·¦ä¾§é€‰æ‹©ã€API Keysã€‘æ‰“å¼€API Keysåˆ—è¡¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abc21d0229ad44e4817fa0299a853f19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=z2ZUb2sYYzmQJnLvBtivuhsdgtw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»ã€Create new secret Keyã€‘åˆ›å»ºä¸€ä¸ªæ–°çš„API</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d4d5b727c684b659b49e82f84ae8f07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=zvmvy1rb6jgYCoPtnj9ntS0WhLw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ›å»ºå®Œæˆåå¤åˆ¶API Keyä¿å­˜ï¼Œè¯·å¦¥å–„ä¿å­˜API Keyåªä¼šå±•ç¤ºä¸€æ¬¡ï¼Œåç»­å°†æ— æ³•æŸ¥çœ‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5889916346b64cedb7d4cc58a367e35c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=N46vPIFzBFNMt77qe4MbYOUDBP0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-6">åŸºæœ¬ä½¿ç”¨</h2>
<h3 data-id="heading-7">æ¥å…¥Claude Code CLI</h3>
<blockquote>
<p>æ³¨æ„ï¼šè¿™é‡Œæ˜¯ä»¥å›½é™…ç‰ˆè¿›è¡Œçš„é…ç½®</p>
</blockquote>
<p>å®˜æ–¹æä¾›äº†å„å¤§AIç¼–ç¨‹å·¥å…·çš„æ¥å…¥æ–¹å¼</p>
<p>å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.minimaxi.com%2Fdocs%2Fguides%2Ftext-ai-coding-tools" target="_blank" title="https://platform.minimaxi.com/docs/guides/text-ai-coding-tools" ref="nofollow noopener noreferrer">platform.minimaxi.com/docs/guidesâ€¦</a></p>
<p>è¿™é‡Œä»¥macOSä¸ºä¾‹ï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯å¯¼å‡ºç¯å¢ƒå˜é‡</p>
<pre><code class="hljs language-ini" lang="ini">exportÂ <span class="hljs-attr">ANTHROPIC_BASE_URL</span>=<span class="hljs-string">"https://api.minimax.io/anthropic"</span>Â 
exportÂ <span class="hljs-attr">ANTHROPIC_AUTH_TOKEN</span>=<span class="hljs-string">"your-api-key"</span>Â 
exportÂ <span class="hljs-attr">ANTHROPIC_SMALL_FAST_MODEL</span>=<span class="hljs-string">"MiniMax-M2"</span>
exportÂ <span class="hljs-attr">ANTHROPIC_DEFAULT_SONNET_MODEL</span>=<span class="hljs-string">"MiniMax-M2"</span>
exportÂ <span class="hljs-attr">ANTHROPIC_DEFAULT_OPUS_MODEL</span>=<span class="hljs-string">"MiniMax-M2"</span>
exportÂ <span class="hljs-attr">ANTHROPIC_DEFAULT_HAIKU_MODEL</span>=<span class="hljs-string">"MiniMax-M2"</span>
</code></pre>
<p>ä¹Ÿå¯ä»¥åœ¨é¡¹ç›® .claude/settings.json æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/516eb25a184e45ccab79b5b54e82ac30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=QJh%2BinqMeB89sGqB%2FV8%2BIZ1jFRs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¿å­˜é…ç½®æ–‡ä»¶ï¼Œé‡å¯Claude Code CLIï¼Œçœ‹åˆ°å¦‚ä¸‹æç¤ºå°±å·²ç»é…ç½®å¥½MiniMax-M2æ¨¡å‹äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cff09ea09d2541888ca7fb5ff36f515f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=bV5tK2pHogtVtg9YdwS6AIWA7Os%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ä»»æ„æç¤ºè¯å³å¯æ­£å¸¸å¯¹è¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c041ae70c214398bb72b89c8615e124~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=WEVkEixpgyQGZvFa3p0P9M9cJuY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-8">æ¥å…¥Codex CLI</h3>
<blockquote>
<p>æ³¨æ„ï¼šè¿™é‡Œæ˜¯ä»¥å›½é™…ç‰ˆè¿›è¡Œçš„é…ç½®</p>
</blockquote>
<p>MiniMax M2æ”¯æŒæ¥å…¥Codex CLIï¼Œç›´æ¥ä¿®æ”¹Codex CLIå…¨å±€é…ç½® ~/.codex/config.tomlï¼Œæ–°å¢é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">profile</span>Â =Â <span class="hljs-string">"m2"</span>
<span class="hljs-section">[profiles.m2]</span>
<span class="hljs-attr">model</span>Â =Â <span class="hljs-string">"codex-MiniMax-M2"</span>
<span class="hljs-attr">model_provider</span>Â =Â <span class="hljs-string">"minimax"</span>
<span class="hljs-section">[model_providers.minimax]</span>
<span class="hljs-attr">name</span>Â =Â <span class="hljs-string">"MiniMax Chat Completions API"</span>
<span class="hljs-attr">base_url</span>Â =Â <span class="hljs-string">"https://api.minimax.io/v1"</span>
<span class="hljs-attr">env_key</span>Â =Â <span class="hljs-string">"MINIMAX_API_KEY"</span>
<span class="hljs-attr">wire_api</span>Â =Â <span class="hljs-string">"chat"</span>
<span class="hljs-attr">requires_openai_auth</span>Â =Â <span class="hljs-literal">false</span>
<span class="hljs-attr">request_max_retries</span>Â =Â <span class="hljs-number">4</span>
<span class="hljs-attr">stream_max_retries</span>Â =Â <span class="hljs-number">10</span>
<span class="hljs-attr">stream_idle_timeout_ms</span>Â =Â <span class="hljs-number">300000</span>
</code></pre>
<p>ä»¥mamcOSä¸ºä¾‹ï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯å¯¼å‡ºç¯å¢ƒå˜é‡</p>
<pre><code class="hljs language-ini" lang="ini">$Â exportÂ <span class="hljs-attr">MINIMAX_API_KEY</span>=<span class="hljs-string">"your-api-key"</span>
</code></pre>
<p>é‡å¯Codex CLIï¼Œè¾“å…¥ codex æˆ–è€… codex --profile m2 å¯åŠ¨ï¼Œçœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯è¡¨ç¤ºå·²ç»æˆåŠŸé…ç½®MiniMax M2æ¨¡å‹äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a60bdc49f7042759d33b8df788151b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=OYVq7wlof%2FVZz%2FVaOnk22QL3icY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŒæ ·è¾“å…¥ä»»æ„æç¤ºè¯å³å¯è¿›è¡Œå¯¹è¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b699800aaf97474e8fa4a097e8d7e8b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=NuT8Cd6e7Aw%2FsRIRHUUcMx5KXNk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-9">åŸºæœ¬å¯¹è¯</h3>
<p>å¬è¯´M2ä¸Codex CLIæ­é…ä¸æ˜“è°„åªšï¼Œæˆ‘è¿™é‡Œå°±ä»¥Codex CLIä¸ºä¾‹è¿›è¡Œæ¼”ç¤ºï¼ŒM2æ¨¡å‹æ”¯æŒæ·±åº¦æ€è€ƒï¼Œå¯ä»¥çœ‹åˆ°M2æ¨¡å‹åœ¨æ‰§è¡Œä»»åŠ¡å‰éƒ½ä¼šè¿›è¡Œæ€è€ƒï¼Œåœ¨Codex CLIä¸­ä¼šç›´æ¥è¾“å‡ºæ€è€ƒä¿¡æ¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»thinkå†…å®¹å­¦ä¹ AIçš„æ€è€ƒè¿‡ç¨‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5908cec1ae8b4c2aaae60fef38a4e20e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=yKYNBg8%2Fc57SUaDckX0QW6kco4U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>M2æ¨¡å‹æ”¯æŒå·¥å…·è°ƒç”¨ï¼Œæ·»åŠ ä¸Šä¸‹æ–‡æ–‡ä»¶è¦æ±‚AIè¾“å‡ºæ–‡ä»¶å†…å®¹</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@index</span>.py è¾“å‡ºæ–‡ä»¶å†…å®¹
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/068ed299aed2410b9f637a60f5be58fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=K5jbHT7UUTQg%2FsFPf%2FqVKnTVP%2F4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»å®˜ç½‘å¾—çŸ¥M2æ¨¡å‹æ˜¯æ–‡æœ¬æ¨¡å‹ï¼Œä¸æ”¯æŒå›¾ç‰‡æ“ä½œï¼Œåœ¨Codex CLIä¸­æ·»åŠ å›¾ç‰‡ä¸Šä¸‹æ–‡å‡ºç°æ— å“åº”çš„æŠ¥é”™ï¼Œä¸”æŠ¥é”™åæ— æ³•ç»§ç»­ä½¿ç”¨éœ€è¦é‡å¯Codex CLIï¼Œç»æœ¬äººå°è¯•åœ¨Claude Code CLIä¸­ä¸ä¼šæŠ¥é”™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de7742e678424e159ae8f6ccda397fc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=TAtSKJ%2BO9rZFp2m7vL80XsV3N1Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>M2æ¨¡å‹ä¹Ÿæ”¯æŒè‡ªå®šä¹‰å‘½ä»¤è°ƒç”¨åŠMCPæœåŠ¡è°ƒç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15ed1e6c157742acbcdb476ac270b155~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=26S7sWNEwrcrXAsggEVcC9ZZyD0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/607f819b41c84d1589ce13a47b8524ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=Z%2BLJIRgFykUXTgLlg8nSOVvAqwU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-10">åˆ›å»ºAPIæœåŠ¡</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°è¯•ä½¿ç”¨Codex CLIæ­è½½M2å…¨æ–°çš„Minimax Agentæ¥çœ‹ä¸€ä¸‹æ—¥å¸¸ç¼–ç¨‹ç¼–ç¨‹èƒ½åŠ›</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@index</span>.py åœ¨å½“å‰æ–‡ä»¶åˆ›å»ºä¸€ä¸ªç®€å•çš„åŸºäºfask apiçš„æ¥å£æœåŠ¡ç¤ºä¾‹ï¼Œä¸éœ€è¦è¿‡å¤šåŠŸèƒ½ï¼Œæ³¨æ„ä½¿ç”¨uvç®¡ç†é¡¹ç›®
</code></pre>
<p>é€šè¿‡æ€è€ƒè¿‡ç¨‹ï¼Œæˆ‘ä»¬çœ‹åˆ°M2æ¨¡å‹å…ˆæ˜¯æ ¹æ®éœ€æ±‚åˆ—ä¸¾äº†ä»»åŠ¡çš„å…·ä½“å®ç°æ­¥éª¤</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5463a75547e14aefabff0c406b20b4a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=04oc7DpbeMbXULSvf4YTMpzmovE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åå¼€å§‹åˆ›å»ºé¡¹ç›®ç®¡ç†æ–‡ä»¶å’Œç¤ºä¾‹ä»£ç ï¼Œä»»åŠ¡å®Œæˆåï¼Œæœ€ç»ˆæˆ‘ä»¬å¾—åˆ°äº†å¦‚ä¸‹çš„é¡¹ç›®ç»“æ„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db4416922e1d4ecba4ee02e997f00f57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=B2bA1rkNKWbII2j68ACLhQfSD80%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿˜æ˜¯è€å¥—è·¯ä¸ä¼šè¿è¡Œé¡¹ç›®ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œç›´æ¥è®©AIè¿è¡Œï¼Œä¸å¹¸çš„æ˜¯M2æ‰§è¡Œåˆ°ä¸€åŠçš„æ—¶å€™å°±ä¸­æ–­äº†ï¼Œæ— æ³•è¿è¡Œé¡¹ç›®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3063f6cabf14ffe89146998075f8cf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=Quf%2Fepvfjs5pm5n6eRP0bQo6q1Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰‹åŠ¨æ‰§è¡Œäº†ä¸€ä¸‹å‘ç° uv sync æŠ¥é”™äº†ï¼ˆå¤§è‡´é—®é¢˜å°±æ˜¯M2é¦–æ¬¡åˆ›å»ºçš„æ–‡ä»¶ç»“æ„ä¸ç¬¦åˆUVç®¡ç†çš„é¡¹ç›®ç»“æ„ï¼‰ï¼Œå°†é—®é¢˜ä¸¢ç»™M2æ¨¡å‹è¿›è¡Œå¤„ç†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dce38af518648198d590658a17f0ee7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=rQH0E2pGayG%2Fv4rEcpfhz5xggW8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¿®å¤å®Œæˆåï¼Œå†æ¬¡è¿è¡Œè¿˜æ˜¯æ— æ³•å¯åŠ¨é¡¹ç›®ï¼Œè¿æŠ¥é”™ä¿¡æ¯ä¹Ÿæ²¡æœ‰ç›´æ¥ä¸­æ–­äº†ğŸ˜³</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/863d49d672bc4c7294f27390d44277da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=yPl62om%2FrQq8VG7x1XQ%2FJDk1xtE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŒæ ·çš„æç¤ºè¯ï¼Œåœ¨Claude Code CLIä¸­ä½¿ç”¨è™½ç„¶ä¹Ÿæœ‰é—®é¢˜ä½†æ˜¯ç»è¿‡è‡ªåŠ¨é”™è¯¯å¤„ç†ï¼Œæœ€ç»ˆæœåŠ¡è¿˜æ˜¯è·‘èµ·æ¥äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93c441448683411da143a2ae45c7697e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=0aCKJ%2FUjWFZXeqaJHVWAFf8GAwk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48b14439ad544384a97e731b389e60f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=vlQEBHgMxFcy2AXah448KdwJYuw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰€ä»¥å…·ä½“M2æ¨¡å‹å’Œå“ªä¸ªCLIå·¥å…·é…åˆæ›´åˆé€‚è¿˜æ˜¯çœ‹ä¸ªäººä½¿ç”¨ä½“éªŒå§ğŸ¤£</p>
<h3 data-id="heading-11">å¤åˆ»MiniMaxå®˜ç½‘</h3>
<p>è¿˜æ˜¯å…ˆåœ¨Codex CLIä¸­å¤åˆ»ä¸€ä¸‹MiniMaxå®˜ç½‘æ•ˆæœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b31e29cfa78944d6b50707ac0faa4385~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=QK6hBJb7wpL0rQgPOl2mOJl0j5I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>M2æ¨¡å‹åœ¨è·å–ç½‘é¡µä¿¡æ¯åå¼€å§‹å®ç°ä»£ç ç¼–å†™</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb8b8f9be1104429b9ef94a823f01103~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=ndN5kvzc85UsrmYsx6CGbevKHAw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç”±äºæ—¶é—´æ¯”è¾ƒæ™šäº†ï¼Œåˆ°äº†ä¸‹ç­ä¹Ÿæ²¡æœ‰å®Œæˆï¼Œå°±æ”¾ç½®äº†ä¸€å¤œï¼Œæ‰“ç®—ç¬¬äºŒå¤©æ—©ä¸Šæ¥éªŒæ”¶ä¸€ä¸‹æ•ˆæœï¼Œæœ€åæ”¾äº†ä¸€å¤œä¹Ÿæ²¡æœ‰å®ŒæˆæœåŠ¡å¯åŠ¨ğŸ¤£</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48cd373e75f6454dbe23b4912eb3a84e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=ZZ2I44fa%2BaFJ%2BnJm6iVO7F%2BXyAw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†è¯•è¯•Claude Code CLIä¸Šçš„æ•ˆæœï¼Œé€šè¿‡å‘½ä»¤ claude --dangerously-skip-permissions å¯åŠ¨Claude Code CLIï¼Œä»»åŠ¡æ‰§è¡Œå¾ˆå¿«å°±æ‰§è¡Œå®Œäº†ï¼ŒæŠ›å¼€ç›¸ä¼¼åº¦æ¥è¯´ï¼Œçœ‹ç€è¿˜ä¸é”™ğŸ¤£ï¼Œé…è‰²å¸ƒå±€çœ‹ç€ä¹ŸæŒºèˆ’æœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e32884e7a09a4d08aba2598681a48f72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=m2GLYWNh465IuD6TEdRCYpf05HE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-12">æ•°æ®é‡‡é›†æ•´ç†</h3>
<p>è¿™æ¬¡ç›´æ¥ä½¿ç”¨Claude Code CLIæ¥å®Œæˆï¼Œè¾“å…¥æç¤ºè¯å†…å®¹</p>
<pre><code class="hljs language-css" lang="css">è°ƒç ”è¿‘<span class="hljs-number">6</span>ä¸ªæœˆAIé¢†åŸŸæ¨¡å‹åŠ¨æ€ï¼ŒæŒ‰æ€»æ½ã€ä¼˜åŠ¿å¯¹æ¯”ã€ä¸è¶³åˆ†æåŠæ ¸å¿ƒèƒ½åŠ›ç»™å‡ºå¯¹æ¯”ï¼Œä½¿ç”¨<span class="hljs-selector-tag">HTML</span>æ ¼å¼è¾“å‡ºï¼Œé£æ ¼ä½¿ç”¨ä½ å–œæ¬¢çš„é£æ ¼
</code></pre>
<p>æˆ‘ä»¬è¦æ±‚äº†è¿‘6ä¸ªæœˆçš„æ—¶é—´èŒƒå›´ï¼ŒM2æ¨¡å‹å¹¶æ²¡æœ‰è·å–å½“å‰æœ€æ–°æ—¶é—´ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ä»¥æ¨¡å‹è®­ç»ƒæ—¶é—´ä¸ºåŸºå‡†äº†ï¼Œæ£€ç´¢è·å–çš„éƒ½æ˜¯2024å¹´çš„æ•°æ®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a6b5f5796094f78aa224a22bf302671~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=MQBlomhehQ756C4NheFoRjOU%2Fow%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®Œæˆåçš„æ•ˆæœå¦‚ä¸‹ï¼Œä¸ªäººæ„Ÿè§‰æ•ˆæœä¸Šè¿˜ç®—ç¾è§‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54cf3633035c4754ae6269e1bcc90bf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=LM5gMZcgyxQGddde5Ztco04ipRg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-13">3Dæ•ˆæœ</h3>
<p>è¿™æ˜¯ä¹‹å‰çš„ä¸€ä¸ª threejs çš„æ¡ˆä¾‹ï¼Œè¿™æ¬¡æ‹¿æ¥å†ç”¨ä¸€ä¸‹</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/threejs.org/docs</span><span class="hljs-regexp">/
https:/</span><span class="hljs-regexp">/threejs.org/manual</span><span class="hljs-regexp">/
è¿™æ˜¯three.jsæ–‡æ¡£ï¼Œæ ¹æ®æ–‡æ¡£å‚è€ƒï¼Œä½¿ç”¨Â HTMLÂ å’Œ three.jsÂ å®ç°ä¸€ä¸ªå¤ªé˜³ç³»è¿è¡Œçš„3DåŠ¨ç”»æ•ˆæœ
- å…³é”®å…ƒç´ å¯ä»¥ä½¿ç”¨ä¸­æ–‡æ ‡ç­¾æ ‡è®°
- æ ¹æ®åœºæ™¯å¯ä»¥ä½¿ç”¨é˜´å½±ã€é«˜å…‰ã€åå°„ç­‰å¢å¼ºè§†è§‰æ•ˆæœ
</span></code></pre>
<p>ç¬¬ä¸€ç‰ˆå®ç°çš„æ•ˆæœå¾ˆå·®ï¼Œè½¨è¿¹å›¾å’Œè¡Œæ˜Ÿéƒ½æ²¡æœ‰å®Œæ•´å‘ˆç°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e1ba89761054500b6464ca04dbbb5bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=54b1JNJeUXwn%2F0SsuvnUGkP4UcI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è®©M2åˆé‡æ–°ä¿®å¤äº†ä¸€ç‰ˆåï¼Œæœ‰äº†è¡Œæ˜Ÿè½¨è¿¹ï¼Œä»ç„¶æ²¡æœ‰å±•ç¤ºä¸å‡ºå…¶ä»–è¡Œæ˜Ÿï¼Œæœ€ç»ˆåˆè®©M2ä¿®å¤äº†å‡ ä¸ªç‰ˆæœ¬ä¹Ÿæ²¡æœ‰å®Œæˆæ•ˆæœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7dd9f3cd368a492689c6d74dc9d95422~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=hHL1d1IWlsT28fUN48r8gJJtDBM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-14">MiniMax Agent</h3>
<p>å®˜æ–¹ä¹Ÿæä¾›äº†AgentåŠŸèƒ½ï¼Œä½¿ç”¨ä¸Šæœ‰ç‚¹ç±»ä¼¼Manus</p>
<p>å®˜ç½‘å›½é™…ç‰ˆåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fagent.minimax.io" target="_blank" title="https://agent.minimax.io" ref="nofollow noopener noreferrer">agent.minimax.io</a></p>
<p>å®˜ç½‘å›½å†…ç‰ˆåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fagent.minimaxi.com" target="_blank" title="https://agent.minimaxi.com" ref="nofollow noopener noreferrer">agent.minimaxi.com</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c93757b90f84437974d9d144ff768b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=nI0G4DZcSOv495g0Lw7XZwG4DdE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>MiniMax Agentå®˜ç½‘æä¾›äº† é«˜æ•ˆ å’Œ ä¸“ä¸š 2ç§æ¨¡å¼ï¼š</p>
<ul>
<li>
<p>é«˜æ•ˆï¼šé€‚åˆéœ€è¦å¿«é€Ÿå“åº”çš„ç®€å•ä»»åŠ¡</p>
</li>
<li>
<p>ä¸“ä¸šï¼šå…·æœ‰æ›´å¼ºçš„Agentèƒ½åŠ›ï¼Œé¢å¯¹å¤šæ­¥éª¤ã€é«˜å¤æ‚åº¦æˆ–ä¸“ä¸šé¢†åŸŸä»»åŠ¡æ—¶ï¼Œèƒ½è¡¨ç°å‡ºæ˜æ˜¾çš„å…¨æ ˆèƒ½åŠ›</p>
</li>
</ul>
<p>é«˜æ•ˆæ¨¡å¼ä»…æ”¯æŒä¸Šä¼ æ–‡ä»¶ï¼Œä¸“ä¸šæ¨¡å¼ä¸ä»…æ”¯æŒä¸Šä¼ æ–‡ä»¶ï¼Œè¿˜æ”¯æŒåˆ›å»ºã€ç®¡ç†MCPä»¥åŠé›†æˆSupabaseå’Œç®¡ç†ç¯å¢ƒå˜é‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7ebb5f5ee774d5db21bc1f84e33ba5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=3K%2BJnCe57DsXVtJcKwANs0BYYDw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e65d7a7b4e6d445f9fd1771286d9b7c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=EnxLcD4t3jw42qbiGjvEJUP5wrQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åŒæ ·ä½¿ç”¨ä¸Šé¢çš„ç¤ºä¾‹æç¤ºè¯å¤åˆ»ä¸€ä¸‹MiniMaxå®˜ç½‘ï¼Œé¦–å…ˆä½¿ç”¨ã€é«˜æ•ˆã€‘æ¨¡å¼ï¼Œé«˜æ•ˆæ¨¡å¼ä¼šå…ˆè¿›è¡Œæ€è€ƒï¼Œç„¶åå¼€å§‹æ‰§è¡Œä»»åŠ¡ï¼Œä»»åŠ¡æ‰§è¡Œå…¨ç¨‹åœ¨è™šæ‹Ÿæœºä¸Šå®Œæˆï¼Œæ¯ä¸€æ­¥æ‰§è¡Œçš„å†…å®¹å’Œç»“æœéƒ½æä¾›äº†æŸ¥çœ‹å…¥å£</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2558b44611dd49d48f2ccf346c580573~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=nVjD0mb0r0xuErJRKfacl5JuLTE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰§è¡Œå®Œæˆåï¼Œå¯ä»¥åœ¨å³ä¾§çª—å£æŸ¥çœ‹å®Œæ•´é¡¹ç›®ç»“æ„å’Œå†…å®¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/775a02b3f8c04093b9d061368eb8aca5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=9GbxgUwsKOezxVn3FZchUTBqwqE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æä¾›äº†Markdownã€H5é¡µé¢çš„æ•ˆæœé¢„è§ˆæ¨¡å¼ï¼Œæ‰“å¼€æ–‡ä»¶å¯ä»¥ç›´æ¥æŸ¥çœ‹æ•ˆæœï¼Œé«˜æ•ˆæ¨¡å¼è¿˜å¯ä»¥ä½¿ç”¨Proæ¨¡å¼ç»§ç»­å¯¹è¯ï¼Œé«˜æ•ˆæ¨¡å¼çš„æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼Œè§‚ç‚¹å°±ä¸å‘è¡¨äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9811de7666d9420fbf28272cd1a5e85f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=%2BaTP6gZV7ngAxnOkcuY9WswzhD0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ‡æ¢åˆ°ã€ä¸“ä¸šæ¨¡å¼ã€‘å†æ¬¡å°è¯•ï¼Œä¸“ä¸šæ¨¡å¼ä¼šå…ˆæä¾›è¯¦ç»†çš„æ‰§è¡Œè®¡åˆ’å¹¶è¦æ±‚ç¡®è®¤</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ea26925246642a4a33e096efffa676c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=QvELJu4jDDiqB0wQlCjmQ8qwtPo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä»¬å›å¤ ç»§ç»­ è®©Agentç»§ç»­æ‰§è¡Œï¼Œæ¯æ¬¡æ‰§è¡Œå®Œä¸€ä¸ªæœºä¼šåéƒ½ä¼šå¯¹ä»»åŠ¡è¿›è¡Œæ ‡è®°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51ba9266b1d54a499e00a8e76e25aefd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=UKLGDgeOCQb3VMZNfWkAdWh7BFk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¹¶æä¾›å…·ä½“çš„å†…å®¹è§„åˆ’ã€è®¾è®¡æ–‡æ¡£</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b2ab88c8f124225bacdecdc1ab54c07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=rEVYzMk4QruU5hw4NrVhCHYK%2FoY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥æ˜æ˜¾æ„Ÿè§‰åˆ°è¿™æ¬¡æ‰§è¡Œæ—¶é—´æ›´é•¿ï¼Œç»è¿‡æ¼«é•¿çš„ç­‰å¾…ï¼ŒMiniMax Agentç»ˆäºå®Œæˆäº†ä»»åŠ¡å¹¶å®ç°äº†ç½‘ç«™çš„éƒ¨ç½²</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/555a61421fef427a84436534baa4fc3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=zsP%2BAaJVseeDwik%2FTdYKvQTYgqc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘å°±ä¸è´´é¢„è§ˆæ•ˆæœä¹Ÿä¸è¯„ä»·äº†ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´è‡ªè¡ŒæŸ¥çœ‹</p>
<p>é¢„è§ˆé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbziv8hvc7sc2.space.minimax.io%2F" target="_blank" title="https://bziv8hvc7sc2.space.minimax.io/" ref="nofollow noopener noreferrer">bziv8hvc7sc2.space.minimax.io/</a></p>
<p>è¿‡ç¨‹å›æº¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fagent.minimax.io%2Fshare%2F330808438440072%3Fchat%255C%255C%255C%255C_type%3D0" target="_blank" title="https://agent.minimax.io/share/330808438440072?chat%5C%5C%5C%5C_type=0" ref="nofollow noopener noreferrer">agent.minimax.io/share/33080â€¦</a></p>
<p>å…¶å®åˆ°è¿™é‡Œï¼Œæˆ‘å·²ç»ä¸æƒ³ç»§ç»­äº†ï¼Œä½†æ˜¯ç†æ™ºå‘Šè¯‰æˆ‘å†è¯•è¯•ï¼Œå¯èƒ½åªæ˜¯ä¸€æ—¶çš„ï¼Œäºæ˜¯åˆè¯•äº†ç¬¬äºŒä¸ªç¤ºä¾‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61c70765f3954947a032be5b7eb02b6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=01muandUaOB5%2FT7HJYedkOz4nU8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>çœ‹åˆ°MiniMax Agentç»™å‡ºäº†å‡†ç¡®çš„æ—¶é—´èŒƒå›´å’Œå¾…åŠäº‹é¡¹ï¼Œæˆ‘å†³å®šå†è§‚å¯Ÿä¸€ä¸‹ã€‚æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼Œçœ‹ç€å’ŒCLIä¸­å¾—åˆ°çš„ç›¸å·®ä¸å¤§</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afefb9725d944973b125cffb0c9fad40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=Uh5JOy7ce%2Ff0nwIJz8v5X1O2kTY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-15">äº§å“å®šä»·</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd1095c87a8a416298348ce86d3c6251~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764392340&amp;x-signature=2ACSys0GbIIWo79xXJ9Orvs%2BaGc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>æœ¬äººä½“éªŒçš„å›½é™…ç‰ˆï¼Œæ•´ä½“ä½“éªŒä¸‹æ¥ï¼ŒM2æ¨¡å‹åœ¨å‰ç«¯UIè¡¨ç°ä¸Šè¿˜æ˜¯ä¸é”™çš„ï¼Œä½†æ˜¯ä¸çŸ¥é“æ˜¯ä¸æ˜¯ä½¿ç”¨çš„äººå¤ªå¤šå¯¼è‡´çš„æ¨¡å‹é™æ™ºï¼Œé›†æˆåˆ°Claude Code CLIå’ŒCodex CLIçš„M2ç»™æˆ‘çš„æ„Ÿè§‰æ˜¯ä¸€ä¸ªæ–°å‹çš„è‡ªå¸¦Agentä¸­è§„ä¸­çŸ©çš„æ–‡æœ¬æ¨¡å‹ï¼Œå…·å¤‡ä¸»æµå¤§æ¨¡å‹çš„æ€è€ƒå’Œå·¥å…·è°ƒç”¨èƒ½åŠ›ï¼Œæ— è®ºæ˜¯ç¼–ç èƒ½åŠ›ã€ä»»åŠ¡å¤„ç†è¿˜æ˜¯å·¥å…·è°ƒç”¨éƒ½æ²¡æœ‰å¾ˆæƒŠè‰³ï¼Œåœ¨Claude Code CLIä¸­M2çš„è¡¨ç°æ¯”Codex CLIè¦å¥½ä¸€äº›ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸ªäººæµ‹è¯•åœºæ™¯å’Œä½¿ç”¨çš„â€œå§¿åŠ¿â€ä¸å¯¹å¯¼è‡´çš„ç»“æœå› äººè€Œå¼‚ï¼Œæˆ‘ä¸ªäººè€Œè¨€ä¼šè€ƒè™‘å†è§‚æœ›ä¸€æ®µæ—¶é—´ã€‚</p>
<h2 data-id="heading-17">å‹æƒ…æç¤º</h2>
<p>è§åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%253A%2F%2Fmp.weixin.qq.com%2Fs%2FybgCSLPFkywVVIWyO7vxow" target="_blank" title="https%3A//mp.weixin.qq.com/s/ybgCSLPFkywVVIWyO7vxow" ref="nofollow noopener noreferrer">è¿½èµ¶ä¸€è¶ŸMinimax M2é™æ—¶å…è´¹æœ«ç­è½¦</a></p>
<blockquote>
<p>æœ¬æ–‡åŒæ­¥è‡ªå¾®ä¿¡å…¬ä¼—å· "<a href="https://link.juejin.cn?target=https%253A%2F%2Fmp.weixin.qq.com%2Fs%2FybgCSLPFkywVVIWyO7vxow" target="_blank" title="https%3A//mp.weixin.qq.com/s/ybgCSLPFkywVVIWyO7vxow" ref="nofollow noopener noreferrer">ç¨‹åºå‘˜å°æºª</a>" ï¼Œè¿™é‡Œåªæ˜¯åŒæ­¥ï¼Œæƒ³çœ‹åŠæ—¶æ¶ˆæ¯è¯·ç§»æ­¥æˆ‘çš„å…¬ä¼—å·ï¼Œä¸å®šæ—¶æ›´æ–°æˆ‘çš„å­¦ä¹ ç»éªŒã€‚å‹æƒ…æç¤ºå‹æƒ…æç¤º</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring é¡¹ç›®åˆ«å†ä¹±æ³¨å…¥ Service äº†ï¼ç”¨ Lambda å°è£…ä¸ªç»Ÿä¸€è°ƒç”¨ç»„ä»¶ï¼Œçˆ½åˆ°é£èµ·]]></title>    <link>https://juejin.cn/post/7575017581036765222</link>    <guid>https://juejin.cn/post/7575017581036765222</guid>    <pubDate>2025-11-21T17:00:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575017581036765222" data-draft-id="7575004291833004083" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring é¡¹ç›®åˆ«å†ä¹±æ³¨å…¥ Service äº†ï¼ç”¨ Lambda å°è£…ä¸ªç»Ÿä¸€è°ƒç”¨ç»„ä»¶ï¼Œçˆ½åˆ°é£èµ·"/> <meta itemprop="keywords" content="Spring Boot"/> <meta itemprop="datePublished" content="2025-11-21T17:00:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åªä¼šå†™ä»£ç "/> <meta itemprop="url" content="https://juejin.cn/user/995479086189514"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring é¡¹ç›®åˆ«å†ä¹±æ³¨å…¥ Service äº†ï¼ç”¨ Lambda å°è£…ä¸ªç»Ÿä¸€è°ƒç”¨ç»„ä»¶ï¼Œçˆ½åˆ°é£èµ·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/995479086189514/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åªä¼šå†™ä»£ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T17:00:41.000Z" title="Fri Nov 21 2025 17:00:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…„å¼Ÿä»¬ï¼Œå’±åš Spring é¡¹ç›®çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æ€»é‡åˆ°è¿™äº›ç ´äº‹ï¼š</p>
<ul>
<li>æ¯ä¸ª Controller é‡Œéƒ½è¦å†™@Autowired UserService userServiceï¼Œæ³¨å…¥ä¸€å¤§å † Serviceï¼Œä»£ç åˆä¹±åˆå†—ä½™ï¼›</li>
</ul>

<ul>
<li>æƒ³ç»Ÿä¸€åŠ ä¸ªæ—¥å¿— / å¼‚å¸¸å¤„ç†ï¼Œå¾—åœ¨æ¯ä¸ª Service æ–¹æ³•é‡Œå†™ä¸€éï¼Œæ”¹èµ·æ¥è¦ç–¯ï¼›</li>
</ul>

<ul>
<li>å¶å°”è¿˜ä¼šæ‰‹æ»‘æŠŠ Service ç±»å / æ–¹æ³•åå†™é”™ï¼Œç¼–è¯‘ä¸æŠ¥é”™ï¼Œè·‘èµ·æ¥æ‰å‡ºé—®é¢˜ï¼Œæ’æŸ¥åŠå¤©ã€‚</li>
</ul>
<p>ä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸ªæˆ‘è‡ªå·±å†™çš„ServiceManagerç»„ä»¶ï¼Œç”¨ Lambda æå®šè¿™äº›ç ´äº‹ â€”â€” ä¸ç”¨æ‰‹åŠ¨æ³¨å…¥ Serviceï¼Œè°ƒç”¨æ–¹æ³•åƒå†™å…¬å¼ä¸€æ ·ç®€å•ï¼Œè¿˜èƒ½è‡ªåŠ¨ç¼“å­˜ã€ç»Ÿä¸€å¤„ç†å¼‚å¸¸ï¼Œæ–°æ‰‹ä¹Ÿèƒ½ç§’æ‡‚ç§’ç”¨ï¼</p>
<h2 data-id="heading-0">å…ˆè¯´è¯´è¿™ç»„ä»¶èƒ½è§£å†³å•¥å®é™…é—®é¢˜ï¼Ÿ</h2>
<p>ä¸¾ä¸ªæ —å­ï¼šä»¥å‰å’±è°ƒç”¨ç”¨æˆ·æŸ¥è¯¢æ¥å£ï¼Œå¾—è¿™ä¹ˆå†™ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å…ˆæ³¨å…¥Service</span>
<span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> UserService userService;
<span class="hljs-comment">// 2. å†è°ƒç”¨æ–¹æ³•</span>
<span class="hljs-keyword">public</span> SerResult&lt;UserDTO&gt; getUser(<span class="hljs-built_in">Long</span> userId) {
    <span class="hljs-keyword">try</span> {
        log.info(<span class="hljs-string">"å¼€å§‹æŸ¥ç”¨æˆ·ï¼ŒIDï¼š{}"</span>, userId);
        UserDTO user = userService.queryUser(userId);
        log.info(<span class="hljs-string">"æŸ¥è¯¢æˆåŠŸï¼Œç»“æœï¼š{}"</span>, user);
        <span class="hljs-keyword">return</span> SerResult.success(user);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥"</span>, e);
        <span class="hljs-keyword">return</span> SerResult.fail(<span class="hljs-string">"æŸ¥ç”¨æˆ·å‡ºé”™äº†"</span>);
    }
}
</code></pre>
<p>åˆæ˜¯æ³¨å…¥åˆæ˜¯æ—¥å¿—åˆæ˜¯ try-catchï¼Œé‡å¤ä»£ç ä¸€å †ã€‚</p>
<p>ç”¨äº†ServiceManagerä¹‹åï¼Œç›´æ¥å†™æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> SerResult&lt;UserDTO&gt; getUser(<span class="hljs-built_in">Long</span> userId) {
    <span class="hljs-comment">// ä¸€è¡Œæå®šï¼šä¼ æ–¹æ³•+å‚æ•°ï¼Œå…¶ä»–å…¨å¸®ä½ åš</span>
    <span class="hljs-keyword">return</span> ServiceManager.call(UserService::queryUser, userId);
}
</code></pre>
<p>æ³¨å…¥ï¼Ÿæ²¡äº†ã€‚æ—¥å¿—ï¼Ÿç»„ä»¶è‡ªåŠ¨æ‰“ã€‚å¼‚å¸¸ï¼Ÿç»„ä»¶è‡ªåŠ¨å¤„ç†ã€‚çˆ½ä¸çˆ½ï¼Ÿ</p>
<h2 data-id="heading-1">ç»„ä»¶æ ¸å¿ƒé€»è¾‘ï¼šå¤§ç™½è¯æ‹†è§£</h2>
<p>å…¶å®è¿™ç»„ä»¶å°±å¹²äº† 3 ä»¶äº‹ï¼š</p>
<ol>
<li>ä½ ä¼ ä¸ª Lambdaï¼ˆæ¯”å¦‚UserService::queryUserï¼‰ï¼Œå®ƒå¸®ä½ æ‰¾åˆ°å¯¹åº”çš„ Service å®ä¾‹ï¼›</li>
</ol>

<ol start="2">
<li>æŠŠæ‰¾åˆ°çš„å®ä¾‹å’Œæ–¹æ³•ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡è°ƒç”¨æ›´å¿«ï¼›</li>
</ol>

<ol start="3">
<li>ç»Ÿä¸€æ‰§è¡Œæ–¹æ³•ï¼Œé¡ºä¾¿æŠŠæ—¥å¿—ã€å¼‚å¸¸å¤„ç†éƒ½åŒ…äº†ã€‚</li>
</ol>
<p>ä¸‹é¢å’±ä¸€æ­¥æ­¥æ¥ï¼Œä»£ç éƒ½ç»™ä½ è´´å¥½ï¼Œå¤åˆ¶è¿‡å»æ”¹æ”¹å°±èƒ½ç”¨ã€‚</p>
<h2 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šå…ˆæ­åŸºç¡€ â€”â€” éœ€è¦çš„ä¾èµ–å’Œå·¥å…·ç±»</h2>
<p>é¦–å…ˆå¾—æœ‰å‡ ä¸ªå°å·¥å…·ï¼Œä¸ç”¨è‡ªå·±å†™ï¼Œç›´æ¥å¤åˆ¶ï¼š</p>
<h3 data-id="heading-3">1. ç»Ÿä¸€è¿”å›ç»“æœç±»ï¼ˆSerResultï¼‰</h3>
<p>ä¸ç®¡è°ƒç”¨æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½è¿”å›åŒä¸€ä¸ªæ ¼å¼ï¼Œå‰ç«¯å¥½å¤„ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">package org.<span class="hljs-property">pro</span>.<span class="hljs-property">wwcx</span>.<span class="hljs-property">ledger</span>.<span class="hljs-property">common</span>.<span class="hljs-property">dto</span>;
<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">Data</span>;
<span class="hljs-comment">// æœåŠ¡è°ƒç”¨çš„ç»Ÿä¸€è¿”å›ç»“æœï¼Œå‰ç«¯æ‹¿åˆ°å°±çŸ¥é“æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SerResult</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> int code;       <span class="hljs-comment">// 200=æˆåŠŸï¼Œ500=å¤±è´¥ï¼Œå‰ç«¯ä¸€çœ‹å°±æ‡‚</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> msg;     <span class="hljs-comment">// æç¤ºä¿¡æ¯ï¼Œæ¯”å¦‚â€œæ“ä½œæˆåŠŸâ€â€œæŸ¥ä¸åˆ°ç”¨æˆ·â€</span>
    <span class="hljs-keyword">private</span> T data;         <span class="hljs-comment">// æˆåŠŸæ—¶è¿”å›çš„æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-comment">// æˆåŠŸçš„æ—¶å€™è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼ŒæŠŠæ•°æ®ä¼ è¿›å»</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">SerResult</span>&lt;T&gt; <span class="hljs-title function_">success</span>(<span class="hljs-params">T data</span>) {
        <span class="hljs-title class_">SerResult</span>&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SerResult</span>&lt;&gt;();
        result.<span class="hljs-title function_">setCode</span>(<span class="hljs-number">200</span>);
        result.<span class="hljs-title function_">setMsg</span>(<span class="hljs-string">"æ“ä½œæˆåŠŸ"</span>);
        result.<span class="hljs-title function_">setData</span>(data);
        <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-comment">// å¤±è´¥çš„æ—¶å€™è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼ é”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">SerResult</span>&lt;T&gt; <span class="hljs-title function_">fail</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> msg</span>) {
        <span class="hljs-title class_">SerResult</span>&lt;T&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SerResult</span>&lt;&gt;();
        result.<span class="hljs-title function_">setCode</span>(<span class="hljs-number">500</span>);
        result.<span class="hljs-title function_">setMsg</span>(msg);
        result.<span class="hljs-title function_">setData</span>(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h3 data-id="heading-4">2. Lambda è§£æå·¥å…·ï¼ˆLambdaUtilï¼‰</h3>
<p>è¿™å·¥å…·æ˜¯æ ¸å¿ƒï¼Œå¸®å’±ä» Lambda é‡Œ â€œæ‰£â€ å‡º Service ç±»åå’Œæ–¹æ³•åï¼ˆä¸ç”¨æ‡‚åŸç†ï¼Œå¤åˆ¶ç”¨å°±è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.pro.wwcx.ledger.common.util;
<span class="hljs-keyword">import</span> java.io.Serializable;
<span class="hljs-keyword">import</span> java.lang.reflect.Method;
<span class="hljs-keyword">import</span> java.lang.invoke.SerializedLambda;
<span class="hljs-comment">// ä»Lambdaè¡¨è¾¾å¼é‡Œæ‹¿Serviceä¿¡æ¯çš„å·¥å…·</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LambdaUtil</span> {
    <span class="hljs-comment">// ä¼ ä¸ªLambdaè¿›æ¥ï¼Œè¿”å›å®ƒå¯¹åº”çš„â€œå…ƒæ•°æ®â€ï¼ˆæ¯”å¦‚å“ªä¸ªServiceï¼Œå“ªä¸ªæ–¹æ³•ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SerializedLambda <span class="hljs-title function_">valueOf</span><span class="hljs-params">(Serializable lambda)</span> {
        <span class="hljs-keyword">if</span> (lambda == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Lambdaä¸èƒ½ä¼ ç©ºï¼"</span>);
        }
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åå°„æ‹¿åˆ°Lambdaé‡Œçš„éšè—æ–¹æ³•ï¼Œä¸ç”¨ç®¡è¿™è¡Œæ˜¯å’‹å›äº‹</span>
            <span class="hljs-type">Method</span> <span class="hljs-variable">writeReplaceMethod</span> <span class="hljs-operator">=</span> lambda.getClass().getDeclaredMethod(<span class="hljs-string">"writeReplace"</span>);
            writeReplaceMethod.setAccessible(<span class="hljs-literal">true</span>);
            <span class="hljs-keyword">return</span> (SerializedLambda) writeReplaceMethod.invoke(lambda);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"è§£æLambdaå‡ºé”™äº†"</span>, e);
        }
    }
}
</code></pre>
<h3 data-id="heading-5">3. Spring å·¥å…·ç±»ï¼ˆSpringUtilï¼‰</h3>
<p>å¸®å’±ä» Spring é‡Œæ‹¿ Service å®ä¾‹ï¼ˆä¸ç”¨æ‰‹åŠ¨@Autowiredå°±æ˜¯é å®ƒï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.pro.wwcx.ledger.common.util;
<span class="hljs-keyword">import</span> org.springframework.beans.BeansException;
<span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;
<span class="hljs-keyword">import</span> org.springframework.context.ApplicationContextAware;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-comment">// ä»Springé‡Œæ‹¿Beançš„å·¥å…·ï¼Œä¸ç”¨è‡ªå·±æ³¨å…¥Service</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringUtil</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationContextAware</span> {
    <span class="hljs-comment">// Springçš„ä¸Šä¸‹æ–‡ï¼Œç›¸å½“äºâ€œBeanä»“åº“â€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ApplicationContext applicationContext;
    <span class="hljs-comment">// ä»ä»“åº“é‡ŒæŒ‰ç±»å‹æ‹¿Beanï¼Œæ¯”å¦‚æ‹¿UserServiceç±»å‹çš„å®ä¾‹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T <span class="hljs-title function_">getBean</span><span class="hljs-params">(Class&lt;T&gt; requiredType)</span> {
        <span class="hljs-keyword">if</span> (applicationContext == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Springè¿˜æ²¡åˆå§‹åŒ–å¥½å‘¢ï¼"</span>);
        }
        <span class="hljs-keyword">return</span> applicationContext.getBean(requiredType);
    }
    <span class="hljs-comment">// ä¸‹é¢è¿™è¡Œæ˜¯Springè‡ªåŠ¨è°ƒç”¨çš„ï¼Œä¸ç”¨ç®¡</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setApplicationContext</span><span class="hljs-params">(ApplicationContext applicationContext)</span> <span class="hljs-keyword">throws</span> BeansException {
        SpringUtil.applicationContext = applicationContext;
    }
}
</code></pre>
<h3 data-id="heading-6">4. å‡½æ•°æ¥å£ï¼ˆSerialBiFunctionï¼‰</h3>
<p>è¿™ä¸ªæ˜¯ Lambda çš„ â€œè§„çŸ©â€ï¼Œè§„å®šä¼ å‚å’Œè¿”å›å€¼çš„æ ¼å¼ï¼ˆå¤åˆ¶å°±è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.pro.wwcx.ledger.common.resolver.anno;
<span class="hljs-keyword">import</span> java.io.Serializable;
<span class="hljs-comment">// æ”¯æŒåºåˆ—åŒ–çš„åŒå‚æ•°å‡½æ•°æ¥å£ï¼ŒLambdaè¦ç¬¦åˆè¿™ä¸ªæ ¼å¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SerialBiFunction</span>&lt;T, U, R&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-comment">// æ–¹æ³•æ ¼å¼ï¼šä¼ å…¥Tï¼ˆServiceå®ä¾‹ï¼‰å’ŒUï¼ˆå‚æ•°ï¼‰ï¼Œè¿”å›Rï¼ˆç»“æœï¼‰</span>
    R <span class="hljs-title function_">apply</span><span class="hljs-params">(T t, U u)</span>;
}
</code></pre>
<h3 data-id="heading-7">5. å®ä¾‹æ„å»ºå™¨ï¼ˆInstBuilderï¼‰</h3>
<p>å¸®å’±å¿«é€Ÿåˆ›å»ºå¯¹è±¡çš„å°å·¥å…·ï¼Œä¸ç”¨å†™ä¸€å †setæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">package org.pro.wwcx.ledger.common.resolver;
<span class="hljs-comment">// å¿«é€Ÿåˆ›å»ºå¯¹è±¡çš„å·¥å…·ï¼Œæ¯”å¦‚new ServiceExecutoråä¸ç”¨ä¸€ä¸ªä¸ªsetå€¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">InstBuilder</span>&lt;<span class="hljs-title">T</span>&gt; {
    <span class="hljs-keyword">private</span> final T target;
    <span class="hljs-comment">// åˆå§‹åŒ–è¦åˆ›å»ºçš„å¯¹è±¡</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">InstBuilder</span>(<span class="hljs-params">Class&lt;T&gt; clazz</span>)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">this</span>.target = clazz.getDeclaredConstructor().newInstance();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> RuntimeException(<span class="hljs-string">"åˆ›å»ºå¯¹è±¡å¤±è´¥"</span>, e);
        }
    }
    <span class="hljs-comment">// é™æ€æ–¹æ³•ï¼Œå…¥å£ï¼šInstBuilder.of(ServiceExecutor.class)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title">InstBuilder</span>&lt;<span class="hljs-title">T</span>&gt; <span class="hljs-title">of</span>(<span class="hljs-params">Class&lt;T&gt; clazz</span>)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> InstBuilder&lt;&gt;(clazz);
    }
    <span class="hljs-comment">// é“¾å¼setå€¼ï¼šæ¯”å¦‚.set(ServiceExecutor::setParam, param)</span>
    <span class="hljs-keyword">public</span> &lt;V&gt; <span class="hljs-function">InstBuilder&lt;T&gt; <span class="hljs-title">set</span>(<span class="hljs-params">Setter&lt;T, V&gt; setter, V <span class="hljs-keyword">value</span></span>)</span> {
        setter.<span class="hljs-keyword">set</span>(target, <span class="hljs-keyword">value</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    }
    <span class="hljs-comment">// æœ€åè°ƒç”¨build()æ‹¿åˆ°å¯¹è±¡</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">build</span>()</span> {
        <span class="hljs-keyword">return</span> target;
    }
    <span class="hljs-comment">// å®šä¹‰setterçš„æ ¼å¼</span>
    @FunctionalInterface
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">Setter</span>&lt;<span class="hljs-title">T</span>, <span class="hljs-title">V</span>&gt; {
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set</span>(<span class="hljs-params">T target, V <span class="hljs-keyword">value</span></span>)</span>;
    }
}
</code></pre>
<h2 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šæ ¸å¿ƒç»„ä»¶ â€”â€”ServiceManager</h2>
<p>è¿™æ˜¯å’±çš„ä¸»è§’ï¼Œæ‰€æœ‰é€»è¾‘éƒ½åœ¨è¿™ï¼Œæˆ‘ä¸€è¡Œè¡Œç»™ä½ è®²æ˜ç™½ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">package org.pro.wwcx.ledger.common.servicer;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.pro.wwcx.ledger.common.dto.SerResult;
<span class="hljs-keyword">import</span> org.pro.wwcx.ledger.common.resolver.InstBuilder;
<span class="hljs-keyword">import</span> org.pro.wwcx.ledger.common.resolver.anno.SerialBiFunction;
<span class="hljs-keyword">import</span> org.pro.wwcx.ledger.common.util.LambdaUtil;
<span class="hljs-keyword">import</span> org.pro.wwcx.ledger.common.util.SpringUtil;
<span class="hljs-keyword">import</span> java.lang.invoke.SerializedLambda;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;
<span class="hljs-comment">// æ—¥å¿—æ³¨è§£ï¼Œèƒ½æ‰“æ—¥å¿—</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceManager</span> {
    <span class="hljs-comment">// ç¼“å­˜åˆå§‹åŒ–å¤§å°ï¼Œ6666å¤Ÿå’±ç”¨äº†ï¼Œä¸å¤Ÿå†æ”¹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> int <span class="hljs-type">INIT_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">6666</span>;
    <span class="hljs-comment">// ç¼“å­˜Lambdaå¯¹åº”çš„Serviceä¿¡æ¯ï¼Œkeyæ˜¯Lambdaï¼Œvalueæ˜¯Serviceå…ƒæ•°æ®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Map</span>&lt;<span class="hljs-type">SerialBiFunction</span>&lt;?,?,?&gt;, <span class="hljs-type">LambdaMeta</span>&lt;?&gt;&gt; <span class="hljs-type">CACHE_LAMBDA</span>;
    <span class="hljs-comment">// é™æ€ä»£ç å—ï¼Œé¡¹ç›®å¯åŠ¨æ—¶å°±åˆå§‹åŒ–ç¼“å­˜</span>
    <span class="hljs-keyword">static</span> {
        <span class="hljs-type">CACHE_LAMBDA</span> <span class="hljs-operator">=</span> new <span class="hljs-type">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-type">INIT_COUNT</span>);
    }
    <span class="hljs-comment">// å¯¹å¤–æä¾›çš„è°ƒç”¨æ–¹æ³•ï¼šä¼ Lambdaï¼ˆæ¯”å¦‚UserService::queryUserï¼‰å’Œå‚æ•°ï¼Œè¿”å›ç»“æœ</span>
    <span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">"unchecked"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-operator">&lt;</span><span class="hljs-type">T</span>,<span class="hljs-type">U</span>,<span class="hljs-type">R</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">SerResult</span>&lt;<span class="hljs-type">R</span>&gt; call(<span class="hljs-type">SerialBiFunction</span>&lt;<span class="hljs-type">T</span>,<span class="hljs-type">U</span>,<span class="hljs-type">R</span>&gt; fn, <span class="hljs-type">U</span> param){
        <span class="hljs-comment">// å…ˆæ£€æŸ¥ï¼šLambdaä¸èƒ½ä¼ ç©º</span>
        <span class="hljs-keyword">if</span> (fn <span class="hljs-operator">==</span> null) {
            <span class="hljs-keyword">return</span> <span class="hljs-type">SerResult</span>.fail(<span class="hljs-string">"æœåŠ¡å‡½æ•°ä¸èƒ½ä¸ºç©ºï¼"</span>);
        }
        <span class="hljs-comment">// 1. ä»ç¼“å­˜æ‹¿Serviceä¿¡æ¯ï¼šæœ‰å°±ç›´æ¥ç”¨ï¼Œæ²¡æœ‰å°±è§£æå¹¶ç¼“å­˜</span>
        <span class="hljs-type">LambdaMeta</span>&lt;<span class="hljs-type">T</span>&gt; lambdaMeta <span class="hljs-operator">=</span> (<span class="hljs-type">LambdaMeta</span>&lt;<span class="hljs-type">T</span>&gt;) <span class="hljs-type">CACHE_LAMBDA</span>.computeIfAbsent(fn, k-&gt; {
            <span class="hljs-comment">// è§£æLambdaï¼Œæ‹¿åˆ°Serviceå®ä¾‹ã€ç±»åè¿™äº›ä¿¡æ¯</span>
            <span class="hljs-type">LambdaMeta</span>&lt;<span class="hljs-type">T</span>&gt; meta <span class="hljs-operator">=</span> parseSerialFunction(fn);
            log.debug(<span class="hljs-string">"ç¼“å­˜Serviceä¿¡æ¯ï¼š{}"</span>, meta.getServiceName());
            <span class="hljs-keyword">return</span> meta;
        });
        <span class="hljs-comment">// 2. åˆ›å»ºæ‰§è¡Œå™¨ï¼ŒæŠŠLambdaã€å‚æ•°ã€Serviceä¿¡æ¯ä¼ è¿›å»</span>
        <span class="hljs-type">ServiceExecutor</span>&lt;<span class="hljs-type">T</span>,<span class="hljs-type">U</span>,<span class="hljs-type">R</span>&gt; executor <span class="hljs-operator">=</span> <span class="hljs-type">InstBuilder</span>.of(<span class="hljs-type">ServiceExecutor</span>.class)
                .set(ServiceExecutor::setServiceFn, fn)    <span class="hljs-comment">// ä¼ Lambdaæ–¹æ³•</span>
                .set(ServiceExecutor::setParam, param)      <span class="hljs-comment">// ä¼ å‚æ•°</span>
                .set(ServiceExecutor::setLambdaMeta, lambdaMeta)  <span class="hljs-comment">// ä¼ Serviceä¿¡æ¯</span>
                .build();  <span class="hljs-comment">// æ„å»ºæ‰§è¡Œå™¨</span>
        <span class="hljs-comment">// 3. æ‰§è¡Œæ–¹æ³•ï¼Œè¿”å›ç»“æœ</span>
        <span class="hljs-keyword">return</span> executor.callService();
    }
    <span class="hljs-comment">// è§£æLambdaï¼šä»Lambdaé‡Œæ‹¿åˆ°Serviceç±»åã€å®ä¾‹ã€æ–¹æ³•å</span>
    <span class="hljs-meta">@SuppressWarnings</span>(<span class="hljs-string">"unchecked"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-operator">&lt;</span><span class="hljs-type">T</span>, <span class="hljs-type">U</span>, <span class="hljs-type">R</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">LambdaMeta</span>&lt;<span class="hljs-type">T</span>&gt; parseSerialFunction(<span class="hljs-type">SerialBiFunction</span>&lt;<span class="hljs-type">T</span>,<span class="hljs-type">U</span>,<span class="hljs-type">R</span>&gt; fn) {
        <span class="hljs-comment">// ç”¨LambdaUtilæ‹¿åˆ°Lambdaçš„å…ƒæ•°æ®</span>
        <span class="hljs-type">SerializedLambda</span> lambda <span class="hljs-operator">=</span> <span class="hljs-type">LambdaUtil</span>.valueOf(fn);
        <span class="hljs-comment">// å°è£…Serviceä¿¡æ¯çš„å¯¹è±¡</span>
        <span class="hljs-type">LambdaMeta</span>&lt;<span class="hljs-type">T</span>&gt; lambdaMeta <span class="hljs-operator">=</span> new <span class="hljs-type">LambdaMeta</span>&lt;&gt;();
        <span class="hljs-comment">// 1. è§£æServiceç±»åï¼šLambdaé‡Œçš„ç±»åæ˜¯â€œcom/example/UserServiceâ€ï¼Œè¦æ”¹æˆâ€œcom.example.UserServiceâ€</span>
        <span class="hljs-type">String</span> tClassName <span class="hljs-operator">=</span> lambda.getImplClass().replaceAll(<span class="hljs-string">"/"</span>, <span class="hljs-string">"."</span>);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. æ‹¿åˆ°Serviceçš„Classå¯¹è±¡ï¼ˆæ¯”å¦‚UserService.classï¼‰</span>
            <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt; aClass <span class="hljs-operator">=</span> (<span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt;) <span class="hljs-type">Class</span>.forName(tClassName);
            <span class="hljs-comment">// 3. ä»Springé‡Œæ‹¿Serviceå®ä¾‹ï¼ˆä¸ç”¨@Autowiredå°±æ˜¯é è¿™è¡Œï¼‰</span>
            <span class="hljs-type">T</span> inst <span class="hljs-operator">=</span> <span class="hljs-type">SpringUtil</span>.getBean(aClass);
            <span class="hljs-comment">// 4. æŠŠä¿¡æ¯å­˜åˆ°lambdaMetaé‡Œ</span>
            lambdaMeta.setClazz(aClass);    <span class="hljs-comment">// å­˜Serviceçš„Class</span>
            lambdaMeta.setInst(inst);       <span class="hljs-comment">// å­˜Serviceå®ä¾‹</span>
            lambdaMeta.setServiceName(lambda.getImplMethodName());  <span class="hljs-comment">// å­˜æ–¹æ³•åï¼ˆæ¯”å¦‚queryUserï¼‰</span>
        } <span class="hljs-keyword">catch</span> (<span class="hljs-type">ClassNotFoundException</span> e) {
            <span class="hljs-comment">// æ‰¾ä¸åˆ°ç±»å°±æŠ›å¼‚å¸¸</span>
            <span class="hljs-keyword">throw</span> new <span class="hljs-type">RuntimeException</span>(<span class="hljs-string">"æ²¡æ‰¾åˆ°Serviceç±»ï¼š"</span> <span class="hljs-operator">+</span> tClassName, e);
        }
        <span class="hljs-keyword">return</span> lambdaMeta;
    }
    <span class="hljs-comment">// å°è£…Serviceä¿¡æ¯çš„å†…éƒ¨ç±»ï¼šå­˜Classã€å®ä¾‹ã€æ–¹æ³•å</span>
    <span class="hljs-meta">@lombok</span>.<span class="hljs-type">Data</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LambdaMeta</span>&lt;<span class="hljs-title class_">T</span>&gt; {
        <span class="hljs-keyword">private</span> <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt; clazz;          <span class="hljs-comment">// Serviceçš„Classï¼ˆæ¯”å¦‚UserService.classï¼‰</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">T</span> inst;                  <span class="hljs-comment">// Serviceå®ä¾‹ï¼ˆSpringé‡Œçš„Beanï¼‰</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> serviceName;      <span class="hljs-comment">// æ–¹æ³•åï¼ˆæ¯”å¦‚queryUserï¼‰</span>
    }
}
</code></pre>
<h2 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œå™¨ â€”â€”ServiceExecutor</h2>
<p>è¿™æ˜¯å¸®å’±ç»Ÿä¸€æ‰§è¡Œæ–¹æ³•ã€æ‰“æ—¥å¿—ã€å¤„ç†å¼‚å¸¸çš„ â€œæ‰“å·¥äººâ€ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.pro.wwcx.ledger.common.servicer;
<span class="hljs-keyword">import</span> lombok.Setter;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.pro.wwcx.ledger.common.dto.SerResult;
<span class="hljs-keyword">import</span> org.pro.wwcx.ledger.common.resolver.anno.SerialBiFunction;
<span class="hljs-comment">// æ‰§è¡ŒServiceæ–¹æ³•çš„ç±»ï¼Œç»Ÿä¸€æ‰“æ—¥å¿—ã€å¤„ç†å¼‚å¸¸</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Setter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceExecutor</span>&lt;T, U, R&gt; {
    <span class="hljs-keyword">private</span> SerialBiFunction&lt;T, U, R&gt; serviceFn;  <span class="hljs-comment">// è¦æ‰§è¡Œçš„Lambdaæ–¹æ³•</span>
    <span class="hljs-keyword">private</span> U param;                               <span class="hljs-comment">// æ–¹æ³•å‚æ•°</span>
    <span class="hljs-keyword">private</span> ServiceManager.LambdaMeta&lt;T&gt; lambdaMeta;  <span class="hljs-comment">// Serviceä¿¡æ¯</span>
    <span class="hljs-comment">// æ‰§è¡Œæ–¹æ³•çš„æ ¸å¿ƒé€»è¾‘</span>
    <span class="hljs-keyword">public</span> SerResult&lt;R&gt; <span class="hljs-title function_">callService</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è®°å½•å¼€å§‹æ—¶é—´ï¼Œæ–¹ä¾¿ç®—è€—æ—¶</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">String</span> <span class="hljs-variable">serviceName</span> <span class="hljs-operator">=</span> lambdaMeta.getClazz().getSimpleName();  <span class="hljs-comment">// æ¯”å¦‚UserService</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> lambdaMeta.getServiceName();             <span class="hljs-comment">// æ¯”å¦‚queryUser</span>
        log.info(<span class="hljs-string">"å¼€å§‹è°ƒç”¨ï¼š{}çš„{}æ–¹æ³•ï¼Œå‚æ•°ï¼š{}"</span>, serviceName, methodName, param);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// çœŸæ­£æ‰§è¡Œæ–¹æ³•ï¼šç”¨Serviceå®ä¾‹è°ƒç”¨Lambdaæ–¹æ³•</span>
            <span class="hljs-type">R</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> serviceFn.apply(lambdaMeta.getInst(), param);
            <span class="hljs-comment">// ç®—è€—æ—¶ï¼Œæ‰“æˆåŠŸæ—¥å¿—</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">costTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
            log.info(<span class="hljs-string">"è°ƒç”¨æˆåŠŸï¼š{}çš„{}æ–¹æ³•ï¼Œè€—æ—¶{}msï¼Œç»“æœï¼š{}"</span>,
                    serviceName, methodName, costTime, result);
            <span class="hljs-comment">// è¿”å›æˆåŠŸç»“æœ</span>
            <span class="hljs-keyword">return</span> SerResult.success(result);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å‡ºé”™äº†å°±æ‰“é”™è¯¯æ—¥å¿—ï¼Œè¿”å›å¤±è´¥ç»“æœ</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">costTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
            log.error(<span class="hljs-string">"è°ƒç”¨å¤±è´¥ï¼š{}çš„{}æ–¹æ³•ï¼Œè€—æ—¶{}ms"</span>,
                    serviceName, methodName, costTime, e);
            <span class="hljs-keyword">return</span> SerResult.fail(<span class="hljs-string">"è°ƒç”¨"</span> + serviceName + <span class="hljs-string">"çš„"</span> + methodName + <span class="hljs-string">"æ–¹æ³•å¤±è´¥ï¼š"</span> + e.getMessage());
        }
    }
}
</code></pre>
<h2 data-id="heading-10">ç¬¬å››æ­¥ï¼šæ€ä¹ˆç”¨ï¼Ÿä¸¾ä¸ªå®é™…ä¾‹å­</h2>
<p>å’±ä»¥ç”¨æˆ·æŸ¥è¯¢å’Œæ›´æ–°ä¸ºä¾‹ï¼Œçœ‹ Controller é‡Œæ€ä¹ˆå†™ï¼š</p>
<h3 data-id="heading-11">1. å…ˆå†™ä¸ª Serviceï¼ˆæ­£å¸¸å†™ï¼Œä¸ç”¨æ”¹ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> org.pro.wwcx.ledger.service;
<span class="hljs-keyword">import</span> org.pro.wwcx.ledger.dto.UserDTO;
<span class="hljs-keyword">import</span> org.pro.wwcx.ledger.dto.UserUpdateDTO;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-comment">// æ­£å¸¸çš„Serviceï¼Œè¯¥å’‹å†™å’‹å†™</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-comment">// æŸ¥ç”¨æˆ·ï¼šæ ¹æ®IDæŸ¥</span>
    <span class="hljs-keyword">public</span> UserDTO queryUser(<span class="hljs-built_in">Long</span> userId) {
        <span class="hljs-comment">// è¿™é‡Œæ¨¡æ‹ŸæŸ¥æ•°æ®åº“ï¼Œå®é™…é¡¹ç›®é‡Œæ¢JDBC/MyBatis</span>
        UserDTO user = new UserDTO();
        user.setUserId(userId);
        user.setUserName(<span class="hljs-string">"å¼ ä¸‰"</span>);
        user.setAge(<span class="hljs-number">25</span>);
        <span class="hljs-keyword">return</span> user;
    }
    <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ï¼šä¼ IDå’Œæ›´æ–°å‚æ•°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">Boolean</span> updateUser(<span class="hljs-built_in">Long</span> userId, UserUpdateDTO updateDTO) {
        <span class="hljs-comment">// è¿™é‡Œæ¨¡æ‹Ÿæ›´æ–°æ•°æ®åº“</span>
        log.info(<span class="hljs-string">"æ›´æ–°ç”¨æˆ·{}çš„ä¿¡æ¯ï¼š{}"</span>, userId, updateDTO);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// è¿”å›æ›´æ–°æˆåŠŸ</span>
    }
}
</code></pre>
<h3 data-id="heading-12">2. Controller é‡Œè°ƒç”¨ï¼ˆé‡ç‚¹çœ‹å˜åŒ–ï¼‰</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.pro</span><span class="hljs-selector-class">.wwcx</span><span class="hljs-selector-class">.ledger</span><span class="hljs-selector-class">.controller</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.pro</span><span class="hljs-selector-class">.wwcx</span><span class="hljs-selector-class">.ledger</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.dto</span><span class="hljs-selector-class">.SerResult</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.pro</span><span class="hljs-selector-class">.wwcx</span><span class="hljs-selector-class">.ledger</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.servicer</span><span class="hljs-selector-class">.ServiceManager</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.pro</span><span class="hljs-selector-class">.wwcx</span><span class="hljs-selector-class">.ledger</span><span class="hljs-selector-class">.dto</span><span class="hljs-selector-class">.UserDTO</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.pro</span><span class="hljs-selector-class">.wwcx</span><span class="hljs-selector-class">.ledger</span><span class="hljs-selector-class">.dto</span><span class="hljs-selector-class">.UserUpdateDTO</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.pro</span><span class="hljs-selector-class">.wwcx</span><span class="hljs-selector-class">.ledger</span><span class="hljs-selector-class">.service</span><span class="hljs-selector-class">.UserService</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.bind</span><span class="hljs-selector-class">.annotation</span>.*;
@<span class="hljs-selector-tag">RestController</span>
@<span class="hljs-selector-tag">RequestMapping</span>(<span class="hljs-string">"/user"</span>)
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">UserController</span> {
    <span class="hljs-comment">// æŸ¥ç”¨æˆ·ï¼šä¸ç”¨æ³¨å…¥UserServiceï¼ä¸€è¡Œæå®š</span>
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/{userId}"</span>)
    public SerResult&lt;UserDTO&gt; <span class="hljs-built_in">getUser</span>(<span class="hljs-variable">@PathVariable</span> Long userId) {
        <span class="hljs-comment">// ç›´æ¥ä¼ Lambdaï¼ˆUserService::queryUserï¼‰å’Œå‚æ•°ï¼ˆuserIdï¼‰</span>
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ServiceManager</span><span class="hljs-selector-class">.call</span>(<span class="hljs-attribute">UserService</span>::queryUser, userId);
    }
    <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ï¼šåŒæ ·ä¸ç”¨æ³¨å…¥</span>
    @<span class="hljs-selector-tag">PutMapping</span>(<span class="hljs-string">"/{userId}"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">SerResult</span>&lt;<span class="hljs-selector-tag">Boolean</span>&gt; <span class="hljs-selector-tag">updateUser</span>(
            <span class="hljs-variable">@PathVariable</span> Long userId,
            <span class="hljs-variable">@RequestBody</span> UserUpdateDTO updateDTO) {
        <span class="hljs-comment">// è¿™é‡Œè¦æ³¨æ„ï¼šå› ä¸ºupdateUseræœ‰ä¸¤ä¸ªå‚æ•°ï¼Œæ‰€ä»¥è¦æ˜¾å¼æŒ‡å®šLambdaç±»å‹</span>
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ServiceManager</span><span class="hljs-selector-class">.call</span>(
                (UserService service, UserUpdateDTO dto) -&gt; service.<span class="hljs-built_in">updateUser</span>(userId, dto),
                updateDTO
        );
    }
}
</code></pre>
<h3 data-id="heading-13">3. è·‘èµ·æ¥çœ‹çœ‹æ•ˆæœ</h3>
<ul>
<li>æŸ¥ç”¨æˆ·çš„æ—¶å€™ï¼Œæ—¥å¿—ä¼šè‡ªåŠ¨æ‰“ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">å¼€å§‹è°ƒç”¨ï¼šUserServiceçš„queryUseræ–¹æ³•ï¼Œå‚æ•°ï¼š1001
è°ƒç”¨æˆåŠŸï¼šUserServiceçš„queryUseræ–¹æ³•ï¼Œè€—æ—¶5msï¼Œç»“æœï¼šUserDTO(<span class="hljs-attr">userId</span>=<span class="hljs-number">1001</span>, userName=å¼ ä¸‰, age=<span class="hljs-number">25</span>)
</code></pre>
<ul>
<li>è¦æ˜¯å‡ºé”™äº†ï¼Œæ¯”å¦‚ä¼ ä¸ªä¸å­˜åœ¨çš„ç”¨æˆ· IDï¼ˆå‡è®¾æ•°æ®åº“æŸ¥ä¸åˆ°ä¼šæŠ›å¼‚å¸¸ï¼‰ï¼Œæ—¥å¿—ä¼šæ‰“é”™è¯¯ä¿¡æ¯ï¼Œè¿”å›ç»™å‰ç«¯çš„ç»“æœæ˜¯ï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è°ƒç”¨UserServiceçš„queryUseræ–¹æ³•å¤±è´¥ï¼šç”¨æˆ·ä¸å­˜åœ¨"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-14">è¿™ç»„ä»¶çš„å¥½å¤„ï¼šæ€»ç»“ä¸€ä¸‹</h2>
<ol>
<li><strong>ä¸ç”¨å†å†™ @Autowired</strong>ï¼šController é‡Œå¹²å¹²å‡€å‡€ï¼Œå†ä¹Ÿä¸ç”¨æ³¨å…¥ä¸€å † Serviceï¼›</li>
</ol>

<ol start="2">
<li><strong>ç»Ÿä¸€æ—¥å¿— / å¼‚å¸¸</strong>ï¼šæƒ³æ”¹æ—¥å¿—æ ¼å¼ã€åŠ æƒé™æ ¡éªŒï¼Œåªéœ€è¦æ”¹ ServiceExecutorï¼Œä¸ç”¨æ”¹æ¯ä¸ªæ–¹æ³•ï¼›</li>
</ol>

<ol start="3">
<li><strong>ç¼“å­˜ä¼˜åŒ–</strong>ï¼šè§£æè¿‡çš„ Service ä¿¡æ¯ä¼šç¼“å­˜ï¼Œä¸‹æ¬¡è°ƒç”¨æ›´å¿«ï¼›</li>
</ol>

<ol start="4">
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šå†™ Lambda çš„æ—¶å€™ï¼Œæ–¹æ³•åé”™äº†ç¼–è¯‘å°±æŠ¥é”™ï¼Œä¸ç”¨ç­‰åˆ°è¿è¡Œæ‰å‘ç°ã€‚</li>
</ol>
<h2 data-id="heading-15">æ³¨æ„äº‹é¡¹ï¼šé¿å‘æŒ‡å—</h2>
<ol>
<li><strong>JDK ç‰ˆæœ¬</strong>ï¼šç”¨ JDK8 åŠä»¥ä¸Šï¼ŒLambda è¡¨è¾¾å¼æ˜¯ JDK8 æ‰æœ‰çš„ï¼›</li>
</ol>

<ol start="2">
<li><strong>Service è¦åŠ  @Service</strong>ï¼šSpring æ‰èƒ½æ‰«æåˆ°ï¼Œä¸ç„¶ SpringUtil æ‹¿ä¸åˆ°å®ä¾‹ï¼›</li>
</ol>

<ol start="3">
<li><strong>å¤šå®ç°ç±»çš„æƒ…å†µ</strong>ï¼šå¦‚æœä¸€ä¸ªæ¥å£æœ‰å¤šä¸ªå®ç°ï¼ˆæ¯”å¦‚ UserService æœ‰ UserServiceImpl1 å’Œ UserServiceImpl2ï¼‰ï¼Œéœ€è¦åœ¨ SpringUtil é‡ŒåŠ æŒ‰åç§°æ‹¿ Bean çš„æ–¹æ³•ï¼Œå…·ä½“å¯ä»¥è¯„è®ºåŒºé—®æˆ‘ã€‚</li>
</ol>
<p>æœ€åè¯´æ˜ä¸‹ï¼Œæ–‡æ¡£é‡Œçš„ä»£ç æ˜¯æˆ‘ä¸€æ­¥æ­¥è®¾è®¡å‡ºæ¥çš„ï¼Œæ–‡æ¡£æ¶¦è‰²éƒ¨åˆ†å†…å®¹å€ŸåŠ©è±†åŒ…å·¥å…·å¸®å¿™æ•´ç†ï¼Œæ–¹ä¾¿å¤§å®¶é˜…è¯»ã€‚å®Œæ•´çš„ä»£ç æˆ‘å·²ç»æ•´ç†å¥½äº†ï¼Œç›´æ¥å¤åˆ¶åˆ°é¡¹ç›®é‡Œï¼Œæ”¹æ”¹åŒ…åå°±èƒ½ç”¨ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œæˆ–è€…æƒ³æ‰©å±•åŠŸèƒ½ï¼ˆæ¯”å¦‚åŠ ç¼“å­˜è¿‡æœŸã€å¤šå‚æ•°æ”¯æŒï¼‰ï¼Œè¯„è®ºåŒºä¸€èµ·èŠï½</p>
<p>è§‰å¾—æœ‰ç”¨çš„è¯ï¼Œç‚¹ä¸ªèµå†èµ°å‘—ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº .ibd æ–‡ä»¶æ¢å¤ MySQL æ•°æ®å…¨æµç¨‹]]></title>    <link>https://juejin.cn/post/7575031395861495854</link>    <guid>https://juejin.cn/post/7575031395861495854</guid>    <pubDate>2025-11-21T18:22:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575031395861495854" data-draft-id="7575004291833069619" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº .ibd æ–‡ä»¶æ¢å¤ MySQL æ•°æ®å…¨æµç¨‹"/> <meta itemprop="keywords" content="åç«¯,GitHub"/> <meta itemprop="datePublished" content="2025-11-21T18:22:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹å¤œ"/> <meta itemprop="url" content="https://juejin.cn/user/4318537404122941"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº .ibd æ–‡ä»¶æ¢å¤ MySQL æ•°æ®å…¨æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4318537404122941/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹å¤œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T18:22:31.000Z" title="Fri Nov 21 2025 18:22:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>.ibd</code> æ–‡ä»¶æ˜¯ InnoDB å­˜å‚¨å¼•æ“çš„æ ¸å¿ƒæ•°æ®æ–‡ä»¶ï¼Œå­˜å‚¨è¡¨çš„è¡Œæ•°æ®ã€ç´¢å¼•åŠå…ƒä¿¡æ¯ã€‚åœ¨ä»…æœ‰ <code>.ibd</code> æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯é€šè¿‡ä»¥ä¸‹æµç¨‹æ¢å¤æ•°æ®ã€‚</p>
<h4 data-id="heading-0">ä¸€ã€.ibd æ–‡ä»¶åŸºç¡€è®¤çŸ¥</h4>
<ol>
<li><strong>è¡¨ç©ºé—´æ¨¡å¼</strong></li>
</ol>
<ul>
<li>
<ul>
<li><strong>ç‹¬ç«‹è¡¨ç©ºé—´</strong>ï¼ˆMySQL 5.6+ é»˜è®¤ï¼‰ï¼šæ¯å¼ è¡¨å¯¹åº”ç‹¬ç«‹ <code>.ibd</code> æ–‡ä»¶ï¼ˆå¦‚ <code>user.ibd</code>ï¼‰ï¼ŒåŒ…å«è¡¨çš„å®Œæ•´æ•°æ®ã€ç´¢å¼•åŠå…ƒæ•°æ®ï¼Œé»˜è®¤å­˜å‚¨äº <code>datadir/æ•°æ®åº“å/</code> ç›®å½•ã€‚</li>
<li><strong>ç³»ç»Ÿè¡¨ç©ºé—´</strong>ï¼ˆæ—§æ¨¡å¼ï¼‰ï¼šæ‰€æœ‰è¡¨æ•°æ®é›†ä¸­å­˜å‚¨äº <code>ibdata1</code> ç­‰å…±äº«æ–‡ä»¶ï¼Œæ— ç‹¬ç«‹ <code>.ibd</code> æ–‡ä»¶ã€‚</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>æ ¸å¿ƒç‰¹æ€§</strong></li>
</ol>
<ul>
<li>
<ul>
<li>äºŒè¿›åˆ¶æ ¼å¼ï¼Œéœ€é€šè¿‡ MySQL å‘½ä»¤æˆ–ä¸“ç”¨å·¥å…·è§£æï¼›</li>
<li>ä¾èµ– redo æ—¥å¿—ä¿éšœäº‹åŠ¡å®‰å…¨ï¼Œé€šè¿‡ undo æ—¥å¿—æ”¯æŒ MVCCï¼›</li>
<li>æœ€å° I/O å•ä½ä¸º 16KB é¡µï¼Œç”±åŒºï¼ˆ64 é¡µï¼‰å’Œæ®µï¼ˆç´¢å¼•å¯¹åº”çš„åŒºé›†åˆï¼‰ç»„æˆã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-1">äºŒã€æ¢å¤å·¥å…·ä¸æµç¨‹</h4>
<p>ä½¿ç”¨å¼€æºå·¥å…· <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fddcw%2Fibd2sql" target="_blank" title="https://github.com/ddcw/ibd2sql" ref="nofollow noopener noreferrer">ibd2sql</a> è§£æ <code>.ibd</code> æ–‡ä»¶ï¼Œæ”¯æŒæå–è¡¨ç»“æ„ï¼ˆDDLï¼‰å’Œæ•°æ®ï¼ˆSQLï¼‰ã€‚</p>
<h5 data-id="heading-2">1. å·¥å…·å‡†å¤‡</h5>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># ä¸‹è½½å·¥å…·</span>
wget <span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/ddcw</span><span class="hljs-regexp">/ibd2sql/archive</span><span class="hljs-regexp">/refs/heads</span><span class="hljs-regexp">/ibd2sql-v2.x.zip
unzip ibd2sql-v2.x.zip
cd ibd2sql-ibd2sql-v2.x/</span>

<span class="hljs-comment"># ç¡®è®¤ Python3 ç¯å¢ƒ</span>
python --version  <span class="hljs-comment"># éœ€ Python 3.x</span>
</code></pre>
<h5 data-id="heading-3">2. å•æ–‡ä»¶è§£æ</h5>
<pre><code class="hljs language-css" lang="css">python3 <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.py</span> your_file<span class="hljs-selector-class">.ibd</span> <span class="hljs-attr">--sql</span> <span class="hljs-attr">--ddl</span>
</code></pre>
<p>æ‰§è¡Œåç”ŸæˆåŒ…å«è¡¨ç»“æ„å’Œæ•°æ®çš„ SQL æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-4">ä¸‰ã€æ‰¹é‡å¤„ç†è„šæœ¬</h4>
<p>å½“å­˜åœ¨å¤§é‡ <code>.ibd</code> æ–‡ä»¶æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹è„šæœ¬æ‰¹é‡è§£æï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> subprocess
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path

<span class="hljs-comment"># ===================== é…ç½®å‚æ•°ï¼ˆæŒ‰éœ€ä¿®æ”¹ï¼‰=====================</span>
ROOT_DIR = Path(__file__).resolve().parent
SOURCE_IBD_DIR = Path(os.path.expanduser(<span class="hljs-string">"./input_ibd"</span>)).resolve()  <span class="hljs-comment"># æº ibd ç›®å½•</span>
OUTPUT_SQL_DIR = Path(os.path.expanduser(<span class="hljs-string">"./output_sql"</span>)).resolve()  <span class="hljs-comment"># è¾“å‡º SQL ç›®å½•</span>
PYTHON_CMD = sys.executable <span class="hljs-keyword">or</span> <span class="hljs-string">"python3"</span>  <span class="hljs-comment"># ä½¿ç”¨å½“å‰ python</span>
MAIN_SCRIPT = ROOT_DIR / <span class="hljs-string">"main.py"</span>
<span class="hljs-comment"># ===============================================================</span>

OUTPUT_SQL_DIR.mkdir(parents=<span class="hljs-literal">True</span>, exist_ok=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># æ—¥å¿—æ–‡ä»¶ï¼ˆmacOS ä¸‹é»˜è®¤ç¼–ç ä¸º UTF-8ï¼Œæ— éœ€é¢å¤–è®¾ç½®ï¼‰</span>
LOG_FILE = OUTPUT_SQL_DIR / <span class="hljs-string">f"parse_log_<span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Y%m%d_%H%M%S'</span>)}</span>.log"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">info, level=<span class="hljs-string">"INFO"</span></span>):
    <span class="hljs-string">"""æ—¥å¿—è¾“å‡ºï¼ˆæ§åˆ¶å° + æ–‡ä»¶ï¼‰"""</span>
    msg = <span class="hljs-string">f"[<span class="hljs-subst">{level}</span>] [<span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Y-%m-%d %H:%M:%S'</span>)}</span>] <span class="hljs-subst">{info}</span>"</span>
    <span class="hljs-built_in">print</span>(msg)
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(LOG_FILE, <span class="hljs-string">"a"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
        f.write(msg + <span class="hljs-string">"\n"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_single_ibd</span>(<span class="hljs-params">ibd_file_path: Path</span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-string">"""è°ƒç”¨å®˜æ–¹ main.py è§£æå•ä¸ª ibdï¼Œå¹¶å°† stdout å†™å…¥åŒå .sql æ–‡ä»¶"""</span>
    table_name = ibd_file_path.stem
    sql_file = OUTPUT_SQL_DIR / <span class="hljs-string">f"<span class="hljs-subst">{table_name}</span>.sql"</span>
    log(<span class="hljs-string">f"å¼€å§‹è§£æè¡¨ï¼š<span class="hljs-subst">{table_name}</span>ï¼ˆæ–‡ä»¶ï¼š<span class="hljs-subst">{ibd_file_path.name}</span>ï¼‰"</span>)

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> MAIN_SCRIPT.exists():
        log(<span class="hljs-string">f"âŒ æœªæ‰¾åˆ° main.pyï¼ŒæœŸæœ›è·¯å¾„ï¼š<span class="hljs-subst">{MAIN_SCRIPT}</span>"</span>, level=<span class="hljs-string">"ERROR"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

    cmd = [
        PYTHON_CMD,
        <span class="hljs-built_in">str</span>(MAIN_SCRIPT),
        <span class="hljs-built_in">str</span>(ibd_file_path),
        <span class="hljs-string">"--sql"</span>,
        <span class="hljs-string">"--ddl"</span>,
    ]

    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(sql_file, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> sql_fp:
            proc = subprocess.run(
                cmd,
                stdout=sql_fp,
                stderr=subprocess.PIPE,
                text=<span class="hljs-literal">True</span>,
                cwd=ROOT_DIR,
                check=<span class="hljs-literal">False</span>,
            )
        <span class="hljs-keyword">if</span> proc.returncode != <span class="hljs-number">0</span>:
            log(<span class="hljs-string">f"âŒ è§£æå¤±è´¥ï¼ˆé€€å‡ºç  <span class="hljs-subst">{proc.returncode}</span>ï¼‰ï¼š<span class="hljs-subst">{proc.stderr.strip()}</span>"</span>, level=<span class="hljs-string">"ERROR"</span>)
            <span class="hljs-keyword">if</span> sql_file.exists():
                sql_file.unlink()
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">if</span> proc.stderr.strip():
            log(<span class="hljs-string">f"âš ï¸  å‘½ä»¤è­¦å‘Šï¼š<span class="hljs-subst">{proc.stderr.strip()}</span>"</span>, level=<span class="hljs-string">"WARNING"</span>)
        log(<span class="hljs-string">f"âœ… SQL ç”ŸæˆæˆåŠŸï¼š<span class="hljs-subst">{sql_file}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    <span class="hljs-keyword">except</span> FileNotFoundError <span class="hljs-keyword">as</span> exc:
        log(<span class="hljs-string">f"âŒ å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼š<span class="hljs-subst">{exc}</span>"</span>, level=<span class="hljs-string">"ERROR"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> exc:
        log(<span class="hljs-string">f"âŒ æœªçŸ¥å¼‚å¸¸ï¼š<span class="hljs-subst">{exc}</span>"</span>, level=<span class="hljs-string">"ERROR"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    log(<span class="hljs-string">"ibd2sql æ‰¹é‡è§£æä»»åŠ¡ï¼ˆmacOS ç‰ˆï¼‰å¯åŠ¨"</span>)
    log(<span class="hljs-string">f"æº ibd ç›®å½•ï¼š<span class="hljs-subst">{SOURCE_IBD_DIR}</span>"</span>)
    log(<span class="hljs-string">f"è¾“å‡º SQL ç›®å½•ï¼š<span class="hljs-subst">{OUTPUT_SQL_DIR}</span>"</span>)
    log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span> + <span class="hljs-string">"\n"</span>)

    <span class="hljs-comment"># éå†æ‰€æœ‰ .ibd æ–‡ä»¶ï¼ˆè‡ªåŠ¨è¿‡æ»¤é ibd æ–‡ä»¶ï¼‰</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> SOURCE_IBD_DIR.is_dir():
        log(<span class="hljs-string">"âš ï¸  æºç›®å½•ä¸å­˜åœ¨ï¼Œè¯·æ£€æŸ¥é…ç½®ï¼"</span>, level=<span class="hljs-string">"ERROR"</span>)
        sys.exit(<span class="hljs-number">1</span>)

    ibd_files = <span class="hljs-built_in">sorted</span>(SOURCE_IBD_DIR.glob(<span class="hljs-string">"*.ibd"</span>))
    total_count = <span class="hljs-built_in">len</span>(ibd_files)
    success_count = <span class="hljs-number">0</span>
    fail_count = <span class="hljs-number">0</span>
    fail_tables = []

    <span class="hljs-keyword">if</span> total_count == <span class="hljs-number">0</span>:
        log(<span class="hljs-string">"âš ï¸  æœªå‘ç° ibd æ–‡ä»¶ï¼Œè¯·æ£€æŸ¥æºç›®å½•æ˜¯å¦æ­£ç¡®ï¼"</span>, level=<span class="hljs-string">"WARNING"</span>)
        sys.exit(<span class="hljs-number">1</span>)

    log(<span class="hljs-string">f"å‘ç° <span class="hljs-subst">{total_count}</span> ä¸ª ibd æ–‡ä»¶ï¼Œå¼€å§‹æ‰¹é‡è§£æ...\n"</span>)

    <span class="hljs-keyword">for</span> ibd_path <span class="hljs-keyword">in</span> ibd_files:
        <span class="hljs-keyword">if</span> parse_single_ibd(ibd_path):
            success_count += <span class="hljs-number">1</span>
        <span class="hljs-keyword">else</span>:
            fail_count += <span class="hljs-number">1</span>
            fail_tables.append(ibd_path.stem)
        log(<span class="hljs-string">"-"</span> * <span class="hljs-number">40</span> + <span class="hljs-string">"\n"</span>)

    <span class="hljs-comment"># è¾“å‡ºç»Ÿè®¡ç»“æœ</span>
    log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    log(<span class="hljs-string">"æ‰¹é‡è§£æä»»åŠ¡ç»“æŸ"</span>)
    log(<span class="hljs-string">f"æ€»æ–‡ä»¶æ•°ï¼š<span class="hljs-subst">{total_count}</span>"</span>)
    log(<span class="hljs-string">f"æˆåŠŸè§£æï¼š<span class="hljs-subst">{success_count}</span> ä¸ª"</span>)
    log(<span class="hljs-string">f"è§£æå¤±è´¥ï¼š<span class="hljs-subst">{fail_count}</span> ä¸ª"</span>)
    <span class="hljs-keyword">if</span> fail_tables:
        log(<span class="hljs-string">f"å¤±è´¥è¡¨åï¼š<span class="hljs-subst">{<span class="hljs-string">','</span>.join(fail_tables)}</span>"</span>, level=<span class="hljs-string">"ERROR"</span>)
    log(<span class="hljs-string">f"æ—¥å¿—æ–‡ä»¶ï¼š<span class="hljs-subst">{LOG_FILE}</span>"</span>)
    log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
</code></pre>
<h4 data-id="heading-5">å››ã€SQL æ–‡ä»¶ä¿®æ­£</h4>
<p>è§£æåçš„ SQL å¯èƒ½å­˜åœ¨æ ¼å¼é—®é¢˜ï¼Œéœ€è¿›ä¸€æ­¥å¤„ç†ï¼š</p>
<h5 data-id="heading-6">1. ç§»é™¤ JSON å­—æ®µçš„å­—ç¬¦é›†å£°æ˜</h5>
<p>MySQL JSON ç±»å‹ä¸ºäºŒè¿›åˆ¶å­˜å‚¨ï¼Œæ— éœ€æŒ‡å®šå­—ç¬¦é›†/æ’åºè§„åˆ™ï¼Œè„šæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> argparse
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">import</span> re

<span class="hljs-comment"># é»˜è®¤è¾“å‡ºç›®å½•ï¼Œä¸ batch_ibd2sql.py ä¿æŒä¸€è‡´</span>
DEFAULT_OUTPUT_SQL_DIR = Path(__file__).resolve().parent / <span class="hljs-string">"output_sql"</span>

JSON_KEYWORD = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r"\bjson\b"</span>, re.IGNORECASE)
CHARSET_PATTERN = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r"\s+CHARACTER\s+SET\s+\w+"</span>, re.IGNORECASE)
COLLATE_PATTERN = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r"\s+COLLATE\s+\w+"</span>, re.IGNORECASE)
COLUMN_NAME_PATTERN = re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r"`([^`]+)`"</span>)


<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProcessResult</span>:
    file_path: Path
    columns: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>]
    modified: <span class="hljs-built_in">bool</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">clean_line</span>(<span class="hljs-params">line: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span>]:
    <span class="hljs-string">"""
    è‹¥è¯¥è¡Œå®šä¹‰ JSON å­—æ®µä¸”æŒ‡å®šäº†å­—ç¬¦é›†/æ’åºè§„åˆ™ï¼Œåˆ™ç§»é™¤ç›¸å…³å£°æ˜ã€‚
    è¿”å› (æ–°è¡Œå†…å®¹, å­—æ®µåæˆ– None)ã€‚
    """</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> JSON_KEYWORD.search(line):
        <span class="hljs-keyword">return</span> line, <span class="hljs-literal">None</span>

    has_charset = <span class="hljs-string">"CHARACTER SET"</span> <span class="hljs-keyword">in</span> line.upper()
    has_collate = <span class="hljs-string">"COLLATE"</span> <span class="hljs-keyword">in</span> line.upper()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (has_charset <span class="hljs-keyword">or</span> has_collate):
        <span class="hljs-keyword">return</span> line, <span class="hljs-literal">None</span>

    new_line = CHARSET_PATTERN.sub(<span class="hljs-string">""</span>, line)
    new_line = COLLATE_PATTERN.sub(<span class="hljs-string">""</span>, new_line)

    <span class="hljs-keyword">if</span> new_line == line:
        <span class="hljs-keyword">return</span> line, <span class="hljs-literal">None</span>

    <span class="hljs-keyword">match</span> = COLUMN_NAME_PATTERN.search(line)
    column_name = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"&lt;unknown&gt;"</span>
    <span class="hljs-keyword">return</span> new_line, column_name


<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_sql_file</span>(<span class="hljs-params">file_path: Path, dry_run: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">False</span></span>) -&gt; ProcessResult:
    original = file_path.read_text(encoding=<span class="hljs-string">"utf-8"</span>)
    lines = original.splitlines()
    trailing_newline = original.endswith(<span class="hljs-string">"\n"</span>)

    processed_lines = []
    touched_columns: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>] = []

    <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:
        new_line, column = clean_line(line)
        processed_lines.append(new_line)
        <span class="hljs-keyword">if</span> column <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            touched_columns.append(column)

    modified = <span class="hljs-built_in">bool</span>(touched_columns)
    <span class="hljs-keyword">if</span> modified <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> dry_run:
        new_content = <span class="hljs-string">"\n"</span>.join(processed_lines)
        <span class="hljs-keyword">if</span> trailing_newline:
            new_content += <span class="hljs-string">"\n"</span>
        file_path.write_text(new_content, encoding=<span class="hljs-string">"utf-8"</span>)

    <span class="hljs-keyword">return</span> ProcessResult(file_path=file_path, columns=touched_columns, modified=modified)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">iter_sql_files</span>(<span class="hljs-params">root_dir: Path</span>):
    <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> <span class="hljs-built_in">sorted</span>(root_dir.rglob(<span class="hljs-string">"*.sql"</span>)):
        <span class="hljs-keyword">if</span> path.is_file():
            <span class="hljs-keyword">yield</span> path


<span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_args</span>():
    parser = argparse.ArgumentParser(
        description=<span class="hljs-string">"ç§»é™¤ SQL æ–‡ä»¶ä¸­ JSON å­—æ®µçš„å­—ç¬¦é›†/æ’åºè§„åˆ™å£°æ˜ï¼ˆMySQL JSON å†…ç½®äºŒè¿›åˆ¶ç±»å‹æ— éœ€è®¾å®šå­—ç¬¦é›†ï¼‰ã€‚"</span>
    )
    parser.add_argument(
        <span class="hljs-string">"-t"</span>,
        <span class="hljs-string">"--target"</span>,
        default=<span class="hljs-built_in">str</span>(DEFAULT_OUTPUT_SQL_DIR),
        <span class="hljs-built_in">help</span>=<span class="hljs-string">"å¾…æ‰«æçš„ SQL ç›®å½•ï¼Œé»˜è®¤ä¸ºé¡¹ç›® output_sql"</span>,
    )
    parser.add_argument(
        <span class="hljs-string">"--dry-run"</span>,
        action=<span class="hljs-string">"store_true"</span>,
        <span class="hljs-built_in">help</span>=<span class="hljs-string">"ä»…æŠ¥å‘Šå°†è¦ä¿®æ”¹çš„å†…å®¹ï¼Œä¸å®é™…å†™å›æ–‡ä»¶"</span>,
    )
    <span class="hljs-keyword">return</span> parser.parse_args()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    args = parse_args()
    target_dir = Path(args.target).expanduser().resolve()

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> target_dir.is_dir():
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[ERROR] ç›®å½•ä¸å­˜åœ¨ï¼š<span class="hljs-subst">{target_dir}</span>"</span>, file=sys.stderr)
        sys.exit(<span class="hljs-number">1</span>)

    has_changes = <span class="hljs-literal">False</span>
    total_files = <span class="hljs-number">0</span>
    total_columns = <span class="hljs-number">0</span>

    <span class="hljs-keyword">for</span> sql_file <span class="hljs-keyword">in</span> iter_sql_files(target_dir):
        total_files += <span class="hljs-number">1</span>
        result = process_sql_file(sql_file, dry_run=args.dry_run)
        <span class="hljs-keyword">if</span> result.modified:
            has_changes = <span class="hljs-literal">True</span>
            total_columns += <span class="hljs-built_in">len</span>(result.columns)
            state = <span class="hljs-string">"DRY-RUN"</span> <span class="hljs-keyword">if</span> args.dry_run <span class="hljs-keyword">else</span> <span class="hljs-string">"UPDATED"</span>
            columns_str = <span class="hljs-string">", "</span>.join(result.columns)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[<span class="hljs-subst">{state}</span>] <span class="hljs-subst">{sql_file}</span> -&gt; <span class="hljs-subst">{columns_str}</span>"</span>)

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> has_changes:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[INFO] æœªæ£€æµ‹åˆ°éœ€è¦å¤„ç†çš„ JSON å­—æ®µï¼Œæ‰«ææ–‡ä»¶æ•°ï¼š<span class="hljs-subst">{total_files}</span>"</span>)
    <span class="hljs-keyword">else</span>:
        mode = <span class="hljs-string">"dry-run"</span> <span class="hljs-keyword">if</span> args.dry_run <span class="hljs-keyword">else</span> <span class="hljs-string">"write"</span>
        <span class="hljs-built_in">print</span>(
            <span class="hljs-string">f"[SUMMARY] æ¨¡å¼=<span class="hljs-subst">{mode}</span>, å¤„ç†æ–‡ä»¶æ•°=<span class="hljs-subst">{total_files}</span>, ä¿®æ­£å­—æ®µæ•°=<span class="hljs-subst">{total_columns}</span>"</span>
        )


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h5 data-id="heading-7">2. ä¿®å¤ç´¢å¼•æ³¨é‡Šæ ¼å¼ï¼ˆå¯é€‰ï¼‰</h5>
<p>éƒ¨åˆ†è¡¨å¯èƒ½å­˜åœ¨ç´¢å¼•æ³¨é‡Šç¼ºå°‘ <code>COMMENT</code> å…³é”®å­—æˆ–å¼•å·çš„é—®é¢˜ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ä¿®å¤ï¼ˆæœªå®Œå…¨æµ‹è¯•ï¼Œå°‘é‡å¼‚å¸¸è¡¨å»ºè®®æ‰‹åŠ¨ä¿®æ”¹ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># -*- coding: utf-8 -*-</span>
<span class="hljs-string">"""
ä¿®å¤ SQL æ–‡ä»¶ä¸­ KEY/UNIQUE KEY/PRIMARY KEY æ³¨é‡Šç¼ºå°‘ COMMENT å…³é”®å­—çš„é—®é¢˜
å°†ç±»ä¼¼: KEY `xxx` (`column`) æ³¨é‡Šå†…å®¹
ä¿®æ”¹ä¸º: KEY `xxx` (`column`) COMMENT 'æ³¨é‡Šå†…å®¹'
åŒæ—¶å¤„ç†: UNIQUE KEY, KEY, PRIMARY KEY ç­‰æ‰€æœ‰ç´¢å¼•å®šä¹‰
"""</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Tuple</span>, <span class="hljs-type">Dict</span>

<span class="hljs-comment"># ===================== é…ç½®å‚æ•° =====================</span>
OUTPUT_SQL_DIR = Path(<span class="hljs-string">"./output_sql"</span>).resolve()  <span class="hljs-comment"># è¾“å‡º SQL ç›®å½•</span>
<span class="hljs-comment"># ===============================================================</span>

<span class="hljs-comment"># æ—¥å¿—æ–‡ä»¶</span>
LOG_FILE = OUTPUT_SQL_DIR / <span class="hljs-string">f"fix_unique_key_comment_log_<span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Y%m%d_%H%M%S'</span>)}</span>.log"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">info: <span class="hljs-built_in">str</span>, level: <span class="hljs-built_in">str</span> = <span class="hljs-string">"INFO"</span></span>):
    <span class="hljs-string">"""æ—¥å¿—è¾“å‡ºï¼ˆæ§åˆ¶å° + æ–‡ä»¶ï¼‰"""</span>
    msg = <span class="hljs-string">f"[<span class="hljs-subst">{level}</span>] [<span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Y-%m-%d %H:%M:%S'</span>)}</span>] <span class="hljs-subst">{info}</span>"</span>
    <span class="hljs-built_in">print</span>(msg)
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(LOG_FILE, <span class="hljs-string">"a"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
        f.write(msg + <span class="hljs-string">"\n"</span>)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">find_key_without_comment</span>(<span class="hljs-params">content: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Tuple</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]]:
    <span class="hljs-string">"""
    æŸ¥æ‰¾æ‰€æœ‰ç¼ºå°‘ COMMENT å…³é”®å­—çš„ KEY å®šä¹‰ï¼ˆåŒ…æ‹¬ UNIQUE KEY, KEY, PRIMARY KEYï¼‰
    
    è¿”å›: [(è¡Œå·, åŸå§‹è¡Œ, KEYç±»å‹, åŒ¹é…çš„æ³¨é‡Šå†…å®¹), ...]
    """</span>
    issues = []
    lines = content.split(<span class="hljs-string">'\n'</span>)
    
    <span class="hljs-keyword">for</span> line_num, line <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(lines, <span class="hljs-number">1</span>):
        <span class="hljs-comment"># è·³è¿‡å·²ç»æœ‰ COMMENT å…³é”®å­—çš„è¡Œ</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'COMMENT'</span> <span class="hljs-keyword">in</span> line.upper():
            <span class="hljs-keyword">continue</span>
        
        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦åŒ…å« KEY å®šä¹‰</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'KEY'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> line.upper():
            <span class="hljs-keyword">continue</span>
        
        line_upper = line.upper()
        <span class="hljs-keyword">match</span> = <span class="hljs-literal">None</span>
        key_type = <span class="hljs-literal">None</span>
        
        <span class="hljs-comment"># æŒ‰ä¼˜å…ˆçº§åŒ¹é…ï¼šPRIMARY KEY &gt; UNIQUE KEY &gt; KEY</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'PRIMARY KEY'</span> <span class="hljs-keyword">in</span> line_upper:
            <span class="hljs-keyword">match</span> = re.search(
                <span class="hljs-string">r'(PRIMARY\s+KEY\s+[^)]+))\s+([^,\n]+?)(?=\s*[,)]|\s*$)'</span>,
                line,
                re.IGNORECASE
            )
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
                key_type = <span class="hljs-string">'PRIMARY KEY'</span>
        <span class="hljs-keyword">elif</span> <span class="hljs-string">'UNIQUE KEY'</span> <span class="hljs-keyword">in</span> line_upper:
            <span class="hljs-keyword">match</span> = re.search(
                <span class="hljs-string">r'(UNIQUE\s+KEY\s+[^)]+))\s+([^,\n]+?)(?=\s*[,)]|\s*$)'</span>,
                line,
                re.IGNORECASE
            )
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
                key_type = <span class="hljs-string">'UNIQUE KEY'</span>
        <span class="hljs-keyword">elif</span> re.search(<span class="hljs-string">r'\bKEY\s+'</span>, line, re.IGNORECASE):
            <span class="hljs-comment"># æ™®é€š KEYï¼Œç¡®ä¿ä¸æ˜¯ UNIQUE KEY æˆ– PRIMARY KEY</span>
            <span class="hljs-keyword">match</span> = re.search(
                <span class="hljs-string">r'(\bKEY\s+[^)]+))\s+([^,\n]+?)(?=\s*[,)]|\s*$)'</span>,
                line,
                re.IGNORECASE
            )
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
                key_type = <span class="hljs-string">'KEY'</span>
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">and</span> key_type:
            comment_text = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">2</span>).strip().rstrip(<span class="hljs-string">','</span>).strip()
            
            <span class="hljs-comment"># æ’é™¤ç©ºæ³¨é‡Š</span>
            <span class="hljs-keyword">if</span> comment_text:
                issues.append((line_num, line, key_type, comment_text))
    
    <span class="hljs-keyword">return</span> issues


<span class="hljs-keyword">def</span> <span class="hljs-title function_">fix_key_comment</span>(<span class="hljs-params">content: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">Tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>]]:
    <span class="hljs-string">"""
    ä¿®å¤ KEY æ³¨é‡Šé—®é¢˜ï¼ˆåŒ…æ‹¬ UNIQUE KEY, KEY, PRIMARY KEYï¼‰
    
    è¿”å›: (ä¿®å¤åçš„å†…å®¹, ä¿®å¤è®°å½•åˆ—è¡¨)
    """</span>
    lines = content.split(<span class="hljs-string">'\n'</span>)
    fixes = []
    new_lines = []
    
    <span class="hljs-keyword">for</span> line_num, line <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(lines, <span class="hljs-number">1</span>):
        original_line = line
        fixed = <span class="hljs-literal">False</span>
        
        <span class="hljs-comment"># è·³è¿‡å·²ç»æœ‰ COMMENT å…³é”®å­—çš„è¡Œ</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'COMMENT'</span> <span class="hljs-keyword">in</span> line.upper():
            new_lines.append(line)
            <span class="hljs-keyword">continue</span>
        
        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦åŒ…å« KEY å®šä¹‰</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'KEY'</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> line.upper():
            new_lines.append(line)
            <span class="hljs-keyword">continue</span>
        
        line_upper = line.upper()
        <span class="hljs-keyword">match</span> = <span class="hljs-literal">None</span>
        key_type = <span class="hljs-literal">None</span>
        pattern = <span class="hljs-literal">None</span>
        
        <span class="hljs-comment"># æŒ‰ä¼˜å…ˆçº§åŒ¹é…ï¼šPRIMARY KEY &gt; UNIQUE KEY &gt; KEY</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'PRIMARY KEY'</span> <span class="hljs-keyword">in</span> line_upper:
            pattern = <span class="hljs-string">r'(PRIMARY\s+KEY\s+[^)]+))\s+([^,\n]+?)(?=\s*[,)]|\s*$)'</span>
            <span class="hljs-keyword">match</span> = re.search(pattern, line, re.IGNORECASE)
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
                key_type = <span class="hljs-string">'PRIMARY KEY'</span>
        <span class="hljs-keyword">elif</span> <span class="hljs-string">'UNIQUE KEY'</span> <span class="hljs-keyword">in</span> line_upper:
            pattern = <span class="hljs-string">r'(UNIQUE\s+KEY\s+[^)]+))\s+([^,\n]+?)(?=\s*[,)]|\s*$)'</span>
            <span class="hljs-keyword">match</span> = re.search(pattern, line, re.IGNORECASE)
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
                key_type = <span class="hljs-string">'UNIQUE KEY'</span>
        <span class="hljs-keyword">elif</span> re.search(<span class="hljs-string">r'\bKEY\s+'</span>, line, re.IGNORECASE):
            <span class="hljs-comment"># æ™®é€š KEYï¼Œç¡®ä¿ä¸æ˜¯ UNIQUE KEY æˆ– PRIMARY KEY</span>
            pattern = <span class="hljs-string">r'(\bKEY\s+[^)]+))\s+([^,\n]+?)(?=\s*[,)]|\s*$)'</span>
            <span class="hljs-keyword">match</span> = re.search(pattern, line, re.IGNORECASE)
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
                key_type = <span class="hljs-string">'KEY'</span>
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span> <span class="hljs-keyword">and</span> key_type <span class="hljs-keyword">and</span> pattern:
            key_def = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>)
            comment_text = <span class="hljs-keyword">match</span>.group(<span class="hljs-number">2</span>).strip()
            
            <span class="hljs-comment"># æ’é™¤ç©ºæ³¨é‡Šæˆ–åªæ˜¯ç©ºç™½å­—ç¬¦</span>
            <span class="hljs-keyword">if</span> comment_text <span class="hljs-keyword">and</span> comment_text.strip():
                <span class="hljs-comment"># ç§»é™¤æœ«å°¾çš„é€—å·ï¼ˆå¦‚æœæœ‰ï¼‰</span>
                comment_text = comment_text.rstrip(<span class="hljs-string">','</span>).strip()
                
                <span class="hljs-comment"># æ£€æŸ¥æ³¨é‡Šæ˜¯å¦å·²ç»ç”¨å¼•å·åŒ…è£¹</span>
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (comment_text.startswith(<span class="hljs-string">"'"</span>) <span class="hljs-keyword">and</span> comment_text.endswith(<span class="hljs-string">"'"</span>)):
                    <span class="hljs-comment"># è½¬ä¹‰å•å¼•å·</span>
                    escaped_comment = comment_text.replace(<span class="hljs-string">"'"</span>, <span class="hljs-string">"''"</span>)
                    <span class="hljs-comment"># ç”¨å•å¼•å·åŒ…è£¹</span>
                    quoted_comment = <span class="hljs-string">f"'<span class="hljs-subst">{escaped_comment}</span>'"</span>
                <span class="hljs-keyword">else</span>:
                    quoted_comment = comment_text
                
                <span class="hljs-comment"># ä½¿ç”¨æ­£åˆ™æ›¿æ¢</span>
                <span class="hljs-comment"># åŒ¹é…: KEY ... ) æ³¨é‡Šå†…å®¹ [é€—å·æˆ–è¡Œå°¾]</span>
                <span class="hljs-comment"># æ›¿æ¢ä¸º: KEY ... ) COMMENT 'æ³¨é‡Šå†…å®¹' [é€—å·æˆ–è¡Œå°¾]</span>
                new_line = re.sub(
                    pattern,
                    <span class="hljs-string">rf'\1 COMMENT <span class="hljs-subst">{quoted_comment}</span>'</span>,
                    line,
                    count=<span class="hljs-number">1</span>,
                    flags=re.IGNORECASE
                )
                
                <span class="hljs-comment"># ç¡®ä¿è¡Œå°¾çš„é€—å·è¢«ä¿ç•™ï¼ˆå¦‚æœåŸæ¥æœ‰çš„è¯ï¼‰</span>
                <span class="hljs-keyword">if</span> line.rstrip().endswith(<span class="hljs-string">','</span>) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> new_line.rstrip().endswith(<span class="hljs-string">','</span>):
                    new_line = new_line.rstrip() + <span class="hljs-string">','</span>
                
                fixes.append({
                    <span class="hljs-string">'line'</span>: line_num,
                    <span class="hljs-string">'key_type'</span>: key_type,
                    <span class="hljs-string">'original'</span>: original_line.strip(),
                    <span class="hljs-string">'fixed'</span>: new_line.strip(),
                    <span class="hljs-string">'comment'</span>: quoted_comment
                })
                
                new_lines.append(new_line)
                fixed = <span class="hljs-literal">True</span>
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> fixed:
            new_lines.append(line)
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">'\n'</span>.join(new_lines), fixes


<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_sql_file</span>(<span class="hljs-params">sql_file: Path</span>) -&gt; <span class="hljs-type">Dict</span>:
    <span class="hljs-string">"""å¤„ç†å•ä¸ª SQL æ–‡ä»¶"""</span>
    result = {
        <span class="hljs-string">'file'</span>: <span class="hljs-built_in">str</span>(sql_file),
        <span class="hljs-string">'fixed'</span>: <span class="hljs-literal">False</span>,
        <span class="hljs-string">'fixes'</span>: []
    }
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(sql_file, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
            content = f.read()
        
        <span class="hljs-comment"># æŸ¥æ‰¾é—®é¢˜</span>
        issues = find_key_without_comment(content)
        
        <span class="hljs-keyword">if</span> issues:
            <span class="hljs-comment"># ä¿®å¤é—®é¢˜</span>
            new_content, fixes = fix_key_comment(content)
            
            <span class="hljs-keyword">if</span> fixes:
                <span class="hljs-comment"># å†™å›æ–‡ä»¶</span>
                <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(sql_file, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
                    f.write(new_content)
                
                result[<span class="hljs-string">'fixed'</span>] = <span class="hljs-literal">True</span>
                result[<span class="hljs-string">'fixes'</span>] = fixes
                
                log(<span class="hljs-string">f"âœ… ä¿®å¤æ–‡ä»¶: <span class="hljs-subst">{sql_file.name}</span>"</span>)
                <span class="hljs-keyword">for</span> fix <span class="hljs-keyword">in</span> fixes:
                    key_type = fix.get(<span class="hljs-string">'key_type'</span>, <span class="hljs-string">'KEY'</span>)
                    log(<span class="hljs-string">f"   è¡Œ <span class="hljs-subst">{fix[<span class="hljs-string">'line'</span>]}</span> (<span class="hljs-subst">{key_type}</span>): <span class="hljs-subst">{fix[<span class="hljs-string">'original'</span>]}</span>"</span>)
                    log(<span class="hljs-string">f"   -&gt; <span class="hljs-subst">{fix[<span class="hljs-string">'fixed'</span>]}</span>"</span>)
            <span class="hljs-keyword">else</span>:
                log(<span class="hljs-string">f"âš ï¸  å‘ç°é—®é¢˜ä½†æœªä¿®å¤: <span class="hljs-subst">{sql_file.name}</span>"</span>)
        <span class="hljs-keyword">else</span>:
            log(<span class="hljs-string">f"âœ“  æ— é—®é¢˜: <span class="hljs-subst">{sql_file.name}</span>"</span>)
    
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        log(<span class="hljs-string">f"âŒ å¤„ç†æ–‡ä»¶å¤±è´¥ <span class="hljs-subst">{sql_file.name}</span>: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>, level=<span class="hljs-string">"ERROR"</span>)
        result[<span class="hljs-string">'error'</span>] = <span class="hljs-built_in">str</span>(e)
    
    <span class="hljs-keyword">return</span> result


<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°"""</span>
    log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    log(<span class="hljs-string">"KEY/UNIQUE KEY/PRIMARY KEY æ³¨é‡Šä¿®å¤ä»»åŠ¡å¯åŠ¨"</span>)
    log(<span class="hljs-string">f"æ‰«æç›®å½•ï¼š<span class="hljs-subst">{OUTPUT_SQL_DIR}</span>"</span>)
    log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span> + <span class="hljs-string">"\n"</span>)
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> OUTPUT_SQL_DIR.exists():
        log(<span class="hljs-string">f"âŒ ç›®å½•ä¸å­˜åœ¨ï¼š<span class="hljs-subst">{OUTPUT_SQL_DIR}</span>"</span>, level=<span class="hljs-string">"ERROR"</span>)
        sys.exit(<span class="hljs-number">1</span>)
    
    <span class="hljs-comment"># æŸ¥æ‰¾æ‰€æœ‰ SQL æ–‡ä»¶</span>
    sql_files = <span class="hljs-built_in">sorted</span>(OUTPUT_SQL_DIR.glob(<span class="hljs-string">"*.sql"</span>))
    total_count = <span class="hljs-built_in">len</span>(sql_files)
    
    <span class="hljs-keyword">if</span> total_count == <span class="hljs-number">0</span>:
        log(<span class="hljs-string">"âš ï¸  æœªå‘ç° SQL æ–‡ä»¶"</span>, level=<span class="hljs-string">"WARNING"</span>)
        sys.exit(<span class="hljs-number">1</span>)
    
    log(<span class="hljs-string">f"å‘ç° <span class="hljs-subst">{total_count}</span> ä¸ª SQL æ–‡ä»¶ï¼Œå¼€å§‹æ‰«æ...\n"</span>)
    
    <span class="hljs-comment"># ç»Ÿè®¡ä¿¡æ¯</span>
    fixed_files = []
    total_fixes = <span class="hljs-number">0</span>
    all_fixes_detail = []
    
        <span class="hljs-comment"># å¤„ç†æ¯ä¸ªæ–‡ä»¶</span>
    <span class="hljs-keyword">for</span> sql_file <span class="hljs-keyword">in</span> sql_files:
        result = process_sql_file(sql_file)
        <span class="hljs-keyword">if</span> result[<span class="hljs-string">'fixed'</span>]:
            fixed_files.append(result[<span class="hljs-string">'file'</span>])
            total_fixes += <span class="hljs-built_in">len</span>(result[<span class="hljs-string">'fixes'</span>])
            <span class="hljs-comment"># ä¸ºæ¯ä¸ªä¿®å¤æ·»åŠ æ–‡ä»¶ä¿¡æ¯</span>
            <span class="hljs-keyword">for</span> fix <span class="hljs-keyword">in</span> result[<span class="hljs-string">'fixes'</span>]:
                fix[<span class="hljs-string">'file'</span>] = result[<span class="hljs-string">'file'</span>]
            all_fixes_detail.extend(result[<span class="hljs-string">'fixes'</span>])
        log(<span class="hljs-string">"-"</span> * <span class="hljs-number">40</span> + <span class="hljs-string">"\n"</span>)
    
    <span class="hljs-comment"># è¾“å‡ºç»Ÿè®¡ç»“æœ</span>
    log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    log(<span class="hljs-string">"ä¿®å¤ä»»åŠ¡ç»“æŸ"</span>)
    log(<span class="hljs-string">f"æ€»æ–‡ä»¶æ•°ï¼š<span class="hljs-subst">{total_count}</span>"</span>)
    log(<span class="hljs-string">f"ä¿®å¤æ–‡ä»¶æ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(fixed_files)}</span>"</span>)
    log(<span class="hljs-string">f"æ€»ä¿®å¤æ•°ï¼š<span class="hljs-subst">{total_fixes}</span>"</span>)
    log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    
    <span class="hljs-comment"># è¾“å‡ºè¯¦ç»†ä¿®å¤ä¿¡æ¯</span>
    <span class="hljs-keyword">if</span> all_fixes_detail:
        log(<span class="hljs-string">"\nè¯¦ç»†ä¿®å¤ä¿¡æ¯ï¼š"</span>)
        log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
        <span class="hljs-keyword">for</span> fix <span class="hljs-keyword">in</span> all_fixes_detail:
            <span class="hljs-comment"># ä»æ–‡ä»¶è·¯å¾„ä¸­æå–æ–‡ä»¶å</span>
            file_name = Path(fix.get(<span class="hljs-string">'file'</span>, <span class="hljs-string">''</span>)).name <span class="hljs-keyword">if</span> <span class="hljs-string">'file'</span> <span class="hljs-keyword">in</span> fix <span class="hljs-keyword">else</span> <span class="hljs-string">'unknown'</span>
            key_type = fix.get(<span class="hljs-string">'key_type'</span>, <span class="hljs-string">'KEY'</span>)
            log(<span class="hljs-string">f"\næ–‡ä»¶: <span class="hljs-subst">{file_name}</span>"</span>)
            log(<span class="hljs-string">f"è¡Œå·: <span class="hljs-subst">{fix[<span class="hljs-string">'line'</span>]}</span>"</span>)
            log(<span class="hljs-string">f"ç±»å‹: <span class="hljs-subst">{key_type}</span>"</span>)
            log(<span class="hljs-string">f"åŸå§‹: <span class="hljs-subst">{fix[<span class="hljs-string">'original'</span>]}</span>"</span>)
            log(<span class="hljs-string">f"ä¿®å¤: <span class="hljs-subst">{fix[<span class="hljs-string">'fixed'</span>]}</span>"</span>)
            log(<span class="hljs-string">f"æ³¨é‡Š: <span class="hljs-subst">{fix[<span class="hljs-string">'comment'</span>]}</span>"</span>)
        log(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
    
    log(<span class="hljs-string">f"\næ—¥å¿—æ–‡ä»¶ï¼š<span class="hljs-subst">{LOG_FILE}</span>"</span>)


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h4 data-id="heading-8">æ€»ç»“</h4>
<p>é€šè¿‡ <code>ibd2sql</code> å·¥å…·ç»“åˆæ‰¹é‡å¤„ç†è„šæœ¬ï¼Œå¯é«˜æ•ˆæ¢å¤ <code>.ibd</code> æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚è§£æåéœ€æ³¨æ„ä¿®æ­£ JSON å­—æ®µæ ¼å¼åŠç´¢å¼•æ³¨é‡Šé—®é¢˜ï¼Œå°‘é‡å¼‚å¸¸è¡¨å»ºè®®æ‰‹åŠ¨è°ƒæ•´ä»¥ç¡®ä¿æ•°æ®å®Œæ•´æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[247. Java é›†åˆ - ä¸ºä»€ä¹ˆè¦è¿œç¦» Stack ç±»ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7575050949959188516</link>    <guid>https://juejin.cn/post/7575050949959188516</guid>    <pubDate>2025-11-21T23:45:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575050949959188516" data-draft-id="7575021014033072147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="247. Java é›†åˆ - ä¸ºä»€ä¹ˆè¦è¿œç¦» Stack ç±»ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-11-21T23:45:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CacheæŠ€æœ¯åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1662117313262776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            247. Java é›†åˆ - ä¸ºä»€ä¹ˆè¦è¿œç¦» Stack ç±»ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117313262776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CacheæŠ€æœ¯åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T23:45:57.000Z" title="Fri Nov 21 2025 23:45:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">247. Java é›†åˆ - ä¸ºä»€ä¹ˆè¦è¿œç¦» <code>Stack</code> ç±»ï¼Ÿ</h2>
<p>è™½ç„¶ <code>Stack</code> ç±»åœ¨ <code>JDK</code> ä¸­ä¾ç„¶å­˜åœ¨ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿéå¸¸ç®€å•ç›´è§‚ï¼Œæ¯”å¦‚æä¾›äº†æˆ‘ä»¬æœŸæœ›çš„ç»å…¸ä¸‰å¤§æ–¹æ³•ï¼š</p>
<ul>
<li><code>push(element)</code>ï¼šå‹å…¥å…ƒç´ </li>
<li><code>pop()</code>ï¼šå¼¹å‡ºæ ˆé¡¶å…ƒç´ </li>
<li><code>peek()</code>ï¼šæŸ¥çœ‹æ ˆé¡¶å…ƒç´ ä½†ä¸ç§»é™¤</li>
</ul>
<p>çœ‹åˆ°è¿™äº›æ–¹æ³•ï¼Œå¾ˆå¤šåˆå­¦è€…ä¼šè§‰å¾—ç›´æ¥ä½¿ç”¨ <code>Stack</code> å¾ˆé¡ºæ‰‹ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š</p>
<blockquote>
<p>ğŸš¨ ä¸ºä»€ä¹ˆ<strong>ä¸æ¨è</strong>åœ¨ç°ä»£ <code>Java</code> ç¼–ç¨‹ä¸­ä½¿ç”¨ <code>Stack</code> ç±»ï¼Ÿ</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ“œ <code>Stack</code> èƒŒåçš„æ•…äº‹</h3>
<ul>
<li><code>Stack</code> ç»§æ‰¿è‡ª <code>Vector</code> ç±»ã€‚</li>
<li><code>Vector</code> æ˜¯ <code>Java</code> åœ¨ <strong><code>Collections Framework</code>ï¼ˆé›†åˆæ¡†æ¶ï¼‰è¯ç”Ÿä¹‹å‰</strong>çš„æ—©æœŸé›†åˆç±»ã€‚</li>
<li><code>Vector</code> å’Œ <code>Stack</code> éƒ½æ˜¯**çº¿ç¨‹å®‰å…¨ï¼ˆ<code>synchronized</code>ï¼‰**çš„ï¼Œå³æ‰€æœ‰æ–¹æ³•éƒ½åŠ äº†é”ã€‚</li>
<li>ç„¶è€Œï¼Œåœ¨<strong>å•çº¿ç¨‹ç¨‹åº</strong>æˆ–è€…<strong>æ— é”é«˜æ€§èƒ½åœºæ™¯</strong>ä¸‹ï¼Œè¿™ç§åŒæ­¥æœºåˆ¶åè€Œä¼šå¸¦æ¥<strong>ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€</strong>ã€‚</li>
</ul>
<p>ğŸ”” <strong>æ€»ç»“</strong>ï¼š</p>
<ul>
<li><code>Vector</code> å’Œ <code>Stack</code> å¹¶æ²¡æœ‰è¢«æ ‡è®°ä¸ºè¿‡æ—¶ï¼ˆ<code>deprecated</code>ï¼‰ï¼Œä½†<strong>å®˜æ–¹å¼ºçƒˆä¸æ¨è</strong>ç»§ç»­ä½¿ç”¨ã€‚</li>
<li>åœ¨éœ€è¦æ ˆåŠŸèƒ½æ—¶ï¼Œ<strong>æ¨èä½¿ç”¨</strong> <code>Deque</code>ï¼ˆç‰¹åˆ«æ˜¯ <code>ArrayDeque</code>ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">âœ… æ¨èæ›¿ä»£æ–¹æ¡ˆ</h3>

















<table><thead><tr><th>éœ€æ±‚</th><th>æ¨èä½¿ç”¨</th></tr></thead><tbody><tr><td>æ™®é€šå•çº¿ç¨‹æ ˆ</td><td><code>Deque</code> / <code>ArrayDeque</code></td></tr><tr><td>å¤šçº¿ç¨‹å®‰å…¨çš„æ ˆ</td><td><code>BlockingQueue</code> çš„å®ç°ï¼Œå¦‚ <code>LinkedBlockingDeque</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">ğŸ”¥ ç¤ºä¾‹å¯¹æ¯”ï¼šä½¿ç”¨ <code>Deque</code> æ›¿ä»£ <code>Stack</code></h3>
<h4 data-id="heading-4">âŒ è€å¼å†™æ³•ï¼ˆä½¿ç”¨<code> Stack</code>ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.Stack;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OldStackExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Stack&lt;String&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();

        stack.push(<span class="hljs-string">"A"</span>);
        stack.push(<span class="hljs-string">"B"</span>);
        stack.push(<span class="hljs-string">"C"</span>);

        System.out.println(stack.pop()); <span class="hljs-comment">// C</span>
        System.out.println(stack.peek()); <span class="hljs-comment">// B</span>
    }
}
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šè™½ç„¶ç®€å•ï¼Œä½† Stack åº•å±‚æ˜¯åŒæ­¥çš„ï¼Œå½±å“äº†å•çº¿ç¨‹æ€§èƒ½ï¼Œè€Œä¸”æ˜¯è¿‡æ—¶é£æ ¼ã€‚</p>
<hr/>
<h4 data-id="heading-5">âœ… ç°ä»£å†™æ³•ï¼ˆä½¿ç”¨<code> ArrayDeque</code>ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayDeque;
<span class="hljs-keyword">import</span> java.util.Deque;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModernStackExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Deque&lt;String&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();

        stack.push(<span class="hljs-string">"A"</span>);
        stack.push(<span class="hljs-string">"B"</span>);
        stack.push(<span class="hljs-string">"C"</span>);

        System.out.println(stack.pop()); <span class="hljs-comment">// C</span>
        System.out.println(stack.peek()); <span class="hljs-comment">// B</span>
    }
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ— é”è®¾è®¡ï¼Œ<strong>æ›´å¿«æ›´è½»é‡</strong>ã€‚</li>
<li><code>ArrayDeque</code> ä¸“é—¨ä¸ºæ ˆå’Œé˜Ÿåˆ—æ“ä½œè¿›è¡Œäº†ä¼˜åŒ–ã€‚</li>
<li>ä»£ç åŒæ ·æ¸…æ™°æ˜“æ‡‚ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">ğŸ—ï¸ è¿›é˜¶ï¼šéœ€è¦çº¿ç¨‹å®‰å…¨æ€ä¹ˆåŠï¼Ÿ</h3>
<p>å¦‚æœç¡®å®éœ€è¦åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä½¿ç”¨æ ˆåŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨ <code>BlockingDeque</code> æ¥å£çš„å®ç°ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.LinkedBlockingDeque;
<span class="hljs-keyword">import</span> java.util.Deque;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadSafeStackExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Deque&lt;String&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingDeque</span>&lt;&gt;();

        stack.push(<span class="hljs-string">"A"</span>);
        stack.push(<span class="hljs-string">"B"</span>);
        stack.push(<span class="hljs-string">"C"</span>);

        System.out.println(stack.pop()); <span class="hljs-comment">// C</span>
        System.out.println(stack.peek()); <span class="hljs-comment">// B</span>
    }
}
</code></pre>
<ul>
<li><code>LinkedBlockingDeque</code> æ˜¯ä¸€ä¸ª<strong>çº¿ç¨‹å®‰å…¨</strong>çš„åŒç«¯é˜Ÿåˆ—ï¼Œæ”¯æŒé«˜å¹¶å‘è®¿é—®ã€‚</li>
<li>é€‚åˆç”Ÿäº§è€…-æ¶ˆè´¹è€…ç­‰å¹¶å‘åœºæ™¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ¯ å°ç»“ï¼šä½¿ç”¨ <code>Deque</code> çš„ä¸‰å¤§ç†ç”±</h2>





















<table><thead><tr><th>ç†ç”±</th><th>æè¿°</th></tr></thead><tbody><tr><td>ğŸš€ æ€§èƒ½æ›´å¥½</td><td>æ— é”æ“ä½œï¼Œé€‚åˆå¤§éƒ¨åˆ†åº”ç”¨åœºæ™¯</td></tr><tr><td>ğŸ” è¯­ä¹‰æ¸…æ™°</td><td><code>push/pop/peek</code> æ–¹æ³•ä¸€ç›®äº†ç„¶</td></tr><tr><td>ğŸ¯ é€‚åº”æ›´å¤šåœºæ™¯</td><td>æ—¢å¯ä»¥åšæ ˆï¼ˆ<code>LIFO</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥åšé˜Ÿåˆ—ï¼ˆ<code>FIFO</code>ï¼‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-8">ğŸ‘€ äº’åŠ¨é—®é¢˜</h3>
<p><strong>é—®é¢˜1</strong>ï¼šå¦‚æœä½ å‘ç°é¡¹ç›®ä¸­è¿˜åœ¨ç”¨ <code>Stack</code> ç±»ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</p>
<blockquote>
<p>ç­”æ¡ˆç¤ºä¾‹ï¼šè¯„ä¼°æ˜¯å¦å¯ä»¥æ›¿æ¢æˆ <code>Deque</code> æˆ– <code>ArrayDeque</code>ï¼Œå¦‚æœæ¶‰åŠå¹¶å‘åœºæ™¯ï¼Œå†è€ƒè™‘ <code>BlockingDeque</code> çš„å®ç°ã€‚</p>
</blockquote>
<p><strong>é—®é¢˜2</strong>ï¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½ ä¾ç„¶å¯èƒ½ä½¿ç”¨ <code>Vector</code> æˆ– <code>Stack</code>ï¼Ÿ</p>
<blockquote>
<p>ç­”æ¡ˆç¤ºä¾‹ï¼šå¦‚æœåœ¨ç»´æŠ¤æè€æ—§çš„é—ç•™ç³»ç»Ÿï¼Œéœ€è¦å…¼å®¹æ€§ä¼˜å…ˆè€ƒè™‘ï¼Œä½†æ–°ä»£ç ä¸­åº”é¿å…ä½¿ç”¨ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# 9 ä¸ªæ­¥éª¤æ•™ä½ å¦‚ä½•å®‰å…¨åœ°è¿ç§»æ•°æ®åº“æˆ–å­—æ®µ]]></title>    <link>https://juejin.cn/post/7575015480198791220</link>    <guid>https://juejin.cn/post/7575015480198791220</guid>    <pubDate>2025-11-22T02:04:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575015480198791220" data-draft-id="7575015480198774836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# 9 ä¸ªæ­¥éª¤æ•™ä½ å¦‚ä½•å®‰å…¨åœ°è¿ç§»æ•°æ®åº“æˆ–å­—æ®µ"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2025-11-22T02:04:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # 9 ä¸ªæ­¥éª¤æ•™ä½ å¦‚ä½•å®‰å…¨åœ°è¿ç§»æ•°æ®åº“æˆ–å­—æ®µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:04:07.000Z" title="Sat Nov 22 2025 02:04:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">9 ä¸ªæ­¥éª¤æ•™ä½ å¦‚ä½•å®‰å…¨åœ°è¿ç§»æ•°æ®åº“æˆ–å­—æ®µ</h2>
<h3 data-id="heading-1">é—®é¢˜æè¿°</h3>
<p>è¿™ç¯‡æ–‡ç« è¦è®²çš„æ˜¯ä¸€ä¸ªéå¸¸å…·ä½“ä¸”æ£˜æ‰‹çš„é—®é¢˜ï¼š<strong>å”¯ä¸€ ID è¿ç§»</strong>ã€‚</p>
<p>ç°åœ¨æœ‰ä¸€ä¸ªå®ä½“ <code>User</code>ï¼Œç”± <code>User::$id</code> æ ‡è¯†ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$id</span>,
  </span>) </span>{}
}
</code></pre>
<p>è®¿é—®å®ƒçš„æ•°æ®çš„æ–¹å¼æ˜¯é€šè¿‡ä¸€ä¸ªåä¸º <code>UserRepository</code> çš„ä»“å‚¨æ¥å£ã€‚è¿™é‡Œæä¾›ä¸€ä¸ªç®€å•çš„ SQLite å®ç°ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserRepository</span>
</span>{
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@throws</span>  UserNotFoundException
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findById</span>(<span class="hljs-params">
    <span class="hljs-keyword">int</span> <span class="hljs-variable">$id</span>
  </span>): <span class="hljs-title">User</span></span>;
}

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqliteUserRepository</span>
  <span class="hljs-keyword">implements</span> <span class="hljs-title">UserRepository</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findById</span>(<span class="hljs-params">
    <span class="hljs-keyword">int</span> <span class="hljs-variable">$id</span>
  </span>): <span class="hljs-title">User</span> </span>{
    <span class="hljs-variable">$sql</span> = <span class="hljs-string">"..."</span>;
    <span class="hljs-variable">$stmt</span> = <span class="hljs-variable language_">$this</span>-&gt;pdo-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$sql</span>);
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>([
      <span class="hljs-string">'id'</span> =&gt; <span class="hljs-variable">$id</span>,
    ]);
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<p>éå¸¸ç®€å•çš„è®¾ç½®ã€‚</p>
<p>ç°åœ¨å‡è®¾ä½ çš„å›¢é˜Ÿå†³å®šï¼Œå‡ºäºå®‰å…¨åŸå› ï¼Œç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†ç¬¦ä¸åº”å†æ˜¯æ•´æ•°ï¼Œè€Œåº”è¯¥é‡‡ç”¨ UUIDã€‚</p>
<p>å½“ç„¶ï¼Œä¸å…è®¸åœæœºã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2025-11%2Fsafely-migrate-database-field-9-steps-zh" target="_blank" title="https://catchadmin.com/post/2025-11/safely-migrate-database-field-9-steps-zh" ref="nofollow noopener noreferrer">åŸæ–‡é“¾æ¥  9 ä¸ªæ­¥éª¤æ•™ä½ å¦‚ä½•å®‰å…¨åœ°è¿ç§»æ•°æ®åº“æˆ–å­—æ®µ</a></p>
<h3 data-id="heading-2">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä¸ºäº†ç»å¯¹å®‰å…¨ï¼Œå°†åˆ†ä¸‰ä¸ªé˜¶æ®µå®æ–½ï¼š</p>
<ol>
<li><strong>è®©ä¸¤ä¸ª ID å…±å­˜</strong></li>
<li><strong>å®æˆ˜æµ‹è¯• UUID å®ç°</strong></li>
<li><strong>æ·˜æ±°ä»¥å‰çš„æ•´æ•° ID å®ç°</strong></li>
</ol>
<p>åˆ†é˜¶æ®µè¿›è¡Œçš„ä¸»è¦åŸå› æ˜¯ï¼Œæµ‹è¯•ä¸è¶³ä»¥ç¡®ä¿ä¸€åˆ‡éƒ½æŒ‰é¢„æœŸå·¥ä½œã€‚è¿™ä¸ªå­—æ®µå¯èƒ½è¢«å…¶ä»–ä½œä¸šé€šè¿‡ API ä½¿ç”¨ï¼Œæˆ–è€…æˆ‘ç°åœ¨ç”šè‡³æ— æ³•æƒ³è±¡çš„ä¸œè¥¿ã€‚</p>
<p>æ‰€ä»¥ä»¥é˜²ä¸‡ä¸€ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿåœ¨ä»»ä½•æ—¶åˆ»å®‰å…¨åœ°å›æ»šåˆ°ä»¥å‰çš„å®ç°ã€‚</p>
<p>å‡è®¾è¿™é‡Œæè¿°çš„æ¯ä¸€æ­¥éƒ½æœ‰é€‚å½“çš„æµ‹è¯•è¦†ç›–ï¼Œç†æƒ³æƒ…å†µä¸‹æ˜¯åœ¨é‡æ„å‘ç”Ÿä¹‹å‰ã€‚</p>
<h3 data-id="heading-3">æ­¥éª¤ 1 - ä»åŸå§‹ç±»å‹è§£è€¦</h3>
<p>æ— è®ºä½ æ¥ä¸‹æ¥åšä»€ä¹ˆï¼Œæ²¡æœ‰è¿™ä¸ªéƒ½ä¸å®¹æ˜“ï¼<code>User</code> ç±»ä¸­çš„é‚£ä¸ª <code>int</code> åŸå§‹ç±»å‹å°±æ˜¯åœ¨è¦æ±‚çˆ†ç‚¸å‘ç”Ÿã€‚</p>
<p>å¦‚æœä½ æƒ³ä»æ•´æ•°å¹³æ»‘è¿‡æ¸¡åˆ° UUIDï¼Œæœ€å¥½çš„åŠæ³•æ˜¯é¦–å…ˆå°†ä»£ç ä¸åŸå§‹ç±»å‹è§£è€¦ã€‚ä¸€ç§æ–¹æ³•æ˜¯å°è£…ä½ çš„åŸå§‹ç±»å‹ã€‚æˆ‘å°†åˆ›å»ºä¸€ä¸ªåä¸º <code>UserId</code> çš„ç±»ï¼Œè®©ä»£ç ä¾èµ–å®ƒè€Œä¸æ˜¯ <code>int</code>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserId</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$id</span>,
  </span>) </span>{}

  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getId</span>(<span class="hljs-params"/>): <span class="hljs-title">int</span>
  </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;id;
  }
}

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> UserId <span class="hljs-variable">$id</span>,
  </span>) </span>{}
}

<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserRepository</span>
</span>{
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@throws</span>  UserNotFoundException
   */</span>
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findById</span>(<span class="hljs-params">
    UserId <span class="hljs-variable">$id</span>
  </span>): <span class="hljs-title">User</span></span>;
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç åº”è¯¥ä¼šä½¿é‡æ„ç¨å¾®å®¹æ˜“ä¸€äº›ã€‚å½“è°ƒç”¨ <code>getId()</code> æ—¶ï¼Œ<code>UserId</code> ä»ç„¶è¿”å› <code>int</code>ï¼Œä½†è¿™æ²¡å…³ç³»ï¼æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬çš„ä»£ç ä¾èµ–äº <code>UserId</code>â€”â€”ä¸€ä¸ªæˆ‘ä»¬æ§åˆ¶çš„ç±»å‹â€”â€”è€Œä¸æ˜¯åŸå§‹æ•´æ•°â€”â€”æˆ‘ä»¬æ ¹æœ¬æ— æ³•æ§åˆ¶å®ƒã€‚</p>
<p>ç°åœ¨åªéœ€è¦†ç›–æ‰€æœ‰ç°æœ‰ä»£ç ä»¥ä½¿ç”¨ <code>UserId</code> è€Œä¸æ˜¯ <code>int $id</code>ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqliteUserRepository</span>
  <span class="hljs-keyword">implements</span> <span class="hljs-title">UserRepository</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findById</span>(<span class="hljs-params">
    UserId <span class="hljs-variable">$id</span>
  </span>): <span class="hljs-title">User</span> </span>{
    <span class="hljs-variable">$sql</span> = <span class="hljs-string">"..."</span>;
    <span class="hljs-variable">$stmt</span> = <span class="hljs-variable language_">$this</span>-&gt;pdo-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$sql</span>);
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>([
      <span class="hljs-string">'id'</span> =&gt; <span class="hljs-variable">$id</span>-&gt;<span class="hljs-title function_ invoke__">getId</span>(),
    ]);
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<p>åˆ°è¿™é‡Œï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰æ”¹å˜ã€‚æ„Ÿè§‰å¯ä»¥å®‰å…¨åœ°åˆå¹¶å’Œéƒ¨ç½²ï¼Œä¸åº”è¯¥æœ‰ä»»ä½•ä¸œè¥¿ä¼šå´©æºƒã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œæµ‹è¯•å¸®åŠ©å¾ˆå¤§ã€‚ä¸€å®šè¦è¿›è¡Œæµ‹è¯•ï¼</p>
<h3 data-id="heading-4">æ­¥éª¤ 2 - è®©ä¸¤ä¸ªå­—æ®µå…±å­˜</h3>
<p>ç°åœ¨ç¡®ä¿å¯ä»¥å‘ <code>users</code> è¡¨æ·»åŠ ä¸€ä¸ªæ–°å­—æ®µã€‚è¿™æ ·å°±å¯ä»¥äº†ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">sqlite<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `users` <span class="hljs-keyword">ADD</span> `uuid` <span class="hljs-type">VARCHAR</span>;
</code></pre>
<p>ç°åœ¨å®ƒæ—¢ä¸èƒ½æ˜¯ <code>NOT NULL</code> ä¹Ÿä¸èƒ½æ˜¯ <code>UNIQUE</code>ï¼Œå› ä¸ºæ¯ä¸ªç°æœ‰è®°å½•çš„å€¼éƒ½å°†æ˜¯ <code>NULL</code>ã€‚</p>
<p>å›åˆ° <code>UserId</code> ç±»ï¼Œç¡®ä¿å®ƒç°åœ¨çš„å®ç°ä¸­æœ‰ <code>uuid</code>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserId</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$id</span>,
    <span class="hljs-keyword">public</span> ?UuidInterface <span class="hljs-variable">$uuid</span>,
  </span>) </span>{}

  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getId</span>(<span class="hljs-params"/>): <span class="hljs-title">int</span>
  </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;id;
  }

  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUuid</span>(<span class="hljs-params"/>): ?<span class="hljs-title">UUidInterface</span>
  </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;uuid;
  }
}
</code></pre>
<p>å®ƒä»ç„¶æ˜¯å¯ç©ºçš„ï¼Œå› ä¸ºï¼Œå—¯ï¼Œå®ƒåœ¨æ•°æ®åº“ä¸­æ˜¯ nullï¼</p>
<p>ç°åœ¨éœ€è¦ç¡®ä¿å‘ç”Ÿä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>æ¯ä¸ªç°æœ‰è®°å½•éƒ½å°†æœ‰ä¸€ä¸ªéç©ºçš„ uuidï¼›å¹¶ä¸”</li>
<li>æ¯ä¸ªæ–°è®°å½•éƒ½å°†å·²ç»å¸¦æœ‰å¡«å……çš„ uuid</li>
</ol>
<p>å½“çœ‹åˆ°åœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ï¼Œ<code>users.uuid</code> æ°¸è¿œä¸ä¼šæ˜¯ <code>NULL</code> æ—¶ï¼Œåˆ™è®¤ä¸ºä¸¤è€…åœ¨æ•°æ®åº“å±‚éƒ½å¾ˆå¥½åœ°å…±å­˜ã€‚</p>
<h3 data-id="heading-5">æ­¥éª¤ 3 - ç¡®ä¿æ¯ä¸ªæ–°è®°å½•éƒ½æœ‰ UUID</h3>
<p>åœ¨ä½ çš„ç³»ç»Ÿä¸­ï¼ŒæŸä¸ªåœ°æ–¹å­˜å‚¨ç€ Usersã€‚éœ€è¦ç¡®ä¿åœ¨å®ƒå‘ç”Ÿçš„ä»»ä½•åœ°æ–¹ï¼ŒUUID å­—æ®µéƒ½å°†è¢«å¡«å……ã€‚</p>
<p>æ‰€ä»¥ç»™å®šè¿™ä¸ªæ—§çš„å®ç°ï¼š</p>
<pre><code class="hljs language-php" lang="php">
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insert</span>(<span class="hljs-params">
  User <span class="hljs-variable">$user</span>
</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-comment">// insert into ...</span>
}

</code></pre>
<p>åªéœ€ç”¨ UUID ç”Ÿæˆæ¥ä¿®è¡¥å®ƒï¼Œåº”è¯¥å°±æ²¡é—®é¢˜äº†ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insert</span>(<span class="hljs-params">
  User <span class="hljs-variable">$user</span>
</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-variable">$id</span> = <span class="hljs-variable">$user</span>-&gt;id;

  <span class="hljs-keyword">if</span> (<span class="hljs-variable">$id</span>-&gt;uuid === <span class="hljs-literal">null</span>) {
    <span class="hljs-variable">$id</span>-&gt;uuid = <span class="hljs-title class_">Uuid</span>::<span class="hljs-title function_ invoke__">uuid4</span>();
  }

  <span class="hljs-comment">// insert into ...</span>
}

</code></pre>
<p>ä¸ªäººå¼ºçƒˆå»ºè®®ä½ ç”¨æµ‹è¯•è¦†ç›–è¿™ä¸ª IF è¯­å¥ï¼Œä»¥é˜²ä½ é—æ¼äº†å¯¼å…¥æˆ–ç±»ä¼¼çš„ä¸œè¥¿ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸åº”è¯¥å¼•å…¥å…¶ä»–å›å½’ã€‚</p>
<p>æ¯ä¸ªæ–°è®°å½•ç°åœ¨åº”è¯¥éƒ½æœ‰æ­£ç¡®å¡«å……çš„ <code>users.uuid</code>ã€‚</p>
<h3 data-id="heading-6">æ­¥éª¤ 4 - ä¸ºæ—§è®°å½•å›å¡« UUID å­—æ®µ</h3>
<p>è¿™å¯ä»¥ç”¨è„šæœ¬å®Œæˆã€‚å¦‚æœä½ ä½¿ç”¨è¿ç§»æ¡†æ¶ï¼Œå¯èƒ½ä¹Ÿä¼šéå¸¸ç®€å•ã€‚</p>
<p>ç°åœ¨åªéœ€è¦è·å–æ‰€æœ‰ uuid ä¸º null çš„ç”¨æˆ·å¹¶å¡«å……å®ƒä»¬ã€‚ç±»ä¼¼è¿™æ ·å°±å¯ä»¥å®Œæˆï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$users</span> = <span class="hljs-title function_ invoke__">getUsersWithEmptyUuid</span>();
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$users</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$user</span>) {
  <span class="hljs-variable">$user</span>-&gt;id-&gt;uuid = <span class="hljs-title class_">Uuid</span>::<span class="hljs-title function_ invoke__">uuid4</span>();
  <span class="hljs-title function_ invoke__">updateUser</span>(<span class="hljs-variable">$user</span>);
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç å¹¶ä¸èƒ½ä»£è¡¨æ¯ä¸ªä»£ç åº“ï¼Œä½†æˆ‘æƒ³ä½ æ˜ç™½äº†ã€‚</p>
<h3 data-id="heading-7">æ­¥éª¤ 5 - ç¡®ä¿ä¸€åˆ‡æ­£å¸¸è¿è¡Œ</h3>
<p>ä¸è¦æ€¥äºåˆ‡æ¢å®ç°ã€‚ä¸€å®šè¦ç¡®ä¿ç³»ç»Ÿæ­£å¸¸è¿è¡Œï¼Œå¹¶ä¸”åœ¨å†è¿è¡Œç³»ç»Ÿå‡ ä¸ªå°æ—¶åï¼Œ<code>users.uuid</code> ä¸ä¼šæ˜¯ <code>NULL</code>ã€‚</p>
<p>åªæœ‰å½“ä½  100% ç¡®å®š <code>users.uuid</code> åœ¨æ­¤è¡¨ä¸­æ°¸è¿œä¸ä¼šæ˜¯ <code>NULL</code> æ—¶ï¼Œæ‰è¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p>
<h3 data-id="heading-8">æ­¥éª¤ 6 - æ›´æ–° UserRepository ä»¥ä½¿ç”¨ UUID</h3>
<p>çœ‹æ¥ç°åœ¨å·²ç»å¯ä»¥åˆ‡æ¢åˆ°æ–°çš„ UUID å®ç°äº†ã€‚ä½†ä¸å»ºè®®ç›²ç›®åœ°åˆ‡æ¢åˆ°æ–°å®ç°ã€‚</p>
<p>è°¨æ…æ€»æ¯”åæ‚”å¥½ï¼Œå¯¹å§ï¼Ÿé¦–å…ˆç¡®ä¿ç”¨åŠŸèƒ½å¼€å…³ä¿æŠ¤ä»£ç ã€‚ç”¨ä»¥ä¸‹å†…å®¹æ›´æ–° <code>SqliteUserRepository</code>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqliteUserRepository</span>
    <span class="hljs-keyword">implements</span> <span class="hljs-title">UserRepository</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findById</span>(<span class="hljs-params">UserId <span class="hljs-variable">$id</span></span>): <span class="hljs-title">User</span>
  </span>{
    <span class="hljs-keyword">if</span> (
      <span class="hljs-title function_ invoke__">isFeatureFlagActive</span>(<span class="hljs-string">'enableNewUsersUuidImplementation'</span>)
    ) {
      <span class="hljs-comment">// æ–°å®ç°ï¼Œä½¿ç”¨ Uuid</span>
      <span class="hljs-variable">$sql</span> = <span class="hljs-string">"..."</span>;
      <span class="hljs-variable">$stmt</span> = <span class="hljs-variable language_">$this</span>-&gt;pdo-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$sql</span>);
      <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>([
        <span class="hljs-string">'uuid'</span> =&gt; (<span class="hljs-keyword">string</span>) <span class="hljs-variable">$id</span>-&gt;<span class="hljs-title function_ invoke__">getUuid</span>(),
      ]);
      <span class="hljs-comment">// ...</span>
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æ—§å®ç°ï¼Œä½¿ç”¨æ•´æ•° $id</span>
      <span class="hljs-variable">$sql</span> = <span class="hljs-string">"..."</span>;
      <span class="hljs-variable">$stmt</span> = <span class="hljs-variable language_">$this</span>-&gt;pdo-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$sql</span>);
      <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>([
        <span class="hljs-string">'id'</span> =&gt; <span class="hljs-variable">$id</span>-&gt;<span class="hljs-title function_ invoke__">getId</span>(),
      ]);
      <span class="hljs-comment">// ...</span>
    }
  }
}
</code></pre>
<p>é•¿è¯çŸ­è¯´ï¼šå¦‚æœè¯·æ±‚çš„åŠŸèƒ½å·²å¯ç”¨ï¼Œ<code>isFeatureFlagActive()</code> è¿”å› <code>TRUE</code>ï¼Œå¦åˆ™è¿”å› <code>FALSE</code>ã€‚å®ƒå¯ä»¥åŸºäºé…ç½®ã€æ•°æ®åº“æ¡ç›®æˆ–ç¯å¢ƒå˜é‡ã€‚è¿™åœ¨è¿™é‡Œä¸ç›¸å…³ã€‚</p>
<p>é‡è¦çš„æ˜¯ï¼Œä½ å¯ä»¥æ›´æ”¹ <code>isFeatureFlagActive()</code> çš„è¿”å›å€¼ï¼Œè€Œæ— éœ€é‡æ–°éƒ¨ç½²ä»£ç ã€‚è¿™æ ·ä½ å°±å¯ä»¥å®‰å…¨åœ°å›æ»šåˆ°ä»¥å‰çš„å®ç°ï¼Œæ²¡æœ‰å¤ªå¤šæ‘©æ“¦ã€‚</p>
<h3 data-id="heading-9">æ­¥éª¤ 7 - éƒ¨ç½²ã€å¯ç”¨å’Œç›‘æ§</h3>
<p>é¦–å…ˆéƒ¨ç½²å®ƒï¼Œç¡®ä¿ <code>isFeatureFlagActive()</code> å§‹ç»ˆè¿”å› <code>FALSE</code>ï¼Œè¿™æ ·å°±ä¼šé€‰æ‹©åŸå§‹å®ç°ã€‚</p>
<p>ç„¶åå°† <code>isFeatureFlagActive()</code> åˆ‡æ¢ä¸ºè¿”å› <code>TRUE</code>ï¼Œè¿™æ ·å°±ä¼šé€‰æ‹©æ–°å®ç°â€”â€”åŒæ ·ï¼Œè¿™å¯ä»¥é€šè¿‡æ•°æ®åº“è®°å½•ã€ç¯å¢ƒå˜é‡ã€SaaS å·¥å…·æˆ–ä½ å–œæ¬¢çš„ä»»ä½•ä¸œè¥¿æ¥å®Œæˆã€‚</p>
<p>å“¦ä¸ï¼å‡ºé—®é¢˜äº†ï¼ç½‘ç«™çªç„¶å˜å¾—è¶…çº§æ…¢ï¼ï¼</p>
<p>å…³é—­ä½ çš„åŠŸèƒ½å¼€å…³ï¼Œè¿™æ · <code>isFeatureFlagActive()</code> å°†å†æ¬¡è¿”å› <code>FALSE</code>ã€‚</p>
<p>...</p>
<p>äº‹æƒ…ä¼¼ä¹åˆæ¢å¤æ­£å¸¸äº†ã€‚å›åˆ°ä½ çš„ IDEï¼Œè¯•ç€å¼„æ¸…æ¥šå‘ç”Ÿäº†ä»€ä¹ˆã€‚ä¹Ÿè®¸åšä¸€äº›ç‚¹å‡»æµ‹è¯•å’Œè°ƒè¯•æ¥ç†è§£æ˜¯ä»€ä¹ˆå¯¼è‡´å®ƒå¦‚æ­¤ç¼“æ…¢ã€‚</p>
<p>æœ€ç»ˆä½ ä¼šæ„è¯†åˆ°ä½ æ²¡æœ‰ç´¢å¼• <code>users.uuid</code> åˆ—ï¼Œæ‰€ä»¥ç”±äºä½ çš„å·¨å¤§è¡¨ï¼ŒæŸ¥è¯¢å®ƒå˜å¾—è¶…çº§æ…¢ã€‚å°½å¿«ä¿®å¤å®ƒï¼</p>
<h3 data-id="heading-10">æ­¥éª¤ 8 - ä½¿ UUID å”¯ä¸€å¹¶å»ºç«‹ç´¢å¼•</h3>
<p>ç”±äºä½¿ç”¨çš„æ˜¯ SQLite å®ç°ï¼Œè¿™é‡Œæ˜¯åº”è¯¥å®Œæˆæ­¤æ“ä½œçš„ä»£ç ç‰‡æ®µï¼š</p>
<pre><code class="hljs language-sql" lang="sql">sqlite<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> INDEX `users_uuid_uq` <span class="hljs-keyword">ON</span> `users`(`uuid`);
</code></pre>
<p>ç†æƒ³æƒ…å†µä¸‹ï¼Œä½ è¿˜åº”è¯¥ä½¿ <code>users.uuid</code> ä¸º <code>NOT NULL</code>ï¼Œä½†æˆ‘è·³è¿‡äº†å®ƒï¼Œå› ä¸ºå®ƒéœ€è¦æ›´å¤šçš„ SQLite æ­¥éª¤ï¼Œè¿™äº›æ­¥éª¤ä¸æˆ‘æƒ³åœ¨è¿™é‡Œæ¼”ç¤ºçš„å†…å®¹æ— å…³ã€‚</p>
<p>å¥½äº†ï¼Œç°åœ¨åº”è¯¥æ²¡é—®é¢˜äº†ã€‚å°†ä½ çš„æ›´æ”¹ä¼ æ’­åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œçœ‹çœ‹åŠŸèƒ½å¼€å…³çš„ä»£ç ç°åœ¨è¡¨ç°å¦‚ä½•ã€‚</p>
<p>ä¸€åˆ‡éƒ½å¥½ï¼Œå¯¹å§ï¼Ÿæ˜¯æ—¶å€™æ¸…ç†äº†ã€‚</p>
<h3 data-id="heading-11">æ­¥éª¤ 9 - æ¸…ç†ä½ çš„æ•°å­— ID</h3>
<p>æ—¢ç„¶ä¸œè¥¿å·²ç»éƒ¨ç½²å¹¶ç»è¿‡å®æˆ˜æµ‹è¯•ï¼Œæ˜¯æ—¶å€™æ¸…ç†ä»¥å‰çš„æ•°å­— id å­—æ®µäº†ã€‚</p>
<p>æ— è®ºä½ æ˜¯åˆ é™¤å®é™…å­—æ®µè¿˜æ˜¯åªæ˜¯ä¸åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒï¼Œè¿™éƒ½æ˜¯é¡¹ç›®å†³ç­–â€”â€”ä»€ä¹ˆä¸æ˜¯å‘¢ï¼Ÿ</p>
<p>ä½†æœ€ç»ˆä½ çš„ <code>SqliteUserRepository</code> ä¼šçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SqliteUserRepository</span>
    <span class="hljs-keyword">implements</span> <span class="hljs-title">UserRepository</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findById</span>(<span class="hljs-params">
    UserId <span class="hljs-variable">$id</span>
  </span>): <span class="hljs-title">User</span> </span>{
    <span class="hljs-variable">$sql</span> = <span class="hljs-string">"..."</span>;
    <span class="hljs-variable">$stmt</span> = <span class="hljs-variable language_">$this</span>-&gt;pdo-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-variable">$sql</span>);
    <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>([
      <span class="hljs-string">'uuid'</span> =&gt; (<span class="hljs-keyword">string</span>) <span class="hljs-variable">$id</span>-&gt;<span class="hljs-title function_ invoke__">getUuid</span>(),
    ]);
    <span class="hljs-comment">// ...</span>
  }
}
</code></pre>
<p>æ’å…¥è®°å½•çš„å‡½æ•°ç°åœ¨ä¹Ÿå€¼å¾—ä¸€äº›å…³çˆ±ã€‚è®©æˆ‘ä»¬åˆ é™¤ä»¥å‰çš„ IF è¯­å¥ï¼š</p>
<pre><code class="hljs language-php" lang="php">...

<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insert</span>(<span class="hljs-params">
  User <span class="hljs-variable">$user</span>
</span>): <span class="hljs-title">void</span> </span>{
  <span class="hljs-variable">$user</span>-&gt;id-&gt;uuid = <span class="hljs-title class_">Uuid</span>::<span class="hljs-title function_ invoke__">uuid4</span>();

  <span class="hljs-comment">// insert logic</span>
}

...
</code></pre>
<p>å¦‚æœä½ å†³å®šä¹Ÿä»æ•°æ®åº“ä¸­åˆ é™¤æ•°å­— idï¼Œå¿…é¡»ç¡®ä¿ <code>UserId</code> ä»£ç ä¹Ÿè¢«æ¸…ç†ï¼Œå¹¶åˆ é™¤ <code>$id</code> å±æ€§ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserId</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> UuidInterface <span class="hljs-variable">$uuid</span>,
  </span>) </span>{}

  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUuid</span>(<span class="hljs-params">
  </span>): <span class="hljs-title">UuidInterface</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;uuid;
  }
}
</code></pre>
<p>å› ä¸ºç°åœ¨ UUID å®Œå…¨æ²¡æœ‰ç†ç”±ä¸ºç©ºï¼Œä¹Ÿä» <code>$uuid</code> å±æ€§ä¸­åˆ é™¤äº†é—®å·ã€‚ç°åœ¨ä½ çš„ç³»ç»Ÿæ˜¯å®‰å…¨çš„ï¼</p>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>å½“ç„¶ï¼Œäº‹æƒ…å¯èƒ½å› é¡¹ç›®è€Œå¼‚ï¼Œä½†å½’æ ¹ç»“åº•ï¼Œä½ å°†æ‰§è¡Œæ‰€æè¿°æŠ€æœ¯çš„æŸç§å˜ä½“ã€‚</p>
<p>è¿™é€‚ç”¨äºå‡ ä¹ä»»ä½•ä¾èµ–æ•°æ®çš„å®ç°æ›´æ”¹ã€‚åªéœ€è®°ä½ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>è®©ä¸¤ä¸ªå®ç°å…±å­˜</strong></li>
<li><strong>å®æˆ˜æµ‹è¯•æ–°å®ç°</strong></li>
<li><strong>æ·˜æ±°ä»¥å‰çš„å®ç°</strong></li>
</ol>
<p>ä¸è¦å®³ç¾æˆ–ç¾äºé‡‡å–å¤šä¸ªæ­¥éª¤ã€‚å³ä½¿ä½ çŸ¥é“ä¹‹åå¿…é¡»åˆ é™¤ä»£ç ï¼å®é™…ä¸Šå›æ»šéƒ¨ç½²æˆ–ä¿®å¤å®æ—¶æ•°æ®åº“æ¯”åœ¨è¿™é‡Œæè¿°çš„ä»»ä½•æ­¥éª¤éƒ½è¦ç—›è‹¦å¾—å¤šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[enetæºç è§£æ (2) å¯¹ç­‰èŠ‚ç‚¹ (ENetPeer)]]></title>    <link>https://juejin.cn/post/7575050949959598116</link>    <guid>https://juejin.cn/post/7575050949959598116</guid>    <pubDate>2025-11-22T02:26:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575050949959598116" data-draft-id="7575050949959565348" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="enetæºç è§£æ (2) å¯¹ç­‰èŠ‚ç‚¹ (ENetPeer)"/> <meta itemprop="keywords" content="ç½‘ç»œåè®®,C++"/> <meta itemprop="datePublished" content="2025-11-22T02:26:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡å¯çš„ç å†œ"/> <meta itemprop="url" content="https://juejin.cn/user/3590319025687584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            enetæºç è§£æ (2) å¯¹ç­‰èŠ‚ç‚¹ (ENetPeer)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3590319025687584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡å¯çš„ç å†œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:26:09.000Z" title="Sat Nov 22 2025 02:26:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç«  ä¸»æœºç®¡ç† (ENetHost)ä¸­ï¼Œæˆ‘ä»¬å»ºç«‹äº†è‡ªå·±çš„â€œé‚®å±€â€ï¼ˆHostï¼‰ã€‚ä½†æ˜¯ï¼Œå¦‚æœåªæœ‰é‚®å±€è€Œæ²¡æœ‰é€šä¿¡çš„å¯¹è±¡ï¼Œé‚£è¿™å°±æ˜¯ä¸€ä¸ªå­¤ç‹¬çš„é‚®å±€ã€‚</p>
<p>æœ¬ç« æˆ‘ä»¬å°†ä»‹ç» <strong>å¯¹ç­‰èŠ‚ç‚¹ (ENetPeer)</strong>ã€‚å¦‚æœä¸æŠŠ <code>ENetHost</code> æ¯”ä½œé‚®å±€ï¼Œè€Œæ˜¯æ¯”ä½œä¸€éƒ¨æ‰‹æœºï¼Œé‚£ä¹ˆ <code>ENetPeer</code> å°±æ˜¯ä½ æ­£åœ¨è¿›è¡Œçš„<strong>é€šè¯</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯ ENetPeerï¼Ÿ</h2>
<p><code>ENetPeer</code> ä»£è¡¨äº†ä¸<strong>ç‰¹å®šè¿œç¨‹è®¡ç®—æœº</strong>çš„ä¸€ä¸ªæ´»åŠ¨è¿æ¥ã€‚</p>
<p>åœ¨ä¸€ä¸ªå¤šäººæ¸¸æˆä¸­ï¼š</p>
<ul>
<li><strong>å¯¹äºå®¢æˆ·ç«¯</strong>ï¼šä½ é€šå¸¸åªæœ‰ 1 ä¸ª <code>ENetPeer</code>ï¼Œå®ƒä»£è¡¨äº†ä½ è¿æ¥çš„æ¸¸æˆæœåŠ¡å™¨ã€‚</li>
<li><strong>å¯¹äºæœåŠ¡å™¨</strong>ï¼šä½ ä¼šæœ‰å¾ˆå¤šä¸ª <code>ENetPeer</code>ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä»£è¡¨ä¸€ä¸ªåœ¨çº¿çš„ç©å®¶ã€‚</li>
</ul>
<p>å®ƒçš„æ ¸å¿ƒèŒè´£æ˜¯å……å½“<strong>è¿æ¥çš„ç®¡å®¶</strong>ï¼š</p>
<ol>
<li><strong>çŠ¶æ€ç»´æŠ¤</strong>ï¼šè®°å½•æˆ‘ä»¬æ˜¯â€œæ­£åœ¨è¿æ¥â€ã€â€œå·²è¿æ¥â€è¿˜æ˜¯â€œæ­£åœ¨æ–­å¼€â€ã€‚</li>
<li><strong>å¥åº·ç›‘æ§</strong>ï¼šè®¡ç®—å¾€è¿”æ—¶é—´ (RTT)ï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä¸€æ¥ä¸€å›éœ€è¦å¤šä¹…ã€‚</li>
<li><strong>æµé‡æ§åˆ¶</strong>ï¼šå¦‚æœç½‘ç»œå¤ªå¡ï¼Œå®ƒä¼šè‡ªåŠ¨é™ä½å‘é€é€Ÿåº¦ï¼Œé˜²æ­¢å µå¡ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">2. å®æˆ˜ï¼šå»ºç«‹è¿æ¥</h2>
<p>è¦è·å¾—ä¸€ä¸ª <code>ENetPeer</code> å¯¹è±¡ï¼Œæœ€å¸¸è§çš„æ–¹æ³•æ˜¯<strong>ä¸»åŠ¨å‘èµ·è¿æ¥</strong>ï¼ˆä½œä¸ºå®¢æˆ·ç«¯ï¼‰ã€‚</p>
<h3 data-id="heading-2">2.1 å‘èµ·è¿æ¥</h3>
<p>å‡è®¾ä½ å·²ç»åˆ›å»ºäº†ä¸€ä¸ªå®¢æˆ·ç«¯ Hostï¼ˆå¦‚ç¬¬ä¸€ç« æ‰€è¿°ï¼‰ï¼Œç°åœ¨æˆ‘ä»¬è¦è¿æ¥åˆ°æœåŠ¡å™¨ã€‚</p>
<pre><code class="hljs language-c" lang="c">ENetAddress address;
ENetEvent event;
ENetPeer *peer;

<span class="hljs-comment">// è®¾ç½®æœåŠ¡å™¨åœ°å€ (æœ¬åœ°å›ç¯åœ°å€)</span>
enet_address_set_host(&amp;address, <span class="hljs-string">"127.0.0.1"</span>);
address.port = <span class="hljs-number">1234</span>;

<span class="hljs-comment">// å‘èµ·è¿æ¥ï¼š2ä¸ªé€šé“ï¼Œ0è¡¨ç¤ºä¸é™é€Ÿ</span>
peer = enet_host_connect(client, &amp;address, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>);

<span class="hljs-keyword">if</span> (peer == <span class="hljs-literal">NULL</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"è¿æ¥è¯·æ±‚åˆ›å»ºå¤±è´¥ï¼\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ä»£ç è§£è¯»</strong>ï¼š
è°ƒç”¨ <code>enet_host_connect</code> å¹¶ä¸ä¼šç«‹å³è”ç½‘ï¼Œå®ƒåªæ˜¯ç”± ENet åˆ›å»ºäº†ä¸€ä¸ªâ€œè¿æ¥æ„å‘â€ã€‚çœŸæ­£çš„æ¡æ‰‹æ•°æ®åŒ…ä¼šåœ¨ä½ è°ƒç”¨ <code>enet_host_service</code> æ—¶å‘å‡ºã€‚</p>
<h3 data-id="heading-3">2.2 ç¡®è®¤è¿æ¥æˆåŠŸ</h3>
<p>è¿æ¥ä¸æ˜¯ç¬é—´å®Œæˆçš„ã€‚æˆ‘ä»¬éœ€è¦åœ¨äº‹ä»¶å¾ªç¯ä¸­ç­‰å¾…æœåŠ¡å™¨çš„â€œåŒæ„â€ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ç­‰å¾… 5 ç§’é’Ÿçœ‹æ˜¯å¦èƒ½è¿æ¥æˆåŠŸ</span>
<span class="hljs-keyword">if</span> (enet_host_service(client, &amp;event, <span class="hljs-number">5000</span>) &gt; <span class="hljs-number">0</span> &amp;&amp;
    event.type == ENET_EVENT_TYPE_CONNECT) {
    
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¿æ¥æˆåŠŸï¼æœåŠ¡å™¨å“åº”äº†ã€‚\n"</span>);
    <span class="hljs-comment">// æ­¤æ—¶ï¼Œpeer å¯¹è±¡å·²ç»å®Œå…¨å‡†å¤‡å¥½å¯ä»¥ä½¿ç”¨äº†</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 5ç§’å†…æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œæˆ–è€…è¿æ¥å¤±è´¥</span>
    enet_peer_reset(peer);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¿æ¥å¤±è´¥ã€‚\n"</span>);
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœä½ åœ¨è¿™é‡Œæ”¶åˆ°äº† <code>ENetPeer</code>ï¼Œè¯´æ˜åº•å±‚çš„â€œä¸‰æ¬¡æ¡æ‰‹â€å·²ç»å®Œæˆäº†ã€‚</p>
<hr/>
<h2 data-id="heading-4">3. å®æˆ˜ï¼šæ–­å¼€è¿æ¥</h2>
<p>å¤©ä¸‹æ²¡æœ‰ä¸æ•£çš„ç­µå¸­ï¼Œå½“ç©å®¶é€€å‡ºæ¸¸æˆæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¼˜é›…åœ°æ–­å¼€è¿æ¥ã€‚</p>
<h3 data-id="heading-5">3.1 æ¸©æŸ”çš„æ–­å¼€ (Disconnect)</h3>
<p>è¿™æ˜¯æœ€æ¨èçš„æ–¹å¼ã€‚å®ƒä¼šå‘é€ä¸€ä¸ªâ€œå†è§â€æ¶ˆæ¯ï¼Œå¹¶ç­‰å¾…å¯¹æ–¹ç¡®è®¤â€œå¥½çš„ï¼Œå†è§â€ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å‘é€æ–­å¼€è¯·æ±‚ï¼Œé™„å¸¦ä¸€ä¸ªæ•°å­— 0 ä½œä¸ºæ•°æ®</span>
enet_peer_disconnect(peer, <span class="hljs-number">0</span>);

<span class="hljs-comment">// éœ€è¦ç»§ç»­è¿è¡ŒæœåŠ¡å¾ªç¯ï¼Œè®©æ–­å¼€æ¶ˆæ¯å‘å‡ºå»</span>
<span class="hljs-keyword">while</span> (enet_host_service(client, &amp;event, <span class="hljs-number">3000</span>) &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">switch</span> (event.type) {
    <span class="hljs-keyword">case</span> ENET_EVENT_TYPE_RECEIVE:
        <span class="hljs-comment">// è¿˜æœ‰é—ç•™æ•°æ®å°±å…ˆé”€æ¯</span>
        enet_packet_destroy(event.packet);
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> ENET_EVENT_TYPE_DISCONNECT:
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ–­å¼€è¿æ¥æˆåŠŸã€‚\n"</span>);
        <span class="hljs-keyword">return</span>;
    }
}
</code></pre>
<h3 data-id="heading-6">3.2 å¼ºåˆ¶æ–­å¼€ (Disconnect Now)</h3>
<p>å¦‚æœä½ ä¸æƒ³ç­‰å¾…ï¼Œæˆ–è€…å¯¹æ–¹å·²ç»æ­»æœºäº†ï¼Œå¯ä»¥ä½¿ç”¨å¼ºåˆ¶æ–­å¼€ã€‚è¿™å°±åƒç›´æ¥æ‹”ç½‘çº¿ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ç«‹å³é‡ç½® Peerï¼Œä¸é€šçŸ¥å¯¹æ–¹</span>
enet_peer_reset(peer);
</code></pre>
<hr/>
<h2 data-id="heading-7">4. å†…éƒ¨åŸç†è§£æ</h2>
<p>ENetPeer æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ç¬¬ä¸€ç« è¯´å®ƒæ˜¯â€œé¢„åˆ†é…â€çš„ï¼Ÿ</p>
<h3 data-id="heading-8">4.1 èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p>å½“æˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºä¸€ä¸ª <code>ENetHost</code> æ—¶ï¼Œæˆ‘ä»¬æŒ‡å®šäº† <code>peerCount</code>ï¼ˆæ¯”å¦‚ 32ï¼‰ã€‚ENet ä¼šåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªåŒ…å« 32 ä¸ª <code>ENetPeer</code> ç»“æ„ä½“çš„æ•°ç»„ã€‚</p>
<p>å½“ä¸€ä¸ªæ–°ç©å®¶è¿æ¥æ—¶ï¼ŒENet ä¸ä¼š<code>malloc</code>ï¼ˆåˆ†é…ï¼‰æ–°å†…å­˜ï¼Œè€Œæ˜¯ç®€å•åœ°åœ¨è¿™ä¸ªæ•°ç»„ä¸­æ‰¾ä¸€ä¸ª<strong>ç©ºé—²</strong>çš„ Peerï¼ŒæŠŠå®ƒæ ‡è®°ä¸ºâ€œæ­£åœ¨ä½¿ç”¨â€ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as å®¢æˆ·ç«¯
    participant ServerHost as æœåŠ¡å™¨ Host
    participant PeerPool as Peer æ•°ç»„(å†…å­˜)
    participant PeerObj as æ¿€æ´»çš„ Peer

    Client-&gt;&gt;ServerHost: å‘é€è¿æ¥è¯·æ±‚ (Connect Packet)
    ServerHost-&gt;&gt;PeerPool: å¯»æ‰¾ç©ºé—²çš„ Peer ä½ç½®
    PeerPool--&gt;&gt;ServerHost: è¿”å›ç´¢å¼• 5 æ˜¯ç©ºçš„
    ServerHost-&gt;&gt;PeerObj: åˆå§‹åŒ–ç´¢å¼• 5 (è®¾ç½® IP, ç«¯å£, çŠ¶æ€)
    ServerHost-&gt;&gt;Client: å‘é€ç¡®è®¤ (Verify Connect)
    Note over PeerObj: çŠ¶æ€å˜ä¸º CONNECTED
</code></pre>
<h3 data-id="heading-9">4.2 æ·±å…¥ä»£ç  (peer.c)</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ <code>enet_peer_reset</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸ä»…ç”¨äºæ–­å¼€è¿æ¥ï¼Œä¹Ÿç”¨äºåˆå§‹åŒ–ä¸€ä¸ªæ–°è¿æ¥çš„æ§½ä½ã€‚</p>
<p><strong>1. æ¸…ç†æ—§çŠ¶æ€</strong>
æ— è®ºè¿™ä¸ª Peer ä¹‹å‰å‘ç”Ÿäº†ä»€ä¹ˆï¼Œé‡ç½®æ„å‘³ç€æ¸…ç©ºæ‰€æœ‰ç»Ÿè®¡æ•°æ®ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: peer.c (ç®€åŒ–ç‰ˆ)</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">enet_peer_reset</span> <span class="hljs-params">(ENetPeer * peer)</span> {
    <span class="hljs-comment">// é€šçŸ¥ Host å‡å°‘è¿æ¥è®¡æ•°</span>
    enet_peer_on_disconnect (peer);

    <span class="hljs-comment">// é‡ç½® IP å’Œç«¯å£ä¿¡æ¯</span>
    peer -&gt; outgoingPeerID = ENET_PROTOCOL_MAXIMUM_PEER_ID;
    peer -&gt; connectID = <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// çŠ¶æ€è®¾ä¸ºæ–­å¼€</span>
    peer -&gt; state = ENET_PEER_STATE_DISCONNECTED;
</code></pre>
<p><strong>2. é‡ç½®ç½‘ç»œå‚æ•° (RTT)</strong>
ENet éå¸¸æ™ºèƒ½ï¼Œå®ƒä¼šä¸ºæ¯ä¸ªè¿æ¥åŠ¨æ€è®¡ç®— RTTï¼ˆç½‘ç»œå»¶è¿Ÿï¼‰ã€‚é‡ç½®æ—¶ï¼Œè¿™äº›å€¼å›å½’é»˜è®¤ã€‚</p>
<pre><code class="hljs language-c" lang="c">    <span class="hljs-comment">// file: peer.c</span>
    <span class="hljs-comment">// é»˜è®¤ RTT ä¸º 500ms</span>
    peer -&gt; roundTripTime = ENET_PEER_DEFAULT_ROUND_TRIP_TIME; 
    peer -&gt; roundTripTimeVariance = <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// é‡ç½®ä¸¢åŒ…ç»Ÿè®¡</span>
    peer -&gt; packetLoss = <span class="hljs-number">0</span>;
</code></pre>
<p><strong>3. æ¸…ç©ºé˜Ÿåˆ—</strong>
æœ€é‡è¦çš„ä¸€æ­¥ï¼šå¦‚æœè¿˜æœ‰æ²¡å‘å‡ºå»çš„åŒ…ï¼Œæˆ–è€…æ²¡å¤„ç†çš„åŒ…ï¼Œå…¨éƒ¨ä¸¢å¼ƒï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</p>
<pre><code class="hljs language-c" lang="c">    <span class="hljs-comment">// file: peer.c</span>
    <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰å¾…å‘é€å’Œå¾…æ¥æ”¶é˜Ÿåˆ—</span>
    enet_peer_reset_queues (peer);
}
</code></pre>
<h3 data-id="heading-10">4.3 æ™ºèƒ½æµæ§ (Throttling)</h3>
<p><code>ENetPeer</code> æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯<strong>è‡ªé€‚åº”æµæ§</strong>ã€‚å°±åƒæ°´åä¸€æ ·ï¼Œå¦‚æœä¸‹æ¸¸ï¼ˆç½‘ç»œï¼‰å µå¡äº†ï¼Œä¸Šæ¸¸å°±è¦å…³å°é—¸é—¨ã€‚</p>
<p>åœ¨ <code>enet_peer_throttle</code> å‡½æ•°ä¸­ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: peer.c (é€»è¾‘ç¤ºæ„)</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">enet_peer_throttle</span> <span class="hljs-params">(ENetPeer * peer, enet_uint32 rtt)</span> {
    <span class="hljs-comment">// å¦‚æœå½“å‰ RTT (å»¶è¿Ÿ) æ¯”å¹³å‡å€¼è¿˜ä½ï¼Œè¯´æ˜ç½‘ç»œå¾ˆé¡ºç•…</span>
    <span class="hljs-keyword">if</span> (rtt &lt;= peer -&gt; lastRoundTripTime) {
        <span class="hljs-comment">// å¢åŠ å‘é€æ¦‚ç‡ (packetThrottle)</span>
        peer -&gt; packetThrottle += peer -&gt; packetThrottleAcceleration;
    }
    <span class="hljs-comment">// å¦‚æœå»¶è¿Ÿå¾ˆé«˜ï¼Œè¯´æ˜ç½‘ç»œå µäº†</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rtt &gt; peer -&gt; lastRoundTripTime + <span class="hljs-number">2</span> * Variance) {
        <span class="hljs-comment">// é™ä½å‘é€æ¦‚ç‡ï¼Œä¸»åŠ¨ä¸¢å¼ƒä¸€éƒ¨åˆ†ä¸å¯é åŒ…</span>
        peer -&gt; packetThrottle -= peer -&gt; packetThrottleDeceleration;
    }
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<ul>
<li><strong>è§£é‡Š</strong>ï¼šè¿™ä¿è¯äº†å½“ç½‘ç»œå˜å·®æ—¶ï¼Œé‡è¦çš„â€œå¯é åŒ…â€è¿˜èƒ½æŒ¤è¿‡å»ï¼Œè€Œä¸å¤ªé‡è¦çš„â€œä¸å¯é åŒ…â€ä¼šè¢«ä¸»åŠ¨ä¸¢å¼ƒï¼Œé˜²æ­¢è¿æ¥å½»åº•æ–­å¼€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-11">5. å¸¸è§é—®é¢˜</h2>
<p><strong>Q: ENetPeer éœ€è¦æˆ‘æ‰‹åŠ¨é‡Šæ”¾å†…å­˜å—ï¼Ÿ</strong>
A: <strong>ä¸éœ€è¦</strong>ã€‚å¦‚æœä½ æ˜¯å®¢æˆ·ç«¯ï¼Œé”€æ¯ <code>ENetHost</code> æ—¶ä¼šè‡ªåŠ¨æ¸…ç†ã€‚å¦‚æœä½ æ˜¯æœåŠ¡å™¨ï¼Œ<code>ENetPeer</code> åªæ˜¯å¤§æ•°ç»„é‡Œçš„ä¸€æ ¼ï¼Œè°ƒç”¨ <code>enet_peer_reset</code> æˆ–æ–­å¼€è¿æ¥åï¼Œå®ƒåªæ˜¯å˜å›â€œç©ºé—²çŠ¶æ€â€ï¼Œå†…å­˜ä¾ç„¶å½’ <code>ENetHost</code> ç®¡ç†ã€‚</p>
<p><strong>Q: æˆ‘å¯ä»¥æŠŠ packet å‘é€ç»™ NULL peer å—ï¼Ÿ</strong>
A: ä¸è¡Œï¼Œç¨‹åºä¼šå´©æºƒã€‚åœ¨å‘é€å‰æ°¸è¿œè¦ç¡®ä¿ <code>peer</code> ä¸ä¸ºç©ºä¸”çŠ¶æ€æ˜¯ <code>ENET_PEER_STATE_CONNECTED</code>ã€‚</p>
<hr/>
<h2 data-id="heading-12">6. æ€»ç»“</h2>
<p>åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ï¼š</p>
<ul>
<li><strong>ENetPeer</strong> æ˜¯ç½‘ç»œè¿æ¥çš„â€œæ›¿èº«â€ï¼Œç®¡ç†ç€ä¸ç‰¹å®šè®¡ç®—æœºçš„é€šä¿¡çŠ¶æ€ã€‚</li>
<li>å¦‚ä½•ä½¿ç”¨ <code>enet_host_connect</code> å‘èµ·è¿æ¥ã€‚</li>
<li>å¦‚ä½•ä½¿ç”¨ <code>enet_peer_disconnect</code> æ–­å¼€è¿æ¥ã€‚</li>
<li>å†…éƒ¨åŸç†ï¼šPeer æ˜¯ä» Host çš„é¢„åˆ†é…æ•°ç»„ä¸­â€œå€Ÿâ€å‡ºæ¥çš„ï¼Œå¹¶è‡ªå¸¦äº†æ™ºèƒ½çš„æµæ§æœºåˆ¶ã€‚</li>
</ul>
<p>ç°åœ¨è¿æ¥å·²ç»å»ºç«‹ï¼Œå¯ä»¥äº’ç›¸é€šè¯äº†ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å…·ä½“è¦å‘é€ä»€ä¹ˆå‘¢ï¼Ÿå­—ç¬¦ä¸²ï¼Ÿç»“æ„ä½“ï¼ŸäºŒè¿›åˆ¶æµï¼Ÿ</p>
<p>ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•æ‰“åŒ…ä½ çš„æ•°æ®ï¼šæ•°æ®åŒ…å°è£… (ENetPacket)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springè¡¨è¾¾å¼è¯¦è§£]]></title>    <link>https://juejin.cn/post/7575047994681212979</link>    <guid>https://juejin.cn/post/7575047994681212979</guid>    <pubDate>2025-11-22T02:33:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575047994681212979" data-draft-id="7575031395861774382" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springè¡¨è¾¾å¼è¯¦è§£"/> <meta itemprop="keywords" content="Spring"/> <meta itemprop="datePublished" content="2025-11-22T02:33:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springè¡¨è¾¾å¼è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:33:48.000Z" title="Sat Nov 22 2025 02:33:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Springè¡¨è¾¾å¼è¯¦è§£ï¼šSpELä»å…¥é—¨åˆ°å®æˆ˜</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>SpELï¼ˆSpring Expression Languageï¼ŒSpringè¡¨è¾¾å¼è¯­è¨€ï¼‰æ˜¯Springæ¡†æ¶æä¾›çš„å¼ºå¤§è¡¨è¾¾å¼è¯­è¨€ï¼Œæ”¯æŒåœ¨è¿è¡Œæ—¶æŸ¥è¯¢å’Œæ“ä½œå¯¹è±¡å›¾ã€‚SpELå¹¿æ³›åº”ç”¨äºSpringçš„å„ä¸ªæ¨¡å—ä¸­ï¼Œå¦‚Spring Securityã€Spring Dataã€Spring Cacheç­‰ã€‚æœ¬æ–‡å°†æ·±å…¥è®²è§£SpELçš„æ ¸å¿ƒæ¦‚å¿µã€è¯­æ³•ç‰¹æ€§å’Œå®æˆ˜åº”ç”¨ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€SpELæ¦‚è¿°</h3>
<h4 data-id="heading-3">1.1 ä»€ä¹ˆæ˜¯SpEL</h4>
<p>SpELæ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§çš„è¡¨è¾¾å¼è¯­è¨€ï¼Œå®ƒæ”¯æŒï¼š</p>
<ul>
<li>å­—é¢é‡è¡¨è¾¾å¼</li>
<li>å±æ€§è®¿é—®</li>
<li>æ–¹æ³•è°ƒç”¨</li>
<li>é›†åˆæ“ä½œ</li>
<li>é€»è¾‘è¿ç®—</li>
<li>æ­£åˆ™è¡¨è¾¾å¼</li>
<li>è‡ªå®šä¹‰å‡½æ•°</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">SpELåœ¨Springä¸­çš„åº”ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Springæ¡†æ¶                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ <span class="hljs-meta">@Value(<span class="hljs-string">"<span class="hljs-subst">${...}</span>"</span>)</span>                  â”‚ â”‚
â”‚  â”‚ <span class="hljs-meta">@Cacheable(key = <span class="hljs-string">"#id"</span>)</span>           â”‚ â”‚
â”‚  â”‚ <span class="hljs-meta">@PreAuthorize(<span class="hljs-string">"hasRole('ADMIN')"</span>)</span>â”‚ â”‚
â”‚  â”‚ <span class="hljs-meta">@EventListener(condition = <span class="hljs-string">"..."</span>)</span>â”‚ â”‚
â”‚  â”‚ XMLé…ç½®ï¼š&lt;property value=<span class="hljs-string">"#{...}"</span>/&gt;â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     SpELè§£æå¼•æ“                  â”‚ â”‚
â”‚  â”‚  - è¯æ³•åˆ†æ                       â”‚ â”‚
â”‚  â”‚  - è¯­æ³•åˆ†æ                       â”‚ â”‚
â”‚  â”‚  - è¡¨è¾¾å¼æ±‚å€¼                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-4">1.2 SpELçš„ä¼˜åŠ¿</h4>
<pre><code class="hljs">SpEL vs å…¶ä»–è¡¨è¾¾å¼è¯­è¨€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç‰¹æ€§         â”‚  SpEL       â”‚  EL/OGNL     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Springé›†æˆ  â”‚  åŸç”Ÿæ”¯æŒ    â”‚  éœ€è¦é€‚é…     â”‚
â”‚  ç±»å‹å®‰å…¨     â”‚  æ”¯æŒ        â”‚  æœ‰é™æ”¯æŒ     â”‚
â”‚  æ–¹æ³•è°ƒç”¨     â”‚  å…¨é¢æ”¯æŒ    â”‚  æœ‰é™æ”¯æŒ     â”‚
â”‚  é›†åˆæ“ä½œ     â”‚  å¼ºå¤§        â”‚  åŸºç¡€         â”‚
â”‚  è‡ªå®šä¹‰å‡½æ•°   â”‚  æ”¯æŒ        â”‚  æœ‰é™         â”‚
â”‚  å®‰å…¨æ€§       â”‚  å¯æ§        â”‚  é£é™©è¾ƒé«˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-5">äºŒã€SpELåŸºç¡€è¯­æ³•</h3>
<h4 data-id="heading-6">2.1 å­—é¢é‡è¡¨è¾¾å¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å­—é¢é‡è¡¨è¾¾å¼ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LiteralExpressionsDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

        <span class="hljs-comment">// å­—ç¬¦ä¸²å­—é¢é‡</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp1</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"'Hello World'"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> (String) exp1.getValue();
        System.out.println(<span class="hljs-string">"å­—ç¬¦ä¸²: "</span> + str);  <span class="hljs-comment">// Hello World</span>

        <span class="hljs-comment">// æ•°å­—å­—é¢é‡</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp2</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"100"</span>);
        <span class="hljs-type">Integer</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> (Integer) exp2.getValue();
        System.out.println(<span class="hljs-string">"æ•°å­—: "</span> + num);  <span class="hljs-comment">// 100</span>

        <span class="hljs-comment">// æµ®ç‚¹æ•°å­—é¢é‡</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp3</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"3.14159"</span>);
        <span class="hljs-type">Double</span> <span class="hljs-variable">pi</span> <span class="hljs-operator">=</span> (Double) exp3.getValue();
        System.out.println(<span class="hljs-string">"æµ®ç‚¹æ•°: "</span> + pi);  <span class="hljs-comment">// 3.14159</span>

        <span class="hljs-comment">// å¸ƒå°”å­—é¢é‡</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp4</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"true"</span>);
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">bool</span> <span class="hljs-operator">=</span> (Boolean) exp4.getValue();
        System.out.println(<span class="hljs-string">"å¸ƒå°”å€¼: "</span> + bool);  <span class="hljs-comment">// true</span>

        <span class="hljs-comment">// nullå­—é¢é‡</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp5</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"null"</span>);
        <span class="hljs-type">Object</span> <span class="hljs-variable">nullVal</span> <span class="hljs-operator">=</span> exp5.getValue();
        System.out.println(<span class="hljs-string">"nullå€¼: "</span> + nullVal);  <span class="hljs-comment">// null</span>
    }
}
</code></pre>
<h4 data-id="heading-7">2.2 å±æ€§è®¿é—®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å±æ€§è®¿é—®ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PropertyAccessDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

        <span class="hljs-comment">// åˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>, <span class="hljs-string">"zhangsan@example.com"</span>);

        <span class="hljs-comment">// è®¿é—®å±æ€§</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp1</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"name"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> exp1.getValue(user, String.class);
        System.out.println(<span class="hljs-string">"å§“å: "</span> + name);  <span class="hljs-comment">// å¼ ä¸‰</span>

        <span class="hljs-comment">// è®¿é—®åµŒå¥—å±æ€§</span>
        user.setAddress(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Address</span>(<span class="hljs-string">"åŒ—äº¬å¸‚"</span>, <span class="hljs-string">"æœé˜³åŒº"</span>));
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp2</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"address.city"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">city</span> <span class="hljs-operator">=</span> exp2.getValue(user, String.class);
        System.out.println(<span class="hljs-string">"åŸå¸‚: "</span> + city);  <span class="hljs-comment">// åŒ—äº¬å¸‚</span>

        <span class="hljs-comment">// å®‰å…¨å¯¼èˆªï¼ˆé¿å…ç©ºæŒ‡é’ˆï¼‰</span>
        user.setAddress(<span class="hljs-literal">null</span>);
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp3</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"address?.city"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">safeCity</span> <span class="hljs-operator">=</span> exp3.getValue(user, String.class);
        System.out.println(<span class="hljs-string">"å®‰å…¨è®¿é—®: "</span> + safeCity);  <span class="hljs-comment">// null</span>

        <span class="hljs-comment">// æ•°ç»„/åˆ—è¡¨è®¿é—®</span>
        user.setHobbies(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"ç¯®çƒ"</span>, <span class="hljs-string">"æ¸¸æ³³"</span>, <span class="hljs-string">"é˜…è¯»"</span>});
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp4</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"hobbies[0]"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">hobby</span> <span class="hljs-operator">=</span> exp4.getValue(user, String.class);
        System.out.println(<span class="hljs-string">"ç¬¬ä¸€ä¸ªçˆ±å¥½: "</span> + hobby);  <span class="hljs-comment">// ç¯®çƒ</span>

        <span class="hljs-comment">// Mapè®¿é—®</span>
        Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        map.put(<span class="hljs-string">"key1"</span>, <span class="hljs-string">"value1"</span>);
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp5</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"['key1']"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> exp5.getValue(map, String.class);
        System.out.println(<span class="hljs-string">"Mapå€¼: "</span> + value);  <span class="hljs-comment">// value1</span>
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> Integer age;
    <span class="hljs-keyword">private</span> String email;
    <span class="hljs-keyword">private</span> Address address;
    <span class="hljs-keyword">private</span> String[] hobbies;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(String name, Integer age, String email)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
        <span class="hljs-built_in">this</span>.email = email;
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> {
    <span class="hljs-keyword">private</span> String city;
    <span class="hljs-keyword">private</span> String district;
}
</code></pre>
<h4 data-id="heading-8">2.3 æ–¹æ³•è°ƒç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ–¹æ³•è°ƒç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MethodCallDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

        <span class="hljs-comment">// å­—ç¬¦ä¸²æ–¹æ³•è°ƒç”¨</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp1</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"'Hello'.concat(' World')"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">result1</span> <span class="hljs-operator">=</span> exp1.getValue(String.class);
        System.out.println(<span class="hljs-string">"å­—ç¬¦ä¸²æ‹¼æ¥: "</span> + result1);  <span class="hljs-comment">// Hello World</span>

        <span class="hljs-comment">// å¯¹è±¡æ–¹æ³•è°ƒç”¨</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"zhangsan"</span>, <span class="hljs-number">25</span>, <span class="hljs-string">"zhangsan@example.com"</span>);
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp2</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"name.toUpperCase()"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">result2</span> <span class="hljs-operator">=</span> exp2.getValue(user, String.class);
        System.out.println(<span class="hljs-string">"å¤§å†™: "</span> + result2);  <span class="hljs-comment">// ZHANGSAN</span>

        <span class="hljs-comment">// é“¾å¼è°ƒç”¨</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp3</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"email.substring(0, 8).toUpperCase()"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">result3</span> <span class="hljs-operator">=</span> exp3.getValue(user, String.class);
        System.out.println(<span class="hljs-string">"é“¾å¼è°ƒç”¨: "</span> + result3);  <span class="hljs-comment">// ZHANGSAN</span>

        <span class="hljs-comment">// é™æ€æ–¹æ³•è°ƒç”¨</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp4</span> <span class="hljs-operator">=</span> parser.parseExpression(
            <span class="hljs-string">"T(java.lang.Math).random() * 100"</span>);
        <span class="hljs-type">Double</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> exp4.getValue(Double.class);
        System.out.println(<span class="hljs-string">"éšæœºæ•°: "</span> + random);

        <span class="hljs-comment">// è°ƒç”¨è‡ªå®šä¹‰æ–¹æ³•</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp5</span> <span class="hljs-operator">=</span> parser.parseExpression(
            <span class="hljs-string">"T(com.example.StringUtils).isEmpty(name)"</span>);
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">isEmpty</span> <span class="hljs-operator">=</span> exp5.getValue(user, Boolean.class);
        System.out.println(<span class="hljs-string">"æ˜¯å¦ä¸ºç©º: "</span> + isEmpty);
    }
}

<span class="hljs-comment">/**
 * å·¥å…·ç±»
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StringUtils</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">(String str)</span> {
        <span class="hljs-keyword">return</span> str == <span class="hljs-literal">null</span> || str.isEmpty();
    }
}
</code></pre>
<h4 data-id="heading-9">2.4 è¿ç®—ç¬¦</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è¿ç®—ç¬¦ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OperatorDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

        <span class="hljs-comment">// ç®—æœ¯è¿ç®—ç¬¦</span>
        System.out.println(<span class="hljs-string">"åŠ æ³•: "</span> + parser.parseExpression(<span class="hljs-string">"1 + 2"</span>).getValue());  <span class="hljs-comment">// 3</span>
        System.out.println(<span class="hljs-string">"å‡æ³•: "</span> + parser.parseExpression(<span class="hljs-string">"5 - 2"</span>).getValue());  <span class="hljs-comment">// 3</span>
        System.out.println(<span class="hljs-string">"ä¹˜æ³•: "</span> + parser.parseExpression(<span class="hljs-string">"3 * 4"</span>).getValue());  <span class="hljs-comment">// 12</span>
        System.out.println(<span class="hljs-string">"é™¤æ³•: "</span> + parser.parseExpression(<span class="hljs-string">"10 / 2"</span>).getValue()); <span class="hljs-comment">// 5</span>
        System.out.println(<span class="hljs-string">"å–æ¨¡: "</span> + parser.parseExpression(<span class="hljs-string">"10 % 3"</span>).getValue()); <span class="hljs-comment">// 1</span>

        <span class="hljs-comment">// å…³ç³»è¿ç®—ç¬¦</span>
        System.out.println(<span class="hljs-string">"ç­‰äº: "</span> + parser.parseExpression(<span class="hljs-string">"5 == 5"</span>).getValue());   <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"ä¸ç­‰äº: "</span> + parser.parseExpression(<span class="hljs-string">"5 != 3"</span>).getValue()); <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"å¤§äº: "</span> + parser.parseExpression(<span class="hljs-string">"5 &gt; 3"</span>).getValue());    <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"å°äº: "</span> + parser.parseExpression(<span class="hljs-string">"3 &lt; 5"</span>).getValue());    <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"å¤§äºç­‰äº: "</span> + parser.parseExpression(<span class="hljs-string">"5 &gt;= 5"</span>).getValue());  <span class="hljs-comment">// true</span>

        <span class="hljs-comment">// é€»è¾‘è¿ç®—ç¬¦</span>
        System.out.println(<span class="hljs-string">"ä¸: "</span> + parser.parseExpression(<span class="hljs-string">"true and false"</span>).getValue()); <span class="hljs-comment">// false</span>
        System.out.println(<span class="hljs-string">"æˆ–: "</span> + parser.parseExpression(<span class="hljs-string">"true or false"</span>).getValue());  <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"é: "</span> + parser.parseExpression(<span class="hljs-string">"!true"</span>).getValue());         <span class="hljs-comment">// false</span>

        <span class="hljs-comment">// ä¸‰å…ƒè¿ç®—ç¬¦</span>
        System.out.println(<span class="hljs-string">"ä¸‰å…ƒ: "</span> + parser.parseExpression(<span class="hljs-string">"5 &gt; 3 ? 'yes' : 'no'"</span>).getValue());  <span class="hljs-comment">// yes</span>

        <span class="hljs-comment">// å­—ç¬¦ä¸²è¿æ¥</span>
        System.out.println(<span class="hljs-string">"æ‹¼æ¥: "</span> + parser.parseExpression(<span class="hljs-string">"'Hello' + ' ' + 'World'"</span>).getValue());

        <span class="hljs-comment">// Elvisè¿ç®—ç¬¦ï¼ˆç®€åŒ–ä¸‰å…ƒï¼‰</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setName(<span class="hljs-literal">null</span>);
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"name?:'åŒ¿åç”¨æˆ·'"</span>);
        System.out.println(<span class="hljs-string">"Elvis: "</span> + exp.getValue(user, String.class));  <span class="hljs-comment">// åŒ¿åç”¨æˆ·</span>
    }
}
</code></pre>
<h4 data-id="heading-10">2.5 é›†åˆæ“ä½œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * é›†åˆæ“ä½œç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

        <span class="hljs-comment">// åˆ›å»ºåˆ—è¡¨</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp1</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"{1,2,3,4,5}"</span>);
        List&lt;Integer&gt; list = (List&lt;Integer&gt;) exp1.getValue();
        System.out.println(<span class="hljs-string">"åˆ—è¡¨: "</span> + list);  <span class="hljs-comment">// [1, 2, 3, 4, 5]</span>

        <span class="hljs-comment">// åˆ›å»ºMap</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp2</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"{name:'å¼ ä¸‰',age:25}"</span>);
        Map&lt;String, Object&gt; map = (Map&lt;String, Object&gt;) exp2.getValue();
        System.out.println(<span class="hljs-string">"Map: "</span> + map);  <span class="hljs-comment">// {name=å¼ ä¸‰, age=25}</span>

        <span class="hljs-comment">// é›†åˆé€‰æ‹©ï¼ˆç­›é€‰ï¼‰</span>
        List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>);
        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();
        context.setVariable(<span class="hljs-string">"numbers"</span>, numbers);

        <span class="hljs-comment">// é€‰æ‹©å¶æ•°</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp3</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"#numbers.?[#this % 2 == 0]"</span>);
        List&lt;Integer&gt; evenNumbers = (List&lt;Integer&gt;) exp3.getValue(context);
        System.out.println(<span class="hljs-string">"å¶æ•°: "</span> + evenNumbers);  <span class="hljs-comment">// [2, 4, 6, 8, 10]</span>

        <span class="hljs-comment">// é›†åˆæŠ•å½±ï¼ˆæ˜ å°„ï¼‰</span>
        List&lt;User&gt; users = Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>, <span class="hljs-string">"zhangsan@example.com"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">30</span>, <span class="hljs-string">"lisi@example.com"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-number">35</span>, <span class="hljs-string">"wangwu@example.com"</span>)
        );
        context.setVariable(<span class="hljs-string">"users"</span>, users);

        <span class="hljs-comment">// æå–æ‰€æœ‰ç”¨æˆ·å</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp4</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"#users.![name]"</span>);
        List&lt;String&gt; names = (List&lt;String&gt;) exp4.getValue(context);
        System.out.println(<span class="hljs-string">"ç”¨æˆ·ååˆ—è¡¨: "</span> + names);  <span class="hljs-comment">// [å¼ ä¸‰, æå››, ç‹äº”]</span>

        <span class="hljs-comment">// æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp5</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"#users.^[age &gt; 25]"</span>);
        <span class="hljs-type">User</span> <span class="hljs-variable">firstMatch</span> <span class="hljs-operator">=</span> (User) exp5.getValue(context);
        System.out.println(<span class="hljs-string">"ç¬¬ä¸€ä¸ªå¹´é¾„&gt;25: "</span> + firstMatch.getName());  <span class="hljs-comment">// æå››</span>

        <span class="hljs-comment">// æŸ¥æ‰¾æœ€åä¸€ä¸ªåŒ¹é…</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp6</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"#users.$[age &gt; 25]"</span>);
        <span class="hljs-type">User</span> <span class="hljs-variable">lastMatch</span> <span class="hljs-operator">=</span> (User) exp6.getValue(context);
        System.out.println(<span class="hljs-string">"æœ€åä¸€ä¸ªå¹´é¾„&gt;25: "</span> + lastMatch.getName());  <span class="hljs-comment">// ç‹äº”</span>
    }
}
</code></pre>
<h4 data-id="heading-11">2.6 æ­£åˆ™è¡¨è¾¾å¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ­£åˆ™è¡¨è¾¾å¼ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegexDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

        <span class="hljs-comment">// é‚®ç®±éªŒè¯</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp1</span> <span class="hljs-operator">=</span> parser.parseExpression(
            <span class="hljs-string">"'zhangsan@example.com' matches '^[A-Za-z0-9+_.-]+@(.+)$'"</span>);
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">isEmail</span> <span class="hljs-operator">=</span> exp1.getValue(Boolean.class);
        System.out.println(<span class="hljs-string">"æ˜¯å¦ä¸ºé‚®ç®±: "</span> + isEmail);  <span class="hljs-comment">// true</span>

        <span class="hljs-comment">// æ‰‹æœºå·éªŒè¯</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp2</span> <span class="hljs-operator">=</span> parser.parseExpression(
            <span class="hljs-string">"'13800138000' matches '^1[3-9]\\d{9}$'"</span>);
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">isPhone</span> <span class="hljs-operator">=</span> exp2.getValue(Boolean.class);
        System.out.println(<span class="hljs-string">"æ˜¯å¦ä¸ºæ‰‹æœºå·: "</span> + isPhone);  <span class="hljs-comment">// true</span>

        <span class="hljs-comment">// åœ¨å¯¹è±¡ä¸Šä½¿ç”¨</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>, <span class="hljs-string">"invalid-email"</span>);
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp3</span> <span class="hljs-operator">=</span> parser.parseExpression(
            <span class="hljs-string">"email matches '^[A-Za-z0-9+_.-]+@(.+)$'"</span>);
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">validEmail</span> <span class="hljs-operator">=</span> exp3.getValue(user, Boolean.class);
        System.out.println(<span class="hljs-string">"é‚®ç®±æ ¼å¼æ­£ç¡®: "</span> + validEmail);  <span class="hljs-comment">// false</span>
    }
}
</code></pre>
<h3 data-id="heading-12">ä¸‰ã€Springä¸­çš„SpELåº”ç”¨</h3>
<h4 data-id="heading-13">3.1 @Valueæ³¨è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@Value</span>æ³¨è§£ä½¿ç”¨SpEL
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ValueDemo</span> {

    <span class="hljs-comment">// 1. å­—é¢é‡</span>
    <span class="hljs-meta">@Value("#{100}")</span>
    <span class="hljs-keyword">private</span> Integer literalValue;

    <span class="hljs-comment">// 2. ç³»ç»Ÿå±æ€§</span>
    <span class="hljs-meta">@Value("#{systemProperties['user.home']}")</span>
    <span class="hljs-keyword">private</span> String userHome;

    <span class="hljs-comment">// 3. ç¯å¢ƒå˜é‡</span>
    <span class="hljs-meta">@Value("#{systemEnvironment['PATH']}")</span>
    <span class="hljs-keyword">private</span> String path;

    <span class="hljs-comment">// 4. é…ç½®æ–‡ä»¶å±æ€§</span>
    <span class="hljs-meta">@Value("${server.port:8080}")</span>
    <span class="hljs-keyword">private</span> Integer serverPort;

    <span class="hljs-comment">// 5. Beanå±æ€§</span>
    <span class="hljs-meta">@Value("#{userService.userCount}")</span>
    <span class="hljs-keyword">private</span> Integer userCount;

    <span class="hljs-comment">// 6. è¡¨è¾¾å¼è®¡ç®—</span>
    <span class="hljs-meta">@Value("#{T(java.lang.Math).random() * 100}")</span>
    <span class="hljs-keyword">private</span> Double randomValue;

    <span class="hljs-comment">// 7. åˆ—è¡¨æ³¨å…¥</span>
    <span class="hljs-meta">@Value("#{'${user.roles}'.split(',')}")</span>
    <span class="hljs-keyword">private</span> List&lt;String&gt; roles;

    <span class="hljs-comment">// 8. ä¸‰å…ƒè¡¨è¾¾å¼</span>
    <span class="hljs-meta">@Value("#{${user.enabled:true} ? 'å¯ç”¨' : 'ç¦ç”¨'}")</span>
    <span class="hljs-keyword">private</span> String userStatus;

    <span class="hljs-comment">// 9. Elvisè¿ç®—ç¬¦</span>
    <span class="hljs-meta">@Value("#{config.name ?: 'default'}")</span>
    <span class="hljs-keyword">private</span> String configName;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printValues</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å­—é¢é‡: "</span> + literalValue);
        System.out.println(<span class="hljs-string">"ç”¨æˆ·ä¸»ç›®å½•: "</span> + userHome);
        System.out.println(<span class="hljs-string">"éšæœºå€¼: "</span> + randomValue);
        System.out.println(<span class="hljs-string">"ç”¨æˆ·è§’è‰²: "</span> + roles);
        System.out.println(<span class="hljs-string">"ç”¨æˆ·çŠ¶æ€: "</span> + userStatus);
    }
}
</code></pre>
<h4 data-id="heading-14">3.2 Spring Cache</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Spring Cacheä¸­ä½¿ç”¨SpEL
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {

    <span class="hljs-comment">/**
     * ç¼“å­˜Keyä½¿ç”¨SpEL
     */</span>
    <span class="hljs-meta">@Cacheable(
        value = "products",
        key = "#id",                    // ç®€å•å‚æ•°
        condition = "#id &gt; 0",          // ç¼“å­˜æ¡ä»¶
        unless = "#result == null"     // æ’é™¤æ¡ä»¶
    )</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span> {
        System.out.println(<span class="hljs-string">"ä»æ•°æ®åº“æŸ¥è¯¢: "</span> + id);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(id, <span class="hljs-string">"å•†å“"</span> + id, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"99.99"</span>));
    }

    <span class="hljs-comment">/**
     * å¤æ‚Keyç”Ÿæˆ
     */</span>
    <span class="hljs-meta">@Cacheable(
        value = "productList",
        key = "#root.methodName + ':' + #category + ':' + #page + ':' + #size"
    )</span>
    <span class="hljs-keyword">public</span> List&lt;Product&gt; <span class="hljs-title function_">findByCategory</span><span class="hljs-params">(String category, <span class="hljs-type">int</span> page, <span class="hljs-type">int</span> size)</span> {
        System.out.println(<span class="hljs-string">"æŸ¥è¯¢åˆ†ç±»: "</span> + category);
        <span class="hljs-keyword">return</span> Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-number">1L</span>, <span class="hljs-string">"å•†å“1"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"99.99"</span>)));
    }

    <span class="hljs-comment">/**
     * ä½¿ç”¨å¯¹è±¡å±æ€§ä½œä¸ºKey
     */</span>
    <span class="hljs-meta">@Cacheable(
        value = "searchResults",
        key = "#query.keyword + ':' + #query.page"
    )</span>
    <span class="hljs-keyword">public</span> List&lt;Product&gt; <span class="hljs-title function_">search</span><span class="hljs-params">(SearchQuery query)</span> {
        System.out.println(<span class="hljs-string">"æœç´¢: "</span> + query.getKeyword());
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    }

    <span class="hljs-comment">/**
     * ç¼“å­˜åˆ é™¤
     */</span>
    <span class="hljs-meta">@CacheEvict(
        value = "products",
        key = "#product.id",
        condition = "#product.id != null"
    )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateProduct</span><span class="hljs-params">(Product product)</span> {
        System.out.println(<span class="hljs-string">"æ›´æ–°å•†å“: "</span> + product.getId());
    }

    <span class="hljs-comment">/**
     * æ‰¹é‡åˆ é™¤ç¼“å­˜
     */</span>
    <span class="hljs-meta">@CacheEvict(value = "products", allEntries = true)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearAllCache</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ¸…ç©ºæ‰€æœ‰ç¼“å­˜"</span>);
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> BigDecimal price;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchQuery</span> {
    <span class="hljs-keyword">private</span> String keyword;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> page;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;
}
</code></pre>
<h4 data-id="heading-15">3.3 Spring Security</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Spring Securityä¸­ä½¿ç”¨SpEL
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {

    <span class="hljs-comment">/**
     * æ–¹æ³•çº§æƒé™æ§åˆ¶
     */</span>
    <span class="hljs-meta">@PreAuthorize("hasRole('ADMIN')")</span>
    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getAllUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    }

    <span class="hljs-comment">/**
     * åŸºäºå‚æ•°çš„æƒé™æ§åˆ¶
     */</span>
    <span class="hljs-meta">@PreAuthorize("#id == authentication.principal.id or hasRole('ADMIN')")</span>
    <span class="hljs-meta">@GetMapping("/{id}")</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
    }

    <span class="hljs-comment">/**
     * å¤æ‚æƒé™è¡¨è¾¾å¼
     */</span>
    <span class="hljs-meta">@PreAuthorize("hasRole('ADMIN') and #user.department == authentication.principal.department")</span>
    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">createUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-keyword">return</span> user;
    }

    <span class="hljs-comment">/**
     * æ–¹æ³•è¿”å›åæ£€æŸ¥
     */</span>
    <span class="hljs-meta">@PostAuthorize("returnObject.owner == authentication.principal.username")</span>
    <span class="hljs-meta">@GetMapping("/{id}/details")</span>
    <span class="hljs-keyword">public</span> UserDetails <span class="hljs-title function_">getUserDetails</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDetails</span>();
    }

    <span class="hljs-comment">/**
     * è¿‡æ»¤é›†åˆ
     */</span>
    <span class="hljs-meta">@PostFilter("filterObject.owner == authentication.principal.username")</span>
    <span class="hljs-meta">@GetMapping("/my-items")</span>
    <span class="hljs-keyword">public</span> List&lt;Item&gt; <span class="hljs-title function_">getMyItems</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDetails</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String owner;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Item</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String owner;
}
</code></pre>
<h4 data-id="heading-16">3.4 Springäº‹ä»¶ç›‘å¬</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * äº‹ä»¶ç›‘å¬ä¸­ä½¿ç”¨SpEL
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventListener</span> {

    <span class="hljs-comment">/**
     * æ¡ä»¶äº‹ä»¶ç›‘å¬
     */</span>
    <span class="hljs-meta">@EventListener(condition = "#event.order.amount &gt; 1000")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleLargeOrder</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        System.out.println(<span class="hljs-string">"å¤„ç†å¤§é¢è®¢å•: "</span> + event.getOrder().getAmount());
    }

    <span class="hljs-comment">/**
     * å¤æ‚æ¡ä»¶
     */</span>
    <span class="hljs-meta">@EventListener(condition = "#event.order.status == 'PAID' and #event.order.amount &gt; 500")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handlePaidOrder</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        System.out.println(<span class="hljs-string">"å¤„ç†å·²æ”¯ä»˜è®¢å•"</span>);
    }

    <span class="hljs-comment">/**
     * ä½¿ç”¨SpELè°ƒç”¨æ–¹æ³•
     */</span>
    <span class="hljs-meta">@EventListener(condition = "#event.isVipOrder()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleVipOrder</span><span class="hljs-params">(OrderCreatedEvent event)</span> {
        System.out.println(<span class="hljs-string">"å¤„ç†VIPè®¢å•"</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderCreatedEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ApplicationEvent</span> {
    <span class="hljs-keyword">private</span> Order order;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderCreatedEvent</span><span class="hljs-params">(Object source, Order order)</span> {
        <span class="hljs-built_in">super</span>(source);
        <span class="hljs-built_in">this</span>.order = order;
    }

    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">getOrder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> order;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isVipOrder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> order.getAmount().compareTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"5000"</span>)) &gt; <span class="hljs-number">0</span>;
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String status;
    <span class="hljs-keyword">private</span> BigDecimal amount;
}
</code></pre>
<h3 data-id="heading-17">å››ã€é«˜çº§ç‰¹æ€§</h3>
<h4 data-id="heading-18">4.1 è‡ªå®šä¹‰å‡½æ•°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è‡ªå®šä¹‰å‡½æ•°ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomFunctionDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> NoSuchMethodException {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();
        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();

        <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰å‡½æ•°</span>
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> StringUtils.class.getDeclaredMethod(<span class="hljs-string">"reverse"</span>, String.class);
        context.registerFunction(<span class="hljs-string">"reverse"</span>, method);

        <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"#reverse('Hello')"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> exp.getValue(context, String.class);
        System.out.println(<span class="hljs-string">"åè½¬: "</span> + result);  <span class="hljs-comment">// olleH</span>
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringUtils</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">reverse</span><span class="hljs-params">(String str)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(str).reverse().toString();
        }
    }
}
</code></pre>
<h4 data-id="heading-19">4.2 å˜é‡å®šä¹‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å˜é‡å®šä¹‰ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VariableDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();
        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();

        <span class="hljs-comment">// å®šä¹‰å˜é‡</span>
        context.setVariable(<span class="hljs-string">"name"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
        context.setVariable(<span class="hljs-string">"age"</span>, <span class="hljs-number">25</span>);
        context.setVariable(<span class="hljs-string">"hobbies"</span>, Arrays.asList(<span class="hljs-string">"ç¯®çƒ"</span>, <span class="hljs-string">"æ¸¸æ³³"</span>, <span class="hljs-string">"é˜…è¯»"</span>));

        <span class="hljs-comment">// ä½¿ç”¨å˜é‡</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp1</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"#name"</span>);
        System.out.println(<span class="hljs-string">"å§“å: "</span> + exp1.getValue(context));  <span class="hljs-comment">// å¼ ä¸‰</span>

        <span class="hljs-comment">// åœ¨è¡¨è¾¾å¼ä¸­è®¡ç®—</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp2</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"#age &gt; 18 ? 'æˆå¹´' : 'æœªæˆå¹´'"</span>);
        System.out.println(<span class="hljs-string">"å¹´é¾„çŠ¶æ€: "</span> + exp2.getValue(context));  <span class="hljs-comment">// æˆå¹´</span>

        <span class="hljs-comment">// é›†åˆæ“ä½œ</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp3</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"#hobbies.size()"</span>);
        System.out.println(<span class="hljs-string">"çˆ±å¥½æ•°é‡: "</span> + exp3.getValue(context));  <span class="hljs-comment">// 3</span>

        <span class="hljs-comment">// #thiså’Œ#root</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">30</span>, <span class="hljs-string">"lisi@example.com"</span>);
        context.setRootObject(user);

        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp4</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"#root.name"</span>);
        System.out.println(<span class="hljs-string">"#root: "</span> + exp4.getValue(context));  <span class="hljs-comment">// æå››</span>

        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp5</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"name"</span>);
        System.out.println(<span class="hljs-string">"ç›´æ¥è®¿é—®: "</span> + exp5.getValue(context));  <span class="hljs-comment">// æå››</span>
    }
}
</code></pre>
<h4 data-id="heading-20">4.3 Beanå¼•ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Beanå¼•ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BeanReferenceDemo</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>();
    }

    <span class="hljs-meta">@Component</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigService</span> {

        <span class="hljs-comment">// å¼•ç”¨Bean</span>
        <span class="hljs-meta">@Value("#{@dataSource.jdbcUrl}")</span>
        <span class="hljs-keyword">private</span> String jdbcUrl;

        <span class="hljs-comment">// è°ƒç”¨Beanæ–¹æ³•</span>
        <span class="hljs-meta">@Value("#{@userService.getUserCount()}")</span>
        <span class="hljs-keyword">private</span> Integer userCount;

        <span class="hljs-comment">// Beanå±æ€§è®¿é—®</span>
        <span class="hljs-meta">@Value("#{@environment['spring.application.name']}")</span>
        <span class="hljs-keyword">private</span> String appName;
    }

    <span class="hljs-meta">@Service</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

        <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getUserCount</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;
        }

        <span class="hljs-meta">@Cacheable(value = "users", key = "@userService.generateKey(#id)")</span>
        <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        }

        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateKey</span><span class="hljs-params">(Long id)</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"user:"</span> + id;
        }
    }
}
</code></pre>
<h4 data-id="heading-21">4.4 ç±»å‹è½¬æ¢</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç±»å‹è½¬æ¢ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeConversionDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

        <span class="hljs-comment">// è‡ªåŠ¨ç±»å‹è½¬æ¢</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp1</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"'100'"</span>);
        <span class="hljs-type">Integer</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> exp1.getValue(Integer.class);
        System.out.println(<span class="hljs-string">"å­—ç¬¦ä¸²è½¬æ•´æ•°: "</span> + num);  <span class="hljs-comment">// 100</span>

        <span class="hljs-comment">// æ˜¾å¼ç±»å‹è½¬æ¢</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp2</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"T(Integer).parseInt('123')"</span>);
        <span class="hljs-type">Integer</span> <span class="hljs-variable">parsed</span> <span class="hljs-operator">=</span> exp2.getValue(Integer.class);
        System.out.println(<span class="hljs-string">"è§£ææ•´æ•°: "</span> + parsed);  <span class="hljs-comment">// 123</span>

        <span class="hljs-comment">// æ—¥æœŸè½¬æ¢</span>
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp3</span> <span class="hljs-operator">=</span> parser.parseExpression(
            <span class="hljs-string">"T(java.time.LocalDate).parse('2024-01-01')"</span>);
        <span class="hljs-type">LocalDate</span> <span class="hljs-variable">date</span> <span class="hljs-operator">=</span> exp3.getValue(LocalDate.class);
        System.out.println(<span class="hljs-string">"æ—¥æœŸ: "</span> + date);

        <span class="hljs-comment">// è‡ªå®šä¹‰ç±»å‹è½¬æ¢</span>
        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();
        <span class="hljs-type">DefaultConversionService</span> <span class="hljs-variable">conversionService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultConversionService</span>();
        conversionService.addConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringToUserConverter</span>());
        context.setTypeConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardTypeConverter</span>(conversionService));

        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp4</span> <span class="hljs-operator">=</span> parser.parseExpression(<span class="hljs-string">"'å¼ ä¸‰,25,zhangsan@example.com'"</span>);
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> exp4.getValue(context, User.class);
        System.out.println(<span class="hljs-string">"è‡ªå®šä¹‰è½¬æ¢: "</span> + user.getName());
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringToUserConverter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Converter</span>&lt;String, User&gt; {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> User <span class="hljs-title function_">convert</span><span class="hljs-params">(String source)</span> {
            String[] parts = source.split(<span class="hljs-string">","</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(parts[<span class="hljs-number">0</span>], Integer.parseInt(parts[<span class="hljs-number">1</span>]), parts[<span class="hljs-number">2</span>]);
        }
    }
}
</code></pre>
<h3 data-id="heading-22">äº”ã€å®æˆ˜æ¡ˆä¾‹</h3>
<h4 data-id="heading-23">5.1 æ¡ˆä¾‹1ï¼šåŠ¨æ€æƒé™æ ¡éªŒ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åŠ¨æ€æƒé™æ ¡éªŒç³»ç»Ÿ
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ExpressionParser parser;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, String&gt; resourcePermissions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PermissionService</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åˆå§‹åŒ–èµ„æºæƒé™è¡¨è¾¾å¼</span>
        resourcePermissions.put(<span class="hljs-string">"/api/users"</span>, <span class="hljs-string">"hasRole('ADMIN')"</span>);
        resourcePermissions.put(<span class="hljs-string">"/api/users/{id}"</span>,
            <span class="hljs-string">"hasRole('ADMIN') or #id == principal.id"</span>);
        resourcePermissions.put(<span class="hljs-string">"/api/orders"</span>,
            <span class="hljs-string">"hasRole('USER') and principal.department == 'SALES'"</span>);
    }

    <span class="hljs-comment">/**
     * æ£€æŸ¥æƒé™
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkPermission</span><span class="hljs-params">(String resource, Map&lt;String, Object&gt; variables)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">expression</span> <span class="hljs-operator">=</span> resourcePermissions.get(resource);
        <span class="hljs-keyword">if</span> (expression == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;  <span class="hljs-comment">// æ— é™åˆ¶</span>
        }

        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();

        <span class="hljs-comment">// è®¾ç½®å˜é‡</span>
        variables.forEach(context::setVariable);

        <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰å‡½æ•°</span>
        registerFunctions(context);

        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parser.parseExpression(expression);
        <span class="hljs-keyword">return</span> Boolean.TRUE.equals(exp.getValue(context, Boolean.class));
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerFunctions</span><span class="hljs-params">(StandardEvaluationContext context)</span> {
        <span class="hljs-comment">// æ³¨å†ŒhasRoleå‡½æ•°</span>
        context.setVariable(<span class="hljs-string">"hasRole"</span>, (Function&lt;String, Boolean&gt;) role -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹Ÿä»SecurityContextè·å–è§’è‰²</span>
            Set&lt;String&gt; roles = getCurrentUserRoles();
            <span class="hljs-keyword">return</span> roles.contains(role);
        });

        <span class="hljs-comment">// è®¾ç½®principal</span>
        context.setVariable(<span class="hljs-string">"principal"</span>, getCurrentUser());
    }

    <span class="hljs-keyword">private</span> Set&lt;String&gt; <span class="hljs-title function_">getCurrentUserRoles</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;(Arrays.asList(<span class="hljs-string">"USER"</span>, <span class="hljs-string">"ADMIN"</span>));
    }

    <span class="hljs-keyword">private</span> UserPrincipal <span class="hljs-title function_">getCurrentUser</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserPrincipal</span>(<span class="hljs-number">1L</span>, <span class="hljs-string">"zhangsan"</span>, <span class="hljs-string">"SALES"</span>);
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserPrincipal</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String username;
    <span class="hljs-keyword">private</span> String department;
}

<span class="hljs-comment">/**
 * ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">PermissionService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PermissionService</span>();
        service.parser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

        <span class="hljs-comment">// æ£€æŸ¥è®¿é—®/api/usersæƒé™</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">canAccess</span> <span class="hljs-operator">=</span> service.checkPermission(<span class="hljs-string">"/api/users"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;());
        System.out.println(<span class="hljs-string">"å¯ä»¥è®¿é—®ç”¨æˆ·åˆ—è¡¨: "</span> + canAccess);

        <span class="hljs-comment">// æ£€æŸ¥è®¿é—®ç‰¹å®šç”¨æˆ·æƒé™</span>
        Map&lt;String, Object&gt; vars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        vars.put(<span class="hljs-string">"id"</span>, <span class="hljs-number">1L</span>);
        <span class="hljs-type">boolean</span> <span class="hljs-variable">canAccessUser</span> <span class="hljs-operator">=</span> service.checkPermission(<span class="hljs-string">"/api/users/{id}"</span>, vars);
        System.out.println(<span class="hljs-string">"å¯ä»¥è®¿é—®ç”¨æˆ·1: "</span> + canAccessUser);
    }
}
</code></pre>
<h4 data-id="heading-24">5.2 æ¡ˆä¾‹2ï¼šåŠ¨æ€æŸ¥è¯¢æ„å»ºå™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åŠ¨æ€æŸ¥è¯¢æ„å»ºå™¨
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicQueryService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ExpressionParser parser;

    <span class="hljs-comment">/**
     * æ ¹æ®æ¡ä»¶è¡¨è¾¾å¼æ„å»ºæŸ¥è¯¢
     */</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">query</span><span class="hljs-params">(String condition, Map&lt;String, Object&gt; params)</span> {
        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();
        params.forEach(context::setVariable);

        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®</span>
        List&lt;User&gt; allUsers = Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>, <span class="hljs-string">"zhangsan@example.com"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">30</span>, <span class="hljs-string">"lisi@example.com"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-number">35</span>, <span class="hljs-string">"wangwu@example.com"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"èµµå…­"</span>, <span class="hljs-number">28</span>, <span class="hljs-string">"zhaoliu@example.com"</span>)
        );

        context.setVariable(<span class="hljs-string">"users"</span>, allUsers);

        <span class="hljs-comment">// ä½¿ç”¨SpELè¿‡æ»¤</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">expression</span> <span class="hljs-operator">=</span> <span class="hljs-string">"#users.?["</span> + condition + <span class="hljs-string">"]"</span>;
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parser.parseExpression(expression);

        <span class="hljs-keyword">return</span> (List&lt;User&gt;) exp.getValue(context);
    }

    <span class="hljs-comment">/**
     * åŠ¨æ€æ’åº
     */</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">sort</span><span class="hljs-params">(List&lt;User&gt; users, String sortExpression)</span> {
        users.sort((u1, u2) -&gt; {
            <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>(u1);
            <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>(u2);

            <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parser.parseExpression(sortExpression);
            <span class="hljs-type">Comparable</span> <span class="hljs-variable">v1</span> <span class="hljs-operator">=</span> exp.getValue(context1, Comparable.class);
            <span class="hljs-type">Comparable</span> <span class="hljs-variable">v2</span> <span class="hljs-operator">=</span> exp.getValue(context2, Comparable.class);

            <span class="hljs-keyword">return</span> v1.compareTo(v2);
        });

        <span class="hljs-keyword">return</span> users;
    }
}

<span class="hljs-comment">/**
 * ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicQueryDemo</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DynamicQueryService queryService;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDynamicQuery</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æŸ¥è¯¢å¹´é¾„å¤§äº25çš„ç”¨æˆ·</span>
        Map&lt;String, Object&gt; params1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        params1.put(<span class="hljs-string">"minAge"</span>, <span class="hljs-number">25</span>);
        List&lt;User&gt; result1 = queryService.query(<span class="hljs-string">"#this.age &gt; #minAge"</span>, params1);
        System.out.println(<span class="hljs-string">"å¹´é¾„&gt;25: "</span> + result1.size());

        <span class="hljs-comment">// æŸ¥è¯¢é‚®ç®±åŒ…å«ç‰¹å®šåŸŸåçš„ç”¨æˆ·</span>
        Map&lt;String, Object&gt; params2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        params2.put(<span class="hljs-string">"domain"</span>, <span class="hljs-string">"example.com"</span>);
        List&lt;User&gt; result2 = queryService.query(
            <span class="hljs-string">"#this.email.contains(#domain)"</span>, params2);
        System.out.println(<span class="hljs-string">"é‚®ç®±åŒ…å«example.com: "</span> + result2.size());

        <span class="hljs-comment">// å¤åˆæ¡ä»¶</span>
        Map&lt;String, Object&gt; params3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        params3.put(<span class="hljs-string">"minAge"</span>, <span class="hljs-number">25</span>);
        params3.put(<span class="hljs-string">"maxAge"</span>, <span class="hljs-number">32</span>);
        List&lt;User&gt; result3 = queryService.query(
            <span class="hljs-string">"#this.age &gt;= #minAge and #this.age &lt;= #maxAge"</span>, params3);
        System.out.println(<span class="hljs-string">"å¹´é¾„25-32: "</span> + result3.size());

        <span class="hljs-comment">// åŠ¨æ€æ’åº</span>
        List&lt;User&gt; sorted = queryService.sort(result3, <span class="hljs-string">"age"</span>);
        System.out.println(<span class="hljs-string">"æ’åºå: "</span> + sorted);
    }
}
</code></pre>
<h4 data-id="heading-25">5.3 æ¡ˆä¾‹3ï¼šé…ç½®è¡¨è¾¾å¼å¼•æ“</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * é…ç½®è¡¨è¾¾å¼å¼•æ“
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigExpressionService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> Environment environment;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ExpressionParser parser;

    <span class="hljs-comment">/**
     * è§£æé…ç½®è¡¨è¾¾å¼
     */</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">evaluateConfig</span><span class="hljs-params">(String expression, Class&lt;T&gt; type)</span> {
        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();

        <span class="hljs-comment">// æ·»åŠ ç¯å¢ƒå˜é‡</span>
        context.setVariable(<span class="hljs-string">"env"</span>, environment);

        <span class="hljs-comment">// æ·»åŠ ç³»ç»Ÿå±æ€§</span>
        context.setVariable(<span class="hljs-string">"sys"</span>, System.getProperties());

        <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰å‡½æ•°</span>
        registerFunctions(context);

        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parser.parseExpression(expression);
        <span class="hljs-keyword">return</span> exp.getValue(context, type);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerFunctions</span><span class="hljs-params">(StandardEvaluationContext context)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ³¨å†Œç¯å¢ƒç›¸å…³å‡½æ•°</span>
            context.registerFunction(<span class="hljs-string">"isProd"</span>,
                ConfigExpressionService.class.getMethod(<span class="hljs-string">"isProdEnvironment"</span>));
            context.registerFunction(<span class="hljs-string">"isWindows"</span>,
                ConfigExpressionService.class.getMethod(<span class="hljs-string">"isWindows"</span>));
        } <span class="hljs-keyword">catch</span> (NoSuchMethodException e) {
            e.printStackTrace();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isProdEnvironment</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">profile</span> <span class="hljs-operator">=</span> System.getProperty(<span class="hljs-string">"spring.profiles.active"</span>, <span class="hljs-string">""</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"prod"</span>.equals(profile);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isWindows</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> System.getProperty(<span class="hljs-string">"os.name"</span>).toLowerCase().contains(<span class="hljs-string">"win"</span>);
    }
}

<span class="hljs-comment">/**
 * é…ç½®ç±»
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicConfig</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ConfigExpressionService configService;

    <span class="hljs-comment">/**
     * åŠ¨æ€çº¿ç¨‹æ± é…ç½®
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ThreadPoolExecutor <span class="hljs-title function_">threadPoolExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ ¹æ®ç¯å¢ƒåŠ¨æ€é…ç½®</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">coreSize</span> <span class="hljs-operator">=</span> configService.evaluateConfig(
            <span class="hljs-string">"#isProd() ? 20 : 5"</span>, Integer.class);

        <span class="hljs-type">int</span> <span class="hljs-variable">maxSize</span> <span class="hljs-operator">=</span> configService.evaluateConfig(
            <span class="hljs-string">"#isProd() ? 50 : 10"</span>, Integer.class);

        <span class="hljs-type">int</span> <span class="hljs-variable">queueSize</span> <span class="hljs-operator">=</span> configService.evaluateConfig(
            <span class="hljs-string">"#isProd() ? 1000 : 100"</span>, Integer.class);

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
            coreSize, maxSize, <span class="hljs-number">60L</span>, TimeUnit.SECONDS,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(queueSize),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy()
        );
    }

    <span class="hljs-comment">/**
     * åŠ¨æ€æ•°æ®æºé…ç½®
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">HikariConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>();

        <span class="hljs-comment">// æ ¹æ®ç³»ç»ŸåŠ¨æ€é€‰æ‹©é©±åŠ¨</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> configService.evaluateConfig(
            <span class="hljs-string">"#isWindows() ? 'com.mysql.cj.jdbc.Driver' : 'org.postgresql.Driver'"</span>,
            String.class);

        config.setDriverClassName(driver);

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>(config);
    }
}
</code></pre>
<h4 data-id="heading-26">5.4 æ¡ˆä¾‹4ï¼šè§„åˆ™å¼•æ“</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç®€å•è§„åˆ™å¼•æ“
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleEngine</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ExpressionParser parser;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Rule&gt; rules = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RuleEngine</span><span class="hljs-params">()</span> {
        initRules();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initRules</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è®¢å•é‡‘é¢æŠ˜æ‰£è§„åˆ™</span>
        rules.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Rule</span>(
            <span class="hljs-string">"å¤§é¢è®¢å•æŠ˜æ‰£"</span>,
            <span class="hljs-string">"order.amount &gt; 1000"</span>,
            <span class="hljs-string">"order.discount = 0.9"</span>
        ));

        rules.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Rule</span>(
            <span class="hljs-string">"VIPç”¨æˆ·æŠ˜æ‰£"</span>,
            <span class="hljs-string">"user.vip == true"</span>,
            <span class="hljs-string">"order.discount = order.discount * 0.95"</span>
        ));

        rules.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Rule</span>(
            <span class="hljs-string">"é¦–å•ä¼˜æƒ "</span>,
            <span class="hljs-string">"user.orderCount == 0"</span>,
            <span class="hljs-string">"order.discount = order.discount * 0.85"</span>
        ));

        rules.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Rule</span>(
            <span class="hljs-string">"èŠ‚å‡æ—¥ä¼˜æƒ "</span>,
            <span class="hljs-string">"T(java.time.LocalDate).now().dayOfWeek.value &gt;= 6"</span>,
            <span class="hljs-string">"order.discount = order.discount * 0.98"</span>
        ));
    }

    <span class="hljs-comment">/**
     * æ‰§è¡Œè§„åˆ™
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(OrderContext context)</span> {
        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">evalContext</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>(context);

        <span class="hljs-keyword">for</span> (Rule rule : rules) {
            <span class="hljs-comment">// æ£€æŸ¥æ¡ä»¶</span>
            <span class="hljs-type">Expression</span> <span class="hljs-variable">conditionExp</span> <span class="hljs-operator">=</span> parser.parseExpression(rule.getCondition());
            <span class="hljs-type">Boolean</span> <span class="hljs-variable">matched</span> <span class="hljs-operator">=</span> conditionExp.getValue(evalContext, Boolean.class);

            <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(matched)) {
                System.out.println(<span class="hljs-string">"è§„åˆ™åŒ¹é…: "</span> + rule.getName());

                <span class="hljs-comment">// æ‰§è¡ŒåŠ¨ä½œ</span>
                <span class="hljs-type">Expression</span> <span class="hljs-variable">actionExp</span> <span class="hljs-operator">=</span> parser.parseExpression(rule.getAction());
                actionExp.getValue(evalContext);
            }
        }
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Rule</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String condition;
    <span class="hljs-keyword">private</span> String action;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderContext</span> {
    <span class="hljs-keyword">private</span> OrderInfo order;
    <span class="hljs-keyword">private</span> UserInfo user;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderContext</span><span class="hljs-params">(OrderInfo order, UserInfo user)</span> {
        <span class="hljs-built_in">this</span>.order = order;
        <span class="hljs-built_in">this</span>.user = user;
        <span class="hljs-built_in">this</span>.order.setDiscount(<span class="hljs-number">1.0</span>);  <span class="hljs-comment">// åˆå§‹æŠ˜æ‰£</span>
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderInfo</span> {
    <span class="hljs-keyword">private</span> BigDecimal amount;
    <span class="hljs-keyword">private</span> Double discount;

    <span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title function_">getFinalAmount</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> amount.multiply(BigDecimal.valueOf(discount));
    }
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserInfo</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> vip;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> orderCount;
}

<span class="hljs-comment">/**
 * ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleEngineDemo</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RuleEngine ruleEngine;

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testRuleEngine</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åœºæ™¯1ï¼šå¤§é¢è®¢å• + VIPç”¨æˆ·</span>
        <span class="hljs-type">OrderInfo</span> <span class="hljs-variable">order1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderInfo</span>();
        order1.setAmount(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"1500"</span>));

        <span class="hljs-type">UserInfo</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserInfo</span>();
        user1.setVip(<span class="hljs-literal">true</span>);
        user1.setOrderCount(<span class="hljs-number">5</span>);

        <span class="hljs-type">OrderContext</span> <span class="hljs-variable">context1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderContext</span>(order1, user1);
        ruleEngine.execute(context1);

        System.out.println(<span class="hljs-string">"åŸä»·: "</span> + order1.getAmount());
        System.out.println(<span class="hljs-string">"æŠ˜æ‰£: "</span> + order1.getDiscount());
        System.out.println(<span class="hljs-string">"å®ä»˜: "</span> + order1.getFinalAmount());
        System.out.println();

        <span class="hljs-comment">// åœºæ™¯2ï¼šé¦–å•ç”¨æˆ·</span>
        <span class="hljs-type">OrderInfo</span> <span class="hljs-variable">order2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderInfo</span>();
        order2.setAmount(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"500"</span>));

        <span class="hljs-type">UserInfo</span> <span class="hljs-variable">user2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserInfo</span>();
        user2.setVip(<span class="hljs-literal">false</span>);
        user2.setOrderCount(<span class="hljs-number">0</span>);

        <span class="hljs-type">OrderContext</span> <span class="hljs-variable">context2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderContext</span>(order2, user2);
        ruleEngine.execute(context2);

        System.out.println(<span class="hljs-string">"åŸä»·: "</span> + order2.getAmount());
        System.out.println(<span class="hljs-string">"æŠ˜æ‰£: "</span> + order2.getDiscount());
        System.out.println(<span class="hljs-string">"å®ä»˜: "</span> + order2.getFinalAmount());
    }
}
</code></pre>
<h3 data-id="heading-27">å…­ã€æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-28">6.1 è¡¨è¾¾å¼ç¼“å­˜</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è¡¨è¾¾å¼ç¼“å­˜
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedExpressionService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Expression&gt; cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">/**
     * è·å–è¡¨è¾¾å¼ï¼ˆå¸¦ç¼“å­˜ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> Expression <span class="hljs-title function_">getExpression</span><span class="hljs-params">(String expressionString)</span> {
        <span class="hljs-keyword">return</span> cache.computeIfAbsent(expressionString, parser::parseExpression);
    }

    <span class="hljs-comment">/**
     * è¯„ä¼°è¡¨è¾¾å¼
     */</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">evaluate</span><span class="hljs-params">(String expressionString, Object rootObject, Class&lt;T&gt; type)</span> {
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> getExpression(expressionString);
        <span class="hljs-keyword">return</span> exp.getValue(rootObject, type);
    }

    <span class="hljs-comment">/**
     * æ€§èƒ½æµ‹è¯•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performanceTest</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">expr</span> <span class="hljs-operator">=</span> <span class="hljs-string">"name.toUpperCase() + ' - ' + age"</span>;
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">25</span>, <span class="hljs-string">"zhangsan@example.com"</span>);

        <span class="hljs-comment">// ä¸ä½¿ç”¨ç¼“å­˜</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">start1</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
            parser.parseExpression(expr).getValue(user, String.class);
        }
        <span class="hljs-type">long</span> <span class="hljs-variable">time1</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start1;

        <span class="hljs-comment">// ä½¿ç”¨ç¼“å­˜</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">start2</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">Expression</span> <span class="hljs-variable">cached</span> <span class="hljs-operator">=</span> getExpression(expr);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
            cached.getValue(user, String.class);
        }
        <span class="hljs-type">long</span> <span class="hljs-variable">time2</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start2;

        System.out.println(<span class="hljs-string">"ä¸ä½¿ç”¨ç¼“å­˜: "</span> + time1 + <span class="hljs-string">"ms"</span>);
        System.out.println(<span class="hljs-string">"ä½¿ç”¨ç¼“å­˜: "</span> + time2 + <span class="hljs-string">"ms"</span>);
        System.out.println(<span class="hljs-string">"æ€§èƒ½æå‡: "</span> + (time1 - time2) + <span class="hljs-string">"ms"</span>);
    }
}
</code></pre>
<h4 data-id="heading-29">6.2 ç¼–è¯‘æ¨¡å¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç¼–è¯‘æ¨¡å¼ä¼˜åŒ–
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CompilationDemo</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">SpelExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();
        <span class="hljs-type">SpelParserConfiguration</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelParserConfiguration</span>(
            SpelCompilerMode.IMMEDIATE,  <span class="hljs-comment">// ç«‹å³ç¼–è¯‘</span>
            <span class="hljs-literal">null</span>
        );
        <span class="hljs-type">SpelExpressionParser</span> <span class="hljs-variable">compilingParser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>(config);

        <span class="hljs-type">String</span> <span class="hljs-variable">expr</span> <span class="hljs-operator">=</span> <span class="hljs-string">"#this * 2 + 1"</span>;
        List&lt;Integer&gt; numbers = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);

        <span class="hljs-comment">// æ™®é€šæ¨¡å¼</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">start1</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp1</span> <span class="hljs-operator">=</span> parser.parseExpression(expr);
        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) {
            <span class="hljs-keyword">for</span> (Integer num : numbers) {
                context1.setRootObject(num);
                exp1.getValue(context1);
            }
        }
        <span class="hljs-type">long</span> <span class="hljs-variable">time1</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start1;

        <span class="hljs-comment">// ç¼–è¯‘æ¨¡å¼</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">start2</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp2</span> <span class="hljs-operator">=</span> compilingParser.parseExpression(expr);
        <span class="hljs-type">StandardEvaluationContext</span> <span class="hljs-variable">context2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) {
            <span class="hljs-keyword">for</span> (Integer num : numbers) {
                context2.setRootObject(num);
                exp2.getValue(context2);
            }
        }
        <span class="hljs-type">long</span> <span class="hljs-variable">time2</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start2;

        System.out.println(<span class="hljs-string">"æ™®é€šæ¨¡å¼: "</span> + time1 + <span class="hljs-string">"ms"</span>);
        System.out.println(<span class="hljs-string">"ç¼–è¯‘æ¨¡å¼: "</span> + time2 + <span class="hljs-string">"ms"</span>);
        System.out.println(<span class="hljs-string">"æ€§èƒ½æå‡: "</span> + ((time1 - time2) * <span class="hljs-number">100.0</span> / time1) + <span class="hljs-string">"%"</span>);
    }
}
</code></pre>
<h3 data-id="heading-30">ä¸ƒã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-31">7.1 å®‰å…¨æ€§</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * SpELå®‰å…¨æ€§æœ€ä½³å®è·µ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityDemo</span> {

    <span class="hljs-comment">/**
     * âŒ ä¸å®‰å…¨ï¼šç›´æ¥ä½¿ç”¨ç”¨æˆ·è¾“å…¥
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unsafeEvaluation</span><span class="hljs-params">(String userInput)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parser.parseExpression(userInput);
        <span class="hljs-comment">// å±é™©ï¼ç”¨æˆ·å¯ä»¥æ‰§è¡Œä»»æ„ä»£ç </span>
        <span class="hljs-comment">// å¦‚è¾“å…¥ï¼šT(java.lang.Runtime).getRuntime().exec('rm -rf /')</span>
        exp.getValue();
    }

    <span class="hljs-comment">/**
     * âœ“ å®‰å…¨ï¼šä½¿ç”¨SimpleEvaluationContext
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">safeEvaluation</span><span class="hljs-params">(String userInput)</span> {
        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

        <span class="hljs-comment">// åˆ›å»ºå—é™çš„ä¸Šä¸‹æ–‡</span>
        <span class="hljs-type">SimpleEvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> SimpleEvaluationContext
            .forReadOnlyDataBinding()  <span class="hljs-comment">// åªè¯»ç»‘å®š</span>
            .build();

        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parser.parseExpression(userInput);
        <span class="hljs-comment">// åªèƒ½è®¿é—®æœ‰é™çš„åŠŸèƒ½</span>
        exp.getValue(context);
    }

    <span class="hljs-comment">/**
     * âœ“ å®‰å…¨ï¼šç™½åå•éªŒè¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">validatedEvaluation</span><span class="hljs-params">(String userInput)</span> {
        <span class="hljs-comment">// ç™½åå•éªŒè¯</span>
        <span class="hljs-keyword">if</span> (!isValidExpression(userInput)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"éæ³•è¡¨è¾¾å¼"</span>);
        }

        <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();
        <span class="hljs-type">Expression</span> <span class="hljs-variable">exp</span> <span class="hljs-operator">=</span> parser.parseExpression(userInput);
        exp.getValue();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValidExpression</span><span class="hljs-params">(String expr)</span> {
        <span class="hljs-comment">// åªå…è®¸ç®€å•çš„å±æ€§è®¿é—®å’Œè¿ç®—ç¬¦</span>
        <span class="hljs-keyword">return</span> expr.matches(<span class="hljs-string">"^[a-zA-Z0-9.+\\-*/()\\s]+$"</span>);
    }
}
</code></pre>
<h4 data-id="heading-32">7.2 é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * é”™è¯¯å¤„ç†æœ€ä½³å®è·µ
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorHandlingDemo</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();

    <span class="hljs-comment">/**
     * å®‰å…¨çš„è¡¨è¾¾å¼æ±‚å€¼
     */</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; Optional&lt;T&gt; <span class="hljs-title function_">safeEvaluate</span><span class="hljs-params">(String expr, Object root, Class&lt;T&gt; type)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Expression</span> <span class="hljs-variable">expression</span> <span class="hljs-operator">=</span> parser.parseExpression(expr);
            <span class="hljs-type">T</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> expression.getValue(root, type);
            <span class="hljs-keyword">return</span> Optional.ofNullable(value);

        } <span class="hljs-keyword">catch</span> (ParseException e) {
            <span class="hljs-comment">// è¡¨è¾¾å¼è¯­æ³•é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"è¡¨è¾¾å¼è§£æå¤±è´¥: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> Optional.empty();

        } <span class="hljs-keyword">catch</span> (EvaluationException e) {
            <span class="hljs-comment">// è¡¨è¾¾å¼æ±‚å€¼é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"è¡¨è¾¾å¼æ±‚å€¼å¤±è´¥: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> Optional.empty();

        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å…¶ä»–é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"æœªçŸ¥é”™è¯¯: "</span> + e.getMessage());
            <span class="hljs-keyword">return</span> Optional.empty();
        }
    }

    <span class="hljs-comment">/**
     * å¸¦é»˜è®¤å€¼çš„æ±‚å€¼
     */</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">evaluateWithDefault</span><span class="hljs-params">(String expr, Object root,
                                     Class&lt;T&gt; type, T defaultValue)</span> {
        <span class="hljs-keyword">return</span> safeEvaluate(expr, root, type).orElse(defaultValue);
    }
}
</code></pre>
<h3 data-id="heading-33">å…«ã€æ€»ç»“</h3>
<h4 data-id="heading-34">æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾</h4>
<pre><code class="hljs language-scss" lang="scss">Springè¡¨è¾¾å¼è¯­è¨€(SpEL)æ ¸å¿ƒè¦ç‚¹
â”‚
â”œâ”€â”€ åŸºç¡€è¯­æ³•
â”‚   â”œâ”€â”€ å­—é¢é‡è¡¨è¾¾å¼
â”‚   â”œâ”€â”€ å±æ€§è®¿é—®ï¼ˆå«å®‰å…¨å¯¼èˆªï¼‰
â”‚   â”œâ”€â”€ æ–¹æ³•è°ƒç”¨
â”‚   â”œâ”€â”€ è¿ç®—ç¬¦
â”‚   â”œâ”€â”€ é›†åˆæ“ä½œ
â”‚   â””â”€â”€ æ­£åˆ™è¡¨è¾¾å¼
â”‚
â”œâ”€â”€ Springé›†æˆ
â”‚   â”œâ”€â”€ <span class="hljs-keyword">@Value</span>æ³¨è§£
â”‚   â”œâ”€â”€ Spring Cache
â”‚   â”œâ”€â”€ Spring Security
â”‚   â””â”€â”€ äº‹ä»¶ç›‘å¬
â”‚
â”œâ”€â”€ é«˜çº§ç‰¹æ€§
â”‚   â”œâ”€â”€ è‡ªå®šä¹‰å‡½æ•°
â”‚   â”œâ”€â”€ å˜é‡å®šä¹‰
â”‚   â”œâ”€â”€ Beanå¼•ç”¨
â”‚   â””â”€â”€ ç±»å‹è½¬æ¢
â”‚
â”œâ”€â”€ å®æˆ˜åº”ç”¨
â”‚   â”œâ”€â”€ åŠ¨æ€æƒé™æ ¡éªŒ
â”‚   â”œâ”€â”€ åŠ¨æ€æŸ¥è¯¢æ„å»º
â”‚   â”œâ”€â”€ é…ç½®è¡¨è¾¾å¼å¼•æ“
â”‚   â””â”€â”€ è§„åˆ™å¼•æ“
â”‚
â””â”€â”€ æœ€ä½³å®è·µ
    â”œâ”€â”€ è¡¨è¾¾å¼ç¼“å­˜
    â”œâ”€â”€ ç¼–è¯‘æ¨¡å¼
    â”œâ”€â”€ å®‰å…¨æ€§æ§åˆ¶
    â””â”€â”€ é”™è¯¯å¤„ç†
</code></pre>
<p>SpELæ˜¯Springæ¡†æ¶çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒæä¾›äº†å¼ºå¤§è€Œçµæ´»çš„è¡¨è¾¾å¼è®¡ç®—èƒ½åŠ›ã€‚æŒæ¡SpELä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ä½¿ç”¨Springçš„å„ç§ç‰¹æ€§ï¼Œè¿˜èƒ½åœ¨å®é™…é¡¹ç›®ä¸­æ„å»ºåŠ¨æ€ã€å¯é…ç½®çš„ç³»ç»Ÿã€‚åœ¨ä½¿ç”¨SpELæ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„å®‰å…¨æ€§é—®é¢˜ï¼Œé¿å…æ‰§è¡Œä¸å—ä¿¡ä»»çš„è¡¨è¾¾å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¼€å‘è§„èŒƒ]]></title>    <link>https://juejin.cn/post/7575022279568572457</link>    <guid>https://juejin.cn/post/7575022279568572457</guid>    <pubDate>2025-11-22T02:25:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575022279568572457" data-draft-id="7569810118169395215" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¼€å‘è§„èŒƒ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-22T02:25:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‡Œæ™¨èµ·åºŠ"/> <meta itemprop="url" content="https://juejin.cn/user/3642007770904605"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¼€å‘è§„èŒƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3642007770904605/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‡Œæ™¨èµ·åºŠ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:25:21.000Z" title="Sat Nov 22 2025 02:25:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ç«¯å¼€å‘è§„èŒƒï¼Œæ¶µç›–ä»£ç ç»†èŠ‚ã€å·¥ç¨‹åŒ–ã€åä½œæµç¨‹ç­‰ç»´åº¦ï¼Œç»“åˆå®é™…åœºæ™¯è¡¥å……å…·ä½“è§„åˆ™å’Œç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€HTML è§„èŒƒ</h3>
<h4 data-id="heading-1">1. æ–‡æ¡£ç»“æ„ä¸å…ƒä¿¡æ¯</h4>
<ul>
<li>
<p><strong>DOCTYPE ä¸å‘½åç©ºé—´</strong>ï¼šå¿…é¡»ä»¥ <code>&lt;!DOCTYPE html&gt;</code> å¼€å¤´ï¼Œ<code>html</code> æ ‡ç­¾éœ€æŒ‡å®š <code>lang</code>ï¼ˆå¦‚ <code>zh-CN</code> å¯¹åº”ä¸­æ–‡ï¼Œ<code>en</code> å¯¹åº”è‹±æ–‡ï¼‰ï¼Œé¿å… <code>xmlns</code> ç­‰å†—ä½™å‘½åç©ºé—´ï¼ˆHTML5 å·²åºŸå¼ƒï¼‰ã€‚</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span> <span class="hljs-comment">&lt;!-- æ­£ç¡® --&gt;</span>
<span class="hljs-comment">&lt;!-- &lt;html lang="zh" xmlns="http://www.w3.org/1999/xhtml"&gt; é”™è¯¯ï¼ˆå†—ä½™xmlnsï¼‰ --&gt;</span>

</code></pre>
</li>
<li>
<p><strong>head æ ‡ç­¾é¡ºåº</strong>ï¼šæŒ‰ã€Œå…³é”®ä¼˜å…ˆçº§ã€æ’åºï¼š<code>meta charset</code>ï¼ˆå¿…é¡»é¦–è¡Œï¼Œé¿å…ä¹±ç ï¼‰â†’ <code>title</code> â†’ <code>meta:viewport</code> â†’ <code>meta</code>ï¼ˆSEO/å®‰å…¨ç›¸å…³ï¼‰â†’ <code>link</code>ï¼ˆæ ·å¼ï¼‰â†’ <code>script</code>ï¼ˆå¼‚æ­¥è„šæœ¬æ”¾åº•éƒ¨ï¼‰ã€‚</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é¦–é¡µ - æŸæŸå¹³å°<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"keywords"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"å‰ç«¯, è§„èŒƒ"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"description"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"è¯¦ç»†çš„å‰ç«¯å¼€å‘è§„èŒƒæ–‡æ¡£"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge"</span>&gt;</span> <span class="hljs-comment">&lt;!-- å…¼å®¹IE --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"base.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-2">2. è¯­ä¹‰åŒ–æ·±åº¦è§„èŒƒ</h4>
<ul>
<li>
<p><strong>ç»†åˆ†æ ‡ç­¾ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>
<p><code>&lt;figure&gt;</code> + <code>&lt;figcaption&gt;</code>ï¼šåŒ…è£¹å›¾ç‰‡/å›¾è¡¨+è¯´æ˜ï¼ˆå¦‚ <code>figure &gt; img + figcaption</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>&lt;time&gt;</code>ï¼šæ ‡è®°æ—¶é—´ï¼ˆéœ€åŠ  <code>datetime</code> å±æ€§ï¼Œå¦‚ <code>&lt;time datetime="2025-11-08"&gt;2025å¹´11æœˆ8æ—¥&lt;/time&gt;</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>&lt;address&gt;</code>ï¼šæ ‡è®°è”ç³»ä¿¡æ¯ï¼ˆä»…ç”¨äºé¡µé¢ä½œè€…/æœºæ„è”ç³»æ–¹å¼ï¼‰ï¼›</p>
</li>
<li>
<p><code>&lt;dialog&gt;</code>ï¼šæ ‡è®°å¯¹è¯æ¡†ï¼ˆé…åˆ <code>open</code> å±æ€§æ§åˆ¶æ˜¾ç¤ºï¼Œå¦‚ <code>&lt;dialog open&gt;ç¡®è®¤åˆ é™¤ï¼Ÿ&lt;/dialog&gt;</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>è¡¨å•è¯­ä¹‰åŒ–</strong>ï¼š</p>
<ul>
<li>
<p>ç”¨ <code>&lt;fieldset&gt;</code> åŒ…è£¹å…³è”è¡¨å•å…ƒç´ ï¼Œ<code>&lt;legend&gt;</code> æè¿°åˆ†ç»„æ ‡é¢˜ï¼›</p>
</li>
<li>
<p><code>label</code> å¿…é¡»é€šè¿‡ <code>for</code> ä¸ <code>input</code> çš„ <code>id</code> å…³è”ï¼ˆæˆ–ç›´æ¥åŒ…è£¹ <code>input</code>ï¼‰ï¼Œæå‡ç‚¹å‡»åŒºåŸŸï¼›</p>
</li>
<li>
<p>ä¼˜å…ˆä½¿ç”¨è¯­ä¹‰åŒ–è¾“å…¥ç±»å‹ï¼ˆ<code>type="email"</code>/<code>tel</code>/<code>number</code>ï¼‰ï¼Œè€Œéé€šç”¨ <code>text</code>ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">fieldset</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">legend</span>&gt;</span>ç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">legend</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"username"</span>&gt;</span>ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"agree"</span>&gt;</span> åŒæ„åè®®
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-3">3. æ€§èƒ½ä¸å…¼å®¹æ€§</h4>
<ul>
<li>
<p><strong>é¿å…å†—ä½™æ ‡ç­¾</strong>ï¼šä¸åµŒå¥—æ— æ„ä¹‰çš„çˆ¶çº§ï¼ˆå¦‚ <code>&lt;div&gt;&lt;span&gt;æ–‡æœ¬&lt;/span&gt;&lt;/div&gt;</code> å¯ç®€åŒ–ä¸º <code>&lt;span&gt;æ–‡æœ¬&lt;/span&gt;</code>ï¼Œé™¤éæœ‰æ ·å¼éœ€æ±‚ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å›¾ç‰‡ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>
<p>å¿…åŠ  <code>width</code>/<code>height</code> å±æ€§ï¼ˆé¿å…å¸ƒå±€åç§» CLSï¼‰ï¼›</p>
</li>
<li>
<p>ä¼˜å…ˆä½¿ç”¨ <code>webp</code> æ ¼å¼ï¼Œé…åˆ <code>picture</code> æ ‡ç­¾åšé™çº§ï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"image.webp"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"image/webp"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"image.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"200"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"150"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">äºŒã€CSS/SCSS è§„èŒƒ</h3>
<h4 data-id="heading-5">1. å‘½åä½“ç³»ï¼ˆBEM æ‰©å±•ï¼‰</h4>
<ul>
<li>
<p><strong>å‘½åç©ºé—´</strong>ï¼šåœ¨ BEM åŸºç¡€ä¸Šå¢åŠ å‰ç¼€ï¼ŒåŒºåˆ†ç»„ä»¶ç±»å‹ï¼š</p>
<ul>
<li>
<p><code>c-</code>ï¼šé€šç”¨ç»„ä»¶ï¼ˆ<code>c-button</code>ã€<code>c-card</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>m-</code>ï¼šæ¨¡å—ï¼ˆ<code>m-header</code>ã€<code>m-footer</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>u-</code>ï¼šå·¥å…·ç±»ï¼ˆ<code>u-mt10</code> å³ <code>margin-top:10px</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>is-</code>/<code>has-</code>ï¼šçŠ¶æ€ï¼ˆ<code>is-active</code>ã€<code>has-error</code>ï¼‰ã€‚ç¤ºä¾‹ï¼š<code>c-button__icon--large</code>ï¼ˆç»„ä»¶-æŒ‰é’®çš„å›¾æ ‡å…ƒç´ -å¤§å°ºå¯¸ä¿®é¥°ç¬¦ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>ç¦æ­¢æ ·å¼æ±¡æŸ“</strong>ï¼šé¡µé¢çº§æ ·å¼éœ€åŠ é¡µé¢å‰ç¼€ï¼ˆå¦‚ <code>page-home__title</code>ï¼‰ï¼Œé¿å…å½±å“å…¨å±€ï¼›ç»„ä»¶æ ·å¼é€šè¿‡ CSS Modules æˆ– scopedï¼ˆVueï¼‰éš”ç¦»ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">2. é€‰æ‹©å™¨ä¸æƒé‡</h4>
<ul>
<li>
<p><strong>æƒé‡ä¼˜å…ˆçº§</strong>ï¼šç¦æ­¢ä½¿ç”¨ã€Œæ ‡ç­¾+IDã€ï¼ˆ<code>div#box</code>ï¼‰æˆ–ã€Œå¤šå±‚ç±»åµŒå¥—ã€ï¼ˆ<code>.a .b .c .d</code>ï¼‰ï¼Œæƒé‡æ§åˆ¶åœ¨ <code>(0,2,0)</code> ä»¥å†…ï¼ˆå³æœ€å¤š 2 ä¸ªç±»é€‰æ‹©å™¨ï¼Œå¦‚ <code>.a.b</code> æˆ– <code>.a .b</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä¼ªç±»/ä¼ªå…ƒç´ ä½¿ç”¨</strong>ï¼š</p>
<ul>
<li>
<p>ä¼ªç±»ï¼ˆ<code>:hover</code>/<code>:focus</code>ï¼‰ç”¨äºçŠ¶æ€ï¼Œä¼ªå…ƒç´ ï¼ˆ<code>::before</code>/<code>::after</code>ï¼‰ç”¨äºè£…é¥°æ€§å†…å®¹ï¼ˆéœ€åŠ  <code>content: ''</code>ï¼‰ï¼›</p>
</li>
<li>
<p>å¿…å†™ <code>:focus</code> æ ·å¼ï¼ˆæ— éšœç¢è¦æ±‚ï¼Œå¦‚ <code>outline: 2px solid #165DFF</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-7">3. SCSS è¯­æ³•è§„èŒƒ</h4>
<ul>
<li>
<p><strong>åµŒå¥—é™åˆ¶</strong>ï¼šæœ€å¤šåµŒå¥— 2 å±‚ï¼ˆé¿å…ç¼–è¯‘åç”Ÿæˆå†—ä½™é€‰æ‹©å™¨ï¼‰ï¼š</p>
<pre><code class="hljs language-SCSS" lang="SCSS"><span class="hljs-selector-class">.c-card</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span>;
    &amp;__title { <span class="hljs-comment">// 1å±‚åµŒå¥—</span>
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
        &amp;<span class="hljs-attr">--bold</span> { <span class="hljs-comment">// 2å±‚åµŒå¥—ï¼ˆå…è®¸ï¼‰</span>
        <span class="hljs-attribute">font-weight</span>: bold;
        }
    }
    <span class="hljs-comment">// &amp;__content .item { é”™è¯¯ï¼ˆ3å±‚åµŒå¥—ï¼‰ }</span>
}
</code></pre>
</li>
<li>
<p><strong>å˜é‡ä¸æ··åˆå®</strong>ï¼š</p>
<ul>
<li>
<p>å…¨å±€å˜é‡é›†ä¸­ç®¡ç†ï¼ˆå¦‚ <code>_variables.scss</code> å®šä¹‰ <code>$color-primary: #165DFF</code>ï¼‰ï¼›</p>
</li>
<li>
<p>é‡å¤é€»è¾‘ç”¨ <code>@mixin</code>ï¼ˆå¸¦å‚æ•°ï¼‰ï¼Œè€Œéå¤åˆ¶ä»£ç ï¼š</p>
<pre><code class="hljs language-SCSS" lang="SCSS"><span class="hljs-keyword">@mixin</span> flex-center {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
}
<span class="hljs-selector-class">.c-button</span> { <span class="hljs-keyword">@include</span> flex-center; }
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">4. å“åº”å¼ä¸é€‚é…</h4>
<ul>
<li>
<p><strong>æ–­ç‚¹è§„èŒƒ</strong>ï¼šç»Ÿä¸€ä½¿ç”¨ç§»åŠ¨ä¼˜å…ˆç­–ç•¥ï¼Œæ–­ç‚¹å‘½åä¸å€¼ï¼š</p>
<pre><code class="hljs language-SCSS" lang="SCSS"><span class="hljs-comment">// ä»å°åˆ°å¤§ï¼šxs(æ‰‹æœº) â†’ sm(å¹³æ¿) â†’ md(å°å±æ¡Œé¢) â†’ lg(å¤§å±æ¡Œé¢)</span>
<span class="hljs-variable">$breakpoints</span>: (
  xs: <span class="hljs-number">0</span>,
  sm: <span class="hljs-number">576px</span>,
  md: <span class="hljs-number">768px</span>,
  lg: <span class="hljs-number">1200px</span>
);
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: map-get(<span class="hljs-variable">$breakpoints</span>, md)) { /\* ä¸­ç­‰å±å¹•æ ·å¼ \*/ }
</code></pre>
</li>
<li>
<p><strong>å•ä½ä½¿ç”¨</strong>ï¼š</p>
<ul>
<li>
<p>å¸ƒå±€å°ºå¯¸ç”¨ <code>rem</code>ï¼ˆæ ¹å­—ä½“é»˜è®¤ 16pxï¼Œ1rem=16pxï¼‰æˆ– <code>vw</code>ï¼ˆç§»åŠ¨ç«¯ï¼‰ï¼›</p>
</li>
<li>
<p>å†…è¾¹è·/è¾¹æ¡†ç”¨ <code>px</code>ï¼ˆé¿å…ç¼©æ”¾æ¨¡ç³Šï¼‰ï¼›</p>
</li>
<li>
<p>å­—ä½“å¤§å°ç”¨ <code>rem</code>ï¼ˆä¾¿äºå…¨å±€è°ƒæ•´ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">ä¸‰ã€JavaScript/TypeScript è§„èŒƒï¼ˆå¢å¼ºç‰ˆï¼‰</h3>
<h4 data-id="heading-10">1. å˜é‡ä¸ç±»å‹</h4>
<ul>
<li>
<p><strong>ç±»å‹çº¦æŸ</strong>ï¼šä¼˜å…ˆä½¿ç”¨ TypeScriptï¼Œæ˜ç¡®å˜é‡ç±»å‹ï¼ˆé¿å… <code>any</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// æ­£ç¡®ï¼šæŒ‡å®šç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'å¼ ä¸‰'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-attr">userList</span>: <span class="hljs-title class_">User</span>\[] = \[{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> }];

<span class="hljs-comment">// é”™è¯¯ï¼šéšå¼any</span>
<span class="hljs-comment">// const data = fetchData(); // åº”æ”¹ä¸º const data: Data = fetchData();</span>
</code></pre>
</li>
<li>
<p><strong>å¯¹è±¡/æ•°ç»„å£°æ˜</strong>ï¼š</p>
<ul>
<li>
<p>ç”¨å­—é¢é‡å£°æ˜ï¼ˆ<code>const obj = {}</code> è€Œé <code>new Object()</code>ï¼‰ï¼›</p>
</li>
<li>
<p>æ•°ç»„åˆå§‹åŒ–æŒ‡å®šç±»å‹ï¼ˆ<code>const arr: number[] = []</code> è€Œé <code>[]</code>ï¼‰ï¼›</p>
</li>
<li>
<p>ç¦æ­¢ä¿®æ”¹åŸæ•°ç»„/å¯¹è±¡ï¼ˆç”¨ <code>map</code>/<code>filter</code> æ›¿ä»£ <code>for</code> å¾ªç¯ä¿®æ”¹ï¼Œç”¨æ‰©å±•è¿ç®—ç¬¦å¤åˆ¶ï¼š<code>const newObj = { ...obj }</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-11">2. å‡½æ•°è®¾è®¡</h4>
<ul>
<li>
<p><strong>å‚æ•°è§„èŒƒ</strong>ï¼š</p>
<ul>
<li>
<p>æœ€å¤š 3 ä¸ªå‚æ•°ï¼ˆè¶…è¿‡ç”¨å¯¹è±¡èšåˆï¼‰ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params">{ id, name, age }</span>) { <span class="hljs-regexp">/\* ... \*/</span> }
<span class="hljs-title function_">getUser</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span> });

<span class="hljs-comment">// é”™è¯¯ï¼ˆå‚æ•°è¿‡å¤šï¼‰</span>
<span class="hljs-comment">// function getUser(id, name, age, gender, address) { ... }</span>
</code></pre>
</li>
</ul>
<ul>
<li>å¿…ä¼ å‚æ•°æ”¾å‰ï¼Œå¯é€‰å‚æ•°æ”¾åï¼Œå¯é€‰å‚æ•°ç”¨ <code>?</code> æ ‡è®°ï¼ˆTSï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>è¿”å›å€¼</strong>ï¼š</p>
<ul>
<li>
<p>å‡½æ•°å¿…é¡»æœ‰è¿”å›å€¼ï¼ˆæ— æ„ä¹‰è¿”å› <code>void</code>ï¼‰ï¼›</p>
</li>
<li>
<p>å¼‚æ­¥å‡½æ•°å¿…é¡»è¿”å› <code>Promise</code>ï¼Œä¸”æ˜ç¡® resolve/reject ç±»å‹ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">3. å¼‚æ­¥å¤„ç†</h4>
<ul>
<li>
<p><strong>é”™è¯¯æ•è·</strong>ï¼š</p>
<ul>
<li>
<p><code>async/await</code> å¿…é¡»ç”¨ <code>try/catch</code> åŒ…è£¹ï¼ˆæˆ–ç”¨ç»Ÿä¸€é”™è¯¯å¤„ç†å‡½æ•°ï¼‰ï¼›</p>
</li>
<li>
<p><code>Promise</code> é“¾å¼è°ƒç”¨å¿…é¡»åŠ  <code>catch</code>ï¼Œç¦æ­¢ä¸¢å¤±é”™è¯¯ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// æ­£ç¡®</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/data'</span>);
        <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>;
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, err);
        <span class="hljs-keyword">throw</span> err; <span class="hljs-comment">// å‘ä¸Šä¼ é€’é”™è¯¯</span>
    }
}

<span class="hljs-comment">// é”™è¯¯ï¼ˆæœªæ•è·é”™è¯¯ï¼‰</span>
<span class="hljs-comment">// axios.get('/api/data').then(res =&gt; res.data);</span>
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>å¹¶å‘æ§åˆ¶</strong>ï¼š</p>
<ul>
<li>
<p>å¹¶è¡Œè¯·æ±‚ç”¨ <code>Promise.all</code>ï¼ˆå…¨éƒ¨æˆåŠŸï¼‰æˆ– <code>Promise.allSettled</code>ï¼ˆå…è®¸éƒ¨åˆ†å¤±è´¥ï¼‰ï¼›</p>
</li>
<li>
<p>é™åˆ¶å¹¶å‘æ•°ï¼ˆå¦‚ç”¨ <code>p-limit</code> åº“ï¼Œé¿å…è¯·æ±‚é£æš´ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-13">4. æ¨¡å—åŒ–ä¸ä¾èµ–</h4>
<ul>
<li>
<p><strong>å¯¼å…¥å¯¼å‡º</strong>ï¼š</p>
<ul>
<li>
<p>ä¼˜å…ˆç”¨ <code>export default</code> å¯¼å‡ºå•ä¸ªç»„ä»¶/ç±»ï¼Œ<code>export</code> å¯¼å‡ºå·¥å…·å‡½æ•°é›†åˆï¼›</p>
</li>
<li>
<p>å¯¼å…¥è·¯å¾„ï¼šç›¸å¯¹è·¯å¾„ç”¨ <code>./</code>ï¼ˆåŒç›®å½•ï¼‰ã€<code>../</code>ï¼ˆçˆ¶ç›®å½•ï¼‰ï¼Œç»å¯¹è·¯å¾„é…ç½®åˆ«åï¼ˆå¦‚ <code>@/utils</code> æŒ‡å‘ <code>src/utils</code>ï¼‰ï¼›</p>
</li>
<li>
<p>ç¦æ­¢å¾ªç¯ä¾èµ–ï¼ˆA ä¾èµ– Bï¼ŒB ä¾èµ– Aï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–ç®¡ç†</strong>ï¼š</p>
<ul>
<li>
<p>ç¬¬ä¸‰æ–¹åº“ä¼˜å…ˆç”¨ <code>peerDependencies</code>ï¼ˆå¦‚ UI ç»„ä»¶åº“ï¼‰ï¼Œé¿å…é‡å¤å®‰è£…ï¼›</p>
</li>
<li>
<p>å·¥å…·å‡½æ•°ä¼˜å…ˆå°è£…åˆ° <code>utils</code>ï¼Œé¿å…é‡å¤ä»£ç ï¼ˆå¦‚ <code>formatDate</code>ã€<code>deepClone</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-14">å››ã€å·¥ç¨‹åŒ–ä¸å·¥å…·é“¾ï¼ˆå¢å¼ºç‰ˆï¼‰</h3>
<h4 data-id="heading-15">1. ESLint + Prettier é…ç½®</h4>
<ul>
<li>
<p><strong>æ ¸å¿ƒè§„åˆ™</strong>ï¼ˆ<code>.eslintrc.js</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">extends</span>: [
        <span class="hljs-string">'eslint:recommended'</span>,
        <span class="hljs-string">'plugin:react/recommended'</span>, <span class="hljs-comment">// Reacté¡¹ç›®</span>
        <span class="hljs-string">'plugin:vue/vue3-essential'</span>, <span class="hljs-comment">// Vueé¡¹ç›®</span>
        <span class="hljs-string">'prettier'</span> <span class="hljs-comment">// å…³é—­ä¸Prettierå†²çªçš„è§„åˆ™</span>
    ],
    <span class="hljs-attr">rules</span>: {
        <span class="hljs-string">'no-console'</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'error'</span> : <span class="hljs-string">'warn'</span>, <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒç¦æ­¢console</span>
        <span class="hljs-string">'no-unused-vars'</span>: [<span class="hljs-string">'error'</span>, { <span class="hljs-attr">vars</span>: <span class="hljs-string">'all'</span>, <span class="hljs-attr">args</span>: <span class="hljs-string">'after-used'</span> }], <span class="hljs-comment">// ç¦æ­¢æœªä½¿ç”¨çš„å˜é‡</span>
        <span class="hljs-string">'indent'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-number">2</span>, { <span class="hljs-title class_">SwitchCase</span>: <span class="hljs-number">1</span> }], <span class="hljs-comment">// ç¼©è¿›2ç©ºæ ¼</span>
        <span class="hljs-string">'quotes'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-string">'single'</span>], <span class="hljs-comment">// å•å¼•å·</span>
        <span class="hljs-string">'semi'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-string">'always'</span>] <span class="hljs-comment">// å¼ºåˆ¶åˆ†å·</span>
    }
};
</code></pre>
</li>
<li>
<p><strong>Prettier é…ç½®</strong>ï¼ˆ<code>.prettierrc</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-JSON" lang="JSON"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"printWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ¯è¡Œæœ€å¤š100å­—ç¬¦</span>
    <span class="hljs-attr">"tabWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åˆ¶è¡¨ç¬¦å®½åº¦2</span>
    <span class="hljs-attr">"singleQuote"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å•å¼•å·</span>
    <span class="hljs-attr">"trailingComma"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"all"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æœ«å°¾é€—å·ï¼ˆå¦‚æ•°ç»„æœ€åä¸€é¡¹ï¼‰</span>
    <span class="hljs-attr">"arrowParens"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"always"</span> <span class="hljs-comment">// ç®­å¤´å‡½æ•°å‚æ•°å¿…åŠ æ‹¬å·ï¼ˆ(x) =&gt; xï¼‰</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-16">2. Git å·¥ä½œæµä¸æäº¤è§„èŒƒ</h4>
<ul>
<li>
<p><strong>åˆ†æ”¯ç­–ç•¥</strong>ï¼ˆGit Flow ç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<ul>
<li>
<p><code>main</code>ï¼šç”Ÿäº§ç¯å¢ƒä»£ç ï¼Œç¦æ­¢ç›´æ¥æäº¤ï¼›</p>
</li>
<li>
<p><code>develop</code>ï¼šå¼€å‘ä¸»åˆ†æ”¯ï¼Œä» <code>main</code> åˆ›å»ºï¼Œç”¨äºé›†æˆåŠŸèƒ½ï¼›</p>
</li>
<li>
<p><code>feature/xxx</code>ï¼šåŠŸèƒ½åˆ†æ”¯ï¼ˆä» <code>develop</code> åˆ›å»ºï¼Œå®Œæˆååˆå¹¶å› <code>develop</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>fix/xxx</code>ï¼šä¿®å¤åˆ†æ”¯ï¼ˆä» <code>develop</code> åˆ›å»ºï¼Œä¿®å¤ååˆå¹¶å› <code>develop</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>release/v1.0.0</code>ï¼šå‘å¸ƒåˆ†æ”¯ï¼ˆä» <code>develop</code> åˆ›å»ºï¼Œæµ‹è¯•é€šè¿‡ååˆå¹¶åˆ° <code>main</code> å’Œ <code>develop</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>æäº¤ä¿¡æ¯å¢å¼º</strong>ï¼šé™¤åŸºç¡€ <code>type(scope): desc</code> å¤–ï¼Œå¤æ‚æäº¤éœ€åŠ ã€Œè¯¦ç»†æè¿°ã€å’Œã€Œå…³è”issueã€ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">feat(login): æ”¯æŒæ‰‹æœºå·éªŒè¯ç ç™»å½•
*   æ–°å¢éªŒè¯ç è¾“å…¥æ¡†ç»„ä»¶

*   é›†æˆçŸ­ä¿¡å‘é€API

*   ä¼˜åŒ–ç™»å½•çŠ¶æ€æ ¡éªŒé€»è¾‘

Close #123ï¼ˆå…³é—­issue 123ï¼‰

</code></pre>
</li>
</ul>
<h4 data-id="heading-17">3. æ„å»ºä¸éƒ¨ç½²</h4>
<ul>
<li>
<p><strong>æ„å»ºä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>
<p>ä»£ç åˆ†å‰²ï¼ˆ<code>splitChunks</code> æå–å…¬å…±åº“ï¼Œå¦‚ <code>react</code>ã€<code>vue</code>ï¼‰ï¼›</p>
</li>
<li>
<p>æ ‘æ‘‡ï¼ˆ<code>tree-shaking</code> ç§»é™¤æœªä½¿ç”¨ä»£ç ï¼Œéœ€ ES æ¨¡å—ï¼‰ï¼›</p>
</li>
<li>
<p>å›¾ç‰‡å‹ç¼©ï¼ˆ<code>image-webpack-loader</code>ï¼‰ã€CSS æå–ï¼ˆ<code>mini-css-extract-plugin</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>ç¯å¢ƒåŒºåˆ†</strong>ï¼šé…ç½® <code>env.development</code>/<code>env.production</code>/<code>env.test</code>ï¼ŒåŒºåˆ† API åœ°å€ã€æ—¥å¿—çº§åˆ«ç­‰ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å¼€å‘ç¯å¢ƒ</span>
<span class="hljs-variable constant_">VITE</span>\_API\_BASE\_URL = <span class="hljs-string">'/api'</span> <span class="hljs-comment">// æœ¬åœ°ä»£ç†</span>
<span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒ</span>
<span class="hljs-variable constant_">VITE</span>\_API\_BASE\_URL = <span class="hljs-string">'&lt;https://api.example.com&gt;'</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-18">äº”ã€æ¡†æ¶ç‰¹å®šè§„èŒƒï¼ˆVue3 + Reactï¼‰</h3>
<h4 data-id="heading-19">1. Vue3 è§„èŒƒ</h4>
<ul>
<li>
<p><strong>å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">&lt;template&gt; &lt;!-- æ¨¡æ¿ --&gt; &lt;/template&gt;

&lt;script setup lang="ts"&gt; &lt;!-- é€»è¾‘ï¼ˆä¼˜å…ˆsetupè¯­æ³•ç³–ï¼‰ --&gt; &lt;/script&gt;

&lt;style scoped lang="scss"&gt; &lt;!-- æ ·å¼ï¼ˆscopedéš”ç¦»ï¼‰ --&gt; &lt;/style&gt;
</code></pre>
</li>
<li>
<p><strong>Composition API è§„åˆ™</strong>ï¼š</p>
<ul>
<li>
<p><code>ref</code> ç”¨äºåŸºæœ¬ç±»å‹ï¼Œ<code>reactive</code> ç”¨äºå¯¹è±¡ï¼ˆé¿å… <code>reactive</code> åŒ…è£¹åŸºæœ¬ç±»å‹ï¼‰ï¼›</p>
</li>
<li>
<p>è‡ªå®šä¹‰é’©å­ä»¥ <code>use</code> å¼€å¤´ï¼ˆå¦‚ <code>useUserInfo</code>ï¼‰ï¼›</p>
</li>
<li>
<p>é¿å…åœ¨ <code>template</code> ä¸­ç›´æ¥ä½¿ç”¨ <code>reactive</code> å¯¹è±¡çš„å±æ€§ï¼ˆç”¨ <code>toRefs</code> è§£æ„ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-20">2. React è§„èŒƒ</h4>
<ul>
<li>
<p><strong>ç»„ä»¶è®¾è®¡</strong>ï¼š</p>
<ul>
<li>
<p>ä¼˜å…ˆç”¨å‡½æ•°ç»„ä»¶ + Hooksï¼Œé¿å… class ç»„ä»¶ï¼›</p>
</li>
<li>
<p>ç»„ä»¶æ‹†åˆ†ï¼šUI ç»„ä»¶ï¼ˆçº¯å±•ç¤ºï¼Œå¦‚ <code>Button</code>ï¼‰ä¸å®¹å™¨ç»„ä»¶ï¼ˆå¸¦é€»è¾‘ï¼Œå¦‚ <code>UserListContainer</code>ï¼‰åˆ†ç¦»ï¼›</p>
</li>
<li>
<p>Hooks è§„åˆ™ï¼šåªåœ¨é¡¶å±‚è°ƒç”¨ï¼Œåªåœ¨å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ï¼ˆç¦æ­¢æ¡ä»¶åˆ¤æ–­å†…ä½¿ç”¨ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>Props ä¼ é€’</strong>ï¼š</p>
<ul>
<li>
<p>ç”¨ <code>interface</code> å®šä¹‰ Props ç±»å‹ï¼ˆTSï¼‰ï¼›</p>
</li>
<li>
<p>éå¿…è¦ä¸ä¼ é€’ <code>children</code>ï¼ˆé¿å…æ·±å±‚åµŒå¥—ï¼‰ï¼›</p>
</li>
<li>
<p>å¤§é‡ Props ç”¨è§£æ„ä¼ é€’ï¼ˆ<code>&lt;User {...userProps} /&gt;</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-21">å…­ã€æ— éšœç¢æ€§ï¼ˆA11yï¼‰ä¸æ€§èƒ½</h3>
<h4 data-id="heading-22">1. æ— éšœç¢æ€§</h4>
<ul>
<li>
<p><strong>ARIA å±æ€§</strong>ï¼š</p>
<ul>
<li>
<p>åŠ¨æ€å†…å®¹ç”¨ <code>aria-live</code>ï¼ˆå¦‚é€šçŸ¥ï¼š<code>&lt;div aria-live="polite"&gt;æ–°æ¶ˆæ¯&lt;/div&gt;</code>ï¼‰ï¼›</p>
</li>
<li>
<p>è¡¨å•é”™è¯¯æç¤ºå…³è” <code>aria-describedby</code>ï¼ˆå¦‚ <code>&lt;input aria-describedby="error-msg"&gt;</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>é”®ç›˜å¯¼èˆª</strong>ï¼šæ‰€æœ‰äº¤äº’å…ƒç´ ï¼ˆæŒ‰é’®ã€èœå•ï¼‰å¿…é¡»å¯é€šè¿‡ Tab èšç„¦ï¼Œä¸”æœ‰æ˜æ˜¾ç„¦ç‚¹æ ·å¼ï¼ˆ<code>outline</code> æˆ–è‡ªå®šä¹‰æ ·å¼ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-23">2. æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li>
<p><strong>æ¸²æŸ“ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>
<p>é¿å…é¢‘ç¹é‡æ’ï¼ˆå¦‚æ‰¹é‡ä¿®æ”¹ DOM å‰å…ˆè„±ç¦»æ–‡æ¡£æµï¼‰ï¼›</p>
</li>
<li>
<p>Vue ç”¨ <code>v-memo</code> ç¼“å­˜é™æ€èŠ‚ç‚¹ï¼ŒReact ç”¨ <code>React.memo</code>/<code>useMemo</code> ç¼“å­˜ç»„ä»¶/å€¼ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>èµ„æºåŠ è½½</strong>ï¼š</p>
<ul>
<li>
<p>éé¦–å± JS ç”¨ <code>dynamic import</code> æ‡’åŠ è½½ï¼ˆ<code>import('./HeavyComponent')</code>ï¼‰ï¼›</p>
</li>
<li>
<p>å›¾ç‰‡ç”¨ <code>loading="lazy"</code> æ‡’åŠ è½½ï¼ˆ<code>&lt;img src="large.jpg" loading="lazy"&gt;</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-24">ä¸ƒã€åä½œä¸ä»£ç å®¡æŸ¥</h3>
<ul>
<li>
<p><strong>Code Review  checklist</strong>ï¼š</p>
<ol>
<li>
<p>ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒï¼ˆå‘½åã€æ ¼å¼ã€æ³¨é‡Šï¼‰ï¼›</p>
</li>
<li>
<p>é€»è¾‘æ˜¯å¦æ¸…æ™°ï¼ˆæ˜¯å¦æœ‰å†—ä½™/é‡å¤ä»£ç ï¼‰ï¼›</p>
</li>
<li>
<p>è¾¹ç•Œæƒ…å†µæ˜¯å¦å¤„ç†ï¼ˆç©ºå€¼ã€å¼‚å¸¸ã€å¤§æ•°ï¼‰ï¼›</p>
</li>
<li>
<p>æ€§èƒ½æ˜¯å¦æœ‰ä¼˜åŒ–ç©ºé—´ï¼ˆæ˜¯å¦æœ‰ä¸å¿…è¦çš„ DOM æ“ä½œ/è¯·æ±‚ï¼‰ï¼›</p>
</li>
<li>
<p>æ˜¯å¦åŒ…å«æµ‹è¯•ç”¨ä¾‹ï¼ˆæ ¸å¿ƒé€»è¾‘éœ€è¦†ç›–ï¼‰ã€‚</p>
</li>
</ol>
</li>
<li>
<p><strong>å†²çªå¤„ç†</strong>ï¼šæ‹‰å–ä»£ç å‰å…ˆ <code>pull</code> æœ€æ–° <code>develop</code> åˆ†æ”¯ï¼Œè§£å†³å†²çªæ—¶ä¿ç•™åŒæ–¹åˆç†é€»è¾‘ï¼Œé¿å…æš´åŠ›è¦†ç›–ã€‚</p>
</li>
</ul>
<h3 data-id="heading-25">æ€»ç»“</h3>
<p>è§„èŒƒçš„æ ¸å¿ƒæ˜¯ã€Œå…±è¯†ã€ä¸ã€Œè½åœ°ã€ï¼š</p>
<ol>
<li>
<p>å›¢é˜Ÿéœ€å…±åŒåˆ¶å®šè§„èŒƒï¼ˆé¿å…ä¸€åˆ€åˆ‡ï¼Œä¿ç•™åˆç†çµæ´»æ€§ï¼‰ï¼›</p>
</li>
<li>
<p>ç”¨å·¥å…·ï¼ˆESLintã€husky ç­‰ï¼‰è‡ªåŠ¨åŒ–çº¦æŸï¼Œå‡å°‘äººå·¥æˆæœ¬ï¼›</p>
</li>
<li>
<p>å®šæœŸå¤ç›˜è¿­ä»£ï¼ˆæ ¹æ®é¡¹ç›®åé¦ˆè°ƒæ•´è§„åˆ™ï¼‰ã€‚</p>
</li>
</ol>
<p>é€šè¿‡ç»†åŒ–è§„èŒƒï¼Œå¯æ˜¾è‘—é™ä½æ²Ÿé€šæˆæœ¬ï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§ï¼Œå°¤å…¶é€‚åˆå¤šäººåä½œçš„ä¸­å¤§å‹é¡¹ç›®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ç”¨è®°å¤æ‚è·¯å¾„ï¼3 æ­¥è®©ä½ çš„ JS è„šæœ¬åƒ â€œvue createâ€ ä¸€æ ·å¥½ç”¨]]></title>    <link>https://juejin.cn/post/7575047994681229363</link>    <guid>https://juejin.cn/post/7575047994681229363</guid>    <pubDate>2025-11-22T02:44:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575047994681229363" data-draft-id="7575017581037142054" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ç”¨è®°å¤æ‚è·¯å¾„ï¼3 æ­¥è®©ä½ çš„ JS è„šæœ¬åƒ â€œvue createâ€ ä¸€æ ·å¥½ç”¨"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-22T02:44:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¬§é˜³çš„æ£‰èŠ±ç³–"/> <meta itemprop="url" content="https://juejin.cn/user/958429872784541"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ç”¨è®°å¤æ‚è·¯å¾„ï¼3 æ­¥è®©ä½ çš„ JS è„šæœ¬åƒ â€œvue createâ€ ä¸€æ ·å¥½ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429872784541/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¬§é˜³çš„æ£‰èŠ±ç³–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:44:47.000Z" title="Sat Nov 22 2025 02:44:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼€ç¯‡ï¼šä¸ºä»€ä¹ˆåˆ«äººçš„å‘½ä»¤èƒ½ç›´æ¥ç”¨ï¼Ÿ</h2>
<p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œä½ å¯èƒ½ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šä¸ºä»€ä¹ˆè¾“å…¥ <code>vue create</code> å°±èƒ½å¿«é€Ÿåˆ›å»ºé¡¹ç›®ï¼Œè€Œè‡ªå·±å†™çš„ JavaScript è„šæœ¬ï¼Œæ¯æ¬¡éƒ½è¦æ•²é•¿é•¿çš„ <code>node ./xxx/xxx.js</code> æ‰èƒ½è¿è¡Œï¼Ÿå…¶å®ï¼Œè¿™èƒŒåè—ç€ <code>package.json</code> é‡Œ <code>bin</code> å‘½ä»¤çš„ â€œå°ç§˜å¯†â€ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°±ç”¨æœ€ç›´ç™½çš„æ–¹å¼ï¼Œå¸¦ä½ ææ¸…æ¥š <code>bin</code> å‘½ä»¤ã€shebang ä»¥åŠ <code>npm link</code> çš„ä½œç”¨å’Œç”¨æ³•ï¼Œçœ‹å®Œä¹‹åï¼Œä½ ä¹Ÿèƒ½è®©è‡ªå·±çš„è„šæœ¬åƒé‚£äº›å¸¸ç”¨å·¥å…·ä¸€æ ·ï¼Œä¸€é”®å°±èƒ½è¿è¡Œã€‚</p>
<h2 data-id="heading-1">äºŒã€package.json çš„ bin å‘½ä»¤ï¼šè®©è„šæœ¬ â€œä¸€é”®å¯åŠ¨â€</h2>
<h3 data-id="heading-2">1. ä»€ä¹ˆæ˜¯ bin å‘½ä»¤ï¼Ÿ</h3>
<p>ç®€å•æ¥è¯´ï¼Œbin å‘½ä»¤å°±æ˜¯ç»™ä½ çš„ JavaScript è„šæœ¬èµ·ä¸€ä¸ª â€œç®€çŸ­åˆ«åâ€ã€‚æœ‰äº†è¿™ä¸ªåˆ«åï¼Œä½ ä¸ç”¨å†è¾“å…¥å®Œæ•´çš„è„šæœ¬è·¯å¾„ï¼Œç›´æ¥å–Šå‡º â€œåˆ«åâ€ï¼Œå°±èƒ½è¿è¡Œå¯¹åº”çš„è„šæœ¬ã€‚</p>
<p>æ¯”å¦‚åŸæœ¬éœ€è¦è¾“å…¥ <code>node ./bin/my-script.js</code> æ‰èƒ½æ‰§è¡Œçš„è„šæœ¬ï¼Œé…ç½® bin å‘½ä»¤åï¼Œå¯èƒ½åªéœ€è¦è¾“å…¥ <code>my-script</code> å°±èƒ½è¿è¡Œï¼Œå¤§å¤§å‡å°‘äº†é‡å¤è¾“å…¥çš„éº»çƒ¦ã€‚</p>
<h3 data-id="heading-3">2. å¦‚ä½•é…ç½® bin å‘½ä»¤ï¼Ÿ</h3>
<p>bin å‘½ä»¤çš„é…ç½®å¾ˆçµæ´»ï¼Œä¸»è¦åˆ†ä¸¤ç§æƒ…å†µï¼Œæ ¹æ®ä½ çš„è„šæœ¬æ•°é‡æ¥é€‰æ‹©å³å¯ï¼š</p>
<h4 data-id="heading-4">æƒ…å†µä¸€ï¼šåªæœ‰ä¸€ä¸ªè„šæœ¬ï¼ˆç®€å•å†™æ³•ï¼‰</h4>
<p>å¦‚æœä½ çš„é¡¹ç›®é‡Œåªæœ‰ä¸€ä¸ªéœ€è¦ä¾¿æ·è¿è¡Œçš„è„šæœ¬ï¼Œç›´æ¥åœ¨ <code>package.json</code> ä¸­å†™è„šæœ¬çš„ç›¸å¯¹è·¯å¾„å°±è¡Œã€‚è¿™æ—¶ï¼Œè„šæœ¬çš„ â€œåˆ«åâ€ ä¼šé»˜è®¤å’Œä½ é¡¹ç›®çš„ â€œnameâ€ å­—æ®µä¸€è‡´ï¼ˆä¹Ÿå°±æ˜¯ <code>package.json</code> é‡Œ <code>"name": "xxx"</code> ä¸­çš„ xxxï¼‰ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>

&amp;#x20; <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-tool"</span><span class="hljs-punctuation">,</span>

&amp;#x20; <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>

&amp;#x20; <span class="hljs-attr">"bin"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./bin/my-script.js"</span>

<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¸Šé¢çš„é…ç½®ä¸­ï¼Œè„šæœ¬ <code>./bin/my-script.js</code> çš„åˆ«åå°±æ˜¯ <code>my-tool</code>ï¼Œåç»­ç›´æ¥è¾“å…¥ <code>my-tool</code> å°±èƒ½è¿è¡Œè¿™ä¸ªè„šæœ¬ã€‚</p>
<h4 data-id="heading-5">æƒ…å†µäºŒï¼šå¤šä¸ªè„šæœ¬ï¼ˆå¯¹è±¡å†™æ³•ï¼‰</h4>
<p>å¦‚æœé¡¹ç›®é‡Œæœ‰å¤šä¸ªéœ€è¦ä¾¿æ·è¿è¡Œçš„è„šæœ¬ï¼Œå°±ç”¨å¯¹è±¡çš„å½¢å¼é…ç½®ï¼Œé”®æ˜¯ä½ æƒ³ç»™è„šæœ¬èµ·çš„ â€œåˆ«åâ€ï¼Œå€¼æ˜¯è„šæœ¬çš„ç›¸å¯¹è·¯å¾„ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>

&amp;#x20; <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-tool"</span><span class="hljs-punctuation">,</span>

&amp;#x20; <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>

&amp;#x20; <span class="hljs-attr">"bin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>

&amp;#x20;   <span class="hljs-attr">"script-one"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./bin/1.js"</span><span class="hljs-punctuation">,</span>

&amp;#x20;   <span class="hljs-attr">"script-two"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./bin/2.js"</span>

&amp;#x20; <span class="hljs-punctuation">}</span>

<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ ·é…ç½®åï¼Œè¾“å…¥ <code>script-one</code> å°±èƒ½è¿è¡Œ <code>./bin/1.js</code>ï¼Œè¾“å…¥ <code>script-two</code> å°±èƒ½è¿è¡Œ <code>./bin/2.js</code>ï¼Œæ¸…æ™°åˆå¥½è®°ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè„šæœ¬è·¯å¾„è¦ä» <code>package.json</code> æ‰€åœ¨çš„æ–‡ä»¶å¤¹å¼€å§‹è®¡ç®—ï¼Œæ¯”å¦‚ <code>package.json</code> åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œè„šæœ¬åœ¨æ ¹ç›®å½•ä¸‹çš„ <code>bin</code> æ–‡ä»¶å¤¹é‡Œï¼Œè·¯å¾„å°±å†™ <code>./bin/xxx.js</code>ï¼Œåˆ«å†™é”™äº†è·¯å¾„å¯¼è‡´è„šæœ¬æ‰¾ä¸åˆ°ã€‚</p>
<h3 data-id="heading-6">3. é…ç½®å®Œ bin è¿˜ä¸å¤Ÿï¼Œå¿…é¡»åŠ  â€œshebangâ€</h3>
<p>å¾ˆå¤šäººé…ç½®å®Œ bin å‘½ä»¤åï¼Œè¿è¡Œæ—¶ä¼šé‡åˆ° â€œå‘½ä»¤æœªæ‰¾åˆ°â€ æˆ– â€œæ— æ³•æ‰§è¡Œè„šæœ¬â€ çš„é”™è¯¯ï¼Œè¿™å¤§æ¦‚ç‡æ˜¯å› ä¸ºæ²¡åŠ  â€œshebangâ€ã€‚</p>
<h4 data-id="heading-7">ä¸ºä»€ä¹ˆéœ€è¦ shebangï¼Ÿ</h4>
<p>ç®€å•æ¥è¯´ï¼Œshebang æ˜¯å‘Šè¯‰ç³»ç»Ÿ â€œç”¨ä»€ä¹ˆç¨‹åºæ¥è¿è¡Œè¿™ä¸ªè„šæœ¬â€ã€‚å¦‚æœæ²¡æœ‰å®ƒï¼Œç³»ç»Ÿä¸çŸ¥é“è¯¥ç”¨ Node.js è¿˜æ˜¯å…¶ä»–ç¨‹åºæ¥æ‰§è¡Œä½ çš„ JavaScript è„šæœ¬ï¼Œè‡ªç„¶ä¼šæŠ¥é”™ã€‚</p>
<h4 data-id="heading-8">ä»€ä¹ˆæ˜¯ shebangï¼Ÿæ€ä¹ˆåŠ ï¼Ÿ</h4>
<p>shebang å°±æ˜¯åœ¨ä½ çš„ JavaScript è„šæœ¬æ–‡ä»¶çš„ç¬¬ä¸€è¡Œï¼ŒåŠ ä¸Š <code>#!/usr/bin/env node</code> è¿™è¡Œä»£ç ã€‚ä¸ç”¨çº ç»“è¿™è¡Œä»£ç çš„å…·ä½“å«ä¹‰ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´åˆ°è„šæœ¬ç¬¬ä¸€è¡Œå°±è¡Œï¼Œå®ƒèƒ½å…¼å®¹ä¸åŒçš„ç”µè„‘ç³»ç»Ÿã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä½ çš„è„šæœ¬æ–‡ä»¶ <code>./bin/my-script.js</code> åº”è¯¥é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">\#!<span class="hljs-regexp">/usr/</span>bin/env node

<span class="hljs-comment">// ä¸‹é¢æ˜¯ä½ çš„è„šæœ¬é€»è¾‘</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è„šæœ¬è¿è¡ŒæˆåŠŸï¼"</span>);
</code></pre>
<h4 data-id="heading-9">ä¸ºä»€ä¹ˆä¸èƒ½å†™æ­»è·¯å¾„ï¼Ÿ</h4>
<p>æœ‰äº›èµ„æ–™é‡Œå¯èƒ½ä¼šå†™ <code>#!/usr/bin/node</code>ï¼Œä½†è¿™ç§å†™æ³•æœ‰ä¸ªå‘ï¼šå®ƒå‡è®¾ Node.js ä¸€å®šå®‰è£…åœ¨ <code>/usr/bin</code> è¿™ä¸ªè·¯å¾„ä¸‹ã€‚ä½†å®é™…ä¸­ï¼Œå¾ˆå¤šäººä¼šç”¨ nvmï¼ˆNode.js ç‰ˆæœ¬ç®¡ç†å™¨ï¼‰æ¥ç®¡ç† Node.jsï¼Œè¿™æ—¶ Node.js çš„å®‰è£…è·¯å¾„å¯èƒ½æ˜¯ <code>~/.nvm/versions/node/xxx/bin</code>ï¼Œæˆ–è€… Windows ç³»ç»Ÿé‡Œçš„ <code>C:\Program Files\nodejs</code>ã€‚å†™æ­»è·¯å¾„çš„è¯ï¼Œæ¢ä¸€å°ç”µè„‘å¯èƒ½å°±æ— æ³•è¿è¡Œäº†ï¼Œè€Œ <code>#!/usr/bin/env node</code> ä¼šè®©ç³»ç»Ÿè‡ªåŠ¨å¯»æ‰¾ Node.js çš„å®‰è£…è·¯å¾„ï¼Œé¿å…è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-10">4. åŠ¨æ‰‹å®æ“ï¼š3 æ­¥è·‘é€šè‡ªå·±çš„å‘½ä»¤</h3>
<p>çœ‹å®Œç†è®ºï¼Œå’±ä»¬æ¥åŠ¨æ‰‹è¯•ä¸€æ¬¡ï¼Œ3 æ­¥å°±èƒ½è®©ä½ çš„è„šæœ¬å®ç° â€œä¸€é”®è¿è¡Œâ€ï¼š</p>
<h4 data-id="heading-11">ç¬¬ä¸€æ­¥ï¼šå»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶</h4>
<p>å…ˆå»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚å« <code>my-first-cli</code>ï¼Œåœ¨é‡Œé¢æ–°å»ºä¸¤ä¸ªä¸œè¥¿ï¼š</p>
<ul>
<li>
<p>ä¸€ä¸ª <code>package.json</code> æ–‡ä»¶ï¼ˆå¯ä»¥ç”¨ <code>npm init -y</code> å¿«é€Ÿç”Ÿæˆï¼‰ï¼›</p>
</li>
<li>
<p>ä¸€ä¸ª <code>bin</code> æ–‡ä»¶å¤¹ï¼Œåœ¨ <code>bin</code> æ–‡ä»¶å¤¹é‡Œæ–°å»º <code>cli.js</code> æ–‡ä»¶ï¼ˆè¿™å°±æ˜¯ä½ çš„è„šæœ¬æ–‡ä»¶ï¼‰ã€‚</p>
</li>
</ul>
<p>æ­¤æ—¶é¡¹ç›®ç»“æ„åº”è¯¥æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-go" lang="go">my-first-cli/

â”œâ”€â”€ bin/

â”‚   â””â”€â”€ cli.js

â””â”€â”€ <span class="hljs-keyword">package</span>.json
</code></pre>
<h4 data-id="heading-12">ç¬¬äºŒæ­¥ï¼šå†™è„šæœ¬å†…å®¹</h4>
<p>æ‰“å¼€ <code>bin/cli.js</code>ï¼Œåœ¨ç¬¬ä¸€è¡ŒåŠ ä¸Š shebangï¼Œå†å†™ç‚¹ç®€å•çš„é€»è¾‘ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">\#!<span class="hljs-regexp">/usr/</span>bin/env node

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆ‘çš„ç¬¬ä¸€ä¸ªä¾¿æ·è„šæœ¬ï¼Œè¿è¡ŒæˆåŠŸå•¦ï¼"</span>);
</code></pre>
<h4 data-id="heading-13">ç¬¬ä¸‰æ­¥ï¼šé…ç½® package.json çš„ bin å‘½ä»¤</h4>
<p>æ‰“å¼€ <code>package.json</code>ï¼ŒåŠ ä¸Š bin é…ç½®ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>

&amp;#x20; <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-first-cli"</span><span class="hljs-punctuation">,</span>

&amp;#x20; <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>

&amp;#x20; <span class="hljs-attr">"bin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>

&amp;#x20;   <span class="hljs-attr">"my-test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./bin/cli.js"</span>

&amp;#x20; <span class="hljs-punctuation">}</span>

<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬ç»™è„šæœ¬èµ·çš„åˆ«åæ˜¯ <code>my-test</code>ï¼Œåç»­è¾“å…¥è¿™ä¸ªåˆ«åå°±èƒ½è¿è¡Œè„šæœ¬ã€‚</p>
<h2 data-id="heading-14">ä¸‰ã€shebang è¯¦è§£ï¼šè„šæœ¬çš„ â€œè¿è¡Œè¯´æ˜ä¹¦â€</h2>
<h3 data-id="heading-15">1. å†æ·±å…¥ç†è§£ï¼šshebang åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å‰é¢æˆ‘ä»¬çŸ¥é“äº† shebang æ˜¯ <code>#!/usr/bin/env node</code>ï¼Œä½†å®ƒæœ¬è´¨ä¸Šæ˜¯ Unix/Linux ç³»ç»Ÿçš„ä¸€ä¸ªé€šç”¨è§„åˆ™ â€”â€” åªè¦è„šæœ¬æ–‡ä»¶çš„ç¬¬ä¸€è¡Œä»¥ <code>#!</code> å¼€å¤´ï¼Œè¿™è¡Œå°±æ˜¯ shebangï¼Œç”¨æ¥æŒ‡å®šæ‰§è¡Œè¿™ä¸ªè„šæœ¬çš„ç¨‹åºã€‚</p>
<p>å¯¹ JavaScript è„šæœ¬æ¥è¯´ï¼Œshebang å°±æ˜¯å‘Šè¯‰ç³»ç»Ÿ â€œç”¨ Node.js æ¥è¿è¡Œæˆ‘â€ï¼Œç›¸å½“äºç»™è„šæœ¬åŠ äº†ä¸€ä»½ â€œè¿è¡Œè¯´æ˜ä¹¦â€ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¸æ˜¯æ³¨é‡Šï¼Œè€Œæ˜¯ç»™ç³»ç»Ÿçœ‹çš„æŒ‡ä»¤ï¼Œåˆ«æŠŠå®ƒåˆ æ‰æˆ–æ”¾åˆ°å…¶ä»–è¡Œã€‚</p>
<h3 data-id="heading-16">2. ä¸ºä»€ä¹ˆ <code>#!/usr/bin/env node</code> èƒ½å…¼å®¹æ‰€æœ‰ç³»ç»Ÿï¼Ÿ</h3>
<p>è¿™é‡Œæ‹†è§£ä¸€ä¸‹ <code>#!/usr/bin/env node</code> çš„ä½œç”¨ï¼š</p>
<ul>
<li>
<p><code>#!/usr/bin/env</code>ï¼š<code>env</code> æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ä¸€ä¸ªå·¥å…·ï¼Œå®ƒèƒ½è¯»å–ç³»ç»Ÿçš„ PATH ç¯å¢ƒå˜é‡ï¼ˆPATH é‡ŒåŒ…å«äº†ç³»ç»Ÿæ‰€æœ‰å¯æ‰§è¡Œç¨‹åºçš„å®‰è£…ç›®å½•ï¼‰ï¼›</p>
</li>
<li>
<p><code>node</code>ï¼š<code>env</code> ä¼šåœ¨ PATH åŒ…å«çš„ç›®å½•é‡Œï¼Œæ‰¾ç¬¬ä¸€ä¸ªåå« <code>node</code> çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰¾åˆ°åå°±ç”¨è¿™ä¸ª Node.js æ¥è¿è¡Œè„šæœ¬ã€‚</p>
</li>
</ul>
<p>ä¸ç®¡ä½ çš„ Node.js è£…åœ¨ <code>~/.nvm</code>ã€<code>Cç›˜</code> è¿˜æ˜¯å…¶ä»–è·¯å¾„ï¼Œ<code>env</code> éƒ½èƒ½æ‰¾åˆ°å®ƒï¼Œæ‰€ä»¥è¿™è¡Œä»£ç èƒ½å…¼å®¹ Windowsã€macOSã€Linux ç­‰ä¸åŒç³»ç»Ÿã€‚</p>
<h3 data-id="heading-17">3. Windows ç”¨æˆ·ä¸ç”¨æ…Œï¼Œshebang å…¼å®¹é—®é¢˜å·²è§£å†³</h3>
<p>å¾ˆå¤š Windows ç”¨æˆ·ä¼šæ‹…å¿ƒï¼šWindows ç³»ç»Ÿä¸è®¤è¯† shebangï¼Œä¼šä¸ä¼šå½±å“è„šæœ¬è¿è¡Œï¼Ÿå…¶å®ä¸ç”¨æ€•ï¼Œnpm å’Œ npx å·²ç»å¸®æˆ‘ä»¬å¤„ç†äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å½“ä½ åœ¨ Windows ä¸Šè¿è¡Œé€šè¿‡ bin å‘½ä»¤é…ç½®çš„è„šæœ¬æ—¶ï¼Œnpm ä¼šè‡ªåŠ¨å¿½ç•¥ shebangï¼Œç›´æ¥ç”¨ä½ ç”µè„‘é‡Œå½“å‰çš„ Node.js æ¥æ‰§è¡Œè„šæœ¬ï¼Œæ‰€ä»¥ä¸ç”¨é¢å¤–åšä»»ä½•é…ç½®ï¼Œå’Œå…¶ä»–ç³»ç»Ÿä¸€æ ·æ­£å¸¸ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-18">4. ä¸æ­¢ Node.jsï¼Œå…¶ä»–è„šæœ¬ä¹Ÿç”¨ shebang</h3>
<p>shebang ä¸æ˜¯ Node.js ä¸“å±çš„ï¼Œå…¶ä»–ç±»å‹çš„è„šæœ¬ä¹Ÿä¼šç”¨å®ƒæ¥æŒ‡å®šè¿è¡Œç¨‹åºã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>
<p>Shell è„šæœ¬ï¼ˆ.sh æ–‡ä»¶ï¼‰ï¼šç¬¬ä¸€è¡Œé€šå¸¸æ˜¯ <code>#!/bin/bash</code>ï¼Œè¡¨ç¤ºç”¨ bash ç¨‹åºæ¥è¿è¡Œï¼›</p>
</li>
<li>
<p>Python è„šæœ¬ï¼ˆ.py æ–‡ä»¶ï¼‰ï¼šç¬¬ä¸€è¡Œé€šå¸¸æ˜¯ <code>#!/usr/bin/env python3</code>ï¼Œè¡¨ç¤ºç”¨ Python3 æ¥è¿è¡Œï¼›</p>
</li>
<li>
<p>Perl è„šæœ¬ï¼ˆ.pl æ–‡ä»¶ï¼‰ï¼šç¬¬ä¸€è¡Œé€šå¸¸æ˜¯ <code>#!/usr/bin/perl</code>ï¼Œè¡¨ç¤ºç”¨ Perl æ¥è¿è¡Œã€‚</p>
</li>
</ul>
<p>äº†è§£è¿™ä¸ªçŸ¥è¯†ç‚¹ï¼Œä»¥åçœ‹åˆ°å…¶ä»–ç±»å‹çš„è„šæœ¬ï¼Œä¹Ÿèƒ½æ˜ç™½ç¬¬ä¸€è¡Œä»£ç çš„ä½œç”¨ã€‚</p>
<h2 data-id="heading-19">å››ã€npm linkï¼šæœ¬åœ°æµ‹è¯•çš„ â€œç¥å™¨â€ï¼Œä¸ç”¨åå¤è£…åŒ…</h2>
<h3 data-id="heading-20">1. ä¸ºä»€ä¹ˆéœ€è¦ npm linkï¼Ÿ</h3>
<p>å½“ä½ å†™å®Œè„šæœ¬å¹¶é…ç½®å¥½ bin å‘½ä»¤åï¼Œè‚¯å®šæƒ³æµ‹è¯•ä¸€ä¸‹èƒ½ä¸èƒ½æ­£å¸¸è¿è¡Œã€‚å¦‚æœæ¯æ¬¡ä¿®æ”¹ä»£ç åï¼Œéƒ½è¦å…ˆæŠŠé¡¹ç›®å‘å¸ƒåˆ° npm ä»“åº“ï¼Œå†ç”¨ <code>npm install -g</code> å®‰è£…åˆ°å…¨å±€æ¥æµ‹è¯•ï¼Œé‚£ä¹Ÿå¤ªéº»çƒ¦äº† â€”â€” è¿™æ—¶å€™ï¼Œ<code>npm link</code> å°±èƒ½æ´¾ä¸Šç”¨åœºã€‚</p>
<h3 data-id="heading-21">2. ä»€ä¹ˆæ˜¯ npm linkï¼Ÿ</h3>
<p>ç®€å•æ¥è¯´ï¼Œ<code>npm link</code> æ˜¯ç»™ä½ æœ¬åœ°çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ª â€œå¿«æ·æ–¹å¼â€ï¼Œå¹¶æŠŠè¿™ä¸ªå¿«æ·æ–¹å¼é“¾æ¥åˆ°ç³»ç»Ÿçš„å…¨å±€ npm ç›®å½•é‡Œã€‚è¿™æ ·ä¸€æ¥ï¼Œä½ ä¸ç”¨å‘å¸ƒé¡¹ç›®ï¼Œä¹Ÿä¸ç”¨åå¤å®‰è£…ï¼Œå°±èƒ½åƒä½¿ç”¨ â€œå·²å‘å¸ƒåˆ° npm ä»“åº“çš„å·¥å…·â€ ä¸€æ ·ï¼Œåœ¨ä»»ä½•ç›®å½•ä¸‹è¿è¡Œä½ çš„è„šæœ¬ï¼Œè€Œä¸”ä¿®æ”¹ä»£ç åï¼Œæ•ˆæœä¼šå®æ—¶ç”Ÿæ•ˆï¼Œä¸ç”¨é‡æ–°é…ç½®ã€‚</p>
<h3 data-id="heading-22">3. åŠ¨æ‰‹å®æ“ï¼š2 æ­¥ç”¨ npm link æµ‹è¯•å‘½ä»¤</h3>
<p>è¿˜æ˜¯ç”¨å‰é¢çš„ <code>my-first-cli</code> é¡¹ç›®ä¸¾ä¾‹ï¼Œ2 æ­¥å°±èƒ½å®Œæˆæµ‹è¯•ï¼š</p>
<h4 data-id="heading-23">ç¬¬ä¸€æ­¥ï¼šæŠŠé¡¹ç›®é“¾æ¥åˆ°å…¨å±€</h4>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ <code>my-first-cli</code> æ–‡ä»¶å¤¹ï¼ˆä¹Ÿå°±æ˜¯ <code>package.json</code> æ‰€åœ¨çš„ç›®å½•ï¼‰ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm <span class="hljs-built_in">link</span>
</code></pre>
<p>æ‰§è¡Œå®Œåï¼Œç³»ç»Ÿä¼šæç¤º â€œé“¾æ¥æˆåŠŸâ€ï¼Œæ­¤æ—¶ä½ çš„ <code>my-test</code> å‘½ä»¤å·²ç»è¢«æ·»åŠ åˆ°å…¨å±€äº†ã€‚</p>
<h4 data-id="heading-24">ç¬¬äºŒæ­¥ï¼šæµ‹è¯•å‘½ä»¤</h4>
<p>ä¸ç”¨åœç•™åœ¨ <code>my-first-cli</code> æ–‡ä»¶å¤¹ï¼Œéšä¾¿æ‰¾ä¸€ä¸ªå…¶ä»–ç›®å½•ï¼ˆæ¯”å¦‚ä½ çš„æ¡Œé¢ï¼‰ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">my</span>-test
</code></pre>
<p>å¦‚æœçœ‹åˆ°è¾“å‡º â€œæˆ‘çš„ç¬¬ä¸€ä¸ªä¾¿æ·è„šæœ¬ï¼Œè¿è¡ŒæˆåŠŸå•¦ï¼â€ï¼Œå°±è¯´æ˜æµ‹è¯•æˆåŠŸäº†ã€‚</p>
<p>å¦‚æœåç»­ä¿®æ”¹äº† <code>bin/cli.js</code> é‡Œçš„ä»£ç ï¼Œæ¯”å¦‚æŠŠè¾“å‡ºæ”¹æˆ â€œè„šæœ¬æ›´æ–°å•¦ï¼â€ï¼Œä¸ç”¨é‡æ–°æ‰§è¡Œ <code>npm link</code>ï¼Œç›´æ¥åœ¨ç»ˆç«¯å†æ¬¡è¾“å…¥ <code>my-test</code>ï¼Œå°±èƒ½çœ‹åˆ°æ›´æ–°åçš„æ•ˆæœï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<h3 data-id="heading-25">4. npm link ä¸æ­¢èƒ½æµ‹å‘½ä»¤ï¼Œè¿˜æœ‰ 2 ä¸ªå¸¸ç”¨åœºæ™¯</h3>
<p><code>npm link</code> ä¸æ­¢ç”¨æ¥æµ‹è¯• bin å‘½ä»¤ï¼Œåœ¨æœ¬åœ°å¼€å‘ä¸­è¿˜æœ‰ä¸¤ä¸ªéå¸¸å®ç”¨çš„åœºæ™¯ï¼š</p>
<h4 data-id="heading-26">åœºæ™¯ä¸€ï¼šæœ¬åœ°ä¸¤ä¸ªé¡¹ç›®äº’ç›¸ä¾èµ–</h4>
<p>æ¯”å¦‚ä½ æœ‰ä¸¤ä¸ªé¡¹ç›®ï¼š</p>
<ul>
<li>
<p>é¡¹ç›® Aï¼šæ˜¯ä¸€ä¸ªå·¥å…·åŒ…ï¼ˆæ¯”å¦‚å« <code>utils-package</code>ï¼‰ï¼Œé‡Œé¢æœ‰ä¸€äº›å¸¸ç”¨çš„å·¥å…·å‡½æ•°ï¼›</p>
</li>
<li>
<p>é¡¹ç›® Bï¼šæ˜¯ä¸€ä¸ªä¸šåŠ¡é¡¹ç›®ï¼Œéœ€è¦ç”¨åˆ°é¡¹ç›® A é‡Œçš„å·¥å…·å‡½æ•°ã€‚</p>
</li>
</ul>
<p>å¦‚æœç›´æ¥åœ¨é¡¹ç›® B é‡Œç”¨ <code>npm install ../utils-package</code> å®‰è£…é¡¹ç›® Aï¼Œæ¯æ¬¡é¡¹ç›® A çš„ä»£ç ä¿®æ”¹åï¼Œéƒ½è¦é‡æ–°å®‰è£…æ‰èƒ½åœ¨é¡¹ç›® B é‡Œçœ‹åˆ°æ›´æ–°ï¼Œå¾ˆéº»çƒ¦ã€‚è¿™æ—¶å€™ç”¨ <code>npm link</code> å°±èƒ½è§£å†³ï¼š</p>
<ol>
<li>
<p>è¿›å…¥é¡¹ç›® A çš„æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ <code>npm link</code>ï¼ŒæŠŠé¡¹ç›® A é“¾æ¥åˆ°å…¨å±€ï¼›</p>
</li>
<li>
<p>è¿›å…¥é¡¹ç›® B çš„æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ <code>npm link utils-package</code>ï¼ˆ<code>utils-package</code> æ˜¯é¡¹ç›® A çš„ <code>package.json</code> é‡Œçš„ â€œnameâ€ å­—æ®µï¼‰ï¼›</p>
</li>
</ol>
<p>è¿™æ ·ä¸€æ¥ï¼Œé¡¹ç›® B é‡Œå°±èƒ½åƒä½¿ç”¨æ™®é€š npm åŒ…ä¸€æ ·ï¼Œç”¨ <code>require('utils-package')</code> å¼•å…¥é¡¹ç›® A çš„ä»£ç ï¼Œè€Œä¸”é¡¹ç›® A çš„ä»£ç ä¿®æ”¹åï¼Œé¡¹ç›® B é‡Œèƒ½å®æ—¶çœ‹åˆ°æ›´æ–°ï¼Œä¸ç”¨åå¤å®‰è£…ã€‚</p>
<h4 data-id="heading-27">åœºæ™¯äºŒï¼šè°ƒè¯•å·²å®‰è£…çš„ä¾èµ–åŒ…</h4>
<p>æœ‰æ—¶å€™ä½ åœ¨é¡¹ç›®é‡Œä½¿ç”¨æŸä¸ª npm åŒ…ï¼ˆæ¯”å¦‚ lodashï¼‰ï¼Œå‘ç°æŸä¸ªåŠŸèƒ½æœ‰é—®é¢˜ï¼Œæƒ³ä¿®æ”¹è¿™ä¸ªåŒ…çš„æºç æ¥è°ƒè¯•ï¼ˆå½“ç„¶pnpmæœ‰æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼‰ã€‚è¿™æ—¶å€™ä¹Ÿèƒ½ç”¨åˆ° <code>npm link</code>ï¼š</p>
<ol>
<li>
<p>å…ˆä» GitHub ä¸Šä¸‹è½½è¿™ä¸ªåŒ…çš„æºç ï¼ˆæ¯”å¦‚ lodash çš„æºç ï¼‰ï¼Œè§£å‹åè¿›å…¥æºç æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ <code>npm link</code>ï¼ŒæŠŠä¿®æ”¹åçš„æºç é“¾æ¥åˆ°å…¨å±€ï¼›</p>
</li>
<li>
<p>è¿›å…¥ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ <code>npm link lodash</code>ï¼ŒæŠŠé¡¹ç›®é‡Œçš„ lodash æ›¿æ¢æˆä½ æœ¬åœ°ä¿®æ”¹åçš„æºç ï¼›</p>
</li>
<li>
<p>è°ƒè¯•å®Œæˆåï¼Œå†æ‰§è¡Œ <code>npm unlink lodash</code>ï¼Œå¹¶é‡æ–°æ‰§è¡Œ <code>npm install lodash</code>ï¼Œæ¢å¤æˆå®˜æ–¹çš„åŒ…å³å¯ã€‚</p>
</li>
</ol>
<h3 data-id="heading-28">5. ç”¨å®Œè®°å¾— â€œå–æ¶ˆé“¾æ¥â€ï¼Œé¿å…å½±å“åç»­ä½¿ç”¨</h3>
<p>å½“ä½ æµ‹è¯•å®Œæˆ–è€…ä¸å†éœ€è¦æœ¬åœ°é“¾æ¥æ—¶ï¼Œè®°å¾—å–æ¶ˆé“¾æ¥ï¼Œé¿å…æœ¬åœ°çš„æµ‹è¯•ç‰ˆæœ¬å½±å“åç»­ä½¿ç”¨å®˜æ–¹ç‰ˆæœ¬ã€‚</p>
<p>å–æ¶ˆé“¾æ¥åˆ†ä¸¤æ­¥ï¼š</p>
<ol>
<li>
<p>è¿›å…¥ä½ ä¹‹å‰æ‰§è¡Œ <code>npm link</code> çš„é¡¹ç›®æ–‡ä»¶å¤¹ï¼ˆæ¯”å¦‚ <code>my-first-cli</code>ï¼‰ï¼Œæ‰§è¡Œ <code>npm unlink</code>ï¼Œå–æ¶ˆé¡¹ç›®åˆ°å…¨å±€çš„é“¾æ¥ï¼›</p>
</li>
<li>
<p>å¦‚æœå…¶ä»–é¡¹ç›®é“¾æ¥è¿‡è¿™ä¸ªé¡¹ç›®ï¼ˆæ¯”å¦‚å‰é¢çš„é¡¹ç›® B é“¾æ¥è¿‡é¡¹ç›® Aï¼‰ï¼Œè¿˜è¦è¿›å…¥è¿™äº›é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ <code>npm unlink åŒ…å</code>ï¼ˆæ¯”å¦‚ <code>npm unlink utils-package</code>ï¼‰ï¼Œå–æ¶ˆé¡¹ç›®é—´çš„é“¾æ¥ã€‚</p>
</li>
</ol>
<p>æ¯”å¦‚å–æ¶ˆ <code>my-first-cli</code> çš„é“¾æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">\<span class="hljs-comment"># è¿›å…¥ my-first-cli æ–‡ä»¶å¤¹</span>

<span class="hljs-built_in">cd</span> my-first-cli

\<span class="hljs-comment"># å–æ¶ˆå…¨å±€é“¾æ¥</span>

npm <span class="hljs-built_in">unlink</span>
</code></pre>
<h2 data-id="heading-29">äº”ã€æ€»ç»“ï¼š3 ä¸ªæ ¸å¿ƒçŸ¥è¯†ç‚¹è¦è®°ç‰¢</h2>
<ol>
<li>
<p><strong>bin å‘½ä»¤</strong>ï¼šç»™ JavaScript è„šæœ¬èµ· â€œç®€çŸ­åˆ«åâ€ï¼Œé…ç½®åä¸ç”¨è¾“å®Œæ•´è·¯å¾„ï¼Œç›´æ¥å–Šåˆ«åå°±èƒ½è¿è¡Œè„šæœ¬ï¼Œé…ç½®æ—¶æ³¨æ„è·¯å¾„åˆ«å†™é”™ï¼›</p>
</li>
<li>
<p><strong>shebang</strong>ï¼šè„šæœ¬ç¬¬ä¸€è¡Œçš„ <code>#!/usr/bin/env node</code>ï¼Œå‘Šè¯‰ç³»ç»Ÿç”¨ Node.js è¿è¡Œè„šæœ¬ï¼Œåˆ«å†™æ­»è·¯å¾„ï¼Œå…¼å®¹æ‰€æœ‰ç³»ç»Ÿï¼›</p>
</li>
<li>
<p><strong>npm link</strong>ï¼šæœ¬åœ°æµ‹è¯•å’Œå¼€å‘çš„ â€œç¥å™¨â€ï¼Œèƒ½åˆ›å»ºé¡¹ç›®å¿«æ·æ–¹å¼ï¼Œå®ç°ä»£ç å®æ—¶æ›´æ–°ï¼Œä¸ç”¨åå¤å®‰è£…ï¼Œç”¨å®Œè®°å¾—å–æ¶ˆé“¾æ¥ã€‚</p>
</li>
</ol>
<h2 data-id="heading-30">å…­ã€ç»“å°¾ï¼šåŠ¨æ‰‹è¯•è¯•ï¼Œä¸€æ¬¡å°±ä¼š</h2>
<p>çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œå»ºè®®ä½ åŠ¨æ‰‹å®æ“ä¸€æ¬¡ï¼šå»ºä¸€ä¸ªç®€å•çš„é¡¹ç›®ï¼Œé…ç½® bin å‘½ä»¤ã€åŠ  shebangã€ç”¨ npm link æµ‹è¯•ã€‚è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°æŠ¥é”™ï¼Œå…ˆæ£€æŸ¥ä¸‰ä¸ªåœ°æ–¹ï¼šè„šæœ¬è·¯å¾„å¯¹ä¸å¯¹ã€shebang åŠ æ²¡åŠ ã€link æœ‰æ²¡æœ‰æˆåŠŸã€‚</p>
<p>å…¶å®è¿™äº›çŸ¥è¯†ç‚¹éƒ½ä¸å¤æ‚ï¼Œå…³é”®æ˜¯å¤šåŠ¨æ‰‹ï¼Œè¯•ä¸€æ¬¡å°±èƒ½å®Œå…¨æŒæ¡ï¼Œä»¥åå¼€å‘è„šæœ¬æˆ–å·¥å…·æ—¶ï¼Œå°±èƒ½åƒé‚£äº›å¸¸ç”¨çš„ npm åŒ…ä¸€æ ·ï¼Œå®ç° â€œä¸€é”®è¿è¡Œâ€ï¼Œå¤§å¤§æå‡å¼€å‘æ•ˆç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•å¿«é€Ÿå®ç°å“åº”å¼å¤šå±å¹•é€‚é…]]></title>    <link>https://juejin.cn/post/7574997924930601000</link>    <guid>https://juejin.cn/post/7574997924930601000</guid>    <pubDate>2025-11-22T03:13:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574997924930601000" data-draft-id="7575015480198905908" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•å¿«é€Ÿå®ç°å“åº”å¼å¤šå±å¹•é€‚é…"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-22T03:13:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MQliferecord"/> <meta itemprop="url" content="https://juejin.cn/user/1139543665814600"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•å¿«é€Ÿå®ç°å“åº”å¼å¤šå±å¹•é€‚é…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1139543665814600/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MQliferecord
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T03:13:15.000Z" title="Sat Nov 22 2025 03:13:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é¡¹ç›®æ¶‰åŠçš„åœºæ™¯æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥æˆ‘ä¸ªäººçš„é…ç½®ä¹Ÿæ¯”è¾ƒç²—ç³™ç®€å•ï¼Œå¦‚æœè¦å¯¹äºæ›´è¯¦ç»†çš„å¤šç«¯é€‚é…ï¼Œå¯èƒ½éœ€è¦æ›´ç»†è‡´çš„è®¾å®šï¼Œå¦‚æœå¸Œæœ›ä¸€é”®å¿«é€Ÿå®ç°å¤§ä½“ä¸Šè¿‡å¾—å»çš„pcç«¯å¤šç«¯é€‚é…ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ³•å­ã€‚</p>
<ol>
<li>å®‰è£…postcss(å¿…é¡»)+tailwindcss(å¯é€‰)</li>
<li>å®‰è£…postcss-plugin-px2rem(å¿…é¡»)</li>
<li><del>åœ¨è±†åŒ…æœç´¢postcss-plugin-px2remå¦‚ä½•é…ç½®åº”ç”¨</del>åœ¨postcss.config.jsæ–‡ä»¶é‡Œé¢æŒ‰éœ€é…ç½®ï¼ˆå…³é”®ï¼‰</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-built_in">require</span>(<span class="hljs-string">'postcss-plugin-px2rem'</span>)({
      <span class="hljs-attr">rootValue</span>: <span class="hljs-number">16</span>, <span class="hljs-comment">// æ ¹å…ƒç´ å­—ä½“å¤§å°ï¼ˆé»˜è®¤ 16pxï¼Œå³ 1rem = 16pxï¼‰</span>
      <span class="hljs-attr">unitPrecision</span>: <span class="hljs-number">5</span>, <span class="hljs-comment">// è½¬æ¢åçš„ rem ä¿ç•™å°æ•°ä½æ•°ï¼ˆé»˜è®¤ 5ï¼‰</span>
      <span class="hljs-attr">propList</span>: [<span class="hljs-string">'*'</span>], <span class="hljs-comment">// éœ€è¦è½¬æ¢çš„ CSS å±æ€§ï¼ˆé»˜è®¤ ['*']ï¼Œå³æ‰€æœ‰å±æ€§ï¼‰</span>
      <span class="hljs-attr">selectorBlackList</span>: [], <span class="hljs-comment">// ä¸è½¬æ¢çš„é€‰æ‹©å™¨ï¼ˆå¦‚ ['body']ï¼Œåˆ™ body ä¸‹çš„ px ä¸è½¬æ¢ï¼‰</span>
      <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ˜¯å¦ç›´æ¥æ›¿æ¢åŸ px å€¼ï¼ˆé»˜è®¤ trueï¼Œä¸ä¿ç•™åŸ pxï¼‰</span>
      <span class="hljs-attr">mediaQuery</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// æ˜¯å¦è½¬æ¢åª’ä½“æŸ¥è¯¢ä¸­çš„ pxï¼ˆé»˜è®¤ falseï¼Œä¸è½¬æ¢ï¼‰</span>
      <span class="hljs-attr">minPixelValue</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// æœ€å°è½¬æ¢åƒç´ å€¼ï¼ˆé»˜è®¤ 0ï¼Œå³æ‰€æœ‰ px éƒ½è½¬æ¢ï¼‰</span>
      <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/i</span> <span class="hljs-comment">// æ’é™¤çš„æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚ node_modules ä¸‹çš„æ ·å¼ä¸è½¬æ¢ï¼‰</span>
    })
  ]
}
</code></pre>
<p>åç»­éœ€è¦è¯¦ç»†é…ç½®çš„è¯ï¼Œéœ€è¦å…³æ³¨çš„ä¸¤ä¸ªå±æ€§</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">selectorBlackList</span>: [], 
<span class="hljs-attr">mediaQuery</span>: <span class="hljs-literal">false</span>, 
</code></pre>
<ol start="4">
<li>åœ¨App.vue æ–‡ä»¶ä¸‹æ·»åŠ (å…³é”®)</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setRootFontSize</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> screenWidth = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span>;
  <span class="hljs-keyword">const</span> rootFontSize = screenWidth / <span class="hljs-number">7.5</span>; 
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = <span class="hljs-string">`<span class="hljs-subst">${rootFontSize}</span>px`</span>;
}

<span class="hljs-title function_">setRootFontSize</span>();
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, setRootFontSize);
</code></pre>
<p>è¿™é‡Œå› ä¸ºæˆ‘ä»¬é¡¹ç›®ä¸»è¦æ˜¯å¤§å±å’Œè¶…å¤§å±å·¥ä½œï¼Œæ‰€ä»¥æˆ‘é’ˆå¯¹æˆ‘ä»¬çš„é¡¹ç›®å…·ä½“åº”ç”¨åœºæ™¯åšäº†ä¸€ä¸‹æ›´æ”¹</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">setRootFontSize</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> screenWidth = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span>;
  <span class="hljs-keyword">if</span>(screenWidth&lt;<span class="hljs-number">1560</span>){
      <span class="hljs-keyword">const</span> rootFontSize = screenWidth / <span class="hljs-number">75</span>; 
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = <span class="hljs-string">`<span class="hljs-subst">${rootFontSize}</span>px`</span>;
  }
}

</code></pre>
<p>å…·ä½“åŸç†æœç´¢remæ˜¯ä»€ä¹ˆæ„æ€å°±è¡Œäº†</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»å›è°ƒåˆ°async/awaitï¼šJavaScriptå¼‚æ­¥ç¼–ç¨‹çš„è¿›åŒ–ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7575006095389474825</link>    <guid>https://juejin.cn/post/7575006095389474825</guid>    <pubDate>2025-11-22T03:28:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575006095389474825" data-draft-id="7575047994681262131" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»å›è°ƒåˆ°async/awaitï¼šJavaScriptå¼‚æ­¥ç¼–ç¨‹çš„è¿›åŒ–ä¹‹è·¯"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-22T03:28:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xiaoxue_"/> <meta itemprop="url" content="https://juejin.cn/user/4065372122398027"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»å›è°ƒåˆ°async/awaitï¼šJavaScriptå¼‚æ­¥ç¼–ç¨‹çš„è¿›åŒ–ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4065372122398027/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xiaoxue_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T03:28:14.000Z" title="Sat Nov 22 2025 03:28:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»å›è°ƒåˆ°async/awaitï¼šJavaScriptå¼‚æ­¥ç¼–ç¨‹çš„è¿›åŒ–ä¹‹è·¯</h2>
<p>åœ¨JavaScriptçš„ä¸–ç•Œé‡Œï¼Œå¼‚æ­¥ç¼–ç¨‹æ˜¯ç»•ä¸å¼€çš„æ ¸å¿ƒå‘½é¢˜ã€‚ä»æœ€åˆçš„å›è°ƒå‡½æ•°ï¼Œåˆ°ES6çš„Promiseï¼Œå†åˆ°ES8çš„async/awaitï¼Œæ¯ä¸€æ¬¡è¯­æ³•å‡çº§éƒ½åœ¨è§£å†³å‰ä¸€é˜¶æ®µçš„ç—›ç‚¹ï¼Œè®©å¼‚æ­¥ä»£ç æ›´è´´è¿‘äººç±»çš„çº¿æ€§æ€ç»´ã€‚æœ¬æ–‡å°†ç»“åˆæ–‡ä»¶è¯»å–çš„å®é™…æ¡ˆä¾‹ï¼Œå¸¦ä½ çœ‹æ¸…JavaScriptå¼‚æ­¥ç¼–ç¨‹çš„è¿›åŒ–è„‰ç»œã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ES6ä¹‹å‰ï¼šå›è°ƒå‡½æ•°çš„â€œåœ°ç‹±â€ä¸åšå®ˆ</h3>
<p>åœ¨ES6å¼•å…¥Promiseä¹‹å‰ï¼ŒJavaScriptå¤„ç†å¼‚æ­¥æ“ä½œçš„å”¯ä¸€æ–¹æ¡ˆå°±æ˜¯å›è°ƒå‡½æ•°ã€‚å…¶æ ¸å¿ƒé€»è¾‘æ˜¯ï¼šå°†å¼‚æ­¥æ“ä½œå®Œæˆåéœ€è¦æ‰§è¡Œçš„ä»£ç ï¼Œä½œä¸ºå‚æ•°ä¼ å…¥å¼‚æ­¥å‡½æ•°ï¼Œå½“å¼‚æ­¥ä»»åŠ¡ç»“æŸæ—¶ï¼Œç”±JavaScriptå¼•æ“è‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚</p>
<p>ä»¥æ–‡ä»¶è¯»å–API <code>fs.readFile</code> ä¸ºä¾‹ï¼Œä¼ ç»Ÿå›è°ƒå†™æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'./1.html'</span>,<span class="hljs-string">'utf-8'</span>,<span class="hljs-function">(<span class="hljs-params">err,data</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span>(err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">111</span>);
})
</code></pre>
<p>è¿™ç§å†™æ³•çš„ä¼˜åŠ¿æ˜¯ç›´è§‚æ˜“æ‡‚ï¼Œå¯¹äºå•ä¸€å¼‚æ­¥ä»»åŠ¡å®Œå…¨å¤Ÿç”¨ã€‚ä½†å®ƒçš„ç¼ºé™·ä¹Ÿæä¸ºæ˜æ˜¾ï¼šå½“å¤šä¸ªå¼‚æ­¥ä»»åŠ¡å­˜åœ¨ä¾èµ–å…³ç³»æ—¶ï¼Œä»£ç ä¼šåµŒå¥—æˆâ€œå›è°ƒåœ°ç‹±â€ã€‚æ¯”å¦‚å…ˆè¯»Aæ–‡ä»¶ï¼Œå†æ ¹æ®Aæ–‡ä»¶å†…å®¹è¯»Bè¿™æ®µå›è°ƒå‡½æ•°ä»£ç æ˜¯ES6ä¹‹å‰çš„ä¸»æµå¼‚æ­¥å†™æ³•ï¼Œæ ¸å¿ƒä¾èµ–Node.jsçš„<code>fs</code>æ¨¡å—ï¼ˆæ–‡ä»¶ç³»ç»Ÿæ¨¡å—ï¼‰å®ç°æ–‡ä»¶è¯»å–ã€‚æˆ‘ä»¬ä»APIå‚æ•°åˆ°æ‰§è¡Œé€»è¾‘é€è¡Œæ‹†è§£ï¼š</p>
<p><code>fs.readFile('./1.html','utf-8',(err,data) =&gt; { ... })</code> ä¸­ï¼Œ<code>fs.readFile</code> ä½œä¸ºå¼‚æ­¥è¯»å–æ–¹æ³•ï¼Œæ¥æ”¶ä¸‰ä¸ªå…³é”®å‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°<code>'./1.html'</code>æ˜¯æ–‡ä»¶è·¯å¾„ï¼ŒæŒ‡å®šè¯»å–å½“å‰ç›®å½•ä¸‹çš„1.htmlæ–‡ä»¶ï¼›ç¬¬äºŒä¸ªå‚æ•°<code>'utf-8'</code>æ˜¯ç¼–ç æ ¼å¼ï¼Œç¡®ä¿è¯»å–çš„äºŒè¿›åˆ¶æ•°æ®è½¬ä¸ºå­—ç¬¦ä¸²è€ŒéBufferå¯¹è±¡ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œè¿™æ˜¯å¼‚æ­¥çš„æ ¸å¿ƒâ€”â€”JSå¼•æ“ä¸ä¼šç­‰å¾…æ–‡ä»¶è¯»å–å®Œæˆï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œåç»­ä»£ç ï¼Œè¯»å–ç»“æŸåè‡ªåŠ¨è°ƒç”¨æ­¤å‡½æ•°å¤„ç†ç»“æœã€‚</p>
<p>å›è°ƒå‡½æ•°éµå¾ªâ€œé”™è¯¯ä¼˜å…ˆâ€è§„èŒƒï¼Œ<code>err</code>å‚æ•°ä¼˜å…ˆæ¥æ”¶é”™è¯¯ä¿¡æ¯ï¼šè‹¥è¯»å–å¤±è´¥ï¼ˆå¦‚æ–‡ä»¶ä¸å­˜åœ¨ï¼‰ï¼Œ<code>err</code>ä¸ºé”™è¯¯å¯¹è±¡ï¼Œæ‰§è¡Œ<code>console.log(err)</code>æ‰“å°é”™è¯¯å¹¶é€šè¿‡<code>return</code>ç»ˆæ­¢å‡½æ•°ï¼›è‹¥æˆåŠŸï¼Œ<code>err</code>ä¸ºnullï¼Œ<code>data</code>æ¥æ”¶æ–‡ä»¶å†…å®¹ï¼Œéšåæ‰“å°å†…å®¹ä¸æ•°å­—111ã€‚</p>
<p>è¿™ç§å†™æ³•å¯¹å•ä¸€å¼‚æ­¥ä»»åŠ¡è¶³å¤Ÿç®€æ´ï¼Œä½†å¤šä»»åŠ¡ä¾èµ–æ—¶ä¼šé™·å…¥â€œå›è°ƒåœ°ç‹±â€ã€‚æ¯”å¦‚è¯»å®Œ1.htmlåéœ€æ ¹æ®å†…å®¹è¯»2.htmlï¼Œä»£ç ä¼šåµŒå¥—æˆå¤šå±‚ç¼©è¿›ï¼Œå¯è¯»æ€§ä¸ç»´æŠ¤æ€§æ€¥å‰§ä¸‹é™ï¼Œè¿™ä¹Ÿå‚¬ç”Ÿäº†ES6çš„Promiseæ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-2">äºŒã€ES6 Promiseï¼šå¼‚æ­¥æµç¨‹çš„â€œæ ‡å‡†åŒ–â€å‡çº§</h3>
<p>Promiseæ˜¯ES6ä¸ºè§£å†³å›è°ƒåœ°ç‹±æ¨å‡ºçš„å¼‚æ­¥å®¹å™¨ï¼Œå®ƒå°†å¼‚æ­¥æ“ä½œçš„â€œæˆåŠŸ/å¤±è´¥â€çŠ¶æ€æ ‡å‡†åŒ–ï¼Œé€šè¿‡é“¾å¼è°ƒç”¨æ›¿ä»£åµŒå¥—ã€‚Promiseå°è£…ä»£ç ï¼Œæ­£æ˜¯å¯¹æ–‡ä»¶è¯»å–å¼‚æ­¥ä»»åŠ¡çš„è§„èŒƒåŒ–æ”¹é€ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// es6 Promise</span>
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>) =&gt;</span> {
    fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'./1.html'</span>, <span class="hljs-string">'utf-8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (err) {
            <span class="hljs-title function_">reject</span>(err); <span class="hljs-comment">// å¼‚æ­¥å¤±è´¥ï¼Œä¼ é€’é”™è¯¯</span>
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-title function_">resolve</span>(data); <span class="hljs-comment">// å¼‚æ­¥æˆåŠŸï¼Œä¼ é€’ç»“æœ</span>
    })
})
 p.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">111</span>);
})
</code></pre>
<p>Promiseæ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªâ€œæ‰§è¡Œå™¨å‡½æ•°â€ï¼Œè¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå†…ç½®å‚æ•°<code>resolve</code>å’Œ<code>reject</code>ï¼Œå‡ä¸ºå‡½æ•°ï¼š<code>resolve</code>ç”¨äºæ ‡è®°å¼‚æ­¥æˆåŠŸï¼Œå°†ç»“æœæ•°æ®ä¼ é€’ç»™åç»­å¤„ç†ï¼›<code>reject</code>ç”¨äºæ ‡è®°å¤±è´¥ï¼Œä¼ é€’é”™è¯¯ä¿¡æ¯ã€‚</p>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæ–‡ä»¶è¯»å–çš„å›è°ƒé€»è¾‘è¢«é‡æ„ï¼šå¤±è´¥æ—¶è°ƒç”¨<code>reject(err)</code>ï¼ŒæˆåŠŸæ—¶è°ƒç”¨<code>resolve(data)</code>ï¼ŒPromiseå®ä¾‹<code>p</code>ä¾¿æ‰¿è½½äº†å¼‚æ­¥ä»»åŠ¡çš„çŠ¶æ€ã€‚<code>p.then(data =&gt; { ... })</code>æ˜¯ç»“æœå¤„ç†æ–¹å¼ï¼Œ<code>then</code>æ–¹æ³•æ¥æ”¶<code>resolve</code>ä¼ é€’çš„æ•°æ®ï¼Œå®ç°æˆåŠŸé€»è¾‘ã€‚è‹¥éœ€å¤„ç†é”™è¯¯ï¼Œå¯é“¾å¼è°ƒç”¨<code>.catch(err =&gt; { ... })</code>æ•è·<code>reject</code>çš„é”™è¯¯ã€‚</p>
<p>Promiseçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯é“¾å¼è°ƒç”¨ã€‚è‹¥éœ€è¿ç»­è¯»å–ä¸¤ä¸ªæ–‡ä»¶ï¼Œåªéœ€åœ¨ç¬¬ä¸€ä¸ª<code>then</code>ä¸­è¿”å›æ–°çš„Promiseï¼Œå†é“¾å¼è°ƒç”¨<code>then</code>å³å¯ï¼Œä»£ç å§‹ç»ˆä¿æŒæ‰å¹³ï¼Œå½»åº•æ‘†è„±åµŒå¥—å›°å¢ƒã€‚ä½†å¤šä¸ªé“¾å¼è°ƒç”¨æ—¶ï¼Œâ€œthené“¾â€ä»ä¼šç•¥æ˜¾å†—ä½™ï¼ŒES8çš„async/awaitåœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€ES8 async/awaitï¼šå¼‚æ­¥ä»£ç çš„â€œåŒæ­¥åŒ–â€ç»ˆææ–¹æ¡ˆ</h3>
<p>async/awaitæ˜¯ES8æ¨å‡ºçš„Promiseè¯­æ³•ç³–ï¼Œå®ƒè®©å¼‚æ­¥ä»£ç å…·å¤‡åŒæ­¥ä»£ç çš„çº¿æ€§é€»è¾‘ï¼Œå ªç§°å¼‚æ­¥ç¼–ç¨‹çš„â€œç»ˆæå½¢æ€â€ã€‚async/awaitåŸºäºå‰æ–‡çš„Promiseå®ä¾‹å®ç°ï¼Œå¤§å¹…ç®€åŒ–äº†ç»“æœè·å–é€»è¾‘ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// es8 async
const <span class="hljs-attr">main</span> = async() =&gt; {
    const <span class="hljs-attr">html</span> = await p<span class="hljs-comment">;</span>
    console.log(html)<span class="hljs-comment">;</span>
}
main()<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ®µä»£ç çš„æ ¸å¿ƒæ˜¯ä¸¤ä¸ªå…³é”®å­—çš„é…åˆï¼š<code>async</code>ç”¨äºä¿®é¥°å‡½æ•°ï¼ˆå¦‚è¿™é‡Œçš„<code>main</code>å‡½æ•°ï¼‰ï¼Œè¡¨æ˜è¯¥å‡½æ•°æ˜¯å¼‚æ­¥å‡½æ•°ï¼Œå…¶è¿”å›å€¼å¿…ç„¶æ˜¯Promiseï¼›<code>await</code>åªèƒ½åœ¨<code>async</code>å‡½æ•°å†…ä½¿ç”¨ï¼Œç”¨äºç­‰å¾…Promiseå®Œæˆâ€”â€”å®ƒä¼šâ€œæš‚åœâ€å‡½æ•°æ‰§è¡Œï¼Œç›´åˆ°PromiseçŠ¶æ€å˜ä¸ºæˆåŠŸï¼ˆfulfilledï¼‰ï¼Œå†å°†<code>resolve</code>çš„æ•°æ®èµ‹å€¼ç»™å·¦ä¾§å˜é‡ï¼ˆå¦‚<code>html</code>ï¼‰ã€‚</p>
<p>éœ€è¦è¡¥å……çš„æ˜¯ï¼Œå®é™…å¼€å‘ä¸­éœ€å®Œå–„é”™è¯¯å¤„ç†ï¼šè‹¥PromiseçŠ¶æ€ä¸ºå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œ<code>await</code>ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéœ€ç”¨<code>try/catch</code>æ•è·ï¼Œä¼˜åŒ–åçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span>(<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> html = <span class="hljs-keyword">await</span> p;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(html);
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é”™è¯¯ï¼š'</span>, err); <span class="hljs-comment">// æ•è·rejectçš„é”™è¯¯</span>
    }
}
<span class="hljs-title function_">main</span>();
</code></pre>
<p>async/awaitçš„ä»·å€¼ä¸ä»…åœ¨äºç®€æ´ï¼Œæ›´åœ¨äºé€»è¾‘è´´è¿‘äººç±»æ€ç»´ã€‚æ¯”å¦‚è¿ç»­æ‰§è¡Œä¸‰ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œåªéœ€ç”¨ä¸‰ä¸ª<code>await</code>ä¾æ¬¡ç­‰å¾…ï¼Œä»£ç é¡ºåºä¸ä»»åŠ¡æ‰§è¡Œé¡ºåºå®Œå…¨ä¸€è‡´ï¼Œæ— éœ€å…³æ³¨Promiseçš„é“¾å¼è°ƒç”¨ç»†èŠ‚ã€‚</p>
<h3 data-id="heading-4">å››ã€è¿›åŒ–æ€»ç»“ï¼šä»å·¥å…·åˆ°æ€ç»´çš„è´´è¿‘</h3>
<p>å›é¡¾JavaScriptå¼‚æ­¥çš„è¿›åŒ–ä¹‹è·¯ï¼Œæ¯ä¸€æ­¥éƒ½æ˜¯å¯¹â€œå¼€å‘ä½“éªŒâ€çš„ä¼˜åŒ–ï¼šå›è°ƒå‡½æ•°æ˜¯å¼‚æ­¥çš„åŸºç¡€å·¥å…·ï¼Œå´è¿èƒŒçº¿æ€§æ€ç»´ï¼›Promiseé€šè¿‡æ ‡å‡†åŒ–å®¹å™¨è§„èŒƒå¼‚æ­¥æµç¨‹ï¼Œè§£å†³åµŒå¥—é—®é¢˜ï¼›async/awaitåˆ™å½»åº•æŠ¹å¹³å¼‚æ­¥ä¸åŒæ­¥çš„è¯­æ³•å·®å¼‚ï¼Œè®©ä»£ç é€»è¾‘ä¸äººç±»æ€è€ƒé¡ºåºå®Œå…¨ç»Ÿä¸€ã€‚</p>
<p>å®é™…å¼€å‘ä¸­æ— éœ€æ‹˜æ³¥äºå•ä¸€æ–¹æ¡ˆï¼šç®€å•å¼‚æ­¥ä»»åŠ¡å¯ç”¨å›è°ƒï¼›å¤šä»»åŠ¡ä¾èµ–ä¼˜å…ˆç”¨Promiseé“¾å¼è°ƒç”¨ï¼›å¤æ‚ä¸šåŠ¡é€»è¾‘åˆ™é¦–é€‰async/awaitï¼Œå…¼é¡¾å¯è¯»æ€§ä¸ç»´æŠ¤æ€§ã€‚ç†è§£ä¸‰è€…çš„å…³è”ä¸æ¼”è¿›é€»è¾‘ï¼Œæ‰èƒ½æ ¹æ®åœºæ™¯çµæ´»é€‰æ‹©æœ€åˆé€‚çš„å¼‚æ­¥æ–¹æ¡ˆï¼Œå†™å‡ºé«˜æ•ˆä¼˜é›…çš„JavaScriptä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OkHttp æ·±åº¦è§£æ(ä¸€) : ä»ä¸€æ¬¡å®Œæ•´è¯·æ±‚çœ‹ OkHttp æ•´ä½“æ¶æ„]]></title>    <link>https://juejin.cn/post/7575017581036732454</link>    <guid>https://juejin.cn/post/7575017581036732454</guid>    <pubDate>2025-11-21T16:25:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575017581036732454" data-draft-id="7574725286530678835" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OkHttp æ·±åº¦è§£æ(ä¸€) : ä»ä¸€æ¬¡å®Œæ•´è¯·æ±‚çœ‹ OkHttp æ•´ä½“æ¶æ„"/> <meta itemprop="keywords" content="OKHttp,Android"/> <meta itemprop="datePublished" content="2025-11-21T16:25:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Entropless"/> <meta itemprop="url" content="https://juejin.cn/user/3518885279826078"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OkHttp æ·±åº¦è§£æ(ä¸€) : ä»ä¸€æ¬¡å®Œæ•´è¯·æ±‚çœ‹ OkHttp æ•´ä½“æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3518885279826078/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Entropless
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T16:25:17.000Z" title="Fri Nov 21 2025 16:25:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-cave-dark">.hljs-comment,.hljs-quote{color:#7e7887}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#be4678}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa573c}.hljs-bullet,.hljs-string,.hljs-symbol{color:#2a9292}.hljs-section,.hljs-title{color:#576ddb}.hljs-keyword,.hljs-selector-tag{color:#955ae7}.hljs-addition,.hljs-deletion{color:#19171c;display:inline-block;width:100%}.hljs-deletion{background-color:#be4678}.hljs-addition{background-color:#2a9292}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#19171c;color:#8b8792}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ OkHttp æ·±åº¦è§£æç³»åˆ—æ–‡ç« </p>
<p><a href="https://juejin.cn/spost/7575017581036732454" target="_blank" title="https://juejin.cn/spost/7575017581036732454">OkHttpæ·±åº¦è§£æ(ä¸€) : ä»ä¸€æ¬¡å®Œæ•´è¯·æ±‚çœ‹ OkHttpæ•´ä½“æ¶æ„</a></p>
<p><a href="https://juejin.cn/post/7575031395861446702" target="_blank" title="https://juejin.cn/post/7575031395861446702">OkHttpæ·±åº¦è§£æ(äºŒ) : OkHttpClient ä½ æ²¡è§è¿‡çš„é‚£äº›å±æ€§</a></p>
<p><a href="https://juejin.cn/post/7575006095389097993" target="_blank" title="https://juejin.cn/post/7575006095389097993">OkHttpæ·±åº¦è§£æ(ä¸‰) : æ‹¦æˆªå™¨ï¼Ÿè¿æ¥å¤ç”¨&amp;åˆå¹¶ï¼ŸHttp2?</a></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>OkHttp æ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼Œå‡ ä¹æ¯ä¸ª Android å¼€å‘äººå‘˜åº”è¯¥éƒ½ä½¿ç”¨è¿‡å®ƒã€‚</p>
<p>æœ¬æ–‡æ·±å…¥ä»‹ç»äº† Okhttp çš„æ•´ä½“æ¡†æ¶ç»“æ„ï¼ŒOkhttpClienté‡ç‚¹å±æ€§æ·±åº¦è§£é‡Šï¼Œå¹¶ä¸”<strong>æ·±åº¦åˆ†æ</strong>äº†<strong>ä¸€æ¬¡å®Œæ•´çš„çš„ Http è¯·æ±‚åœ¨Okhttpä¸­æ˜¯å¦‚ä½•å®ç°çš„</strong>ï¼Œæˆ‘ä¸ªäººä¹ æƒ¯ç³»ç»Ÿæ€§äº†è§£ä¸€é¡¹æŠ€æœ¯è€Œä¸æ˜¯å•çº¯çš„ç½—åˆ—æºç é€šç¯‡è®²è§£ï¼Œå› ä¸ºåªæœ‰å»ºç«‹å‡ºç³»ç»Ÿï¼Œæ‰èƒ½ç†è§£çš„æ›´é€å½»ï¼Œè¿™æ ·è®°å¿†ä¼šéå¸¸æ·±åˆ»ã€‚å› æ­¤æˆ‘ä¾§é‡ä½¿ç”¨ç”»å›¾çš„æ–¹å¼æ¥åˆ†æ Okhttpï¼ˆåªæœ‰å…³é”®æºç ï¼‰ï¼Œ<strong>å›¾æ˜¯é‡ç‚¹</strong>ï¼Œæ–‡å­—æ˜¯è¾…åŠ©ï¼ˆç”»å›¾å¥½çºğŸ˜…ï¼‰ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« åº”è¯¥æ˜¯ä½ ä»æœªè§è¿‡çš„OkHttp å…¨æµç¨‹ç½‘ç»œè¯·æ±‚çš„æ·±å…¥è§£è¯»ï¼Œå®ƒåŒæ—¶ä¹Ÿå¯èƒ½è§£æƒ‘ä½ åœ¨å…¶å®ƒåšå®¢ä¸­æ‰¾ä¸åˆ°ç­”æ¡ˆçš„ç–‘é—®ã€‚</p>
<h2 data-id="heading-1">OkHttp å‘å±•èƒŒæ™¯</h2>
<ul>
<li>
<p>è¯ç”ŸèƒŒæ™¯</p>
<p>åœ¨OkHttpå‡ºç°ä¹‹å‰ï¼ŒAndroidå¼€å‘è€…ä¸»è¦ä½¿ç”¨Apacheçš„<code>HttpClient</code>å’ŒGoogleè‡ªå®¶çš„<code>HttpURLConnection</code>è¿›è¡Œç½‘ç»œè¯·æ±‚ã€‚ä½†è¿™ä¸¤è€…å¤šå°‘éƒ½ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚ç¾å›½çš„ç§»åŠ¨æ”¯ä»˜å…¬å¸Squareåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ·±æ„Ÿè¿™äº›åŸç”Ÿç½‘ç»œåº“éš¾ä»¥æ»¡è¶³å…¶éœ€æ±‚ï¼Œä¾¿åœ¨2013å¹´å¼€æºäº†<strong>OkHttp</strong>ã€‚</p>
</li>
<li>
<p>å‘å±•ä¹‹è·¯: <strong>ä»åŒ…è£…åˆ°æ›¿ä»£</strong></p>
<p>OkHttpå¹¶éä¸€å¼€å§‹å°±å®Œå…¨å¦èµ·ç‚‰ç¶ï¼Œå…¶å‘å±•ç»å†äº†å‡ ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>åˆæœŸåŒ…è£…</strong>ï¼šæœ€åˆï¼ŒOkHttpæ˜¯å¯¹åŸç”Ÿ<code>HttpClient</code>å’Œ<code>HttpURLConnection</code>çš„å°è£…ï¼Œæ—¨åœ¨æä¾›æ›´å‹å¥½ã€ç»Ÿä¸€çš„APIã€‚</li>
<li><strong>å‰¥ç¦»ä¸ç‹¬ç«‹</strong>ï¼šéšç€Apacheå®£å¸ƒå¼ƒç”¨<code>HttpClient</code>ï¼ŒOkHttpä¹Ÿç§»é™¤äº†å¯¹å…¶çš„æ”¯æŒã€‚åæ¥ï¼ŒSquareå›¢é˜Ÿè®¤ä¸º<code>HttpURLConnection</code>ä¹Ÿä¸å¤Ÿå¥½ç”¨ï¼Œç´¢æ€§å»æ‰äº†å¯¹å®ƒçš„ä¾èµ–ï¼Œè½¬è€Œç›´æ¥ä» Socket å±‚å®Œå…¨é‡å†™æ•´ä¸ª Http ç½‘ç»œè¯·æ±‚**ï¼Œå®ç°äº†çœŸæ­£çš„ç‹¬ç«‹ã€‚</li>
<li><strong>åå‘å½±å“</strong>ï¼šOkHttpå› å…¶å‡ºè‰²çš„è®¾è®¡å’Œæ€§èƒ½ï¼Œå—åˆ°äº†å¹¿å¤§å¼€å‘è€…çš„æ¬¢è¿ã€‚Googleä¹Ÿæ³¨æ„åˆ°äº†è¿™ä¸€ç‚¹ï¼Œå¹¶åœ¨Android 4.4 (KitKat) ç³»ç»Ÿä¸­ï¼Œå°†<code>HttpURLConnection</code>çš„åº•å±‚å®ç°æ›¿æ¢æˆäº†OkHttp**ã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿ä½ åœ¨ä»£ç ä¸­ä½¿ç”¨çš„æ˜¯æ ‡å‡†çš„<code>HttpURLConnection</code>ï¼Œå…¶åº•å±‚å®é™…ä½¿ç”¨çš„ Okhttpçš„ä»£ç ã€‚</li>
<li><strong>å‘Kotlinè¿ˆè¿›</strong>ï¼šä»OkHttp 4ç‰ˆæœ¬å¼€å§‹ï¼ŒSquareå¼€å§‹ä½¿ç”¨Kotlinè¯­è¨€è¿›è¡Œé‡å†™</li>
</ol>
</li>
</ul>
<h2 data-id="heading-2">OkHttp æ•´ä½“æ¡†æ¶</h2>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹ä½¿ç”¨ Okhttp å¦‚ä½•å®Œæˆä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//okhttp ç½‘ç»œè¯·æ±‚ç¤ºä¾‹(å¼‚æ­¥)</span>
<span class="hljs-keyword">val</span> client = OkHttpClient()
<span class="hljs-keyword">val</span> request = Request.Builder()
    .url(<span class="hljs-string">""</span>)
    .build()
client.newCall(request)
    .enqueue(<span class="hljs-keyword">object</span> : Callback {
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onFailure</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>, e: <span class="hljs-type">IOException</span>)</span></span> {
            <span class="hljs-comment">//å¤„ç†é”™è¯¯</span>
        }
        <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onResponse</span><span class="hljs-params">(call: <span class="hljs-type">Call</span>, response: <span class="hljs-type">Response</span>)</span></span> {
            <span class="hljs-comment">//å¤„ç† response</span>
        }
    })
</code></pre>
<p>ä»£ç éå¸¸ç®€å•ï¼Œè¿™å¾—ç›Šäº Okhttp ä¼˜ç§€çš„æ¡†æ¶è®¾è®¡ï¼Œä»¥ä¸‹æ˜¯ä»¥ä¸€æ¬¡ç½‘ç»œè¯·æ±‚æµç¨‹çš„è§†è§’æ¥ç³»ç»Ÿçš„äº†è§£ Okhttp çš„æ•´ä½“ç»“æ„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf81327cc5f346898b226a478b80aeaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRW50cm9wbGVzcw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764348920&amp;x-signature=DCyjlzJnAG0SdjN49d7NvjbdXKk%3D" alt="OkHttpæ•´ä½“æ¡†æ¶å›¾ï¼ˆè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼‰@Entropless" loading="lazy"/></p>
<p>æ–‡å­—è¯´æ˜ï¼š(è¯·åœ¨çœ‹å®Œæ–‡å­—è¯´æ˜åå›æ¥å†çœ‹ä¸€æ¬¡ä¸Šé¢çš„å›¾ï¼Œç†è§£ä¼šæ›´æ·±åˆ»ï¼Œè€Œä¸”ä¸å®¹æ˜“å¿˜è®°)</p>
<ol>
<li>
<p>é€šè¿‡ OkHttpClient.Builder æ¥æ„é€ å‡ºä¸€ä¸ª OkHttpClient å®ä¾‹ï¼ˆè¿™ä¸ªå®ä¾‹åœ¨ç»å¤§éƒ¨åˆ†åœºæ™¯éƒ½åº”è¯¥æ˜¯å•ä¾‹çš„ï¼‰,åé¢ä¼šè¯¦ç»†ä»‹ç» OkHttpClient ä¸­å„ä¸ªå±æ€§é…ç½®çš„ä½œç”¨</p>
</li>
<li>
<p>é€šè¿‡ Request.Builder æ¥æ„é€ å‡ºä¸€ä¸ª Request å®ä¾‹ï¼Œè¿™è¡¨ç¤ºä¸€ä¸ª originalRequest(åŸå§‹è¯·æ±‚)ï¼Œå¼€å‘è€…éœ€è¦é…ç½®ä¸€ä¸ªè¯·æ±‚çš„åŸºç¡€å‚æ•°</p>
</li>
<li>
<p>é€šè¿‡ newCall æ–¹æ³•ï¼ˆæºå¸¦ request å‚æ•°ï¼‰åˆ›å»ºä¸€ä¸ª Call å¯¹è±¡ï¼Œå®é™…ä¸º RealCall å®ä¾‹ï¼Œå®ƒåŒ…å«äº†ä»¥ä¸‹å‚æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RealCall</span>(
  <span class="hljs-keyword">val</span> client: OkHttpClient,<span class="hljs-comment">//å¼€å‘è€…åˆ›å»ºå‡ºæ¥çš„ OkHttp Client å®ä¾‹</span>
  <span class="hljs-comment">/** ä¸€ä¸ªæœªç»é‡å®šå‘æˆ–è€…æ²¡æœ‰æ·»åŠ è®¤è¯å¤´çš„åŸå§‹è¯·æ±‚ï¼Œ
	  ä¹Ÿå°±æ˜¯æœªç»OkHttpå†…éƒ¨å¤„ç†çš„è¯·æ±‚ï¼Œå¹¶ä¸æ˜¯å®é™…å‘ç»™æœåŠ¡å™¨çš„è¯·æ±‚ 
  */</span>
  <span class="hljs-keyword">val</span> originalRequest: Request,
  <span class="hljs-keyword">val</span> forWebSocket: <span class="hljs-built_in">Boolean</span> <span class="hljs-comment">//å‘èµ·çš„æ˜¯å¦æ˜¯ä¸€ä¸ªWebSocketè¯·æ±‚ï¼Œå› ä¸ºWebSocketä¹Ÿæ˜¯åŸºäºHttpçš„åè®®</span>
) : Call {
	......
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆ›å»ºçš„è¿™ä¸ªåŸå§‹è¯·æ±‚å¯¹è±¡ï¼Œè¢«è½¬åŒ–ä¸º äº†ä¸€ä¸ª RealCallï¼Œåé¢çš„æ¯ä¸ª RealCall å°±ä»£è¡¨äº†ä¸€ä¸ªè¯·æ±‚</p>
</li>
<li>
<p>å¼€å§‹ä½¿ç”¨ execute(åŒæ­¥)/enqueue(å¼‚æ­¥)çš„æ–¹å¼å‘èµ·ä¸€ä¸ª Http è¯·æ±‚</p>
</li>
<li>
<p>enqueue æ–¹å¼ï¼š enqueue éœ€è¦ä¼ å…¥ä¸€ä¸ª callback å¯¹è±¡æ¥æ¥æ”¶è¿”å›ç»“æœï¼Œæ•´ä½“é€»è¾‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">enqueue</span><span class="hljs-params">(responseCallback: <span class="hljs-type">Callback</span>)</span></span> {
	<span class="hljs-comment">//æ£€æŸ¥è¯·æ±‚çš„æ‰§è¡ŒçŠ¶æ€</span>
  check(executed.compareAndSet(<span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)) { <span class="hljs-string">"Already Executed"</span> }
  <span class="hljs-comment">//äº‹ä»¶è®°å½•ï¼Œæ ‡è®°å¼€å§‹æ‰§è¡Œè¯·æ±‚</span>
  callStart()
  <span class="hljs-comment">//åˆå§‹åŒ–ä¸€ä¸ªå¼‚æ­¥çš„ Callï¼Œå¹¶å…¥é˜Ÿ</span>
  client.dispatcher.enqueue(AsyncCall(responseCallback))
}
</code></pre>
<blockquote>
<p>ğŸ’¡
PS: å…³äºcheck æ–¹æ³•ï¼Œè¿™æ˜¯ Kotlin æ ‡å‡†åº“ä¸­çš„æ–¹æ³•ï¼Œå®ƒå†…éƒ¨ä½¿ç”¨çš„æ˜¯ Kotlin Contract è¿™ä¸ªé«˜çº§ç‰¹æ€§</p>
<p>æ­¤å¤„ç®€å•ä»‹ç»ä¸‹è¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºåœ¨ Okhttp ä¸­å¤§é‡ä½¿ç”¨åˆ°äº†å®ƒ</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-meta">@kotlin</span>.<span class="hljs-keyword">internal</span>.InlineOnly

<span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">check</span><span class="hljs-params">(value: <span class="hljs-type">Boolean</span>, lazyMessage: () -&gt; <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Unit</span> {

contract {

returns() implies value

}

<span class="hljs-keyword">if</span> (!value) {

<span class="hljs-keyword">val</span> message = lazyMessage()

<span class="hljs-keyword">throw</span> IllegalStateException(message.toString())

}

}

</code></pre>
<p>contract è¡¨ç¤ºå¥‘çº¦ï¼Œimplies è¡¨ç¤º æš—ç¤ºï¼Œè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯ <strong>å¼€å‘è€… å‘Šè¯‰ ç¼–è¯‘å™¨</strong> å¦‚æœ check æ–¹æ³•èƒ½å¤Ÿæ­£å¸¸è¿”å›(ä¹Ÿå°±æ˜¯ä¸ä¼šæŠ›å‡ºå¼‚å¸¸)ï¼Œåˆ™æš—ç¤ºæ£€æŸ¥æˆåŠŸï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯ã€‚</p>
<p>enqueue æ–¹æ³•ä¸­ check çš„ä½œç”¨å°±æ˜¯è¯·æ±‚æ‰§è¡ŒçŠ¶æ€çš„æ£€æŸ¥</p>
<ul>
<li>
<p>**<code>executed</code>**æ˜¯ä¸€ä¸ª <code>AtomicBoolean</code>ï¼Œç”¨äºæ ‡è®°è¿™ä¸ª <code>Call</code>æ˜¯å¦å·²è¢«æ‰§è¡Œè¿‡ã€‚<code>compareAndSet(false, true)</code>å°è¯•å°†å…¶å€¼ä» <code>false</code>è®¾ç½®ä¸º <code>true</code>ã€‚</p>
</li>
<li>
<p><strong><code>check</code>å‡½æ•°</strong>ï¼šå¦‚æœä¼ å…¥çš„è¡¨è¾¾å¼ç»“æœä¸º <code>false</code>ï¼ˆå³è®¾ç½®å¤±è´¥ï¼Œè¯´æ˜ <code>executed</code>å·²ç»æ˜¯ <code>true</code>ï¼Œæ„å‘³ç€è¿™ä¸ª <code>Call</code>å·²ç»è¢«æ‰§è¡Œè¿‡ï¼‰ï¼Œ<code>check</code>å‡½æ•°å°±ä¼šæŠ›å‡ºä¸€ä¸ª <code>IllegalStateException</code>ï¼Œå¼‚å¸¸ä¿¡æ¯ä¸º "Already Executed"ã€‚</p>
</li>
<li>
<p><strong>è¿™ä¿è¯äº†</strong>ä¸€ä¸ª <code>Call</code>å®ä¾‹åªèƒ½è¢«æ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ˜¯ OkHttp é˜²æ­¢é‡å¤è¯·æ±‚çš„é‡è¦è®¾è®¡ã€‚</p>
</li>
</ul>
<p>ğŸ”‘
å…³äº Contract çš„æ›´æ·±å…¥ç†è§£ï¼Œ<a href="https://juejin.cn/post/7574775334680952842" target="_blank" title="https://juejin.cn/post/7574775334680952842">è¯·ç§»æ­¥æ­¤å¤„</a></p>
</blockquote>
<p>keep on :</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">enqueue</span><span class="hljs-params">(call: <span class="hljs-type">AsyncCall</span>)</span></span> {
    synchronized(<span class="hljs-keyword">this</span>) {
	    <span class="hljs-comment">//å°†è¿™ä¸ªè¯·æ±‚æ·»åŠ åˆ°å‡†å¤‡æ‰§è¡Œçš„é˜Ÿåˆ—ä¸­</span>
      readyAsyncCalls.add(call)
			<span class="hljs-comment">/**ä¸‹é¢è¿™ä¸¤è¡Œä»£ç çš„æ„æ€æ˜¯ï¼šæ‰¾åˆ°ä¸å½“å‰çš„è¿™ä¸ªè¯·æ±‚ä¸»æœºåç›¸åŒçš„Call,
				ç„¶åä½¿å®ƒä»¬å…±äº«ã€ŒåŒä¸€ä¸ªä¸»æœºè¯·æ±‚ä¸ªæ•°ã€è¿™ä¸ªå˜é‡ã€‚
				ä¸ºä½•å…±äº«ï¼Ÿå› ä¸º Okhttp è¦æ±‚åŒä¸€ä¸ªä¸»æœºçš„è¯·æ±‚ä¸ªæ•°ä¸èƒ½å¤§äº5ä¸ªï¼ˆé»˜è®¤ï¼‰
			*/</span>
      <span class="hljs-keyword">if</span> (!call.call.forWebSocket) {
        <span class="hljs-keyword">val</span> existingCall = findExistingCallWithHost(call.host)
        <span class="hljs-keyword">if</span> (existingCall != <span class="hljs-literal">null</span>) call.reuseCallsPerHostFrom(existingCall)
      }
    }
    <span class="hljs-comment">//å¼€å§‹æ¨ä¸¾å¹¶æ‰§è¡Œè¯·æ±‚</span>
    promoteAndExecute()
  }
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//promote è¡¨ç¤ºæ¨åŠ¨ï¼Œæ„æ€å°±æ˜¯å¯¹readyAsyncCallsä¸­ Call è¿›è¡Œè¿›ä¸€æ­¥çš„æŒ‘é€‰ï¼Œç„¶åæ‰§è¡Œ</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">promoteAndExecute</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">this</span>.assertThreadDoesntHoldLock()
		<span class="hljs-comment">//éå† readyAsyncCalls,æŒ‘é€‰å‡ºä¸ä¼šå¯¼è‡´è¶…è´Ÿè½½çš„ Call æ¥æ·»åŠ è‡³ executableCalls</span>
		<span class="hljs-comment">//åŒæ—¶ä¹Ÿä¼šæ·»åŠ åˆ° runningAsyncCallsä¸­(runningAsyncCallsä¸­ä¹ŸåŒ…å«å·²å–æ¶ˆå•ä½†æœªæ‰§è¡Œå®Œçš„Call)</span>
		<span class="hljs-comment">//runningAsyncCalls ä¸»è¦ç”¨äºè®°å½•æ­£åœ¨è¿è¡Œçš„ Call</span>
    <span class="hljs-keyword">val</span> executableCalls = mutableListOf&lt;AsyncCall&gt;()
    <span class="hljs-keyword">val</span> isRunning: <span class="hljs-built_in">Boolean</span>
    synchronized(<span class="hljs-keyword">this</span>) {
      <span class="hljs-keyword">val</span> i = readyAsyncCalls.iterator()
      <span class="hljs-keyword">while</span> (i.hasNext()) {
        <span class="hljs-keyword">val</span> asyncCall = i.next()

        <span class="hljs-keyword">if</span> (runningAsyncCalls.size &gt;= <span class="hljs-keyword">this</span>.maxRequests) <span class="hljs-keyword">break</span> <span class="hljs-comment">// Max capacity.</span>
        <span class="hljs-keyword">if</span> (asyncCall.callsPerHost.<span class="hljs-keyword">get</span>() &gt;= <span class="hljs-keyword">this</span>.maxRequestsPerHost) <span class="hljs-keyword">continue</span> <span class="hljs-comment">// Host max capacity.</span>

        i.remove()
        asyncCall.callsPerHost.incrementAndGet()
        executableCalls.add(asyncCall)
        runningAsyncCalls.add(asyncCall)
      }
      isRunning = runningCallsCount() &gt; <span class="hljs-number">0</span>
    }
		<span class="hljs-comment">//å¼€å§‹éå† executableCalls ç„¶åæ‰§è¡Œæ¯ä¸ª AsyncCall</span>
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until executableCalls.size) {
      <span class="hljs-keyword">val</span> asyncCall = executableCalls[i]
      asyncCall.executeOn(executorService)
    }
    <span class="hljs-keyword">return</span> isRunning
  }
</code></pre>
<p>ç”±äº AsyncCall ç»§æ‰¿äº† Runnable ï¼Œå› æ­¤å®ƒè¡¨ç¤ºä¸€ä¸ªéœ€è¦æ”¾è¿›çº¿ç¨‹æ± ä¸­æ‰§è¡Œçš„å…·ä½“ä»»åŠ¡ï¼Œè¿™æ˜¯å¼‚æ­¥è¯·æ±‚çš„æ ¸å¿ƒï¼ˆæ­¤å¤„ä»…è´´å‡ºæ ¸å¿ƒä»£ç ï¼‰</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">inner</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncCall</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> responseCallback: Callback
  ) : Runnable {
    <span class="hljs-meta">@Volatile</span> <span class="hljs-keyword">var</span> callsPerHost = AtomicInteger(<span class="hljs-number">0</span>)
      <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">reuseCallsPerHostFrom</span><span class="hljs-params">(other: <span class="hljs-type">AsyncCall</span>)</span></span> {
      <span class="hljs-keyword">this</span>.callsPerHost = other.callsPerHost
    }
    ...
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">executeOn</span><span class="hljs-params">(executorService: <span class="hljs-type">ExecutorService</span>)</span></span> {
      ...
      executorService.execute(<span class="hljs-keyword">this</span>)
      ...
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span> {
      ...
      <span class="hljs-comment">//è¿™æ˜¯å¼‚æ­¥ä»»åŠ¡çš„æ ¸å¿ƒï¼Œé€šè¿‡æ‹¦æˆªå™¨é“¾çš„é“¾å¼è°ƒç”¨æ–¹å¼æ‰§è¡Œä¸€ä¸ªè¯·æ±‚å¹¶è¿”å›ç»“æœ</span>
      <span class="hljs-keyword">val</span> response = getResponseWithInterceptorChain()
      ...
      <span class="hljs-comment">//æŠŠè¿”å›çš„ response ä¼ ç»™ callback</span>
      responseCallback.onResponse(<span class="hljs-keyword">this</span><span class="hljs-symbol">@RealCall</span>, response)
      ...
    }
  }
</code></pre>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¡¥ç æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆbyteçš„èŒƒå›´æ˜¯-128~127ï¼Œè´Ÿæ•°è¦æ¯”æ•´æ•°å¤š1ä¸ªï¼Ÿ]]></title>    <link>https://juejin.cn/post/7575050949958680612</link>    <guid>https://juejin.cn/post/7575050949958680612</guid>    <pubDate>2025-11-21T16:25:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575050949958680612" data-draft-id="7575021235135463443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¡¥ç æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆbyteçš„èŒƒå›´æ˜¯-128~127ï¼Œè´Ÿæ•°è¦æ¯”æ•´æ•°å¤š1ä¸ªï¼Ÿ"/> <meta itemprop="keywords" content="è®¡ç®—æœºç»„æˆåŸç†"/> <meta itemprop="datePublished" content="2025-11-21T16:25:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Joey_Chen"/> <meta itemprop="url" content="https://juejin.cn/user/2522755752011596"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¡¥ç æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆbyteçš„èŒƒå›´æ˜¯-128~127ï¼Œè´Ÿæ•°è¦æ¯”æ•´æ•°å¤š1ä¸ªï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2522755752011596/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Joey_Chen
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T16:25:23.000Z" title="Fri Nov 21 2025 16:25:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨å­¦ä¹ ä»»ä½•ä¸€é—¨ç¼–ç¨‹è¯­è¨€æ—¶ï¼Œéƒ½ä¼šé¦–å…ˆå­¦ä¹ åŸºæœ¬æ•°æ®ç±»å‹ã€‚å…¶ä¸­nä½çš„æ•´æ•°ç±»å‹ï¼ˆæœ‰ç¬¦å·ï¼‰çš„èŒƒå›´æ˜¯:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>âˆ’</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>âˆ¼</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo>âˆ’</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-2^{n-1} \sim 2^{n-1}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"/><span class="mord">âˆ’</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"/><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span></div>
<p>ä¾‹å¦‚C++ä¸­çš„<code>int8_t</code>å’Œ<code>char</code>ï¼Œä»¥åŠJavaä¸­çš„<code>byte</code>ï¼Œéƒ½æ˜¯8ä½æœ‰ç¬¦å·æ•´æ•°ï¼ŒèŒƒå›´æ˜¯<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><mn>128</mn><mo>âˆ¼</mo><mn>127</mn></mrow><annotation encoding="application/x-tex">-128 \sim 127</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">âˆ’</span><span class="mord">128</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">127</span></span></span></span></span>, æœ‰æ²¡æœ‰æƒ³è¿‡ä¸ºä»€ä¹ˆè´Ÿæ•°ä¼šæ¯”æ­£æ•°å¤šä¸€ä¸ªå‘¢ï¼Ÿ</p>
<p>å¦å¤–ï¼Œå¦‚æœ<code>byte num = 127</code>, ä»€ä¹ˆ<code>num + 1=-128</code>å‘¢ï¼Ÿ</p>
<p>è¦æƒ³ææ¸…æ¥šèƒŒåçš„åŸç†ï¼Œå°±è¦çŸ¥é“<strong>äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºæ³•</strong></p>
<h2 data-id="heading-1">äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºæ³•</h2>
<p>äºŒè¿›åˆ¶è¡¥ç æ˜¯è®¡ç®—æœºä¸­è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°çš„æ ‡å‡†æ–¹å¼ï¼ˆä¾‹å¦‚Java ä¸­ byteã€shortã€intã€long ç­‰æ•´æ•°ç±»å‹å‡é‡‡ç”¨è¡¥ç å­˜å‚¨ï¼‰ã€‚åœ¨è¡¥ç å‡ºç°ä¹‹å‰ï¼Œè®¡ç®—æœºæ›¾ç”¨<strong>åŸç </strong>ã€<strong>åç </strong>è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°</p>
<h3 data-id="heading-2">åŸç </h3>
<ul>
<li><strong>è¡¨ç¤ºæ–¹å¼</strong>ï¼šæœ€é«˜ä½ä¸ºç¬¦å·ä½ï¼ˆ0 = æ­£ã€1 = è´Ÿï¼‰ï¼Œæ•°å€¼ä½ä¸ºäºŒè¿›åˆ¶æœ¬èº«ã€‚ä¾‹å¦‚ 8 ä½åŸç <code>+3=00000011</code>ï¼Œ<code>-3=10000011</code></li>
<li><strong>å­˜åœ¨é—®é¢˜</strong>ï¼š
<ul>
<li>å­˜åœ¨ â€œæ­£è´Ÿ 0â€ï¼ˆ<code>+0=00000000</code>ã€<code>-0=10000000</code>ï¼‰ï¼Œæµªè´¹ä¸€ä¸ªå­˜å‚¨ä½</li>
<li>å‡æ³•éœ€å•ç‹¬å¤„ç†ï¼ˆ<code>3-2</code>Â ä¸èƒ½ç›´æ¥ç”¨Â <code>3+(-2)</code>Â çš„åŸç ç›¸åŠ ï¼Œç»“æœä¼šå‡ºé”™ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-plaintext" lang="plaintext">  3  -&gt; 00000011
+ -2 -&gt; 10000010
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        10000101  -&gt; -5, ç»“æœé”™è¯¯
</code></pre>
<h3 data-id="heading-3">åç </h3>
<ul>
<li><strong>è¡¨ç¤ºæ–¹å¼</strong>ï¼šæ­£æ•°åç  = åŸç ï¼›è´Ÿæ•°åç  = ç¬¦å·ä½ä¸å˜ï¼Œæ•°å€¼ä½æŒ‰ä½å–åã€‚ä¾‹å¦‚ 8 ä½åç ï¼š<code>+3=00000011</code>ï¼Œ<code>-3=11111100</code>ã€‚</li>
<li><strong>å­˜åœ¨é—®é¢˜</strong>ï¼š
<ul>
<li>å‡æ³•é—®é¢˜ï¼šä¸åŸç ç›¸æ¯”ï¼Œå¯ä»¥å¤„ç†ç®€å•çš„å‡æ³•ï¼Œä½†æ˜¯éœ€è¦è¿›ä½å¾ªç¯å¢åŠ ç¡¬ä»¶æŒ‰å¤æ‚åº¦ã€‚æ›´è‡´å‘½çš„æ˜¯ï¼Œæ— æ³•å¤„ç†â€œæ­£è´Ÿ 0â€ çš„æ­§ä¹‰å¯¼è‡´è¿ç®—é€»è¾‘çŸ›ç›¾</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-plaintext" lang="plaintext">     3 -&gt; 00000011
  + -2 -&gt; 11111101
  â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
         100000000  -&gt; è¶…å‡º8ä½ï¼Œéœ€è¦è¿›ä½å¾ªç¯ï¼Œ
         èˆå¼ƒæœ€é«˜ä½Â `1`ï¼Œå°†è¿›ä½åŠ å›æœ€ä½ä½ â†’Â `00000000 + 1 = 00000001`ï¼Œç»“æœä¸º1ï¼Œæ­£ç¡®ï¼›
         
     3 -&gt; 00000011
  + -3 -&gt; 11111100
  â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
          11111111  -&gt; -0, ä½†æ˜¯3-3ç»“æœåº”è¯¥æ˜¯0ï¼Œå­˜åœ¨æ­§ä¹‰
</code></pre>
<h3 data-id="heading-4">è¡¥ç </h3>
<p>è¡¥ç çš„æ ¸å¿ƒæ”¹è¿›æ­£æ˜¯é’ˆå¯¹åç çš„ç¼ºé™·ï¼š</p>
<ul>
<li>æ¶ˆé™¤ â€œæ­£è´Ÿ 0â€ï¼šä»…ä¿ç•™Â <code>00000000</code>Â ä½œä¸º 0ï¼Œ<code>10000000</code>Â åˆ†é…ç»™Â <code>-128</code>ï¼ˆ8 ä½ï¼‰ï¼Œæ— æ­§ä¹‰ï¼›</li>
<li>æ— éœ€è¿›ä½å¾ªç¯ï¼šè¡¥ç åŠ æ³•çš„æœ€é«˜ä½è¿›ä½ç›´æ¥èˆå¼ƒï¼ˆæ¨¡è¿ç®—ç‰¹æ€§ï¼‰ï¼Œç¡¬ä»¶å®ç°ç®€å•ï¼›</li>
</ul>
<h4 data-id="heading-5">å…³é”®æ¦‚å¿µï¼šæ¨¡</h4>
<p>â€œæ¨¡â€ æ˜¯æŒ‡å­˜å‚¨ä½æ•°å¯¹åº”çš„ â€œæº¢å‡ºå€¼â€ï¼Œå³è¯¥ä½æ•°èƒ½è¡¨ç¤ºçš„æœ€å¤§æ— ç¬¦å·æ•° + 1ã€‚ä¾‹å¦‚8ä½æ•´æ•°ï¼ˆå¦‚Â <code>byte</code>ï¼‰æ¨¡ = 2â¸ = 256ï¼ˆèƒ½è¡¨ç¤º 0~255 å…± 256 ä¸ªå€¼ï¼‰ï¼›</p>
<h4 data-id="heading-6">è¡¥ç è®¡ç®—æ­¥éª¤</h4>
<ol>
<li>æ­£æ•°çš„è¡¥ç ï¼Œä¸åŸç å®Œå…¨ä¸€è‡´</li>
</ol>
<pre><code class="hljs language-plaintext" lang="plaintext">è§„åˆ™ï¼šç¬¦å·ä½ä¸º 0ï¼Œæ•°å€¼ä½ä¸ºè¯¥æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤º
ç¤ºä¾‹ï¼ˆä»¥ 8 ä½ä¸ºä¾‹ï¼‰:
+5Â çš„åŸç  =Â 00000101Â â†’ è¡¥ç  =Â 00000101ï¼›
+127Â çš„åŸç  =Â 01111111Â â†’ è¡¥ç  =Â 01111111
</code></pre>
<ol start="2">
<li>è´Ÿæ•°çš„è¡¥ç ï¼šä¸¤ç§ç­‰ä»·è®¡ç®—æ–¹å¼
<ul>
<li>æ–¹å¼ 1ï¼šè¡¥ç  = æ¨¡ - ç»å¯¹å€¼çš„åŸç </li>
<li>æ–¹å¼ 2ï¼šè¡¥ç  = è´Ÿæ•°çš„åç  + 1</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-plaintext" lang="plaintext">ç¤ºä¾‹ï¼šè®¡ç®— 8 ä½ -3Â çš„è¡¥ç 
å…ˆæ±‚ç»å¯¹å€¼Â 3Â çš„åŸç ï¼š00000011
æ–¹å¼ 1ï¼šæ¨¡ï¼ˆ256ï¼‰ - 3 = 253 â†’ 253 çš„äºŒè¿›åˆ¶ =Â 11111101ï¼ˆå³Â -3Â çš„è¡¥ç ï¼‰ï¼›
æ–¹å¼ 2ï¼š-3Â çš„åŸç  =Â 10000011Â â†’ åç ï¼ˆç¬¦å·ä½ä¸å˜ï¼Œæ•°å€¼ä½å–åï¼‰=Â 11111100Â â†’ åç  + 1 =Â 11111101ï¼ˆä¸æ–¹å¼ 1 ç»“æœä¸€è‡´ï¼‰ã€‚
</code></pre>
<p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆä¸¤ä¸ªæ–¹å¼ç­‰ä»·ï¼Œä¹Ÿå°±æ˜¯:  <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>æ¨¡</mtext><mo>âˆ’</mo><mtext>ç»å¯¹å€¼çš„åŸç </mtext><mo>=</mo><mtext>è´Ÿæ•°çš„åç </mtext><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">æ¨¡ - ç»å¯¹å€¼çš„åŸç  = è´Ÿæ•°çš„åç  + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord cjk_fallback">æ¨¡</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ç»å¯¹å€¼çš„åŸç </span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord cjk_fallback">è´Ÿæ•°çš„åç </span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span>ï¼Œå‡è®¾<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A&gt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ä¸ºæ­£æ•°ï¼Œåˆ™<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>âˆ’</mo><mi>A</mi><mo>&lt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">-A&lt;0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord">âˆ’</span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>ä¸ºè´Ÿæ•°</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>æ¨¡</mtext><mo>âˆ’</mo><mtext>ç»å¯¹å€¼çš„åŸç </mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mtext>è´Ÿæ•°çš„åç </mtext><mo>+</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>Â Â </mtext><mn>256</mn><mo>âˆ’</mo><mi>A</mi><mtext>çš„åŸç </mtext></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mo>âˆ’</mo><mi>A</mi><mtext>çš„åç </mtext><mo>+</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>Â Â Â Â Â </mtext><mn>255</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mo>âˆ’</mo><mi>A</mi><mtext>çš„åç </mtext><mo>+</mo><mi>A</mi><mtext>çš„åŸç Â Â </mtext></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{align*}

    æ¨¡ - ç»å¯¹å€¼çš„åŸç  &amp;= è´Ÿæ•°çš„åç  + 1 \\
    
Â  Â  256-Açš„åŸç  &amp;= -Açš„åç  + 1 \\ Â 

Â  Â  Â  Â 255 &amp;= -Açš„åç  + Açš„åŸç  

Â  Â  \end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.5em;vertical-align:-2em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord cjk_fallback">æ¨¡</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord cjk_fallback">ç»å¯¹å€¼çš„åŸç </span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">Â Â 256</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">A</span><span class="mord cjk_fallback">çš„åŸç </span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">Â Â Â Â Â 255</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord cjk_fallback">è´Ÿæ•°çš„åç </span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">1</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord">âˆ’</span><span class="mord mathnormal">A</span><span class="mord cjk_fallback">çš„åç </span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">1</span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord">âˆ’</span><span class="mord mathnormal">A</span><span class="mord cjk_fallback">çš„åç </span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord mathnormal">A</span><span class="mord cjk_fallback">çš„åŸç </span><span class="mord">Â Â </span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>æ ¹æ®è´Ÿæ•°åç çš„å®šä¹‰<strong>ç¬¦å·ä½ä¸å˜ï¼Œæ•°å€¼ä½æŒ‰ä½å–å</strong>ï¼Œ-Açš„åç å’ŒAçš„åŸç ä¸­ï¼Œå…¶ä¸­ä¸€æ–¹ä¸º1çš„ä½å¦ä¸€æ–¹å°±ä¸º0ï¼Œç›¸åŠ åˆšå¥½æ˜¯<code>11111111 = 255</code></p>
<h3 data-id="heading-7">å¦‚ä½•æ ¹æ®è¡¥ç æ±‚æ•°å€¼ï¼Ÿ</h3>
<p>æ ¹æ® <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>è¡¥ç </mtext><mo>=</mo><mtext>æ¨¡</mtext><mo>âˆ’</mo><mtext>ç»å¯¹å€¼çš„åŸç </mtext></mrow><annotation encoding="application/x-tex">è¡¥ç  = æ¨¡ - ç»å¯¹å€¼çš„åŸç </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">è¡¥ç </span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord cjk_fallback">æ¨¡</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ç»å¯¹å€¼çš„åŸç </span></span></span></span></span>å¾—ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>ç»å¯¹å€¼çš„åŸç </mtext><mo>=</mo><mtext>æ¨¡</mtext><mo>âˆ’</mo><mtext>è¡¥ç </mtext></mrow><annotation encoding="application/x-tex">ç»å¯¹å€¼çš„åŸç  = æ¨¡ - è¡¥ç </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">ç»å¯¹å€¼çš„åŸç </span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord cjk_fallback">æ¨¡</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">è¡¥ç </span></span></span></span></span></div>
<p>å¾—åˆ°ç»å¯¹å€¼çš„åŸç ï¼Œè®¡ç®—å‡ºç»å¯¹å€¼ï¼Œç„¶åå†æ ¹æ®è¡¥ç å¾—ç¬¦å·ä½åˆ¤æ–­æ­£è´Ÿï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">è¡¥ç 10000001è¡¨ç¤ºä»€ä¹ˆæ•°ï¼Ÿ
é¦–å…ˆç”¨æ¨¡-è¡¥ç ï¼š100000000 - 10000001 = 01111111 = 127
ç”±äºè¡¥ç ç¬¬ä¸€ä½æ˜¯1ï¼Œæ‰€ä»¥10000001è¡¨ç¤º-127

åè¿‡æ¥éªŒè¯ä¸€ä¸‹ï¼š
è¡¥ç  = è´Ÿæ•°çš„åç  + 1
10000001 = 10000000 + 1

è¡¥ç  = æ¨¡ - ç»å¯¹å€¼çš„åŸç 
10000001 = 100000000 - 01111111

</code></pre>
<h2 data-id="heading-8">ä¸ºä»€ä¹ˆè´Ÿæ•°èŒƒå›´æ¯”æ­£æ•°èŒƒå›´å¤š1ï¼Ÿ</h2>
<p>å…³é”®åœ¨äº0å¾—è¡¨ç¤ºï¼Œåœ¨äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºæ³•ä¸­ï¼Œ0åªæœ‰å”¯ä¸€çš„è¡¨ç¤ºæ–¹å¼ï¼š<code>00000000</code>ï¼Œé‚£ä¹ˆ<code>10000000</code>åœ¨è¡¥ç ä¸­è¡¨ç¤ºä»€ä¹ˆï¼Ÿ</p>
<p>ç»å¯¹å€¼çš„åŸç  = 100000000 - 10000000 = 10000000 = 128ï¼Œç¬¦å·ä½ä¸º1ï¼Œæ‰€ä»¥æ˜¯-128</p>
<p>ä¹Ÿå°±æ˜¯è¯´åŸç ä¸­çš„è¡¨ç¤º<code>-0</code>çš„10000000åœ¨è¡¥ç ä¸­è¡¨ç¤º-128ã€‚ç”±äºèˆå¼ƒäº†-0ï¼Œå¹¶åˆ†é…ç»™äº†æœ€å°çš„è´Ÿæ•°-128ï¼Œæ‰€ä»¥è´Ÿæ•°çš„èŒƒå›´å°±æ¯”æ­£æ•°å¤š1ä¸ª</p>
<h2 data-id="heading-9">ä¸ºä»€ä¹ˆ 127 + 1 = -128ï¼Ÿ</h2>
<p>çŸ¥é“äº†è¡¥ç çš„åŸç†åå°±å¾ˆå¥½ç†è§£äº†ï¼Œ127 + 1 = 01111111 + 1 = 10000000 = -128</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬14è®²ï¼šCompletableFutureï¼ˆä¸Šï¼‰â€”â€”æ„å»ºå¼‚æ­¥åº”ç”¨]]></title>    <link>https://juejin.cn/post/7575015480199020596</link>    <guid>https://juejin.cn/post/7575015480199020596</guid>    <pubDate>2025-11-22T03:39:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575015480199020596" data-draft-id="7575054113923661839" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬14è®²ï¼šCompletableFutureï¼ˆä¸Šï¼‰â€”â€”æ„å»ºå¼‚æ­¥åº”ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-22T03:39:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§‘å¨èˆŸçš„ä»£ç ç¬”è®°"/> <meta itemprop="url" content="https://juejin.cn/user/1732486058230174"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬14è®²ï¼šCompletableFutureï¼ˆä¸Šï¼‰â€”â€”æ„å»ºå¼‚æ­¥åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1732486058230174/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§‘å¨èˆŸçš„ä»£ç ç¬”è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T03:39:07.000Z" title="Sat Nov 22 2025 03:39:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>[toc]</p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä½ ä»¬çš„èˆ¹é•¿ï¼š<strong>ç§‘å¨èˆŸ</strong>ï¼Œä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼šç¬¬14è®²ï¼šCompletableFutureï¼ˆä¸Šï¼‰â€”â€”æ„å»ºå¼‚æ­¥åº”ç”¨ã€‚æ›´å¤šæŠ€æœ¯å¹²è´§æ¬¢è¿å…³æ³¨å¾®ä¿¡å…¬ä¼—å·<strong>ç§‘å¨èˆŸçš„AIç¬”è®°</strong>~</p>
<p><img src="https://files.mdnice.com/user/101007/40fb2530-2565-4f14-a1df-8f581b1b1d70.png" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»Futureåˆ°CompletableFutureï¼šå¼‚æ­¥ç¼–ç¨‹çš„æ¼”è¿›</h2>
<p>åœ¨Java 5ä¸­å¼•å…¥çš„<code>Future</code>æ¥å£ä¸ºå¼‚æ­¥ç¼–ç¨‹æä¾›äº†åŸºç¡€æ”¯æŒï¼Œä½†å®ƒå­˜åœ¨æ˜æ˜¾çš„å±€é™æ€§ã€‚<code>Future</code>ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥è®¡ç®—çš„ç»“æœï¼Œå…è®¸æˆ‘ä»¬æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± ï¼Œå¹¶åœ¨éœ€è¦æ—¶è·å–è®¡ç®—ç»“æœã€‚ç„¶è€Œï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œ<code>Future</code>çš„æ¨¡å¼æ˜¾å¾—ç¬¨é‡ä¸”åŠŸèƒ½æœ‰é™ã€‚</p>
<h3 data-id="heading-1">1.1 Futureçš„å±€é™æ€§</h3>
<p><strong>ä¼ ç»ŸFutureçš„ä½¿ç”¨æ¨¡å¼</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">5</span>);
Future&lt;String&gt; future = executor.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callable</span>&lt;String&gt;() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        Thread.sleep(<span class="hljs-number">2000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡ç»“æœ"</span>;
    }
});

<span class="hljs-comment">// é˜»å¡ç­‰å¾…ç»“æœ</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.get(<span class="hljs-number">5</span>, TimeUnit.SECONDS);
    System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + result);
} <span class="hljs-keyword">catch</span> (TimeoutException e) {
    System.out.println(<span class="hljs-string">"ä»»åŠ¡è¶…æ—¶"</span>);
} <span class="hljs-keyword">finally</span> {
    executor.shutdown();
}
</code></pre>
<p><strong>Futureçš„ä¸»è¦å±€é™æ€§</strong>ï¼š</p>
<ul>
<li><strong>ç»“æœè·å–é˜»å¡</strong>ï¼š<code>get()</code>æ–¹æ³•ä¼šé˜»å¡çº¿ç¨‹ç›´åˆ°ç»“æœå¯ç”¨</li>
<li><strong>æ— æ³•æ‰‹åŠ¨å®Œæˆ</strong>ï¼šä¸èƒ½ä¸»åŠ¨è®¾ç½®ä»»åŠ¡ç»“æœæˆ–å¼‚å¸¸</li>
<li><strong>ç¼ºä¹å›è°ƒæœºåˆ¶</strong>ï¼šä»»åŠ¡å®Œæˆåæ— æ³•è‡ªåŠ¨è§¦å‘åç»­æ“ä½œ</li>
<li><strong>ç»„åˆèƒ½åŠ›å¼±</strong>ï¼šéš¾ä»¥å°†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„ç»“æœç»„åˆåœ¨ä¸€èµ·</li>
<li><strong>å¼‚å¸¸å¤„ç†ä¸ä¾¿</strong>ï¼šå¼‚å¸¸è¢«åŒ…è£¹åœ¨ExecutionExceptionä¸­ï¼Œå¤„ç†ç¹ç</li>
</ul>
<h3 data-id="heading-2">1.2 CompletableFutureçš„è®¾è®¡ç†å¿µ</h3>
<p>Java 8å¼•å…¥çš„<code>CompletableFuture</code>è§£å†³äº†ä¸Šè¿°æ‰€æœ‰é—®é¢˜ï¼Œå®ƒå®ç°äº†<code>Future</code>å’Œ<code>CompletionStage</code>æ¥å£ï¼Œæä¾›äº†å¼ºå¤§çš„å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›ã€‚</p>
<p><strong>æ ¸å¿ƒè®¾è®¡ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>å¯å®Œæˆæ€§</strong>ï¼šå¯ä»¥æ‰‹åŠ¨è®¾ç½®ç»“æœæˆ–å¼‚å¸¸</li>
<li><strong>éé˜»å¡å›è°ƒ</strong>ï¼šæ”¯æŒä»»åŠ¡å®Œæˆåçš„å›è°ƒå¤„ç†</li>
<li><strong>é“¾å¼ç¼–ç¨‹</strong>ï¼šæ”¯æŒå¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„æµæ°´çº¿ç»„åˆ</li>
<li><strong>å¼‚å¸¸ä¼ æ’­</strong>ï¼šæä¾›å®Œæ•´çš„å¼‚å¸¸å¤„ç†æœºåˆ¶</li>
<li><strong>ç»„åˆæ“ä½œ</strong>ï¼šæ”¯æŒå¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„å¹¶è¡Œç»„åˆ</li>
</ul>
<h2 data-id="heading-3">äºŒã€CompletableFutureæ ¸å¿ƒåŸç†è§£æ</h2>
<h3 data-id="heading-4">2.1 æ¶æ„è®¾è®¡ï¼šè§‚å¯Ÿè€…æ¨¡å¼çš„åº”ç”¨</h3>
<p><code>CompletableFuture</code>å†…éƒ¨é‡‡ç”¨<strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>å®ç°å¼‚æ­¥å›è°ƒæœºåˆ¶ã€‚æ¯ä¸ª<code>CompletableFuture</code>ç»´æŠ¤ä¸€ä¸ªä¾èµ–åŠ¨ä½œæ ˆï¼ˆstackï¼‰ï¼Œå½“ä»»åŠ¡å®Œæˆæ—¶ï¼Œä¼šè‡ªåŠ¨é€šçŸ¥æ‰€æœ‰æ³¨å†Œçš„ä¾èµ–åŠ¨ä½œã€‚</p>
<p><strong>å†…éƒ¨å…³é”®å­—æ®µ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å­˜å‚¨å¼‚æ­¥è®¡ç®—çš„ç»“æœ</span>
<span class="hljs-keyword">volatile</span> Object result;

<span class="hljs-comment">// ä¾èµ–åŠ¨ä½œæ ˆï¼ˆè§‚å¯Ÿè€…é“¾ï¼‰</span>
<span class="hljs-keyword">volatile</span> Completion stack;
</code></pre>
<h3 data-id="heading-5">2.2 ä»»åŠ¡è§¦å‘æœºåˆ¶ï¼štryFireæ–¹æ³•</h3>
<p><code>CompletableFuture</code>é€šè¿‡<code>tryFire</code>æ–¹æ³•å®ç°å¼‚æ­¥ä»»åŠ¡é“¾çš„è§¦å‘ã€‚å½“æŸä¸ªé˜¶æ®µå®Œæˆæ—¶ï¼Œä¼šé€’å½’è°ƒç”¨åç»­é˜¶æ®µçš„<code>tryFire</code>æ–¹æ³•ï¼Œå½¢æˆå®Œæ•´çš„ä»»åŠ¡æ‰§è¡Œé“¾ã€‚</p>
<p><strong>è§¦å‘æ¨¡å¼</strong>ï¼š</p>
<ul>
<li><strong>SYNC</strong>ï¼ˆåŒæ­¥è§¦å‘ï¼‰ï¼šåœ¨å½“å‰çº¿ç¨‹ç›´æ¥æ‰§è¡Œ</li>
<li><strong>ASYNC</strong>ï¼ˆå¼‚æ­¥è§¦å‘ï¼‰ï¼šæäº¤åˆ°çº¿ç¨‹æ± å¼‚æ­¥æ‰§è¡Œ</li>
<li><strong>NESTED</strong>ï¼ˆåµŒå¥—è§¦å‘ï¼‰ï¼šé¿å…é‡å¤è§¦å‘çš„ç‰¹æ®Šæ¨¡å¼</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€åˆ›å»ºå¼‚æ­¥ä»»åŠ¡ï¼šsupplyAsyncä¸runAsync</h2>
<h3 data-id="heading-7">3.1 supplyAsyncï¼šæœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡</h3>
<p><code>supplyAsync</code>æ–¹æ³•æ¥å—ä¸€ä¸ª<code>Supplier</code>å‡½æ•°å¼æ¥å£ï¼Œè¿”å›ä¸€ä¸ª<code>CompletableFuture</code>å¯¹è±¡ï¼Œç”¨äºæ‰§è¡Œæœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SupplyAsyncExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤çº¿ç¨‹æ± ï¼ˆForkJoinPool.commonPool()ï¼‰</span>
        CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">1000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(e);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"å¼‚æ­¥ä»»åŠ¡ç»“æœ"</span>;
        });
        
        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ..."</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.get();
        System.out.println(<span class="hljs-string">"è·å–ç»“æœ: "</span> + result);
    }
}
</code></pre>
<p><strong>ä½¿ç”¨è‡ªå®šä¹‰çº¿ç¨‹æ± </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomThreadPoolExample</span> {
    <span class="hljs-comment">// åˆ›å»ºä¸“ç”¨çš„çº¿ç¨‹æ± </span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">customExecutor</span> <span class="hljs-operator">=</span> 
        Executors.newFixedThreadPool(<span class="hljs-number">5</span>);
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {
            System.out.println(<span class="hljs-string">"æ‰§è¡Œçº¿ç¨‹: "</span> + Thread.currentThread().getName());
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ä½¿ç”¨è‡ªå®šä¹‰çº¿ç¨‹æ± "</span>;
        }, customExecutor);
        
        System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + future.get());
        customExecutor.shutdown();
    }
}
</code></pre>
<h3 data-id="heading-8">3.2 runAsyncï¼šæ— è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡</h3>
<p><code>runAsync</code>æ–¹æ³•æ¥å—ä¸€ä¸ª<code>Runnable</code>å‚æ•°ï¼Œé€‚ç”¨äºä¸éœ€è¦è¿”å›å€¼çš„å¼‚æ­¥æ“ä½œã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RunAsyncExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt; {
            <span class="hljs-comment">// æ‰§è¡Œåå°ä»»åŠ¡ï¼Œå¦‚æ—¥å¿—è®°å½•ã€æ•°æ®æ¸…ç†ç­‰</span>
            System.out.println(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œåå°ä»»åŠ¡..."</span>);
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">2000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(e);
            }
            System.out.println(<span class="hljs-string">"åå°ä»»åŠ¡æ‰§è¡Œå®Œæˆ"</span>);
        });
        
        <span class="hljs-comment">// ç­‰å¾…ä»»åŠ¡å®Œæˆ</span>
        future.get();
        System.out.println(<span class="hljs-string">"ä¸»ç¨‹åºç»“æŸ"</span>);
    }
}
</code></pre>
<h3 data-id="heading-9">3.3 çº¿ç¨‹æ± é€‰æ‹©ç­–ç•¥</h3>
<p>æ ¹æ®ä»»åŠ¡ç‰¹æ€§é€‰æ‹©åˆé€‚çš„çº¿ç¨‹æ± è‡³å…³é‡è¦ï¼š</p>
<p><strong>CPUå¯†é›†å‹ä»»åŠ¡</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ForkJoinPoolï¼Œå¹¶è¡Œåº¦ç­‰äºCPUæ ¸å¿ƒæ•°</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ForkJoinPool</span> <span class="hljs-variable">cpuIntensivePool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ForkJoinPool</span>(
    Runtime.getRuntime().availableProcessors()
);

CompletableFuture.supplyAsync(() -&gt; {
    <span class="hljs-comment">// CPUå¯†é›†å‹è®¡ç®—</span>
    <span class="hljs-keyword">return</span> intensiveCalculation();
}, cpuIntensivePool);
</code></pre>
<p><strong>IOå¯†é›†å‹ä»»åŠ¡</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ThreadPoolExecutorï¼Œé…ç½®æ›´å¤šçº¿ç¨‹</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">ioIntensivePool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
    <span class="hljs-number">10</span>,  <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>
    <span class="hljs-number">20</span>,  <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°</span>
    <span class="hljs-number">60L</span>, TimeUnit.SECONDS,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">100</span>)
);

CompletableFuture.supplyAsync(() -&gt; {
    <span class="hljs-comment">// IOå¯†é›†å‹æ“ä½œï¼Œå¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢</span>
    <span class="hljs-keyword">return</span> databaseQuery();
}, ioIntensivePool);
</code></pre>
<h2 data-id="heading-10">å››ã€é“¾å¼æ“ä½œï¼šthenApplyä¸thenAccept</h2>
<h3 data-id="heading-11">4.1 thenApplyï¼šç»“æœè½¬æ¢</h3>
<p><code>thenApply</code>æ–¹æ³•ç”¨äºå¯¹å‰ä¸€ä¸ªé˜¶æ®µçš„ç»“æœè¿›è¡Œè½¬æ¢ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„<code>CompletableFuture</code>ã€‚</p>
<p><strong>åŸºç¡€è½¬æ¢ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThenApplyExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello"</span>;
        }).thenApply(result -&gt; {
            <span class="hljs-comment">// å¯¹ä¸Šæ¸¸ç»“æœè¿›è¡Œè½¬æ¢</span>
            <span class="hljs-keyword">return</span> result + <span class="hljs-string">" World"</span>;
        }).thenApply(result -&gt; {
            <span class="hljs-comment">// ç»§ç»­è½¬æ¢</span>
            <span class="hljs-keyword">return</span> result.toUpperCase();
        });
        
        System.out.println(<span class="hljs-string">"æœ€ç»ˆç»“æœ: "</span> + future.get()); <span class="hljs-comment">// è¾“å‡º: HELLO WORLD</span>
    }
}
</code></pre>
<p><strong>å®æˆ˜æ¡ˆä¾‹ï¼šæ•°æ®å¤„ç†æµæ°´çº¿</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessingPipeline</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        CompletableFuture&lt;String&gt; processingPipeline = CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µï¼šæ•°æ®è·å–</span>
            System.out.println(<span class="hljs-string">"è·å–åŸå§‹æ•°æ®..."</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"raw_data_123"</span>;
        }).thenApply(rawData -&gt; {
            <span class="hljs-comment">// ç¬¬äºŒé˜¶æ®µï¼šæ•°æ®æ¸…æ´—</span>
            System.out.println(<span class="hljs-string">"æ¸…æ´—æ•°æ®: "</span> + rawData);
            <span class="hljs-keyword">return</span> rawData.replace(<span class="hljs-string">"raw_"</span>, <span class="hljs-string">"cleaned_"</span>);
        }).thenApply(cleanedData -&gt; {
            <span class="hljs-comment">// ç¬¬ä¸‰é˜¶æ®µï¼šæ•°æ®è½¬æ¢</span>
            System.out.println(<span class="hljs-string">"è½¬æ¢æ•°æ®: "</span> + cleanedData);
            <span class="hljs-keyword">return</span> cleanedData.toUpperCase();
        }).thenApply(transformedData -&gt; {
            <span class="hljs-comment">// ç¬¬å››é˜¶æ®µï¼šæ•°æ®å­˜å‚¨å‡†å¤‡</span>
            System.out.println(<span class="hljs-string">"å‡†å¤‡å­˜å‚¨: "</span> + transformedData);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"final_"</span> + transformedData;
        });
        
        <span class="hljs-type">String</span> <span class="hljs-variable">finalResult</span> <span class="hljs-operator">=</span> processingPipeline.get();
        System.out.println(<span class="hljs-string">"å¤„ç†å®Œæˆ: "</span> + finalResult);
    }
}
</code></pre>
<h3 data-id="heading-12">4.2 thenAcceptï¼šç»“æœæ¶ˆè´¹</h3>
<p><code>thenAccept</code>æ–¹æ³•æ¥å—ä¸€ä¸ª<code>Consumer</code>å‚æ•°ï¼Œå¯¹ç»“æœè¿›è¡Œæ¶ˆè´¹ä½†ä¸è¿”å›æ–°å€¼ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThenAcceptExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        CompletableFuture&lt;Void&gt; future = CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"å¤„ç†åçš„æ•°æ®"</span>;
        }).thenAccept(result -&gt; {
            <span class="hljs-comment">// æ¶ˆè´¹ç»“æœï¼Œå¦‚æ‰“å°ã€ä¿å­˜ç­‰</span>
            System.out.println(<span class="hljs-string">"æ¶ˆè´¹ç»“æœ: "</span> + result);
        });
        
        future.get(); <span class="hljs-comment">// ç­‰å¾…æ•´ä¸ªæµæ°´çº¿å®Œæˆ</span>
    }
}
</code></pre>
<p><strong>å®æˆ˜æ¡ˆä¾‹ï¼šå¼‚æ­¥å¤„ç†ç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncResultHandler</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {
        CompletableFuture&lt;Void&gt; processingFlow = CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡æ•°æ®å¤„ç†</span>
            System.out.println(<span class="hljs-string">"å¼€å§‹ä¸šåŠ¡å¤„ç†..."</span>);
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">1000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(e);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessData</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"å¤„ç†å®Œæˆ"</span>, System.currentTimeMillis());
        }).thenAccept(businessData -&gt; {
            <span class="hljs-comment">// å¼‚æ­¥å¤„ç†ä¸šåŠ¡ç»“æœ</span>
            System.out.println(<span class="hljs-string">"æ”¶åˆ°ä¸šåŠ¡æ•°æ®: "</span> + businessData);
            <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œç»“æœä¿å­˜ã€é€šçŸ¥ç­‰æ“ä½œ</span>
            saveToDatabase(businessData);
            sendNotification(businessData);
        });
        
        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡..."</span>);
        processingFlow.get(); <span class="hljs-comment">// ç­‰å¾…å¼‚æ­¥å¤„ç†å®Œæˆ</span>
        System.out.println(<span class="hljs-string">"æ‰€æœ‰å¤„ç†å®Œæˆ"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveToDatabase</span><span class="hljs-params">(BusinessData data)</span> {
        System.out.println(<span class="hljs-string">"ä¿å­˜åˆ°æ•°æ®åº“: "</span> + data);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendNotification</span><span class="hljs-params">(BusinessData data)</span> {
        System.out.println(<span class="hljs-string">"å‘é€é€šçŸ¥: "</span> + data);
    }
    
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BusinessData</span> {
        <span class="hljs-type">int</span> id;
        String status;
        <span class="hljs-type">long</span> timestamp;
        
        BusinessData(<span class="hljs-type">int</span> id, String status, <span class="hljs-type">long</span> timestamp) {
            <span class="hljs-built_in">this</span>.id = id;
            <span class="hljs-built_in">this</span>.status = status;
            <span class="hljs-built_in">this</span>.timestamp = timestamp;
        }
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"BusinessData{id=%d, status='%s', timestamp=%d}"</span>, 
                               id, status, timestamp);
        }
    }
}
</code></pre>
<h3 data-id="heading-13">4.3 åŒæ­¥ä¸å¼‚æ­¥æ‰§è¡Œæ¨¡å¼</h3>
<p><code>thenApply</code>å’Œ<code>thenAccept</code>éƒ½æœ‰åŒæ­¥å’Œå¼‚æ­¥ç‰ˆæœ¬ï¼š</p>
<p><strong>åŒæ­¥æ‰§è¡Œ</strong>ï¼ˆé»˜è®¤ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java">CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; <span class="hljs-string">"Hello"</span>)
    .thenApply(result -&gt; {  <span class="hljs-comment">// åœ¨ä¸Šä¸€ä¸ªä»»åŠ¡çš„åŒä¸€çº¿ç¨‹æ‰§è¡Œ</span>
        <span class="hljs-keyword">return</span> result + <span class="hljs-string">" World"</span>;
    });
</code></pre>
<p><strong>å¼‚æ­¥æ‰§è¡Œ</strong>ï¼ˆthenApplyAsyncï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java">CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; <span class="hljs-string">"Hello"</span>)
    .thenApplyAsync(result -&gt; {  <span class="hljs-comment">// åœ¨é»˜è®¤çº¿ç¨‹æ± æ‰§è¡Œ</span>
        <span class="hljs-keyword">return</span> result + <span class="hljs-string">" World"</span>;
    });
</code></pre>
<p><strong>æŒ‡å®šçº¿ç¨‹æ± çš„å¼‚æ­¥æ‰§è¡Œ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Executor</span> <span class="hljs-variable">customExecutor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">3</span>);
CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; <span class="hljs-string">"Hello"</span>)
    .thenApplyAsync(result -&gt; {
        <span class="hljs-keyword">return</span> result + <span class="hljs-string">" World"</span>;
    }, customExecutor);
</code></pre>
<h2 data-id="heading-14">äº”ã€å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†ä»·æ ¼è®¡ç®—ç³»ç»Ÿ</h2>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç”µå•†ä»·æ ¼è®¡ç®—æ¡ˆä¾‹ï¼Œå±•ç¤ºCompletableFutureåœ¨å®é™…ä¸šåŠ¡ä¸­çš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-15">5.1 ä¸šåŠ¡åœºæ™¯æè¿°</h3>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦è®¡ç®—ä¸€ä¸ªå•†å“çš„æœ€ç»ˆä»·æ ¼ï¼Œè®¡ç®—è¿‡ç¨‹æ¶‰åŠï¼š</p>
<ol>
<li>è·å–å•†å“åŸºç¡€ä»·æ ¼</li>
<li>æŸ¥è¯¢ç”¨æˆ·ä¼šå‘˜ç­‰çº§æŠ˜æ‰£</li>
<li>æŸ¥è¯¢å½“å‰ä¿ƒé”€æ´»åŠ¨æŠ˜æ‰£</li>
<li>è®¡ç®—è¿è´¹</li>
<li>æ±‡æ€»æœ€ç»ˆä»·æ ¼</li>
</ol>
<h3 data-id="heading-16">5.2 ä¼ ç»ŸåŒæ­¥å®ç° vs CompletableFutureå¼‚æ­¥å®ç°</h3>
<p><strong>ä¼ ç»ŸåŒæ­¥å®ç°</strong>ï¼ˆæ€§èƒ½è¾ƒå·®ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SyncPriceCalculator</span> {
    <span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title function_">calculatePrice</span><span class="hljs-params">(Long productId, Long userId)</span> {
        <span class="hljs-comment">// 1. è·å–å•†å“åŸºç¡€ä»·æ ¼ï¼ˆè€—æ—¶100msï¼‰</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">basePrice</span> <span class="hljs-operator">=</span> productService.getBasePrice(productId);
        
        <span class="hljs-comment">// 2. æŸ¥è¯¢ç”¨æˆ·æŠ˜æ‰£ï¼ˆè€—æ—¶150msï¼‰</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">userDiscount</span> <span class="hljs-operator">=</span> userService.getUserDiscount(userId);
        
        <span class="hljs-comment">// 3. æŸ¥è¯¢ä¿ƒé”€æŠ˜æ‰£ï¼ˆè€—æ—¶200msï¼‰</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">promotionDiscount</span> <span class="hljs-operator">=</span> promotionService.getCurrentDiscount(productId);
        
        <span class="hljs-comment">// 4. è®¡ç®—è¿è´¹ï¼ˆè€—æ—¶100msï¼‰</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">shippingFee</span> <span class="hljs-operator">=</span> shippingService.calculateFee(productId, userId);
        
        <span class="hljs-comment">// 5. è®¡ç®—æœ€ç»ˆä»·æ ¼</span>
        <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">finalPrice</span> <span class="hljs-operator">=</span> basePrice
            .multiply(userDiscount)
            .multiply(promotionDiscount)
            .add(shippingFee);
            
        <span class="hljs-keyword">return</span> finalPrice;
    }
}
<span class="hljs-comment">// æ€»è€—æ—¶ï¼š100 + 150 + 200 + 100 = 550ms</span>
</code></pre>
<p><strong>CompletableFutureå¼‚æ­¥å®ç°</strong>ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncPriceCalculator</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">4</span>);
    
    <span class="hljs-keyword">public</span> CompletableFuture&lt;BigDecimal&gt; <span class="hljs-title function_">calculatePrice</span><span class="hljs-params">(Long productId, Long userId)</span> {
        <span class="hljs-comment">// å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰æŸ¥è¯¢ä»»åŠ¡</span>
        CompletableFuture&lt;BigDecimal&gt; basePriceFuture = 
            CompletableFuture.supplyAsync(() -&gt; 
                productService.getBasePrice(productId), executor);
                
        CompletableFuture&lt;BigDecimal&gt; userDiscountFuture = 
            CompletableFuture.supplyAsync(() -&gt; 
                userService.getUserDiscount(userId), executor);
                
        CompletableFuture&lt;BigDecimal&gt; promotionDiscountFuture = 
            CompletableFuture.supplyAsync(() -&gt; 
                promotionService.getCurrentDiscount(productId), executor);
                
        CompletableFuture&lt;BigDecimal&gt; shippingFeeFuture = 
            CompletableFuture.supplyAsync(() -&gt; 
                shippingService.calculateFee(productId, userId), executor);
        
        <span class="hljs-comment">// ç»„åˆæ‰€æœ‰ç»“æœ</span>
        <span class="hljs-keyword">return</span> basePriceFuture
            .thenCombine(userDiscountFuture, BigDecimal::multiply)
            .thenCombine(promotionDiscountFuture, BigDecimal::multiply)
            .thenCombine(shippingFeeFuture, BigDecimal::add)
            .exceptionally(ex -&gt; {
                System.err.println(<span class="hljs-string">"ä»·æ ¼è®¡ç®—å¤±è´¥: "</span> + ex.getMessage());
                <span class="hljs-keyword">return</span> BigDecimal.ZERO; <span class="hljs-comment">// è¿”å›é»˜è®¤å€¼</span>
            });
    }
}
<span class="hljs-comment">// æ€»è€—æ—¶ï¼šæœ€æ…¢çš„ä»»åŠ¡æ—¶é—´ â‰ˆ 200ms</span>
</code></pre>
<h3 data-id="heading-17">5.3 å®Œæ•´çš„ç”µå•†ä»·æ ¼æœåŠ¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ECommercePriceService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ExecutorService priceCalculatorExecutor;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ProductService productService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserService userService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PromotionService promotionService;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ShippingService shippingService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ECommercePriceService</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.priceCalculatorExecutor = Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
        <span class="hljs-comment">// åˆå§‹åŒ–å„æœåŠ¡...</span>
    }
    
    <span class="hljs-keyword">public</span> CompletableFuture&lt;PriceResult&gt; <span class="hljs-title function_">calculateDetailedPrice</span><span class="hljs-params">(Long productId, Long userId)</span> {
        <span class="hljs-comment">// å¹¶è¡Œè·å–æ‰€æœ‰å¿…è¦ä¿¡æ¯</span>
        CompletableFuture&lt;BigDecimal&gt; basePriceFuture = getBasePrice(productId);
        CompletableFuture&lt;BigDecimal&gt; userDiscountFuture = getUserDiscount(userId);
        CompletableFuture&lt;BigDecimal&gt; promotionDiscountFuture = getPromotionDiscount(productId);
        CompletableFuture&lt;BigDecimal&gt; shippingFeeFuture = getShippingFee(productId, userId);
        
        <span class="hljs-comment">// ç»„åˆè®¡ç®—ç»“æœ</span>
        <span class="hljs-keyword">return</span> basePriceFuture
            .thenCombine(userDiscountFuture, (price, discount) -&gt; {
                <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">discountedPrice</span> <span class="hljs-operator">=</span> price.multiply(discount);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriceStepResult</span>(price, discountedPrice, <span class="hljs-string">"ç”¨æˆ·æŠ˜æ‰£åº”ç”¨"</span>);
            })
            .thenCombine(promotionDiscountFuture, (stepResult, promotionDiscount) -&gt; {
                <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">newPrice</span> <span class="hljs-operator">=</span> stepResult.getCurrentPrice().multiply(promotionDiscount);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriceStepResult</span>(stepResult.getBasePrice(), newPrice, <span class="hljs-string">"ä¿ƒé”€æŠ˜æ‰£åº”ç”¨"</span>);
            })
            .thenCombine(shippingFeeFuture, (stepResult, shippingFee) -&gt; {
                <span class="hljs-type">BigDecimal</span> <span class="hljs-variable">finalPrice</span> <span class="hljs-operator">=</span> stepResult.getCurrentPrice().add(shippingFee);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriceResult</span>(
                    stepResult.getBasePrice(),
                    finalPrice,
                    shippingFee,
                    <span class="hljs-string">"ä»·æ ¼è®¡ç®—å®Œæˆ"</span>
                );
            })
            .exceptionally(ex -&gt; {
                <span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriceResult</span>(
                    BigDecimal.ZERO, BigDecimal.ZERO, BigDecimal.ZERO,
                    <span class="hljs-string">"è®¡ç®—å¤±è´¥: "</span> + ex.getMessage()
                );
            });
    }
    
    <span class="hljs-keyword">private</span> CompletableFuture&lt;BigDecimal&gt; <span class="hljs-title function_">getBasePrice</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            System.out.println(<span class="hljs-string">"æŸ¥è¯¢å•†å“åŸºç¡€ä»·æ ¼: "</span> + productId);
            <span class="hljs-keyword">return</span> productService.getBasePrice(productId);
        }, priceCalculatorExecutor);
    }
    
    <span class="hljs-keyword">private</span> CompletableFuture&lt;BigDecimal&gt; <span class="hljs-title function_">getUserDiscount</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            System.out.println(<span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·æŠ˜æ‰£: "</span> + userId);
            <span class="hljs-keyword">return</span> userService.getUserDiscount(userId);
        }, priceCalculatorExecutor);
    }
    
    <span class="hljs-comment">// å…¶ä»–æœåŠ¡æ–¹æ³•ç±»ä¼¼...</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdown</span><span class="hljs-params">()</span> {
        priceCalculatorExecutor.shutdown();
    }
}
</code></pre>
<h2 data-id="heading-18">å…­ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-19">6.1 çº¿ç¨‹æ± ç®¡ç†ç­–ç•¥</h3>
<p><strong>é¿å…ä½¿ç”¨é»˜è®¤çº¿ç¨‹æ± </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸æ¨èï¼šä½¿ç”¨é»˜è®¤commonPoolï¼ˆå¯èƒ½é€ æˆçº¿ç¨‹é¥¥é¥¿ï¼‰</span>
CompletableFuture.supplyAsync(() -&gt; heavyTask());

<span class="hljs-comment">// æ¨èï¼šä½¿ç”¨è‡ªå®šä¹‰çº¿ç¨‹æ± </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">customExecutor</span> <span class="hljs-operator">=</span> 
    Executors.newFixedThreadPool(<span class="hljs-number">10</span>);

CompletableFuture.supplyAsync(() -&gt; heavyTask(), customExecutor);
</code></pre>
<p><strong>çº¿ç¨‹æ± é…ç½®å»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>CPUå¯†é›†å‹</strong>ï¼šçº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•°</li>
<li><strong>IOå¯†é›†å‹</strong>ï¼šçº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° Ã— 2 ~ 4</li>
<li><strong>ä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—</strong>é˜²æ­¢å†…å­˜æº¢å‡º</li>
<li><strong>è®¾ç½®åˆç†çš„æ‹’ç»ç­–ç•¥</strong></li>
</ul>
<h3 data-id="heading-20">6.2 å¼‚å¸¸å¤„ç†åŸºç¡€</h3>
<pre><code class="hljs language-java" lang="java">CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {
    <span class="hljs-keyword">if</span> (Math.random() &gt; <span class="hljs-number">0.5</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ¨¡æ‹Ÿå¼‚å¸¸"</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">"æˆåŠŸç»“æœ"</span>;
}).exceptionally(ex -&gt; {
    <span class="hljs-comment">// å¼‚å¸¸å¤„ç†ï¼Œè¿”å›é»˜è®¤å€¼</span>
    System.err.println(<span class="hljs-string">"å¤„ç†å¼‚å¸¸: "</span> + ex.getMessage());
    <span class="hljs-keyword">return</span> <span class="hljs-string">"é»˜è®¤ç»“æœ"</span>;
});
</code></pre>
<h3 data-id="heading-21">6.3 èµ„æºæ¸…ç†ä¸è¶…æ—¶æ§åˆ¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceAwareFuture</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
        
        <span class="hljs-keyword">try</span> {
            CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; {
                <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡</span>
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">5000</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                    <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡è¢«ä¸­æ–­"</span>;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡å®Œæˆ"</span>;
            }, executor);
            
            <span class="hljs-comment">// è®¾ç½®è¶…æ—¶</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.get(<span class="hljs-number">2</span>, TimeUnit.SECONDS);
            System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + result);
            
        } <span class="hljs-keyword">catch</span> (TimeoutException e) {
            System.out.println(<span class="hljs-string">"ä»»åŠ¡è¶…æ—¶"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.out.println(<span class="hljs-string">"å…¶ä»–å¼‚å¸¸: "</span> + e.getMessage());
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é‡è¦ï¼šåŠæ—¶å…³é—­çº¿ç¨‹æ± </span>
            executor.shutdown();
        }
    }
}
</code></pre>
<h2 data-id="heading-22">æ€»ç»“</h2>
<p>é€šè¿‡æœ¬è®²çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æŒæ¡äº†<code>CompletableFuture</code>çš„åŸºç¡€ç”¨æ³•å’Œæ ¸å¿ƒæ¦‚å¿µã€‚å…³é”®è¦ç‚¹æ€»ç»“ï¼š</p>
<ol>
<li><strong>ä»Futureåˆ°CompletableFuture</strong>ï¼šè§£å†³äº†ä¼ ç»ŸFutureçš„å±€é™æ€§ï¼Œæä¾›äº†æ›´å¼ºå¤§çš„å¼‚æ­¥ç¼–ç¨‹èƒ½åŠ›</li>
<li><strong>ä»»åŠ¡åˆ›å»º</strong>ï¼šä½¿ç”¨<code>supplyAsync</code>å’Œ<code>runAsync</code>åˆ›å»ºå¼‚æ­¥ä»»åŠ¡ï¼Œæ³¨æ„çº¿ç¨‹æ± é€‰æ‹©</li>
<li><strong>é“¾å¼æ“ä½œ</strong>ï¼š<code>thenApply</code>ç”¨äºç»“æœè½¬æ¢ï¼Œ<code>thenAccept</code>ç”¨äºç»“æœæ¶ˆè´¹</li>
<li><strong>å®æˆ˜åº”ç”¨</strong>ï¼šé€šè¿‡ç”µå•†ä»·æ ¼è®¡ç®—æ¡ˆä¾‹å±•ç¤ºäº†å¼‚æ­¥ç¼–ç¨‹çš„æ€§èƒ½ä¼˜åŠ¿</li>
<li><strong>æœ€ä½³å®è·µ</strong>ï¼šåˆç†ç®¡ç†çº¿ç¨‹æ± ï¼Œåšå¥½å¼‚å¸¸å¤„ç†å’Œèµ„æºæ¸…ç†</li>
</ol>
<p><code>CompletableFuture</code>å°†å›è°ƒæ¨¡å¼è½¬å˜ä¸ºå£°æ˜å¼ç»„åˆï¼Œè®©å¼‚æ­¥ç¼–ç¨‹å˜å¾—æ›´åŠ ç›´è§‚å’Œä¼˜é›…ã€‚åœ¨ä¸‹ä¸€è®²ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨æ›´é«˜çº§çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬ä»»åŠ¡ç»„åˆã€å¼‚å¸¸å¤„ç†ã€è¶…æ—¶æ§åˆ¶ç­‰é«˜çº§ç”¨æ³•ã€‚</p>
<p><strong>æ€è€ƒä¸å®è·µ</strong>ï¼šåœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œå“ªäº›è€—æ—¶æ“ä½œå¯ä»¥ç”¨<code>CompletableFuture</code>è¿›è¡Œä¼˜åŒ–ï¼Ÿå°è¯•ç”¨æœ¬è®²çŸ¥è¯†é‡æ„ä¸€ä¸ªåŒæ­¥ä¸šåŠ¡é€»è¾‘ï¼Œä½“éªŒæ€§èƒ½æå‡çš„æ•ˆæœï¼</p>
<p>ã€è½¬è½½é¡»çŸ¥ã€‘ï¼š<strong>è½¬è½½è¯·æ³¨æ˜åŸæ–‡å‡ºå¤„åŠä½œè€…ä¿¡æ¯</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è™¾åˆ†å‘å¹³å°æä¾›å¤šç§ä»·æ ¼å¥—é¤]]></title>    <link>https://juejin.cn/post/7575065042157682738</link>    <guid>https://juejin.cn/post/7575065042157682738</guid>    <pubDate>2025-11-22T03:44:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575065042157682738" data-draft-id="7575017581037256742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è™¾åˆ†å‘å¹³å°æä¾›å¤šç§ä»·æ ¼å¥—é¤"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-22T03:44:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘çš„è™¾åˆ†å‘"/> <meta itemprop="url" content="https://juejin.cn/user/4141193601750448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è™¾åˆ†å‘å¹³å°æä¾›å¤šç§ä»·æ ¼å¥—é¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4141193601750448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘çš„è™¾åˆ†å‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T03:44:30.000Z" title="Sat Nov 22 2025 03:44:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ol>
<li>
<p>æ“ä½œç®€ä¾¿ï¼š</p>
<ul>
<li>å¹³å°ç•Œé¢ç®€æ´æ˜“ç”¨ï¼Œæ“ä½œæµç¨‹é¡ºç•…ï¼Œå³ä½¿æ˜¯åˆæ¬¡ä½¿ç”¨çš„å¼€å‘è€…ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ã€‚</li>
<li>è™¾åˆ†å‘ xiafenfaæä¾›åœ¨çº¿è‡ªåŠ©åˆ¶ä½œåŠŸèƒ½ï¼Œæ”¯æŒ24å°æ—¶åœ¨çº¿åˆ¶ä½œAPPï¼Œä¸ºå¼€å‘è€…æä¾›äº†æå¤§çš„ä¾¿åˆ©ã€‚</li>
</ul>
</li>
<li>
<p>æ€§ä»·æ¯”é«˜ï¼š</p>
<ul>
<li>æä¾›å¤šç§ä»·æ ¼å¥—é¤ï¼Œæ”¯æŒæŒ‰éœ€è´­ä¹°ï¼Œé¿å…èµ„æºæµªè´¹ã€‚ä¾‹å¦‚ï¼ŒåŸºç¡€å¥—é¤ï¼ˆ30å…ƒ/1000è™¾å¸ï¼‰å³å¯æ»¡è¶³å°èŒƒå›´æµ‹è¯•éœ€æ±‚ã€‚</li>
<li>æ–°ç”¨æˆ·ç™»å½•å³èµ è™¾å¸ï¼Œå¯ç”¨äºä¸‹è½½æµé‡æŠµæ‰£ï¼Œé™ä½æ—©æœŸå†…æµ‹æˆæœ¬ã€‚</li>
</ul>
</li>
<li>
<p>å®‰å…¨æ€§é«˜ï¼š</p>
<ul>
<li>éƒ¨ç½²äº†DDoSé˜²æŠ¤ç³»ç»Ÿï¼Œå¯æŠµå¾¡æ¯ç§’æ•°ç™¾Gçš„æ”»å‡»æµé‡ï¼ŒåŒæ—¶é€šè¿‡Webåº”ç”¨é˜²ç«å¢™ï¼ˆWAFï¼‰æ‹¦æˆªSQLæ³¨å…¥ã€XSSç­‰å¸¸è§æ”»å‡»ï¼Œç¡®ä¿åˆ†å‘ç¯å¢ƒå®‰å…¨ã€‚</li>
<li>å¯¹ç®¡ç†åå°å’ŒAPIæ¥å£å®æ–½é¢‘ç‡é™åˆ¶å’Œè¡Œä¸ºåˆ†æï¼Œé˜²æ­¢æ¶æ„åˆ·é‡æˆ–æ•°æ®çªƒå–ã€‚</li>
<li>äº‘ç›˜æ•°æ®å¯é æ€§è¾¾99.99%ï¼Œæ”¯æŒè‡ªåŠ¨å®•æœºè¿ç§»å’Œå¤šçº¿è·¯å¤‡ä»½ï¼Œå³ä½¿é­é‡ç¡¬ä»¶æ•…éšœä¹Ÿèƒ½åœ¨åˆ†é’Ÿçº§æ¢å¤æœåŠ¡ï¼Œé¿å…æ•°æ®ä¸¢å¤±å½±å“æµ‹è¯•è¿›åº¦ã€‚</li>
</ul>
</li>
<li>
<p>æœåŠ¡å…¨é¢ï¼š</p>
<ul>
<li>æä¾›ä»åº”ç”¨ä¸Šä¼ ã€å®¡æ ¸ã€æµ‹è¯•ã€åˆ†å‘åˆ°ä¸‹è½½çš„ä¸€ç«™å¼æœåŠ¡ï¼Œæ»¡è¶³å¼€å‘è€…å…¨æµç¨‹éœ€æ±‚ã€‚</li>
<li>æä¾›ä¸°å¯Œçš„æ’ä»¶åº“å’ŒåŠŸèƒ½ç»„ä»¶ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªç”±æ­é…ï¼Œæå‡åº”ç”¨çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
</li>
<li>
<p>ç”¨æˆ·å£ç¢‘å¥½ï¼š</p>
<ul>
<li>ç´¯è®¡æœåŠ¡å…¨çƒå¼€å‘è€…è¶…84000å®¶ï¼Œå†…æµ‹åˆ†å‘APPè¶…79ä¸‡æ¬¡ï¼Œå†…æµ‹ä¸‹è½½é‡çªç ´78ä¸‡æ¬¡ï¼Œæ•°æ®è¡¨ç°é¢†å…ˆè¡Œä¸šã€‚</li>
<li>ç”¨æˆ·è¯„ä»·æ˜¾ç¤ºï¼Œè™¾åˆ†å‘å¹³å°ä¸Šä¼ é€Ÿåº¦å¿«ã€ä¸‹è½½ç¨³å®šã€å®¢æœå“åº”åŠæ—¶ï¼Œæ˜¯å›¢é˜Ÿå†…æµ‹çš„é¦–é€‰å¹³å°ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è½¬è½¬UIè‡ªåŠ¨åŒ–èµ°æŸ¥æ–¹æ¡ˆæ¢ç´¢]]></title>    <link>https://juejin.cn/post/7574739133945675818</link>    <guid>https://juejin.cn/post/7574739133945675818</guid>    <pubDate>2025-11-21T02:34:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574739133945675818" data-draft-id="7574734686493278244" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è½¬è½¬UIè‡ªåŠ¨åŒ–èµ°æŸ¥æ–¹æ¡ˆæ¢ç´¢"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-21T02:34:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è½¬è½¬UIè‡ªåŠ¨åŒ–èµ°æŸ¥æ–¹æ¡ˆæ¢ç´¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T02:34:49.000Z" title="Fri Nov 21 2025 02:34:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">è½¬è½¬UIè‡ªåŠ¨åŒ–èµ°æŸ¥æ–¹æ¡ˆæ¢ç´¢</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>UIèµ°æŸ¥æ˜¯ç°åœ¨è½¬è½¬Cç«¯éœ€æ±‚å¼€å‘æµç¨‹ä¸­ç›¸å½“é‡è¦çš„ä¸€ç¯ï¼Œç„¶è€ŒUIèµ°æŸ¥è¿™ä¸€ç¯èŠ‚éš¾ä»¥æ¥å…¥è‡ªåŠ¨åŒ–æµç¨‹ä¸­ï¼Œå¯¼è‡´å…¶æ²¡æœ‰å¦‚åŒæµ‹è¯•ç¯èŠ‚ä¸€æ ·çš„å†’çƒŸç¯èŠ‚ï¼ˆåˆç§°æµ‹è¯•å‡†å…¥ï¼‰ï¼Œå› æ­¤å®é™…èµ°æŸ¥é˜¶æ®µæ—¶ï¼Œå‰ç«¯çš„UIäº¤ä»˜è´¨é‡éš¾ä»¥åœ¨æµç¨‹ä¸Šåšç¡¬æ€§ç®¡æ§ï¼ŒUIè¿˜åŸåº¦å‚å·®ä¸é½ï¼Œè¿™ä¹Ÿå°±è¿›ä¸€æ­¥å¯¼è‡´äº†UIèµ°æŸ¥æ•ˆç‡éš¾ä»¥æŠŠæ§ã€‚ç»UIä¾§åŒå­¦çš„ä¸å®Œå…¨ç»Ÿè®¡ï¼Œ2025å¹´5-8æœˆæœŸé—´ï¼Œå…±èµ°æŸ¥éœ€æ±‚20ä¸ªï¼Œæ€»è€—æ—¶33hï¼Œå¹³å‡å•ä¸ªéœ€æ±‚è€—æ—¶1.6hï¼Œåœ¨éœ€æ±‚è§„æ¨¡è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œèµ°æŸ¥è€—æ—¶æœ€é«˜æ—¶å¯è¾¾3-4å°æ—¶ï¼Œèµ°æŸ¥è½®æ¬¡3æ¬¡ï¼Œå¼‚å¸¸æ•°é‡30-50ä¸ªä¸ç­‰ï¼Œè€Œèµ°æŸ¥æœ¬èº«è€—æ—¶å¹¶ä¸é«˜ï¼Œè€Œå¤§éƒ¨åˆ†çš„æ—¶é—´éƒ½è€—è´¹åœ¨å¯¹UIå¼‚å¸¸é—®é¢˜çš„æ ‡æ³¨ä¸Šã€‚å› æ­¤ï¼Œå¼€å‘ä¸€ç§è‡ªåŠ¨åŒ–æ¯”å¯¹UIè®¾è®¡ç¨¿ä¸HTMLç»“æ„ï¼Œè‡ªåŠ¨åŒ–æ ‡æ³¨æ¯”å¯¹ç»“æœçš„å·¥å…·ï¼Œèƒ½åœ¨æ ¹æœ¬ä¸Šæå‡UIè¿˜åŸåº¦ï¼Œæå‡UIèµ°æŸ¥æ•ˆç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c7038c756c46b49701c9dd507276dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=giECpVZqMcXhNZXBYaDyiZ6q7dE%3D" alt="èµ°æŸ¥è€—æ—¶ç»Ÿè®¡" loading="lazy"/></p>
<h3 data-id="heading-2">æ–¹æ¡ˆçš„è°ƒç ”ä¸é€‰æ‹©</h3>
<h4 data-id="heading-3">å å›¾æ¯”å¯¹æ–¹æ¡ˆ</h4>
<p>ç›®å‰ç°å­˜çš„å¤§å¤šæ•°UIèµ°æŸ¥æ–¹æ¡ˆèµ°çš„éƒ½æ˜¯æ¯”å¯¹UIè®¾è®¡ç¨¿ä¸å‰ç«¯é¡µé¢æˆªå›¾çš„æ–¹æ¡ˆï¼Œæ­¤æ–¹æ¡ˆè™½é€šç”¨æ€§é«˜ï¼Œä½†æ˜¯ç»“æœéš¾ä»¥é‡åŒ–ï¼Œéš¾ä»¥ä¸æ ‡å‡†åŒ–ç ”å‘æµç¨‹ç»“åˆï¼Œåœ¨å‰è¨€ä¸­æˆ‘ä»¬ä¹Ÿè¯´æ˜äº†ï¼Œèµ°æŸ¥çš„è€—æ—¶æˆæœ¬åœ¨ä¸<strong>å¼‚å¸¸æ•°æ®çš„æ ‡æ³¨</strong>ï¼Œè€Œéè·å–æ¯”å¯¹ç»“æœã€‚å› æ­¤è¿™ç§æ–¹æ¡ˆæ˜¾ç„¶æ— æ³•è¾¾æˆç›®çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8085f307b3f24c6dabadac76cf8020b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=JNzzVIOcb4c4zgUV%2FErkmH3sUw4%3D" alt="prefect pixelå®ç°æ•ˆæœ" loading="lazy"/></p>
<h4 data-id="heading-4">åƒç´ æ¯”å¯¹æ–¹æ¡ˆ</h4>
<p>åƒç´ çº§çš„æ¯”å¯¹æ–¹æ¡ˆä¸å å›¾æ¯”å¯¹æ–¹æ¡ˆçš„åŸç†ç›¸ä¼¼ï¼Œåœ¨å®ç°ä¸Šï¼Œå å›¾æ–¹æ¡ˆéœ€è¦å¼€å‘è€…ä¸»åŠ¨åˆ¤æ–­ç»“æœï¼Œè€Œåƒç´ æ¯”å¯¹æ–¹æ¡ˆåˆ™æ˜¯é€šè¿‡ç±»ä¼¼äº<code>opencv</code>ä¹‹ç±»çš„å›¾åƒå¤„ç†å·¥å…·é…åˆç±»ä¼¼äº<code>scikit-image</code>ä¹‹ç±»çš„ç»“æ„ç›¸ä¼¼åº¦ç®—æ³•è¿›è¡Œå®ç°ã€‚è¿™ç§æ–¹æ¡ˆè™½ç„¶èƒ½æ‹¿åˆ°é‡åŒ–çš„æ¯”å¯¹æ•°æ®ï¼Œä»¥åŠè‡ªåŠ¨åŒ–æ ‡æ³¨ï¼Œä½†æ˜¯åœ¨åŒæ–¹å›¾ç‰‡çš„ç›¸ä¼¼åº¦ä¸Šè¦æ±‚è¾ƒé«˜ï¼Œè®¾è®¡ç¨¿ä¸UIåœ¨æ–‡æ¡ˆä¸Šæœ‰ä¸€å®šçš„åŒºåˆ«éƒ½èƒ½é€ æˆæ¯”å¯¹çš„è¯¯å·®ï¼Œä¸”è¯¯å·®ä¸å¯æ§ã€‚å¦‚æœè¿›ä¸€æ­¥çš„è€ƒè™‘é€šè¿‡å¾®è°ƒã€è‡ªè®­ç»ƒaiæ¨¡å‹çš„æ–¹æ¡ˆï¼Œåˆ™è®­ç»ƒã€æ ‡æ³¨çš„æˆæœ¬ä¹Ÿç›¸å½“é«˜ã€‚å› æ­¤æ”¹æ–¹æ¡ˆä¹Ÿå¹¶éæœ€ä½³çš„é€‰æ‹©ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9339f48c9c941cd94698fa8087c01c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=GV1ry9dbfV%2BHmeokgA9lSYjc%2BmI%3D" alt="åƒç´ çº§æ¯”å¯¹æ–¹æ¡ˆç»“æœ" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19421e681b4b494f81cfe4d340430ed0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=LlbXhRWYRC10PzF47L8Utj4YVCM%3D" alt="åƒç´ çº§æ¯”å¯¹æ–¹æ¡ˆç»“æœ" loading="lazy"/></p>
<h4 data-id="heading-5">åŸºäºå‰ç«¯ä¸UIèŠ‚ç‚¹çš„æ¯”å¯¹æ–¹æ¡ˆ</h4>
<p>åœ¨ç°åœ¨æµè¡Œçš„ä¸€äº›å‰ç«¯åŒ–UIè®¾è®¡å·¥å…·ï¼ˆä¾‹å¦‚Figmaã€Master Goï¼‰ä¸­ï¼ŒUIè®¾è®¡ç¨¿åœ¨åº•å±‚å…¶å®æ˜¯ä¸€ä¸ªå¤§å‹çš„å¸¦æœ‰åµŒå¥—å…³ç³»çš„JSONæ•°æ®ç»“æ„ï¼Œè€Œå‰ç«¯çš„Domæ ‘ä¹Ÿæ˜¯ä¸€ä¸ªå¸¦æœ‰åµŒå¥—å…³ç³»çš„æ•°æ®ç»“æ„ã€‚åŸºäºè¿™ä¸¤ç‚¹ï¼Œå¾ˆå®¹æ˜“å°±æƒ³åˆ°å¦‚æœèƒ½å°†åŒæ–¹çš„èŠ‚ç‚¹æ•°æ®å½’ä¸€åŒ–å¤„ç†æˆç›¸åŒçš„æ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆåœ¨èŠ‚ç‚¹é—´é—´è·çš„ç²¾ç¡®åŒ¹é…ä¸æ¯”å¯¹ä¸Šï¼Œæˆ–è®¸ä¼šæœ‰ä¸é”™çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-6">æ•°æ®ç»“æ„è®¾è®¡</h3>
<p>æ—¢ç„¶è¦å½’ä¸€åŒ–å¤„ç†æ•°æ®ï¼Œé‚£ä¹ˆé¦–å…ˆéœ€è¦è€ƒè™‘çš„å°±æ˜¯è¿™ä¸ªæ•°æ®ç»“æ„éœ€è¦ä»€ä¹ˆã€‚</p>
<p>åœ¨ä¸Šæ–‡æåˆ°çš„UIèµ°æŸ¥æƒ…å†µç»Ÿè®¡æ•°æ®ä¸­ï¼ŒUIèµ°æŸ¥å‡ºç°çš„é—®é¢˜ä¸­ï¼Œé—´è·é—®é¢˜å æ¯”çº¦<strong>95%</strong>ï¼Œå­—ä½“ç›¸å…³é—®é¢˜çº¦å <strong>3%</strong>ï¼Œå…¶ä½™è¯¸å¦‚èƒŒæ™¯è‰²ã€è¾¹æ¡†ç­‰é—®é¢˜å æ¯”å…±2%ï¼Œå› æ­¤åœ¨æ–¹æ¡ˆå‰æœŸï¼Œé¦–è¦éœ€è¦è§£å†³çš„é—®é¢˜å°±æ˜¯é—´è·é—®é¢˜ã€‚</p>
<p>è¦æ£€æµ‹å‡ºé—´è·é—®é¢˜ï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„ç›¸é‚»èŠ‚ç‚¹ï¼Œäºæ˜¯æˆ‘ä»¬å¯¹ç›¸é‚»èŠ‚ç‚¹åšå‡ºå¦‚ä¸‹å®šä¹‰ã€‚</p>
<ol>
<li>
<p>å®šä¹‰å½“å‰èŠ‚ç‚¹Aä¸å¦ä¸€ä¸ªèŠ‚ç‚¹Bä¹‹é—´æ€»å…±æœ‰9ç§ç¯ç»•å…³ç³»ï¼ŒæŒ‰ä»å·¦åˆ°å³ä»ä¸Šåˆ°ä¸‹ç¼–å·åˆ†åˆ«å³ä¸º1-9å·ä½ç½®ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/280faf73cbcf4331806889ae891fa6a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=u5TgvlVwpeKwE79K5CwbAc2V6BU%3D" alt="èŠ‚ç‚¹å‘¨è¾¹çš„8ä¸ªä½ç½®" loading="lazy"/></p>
</li>
<li>
<p>2ã€4ã€6ã€8å·ä½ç½®ä¸­ï¼Œä¸å½“å‰èŠ‚ç‚¹çš„è·ç¦»æœ€å°çš„èŠ‚ç‚¹ï¼Œå³ä¸ºå½“å‰èŠ‚ç‚¹çš„å››ä¸ªæ–¹ä½çš„ç›¸é‚»èŠ‚ç‚¹</p>
</li>
<li>
<p>æ‰€è°“ä¸Šä¸‹å·¦å³çš„é—´è·ï¼Œå³ä¸ºå½“å‰èŠ‚ç‚¹ä¸å„æ–¹ä½ä¸Šçš„ç›¸é‚»èŠ‚ç‚¹çš„é—´è·ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/** ç›¸å¯¹äºå½“å‰èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ä½ç½®æšä¸¾ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">SiblingPosition</span> {
  <span class="hljs-comment">/** ä¸åœ¨ä»»ä½•ä½ç½® */</span>
  <span class="hljs-variable constant_">NONE</span> = <span class="hljs-number">0</span>,
  <span class="hljs-comment">/** å·¦ä¸Šè§’ */</span>
  <span class="hljs-variable constant_">TOP_LEFT</span> = <span class="hljs-number">1</span>,
  <span class="hljs-comment">/** æ­£ä¸Šæ–¹ */</span>
  <span class="hljs-variable constant_">TOP</span> = <span class="hljs-number">2</span>,
  <span class="hljs-comment">/** å³ä¸Šè§’ */</span>
  <span class="hljs-variable constant_">TOP_RIGHT</span> = <span class="hljs-number">3</span>,
  <span class="hljs-comment">/** å·¦ä¾§ */</span>
  <span class="hljs-variable constant_">LEFT</span> = <span class="hljs-number">4</span>,
  <span class="hljs-comment">/** å³ä¾§ */</span>
  <span class="hljs-variable constant_">RIGHT</span> = <span class="hljs-number">6</span>,
  <span class="hljs-comment">/** å·¦ä¸‹è§’ */</span>
  <span class="hljs-variable constant_">BOTTOM_LEFT</span> = <span class="hljs-number">7</span>,
  <span class="hljs-comment">/** æ­£ä¸‹æ–¹ */</span>
  <span class="hljs-variable constant_">BOTTOM</span> = <span class="hljs-number">8</span>,
  <span class="hljs-comment">/** å³ä¸‹è§’ */</span>
  <span class="hljs-variable constant_">BOTTOM_RIGHT</span> = <span class="hljs-number">9</span>,
}
<span class="hljs-comment">/** èŠ‚ç‚¹çš„å”¯ä¸€IDæ ‡è¯†ç¬¦ */</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">UniqueId</span> = <span class="hljs-built_in">string</span>
<span class="hljs-comment">/** åªè®°å½•2 4 6 8 å››ä¸ªæ–¹å‘çš„å…„å¼ŸèŠ‚ç‚¹ä¿¡æ¯ */</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">SiblingRelativeNodeInfo</span> = <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">SiblingPosition</span>, <span class="hljs-title class_">UniqueId</span>&gt;&gt;
</code></pre>
</li>
</ol>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¯¥èŠ‚ç‚¹çš„<code>boundingRect</code>ã€<code>padding</code>ã€<code>margin</code>ã€<code>border</code>ã€<code>font</code>ç›¸å…³çš„ä¿¡æ¯ï¼Œæœ€ç»ˆè®¾è®¡äº†å¦‚ä¸‹çš„æ•°æ®ç»“æ„</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/** èŠ‚ç‚¹ä¿¡æ¯ */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">NodeInfo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SiblingRelativeNodeInfo</span> {
  <span class="hljs-comment">/** çˆ¶èŠ‚ç‚¹ id */</span>
  <span class="hljs-attr">parentId</span>: <span class="hljs-title class_">UniqueId</span>
  <span class="hljs-comment">/** å­èŠ‚ç‚¹ id */</span>
  <span class="hljs-attr">children</span>: <span class="hljs-title class_">UniqueId</span>[]
  <span class="hljs-comment">/** å…„å¼ŸèŠ‚ç‚¹ id */</span>
  <span class="hljs-attr">sibling</span>: <span class="hljs-title class_">UniqueId</span>[]
  <span class="hljs-attr">uniqueId</span>: <span class="hljs-title class_">UniqueId</span>
  <span class="hljs-attr">nodeName</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-comment">/** èŠ‚ç‚¹è¾¹ç•Œ */</span>
  <span class="hljs-attr">boundingRect</span>: <span class="hljs-title class_">BoundingRect</span>
  <span class="hljs-comment">/** paddingä¿¡æ¯ */</span>
  <span class="hljs-attr">paddingInfo</span>: <span class="hljs-title class_">PaddingInfo</span>
  <span class="hljs-comment">/** borderä¿¡æ¯ */</span>
  <span class="hljs-attr">borderInfo</span>: <span class="hljs-title class_">BorderInfo</span>
  <span class="hljs-comment">/** èƒŒæ™¯è‰² */</span>
  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-comment">/** æ ‡ç­¾åç§°ï¼ˆè®¾è®¡ç¨¿åˆ™ä¸ºèŠ‚ç‚¹ç±»å‹ï¼‰ */</span>
  tagName?: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">SceneNode</span>[<span class="hljs-string">'type'</span>]
  <span class="hljs-comment">/** æ–‡æœ¬æ ·å¼ä¿¡æ¯, åªæœ‰å†…éƒ¨æ˜¯æ–‡æœ¬çš„èŠ‚ç‚¹æ‰æœ‰è¿™ä¸ªå­—æ®µ */</span>
  textStyleInfo?: <span class="hljs-title class_">TextStyleInfo</span>
  <span class="hljs-comment">/** èŠ‚ç‚¹çš„ä¸­å¿ƒä¿¡æ¯ <span class="hljs-doctag">@description</span> DOM ONLY */</span>
  nodeFlexInfo?: <span class="hljs-title class_">NodeFlexInfo</span>
  <span class="hljs-comment">/** ç›¸é‚»èŠ‚ç‚¹çš„è¾¹è· */</span>
  <span class="hljs-attr">neighborMarginInfo</span>: <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">SiblingPosition</span>, <span class="hljs-title class_">NeighborMarginInfo</span>&gt;&gt;
}

</code></pre>
<h3 data-id="heading-7">æ•°æ®å½’ä¸€åŒ–å¤„ç†æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    Start([å¼€å§‹: rootNode]) --&gt; GetBounding[è·å–æ ¹èŠ‚ç‚¹ getBoundingClientRect]
    GetBounding --&gt; SetBounding[è®¾ç½® rootBounding åˆ° domConfigs]
    SetBounding --&gt; CheckTextResize{æ£€æŸ¥è®¾è®¡ç¨¿æ˜¯å¦æœ‰&lt;br/&gt;textAutoResize}
    CheckTextResize --&gt; RecordInfo[onDomInfoRecorder&lt;br/&gt;è®°å½• DOM ä¿¡æ¯]
    
    RecordInfo --&gt; SyncText[syncTextInfoToTextParentNode&lt;br/&gt;åŒæ­¥æ–‡æœ¬ä¿¡æ¯åˆ°çˆ¶èŠ‚ç‚¹]
    SyncText --&gt; LargeLineHeight[processLargeLineHeight&lt;br/&gt;å¤„ç†å¤§è¡Œé«˜åœºæ™¯]
    
    LargeLineHeight --&gt; ShouldShrink{æ˜¯å¦éœ€è¦å¤„ç†&lt;br/&gt;shouldShrinkBounding?}
    ShouldShrink --&gt;|æ˜¯| ProcessShrink[processDomNodeShouldShrinkBounding&lt;br/&gt;å¤„ç†æ”¶ç¼©è¾¹ç•Œ]
    ShouldShrink --&gt;|å¦| ProcessZZUI[processDomZZUINode&lt;br/&gt;å¤„ç† ZZUI èŠ‚ç‚¹]
    ProcessShrink --&gt; ProcessZZUI
    
    ProcessZZUI --&gt; SearchInitial[searchNeighborNodesInitial&lt;br/&gt;æœç´¢åˆå§‹é‚»å±…èŠ‚ç‚¹]
    SearchInitial --&gt; RemoveSame1[removeSameSizePositionChildren&lt;br/&gt;å»é™¤åŒä½ç½®åŒå¤§å°å­èŠ‚ç‚¹ #1]
    
    RemoveSame1 --&gt; MarginCollapse[processMarginCollapsing&lt;br/&gt;å¤„ç† margin æŠ˜å ]
    MarginCollapse --&gt; Padding[processPaddingInfo&lt;br/&gt;å¤„ç† padding ä¿¡æ¯]
    Padding --&gt; ShrinkRect[shrinkRectBounding&lt;br/&gt;æ”¶ç¼©çŸ©å½¢è¾¹ç•Œ]
    
    ShrinkRect --&gt; RemoveSame2[removeSameSizePositionChildren&lt;br/&gt;å»é™¤åŒä½ç½®åŒå¤§å°å­èŠ‚ç‚¹ #2]
    RemoveSame2 --&gt; Match[recordHybridNodeMatchResult&lt;br/&gt;è®°å½•æ··åˆèŠ‚ç‚¹åŒ¹é…ç»“æœ]
    
    Match --&gt; SearchNeighbor[searchNeighborNodes&lt;br/&gt;æœç´¢é‚»å±…èŠ‚ç‚¹]
    SearchNeighbor --&gt; Distance[getNeighborNodeDistance&lt;br/&gt;è®¡ç®—é‚»å±…èŠ‚ç‚¹è·ç¦»]
    
    Distance --&gt; End([è¿”å›: FlatNodeMap])
    
    style Start fill:#e1f5e1
    style End fill:#ffe1e1
    style ShouldShrink fill:#fff4e1
    style CheckTextResize fill:#fff4e1
</code></pre>
<p>Domä¾§æ•°æ®å¤„ç†ä¸UIä¾§æ•°æ®å¤„ç†é€»è¾‘åŸºæœ¬ä¸€è‡´ï¼Œä¸Šå›¾ä¸ºæ•´ä¸ªDomç»“æ„æ•°æ®å¤„ç†æµç¨‹ï¼Œä¸‹é¢å°†å¯¹è¯¥æµç¨‹ä¸­æ¯”è¾ƒæ ¸å¿ƒçš„éƒ¨åˆ†è¿›è¡Œè®²è§£ã€‚</p>
<h4 data-id="heading-8"><code>processLargeLineHeight</code>å¤„ç†è¡Œé«˜é—®é¢˜</h4>
<p>å¤„ç†è¡Œé«˜é—®é¢˜ï¼Œæ—¨åœ¨æŠ¹å¹³å‰ç«¯ä¾§ä¸UIä¾§åœ¨ç›¸åŒæ¸²æŸ“æ•ˆæœä¸‹ï¼Œå› ä¸ºè®¾ç½®äº†ä¸åŒçš„è¡Œé«˜å¯¼è‡´èŠ‚ç‚¹é«˜åº¦ä¸åŒé€ æˆçš„å¼‚å¸¸ã€‚è¡Œé«˜æ•°æ®çš„å½’ä¸€åŒ–å¤„ç†ä¾èµ–äºèŠ‚ç‚¹å†…éƒ¨çš„<code>textStyleInfo</code>ï¼Œå…¶ç»“æ„å¦‚ä¸‹</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TextStyleInfo</span> {
  <span class="hljs-comment">/** è¡Œé«˜ */</span>
  <span class="hljs-attr">lineHeight</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-comment">/** æ–‡æœ¬å®½åº¦ */</span>
  <span class="hljs-attr">textWidth</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-comment">/** å­—ä½“å¤§å° */</span>
  <span class="hljs-attr">fontSize</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-comment">/** å­—ä½“ç²—ç»† */</span>
	<span class="hljs-attr">fontWeight</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-comment">/** å­—ä½“ */</span>
  <span class="hljs-attr">fontFamily</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-comment">/** æ–‡æœ¬è¡Œæ•° */</span>
  <span class="hljs-attr">textLineCount</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-comment">/** æ–‡æœ¬å¯¹é½æ–¹å‘ */</span>
  <span class="hljs-attr">textAlignment</span>: <span class="hljs-title class_">TextAlignment</span>
  <span class="hljs-comment">/** æ–‡æœ¬å†…å®¹ */</span>
  <span class="hljs-attr">textContent</span>: <span class="hljs-built_in">string</span>
	<span class="hljs-comment">/** master goçš„æ–‡æœ¬èŠ‚ç‚¹çš„å®½é«˜ç­–ç•¥ */</span>
  textAutoResize?: <span class="hljs-title class_">TextNode</span>[<span class="hljs-string">'textAutoResize'</span>]
}
</code></pre>
<p>å…¶æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>åˆ›å»ºæµ‹é‡å®¹å™¨</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> measureElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
measureElement.<span class="hljs-property">style</span>.<span class="hljs-property">position</span> = <span class="hljs-string">'absolute'</span>
measureElement.<span class="hljs-property">style</span>.<span class="hljs-property">visibility</span> = <span class="hljs-string">'hidden'</span>
</code></pre>
<ol start="2">
<li><strong>å…‹éš†å…³é”®æ ·å¼</strong></li>
</ol>
<p>å¤åˆ¶å½±å“æ–‡æœ¬å¸ƒå±€çš„æ‰€æœ‰æ ·å¼åˆ°æµ‹é‡å…ƒç´ ï¼š</p>
<ul>
<li><strong>å­—ä½“æ ·å¼</strong>: <code>fontSize</code>, <code>fontFamily</code>, <code>fontWeight</code></li>
<li><strong>æ’ç‰ˆ</strong>: <code>lineHeight</code>, <code>whiteSpace</code>, <code>wordBreak</code>, <code>textTransform</code></li>
<li><strong>çº¦æŸ</strong>: <code>width</code>ï¼ˆä½¿ç”¨åŸèŠ‚ç‚¹å®½åº¦ï¼‰</li>
<li><strong>æ¸…é›¶</strong>: <code>padding</code>, <code>margin</code>, <code>border</code>ï¼ˆé¿å…å¹²æ‰°ï¼‰</li>
</ul>
<ol start="3">
<li><strong>é¦–æ¬¡æµ‹é‡ï¼ˆå¤šè¡Œåœºæ™¯ï¼‰</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript">measureElement.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">${domNode.getBoundingClientRect().width}</span>px`</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(measureElement)
<span class="hljs-keyword">const</span> measureHeight = measureElementRect.<span class="hljs-property">height</span>
</code></pre>
<ul>
<li>è®¾ç½®<strong>å›ºå®šå®½åº¦</strong>ï¼ˆä¸åŸèŠ‚ç‚¹ä¸€è‡´ï¼‰</li>
<li>æµ‹é‡æ–‡æœ¬åœ¨æ­¤å®½åº¦çº¦æŸä¸‹çš„å®é™…é«˜åº¦</li>
</ul>
<ol start="4">
<li><strong>è®¡ç®—è¡Œæ•°</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> shouldUseOriginHeight = !isInline &amp;&amp; originHeight &lt; measureHeight
<span class="hljs-keyword">const</span> textHeight = shouldUseOriginHeight ? originHeight : measureHeight
<span class="hljs-keyword">const</span> lineCount = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">1</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(textHeight / lineHeightValue))
</code></pre>
<p><strong>å…³é”®é€»è¾‘</strong>ï¼š</p>
<ul>
<li>å¦‚æœåŸèŠ‚ç‚¹æ˜¯ <strong>block</strong> ä¸”è®¾ç½®äº†å›ºå®šé«˜åº¦ï¼Œä¸”è¯¥é«˜åº¦å°äºæµ‹é‡é«˜åº¦
<ul>
<li>è¯´æ˜æ–‡æœ¬è¢«è£å‰ªäº†ï¼ˆå¦‚ <code>height: 50px</code> ä½†æ–‡æœ¬å®é™…éœ€è¦ 100pxï¼‰</li>
<li>ä½¿ç”¨åŸå§‹é«˜åº¦è®¡ç®—è¡Œæ•°ï¼ˆå› ä¸ºå®é™…æ˜¾ç¤ºçš„å°±æ˜¯è¢«è£å‰ªçš„éƒ¨åˆ†ï¼‰</li>
</ul>
</li>
<li>å¦åˆ™ä½¿ç”¨æµ‹é‡é«˜åº¦</li>
<li><code>è¡Œæ•° = æ–‡æœ¬é«˜åº¦ / è¡Œé«˜</code></li>
</ul>
<ol start="5">
<li><strong>å•è¡Œç‰¹æ®Šå¤„ç†</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">if</span> (lineCount &gt; <span class="hljs-number">1</span>) {
  <span class="hljs-keyword">return</span> baseTextStyle
}
<span class="hljs-comment">// å•è¡Œåœºæ™¯ï¼Œé‡æ–°è®¡ç®—å®½åº¦</span>
measureElement.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'auto'</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(measureElement)
<span class="hljs-keyword">const</span> measureElementRect2 = measureElement.<span class="hljs-title function_">getBoundingClientRect</span>()
</code></pre>
<p>å•è¡Œé‡æ–°æµ‹é‡ï¼Œæ ¹æœ¬ä¸Šæ˜¯ä¸ºäº†ç¡®å®šå•è¡Œæ–‡æœ¬çš„åœºæ™¯ä¸‹å®é™…å ç”¨çš„æœ€å°å®½åº¦ã€‚</p>
<p>åœ¨è·å–äº†<code>textStyleInfo</code>ä¹‹åï¼Œå°±å¯ä»¥è¿›è¡Œè¡Œé«˜çš„å½’ä¸€åŒ–å¤„ç†äº†ã€‚</p>
<ol>
<li><strong>Inline èŠ‚ç‚¹ç‰¹æ®Šå¤„ç†</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">if</span> (isInlineNode &amp;&amp; !!parentNodeInfo) {
  nodeInfo.<span class="hljs-property">boundingRect</span>.<span class="hljs-property">y</span> = parentNodeInfo.<span class="hljs-property">boundingRect</span>.<span class="hljs-property">y</span>
  nodeInfo.<span class="hljs-property">boundingRect</span>.<span class="hljs-property">height</span> = parentNodeInfo.<span class="hljs-property">boundingRect</span>.<span class="hljs-property">height</span>
  <span class="hljs-keyword">return</span>
}
</code></pre>
<p>inlineèŠ‚ç‚¹çš„å¤„ç†æ˜¯ä¸€ä¸ªå¤§å‘ï¼Œåœ¨MasterGoçš„æ¸²æŸ“å™¨ä¸­ï¼Œæ–‡å­—å§‹ç»ˆæ˜¯åœ¨<code>TextNode</code>ä¸­å±…ä¸­å¤„ç†çš„ï¼Œä½†æ˜¯åœ¨å‰ç«¯æ–‡æœ¬ä¸­ï¼Œæ–‡æœ¬æ˜¯ä»¥baselineä¸ºåŸºå‡†å¯¹é½çš„ï¼Œæ–‡å­—åœ¨lnlineNodeä¸­çš„å±…ä¸­æ–¹å¼ï¼Œå–å†³äºå­—ä½“æœ¬èº«çš„è®¾ç½®ï¼Œè€Œéå§‹ç»ˆå±…ä¸­æ¸²æŸ“ã€‚å› æ­¤æ­¤å¥—é€»è¾‘åªèƒ½åœ¨éè¡Œå†…å…ƒç´ ä¸­ä½¿ç”¨ï¼Œè€Œè¡Œå†…å…ƒç´ çš„å®½é«˜åˆ™å§‹ç»ˆä¸çˆ¶èŠ‚ç‚¹ä¿æŒä¸€è‡´ã€‚</p>
<ol start="2">
<li><strong>å•è¡Œæ–‡æœ¬è¡Œé«˜å¤§äºå­—ä½“å¤§å°çš„åœºæ™¯å¤„ç†</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> realHeight = boundingRect.<span class="hljs-property">height</span> - paddingBottom - paddingTop

<span class="hljs-keyword">if</span> (textLineCount &gt; <span class="hljs-number">1</span> || fontSize === realHeight) {
  <span class="hljs-keyword">return</span>
}

<span class="hljs-keyword">const</span> deltaValue = realHeight - fontSize
nodeInfo.<span class="hljs-property">boundingRect</span>.<span class="hljs-property">y</span> = boundingRect.<span class="hljs-property">y</span> + deltaValue / <span class="hljs-number">2</span>
nodeInfo.<span class="hljs-property">boundingRect</span>.<span class="hljs-property">height</span> = fontSize + paddingTop + paddingBottom
</code></pre>
<p><strong>è°ƒæ•´æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">åŸå§‹é«˜åº¦ = <span class="hljs-number">50px</span> (è¡Œé«˜æ’‘å¼€)
å­—ä½“å¤§å° = <span class="hljs-number">14px</span>
å¤šä½™ç©ºé—´ = <span class="hljs-number">36px</span>

è°ƒæ•´åï¼š
- Y åæ ‡ä¸‹ç§»ï¼šy + <span class="hljs-number">18px</span> (å±…ä¸­)
- é«˜åº¦ç¼©å°ï¼š<span class="hljs-number">14px</span> + <span class="hljs-attribute">padding</span>
</code></pre>
<h4 data-id="heading-9"><code>processMarginCollapsing</code>å¤„ç†è¾¹è·åˆå¹¶çš„åœºæ™¯</h4>
<p>è¦ç†è§£è¿™ä¸€æ­¥éª¤ï¼Œé¦–å…ˆéœ€è¦ç†è§£CSSä¸­çš„æ ¸å¿ƒæ¦‚å¿µï¼š<strong>Margin æŠ˜å ï¼ˆMargin Collapsingï¼‰</strong></p>
<h5 data-id="heading-10">Margin Collapsingä»‹ç»</h5>
<p>åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œ<strong>å­å…ƒç´ çš„ margin ä¼šç©¿é€çˆ¶å…ƒç´ è¾¹ç•Œ</strong>ï¼Œç›´æ¥ä½œç”¨åˆ°çˆ¶å…ƒç´ å¤–éƒ¨ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background: lightblue;"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 30px; background: pink;"</span>&gt;</span>
    å­å…ƒç´ 
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>é¢„æœŸæ•ˆæœ</strong>ï¼šå­å…ƒç´ è·ç¦»çˆ¶å…ƒç´ é¡¶éƒ¨ 30px<br/>
<strong>å®é™…æ•ˆæœ</strong>ï¼šçˆ¶å…ƒç´ æ•´ä½“å‘ä¸‹ç§»åŠ¨ 30pxï¼Œå­å…ƒç´ ç´§è´´çˆ¶å…ƒç´ é¡¶éƒ¨</p>
<pre><code class="hljs">âŒ é¢„æœŸå¸ƒå±€                âœ… å®é™…å¸ƒå±€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â†“ 30px
â”‚  Parent     â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†“ 30px     â”‚           â”‚  Parent     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚           â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Child  â”‚ â”‚           â”‚â”‚ Child  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚           â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h5 data-id="heading-11">ä¸ä¼šå‘ç”Ÿ Margin æŠ˜å çš„æ¡ä»¶ï¼š</h5>
<ol>
<li>
<p>BFCåŒºåŸŸ</p>
</li>
<li>
<p>çˆ¶èŠ‚ç‚¹æœ‰è¾¹ç•Œæˆ–è€…èƒŒæ™¯</p>
</li>
<li>
<p>Flexã€Gridå¸ƒå±€</p>
</li>
<li>
<p>èŠ‚ç‚¹ä¸­æœ‰å†…è”æ–‡æœ¬</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
  å†…è”æ–‡æœ¬
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 30px;"</span>&gt;</span>å­å…ƒç´ <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
</li>
</ol>
<h5 data-id="heading-12">å¤„ç†é€»è¾‘</h5>
<ol>
<li>åˆ¤æ–­æ˜¯å¦ä¼šå‘ç”ŸMarginæŠ˜å </li>
<li>ä¼šå‘ç”ŸMarginæŠ˜å æ—¶ï¼Œå¯¹åº”æ–¹å‘ä¸Šæ˜¯å¦æœ‰å­èŠ‚ç‚¹æœ‰<code>margin</code></li>
<li>æœ‰<code>margin</code>æ—¶ï¼Œå°†å­èŠ‚ç‚¹è®¾ç½®ä¸º<code>margin: 0</code>,å¹¶å°†çˆ¶èŠ‚ç‚¹å¯¹åº”æ–¹å‘ä¸Šçš„<code>margin</code>è®¾ç½®ä¸ºå­èŠ‚ç‚¹çš„å€¼ä¸çˆ¶èŠ‚ç‚¹çš„å€¼ä¸­çš„æœ€å¤§å€¼ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">hoistingNotBfcBoundaryMargin</span>(<span class="hljs-params">domNode: HTMLElement</span>) {
  <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(domNode.<span class="hljs-property">children</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">childNode</span>) =&gt;</span> {
    <span class="hljs-comment">// åå‘DFSï¼Œå…ˆèµ°æœ€å†…éƒ¨èŠ‚ç‚¹ï¼Œç„¶åå¾€å¤–èµ°</span>
    <span class="hljs-title function_">hoistingNotBfcBoundaryMargin</span>(childNode <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>)
  })
  <span class="hljs-comment">// æ˜¯å¦æ˜¯bfc</span>
  <span class="hljs-keyword">const</span> isBFC = <span class="hljs-title function_">getDomIsBfc</span>(domNode)
  <span class="hljs-comment">// æ˜¯å¦æ˜¯flex or grid</span>
  <span class="hljs-keyword">const</span> isFlexOrGridItem = <span class="hljs-title function_">getIsFlexOrGridItem</span>(domNode)
  <span class="hljs-comment">// æ˜¯å¦æœ‰å†…è”å…ƒç´ </span>
  <span class="hljs-keyword">const</span> hasInlineContent = <span class="hljs-title function_">getHasInlineContent</span>(domNode)
  <span class="hljs-comment">// æ˜¯å¦æœ‰clear</span>
  <span class="hljs-keyword">const</span> hasClearance = <span class="hljs-title function_">getHasClearance</span>(domNode)
  <span class="hljs-keyword">const</span> childNodeList = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(domNode.<span class="hljs-property">children</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">childNode</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> isDataTextWrapper = childNode.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'data-text-wrapper'</span>) === <span class="hljs-string">'1'</span>
    <span class="hljs-keyword">return</span> !isDataTextWrapper
  })

  <span class="hljs-comment">// å…¨éƒ¨ä¸ºfalseæ‰éœ€è¦æå‡margin</span>
  <span class="hljs-keyword">const</span> preJudgeResult = [isBFC, isFlexOrGridItem, hasInlineContent, hasClearance, !childNodeList.<span class="hljs-property">length</span>].<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">it</span> =&gt;</span> !it)
  <span class="hljs-keyword">if</span> (!preJudgeResult) {
    <span class="hljs-keyword">return</span>
  }
  <span class="hljs-keyword">const</span> shouldHoistTopMargin = <span class="hljs-title function_">judgeDomNodeMarginHoisting</span>(domNode, <span class="hljs-string">'top'</span>)
  <span class="hljs-keyword">const</span> shouldHoistBottomMargin = <span class="hljs-title function_">judgeDomNodeMarginHoisting</span>(domNode, <span class="hljs-string">'bottom'</span>)

  <span class="hljs-keyword">if</span> (shouldHoistTopMargin) {
    <span class="hljs-title function_">hostingTargetDirectionMargin</span>(domNode, <span class="hljs-string">'top'</span>)
  }
  <span class="hljs-keyword">if</span> (shouldHoistBottomMargin) {
    <span class="hljs-title function_">hostingTargetDirectionMargin</span>(domNode, <span class="hljs-string">'bottom'</span>)
  }
}
</code></pre>
<h4 data-id="heading-13"><code>processPaddingInfo</code> åˆå¹¶paddingé€»è¾‘</h4>
<p>åœ¨UIè®¾è®¡ç¨¿ä¸­ï¼Œä»–ä»¬çš„è¾¹è·å¯èƒ½æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œä¹Ÿå¯èƒ½æ˜¯è‡ªåŠ¨åŒ–å¸ƒå±€çš„æ—¶å€™é…ç½®çš„paddingã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62397a9d03f0475b8b1864cde4cd7118~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=Gzi3vLX%2Bwf6z%2Fe4W03m2zFf%2F4q0%3D" alt="ä¸åŒçš„è¾¹è·å®ç°" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73fd3385f9a54921a055458baee215d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=2oOCKd%2Fomtqcg%2B7IsT3fyoHDpbc%3D" alt="è¾¹è·åœºæ™¯2" loading="lazy"/></p>
<p>è€Œåœ¨å‰ç«¯é¡µé¢ä¸­ï¼Œç”±äºæ—¶å¸¸è¦è€ƒè™‘åˆ°èŠ‚ç‚¹å­˜åœ¨ä¸ä¸å­˜åœ¨çš„æƒ…å†µä¸‹çš„é—´è·ç¨³å®šæ€§ï¼Œå› æ­¤å¸¸ä¼šå‡ºç°å„ç§æ‹¼æ¥è¾¹è·çš„æƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7a05bc50005456aa8ab4f2933fcff42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=hzJfsAajEZzBPvjWBvPlot%2FBCJw%3D" alt="æ‹¼æ¥è¾¹è·åœºæ™¯" loading="lazy"/></p>
<p>æ‰€ä»¥éœ€è¦å°†çº¯ç²¹åœ°ç”¨æ¥ä½œä¸ºæ‹¼æ¥è¾¹è·çš„paddingï¼Œä»å½“å‰èŠ‚ç‚¹çš„widthå’Œheightä¸­æ’é™¤å‡ºå»ï¼Œè®©èŠ‚ç‚¹çš„å°ºå¯¸ä¸­ä¸åŒ…å«ä»»ä½•å¤šä½™çš„æ— æ•ˆpaddingã€‚æœ¬å¤„ç†æ–¹æ³•çš„æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹</p>
<ol>
<li>å¯¹æ¯ä¸ªèŠ‚ç‚¹çš„ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘ç‹¬ç«‹å¤„ç†</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript">paddingInfoDirectionList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">currentPosition</span>) =&gt;</span> {
  <span class="hljs-comment">// top, right, bottom, left</span>
})
</code></pre>
<ol start="2">
<li>åˆ¤æ–­å½“å‰æ–¹å‘çš„ padding æ˜¯å¦å¯ä»¥è¢«åˆå¹¶ï¼ˆå¯èƒ½éœ€è¦æ£€æŸ¥å­èŠ‚ç‚¹æ˜¯å¦å ç”¨äº†è¿™ä¸ªç©ºé—´ï¼‰</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> targetDirectionPaddingValue = <span class="hljs-title function_">getTargetDirectionPaddingValue</span>({
  currentNodeInfo,
  flatNodeMap,
  <span class="hljs-attr">position</span>: currentPosition,
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getTargetDirectionPaddingValue</span>(<span class="hljs-params">{ currentNodeInfo, position }: JudgeMergableConfig</span>) {
  <span class="hljs-keyword">const</span> paddingKey = <span class="hljs-title function_">camel</span>(<span class="hljs-string">`padding <span class="hljs-subst">${position}</span>`</span>) <span class="hljs-keyword">as</span> keyof <span class="hljs-title class_">PaddingInfo</span>
  <span class="hljs-comment">// æ˜¯å¦å­˜åœ¨ç›®æ ‡æ–¹å‘çš„padding</span>
  <span class="hljs-keyword">const</span> targetDirectionPaddingValue = currentNodeInfo.<span class="hljs-property">paddingInfo</span>[paddingKey]
  <span class="hljs-keyword">return</span> targetDirectionPaddingValue || <span class="hljs-number">0</span>
}
</code></pre>
<ol start="3">
<li>æ‰§è¡Œåˆå¹¶æ“ä½œ</li>
<li><strong>æ‰©å±•è¾¹ç•Œæ¡†</strong>ï¼šå°† padding ç©ºé—´çº³å…¥ boundingRect</li>
<li><strong>å‡å°‘ padding å€¼</strong>ï¼šä» paddingInfo ä¸­æ‰£é™¤å·²åˆå¹¶çš„å€¼</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * åˆå¹¶padding
 * <span class="hljs-doctag">@param</span> curNodeInfo å½“å‰èŠ‚ç‚¹ä¿¡æ¯
 * <span class="hljs-doctag">@param</span> position ç›®æ ‡æ–¹å‘
 * <span class="hljs-doctag">@param</span> paddingInfo ç›®æ ‡æ–¹å‘çš„paddingå€¼
 * <span class="hljs-doctag">@returns</span> åˆå¹¶åçš„èŠ‚ç‚¹ä¿¡æ¯
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMergePadding</span>(<span class="hljs-params">curNodeInfo: NodeInfo, position: <span class="hljs-string">'left'</span> | <span class="hljs-string">'right'</span> | <span class="hljs-string">'top'</span> | <span class="hljs-string">'bottom'</span>, paddingInfo: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">const</span> clonedBoundingRect = <span class="hljs-title function_">clone</span>(curNodeInfo.<span class="hljs-property">boundingRect</span>)
  <span class="hljs-keyword">if</span> (position === <span class="hljs-string">'left'</span>) {
    clonedBoundingRect.<span class="hljs-property">x</span> += paddingInfo
    clonedBoundingRect.<span class="hljs-property">width</span> -= paddingInfo
  }
  <span class="hljs-keyword">if</span> (position === <span class="hljs-string">'right'</span>) {
    clonedBoundingRect.<span class="hljs-property">width</span> -= paddingInfo
  }
  <span class="hljs-keyword">if</span> (position === <span class="hljs-string">'top'</span>) {
    clonedBoundingRect.<span class="hljs-property">y</span> += paddingInfo
    clonedBoundingRect.<span class="hljs-property">height</span> -= paddingInfo
  }
  <span class="hljs-keyword">if</span> (position === <span class="hljs-string">'bottom'</span>) {
    clonedBoundingRect.<span class="hljs-property">height</span> -= paddingInfo
  }
  <span class="hljs-keyword">return</span> clonedBoundingRect
}

<span class="hljs-comment">/**
 * å‡å»å·²è¢«åˆå¹¶çš„paddingå€¼
 * <span class="hljs-doctag">@param</span> curNodeInfo å½“å‰èŠ‚ç‚¹ä¿¡æ¯
 * <span class="hljs-doctag">@param</span> position ç›®æ ‡æ–¹å‘
 * <span class="hljs-doctag">@param</span> paddingInfo ç›®æ ‡æ–¹å‘çš„paddingå€¼
 * <span class="hljs-doctag">@returns</span> å‡å»paddingå€¼åçš„èŠ‚ç‚¹ä¿¡æ¯
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleSubtractPaddingValue</span>(<span class="hljs-params">curNodeInfo: NodeInfo, position: <span class="hljs-string">'left'</span> | <span class="hljs-string">'right'</span> | <span class="hljs-string">'top'</span> | <span class="hljs-string">'bottom'</span>, paddingInfo: <span class="hljs-built_in">number</span></span>) {
  <span class="hljs-keyword">const</span> clonedPaddingInfo = <span class="hljs-title function_">clone</span>(curNodeInfo.<span class="hljs-property">paddingInfo</span>)
  <span class="hljs-keyword">const</span> paddingKey = <span class="hljs-title function_">camel</span>(<span class="hljs-string">`padding <span class="hljs-subst">${position}</span>`</span>) <span class="hljs-keyword">as</span> keyof <span class="hljs-title class_">PaddingInfo</span>
  clonedPaddingInfo[paddingKey] -= paddingInfo
  <span class="hljs-keyword">return</span> clonedPaddingInfo
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processingPaddingInfo</span>(<span class="hljs-params"/>) {
	<span class="hljs-comment">//...</span>
  <span class="hljs-keyword">const</span> paddingMergedBoundingRect = <span class="hljs-title function_">handleMergePadding</span>(
    currentNodeInfo, 
    currentPosition, 
    targetDirectionPaddingValue
  )
  <span class="hljs-keyword">const</span> newPaddingInfo = <span class="hljs-title function_">handleSubtractPaddingValue</span>(
    currentNodeInfo, 
    currentPosition, 
    targetDirectionPaddingValue
  )
	<span class="hljs-comment">//...</span>
}
</code></pre>
<h4 data-id="heading-14"><code>shrinkRectBounding</code>æ”¶ç¼©çŸ©å½¢è¾¹ç•Œ</h4>
<h5 data-id="heading-15">ä¸ºä»€ä¹ˆè¦æ”¶ç¼©çŸ©å½¢è¾¹ç•Œï¼Ÿ</h5>
<p>åœ¨UIè®¾è®¡ç¨¿ä¸­ï¼Œå­˜åœ¨ä¸€äº›è´¨é‡ä¸å¯æ§çš„ç°è±¡ï¼Œæ¯”å¦‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0497940248b74e039385d1e4045a38d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=5bd7aSPDY1Jphp7Pv%2BBeETJxD%2Bc%3D" alt="åˆå§‹æ•ˆæœ" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªè®¾è®¡ç¨¿ä¸­ï¼Œçœ‹ä¼¼å·¦ä¾§çš„æˆè‰²+å®šçº§æ ‡å‡†èŠ‚ç‚¹ä¸å³ä¾§çš„ä¸Šä¸‹è¾¹è·æ··ä¹±ï¼Œæ¯«æ— å±…ä¸­çš„æ„Ÿè§‰ã€‚ä½†æ˜¯å€˜è‹¥æˆ‘ä»¬å¯¹ä»–è¿›è¡Œä¸€ä¸‹å˜æ›´ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e7e1057d6694876ad4f92774a755c0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=Xt%2Fg32I%2BDmMGh6yZCFhjLIZi9BM%3D" alt="å±…ä¸­åçš„æ•ˆæœ" loading="lazy"/>å®é™…ä¸Šåªéœ€è¦å¤„ç†å¥½å·¦ä¾§çš„é«˜åº¦ï¼Œå³ä¾§çš„é«˜åº¦å®Œå…¨å¯ä»¥å’Œå·¦ä¾§ç›¸åŒï¼Œå¹¶å¤„ç†æˆä¸º <code>justify-content: space-between</code>å³å¯ã€‚</p>
<p>ä½†æ˜¯å½“FEæ‹¿åˆ°ç¬¬ä¸€å¼ å›¾çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šä¸€çœ¼å°±çœ‹å‡ºæ¥å·¦å³ä¸¤ä¾§çš„é«˜åº¦æ˜¯å¯ä»¥å®Œå…¨ä¸€æ ·çš„ï¼ˆå› ä¸ºé€‰ä¸­å·¦ä¾§çš„æ—¶å€™æ˜¯ä¸€ä¸ªå¤§çš„rectangleï¼‰</p>
<p>è¿™ä¸ªä¾‹å­å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨UIä¾§å¸¸ä¼šå­˜åœ¨ä¸€äº›å‡Œä¹±çš„ã€éš¾ä»¥ç”¨ç›´è§‰åˆ¤æ–­å®é™…æ•ˆæœçš„è®¾è®¡èŠ‚ç‚¹ã€‚è¿™æ—¶å€™å¦‚æœæƒ³è¦ç”¨è‡ªåŠ¨åŒ–çš„æ–¹æ¡ˆè¿›è¡Œæ¯”å¯¹ï¼Œå°±éœ€è¦é’ˆå¯¹è¿™äº›å™ªå£°è¿›è¡Œé™å™ªå¤„ç†ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œé‡‡ç”¨çš„å°±æ˜¯<strong>ä»¥å®é™…æ¸²æŸ“å†…å®¹ä¸ºä¸»çš„èŠ‚ç‚¹æ”¶ç¼©æ–¹æ¡ˆ</strong></p>
<p>ä¸»è¦é€»è¾‘å°±æ˜¯å°½å¯èƒ½çš„æ”¶ç¼©èŠ‚ç‚¹çš„å°ºå¯¸ï¼Œè®©å…¶å¯ä»¥ç´§å‡‘åœ°åŒ…è£¹åœ¨å†…å®¹ä¹‹å¤–ï¼Œå°½å¯èƒ½åœ°ä¸åŒ…å«å¤šä½™çš„ç©ºé—´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac402f7ae2cc49cd8f3f49ef50fa89f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=oX4BLxAaphuTu2bJRH97t8DSOIg%3D" alt="è®¾è®¡ç¨¿è¾¹è·æ”¶ç¼©æ•ˆæœ" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96e2678c771e4fc0bdc677873ff07e78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=qi4XIlYZn8RgCHwA%2Bx5%2Fn1EYxBI%3D" alt="HTMLè¾¹è·æ”¶ç¼©æ•ˆæœ" loading="lazy"/></p>
<p>åœ¨åšå®Œè¿™äº›å·¥ä½œåï¼Œä¾¿å¯ä»¥è¿›è¡ŒèŠ‚ç‚¹ä¸å…¶ç›¸é‚»èŠ‚ç‚¹çš„é—´è·è®¡ç®—äº†ã€‚</p>
<h3 data-id="heading-16">Domä¸è®¾è®¡ç¨¿æ•°æ®çš„é¢„å¤„ç†é€»è¾‘</h3>
<p>æ‰€è°“é¢„å¤„ç†é€»è¾‘ï¼Œæ—¨åœ¨è§£å†³å½’ä¸€åŒ–å¤„ç†æ•°æ®æ—¶é‡åˆ°çš„ä¸€äº›ç‰¹æ®Šcaseã€‚åŒ…æ‹¬ä½†ä¸é™äºï¼šè®¾è®¡ç¨¿è’™ç‰ˆèŠ‚ç‚¹å¤„ç†ã€è®¾è®¡ç¨¿ä½¿ç”¨rectangeèŠ‚ç‚¹ä½œä¸ºèƒŒæ™¯è‰²èŠ‚ç‚¹çš„é€»è¾‘å¤„ç†ã€å‰ç«¯px2remè¯¯å·®ç²¾åº¦ä¿®æ­£ç­‰</p>
<h4 data-id="heading-17">è®¾è®¡ç¨¿è’™ç‰ˆèŠ‚ç‚¹å¤„ç†</h4>
<p>åœ¨è®¾è®¡ç¨¿ä¸­ Mask çš„å½¢å¼å¦‚ä¸‹</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">GROUP</span>
â”œâ”€ å›¾ç‰‡ <span class="hljs-selector-tag">A</span>
â”œâ”€ å›¾ç‰‡ <span class="hljs-selector-tag">B</span>
â””â”€ åœ†å½¢ (<span class="hljs-attribute">isMask</span>: true)  â† <span class="hljs-selector-tag">Mask</span> å›¾å±‚
</code></pre>
<p>å…¶æ•ˆæœä¸ºï¼šåœ†å½¢ä½œä¸ºé®ç½©ï¼Œå›¾ç‰‡ A å’Œ B åªæ˜¾ç¤ºåœ†å½¢èŒƒå›´å†…çš„éƒ¨åˆ†ã€‚</p>
<p>è™½ç„¶è’™ç‰ˆèŠ‚ç‚¹ä¸è¢«è’™ç‰ˆçš„èŠ‚ç‚¹æ˜¯åŒä¸€å±‚çš„å‡ ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯ä»æ•ˆæœä¸Šæ¥è¯´ï¼Œè¢«è’™ç‰ˆçš„èŠ‚ç‚¹ï¼Œå¯ä»¥è§†ä¸ºè’™ç‰ˆçš„å­èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œå°†è’™ç‰ˆèŠ‚ç‚¹åŠè¢«è’™ç‰ˆçš„èŠ‚ç‚¹è§†ä¸ºä¸€ä¸ªçˆ¶å­ç»“æ„ï¼Œå¯ä»¥æœ‰æ•ˆç®€åŒ–æ•°æ®ç»“æ„çš„å¤„ç†ã€‚å…¶æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>æŸ¥æ‰¾ Mask èŠ‚ç‚¹</strong>
<ol>
<li>å…ˆ<strong>åè½¬</strong>å­èŠ‚ç‚¹åˆ—è¡¨ï¼ˆå› ä¸ºè®¾è®¡å·¥å…·ä¸­ mask åœ¨å›¾å±‚å †å çš„åº•éƒ¨ï¼‰</li>
<li>æ‰¾å‡ºæ‰€æœ‰å¯è§çš„ <code>isMask: true</code> èŠ‚ç‚¹çš„ç´¢å¼•</li>
</ol>
</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> reversedChildNodeList = originChildNodeList.<span class="hljs-title function_">toReversed</span>()

<span class="hljs-keyword">const</span> childMastIndexList = reversedChildNodeList
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">it</span> =&gt;</span> !!it.<span class="hljs-property">isVisible</span>)
  .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">prev, it, index</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!nodeCanBeMaskSet.<span class="hljs-title function_">has</span>(curNode.<span class="hljs-property">type</span>) || !curNode.<span class="hljs-property">isMask</span>) {
      <span class="hljs-keyword">return</span> prev
    }
    <span class="hljs-keyword">return</span> [...prev, index]
  }, [] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>[])
</code></pre>
<ol start="2">
<li><strong>è®¡ç®— Mask å½±å“èŒƒå›´</strong>
<ol>
<li>Mask èŠ‚ç‚¹ä¼šå½±å“å®ƒ<strong>ä¸Šæ–¹</strong>çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ˆç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª maskï¼‰</li>
<li>è®¡ç®—æ¯ä¸ª mask çš„å½±å“èŒƒå›´ <code>[start, end]</code></li>
</ol>
</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> maskChildIndexStartEndList = childMastIndexList
  .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">it, index, originArr</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (index === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> [reversedChildNodeList.<span class="hljs-property">length</span> - it, reversedChildNodeList.<span class="hljs-property">length</span>]
    }
    <span class="hljs-keyword">return</span> [reversedChildNodeList.<span class="hljs-property">length</span> - it, reversedChildNodeList.<span class="hljs-property">length</span> - originArr[index - <span class="hljs-number">1</span>] - <span class="hljs-number">1</span>]
  })
  .<span class="hljs-title function_">toReversed</span>()
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">åŸå§‹é¡ºåºï¼ˆåè½¬åï¼‰ï¼š</span>
[<span class="hljs-attr">0:</span> <span class="hljs-string">å›¾ç‰‡A</span>, <span class="hljs-attr">1:</span> <span class="hljs-string">å›¾ç‰‡B</span>, <span class="hljs-attr">2:</span> <span class="hljs-string">Mask1</span>, <span class="hljs-attr">3:</span> <span class="hljs-string">å›¾ç‰‡C</span>, <span class="hljs-attr">4:</span> <span class="hljs-string">Mask2</span>]
                      <span class="hljs-string">â†‘</span>                    <span class="hljs-string">â†‘</span>
<span class="hljs-string">Mask1</span> <span class="hljs-string">å½±å“èŒƒå›´:</span> [<span class="hljs-number">0</span>, <span class="hljs-number">2</span>]  <span class="hljs-string">(å›¾ç‰‡A,</span> <span class="hljs-string">å›¾ç‰‡B)</span>
<span class="hljs-string">Mask2</span> <span class="hljs-string">å½±å“èŒƒå›´:</span> [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]  <span class="hljs-string">(å›¾ç‰‡C)</span>
</code></pre>
<p>3.  <strong>åˆ›å»ºæ–°çš„ FRAME å®¹å™¨</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> newFrameNode = {
  ...emptyFrameNode,           <span class="hljs-comment">// åŸºç¡€ FRAME å±æ€§</span>
  <span class="hljs-attr">id</span>: <span class="hljs-string">`<span class="hljs-subst">${id}</span><span class="hljs-subst">${MASK_REPLACE_SUFFIX}</span>`</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">`<span class="hljs-subst">${name}</span><span class="hljs-subst">${MASK_REPLACE_SUFFIX}</span>`</span>,
  <span class="hljs-comment">// ç»§æ‰¿ mask èŠ‚ç‚¹çš„ä½ç½®å’Œå°ºå¯¸</span>
  absoluteTransform,
  relativeTransform,
  x, y, width, height,
  cornerRadius,                <span class="hljs-comment">// ç»§æ‰¿åœ†è§’</span>
  <span class="hljs-attr">clipsContent</span>: <span class="hljs-literal">true</span>,          <span class="hljs-comment">// å…³é”®ï¼šè£å‰ªå†…å®¹</span>
  children,                    <span class="hljs-comment">// è¢«é®ç½©çš„å†…å®¹</span>
}
</code></pre>
<ol start="4">
<li>
<p><strong>ä¼˜åŒ–ï¼šå•ä¸ª Mask ä¸”å°ºå¯¸ä¸€è‡´</strong></p>
<p>å¦‚æœåªæœ‰ä¸€ä¸ª mask ä¸”å’Œçˆ¶å®¹å™¨å°ºå¯¸ç›¸åŒï¼Œç›´æ¥æ›¿æ¢çˆ¶èŠ‚ç‚¹ï¼Œå‡å°‘å±‚çº§ã€‚</p>
</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> isSameSize = currentNode.<span class="hljs-property">width</span> === firstMaskRelpaceNodeInfo.<span class="hljs-property">width</span> 
  &amp;&amp; currentNode.<span class="hljs-property">height</span> === firstMaskRelpaceNodeInfo.<span class="hljs-property">height</span>

<span class="hljs-keyword">if</span> (newChildGroupList.<span class="hljs-property">length</span> === <span class="hljs-number">1</span> &amp;&amp; isSameSize) {
  <span class="hljs-comment">// ç›´æ¥åˆå¹¶åˆ°çˆ¶èŠ‚ç‚¹</span>
  <span class="hljs-keyword">return</span> {
    ...currentNode,
    ...firstMaskRelpaceNodeInfo,
  }
}
</code></pre>
<h4 data-id="heading-18">è®¾è®¡ç¨¿èƒŒæ™¯èŠ‚ç‚¹çš„æå‡</h4>
<p>ç”±äºä¸€äº›åŸAdobeè½¯ä»¶ or sketchçš„æ“ä½œä¹ æƒ¯ï¼Œä¸”åœ¨MasterGoå·¥å…·ä¸­ï¼ŒGroupèŠ‚ç‚¹æ— æ³•ä¸»åŠ¨è®¾ç½®å®½é«˜ï¼Œå› æ­¤å¸¸ä½¿ç”¨groupèŠ‚ç‚¹+rectangleèŠ‚ç‚¹çš„æ–¹å¼å»æ’‘å¼€ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…ç»™ä¸€ä¸ªèŠ‚ç‚¹è®¾ç½®èƒŒæ™¯è‰²ã€‚è€Œè¿™ä¸ªrectangleèŠ‚ç‚¹åœ¨æ¯”å¯¹è¿‡ç¨‹ä¸­åˆ™å±äºä¸€ä¸ªéœ€è¦å¿½ç•¥çš„èŠ‚ç‚¹ï¼Œå› æ­¤åœ¨æ­¤é¢„å¤„ç†é€»è¾‘ä¸­ï¼Œéœ€è¦è¯†åˆ«èƒŒæ™¯è‰²èŠ‚ç‚¹ï¼Œå¹¶å°†èƒŒæ™¯è‰²æå‡åˆ°çˆ¶èŠ‚ç‚¹çš„å±æ€§ä¸Šå»ï¼Œç®€åŒ–å›¾å±‚ç»“æ„ã€‚å…¶å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>åˆ†ç¦»èƒŒæ™¯å›¾å±‚å’Œå†…å®¹å›¾å±‚</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">judgeIsBgStyleRectangle</span>(<span class="hljs-params">currentNode: PenNode | RectangleNode, parentNode: FrameNode | GroupNode</span>) {
  <span class="hljs-keyword">const</span> { width, height } = currentNode
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">width</span>: parentWidth, <span class="hljs-attr">height</span>: parentHeight } = parentNode
  <span class="hljs-keyword">const</span> deltaWidth = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(width - parentWidth)
  <span class="hljs-keyword">const</span> deltaHeight = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(height - parentHeight)
  <span class="hljs-comment">// å¤§äºä¸ºå›¾ç‰‡ + mask æˆ–è€… å›¾ç‰‡+overflow hiddençš„åœºæ™¯</span>
  <span class="hljs-keyword">const</span> isSameSize = deltaWidth &lt; <span class="hljs-number">2</span> &amp;&amp; deltaHeight &lt; <span class="hljs-number">2</span>
  <span class="hljs-keyword">return</span> isSameSize
}

<span class="hljs-comment">// èƒŒæ™¯å›¾å±‚ï¼šRECTANGLE/PEN ä¸”åˆ¤æ–­ä¸ºèƒŒæ™¯æ ·å¼</span>
<span class="hljs-keyword">const</span> bgStyleNodeList = currentNode.<span class="hljs-property">children</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">it</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (it.<span class="hljs-property">type</span> !== <span class="hljs-string">'RECTANGLE'</span> &amp;&amp; it.<span class="hljs-property">type</span> !== <span class="hljs-string">'PEN'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">judgeIsBgStyleRectangle</span>(it, currentNode)
})

<span class="hljs-comment">// å…¶ä»–å›¾å±‚ï¼šéèƒŒæ™¯çš„å†…å®¹</span>
<span class="hljs-keyword">const</span> restNodeChildList = currentNode.<span class="hljs-property">children</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">it</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (it.<span class="hljs-property">type</span> !== <span class="hljs-string">'RECTANGLE'</span> &amp;&amp; it.<span class="hljs-property">type</span> !== <span class="hljs-string">'PEN'</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  <span class="hljs-keyword">return</span> !<span class="hljs-title function_">judgeIsBgStyleRectangle</span>(it, currentNode)
})
</code></pre>
<ol start="2">
<li><strong>åˆå¹¶èƒŒæ™¯æ ·å¼</strong></li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆå¹¶æ‰€æœ‰èƒŒæ™¯å›¾å±‚çš„å¡«å……</span>
<span class="hljs-keyword">const</span> combinedFillList = bgStyleNodeList.<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> node.<span class="hljs-property">fills</span> || [])
</code></pre>
<h4 data-id="heading-19">å‰ç«¯px2remè¯¯å·®ç²¾åº¦ä¿®æ­£</h4>
<p>è½¬è½¬Appçš„px2remæ–¹æ¡ˆèµ°çš„æ˜¯å¸¸è§„çš„px2remæ–¹æ¡ˆï¼Œrootä¸Šçš„<code>font-size</code>é…ç½®ä¸ºäº†<code>document.clientWidth / 10</code>çš„å€¼ï¼Œremå€¼çš„å–å€¼ç²¾åº¦ä¸ºä¸¤ä½å°æ•°ã€‚</p>
<p>åœ¨å‰ç«¯å“åº”å¼é…ç½®è®¾ç½®ä¸ºiphone seï¼ˆ<code>375px</code>ï¼‰çš„åœºæ™¯ä¸‹ï¼Œå…¶é¡µé¢å®é™…æ¸²æŸ“çš„å€¼å¹¶éè®¾è®¡ç¨¿çš„ä¸€åŠã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec3ce85caaa94568a1115539b332073f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=a9BfSPsIZ0R0NLH1DzGkh34Gkdk%3D" alt="px2remè¯¯å·®" loading="lazy"/></p>
<p>å•ä¸ªèŠ‚ç‚¹çš„åœºæ™¯è¯¯å·®å°šå¯ä»¥ç”¨å››èˆäº”å…¥çš„é€»è¾‘ä¿®æ­£ï¼Œä½†æ˜¯åœ¨å¤šæ•°å€¼æ‹¼æ¥çš„åœºæ™¯ä¸‹ï¼Œè¯¯å·®å¯èƒ½ä¼šè¢«æ”¾å¤§ï¼Œå¯¼è‡´æ¯”å¯¹å¼‚å¸¸ã€‚å› æ­¤éœ€è¦å¯¹px2remç²¾åº¦è¿›è¡Œä¿®æ­£ï¼Œä»¥é¿å…è¿‡å¤šçš„è¯¯å·®å‡ºç°ã€‚</p>
<ul>
<li><strong>æ¨¡å—ç»“æ„</strong></li>
</ul>
<pre><code class="hljs language-shell" lang="shell">ğŸ“¦ css-hacker
â”œâ”€ main-hacker.ts      # ä¸»æµç¨‹ç¼–æ’
â”œâ”€ dom-parser.ts       # è§£æé¡µé¢æ ·å¼è¡¨
â”œâ”€ css-fetcher.ts      # è·å– CSS å†…å®¹
â”œâ”€ css-modifier.ts     # ä¿®æ”¹ CSS å†…å®¹
â”œâ”€ css-injector.ts     # æ³¨å…¥ä¿®æ”¹åçš„ CSS
â”œâ”€ convert-px2rem-deviation.ts  # rem å•ä½è½¬æ¢æ’ä»¶
â””â”€ types.ts            # ç±»å‹å®šä¹‰
</code></pre>
<ul>
<li><strong>æ ¸å¿ƒæµç¨‹</strong></li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¼€å§‹] --&gt; B[è§£æé¡µé¢è·å–å¤–éƒ¨æ ·å¼è¡¨ URL]
    B --&gt; C{æœ‰å¤–éƒ¨æ ·å¼è¡¨?}
    C --&gt;|å¦| D[ç»“æŸ]
    C --&gt;|æ˜¯| E[æ‰¹é‡è·å– CSS å†…å®¹]
    E --&gt; F[éå†æ¯ä¸ª CSS æ–‡ä»¶]
    F --&gt; G[ä½¿ç”¨ modifier ä¿®æ”¹å†…å®¹]
    G --&gt; H[æ³¨å…¥ä¿®æ”¹åçš„ CSS]
    H --&gt; I[åˆ é™¤åŸå§‹ link æ ‡ç­¾]
    I --&gt; J{è¿˜æœ‰æ–‡ä»¶?}
    J --&gt;|æ˜¯| F
    J --&gt;|å¦| K[å®Œæˆ]
</code></pre>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong></li>
</ul>
<p>é€šè¿‡px2remé€»è¾‘ï¼Œæ„å»ºä¸€ä¸ª1-2000æ•°å€¼çš„å“ˆå¸ŒMapï¼Œkeyä¸ºremçš„å€¼ï¼Œvalueä¸ºåŸpxå€¼ã€‚</p>
<p>é€šè¿‡åŠ«æŒé¡µé¢CSSæ–‡ä»¶ï¼Œç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„postcssæ’ä»¶ï¼Œé…åˆé¢„é…ç½®çš„Mapï¼Œå°†pxå€¼åå‘æ˜ å°„ä¸ºè®¾è®¡ç¨¿åŸå€¼ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å•ä¾‹1-2000æ˜ å°„Map</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PxConvertMapSingleton</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">PxConvertMapSingleton</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">convertMap</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>&gt;

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">convertMap</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateConvertMap</span>()
  }

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">PxConvertMapSingleton</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">PxConvertMapSingleton</span>.<span class="hljs-property">instance</span>) {
      <span class="hljs-title class_">PxConvertMapSingleton</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PxConvertMapSingleton</span>()
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">PxConvertMapSingleton</span>.<span class="hljs-property">instance</span>
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">convertPx</span>(<span class="hljs-attr">originPxValue</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">const</span> originRemValue = originPxValue / <span class="hljs-number">750</span> * <span class="hljs-number">10</span>
    <span class="hljs-keyword">const</span> remValue = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(originRemValue * <span class="hljs-number">100</span>) / <span class="hljs-number">100</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(remValue * <span class="hljs-number">37.5</span> * <span class="hljs-number">1000</span>) / <span class="hljs-number">1000</span>
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">generateConvertMap</span>(): <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>&gt; {
    <span class="hljs-keyword">const</span> startValue = <span class="hljs-number">1</span>
    <span class="hljs-keyword">const</span> endValue = <span class="hljs-number">2000</span>

    <span class="hljs-keyword">const</span> entries = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: endValue - startValue + <span class="hljs-number">1</span> }).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, index</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> curValue = index + startValue
      <span class="hljs-keyword">if</span> (curValue === <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
      }

      <span class="hljs-keyword">return</span> [<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertPx</span>(curValue), curValue] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>
    })

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(entries)
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">getConvertMap</span>(): <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">convertMap</span>
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPxConvertMap</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">PxConvertMapSingleton</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getConvertMap</span>()
}

</code></pre>
<p>å†é€šè¿‡è®¾è®¡ç¨¿æ•°æ®å¤„ç†æ–¹æ¡ˆè½¬æ¢æˆå‰ç«¯é¡µé¢å®é™…çš„pxå€¼ï¼Œæœ€ç»ˆå½¢æˆæ–°çš„cssæ ·å¼è¡¨æ³¨å…¥åˆ°HTMLä¸­ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> remRegex = <span class="hljs-regexp">/(\d+(?:\.\d+)?|\.\d+)rem/gi</span>
<span class="hljs-comment">/** å¤„ç†CSSå±æ€§å€¼ä¸­çš„remå•ä½ï¼Œè½¬æ¢ä¸ºpx */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processRemInValue</span>(<span class="hljs-params">value: <span class="hljs-built_in">string</span>, baseFontSize: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">if</span> (!value || !value.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'rem'</span>)) {
    <span class="hljs-keyword">return</span> value
  }
  <span class="hljs-keyword">const</span> convertMap = <span class="hljs-title function_">getPxConvertMap</span>()
  <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">replace</span>(remRegex, <span class="hljs-function">(<span class="hljs-params">_match, remValue</span>) =&gt;</span> {
    <span class="hljs-comment">// remå€¼</span>
    <span class="hljs-keyword">const</span> convertedRemValue = <span class="hljs-title class_">Number</span>(remValue)
    <span class="hljs-comment">// å››èˆäº”å…¥å–4ä½ç²¾åº¦</span>
    <span class="hljs-keyword">const</span> convertedPxValue = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(convertedRemValue * baseFontSize * <span class="hljs-number">10000</span>) / <span class="hljs-number">10000</span>
    <span class="hljs-keyword">const</span> designValue = convertMap.<span class="hljs-title function_">get</span>(convertedPxValue)

    <span class="hljs-keyword">if</span> (!designValue) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${convertedRemValue}</span>rem`</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${convertDesignToPx(designValue)}</span>px`</span>
  })
}

<span class="hljs-comment">// post-cssæ’ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">convertPx2RemDeviation</span>: <span class="hljs-title class_">PluginCreator</span>&lt;<span class="hljs-title class_">Px2RemDeviationOptions</span>&gt; = <span class="hljs-function">(<span class="hljs-params">opts</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> combinedOptions = { ...(opts || {}), ...defaultOptions }
  <span class="hljs-keyword">const</span> { baseFontSize } = combinedOptions

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">postcssPlugin</span>: <span class="hljs-string">'convert-px2rem-deviation'</span>,

    <span class="hljs-title class_">Rule</span>(<span class="hljs-attr">rule</span>: <span class="hljs-title class_">Rule</span>) {
      rule.<span class="hljs-title function_">walkDecls</span>(<span class="hljs-function">(<span class="hljs-params">decl: Declaration</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> value = decl.<span class="hljs-property">value</span>

        <span class="hljs-keyword">if</span> (!value || !value.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'rem'</span>)) {
          <span class="hljs-keyword">return</span>
        }

        <span class="hljs-keyword">const</span> newValue = <span class="hljs-title function_">processRemInValue</span>(value, baseFontSize)
        decl.<span class="hljs-property">value</span> = newValue
      })
    },
  }
}

convertPx2RemDeviation.<span class="hljs-property">postcss</span> = <span class="hljs-literal">true</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> convertPx2RemDeviation

</code></pre>
<ul>
<li>
<p><strong>ä¸ºä»€ä¹ˆä¸é€šè¿‡<code>computedStyle</code>è¿›è¡Œåå‘æ˜ å°„ï¼Ÿ</strong></p>
<p>åŸå› åœ¨äº<code>computedStyle</code>è·å–åˆ°çš„å€¼æ— æ³•é€šè¿‡1-2000çš„Mapç›´æ¥è¿›è¡Œæ˜ å°„ï¼Œæ¯”å¦‚ä¸€ä¸ª<code>box-sizing:border-box</code>çš„divèŠ‚ç‚¹ï¼Œéœ€è¦é¢ä¸´ä¸‰ç§åœºæ™¯ï¼š</p>
<ul>
<li>å¦‚æœå…¶å®½åº¦æ˜¯ç›´æ¥è®¾ç½®çš„ï¼Œåˆ™éœ€è¦æ‹†è§£æˆ<code>padding</code>ã€<code>border</code> ã€<code>width</code>ä¸‰éƒ¨åˆ†åˆ†åˆ«è¿›è¡Œæ˜ å°„ã€‚</li>
<li>å¦‚æœå…¶å®½åº¦æ˜¯æ’‘æ»¡çˆ¶å®¹å™¨çš„ï¼Œåˆ™éœ€è¦å—æ§äºå…¶çˆ¶å®¹å™¨çš„å®½åº¦ã€‚</li>
<li>å¦‚æœæ˜¯è¢«å­èŠ‚ç‚¹æ’‘å¼€çš„ï¼Œåˆ™åˆéœ€è¦åˆ†åˆ«è®¡ç®—å­èŠ‚ç‚¹çš„å®½åº¦è¿›è¡Œç»„åˆã€‚</li>
</ul>
<p>å…¶æ•´ä½“åˆ¤æ–­é€»è¾‘å¤æ‚ç¨‹åº¦é«˜ï¼Œéš¾ä»¥ç†æ¸…ã€‚æ‰€ä»¥é‡‡ç”¨cssæ³¨å…¥çš„æ–¹å¼ä»cssæ–‡ä»¶å±‚é¢å»è§£å†³ç²¾åº¦é—®é¢˜ï¼Œæ˜¯å½“å‰æœ€ä¼˜è§£ã€‚</p>
</li>
</ul>
<h3 data-id="heading-20">DomèŠ‚ç‚¹ä¸UIèŠ‚ç‚¹çš„åŒ¹é…</h3>
<p>èŠ‚ç‚¹åŒ¹é…ç­–ç•¥ä¸ºä¸€å—è¾ƒä¸ºç‹¬ç«‹ä¸”å®Œæ•´çš„æ¨¡å—ï¼Œç”±äºæ—¶é—´ã€äººåŠ›ç­‰ä¸€äº›é—®é¢˜ï¼Œç›®å‰çš„èŠ‚ç‚¹åŒ¹é…æ–¹æ¡ˆä¸ºå¸¸è§„çš„IOUåŒ¹é…æ–¹æ¡ˆï¼ŒåŒ¹é…å‡†ç¡®ç‡çº¦ä¸º40%~60%å·¦å³ï¼Œæœ‰è¾ƒé«˜çš„ä¼˜åŒ–ç©ºé—´ï¼Œå¹¶å°†åœ¨åç»­çš„å¼€å‘ä¸­æ¢ç´¢åŒ¹é…å±‚é¢çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œä»¥æé«˜åŒ¹é…ç‡å’Œæ£€æµ‹å‡†ç¡®åº¦ã€‚</p>
<h4 data-id="heading-21">åŸºæœ¬åŒ¹é…ç­–ç•¥</h4>
<p>èŠ‚ç‚¹åŒ¹é…ç®—æ³•é‡‡ç”¨<strong>æ¬§å‡ é‡Œå¾—è·ç¦»è®¡ç®—</strong>çš„æ–¹å¼ï¼Œç»¼åˆè€ƒè™‘èŠ‚ç‚¹çš„ä½ç½®å’Œå°ºå¯¸ä¿¡æ¯ï¼š</p>
<ul>
<li><strong>ä½ç½®è·ç¦»</strong>ï¼šè®¡ç®—ä¸¤ä¸ªèŠ‚ç‚¹ä¸­å¿ƒç‚¹çš„æ¬§å‡ é‡Œå¾—è·ç¦»</li>
<li><strong>å°ºå¯¸è·ç¦»</strong>ï¼šè®¡ç®—ä¸¤ä¸ªèŠ‚ç‚¹å®½é«˜çš„æ¬§å‡ é‡Œå¾—è·ç¦»</li>
<li><strong>ç»¼åˆè·ç¦»</strong>ï¼šé€šè¿‡åŠ æƒå¹³å‡å¾—åˆ°æœ€ç»ˆåŒ¹é…åˆ†æ•°</li>
</ul>
<h4 data-id="heading-22">è·ç¦»è®¡ç®—å…¬å¼</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½ç½®è·ç¦»è®¡ç®—</span>
<span class="hljs-keyword">const</span> positionDistance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
  (x - mgX)  <span class="hljs-number">2</span> + (y - mgY)  <span class="hljs-number">2</span>
)
 
<span class="hljs-comment">// å°ºå¯¸è·ç¦»è®¡ç®—</span>
<span class="hljs-keyword">const</span> sizeDistance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(
  (width - mgWidth)  <span class="hljs-number">2</span> + (height - mgHeight)  <span class="hljs-number">2</span>
)
 
<span class="hljs-comment">// ç»¼åˆè·ç¦»ï¼ˆä½ç½®æƒé‡ 0.7ï¼Œå°ºå¯¸æƒé‡ 0.3ï¼‰</span>
<span class="hljs-keyword">const</span> totalDistance = positionDistance  <span class="hljs-number">0.7</span> + sizeDistance  <span class="hljs-number">0.3</span>
 
</code></pre>
<h4 data-id="heading-23">åŒ¹é…é˜ˆå€¼æœºåˆ¶</h4>
<ul>
<li><strong>æœ€å¤§å¯æ¥å—è·ç¦»</strong>ï¼šMAX_ACCEPTABLE_DISTANCE = 100</li>
<li>åªæœ‰å½“ç»¼åˆè·ç¦»å°äºé˜ˆå€¼æ—¶ï¼Œæ‰ä¼šè¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆåŒ¹é…</li>
<li>åœ¨æ‰€æœ‰æœ‰æ•ˆåŒ¹é…ä¸­é€‰æ‹©è·ç¦»æœ€å°çš„ä½œä¸ºæœ€ç»ˆåŒ¹é…ç»“æœ</li>
</ul>
<h4 data-id="heading-24">ç®—æ³•æµç¨‹</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1825ae8df6c248d8a7fc18e36e43471d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764297289&amp;x-signature=8iiyDxXLoUT4CRusMylVRsBMby4%3D" alt="åŒ¹é…ç®—æ³•æµç¨‹" loading="lazy"/></p>
<h3 data-id="heading-25">éƒ¨åˆ†åŒºåŸŸUIæ¯”å¯¹é€»è¾‘</h3>
<p>ä¸Šè¿°çš„æ¯”å¯¹é€»è¾‘è™½æ˜¯æ¯”è¾ƒé€šç”¨çš„é€»è¾‘ï¼Œä½†æ˜¯åœ¨åˆç‰ˆå®ç°æ—¶ï¼Œä»¥å…¨é¡µé¢çš„æ¯”å¯¹é€»è¾‘ä¸ºä¸»ã€‚ä½†æ˜¯åœ¨å®é™…ä¸šåŠ¡å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯¹é¡µé¢éƒ¨åˆ†åŒºåŸŸè¿›è¡Œä¿®æ”¹çš„éœ€æ±‚æ•°é‡æ˜¯å¤šä½™æ„å»ºå…¨æ–°é¡µé¢çš„éœ€æ±‚æ•°é‡çš„ã€‚å› æ­¤éƒ¨åˆ†åŒºåŸŸæ¯”å¯¹é€»è¾‘æ˜¯æ¯”è¾ƒå…³é”®çš„ä¸€ç¯ã€‚</p>
<p>è¿™éƒ¨åˆ†å¼€å‘çš„é‡ç‚¹åœ¨äºå¦‚ä½•å¿«é€Ÿç®€å•åœ°è®©ç”¨æˆ·é€‰ä¸­éœ€è¦æ¯”å¯¹çš„åŒºåŸŸï¼Ÿ</p>
<p>å¯ä»¥é€šè¿‡chromeæ’ä»¶ä¸­çš„<strong>devtools</strong>ç›¸å…³åŠŸèƒ½æ¥å®ç°ã€‚</p>
<h4 data-id="heading-26">chromeæ’ä»¶é€šä¿¡æ—¶åºå›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ğŸ‘¤ ç”¨æˆ·
    participant DevTools as ğŸ”§ DevTools Panel
    participant BG as ğŸ¯ Background Script
    participant CS as ğŸ“„ Content Script
    participant Page as ğŸŒ è¢«æ£€æŸ¥é¡µé¢

    Note over DevTools,BG: 1. åˆå§‹åŒ–é˜¶æ®µ
    User-&gt;&gt;DevTools: æ‰“å¼€ DevTools é¢æ¿
    DevTools-&gt;&gt;BG: connect({ name: 'UI_DIFF_PANEL' })
    activate BG
    BG--&gt;&gt;DevTools: Port è¿æ¥æˆåŠŸ
    DevTools-&gt;&gt;BG: PORT_REGISTER&lt;br/&gt;{ tabId: 123 }
    Note right of BG: å­˜å‚¨ DevTools Port&lt;br/&gt;portMap[123] = port
    BG--&gt;&gt;DevTools: æ³¨å†ŒæˆåŠŸ
    deactivate BG

    Note over CS,BG: 2. Content Script å‡†å¤‡
    User-&gt;&gt;Page: æ‰“å¼€/åˆ·æ–°é¡µé¢
    CS-&gt;&gt;CS: åˆå§‹åŒ– UI Diff åŠŸèƒ½
    
    Note over User,Page: 3. ç”¨æˆ·é€‰æ‹©å…ƒç´ 
    User-&gt;&gt;DevTools: åœ¨ Elements é¢æ¿&lt;br/&gt;ç‚¹å‡»é€‰ä¸­å…ƒç´ 
    Note right of DevTools: å…ƒç´ è¢«èµ‹å€¼ç»™ $0
    
    Note over CS,Page: 4. è·å–é€‰ä¸­å…ƒç´ æµç¨‹
    CS-&gt;&gt;BG: å‘é€æ¶ˆæ¯&lt;br/&gt;GET_ELEMENT_SELECTOR&lt;br/&gt;{ tabId: 123 }
    activate BG
    BG-&gt;&gt;BG: æŸ¥æ‰¾å¯¹åº”çš„ DevTools Port&lt;br/&gt;portMap[123]
    BG-&gt;&gt;DevTools: è½¬å‘æ¶ˆæ¯&lt;br/&gt;GET_ELEMENT_SELECTOR
    deactivate BG
    
    activate DevTools
    DevTools-&gt;&gt;Page: inspectedWindow.eval(&lt;br/&gt;getElementSelector($0)&lt;br/&gt;)
    activate Page
    Page-&gt;&gt;Page: éå† DOM æ ‘&lt;br/&gt;æ„å»º CSS Selector
    Page--&gt;&gt;DevTools: è¿”å› Selector å­—ç¬¦ä¸²&lt;br/&gt;"#app &gt; div.container"
    deactivate Page
    
    DevTools-&gt;&gt;BG: RETURN_ELEMENT_SELECTOR&lt;br/&gt;{ tabId, selector }
    deactivate DevTools
    
    activate BG
    BG-&gt;&gt;BG: æŸ¥æ‰¾å¯¹åº”çš„æ ‡ç­¾é¡µ
    BG-&gt;&gt;CS: chrome.tabs.sendMessage&lt;br/&gt;{ selector: "..." }
    deactivate BG
    
    activate CS
    CS-&gt;&gt;CS: ä½¿ç”¨ Selector å®šä½å…ƒç´ &lt;br/&gt;document.querySelector(selector)
    CS-&gt;&gt;Page: getBoundingClientRect()
    Page--&gt;&gt;CS: { x, y, width, height }
    CS-&gt;&gt;CS: æ‰§è¡Œ UI Diff å¯¹æ¯”é€»è¾‘
    deactivate CS

    Note over User,Page: 5. å®Œæˆå¯¹æ¯”
    CS--&gt;&gt;User: æ˜¾ç¤ºå¯¹æ¯”ç»“æœ
</code></pre>
<h4 data-id="heading-27">è·å–ç”¨æˆ·å½“å‰åœ¨elementæ ‡ç­¾ä¸‹é€‰ä¸­çš„å…ƒç´ </h4>
<p>ä¸»è¦é€šè¿‡chromeæ’ä»¶çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fextensions%2Freference%2Fapi%2Fdevtools%2FinspectedWindow%3Fhl%3Dzh-cn%23method-eval" target="_blank" title="https://developer.chrome.com/docs/extensions/reference/api/devtools/inspectedWindow?hl=zh-cn#method-eval" ref="nofollow noopener noreferrer"><code>chrome.devtools.inspectedWindow.eval</code></a>æ–¹æ³•å®ç°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleGetSelectedElement</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> getSelectorExpression = <span class="hljs-string">`
      (function() {
      	// ...ç”Ÿæˆselectoré€»è¾‘
        // $0 æ˜¯ DevTools ä¸­å½“å‰é€‰ä¸­çš„å…ƒç´ 
        return getElementSelector($0);
      })()
    `</span>
  <span class="hljs-comment">// ä½¿ç”¨ chrome.devtools.inspectedWindow.eval åœ¨é¡µé¢ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ</span>
  chrome.<span class="hljs-property">devtools</span>.<span class="hljs-property">inspectedWindow</span>.<span class="hljs-built_in">eval</span>(
    getSelectorExpression,
    <span class="hljs-function">(<span class="hljs-params">result, exceptionInfo</span>) =&gt;</span> {
      <span class="hljs-comment">// å°†è·å–åˆ°çš„selectorå‘é€ç»™background</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">responseMsg</span>: <span class="hljs-title class_">ChromeListenerMessageType</span> = {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">ChromeMessageType</span>.<span class="hljs-property">RETURN_ELEMENT_SELECTOR</span>,
        <span class="hljs-attr">data</span>: {
          <span class="hljs-attr">tabId</span>: chrome.<span class="hljs-property">devtools</span>.<span class="hljs-property">inspectedWindow</span>.<span class="hljs-property">tabId</span>,
          <span class="hljs-attr">selector</span>: result,
        },
      }
      backgroundPort?.<span class="hljs-title function_">postMessage</span>(responseMsg)
    },
  )
}
</code></pre>
<h4 data-id="heading-28">ç”Ÿæˆå¯¹åº”èŠ‚ç‚¹çš„selectoré€»è¾‘</h4>
<p>é€šè¿‡ç”Ÿæˆå¯¹åº”èŠ‚ç‚¹çš„selectorï¼Œå°†ç»“æœç»ç”±backgroundå±‚å‘é€ç»™<code>content_script</code>(æ’ä»¶ä¸»ä½“)ï¼Œåœ¨<code>content_script</code>ä¸­é€šè¿‡<code>document.querySelector(${selector})</code>é‡æ–°è·å–åˆ°ç”¨æˆ·é€‰ä¸­çš„èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getElementSelector</span>(<span class="hljs-params">element</span>) {
  <span class="hljs-keyword">if</span> (!element) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }

  <span class="hljs-comment">// å¦‚æœæ˜¯ documentï¼Œè¿”å› html</span>
  <span class="hljs-keyword">if</span> (element === <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'html'</span>
  }

  <span class="hljs-comment">// å¦‚æœå…ƒç´ æœ‰ idï¼Œä½¿ç”¨ id</span>
  <span class="hljs-keyword">if</span> (element.<span class="hljs-property">id</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`#<span class="hljs-subst">${element.id}</span>`</span>
  }

  <span class="hljs-comment">// æ„å»º CSS Selector</span>
  <span class="hljs-keyword">const</span> path = []
  <span class="hljs-keyword">let</span> current = element

  <span class="hljs-keyword">while</span> (current &amp;&amp; current.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
    <span class="hljs-keyword">let</span> selector = current.<span class="hljs-property">nodeName</span>.<span class="hljs-title function_">toLowerCase</span>()

    <span class="hljs-comment">// æ·»åŠ ç±»åï¼ˆå¦‚æœæœ‰ï¼‰</span>
    <span class="hljs-keyword">if</span> (current.<span class="hljs-property">className</span> &amp;&amp; <span class="hljs-keyword">typeof</span> current.<span class="hljs-property">className</span> === <span class="hljs-string">'string'</span>) {
      <span class="hljs-keyword">const</span> classes = current.<span class="hljs-property">className</span>.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/\\s+/</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c)
      <span class="hljs-keyword">if</span> (classes.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        selector += <span class="hljs-string">`.<span class="hljs-subst">${classes.join(<span class="hljs-string">'.'</span>)}</span>`</span>
      }
    }

    <span class="hljs-comment">// è®¡ç®—åŒçº§å…ƒç´ çš„ä½ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
    <span class="hljs-keyword">if</span> (current.<span class="hljs-property">parentNode</span>) {
      <span class="hljs-keyword">const</span> siblings = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(current.<span class="hljs-property">parentNode</span>.<span class="hljs-property">children</span>).<span class="hljs-title function_">filter</span>(
        <span class="hljs-function"><span class="hljs-params">sibling</span> =&gt;</span> sibling.<span class="hljs-property">nodeName</span> === current.<span class="hljs-property">nodeName</span>,
      )

      <span class="hljs-keyword">if</span> (siblings.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">const</span> index = siblings.<span class="hljs-title function_">indexOf</span>(current) + <span class="hljs-number">1</span>
        selector += <span class="hljs-string">`:nth-of-type(<span class="hljs-subst">${index}</span>)`</span>
      }
    }

    path.<span class="hljs-title function_">unshift</span>(selector)
    current = current.<span class="hljs-property">parentNode</span>

    <span class="hljs-comment">// å¦‚æœåˆ°è¾¾äº†æœ‰ id çš„çˆ¶å…ƒç´ ï¼Œå¯ä»¥åœæ­¢</span>
    <span class="hljs-keyword">if</span> (current &amp;&amp; current.<span class="hljs-property">id</span>) {
      path.<span class="hljs-title function_">unshift</span>(<span class="hljs-string">`#<span class="hljs-subst">${current.id}</span>`</span>)
      <span class="hljs-keyword">break</span>
    }
  }

  <span class="hljs-keyword">return</span> path.<span class="hljs-title function_">join</span>(<span class="hljs-string">' &gt; '</span>)
}
</code></pre>
<h3 data-id="heading-29">å†™åœ¨æœ€å</h3>
<p>è¿™å¥—æ–¹æ¡ˆä»æœ€åˆçš„æƒ³æ³•åˆ°ç°åœ¨çš„å®ç°,å…¶å®èµ°äº†ä¸å°‘å¼¯è·¯ã€‚æœ€å¼€å§‹æˆ‘ä»¬ä¹Ÿæƒ³è¿‡ç”¨å›¾åƒè¯†åˆ«,æ¯•ç«Ÿçœ‹èµ·æ¥å¾ˆ"AI"å¾ˆ"é«˜çº§",ä½†å®é™…è·‘ä¸‹æ¥å‘ç°æ ¹æœ¬ä¸é è°±â€”â€”è®¾è®¡ç¨¿æ”¹ä¸ªæ–‡æ¡ˆã€æ¢ä¸ªé¢œè‰²,ç®—æ³•å°±å¾—é‡æ–°è®­ç»ƒã€‚åæ¥æ‰æƒ³æ˜ç™½,æ—¢ç„¶è®¾è®¡ç¨¿å’ŒDOMéƒ½æ˜¯ç»“æ„åŒ–æ•°æ®,ä¸ºä»€ä¹ˆä¸ç›´æ¥å¯¹æ¯”ç»“æ„å‘¢?</p>
<p>æ•´ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒå…¶å®å°±åšäº†ä¸€ä»¶äº‹:æŠŠä¸¤ä¸ªçœ‹èµ·æ¥å®Œå…¨ä¸åŒçš„ä¸œè¥¿(è®¾è®¡ç¨¿çš„JSONå’ŒHTMLçš„DOMæ ‘),é€šè¿‡ä¸€ç³»åˆ—å½’ä¸€åŒ–å¤„ç†,å˜æˆå¯ä»¥ç›´æ¥æ¯”å¯¹çš„åŒæ„æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­æœ€å¤§çš„æ„Ÿå—æ˜¯,<strong>å‰ç«¯å¼€å‘å’ŒUIè®¾è®¡ä¹‹é—´çš„gap,æœ¬è´¨ä¸Šæ˜¯ä¸¤å¥—ä¸åŒçš„æ¸²æŸ“è§„åˆ™åœ¨äº’ç›¸è¾ƒåŠ²</strong>ã€‚CSSçš„marginæŠ˜å ã€è¡Œé«˜è®¡ç®—ã€ç›’æ¨¡å‹,æ¯ä¸€ä¸ªç»†èŠ‚éƒ½å¯èƒ½è®©è®¾è®¡ç¨¿"çœ‹èµ·æ¥ä¸€æ ·"çš„ä¸¤ä¸ªå…ƒç´ åœ¨ä»£ç å±‚é¢å®Œå…¨ä¸åŒã€‚</p>
<p>è¯´å®è¯,å½“å‰40%-60%çš„åŒ¹é…å‡†ç¡®ç‡è¿˜è¿œè°ˆä¸ä¸Šå®Œç¾,ä½†è‡³å°‘è®©æˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªæ–¹å‘:è‡ªåŠ¨åŒ–UIèµ°æŸ¥çš„å…³é”®ä¸åœ¨äºè¿½æ±‚ç™¾åˆ†ç™¾çš„å‡†ç¡®,è€Œåœ¨äºå»ºç«‹ä¸€å¥—å¯é‡åŒ–ã€å¯è¿½æº¯çš„æ¯”å¯¹æ ‡å‡†ã€‚å°±åƒå•å…ƒæµ‹è¯•ä¸èƒ½ä¿è¯ä»£ç é›¶bug,ä½†èƒ½è®©æˆ‘ä»¬å¯¹ä»£ç è´¨é‡æœ‰ä¸ªåŸºæœ¬çš„ä¿¡å¿ƒã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯,è¿™å¥—æ–¹æ¡ˆè®©æˆ‘ä»¬é‡æ–°æ€è€ƒäº†å‰ç«¯å·¥ç¨‹åŒ–çš„æœ¬è´¨ã€‚è¿‡å»æˆ‘ä»¬æ€»è¯´è¦ææ•ˆã€è¦è‡ªåŠ¨åŒ–,ä½†å¾€å¾€åªç›¯ç€ä»£ç æ„å»ºã€æ‰“åŒ…éƒ¨ç½²è¿™äº›ç¯èŠ‚ã€‚UIè¿˜åŸåº¦è¿™ä»¶äº‹ä¸€ç›´æ˜¯ä¸ª"ç„å­¦"â€”â€”å…¨å‡­å¼€å‘çš„ç»éªŒå’Œè´£ä»»å¿ƒã€‚ç°åœ¨æˆ‘ä»¬æŠŠå®ƒé‡åŒ–äº†ã€æ ‡å‡†åŒ–äº†,è¿™æ„å‘³ç€æ•´ä¸ªç ”å‘æµç¨‹å¯ä»¥å¾€å‰å†æ¨ä¸€æ­¥:ä¸ä»…è¦ä¿è¯ä»£ç èƒ½è·‘,è¿˜è¦ä¿è¯UIèƒ½è¿‡ã€‚</p>
<p>å½“ç„¶,æŠ€æœ¯æ–¹æ¡ˆæ°¸è¿œåªæ˜¯å·¥å…·ã€‚çœŸæ­£èƒ½æå‡å›¢é˜Ÿåä½œæ•ˆç‡çš„,æ˜¯å¤§å®¶å¯¹è´¨é‡çš„å…±è¯†ã€‚è¿™å¥—è‡ªåŠ¨åŒ–èµ°æŸ¥å¦‚æœåªæ˜¯ç”¨æ¥"æŠ“bug",é‚£ä»·å€¼å°±å¤ªæœ‰é™äº†ã€‚æˆ‘æ›´å¸Œæœ›å®ƒèƒ½æˆä¸ºä¸€é¢é•œå­,è®©å‰ç«¯çœ‹åˆ°è‡ªå·±å¯¹è®¾è®¡çš„ç†è§£åå·®,è®©è®¾è®¡çœ‹åˆ°è‡ªå·±ç¨¿å­çš„ä¸è§„èŒƒä¹‹å¤„,æœ€ç»ˆæ¨åŠ¨åŒæ–¹åœ¨è§„èŒƒä¸Šè¾¾æˆæ›´å¤šå…±è¯†ã€‚</p>
<p>æŠ€æœ¯çš„æ„ä¹‰ä»æ¥ä¸åœ¨äºè§£å†³æ‰€æœ‰é—®é¢˜,è€Œåœ¨äºè®©é—®é¢˜å˜å¾—å¯è§ã€å¯é‡åŒ–ã€å¯æ”¹è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OCRå‘Šåˆ«ä»˜è´¹ï¼åˆ†äº«ä¸¤æ¬¾å¯éƒ¨ç½²çš„å¼€æºå·¥å…·]]></title>    <link>https://juejin.cn/post/7574722364353921033</link>    <guid>https://juejin.cn/post/7574722364353921033</guid>    <pubDate>2025-11-21T01:38:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574722364353921033" data-draft-id="7574722364353904649" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OCRå‘Šåˆ«ä»˜è´¹ï¼åˆ†äº«ä¸¤æ¬¾å¯éƒ¨ç½²çš„å¼€æºå·¥å…·"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-21T01:38:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SimonKing"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056904584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OCRå‘Šåˆ«ä»˜è´¹ï¼åˆ†äº«ä¸¤æ¬¾å¯éƒ¨ç½²çš„å¼€æºå·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056904584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SimonKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T01:38:50.000Z" title="Fri Nov 21 2025 01:38:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ç¼–ç¨‹æœèŠ±å¤•æ‹¾ã€‘ï¼Œå¯è·å–é¦–å‘å†…å®¹ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/146340e808894ba1bd0511cf2db32e42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=VzFEUgJb6aW8JMFR%2FBWdaukR82A%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">01 å¼•è¨€</h2>
<p><code>OCR</code>æ–‡å­—è¯†åˆ«å·²ç»åŸºæœ¬è¦†ç›–æˆ‘ä»¬çš„æ—¥å¸¸çš„èŠå¤©å·¥å…·ï¼Œå¦‚å¾®ä¿¡ã€<code>QQ</code>ç­‰éƒ½æœ‰æˆªå›¾è¯†åˆ«æ–‡å­—ç”šè‡³ç›´æ¥ä»å›¾ç‰‡å¯ä»¥å¤åˆ¶æ–‡å­—ã€‚å¼€å‘é¡¹ç›®ä¸­ä½¿ç”¨<code>OCR</code>å›¾ç‰‡è¯†åˆ«ã€æ–‡æ¡ˆæå–ç­‰ç»å¸¸ç”¨åˆ°ã€‚å¤§å¤šæ•°å°å‹ä¼ä¸šéƒ½ä¼šé€‰æ‹©äº‘å‚å•†çš„æ–‡å­—è¯†åˆ«ï¼Œå¦‚é˜¿é‡Œäº‘ã€ç™¾åº¦äº‘ã€è…¾è®¯äº‘ç­‰çš„è¯†åˆ«åŠŸèƒ½ã€‚</p>
<p>é‚£æœ‰æ²¡æœ‰ç™½å«–çš„<code>OCR</code>å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œä½†æ˜¯å¾ˆå¤šçš„è¯†åˆ«ç‡å¹¶ä¸é«˜ã€‚ä»Šå¤©ä»‹ç»ä¸¤æ¬¾è¯†åˆ«ç‡è¾ƒé«˜çš„<code>OCR</code>é¡¹ç›®ï¼Œå…³é”®æ˜¯å¯ä»¥éƒ¨ç½²ï¼Œåº”ç”¨åˆ°ä¸šåŠ¡é¡¹ç›®ä¸­ã€‚</p>
<h2 data-id="heading-1">02 Umi-OCR</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/999310fde1b2445c9098f65cbad819b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=HFyDcSdknDDi7XA8lxpU8gzTeGk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 ç®€ä»‹</h3>
<p><strong><code>Umi-OCR</code></strong> æ˜¯ä¸€ä¸ªå…è´¹ã€å¼€æºã€å¯ç¦»çº¿çš„ OCR æ–‡å­—è¯†åˆ«å·¥å…·ï¼Œç”±å¼€å‘è€… <code>hiroi-sora</code> ä½¿ç”¨ <code>Python</code> ç¼–å†™ã€‚å®ƒçš„åå­—ä¸­ â€œ<code>Umi</code>â€ åœ¨æ—¥è¯­é‡Œæ˜¯â€œæµ·â€çš„æ„æ€ï¼Œå¯“æ„ç€å…¶â€œæµ·çº³ç™¾å·â€çš„ç‰¹æ€§ã€‚</p>
<p>è¯¥é¡¹ç›®æ˜¯åŸºäºç™¾åº¦å¼€æºçš„<code>PaddleOCR</code>å¼€å‘ï¼Œå¯¹ä¸­æ–‡å’Œè‹±æ–‡çš„è¯†åˆ«å‡†ç¡®ç‡éå¸¸é«˜ï¼ŒåŒæ—¶æ”¯æŒå¤šå›½è¯­è¨€ã€‚å®ƒçš„ä¸»è¦ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªç®€å•æ˜“ç”¨ã€åŠŸèƒ½å¼ºå¤§ä¸”å®Œå…¨ç¦»çº¿çš„å›¾ç‰‡æ–‡å­—è¯†åˆ«è§£å†³æ–¹æ¡ˆï¼Œå®Œç¾ä¿æŠ¤ç”¨æˆ·éšç§ï¼Œå› ä¸ºæ‰€æœ‰è¯†åˆ«è¿‡ç¨‹éƒ½åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå®Œæˆï¼Œæ— éœ€è¿æ¥ä»»ä½•å¤–éƒ¨æœåŠ¡å™¨ã€‚</p>
<p>ä¸ä»…æ”¯æŒæœ¬åœ°éƒ¨ç½²ï¼Œè¿˜æ”¯æŒ<code>windows</code>ç³»ç»Ÿï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0958e5823ba4123b390c9284c525539~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=6GsFwzhE45mZZ1B5t2vtB3eZl%2BI%3D" alt="" loading="lazy"/></p>
<p><code>windows</code>ç‰ˆæœ¬ä½œä¸ºæ—¥å¸¸ä½¿ç”¨çš„å·¥å…·å¤§å®¶å¯ä»¥è‡ªè¡Œæ¢ç´¢ã€‚ä¸ºäº†æ¥å…¥é¡¹ç›®å¼€å‘ï¼Œæˆ‘ä»¬ä¸»è¦äº†è§£ä¸€ä¸‹æœ¬åœ°éƒ¨ç½²çš„æ–¹å¼ã€‚</p>
<p><code>GitHub</code>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhiroi-sora%2FUmi-OCR" target="_blank" title="https://github.com/hiroi-sora/Umi-OCR" ref="nofollow noopener noreferrer">github.com/hiroi-sora/â€¦</a></p>
<h3 data-id="heading-3">2.2 éƒ¨ç½²</h3>
<p><code>linux</code>éƒ¨ç½²æ˜¯æ–°çš„é¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhiroi-sora%2FUmi-OCR_runtime_linux" target="_blank" title="https://github.com/hiroi-sora/Umi-OCR_runtime_linux" ref="nofollow noopener noreferrer">github.com/hiroi-sora/â€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03af51e6f0f546eabd5fc8c6115b09a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=f7sS3FNU2PfIviAfunAczjZkWoE%3D" alt="" loading="lazy"/></p>
<p>ç”±äºå®˜æ–¹ç»™å‡ºçš„æµ‹è¯•çš„ç³»ç»Ÿç±»å‹å¹¶æ²¡æœ‰<code>Centos</code>ã€‚å°è¯•é€šè¿‡<code>Centos8</code>éƒ¨ç½²ï¼Œç»“æœå¤±è´¥ï¼šç¼ºå°‘ä¸€äº›åŸºæœ¬ç»„ä»¶ï¼Œå‡çº§ä¸æˆåŠŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bdd5f1dd90c4eceadf92cc3c85ba03c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=vC6xhDqxaXehOyTbmIGBkv%2FGeEg%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>Docker</code>éƒ¨ç½²ã€‚</p>
<p><code>Docker</code>éƒ¨ç½²çš„åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhiroi-sora%2FUmi-OCR_runtime_linux%2Fblob%2Fmain%2FREADME-docker.md" target="_blank" title="https://github.com/hiroi-sora/Umi-OCR_runtime_linux/blob/main/README-docker.md" ref="nofollow noopener noreferrer">github.com/hiroi-sora/â€¦</a></p>
<p>å®˜æ–¹æ–‡æ¡£ä»‹ç»çš„å¾ˆæ˜ç™½äº†ã€‚</p>
<p><strong>æ£€æŸ¥ä¸»æœºCUP</strong></p>
<p>å› ä¸ºç›®å‰ä¸»æœºçš„CPUåªæ”¯æŒ<code>AVX</code>æŒ‡ä»¤é›†ã€‚</p>
<pre><code class="hljs language-sh" lang="sh">lscpu | grep avx
</code></pre>
<p>å¦‚æœè¾“å‡ºäº†ç±»ä¼¼å¦‚ä¸‹çš„ç»“æœï¼Œé‚£ä¹ˆå¯ä»¥ç»§ç»­éƒ¨ç½²ã€‚å¦‚æœæ²¡æœ‰åˆ™æ— æ³•éƒ¨ç½²</p>
<pre><code class="hljs language-sh" lang="sh">Flags:          ... avx ... avx2 ...
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcda6b2abea643db83a9f0b40896338a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=28nsAtJAbnGu8069GdGFrVKN3ig%3D" alt="" loading="lazy"/></p>
<p>æ‰€ä»¥å°ç¼–çš„æœºå™¨æ˜¯å¯ä»¥éƒ¨ç½²çš„ã€‚</p>
<p><strong>æ„å»ºé•œåƒ</strong></p>
<p>ç”±äºè¿œç¨‹é•œåƒä»“åº“é‡Œé¢æ²¡æœ‰ä¸Šä¼ ï¼Œéœ€è¦ä½¿ç”¨<code>Dockerfile</code>è‡ªè¡Œæ„å»ºã€‚</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># æ‹‰å–Dockerfileæ–‡ä»¶</span>
wget https://raw.githubusercontent.com/hiroi-sora/Umi-OCR_runtime_linux/main/Dockerfile

<span class="hljs-comment"># æ„å»ºé•œåƒ</span>
docker build -t umi-ocr-paddle .
</code></pre>
<p><code>umi-ocr-paddle</code>è¡¨ç¤ºæ„å»ºçš„é•œåƒåç§°ã€‚</p>
<p><strong>å¯åŠ¨å®¹å™¨</strong></p>
<p>å®¹å™¨çš„è¿è¡Œæ”¯æŒæ— å¤´æ¨¡å¼å’ŒGUIæ¨¡å¼ã€‚å› ä¸ºæˆ‘ä»¬æ˜¯ä¸ºäº†é¡¹ç›®çš„è°ƒç”¨ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨æ‚Ÿé€æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-sh" lang="sh">docker run -d --name umi-ocr \
    -e HEADLESS=<span class="hljs-literal">true</span> \
    -p 1224:1224 \
    umi-ocr-paddle
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>è®¾ç½®å®¹å™¨åç§°ä¸º <code>umi-ocr</code> ã€‚ä½ ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºä»»æ„åç§°ã€‚</li>
<li>è®¾ç½®ç¯å¢ƒå˜é‡ <code>-e HEADLESS=true</code> å¯ç”¨æ— å¤´æ¨¡å¼ã€‚</li>
<li>è®¾ç½®ç«¯å£è½¬å‘ <code>-p xxxx:1224</code> ï¼Œå°†å®¹å™¨å†…çš„1224ç«¯å£è½¬å‘ç»™ä¸»æœº<code>xxxx</code>ç«¯å£ã€‚</li>
<li>ä½¿ç”¨çš„é•œåƒä¸º <code>umi-ocr-paddle</code> ã€‚</li>
</ul>
<h3 data-id="heading-4">2.3 æ¥å£è°ƒç”¨</h3>
<p>å®˜æ–¹æä¾›äº†HTTPæ¥å£æ‰‹å†Œï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhiroi-sora%2FUmi-OCR%2Fblob%2Fmain%2Fdocs%2Fhttp%2FREADME.md" target="_blank" title="https://github.com/hiroi-sora/Umi-OCR/blob/main/docs/http/README.md" ref="nofollow noopener noreferrer">github.com/hiroi-sora/â€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ae10ad922ff470cac7aca23030178e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=G4uMM0QtASuRhhavrR1QxEZaY4I%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬è¿™é‡Œä»¥<code>å›¾ç‰‡OCRï¼šBase64è¯†åˆ«</code>ä¸ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f985853a4c44771ac98cb74fd349fb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=0OMHgkInb1uQo13Z3VTKYLH4%2BZ0%3D" alt="" loading="lazy"/></p>
<p><strong>Javaæ¡ˆä¾‹</strong></p>
<pre><code class="hljs language-java" lang="java"> <span class="hljs-meta">@Test</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">test04</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"C:\\Users\\ws\\Desktop\\00.jpg"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">encode</span> <span class="hljs-operator">=</span> Base64.encode(Files.toByteArray(file));

    <span class="hljs-type">JSONObject</span> <span class="hljs-variable">jsonObject</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();
    jsonObject.put(<span class="hljs-string">"base64"</span>, encode);

    <span class="hljs-type">JSONObject</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();
<span class="hljs-comment">//        item.put("ocr.language", "models/config_chinese.txt");</span>
<span class="hljs-comment">//        item.put("ocr.cls", true);</span>
<span class="hljs-comment">//        item.put("ocr.limit_side_len", 4320);</span>
<span class="hljs-comment">//        item.put("tbpu.parser", "multi_none");</span>
    item.put(<span class="hljs-string">"data.format"</span>, <span class="hljs-string">"text"</span>);
<span class="hljs-comment">//        item.put("data.format", "dict");</span>
    jsonObject.put(<span class="hljs-string">"options"</span>, item);

    <span class="hljs-type">String</span> <span class="hljs-variable">post</span> <span class="hljs-operator">=</span> HttpUtil.post(<span class="hljs-string">"http://127.0.0.1:1224/api/ocr"</span>, JSON.toJSONString(jsonObject));
    System.out.println(post);
    System.out.println(<span class="hljs-string">"----------------------------------------------"</span>);
    System.out.println(UnicodeUtil.toString(post));
}
</code></pre>
<p><strong>ç»“æœ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23c4a5c1e95a4c0894e0eb1487d9ab25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=zqj%2F9i%2F7PtjNwIr4%2F7UQ5V2wtWg%3D" alt="" loading="lazy"/></p>
<p>ç»“æœæ˜¯è¯†åˆ«å‡ºæ¥äº†ï¼Œä½†æ˜¯æœ‰ä¸ªå°é—®é¢˜ã€‚ç¬¬ä¸€è¡Œè¾“å‡ºæ˜¯<code>unicode</code>ï¼Œéœ€è¦æˆ‘ä»¬å°†<code>unicode</code>è½¬æˆä¸­æ–‡ã€‚</p>
<h2 data-id="heading-5">03 TrWebOCR</h2>
<h3 data-id="heading-6">3.1 ç®€ä»‹</h3>
<p><code>TrWebOCR</code>åŸºäºå¼€æºé¡¹ç›® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmyhub%2Ftr" target="_blank" title="https://github.com/myhub/tr" ref="nofollow noopener noreferrer">Tr</a> æ„å»ºï¼Œç›®å‰å·²ç»åœæ›´äº†ï¼Œ<code>tr</code>å®˜æ–¹è¯´äº†é¡¹ç›®è½¬ä¸ºç ”ç©¶æ€§é¡¹ç›®ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/991372fe0d5a4952b503012dc63eb140~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=m0azwTio4Bp2%2BEW0h%2Bau6EVQczA%3D" alt="" loading="lazy"/></p>
<p>ä½†æ˜¯å®ƒä»ç„¶æ˜¯ä¸€æ¬¾å¥½ç”¨çš„<code>OCR</code>å·¥å…·ã€‚æ”¯æŒçš„å¹³å°æ¯”è¾ƒå¤šï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a319dc6a1e574e9680b24a1fd0ee72ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=f2MbOSyRNHK0K6tHx%2FlwOuN%2BMsM%3D" alt="" loading="lazy"/></p>
<p><code>GitHub</code>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falisen39%2FTrWebOCR" target="_blank" title="https://github.com/alisen39/TrWebOCR" ref="nofollow noopener noreferrer">github.com/alisen39/Trâ€¦</a></p>
<h3 data-id="heading-7">3.2 éƒ¨ç½²</h3>
<p>æˆ‘ä»¬åŒæ ·ä»¥Dockerçš„å½¢å¼éƒ¨ç½²ã€‚è¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œå¯ä»¥è‡ªè¡Œæ„å»ºé•œåƒï¼Œä¹Ÿå¯ä»¥æ‹‰å–é•œåƒã€‚</p>
<p><strong>æ„å»ºé•œåƒ</strong></p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># dockerfile æ„å»º</span>
docker build -t trwebocr:latest .

<span class="hljs-comment"># è¿è¡Œé•œåƒ</span>
docker run -itd --<span class="hljs-built_in">rm</span> -p 8089:8089 --name trwebocr trwebocr:latest 
</code></pre>
<p><strong>è¿œç¨‹é•œåƒ</strong></p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># ä» dockerhub pull</span>
docker pull mmmz/trwebocr:latest

<span class="hljs-comment"># è¿è¡Œé•œåƒ</span>
docker run -itd --<span class="hljs-built_in">rm</span> -p 8089:8089 --name trwebocr mmmz/trwebocr:latest 
</code></pre>
<p>è®¿é—®<code>IP</code>+ç«¯å£ï¼Œæä¾›äº†ç½‘é¡µç«¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cd7b3a0e21e42be8c98687ba3035ebf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=XkEOrVx0ZMf%2Fogm5%2FR0eS2yzDxU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.3 æ¥å£è°ƒç”¨</h3>
<p>æˆ‘ä»¬å…ˆè¯•è¯•ç½‘é¡µç«¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/871c7dc091a348069d763aa5898a35ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=4nPC8oRkMtTfYv3BNNFR71ItmPQ%3D" alt="" loading="lazy"/></p>
<p>æ¥å£æ–‡æ¡£åœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falisen39%2FTrWebOCR%2Fwiki%2F%25E6%258E%25A5%25E5%258F%25A3%25E6%2596%2587%25E6%25A1%25A3" target="_blank" title="https://github.com/alisen39/TrWebOCR/wiki/%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3" ref="nofollow noopener noreferrer">github.com/alisen39/Trâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de44fa7aae104cbea998a97e95ddc94a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=mQ0JmcEqB2KZSqfhvL4EBWpOdjE%3D" alt="" loading="lazy"/></p>
<p><strong>Javaæ¡ˆä¾‹</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">test07</span><span class="hljs-params">()</span>  {
    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">"C:\\Users\\ws\\Desktop\\34.png"</span>);

    <span class="hljs-type">JSONObject</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();
    item.put(<span class="hljs-string">"file"</span>, file);
    item.put(<span class="hljs-string">"is_draw"</span>, <span class="hljs-number">0</span>);

    <span class="hljs-type">String</span> <span class="hljs-variable">post</span> <span class="hljs-operator">=</span> HttpUtil.post(<span class="hljs-string">"http://127.0.0.1:8089/api/tr-run/"</span>, item);
    System.out.println(post);
    System.out.println(<span class="hljs-string">"----------------------------------------------"</span>);
    System.out.println(UnicodeUtil.toString(post));
}
</code></pre>
<p><strong>ç»“æœ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a70ba047770245cd93f608161a7cdbcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764293930&amp;x-signature=o9sBNJ8WeLEB8qUAB9YivWgk9UE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">04 å°ç»“</h2>
<p>ç¬¬äºŒæ¬¾è™½ç„¶åœæ›´ï¼Œä½†æ˜¯å·²æœ‰çš„åŠŸèƒ½å¯ä»¥æ»¡è¶³å¸¸ç”¨çš„OCRè¯†åˆ«ã€‚è€Œç¬¬ä¸€æ¬¾ä¸€ç›´æ´»è·ƒåœ¨<code>GitHub</code>ä¸Šï¼Œæ˜¯ä¸€æ¬¾éå¸¸å€¼å¾—å…³æ³¨çš„é¡¹ç›®ï¼Œä¸æ–­çš„è¿­ä»£æ–°çš„åŠŸèƒ½ã€‚æœ‰ç‰¹æ®Šè¦æ±‚çš„OCRå¯ä»¥åˆ©ç”¨å¼€æºæ¨¡å‹è‡ªè¡Œè®­ç»ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ« Vue å¤šåˆ†è¾¨ç‡é€‚é…çƒ¦æ¼ï¼švfit è®©å…ƒç´ å®šä½ â€œä¸æ»‘â€ è·¨è®¾å¤‡]]></title>    <link>https://juejin.cn/post/7574992086715219983</link>    <guid>https://juejin.cn/post/7574992086715219983</guid>    <pubDate>2025-11-21T10:26:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574992086715219983" data-draft-id="7574803558878920719" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ« Vue å¤šåˆ†è¾¨ç‡é€‚é…çƒ¦æ¼ï¼švfit è®©å…ƒç´ å®šä½ â€œä¸æ»‘â€ è·¨è®¾å¤‡ "/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-21T10:26:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€é¢—çƒ‚åœŸè±†"/> <meta itemprop="url" content="https://juejin.cn/user/764915822371912"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ« Vue å¤šåˆ†è¾¨ç‡é€‚é…çƒ¦æ¼ï¼švfit è®©å…ƒç´ å®šä½ â€œä¸æ»‘â€ è·¨è®¾å¤‡ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/764915822371912/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€é¢—çƒ‚åœŸè±†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T10:26:54.000Z" title="Fri Nov 21 2025 10:26:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5648e0388884f619ad605cedbb0b2c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6aKX54OC5Zyf6LGG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764325614&amp;x-signature=vMD0rHwEAGQO%2BQMfMoK04HyJmAQ%3D" alt="pre-sales-poster.jpg" width="100%" loading="lazy"/>
åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œâ€œå¤šåˆ†è¾¨ç‡é€‚é…â€ä¸€ç›´æ˜¯ä¸ªç»•ä¸å¼€çš„åã€‚å°¤å…¶æ˜¯Vueé¡¹ç›®ï¼Œé¢å¯¹ä»æ‰‹æœºåˆ°å¤§å±çš„å„ç§è®¾å¤‡ï¼Œæ—¢è¦ä¿è¯å…ƒç´ æ¯”ä¾‹ä¸å˜ï¼Œåˆè¦è®©ä½ç½®ç²¾å‡†ï¼Œå¾€å¾€éœ€è¦æ‰‹å†™å¤§é‡ç¼©æ”¾è®¡ç®—æˆ–åª’ä½“æŸ¥è¯¢ï¼Œä»£ç å†—ä½™ä¸”éš¾ç»´æŠ¤ã€‚
<p>ä»Šå¤©æ¨èä¸€ä¸ªä¸“ä¸ºVue 3è®¾è®¡çš„è½»é‡æ–¹æ¡ˆâ€”â€”<strong>vfit</strong>ï¼Œé€šè¿‡â€œå…¨å±€ç¼©æ”¾ç®¡ç†+ç»„ä»¶åŒ–å®šä½â€çš„æ€è·¯ï¼Œè®©é€‚é…å·¥ä½œå˜å¾—ç®€å•å¯æ§ã€‚</p>
<h4 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦vfitï¼Ÿ</h4>
<p>ä¼ ç»Ÿé€‚é…æ–¹æ¡ˆï¼ˆå¦‚remã€vw/vhï¼‰çš„ç—›ç‚¹åœ¨äºï¼š</p>
<ul>
<li>â€¢ ä»…èƒ½å¤„ç†â€œå¤§å°â€é€‚é…ï¼Œéš¾ä»¥ä¿è¯â€œä½ç½®â€åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„ä¸€è‡´æ€§ï¼›</li>
<li>â€¢ éœ€æ‰‹åŠ¨ç»´æŠ¤åŸºå‡†å€¼ï¼Œç¼©æ”¾é€»è¾‘ä¸ä¸šåŠ¡ä»£ç è€¦åˆï¼›</li>
<li>â€¢ å¯¹å›ºå®šåƒç´ å¸ƒå±€ï¼ˆå¦‚è®¾è®¡ç¨¿ä¸Šç²¾ç¡®åˆ°pxçš„å®šä½ï¼‰æ”¯æŒä¸å‹å¥½ã€‚</li>
</ul>
<p>vfitçš„è§£å†³æ€è·¯æ›´ç›´æ¥ï¼š</p>
<ol>
<li>ä»¥è®¾è®¡ç¨¿å®½é«˜ï¼ˆå¦‚1920Ã—1080ï¼‰ä¸ºåŸºå‡†ï¼Œå®æ—¶è®¡ç®—å®¹å™¨çš„ç¼©æ”¾æ¯”ä¾‹ï¼ˆ<code>scale = å®¹å™¨å°ºå¯¸ / è®¾è®¡ç¨¿å°ºå¯¸</code>ï¼‰ï¼›</li>
<li>é€šè¿‡<code>FitContainer</code>ç»„ä»¶ï¼Œæ ¹æ®ç¼©æ”¾æ¯”ä¾‹è‡ªåŠ¨è°ƒæ•´å…ƒç´ çš„ä½ç½®å’Œå¤§å°ï¼ŒåŒæ—¶æ”¯æŒä¸¤ç§å®šä½æ¨¡å¼ï¼ˆpx/%ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-1">æ ¸å¿ƒèƒ½åŠ›è§£æ</h4>
<ol>
<li>
<p>Â <strong>çµæ´»çš„ç¼©æ”¾æ¨¡å¼</strong><br/>
vfitæä¾›3ç§ç¼©æ”¾ç­–ç•¥ï¼Œè¦†ç›–ç»å¤§å¤šæ•°åœºæ™¯ï¼š</p>
</li>
<li>
<ul>
<li>â€¢Â <code>width</code>ï¼šæŒ‰å®¹å™¨å®½åº¦ç¼©æ”¾ï¼ˆ<code>scale = å®¹å™¨å®½ / è®¾è®¡ç¨¿å®½</code>ï¼‰ï¼›</li>
<li>â€¢Â <code>height</code>ï¼šæŒ‰å®¹å™¨é«˜åº¦ç¼©æ”¾ï¼ˆ<code>scale = å®¹å™¨é«˜ / è®¾è®¡ç¨¿é«˜</code>ï¼‰ï¼›</li>
<li>â€¢Â <code>auto</code>ï¼šè‡ªåŠ¨å¯¹æ¯”å®¹å™¨å®½é«˜æ¯”ä¸è®¾è®¡ç¨¿å®½é«˜æ¯”ï¼Œé€‰æ‹©æ›´åˆé€‚çš„ç»´åº¦ç¼©æ”¾ï¼ˆé¿å…å…ƒç´ è¢«æˆªæ–­ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>Â <strong>ç»„ä»¶åŒ–å®šä½</strong><br/>
å†…ç½®çš„<code>FitContainer</code>ç»„ä»¶æ˜¯æ ¸å¿ƒï¼Œé€šè¿‡<code>top/bottom/left/right</code>å±æ€§å®šä¹‰ä½ç½®ï¼Œé…åˆ<code>unit</code>å‚æ•°æ§åˆ¶å®šä½é€»è¾‘ï¼š</p>
<p>ç¤ºä¾‹ä»£ç ï¼ˆåƒç´ å®šä½ï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>Â Â 
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"viewport"</span>Â <span class="hljs-attr">style</span>=<span class="hljs-string">"position:Â relative;Â width:Â 100%;Â height:Â 100vh;"</span>&gt;</span>Â Â 
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">FitContainer</span>Â <span class="hljs-attr">:top</span>=<span class="hljs-string">"90"</span>Â <span class="hljs-attr">:left</span>=<span class="hljs-string">"90"</span>Â <span class="hljs-attr">unit</span>=<span class="hljs-string">"px"</span>&gt;</span>Â Â 
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>å›ºå®šåƒç´ å¸ƒå±€<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>Â Â 
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">FitContainer</span>&gt;</span>Â Â 
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>Â Â 
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>Â Â 
</code></pre>
</li>
<li>
<ul>
<li>â€¢Â <code>unit="%"</code>ï¼šä½ç½®åŸºäºå®¹å™¨ç™¾åˆ†æ¯”ï¼Œä¸å—ç¼©æ”¾å½±å“ï¼ˆé€‚åˆå±…ä¸­ã€ç›¸å¯¹å¸ƒå±€ï¼‰ï¼›</li>
<li>â€¢Â <code>unit="px"</code>ï¼šä½ç½®ä¼šè‡ªåŠ¨ä¹˜ä»¥å½“å‰ç¼©æ”¾å€¼ï¼ˆé€‚åˆå›ºå®šåƒç´ å®šä½ï¼Œå¦‚è®¾è®¡ç¨¿ä¸Šleft:90pxï¼Œç¼©æ”¾åå®é™…ä½ç½®ä¸º90Ã—scaleï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>Â <strong>å…¨å±€ç¼©æ”¾å€¼è®¿é—®</strong><br/>
é€šè¿‡<code>useFitScale()</code>é’©å­å¯åœ¨ç»„ä»¶å†…è·å–å½“å‰ç¼©æ”¾å€¼ï¼ˆ<code>Ref&lt;number&gt;</code>ï¼‰ï¼Œæ–¹ä¾¿è‡ªå®šä¹‰ç¼©æ”¾é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â {Â useFitScaleÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vfit'</span>Â Â 

<span class="hljs-keyword">const</span>Â scaleÂ =Â <span class="hljs-title function_">useFitScale</span>()Â Â 
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ç¼©æ”¾æ¯”ä¾‹ï¼š'</span>,Â scale.<span class="hljs-property">value</span>)Â Â 
</code></pre>
</li>
</ol>
<h4 data-id="heading-2">ä¸Šæ‰‹æˆæœ¬æä½</h4>
<p>å®‰è£…åˆå§‹åŒ–ä»…éœ€ä¸¤æ­¥ï¼š</p>
<pre><code class="hljs language-css" lang="css">npmÂ <span class="hljs-selector-tag">i</span>Â vfitÂ Â 
</code></pre>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â main.tsÂ Â </span>
<span class="hljs-keyword">import</span>Â {Â createFitScaleÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vfit'</span>Â Â 
<span class="hljs-keyword">import</span>Â <span class="hljs-string">'vfit/style.css'</span>Â Â 

app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createFitScale</span>({Â Â 
Â Â <span class="hljs-attr">target</span>:Â <span class="hljs-string">'#app'</span>,Â <span class="hljs-comment">//Â é»˜è®¤ä¸º#appï¼Œå¯æŒ‡å®šå…¶ä»–å®¹å™¨Â Â </span>
Â Â <span class="hljs-attr">designWidth</span>:Â <span class="hljs-number">1920</span>,Â <span class="hljs-comment">//Â è®¾è®¡ç¨¿å®½åº¦ï¼ˆé»˜è®¤1920ï¼‰Â Â </span>
Â Â <span class="hljs-attr">designHeight</span>:Â <span class="hljs-number">1080</span>,Â <span class="hljs-comment">//Â è®¾è®¡ç¨¿é«˜åº¦ï¼ˆé»˜è®¤1080ï¼‰Â Â </span>
Â Â <span class="hljs-attr">scaleMode</span>:Â <span class="hljs-string">'auto'</span>Â <span class="hljs-comment">//Â é»˜è®¤autoÂ Â </span>
}))Â Â 
</code></pre>
<h4 data-id="heading-3">é€‚ç”¨åœºæ™¯ä¸ä¼˜åŠ¿</h4>
<ul>
<li>Â <strong>ä¼˜åŠ¿</strong>ï¼šè½»é‡ï¼ˆæ— å†—ä½™ä¾èµ–ï¼‰ã€Vue 3åŸç”Ÿæ”¯æŒã€å®šä½ä¸ç¼©æ”¾é€»è¾‘è§£è€¦ã€APIç®€æ´ï¼›</li>
<li><strong>åœºæ™¯</strong>ï¼šæ•°æ®å¤§å±ã€ç®¡ç†ç³»ç»Ÿã€å¤šè®¾å¤‡å…¼å®¹çš„æ´»åŠ¨é¡µç­‰éœ€è¦ç²¾ç¡®å¸ƒå±€çš„åœºæ™¯ã€‚</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨ä¸ºVueé¡¹ç›®çš„å¤šåˆ†è¾¨ç‡é€‚é…å¤´ç–¼ï¼Œä¸å¦¨è¯•è¯•vfitâ€”â€”å®ƒä¸è¿½æ±‚å¤§è€Œå…¨ï¼Œåªä¸“æ³¨äºæŠŠâ€œç¼©æ”¾ä¸å®šä½â€è¿™ä»¶äº‹åšå¥½ã€‚ç°åœ¨å°±å»npmå®‰è£…ä½“éªŒï¼Œè®©é€‚é…å·¥ä½œå°‘èµ°å¼¯è·¯ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç‰›åˆ€å°è¯•ï¼šVue 3çš„å“åº”å¼ç³»ç»Ÿå’ŒProxy?]]></title>    <link>https://juejin.cn/post/7574967214128381978</link>    <guid>https://juejin.cn/post/7574967214128381978</guid>    <pubDate>2025-11-21T10:29:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574967214128381978" data-draft-id="7574967214128349210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç‰›åˆ€å°è¯•ï¼šVue 3çš„å“åº”å¼ç³»ç»Ÿå’ŒProxy?"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-21T10:29:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ArkPppp"/> <meta itemprop="url" content="https://juejin.cn/user/4484239094198752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç‰›åˆ€å°è¯•ï¼šVue 3çš„å“åº”å¼ç³»ç»Ÿå’ŒProxy?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4484239094198752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ArkPppp
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T10:29:24.000Z" title="Fri Nov 21 2025 10:29:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç‰›åˆ€å°è¯•ï¼šVue 3çš„å“åº”å¼ç³»ç»Ÿå’ŒProxy?</h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒVue3 çš„å“åº”å¼ç³»ç»Ÿä¸»è¦ä¾èµ–äº ES6 çš„Â <em>Proxy</em>Â å¯¹è±¡æ¥å®ç°ã€‚ç›¸æ¯”äº Vue2 ä½¿ç”¨çš„Â <code>Object.defineProperty</code>ï¼Œ<code>Proxy</code>æä¾›äº†æ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ›´å¥½çš„æ€§èƒ½ã€‚ä½†æˆ‘ä»¬åœ¨æ—¥å¸¸ä½¿ç”¨æ¡†æ¶æ—¶å´å¾ˆå°‘æ³¨æ„åˆ°èƒŒåçš„åº•å±‚åŸç†ï¼Œæœ¬æ–‡å°±æ—¨åœ¨é€šè¿‡é‡æ¸©Vue3çš„å“åº”å¼ç³»ç»Ÿï¼Œå­¦ä¹ å’Œå›é¡¾ES6çš„ç›¸å…³ç‰¹æ€§ã€‚</p>
<h2 data-id="heading-2">Proxyæ¦‚è¿°</h2>
<p><strong>ES6 Proxy</strong>Â æ˜¯ä¸€ç§æ–°çš„ JavaScript åŠŸèƒ½ï¼Œå®ƒå…è®¸ä½ åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œå¯ä»¥æ‹¦æˆªå’Œè‡ªå®šä¹‰åŸºæœ¬æ“ä½œï¼Œä¾‹å¦‚å±æ€§æŸ¥æ‰¾ã€èµ‹å€¼ã€æšä¸¾å’Œå‡½æ•°è°ƒç”¨ç­‰ã€‚Proxy å¯ä»¥è¢«è§†ä¸ºåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰è®¾ç½®çš„ä¸€å±‚æ‹¦æˆªï¼Œæ‰€æœ‰å¯¹è¯¥å¯¹è±¡çš„è®¿é—®éƒ½å¿…é¡»é¦–å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œè¿™æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚</p>
<h3 data-id="heading-3">è¯­æ³•</h3>
<p><code>const p = new Proxy(target, handler)</code></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%23target_2" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy#target_2" ref="nofollow noopener noreferrer"><code>target</code></a>:è¦ä½¿ç”¨Â <code>Proxy</code>Â åŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%23handler" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy#handler" ref="nofollow noopener noreferrer"><code>handler</code></a>:ä¸€ä¸ªé€šå¸¸ä»¥å‡½æ•°ä½œä¸ºå±æ€§çš„å¯¹è±¡ï¼Œå„å±æ€§ä¸­çš„å‡½æ•°åˆ†åˆ«å®šä¹‰äº†åœ¨æ‰§è¡Œå„ç§æ“ä½œæ—¶ä»£ç†Â <code>p</code>Â çš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-4">ä¾‹å­</h3>
<h4 data-id="heading-5">æ‹¦æˆªå™¨</h4>
<p>è¿™é‡Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<em>get handler</em>ï¼Œå½“ç¨‹åºè¯•å›¾è®¿é—®å¯¹è±¡æ—¶ï¼Œå¦‚æœå±æ€§å­˜åœ¨äºå¯¹è±¡ï¼Œåˆ™è¿”å›å…¶å¯¹è±¡çš„å€¼ï¼Œå¦åˆ™è¿”å›37ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¼ é€’ç»™ get æ–¹æ³•çš„å‚æ•°ï¼Œthis ä¸Šä¸‹æ–‡ç»‘å®šåœ¨handler å¯¹è±¡ä¸Šã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%2FProxy%2Fget%23target" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/get#target" ref="nofollow noopener noreferrer"><code>target</code></a>ç›®æ ‡å¯¹è±¡ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%2FProxy%2Fget%23property" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/get#property" ref="nofollow noopener noreferrer"><code>property</code></a>è¢«è·å–çš„å±æ€§åã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%2FProxy%2Fget%23receiver" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/get#receiver" ref="nofollow noopener noreferrer"><code>receiver</code></a>æ˜¯Proxy æˆ–è€…ç»§æ‰¿ Proxy çš„å¯¹è±¡</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> handler = {
  <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">obj, prop</span>) {
    <span class="hljs-keyword">return</span> prop <span class="hljs-keyword">in</span> obj ? obj[prop] : <span class="hljs-number">37</span>;
  },
};

<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>({}, handler);
p.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;
p.<span class="hljs-property">b</span> = <span class="hljs-literal">undefined</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">a</span>, p.<span class="hljs-property">b</span>); <span class="hljs-comment">// 1, undefined</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"c"</span> <span class="hljs-keyword">in</span> p, p.<span class="hljs-property">c</span>); <span class="hljs-comment">// false, 37</span>
</code></pre>
<h4 data-id="heading-6">æ— æ“ä½œè½¬å‘</h4>
<p>åœ¨ä»¥ä¸‹ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªåŸç”Ÿ JavaScript å¯¹è±¡ï¼Œä»£ç†ä¼šå°†æ‰€æœ‰åº”ç”¨åˆ°å®ƒçš„æ“ä½œè½¬å‘åˆ°è¿™ä¸ªå¯¹è±¡ä¸Šã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">let</span> target = {};
<span class="hljs-keyword">let</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {});

p.<span class="hljs-property">a</span> = <span class="hljs-number">37</span>; <span class="hljs-comment">// æ“ä½œè½¬å‘åˆ°ç›®æ ‡</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(target.<span class="hljs-property">a</span>); <span class="hljs-comment">// 37 æ“ä½œå·²ç»è¢«æ­£ç¡®åœ°è½¬å‘</span>
</code></pre>
<h4 data-id="heading-7">éªŒè¯åŠŸèƒ½</h4>
<p>é€šè¿‡ä»£ç†ï¼Œä½ å¯ä»¥è½»æ¾åœ°éªŒè¯å‘ä¸€ä¸ªå¯¹è±¡çš„ä¼ å€¼ã€‚å‘Proxyçš„handlerè®¾ç½®ç›¸å…³çš„setteræ–¹æ³•ï¼Œå¯ä»¥æ‹¦æˆªå¯¹å¯¹è±¡çš„èµ‹å€¼æ“ä½œï¼Œå¹¶ç¡®ä¿é¢„æœŸä¹‹å†…çš„ç»“æœã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¼ é€’ç»™Â <code>set()</code>Â æ–¹æ³•çš„å‚æ•°ã€‚<code>this</code>Â ç»‘å®šåœ¨ handler å¯¹è±¡ä¸Šã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%2FProxy%2Fset%23target" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set#target" ref="nofollow noopener noreferrer"><code>target</code></a>ç›®æ ‡å¯¹è±¡ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%2FProxy%2Fset%23property" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set#property" ref="nofollow noopener noreferrer"><code>property</code></a>å°†è¢«è®¾ç½®çš„å±æ€§åæˆ–Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FSymbol" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" ref="nofollow noopener noreferrer"><code>Symbol</code></a>ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%2FProxy%2Fset%23value" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set#value" ref="nofollow noopener noreferrer"><code>value</code></a>æ–°å±æ€§å€¼ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy%2FProxy%2Fset%23receiver" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/set#receiver" ref="nofollow noopener noreferrer"><code>receiver</code></a>æœ€åˆæ¥æ”¶èµ‹å€¼çš„å¯¹è±¡ã€‚é€šå¸¸æ˜¯ proxy æœ¬èº«ï¼Œä½† handler çš„ set æ–¹æ³•ä¹Ÿæœ‰å¯èƒ½åœ¨åŸå‹é“¾ä¸Šï¼Œæˆ–ä»¥å…¶ä»–æ–¹å¼è¢«é—´æ¥åœ°è°ƒç”¨ï¼ˆå› æ­¤ä¸ä¸€å®šæ˜¯ proxy æœ¬èº«ï¼‰ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// Proxy &amp; setteræ‹¦æˆªå™¨</span>

<span class="hljs-keyword">let</span> validator = {
    <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">obj, prop, value</span>) {
    <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">"age"</span>) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(value)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"The age is not an integer"</span>);
      }
      <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">200</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RangeError</span>(<span class="hljs-string">"The age seems invalid"</span>);
      }
    }

    <span class="hljs-comment">// ä¿å­˜å±æ€§å€¼çš„é»˜è®¤è¡Œä¸º!</span>
    obj[prop] = value;

    <span class="hljs-comment">// è¡¨ç¤ºæˆåŠŸ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
}

<span class="hljs-keyword">let</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>({},validator)

person.<span class="hljs-property">age</span> = <span class="hljs-number">50</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-property">age</span>)

<span class="hljs-comment">// TypeError: The age is not an integer</span>
person.<span class="hljs-property">age</span> = <span class="hljs-number">11.4</span>

<span class="hljs-comment">// RangeError: The age seems invalid</span>
person.<span class="hljs-property">age</span> = <span class="hljs-number">3000</span>
</code></pre>
<h2 data-id="heading-8">Reflectæ¦‚è¿°</h2>
<p><strong>ES6 Reflect</strong> æ˜¯ä¸€ä¸ªå†…ç½®çš„å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ï¼Œç”¨äºæ‰§è¡Œå¯æ‹¦æˆªçš„ JavaScript æ“ä½œã€‚<code>Reflect</code> å¹¶ä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå› æ­¤å®ƒæ˜¯ä¸å¯æ„é€ çš„ã€‚</p>
<p><code>Reflect</code> çš„è®¾è®¡ç›®çš„ä¹‹ä¸€æ˜¯ä¸ <code>Proxy</code> é…åˆä½¿ç”¨ã€‚<code>Proxy</code> handler ä¸­çš„æ–¹æ³•ï¼ˆå¦‚ <code>get</code>, <code>set</code>ï¼‰ä¸ <code>Reflect</code> å¯¹è±¡ä¸Šçš„æ–¹æ³•å…·æœ‰ç›¸åŒçš„åç§°å’Œå‚æ•°ã€‚è¿™ä½¿å¾—åœ¨ <code>Proxy</code> handler ä¸­è°ƒç”¨ <code>Reflect</code> å¯¹åº”çš„æ–¹æ³•æ¥æ‰§è¡Œé»˜è®¤è¡Œä¸ºå˜å¾—éå¸¸æ–¹ä¾¿å’Œè§„èŒƒã€‚</p>
<h3 data-id="heading-9">ä¸»è¦æ–¹æ³•</h3>
<p><code>Reflect</code> ä¸Šçš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼Œä¸ <code>Proxy</code> çš„ handler æ–¹æ³•ä¸€ä¸€å¯¹åº”ã€‚</p>
<ul>
<li><code>Reflect.get(target, propertyKey[, receiver])</code>: è·å–å¯¹è±¡å±æ€§çš„å€¼ï¼Œç±»ä¼¼äº <code>target[propertyKey]</code>ã€‚</li>
<li><code>Reflect.set(target, propertyKey, value[, receiver])</code>: è®¾ç½®å¯¹è±¡å±æ€§çš„å€¼ï¼Œç±»ä¼¼äº <code>target[propertyKey] = value</code>ã€‚å®ƒä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼è¡¨ç¤ºæ˜¯å¦è®¾ç½®æˆåŠŸã€‚</li>
<li><code>Reflect.has(target, propertyKey)</code>: åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§ï¼Œç±»ä¼¼äº <code>propertyKey in target</code>ã€‚</li>
<li><code>Reflect.deleteProperty(target, propertyKey)</code>: åˆ é™¤å¯¹è±¡çš„å±æ€§ï¼Œç±»ä¼¼äº <code>delete target[propertyKey]</code>ã€‚</li>
</ul>
<h3 data-id="heading-10">ä¸ºä»€ä¹ˆä¸Proxyæ˜¯æœ€ä½³æ­æ¡£ï¼Ÿ</h3>
<p>åœ¨ <code>Proxy</code> çš„æ‹¦æˆªå™¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦æ‰§è¡ŒåŸå§‹æ“ä½œã€‚ç›´æ¥ä½¿ç”¨ <code>obj[prop] = value</code> è¿™æ ·çš„è¯­æ³•è™½ç„¶å¯è¡Œï¼Œä½†å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ç»§æ‰¿å’Œ <code>getter/setter</code> æ—¶ã€‚</p>
<p><code>Reflect</code> æ–¹æ³•æä¾›äº†æ‰§è¡Œè¿™äº›é»˜è®¤æ“ä½œçš„æ ‡å‡†æ–¹å¼ï¼Œå¹¶èƒ½æ­£ç¡®å¤„ç† <code>this</code> æŒ‡å‘ï¼ˆé€šè¿‡ <code>receiver</code> å‚æ•°ï¼‰ã€‚</p>
<h4 data-id="heading-11">ä¾‹å­</h4>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Reflect.set</code> æ¥å®Œæˆå±æ€§çš„èµ‹å€¼ã€‚è¿™ç¡®ä¿äº†å³ä½¿å¯¹è±¡æœ‰ <code>setter</code>ï¼Œ<code>this</code> ä¹Ÿä¼šæ­£ç¡®åœ°æŒ‡å‘ä»£ç†å¯¹è±¡ <code>p</code>ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> target = {
    <span class="hljs-attr">_name</span>: <span class="hljs-string">'Guest'</span>,
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">name</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_name</span>;
    },
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">name</span>(<span class="hljs-params">val</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Setter called!'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_name</span> = val;
    }
};

<span class="hljs-keyword">const</span> handler = {
    <span class="hljs-title function_">set</span>(<span class="hljs-params">obj, prop, value, receiver</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Setting <span class="hljs-subst">${prop}</span> to <span class="hljs-subst">${value}</span>`</span>);
        <span class="hljs-comment">// ä½¿ç”¨ Reflect.set æ¥è°ƒç”¨åŸå§‹çš„ setterï¼Œå¹¶ç¡®ä¿ this æŒ‡å‘ receiver (ä»£ç†å¯¹è±¡ p)</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(obj, prop, value, receiver);
    }
};

<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, handler);

p.<span class="hljs-property">name</span> = <span class="hljs-string">'Admin'</span>;
<span class="hljs-comment">// è¾“å‡º:</span>
<span class="hljs-comment">// Setting name to Admin</span>
<span class="hljs-comment">// Setter called!</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">name</span>); <span class="hljs-comment">// Admin</span>

</code></pre>
<p>ä½¿ç”¨ <code>Reflect</code> ä¸ä»…ä»£ç æ›´ç®€æ´ï¼Œè€Œä¸”æ›´å¥å£®ï¼Œèƒ½å¤Ÿæ­£ç¡®å¤„ç† JavaScript å¤æ‚çš„å†…éƒ¨æœºåˆ¶ã€‚</p>
<h3 data-id="heading-12">æ‰‹åŠ¨æŒ¡å“åº”å¼</h3>
<p>äº†è§£å®ŒåŸºæœ¬çš„åŸç†åï¼Œæˆ‘ä»¬å°†â€æ‰‹åŠ¨æŒ¡â€å¼€å§‹ä¸€æ­¥æ­¥å®ç°Vueçš„å“åº”å¼ã€‚</p>
<h3 data-id="heading-13">å®ç°å•ä¸ªå€¼çš„å“åº”å¼</h3>
<p>ä¸‹é¢ä»£ç é€šè¿‡ 3 ä¸ªæ­¥éª¤ï¼Œå®ç°å¯¹ <code>total</code> æ•°æ®è¿›è¡Œå“åº”å¼å˜åŒ–ï¼š</p>
<p>â‘  åˆå§‹åŒ–ä¸€ä¸ª <code>Set</code> ç±»å‹çš„ <code>dep</code> (Dependency ä¾èµ–)å˜é‡ï¼Œç”¨æ¥å­˜æ”¾éœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨ï¼ˆ <code>effect</code> å‡½æ•°ï¼‰ï¼Œå³ä¿®æ”¹ <code>total</code>Â å€¼çš„æ–¹æ³•ï¼›</p>
<p>â‘¡ åˆ›å»º <code>track()</code> å‡½æ•°ï¼Œç”¨æ¥å°†éœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨(Effect)ä¿å­˜åˆ° <code>dep</code> å˜é‡ä¸­ï¼ˆä¹Ÿç§°æ”¶é›†å‰¯ä½œç”¨ï¼‰ï¼›</p>
<p>â‘¢ åˆ›å»º <code>trigger()</code> å‡½æ•°ï¼Œç”¨æ¥æ‰§è¡Œ <code>dep</code> å˜é‡ä¸­çš„æ‰€æœ‰å‰¯ä½œç”¨ï¼›</p>
<p>åœ¨æ¯æ¬¡ä¿®æ”¹ <code>price</code> æˆ– <code>quantity</code> åï¼Œè°ƒç”¨ <code>trigger()</code> å‡½æ•°(æ‰³æœº,è§¦å‘å™¨)æ‰§è¡Œæ‰€æœ‰å‰¯ä½œç”¨åï¼Œ <code>total</code> å€¼å°†è‡ªåŠ¨æ›´æ–°ä¸ºæœ€æ–°å€¼ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">let</span> price = <span class="hljs-number">10</span>, quantity = <span class="hljs-number">2</span>, total = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(); <span class="hljs-comment">// â‘  </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">effect</span> = (<span class="hljs-params"/>) =&gt; { total = price * quantity };
<span class="hljs-keyword">const</span> <span class="hljs-title function_">track</span> = (<span class="hljs-params"/>) =&gt; { dep.<span class="hljs-title function_">add</span>(effect) };  <span class="hljs-comment">// â‘¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">trigger</span> = (<span class="hljs-params"/>) =&gt; { dep.<span class="hljs-title function_">forEach</span>( <span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-title function_">effect</span>() )};  <span class="hljs-comment">// â‘¢</span>

<span class="hljs-title function_">track</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 0</span>
<span class="hljs-title function_">trigger</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 20</span>
price = <span class="hljs-number">20</span>;
<span class="hljs-title function_">trigger</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 40</span>

</code></pre>
<h3 data-id="heading-14">å®ç°å•ä¸ªå¯¹è±¡çš„å“åº”å¼</h3>
<p>æˆ‘ä»¬çš„å¯¹è±¡å…·æœ‰å¤šä¸ªå±æ€§ï¼Œå¹¶ä¸”æ¯ä¸ªå±æ€§éƒ½éœ€è¦è‡ªå·±çš„Â <code>dep</code>(Dependency)ã€‚</p>
<p>æˆ‘ä»¬å°†æ‰€æœ‰å‰¯ä½œç”¨ä¿å­˜åœ¨ä¸€ä¸ª <code>Set</code> é›†åˆä¸­ï¼Œè€Œè¯¥é›†åˆä¸ä¼šæœ‰é‡å¤é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ª <code>Map</code> ç±»å‹é›†åˆï¼ˆå³ <code>depsMap</code>Â ï¼‰ï¼Œå…¶ <code>key</code> ä¸ºå¯¹è±¡çš„å±æ€§ï¼ˆå¦‚ï¼š <code>price</code>Â å±æ€§ï¼‰ï¼Œ <code>value</code> ä¸ºå‰é¢ä¿å­˜å‰¯ä½œç”¨çš„ <code>Set</code> é›†åˆï¼ˆå¦‚ï¼š <code>dep</code>Â å¯¹è±¡ï¼‰</p>
<p>ä¸‹é¢çš„ä»£ç é€šè¿‡ 3 ä¸ªæ­¥éª¤ï¼Œå®ç°å¯¹ <code>total</code> æ•°æ®è¿›è¡Œå“åº”å¼å˜åŒ–ï¼š</p>
<p>â‘  åˆå§‹åŒ–ä¸€ä¸ª <code>Map</code> ç±»å‹çš„ <code>depsMap</code> å˜é‡ï¼Œç”¨æ¥ä¿å­˜æ¯ä¸ªéœ€è¦å“åº”å¼å˜åŒ–çš„å¯¹è±¡å±æ€§ï¼ˆ<code>key</code> ä¸ºå¯¹è±¡çš„å±æ€§ï¼Œ <code>value</code> ä¸ºå‰é¢ <code>Set</code> é›†åˆï¼‰ï¼›</p>
<p>â‘¡ åˆ›å»º <code>track()</code> å‡½æ•°ï¼Œç”¨æ¥å°†éœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨ä¿å­˜åˆ° <code>depsMap</code> å˜é‡ä¸­å¯¹åº”çš„å¯¹è±¡å±æ€§ä¸‹ï¼ˆä¹Ÿç§°æ”¶é›†å‰¯ä½œç”¨ï¼‰ï¼›</p>
<p>â‘¢ åˆ›å»º <code>trigger()</code> å‡½æ•°ï¼Œç”¨æ¥æ‰§è¡Œ <code>dep</code> å˜é‡ä¸­æŒ‡å®šå¯¹è±¡å±æ€§çš„æ‰€æœ‰å‰¯ä½œç”¨ï¼›</p>
<p>è¿™æ ·å°±å®ç°ç›‘å¬å¯¹è±¡çš„å“åº”å¼å˜åŒ–ï¼Œåœ¨ <code>product</code> å¯¹è±¡ä¸­çš„å±æ€§å€¼å‘ç”Ÿå˜åŒ–ï¼Œ <code>total</code> å€¼ä¹Ÿä¼šè·Ÿç€æ›´æ–°ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">let</span> product = { <span class="hljs-attr">price</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">2</span> }, total = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// 1 åˆ›å»ºä¾èµ–æ˜ å°„è¡¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">effect</span> = (<span class="hljs-params"/>) =&gt; { total = product.<span class="hljs-property">price</span> * product.<span class="hljs-property">quantity</span> };
<span class="hljs-keyword">const</span> <span class="hljs-title function_">track</span> = key =&gt; {     <span class="hljs-comment">// 2 æŸ¥æ‰¾è¯¥å±æ€§å·²æœ‰çš„ä¾èµ–,è‹¥æ²¡æœ‰åˆ™è‡ªè¡Œåˆ›å»ºä¸€ä¸ª</span>
  <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
  <span class="hljs-keyword">if</span>(!dep) {
    depsMap.<span class="hljs-title function_">set</span>(key, (dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()));
  }
  dep.<span class="hljs-title function_">add</span>(effect);
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">trigger</span> = key =&gt; {  <span class="hljs-comment">// 3 æ‰¾åˆ°è¯¥å±æ€§å¯¹åº”çš„æ‰€æœ‰ä¾èµ–,å¹¶æ‰§è¡Œç›¸å…³çš„å‰¯ä½œç”¨å‡½æ•°</span>
  <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
  <span class="hljs-keyword">if</span>(dep) {
    dep.<span class="hljs-title function_">forEach</span>( <span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-title function_">effect</span>() );
  }
};

<span class="hljs-title function_">track</span>(<span class="hljs-string">'price'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 0</span>
<span class="hljs-title function_">effect</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 20</span>
product.<span class="hljs-property">price</span> = <span class="hljs-number">20</span>;
<span class="hljs-title function_">trigger</span>(<span class="hljs-string">'price'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 40</span>

</code></pre>
<h4 data-id="heading-15"><strong>ä¸ºä»€ä¹ˆæ˜¯Mapå……å½“ä¾èµ–æ˜ å°„?</strong></h4>
<p>Mapä¸Setçš„åŒºåˆ«:</p>
<ul>
<li>Setåªå‚¨å­˜å”¯ä¸€çš„å€¼,åªæœ‰å€¼æ²¡æœ‰é”®,<strong>é‡å¤å€¼ä¸ä¼šè¢«æ·»åŠ ã€‚</strong></li>
<li>Mapå­˜å‚¨é”®å€¼å¯¹,å­˜åœ¨é”®å€¼å¯¹çš„æ˜ å°„å…³ç³»ã€‚</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// Set å­˜å‚¨å”¯ä¸€å€¼çš„é›†åˆ</span>
<span class="hljs-keyword">const</span> effects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(); <span class="hljs-comment">// åªå­˜å‚¨å€¼ï¼Œä¸å­˜å‚¨é”®</span>
effects.<span class="hljs-title function_">add</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'effect1'</span>));
effects.<span class="hljs-title function_">add</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'effect2'</span>));
effects.<span class="hljs-title function_">add</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'effect1'</span>)); <span class="hljs-comment">// é‡å¤å€¼ä¸ä¼šè¢«æ·»åŠ </span>

<span class="hljs-comment">// Set çš„å†…éƒ¨ç»“æ„</span>
[effect1å‡½æ•°, effect2å‡½æ•°]
<span class="hljs-comment">// åªæœ‰å€¼ï¼Œæ²¡æœ‰é”®</span>

<span class="hljs-comment">// Map å­˜å‚¨é”®å€¼å¯¹</span>
<span class="hljs-keyword">const</span> depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// key -&gt; value çš„æ˜ å°„å…³ç³»</span>
depsMap.<span class="hljs-title function_">set</span>(<span class="hljs-string">'price'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([effect1, effect2]));
depsMap.<span class="hljs-title function_">set</span>(<span class="hljs-string">'quantity'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([effect3]));

<span class="hljs-comment">// Map çš„å†…éƒ¨ç»“æ„</span>
{
  <span class="hljs-string">'price'</span> -&gt; <span class="hljs-title class_">Set</span>([effect1, effect2]),
  <span class="hljs-string">'quantity'</span> -&gt; <span class="hljs-title class_">Set</span>([effect3])
}
<span class="hljs-comment">// æœ‰æ˜ç¡®çš„é”®å€¼å¯¹åº”å…³ç³»</span>
</code></pre>
<p>æ•…<code>Set</code>ç”¨äºå‚¨å­˜å‰¯ä½œç”¨å‡½æ•°è¿ç®—ï¼Œ<code>Map</code>ç”¨äºä¿å­˜ä¾èµ–çš„é”®å€¼å¯¹ã€‚</p>
<h3 data-id="heading-16">å®ç°å¤šä¸ªå¯¹è±¡çš„å“åº”å¼</h3>
<p>ä¸‹é¢ä»£ç é€šè¿‡ 3 ä¸ªæ­¥éª¤ï¼Œå®ç°å¯¹ <code>total</code> æ•°æ®è¿›è¡Œå“åº”å¼å˜åŒ–ï¼š</p>
<p>â‘  åˆå§‹åŒ–ä¸€ä¸ª <code>WeakMap</code> ç±»å‹çš„ <code>targetMap</code> å˜é‡ï¼Œç”¨æ¥è¦è§‚å¯Ÿæ¯ä¸ªå“åº”å¼å¯¹è±¡ï¼›</p>
<p>â‘¡ åˆ›å»º <code>track()</code> å‡½æ•°ï¼Œç”¨æ¥å°†éœ€è¦æ‰§è¡Œçš„å‰¯ä½œç”¨ä¿å­˜åˆ°æŒ‡å®šå¯¹è±¡ï¼ˆ <code>target</code> ï¼‰çš„ä¾èµ–ä¸­ï¼ˆä¹Ÿç§°æ”¶é›†å‰¯ä½œç”¨ï¼‰ï¼›</p>
<p>â‘¢ åˆ›å»º <code>trigger()</code> å‡½æ•°ï¼Œç”¨æ¥æ‰§è¡ŒæŒ‡å®šå¯¹è±¡ï¼ˆ <code>target</code> ï¼‰ä¸­æŒ‡å®šå±æ€§ï¼ˆ <code>key</code> ï¼‰çš„æ‰€æœ‰å‰¯ä½œç”¨ï¼›</p>
<p>è¿™æ ·å°±å®ç°ç›‘å¬å¯¹è±¡çš„å“åº”å¼å˜åŒ–ï¼Œåœ¨ <code>product</code> å¯¹è±¡ä¸­çš„å±æ€§å€¼å‘ç”Ÿå˜åŒ–ï¼Œ <code>total</code> å€¼ä¹Ÿä¼šè·Ÿç€æ›´æ–°ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">let</span> product = { <span class="hljs-attr">price</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">2</span> }, total = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> targetMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();     <span class="hljs-comment">// 1 åˆå§‹åŒ– targetMapï¼Œä¿å­˜è§‚å¯Ÿå¯¹è±¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">effect</span> = (<span class="hljs-params"/>) =&gt; { total = product.<span class="hljs-property">price</span> * product.<span class="hljs-property">quantity</span> };
<span class="hljs-keyword">const</span> <span class="hljs-title function_">track</span> = (<span class="hljs-params">target, key</span>) =&gt; {     <span class="hljs-comment">// 2 æ”¶é›†ä¾èµ–</span>
  <span class="hljs-keyword">let</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);
  <span class="hljs-keyword">if</span>(!depsMap){
    targetMap.<span class="hljs-title function_">set</span>(target, (depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()));
  }
  <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
  <span class="hljs-keyword">if</span>(!dep) {
    depsMap.<span class="hljs-title function_">set</span>(key, (dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()));
  }
  dep.<span class="hljs-title function_">add</span>(effect);
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">trigger</span> = (<span class="hljs-params">target, key</span>) =&gt; {  <span class="hljs-comment">// 3 æ‰§è¡ŒæŒ‡å®šå¯¹è±¡çš„æŒ‡å®šå±æ€§çš„æ‰€æœ‰å‰¯ä½œç”¨</span>
  <span class="hljs-keyword">const</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);
  <span class="hljs-keyword">if</span>(!depsMap) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
  <span class="hljs-keyword">if</span>(dep) {
    dep.<span class="hljs-title function_">forEach</span>( <span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-title function_">effect</span>() );
  }
};

<span class="hljs-title function_">track</span>(product, <span class="hljs-string">'price'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 0</span>
<span class="hljs-title function_">effect</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 20</span>
product.<span class="hljs-property">price</span> = <span class="hljs-number">20</span>;
<span class="hljs-title function_">trigger</span>(product, <span class="hljs-string">'price'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 40</span>

</code></pre>
<h2 data-id="heading-17">"è‡ªåŠ¨æŒ¡"çš„å“åº”å¼ç³»ç»Ÿï¼šProxyä¸Reflectçš„ç»“åˆ</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ä¸ªä¾èµ–è¿½è¸ªç³»ç»Ÿï¼Œä½†å®ƒè¿˜æ˜¯â€œæ‰‹åŠ¨æŒ¡â€çš„ï¼š</p>
<ol>
<li>æˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨è°ƒç”¨ <code>track()</code> æ¥æ”¶é›†ä¾èµ–ã€‚</li>
<li>æˆ‘ä»¬éœ€è¦åœ¨æ•°æ®æ›´æ–°åæ‰‹åŠ¨è°ƒç”¨ <code>trigger()</code> æ¥è§¦å‘æ›´æ–°ã€‚</li>
</ol>
<p>è¿™æ˜¾ç„¶ä¸å¤Ÿæ™ºèƒ½ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬åˆ©ç”¨ <code>Proxy</code> å’Œ <code>Reflect</code> å°†å®ƒå‡çº§ä¸ºâ€œè‡ªåŠ¨æŒ¡â€ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼šå½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œ <code>track()</code>ï¼›å½“ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œ <code>trigger()</code>ã€‚</p>
<h4 data-id="heading-18">ç¬¬ä¸€æ­¥ï¼šåˆ›å»º <code>reactive</code> å‡½æ•°</h4>
<p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ª <code>reactive</code> å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¯¥å¯¹è±¡çš„ä»£ç†ã€‚æ‰€æœ‰çš„æ“ä½œéƒ½å°†å‘ç”Ÿåœ¨è¿™ä¸ªä»£ç†çš„ <code>handler</code> ä¸­ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> targetMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>(); <span class="hljs-comment">// ä¾èµ–å­˜å‚¨ä¿æŒä¸å˜</span>

<span class="hljs-comment">// å‰¯ä½œç”¨å‡½æ•°ä¹Ÿä¿æŒä¸å˜</span>
<span class="hljs-keyword">let</span> activeEffect = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨å½“å‰æ­£åœ¨è¿è¡Œçš„å‰¯ä½œç”¨å‡½æ•°</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-keyword">const</span> handler = {
    <span class="hljs-comment">// get æ‹¦æˆªå™¨ï¼šå½“è¯»å–å±æ€§æ—¶è§¦å‘</span>
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`GET: è®¿é—®å±æ€§ <span class="hljs-subst">${key}</span>`</span>);
      <span class="hljs-comment">// ... åœ¨è¿™é‡Œè‡ªåŠ¨æ”¶é›†ä¾èµ–</span>
    },
    <span class="hljs-comment">// set æ‹¦æˆªå™¨ï¼šå½“è®¾ç½®å±æ€§æ—¶è§¦å‘</span>
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`SET: è®¾ç½®å±æ€§ <span class="hljs-subst">${key}</span> ä¸º <span class="hljs-subst">${value}</span>`</span>);
      <span class="hljs-comment">// ... åœ¨è¿™é‡Œè‡ªåŠ¨è§¦å‘æ›´æ–°</span>
    }
  };
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, handler);
}

</code></pre>
<h4 data-id="heading-19">ç¬¬äºŒæ­¥ï¼šåœ¨ <code>get</code> æ‹¦æˆªå™¨ä¸­è‡ªåŠ¨æ”¶é›†ä¾èµ–</h4>
<p>å½“ä»£ç è®¿é—®ä»£ç†å¯¹è±¡çš„å±æ€§æ—¶ï¼ˆä¾‹å¦‚ <code>product.price</code>ï¼‰ï¼Œ<code>get</code> æ‹¦æˆªå™¨ä¼šè¢«è§¦å‘ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬è°ƒç”¨ <code>track()</code> çš„æ—¶æœºã€‚</p>
<p>åŒæ—¶ï¼Œä¸ºäº†è®© <code>track</code> å‡½æ•°çŸ¥é“è¦æ”¶é›†å“ªä¸ªå‰¯ä½œç”¨ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªå…¨å±€å˜é‡ <code>activeEffect</code>ï¼Œç”¨äºå­˜å‚¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‰¯ä½œç”¨å‡½æ•°ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// track å‡½æ•°ç°åœ¨éœ€è¦çŸ¥é“å½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨æ˜¯å“ªä¸ª</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">track</span>(<span class="hljs-params">target, key</span>) {
  <span class="hljs-keyword">if</span> (activeEffect) { <span class="hljs-comment">// åªæœ‰åœ¨ activeEffect å­˜åœ¨æ—¶æ‰è¿›è¡Œè¿½è¸ª</span>
    <span class="hljs-keyword">let</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);
    <span class="hljs-keyword">if</span> (!depsMap) {
      targetMap.<span class="hljs-title function_">set</span>(target, (depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()));
    }
    <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (!dep) {
      depsMap.<span class="hljs-title function_">set</span>(key, (dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()));
    }
    dep.<span class="hljs-title function_">add</span>(activeEffect); <span class="hljs-comment">// æ”¶é›†å½“å‰æ¿€æ´»çš„å‰¯ä½œç”¨</span>
  }
}

<span class="hljs-comment">// reactive å‡½æ•°çš„ get handler</span>
<span class="hljs-keyword">const</span> handler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
    <span class="hljs-title function_">track</span>(target, key); <span class="hljs-comment">// è‡ªåŠ¨æ”¶é›†ä¾èµ–</span>
    <span class="hljs-comment">// ä½¿ç”¨ Reflect.get è¿”å›å±æ€§çš„åŸå§‹å€¼ï¼Œç¡®ä¿ this æŒ‡å‘æ­£ç¡®</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
  },
  <span class="hljs-comment">// ... set handler</span>
};

</code></pre>
<h4 data-id="heading-20">ç¬¬ä¸‰æ­¥ï¼šåœ¨ <code>set</code> æ‹¦æˆªå™¨ä¸­è‡ªåŠ¨è§¦å‘æ›´æ–°</h4>
<p>å½“ä»£ç ä¿®æ”¹ä»£ç†å¯¹è±¡çš„å±æ€§æ—¶ï¼ˆä¾‹å¦‚ <code>product.price = 20</code>ï¼‰ï¼Œ<code>set</code> æ‹¦æˆªå™¨ä¼šè¢«è§¦å‘ã€‚è¿™æ—¶åˆ™è°ƒç”¨ <code>trigger()</code> ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// trigger å‡½æ•°ä¿æŒä¸å˜</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">trigger</span>(<span class="hljs-params">target, key</span>) {
  <span class="hljs-keyword">const</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);
  <span class="hljs-keyword">if</span> (!depsMap) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
  <span class="hljs-keyword">if</span> (dep) {
    dep.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-title function_">effect</span>());
  }
}

<span class="hljs-comment">// reactive å‡½æ•°çš„ set handler</span>
<span class="hljs-keyword">const</span> handler = {
  <span class="hljs-comment">// ... get handler</span>
  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
    <span class="hljs-comment">// ä½¿ç”¨ Reflect.set è®¾ç½®æ–°å€¼</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value, receiver);
    <span class="hljs-title function_">trigger</span>(target, key); <span class="hljs-comment">// è‡ªåŠ¨è§¦å‘æ›´æ–°</span>
    <span class="hljs-keyword">return</span> result; <span class="hljs-comment">// è¿”å›è®¾ç½®æ“ä½œæ˜¯å¦æˆåŠŸ</span>
  }
};

</code></pre>
<h4 data-id="heading-21">ç¬¬å››æ­¥ï¼šæ•´åˆä¸æµ‹è¯•</h4>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰éƒ¨åˆ†æ•´åˆèµ·æ¥ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª <code>watchEffect</code> å‡½æ•°æ¥ç®¡ç† <code>activeEffect</code>ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> targetMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
<span class="hljs-keyword">let</span> activeEffect = <span class="hljs-literal">null</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">track</span>(<span class="hljs-params">target, key</span>) {
  <span class="hljs-keyword">if</span> (activeEffect) {
    <span class="hljs-keyword">let</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);
    <span class="hljs-keyword">if</span> (!depsMap) {
      targetMap.<span class="hljs-title function_">set</span>(target, (depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()));
    }
    <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
    <span class="hljs-keyword">if</span> (!dep) {
      depsMap.<span class="hljs-title function_">set</span>(key, (dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()));
    }
    dep.<span class="hljs-title function_">add</span>(activeEffect);
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">trigger</span>(<span class="hljs-params">target, key</span>) {
  <span class="hljs-keyword">const</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);
  <span class="hljs-keyword">if</span> (!depsMap) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">let</span> dep = depsMap.<span class="hljs-title function_">get</span>(key);
  <span class="hljs-keyword">if</span> (dep) {
    dep.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-title function_">effect</span>());
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">target</span>) {
  <span class="hljs-keyword">const</span> handler = {
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
      <span class="hljs-title function_">track</span>(target, key);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
    },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value, receiver);
      <span class="hljs-title function_">trigger</span>(target, key);
      <span class="hljs-keyword">return</span> result;
    }
  };
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, handler);
}

<span class="hljs-comment">// watchEffect ç”¨äºæ³¨å†Œå‰¯ä½œç”¨å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">watchEffect</span>(<span class="hljs-params">effect</span>) {
  activeEffect = effect;
  <span class="hljs-title function_">effect</span>(); <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œä»¥è§¦å‘ get ä»è€Œæ”¶é›†ä¾èµ–</span>
  activeEffect = <span class="hljs-literal">null</span>;
}

<span class="hljs-comment">// --- æµ‹è¯• ---</span>
<span class="hljs-keyword">let</span> product = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">price</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">quantity</span>: <span class="hljs-number">2</span> });
<span class="hljs-keyword">let</span> total = <span class="hljs-number">0</span>;

<span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°ç°åœ¨æ˜¯æˆ‘ä»¬çš„å‰¯ä½œç”¨</span>
  total = product.<span class="hljs-property">price</span> * product.<span class="hljs-property">quantity</span>;
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 20</span>

<span class="hljs-comment">// å½“æˆ‘ä»¬ä¿®æ”¹ price æ—¶ï¼Œä¸å†éœ€è¦æ‰‹åŠ¨è°ƒç”¨ trigger</span>
product.<span class="hljs-property">price</span> = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 40 (è‡ªåŠ¨æ›´æ–°!)</span>

<span class="hljs-comment">// å½“æˆ‘ä»¬ä¿®æ”¹ quantity æ—¶ï¼Œä¹ŸåŒæ ·ä¼šè‡ªåŠ¨æ›´æ–°</span>
product.<span class="hljs-property">quantity</span> = <span class="hljs-number">3</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`total: <span class="hljs-subst">${total}</span>`</span>); <span class="hljs-comment">// total: 60 (è‡ªåŠ¨æ›´æ–°!)</span>

</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªçœŸæ­£çš„â€œè‡ªåŠ¨æŒ¡â€å“åº”å¼ç³»ç»Ÿã€‚æˆ‘ä»¬åªéœ€è¦ç”¨ <code>reactive()</code> åŒ…è£¹æˆ‘ä»¬çš„æ•°æ®ï¼Œå¹¶ç”¨ <code>watchEffect()</code> æ³¨å†Œä¾èµ–äºè¿™äº›æ•°æ®çš„æ“ä½œï¼Œå‰©ä¸‹çš„ä¾èµ–æ”¶é›†å’Œè§¦å‘æ›´æ–°éƒ½ç”± <code>Proxy</code> è‡ªåŠ¨å®Œæˆäº†ã€‚</p>
<h2 data-id="heading-22">æ€»ç»“</h2>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œäº²æ‰‹å®ç°äº†ä¸€ä¸ªè¿·ä½ ç‰ˆçš„Vue 3å“åº”å¼ç³»ç»Ÿã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™ä¸ªæ—…ç¨‹ï¼š</p>
<ol>
<li><strong>ä»åŸºç¡€å¼€å§‹</strong>ï¼šæˆ‘ä»¬é¦–å…ˆç†è§£äº†å“åº”å¼çš„æ ¸å¿ƒæ¦‚å¿µâ€”â€”å½“æ•°æ®å˜åŒ–æ—¶ï¼Œä¾èµ–è¯¥æ•°æ®çš„ä»£ç åº”è¯¥è‡ªåŠ¨é‡æ–°æ‰§è¡Œã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ <code>Set</code> æ¥å­˜å‚¨å•ä¸ªä¾èµ–ï¼ˆå‰¯ä½œç”¨å‡½æ•°ï¼‰ï¼Œå¹¶æ‰‹åŠ¨è°ƒç”¨ <code>track</code> å’Œ <code>trigger</code>ã€‚</li>
<li><strong>æ”¯æŒå¯¹è±¡å±æ€§</strong>ï¼šä¸ºäº†å¤„ç†å¯¹è±¡ï¼Œæˆ‘ä»¬å¼•å…¥äº† <code>Map</code>ï¼Œå»ºç«‹äº†ä»â€œå±æ€§åâ€åˆ°â€œä¾èµ–é›†åˆâ€çš„æ˜ å°„å…³ç³»ï¼Œä½¿å¾—æ¯ä¸ªå±æ€§éƒ½èƒ½ç‹¬ç«‹è¿½è¸ªè‡ªå·±çš„ä¾èµ–ã€‚</li>
<li><strong>æ”¯æŒå¤šä¸ªå¯¹è±¡</strong>ï¼šä¸ºäº†ç®¡ç†å¤šä¸ªå“åº”å¼å¯¹è±¡ï¼Œæˆ‘ä»¬å¼•å…¥äº† <code>WeakMap</code>ï¼Œæ„å»ºäº† <code>targetMap -&gt; depsMap -&gt; dep</code> çš„ä¸‰å±‚ä¾èµ–å­˜å‚¨ç»“æ„ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬çš„â€œæ‰‹åŠ¨æŒ¡â€å“åº”å¼ç³»ç»Ÿå·²ç»æˆå‹ã€‚</li>
<li><strong>è¿ˆå‘è‡ªåŠ¨åŒ–</strong>ï¼šæˆ‘ä»¬è®¤è¯†åˆ°æ‰‹åŠ¨è°ƒç”¨ <code>track</code> å’Œ <code>trigger</code> çš„ç¹çå’Œä¸å¯é ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬å¼•å…¥äº† ES6 çš„ <code>Proxy</code> å’Œ <code>Reflect</code>ã€‚
<ul>
<li><strong>Proxy</strong> å…è®¸æˆ‘ä»¬æ‹¦æˆªå¯¹è±¡çš„ <code>get</code> å’Œ <code>set</code> æ“ä½œã€‚æˆ‘ä»¬åœ¨ <code>get</code> æ‹¦æˆªå™¨ä¸­è‡ªåŠ¨è°ƒç”¨ <code>track</code>ï¼Œåœ¨ <code>set</code> æ‹¦æˆªå™¨ä¸­è‡ªåŠ¨è°ƒç”¨ <code>trigger</code>ã€‚</li>
<li><strong>Reflect</strong> åˆ™ä½œä¸º <code>Proxy</code> çš„æœ€ä½³æ­æ¡£ï¼Œæä¾›äº†æ‰§è¡Œå¯¹è±¡é»˜è®¤æ“ä½œçš„æ ‡å‡†æ–¹æ³•ï¼Œç¡®ä¿äº†æ“ä½œçš„å¥å£®æ€§å’Œ <code>this</code> æŒ‡å‘çš„æ­£ç¡®æ€§ã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¸ä»…æ·±å…¥ç†è§£äº†Vue 3å“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†ï¼Œè¿˜æŒæ¡äº† <code>Proxy</code> å’Œ <code>Reflect</code> è¿™ä¸¤ä¸ªå¼ºå¤§çš„JavaScriptç‰¹æ€§ã€‚</p>
<h2 data-id="heading-23">å‚è€ƒ</h2>
<ul>
<li><a href="https://juejin.cn/post/6977513378256257031" target="_blank" title="https://juejin.cn/post/6977513378256257031">ç¨€åœŸæ˜é‡‘-æ¢ç´¢ Vue3 å“åº”å¼åŸç†</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FProxy" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" ref="nofollow noopener noreferrer">MDN-Proxy</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FReflect" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect" ref="nofollow noopener noreferrer">MDN-Reflect</a></li>
<li>Google-Gemini2.5Proå‚ä¸æ ¡éªŒå’Œéƒ¨åˆ†ç¼–çº‚å·¥ä½œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.js SSR å®æˆ˜ï¼šä»é›¶åˆ°ä¸€ï¼Œæ„å»ºæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨]]></title>    <link>https://juejin.cn/post/7574978545144463395</link>    <guid>https://juejin.cn/post/7574978545144463395</guid>    <pubDate>2025-11-21T10:55:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574978545144463395" data-draft-id="7574404398066614272" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.js SSR å®æˆ˜ï¼šä»é›¶åˆ°ä¸€ï¼Œæ„å»ºæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-21T10:55:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="venton"/> <meta itemprop="url" content="https://juejin.cn/user/66443682264973"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.js SSR å®æˆ˜ï¼šä»é›¶åˆ°ä¸€ï¼Œæ„å»ºæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/66443682264973/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    venton
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T10:55:08.000Z" title="Fri Nov 21 2025 10:55:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€</h3>
<p>ä»Šå¤©æˆ‘ä»¬æ¥é€šè¿‡ä¸€ç¯‡æ–‡ç« æŒæ¡æœåŠ¡ç«¯æ¸²æŸ“æ¡†æ¶-nextjsçš„åŸºæœ¬ä½¿ç”¨ï¼Œé€šè¿‡æœ¬æ–‡ä¸€æ­¥ä¸€æ­¥å®ç°æ¥å®Œæˆä¸€ä¸ªä¼ä¸šçº§SSRæ¡†æ¶çš„æ­å»ºã€‚</p>
<p>èƒ½ç‚¹å¼€è¿™ç¯‡æ–‡ç« ï¼Œç›¸ä¿¡ä½ å¯¹SSRæœåŠ¡ç«¯æ¸²æŸ“å·²ç»æœ‰äº†å¤§æ¦‚çš„äº†è§£ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥çœ‹æˆ‘å‰é¢çš„ä¸€ç¯‡æ–‡ç« è®©ä½ ææ¸…æ¥šæœåŠ¡ç«¯æ¸²æŸ“çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼š<a href="https://juejin.cn/post/7571655312798285850" target="_blank" title="https://juejin.cn/post/7571655312798285850"> ææ‡‚SSRçš„çµé­‚-Hydration</a></p>
<p>å’±ä»¬å­¦ä¹ ä¹‹å‰è¿˜æ˜¯éœ€è¦æœ‰ä¸€äº›çš„reacté¢„å¤‡çŸ¥è¯†ï¼Œæ¯”å¦‚react16+ã€hooksã€reduxã€react-reduxã€redux toolkitï¼Œå¦‚æœæ˜¯çš„ï¼Œé‚£å’±ä»¬å°±å‘è½¦äº†ï¼</p>
<h3 data-id="heading-1">é¡¹ç›®åˆ›å»º</h3>
<pre><code class="hljs language-java" lang="java">npx create-next-app<span class="hljs-meta">@latest</span>   <span class="hljs-comment">//å½“ç„¶ä½ ä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚æŒ‡å®šè„šæ‰‹æ¶ç‰ˆæœ¬</span>

</code></pre>
<p>é¡¹ç›®çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹</p>
<pre><code class="hljs language-python" lang="python">â”œâ”€â”€ assets/             <span class="hljs-comment"># æ–‡ä»¶èµ„æº</span>
â”œâ”€â”€ components/         <span class="hljs-comment"># å¯å¤ç”¨ç»„ä»¶</span>
â”œâ”€â”€ pages/              <span class="hljs-comment"># é¡µé¢è·¯ç”±</span>
   â”œâ”€â”€ _app.tsx         <span class="hljs-comment"># å…¥å£æ–‡ä»¶</span>
   â”œâ”€â”€ _document.js     <span class="hljs-comment"># æ–‡æ¡£é…ç½®ï¼ˆå¯åœ¨è¿™é‡Œå®šä¹‰TDK--ssoä¼˜åŒ–ï¼‰</span>
   â”œâ”€â”€ index.tsx        <span class="hljs-comment"># é¦–é¡µ</span>
   â”œâ”€â”€ xxxx             <span class="hljs-comment"># å…¶ä»–é¡µé¢</span>
â”œâ”€â”€ store/              <span class="hljs-comment"># ReduxçŠ¶æ€ç®¡ç†</span>
â”œâ”€â”€ service/            <span class="hljs-comment"># APIæœåŠ¡å±‚</span>
â”œâ”€â”€ styles/             <span class="hljs-comment"># å…¨å±€æ ·å¼</span>
â””â”€â”€ middleware.ts       <span class="hljs-comment"># ä¸­é—´ä»¶é…ç½®ï¼ˆè·¯ç”±æ‹¦æˆªã€è¯·æ±‚é‡å®šå‘-åå‘ä»£ç†...ï¼‰</span>
â””â”€â”€ <span class="hljs-built_in">next</span>.config.js      <span class="hljs-comment"># é¡¹ç›®é…ç½®ï¼ˆç½‘ç»œå›¾ç‰‡ä¼˜åŒ–é…ç½®...ï¼‰</span>
â””â”€â”€ tsconfig.json       <span class="hljs-comment"># typescripté…ç½®(è·¯å¾„åˆ«å...)</span>
</code></pre>
<p>æ¥ä¸‹æ¥åœ¨ç¼–è¾‘å™¨ç»ˆç«¯æ‰§è¡Œ npm run dev ,å¦‚æœæ‰“å¼€æµè§ˆå™¨çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„é¡µé¢å°±ä»£è¡¨ç¬¬ä¸€æ­¥å·²ç»æˆåŠŸäº†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09bdfce6175646a4bebd89b03fcff0f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdmVudG9u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764327307&amp;x-signature=2v%2BbpP5UH%2FY%2BH23MOkroFnZCKuQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">è·¯ç”±ç³»ç»Ÿ</h3>
<p>é¡¹ç›®è¿è¡Œèµ·æ¥äº†æˆ‘ä»¬å¯èƒ½ä¸‹ä¸€æ­¥è€ƒè™‘çš„æ˜¯æ€ä¹ˆåˆ›å»ºè·¯ç”±ï¼Œå…³è”é¡µé¢ï¼Ÿ
nextjså…·å¤‡çš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼š<strong>é›¶é…ç½®è·¯ç”±</strong></p>
<p>Next.jsæœ€å¤§çš„è·¯ç”±ä¼˜åŠ¿å°±æ˜¯ï¼šä¸éœ€è¦æ‰‹åŠ¨é…ç½®è·¯ç”±ï¼Œæ–‡ä»¶ç³»ç»Ÿå°±æ˜¯è·¯ç”±ç³»ç»Ÿï¼</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–‡ä»¶ç»“æ„è‡ªåŠ¨æ˜ å°„ä¸ºè·¯ç”±</span>
pages/
â”œâ”€â”€ index.tsx          â†’ è‡ªåŠ¨æ˜ å°„ä¸º /
â”œâ”€â”€ about.tsx         â†’ è‡ªåŠ¨æ˜ å°„ä¸º /about
â”œâ”€â”€ profile/
â”‚   â”œâ”€â”€ index.tsx     â†’ è‡ªåŠ¨æ˜ å°„ä¸º /profile
â”‚   â””â”€â”€ [<span class="hljs-built_in">id</span>].tsx      â†’ è‡ªåŠ¨æ˜ å°„ä¸º /profile/:<span class="hljs-built_in">id</span>  æ³¨æ„ï¼šè¿™é‡Œæ˜¯åŠ¨æ€è·¯ç”±ï¼Œæ–‡ä»¶å‘½åå’Œå‚æ•°æ¥æ”¶æ—¶ç»Ÿä¸€
â””â”€â”€ api/
    â””â”€â”€ user.ts       â†’ è‡ªåŠ¨æ˜ å°„ä¸º /api/user
</code></pre>
<p>è·¯ç”±è·³è½¬å¯é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼</p>
<p>linkç»„ä»¶è·³è½¬</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Link</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"next/link"</span>;
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">AppProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/app"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params">{ Component, ...rest }: AppProps</span>) {
  <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/profile?code=123"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>Profile<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/profile/123444"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ProfileåŠ¨æ€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{getInfo}</span>&gt;</span>apié‡å†™<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
        {<span class="hljs-comment">/* Componenté¡µé¢å ä½ ===ç›¸å½“äºvueä¸­çš„ router-view */</span>}
        &lt;<span class="hljs-title class_">Component</span> {...props.<span class="hljs-property">pageProps</span>} /&gt;
  );
}
</code></pre>
<p>ç¼–ç¨‹å¼å¯¼èˆªè·³è½¬hookï¼ˆç±»ä¼¼vue3ï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/router'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">AppProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/app"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params">{ Component, ...rest }: AppProps</span>) {

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
  
  <span class="hljs-comment">// åŸºæœ¬è·³è½¬</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNavigate</span> = (<span class="hljs-params"/>) =&gt; {
    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/profile'</span>) <span class="hljs-comment">// è·³è½¬åˆ°ä¸ªäººèµ„æ–™é¡µ</span>
  }
  
  <span class="hljs-comment">// å¸¦æŸ¥è¯¢å‚æ•°è·³è½¬</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNavigateWithQuery</span> = (<span class="hljs-params"/>) =&gt; {
    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/profile?code=123&amp;name=john'</span>)
  }
  
  <span class="hljs-comment">// åŠ¨æ€è·¯ç”±è·³è½¬</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDynamicRoute</span> = (<span class="hljs-params"/>) =&gt; {
    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/profile/123'</span>) <span class="hljs-comment">// è·³è½¬åˆ° /profile/123</span>
  }
  
  <span class="hljs-comment">// å¯¹è±¡å½¢å¼è·³è½¬ï¼ˆæ›´çµæ´»ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleObjectNavigation</span> = (<span class="hljs-params"/>) =&gt; {
    router.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/profile'</span>,
      <span class="hljs-attr">query</span>: { 
        <span class="hljs-attr">id</span>: <span class="hljs-string">'123'</span>, 
        <span class="hljs-attr">tab</span>: <span class="hljs-string">'settings'</span> 
      }
    })
  }
}

</code></pre>
<p>è·¯ç”±ä¼ é€’å‚æ•°çš„æ¥æ”¶</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/router'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">AppProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/app"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params">{ Component, ...rest }: AppProps</span>) {

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
<span class="hljs-comment">// æ‹¿åˆ° urlä¸­æŸ¥è¯¢å­—ç¬¦ä¸² æ³¨æ„ï¼šå¦‚æœæ˜¯åŠ¨æ€è·¯ç”±è¿™é‡Œè§£æ„çš„å±æ€§åå°±ä¸æ–‡ä»¶åå¿…é¡»ä¿æŒä¸€è‡´</span>
<span class="hljs-comment">// åŠ¨æ€è·¯ç”±å‚æ•°éƒ½æ˜¯é€šè¿‡queryè·å–ï¼ŒåŒåçš„è¯è·¯ç”±å‚æ•°ä¼˜å…ˆçº§é«˜äºæŸ¥è¯¢å­—ç¬¦ä¸² </span>
<span class="hljs-keyword">const</span> { id } = router.<span class="hljs-property">query</span>; <span class="hljs-comment">// æ‹¿åˆ° urlä¸­æŸ¥è¯¢å­—ç¬¦ä¸² æ³¨æ„ï¼šå¦‚æœæ˜¯åŠ¨æ€è·¯ç”±è¿™é‡Œç»“æ„çš„å±æ€§åå°±ä¸æ–‡ä»¶å</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.detail}</span>&gt;</span>{id}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

</code></pre>
<p>å¦‚æœè¦æ‰§è¡Œè·¯ç”±å®ˆå«åœ¨ä¸­é—´ä»¶é…ç½®æ–‡ä»¶æ“ä½œ</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//middleware.ts</span>

  <span class="hljs-comment">// è·¯ç”±å®ˆå«ï¼ˆç¤ºä¾‹ï¼‰</span>
  <span class="hljs-keyword">const</span> token = req.cookies.<span class="hljs-keyword">get</span>(<span class="hljs-string">"token"</span>)?.<span class="hljs-keyword">value</span>;
  <span class="hljs-keyword">if</span> (!token &amp;&amp; req.nextUrl.pathname.startsWith(<span class="hljs-string">"/profile"</span>)) {
    <span class="hljs-keyword">return</span> NextResponse.redirect(<span class="hljs-keyword">new</span> URL(<span class="hljs-string">"/login"</span>, req.nextUrl.origin));
  }

</code></pre>
<p>ä¸Šé¢æ¶µç›–äº†nextjsè·¯ç”±ç³»ç»Ÿçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®è·µä¸‹æœåŠ¡ç«¯æ¸²æŸ“çš„æ ¸å¿ƒï¼š</p>
<h3 data-id="heading-3">SSRæ•°æ®è·å–ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰</h3>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹é¡µé¢ä¸­å¦‚ä½•å±•ç¤ºæ•°æ®</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { useSelector, useDispatch } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-redux"</span>;
<span class="hljs-keyword">import</span> { fetchUserAction } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/store/modules/home"</span>;
<span class="hljs-keyword">import</span> wrapper <span class="hljs-keyword">from</span> <span class="hljs-string">"@/store/index"</span>;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">GetServerSideProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-variable constant_">FC</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">IUser</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"@/service/home"</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">IProps</span> {
  <span class="hljs-attr">users</span>: <span class="hljs-title class_">IUser</span>[];
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span>: <span class="hljs-variable constant_">FC</span>&lt;<span class="hljs-title class_">IProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> {
    product = [], <span class="hljs-comment">//é€šè¿‡getServerSidePropsæ˜ å°„åˆ°propsä¸­äº†</span>
  } = props;

  <span class="hljs-comment">// ä» redux è¯»å–æ•°æ®</span>
  <span class="hljs-keyword">const</span> { users } = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function">(<span class="hljs-params">rootState: IAppRootState</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">users</span>: rootState.<span class="hljs-property">home</span>.<span class="hljs-property">users</span>,
    };
  });
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.home}</span>&gt;</span>
        {product}
        {users}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Home</span>;
<span class="hljs-title class_">Home</span>.<span class="hljs-property">displayName</span> = <span class="hljs-string">"Home"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">getServerSideProps</span>: <span class="hljs-title class_">GetServerSideProps</span> =
  wrapper.<span class="hljs-title function_">getServerSideProps</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">store</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (context) =&gt; {
      <span class="hljs-comment">// 1.è§¦å‘ä¸€ä¸ªå¼‚æ­¥çš„actionæ¥å‘èµ·ç½‘ç»œè¯·æ±‚, æ‹¿åˆ°æ¥å£æ•°æ®å¹¶å­˜åˆ°redexä¸­</span>
      <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">fetchUserAction</span>());
      <span class="hljs-comment">// 2.å®é™…é¡¹ç›®ä¸­ä¸ä¸€å®šéè¦åœ¨reduxè¿›è¡Œç½‘ç»œè¯·æ±‚è·å–æ•°æ®ï¼ˆè€ƒè™‘æ˜¯å¦è¦ä½œä¸ºå…¬å…±æ•°æ®å­˜å‚¨ï¼‰</span>
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProduct</span>();
  
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">props</span>: {
          <span class="hljs-attr">product</span>: res.<span class="hljs-property">data</span>.<span class="hljs-property">product</span> || [],
        },
      };
    };
  });

</code></pre>
<p>çœ‹åˆ°è¿™é‡Œå¯èƒ½ä¼šæœ‰å‡ ä¸ªä¸ªç–‘é—®ï¼šgetServerSidePropsæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ fetchUserActionè¿™ä¸ªactionåšäº†ä»€ä¹ˆï¼Ÿwrapperåˆæ˜¯å¹²å˜›çš„ï¼Ÿè·Ÿç€æˆ‘çš„èŠ‚å¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å›´ç»•è¿™ä¸‰ä¸ªé—®é¢˜å±•å¼€è®²è§£ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“SSRé€šå¸¸æ˜¯æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åˆ†å·¥åä½œçš„ç»“æœï¼š</p>
<p><strong>SSRæ•°æ®é¢„å–ï¼ˆgetServerSidePropsï¼‰</strong> ï¼š</p>
<ul>
<li>åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œï¼Œé¡µé¢é¦–æ¬¡åŠ è½½æ—¶å®Œæˆ</li>
<li>æ•°æ®åœ¨é¡µé¢æ¸²æŸ“å‰å°±å·²å‡†å¤‡å¥½</li>
<li>å±äºæœåŠ¡ç«¯æ¸²æŸ“èŒƒç•´</li>
<li>é€‚ç”¨äºSEOé‡è¦ã€é¦–æ¬¡åŠ è½½å¿…éœ€çš„æ•°æ®</li>
</ul>
<p><strong>å®¢æˆ·ç«¯æ•°æ®è·å–</strong>ï¼š</p>
<ul>
<li>åœ¨æµè§ˆå™¨ç«¯æ‰§è¡Œï¼Œé¡µé¢æ¸²æŸ“åè§¦å‘</li>
<li>é€šè¿‡ç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»ã€æ»šåŠ¨ç­‰ï¼‰è§¦å‘</li>
<li>å±äºå®¢æˆ·ç«¯æ¸²æŸ“èŒƒç•´</li>
<li>é€‚ç”¨äºåŠ¨æ€ã€ç”¨æˆ·äº¤äº’ç›¸å…³çš„æ•°æ®</li>
</ul>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé€šå¸¸<code>æ··åˆä½¿ç”¨</code>ä¸Šé¢ä¸¤ç§æ–¹å¼ã€‚
SEOå…³é”®æ•°æ®é€šè¿‡Â <code>getServerSideProps</code>Â é¢„å–ï¼Œç”¨æˆ·äº¤äº’ç›¸å…³çš„ç§å¯†æ•°æ®åˆ™åœ¨å®¢æˆ·ç«¯é€šè¿‡Â <code>useEffect</code>Â æˆ–äº‹ä»¶å¤„ç†å‡½æ•°è·å–ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹fetchUserAction åœ¨reduxä¸­å…·ä½“å®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//store\modules\home.ts</span>

<span class="hljs-keyword">import</span> { createSlice, createAsyncThunk } <span class="hljs-keyword">from</span> <span class="hljs-string">"@reduxjs/toolkit"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">HYDRATE</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next-redux-wrapper"</span>;
<span class="hljs-keyword">import</span> { fetchUser } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../service/home"</span>;

<span class="hljs-keyword">const</span> homeSlice = <span class="hljs-title function_">createSlice</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"home"</span>,
  <span class="hljs-attr">initialState</span>: {
    <span class="hljs-attr">users</span>: {},
  },
  <span class="hljs-attr">extraReducers</span>: <span class="hljs-function">(<span class="hljs-params">builder</span>) =&gt;</span> {
    <span class="hljs-comment">// Hydrate æ˜¯ Next.js æä¾›çš„ä¸€ä¸ªç‰¹æ®Šçš„ actionï¼Œç”¨äºåœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶å°†æœåŠ¡å™¨ç«¯çš„çŠ¶æ€åˆå¹¶åˆ°å®¢æˆ·ç«¯çš„çŠ¶æ€ä¸­ã€‚</span>
    builder
      .<span class="hljs-title function_">addCase</span>(<span class="hljs-variable constant_">HYDRATE</span>, <span class="hljs-function">(<span class="hljs-params">state, action: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> {
          ...state,
          ...action.<span class="hljs-property">payload</span>.<span class="hljs-property">home</span>,
        };
      })
      .<span class="hljs-title function_">addCase</span>(fetchUserAction.<span class="hljs-property">fulfilled</span>, <span class="hljs-function">(<span class="hljs-params">state, { payload }</span>) =&gt;</span> {
        state.<span class="hljs-property">users</span> = payload;
      });
  },
});

<span class="hljs-comment">// å¼‚æ­¥çš„action</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchUserAction = <span class="hljs-title function_">createAsyncThunk</span>(
  <span class="hljs-string">"fetchUserAction"</span>,
  <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// å‘èµ·ç½‘ç»œè¯·æ±‚,æ‹¿åˆ°æœç´¢å»ºè®®çš„æ•°æ®</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>();
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>
  }
);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> homeSlice.<span class="hljs-property">reducer</span>;
</code></pre>
<p>æ¯ä¸ªreduceré€šè¿‡redux toolkitæ˜¯ä½œä¸ºä¸€ä¸ªåˆ‡ç‰‡æ¨¡å—ï¼Œæœ€ç»ˆéœ€è¦æ•´åˆåœ¨ä¸€èµ·</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//store\index.ts</span>

<span class="hljs-keyword">import</span> { configureStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"@reduxjs/toolkit"</span>;
<span class="hljs-keyword">import</span> { createWrapper } <span class="hljs-keyword">from</span> <span class="hljs-string">"next-redux-wrapper"</span>;
<span class="hljs-keyword">import</span> homeReducer <span class="hljs-keyword">from</span> <span class="hljs-string">"./modules/home"</span>;

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">configureStore</span>({
  <span class="hljs-attr">reducer</span>: {
    <span class="hljs-attr">home</span>: homeReducer,
  },
});

<span class="hljs-keyword">const</span> wrapper = <span class="hljs-title function_">createWrapper</span>(<span class="hljs-function">() =&gt;</span> store);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> wrapper;

</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°createWrapperç”Ÿæˆäº†ä¸€ä¸ªwraperå¯¼å‡ºï¼Œå®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ä½¿æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯çŠ¶æ€åŒæ­¥ï¼Œä¸ºä»€ä¹ˆéœ€è¦åŒæ­¥ï¼Ÿ</p>
<p>æˆ‘ä»¬å†å›é¡¾ä¸‹SSRçš„æ ¸å¿ƒåŸç†ï¼š</p>
<ul>
<li><strong>æœåŠ¡ç«¯çŠ¶æ€åºåˆ—åŒ–</strong>ï¼šåœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æ—¶ï¼Œå°† Redux store çš„çŠ¶æ€åºåˆ—åŒ–å¹¶æ³¨å…¥åˆ° HTML ä¸­</li>
<li><strong>å®¢æˆ·ç«¯çŠ¶æ€æ°´åˆ</strong>ï¼šåœ¨å®¢æˆ·ç«¯é¦–æ¬¡åŠ è½½æ—¶ï¼Œå°†æœåŠ¡ç«¯æ³¨å…¥çš„çŠ¶æ€é‡æ–°æ°´åˆåˆ°å®¢æˆ·ç«¯çš„ Redux store</li>
<li><strong>é¿å…çŠ¶æ€ä¸ä¸€è‡´</strong>ï¼šé˜²æ­¢æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ¸²æŸ“ç»“æœä¸ä¸€è‡´çš„é—®é¢˜</li>
</ul>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬åœ¨å…¥å£æ–‡ä»¶_app.tsxä¸­æŒ‚è½½storeè¦åšä¸€ç‚¹è°ƒæ•´</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//pages\_app.tsx</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Provider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-redux"</span>;
<span class="hljs-keyword">import</span> wrapper <span class="hljs-keyword">from</span> <span class="hljs-string">"../store"</span>;
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">AppProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/app"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params">{ Component, ...rest }: AppProps</span>) {
  <span class="hljs-comment">//å®ç°æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çŠ¶æ€çš„è‡ªåŠ¨åŒæ­¥</span>
  <span class="hljs-keyword">const</span> { store, props } = wrapper.<span class="hljs-title function_">useWrappedStore</span>(rest);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...props.pageProps</span>} /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>
  );
}

</code></pre>
<p>è‡ªæ­¤ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ç»“åˆreduxçš„æ ¸å¿ƒåº”ç”¨å°±å®Œæˆäº†ï¼é€šè¿‡ä¸€å¼ å›¾æ¢³ç†ä¸‹ä¸ªNext.js SSRæ•°æ®é¢„å–ä¸ReduxçŠ¶æ€åŒæ­¥çš„å®Œæ•´æµç¨‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1a95b97deac470c86741c4de2aff620~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdmVudG9u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764327307&amp;x-signature=yR7r3bKrSghsWwHJCMSVGCqSAds%3D" alt="deepseek_mermaid_20251121_d68c43.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é’‰é’‰å°ç¨‹åºç›´ä¼ æ–‡ä»¶åˆ° é˜¿é‡Œäº‘OSS]]></title>    <link>https://juejin.cn/post/7574978545144512547</link>    <guid>https://juejin.cn/post/7574978545144512547</guid>    <pubDate>2025-11-21T12:25:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574978545144512547" data-draft-id="7574997924929880104" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é’‰é’‰å°ç¨‹åºç›´ä¼ æ–‡ä»¶åˆ° é˜¿é‡Œäº‘OSS"/> <meta itemprop="keywords" content="å‰ç«¯,uni-app,Vue.js"/> <meta itemprop="datePublished" content="2025-11-21T12:25:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹¿ç™½"/> <meta itemprop="url" content="https://juejin.cn/user/231309974726702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é’‰é’‰å°ç¨‹åºç›´ä¼ æ–‡ä»¶åˆ° é˜¿é‡Œäº‘OSS
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/231309974726702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹¿ç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T12:25:18.000Z" title="Fri Nov 21 2025 12:25:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="tomorrow">.hljs-comment,.hljs-quote{color:#8e908c}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c82829}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5871f}.hljs-attribute{color:#eab700}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#718c00}.hljs-section,.hljs-title{color:#4271ae}.hljs-keyword,.hljs-selector-tag{color:#8959a8}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#4d4d4c}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸¾ä¸ªğŸŒ°ï¼Œç”¨é’‰é’‰å°ç¨‹åºå°†ä¸€æ®µè§†é¢‘åœ¨ å‰ç«¯ ç›´æ¥ä¼ åˆ°é˜¿é‡Œäº‘ä¸Šã€‚</p>
<p>ç”±äº <code>js-base64</code> è¿™ä¸ªnpmåŒ…åœ¨é’‰é’‰å°ç¨‹åºä½¿ç”¨ä¸äº†ï¼Œè€Œç›®å‰é’‰é’‰å°ç¨‹åºåˆæ²¡æœ‰<code>base64ToArrayBuffe</code>rè¿™ç±»æ–¹æ³•ï¼Œæ•…åªèƒ½æ›²çº¿æ•‘å›½ï¼Œä½¿ç”¨ <code>dd.writeFile</code>å’Œ <code>dd.readFile</code>æ¥åš<code>base64</code>çš„è½¬æ¢ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å¾—å…ˆå¤„ç†OSSé…ç½®ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> crypto <span class="hljs-keyword">from</span> <span class="hljs-string">"crypto-js"</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">OSSConfig</span> = {
  <span class="hljs-title class_">AccessKeyId</span>: <span class="hljs-string">"xxxx"</span>,
  <span class="hljs-title class_">AccessKeySecret</span>: <span class="hljs-string">"xxxxxx"</span>,
  <span class="hljs-title class_">Host</span>: <span class="hljs-string">"xxxxx"</span>, <span class="hljs-comment">// å…·ä½“æŸä¸ªè´¦å·ä¸‹,</span>
  <span class="hljs-title class_">SecurityToken</span>: <span class="hljs-string">"xx"</span>, <span class="hljs-comment">// å¯é€‰ï¼Œä½¿ç”¨STSç­¾åæ—¶å¿…ä¼ ã€‚</span>
}

<span class="hljs-comment">// è®¡ç®—ç­¾åã€‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">computeSignature</span> = (<span class="hljs-params">accessKeySecret, canonicalString</span>) =&gt; {
  <span class="hljs-keyword">return</span> crypto.<span class="hljs-property">enc</span>.<span class="hljs-property">Base64</span>.<span class="hljs-title function_">stringify</span>(
    crypto.<span class="hljs-title class_">HmacSHA1</span>(canonicalString, accessKeySecret)
  )
}

<span class="hljs-keyword">let</span> ossData = <span class="hljs-literal">null</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getOssConfig</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
  date.<span class="hljs-title function_">setHours</span>(date.<span class="hljs-title function_">getHours</span>() + <span class="hljs-number">24</span>) <span class="hljs-comment">//åŠ  1ä¸ªå°æ—¶</span>
  <span class="hljs-keyword">const</span> policyText = {
    <span class="hljs-attr">expiration</span>: date.<span class="hljs-title function_">toISOString</span>(), <span class="hljs-comment">// è®¾ç½®policyè¿‡æœŸæ—¶é—´ã€‚</span>
    <span class="hljs-attr">conditions</span>: [
      <span class="hljs-comment">// é™åˆ¶ä¸Šä¼ å¤§å°ã€‚</span>
      [<span class="hljs-string">"content-length-range"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>],
    ],
  }
  <span class="hljs-keyword">let</span> fileManager = dd.<span class="hljs-title function_">getFileSystemManager</span>()
  fileManager.<span class="hljs-title function_">writeFile</span>({
    <span class="hljs-attr">filePath</span>: <span class="hljs-string">`<span class="hljs-subst">${dd.env.USER_DATA_PATH}</span>/test.txt`</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(policyText),
    <span class="hljs-attr">success</span>: <span class="hljs-function">() =&gt;</span> {
      fileManager.<span class="hljs-title function_">readFile</span>({
        <span class="hljs-attr">filePath</span>: <span class="hljs-string">`<span class="hljs-subst">${dd.env.USER_DATA_PATH}</span>/test.txt`</span>,
        <span class="hljs-attr">encoding</span>: <span class="hljs-string">"base64"</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">data</span>, <span class="hljs-string">"readFile"</span>)
          <span class="hljs-keyword">const</span> signature = <span class="hljs-title function_">computeSignature</span>(
            <span class="hljs-title class_">OSSConfig</span>.<span class="hljs-property">AccessKeySecret</span>,
            res.<span class="hljs-property">data</span>
          )
          ossData = {
            <span class="hljs-title class_">OSSAccessKeyId</span>: <span class="hljs-title class_">OSSConfig</span>.<span class="hljs-property">AccessKeyId</span>,
            signature,
            <span class="hljs-attr">policy</span>: res.<span class="hljs-property">data</span>,
            <span class="hljs-comment">// "x-oss-security-token": OSSConfig.SecurityToken,</span>
          }
        },
        <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)
        },
      })
    },
    <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)
    },
  })
}
</code></pre>
<p>è¿™ä¸ªossDataå°±æ˜¯æˆ‘ä»¬å¤„ç†å¥½åçš„é…ç½®é¡¹ï¼Œæ¥ä¸‹æ¥å°†å…¶å¡«å……åˆ° <code>dd.uploadFile</code> é‡Œå°±å¤§åŠŸå‘Šæˆäº†ï¼</p>
<pre><code class="hljs language-js" lang="js">dd.<span class="hljs-title function_">chooseVideo</span>({
        <span class="hljs-attr">sourceType</span>: [<span class="hljs-string">"album"</span>, <span class="hljs-string">"camera"</span>],
        <span class="hljs-attr">maxDuration</span>: <span class="hljs-number">60</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
          <span class="hljs-keyword">let</span> uniqueId = <span class="hljs-string">`<span class="hljs-subst">${dirPath}</span>xcx-<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()}</span>.mp4`</span> <span class="hljs-comment">// dirPathä¸ºå­˜å‚¨çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œ æ¯”å¦‚"dev/front-end/video/"</span>
          uni.<span class="hljs-title function_">showLoading</span>({
            <span class="hljs-attr">title</span>: <span class="hljs-string">"è§†é¢‘ä¸Šä¼ ä¸­..."</span>,
          })
          dd.<span class="hljs-title function_">uploadFile</span>({
            <span class="hljs-attr">url</span>: <span class="hljs-title class_">OSSConfig</span>.<span class="hljs-property">Host</span>,
            <span class="hljs-attr">fileType</span>: <span class="hljs-string">"video"</span>,
            <span class="hljs-attr">fileName</span>: <span class="hljs-string">"file"</span>,
            <span class="hljs-attr">formData</span>: {
              ...ossData, <span class="hljs-comment">// ä¸Šè¿°getOssConfigæ–¹æ³•å¾—åˆ°çš„ç»“æœ</span>
              <span class="hljs-attr">key</span>: uniqueId, <span class="hljs-comment">// è¯¥å€¼ä¸ºä½ å­˜åœ¨åœ¨ossä¸Šçš„ä½ç½®  åé¢ä¸Šä¼ æˆåŠŸä¹‹åæ‹¼æ¥å¾—åˆ°é“¾æ¥éœ€è¦ä½¿ç”¨</span>
              <span class="hljs-attr">success_action_status</span>: <span class="hljs-string">"200"</span>, <span class="hljs-comment">// é»˜è®¤ä¸Šä¼ æˆåŠŸçŠ¶æ€ç ä¸º204ï¼Œæ­¤å¤„è¢«success_action_statusè®¾ç½®ä¸º200ã€‚</span>
            },
            <span class="hljs-attr">filePath</span>: res.<span class="hljs-property">tempFilePath</span>,
            <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
              uni.<span class="hljs-title function_">hideLoading</span>()
              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è§†é¢‘ä¸Šä¼ æˆåŠŸ,åœ°å€ä¸ºï¼š"</span>,<span class="hljs-string">`<span class="hljs-subst">${OSSConfig.Host}</span>/<span class="hljs-subst">${uniqueId}</span>`</span>)
            },
            <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
              uni.<span class="hljs-title function_">hideLoading</span>()
            },
          })
        },
        <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)
        },
      })
</code></pre>
<p><br/><br/>
<strong>æ¬¢è¿å°ä¼™ä¼´ç•™è¨€è®¨è®ºï¼Œäº’ç›¸å­¦ä¹ ï¼</strong></p>
<p><strong>â¤â¤â¤ å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œè®°å¾—ç‚¹èµæ”¶è—å“¦ï¼â¤â¤â¤</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutteræ¯æ—¥åº“: local_authæœ¬åœ°è®¾å¤‡éªŒè¯æ’ä»¶]]></title>    <link>https://juejin.cn/post/7574992086715482127</link>    <guid>https://juejin.cn/post/7574992086715482127</guid>    <pubDate>2025-11-21T12:38:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574992086715482127" data-draft-id="7574997924929912872" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutteræ¯æ—¥åº“: local_authæœ¬åœ°è®¾å¤‡éªŒè¯æ’ä»¶"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-21T12:38:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©å¤©å¼€å‘"/> <meta itemprop="url" content="https://juejin.cn/user/4420475793718670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutteræ¯æ—¥åº“: local_authæœ¬åœ°è®¾å¤‡éªŒè¯æ’ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4420475793718670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©å¤©å¼€å‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T12:38:15.000Z" title="Fri Nov 21 2025 12:38:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ä¸­ï¼Œç”¨æˆ·éšç§å’Œå®‰å…¨è‡³å…³é‡è¦ã€‚ä½ æ˜¯å¦æƒ³è¿‡ä¸ºAPPæ·»åŠ ç±»ä¼¼æ‰‹æœºè§£é”çš„æœ¬åœ°èº«ä»½éªŒè¯åŠŸèƒ½ï¼Ÿä»Šå¤©ä»‹ç»çš„<strong>local_authæ’ä»¶</strong>ï¼Œæ­£æ˜¯Flutterå¼€å‘è€…å®ç°æŒ‡çº¹ã€äººè„¸è¯†åˆ«çš„ç»ˆææ­¦å™¨ï¼æ— éœ€å¤æ‚ä»£ç ï¼Œè½»æ¾æ‰“é€ å®‰å…¨åˆç‚«é…·çš„è®¤è¯ä½“éªŒ</p>
<h2 data-id="heading-0">åŠŸèƒ½äº®ç‚¹</h2>
<ul>
<li><strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šå…¼å®¹iOSï¼ˆFace ID/Touch IDï¼‰å’ŒAndroidï¼ˆæŒ‡çº¹/äººè„¸ï¼‰</li>
<li><strong>ä¸€é”®éªŒè¯</strong>ï¼šè°ƒç”¨ç³»ç»ŸåŸç”Ÿç•Œé¢ï¼Œç”¨æˆ·ä½“éªŒæ— ç¼è¡”æ¥</li>
<li><strong>çµæ´»é…ç½®</strong>ï¼šæ”¯æŒç”Ÿç‰©è¯†åˆ«+å¯†ç åŒéªŒè¯æ¨¡å¼</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šæ™ºèƒ½è¯†åˆ«ç¡¬ä»¶é”æ­»ã€æƒé™å¼‚å¸¸ç­‰åœºæ™¯</li>
</ul>
<h2 data-id="heading-1">å®‰è£…æ–¹å¼</h2>
<pre><code class="hljs language-csharp" lang="csharp">flutter pub <span class="hljs-keyword">add</span> local_auth
</code></pre>
<h2 data-id="heading-2">è¯¦ç»†é…ç½®å’Œç¤ºä¾‹</h2>
<h3 data-id="heading-3">iOSå’Œå®‰å“å¹³å°çš„é…ç½®</h3>
<p>iOSéœ€è¦å†info.plistä¸­é…ç½®face IDçš„æƒé™</p>
<pre><code class="hljs language-vbnet" lang="vbnet">&lt;<span class="hljs-keyword">key</span>&gt;NSFaceIDUsageDescription&lt;/<span class="hljs-keyword">key</span>&gt;
&lt;<span class="hljs-type">string</span>&gt;Why <span class="hljs-built_in">is</span> my app authenticating <span class="hljs-keyword">using</span> face id?&lt;/<span class="hljs-type">string</span>&gt;
</code></pre>
<h3 data-id="heading-4">å®‰å“é…ç½®å¦‚ä¸‹</h3>
<p>1ã€ä¿®æ”¹å®‰å“çš„åŸç”ŸMainActivityçš„çˆ¶ç±»</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> io.flutter.embedding.android.FlutterActivity
â€‹
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">FlutterActivity</span>()
â€‹
<span class="hljs-comment">// ä¿®æ”¹ä¸ºï¼š</span>
<span class="hljs-keyword">import</span> io.flutter.embedding.android.FlutterFragmentActivity
â€‹
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">FlutterFragmentActivity</span> ()
</code></pre>
<p>2ã€åœ¨AndroidManifest.xmlæ·»åŠ æƒé™</p>
<pre><code class="hljs language-ini" lang="ini">&lt;manifest xmlns:<span class="hljs-attr">android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
 Â  Â  Â  Â   <span class="hljs-attr">package</span>=<span class="hljs-string">"com.example.app"</span>&gt;
  &lt;uses-permission android:<span class="hljs-attr">name</span>=<span class="hljs-string">"android.permission.USE_BIOMETRIC"</span>/&gt;
&lt;manifest&gt;
</code></pre>
<h3 data-id="heading-5">ç¡¬ä»¶èƒ½åŠ›æ£€æµ‹</h3>
<pre><code class="hljs language-ini" lang="ini">final <span class="hljs-attr">auth</span> = LocalAuthentication()<span class="hljs-comment">;</span>
â€‹
// æ£€æµ‹è®¾å¤‡æ˜¯å¦æ”¯æŒ
bool <span class="hljs-attr">isSupported</span> = await auth.isDeviceSupported()<span class="hljs-comment">;</span>
â€‹
// æŸ¥çœ‹å·²æ³¨å†Œçš„ç”Ÿç‰©è¯†åˆ«ç±»å‹
List&lt;BiometricType&gt; <span class="hljs-attr">types</span> = await auth.getAvailableBiometrics()<span class="hljs-comment">;</span>
// å¯èƒ½è¿”å›ï¼šfingerprintï¼ˆæŒ‡çº¹ï¼‰ã€faceï¼ˆäººè„¸ï¼‰ã€strongï¼ˆé«˜å®‰å…¨çº§åˆ«ï¼‰
</code></pre>
<h3 data-id="heading-6">å®Œæ•´ä»£ç ç¤ºä¾‹</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/services.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:local_auth/local_auth.dart'</span>;
â€‹
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
 Â <span class="hljs-keyword">const</span> TestPage({<span class="hljs-keyword">super</span>.key});
â€‹
 Â <span class="hljs-meta">@override</span>
 Â State&lt;TestPage&gt; createState() =&gt; _TestPageState();
}
â€‹
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_TestPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">TestPage</span>&gt; </span>{
 Â <span class="hljs-keyword">final</span> LocalAuthentication auth = LocalAuthentication();
â€‹
 Â Future&lt;<span class="hljs-keyword">void</span>&gt; _checkBiometrics() <span class="hljs-keyword">async</span> {
 Â  Â <span class="hljs-comment">// canCheckBiometrics ä»…æŒ‡ç¤ºç¡¬ä»¶æ˜¯å¦æ”¯æŒï¼Œå¹¶ä¸è¡¨ç¤ºè®¾å¤‡æ˜¯å¦å·²æ³¨å†Œä»»ä½•ç”Ÿç‰©è¯†åˆ«ä¿¡æ¯ï¼Œæœ‰å¯èƒ½æœªå½•å…¥æŒ‡çº¹æˆ–è€…äººè„¸</span>
 Â  Â <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> canAuthenticateWithBiometrics = <span class="hljs-keyword">await</span> auth.canCheckBiometrics;
 Â  Â <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> isDeviceSupported = <span class="hljs-keyword">await</span> auth.isDeviceSupported();
 Â  Â debugPrint(
 Â  Â  Â <span class="hljs-string">"canAuthenticateWithBiometrics = <span class="hljs-subst">$canAuthenticateWithBiometrics</span> isDeviceSupported = <span class="hljs-subst">$isDeviceSupported</span>"</span>,
 Â   );
  }
â€‹
 Â Future&lt;<span class="hljs-keyword">void</span>&gt; _getAvailableBiometricsData() <span class="hljs-keyword">async</span> {
 Â  Â <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;BiometricType&gt; availableBiometrics = <span class="hljs-keyword">await</span> auth
 Â  Â  Â   .getAvailableBiometrics();
â€‹
 Â  Â <span class="hljs-keyword">if</span> (availableBiometrics.isEmpty) {
 Â  Â  Â debugPrint(<span class="hljs-string">"è®¾å¤‡æœªæ³¨å†Œä»»ä½•ç”Ÿç‰©è¯†åˆ«ä¿¡æ¯"</span>);
 Â  Â  Â <span class="hljs-keyword">return</span>;
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">for</span> (BiometricType item <span class="hljs-keyword">in</span> availableBiometrics) {
 Â  Â  Â debugPrint(<span class="hljs-string">"type = <span class="hljs-subst">${item.name}</span>"</span>);
 Â   }
â€‹
 Â  Â <span class="hljs-comment">// if (availableBiometrics.contains(BiometricType.strong) ||</span>
 Â  Â <span class="hljs-comment">// Â  Â  availableBiometrics.contains(BiometricType.face)) {</span>
 Â  Â <span class="hljs-comment">// }</span>
  }
â€‹
 Â Future&lt;<span class="hljs-keyword">void</span>&gt; authenticateTest() <span class="hljs-keyword">async</span> {
 Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â <span class="hljs-keyword">final</span> <span class="hljs-built_in">bool</span> didAuthenticate = <span class="hljs-keyword">await</span> auth.authenticate(
 Â  Â  Â  Â localizedReason: <span class="hljs-string">'Please authenticate to show account balance'</span>,
 Â  Â  Â  Â biometricOnly: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// å¼ºåˆ¶ä½¿ç”¨ç”Ÿç‰©è¯†åˆ«è®¤è¯</span>
 Â  Â  Â  Â persistAcrossBackgrounding: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// åº”ç”¨æœªéªŒè¯å°±é€€åˆ°åå°ï¼Œå†æ¬¡åœ¨å‰å°è¿è¡Œæ—¶ï¼Œé‡è¯•èº«ä»½éªŒè¯</span>
 Â  Â   );
â€‹
 Â  Â  Â <span class="hljs-keyword">if</span> (didAuthenticate) {
 Â  Â  Â  Â debugPrint(<span class="hljs-string">"success"</span>);
 Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â debugPrint(<span class="hljs-string">"fail"</span>);
 Â  Â   }
 Â   } <span class="hljs-keyword">on</span> LocalAuthException <span class="hljs-keyword">catch</span> (e) {
 Â  Â  Â <span class="hljs-comment">// å¼‚å¸¸å¤„ç†  temporaryLockout  biometricLockout  æŒ‡çº¹æˆ–face IDè¢«é”å®š</span>
 Â  Â  Â debugPrint(<span class="hljs-string">"LocalAuthException <span class="hljs-subst">${e.toString()}</span>"</span>);
 Â   } <span class="hljs-keyword">on</span> PlatformException <span class="hljs-keyword">catch</span> (e) {
 Â  Â  Â debugPrint(<span class="hljs-string">"PlatformException <span class="hljs-subst">${e.message}</span>"</span>);
 Â   }
  }
â€‹
 Â <span class="hljs-meta">@override</span>
 Â Widget build(BuildContext context) {
 Â  Â <span class="hljs-keyword">return</span> MaterialApp(
 Â  Â  Â home: Scaffold(
 Â  Â  Â  Â appBar: AppBar(title: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'local_auth'</span>)),
 Â  Â  Â  Â body: Column(
 Â  Â  Â  Â  Â children: [
 Â  Â  Â  Â  Â  Â ElevatedButton(
 Â  Â  Â  Â  Â  Â  Â onPressed: () {
 Â  Â  Â  Â  Â  Â  Â  Â _checkBiometrics();
 Â  Â  Â  Â  Â  Â   },
 Â  Â  Â  Â  Â  Â  Â child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'æ£€æŸ¥æ­¤è®¾å¤‡æ˜¯å¦æ”¯æŒæœ¬åœ°èº«ä»½éªŒè¯'</span>),
 Â  Â  Â  Â  Â   ),
â€‹
 Â  Â  Â  Â  Â  Â ElevatedButton(
 Â  Â  Â  Â  Â  Â  Â onPressed: () {
 Â  Â  Â  Â  Â  Â  Â  Â _getAvailableBiometricsData();
 Â  Â  Â  Â  Â  Â   },
 Â  Â  Â  Â  Â  Â  Â child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'è·å–æ³¨å†Œç”Ÿç‰©è¯†åˆ«ä¿¡æ¯çš„åˆ—è¡¨'</span>),
 Â  Â  Â  Â  Â   ),
â€‹
 Â  Â  Â  Â  Â  Â ElevatedButton(
 Â  Â  Â  Â  Â  Â  Â onPressed: () {
 Â  Â  Â  Â  Â  Â  Â  Â authenticateTest();
 Â  Â  Â  Â  Â  Â   },
 Â  Â  Â  Â  Â  Â  Â child: <span class="hljs-keyword">const</span> Text(<span class="hljs-string">'Check biometrics'</span>),
 Â  Â  Â  Â  Â   ),
 Â  Â  Â  Â   ],
 Â  Â  Â   ),
 Â  Â   ),
 Â   );
  }
}
â€‹
</code></pre>
<p>ä»¥ä¸Šå°±æ˜¯è¯¥åº“åœ¨ç§»åŠ¨ç«¯çš„ä½¿ç”¨æƒ…å†µäº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[windowsä¸­flutterå¼€å‘é¸¿è’™å®æ“]]></title>    <link>https://juejin.cn/post/7574840547808182282</link>    <guid>https://juejin.cn/post/7574840547808182282</guid>    <pubDate>2025-11-21T12:52:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574840547808182282" data-draft-id="7575017581036224550" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="windowsä¸­flutterå¼€å‘é¸¿è’™å®æ“"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-21T12:52:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é›·ç¥"/> <meta itemprop="url" content="https://juejin.cn/user/1688498113884839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            windowsä¸­flutterå¼€å‘é¸¿è’™å®æ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1688498113884839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é›·ç¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T12:52:07.000Z" title="Fri Nov 21 2025 12:52:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h3 data-id="heading-0">ç¯å¢ƒæ­å»ºå®Œæˆ å¼€å§‹æ„å»ºé¡¹ç›®</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83de3916c2f34b4da65e1e6e8c216e2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=PZJHXKzBIsEVL5aZUZhYsXyEAk0%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h3 data-id="heading-1">é¡¹ç›®ç›®å½•</h3>
<p>æ‰“å¼€é¡¹ç›®ä»¥å å¯ä»¥çœ‹åˆ°ç»“æ„å¦‚ä¸‹ é‡Œé¢çš„ohoså°±æ˜¯é¸¿è’™ä»£ç </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b093bacf9a4849c8b30ea2059595c5c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=XUyCkUhksB64N64Vj0rBpd2BJiA%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>å±•å¼€çœ‹çœ‹ ç†Ÿæ‚‰å§</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37d683688a04416ab842c8f00a354274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=JCHzqD4XhqbiLhenlFukJP%2FLWH8%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>ä¸è¦ç›´æ¥å»æ“ä½œè¿™äº›ä»£ç ï¼Œè‚¯å®šè·‘ä¸èµ·æ¥çš„</p>
<h3 data-id="heading-2">å¯åŠ¨æ¨¡æ‹Ÿå™¨</h3>
<p>è¿™ä¸ªæ—¶å€™æ‰“å¼€DevEcoå·¥å…· å¯åŠ¨æ¨¡æ‹Ÿå™¨ éšä¾¿ç”¨å“ªä¸ªé¡¹ç›®æ‰“å¼€éƒ½è¡Œ åªå¯åŠ¨æ¨¡æ‹Ÿå™¨å°±å¯ä»¥äº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49bbc5745f2e492e9e87ca7f3da75495~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=HCIW%2BB6Wi7JR3LbukSrR81ehuQM%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>å¯åŠ¨ä»¥å</p>
<h3 data-id="heading-3">æ‰“åŒ…</h3>
<p>æ‰“å¼€é¡¹ç›®ç›®å½• è¿è¡Œ</p>
<p>flutter build hap --debug</p>
<p>æ„å»ºé¸¿è’™é¡¹ç›®åŒ…</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fafb23b8256a41d480b87b8e72210b50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=pYCxFYus1cTJ3w8CZ7lJs1DDgIw%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>æ‰“åŒ…å®Œæˆåå¼€å§‹è¿è¡Œflutteré¡¹ç›®<br/>
åœ¨ç»ˆç«¯ç»§ç»­è¾“å…¥å‘½ä»¤ï¼š</p>
<p>flutter run<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b36cc8a27e84ec5aab757b1e671dd52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=DJqZNYgIelJkREvBQMuYXgYhEYs%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘ç„¶åé€‰æ‹©1 ç”¨æ¨¡æ‹Ÿå™¨å¯åŠ¨</p>
<h3 data-id="heading-4">æ¨¡æ‹Ÿå™¨æ•ˆæœ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/687db6f9aaf94759a3fda2f285311776~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=azXeWo7hrIV35rx78wY695Kmo6c%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<h3 data-id="heading-5">å®æ“</h3>
<p>ç”¨vsCodeæ‰“å¼€é¡¹ç›® æ‰¾åˆ°libç›®å½• é‡Œé¢çš„main.dart å°±æ˜¯ç¨‹åºçš„ä¸»å…¥å£</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df1bbc21eee44d4e91bc35b0339713c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=ncACY5U3jrJ%2FQY426%2BEghYV1XeY%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘åœ¨libä¸­åˆ†åˆ«æ–°å»ºpagesï¼Œåœ¨æ–°å»ºå››ä¸ªæ–‡ä»¶å¤¹ Home Cinema Film Mine ,ç„¶ååˆ†åˆ«æ–°å»ºå„è‡ªçš„é»˜è®¤é¡µé¢ index.dart</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9564b73c027b42a4ba40b74378bef6a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=inytvsjBiQbcFHEjzDKKE4rD9q8%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>åˆ†åˆ«å®šä¹‰å¥½è‡ªå·±çš„é¡µé¢å†…å®¹</p>
<p>Cinema/index</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:flutter/material.dart';

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CinemaPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>{
  const <span class="hljs-type">CinemaPage</span>({<span class="hljs-keyword">super</span>.key});
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
   <span class="hljs-keyword">return</span> const <span class="hljs-type">Center</span>(
    child: <span class="hljs-type">Text</span>('å½±é™¢',style: <span class="hljs-type">TextStyle</span>(fontSize: <span class="hljs-number">24</span>),),
   );
  }
}

</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p>Film/index</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:flutter/material.dart';

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FilmPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">FilmPage</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> const <span class="hljs-type">Center</span>(
      child: <span class="hljs-type">Text</span>('ç”µå½±', style: <span class="hljs-type">TextStyle</span>(fontSize: <span class="hljs-number">24</span>)),
    );
  }
}
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p>Home/index</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:flutter/material.dart';

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span></span>{
  const <span class="hljs-type">HomePage</span>({<span class="hljs-keyword">super</span>.key});
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {

    <span class="hljs-keyword">return</span> const <span class="hljs-type">Center</span>(
      child: <span class="hljs-type">Column</span>(
        mainAxisAlignment: <span class="hljs-type">MainAxisAlignment</span>.center,
        children: &lt;<span class="hljs-type">Widget</span>&gt;[
          <span class="hljs-type">Text</span>('é¦–é¡µ',style: <span class="hljs-type">TextStyle</span>(fontSize:<span class="hljs-number">24</span>))
        ],
      )
    );




  }
}
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p>Mine/index</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:flutter/material.dart';

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MinePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">MinePage</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> const <span class="hljs-type">Center</span>(
      child: <span class="hljs-type">Text</span>('æˆ‘çš„', style: <span class="hljs-type">TextStyle</span>(fontSize: <span class="hljs-number">24</span>)),
    );
  }
}
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<p>æœ€åä¿®æ”¹main.dartæ–‡ä»¶</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:flutter/material.dart';
<span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:my_app01/pages/<span class="hljs-type">Cinema</span>/index.dart';
<span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:my_app01/pages/<span class="hljs-type">Home</span>/index.dart';
<span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:my_app01/pages/<span class="hljs-type">Film</span>/index.dart';
<span class="hljs-keyword">import</span> '<span class="hljs-keyword">package</span>:my_app01/pages/<span class="hljs-type">Mine</span>/index.dart';


void main() {
  runApp(const <span class="hljs-type">MyApp</span>());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">MyApp</span>({<span class="hljs-keyword">super</span>.key});
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> <span class="hljs-type">MaterialApp</span>(
      title: '<span class="hljs-type">Flutter</span> <span class="hljs-type">Demo</span>',
      theme: <span class="hljs-type">ThemeData</span>(
        colorScheme: <span class="hljs-type">ColorScheme</span>.fromSeed(seedColor: <span class="hljs-type">Colors</span>.deepPurple),
        useMaterial3: <span class="hljs-literal">true</span>,
      ),
      home: const <span class="hljs-type">MainScreen</span>(),
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainScreen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  const <span class="hljs-type">MainScreen</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">State</span>&lt;<span class="hljs-type">MainScreen</span>&gt;createState()=&gt;_MainScreenState();
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MainScreenState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State&lt;MainScreen&gt;</span></span>{
  int _currentIndex = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">final</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">Widget</span>&gt; _page = const[
    <span class="hljs-type">HomePage</span>(),
    <span class="hljs-type">CinemaPage</span>(),
    <span class="hljs-type">FilmPage</span>(),
    <span class="hljs-type">MinePage</span>(),
  ];
  <span class="hljs-keyword">final</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">BottomNavigationBarItem</span>&gt; _navBarItems = [
    const <span class="hljs-type">BottomNavigationBarItem</span>(
      icon: <span class="hljs-type">Icon</span>(<span class="hljs-type">Icons</span>.home_outlined),
      activeIcon: <span class="hljs-type">Icon</span>(<span class="hljs-type">Icons</span>.home,color: <span class="hljs-type">Colors</span>.blue),
      label: 'é¦–é¡µ'
    ),
    const <span class="hljs-type">BottomNavigationBarItem</span>(
      icon: <span class="hljs-type">Icon</span>(<span class="hljs-type">Icons</span>.contacts_outlined),
      activeIcon: <span class="hljs-type">Icon</span>(<span class="hljs-type">Icons</span>.contacts, color: <span class="hljs-type">Colors</span>.blue),
      label: 'å½±é™¢',
    ),
    const <span class="hljs-type">BottomNavigationBarItem</span>(
      icon: <span class="hljs-type">Icon</span>(<span class="hljs-type">Icons</span>.people_outline),
      activeIcon: <span class="hljs-type">Icon</span>(<span class="hljs-type">Icons</span>.people, color: <span class="hljs-type">Colors</span>.blue),
      label: 'ä¸ªäºº',
    ),
    const <span class="hljs-type">BottomNavigationBarItem</span>(
      icon: <span class="hljs-type">Icon</span>(<span class="hljs-type">Icons</span>.person_outline),
      activeIcon: <span class="hljs-type">Icon</span>(<span class="hljs-type">Icons</span>.person, color: <span class="hljs-type">Colors</span>.blue),
      label: 'æˆ‘çš„',
    ),
  ];
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context){
    <span class="hljs-keyword">return</span> <span class="hljs-type">Scaffold</span>(
      appBar: <span class="hljs-type">AppBar</span>(
        title: <span class="hljs-type">Text</span>(_getAppBarTitle()),
      ),
      body: _page[_currentIndex],
      bottomNavigationBar: <span class="hljs-type">BottomNavigationBar</span>(
       items: _navBarItems,
        currentIndex: _currentIndex,
        onTap: (index) {
          setState(() {
            _currentIndex = index; <span class="hljs-comment">// æ›´æ–°å½“å‰ç´¢å¼•</span>
          });
        },
        <span class="hljs-class"><span class="hljs-keyword">type</span></span>: <span class="hljs-type">BottomNavigationBarType</span>.fixed, <span class="hljs-comment">// å›ºå®šæ ·å¼ï¼ˆæ”¯æŒ4ä¸ªä»¥ä¸Šï¼‰</span>
        selectedItemColor: <span class="hljs-type">Colors</span>.blue, <span class="hljs-comment">// é€‰ä¸­é¡¹é¢œè‰²</span>
        unselectedItemColor: <span class="hljs-type">Colors</span>.grey, <span class="hljs-comment">// æœªé€‰ä¸­é¡¹é¢œè‰²</span>
      ),
    );
  }
  <span class="hljs-comment">// æ ¹æ®å½“å‰ç´¢å¼•è¿”å›AppBaræ ‡é¢˜</span>
  <span class="hljs-type">String</span> _getAppBarTitle() {
    switch (_currentIndex) {
      <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>: <span class="hljs-keyword">return</span> 'é¦–é¡µ';
      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> 'å½±é™¢';
      <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-keyword">return</span> 'ç”µå½±';
      <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <span class="hljs-keyword">return</span> 'ä¸ªäºº';
      <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> 'æˆ‘çš„åº”ç”¨';
    }
  }
}
</code></pre>
<p><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/></p>
<h3 data-id="heading-6">å…ˆå¯åŠ¨é¸¿è’™è™šæ‹Ÿæœº æˆ–è€…çœŸæœº</h3>
<h3 data-id="heading-7">ç¼–è¯‘æˆé¸¿è’™</h3>
<p>å…ˆè¿è¡Œ flutter build hap</p>
<p>åœ¨è¿è¡Œ flutter run</p>
<p>æœ€åçš„æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcab8fc1cbf54fa6b32f483261417b60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6Zu356We:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764334327&amp;x-signature=UQFtEcrt0P9peK2C92HxDBHR1wE%3D" alt="" loading="lazy"/><img alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" src="" loading="lazy"/>â€‹ç¼–è¾‘</p>
<p>ä½ å­¦åºŸäº†å—ï¼Ÿ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2Ffd34ff9286174e848d34cde7f512ce22%3Ftype%3D1%253Fha_source%253Dhmosclass%26ha_sourceId%3D89000248" title="https://developer.huawei.com/consumer/cn/training/classDetail/fd34ff9286174e848d34cde7f512ce22?type=1%3Fha_source%3Dhmosclass&amp;ha_sourceId=89000248" target="_blank" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++è¿›é˜¶å°æŠ€å·§ï¼šè®©ä»£ç ä»"èƒ½ç”¨"å˜"ä¼˜é›…"]]></title>    <link>https://juejin.cn/post/7574840547808313354</link>    <guid>https://juejin.cn/post/7574840547808313354</guid>    <pubDate>2025-11-21T13:26:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574840547808313354" data-draft-id="7575006095388753929" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++è¿›é˜¶å°æŠ€å·§ï¼šè®©ä»£ç ä»&quot;èƒ½ç”¨&quot;å˜&quot;ä¼˜é›…&quot;"/> <meta itemprop="keywords" content="å‰ç«¯,C++"/> <meta itemprop="datePublished" content="2025-11-21T13:26:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/4294056357689099"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++è¿›é˜¶å°æŠ€å·§ï¼šè®©ä»£ç ä»"èƒ½ç”¨"å˜"ä¼˜é›…"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4294056357689099/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AAAç®€å•ç©è½¬ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T13:26:16.000Z" title="Fri Nov 21 2025 13:26:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin:30px 0 10px;color:#cca152;position:relative;padding-left:50px;border-bottom:2px solid rgba(209,163,78,.6);padding-bottom:0}.markdown-body h1{font-size:30px}.markdown-body h1:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:80%;bottom:-10px;left:-2px}.markdown-body h2{font-size:24px}.markdown-body h2:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:70%;bottom:-15px;left:-1px}.markdown-body h3{font-size:18px}.markdown-body h3:before{content:"";width:50px;height:42px;display:block;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAhBAMAAACo1K8bAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAnUExURUdwTMyhUsqkUMyhUsyiUcyhUsyhUsyhUcyhUsyhUs2hUtytWNWoVX44si8AAAAKdFJOUwD8Bfcge95QncCWSSDAAAABh0lEQVQoz2WSPUvDQBjHjyPSOB7drh2OUOs36NA6pKAFwaEo4tDFIUWxGYLgKw4BEYUuHaQg7XJ0kccsUmrT2qUUQZp8KO/y1hSfIYEf/5eHu0MoGU1+sIbSw5Bypd92S+dWWrd34b15vuOPY4QxuvtYZp0lIVk3Zgjt+5zkh12AvBHnbW85BOjXySPwhc5CYcY0OdDh5dEUqIEj4cN8Dty3a1MqYJS4MaWU5wzVLwMMxqGSNQgA/VFa4gf50yhxSUW+db8ACa2gBxfnABVDFYHCPYrc7TLwCepJM8/ZoVsRwpxdHEozHUXd6idwVzFFM5BFmIhQVQjrNdnCvdd48wblI2VHtsAZioSsTYVwLoXvjMXH1icuNgPhQE+Ot1+xi8HeA3d1Df1f1JPVUOmsYLujBjuSySqSXYt+yTwbJ0pcyIhqTrxkn0BazRLizJosxRBued+z0jPD6VewOXl5utHRGmMNK3k0iTkzxpq2/oIQO6gLprF12kT/R20eyzlcg7iwK0dPsz/ibpdsCHweWwAAAABJRU5ErkJggg==) 0 0 no-repeat;background-size:60%;bottom:-19px;left:-2px}.markdown-body h4{font-size:16px;padding-left:0;border-bottom:1px solid rgba(209,163,78,.6)}.markdown-body h5{font-size:15px;padding-left:0}.markdown-body em{color:#cca152}.markdown-body del{text-decoration-color:#cca152;text-decoration-thickness:2px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:80%;margin:6px auto;box-shadow:0 6px 15px #8e8e8e;display:block;margin:20px auto!important;object-fit:contain;border-radius:8px}.markdown-body hr{border:none;border-top:2px solid #e0c9a1;margin-top:32px 0}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background:#f6efde;color:#b69454;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Mono,Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;background:#fef6e1;border-radius:4px;box-shadow:0 0 8px hsla(0,0%,47%,.45)}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAOCAMAAABaWb9VAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACHUExURUdwTMxCKdc8NvdYT/9hVyLJPABBAGubKNiIOv+/K+ytJBakH9aZG+5QR5VZDOBDPhmtJ8+VGuGjH/CwJR26MR6+NBq0LPW1KBmwKetNRfJUTONHP92fHuSmIeFEPhu3LR29M/BTS+mqIuqsI5qdHyLKPP++Kv9gVf9lW//KLSXXQCTQP//FLMVm5KQAAAAldFJOUwAlPPz7+woBBPu8Mzu+FlRRKmvnweeG+Wqg6mVNXmuc1OCbmjZJWF/9AAABKklEQVQoz3WS6XaCMBCFRzAM++KGsqhtDwES3//5OtmA2uP9A9zwzRoAgBC0QgQrdA68OZsDr229YGHoIEj7Pl0ZOgjKa5lYJ4Rd1vijn3nuD4Qurjmv48o6RFyfbGDnS6DeEXZfk5ZfuBhdPb9I87ECNMh1EFJKIU6agWzaa01NbmLkxznSmmObJBkkUxrERf3i+ftRiZi7ShPCYY64UhTx1AR5CDYoMXkOKEY7GmTcTzeD/FiER68DfSLgSRqEIBoB3P8h3x8RZhBXGJGusJdD6rfCBl0YqvZNkrV9zej2cWlfJWG6fRpyM41qYH+GTPPi2yFLQYC0Qybm5o96lW77kMbcrBKtgeWTsthVamNXFF4I6x0DTPuugsVRFyYpyxzWqNvHJwed8ws7QyP1UwjNjwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fef6e1}.markdown-body a{text-decoration:none;color:#d8ac5a;border-bottom:1px solid #d8ac5a}.markdown-body a:active,.markdown-body a:hover{color:#93753f;border-color:#93753f}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f4e8c7;border-collapse:collapse}.markdown-body thead{background:rgba(255,227,176,.6588235294);text-align:left;display:table-header-group;border-bottom:1px solid rgba(255,227,176,.6588235294)}.markdown-body tbody{background:rgba(255,247,229,.3882352941)}.markdown-body td,.markdown-body th{padding:7px;line-height:24px;min-width:100px}.markdown-body blockquote{color:#bd954f;padding:1px 23px;margin:22px 0;border-left:4px solid #dcb267;background-color:#fff7e5}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol .task-list-item,.markdown-body ul .task-list-item{list-style:none}.markdown-body ol li{padding-left:6px}.markdown-body::marker{color:#dcb267}.markdown-body .contains-task-list{padding-left:0}.markdown-body .contains-task-list .task-list-item{list-style:none;position:relative}.markdown-body .contains-task-list .task-list-item input[type=checkbox]{position:relative;top:2px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:before{content:"";display:inline-block;height:12px;width:12px;position:absolute;left:-2px;top:-2px;border:2px solid #cda152;border-radius:5px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:checked{position:relative;top:2px}.markdown-body .contains-task-list .task-list-item input[type=checkbox]:checked:before{border:none;content:"";display:inline-block;height:17px;width:17px;position:absolute;left:-2px;top:-2px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAAYhJREFUOBFjYACC0/MDGsDEiyvr/zOCeUwMJxn/A8HZRUEMYBFGJsZ6kFoQYALiAyAGCgDpA+sFijKeWRj4H1kWpIWBW1SDQcm+BCzOAiK/vr7BcO/gDbAAI4hE1waWgRBnmWCGIwkyKFjnwow0BhsJk9QLncvw5dV1oPE9MCEGmBWrgCKhcFEowyR+PSNYwemFAZ4M/xjMkRWYJm5oAPFB/joDpI1BHHQANgGPDxj+//vfCA4IdJ3GcevgQnAFhlHLwYIgSVA0wABcwY3tFQzokiBFGIEP0wmigW5wZAK5FFkQib0a6NUDcEmgb7AGFpIGZOZqoMFhIAFQknEAJpn9yLLEssFOBCp2IFaDkl0xg6C8FbJyB3gowUS5RdQYBORQYpVB1iwVHIIMwJh///AYTCmYRklNIBFmNi4GeYt0BhnjeIa3dw8wSBlEgDUhxw2yCRgGfHp2geHiqiSwUwUVrFAiFVkjjA1LrjgTHEwhFvosMCZM4NEIUoAtWWNoBGZ70/gN22HiAD2uhAzsYNBZAAAAAElFTkSuQmCC) 0 0 no-repeat;background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ˜é‡‘é€›C++å¸–å­æ—¶ï¼Œæ€»èƒ½çœ‹åˆ°æ–°æ‰‹é—®"ä¸ºä»€ä¹ˆæˆ‘çš„ä»£ç èƒ½è·‘ä½†æ€»è¢«reviewæ‰“å›"ï¼Ÿå…¶å®å¾ˆå¤šæ—¶å€™ä¸æ˜¯é€»è¾‘é”™äº†ï¼Œè€Œæ˜¯æ²¡æŒæ¡è¿™äº›"è¿›é˜¶ååŸºç¡€"çš„å®ç”¨æŠ€å·§â€”â€”æ—¢èƒ½å°‘è¸©å‘ï¼Œåˆèƒ½è®©ä»£ç æ›´ç®€æ´é«˜æ•ˆï¼Œé…ä¸Šæç®€ä¾‹å­ä¸€çœ‹å°±ä¼šï½</p>
<h2 data-id="heading-0">1. å‰å‘å£°æ˜ï¼šå¤´æ–‡ä»¶ä¾èµ–çš„"å‡è´Ÿç¥å™¨"</h2>
<p>è¿˜åœ¨å¤´æ–‡ä»¶é‡Œç–¯ç‹‚#includeï¼Ÿå‰å‘å£°æ˜èƒ½ç›´æ¥å‡å°‘ç¼–è¯‘ä¾èµ–ï¼Œè¿˜èƒ½è§£å†³å¾ªç¯ä¾èµ–é—®é¢˜ ï¼</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// forward.h ï¼ˆé›†ä¸­å­˜æ”¾å‰å‘å£°æ˜ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Document</span>; <span class="hljs-comment">// æ— éœ€åŒ…å«å®Œæ•´å®šä¹‰ï¼Œå£°æ˜å³å¯</span>

<span class="hljs-comment">// my_class.h</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"forward.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;memory&gt;</span></span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
    std::unique_ptr&lt;Document&gt; doc; <span class="hljs-comment">// æŒ‡é’ˆ/å¼•ç”¨ç±»å‹åªéœ€å‰å‘å£°æ˜</span>
};
</code></pre>
<p>Â </p>
<p>æ ¸å¿ƒä¼˜åŠ¿ï¼šç¼–è¯‘é€Ÿåº¦ç¿»å€ï¼Œé¿å…"æ”¹ä¸€ä¸ªå¤´æ–‡ä»¶å…¨å·¥ç¨‹é‡ç¼–"çš„ç—›è‹¦ã€‚</p>
<h2 data-id="heading-1">2. emplace_backï¼šå®¹å™¨æ’å…¥çš„"æ€§èƒ½ç‹è€…"</h2>
<p>åˆ«å†ç”¨push_backäº†ï¼<code>emplace_back</code>ç›´æ¥åœ¨å®¹å™¨å†…æ„é€ å¯¹è±¡ï¼Œçœå»ä¸´æ—¶å¯¹è±¡æ‹·è´çš„å¼€é”€ ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

std::vector&lt;std::string&gt; vec;
vec.<span class="hljs-built_in">push_back</span>(std::<span class="hljs-built_in">string</span>(<span class="hljs-string">"hello"</span>)); <span class="hljs-comment">// å…ˆæ„é€ ä¸´æ—¶å¯¹è±¡ï¼Œå†æ‹·è´</span>
vec.<span class="hljs-built_in">emplace_back</span>(<span class="hljs-string">"world"</span>); <span class="hljs-comment">// ç›´æ¥åœ¨vectoré‡Œæ„é€ ï¼Œé›¶æ‹·è´</span>
</code></pre>
<p>Â </p>
<p>é€‚ç”¨åœºæ™¯ï¼šæ‰€æœ‰æ”¯æŒçš„STLå®¹å™¨ï¼ˆvectorã€listã€mapç­‰ï¼‰ï¼Œæ’å…¥å¤æ‚å¯¹è±¡æ—¶æ•ˆæœè¶…æ˜æ˜¾ã€‚</p>
<h2 data-id="heading-2">3. é™æ€å·¥å‚æ–¹æ³•ï¼šå¯¹è±¡åˆ›å»ºçš„"å®‰å…¨å«å£«"</h2>
<p>æ„é€ å‡½æ•°æ²¡æ³•è¿”å›é”™è¯¯ï¼Ÿé™æ€å·¥å‚æ–¹æ³•èƒ½ä¼˜é›…å¤„ç†å¯¹è±¡åˆ›å»ºå¤±è´¥ï¼Œé¿å…éƒ¨åˆ†åˆå§‹åŒ–çš„å‘ ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;optional&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FileProcessor</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// é™æ€å·¥å‚æ–¹æ³•ï¼Œåˆ›å»ºå¤±è´¥è¿”å›nullopt</span>
    <span class="hljs-function"><span class="hljs-type">static</span> std::optional&lt;FileProcessor&gt; <span class="hljs-title">create</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; filename)</span> </span>{
        <span class="hljs-function">std::ifstream <span class="hljs-title">file</span><span class="hljs-params">(filename)</span></span>;
        <span class="hljs-keyword">if</span> (!file.<span class="hljs-built_in">is_open</span>()) <span class="hljs-keyword">return</span> std::<span class="hljs-literal">nullopt</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">FileProcessor</span>(std::<span class="hljs-built_in">move</span>(file)); <span class="hljs-comment">// ç§æœ‰æ„é€ ç¡®ä¿åˆå§‹åŒ–æˆåŠŸ</span>
    }
<span class="hljs-keyword">private</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">FileProcessor</span><span class="hljs-params">(std::ifstream file)</span> : file_(std::move(file)) {</span>}
    std::ifstream file_;
};

<span class="hljs-comment">// ä½¿ç”¨ï¼šåˆ›å»ºæˆåŠŸæ‰æ‰§è¡Œé€»è¾‘</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">auto</span> processor = FileProcessor::<span class="hljs-built_in">create</span>(<span class="hljs-string">"data.txt"</span>)) {
    processor-&gt;<span class="hljs-built_in">process</span>();
}
</code></pre>
<p>Â </p>
<h2 data-id="heading-3">4. ç»“æ„åŒ–ç»‘å®šï¼šè§£åŒ…çš„"æ‡’äººç¦éŸ³"</h2>
<p>ä¸ç”¨å†å†™<code>get&lt;0&gt;ã€get&lt;1&gt;</code>äº†ï¼ç»“æ„åŒ–ç»‘å®šèƒ½ç›´æ¥<code>è§£åŒ…tuple/pair</code>ï¼Œä»£ç æ¸…çˆ½åˆ°é£èµ·ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;tuple&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-comment">// è¿”å›å¤šä¸ªå€¼çš„å‡½æ•°</span>
<span class="hljs-function">std::tuple&lt;<span class="hljs-type">int</span>, std::string, <span class="hljs-type">float</span>&gt; <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> {<span class="hljs-number">101</span>, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">95.5</span>};
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">auto</span> [id, name, score] = <span class="hljs-built_in">getUser</span>(); <span class="hljs-comment">// ç›´æ¥ç»‘å®šä¸‰ä¸ªå˜é‡</span>
    <span class="hljs-comment">// id=101, name="å¼ ä¸‰", score=95.5</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>Â </p>
<h2 data-id="heading-4">5. ä½œç”¨åŸŸå®ˆå«ï¼šèµ„æºæ¸…ç†çš„"è‡ªåŠ¨ç®¡å®¶"</h2>
<p>æ€•å‡½æ•°ä¸­é€”<code>return</code>å¯¼è‡´èµ„æºæ³„æ¼ï¼Ÿä½œç”¨åŸŸå®ˆå«èƒ½ç¡®ä¿ç¦»å¼€ä½œç”¨åŸŸæ—¶è‡ªåŠ¨æ‰§è¡Œæ¸…ç†é€»è¾‘ ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;functional&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ScopeGuard</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">ScopeGuard</span><span class="hljs-params">(std::function&lt;<span class="hljs-type">void</span>()&gt; cleanup)</span> 
        : cleanup_(std::move(cleanup)), active_(true) {</span>}
    ~<span class="hljs-built_in">ScopeGuard</span>() { <span class="hljs-keyword">if</span> (active_) <span class="hljs-built_in">cleanup_</span>(); }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dismiss</span><span class="hljs-params">()</span> </span>{ active_ = <span class="hljs-literal">false</span>; } <span class="hljs-comment">// å¯å–æ¶ˆæ¸…ç†</span>
<span class="hljs-keyword">private</span>:
    std::function&lt;<span class="hljs-type">void</span>()&gt; cleanup_;
    <span class="hljs-type">bool</span> active_;
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">writeFile</span><span class="hljs-params">()</span> </span>{
    FILE* file = <span class="hljs-built_in">fopen</span>(<span class="hljs-string">"temp.txt"</span>, <span class="hljs-string">"w"</span>);
    <span class="hljs-function">ScopeGuard <span class="hljs-title">guard</span><span class="hljs-params">([&amp;]() { <span class="hljs-keyword">if</span> (file) fclose(file); })</span></span>; <span class="hljs-comment">// è‡ªåŠ¨å…³æ–‡ä»¶</span>
    
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">someError</span>()) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å³ä½¿æå‰è¿”å›ï¼Œæ–‡ä»¶ä¹Ÿä¼šå…³é—­</span>
}
</code></pre>
<p>Â </p>
<h2 data-id="heading-5">6. constexprï¼šç¼–è¯‘æœŸè®¡ç®—çš„"æ€§èƒ½åŠ é€Ÿå™¨"</h2>
<p>æŠŠèƒ½åœ¨ç¼–è¯‘æœŸç®—çš„é€»è¾‘äº¤ç»™ç¼–è¯‘å™¨ï¼Œè¿è¡Œæ—¶é›¶å¼€é”€ï¼Œè¿˜èƒ½ç”¨ä½œå¸¸é‡è¡¨è¾¾å¼ ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç¼–è¯‘æœŸè®¡ç®—é˜¶ä¹˜</span>
<span class="hljs-function"><span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> <span class="hljs-title">factorial</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> </span>{
    <span class="hljs-keyword">return</span> n &lt;= <span class="hljs-number">1</span> ? <span class="hljs-number">1</span> : n * <span class="hljs-built_in">factorial</span>(n - <span class="hljs-number">1</span>);
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">constexpr</span> <span class="hljs-type">int</span> size = <span class="hljs-built_in">factorial</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// ç¼–è¯‘æ—¶å°±ç®—å‡º120</span>
    <span class="hljs-type">int</span> arr[size]; <span class="hljs-comment">// å¯ç›´æ¥ç”¨ä½œæ•°ç»„å¤§å°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>Â </p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šè¯­è¨€çš„çˆ±æ„å‘Šç™½]]></title>    <link>https://juejin.cn/post/7575021014032564243</link>    <guid>https://juejin.cn/post/7575021014032564243</guid>    <pubDate>2025-11-21T14:35:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575021014032564243" data-draft-id="7575050949958434852" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šè¯­è¨€çš„çˆ±æ„å‘Šç™½"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-11-21T14:35:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èŠ±å¼€èŠ±å¯Œè´µ"/> <meta itemprop="url" content="https://juejin.cn/user/3220933005549171"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šè¯­è¨€çš„çˆ±æ„å‘Šç™½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3220933005549171/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èŠ±å¼€èŠ±å¯Œè´µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T14:35:39.000Z" title="Fri Nov 21 2025 14:35:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™å¼ å›¾ç‰‡ä»¥é»‘è‰²ä¸ºèƒŒæ™¯ï¼Œä¸­å¤®çªå‡ºæ˜¾ç¤ºç™½è‰²çš„ â€œå°é±¼â€ å­—æ ·ï¼Œå‘¨å›´ç¯ç»•ç€å¤šè¯­è¨€çš„ â€œæˆ‘å–œæ¬¢ä½ â€â€œæˆ‘çˆ±ä½ â€â€œå’Œæˆ‘äº¤å¾€å§â€â€œåœ¨ä¸€èµ·â€ ç­‰è¡¨è¾¾çˆ±æ…•ä¸äº¤å¾€æ„æ„¿çš„æ–‡å­—ï¼Œæ–‡å­—é¢œè‰²å¤šæ ·ï¼Œè¥é€ å‡ºä¸€ç§å……æ»¡çˆ±æ„çš„è§†è§‰æ°›å›´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/775fa0cfa4d44cde9ee8ed313f08d7d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iqx5byA6Iqx5a-M6LS1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764340539&amp;x-signature=VBCcq0jZRoznZKaPUh5CUdpeiMo%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pygame
<span class="hljs-keyword">import</span> random
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> math
<span class="hljs-keyword">import</span> os

<span class="hljs-comment"># åˆå§‹åŒ–pygame</span>
pygame.init()
<span class="hljs-comment"># çª—å£è®¾ç½®</span>
width, height = <span class="hljs-number">1000</span>, <span class="hljs-number">800</span>
screen = pygame.display.set_mode((width, height))

<span class="hljs-comment"># æ”¹è¿›çš„å­—ä½“è®¾ç½®å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_font</span>(<span class="hljs-params">size</span>):
    font_paths = [
        <span class="hljs-string">"C:/Windows/Fonts/simhei.ttf"</span>, <span class="hljs-string">"C:/Windows/Fonts/msyh.ttc"</span>, <span class="hljs-string">"C:/Windows/Fonts/simsun.ttc"</span>,
        <span class="hljs-string">"/System/Library/Fonts/PingFang.ttc"</span>, <span class="hljs-string">"/System/Library/Fonts/Arial.ttf"</span>,
        <span class="hljs-string">"/usr/share/fonts/truetype/droid/DroidSansFallbackFull.ttf"</span>, <span class="hljs-string">"/usr/share/fonts/truetype/wqy/wqy-microhei.ttc"</span>,
    ]
    <span class="hljs-keyword">for</span> font_path <span class="hljs-keyword">in</span> font_paths:
        <span class="hljs-keyword">if</span> os.path.exists(font_path):
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">return</span> pygame.font.Font(font_path, size)
            <span class="hljs-keyword">except</span>:
                <span class="hljs-keyword">continue</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">return</span> pygame.font.SysFont(<span class="hljs-string">"Arial"</span>, size)
    <span class="hljs-keyword">except</span>:
        <span class="hljs-keyword">return</span> pygame.font.Font(<span class="hljs-literal">None</span>, size)

<span class="hljs-comment"># åˆ›å»ºå­—ä½“å¯¹è±¡ï¼ˆå¼¹å¹•å­—ä½“ç¨å¤§ï¼Œä¿è¯æ¸…æ™°ï¼‰</span>
font = get_font(<span class="hljs-number">20</span>)
title_font = get_font(<span class="hljs-number">36</span>)
danmu_font = get_font(<span class="hljs-number">20</span>)  <span class="hljs-comment"># å¼¹å¹•å­—ä½“å¤§å°é€‚ä¸­</span>
<span class="hljs-comment"># æ–°å¢åå­—ä¸“ç”¨å­—ä½“ï¼ˆæ›´å¤§æ›´é†’ç›®ï¼‰</span>
name_font = get_font(<span class="hljs-number">60</span>)  <span class="hljs-comment"># å­—ä½“å¤§å°60ï¼Œçªå‡ºæ˜¾ç¤º</span>

<span class="hljs-comment"># å¤šè¯­è¨€â€œæˆ‘çˆ±ä½ â€æ–‡æœ¬åº“ï¼ˆåŸå†…å®¹å®Œå…¨ä¿ç•™ï¼‰</span>
love_texts = [
    <span class="hljs-string">"Mola le offi la tee"</span>, <span class="hljs-string">"mihai amestiah sind"</span>, <span class="hljs-string">"milvini un ne seibesc"</span>, <span class="hljs-string">"Le sakam"</span>, <span class="hljs-string">"Mlohuujam"</span>,
    <span class="hljs-string">"Te sakam"</span>, <span class="hljs-string">"chami dÃ i e n ki n M"</span>, <span class="hljs-string">"Te dua"</span>, <span class="hljs-string">"TÃ© okabescu"</span>, <span class="hljs-string">"TÃ¡ grÃ¡ agam duit"</span>, <span class="hljs-string">"Kocham Ci"</span>,
    <span class="hljs-string">"Saya cintakan kamu"</span>, <span class="hljs-string">"æˆ‘çˆ±ä½ "</span>, <span class="hljs-string">"Te ambesc"</span>, <span class="hljs-string">"Mahal kita"</span>, <span class="hljs-string">"Jeg elsker deg"</span>, <span class="hljs-string">"Mihaji tÃ©"</span>, <span class="hljs-string">"Meng sona"</span>,
    <span class="hljs-string">"SzerethÃ©kda"</span>, <span class="hljs-string">"Jag Tjukin"</span>, <span class="hljs-string">"Teja amerhi"</span>, <span class="hljs-string">"L kertesi skarji"</span>, <span class="hljs-string">"joga nem lesen"</span>, <span class="hljs-string">"nyolyomni"</span>,
    <span class="hljs-string">"I love you"</span>, <span class="hljs-string">"Je t'aime"</span>, <span class="hljs-string">"Ich liebe dich"</span>, <span class="hljs-string">"Ti amo"</span>, <span class="hljs-string">"Te amo"</span>, <span class="hljs-string">"ã‚ã„ã—ã¦ã‚‹"</span>,
    <span class="hljs-string">"æˆ‘çˆ±ä½ "</span>, <span class="hljs-string">"æˆ‘ä¸­æ„ä½ "</span>, <span class="hljs-string">"æˆ‘çˆ±ä¾¬"</span>, <span class="hljs-string">"æˆ‘æ¬¢å–œä½ "</span>, <span class="hljs-string">"æˆ‘çˆ±ä½ "</span>, <span class="hljs-string">"æˆ‘æ„›ä½ "</span>, <span class="hljs-string">"å‹¾ä¹°è’™"</span>, <span class="hljs-string">"é¢çˆ±ä½ "</span>,<span class="hljs-string">"æˆ‘å¾…è§ä½ "</span>
    <span class="hljs-string">"æ©æ¬¢å–œä½ "</span>, <span class="hljs-string">"æˆ‘çˆ±åˆ—"</span>, <span class="hljs-string">"Ik hou van je"</span>, <span class="hljs-string">"Saya cintakan mu"</span>, <span class="hljs-string">"Ti amo"</span>, <span class="hljs-string">"Jeg elsker dig"</span>,
    <span class="hljs-string">"Aku cinta padamu"</span>, <span class="hljs-string">"Saya cinta kamu"</span>, <span class="hljs-string">"Ljubim te"</span>, <span class="hljs-string">"ä¿ºå–œæ¬¢"</span>, <span class="hljs-string">"æˆ‘ç¨€ç½•ä½ "</span>, <span class="hljs-string">"ä¿ºç¨€ç½•ä½ "</span>,<span class="hljs-string">"é˜¿ç§‹æ‹‰å˜"</span>
]

<span class="hljs-comment"># çˆ±å¿ƒåæ ‡ç”Ÿæˆï¼ˆåŸé€»è¾‘å®Œå…¨ä¿ç•™ï¼Œæœªåšä»»ä½•ä¿®æ”¹ï¼‰</span>
love_points = []
<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>):
    theta = t / <span class="hljs-number">1000</span> * <span class="hljs-number">2</span> * math.pi
    x = <span class="hljs-number">15</span> * (<span class="hljs-built_in">pow</span>(math.sin(theta), <span class="hljs-number">3</span>))
    y = <span class="hljs-number">10</span> * math.cos(theta) - <span class="hljs-number">5</span> * math.cos(<span class="hljs-number">2</span> * theta) - <span class="hljs-number">2</span> * math.cos(<span class="hljs-number">3</span> * theta) - math.cos(<span class="hljs-number">4</span> * theta)
    x = x * <span class="hljs-number">18</span> + width // <span class="hljs-number">2</span>
    y = -y * <span class="hljs-number">18</span> + height // <span class="hljs-number">2</span>
    love_points.append((<span class="hljs-built_in">int</span>(x), <span class="hljs-built_in">int</span>(y)))

<span class="hljs-comment"># æ–‡å­—å¯¹è±¡åˆ—è¡¨ï¼ˆåŸé€»è¾‘å®Œå…¨ä¿ç•™ï¼Œæœªåšä»»ä½•ä¿®æ”¹ï¼‰</span>
text_objects = []
colors = [(<span class="hljs-number">255</span>, <span class="hljs-number">182</span>, <span class="hljs-number">193</span>), (<span class="hljs-number">255</span>, <span class="hljs-number">105</span>, <span class="hljs-number">180</span>), (<span class="hljs-number">255</span>, <span class="hljs-number">20</span>, <span class="hljs-number">147</span>),(<span class="hljs-number">218</span>,<span class="hljs-number">112</span>,<span class="hljs-number">214</span>)]
<span class="hljs-keyword">for</span> i, text <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(love_texts):
    color = colors[i % <span class="hljs-built_in">len</span>(colors)]
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(text, <span class="hljs-built_in">str</span>):
            text = <span class="hljs-built_in">str</span>(text)
        text_surface = font.render(text, <span class="hljs-literal">True</span>, color)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¸²æŸ“å¤±è´¥ '<span class="hljs-subst">{text}</span>': <span class="hljs-subst">{e}</span>"</span>)
        text_surface = font.render(<span class="hljs-string">"Love"</span>, <span class="hljs-literal">True</span>, color)
    idx = random.randint(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(love_points) - <span class="hljs-number">1</span>)
    x, y = love_points[idx]
    speed_x = random.uniform(-<span class="hljs-number">0.15</span>, <span class="hljs-number">0.15</span>)
    speed_y = random.uniform(-<span class="hljs-number">0.15</span>, <span class="hljs-number">0.15</span>)
    text_objects.append({
        <span class="hljs-string">"surface"</span>: text_surface, <span class="hljs-string">"text"</span>: text, <span class="hljs-string">"x"</span>: x, <span class="hljs-string">"y"</span>: y,
        <span class="hljs-string">"speed_x"</span>: speed_x, <span class="hljs-string">"speed_y"</span>: speed_y, <span class="hljs-string">"target_idx"</span>: idx, <span class="hljs-string">"color"</span>: color
    })

<span class="hljs-comment"># ===================== å¼¹å¹•åŠŸèƒ½ï¼ˆæŒ‰è¦æ±‚ä¼˜åŒ–ï¼‰=====================</span>
<span class="hljs-comment"># å¼¹å¹•ä»…ä¿ç•™3æ¡ä¸­æ–‡æ–‡æ¡ˆ</span>
danmu_texts = [<span class="hljs-string">"æˆ‘çˆ±ä½ "</span>, <span class="hljs-string">"åœ¨ä¸€èµ·"</span>, <span class="hljs-string">"æˆ‘å–œæ¬¢ä½ "</span>,<span class="hljs-string">"å’Œæˆ‘äº¤å¾€å§"</span>,<span class="hljs-string">"é˜¿ç§‹æ‹‰å˜"</span>]
<span class="hljs-comment"># å¼¹å¹•ä»…ä¸€ç§ç²‰è‰²ï¼ˆé²œè‰³ä¸”åè°ƒï¼‰</span>
danmu_color = (<span class="hljs-number">255</span>,<span class="hljs-number">239</span>,<span class="hljs-number">213</span>)  <span class="hljs-comment"># çƒ­ç²‰è‰²</span>

<span class="hljs-comment"># å¼¹å¹•å¯¹è±¡ç±»ï¼ˆé€Ÿåº¦åŠ å¿«ï¼Œæ·¡å…¥æ·¡å‡ºèŠ‚å¥ç´§å‡‘ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Danmu</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.text = random.choice(danmu_texts)
        self.font_size = random.randint(<span class="hljs-number">18</span>, <span class="hljs-number">24</span>)  <span class="hljs-comment"># å­—ä½“å¤§å°éšæœº</span>
        self.font = get_font(self.font_size)
        self.color = danmu_color
        <span class="hljs-comment"># éšæœºä½ç½®ï¼ˆå…¨å±åˆ†å¸ƒï¼Œæ”¯æŒå·¦å³/ä¸Šä¸‹åŒå‘è¿åŠ¨ï¼‰</span>
        <span class="hljs-keyword">if</span> random.random() &gt; <span class="hljs-number">0.5</span>:
            <span class="hljs-comment"># ä»å·¦å‘å³è¿åŠ¨</span>
            self.x = random.randint(-<span class="hljs-number">100</span>, -<span class="hljs-number">20</span>)
            self.y = random.randint(<span class="hljs-number">50</span>, height - <span class="hljs-number">50</span>)
            self.speed_x = random.uniform(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)  <span class="hljs-comment"># åŠ å¿«æ°´å¹³é€Ÿåº¦</span>
            self.speed_y = random.uniform(-<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>)  <span class="hljs-comment"># è½»å¾®å‚ç›´åç§»</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># ä»å³å‘å·¦è¿åŠ¨</span>
            self.x = random.randint(width + <span class="hljs-number">20</span>, width + <span class="hljs-number">100</span>)
            self.y = random.randint(<span class="hljs-number">50</span>, height - <span class="hljs-number">50</span>)
            self.speed_x = random.uniform(-<span class="hljs-number">5</span>, -<span class="hljs-number">3</span>)  <span class="hljs-comment"># åŠ å¿«æ°´å¹³é€Ÿåº¦</span>
            self.speed_y = random.uniform(-<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>)  <span class="hljs-comment"># è½»å¾®å‚ç›´åç§»</span>
        self.alpha = <span class="hljs-number">0</span>  <span class="hljs-comment"># åˆå§‹é€æ˜åº¦ä¸º0</span>
        self.life = random.randint(<span class="hljs-number">80</span>, <span class="hljs-number">150</span>)  <span class="hljs-comment"># ç”Ÿå‘½å‘¨æœŸç¼©çŸ­ï¼ˆé€Ÿåº¦å¿«å¯¹åº”çŸ­ç”Ÿå‘½å‘¨æœŸï¼‰</span>
        self.life_count = <span class="hljs-number">0</span>
        self.surface = self._render_text()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_render_text</span>(<span class="hljs-params">self</span>):
        surf = self.font.render(self.text, <span class="hljs-literal">True</span>, self.color)
        surf.set_alpha(self.alpha)
        <span class="hljs-keyword">return</span> surf

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">self</span>):
        self.life_count += <span class="hljs-number">1</span>
        <span class="hljs-comment"># å¿«é€Ÿæ·¡å…¥ï¼ˆå‰20%ç”Ÿå‘½å‘¨æœŸå®Œæˆæ·¡å…¥ï¼‰</span>
        <span class="hljs-keyword">if</span> self.life_count &lt; self.life * <span class="hljs-number">0.2</span>:
            self.alpha = <span class="hljs-built_in">min</span>(<span class="hljs-number">255</span>, self.alpha + <span class="hljs-number">15</span>)  <span class="hljs-comment"># åŠ å¿«æ·¡å…¥é€Ÿåº¦</span>
        <span class="hljs-comment"># å¿«é€Ÿæ·¡å‡ºï¼ˆå30%ç”Ÿå‘½å‘¨æœŸå®Œæˆæ·¡å‡ºï¼‰</span>
        <span class="hljs-keyword">elif</span> self.life_count &gt; self.life * <span class="hljs-number">0.7</span>:
            self.alpha = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, self.alpha - <span class="hljs-number">10</span>)  <span class="hljs-comment"># åŠ å¿«æ·¡å‡ºé€Ÿåº¦</span>
        <span class="hljs-comment"># æ›´æ–°é€æ˜åº¦å’Œä½ç½®ï¼ˆé€Ÿåº¦åŠ å¿«ï¼‰</span>
        self.surface.set_alpha(self.alpha)
        self.x += self.speed_x
        self.y += self.speed_y
        <span class="hljs-comment"># ç”Ÿå‘½å‘¨æœŸç»“æŸæˆ–è¶…å‡ºå±å¹•åˆ™é‡ç½®</span>
        <span class="hljs-keyword">if</span> self.life_count &gt;= self.life <span class="hljs-keyword">or</span> self.x &lt; -<span class="hljs-number">200</span> <span class="hljs-keyword">or</span> self.x &gt; width + <span class="hljs-number">200</span>:
            self.__init__()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">draw</span>(<span class="hljs-params">self, screen</span>):
        rect = self.surface.get_rect(center=(self.x, self.y))
        screen.blit(self.surface, rect)

<span class="hljs-comment"># åˆå§‹åŒ–å¼¹å¹•ï¼ˆåˆå§‹30æ¡ï¼Œæ•°é‡é€‚ä¸­ä¸é®æŒ¡çˆ±å¿ƒï¼‰</span>
danmu_list = [Danmu() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">30</span>)]
<span class="hljs-comment"># å¼¹å¹•ç”Ÿæˆè®¡æ—¶å™¨ï¼ˆç”Ÿæˆé¢‘ç‡åŠ å¿«ï¼‰</span>
danmu_spawn_timer = <span class="hljs-number">0</span>
danmu_spawn_interval = <span class="hljs-number">20</span>  <span class="hljs-comment"># æ¯20å¸§ï¼ˆçº¦0.3ç§’ï¼‰æ–°å¢1æ¡å¼¹å¹•</span>

<span class="hljs-comment"># åŸæ ‡é¢˜ä¸è¯´æ˜æ–‡å­—ï¼ˆä¿ç•™ï¼‰</span>
<span class="hljs-keyword">try</span>:
    title_text = title_font.render(<span class="hljs-string">""</span>, <span class="hljs-literal">True</span>, (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>))
<span class="hljs-keyword">except</span>:
    title_text = title_font.render(<span class="hljs-string">"I Love You + Pink Danmu"</span>, <span class="hljs-literal">True</span>, (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>))
instruction_font = get_font(<span class="hljs-number">16</span>)
instruction_text = instruction_font.render(<span class="hljs-string">"æŒ‰ESCé”®é€€å‡º"</span>, <span class="hljs-literal">True</span>, (<span class="hljs-number">150</span>, <span class="hljs-number">150</span>, <span class="hljs-number">150</span>))

<span class="hljs-comment"># ç”Ÿæˆå±…ä¸­æ˜¾ç¤ºçš„åå­—ï¼ˆç™½è‰²ï¼Œå±å¹•æ­£ä¸­é—´ï¼‰</span>
name_text = name_font.render(<span class="hljs-string">"å°é±¼"</span>, <span class="hljs-literal">True</span>, (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>))  <span class="hljs-comment"># ç™½è‰²æ–‡å­—</span>
<span class="hljs-comment"># è®¡ç®—åå­—å±…ä¸­åæ ‡ï¼ˆå±å¹•æ­£ä¸­å¿ƒï¼‰</span>
name_x = width // <span class="hljs-number">2</span> - name_text.get_width() // <span class="hljs-number">2</span>
name_y = height // <span class="hljs-number">2</span> - name_text.get_height() // <span class="hljs-number">2</span>

<span class="hljs-comment"># ä¸»å¾ªç¯ï¼ˆä»…æ·»åŠ åå­—ç»˜åˆ¶ï¼Œä¸æ”¹åŠ¨åŸæœ‰å†…å®¹ï¼‰</span>
clock = pygame.time.Clock()
running = <span class="hljs-literal">True</span>
<span class="hljs-keyword">while</span> running:
    <span class="hljs-comment"># äº‹ä»¶å¤„ç†ï¼ˆåŸé€»è¾‘ä¿ç•™ï¼‰</span>
    <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> pygame.event.get():
        <span class="hljs-keyword">if</span> event.<span class="hljs-built_in">type</span> == pygame.QUIT:
            running = <span class="hljs-literal">False</span>
        <span class="hljs-keyword">elif</span> event.<span class="hljs-built_in">type</span> == pygame.KEYDOWN:
            <span class="hljs-keyword">if</span> event.key == pygame.K_ESCAPE:
                running = <span class="hljs-literal">False</span>

    <span class="hljs-comment"># é»‘è‰²èƒŒæ™¯ï¼ˆåŸé€»è¾‘ä¿ç•™ï¼‰</span>
    screen.fill((<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))

    <span class="hljs-comment"># ç»˜åˆ¶æ ‡é¢˜ã€è¯´æ˜æ–‡å­—ï¼ˆåŸé€»è¾‘ä¿ç•™ï¼‰</span>
    screen.blit(title_text, (width // <span class="hljs-number">2</span> - title_text.get_width() // <span class="hljs-number">2</span>, <span class="hljs-number">20</span>))
    screen.blit(instruction_text, (width - instruction_text.get_width() - <span class="hljs-number">10</span>, height - <span class="hljs-number">30</span>))

    <span class="hljs-comment"># ç»˜åˆ¶çˆ±å¿ƒè½¨è¿¹æ–‡å­—ï¼ˆåŸé€»è¾‘å®Œå…¨ä¿ç•™ï¼Œæœªåšä»»ä½•ä¿®æ”¹ï¼‰</span>
    <span class="hljs-keyword">for</span> obj <span class="hljs-keyword">in</span> text_objects:
        text_rect = obj[<span class="hljs-string">"surface"</span>].get_rect(center=(obj[<span class="hljs-string">"x"</span>], obj[<span class="hljs-string">"y"</span>]))
        screen.blit(obj[<span class="hljs-string">"surface"</span>], text_rect)
        target_x, target_y = love_points[obj[<span class="hljs-string">"target_idx"</span>]]
        obj[<span class="hljs-string">"x"</span>] += (target_x - obj[<span class="hljs-string">"x"</span>]) * <span class="hljs-number">0.02</span> + obj[<span class="hljs-string">"speed_x"</span>]
        obj[<span class="hljs-string">"y"</span>] += (target_y - obj[<span class="hljs-string">"y"</span>]) * <span class="hljs-number">0.02</span> + obj[<span class="hljs-string">"speed_y"</span>]
        obj[<span class="hljs-string">"target_idx"</span>] = (obj[<span class="hljs-string">"target_idx"</span>] + <span class="hljs-number">1</span>) % <span class="hljs-built_in">len</span>(love_points)
        <span class="hljs-keyword">if</span> obj[<span class="hljs-string">"x"</span>] &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> obj[<span class="hljs-string">"x"</span>] &gt; width:
            obj[<span class="hljs-string">"speed_x"</span>] *= -<span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> obj[<span class="hljs-string">"y"</span>] &lt; <span class="hljs-number">50</span> <span class="hljs-keyword">or</span> obj[<span class="hljs-string">"y"</span>] &gt; height - <span class="hljs-number">50</span>:
            obj[<span class="hljs-string">"speed_y"</span>] *= -<span class="hljs-number">1</span>

    <span class="hljs-comment"># ===================== ç»˜åˆ¶å±…ä¸­åå­—ï¼ˆæ–°å¢ä»£ç ï¼‰=====================</span>
    screen.blit(name_text, (name_x, name_y))  <span class="hljs-comment"># åœ¨å±å¹•æ­£ä¸­é—´ç»˜åˆ¶ç™½è‰²åå­—</span>

    <span class="hljs-comment"># ===================== å¼¹å¹•æ›´æ–°ä¸ç»˜åˆ¶ï¼ˆæŒ‰è¦æ±‚ä¼˜åŒ–ï¼‰=====================</span>
    <span class="hljs-comment"># åŠ å¿«å¼¹å¹•ç”Ÿæˆé¢‘ç‡</span>
    danmu_spawn_timer += <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> danmu_spawn_timer &gt;= danmu_spawn_interval:
        danmu_list.append(Danmu())
        danmu_spawn_timer = <span class="hljs-number">0</span>
        <span class="hljs-comment"># é™åˆ¶å¼¹å¹•æ€»æ•°ï¼ˆæœ€å¤š50æ¡ï¼Œé¿å…è¿‡åº¦æ‹¥æŒ¤ï¼‰</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(danmu_list) &gt; <span class="hljs-number">50</span>:
            danmu_list.pop(<span class="hljs-number">0</span>)

    <span class="hljs-comment"># æ›´æ–°å¹¶ç»˜åˆ¶æ‰€æœ‰å¼¹å¹•ï¼ˆé€Ÿåº¦åŠ å¿«ï¼Œç²‰è‰²ç³»ï¼Œä»…ä¸­æ–‡æ–‡æ¡ˆï¼‰</span>
    <span class="hljs-keyword">for</span> danmu <span class="hljs-keyword">in</span> danmu_list:
        danmu.update()
        danmu.draw(screen)

    <span class="hljs-comment"># æ˜¾ç¤ºå¸§ç‡ï¼ˆåŸé€»è¾‘ä¿ç•™ï¼‰</span>
    fps_text = font.render(<span class="hljs-string">f"FPS: <span class="hljs-subst">{<span class="hljs-built_in">int</span>(clock.get_fps())}</span>"</span>, <span class="hljs-literal">True</span>, (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>))
    screen.blit(fps_text, (<span class="hljs-number">10</span>, height - <span class="hljs-number">30</span>))

    pygame.display.flip()
    clock.tick(<span class="hljs-number">60</span>)

pygame.quit()
sys.exit()
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Suite v6ï¼šé¢å‘ç°ä»£åŒ–çš„ç¨³å¥å‡çº§]]></title>    <link>https://juejin.cn/post/7574978545145135139</link>    <guid>https://juejin.cn/post/7574978545145135139</guid>    <pubDate>2025-11-22T02:25:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574978545145135139" data-draft-id="7574978545145085987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Suite v6ï¼šé¢å‘ç°ä»£åŒ–çš„ç¨³å¥å‡çº§"/> <meta itemprop="keywords" content="GitHub,å‰ç«¯æ¡†æ¶,React.js"/> <meta itemprop="datePublished" content="2025-11-22T02:25:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¼†å·¥"/> <meta itemprop="url" content="https://juejin.cn/user/1345457961570638"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Suite v6ï¼šé¢å‘ç°ä»£åŒ–çš„ç¨³å¥å‡çº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1345457961570638/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¼†å·¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:25:17.000Z" title="Sat Nov 22 2025 02:25:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>React Suite (rsuite) v6 æ­£å¼å‘å¸ƒäº†ã€‚è¿™ä¸€ç‰ˆæœ¬èšç„¦äºç°ä»£åŒ–æ”¹é€ ï¼šé‡æ„åº•å±‚æ ·å¼ç³»ç»Ÿã€æä¾›æ–°çš„å¸ƒå±€èƒ½åŠ›ï¼Œå¹¶æ•´ä½“æå‡å“åº”å¼ä½“éªŒå’Œå¼€å‘æµç¨‹ã€‚v6 ä»£è¡¨ React Suite åœ¨ç¨³å®šæ€§çš„å‰æä¸‹ï¼ŒæŒç»­å‘æ›´å…·é€‚åº”æ€§çš„ UI æ–¹æ¡ˆæ¼”è¿›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96a8f14ddedb4943a062fc53974cb997~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ryG5bel:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764383117&amp;x-signature=%2FmhdiOE%2Fof0ThPdJUoAFX3pqy34%3D" alt="React Suite v6 Banner" loading="lazy"/></p>
<h2 data-id="heading-0">1. æ ·å¼ç³»ç»Ÿçš„å…¨é¢é‡æ„ï¼šæ‹¥æŠ± CSS å˜é‡</h2>
<p>v6 æœ€é‡å¤§çš„åº•å±‚å˜é©æ˜¯å°†æ ·å¼ç³»ç»Ÿä» Less å½»åº•è¿ç§»åˆ°äº† <strong>SCSS</strong>ï¼Œå¹¶<strong>å…¨é¢é‡‡ç”¨ CSS å˜é‡ (CSS Variables)</strong> ä½œä¸ºä¸»é¢˜å®šåˆ¶çš„æ ¸å¿ƒæ–¹æ¡ˆã€‚å¼€å‘è€…åªéœ€è¦†ç›–å˜é‡å€¼ï¼Œå°±èƒ½åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢å“ç‰Œè‰²ã€é—´è·æˆ–åœ†è§’ï¼Œæ— éœ€é‡æ–°ç¼–è¯‘æˆ–é…ç½®é¢å¤–çš„æ„å»ºæµç¨‹ã€‚</p>
<p>å®Œæ•´çš„å˜é‡æ¸…å•ä¸ä½¿ç”¨æ–¹å¼ï¼Œå¯å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fguide%2Fcss-variables%2F" target="_blank" title="https://rsuitejs.com/guide/css-variables/" ref="nofollow noopener noreferrer">CSS Variables æ–‡æ¡£</a>ï¼Œä¹Ÿå¯ä»¥å€ŸåŠ© <a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fresources%2Fpalette%2F" target="_blank" title="https://rsuitejs.com/resources/palette/" ref="nofollow noopener noreferrer">Palette å·¥å…·</a> å¯è§†åŒ–è°ƒæ•´å“ç‰Œé…è‰²ã€‚</p>
<h3 data-id="heading-1">å…¶ä»–æ ·å¼ç³»ç»Ÿæ”¹è¿›</h3>
<ul>
<li><strong>é€»è¾‘å±æ€§ (Logical Properties)</strong>ï¼šå…¨é¢é‡‡ç”¨ CSS é€»è¾‘å±æ€§ï¼ˆå¦‚ <code>margin-inline-start</code> ä»£æ›¿ <code>margin-left</code>ï¼‰ï¼ŒåŸç”Ÿæ”¯æŒ RTLï¼ˆä»å³åˆ°å·¦ï¼‰æ’ç‰ˆã€‚</li>
<li><strong>rem å•ä½</strong>ï¼šå­—ä½“å¤§å°ã€é—´è·ç­‰å°ºå¯¸ä» <code>px</code> è½¬æ¢ä¸º <code>rem</code>ï¼Œæ›´å¥½åœ°æ”¯æŒå“åº”å¼æ’ç‰ˆå’Œæ— éšœç¢ç¼©æ”¾ã€‚</li>
</ul>
<h2 data-id="heading-2">2. æ‹¥æŠ± AI è¾…åŠ©ç¼–ç¨‹</h2>
<p>React Suite v6 ä¸ä»…å…³æ³¨ç»„ä»¶æœ¬èº«ï¼Œæ›´è‡´åŠ›äºæå‡ AI æ—¶ä»£çš„å¼€å‘æ•ˆç‡ã€‚æˆ‘ä»¬å¼•å…¥äº†å¯¹ AI ç¼–ç¨‹åŠ©æ‰‹çš„åŸç”Ÿæ”¯æŒï¼Œè®© Cursorã€Windsurf ç­‰å·¥å…·èƒ½æ›´æ‡‚ RSuiteã€‚</p>
<h3 data-id="heading-3">LLMs.txt æ”¯æŒ</h3>
<p>æˆ‘ä»¬éµå¾ª <a href="https://link.juejin.cn?target=https%3A%2F%2Fllmstxt.org%2F" target="_blank" title="https://llmstxt.org/" ref="nofollow noopener noreferrer">llms.txt</a> æ ‡å‡†ï¼Œä¸ºæ–‡æ¡£ç«™æ·»åŠ äº† <code>/llms.txt</code> æ–‡ä»¶ã€‚è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºå¤§è¯­è¨€æ¨¡å‹ (LLM) ä¼˜åŒ–çš„æ–‡æ¡£ç´¢å¼•ã€‚</p>
<p>å½“ä½ åœ¨ Cursor æˆ–å…¶ä»– AI å·¥å…·ä¸­å¼•ç”¨ RSuite æ–‡æ¡£æ—¶ï¼ŒAI å¯ä»¥é€šè¿‡è¿™ä¸ªæ–‡ä»¶å¿«é€Ÿè·å–ç»„ä»¶çš„ API å®šä¹‰ã€æœ€ä½³å®è·µå’Œä»£ç ç¤ºä¾‹ï¼Œä»è€Œç”Ÿæˆæ›´å‡†ç¡®ã€ç¬¦åˆ v6 è§„èŒƒçš„ä»£ç ã€‚</p>
<h3 data-id="heading-4">MCP Server é›†æˆ</h3>
<p>æˆ‘ä»¬æ¨å‡ºäº†å®˜æ–¹çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fguide%2Fmcp-server%2F" target="_blank" title="https://rsuitejs.com/guide/mcp-server/" ref="nofollow noopener noreferrer">Model Context Protocol (MCP)</a> Serverã€‚</p>
<p>é€šè¿‡ MCPï¼Œä½ çš„ AI åŠ©æ‰‹å¯ä»¥ç›´æ¥è¿æ¥åˆ° RSuite çš„çŸ¥è¯†åº“ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>å®æ—¶æ£€ç´¢</strong>ï¼šAI å¯ä»¥ç›´æ¥è¯»å–æœ€æ–°çš„ç»„ä»¶æ–‡æ¡£å’Œ APIï¼Œæ— éœ€æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥</strong>ï¼šåœ¨ç¼–å†™ä»£ç æ—¶ï¼ŒAI èƒ½è‡ªåŠ¨æ¨èé€‚åˆå½“å‰åœºæ™¯çš„ç»„ä»¶å’Œå±æ€§ã€‚</li>
<li><strong>å‡å°‘å¹»è§‰</strong>ï¼šåŸºäºå®˜æ–¹æ–‡æ¡£çš„ä¸Šä¸‹æ–‡æŠ•å–‚ï¼Œå¤§å¹…é™ä½ AI ç”Ÿæˆè¿‡æ—¶æˆ–é”™è¯¯ä»£ç çš„æ¦‚ç‡ã€‚</li>
</ul>
<h2 data-id="heading-5">3. å¸ƒå±€èƒ½åŠ›çš„åŸå­åŒ–ï¼šå¼•å…¥ Box ä¸ Center</h2>
<p>ä¸ºäº†è®©å¸ƒå±€æ›´åŠ çµæ´»é«˜æ•ˆï¼Œv6 å¼•å…¥äº†åŸºç¡€çš„å¸ƒå±€åŸå­ç»„ä»¶ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿåƒæ­ç§¯æœ¨ä¸€æ ·æ„å»ºå¤æ‚çš„ UIã€‚</p>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fbox%2F" target="_blank" title="https://rsuitejs.com/components/box/" ref="nofollow noopener noreferrer">Box ç»„ä»¶</a></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fbox%2F" target="_blank" title="https://rsuitejs.com/components/box/" ref="nofollow noopener noreferrer"><code>Box</code></a> æ˜¯æ„å»ºå¸ƒå±€çš„åŸºçŸ³ï¼Œå®ƒå…è®¸ä½ ç›´æ¥åœ¨ç»„ä»¶ä¸Šé€šè¿‡ props æ§åˆ¶æ ·å¼ï¼Œæ— éœ€ç¼–å†™é¢å¤–çš„ CSS ç±»ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Box</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'rsuite'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">p</span>=<span class="hljs-string">{20}</span> <span class="hljs-attr">m</span>=<span class="hljs-string">{10}</span> <span class="hljs-attr">bg</span>=<span class="hljs-string">"gray-100"</span> <span class="hljs-attr">borderRadius</span>=<span class="hljs-string">{8}</span> <span class="hljs-attr">display</span>=<span class="hljs-string">"flex"</span> <span class="hljs-attr">justifyContent</span>=<span class="hljs-string">"space-between"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Welcome to v6<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">appearance</span>=<span class="hljs-string">"primary"</span>&gt;</span>Get Started<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fcenter%2F" target="_blank" title="https://rsuitejs.com/components/center/" ref="nofollow noopener noreferrer">Center ç»„ä»¶</a></h3>
<p>å‚ç›´æ°´å¹³å±…ä¸­ä¸€ç›´æ˜¯ CSS ä¸­çš„é«˜é¢‘éœ€æ±‚ï¼Œç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fcenter%2F" target="_blank" title="https://rsuitejs.com/components/center/" ref="nofollow noopener noreferrer"><code>Center</code></a> ç»„ä»¶è½»æ¾å®ç°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Center</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'rsuite'</span>;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Center</span> <span class="hljs-attr">height</span>=<span class="hljs-string">{200}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-50"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Perfectly Centered Content<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Center</span>&gt;</span></span>;
</code></pre>
<h2 data-id="heading-8">4. å“åº”å¼è®¾è®¡çš„å…¨é¢å¢å¼º</h2>
<p>åœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼Œè·¨ç«¯é€‚é…è‡³å…³é‡è¦ã€‚v6 å¯¹æ ¸å¿ƒç»„ä»¶è¿›è¡Œäº†å“åº”å¼èƒ½åŠ›çš„å¢å¼ºã€‚</p>
<ul>
<li>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fgrid%2F" target="_blank" title="https://rsuitejs.com/components/grid/" ref="nofollow noopener noreferrer">Grid</a> ç³»ç»Ÿå‡çº§</strong>ï¼šé‡æ„äº† <code>Row</code> å’Œ <code>Col</code>ï¼Œæä¾›æ›´çµæ´»çš„æ–­ç‚¹æ§åˆ¶å¯¹è±¡è¯­æ³•ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Row</span> align=<span class="hljs-string">"center"</span> justify=<span class="hljs-string">"space-between"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Col</span> <span class="hljs-attr">span</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">xs:</span> <span class="hljs-attr">24</span>, <span class="hljs-attr">md:</span> <span class="hljs-attr">12</span>, <span class="hljs-attr">lg:</span> <span class="hljs-attr">8</span> }}&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">Col</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Col</span> <span class="hljs-attr">span</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">xs:</span> <span class="hljs-attr">24</span>, <span class="hljs-attr">md:</span> <span class="hljs-attr">12</span>, <span class="hljs-attr">lg:</span> <span class="hljs-attr">8</span> }}&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">Col</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Row</span>&gt;
</code></pre>
</li>
<li>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fnavbar%2F" target="_blank" title="https://rsuitejs.com/components/navbar/" ref="nofollow noopener noreferrer">Navbar</a> &amp; <a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fsidenav%2F" target="_blank" title="https://rsuitejs.com/components/sidenav/" ref="nofollow noopener noreferrer">Sidenav</a></strong>ï¼šæ–°å¢äº†å¯¹ç§»åŠ¨ç«¯çš„è‡ªé€‚åº”æ”¯æŒï¼Œä½¿ç”¨ <code>Navbar.Content</code> æ›¿ä»£äº†åºŸå¼ƒçš„ <code>pullRight</code>ï¼Œå¸ƒå±€æ›´æ¸…æ™°ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Navbar</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navbar.Brand</span>&gt;</span>BRAND<span class="hljs-tag">&lt;/<span class="hljs-name">Navbar.Brand</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navbar.Content</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Nav</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">Nav</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Navbar.Content</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navbar.Content</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Navbar.Content</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Navbar</span>&gt;
</code></pre>
</li>
<li>
<p><strong>Picker ç»„ä»¶</strong>ï¼šæ‰€æœ‰çš„ Picker ç»„ä»¶ç°åœ¨éƒ½æ‹¥æœ‰äº†æ›´å¥½çš„ç§»åŠ¨ç«¯é€‚é…ä½“éªŒï¼Œåœ¨å°å±å¹•è®¾å¤‡ä¸Šä¼šè‡ªåŠ¨åˆ‡æ¢ä¸ºæ›´å‹å¥½çš„äº¤äº’æ¨¡å¼ã€‚</p>
</li>
</ul>
<h2 data-id="heading-9">5. å…¨æ–°çš„ç»„ä»¶ä¸ Hooks</h2>
<p>é™¤äº†å¸ƒå±€ç»„ä»¶ï¼Œv6 è¿˜å¸¦æ¥äº†ä¸€ç³»åˆ—å®ç”¨çš„æ–°ç»„ä»¶å’Œ Hooksï¼Œè¿›ä¸€æ­¥ä¸°å¯Œäº†ç»„ä»¶åº“çš„èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-10">æ–°å¢ç»„ä»¶</h3>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fsegmented-control%2F" target="_blank" title="https://rsuitejs.com/components/segmented-control/" ref="nofollow noopener noreferrer"><strong>SegmentedControl</strong></a>ï¼šåˆ†æ®µæ§åˆ¶å™¨ï¼Œæä¾›æ›´ç°ä»£çš„é€‰é¡¹å¡åˆ‡æ¢ä½“éªŒï¼Œé€‚ç”¨äºç­›é€‰ã€è§†å›¾åˆ‡æ¢ç­‰åœºæ™¯ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fpassword-input%2F" target="_blank" title="https://rsuitejs.com/components/password-input/" ref="nofollow noopener noreferrer"><strong>PasswordInput</strong></a>ï¼šä¸“ç”¨çš„å¯†ç è¾“å…¥æ¡†ï¼Œå†…ç½®æ˜¾ç¤º/éšè—å¯†ç åˆ‡æ¢åŠŸèƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fpin-input%2F" target="_blank" title="https://rsuitejs.com/components/pin-input/" ref="nofollow noopener noreferrer"><strong>PinInput</strong></a>ï¼šPIN ç /éªŒè¯ç è¾“å…¥ç»„ä»¶ï¼Œæ”¯æŒè‡ªåŠ¨èšç„¦å’Œç²˜è´´åˆ†å‰²ï¼Œé€‚ç”¨äºéªŒè¯åœºæ™¯ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Ftextarea%2F" target="_blank" title="https://rsuitejs.com/components/textarea/" ref="nofollow noopener noreferrer"><strong>Textarea</strong></a>ï¼šç‹¬ç«‹çš„å¤šè¡Œæ–‡æœ¬è¾“å…¥ç»„ä»¶ï¼Œæä¾›æ›´å¥½çš„æ ·å¼æ§åˆ¶å’Œä¸€è‡´æ€§ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fkbd%2F" target="_blank" title="https://rsuitejs.com/components/kbd/" ref="nofollow noopener noreferrer"><strong>Kbd</strong></a>ï¼šç”¨äºå±•ç¤ºé”®ç›˜æŒ‰é”®ï¼Œæ–‡æ¡£ç«™å’Œå¿«æ·é”®æç¤ºçš„ç¦éŸ³ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Flink%2F" target="_blank" title="https://rsuitejs.com/components/link/" ref="nofollow noopener noreferrer"><strong>Link</strong></a>ï¼šæä¾›ç»Ÿä¸€æ ·å¼çš„é“¾æ¥ç»„ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰é¢œè‰²å’Œæ— éšœç¢è®¿é—®ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fmenu%2F" target="_blank" title="https://rsuitejs.com/components/menu/" ref="nofollow noopener noreferrer"><strong>Menu</strong></a> &amp; <a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fnavbar%2F%23mega-menu" target="_blank" title="https://rsuitejs.com/components/navbar/#mega-menu" ref="nofollow noopener noreferrer"><strong>MegaMenu</strong></a>ï¼šå…¨æ–°çš„èœå•ç³»ç»Ÿï¼Œæ”¯æŒæ›´å¤æ‚çš„å¯¼èˆªç»“æ„ï¼Œè½»æ¾æ„å»ºå¤§å‹åº”ç”¨å¯¼èˆªã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fform%2F" target="_blank" title="https://rsuitejs.com/components/form/" ref="nofollow noopener noreferrer"><strong>Form.Stack</strong></a>ï¼šè®©è¡¨å•å¸ƒå±€æ’åˆ—æ›´åŠ æ•´æ´æœ‰åºï¼Œæ›¿ä»£äº† Form ç»„ä»¶ä¸Šçš„å¸ƒå±€å±æ€§ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Form</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Form.Stack</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"horizontal"</span> <span class="hljs-attr">spacing</span>=<span class="hljs-string">{20}</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Form.Group</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Form.Label</span>&gt;</span>Username<span class="hljs-tag">&lt;/<span class="hljs-name">Form.Label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Form.Control</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Group</span>&gt;</span>
    {/* ... */}
  <span class="hljs-tag">&lt;/<span class="hljs-name">Form.Stack</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Form</span>&gt;
</code></pre>
</li>
</ul>
<h3 data-id="heading-11">å¼ºå¤§çš„ Hooks</h3>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fuse-dialog%2F" target="_blank" title="https://rsuitejs.com/components/use-dialog/" ref="nofollow noopener noreferrer"><strong>useDialog</strong></a>ï¼šé€šè¿‡å‡½æ•°è°ƒç”¨æ–¹å¼ç®¡ç†å¯¹è¯æ¡†ï¼Œå‘Šåˆ«ç¹ççš„ visible state ç®¡ç†ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> dialog = <span class="hljs-title function_">useDialog</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> dialog.<span class="hljs-title function_">confirm</span>({
    <span class="hljs-attr">title</span>: <span class="hljs-string">'ç¡®è®¤æ“ä½œ'</span>,
    <span class="hljs-attr">children</span>: <span class="hljs-string">'æ‚¨ç¡®å®šè¦æ‰§è¡Œæ­¤æ“ä½œå—ï¼Ÿ'</span>
  });
  <span class="hljs-keyword">if</span> (result) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Confirmed'</span>);
  }
};
</code></pre>
</li>
<li>
<p><strong>useFormControl</strong>ï¼šè½»æ¾åˆ›å»ºè‡ªå®šä¹‰çš„è¡¨å•æ§ä»¶ï¼Œè‡ªåŠ¨å¤„ç†éªŒè¯çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯ã€‚</p>
</li>
</ul>
<h2 data-id="heading-12">6. å¼€å‘è€…ä½“éªŒ (DX) çš„æè‡´è¿½æ±‚</h2>
<p>æˆ‘ä»¬æ·±çŸ¥å¼€å‘è€…çš„å¿«ä¹ä¸ä»…ä»…æ¥è‡ªäºå¥½ç”¨çš„ç»„ä»¶ï¼Œæ›´æ¥è‡ªäºæµç•…çš„å¼€å‘æµç¨‹ã€‚</p>
<ul>
<li><strong>å…¨é¢æ‹¥æŠ± Vitest</strong>ï¼šæˆ‘ä»¬å°†æµ‹è¯•æ¡†æ¶ä» Karma/Mocha è¿ç§»åˆ°äº† Vitestï¼Œæµ‹è¯•é€Ÿåº¦å¤§å¹…æå‡ï¼Œå¼€å‘åé¦ˆæ›´åŠ å³æ—¶ã€‚</li>
<li><strong>TypeScript ç±»å‹å¢å¼º</strong>ï¼šä¼˜åŒ–äº†æ‰€æœ‰ç»„ä»¶çš„ç±»å‹å¯¼å‡ºï¼Œæ–°å¢ Schema ç±»å‹å‘½åå¯¼å‡ºï¼Œæ™ºèƒ½æç¤ºæ›´åŠ ç²¾å‡†ã€‚</li>
<li><strong>Bundle Size ä¼˜åŒ–</strong>ï¼š
<ul>
<li>å¼•å…¥ size-limitï¼Œä¸¥æ ¼æŠŠæ§åŒ…ä½“ç§¯ã€‚</li>
</ul>
</li>
<li><strong>ç”Ÿæ€æ”¯æŒ</strong>ï¼šæ–°å¢ Bun å®‰è£…æŒ‡å—ï¼Œç´§è·Ÿå‰ç«¯å·¥å…·é“¾å‘å±•æ½®æµã€‚</li>
<li><strong>å¼€å‘è°ƒè¯•</strong>ï¼š<code>useToaster</code> å¢åŠ äº†ç¯å¢ƒæ£€æŸ¥ï¼Œå½“åœ¨ <code>CustomProvider</code> ä¸Šä¸‹æ–‡ä¹‹å¤–ä½¿ç”¨æ—¶ä¼šå‘å‡ºå‹å¥½è­¦å‘Šï¼Œå¸®åŠ©å¿«é€Ÿå®šä½é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-13">7. æ›´å¤šç»†èŠ‚æ”¹è¿›</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fbadge%2F" target="_blank" title="https://rsuitejs.com/components/badge/" ref="nofollow noopener noreferrer"><strong>Badge</strong></a>ï¼šæ–°å¢ <code>size</code>ã€<code>outline</code>ã€<code>placement</code> ç­‰å±æ€§ï¼Œæ”¯æŒæ›´ä¸°å¯Œçš„å±•ç¤ºå½¢æ€ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Badge</span> content=<span class="hljs-string">"New"</span> size=<span class="hljs-string">"lg"</span> outline /&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Badge</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{99}</span> <span class="hljs-attr">shape</span>=<span class="hljs-string">"square"</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">"bottomEnd"</span> /&gt;</span></span>
</code></pre>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fbreadcrumb%2F" target="_blank" title="https://rsuitejs.com/components/breadcrumb/" ref="nofollow noopener noreferrer"><strong>Breadcrumb</strong></a>ï¼šé»˜è®¤æ ·å¼è°ƒæ•´ï¼Œæ›´ç¬¦åˆç°ä»£è®¾è®¡è§„èŒƒã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fdate-picker%2F" target="_blank" title="https://rsuitejs.com/components/date-picker/" ref="nofollow noopener noreferrer"><strong>DatePicker</strong></a>ï¼šä¼˜åŒ–äº† Toolbar å¸ƒå±€ï¼Œäº¤äº’æ›´ç¬¦åˆç›´è§‰ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fprogress%2F" target="_blank" title="https://rsuitejs.com/components/progress/" ref="nofollow noopener noreferrer"><strong>Progress</strong></a>ï¼šæ–°å¢ <code>indeterminate</code> åŠ è½½åŠ¨ç”»çŠ¶æ€ï¼Œä»¥åŠæ”¯æŒåˆ†æ®µè¿›åº¦æ¡ (<code>sections</code>)ï¼Œå±•ç¤ºæ›´ä¸°å¯Œçš„ä¿¡æ¯ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Ftree-picker%2F" target="_blank" title="https://rsuitejs.com/components/tree-picker/" ref="nofollow noopener noreferrer"><strong>TreePicker</strong></a>ï¼šæ–°å¢ <code>onlyLeafSelectable</code> å±æ€§ï¼Œæ»¡è¶³ä»…å…è®¸é€‰æ‹©å¶å­èŠ‚ç‚¹çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Fbutton%2F" target="_blank" title="https://rsuitejs.com/components/button/" ref="nofollow noopener noreferrer"><strong>Button</strong></a>ï¼šæ–°å¢ toggle çŠ¶æ€æ”¯æŒã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fcomponents%2Finput%2F" target="_blank" title="https://rsuitejs.com/components/input/" ref="nofollow noopener noreferrer"><strong>InputGroup</strong></a>ï¼šä¼˜åŒ–äº† inside æ¨¡å¼ä¸‹çš„æŒ‰é’®æ ·å¼ï¼Œè§†è§‰æ›´åŠ åè°ƒã€‚</p>
</li>
<li>
<p><strong>ä¾èµ–å‡çº§</strong>ï¼šDate-fns 4.x, Prettier 3.x ç­‰æ ¸å¿ƒä¾èµ–å…¨é¢å‡çº§ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-14">ç«‹å³å¼€å§‹</h2>
<p>React Suite v6 ç°å·²é€šè¿‡ npm å‘å¸ƒã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm install rsuite@latest
</code></pre>
<p>æˆ‘ä»¬å‡†å¤‡äº†è¯¦ç»†çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Frsuitejs.com%2Fguide%2Fmigration-v6" target="_blank" title="https://rsuitejs.com/guide/migration-v6" ref="nofollow noopener noreferrer">è¿ç§»æŒ‡å—</a>ï¼Œå¸®åŠ©æ‚¨ä» v5 å¹³æ»‘å‡çº§ã€‚</p>
<p>æ¬¢è¿åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frsuite%2Frsuite" target="_blank" title="https://github.com/rsuite/rsuite" ref="nofollow noopener noreferrer">GitHub</a> ä¸Šç»™æˆ‘ä»¬ Starï¼Œæˆ–è€…åœ¨ Discussion ä¸­åˆ†äº«æ‚¨çš„ä½¿ç”¨ä½“éªŒï¼</p>
<p><strong>React Suite Team</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒŒ AIGCæ¨¡å‹çš„å†·å¯åŠ¨é—®é¢˜ï¼šWebåº”ç”¨çš„åˆæœŸæŠ€æœ¯æ”¯æ’‘ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7575022279568588841</link>    <guid>https://juejin.cn/post/7575022279568588841</guid>    <pubDate>2025-11-22T02:26:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575022279568588841" data-draft-id="7575050949959581732" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒŒ AIGCæ¨¡å‹çš„å†·å¯åŠ¨é—®é¢˜ï¼šWebåº”ç”¨çš„åˆæœŸæŠ€æœ¯æ”¯æ’‘ç­–ç•¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Trae"/> <meta itemprop="datePublished" content="2025-11-22T02:26:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒŒ AIGCæ¨¡å‹çš„å†·å¯åŠ¨é—®é¢˜ï¼šWebåº”ç”¨çš„åˆæœŸæŠ€æœ¯æ”¯æ’‘ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:26:48.000Z" title="Sat Nov 22 2025 02:26:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§Š ä¸€ã€å¼•è¨€ï¼šå½“AIè¿˜æ²¡â€œé†’æ¥â€</h2>
<p>åœ¨AIGCï¼ˆAI Generated Contentï¼‰æµªæ½®ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é‡åˆ°è¿™æ ·ä¸€ä¸ªå°´å°¬æ—¶åˆ»ï¼š</p>
<blockquote>
<p>äº§å“ä¸Šçº¿ç¬¬ä¸€å¤©ï¼Œç”¨æˆ·ç‚¹å¼€é¡µé¢ï¼ŒAIæ¨¡å‹æ²‰é»˜å¦‚å±±ã€‚<br/>
å›¢é˜Ÿçœ¨çœ¼äº’æœ›ï¼Œä¸€å¥â€œç¨ç­‰åŠ è½½â€æˆä¸ºé«˜é¢‘å°è¯ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€”â€”<strong>AIGCæ¨¡å‹çš„å†·å¯åŠ¨é—®é¢˜</strong>ã€‚<br/>
åˆ«è¢«è¿™ä¸ªè¯å“åˆ°ï¼Œå®ƒä¸æ˜¯ä»€ä¹ˆç„å­¦ï¼Œè€Œæ˜¯è®¡ç®—æœºç³»ç»Ÿåœ¨é¢å¯¹<strong>åˆå§‹èµ„æºåŒ®ä¹ã€æ¨¡å‹æœªçƒ­èº«ã€æ•°æ®ä¸è¶³ã€è¯·æ±‚æœªå®šå‹</strong>æ—¶çš„é‚£ç§<em>çµé­‚å†°ç‚¹</em>ã€‚<br/>
æƒ³è±¡ä¸€ä¸‹ï¼ŒAI æ¨¡å‹è¿˜åœ¨å–å®ƒçš„ç¬¬ä¸€æ¯å’–å•¡ï¼Œè€Œç”¨æˆ·å·²ç»åœ¨æ•²é”®ç›˜å‚¬å‘½ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§¬ äºŒã€å†·å¯åŠ¨çš„æœ¬è´¨ï¼šä¸€åœºä»é›¶åˆ°ã€Œä¸Šçº¿ã€çš„è¿›åŒ–</h2>
<p>ä»åº•å±‚åŸç†æ¥çœ‹ï¼ŒAIGC æ¨¡å‹çš„å†·å¯åŠ¨è¿‡ç¨‹åŒ…å«ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>è®¡ç®—å†·</strong>ï¼š<br/>
æ¨¡å‹å‚æ•°å·¨å¤§ï¼ˆåŠ¨è¾„åäº¿ä¸ªå‚æ•°ï¼‰ï¼Œé¦–æ¬¡åŠ è½½æ¨¡å‹æ—¶éœ€è¦æŠŠè¿™äº›å‚æ•°ä»ç£ç›˜æ¬è¿›æ˜¾å­˜ã€‚<br/>
å°±åƒä¸€ä¸ªæ‡’æƒ°çš„å·¨äººâ€”â€”æ¯ä¸€å±‚ç¥ç»éƒ½å¾—å…ˆä¼¸ä¸ªæ‡’è…°ã€‚</li>
<li><strong>ç½‘ç»œå†·</strong>ï¼š<br/>
å¦‚æœæ¨¡å‹éƒ¨ç½²åœ¨äº‘ç«¯ï¼Œé‚£å°±æœ‰ã€Œå»¶è¿Ÿåˆæ‹ã€è¿™ä¸€è¯´ã€‚ç¬¬ä¸€æ¬¡è¯·æ±‚å¾€å¾€è¦èŠ±è´¹é¢å¤–çš„æ¡æ‰‹æ—¶é—´ã€å®¹å™¨å”¤é†’ã€è´Ÿè½½å¹³è¡¡ã€‚</li>
<li><strong>è¯­ä¹‰å†·</strong>ï¼š<br/>
åˆšä¸Šçº¿çš„æ¨¡å‹è¿˜ä¸çŸ¥é“ä½ çš„ä¸šåŠ¡ä¹ æƒ¯ï¼Œæ¯”å¦‚â€œAPPå†…æç¤ºè¯­é£æ ¼â€ã€‚<br/>
å®ƒçš„ç¬¬ä¸€å¥è¯ï¼Œå¯èƒ½åƒåˆšå‡ºå‚çš„R2-D2ä¸€æ ·â€”â€”å……æ»¡æœºæ¢°çš„çº¯çœŸã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-2">âš™ï¸ ä¸‰ã€ä»åº•å±‚å‡ºå‘ï¼šæŠ€æœ¯æ”¯æ’‘ç­–ç•¥</h2>
<p>å†·å¯åŠ¨å¹¶ä¸æ˜¯å®¿å‘½ï¼Œè€Œæ˜¯å¯ä»¥ç”¨æŠ€æœ¯â€œç„çƒ­â€çš„ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„æ”¯æ’‘ç­–ç•¥ï¼ŒèƒŒåå„è‡ªæœ‰ç€æ·±åšçš„ç³»ç»Ÿå“²å­¦ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸš€ 1. æ¨¡å‹é¢„çƒ­ï¼ˆWarm-Upï¼‰</h3>
<p>æ€è·¯å¾ˆç®€å•ï¼š</p>
<blockquote>
<p>ä¸è¦ç­‰åˆ°ç”¨æˆ·æ¥äº†ï¼Œæ‰å»å”¤é†’æ¨¡å‹ã€‚</p>
</blockquote>
<p>åœ¨Webåº”ç”¨å¯åŠ¨åï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿä¸€ç»„è™šå‡çš„ API è°ƒç”¨è¯·æ±‚ï¼Œè®©æ¨¡å‹æå‰åŠ è½½ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ§Š AIGC å†·å¯åŠ¨é¢„çƒ­è„šæœ¬</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">warmUpModel</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> fakePrompts = [
    <span class="hljs-string">"ä½ å¥½ï¼Œè¯·ç®€å•ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚"</span>,
    <span class="hljs-string">"ç”Ÿæˆä¸€å¥å……æ»¡ç§‘æŠ€æ„Ÿçš„å£å·ã€‚"</span>,
    <span class="hljs-string">"å†™ä¸€å¥è®©ç¨‹åºå‘˜æ˜¥é£å¾—æ„çš„ä¿çš®è¯ã€‚"</span>
  ];

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ğŸš€ æ¨¡å‹é¢„çƒ­å¼€å§‹ ..."</span>);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> prompt <span class="hljs-keyword">of</span> fakePrompts) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/generate"</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ prompt }),
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span> }
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ”¥ å·²é¢„çƒ­ï¼š<span class="hljs-subst">${prompt}</span>`</span>);
  }

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… æ¨¡å‹å·²æˆåŠŸçƒ­èº«ï¼"</span>);
}

<span class="hljs-title function_">warmUpModel</span>();
</code></pre>
<blockquote>
<p>ğŸ’¡ <em>å°è´´å£«ï¼šè¿™æ®µä»£ç ç›¸å½“äºæå‰å¸®AIæ‰“äº†ä¸‰ç“¶å’–å•¡ã€‚</em></p>
</blockquote>
<hr/>
<h3 data-id="heading-4">â˜ï¸ 2. æŒ‰éœ€åŠ è½½ + æ¨¡å‹åˆ†å±‚ç¼“å­˜</h3>
<p>åº•å±‚ç­–ç•¥åœ¨è¿™é‡Œæ˜¾å¾—ä¼˜é›…åˆâ€œç‹¡çŒ¾â€ï¼š</p>
<ul>
<li>æŠŠæ¨¡å‹æƒé‡åˆ†å±‚å­˜å‚¨ï¼Œæ¯”å¦‚åªåŠ è½½ç”¨äºå¯åŠ¨çš„æ ¸å¿ƒå±‚ã€‚</li>
<li>å…¶ä½™éƒ¨åˆ†æŒ‰éœ€åŠ è½½ï¼ŒåŠ¨æ€è¡¥é½ã€‚</li>
<li>å¯¹äºå¸¸è§Tokenç»“æœå»ºç«‹<strong>å‘é‡ç¼“å­˜</strong>ï¼Œè®©æ¨¡å‹â€œè®°å¿†â€é«˜é¢‘å›ç­”ã€‚</li>
</ul>
<p>è¿™ç±»ä¼¼äº<strong>æ‡’åŠ è½½+ç¼“å­˜ç»§æ‰¿</strong>çš„ç­–ç•¥ç»„åˆã€‚<br/>
å¦‚æœç¨‹åºæ˜¯èˆå°ï¼Œé‚£ç¼“å­˜å±‚å°±æ˜¯é‚£ä¸ªâ€œæŠ€æœ¯é»‘å¹•â€ï¼Œåœ¨åå°é»˜é»˜æŒ¡ä½å†·é£ã€‚</p>
<hr/>
<h3 data-id="heading-5">ğŸ§ 3. ç°åº¦ + è’™ç‰¹å¡æ´›é‡‡æ ·ï¼ˆç»éªŒæ•°æ®å•¤é…’ç®—æ³•ï¼‰</h3>
<p>æ—©æœŸé˜¶æ®µï¼Œä¸å¦¨ç»™æ¨¡å‹â€œå–‚â€ä¸€äº›ä¸šåŠ¡æ•°æ®é‡‡æ ·ã€‚<br/>
è¿™é‡Œé€šå¸¸é€šè¿‡ç»éªŒåˆ†å¸ƒé‡‡æ ·ç­–ç•¥å®ç°ï¼Œä½¿æ¨¡å‹åœ¨æ¨ç†é˜¶æ®µæœ‰æ›´å¥½çš„åˆå§‹æ”¶æ•›ã€‚</p>
<p>é€šä¿—ç‚¹è¯´ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬è®©æ¨¡å‹åœ¨ä¸Šå²—å‰ï¼Œæå‰å®ä¹ å‡ å¤©ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">ğŸ•¸ï¸ 4. è¾¹ç¼˜èŠ‚ç‚¹ç¼“å­˜ä¸è½»é‡æ¨ç†å¼•æ“</h3>
<p>å¾ˆå¤šäººå¿½ç•¥äº†ç½‘ç»œæ‹“æ‰‘åœ¨å†·å¯åŠ¨ä¸­çš„ä½œç”¨ã€‚<br/>
è‹¥ç”¨æˆ·åœ¨æ—¥æœ¬ï¼Œè€Œä½ çš„æ¨¡å‹æœåŠ¡å™¨åœ¨ç¡…è°·ï¼Œé‚£å»¶è¿Ÿå°±åƒæ‰“è¶Šæ´‹ç”µè¯ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆæ˜¯ <strong>éƒ¨ç½²è¾¹ç¼˜èŠ‚ç‚¹æ¨ç†ä»£ç†</strong>ï¼š</p>
<ul>
<li>å‰ç«¯å°±è¿‘è°ƒç”¨è½»é‡å¼•æ“ï¼ˆMini-Inferenceï¼‰ï¼Œå¤„ç†é€šç”¨è¯·æ±‚ã€‚</li>
<li>å†ç”±ä¸»æ¨¡å‹å¤„ç†å¤æ‚è¯·æ±‚ã€‚</li>
<li>ç”¨æˆ·æ„Ÿå—åˆ°çš„ä¸æ˜¯â€œå†·å¯åŠ¨â€ï¼Œè€Œæ˜¯â€œçƒ­å“åº”â€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ§  å››ã€æŠ€æœ¯ä¹‹å¤–ï¼šå†·å¯åŠ¨çš„å“²å­¦ä¸å¹½é»˜</h2>
<p>å†·å¯åŠ¨ï¼Œå½’æ ¹ç»“åº•æ˜¯äººä¸ç³»ç»Ÿä¹‹é—´çš„ä¸€åœºä¿¡ä»»æµ‹è¯•ã€‚<br/>
æœ‰æ—¶å€™ï¼ŒAIä¸æ˜¯ä¸æƒ³å¿«ï¼Œè€Œæ˜¯å¤ªå®³ç¾ã€‚å®ƒè¿˜æ²¡å‡†å¤‡å¥½å±•ç¤ºå®ƒçš„å…¨éƒ¨é­…åŠ›ã€‚</p>
<p>ä»æ“ä½œç³»ç»Ÿåˆ°è¯­è¨€è¿è¡Œæ—¶ï¼Œä»HTTPæ¡æ‰‹åˆ°æ˜¾å­˜è°ƒåº¦ï¼Œæ¯ä¸€æ¬¡å»¶è¿Ÿéƒ½åƒæ˜¯è®¡ç®—æœºä¸–ç•Œæ·±å¤„é‚£ç§â€”â€”</p>
<blockquote>
<p>â€œæˆ‘æ­£åœ¨åŠªåŠ›åŠ è½½çµé­‚ï¼Œè¯·ç¨ç­‰ç‰‡åˆ»ã€‚â€</p>
</blockquote>
<p>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œæ¯ä¸€ä¸ªå†·å¯åŠ¨ï¼Œ<br/>
å…¶å®å°±æ˜¯äººå·¥æ™ºèƒ½ä¸–ç•Œçš„<strong>é»æ˜å¾®å…‰</strong>ã€‚ğŸŒ„</p>
<hr/>
<h2 data-id="heading-8">ğŸ§© äº”ã€æœ€åçš„å°ç»“ä¸æ¸©æŸ”æš´è®º</h2>






























<table><thead><tr><th>é˜¶æ®µ</th><th>é—®é¢˜</th><th>å¯¹ç­–</th></tr></thead><tbody><tr><td>æ¨¡å‹åŠ è½½</td><td>åˆå§‹åŒ–æ…¢</td><td>é¢„çƒ­è¯·æ±‚ã€å»¶è¿Ÿç¼“å­˜</td></tr><tr><td>ç½‘ç»œå»¶è¿Ÿ</td><td>é€šä¿¡æ…¢</td><td>è¾¹ç¼˜æ¨ç†ã€Cloudflare Workerä»£ç†</td></tr><tr><td>ä¸šåŠ¡ä¸é€‚é…</td><td>è¾“å‡ºç”Ÿç¡¬</td><td>å‘é‡ç¼“å­˜ã€è’¸é¦è®­ç»ƒ</td></tr><tr><td>ç”¨æˆ·ä½“éªŒå·®</td><td>é¡µé¢å¡é¡¿</td><td>Skeleton UIã€æ¸è¿›æ¸²æŸ“</td></tr></tbody></table>
<blockquote>
<p>ğŸ—£ï¸ <strong>æš´è®ºæ€»ç»“</strong>ï¼š<br/>
çœŸæ­£çš„å†·å¯åŠ¨ä¸æ˜¯æ¨¡å‹å†·ï¼Œæ˜¯æˆ‘ä»¬æ²¡æ•™ä¼šå®ƒæ€ä¹ˆçƒ­ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ğŸ¬ å°¾å£°ï¼šå½“AIå¼€å§‹å‘¼å¸</h2>
<p>å½“ç¬¬ä¸€ä½ç”¨æˆ·é¡ºæ»‘åœ°æ‰«æäºŒç»´ç ã€æµè§ˆé¡µé¢ï¼ŒAIå›åº”æµç•…å¦‚è¯—æ—¶ï¼Œ<br/>
ä½ å¬åˆ°çš„ä¸åªæ˜¯HTTPè¿”å›200ï¼Œè€Œæ˜¯ä¸€å¥è½»å£°çš„é—®å€™ï¼š</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€è°·æ­Œå‡Œæ™¨ç‚¸åœºï¼Nano Banana Pro é¦–å‘æ·±åº¦è¯„æµ‹ï¼š20è½®åœ°ç‹±çº§æµ‹è¯•ï¼Œå®ƒä¸ä»…ä¼šç”»ç”»ï¼Œè¿˜è¯»æ‡‚äº†ç‰©ç†ä¸–ç•Œ]]></title>    <link>https://juejin.cn/post/7575006095389294601</link>    <guid>https://juejin.cn/post/7575006095389294601</guid>    <pubDate>2025-11-22T02:26:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575006095389294601" data-draft-id="7575230119091716139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€è°·æ­Œå‡Œæ™¨ç‚¸åœºï¼Nano Banana Pro é¦–å‘æ·±åº¦è¯„æµ‹ï¼š20è½®åœ°ç‹±çº§æµ‹è¯•ï¼Œå®ƒä¸ä»…ä¼šç”»ç”»ï¼Œè¿˜è¯»æ‡‚äº†ç‰©ç†ä¸–ç•Œ"/> <meta itemprop="keywords" content="OpenAI,AIGC,Google IO"/> <meta itemprop="datePublished" content="2025-11-22T02:26:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="win4r"/> <meta itemprop="url" content="https://juejin.cn/user/1739869037541555"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€è°·æ­Œå‡Œæ™¨ç‚¸åœºï¼Nano Banana Pro é¦–å‘æ·±åº¦è¯„æµ‹ï¼š20è½®åœ°ç‹±çº§æµ‹è¯•ï¼Œå®ƒä¸ä»…ä¼šç”»ç”»ï¼Œè¿˜è¯»æ‡‚äº†ç‰©ç†ä¸–ç•Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739869037541555/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    win4r
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:26:29.000Z" title="Sat Nov 22 2025 02:26:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ‘˜è¦ï¼š</strong> ç»è¿‡ä¸€ä¸Šåˆçš„æé™æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç°è¿™æ¬¾å·ç§°å…·å¤‡â€œå·¥ä½œå®¤çº§åˆ›æ„æ§åˆ¶â€çš„æ–°æ¨¡å‹ï¼Œæ­£åœ¨æ‚„ç„¶è·¨è¶ŠAIç»˜å›¾ä¸ç°å®ä¸–ç•Œçš„ææ€–è°·ã€‚</p>
<p>ğŸ”¥ğŸ”¥ğŸ”¥æœ¬ç¯‡ç¬”è®°æ‰€å¯¹åº”çš„è§†é¢‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1HHULBPEVr%2F" target="_blank" title="https://www.bilibili.com/video/BV1HHULBPEVr/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1HHâ€¦</a></p>
<hr/>
<p><strong>æ­£æ–‡ï¼š</strong></p>
<p>ä»Šå¤©å‡Œæ™¨ï¼Œè°·æ­Œåœ¨æ¯«æ— é¢„å…†çš„æƒ…å†µä¸‹ï¼Œçªç„¶å‘å¸ƒäº†å…¨æ–°çš„å›¾åƒç”Ÿæˆæ——èˆ°æ¨¡å‹â€”â€”<strong>Nano Banana Pro</strong>ã€‚</p>
<p>åœ¨å®˜æ–¹åšå®¢çš„æŠ€æœ¯ç™½çš®ä¹¦ä¸­ï¼Œè°·æ­Œèµ‹äºˆäº†è¿™æ¬¾æ¨¡å‹æå…¶å¼ºæ‚çš„çº¸é¢å‚æ•°ï¼šå®ƒå¼•å…¥äº†â€œå·¥ä½œå®¤çº§åˆ›æ„æ§åˆ¶ï¼ˆStudio-grade creative controlï¼‰â€æ¶æ„ï¼Œæ”¯æŒæ··åˆå¤šè¾¾14å¼ å‚è€ƒå›¾åƒï¼Œå¹¶èƒ½åŒæ—¶ä¿æŒç”»é¢ä¸­å¤šè¾¾5ä¸ªäººç‰©çš„é«˜åº¦ä¸€è‡´æ€§ã€‚æ­¤å¤–ï¼Œå®ƒæ‰“ç ´äº†å¸¸è§„ç”Ÿæˆçš„é™åˆ¶ï¼ŒåŸç”Ÿæ”¯æŒä»16:9åˆ°21:9ã€ä¹ƒè‡³4Kåˆ†è¾¨ç‡çš„è¶…æ¸…è¾“å‡ºï¼Œå¹¶èµ‹äºˆç”¨æˆ·å¯¹å±€éƒ¨ç¼–è¾‘ã€ç›¸æœºè§’åº¦ã€è‰²å½©åˆ†çº§ï¼ˆColor Gradingï¼‰å’Œåœºæ™¯ç…§æ˜çš„ç²¾ç»†æ§åˆ¶æƒã€‚</p>
<p>å‚æ•°å†è±ªåï¼Œç»ˆç©¶è¦è½åœ°åˆ°å®é™…åº”ç”¨ã€‚ä¸ºäº†éªŒè¯ Nano Banana Pro æ˜¯å¦çœŸçš„å¦‚å®£ä¼ èˆ¬å¼ºå¤§ï¼Œæˆ‘ä»¬è€—æ—¶ä¸€ä¸Šåˆï¼Œè®¾è®¡äº†è¦†ç›–å›¾åƒç”Ÿæˆã€ç”µå•†åº”ç”¨ã€é€»è¾‘æ¨ç†ã€åŒ»å­¦å½±åƒã€åˆ›æ„è®¾è®¡ç­‰é¢†åŸŸçš„<strong>20ç»„åœ°ç‹±çº§æµ‹è¯•æ¡ˆä¾‹</strong>ã€‚</p>
<p>å®æµ‹ç»“æœè¡¨æ˜ï¼Œè¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç”»å›¾å·¥å…·çš„å‡çº§ï¼Œæ›´åƒæ˜¯AIå¯¹ç‰©ç†ä¸–ç•Œç†è§£èƒ½åŠ›çš„ä¸€æ¬¡è·ƒè¿ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„è¯¦ç»†ä¸‡å­—è¯„æµ‹æŠ¥å‘Šã€‚</p>
<h3 data-id="heading-0">ä¸€ã€ çªç ´â€œææ€–è°·â€ï¼šæè‡´çš„å¾®è§‚ç»†èŠ‚ä¸æ–‡æœ¬æ¸²æŸ“</h3>
<p>é•¿æœŸä»¥æ¥ï¼ŒAIç»˜å›¾æ¨¡å‹åœ¨å¤„ç†æ–‡å­—ï¼ˆText Renderingï¼‰å’Œå¾®è§‚ç‰©ç†ç»†èŠ‚æ—¶ï¼Œå¾€å¾€ä¼šæš´éœ²å‡ºâ€œç”±äºè®¡ç®—ç”Ÿæˆâ€è€Œäº§ç”Ÿçš„è¿å’Œæ„Ÿã€‚ä½† Nano Banana Pro åœ¨è¿™æ–¹é¢çš„è¡¨ç°ï¼Œè®©æˆ‘ä»¬é‡æ–°å®¡è§†äº†â€œé€¼çœŸâ€çš„å®šä¹‰ã€‚</p>
<ol>
<li>æŒ‡çº¹çº§çš„çœŸå®æ„Ÿï¼šé©¬æ–¯å…‹æ¨æ–‡å®æ‹</li>
</ol>
<p>åœ¨ç¬¬ä¸€ç»„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬è¦æ±‚æ¨¡å‹ç”Ÿæˆä¸€å¼ â€œé©¬æ–¯å…‹åœ¨æ‰‹æœºä¸Šå‘æ¨æ–‡å¤¸èµç‰¹æ–¯æ‹‰è‡ªåŠ¨é©¾é©¶ï¼Œå¹¶è·å¾—OpenAIåŠGoogleå®˜æ–¹å›å¤â€çš„ç…§ç‰‡ã€‚</p>
<p>ç»“æœä»¤äººå’‹èˆŒã€‚æ¨¡å‹ç”Ÿæˆçš„ä¸ä»…æ˜¯ä¸€å¼ æˆªå›¾ï¼Œè€Œæ˜¯ä¸€å¼ **â€œå¯¹ç€æ‰‹æœºå±å¹•æ‹æ‘„çš„ç…§ç‰‡â€ã€‚å½“æˆ‘ä»¬æŠŠå›¾ç‰‡æ”¾å¤§åˆ°åƒç´ çº§æ—¶ï¼Œéœ‡æƒŠåœ°å‘ç°äº†å±å¹•ç»ç’ƒä¸Šæ®‹ç•™çš„æŒ‡çº¹å°è®°**ã€‚æ­¤å¤–ï¼Œæ‰‹æœºé¡¶éƒ¨çŠ¶æ€æ çš„ç”µæ± ç”µé‡ã€ä¿¡å·æ ¼å¼ºå¼±ï¼Œä»¥åŠå±å¹•å…‰çº¿åœ¨ä¸åŒè§’åº¦ä¸‹çš„æ¼«åå°„æ•ˆæœï¼Œéƒ½å®Œå…¨ç¬¦åˆç‰©ç†è§„å¾‹ã€‚å¦‚æœä¸æ˜¯å› ä¸ºæ¨æ–‡å†…å®¹æ˜¯æˆ‘ä»¬ç¼–é€ çš„ï¼Œè¿™å¼ å›¾åœ¨ç¤¾äº¤ç½‘ç»œä¸Šè¶³ä»¥ä»¥å‡ä¹±çœŸã€‚</p>
<ol start="2">
<li>ä¸­æ–‡ä¹¦æ³•çš„ç¬”è§¦è¿˜åŸ</li>
</ol>
<p>æ±‰å­—ç”Ÿæˆä¸€ç›´æ˜¯è¥¿æ–¹å¤§æ¨¡å‹çš„å¼±é¡¹ã€‚æˆ‘ä»¬æµ‹è¯•äº†ç”Ÿæˆä¸€å¹…ã€Šå¿µå¥´å¨‡Â·èµ¤å£æ€€å¤ã€‹çš„è¡Œæ¥·ä¹¦æ³•ä½œå“ã€‚</p>
<p>ç”Ÿæˆçš„ç”»é¢ä¸­ï¼Œå®£çº¸çš„çº¤ç»´è´¨æ„Ÿã€å¢¨æ±çš„æµ“æ·¡æ™•æŸ“ï¼ˆDry and Wet ink effectsï¼‰ã€æ¯›ç¬”æç½®åœ¨ç šå°ä¸Šçš„å…‰å½±æŠ•å°„ï¼Œéƒ½è¾¾åˆ°äº†æ‘„å½±çº§åˆ«ã€‚å°½ç®¡åœ¨é•¿æ–‡æœ¬çš„é€»è¾‘ä¸Šï¼Œæ¨¡å‹æ²¡æœ‰å®Œå…¨ä¸€å­—ä¸å·®åœ°å¤å†™ä¸Šé˜™å†…å®¹ï¼ˆè¿™æ˜¯ç›®å‰å¤§è¯­è¨€æ¨¡å‹çš„é€šç—…ï¼‰ï¼Œä½†åœ¨â€œå­—å½¢ç»“æ„â€ä¸Šï¼Œæ¯ä¸€ä¸ªæ±‰å­—éƒ½ç¬”æ³•ä¸¥è°¨ï¼Œå®Œå…¨æ²¡æœ‰å‡ºç°â€œé¬¼ç”»ç¬¦â€èˆ¬çš„ä¼ªé€ å­—ï¼Œå¯¹äºå›½é£è®¾è®¡ç´ æçš„ç”Ÿæˆè€Œè¨€ï¼Œè¿™å·²æ˜¯æé«˜å¯ç”¨çš„ç”Ÿäº§åŠ›ã€‚</p>
<ol start="3">
<li>é›¶é”™è¯¯çš„å·§å…‹åŠ›è‰ºæœ¯å­—</li>
</ol>
<p>åœ¨ç”Ÿæ—¥è›‹ç³•çš„æµ‹è¯•ä¸­ï¼Œæ¨¡å‹é¢ä¸´ç€æè´¨ä¸æ–‡å­—çš„åŒé‡æŒ‘æˆ˜ã€‚æˆ‘ä»¬éœ€è¦å®ƒç”¨å·§å…‹åŠ›é…±åœ¨å¥¶æ²¹è›‹ç³•ä¸Šå†™å‡ºâ€œAIè¶…å…ƒåŸŸé¢‘é“3å²å•¦â€ã€‚ç”Ÿæˆçš„å›¾åƒä¸­ï¼Œå·§å…‹åŠ›å­—è¿¹å‘ˆç°å‡ºæµä½“å‡å›ºåçš„è‡ªç„¶å…‰æ³½ï¼Œä¸”æ¯ä¸€ä¸ªå­—ç¬¦éƒ½æ¸…æ™°å¯è¾¨ï¼Œæ²¡æœ‰ä»»ä½•é”™åˆ«å­—ã€‚è¿™æ„å‘³ç€æ¨¡å‹å·²ç»ç†è§£äº†â€œæ¶²ä½“ä¹¦å†™â€çš„ç‰©ç†ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-1">äºŒã€ ç”µå•†ä¸æ‘„å½±çš„é©å‘½ï¼šä¸€è‡´æ€§ä¸å±€éƒ¨é‡ç»˜</h3>
<p>å¯¹äºç”µå•†è¡Œä¸šè€Œè¨€ï¼ŒAIæœ€å¤§çš„ç—›ç‚¹åœ¨äºâ€œä¸å¯æ§â€ã€‚è€Œ Nano Banana Pro æ­¤æ¬¡ä¸»æ‰“çš„â€œå±€éƒ¨ç¼–è¾‘â€ä¸â€œä¸€è‡´æ€§ä¿æŒâ€ï¼Œä¼¼ä¹æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€å•†ä¸šç—›ç‚¹è€Œæ¥ã€‚</p>
<ol>
<li>å®Œç¾çš„æ¨¡ç‰¹â€œäº‘æ¢è£…â€</li>
</ol>
<p>è¿™æ˜¯æœ¬æ¬¡è¯„æµ‹ä¸­å•†ä¸šä»·å€¼æœ€é«˜çš„ä¸€ç»„æµ‹è¯•ã€‚æˆ‘ä»¬ä¸Šä¼ äº†ä¸€å¼ æ¨¡ç‰¹å›¾å’Œä¸€å¥—è¡£æœå›¾ï¼Œè¦æ±‚æ¨¡å‹â€œç»™å›¾äºŒçš„æ¨¡ç‰¹ç©¿ä¸Šå›¾ä¸€çš„è¡£æœâ€ã€‚</p>
<p>Nano Banana Pro çš„è¡¨ç°å ªç§°å®Œç¾ã€‚å®ƒä¸ä»…å®Œæˆäº†æ¢è£…ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒé”æ­»äº†æ¨¡ç‰¹çš„é¢éƒ¨ç‰¹å¾ã€èº«ææ¯”ä¾‹å’Œç«™å§¿ã€‚åœ¨éšåçš„å¤šè½®å¯¹è¯ä¸­ï¼Œæˆ‘ä»¬åƒå¯¹å¾…çœŸäººæ¨¡ç‰¹ä¸€æ ·ä¸æ–­æå‡ºä¿®æ”¹è¦æ±‚ï¼š</p>
<ul>
<li>
<p>â€œæŠŠä½é¢†å†…æ­æ¢æˆé«˜é¢†â€â€”â€”å®Œæˆï¼Œä¸”é¢ˆéƒ¨å…‰å½±è‡ªç„¶è¿‡æ¸¡ã€‚</p>
</li>
<li>
<p>â€œæŠŠçŸ­è£™æ¢æˆé•¿è£¤â€â€”â€”å®Œæˆï¼Œè£¤å­çš„è¤¶çš±ç¬¦åˆé‡åŠ›å‚å æ„Ÿã€‚</p>
</li>
<li>
<p>â€œç»™å¥¹æˆ´ä¸Šä¸€é¡¶å¸½å­â€â€”â€”å®Œæˆï¼Œå¸½å­çš„é˜´å½±ç²¾å‡†æŠ•å°„åœ¨è„¸éƒ¨ã€‚</p>
</li>
<li>
<p>â€œåŠ ä¸Šä¸€æ¡è…°å¸¦â€â€”â€”å®Œæˆï¼Œè…°å¸¦æŸç´§äº†è¡£ç‰©ï¼Œäº§ç”Ÿäº†çœŸå®çš„æŒ¤å‹è¤¶çš±ã€‚</p>
<p>ç”šè‡³åŸå›¾ä¸­æ²¡æœ‰æ‹åˆ°æ¨¡ç‰¹çš„è„šï¼Œæ¨¡å‹ä¹Ÿè‡ªåŠ¨æ ¹æ®èº«ä½“å§¿æ€è¡¥å…¨äº†é‹å­ã€‚å¯¹äºç”µå•†å–å®¶æ¥è¯´ï¼Œè¿™æ„å‘³ç€åªéœ€æ‹æ‘„ä¸€æ¬¡æ¨¡ç‰¹ï¼Œå³å¯æ— é™ç”Ÿæˆä¸åŒæ¬¾å¼çš„ä¸Šèº«å›¾ï¼Œæˆæœ¬å°†å‘ˆæŒ‡æ•°çº§ä¸‹é™ã€‚</p>
</li>
</ul>
<ol start="2">
<li>æ™ºèƒ½ä¿®å›¾ä¸å‘å‹è®¾è®¡</li>
</ol>
<p>é™¤äº†æ¢è£…ï¼Œæˆ‘ä»¬è¿˜æµ‹è¯•äº†â€œå»è·¯äººâ€å’Œâ€œæ¢å‘å‹â€ã€‚</p>
<p>åœ¨æ—…æ¸¸ç…§ä¸­ï¼Œä¸€å¥â€œå»æ‰è·¯äººâ€çš„æç¤ºè¯ï¼Œæ¨¡å‹ç¬é—´æ¸…é™¤äº†èƒŒæ™¯æ‚ä¹±çš„æ¸¸å®¢ï¼Œå¹¶è‡ªåŠ¨è„‘è¡¥äº†è¢«é®æŒ¡çš„é£æ™¯ï¼Œæ¯«æ— ä¿®å›¾ç—•è¿¹ã€‚</p>
<p>åœ¨äººç‰©å†™çœŸä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä½ç”·æ€§çš„å‘å‹æ›¿æ¢ä¸ºâ€œæ›´æ—¶å°šçš„æ¬¾å¼â€ï¼Œæ•´ä¸ªäººæ°”è´¨ç¬é—´æå‡ï¼Œä¸”å‘ä¸ä¸å¤´çš®çš„è¿æ¥å¤„å¤„ç†å¾—æå…¶è‡ªç„¶ã€‚è¿™é¢„ç¤ºç€å®ƒå®Œå…¨å¯ä»¥æ›¿ä»£Photoshopçš„å¤§éƒ¨åˆ†ç¹çåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-2">ä¸‰ã€ è§†è§‰æ¨ç†ï¼šAI å¼€å§‹â€œçœ‹æ‡‚â€è¿™ä¸ªä¸–ç•Œ</h3>
<p>Nano Banana Pro ä¸ä»…ä»…åœ¨â€œç”»â€ï¼Œå®ƒä¼¼ä¹åœ¨â€œæ€è€ƒâ€ã€‚å¤šç»„æµ‹è¯•è¯æ˜ï¼Œå®ƒå…·å¤‡äº†æå¼ºçš„å¤šæ¨¡æ€è§†è§‰æ¨ç†èƒ½åŠ›ã€‚</p>
<ol>
<li>é€†å‘å·¥ç¨‹ï¼šä¸€å¼ å›¾åæ¨é£Ÿè°±</li>
</ol>
<p>æˆ‘ä»¬æŠ•å–‚äº†ä¸€å¼ â€œåœŸè±†çƒ§ç‰›è‚‰â€çš„æˆå“èœç…§ç‰‡ï¼Œè¦æ±‚æ¨¡å‹â€œç”Ÿæˆè¿™é“èœçš„æ‰€æœ‰é£Ÿæâ€ã€‚</p>
<p>æ¨¡å‹ç”Ÿæˆçš„å›¾åƒä¸ä»…æ˜¯ä¸€å †é£Ÿæçš„å †ç Œï¼Œæ›´åƒæ˜¯ä¸€å¼ ç²¾ç¾çš„å¤‡èœå›¾ï¼šç‰›è‚‰åˆ‡å—çš„çº¹ç†ã€åœŸè±†çš„æ°§åŒ–è‰²æ³½ã€è‘±èŠ±ã€å§œç‰‡ã€ç”šè‡³ç”ŸæŠ½ã€è€æŠ½ã€å†°ç³–ã€å…«è§’ç­‰çœ‹ä¸è§çš„è°ƒå‘³å“ï¼Œéƒ½è¢«å®ƒé€»è¾‘ä¸¥å¯†åœ°å…·è±¡åŒ–äº†å‡ºæ¥ã€‚è¿™è¯´æ˜æ¨¡å‹è¯†åˆ«å‡ºäº†èœå“ï¼Œæ£€ç´¢äº†çŸ¥è¯†åº“ï¼Œå¹¶å°†å…¶åå‘è§†è§‰åŒ–ã€‚</p>
<ol start="2">
<li>åŒ»å­¦å½±åƒçš„ç²¾å‡†åˆ¤è¯»</li>
</ol>
<p>ä¸ºäº†æµ‹è¯•ä¸“ä¸šæ€§ï¼Œæˆ‘ä»¬ä¸Šä¼ äº†ä¸€å¼ åŒ…å«å¾®å°éª¨æŠ˜ç‚¹çš„Xå…‰ç‰‡ï¼Œæç¤ºè¯ä»…ä¸ºâ€œæ ‡æ³¨éª¨æŠ˜ä½ç½®â€ã€‚</p>
<p>æ¨¡å‹ç²¾å‡†åœ°è¯†åˆ«å‡ºäº†ç—…ç¶ï¼Œå¹¶ç”¨çº¢æ¡†è¿›è¡Œäº†é«˜äº®æ ‡æ³¨ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç”Ÿæˆåçš„å›¾åƒä¾ç„¶ä¿æŒäº†Xå…‰èƒ¶ç‰‡ç‰¹æœ‰çš„ç°åº¦å™ªç‚¹å’Œé€è§†è´¨æ„Ÿï¼Œæ²¡æœ‰å› ä¸ºAIçš„ä»‹å…¥è€Œå˜æˆâ€œå¡é€šç”»â€ã€‚è¿™å±•ç¤ºäº†å…¶åœ¨è¾…åŠ©åŒ»ç–—è¯Šæ–­é¢†åŸŸçš„æ½œåŠ›ã€‚</p>
<ol start="3">
<li>é€»è¾‘æ€ç»´çš„å¯è§†åŒ–ï¼šæ•°å­¦ä¸è¯•å·</li>
</ol>
<p>è¿™å¯èƒ½æ˜¯æœ€è®©æˆ‘ä»¬æ„Ÿåˆ°â€œç»†æ€ææâ€çš„æµ‹è¯•ã€‚</p>
<ul>
<li><strong>æ•°å­¦è§£é¢˜ï¼š</strong> æˆ‘ä»¬è¦æ±‚æ¨¡å‹è§£ç­”ä¸€é“åœ†é¢ç§¯è®¡ç®—é¢˜ï¼Œå¹¶å±•ç°â€œè‰ç¨¿çº¸ä¸Šçš„æ‰‹å†™è¿‡ç¨‹â€ã€‚æ¨¡å‹ä¸ä»…æ­¥éª¤æ­£ç¡®ã€ç­”æ¡ˆæ— è¯¯ï¼Œæ›´å¯æ€•çš„æ˜¯å®ƒæ¨¡æ‹Ÿäº†çœŸå®çš„â€œè¿ç®—åœºæ™¯â€â€”â€”å­—è¿¹æ˜¯æ‰‹å†™çš„åœ†ç ç¬”è´¨æ„Ÿï¼Œçº¸å¼ ä¸Šæœ‰ä¸Šä¸€é¡µç¬”è®°é€è¿‡æ¥çš„å°ç—•ï¼Œç”šè‡³è¿˜æœ‰æ‰‹è…•æ‘©æ“¦ç•™ä¸‹çš„æ±¡æ¸ã€‚</li>
<li><strong>è¯•å·å¡«ç©ºï¼š</strong> ç»™å®šä¸€å¼ ç©ºç™½è‹±è¯­è¯•å·ï¼Œæ¨¡å‹è‡ªåŠ¨è¯†åˆ«é¢˜ç›®ï¼Œåœ¨æ‹¬å·å†…å¡«å…¥äº†æ­£ç¡®çš„é€‰é¡¹å­—æ¯ï¼Œå¹¶åœ¨ä¸‹æ–¹ç”¨ä¸­æ–‡æ‰‹å†™ä½“ç¿»è¯‘äº†å¥å­ã€‚è¿™ä¸ä»…æ˜¯OCRï¼ˆæ–‡å­—è¯†åˆ«ï¼‰ï¼Œè€Œæ˜¯â€œè¯†åˆ«+ç†è§£+ç”Ÿæˆâ€çš„å…¨æµç¨‹é—­ç¯ã€‚</li>
<li><strong>æ‰‹ç»˜RAGæµç¨‹å›¾ï¼š</strong> å®ƒè¿˜èƒ½æ ¹æ®æŠ½è±¡çš„æŠ€æœ¯æ¦‚å¿µï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ï¼Œç»˜åˆ¶å‡ºé€»è¾‘æ¸…æ™°ã€å¸¦æœ‰ä¸­æ–‡æ³¨é‡Šçš„æ‰‹ç»˜é£æ ¼æµç¨‹å›¾ã€‚</li>
</ul>
<h3 data-id="heading-3">å››ã€ åˆ›æ„çš„è¾¹ç•Œï¼šä»å¤åˆ»åˆ°è„‘æ´</h3>
<p>æœ€åï¼Œæˆ‘ä»¬æµ‹è¯•äº†æ¨¡å‹çš„è‰ºæœ¯åˆ›é€ åŠ›ä¸è·¨é£æ ¼èåˆèƒ½åŠ›ã€‚</p>
<ol>
<li>æ—¶ç©ºé”™ä¹±çš„è‰ºæœ¯èåˆ</li>
</ol>
<p>å½“æˆ‘ä»¬å°†ç°ä»£å·¥ä¸šäº§ç‰©å¼ºè¡Œæ¤å…¥å¤ä»£è‰ºæœ¯æ—¶ï¼ŒNano Banana Pro å±•ç°äº†æé«˜çš„å®¡ç¾èåˆåº¦ã€‚</p>
<ul>
<li><strong>æ¸…æ˜ä¸Šæ²³å›¾+æ¸¸è‰‡ï¼š</strong> æˆ‘ä»¬è¦æ±‚åœ¨ä»¿å¤ç”»çš„æ²³é¢ä¸Šæ”¾ä¸€è‰˜ç°ä»£é’“é±¼è‰‡ã€‚æ¨¡å‹ä¸ä»…æ”¾å…¥äº†æ¸¸è‰‡ï¼Œè¿˜ç²¾ç»†åœ°ç»˜åˆ¶äº†æ¸¸è‰‡é©¬è¾¾æ¿€èµ·çš„ç™½è‰²æµªèŠ±ï¼Œè¿™ç§æµªèŠ±çš„ç”»æ³•æ¨¡ä»¿äº†å¤ç”»çš„ç¬”è§¦ï¼Œä½¿å¾—è¿å’Œæ„Ÿé™åˆ°äº†æœ€ä½ã€‚</li>
<li><strong>å¤ç”»æ”¹å›¾ï¼š</strong> å°†å¤ç”»ä¸­å‚é’“çš„äººæ”¹ä¸ºâ€œä¸­é±¼æ‹‰æ†â€çš„çŠ¶æ€ã€‚æ¨¡å‹é‡ç»˜äº†å¼¯æ›²çš„é±¼ç«¿å’Œæ°´ä¸‹çš„é±¼ï¼ŒåŠ¨æ€å¼ åŠ›åè¶³ã€‚</li>
</ul>
<p><strong>2. é£æ ¼è¿ç§»ä¸è®¾è®¡èµ‹èƒ½</strong></p>
<ul>
<li><strong>å®¤å†…è®¾è®¡ï¼š</strong> ä¸€å¼ ç®€é™‹çš„æ¯›å¯æˆ¿ç…§ç‰‡ï¼Œåœ¨æç¤ºè¯â€œç°ä»£ç®€çº¦é£â€çš„é©±åŠ¨ä¸‹ï¼Œç¬é—´å˜æˆäº†ç²¾è£…ä¿®æ•ˆæœå›¾ã€‚å…‰å½±æ–¹å‘ä¸åŸå›¾çª—æˆ·å®Œå…¨ä¸€è‡´ï¼Œåœ°ç –çš„é•œé¢åå°„æ›´æ˜¯ç‚¹ç›ä¹‹ç¬”ã€‚</li>
<li><strong>ç´ æè½¬æ²¹ç”»ï¼š</strong> å°†äººç‰©ç´ æä¸€é”®è½¬ä¸ºæ²¹ç”»ï¼Œè¡£æœä¸Šçš„æ ¼å­çº¹ç†ç»†èŠ‚æ¯«å‘æ— æŸã€‚</li>
<li><strong>æ‰‹åŠç”Ÿæˆï¼š</strong> å°†çœŸäººæ¨¡ç‰¹å›¾è½¬åŒ–ä¸ºå¸¦åŒ…è£…ç›’ã€äºšå…‹åŠ›åº•åº§çš„ç²¾ç¾æ‰‹åŠå›¾ï¼Œæè´¨åå…‰é€¼çœŸã€‚</li>
<li><strong>æ‚å¿—å°é¢ï¼š</strong> æ ¹æ®æˆ‘ä»¬çš„é¢‘é“ä»‹ç»ï¼Œè‡ªåŠ¨ç”Ÿæˆäº†ä¸€å¼ æå…·è®¾è®¡æ„Ÿçš„æ—¶å°šæ‚å¿—å°é¢ï¼Œæ¡Œä¸Šçš„å’–å•¡æ¯å€’å½±æ¸…æ™°å¯è§ã€‚</li>
<li><strong>è„‘æ´æµç¨‹å›¾ï¼š</strong> åœ¨â€œå¦‚ä½•çƒ¤é¢åŒ…â€çš„è¶£å‘³æµ‹è¯•ä¸­ï¼Œæ¨¡å‹ç”»å‡ºäº†å–·ç«é¾™çƒ¤é¢åŒ…ã€æŠ•çŸ³æœºé€é¢åŒ…çš„å¤¸å¼ åœºæ™¯ï¼Œè¯æ˜äº†å®ƒåœ¨å¹½é»˜æ„Ÿå’Œæƒ³è±¡åŠ›ä¸Šçš„å¯å¡‘æ€§ã€‚</li>
</ul>
<h3 data-id="heading-4">äº”ã€ æ€»ç»“ä¸å±•æœ›</h3>
<p>æ´‹æ´‹æ´’æ´’20ç»„æµ‹è¯•ï¼Œæ¶µç›–äº†ä»å¾®è§‚ç»†èŠ‚åˆ°å®è§‚åœºæ™¯ï¼ŒFrom â€œWhat isâ€ to â€œWhat ifâ€ çš„å„ä¸ªç»´åº¦ã€‚</p>
<p><strong>Nano Banana Pro ç»™æˆ‘ä»¬æœ€å¤§çš„æ„Ÿå—æ˜¯ï¼šå®ƒå˜â€œèªæ˜â€äº†ã€‚</strong></p>
<p>ä»¥å‰çš„AIç»˜å›¾æ¨¡å‹ï¼Œåƒæ˜¯ä¸€ä¸ªç”»æŠ€é«˜è¶…ä½†ä¸æ‡‚ç‰©ç†è§„å¾‹çš„â€œç”»å¸ˆâ€ï¼Œç»å¸¸ç”»å‡ºåé‡åŠ›çš„è¡£æœæˆ–é”™è¯¯çš„å…‰å½±ã€‚è€Œ Nano Banana Pro ç»™äººçš„æ„Ÿè§‰ï¼Œæ˜¯å®ƒåœ¨ç”Ÿæˆå›¾åƒä¹‹å‰ï¼Œå…ˆåœ¨æ½œç©ºé—´é‡Œæ„å»ºäº†ä¸€ä¸ªç¬¦åˆé€»è¾‘çš„â€œè™šæ‹Ÿä¸–ç•Œâ€ã€‚å®ƒçŸ¥é“æ‰‹å†™å­—ä¼šæœ‰å‹ç—•ï¼ŒçŸ¥é“å±å¹•ä¼šæœ‰æŒ‡çº¹ï¼ŒçŸ¥é“è¡£æœä¼šæœ‰é‡åŠ›è¤¶çš±ï¼ŒçŸ¥é“Xå…‰ç‰‡èƒŒåçš„ç—…ç†ç»“æ„ã€‚</p>
<p>å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ol>
<li><strong>è®¾è®¡é—¨æ§›çš„è¿›ä¸€æ­¥é™ä½ï¼š</strong> ä½ ä¸éœ€è¦å†ç”¨å¤æ‚çš„ControlNetå»æ§åˆ¶å…‰å½±ï¼Œç®€å•çš„è‡ªç„¶è¯­è¨€å³å¯å®ç°ç²¾å‡†ä¿®æ”¹ã€‚</li>
<li><strong>å•†ä¸šåº”ç”¨çš„çˆ†å‘ï¼š</strong> ç”µå•†æ¢è£…ã€å®¤å†…è®¾è®¡ã€è¾…åŠ©æ•™è‚²ã€åŒ»ç–—æ ‡æ³¨ï¼Œè¿™äº›é¢†åŸŸçš„ç”Ÿäº§åŠ›å°†è¿æ¥è´¨çš„é£è·ƒã€‚</li>
<li><strong>åˆ›æ„çš„æ— é™å»¶ä¼¸ï¼š</strong> æ— è®ºæ˜¯ææ€ªçš„çƒ¤é¢åŒ…æµç¨‹å›¾ï¼Œè¿˜æ˜¯ä¸¥è‚ƒçš„æ•°å­¦æ¨å¯¼ï¼Œå®ƒéƒ½èƒ½æˆä¸ºä½ å¤§è„‘çš„å¤–æŒ‚ã€‚</li>
</ol>
<p>è°·æ­Œ Nano Banana Pro çš„å‘å¸ƒï¼Œæ ‡å¿—ç€å›¾åƒç”Ÿæˆæ¨¡å‹æ­£å¼è¿›å…¥äº†**â€œé€šæ„Ÿâ€**æ—¶ä»£ã€‚å®ƒä¸å†ä»…ä»…æ˜¯åƒç´ çš„å †ç Œï¼Œè€Œæ˜¯é€»è¾‘ä¸ç‰©ç†çš„æŠ•å°„ã€‚</p>
<p>å…³äºè¿™æ¬¾æ¨¡å‹çš„æ›´å¤šç©æ³•å’Œæç¤ºè¯æŠ€å·§ï¼Œæˆ‘ä»¬å°†åœ¨åç»­çš„æ¨æ–‡ä¸­ç»§ç»­æ›´æ–°ã€‚<strong>AIè¿›åŒ–çš„é€Ÿåº¦æ¯”æˆ‘ä»¬æƒ³è±¡çš„æ›´å¿«ï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ</strong></p>
<hr/>
<p><em>æœ¬æ–‡æµ‹è¯•å†…å®¹å‡åŸºäºçœŸå®è§†é¢‘æ¼”ç¤ºç´ æï¼ŒæŠ€æœ¯å‚æ•°å‚è€ƒå®˜æ–¹å‘å¸ƒä¿¡æ¯ã€‚ä¿æŒå®¢è§‚ï¼Œæ‹’ç»æ§æ€ã€‚</em></p>
<p><strong>è®°å¾—ç‚¹èµã€åœ¨çœ‹ã€è½¬å‘ï¼Œå…³æ³¨æˆ‘ä»¬ï¼Œä¸é”™è¿‡æ¯ä¸€æ¬¡AIæŠ€æœ¯çš„å˜é©ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¾¤æ™– DSM æ›´æ–°å Cloudflare DDNS å¤±æ•ˆçš„æ’æŸ¥è®°å½•]]></title>    <link>https://juejin.cn/post/7574978847152357416</link>    <guid>https://juejin.cn/post/7574978847152357416</guid>    <pubDate>2025-11-22T02:29:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574978847152357416" data-draft-id="7575015480198807604" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¾¤æ™– DSM æ›´æ–°å Cloudflare DDNS å¤±æ•ˆçš„æ’æŸ¥è®°å½•"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,DNS"/> <meta itemprop="datePublished" content="2025-11-22T02:29:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­æ´‹"/> <meta itemprop="url" content="https://juejin.cn/user/1099167359835015"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¾¤æ™– DSM æ›´æ–°å Cloudflare DDNS å¤±æ•ˆçš„æ’æŸ¥è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1099167359835015/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­æ´‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:29:38.000Z" title="Sat Nov 22 2025 02:29:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{font-family:-apple-system,BlinkMacSystemFont,PingFang SC,Helvetica Neue,Helvetica,Arial,sans-serif;word-break:break-word;line-height:1.75;font-weight:200;font-size:16px;overflow-x:hidden;color:#666;letter-spacing:.5px}.markdown-body a{text-decoration:none;color:#0064c8;position:relative}.markdown-body a:after{content:"";position:absolute;bottom:-2px;left:0;width:100%;height:1px;background-color:rgba(0,100,200,.7);transform:scale(0);transition:all .4s ease-in-out}.markdown-body a:link:hover:after{transform:scale(1)}.markdown-body code{padding:2px 4px;font-size:.9em;font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px;background-color:rgba(0,46,70,.0431);color:#39f}.markdown-body strong{font-weight:400}.markdown-body em{color:#ff6a00}.markdown-body del,.markdown-body s{color:#bbb}.markdown-body small{font-size:.8em;color:#bbb}.markdown-body kbd{margin:0 .1em;padding:5px 8px 3px;border:1px solid #d1d5d9;border-radius:3px;box-shadow:0 1px 0 0 #e3e4e6,inset 0 0 0 2px #fff;background-color:#eee;font-weight:600;font-size:.8em;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;white-space:nowrap;color:#666}.markdown-body kbd:first-child{margin-left:0}.markdown-body kbd:last-child{margin-right:0}.markdown-body img{display:block;border:0;max-width:calc(100% - 20px);min-width:20px;min-height:20px;margin:0 10px;box-shadow:0 2px 8px 2px rgba(0,0,0,.2);transition:all .25s ease-in-out}.markdown-body img:hover{transform:translateY(-4px)}.markdown-body blockquote,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{line-height:inherit;font-size:inherit;color:inherit}.markdown-body blockquote:first-child,.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child,.markdown-body ol:first-child,.markdown-body p:first-child,.markdown-body pre:first-child,.markdown-body table:first-child,.markdown-body ul:first-child{margin-top:0}.markdown-body blockquote:last-child,.markdown-body h1:last-child,.markdown-body h2:last-child,.markdown-body h3:last-child,.markdown-body h4:last-child,.markdown-body h5:last-child,.markdown-body h6:last-child,.markdown-body ol:last-child,.markdown-body p:last-child,.markdown-body pre:last-child,.markdown-body table:last-child,.markdown-body ul:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:1.6em 0 .6em;color:#333;font-weight:400;position:relative}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{position:absolute;left:-2em}.markdown-body h1{font-size:1.75em}.markdown-body h1:before{content:"#"}.markdown-body h1:first-child{margin-top:0}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.35em}.markdown-body h4{font-size:1.2em}.markdown-body h5{font-size:1.1em}.markdown-body h6{font-size:1em}.markdown-body blockquote,.markdown-body ol,.markdown-body pre,.markdown-body table,.markdown-body ul{margin:1em 0}.markdown-body p{margin:.7em 0;word-break:break-word}.markdown-body pre{padding:8px 12px;color:#666;background-color:rgba(0,46,70,.0431);border:1px solid #ebebeb;tab-size:4;white-space:pre-wrap;line-height:1.4}.markdown-body pre code{color:inherit;background-color:transparent;padding:0}.markdown-body ol,.markdown-body ul{margin:1em 0 1em 2em;padding:0;line-height:1.5!important;font-size:inherit;color:inherit}.markdown-body ol:first-child,.markdown-body ul:first-child{margin-top:0}.markdown-body ol:last-child,.markdown-body ul:last-child{margin-bottom:0}.markdown-body ol li,.markdown-body ul li{margin:.5em 0;list-style:inherit}.markdown-body ul{list-style:disc outside}.markdown-body ul ul{list-style-type:circle}.markdown-body ul ul ul{list-style-type:square}.markdown-body ol{list-style:decimal outside}.markdown-body ol ol{list-style-type:lower-alpha}.markdown-body ol ol ol{list-style-type:lower-roman}.markdown-body blockquote{font-size:.9em;padding:8px 20px 8px 15px;color:#666;border-left:5px solid rgba(0,100,200,.7);background-color:rgba(0,100,200,.1)}.markdown-body table{border-collapse:collapse;border-spacing:0;max-width:100%;min-width:50%;word-wrap:break-word;color:inherit}.markdown-body table thead tr{background-color:#f4f6f7}.markdown-body table td,.markdown-body table th{padding:4px 16px;font-size:.95em;text-align:left;color:inherit;border:0;min-width:72px}.markdown-body table td[align=center],.markdown-body table th[align=center]{text-align:center}.markdown-body table td[align=right],.markdown-body table th[align=right]{text-align:right}.markdown-body table th{border-bottom:2px solid #e3e4e6;color:#333;font-weight:400;white-space:nowrap}.markdown-body table td{border-bottom:1px solid #ebebeb}.markdown-body hr{margin:1.5em 0;padding:0;border:0;background:linear-gradient(90deg,rgba(0,46,70,.0431),#ebebeb 50%,rgba(0,46,70,.0431));height:1px}.markdown-body br{content:"";display:block}</style><style data-highlight="" data-highlight-key="tomorrow-night">.hljs-comment,.hljs-quote{color:#969896}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c66}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#de935f}.hljs-attribute{color:#f0c674}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#b5bd68}.hljs-section,.hljs-title{color:#81a2be}.hljs-keyword,.hljs-selector-tag{color:#b294bb}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1d1f21;color:#c5c8c6}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å‰ä¸¤å¤©æˆ‘çš„ç¾¤æ™– NAS æç¤º DSM æœ‰æ–°ç‰ˆæœ¬æ›´æ–°ã€‚ç”±äºå·²ç»å¥½ä¹…æ²¡æ›´æ–°ï¼Œä¸€ç„å‘è¡Œè¯´æ˜å‘ç°æ–° feature å’Œ bugfix è¿˜æŒºå¤šï¼Œæƒ³ç€æ—¶é—´ä¹Ÿä¸çŸ­äº†ï¼Œé‚£å°±é¡ºæ‰‹æ›´ä¸€ä¸‹å§ã€‚</p>
<p>ç³»ç»Ÿæ›´æ–°å¾—å€’æ˜¯å¾ˆé¡ºåˆ©ï¼Œæ›´æ–°åå•¥å¼‚å¸¸ä¹Ÿæ²¡å‘ç°ï¼Œå†…ç½‘/å¤–ç½‘è®¿é—®éƒ½æ­£å¸¸ï¼Œæˆ‘ä¹Ÿå°±æ²¡å†ç®¡ã€‚</p>
<p>ç›´åˆ°æ˜¨æ™šäº‹æƒ…æ‰å¼€å§‹ä¸å¯¹ï¼šæˆ‘çªç„¶å‘ç°é€šè¿‡ DDNS å®Œå…¨æ— æ³•è®¿é—® NAS ä¸Šçš„ä»»ä½•åº”ç”¨ã€‚ä¸è¿‡å½“æ—¶å®¶é‡Œç½‘ç»œå¡å¾—è¦å‘½ï¼Œæˆ‘ä¹Ÿæ²¡å¤ªå½“å›äº‹ï¼Œåªä»¥ä¸ºæ˜¯ç½‘ç»œæŠ½é£ã€‚</p>
<p>ä½†ä»Šå¤©ä¸€æ—©èµ·æ¥ç½‘ç»œé€Ÿåº¦æ¢å¤ï¼Œå¯åŸŸåä¾ç„¶ä¸é€šï¼Œè¿™æ—¶å€™æˆ‘æ‰çŸ¥é“ç»å¯¹ä¸æ˜¯ç½‘ç»œé€Ÿåº¦çš„é—®é¢˜äº†ï¼Œè¿™æ‰å¼€å§‹æ­£å¼æ’æŸ¥ã€‚</p>
<h2 data-id="heading-1">æ’æŸ¥é“¾è·¯å¤ç›˜</h2>
<p>ä¸‹é¢æ˜¯æˆ‘è¿™æ¬¡é‡åˆ°é—®é¢˜åçš„å®Œæ•´æ’æŸ¥è¿‡ç¨‹ã€‚ä¸€æ–¹é¢æ˜¯ç»™å¯èƒ½é‡åˆ°åŒæ ·å‘çš„æœ‹å‹æä¾›ä¸€ä¸ªå‚è€ƒæ€è·¯ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ç»™è‡ªå·±åšä¸ªè®°å½•ï¼Œæ–¹ä¾¿ä»¥åå†é‡åˆ°ç±»ä¼¼æƒ…å†µæ—¶èƒ½æ›´å¿«å®šä½é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">1. å…ˆç¡®è®¤ NAS æœåŠ¡æœ¬èº«æ˜¯å¦æ­£å¸¸</h3>
<p>ç¬¬ä¸€æ­¥å¾ˆç®€å•ï¼š  <strong>é€šè¿‡å†…ç½‘ IP è®¿é—® NAS</strong>ï¼Œä¸€åˆ‡æ­£å¸¸ï¼Œç³»ç»ŸæœåŠ¡éƒ½åœ¨ã€‚</p>
<h3 data-id="heading-3">2. å†ç¡®è®¤å…¬ç½‘è®¿é—®æ˜¯å¦æ­£å¸¸</h3>
<p>ç”¨å®¶é‡Œçš„ <strong>å…¬ç½‘ IP ç›´è¿</strong> NAS æš´éœ²å‡ºå»çš„ç«¯å£ï¼Œèƒ½é€šã€‚è¯´æ˜ ISP æ²¡é—®é¢˜ï¼Œç«¯å£ä¹Ÿæ²¡è¢«å°ã€‚</p>
<h3 data-id="heading-4">3. æ£€æŸ¥ç¾¤æ™– DSM è‡ªå¸¦çš„ DDNS çŠ¶æ€</h3>
<p>æ‰“å¼€ <strong>æ§åˆ¶é¢æ¿ â†’ å¤–éƒ¨è®¿é—® â†’ DDNS</strong>ã€‚</p>
<p>æœç„¶çœ‹åˆ° DDNS çŠ¶æ€ä¸€ç›´å¡åœ¨ <strong>â€œæ­£åœ¨è¿æ¥...â€</strong>ï¼Œ  ç‚¹â€œæµ‹è¯•è¿æ¥â€ï¼Œè½¬åŠå¤©åœˆï¼Œæœ€åæŠ¥ <strong>è¿æ¥è¶…æ—¶</strong>ã€‚</p>
<p>è‡³æ­¤åŸºæœ¬ç¡®è®¤é—®é¢˜å‡ºåœ¨ DDNSã€‚</p>
<h3 data-id="heading-5">4. æ€€ç–‘æ˜¯å¦æ˜¯ NAS ä¸Šçš„ä»£ç†å¯¼è‡´çš„é—®é¢˜</h3>
<p>æˆ‘ä¹‹å‰é‡åˆ°è¿‡ï¼š  <strong>åªè¦å¼€äº†ç³»ç»Ÿä»£ç† â†’ é‡å¯ NAS â†’ è‡ªå®šä¹‰ DDNS ä¼šæ— æ³•è¿æ¥</strong>ï¼Œ</p>
<p><strong>å¿…é¡»æ˜¯ï¼š</strong></p>
<ol>
<li>å…ˆè¿ä¸Š DDNS</li>
<li>å†æ‰‹åŠ¨å¼€å¯ç³»ç»Ÿä»£ç†</li>
</ol>
<p>è¿™å¾ˆå¥‡æ€ªï¼Œä½†ç¡®å®å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿä¸€ç›´æ²¡æœ‰å»è§£å†³ï¼Œæ‰€ä»¥è¿™æ¬¡æˆ‘ä¹Ÿå…ˆæ’æŸ¥äº†ä¸€éä»£ç†è®¾ç½®ï¼Œç»“æœå‘ç°ä»£ç†æ˜¯å…³é—­çš„ï¼Œè¿™æ¡å¯èƒ½æ€§æ’é™¤äº†ã€‚</p>
<h3 data-id="heading-6">5. æ€€ç–‘ Cloudflare åˆå®•æœºï¼Ÿ</h3>
<p>çªç„¶æƒ³èµ·å‰ä¸¤å¤© Cloudflare å®•æœºï¼Œéš¾ä¸æˆåˆå®•æœºäº†ï¼Ÿ</p>
<p>æˆ‘ç™»å½• CF æ§åˆ¶å°çœ‹äº†çœ¼ï¼Œæ²¡æœ‰ä»»ä½•å‘Šè­¦ã€‚ä¸ºäº†ç¡®è®¤ï¼Œæˆ‘è¿˜é¡ºæ‰‹è®¿é—®äº†å‡ ä¸ªæ‰˜ç®¡åœ¨ Vercelã€ç»è¿‡ Cloudflare çš„æœåŠ¡ï¼Œä¸€åˆ‡æ­£å¸¸ï¼Œè¯´æ˜ Cloudflare æ²¡é”…ã€‚</p>
<h3 data-id="heading-7">6. ç»ˆäºæŠŠæ€€ç–‘å¯¹è±¡æŒ‡å‘ DSM æ›´æ–°</h3>
<p>è¿™æ—¶æˆ‘ä¸ç¦æƒ³èµ·äº†ç¦å°”æ‘©æ–¯æ³•åˆ™ï¼š</p>
<blockquote>
<p>â€œå½“ä½ æ’é™¤äº†æ‰€æœ‰ä¸å¯èƒ½çš„ï¼Œå‰©ä¸‹çš„å³ä½¿å†ç¦»è°±ï¼Œä¹Ÿå¿…ç„¶æ˜¯çœŸç›¸ã€‚â€</p>
</blockquote>
<p>æˆ‘å…ˆæ˜¯åœ¨ Nas ä¸Šæ·»åŠ  DDNS çš„åœ°æ–¹çœ‹äº†ä¸€ä¸‹æœåŠ¡æä¾›å•†ï¼Œæœç„¶ï¼Œæ²¡æœ‰ä¹‹å‰è‡ªå®šä¹‰çš„ Cloudflare äº†ã€‚</p>
<p>æˆ‘å›å¿†äº†ä¸€ä¸‹ï¼Œç¾¤æ™–é»˜è®¤ä¸æ”¯æŒ Cloudflare DDNSï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨éƒ¨ç½²ç¬¬ä¸‰æ–¹è„šæœ¬ï¼Œæ¯”å¦‚å¾ˆå¤šç©å®¶éƒ½ç”¨çš„ <strong>SynologyCloudflareDDNS</strong>ã€‚</p>
<p>ä½†æˆ‘è¿™æ˜¯ä¸¤ä¸‰å¹´å‰é…ç½®çš„äº†ï¼Œæ—©å¿˜å¾—å¹²å¹²å‡€å‡€ï¼Œåªè®°å¾—å½“æ—¶æ˜¯ç”¨ SSH ç™»è¿›å»æ‰”äº†äº›è„šæœ¬ã€æ”¹äº† ddns_provider é…ç½®ï¼Œæˆ‘åªå¥½å»ç½‘ä¸Šé‡æ–°æŸ¥æ•™ç¨‹ã€‚</p>
<h3 data-id="heading-8">7. è½¬æŠ˜ï¼šddns_provider é…ç½®â€œæ¶ˆå¤±äº†â€</h3>
<p>ç½‘ä¸Šçš„åšæ³•éƒ½å·®ä¸å¤šï¼Œæˆ‘ä¹Ÿç…§ç€æ£€æŸ¥äº†ä¸€ä¸‹ NAS çš„ <code>/etc/ddns_provider.conf</code>ã€‚</p>
<p>ç»“æœä¸€æ‰“å¼€å°±å‘ç°ï¼š<strong>æˆ‘ä¹‹å‰æ‰‹åŠ¨æ·»åŠ çš„ Cloudflare provider é…ç½®å½»åº•æ²¡äº†ã€‚</strong></p>
<p>å…«æˆæ˜¯è¿™æ¬¡ DSM æ›´æ–°è¦†ç›–äº†ç³»ç»Ÿæ–‡ä»¶ï¼ŒæŠŠè‡ªå®šä¹‰çš„ DDNS provider ç»™æ¸…å¹²å‡€äº†ã€‚</p>
<p>äºæ˜¯æˆ‘æŠŠç¼ºå¤±çš„é…ç½®é‡æ–°è¡¥ä¸Šã€ä¿å­˜ï¼Œç„¶åå†å›åˆ° DSM çš„ DDNS ç•Œé¢ä¸€çœ‹ï¼Œæœç„¶æœ‰å˜åŒ–ï¼š
åˆ—è¡¨é‡Œå¤šå‡ºäº†ä¸€ä¸ªâ€œ<strong>è®¿é—® DDNS ä¾›åº”å•†çš„ç½‘ç«™</strong>â€çš„æŒ‰é’®ã€‚</p>
<p>è¿™è¯´æ˜æ–°å¢çš„ provider å·²æˆåŠŸåŠ è½½ï¼ˆå› ä¸ºåœ¨ <code>ddns_provider.conf</code> é‡Œè®¾ç½® <code>website</code> å­—æ®µåï¼ŒDSM ä¼šè‡ªåŠ¨åœ¨é¢æ¿ä¸­æ˜¾ç¤ºè¿™ä¸ªå…¥å£ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81af4510c66847a7b2b9cb600b8764ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2Q5rSL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764383378&amp;x-signature=nAYT55Vc8ZY6BXRgc6kdjhkA8Gs%3D" alt="Pasted image 20251122094435.png" loading="lazy"/></p>
<p>å†æµ‹è¯•è¿æ¥ï¼Œç»“æœï¼šè¿˜æ˜¯å¤±è´¥ã€‚</p>
<h3 data-id="heading-9">8. å†ä¸€æŸ¥ï¼šåŸå…ˆæ”¾åœ¨ /sbin çš„è„šæœ¬ä¹Ÿæ²¡äº†</h3>
<p>æˆ‘ç»§ç»­é¡ºç€é…ç½®é‡Œå¼•ç”¨çš„è„šæœ¬è·¯å¾„æŸ¥ä¸‹å»ï¼ˆå°±æ˜¯ SynologyCloudflareDDNS çš„æ ¸å¿ƒè„šæœ¬ï¼‰ã€‚</p>
<p>ç»“æœï¼šæŒ‡å®šè·¯å¾„ä¸‹æ ¹æœ¬æ²¡æœ‰è„šæœ¬ï¼ æˆ‘ç”šè‡³æ€€ç–‘æ˜¯ä¸æ˜¯æˆ‘ä¹‹å‰æ”¾åœ¨å…¶ä»–åœ°æ–¹äº†ï¼Œäºæ˜¯å…¨ç›˜æœç´¢äº†ä¸€éã€‚</p>
<p>æ‰¾ä¸åˆ°ï¼Œæ ¹æœ¬æ‰¾ä¸åˆ°ï¼ŒåŸºæœ¬å¯ä»¥ç¡®è®¤<strong>æ•´ä¸ª /sbin ç›®å½•éƒ½è¢«æ›´æ–°é‡ç½®äº†ã€‚</strong></p>
<p>è‡³æ­¤ç»ˆäºææ¸…æ¥šé—®é¢˜æ ¹å› ï¼š</p>
<blockquote>
<p>DSM æ›´æ–°æ—¶è¦†ç›–äº†ç³»ç»Ÿç›®å½•ï¼Œå¯¼è‡´è‡ªå®šä¹‰ DDNS Provider é…ç½® + è„šæœ¬å…¨éƒ¨æ¶ˆå¤±ã€‚</p>
</blockquote>
<h3 data-id="heading-10">9. ä¿®å¤ï¼šé‡æ–°ä¸Šä¼ è„šæœ¬ + é‡æ–°é…ç½® provider</h3>
<p>æˆ‘é‡æ–°ä¸‹è½½è„šæœ¬ï¼Œä¸Šä¼ åˆ° <code>/sbin</code>ï¼Œç»™å¯æ‰§è¡Œæƒé™ï¼Œå†æ›´æ–° ddns_provider é…ç½®ã€‚</p>
<p>æµ‹è¯•è¿æ¥ï¼Œè¿™æ¬¡æˆåŠŸäº†ï¼ŒDDNS æ¢å¤æ­£å¸¸ï¼</p>
<h3 data-id="heading-11">10. ä¸ºä»€ä¹ˆå‰ä¸¤å¤©è¿˜èƒ½ç”¨ï¼Ÿ</h3>
<p>ç°åœ¨å›å¤´ä¸€æƒ³ï¼Œä¸ºä»€ä¹ˆæ›´æ–°å½“å¤©æ²¡é—®é¢˜ï¼Ÿ</p>
<p>å¾ˆç®€å•ï¼š<strong>å› ä¸ºæˆ‘çš„å…¬ç½‘ IP é‚£å‡ å¤©æ²¡å˜ã€‚</strong> DDNS è™½ç„¶æŒ‚äº†ï¼Œä½†åªè¦ Cloudflare ä¸Šçš„ DNS A è®°å½•è¿˜æŒ‡å‘è€ IPï¼Œè®¿é—®å°±ä¸ä¼šå‡ºé—®é¢˜ã€‚</p>
<p>ç›´åˆ°æ˜¨å¤©å…¬ç½‘ IP æœ‰ä¸€ç‚¹ç‚¹å˜åŠ¨ï¼ˆå¯èƒ½åªå·®ä¸€ä¸¤ä½ï¼‰ï¼Œæˆ‘ç™»é™† CF åˆæ²¡ä»”ç»†çœ‹ A è®°å½•ï¼Œè¿™æ‰å¯¼è‡´åŸŸåå®Œå…¨å¤±æ•ˆã€‚</p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>è¿™æ¬¡é—®é¢˜çš„æ ¹å› å…¶å®éå¸¸éšè”½ï¼š</p>
<ul>
<li>DSM æ›´æ–° â†’ è¦†ç›–ç³»ç»Ÿç›®å½•</li>
<li>è‡ªå®šä¹‰ DDNS Provider é…ç½®è¢«åˆ </li>
<li><code>/sbin</code> ä¸‹çš„ Cloudflare æ›´æ–°è„šæœ¬ä¹Ÿæ¸…ç©º</li>
<li>ä½†å› ä¸ºå…¬ç½‘ IP æ²¡å˜ï¼Œæ‰€ä»¥é—®é¢˜å»¶åäº†ä¸¤å¤©æ‰æš´éœ²</li>
<li>æœ€åä¸€åº¦è¯¯ä»¥ä¸ºæ˜¯ Cloudflareã€ä»£ç†æˆ–ç½‘ç»œçš„é—®é¢˜</li>
</ul>
<p><strong>æœ€ç»ˆçš„è§£å†³åŠæ³•å°±æ˜¯ï¼šé‡æ–°æ”¾å›è„šæœ¬ + é‡å†™ ddns_provider.confã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ³ Claude `code/worktree` å‘½ä»¤æœ€ä½³å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7575050949959614500</link>    <guid>https://juejin.cn/post/7575050949959614500</guid>    <pubDate>2025-11-22T02:30:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575050949959614500" data-draft-id="7575067409416077355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ³ Claude `code/worktree` å‘½ä»¤æœ€ä½³å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Claude,Trae"/> <meta itemprop="datePublished" content="2025-11-22T02:30:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ³ Claude `code/worktree` å‘½ä»¤æœ€ä½³å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T02:30:09.000Z" title="Sat Nov 22 2025 02:30:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§­ ä¸€ã€å‰è¨€ï¼šå½“AIå¼€å§‹ã€Œæ¬ç –ã€</h2>
<p>åœ¨ä¸ <strong>Claude</strong>ï¼ˆAnthropic å¼€å‘çš„AIåŠ©æ‰‹ï¼‰åä½œå¼€å‘ä»£ç æ—¶ï¼Œ<code>code/worktree</code> å‘½ä»¤æ˜¯ä¸€ä¸ªæå…¶æœ‰è¶£çš„å·¥å…·ã€‚<br/>
è¿™ä¸€å‘½ä»¤çš„æ„å›¾ï¼Œæ˜¯è®© AI å’Œå¼€å‘è€…åœ¨ä¸€ä¸ª<strong>éš”ç¦»ä½†åŒæ­¥çš„å·¥ä½œåŒº</strong>ä¸­ååŒä¿®æ”¹ã€ç»„ç»‡é¡¹ç›®ï¼Œå°±åƒæ˜¯ç»™ Claude è‡ªå·±å‡†å¤‡äº†ä¸€ä¸ªâ€œè™šæ‹Ÿåˆ†æ”¯å·¥ä½â€ã€‚</p>
<p>ç®€è¨€ä¹‹ï¼š</p>
<blockquote>
<p><code>code/worktree</code> â‰ˆ â€œè®© Claude ä¸ç ´åä¸»ä»£ç åº“å°±èƒ½å®éªŒæ–°åŠŸèƒ½çš„é­”æ³•ç©ºé—´â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€å‘½ä»¤çš„é€»è¾‘æœ¬è´¨ä¸åº•å±‚å“²å­¦</h2>
<p>ä»åº•å±‚åŸç†è®²ï¼Œå®ƒä¸ Git çš„ <strong>worktree</strong> æ€æƒ³ä¸€è‡´ï¼š<br/>
åˆ›å»ºä¸€ä¸ªå…±äº« <code>.git</code> å…ƒæ•°æ®ä½†ç‹¬ç«‹å·¥ä½œç›®å½•çš„å‰¯æœ¬ã€‚<br/>
è¿™ç§è®¾è®¡æ—¢ä¿ç•™äº†ç‰ˆæœ¬æ§åˆ¶çš„å®Œæ•´æ€§ï¼Œåˆè®©å¤šåœºæ™¯å¼€å‘æˆä¸ºå¯èƒ½ã€‚</p>
<p>åœ¨ Claude ä½“ç³»ä¸­ï¼Œ<code>code/worktree</code> çš„å“²å­¦æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li><strong>Claude ä¸ç›´æ¥æ”¹ä¸»å¹²ï¼ˆmain branchï¼‰</strong> ã€‚</li>
<li><strong>æ¯æ¬¡ç”Ÿæˆä»£ç ï¼Œéƒ½åœ¨ä¸´æ—¶å·¥ä½œåŒºä¸­ä¿®æ”¹ã€‚</strong></li>
<li><strong>å¼€å‘è€…å¯ä»¥é€‰æ‹©åˆå…¥ã€é‡æ„æˆ–ä¸¢å¼ƒã€‚</strong></li>
</ol>
<p>æ¢å¥è¯è¯´ï¼šClaude æ˜¯æ–‡æ˜çš„ï¼Œä¸ä¼šç›´æ¥åœ¨ä½ çš„ä¸»åˆ†æ”¯ä¸Šä¹±åŠ¨ã€‚</p>
<hr/>
<h2 data-id="heading-2">âš™ï¸ ä¸‰ã€åŸºç¡€è¯­æ³•ä¸ç»“æ„</h2>
<p>å‡è®¾ä½ å·²ç»å°†é¡¹ç›®ä»¥ Claude çš„ workspace æ–¹å¼åŠ è½½ã€‚<br/>
æ­¤æ—¶ä½¿ç”¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree create feature/refactor-api
</code></pre>
<p>Claude å°†ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª <code>feature/refactor-api</code> çš„å·¥ä½œåŒºã€‚</li>
<li>å°†å½“å‰ HEAD çš„ä»£ç å¤åˆ¶åˆ°æ–°ç›®å½•ï¼ˆä½†å…±äº« <code>.git</code> æ•°æ®ï¼‰ã€‚</li>
<li>åœ¨è¯¥å·¥ä½œåŒºä¸‹ç”Ÿæˆã€ä¿®æ”¹ã€è¿è¡Œä»£ç ã€‚</li>
</ol>
<p>å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree merge feature/refactor-api
</code></pre>
<p>å°†æ”¹åŠ¨å®‰å…¨åœ°åˆå¹¶å›ä¸»å·¥ä½œåŒºã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§° å››ã€å®è·µæ¡ˆä¾‹ï¼šè®© Claude æ”¹é€ ä½ çš„ Web åº”ç”¨</h2>
<h3 data-id="heading-4">ğŸ§ª åœºæ™¯ç¤ºä¾‹</h3>
<p>ä½ æœ‰ä¸€ä¸ª Node.js + React çš„é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-css" lang="css">my-app/
  â”œâ”€â”€ <span class="hljs-attribute">src</span>/
  â”œâ”€â”€ package<span class="hljs-selector-class">.json</span>
  â””â”€â”€ server<span class="hljs-selector-class">.js</span>
</code></pre>
<p>ä½ å¸Œæœ› Claude å¸®ä½ ï¼š</p>
<blockquote>
<p>å°† Express server æ”¹ä¸ºæ”¯æŒ WebSocket é€šä¿¡ã€‚</p>
</blockquote>
<h3 data-id="heading-5">ğŸ¦¾ æ“ä½œæµç¨‹</h3>
<ol>
<li>
<p><strong>åˆ›å»º Claude å·¥ä½œåŒº</strong></p>
<pre><code class="hljs language-bash" lang="bash">/worktree create feature/add-websocket
</code></pre>
</li>
<li>
<p><strong>Claude è¿›å…¥ä¸“å±å·¥ä½</strong></p>
<p>Claude ä¼šè‡ªåŠ¨å…‹éš†ä»£ç ç»“æ„åˆ°ä¸€ä¸ªæ–°å·¥ä½œåŒºã€‚<br/>
å®ƒçš„ä¿®æ”¹æ“ä½œä¸ä¼šå½±å“ä¸»åˆ†æ”¯ã€‚</p>
</li>
<li>
<p><strong>è®© Claude ä¿®æ”¹ä»£ç </strong></p>
<pre><code class="hljs language-bash" lang="bash">/edit In feature/add-websocket:
Add WebSocket support to server.js
</code></pre>
</li>
<li>
<p><strong>Claude ç¼–è¾‘å¹¶å±•ç¤ºå·®å¼‚</strong></p>
<p>Claude ä¼šç”¨ diff å½¢å¼å±•ç¤ºä¿®æ”¹åŒºåŸŸï¼Œå¼€å‘è€…ç¡®è®¤åæ‰ä¼šè½åœ°ã€‚</p>
</li>
<li>
<p><strong>æµ‹è¯•å’Œè¯„å®¡</strong></p>
<p>ä½ å¯ä»¥è®© Claude æ‰§è¡Œå•å…ƒæµ‹è¯•å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/run npm <span class="hljs-built_in">test</span>
</code></pre>
<p>æˆ–è®©å®ƒè‡ªåŠ¨è¿è¡Œ ESLint æ£€æŸ¥ã€‚</p>
</li>
<li>
<p><strong>åˆå¹¶æˆæœ</strong></p>
<p>ä¸€æ—¦æ»¡æ„ï¼Œå¯ä»¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree merge feature/add-websocket
</code></pre>
<p>å®Œæˆé›†æˆåå¯ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree delete feature/add-websocket
</code></pre>
<p>æ¸…ç†éš”ç¦»åŒºï¼Œä¿æŒå·¥ä½œåŒºæ•´æ´ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-6">ğŸ§  äº”ã€åº•å±‚å®ç°å»ºè®®ï¼ˆç»“åˆGitæœºåˆ¶ï¼‰</h2>
<blockquote>
<p>Claude <code>code/worktree</code> çš„å®ç°å¯è¢«ç†è§£ä¸ºï¼šé€šè¿‡<strong>AIæ§åˆ¶çš„Gitä¸´æ—¶åˆ†æ”¯</strong>æ‰§è¡ŒæŠ½è±¡çš„å·¥ä½œæµã€‚</p>
</blockquote>
<p>åœ¨åº•å±‚å®ç°ä¸Šï¼Œå¯å¤ç”¨ä»¥ä¸‹ç±» Git é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿ Claude çš„ code/worktree æµç¨‹</span>
<span class="hljs-keyword">const</span> { execSync } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createWorktree</span>(<span class="hljs-params">branch</span>) {
  <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git worktree add ../<span class="hljs-subst">${branch}</span> <span class="hljs-subst">${branch}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸŒ¿ Created worktree: <span class="hljs-subst">${branch}</span>`</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">mergeWorktree</span>(<span class="hljs-params">branch</span>) {
  <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git checkout main`</span>);
  <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git merge <span class="hljs-subst">${branch}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ… Merged <span class="hljs-subst">${branch}</span> into main`</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteWorktree</span>(<span class="hljs-params">branch</span>) {
  <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git worktree remove ../<span class="hljs-subst">${branch}</span> --force`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ§¹ Deleted worktree: <span class="hljs-subst">${branch}</span>`</span>);
}
</code></pre>
<p>Claude åœ¨å…¶å†…éƒ¨ç³»ç»Ÿä¸­æ‰§è¡Œäº†ç±»ä¼¼é€»è¾‘ï¼Œä½†å°†å…¶å…³è”åˆ° AI æ–‡ä»¶ç¼“å­˜å’Œç¼–è¾‘ä¸Šä¸‹æ–‡ç®¡ç†ä¸­ï¼Œä½¿å…¶èƒ½å¤Ÿï¼š</p>
<ul>
<li>é«˜é€ŸåŠ è½½å…³è”æ–‡ä»¶ï¼›</li>
<li>åœ¨éš”ç¦»ç¯å¢ƒä¸­ç¼–è¯‘ï¼›</li>
<li>æ”¯æŒå¤šç‰ˆæœ¬å›æº¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">âš–ï¸ å…­ã€æœ€ä½³å®è·µå»ºè®®ï¼ˆé‡ç£…ç²¾åï¼‰</h2>



































<table><thead><tr><th>ç›®æ ‡</th><th>å»ºè®®å®è·µ</th><th>Claudeå‘½ä»¤ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å¿«é€Ÿè¯•éªŒ</td><td>ä¸ºé‡å¤§é‡æ„ä»£ç é¢„ç•™ç‹¬ç«‹worktree</td><td><code>/worktree create feature/new-ui</code></td></tr><tr><td>å®¡æŸ¥ä»£ç </td><td>ä½¿ç”¨ Claude ç”Ÿæˆdiffå¹¶ç”±äººå·¥ç¡®è®¤</td><td><code>/diff feature/new-ui</code></td></tr><tr><td>è‡ªåŠ¨åŒ–æµ‹è¯•</td><td>å°†æµ‹è¯•è„šæœ¬æ³¨å†Œä¸º Hook</td><td><code>/test run feature/new-ui</code></td></tr><tr><td>å¹¶è¡Œå¼€å‘</td><td>ä¸ºæ¯ä¸ªæ¨¡å—åˆ†é… Claude å®ä¾‹ä¸ç‹¬ç«‹ worktree</td><td><code>/worktree create feature/auth-refactor</code></td></tr><tr><td>å®‰å…¨ç®¡ç†</td><td>å®šæœŸè®© Claude æ¸…ç†è¿‡æœŸå·¥ä½œåŒº</td><td><code>/worktree prune</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">ğŸ§© ä¸ƒã€å†·çŸ¥è¯†ä¸å¹½é»˜æ’æ›²</h2>
<ul>
<li>
<p>æœ‰äººé—®ï¼šä¸ºä»€ä¹ˆ Claude ä¸ç›´æ¥æ”¹ä¸»åˆ†æ”¯ï¼Ÿ<br/>
ğŸ§‘â€ğŸ’» å›ç­”ï¼š<strong>å› ä¸ºä»–æ‡‚ç‰ˆæœ¬ç®¡ç†çš„ç¤¼ä»ªã€‚</strong></p>
</li>
<li>
<p>ä¸€ä¸ªå…¸å‹çš„é”™è¯¯ç”¨æ³•æ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/worktree create main-feature
</code></pre>
<p>Claude ä¼šæ¸©æŸ”åœ°æé†’ï¼š<br/>
<em>â€œæ‚¨åˆšè¯•å›¾æ”¹å†™å†å²ï¼Œè¯·å†·é™ã€‚â€</em></p>
</li>
<li>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼ŒClaude çš„ <code>code/worktree</code> ç­–ç•¥å°±åƒå¤šçº¿ç¨‹è°ƒåº¦ï¼š</p>
<blockquote>
<p>æ¯ä¸ªå·¥ä½œåŒºå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½åœ¨ä¸ºæœªæ¥çš„ä¸»å¹²é™é™åŠªåŠ›ã€‚</p>
</blockquote>
</li>
</ul>
<hr/>
<h2 data-id="heading-9">ğŸ›  å…«ã€ç»“è¯­ï¼šè®©Claudeæˆä¸ºä½ çš„ã€Œå®‰å…¨ç¼–è¾‘å™¨ã€</h2>
<p>åˆç†ä½¿ç”¨ <code>code/worktree</code>ï¼Œæœ¬è´¨ä¸Šæ˜¯è®© Claude ä»ä¸€ä¸ªâ€œAIåŠ©æ‰‹â€å‡çº§ä¸º<strong>ååŒå¼å‰¯å¼€å‘è€…ï¼ˆCo-Developerï¼‰</strong> ã€‚<br/>
å®ƒä¸åªæ˜¯å†™ä»£ç ï¼Œè€Œæ˜¯éµå®ˆå¼€å‘æµç¨‹ï¼Œä¸äººç±»å›¢é˜Ÿå…±ç”Ÿã€‚</p>
<p>å½“ Claude ç”Ÿæˆä»£ç çš„åŒæ—¶ï¼Œè¿˜èƒ½ä¿è¯ä¸»åˆ†æ”¯çš„æ•´æ´ä¸å®‰å…¨æ—¶ï¼Œ<br/>
ä½ ä¼šå‘ç°å¼€å‘å˜å¾—è½»ç›ˆã€ç­–ç•¥å˜å¾—ä¼˜é›…ã€‚</p>
<hr/>
<blockquote>
<p>âœ¨ <strong>æœ€ç»ˆç®´è¨€ï¼š</strong></p>
<p>â€œèªæ˜çš„å¼€å‘è€…è‡ªå·±å†™ä»£ç ï¼Œæ›´èªæ˜çš„å¼€å‘è€…æ•™ Claude åœ¨å¦ä¸€ä¸ª world é‡Œå†™ã€‚â€</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸Šæ¶å…ƒæœåŠ¡-å‘³å¯»çºª æŠ€æœ¯åˆ†äº«]]></title>    <link>https://juejin.cn/post/7575006095389376521</link>    <guid>https://juejin.cn/post/7575006095389376521</guid>    <pubDate>2025-11-22T03:02:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575006095389376521" data-draft-id="7575017581037158438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸Šæ¶å…ƒæœåŠ¡-å‘³å¯»çºª æŠ€æœ¯åˆ†äº«"/> <meta itemprop="keywords" content="å‰ç«¯,HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-22T03:02:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‡å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/4441682708283191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸Šæ¶å…ƒæœåŠ¡-å‘³å¯»çºª æŠ€æœ¯åˆ†äº«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4441682708283191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‡å°‘
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.5 å¦‚é±¼å¾—æ°´
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.5 å¦‚é±¼å¾—æ°´" title="VIP.5 å¦‚é±¼å¾—æ°´" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T03:02:04.000Z" title="Sat Nov 22 2025 03:02:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"/>
<h3 data-id="heading-1">é¡¹ç›®æ¦‚è¿°</h3>
<p><strong>å‘³å¯»çºª-å…ƒæœåŠ¡</strong>æ˜¯ä¸€æ¬¾åŸºäºé¸¿è’™HarmonyOS Nextçš„ç¾é£Ÿåº”ç”¨ï¼Œé›†æˆäº†é¸¿è’™å®˜æ–¹æ¨èçš„zrouterè·¯ç”±ç®¡ç†æ–¹æ¡ˆï¼Œå¹¶å®ç°äº†å®Œæ•´çš„ç”¨æˆ·è®¤è¯ä½“ç³»åŒ…æ‹¬é™é»˜ç™»å½•åŠŸèƒ½ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£çš„ç»„ä»¶åŒ–æ¶æ„ï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6dda080f49b8447f94975b77407ffeb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764385323&amp;x-signature=DYsv%2Bw%2BerF7%2BliJ0irrC2kOpTgQ%3D" alt="image-20251121103048327" loading="lazy"/></p>
<h3 data-id="heading-2">zrouteræ ¸å¿ƒç‰¹æ€§ä¸åŠŸèƒ½</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e759f12275474461a1bfe94ecb5e1f6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764385323&amp;x-signature=BFo5ckRm3dU1ttR6IYEWnccSm8c%3D" alt="image-20251121103359970" loading="lazy"/></p>
<h4 data-id="heading-3">1. ç»Ÿä¸€è·¯ç”±ç®¡ç†</h4>
<p>zrouterä½œä¸ºé¸¿è’™å®˜æ–¹æ¨èçš„è·¯ç”±ç®¡ç†æ–¹æ¡ˆï¼Œä¸ºåº”ç”¨æä¾›äº†å¼ºå¤§çš„é¡µé¢å¯¼èˆªèƒ½åŠ›ã€‚åœ¨å‘³å¯»çºªé¡¹ç›®ä¸­ï¼Œzrouteræ‰¿æ‹…äº†ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<h5 data-id="heading-4">1.1 è‡ªåŠ¨è·¯ç”±ç”Ÿæˆ</h5>
<p>é€šè¿‡<code>router-register-plugin</code>æ’ä»¶è‡ªåŠ¨æ‰«æç”Ÿæˆè·¯ç”±æ„å»ºå™¨ï¼Œé¡¹ç›®ä¸­å·²è‡ªåŠ¨ç”Ÿæˆäº†11ä¸ªé¡µé¢çš„è·¯ç”±æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// _generatedç›®å½•ä¸‹çš„è‡ªåŠ¨ç”Ÿæˆçš„è·¯ç”±æ–‡ä»¶</span>
<span class="hljs-selector-tag">entry</span>\<span class="hljs-selector-tag">src</span>\<span class="hljs-selector-tag">main</span>\<span class="hljs-selector-tag">ets_generated</span>\
â”œâ”€â”€ <span class="hljs-selector-tag">ZRBrowseHistoryPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â <span class="hljs-comment">// æµè§ˆå†å²é¡µé¢</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRCookingTechniqueDetailPage</span><span class="hljs-selector-class">.ets</span> Â <span class="hljs-comment">// çƒ¹é¥ªæŠ€æ³•è¯¦æƒ…</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRCookingToolDetailPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â Â <span class="hljs-comment">// çƒ¹é¥ªå·¥å…·è¯¦æƒ…</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZREditProfilePage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// ç¼–è¾‘èµ„æ–™é¡µé¢</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRFamilyMemberEditPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â  Â <span class="hljs-comment">// å®¶åº­æˆå‘˜ç¼–è¾‘</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRFamilyMemberListPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â  Â <span class="hljs-comment">// å®¶åº­æˆå‘˜åˆ—è¡¨</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRFamilyMemberRecipesPage</span><span class="hljs-selector-class">.ets</span> Â  Â Â <span class="hljs-comment">// å®¶åº­æˆå‘˜èœè°±</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRFavoriteListPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ”¶è—åˆ—è¡¨</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRIngredientDetailPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â  Â <span class="hljs-comment">// é£Ÿæè¯¦æƒ…</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRRecipeDetailPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â  Â  Â  Â <span class="hljs-comment">// èœè°±è¯¦æƒ…</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRRecipeFilterPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â  Â  Â  Â <span class="hljs-comment">// èœè°±ç­›é€‰</span>
â”œâ”€â”€ <span class="hljs-selector-tag">ZRRecipeListPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// èœè°±åˆ—è¡¨</span>
â””â”€â”€ <span class="hljs-selector-tag">ZRTestPage</span><span class="hljs-selector-class">.ets</span> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æµ‹è¯•é¡µé¢</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03af903cbfcf4bf9911dce03cd064813~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764385323&amp;x-signature=65E1eFNoDqOMJrhAHWcprrozQdE%3D" alt="image-20251121103117978" loading="lazy"/></p>
<h5 data-id="heading-5">1.2 ç”Ÿå‘½å‘¨æœŸç®¡ç†</h5>
<p>zrouterå†…ç½®äº†å®Œæ•´çš„é¡µé¢ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ”¯æŒé¡µé¢åˆ›å»ºã€é”€æ¯ã€è¿”å›ç­‰çŠ¶æ€æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸç®¡ç†ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span>Â { <span class="hljs-title class_">Lifecycle</span>, <span class="hljs-title class_">LifecycleEvent</span>, <span class="hljs-title class_">LifecycleRegistry</span>, <span class="hljs-title class_">ZRouter</span> }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">"@hzw/zrouter"</span>;

<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-title function_">ZRTestPageBuilder</span>(<span class="hljs-params"/>)Â {
Â  <span class="hljs-title class_">ZRTestPage</span>()
}

<span class="hljs-meta">@ComponentV2</span>
<span class="hljs-keyword">export</span>Â struct <span class="hljs-title class_">ZRTestPage</span> {
Â Â <span class="hljs-meta">@Local</span>Â <span class="hljs-attr">navDestinationId</span>:Â <span class="hljs-built_in">string</span>Â =Â <span class="hljs-string">''</span>;
Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-attr">pageStack</span>: <span class="hljs-title class_">NavPathStack</span> |Â <span class="hljs-literal">null</span>Â =Â <span class="hljs-literal">null</span>;

Â Â <span class="hljs-meta">@Lifecycle</span>
Â  <span class="hljs-title function_">onCreate</span>(<span class="hljs-params">want: Want, navStack: NavPathStack</span>) {
Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">navDestinationId</span> = want.<span class="hljs-property">parameters</span>?.[<span class="hljs-string">'navDestinationId'</span>]Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">string</span>Â ||Â <span class="hljs-string">''</span>;
Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageStack</span> = navStack;
Â  Â Â <span class="hljs-comment">// æ³¨å†Œæ¨¡æ¿ç®¡ç†å™¨</span>
Â  Â  <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">templateMgr</span>().<span class="hljs-title function_">register</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">navDestinationId</span>)
Â  }

Â Â <span class="hljs-meta">@Lifecycle</span>
Â  <span class="hljs-title function_">onShow</span>(<span class="hljs-params"/>) {
Â  Â Â <span class="hljs-comment">// é¡µé¢æ˜¾ç¤ºæ—¶çš„é€»è¾‘</span>
Â  Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pageStack</span>) {
Â  Â  Â Â <span class="hljs-keyword">const</span>Â router =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">LifecycleRegistry</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">navDestinationId</span>);
Â  Â  Â  <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">templateMgr</span>().<span class="hljs-title function_">dispatch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">navDestinationId</span>, <span class="hljs-title class_">LifecycleEvent</span>.<span class="hljs-property">ON_SHOW</span>, router)
Â  Â  }
Â  }

Â Â <span class="hljs-meta">@Lifecycle</span>
Â  <span class="hljs-title function_">onBackPress</span>():Â <span class="hljs-built_in">boolean</span>Â {
Â  Â Â <span class="hljs-comment">// å¤„ç†è¿”å›é”®é€»è¾‘</span>
Â  Â Â <span class="hljs-keyword">const</span>Â router =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">LifecycleRegistry</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">navDestinationId</span>);
Â  Â Â <span class="hljs-keyword">const</span>Â r = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">templateMgr</span>().<span class="hljs-title function_">dispatch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">navDestinationId</span>, <span class="hljs-title class_">LifecycleEvent</span>.<span class="hljs-property">ON_BACK_PRESS</span>, router)
Â  Â Â <span class="hljs-keyword">return</span>Â r ||Â <span class="hljs-literal">false</span>;
Â  }
}
</code></pre>
<h4 data-id="heading-6">2. å¼ºå¤§çš„å‚æ•°ä¼ é€’æœºåˆ¶</h4>
<p>zrouteræä¾›äº†ç±»å‹å®‰å…¨çš„å‚æ•°ä¼ é€’åŠŸèƒ½ï¼Œæ”¯æŒå¤æ‚çš„å‚æ•°ç±»å‹å’Œç»“æ„ã€‚</p>
<h5 data-id="heading-7">2.1 åŸºæœ¬å‚æ•°ä¼ é€’</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä»é¦–é¡µè·³è½¬åˆ°èœè°±è¯¦æƒ…é¡µï¼Œå¹¶ä¼ é€’å‚æ•°</span>
ZRouter<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.setParam</span>({ recipeId: recipe.id })<span class="hljs-selector-class">.push</span>('RecipeDetailPage');

<span class="hljs-comment">// ä»ç­›é€‰é¡µé¢è·³è½¬åˆ°åˆ—è¡¨é¡µé¢ï¼Œä¼ é€’ç­›é€‰æ¡ä»¶</span>
ZRouter<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.setParam</span>(params)<span class="hljs-selector-class">.push</span>('RecipeListPage');
</code></pre>
<h5 data-id="heading-8">2.2 å¤æ‚å‚æ•°ä¼ é€’</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä¼ é€’å¤šä¸ªç­›é€‰å‚æ•°</span>
constÂ filterParams = {
Â  category:Â <span class="hljs-string">'å·èœ'</span>,
Â  difficulty:Â <span class="hljs-string">'ç®€å•'</span>,
Â  flavor:Â <span class="hljs-string">'é¦™è¾£'</span>,
Â  includeIngredients:Â <span class="hljs-string">'ç‰›è‚‰,é’æ¤’'</span>,
Â  excludeIngredients:Â <span class="hljs-string">'æ´‹è‘±'</span>,
Â  minTime:Â <span class="hljs-number">10</span>,
Â  maxTime:Â <span class="hljs-number">60</span>,
Â  keyword:Â <span class="hljs-string">'éº»å©†è±†è…'</span>
};

ZRouter<span class="hljs-selector-class">.getInstance</span>()<span class="hljs-selector-class">.setParam</span>(filterParams)<span class="hljs-selector-class">.push</span>('RecipeListPage');
</code></pre>
<h5 data-id="heading-9">2.3 å‚æ•°è·å–ä¸ç±»å‹è½¬æ¢</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœ¨ç›®æ ‡é¡µé¢ä¸­è·å–å‚æ•°</span>
<span class="hljs-meta">@ComponentV2</span>
<span class="hljs-keyword">export</span>Â struct <span class="hljs-title class_">RecipeListPage</span> {
Â Â <span class="hljs-meta">@Local</span>Â <span class="hljs-attr">selectMode</span>:Â <span class="hljs-built_in">boolean</span>Â =Â <span class="hljs-literal">false</span>;
Â Â <span class="hljs-meta">@Local</span>Â <span class="hljs-attr">memberId</span>:Â <span class="hljs-built_in">number</span>Â =Â <span class="hljs-number">0</span>;

Â  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"/>) {
Â  Â Â <span class="hljs-comment">// è·å–è·¯ç”±å‚æ•°</span>
Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">selectMode</span> = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'selectMode'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">boolean</span>;
Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">memberId</span> = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'memberId'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">number</span>;
Â  Â Â 
Â  Â Â <span class="hljs-comment">// è·å–ç­›é€‰å‚æ•°</span>
Â  Â Â <span class="hljs-keyword">const</span>Â category = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'category'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">string</span>;
Â  Â Â <span class="hljs-keyword">const</span>Â difficulty = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'difficulty'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">string</span>;
Â  Â Â <span class="hljs-keyword">const</span>Â flavor = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'flavor'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">string</span>;
Â  Â Â <span class="hljs-keyword">const</span>Â includeIngredients = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'includeIngredients'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">string</span>;
Â  Â Â <span class="hljs-keyword">const</span>Â excludeIngredients = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'excludeIngredients'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">string</span>;
Â  Â Â <span class="hljs-keyword">const</span>Â minTime = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'minTime'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">number</span>;
Â  Â Â <span class="hljs-keyword">const</span>Â maxTime = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'maxTime'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">number</span>;
Â  Â Â <span class="hljs-keyword">const</span>Â keyword = <span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getInstance</span>().<span class="hljs-title function_">getParamByKey</span>(<span class="hljs-string">'keyword'</span>)Â <span class="hljs-keyword">as</span>Â <span class="hljs-built_in">string</span>;
Â  }
}
</code></pre>
<h4 data-id="heading-10">3. å£°æ˜å¼è·¯ç”±é…ç½®</h4>
<p>zrouteræ”¯æŒç®€æ´çš„è£…é¥°å™¨è¯­æ³•ï¼Œè®©è·¯ç”±é…ç½®æ›´åŠ ä¼˜é›…ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span>Â { <span class="hljs-title class_">Route</span> }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'@hzw/zrouter'</span>;

<span class="hljs-meta">@Route</span>({ <span class="hljs-attr">name</span>:Â <span class="hljs-string">'TestPage'</span>, <span class="hljs-attr">useTemplate</span>:Â <span class="hljs-literal">true</span>Â })
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">export</span>Â struct <span class="hljs-title class_">TestPage</span> {
Â Â <span class="hljs-meta">@State</span>Â <span class="hljs-attr">message</span>:Â <span class="hljs-built_in">string</span>Â =Â <span class="hljs-string">'This is Test Page'</span>;

Â  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
Â  Â  <span class="hljs-title class_">NavDestination</span>() {
Â  Â  Â  <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>:Â <span class="hljs-number">20</span>Â }) {
Â  Â  Â  Â  <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)
Â  Â  Â  Â  Â  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>)
Â  Â  Â  Â  Â  .<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)
Â  Â  Â  Â Â 
Â  Â  Â  Â  <span class="hljs-title class_">Text</span>(<span class="hljs-string">'ZRouter å¼•å…¥æˆåŠŸï¼'</span>)
Â  Â  Â  Â  Â  .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)
Â  Â  Â  Â  Â  .<span class="hljs-title function_">fontColor</span>(<span class="hljs-string">'#4CAF50'</span>)
Â  Â  Â  }
Â  Â  Â  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
Â  Â  Â  .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
Â  Â  Â  .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)
Â  Â  }
Â  Â  .<span class="hljs-title function_">title</span>(<span class="hljs-string">'æµ‹è¯•é¡µé¢'</span>)
Â  Â  .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
Â  Â  .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
Â  }
}
</code></pre>
<h3 data-id="heading-11">é¡¹ç›®é›†æˆå®è·µ</h3>
<h4 data-id="heading-12">1. ä¾èµ–é…ç½®</h4>
<p>åœ¨é¡¹ç›®çš„<code>oh-package.json5</code>ä¸­æ·»åŠ zrouterä¾èµ–ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{
Â  <span class="hljs-string">"dependencies"</span>: {
Â  Â  <span class="hljs-string">"@hzw/zrouter"</span>: <span class="hljs-string">"^1.8.2"</span>
Â  }
}
</code></pre>
<p>![ä¾èµ–é…ç½®ç¤ºæ„å›¾]<em>å›¾3ï¼šoh-package.json5ä¸­çš„zrouterä¾èµ–é…ç½®</em></p>
<h4 data-id="heading-13">2. åˆå§‹åŒ–é…ç½®</h4>
<p>åœ¨<code>EntryAbility</code>çš„<code>onCreate</code>æ–¹æ³•ä¸­åˆå§‹åŒ–zrouterï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span>Â { ZRouter }Â fromÂ <span class="hljs-string">'@hzw/zrouter'</span>;

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">EntryAbility</span>Â extendsÂ UIAbility {
Â  <span class="hljs-built_in">onCreate</span>(want: Want, launchParam: AbilityConstant.LaunchParam):Â <span class="hljs-type">void</span>Â {
Â  Â Â <span class="hljs-comment">// åˆå§‹åŒ– ZRouter</span>
Â  Â  ZRouter.<span class="hljs-built_in">initialize</span>((config) =&gt;Â {
Â  Â  Â  config.context =Â <span class="hljs-keyword">this</span>.context;
Â  Â  Â  config.isLoggingEnabled =Â <span class="hljs-literal">true</span>;Â <span class="hljs-comment">// å¼€å‘ç¯å¢ƒå¼€å¯æ—¥å¿—</span>
Â  Â  Â  config.isHSPModuleDependent =Â <span class="hljs-literal">false</span>;Â <span class="hljs-comment">// å¦‚æœæœ‰HSPæ¨¡å—è®¾ç½®ä¸ºtrue</span>
Â  Â  });
Â  }
}
</code></pre>
<h4 data-id="heading-14">3. å¯¼èˆªå®¹å™¨é…ç½®</h4>
<p>åœ¨ä¸»é¡µé¢ä¸­ä½¿ç”¨zrouterçš„å¯¼èˆªæ ˆï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span>Â { <span class="hljs-title class_">ZRouter</span> }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'@hzw/zrouter'</span>;

<span class="hljs-meta">@ComponentV2</span>
<span class="hljs-keyword">export</span>Â struct <span class="hljs-title class_">Index</span> {
Â  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
Â  Â  <span class="hljs-title class_">Navigation</span>(<span class="hljs-title class_">ZRouter</span>.<span class="hljs-title function_">getNavStack</span>()) {
Â  Â  Â  <span class="hljs-title class_">HomePage</span>()
Â  Â  }
Â  Â  .<span class="hljs-title function_">mode</span>(<span class="hljs-title class_">NavigationMode</span>.<span class="hljs-property">Stack</span>)
Â  }
}
</code></pre>
<h4 data-id="heading-15">4. ä»£ç æ··æ·†é€‚é…</h4>
<p>åœ¨æ··æ·†è§„åˆ™æ–‡ä»¶<code>obfuscation-rules.txt</code>ä¸­é…ç½®zrouterç›¸å…³çš„ä¿æŠ¤è§„åˆ™ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang"># ZRouter æ··æ·†é…ç½®
-keep<span class="hljs-keyword">-file</span>-name
Index
_generated
ZR*
</code></pre>
<p>è¿™ç¡®ä¿äº†zrouterç”Ÿæˆçš„é¡µé¢åç§°å’Œè·¯ç”±é…ç½®åœ¨æ··æ·†åä»èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ebdd71a3f814a9fa99fc866c4ab3cb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764385323&amp;x-signature=JTTQI4lMj%2BClPozmRBnLeDL2GGE%3D" alt="image-20251121103208018" loading="lazy"/></p>
<h3 data-id="heading-16">é™é»˜ç™»å½•åŠŸèƒ½å®ç°</h3>
<p>é™¤äº†zrouterè·¯ç”±ç®¡ç†ï¼Œé¡¹ç›®è¿˜å®ç°äº†å®Œæ•´çš„ç”¨æˆ·è®¤è¯ä½“ç³»ï¼Œå…¶ä¸­é™é»˜ç™»å½•æ˜¯ä¸€å¤§äº®ç‚¹åŠŸèƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ee0b462325a4111be0553691a22c0fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764385323&amp;x-signature=SEgIGNCYicIWLFAov%2Fw9tYkFreI%3D" alt="image-20251121103220738" loading="lazy"/></p>
<h4 data-id="heading-17">1. é™é»˜ç™»å½•æ ¸å¿ƒé€»è¾‘</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
Â * é™é»˜ç™»å½• - ä¸æ˜¾ç¤ºç™»å½•ç•Œé¢
Â * <span class="hljs-doctag">@param</span> enableSilentLogin æ˜¯å¦å¯ç”¨é™é»˜ç™»å½•
Â * <span class="hljs-doctag">@returns</span> ç™»å½•æ˜¯å¦æˆåŠŸ
Â */</span>
<span class="hljs-keyword">async</span>Â <span class="hljs-title function_">performSilentLogin</span>(<span class="hljs-attr">enableSilentLogin</span>:Â <span class="hljs-built_in">boolean</span>Â =Â <span class="hljs-literal">true</span>):Â <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
Â Â <span class="hljs-comment">// å¦‚æœæœªå¯ç”¨é™é»˜ç™»å½•ï¼Œç›´æ¥è¿”å›</span>
Â Â <span class="hljs-keyword">if</span>Â (!enableSilentLogin) {
Â  Â  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'é™é»˜ç™»å½•å·²å…³é—­'</span>);
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>;
Â  }

Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'å¼€å§‹é™é»˜ç™»å½•'</span>);

Â  Â Â <span class="hljs-comment">// åˆ›å»ºé™é»˜ç™»å½•è¯·æ±‚</span>
Â  Â Â <span class="hljs-keyword">const</span>Â loginRequest =Â <span class="hljs-keyword">new</span>Â authentication.<span class="hljs-title class_">HuaweiIDProvider</span>().<span class="hljs-title function_">createLoginWithHuaweiIDRequest</span>();
Â  Â  loginRequest.<span class="hljs-property">forceLogin</span> =Â <span class="hljs-literal">false</span>;Â <span class="hljs-comment">// é™é»˜ç™»å½•</span>
Â  Â  loginRequest.<span class="hljs-property">state</span> = util.<span class="hljs-title function_">generateRandomUUID</span>();

Â  Â Â <span class="hljs-keyword">const</span>Â controller =Â <span class="hljs-keyword">new</span>Â authentication.<span class="hljs-title class_">AuthenticationController</span>();
Â  Â Â <span class="hljs-keyword">const</span>Â response =Â <span class="hljs-keyword">await</span>Â controller.<span class="hljs-title function_">executeRequest</span>(loginRequest);

Â  Â Â <span class="hljs-keyword">const</span>Â loginWithHuaweiIDResponse = responseÂ <span class="hljs-keyword">as</span>Â authentication.<span class="hljs-property">LoginWithHuaweiIDResponse</span>;
Â  Â Â <span class="hljs-keyword">const</span>Â state = loginWithHuaweiIDResponse.<span class="hljs-property">state</span>;

Â  Â Â <span class="hljs-comment">// éªŒè¯ state</span>
Â  Â Â <span class="hljs-keyword">if</span>Â (state &amp;&amp; loginRequest.<span class="hljs-property">state</span> !== state) {
Â  Â  Â  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN</span>,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'çŠ¶æ€éªŒè¯å¤±è´¥'</span>);
Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>;
Â  Â  }

Â  Â Â <span class="hljs-keyword">const</span>Â credential = loginWithHuaweiIDResponse.<span class="hljs-property">data</span>;
Â  Â Â <span class="hljs-keyword">if</span>Â (!credential) {
Â  Â  Â  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN</span>,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'æœªè·å–åˆ°å‡­è¯'</span>);
Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>;
Â  Â  }

Â  Â Â <span class="hljs-comment">// è°ƒç”¨åç«¯APIå®Œæˆç™»å½•</span>
Â  Â Â <span class="hljs-keyword">const</span>Â loginResponse =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">huaweiLogin</span>({
Â  Â  Â  <span class="hljs-attr">authorizationCode</span>: credential.<span class="hljs-property">authorizationCode</span> ||Â <span class="hljs-string">''</span>,
Â  Â  Â  <span class="hljs-attr">openID</span>: credential.<span class="hljs-property">openID</span> ||Â <span class="hljs-string">''</span>,
Â  Â  Â  <span class="hljs-attr">unionID</span>: credential.<span class="hljs-property">unionID</span> ||Â <span class="hljs-string">''</span>,
Â  Â  Â  <span class="hljs-attr">idToken</span>: credential.<span class="hljs-property">idToken</span>
Â  Â  });

Â  Â Â <span class="hljs-comment">// ä¿å­˜ç™»å½•çŠ¶æ€</span>
Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveLoginState</span>(loginResponse);

Â  Â Â <span class="hljs-comment">// æ›´æ–°å…¨å±€ç”¨æˆ·çŠ¶æ€</span>
Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">userStore</span>.<span class="hljs-title function_">setUser</span>(loginResponse.<span class="hljs-property">user</span>);
Â  Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">userStore</span>.<span class="hljs-title function_">setLoggedIn</span>(<span class="hljs-literal">true</span>);

Â  Â  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'é™é»˜ç™»å½•æˆåŠŸ: %{public}s'</span>,Â 
Â  Â  Â  loginResponse.<span class="hljs-property">user</span>.<span class="hljs-property">nickname</span> || loginResponse.<span class="hljs-property">user</span>.<span class="hljs-property">username</span>);
Â  Â Â 
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">true</span>;

Â  }Â <span class="hljs-keyword">catch</span>Â (error) {
Â  Â Â <span class="hljs-keyword">const</span>Â err = errorÂ <span class="hljs-keyword">as</span>Â <span class="hljs-title class_">BusinessError</span>;
Â  Â Â <span class="hljs-keyword">if</span>Â (err.<span class="hljs-property">code</span> ===Â <span class="hljs-number">1001502001</span>) {
Â  Â  Â Â <span class="hljs-comment">// ç”¨æˆ·æœªç™»å½•åä¸ºè´¦å·ï¼Œè¿™æ˜¯æ­£å¸¸æƒ…å†µ</span>
Â  Â  Â  hilog.<span class="hljs-title function_">info</span>(<span class="hljs-variable constant_">DOMAIN</span>,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'ç”¨æˆ·æœªç™»å½•åä¸ºè´¦å·'</span>);
Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  hilog.<span class="hljs-title function_">error</span>(<span class="hljs-variable constant_">DOMAIN</span>,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'é™é»˜ç™»å½•å¤±è´¥: %{public}s'</span>,Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(error));
Â  Â  }
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">false</span>;
Â  }
}
</code></pre>
<h4 data-id="heading-18">2. å¯åŠ¨ç™»å½•æµç¨‹</h4>
<p>åœ¨åº”ç”¨å¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹ç™»å½•é€»è¾‘ï¼š</p>
<ol>
<li><strong>æœ¬åœ°çŠ¶æ€æ¢å¤</strong>ï¼šä¼˜å…ˆä»æœ¬åœ°å­˜å‚¨æ¢å¤ç™»å½•çŠ¶æ€</li>
<li><strong>é™é»˜ç™»å½•</strong>ï¼šå¦‚æœæœ¬åœ°æ¢å¤å¤±è´¥ä¸”å¼€å¯é™é»˜ç™»å½•ï¼Œåˆ™æ‰§è¡Œé™é»˜ç™»å½•</li>
<li><strong>ç”¨æˆ·çŠ¶æ€æ›´æ–°</strong>ï¼šæ›´æ–°å…¨å±€ç”¨æˆ·çŠ¶æ€ç®¡ç†</li>
</ol>

<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">/**
Â * åº”ç”¨å¯åŠ¨æ—¶çš„ç™»å½•é€»è¾‘
Â * 1. å…ˆå°è¯•ä»æœ¬åœ°æ¢å¤ç™»å½•çŠ¶æ€
Â * 2. å¦‚æœæœ¬åœ°æ¢å¤æˆåŠŸï¼Œä¸å†æ‰§è¡Œé™é»˜ç™»å½•
Â * 3. å¦‚æœæœ¬åœ°æ¢å¤å¤±è´¥ä¸”å¼€å¯äº†é™é»˜ç™»å½•ï¼Œåˆ™æ‰§è¡Œé™é»˜ç™»å½•
Â */</span>
<span class="hljs-function"><span class="hljs-keyword">private</span>Â <span class="hljs-keyword">async</span>Â <span class="hljs-title">performStartupLogin</span>():Â Promise&lt;<span class="hljs-keyword">void</span>&gt;</span> {
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  hilog.info(DOMAIN,Â <span class="hljs-string">'EntryAbility'</span>,Â <span class="hljs-string">'å¼€å§‹æ‰§è¡Œå¯åŠ¨ç™»å½•é€»è¾‘'</span>);

Â  Â Â <span class="hljs-comment">// 1. å…ˆå°è¯•ä»æœ¬åœ°æ¢å¤ç™»å½•çŠ¶æ€</span>
Â  Â Â <span class="hljs-keyword">const</span>Â restored =Â <span class="hljs-keyword">await</span>Â <span class="hljs-keyword">this</span>.authManager.restoreLoginState();
Â  Â Â <span class="hljs-keyword">if</span>Â (restored) {
Â  Â  Â  hilog.info(DOMAIN,Â <span class="hljs-string">'EntryAbility'</span>,Â <span class="hljs-string">'ä»æœ¬åœ°æ¢å¤ç™»å½•çŠ¶æ€æˆåŠŸ'</span>);
Â  Â  Â Â <span class="hljs-keyword">return</span>;
Â  Â  }

Â  Â Â <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦å¯ç”¨é™é»˜ç™»å½•</span>
Â  Â Â <span class="hljs-keyword">const</span>Â enableSilentLogin =Â <span class="hljs-keyword">await</span>Â <span class="hljs-keyword">this</span>.storageManager.getBoolean(
Â  Â  Â  StorageKeys.ENABLE_SILENT_LOGIN,Â 
Â  Â  Â Â <span class="hljs-literal">true</span>Â <span class="hljs-comment">// é»˜è®¤å¼€å¯</span>
Â  Â  );

Â  Â Â <span class="hljs-keyword">if</span>Â (!enableSilentLogin) {
Â  Â  Â  hilog.info(DOMAIN,Â <span class="hljs-string">'EntryAbility'</span>,Â <span class="hljs-string">'é™é»˜ç™»å½•å·²å…³é—­ï¼Œè·³è¿‡'</span>);
Â  Â  Â Â <span class="hljs-keyword">return</span>;
Â  Â  }

Â  Â Â <span class="hljs-comment">// 3. æ‰§è¡Œé™é»˜ç™»å½•</span>
Â  Â Â <span class="hljs-keyword">const</span>Â success =Â <span class="hljs-keyword">await</span>Â <span class="hljs-keyword">this</span>.authManager.performSilentLogin(enableSilentLogin);
Â  Â Â <span class="hljs-keyword">if</span>Â (success) {
Â  Â  Â  hilog.info(DOMAIN,Â <span class="hljs-string">'EntryAbility'</span>,Â <span class="hljs-string">'é™é»˜ç™»å½•æˆåŠŸ'</span>);
Â  Â  }Â <span class="hljs-keyword">else</span>Â {
Â  Â  Â  hilog.info(DOMAIN,Â <span class="hljs-string">'EntryAbility'</span>,Â <span class="hljs-string">'é™é»˜ç™»å½•å¤±è´¥æˆ–ç”¨æˆ·æœªç™»å½•'</span>);
Â  Â  }

Â  }Â <span class="hljs-keyword">catch</span>Â (error) {
Â  Â  hilog.error(DOMAIN,Â <span class="hljs-string">'EntryAbility'</span>,Â <span class="hljs-string">'å¯åŠ¨ç™»å½•é€»è¾‘æ‰§è¡Œå¤±è´¥: %{public}s'</span>,Â JSON.stringify(error));
Â  }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4b91e0c788f43a0a737488c17282238~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiH5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764385323&amp;x-signature=DilTI5VV55VR98QoieFLk3Ljwyk%3D" alt="image-20251121103306865" loading="lazy"/></p>
<p>image-20251121103306865</p>
<h4 data-id="heading-19">3. æ‰‹åŠ¨ç™»å½•æ”¯æŒ</h4>
<p>é™¤äº†é™é»˜ç™»å½•ï¼Œé¡¹ç›®è¿˜æ”¯æŒæ‰‹åŠ¨ç™»å½•ï¼Œç”¨æˆ·å¯ä»¥ä¸»åŠ¨è§¦å‘ç™»å½•æµç¨‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">/**
Â * æ‰‹åŠ¨ç™»å½• - æ˜¾ç¤ºç™»å½•ç•Œé¢
Â * @returns ç™»å½•å“åº”æ•°æ®
Â */</span>
<span class="hljs-function"><span class="hljs-keyword">async</span>Â <span class="hljs-title">performManualLogin</span>():Â Promise&lt;LoginResponse |Â <span class="hljs-literal">null</span>&gt;</span> {
Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  hilog.info(DOMAIN,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'å¼€å§‹æ‰‹åŠ¨ç™»å½•'</span>);

Â  Â Â <span class="hljs-comment">// åˆ›å»ºç™»å½•è¯·æ±‚</span>
Â  Â Â <span class="hljs-keyword">const</span>Â loginRequest =Â <span class="hljs-keyword">new</span>Â authentication.HuaweiIDProvider().createLoginWithHuaweiIDRequest();
Â  Â  loginRequest.forceLogin =Â <span class="hljs-literal">true</span>;Â <span class="hljs-comment">// å¼ºåˆ¶æ˜¾ç¤ºç™»å½•é¡µé¢</span>
Â  Â  loginRequest.state = util.generateRandomUUID();

Â  Â Â <span class="hljs-keyword">const</span>Â controller =Â <span class="hljs-keyword">new</span>Â authentication.AuthenticationController();
Â  Â Â <span class="hljs-keyword">const</span>Â response =Â <span class="hljs-keyword">await</span>Â controller.executeRequest(loginRequest);

Â  Â Â <span class="hljs-keyword">const</span>Â loginWithHuaweiIDResponse = responseÂ <span class="hljs-keyword">as</span>Â authentication.LoginWithHuaweiIDResponse;
Â  Â Â <span class="hljs-keyword">const</span>Â state = loginWithHuaweiIDResponse.state;

Â  Â Â <span class="hljs-keyword">if</span>Â (state &amp;&amp; loginRequest.state !== state) {
Â  Â  Â  hilog.error(DOMAIN,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'çŠ¶æ€éªŒè¯å¤±è´¥'</span>);
Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">null</span>;
Â  Â  }

Â  Â Â <span class="hljs-keyword">const</span>Â credential = loginWithHuaweiIDResponse.data;
Â  Â Â <span class="hljs-keyword">if</span>Â (!credential) {
Â  Â  Â  hilog.error(DOMAIN,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'æœªè·å–åˆ°å‡­è¯'</span>);
Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">null</span>;
Â  Â  }

Â  Â Â <span class="hljs-comment">// è°ƒç”¨åç«¯APIå®Œæˆç™»å½•</span>
Â  Â Â <span class="hljs-keyword">const</span>Â loginResponse =Â <span class="hljs-keyword">await</span>Â huaweiLogin({
Â  Â  Â  authorizationCode: credential.authorizationCode ||Â <span class="hljs-string">''</span>,
Â  Â  Â  openID: credential.openID ||Â <span class="hljs-string">''</span>,
Â  Â  Â  unionID: credential.unionID ||Â <span class="hljs-string">''</span>,
Â  Â  Â  idToken: credential.idToken
Â  Â  });

Â  Â Â <span class="hljs-comment">// ä¿å­˜ç™»å½•çŠ¶æ€</span>
Â  Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-keyword">this</span>.saveLoginState(loginResponse);

Â  Â Â <span class="hljs-comment">// æ›´æ–°å…¨å±€ç”¨æˆ·çŠ¶æ€</span>
Â  Â Â <span class="hljs-keyword">this</span>.userStore.setUser(loginResponse.user);
Â  Â Â <span class="hljs-keyword">this</span>.userStore.setLoggedIn(<span class="hljs-literal">true</span>);

Â  Â  hilog.info(DOMAIN,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'æ‰‹åŠ¨ç™»å½•æˆåŠŸ: %{public}s'</span>,
Â  Â  Â  loginResponse.user.nickname || loginResponse.user.username);

Â  Â Â <span class="hljs-keyword">return</span>Â loginResponse;

Â  }Â <span class="hljs-keyword">catch</span>Â (error) {
Â  Â Â <span class="hljs-keyword">const</span>Â err = errorÂ <span class="hljs-keyword">as</span>Â BusinessError;
Â  Â  hilog.error(DOMAIN,Â <span class="hljs-string">'AuthManager'</span>,Â <span class="hljs-string">'æ‰‹åŠ¨ç™»å½•å¤±è´¥: %{public}s'</span>,Â JSON.stringify(error));
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">null</span>;
Â  }
}
</code></pre>
<h3 data-id="heading-20">æ ¸å¿ƒäº®ç‚¹ä¸ä¼˜åŠ¿</h3>
<h4 data-id="heading-21">1. é›¶é…ç½®è·¯ç”±ç®¡ç†</h4>
<ul>
<li><strong>è‡ªåŠ¨ç”Ÿæˆè·¯ç”±</strong>ï¼šé€šè¿‡æ’ä»¶è‡ªåŠ¨æ‰«æç”Ÿæˆè·¯ç”±é…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤è·¯ç”±è¡¨</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šå‚æ•°ä¼ é€’å’Œè·å–è¿‡ç¨‹ä¸­æä¾›å®Œæ•´çš„ç±»å‹æ”¯æŒ</li>
<li><strong>å£°æ˜å¼é…ç½®</strong>ï¼šä½¿ç”¨è£…é¥°å™¨è¯­æ³•ï¼Œè®©è·¯ç”±é…ç½®æ›´åŠ ç®€æ´ç›´è§‚</li>
</ul>
<h4 data-id="heading-22">2. å¼ºå¤§çš„é¡µé¢ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4>
<ul>
<li><strong>å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸé’©å­</strong>ï¼šæ”¯æŒé¡µé¢åˆ›å»ºã€æ˜¾ç¤ºã€éšè—ã€é”€æ¯ç­‰å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>çµæ´»çš„äº‹ä»¶å¤„ç†</strong>ï¼šå†…ç½®å¤šç§äº‹ä»¶ç±»å‹ï¼Œä¾¿äºå¤„ç†å¤æ‚çš„é¡µé¢äº¤äº’é€»è¾‘</li>
<li><strong>è¿”å›é”®ç®¡ç†</strong>ï¼šæä¾›ç»Ÿä¸€çš„è¿”å›é”®å¤„ç†æœºåˆ¶</li>
</ul>
<h4 data-id="heading-23">3. æ™ºèƒ½å‚æ•°ä¼ é€’æœºåˆ¶</h4>
<ul>
<li><strong>ç±»å‹è½¬æ¢æ”¯æŒ</strong>ï¼šè‡ªåŠ¨å¤„ç†åŸºæœ¬ç±»å‹å’Œå¤æ‚å¯¹è±¡çš„åºåˆ—åŒ–/ååºåˆ—åŒ–</li>
<li><strong>å‚æ•°éªŒè¯</strong>ï¼šå†…ç½®å‚æ•°éªŒè¯æœºåˆ¶ï¼Œæé«˜åº”ç”¨ç¨³å®šæ€§</li>
<li><strong>çŠ¶æ€ç®¡ç†é›†æˆ</strong>ï¼šä¸é¸¿è’™çš„AppStorageV2ç­‰çŠ¶æ€ç®¡ç†æ–¹æ¡ˆå®Œç¾é›†æˆ</li>
</ul>
<h4 data-id="heading-24">4. ç”Ÿäº§çº§æ··æ·†é€‚é…</h4>
<ul>
<li><strong>æ··æ·†ä¿æŠ¤è§„åˆ™</strong>ï¼šæä¾›å®Œæ•´çš„æ··æ·†é…ç½®å»ºè®®</li>
<li><strong>æ–‡ä»¶åç§°ä¿æŠ¤</strong>ï¼šç¡®ä¿æ··æ·†åè·¯ç”±åç§°çš„æ­£ç¡®æ˜ å°„</li>
<li><strong>ç¼–è¯‘æ—¶ä¼˜åŒ–</strong>ï¼šæ”¯æŒç¼–è¯‘æ—¶çš„è·¯ç”±ä¼˜åŒ–å’Œå‹ç¼©</li>
</ul>
<h4 data-id="heading-25">5. æ— ç¼è®¤è¯é›†æˆ</h4>
<ul>
<li><strong>é™é»˜ç™»å½•ä½“éªŒ</strong>ï¼šåº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨å®Œæˆèº«ä»½éªŒè¯ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥</li>
<li><strong>æœ¬åœ°çŠ¶æ€æ¢å¤</strong>ï¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯ï¼Œæå‡å¯åŠ¨é€Ÿåº¦</li>
<li><strong>çµæ´»è®¤è¯ç­–ç•¥</strong>ï¼šæ”¯æŒé™é»˜ç™»å½•å’Œæ‰‹åŠ¨ç™»å½•çš„çµæ´»åˆ‡æ¢</li>
</ul>
<h3 data-id="heading-26">æ€§èƒ½ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-27">1. è·¯ç”±æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li><strong>æ‡’åŠ è½½æ”¯æŒ</strong>ï¼šzrouteræ”¯æŒé¡µé¢æ‡’åŠ è½½ï¼Œå‡å°‘åº”ç”¨å¯åŠ¨æ—¶é—´</li>
<li><strong>è·¯ç”±ç¼“å­˜</strong>ï¼šå†…ç½®è·¯ç”±çŠ¶æ€ç¼“å­˜ï¼Œæå‡é¡µé¢åˆ‡æ¢æ€§èƒ½</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šæ™ºèƒ½çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
</ul>
<h4 data-id="heading-28">2. å¼€å‘ä½“éªŒä¼˜åŒ–</h4>
<ul>
<li><strong>å¼€å‘æ—¥å¿—</strong>ï¼šå¼€å‘æ¨¡å¼ä¸‹æä¾›è¯¦ç»†çš„è·¯ç”±æ“ä½œæ—¥å¿—</li>
<li><strong>çƒ­æ›´æ–°æ”¯æŒ</strong>ï¼šæ”¯æŒå¼€å‘æ—¶çš„è·¯ç”±çƒ­æ›´æ–°</li>
<li><strong>è°ƒè¯•å·¥å…·</strong>ï¼šæä¾›ä¸°å¯Œçš„è°ƒè¯•å·¥å…·å’ŒçŠ¶æ€ç›‘æ§</li>
</ul>
<h4 data-id="heading-29">3. å…¼å®¹æ€§ä¿éšœ</h4>
<ul>
<li><strong>ç‰ˆæœ¬å…¼å®¹</strong>ï¼šæ”¯æŒä¸åŒç‰ˆæœ¬çš„HarmonyOSç³»ç»Ÿ</li>
<li><strong>APIé€‚é…</strong>ï¼šè‡ªåŠ¨é€‚é…ä¸åŒAPIç‰ˆæœ¬çš„åŠŸèƒ½å·®å¼‚</li>
<li><strong>å‘åå…¼å®¹</strong>ï¼šç¡®ä¿è€ç‰ˆæœ¬ä»£ç çš„å…¼å®¹æ€§é—®é¢˜</li>
</ul>
<h3 data-id="heading-30">æœ€ä½³å®è·µå»ºè®®</h3>
<h4 data-id="heading-31">1. è·¯ç”±å‘½åè§„èŒƒ</h4>
<ul>
<li>ä½¿ç”¨è¯­ä¹‰åŒ–çš„é¡µé¢åç§°</li>
<li>ç»Ÿä¸€å‘½åé£æ ¼ï¼ˆå¦‚é©¼å³°å‘½åæ³•ï¼‰</li>
<li>é¿å…ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦</li>
</ul>
<h4 data-id="heading-32">2. å‚æ•°è®¾è®¡åŸåˆ™</h4>
<ul>
<li>ä¼ é€’æœ€å°å¿…è¦ä¿¡æ¯</li>
<li>é¿å…ä¼ é€’è¿‡å¤§çš„å¯¹è±¡</li>
<li>åˆç†è®¾è®¡å‚æ•°ç»“æ„</li>
</ul>
<h4 data-id="heading-33">3. é¡µé¢ç”Ÿå‘½å‘¨æœŸç®¡ç†</h4>
<ul>
<li>åˆç†ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­</li>
<li>é¿å…åœ¨ç”Ÿå‘½å‘¨æœŸä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ</li>
<li>åŠæ—¶æ¸…ç†èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼</li>
</ul>
<h4 data-id="heading-34">4. å®‰å…¨è€ƒè™‘</h4>
<ul>
<li>å¯¹æ•æ„Ÿå‚æ•°è¿›è¡ŒåŠ å¯†å¤„ç†</li>
<li>éªŒè¯å‚æ•°çš„åˆæ³•æ€§</li>
<li>é¿å…åœ¨URLä¸­æš´éœ²æ•æ„Ÿä¿¡æ¯</li>
</ul>
<h3 data-id="heading-35">æ€»ç»“</h3>
<p>å‘³å¯»çºª-å…ƒæœåŠ¡é¡¹ç›®æˆåŠŸé›†æˆäº†zrouterè·¯ç”±ç®¡ç†æ–¹æ¡ˆï¼Œå¹¶å®ç°äº†å®Œå–„çš„é™é»˜ç™»å½•åŠŸèƒ½ã€‚é€šè¿‡zrouterçš„å¼ºå¤§åŠŸèƒ½ï¼Œé¡¹ç›®è·å¾—äº†ï¼š</p>
<ul>
<li><strong>ç»Ÿä¸€ä¸”å¼ºå¤§çš„è·¯ç”±ç®¡ç†</strong>ï¼šç®€åŒ–äº†é¡µé¢å¯¼èˆªé€»è¾‘ï¼Œæå‡äº†å¼€å‘æ•ˆç‡</li>
<li><strong>ç±»å‹å®‰å…¨çš„å‚æ•°ä¼ é€’</strong>ï¼šå‡å°‘äº†è¿è¡Œæ—¶é”™è¯¯ï¼Œæå‡äº†ä»£ç è´¨é‡</li>
<li><strong>å®Œæ•´çš„ç”Ÿæ´»å‘¨æœŸç®¡ç†</strong>ï¼šæä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</li>
<li><strong>ç”Ÿäº§çº§çš„æ··æ·†æ”¯æŒ</strong>ï¼šç¡®ä¿äº†åº”ç”¨çš„å®‰å…¨æ€§</li>
<li><strong>æ— ç¼çš„è®¤è¯ä½“éªŒ</strong>ï¼šé™é»˜ç™»å½•æå‡äº†ç”¨æˆ·ä½¿ç”¨ä½“éªŒ</li>
</ul>
<p>zrouterä½œä¸ºé¸¿è’™å®˜æ–¹æ¨èçš„è·¯ç”±è§£å†³æ–¹æ¡ˆï¼Œä¸ºHarmonyOS Nextåº”ç”¨å¼€å‘æä¾›äº†å¼ºå¤§è€Œç¨³å®šçš„è·¯ç”±ç®¡ç†èƒ½åŠ›ï¼Œæ˜¯æ„å»ºé«˜è´¨é‡é¸¿è’™åº”ç”¨çš„é‡è¦å·¥å…·ã€‚é€šè¿‡å‘³å¯»çºªé¡¹ç›®çš„å®è·µï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°zrouteråœ¨å®é™…é¡¹ç›®ä¸­çš„å¼ºå¤§åŠŸèƒ½å’Œè‰¯å¥½ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¨¡å‹é©±åŠ¨æ¶æ„çš„æ•°å­¦å†…æ ¸ï¼šç»Ÿä¸€ç”Ÿæˆä¸æ¼”åŒ–çš„ Y = F(X) âŠ• Delta ä¸å˜å¼]]></title>    <link>https://juejin.cn/post/7575017581036847142</link>    <guid>https://juejin.cn/post/7575017581036847142</guid>    <pubDate>2025-11-22T01:20:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575017581036847142" data-draft-id="7575006095389179913" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¨¡å‹é©±åŠ¨æ¶æ„çš„æ•°å­¦å†…æ ¸ï¼šç»Ÿä¸€ç”Ÿæˆä¸æ¼”åŒ–çš„ Y = F(X) âŠ• Delta ä¸å˜å¼"/> <meta itemprop="keywords" content="æ¶æ„,è®¾è®¡æ¨¡å¼,æ•°å­¦"/> <meta itemprop="datePublished" content="2025-11-22T01:20:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="canonical_entropy"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289694429"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¨¡å‹é©±åŠ¨æ¶æ„çš„æ•°å­¦å†…æ ¸ï¼šç»Ÿä¸€ç”Ÿæˆä¸æ¼”åŒ–çš„ Y = F(X) âŠ• Delta ä¸å˜å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289694429/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    canonical_entropy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T01:20:51.000Z" title="Sat Nov 22 2025 01:20:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ‘˜è¦ï¼š</strong> æ¨¡å‹é©±åŠ¨æ¶æ„ï¼ˆMDAï¼‰é€šè¿‡æå‡æŠ½è±¡å±‚æ¬¡ä¸è‡ªåŠ¨åŒ–æ¥åº”å¯¹è½¯ä»¶å¤æ‚æ€§ã€‚ç„¶è€Œï¼Œä¼ ç»ŸMDAåœ¨å®è·µä¸­é¢ä¸´â€œå¾€è¿”å·¥ç¨‹â€ä¸â€œèƒ–æ¨¡å‹â€ç­‰æŒ‘æˆ˜ï¼Œè¿™äº›é—®é¢˜çš„è§£å†³ä¸€èˆ¬ä¾èµ–äºå·¥ç¨‹ç»éªŒï¼Œç¼ºå°‘å®Œå¤‡çš„æ•°å­¦ç†è®ºçš„æŒ‡å¯¼ã€‚æœ¬æ–‡æ¢è®¨ä¸€ç§åŸºäºï¼ˆå¹¿ä¹‰ï¼‰å¯é€†è®¡ç®—ç†è®ºçš„æ¶æ„æ€æƒ³ï¼Œå®ƒå¼•å…¥â€œå·®é‡ï¼ˆDeltaï¼‰â€ä½œä¸ºå…·å¤‡ä»£æ•°å±æ€§çš„åŸºæœ¬æ„é€ å•å…ƒï¼Œå¹¶æå‡º<code>Y = F(X) âŠ• Delta</code>è¿™ä¸€æ„é€ ä¸å˜å¼ã€‚è¯¥æ¡†æ¶æ—¨åœ¨ç»Ÿä¸€è½¯ä»¶çš„ç”Ÿæˆä¸æ¼”åŒ–è¿‡ç¨‹ï¼Œä¸ºè§£å†³ä¼ ç»ŸMDAçš„å›ºæœ‰é—®é¢˜æä¾›ä¸€ç§æ–°çš„èŒƒå¼ï¼Œå¹¶æ­ç¤ºè½¯ä»¶æ„é€ è¿‡ç¨‹èƒŒåæ½œåœ¨çš„æ•°å­¦ç»“æ„ã€‚</p>
<h4 data-id="heading-0"><strong>1. æ¨¡å‹é©±åŠ¨æ¶æ„ï¼ˆMDAï¼‰çš„è´¡çŒ®ä¸å±€é™</strong></h4>
<p>æ¨¡å‹é©±åŠ¨æ¶æ„çš„æ ¸å¿ƒæ˜¯å°†æ¨¡å‹ä½œä¸ºè½¯ä»¶å¼€å‘è¿‡ç¨‹çš„é¦–è¦äº§ç‰©ã€‚å…¶ç»å…¸çš„æµç¨‹â€”â€”ä»è®¡ç®—æ— å…³æ¨¡å‹ï¼ˆCIMï¼‰åˆ°å¹³å°æ— å…³æ¨¡å‹ï¼ˆPIMï¼‰ï¼Œå†åˆ°å¹³å°ç›¸å…³æ¨¡å‹ï¼ˆPSMï¼‰ï¼Œæœ€åç”Ÿæˆä»£ç ã€‚</p>
<p>æ¨¡å‹é©±åŠ¨çš„æ ¸å¿ƒæ€æƒ³å¯ä»¥çœ‹ä½œæ˜¯æ ¹æ®æ¨¡å‹ç”Ÿæˆä»£ç ï¼Œå½¢å¼åŒ–è¡¨è¾¾ä¸º <code>Model =&gt; Code</code>, æ›´è¿›ä¸€æ­¥å¯ä»¥å†™æˆ</p>
<pre><code class="hljs language-ini" lang="ini"> <span class="hljs-attr">Code</span> = Generator(Model)
</code></pre>
<p>ç°å®ä¸­ï¼Œæ‰‹åŠ¨è°ƒæ•´å‡ ä¹ä¸å¯é¿å…ï¼Œå¯¼è‡´æœ€ç»ˆçš„åº”ç”¨å½¢æ€å˜ä¸ºï¼š</p>
<p><code>App = Generator(Model) + ManualAdjustment</code></p>
<p>ä½†æ˜¯è¿™é‡Œçš„ <code>+ManualAdjustment</code>ä¸€èˆ¬æ˜¯ä¸€ç§äººå·¥ä»‹å…¥çš„æ“ä½œè¿‡ç¨‹ï¼Œæ¯”å¦‚æ‰‹å·¥å¯¹ç”Ÿæˆä»£ç ä¿®æ”¹ï¼Œéš¾ä»¥é€šè¿‡è§„åˆ™è‡ªåŠ¨åŒ–å®Œæˆã€‚è¿™ç§è¡Œä¸ºç ´åäº†æ¨¡å‹ä½œä¸ºâ€œå”¯ä¸€çœŸç›¸æ¥æºâ€çš„åŸåˆ™ï¼Œå¯¼è‡´æ¨¡å‹ä¸ä»£ç çš„çŠ¶æ€ä¸ä¸€è‡´ã€‚</p>
<h4 data-id="heading-1"><strong>2. æ„é€ å•å…ƒçš„é‡å®šä¹‰ï¼šä»¥â€œå·®é‡ï¼ˆDeltaï¼‰â€ä¸ºæ ¸å¿ƒ</strong></h4>
<p><strong>ï¼ˆå¹¿ä¹‰ï¼‰å¯é€†è®¡ç®—ç†è®º</strong>æä¾›äº†ä¸€ç§æ–°çš„ç†è®ºè§†è§’ï¼Œå®ƒå»ºè®®å¯¹è½¯ä»¶çš„åŸºæœ¬æ„é€ å•å…ƒè¿›è¡Œé‡æ–°å®šä¹‰ã€‚</p>
<ul>
<li><strong>ä¼ ç»Ÿè§†è§’</strong>ï¼šç¨‹åºç”±æ•°æ®å’Œå‡½æ•°æ„æˆã€‚åœ¨é¢å‘å¯¹è±¡èŒƒå¼ä¸­ï¼Œå®ƒä»¬è¢«ç»„ç»‡ä¸ºç±»ä¸å¯¹è±¡ï¼Œå³â€œä¸€åˆ‡çš†å¯¹è±¡â€ã€‚</li>
<li><strong>æ–°è§†è§’</strong>ï¼šè½¯ä»¶çš„åŸºæœ¬æ„é€ å•å…ƒæ˜¯**â€œå·®é‡ï¼ˆDeltaï¼‰â€<strong>ã€‚ä¸€ä¸ª<code>Delta</code>æ˜¯åŒ…å«ç²¾ç¡®å¢ã€åˆ ã€æ”¹è¯­ä¹‰çš„å˜æ›´åˆ‡ç‰‡ï¼ˆSliceï¼‰çš„é›†åˆï¼Œä¾‹å¦‚ç±»çš„åˆ‡ç‰‡ã€å‡½æ•°çš„åˆ‡ç‰‡æˆ–æ•°æ®çš„åˆ‡ç‰‡ã€‚è€ƒè™‘åˆ°A=0+Aï¼Œåœ¨æ­¤æ¡†æ¶ä¸‹ï¼Œä¸€ä¸ªå®Œæ•´çš„ç¨‹åºæˆ–æ¨¡å‹ï¼ˆå…¨é‡ï¼‰å¯è¢«è§†ä¸ºä¸€ä¸ªâ€œä»æ— åˆ°æœ‰â€çš„ç‰¹æ®Š<code>Delta</code>ã€‚å› æ­¤ï¼Œå…¶æ ¸å¿ƒä¸»å¼ æ˜¯</strong>â€œä¸€åˆ‡çš†å·®é‡â€**ã€‚</li>
</ul>
<p>è¿™ä¸€è§†è§’çš„è½¬å˜ï¼Œæ„åœ¨å°†è½¯ä»¶çš„â€œåˆå§‹æ„é€ â€å’Œâ€œåç»­æ¼”åŒ–â€ä¸¤ä¸ªè¿‡ç¨‹ç»Ÿä¸€åœ¨åŒä¸€ä¸ªæ¦‚å¿µä¹‹ä¸‹ã€‚è¿™ä¸ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆå¦‚Gitçš„Commitï¼‰æˆ–äº‹ä»¶æº¯æºï¼ˆEvent Sourcingï¼‰çš„æ€æƒ³å­˜åœ¨å…³è”ï¼Œä½†å…¶åº”ç”¨ç›®æ ‡æ˜¯ç¨‹åºçš„<strong>ç»“æ„æœ¬èº«</strong>ï¼Œè€Œéæ–‡æœ¬æˆ–è¿è¡Œæ—¶çŠ¶æ€ã€‚</p>
<h4 data-id="heading-2"><strong>3. Deltaå¯¼å‘æ¶æ„ï¼šåŸºäºå·®é‡ä»£æ•°çš„ä¸å˜å¼</strong></h4>
<p>åŸºäºâ€œä¸€åˆ‡çš†å·®é‡â€çš„å…¬ç†ï¼Œä¼ ç»ŸMDAçš„æ„é€ å…¬å¼å¯è¢«ä¸€ä¸ªæ›´é€šç”¨çš„å…¬å¼æ‰€å–ä»£ï¼š</p>
<p><code>Y = F(X) âŠ• Delta</code></p>
<p>è¯¥å…¬å¼å¯è¢«è§†ä¸ºDeltaå¯¼å‘æ¶æ„çš„<strong>åŸºæœ¬ä¸å˜å¼</strong>ï¼Œå…¶ä¸­ï¼š</p>
<ul>
<li><code>X</code> å’Œ <code>Y</code> æ˜¯ä¸åŒæŠ½è±¡å±‚æ¬¡æˆ–ä¸åŒé¢†åŸŸçš„æ¨¡å‹ï¼Œå®ƒä»¬é€šå¸¸ä»¥é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰çš„å½¢å¼å­˜åœ¨ã€‚</li>
<li><code>F</code> æ˜¯ä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼ˆGeneratorï¼‰ï¼Œå®šä¹‰äº†ä»<code>X</code>åˆ°<code>Y</code>ä¸»è¦éƒ¨åˆ†çš„æ¨å¯¼è§„åˆ™ã€‚</li>
<li><code>Delta</code> æ˜¯ä¸€ä¸ªå½¢å¼åŒ–çš„å·®é‡å¯¹è±¡ï¼Œå°è£…äº†æ‰€æœ‰<code>F(X)</code>æœªèƒ½è¦†ç›–çš„ã€åœ¨<code>Y</code>ç©ºé—´ä¸­å¿…é¡»è¡¥å……æˆ–ä¿®æ­£çš„ç»†èŠ‚ã€‚</li>
<li><code>âŠ•</code> æ˜¯ä¸€ä¸ªæœ‰æ˜ç¡®å®šä¹‰çš„<strong>å·®é‡åˆå¹¶è¿ç®—</strong>ã€‚å®ƒå–ä»£äº†åŸå…ˆæ¨¡ç³Šçš„ <code>+</code>ï¼Œä½¿å¾—â€œæ‰‹åŠ¨è°ƒæ•´â€è¿‡ç¨‹æœ¬èº«æˆä¸ºå¯è¿½è¸ªã€å¯ç»„åˆã€ç”šè‡³å…·å¤‡å¯é€†æ€§çš„æ“ä½œã€‚</li>
</ul>
<p>ä¸ºå®ç°æ­¤æ¡†æ¶ï¼Œéœ€è¦åœ¨ä¸åŒçš„ç¨‹åºç»“æ„ç©ºé—´ä¸­å®šä¹‰ç›¸åº”çš„<code>âŠ•</code>è¿ç®—è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ ‘çŠ¶ç»“æ„çš„XMLæˆ–JSONï¼Œå¯å®šä¹‰ä¸€ç§<code>x-extends</code>çš„å·®é‡åˆå¹¶ç®—æ³•ï¼Œæ»¡è¶³ç»“åˆå¾‹ä½†ä¸æ»¡è¶³äº¤æ¢å¾‹ï¼›å¯¹äºå…·æœ‰å¤æ‚ä¾èµ–å›¾çš„Javaè¯­è¨€ç»“æ„ï¼Œåˆ™å¯ä»¥é€šè¿‡å¼•ç”¨idå°†å¾ªç¯å…³è”æ–­å¼€ï¼Œå°†å›¾æŠ•å½±ä¸ºæ ‘ç»“æ„ã€‚</p>
<h4 data-id="heading-3"><strong>4. é€’å½’åˆ†è§£ï¼šåº”å¯¹å¤æ‚æ€§ä¸â€œèƒ–æ¨¡å‹â€é—®é¢˜</strong></h4>
<p><code>Y = F(X) âŠ• Delta</code>è¿™ä¸€ä¸å˜å¼çš„ä¸€ä¸ªå…³é”®ç‰¹æ€§åœ¨äºå…¶<strong>é€’å½’åº”ç”¨</strong>çš„èƒ½åŠ›ï¼Œè¿™ä¸ºå¤„ç†å¤æ‚ç³»ç»Ÿå’ŒMDAçš„â€œèƒ–æ¨¡å‹â€é—®é¢˜æä¾›äº†ä¸€ç§ç»“æ„åŒ–çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>4.1 çºµå‘åˆ†è§£</strong></p>
<p>ä¼ ç»ŸMDAè¦æ±‚ä¸Šæ¸¸æ¨¡å‹ï¼ˆPIMï¼‰åŒ…å«ç”Ÿæˆä¸‹æ¸¸æ‰€æœ‰äº§ç‰©æ‰€éœ€çš„ä¿¡æ¯ï¼Œå¯èƒ½å¯¼è‡´PIMè¿‡åº¦å¤æ‚ã€‚Deltaå¯¼å‘æ¶æ„å…è®¸ä¿¡æ¯åœ¨è½¬æ¢é“¾ä¸­é€æ­¥æ³¨å…¥ï¼š</p>
<p><code>Y = F1(X) âŠ• Delta1</code>
<code>X = F2(Z) âŠ• Delta2</code></p>
<p>ä»£å…¥åå¾—åˆ°ï¼š<code>Y = F1(F2(Z) âŠ• Delta2) âŠ• Delta1</code></p>
<p>æ­¤å…¬å¼è¡¨æ˜ï¼Œåœ¨ä»<code>Z</code>ç”Ÿæˆ<code>X</code>æ—¶ï¼Œ<code>Z</code>æ¨¡å‹æœ¬èº«æ— éœ€æ‰¿è½½æ‰€æœ‰çš„æœ€ç»ˆç»†èŠ‚ã€‚<code>X</code>å±‚é¢çš„ä¿¡æ¯å¯ä»¥é€šè¿‡<code>Delta2</code>è¡¥å……ï¼Œè€Œæœ€ç»ˆ<code>Y</code>å±‚é¢çš„ä¿¡æ¯åˆ™å¯é€šè¿‡<code>Delta1</code>å†æ¬¡è¡¥å……ã€‚æ¯ä¸€å±‚çš„<code>Delta</code>ä»…åŒ…å«å…¶å¯¹åº”æŠ½è±¡å±‚æ¬¡æ‰€å…³å¿ƒçš„ä¿¡æ¯ï¼Œæœ‰åŠ©äºé™ä½å•ä¸€æ¨¡å‹çš„å¤æ‚æ€§ã€‚</p>
<p><strong>4.2 æ¨ªå‘åˆ†è§£</strong></p>
<p>ç°ä»£åº”ç”¨é€šå¸¸æ˜¯å¤šä¸ªå…³æ³¨ç‚¹çš„ç»„åˆã€‚è¯¥æ¡†æ¶åŒæ ·æ”¯æŒæ¨ªå‘åˆ†è§£ï¼š</p>
<p><code>App = F1(DSL1) âŠ• F2(DSL2) âŠ• ... âŠ• Delta_extra</code></p>
<p>è¿™æè¿°äº†åº”ç”¨çš„æœ€ç»ˆå½¢æ€å¯ç”±å¤šä¸ªä¸åŒé¢†åŸŸæ¨¡å‹ï¼ˆå¦‚APIæ¨¡å‹ã€æ•°æ®æ¨¡å‹ã€UIæ¨¡å‹ï¼‰çš„ç”Ÿæˆç»“æœï¼Œä¸ä¸€ä¸ªç”¨äºç²˜åˆå’Œå®šåˆ¶çš„é¢å¤–å·®é‡<code>Delta_extra</code>ç»„åˆè€Œæˆã€‚</p>
<p><strong>4.3 å…ƒç¼–ç¨‹ç©ºé—´çš„åˆ†è§£</strong></p>
<p>è¯¥ç†è®ºçš„æ™®é€‚æ€§ä½“ç°åœ¨å®ƒåŒæ ·é€‚ç”¨äºæ„é€ è¿‡ç¨‹æœ¬èº«ã€‚ä¸ä»…æ¨¡å‹å’Œå·®é‡å¯ä»¥è¢«åˆ†è§£ï¼Œç”Ÿæˆå™¨è‡ªèº«ä¹Ÿå¯ä»¥è¢«è§†ä¸ºå·®é‡ç»„åˆçš„ç»“æœï¼š</p>
<p><code>Generator2 = Generator1 âŠ• Delta_Generator</code></p>
<p>è¿™æ„å‘³ç€ä¸€ä¸ªé€šç”¨çš„ä»£ç ç”Ÿæˆå™¨å¯ä»¥é€šè¿‡ä¸ä¸€ä¸ªç‰¹å®šçš„â€œç‰¹æ€§å·®é‡åŒ…â€è¿›è¡Œåˆå¹¶ï¼Œæ¼”åŒ–ä¸ºä¸€ä¸ªä¸“ç”¨çš„ç”Ÿæˆå™¨ã€‚è¿™ä¸ºå…ƒç¼–ç¨‹å·¥å…·çš„å¤ç”¨å’Œæ¼”è¿›æä¾›äº†ç†è®ºä¸Šçš„å¯èƒ½æ€§ã€‚</p>
<h3 data-id="heading-4"><strong>5. å…ƒæ¨¡å‹ã€å·®é‡ä¸ç”Ÿæˆå¼æ„é€ </strong></h3>
<p>æœ¬æ–‡æå‡ºçš„æ•°å­¦æ¡†æ¶ï¼Œåœ¨å…ƒæ¨¡å‹ï¼ˆMetamodelï¼‰å±‚é¢åŒæ ·é€‚ç”¨ï¼Œå¹¶èƒ½ä¸ç°ä»£AIæŠ€æœ¯æ— ç¼ç»“åˆã€‚</p>
<p><strong>5.1 å…ƒæ¨¡å‹å³ç±»å‹</strong></p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†å…ƒæ¨¡å‹ä¸æ¨¡å‹çš„å…³ç³»å½¢å¼åŒ–ã€‚ä¸€ä¸ªå…ƒæ¨¡å‹ï¼ˆMMï¼‰å¯ä»¥è¢«çœ‹ä½œä¸€ä¸ª<strong>ç±»å‹ç³»ç»Ÿ</strong>ï¼Œè€Œæ¨¡å‹ï¼ˆMï¼‰åˆ™æ˜¯è¯¥ç±»å‹ç³»ç»Ÿçš„ä¸€ä¸ª<strong>å®ä¾‹ï¼ˆå€¼ï¼‰</strong>ã€‚è¿™ç§å…³ç³»ç”¨ç±»å‹è®ºä¸­çš„æ–­è¨€ï¼ˆTyping Judgmentï¼‰è¡¨ç¤ºï¼š</p>
<p><code>M : MM</code></p>
<p>è¯¥å…¬å¼è¯»ä½œï¼šâ€œæ¨¡å‹<code>M</code>æ˜¯å…ƒæ¨¡å‹<code>MM</code>çš„ä¸€ä¸ªæœ‰æ•ˆå®ä¾‹â€ã€‚è¿™ä¸ç¼–ç¨‹è¯­è¨€ä¸­çš„<code>5 : Integer</code>å®Œå…¨ç­‰ä»·ã€‚åœ¨MDAä¸­ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ª<code>UserClass</code>æ¨¡å‹å¿…é¡»éµå¾ª<code>UML_Class</code>å…ƒæ¨¡å‹å®šä¹‰çš„è§„åˆ™ã€‚</p>
<p><strong>5.2 AIé©±åŠ¨çš„ç”Ÿæˆå¼æ„é€ </strong></p>
<p>ä¼ ç»Ÿä¸Šï¼Œ<code>M : MM</code>ä¸»è¦ç”¨äº<strong>éªŒè¯</strong>ã€‚ä½†åœ¨AIï¼ˆç‰¹åˆ«æ˜¯LLMï¼‰æ—¶ä»£ï¼Œå…ƒæ¨¡å‹çš„è§’è‰²ä»â€œäº‹åéªŒè¯è€…â€è½¬å˜ä¸ºâ€œäº‹å‰æŒ‡å¯¼è€…â€ã€‚æˆ‘ä»¬å¯ä»¥å°†æ¨¡å‹çš„ç”Ÿæˆè¿‡ç¨‹å½¢å¼åŒ–ä¸ºï¼š</p>
<p><code>Model = AIGenerator(Metamodel, Requirements)</code></p>
<ul>
<li><code>Metamodel</code>åœ¨æ­¤ä½œä¸º<strong>ç»“æ„åŒ–çº¦æŸ</strong>è¾“å…¥ï¼Œä¸ºAIçš„è‡ªç”±åˆ›é€ åˆ’å®šäº†è¯­æ³•è¾¹ç•Œå’Œç»“æ„éª¨æ¶ï¼Œç¡®ä¿è¾“å‡ºçš„<code>Model</code>å¿…ç„¶æ»¡è¶³<code>Model : Metamodel</code>ã€‚</li>
<li><code>Requirements</code>åˆ™æ˜¯ä»¥è‡ªç„¶è¯­è¨€ç­‰å½¢å¼æä¾›çš„<strong>è¯­ä¹‰æ„å›¾</strong>ï¼ŒæŒ‡å¯¼AIåœ¨åˆæ³•çš„ç»“æ„ç©ºé—´å†…ç”Ÿæˆå…·ä½“å†…å®¹ã€‚</li>
</ul>
<p><strong>5.3 å…ƒæ¨¡å‹çš„å·®é‡æ¼”åŒ–</strong></p>
<p>æœ¬æ–‡ç†è®ºæœ€å…³é”®çš„è‡ªç›¸ä¼¼æ€§ä½“ç°åœ¨ï¼Œå·®é‡åˆ†è§£åŒæ ·é€‚ç”¨äºå…ƒæ¨¡å‹æœ¬èº«ï¼š</p>
<p><code>Metamodel' = Metamodel âŠ• Delta_Metamodel</code></p>
<p>è¿™ä¸ªå…¬å¼æ„å‘³ç€<strong>è¯­è¨€æœ¬èº«ä¹Ÿå¯ä»¥é€šè¿‡å·®é‡è¿›è¡Œæ¼”åŒ–</strong>ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ª<code>Delta_Metamodel</code>ä¸ºä¸€é—¨DSLï¼ˆç”±<code>Metamodel</code>å®šä¹‰ï¼‰éä¾µå…¥å¼åœ°å¢åŠ åŸè¯­è¨€è®¾è®¡è€…è®¾æƒ³ä¹‹å¤–çš„æ–°ç‰¹æ€§ã€‚è¿™ä¸ºé¢†åŸŸè¯­è¨€çš„å—æ§æ¼”åŒ–å’Œèƒ½åŠ›å‡çº§æä¾›äº†å¼ºå¤§çš„å½¢å¼åŒ–å·¥å…·ï¼Œä½“ç°äº†è¯¥ç†è®ºåœ¨ä¸åŒæŠ½è±¡å±‚æ¬¡ä¸Šçš„ä¸€è‡´æ€§å’Œæ™®é€‚æ€§ã€‚</p>
<h2 data-id="heading-5">ç»“è®º</h2>
<p>Deltaå¯¼å‘æ¶æ„çš„æ•°å­¦ç»“æ„ç±»ä¼¼äºæ•°å­¦ä¸­çš„<strong>å°æ³¢åˆ†æ</strong>ã€‚åœ¨å°æ³¢åˆ†æä¸­ï¼Œä¸€ä¸ªä¿¡å·è¢«åˆ†è§£ä¸ºä¸€ä¸ªä½é¢‘çš„**è¿‘ä¼¼ï¼ˆApproximationï¼‰<strong>éƒ¨åˆ†å’Œä¸€ä¸ªé«˜é¢‘çš„</strong>ç»†èŠ‚ï¼ˆDetailï¼‰**éƒ¨åˆ†ï¼Œä¸”æ­¤åˆ†è§£è¿‡ç¨‹å¯é€’å½’è¿›è¡Œã€‚</p>
<p>ä¸ä¹‹å¯¹åº”ï¼Œ<code>Y = F(X) âŠ• Delta</code>ä¸­çš„<code>F(X)</code>å¯è¢«çœ‹ä½œæ˜¯ç”±ä¸Šæ¸¸æ¨¡å‹ç”Ÿæˆçš„ã€æ¡†æ¶æ€§çš„â€œè¿‘ä¼¼â€éƒ¨åˆ†ï¼Œè€Œ<code>Delta</code>åˆ™æ˜¯è¡¥å……çš„ã€å…·ä½“çš„â€œç»†èŠ‚â€éƒ¨åˆ†ã€‚å…¶é€’å½’åˆ†è§£çš„ç‰¹æ€§ï¼Œä¹Ÿä¸å°æ³¢åˆ†æçš„å¤šåˆ†è¾¨ç‡åˆ†æèƒ½åŠ›ç›¸ä¼¼ã€‚</p>
<p>å°†â€œå·®é‡ï¼ˆDeltaï¼‰â€åŠå…¶ä»£æ•°è¿ç®—<code>âŠ•</code>ç½®äºè½¯ä»¶æ„é€ çš„æ ¸å¿ƒï¼Œä¸ºæ¨¡å‹é©±åŠ¨æ¶æ„çš„å‘å±•æä¾›äº†ä¸€ä¸ªåŸºäºå½¢å¼åŒ–æ–¹æ³•çš„æ¼”è¿›æ–¹å‘ã€‚å®ƒè¯•å›¾å°†è½¯ä»¶å¼€å‘ä»ä¸€ç§ä¾èµ–äººå·¥åè°ƒçš„æ´»åŠ¨ï¼Œè½¬å˜ä¸ºä¸€ç§åŸºäºå½¢å¼åŒ–æ¨å¯¼å’Œç»“æ„åŒ–å·®é‡åˆæˆçš„ç³»ç»Ÿå·¥ç¨‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot å®æˆ˜ï¼šåŸºäº JWT ä¼˜åŒ– Spring Security æ— çŠ¶æ€ç™»å½•]]></title>    <link>https://juejin.cn/post/7574997924929978408</link>    <guid>https://juejin.cn/post/7574997924929978408</guid>    <pubDate>2025-11-21T13:01:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574997924929978408" data-draft-id="7574978545144610851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot å®æˆ˜ï¼šåŸºäº JWT ä¼˜åŒ– Spring Security æ— çŠ¶æ€ç™»å½•"/> <meta itemprop="keywords" content="åç«¯,Spring Boot"/> <meta itemprop="datePublished" content="2025-11-21T13:01:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Webå¤©æ¢¯ä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/2825061103052843"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot å®æˆ˜ï¼šåŸºäº JWT ä¼˜åŒ– Spring Security æ— çŠ¶æ€ç™»å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2825061103052843/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Webå¤©æ¢¯ä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T13:01:49.000Z" title="Fri Nov 21 2025 13:01:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring Boot å®æˆ˜ï¼šåŸºäº JWT ä¼˜åŒ– Spring Security æ— çŠ¶æ€ç™»å½•</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ Spring Security å®ç°äº†åŸºç¡€çš„æ¥å£æƒé™æ§åˆ¶ï¼Œä½†é‡‡ç”¨çš„ HTTP Basic ç™»å½•å­˜åœ¨æ˜æ˜¾ç¼ºé™·ï¼š<strong>å®‰å…¨æ€§</strong>ï¼Œç”¨æˆ·åå’Œå¯†ç åªæ˜¯ç®€å•çš„é€šè¿‡ Base64 ç¼–ç ä¹‹åå°±å¼€å§‹ä¼ é€äº†ï¼Œå¾ˆå®¹æ˜“è¢«ç ´è§£ï¼Œè¿›è€Œæš´éœ²ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<p>æœ¬æ–‡å°†å¼•å…¥ <strong>JWTï¼ˆJSON Web Tokenï¼‰</strong> æŠ€æœ¯ï¼Œé‡æ„ç™»å½•æµç¨‹ï¼Œè®©æ¥å£å³å®‰å…¨åˆè´´åˆä¼ä¸šçº§é¡¹ç›®éœ€æ±‚ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆææ‡‚ï¼šä¸ºä»€ä¹ˆéœ€è¦ JWTï¼Ÿ</h3>
<p>Jwtçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ <strong>æ— çŠ¶æ€</strong>ï¼š</p>
<ol>
<li>ç™»å½•æˆåŠŸåï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªåŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œæƒé™çš„åŠ å¯† Tokenï¼Œç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ï¼›</li>
<li>å®¢æˆ·ç«¯åç»­è¯·æ±‚æ—¶ï¼Œåªéœ€åœ¨è¯·æ±‚å¤´æºå¸¦ Tokenï¼ŒæœåŠ¡å™¨æ— éœ€å­˜å‚¨ä»»ä½•çŠ¶æ€ï¼Œç›´æ¥é€šè¿‡ Token éªŒè¯èº«ä»½å’Œæƒé™ï¼›</li>
<li>å¤šå°æœåŠ¡å™¨å…±ç”¨ä¸€å¥— Token éªŒè¯é€»è¾‘ï¼Œæ— éœ€åŒæ­¥çŠ¶æ€ï¼Œå®Œç¾é€‚é…åˆ†å¸ƒå¼éƒ¨ç½²ã€‚</li>
</ol>
<h3 data-id="heading-2">äºŒã€å‡†å¤‡å·¥ä½œï¼šæ·»åŠ  JWT ä¾èµ–</h3>
<p>åœ¨ <code>pom.xml</code> çš„ <code>&lt;dependencies&gt;</code> æ ‡ç­¾ä¸­ï¼Œæ–°å¢ JWT ç›¸å…³ä¾èµ–ï¼ˆåŸºäº JJWT æ¡†æ¶ï¼ŒSpring å®˜æ–¹æ¨èï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">        <span class="hljs-comment">&lt;!-- JWT æ ¸å¿ƒä¾èµ–ï¼ˆJJWTï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- JWT å®ç°ä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-impl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- JWT åŠ å¯†ç®—æ³•ä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-jackson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>æ·»åŠ åç‚¹å‡» IDEA å³ä¸Šè§’çš„ â€œLoad Maven Changesâ€ åˆ·æ–°ä¾èµ–ï¼Œç¡®ä¿æ— çº¢è‰²æŠ¥é”™ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€ç¬¬ä¸€æ­¥ï¼šå®ç° JWT å·¥å…·ç±»ï¼ˆæ ¸å¿ƒï¼‰</h3>
<p>JWT çš„æ ¸å¿ƒæ“ä½œåŒ…æ‹¬ <strong>ç”Ÿæˆ Token</strong>ã€<strong>éªŒè¯ Token</strong>ã€<strong>è§£æ Token ä¸­çš„ç”¨æˆ·ä¿¡æ¯</strong>ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå·¥å…·ç±»å°è£…è¿™äº›é€»è¾‘ï¼Œæ–¹ä¾¿åç»­è°ƒç”¨ã€‚</p>
<p>åœ¨ <code>com.example.firstspringbootproject.utils</code> åŒ…ä¸‹åˆ›å»º <code>JwtUtil</code> ç±»ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>.<span class="hljs-property">firstspringbootproject</span>.<span class="hljs-property">utils</span>;

<span class="hljs-keyword">import</span> io.<span class="hljs-property">jsonwebtoken</span>.*;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">beans</span>.<span class="hljs-property">factory</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Value</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">security</span>.<span class="hljs-property">core</span>.<span class="hljs-property">userdetails</span>.<span class="hljs-property">UserDetails</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Component</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Date</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">HashMap</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">List</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">Map</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">function</span>.<span class="hljs-property">Function</span>;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtUtil</span> {

    <span class="hljs-comment">// 1. ä»é…ç½®æ–‡ä»¶è¯»å– JWT å…³é”®å‚æ•°ï¼ˆé¿å…ç¡¬ç¼–ç ï¼‰</span>
    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"${jwt.secret}"</span>) <span class="hljs-comment">// å¯†é’¥ï¼ˆå¿…é¡»ä¿å¯†ï¼Œå»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒç”¨ç¯å¢ƒå˜é‡é…ç½®ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> secret;

    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"${jwt.expiration}"</span>) <span class="hljs-comment">// Token è¿‡æœŸæ—¶é—´ï¼ˆå•ä½ï¼šæ¯«ç§’ï¼Œè¿™é‡Œé…ç½® 2 å°æ—¶ï¼‰</span>
    <span class="hljs-keyword">private</span> long expiration;

    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"${jwt.header}"</span>) <span class="hljs-comment">// è¯·æ±‚å¤´ä¸­æºå¸¦ Token çš„å­—æ®µåï¼ˆå¦‚ Authorizationï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> tokenHeader;

    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"${jwt.prefix}"</span>) <span class="hljs-comment">// Token å‰ç¼€ï¼ˆå¦‚ Bearerï¼Œè§„èŒƒè¦æ±‚åŠ ç©ºæ ¼ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> tokenPrefix;

    <span class="hljs-comment">// 2. ç”Ÿæˆ Tokenï¼šåŸºäºç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨æˆ·åã€è§’è‰²ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">generateToken</span>(<span class="hljs-params">UserDetails userDetails</span>) {

        <span class="hljs-comment">// å­˜å‚¨ Token ä¸­çš„è‡ªå®šä¹‰ä¿¡æ¯ï¼ˆPayloadï¼‰</span>
        <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; claims = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-comment">// å°†ç”¨æˆ·è§’è‰²å­˜å…¥ Tokenï¼ˆåç»­éªŒè¯æƒé™ç”¨ï¼‰</span>
        claims.<span class="hljs-title function_">put</span>(<span class="hljs-string">"roles"</span>, userDetails.<span class="hljs-title function_">getAuthorities</span>().<span class="hljs-title function_">stream</span>()
                .<span class="hljs-title function_">map</span>(authority -&gt; authority.<span class="hljs-title function_">getAuthority</span>())
                .<span class="hljs-title function_">toList</span>());

        <span class="hljs-comment">// æ„å»º Token å¹¶è¿”å›</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Jwts</span>.<span class="hljs-title function_">builder</span>()
                .<span class="hljs-title function_">setClaims</span>(claims) <span class="hljs-comment">// è‡ªå®šä¹‰ä¿¡æ¯</span>
                .<span class="hljs-title function_">setSubject</span>(userDetails.<span class="hljs-title function_">getUsername</span>()) <span class="hljs-comment">// ç”¨æˆ·åï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰</span>
                .<span class="hljs-title function_">setIssuedAt</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()) <span class="hljs-comment">// ç­¾å‘æ—¶é—´</span>
                .<span class="hljs-title function_">setExpiration</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">System</span>.<span class="hljs-title function_">currentTimeMillis</span>() + expiration)) <span class="hljs-comment">// è¿‡æœŸæ—¶é—´</span>
                .<span class="hljs-title function_">signWith</span>(<span class="hljs-title class_">SignatureAlgorithm</span>.<span class="hljs-property">HS512</span>, secret) <span class="hljs-comment">// åŠ å¯†ç®—æ³•ï¼ˆHS512ï¼‰+ å¯†é’¥</span>
                .<span class="hljs-title function_">compact</span>();
    }

    <span class="hljs-comment">// 3. ä» Token ä¸­è·å–ç”¨æˆ·å</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getUsernameFromToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">getClaimFromToken</span>(token, <span class="hljs-title class_">Claims</span>::getSubject);
    }

    <span class="hljs-comment">// 4. éªŒè¯ Token æ˜¯å¦æœ‰æ•ˆï¼ˆæœªè¿‡æœŸ + ç”¨æˆ·ååŒ¹é…ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">validateToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token, UserDetails userDetails</span>) {
        <span class="hljs-title class_">String</span> username = <span class="hljs-title function_">getUsernameFromToken</span>(token);

        <span class="hljs-comment">// éªŒè¯é€»è¾‘ï¼šç”¨æˆ·åä¸€è‡´ + Token æœªè¿‡æœŸ + Token æœªè¢«ç¯¡æ”¹</span>
        <span class="hljs-keyword">return</span> username.<span class="hljs-title function_">equals</span>(userDetails.<span class="hljs-title function_">getUsername</span>())
                &amp;&amp; !<span class="hljs-title function_">isTokenExpired</span>(token);

    }

    <span class="hljs-comment">// 5. ä» Token ä¸­è·å–è‡ªå®šä¹‰è§’è‰²ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getRoleFromToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token</span>) {

        <span class="hljs-title class_">Claims</span> claims = <span class="hljs-title function_">getAllClaimsFromToken</span>(token);
        <span class="hljs-comment">// ä»è‡ªå®šä¹‰ä¿¡æ¯ä¸­è·å–è§’è‰²åˆ—è¡¨ï¼ˆè¿™é‡Œç®€åŒ–ä¸ºå•ä¸ªè§’è‰²ï¼Œå¤šè§’è‰²å¯è¿”å› Listï¼‰</span>
        <span class="hljs-keyword">return</span> ((<span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt;) claims.<span class="hljs-title function_">get</span>(<span class="hljs-string">"roles"</span>)).<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>);

    }

    <span class="hljs-comment">// ------------------------------</span>

    <span class="hljs-comment">// ä»¥ä¸‹æ˜¯å†…éƒ¨å·¥å…·æ–¹æ³•ï¼ˆæ— éœ€å¤–éƒ¨è°ƒç”¨ï¼‰</span>

    <span class="hljs-comment">// ------------------------------</span>

    <span class="hljs-comment">// è§£æ Tokenï¼Œè·å–æ‰€æœ‰è‡ªå®šä¹‰ä¿¡æ¯ï¼ˆPayloadï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Claims</span> <span class="hljs-title function_">getAllClaimsFromToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token</span>) {

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Jwts</span>.<span class="hljs-title function_">parser</span>()
                    .<span class="hljs-title function_">setSigningKey</span>(secret) <span class="hljs-comment">// ç”¨å¯†é’¥è§£å¯†</span>
                    .<span class="hljs-title function_">parseClaimsJws</span>(token)
                    .<span class="hljs-title function_">getBody</span>();
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">ExpiredJwtException</span> | <span class="hljs-title class_">MalformedJwtException</span> | <span class="hljs-title class_">SignatureException</span>
                 | <span class="hljs-title class_">IllegalArgumentException</span> | <span class="hljs-title class_">UnsupportedJwtException</span> e) {
            <span class="hljs-comment">// æ•è· Token å¼‚å¸¸ï¼ˆè¿‡æœŸã€æ ¼å¼é”™è¯¯ã€ç­¾åé”™è¯¯ç­‰ï¼‰</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ— æ•ˆçš„ Tokenï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>());
        }

    }

    <span class="hljs-comment">// ä» Token ä¸­è·å–æŒ‡å®šä¿¡æ¯ï¼ˆé€šç”¨æ–¹æ³•ï¼‰</span>
    <span class="hljs-keyword">private</span> &lt;T&gt; T <span class="hljs-title function_">getClaimFromToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token, <span class="hljs-built_in">Function</span>&lt;Claims, T&gt; claimsResolver</span>) {
        final <span class="hljs-title class_">Claims</span> claims = <span class="hljs-title function_">getAllClaimsFromToken</span>(token);
        <span class="hljs-keyword">return</span> claimsResolver.<span class="hljs-title function_">apply</span>(claims);

    }

    <span class="hljs-comment">// åˆ¤æ–­ Token æ˜¯å¦è¿‡æœŸ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isTokenExpired</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token</span>) {

        final <span class="hljs-title class_">Date</span> expirationDate = <span class="hljs-title function_">getClaimFromToken</span>(token, <span class="hljs-title class_">Claims</span>::getExpiration);
        <span class="hljs-keyword">return</span> expirationDate.<span class="hljs-title function_">before</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());

    }

    <span class="hljs-comment">// 6. è¾…åŠ©æ–¹æ³•ï¼šä»è¯·æ±‚å¤´ä¸­æå– Tokenï¼ˆå»é™¤å‰ç¼€ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">extractTokenFromHeader</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> header</span>) {

        <span class="hljs-keyword">if</span> (header != <span class="hljs-literal">null</span> &amp;&amp; header.<span class="hljs-title function_">startsWith</span>(tokenPrefix)) {
            <span class="hljs-comment">// ä¾‹å¦‚ï¼šheader = "Bearer eyJhbGciOiJIUzI1NiJ9..."ï¼Œè¿”å›åé¢çš„ Token éƒ¨åˆ†</span>
            <span class="hljs-keyword">return</span> header.<span class="hljs-title function_">substring</span>(tokenPrefix.<span class="hljs-title function_">length</span>()).<span class="hljs-title function_">trim</span>();
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    }

    <span class="hljs-comment">// Getter æ–¹æ³•ï¼ˆä¾›å¤–éƒ¨è·å–é…ç½®å‚æ•°ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getTokenHeader</span>(<span class="hljs-params"/>) {

        <span class="hljs-keyword">return</span> tokenHeader;

    }

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getTokenPrefix</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> tokenPrefix;
    }

}
</code></pre>
<h3 data-id="heading-4">å››ã€ç¬¬äºŒæ­¥ï¼šé…ç½® JWT å‚æ•°ï¼ˆé¿å…ç¡¬ç¼–ç ï¼‰</h3>
<p>åœ¨ <code>src/main/resources/application.yml</code>ï¼ˆæˆ– <code>application.properties</code>ï¼‰ä¸­ï¼Œæ·»åŠ  JWT ç›¸å…³é…ç½®ï¼ˆæ›¿æ¢ç¡¬ç¼–ç ï¼Œæ–¹ä¾¿åç»­ä¿®æ”¹ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># JWT é…ç½®</span>
<span class="hljs-attr">jwt:</span>
  <span class="hljs-attr">secret:</span> <span class="hljs-string">firstspringbootproject2025secretkeyfirstspringbootproject2025secretkeyfirstspringbootproject2025secretkey</span> <span class="hljs-comment"># å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ç”¨ 64 ä½ä»¥ä¸Šéšæœºå­—ç¬¦ä¸²ï¼‰</span>
<span class="hljs-comment">#  expiration: 7200000 # Token è¿‡æœŸæ—¶é—´ï¼ˆ7200000 æ¯«ç§’ = 2 å°æ—¶ï¼‰</span>
  <span class="hljs-attr">expiration:</span> <span class="hljs-number">1000</span> <span class="hljs-comment"># Token è¿‡æœŸæ—¶é—´ï¼ˆ1000 æ¯«ç§’ = 1 ç§’ï¼‰</span>
  <span class="hljs-attr">header:</span> <span class="hljs-string">Authorization</span> <span class="hljs-comment"># è¯·æ±‚å¤´å­—æ®µå</span>
  <span class="hljs-attr">prefix:</span> <span class="hljs-string">Bearer</span>  <span class="hljs-comment"># Token å‰ç¼€ï¼ˆæ³¨æ„æœ«å°¾æœ‰ç©ºæ ¼ï¼‰</span>
</code></pre>
<h3 data-id="heading-5">äº”ã€ç¬¬ä¸‰æ­¥ï¼šå®ç° JWT ç™»å½•æ¥å£ï¼ˆæ›¿æ¢ HTTP Basicï¼‰</h3>
<p>HTTP Basic ç™»å½•æ˜¯é€šè¿‡æµè§ˆå™¨å¼¹çª—è¾“å…¥è´¦å·å¯†ç ï¼Œä½“éªŒè¾ƒå·®ï¼›æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ª <strong>ç™»å½•æ¥å£</strong>ï¼ˆå¦‚ <code>/api/login</code>ï¼‰ï¼Œå®¢æˆ·ç«¯é€šè¿‡ JSON æäº¤è´¦å·å¯†ç ï¼ŒæœåŠ¡å™¨éªŒè¯é€šè¿‡åè¿”å› JWT Tokenã€‚</p>
<h4 data-id="heading-6">1. åˆ›å»ºç™»å½•è¯·æ±‚å‚æ•°å®ä½“ç±»</h4>
<p>åœ¨ <code>com.example.firstspringbootproject.dto</code> åŒ…ä¸‹åˆ›å»º <code>LoginRequestDTO</code>ï¼ˆæ¥æ”¶å®¢æˆ·ç«¯æäº¤çš„è´¦å·å¯†ç ï¼‰ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.firstspringbootproject</span><span class="hljs-selector-class">.dto</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">io</span><span class="hljs-selector-class">.swagger</span><span class="hljs-selector-class">.v3</span><span class="hljs-selector-class">.oas</span><span class="hljs-selector-class">.annotations</span><span class="hljs-selector-class">.media</span><span class="hljs-selector-class">.Schema</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">jakarta</span><span class="hljs-selector-class">.validation</span><span class="hljs-selector-class">.constraints</span><span class="hljs-selector-class">.NotBlank</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">lombok</span><span class="hljs-selector-class">.Data</span>;

@<span class="hljs-selector-tag">Data</span>
@<span class="hljs-selector-tag">Schema</span>(name = <span class="hljs-string">"LoginRequestDTO"</span>, description = <span class="hljs-string">"ç™»å½•è¯·æ±‚å‚æ•°"</span>)
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">LoginRequestDTO</span> {

    <span class="hljs-variable">@NotBlank</span>(message = <span class="hljs-string">"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"</span>)
    <span class="hljs-variable">@Schema</span>(description = <span class="hljs-string">"ç”¨æˆ·å"</span>, example = <span class="hljs-string">"admin"</span>)
    private String username;

    <span class="hljs-variable">@NotBlank</span>(message = <span class="hljs-string">"å¯†ç ä¸èƒ½ä¸ºç©º"</span>)
    <span class="hljs-variable">@Schema</span>(description = <span class="hljs-string">"å¯†ç "</span>, example = <span class="hljs-string">"123456"</span>)
    private String password;

}
</code></pre>
<h4 data-id="heading-7">2. åˆ›å»ºç™»å½•æ§åˆ¶å™¨</h4>
<p>åœ¨ <code>com.example.firstspringbootproject.controller</code> åŒ…ä¸‹åˆ›å»º <code>AuthController</code>ï¼Œå®ç°ç™»å½•æ¥å£ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.firstspringbootproject</span><span class="hljs-selector-class">.controller</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.firstspringbootproject</span><span class="hljs-selector-class">.dto</span><span class="hljs-selector-class">.LoginRequestDTO</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.firstspringbootproject</span><span class="hljs-selector-class">.common</span><span class="hljs-selector-class">.Result</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.firstspringbootproject</span><span class="hljs-selector-class">.utils</span><span class="hljs-selector-class">.JwtUtil</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">io</span><span class="hljs-selector-class">.swagger</span><span class="hljs-selector-class">.v3</span><span class="hljs-selector-class">.oas</span><span class="hljs-selector-class">.annotations</span><span class="hljs-selector-class">.Operation</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">io</span><span class="hljs-selector-class">.swagger</span><span class="hljs-selector-class">.v3</span><span class="hljs-selector-class">.oas</span><span class="hljs-selector-class">.annotations</span><span class="hljs-selector-class">.tags</span><span class="hljs-selector-class">.Tag</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">jakarta</span><span class="hljs-selector-class">.validation</span><span class="hljs-selector-class">.Valid</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.beans</span><span class="hljs-selector-class">.factory</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.Autowired</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.authentication</span><span class="hljs-selector-class">.AuthenticationManager</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.authentication</span><span class="hljs-selector-class">.UsernamePasswordAuthenticationToken</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.Authentication</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.security</span><span class="hljs-selector-class">.core</span><span class="hljs-selector-class">.userdetails</span><span class="hljs-selector-class">.UserDetails</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.bind</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.PostMapping</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.bind</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.RequestBody</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.bind</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.RequestMapping</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.web</span><span class="hljs-selector-class">.bind</span><span class="hljs-selector-class">.annotation</span><span class="hljs-selector-class">.RestController</span>;

<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.HashMap</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.Map</span>;

@<span class="hljs-selector-tag">RestController</span>
@<span class="hljs-selector-tag">RequestMapping</span>(<span class="hljs-string">"/api"</span>)
@<span class="hljs-selector-tag">Tag</span>(name = <span class="hljs-string">"è®¤è¯æ¥å£"</span>, description = <span class="hljs-string">"ç™»å½•ã€Token ç›¸å…³æ¥å£"</span>)
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">AuthController</span> {

    <span class="hljs-variable">@Autowired</span>
    private AuthenticationManager authenticationManager; <span class="hljs-comment">// Spring Security è®¤è¯ç®¡ç†å™¨</span>

    <span class="hljs-variable">@Autowired</span>
    private JwtUtil jwtUtil; <span class="hljs-comment">// è‡ªå®šä¹‰ JWT å·¥å…·ç±»</span>

    <span class="hljs-comment">/**
     * ç™»å½•æ¥å£ï¼šæ¥æ”¶è´¦å·å¯†ç ï¼ŒéªŒè¯é€šè¿‡åè¿”å› JWT Token
     */</span>

    <span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/login"</span>)
    <span class="hljs-variable">@Operation</span>(summary = <span class="hljs-string">"ç”¨æˆ·ç™»å½•"</span>, description = <span class="hljs-string">"æäº¤ç”¨æˆ·åå’Œå¯†ç ï¼Œè·å– JWT Token"</span>)
    public Result&lt;Map&lt;String, String&gt;&gt; <span class="hljs-built_in">login</span>(<span class="hljs-variable">@Valid</span> <span class="hljs-variable">@RequestBody</span> LoginRequestDTO loginRequest) {

        <span class="hljs-comment">// 1. è°ƒç”¨ Spring Security è®¤è¯ç®¡ç†å™¨ï¼ŒéªŒè¯è´¦å·å¯†ç </span>
        <span class="hljs-selector-tag">Authentication</span> <span class="hljs-selector-tag">authentication</span> = <span class="hljs-selector-tag">authenticationManager</span><span class="hljs-selector-class">.authenticate</span>(
                new <span class="hljs-built_in">UsernamePasswordAuthenticationToken</span>(
                        loginRequest.<span class="hljs-built_in">getUsername</span>(),
                        loginRequest.<span class="hljs-built_in">getPassword</span>()
                )
        );

        <span class="hljs-comment">// 2. è®¤è¯é€šè¿‡ï¼šä»è®¤è¯ç»“æœä¸­è·å–ç”¨æˆ·ä¿¡æ¯</span>
        <span class="hljs-selector-tag">UserDetails</span> <span class="hljs-selector-tag">userDetails</span> = (UserDetails) <span class="hljs-selector-tag">authentication</span><span class="hljs-selector-class">.getPrincipal</span>();

        <span class="hljs-comment">// 3. ç”Ÿæˆ JWT Token</span>
        <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">token</span> = <span class="hljs-selector-tag">jwtUtil</span><span class="hljs-selector-class">.generateToken</span>(userDetails);

        <span class="hljs-comment">// 4. æ„å»ºè¿”å›ç»“æœï¼ˆåŒ…å« Token å’Œè¿‡æœŸæç¤ºï¼‰</span>
        <span class="hljs-selector-tag">Map</span>&lt;<span class="hljs-selector-tag">String</span>, <span class="hljs-selector-tag">String</span>&gt; <span class="hljs-selector-tag">resultMap</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">HashMap</span>&lt;&gt;();
        <span class="hljs-selector-tag">resultMap</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"token"</span>, token);
        <span class="hljs-selector-tag">resultMap</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"expiration"</span>, <span class="hljs-string">"Token æœ‰æ•ˆæœŸ 2 å°æ—¶ï¼Œè¯·åŠæ—¶åˆ·æ–°"</span>);
        <span class="hljs-selector-tag">resultMap</span><span class="hljs-selector-class">.put</span>(<span class="hljs-string">"role"</span>, jwtUtil.<span class="hljs-built_in">getRoleFromToken</span>(token)); <span class="hljs-comment">// è¿”å›ç”¨æˆ·è§’è‰²ï¼Œæ–¹ä¾¿å‰ç«¯å¤„ç†</span>

        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(resultMap);
    }

}
</code></pre>
<h3 data-id="heading-8">å…­ã€ç¬¬å››æ­¥ï¼šå®ç° JWT è®¤è¯è¿‡æ»¤å™¨ï¼ˆæ ¸å¿ƒæ‹¦æˆªé€»è¾‘ï¼‰</h3>
<p>å®¢æˆ·ç«¯ç™»å½•æˆåŠŸåï¼Œåç»­è¯·æ±‚ä¼šåœ¨ <code>Authorization</code> å¤´ä¸­æºå¸¦ Tokenï¼ˆæ ¼å¼ï¼š<code>Bearer eyJhbGciOiJIUzI1NiJ9...</code>ï¼‰ã€‚æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ª <strong>è¿‡æ»¤å™¨</strong>ï¼Œåœ¨è¯·æ±‚åˆ°è¾¾æ¥å£å‰æ‹¦æˆª Tokenï¼Œå®Œæˆä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>ä»è¯·æ±‚å¤´ä¸­æå– Tokenï¼›</li>
<li>éªŒè¯ Token æœ‰æ•ˆæ€§ï¼›</li>
<li>ä» Token ä¸­è§£æç”¨æˆ·ä¿¡æ¯å’Œè§’è‰²ï¼›</li>
<li>å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥ Spring Security ä¸Šä¸‹æ–‡ï¼Œè®©åç»­æƒé™æ ¡éªŒç”Ÿæ•ˆã€‚</li>
</ol>
<p>åœ¨ <code>com.example.firstspringbootproject.filter</code> åŒ…ä¸‹åˆ›å»º <code>JwtAuthenticationFilter</code> ç±»ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> com.example.firstspringbootproject.filter;

<span class="hljs-keyword">import</span> com.example.firstspringbootproject.utils.<span class="hljs-type">JwtUtil</span>;
<span class="hljs-keyword">import</span> jakarta.servlet.<span class="hljs-type">FilterChain</span>;
<span class="hljs-keyword">import</span> jakarta.servlet.<span class="hljs-type">ServletException</span>;
<span class="hljs-keyword">import</span> jakarta.servlet.http.<span class="hljs-type">HttpServletRequest</span>;
<span class="hljs-keyword">import</span> jakarta.servlet.http.<span class="hljs-type">HttpServletResponse</span>;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.<span class="hljs-type">Autowired</span>;
<span class="hljs-keyword">import</span> org.springframework.security.authentication.<span class="hljs-type">UsernamePasswordAuthenticationToken</span>;
<span class="hljs-keyword">import</span> org.springframework.security.core.context.<span class="hljs-type">SecurityContextHolder</span>;
<span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.<span class="hljs-type">UserDetails</span>;
<span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.<span class="hljs-type">UserDetailsService</span>;
<span class="hljs-keyword">import</span> org.springframework.security.web.authentication.<span class="hljs-type">WebAuthenticationDetailsSource</span>;
<span class="hljs-keyword">import</span> org.springframework.stereotype.<span class="hljs-type">Component</span>;
<span class="hljs-keyword">import</span> org.springframework.web.filter.<span class="hljs-type">OncePerRequestFilter</span>;

<span class="hljs-keyword">import</span> java.io.<span class="hljs-type">IOException</span>;

<span class="hljs-comment">// è‡ªå®šä¹‰ JWT è®¤è¯è¿‡æ»¤å™¨ï¼šæ¯æ¬¡è¯·æ±‚éƒ½ä¼šæ‰§è¡Œï¼ˆOncePerRequestFilter ç¡®ä¿ä¸€æ¬¡è¯·æ±‚åªæ‰§è¡Œä¸€æ¬¡ï¼‰</span>
<span class="hljs-meta">@Component</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JwtAuthenticationFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">OncePerRequestFilter</span> </span>{

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">JwtUtil</span> jwtUtil;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">UserDetailsService</span> userDetailsService; <span class="hljs-comment">// ä¹‹å‰å®ç°çš„ç”¨æˆ·æŸ¥è¯¢æœåŠ¡</span>

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> void doFilterInternal(<span class="hljs-type">HttpServletRequest</span> request,
                                    <span class="hljs-type">HttpServletResponse</span> response,
                                    <span class="hljs-type">FilterChain</span> filterChain
    ) <span class="hljs-keyword">throws</span> <span class="hljs-type">ServletException</span>, <span class="hljs-type">IOException</span> {

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. ä»è¯·æ±‚å¤´ä¸­æå– Token</span>
            <span class="hljs-type">String</span> token = jwtUtil.extractTokenFromHeader(
                    request.getHeader(jwtUtil.getTokenHeader())
            );

            <span class="hljs-comment">// 2. éªŒè¯ Tokenï¼šéç©º + æœ‰æ•ˆ</span>
            <span class="hljs-keyword">if</span> (token != <span class="hljs-literal">null</span>) {

                <span class="hljs-comment">// 2.1 ä» Token ä¸­è·å–ç”¨æˆ·å</span>
                <span class="hljs-type">String</span> username = jwtUtil.getUsernameFromToken(token);

                <span class="hljs-comment">// 2.2 è‹¥ç”¨æˆ·åå­˜åœ¨ï¼Œä¸” Spring Security ä¸Šä¸‹æ–‡æœªå­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼ˆæœªç™»å½•ï¼‰</span>
                <span class="hljs-keyword">if</span> (username != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-type">SecurityContextHolder</span>.getContext().getAuthentication() == <span class="hljs-literal">null</span>) {

                    <span class="hljs-comment">// 2.3 ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·å®Œæ•´ä¿¡æ¯ï¼ˆUserDetailsï¼‰</span>
                    <span class="hljs-type">UserDetails</span> userDetails = userDetailsService.loadUserByUsername(username);

                    <span class="hljs-comment">// 2.4 éªŒè¯ Token æœ‰æ•ˆæ€§ï¼ˆæœªè¿‡æœŸ + ç”¨æˆ·ååŒ¹é…ï¼‰</span>
                    <span class="hljs-keyword">if</span> (jwtUtil.validateToken(token, userDetails)) {

                        <span class="hljs-comment">// 3. æ„å»ºè®¤è¯å¯¹è±¡ï¼Œå­˜å…¥ Spring Security ä¸Šä¸‹æ–‡</span>
                        <span class="hljs-type">UsernamePasswordAuthenticationToken</span> authentication =
                                <span class="hljs-keyword">new</span> <span class="hljs-type">UsernamePasswordAuthenticationToken</span>(
                                        userDetails, <span class="hljs-comment">// ç”¨æˆ·ä¿¡æ¯</span>
                                        <span class="hljs-literal">null</span>, <span class="hljs-comment">// å¯†ç ï¼ˆå·²éªŒè¯ï¼Œæ— éœ€å­˜å‚¨ï¼‰</span>
                                        userDetails.getAuthorities() <span class="hljs-comment">// ç”¨æˆ·æƒé™ï¼ˆè§’è‰²ï¼‰</span>
                                );

                        <span class="hljs-comment">// è®¾ç½®è¯·æ±‚è¯¦æƒ…ï¼ˆå¦‚ IPã€ä¼šè¯ IDï¼‰</span>
                        authentication.setDetails(
                                <span class="hljs-keyword">new</span> <span class="hljs-type">WebAuthenticationDetailsSource</span>().buildDetails(request)
                        );

                        <span class="hljs-comment">// å°†è®¤è¯å¯¹è±¡å­˜å…¥ä¸Šä¸‹æ–‡ï¼šåç»­æ¥å£æƒé™æ ¡éªŒä¼šä»è¿™é‡Œè·å–ç”¨æˆ·ä¿¡æ¯</span>
                        <span class="hljs-type">SecurityContextHolder</span>.getContext().setAuthentication(authentication);
                    }
                }
            }
        } <span class="hljs-keyword">catch</span> (<span class="hljs-type">Exception</span> e) {

            <span class="hljs-comment">// Token éªŒè¯å¤±è´¥ï¼ˆå¦‚è¿‡æœŸã€ç¯¡æ”¹ï¼‰ï¼Œæ‰“å°æ—¥å¿—ä½†ä¸é˜»æ–­è¯·æ±‚ï¼ˆåç»­ä¼šè¿”å› 401ï¼‰</span>
            logger.error(<span class="hljs-string">"JWT Token éªŒè¯å¤±è´¥ï¼š"</span> + e.getMessage());

        }

        <span class="hljs-comment">// 4. ç»§ç»­æ‰§è¡Œè¿‡æ»¤å™¨é“¾ï¼ˆè®©è¯·æ±‚åˆ°è¾¾åç»­æ¥å£æˆ–è¿‡æ»¤å™¨ï¼‰</span>
        filterChain.doFilter(request, response);
    }

}
</code></pre>
<h3 data-id="heading-9">ä¸ƒã€ç¬¬äº”æ­¥ï¼šé‡æ„ SecurityConfigï¼ˆé€‚é… JWTï¼‰</h3>
<p>ä¹‹å‰çš„ <code>SecurityConfig</code> åŸºäº HTTP Basic ç™»å½•ï¼Œç°åœ¨éœ€è¦ä¿®æ”¹ä¸º <strong>JWT æ— çŠ¶æ€ç™»å½•</strong>ï¼Œæ ¸å¿ƒè°ƒæ•´ç‚¹ï¼š</p>
<ol>
<li>å…³é—­ Sessionï¼ˆæ— çŠ¶æ€ç™»å½•ä¸éœ€è¦ Sessionï¼‰ï¼›</li>
<li>æ”¾è¡Œç™»å½•æ¥å£ï¼ˆ<code>/api/login</code>ï¼‰ï¼›</li>
<li>å°† JWT è¿‡æ»¤å™¨åŠ å…¥è¿‡æ»¤å™¨é“¾ï¼›</li>
<li>ç§»é™¤ HTTP Basic é…ç½®ï¼Œä¿ç•™ç»Ÿä¸€å¼‚å¸¸å¤„ç†ã€‚</li>
</ol>
<p>ä¿®æ”¹ <code>com.example.firstspringbootproject.config.SecurityConfig</code> ç±»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.firstspringbootproject.config;

<span class="hljs-keyword">import</span> com.example.firstspringbootproject.common.Result;
<span class="hljs-keyword">import</span> com.example.firstspringbootproject.entity.SysUser;
<span class="hljs-keyword">import</span> com.example.firstspringbootproject.filter.JwtAuthenticationFilter;
<span class="hljs-keyword">import</span> com.example.firstspringbootproject.mapper.SysUserMapper;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Autowired;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Configuration;
<span class="hljs-keyword">import</span> org.springframework.security.authentication.AuthenticationManager;
<span class="hljs-keyword">import</span> org.springframework.security.authentication.dao.DaoAuthenticationProvider;
<span class="hljs-keyword">import</span> org.springframework.security.config.<span class="hljs-keyword">annotation</span>.authentication.configuration.AuthenticationConfiguration;
<span class="hljs-keyword">import</span> org.springframework.security.config.<span class="hljs-keyword">annotation</span>.method.configuration.EnableMethodSecurity;
<span class="hljs-keyword">import</span> org.springframework.security.config.<span class="hljs-keyword">annotation</span>.web.builders.HttpSecurity;
<span class="hljs-keyword">import</span> org.springframework.security.config.<span class="hljs-keyword">annotation</span>.web.configuration.EnableWebSecurity;
<span class="hljs-keyword">import</span> org.springframework.security.config.http.SessionCreationPolicy;
<span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;
<span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;
<span class="hljs-keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
<span class="hljs-keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;
<span class="hljs-keyword">import</span> org.springframework.security.web.SecurityFilterChain;
<span class="hljs-keyword">import</span> org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableWebSecurity</span>
<span class="hljs-meta">@EnableMethodSecurity</span> <span class="hljs-comment">// å¯ç”¨æ–¹æ³•çº§æƒé™æ§åˆ¶ï¼ˆå¦‚ @PreAuthorize("hasRole('ADMIN')")ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityConfig</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SysUserMapper sysUserMapper;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ObjectMapper objectMapper;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JwtAuthenticationFilter jwtAuthenticationFilter; <span class="hljs-comment">// è‡ªå®šä¹‰ JWT è¿‡æ»¤å™¨</span>

    <span class="hljs-comment">// 1. å¯†ç ç¼–ç å™¨ï¼ˆä¸å˜ï¼‰</span>

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> PasswordEncoder passwordEncoder() {
        <span class="hljs-keyword">return</span> new BCryptPasswordEncoder();

    }

    <span class="hljs-comment">// 2. ç”¨æˆ·è¯¦æƒ…æœåŠ¡ï¼ˆä¸å˜ï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> UserDetailsService userDetailsService() {
        <span class="hljs-keyword">return</span> username -&gt; {

            SysUser sysUser = sysUserMapper.findByUsername(username);

            <span class="hljs-keyword">if</span> (sysUser == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">throw</span> new UsernameNotFoundException(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨: "</span> + username);
            }
            <span class="hljs-keyword">return</span> sysUser;

        };

    }

    <span class="hljs-comment">// 3. è®¤è¯æä¾›è€…ï¼ˆä¸å˜ï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DaoAuthenticationProvider authenticationProvider() {

        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();
        provider.setUserDetailsService(userDetailsService());
        provider.setPasswordEncoder(passwordEncoder());
        <span class="hljs-keyword">return</span> provider;
    }

    <span class="hljs-comment">// 4. è®¤è¯ç®¡ç†å™¨ï¼ˆä¸å˜ï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {
        <span class="hljs-keyword">return</span> config.getAuthenticationManager();
    }

    <span class="hljs-comment">// 5. æ ¸å¿ƒè§„åˆ™é…ç½®ï¼ˆé‡ç‚¹ä¿®æ”¹ï¼šé€‚é… JWTï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {

        http
                <span class="hljs-comment">// 1. å…³é—­ CSRFï¼ˆå‰åç«¯åˆ†ç¦»å¿…é¡»å…³ï¼‰</span>
                .csrf(csrf -&gt; csrf.disable())
                <span class="hljs-comment">// 2. å…³é—­ Sessionï¼ˆæ— çŠ¶æ€ç™»å½•æ ¸å¿ƒï¼šä¸åˆ›å»ºå’Œä½¿ç”¨ Sessionï¼‰</span>
                .sessionManagement(session -&gt; session
                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
                )
                <span class="hljs-comment">// 3. é…ç½®æ¥å£è®¿é—®è§„åˆ™ï¼ˆè°ƒæ•´æ”¾è¡Œæ¥å£ï¼‰</span>
                .authorizeHttpRequests(auth -&gt; auth
                        <span class="hljs-comment">// â‘  æ”¾è¡Œï¼šæ¥å£æ–‡æ¡£ï¼ˆKnife4jï¼‰ã€ç™»å½•æ¥å£</span>
                        .requestMatchers(<span class="hljs-string">"/doc.html"</span>, <span class="hljs-string">"/webjars/**"</span>, <span class="hljs-string">"/v3/api-docs/**"</span>, <span class="hljs-string">"/api/login"</span>).permitAll()
                        <span class="hljs-comment">// â‘¡ ç®¡ç†å‘˜æ¥å£ï¼šä»… ADMIN å¯è®¿é—®</span>
                        .requestMatchers(<span class="hljs-string">"/api/user/all"</span>).hasRole(<span class="hljs-string">"ADMIN"</span>)
                        <span class="hljs-comment">// â‘¢ æ™®é€šç”¨æˆ·æ¥å£ï¼šUSER/ADMIN å¯è®¿é—®</span>
                        .requestMatchers(<span class="hljs-string">"/api/user/**"</span>, <span class="hljs-string">"/api/product/**"</span>).hasAnyRole(<span class="hljs-string">"USER"</span>, <span class="hljs-string">"ADMIN"</span>)
                        <span class="hljs-comment">// â‘£ å…¶ä»–æ¥å£ï¼šå¿…é¡»ç™»å½•ï¼ˆToken æœ‰æ•ˆï¼‰</span>
                        .anyRequest().authenticated()
                )

                <span class="hljs-comment">// 4. åŠ å…¥ JWT è¿‡æ»¤å™¨ï¼šåœ¨ UsernamePasswordAuthenticationFilter ä¹‹å‰æ‰§è¡Œ</span>
                <span class="hljs-comment">// ï¼ˆå…ˆéªŒè¯ Tokenï¼Œå†æ‰§è¡Œåç»­è®¤è¯é€»è¾‘ï¼‰</span>
                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.<span class="hljs-keyword">class</span>)
                <span class="hljs-comment">// 5. ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼ˆä¸å˜ï¼šæœªç™»å½•è¿”å› 401ï¼Œæƒé™ä¸è¶³è¿”å› 403ï¼‰</span>
                .exceptionHandling(ex -&gt; ex
                        .authenticationEntryPoint((request, response, authException) -&gt; {
                            response.setContentType(<span class="hljs-string">"application/json;charset=UTF-8"</span>);
                            Result&lt;<span class="hljs-built_in">Void</span>&gt; result = Result.error(<span class="hljs-number">401</span>, <span class="hljs-string">"æœªç™»å½•æˆ– Token å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"</span>);
                            response.getWriter().write(objectMapper.writeValueAsString(result));
                        })
                        .accessDeniedHandler((request, response, accessDeniedException) -&gt; {
                            response.setContentType(<span class="hljs-string">"application/json;charset=UTF-8"</span>);
                            Result&lt;<span class="hljs-built_in">Void</span>&gt; result = Result.error(<span class="hljs-number">403</span>, <span class="hljs-string">"æƒé™ä¸è¶³ï¼Œæ— æ³•è®¿é—®"</span>);
                            response.getWriter().write(objectMapper.writeValueAsString(result));
                        })
                );

        <span class="hljs-comment">// å…³è”è®¤è¯æä¾›è€…</span>
        http.authenticationProvider(authenticationProvider());
        <span class="hljs-keyword">return</span> http.build();

    }

}
</code></pre>
<h3 data-id="heading-10">å…«ã€ç¬¬å…­æ­¥ï¼šæµ‹è¯• JWT æ— çŠ¶æ€ç™»å½•æµç¨‹</h3>
<p>å¯åŠ¨é¡¹ç›®ï¼Œç”¨ Apifox æµ‹è¯•å®Œæ•´æµç¨‹ï¼ŒéªŒè¯æ— çŠ¶æ€ç™»å½•å’Œæƒé™æ§åˆ¶æ˜¯å¦ç”Ÿæ•ˆï¼š</p>
<h4 data-id="heading-11">1. æµ‹è¯• 1ï¼šè°ƒç”¨ç™»å½•æ¥å£ï¼Œè·å– Token</h4>
<ul>
<li><strong>è¯·æ±‚åœ°å€</strong>ï¼š<code>http://localhost:8080/api/login</code></li>
<li><strong>è¯·æ±‚æ–¹æ³•</strong>ï¼šPOST</li>
<li><strong>è¯·æ±‚ä½“ï¼ˆJSONï¼‰</strong> ï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"admin"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123456"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>å“åº”ç»“æœï¼ˆæˆåŠŸï¼‰</strong> ï¼š</li>
</ul>
<pre><code class="hljs language-css" lang="css">{
    "<span class="hljs-selector-tag">code</span>": <span class="hljs-number">200</span>,
    <span class="hljs-string">"msg"</span>: <span class="hljs-string">"success"</span>,
    <span class="hljs-string">"data"</span>: {
        "role": <span class="hljs-string">"ROLE_ADMIN"</span>,
        <span class="hljs-string">"expiration"</span>: <span class="hljs-string">"Token æœ‰æ•ˆæœŸ 2 å°æ—¶ï¼Œè¯·åŠæ—¶åˆ·æ–°"</span>,
        <span class="hljs-string">"token"</span>: <span class="hljs-string">"eyJhbGciOiJIUzUxMiJ9.eyJyb2xlcyI6WyJST0xFX0FETUlOIl0sInN1YiI6ImFkbWluIiwiaWF0IjoxNzYzNDgxMDk0LCJleHAiOjE3NjM0ODgyOTR9.hSxBCTlQo5tUai-knfM2Sh4nVmehizOslcHkvG86jdC-U7-EztskPkF0r4G0DcaTMV3eFcJUu4pCewDdnniq2A"</span>
    }
}
</code></pre>
<p>å¤åˆ¶è¿”å›çš„ <code>token</code>ï¼Œåç»­è¯·æ±‚ä¼šç”¨åˆ°ã€‚</p>
<h4 data-id="heading-12">2. æµ‹è¯• 2ï¼šæºå¸¦ Token è®¿é—®ç®¡ç†å‘˜æ¥å£</h4>
<ul>
<li><strong>è¯·æ±‚åœ°å€</strong>ï¼š<code>http://localhost:8080/api/user/all</code>ï¼ˆéœ€ ADMIN è§’è‰²ï¼‰</li>
<li><strong>è¯·æ±‚æ–¹æ³•</strong>ï¼šGET</li>
<li><strong>è¯·æ±‚å¤´</strong>ï¼šæ·»åŠ  <code>Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJyb2xlcyI6WyJST0xFX0FETUlOIl0sInN1YiI6ImFkbWluIiwiaWF0IjoxNzYzNDgxMDk0LCJleHAiOjE3NjM0ODgyOTR9.hSxBCTlQo5tUai-knfM2Sh4nVmehizOslcHkvG86jdC-U7-EztskPkF0r4G0DcaTMV3eFcJUu4pCewDdnniq2A</code>ï¼ˆæ³¨æ„ <code>Bearer</code> åæœ‰ç©ºæ ¼ï¼‰</li>
<li><strong>å“åº”ç»“æœï¼ˆæˆåŠŸï¼‰</strong> ï¼š</li>
</ul>
<pre><code class="hljs language-css" lang="css">{
    "<span class="hljs-selector-tag">code</span>": <span class="hljs-number">200</span>,
    <span class="hljs-string">"msg"</span>: <span class="hljs-string">"success"</span>,
    <span class="hljs-string">"data"</span>: [
        {
            "id": <span class="hljs-number">1</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å°æ˜"</span>,
            <span class="hljs-string">"age"</span>: <span class="hljs-number">20</span>,
            <span class="hljs-string">"phone"</span>: <span class="hljs-string">"13800138000"</span>
        },
        {
            "id": <span class="hljs-number">2</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å°çº¢"</span>,
            <span class="hljs-string">"age"</span>: <span class="hljs-number">19</span>,
            <span class="hljs-string">"phone"</span>: <span class="hljs-string">"13900139000"</span>
        },
        {
            "id": <span class="hljs-number">3</span>,
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"å°æ"</span>,
            <span class="hljs-string">"age"</span>: <span class="hljs-number">22</span>,
            <span class="hljs-string">"phone"</span>: <span class="hljs-string">"13700137000"</span>
        }
    ]
}
</code></pre>
<h4 data-id="heading-13">3. æµ‹è¯• 3ï¼šæ™®é€šç”¨æˆ· Token è®¿é—®ç®¡ç†å‘˜æ¥å£ï¼ˆæƒé™ä¸è¶³ï¼‰</h4>
<ul>
<li>å…ˆç”¨ <code>zhangsan</code>ï¼ˆå¯†ç  123456ï¼‰è°ƒç”¨ç™»å½•æ¥å£ï¼Œè·å–æ™®é€šç”¨æˆ· Tokenï¼›</li>
<li>æºå¸¦æ™®é€šç”¨æˆ· Token è®¿é—® <code>http://localhost:8080/api/user/all</code>ï¼›</li>
<li><strong>å“åº”ç»“æœï¼ˆå¤±è´¥ï¼‰</strong> ï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">403</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æƒé™ä¸è¶³ï¼Œæ— æ³•è®¿é—®"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-14">4. æµ‹è¯• 4ï¼šToken è¿‡æœŸï¼ˆæ¨¡æ‹Ÿï¼‰</h4>
<ul>
<li>ä¿®æ”¹ <code>application.yml</code> ä¸­ <code>jwt.expiration</code> ä¸º <code>1000</code>ï¼ˆ1 ç§’è¿‡æœŸï¼‰ï¼›</li>
<li>é‡æ–°ç™»å½•è·å– Tokenï¼Œ1 ç§’åæºå¸¦ Token è®¿é—®æ¥å£ï¼›</li>
<li><strong>å“åº”ç»“æœï¼ˆå¤±è´¥ï¼‰</strong> ï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æœªç™»å½•æˆ– Token å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-15">ä¹ã€å¸¸è§é—®é¢˜ä¸ä¼˜åŒ–å»ºè®®</h3>
<h4 data-id="heading-16">1. é—®é¢˜ï¼šToken è¢«ç›—ç”¨æ€ä¹ˆåŠï¼Ÿ</h4>
<ul>
<li><strong>åŸå› </strong>ï¼šJWT Token ä¸€æ—¦ç”Ÿæˆï¼Œåœ¨è¿‡æœŸå‰æ— æ³•ä¸»åŠ¨ä½œåºŸï¼›</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</li>
</ul>
<ol>
<li>ç¼©çŸ­ Token è¿‡æœŸæ—¶é—´ï¼ˆå¦‚ 30 åˆ†é’Ÿï¼‰ï¼ŒåŒæ—¶å®ç° <strong>Token åˆ·æ–°æ¥å£</strong>ï¼ˆç”¨æ—§ Token æ¢å–æ–° Tokenï¼Œé¿å…é¢‘ç¹ç™»å½•ï¼‰ï¼›</li>
<li>ç»´æŠ¤ä¸€ä¸ª <strong>é»‘åå•</strong>ï¼ˆå¦‚ Redisï¼‰ï¼Œç”¨æˆ·ç™»å‡ºæˆ– Token è¢«ç›—æ—¶ï¼Œå°† Token åŠ å…¥é»‘åå•ï¼ŒéªŒè¯æ—¶å…ˆæ£€æŸ¥æ˜¯å¦åœ¨é»‘åå•ä¸­ã€‚</li>
</ol>
<h4 data-id="heading-17">2. é—®é¢˜ï¼šå¯†é’¥ï¼ˆsecretï¼‰æ³„éœ²æ€ä¹ˆåŠï¼Ÿ</h4>
<ul>
<li><strong>åŸå› </strong>ï¼šå¯†é’¥æ˜¯ JWT å®‰å…¨çš„æ ¸å¿ƒï¼Œæ³„éœ²åæ”»å‡»è€…å¯ä¼ªé€  Tokenï¼›</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</li>
</ul>
<ol>
<li>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¯†é’¥é€šè¿‡ <strong>ç¯å¢ƒå˜é‡</strong> æˆ– <strong>é…ç½®ä¸­å¿ƒ</strong> æ³¨å…¥ï¼Œä¸å†™å…¥ä»£ç æˆ–é…ç½®æ–‡ä»¶ï¼›</li>
<li>ä½¿ç”¨ <strong>éå¯¹ç§°åŠ å¯†ç®—æ³•</strong>ï¼ˆå¦‚ RS256ï¼‰ï¼Œç”¨ç§é’¥ç”Ÿæˆ Tokenï¼Œå…¬é’¥éªŒè¯ Tokenï¼Œç§é’¥ä¸¥æ ¼ä¿å¯†ã€‚</li>
</ol>
<h4 data-id="heading-18">## åã€æ€»ç»“ï¼šJWT æ— çŠ¶æ€ç™»å½•çš„æ ¸å¿ƒä»·å€¼</h4>
<p>é€šè¿‡æœ¬æ–‡çš„æ”¹é€ ï¼Œæˆ‘ä»¬å®ç°äº† Spring Boot + Spring Security + JWT çš„æ— çŠ¶æ€ç™»å½•ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>åˆ†å¸ƒå¼å‹å¥½</strong>ï¼šæœåŠ¡å™¨æ— éœ€å­˜å‚¨ Sessionï¼Œå¤šå°æœåŠ¡å™¨å¯ç›´æ¥å…±ç”¨ Token éªŒè¯é€»è¾‘ï¼›</li>
<li><strong>å‰åç«¯åˆ†ç¦»é€‚é…</strong>ï¼šé€šè¿‡è¯·æ±‚å¤´æºå¸¦ Tokenï¼Œæ— éœ€ä¾èµ– Cookieï¼Œé€‚é…ç§»åŠ¨ç«¯ã€å°ç¨‹åºç­‰å¤šç«¯åœºæ™¯ï¼›</li>
<li><strong>å®‰å…¨æ€§æå‡</strong>ï¼šToken åŒ…å«è¿‡æœŸæ—¶é—´å’ŒåŠ å¯†ç­¾åï¼Œé¿å…èº«ä»½ä¿¡æ¯è¢«ç¯¡æ”¹ï¼›</li>
<li><strong>æ‰©å±•æ€§å¼º</strong>ï¼šToken å¯è‡ªå®šä¹‰å­˜å‚¨ç”¨æˆ·è§’è‰²ã€æƒé™ç­‰ä¿¡æ¯ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°ã€‚</li>
</ol>
<p>è‡³æ­¤ï¼Œæ­å–œä½ å·²å…·å¤‡åˆçº§ç¨‹åºå‘˜å¼€å‘æ°´å¹³ï¼Œå¯ä»¥è¯•ç€æŠ•ç®€å†æ‰¾å·¥ä½œå•¦ã€‚</p>
<blockquote>
<p>ğŸ‘‰ å…³æ³¨ + ç§ä¿¡ â€œWebåŸºç¡€æºç â€ï¼Œè·å–æœ¬æ–‡å®Œæ•´å·¥ç¨‹ï¼æœ‰é—®é¢˜è¯„è®ºåŒºè§ï½</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…‰å›¾ç‰‡å°±300å¤šMï¼Œå¾®ä¿¡å°æ¸¸æˆç»™å†å¤§çš„åˆ†åŒ…ä¹Ÿéš¾å•Šï¼]]></title>    <link>https://juejin.cn/post/7574991051436097546</link>    <guid>https://juejin.cn/post/7574991051436097546</guid>    <pubDate>2025-11-22T00:06:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7574991051436097546" data-draft-id="7574269207363076105" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…‰å›¾ç‰‡å°±300å¤šMï¼Œå¾®ä¿¡å°æ¸¸æˆç»™å†å¤§çš„åˆ†åŒ…ä¹Ÿéš¾å•Šï¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-22T00:06:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¿å…ƒç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1972988307323236"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…‰å›¾ç‰‡å°±300å¤šMï¼Œå¾®ä¿¡å°æ¸¸æˆç»™å†å¤§çš„åˆ†åŒ…ä¹Ÿéš¾å•Šï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972988307323236/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¿å…ƒç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T00:06:53.000Z" title="Sat Nov 22 2025 00:06:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç‚¹å‡»ä¸Šæ–¹äº¿å…ƒç¨‹åºå‘˜+å…³æ³¨å’Œâ˜…æ˜Ÿæ ‡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbc09c62192e409f94baf3b9690e2e91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=hsvHgWUS2WhB4gFbxgLkekcSRJU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p><strong>å“ˆå–½å¤§å®¶å¥½</strong>ï¼Œæœ‰å°ä¼™ä¼´è¯´ä»–ä»¬å…¬å¸çš„æ¸¸æˆé¡¹ç›®ï¼Œå…‰å›¾ç‰‡èµ„æºå°±é«˜è¾¾<code>300M</code>ï¼Œæœ€è¿‘æ­£åœ¨è€ƒè™‘ä¸Šæ¶å¾®ä¿¡å°æ¸¸æˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2066feb13c464154af9e7fef249691d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=w1Q0r2k0X8puFWZJo7li%2F3zdlSw%3D" alt="" loading="lazy"/></p>
<p><strong>ä½†æ˜¯</strong>ï¼Œå¦‚æ­¤åºå¤§çš„æ¸¸æˆèµ„æºï¼Œæƒ³é€šè¿‡åˆ†åŒ…çš„å½¢å¼è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œåªèƒ½æ”¾åˆ°æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡<code>CDN</code>è®©ç©å®¶ä¸‹è½½ã€‚</p>
<p><strong>ç¬”è€…è¿˜æ˜¯å¾ˆå¥½å¥‡</strong>ï¼Œä»€ä¹ˆæ ·çš„èµ„æºå¦‚æ­¤å·¨å¤§ï¼Œé€šè¿‡å¯¹å°ä¼™ä¼´çš„<strong>æ·±å…¥äº†è§£</strong>ã€‚</p>
<p><strong>æƒŠè®¶å‘ç°</strong>ï¼Œä»–ä»¬çš„å›¾ç‰‡èµ„æºå±…ç„¶æ²¡æœ‰å‹ç¼©ï¼ä¸”ä¸è¯´å›¾ç‰‡æ˜¯å¦è¿‡äºç²¾è‡´ã€ç¾æœ¯æ‰‹ç¬”æ˜¯å¦è¿‡äºå¥”æ”¾ï¼Œä¸å‹ç¼©å®åœ¨æ˜¯å¤ªéš¾å—äº†ï¼</p>
<p><strong>è¨€å½’æ­£ä¼ </strong>ï¼Œæœ¬æœŸå°†å¸¦å°ä¼™ä¼´ä»¬ä¸€èµ·æ¥çœ‹ä¸‹ï¼Œåœ¨<code>Cocos</code>æ¸¸æˆå¼€å‘ä¸­ï¼Œå¦‚ä½•çœå¿ƒçœåŠ›åœ°å‹ç¼©å›¾ç‰‡ï¼Œ<code>330M</code>èƒ½å‹ç¼©åˆ°å¤šå°‘ã€‚</p>
<p><strong>æœ¬æ–‡æºå·¥ç¨‹å¯åœ¨æ–‡æœ«è·å–ï¼Œå°ä¼™ä¼´ä»¬è‡ªè¡Œå‰å¾€ã€‚</strong></p>
<h2 data-id="heading-1">å›¾ç‰‡å‹ç¼©</h2>
<blockquote>
<p><strong>å›¾ç‰‡å‹ç¼©</strong>æ˜¯ä¸€ç§åœ¨å°½å¯èƒ½ä¿æŒå›¾ç‰‡è´¨é‡çš„å‰æä¸‹ï¼Œå‡å°PNGæ–‡ä»¶å¤§å°çš„æŠ€æœ¯ã€‚</p>
</blockquote>
<p><strong>æ¸¸æˆå¼€å‘</strong>ä¸­å¸¸ç”¨çš„å›¾ç‰‡å‹ç¼©å·¥å…·æœ‰<code>TinyPNG</code>ã€<code>pngquant</code>ã€<code>Compressor.io</code>ç­‰ç­‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5a6b7ca35354e23afc6f21f57db86d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=ELwP%2FxRh6xKWwOPUmaGFyvP3O4Y%3D" alt="" loading="lazy"/></p>
<p><code>pngquant</code>æ˜¯ä¸€æ¬¾ç”¨äºPNGå›¾åƒæœ‰æŸå‹ç¼©çš„å‘½ä»¤è¡Œå·¥å…·å’Œå‡½æ•°åº“ã€‚</p>
<p><strong>è¯¥è½¬æ¢å·¥å…·</strong>èƒ½æ˜¾è‘—å‡å°æ–‡ä»¶å¤§å°ï¼ˆé€šå¸¸é«˜è¾¾<code>70%</code>ï¼‰ï¼ŒåŒæ—¶ä¿æŒå®Œæ•´çš„<code>Alpha</code>é€šé“é€æ˜åº¦ã€‚ç”Ÿæˆçš„å›¾åƒå…¼å®¹æ‰€æœ‰ä¸»æµç½‘é¡µæµè§ˆå™¨å’Œæ“ä½œç³»ç»Ÿã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c21cf91c016b4c7e9a7c9cb42261c7c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=ABlz4ICbe0zXj3OUW0kIr7zt2aQ%3D" alt="" loading="lazy"/></p>
<p><strong>å¸¸ç”¨</strong>çš„å‚æ•°åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>quality min-max</strong>ï¼šè´¨é‡ï¼Œä½¿ç”¨æ»¡è¶³æˆ–è¶…è¿‡â€œæœ€å¤§è´¨é‡â€æ‰€éœ€çš„æœ€å°‘é¢œè‰²æ•°é‡ã€‚è‹¥è½¬æ¢åçš„è´¨é‡ä½äºâ€œæœ€ä½è´¨é‡â€è¦æ±‚ï¼Œå›¾åƒå°†ä¸ä¼šè¢«ä¿å­˜ã€‚</li>
<li><strong>speed N</strong>ï¼šé€Ÿåº¦ï¼Œä»<code>1</code>ï¼ˆæš´åŠ›ï¼‰åˆ°<code>10</code>ï¼ˆæœ€å¿«ï¼‰ã€‚é»˜è®¤ä¸º<code>3</code>ã€‚é€Ÿåº¦<code>10</code>çš„è´¨é‡é™ä½<code>5%</code>ï¼Œä½†æ¯”é»˜è®¤é€Ÿåº¦å¿«<code>8</code>å€ã€‚</li>
</ul>
<h2 data-id="heading-2">å›¾ç‰‡å‹ç¼©å®ä¾‹</h2>
<p><strong>ä¸‹é¢</strong>ä¸€èµ·æ¥çœ‹ä¸‹ï¼Œåœ¨<code>Cocos</code>æ¸¸æˆå¼€å‘ä¸­ï¼Œå¦‚ä½•é€šè¿‡æ’ä»¶é›†æˆåˆ°é¡¹ç›®ï¼Œä½¿å…¶æ„å»ºåè‡ªåŠ¨å‹ç¼©å›¾ç‰‡ã€‚</p>
<h3 data-id="heading-3">1.èµ„æºå‡†å¤‡</h3>
<p><strong>å…ˆå‡†å¤‡</strong>ä¸€å¼ <code>PNG</code>å›¾ç‰‡ï¼ŒåŸå›¾å¤§å°<code>0.97M</code>ï¼Œç”¨æ¥ç¡®è®¤å‹ç¼©æ˜¯å¦æˆåŠŸï¼Œå‹ç¼©è´¨é‡å¦‚ä½•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e53e053964b4012aca555b60a3c960d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=%2FWNMI68F89Ro%2FLMxePQzpqDEiwk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">2.åˆ›å»ºæ‰©å±•</h3>
<p><strong>æ–°å»º</strong>ä¸€ä¸ªé¡¹ç›®ï¼Œé€šè¿‡èœå•<code>æ‰©å±•-&gt;åˆ›å»ºæ‰©å±•</code>æ‰“å¼€æ‰©å±•åˆ›å»ºé¢æ¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/981246b0cffe4757a85b779b56633feb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=jFbkGayKUQQqvpuIazBfOv1yees%3D" alt="" loading="lazy"/></p>
<p><strong>æˆ‘ä»¬é€‰æ‹©</strong>æ„å»ºæ’ä»¶ï¼Œè¿™æ˜¯å®˜æ–¹è‡ªå®šä¹‰æ„å»ºæ’ä»¶çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œç‚¹å‡»åˆ›å»ºæ‰©å±•ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ä¸Šé¢æ‰©å±•æˆ‘ä»¬çš„è‡ªåŠ¨å‹ç¼©ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05a3c4c89607467686ba1f2f3d48d24b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=rodimWz7EF92karm679PyenHPBE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">3.å¯ç”¨æ‰©å±•</h3>
<p><strong>é€šè¿‡</strong>èœå•<code>æ‰©å±•-&gt;æ‰©å±•ç®¡ç†å™¨</code>æ‰“å¼€æ‰©å±•ç®¡ç†å™¨ï¼Œåœ¨å·²å®‰è£…æ‰©å±•ä¸­æ‰¾åˆ°æˆ‘ä»¬æ–°å»ºçš„æ’ä»¶ï¼Œå°†å…¶æ”¹æˆå¼€å¯çŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/465a0f954acc419fb5c198282b834872~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=4JvqFHoiW06xlvOIGG17t9QRWdU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">4.æ‰©å±•ç•Œé¢</h3>
<p><strong>é¦–å…ˆ</strong>æˆ‘ä»¬åˆ æ‰æˆ‘ä»¬ä¸éœ€è¦çš„<code>asset-handlers.ts</code>å’Œ<code>panel.ts</code>Â·ï¼Œåœ¨<code>builder.ts</code>ä¸­åªä¿ç•™<code>hooks</code>é…ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b1efbecbc664d18a9f5164a8c173820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=eFokhipz4Omu7nkopZZH63zs1jU%3D" alt="" loading="lazy"/></p>
<p><strong>æ¥ä¸‹æ¥</strong>æˆ‘ä»¬ç»™æ„å»ºé¢æ¿åŠ ä¸Šä¸€ç»„é…ç½®ï¼Œç”¨æ¥æ§åˆ¶å‹ç¼©æ˜¯å¦å¼€å¯ã€å‹ç¼©çš„è´¨é‡ä»¥åŠå‹ç¼©çš„é€Ÿåº¦ï¼š</p>
<p><strong>ä»£ç </strong>æ•´ç†å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å¯ç”¨å¤é€‰æ¡†</strong>ï¼ˆui-checkboxï¼‰ï¼šé»˜è®¤ä¸å¼€å¯ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3662259cd77a4ba58b25da9e2fdf0278~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=0KsWYOcifuW682blzoeFOZwtVFg%3D" alt="" loading="lazy"/></li>
<li><strong>æœ€å°è´¨é‡æ»‘å—</strong>ï¼ˆui-sliderï¼‰ï¼š<code>0-100</code>ï¼Œé»˜è®¤<code>65</code>ï¼Œæ­¥è¿›<code>1</code>ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86eb29babec341c2a83deafd98433c77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=SUWSw5wM2CTpiqAZtDBLWVSeO30%3D" alt="" loading="lazy"/></li>
<li><strong>æœ€å¤§è´¨é‡æ»‘å—</strong>ï¼ˆui-sliderï¼‰ï¼š<code>0-100</code>ï¼Œé»˜è®¤<code>80</code>ï¼Œæ­¥è¿›<code>1</code>ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6f567a3570344e1ae908383059b5f80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=EvCPx6zeWOL2UMEeLQXsINIaTXg%3D" alt="" loading="lazy"/></li>
<li><strong>é€Ÿåº¦æ»‘å—</strong>ï¼ˆui-sliderï¼‰ï¼š<code>1-10</code>ï¼Œé»˜è®¤<code>3</code>ï¼Œæ­¥è¿›<code>1</code>ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40b1baddc0ef4c2d84847e13fb0dd4da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=KZ6F53fujTsWRzmHY9S4xJwc3GY%3D" alt="" loading="lazy"/></li>
<li><strong>æ ¡éªŒæœ€å¤§è´¨é‡&gt;=æœ€å°è´¨é‡</strong>:
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb723730b83e4cd7a84873b890ea7320~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=f1BieoHQpgvtIFLLqjiYgWdtnm4%3D" alt="" loading="lazy"/></li>
</ul>
<p><strong>æœ€å</strong>é€šè¿‡<code>npm install</code>å’Œ<code>npm run build</code>ç¼–è¯‘å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dc8fd1db82c4707a9a8b876b80fe03c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=wuKxh92xl8wloQ%2F99R2LcW%2F4W5s%3D" alt="" loading="lazy"/></p>
<p><strong>æ‰“å¼€</strong>æ„å»ºé¢æ¿å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ·»åŠ çš„å†…å®¹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f09648112a8645af92dd1a05205a7887~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=zZxAFXheaVUKmeT1wUWZCYhOwJ4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">5.æ„å»ºåå‹ç¼©</h3>
<p><strong>ç•Œé¢</strong>æ§åˆ¶æ·»åŠ å®Œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æŠŠ<code>pngquantå‹ç¼©</code>æ¤å…¥åˆ°æ„å»ºå®Œæˆçš„é’©å­ï¼ˆ<code>onAfterBuild</code>ï¼‰é‡Œï¼Œä½¿å…¶æ„å»ºå®Œæˆåè‡ªåŠ¨æŒ‰ç…§é…ç½®çš„å‚æ•°è¿›è¡Œå‹ç¼©ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/855ca681e05c4463b4aca0a6bfbfedc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=WUtzrK7WPNmOZwztSSElM1LnIG8%3D" alt="" loading="lazy"/></p>
<p><strong>ä»£ç </strong>æ•´ç†å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>æ£€æŸ¥</strong>æ˜¯å¦å¯ç”¨äº†è´¨é‡æ§åˆ¶ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5e4b32642014e198f3d611eaa356677~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=QWiXh13B10V07Jzxk2HR1xVhlqs%3D" alt="" loading="lazy"/></li>
<li><strong>æå‰</strong>å‡†å¤‡å¥½å‹ç¼©çš„å·¥å…·ï¼Œè¿™é‡ŒåŒ…æ‹¬<strong>win</strong>å’Œ<strong>mac</strong>çš„ï¼Œå¹¶ä¸”æ ¹æ®ç³»ç»Ÿé€‰æ‹©ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/633f808ba8bb4cb182c47ff7ed00b4cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=800zDDbc2V3eFjci%2F1pTqrSdbZ4%3D" alt="" loading="lazy"/></li>
<li><strong>åœ¨æ„å»ºåç›®å½•</strong>é€’å½’æŸ¥æ‰¾æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa08c16bba334bccb449d17ab1f93c80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=8H4rKaQPmA8f8KepGErzJT3LseE%3D" alt="" loading="lazy"/></li>
<li><strong>ç»„è£…å‘½ä»¤å¼€å§‹é€ä¸ªå‹ç¼©</strong>ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a00e01a3b1a74589b8745a25a68aa468~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=LRuT%2FeTlN9gYqKhyG4wpyopDl%2Fs%3D" alt="" loading="lazy"/></li>
</ul>
<h3 data-id="heading-8">6.æµ‹è¯•</h3>
<p><strong>ç¼–è¯‘</strong>ä»£ç åï¼Œæ‰“å¼€æˆ‘ä»¬çš„æ„å»ºé¢æ¿ï¼Œå¼€å§‹è¿›è¡Œæ„å»ºï¼Œæ„å»ºå®Œæˆåå¯ä»¥ç‚¹å¼€æ—¥å¿—æŸ¥çœ‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c67114a52ec4d2b8e70d9163662edf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=uCiXLPfM7cDHDq8KA4hwIDS7fx0%3D" alt="" loading="lazy"/></p>
<p><strong>ä»æ—¥å¿—</strong>å¯ä»¥çœ‹å‡º<code>åŸæ–‡ä»¶å¤§å°: 1002.9KB, å‹ç¼©åå¤§å°: 179.6KB, å‹ç¼©äº†82.1%</code>ï¼Œæç¤ºå‹ç¼©æˆåŠŸã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78200b21b2de40eebb779eff70784e01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=ZJ0S1bI%2BwKWT4JzwkUo66EdmEVI%3D" alt="" loading="lazy"/></p>
<p><strong>æ‰“å¼€</strong>æ„å»ºå¥½çš„ç›®å½•ï¼Œæ‰¾åˆ°æˆ‘ä»¬çš„èµ„æºï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å‹ç¼©å®Œæˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bb767a138464086a3dcb4f29bdfb039~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=hzeu0zYvUXwFz8kwvcvdO3ewGlI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">å›¾ç‰‡å‹ç¼©è¿›é˜¶</h2>
<h3 data-id="heading-10">1.è¿‡æ»¤</h3>
<p><strong>é€šå¸¸</strong>æ¸¸æˆä¸­ä¼šæœ‰ä¸€äº›å›¾ç‰‡ä¸ºäº†é¿å…æ¨¡ç³Šï¼Œä¾‹å¦‚ä¸»ç•Œé¢ï¼Œä¼šé€šè¿‡é…ç½®çš„æˆ–è€…ç‰¹æ®Šæ–‡ä»¶åå¼€å¤´çš„å½¢å¼è¿›è¡Œè¿‡æ»¤ï¼Œä¸è¿›è¡Œå‹ç¼©ï¼Œå°ä¼™ä¼´ä»¬åœ¨é¢æ¿æˆ–è€…æ–‡ä»¶é…ç½®ï¼Œç„¶åå‹ç¼©å‰è¿‡æ»¤å³å¯ã€‚</p>
<h3 data-id="heading-11">2.è®°å½•</h3>
<p><strong>å›¾ç‰‡æ¯”è¾ƒå¤š</strong>ï¼Œæ¯æ¬¡æ„å»ºè€—æ—¶æ¯”è¾ƒé•¿çš„è¯ï¼Œå¯ä»¥æŠŠå‹ç¼©æå‰åˆ°æ„å»ºä¹‹å‰ï¼Œå¹¶é€šè¿‡<code>MD5</code>è®°å½•è¡¨ç¤ºå›¾ç‰‡å·²ç»å‹ç¼©ï¼Œç›´æ¥è·³è¿‡è¯¥æ–‡ä»¶ï¼Œé¿å…é‡å¤å‹ç¼©ã€‚</p>
<h2 data-id="heading-12">ç»“è¯­</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2641cebd78ea4a40b54ad8cc2ec0f8c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764374812&amp;x-signature=cSNnv8pSVPiBJ8VO3SG48X7m4tA%3D" alt="" loading="lazy"/></p>
<p><strong>é€šè¿‡</strong>å‹ç¼©ï¼Œå°ä¼™ä¼´çš„å›¾ç‰‡èµ„æºä»<code>330M</code>é™åˆ°äº†<code>273M</code>ï¼Œå‹ç¼©äº†<code>18%</code>ã€‚æ„Ÿè§‰å‰©ä½™èµ„æºè¿˜æ˜¯æ¯”è¾ƒå¤§ï¼Œå»ºè®®ä»å…¶ä»–æ–¹å¼è¿›è¡Œæ£€æŸ¥å’Œå¤„ç†ï¼Œä¾‹å¦‚<strong>æŸ¥æ‰¾æ²¡ä¾èµ–çš„èµ„æºåˆ é™¤</strong>ã€<strong>æ‰¾ç¾æœ¯é‡é€ </strong>ç­‰ç­‰ã€‚</p>
<p><strong>ä¸çŸ¥é“å°ä¼™ä¼´ä»¬æœ‰æ²¡æœ‰å…¶ä»–æ›´å¥½çš„åŠæ³•å‘¢ï¼Ÿ</strong></p>
<p>æœ¬æ–‡<strong>æºå·¥ç¨‹</strong>å¯é€šè¿‡<strong>ç§ä¿¡</strong>å‘é€ <strong>PngExtension</strong> è·å–ã€‚</p>
<p><strong>æˆ‘æ˜¯"äº¿å…ƒç¨‹åºå‘˜"ï¼Œä¸€ä½æœ‰ç€8å¹´æ¸¸æˆè¡Œä¸šç»éªŒçš„ä¸»ç¨‹ã€‚åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œå¸Œæœ›èƒ½ç»™åˆ°æ‚¨å¸®åŠ©, ä¹Ÿå¸Œæœ›é€šè¿‡æ‚¨èƒ½å¸®åŠ©åˆ°å¤§å®¶ã€‚</strong></p>
<p>AD:ç¬”è€…çº¿ä¸Šçš„å°æ¸¸æˆã€Šæ‰“èºä¸é—¯å…³ã€‹ã€Šè´ªåƒè›‡æŒæœºç»å…¸ã€‹ã€Šé‡åŠ›è¿·å®«çƒã€‹ã€Šå¡«è‰²ä¹‹æ—…ã€‹ã€Šæ–¹å—æŒæœºç»å…¸ã€‹å¤§å®¶å¯ä»¥è‡ªè¡Œç‚¹å‡»æœç´¢ä½“éªŒã€‚</p>
<p>å®ä¸ç›¸ç’ï¼Œæƒ³è¦ä¸ª<strong>èµ</strong>å’Œ<strong>çˆ±å¿ƒ</strong>ï¼è¯·æŠŠè¯¥æ–‡ç« <strong>åˆ†äº«</strong>ç»™ä½ è§‰å¾—æœ‰éœ€è¦çš„å…¶ä»–å°ä¼™ä¼´ã€‚è°¢è°¢ï¼</p>
<p>æ¨èä¸“æ ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3175880857546129410%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3175880857546129410#wechat_redirect" ref="nofollow noopener noreferrer">çŸ¥è¯†ä»˜è´¹ä¸“æ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26mid%3D2247487282%26idx%3D1%26sn%3De3cb8ab6f5c0d5f804d5c29e2e90b9ad%26chksm%3Dc00daec5f77a27d33933e877464d8cde24c4c947d3755f5e8262c634634617e7c26de3953a54%26token%3D336413522%26lang%3Dzh_CN%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg5NTY2MjIzMg==&amp;mid=2247487282&amp;idx=1&amp;sn=e3cb8ab6f5c0d5f804d5c29e2e90b9ad&amp;chksm=c00daec5f77a27d33933e877464d8cde24c4c947d3755f5e8262c634634617e7c26de3953a54&amp;token=336413522&amp;lang=zh_CN#rd" ref="nofollow noopener noreferrer">ä½ çŸ¥é“å’Œä¸çŸ¥é“çš„å¾®ä¿¡å°æ¸¸æˆå¸¸ç”¨APIæ•´ç†ï¼Œèµ¶ç´§æ”¶è—ç”¨èµ·æ¥~</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3207702867494305797%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3207702867494305797#wechat_redirect" ref="nofollow noopener noreferrer">100ä¸ªCocoså®ä¾‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3073771187570999299%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3073771187570999299#wechat_redirect" ref="nofollow noopener noreferrer">8å¹´ä¸»ç¨‹æ‰‹æŠŠæ‰‹æ‰“é€ Cocosç‹¬ç«‹æ¸¸æˆå¼€å‘æ¡†æ¶</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzg5NTY2MjIzMg%3D%3D%26action%3Dgetalbum%26album_id%3D3121583619634626562%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg5NTY2MjIzMg==&amp;action=getalbum&amp;album_id=3121583619634626562#wechat_redirect" ref="nofollow noopener noreferrer">å’Œ8å¹´æ¸¸æˆä¸»ç¨‹ä¸€èµ·å­¦ä¹ è®¾è®¡æ¨¡å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3Faction%3Dgetalbum%26__biz%3DMzg5NTY2MjIzMg%3D%3D%26scene%3D1%26album_id%3D3038883468588089350%26count%3D3%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?action=getalbum&amp;__biz=Mzg5NTY2MjIzMg==&amp;scene=1&amp;album_id=3038883468588089350&amp;count=3#wechat_redirect" ref="nofollow noopener noreferrer">ä»é›¶å¼€å§‹å¼€å‘è´ªåƒè›‡å°æ¸¸æˆåˆ°ä¸Šçº¿ç³»åˆ—</a></p>
<p>ç‚¹å‡»ä¸‹æ–¹ç°è‰²æŒ‰é’®+å…³æ³¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactæ€§èƒ½ç¿»å€ï¼90%å¼€å‘è€…å¿½ç•¥çš„5ä¸ªHooksæœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7575015480198610996</link>    <guid>https://juejin.cn/post/7575015480198610996</guid>    <pubDate>2025-11-22T00:17:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575015480198610996" data-draft-id="7574992086715809807" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactæ€§èƒ½ç¿»å€ï¼90%å¼€å‘è€…å¿½ç•¥çš„5ä¸ªHooksæœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-22T00:17:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactæ€§èƒ½ç¿»å€ï¼90%å¼€å‘è€…å¿½ç•¥çš„5ä¸ªHooksæœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T00:17:36.000Z" title="Sat Nov 22 2025 00:17:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Reactæ€§èƒ½ç¿»å€ï¼90%å¼€å‘è€…å¿½ç•¥çš„5ä¸ªHooksæœ€ä½³å®è·µ</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>React Hooksè‡ª2019å¹´æ¨å‡ºä»¥æ¥ï¼Œå½»åº•æ”¹å˜äº†å¼€å‘è€…ç¼–å†™Reactç»„ä»¶çš„æ–¹å¼ã€‚å®ƒä»¬æä¾›äº†æ›´ç®€æ´çš„ä»£ç ç»„ç»‡å’Œæ›´å¥½çš„é€»è¾‘å¤ç”¨èƒ½åŠ›ã€‚ç„¶è€Œï¼Œéšç€Hooksçš„æ™®åŠï¼Œè®¸å¤šå¼€å‘è€…åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¿½ç•¥äº†å…¶æ€§èƒ½ä¼˜åŒ–çš„æ½œåŠ›ã€‚äº‹å®ä¸Šï¼Œé€šè¿‡éµå¾ªä¸€äº›æœ€ä½³å®è·µï¼Œä½ å¯ä»¥æ˜¾è‘—æå‡Reactåº”ç”¨çš„æ€§èƒ½ï¼Œç”šè‡³åœ¨æŸäº›åœºæ™¯ä¸‹å®ç°æ€§èƒ½ç¿»å€çš„æ•ˆæœã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªè¢«90%å¼€å‘è€…å¿½ç•¥çš„Hooksæœ€ä½³å®è·µï¼Œè¿™äº›å®è·µä¸ä»…èƒ½ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ï¼Œè¿˜èƒ½å‡å°‘ä¸å¿…è¦çš„å‰¯ä½œç”¨å’Œå†…å­˜æ¶ˆè€—ã€‚æ— è®ºä½ æ˜¯Reactæ–°æ‰‹è¿˜æ˜¯èµ„æ·±å¼€å‘è€…ï¼Œè¿™äº›æŠ€å·§éƒ½å°†å¸®åŠ©ä½ å†™å‡ºæ›´é«˜æ•ˆçš„ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. åˆç†ä½¿ç”¨<code>useMemo</code>å’Œ<code>useCallback</code>ï¼šé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œé‡æ¸²æŸ“</h3>
<h4 data-id="heading-4">é—®é¢˜èƒŒæ™¯</h4>
<p>è®¸å¤šå¼€å‘è€…è¿‡åº¦ä¾èµ–<code>useMemo</code>å’Œ<code>useCallback</code>ï¼Œè®¤ä¸ºå®ƒä»¬èƒ½â€œè‡ªåŠ¨â€ä¼˜åŒ–æ€§èƒ½ã€‚ç„¶è€Œï¼Œæ»¥ç”¨è¿™ä¸¤ä¸ªHookåè€Œä¼šå¢åŠ å†…å­˜å¼€é”€ï¼ˆå› ä¸ºéœ€è¦å­˜å‚¨é¢å¤–çš„ä¾èµ–é¡¹å’Œç¼“å­˜å€¼ï¼‰ã€‚å…³é”®åœ¨äº<strong>åªåœ¨å¿…è¦æ—¶ä½¿ç”¨å®ƒä»¬</strong>ã€‚</p>
<h4 data-id="heading-5">æœ€ä½³å®è·µ</h4>
<ul>
<li><strong>ä½•æ—¶ç”¨<code>useMemo</code></strong>ï¼šå½“è®¡ç®—æˆæœ¬é«˜æ˜‚ï¼ˆå¦‚å¤§å‹æ•°ç»„æ’åºã€å¤æ‚å¯¹è±¡æ¨å¯¼ï¼‰ä¸”ä¾èµ–é¡¹å˜åŒ–ä¸é¢‘ç¹æ—¶ã€‚</li>
<li><strong>ä½•æ—¶ç”¨<code>useCallback</code></strong>ï¼šå½“å‡½æ•°ä½œä¸ºå­ç»„ä»¶çš„propsä¼ é€’ä¸”å­ç»„ä»¶ä¾èµ–å¼•ç”¨ç›¸ç­‰æ€§ï¼ˆå¦‚<code>React.memo</code>ä¼˜åŒ–çš„ç»„ä»¶ï¼‰ã€‚</li>
<li><strong>åä¾‹</strong>ï¼šå¯¹ç®€å•è®¡ç®—æˆ–é«˜é¢‘æ›´æ–°çš„å€¼ä½¿ç”¨è¿™äº›Hookå¯èƒ½å¾—ä¸å¿å¤±ã€‚</li>
</ul>
<h4 data-id="heading-6">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> expensiveValue = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">computeExpensiveValue</span>(a, b), [a, b]);
<span class="hljs-keyword">const</span> handleClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">doSomething</span>(a, b), [a, b]);
</code></pre>
<h4 data-id="heading-7">æ•°æ®æ”¯æŒ</h4>
<p>æ ¹æ®Reactå®˜æ–¹æ–‡æ¡£ï¼Œ<code>useMemo</code>å’Œ<code>useCallback</code>çš„å¼€é”€çº¦ä¸ºæ¯æ¬¡æ¸²æŸ“é¢å¤–0.1ms~0.5msï¼ˆå–å†³äºç¯å¢ƒï¼‰ã€‚å› æ­¤ï¼Œåªæœ‰å½“è®¡ç®—æˆæœ¬é«˜äºæ­¤é˜ˆå€¼æ—¶æ‰å€¼å¾—ä½¿ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-8">2. <code>useEffect</code>çš„ä¾èµ–æ•°ç»„é™·é˜±ï¼šæ­£ç¡®å¤„ç†å‰¯ä½œç”¨</h3>
<h4 data-id="heading-9">é—®é¢˜èƒŒæ™¯</h4>
<p>è®¸å¤šå¼€å‘è€…ä¼šåœ¨ä¾èµ–æ•°ç»„ä¸­é—æ¼å…³é”®å˜é‡æˆ–ç›²ç›®åŒ…å«æ‰€æœ‰å˜é‡ï¼Œå¯¼è‡´æ— é™å¾ªç¯æˆ–ä¸å¿…è¦çš„å‰¯ä½œç”¨æ‰§è¡Œã€‚</p>
<h4 data-id="heading-10">æœ€ä½³å®è·µ</h4>
<ul>
<li><strong>æœ€å°åŒ–ä¾èµ–é¡¹</strong>ï¼šåªåŒ…å«çœŸæ­£å½±å“å‰¯ä½œç”¨çš„å˜é‡ã€‚å¦‚æœæŸäº›å˜é‡æ˜¯ç¨³å®šçš„ï¼ˆå¦‚dispatchå‡½æ•°ï¼‰ï¼Œå¯ä»¥å®‰å…¨çœç•¥ã€‚</li>
<li><strong>ä½¿ç”¨å‡½æ•°å¼æ›´æ–°</strong>ï¼šå¯¹äºåŸºäºå‰å€¼çš„çŠ¶æ€æ›´æ–°ï¼ˆå¦‚è®¡æ•°å™¨ï¼‰ï¼Œä½¿ç”¨å›è°ƒå½¢å¼é¿å…ä¾èµ–å½“å‰çŠ¶æ€å€¼ï¼š
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>); <span class="hljs-comment">// âœ… No dependency on `count`</span>
  }, <span class="hljs-number">1000</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
}, []);
</code></pre>
</li>
<li><strong>æ‹†åˆ†æ— å…³é€»è¾‘</strong>ï¼šå°†ä¸ç›¸å…³çš„å‰¯ä½œç”¨æ‹†åˆ†åˆ°å¤šä¸ª<code>useEffect</code>ä¸­ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">3. <code>useReducer</code>:  å¤æ‚çŠ¶æ€ç®¡ç†çš„ç§˜å¯†æ­¦å™¨</h3>
<h4 data-id="heading-12">é—®é¢˜èƒŒæ™¯</h4>
<p>å½“çŠ¶æ€é€»è¾‘å˜å¾—å¤æ‚æ—¶ï¼ˆå¤šä¸ªç›¸äº’å…³è”çš„çŠ¶æ€ã€åµŒå¥—æ›´æ–°ï¼‰ï¼Œå•çº¯ç”¨å¤šä¸ª<code>useState</code>ä¼šå¯¼è‡´ä»£ç è‡ƒè‚¿ä¸”éš¾ä»¥ç»´æŠ¤ã€‚</p>
<h4 data-id="heading-13">æœ€ä½³å®è·µ</h4>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
<ol>
<li>stateä¹‹é—´å­˜åœ¨å¤æ‚å…³ç³»ï¼ˆå¦‚è¡¨å•éªŒè¯ï¼‰ã€‚</li>
<li>stateæ›´æ–°é€»è¾‘æ¶‰åŠå¤šæ­¥æ“ä½œã€‚</li>
<li>stateç»“æ„è¾ƒæ·±ï¼ˆéœ€æ·±å±‚æ›´æ–°ï¼‰ã€‚</li>
</ol>
</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼š
<ol>
<li><strong>é›†ä¸­åŒ–é€»è¾‘</strong>ï¼šå°†æ‰€æœ‰çŠ¶æ€å˜æ›´é›†ä¸­åœ¨reducerä¸­ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå‡å°‘è§¦å‘å¤šæ¬¡æ¸²æŸ“çš„é£é™©ã€‚</li>
<li><strong>å¯æµ‹è¯•æ€§</strong>ï¼šçº¯å‡½æ•°reduceræ˜“äºå•å…ƒæµ‹è¯•ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-14">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> [state, dispatch] = <span class="hljs-title function_">useReducer</span>(reducer, initialState);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'increment'</span>:
      <span class="hljs-keyword">return</span> { ...state, <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + action.<span class="hljs-property">payload</span> };
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>();
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-15">4. <code>useRef</code>:  ä¸åªæ˜¯DOMå¼•ç”¨çš„å·¥å…·</h3>
<h4 data-id="heading-16">Problem Background</h4>
<p>å¤§å¤šæ•°å¼€å‘è€…ä»…ç”¨refæ¥è®¿é—®DOMå…ƒç´ ï¼Œå´å¿½ç•¥äº†å®ƒåœ¨å­˜å‚¨å¯å˜å€¼æ—¶çš„ä»·å€¼â€”â€”å°¤å…¶æ˜¯åœ¨ä¸éœ€è¦è§¦å‘é‡æ–°æ¸²æŸ“çš„åœºæ™¯ä¸­ã€‚</p>
<h4 data-id="heading-17">Best Practices</h4>
<ol>
<li><strong>è·¨æ¸²æŸ“æŒä¹…åŒ–æ•°æ®</strong>:</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> renderCount = <span class="hljs-title function_">useRef</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// Won't trigger re-render when changed</span>
</code></pre>
<ol start="2">
<li><strong>å­˜å‚¨å®šæ—¶å™¨/è®¢é˜…ID</strong>:</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
 timerRef.<span class="hljs-property">current</span> = <span class="hljs-built_in">setInterval</span>(...);
 <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timerRef.<span class="hljs-property">current</span>);
}, []);
</code></pre>
<ol start="3">
<li><strong>é¿å…é—­åŒ…é™·é˜±</strong>:</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> latestValue = <span class="hljs-title function_">useRef</span>(value);
latestValue.<span class="hljs-property">current</span> = value; <span class="hljs-comment">// Always up-to-date in callbacks</span>
</code></pre>
<hr/>
<p>###5ï¼è‡ªå®šä¹‰Hookçš„ç»„åˆè‰ºæœ¯</p>
<p>####Why It Matters<br/>
è‡ªå®šä¹‰Hookæ˜¯Reacté€»è¾‘å¤ç”¨çš„ç»ˆææ–¹æ¡ˆâ”€â”€ä½†è®¾è®¡ä¸å½“ä¼šå¯¼è‡´æ€§èƒ½é»‘æ´æˆ–è¿åHookè§„åˆ™.</p>
<p>####Golden Rules<br/>
âœ…ä»¥"use"å‰ç¼€å‘½å(å¼ºåˆ¶ESLintæ£€æŸ¥)<br/>
âœ…éš”ç¦»æ— å…³è”é€»è¾‘åˆ°ç‹¬ç«‹Hooks<br/>
âœ…è¿”å›ç¨³å®šå¼•ç”¨:åˆ©ç”¨memoizationä¿è¯è¿”å›å€¼ä¸€è‡´æ€§</p>
<p>Example: Optimized Data Fetching Hook</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useUserData</span>(<span class="hljs-params">userId</span>) {      
 <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);      
 <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);      

 <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {        
    <span class="hljs-keyword">let</span> didCancel = <span class="hljs-literal">false</span>;        

    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/users/<span class="hljs-subst">${userId}</span>`</span>)          
     .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> !didCancel &amp;&amp; <span class="hljs-title function_">setData</span>(res))          
     .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> !didCancel &amp;&amp; <span class="hljs-title function_">setError</span>(err));        

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> { didCancel = <span class="hljs-literal">true</span> };      
 }, [userId]);      

 <span class="hljs-keyword">return</span> { data, error };    
}    
</code></pre>
<hr/>
<h2 data-id="heading-18">Conclusion</h2>
<p>Mastering React Hooks isn't just about knowing their API surfaceâ€”it's about deeply understanding their performance characteristics and composing them effectivelyï¼The five practices we've covered today:</p>
<p>1ï¸âƒ£ Strategic memoization with <code>useMemo/useCallback</code>
2ï¸âƒ£ Precise dependency management in <code>useEffect</code>
3ï¸âƒ£ Leveraging <code>useReducer</code>s for complex state flows
4ï¸âƒ£ Unlocking the full potential of <code>useRef</code>
5ï¸âƒ£ Designing high-performance custom Hooks</p>
<p>Adopting these patterns can lead to dramatic performance improvementsâ€”sometimes even doubling rendering speeds in heavy component treesï¼The key is thoughtful application rather than blind adherenceï¼</p>
<p>Remember: Premature optimization is still the root of all evilï¼Profile first with React DevTools before applying these techniques!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ138ï¼‰ Redisçš„æ¨¡å—å¦‚ä½•å¼€å‘ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7575004291833102387</link>    <guid>https://juejin.cn/post/7575004291833102387</guid>    <pubDate>2025-11-21T23:05:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575004291833102387" data-draft-id="7575017581036781606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ138ï¼‰ Redisçš„æ¨¡å—å¦‚ä½•å¼€å‘ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-21T23:05:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ138ï¼‰ Redisçš„æ¨¡å—å¦‚ä½•å¼€å‘ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-21T23:05:43.000Z" title="Fri Nov 21 2025 23:05:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Redis æ¨¡å—å¼€å‘æ˜¯ä¸€ç§æ‰©å±• Redis åŠŸèƒ½çš„å¼ºå¤§æ–¹å¼ã€‚é€šè¿‡æ¨¡å—ï¼Œå¼€å‘è€…å¯ä»¥å‘ Redis æ·»åŠ æ–°çš„å‘½ä»¤ã€æ•°æ®ç±»å‹ã€äº‹ä»¶å¤„ç†å™¨ç­‰ã€‚ä»¥ä¸‹æ˜¯å¼€å‘ Redis æ¨¡å—çš„è¯¦ç»†æ­¥éª¤ï¼ŒåŒ…æ‹¬å¿…è¦çš„ä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">1. åŒ…å«å¿…è¦çš„å¤´æ–‡ä»¶</h3>
<p>é¦–å…ˆï¼Œéœ€è¦åŒ…å« Redis æ¨¡å— API çš„å¤´æ–‡ä»¶ <code>redismodule.h</code>ã€‚è¯¥å¤´æ–‡ä»¶å®šä¹‰äº†å¼€å‘æ¨¡å—æ‰€éœ€çš„æ‰€æœ‰å‡½æ•°å’Œå®ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"redismodule.h"</span></span>
</code></pre>
<h3 data-id="heading-1">2. å®ç°æ¨¡å—å‘½ä»¤</h3>
<p>æ¯ä¸ªæ¨¡å—å‘½ä»¤å¯¹åº”ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚è¿™äº›å‡½æ•°éœ€è¦éµå¾ªç‰¹å®šçš„ç­¾åï¼Œå³è¿”å› <code>int</code> ç±»å‹ï¼Œå¹¶æ¥å— <code>RedisModuleCtx *ctx, RedisModuleString **argv, int argc</code> ä½œä¸ºå‚æ•°ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤å¤„ç†å‡½æ•°ç¤ºä¾‹ï¼Œè¯¥å‘½ä»¤è¿”å› "Hello, World!" å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">HelloWorldCommand</span><span class="hljs-params">(RedisModuleCtx *ctx, RedisModuleString **argv, <span class="hljs-type">int</span> argc)</span> {
    <span class="hljs-keyword">if</span> (argc != <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> RedisModule_WrongArity(ctx);
    }
    RedisModule_ReplyWithSimpleString(ctx, <span class="hljs-string">"Hello, World!"</span>);
    <span class="hljs-keyword">return</span> REDISMODULE_OK;
}
</code></pre>
<h3 data-id="heading-2">3. æ¨¡å—åˆå§‹åŒ–å‡½æ•°</h3>
<p>æ¨¡å—åˆå§‹åŒ–å‡½æ•°ç”¨äºæ³¨å†Œæ¨¡å—å’Œå‘½ä»¤ã€‚é€šè¿‡è°ƒç”¨ <code>RedisModule_Init</code> å‡½æ•°åˆå§‹åŒ–æ¨¡å—ï¼Œå¹¶ä½¿ç”¨ <code>RedisModule_CreateCommand</code> å‡½æ•°æ³¨å†Œå‘½ä»¤ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">RedisModule_OnLoad</span><span class="hljs-params">(RedisModuleCtx *ctx, RedisModuleString **argv, <span class="hljs-type">int</span> argc)</span> {
    <span class="hljs-keyword">if</span> (RedisModule_Init(ctx, <span class="hljs-string">"hello"</span>, <span class="hljs-number">1</span>, REDISMODULE_APIVER_1) == REDISMODULE_ERR) {
        <span class="hljs-keyword">return</span> REDISMODULE_ERR;
    }
    <span class="hljs-keyword">if</span> (RedisModule_CreateCommand(ctx, <span class="hljs-string">"hello.world"</span>, HelloWorldCommand, <span class="hljs-string">"readonly"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) == REDISMODULE_ERR) {
        <span class="hljs-keyword">return</span> REDISMODULE_ERR;
    }
    <span class="hljs-keyword">return</span> REDISMODULE_OK;
}
</code></pre>
<h3 data-id="heading-3">4. ç¼–è¯‘æ¨¡å—</h3>
<p>å°†ä¸Šè¿°ä»£ç ä¿å­˜ä¸º <code>hello.c</code> æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ä¸ºåŠ¨æ€åº“ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">gcc -fPIC -shared -o hello.so hello.c -I/path/to/redis/src
</code></pre>
<p>æ³¨æ„ï¼š<code>-fPIC</code> é€‰é¡¹ç”¨äºç”Ÿæˆä½ç½®æ— å…³ä»£ç ï¼Œ<code>-shared</code> é€‰é¡¹ç”¨äºç”Ÿæˆå…±äº«åº“ï¼Œ<code>-I</code> é€‰é¡¹æŒ‡å®š Redis æºä»£ç çš„è·¯å¾„ã€‚</p>
<h3 data-id="heading-4">5. åŠ è½½å’Œä½¿ç”¨æ¨¡å—</h3>
<p>é€šè¿‡ Redis å®¢æˆ·ç«¯åŠ è½½æ¨¡å—ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">redis-cli MODULE LOAD ./hello.so
</code></pre>
<p>åŠ è½½æˆåŠŸåï¼Œå¯ä»¥ä½¿ç”¨æ–°å‘½ä»¤ <code>hello.world</code>ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">redis&gt; hello.world
<span class="hljs-string">"Hello, World!"</span>
</code></pre>
<h3 data-id="heading-5">å¤æ‚æ¨¡å—ç¤ºä¾‹ï¼šè®¡æ•°å™¨æ¨¡å—</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨æ¨¡å—ï¼Œè¯¥æ¨¡å—æ”¯æŒä¸¤ä¸ªå‘½ä»¤ <code>counter.incr</code> å’Œ <code>counter.get</code>ï¼Œåˆ†åˆ«ç”¨äºå¢åŠ è®¡æ•°å™¨å’Œè·å–å½“å‰è®¡æ•°ã€‚</p>
<h4 data-id="heading-6">1. åŒ…å«å¤´æ–‡ä»¶</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"redismodule.h"</span></span>
</code></pre>
<h4 data-id="heading-7">2. å®šä¹‰å…¨å±€å˜é‡</h4>
<p>å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡è¡¨ç¤ºè®¡æ•°å™¨çš„å€¼ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> counter = <span class="hljs-number">0</span>;
</code></pre>
<h4 data-id="heading-8">3. å®ç°å‘½ä»¤å¤„ç†å‡½æ•°</h4>
<p>å®ç° <code>counter.incr</code> å’Œ <code>counter.get</code> å‘½ä»¤çš„å¤„ç†å‡½æ•°ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">CounterIncrCommand</span><span class="hljs-params">(RedisModuleCtx *ctx, RedisModuleString **argv, <span class="hljs-type">int</span> argc)</span> {
    <span class="hljs-keyword">if</span> (argc != <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> RedisModule_WrongArity(ctx);
    }
    counter++;
    RedisModule_ReplyWithLongLong(ctx, counter);
    <span class="hljs-keyword">return</span> REDISMODULE_OK;
}

<span class="hljs-type">int</span> <span class="hljs-title function_">CounterGetCommand</span><span class="hljs-params">(RedisModuleCtx *ctx, RedisModuleString **argv, <span class="hljs-type">int</span> argc)</span> {
    <span class="hljs-keyword">if</span> (argc != <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> RedisModule_WrongArity(ctx);
    }
    RedisModule_ReplyWithLongLong(ctx, counter);
    <span class="hljs-keyword">return</span> REDISMODULE_OK;
}
</code></pre>
<h4 data-id="heading-9">4. æ¨¡å—åˆå§‹åŒ–å‡½æ•°</h4>
<p>åœ¨æ¨¡å—åˆå§‹åŒ–å‡½æ•°ä¸­æ³¨å†Œ <code>counter.incr</code> å’Œ <code>counter.get</code> å‘½ä»¤ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">int</span> <span class="hljs-title function_">RedisModule_OnLoad</span><span class="hljs-params">(RedisModuleCtx *ctx, RedisModuleString **argv, <span class="hljs-type">int</span> argc)</span> {
    <span class="hljs-keyword">if</span> (RedisModule_Init(ctx, <span class="hljs-string">"counter"</span>, <span class="hljs-number">1</span>, REDISMODULE_APIVER_1) == REDISMODULE_ERR) {
        <span class="hljs-keyword">return</span> REDISMODULE_ERR;
    }
    <span class="hljs-keyword">if</span> (RedisModule_CreateCommand(ctx, <span class="hljs-string">"counter.incr"</span>, CounterIncrCommand, <span class="hljs-string">"write"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) == REDISMODULE_ERR) {
        <span class="hljs-keyword">return</span> REDISMODULE_ERR;
    }
    <span class="hljs-keyword">if</span> (RedisModule_CreateCommand(ctx, <span class="hljs-string">"counter.get"</span>, CounterGetCommand, <span class="hljs-string">"readonly"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) == REDISMODULE_ERR) {
        <span class="hljs-keyword">return</span> REDISMODULE_ERR;
    }
    <span class="hljs-keyword">return</span> REDISMODULE_OK;
}
</code></pre>
<h4 data-id="heading-10">5. ç¼–è¯‘å’ŒåŠ è½½æ¨¡å—</h4>
<p>å°†ä»£ç ä¿å­˜ä¸º <code>counter.c</code> æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ä¸ºåŠ¨æ€åº“ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">gcc -fPIC -shared -o counter.so counter.c -I/path/to/redis/src
</code></pre>
<p>ç„¶åï¼Œé€šè¿‡ Redis å®¢æˆ·ç«¯åŠ è½½æ¨¡å—ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">redis-cli MODULE LOAD ./counter.so
</code></pre>
<p>åŠ è½½æˆåŠŸåï¼Œå¯ä»¥ä½¿ç”¨æ–°å‘½ä»¤ <code>counter.incr</code> å’Œ <code>counter.get</code>ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">redis&gt; counter.incr
(<span class="hljs-built_in">integer</span>) 1
redis&gt; counter.incr
(<span class="hljs-built_in">integer</span>) 2
redis&gt; counter.get
(<span class="hljs-built_in">integer</span>) 2
</code></pre>
<h3 data-id="heading-11">æ€»ç»“</h3>
<p>Redis æ¨¡å—å¼€å‘å…è®¸å¼€å‘è€…é€šè¿‡ç¼–å†™ C ä»£ç åŠ¨æ€æ‰©å±• Redis çš„åŠŸèƒ½ã€‚å¼€å‘æ­¥éª¤åŒ…æ‹¬åŒ…å«æ¨¡å— API å¤´æ–‡ä»¶ã€å®šä¹‰æ¨¡å—ä¸Šä¸‹æ–‡ã€å®ç°å‘½ä»¤å¤„ç†å‡½æ•°ã€æ³¨å†Œå‘½ä»¤ä»¥åŠç¼–è¯‘å’ŒåŠ è½½æ¨¡å—ã€‚é€šè¿‡ä¸Šè¿°ç®€å•ç¤ºä¾‹å’Œå¤æ‚ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•å®ç°è‡ªå®šä¹‰å‘½ä»¤ï¼Œå¹¶åœ¨ Redis ä¸­åŠ è½½å’Œä½¿ç”¨è¿™äº›å‘½ä»¤ã€‚é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦æ‰©å±• Redis çš„åŠŸèƒ½ï¼Œä¸ºç‰¹å®šåº”ç”¨åœºæ™¯æä¾›æ›´å¼ºå¤§çš„æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>