<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[.NET è¿›é˜¶ â€”â€” æ·±å…¥ç†è§£çº¿ç¨‹ï¼ˆ3ï¼‰ThreadPool ä¸ Task å…¥é—¨ï¼šä»æ‰‹åŠ¨çº¿ç¨‹åˆ°æ± åŒ–ä»»åŠ¡çš„å‡çº§]]></title>    <link>https://juejin.cn/post/7586585688005607465</link>    <guid>https://juejin.cn/post/7586585688005607465</guid>    <pubDate>2025-12-23T05:12:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585688005607465" data-draft-id="7585476892976103458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=".NET è¿›é˜¶ â€”â€” æ·±å…¥ç†è§£çº¿ç¨‹ï¼ˆ3ï¼‰ThreadPool ä¸ Task å…¥é—¨ï¼šä»æ‰‹åŠ¨çº¿ç¨‹åˆ°æ± åŒ–ä»»åŠ¡çš„å‡çº§"/> <meta itemprop="keywords" content=".NET,C#"/> <meta itemprop="datePublished" content="2025-12-23T05:12:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘è¦æ‹¿å¾®è½¯MVP"/> <meta itemprop="url" content="https://juejin.cn/user/1945461219656633"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            .NET è¿›é˜¶ â€”â€” æ·±å…¥ç†è§£çº¿ç¨‹ï¼ˆ3ï¼‰ThreadPool ä¸ Task å…¥é—¨ï¼šä»æ‰‹åŠ¨çº¿ç¨‹åˆ°æ± åŒ–ä»»åŠ¡çš„å‡çº§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1945461219656633/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘è¦æ‹¿å¾®è½¯MVP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:12:14.000Z" title="Tue Dec 23 2025 05:12:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ThreadPoolçº¿ç¨‹æ± </h2>
<p><code>ThreadPool</code>çº¿ç¨‹æ± æ˜¯<code>.NET Framework 2.0</code>æ—¶ä»£çš„äº§ç‰©ï¼Œ<code>.NET CORE</code>æ—¶ä»£ä¸‹ç”¨çš„å¾ˆå°‘ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦ç†è§£<code>ThreadPool</code>çº¿ç¨‹æ± ï¼Œå› ä¸ºæœ‰åŠ©äºç†è§£åç»­çš„<code>Task</code>ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-1">1.1 ä¸ºä»€ä¹ˆè¦ç”¨åˆ°<code>ThreadPool</code>çº¿ç¨‹æ± ï¼Ÿ</h3>
<p>å¦‚æœæˆ‘ä»¬åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä½¿ç”¨<code>Thread</code>åˆ›å»ºçº¿ç¨‹ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-cs" lang="cs">            <span class="hljs-comment">// ä½¿ç”¨Threadæ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹</span>
            {
                Thread thread1 = <span class="hljs-keyword">new</span> Thread(() =&gt;
                {
                    Console.WriteLine(<span class="hljs-string">$"åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹IDä¸ºï¼š<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>"</span>);
                });
                thread1.Start();
                Thread thread2 = <span class="hljs-keyword">new</span> Thread(() =&gt;
                {
                    Console.WriteLine(<span class="hljs-string">$"åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹IDä¸ºï¼š<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>"</span>);
                });
                thread2.Start();
                <span class="hljs-comment">// é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼š</span>
                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
                {
                    <span class="hljs-keyword">new</span> Thread(() =&gt;
                    {
                        Console.WriteLine(<span class="hljs-string">$"åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹IDä¸ºï¼š<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>"</span>);
                    }).Start();
                }
            }
</code></pre>
<p><strong>è¿è¡Œç»“æœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8f6f5445b3540fabcf9a68b35393507~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5ou_5b6u6L2vTVZQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767071534&amp;x-signature=WdLqcSuTNdvkChY%2FuQnooE%2BvNgo%3D" alt="image.png" loading="lazy"/></p>
<p>ç»“æœéå¸¸ç‰›é€¼å…‹æ‹‰æ–¯å•Šï¼Œç›´æ¥åˆ›å»ºäº†ä¸€ç™¾å¤šä¸ªçº¿ç¨‹ï¼Œå‡ ä¹æ˜¯æ²¡æœ‰é‡å¤çš„ã€‚å¹¶ä¸”è¿™é‡Œåªæ˜¯æ¨¡æ‹Ÿ100ä¸ªå¹¶å‘ï¼Œå‡å¦‚æœ‰ä¸€ä¸‡ä¸ªå‘¢ï¼Ÿè¦çŸ¥é“æˆ‘ä»¬æ™®é€šçš„ç”µè„‘æ€»å…±çš„çº¿ç¨‹æ‰åªæœ‰å‡ åƒä¸ªã€‚æ‰€ä»¥ç”¨<code>Thread</code>æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ˜¯éå¸¸ä¸å¯å–çš„ã€‚é‚£å’‹åŠå‘¢ï¼Ÿ</p>
<p>ä¸ºäº†ä¸è®©æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹ï¼Œ<code>.NET</code>éå¸¸è´´å¿ƒçš„å¸®æˆ‘ä»¬åˆ›å»ºå¥½äº†çº¿ç¨‹ã€‚<strong>å®ƒæŠŠè¿™äº›åˆ›å»ºå¥½çš„çº¿ç¨‹æ”¾åœ¨ä¸€ä¸ªæ± å­é‡Œï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ç”¨åˆ°å…¶ä»–çº¿ç¨‹ï¼Œé‚£å°±ä»æ± å­é‡Œæ‹¿å°±è¡Œï¼Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±åˆ›å»ºã€‚</strong></p>
<p><strong><code>.NET</code>å°†è¿™æ ·è£…æœ‰å¾ˆå¤šçº¿ç¨‹çš„æ± å­å‘½åä¸ºçº¿ç¨‹æ± <code>ThreadPool</code></strong> ,æˆ‘ä»¬æ¥çœ‹çœ‹çº¿ç¨‹æ± çš„å¼ºå¤§ä¹‹å¤„ï¼ˆç°åœ¨ä¸éœ€è¦èƒ½ç†è§£ä¸‹é¢çš„ä»£ç ï¼Œåªéœ€è¦å…³æ³¨æ‰§è¡Œç»“æœï¼ï¼ï¼ï¼‰ï¼š</p>
<pre><code class="hljs language-cs" lang="cs">            <span class="hljs-comment">// ä½¿ç”¨çº¿ç¨‹æ± çš„çº¿ç¨‹</span>
            {
                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
                {
                    ThreadPool.QueueUserWorkItem(_ =&gt;
                    {
                        Console.WriteLine(<span class="hljs-string">$"åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹IDä¸ºï¼š<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>"</span>);
                    });
                }
                Thread.Sleep(<span class="hljs-number">2000</span>); <span class="hljs-comment">// ç­‰ä»»åŠ¡å®Œæˆ</span>
            }

</code></pre>
<p><strong>è¿è¡Œç»“æœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f11a6b644f24c8abb430b7f40acc4df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5ou_5b6u6L2vTVZQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767071534&amp;x-signature=GlgeIyHF0PM55n9MsxGg2MlLtnE%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ•ˆæœéå¸¸æ˜æ˜¾ï¼ŒåŸæœ¬è¦åˆ›å»ºå‡º100å¤šä¸ªçº¿ç¨‹ï¼Œç°åœ¨ï¼Œåªéœ€è¦çº¿ç¨‹æ± ç»™æˆ‘ä»¬åˆ›å»ºå¥½çš„é‚£å‡ ä¸ªçº¿ç¨‹å°±è¡Œäº†ï¼Œçº¿ç¨‹å¤ç”¨ç‡å¤§å¤§æé«˜ï¼</p>
<h3 data-id="heading-2">1.2 <code>ThreadPool</code>çº¿ç¨‹æ± çš„å·¥ä½œåŸç†</h3>
<p>çœ‹å®Œ 1.1 çš„å¯¹æ¯”ï¼Œæ˜¯ä¸æ˜¯å¥½å¥‡ï¼šä¸ºå•¥çº¿ç¨‹æ± èƒ½è¿™ä¹ˆç‰›ï¼Ÿ100 ä¸ªä»»åŠ¡åªå¤ç”¨å‡ ä¸ªçº¿ç¨‹å°±æå®šï¼Ÿ</p>
<p><strong>é¦–å…ˆï¼Œç”¨äº†çº¿ç¨‹æ± ä¹‹åï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦è‡ªå·±å»ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸäº†ï¼š</strong></p>
<p>ç”¨<code>Thread</code>æ—¶ï¼Œä½ å¾—æ‰‹åŠ¨<code>new Thread()</code>ã€<code>Start()</code>å¯åŠ¨ã€ç”šè‡³æ‰‹åŠ¨ç­‰çº¿ç¨‹å®Œæˆï¼›ä½†çº¿ç¨‹æ± å¸®ä½ åŒ…åŠäº†æ‰€æœ‰çäº‹ï¼š</p>
<ul>
<li>ä½ åªéœ€è¦è°ƒç”¨<code>ThreadPool.QueueUserWorkItem</code>æŠŠä»»åŠ¡ â€œä¸¢è¿›æ± å­â€ï¼Œå‰©ä¸‹çš„å¯åŠ¨ã€æ‰§è¡Œã€å¤ç”¨ã€å›æ”¶å…¨ç”±çº¿ç¨‹æ± è‡ªåŠ¨å¤„ç†ï¼›</li>
<li>å°±åƒä½ ç‚¹å¤–å–ï¼Œåªéœ€è¦ä¸‹å•ï¼Œä¸ç”¨ç®¡éª‘æ‰‹æ˜¯è°ã€æ€ä¹ˆå–é¤ã€é€å®Œè¿™å•å»å“ª â€”â€” éª‘æ‰‹ï¼ˆçº¿ç¨‹ï¼‰çš„è°ƒåº¦å…¨ç”±å¹³å°ï¼ˆçº¿ç¨‹æ± ï¼‰ç®¡ã€‚</li>
</ul>
<p><strong>å…¶æ¬¡ï¼Œçº¿ç¨‹æ± å°±æ˜¯ä¸€ä¸ª â€œé¢„åˆ›å»º + å¯å¤ç”¨â€ çš„çº¿ç¨‹ä»“åº“ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæˆ‘æ»¥ç”¨çº¿ç¨‹äº†ï¼š</strong></p>
<p>çº¿ç¨‹æ± åœ¨ç¨‹åºå¯åŠ¨åï¼Œä¼š<strong>æå‰åˆ›å»ºå°‘é‡ â€œå¾…å‘½çº¿ç¨‹â€</strong> ï¼ˆæ¯”å¦‚é»˜è®¤å…ˆåˆ›å»º 2-4 ä¸ªï¼‰ï¼Œå°±åƒå…¬å¸æå‰æ‹›å¥½çš„ â€œå¾…å‘½å‘˜å·¥â€â€”â€”</p>
<ul>
<li>å½“ä½ ç”¨<code>ThreadPool.QueueUserWorkItem</code>ä¸¢ä»»åŠ¡æ—¶ï¼Œçº¿ç¨‹æ± ä¸ä¼šæ–°å»ºçº¿ç¨‹ï¼Œè€Œæ˜¯ç›´æ¥æŠŠä»»åŠ¡åˆ†ç»™ â€œå¾…å‘½å‘˜å·¥â€ï¼ˆå·²æœ‰çº¿ç¨‹ï¼‰ï¼›</li>
<li>è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œå½“å‰ä»»åŠ¡åï¼Œä¸ä¼šé”€æ¯ï¼Œè€Œæ˜¯å›åˆ° â€œå¾…å‘½çŠ¶æ€â€ï¼Œç­‰ç€æ¥ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼›</li>
<li>åªæœ‰å½“å¾…å‘½çº¿ç¨‹å…¨å¿™ã€ä»»åŠ¡è¿˜åœ¨æ’é˜Ÿæ—¶ï¼Œçº¿ç¨‹æ± æ‰ä¼š â€œæŒ‰éœ€æ–°å»ºå°‘é‡çº¿ç¨‹â€ï¼ˆä½†ä¸ä¼šæ— é™åˆ¶å»ºï¼‰ï¼Œä»»åŠ¡å°‘äº†è¿˜ä¼šæ…¢æ…¢é”€æ¯å¤šä½™çº¿ç¨‹ã€‚</li>
</ul>
<p><strong><code>Thread</code>å’Œ<code>ThreadPool</code>çš„å¯¹æ¯”ï¼š</strong></p>

























<table><thead><tr><th>æ“ä½œåœºæ™¯</th><th>æ‰‹åŠ¨ç”¨ Thread</th><th>ç”¨ ThreadPool</th></tr></thead><tbody><tr><td>100 ä¸ªä»»åŠ¡æ¥äº†</td><td>å»º 100 ä¸ªæ–°çº¿ç¨‹ï¼ˆ100 ä¸ªæ–°éª‘æ‰‹ï¼‰</td><td>å¤ç”¨å‡ ä¸ªçº¿ç¨‹ï¼ˆå‡ ä¸ªéª‘æ‰‹è·‘ 100 å•ï¼‰</td></tr><tr><td>ä»»åŠ¡æ‰§è¡Œå®Œ</td><td>100 ä¸ªçº¿ç¨‹å…¨é”€æ¯ï¼ˆéª‘æ‰‹å…¨ç¦»èŒï¼‰</td><td>çº¿ç¨‹å›åˆ°å¾…å‘½çŠ¶æ€ï¼ˆéª‘æ‰‹ç­‰ä¸‹ä¸€å•ï¼‰</td></tr><tr><td>èµ„æºå¼€é”€</td><td>å†…å­˜ / CPU ç›´æ¥é£™é«˜</td><td>èµ„æºæ¶ˆè€—åªæœ‰ Thread çš„å‡ ååˆ†ä¹‹ä¸€</td></tr></tbody></table>
<h3 data-id="heading-3">1.3Â <code>ThreadPool</code>çš„æ ¸å¿ƒç”¨æ³•ï¼ˆå¦‚ä½•æŠŠä»»åŠ¡äº¤ç»™çº¿ç¨‹æ± ï¼‰</h3>
<p>åŸºäºå‰é¢çš„åŸç†ï¼Œæˆ‘ä»¬çŸ¥é“çº¿ç¨‹æ± çš„æ ¸å¿ƒä»·å€¼æ˜¯ â€œå¤ç”¨çº¿ç¨‹ã€è‡ªåŠ¨è°ƒåº¦â€â€”â€” <strong>æˆ‘ä»¬ä¸ç”¨å…³å¿ƒçº¿ç¨‹çš„åˆ›å»ºã€é”€æ¯ï¼Œå¹¶ä¸”æˆ‘ä»¬æ— æ³•åˆ›å»ºçº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± æ˜¯ç”±ç³»ç»Ÿåˆ›å»ºå¥½çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠè¦æ‰§è¡Œçš„ â€œä»»åŠ¡â€ äº¤ç»™çº¿ç¨‹æ± å°±è¡Œï¼Œ</strong>ã€‚è€ŒæŠŠä»»åŠ¡ä¼ ç»™çº¿ç¨‹æ± çš„æ ¸å¿ƒæ–¹æ³•ï¼Œå°±æ˜¯Â <code>ThreadPool.QueueUserWorkItem(...)</code>ã€‚</p>
<p>åœ¨è®²å…·ä½“ç”¨æ³•å‰ï¼Œå…ˆææ‡‚ä¸€ä¸ªåŸºç¡€çº¦å®šï¼š<strong>çº¿ç¨‹æ± è¦æ±‚ â€œäº¤ç»™å®ƒçš„ä»»åŠ¡å¿…é¡»ç¬¦åˆå›ºå®šæ ¼å¼â€</strong> ï¼Œè¿™ä¸ªæ ¼å¼ç”±<code>WaitCallback</code>å§”æ‰˜å®šä¹‰ï¼Œæ˜¯çº¿ç¨‹æ± å’Œæˆ‘ä»¬çš„ â€œæ²Ÿé€šè§„åˆ™â€ã€‚</p>
<p><strong>å‰ç½®ï¼šçº¿ç¨‹æ± çš„ä»»åŠ¡æ ¼å¼ â€”â€”<code>WaitCallback</code></strong></p>
<p>çº¿ç¨‹æ± è§„å®šï¼šè¦æ‰”ç»™å®ƒæ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¿…é¡»æ˜¯ â€œæ— è¿”å›å€¼ã€æ¥æ”¶ä¸€ä¸ª<code>object</code>ç±»å‹å‚æ•°â€ çš„æ–¹æ³•ã€‚è¿™ä¸ªè§„åˆ™è¢«å°è£…æˆäº†<code>WaitCallback</code>å§”æ‰˜ï¼Œæºç æ ¸å¿ƒå®šä¹‰å¦‚ä¸‹ï¼ˆä¸ç”¨è®°ï¼Œç†è§£è§„åˆ™å°±è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">// çº¿ç¨‹æ± çš„â€œä»»åŠ¡æ ¼å¼çº¦å®šâ€ï¼šæ— è¿”å›å€¼ï¼Œå‚æ•°ä¸ºobjectï¼ˆå¯ä¼ nullï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WaitCallback</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>? state</span>)</span>;
</code></pre>
<p>æˆ‘ä»¬åç»­è°ƒç”¨<code>QueueUserWorkItem</code>æ—¶ï¼Œä¼ çš„ä»»åŠ¡æœ¬è´¨éƒ½æ˜¯ç¬¦åˆè¿™ä¸ªæ ¼å¼çš„æ–¹æ³•ï¼ˆåŒ…æ‹¬åŒ¿åæ–¹æ³•ï¼‰ã€‚</p>
<hr/>
<h4 data-id="heading-4">1.3.1 åŸºç¡€ç”¨æ³•ï¼šæ— å‚æ•°çš„ä»»åŠ¡</h4>
<p>è¿™ä¸ªé™æ€æ–¹æ³•çš„ç­¾åï¼š
<code>public static bool QueueUserWorkItem(WaitCallback callBack)</code>ï¼Œæ¥æ”¶<code>WaitCallback</code>å‚æ•°ï¼Œè¿”å›<code>bool</code>ç±»å‹ï¼Œè¿”å›çš„<code>Bool</code>ç±»å‹å¦‚æœç”¨ä¸åˆ°å¯ä»¥ä¸æ¥æ”¶ã€‚</p>
<p>è¿™é‡Œçš„<code>WaitCallback</code>å§”æ‰˜çš„ç­¾åæˆ‘ä»¬å†å‰é¢ä»‹ç»è¿‡äº†ï¼Œè¿™é‡Œå°±ç›´æ¥åˆ›å»ºè¿™æ ·çš„ä¸€ä¸ªå§”æ‰˜ï¼Œç„¶åæŠŠå®ƒä¼ é€’åˆ°<code>QueueUserWorkItem</code>é‡Œå°±è¡Œï¼š</p>
<pre><code class="hljs language-cs" lang="cs">            <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªWaitCallbackçš„ç”¨æ³•ï¼š</span>
            {
                WaitCallback waitCallback = obj =&gt;
                {
                    Console.WriteLine(<span class="hljs-string">$"æˆ‘è¢«åˆ†é…ç»™äº†çº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹çš„idæ˜¯ï¼š<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>"</span>);
                };

                ThreadPool.QueueUserWorkItem(waitCallback); 

                <span class="hljs-comment">//Thread.Sleep(2000);</span>

            }
</code></pre>
<p><strong>é‡ç‚¹æ³¨æ„ï¼š</strong>
å¯ä»¥çœ‹åˆ°æˆ‘è¿™é‡Œç‰¹åœ°å†™äº†è¿™æ ·ä¸€è¡Œä»£ç ï¼š<code>//Thread.Sleep(2000);</code>ï¼Œæˆ‘æ³¨é‡Šäº†è¿™ä¸ªç­‰å¾…ä»£ç ï¼Œäºæ˜¯æ‰§è¡Œç»“æœæ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49ddee562afc4e2db180bd90be13ce1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5ou_5b6u6L2vTVZQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767071534&amp;x-signature=ox%2BoVSunDFUg8mUQNHsGTCybNCc%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä»€ä¹ˆéƒ½æ²¡æœ‰æ‰§è¡Œï¼</strong> è¿™å¯ä¸æ˜¯å› ä¸ºä»£ç å†™é”™äº†ï¼Œè€Œæ˜¯å› ä¸º<strong>çº¿ç¨‹æ± é‡Œåˆ›å»ºå¥½çš„çº¿ç¨‹ï¼Œé»˜è®¤éƒ½æ˜¯åå°çº¿ç¨‹</strong>ã€‚è€Œè¿›ç¨‹ä¸ä¼šç­‰å¾…åå°çº¿ç¨‹ï¼Œåªä¼šç­‰å¾…å‰å°çº¿ç¨‹ï¼Œæ‰€ä»¥è¿™é‡Œ<strong>ä¸»çº¿ç¨‹æ‰§è¡Œå®Œäº†åï¼Œå°±ç›´æ¥æ€æ­»è¿›ç¨‹äº†ï¼Œç¨‹åºé€€å‡º</strong>ï¼Œçº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹ä»»åŠ¡ä¸ä¼šè¢«æ‰§è¡Œï¼Œäºæ˜¯å°±ä»€ä¹ˆä¹Ÿæ²¡æœ‰æ‰“å°ï¼ï¼ï¼ï¼</p>
<p>å½“æˆ‘ä»¬æŠŠ<code>//Thread.Sleep(2000);</code>æ”¾å¼€æ³¨é‡Šåï¼Œä¸»çº¿ç¨‹ä¼šåœ¨è¿™é‡Œå¡2ç§’ï¼Œ2ç§’åï¼Œçº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹å¤§æ¦‚ç‡æ˜¯åšå®Œäº†è¿™ä¸ªä»»åŠ¡çš„ï¼Œæ‰€ä»¥å°±å¯ä»¥æ­£å¸¸æ‰“å°äº†ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4061125fa1d44f5953223889f4adad8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5ou_5b6u6L2vTVZQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767071534&amp;x-signature=4TJ5P%2B680BeX0eg528IPUSJb1zI%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç”¨<code>Lambda</code>ä½œä¸º<code>WaitCallback</code>ä»»åŠ¡ä¼ é€’ç»™<code>ThreadPool.QueueUserWorkItem</code>æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-cs" lang="cs">            {
                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++)
                {
                    ThreadPool.QueueUserWorkItem(obj =&gt;
                    {
                        Console.WriteLine(<span class="hljs-string">$"æˆ‘è¢«åˆ†é…ç»™äº†çº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹çš„idæ˜¯ï¼š<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>"</span>);
                    });
                }
                Thread.Sleep(<span class="hljs-number">5000</span>);
            }
</code></pre>
<p><strong>æ‰§è¡Œç»“æœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fa9a8c46357469098753b49aa456129~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5ou_5b6u6L2vTVZQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767071534&amp;x-signature=eJb7f%2FYIGvZmkfnNOCQJwSzq2bQ%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-5">1.3.2 è¿›é˜¶ç”¨æ³•ï¼šå¸¦å‚æ•°çš„ä»»åŠ¡</h4>
<p>è¿™ä¸ªé™æ€æ–¹æ³•çš„ç­¾åï¼š
<code>  public static bool QueueUserWorkItem(WaitCallback callBack, object? state)</code>ï¼Œæ¥æ”¶ä¸€ä¸ª<code>WaitCallback</code>å‚æ•°å’Œä¸€ä¸ª<code>object</code>ç±»å‹çš„å¯ç©ºå‚æ•°ï¼Œè¿”å›<code>bool</code>ç±»å‹ï¼Œè¿”å›çš„<code>Bool</code>ç±»å‹å¦‚æœç”¨ä¸åˆ°å¯ä»¥ä¸æ¥æ”¶ã€‚</p>
<pre><code class="hljs language-cs" lang="cs">            {
                WaitCallback waitCallback = obj =&gt;
                {
                    Console.WriteLine(<span class="hljs-string">$"æˆ‘æ˜¯<span class="hljs-subst">{obj}</span>ï¼Œæˆ‘è¢«çº¿ç¨‹<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>æ‰§è¡Œ"</span>);
                };
                ThreadPool.QueueUserWorkItem(waitCallback, <span class="hljs-string">"å°ç‹"</span>);
                Thread.Sleep(<span class="hljs-number">2000</span>);
            }
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8363582928234206865e3d2d48f0854a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5ou_5b6u6L2vTVZQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767071534&amp;x-signature=9uW50J4owEXRMaMU3er883OlyqQ%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€ä¸ªæ›´è´´è¿‘å®æˆ˜çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-cs" lang="cs">            <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">OrderInfo</span>
            {
               <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> OrderId { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }    <span class="hljs-comment">// è®¢å•ç¼–å·</span>
               <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> UserName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// ç”¨æˆ·å</span>
               <span class="hljs-keyword">public</span> <span class="hljs-built_in">decimal</span> Amount { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }  <span class="hljs-comment">// è®¢å•é‡‘é¢</span>
            }
           {
               List&lt;OrderInfo&gt; orders = <span class="hljs-keyword">new</span> List&lt;OrderInfo&gt;()
               {
                   <span class="hljs-keyword">new</span> OrderInfo() { OrderId = <span class="hljs-number">1</span>, UserName = <span class="hljs-string">"å°ç‹"</span>, Amount = <span class="hljs-number">11.5</span>m },
                   <span class="hljs-keyword">new</span> OrderInfo() { OrderId = <span class="hljs-number">2</span>, UserName = <span class="hljs-string">"å°æ˜"</span>, Amount = <span class="hljs-number">12.5</span>m },
                   <span class="hljs-keyword">new</span> OrderInfo() { OrderId = <span class="hljs-number">3</span>, UserName = <span class="hljs-string">"å°å¼ "</span>, Amount = <span class="hljs-number">13.5</span>m },
                   <span class="hljs-keyword">new</span> OrderInfo() { OrderId = <span class="hljs-number">4</span>, UserName = <span class="hljs-string">"å°æ"</span>, Amount = <span class="hljs-number">14.5</span>m }
               };
               ThreadPool.QueueUserWorkItem(obj =&gt;
               {

                   <span class="hljs-keyword">var</span> orders = obj <span class="hljs-keyword">as</span> List&lt;OrderInfo&gt;;
                   <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> orderInfo <span class="hljs-keyword">in</span> orders)
                   {
                       Console.WriteLine(<span class="hljs-string">$"idï¼š<span class="hljs-subst">{orderInfo.OrderId}</span>,username = <span class="hljs-subst">{orderInfo.UserName}</span>ï¼ŒAmount = <span class="hljs-subst">{orderInfo.Amount}</span>"</span>);
                   }
               },orders);

               Thread.Sleep(<span class="hljs-number">2000</span>);
               Console.WriteLine(<span class="hljs-string">"æ‰€æœ‰è®¢å•å¤„ç†å®Œæ¯•"</span>);
           }
</code></pre>
<p><strong>è¿è¡Œç»“æœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5900a326163543ef80897af5854c45dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5ou_5b6u6L2vTVZQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767071534&amp;x-signature=XDglGclCYVZfPYrtKWPdVazCloo%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">1.4 <code>ThreadPool</code>çš„è‡´å‘½ç¼ºç‚¹</h4>
<p>å‰é¢å­¦äº† ThreadPool çš„ç”¨æ³•ï¼Œä½†å®ƒæœ‰ä¸ª<strong>å®é™…å¼€å‘å®Œå…¨ç»•ä¸å¼€</strong>çš„è‡´å‘½ç¼ºç‚¹ â€”â€”<strong>æˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹å¹¶ä¸çŸ¥é“å­çº¿ç¨‹ä»€ä¹ˆæ—¶å€™æ‰§è¡Œå®Œæˆï¼Œåªèƒ½æ— è„‘ä½¿ç”¨Thread.Sleepï¼ˆï¼‰æ¥çŒœå­çº¿ç¨‹æ‰§è¡Œå®Œäº†æ²¡</strong>ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šéœ€æ±‚ï¼šè®¡ç®— 10+20 çš„å’Œï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­æ‹¿åˆ°ç»“æœå¹¶æ‰“å°ã€‚</p>
<h4 data-id="heading-7">ç”¨ ThreadPool å®ç°ï¼šå¦‚æœä¸»çº¿ç¨‹ç­‰å¾…çš„äº‹ä»¶å¤ªçŸ­äº†ï¼Œç»“æœå°±æ‹¿ä¸åˆ°ï¼</h4>
<pre><code class="hljs language-cs" lang="cs">            {

                <span class="hljs-built_in">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;
                <span class="hljs-built_in">int</span> sum = <span class="hljs-number">0</span>; <span class="hljs-comment">// æƒ³å­˜è®¡ç®—ç»“æœ</span>

                <span class="hljs-comment">// ç”¨ThreadPoolæ‰§è¡Œè®¡ç®—ä»»åŠ¡</span>
                ThreadPool.QueueUserWorkItem(obj =&gt;
                {
                    Thread.Sleep(<span class="hljs-number">1000</span>);
                    sum = a + b; <span class="hljs-comment">// çº¿ç¨‹å†…è®¡ç®—å®Œæˆï¼Œèµ‹å€¼ç»™sum</span>
                    Console.WriteLine(<span class="hljs-string">$"çº¿ç¨‹æ± å†…è®¡ç®—ï¼š<span class="hljs-subst">{a}</span>+<span class="hljs-subst">{b}</span>=<span class="hljs-subst">{sum}</span>"</span>);
                });

                Thread.Sleep(<span class="hljs-number">500</span>);
                Console.WriteLine(<span class="hljs-string">$"ä¸»çº¿ç¨‹æƒ³æ‹¿ç»“æœï¼š<span class="hljs-subst">{a}</span>+<span class="hljs-subst">{b}</span>=<span class="hljs-subst">{sum}</span>"</span>);

            }
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ä¸»çº¿ç¨‹æƒ³æ‹¿ç»“æœï¼š10+<span class="hljs-attr">20</span>=<span class="hljs-number">0</span>
</code></pre>
<h4 data-id="heading-8">é—®é¢˜ 1ï¼šç­‰å¾…æ—¶é—´ä¸åŒ¹é…ï¼Œä¸»çº¿ç¨‹æ‹¿ä¸åˆ°æ­£ç¡®ç»“æœ</h4>
<ul>
<li>çº¿ç¨‹æ± ä»»åŠ¡é‡ŒåŠ äº†<code>Thread.Sleep(1000)</code>ï¼šæ„å‘³ç€ä»»åŠ¡è¦ç­‰ 1 ç§’åï¼Œæ‰ä¼šç»™<code>sum</code>èµ‹å€¼ä¸º 30ï¼›</li>
<li>ä¸»çº¿ç¨‹åªåŠ äº†<code>Thread.Sleep(500)</code>ï¼šåªç­‰ 0.5 ç§’å°±å»æ‰“å°<code>sum</code>â€”â€” æ­¤æ—¶çº¿ç¨‹æ± ä»»åŠ¡è¿˜åœ¨ â€œç¡è§‰â€ï¼Œ<code>sum</code>è¿˜æ˜¯åˆå§‹å€¼ 0ï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹æ‰“å°<code>10+20=0</code>ã€‚</li>
</ul>
<h4 data-id="heading-9">é—®é¢˜ 2ï¼šä¸»çº¿ç¨‹é€€å‡ºå¯¼è‡´çº¿ç¨‹æ± ä»»åŠ¡ç›´æ¥ä¸­æ–­</h4>
<p>ä¸»çº¿ç¨‹æ‰“å°å®Œ<code>sum=0</code>åï¼Œæ•´ä¸ªä»£ç å—æ‰§è¡Œå®Œæ¯•ï¼Œ<strong>è¿›ç¨‹ç›´æ¥é€€å‡º</strong>ï¼ˆæ§åˆ¶å°æ˜¾ç¤º â€œå·²é€€å‡ºï¼Œä»£ç ä¸º 0â€ï¼‰â€”â€” è€Œçº¿ç¨‹æ± ä»»åŠ¡è¿˜æ²¡ç­‰åˆ° 1 ç§’çš„ç¡çœ ç»“æŸï¼Œè¿<code>Console.WriteLine($"çº¿ç¨‹æ± å†…è®¡ç®—ï¼š{a}+{b}={sum}")</code>è¿™è¡Œéƒ½æ²¡æœºä¼šæ‰§è¡Œï¼Œç›´æ¥è¢«æ€æ­»äº†ã€‚</p>
<p>è¿™å°±æ˜¯<code>ThreadPool</code>æœ€å‘çš„åœ°æ–¹ï¼š<strong>ä½ æ°¸è¿œæ²¡æ³•ç²¾å‡†æ§åˆ¶ â€œä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œâ€ï¼Œä¹Ÿæ²¡æ³•è®©ä¸»çº¿ç¨‹ â€œç­‰ä»»åŠ¡çœŸçš„å®Œæˆå†é€€å‡ºâ€</strong> ã€‚</p>
<hr/>
<h4 data-id="heading-10">å¯¹æ¯” Taskï¼šä¸€è¡Œä»£ç è§£å†³æ‰€æœ‰é—®é¢˜ï¼ˆå¯é åˆä¼˜é›…ï¼‰</h4>
<p>åŒæ ·çš„éœ€æ±‚ï¼Œç”¨<code>Task</code>æ”¹å†™åï¼Œä¸ç®¡æ˜¯ç­‰å¾…è¿˜æ˜¯æ‹¿ç»“æœï¼Œéƒ½ 100% å¯é ï¼Œè¿˜ä¸ä¼šè®©è¿›ç¨‹æå‰é€€å‡ºï¼š</p>
<pre><code class="hljs language-cs" lang="cs">{
    <span class="hljs-built_in">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;

    <span class="hljs-comment">// Taskå£°æ˜ï¼šæ‰§è¡Œä¸€ä¸ªè¿”å›intçš„ä»»åŠ¡ï¼Œå“ªæ€•ä»»åŠ¡è¦sleep1000ms</span>
    Task&lt;<span class="hljs-built_in">int</span>&gt; sumTask = Task.Run(() =&gt;
    {
        Thread.Sleep(<span class="hljs-number">1000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿä»»åŠ¡è€—æ—¶</span>
        <span class="hljs-built_in">int</span> sum = a + b;
        Console.WriteLine(<span class="hljs-string">$"Taskå†…è®¡ç®—ï¼š<span class="hljs-subst">{a}</span>+<span class="hljs-subst">{b}</span>=<span class="hljs-subst">{sum}</span>"</span>);
        <span class="hljs-keyword">return</span> sum; <span class="hljs-comment">// ç›´æ¥è¿”å›ç»“æœï¼Œä¸ç”¨å…±äº«å˜é‡</span>
    });

    <span class="hljs-comment">// æ ¸å¿ƒï¼šç²¾å‡†ç­‰å¾…Taskå®Œæˆï¼ˆä¸ç”¨çŒœSleepæ—¶é—´ï¼Œåˆ°åº•æ˜¯ç¡1ç§’è¿˜æ˜¯ç¡åŠç§’ï¼‰ï¼Œæ‹¿åˆ°ç»“æœ</span>
    <span class="hljs-built_in">int</span> sum = sumTask.Result; 
    Console.WriteLine(<span class="hljs-string">$"ä¸»çº¿ç¨‹æ‹¿åˆ°ç»“æœï¼š<span class="hljs-subst">{a}</span>+<span class="hljs-subst">{b}</span>=<span class="hljs-subst">{sum}</span>"</span>); <span class="hljs-comment">// æ°¸è¿œæ˜¯30ï¼</span>
}
</code></pre>
<h4 data-id="heading-11">è¿è¡Œç»“æœï¼ˆ100% å¯é ï¼‰ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">Taskå†…è®¡ç®—ï¼š10+<span class="hljs-attr">20</span>=<span class="hljs-number">30</span>
ä¸»çº¿ç¨‹æ‹¿åˆ°ç»“æœï¼š10+<span class="hljs-attr">20</span>=<span class="hljs-number">30</span>
</code></pre>
<h2 data-id="heading-12">äºŒã€Task ä»»åŠ¡ â€”â€” ThreadPool çš„å…¨èƒ½å‡çº§ç‰ˆ</h2>
<p>æ—¢ç„¶<code>ThreadPool</code>æœ‰ â€œæ‹¿ä¸åˆ°å¯é ç»“æœã€ç­‰å¾…é ççŒœã€è¿›ç¨‹æå‰é€€å‡ºâ€ è¿™äº›è‡´å‘½ç¼ºç‚¹ï¼Œé‚£.NET Core æ—¶ä»£æˆ‘ä»¬è¯¥ç”¨ä»€ä¹ˆï¼Ÿç­”æ¡ˆå°±æ˜¯<code>Task</code>â€”â€” å®ƒå®Œå…¨ç»§æ‰¿äº†<code>ThreadPool</code>â€œçº¿ç¨‹å¤ç”¨ã€æ§æ•°é‡â€ çš„ä¼˜ç‚¹ï¼ŒåˆæŠŠæ‰€æœ‰ç—›ç‚¹å…¨è§£å†³äº†ï¼Œæ˜¯å®é™…å¼€å‘ä¸­å¤šçº¿ç¨‹ç¼–ç¨‹çš„<strong>é¦–é€‰æ–¹æ¡ˆ</strong>ã€‚</p>
<h3 data-id="heading-13">2.1 Task çš„æ ¸å¿ƒå®šä½ï¼šä¸ºå•¥èƒ½æ›¿ä»£ ThreadPoolï¼Ÿ</h3>
<p>å…ˆä¸€å¥è¯è¯´æ¸…å…³ç³»ï¼š<strong>Task æ˜¯ ThreadPool çš„ â€œé«˜çº§å°è£…â€</strong> Â â€”â€”Task åº•å±‚è¿˜æ˜¯ç”¨ ThreadPool çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œä½†ç»™æˆ‘ä»¬æä¾›äº†æ›´å‹å¥½ã€æ›´å¯é çš„ APIï¼Œå®Œç¾è§£å†³ ThreadPool çš„ 4 å¤§ç—›ç‚¹ï¼š</p>






























<table><thead><tr><th>ç—›ç‚¹ï¼ˆThreadPoolï¼‰</th><th>è§£å†³æ–¹æ¡ˆï¼ˆTaskï¼‰</th><th>æ–°æ‰‹ç›´è§‚æ„Ÿå—</th></tr></thead><tbody><tr><td>ä»»åŠ¡æ— è¿”å›å€¼</td><td>Task ç›´æ¥è¿”å›å¼ºç±»å‹ç»“æœï¼Œä¸ç”¨å…±äº«å˜é‡</td><td>ä¸ç”¨å†é å…¨å±€å˜é‡ä¼ å€¼ï¼Œæ‹¿ç»“æœæ›´é è°±</td></tr><tr><td>ç­‰å¾…é  Thread.Sleep</td><td>Result/Wait/await ç²¾å‡†ç­‰å¾…ä»»åŠ¡å®Œæˆ</td><td>ä¸ç”¨ççŒœ Sleep å¤šä¹…ï¼Œä»»åŠ¡å®Œäº†æ‰ç»§ç»­</td></tr><tr><td>è¿›ç¨‹æå‰ç»ˆæ­¢ä»»åŠ¡</td><td>ä¸»çº¿ç¨‹ä¼šç­‰ Task æ‰§è¡Œå®Œï¼Œä¸ä¼šä¸­é€”æ€æ­»ä»»åŠ¡</td><td>ä»»åŠ¡ä¸ä¼šè¢«è«åä¸­æ–­ï¼Œé€»è¾‘èƒ½å®Œæ•´æ‰§è¡Œ</td></tr><tr><td>å¼‚å¸¸ â€œæ‚„æ‚„åæ‰â€</td><td>å¯æ•è· Task çš„å¼‚å¸¸ï¼Œä¸»çº¿ç¨‹èƒ½æ„ŸçŸ¥ä»»åŠ¡å¤±è´¥</td><td>å“ªé‡Œé”™äº†èƒ½ç›´æ¥çœ‹åˆ°ï¼Œä¸ç”¨çŒœåŸå› </td></tr></tbody></table>
<h3 data-id="heading-14">2.2 Task æ ¸å¿ƒè¯­æ³•</h3>
<p>Task çš„ç”¨æ³•åˆ†ä¸¤ç±»ï¼šã€Œæ‰‹åŠ¨åˆ›å»ºï¼ˆnew Task ()+Start ()ï¼‰ã€å’Œã€Œå¿«æ·åˆ›å»ºï¼ˆTask.Run ()ï¼‰ã€ï¼Œå…ˆå­¦æ‰‹åŠ¨åˆ›å»ºï¼ˆç†è§£æ›´é€ï¼‰ï¼Œå†å­¦å¿«æ·æ–¹å¼ï¼ˆå®é™…å¼€å‘å¸¸ç”¨ï¼‰ã€‚</p>
<h4 data-id="heading-15">2.2.1 åŸºç¡€æ¬¾ï¼šnew Task() + Start()(æ‰‹åŠ¨åˆ›å»º+å»¶æ—¶å¯åŠ¨)</h4>
<h5 data-id="heading-16">â‘  æ„é€ å‡½æ•° 1ï¼šæ— å‚ã€æ— è¿”å›å€¼(æœ€ç®€å•çš„ä»»åŠ¡)</h5>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåªå¹²æ´»ä¸æ‹¿ç»“æœï¼ˆæ¯”å¦‚æ‰“å°ã€æ¸…ç†æ–‡ä»¶ã€å†™æ—¥å¿—ï¼‰ã€‚</p>
<pre><code class="hljs language-cs" lang="cs">            <span class="hljs-comment">// ç”¨Taskå®šä¹‰ä¸ªä»»åŠ¡</span>
            <span class="hljs-comment">// Taskæ„é€ å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªActionå§”æ‰˜ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨Lambdaè¡¨è¾¾å¼ä¼ é€’</span>
            Task task = <span class="hljs-keyword">new</span> Task(() =&gt;
            {
                Console.WriteLine(<span class="hljs-string">"å­çº¿ç¨‹å¼€å§‹æ‰§è¡Œä»»åŠ¡"</span>);
                Console.WriteLine(<span class="hljs-string">$"çº¿ç¨‹Idï¼š<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>"</span>);
                Console.WriteLine(<span class="hljs-string">"å­çº¿ç¨‹ç»“æŸæ‰§è¡Œä»»åŠ¡"</span>);
            });

            Console.WriteLine(<span class="hljs-string">"ä¸»çº¿ç¨‹ä¸ç­‰å¾…ï¼Œç›´æ¥æ‰§è¡ŒStart()"</span>);
            <span class="hljs-comment">// å¯åŠ¨ä»»åŠ¡</span>
            task.Start();
            Console.WriteLine(<span class="hljs-string">"é‡åˆ°äº†Wait(),ä¸»çº¿ç¨‹å¼€å§‹ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œå¹¶ä¸”ä¸éœ€è¦çŒœå­çº¿ç¨‹ä»€ä¹ˆæ—¶å€™ç»“æŸå®Œæ¯•"</span>);
            task.Wait();
            Console.WriteLine(<span class="hljs-string">"Wait()ç»“æŸï¼Œä¸»çº¿ç¨‹ç»“æŸç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œç»“æŸ"</span>);
</code></pre>
<p><strong>æ‰§è¡Œç»“æœï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">ä¸»çº¿ç¨‹ä¸ç­‰å¾…ï¼Œç›´æ¥æ‰§è¡Œ<span class="hljs-built_in">Start</span>()
é‡åˆ°äº†Wait(),ä¸»çº¿ç¨‹å¼€å§‹ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œå¹¶ä¸”ä¸éœ€è¦çŒœå­çº¿ç¨‹ä»€ä¹ˆæ—¶å€™ç»“æŸå®Œæ¯•
å­çº¿ç¨‹å¼€å§‹æ‰§è¡Œä»»åŠ¡
çº¿ç¨‹Idï¼š<span class="hljs-number">6</span>
å­çº¿ç¨‹ç»“æŸæ‰§è¡Œä»»åŠ¡
Wait()ç»“æŸï¼Œä¸»çº¿ç¨‹ç»“æŸç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œç»“æŸ
</code></pre>
<ul>
<li><code>new Task(...)</code>Â åªæ˜¯ â€œå®šä¹‰ä»»åŠ¡â€ï¼Œä¸æ˜¯ â€œæ‰§è¡Œä»»åŠ¡â€ï¼›</li>
<li><code>Start()</code>Â æ˜¯ â€œå¯åŠ¨ä»»åŠ¡â€ çš„å”¯ä¸€æ–¹å¼ï¼ˆæ¼å†™å°±ç™½å®šä¹‰ï¼‰ï¼›</li>
<li><code>Wait()</code>Â æ˜¯ â€œç²¾å‡†ç­‰å¾…â€ï¼Œæ›¿ä»£ ThreadPool çš„Â <code>Thread.Sleep</code>Â ççŒœã€‚</li>
</ul>
<h5 data-id="heading-17">â‘¡ æ„é€ å‡½æ•° 2ï¼šå¸¦å‚æ•°ï¼ˆç»™ä»»åŠ¡ä¼ é€’æ•°æ®ï¼‰</h5>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä»»åŠ¡éœ€è¦å¤–éƒ¨æ•°æ®ï¼ˆæ¯”å¦‚ç»™æŒ‡å®šç”¨æˆ·å‘æ¶ˆæ¯ã€å¤„ç†æŒ‡å®šè®¢å•ï¼‰ã€‚</p>
<pre><code class="hljs language-cs" lang="cs">                <span class="hljs-comment">// æ­¤æ—¶çš„æ„é€ å‡½æ•°æ˜¯ï¼šTask.Task(Action&lt;object?&gt; action, object? state)</span>
                <span class="hljs-comment">// æ‰€ä»¥æˆ‘ä»¬è¦ä¼ é€’ä¸€ä¸ªå¸¦objectç±»å‹çš„å§”æ‰˜ï¼Œè¿˜è¦ä¼ é€’ä¸€ä¸ªobjectç±»å‹çš„å‚æ•°</span>
                Task task = <span class="hljs-keyword">new</span> Task(obj =&gt;
                {
                    <span class="hljs-built_in">string</span> <span class="hljs-keyword">nameof</span> = obj <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;
                    Console.WriteLine(<span class="hljs-string">$"æ¬¢è¿<span class="hljs-subst">{obj}</span>"</span>);
                },<span class="hljs-string">"å¼ ä¸‰"</span>);

                <span class="hljs-comment">// ä»çº¿ç¨‹æ± ä¸­æ‰¾ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™ä¸ªtaskä»»åŠ¡</span>
                task.Start();
                <span class="hljs-comment">// ä¸»çº¿ç¨‹é˜»å¡ç­‰å¾…å­çº¿ç¨‹</span>
                task.Wait();
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-cs" lang="cs">æ¬¢è¿å¼ ä¸‰
</code></pre>
<p><strong>è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å‚æ•°æ˜¯Â <code>object</code>Â ç±»å‹ï¼Œä»»åŠ¡å†…è¦æ‰‹åŠ¨è½¬æ¢ä¸ºç›®æ ‡ç±»å‹ï¼ˆç”¨Â <code>is/as</code>Â æœ€å®‰å…¨ï¼‰ï¼›</li>
<li>å¯ä¼ ä»»æ„å¤æ‚å‚æ•°ï¼ˆæ¯”å¦‚Â <code>new OrderInfo { OrderId = 1001 }</code>ï¼‰ï¼Œåªéœ€åœ¨ä»»åŠ¡å†…è½¬æ¢ä¸ºÂ <code>OrderInfo</code>ã€‚</li>
</ul>
<h5 data-id="heading-18">â‘¢ æ„é€ å‡½æ•° 3ï¼šå¯ä»¥å–æ¶ˆ</h5>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä»»åŠ¡å¯èƒ½éœ€è¦ä¸­é€”ç»ˆæ­¢ï¼ˆæ¯”å¦‚ç”¨æˆ·å–æ¶ˆæ“ä½œã€è¶…æ—¶ã€æ¡ä»¶ä¸æ»¡è¶³ï¼‰ã€‚</p>
<p>æ ¸å¿ƒå·¥å…·ï¼š<code>CancellationTokenSource</code>ï¼ˆç®€ç§° CTSï¼Œâ€œå«åœå“¨å­â€ï¼‰+Â <code>CancellationToken</code>ï¼ˆâ€œä»¤ç‰Œâ€ï¼Œä¼ ç»™ä»»åŠ¡è®©å®ƒèƒ½å¬åˆ°å«åœï¼‰ã€‚</p>
<pre><code class="hljs language-cs" lang="cs">                <span class="hljs-keyword">using</span> CancellationTokenSource cts = <span class="hljs-keyword">new</span> CancellationTokenSource();

                <span class="hljs-comment">// æ­¤æ—¶æ„é€ å‡½æ•°æ˜¯ï¼šTask(Action, CancellationToken)</span>
                <span class="hljs-comment">// æ„å‘³ç€æˆ‘ä»¬è¦ä¼ é€’ä¸€ä¸ªAction å’Œä¸€ä¸ªCancellationToken</span>
                Task task = <span class="hljs-keyword">new</span> Task(() =&gt;
                {
                    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)
                    {
                        <span class="hljs-keyword">if</span> (cts.Token.IsCancellationRequested)
                        {
                            Console.WriteLine(<span class="hljs-string">$"å­çº¿ç¨‹<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span> ä»»åŠ¡è¢«å–æ¶ˆï¼Œä¸æ‰§è¡Œä»»åŠ¡äº†......"</span>);
                            <span class="hljs-keyword">return</span>;
                        }
                        Console.WriteLine(<span class="hljs-string">$"å­çº¿ç¨‹<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span> æ‰§è¡Œä»»åŠ¡ä¸­......"</span>);
                        Thread.Sleep(<span class="hljs-number">500</span>);
                    }
                }, cts.Token);

                <span class="hljs-comment">// æ‰¾äº†ä¸ªç©ºé—²çš„å­çº¿ç¨‹æ‰§è¡Œä»»åŠ¡</span>
                Console.WriteLine(<span class="hljs-string">"é‡åˆ°äº†Start()ï¼Œæ‰¾äº†ä¸ªç©ºé—²çš„å­çº¿ç¨‹æ‰§è¡Œtaskä»»åŠ¡"</span>);
                task.Start();

                Thread.Sleep(<span class="hljs-number">2000</span>);
                Console.WriteLine(<span class="hljs-string">"é‡åˆ°äº†Cancelï¼Œå­çº¿ç¨‹çš„ä»»åŠ¡è¢«å–æ¶ˆäº†"</span>);
                cts.Cancel();

                Console.WriteLine(<span class="hljs-string">"é‡åˆ°äº†Wait()ï¼Œå¦‚æœå­çº¿ç¨‹æ²¡æ‰§è¡Œå®Œï¼Œä¸»çº¿ç¨‹é˜»å¡ç­‰å¾…ï¼Œå¦‚æœæ‰§è¡Œå®Œäº†ç›´æ¥èµ°"</span>);
                task.Wait();
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">é‡åˆ°äº†Start()ï¼Œæ‰¾äº†ä¸ªç©ºé—²çš„å­çº¿ç¨‹æ‰§è¡Œtaskä»»åŠ¡
å­çº¿ç¨‹<span class="hljs-number">6</span> æ‰§è¡Œä»»åŠ¡ä¸­......
å­çº¿ç¨‹<span class="hljs-number">6</span> æ‰§è¡Œä»»åŠ¡ä¸­......
å­çº¿ç¨‹<span class="hljs-number">6</span> æ‰§è¡Œä»»åŠ¡ä¸­......
å­çº¿ç¨‹<span class="hljs-number">6</span> æ‰§è¡Œä»»åŠ¡ä¸­......
é‡åˆ°äº†Cancelï¼Œå­çº¿ç¨‹çš„ä»»åŠ¡è¢«å–æ¶ˆäº†
é‡åˆ°äº†Wait()ï¼Œå¦‚æœå­çº¿ç¨‹æ²¡æ‰§è¡Œå®Œï¼Œä¸»çº¿ç¨‹é˜»å¡ç­‰å¾…ï¼Œå¦‚æœæ‰§è¡Œå®Œäº†ç›´æ¥èµ°
å­çº¿ç¨‹<span class="hljs-number">6</span> ä»»åŠ¡è¢«å–æ¶ˆï¼Œä¸æ‰§è¡Œä»»åŠ¡äº†......
</code></pre>
<p><strong>è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å–æ¶ˆä»»åŠ¡çš„æ ¸å¿ƒæ˜¯ã€Œä»»åŠ¡å†…ä¸»åŠ¨ç”¨<code>if</code>æ£€æµ‹ä»¤ç‰Œã€ï¼Œåªå–ŠÂ <code>Cancel()</code>Â ä¸æ£€æµ‹ï¼Œä»»åŠ¡ä¼šç»§ç»­å¹²ï¼›</li>
<li>CTS ç”¨å®Œè¦ç”¨using è‡ªåŠ¨é‡Šæ”¾ï¼Œä¸ç„¶ä¼šå å†…å­˜ã€‚</li>
</ul>
<h4 data-id="heading-19">3.1.4 æ„é€ å‡½æ•° 4ï¼šæœ‰è¿”å›å€¼ï¼ˆTaskï¼Œæ‹¿ä»»åŠ¡ç»“æœï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä»»åŠ¡å¹²å®Œè¦æ‹¿ç»“æœï¼ˆæ¯”å¦‚è®¡ç®—æ±‚å’Œã€æŸ¥è¯¢æ•°æ®ã€è°ƒç”¨æ¥å£è¿”å›å€¼ï¼‰â€”â€” è¿™æ˜¯æ›¿ä»£ ThreadPool çš„æ ¸å¿ƒä¼˜åŠ¿ï¼</p>
<pre><code class="hljs language-cs" lang="cs">                <span class="hljs-comment">// ä½¿ç”¨æœ‰è¿”å›å€¼çš„æ„é€ å‡½æ•°Task&lt;T&gt;(Func&lt;int&gt; function)</span>
                Task&lt;<span class="hljs-built_in">int</span>&gt; task = <span class="hljs-keyword">new</span> Task&lt;<span class="hljs-built_in">int</span>&gt;(() =&gt;
                {
                    Console.WriteLine(<span class="hljs-string">"ä»»åŠ¡å¼€å§‹ï¼Œæˆ‘è´Ÿè´£è®¡ç®—20+10"</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-number">20</span>+<span class="hljs-number">10</span>;
                });

                Console.WriteLine(<span class="hljs-string">"é‡åˆ°Start:æ‰¾äº†ä¸ªçº¿ç¨‹å¼€å§‹æ‰§è¡Œtaskä»»åŠ¡"</span>);
                task.Start();

                Console.WriteLine(<span class="hljs-string">"é‡åˆ°Result:ä¸»çº¿ç¨‹é˜»å¡äº†ï¼Œç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•"</span>);
                <span class="hljs-built_in">int</span> sum = task.Result;

                Console.WriteLine(<span class="hljs-string">$"å­ä»»åŠ¡æ‰§è¡Œå®Œæ¯•äº†ï¼Œç»“æœæ˜¯<span class="hljs-subst">{sum}</span>"</span>);

</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs language-cs" lang="cs">é‡åˆ°Start:æ‰¾äº†ä¸ªçº¿ç¨‹å¼€å§‹æ‰§è¡Œtaskä»»åŠ¡
é‡åˆ°Result:ä¸»çº¿ç¨‹é˜»å¡äº†ï¼Œç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•
ä»»åŠ¡å¼€å§‹ï¼Œæˆ‘è´Ÿè´£è®¡ç®—<span class="hljs-number">20</span>+<span class="hljs-number">10</span>
å­ä»»åŠ¡æ‰§è¡Œå®Œæ¯•äº†ï¼Œç»“æœæ˜¯<span class="hljs-number">30</span>
</code></pre>
<p><strong>è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>æœ‰è¿”å›å€¼çš„ä»»åŠ¡è¦ç”¨Â <code>Task&lt;T&gt;</code>ï¼ˆT æ˜¯ç»“æœç±»å‹ï¼Œæ¯”å¦‚Â <code>Task&lt;string&gt;</code>Â è¿”å›å­—ç¬¦ä¸²ï¼Œ<code>Task&lt;OrderInfo&gt;</code>Â è¿”å›è‡ªå®šä¹‰å¯¹è±¡ï¼‰ï¼›</li>
<li><code>Result</code>Â æ˜¯ â€œé˜»å¡å¼è·å–ç»“æœâ€ï¼šä¸»çº¿ç¨‹ä¼šç­‰ä»»åŠ¡å¹²å®Œï¼Œå†æ‹¿åˆ°ç»“æœï¼ˆä¸ç”¨åƒ ThreadPool é‚£æ ·é å…±äº«å˜é‡ä¼ å€¼ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-20">3.2 å¿«æ·æ¬¾ï¼šTask.Run ()ï¼ˆåˆ›å»º + ç«‹å³å¯åŠ¨ï¼Œå®é™…å¼€å‘é¦–é€‰ï¼‰</h3>
<p><code>Task.Run()</code>Â æ˜¯Â <code>new Task()+Start()</code>Â çš„å¿«æ·å†™æ³• â€”â€” å°‘å†™ä¸€è¡ŒÂ <code>Start()</code>ï¼Œç›´æ¥åˆ›å»ºå¹¶å¯åŠ¨ä»»åŠ¡ï¼Œ90% çš„ä¸šåŠ¡åœºæ™¯ç”¨è¿™ä¸ªå°±å¤Ÿã€‚</p>
<h4 data-id="heading-21">3.2.1 æ— è¿”å›å€¼ï¼ˆæ›¿ä»£ new Task (()=&gt;{...}).Start ()ï¼‰</h4>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">// ä¸€è¡Œæå®šï¼šåˆ›å»º+å¯åŠ¨æ— è¿”å›å€¼ä»»åŠ¡</span>
            Task task = Task.Run(() =&gt;
            {
                Console.WriteLine(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œä»»åŠ¡å•¦~~"</span>);
            });
            Console.WriteLine(<span class="hljs-string">"ä¸»çº¿ç¨‹å¼€å§‹ç­‰å¾…"</span>);
            task.Wait();
            Console.WriteLine(<span class="hljs-string">"ä¸»çº¿ç¨‹ç­‰å¾…ç»“æŸ"</span>);
</code></pre>
<p><strong>æ‰§è¡Œç»“æœï¼š</strong></p>
<pre><code class="hljs">ä¸»çº¿ç¨‹å¼€å§‹ç­‰å¾…
å¼€å§‹æ‰§è¡Œä»»åŠ¡å•¦~~
ä¸»çº¿ç¨‹ç­‰å¾…ç»“æŸ    
</code></pre>
<h4 data-id="heading-22">3.2.2 æœ‰è¿”å›å€¼ï¼ˆæ›¿ä»£ new Task(()=&gt;{...}).Start()ï¼‰</h4>
<pre><code class="hljs language-cs" lang="cs">            Task&lt;<span class="hljs-built_in">int</span>&gt; task = Task.Run(() =&gt;
            {
                <span class="hljs-keyword">return</span> DateTime.Now.Year;
            });

            <span class="hljs-built_in">int</span> sum = task.Result;
            Console.WriteLine(<span class="hljs-string">$"ä»Šå¹´æ˜¯<span class="hljs-subst">{sum}</span>å¹´"</span>);
</code></pre>
<h4 data-id="heading-23">3.2.3 å¸¦å‚æ•°ï¼ˆå°æŠ€å·§ï¼šç”¨é—­åŒ…ä¼ å‚ï¼Œæ¯”æ„é€ å‡½æ•°æ›´ç®€æ´ï¼‰</h4>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-built_in">string</span> userName = <span class="hljs-string">"æå››"</span>; <span class="hljs-comment">// è¦ä¼ çš„å‚æ•°</span>
Task paramTask = Task.Run(() =&gt;
{
    <span class="hljs-comment">// ç›´æ¥ç”¨å¤–éƒ¨å˜é‡ï¼ˆé—­åŒ…ï¼‰ï¼Œä¸ç”¨è½¬objï¼Œæ›´ç®€æ´</span>
    Console.WriteLine(<span class="hljs-string">$"âœ… æ¬¢è¿ <span class="hljs-subst">{userName}</span>ï¼"</span>);
});
paramTask.Wait();
</code></pre>
<h2 data-id="heading-24">å››ã€Task çš„ç­‰å¾…æ–¹å¼ï¼ˆç²¾å‡†ç­‰å¾…ï¼Œä¸ç”¨ççŒœï¼‰</h2>
<p>é™¤äº†å•ä¸ªä»»åŠ¡çš„Â <code>Wait()</code>ï¼ŒTask è¿˜æ”¯æŒã€Œæ‰¹é‡ç­‰å¾…ã€ï¼Œæ»¡è¶³å¤æ‚åœºæ™¯ï¼š</p>
<h3 data-id="heading-25">4.1 ç­‰å¾…å•ä¸ªä»»åŠ¡ï¼šTask.Wait ()</h3>
<pre><code class="hljs language-cs" lang="cs">Task task = Task.Run(() =&gt; Thread.Sleep(<span class="hljs-number">1000</span>));
task.Wait(); <span class="hljs-comment">// ç­‰è¿™ä¸ªä»»åŠ¡å¹²å®Œ</span>
</code></pre>
<h3 data-id="heading-26">4.2 ç­‰å¾…æ‰€æœ‰ä»»åŠ¡ï¼šTask.WaitAll ()</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ‰¹é‡ä»»åŠ¡éƒ½å¹²å®Œæ‰ç»§ç»­ï¼ˆæ¯”å¦‚æ‰¹é‡æŸ¥è¯¢æ•°æ®ï¼Œæ±‡æ€»æ‰€æœ‰ç»“æœï¼‰ã€‚</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">// åˆ›å»º3ä¸ªä»»åŠ¡</span>
Task t1 = Task.Run(() =&gt; { Thread.Sleep(<span class="hljs-number">500</span>); Console.WriteLine(<span class="hljs-string">" t1å¹²å®Œ"</span>); });
Task t2 = Task.Run(() =&gt; { Thread.Sleep(<span class="hljs-number">1000</span>); Console.WriteLine(<span class="hljs-string">" t2å¹²å®Œ"</span>); });
Task t3 = Task.Run(() =&gt; { Thread.Sleep(<span class="hljs-number">1500</span>); Console.WriteLine(<span class="hljs-string">" t3å¹²å®Œ"</span>); });

<span class="hljs-comment">// ç­‰æ‰€æœ‰ä»»åŠ¡å¹²å®Œï¼ˆç­‰æœ€æ…¢çš„t3ï¼Œè€—æ—¶1.5ç§’ï¼‰</span>
Task.WaitAll(t1, t2, t3);
Console.WriteLine(<span class="hljs-string">" æ‰€æœ‰ä»»åŠ¡éƒ½å¹²å®Œäº†ï¼Œæ±‡æ€»ç»“æœ"</span>);
</code></pre>
<h3 data-id="heading-27">4.3 ç­‰å¾…ä»»æ„ä¸€ä¸ªä»»åŠ¡ï¼šTask.WaitAny ()</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤šä¸ªä»»åŠ¡æŠ¢è·‘ï¼Œæ‹¿åˆ°ç¬¬ä¸€ä¸ªç»“æœå°±ç»§ç»­ï¼ˆæ¯”å¦‚å¤šæºæŸ¥è¯¢ï¼Œç¼“å­˜æ¯”æ•°æ®åº“å¿«ï¼Œæ‹¿ç¼“å­˜ç»“æœå°±è¿”å›ï¼‰ã€‚</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">// åˆ›å»º2ä¸ªä»»åŠ¡ï¼ˆç¼“å­˜æŸ¥è¯¢å¿«ï¼Œæ•°æ®åº“æŸ¥è¯¢æ…¢ï¼‰</span>
Task cacheTask = Task.Run(() =&gt; { Thread.Sleep(<span class="hljs-number">500</span>); Console.WriteLine(<span class="hljs-string">" ç¼“å­˜æŸ¥è¯¢å®Œæˆ"</span>); });
Task dbTask = Task.Run(() =&gt; { Thread.Sleep(<span class="hljs-number">2000</span>); Console.WriteLine(<span class="hljs-string">" æ•°æ®åº“æŸ¥è¯¢å®Œæˆ"</span>); });

<span class="hljs-comment">// ç­‰ç¬¬ä¸€ä¸ªä»»åŠ¡å¹²å®Œï¼ˆcacheTaskå…ˆå®Œæˆï¼Œè€—æ—¶0.5ç§’ï¼‰</span>
Task.WaitAny(cacheTask, dbTask);
Console.WriteLine(<span class="hljs-string">" æ‹¿åˆ°ç¬¬ä¸€ä¸ªç»“æœï¼Œç›´æ¥è¿”å›"</span>);
</code></pre>
<h2 data-id="heading-28">äº”ã€Task çš„å¼‚å¸¸å¤„ç†ï¼ˆä¸åå¼‚å¸¸ï¼Œæ–°æ‰‹èƒ½å®šä½é—®é¢˜ï¼‰</h2>
<p>ThreadPool çš„å¼‚å¸¸ä¼š â€œæ‚„æ‚„æ¶ˆå¤±â€ï¼ŒTask ä¼šæŠŠå¼‚å¸¸åŒ…è£…åœ¨Â <code>AggregateException</code>Â é‡Œï¼Œä¸»çº¿ç¨‹èƒ½ç²¾å‡†æ•è·ã€‚</p>
<h3 data-id="heading-29">5.1 å•ä¸ªä»»åŠ¡çš„å¼‚å¸¸æ•è·</h3>
<pre><code class="hljs language-cs" lang="cs">Task errorTask = Task.Run(() =&gt;
{
    <span class="hljs-comment">// æ¨¡æ‹Ÿä»»åŠ¡å‡ºé”™ï¼šé™¤ä»¥0</span>
    <span class="hljs-built_in">int</span> num = <span class="hljs-number">0</span>;
    <span class="hljs-built_in">int</span> result = <span class="hljs-number">10</span> / num;
});

<span class="hljs-keyword">try</span>
{
    errorTask.Wait(); <span class="hljs-comment">// è°ƒç”¨Wait/Resultæ—¶ï¼Œå¼‚å¸¸ä¼šæŠ›åˆ°ä¸»çº¿ç¨‹</span>
}
<span class="hljs-keyword">catch</span> (AggregateException ex)
{
    <span class="hljs-comment">// éå†InnerExceptionsï¼Œæ‹¿åˆ°çœŸå®å¼‚å¸¸</span>
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> innerEx <span class="hljs-keyword">in</span> ex.InnerExceptions)
    {
        Console.WriteLine(<span class="hljs-string">$"æ•è·å¼‚å¸¸ï¼š<span class="hljs-subst">{innerEx.GetType().Name}</span> - <span class="hljs-subst">{innerEx.Message}</span>"</span>);
    }
}
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<pre><code class="hljs">æ•è·å¼‚å¸¸ï¼šDivideByZeroException - å°è¯•é™¤ä»¥é›¶ã€‚
</code></pre>
<h3 data-id="heading-30">5.2 æ‰¹é‡ä»»åŠ¡çš„å¼‚å¸¸æ•è·</h3>
<pre><code class="hljs language-cs" lang="cs">Task t1 = Task.Run(() =&gt; { <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-string">"å‚æ•°ä¸ºç©º"</span>); });
Task t2 = Task.Run(() =&gt; { <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IndexOutOfRangeException(<span class="hljs-string">"ç´¢å¼•è¶Šç•Œ"</span>); });

<span class="hljs-keyword">try</span>
{
    Task.WaitAll(t1, t2);
}
<span class="hljs-keyword">catch</span> (AggregateException ex)
{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> innerEx <span class="hljs-keyword">in</span> ex.InnerExceptions)
    {
        Console.WriteLine(<span class="hljs-string">$"ğŸš« å¼‚å¸¸ï¼š<span class="hljs-subst">{innerEx.Message}</span>"</span>);
    }
}
</code></pre>
<h2 data-id="heading-31">å…­ã€Task çš„è¿›é˜¶ï¼šasync/awaitï¼ˆè¯­æ³•ç³–ï¼Œç®€åŒ–å¼‚æ­¥ä»£ç ï¼‰</h2>
<p><code>async/await</code>Â æ˜¯ Task çš„ â€œè¯­æ³•ç³–â€â€”â€” ä¸ç”¨å†™Â <code>Wait()</code>/<code>Result</code>ï¼Œè®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ï¼Œæ–°æ‰‹å­¦å®ŒåŸºç¡€åå¿…å­¦ã€‚</p>
<h3 data-id="heading-32">6.1 åŸºç¡€ç”¨æ³•ï¼ˆå¼‚æ­¥è®¡ç®—æ±‚å’Œï¼‰</h3>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">// æ­¥éª¤1ï¼šå®šä¹‰å¼‚æ­¥æ–¹æ³•ï¼ˆæ ‡è®°asyncï¼Œè¿”å›Task/Task&lt;T&gt;ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">async</span> Task&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">CalculateSumAsync</span>()</span>
{
    <span class="hljs-comment">// æ­¥éª¤2ï¼šawait æ›¿ä»£ Wait()/Resultï¼Œéé˜»å¡ç­‰å¾…</span>
    <span class="hljs-built_in">int</span> sum = <span class="hljs-keyword">await</span> Task.Run(() =&gt;
    {
        Thread.Sleep(<span class="hljs-number">1000</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span> + <span class="hljs-number">20</span>;
    });
    <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-comment">// æ­¥éª¤3ï¼šè°ƒç”¨å¼‚æ­¥æ–¹æ³•ï¼ˆæ§åˆ¶å°ç¨‹åºéœ€Waitï¼ŒWinForm/Webä¸ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">async</span> Task <span class="hljs-title">Main</span>()</span>
{
    <span class="hljs-built_in">int</span> sum = <span class="hljs-keyword">await</span> CalculateSumAsync();
    Console.WriteLine(<span class="hljs-string">$"ğŸ ç»“æœï¼š<span class="hljs-subst">{sum}</span>"</span>); <span class="hljs-comment">// è¾“å‡º30</span>
}

<span class="hljs-comment">// æ‰§è¡Œå…¥å£</span>
Main().Wait();
</code></pre>
<p><strong>æ ¸å¿ƒè§„åˆ™</strong>ï¼š</p>
<ul>
<li>æ–¹æ³•å¿…é¡»æ ‡è®°Â <code>async</code>ï¼›</li>
<li>è¿”å›å€¼æ˜¯Â <code>Task</code>ï¼ˆæ— è¿”å›å€¼ï¼‰æˆ–Â <code>Task&lt;T&gt;</code>ï¼ˆæœ‰è¿”å›å€¼ï¼‰ï¼›</li>
<li>ç”¨Â <code>await</code>Â ç­‰å¾… Task å®Œæˆï¼Œä»£ç æ›´ç®€æ´ï¼Œä¸é˜»å¡çº¿ç¨‹ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Chrome DevTools è¯¦è§£ç³»åˆ—ä¹‹ Console é¢æ¿]]></title>    <link>https://juejin.cn/post/7586579021283737654</link>    <guid>https://juejin.cn/post/7586579021283737654</guid>    <pubDate>2025-12-23T02:38:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586579021283737654" data-draft-id="7586582977707704362" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Chrome DevTools è¯¦è§£ç³»åˆ—ä¹‹ Console é¢æ¿"/> <meta itemprop="keywords" content="JavaScript,Chrome"/> <meta itemprop="datePublished" content="2025-12-23T02:38:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…«å“¥ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/114004940297325"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Chrome DevTools è¯¦è§£ç³»åˆ—ä¹‹ Console é¢æ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/114004940297325/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…«å“¥ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T02:38:55.000Z" title="Tue Dec 23 2025 02:38:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">ğŸš€ Chrome DevTools Console é¢æ¿é«˜çº§ç”¨æ³•å®Œå…¨æŒ‡å—</h2>
<blockquote>
<p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼ŒConsole é¢æ¿æ˜¯æˆ‘ä»¬æ—¥å¸¸å·¥ä½œä¸­æœ€å¸¸ç”¨çš„å·¥å…·ä¹‹ä¸€ã€‚ä½†å¤§å¤šæ•°å¼€å‘è€…å¯èƒ½åªä½¿ç”¨äº†å…¶ 20% çš„åŠŸèƒ½ï¼Œè€Œå¿½ç•¥äº†é‚£äº›èƒ½å¤§å¹…æå‡å¼€å‘æ•ˆç‡çš„é«˜çº§ç‰¹æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢ç´¢ Console é¢æ¿çš„é«˜çº§ç”¨æ³•ï¼Œå¸®åŠ©ä½ ä»"ä¼šç”¨"æå‡åˆ°"ç²¾é€š"ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ“‹ ä¸€ã€åŸºç¡€å›é¡¾ï¼šConsole é¢æ¿çš„æ ¸å¿ƒåŠŸèƒ½</h3>
<p>åœ¨æ·±å…¥é«˜çº§ç”¨æ³•ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å¿«é€Ÿå›é¡¾ä¸€ä¸‹ Console é¢æ¿çš„æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ol>
<li><strong>æ—¥å¿—è¾“å‡º</strong>ï¼š<code>console.log()</code>ã€<code>console.info()</code>ã€<code>console.warn()</code>ã€<code>console.error()</code></li>
<li><strong>æ–­è¨€åŠŸèƒ½</strong>ï¼š<code>console.assert()</code></li>
<li><strong>è®¡æ•°åŠŸèƒ½</strong>ï¼š<code>console.count()</code>ã€<code>console.countReset()</code></li>
<li><strong>è®¡æ—¶åŠŸèƒ½</strong>ï¼š<code>console.time()</code>ã€<code>console.timeEnd()</code></li>
<li><strong>åˆ†ç»„åŠŸèƒ½</strong>ï¼š<code>console.group()</code>ã€<code>console.groupEnd()</code>ã€<code>console.groupCollapsed()</code></li>
<li><strong>è¡¨æ ¼è¾“å‡º</strong>ï¼š<code>console.table()</code></li>
<li><strong>æ¸…é™¤æ§åˆ¶å°</strong>ï¼š<code>console.clear()</code></li>
</ol>
<p align="center">å›¾ä¸€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8c22f605adc4ca996260e7dd544f465~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWr5ZOl56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767062335&amp;x-signature=wPpFDRhb63DW%2Bel0FkC639BZFVA%3D" alt="6751645b-3a12-4afb-955a-1b7bb724523d.png" loading="lazy"/></p>
<p align="center">å›¾äºŒ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac3879ced1aa46c8a5cf996b863afcd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWr5ZOl56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767062335&amp;x-signature=1ZReUJ1%2B1tv4qo%2BfMRwsbcHynJM%3D" alt="75e13492-c4fe-404f-909c-26e82331cc66.png" loading="lazy"/></p>
<p align="center">å›¾ä¸‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43224096d9ed4d2c868ad845d3dbc9db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWr5ZOl56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767062335&amp;x-signature=6l1pEHXNrfwOow20nH5HkMRsREc%3D" alt="93eaba3f-2c37-4d35-b860-3fd054dff333.png" loading="lazy"/></p>
<p align="center">å›¾å››</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a19cb289e4a0490c8912da07fa5f5733~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWr5ZOl56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767062335&amp;x-signature=YMBCl2FKJjLYfDOJN9BaNCTuH1s%3D" alt="65ae199b-52c6-4a55-8238-e4c577561bac.png" loading="lazy"/></p>
<p align="center">å›¾äº”</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47644fea6dc04305a8537ed30cacbede~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWr5ZOl56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767062335&amp;x-signature=Z6WTudEKr%2BzDPKieuAqOJp9nnIQ%3D" alt="df8f1943-8b6f-4d3a-87ab-f979c5e7119c.png" loading="lazy"/></p>
<p align="center">å›¾å…­</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/825346d9cf994e388f74975dcdc4dc40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWr5ZOl56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767062335&amp;x-signature=xEBH8zux342impp3EKpfTeYcQVc%3D" alt="7df43f42-2951-4b8b-9a88-8225c76bf506.png" loading="lazy"/></p>
<p>è¿™äº›åŸºç¡€åŠŸèƒ½å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰ï¼Œä½† Console é¢æ¿è¿œä¸æ­¢è¿™äº›ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ¢ç´¢å…¶é«˜çº§ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-2">âš¡ äºŒã€é«˜çº§å‘½ä»¤ä¸å¿«æ·æ“ä½œ</h3>
<h4 data-id="heading-3">ğŸ” 1. é€‰æ‹© DOM å…ƒç´ </h4>
<p>åœ¨ Console ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å¿«æ·æ–¹å¼å¿«é€Ÿé€‰æ‹© DOM å…ƒç´ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€‰æ‹©å½“å‰é€‰ä¸­çš„å…ƒç´ ï¼ˆåœ¨ Elements é¢æ¿ä¸­ï¼‰</span>
$0

<span class="hljs-comment">// é€‰æ‹©ä¸Šä¸€ä¸ªé€‰ä¸­çš„å…ƒç´ </span>
$1

<span class="hljs-comment">// é€‰æ‹©ä¸Šä¸Šä¸ªé€‰ä¸­çš„å…ƒç´ </span>
$2

<span class="hljs-comment">// ç±»ä¼¼äº document.querySelector()</span>
$(<span class="hljs-string">'selector'</span>)

<span class="hljs-comment">// ç±»ä¼¼äº document.querySelectorAll()</span>
$$(<span class="hljs-string">'selector'</span>)
</code></pre>
<p><strong>æ¡ˆä¾‹</strong>ï¼šå¿«é€Ÿè·å–å¹¶ä¿®æ”¹é¡µé¢å…ƒç´ </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ª div å…ƒç´ </span>
<span class="hljs-keyword">const</span> firstDiv = $(<span class="hljs-string">'div'</span>);

<span class="hljs-comment">// ä¿®æ”¹å…¶æ ·å¼</span>
firstDiv.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">'red'</span>;

<span class="hljs-comment">// è·å–æ‰€æœ‰æŒ‰é’®å…ƒç´ å¹¶æ·»åŠ ç‚¹å‡»äº‹ä»¶</span>
$$(<span class="hljs-string">'button'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">btn</span> =&gt;</span> {
    btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Button clicked!'</span>));
});
</code></pre>
<h4 data-id="heading-4">ğŸ› ï¸ 2. å‘½ä»¤è¡Œ API é«˜çº§ç”¨æ³•</h4>
<h5 data-id="heading-5">ğŸ¯ ï¼ˆ1ï¼‰ç›‘æ§ DOM äº‹ä»¶</h5>
<p>ä½¿ç”¨ <code>monitorEvents()</code> å¯ä»¥ç›‘æ§æŒ‡å®šå…ƒç´ çš„äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘æ§æŒ‰é’®çš„æ‰€æœ‰äº‹ä»¶</span>
<span class="hljs-keyword">const</span> button = $(<span class="hljs-string">'button'</span>);
<span class="hljs-title function_">monitorEvents</span>(button);

<span class="hljs-comment">// ç›‘æ§æŒ‰é’®çš„ç‰¹å®šäº‹ä»¶</span>
<span class="hljs-title function_">monitorEvents</span>(button, [<span class="hljs-string">'click'</span>, <span class="hljs-string">'mouseover'</span>]);

<span class="hljs-comment">// åœæ­¢ç›‘æ§</span>
<span class="hljs-title function_">unmonitorEvents</span>(button);
</code></pre>
<p>å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºäº‹ä»¶å¯¹è±¡ï¼Œä¾¿äºè°ƒè¯•äº‹ä»¶æµå’ŒçŠ¶æ€å˜åŒ–</p>
<h5 data-id="heading-6">ğŸ“Š ï¼ˆ2ï¼‰æ£€æŸ¥å…ƒç´ å±æ€§</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æŸ¥å…ƒç´ çš„æ‰€æœ‰å±æ€§</span>
<span class="hljs-title function_">dir</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>);

<span class="hljs-comment">// æ£€æŸ¥å…ƒç´ çš„è®¡ç®—æ ·å¼</span>
<span class="hljs-title function_">getComputedStyle</span>($(<span class="hljs-string">'div'</span>));

<span class="hljs-comment">// è·å–å…ƒç´ çš„å°ºå¯¸å’Œä½ç½®</span>
<span class="hljs-title function_">getBoundingClientRect</span>($(<span class="hljs-string">'div'</span>));
</code></pre>
<h5 data-id="heading-7">â±ï¸ ï¼ˆ3ï¼‰æ€§èƒ½ç›¸å…³å‘½ä»¤</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼€å§‹å½•åˆ¶æ€§èƒ½</span>
performance.<span class="hljs-title function_">mark</span>(<span class="hljs-string">'start'</span>);

<span class="hljs-comment">// æ‰§è¡Œä¸€äº›æ“ä½œ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
    <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    div.<span class="hljs-property">textContent</span> = i;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div);
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(div);
}

<span class="hljs-comment">// ç»“æŸå½•åˆ¶å¹¶æŸ¥çœ‹ç»“æœ</span>
performance.<span class="hljs-title function_">mark</span>(<span class="hljs-string">'end'</span>);
performance.<span class="hljs-title function_">measure</span>(<span class="hljs-string">'loop'</span>, <span class="hljs-string">'start'</span>, <span class="hljs-string">'end'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">table</span>(performance.<span class="hljs-title function_">getEntriesByName</span>(<span class="hljs-string">'loop'</span>));
</code></pre>
<h3 data-id="heading-8">ğŸ”§ ä¸‰ã€é«˜çº§è°ƒè¯•æŠ€å·§</h3>
<h4 data-id="heading-9">ğŸ¯ 1. æ¡ä»¶æ–­ç‚¹</h4>
<p>è™½ç„¶æ¡ä»¶æ–­ç‚¹é€šå¸¸åœ¨ Sources é¢æ¿è®¾ç½®ï¼Œä½† Console é¢æ¿ä¹Ÿèƒ½å®ç°ç±»ä¼¼åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»…å½“ i ä¸º 500 æ—¶è¾“å‡ºæ—¥å¿—</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    <span class="hljs-keyword">if</span> (i === <span class="hljs-number">500</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Reached 500:'</span>, i);
    }
    <span class="hljs-comment">// å…¶ä»–æ“ä½œ</span>
}
</code></pre>
<h4 data-id="heading-10">ğŸ”„ 2. è°ƒè¯• DOM å˜åŒ–</h4>
<p>ä½¿ç”¨ <code>MutationObserver</code> ç›‘æ§ DOM å˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">(<span class="hljs-params">mutations</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'DOM å˜åŒ–:'</span>, mutations);
});

observer.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>, {
    <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">attributes</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">characterData</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span>
});
</code></pre>
<h4 data-id="heading-11">ğŸš¦ 3. è°ƒè¯•å¼‚æ­¥ä»£ç </h4>
<p>ä½¿ç”¨ <code>debugger</code> è¯­å¥å’Œ <code>await</code> è°ƒè¯•å¼‚æ­¥ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data'</span>);
        <span class="hljs-keyword">debugger</span>; <span class="hljs-comment">// åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹</span>
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Data:'</span>, data);
        <span class="hljs-keyword">return</span> data;
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error:'</span>, error);
    }
}

<span class="hljs-title function_">fetchData</span>();
</code></pre>
<h3 data-id="heading-12">ğŸ“ å››ã€Console API è¿›é˜¶</h3>
<h4 data-id="heading-13">ğŸŒˆ 1. æ ¼å¼åŒ–è¾“å‡º</h4>
<p>Console æ”¯æŒå¤šç§æ ¼å¼åŒ–é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºæœ¬æ ¼å¼åŒ–</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hello %s, you are %d years old'</span>, <span class="hljs-string">'John'</span>, <span class="hljs-number">30</span>);

<span class="hljs-comment">// æ ·å¼åŒ–è¾“å‡º</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'%cThis is styled text'</span>, <span class="hljs-string">'color: red; font-size: 20px; font-weight: bold;'</span>);

<span class="hljs-comment">// ç»„åˆæ ·å¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
    <span class="hljs-string">'%cWarning:%c This is a %cstyled%c message'</span>,
    <span class="hljs-string">'color: orange; font-weight: bold;'</span>,
    <span class="hljs-string">''</span>,
    <span class="hljs-string">'color: red; text-decoration: underline;'</span>,
    <span class="hljs-string">''</span>
);
</code></pre>
<p>Console çš„æ ¼å¼åŒ–è¾“å‡ºåŠŸèƒ½å…è®¸å¼€å‘è€…ä»¥ç‰¹å®šæ–¹å¼æ§åˆ¶æ–‡æœ¬çš„æ˜¾ç¤ºæ•ˆæœï¼ŒåŒ…æ‹¬æ ·å¼ã€å¸ƒå±€å’Œæ•°æ®ç»“æ„</p>
<h4 data-id="heading-14">2. è‡ªå®šä¹‰æ—¥å¿—çº§åˆ«</h4>
<p>ä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„æ—¥å¿—å‡½æ•°ï¼Œå®ç°æ›´çµæ´»çš„æ—¥å¿—ç®¡ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * è‡ªå®šä¹‰æ—¥å¿—å‡½æ•°ï¼Œæ”¯æŒä¸åŒçº§åˆ«å’Œæ ·å¼
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">level</span> - æ—¥å¿—çº§åˆ« (debug, info, warn, error)
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">message</span> - æ—¥å¿—æ¶ˆæ¯
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">*</span>} <span class="hljs-variable">data</span> - é™„åŠ æ•°æ®
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">level, message, data = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">const</span> styles = {
        <span class="hljs-attr">debug</span>: <span class="hljs-string">'color: blue;'</span>,
        <span class="hljs-attr">info</span>: <span class="hljs-string">'color: green;'</span>,
        <span class="hljs-attr">warn</span>: <span class="hljs-string">'color: orange;'</span>,
        <span class="hljs-attr">error</span>: <span class="hljs-string">'color: red; font-weight: bold;'</span>
    };
    
    <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">`%c[<span class="hljs-subst">${timestamp}</span>] [<span class="hljs-subst">${level.toUpperCase()}</span>] <span class="hljs-subst">${message}</span>`</span>,
        styles[level],
        data || <span class="hljs-string">''</span>
    );
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰æ—¥å¿—</span>
<span class="hljs-title function_">log</span>(<span class="hljs-string">'debug'</span>, <span class="hljs-string">'This is a debug message'</span>);
<span class="hljs-title function_">log</span>(<span class="hljs-string">'info'</span>, <span class="hljs-string">'User logged in'</span>, { <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">username</span>: <span class="hljs-string">'john_doe'</span> });
<span class="hljs-title function_">log</span>(<span class="hljs-string">'warn'</span>, <span class="hljs-string">'Deprecated function used'</span>);
<span class="hljs-title function_">log</span>(<span class="hljs-string">'error'</span>, <span class="hljs-string">'API request failed'</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">404</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">'/api/data'</span> });
</code></pre>
<h4 data-id="heading-15">3. å †å¿«ç…§ä¸å†…å­˜åˆ†æ</h4>
<p>ä½¿ç”¨ Console è¿›è¡Œå†…å­˜åˆ†æï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰‹åŠ¨è§¦å‘åƒåœ¾å›æ”¶ï¼ˆä»…åœ¨å¼€å‘è€…å·¥å…·æ‰“å¼€æ—¶å¯ç”¨ï¼‰</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">gc</span>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">gc</span>();
}

<span class="hljs-comment">// åˆ›å»ºå †å¿«ç…§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">takeHeapSnapshot</span>();

<span class="hljs-comment">// æ¯”è¾ƒå †å¿«ç…§</span>
<span class="hljs-keyword">const</span> snapshot1 = <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">takeHeapSnapshot</span>();
<span class="hljs-comment">// æ‰§è¡Œä¸€äº›æ“ä½œ</span>
<span class="hljs-keyword">const</span> snapshot2 = <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">takeHeapSnapshot</span>();
<span class="hljs-comment">// æ¯”è¾ƒä¸¤ä¸ªå¿«ç…§çš„å·®å¼‚</span>
</code></pre>
<p>æ³¨æ„å…¼å®¹æ€§ï¼Œæœ‰äº›æµè§ˆå™¨ä¸æ”¯æŒï¼å½“å‰æˆ‘ç”¨çš„chrome 143.0.7499.148 ä¸æ”¯æŒ</p>
<h3 data-id="heading-16">äº”ã€å®é™…åº”ç”¨æ¡ˆä¾‹</h3>
<h4 data-id="heading-17">1. æ€§èƒ½ä¼˜åŒ–æ¡ˆä¾‹ï¼šç›‘æ§å‡½æ•°æ‰§è¡Œæ—¶é—´</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ€§èƒ½ç›‘æ§è£…é¥°å™¨
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">func</span> - è¦ç›‘æ§çš„å‡½æ•°
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Function</span>} - åŒ…è£…åçš„å‡½æ•°
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">withPerformanceMonitoring</span>(<span class="hljs-params">func</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
        <span class="hljs-keyword">const</span> functionName = func.<span class="hljs-property">name</span> || <span class="hljs-string">'anonymous'</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(functionName);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> result = func.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(functionName);
            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(functionName);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in <span class="hljs-subst">${functionName}</span>:`</span>, error);
            <span class="hljs-keyword">throw</span> error;
        }
    };
}

<span class="hljs-comment">// ä½¿ç”¨è£…é¥°å™¨</span>
<span class="hljs-keyword">const</span> slowFunction = <span class="hljs-title function_">withPerformanceMonitoring</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">slowFunction</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; i++) {
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(i);
    }
});

<span class="hljs-title function_">slowFunction</span>(); <span class="hljs-comment">// è¾“å‡º: slowFunction: 12.345ms</span>
</code></pre>
<h4 data-id="heading-18">2. è°ƒè¯•æ¡ˆä¾‹ï¼šè¿½è¸ªå‡½æ•°è°ƒç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å‡½æ•°è°ƒç”¨è¿½è¸ªå™¨
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">obj</span> - åŒ…å«è¦è¿½è¸ªæ–¹æ³•çš„å¯¹è±¡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string[]</span>} <span class="hljs-variable">methods</span> - è¦è¿½è¸ªçš„æ–¹æ³•åæ•°ç»„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">traceFunctionCalls</span>(<span class="hljs-params">obj, methods</span>) {
    methods.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">methodName</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> originalMethod = obj[methodName];
        
        obj[methodName] = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[TRACE] <span class="hljs-subst">${methodName}</span> called with args:`</span>, args);
            <span class="hljs-keyword">const</span> result = originalMethod.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[TRACE] <span class="hljs-subst">${methodName}</span> returned:`</span>, result);
            <span class="hljs-keyword">return</span> result;
        };
    });
}

<span class="hljs-comment">// ä½¿ç”¨è¿½è¸ªå™¨</span>
<span class="hljs-keyword">const</span> calculator = {
    <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; },
    <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a - b; }
};

<span class="hljs-title function_">traceFunctionCalls</span>(calculator, [<span class="hljs-string">'add'</span>, <span class="hljs-string">'subtract'</span>]);

calculator.<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// è¾“å‡ºè°ƒç”¨å’Œè¿”å›ä¿¡æ¯</span>
</code></pre>
<h4 data-id="heading-19">3. å¼€å‘è¾…åŠ©ï¼šåˆ›å»ºä¸´æ—¶ UI è°ƒè¯•å·¥å…·</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * åˆ›å»ºä¸€ä¸ªä¸´æ—¶è°ƒè¯•é¢æ¿
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">data</span> - è¦æ˜¾ç¤ºçš„æ•°æ®
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createDebugPanel</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">const</span> panel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    panel.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 15px;
        border-radius: 5px;
        z-index: 9999;
        font-family: monospace;
        max-width: 300px;
        max-height: 400px;
        overflow-y: auto;
    `</span>;
    
    <span class="hljs-keyword">const</span> closeBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'button'</span>);
    closeBtn.<span class="hljs-property">textContent</span> = <span class="hljs-string">'Ã—'</span>;
    closeBtn.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
        position: absolute;
        top: 5px;
        right: 5px;
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
    `</span>;
    
    closeBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(panel);
    });
    
    panel.<span class="hljs-title function_">appendChild</span>(closeBtn);
    
    <span class="hljs-keyword">const</span> content = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'pre'</span>);
    content.<span class="hljs-property">textContent</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>);
    panel.<span class="hljs-title function_">appendChild</span>(content);
    
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(panel);
}

<span class="hljs-comment">// ä½¿ç”¨è°ƒè¯•é¢æ¿</span>
<span class="hljs-title function_">createDebugPanel</span>({
    <span class="hljs-attr">user</span>: { <span class="hljs-attr">id</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span> },
    <span class="hljs-attr">appState</span>: { <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span> },
    <span class="hljs-attr">performance</span>: { <span class="hljs-attr">loadTime</span>: <span class="hljs-number">1234</span>, <span class="hljs-attr">apiCalls</span>: <span class="hljs-number">5</span> }
});
</code></pre>
<h3 data-id="heading-20">å…­ã€Console é¢æ¿çš„éšè—åŠŸèƒ½</h3>
<h4 data-id="heading-21">1. å®æ—¶è¡¨è¾¾å¼</h4>
<p>Console é¢æ¿é¡¶éƒ¨æœ‰ä¸€ä¸ª"Create Live Expression"æŒ‰é’®ï¼ˆçœ¼ç›å›¾æ ‡ï¼‰ï¼Œå¯ä»¥åˆ›å»ºå®æ—¶æ›´æ–°çš„è¡¨è¾¾å¼ã€‚è¿™å¯¹äºç›‘æ§å˜é‡å˜åŒ–ã€DOM å±æ€§æˆ–æ€§èƒ½æŒ‡æ ‡éå¸¸æœ‰ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25d12334d9104298bbced00b88ef0ef3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWr5ZOl56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767062335&amp;x-signature=YOfNQX2Yu7CvoHJqdDUsNylU%2FM4%3D" alt="ae4c03fc-94d6-44ad-bf03-7120af8ed017.png" loading="lazy"/>
<strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç›‘æ§é¡µé¢æ»šåŠ¨ä½ç½®ï¼š<code>window.scrollY</code></li>
<li>ç›‘æ§å…ƒç´ å°ºå¯¸ï¼š<code>$('div').offsetHeight</code></li>
<li>ç›‘æ§æ—¶é—´å˜åŒ–ï¼š<code>new Date().toLocaleTimeString()</code></li>
</ul>
<h4 data-id="heading-22">2. ç½‘ç»œè¯·æ±‚æ¨¡æ‹Ÿ</h4>
<p>ä½¿ç”¨ <code>fetch</code> æˆ– <code>XMLHttpRequest</code> åœ¨ Console ä¸­æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ fetch æ¨¡æ‹Ÿ POST è¯·æ±‚</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/data'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
    },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span>,
        <span class="hljs-attr">email</span>: <span class="hljs-string">'john@example.com'</span>
    })
})
.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Response:'</span>, data))
.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error:'</span>, error));
</code></pre>
<h4 data-id="heading-23">3. å…¨å±€å˜é‡æ£€æŸ¥</h4>
<p>ä½¿ç”¨ <code>window</code> å¯¹è±¡æ£€æŸ¥å…¨å±€å˜é‡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ—å‡ºæ‰€æœ‰å…¨å±€å˜é‡</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">window</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> !key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'_'</span>));

<span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸä¸ªå…¨å±€å˜é‡</span>
<span class="hljs-string">'jQuery'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>; <span class="hljs-comment">// æ£€æŸ¥ jQuery æ˜¯å¦åŠ è½½</span>

<span class="hljs-comment">// ç›‘æ§å…¨å±€å˜é‡å˜åŒ–</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">window</span>, <span class="hljs-string">'myGlobalVar'</span>, {
    <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_myGlobalVar</span>; },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'myGlobalVar changed from'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">_myGlobalVar</span>, <span class="hljs-string">'to'</span>, value);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_myGlobalVar</span> = value;
    }
});
</code></pre>
<h3 data-id="heading-24">ä¸ƒã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç•™ä¸‹æ§åˆ¶å°æ—¥å¿—</strong>ï¼šä½¿ç”¨æ„å»ºå·¥å…·ç§»é™¤æˆ–ç¦ç”¨ç”Ÿäº§ç¯å¢ƒçš„æ§åˆ¶å°è¾“å‡º</li>
<li><strong>ä½¿ç”¨é€‚å½“çš„æ—¥å¿—çº§åˆ«</strong>ï¼šæ ¹æ®æ¶ˆæ¯çš„é‡è¦æ€§é€‰æ‹©åˆé€‚çš„æ—¥å¿—æ–¹æ³•</li>
<li><strong>ä¿æŒæ—¥å¿—ç®€æ´</strong>ï¼šé¿å…è¾“å‡ºè¿‡å¤šä¸å¿…è¦çš„ä¿¡æ¯</li>
<li><strong>ä½¿ç”¨åˆ†ç»„å’Œè¡¨æ ¼</strong>ï¼šå¯¹äºå¤æ‚æ•°æ®ï¼Œä½¿ç”¨ <code>console.group()</code> å’Œ <code>console.table()</code> æé«˜å¯è¯»æ€§</li>
<li><strong>å®šæœŸæ¸…ç†æ§åˆ¶å°</strong>ï¼šä½¿ç”¨ <code>console.clear()</code> ä¿æŒæ§åˆ¶å°æ•´æ´</li>
<li><strong>åˆ©ç”¨æ¡ä»¶æ—¥å¿—</strong>ï¼šåœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡æ§åˆ¶æ—¥å¿—è¾“å‡º</li>
</ol>
<h3 data-id="heading-25">å…«ã€æ€»ç»“</h3>
<p>Chrome DevTools Console é¢æ¿æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼ŒæŒæ¡å…¶é«˜çº§ç”¨æ³•å¯ä»¥å¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚æœ¬æ–‡ä»‹ç»äº† Console é¢æ¿çš„é«˜çº§å‘½ä»¤ã€è°ƒè¯•æŠ€å·§ã€API è¿›é˜¶ç”¨æ³•å’Œå®é™…åº”ç”¨æ¡ˆä¾‹ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°åˆ©ç”¨è¿™ä¸ªå·¥å…·ã€‚</p>
<p>è®°ä½ï¼Œå·¥å…·çš„ä»·å€¼åœ¨äºä½¿ç”¨ï¼Œåªæœ‰ä¸æ–­å®è·µå’Œæ¢ç´¢ï¼Œæ‰èƒ½çœŸæ­£æŒæ¡è¿™äº›é«˜çº§ç‰¹æ€§ã€‚å¿«å»æ‰“å¼€ Chrome DevToolsï¼Œå°è¯•æœ¬æ–‡ä»‹ç»çš„æŠ€å·§å§ï¼</p>
<p>Happy coding! ğŸš€</p>
<hr/>
<p><strong>æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚</strong> Â <strong>å¦‚æœä½ è§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«ï¼Œä¹Ÿæ¬¢è¿å…³æ³¨æˆ‘ï¼Œè·å–æ›´å¤šå‰ç«¯æŠ€æœ¯å¹²è´§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äº react-hook-form çš„ isValid åœ¨æœ‰äº›åœºæ™¯ä¸‹çš„å€¼æ€»æ˜¯ false é—®é¢˜]]></title>    <link>https://juejin.cn/post/7586614240530759706</link>    <guid>https://juejin.cn/post/7586614240530759706</guid>    <pubDate>2025-12-23T03:43:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586614240530759706" data-draft-id="7586614240530726938" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äº react-hook-form çš„ isValid åœ¨æœ‰äº›åœºæ™¯ä¸‹çš„å€¼æ€»æ˜¯ false é—®é¢˜"/> <meta itemprop="keywords" content="React.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-23T03:43:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¨æ™šæˆ‘è¾“ç»™äº†ä¸€è¾†AE86"/> <meta itemprop="url" content="https://juejin.cn/user/3087084382068286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äº react-hook-form çš„ isValid åœ¨æœ‰äº›åœºæ™¯ä¸‹çš„å€¼æ€»æ˜¯ false é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3087084382068286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¨æ™šæˆ‘è¾“ç»™äº†ä¸€è¾†AE86
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:43:43.000Z" title="Tue Dec 23 2025 03:43:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸ºä»€ä¹ˆ react-hook-form çš„ isValid ä¸ºä»€ä¹ˆæœ‰æ—¶åœ¨è¡¨å•éªŒè¯é€šè¿‡æ²¡æœ‰ errors çš„æƒ…å†µä¸‹ä¼šå‡ºç° falseï¼Ÿ</p>
<p>åœ¨ React Hook Form ä¸­ï¼Œ<code>formState.isValid</code> ä¸º <code>true</code> è¡¨ç¤ºè¡¨å•å½“å‰<strong>å®Œå…¨æœ‰æ•ˆ</strong>ï¼ˆæ— ä»»ä½•éªŒè¯é”™è¯¯ï¼‰ï¼Œä½†å³ä½¿ <code>errors</code> å¯¹è±¡ä¸ºç©ºï¼ˆ<code>{}</code>ï¼‰ï¼Œ<code>isValid</code> æœ‰æ—¶ä»ä¼šå‡ºç° <code>false</code> çš„æƒ…å†µï¼Œè¿™æ˜¯åº“çš„æ­£å¸¸è¡Œä¸ºæˆ–å¸¸è§é…ç½®å¯¼è‡´çš„ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦åŸå› åŠè§£é‡Šï¼ˆåŸºäºå®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºå¸¸è§é—®é¢˜ï¼‰ï¼š</p>
<h3 data-id="heading-0">1. <strong>åˆå§‹çŠ¶æ€é»˜è®¤ false</strong></h3>
<ul>
<li>è¡¨å• mount æ—¶ï¼Œ<code>isValid</code> åˆå§‹å€¼ä¸º <code>false</code>ã€‚</li>
<li>åº“ä¸ä¼šè‡ªåŠ¨éªŒè¯ <code>defaultValues</code>ï¼Œè¿™æ˜¯ä¸ºäº†å¯è®¿é—®æ€§ï¼ˆaccessibilityï¼‰è€ƒè™‘ï¼Œé¿å…åˆå§‹åŠ è½½æ—¶å°±æ˜¾ç¤ºé”™è¯¯ã€‚</li>
<li>å³ä½¿æ‰€æœ‰å­—æ®µåˆå§‹å€¼æœ‰æ•ˆï¼Œä¸” <code>errors</code> ä¸ºç©ºï¼Œ<code>isValid</code> ä»éœ€ç­‰å¾…é¦–æ¬¡éªŒè¯è§¦å‘åæ‰å¯èƒ½å˜ä¸º <code>true</code>ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šåœ¨ç»„ä»¶ mount åæ‰‹åŠ¨è°ƒç”¨ <code>trigger()</code> æ¥éªŒè¯åˆå§‹å€¼ï¼š
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> { trigger, <span class="hljs-attr">formState</span>: { isValid, errors } } = <span class="hljs-title function_">useForm</span>({ <span class="hljs-attr">defaultValues</span>: {...} });

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">trigger</span>();  <span class="hljs-comment">// è§¦å‘åˆå§‹éªŒè¯</span>
}, [trigger]);
</code></pre>
</li>
</ul>
<h3 data-id="heading-1">2. <strong>Proxy è®¢é˜…æœºåˆ¶é—®é¢˜ï¼ˆæœ€å¸¸è§æ¸²æŸ“ä¼˜åŒ–å‘ï¼‰</strong></h3>
<ul>
<li><code>formState</code> è¢« Proxy åŒ…è£¹ï¼Œä»¥ä¼˜åŒ–æ€§èƒ½ï¼Œåªè®¢é˜…ä½ å®é™…è¯»å–çš„çŠ¶æ€ã€‚</li>
<li>å¦‚æœä½ è¿™æ ·å†™ï¼š
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> { formState } = <span class="hljs-title function_">useForm</span>();
<span class="hljs-comment">// æ¸²æŸ“ä¸­æ¡ä»¶æ€§è®¿é—®</span>
<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!formState.isValid}</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
</code></pre>
ç”±äº <code>isValid</code> æ˜¯æ¡ä»¶è®¿é—®ï¼ŒProxy <strong>ä¸ä¼šè®¢é˜…</strong>å®ƒçš„å˜åŒ–ï¼Œå¯¼è‡´å®ƒæ°¸è¿œåœç•™åœ¨åˆå§‹ <code>false</code>ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šåœ¨æ¸²æŸ“å‰è§£æ„è¯»å–æ‰€æœ‰éœ€è¦çš„çŠ¶æ€ï¼ˆå¼ºåˆ¶è®¢é˜…ï¼‰ï¼š
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> { <span class="hljs-attr">formState</span>: { isValid, isDirty, errors } } = <span class="hljs-title function_">useForm</span>();
<span class="hljs-comment">// æˆ–è‡³å°‘è¯»å– isValid</span>
<span class="hljs-keyword">const</span> { isValid } = formState;

<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!isDirty</span> || !<span class="hljs-attr">isValid</span>}&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
</code></pre>
</li>
<li>å¦‚æœåœ¨ <code>useEffect</code> ä¸­ç›‘å¬ï¼Œä¹Ÿè¦æ”¾æ•´ä¸ª <code>formState</code>ï¼š
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(isValid); }, [formState]);  <span class="hljs-comment">// æ­£ç¡®</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-2">3. <strong>mode é…ç½®å½±å“éªŒè¯æ—¶æœº</strong></h3>
<ul>
<li>é»˜è®¤ <code>mode: 'onSubmit'</code>ï¼šåªæœ‰æäº¤æ—¶æ‰å®Œæ•´éªŒè¯ï¼Œ<code>isValid</code> åœ¨æäº¤å‰é€šå¸¸ä¸º <code>false</code>ã€‚</li>
<li>å¦‚æœç”¨ <code>mode: 'onChange'</code> æˆ– <code>'all'</code>ï¼Œè¾“å…¥æ—¶å®æ—¶éªŒè¯ï¼Œ<code>isValid</code> ä¼šåŠæ—¶æ›´æ–°ã€‚</li>
<li>ä½†å³ä½¿éªŒè¯é€šè¿‡ï¼Œå¦‚æœå­—æ®µæœªè¢«â€œtouchâ€ï¼ˆå¦‚å¼‚æ­¥å¡«å……å€¼æˆ–æœªäº¤äº’ï¼‰ï¼Œ<code>isValid</code> å¯èƒ½æ»åã€‚</li>
<li><strong>å»ºè®®</strong>ï¼šå®æ—¶è¡¨å•ç”¨ <code>mode: 'onChange'</code> æˆ– <code>'all'</code>ï¼š
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-title function_">useForm</span>({ <span class="hljs-attr">mode</span>: <span class="hljs-string">'onChange'</span> });
</code></pre>
</li>
</ul>
<h3 data-id="heading-3">4. <strong>å¼‚æ­¥å€¼å¡«å……æˆ–åŠ¨æ€å­—æ®µ</strong></h3>
<ul>
<li>ç”¨ <code>setValue</code> å¼‚æ­¥è®¾ç½®å€¼ï¼ˆå¦‚ API æ•°æ®ï¼‰æ—¶ï¼Œå¦‚æœä¸å¸¦ <code>{ shouldValidate: true }</code>ï¼Œä¸ä¼šè§¦å‘éªŒè¯ï¼Œ<code>isValid</code> ä¸æ›´æ–°ã€‚
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-title function_">setValue</span>(<span class="hljs-string">'field'</span>, value, { <span class="hljs-attr">shouldValidate</span>: <span class="hljs-literal">true</span> });
</code></pre>
</li>
<li>åŠ¨æ€æ·»åŠ å­—æ®µï¼ˆå¦‚ <code>useFieldArray</code> æˆ–æ¡ä»¶æ¸²æŸ“ï¼‰æ—¶ï¼Œ<code>isValid</code> å¯èƒ½çŸ­æš‚ä¸º <code>false</code>ï¼Œéœ€ç­‰å¾…é‡æ–°éªŒè¯ã€‚</li>
</ul>
<h3 data-id="heading-4">5. <strong>å…¶ä»–è¾¹ç¼˜æƒ…å†µ</strong></h3>
<ul>
<li>ä½¿ç”¨ <code>setError</code> æ‰‹åŠ¨è®¾ç½®é”™è¯¯ä¼šå¼ºåˆ¶ <code>isValid</code> ä¸º <code>false</code>ã€‚</li>
<li>Resolverï¼ˆå¦‚ Yup/Zodï¼‰æ—¶ï¼Œåˆå§‹æ— æ•ˆ <code>defaultValues</code> ä¼šè®© <code>isValid</code> ä¸º <code>false</code>ï¼Œä½† <code>errors</code> å¯èƒ½ä¸ºç©ºï¼ˆéœ€ <code>trigger()</code> æ˜¾å¼æ˜¾ç¤ºé”™è¯¯ï¼‰ã€‚</li>
<li>æµ‹è¯•ç¯å¢ƒï¼ˆå¦‚ Cypress/Jestï¼‰ä¸­ï¼Œç”±äºå¼‚æ­¥æ¸²æŸ“ï¼Œ<code>isValid</code> å¯èƒ½æ»åï¼Œéœ€è¦ <code>await waitFor</code>ã€‚</li>
</ul>
<h3 data-id="heading-5">è°ƒè¯•å»ºè®®</h3>
<ul>
<li>æ‰“å°æ•´ä¸ªçŠ¶æ€ï¼š<code>console.log({ isValid, errors, isValidating, dirtyFields })</code>ã€‚</li>
<li>æ£€æŸ¥æ˜¯å¦è®¢é˜…äº† <code>isValid</code>ï¼ˆProxy é—®é¢˜ï¼‰ã€‚</li>
<li>å¦‚æœè¡¨å•åˆå§‹æœ‰æ•ˆä½†æŒ‰é’®ç¦ç”¨ï¼Œä¼˜å…ˆæ£€æŸ¥è®¢é˜…å’Œ <code>trigger()</code>ã€‚</li>
</ul>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç»“åˆ <code>mode: 'onChange'</code> + æ­£ç¡®è§£æ„ <code>isValid</code> + å¿…è¦æ—¶ <code>trigger()</code> å°±èƒ½è§£å†³â€œæœ‰æ—¶ falseâ€çš„é—®é¢˜ã€‚å¦‚æœæä¾›ä½ çš„ <code>useForm</code> é…ç½®å’Œä½¿ç”¨ä»£ç ï¼Œèƒ½æ›´ç²¾å‡†å®šä½ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä½¿ç”¨nuxt.jsçš„seoä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7586585498744733750</link>    <guid>https://juejin.cn/post/7586585498744733750</guid>    <pubDate>2025-12-23T03:40:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585498744733750" data-draft-id="7586585498744602678" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä½¿ç”¨nuxt.jsçš„seoä¼˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-23T03:40:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·63683660855"/> <meta itemprop="url" content="https://juejin.cn/user/2562299273943164"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä½¿ç”¨nuxt.jsçš„seoä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2562299273943164/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·63683660855
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:40:15.000Z" title="Tue Dec 23 2025 03:40:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Nuxt.js å‰ç«¯ SEO ä¼˜åŒ–å…¨é¢æŒ‡å—</h2>
<p>Nuxt.js æ˜¯ Vue.js çš„æ¡†æ¶ï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰å’Œé™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰åŠŸèƒ½ï¼Œå¤©ç”Ÿå¯¹ SEO å‹å¥½ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹ Nuxt.js çš„è¯¦ç»† SEO ä¼˜åŒ–æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">ä¸€ã€Nuxt.js çš„ SEO ä¼˜åŠ¿</h3>
<ol>
<li><strong>æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</strong> ï¼šæœåŠ¡å™¨è¿”å›å®Œæ•´çš„ HTMLï¼Œçˆ¬è™«å¯ç›´æ¥ç´¢å¼•å†…å®¹</li>
<li><strong>é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰</strong> ï¼šé¢„æ¸²æŸ“ä¸ºé™æ€ HTMLï¼Œé€Ÿåº¦æå¿«</li>
<li><strong>è‡ªåŠ¨ä¼˜åŒ–</strong>ï¼šNuxt è‡ªåŠ¨å¤„ç†è®¸å¤š SEO åŸºç¡€å·¥ä½œ</li>
</ol>
<h3 data-id="heading-2">äºŒã€åŸºç¡€é…ç½®ä¼˜åŒ–</h3>
<h4 data-id="heading-3">1. Nuxt é…ç½®ä¸­çš„ SEO è®¾ç½®</h4>
<p>javascript</p>
<pre><code class="hljs language-css" lang="css">// nuxt<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>
export default {
  // å…¨å±€ SEO é…ç½®
  app: {
    head: {
      htmlAttrs: {
        lang: <span class="hljs-string">'zh-CN'</span>
      },
      meta: [
        { charset: <span class="hljs-string">'utf-8'</span> },
        { name: <span class="hljs-string">'viewport'</span>, content: <span class="hljs-string">'width=device-width, initial-scale=1'</span> },
        { 
          name: <span class="hljs-string">'description'</span>, 
          content: <span class="hljs-string">'ä½ çš„ç½‘ç«™æè¿°ï¼Œè¿™é‡Œåº”è¯¥è¯¦ç»†æè¿°ä½ çš„ç½‘ç«™å†…å®¹'</span> 
        },
        // Open Graph åè®®ï¼ˆç¤¾äº¤åª’ä½“åˆ†äº«ï¼‰
        { property: <span class="hljs-string">'og:type'</span>, content: <span class="hljs-string">'website'</span> },
        { property: <span class="hljs-string">'og:title'</span>, content: <span class="hljs-string">'ä½ çš„ç½‘ç«™æ ‡é¢˜'</span> },
        { property: <span class="hljs-string">'og:description'</span>, content: <span class="hljs-string">'åˆ†äº«æ—¶çš„æè¿°'</span> },
        { property: <span class="hljs-string">'og:image'</span>, content: <span class="hljs-string">'/og-image.jpg'</span> },
        // Twitter Card
        { name: <span class="hljs-string">'twitter:card'</span>, content: <span class="hljs-string">'summary_large_image'</span> },
        // å…¶ä»– meta æ ‡ç­¾
        { name: <span class="hljs-string">'robots'</span>, content: <span class="hljs-string">'index, follow'</span> },
        { name: <span class="hljs-string">'author'</span>, content: <span class="hljs-string">'ä½ çš„å“ç‰Œ/å…¬å¸å'</span> }
      ],
      link: [
        { rel: <span class="hljs-string">'icon'</span>, type: <span class="hljs-string">'image/x-icon'</span>, href: <span class="hljs-string">'/favicon.ico'</span> },
        // é¢„è¿æ¥é‡è¦åŸŸå
        { rel: <span class="hljs-string">'preconnect'</span>, href: <span class="hljs-string">'https://fonts.googleapis.com'</span> },
        { rel: <span class="hljs-string">'dns-prefetch'</span>, href: <span class="hljs-string">'https://fonts.googleapis.com'</span> },
        // è§„èŒƒé“¾æ¥
        { rel: <span class="hljs-string">'canonical'</span>, href: <span class="hljs-string">'https://your-domain.com'</span> }
      ],
      script: [
        // JSON-LD ç»“æ„åŒ–æ•°æ®ï¼ˆä¹Ÿå¯æ”¾åœ¨ç»„ä»¶ä¸­ï¼‰
        {
          type: <span class="hljs-string">'application/ld+json'</span>,
          innerHTML: JSON.<span class="hljs-built_in">stringify</span>({
            '<span class="hljs-keyword">@context</span>': <span class="hljs-string">'https://schema.org'</span>,
            <span class="hljs-string">'@type'</span>: <span class="hljs-string">'WebSite'</span>,
            <span class="hljs-string">'name'</span>: <span class="hljs-string">'ä½ çš„ç½‘ç«™åç§°'</span>,
            <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://your-domain.com'</span>
          })
        }
      ]
    }
  }
}
</code></pre>
<h4 data-id="heading-4">2. è·¯ç”±å’Œ URL ä¼˜åŒ–</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// nuxt.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// ä½¿ç”¨å‹å¥½çš„ URL</span>
  <span class="hljs-attr">routeRules</span>: {
    <span class="hljs-comment">// ä¸ºç‰¹å®šè·¯ç”±è®¾ç½®è§„åˆ™</span>
    <span class="hljs-string">'/products/:id'</span>: { <span class="hljs-attr">prerender</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-string">'/blog/**'</span>: { <span class="hljs-attr">swr</span>: <span class="hljs-number">3600</span> } <span class="hljs-comment">// é™æ€å†ç”Ÿ</span>
  },
  
  <span class="hljs-comment">// é…ç½®è·¯ç”±è¿‡æ¸¡</span>
  <span class="hljs-attr">router</span>: {
    <span class="hljs-attr">trailingSlash</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç»Ÿä¸€å°¾éƒ¨æ–œæ </span>
    <span class="hljs-title function_">scrollBehavior</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, savedPosition</span>) {
      <span class="hljs-comment">// æ§åˆ¶é¡µé¢æ»šåŠ¨è¡Œä¸ºï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒ</span>
      <span class="hljs-keyword">if</span> (savedPosition) {
        <span class="hljs-keyword">return</span> savedPosition;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">top</span>: <span class="hljs-number">0</span> };
      }
    }
  }
}
</code></pre>
<h3 data-id="heading-5">ä¸‰ã€é¡µé¢çº§ SEO ä¼˜åŒ–</h3>
<h4 data-id="heading-6">1. ä½¿ç”¨Â <code>useHead</code>Â ç»„åˆå¼ APIï¼ˆæ¨èï¼‰</h4>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- pages/blog/[slug].vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();
<span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: article } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">useFetch</span>(<span class="hljs-string">`/api/articles/<span class="hljs-subst">${route.params.slug}</span>`</span>);

<span class="hljs-comment">// åŠ¨æ€è®¾ç½®é¡µé¢ SEO ä¿¡æ¯</span>
<span class="hljs-title function_">useHead</span>({
  <span class="hljs-attr">title</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">title</span> + <span class="hljs-string">' | ç½‘ç«™åç§°'</span>,
  <span class="hljs-attr">meta</span>: [
    { 
      <span class="hljs-attr">name</span>: <span class="hljs-string">'description'</span>, 
      <span class="hljs-attr">content</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">excerpt</span> || article.<span class="hljs-property">value</span>.<span class="hljs-property">content</span>.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">160</span>) 
    },
    { 
      <span class="hljs-attr">name</span>: <span class="hljs-string">'keywords'</span>, 
      <span class="hljs-attr">content</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">tags</span>?.<span class="hljs-title function_">join</span>(<span class="hljs-string">', '</span>) || <span class="hljs-string">''</span> 
    },
    <span class="hljs-comment">// Open Graph</span>
    { <span class="hljs-attr">property</span>: <span class="hljs-string">'og:title'</span>, <span class="hljs-attr">content</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">title</span> },
    { <span class="hljs-attr">property</span>: <span class="hljs-string">'og:description'</span>, <span class="hljs-attr">content</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">excerpt</span> },
    { <span class="hljs-attr">property</span>: <span class="hljs-string">'og:image'</span>, <span class="hljs-attr">content</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">image</span> },
    <span class="hljs-comment">// è§„èŒƒé“¾æ¥</span>
    { <span class="hljs-attr">rel</span>: <span class="hljs-string">'canonical'</span>, <span class="hljs-attr">href</span>: <span class="hljs-string">`https://your-domain.com/blog/<span class="hljs-subst">${article.value.slug}</span>`</span> }
  ],
  <span class="hljs-comment">// ç»“æ„åŒ–æ•°æ®</span>
  <span class="hljs-attr">script</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'application/ld+json'</span>,
      <span class="hljs-attr">innerHTML</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-string">'@context'</span>: <span class="hljs-string">'https://schema.org'</span>,
        <span class="hljs-string">'@type'</span>: <span class="hljs-string">'BlogPosting'</span>,
        <span class="hljs-string">'headline'</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">title</span>,
        <span class="hljs-string">'description'</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">excerpt</span>,
        <span class="hljs-string">'image'</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">image</span>,
        <span class="hljs-string">'author'</span>: {
          <span class="hljs-string">'@type'</span>: <span class="hljs-string">'Person'</span>,
          <span class="hljs-string">'name'</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">author</span>
        },
        <span class="hljs-string">'datePublished'</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">published_at</span>,
        <span class="hljs-string">'dateModified'</span>: article.<span class="hljs-property">value</span>.<span class="hljs-property">updated_at</span>
      })
    }
  ]
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">article</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ­£ç¡®çš„æ ‡é¢˜ç»“æ„ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ article.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ article.subtitle }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"é¢åŒ…å±‘å¯¼èˆª"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">NuxtLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">NuxtLink</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">NuxtLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/blog"</span>&gt;</span>åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">NuxtLink</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>{{ article.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å†…å®¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">"article.content"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¼˜åŒ–å›¾ç‰‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">NuxtImg</span>
      <span class="hljs-attr">:src</span>=<span class="hljs-string">"article.featured_image"</span>
      <span class="hljs-attr">:alt</span>=<span class="hljs-string">"article.image_alt || article.title"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">"800"</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">"600"</span>
      <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span>
      <span class="hljs-attr">format</span>=<span class="hljs-string">"webp"</span>
      <span class="hljs-attr">quality</span>=<span class="hljs-string">"80"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-7">2. ä½¿ç”¨ Nuxt SEO Kitï¼ˆæ¨èæ’ä»¶ï¼‰</h4>
<p>bash</p>
<pre><code class="hljs language-bash" lang="bash">npm install @nuxt/seo
</code></pre>
<p>javascript</p>
<pre><code class="hljs language-css" lang="css">// nuxt<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>
export default {
  modules: [<span class="hljs-string">'@nuxt/seo'</span>],
  
  site: {
    url: <span class="hljs-string">'https://your-domain.com'</span>,
    name: <span class="hljs-string">'ä½ çš„ç½‘ç«™åç§°'</span>,
    description: <span class="hljs-string">'ç½‘ç«™æè¿°'</span>,
    defaultLocale: <span class="hljs-string">'zh-CN'</span>,
    trailingSlash: true,
  },
  
  sitemap: {
    sources: [<span class="hljs-string">'/api/__sitemap__/urls'</span>]
  },
  
  robots: {
    // è‡ªåŠ¨ç”Ÿæˆ robots<span class="hljs-selector-class">.txt</span>
    allow: [<span class="hljs-string">'*'</span>],
    disallow: [<span class="hljs-string">'/admin'</span>]
  }
}
</code></pre>
<h3 data-id="heading-8">å››ã€æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-9">1. å›¾ç‰‡ä¼˜åŒ–</h4>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨ NuxtImg ç»„ä»¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è‡ªåŠ¨ä¼˜åŒ–å›¾ç‰‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">NuxtImg</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/hero.jpg"</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"æè¿°æ–‡å­—"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">"1200"</span>
      <span class="hljs-attr">height</span>=<span class="hljs-string">"630"</span>
      <span class="hljs-attr">loading</span>=<span class="hljs-string">"lazy"</span>
      <span class="hljs-attr">format</span>=<span class="hljs-string">"webp"</span>
      <span class="hljs-attr">:modifiers</span>=<span class="hljs-string">"{ quality: 80 }"</span>
      <span class="hljs-attr">sizes</span>=<span class="hljs-string">"sm:100vw md:50vw lg:400px"</span>
    /&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ NuxtPicture å“åº”å¼å›¾ç‰‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">NuxtPicture</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"/images/hero.jpg"</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"æè¿°æ–‡å­—"</span>
      <span class="hljs-attr">:imgAttrs</span>=<span class="hljs-string">"{ class: 'responsive-image' }"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-10">2. èµ„æºåŠ è½½ä¼˜åŒ–</h4>
<p>javascript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// nuxt.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// é¢„åŠ è½½å…³é”®èµ„æº</span>
  render: {
    resourceHints: <span class="hljs-literal">true</span>,
    asyncScripts: <span class="hljs-literal">true</span>
  },
  
  <span class="hljs-comment">// å­—ä½“ä¼˜åŒ–</span>
  font: {
    <span class="hljs-comment">// è‡ªåŠ¨é¢„åŠ è½½å…³é”®å­—ä½“</span>
    inject: <span class="hljs-literal">true</span>
  }
}
</code></pre>
<h4 data-id="heading-11">3. ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½</h4>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// ç»„ä»¶æ‡’åŠ è½½</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span>
  <span class="hljs-keyword">import</span>(<span class="hljs-string">'~/components/HeavyComponent.vue'</span>)
);

<span class="hljs-comment">// æ•°æ®æ‡’åŠ è½½ï¼ˆä»…å®¢æˆ·ç«¯ï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadHeavyData</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">client</span>) {
    <span class="hljs-keyword">import</span>(<span class="hljs-string">'~/utils/heavy-data.js'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">module</span> =&gt;</span> {
      <span class="hljs-comment">// ä½¿ç”¨æ¨¡å—</span>
    });
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- å›¾ç‰‡æ‡’åŠ è½½ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
    <span class="hljs-attr">v-lazy</span>=<span class="hljs-string">"'/images/product.jpg'"</span>
    <span class="hljs-attr">alt</span>=<span class="hljs-string">"äº§å“å›¾ç‰‡"</span>
  /&gt;</span>
  
  <span class="hljs-comment">&lt;!-- ç»„ä»¶æ‡’åŠ è½½ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"showComponent"</span> /&gt;</span>
  
  <span class="hljs-comment">&lt;!-- è§†é¢‘æ‡’åŠ è½½ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">preload</span>=<span class="hljs-string">"metadata"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/video/promo.mp4"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/mp4"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h3 data-id="heading-12">äº”ã€é«˜çº§ SEO åŠŸèƒ½</h3>
<h4 data-id="heading-13">1. ç”Ÿæˆ XML Sitemap</h4>
<p>javascript</p>
<pre><code class="hljs language-xml" lang="xml">// server/api/sitemap.xml.ts
export default defineEventHandler(async (event) =&gt; {
  const posts = await $fetch('/api/posts');
  
  const sitemap = `<span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">urlset</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.sitemaps.org/schemas/sitemap/0.9"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">loc</span>&gt;</span>https://your-domain.com<span class="hljs-tag">&lt;/<span class="hljs-name">loc</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">lastmod</span>&gt;</span>${new Date().toISOString()}<span class="hljs-tag">&lt;/<span class="hljs-name">lastmod</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">changefreq</span>&gt;</span>daily<span class="hljs-tag">&lt;/<span class="hljs-name">changefreq</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">priority</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">priority</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
    ${posts.map(post =&gt; `
      <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">loc</span>&gt;</span>https://your-domain.com/blog/${post.slug}<span class="hljs-tag">&lt;/<span class="hljs-name">loc</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">lastmod</span>&gt;</span>${new Date(post.updated_at).toISOString()}<span class="hljs-tag">&lt;/<span class="hljs-name">lastmod</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">changefreq</span>&gt;</span>weekly<span class="hljs-tag">&lt;/<span class="hljs-name">changefreq</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">priority</span>&gt;</span>0.8<span class="hljs-tag">&lt;/<span class="hljs-name">priority</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
    `).join('')}
  <span class="hljs-tag">&lt;/<span class="hljs-name">urlset</span>&gt;</span>`;
  
  event.res.setHeader('content-type', 'text/xml');
  return sitemap;
});
</code></pre>
<h4 data-id="heading-14">2. è‡ªåŠ¨ç”Ÿæˆè§„èŒƒé“¾æ¥</h4>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();
<span class="hljs-keyword">const</span> config = <span class="hljs-title function_">useRuntimeConfig</span>();

<span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆè§„èŒƒé“¾æ¥</span>
<span class="hljs-keyword">const</span> canonicalUrl = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${config.public.siteUrl}</span><span class="hljs-subst">${route.path}</span>`</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-comment">//$/, '');</span>
});

<span class="hljs-title function_">useHead</span>({
  <span class="hljs-attr">link</span>: [
    { <span class="hljs-attr">rel</span>: <span class="hljs-string">'canonical'</span>, <span class="hljs-attr">href</span>: canonicalUrl }
  ]
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-15">3. å¤šè¯­è¨€ SEO ä¼˜åŒ–</h4>
<p>javascript</p>
<pre><code class="hljs language-css" lang="css">// nuxt<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>
export default {
  modules: [<span class="hljs-string">'@nuxtjs/i18n'</span>],
  
  i18n: {
    locales: [
      { <span class="hljs-selector-tag">code</span>: <span class="hljs-string">'zh'</span>, iso: <span class="hljs-string">'zh-CN'</span>, file: <span class="hljs-string">'zh-CN.js'</span> },
      { <span class="hljs-selector-tag">code</span>: <span class="hljs-string">'en'</span>, iso: <span class="hljs-string">'en-US'</span>, file: <span class="hljs-string">'en-US.js'</span> }
    ],
    defaultLocale: <span class="hljs-string">'zh'</span>,
    strategy: <span class="hljs-string">'prefix_except_default'</span>,
    // ä¸ºå¤šè¯­è¨€æ·»åŠ  hreflang
    seo: true,
    
    vueI18n: <span class="hljs-string">'./i18n.config.ts'</span>
  },
  
  // å¤šè¯­è¨€ sitemap
  sitemap: {
    i18n: true
  }
}
</code></pre>
<h3 data-id="heading-16">å…­ã€éƒ¨ç½²ä¼˜åŒ–</h3>
<h4 data-id="heading-17">1. ç¼“å­˜ç­–ç•¥é…ç½®</h4>
<p>javascript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// nuxt.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// é…ç½®æ¸²æŸ“ç¼“å­˜</span>
  nitro: {
    prerender: {
      crawlLinks: <span class="hljs-literal">true</span>,
      routes: [<span class="hljs-string">'/'</span>, <span class="hljs-string">'/about'</span>, <span class="hljs-string">'/blog'</span>]
    }
  },
  
  <span class="hljs-comment">// è®¾ç½® HTTP å¤´</span>
  routeRules: {
    <span class="hljs-string">'/_nuxt/**'</span>: { 
      headers: { 
        <span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'public, max-age=31536000, immutable'</span> 
      } 
    },
    <span class="hljs-string">'/images/**'</span>: { 
      headers: { 
        <span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'public, max-age=86400'</span> 
      } 
    },
    <span class="hljs-string">'/api/**'</span>: { 
      cors: <span class="hljs-literal">true</span>,
      headers: { 
        <span class="hljs-string">'Access-Control-Allow-Origin'</span>: <span class="hljs-string">'*'</span> 
      } 
    }
  }
}
</code></pre>
<h4 data-id="heading-18">2. ä½¿ç”¨ Nuxt Security å¢å¼ºå®‰å…¨æ€§</h4>
<p>javascript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// nuxt.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  modules: [<span class="hljs-string">'nuxt-security'</span>],
  
  security: {
    headers: {
      <span class="hljs-comment">// å®‰å…¨ç›¸å…³ HTTP å¤´</span>
      crossOriginResourcePolicy: <span class="hljs-string">'same-origin'</span>,
      crossOriginOpenerPolicy: <span class="hljs-string">'same-origin'</span>,
      crossOriginEmbedderPolicy: <span class="hljs-string">'require-corp'</span>,
      contentSecurityPolicy: {
        <span class="hljs-string">'default-src'</span>: [<span class="hljs-string">"'self'"</span>],
        <span class="hljs-string">'script-src'</span>: [<span class="hljs-string">"'self'"</span>, <span class="hljs-string">"'unsafe-inline'"</span>],
        <span class="hljs-string">'style-src'</span>: [<span class="hljs-string">"'self'"</span>, <span class="hljs-string">"'unsafe-inline'"</span>],
        <span class="hljs-string">'img-src'</span>: [<span class="hljs-string">"'self'"</span>, <span class="hljs-string">'data:'</span>, <span class="hljs-string">'https:'</span>]
      }
    }
  }
}
</code></pre>
<h3 data-id="heading-19">ä¸ƒã€ç›‘æ§å’Œåˆ†æ</h3>
<h4 data-id="heading-20">1. é›†æˆ Google Analytics 4</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// plugins/analytics.client.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtPlugin</span>(<span class="hljs-function">(<span class="hljs-params">nuxtApp</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();
  
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">dataLayer</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">dataLayer</span> || [];
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">gtag</span>(<span class="hljs-params"/>) { dataLayer.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">arguments</span>); }
  <span class="hljs-title function_">gtag</span>(<span class="hljs-string">'js'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
  <span class="hljs-title function_">gtag</span>(<span class="hljs-string">'config'</span>, <span class="hljs-string">'G-XXXXXXXXXX'</span>);
  
  <span class="hljs-comment">// è·Ÿè¸ªé¡µé¢è§†å›¾</span>
  router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to</span>) =&gt;</span> {
    <span class="hljs-title function_">gtag</span>(<span class="hljs-string">'event'</span>, <span class="hljs-string">'page_view'</span>, {
      <span class="hljs-attr">page_title</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span>,
      <span class="hljs-attr">page_location</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>,
      <span class="hljs-attr">page_path</span>: to.<span class="hljs-property">path</span>
    });
  });
});
</code></pre>
<h4 data-id="heading-21">2. æ€§èƒ½ç›‘æ§</h4>
<p>vue</p>
<pre><code class="hljs language-scss" lang="scss">&lt;script setup&gt;
<span class="hljs-comment">// ç›‘æ§ Core Web Vitals</span>
if (process.client) {
  <span class="hljs-built_in">import</span>('web-vitals')<span class="hljs-selector-class">.then</span>(({ getCLS, getFID, getLCP }) =&gt; {
    <span class="hljs-built_in">getCLS</span>(console.log);
    <span class="hljs-built_in">getFID</span>(console.log);
    <span class="hljs-built_in">getLCP</span>(console.log);
    
    <span class="hljs-comment">// å‘é€åˆ°åˆ†ææœåŠ¡</span>
    const reportData = (metric) =&gt; {
      <span class="hljs-built_in">fetch</span>('/api/web-vitals', {
        method: 'POST',
        body: JSON.stringify(metric),
        headers: { '<span class="hljs-attribute">Content</span>-Type': <span class="hljs-string">'application/json'</span> }
      });
    };
    
    <span class="hljs-built_in">getCLS</span>(reportData);
    <span class="hljs-built_in">getFID</span>(reportData);
    <span class="hljs-built_in">getLCP</span>(reportData);
  });
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-22">å…«ã€å®ç”¨å·¥å…·å’Œå‘½ä»¤</h3>
<h4 data-id="heading-23">1. SEO æ£€æŸ¥è„šæœ¬</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// scripts/check-seo.js</span>
<span class="hljs-keyword">import</span> { generateSiteMap } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/sitemap.js'</span>;
<span class="hljs-keyword">import</span> { checkMetaTags } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/meta-checker.js'</span>;
<span class="hljs-keyword">import</span> { analyzePerformance } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/performance.js'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">runSEOCheck</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹ SEO æ£€æŸ¥...'</span>);
  
  <span class="hljs-comment">// æ£€æŸ¥æ‰€æœ‰é¡µé¢çš„ Meta æ ‡ç­¾</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">checkMetaTags</span>();
  
  <span class="hljs-comment">// ç”Ÿæˆå¹¶éªŒè¯ sitemap</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateSiteMap</span>();
  
  <span class="hljs-comment">// æ€§èƒ½åˆ†æ</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">analyzePerformance</span>();
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SEO æ£€æŸ¥å®Œæˆï¼'</span>);
}

<span class="hljs-title function_">runSEOCheck</span>();
</code></pre>
<h4 data-id="heading-24">2. æ„å»ºä¼˜åŒ–</h4>
<p>json</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nuxt build --preset seo-optimized"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"generate"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nuxt generate"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"postbuild"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node scripts/analyze-bundle.js"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-25">ä¹ã€å¸¸è§é—®é¢˜è§£å†³</h3>
<h4 data-id="heading-26">1. å¤„ç†åŠ¨æ€è·¯ç”± SEO</h4>
<p>javascript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// nuxt.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">nitro</span>: {
    <span class="hljs-attr">prerender</span>: {
      <span class="hljs-attr">routes</span>: <span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> $fetch(<span class="hljs-string">'/api/posts'</span>);
        <span class="hljs-keyword">return</span> posts.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">post</span> =&gt;</span> <span class="hljs-string">`/blog/<span class="hljs-subst">${post.slug}</span>`</span>);
      }
    }
  }
};
</code></pre>
<h4 data-id="heading-27">2. å¤„ç†æ— é™æ»šåŠ¨å†…å®¹</h4>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// ä¸ºæ— é™æ»šåŠ¨å†…å®¹æ·»åŠ è§„èŒƒé“¾æ¥å’Œåˆ†é¡µæ ‡è®°</span>
<span class="hljs-title function_">useHead</span>({
  <span class="hljs-attr">link</span>: [
    { <span class="hljs-attr">rel</span>: <span class="hljs-string">'canonical'</span>, <span class="hljs-attr">href</span>: <span class="hljs-string">`https://your-domain.com<span class="hljs-subst">${route.path}</span>`</span> },
    { <span class="hljs-attr">rel</span>: <span class="hljs-string">'next'</span>, <span class="hljs-attr">href</span>: <span class="hljs-string">`/page/<span class="hljs-subst">${currentPage + <span class="hljs-number">1</span>}</span>`</span> },
    { <span class="hljs-attr">rel</span>: <span class="hljs-string">'prev'</span>, <span class="hljs-attr">href</span>: <span class="hljs-string">`/page/<span class="hljs-subst">${currentPage - <span class="hljs-number">1</span>}</span>`</span> }
  ],
  <span class="hljs-attr">script</span>: [
    {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'application/ld+json'</span>,
      <span class="hljs-attr">innerHTML</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-string">'@context'</span>: <span class="hljs-string">'https://schema.org'</span>,
        <span class="hljs-string">'@type'</span>: <span class="hljs-string">'ItemList'</span>,
        <span class="hljs-string">'itemListElement'</span>: items.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> ({
          <span class="hljs-string">'@type'</span>: <span class="hljs-string">'ListItem'</span>,
          <span class="hljs-string">'position'</span>: index + <span class="hljs-number">1</span>,
          <span class="hljs-string">'url'</span>: <span class="hljs-string">`https://your-domain.com/item/<span class="hljs-subst">${item.id}</span>`</span>
        }))
      })
    }
  ]
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-28">æ€»ç»“ï¼šNuxt.js SEO æ£€æŸ¥æ¸…å•</h3>
<ul>
<li>å¯ç”¨ SSR æˆ– SSGï¼ˆæ ¹æ®éœ€æ±‚é€‰æ‹©ï¼‰</li>
<li>æ­£ç¡®é…ç½®Â <code>nuxt.config.js</code>Â ä¸­çš„ SEO é€‰é¡¹</li>
<li>æ¯ä¸ªé¡µé¢éƒ½æœ‰å”¯ä¸€çš„Â <code>title</code>Â å’ŒÂ <code>meta description</code></li>
<li>ä½¿ç”¨æ­£ç¡®çš„ HTML è¯­ä¹‰åŒ–æ ‡ç­¾ï¼ˆH1-H6ï¼‰</li>
<li>æ‰€æœ‰å›¾ç‰‡éƒ½æœ‰Â <code>alt</code>Â å±æ€§å’Œåˆé€‚å°ºå¯¸</li>
<li>é…ç½® XML Sitemap å’Œ robots.txt</li>
<li>æ·»åŠ ç»“æ„åŒ–æ•°æ®ï¼ˆJSON-LDï¼‰</li>
<li>å®æ–½ Core Web Vitals ä¼˜åŒ–</li>
<li>è®¾ç½®ç¼“å­˜ç­–ç•¥å’Œ HTTP å¤´</li>
<li>æ·»åŠ åˆ†æè·Ÿè¸ªä»£ç </li>
<li>å¤šè¯­è¨€ç½‘ç«™æ·»åŠ Â <code>hreflang</code></li>
<li>å®šæœŸæ£€æŸ¥æ­»é“¾å’Œé‡å®šå‘</li>
<li>ç§»åŠ¨ç«¯å‹å¥½æµ‹è¯•é€šè¿‡</li>
<li>æäº¤åˆ° Google Search Console</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ»šåŠ¨æ§åˆ¶è§†é¢‘æ’­æ”¾æ˜¯å¦‚ä½•å®ç°çš„ï¼ŸGSAP ScrollTrigger + seek å®è·µ vivoå®˜ç½‘æ¡ˆä¾‹]]></title>    <link>https://juejin.cn/post/7586587644823928866</link>    <guid>https://juejin.cn/post/7586587644823928866</guid>    <pubDate>2025-12-23T04:58:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586587644823928866" data-draft-id="7586157459971932212" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ»šåŠ¨æ§åˆ¶è§†é¢‘æ’­æ”¾æ˜¯å¦‚ä½•å®ç°çš„ï¼ŸGSAP ScrollTrigger + seek å®è·µ vivoå®˜ç½‘æ¡ˆä¾‹"/> <meta itemprop="keywords" content="å‰ç«¯,äº§å“"/> <meta itemprop="datePublished" content="2025-12-23T04:58:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="akira0912"/> <meta itemprop="url" content="https://juejin.cn/user/4306112028351885"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ»šåŠ¨æ§åˆ¶è§†é¢‘æ’­æ”¾æ˜¯å¦‚ä½•å®ç°çš„ï¼ŸGSAP ScrollTrigger + seek å®è·µ vivoå®˜ç½‘æ¡ˆä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4306112028351885/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    akira0912
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T04:58:05.000Z" title="Tue Dec 23 2025 04:58:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ vivoã€Appleã€Tesla ç­‰å®˜ç½‘ä¸­ï¼Œç»å¸¸èƒ½çœ‹åˆ°è¿™æ ·ä¸€ç§æ•ˆæœï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.vivo.com.cn%2Fvivo%2Fiqoo15%2F" target="_blank" title="https://www.vivo.com.cn/vivo/iqoo15/" ref="nofollow noopener noreferrer">www.vivo.com.cn/vivo/iqoo15â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a55fc25c809c4fbbba1f94200f7bb7b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWtpcmEwOTEy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767070685&amp;x-signature=SyncuPTYzzZDg7%2BBTRhPDxiyHWo%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>é¡µé¢å‘ä¸‹æ»šåŠ¨ï¼Œè§†é¢‘ä¸€ç‚¹ç‚¹å‘å‰æ’­æ”¾<br/>
é¡µé¢å‘ä¸Šå›æ»šï¼Œè§†é¢‘åˆä¸€ç‚¹ç‚¹å€’é€€<br/>
è§†é¢‘æ²¡æ’­æ”¾å®Œï¼Œé¡µé¢æ— æ³•ç»§ç»­å‘ä¸‹æ»šåŠ¨</p>
</blockquote>
<p>è¿™ç§æ•ˆæœçœ‹èµ·æ¥åƒã€Œè§†é¢‘è·Ÿç€æ»šåŠ¨æ’­æ”¾ã€ï¼Œä½†<strong>æœ¬è´¨å¹¶ä¸æ˜¯æ’­æ”¾ï¼Œè€Œæ˜¯ seek</strong>ã€‚</p>
<p>æœ¬æ–‡å°†ä¼šå¤åˆ»è¿™ä¸ªæ•ˆæœï¼Œå®Œæ•´æ‹†è§£ <strong>æ»šåŠ¨æ§åˆ¶è§†é¢‘æ’­æ”¾çš„å®ç°æ–¹å¼</strong>ï¼Œä»¥åŠ <strong>GSAP åœ¨å…¶ä¸­åˆ°åº•å‘æŒ¥äº†ä»€ä¹ˆä½œç”¨</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€è¿™ç±»æ•ˆæœæœ¬è´¨ä¸Šæ˜¯åœ¨åšä»€ä¹ˆï¼Ÿ</h2>
<p>å…ˆè¯´ç»“è®ºï¼š</p>
<blockquote>
<p><strong>æ»šåŠ¨æ§åˆ¶è§†é¢‘ â‰  æ’­æ”¾è§†é¢‘<br/>
æ»šåŠ¨æ§åˆ¶è§†é¢‘ = ç”¨æ»šåŠ¨ä¸æ–­ seek è§†é¢‘</strong></p>
</blockquote>
<p>åœ¨ HTML5 ä¸­ï¼š<code>video.currentTime = 3.2;</code></p>
<p>è¿™ä¸€æ¬¡èµ‹å€¼æ“ä½œï¼Œå°±å« <strong>seek</strong> â€”â€”  ä¹Ÿå°±æ˜¯æŠŠè§†é¢‘æ’­æ”¾å¤´<strong>å¼ºåˆ¶è·³è½¬</strong>åˆ°æŸä¸ªæ—¶é—´ç‚¹ã€‚</p>
<p>è€Œæ»šåŠ¨é©±åŠ¨è§†é¢‘æ—¶ï¼Œä»£ç ä¼šä¸æ–­æ‰§è¡Œï¼š</p>
<p><code>scroll â†’ currentTime â†’ currentTime â†’ currentTime</code></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š<strong>æ»šåŠ¨æ§åˆ¶è§†é¢‘æ˜¯ä¸€ä¸ªâ€œé«˜é¢‘ seekâ€çš„æç«¯ä½¿ç”¨åœºæ™¯</strong></p>
<hr/>
<h2 data-id="heading-1">äºŒã€ä¸€æ¬¡ seekï¼Œæµè§ˆå™¨å†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2>
<p>å½“ä½ è®¾ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js">video.<span class="hljs-property">currentTime</span> = <span class="hljs-number">4.5</span>;
</code></pre>
<p>æµè§ˆå™¨å¹¶ä¸æ˜¯â€œç«‹åˆ»æ˜¾ç¤ºç¬¬ 4.5 ç§’é‚£ä¸€å¸§â€ï¼Œè€Œæ˜¯è¦ç»å†ï¼š</p>
<ol>
<li>æ‰¾åˆ°ç¦» 4.5 ç§’æœ€è¿‘çš„å…³é”®å¸§ï¼ˆI-frameï¼‰</li>
<li>ä»å…³é”®å¸§å¼€å§‹è§£ç </li>
<li>è§£ç ä¸­é—´çš„ P / B å¸§</li>
<li>æ¸²æŸ“å½“å‰ç”»é¢</li>
</ol>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆï¼š</p>
<ul>
<li>å…³é”®å¸§è¶Šå°‘ï¼Œseek è¶Šæ…¢</li>
<li>æ»šåŠ¨è¶Šé¢‘ç¹ï¼Œè§†é¢‘è¶Šå®¹æ˜“æŠ–</li>
</ul>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€GSAP çš„ä»£ç åˆ°åº•æœ‰æ²¡æœ‰ç”¨åˆ° seekï¼Ÿ</h2>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>æœ‰ï¼Œè€Œä¸”ç”¨å¾—éå¸¸å¤šã€‚</strong></p>
<p>æ¥çœ‹ä¸€æ®µæœ€å¸¸è§çš„ GSAP + ScrollTrigger å†™æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js">gsap.<span class="hljs-title function_">registerPlugin</span>(<span class="hljs-title class_">ScrollTrigger</span>);

<span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"video"</span>);
video.<span class="hljs-title function_">pause</span>();

video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"loadedmetadata"</span>, <span class="hljs-function">() =&gt;</span> {
  gsap.<span class="hljs-title function_">to</span>(video, {
    <span class="hljs-attr">currentTime</span>: video.<span class="hljs-property">duration</span>,
    <span class="hljs-attr">ease</span>: <span class="hljs-string">"none"</span>,
    <span class="hljs-attr">scrollTrigger</span>: {
      <span class="hljs-attr">trigger</span>: <span class="hljs-string">".scroll-video"</span>,
      <span class="hljs-attr">start</span>: <span class="hljs-string">"top top"</span>,
      <span class="hljs-attr">end</span>: <span class="hljs-string">"bottom bottom"</span>,
      <span class="hljs-attr">scrub</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">pin</span>: <span class="hljs-literal">true</span>
    }
  });
});
</code></pre>
<p>è¿™æ®µä»£ç <strong>å¹¶æ²¡æœ‰ç»•å¼€ seek</strong>ï¼Œå®ƒåšçš„äº‹æƒ…æ˜¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ScrollTrigger ç›‘å¬æ»šåŠ¨
â†“
è®¡ç®—æ»šåŠ¨è¿›åº¦ï¼ˆ<span class="hljs-number">0</span> ~ <span class="hljs-number">1</span>ï¼‰
â†“
GSAP æ ¹æ®è¿›åº¦æ›´æ–° currentTime
â†“
video.currentTime è¢«ä¸æ–­èµ‹å€¼ï¼ˆseekï¼‰
</code></pre>
<p>æ‰€ä»¥å¯ä»¥æ˜ç¡®åœ°è¯´ï¼š</p>
<blockquote>
<p><strong>GSAP å¹¶æ²¡æœ‰é¿å… seekï¼Œè€Œæ˜¯ç³»ç»Ÿæ€§åœ°ç®¡ç†äº† seek</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">å››ã€GSAP çœŸæ­£è§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h2>
<p>å¦‚æœä¸ç”¨ GSAPï¼Œå¾ˆå¤šäººä¼šå†™æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">window.addEventListener("scroll", () =&gt; {
  <span class="hljs-attr">video.currentTime</span> = calcByScroll()<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ç§å†™æ³•çš„é—®é¢˜åœ¨äºï¼š</p>
<ul>
<li>scroll è§¦å‘é¢‘ç‡ä¸å¯æ§</li>
<li>åŒä¸€å¸§å†…å¯èƒ½å¤šæ¬¡ seek</li>
<li>æƒ¯æ€§æ»šåŠ¨ã€å›å¼¹éš¾å¤„ç†</li>
<li>iOS / Mac è§¦æ§æ¿ä½“éªŒå·®</li>
</ul>
<hr/>
<h3 data-id="heading-4">GSAP ScrollTrigger çš„æ ¸å¿ƒä»·å€¼</h3>
<h4 data-id="heading-5">1ï¸âƒ£ æŠŠæ»šåŠ¨æŠ½è±¡æˆâ€œç¨³å®šçš„è¿›åº¦â€</h4>
<p>GSAP æŠŠæ»šåŠ¨ç»Ÿä¸€æŠ½è±¡æˆï¼š</p>
<p><code>progress = 0 â†’ 1</code></p>
<p>å¼€å‘è€…ä¸å†å…³å¿ƒ scrollTopã€offsetã€ä¸´ç•Œç‚¹è¯¯å·®ã€‚</p>
<hr/>
<h4 data-id="heading-6">2ï¸âƒ£ ç”¨ requestAnimationFrame æ§åˆ¶æ›´æ–°é¢‘ç‡</h4>
<p>GSAP å†…éƒ¨ä¿è¯ï¼š</p>
<blockquote>
<p><strong>ä¸€å¸§æœ€å¤šæ›´æ–°ä¸€æ¬¡ currentTime</strong></p>
</blockquote>
<p>é¿å…äº†â€œseek é£æš´â€ã€‚</p>
<hr/>
<h4 data-id="heading-7">3ï¸âƒ£ <code>scrub</code> å®ç°æ­£åå‘ä¸¥æ ¼åŒæ­¥</h4>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">scrub:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>æ„å‘³ç€ï¼š</p>
<ul>
<li>å‘ä¸‹æ»š â†’ è§†é¢‘å‰è¿›</li>
<li>å‘ä¸Šæ»š â†’ è§†é¢‘å›é€€</li>
<li>åœæ­¢æ»šåŠ¨ â†’ è§†é¢‘åœåœ¨å½“å‰å¸§</li>
</ul>
<p>è¿™æ˜¯çº¯åŸç”Ÿ scroll éå¸¸éš¾ç¨³å®šå®ç°çš„ã€‚</p>
<hr/>
<h4 data-id="heading-8">4ï¸âƒ£ <code>pin</code> å®ç°æ»šåŠ¨é”å®š</h4>
<p><code>pin: true</code></p>
<p>è§†é¢‘æ’­æ”¾å®Œä¹‹å‰ï¼Œå½“å‰ section ä¼šè¢«å›ºå®šï¼š</p>
<blockquote>
<p>è‡ªç„¶å®ç°ã€Œè§†é¢‘æ²¡æ’­å®Œï¼Œé¡µé¢ä¸èƒ½ç»§ç»­æ»šã€</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">äº”ã€ä¸ºä»€ä¹ˆè§†é¢‘ç¼–ç ä»ç„¶æ˜¯å…³é”®ï¼Ÿ</h2>
<p>GSAP åªèƒ½å†³å®š <strong>ä»€ä¹ˆæ—¶å€™ seek</strong>ï¼Œ<br/>
ä½† <strong>seek å¿«ä¸å¿«ã€å‡†ä¸å‡†</strong>ï¼Œå–å†³äºè§†é¢‘æœ¬èº«ã€‚</p>
<p>å®˜ç½‘çº§æ–¹æ¡ˆé€šå¸¸ä¼šåœ¨åˆ¶ä½œé˜¶æ®µï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">-g 1</span>
</code></pre>
<p>è®©è§†é¢‘ <strong>æ¯ä¸€å¸§éƒ½æ˜¯å…³é”®å¸§</strong>ï¼Œä»¥ä¿è¯ï¼š</p>
<ul>
<li>é«˜é¢‘ seek ä¸å›é€€</li>
<li>æ»šåŠ¨å’Œç”»é¢ä¸¥æ ¼åŒæ­¥</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ»šåŠ¨è§†é¢‘æ•ˆæœå¾€å¾€éœ€è¦é…åˆ ffmpeg åšç´ æå¤„ç†ã€‚</p>
<hr/>
<h2 data-id="heading-10">å…­ã€ä¸€ä¸ªæ€»ç»“æ¨¡å‹</h2>
<p>å¯ä»¥ç”¨ä¸€å¥è¯æ€»ç»“æ•´å¥—æ–¹æ¡ˆï¼š</p>
<blockquote>
<p><strong>æ»šåŠ¨æ§åˆ¶è§†é¢‘ä¸æ˜¯åœ¨æ’­æ”¾è§†é¢‘ï¼Œè€Œæ˜¯åœ¨ç”¨æ»šåŠ¨é©±åŠ¨ seekã€‚<br/>
GSAP çš„ä½œç”¨ä¸æ˜¯æ¶ˆç­ seekï¼Œè€Œæ˜¯è®© seek å˜å¾—å¯æ§ã€ç¨³å®šï¼Œå¹¶ä¸æ»šåŠ¨ä¸¥æ ¼åŒæ­¥ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-11">ä¸ƒã€ç»“è¯­</h2>
<ul>
<li>âœ… æ»šåŠ¨è§†é¢‘æ•ˆæœä¸€å®šä¼šç”¨åˆ° seek</li>
<li>âœ… GSAP è§£å†³çš„æ˜¯â€œèŠ‚å¥â€å’Œâ€œåŒæ­¥â€é—®é¢˜</li>
<li>âŒ GSAP æ— æ³•æ›¿ä»£è§†é¢‘ç¼–ç ä¼˜åŒ–</li>
<li>ğŸ”¥ å®˜ç½‘çº§ä½“éªŒ = <strong>GSAP + åˆç†æ»šåŠ¨è·ç¦» + æ­£ç¡®çš„è§†é¢‘ç¼–ç </strong></li>
</ul>
<p>æœ€åä»£ç è´´åœ¨è¿™é‡Œï¼Œå¤åˆ»äº†iQOOå®˜ç½‘é¡µé¢ä¸­çš„ä¸¤ä¸ªè§†é¢‘æ»šåŠ¨ï¼Œcsså°±ä¸è´´äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//å­ç»„ä»¶</span>
<span class="hljs-string">'use client'</span>;

<span class="hljs-keyword">import</span> { useEffect, useRef, useId } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { gsap } <span class="hljs-keyword">from</span> <span class="hljs-string">'gsap'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ScrollTrigger</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'gsap/ScrollTrigger'</span>;

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
  gsap.<span class="hljs-title function_">registerPlugin</span>(<span class="hljs-title class_">ScrollTrigger</span>);
}

interface <span class="hljs-title class_">ScrollVideoProps</span> {
  <span class="hljs-attr">videoSrc</span>: string;
  <span class="hljs-attr">duration</span>: number;
  className?: string;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ScrollVideo</span>(<span class="hljs-params">{ videoSrc, duration, className = <span class="hljs-string">''</span> }: ScrollVideoProps</span>) {
  <span class="hljs-keyword">const</span> sectionRef = useRef&lt;<span class="hljs-title class_">HTMLElement</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> videoRef = useRef&lt;<span class="hljs-title class_">HTMLVideoElement</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> triggerId = <span class="hljs-title function_">useId</span>();

  <span class="hljs-comment">// 8px per frame, 60fps</span>
  <span class="hljs-keyword">const</span> scrollHeight = duration * <span class="hljs-number">60</span> * <span class="hljs-number">8</span>;

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> video = videoRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> section = sectionRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (!video || !section) <span class="hljs-keyword">return</span>;

    video.<span class="hljs-title function_">pause</span>();
    video.<span class="hljs-property">currentTime</span> = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">let</span> <span class="hljs-attr">st</span>: <span class="hljs-title class_">ScrollTrigger</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLoadedMetadata</span> = (<span class="hljs-params"/>) =&gt; {
      st?.<span class="hljs-title function_">kill</span>();

      st = <span class="hljs-title class_">ScrollTrigger</span>.<span class="hljs-title function_">create</span>({
        <span class="hljs-attr">trigger</span>: section,
        <span class="hljs-attr">start</span>: <span class="hljs-string">'top top'</span>,
        <span class="hljs-attr">end</span>: <span class="hljs-string">'bottom bottom'</span>,
        <span class="hljs-attr">scrub</span>: <span class="hljs-number">0.2</span>,
        <span class="hljs-attr">id</span>: triggerId,
        <span class="hljs-attr">onUpdate</span>: <span class="hljs-function">(<span class="hljs-params">self</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (video.<span class="hljs-property">readyState</span> &gt;= <span class="hljs-number">1</span>) {
            video.<span class="hljs-property">currentTime</span> = self.<span class="hljs-property">progress</span> * video.<span class="hljs-property">duration</span>;
          }
        },
      });
    };

    <span class="hljs-keyword">if</span> (video.<span class="hljs-property">readyState</span> &gt;= <span class="hljs-number">1</span>) {
      <span class="hljs-title function_">handleLoadedMetadata</span>();
    } <span class="hljs-keyword">else</span> {
      video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'loadedmetadata'</span>, handleLoadedMetadata);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      video.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'loadedmetadata'</span>, handleLoadedMetadata);
      st?.<span class="hljs-title function_">kill</span>();
    };
  }, [triggerId, duration]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">section</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{sectionRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">scroll-video</span> ${<span class="hljs-attr">className</span>}`}
      <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">height:</span> `${<span class="hljs-attr">scrollHeight</span>}<span class="hljs-attr">px</span>` }}
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"sticky top-0 h-screen w-full overflow-hidden"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">video</span>
          <span class="hljs-attr">ref</span>=<span class="hljs-string">{videoRef}</span>
          <span class="hljs-attr">muted</span>
          <span class="hljs-attr">playsInline</span>
          <span class="hljs-attr">preload</span>=<span class="hljs-string">"auto"</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"w-full h-full object-cover pointer-events-none"</span>
        &gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{videoSrc}</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/webm"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span></span>
  );
}


<span class="hljs-comment">//çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ScrollVideo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/ScrollVideo'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-black"</span>&gt;</span>
      {/* Hero Section */}
      <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-screen flex items-center justify-center"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-center text-white"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-5xl md:text-7xl font-bold mb-6"</span>&gt;</span>
            ä¼ä¸šå®˜ç½‘
          <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-xl md:text-2xl text-gray-300 mb-8"</span>&gt;</span>
            å‘ä¸‹æ»šåŠ¨ä½“éªŒè§†é¢‘æ•ˆæœ
          <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"animate-bounce"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> 
              <span class="hljs-attr">className</span>=<span class="hljs-string">"w-8 h-8 mx-auto text-white"</span> 
              <span class="hljs-attr">fill</span>=<span class="hljs-string">"none"</span> 
              <span class="hljs-attr">stroke</span>=<span class="hljs-string">"currentColor"</span> 
              <span class="hljs-attr">viewBox</span>=<span class="hljs-string">"0 0 24 24"</span>
            &gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">path</span> 
                <span class="hljs-attr">strokeLinecap</span>=<span class="hljs-string">"round"</span> 
                <span class="hljs-attr">strokeLinejoin</span>=<span class="hljs-string">"round"</span> 
                <span class="hljs-attr">strokeWidth</span>=<span class="hljs-string">{2}</span> 
                <span class="hljs-attr">d</span>=<span class="hljs-string">"M19 14l-7 7m0 0l-7-7m7 7V3"</span> 
              /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>

      {/* Scroll Video 1 - 8ç§’ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">ScrollVideo</span> 
        <span class="hljs-attr">videoSrc</span>=<span class="hljs-string">"/video.webm"</span>
        <span class="hljs-attr">duration</span>=<span class="hljs-string">{8}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-black"</span>
      /&gt;</span>

      {/* Scroll Video 2 - 4ç§’ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">ScrollVideo</span> 
        <span class="hljs-attr">videoSrc</span>=<span class="hljs-string">"/performance.webm"</span>
        <span class="hljs-attr">duration</span>=<span class="hljs-string">{4}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-black"</span>
      /&gt;</span>

      {/* Content Section */}
      <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"min-h-screen flex items-center justify-center bg-gradient-to-b from-black to-gray-900"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-center text-white max-w-4xl px-6"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-4xl md:text-5xl font-bold mb-8"</span>&gt;</span>
            åˆ›æ–°ç§‘æŠ€
          <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-lg md:text-xl text-gray-300 leading-relaxed"</span>&gt;</span>
            æˆ‘ä»¬è‡´åŠ›äºä¸ºç”¨æˆ·æä¾›æœ€å‰æ²¿çš„æŠ€æœ¯ä½“éªŒï¼Œ
            é€šè¿‡ä¸æ–­åˆ›æ–°ï¼Œæ‰“é€ å“è¶Šçš„äº§å“ä¸æœåŠ¡ã€‚
          <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>

      {/* Footer */}
      <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"py-12 bg-gray-900 text-center text-gray-400"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Â© 2025 ä¼ä¸šå®˜ç½‘. All rights reserved.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span></span>
  );
}


</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elpis ç¬¬å››é˜¶æ®µÂ· Vue3 å®ŒæˆåŠ¨æ€ç»„ä»¶å»ºè®¾]]></title>    <link>https://juejin.cn/post/7586617459487113268</link>    <guid>https://juejin.cn/post/7586617459487113268</guid>    <pubDate>2025-12-23T04:01:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586617459487113268" data-draft-id="7586208617603317794" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elpis ç¬¬å››é˜¶æ®µÂ· Vue3 å®ŒæˆåŠ¨æ€ç»„ä»¶å»ºè®¾"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-23T04:01:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€å¿µä¹‹é—´lq"/> <meta itemprop="url" content="https://juejin.cn/user/2541726616524583"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elpis ç¬¬å››é˜¶æ®µÂ· Vue3 å®ŒæˆåŠ¨æ€ç»„ä»¶å»ºè®¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2541726616524583/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€å¿µä¹‹é—´lq
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T04:01:00.000Z" title="Tue Dec 23 2025 04:01:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€.å‰è¨€</h2>
<p>æˆ‘ä»¬åœ¨ç¬¬ä¸‰é˜¶æ®µä¸­å­¦ä¼šäº†å¦‚ä½•é€šè¿‡<code>Schemaé…ç½®</code>ä¸<code>Dashboard æ¨¡æ¿å¼•æ“</code>å®ç°äº†é¡µé¢çš„è‡ªåŠ¨æ¸²æŸ“æµç¨‹,ä½†æ˜¯ç¼ºä¹å¯¹æ•°æ®è¿›è¡Œæ“ä½œçš„åŠŸèƒ½,æ‰€ä»¥åœ¨æœ¬é˜¶æ®µé‡ç‚¹å°±æ˜¯<code>Schemaé…ç½®ä¸åŠ¨æ€æ“ä½œç»„ä»¶é…åˆ</code>æ¥å®ç°æ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œ</p>
<h2 data-id="heading-1">äºŒ.DSLä¸­Schema  åŠ¨æ€ç»„ä»¶é…ç½®</h2>
<p>åœ¨åŸºäºç¬¬ä¸‰ç« ä¸­çš„Schemaé…ç½®ä¸­å¢åŠ <code>componentConfig</code>é…ç½®,æ¥æè¿°ä¸åŒçš„æ“ä½œåŠ è½½ä¸åŒçš„åŠ¨æ€ç»„ä»¶</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-attr">componentConfig</span>: {
     <span class="hljs-comment">// create-from è¡¨å•ç›¸å…³é…ç½®</span>
      <span class="hljs-attr">createFrom</span>: {
         <span class="hljs-attr">title</span>: <span class="hljs-string">''</span>,<span class="hljs-comment">// è¡¨å•æ ‡é¢˜</span>
         <span class="hljs-attr">saveBtnText</span>: <span class="hljs-string">''</span>,<span class="hljs-comment">// ä¿å­˜æŒ‰é’®æ–‡æœ¬</span>
       },
     <span class="hljs-comment">//edit-from è¡¨å•ç›¸å…³é…ç½®</span>
      <span class="hljs-attr">editFrom</span>: {
        <span class="hljs-attr">mainKey</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">//è¡¨å•ä¸»é”®,ç”¨äºå”¯ä¸€æ ‡è¯†è¦ä¿®æ”¹çš„æ•°æ®å¯¹è±¡</span>
        <span class="hljs-attr">title</span>: <span class="hljs-string">''</span>,<span class="hljs-comment">// è¡¨å•æ ‡é¢˜</span>
        <span class="hljs-attr">saveBtnText</span>: <span class="hljs-string">''</span>,<span class="hljs-comment">// ä¿å­˜æŒ‰é’®æ–‡æœ¬</span>
      },
     <span class="hljs-comment">// detailPanel è¯¦æƒ…ç›¸å…³ </span>
       <span class="hljs-attr">detailPanel</span>: {
         <span class="hljs-attr">mainKey</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">//è¡¨å•ä¸»é”®,ç”¨äºå”¯ä¸€æ ‡è¯†è¦ä¿®æ”¹çš„æ•°æ®å¯¹è±¡</span>
         <span class="hljs-attr">title</span>: <span class="hljs-string">''</span>,<span class="hljs-comment">// æ ‡é¢˜</span>
     },
},
</code></pre>
<p>åŠ¨æ€ç»„ä»¶åŠ è½½è§¦å‘åŠ è½½çš„æ¡ä»¶:</p>
<ol>
<li><code>tableConfig</code>é…ç½®é¡¹ä¸­çš„è¡¨æ ¼å¤´éƒ¨æ“ä½œå’Œè¡¨æ ¼æ“ä½œæ æŒ‰é’®å¢åŠ  <code>eventKey</code>(è§¦å‘äº‹ä»¶)å’Œ<code>eventOption.comName</code>è§¦å‘åŠ è½½çš„ç»„ä»¶åç§°</li>
<li>åˆ é™¤æ“ä½œç‰¹æ®Šå¤„ç†<code>eventOption.params</code>ä¸­é…ç½®æŒ‡å®š<code>key</code>å­—æ®µè¿›è¡Œåˆ é™¤æ“ä½œ</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-attr">tableConfig</span>: {
    <span class="hljs-attr">headerButtons</span>: [{
      <span class="hljs-attr">label</span>: <span class="hljs-string">'æ–°å¢å•†å“'</span>,
      <span class="hljs-attr">eventKey</span>: <span class="hljs-string">'showComponent'</span>,
      <span class="hljs-attr">eventOption</span>: {
            <span class="hljs-attr">comName</span>: <span class="hljs-string">'createForm'</span>
      },
      <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
      <span class="hljs-attr">plain</span>: <span class="hljs-literal">true</span>
      }],
       <span class="hljs-attr">rowButtons</span>: [
       {
         <span class="hljs-attr">label</span>: <span class="hljs-string">"æŸ¥çœ‹è¯¦æƒ…"</span>,
         <span class="hljs-attr">eventKey</span>: <span class="hljs-string">'showComponent'</span>,
         <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
         <span class="hljs-attr">eventOption</span>: {
          <span class="hljs-attr">comName</span>: <span class="hljs-string">'detailPanel'</span>
         },
      },
      {
          <span class="hljs-attr">label</span>: <span class="hljs-string">"ä¿®æ”¹"</span>,
          <span class="hljs-attr">eventKey</span>: <span class="hljs-string">'showComponent'</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
          <span class="hljs-attr">eventOption</span>: {
              <span class="hljs-attr">comName</span>: <span class="hljs-string">'editForm'</span>
          },
      },
      {
          <span class="hljs-attr">label</span>: <span class="hljs-string">"åˆ é™¤"</span>,
          <span class="hljs-attr">eventKey</span>: <span class="hljs-string">'remove'</span>,
          <span class="hljs-attr">eventOption</span>: {
              <span class="hljs-attr">params</span>: {
                  <span class="hljs-attr">product_id</span>: <span class="hljs-string">"schema::product_id"</span>
              }
          },
          <span class="hljs-attr">type</span>: <span class="hljs-string">'danger'</span>,
      }],
},
</code></pre>
<h2 data-id="heading-2">ä¸‰. åŠ¨æ€ç»„ä»¶çš„æ¸²æŸ“æœºåˆ¶</h2>
<h3 data-id="heading-3">1. schema-view åŠ¨æ€ç»„ä»¶çš„å¼•ç”¨</h3>
<p>åœ¨<code> schema-view</code>ä¸­é€šè¿‡å¯¹<code>component-config.js</code>ä¸­åŠ¨æ€ç»„ä»¶å¼•å…¥å…³ç³»çµæ´»ç»„ä»¶ç®¡ç†</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// component-config.js</span>
<span class="hljs-keyword">import</span> createForm <span class="hljs-keyword">from</span> <span class="hljs-string">'./create-form/create-form.vue'</span>
<span class="hljs-keyword">import</span> editForm <span class="hljs-keyword">from</span> <span class="hljs-string">'./edit-form/edit-form.vue'</span>
<span class="hljs-keyword">import</span> detailPanel <span class="hljs-keyword">from</span> <span class="hljs-string">'./detail-panel/detail-panel.vue'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ComponentConfig</span> = {
    <span class="hljs-attr">createForm</span>: {
        <span class="hljs-attr">component</span>: createForm,
    },
    <span class="hljs-attr">editForm</span>: {
        <span class="hljs-attr">component</span>: editForm,
    },
    <span class="hljs-attr">detailPanel</span>: {
        <span class="hljs-attr">component</span>: detailPanel,
    },

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ComponentConfig</span>
</code></pre>
<h3 data-id="heading-4">2.åŠ¨æ€ç»„ä»¶çš„è¡¨å•æ§ä»¶</h3>
<p>é’ˆå¯¹äº<code>createForm</code>å’Œ<code>editForm</code>åŠ¨æ€ç»„ä»¶è¿›è¡Œçš„é€šç”¨çš„<code>schema-form</code> widgetsç»„ä»¶å°è£…,å¯¹äº<code>schema-form</code>è¡¨å•å®ç°ç»“åˆshemaä¸­æ¯ä¸ªå­—æ®µä¸­é…ç½®çš„<code>comType</code>è¿›è¡Œä¸åŒçš„è¡¨å•æ§ä»¶æ¸²æŸ“</p>
<p>åŒæ ·é€šè¿‡<code>form-item-config.js</code>å•ç‹¬é…ç½®æ¥ç®¡ç†è¡¨å•æ§ä»¶çš„å¼•å…¥å…³ç³»,ä¾¿äºåç»­çš„è‡ªå®šä¹‰è¡¨å•æ§ä»¶çš„å¼€å‘</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// form-item-config.js</span>
<span class="hljs-keyword">import</span> input <span class="hljs-keyword">from</span> <span class="hljs-string">'./complex-view/input/input.vue'</span>
<span class="hljs-keyword">import</span> inputNumber <span class="hljs-keyword">from</span> <span class="hljs-string">'./complex-view/input-number/input-number.vue'</span>
<span class="hljs-keyword">import</span> select <span class="hljs-keyword">from</span> <span class="hljs-string">'./complex-view/select/select.vue'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">FormItemConfig</span> = {
    <span class="hljs-attr">input</span>: {
        <span class="hljs-attr">component</span>: input,
    },
    <span class="hljs-attr">inputNumber</span>: {
        <span class="hljs-attr">component</span>: inputNumber,
    },
    <span class="hljs-attr">select</span>: {
        <span class="hljs-attr">component</span>: select,
    },
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">FormItemConfig</span>
</code></pre>
<p>è¿›è¡Œè¡¨å•ç»„ä»¶å°è£…æ—¶,æˆ‘ä»¬è¦è€ƒè™‘å¦‚ä½•<code>æ ¡éªŒè¡¨å•</code>ä¸è·å–<code>è¡¨å•å†…å®¹</code>,åœ¨è¡¨å•æ§ä»¶ç»„ä»¶ä¸­æˆ‘ä»¬éƒ½ä¼šå¯¼å‡º<code>name</code>å±æ€§(æ§ä»¶åç§°),<code>validate</code>å‡½æ•°(æ ¡éªŒå‡½æ•°),<code>getValue</code>å‡½æ•°(è·å–å€¼)</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// ä»¥ input æ§ä»¶ä¸ºä¾‹å­</span>
<span class="hljs-comment">// æ ¡éªŒå‡½æ•° ,é€šè¿‡ajvæ ¡éªŒå½“å‰çš„å­—æ®µçš„shemaä¸­é…ç½®å­—æ®µ</span>
<span class="hljs-comment">// ä¾‹å¦‚input ä¸­ä»¥å­—ç¬¦ä¸²ä¸ºä¸», å¯èƒ½åœ¨schemaä¸­æ·»åŠ maxLength,minLengthè¿›è¡Œé•¿åº¦çš„è¦æ±‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">validate</span> = (<span class="hljs-params"/>) =&gt; {
    validTips.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">const</span> { type } = schema
    <span class="hljs-comment">//æ ¡éªŒæ˜¯å¦å¿…å¡«</span>
    <span class="hljs-keyword">if</span> (schema.<span class="hljs-property">option</span>?.<span class="hljs-property">required</span> &amp;&amp; !dtoValue.<span class="hljs-property">value</span>) {
        validTips.<span class="hljs-property">value</span> = <span class="hljs-string">'ä¸èƒ½ä¸ºç©º'</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
    <span class="hljs-comment">//ajv æ ¡éªŒschema</span>
    <span class="hljs-keyword">if</span> (dtoValue.<span class="hljs-property">value</span>) {
        <span class="hljs-keyword">const</span> validate = ajv.<span class="hljs-title function_">compile</span>(schema)
        <span class="hljs-keyword">const</span> vaild = <span class="hljs-title function_">validate</span>(dtoValue.<span class="hljs-property">value</span>)
        <span class="hljs-keyword">if</span> (!vaild &amp;&amp; validate.<span class="hljs-property">errors</span> &amp;&amp; validate.<span class="hljs-property">errors</span>[<span class="hljs-number">0</span>]) {
            <span class="hljs-keyword">const</span> { keyword, params } = validate.<span class="hljs-property">errors</span>[<span class="hljs-number">0</span>]
            <span class="hljs-keyword">if</span> (keyword === <span class="hljs-string">'type'</span>) {
                validTips.<span class="hljs-property">value</span> = <span class="hljs-string">`ç±»å‹å¿…é¡»ä¸º<span class="hljs-subst">${type}</span>`</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (keyword === <span class="hljs-string">'maxLength'</span>) {
                validTips.<span class="hljs-property">value</span> = <span class="hljs-string">`æœ€å¤§é•¿åº¦åº”ä¸º:<span class="hljs-subst">${params.limit}</span>`</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (keyword === <span class="hljs-string">'minLength'</span>) {
                validTips.<span class="hljs-property">value</span> = <span class="hljs-string">`æœ€å°é•¿åº¦åº”ä¸º:<span class="hljs-subst">${params.limit}</span>`</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (keyword === <span class="hljs-string">'pattern'</span>) {
                validTips.<span class="hljs-property">value</span> = <span class="hljs-string">`æ ¼å¼ä¸æ­£ç¡®`</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(validate.<span class="hljs-property">errors</span>[<span class="hljs-number">0</span>]);
                validTips.<span class="hljs-property">value</span> = <span class="hljs-string">'ä¸ç¬¦åˆè¦æ±‚'</span>
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-comment">//schema é…ç½®</span>
<span class="hljs-attr">product_name</span>: {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
  <span class="hljs-attr">label</span>: <span class="hljs-string">'å•†å“åç§°'</span>,
  <span class="hljs-attr">maxLength</span>: <span class="hljs-number">10</span>, <span class="hljs-comment">//æœ€å¤§é•¿åº¦æ ¡éªŒæ¡ä»¶</span>
  <span class="hljs-attr">minLength</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">//æœ€å°é•¿åº¦æ ¡éªŒæ¡ä»¶</span>
  <span class="hljs-attr">tableOption</span>: {
      <span class="hljs-attr">width</span>: <span class="hljs-number">200</span>,
  },
  <span class="hljs-attr">searchOption</span>: {
      <span class="hljs-attr">comType</span>: <span class="hljs-string">'dynamicSelect'</span>,
      <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'è¯·é€‰æ‹©å•†å“åç§°'</span>,
      <span class="hljs-attr">api</span>: <span class="hljs-string">'/api/proj/product_enum/list'</span>,
  },
  <span class="hljs-attr">createFormOption</span>: {
      <span class="hljs-attr">comType</span>: <span class="hljs-string">'input'</span>, <span class="hljs-comment">//åœ¨ä¸åŒç»„ä»¶ä¸­è¯¥å­—æ®µä»¥ä»€ä¹ˆæ ·çš„è¡¨å•æ§ä»¶è¿›è¡Œå±•ç¤º</span>
  },
  <span class="hljs-attr">editFormOption</span>: {
      <span class="hljs-attr">comType</span>: <span class="hljs-string">'input'</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">'æµ‹è¯•ä¸€ä¸‹'</span>
  },
  <span class="hljs-attr">detailPanelOption</span>: {},
},
</code></pre>
<h2 data-id="heading-5">å››. schema è§£æHook</h2>
<p>é€šè¿‡<code>schema</code>é…ç½®è½¬åŒ–ä¸ºå¯è§†åŒ–ç•Œé¢ä¸­æœ€é‡è¦çš„è§£æå·¥å…·,ä»schemaä¸­å°†å„ä¸ªä¸åŒé…ç½®è¿›è¡ŒæŠ½ç¦»å‡ºå»å½¢æˆæ–°çš„<code>option</code>ç»™ç»„ä»¶è¿›è¡Œé¡µé¢æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { ref, watch, onMounted, nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { useRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-keyword">import</span> { useMenuStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'$store/menu.js'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useSchema</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()
    <span class="hljs-keyword">const</span> menuStore = <span class="hljs-title function_">useMenuStore</span>()

    <span class="hljs-keyword">const</span> api = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
    <span class="hljs-keyword">const</span> tableSchema = <span class="hljs-title function_">ref</span>({})
    <span class="hljs-keyword">const</span> tableConfig = <span class="hljs-title function_">ref</span>()
    <span class="hljs-keyword">const</span> searchSchema = <span class="hljs-title function_">ref</span>({})
    <span class="hljs-keyword">const</span> searchConfig = <span class="hljs-title function_">ref</span>()
    <span class="hljs-keyword">const</span> components = <span class="hljs-title function_">ref</span>({})

    <span class="hljs-comment">//æ„é€  schemaConfig ç›¸å…³é…ç½®,,è¾“é€ç»™ shemaViewè§£é‡Š</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">buildData</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-keyword">const</span> { key, <span class="hljs-attr">sider_key</span>: siderKey } = route.<span class="hljs-property">query</span>

        <span class="hljs-keyword">const</span> mItem = menuStore.<span class="hljs-title function_">findMenuItem</span>({
            <span class="hljs-attr">key</span>: <span class="hljs-string">'key'</span>,
            <span class="hljs-attr">value</span>: siderKey ?? key
        })
        <span class="hljs-keyword">if</span> (mItem &amp;&amp; mItem.<span class="hljs-property">schemaConfig</span>) {
            <span class="hljs-keyword">const</span> { <span class="hljs-attr">schemaConfig</span>: sConfig } = mItem
            <span class="hljs-keyword">const</span> configSchema = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(sConfig.<span class="hljs-property">schema</span>))

            api.<span class="hljs-property">value</span> = sConfig.<span class="hljs-property">api</span> ?? <span class="hljs-string">''</span>
            tableSchema.<span class="hljs-property">value</span> = {}
            tableConfig.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>
            searchSchema.<span class="hljs-property">value</span> = {}
            searchConfig.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>
            components.<span class="hljs-property">value</span> = {}

            <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
                <span class="hljs-comment">//æ„é€  tableSchema å’Œ tableConfig</span>
                tableSchema.<span class="hljs-property">value</span> = <span class="hljs-title function_">buildDtoSchema</span>(configSchema, <span class="hljs-string">'table'</span>)
                tableConfig.<span class="hljs-property">value</span> = sConfig.<span class="hljs-property">tableConfig</span>
                <span class="hljs-comment">//æ„é€  searchSchema å’Œ searchConfig</span>
                <span class="hljs-keyword">const</span> dtoSearchSchema = <span class="hljs-title function_">buildDtoSchema</span>(configSchema, <span class="hljs-string">'search'</span>)
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> dtoSearchSchema.<span class="hljs-property">properties</span>) {
                    <span class="hljs-keyword">if</span> (route.<span class="hljs-property">query</span>[key] !== <span class="hljs-literal">undefined</span>) {
                        dtoSearchSchema.<span class="hljs-property">properties</span>[key].<span class="hljs-property">option</span>.<span class="hljs-property">default</span> = route.<span class="hljs-property">query</span>[key]
                    }
                }
                searchSchema.<span class="hljs-property">value</span> = dtoSearchSchema
                searchConfig.<span class="hljs-property">value</span> = sConfig.<span class="hljs-property">tableConfig</span>

                <span class="hljs-comment">//æ„é€  components = { comKey :{ schema:{} , config:{} } } </span>
                <span class="hljs-keyword">const</span> { componentConfig } = sConfig
                <span class="hljs-keyword">if</span> (componentConfig &amp;&amp; <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(componentConfig).<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
                    <span class="hljs-keyword">const</span> dtoComponents = {}
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> comName <span class="hljs-keyword">in</span> componentConfig) {
                        dtoComponents[comName] = {
                            <span class="hljs-attr">schema</span>: <span class="hljs-title function_">buildDtoSchema</span>(configSchema, comName),
                            <span class="hljs-attr">config</span>: componentConfig[comName]
                        }
                    }
                    components.<span class="hljs-property">value</span> = dtoComponents
                }
            })
        }
    }

    <span class="hljs-comment">//é€šç”¨æ„å»º schemaæ–¹æ³•</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">buildDtoSchema</span> = (<span class="hljs-params">_schema, comName</span>) =&gt; {
        <span class="hljs-keyword">if</span> (!_schema?.<span class="hljs-property">properties</span>) { <span class="hljs-keyword">return</span> {} }
        <span class="hljs-keyword">const</span> dtoSchema = {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
            <span class="hljs-attr">properties</span>: {}
        }
        <span class="hljs-comment">// æå–æœ‰æ•ˆ schema å­—æ®µé‡   </span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> _schema.<span class="hljs-property">properties</span>) {
            <span class="hljs-keyword">const</span> props = _schema.<span class="hljs-property">properties</span>[key]
            <span class="hljs-keyword">if</span> (props[<span class="hljs-string">`<span class="hljs-subst">${comName}</span>Option`</span>]) {
                <span class="hljs-keyword">let</span> dtoProps = {}
                <span class="hljs-comment">//æå– props ä¸­é optionçš„éƒ¨åˆ†,å­˜æ”¾åˆ° dtoPropsä¸­</span>
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> pKey <span class="hljs-keyword">in</span> props) {
                    <span class="hljs-keyword">if</span> (pKey.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'Option'</span>) &lt; <span class="hljs-number">0</span>) {
                        dtoProps[pKey] = props[pKey]
                    }
                }
                <span class="hljs-comment">//å¤„ç† comName Option</span>
                dtoProps = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, dtoProps, { <span class="hljs-attr">option</span>: props[<span class="hljs-string">`<span class="hljs-subst">${comName}</span>Option`</span>] })
                <span class="hljs-comment">//å¤„ç† required å­—æ®µ</span>
                <span class="hljs-keyword">const</span> { required } = _schema
                <span class="hljs-keyword">if</span> (required &amp;&amp; required.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">pk</span> =&gt;</span> pk === key)) {
                    dtoProps.<span class="hljs-property">option</span>.<span class="hljs-property">required</span> = <span class="hljs-literal">true</span>
                }
                dtoSchema.<span class="hljs-property">properties</span>[key] = dtoProps
            }
        }

        <span class="hljs-keyword">return</span> dtoSchema
    }
    <span class="hljs-title function_">watch</span>([
        <span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">params</span>.<span class="hljs-property">key</span>,
        <span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">params</span>.<span class="hljs-property">sider_key</span>,
        <span class="hljs-function">() =&gt;</span> menuStore.<span class="hljs-property">menuList</span>,
    ], <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">buildData</span>()
    }, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> })

    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">buildData</span>()
    })

    <span class="hljs-keyword">return</span> {
        api,
        tableSchema,
        tableConfig,
        searchSchema,
        searchConfig,
        components,
    }
}
</code></pre>
<h2 data-id="heading-6">äº”. æ€»ç»“</h2>
<ol>
<li>
<p>åœ¨åŠ¨æ€ç»„ä»¶å°è£…ä¸­,ä½¿ç”¨é…ç½®æ–‡ä»¶ç»Ÿä¸€ç»„ä»¶å¼•å…¥ç®¡ç†,ä¿æŒå°è£…çš„çµæ´»å’Œæ‰©å±•æ€§</p>
</li>
<li>
<p>å®Œå–„<code>schema</code>é…ç½®,ä»¥<code>componentConfig</code>åŠ è½½ä¸åŒç»„ä»¶,å¢åŠ ä¸åŒç»„ä»¶çš„<code>xxxxxOption</code>é…ç½®å®Œæˆè¯¥ç»„ä»¶ä¸‹ä¸åŒçš„æ§ä»¶æ˜¾ç¤º,æœ€ç»ˆå½¢æˆæˆ‘ä»¬æ‰€éœ€è¦çš„äº¤äº’åŠ¨ä½œ</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2-2-2 å¿«é€ŸæŒæ¡Kotlin-å‡½æ•°&Lambda]]></title>    <link>https://juejin.cn/post/7586623059525173311</link>    <guid>https://juejin.cn/post/7586623059525173311</guid>    <pubDate>2025-12-23T05:02:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586623059525173311" data-draft-id="7586623059524616255" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2-2-2 å¿«é€ŸæŒæ¡Kotlin-å‡½æ•°&amp;Lambda"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-23T05:02:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆéƒ½å¤§è è"/> <meta itemprop="url" content="https://juejin.cn/user/289926799429805"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2-2-2 å¿«é€ŸæŒæ¡Kotlin-å‡½æ•°&amp;Lambda
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/289926799429805/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆéƒ½å¤§è è
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:02:39.000Z" title="Tue Dec 23 2025 05:02:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Kotlin å‡½æ•°ä¸ Lambda è¡¨è¾¾å¼</h2>
<h3 data-id="heading-1">1. å‡½æ•°ï¼ˆFunctionsï¼‰</h3>
<h4 data-id="heading-2">å‡½æ•°å®šä¹‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åŸºæœ¬å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">greet</span><span class="hljs-params">(name: <span class="hljs-type">String</span>)</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, <span class="hljs-variable">$name</span>!"</span>
}

<span class="hljs-comment">// 2. è¡¨è¾¾å¼å‡½æ•°ä½“ï¼ˆå•è¡¨è¾¾å¼å‡½æ•°ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">add</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> = a + b

<span class="hljs-comment">// 3. ç±»å‹æ¨æ–­</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">multiply</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span> = a * b

<span class="hljs-comment">// 4. æ— è¿”å›å€¼ï¼ˆUnit å¯çœç•¥ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printMessage</span><span class="hljs-params">(msg: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Unit</span> {
    println(msg)
}
<span class="hljs-comment">// ç­‰ä»·äº</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printMessage</span><span class="hljs-params">(msg: <span class="hljs-type">String</span>)</span></span> {
    println(msg)
}
</code></pre>
<h4 data-id="heading-3">å‡½æ•°å‚æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. é»˜è®¤å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createUser</span><span class="hljs-params">(name: <span class="hljs-type">String</span>, age: <span class="hljs-type">Int</span> = <span class="hljs-number">18</span>, city: <span class="hljs-type">String</span> = <span class="hljs-string">"Beijing"</span>)</span></span> {
    println(<span class="hljs-string">"Name: <span class="hljs-variable">$name</span>, Age: <span class="hljs-variable">$age</span>, City: <span class="hljs-variable">$city</span>"</span>)
}

<span class="hljs-comment">// 2. å‘½åå‚æ•°</span>
createUser(name = <span class="hljs-string">"Alice"</span>, city = <span class="hljs-string">"Shanghai"</span>)  <span class="hljs-comment">// age ä½¿ç”¨é»˜è®¤å€¼ 18</span>

<span class="hljs-comment">// 3. å¯å˜å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-keyword">vararg</span> numbers: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> numbers.sum()
}
sum(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)

<span class="hljs-comment">// 4. å‡½æ•°å‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">calculate</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>, operation: (<span class="hljs-type">Int</span>, <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> operation(a, b)
}
</code></pre>
<h4 data-id="heading-4">ç‰¹æ®Šå‡½æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. æ‰©å±•å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> String.<span class="hljs-title">addExclamation</span><span class="hljs-params">()</span></span>: String = <span class="hljs-string">"<span class="hljs-variable">$this</span>!"</span>

<span class="hljs-keyword">val</span> message = <span class="hljs-string">"Hello"</span>.addExclamation()  <span class="hljs-comment">// "Hello!"</span>

<span class="hljs-comment">// 2. ä¸­ç¼€å‡½æ•°</span>
<span class="hljs-keyword">infix</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Int</span>.<span class="hljs-title">times</span><span class="hljs-params">(str: <span class="hljs-type">String</span>)</span></span> = str.repeat(<span class="hljs-keyword">this</span>)
<span class="hljs-keyword">val</span> result = <span class="hljs-number">3</span> times <span class="hljs-string">"Hi"</span>  <span class="hljs-comment">// "HiHiHi"</span>

<span class="hljs-comment">// 3. å†…è”å‡½æ•°ï¼ˆç”¨äºé«˜é˜¶å‡½æ•°ä¼˜åŒ–ï¼‰</span>
<span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">measureTime</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">val</span> start = System.currentTimeMillis()
    block()
    <span class="hljs-keyword">val</span> end = System.currentTimeMillis()
    println(<span class="hljs-string">"Time: <span class="hljs-subst">${end - start}</span>ms"</span>)
}

<span class="hljs-comment">// 4. å°¾é€’å½’å‡½æ•°</span>
<span class="hljs-keyword">tailrec</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">factorial</span><span class="hljs-params">(n: <span class="hljs-type">Int</span>, accumulator: <span class="hljs-type">Int</span> = <span class="hljs-number">1</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) accumulator <span class="hljs-keyword">else</span> factorial(n - <span class="hljs-number">1</span>, n * accumulator)
}

<span class="hljs-comment">// 5. å±€éƒ¨å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">outerFunction</span><span class="hljs-params">(x: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">innerFunction</span><span class="hljs-params">(y: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> x + y  <span class="hljs-comment">// å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å‚æ•°</span>
    }
    println(innerFunction(<span class="hljs-number">5</span>))
}
</code></pre>
<h3 data-id="heading-5">2. Lambda è¡¨è¾¾å¼</h3>
<h4 data-id="heading-6">åŸºæœ¬è¯­æ³•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åŸºæœ¬å½¢å¼</span>
<span class="hljs-keyword">val</span> sum: (<span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span> = { a, b -&gt; a + b }

<span class="hljs-comment">// 2. ç±»å‹æ¨æ–­</span>
<span class="hljs-keyword">val</span> multiply = { a: <span class="hljs-built_in">Int</span>, b: <span class="hljs-built_in">Int</span> -&gt; a * b }

<span class="hljs-comment">// 3. å•å‚æ•° lambdaï¼ˆå¯ç”¨ itï¼‰</span>
<span class="hljs-keyword">val</span> double: (<span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span> = { it * <span class="hljs-number">2</span> }
<span class="hljs-keyword">val</span> isEven: (<span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Boolean</span> = { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> }

<span class="hljs-comment">// 4. æ— å‚æ•° lambda</span>
<span class="hljs-keyword">val</span> sayHello: () -&gt; <span class="hljs-built_in">Unit</span> = { println(<span class="hljs-string">"Hello!"</span>) }

<span class="hljs-comment">// 5. ä½œä¸ºå‡½æ•°å‚æ•°</span>
listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>).forEach { println(it) }

<span class="hljs-comment">// 6. å¸¦æ¥æ”¶è€…çš„ lambdaï¼ˆå¸¸ç”¨äº DSLï¼‰</span>
<span class="hljs-keyword">val</span> stringBuilder = StringBuilder().apply {
    append(<span class="hljs-string">"Hello"</span>)
    append(<span class="hljs-string">" "</span>)
    append(<span class="hljs-string">"World"</span>)
}
</code></pre>
<h4 data-id="heading-7">Lambda ä¸é›†åˆæ“ä½œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> numbers = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>)

<span class="hljs-comment">// 1. filter - è¿‡æ»¤</span>
<span class="hljs-keyword">val</span> evens = numbers.filter { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> }  <span class="hljs-comment">// [2, 4, 6, 8, 10]</span>

<span class="hljs-comment">// 2. map - è½¬æ¢</span>
<span class="hljs-keyword">val</span> squares = numbers.map { it * it }  <span class="hljs-comment">// [1, 4, 9, 16, 25, ...]</span>

<span class="hljs-comment">// 3. reduce - ç´¯ç§¯æ“ä½œ</span>
<span class="hljs-keyword">val</span> sum = numbers.reduce { acc, num -&gt; acc + num }  <span class="hljs-comment">// 55</span>

<span class="hljs-comment">// 4. fold - å¸¦åˆå§‹å€¼çš„ç´¯ç§¯</span>
<span class="hljs-keyword">val</span> product = numbers.fold(<span class="hljs-number">1</span>) { acc, num -&gt; acc * num }

<span class="hljs-comment">// 5. takeWhile/dropWhile - æ¡ä»¶æˆªå–</span>
<span class="hljs-keyword">val</span> lessThan5 = numbers.takeWhile { it &lt; <span class="hljs-number">5</span> }  <span class="hljs-comment">// [1, 2, 3, 4]</span>
<span class="hljs-keyword">val</span> from5 = numbers.dropWhile { it &lt; <span class="hljs-number">5</span> }     <span class="hljs-comment">// [5, 6, 7, 8, 9, 10]</span>

<span class="hljs-comment">// 6. sortedBy - æ’åº</span>
<span class="hljs-keyword">val</span> strings = listOf(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"cherry"</span>)
<span class="hljs-keyword">val</span> sortedByLength = strings.sortedBy { it.length }  <span class="hljs-comment">// ["apple", "cherry", "banana"]</span>

<span class="hljs-comment">// 7. groupBy - åˆ†ç»„</span>
<span class="hljs-keyword">val</span> groupedByParity = numbers.groupBy { 
    <span class="hljs-keyword">if</span> (it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) <span class="hljs-string">"even"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"odd"</span> 
}
<span class="hljs-comment">// ç»“æœ: {"odd"=[1,3,5,7,9], "even"=[2,4,6,8,10]}</span>

<span class="hljs-comment">// 8. flatMap - æ‰å¹³åŒ–æ˜ å°„</span>
<span class="hljs-keyword">val</span> nested = listOf(listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), listOf(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>), listOf(<span class="hljs-number">5</span>, <span class="hljs-number">6</span>))
<span class="hljs-keyword">val</span> flat = nested.flatMap { it }  <span class="hljs-comment">// [1, 2, 3, 4, 5, 6]</span>
</code></pre>
<h3 data-id="heading-8">3. é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order Functionsï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å‡½æ•°ä½œä¸ºå‚æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processNumbers</span><span class="hljs-params">(
    numbers: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Int</span>&gt;,
    filter: (<span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Boolean</span>,
    transform: (<span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span>
)</span></span>: List&lt;<span class="hljs-built_in">Int</span>&gt; {
    <span class="hljs-keyword">return</span> numbers.filter(filter).map(transform)
}

<span class="hljs-keyword">val</span> result = processNumbers(
    numbers = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>),
    filter = { it &gt; <span class="hljs-number">2</span> },
    transform = { it * <span class="hljs-number">10</span> }
)  <span class="hljs-comment">// [30, 40, 50]</span>

<span class="hljs-comment">// 2. å‡½æ•°ä½œä¸ºè¿”å›å€¼</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getOperation</span><span class="hljs-params">(type: <span class="hljs-type">String</span>)</span></span>: (<span class="hljs-built_in">Int</span>, <span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (type) {
        <span class="hljs-string">"add"</span> -&gt; { a, b -&gt; a + b }
        <span class="hljs-string">"multiply"</span> -&gt; { a, b -&gt; a * b }
        <span class="hljs-keyword">else</span> -&gt; { a, b -&gt; a - b }
    }
}

<span class="hljs-keyword">val</span> operation = getOperation(<span class="hljs-string">"add"</span>)
println(operation(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))  <span class="hljs-comment">// 8</span>

<span class="hljs-comment">// 3. ç»„åˆå‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compose</span><span class="hljs-params">(f: (<span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span>, g: (<span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span>)</span></span>: (<span class="hljs-built_in">Int</span>) -&gt; <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> { x -&gt; f(g(x)) }
}

<span class="hljs-keyword">val</span> addTwo = { x: <span class="hljs-built_in">Int</span> -&gt; x + <span class="hljs-number">2</span> }
<span class="hljs-keyword">val</span> timesThree = { x: <span class="hljs-built_in">Int</span> -&gt; x * <span class="hljs-number">3</span> }
<span class="hljs-keyword">val</span> composed = compose(addTwo, timesThree)
println(composed(<span class="hljs-number">5</span>))  <span class="hljs-comment">// 17 = (5 * 3) + 2</span>

<span class="hljs-comment">// 4. å¸¦æ¥æ”¶è€…çš„å‡½æ•°ç±»å‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">buildString</span><span class="hljs-params">(builderAction: <span class="hljs-type">StringBuilder</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span>: String {
    <span class="hljs-keyword">val</span> sb = StringBuilder()
    sb.builderAction()
    <span class="hljs-keyword">return</span> sb.toString()
}

<span class="hljs-keyword">val</span> s = buildString {
    append(<span class="hljs-string">"Hello, "</span>)
    append(<span class="hljs-string">"World!"</span>)
}  <span class="hljs-comment">// "Hello, World!"</span>
</code></pre>
<h3 data-id="heading-9">4. ä½œç”¨åŸŸå‡½æ•°ï¼ˆScope Functionsï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<span class="hljs-keyword">var</span> name: String, <span class="hljs-keyword">var</span> age: <span class="hljs-built_in">Int</span>, <span class="hljs-keyword">var</span> city: String)

<span class="hljs-keyword">val</span> person = Person(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">25</span>, <span class="hljs-string">"New York"</span>)

<span class="hljs-comment">// 1. let - ç”¨ it å¼•ç”¨å¯¹è±¡ï¼Œè¿”å› lambda ç»“æœ</span>
<span class="hljs-keyword">val</span> nameLength = person.let {
    it.name = it.name.capitalize()
    it.name.length  <span class="hljs-comment">// è¿”å›è¿™ä¸ª</span>
}

<span class="hljs-comment">// 2. run - ç”¨ this å¼•ç”¨å¯¹è±¡ï¼Œè¿”å› lambda ç»“æœ</span>
<span class="hljs-keyword">val</span> description = person.run {
    age += <span class="hljs-number">1</span>  <span class="hljs-comment">// å¯ä»¥ç›´æ¥è®¿é—®å±æ€§</span>
    <span class="hljs-string">"<span class="hljs-variable">$name</span> is <span class="hljs-variable">$age</span> years old from <span class="hljs-variable">$city</span>"</span>  <span class="hljs-comment">// è¿”å›è¿™ä¸ª</span>
}

<span class="hljs-comment">// 3. with - ç±»ä¼¼ runï¼Œä½†ä½œä¸ºç‹¬ç«‹å‡½æ•°</span>
with(person) {
    println(<span class="hljs-string">"Processing <span class="hljs-variable">$name</span>"</span>)
    city = <span class="hljs-string">"London"</span>
}

<span class="hljs-comment">// 4. apply - ç”¨ this å¼•ç”¨å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡æœ¬èº«</span>
<span class="hljs-keyword">val</span> modifiedPerson = person.apply {
    name = <span class="hljs-string">"Bob"</span>
    age = <span class="hljs-number">30</span>
}  <span class="hljs-comment">// è¿”å› person å¯¹è±¡æœ¬èº«</span>

<span class="hljs-comment">// 5. also - ç”¨ it å¼•ç”¨å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡æœ¬èº«</span>
<span class="hljs-keyword">val</span> personCopy = person.also {
    println(<span class="hljs-string">"Before: <span class="hljs-variable">$it</span>"</span>)
    it.age = <span class="hljs-number">26</span>
}.also {
    println(<span class="hljs-string">"After: <span class="hljs-variable">$it</span>"</span>)
}
</code></pre>
<h3 data-id="heading-10">5. Lambda çš„ç‰¹æ®Šè¯­æ³•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. æœ€åå‚æ•°æ˜¯ lambda æ—¶å¯ä»¥æ”¾åˆ°æ‹¬å·å¤–</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">executeWithDelay</span><span class="hljs-params">(delay: <span class="hljs-type">Long</span>, action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    Thread.sleep(delay)
    action()
}

<span class="hljs-comment">// ä¼ ç»Ÿè°ƒç”¨</span>
executeWithDelay(<span class="hljs-number">1000</span>, { println(<span class="hljs-string">"Hello"</span>) })

<span class="hljs-comment">// ç®€åŒ–è°ƒç”¨ï¼ˆæ¨èï¼‰</span>
executeWithDelay(<span class="hljs-number">1000</span>) {
    println(<span class="hljs-string">"Hello"</span>)
}

<span class="hljs-comment">// 2. å¦‚æœ lambda æ˜¯å”¯ä¸€å‚æ•°ï¼Œå¯ä»¥çœç•¥æ‹¬å·</span>
listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>).forEach { println(it) }

<span class="hljs-comment">// 3. å¸¦æ ‡ç­¾çš„ return</span>
listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>).forEach {
    <span class="hljs-keyword">if</span> (it == <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span><span class="hljs-symbol">@forEach</span>  <span class="hljs-comment">// åªä»è¿™ä¸ª lambda è¿”å›</span>
    println(it)
}
<span class="hljs-comment">// è¾“å‡º: 1 2 4 5</span>

<span class="hljs-comment">// 4. åŒ¿åå‡½æ•°ï¼ˆç±»ä¼¼ lambdaï¼Œä½† return è¡Œä¸ºä¸åŒï¼‰</span>
listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>).forEach(<span class="hljs-function"><span class="hljs-title">fun</span><span class="hljs-params">(value)</span></span> {
    <span class="hljs-keyword">if</span> (value == <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span>  <span class="hljs-comment">// ä»åŒ¿åå‡½æ•°è¿”å›ï¼Œç»§ç»­å¾ªç¯</span>
    println(value)
})
<span class="hljs-comment">// è¾“å‡º: 1 3</span>
</code></pre>
<h3 data-id="heading-11">6. å®ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. DSL æ„å»ºå™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HTML</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">body</span><span class="hljs-params">()</span></span> { println(<span class="hljs-string">"Creating body"</span>) }
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">div</span><span class="hljs-params">(block: <span class="hljs-type">Div</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span> { Div().apply(block) }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Div</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">p</span><span class="hljs-params">(text: <span class="hljs-type">String</span>)</span></span> { println(<span class="hljs-string">"Paragraph: <span class="hljs-variable">$text</span>"</span>) }
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">a</span><span class="hljs-params">(href: <span class="hljs-type">String</span>, text: <span class="hljs-type">String</span>)</span></span> { println(<span class="hljs-string">"Link: &lt;a href='<span class="hljs-variable">$href</span>'&gt;<span class="hljs-variable">$text</span>&lt;/a&gt;"</span>) }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">html</span><span class="hljs-params">(block: <span class="hljs-type">HTML</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span>: HTML {
    <span class="hljs-keyword">return</span> HTML().apply(block)
}

html {
    body()
    div {
        p(<span class="hljs-string">"Hello World"</span>)
        a(<span class="hljs-string">"https://kotlinlang.org"</span>, <span class="hljs-string">"Kotlin"</span>)
    }
}

<span class="hljs-comment">// 2. ç¼“å­˜è®¡ç®—ç»“æœ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T, R&gt;</span> <span class="hljs-title">memoize</span><span class="hljs-params">(fn: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">R</span>)</span></span>: (T) -&gt; R {
    <span class="hljs-keyword">val</span> cache = mutableMapOf&lt;T, R&gt;()
    <span class="hljs-keyword">return</span> { key -&gt;
        cache.getOrPut(key) { fn(key) }
    }
}

<span class="hljs-keyword">val</span> expensiveCalculation = memoize { n: <span class="hljs-built_in">Int</span> -&gt;
    println(<span class="hljs-string">"Calculating for <span class="hljs-variable">$n</span>"</span>)
    <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—</span>
    (<span class="hljs-number">1.</span>.n).sum()
}

println(expensiveCalculation(<span class="hljs-number">5</span>))  <span class="hljs-comment">// è®¡ç®—å¹¶ç¼“å­˜</span>
println(expensiveCalculation(<span class="hljs-number">5</span>))  <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ç¼“å­˜</span>
</code></pre>
<h3 data-id="heading-12">7. å‡½æ•°å¼•ç”¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å‡½æ•°å¼•ç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isEven</span><span class="hljs-params">(n: <span class="hljs-type">Int</span>)</span></span> = n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>
<span class="hljs-keyword">val</span> numbers = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)

<span class="hljs-comment">// ä½¿ç”¨å‡½æ•°å¼•ç”¨</span>
<span class="hljs-keyword">val</span> evens = numbers.filter(::isEven)

<span class="hljs-comment">// 2. å±æ€§å¼•ç”¨</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span>)
<span class="hljs-keyword">val</span> users = listOf(User(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">25</span>), User(<span class="hljs-string">"Bob"</span>, <span class="hljs-number">30</span>))

<span class="hljs-comment">// æŒ‰å±æ€§å¼•ç”¨æ’åº</span>
<span class="hljs-keyword">val</span> sortedByName = users.sortedBy(User::name)
<span class="hljs-keyword">val</span> ages = users.map(User::age)

<span class="hljs-comment">// 3. æ„é€ å‡½æ•°å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>(<span class="hljs-keyword">val</span> name: String)

<span class="hljs-keyword">val</span> createPerson = ::Person
<span class="hljs-keyword">val</span> person = createPerson(<span class="hljs-string">"Charlie"</span>)

<span class="hljs-comment">// 4. ç»‘å®šå‡½æ•°å¼•ç”¨</span>
<span class="hljs-keyword">val</span> alice = User(<span class="hljs-string">"Alice"</span>, <span class="hljs-number">25</span>)
<span class="hljs-keyword">val</span> isAliceAdult = alice::isAdult
println(isAliceAdult())  <span class="hljs-comment">// true</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> User.<span class="hljs-title">isAdult</span><span class="hljs-params">()</span></span> = age &gt;= <span class="hljs-number">18</span>
</code></pre>
<h3 data-id="heading-13">æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨è¡¨è¾¾å¼å‡½æ•°ä½“</strong>ï¼šå½“å‡½æ•°ä½“å¾ˆç®€å•æ—¶</li>
<li><strong>åˆç†ä½¿ç”¨é»˜è®¤å‚æ•°</strong>ï¼šå‡å°‘é‡è½½å‡½æ•°æ•°é‡</li>
<li><strong>å–„ç”¨ä½œç”¨åŸŸå‡½æ•°</strong>ï¼šè®©ä»£ç æ›´ç®€æ´æ¸…æ™°</li>
<li><strong>é“¾å¼è°ƒç”¨æ—¶è€ƒè™‘æ€§èƒ½</strong>ï¼šé¿å…åˆ›å»ºè¿‡å¤šä¸­é—´é›†åˆ</li>
<li><strong>ä½¿ç”¨å‡½æ•°å¼•ç”¨</strong>ï¼šæé«˜ä»£ç å¯è¯»æ€§</li>
<li><strong>å†…è”é«˜é˜¶å‡½æ•°</strong>ï¼šå‡å°‘ lambda å¼€é”€</li>
<li><strong>æ³¨æ„ lambda ä¸­çš„è¿”å›è¡Œä¸º</strong>ï¼šä½¿ç”¨æ ‡ç­¾æˆ–åŒ¿åå‡½æ•°æ§åˆ¶</li>
</ol>
<p>Kotlin çš„å‡½æ•°å’Œ lambda è¡¨è¾¾å¼æ˜¯å…¶å‡½æ•°å¼ç¼–ç¨‹èƒ½åŠ›çš„æ ¸å¿ƒï¼Œå®ƒä»¬ä½¿ä»£ç æ›´åŠ ç®€æ´ã€è¡¨è¾¾åŠ›æ›´å¼ºï¼Œå¹¶ä¸”æ”¯æŒå¤šç§ç¼–ç¨‹èŒƒå¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2-1-1 å¿«é€ŸæŒæ¡Kotlin-kotlinä¸­å˜é‡&è¯­å¥&è¡¨è¾¾å¼]]></title>    <link>https://juejin.cn/post/7586585688004804649</link>    <guid>https://juejin.cn/post/7586585688004804649</guid>    <pubDate>2025-12-23T03:18:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585688004804649" data-draft-id="7586555198116184070" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2-1-1 å¿«é€ŸæŒæ¡Kotlin-kotlinä¸­å˜é‡&amp;è¯­å¥&amp;è¡¨è¾¾å¼"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-23T03:18:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆéƒ½å¤§è è"/> <meta itemprop="url" content="https://juejin.cn/user/289926799429805"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2-1-1 å¿«é€ŸæŒæ¡Kotlin-kotlinä¸­å˜é‡&amp;è¯­å¥&amp;è¡¨è¾¾å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/289926799429805/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆéƒ½å¤§è è
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:18:27.000Z" title="Tue Dec 23 2025 03:18:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Kotlin ä¸­ï¼Œå˜é‡ã€è¯­å¥å’Œè¡¨è¾¾å¼æ˜¯ç¼–ç¨‹çš„åŸºç¡€æ¦‚å¿µã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šï¼š</p>
<h2 data-id="heading-0">1. å˜é‡ï¼ˆVariablesï¼‰</h2>
<h3 data-id="heading-1">å£°æ˜æ–¹å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åªè¯»å˜é‡ï¼ˆæ¨èä½¿ç”¨ï¼Œç±»ä¼¼ Java çš„ finalï¼‰</span>
<span class="hljs-keyword">val</span> name = <span class="hljs-string">"Kotlin"</span>  <span class="hljs-comment">// ç±»å‹è‡ªåŠ¨æ¨æ–­ä¸º String</span>
<span class="hljs-keyword">val</span> age: <span class="hljs-built_in">Int</span> = <span class="hljs-number">25</span>     <span class="hljs-comment">// æ˜¾å¼å£°æ˜ç±»å‹</span>

<span class="hljs-comment">// å¯å˜å˜é‡</span>
<span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>
<span class="hljs-keyword">var</span> price: <span class="hljs-built_in">Double</span> = <span class="hljs-number">99.9</span>
</code></pre>
<h3 data-id="heading-2">ç‰¹ç‚¹</h3>
<ul>
<li><code>val</code>ï¼ˆvalueï¼‰åªè¯»å˜é‡ï¼Œèµ‹å€¼åä¸èƒ½ä¿®æ”¹</li>
<li><code>var</code>ï¼ˆvariableï¼‰å¯å˜å˜é‡ï¼Œå¯ä»¥é‡æ–°èµ‹å€¼</li>
<li>ç±»å‹å¯è‡ªåŠ¨æ¨æ–­ï¼Œä¹Ÿå¯æ˜¾å¼å£°æ˜</li>
<li>å˜é‡åä½¿ç”¨é©¼å³°å‘½åæ³•</li>
</ul>
<h3 data-id="heading-3">ç©ºå®‰å…¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> nullableString: String? = <span class="hljs-literal">null</span>  <span class="hljs-comment">// å¯ç©ºç±»å‹</span>
<span class="hljs-keyword">var</span> nonNullString: String = <span class="hljs-string">"Hello"</span>  <span class="hljs-comment">// éç©ºç±»å‹ï¼ˆé»˜è®¤ï¼‰</span>

<span class="hljs-keyword">val</span> length = nullableString?.length  <span class="hljs-comment">// å®‰å…¨è°ƒç”¨</span>
<span class="hljs-keyword">val</span> length2 = nullableString!!.length  <span class="hljs-comment">// éç©ºæ–­è¨€ï¼ˆå¯èƒ½æŠ›å¼‚å¸¸ï¼‰</span>
<span class="hljs-keyword">val</span> length3 = nullableString?.length ?: <span class="hljs-number">0</span>  <span class="hljs-comment">// Elvis æ“ä½œç¬¦</span>
</code></pre>
<h2 data-id="heading-4">2. è¯­å¥ï¼ˆStatementsï¼‰</h2>
<p>è¯­å¥æ˜¯æ‰§è¡Œæ“ä½œçš„ä»£ç å•å…ƒï¼Œä¸è¿”å›å€¼ï¼š</p>
<h3 data-id="heading-5">èµ‹å€¼è¯­å¥</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> x = <span class="hljs-number">10</span>
<span class="hljs-keyword">var</span> y = <span class="hljs-number">20</span>
y = <span class="hljs-number">30</span>  <span class="hljs-comment">// é‡æ–°èµ‹å€¼</span>
</code></pre>
<h3 data-id="heading-6">æ§åˆ¶æµè¯­å¥</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// if è¯­å¥</span>
<span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">5</span>) {
    println(<span class="hljs-string">"x is greater than 5"</span>)
} <span class="hljs-keyword">else</span> {
    println(<span class="hljs-string">"x is not greater than 5"</span>)
}

<span class="hljs-comment">// when è¯­å¥ï¼ˆç±»ä¼¼ switchï¼‰</span>
<span class="hljs-keyword">when</span> (x) {
    <span class="hljs-number">1</span> -&gt; println(<span class="hljs-string">"One"</span>)
    <span class="hljs-number">2</span> -&gt; println(<span class="hljs-string">"Two"</span>)
    <span class="hljs-keyword">in</span> <span class="hljs-number">3.</span><span class="hljs-number">.10</span> -&gt; println(<span class="hljs-string">"3 to 10"</span>)
    <span class="hljs-keyword">else</span> -&gt; println(<span class="hljs-string">"Other"</span>)
}

<span class="hljs-comment">// for å¾ªç¯</span>
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.5</span>) {
    println(i)
}

<span class="hljs-keyword">val</span> items = listOf(<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"orange"</span>)
<span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> items) {
    println(item)
}

<span class="hljs-comment">// while å¾ªç¯</span>
<span class="hljs-keyword">while</span> (x &gt; <span class="hljs-number">0</span>) {
    println(x)
    x--
}
</code></pre>
<h2 data-id="heading-7">3. è¡¨è¾¾å¼ï¼ˆExpressionsï¼‰</h2>
<p>è¡¨è¾¾å¼æœ‰å€¼ï¼Œå¯ä»¥æ”¾åœ¨èµ‹å€¼ç¬¦å·å³è¾¹ï¼š</p>
<h3 data-id="heading-8">èµ‹å€¼è¡¨è¾¾å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> result = <span class="hljs-number">5</span> + <span class="hljs-number">3</span> * <span class="hljs-number">2</span>  <span class="hljs-comment">// è¡¨è¾¾å¼å€¼ä¸º 11</span>
</code></pre>
<h3 data-id="heading-9">if è¡¨è¾¾å¼ï¼ˆåœ¨ Kotlin ä¸­ï¼Œif æ˜¯è¡¨è¾¾å¼ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> max = <span class="hljs-keyword">if</span> (a &gt; b) a <span class="hljs-keyword">else</span> b  <span class="hljs-comment">// if è¿”å›ä¸€ä¸ªå€¼</span>

<span class="hljs-keyword">val</span> grade = <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">90</span>) {
    <span class="hljs-string">"A"</span>
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">80</span>) {
    <span class="hljs-string">"B"</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-string">"C"</span>
}
</code></pre>
<h3 data-id="heading-10">when è¡¨è¾¾å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> description = <span class="hljs-keyword">when</span> (number) {
    <span class="hljs-number">1</span> -&gt; <span class="hljs-string">"One"</span>
    <span class="hljs-number">2</span> -&gt; <span class="hljs-string">"Two"</span>
    <span class="hljs-keyword">else</span> -&gt; <span class="hljs-string">"Many"</span>
}

<span class="hljs-keyword">val</span> type = <span class="hljs-keyword">when</span> {
    x &gt; <span class="hljs-number">0</span> -&gt; <span class="hljs-string">"Positive"</span>
    x &lt; <span class="hljs-number">0</span> -&gt; <span class="hljs-string">"Negative"</span>
    <span class="hljs-keyword">else</span> -&gt; <span class="hljs-string">"Zero"</span>
}
</code></pre>
<h3 data-id="heading-11">try-catch è¡¨è¾¾å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> number = <span class="hljs-keyword">try</span> {
    <span class="hljs-string">"123"</span>.toInt()
} <span class="hljs-keyword">catch</span> (e: NumberFormatException) {
    <span class="hljs-number">0</span>  <span class="hljs-comment">// é»˜è®¤å€¼</span>
}
</code></pre>
<h3 data-id="heading-12">Lambda è¡¨è¾¾å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> sum = { a: <span class="hljs-built_in">Int</span>, b: <span class="hljs-built_in">Int</span> -&gt; a + b }
println(sum(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))  <span class="hljs-comment">// è¾“å‡º 8</span>

<span class="hljs-keyword">val</span> numbers = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
<span class="hljs-keyword">val</span> doubled = numbers.map { it * <span class="hljs-number">2</span> }  <span class="hljs-comment">// [2, 4, 6, 8, 10]</span>
</code></pre>
<h2 data-id="heading-13">4. å…³é”®åŒºåˆ«å’Œç‰¹æ€§</h2>
<h3 data-id="heading-14">è¡¨è¾¾å¼ vs è¯­å¥</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è¯­å¥ï¼ˆä¸è¿”å›å€¼ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
    println(message)
}

<span class="hljs-comment">// è¡¨è¾¾å¼å‡½æ•°ï¼ˆå•è¡¨è¾¾å¼å‡½æ•°ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">add</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span> = a + b

<span class="hljs-comment">// if ä½œä¸ºè¡¨è¾¾å¼ï¼ˆè¿”å›ç±»å‹æ¨æ–­ä¸º Intï¼‰</span>
<span class="hljs-keyword">val</span> result = <span class="hljs-keyword">if</span> (condition) <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">2</span>
</code></pre>
<h3 data-id="heading-15">ä½œç”¨åŸŸå‡½æ•°ï¼ˆç‰¹æ®Šçš„è¡¨è¾¾å¼ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> person = Person().apply {
    name = <span class="hljs-string">"Alice"</span>
    age = <span class="hljs-number">25</span>
}

<span class="hljs-keyword">val</span> length = person.let {
    it.name.length
}

<span class="hljs-keyword">val</span> modified = person.run {
    name = <span class="hljs-string">"Bob"</span>
    <span class="hljs-keyword">this</span>  <span class="hljs-comment">// è¿”å›å¯¹è±¡æœ¬èº«</span>
}
</code></pre>
<h3 data-id="heading-16">èŒƒå›´è¡¨è¾¾å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// èŒƒå›´è¡¨è¾¾å¼</span>
<span class="hljs-keyword">val</span> range1 = <span class="hljs-number">1.</span><span class="hljs-number">.10</span>  <span class="hljs-comment">// åŒ…å« 10</span>
<span class="hljs-keyword">val</span> range2 = <span class="hljs-number">1</span> until <span class="hljs-number">10</span>  <span class="hljs-comment">// ä¸åŒ…å« 10</span>
<span class="hljs-keyword">val</span> range3 = <span class="hljs-number">10</span> downTo <span class="hljs-number">1</span>  <span class="hljs-comment">// é€’å‡</span>
<span class="hljs-keyword">val</span> range4 = <span class="hljs-number">1.</span><span class="hljs-number">.10</span> step <span class="hljs-number">2</span>  <span class="hljs-comment">// æ­¥é•¿ä¸º 2</span>
</code></pre>
<h2 data-id="heading-17">5. å®ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å˜é‡å£°æ˜å’Œåˆå§‹åŒ–</span>
<span class="hljs-keyword">val</span> name = <span class="hljs-string">"Kotlin"</span>
<span class="hljs-keyword">var</span> counter = <span class="hljs-number">0</span>

<span class="hljs-comment">// è¡¨è¾¾å¼ç»„åˆ</span>
<span class="hljs-keyword">val</span> status = <span class="hljs-keyword">when</span> {
    counter &gt; <span class="hljs-number">10</span> -&gt; <span class="hljs-string">"High"</span>
    counter &gt; <span class="hljs-number">5</span> -&gt; <span class="hljs-string">"Medium"</span>
    counter &gt; <span class="hljs-number">0</span> -&gt; <span class="hljs-string">"Low"</span>
    <span class="hljs-keyword">else</span> -&gt; <span class="hljs-string">"Zero"</span>
}

<span class="hljs-comment">// ä½¿ç”¨ Elvis æ“ä½œç¬¦å¤„ç†ç©ºå€¼</span>
<span class="hljs-keyword">val</span> displayName = nullableName ?: <span class="hljs-string">"Guest"</span>

<span class="hljs-comment">// é›†åˆæ“ä½œï¼ˆå‡½æ•°å¼è¡¨è¾¾å¼ï¼‰</span>
<span class="hljs-keyword">val</span> numbers = listOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
<span class="hljs-keyword">val</span> evenSquares = numbers
    .filter { it % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> }
    .map { it * it }
    .sum()
</code></pre>
<h2 data-id="heading-18">æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨ <code>val</code></strong>ï¼Œé™¤éç¡®å®éœ€è¦å¯å˜æ€§</li>
<li><strong>åˆ©ç”¨ç±»å‹æ¨æ–­</strong>å‡å°‘å†—ä½™ä»£ç </li>
<li><strong>ä½¿ç”¨è¡¨è¾¾å¼å½¢å¼</strong>ä½¿ä»£ç æ›´ç®€æ´</li>
<li><strong>å–„ç”¨ç©ºå®‰å…¨ç‰¹æ€§</strong>é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸</li>
<li><strong>ä½¿ç”¨èŒƒå›´è¡¨è¾¾å¼</strong>ç®€åŒ–å¾ªç¯å’Œæ¡ä»¶åˆ¤æ–­</li>
</ol>
<p>Kotlin çš„è®¾è®¡é¼“åŠ±ä½¿ç”¨è¡¨è¾¾å¼è€Œä¸æ˜¯è¯­å¥ï¼Œè¿™ä½¿ä»£ç æ›´ç®€æ´ã€æ›´å‡½æ•°å¼ã€‚å¾ˆå¤šåœ¨ Java ä¸­æ˜¯è¯­å¥çš„ç»“æ„ï¼Œåœ¨ Kotlin ä¸­éƒ½æ˜¯è¡¨è¾¾å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çƒ§è„‘æ—¶åˆ»ï¼šDart ä¸­å¼‚æ­¥ç”Ÿæˆå™¨ä¸æµ]]></title>    <link>https://juejin.cn/post/7586585688005181481</link>    <guid>https://juejin.cn/post/7586585688005181481</guid>    <pubDate>2025-12-23T03:44:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585688005181481" data-draft-id="7586579021284229174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çƒ§è„‘æ—¶åˆ»ï¼šDart ä¸­å¼‚æ­¥ç”Ÿæˆå™¨ä¸æµ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-23T03:44:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OldBirds"/> <meta itemprop="url" content="https://juejin.cn/user/325111172054350"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çƒ§è„‘æ—¶åˆ»ï¼šDart ä¸­å¼‚æ­¥ç”Ÿæˆå™¨ä¸æµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/325111172054350/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OldBirds
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:44:16.000Z" title="Tue Dec 23 2025 03:44:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Stream&lt;<span class="hljs-built_in">int</span>&gt; countStream(<span class="hljs-built_in">int</span> max) <span class="hljs-keyword">async</span>* {
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; max; i++) {
        <span class="hljs-keyword">yield</span> i;
    }
}
</code></pre>
<p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªå¼‚æ­¥ç”Ÿæˆå™¨å‡½æ•°ï¼Œç”¨æ¥äº§ç”Ÿä¸€ä¸ªæ•´æ•°åºåˆ—çš„æµï¼ˆ<code>Stream</code>ï¼‰ã€‚æˆ‘ä¼šä»åŸºç¡€åˆ°æ ¸å¿ƒï¼Œå¸®ä½ æŠŠè¿™æ®µä»£ç æ‹†è§£æ¸…æ¥šã€‚</p>
<h2 data-id="heading-0">ä»£ç æ•´ä½“åŠŸèƒ½</h2>
<p>è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>countStream</code> çš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•´æ•°å‚æ•° <code>max</code>ï¼Œè¿”å›ä¸€ä¸ª <code>Stream&lt;int&gt;</code>ï¼ˆæ•´æ•°ç±»å‹çš„æµï¼‰ã€‚è¿™ä¸ªæµä¼šå¼‚æ­¥åœ°ã€é€ä¸ªåœ°ç”Ÿæˆä» <code>0</code> åˆ° <code>max-1</code> çš„æ•´æ•°åºåˆ—ï¼ˆæ¯”å¦‚ä¼ å…¥ <code>max=3</code>ï¼Œä¼šä¾æ¬¡äº§ç”Ÿ <code>0</code>ã€<code>1</code>ã€<code>2</code>ï¼‰ã€‚</p>
<h2 data-id="heading-1">é€è¡Œæ‹†è§£è§£é‡Š</h2>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å‡½æ•°è¿”å›å€¼æ˜¯ Stream&lt;int&gt;ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªèƒ½äº§ç”Ÿæ•´æ•°çš„"æ•°æ®æµ"</span>
Stream&lt;<span class="hljs-built_in">int</span>&gt; countStream(<span class="hljs-built_in">int</span> max) <span class="hljs-keyword">async</span>* {
    <span class="hljs-comment">// æ™®é€šçš„ for å¾ªç¯ï¼Œä» 0 å¼€å§‹ï¼Œåˆ° max-1 ç»“æŸ</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; max; i++) {
        <span class="hljs-comment">// æ ¸å¿ƒå…³é”®å­—ï¼šyieldï¼Œä½œç”¨æ˜¯"äº§å‡º"ä¸€ä¸ªå€¼åˆ°æµä¸­</span>
        <span class="hljs-keyword">yield</span> i;
    }
}
</code></pre>
<h2 data-id="heading-2">æ ¸å¿ƒæ¦‚å¿µè§£é‡Š</h2>
<h3 data-id="heading-3"><code>Stream&lt;int&gt;</code>ï¼šæµ</h3>
<p>ä½ å¯ä»¥æŠŠ <code>Stream</code> ç†è§£æˆä¸€ä¸ª<strong>å¼‚æ­¥çš„ã€å¯è¿­ä»£çš„ "ç®¡é“"</strong>ï¼š</p>
<ul>
<li>æ™®é€šçš„ List æ˜¯ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ•°æ®ï¼ˆæ¯”å¦‚ [0,1,2]ï¼‰æ”¾åœ¨ä¸€ä¸ªå®¹å™¨é‡Œç»™ä½ ï¼›</li>
<li>è€Œ Stream æ˜¯æŠŠæ•°æ®<strong>é€ä¸ªã€å¼‚æ­¥åœ°</strong>é€šè¿‡ç®¡é“ä¼ ç»™ä½ ï¼ˆå…ˆä¼  0ï¼Œå†ä¼  1ï¼Œå†ä¼  2ï¼‰ï¼Œé€‚åˆå¤„ç†éœ€è¦ "è¾¹äº§ç”Ÿè¾¹æ¶ˆè´¹" çš„åœºæ™¯ï¼ˆæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å–ã€å®æ—¶æ•°æ®ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-4"><code>async*</code>ï¼šå¼‚æ­¥ç”Ÿæˆå™¨å‡½æ•°</h3>
<ul>
<li><code>async</code>ï¼šæ ‡è®°å‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œä½† <code>async*</code> æ˜¯ Dart ä¸“é—¨ç”¨äº<code>ç”Ÿæˆ Stream</code>çš„å¼‚æ­¥ç”Ÿæˆå™¨è¯­æ³•ï¼ˆåŒºåˆ«äºæ™®é€šå¼‚æ­¥å‡½æ•°çš„ asyncï¼‰ï¼›</li>
<li><code>*</code>ï¼šè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª "ç”Ÿæˆå™¨" å‡½æ•°ï¼Œä½œç”¨æ˜¯æŒç»­äº§ç”Ÿå€¼ï¼Œè€Œä¸æ˜¯åªè¿”å›ä¸€ä¸ªå€¼ã€‚</li>
</ul>
<h3 data-id="heading-5">yieldï¼šäº§å‡ºå€¼åˆ°æµä¸­</h3>
<p>yield æ˜¯ç”Ÿæˆå™¨çš„æ ¸å¿ƒå…³é”®å­—ï¼š</p>
<ul>
<li>å½“æ‰§è¡Œåˆ°<code>yield i</code>æ—¶ï¼Œå‡½æ•°ä¼šæŠŠå½“å‰çš„<code>i</code>å€¼ "å‘é€" åˆ° Stream ä¸­ï¼Œä¾›ç›‘å¬è€…æ¥æ”¶ï¼›</li>
<li>å‘é€åå‡½æ•°ä¸ä¼šç»“æŸï¼Œè€Œæ˜¯æš‚åœåœ¨è¿™é‡Œï¼Œç­‰ä¸‹ä¸€æ¬¡è¢«è¯·æ±‚æ—¶ç»§ç»­æ‰§è¡Œå¾ªç¯ï¼ˆç›´åˆ°å¾ªç¯ç»“æŸï¼ŒStream æ‰ä¼šå…³é—­ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-6">å®é™…ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ä¸ºäº†è®©ä½ æ›´ç›´è§‚ç†è§£ï¼Œæˆ‘å†™ä¸€ä¸ªå®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œä½ å¯ä»¥ç›´æ¥è¿è¡Œï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// è°ƒç”¨å‡½æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªæµï¼ˆæ­¤æ—¶æµè¿˜æ²¡å¼€å§‹äº§ç”Ÿæ•°æ®ï¼‰</span>
  Stream&lt;<span class="hljs-built_in">int</span>&gt; stream = countStream(<span class="hljs-number">3</span>);
  
  <span class="hljs-comment">// ç›‘å¬æµï¼Œæ¥æ”¶æ¯ä¸€ä¸ªäº§å‡ºçš„å€¼</span>
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> value <span class="hljs-keyword">in</span> stream) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ”¶åˆ°å€¼ï¼š<span class="hljs-subst">$value</span>'</span>);
  }
  
  <span class="hljs-built_in">print</span>(<span class="hljs-string">'æµå·²ç»“æŸ'</span>);
}

<span class="hljs-comment">// ä½ æä¾›çš„åŸå‡½æ•°</span>
Stream&lt;<span class="hljs-built_in">int</span>&gt; countStream(<span class="hljs-built_in">int</span> max) <span class="hljs-keyword">async</span>* {
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; max; i++) {
    <span class="hljs-keyword">yield</span> i;
  }
}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-dart" lang="dart">æ”¶åˆ°å€¼ï¼š<span class="hljs-number">0</span>
æ”¶åˆ°å€¼ï¼š<span class="hljs-number">1</span>
æ”¶åˆ°å€¼ï¼š<span class="hljs-number">2</span>
æµå·²ç»“æŸ
</code></pre>
<ul>
<li><code>countStream</code> æ˜¯ä¸€ä¸ª<code>å¼‚æ­¥ç”Ÿæˆå™¨å‡½æ•°</code>ï¼ˆ<code>async*</code>ï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ•´æ•°ç±»å‹çš„æµï¼ˆ<code>Stream&lt;int&gt;</code>ï¼‰ï¼›</li>
<li><code>yield</code> å…³é”®å­—è´Ÿè´£æŠŠå¾ªç¯ä¸­çš„æ¯ä¸ªæ•´æ•°é€ä¸ª "å‘é€" åˆ°æµä¸­ï¼Œè€Œéä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰å€¼ï¼›</li>
<li>æµçš„ç‰¹ç‚¹æ˜¯å¼‚æ­¥ã€é€ä¸ªæ¶ˆè´¹ï¼Œéœ€è¦é€šè¿‡ <code>await for</code> æˆ– <code>listen</code> æ¥ç›‘å¬å’Œæ¥æ”¶å€¼ã€‚</li>
</ul>
<h2 data-id="heading-7">ä¼˜ç‚¹</h2>
<p>ç”¨<code>Dart</code> å¼‚æ­¥ç”Ÿæˆå™¨ï¼ˆ<code>async* + yield</code>ï¼‰è¿”å› <code>Stream</code> çš„æ–¹å¼æ¥ç”Ÿæˆæ•°æ®åºåˆ—ï¼Œç›¸æ¯”ç›´æ¥è¿”å›åˆ—è¡¨ï¼ˆ<code>List</code>ï¼‰ç­‰å…¶ä»–æ–¹å¼ï¼Œå…·ä½“æœ‰å“ªäº›ä¼˜åŠ¿ã€‚æˆ‘ä¼šç»“åˆå®é™…åœºæ™¯ï¼ŒæŠŠè¿™äº›å¥½å¤„è®²å¾—é€šä¿—æ˜“æ‡‚ã€‚</p>
<h3 data-id="heading-8">æè‡´çš„å†…å­˜æ•ˆç‡ï¼šé¿å…ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®</h3>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å±é™©ï¼šmax=1äº¿æ—¶ä¼šç›´æ¥å¡å´©/å†…å­˜æº¢å‡º</span>
<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">int</span>&gt; countList(<span class="hljs-built_in">int</span> max) {
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">List</span>.generate(max, (i) =&gt; i);
}

<span class="hljs-comment">// å®‰å…¨ï¼šmax=1äº¿ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼ˆåªè¦æ¶ˆè´¹ç«¯èƒ½å¤„ç†ï¼‰</span>
Stream&lt;<span class="hljs-built_in">int</span>&gt; countStream(<span class="hljs-built_in">int</span> max) <span class="hljs-keyword">async</span>* {
  <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; max; i++) {
    <span class="hljs-keyword">yield</span> i;
  }
}
</code></pre>
<p>è¿™æ˜¯æœ€æ ¸å¿ƒçš„å¥½å¤„ã€‚</p>
<ul>
<li>å¦‚æœç”¨ <code>List&lt;int&gt; countList(int max)</code>ï¼Œå½“ <code>max</code> éå¸¸å¤§ï¼ˆæ¯”å¦‚ 100 ä¸‡ã€1 äº¿ï¼‰æ—¶ï¼Œä¼š<strong>ä¸€æ¬¡æ€§åœ¨å†…å­˜ä¸­åˆ›å»ºåŒ…å«æ‰€æœ‰å…ƒç´ çš„åˆ—è¡¨</strong>ï¼Œç¬é—´å ç”¨å¤§é‡å†…å­˜ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰ã€‚</li>
<li>è€Œ <code>Stream</code> + <code>yield</code> çš„æ–¹å¼ï¼šæ¯æ¬¡åªç”Ÿæˆä¸€ä¸ªå€¼å¹¶å‘é€ï¼Œå†…å­˜ä¸­å§‹ç»ˆåªä¿ç•™å½“å‰çš„ <code>i</code>ï¼ˆå•ä¸ªæ•´æ•°ï¼‰ï¼Œæ— è®º <code>max</code> å¤šå¤§ï¼Œå†…å­˜å ç”¨å‡ ä¹å¯ä»¥å¿½ç•¥ã€‚</li>
</ul>
<h3 data-id="heading-9">å¼‚æ­¥éé˜»å¡ï¼šä¸å¡ä¸»çº¿ç¨‹ï¼Œæ”¯æŒè€—æ—¶æ“ä½œ</h3>
<p><code>Stream</code> æ˜¯å¼‚æ­¥çš„ï¼Œç”Ÿæˆæ•°æ®çš„è¿‡ç¨‹å¯ä»¥åŒ…å«è€—æ—¶æ“ä½œï¼ˆæ¯”å¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å–ï¼‰ï¼Œä¸”ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼›è€Œæ™®é€šåˆ—è¡¨æ˜¯åŒæ­¥ç”Ÿæˆï¼Œè€—æ—¶æ“ä½œä¼šå¡ä½æ•´ä¸ªç¨‹åºã€‚</p>
<h3 data-id="heading-10">å®æ—¶å“åº”ï¼šè¾¹ç”Ÿäº§è¾¹æ¶ˆè´¹ï¼Œæå‡äº¤äº’ä½“éªŒ</h3>
<p><code>Stream</code> æ˜¯ã€Œæµå¼å¤„ç†ã€ï¼Œç”Ÿæˆä¸€ä¸ªå€¼å°±å¯ä»¥ç«‹å³æ¶ˆè´¹ä¸€ä¸ªå€¼ï¼Œæ— éœ€ç­‰å¾…æ‰€æœ‰æ•°æ®ç”Ÿæˆå®Œæ¯•ã€‚</p>
<ul>
<li>æ¯”å¦‚åšä¸€ä¸ªã€Œå®æ—¶è®¡æ•°å±•ç¤ºã€çš„åŠŸèƒ½ï¼šç”¨ <code>Stream</code> å¯ä»¥æ¯ç”Ÿæˆä¸€ä¸ªæ•°å°±ç«‹åˆ»æ›´æ–° <code>UI</code>ï¼Œç”¨æˆ·èƒ½çœ‹åˆ°è®¡æ•°é€æ­¥å¢åŠ ï¼›</li>
<li>ç”¨åˆ—è¡¨çš„è¯ï¼Œå¿…é¡»ç­‰æ‰€æœ‰æ•°ç”Ÿæˆå®Œï¼Œæ‰èƒ½ä¸€æ¬¡æ€§å±•ç¤ºï¼Œç”¨æˆ·ä¼šçœ‹åˆ°é•¿æ—¶é—´çš„ç©ºç™½ï¼Œä½“éªŒæå·®ã€‚</li>
</ul>
<h2 data-id="heading-11">ç¼ºç‚¹</h2>
<h3 data-id="heading-12">æ‰‹åŠ¨ç®¡ç†æˆæœ¬æé«˜ï¼Œææ˜“å¼•å‘å†…å­˜æ³„æ¼</h3>
<p>è¿™æ˜¯æœ€è‡´å‘½çš„ç¼ºç‚¹ï¼Œä¹Ÿæ˜¯å®é™…é¡¹ç›®ä¸­æœ€å®¹æ˜“è¸©çš„å‘ã€‚</p>
<ul>
<li>é—®é¢˜æœ¬è´¨ï¼š<code>async*</code> ç”Ÿæˆçš„ <code>Stream</code> è®¢é˜…åï¼Œå¿…é¡»æ‰‹åŠ¨è°ƒç”¨ <code>subscription.cancel()</code> å–æ¶ˆè®¢é˜…ï¼ˆæ¯”å¦‚åœ¨é¡µé¢ <code>dispose</code> ç”Ÿå‘½å‘¨æœŸä¸­ï¼‰ï¼›å¦‚æœå¿˜è®°å–æ¶ˆï¼Œ<code>async*</code> å‡½æ•°ä¼šæŒç»­æ‰§è¡Œï¼ˆæ¯”å¦‚å€’è®¡æ—¶å¾ªç¯ã€åˆ†é¡µè¯·æ±‚ï¼‰ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆé¡µé¢é”€æ¯åä»å ç”¨èµ„æºï¼‰ï¼Œç”šè‡³å¼•å‘ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆè®¢é˜…å›è°ƒä¸­æ“ä½œå·²é”€æ¯çš„ <code>Widget</code>ï¼‰ã€‚</li>
<li>å¯¹æ¯”ä¸»æµæ–¹æ¡ˆï¼š<code>Bloc/Riverpod/Provider</code> ä¼šè‡ªåŠ¨ç»‘å®š <code>Widget</code> ç”Ÿå‘½å‘¨æœŸï¼Œé¡µé¢é”€æ¯æ—¶è‡ªåŠ¨ç»ˆæ­¢çŠ¶æ€æ›´æ–°ï¼›<code>ValueNotifier</code> ä¹Ÿæ— éœ€æ‰‹åŠ¨å–æ¶ˆç›‘å¬ï¼Œ<code>GC</code> ä¼šè‡ªåŠ¨å¤„ç†ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BadStreamPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> BadStreamPage({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  State&lt;BadStreamPage&gt; createState() =&gt; _BadStreamPageState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_BadStreamPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">BadStreamPage</span>&gt; </span>{
  StreamSubscription&lt;<span class="hljs-built_in">int</span>&gt;? _subscription;

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    <span class="hljs-comment">// è®¢é˜…å€’è®¡æ—¶æµï¼Œä½†å¿˜è®°åœ¨ dispose ä¸­å–æ¶ˆ</span>
    _subscription = countStream(<span class="hljs-number">60</span>).listen((i) {
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'å€’è®¡æ—¶ï¼š<span class="hljs-subst">$i</span>'</span>); <span class="hljs-comment">// é¡µé¢é”€æ¯åä»ä¼šæ‰“å°ï¼Œå†…å­˜æ³„æ¼</span>
    });
  }

  <span class="hljs-comment">// å¿˜è®°é‡å†™ dispose å–æ¶ˆè®¢é˜… â†’ å†…å­˜æ³„æ¼ï¼</span>
  <span class="hljs-comment">// @override</span>
  <span class="hljs-comment">// void dispose() {</span>
  <span class="hljs-comment">//   _subscription?.cancel(); // å¿…é¡»æ‰‹åŠ¨å–æ¶ˆ</span>
  <span class="hljs-comment">//   super.dispose();</span>
  <span class="hljs-comment">// }</span>

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">const</span> Center(child: Text(<span class="hljs-string">'å€’è®¡æ—¶é¡µé¢'</span>));
  }
}
</code></pre>
<h3 data-id="heading-13">è°ƒè¯•ä½“éªŒå·®ï¼Œéš¾ä»¥è¿½è¸ªæ•°æ®æµè½¬</h3>
<p>åŸç”Ÿ <code>Stream + async*</code> ç¼ºä¹é…å¥—çš„è°ƒè¯•å·¥å…·ï¼Œæ’æŸ¥é—®é¢˜æˆæœ¬æé«˜ã€‚</p>
<ul>
<li>é—®é¢˜ 1ï¼šæ— æ³•ç›´è§‚çœ‹åˆ° <code>yield</code> çš„è°ƒç”¨æ—¶æœºã€æ•°æ®å€¼ï¼Œåªèƒ½é  <code>print</code> æ—¥å¿—è°ƒè¯•ï¼›</li>
<li>é—®é¢˜ 2ï¼šæ— æ³•è¿½è¸ª <code>Stream</code> çš„è®¢é˜… / å–æ¶ˆçŠ¶æ€ï¼Œæ’æŸ¥å†…å­˜æ³„æ¼æ—¶åªèƒ½é çŒœï¼›</li>
<li>å¯¹æ¯”ä¸»æµæ–¹æ¡ˆï¼š<code>Bloc</code> æœ‰ <code>BlocObserver</code> å¯å…¨å±€ç›‘æ§æ‰€æœ‰çŠ¶æ€ <code>emit</code>æ“ä½œï¼Œ<code>Flutter DevTools</code> èƒ½å¯è§†åŒ– <code>Riverpod/Provider</code> çš„çŠ¶æ€å˜åŒ–ï¼Œè°ƒè¯•æ•ˆç‡æå‡ 10 å€ã€‚</li>
</ul>
<h3 data-id="heading-14">è®¤çŸ¥ä¸åä½œæˆæœ¬é«˜ï¼Œå›¢é˜Ÿæ˜“å‡ºåˆ†æ­§</h3>
<p><code>async*</code>ã€<code>yield</code>ã€<code>Stream</code> å±äº <code>Dart</code> è¿›é˜¶è¯­æ³•ï¼Œè€ŒéåŸºç¡€è¯­æ³•ï¼š</p>
<ul>
<li>æ–°æ‰‹ç†è§£æˆæœ¬é«˜ï¼ˆæ¯”å¦‚åˆ†ä¸æ¸… <code>async</code> vs <code>async*</code>ã€<code>yield</code> vs <code>return</code>ï¼‰ï¼Œå®¹æ˜“å†™å‡ºé€»è¾‘é”™è¯¯çš„ä»£ç ï¼›</li>
<li>å›¢é˜Ÿåä½œæ—¶ï¼Œéƒ¨åˆ†å¼€å‘è€…ç”¨åŸç”Ÿ <code>Stream</code>ï¼Œéƒ¨åˆ†ç”¨ <code>Bloc/Riverpod</code>ï¼Œä»£ç é£æ ¼ä¸ç»Ÿä¸€ï¼Œç»´æŠ¤æˆæœ¬é£™å‡ï¼›</li>
<li>å¯¹æ¯”ä¸»æµæ–¹æ¡ˆï¼š<code>setState</code>ã€<code>Future</code>ã€<code>Provider</code> æ˜¯ <code>Flutter</code> å…¥é—¨å¿…å­¦å†…å®¹ï¼Œæ‰€æœ‰å¼€å‘è€…éƒ½èƒ½å¿«é€Ÿä¸Šæ‰‹ã€‚</li>
</ul>
<p>è¿™äº›ç¼ºç‚¹å†³å®šäº†å®ƒåªé€‚åˆ<code>ã€Œåº•å±‚æµå¼å¤„ç†ã€å¤§æ•°æ®é‡ã€å¯ä¸­æ–­åºåˆ—ã€</code>ç­‰å°ä¼—é«˜éœ€æ±‚åœºæ™¯ã€‚</p>
<h2 data-id="heading-15">å…¸å‹åœºæ™¯</h2>
<h3 data-id="heading-16">å®æ—¶ã€è¿ç»­çš„ã€ŒåŸç”Ÿæ•°æ®æµã€å¤„ç†ï¼ˆä¸å¯æ›¿ä»£ï¼‰</h3>
<p>è¿™æ˜¯æœ€æ ¸å¿ƒçš„é«˜éœ€æ±‚åœºæ™¯ â€”â€” å½“ä½ éœ€è¦å¤„ç†<code>æŒç»­äº§ç”Ÿã€æ— å›ºå®šç»ˆç‚¹</code>çš„å®æ—¶æ•°æ®æ—¶ï¼Œ<code>async*</code> + <code>Stream</code> æ˜¯å”¯ä¸€ç®€æ´ä¸”é«˜æ•ˆçš„é€‰æ‹©ã€‚</p>
<p>å…¸å‹ä¸šåŠ¡åœºæ™¯ï¼š</p>
<ul>
<li>è“ç‰™ / BLE / ä¸²å£é€šä¿¡ï¼ˆå®æ—¶æ¥æ”¶è®¾å¤‡æ•°æ®ï¼Œæ¯”å¦‚æ‰‹ç¯å¿ƒç‡ã€æ™ºèƒ½å®¶å±…ä¼ æ„Ÿå™¨ï¼‰ï¼›</li>
<li>ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆæ‰‹æœºåŠ é€Ÿåº¦è®¡ã€é™€èºä»ªã€GPS å®æ—¶å®šä½ï¼‰ï¼›</li>
<li>WebSocket/SSE æ¨é€ï¼ˆå®æ—¶èŠå¤©ã€è¡Œæƒ…åˆ·æ–°ã€æ¶ˆæ¯é€šçŸ¥ï¼‰ï¼›</li>
<li>å®æ—¶æ—¥å¿—ç›‘æ§ï¼ˆAPP è¿è¡Œæ—¥å¿—ã€æœåŠ¡å™¨æ—¥å¿—å®æ—¶å±•ç¤ºï¼‰ã€‚</li>
</ul>
<p>è¿™ç±»åœºæ™¯çš„æ ¸å¿ƒæ˜¯ã€Œæ•°æ®æŒç»­äº§ç”Ÿï¼Œéœ€è¦é€æ¬¡æ¶ˆè´¹ã€ï¼Œ<code>Future</code> åªèƒ½å¤„ç†å•æ¬¡å¼‚æ­¥æ“ä½œï¼ŒçŠ¶æ€ç®¡ç†åº“ï¼ˆBloc/Riverpodï¼‰æ˜¯ã€ŒçŠ¶æ€å°è£…å±‚ã€ï¼Œè€Œåº•å±‚çš„æ•°æ®æµç”Ÿæˆå¿…é¡»ä¾èµ– <code>Stream</code>ï¼›<code>async*</code> + <code>yield</code> åˆ™æ˜¯ç”Ÿæˆè¿™ç±»æµå¼æ•°æ®æœ€ç®€æ´çš„åŸç”Ÿæ–¹å¼ã€‚</p>
<p>ç¤ºä¾‹ï¼šè“ç‰™å®æ—¶æ•°æ®è¯»å–</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter_blue_plus/flutter_blue_plus.dart'</span>;

<span class="hljs-comment">// ç”¨ async* + yield å®æ—¶è¯»å–è“ç‰™è®¾å¤‡çš„ç‰¹å¾å€¼æ•°æ®</span>
Stream&lt;<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">int</span>&gt;&gt; readBleDataStream(BluetoothCharacteristic characteristic) <span class="hljs-keyword">async</span>* {
  <span class="hljs-comment">// æŒç»­ç›‘å¬è“ç‰™æ•°æ®ï¼Œæœ‰æ–°æ•°æ®å°± yield å‡ºå»</span>
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> value <span class="hljs-keyword">in</span> characteristic.onValueReceived) {
    <span class="hljs-keyword">yield</span> value; <span class="hljs-comment">// å®æ—¶äº§å‡ºè“ç‰™è®¾å¤‡å‘æ¥çš„å­—èŠ‚æ•°æ®</span>
  }
}

<span class="hljs-comment">// æ¶ˆè´¹ç«¯ä½¿ç”¨</span>
<span class="hljs-keyword">void</span> listenBleData(BluetoothCharacteristic characteristic) {
  readBleDataStream(characteristic).listen((data) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'å®æ—¶è“ç‰™æ•°æ®ï¼š<span class="hljs-subst">$data</span>'</span>); <span class="hljs-comment">// æ¯æ”¶åˆ°ä¸€æ¬¡æ•°æ®å°±å¤„ç†ä¸€æ¬¡</span>
  });
}
</code></pre>
<p>å…¶ä»–æ–¹æ¡ˆçš„ä¸è¶³ï¼š</p>
<ul>
<li>ç”¨ <code>Future</code>ï¼šæ— æ³•æŒç»­ç›‘å¬ï¼Œåªèƒ½å•æ¬¡è¯»å–ï¼Œå®Œå…¨ä¸é€‚ç”¨ï¼›</li>
<li>ç”¨ <code>Bloc</code>ï¼š<code>Bloc</code> çš„ <code>emit</code> æœ¬è´¨æ˜¯å°è£…äº† <code>Stream</code>ï¼Œä½†åº•å±‚ä»éœ€ç”¨ <code>async*</code> ç”Ÿæˆæ•°æ®æµï¼Œåªæ˜¯ä¸Šå±‚å°è£…ï¼Œè€Œéæ›¿ä»£ã€‚</li>
</ul>
<h3 data-id="heading-17">å¤§æ•°æ®é‡ã€Œæµå¼å¤„ç†ã€ï¼ˆå†…å­˜æ•æ„Ÿåœºæ™¯ï¼‰</h3>
<p>å½“å¤„ç†<code>è¶…å¤§æ–‡ä»¶ / è¶…å¤§æ•°æ®</code>é›†æ—¶ï¼Œ<code>async*</code> + <code>yield</code> æ˜¯é¿å… <code>OOM</code>ï¼ˆå†…å­˜æº¢å‡ºï¼‰çš„æœ€ä¼˜è§£ï¼Œå±äºã€Œå¿…é¡»ç”¨ã€çš„é«˜éœ€æ±‚åœºæ™¯ã€‚</p>
<p>å…¸å‹ä¸šåŠ¡åœºæ™¯ï¼š</p>
<ul>
<li>è¯»å– / è§£æè¶…å¤§æœ¬åœ°æ–‡ä»¶ï¼ˆæ¯”å¦‚ <code>100MB+</code> çš„ <code>CSV/JSON</code> æ—¥å¿—æ–‡ä»¶ã€<code>Excel</code> æŠ¥è¡¨ï¼‰ï¼›</li>
<li>å¤§æ‰¹é‡æ•°æ®å¯¼å‡ºï¼ˆæ¯”å¦‚å¯¼å‡º <code>10</code> ä¸‡æ¡è®¢å•æ•°æ®ä¸º <code>CSV</code>ï¼Œé€è¡Œç”Ÿæˆé¿å…å†…å­˜çˆ†ç‚¸ï¼‰ï¼›</li>
<li>æ‰¹é‡æ•°æ®åº“æŸ¥è¯¢ï¼ˆé€æ‰¹è¯»å–æ•°æ®ï¼Œè€Œéä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰ç»“æœï¼‰ã€‚</li>
</ul>
<p>è¿™ç±»åœºæ™¯çš„æ ¸å¿ƒæ˜¯ã€Œå†…å­˜å¯æ§ã€â€”â€” ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®ä¼šç›´æ¥å¯¼è‡´ <code>App</code> å´©æºƒï¼Œè€Œ <code>yield</code> èƒ½é€è¡Œ/é€å—äº§å‡ºæ•°æ®ï¼Œå†…å­˜å ç”¨å§‹ç»ˆä¿æŒåœ¨æä½æ°´å¹³ã€‚</p>
<p>å®æˆ˜ç¤ºä¾‹ï¼šè§£æè¶…å¤§ <code>CSV</code> æ–‡ä»¶</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'dart:io'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dart:convert'</span>;

<span class="hljs-comment">// ç”¨ async* + yield é€è¡Œè§£æè¶…å¤§ CSV æ–‡ä»¶ï¼Œé¿å… OOM</span>
Stream&lt;<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt;&gt; parseLargeCsvStream(<span class="hljs-built_in">String</span> filePath) <span class="hljs-keyword">async</span>* {
  <span class="hljs-keyword">final</span> file = File(filePath);
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">await</span> file.exists()) <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">'æ–‡ä»¶ä¸å­˜åœ¨'</span>);

  <span class="hljs-keyword">final</span> lines = file.openRead()
      .transform(utf8.decoder)
      .transform(<span class="hljs-keyword">const</span> LineSplitter());

  <span class="hljs-comment">// è¯»å–è¡¨å¤´</span>
  <span class="hljs-keyword">final</span> headerLine = <span class="hljs-keyword">await</span> lines.first;
  <span class="hljs-keyword">final</span> headers = headerLine.split(<span class="hljs-string">','</span>);

  <span class="hljs-comment">// é€è¡Œè§£ææ•°æ®å¹¶ yield</span>
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> line <span class="hljs-keyword">in</span> lines) {
    <span class="hljs-keyword">if</span> (line.isEmpty) <span class="hljs-keyword">continue</span>;
    <span class="hljs-keyword">final</span> values = line.split(<span class="hljs-string">','</span>);
    <span class="hljs-keyword">final</span> row = &lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt;{};
    <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; headers.length; i++) {
      row[headers[i]] = values[i];
    }
    <span class="hljs-keyword">yield</span> row; <span class="hljs-comment">// é€è¡Œäº§å‡ºè§£æåçš„è¡Œæ•°æ®ï¼Œå†…å­˜åªå­˜å½“å‰è¡Œ</span>
  }
}

<span class="hljs-comment">// æ¶ˆè´¹ç«¯ï¼šé€è¡Œå¤„ç†ï¼Œä¸å¡å†…å­˜</span>
<span class="hljs-keyword">void</span> processLargeCsv(<span class="hljs-built_in">String</span> filePath) <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> row <span class="hljs-keyword">in</span> parseLargeCsvStream(filePath)) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'å¤„ç†è¡Œæ•°æ®ï¼š<span class="hljs-subst">$row</span>'</span>); <span class="hljs-comment">// å¤„ç†å®Œå½“å‰è¡Œå°±é‡Šæ”¾å†…å­˜</span>
  }
}
</code></pre>
<h3 data-id="heading-18">è‡ªå®šä¹‰ã€Œå¯ä¸­æ–­çš„å¼‚æ­¥åºåˆ—ã€ç”Ÿæˆ</h3>
<p>å½“ä½ éœ€è¦ç”Ÿæˆæœ‰<code>å›ºå®šåºåˆ—ã€ä½†å¯èƒ½ä¸­é€”å–æ¶ˆ</code>çš„å¼‚æ­¥æ•°æ®æ—¶ï¼Œ<code>async*</code> + <code>Stream</code> æ˜¯æœ€çµæ´»çš„é€‰æ‹©ã€‚</p>
<p>å…¸å‹ä¸šåŠ¡åœºæ™¯ï¼š</p>
<ul>
<li>åˆ†é¡µåŠ è½½ï¼ˆå¸¦ã€Œå–æ¶ˆåŠ è½½ã€åŠŸèƒ½ï¼Œæ¯”å¦‚ç”¨æˆ·é€€å‡ºé¡µé¢æ—¶ç»ˆæ­¢åç»­è¯·æ±‚ï¼‰ï¼›</li>
<li>æ‰¹é‡ä»»åŠ¡å¤„ç†ï¼ˆæ¯”å¦‚æ‰¹é‡ä¸Šä¼  100 å¼ å›¾ç‰‡ï¼Œæ”¯æŒä¸­é€”æš‚åœ / å–æ¶ˆï¼‰ï¼›</li>
<li>ç²¾å‡†æ§åˆ¶çš„å€’è®¡æ—¶ / å®šæ—¶å™¨ï¼ˆæ”¯æŒä¸­é€”åœæ­¢ï¼Œä¸”ä¸æ®‹ç•™å®šæ—¶å™¨ï¼‰ã€‚</li>
</ul>
<p>è¿™ç±»åœºæ™¯çš„æ ¸å¿ƒæ˜¯ã€Œå¯ä¸­æ–­ã€â€”â€”<code>Stream</code> çš„è®¢é˜…å–æ¶ˆèƒ½ç›´æ¥ç»ˆæ­¢ <code>async*</code> å‡½æ•°çš„æ‰§è¡Œï¼Œè€Œå…¶ä»–æ–¹æ¡ˆï¼ˆå¦‚ <code>Future</code> å¾ªç¯ + å®šæ—¶å™¨ï¼‰ä¸­æ–­é€»è¾‘å¤æ‚ï¼Œæ˜“æ®‹ç•™èµ„æºã€‚</p>
<p>å®æˆ˜ç¤ºä¾‹ï¼šå¯ä¸­æ–­çš„æ‰¹é‡å›¾ç‰‡ä¸Šä¼ </p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç”¨ async* + yield ç”Ÿæˆæ‰¹é‡ä¸Šä¼ è¿›åº¦æµï¼Œæ”¯æŒä¸­é€”å–æ¶ˆ</span>
Stream&lt;<span class="hljs-built_in">double</span>&gt; uploadImagesStream(<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt; imagePaths) <span class="hljs-keyword">async</span>* {
  <span class="hljs-built_in">int</span> uploadedCount = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> path <span class="hljs-keyword">in</span> imagePaths) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿå•å¼ å›¾ç‰‡ä¸Šä¼ ï¼ˆè€—æ—¶æ“ä½œï¼‰</span>
    <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">1</span>));
    uploadedCount++;
    <span class="hljs-comment">// äº§å‡ºä¸Šä¼ è¿›åº¦ï¼ˆ0.0 ~ 1.0ï¼‰</span>
    <span class="hljs-keyword">yield</span> uploadedCount / imagePaths.length;
  }
}

<span class="hljs-comment">// æ¶ˆè´¹ç«¯ï¼šæ”¯æŒä¸­é€”å–æ¶ˆä¸Šä¼ </span>
<span class="hljs-keyword">void</span> startUpload(<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt; imagePaths) {
  <span class="hljs-keyword">late</span> StreamSubscription&lt;<span class="hljs-built_in">double</span>&gt; subscription;
  
  subscription = uploadImagesStream(imagePaths).listen((progress) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'ä¸Šä¼ è¿›åº¦ï¼š<span class="hljs-subst">${(progress * <span class="hljs-number">100</span>).toStringAsFixed(<span class="hljs-number">1</span>)}</span>%'</span>);
    <span class="hljs-comment">// æ¨¡æ‹Ÿï¼šè¿›åº¦åˆ°50%æ—¶å–æ¶ˆä¸Šä¼ </span>
    <span class="hljs-keyword">if</span> (progress &gt;= <span class="hljs-number">0.5</span>) {
      subscription.cancel(); <span class="hljs-comment">// å–æ¶ˆè®¢é˜…ï¼ŒuploadImagesStream ä¼šç«‹å³åœæ­¢å¾ªç¯</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">'ä¸Šä¼ å·²å–æ¶ˆ'</span>);
    }
  });
}
</code></pre>
<h3 data-id="heading-19">å°è£…ã€Œåº•å±‚æµå¼å·¥å…· / SDKã€</h3>
<p>å½“ä½ éœ€è¦å¼€å‘é€šç”¨å·¥å…·ç±»ã€SDK æˆ–åº•å±‚åº“æ—¶ï¼Œ<code>async*</code> + <code>Stream</code> æ˜¯å¯¹å¤–æš´éœ²æµå¼æ¥å£çš„æ ‡å‡†æ–¹å¼</p>
<ul>
<li>è‡ªå®šä¹‰ç½‘ç»œè¯·æ±‚åº“ï¼ˆå¯¹å¤–æš´éœ²ä¸‹è½½è¿›åº¦æµï¼‰ï¼›</li>
<li>æ—¥å¿—å·¥å…·ï¼ˆå¯¹å¤–æš´éœ²å®æ—¶æ—¥å¿—æµï¼‰ï¼›</li>
<li>æ•°æ®åŒæ­¥å·¥å…·ï¼ˆå¯¹å¤–æš´éœ²åŒæ­¥è¿›åº¦æµï¼‰ã€‚</li>
</ul>
<p>ä½œä¸ºåº•å±‚å·¥å…·ï¼Œéœ€è¦æä¾›ã€Œé€šç”¨ã€çµæ´»ã€ä½è€¦åˆã€çš„æ¥å£ï¼Œ<code>Stream</code> æ˜¯ <code>Dart/Flutter</code> ç”Ÿæ€çš„æ ‡å‡†æµå¼æ¥å£ï¼Œè€Œ <code>async*</code> æ˜¯ç”Ÿæˆè¿™ç±»æ¥å£çš„æœ€ç®€æ´æ–¹å¼ã€‚</p>
<p>å®æˆ˜ç¤ºä¾‹ï¼šè‡ªå®šä¹‰ä¸‹è½½è¿›åº¦å·¥å…·</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'dart:io'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:http/http.dart'</span> <span class="hljs-keyword">as</span> http;

<span class="hljs-comment">// å°è£…ä¸‹è½½å·¥å…·ï¼Œç”¨ async* + yield æš´éœ²ä¸‹è½½è¿›åº¦æµ</span>
Stream&lt;<span class="hljs-built_in">double</span>&gt; downloadFileStream(<span class="hljs-built_in">String</span> url, <span class="hljs-built_in">String</span> savePath) <span class="hljs-keyword">async</span>* {
  <span class="hljs-keyword">final</span> request = http.Request(<span class="hljs-string">'GET'</span>, <span class="hljs-built_in">Uri</span>.parse(url));
  <span class="hljs-keyword">final</span> response = <span class="hljs-keyword">await</span> http.Client().send(request);
  
  <span class="hljs-keyword">final</span> totalLength = response.contentLength ?? <span class="hljs-number">-1</span>;
  <span class="hljs-built_in">int</span> downloadedLength = <span class="hljs-number">0</span>;
  
  <span class="hljs-keyword">final</span> file = File(savePath);
  <span class="hljs-keyword">final</span> sink = file.openWrite();
  
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> chunk <span class="hljs-keyword">in</span> response.stream) {
    downloadedLength += chunk.length;
    sink.add(chunk);
    <span class="hljs-comment">// äº§å‡ºä¸‹è½½è¿›åº¦ï¼ˆ-1 è¡¨ç¤ºé•¿åº¦æœªçŸ¥ï¼‰</span>
    <span class="hljs-keyword">if</span> (totalLength &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">yield</span> downloadedLength / totalLength;
    }
  }
  
  <span class="hljs-keyword">await</span> sink.flush();
  <span class="hljs-keyword">await</span> sink.close();
  <span class="hljs-keyword">yield</span> <span class="hljs-number">1.0</span>; <span class="hljs-comment">// æœ€åäº§å‡º 100% è¿›åº¦</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VS Codeä½¿ç”¨ GitHub Copilot é«˜æ•ˆé‡æ„ä»£ç ï¼š10 å¤§å®æˆ˜æŠ€å·§ + è‡ªå®šä¹‰æŒ‡ä»¤å°è£…æŒ‡å—]]></title>    <link>https://juejin.cn/post/7586584105741697074</link>    <guid>https://juejin.cn/post/7586584105741697074</guid>    <pubDate>2025-12-23T04:33:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586584105741697074" data-draft-id="7585097023747588111" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VS Codeä½¿ç”¨ GitHub Copilot é«˜æ•ˆé‡æ„ä»£ç ï¼š10 å¤§å®æˆ˜æŠ€å·§ + è‡ªå®šä¹‰æŒ‡ä»¤å°è£…æŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-23T04:33:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VS Codeä½¿ç”¨ GitHub Copilot é«˜æ•ˆé‡æ„ä»£ç ï¼š10 å¤§å®æˆ˜æŠ€å·§ + è‡ªå®šä¹‰æŒ‡ä»¤å°è£…æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T04:33:02.000Z" title="Tue Dec 23 2025 04:33:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07cf582e89d14fe6971f48e366f5ea8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767069182&amp;x-signature=Zyx460v%2BKFG5YACNX7nmW%2BRV7O4%3D" alt="Copilot é‡æ„ç•Œé¢ï¼šInline Chat ä¸­æ­£åœ¨æå–å‡½æ•°" loading="lazy"/><br/>
<em>â–² Copilot æ”¯æŒä¸€é”®â€œé¢„è§ˆ â†’ åº”ç”¨â€é‡æ„å»ºè®®ï¼Œå®‰å…¨é«˜æ•ˆ</em></p>
<hr/>
<h2 data-id="heading-0">ğŸ” ä¸ºä»€ä¹ˆé‡æ„æ¯”å†™æ–°ä»£ç æ›´é‡è¦ï¼Ÿ</h2>
<p>æ ¹æ®ã€Šé‡æ„ï¼šæ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ã€‹ä½œè€… Martin Fowler çš„å®šä¹‰ï¼š</p>
<blockquote>
<p><strong>â€œé‡æ„æ˜¯åœ¨ä¸æ”¹å˜è½¯ä»¶å¯è§‚å¯Ÿè¡Œä¸ºçš„å‰æä¸‹ï¼Œè°ƒæ•´å…¶å†…éƒ¨ç»“æ„ï¼Œä»¥æå‡å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ä¸æ‰©å±•æ€§ã€‚â€</strong></p>
</blockquote>
<p>ä½†äººå·¥é‡æ„æˆæœ¬é«˜ã€æ˜“å‡ºé”™â€”â€”<br/>
âœ… <strong>Copilot çš„å‡ºç°è®©é‡æ„ä»â€œé«˜é£é™©æ“ä½œâ€å˜ä¸ºâ€œæ—¥å¸¸ä¹ æƒ¯â€</strong>ã€‚<br/>
æœ¬æ–‡å°†æ•™ä½ ï¼š</p>
<ol>
<li>æŒæ¡ <strong>10 ç§é«˜é¢‘é‡æ„åœºæ™¯</strong>çš„ Copilot å®æˆ˜æŠ€å·§ï¼›</li>
<li>å°†å®ƒä»¬å°è£…ä¸º <strong>è‡ªå®šä¹‰ <code>/</code> æŒ‡ä»¤</strong>ï¼ˆå¦‚ <code>/extract</code>, <code>/inline</code>ï¼‰ï¼Œåƒè°ƒç”¨å‡½æ•°ä¸€æ ·è°ƒç”¨é‡æ„åŠ¨ä½œï¼›</li>
<li>é¿å¼€å¸¸è§é™·é˜±ï¼Œç¡®ä¿<strong>é‡æ„é›¶å›å½’</strong>ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">ğŸ› ï¸ ä¸€ã€Copilot é‡æ„åŸºç¡€ï¼šä¸‰æ­¥èµ°å·¥ä½œæµ</h2>
<p>æ‰€æœ‰é‡æ„æ“ä½œï¼Œå»ºè®®éµå¾ªä»¥ä¸‹æ ‡å‡†åŒ–æµç¨‹ï¼š</p>





























<table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>å¿«æ·é”®ï¼ˆVS Codeï¼‰</th><th>ç›®çš„</th></tr></thead><tbody><tr><td><strong>1. ç†è§£</strong></td><td>é€‰ä¸­ä»£ç  â†’ <code>/explain</code></td><td><code>Ctrl+i</code> â†’ <code>/explain</code></td><td>æ˜ç¡®å½“å‰é€»è¾‘ï¼Œé¿å…è¯¯æ”¹</td></tr><tr><td><strong>2. é‡æ„</strong></td><td>è¾“å…¥ç²¾å‡†æŒ‡ä»¤ï¼ˆå¦‚ <code>/extract</code>ï¼‰</td><td><code>Ctrl+i</code> â†’ <code>/extract</code></td><td>ç”Ÿæˆé‡æ„å»ºè®®</td></tr><tr><td><strong>3. éªŒè¯</strong></td><td>å•å…ƒæµ‹è¯• + æ‰‹åŠ¨æŠ½æŸ¥</td><td>â€”</td><td>ç¡®ä¿è¡Œä¸ºä¸å˜</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ <strong>é»„é‡‘æ³•åˆ™</strong>ï¼šCopilot æ˜¯â€œå»ºè®®è€…â€ï¼Œä½ æ‰æ˜¯â€œå†³ç­–è€…â€ã€‚æ°¸è¿œæ‰§è¡Œ <strong>æœ¬åœ°æµ‹è¯•åå†æäº¤</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ“š äºŒã€10 å¤§ Copilot é‡æ„æŠ€å·§å®æˆ˜ + <code>/</code> æŒ‡ä»¤å°è£…</h2>
<p>æˆ‘ä»¬æŒ‰é‡æ„å¤æ‚åº¦æ’åºï¼Œæ¯é¡¹å«ï¼š<strong>åœºæ™¯æè¿° â†’ åŸå§‹ä»£ç  â†’ <code>/</code> æŒ‡ä»¤ â†’ é‡æ„ç»“æœ â†’ æ³¨æ„äº‹é¡¹</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-3">1ï¸âƒ£ <code>/explain</code>ï¼šç†è§£å³é‡æ„ç¬¬ä¸€æ­¥ âœ…</h3>
<p><strong>åœºæ™¯</strong>ï¼šæ¥æ‰‹é—ç•™ä»£ç ï¼Œä¸çŸ¥å…¶æ„ã€‚<br/>
<strong>æ“ä½œ</strong>ï¼šé€‰ä¸­ä»»æ„ä»£ç å— â†’ <code>Ctrl+i</code> â†’ è¾“å…¥ <code>/explain</code><br/>
<strong>æ•ˆæœ</strong>ï¼šCopilot è‡ªåŠ¨ç”Ÿæˆè‡ªç„¶è¯­è¨€è§£é‡Šï¼Œæ”¯æŒ Markdown è¡¨æ ¼/æµç¨‹å›¾å¼æè¿°ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é€‰ä¸­ä»¥ä¸‹å‡½æ•° â†’ /explain</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">x, y</span>) {
  <span class="hljs-keyword">return</span> x &gt; <span class="hljs-number">0</span> ? (y || <span class="hljs-number">1</span>) * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(x) : <span class="hljs-title class_">NaN</span>;
}
</code></pre>
<p>â¡ï¸ è¿”å›ï¼š</p>
<blockquote>
<p><em>â€œè‹¥ <code>x &gt; 0</code>ï¼Œåˆ™è¿”å› <code>y</code>ï¼ˆè‹¥æœªå®šä¹‰åˆ™é»˜è®¤ä¸º 1ï¼‰ä¹˜ä»¥ <code>âˆšx</code>ï¼›å¦åˆ™è¿”å› <code>NaN</code>ã€‚ç–‘ä¼¼å®ç°â€˜å¸¦é»˜è®¤æƒé‡çš„å¹³æ–¹æ ¹ç¼©æ”¾â€™ã€‚â€</em></p>
</blockquote>
<p>ğŸ“Œ <strong>æç¤º</strong>ï¼šè§£é‡Šè¿‡é•¿æ—¶ç‚¹ <strong>View in Chat</strong> å¯ä»¥å±•å¼€é˜…è¯»ã€‚</p>
<hr/>
<h3 data-id="heading-4">2ï¸âƒ£ <code>/extract</code>ï¼šæå–å‡½æ•°ï¼ˆæ¶ˆé™¤é‡å¤/æå‡å¯è¯»ï¼‰ğŸ”¥</h3>
<p><strong>åœºæ™¯</strong>ï¼šä¸€æ®µé€»è¾‘é‡å¤å‡ºç°ï¼Œæˆ–å‡½æ•°è¿‡é•¿ã€‚<br/>
<strong>æŒ‡ä»¤</strong>ï¼š<code>/extract function &lt;name&gt;</code> æˆ– <code>/extract</code>ï¼ˆè®© Copilot å‘½åï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŸå§‹ï¼šé‡å¤è®¡ç®—</span>
<span class="hljs-keyword">let</span> tax1 = price1 * <span class="hljs-number">0.08</span>;
<span class="hljs-keyword">let</span> tax2 = price2 * <span class="hljs-number">0.08</span>;
</code></pre>
<p>â†’ é€‰ä¸­ <code>price * 0.08</code> â†’ <code>Ctrl+i</code> â†’ <code>/extract calculateTax</code><br/>
â¡ï¸ è¾“å‡ºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateTax</span>(<span class="hljs-params">price</span>) {
  <span class="hljs-keyword">return</span> price * <span class="hljs-number">0.08</span>;
}
<span class="hljs-keyword">let</span> tax1 = <span class="hljs-title function_">calculateTax</span>(price1);
<span class="hljs-keyword">let</span> tax2 = <span class="hljs-title function_">calculateTax</span>(price2);
</code></pre>
<p>âœ… <strong>æ”¯æŒå˜ä½“</strong>ï¼š</p>
<ul>
<li><code>/extract const</code> â†’ æå–ä¸ºå¸¸é‡</li>
<li><code>/extract interface</code> â†’ ä»å¯¹è±¡å­—é¢é‡ç”Ÿæˆ TS interface</li>
</ul>
<hr/>
<h3 data-id="heading-5">3ï¸âƒ£ <code>/inline</code>ï¼šå†…è”å˜é‡/å‡½æ•°ï¼ˆç®€åŒ–è¿‡åº¦æŠ½è±¡ï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šå•æ¬¡ä½¿ç”¨çš„å˜é‡æˆ– trivial å‡½æ•°ï¼Œå¢åŠ é˜…è¯»è·³è½¬ã€‚<br/>
<strong>æŒ‡ä»¤</strong>ï¼šå…‰æ ‡ç½®äºå˜é‡/å‡½æ•° â†’ <code>Ctrl+i</code> â†’ <code>/inline</code></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> url = <span class="hljs-title function_">buildUrl</span>(host, path);
<span class="hljs-title function_">fetch</span>(url);
<span class="hljs-comment">// â†’ /inline url</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-title function_">buildUrl</span>(host, path));
</code></pre>
<blockquote>
<p>ğŸ’¡ é€‚ç”¨ï¼šä¸´æ—¶å˜é‡ã€ä»… return çš„ getterã€è°ƒè¯•ç”¨ä¸­é—´å˜é‡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">4ï¸âƒ£ <code>/switch</code>ï¼š<code>if-else</code> â†’ <code>switch</code>ï¼ˆæå‡åˆ†æ”¯å¯è¯»æ€§ï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šå¤šåˆ†æ”¯ç­‰å€¼åˆ¤æ–­ï¼ˆå°¤å…¶å­—ç¬¦ä¸²/enumï¼‰ã€‚<br/>
<strong>æŒ‡ä»¤</strong>ï¼šå…‰æ ‡ç½®äºå‡½æ•° â†’ <code>/switch [language]</code>ï¼ˆå¦‚ <code>/switch java21</code>ï¼‰</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸå§‹</span>
<span class="hljs-keyword">if</span> (animal.equals(<span class="hljs-string">"Dog"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">"Bark"</span>;
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (animal.equals(<span class="hljs-string">"Cat"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">"Meow"</span>;
<span class="hljs-comment">// â†’ /switch java21</span>
</code></pre>
<p>â¡ï¸ è¾“å‡ºï¼ˆå« null å®‰å…¨ + æ¨¡å¼åŒ¹é…ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span> (animal) {
  <span class="hljs-keyword">case</span> <span class="hljs-literal">null</span> -&gt; <span class="hljs-string">"Unknown"</span>;
  <span class="hljs-keyword">case</span> String a when a.equalsIgnoreCase(<span class="hljs-string">"Dog"</span>) -&gt; <span class="hljs-string">"Bark"</span>;
  <span class="hljs-keyword">case</span> String a when a.equalsIgnoreCase(<span class="hljs-string">"Cat"</span>) -&gt; <span class="hljs-string">"Meow"</span>;
  <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">"Unknown"</span>;
};
</code></pre>
<p>ğŸ“Œ æ”¯æŒ TS/JS çš„ <code>switch</code> + exhaustive checkï¼ŒPython çš„ <code>match-case</code>ã€‚</p>
<hr/>
<h3 data-id="heading-7">5ï¸âƒ£ <code>/optimize</code>ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆç®—æ³•/IO/å¾ªç¯ï¼‰âš¡</h3>
<p><strong>åœºæ™¯</strong>ï¼šä½æ•ˆå¾ªç¯ã€N+1 æŸ¥è¯¢ã€é‡å¤è®¡ç®—ã€‚<br/>
<strong>æŒ‡ä»¤</strong>ï¼šé€‰ä¸­ä»£ç  â†’ <code>/optimize</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸå§‹ï¼šè°ƒç”¨ N æ¬¡ wc</span>
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> $(find . -name <span class="hljs-string">"*.log"</span>); <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">wc</span> -l <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>
<span class="hljs-keyword">done</span>
â†’ /optimize
</code></pre>
<p>â¡ï¸ è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">find . -name <span class="hljs-string">"*.log"</span> -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">wc</span> -l {} +
<span class="hljs-comment"># âœ… æ‰¹é‡ä¼ å‚ï¼Œå‡å°‘ fork å¼€é”€</span>
</code></pre>
<p>âœ… å…¸å‹ä¼˜åŒ–æ–¹å‘ï¼š</p>
<ul>
<li>å¾ªç¯ â†’ å‘é‡åŒ– / å†…ç½®æ–¹æ³•ï¼ˆ<code>.map()</code> â†’ <code>.reduce()</code>ï¼‰</li>
<li>åŒæ­¥ â†’ å¼‚æ­¥æ‰¹å¤„ç†ï¼ˆå¦‚ <code>Promise.all</code>ï¼‰</li>
<li>ç£ç›˜ IO â†’ ç¼“å­˜ / æµå¼å¤„ç†</li>
</ul>
<hr/>
<h3 data-id="heading-8">6ï¸âƒ£ <code>/concise</code>ï¼šç²¾ç®€å†—ä½™ä»£ç ï¼ˆå˜é‡/ç»“æ„/æ³¨é‡Šï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šè¿‡åº¦å£°æ˜ã€ä¸­é—´å˜é‡ã€æ¨¡æ¿å¼ä»£ç ã€‚<br/>
<strong>æŒ‡ä»¤</strong>ï¼šé€‰ä¸­ â†’ <code>/concise</code> æˆ– <code>/shorten</code></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_area</span>(<span class="hljs-params">l, w</span>):
    area = l * w
    <span class="hljs-keyword">return</span> area  <span class="hljs-comment"># â†’ /concise</span>
<span class="hljs-comment"># â†’ ç›´æ¥ return l * w</span>
</code></pre>
<p>ğŸ“Œ å¸¸è§ä¼˜åŒ–ï¼š</p>
<ul>
<li>åˆ é™¤æ— ç”¨ <code>let temp = ...; return temp;</code></li>
<li>åˆå¹¶è¿ç»­ <code>.then()</code> â†’ <code>async/await</code></li>
<li>å†…è”ç®€å• ternary è¡¨è¾¾å¼</li>
</ul>
<hr/>
<h3 data-id="heading-9">7ï¸âƒ£ <code>/split</code>ï¼šæ‹†åˆ†å·¨å‹å‡½æ•°ï¼ˆå•ä¸€èŒè´£åŸåˆ™ï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šå‡½æ•° &gt; 50 è¡Œï¼Œæ··åˆâ€œæ•°æ®æ¸…æ´—+è®¡ç®—+è¾“å‡ºâ€ã€‚<br/>
<strong>æŒ‡ä»¤</strong>ï¼šå…‰æ ‡ç½®äºå‡½æ•° â†’ <code>/split into &lt;n&gt; functions</code></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_order</span>(<span class="hljs-params">data</span>):
  <span class="hljs-comment"># 1. validate</span>
  <span class="hljs-comment"># 2. calc tax</span>
  <span class="hljs-comment"># 3. persist</span>
  <span class="hljs-comment"># 4. notify</span>
â†’ /split into <span class="hljs-number">4</span> functions
</code></pre>
<p>â¡ï¸ è¾“å‡ºï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_order</span>(<span class="hljs-params">data</span>): ...
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_tax</span>(<span class="hljs-params">order</span>): ...
<span class="hljs-keyword">def</span> <span class="hljs-title function_">persist_order</span>(<span class="hljs-params">order</span>): ...
<span class="hljs-keyword">def</span> <span class="hljs-title function_">notify_user</span>(<span class="hljs-params">order</span>): ...
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_order</span>(<span class="hljs-params">data</span>):
  order = validate_order(data)
  order = calculate_tax(order)
  persist_order(order)
  notify_user(order)
</code></pre>
<p>âœ… é¢å¤–æŠ€å·§ï¼š<code>/split with pipeline</code> å¯ç”Ÿæˆå‡½æ•°å¼é“¾å¼è°ƒç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-10">8ï¸âƒ£ <code>/rename</code>ï¼šæ™ºèƒ½é‡å‘½åï¼ˆè¯­ä¹‰åŒ–ç¬¦å·ï¼‰</h3>
<p><strong>å¹³å°æ”¯æŒ</strong>ï¼šVS Code / Visual Studioï¼ˆéœ€è¯­è¨€æœåŠ¡æ”¯æŒï¼‰<br/>
<strong>æ“ä½œ</strong>ï¼šå…‰æ ‡ç½®äºå˜é‡/å‡½æ•° â†’ <strong><code>F2</code></strong> â†’ Copilot ä¸‹æ‹‰å»ºè®®<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab102525a64e4e79b6eddcc09e76ce75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767069182&amp;x-signature=Seuq7PAvy0IfnbHF6LiUSSBLVPk%3D" alt="Rename symbol dropdown" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(); <span class="hljs-comment">// â†’ F2 â†’ å»ºè®®ï¼š`currentDate`, `timestamp`, `now`</span>
</code></pre>
<p>ğŸ“Œ å‘½ååŸåˆ™ï¼šCopilot ä¼šç»“åˆä¸Šä¸‹æ–‡ï¼ˆå¦‚ <code>d.getMonth()</code> â†’ å€¾å‘ <code>currentDate</code> è€Œé <code>date</code>ï¼‰</p>
<hr/>
<h3 data-id="heading-11">9ï¸âƒ£ <code>/test</code>ï¼šä¸ºé‡æ„ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼ˆå®‰å…¨å…œåº•ï¼‰ğŸ›¡ï¸</h3>
<p><strong>åœºæ™¯</strong>ï¼šé‡æ„å‰å¿«é€Ÿè¡¥é½æµ‹è¯•è¦†ç›–ã€‚<br/>
<strong>æŒ‡ä»¤</strong>ï¼šå…‰æ ‡ç½®äºå‡½æ•° â†’ <code>/test [framework]</code>ï¼ˆå¦‚ <code>/test jest</code>ï¼‰</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> { <span class="hljs-keyword">return</span> a + b; }
â†’ /test vitest
</code></pre>
<p>â¡ï¸ è¾“å‡ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { describe, it, expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest'</span>;
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./math'</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">'add'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'adds positive numbers'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">5</span>);
  });
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'handles negatives'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">add</span>(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">0</span>);
  });
  <span class="hljs-title function_">it</span>(<span class="hljs-string">'handles zero'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">5</span>);
  });
});
</code></pre>
<p>âœ… <strong>å¼ºçƒˆå»ºè®®</strong>ï¼šé‡æ„å‰æ‰§è¡Œ <code>/test</code> â†’ è¿è¡Œæµ‹è¯• â†’ é‡æ„ â†’ å†è¿è¡Œ â†’ ç¡®è®¤ç»¿ç¯ã€‚</p>
<hr/>
<h3 data-id="heading-12">ğŸ”Ÿ <code>/docs</code>ï¼šè¡¥å……æ–‡æ¡£ä¸ç±»å‹ï¼ˆæå‡å¯ç»´æŠ¤æ€§ï¼‰</h3>
<p><strong>åœºæ™¯</strong>ï¼šæ— æ³¨é‡Šå‡½æ•° / JS é¡¹ç›®éœ€ TS ç±»å‹ã€‚<br/>
<strong>æŒ‡ä»¤</strong>ï¼šå…‰æ ‡ç½®äºå‡½æ•° â†’ <code>/docs</code> æˆ– <code>/types</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŸå§‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">resize</span>(<span class="hljs-params">img, w, h</span>) { ... }
â†’ /docs jsdoc + types
</code></pre>
<p>â¡ï¸ è¾“å‡ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * Resizes an image to the specified dimensions
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLImageElement</span>} <span class="hljs-variable">img</span> - The source image element
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">w</span> - Target width (pixels)
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">h</span> - Target height (pixels)
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">HTMLCanvasElement</span>} Resized image as canvas
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">resize</span>(<span class="hljs-params">img: HTMLImageElement, w: <span class="hljs-built_in">number</span>, h: <span class="hljs-built_in">number</span></span>): <span class="hljs-title class_">HTMLCanvasElement</span> {
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>âœ… æ”¯æŒï¼šJSDocã€TS ç±»å‹æ³¨è§£ã€Python docstringã€Java <code>@param</code>ã€‚</p>
<hr/>
<h2 data-id="heading-13">ğŸ§° ä¸‰ã€é«˜çº§æŠ€å·§ï¼šæ‰“é€ ä½ çš„ Copilot é‡æ„å¿«æ·æŒ‡ä»¤é›†</h2>
<p>é‡å¤è¾“å…¥é•¿æç¤ºï¼Ÿä¸å¦‚<strong>å°è£…ä¸º <code>/</code> æŒ‡ä»¤</strong>ï¼<br/>
è™½ Copilot ç›®å‰ä¸æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰ <code>/cmd</code>ï¼Œä½†å¯é€šè¿‡ <strong>é¢„è®¾æç¤ºæ¨¡æ¿</strong> å®ç°ç­‰æ•ˆæ•ˆæœã€‚</p>
<h3 data-id="heading-14">âœ… æ¨èä¸ªäººæŒ‡ä»¤é›†</h3>


















































<table><thead><tr><th>æŒ‡ä»¤åˆ«å</th><th>å®é™…è¾“å…¥å†…å®¹</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>/extract</code></td><td><code>extract selected code into a new function named:</code></td><td>å¿«é€Ÿæå–å‡½æ•°</td></tr><tr><td><code>/inline</code></td><td><code>inline this variable/function safely</code></td><td>å†…è”ç®€åŒ–</td></tr><tr><td><code>/switch</code></td><td><code>convert if-else chain to switch/match, use modern syntax for [lang]</code></td><td>åˆ†æ”¯ä¼˜åŒ–</td></tr><tr><td><code>/opt-loop</code></td><td><code>optimize this loop: avoid repeated work, use built-in methods</code></td><td>å¾ªç¯æé€Ÿ</td></tr><tr><td><code>/test-cover</code></td><td><code>generate unit tests for edge cases: null, empty, large input</code></td><td>æµ‹è¯•å…œåº•</td></tr><tr><td><code>/doc-ts</code></td><td><code>add JSDoc + TypeScript type annotations</code></td><td>ç±»å‹å¢å¼º</td></tr><tr><td><code>/rename-verb</code></td><td><code>suggest 3 verb-based names for this function</code></td><td>åŠ¨è¯åŒ–å‘½å</td></tr><tr><td><code>/split-pipe</code></td><td><code>split into pure functions and compose with pipeline</code></td><td>å‡½æ•°å¼é‡æ„</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>æŠ€å·§</strong>ï¼šåœ¨ VS Code ä¸­ç”¨ <strong>Snippets</strong>ï¼ˆ<code>File &gt; Preferences &gt; Configure User Snippets</code>ï¼‰åˆ›å»ºå¿«æ·è¾“å…¥ï¼š</p>
</blockquote>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"copilot-extract"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cext"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/extract $1"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¾“å…¥ <code>cext</code> + Tab â†’ è‡ªåŠ¨è¡¥å…¨ <code>/extract </code>ï¼Œå…‰æ ‡å®šä½åˆ° <code>$1</code> å¤„å¡«å‡½æ•°åã€‚</p>
<hr/>
<h2 data-id="heading-15">âš ï¸ å››ã€é¿å‘æŒ‡å—ï¼šCopilot é‡æ„çš„ 5 å¤§ç¦å¿Œ</h2>



































<table><thead><tr><th>é™·é˜±</th><th>é£é™©</th><th>è§„é¿æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>1. ç›²ç›®æ¥å—</strong></td><td>é€»è¾‘å˜æ›´ï¼ˆå¦‚è¾¹ç•Œæ¡ä»¶ä¸¢å¤±ï¼‰</td><td>âœ… é‡æ„å‰åè·‘æµ‹è¯•ï¼›âœ… ç”¨ <code>git diff</code> é€è¡Œå®¡æŸ¥</td></tr><tr><td><strong>2. å¿½ç•¥å‰¯ä½œç”¨</strong></td><td>æå–å‡½æ•°æ—¶æœªä¼ é€’ä¾èµ–ï¼ˆå¦‚ <code>this</code>ã€é—­åŒ…å˜é‡ï¼‰</td><td>âœ… ç”¨ <code>/explain</code> ç¡®è®¤ä¸Šä¸‹æ–‡ï¼›âœ… ä¼˜å…ˆæå–æ— å‰¯ä½œç”¨ï¼ˆpureï¼‰é€»è¾‘</td></tr><tr><td><strong>3. è¿‡åº¦é‡æ„</strong></td><td>ä¸ºâ€œç®€æ´â€ç‰ºç‰²å¯è¯»æ€§ï¼ˆå¦‚åµŒå¥— ternaryï¼‰</td><td>âœ… éµå¾ªå›¢é˜Ÿè§„èŒƒï¼›âœ… ä¼˜å…ˆâ€œæ¸…æ™°â€è€Œéâ€œç®€çŸ­â€</td></tr><tr><td><strong>4. ç±»å‹æ±¡æŸ“</strong></td><td>TS ä¸­ç”Ÿæˆ <code>any</code> / éšå¼ <code>any</code></td><td>âœ… å¼€å¯ <code>strict: true</code>ï¼›âœ… ç”¨ <code>/types</code> ä¸»åŠ¨åŠ æ³¨</td></tr><tr><td><strong>5. å¿˜è®°å…¼å®¹æ€§</strong></td><td>ç”¨æ–°è¯­æ³•ï¼ˆå¦‚ <code>?.</code>ã€<code>??</code>ï¼‰ç ´åæ—§ç¯å¢ƒ</td><td>âœ… æ˜ç¡®ç›®æ ‡ç¯å¢ƒï¼›âœ… ç”¨ <code>/compat es2020</code> æŒ‡å®šè¯­æ³•çº§åˆ«</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-16">ğŸŒŸ äº”ã€ç»“è¯­ï¼šé‡æ„å³æ—¥å¸¸ï¼ŒCopilot æ˜¯ä½ çš„â€œç»“å¯¹ç¨‹åºå‘˜â€</h2>
<blockquote>
<p>â€œ<strong>ä¼˜ç§€çš„ç¨‹åºå‘˜ä¸æ˜¯å†™æ›´å°‘çš„ bugï¼Œè€Œæ˜¯è®© bug æ›´éš¾è—èº«ã€‚</strong>â€<br/>
â€”â€” è€Œé‡æ„ï¼Œæ­£æ˜¯ç…§äº®ä»£ç è§’è½çš„é‚£æŸå…‰ã€‚</p>
</blockquote>
<p>GitHub Copilot å°† Martin Fowler çš„é‡æ„æ‰‹å†Œå˜æˆäº† <strong>å¯æ‰§è¡Œçš„å¯¹è¯</strong>ã€‚<br/>
å½“ä½ ç†Ÿç»ƒä½¿ç”¨ <code>/extract</code>ã€<code>/switch</code>ã€<code>/test</code> è¿™äº›â€œè¯­è¨€çº§æŒ‡ä»¤â€ï¼Œ<br/>
ä½ ä¾¿æ‹¥æœ‰äº†ä¸€ä¸ªä¸çŸ¥ç–²å€¦ã€ç²¾é€š Clean Code çš„ç»“å¯¹ç¨‹åºå‘˜ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºç¡€è®¾æ–½æ¨¡æ¿CLIå·¥å…·ï¼šBoilerplates]]></title>    <link>https://juejin.cn/post/7586617459487391796</link>    <guid>https://juejin.cn/post/7586617459487391796</guid>    <pubDate>2025-12-23T05:32:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586617459487391796" data-draft-id="7586587644823994402" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºç¡€è®¾æ–½æ¨¡æ¿CLIå·¥å…·ï¼šBoilerplates"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2025-12-23T05:32:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºç¡€è®¾æ–½æ¨¡æ¿CLIå·¥å…·ï¼šBoilerplates
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:32:45.000Z" title="Tue Dec 23 2025 05:32:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Boilerplates CLI</h2>
<p><strong>Boilerplates</strong> æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†åŸºç¡€è®¾æ–½æ¨¡æ¿ï¼ˆboilerplatesï¼‰çš„å¤æ‚é›†åˆï¼Œå¹¶é…å¤‡äº†ä¸€ä¸ªPython CLIå·¥å…·ã€‚å®ƒæ”¯æŒTerraformã€Dockerã€Ansibleã€Kubernetesç­‰å¤šç§æŠ€æœ¯ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿç”Ÿæˆã€å®šåˆ¶å’Œéƒ¨ç½²é…ç½®æ¨¡æ¿ã€‚</p>
<h3 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h3>
<ul>
<li><strong>å¤šæŠ€æœ¯æ¨¡æ¿æ”¯æŒ</strong>ï¼šæä¾›Docker Composeã€Terraformã€Ansibleã€Kubernetesã€Packerç­‰åŸºç¡€è®¾æ–½æ¨¡æ¿ã€‚</li>
<li><strong>äº¤äº’å¼å˜é‡æ”¶é›†</strong>ï¼šé€šè¿‡äº¤äº’å¼CLIæç¤ºï¼Œå¼•å¯¼ç”¨æˆ·ä¸ºæ¨¡æ¿å˜é‡è¾“å…¥å€¼ã€‚</li>
<li><strong>æ™ºèƒ½é»˜è®¤å€¼ç®¡ç†</strong>ï¼šæ”¯æŒä¿å­˜å¸¸ç”¨å˜é‡çš„é»˜è®¤å€¼ï¼Œå¹¶åœ¨å¤šä¸ªé¡¹ç›®ä¸­å¤ç”¨ã€‚</li>
<li><strong>Gitä»“åº“é›†æˆ</strong>ï¼šæ¨¡æ¿åº“åŸºäºGitç®¡ç†ï¼Œæ”¯æŒæ·»åŠ ã€æ›´æ–°å’Œç§»é™¤è‡ªå®šä¹‰æ¨¡æ¿ä»“åº“ã€‚</li>
<li><strong>Jinja2æ¨¡æ¿æ¸²æŸ“</strong>ï¼šä½¿ç”¨Jinja2å¼•æ“æ¸²æŸ“æ¨¡æ¿ï¼Œæ”¯æŒæ¡ä»¶è¯­å¥å’Œå˜é‡æ›¿æ¢ã€‚</li>
<li><strong>æ¨¡å—åŒ–æ¶æ„</strong>ï¼šé€šè¿‡æ¨¡å—ç³»ç»Ÿï¼ˆModuleï¼‰ç»„ç»‡ä¸åŒæŠ€æœ¯çš„æ¨¡æ¿å’Œå‘½ä»¤ã€‚</li>
<li><strong>é…ç½®æ–‡ä»¶ç®¡ç†</strong>ï¼šæä¾›é…ç½®ç®¡ç†åŠŸèƒ½ï¼Œå­˜å‚¨ç”¨æˆ·é»˜è®¤å€¼å’Œåå¥½è®¾ç½®ã€‚</li>
<li><strong>å®‰å…¨ä¸éªŒè¯</strong>ï¼šåŒ…å«æ¨¡æ¿è¯­æ³•éªŒè¯ã€å˜é‡ç±»å‹æ£€æŸ¥å’Œè·¯å¾„å®‰å…¨é˜²æŠ¤ã€‚</li>
</ul>
<h3 data-id="heading-2">å®‰è£…æŒ‡å—</h3>
<h4 data-id="heading-3">ä½¿ç”¨å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰</h4>
<p>é€šè¿‡è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬å®‰è£…Boilerplates CLIï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…æœ€æ–°ç‰ˆæœ¬</span>
curl -fsSL https://raw.githubusercontent.com/christianlempa/boilerplates/main/scripts/install.sh | bash

<span class="hljs-comment"># å®‰è£…ç‰¹å®šç‰ˆæœ¬</span>
curl -fsSL https://raw.githubusercontent.com/christianlempa/boilerplates/main/scripts/install.sh | bash -s -- --version v1.2.3
</code></pre>
<p>å®‰è£…è„šæœ¬ä½¿ç”¨<code>pipx</code>ä¸ºCLIå·¥å…·åˆ›å»ºä¸€ä¸ªéš”ç¦»ç¯å¢ƒã€‚å®‰è£…å®Œæˆåï¼Œç»ˆç«¯ä¸­å³å¯ä½¿ç”¨<code>boilerplates</code>å‘½ä»¤ã€‚</p>
<h4 data-id="heading-4">ä¾èµ–è¦æ±‚</h4>
<ul>
<li>Python 3+</li>
<li>Gitï¼ˆç”¨äºæ¨¡æ¿åº“ç®¡ç†ï¼‰</li>
<li>pipxï¼ˆç”¨äºéš”ç¦»å®‰è£…ï¼Œå®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼‰</li>
</ul>
<h3 data-id="heading-5">ä½¿ç”¨è¯´æ˜</h3>
<h4 data-id="heading-6">åŸºç¡€å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯</span>
boilerplates --<span class="hljs-built_in">help</span>

<span class="hljs-comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>
boilerplates --version

<span class="hljs-comment"># æ›´æ–°æ¨¡æ¿åº“</span>
boilerplates repo update

<span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰å·²é…ç½®çš„åº“</span>
boilerplates repo list
</code></pre>
<h4 data-id="heading-7">æ¨¡æ¿æ“ä½œ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„Docker Composeæ¨¡æ¿</span>
boilerplates compose list

<span class="hljs-comment"># æŸ¥çœ‹ç‰¹å®šæ¨¡æ¿çš„è¯¦ç»†ä¿¡æ¯</span>
boilerplates compose show nginx

<span class="hljs-comment"># ç”Ÿæˆæ¨¡æ¿ï¼ˆäº¤äº’å¼æ¨¡å¼ï¼‰</span>
boilerplates compose generate authentik

<span class="hljs-comment"># ç”Ÿæˆæ¨¡æ¿åˆ°è‡ªå®šä¹‰è¾“å‡ºç›®å½•</span>
boilerplates compose generate nginx my-nginx-server

<span class="hljs-comment"># éäº¤äº’å¼æ¨¡å¼ï¼Œç›´æ¥æŒ‡å®šå˜é‡å€¼</span>
boilerplates compose generate traefik my-proxy \
  --var service_name=traefik \
  --var traefik_enabled=<span class="hljs-literal">true</span> \
  --var traefik_host=proxy.example.com \
  --no-interactive
</code></pre>
<h4 data-id="heading-8">ç®¡ç†é»˜è®¤å€¼</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½®å˜é‡çš„é»˜è®¤å€¼</span>
boilerplates compose defaults <span class="hljs-built_in">set</span> container_timezone <span class="hljs-string">"America/New_York"</span>
boilerplates compose defaults <span class="hljs-built_in">set</span> restart_policy <span class="hljs-string">"unless-stopped"</span>
</code></pre>
<h4 data-id="heading-9">æ¨¡æ¿åº“ç®¡ç†</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ è‡ªå®šä¹‰æ¨¡æ¿åº“</span>
boilerplates repo add my-templates https://github.com/user/templates \
  --directory library \
  --branch main

<span class="hljs-comment"># ç§»é™¤æ¨¡æ¿åº“</span>
boilerplates repo remove my-templates
</code></pre>
<h3 data-id="heading-10">æ ¸å¿ƒä»£ç </h3>
<h4 data-id="heading-11">CLIä¸»å…¥å£ (<code>cli/__main__.py</code>)</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
Main entry point for the Boilerplates CLI application.
This file serves as the primary executable when running the CLI.
"""</span>
<span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> annotations

<span class="hljs-keyword">import</span> importlib
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> pkgutil
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span>
<span class="hljs-keyword">from</span> typer <span class="hljs-keyword">import</span> Typer, Context, Option
<span class="hljs-keyword">from</span> rich.console <span class="hljs-keyword">import</span> Console
<span class="hljs-keyword">import</span> cli.modules
<span class="hljs-keyword">from</span> cli.core.registry <span class="hljs-keyword">import</span> registry
<span class="hljs-keyword">from</span> cli.core <span class="hljs-keyword">import</span> repo
<span class="hljs-comment"># Using standard Python exceptions instead of custom ones</span>

<span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> Placeholder version - will be overwritten by release script (.github/workflows/release.yaml)</span>
__version__ = <span class="hljs-string">"0.0.0"</span>

app = Typer(
  <span class="hljs-built_in">help</span>=<span class="hljs-string">"CLI tool for managing infrastructure boilerplates.\n\n[dim]Easily generate, customize, and deploy templates for Docker Compose, Terraform, Kubernetes, and more.\n\n [white]Made with ğŸ’œ by [bold]Christian Lempa[/bold]"</span>,
  add_completion=<span class="hljs-literal">True</span>,
  rich_markup_mode=<span class="hljs-string">"rich"</span>,
)
console = Console()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_logging</span>(<span class="hljs-params">log_level: <span class="hljs-built_in">str</span> = <span class="hljs-string">"WARNING"</span></span>) -&gt; <span class="hljs-literal">None</span>:
  <span class="hljs-string">"""Configure the logging system with the specified log level.
  
  Args:
      log_level: The logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
  
  Raises:
      ValueError: If the log level is invalid
      RuntimeError: If logging configuration fails
  """</span>
  numeric_level = <span class="hljs-built_in">getattr</span>(logging, log_level.upper(), <span class="hljs-literal">None</span>)
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(numeric_level, <span class="hljs-built_in">int</span>):
    <span class="hljs-keyword">raise</span> ValueError(
      <span class="hljs-string">f"Invalid log level '<span class="hljs-subst">{log_level}</span>'. Valid levels: DEBUG, INFO, WARNING, ERROR, CRITICAL"</span>
    )
  
  <span class="hljs-keyword">try</span>:
    logging.basicConfig(
      level=numeric_level,
      <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span>,
      datefmt=<span class="hljs-string">'%Y-%m-%d %H:%M:%S'</span>
    )

    logger = logging.getLogger(__name__)
    logger.setLevel(numeric_level)
  <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">f"Failed to configure logging: <span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-meta">@app.callback(<span class="hljs-params">invoke_without_command=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">
  version: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">bool</span>] = Option(<span class="hljs-params">
    <span class="hljs-literal">None</span>,
    <span class="hljs-string">"--version"</span>,
    <span class="hljs-string">"-v"</span>,
    <span class="hljs-built_in">help</span>=<span class="hljs-string">"Show the application version and exit"</span>,
  </span>),
  log_level: <span class="hljs-built_in">str</span> = Option(<span class="hljs-params">
    <span class="hljs-string">"WARNING"</span>,
    <span class="hljs-string">"--log-level"</span>,
    <span class="hljs-string">"-l"</span>,
    <span class="hljs-built_in">help</span>=<span class="hljs-string">"Set the logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)"</span>,
  </span>),
  ctx: Context = <span class="hljs-literal">None</span>,
</span>) -&gt; <span class="hljs-literal">None</span>:
  <span class="hljs-string">"""Main entry point for the boilerplates CLI.
  
  Args:
      version: Show version information
      log_level: Logging level for the application
      ctx: Typer context object
  """</span>
  <span class="hljs-keyword">if</span> version:
    console.<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Boilerplates CLI [bold]v<span class="hljs-subst">{__version__}</span>[/bold]"</span>)
    <span class="hljs-keyword">raise</span> SystemExit(<span class="hljs-number">0</span>)
  
  <span class="hljs-keyword">try</span>:
    setup_logging(log_level)
  <span class="hljs-keyword">except</span> (ValueError, RuntimeError) <span class="hljs-keyword">as</span> e:
    console_err.<span class="hljs-built_in">print</span>(<span class="hljs-string">f"[red]Failed to set up logging: <span class="hljs-subst">{e}</span>[/red]"</span>)
    sys.exit(<span class="hljs-number">1</span>)
  
  <span class="hljs-comment"># Discover and register modules</span>
  _discover_modules()
  
  <span class="hljs-comment"># Register repository management commands</span>
  app.add_typer(repo.app, name=<span class="hljs-string">"repo"</span>)
  
  <span class="hljs-keyword">if</span> ctx.invoked_subcommand <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
    console.<span class="hljs-built_in">print</span>(app.info.<span class="hljs-built_in">help</span>)
    <span class="hljs-keyword">raise</span> SystemExit(<span class="hljs-number">0</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">_discover_modules</span>() -&gt; <span class="hljs-literal">None</span>:
  <span class="hljs-string">"""Dynamically discover and register all modules in the modules package."""</span>
  <span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">for</span> _, name, _ <span class="hljs-keyword">in</span> pkgutil.iter_modules(cli.modules.__path__):
      module_path = <span class="hljs-string">f"cli.modules.<span class="hljs-subst">{name}</span>"</span>
      <span class="hljs-keyword">try</span>:
        importlib.import_module(module_path)
        logger.debug(<span class="hljs-string">f"Successfully imported module: <span class="hljs-subst">{name}</span>"</span>)
      <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.warning(<span class="hljs-string">f"Failed to import module '<span class="hljs-subst">{name}</span>': <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">continue</span>
    logger.info(<span class="hljs-string">f"Module discovery completed. Total modules: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(<span class="hljs-built_in">list</span>(registry.iter_module_classes()))}</span>"</span>)
  <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    logger.error(<span class="hljs-string">f"Module discovery failed: <span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">raise</span>

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
  app()
</code></pre>
<h4 data-id="heading-12">å˜é‡é›†åˆç®¡ç† (<code>cli/core/collection.py</code>)</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> __future__ <span class="hljs-keyword">import</span> annotations

<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Any</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">List</span>, <span class="hljs-type">Optional</span>, <span class="hljs-type">Set</span>, <span class="hljs-type">Union</span>
<span class="hljs-keyword">import</span> logging

<span class="hljs-keyword">from</span> .variable <span class="hljs-keyword">import</span> Variable
<span class="hljs-keyword">from</span> .section <span class="hljs-keyword">import</span> VariableSection

logger = logging.getLogger(__name__)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">VariableCollection</span>:
  <span class="hljs-string">"""Manages variables grouped by sections and builds Jinja context."""</span>

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, spec: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""Initialize VariableCollection from a specification dictionary.
    
    Args:
        spec: Dictionary containing the complete variable specification structure
              Expected format (as used in compose.py):
              {
                "section_key": {
                  "title": "Section Title",
                  "prompt": "Optional prompt text",
                  "toggle": "optional_toggle_var_name", 
                  "description": "Optional description",
                  "vars": {
                    "var_name": {
                      "description": "Variable description",
                      "type": "str",
                      "default": "default_value",
                      ...
                    }
                  }
                }
              }
    """</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(spec, <span class="hljs-built_in">dict</span>):
      <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"Spec must be a dictionary"</span>)
    
    self._sections: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, VariableSection] = {}
    <span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> The _variable_map provides a flat, O(1) lookup for any variable by its name,</span>
    <span class="hljs-comment"># avoiding the need to iterate through sections. It stores references to the same</span>
    <span class="hljs-comment"># Variable objects contained in the _set structure.</span>
    self._variable_map: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, Variable] = {}
    self._initialize_sections(spec)
    <span class="hljs-comment"># Validate dependencies after all sections are loaded</span>
    self._validate_dependencies()

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">_initialize_sections</span>(<span class="hljs-params">self, spec: <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""Initialize sections from the spec."""</span>
    <span class="hljs-keyword">for</span> section_key, section_data <span class="hljs-keyword">in</span> spec.items():
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(section_data, <span class="hljs-built_in">dict</span>):
        <span class="hljs-keyword">continue</span>
      
      <span class="hljs-comment"># Create VariableSection</span>
      section_dict = {
        <span class="hljs-string">"key"</span>: section_key,
        <span class="hljs-string">"title"</span>: section_data.get(<span class="hljs-string">"title"</span>, section_key.title()),
        <span class="hljs-string">"description"</span>: section_data.get(<span class="hljs-string">"description"</span>),
        <span class="hljs-string">"toggle"</span>: section_data.get(<span class="hljs-string">"toggle"</span>),
        <span class="hljs-string">"required"</span>: section_data.get(<span class="hljs-string">"required"</span>, section_key == <span class="hljs-string">"general"</span>),
      }
      
      <span class="hljs-comment"># Handle dependencies</span>
      <span class="hljs-keyword">if</span> needs := section_data.get(<span class="hljs-string">"needs"</span>):
        section_dict[<span class="hljs-string">"needs"</span>] = needs
      
      section = VariableSection(section_dict)
      
      <span class="hljs-comment"># Add variables to section</span>
      <span class="hljs-keyword">if</span> <span class="hljs-string">"vars"</span> <span class="hljs-keyword">in</span> section_data <span class="hljs-keyword">and</span> <span class="hljs-built_in">isinstance</span>(section_data[<span class="hljs-string">"vars"</span>], <span class="hljs-built_in">dict</span>):
        <span class="hljs-keyword">for</span> var_name, var_data <span class="hljs-keyword">in</span> section_data[<span class="hljs-string">"vars"</span>].items():
          <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(var_data, <span class="hljs-built_in">dict</span>):
            <span class="hljs-keyword">continue</span>
          
          <span class="hljs-comment"># Create Variable</span>
          var_dict = var_data.copy()
          var_dict[<span class="hljs-string">"name"</span>] = var_name
          var_dict[<span class="hljs-string">"origin"</span>] = <span class="hljs-string">"template"</span>
          
          variable = Variable(var_dict)
          
          <span class="hljs-comment"># Store in section and flat map</span>
          section.variables[var_name] = variable
          self._variable_map[var_name] = variable
      
      self._sections[section_key] = section
  
  <span class="hljs-keyword">def</span> <span class="hljs-title function_">_validate_dependencies</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-string">"""Validate that all section dependencies exist."""</span>
    <span class="hljs-keyword">for</span> section_key, section <span class="hljs-keyword">in</span> self._sections.items():
      <span class="hljs-keyword">for</span> dep <span class="hljs-keyword">in</span> section.needs:
        <span class="hljs-keyword">if</span> dep <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self._sections:
          logger.warning(
            <span class="hljs-string">f"Section '<span class="hljs-subst">{section_key}</span>' depends on non-existent section '<span class="hljs-subst">{dep}</span>'"</span>
          )

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_section</span>(<span class="hljs-params">self, section_key: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">Optional</span>[VariableSection]:
    <span class="hljs-string">"""Get a section by its key."""</span>
    <span class="hljs-keyword">return</span> self._sections.get(section_key)

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_sections</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, VariableSection]:
    <span class="hljs-string">"""Get all sections."""</span>
    <span class="hljs-keyword">return</span> self._sections.copy()

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_section_satisfied</span>(<span class="hljs-params">self, section_key: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-string">"""Check if a section's dependencies are satisfied."""</span>
    section = self._sections.get(section_key)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> section:
      <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-comment"># General section is always satisfied</span>
    <span class="hljs-keyword">if</span> section_key == <span class="hljs-string">"general"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    
    <span class="hljs-comment"># Check all dependencies</span>
    <span class="hljs-keyword">for</span> dep <span class="hljs-keyword">in</span> section.needs:
      dep_section = self._sections.get(dep)
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> dep_section <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> dep_section.is_enabled():
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

  <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_jinja_context</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
    <span class="hljs-string">"""Build Jinja2 template context from all variables.
    
    Returns:
        Dictionary mapping variable names to their values for
</span></code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®‰è£… docker.ioï¼ˆä¸èµ°å¤–ç½‘ Docker åŸŸåï¼‰]]></title>    <link>https://juejin.cn/post/7586610067567706112</link>    <guid>https://juejin.cn/post/7586610067567706112</guid>    <pubDate>2025-12-23T03:46:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586610067567706112" data-draft-id="7585039706611449871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®‰è£… docker.ioï¼ˆä¸èµ°å¤–ç½‘ Docker åŸŸåï¼‰"/> <meta itemprop="keywords" content="åç«¯,Docker"/> <meta itemprop="datePublished" content="2025-12-23T03:46:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ°AJie"/> <meta itemprop="url" content="https://juejin.cn/user/3871838955636704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®‰è£… docker.ioï¼ˆä¸èµ°å¤–ç½‘ Docker åŸŸåï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3871838955636704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ°AJie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:46:46.000Z" title="Tue Dec 23 2025 03:46:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1ï¸âƒ£ å®‰è£… docker.ioï¼ˆä¸èµ°å¤–ç½‘ Docker åŸŸåï¼‰</h3>
<pre><code class="hljs language-lua" lang="lua">sudo apt update
sudo apt install -y docker.<span class="hljs-built_in">io</span>
</code></pre>
<blockquote>
<p>è¿™ä¸€æ­¥ç”¨çš„æ˜¯ Ubuntu å®˜æ–¹ä»“åº“<br/>
<strong>ä¸ä¼šè®¿é—® download.docker.com</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-1">2ï¸âƒ£ å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯</h3>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl start docker
sudo systemctl <span class="hljs-built_in">enable</span> docker
</code></pre>
<hr/>
<h3 data-id="heading-2">3ï¸âƒ£ éªŒè¯ Docker æ˜¯å¦å®‰è£…æˆåŠŸ</h3>
<pre><code class="hljs language-css" lang="css">docker <span class="hljs-attr">--version</span>
</code></pre>
<p>åªè¦èƒ½çœ‹åˆ°ç‰ˆæœ¬å·ï¼Œè¯´æ˜ <strong>Docker å·²ç» OK</strong>ã€‚</p>
<p>ğŸ‘‰ <strong>æŠŠ Docker çš„æ•°æ®ç›®å½•è¿ç§»åˆ°ä½ æŒ‡å®šçš„ä½ç½®</strong></p>
<h2 data-id="heading-3">ä¸€ã€ç¡®è®¤ä½ è¦ç”¨çš„ç£ç›˜ç›®å½•ï¼ˆå‡è®¾ç”¨ <code>/data</code>ï¼‰</h2>
<p>å¦‚æœä½ å·²ç»æœ‰ <code>/data</code>ï¼Œå…ˆçœ‹ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">df</span> -h
<span class="hljs-built_in">ls</span> /data
</code></pre>
<p>å¦‚æœæ²¡æœ‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">mkdir</span> -p /data
</code></pre>
<hr/>
<h2 data-id="heading-4">äºŒã€è¿ç§» Docker æ•°æ®ç›®å½•åˆ° <code>/data/docker</code>ï¼ˆé‡ç‚¹ï¼‰</h2>
<blockquote>
<p>âš ï¸ è¿™ä¸€æ­¥ä¸€å®šè¦åœ¨ <strong>è¿˜æ²¡è·‘ä»»ä½•å®¹å™¨</strong> å‰åš<br/>
ä½ ç°åœ¨æ­£å¥½æ˜¯æœ€ä½³æ—¶æœº</p>
</blockquote>
<h3 data-id="heading-5">1ï¸âƒ£ åŒæ—¶åœæ­¢ docker.service å’Œ docker.socket</h3>
<pre><code class="hljs language-arduino" lang="arduino">sudo systemctl stop docker
sudo systemctl stop docker.socket
</code></pre>
<hr/>
<h3 data-id="heading-6">2ï¸âƒ£ ç¡®è®¤ Docker å·²å®Œå…¨åœæ­¢ï¼ˆå¯é€‰éªŒè¯ï¼‰</h3>
<pre><code class="hljs language-perl" lang="perl">ps -ef | <span class="hljs-keyword">grep</span> dockerd | <span class="hljs-keyword">grep</span> -v <span class="hljs-keyword">grep</span>
</code></pre>
<p>å¦‚æœ<strong>æ²¡æœ‰ä»»ä½•è¾“å‡º</strong>ï¼Œè¯´æ˜ Docker å·²å½»åº•åœå¹²å‡€ âœ…</p>
<h3 data-id="heading-7">2ï¸âƒ£ åˆ›å»ºæ–°ç›®å½•</h3>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">mkdir</span> -p /data/docker
</code></pre>
<hr/>
<h3 data-id="heading-8">3ï¸âƒ£ é…ç½® Docker ä½¿ç”¨æ–°ç›®å½•</h3>
<pre><code class="hljs language-bash" lang="bash">sudo nano /etc/docker/daemon.json
</code></pre>
<p>å†™å…¥ä»¥ä¸‹å†…å®¹ï¼ˆ<strong>å®Œæ•´è¦†ç›–</strong>ï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"data-root"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/data/docker"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä¿å­˜é€€å‡ºã€‚</p>
<hr/>
<h3 data-id="heading-9">4ï¸âƒ£ å¯åŠ¨ Docker</h3>
<pre><code class="hljs language-sql" lang="sql">sudo systemctl <span class="hljs-keyword">start</span> docker
</code></pre>
<hr/>
<h3 data-id="heading-10">5ï¸âƒ£ éªŒè¯æ˜¯å¦ç”Ÿæ•ˆï¼ˆéå¸¸é‡è¦ï¼‰</h3>
<pre><code class="hljs language-perl" lang="perl">docker info | <span class="hljs-keyword">grep</span> <span class="hljs-string">"Docker Root Dir"</span>
</code></pre>
<p>ä½ åº”è¯¥çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Docker</span> <span class="hljs-title class_">Root</span> <span class="hljs-title class_">Dir</span>: <span class="hljs-regexp">/data/</span>docker
</code></pre>
<p>çœ‹åˆ°è¿™è¡Œï¼Œè¯´æ˜<strong>å®‰è£…ä½ç½®è°ƒæ•´æˆåŠŸ</strong> âœ…</p>
<hr/>
<h3 data-id="heading-11">1ï¸âƒ£ æŠŠå½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„</h3>
<pre><code class="hljs language-bash" lang="bash">sudo usermod -aG docker <span class="hljs-variable">$USER</span>
</code></pre>
<hr/>
<h3 data-id="heading-12">2ï¸âƒ£ <strong>é€€å‡º SSH ä¼šè¯ï¼Œç„¶åé‡æ–°ç™»å½•</strong></h3>
<p>æˆ–è€…ç›´æ¥æ‰§è¡Œï¼š</p>
<pre><code class="hljs">newgrp docker
</code></pre>
<blockquote>
<p>è®©å½“å‰ç»ˆç«¯ session ç«‹å³ç”Ÿæ•ˆ</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">3ï¸âƒ£ å†æ¬¡éªŒè¯ Docker Root Dir</h3>
<pre><code class="hljs language-perl" lang="perl">docker info | <span class="hljs-keyword">grep</span> <span class="hljs-string">"Docker Root Dir"</span>
</code></pre>
<p>æ­£ç¡®è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Docker</span> <span class="hljs-title class_">Root</span> <span class="hljs-title class_">Dir</span>: <span class="hljs-regexp">/data/</span>docker
</code></pre>
<hr/>
<h3 data-id="heading-14">4ï¸âƒ£ åç»­æ“ä½œå°±å¯ä»¥ä¸ç”¨ sudo</h3>
<ul>
<li>æ‹‰é•œåƒ</li>
<li>å¯åŠ¨ MySQL å®¹å™¨</li>
<li>ç®¡ç†å®¹å™¨</li>
</ul>
<p>éƒ½å¯ä»¥ç›´æ¥ç”¨ <code>docker</code> å‘½ä»¤ï¼Œä¸ç”¨åŠ  sudoã€‚</p>
<hr/>
<h2 data-id="heading-15">ä¸€ã€æŸ¥çœ‹ Docker æœåŠ¡çŠ¶æ€ï¼ˆsystemd ç®¡ç†ï¼‰</h2>
<pre><code class="hljs language-lua" lang="lua">sudo systemctl <span class="hljs-built_in">status</span> docker
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">â—</span> <span class="hljs-string">docker.service</span> <span class="hljs-bullet">-</span> <span class="hljs-string">Docker</span> <span class="hljs-string">Application</span> <span class="hljs-string">Container</span> <span class="hljs-string">Engine</span>
     <span class="hljs-attr">Loaded:</span> <span class="hljs-string">loaded</span> <span class="hljs-string">(/lib/systemd/system/docker.service;</span> <span class="hljs-string">enabled;</span> <span class="hljs-attr">vendor preset:</span> <span class="hljs-string">enabled)</span>
     <span class="hljs-attr">Active:</span> <span class="hljs-string">active</span> <span class="hljs-string">(running)</span> <span class="hljs-string">since</span> <span class="hljs-string">Fri</span> <span class="hljs-number">2025-12-19 10:45:00 </span><span class="hljs-string">CST;</span> <span class="hljs-string">5min</span> <span class="hljs-string">ago</span>
</code></pre>
<ul>
<li><code>Active: active (running)</code> â†’ Docker æ­£åœ¨è¿è¡Œ âœ…</li>
<li><code>Active: inactive (dead)</code> â†’ Docker æ²¡æœ‰è¿è¡Œ âŒ</li>
</ul>
<hr/>
<h3 data-id="heading-16">ç›¸å…³å‘½ä»¤</h3>
<ul>
<li>å¯åŠ¨ Dockerï¼š</li>
</ul>
<pre><code class="hljs language-sql" lang="sql">sudo systemctl <span class="hljs-keyword">start</span> docker
</code></pre>
<ul>
<li>åœæ­¢ Dockerï¼š</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino">sudo systemctl stop docker
</code></pre>
<ul>
<li>é‡å¯ Dockerï¼š</li>
</ul>
<pre><code class="hljs">sudo systemctl restart docker
</code></pre>
<ul>
<li>è®¾ç½®å¼€æœºè‡ªå¯ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl <span class="hljs-built_in">enable</span> docker
</code></pre>
<hr/>
<h2 data-id="heading-17">äºŒã€æŸ¥çœ‹ Docker å®¹å™¨è¿è¡ŒçŠ¶æ€</h2>
<h3 data-id="heading-18">1ï¸âƒ£ æŸ¥çœ‹æ‰€æœ‰è¿è¡Œä¸­çš„å®¹å™¨</h3>
<pre><code class="hljs">docker ps
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">CONTAINER ID   IMAGE       COMMAND                  STATUS          PORTS                    NAMES
a1b2c3d4e5f6   mysql:8.0  <span class="hljs-string">"docker-entrypoint.sâ€¦"</span>   Up 2 minutes    0.0.0.0:3306-&gt;3306/tcp   mysql8
</code></pre>
<ul>
<li><code>STATUS</code> â†’ å®¹å™¨è¿è¡ŒçŠ¶æ€ï¼ˆUp / Exitedï¼‰</li>
<li><code>PORTS</code> â†’ æ˜ å°„ç«¯å£</li>
<li><code>NAMES</code> â†’ å®¹å™¨åå­—</li>
</ul>
<hr/>
<h3 data-id="heading-19">2ï¸âƒ£ æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„ï¼‰</h3>
<pre><code class="hljs language-css" lang="css">docker ps -<span class="hljs-selector-tag">a</span>
</code></pre>
<ul>
<li>å¯ä»¥çœ‹åˆ°å·²é€€å‡ºæˆ–æŠ¥é”™çš„å®¹å™¨</li>
<li>å¦‚æœ MySQL å®¹å™¨ <code>STATUS</code> æ˜¾ç¤º <code>Exited</code>ï¼Œè¯´æ˜å¯åŠ¨å¤±è´¥ï¼Œéœ€è¦æ£€æŸ¥æ—¥å¿—</li>
</ul>
<hr/>
<h3 data-id="heading-20">3ï¸âƒ£ æŸ¥çœ‹å®¹å™¨æ—¥å¿—</h3>
<pre><code class="hljs">docker logs mysql8
</code></pre>
<ul>
<li>æŸ¥çœ‹ MySQL å®¹å™¨çš„å¯åŠ¨è¾“å‡º</li>
<li>å¯ä»¥å¿«é€Ÿå®šä½å¯†ç é”™è¯¯ã€æ•°æ®ç›®å½•æƒé™é—®é¢˜ç­‰</li>
</ul>
<hr/>
<h3 data-id="heading-21">4ï¸âƒ£ è¿›å…¥å®¹å™¨å†…éƒ¨ï¼ˆMySQL æµ‹è¯• / æ“ä½œï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">exec</span> -it mysql8 bash
</code></pre>
<p>ç„¶åå¯ä»¥ç›´æ¥ä½¿ç”¨ MySQLï¼š</p>
<pre><code class="hljs language-css" lang="css">mysql -uroot -<span class="hljs-selector-tag">p</span>
</code></pre>
<hr/>
<h2 data-id="heading-22">ä¸‰ã€æŸ¥çœ‹ Docker ä½¿ç”¨çš„èµ„æº</h2>
<pre><code class="hljs">docker info
</code></pre>
<p>é‡ç‚¹çœ‹ï¼š</p>
<ul>
<li><code>Docker Root Dir</code> â†’ æ•°æ®ç›®å½•</li>
<li><code>Containers</code> â†’ å½“å‰å®¹å™¨æ•°é‡</li>
<li><code>Images</code> â†’ é•œåƒæ•°é‡</li>
<li><code>Server Version</code> â†’ Docker ç‰ˆæœ¬</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æœºå·è„±æ•å¤„ç†ï¼ˆPython/Scala åŒç‰ˆæœ¬å®ç°ï¼‰]]></title>    <link>https://juejin.cn/post/7586615716905680896</link>    <guid>https://juejin.cn/post/7586615716905680896</guid>    <pubDate>2025-12-23T03:19:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586615716905680896" data-draft-id="7586570254861369384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æœºå·è„±æ•å¤„ç†ï¼ˆPython/Scala åŒç‰ˆæœ¬å®ç°ï¼‰"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-23T03:19:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾è€æ€»"/> <meta itemprop="url" content="https://juejin.cn/user/3344078309963692"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æœºå·è„±æ•å¤„ç†ï¼ˆPython/Scala åŒç‰ˆæœ¬å®ç°ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3344078309963692/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾è€æ€»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:19:26.000Z" title="Tue Dec 23 2025 03:19:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">import</span> re

# <span class="hljs-number">1.</span> è¯»å–åŸæ–‡ä»¶
<span class="hljs-keyword">with</span> open(<span class="hljs-string">"address.txt"</span>, <span class="hljs-string">"r"</span>, encoding=<span class="hljs-string">"utf-8"</span>) as f:
    content = f.read()

# <span class="hljs-number">2.</span> è¯†åˆ«å¹¶æ›¿æ¢æ‰‹æœºå·
# æ­£åˆ™åŒ¹é…<span class="hljs-number">11</span>ä½æ‰‹æœºå·ï¼Œæ›¿æ¢ä¸­é—´<span class="hljs-number">4</span>ä½ä¸º####
processed_content = re.sub(
    <span class="hljs-string">r"(\d{3})\d{4}(\d{4})"</span>,  # åŒ¹é…è§„åˆ™ï¼šå‰<span class="hljs-number">3</span>ä½+ä¸­é—´<span class="hljs-number">4</span>ä½+å<span class="hljs-number">4</span>ä½
    <span class="hljs-string">r"\1####\2"</span>,            # æ›¿æ¢ä¸ºï¼šå‰<span class="hljs-number">3</span>ä½+####+å<span class="hljs-number">4</span>ä½
    content
)

# <span class="hljs-number">3.</span> ä¿å­˜åˆ°æ–°æ–‡ä»¶
<span class="hljs-keyword">with</span> open(<span class="hljs-string">"processed_address.txt"</span>, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) as f:
    f.write(processed_content)
</code></pre>
<ul>
<li>åŸå†…å®¹ï¼ˆ<code>address.txt</code>ï¼‰ï¼š<code>å°èŠ±ï¼Œxxxç››ä¸–åŸ3æ¥¼303å·ï¼Œ13617234567ã€‚</code></li>
<li>å¤„ç†åï¼ˆ<code>processed_address.txt</code>ï¼‰ï¼š<code>å°èŠ±ï¼Œxxxç››ä¸–åŸ3æ¥¼303å·ï¼Œ136####4567ã€‚</code></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9591b2e0dca44a4db49a90388944653b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q6ICB5oC7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064765&amp;x-signature=OqNkLmHD8bd1OKT3E2mtmLyY9dA%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">reg04</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    <span class="hljs-comment">// 1. è¯»å…¥æ–‡ä»¶ã€‚æ ¹ç›®å½•ä¸‹çš„address.txt</span>
    <span class="hljs-keyword">val</span> source = scala.io.<span class="hljs-type">Source</span>.fromFile(<span class="hljs-string">"address.txt"</span>).mkString
    <span class="hljs-comment">// println(source)</span>

    <span class="hljs-comment">// 2. è¯†åˆ«æ‰‹æœºå·</span>
    <span class="hljs-comment">//val reg = "1[3456789]\d{9}".r</span>
    <span class="hljs-keyword">val</span> reg = <span class="hljs-string">"(1[3456789])(\d{4})(\d{4})"</span>.r

    <span class="hljs-comment">// 3. æ›¿æ¢</span>
    <span class="hljs-comment">// group åˆ†ç»„</span>
    <span class="hljs-comment">// group(0) åŒ¹é…åˆ°çš„æ•´ä¸ªå­—ç¬¦ä¸²</span>
    <span class="hljs-comment">// group(1) åŒ¹é…åˆ°çš„ç¬¬1ä¸ªæ‹¬å·</span>
    <span class="hljs-comment">// group(2) åŒ¹é…åˆ°çš„ç¬¬2ä¸ªæ‹¬å·</span>
    <span class="hljs-comment">// group(3) åŒ¹é…åˆ°çš„ç¬¬3ä¸ªæ‹¬å·</span>
    <span class="hljs-keyword">val</span> newSource = reg.replaceAllIn(source, m =&gt; {
      println(m.group(<span class="hljs-number">0</span>))
      println(m.group(<span class="hljs-number">1</span>))
      println(m.group(<span class="hljs-number">2</span>))
      println(m.group(<span class="hljs-number">3</span>))
      m.group(<span class="hljs-number">1</span>) + <span class="hljs-string">"*****"</span> + m.group(<span class="hljs-number">3</span>)
      <span class="hljs-comment">// println(m.toString)</span>
      <span class="hljs-comment">// m.toString</span>
    })

    <span class="hljs-comment">// 4. è¾“å‡ºæ–‡ä»¶</span>
    <span class="hljs-keyword">val</span> writer = <span class="hljs-keyword">new</span> java.io.<span class="hljs-type">PrintWriter</span>(<span class="hljs-string">"address_new.txt"</span>)
    writer.write(newSource)
    writer.close()
  }
}
</code></pre>
<p>scala</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">object</span> reg04 {
</code></pre>
<ul>
<li>å®šä¹‰ä¸€ä¸ª Scala å•ä¾‹å¯¹è±¡ï¼ˆ<code>object</code>ï¼‰ï¼Œåä¸º<code>reg04</code>ï¼ŒScala ç¨‹åºçš„å…¥å£é€»è¾‘é€šå¸¸å†™åœ¨å•ä¾‹å¯¹è±¡ä¸­ã€‚</li>
</ul>
<p>scala</p>
<pre><code class="hljs language-arduino" lang="arduino">  <span class="hljs-function">def <span class="hljs-title">main</span><span class="hljs-params">(args: Array[<span class="hljs-type">String</span>])</span>: Unit =</span> {
</code></pre>
<ul>
<li>
<p>å®šä¹‰ç¨‹åºçš„ä¸»å…¥å£æ–¹æ³•<code>main</code>ï¼š</p>
<ul>
<li><code>args: Array[String]</code>ï¼šæ¥æ”¶å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ¬ä»£ç æœªä½¿ç”¨ï¼‰ï¼›</li>
<li><code>Unit</code>ï¼šè¡¨ç¤ºæ–¹æ³•æ— è¿”å›å€¼ï¼ˆç±»ä¼¼ Java çš„<code>void</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>scala</p>
<pre><code class="hljs language-ini" lang="ini">    // 1. è¯»å…¥æ–‡ä»¶ã€‚æ ¹ç›®å½•ä¸‹çš„address.txt
    val <span class="hljs-attr">source</span> = scala.io.Source.fromFile(<span class="hljs-string">"address.txt"</span>).mkString
</code></pre>
<ul>
<li>
<p><strong>è¯»å–æ–‡ä»¶å†…å®¹</strong>ï¼š</p>
<ul>
<li><code>scala.io.Source.fromFile("address.txt")</code>ï¼šæ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>address.txt</code>æ–‡ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶è¯»å–æºï¼›</li>
<li><code>.mkString</code>ï¼šå°†æ–‡ä»¶ä¸­çš„æ‰€æœ‰å­—ç¬¦è¯»å–ä¸ºä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œèµ‹å€¼ç»™ä¸å¯å˜å˜é‡<code>source</code>ã€‚</li>
</ul>
</li>
</ul>
<p>scala</p>
<pre><code class="hljs language-arduino" lang="arduino">    <span class="hljs-comment">// println(source)</span>
</code></pre>
<ul>
<li>æ³¨é‡Šæ‰çš„è°ƒè¯•ä»£ç ï¼šæ‰“å°åŸå§‹æ–‡ä»¶å†…å®¹ï¼Œç”¨äºéªŒè¯æ˜¯å¦æ­£ç¡®è¯»å–æ–‡ä»¶ã€‚</li>
</ul>
<p>scala</p>
<pre><code class="hljs language-ini" lang="ini">    // 2. è¯†åˆ«æ‰‹æœºå·
    //val <span class="hljs-attr">reg</span> = <span class="hljs-string">"1[3456789]\d{9}"</span>.r
    val <span class="hljs-attr">reg</span> = <span class="hljs-string">"(1[3456789])(\d{4})(\d{4})"</span>.r
</code></pre>
<ul>
<li>
<p><strong>å®šä¹‰æ‰‹æœºå·åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼š</p>
<ul>
<li>
<p>æ³¨é‡Šçš„<code>reg = "1[3456789]\d{9}".r</code>ï¼šåŒ¹é…å®Œæ•´çš„ 11 ä½æ‰‹æœºå·ï¼ˆ<code>1</code>å¼€å¤´ + 3/4/5/6/7/8/9 + 9 ä½ä»»æ„æ•°å­—ï¼‰ï¼Œä½†æœªåˆ†ç»„ï¼›</p>
</li>
<li>
<p>ç”Ÿæ•ˆçš„<code>reg = "(1[3456789])(\d{4})(\d{4})".r</code>ï¼š</p>
<ul>
<li>
<p>ç”¨æ‹¬å·<code>()</code>å°†æ‰‹æœºå·æ‹†åˆ†ä¸º 3 ä¸ªåˆ†ç»„ï¼Œæ–¹ä¾¿åç»­æ›¿æ¢ï¼š</p>
<ul>
<li>ç¬¬ 1 ç»„<code>(1[3456789])</code>ï¼šæ‰‹æœºå·å‰ 3 ä½ï¼ˆè¿è¥å•†å·æ®µï¼‰ï¼›</li>
<li>ç¬¬ 2 ç»„<code>(\d{4})</code>ï¼šæ‰‹æœºå·ä¸­é—´ 4 ä½ï¼ˆè¦æ‰“ç çš„éƒ¨åˆ†ï¼‰ï¼›</li>
<li>ç¬¬ 3 ç»„<code>(\d{4})</code>ï¼šæ‰‹æœºå·å 4 ä½ï¼›</li>
</ul>
</li>
<li>
<p><code>.r</code>ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸º Scala çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>scala</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">// 3. æ›¿æ¢</span>
    <span class="hljs-comment">// group åˆ†ç»„</span>
    <span class="hljs-comment">// group(0) åŒ¹é…åˆ°çš„æ•´ä¸ªå­—ç¬¦ä¸²</span>
    <span class="hljs-comment">// group(1) åŒ¹é…åˆ°çš„ç¬¬1ä¸ªæ‹¬å·</span>
    <span class="hljs-comment">// group(2) åŒ¹é…åˆ°çš„ç¬¬2ä¸ªæ‹¬å·</span>
    <span class="hljs-comment">// group(3) åŒ¹é…åˆ°çš„ç¬¬3ä¸ªæ‹¬å·</span>
    <span class="hljs-type">val</span> <span class="hljs-variable">newSource</span> <span class="hljs-operator">=</span> reg.replaceAllIn(source, m =&gt; {
</code></pre>
<ul>
<li>
<p><strong>æ‰¹é‡æ›¿æ¢åŒ¹é…åˆ°çš„æ‰‹æœºå·</strong>ï¼š</p>
<ul>
<li><code>reg.replaceAllIn(source, æ›¿æ¢è§„åˆ™)</code>ï¼šåœ¨<code>source</code>å­—ç¬¦ä¸²ä¸­ï¼Œæ‰¾åˆ°æ‰€æœ‰åŒ¹é…<code>reg</code>çš„æ‰‹æœºå·ï¼ŒæŒ‰è§„åˆ™æ›¿æ¢ï¼›</li>
<li><code>m =&gt; {...}</code>ï¼šåŒ¿åå‡½æ•°ï¼ˆæ›¿æ¢é€»è¾‘ï¼‰ï¼Œ<code>m</code>æ˜¯æ¯ä¸ªåŒ¹é…åˆ°çš„æ‰‹æœºå·çš„ â€œåŒ¹é…å¯¹è±¡â€ï¼ŒåŒ…å«åˆ†ç»„ä¿¡æ¯ã€‚</li>
</ul>
</li>
</ul>
<p>scala</p>
<pre><code class="hljs language-scss" lang="scss">      <span class="hljs-built_in">println</span>(m.group(<span class="hljs-number">0</span>))
      <span class="hljs-built_in">println</span>(m.group(<span class="hljs-number">1</span>))
      <span class="hljs-built_in">println</span>(m.group(<span class="hljs-number">2</span>))
      <span class="hljs-built_in">println</span>(m.group(<span class="hljs-number">3</span>))
</code></pre>
<ul>
<li>
<p>è°ƒè¯•æ‰“å°ï¼šè¾“å‡ºæ¯ä¸ªåŒ¹é…åˆ°çš„æ‰‹æœºå·çš„å®Œæ•´å†…å®¹å’Œåˆ†ç»„å†…å®¹ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p>è‹¥åŒ¹é…åˆ°<code>13617234567</code>ï¼Œåˆ™ï¼š</p>
<ul>
<li><code>m.group(0)</code>Â â†’Â <code>13617234567</code>ï¼ˆå®Œæ•´æ‰‹æœºå·ï¼‰ï¼›</li>
<li><code>m.group(1)</code>Â â†’Â <code>136</code>ï¼ˆå‰ 3 ä½ï¼‰ï¼›</li>
<li><code>m.group(2)</code>Â â†’Â <code>1723</code>ï¼ˆä¸­é—´ 4 ä½ï¼‰ï¼›</li>
<li><code>m.group(3)</code>Â â†’Â <code>4567</code>ï¼ˆå 4 ä½ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>scala</p>
<pre><code class="hljs language-csharp" lang="csharp">      m.<span class="hljs-keyword">group</span>(<span class="hljs-number">1</span>) + <span class="hljs-string">"*****"</span> + m.<span class="hljs-keyword">group</span>(<span class="hljs-number">3</span>)
</code></pre>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ›¿æ¢é€»è¾‘</strong>ï¼š</p>
<ul>
<li>æ‹¼æ¥ â€œå‰ 3 ä½ +Â <code>*****</code>Â + å 4 ä½â€ï¼Œæ›¿æ¢åŸæ‰‹æœºå·ï¼›</li>
<li>ä¾‹å¦‚ï¼š<code>136</code>Â +Â <code>*****</code>Â +Â <code>4567</code>Â â†’Â <code>136*****4567</code>ã€‚</li>
</ul>
</li>
</ul>
<p>scala</p>
<pre><code class="hljs language-arduino" lang="arduino">      <span class="hljs-comment">// println(m.toString)</span>
      <span class="hljs-comment">// m.toString</span>
    })
</code></pre>
<ul>
<li>æ³¨é‡Šçš„è°ƒè¯•ä»£ç ï¼š<code>m.toString</code>ç­‰ä»·äº<code>m.group(0)</code>ï¼Œå³æ‰“å°å®Œæ•´åŒ¹é…çš„æ‰‹æœºå·ã€‚</li>
</ul>
<p>scala</p>
<pre><code class="hljs language-go" lang="go">    <span class="hljs-comment">// 4. è¾“å‡ºæ–‡ä»¶</span>
    val writer = <span class="hljs-built_in">new</span> java.io.PrintWriter(<span class="hljs-string">"address_new.txt"</span>)
    writer.write(newSource)
    writer.<span class="hljs-built_in">close</span>()
</code></pre>
<ul>
<li>
<p><strong>ä¿å­˜å¤„ç†åçš„å†…å®¹</strong>ï¼š</p>
<ul>
<li><code>new java.io.PrintWriter("address_new.txt")</code>ï¼šåˆ›å»ºæ‰“å°å†™å…¥å™¨ï¼ŒæŒ‡å‘æ–°æ–‡ä»¶<code>address_new.txt</code>ï¼›</li>
<li><code>writer.write(newSource)</code>ï¼šå°†æ›¿æ¢åçš„å­—ç¬¦ä¸²å†™å…¥æ–°æ–‡ä»¶ï¼›</li>
<li><code>writer.close()</code>ï¼šå…³é—­å†™å…¥å™¨ï¼Œé‡Šæ”¾æ–‡ä»¶èµ„æºï¼ˆå¿…é¡»æ‰§è¡Œï¼Œå¦åˆ™å†…å®¹å¯èƒ½æ— æ³•å†™å…¥ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>scala</p>
<pre><code class="hljs">  }
}
</code></pre>
<ul>
<li>é—­åˆ<code>main</code>æ–¹æ³•å’Œå•ä¾‹å¯¹è±¡ã€‚</li>
</ul>
<h3 data-id="heading-0">å…³é”®æ³¨æ„ç‚¹</h3>
<ol>
<li><strong>æ­£åˆ™åŒ¹é…èŒƒå›´</strong>ï¼šåŸä»£ç çš„æ­£åˆ™æ˜¯ â€œéæ•´è¡ŒåŒ¹é…â€ï¼Œèƒ½è¯†åˆ«åµŒå…¥åœ¨æ–‡æœ¬ä¸­çš„æ‰‹æœºå·ï¼ˆå¦‚ â€œå°èŠ± 13617234567 åœ°å€â€ï¼‰ï¼Œè€Œéä»…ç‹¬ç«‹ä¸€è¡Œçš„æ‰‹æœºå·ï¼›</li>
<li><strong>æ‰“ç ç¬¦å·</strong>ï¼šä»£ç ä¸­æ˜¯<code>*****</code>ï¼Œè‹¥éœ€æ”¹ä¸º<code>####</code>ï¼Œåªéœ€æŠŠ<code>m.group(1) + "*****" + m.group(3)</code>ä¸­çš„<code>*****</code>æ›¿æ¢ä¸º<code>####</code>ï¼›</li>
<li><strong>ç¼–ç é—®é¢˜</strong>ï¼šåŸä»£ç æœªæŒ‡å®šæ–‡ä»¶ç¼–ç ï¼Œè‹¥æ–‡ä»¶åŒ…å«ä¸­æ–‡ï¼Œå¯èƒ½å‡ºç°ä¹±ç ï¼Œå»ºè®®è¡¥å……ç¼–ç ï¼ˆå¦‚<code>fromFile("address.txt", "UTF-8")</code>ï¼‰ï¼›</li>
<li><strong>èµ„æºé‡Šæ”¾</strong>ï¼š<code>PrintWriter</code>éœ€æ‰‹åŠ¨<code>close()</code>ï¼Œå¦åˆ™æ–‡ä»¶å¯èƒ½æ— æ³•æ­£å¸¸ä¿å­˜ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI å·¥ç¨‹å­¦ä¹ è·¯çº¿å›¾ï¼š8 ä¸ªæ–¹å‘ï¼Œä»åŸºç¡€åˆ°å‰æ²¿]]></title>    <link>https://juejin.cn/post/7586573133349912622</link>    <guid>https://juejin.cn/post/7586573133349912622</guid>    <pubDate>2025-12-23T05:43:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586573133349912622" data-draft-id="7586584105741942834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI å·¥ç¨‹å­¦ä¹ è·¯çº¿å›¾ï¼š8 ä¸ªæ–¹å‘ï¼Œä»åŸºç¡€åˆ°å‰æ²¿"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-23T05:43:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI å·¥ç¨‹å­¦ä¹ è·¯çº¿å›¾ï¼š8 ä¸ªæ–¹å‘ï¼Œä»åŸºç¡€åˆ°å‰æ²¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:43:02.000Z" title="Tue Dec 23 2025 05:43:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>æƒ³è¿›å…¥AIå·¥ç¨‹é¢†åŸŸï¼Ÿè¿™å¼ è·¯çº¿å›¾è¦†ç›–äº†ä»PythonåŸºç¡€åˆ°å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„æ ¸å¿ƒæ–¹å‘ï¼Œè¿˜æ¨èäº†ä¼˜è´¨å­¦ä¹ èµ„æºï½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e806453840d4ec99bfb66802ed4222b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767073381&amp;x-signature=WC%2BzE0BYgZMvWxxqIWDxSscySgM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. Pythonï¼šAIå·¥ç¨‹çš„â€œåŸºå»ºè¯­è¨€â€</h2>
<p>æ¨èèµ„æºï¼šå“ˆä½›å¤§å­¦CS50pã€Andrew Ngåœ¨Courseraçš„ã€ŠAI Pythonã€‹ã€‚</p>
<p>ä½œç”¨ï¼šAIå·¥ç¨‹çš„å‡ ä¹æ‰€æœ‰å·¥å…·ï¼ˆæ¡†æ¶ã€åº“ï¼‰éƒ½åŸºäºPythonï¼Œæ‰å®çš„PythonåŸºç¡€æ˜¯å…¥é—¨ç¬¬ä¸€æ­¥ã€‚</p>
<h2 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. æœºå™¨å­¦ä¹ æ•°å­¦ï¼šç®—æ³•çš„â€œåº•å±‚é€»è¾‘â€</h2>
<p>æ ¸å¿ƒå†…å®¹ï¼šæ¦‚ç‡ã€ç»Ÿè®¡ã€çº¿æ€§ä»£æ•°ã€‚</p>
<p>æ¨èèµ„æºï¼šKhan Academyï¼ˆå¯æ±—å­¦é™¢ï¼‰çš„YouTubeæ’­æ”¾åˆ—è¡¨ã€‚</p>
<p>ä½œç”¨ï¼šç†è§£æœºå™¨å­¦ä¹ ç®—æ³•ï¼ˆå¦‚ç¥ç»ç½‘ç»œã€å¤§æ¨¡å‹ï¼‰çš„æ•°å­¦åŸç†ï¼Œæ‰èƒ½ä¸â€œç›²ç›®è°ƒåŒ…â€ã€‚</p>
<h2 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åŸºç¡€ï¼šAIçš„â€œæ ¸å¿ƒç»„ä»¶â€</h2>
<p>æ¨èèµ„æºï¼š3Blue1Brownçš„â€œç¥ç»ç½‘ç»œâ€ç³»åˆ—è§†é¢‘ã€‚</p>
<p>ä½œç”¨ï¼šLLMæ˜¯å½“å‰AIæœ€æ ¸å¿ƒçš„æŠ€æœ¯ä¹‹ä¸€ï¼Œå…ˆææ‡‚â€œç¥ç»ç½‘ç»œå¦‚ä½•å·¥ä½œâ€ï¼Œå†æ·±å…¥LLMæ›´è½»æ¾ã€‚</p>
<h2 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4. LLMç ”ç©¶ï¼šå‰æ²¿æŠ€æœ¯çš„â€œæ¢ç´¢â€</h2>
<p>æ¨èèµ„æºï¼šAndrej Karpathyçš„Makemoreç³»åˆ—ï¼ˆè®²è§£ä»0æ„å»ºå¤§æ¨¡å‹çš„æ€è·¯ï¼‰ã€‚</p>
<p>ä½œç”¨ï¼šä»â€œç”¨LLMâ€åˆ°â€œç†è§£LLMå¦‚ä½•è¢«æ‰“é€ â€ï¼Œé€‚åˆæƒ³æ·±å…¥ç ”ç©¶å¤§æ¨¡å‹çš„åŒå­¦ã€‚</p>
<h2 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5. AIæ™ºèƒ½ä½“ï¼ˆAgentsï¼‰ï¼šAIçš„â€œè‡ªä¸»åº”ç”¨â€</h2>
<p>æ¨èèµ„æºï¼šAnthropicçš„ã€ŠBuilding Effective Agentsã€‹ã€‚</p>
<p>ä½œç”¨ï¼šæ™ºèƒ½ä½“æ˜¯AIè½åœ°çš„çƒ­é—¨æ–¹å‘ï¼ˆèƒ½è‡ªä¸»å®Œæˆä»»åŠ¡ï¼‰ï¼Œå­¦ä¹ å¦‚ä½•æ„å»ºé«˜æ•ˆæ™ºèƒ½ä½“æ˜¯æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
<h2 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6. åº”ç”¨AIï¼šå¤šæ™ºèƒ½ä½“ç³»ç»Ÿå®æˆ˜</h2>
<p>æ¨èèµ„æºï¼šç”¨CrewAIæ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚</p>
<p>ä½œç”¨ï¼šä»â€œå•æ™ºèƒ½ä½“â€åˆ°â€œå¤šæ™ºèƒ½ä½“åä½œâ€ï¼Œæ˜¯AIå·¥ç¨‹è½åœ°çš„è¿›é˜¶åœºæ™¯ï¼ˆæ¯”å¦‚æ™ºèƒ½ä½“å›¢é˜Ÿåˆ†å·¥å®Œæˆå¤æ‚ä»»åŠ¡ï¼‰ã€‚</p>
<h2 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7. AIåè®®ï¼šç³»ç»Ÿé—´çš„â€œäº¤äº’è§„åˆ™â€</h2>
<p>æ ¸å¿ƒæ–¹å‘ï¼šMCPï¼ˆå¤šå®¢æˆ·ç«¯åè®®ï¼‰ã€A2Aï¼ˆæ™ºèƒ½ä½“é—´é€šä¿¡ï¼‰ã€AG-UIï¼ˆæ™ºèƒ½ä½“ä¸ç•Œé¢äº¤äº’ï¼‰ã€‚</p>
<p>ä½œç”¨ï¼šAIç³»ç»Ÿä¸æ˜¯å­¤ç«‹çš„ï¼Œåè®®æ˜¯æ™ºèƒ½ä½“ã€ç³»ç»Ÿä¹‹é—´â€œé«˜æ•ˆå¯¹è¯â€çš„è§„åˆ™ã€‚</p>
<h2 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8. ä¹¦ç±ï¼šç³»ç»ŸåŒ–çš„çŸ¥è¯†æ²‰æ·€</h2>
<p>æ¨èä¹¦ç›®ï¼šã€ŠAI Engineeringã€‹ã€ŠAI Agents Guidebookã€‹ã€ŠMCP Guidebookã€‹ã€‚</p>
<p>ä½œç”¨ï¼šä¹¦ç±èƒ½æä¾›æ›´ä½“ç³»åŒ–çš„çŸ¥è¯†ï¼Œå¸®ä½ æŠŠé›¶æ•£çš„å­¦ä¹ ç‚¹ä¸²æˆâ€œçŸ¥è¯†ç½‘â€ã€‚</p>
<p>AIå·¥ç¨‹çš„å­¦ä¹ é€»è¾‘æ˜¯â€œä»åŸºç¡€å·¥å…·ï¼ˆPythonï¼‰â†’ æ ¸å¿ƒæŠ€æœ¯ï¼ˆLLMã€æ™ºèƒ½ä½“ï¼‰â†’ ç³»ç»Ÿåä½œï¼ˆåè®®ã€å¤šæ™ºèƒ½ä½“ï¼‰â€ï¼Œè·Ÿç€è¿™ä¸ªè·¯çº¿é€æ­¥æ·±å…¥ï¼Œèƒ½æ›´é«˜æ•ˆåœ°æ­å»ºçŸ¥è¯†ä½“ç³»ï½</p>
<h3 data-id="heading-8">å­¦ä¹ èµ„æºæ¨è</h3>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Specæ¨¡å¼èµ‹èƒ½ç™¾åº¦ç½‘ç›˜åœºæ™¯ææ•ˆ]]></title>    <link>https://juejin.cn/post/7586615716906303488</link>    <guid>https://juejin.cn/post/7586615716906303488</guid>    <pubDate>2025-12-23T05:46:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586615716906303488" data-draft-id="7586559672129699892" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Specæ¨¡å¼èµ‹èƒ½ç™¾åº¦ç½‘ç›˜åœºæ™¯ææ•ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,ç¨‹åºå‘˜,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-23T05:46:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–‡å¿ƒå¿«ç BaiduComate"/> <meta itemprop="url" content="https://juejin.cn/user/992209294070809"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Specæ¨¡å¼èµ‹èƒ½ç™¾åº¦ç½‘ç›˜åœºæ™¯ææ•ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/992209294070809/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–‡å¿ƒå¿«ç BaiduComate
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:46:31.000Z" title="Tue Dec 23 2025 05:46:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å°†é€šè¿‡2ä¸ªå®è·µæ¡ˆä¾‹ï¼Œå¸¦å¤§å®¶æ„Ÿå—SPECæ¨¡å¼çš„é­…åŠ›ï½çœ‹Specå¦‚ä½•åœ¨ç™¾åº¦ç½‘ç›˜åœºæ™¯ä¸‹èµ‹èƒ½ç ”å‘ææ•ˆï¼</p>
<h2 data-id="heading-0">Case 1 ï¼šé€šè¿‡Specæ¨¡å¼ç”Ÿæˆä»£ç åº“Rulesæ•°æ®çœ‹æ¿</h2>
<p>ç™¾åº¦ç½‘ç›˜çš„æŠ€æœ¯è€å¸ˆæœ€è¿‘åœ¨åšé€šç”¨Ruleså¼€å‘ï¼Œè¿‡ç¨‹ä¸­çš„ç›‘æ§æŒ‡æ ‡æ˜¯å›¢é˜Ÿä»£ç åº“Ruleså æ¯”ï¼Œä½†ç¼ºå°‘ä¸€ä¸ªèƒ½çœ‹åˆ°å„å›¢é˜Ÿå æ¯”çš„é¡µé¢ï¼Œç°åœ¨çš„ä»»åŠ¡å°±æ˜¯ä»0åˆ°1å»è§£å†³è¿™ä»¶äº‹ã€‚å½“ç„¶ï¼Œä¸æ˜¯è¦ç”Ÿæˆä¸€ä¸ªä¸´æ—¶é¡¹ç›®ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªå¯æŒä¹…ç»´æŠ¤çš„ã€ç¬¦åˆå½“å‰å›¢é˜ŸæŠ€æœ¯æ ˆçš„é¡¹ç›®ã€‚</p>
<p>è§‚çœ‹ã€é€šè¿‡Specæ¨¡å¼ï¼Œä»0åˆ°1ç”Ÿæˆå„å›¢é˜Ÿä»£ç åº“Ruleså æ¯”é¡µé¢ã€‘è§†é¢‘ğŸ‘‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fz2Qmp7Blq7tAdV9bovBcSQ" target="_blank" title="https://mp.weixin.qq.com/s/z2Qmp7Blq7tAdV9bovBcSQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/z2Qmp7Blqâ€¦</a></p>
<p>å®é™…å·¥ä½œä¸­ç»å¸¸ä¼šé‡åˆ°ä¸€ä¸ªç—›ç‚¹ï¼šåœ¨å†…éƒ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè®¾è®¡èµ„æºå¾€å¾€éå¸¸ç´§å¼ ï¼Œå°¤å…¶åƒæ•°æ®ç»Ÿè®¡è¿™ç±»é¡µé¢ï¼Œç»å¸¸æ²¡æœ‰ç°æˆçš„è®¾è®¡ç¨¿ï¼Œå› æ­¤ä¹Ÿæ— æ³•ç›´æ¥ä½¿ç”¨F2Cï¼ˆFigma to Codeï¼‰è¿™ç±»åŠŸèƒ½ã€‚å¦‚æœèµ°ä¼ ç»Ÿå¼€å‘æ¨¡å¼ï¼Œä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªåŠŸèƒ½ï¼Œéœ€è¦åˆ°å¤„å¯»æ‰¾åˆé€‚çš„ç»„ä»¶ã€æ¢³ç†äº¤äº’é€»è¾‘ï¼Œæ•´ä¸ªè¿‡ç¨‹æ—¢è€—æ—¶åˆå®¹æ˜“å‡ºé”™ã€‚ç°åœ¨æœ‰äº†<strong>SPECæ¨¡å¼</strong>ï¼Œæƒ…å†µå°±å®Œå…¨ä¸åŒäº†ã€‚å®ƒèƒ½å¤Ÿå¸¦é¢†æˆ‘ä»¬ä»<strong>éœ€æ±‚è®¾è®¡</strong>å‡ºå‘ï¼Œä¸€æ­¥æ­¥æ¨è¿›åˆ°<strong>æ¶æ„è®¾è®¡</strong>ï¼Œæœ€åè¿›å…¥<strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼Œå¸®åŠ©æˆ‘ä»¬é«˜æ•ˆã€ç³»ç»Ÿåœ°å®ç°ä¸€ä¸ªå®Œæ•´åŠŸèƒ½ï¼Œå¤§å¤§æå‡äº†æ•´ä½“æ•ˆç‡ã€‚</p>
<p><strong>åœ¨ä»‹ç»SPECæ¨¡å¼æµç¨‹å‰ï¼Œå…ˆè®¾é—®ï¼š</strong> â€œé¢ä¸´â€˜æ— å›¾å¼€å‘â€™è¿™ä¸ªå›°å¢ƒï¼Œä¸€ä¸ªç†æƒ³çš„è¾…åŠ©å·¥å…·ï¼Œåº”è¯¥ä»å“ªå‡ ä¸ªç¯èŠ‚å¸®åŠ©æˆ‘ä»¬ï¼Ÿ<strong>ç†è§£éœ€æ±‚ã€æ­å¥½æ¶å­ã€ç”Ÿæˆä»£ç </strong>ï¼Œè¿™å…¶å®å°±æ˜¯SPECæ¨¡å¼çš„æ ¸å¿ƒè„‰ç»œã€‚â€</p>
<p>ä¸€èµ·çœ‹ä¸‹SPECç”Ÿæˆæ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒZuluå·²ç»æˆåŠŸå®Œæˆäº†ï¼š</p>
<p><strong>1 å®Œæ•´çš„å·¥ç¨‹åŒ–èƒ½åŠ›ï¼š</strong> å®Œæ•´çš„å·¥ç¨‹åŒ–èƒ½åŠ›æ˜¯é¡¹ç›®å®Œæˆçš„ä¸€å¤§æ­¥ï¼Œåç»­ä¹Ÿéƒ½å¯ä»¥åŸºäºæœ¬æ¬¡æ„å»ºå›¢é˜Ÿçš„TPLæ¨¡æ¿ä»¥è¿›è¡Œå¤ç”¨</p>
<ul>
<li>å·¥ä½œç©ºé—´é…ç½®</li>
<li>ç¬¦åˆè§„èŒƒæ–‡ä»¶ç»“æ„ï¼šmonorepoæ‹†åˆ†ä¸ºä¸šåŠ¡åŒ…frontendã€ä»¥åŠsharedä¾¿äºåç»­å¤šä¸ªä¸šåŠ¡åŒ…å¤ç”¨ç›¸åŒé€»è¾‘</li>
</ul>
<p><strong>2 å¯ç»´æŠ¤æ€§å¼ºçš„ä»£ç ï¼š</strong></p>
<ul>
<li>ç”Ÿæˆäººç±»å¯è¯»â€™çš„ä»£ç ï¼Œç±»å‹å®šä¹‰å’Œä½¿ç”¨</li>
</ul>
<p><strong>3 åˆç†çš„ä¸šåŠ¡åˆ†å±‚ï¼š</strong></p>
<ul>
<li>ç»„ä»¶ã€é¡µé¢ã€çŠ¶æ€ç®¡ç†ã€ServiceæœåŠ¡ã€å·¥å…·å‡½æ•°ç­‰ç¬¦åˆå¸¸è§„åˆ†å±‚é€»è¾‘</li>
</ul>
<p><strong>4 ç¬¦åˆé¢„æœŸçš„åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>å„ä¸ªå›¢é˜Ÿæœ¬èº«çš„Ruleså æ¯”ä¸€ç›®äº†ç„¶ï¼›</li>
<li>å¦‚æœéœ€è¦çš„è¯ï¼Œåªéœ€ç»™å®ƒè¯´ä¸€ä¸‹ç¾åŒ–æ ·å¼æˆ–è€…å¢åŠ å›¾è¡¨å±•ç¤ºå³å¯ï¼›</li>
<li>ç”šè‡³è¿˜é¢å¤–åšäº†ä¸€äº›ä»–è§‰å¾—éœ€è¦ï¼Œæˆ‘ä»¬æ²¡æœ‰æƒ³èµ·æ¥çš„åŠŸèƒ½ï¼Œå¦‚æ•°æ®ä¸‹è½½ï¼›</li>
<li>æœ¬æ¬¡çš„Promptæœ‰ç‚¹ç±»ä¼¼ã€é—²èŠç‰ˆã€ï¼Œå¹¶æ²¡æœ‰å¾ˆç»“æ„åŒ–ï¼Œå®ƒå…·å¤‡ä¸€å®šçš„ä¿¡æ¯æå–æ•´ç†èƒ½åŠ›ï¼Œè¯´æ˜ä½¿ç”¨AIç¼–ç¨‹çš„é—¨æ§›å¹¶ä¸é«˜ã€‚ç»“æ„åŒ–ä¹‹åï¼Œå¯ä»¥å®ç°æ›´å¤æ‚çš„ä»»åŠ¡ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e78e6aec29db49da93cc3b7d18f4125c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767073590&amp;x-signature=D11rHdrDqKiC%2FXCMwtAU82Ia9I8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>Specæ¨¡å¼æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ <strong>â€œå…ˆè®¡åˆ’ï¼Œåæ‰§è¡Œâ€</strong> çš„äººæœºåä½œèŒƒå¼ã€‚å®ƒè¦æ±‚AIåœ¨åŠ¨ç¬”å†™ä»£ç ä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠå®ƒçš„ç†è§£ã€æ–¹æ¡ˆå’Œä»»åŠ¡æ‹†è§£å†™æˆè¯¦ç»†çš„æ–‡æ¡£ï¼Œå¹¶æäº¤ç»™äººæ¥ç¡®è®¤ã€‚<strong>çœŸæ­£çº¦æŸäº†AIç”Ÿæˆä»£ç çš„è¡Œä¸ºï¼Œè®©å…¶æ›´åŠ è§„èŒƒï¼Œç”Ÿæˆæ›´å‡†ç¡®çš„ä»£ç ã€‚</strong></p>
<p>è¿™å°±åƒå»ºç­‘æ–½å·¥å‰éœ€è¦å®¡æ ¸è®¾è®¡è“å›¾ä¸€æ ·ï¼ŒæŠŠè´¨é‡ç®¡æ§çš„å…³å£å¤§å¹…å‰ç§»ï¼Œé¿å…åœ¨å»ºè®¾è¿‡ç¨‹ä¸­æœ‰é—®é¢˜å‡ºç°è¿”å·¥çš„æƒ…å†µã€‚</p>
<p>æœ¬æ¡ˆä¾‹ä¸­çœ‹åˆ°çš„æ˜¯SPECæ¨¡å¼å¤„ç†â€œä»0åˆ°1â€åœºæ™¯çš„èƒ½åŠ›ã€‚ä½†å®ƒæ›´å¤§çš„æƒ³è±¡ç©ºé—´åœ¨äºï¼Œ<strong>å®ƒå¯èƒ½æˆä¸ºå›¢é˜Ÿå†…éƒ¨ç»Ÿä¸€éœ€æ±‚è¡¨è¿°ã€å¿«é€Ÿäº§å‡ºæŠ€æœ¯æ–¹æ¡ˆåŸå‹çš„â€˜åä½œæ¡¥æ¢â€™ï¼š</strong> äº§å“ã€åç«¯å’Œå‰ç«¯ï¼Œæˆ–è®¸å¯ä»¥ç”¨åŒä¸€ç§â€œè¯­è¨€â€æ¥æ²Ÿé€šåŠŸèƒ½çš„é›å½¢ã€‚</p>
<h2 data-id="heading-1">Case 2 ï¼šç”¨Zuluè¿›è¡ŒAIä»£ç å®¡æŸ¥</h2>
<p>åœ¨åˆšæ‰ç”Ÿæˆæ•°æ®çœ‹æ¿çš„åœºæ™¯ï¼ŒSPECæ¨¡å¼èƒ½å¤§å¹…å‡å°‘å› æ–¹å‘é”™è¯¯ã€ç†è§£åå·®å¯¼è‡´çš„æ— æ•ˆå·¥ä½œå’Œè¿”å·¥ï¼Œæå‡äº†ä»£ç ç”Ÿæˆè´¨é‡ã€‚ä½†å¦‚æœä¹‹å‰çš„é¡¹ç›®æ²¡æœ‰ä½¿ç”¨SPECæ¨¡å¼ï¼Œç°åœ¨æƒ³è¦è¿›è¡Œä»£ç å®¡æŸ¥ï¼Œä¼˜åŒ–ä¸€ä¸‹ä»£ç ï¼Œæœ‰ä»€ä¹ˆå¥½çš„æ–¹æ³•å‘¢ï¼Ÿä¼ ç»Ÿä¸Šä¸€èˆ¬æ˜¯é äººå·¥é€å­—é€å¥å®¡æŸ¥ä»£ç çš„é—®é¢˜ï¼Œè´¹æ—¶è´¹åŠ›ï¼Œç°åœ¨<strong>å¯ä»¥å€ŸåŠ©Zuluçš„èƒ½åŠ›åœ¨å¤šä¸ªåœºæ™¯ï¼ˆå¦‚ç¼–ç é˜¶æ®µã€æµæ°´çº¿æ„å»ºé˜¶æ®µç­‰ï¼‰å¸®åŠ©åšä»£ç å®¡æŸ¥ã€‚</strong></p>
<p>åœ¨ç”¨Zuluè¿›è¡Œä»£ç å®¡æŸ¥å‰ï¼Œè¦å…ˆå‡†å¤‡ç¬¦åˆæœ¬å›¢é˜Ÿé¡¹ç›®æœ€ä½³å®è·µï¼ˆæœ¬å›¢é˜Ÿçš„å‡½æ•°å‘½åã€Storeä½¿ç”¨ã€æ€§èƒ½è´¨é‡ã€ç»„ä»¶ä½¿ç”¨ç­‰ï¼‰çš„å’Œæœ¬æŠ€æœ¯æ ˆé€šç”¨å‹ï¼ˆåŒ…å«è¿è¡Œæ—¶å´©æºƒé£é™©ã€ä¸¥é‡çš„é€»è¾‘å’ŒçŠ¶æ€é”™è¯¯ã€å†…å­˜æ³„éœ²é—®é¢˜ã€åŸå‹æ±¡æŸ“ã€å®‰å…¨çº¢çº¿ç­‰ï¼‰å¸¸è§é—®é¢˜çš„Rulesã€‚</p>
<p>ä¸‹é¢é’ˆå¯¹ç™¾åº¦ç½‘ç›˜GenFlowè¶…èƒ½æ­å­é¡¹ç›®åšä»£ç çš„å®¡æŸ¥æ¼”ç¤ºï¼ŒGenFlowè¶…èƒ½æ­å­èƒ½å¸®ä½ åšæ–‡ä»¶æ™ºèƒ½æ•´ç†ã€èƒ½ç”Ÿæˆè§†é¢‘ã€ç”ŸæˆPPTã€‚ï¼ˆGenFlowåŠŸèƒ½åœ¨ç™¾åº¦ç½‘ç›˜APPé¦–é¡µåº•éƒ¨æœ€æ˜¾çœ¼çš„TABï¼ŒWEBç«¯ã€æ¡Œé¢ç«¯ä¹Ÿæœ‰ç›¸åº”å…¥å£ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2f6e3c55102467c8f3ba81a59a1b83b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767073590&amp;x-signature=Zg%2BtXaCs2cQbVGWqN%2F2uUUdDELo%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æœ¬åœ°æ·»åŠ äº†ä¸€éƒ¨åˆ†é—®é¢˜ä»£ç ï¼Œä¾¿äºæ¼”ç¤ºã€‚</p>
<p>è§‚çœ‹ã€åœ¨ç¼–ç é˜¶æ®µè¿›è¡Œå›¢é˜Ÿé¡¹ç›®è§„èŒƒçš„ä»£ç å®¡æŸ¥ã€‘è§†é¢‘ğŸ‘‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fz2Qmp7Blq7tAdV9bovBcSQ" target="_blank" title="https://mp.weixin.qq.com/s/z2Qmp7Blq7tAdV9bovBcSQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/z2Qmp7Blqâ€¦</a></p>
<p>è§‚çœ‹ã€åœ¨ç¼–ç é˜¶æ®µè¿›è¡ŒæŠ€æœ¯æ ˆä¸¥é‡é—®é¢˜çš„ä»£ç å®¡æŸ¥ã€‘è§†é¢‘ğŸ‘‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fz2Qmp7Blq7tAdV9bovBcSQ" target="_blank" title="https://mp.weixin.qq.com/s/z2Qmp7Blq7tAdV9bovBcSQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/z2Qmp7Blqâ€¦</a></p>
<p>å¦‚æœæ²¡æœ‰åœ¨æœ¬åœ°ä½¿ç”¨ä»£ç å®¡æŸ¥ï¼Œæˆ–è€…æŸåŒå­¦éœ€è¦å¯¹åŒå­¦A\B\Cç­‰çš„ä»£ç è¿›è¡Œè¯„å®¡ï¼Œä¼—å¤šä»£ç çš„å®¡æŸ¥è´¹æ—¶è´¹åŠ›ï¼Œå¦‚æœæŠŠZuluçš„ä»£ç å®¡æŸ¥èƒ½åŠ›æ¥å…¥å¼€å‘å·¥ä½œæµä¸­ï¼Œæ˜¯ä¸æ˜¯ä¼šæå¤§æé«˜ä»£ç å®¡æŸ¥çš„æ•ˆç‡å‘¢?</p>
<p>è§‚çœ‹ã€åœ¨æ„å»ºé˜¶æ®µè¿›è¡ŒæŠ€æœ¯æ ˆä¸¥é‡é—®é¢˜çš„ä»£ç å®¡æŸ¥ã€‘è§†é¢‘ğŸ‘‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fz2Qmp7Blq7tAdV9bovBcSQ" target="_blank" title="https://mp.weixin.qq.com/s/z2Qmp7Blq7tAdV9bovBcSQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/z2Qmp7Blqâ€¦</a></p>
<p>é’ˆå¯¹å›¢é˜Ÿçš„æ‰€æœ‰ä»£ç å®¡æŸ¥ï¼Œå¯ä»¥åœ¨å†…éƒ¨å¹³å°ç®¡ç†å’Œç›‘æ§ï¼Œå¯¹AIä»£ç å®¡æŸ¥çš„æ‹¦æˆªæ•ˆæœåšè¯„ä¼°å’Œæ”¹è¿›ï¼Œå½¢æˆä»£ç å®¡æŸ¥çš„æ­£å‘å¾ªç¯é£è½®ã€‚ç»è¿‡ä»£ç å®¡æŸ¥ï¼ŒComateæ‰¾åˆ°äº†ä»¥ä¸Šä»£ç ä¿®æ”¹çš„æ‰€æœ‰æ¼æ´ã€‚</p>
<p>ä¸Šæ–‡æ¼”ç¤ºçš„AIä»£ç å®¡æŸ¥åŠŸèƒ½æ¸…æ™°ã€é«˜æ•ˆã€‚<strong>å®ƒé€šè¿‡ç³»ç»ŸåŒ–çš„æ­¥éª¤â€”â€”ä»æ™ºèƒ½åˆ†æå˜æ›´æ–‡ä»¶ã€ä¾æ®è§„èŒƒé€é¡¹æ£€æŸ¥ï¼Œåˆ°è‡ªåŠ¨è¯„åˆ†å¹¶ç”Ÿæˆè¯¦ç»†æŠ¥å‘Šå’Œå»ºè®®â€”â€”çœŸæ­£å®ç°äº†åœ¨ä»£ç æäº¤è¯„å®¡ä¹‹å‰ï¼Œå°±èƒ½ä¸»åŠ¨å‘ç°å’Œä¿®å¤é—®é¢˜ã€‚</strong> è¿™æ ·ä¸€æ¥ï¼Œä¸ä»…å¤§å¤§æå‡äº†ä»£ç è´¨é‡ï¼Œä¹ŸèŠ‚çœäº†å›¢é˜Ÿåå¤æ²Ÿé€šå’Œä¿®æ”¹çš„æ—¶é—´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agentå¼€å‘è·¯çº¿å›¾2025ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡è¯»æ‡‚æ™ºèƒ½ä½“æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7586588823906779145</link>    <guid>https://juejin.cn/post/7586588823906779145</guid>    <pubDate>2025-12-23T05:49:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586588823906779145" data-draft-id="7586588823906729993" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agentå¼€å‘è·¯çº¿å›¾2025ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡è¯»æ‡‚æ™ºèƒ½ä½“æŠ€æœ¯"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-23T05:49:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agentå¼€å‘è·¯çº¿å›¾2025ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œä¸€æ–‡è¯»æ‡‚æ™ºèƒ½ä½“æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:49:21.000Z" title="Tue Dec 23 2025 05:49:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<blockquote>
<p>AI Agentå¼€å‘æŠ€æœ¯åŠå·¥å…·é“¾æ•´ç†ï¼Œåˆ†äº«ç»™éœ€è¦çš„ä½ ã€‚</p>
</blockquote>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä»½2025å¹´AI Agentå¼€å‘è·¯çº¿å›¾ï¼Œå…¨é¢è§£æAgentå¼€å‘é¢†åŸŸçš„æ ¸å¿ƒæŠ€æœ¯æ ˆå’Œå‘å±•è·¯å¾„ã€‚</p>
<h2 data-id="heading-0"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä»€ä¹ˆæ˜¯AI Agentï¼Ÿ</h2>
<p>ä¸åªæ˜¯èŠå¤©æœºå™¨äººã€‚AI Agentä¸ä¼ ç»ŸèŠå¤©æœºå™¨äººçš„æ ¹æœ¬åŒºåˆ«åœ¨äº<strong>è‡ªä¸»æ€§</strong>ã€‚ä¸€ä¸ªçœŸæ­£çš„AI Agentèƒ½å¤Ÿç†è§£å¤æ‚ç›®æ ‡ï¼Œåˆ¶å®šè®¡åˆ’ï¼Œä½¿ç”¨å·¥å…·æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶æ ¹æ®ç»“æœè°ƒæ•´ç­–ç•¥â€”â€”è¿™ä¸€åˆ‡åªéœ€è¦ä½ ç»™å‡ºä¸€ä¸ªé«˜çº§æŒ‡ä»¤ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ å‘Šè¯‰Agentï¼šâ€œå¸®æˆ‘åˆ†æä¸€ä¸‹æ–°èƒ½æºæ±½è½¦å¸‚åœºçš„æœ€æ–°è¶‹åŠ¿ï¼Œå¹¶åœ¨å‘¨äº”å‰å‡†å¤‡ä¸€ä»½10é¡µçš„æŠ¥å‘Šâ€ã€‚ä¸€ä¸ªçœŸæ­£çš„AI Agentä¼šè‡ªä¸»å®Œæˆï¼šæœç´¢æœ€æ–°è¡Œä¸šæ•°æ®ã€åˆ†æç«äº‰å¯¹æ‰‹ä¿¡æ¯ã€åˆ¶ä½œå›¾è¡¨å¹¶ç”Ÿæˆå®Œæ•´æŠ¥å‘Šã€‚</p>
<h2 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>æ ¸å¿ƒå¼€å‘å±‚æ¬¡å…¨è§£æ</h2>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç¼–ç¨‹ä¸æç¤ºå·¥ç¨‹</h3>
<p>ä»»ä½•AI Agentå¼€å‘éƒ½ä»è¿™é‡Œå¼€å§‹ã€‚<strong>Python</strong>ä»ç„¶æ˜¯é¦–é€‰è¯­è¨€ï¼Œä½†JavaScript/TypeScriptçš„ä½¿ç”¨ä¹Ÿåœ¨å¢é•¿ã€‚é™¤äº†åŸºç¡€ç¼–ç¨‹èƒ½åŠ›ï¼Œæç¤ºå·¥ç¨‹æ˜¯å…³é”®æŠ€èƒ½ã€‚</p>

















<table><thead><tr><th>å±‚æ¬¡åç§°</th><th>å¿…é¡»åš</th><th>å¯é€‰</th><th>å·¥å…·/æŠ€æœ¯</th></tr></thead><tbody><tr><td><strong>ç¼–ç¨‹ä¸æç¤º</strong></td><td>ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚åŸºç¡€è¯­æ³•ï¼‰ï¼›è„šæœ¬ä¸è‡ªåŠ¨åŒ–ï¼ˆå¦‚APIè¯·æ±‚ã€æ–‡ä»¶å¤„ç†ï¼‰ï¼›æç¤ºæ¦‚å¿µï¼ˆå¦‚æç¤ºå·¥ç¨‹ã€æ€ç»´é“¾æç¤ºï¼‰</td><td>å¼‚æ­¥ç¼–ç¨‹ï¼›ç½‘ç»œæŠ“å–ï¼›å¤š Agentæç¤ºï¼›ç›®æ ‡å¯¼å‘æç¤ºï¼›è‡ªæˆ‘æ‰¹åˆ¤ä¸é‡è¯•å¾ªç¯ï¼›åæ€å¾ªç¯</td><td>Pythonï¼ˆé¦–é€‰ï¼‰ï¼›JavaScriptï¼›TypeScriptï¼›Shell/Bashï¼›HTTP/JSONåº“ï¼ˆå¦‚requests in Pythonï¼‰ï¼›æ–‡ä»¶å¤„ç†åº“ï¼ˆå¦‚os, pathlibï¼‰ï¼›å¼‚æ­¥åº“ï¼ˆå¦‚asyncioï¼‰ï¼›ç½‘ç»œæŠ“å–åº“ï¼ˆå¦‚BeautifulSoup, Scrapyï¼‰</td></tr></tbody></table>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>AI AgentåŸºç¡€æ¶æ„</h3>
<p>ç†è§£AI Agentçš„åŸºæœ¬æ„æˆè¦ç´ æ˜¯æ ¸å¿ƒï¼šLLMä½œä¸º Agentçš„å¤§è„‘ï¼Œè´Ÿè´£å†³ç­–å’Œæ¨ç†ï¼›å·¥å…·ä½œä¸ºAgentçš„æ‰‹è„šï¼Œå…è®¸å®ƒä¸å¤–ç•Œäº¤äº’ï¼›è®°å¿†ç³»ç»Ÿå­˜å‚¨Agentçš„ç»éªŒï¼›è§„åˆ’å™¨è´Ÿè´£åˆ¶å®šå’Œæ‰§è¡Œè®¡åˆ’ã€‚</p>

















<table><thead><tr><th>å±‚æ¬¡åç§°</th><th>å¿…é¡»åš</th><th>å¯é€‰</th><th>å·¥å…·/æŠ€æœ¯</th></tr></thead><tbody><tr><td><strong>AI AgentåŸºç¡€</strong></td><td>AI Agentå®šä¹‰ï¼›è‡ªæ²» vs. åŠè‡ªæ²» Agentï¼› Agentç»„ä»¶ï¼ˆå¦‚LLMã€å·¥å…·ã€è®°å¿†ã€è§„åˆ’å™¨ï¼‰</td><td>Agentæ¶æ„è®¾è®¡</td><td>LangChainï¼ˆ Agentæ¡†æ¶ï¼‰ï¼›LlamaIndexï¼ˆæ•°æ®ç´¢å¼•ä¸ Agentï¼‰ï¼›Haystackï¼ˆæœç´¢ Agentï¼‰ï¼›Semantic Kernelï¼ˆå¾®è½¯ Agentæ¡†æ¶ï¼‰ï¼›AutoGenï¼ˆå¤š Agentï¼‰ï¼›CrewAIï¼ˆå›¢é˜Ÿ Agentï¼‰</td></tr></tbody></table>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>LLMè°ƒç”¨ä¸å·¥å…·é›†æˆ</h3>
<p>LLMè°ƒç”¨æ˜¯Agentå·¥ä½œçš„åŸºç¡€ï¼Œè€Œå·¥å…·è°ƒç”¨åˆ™æ˜¯AgentæŠ€æœ¯çš„æ€æ‰‹çº§åŠŸèƒ½ã€‚é€šè¿‡å·¥å…·ï¼ŒAgentå¯ä»¥æ‰§è¡Œä»£ç è®¡ç®—ã€è¿›è¡Œç½‘ç»œæœç´¢ã€æŸ¥è¯¢æ•°æ®åº“ã€æ“ä½œæµè§ˆå™¨å’Œè°ƒç”¨ä»»ä½•APIæ¥å£ã€‚</p>























<table><thead><tr><th>å±‚æ¬¡åç§°</th><th>å¿…é¡»åš</th><th>å¯é€‰</th><th>å·¥å…·/æŠ€æœ¯</th></tr></thead><tbody><tr><td><strong>LLMè°ƒç”¨</strong></td><td>LLM APIè°ƒç”¨ï¼›æç¤ºæ¨¡æ¿ï¼ˆå¦‚åŠ¨æ€æç¤ºã€æ¡ä»¶æç¤ºï¼‰</td><td>é«˜çº§è°ƒç”¨ï¼ˆå¦‚æµå¼ä¼ è¾“ã€æ‰¹é‡/å¹¶è¡Œè°ƒç”¨ã€å›è°ƒ/é’©å­ï¼‰ï¼›æç¤ºé“¾</td><td>OpenAI APIï¼›Anthropic APIï¼›Google AIï¼›Cohereï¼›Grokï¼›æœ¬åœ°LLMï¼ˆå¦‚Ollama, LM Studioï¼‰ï¼›LangChainçš„LLMé›†æˆæ¨¡å—</td></tr><tr><td><strong>å·¥å…·è°ƒç”¨</strong></td><td>å·¥å…·é›†æˆï¼ˆå¦‚è‡ªå®šä¹‰å·¥å…·ã€é¢„æ„å»ºå·¥å…·ï¼‰ï¼›å·¥å…·ç±»å‹ï¼ˆå¦‚æœç´¢ã€è®¡ç®—ã€ä»£ç æ‰§è¡Œï¼‰</td><td>æµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼›æ•°æ®åº“æŸ¥è¯¢ï¼›å¤–éƒ¨APIé›†æˆ</td><td>LangChain Toolsï¼›LlamaIndex Toolsï¼›Hugging Face Agentsï¼›Seleniumï¼ˆæµè§ˆå™¨ï¼‰ï¼›SQLAlchemyï¼ˆæ•°æ®åº“ï¼‰ï¼›å„ç§API SDK</td></tr></tbody></table>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>RAGä¸é«˜çº§æ¨ç†</h3>
<p>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æŠ€æœ¯è®©Agentèƒ½å¤Ÿè®¿é—®ç‰¹å®šé¢†åŸŸçŸ¥è¯†ï¼Œè€Œä¸éœ€è¦é‡æ–°è®­ç»ƒæ¨¡å‹ã€‚è§„åˆ’ä¸æ¨ç†èƒ½åŠ›åˆ™å†³å®šäº†Agentå¤„ç†å¤æ‚ä»»åŠ¡çš„æ™ºèƒ½æ°´å¹³ã€‚</p>























<table><thead><tr><th>å±‚æ¬¡åç§°</th><th>å¿…é¡»åš</th><th>å¯é€‰</th><th>å·¥å…·/æŠ€æœ¯</th></tr></thead><tbody><tr><td><strong>æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰</strong></td><td>åµŒå…¥æ¨¡å‹ï¼›å‘é‡å­˜å‚¨ï¼›ç®€å•RAG</td><td>é«˜çº§RAGï¼ˆå¦‚æŸ¥è¯¢é‡å†™ã€é‡æ–°æ’åï¼‰ï¼› AgentRAG</td><td>OpenAI Embeddingsï¼›Sentence Transformersï¼›Cohere Embeddingsï¼›FAISSï¼ˆæœ¬åœ°å‘é‡åº“ï¼‰ï¼›Pinecone/Weaviate/Chroma/Milvusï¼ˆæ‰˜ç®¡å‘é‡DBï¼‰</td></tr><tr><td><strong>è§„åˆ’ä¸æ¨ç†</strong></td><td>è§„åˆ’æŠ€æœ¯ï¼ˆå¦‚ReAct, Plan-and-Solveï¼‰ï¼›æ¨ç†å¼•æ“ï¼ˆå¦‚LLMä½œä¸ºæ¨ç†å™¨ï¼‰</td><td>Tree of Thoughtsï¼›Graph-based Planningï¼›è‡ªé—®è‡ªç­”ï¼›è¾©è®ºå¼æ¨ç†</td><td>LangChainçš„ReActé“¾ï¼›è‡ªå®šä¹‰LLMæ¨ç†æ¨¡å—</td></tr></tbody></table>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å¤šAgentç³»ç»Ÿä¸çŠ¶æ€ç®¡ç†</h3>
<p>å•ä¸ªAgentèƒ½åŠ›æœ‰é™ï¼Œä½†å¤šAgentç³»ç»Ÿå¯ä»¥å®ŒæˆæƒŠäººå¤æ‚çš„ä»»åŠ¡ã€‚è®°å¿†ä¸çŠ¶æ€ç®¡ç†ç¡®ä¿äº†Agentèƒ½å¤Ÿä¿æŒè¿ç»­æ€§å’Œå­¦ä¹ èƒ½åŠ›ã€‚</p>























<table><thead><tr><th>å±‚æ¬¡åç§°</th><th>å¿…é¡»åš</th><th>å¯é€‰</th><th>å·¥å…·/æŠ€æœ¯</th></tr></thead><tbody><tr><td><strong>å¤š Agentç³»ç»Ÿ</strong></td><td>Agentåä½œï¼ˆå¦‚åˆ†å±‚ Agentã€è¾©è®º Agentï¼‰</td><td>åˆä½œ Agent</td><td>AutoGenï¼›CrewAIï¼›Multi-Agent LangChain</td></tr><tr><td><strong>è®°å¿†ä¸çŠ¶æ€ç®¡ç†</strong></td><td>è®°å¿†ç±»å‹ï¼ˆå¦‚çŸ­æœŸ/é•¿æœŸè®°å¿†ã€å…±äº«è®°å¿†ï¼‰ï¼›çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ä¼šè¯çŠ¶æ€ï¼‰</td><td>æŒä¹…åŒ–çŠ¶æ€</td><td>Redisï¼ˆç¼“å­˜è®°å¿†ï¼‰ï¼›SQL Databasesï¼ˆå¦‚SQLite/PostgreSQLï¼‰ï¼›Vector Stores for Memoryï¼ˆå¦‚Pineconeç”¨äºé•¿æœŸè®°å¿†ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç”¨æˆ·ç•Œé¢ä¸éƒ¨ç½²</h3>
<p>ä¼˜ç§€çš„ç”¨æˆ·ç•Œé¢è®©Agentèƒ½åŠ›æ›´å®¹æ˜“è¢«ä½¿ç”¨è€…æ¥å—ï¼Œè€Œç¨³å¥çš„éƒ¨ç½²æ–¹æ¡ˆæ˜¯ç”Ÿäº§ç¯å¢ƒåº”ç”¨çš„åŸºç¡€ã€‚</p>























<table><thead><tr><th>å±‚æ¬¡åç§°</th><th>å¿…é¡»åš</th><th>å¯é€‰</th><th>å·¥å…·/æŠ€æœ¯</th></tr></thead><tbody><tr><td><strong>ç”¨æˆ·ç•Œé¢</strong></td><td>UIæ¡†æ¶ï¼›äº¤äº’ï¼ˆå¦‚èŠå¤©ç•Œé¢ï¼‰</td><td>å¤šæ¨¡æ€è¾“å…¥ï¼›å®æ—¶åé¦ˆ</td><td>Streamlit/Gradio/Chainlitï¼ˆå¿«é€ŸåŸå‹ï¼‰ï¼›Flask/Djangoï¼ˆåç«¯UIï¼‰ï¼›React/Vueï¼ˆå‰ç«¯UIï¼‰</td></tr><tr><td><strong>éƒ¨ç½²</strong></td><td>APIéƒ¨ç½²ï¼›Agentæ‰˜ç®¡æœåŠ¡</td><td>æ— æœåŠ¡å™¨å‡½æ•°ï¼›å‘é‡DBæ‰˜ç®¡</td><td>FastAPI/Streamlit/Gradioï¼ˆAPI/UIï¼‰ï¼›Dockerï¼›Kubernetesï¼›Replit/Modalï¼ˆæ‰˜ç®¡ï¼‰ï¼›Pineconeç­‰å‘é‡DBæœåŠ¡</td></tr></tbody></table>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç›‘æ§è¯„ä¼°ä¸å®‰å…¨æ²»ç†</h3>
<p>éšç€Agentèƒ½åŠ›å¢å¼ºï¼Œç›‘æ§è¯„ä¼°å’Œå®‰å…¨æ²»ç†å˜å¾—è‡³å…³é‡è¦ã€‚è¿™ä¸ä»…å…³ç³»åˆ°ç³»ç»Ÿç¨³å®šæ€§ï¼Œä¹Ÿæ¶‰åŠåˆ°ä¼¦ç†å’Œæ³•å¾‹åˆè§„é—®é¢˜ã€‚</p>























<table><thead><tr><th>å±‚æ¬¡åç§°</th><th>å¿…é¡»åš</th><th>å¯é€‰</th><th>å·¥å…·/æŠ€æœ¯</th></tr></thead><tbody><tr><td><strong>ç›‘æ§ä¸è¯„ä¼°</strong></td><td>Agentè¯„ä¼°æŒ‡æ ‡ï¼›äººæœºç¯è·¯åé¦ˆ</td><td>æ—¥å¿—/è¿½è¸ªï¼›è‡ªåŠ¨è¯„ä¼°å¾ªç¯ï¼›è‡ªå®šä¹‰ä»ªè¡¨æ¿</td><td>LangSmithï¼ˆLangChainç›‘æ§ï¼‰ï¼›OpenTelemetryï¼ˆè¿½è¸ªï¼‰ï¼›Prometheus/Grafanaï¼ˆæŒ‡æ ‡ç›‘æ§ï¼‰</td></tr><tr><td><strong>å®‰å…¨ä¸æ²»ç†</strong></td><td>æç¤ºæ³¨å…¥ä¿æŠ¤ï¼›APIå¯†é’¥ç®¡ç†ï¼›ç”¨æˆ·è®¤è¯</td><td>åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ï¼›è¾“å‡ºè¿‡æ»¤ï¼›çº¢é˜Ÿæµ‹è¯•ï¼›æ•°æ®éšç§ä¸åˆè§„</td><td>è‡ªå®šä¹‰é˜²æŠ¤æç¤ºï¼›å¯†é’¥ç®¡ç†å·¥å…·ï¼ˆå¦‚Vaultï¼‰ï¼›Auth0/OAuthï¼ˆè®¤è¯ï¼‰ï¼›RBACåº“ï¼ˆå¦‚Casbinï¼‰ï¼›åˆè§„æ¨¡å—ï¼ˆå¦‚GDPRå·¥å…·ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2025å¹´è¶‹åŠ¿å±•æœ›</h2>
<ul>
<li>æœ¬åœ°åŒ–éƒ¨ç½²ï¼ˆOllamaç­‰å·¥å…·è®©æœ¬åœ°è¿è¡Œå¤§æ¨¡å‹æˆä¸ºå¯èƒ½ï¼‰</li>
<li>å¤šæ¨¡æ€èåˆï¼ˆAgentä¸ä»…èƒ½å¤„ç†æ–‡æœ¬ï¼Œè¿˜èƒ½ç†è§£å›¾åƒã€éŸ³é¢‘ï¼‰</li>
<li>ä¸“ä¸šåŒ–å‘å±•ï¼ˆé¢†åŸŸç‰¹å®šAgentå°†è¶…è¿‡é€šç”¨Agentï¼‰</li>
<li>å®‰å…¨ä¼˜å…ˆï¼ˆéšç€åº”ç”¨æ·±å…¥ï¼Œå®‰å…¨æ€§å°†æˆä¸ºæ ¸å¿ƒè€ƒé‡ï¼‰</li>
</ul>
<h2 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å¦‚ä½•å¼€å§‹ä½ çš„AI Agentå¼€å‘ä¹‹æ—…ï¼Ÿ</h2>
<p>å¦‚æœä½ æ˜¯åˆå­¦è€…ï¼Œå»ºè®®æŒ‰ç…§ä»¥ä¸‹è·¯å¾„å­¦ä¹ ï¼š</p>
<ol>
<li>æŒæ¡PythonåŸºç¡€å’ŒAPIè°ƒç”¨ï¼›</li>
<li>å­¦ä¹ æç¤ºå·¥ç¨‹åŸºç¡€ï¼›</li>
<li>å°è¯•LangChainç­‰æ¡†æ¶æ„å»ºç®€å•Agentï¼›</li>
<li>é›†æˆå·¥å…·æ‰©å±•Agentèƒ½åŠ›ï¼›</li>
<li>æ·»åŠ RAGæä¾›ä¸“ä¸šçŸ¥è¯†ï¼›</li>
<li>æ¢ç´¢å¤šAgentåä½œåœºæ™¯ã€‚</li>
</ol>
<p>å¯¹äºæœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œå¯ä»¥é‡ç‚¹å…³æ³¨ï¼š</p>
<ul>
<li>é«˜çº§è§„åˆ’ä¸æ¨ç†æŠ€æœ¯</li>
<li>å¤šAgentç³»ç»Ÿæ¶æ„</li>
<li>ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ä¸ç›‘æ§</li>
<li>å®‰å…¨ä¸åˆè§„æ¡†æ¶ã€‚</li>
</ul>
<h2 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç»“è¯­</h2>
<p>AI AgentæŠ€æœ¯æ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œ2025å¹´å°†æ˜¯å…³é”®çš„ä¸€å¹´ã€‚éšç€æŠ€æœ¯çš„æˆç†Ÿå’Œå·¥å…·çš„å®Œå–„ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°è¶Šæ¥è¶Šå¤šå¼ºå¤§çš„AI Agentåº”ç”¨äºå„è¡Œå„ä¸šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4b176255d314fa9ae88dc471240c0cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767073761&amp;x-signature=0Lcr91TSdQf3qbkIApBFFOiUv6g%3D" alt="" loading="lazy"/><br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/197af662905346f4b646cc02cf9d162f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767073761&amp;x-signature=P2ErydDJAdVl7S5RJjq2CT7OGcY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLç´¢å¼•è®¾è®¡é¿å‘æŒ‡å—ï¼šè¿™äº›é”™è¯¯åˆ«å†çŠ¯äº†]]></title>    <link>https://juejin.cn/post/7586622708998684712</link>    <guid>https://juejin.cn/post/7586622708998684712</guid>    <pubDate>2025-12-23T05:48:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586622708998684712" data-draft-id="7586615716906336256" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLç´¢å¼•è®¾è®¡é¿å‘æŒ‡å—ï¼šè¿™äº›é”™è¯¯åˆ«å†çŠ¯äº†"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2025-12-23T05:48:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜»å“ˆbaby"/> <meta itemprop="url" content="https://juejin.cn/user/485305583405066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLç´¢å¼•è®¾è®¡é¿å‘æŒ‡å—ï¼šè¿™äº›é”™è¯¯åˆ«å†çŠ¯äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/485305583405066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜»å“ˆbaby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:48:14.000Z" title="Tue Dec 23 2025 05:48:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŒäº‹å†™äº†ä¸ªSQLï¼Œç”Ÿäº§ç¯å¢ƒè·‘äº†8ç§’ï¼Œè¢«DBAè¿½ç€éª‚ã€‚</p>
<p>ä¸€çœ‹æ‰§è¡Œè®¡åˆ’ï¼Œå…¨è¡¨æ‰«æï¼Œ100ä¸‡è¡Œæ•°æ®ä¸€è¡Œè¡Œæ‰«ã€‚</p>
<p>"ä¸æ˜¯åŠ äº†ç´¢å¼•å—ï¼Ÿ"
"åŠ äº†ï¼Œä½†æ²¡ç”¨ä¸Šã€‚"</p>
<p>ç´¢å¼•è¿™ä¸œè¥¿ï¼ŒåŠ å¾—ä¸å¯¹æ¯”ä¸åŠ è¿˜ç³Ÿç³•ã€‚æ•´ç†ä¸€ä¸‹å¸¸è§çš„ç´¢å¼•å‘ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ç´¢å¼•å¤±æ•ˆçš„å¸¸è§åœºæ™¯</h2>
<h3 data-id="heading-1">1.1 å¯¹ç´¢å¼•åˆ—åšå‡½æ•°è¿ç®—</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç´¢å¼•å¤±æ•ˆ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">YEAR</span>(create_time) <span class="hljs-operator">=</span> <span class="hljs-number">2024</span>;

<span class="hljs-comment">-- ç´¢å¼•ç”Ÿæ•ˆ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01'</span> <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-01-01'</span>;
</code></pre>
<p>å¯¹ç´¢å¼•åˆ—ç”¨å‡½æ•°ï¼Œä¼˜åŒ–å™¨æ²¡æ³•ç”¨ç´¢å¼•ã€‚</p>
<p>åŒç†ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¤±æ•ˆ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> <span class="hljs-built_in">UPPER</span>(username) <span class="hljs-operator">=</span> <span class="hljs-string">'ADMIN'</span>;

<span class="hljs-comment">-- å¦‚æœç»å¸¸è¿™æ ·æŸ¥ï¼Œå»ºå‡½æ•°ç´¢å¼•ï¼ˆMySQL 8.0+ï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_username_upper <span class="hljs-keyword">ON</span> users ((<span class="hljs-built_in">UPPER</span>(username)));
</code></pre>
<h3 data-id="heading-2">1.2 éšå¼ç±»å‹è½¬æ¢</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- phoneæ˜¯varcharç±»å‹</span>
<span class="hljs-comment">-- å¤±æ•ˆï¼šä¼ å…¥æ•°å­—ï¼Œä¼šå‘ç”Ÿéšå¼è½¬æ¢</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> phone <span class="hljs-operator">=</span> <span class="hljs-number">13812345678</span>;

<span class="hljs-comment">-- ç”Ÿæ•ˆï¼šä¼ å…¥å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> phone <span class="hljs-operator">=</span> <span class="hljs-string">'13812345678'</span>;
</code></pre>
<p>ç±»å‹ä¸åŒ¹é…ï¼ŒMySQLä¼šåšéšå¼è½¬æ¢ï¼Œç›¸å½“äºå¯¹åˆ—åšäº†å‡½æ•°æ“ä½œã€‚</p>
<h3 data-id="heading-3">1.3 å‰å¯¼æ¨¡ç³ŠæŸ¥è¯¢</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¤±æ•ˆ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'%æ‰‹æœº%'</span>;

<span class="hljs-comment">-- ç”Ÿæ•ˆï¼ˆå‰ç¼€åŒ¹é…ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'æ‰‹æœº%'</span>;
</code></pre>
<p><code>%</code>æ”¾å‰é¢ï¼Œæ²¡æ³•ç”¨B+æ ‘çš„æœ‰åºæ€§ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ç”¨å…¨æ–‡ç´¢å¼•</li>
<li>ç”¨Elasticsearch</li>
</ul>
<h3 data-id="heading-4">1.4 ORæ¡ä»¶</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å‡è®¾åªæœ‰nameæœ‰ç´¢å¼•ï¼Œageæ²¡æœ‰</span>
<span class="hljs-comment">-- å¤±æ•ˆ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span> <span class="hljs-keyword">OR</span> age <span class="hljs-operator">=</span> <span class="hljs-number">25</span>;

<span class="hljs-comment">-- è§£å†³æ–¹æ¡ˆ1ï¼šç»™ageä¹ŸåŠ ç´¢å¼•</span>
<span class="hljs-comment">-- è§£å†³æ–¹æ¡ˆ2ï¼šæ”¹æˆUNION</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span>
<span class="hljs-keyword">UNION</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">=</span> <span class="hljs-number">25</span>;
</code></pre>
<p>ORæ¡ä»¶ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œé™¤éORä¸¤è¾¹çš„åˆ—éƒ½æœ‰ç´¢å¼•ã€‚</p>
<h3 data-id="heading-5">1.5 ä¸ç­‰äºæ¡ä»¶</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¯èƒ½å¤±æ•ˆï¼ˆå–å†³äºæ•°æ®åˆ†å¸ƒï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">!=</span> <span class="hljs-string">'completed'</span>;

<span class="hljs-comment">-- å¦‚æœstatusåªæœ‰å‡ ä¸ªå€¼ï¼Œè€ƒè™‘æ”¹æˆ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-keyword">IN</span> (<span class="hljs-string">'pending'</span>, <span class="hljs-string">'processing'</span>, <span class="hljs-string">'failed'</span>);
</code></pre>
<p><code>!=</code>å’Œ<code>NOT IN</code>é€šå¸¸æ— æ³•åˆ©ç”¨ç´¢å¼•ï¼Œæˆ–è€…å³ä½¿ç”¨äº†ä¹Ÿæ˜¯å…¨ç´¢å¼•æ‰«æã€‚</p>
<h2 data-id="heading-6">äºŒã€è”åˆç´¢å¼•çš„å‘</h2>
<h3 data-id="heading-7">2.1 æœ€å·¦å‰ç¼€åŸåˆ™</h3>
<p>å‡è®¾æœ‰ç´¢å¼•ï¼š<code>idx_abc (a, b, c)</code></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç”Ÿæ•ˆ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> b <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> b <span class="hljs-operator">=</span> <span class="hljs-number">2</span> <span class="hljs-keyword">AND</span> c <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> c <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;  <span class="hljs-comment">-- åªç”¨åˆ°a</span>

<span class="hljs-comment">-- å¤±æ•ˆ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> b <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> c <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> b <span class="hljs-operator">=</span> <span class="hljs-number">2</span> <span class="hljs-keyword">AND</span> c <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
</code></pre>
<p>è”åˆç´¢å¼•å¿…é¡»ä»æœ€å·¦åˆ—å¼€å§‹ä½¿ç”¨ï¼Œä¸­é—´ä¸èƒ½è·³è¿‡ã€‚</p>
<h3 data-id="heading-8">2.2 èŒƒå›´æŸ¥è¯¢åçš„åˆ—å¤±æ•ˆ</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç´¢å¼•ï¼šidx_abc (a, b, c)</span>

<span class="hljs-comment">-- cç”¨ä¸åˆ°ç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> b <span class="hljs-operator">&gt;</span> <span class="hljs-number">10</span> <span class="hljs-keyword">AND</span> c <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;

<span class="hljs-comment">-- éƒ½èƒ½ç”¨åˆ°</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> b <span class="hljs-operator">=</span> <span class="hljs-number">10</span> <span class="hljs-keyword">AND</span> c <span class="hljs-operator">&gt;</span> <span class="hljs-number">3</span>;
</code></pre>
<p>èŒƒå›´æŸ¥è¯¢ï¼ˆ&gt;, &lt;, BETWEEN, LIKEï¼‰ä¼šç»ˆæ­¢åç»­åˆ—çš„ç´¢å¼•ä½¿ç”¨ã€‚</p>
<p>è®¾è®¡ç´¢å¼•æ—¶ï¼ŒæŠŠç­‰å€¼æŸ¥è¯¢çš„åˆ—æ”¾å‰é¢ï¼ŒèŒƒå›´æŸ¥è¯¢çš„åˆ—æ”¾åé¢ã€‚</p>
<h3 data-id="heading-9">2.3 ç´¢å¼•åˆ—é¡ºåº</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢1ï¼šé«˜é¢‘</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'pending'</span>;

<span class="hljs-comment">-- æŸ¥è¯¢2ï¼šä½é¢‘  </span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'pending'</span>;

<span class="hljs-comment">-- æ­£ç¡®è®¾è®¡ï¼šuser_idæ”¾å‰é¢</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_status <span class="hljs-keyword">ON</span> orders (user_id, status);

<span class="hljs-comment">-- å¦‚æœåè¿‡æ¥ï¼ŒæŸ¥è¯¢1èƒ½ç”¨ï¼Œä½†æŸ¥è¯¢1æ•ˆç‡å·®ï¼ˆè¦æ‰«æå¾ˆå¤šuser_idï¼‰</span>
</code></pre>
<p>é«˜é¢‘æŸ¥è¯¢çš„æ¡ä»¶åˆ—æ”¾å‰é¢ï¼ŒåŒºåˆ†åº¦é«˜çš„åˆ—æ”¾å‰é¢ã€‚</p>
<h2 data-id="heading-10">ä¸‰ã€è¦†ç›–ç´¢å¼•</h2>
<h3 data-id="heading-11">3.1 ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç´¢å¼•ï¼šidx_user_id_name (user_id, name)</span>

<span class="hljs-comment">-- è¦†ç›–ç´¢å¼•ï¼šæŸ¥è¯¢çš„åˆ—éƒ½åœ¨ç´¢å¼•é‡Œï¼Œä¸ç”¨å›è¡¨</span>
<span class="hljs-keyword">SELECT</span> user_id, name <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- éè¦†ç›–ï¼šéœ€è¦å›è¡¨å–phone</span>
<span class="hljs-keyword">SELECT</span> user_id, name, phone <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p>è¦†ç›–ç´¢å¼•é¿å…å›è¡¨ï¼Œæ€§èƒ½æ›´å¥½ã€‚</p>
<h3 data-id="heading-12">3.2 åˆ©ç”¨è¦†ç›–ç´¢å¼•ä¼˜åŒ–COUNT</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ…¢ï¼šéœ€è¦æ‰«æä¸»é”®ç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> users;

<span class="hljs-comment">-- å¿«ï¼šé€‰æ‹©æœ€å°çš„äºŒçº§ç´¢å¼•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> users FORCE INDEX(idx_status);
</code></pre>
<p>MySQLä¼šè‡ªåŠ¨é€‰æ‹©æœ€å°çš„ç´¢å¼•æ¥COUNTï¼Œä½†æœ‰æ—¶é€‰é”™äº†éœ€è¦æ‰‹åŠ¨æŒ‡å®šã€‚</p>
<h2 data-id="heading-13">å››ã€ç´¢å¼•è®¾è®¡åŸåˆ™</h2>
<h3 data-id="heading-14">4.1 é€‰æ‹©æ€§é«˜çš„åˆ—ä¼˜å…ˆ</h3>
<p>é€‰æ‹©æ€§ = ä¸é‡å¤çš„å€¼ / æ€»è¡Œæ•°</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹åˆ—çš„é€‰æ‹©æ€§</span>
<span class="hljs-keyword">SELECT</span> 
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> status) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> status_selectivity,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> user_id) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> user_id_selectivity
<span class="hljs-keyword">FROM</span> orders;

<span class="hljs-comment">-- å‡è®¾ç»“æœ</span>
<span class="hljs-comment">-- status_selectivity: 0.0001ï¼ˆ5ä¸ªçŠ¶æ€/10ä¸‡è¡Œï¼‰</span>
<span class="hljs-comment">-- user_id_selectivity: 0.8ï¼ˆ8ä¸‡ç”¨æˆ·/10ä¸‡è¡Œï¼‰</span>
</code></pre>
<p>user_idé€‰æ‹©æ€§é«˜ï¼Œæ›´é€‚åˆå»ºç´¢å¼•ã€‚</p>
<p>statusé€‰æ‹©æ€§ä½ï¼Œå•ç‹¬å»ºç´¢å¼•æ„ä¹‰ä¸å¤§ã€‚</p>
<h3 data-id="heading-15">4.2 çŸ­ç´¢å¼•ä¼˜å…ˆ</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¯¹äºå¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åªç´¢å¼•å‰ç¼€</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_title <span class="hljs-keyword">ON</span> articles (title(<span class="hljs-number">20</span>));

<span class="hljs-comment">-- ç¡®å®šå‰ç¼€é•¿åº¦ï¼šä¿è¯è¶³å¤Ÿçš„é€‰æ‹©æ€§</span>
<span class="hljs-keyword">SELECT</span> 
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">LEFT</span>(title, <span class="hljs-number">10</span>)) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> sel_10,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> <span class="hljs-keyword">LEFT</span>(title, <span class="hljs-number">20</span>)) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> sel_20,
    <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">DISTINCT</span> title) <span class="hljs-operator">/</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> sel_full
<span class="hljs-keyword">FROM</span> articles;
</code></pre>
<p>å‰ç¼€ç´¢å¼•æ›´çŸ­ï¼ŒåŒæ ·ç©ºé—´èƒ½å­˜æ›´å¤šæ•°æ®ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
<h3 data-id="heading-16">4.3 é¿å…å†—ä½™ç´¢å¼•</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å†—ä½™ï¼šidx_aå·²ç»è¢«idx_abè¦†ç›–</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_a <span class="hljs-keyword">ON</span> t (a);
<span class="hljs-keyword">CREATE</span> INDEX idx_ab <span class="hljs-keyword">ON</span> t (a, b);

<span class="hljs-comment">-- ä¸å†—ä½™ï¼šidx_baçš„é¡ºåºä¸åŒ</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_ab <span class="hljs-keyword">ON</span> t (a, b);
<span class="hljs-keyword">CREATE</span> INDEX idx_ba <span class="hljs-keyword">ON</span> t (b, a);
</code></pre>
<p>å®šæœŸæ£€æŸ¥å†—ä½™ç´¢å¼•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- MySQL 8.0+</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sys.schema_redundant_indexes;
</code></pre>
<h3 data-id="heading-17">4.4 é¿å…è¿‡åº¦ç´¢å¼•</h3>
<p>ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼š</p>
<ul>
<li>å ç”¨ç£ç›˜ç©ºé—´</li>
<li>æ’å…¥/æ›´æ–°/åˆ é™¤éƒ½è¦ç»´æŠ¤ç´¢å¼•</li>
<li>ä¼˜åŒ–å™¨é€‰æ‹©å›°éš¾</li>
</ul>
<p>ä¸€èˆ¬ä¸€ä¸ªè¡¨ä¸è¶…è¿‡5-6ä¸ªç´¢å¼•ã€‚</p>
<h2 data-id="heading-18">äº”ã€EXPLAINçœ‹æ‰§è¡Œè®¡åˆ’</h2>
<h3 data-id="heading-19">5.1 å…³é”®å­—æ®µ</h3>
<pre><code class="hljs language-sql" lang="sql">EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>






























<table><thead><tr><th>å­—æ®µ</th><th>å«ä¹‰</th><th>å…³æ³¨ç‚¹</th></tr></thead><tbody><tr><td>type</td><td>è®¿é—®ç±»å‹</td><td>const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; ALL</td></tr><tr><td>key</td><td>å®é™…ä½¿ç”¨çš„ç´¢å¼•</td><td>æ˜¯å¦ç”¨åˆ°é¢„æœŸç´¢å¼•</td></tr><tr><td>rows</td><td>é¢„ä¼°æ‰«æè¡Œæ•°</td><td>è¶Šå°è¶Šå¥½</td></tr><tr><td>Extra</td><td>é¢å¤–ä¿¡æ¯</td><td>Using indexå¥½ï¼ŒUsing filesort/temporaryä¸å¥½</td></tr></tbody></table>
<h3 data-id="heading-20">5.2 å¸¸è§typeè§£é‡Š</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ALLï¼šå…¨è¡¨æ‰«æï¼Œæœ€å·®</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">=</span> <span class="hljs-number">25</span>;  <span class="hljs-comment">-- ageæ²¡ç´¢å¼•</span>

<span class="hljs-comment">-- indexï¼šå…¨ç´¢å¼•æ‰«æ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> id <span class="hljs-keyword">FROM</span> users;

<span class="hljs-comment">-- rangeï¼šèŒƒå›´æ‰«æ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span>;

<span class="hljs-comment">-- refï¼šéå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- eq_refï¼šå”¯ä¸€ç´¢å¼•ç­‰å€¼æŸ¥è¯¢</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- constï¼šä¸»é”®/å”¯ä¸€ç´¢å¼•ç­‰å€¼ï¼Œæœ€å¤šä¸€è¡Œ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<h3 data-id="heading-21">5.3 Extraä¿¡æ¯</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- Using indexï¼šè¦†ç›–ç´¢å¼•ï¼Œå¥½</span>
<span class="hljs-comment">-- Using whereï¼šç”¨äº†WHEREè¿‡æ»¤ï¼Œæ­£å¸¸</span>
<span class="hljs-comment">-- Using temporaryï¼šç”¨äº†ä¸´æ—¶è¡¨ï¼Œéœ€è¦ä¼˜åŒ–</span>
<span class="hljs-comment">-- Using filesortï¼šç”¨äº†æ–‡ä»¶æ’åºï¼Œéœ€è¦ä¼˜åŒ–</span>
</code></pre>
<p>çœ‹åˆ°Using temporaryæˆ–Using filesortï¼ŒåŸºæœ¬éƒ½è¦ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-22">å…­ã€çœŸå®æ¡ˆä¾‹</h2>
<h3 data-id="heading-23">æ¡ˆä¾‹1ï¼šè®¢å•æŸ¥è¯¢ä¼˜åŒ–</h3>
<p>åŸSQLï¼ˆæ‰§è¡Œ8ç§’ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">12345</span> 
  <span class="hljs-keyword">AND</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'pending'</span>
  <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&gt;</span> <span class="hljs-string">'2024-01-01'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">20</span>;
</code></pre>
<p>EXPLAINæ˜¾ç¤ºï¼š</p>
<ul>
<li>type: ALL</li>
<li>rows: 1000000</li>
<li>Extra: Using where; Using filesort</li>
</ul>
<p>é—®é¢˜ï¼šæ²¡ç”¨åˆ°ç´¢å¼•ï¼Œå…¨è¡¨æ‰«æ+æ–‡ä»¶æ’åºã€‚</p>
<p>ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å»ºç«‹è”åˆç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_status_time <span class="hljs-keyword">ON</span> orders (user_id, status, create_time);
</code></pre>
<p>ä¼˜åŒ–åEXPLAINï¼š</p>
<ul>
<li>type: range</li>
<li>rows: 234</li>
<li>Extra: Using index condition</li>
</ul>
<p>æ‰§è¡Œæ—¶é—´ï¼š8ms</p>
<h3 data-id="heading-24">æ¡ˆä¾‹2ï¼šåˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–</h3>
<p>åŸSQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> logs <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> id <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">100000</span>, <span class="hljs-number">20</span>;
</code></pre>
<p>é—®é¢˜ï¼šæ·±åˆ†é¡µï¼Œè¦æ‰«æ10ä¸‡è¡Œå†ä¸¢å¼ƒã€‚</p>
<p>ä¼˜åŒ–æ–¹æ¡ˆ1ï¼šè®°å½•ä¸Šæ¬¡ID</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å‰ç«¯ä¼ ä¸Šä¸€é¡µæœ€å°ID</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> logs <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&lt;</span> <span class="hljs-number">12345678</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> id <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">20</span>;
</code></pre>
<p>ä¼˜åŒ–æ–¹æ¡ˆ2ï¼šå»¶è¿Ÿå…³è”</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> l.<span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> logs l
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> (
    <span class="hljs-keyword">SELECT</span> id <span class="hljs-keyword">FROM</span> logs <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> id <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">100000</span>, <span class="hljs-number">20</span>
) <span class="hljs-keyword">AS</span> t <span class="hljs-keyword">ON</span> l.id <span class="hljs-operator">=</span> t.id;
</code></pre>
<p>å­æŸ¥è¯¢åªæŸ¥IDï¼ˆè¦†ç›–ç´¢å¼•ï¼‰ï¼Œå†å…³è”å–å…¨é‡æ•°æ®ã€‚</p>
<h2 data-id="heading-25"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude CLI ä½¿ç”¨æŒ‡å—ï¼ˆStep by Stepï¼‰]]></title>    <link>https://juejin.cn/post/7586584105741991986</link>    <guid>https://juejin.cn/post/7586584105741991986</guid>    <pubDate>2025-12-23T05:55:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586584105741991986" data-draft-id="7586657335880843291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude CLI ä½¿ç”¨æŒ‡å—ï¼ˆStep by Stepï¼‰"/> <meta itemprop="keywords" content="åç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-23T05:55:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HBLOG"/> <meta itemprop="url" content="https://juejin.cn/user/131597124767479"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude CLI ä½¿ç”¨æŒ‡å—ï¼ˆStep by Stepï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597124767479/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HBLOG
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:55:29.000Z" title="Tue Dec 23 2025 05:55:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸€ç¯‡<strong>ä» 0 åˆ° 1</strong> çš„ Claude CLI ä½¿ç”¨å®æˆ˜æ–‡ç« ï¼Œé€‚åˆï¼š</p>
<ul>
<li>æƒ³æŠŠ Claude å½“æˆã€Œç»ˆç«¯é‡Œçš„ AI å·¥ç¨‹å¸ˆã€</li>
<li>å¸Œæœ›ç”¨ AI è¾…åŠ©å†™ä»£ç ã€æ”¹ä»£ç ã€åˆ†æé¡¹ç›®</li>
<li>ä¸æƒ³å†é¢‘ç¹å¤åˆ¶ç²˜è´´åˆ°ç½‘é¡µèŠå¤©æ¡†çš„å¼€å‘è€…</li>
</ul>
<h2 data-id="heading-0">ä¸€ã€Claude CLI æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p><strong>Claude CLI</strong> æ˜¯ Anthropic å®˜æ–¹æä¾›çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œè®©ä½ å¯ä»¥åœ¨ç»ˆç«¯é‡Œç›´æ¥ä½¿ç”¨ Claudeï¼ˆAI å¤§æ¨¡å‹ï¼‰ï¼Œç”¨äºï¼š</p>
<ul>
<li>é˜…è¯» / åˆ†ææ•´ä¸ªä»£ç ä»“åº“</li>
<li>è‡ªåŠ¨ç”Ÿæˆæˆ–ä¿®æ”¹ä»£ç </li>
<li>å†™æŠ€æœ¯æ–‡æ¡£ã€READMEã€æ³¨é‡Š</li>
<li>åšæ¶æ„åˆ†æã€Bug æ’æŸ¥</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p><strong>æŠŠ Claude å˜æˆä½ é¡¹ç›®ç›®å½•é‡Œçš„â€œæ™ºèƒ½åˆä¼™äººâ€</strong></p>
</blockquote>
<h2 data-id="heading-1">äºŒã€ä½¿ç”¨å‰å‡†å¤‡ï¼ˆPrerequisitesï¼‰</h2>
<h3 data-id="heading-2">1ï¸âƒ£ ç¯å¢ƒè¦æ±‚</h3>
<ul>
<li><strong>Node.js â‰¥ 18</strong>ï¼ˆæ¨è 20+ï¼‰</li>
<li>macOS / Linux / Windowsï¼ˆWSL æ¨èï¼‰</li>
</ul>
<p>æ£€æŸ¥ Node ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs">node -v
</code></pre>
<h2 data-id="heading-3">ä¸‰ã€å®‰è£… Claude CLI</h2>
<p>åœ¨ç»ˆç«¯æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @anthropic-ai/claude-cli
</code></pre>
<p>å®‰è£…å®ŒæˆåéªŒè¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">claude <span class="hljs-attr">--version</span>
</code></pre>
<p>å¦‚æœèƒ½çœ‹åˆ°ç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸ âœ…</p>
<h2 data-id="heading-4">å››ã€ç™»å½• / é…ç½® API Key</h2>
<h3 data-id="heading-5">æ–¹å¼ä¸€ï¼šäº¤äº’å¼ç™»å½•ï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs">claude login
</code></pre>
<p>CLI ä¼šå¼•å¯¼ä½ ï¼š</p>
<ol>
<li>æ‰“å¼€æµè§ˆå™¨</li>
<li>ç™»å½• Anthropic è´¦å·</li>
<li>æˆæƒ CLI</li>
</ol>
<h3 data-id="heading-6">æ–¹å¼äºŒï¼šæ‰‹åŠ¨è®¾ç½® API Key</h3>
<pre><code class="hljs language-ini" lang="ini">export <span class="hljs-attr">ANTHROPIC_API_KEY</span>=<span class="hljs-string">"sk-xxxx"</span>
</code></pre>
<p>ï¼ˆWindows PowerShellï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">$env:<span class="hljs-attr">ANTHROPIC_API_KEY</span>=<span class="hljs-string">"sk-xxxx"</span>
</code></pre>
<h3 data-id="heading-7">1ï¸âƒ£ ç›´æ¥å¯¹è¯</h3>
<h2 data-id="heading-8">äº”ã€æœ€åŸºç¡€çš„ç”¨æ³•ï¼ˆHello Worldï¼‰</h2>
<pre><code class="hljs language-arduino" lang="arduino">claude <span class="hljs-string">"ç”¨ä¸€å¥è¯è§£é‡Šä»€ä¹ˆæ˜¯å¾®æœåŠ¡"</span>
</code></pre>
<p>Claude ä¼šç›´æ¥è¿”å›ç­”æ¡ˆã€‚</p>
<h3 data-id="heading-9">2ï¸âƒ£ å¤šè¡Œè¾“å…¥ï¼ˆé€‚åˆå¤æ‚é—®é¢˜ï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash">claude &lt;&lt;<span class="hljs-string">EOF
è¯·ä½ æ‰®æ¼”ä¸€åèµ„æ·± Java æ¶æ„å¸ˆ
åˆ†æ Spring Boot é¡¹ç›®ä¸­å¸¸è§çš„æ€§èƒ½ç“¶é¢ˆ
EOF</span>
</code></pre>
<h2 data-id="heading-10">å…­ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Claudeï¼ˆæ ¸å¿ƒç©æ³•ï¼‰</h2>
<h3 data-id="heading-11">1ï¸âƒ£ è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> your-project
</code></pre>
<p>Claude CLI ä¼š<strong>è‡ªåŠ¨æ„ŸçŸ¥å½“å‰ç›®å½•ç»“æ„å’Œä»£ç æ–‡ä»¶</strong>ã€‚</p>
<h3 data-id="heading-12">2ï¸âƒ£ è®© Claude è¯»ä»£ç </h3>
<pre><code class="hljs language-arduino" lang="arduino">claude <span class="hljs-string">"è¯·åˆ†æå½“å‰é¡¹ç›®çš„æ•´ä½“æ¶æ„"</span>


claude <span class="hljs-string">"è¿™ä¸ªé¡¹ç›®ä¸­æœ‰å“ªäº›æ½œåœ¨çš„æŠ€æœ¯å€ºï¼Ÿ"</span>
</code></pre>
<h3 data-id="heading-13">3ï¸âƒ£ é’ˆå¯¹æŸä¸ªæ–‡ä»¶æé—®</h3>
<pre><code class="hljs language-css" lang="css">claude "åˆ†æ <span class="hljs-attribute">src</span>/<span class="hljs-selector-tag">main</span>/java/UserService<span class="hljs-selector-class">.java</span> çš„è®¾è®¡é—®é¢˜"
</code></pre>
<h2 data-id="heading-14">ä¸ƒã€è®© Claude å¸®ä½ æ”¹ä»£ç ï¼ˆé«˜é˜¶ï¼‰</h2>
<h3 data-id="heading-15">1ï¸âƒ£ ç”Ÿæˆä¿®æ”¹å»ºè®®ï¼ˆä¸ç›´æ¥æ”¹ï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino">claude <span class="hljs-string">"å¸®æˆ‘é‡æ„è¿™ä¸ªé¡¹ç›®ä¸­çš„å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œå¹¶è¯´æ˜åŸå› "</span>
</code></pre>
<h3 data-id="heading-16">2ï¸âƒ£ è‡ªåŠ¨ç”Ÿæˆ Patchï¼ˆDiffï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino">claude --apply <span class="hljs-string">"ä¸ºè¿™ä¸ª Spring Boot é¡¹ç›®å¢åŠ å…¨å±€å¼‚å¸¸å¤„ç†"</span>
</code></pre>
<p>CLI ä¼šï¼š</p>
<ul>
<li>ç”Ÿæˆ diff</li>
<li>è¯¢é—®ä½ æ˜¯å¦ç¡®è®¤åº”ç”¨</li>
</ul>
<p>éå¸¸é€‚åˆ<strong>ç»“å¯¹ç¼–ç¨‹ï¼ˆAI Pair Programmingï¼‰</strong>ã€‚</p>
<h2 data-id="heading-17">å…«ã€å¸¸ç”¨å®æˆ˜åœºæ™¯ç¤ºä¾‹</h2>
<h3 data-id="heading-18">âœ… 1. ç”Ÿæˆ README</h3>
<pre><code class="hljs language-arduino" lang="arduino">claude <span class="hljs-string">"ä¸ºå½“å‰é¡¹ç›®ç”Ÿæˆä¸€ä»½ä¸“ä¸šçš„ README.md"</span>
</code></pre>
<h3 data-id="heading-19">âœ… 2. å†™å•å…ƒæµ‹è¯•</h3>
<pre><code class="hljs language-arduino" lang="arduino">claude <span class="hljs-string">"ä¸º UserService ç¼–å†™å®Œæ•´çš„ JUnit5 å•å…ƒæµ‹è¯•"</span>
</code></pre>
<h3 data-id="heading-20">âœ… 3. ä»£ç è¯„å®¡ï¼ˆCode Reviewï¼‰</h3>
<pre><code class="hljs language-arduino" lang="arduino">claude <span class="hljs-string">"è¯·ä»¥èµ„æ·± Reviewer è§†è§’ Review å½“å‰ä»£ç "</span>
</code></pre>
<h3 data-id="heading-21">âœ… 4. å¿«é€Ÿç†è§£è€é¡¹ç›®</h3>
<pre><code class="hljs language-arduino" lang="arduino">claude <span class="hljs-string">"è¯·ç”¨ 10 åˆ†é’Ÿæ–°åŒäº‹èƒ½çœ‹æ‡‚çš„æ–¹å¼è§£é‡Šè¿™ä¸ªé¡¹ç›®"</span>
</code></pre>
<h2 data-id="heading-22">ä¹ã€Claude CLI å¸¸ç”¨å‚æ•°é€ŸæŸ¥</h2>
<p>å‘½ä»¤</p>
<p>è¯´æ˜</p>
<p><code>claude "prompt"</code></p>
<p>å•æ¬¡æé—®</p>
<p><code>claude login</code></p>
<p>ç™»å½•æˆæƒ</p>
<p><code>claude --apply</code></p>
<p>åº”ç”¨ä»£ç ä¿®æ”¹</p>
<p><code>claude --help</code></p>
<p>æŸ¥çœ‹å¸®åŠ©</p>
<h2 data-id="heading-23">åã€ä½¿ç”¨æŠ€å·§ &amp; æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-24">ğŸ’¡ 1. æç¤ºè¯è¦â€œå·¥ç¨‹åŒ–â€</h3>
<p>âŒ ä¸æ¨èï¼š</p>
<blockquote>
<p>å¸®æˆ‘çœ‹çœ‹ä»£ç </p>
</blockquote>
<p>âœ… æ¨èï¼š</p>
<blockquote>
<p>ä»¥é«˜å¹¶å‘åœºæ™¯ä¸ºç›®æ ‡ï¼Œåˆ†æè¯¥ä»£ç çš„çº¿ç¨‹å®‰å…¨é—®é¢˜</p>
</blockquote>
<h3 data-id="heading-25">ğŸ’¡ 2. ä¸€æ¬¡åªåšä¸€ä»¶äº‹</h3>
<ul>
<li>ä¸€æ¬¡åˆ†ææ¶æ„</li>
<li>ä¸€æ¬¡åªæ”¹ä¸€ä¸ªæ¨¡å—</li>
</ul>
<p>Claude çš„è¾“å‡ºä¼š<strong>æ˜æ˜¾æ›´ç¨³å®š</strong>ã€‚</p>
<h3 data-id="heading-26">ğŸ’¡ 3. æŠŠ Claude å½“åŒäº‹ï¼Œä¸æ˜¯æœç´¢å¼•æ“</h3>
<p>å‘Šè¯‰å®ƒï¼š</p>
<ul>
<li>ä½ çš„è§’è‰²æœŸæœ›</li>
<li>é¡¹ç›®èƒŒæ™¯</li>
<li>çº¦æŸæ¡ä»¶</li>
</ul>
<h2 data-id="heading-27">åä¸€ã€é€‚åˆè°ç”¨ï¼Ÿ</h2>
<ul>
<li>âœ… åç«¯ / å‰ç«¯å·¥ç¨‹å¸ˆ</li>
<li>âœ… æ¶æ„å¸ˆ</li>
<li>âœ… ç‹¬ç«‹å¼€å‘è€…</li>
<li>âœ… æƒ³æé«˜ AI ä»£ç äº§å‡ºç‡çš„å›¢é˜Ÿ</li>
</ul>
<p>å¦‚æœä½ å·²ç»åœ¨ç”¨ <strong>AI + CLI + å·¥ç¨‹åŒ– Prompt</strong>ï¼Œ<br/>
Claude CLI ä¼šæ˜¯éå¸¸å¼ºçš„ä¸€ç¯ã€‚</p>
<h2 data-id="heading-28">åäºŒã€æ€»ç»“ä¸€å¥è¯</h2>
<blockquote>
<p><strong>Claude CLI = æŠŠé¡¶çº§å¤§æ¨¡å‹ï¼Œç›´æ¥æ”¾è¿›ä½ çš„é¡¹ç›®ç›®å½•é‡Œã€‚</strong></p>
</blockquote>
<p>ä¸æ˜¯èŠå¤©å·¥å…·ï¼Œæ˜¯ç”Ÿäº§åŠ›å·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»¼åˆé¡¹ç›®å®è·µï¼šå°å‹æ¡†æ¶/åº“å…¨é“¾è·¯å®ç°]]></title>    <link>https://juejin.cn/post/7586585498745487414</link>    <guid>https://juejin.cn/post/7586585498745487414</guid>    <pubDate>2025-12-23T05:55:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585498745487414" data-draft-id="7586675587147415588" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»¼åˆé¡¹ç›®å®è·µï¼šå°å‹æ¡†æ¶/åº“å…¨é“¾è·¯å®ç°"/> <meta itemprop="keywords" content="å‰ç«¯,MVVM,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-23T05:55:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Fronty"/> <meta itemprop="url" content="https://juejin.cn/user/588993964030574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»¼åˆé¡¹ç›®å®è·µï¼šå°å‹æ¡†æ¶/åº“å…¨é“¾è·¯å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993964030574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Fronty
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:55:25.000Z" title="Tue Dec 23 2025 05:55:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å¼•è¨€</h4>
<p>åœ¨å½“ä»Šçš„å‰ç«¯å¼€å‘ä¸­ï¼Œç†è§£æ¡†æ¶å’Œåº“çš„å†…éƒ¨åŸç†æ¯”å•çº¯ä½¿ç”¨å®ƒä»¬æ›´ä¸ºé‡è¦ã€‚é€šè¿‡äº²æ‰‹å®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½æ·±å…¥ç†è§£å…¶è®¾è®¡æ€æƒ³ï¼Œè¿˜èƒ½åœ¨é¢å¯¹å¤æ‚é—®é¢˜æ—¶æå‡ºæ›´ä¼˜çš„è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†å¸¦ä½ ä»é›¶å¼€å§‹ï¼Œå®Œæ•´å®ç°ä¸€ä¸ªå°å‹ä½†åŠŸèƒ½é½å…¨çš„å‰ç«¯æ¡†æ¶/åº“ï¼Œæ¶µç›–MVVMã€çŠ¶æ€ç®¡ç†ã€è·¯ç”±ã€è¡¨å•éªŒè¯ç­‰æ ¸å¿ƒæ¨¡å—ï¼Œå¹¶æ‹“å±•HTTPå®¢æˆ·ç«¯ã€æ’ä»¶ç³»ç»Ÿç­‰é«˜çº§ç‰¹æ€§ã€‚</p>
<h4 data-id="heading-1">ä¸€ã€å®ç°ç®€å•çš„MVVMæ¡†æ¶</h4>
<p>MVVMï¼ˆModel-View-ViewModelï¼‰æ˜¯ç°ä»£å‰ç«¯æ¡†æ¶çš„æ ¸å¿ƒæ¨¡å¼ã€‚æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªå“åº”å¼æ•°æ®ç»‘å®šç³»ç»Ÿï¼ŒåŒ…å«è™šæ‹ŸDOMå’Œç»„ä»¶ç³»ç»Ÿã€‚</p>
<h5 data-id="heading-2">1.1 å“åº”å¼æ•°æ®ç³»ç»Ÿ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è§‚å¯Ÿè€…ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">walk</span>(data);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dep</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>();
  }

  <span class="hljs-title function_">walk</span>(<span class="hljs-params">obj, path = <span class="hljs-string">""</span></span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">defineReactive</span>(obj, key, obj[key], path);
    });
  }

  <span class="hljs-title function_">defineReactive</span>(<span class="hljs-params">obj, key, val, path</span>) {
    <span class="hljs-keyword">const</span> propertyPath = path ? <span class="hljs-string">`<span class="hljs-subst">${path}</span>.<span class="hljs-subst">${key}</span>`</span> : key;

    <span class="hljs-comment">// é€’å½’å¤„ç†åµŒå¥—å¯¹è±¡</span>
    <span class="hljs-keyword">if</span> (val &amp;&amp; <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">"object"</span> &amp;&amp; !<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(val)) {
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(val);
    }

    <span class="hljs-keyword">const</span> dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>();
    <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>;

    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, key, {
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// æ”¶é›†ä¾èµ–</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>) {
          dep.<span class="hljs-title function_">depend</span>();
          <span class="hljs-comment">// æ”¶é›†çˆ¶çº§ä¾èµ–ï¼Œç”¨äºåµŒå¥—å¯¹è±¡</span>
          <span class="hljs-keyword">if</span> (that.<span class="hljs-property">dep</span> &amp;&amp; path === <span class="hljs-string">""</span>) {
            that.<span class="hljs-property">dep</span>.<span class="hljs-title function_">depend</span>();
          }
        }
        <span class="hljs-keyword">return</span> val;
      },
      <span class="hljs-title function_">set</span>(<span class="hljs-params">newVal</span>) {
        <span class="hljs-keyword">if</span> (newVal === val) <span class="hljs-keyword">return</span>;

        <span class="hljs-comment">// å¦‚æœæ–°å€¼æ˜¯å¯¹è±¡ï¼Œä½¿å…¶å˜ä¸ºå“åº”å¼</span>
        <span class="hljs-keyword">if</span> (newVal &amp;&amp; <span class="hljs-keyword">typeof</span> newVal === <span class="hljs-string">"object"</span>) {
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(newVal, propertyPath);
        }

        val = newVal;
        <span class="hljs-comment">// è§¦å‘æ›´æ–°</span>
        dep.<span class="hljs-title function_">notify</span>();
      },
    });
  }
}

<span class="hljs-comment">// ä¾èµ–æ”¶é›†å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dep</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
  }

  <span class="hljs-title function_">addSub</span>(<span class="hljs-params">sub</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span>.<span class="hljs-title function_">add</span>(sub);
  }

  <span class="hljs-title function_">removeSub</span>(<span class="hljs-params">sub</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span>.<span class="hljs-title function_">delete</span>(sub);
  }

  <span class="hljs-title function_">depend</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>) {
      <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>.<span class="hljs-title function_">addDep</span>(<span class="hljs-variable language_">this</span>);
    }
  }

  <span class="hljs-title function_">notify</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">sub</span>) =&gt;</span> sub.<span class="hljs-title function_">update</span>());
  }
}

<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// è§‚å¯Ÿè€…</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Watcher</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">vm, exOrFn, cb, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span> = vm;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cb</span> = cb;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">deps</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">depIds</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lazy</span> = options.<span class="hljs-property">lazy</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirty</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lazy</span>;

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> exOrFn === <span class="hljs-string">"function"</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span> = exOrFn;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseGetter</span>(exOrFn);
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">lazy</span> ? <span class="hljs-literal">undefined</span> : <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>();
  }

  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">const</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-property">getter</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>);
    <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> value;
  }

  <span class="hljs-title function_">addDep</span>(<span class="hljs-params">dep</span>) {
    <span class="hljs-keyword">const</span> id = dep.<span class="hljs-property">id</span> || <span class="hljs-title class_">Symbol</span>();
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">depIds</span>.<span class="hljs-title function_">has</span>(id)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">depIds</span>.<span class="hljs-title function_">add</span>(id);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">deps</span>.<span class="hljs-title function_">add</span>(dep);
      dep.<span class="hljs-title function_">addSub</span>(<span class="hljs-variable language_">this</span>);
    }
  }

  <span class="hljs-title function_">update</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">lazy</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirty</span> = <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">run</span>();
    }
  }

  <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>();
    <span class="hljs-keyword">const</span> oldValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cb</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>, value, oldValue);
  }

  <span class="hljs-title function_">evaluate</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirty</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
  }

  <span class="hljs-title function_">parseGetter</span>(<span class="hljs-params">exp</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/[^\w.$]/</span>.<span class="hljs-title function_">test</span>(exp)) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">const</span> exps = exp.<span class="hljs-title function_">split</span>(<span class="hljs-string">"."</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; exps.<span class="hljs-property">length</span>; i++) {
        <span class="hljs-keyword">if</span> (!obj) <span class="hljs-keyword">return</span>;
        obj = obj[exps[i]];
      }
      <span class="hljs-keyword">return</span> obj;
    };
  }
}
</code></pre>
<h5 data-id="heading-3">1.2 è™šæ‹ŸDOMå’ŒDiffç®—æ³•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { update } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"lodash"</span>);

<span class="hljs-comment">// VNodeç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VNode</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">tag, data, children, text, elm</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span> = tag; <span class="hljs-comment">// æ ‡ç­¾å</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data || {}; <span class="hljs-comment">// èŠ‚ç‚¹æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = children; <span class="hljs-comment">// å­èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = text; <span class="hljs-comment">// æ–‡æœ¬å†…å®¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">elm</span> = elm; <span class="hljs-comment">// å¯¹åº”çš„çœŸå®DOMèŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = data &amp;&amp; data.<span class="hljs-property">key</span>; <span class="hljs-comment">// èŠ‚ç‚¹çš„keyå±æ€§</span>
  }

  <span class="hljs-title function_">isSameVNode</span>(<span class="hljs-params">otherVNode</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span> === otherVNode.<span class="hljs-property">tag</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> === otherVNode.<span class="hljs-property">key</span>;
  }
}

<span class="hljs-comment">// åˆ›å»ºè™šæ‹ŸDOM</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createElement</span>(<span class="hljs-params">tag, data, children</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(children) &amp;&amp; children.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    children = <span class="hljs-literal">undefined</span>;
  }

  <span class="hljs-comment">// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> children === <span class="hljs-string">"string"</span> || <span class="hljs-keyword">typeof</span> children === <span class="hljs-string">"number"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">createTextVNode</span>(children);
  }

  <span class="hljs-comment">// å¤„ç†å­èŠ‚ç‚¹æ•°ç»„</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(children)) {
    children = children.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> child === <span class="hljs-string">"string"</span> || <span class="hljs-keyword">typeof</span> child === <span class="hljs-string">"number"</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">createTextVNode</span>(child);
      }
      <span class="hljs-keyword">return</span> child;
    });
  }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VNode</span>(tag, data, children);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createTextVNode</span>(<span class="hljs-params">text</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VNode</span>(<span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-title class_">String</span>(text));
}

<span class="hljs-comment">// Diffç®—æ³•å®ç°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">patch</span>(<span class="hljs-params">oldVNode, newVNode</span>) {
  <span class="hljs-comment">// é¦–æ¬¡æ¸²æŸ“</span>
  <span class="hljs-keyword">if</span> (!oldVNode) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">createElm</span>(newVNode);
  }

  <span class="hljs-comment">// ç›¸åŒèŠ‚ç‚¹ï¼Œè¿›è¡Œpatch</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">sameVnode</span>(oldVNode, newVNode)) {
    <span class="hljs-title function_">patchVNode</span>(oldVNode, newVNode);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä¸åŒèŠ‚ç‚¹ï¼Œç›´æ¥æ›¿æ¢</span>
    <span class="hljs-keyword">const</span> parent = oldVNode.<span class="hljs-property">elm</span>.<span class="hljs-property">parentNode</span>;
    <span class="hljs-keyword">const</span> newElm = <span class="hljs-title function_">createElm</span>(newVNode);
    parent.<span class="hljs-title function_">insertBefore</span>(newElm, oldVNode.<span class="hljs-property">elm</span>);
    parent.<span class="hljs-title function_">removeChild</span>(oldVNode.<span class="hljs-property">elm</span>);
  }

  <span class="hljs-keyword">return</span> newVNode.<span class="hljs-property">elm</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">sameVnode</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> (
    a.<span class="hljs-property">key</span> === b.<span class="hljs-property">key</span> &amp;&amp;
    a.<span class="hljs-property">tag</span> === b.<span class="hljs-property">tag</span> &amp;&amp;
    a.<span class="hljs-property">data</span>?.<span class="hljs-property">attrs</span>?.<span class="hljs-property">id</span> === b.<span class="hljs-property">data</span>?.<span class="hljs-property">attrs</span>?.<span class="hljs-property">id</span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createElm</span>(<span class="hljs-params">vnode</span>) {
  <span class="hljs-keyword">const</span> { tag, children, text } = vnode;

  <span class="hljs-keyword">if</span> (tag) {
    <span class="hljs-comment">// åˆ›å»ºå…ƒç´ èŠ‚ç‚¹</span>
    vnode.<span class="hljs-property">elm</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(tag);

    <span class="hljs-comment">// è®¾ç½®å±æ€§</span>
    <span class="hljs-keyword">if</span> (vnode.<span class="hljs-property">data</span>) {
      <span class="hljs-title function_">setAttributes</span>(vnode.<span class="hljs-property">elm</span>, vnode.<span class="hljs-property">data</span>.<span class="hljs-property">attrs</span> || {});
      <span class="hljs-title function_">setEvents</span>(vnode.<span class="hljs-property">elm</span>, vnode.<span class="hljs-property">data</span>.<span class="hljs-property">on</span> || {});
    }

    <span class="hljs-comment">// é€’å½’åˆ›å»ºå­èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (children) {
      children.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> childElm = <span class="hljs-title function_">createElm</span>(child);
        vnode.<span class="hljs-property">elm</span>.<span class="hljs-title function_">appendChild</span>(childElm);
      });
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹</span>
    vnode.<span class="hljs-property">elm</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(text);
  }

  <span class="hljs-keyword">return</span> vnode.<span class="hljs-property">elm</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">patchValue</span>(<span class="hljs-params">oldVNode, newVNode</span>) {
  <span class="hljs-keyword">const</span> elm = (newVNode.<span class="hljs-property">elm</span> = oldVNode.<span class="hljs-property">elm</span>);
  <span class="hljs-keyword">const</span> oldCh = oldVNode.<span class="hljs-property">children</span>;
  <span class="hljs-keyword">const</span> newCh = newVNode.<span class="hljs-property">children</span>;

  <span class="hljs-comment">// æ–‡æœ¬èŠ‚ç‚¹æ›´æ–°</span>
  <span class="hljs-keyword">if</span> (!newVNode.<span class="hljs-property">tag</span> &amp;&amp; oldVNode.<span class="hljs-property">text</span> !== newVNode.<span class="hljs-property">text</span>) {
    elm.<span class="hljs-property">textContent</span> = newVNode.<span class="hljs-property">text</span>;
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// æ›´æ–°å±æ€§</span>
  <span class="hljs-keyword">if</span> (newVNode.<span class="hljs-property">data</span>) {
    <span class="hljs-title function_">updateAttributes</span>(
      elm,
      oldVNode.<span class="hljs-property">data</span>?.<span class="hljs-property">attrs</span> || {},
      newVNode.<span class="hljs-property">data</span>.<span class="hljs-property">attrs</span> || {}
    );
    <span class="hljs-title function_">updateEvents</span>(elm, oldVNode.<span class="hljs-property">data</span>?.<span class="hljs-property">on</span> || {}, newVNode.<span class="hljs-property">data</span>.<span class="hljs-property">on</span> || {});
  }

  <span class="hljs-comment">// æ›´æ–°å­èŠ‚ç‚¹</span>
  <span class="hljs-keyword">if</span> (oldCh &amp;&amp; newCh) {
    <span class="hljs-title function_">updateChildren</span>(elm, oldCh, newCh);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newCh) {
    <span class="hljs-comment">// æ·»åŠ æ–°å­èŠ‚ç‚¹</span>
    newCh.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> childElm = <span class="hljs-title function_">createElm</span>(child);
      elm.<span class="hljs-title function_">appendChild</span>(childElm);
    });
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (oldCh) {
    <span class="hljs-comment">// åˆ é™¤æ—§å­èŠ‚ç‚¹</span>
    oldCh.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child</span>) =&gt;</span> {
      elm.<span class="hljs-title function_">removeChild</span>(child.<span class="hljs-property">elm</span>);
    });
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateChildren</span>(<span class="hljs-params">parentElm, oldCh, newCh</span>) {
  <span class="hljs-keyword">let</span> oldStartIdx = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> newStartIdx = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> oldEndIdx = oldCh.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
  <span class="hljs-keyword">let</span> newEndIdx = newCh.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
  <span class="hljs-keyword">let</span> oldStartVNode = oldCh[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">let</span> oldEndVNode = oldCh[oldEndIdx];
  <span class="hljs-keyword">let</span> newStartVNode = newCh[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">let</span> newEndVNode = newCh[newEndIdx];

  <span class="hljs-keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) {
    <span class="hljs-keyword">if</span> (!oldStartVNode) {
      oldStartVNode = oldCh[++oldStartIdx];
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!oldEndVNode) {
      oldEndVNode = oldCh[--oldEndIdx];
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">sameVnode</span>(oldStartVNode, newStartVNode)) {
      <span class="hljs-title function_">patchValue</span>(oldStartVNode, newStartVNode);
      oldStartVNode = oldCh[++oldStartIdx];
      newStartVNode = newCh[++newStartIdx];
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">sameVnode</span>(oldEndVNode, newEndVNode)) {
      <span class="hljs-title function_">patchValue</span>(oldEndVNode, newEndVNode);
      oldEndVNode = oldCh[--oldEndIdx];
      newEndVNode = newCh[--newEndIdx];
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">sameVnode</span>(oldStartVNode, newEndVNode)) {
      <span class="hljs-title function_">patchValue</span>(oldStartVNode, newEndVNode);
      parentElm.<span class="hljs-title function_">insertBefore</span>(oldStartVNode.<span class="hljs-property">elm</span>, oldEndVNode.<span class="hljs-property">elm</span>.<span class="hljs-property">nextSibling</span>);
      oldStartVNode = oldCh[++oldStartIdx];
      newEndVNode = newCh[--newEndIdx];
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title function_">sameVnode</span>(oldEndVNode, newStartVNode)) {
      <span class="hljs-title function_">patchValue</span>(oldEndVNode, newStartVNode);
      parentElm.<span class="hljs-title function_">insertBefore</span>(oldEndVNode.<span class="hljs-property">elm</span>, oldStartVNode.<span class="hljs-property">elm</span>);
      oldEndVNode = oldCh[--oldEndIdx];
      newStartVNode = newCh[++newStartIdx];
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// åˆ›å»ºæ–°èŠ‚ç‚¹</span>
      <span class="hljs-keyword">const</span> newElm = <span class="hljs-title function_">createElm</span>(newStartVNode);
      parentElm.<span class="hljs-title function_">insertBefore</span>(newElm, oldStartVNode.<span class="hljs-property">elm</span>);
      newStartVNode = newCh[++newStartIdx];
    }
  }

  <span class="hljs-comment">// æ·»åŠ å‰©ä½™çš„æ–°èŠ‚ç‚¹</span>
  <span class="hljs-keyword">if</span> (newStartIdx &lt;= newEndIdx) {
    <span class="hljs-keyword">const</span> before = newCh[newEndIdx + <span class="hljs-number">1</span>] ? newCh[newEndIdx + <span class="hljs-number">1</span>].<span class="hljs-property">elm</span> : <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = newStartIdx; i &lt;= newEndIdx; i++) {
      <span class="hljs-keyword">const</span> newElm = <span class="hljs-title function_">createElm</span>(newCh[i]);
      parentElm.<span class="hljs-title function_">insertBefore</span>(newElm, before);
    }
  }

  <span class="hljs-comment">// åˆ é™¤å‰©ä½™çš„æ—§èŠ‚ç‚¹</span>
  <span class="hljs-keyword">if</span> (oldStartIdx &lt;= oldEndIdx) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = oldStartIdx; i &lt;= oldEndIdx; i++) {
      <span class="hljs-keyword">if</span> (oldCh[i]) {
        parentElm.<span class="hljs-title function_">removeChild</span>(oldCh[i].<span class="hljs-property">elm</span>);
      }
    }
  }
}
</code></pre>
<h5 data-id="heading-4">1.3 ç»„ä»¶ç³»ç»Ÿ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶åŸºç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span> = options;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$data</span> =
      <span class="hljs-keyword">typeof</span> options.<span class="hljs-property">data</span> === <span class="hljs-string">"function"</span> ? options.<span class="hljs-title function_">data</span>() : options.<span class="hljs-property">data</span> || {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$props</span> = options.<span class="hljs-property">props</span> || {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$methods</span> = options.<span class="hljs-property">methods</span> || {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$computed</span> = options.<span class="hljs-property">computed</span> || {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$watch</span> = options.<span class="hljs-property">watch</span> || {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç»„ä»¶çš„æ ¹DOMå…ƒç´ </span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$parent</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// çˆ¶ç»„ä»¶å®ä¾‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$children</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span> = {};

    <span class="hljs-comment">// åˆå§‹åŒ–å“åº”å¼æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_initState</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_initComputed</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_initWatch</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_initMethods</span>();

    <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸ</span>
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">beforeCreate</span>) options.<span class="hljs-property">beforeCreate</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);
    <span class="hljs-keyword">if</span> (options.<span class="hljs-property">created</span>) options.<span class="hljs-property">created</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);
  }

  <span class="hljs-title function_">_initState</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä»£ç†dataåˆ°å®ä¾‹</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$data</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>, key, {
        <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$data</span>[key],
        <span class="hljs-attr">set</span>: <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">$data</span>[key] = val;
        },
      });
    });

    <span class="hljs-comment">// ä½¿dataå“åº”å¼</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$data</span>);
  }

  <span class="hljs-title function_">_initComputed</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> watchers = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_computedWatchers</span> = {});

    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$computed</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> getter = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$computed</span>[key];

      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> getter === <span class="hljs-string">"function"</span>) {
        watchers[key] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Watcher</span>(<span class="hljs-variable language_">this</span>, getter, <span class="hljs-function">() =&gt;</span> {}, { <span class="hljs-attr">lazy</span>: <span class="hljs-literal">true</span> });

        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>, key, {
          <span class="hljs-attr">get</span>: <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">const</span> watcher = watchers[key];
            <span class="hljs-keyword">if</span> (watcher.<span class="hljs-property">dirty</span>) {
              watcher.evaluate();
            }
            <span class="hljs-keyword">return</span> watcher.<span class="hljs-property">value</span>;
          },
        });
      }
    });
  }

  <span class="hljs-title function_">_initWatch</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$watch</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Watcher</span>(<span class="hljs-variable language_">this</span>, key, <span class="hljs-variable language_">this</span>.<span class="hljs-property">$watch</span>[key]);
    });
  }

  <span class="hljs-title function_">_initMethods</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$methods</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>[key] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$methods</span>[key].<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
    });
  }

  $mount(el) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span> = <span class="hljs-keyword">typeof</span> el === <span class="hljs-string">"string"</span> ? <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(el) : el;

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">beforeMount</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">beforeMount</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);
    }

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_render</span>();

    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">mounted</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">mounted</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">_render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">render</span>) {
      <span class="hljs-keyword">const</span> vnode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">render</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, createElement);
      <span class="hljs-title function_">patch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>, vnode);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">template</span>) {
      <span class="hljs-keyword">const</span> template = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">template</span>;
      <span class="hljs-keyword">const</span> vnode = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_compile</span>(template);
      <span class="hljs-title function_">patch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>, vnode);
    }
  }

  <span class="hljs-title function_">_compile</span>(<span class="hljs-params">template</span>) {
    <span class="hljs-comment">// ç®€å•çš„æ¨¡æ¿ç¼–è¯‘å®ç°</span>
    <span class="hljs-keyword">const</span> ast = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_parse</span>(template);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_generate</span>(ast);
  }

  $foreceUpdate() {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_render</span>();
  }

  $emit(event, ...args) {
    <span class="hljs-keyword">const</span> callbacks = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event];
    <span class="hljs-keyword">if</span> (callbacks) {
      callbacks.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> <span class="hljs-title function_">callback</span>(...args));
    }
  }

  $on(event, callback) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span> = {};
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event]) <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event] = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event].<span class="hljs-title function_">push</span>(callback);
  }

  $off(event, callback) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span> || !<span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event]) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">if</span> (callback) {
      <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event].<span class="hljs-title function_">indexOf</span>(callback);
      <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event].<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event];
    }
  }

  $nextTick(cb) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(cb);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>({
      <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">message</span>: <span class="hljs-string">"Hello MVVM"</span>,
          <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
          <span class="hljs-attr">items</span>: [<span class="hljs-string">"Item 1"</span>, <span class="hljs-string">"Item 2"</span>, <span class="hljs-string">"Item 3"</span>],
        };
      },

      <span class="hljs-attr">computed</span>: {
        <span class="hljs-title function_">reversedMessage</span>(<span class="hljs-params"/>) {
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">""</span>).<span class="hljs-title function_">reverse</span>().<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
        },

        <span class="hljs-title function_">doubleCount</span>(<span class="hljs-params"/>) {
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>;
        },
      },

      <span class="hljs-attr">methods</span>: {
        <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
        },

        <span class="hljs-title function_">addItem</span>(<span class="hljs-params"/>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">`Item <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.items.length + <span class="hljs-number">1</span>}</span>`</span>);
        },

        <span class="hljs-title function_">removeItem</span>(<span class="hljs-params">index</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        },
      },

      <span class="hljs-attr">watch</span>: {
        <span class="hljs-title function_">count</span>(<span class="hljs-params">newVal, oldVal</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count changed from <span class="hljs-subst">${oldVal}</span> to <span class="hljs-subst">${newVal}</span>`</span>);
        },
      },

      <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Component created"</span>);
      },

      <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Component mounted"</span>);
      },

      <span class="hljs-title function_">render</span>(<span class="hljs-params">h</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">"div"</span>, { <span class="hljs-attr">attrs</span>: { <span class="hljs-attr">id</span>: <span class="hljs-string">"app"</span> } }, [
          <span class="hljs-title function_">h</span>(<span class="hljs-string">"h1"</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>),
          <span class="hljs-title function_">h</span>(<span class="hljs-string">"p"</span>, <span class="hljs-string">`Count: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.count}</span>, Double: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.doubleCount}</span>`</span>),
          <span class="hljs-title function_">h</span>(<span class="hljs-string">"p"</span>, <span class="hljs-string">`Reversed: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.reversedMessage}</span>`</span>),
          <span class="hljs-title function_">h</span>(<span class="hljs-string">"button"</span>, { <span class="hljs-attr">on</span>: { <span class="hljs-attr">click</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">increment</span> } }, <span class="hljs-string">"Increment"</span>),
          <span class="hljs-title function_">h</span>(<span class="hljs-string">"button"</span>, { <span class="hljs-attr">on</span>: { <span class="hljs-attr">click</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">addItem</span> } }, <span class="hljs-string">"Add Item"</span>),
          <span class="hljs-title function_">h</span>(
            <span class="hljs-string">"ul"</span>,
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span>
              <span class="hljs-title function_">h</span>(<span class="hljs-string">"li"</span>, { <span class="hljs-attr">key</span>: index }, [
                item,
                <span class="hljs-title function_">h</span>(
                  <span class="hljs-string">"button"</span>,
                  {
                    <span class="hljs-attr">on</span>: { <span class="hljs-attr">click</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeItem</span>(index) },
                  },
                  <span class="hljs-string">"Remove"</span>
                ),
              ])
            )
          ),
        ]);
      },
    });
  }
}

<span class="hljs-comment">// å¯åŠ¨åº”ç”¨</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyApp</span>();
app.$mount(<span class="hljs-string">"#app"</span>);
</code></pre>
<h4 data-id="heading-5">äºŒã€çŠ¶æ€ç®¡ç†åº“(ç±»ä¼¼Redux)</h4>
<h5 data-id="heading-6">2.1 æ ¸å¿ƒStoreå®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºStore</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createStore</span>(<span class="hljs-params">reducer, preloadedState, enhancer</span>) {
  <span class="hljs-comment">// å¤„ç†ä¸­é—´ä»¶</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> enhancer === <span class="hljs-string">"function"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">enhancer</span>(createStore)(reducer, preloadedState);
  }

  <span class="hljs-keyword">let</span> state = preloadedState;
  <span class="hljs-keyword">let</span> listeners = [];
  <span class="hljs-keyword">let</span> isDispatching = <span class="hljs-literal">false</span>;

  <span class="hljs-comment">// è·å–å½“å‰çŠ¶æ€</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (isDispatching) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Cannot call getState while dispatching"</span>);
    }
    <span class="hljs-keyword">return</span> state;
  }

  <span class="hljs-comment">// è®¢é˜…çŠ¶æ€å˜åŒ–</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">subscribe</span>(<span class="hljs-params">listener</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> listener !== <span class="hljs-string">"function"</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Listener must be a function"</span>);
    }

    <span class="hljs-keyword">if</span> (isDispatching) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Cannot subscribe while dispatching"</span>);
    }

    <span class="hljs-keyword">let</span> isSubscribed = <span class="hljs-literal">true</span>;
    listeners.<span class="hljs-title function_">push</span>(listener);

    <span class="hljs-comment">// è¿”å›å–æ¶ˆè®¢é˜…å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unsubscribe</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (!isSubscribed) <span class="hljs-keyword">return</span>;

      <span class="hljs-keyword">if</span> (isDispatching) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Cannot unsubscribe while dispatching"</span>);
      }

      isSubscribed = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">const</span> index = listeners.<span class="hljs-title function_">indexOf</span>(listener);
      listeners.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    };
  }

  <span class="hljs-comment">// åˆ†å‘action</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-params">action</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action !== <span class="hljs-string">"object"</span> || action === <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Action must be a plain object"</span>);
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action.<span class="hljs-property">type</span> === <span class="hljs-string">"undefined"</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Action must have a 'type' property"</span>);
    }
    <span class="hljs-keyword">if</span> (isDispatching) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Cannot dispatch while dispatching"</span>);
    }

    <span class="hljs-keyword">try</span> {
      isDispatching = <span class="hljs-literal">true</span>;
      state = <span class="hljs-title function_">reducer</span>(state, action);
    } <span class="hljs-keyword">finally</span> {
      isDispatching = <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…</span>
    listeners.<span class="hljs-title function_">slice</span>().<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> <span class="hljs-title function_">listener</span>());
    <span class="hljs-keyword">return</span> action;
  }

  <span class="hljs-comment">// æ›¿æ¢reducer</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">replaceReducer</span>(<span class="hljs-params">nextReducer</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> nextReducer !== <span class="hljs-string">"function"</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Next reducer must be a function"</span>);
    }
    reducer = nextReducer;
    <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€</span>
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"@@redux/INIT"</span> });
  }

  <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€</span>
  <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"@@redux/INIT"</span> });

  <span class="hljs-keyword">return</span> {
    getState,
    subscribe,
    dispatch,
    replaceReducer,
  };
}

<span class="hljs-comment">// ç»„åˆå¤šä¸ªreducer</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">combineReducers</span>(<span class="hljs-params">reducers</span>) {
  <span class="hljs-keyword">const</span> reducerKeys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(reducers);
  <span class="hljs-keyword">const</span> finalReducers = {};

  <span class="hljs-comment">// è¿‡æ»¤æ‰éå‡½æ•°çš„reducer</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; reducerKeys.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> key = reducerKeys[i];
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> reducers[key] === <span class="hljs-string">"function"</span>) {
      finalReducers[key] = reducers[key];
    }
  }

  <span class="hljs-keyword">const</span> finalReducersKeys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(finalReducers);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">combination</span>(<span class="hljs-params">state = {}, action</span>) {
    <span class="hljs-keyword">let</span> hasChanged = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">const</span> nextState = {};

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; finalReducersKeys.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> key = finalReducersKeys[i];
      <span class="hljs-keyword">const</span> reducer = finalReducers[key];
      <span class="hljs-keyword">const</span> previousStateForKey = state[key];
      <span class="hljs-keyword">const</span> nextStateForKey = <span class="hljs-title function_">reducer</span>(previousStateForKey, action);
      nextState[key] = nextStateForKey;
      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;
    }

    <span class="hljs-keyword">return</span> hasChanged ? nextState : state;
  };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">counterReducer</span> = (<span class="hljs-params">state = <span class="hljs-number">0</span>, action</span>) =&gt; {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"INCREMENT"</span>:
      <span class="hljs-keyword">return</span> state + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"DECREMENT"</span>:
      <span class="hljs-keyword">return</span> state - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">"RESET"</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> state;
  }
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">todoReducer</span> = (<span class="hljs-params">state = [], action</span>) =&gt; {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"ADD_TODO"</span>:
      <span class="hljs-keyword">return</span> [
        ...state,
        {
          <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
          <span class="hljs-attr">text</span>: action.<span class="hljs-property">text</span>,
          <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>,
        },
      ];
    <span class="hljs-keyword">case</span> <span class="hljs-string">"TOGGLE_TODO"</span>:
      <span class="hljs-keyword">return</span> state.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span>
        todo.<span class="hljs-property">id</span> === action.<span class="hljs-property">id</span> ? { ...todo, <span class="hljs-attr">completed</span>: !todo.<span class="hljs-property">completed</span> } : todo
      );
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> state;
  }
};

<span class="hljs-keyword">const</span> rootReducer = <span class="hljs-title function_">combineReducers</span>({
  <span class="hljs-attr">counter</span>: counterReducer,
  <span class="hljs-attr">todos</span>: todoReducer,
});

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(rootReducer);

<span class="hljs-comment">// è®¢é˜…çŠ¶æ€å˜åŒ–</span>
<span class="hljs-keyword">const</span> unsubscribe = store.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"State changed:"</span>, store.<span class="hljs-title function_">getState</span>());
});

<span class="hljs-comment">// åˆ†å‘action</span>
store.<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"INCREMENT"</span> });
store.<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"ADD_TODO"</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">"Learn Redux"</span> });
</code></pre>
<h5 data-id="heading-7">2.2 ä¸­é—´ä»¶ç³»ç»Ÿ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åº”ç”¨ä¸­é—´ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">applyMiddleware</span>(<span class="hljs-params">...middlewares</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">createStore</span> =&gt;</span> <span class="hljs-function">(<span class="hljs-params">reducer, preloadedState</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(reducer, preloadedState);
    <span class="hljs-keyword">let</span> <span class="hljs-title function_">dispatch</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Cannot call dispatch while constructing middleware'</span>);
    };
    
    <span class="hljs-keyword">const</span> middlewareAPI = {
      <span class="hljs-attr">getState</span>: store.<span class="hljs-property">getState</span>,
      <span class="hljs-attr">dispatch</span>: <span class="hljs-function">(<span class="hljs-params">action, ...args</span>) =&gt;</span> <span class="hljs-title function_">dispatch</span>(action, ...args)
    };
    
    <span class="hljs-comment">// ç»™æ¯ä¸ªä¸­é—´ä»¶æ³¨å…¥store API</span>
    <span class="hljs-keyword">const</span> chain = middlewares.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">middleware</span> =&gt;</span> <span class="hljs-title function_">middleware</span>(middlewareAPI));
    
    <span class="hljs-comment">// ç»„åˆä¸­é—´ä»¶</span>
    dispatch = <span class="hljs-title function_">compose</span>(...chain)(store.<span class="hljs-property">dispatch</span>);
    
    <span class="hljs-keyword">return</span> {
      ...store,
      dispatch
    };
  };
}

<span class="hljs-comment">// ç»„åˆå‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">compose</span>(<span class="hljs-params">...funcs</span>) {
  <span class="hljs-keyword">if</span> (funcs.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">arg</span> =&gt;</span> arg;
  }
  
  <span class="hljs-keyword">if</span> (funcs.<span class="hljs-property">length</span> === <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">0</span>];
  }
  
  <span class="hljs-keyword">return</span> funcs.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> <span class="hljs-title function_">a</span>(<span class="hljs-title function_">b</span>(...args)));
}

<span class="hljs-comment">// å¸¸ç”¨ä¸­é—´ä»¶å®ç°</span>

<span class="hljs-comment">// 1. Loggerä¸­é—´ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">logger</span> = store =&gt; <span class="hljs-function"><span class="hljs-params">next</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">group</span>(action.<span class="hljs-property">type</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Previous state:'</span>, store.<span class="hljs-title function_">getState</span>());
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Action:'</span>, action);
  
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">next</span>(action);
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Next state:'</span>, store.<span class="hljs-title function_">getState</span>());
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">groupEnd</span>();
  
  <span class="hljs-keyword">return</span> result;
};

<span class="hljs-comment">// 2. Thunkä¸­é—´ä»¶ï¼ˆæ”¯æŒå¼‚æ­¥actionï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">thunk</span> = store =&gt; <span class="hljs-function"><span class="hljs-params">next</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action === <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">action</span>(store.<span class="hljs-property">dispatch</span>, store.<span class="hljs-property">getState</span>);
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>(action);
};

<span class="hljs-comment">// 3. Promiseä¸­é—´ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">promise</span> = store =&gt; <span class="hljs-function"><span class="hljs-params">next</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action.<span class="hljs-property">then</span> === <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> action.<span class="hljs-title function_">then</span>(store.<span class="hljs-property">dispatch</span>);
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>(action);
};

<span class="hljs-comment">// 4. é”™è¯¯å¤„ç†ä¸­é—´ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">errorHandler</span> = store =&gt; <span class="hljs-function"><span class="hljs-params">next</span> =&gt;</span> <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>(action);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error in action:'</span>, action.<span class="hljs-property">type</span>, err);
    
    <span class="hljs-comment">// å¯ä»¥åˆ†å‘é”™è¯¯action</span>
    store.<span class="hljs-title function_">dispatch</span>({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'ERROR_OCCURRED'</span>,
      <span class="hljs-attr">error</span>: err.<span class="hljs-property">message</span>,
      <span class="hljs-attr">originalAction</span>: action
    });
    
    <span class="hljs-keyword">throw</span> err;
  }
};

<span class="hljs-comment">// ä½¿ç”¨ä¸­é—´ä»¶</span>
<span class="hljs-keyword">const</span> storeWithMiddleware = <span class="hljs-title function_">createStore</span>(
  rootReducer,
  <span class="hljs-title function_">applyMiddleware</span>(thunk, logger, errorHandler)
);

<span class="hljs-comment">// å¼‚æ­¥action creator</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchTodos</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (dispatch, getState) =&gt; {
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'FETCH_TODOS_REQUEST'</span> });
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/todos'</span>);
      <span class="hljs-keyword">const</span> todos = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
      
      <span class="hljs-title function_">dispatch</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'FETCH_TODOS_SUCCESS'</span>,
        todos
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">dispatch</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'FETCH_TODOS_FAILURE'</span>,
        <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>
      });
    }
  };
}

<span class="hljs-comment">// ä½¿ç”¨å¼‚æ­¥action</span>
storeWithMiddleware.<span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">fetchTodos</span>());
</code></pre>
<h5 data-id="heading-8">2.3 Reactç»‘å®š(ç±»ä¼¼React-Redux)</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Contextæä¾›Store</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ReduxContext</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// Providerç»„ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Provider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {
      <span class="hljs-attr">store</span>: props.<span class="hljs-property">store</span>
    };
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ReduxContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{this.state.store}</span>&gt;</span>
        {this.props.children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ReduxContext.Provider</span>&gt;</span></span>
    );
  }
}

<span class="hljs-comment">// connecté«˜é˜¶ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params">mapStateToProps, mapDispatchToProps</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">WrappedComponent</span> =&gt;</span> {
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectedComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
      <span class="hljs-keyword">static</span> contextType = <span class="hljs-title class_">ReduxContext</span>;
      
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props, context</span>) {
        <span class="hljs-variable language_">super</span>(props, context);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span> = context;
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {
          ...<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStateFromStore</span>()
        };
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
      }
      
      <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">unsubscribe</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleChange</span>);
      }
      
      <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">unsubscribe</span>();
      }
      
      <span class="hljs-title function_">getStateFromStore</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">getState</span>();
        <span class="hljs-keyword">const</span> mappedState = mapStateToProps ? <span class="hljs-title function_">mapStateToProps</span>(state, <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>) : {};
        <span class="hljs-keyword">const</span> mappedDispatch = mapDispatchToProps 
          ? <span class="hljs-title function_">mapDispatchToProps</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-property">dispatch</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>)
          : { <span class="hljs-attr">dispatch</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-property">dispatch</span> };
        
        <span class="hljs-keyword">return</span> {
          ...mappedState,
          ...mappedDispatch
        };
      }
      
      <span class="hljs-title function_">handleChange</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getStateFromStore</span>());
      }
      
      <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WrappedComponent</span> {<span class="hljs-attr">...this.props</span>} {<span class="hljs-attr">...this.state</span>} /&gt;</span></span>;
      }
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">ConnectedComponent</span>;
  };
}

<span class="hljs-comment">// useSelector Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useSelector</span>(<span class="hljs-params">selector</span>) {
  <span class="hljs-keyword">const</span> store = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ReduxContext</span>);
  <span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">selector</span>(store.<span class="hljs-title function_">getState</span>()));
  
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> unsubscribe = store.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> newState = <span class="hljs-title function_">selector</span>(store.<span class="hljs-title function_">getState</span>());
      <span class="hljs-title function_">setState</span>(newState);
    });
    
    <span class="hljs-keyword">return</span> unsubscribe;
  }, [store, selector]);
  
  <span class="hljs-keyword">return</span> state;
}

<span class="hljs-comment">// useDispatch Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useDispatch</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> store = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ReduxContext</span>);
  <span class="hljs-keyword">return</span> store.<span class="hljs-property">dispatch</span>;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoList</span> = (<span class="hljs-params">{ todos, addTodo, toggleTodo }</span>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> addTodo('New Todo')}&gt;Add Todo<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      {todos.map(todo =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> toggleTodo(todo.id)}
          style={{ textDecoration: todo.completed ? 'line-through' : 'none' }}
        &gt;
          {todo.text}
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">mapStateToProps</span> = state =&gt; ({
  <span class="hljs-attr">todos</span>: state.<span class="hljs-property">todos</span>
});

<span class="hljs-keyword">const</span> <span class="hljs-title function_">mapDispatchToProps</span> = dispatch =&gt; ({
  <span class="hljs-attr">addTodo</span>: <span class="hljs-function"><span class="hljs-params">text</span> =&gt;</span> <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD_TODO'</span>, text }),
  <span class="hljs-attr">toggleTodo</span>: <span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'TOGGLE_TODO'</span>, id })
});

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ConnectedTodoList</span> = <span class="hljs-title function_">connect</span>(mapStateToProps, mapDispatchToProps)(<span class="hljs-title class_">TodoList</span>);

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨Hooks</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoListHook</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> todos = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">todos</span>);
  <span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>();
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch({ type: 'ADD_TODO', text: 'New Todo' })}&gt;
        Add Todo
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
        {todos.map(todo =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
            <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> dispatch({ type: 'TOGGLE_TODO', id: todo.id })}
            style={{ textDecoration: todo.completed ? 'line-through' : 'none' }}
          &gt;
            {todo.text}
          <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// åº”ç”¨å…¥å£</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Provider</span> <span class="hljs-attr">store</span>=<span class="hljs-string">{store}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ConnectedTodoList</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoListHook</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Provider</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-9">ä¸‰ã€è·¯ç”±åº“å®ç°</h4>
<h5 data-id="heading-10">3.1 Hashè·¯ç”±å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HashRouter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">routes = [], options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxHistory</span> = options.<span class="hljs-property">maxHistory</span> || <span class="hljs-number">50</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span> = [];
    
    <span class="hljs-comment">// åˆå§‹åŒ–è·¯ç”±</span>
    routes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addRoute</span>(route.<span class="hljs-property">path</span>, route.<span class="hljs-property">component</span>, route.<span class="hljs-property">meta</span>);
    });
    
    <span class="hljs-comment">// ç›‘å¬hashå˜åŒ–</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'hashchange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleHashChange</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    
    <span class="hljs-comment">// åˆå§‹è·¯ç”±</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleHashChange</span>();
  }
  
  <span class="hljs-title function_">addRoute</span>(<span class="hljs-params">path, component, meta = {}</span>) {
    <span class="hljs-keyword">const</span> keys = [];
    <span class="hljs-keyword">const</span> regex = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pathToRegex</span>(path, keys);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>.<span class="hljs-title function_">set</span>(regex, {
      component,
      meta,
      keys
    });
  }
  
  <span class="hljs-title function_">pathToRegex</span>(<span class="hljs-params">path, keys</span>) {
    path = path
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\/:(\w+)/g</span>, <span class="hljs-function">(<span class="hljs-params">_, key</span>) =&gt;</span> {
        keys.<span class="hljs-title function_">push</span>(key);
        <span class="hljs-keyword">return</span> <span class="hljs-string">'/([^/]+)'</span>;
      })
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\*/g</span>, <span class="hljs-string">'(.*)'</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`^<span class="hljs-subst">${path}</span>$`</span>);
  }
  
  <span class="hljs-title function_">handleHashChange</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> hash = <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>) || <span class="hljs-string">'/'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">navigateTo</span>(hash, <span class="hljs-literal">false</span>);
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">navigateTo</span>(<span class="hljs-params">path, updateHash = <span class="hljs-literal">true</span></span>) {
    <span class="hljs-comment">// æ‰§è¡Œä¸­é—´ä»¶</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> middleware <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span>) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">middleware</span>({ <span class="hljs-attr">from</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>, <span class="hljs-attr">to</span>: path });
      <span class="hljs-keyword">if</span> (result === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// é˜»æ­¢å¯¼èˆª</span>
      }
    }
    
    <span class="hljs-comment">// åŒ¹é…è·¯ç”±</span>
    <span class="hljs-keyword">let</span> match = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> params = {};
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [regex, route] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>) {
      <span class="hljs-keyword">const</span> result = path.<span class="hljs-title function_">match</span>(regex);
      <span class="hljs-keyword">if</span> (result) {
        match = route;
        
        <span class="hljs-comment">// æå–å‚æ•°</span>
        route.<span class="hljs-property">keys</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key, index</span>) =&gt;</span> {
          params[key] = result[index + <span class="hljs-number">1</span>];
        });
        
        <span class="hljs-keyword">break</span>;
      }
    }
    
    <span class="hljs-keyword">if</span> (!match) {
      <span class="hljs-comment">// é»˜è®¤è·¯ç”±æˆ–404</span>
      match = <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>.<span class="hljs-title function_">get</span>(<span class="hljs-regexp">/.*/</span>);
      <span class="hljs-keyword">if</span> (!match) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Route not found: <span class="hljs-subst">${path}</span>`</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }
    
    <span class="hljs-comment">// æ›´æ–°hash</span>
    <span class="hljs-keyword">if</span> (updateHash &amp;&amp; <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>) !== path) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">hash</span> = path;
    }
    
    <span class="hljs-comment">// ä¿å­˜å†å²è®°å½•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>({
      path,
      params,
      <span class="hljs-attr">meta</span>: match.<span class="hljs-property">meta</span>,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    });
    
    <span class="hljs-comment">// é™åˆ¶å†å²è®°å½•å¤§å°</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxHistory</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">shift</span>();
    }
    
    <span class="hljs-comment">// æ›´æ–°å½“å‰è·¯ç”±</span>
    <span class="hljs-keyword">const</span> previous = <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = {
      path,
      params,
      <span class="hljs-attr">component</span>: match.<span class="hljs-property">component</span>,
      <span class="hljs-attr">meta</span>: match.<span class="hljs-property">meta</span>
    };
    
    <span class="hljs-comment">// è§¦å‘è·¯ç”±å˜åŒ–äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'routeChange'</span>, { <span class="hljs-attr">from</span>: previous, <span class="hljs-attr">to</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> });
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  
  <span class="hljs-title function_">go</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-keyword">const</span> targetIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span> + n;
    <span class="hljs-keyword">if</span> (targetIndex &gt;= <span class="hljs-number">0</span> &amp;&amp; targetIndex &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">const</span> target = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>[targetIndex];
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">navigateTo</span>(target.<span class="hljs-property">path</span>);
    }
  }
  
  <span class="hljs-title function_">back</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">go</span>(-<span class="hljs-number">1</span>);
  }
  
  <span class="hljs-title function_">forward</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">go</span>(<span class="hljs-number">1</span>);
  }
  
  <span class="hljs-title function_">use</span>(<span class="hljs-params">middleware</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span>.<span class="hljs-title function_">push</span>(middleware);
  }
  
  <span class="hljs-comment">// äº‹ä»¶ç³»ç»Ÿ</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, callback</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span> = {};
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event]) <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event] = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event].<span class="hljs-title function_">push</span>(callback);
  }
  
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, data</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_events</span>[event].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(data));
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashRouter</span>([
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomePage</span>,
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">false</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">AboutPage</span>,
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">false</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/users/:id'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserPage</span>,
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/settings'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">SettingsPage</span>,
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span> }
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'*'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">NotFoundPage</span>
  }
]);

<span class="hljs-comment">// æ·»åŠ ä¸­é—´ä»¶</span>
router.<span class="hljs-title function_">use</span>(<span class="hljs-keyword">async</span> ({ <span class="hljs-keyword">from</span>, to }) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Navigating from <span class="hljs-subst">${<span class="hljs-keyword">from</span>?.path || <span class="hljs-string">'none'</span>}</span> to <span class="hljs-subst">${to}</span>`</span>);
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦è®¤è¯</span>
  <span class="hljs-keyword">const</span> route = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(router.<span class="hljs-property">routes</span>.<span class="hljs-title function_">values</span>())
    .<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> to.<span class="hljs-title function_">match</span>(r.<span class="hljs-property">regex</span>));
    
  <span class="hljs-keyword">if</span> (route?.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span> &amp;&amp; !<span class="hljs-title function_">isAuthenticated</span>()) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Authentication required, redirecting to login'</span>);
    router.<span class="hljs-title function_">navigateTo</span>(<span class="hljs-string">'/login'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
});

<span class="hljs-comment">// å¯¼èˆª</span>
router.<span class="hljs-title function_">navigateTo</span>(<span class="hljs-string">'/users/123'</span>);
</code></pre>
<h5 data-id="heading-11">3.2 Historyè·¯ç”±å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HistoryRouter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">routes = [], options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span> = [];
    
    <span class="hljs-comment">// é…ç½®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">base</span> = options.<span class="hljs-property">base</span> || <span class="hljs-string">''</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mode</span> = options.<span class="hljs-property">mode</span> || <span class="hljs-string">'history'</span>;
    
    <span class="hljs-comment">// åˆå§‹åŒ–è·¯ç”±</span>
    routes.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addRoute</span>(route.<span class="hljs-property">path</span>, route.<span class="hljs-property">component</span>, route.<span class="hljs-property">meta</span>);
    });
    
    <span class="hljs-comment">// ç›‘å¬popstateäº‹ä»¶</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopState</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    
    <span class="hljs-comment">// åˆå§‹è·¯ç”±</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handlePopState</span>();
  }
  
  <span class="hljs-title function_">addRoute</span>(<span class="hljs-params">path, component, meta = {}</span>) {
    <span class="hljs-keyword">const</span> keys = [];
    <span class="hljs-keyword">const</span> regex = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">pathToRegex</span>(path, keys);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>.<span class="hljs-title function_">set</span>(regex, {
      component,
      meta,
      keys,
      path
    });
  }
  
  <span class="hljs-title function_">pathToRegex</span>(<span class="hljs-params">path, keys</span>) {
    path = path
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\/:(\w+)/g</span>, <span class="hljs-function">(<span class="hljs-params">_, key</span>) =&gt;</span> {
        keys.<span class="hljs-title function_">push</span>(key);
        <span class="hljs-keyword">return</span> <span class="hljs-string">'/([^/]+)'</span>;
      })
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\*/g</span>, <span class="hljs-string">'(.*)'</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`^<span class="hljs-subst">${path}</span>$`</span>);
  }
  
  <span class="hljs-title function_">getCurrentPath</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> path = <span class="hljs-built_in">decodeURI</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">base</span> &amp;&amp; path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">base</span>)) {
      path = path.<span class="hljs-title function_">slice</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">base</span>.<span class="hljs-property">length</span>);
    }
    
    <span class="hljs-keyword">return</span> path || <span class="hljs-string">'/'</span>;
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handlePopState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> path = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCurrentPath</span>();
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">navigateTo</span>(path, <span class="hljs-literal">false</span>);
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">navigateTo</span>(<span class="hljs-params">path, updateHistory = <span class="hljs-literal">true</span></span>) {
    <span class="hljs-comment">// è§„èŒƒåŒ–è·¯å¾„</span>
    <span class="hljs-keyword">if</span> (!path.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/'</span>)) {
      path = <span class="hljs-string">'/'</span> + path;
    }
    
    <span class="hljs-comment">// æ‰§è¡Œä¸­é—´ä»¶</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> middleware <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span>) {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">middleware</span>({ <span class="hljs-attr">from</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>, <span class="hljs-attr">to</span>: path });
      <span class="hljs-keyword">if</span> (result === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }
    
    <span class="hljs-comment">// åŒ¹é…è·¯ç”±</span>
    <span class="hljs-keyword">let</span> match = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> params = {};
    <span class="hljs-keyword">let</span> matchedPath = <span class="hljs-string">''</span>;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [regex, route] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>) {
      <span class="hljs-keyword">const</span> result = path.<span class="hljs-title function_">match</span>(regex);
      <span class="hljs-keyword">if</span> (result) {
        match = route;
        matchedPath = route.<span class="hljs-property">path</span>;
        
        <span class="hljs-comment">// æå–å‚æ•°</span>
        route.<span class="hljs-property">keys</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key, index</span>) =&gt;</span> {
          params[key] = result[index + <span class="hljs-number">1</span>];
        });
        
        <span class="hljs-keyword">break</span>;
      }
    }
    
    <span class="hljs-keyword">if</span> (!match) {
      <span class="hljs-comment">// é»˜è®¤è·¯ç”±æˆ–404</span>
      match = <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>.<span class="hljs-title function_">get</span>(<span class="hljs-regexp">/.*/</span>);
      <span class="hljs-keyword">if</span> (!match) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Route not found: <span class="hljs-subst">${path}</span>`</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }
    
    <span class="hljs-comment">// æ›´æ–°history</span>
    <span class="hljs-keyword">if</span> (updateHistory) {
      <span class="hljs-keyword">const</span> fullPath = <span class="hljs-variable language_">this</span>.<span class="hljs-property">base</span> + path;
      
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>.<span class="hljs-property">path</span> === path) {
        <span class="hljs-comment">// ç›¸åŒè·¯å¾„ï¼Œæ›¿æ¢å½“å‰è®°å½•</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">replaceState</span>(
          { path, params, <span class="hljs-attr">meta</span>: match.<span class="hljs-property">meta</span> },
          <span class="hljs-string">''</span>,
          fullPath
        );
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ·»åŠ æ–°è®°å½•</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">pushState</span>(
          { path, params, <span class="hljs-attr">meta</span>: match.<span class="hljs-property">meta</span> },
          <span class="hljs-string">''</span>,
          fullPath
        );
      }
    }
    
    <span class="hljs-comment">// æ›´æ–°å½“å‰è·¯ç”±</span>
    <span class="hljs-keyword">const</span> previous = <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = {
      path,
      matchedPath,
      params,
      <span class="hljs-attr">component</span>: match.<span class="hljs-property">component</span>,
      <span class="hljs-attr">meta</span>: match.<span class="hljs-property">meta</span>,
      <span class="hljs-attr">fullPath</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">base</span> + path
    };
    
    <span class="hljs-comment">// è§¦å‘è·¯ç”±å˜åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'routeChange'</span>, { <span class="hljs-attr">from</span>: previous, <span class="hljs-attr">to</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> });
    
    <span class="hljs-comment">// æ›´æ–°é¡µé¢æ ‡é¢˜</span>
    <span class="hljs-keyword">if</span> (match.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>) {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = match.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  
  <span class="hljs-title function_">replace</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">navigateTo</span>(path, <span class="hljs-literal">true</span>);
  }
  
  <span class="hljs-title function_">go</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">go</span>(n);
  }
  
  <span class="hljs-title function_">back</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">back</span>();
  }
  
  <span class="hljs-title function_">forward</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">forward</span>();
  }
  
  <span class="hljs-title function_">use</span>(<span class="hljs-params">middleware</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span>.<span class="hljs-title function_">push</span>(middleware);
  }
  
  <span class="hljs-comment">// é“¾æ¥æ‹¦æˆª</span>
  <span class="hljs-title function_">interceptLinks</span>(<span class="hljs-params">container = <span class="hljs-variable language_">document</span></span>) {
    container.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> link = event.<span class="hljs-property">target</span>.<span class="hljs-title function_">closest</span>(<span class="hljs-string">'a'</span>);
      
      <span class="hljs-keyword">if</span> (!link || link.<span class="hljs-property">target</span> === <span class="hljs-string">'_blank'</span> || link.<span class="hljs-title function_">hasAttribute</span>(<span class="hljs-string">'download'</span>)) {
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-keyword">const</span> href = link.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'href'</span>);
      
      <span class="hljs-keyword">if</span> (href &amp;&amp; href.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/'</span>) &amp;&amp; !href.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'//'</span>)) {
        event.<span class="hljs-title function_">preventDefault</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">navigateTo</span>(href);
      }
    });
  }
  
  <span class="hljs-comment">// ç”ŸæˆURL</span>
  <span class="hljs-title function_">generate</span>(<span class="hljs-params">path, params = {}</span>) {
    <span class="hljs-keyword">let</span> result = path;
    
    <span class="hljs-comment">// æ›¿æ¢å‚æ•°</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(params).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      result = result.<span class="hljs-title function_">replace</span>(<span class="hljs-string">`:<span class="hljs-subst">${key}</span>`</span>, <span class="hljs-built_in">encodeURIComponent</span>(params[key]));
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">base</span> + result;
  }
}

<span class="hljs-comment">// è·¯ç”±è§†å›¾ç»„ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RouterView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentComponent</span> = <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è·å–routerå®ä¾‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">__router__</span>;
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Router not found'</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// ç›‘å¬è·¯ç”±å˜åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'routeChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateView</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    
    <span class="hljs-comment">// åˆå§‹æ¸²æŸ“</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateView</span>({ <span class="hljs-attr">to</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>.<span class="hljs-property">current</span> });
  }
  
  <span class="hljs-title function_">updateView</span>(<span class="hljs-params">{ to }</span>) {
    <span class="hljs-keyword">if</span> (!to || !to.<span class="hljs-property">component</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// æ¸…ç†æ—§ç»„ä»¶</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentComponent</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentComponent</span>.<span class="hljs-property">unmount</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentComponent</span>.<span class="hljs-title function_">unmount</span>();
    }
    
    <span class="hljs-comment">// æ¸²æŸ“æ–°ç»„ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentComponent</span> = to.<span class="hljs-property">component</span>;
    
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> to.<span class="hljs-property">component</span> === <span class="hljs-string">'function'</span>) {
      <span class="hljs-comment">// å‡½æ•°ç»„ä»¶</span>
      <span class="hljs-keyword">const</span> element = to.<span class="hljs-title function_">component</span>({ <span class="hljs-attr">route</span>: to });
      <span class="hljs-keyword">if</span> (element) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">appendChild</span>(element);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (to.<span class="hljs-property">component</span>.<span class="hljs-property">render</span>) {
      <span class="hljs-comment">// ç±»ç»„ä»¶</span>
      to.<span class="hljs-property">component</span>.<span class="hljs-title function_">render</span>({ <span class="hljs-attr">route</span>: to, <span class="hljs-attr">parent</span>: <span class="hljs-variable language_">this</span> });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å­—ç¬¦ä¸²æ¨¡æ¿</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">innerHTML</span> = to.<span class="hljs-property">component</span>;
    }
  }
  
  <span class="hljs-title function_">disconnectedCallback</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'routeChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateView</span>);
    }
  }
}

<span class="hljs-comment">// è‡ªå®šä¹‰å…ƒç´ æ³¨å†Œ</span>
customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">'router-view'</span>, <span class="hljs-title class_">RouterView</span>);

<span class="hljs-comment">// é“¾æ¥ç»„ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RouterLink</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">HTMLElement</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">to</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeClass</span> = <span class="hljs-string">'active'</span>;
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">observedAttributes</span>() {
    <span class="hljs-keyword">return</span> [<span class="hljs-string">'to'</span>, <span class="hljs-string">'active-class'</span>];
  }
  
  <span class="hljs-title function_">connectedCallback</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">__router__</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">to</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'to'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeClass</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'active-class'</span>) || <span class="hljs-string">'active'</span>;
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span> || !<span class="hljs-variable language_">this</span>.<span class="hljs-property">to</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateActiveState</span>();
    
    <span class="hljs-comment">// ç›‘å¬è·¯ç”±å˜åŒ–æ›´æ–°æ¿€æ´»çŠ¶æ€</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'routeChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateActiveState</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
  }
  
  <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">event</span>) {
    event.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>.<span class="hljs-title function_">navigateTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">to</span>);
  }
  
  <span class="hljs-title function_">updateActiveState</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> currentPath = <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>.<span class="hljs-property">current</span>?.<span class="hljs-property">path</span>;
    
    <span class="hljs-keyword">if</span> (currentPath === <span class="hljs-variable language_">this</span>.<span class="hljs-property">to</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">activeClass</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">activeClass</span>);
    }
  }
  
  <span class="hljs-title function_">disconnectedCallback</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">router</span>.<span class="hljs-title function_">off</span>(<span class="hljs-string">'routeChange'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateActiveState</span>);
    }
  }
}

customElements.<span class="hljs-title function_">define</span>(<span class="hljs-string">'router-link'</span>, <span class="hljs-title class_">RouterLink</span>);
</code></pre>
<h4 data-id="heading-12">å››ã€è¡¨å•éªŒè¯åº“</h4>
<h5 data-id="heading-13">4.1 éªŒè¯å™¨æ ¸å¿ƒ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Validator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">rules = {}, options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rules</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">normalizeRules</span>(rules);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {
      <span class="hljs-attr">stopOnFirstError</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">validateOnChange</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">validateOnBlur</span>: <span class="hljs-literal">true</span>,
      ...options
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">validators</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createBuiltInValidators</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">customValidators</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncValidators</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isValidating</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-title function_">normalizeRules</span>(<span class="hljs-params">rules</span>) {
    <span class="hljs-keyword">const</span> normalized = {};
    
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(rules).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">field</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> rule = rules[field];
      
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(rule)) {
        normalized[field] = rule;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> rule === <span class="hljs-string">'object'</span> &amp;&amp; rule !== <span class="hljs-literal">null</span>) {
        normalized[field] = [rule];
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> rule === <span class="hljs-string">'string'</span>) {
        normalized[field] = rule.<span class="hljs-title function_">split</span>(<span class="hljs-string">'|'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> ({ <span class="hljs-attr">type</span>: r }));
      }
    });
    
    <span class="hljs-keyword">return</span> normalized;
  }
  
  <span class="hljs-title function_">createBuiltInValidators</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">required</span>: <span class="hljs-function">(<span class="hljs-params">value, param, field</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">undefined</span> || value === <span class="hljs-literal">null</span> || value === <span class="hljs-string">''</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">'This field is required'</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },
      
      <span class="hljs-attr">email</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>;
        <span class="hljs-keyword">if</span> (value &amp;&amp; !regex.<span class="hljs-title function_">test</span>(value)) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">'Invalid email address'</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },
      
      <span class="hljs-attr">min</span>: <span class="hljs-function">(<span class="hljs-params">value, param</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> num = <span class="hljs-title class_">Number</span>(value);
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(num) &amp;&amp; num &lt; <span class="hljs-title class_">Number</span>(param)) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">`Minimum value is <span class="hljs-subst">${param}</span>`</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },
      
      <span class="hljs-attr">max</span>: <span class="hljs-function">(<span class="hljs-params">value, param</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> num = <span class="hljs-title class_">Number</span>(value);
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(num) &amp;&amp; num &gt; <span class="hljs-title class_">Number</span>(param)) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">`Maximum value is <span class="hljs-subst">${param}</span>`</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },
      
      <span class="hljs-attr">minLength</span>: <span class="hljs-function">(<span class="hljs-params">value, param</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (value &amp;&amp; value.<span class="hljs-property">length</span> &lt; <span class="hljs-title class_">Number</span>(param)) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">`Minimum length is <span class="hljs-subst">${param}</span>`</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },
      
      <span class="hljs-attr">maxLength</span>: <span class="hljs-function">(<span class="hljs-params">value, param</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (value &amp;&amp; value.<span class="hljs-property">length</span> &gt; <span class="hljs-title class_">Number</span>(param)) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">`Maximum length is <span class="hljs-subst">${param}</span>`</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },
      
      <span class="hljs-attr">pattern</span>: <span class="hljs-function">(<span class="hljs-params">value, param</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(param);
        <span class="hljs-keyword">if</span> (value &amp;&amp; !regex.<span class="hljs-title function_">test</span>(value)) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">'Invalid format'</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },
      
      <span class="hljs-attr">equals</span>: <span class="hljs-function">(<span class="hljs-params">value, param, field, data</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (value !== data[param]) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">`Must match <span class="hljs-subst">${param}</span>`</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },
      
      <span class="hljs-attr">custom</span>: <span class="hljs-function">(<span class="hljs-params">value, param, field, data</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> validator = <span class="hljs-variable language_">this</span>.<span class="hljs-property">customValidators</span>.<span class="hljs-title function_">get</span>(param);
        <span class="hljs-keyword">if</span> (validator) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">validator</span>(value, field, data);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      },
      
      <span class="hljs-attr">async</span>: <span class="hljs-keyword">async</span> (value, param, field, data) =&gt; {
        <span class="hljs-keyword">const</span> validator = <span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncValidators</span>.<span class="hljs-title function_">get</span>(param);
        <span class="hljs-keyword">if</span> (validator) {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">validator</span>(value, field, data);
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-keyword">return</span> error.<span class="hljs-property">message</span> || <span class="hljs-string">'Validation failed'</span>;
          }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
    };
  }
  
  <span class="hljs-title function_">addValidator</span>(<span class="hljs-params">name, validator, isAsync = <span class="hljs-literal">false</span></span>) {
    <span class="hljs-keyword">if</span> (isAsync) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncValidators</span>.<span class="hljs-title function_">set</span>(name, validator);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">customValidators</span>.<span class="hljs-title function_">set</span>(name, validator);
    }
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">validateField</span>(<span class="hljs-params">field, value, data = {}</span>) {
    <span class="hljs-keyword">const</span> rules = <span class="hljs-variable language_">this</span>.<span class="hljs-property">rules</span>[field];
    
    <span class="hljs-keyword">if</span> (!rules) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">delete</span>(field);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">const</span> fieldErrors = [];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> rule <span class="hljs-keyword">of</span> rules) {
      <span class="hljs-keyword">const</span> { type, message, params = {}, ...options } = rule;
      
      <span class="hljs-keyword">let</span> validator = <span class="hljs-variable language_">this</span>.<span class="hljs-property">validators</span>[type];
      
      <span class="hljs-keyword">if</span> (!validator) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Validator "<span class="hljs-subst">${type}</span>" not found for field "<span class="hljs-subst">${field}</span>"`</span>);
        <span class="hljs-keyword">continue</span>;
      }
      
      <span class="hljs-keyword">const</span> param = options.<span class="hljs-property">value</span> || options;
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">validator</span>(value, param, field, data);
        
        <span class="hljs-keyword">if</span> (result !== <span class="hljs-literal">true</span>) {
          fieldErrors.<span class="hljs-title function_">push</span>({
            type,
            <span class="hljs-attr">message</span>: message || result,
            <span class="hljs-attr">params</span>: param
          });
          
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>.<span class="hljs-property">stopOnFirstError</span>) {
            <span class="hljs-keyword">break</span>;
          }
        }
      } <span class="hljs-keyword">catch</span> (error) {
        fieldErrors.<span class="hljs-title function_">push</span>({
          type,
          <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span> || <span class="hljs-string">'Validation error'</span>,
          <span class="hljs-attr">params</span>: param
        });
      }
    }
    
    <span class="hljs-keyword">if</span> (fieldErrors.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">set</span>(field, fieldErrors);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">delete</span>(field);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params">data, fields = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isValidating</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">const</span> fieldList = fields || <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rules</span>);
    <span class="hljs-keyword">const</span> results = [];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> field <span class="hljs-keyword">of</span> fieldList) {
      <span class="hljs-keyword">const</span> value = data[field];
      <span class="hljs-keyword">const</span> isValid = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateField</span>(field, value, data);
      results.<span class="hljs-title function_">push</span>(isValid);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isValidating</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> results.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> result === <span class="hljs-literal">true</span>);
  }
  
  <span class="hljs-title function_">getErrors</span>(<span class="hljs-params">field = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">if</span> (field) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">get</span>(field) || [];
    }
    
    <span class="hljs-keyword">const</span> allErrors = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">errors, fieldName</span>) =&gt;</span> {
      allErrors[fieldName] = errors;
    });
    
    <span class="hljs-keyword">return</span> allErrors;
  }
  
  <span class="hljs-title function_">getFirstError</span>(<span class="hljs-params">field</span>) {
    <span class="hljs-keyword">const</span> errors = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getErrors</span>(field);
    <span class="hljs-keyword">return</span> errors.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> ? errors[<span class="hljs-number">0</span>] : <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-title function_">clearErrors</span>(<span class="hljs-params">field = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">if</span> (field) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">delete</span>(field);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">clear</span>();
    }
  }
  
  <span class="hljs-title function_">setErrors</span>(<span class="hljs-params">field, errors</span>) {
    <span class="hljs-keyword">if</span> (errors &amp;&amp; errors.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">set</span>(field, errors);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">delete</span>(field);
    }
  }
  
  <span class="hljs-title function_">hasErrors</span>(<span class="hljs-params">field = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">if</span> (field) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">has</span>(field);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> validator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Validator</span>({
  <span class="hljs-attr">username</span>: [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'required'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Username is required'</span> },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'minLength'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Minimum 3 characters'</span> },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'maxLength'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Maximum 20 characters'</span> },
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">'custom'</span>, 
      <span class="hljs-attr">value</span>: <span class="hljs-string">'usernameAvailable'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Username already taken'</span>
    }
  ],
  
  <span class="hljs-attr">email</span>: [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'required'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Email is required'</span> },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'email'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Invalid email format'</span> }
  ],
  
  <span class="hljs-attr">password</span>: [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'required'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Password is required'</span> },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'minLength'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Minimum 8 characters'</span> },
    { 
      <span class="hljs-attr">type</span>: <span class="hljs-string">'pattern'</span>, 
      <span class="hljs-attr">value</span>: <span class="hljs-string">'^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d).+$'</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Must contain uppercase, lowercase and number'</span>
    }
  ],
  
  <span class="hljs-attr">confirmPassword</span>: [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'required'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Please confirm password'</span> },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'equals'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'password'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Passwords do not match'</span> }
  ],
  
  <span class="hljs-attr">age</span>: [
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'min'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">18</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Must be at least 18 years old'</span> },
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'max'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">120</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Invalid age'</span> }
  ]
});

<span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰éªŒè¯å™¨</span>
validator.<span class="hljs-title function_">addValidator</span>(<span class="hljs-string">'usernameAvailable'</span>, <span class="hljs-keyword">async</span> (value) =&gt; {
  <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ£€æŸ¥</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/check-username?username=<span class="hljs-subst">${value}</span>`</span>);
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
  
  <span class="hljs-keyword">if</span> (!data.<span class="hljs-property">available</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'Username is already taken'</span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// éªŒè¯æ•°æ®</span>
<span class="hljs-keyword">const</span> formData = {
  <span class="hljs-attr">username</span>: <span class="hljs-string">'john123'</span>,
  <span class="hljs-attr">email</span>: <span class="hljs-string">'john@example.com'</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">'Password123'</span>,
  <span class="hljs-attr">confirmPassword</span>: <span class="hljs-string">'Password123'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>
};

validator.<span class="hljs-title function_">validate</span>(formData).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">isValid</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Form valid:'</span>, isValid);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Errors:'</span>, validator.<span class="hljs-title function_">getErrors</span>());
});
</code></pre>
<h5 data-id="heading-14">4.2 è¡¨å•ç»‘å®šä¸é›†æˆ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Form</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fields</span> = options.<span class="hljs-property">fields</span> || {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initialValues</span>(options.<span class="hljs-property">initialValues</span> || {});
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">touched</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitting</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitCount</span> = <span class="hljs-number">0</span>;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">validator</span> = options.<span class="hljs-property">validator</span> || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Validator</span>(options.<span class="hljs-property">rules</span> || {});
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onSubmit</span> = options.<span class="hljs-property">onSubmit</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onChange</span> = options.<span class="hljs-property">onChange</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onValidate</span> = options.<span class="hljs-property">onValidate</span>;
    
    <span class="hljs-comment">// äº‹ä»¶ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = {
      <span class="hljs-attr">change</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),
      <span class="hljs-attr">submit</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),
      <span class="hljs-attr">error</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),
      <span class="hljs-attr">validate</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
    };
  }
  
  <span class="hljs-title function_">initialValues</span>(<span class="hljs-params">initial</span>) {
    <span class="hljs-keyword">const</span> values = {};
    
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fields</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> field = <span class="hljs-variable language_">this</span>.<span class="hljs-property">fields</span>[key];
      values[key] = initial[key] !== <span class="hljs-literal">undefined</span> ? initial[key] : field.<span class="hljs-property">initialValue</span>;
    });
    
    <span class="hljs-keyword">return</span> values;
  }
  
  <span class="hljs-title function_">setFieldValue</span>(<span class="hljs-params">field, value, validate = <span class="hljs-literal">true</span></span>) {
    <span class="hljs-keyword">const</span> oldValue = <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>[field];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>[field] = value;
    
    <span class="hljs-comment">// è§¦å‘å˜æ›´äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'change'</span>, { field, value, oldValue });
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">onChange</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onChange</span>(field, value, oldValue);
    }
    
    <span class="hljs-comment">// è‡ªåŠ¨éªŒè¯</span>
    <span class="hljs-keyword">if</span> (validate) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateField</span>(field);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-title function_">setValues</span>(<span class="hljs-params">values, validate = <span class="hljs-literal">true</span></span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(values).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">field</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setFieldValue</span>(field, values[field], <span class="hljs-literal">false</span>);
    });
    
    <span class="hljs-keyword">if</span> (validate) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validate</span>();
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-title function_">getFieldValue</span>(<span class="hljs-params">field</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>[field];
  }
  
  <span class="hljs-title function_">getValues</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span> };
  }
  
  <span class="hljs-title function_">reset</span>(<span class="hljs-params">values = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initialValues</span>(values);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">touched</span>.<span class="hljs-title function_">clear</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitting</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitCount</span> = <span class="hljs-number">0</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">validator</span>.<span class="hljs-title function_">clearErrors</span>();
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'change'</span>, { <span class="hljs-attr">type</span>: <span class="hljs-string">'reset'</span>, <span class="hljs-attr">values</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span> });
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-title function_">touchField</span>(<span class="hljs-params">field</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">touched</span>.<span class="hljs-title function_">add</span>(field);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-title function_">touchAll</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">field</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">touched</span>.<span class="hljs-title function_">add</span>(field);
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-title function_">isTouched</span>(<span class="hljs-params">field</span>) {
    <span class="hljs-keyword">if</span> (field) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">touched</span>.<span class="hljs-title function_">has</span>(field);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">touched</span>.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>;
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">validateField</span>(<span class="hljs-params">field</span>) {
    <span class="hljs-keyword">const</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>[field];
    <span class="hljs-keyword">const</span> isValid = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">validator</span>.<span class="hljs-title function_">validateField</span>(field, value, <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>);
    
    <span class="hljs-keyword">if</span> (isValid) {
      <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>[field];
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>[field] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">validator</span>.<span class="hljs-title function_">getErrors</span>(field);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'validate'</span>, { field, isValid, <span class="hljs-attr">errors</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>[field] });
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">onValidate</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onValidate</span>(field, isValid, <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>[field]);
    }
    
    <span class="hljs-keyword">return</span> isValid;
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params">fields = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">const</span> isValid = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">validator</span>.<span class="hljs-title function_">validate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>, fields);
    
    <span class="hljs-comment">// æ›´æ–°é”™è¯¯çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> errors = <span class="hljs-variable language_">this</span>.<span class="hljs-property">validator</span>.<span class="hljs-title function_">getErrors</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span> = errors;
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'validate'</span>, { isValid, errors });
    
    <span class="hljs-keyword">return</span> isValid;
  }
  
  <span class="hljs-title function_">getFieldError</span>(<span class="hljs-params">field</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>[field] || [];
  }
  
  <span class="hljs-title function_">hasErrors</span>(<span class="hljs-params">field = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">if</span> (field) {
      <span class="hljs-keyword">return</span> !!<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>[field];
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>).<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>;
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">submit</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitting</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitCount</span>++;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">touchAll</span>();
    
    <span class="hljs-comment">// éªŒè¯æ‰€æœ‰å­—æ®µ</span>
    <span class="hljs-keyword">const</span> isValid = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validate</span>();
    
    <span class="hljs-keyword">if</span> (!isValid) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitting</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'error'</span>, { <span class="hljs-attr">errors</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span> });
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>({ <span class="hljs-attr">errors</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>, <span class="hljs-attr">values</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span> });
    }
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">this</span>.<span class="hljs-property">onSubmit</span> 
        ? <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onSubmit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>, <span class="hljs-variable language_">this</span>)
        : <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">defaultSubmit</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>);
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitting</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'submit'</span>, { <span class="hljs-attr">values</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span>, result });
      
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitting</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'error'</span>, { error, <span class="hljs-attr">values</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">values</span> });
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-title function_">defaultSubmit</span>(<span class="hljs-params">values</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(values);
  }
  
  <span class="hljs-comment">// äº‹ä»¶ç³»ç»Ÿ</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, callback</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event].<span class="hljs-title function_">add</span>(callback);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(event, callback);
  }
  
  <span class="hljs-title function_">off</span>(<span class="hljs-params">event, callback</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event].<span class="hljs-title function_">delete</span>(callback);
    }
  }
  
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, data</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(data));
    }
  }
}

<span class="hljs-comment">// Reactè¡¨å•Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useForm</span>(<span class="hljs-params">options = {}</span>) {
  <span class="hljs-keyword">const</span> [form] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Form</span>(options));
  <span class="hljs-keyword">const</span> [values, setValues] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(form.<span class="hljs-title function_">getValues</span>());
  <span class="hljs-keyword">const</span> [errors, setErrors] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>({});
  <span class="hljs-keyword">const</span> [touched, setTouched] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>({});
  <span class="hljs-keyword">const</span> [submitting, setSubmitting] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// ç›‘å¬è¡¨å•å˜åŒ–</span>
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> unsubscribe = form.<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setValues</span>(form.<span class="hljs-title function_">getValues</span>());
    });
    
    <span class="hljs-keyword">return</span> unsubscribe;
  }, [form]);
  
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> unsubscribe = form.<span class="hljs-title function_">on</span>(<span class="hljs-string">'validate'</span>, <span class="hljs-function">(<span class="hljs-params">{ errors: newErrors }</span>) =&gt;</span> {
      <span class="hljs-title function_">setErrors</span>(newErrors);
    });
    
    <span class="hljs-keyword">return</span> unsubscribe;
  }, [form]);
  
  <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> unsubscribe = form.<span class="hljs-title function_">on</span>(<span class="hljs-string">'submit'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setSubmitting</span>(<span class="hljs-literal">false</span>);
    });
    
    <span class="hljs-keyword">return</span> unsubscribe;
  }, [form]);
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">field</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> value = event.<span class="hljs-property">target</span>.<span class="hljs-property">type</span> === <span class="hljs-string">'checkbox'</span> 
      ? event.<span class="hljs-property">target</span>.<span class="hljs-property">checked</span> 
      : event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>;
    
    form.<span class="hljs-title function_">setFieldValue</span>(field, value);
  };
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBlur</span> = (<span class="hljs-params">field</span>) =&gt; <span class="hljs-function">() =&gt;</span> {
    form.<span class="hljs-title function_">touchField</span>(field);
    form.<span class="hljs-title function_">validateField</span>(field);
    <span class="hljs-title function_">setTouched</span>({ ...touched, [field]: <span class="hljs-literal">true</span> });
  };
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">callback</span>) =&gt; <span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-keyword">if</span> (event) event.<span class="hljs-title function_">preventDefault</span>();
    
    <span class="hljs-title function_">setSubmitting</span>(<span class="hljs-literal">true</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> form.<span class="hljs-title function_">submit</span>();
      <span class="hljs-keyword">if</span> (callback) <span class="hljs-title function_">callback</span>(result, form);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Form submission error:'</span>, error);
    }
  };
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">register</span> = (<span class="hljs-params">field, options = {}</span>) =&gt; {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">name</span>: field,
      <span class="hljs-attr">value</span>: values[field] || <span class="hljs-string">''</span>,
      <span class="hljs-attr">onChange</span>: <span class="hljs-title function_">handleChange</span>(field),
      <span class="hljs-attr">onBlur</span>: <span class="hljs-title function_">handleBlur</span>(field),
      ...options
    };
  };
  
  <span class="hljs-keyword">return</span> {
    values,
    errors,
    touched,
    submitting,
    form,
    handleChange,
    handleBlur,
    handleSubmit,
    register,
    <span class="hljs-attr">setFieldValue</span>: form.<span class="hljs-property">setFieldValue</span>.<span class="hljs-title function_">bind</span>(form),
    <span class="hljs-attr">setValues</span>: form.<span class="hljs-property">setValues</span>.<span class="hljs-title function_">bind</span>(form),
    <span class="hljs-attr">validate</span>: form.<span class="hljs-property">validate</span>.<span class="hljs-title function_">bind</span>(form),
    <span class="hljs-attr">reset</span>: form.<span class="hljs-property">reset</span>.<span class="hljs-title function_">bind</span>(form),
    <span class="hljs-attr">getFieldError</span>: form.<span class="hljs-property">getFieldError</span>.<span class="hljs-title function_">bind</span>(form),
    <span class="hljs-attr">hasErrors</span>: form.<span class="hljs-property">hasErrors</span>.<span class="hljs-title function_">bind</span>(form)
  };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginForm</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { register, handleSubmit, errors, submitting } = <span class="hljs-title function_">useForm</span>({
    <span class="hljs-attr">initialValues</span>: {
      <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">password</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">remember</span>: <span class="hljs-literal">false</span>
    },
    
    <span class="hljs-attr">rules</span>: {
      <span class="hljs-attr">email</span>: [
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'required'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Email is required'</span> },
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'email'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Invalid email format'</span> }
      ],
      <span class="hljs-attr">password</span>: [
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'required'</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Password is required'</span> },
        { <span class="hljs-attr">type</span>: <span class="hljs-string">'minLength'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">'Minimum 6 characters'</span> }
      ]
    },
    
    <span class="hljs-attr">onSubmit</span>: <span class="hljs-keyword">async</span> (values) =&gt; {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/login'</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(values)
      });
      
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Login failed'</span>);
      }
      
      <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();
    }
  });
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit()}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Email<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
          {<span class="hljs-attr">...register</span>('<span class="hljs-attr">email</span>')}
        /&gt;</span>
        {errors.email &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"error"</span>&gt;</span>{errors.email[0].message}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>Password<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
          {<span class="hljs-attr">...register</span>('<span class="hljs-attr">password</span>')}
        /&gt;</span>
        {errors.password &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"error"</span>&gt;</span>{errors.password[0].message}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
            {<span class="hljs-attr">...register</span>('<span class="hljs-attr">remember</span>')}
          /&gt;</span>
          Remember me
        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{submitting}</span>&gt;</span>
        {submitting ? 'Logging in...' : 'Login'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
}
</code></pre>
<h5 data-id="heading-15">äº”ã€HTTPå®¢æˆ·ç«¯(ç±»ä¼¼Axios)</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpClient</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaults</span> = {
      <span class="hljs-attr">baseURL</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
        ...config.<span class="hljs-property">headers</span>
      },
      ...config
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span> = {
      <span class="hljs-attr">request</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">InterceptorManager</span>(),
      <span class="hljs-attr">response</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">InterceptorManager</span>()
    };
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-comment">// åˆå¹¶é…ç½®</span>
    <span class="hljs-keyword">const</span> requestConfig = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeConfig</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">defaults</span>, config);
    
    <span class="hljs-comment">// æ„å»ºè¯·æ±‚é“¾</span>
    <span class="hljs-keyword">const</span> chain = [<span class="hljs-variable language_">this</span>.<span class="hljs-property">dispatchRequest</span>, <span class="hljs-literal">undefined</span>];
    <span class="hljs-keyword">let</span> promise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(requestConfig);
    
    <span class="hljs-comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">interceptor</span> =&gt;</span> {
      chain.<span class="hljs-title function_">unshift</span>(interceptor.<span class="hljs-property">fulfilled</span>, interceptor.<span class="hljs-property">rejected</span>);
    });
    
    <span class="hljs-comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">interceptor</span> =&gt;</span> {
      chain.<span class="hljs-title function_">push</span>(interceptor.<span class="hljs-property">fulfilled</span>, interceptor.<span class="hljs-property">rejected</span>);
    });
    
    <span class="hljs-comment">// æ‰§è¡Œæ‹¦æˆªå™¨é“¾</span>
    <span class="hljs-keyword">while</span> (chain.<span class="hljs-property">length</span>) {
      promise = promise.<span class="hljs-title function_">then</span>(chain.<span class="hljs-title function_">shift</span>(), chain.<span class="hljs-title function_">shift</span>());
    }
    
    <span class="hljs-keyword">return</span> promise;
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">dispatchRequest</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-comment">// åˆ›å»ºAbortControlleræ”¯æŒå–æ¶ˆè¯·æ±‚</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> controller.<span class="hljs-title function_">abort</span>(), config.<span class="hljs-property">timeout</span>);
    
    <span class="hljs-comment">// æ„å»ºURL</span>
    <span class="hljs-keyword">let</span> url = config.<span class="hljs-property">url</span>;
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">baseURL</span> &amp;&amp; !url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'http'</span>)) {
      url = config.<span class="hljs-property">baseURL</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\/$/</span>, <span class="hljs-string">''</span>) + <span class="hljs-string">'/'</span> + url.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\//</span>, <span class="hljs-string">''</span>);
    }
    
    <span class="hljs-comment">// å¤„ç†å‚æ•°</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">params</span>) {
      <span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>();
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(config.<span class="hljs-property">params</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> value = config.<span class="hljs-property">params</span>[key];
        <span class="hljs-keyword">if</span> (value !== <span class="hljs-literal">null</span> &amp;&amp; value !== <span class="hljs-literal">undefined</span>) {
          params.<span class="hljs-title function_">append</span>(key, value);
        }
      });
      
      <span class="hljs-keyword">const</span> queryString = params.<span class="hljs-title function_">toString</span>();
      <span class="hljs-keyword">if</span> (queryString) {
        url += (url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'?'</span>) ? <span class="hljs-string">'&amp;'</span> : <span class="hljs-string">'?'</span>) + queryString;
      }
    }
    
    <span class="hljs-comment">// å‡†å¤‡è¯·æ±‚é€‰é¡¹</span>
    <span class="hljs-keyword">const</span> options = {
      <span class="hljs-attr">method</span>: config.<span class="hljs-property">method</span> || <span class="hljs-string">'GET'</span>,
      <span class="hljs-attr">headers</span>: { ...config.<span class="hljs-property">headers</span> },
      <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>,
      <span class="hljs-attr">credentials</span>: config.<span class="hljs-property">withCredentials</span> ? <span class="hljs-string">'include'</span> : <span class="hljs-string">'same-origin'</span>
    };
    
    <span class="hljs-comment">// å¤„ç†è¯·æ±‚ä½“</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">data</span>) {
      <span class="hljs-keyword">if</span> (options.<span class="hljs-property">headers</span>[<span class="hljs-string">'Content-Type'</span>] === <span class="hljs-string">'application/json'</span>) {
        options.<span class="hljs-property">body</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(config.<span class="hljs-property">data</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (options.<span class="hljs-property">headers</span>[<span class="hljs-string">'Content-Type'</span>] === <span class="hljs-string">'application/x-www-form-urlencoded'</span>) {
        <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>();
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(config.<span class="hljs-property">data</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
          formData.<span class="hljs-title function_">append</span>(key, config.<span class="hljs-property">data</span>[key]);
        });
        options.<span class="hljs-property">body</span> = formData;
      } <span class="hljs-keyword">else</span> {
        options.<span class="hljs-property">body</span> = config.<span class="hljs-property">data</span>;
      }
    }
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, options);
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-comment">// å¤„ç†å“åº”</span>
      <span class="hljs-keyword">let</span> data;
      <span class="hljs-keyword">const</span> contentType = response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>);
      
      <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (contentType &amp;&amp; contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'text/'</span>)) {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">text</span>();
      } <span class="hljs-keyword">else</span> {
        data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">blob</span>();
      }
      
      <span class="hljs-keyword">const</span> result = {
        data,
        <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,
        <span class="hljs-attr">statusText</span>: response.<span class="hljs-property">statusText</span>,
        <span class="hljs-attr">headers</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseHeaders</span>(response.<span class="hljs-property">headers</span>),
        config,
        <span class="hljs-attr">request</span>: response
      };
      
      <span class="hljs-comment">// å¤„ç†HTTPé”™è¯¯çŠ¶æ€ç </span>
      <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createError</span>(
          <span class="hljs-string">`Request failed with status code <span class="hljs-subst">${response.status}</span>`</span>,
          config,
          response.<span class="hljs-property">status</span>,
          response,
          data
        );
      }
      
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      
      <span class="hljs-keyword">if</span> (error.<span class="hljs-property">name</span> === <span class="hljs-string">'AbortError'</span>) {
        error = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createError</span>(
          <span class="hljs-string">`Timeout of <span class="hljs-subst">${config.timeout}</span>ms exceeded`</span>,
          config,
          <span class="hljs-string">'ECONNABORTED'</span>,
          <span class="hljs-literal">null</span>,
          <span class="hljs-literal">null</span>
        );
      }
      
      <span class="hljs-keyword">throw</span> error;
    }
  }
  
  <span class="hljs-title function_">createError</span>(<span class="hljs-params">message, config, code, request, response</span>) {
    <span class="hljs-keyword">const</span> error = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(message);
    error.<span class="hljs-property">config</span> = config;
    error.<span class="hljs-property">code</span> = code;
    error.<span class="hljs-property">request</span> = request;
    error.<span class="hljs-property">response</span> = response;
    error.<span class="hljs-property">isAxiosError</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> error;
  }
  
  <span class="hljs-title function_">parseHeaders</span>(<span class="hljs-params">headers</span>) {
    <span class="hljs-keyword">const</span> parsed = {};
    headers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">value, key</span>) =&gt;</span> {
      parsed[key] = value;
    });
    <span class="hljs-keyword">return</span> parsed;
  }
  
  <span class="hljs-title function_">mergeConfig</span>(<span class="hljs-params">config1, config2</span>) {
    <span class="hljs-keyword">const</span> config = { ...config1 };
    
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(config2).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'headers'</span>) {
        config.<span class="hljs-property">headers</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">mergeHeaders</span>(config1.<span class="hljs-property">headers</span>, config2.<span class="hljs-property">headers</span>);
      } <span class="hljs-keyword">else</span> {
        config[key] = config2[key];
      }
    });
    
    <span class="hljs-keyword">return</span> config;
  }
  
  <span class="hljs-title function_">mergeHeaders</span>(<span class="hljs-params">headers1, headers2</span>) {
    <span class="hljs-keyword">const</span> headers = { ...headers1 };
    
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(headers2).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (headers2[key] !== <span class="hljs-literal">undefined</span>) {
        headers[key] = headers2[key];
      }
    });
    
    <span class="hljs-keyword">return</span> headers;
  }
  
  <span class="hljs-comment">// å¿«æ·æ–¹æ³•</span>
  <span class="hljs-title function_">get</span>(<span class="hljs-params">url, config = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>, url });
  }
  
  <span class="hljs-title function_">post</span>(<span class="hljs-params">url, data, config = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, url, data });
  }
  
  <span class="hljs-title function_">put</span>(<span class="hljs-params">url, data, config = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'PUT'</span>, url, data });
  }
  
  <span class="hljs-title function_">delete</span>(<span class="hljs-params">url, config = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span>, url });
  }
  
  <span class="hljs-title function_">patch</span>(<span class="hljs-params">url, data, config = {}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'PATCH'</span>, url, data });
  }
  
  <span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span>
  <span class="hljs-title function_">create</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>(config);
  }
  
  <span class="hljs-comment">// å¹¶å‘è¯·æ±‚</span>
  <span class="hljs-title function_">all</span>(<span class="hljs-params">promises</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
  }
  
  <span class="hljs-title function_">spread</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">arr</span>) {
      <span class="hljs-keyword">return</span> callback.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, arr);
    };
  }
}

<span class="hljs-comment">// æ‹¦æˆªå™¨ç®¡ç†å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">InterceptorManager</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span> = [];
  }
  
  <span class="hljs-title function_">use</span>(<span class="hljs-params">fulfilled, rejected</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">push</span>({
      fulfilled,
      rejected
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
  }
  
  <span class="hljs-title function_">eject</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[id]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[id] = <span class="hljs-literal">null</span>;
    }
  }
  
  <span class="hljs-title function_">forEach</span>(<span class="hljs-params">fn</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">handler</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (handler !== <span class="hljs-literal">null</span>) {
        <span class="hljs-title function_">fn</span>(handler);
      }
    });
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://api.example.com'</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'X-Requested-With'</span>: <span class="hljs-string">'XMLHttpRequest'</span>
  }
});

<span class="hljs-comment">// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨</span>
http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
    <span class="hljs-comment">// æ·»åŠ è®¤è¯token</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
    }
    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);

<span class="hljs-comment">// æ·»åŠ å“åº”æ‹¦æˆªå™¨</span>
http.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response,
  <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span> &amp;&amp; error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
      <span class="hljs-comment">// å¤„ç†æœªæˆæƒ</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>);
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);

<span class="hljs-comment">// ä½¿ç”¨HTTPå®¢æˆ·ç«¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> http.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/users'</span>, {
      <span class="hljs-attr">params</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">limit</span>: <span class="hljs-number">10</span> }
    });
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Users:'</span>, response.<span class="hljs-property">data</span>);
    
    <span class="hljs-comment">// åˆ›å»ºç”¨æˆ·</span>
    <span class="hljs-keyword">const</span> createResponse = <span class="hljs-keyword">await</span> http.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/users'</span>, {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'John Doe'</span>,
      <span class="hljs-attr">email</span>: <span class="hljs-string">'john@example.com'</span>
    });
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Created user:'</span>, createResponse.<span class="hljs-property">data</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Request failed:'</span>, error);
  }
}
</code></pre>
<h4 data-id="heading-16">å…­ã€æ’ä»¶ç³»ç»Ÿä¸ç”Ÿæ€ç³»ç»Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ’ä»¶ç³»ç»ŸåŸºç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PluginSystem</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">plugins</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span> = [];
  }
  
  <span class="hljs-comment">// æ³¨å†Œæ’ä»¶</span>
  <span class="hljs-title function_">use</span>(<span class="hljs-params">plugin, options = {}</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> plugin === <span class="hljs-string">'function'</span>) {
      <span class="hljs-title function_">plugin</span>(<span class="hljs-variable language_">this</span>, options);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (plugin &amp;&amp; <span class="hljs-keyword">typeof</span> plugin.<span class="hljs-property">install</span> === <span class="hljs-string">'function'</span>) {
      plugin.<span class="hljs-title function_">install</span>(<span class="hljs-variable language_">this</span>, options);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> plugin === <span class="hljs-string">'object'</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(plugin).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
        <span class="hljs-variable language_">this</span>[key] = plugin[key];
      });
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// æ³¨å†Œé’©å­</span>
  <span class="hljs-title function_">hook</span>(<span class="hljs-params">name, callback</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">has</span>(name)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">set</span>(name, []);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">get</span>(name).<span class="hljs-title function_">push</span>(callback);
    
    <span class="hljs-comment">// è¿”å›å–æ¶ˆæ³¨å†Œå‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> callbacks = <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">get</span>(name);
      <span class="hljs-keyword">if</span> (callbacks) {
        <span class="hljs-keyword">const</span> index = callbacks.<span class="hljs-title function_">indexOf</span>(callback);
        <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
          callbacks.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
        }
      }
    };
  }
  
  <span class="hljs-comment">// è§¦å‘é’©å­</span>
  <span class="hljs-title function_">triggerHook</span>(<span class="hljs-params">name, ...args</span>) {
    <span class="hljs-keyword">const</span> callbacks = <span class="hljs-variable language_">this</span>.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">get</span>(name);
    
    <span class="hljs-keyword">if</span> (callbacks) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        callbacks.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(...args))
      );
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>();
  }
  
  <span class="hljs-comment">// æ·»åŠ ä¸­é—´ä»¶</span>
  <span class="hljs-title function_">middleware</span>(<span class="hljs-params">middleware</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span>.<span class="hljs-title function_">push</span>(middleware);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// æ‰§è¡Œä¸­é—´ä»¶é“¾</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">runMiddlewares</span>(<span class="hljs-params">context, next</span>) {
    <span class="hljs-keyword">let</span> index = -<span class="hljs-number">1</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">dispatch</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">i</span>) =&gt; {
      <span class="hljs-keyword">if</span> (i &lt;= index) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'next() called multiple times'</span>);
      }
      
      index = i;
      <span class="hljs-keyword">let</span> fn = <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span>[i];
      
      <span class="hljs-keyword">if</span> (i === <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span>.<span class="hljs-property">length</span>) {
        fn = next;
      }
      
      <span class="hljs-keyword">if</span> (!fn) {
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fn</span>(context, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">dispatch</span>(i + <span class="hljs-number">1</span>));
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">throw</span> error;
      }
    };
    
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">dispatch</span>(<span class="hljs-number">0</span>);
  }
  
  <span class="hljs-comment">// äº‹ä»¶æ€»çº¿</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, callback</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hook</span>(<span class="hljs-string">`event:<span class="hljs-subst">${event}</span>`</span>, callback);
  }
  
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, ...args</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerHook</span>(<span class="hljs-string">`event:<span class="hljs-subst">${event}</span>`</span>, ...args);
  }
  
  <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸç®¡ç†</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">initialize</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerHook</span>(<span class="hljs-string">'beforeInitialize'</span>);
    
    <span class="hljs-comment">// åˆå§‹åŒ–æ‰€æœ‰æ’ä»¶</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [name, plugin] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">plugins</span>) {
      <span class="hljs-keyword">if</span> (plugin.<span class="hljs-property">initialize</span>) {
        <span class="hljs-keyword">await</span> plugin.<span class="hljs-title function_">initialize</span>(<span class="hljs-variable language_">this</span>);
      }
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerHook</span>(<span class="hljs-string">'afterInitialize'</span>);
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">destroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerHook</span>(<span class="hljs-string">'beforeDestroy'</span>);
    
    <span class="hljs-comment">// é”€æ¯æ‰€æœ‰æ’ä»¶</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [name, plugin] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">plugins</span>) {
      <span class="hljs-keyword">if</span> (plugin.<span class="hljs-property">destroy</span>) {
        <span class="hljs-keyword">await</span> plugin.<span class="hljs-title function_">destroy</span>(<span class="hljs-variable language_">this</span>);
      }
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerHook</span>(<span class="hljs-string">'afterDestroy'</span>);
  }
}

<span class="hljs-comment">// ç¤ºä¾‹æ’ä»¶ï¼šæ—¥å¿—æ’ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggerPlugin</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">install</span>(<span class="hljs-params">app, options</span>) {
    <span class="hljs-keyword">const</span> logger = {
      <span class="hljs-attr">info</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[INFO]'</span>, ...args),
      <span class="hljs-attr">warn</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'[WARN]'</span>, ...args),
      <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[ERROR]'</span>, ...args),
      <span class="hljs-attr">debug</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">'[DEBUG]'</span>, ...args)
    };
    
    <span class="hljs-comment">// æ·»åŠ åˆ°åº”ç”¨å®ä¾‹</span>
    app.<span class="hljs-property">logger</span> = logger;
    
    <span class="hljs-comment">// æ·»åŠ æ—¥å¿—ä¸­é—´ä»¶</span>
    app.<span class="hljs-title function_">middleware</span>(<span class="hljs-keyword">async</span> (ctx, next) =&gt; {
      <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Started <span class="hljs-subst">${ctx.method}</span> <span class="hljs-subst">${ctx.url}</span>`</span>);
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>();
        <span class="hljs-keyword">const</span> duration = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start;
        logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`Completed <span class="hljs-subst">${ctx.status}</span> in <span class="hljs-subst">${duration}</span>ms`</span>);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> duration = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start;
        logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Failed in <span class="hljs-subst">${duration}</span>ms:`</span>, error);
        <span class="hljs-keyword">throw</span> error;
      }
    });
    
    <span class="hljs-comment">// æ³¨å†Œä¸ºæ’ä»¶</span>
    app.<span class="hljs-property">plugins</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'logger'</span>, logger);
  }
}

<span class="hljs-comment">// ç¤ºä¾‹æ’ä»¶ï¼šçŠ¶æ€æŒä¹…åŒ–æ’ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PersistencePlugin</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">install</span>(<span class="hljs-params">app, options</span>) {
    <span class="hljs-keyword">const</span> { key = <span class="hljs-string">'app-state'</span>, storage = <span class="hljs-variable language_">localStorage</span> } = options;
    
    <span class="hljs-comment">// ä¿å­˜çŠ¶æ€</span>
    app.<span class="hljs-property">saveState</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span> ? <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">getState</span>() : <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
        storage.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state));
        app.<span class="hljs-property">logger</span>?.<span class="hljs-title function_">info</span>(<span class="hljs-string">'State saved to storage'</span>);
      } <span class="hljs-keyword">catch</span> (error) {
        app.<span class="hljs-property">logger</span>?.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to save state:'</span>, error);
      }
    };
    
    <span class="hljs-comment">// åŠ è½½çŠ¶æ€</span>
    app.<span class="hljs-property">loadState</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> saved = storage.<span class="hljs-title function_">getItem</span>(key);
        <span class="hljs-keyword">if</span> (saved) {
          <span class="hljs-keyword">const</span> state = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved);
          
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'@@LOAD_SAVED_STATE'</span>, <span class="hljs-attr">payload</span>: state });
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>, ...state };
          }
          
          app.<span class="hljs-property">logger</span>?.<span class="hljs-title function_">info</span>(<span class="hljs-string">'State loaded from storage'</span>);
          <span class="hljs-keyword">return</span> state;
        }
      } <span class="hljs-keyword">catch</span> (error) {
        app.<span class="hljs-property">logger</span>?.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to load state:'</span>, error);
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    };
    
    <span class="hljs-comment">// æ¸…é™¤ä¿å­˜çš„çŠ¶æ€</span>
    app.<span class="hljs-property">clearState</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      storage.<span class="hljs-title function_">removeItem</span>(key);
      app.<span class="hljs-property">logger</span>?.<span class="hljs-title function_">info</span>(<span class="hljs-string">'State cleared from storage'</span>);
    };
    
    <span class="hljs-comment">// è‡ªåŠ¨ä¿å­˜é’©å­</span>
    <span class="hljs-keyword">if</span> (app.<span class="hljs-property">store</span>) {
      app.<span class="hljs-property">store</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-function">() =&gt;</span> {
        app.<span class="hljs-title function_">saveState</span>();
      });
    }
    
    <span class="hljs-comment">// æ³¨å†Œç”Ÿå‘½å‘¨æœŸé’©å­</span>
    app.<span class="hljs-title function_">hook</span>(<span class="hljs-string">'afterInitialize'</span>, <span class="hljs-function">() =&gt;</span> {
      app.<span class="hljs-title function_">loadState</span>();
    });
  }
}

<span class="hljs-comment">// åˆ›å»ºåº”ç”¨å®ä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PluginSystem</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config = {}</span>) {
    <span class="hljs-variable language_">super</span>();
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">components</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mixins</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">services</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    
    <span class="hljs-comment">// åˆå§‹åŒ–æ ¸å¿ƒæœåŠ¡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initCoreServices</span>();
  }
  
  <span class="hljs-title function_">initCoreServices</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// äº‹ä»¶æ€»çº¿</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">services</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'events'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>());
    
    <span class="hljs-comment">// HTTPå®¢æˆ·ç«¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">services</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'http'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpClient</span>({
      <span class="hljs-attr">baseURL</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">apiBaseURL</span>
    }));
    
    <span class="hljs-comment">// è·¯ç”±</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">services</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'router'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HistoryRouter</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">routes</span> || [],
      { <span class="hljs-attr">base</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">baseURL</span> }
    ));
    
    <span class="hljs-comment">// çŠ¶æ€ç®¡ç†</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">store</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">services</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">'store'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">store</span>);
    }
  }
  
  <span class="hljs-comment">// ç»„ä»¶æ³¨å†Œ</span>
  <span class="hljs-title function_">component</span>(<span class="hljs-params">name, component</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">components</span>.<span class="hljs-title function_">set</span>(name, component);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// æŒ‡ä»¤æ³¨å†Œ</span>
  <span class="hljs-title function_">directive</span>(<span class="hljs-params">name, directive</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">directives</span>.<span class="hljs-title function_">set</span>(name, directive);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// æ··å…¥</span>
  <span class="hljs-title function_">mixin</span>(<span class="hljs-params">mixin</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mixins</span>.<span class="hljs-title function_">push</span>(mixin);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// æœåŠ¡æä¾›</span>
  <span class="hljs-title function_">provide</span>(<span class="hljs-params">name, service</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">services</span>.<span class="hljs-title function_">set</span>(name, service);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// æœåŠ¡æ³¨å…¥</span>
  <span class="hljs-title function_">inject</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">services</span>.<span class="hljs-title function_">get</span>(name);
  }
  
  <span class="hljs-comment">// å¯åŠ¨åº”ç”¨</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerHook</span>(<span class="hljs-string">'beforeMount'</span>);
    
    <span class="hljs-comment">// åˆå§‹åŒ–æ’ä»¶</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initialize</span>();
    
    <span class="hljs-comment">// è®¾ç½®å…¨å±€å˜é‡</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">__app__</span> = <span class="hljs-variable language_">this</span>;
    
    <span class="hljs-comment">// æŒ‚è½½æ ¹ç»„ä»¶</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">rootComponent</span>) {
      <span class="hljs-keyword">const</span> <span class="hljs-title class_">RootComponent</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">rootComponent</span>;
      <span class="hljs-keyword">const</span> rootElement = <span class="hljs-keyword">typeof</span> root === <span class="hljs-string">'string'</span> 
        ? <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(root) 
        : root;
      
      <span class="hljs-keyword">if</span> (rootElement) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RootComponent</span>({
          <span class="hljs-attr">app</span>: <span class="hljs-variable language_">this</span>,
          <span class="hljs-attr">router</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">services</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'router'</span>),
          <span class="hljs-attr">store</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">services</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'store'</span>)
        });
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.$mount(rootElement);
      }
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerHook</span>(<span class="hljs-string">'afterMount'</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// å¸è½½åº”ç”¨</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">unmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerHook</span>(<span class="hljs-string">'beforeUnmount'</span>);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-property">$destroy</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.$destroy();
    }
    
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">destroy</span>();
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerHook</span>(<span class="hljs-string">'afterUnmount'</span>);
  }
}

<span class="hljs-comment">// äº‹ä»¶å‘å°„å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EventEmitter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }
  
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">has</span>(event)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">set</span>(event, []);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">push</span>(listener);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(event, listener);
  }
  
  <span class="hljs-title function_">off</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">has</span>(event)) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">const</span> listeners = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">get</span>(event);
    <span class="hljs-keyword">const</span> index = listeners.<span class="hljs-title function_">indexOf</span>(listener);
    
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
      listeners.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    }
    
    <span class="hljs-keyword">if</span> (listeners.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">delete</span>(event);
    }
  }
  
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, ...args</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">has</span>(event)) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">const</span> listeners = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">get</span>(event).<span class="hljs-title function_">slice</span>();
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> listener <span class="hljs-keyword">of</span> listeners) {
      <span class="hljs-keyword">try</span> {
        listener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in event listener for <span class="hljs-subst">${event}</span>:`</span>, error);
      }
    }
  }
  
  <span class="hljs-title function_">once</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onceListener</span> = (<span class="hljs-params">...args</span>) =&gt; {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(event, onceListener);
      listener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    };
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(event, onceListener);
  }
}

<span class="hljs-comment">// ä½¿ç”¨å®Œæ•´çš„åº”ç”¨æ¡†æ¶</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Application</span>({
  <span class="hljs-attr">apiBaseURL</span>: <span class="hljs-string">'https://api.example.com'</span>,
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'/app'</span>,
  
  <span class="hljs-attr">routes</span>: [
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomePage</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">AboutPage</span> },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/users/:id'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserPage</span> }
  ],
  
  <span class="hljs-attr">rootComponent</span>: <span class="hljs-title class_">AppRoot</span>
});

<span class="hljs-comment">// ä½¿ç”¨æ’ä»¶</span>
app
  .<span class="hljs-title function_">use</span>(<span class="hljs-title class_">LoggerPlugin</span>)
  .<span class="hljs-title function_">use</span>(<span class="hljs-title class_">PersistencePlugin</span>, { <span class="hljs-attr">key</span>: <span class="hljs-string">'my-app-state'</span> })
  .<span class="hljs-title function_">use</span>({
    <span class="hljs-title function_">install</span>(<span class="hljs-params">app</span>) {
      <span class="hljs-comment">// è‡ªå®šä¹‰æ’ä»¶</span>
      app.<span class="hljs-property">logger</span>?.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Custom plugin installed'</span>);
    }
  });

<span class="hljs-comment">// æ³¨å†Œå…¨å±€ç»„ä»¶</span>
app.<span class="hljs-title function_">component</span>(<span class="hljs-string">'button-counter'</span>, {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> };
  },
  
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;button @click="count++"&gt;
      Clicked {{ count }} times
    &lt;/button&gt;
  `</span>
});

<span class="hljs-comment">// æ³¨å†Œå…¨å±€æŒ‡ä»¤</span>
app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'focus'</span>, {
  <span class="hljs-title function_">inserted</span>(<span class="hljs-params">el</span>) {
    el.<span class="hljs-title function_">focus</span>();
  }
});

<span class="hljs-comment">// æ·»åŠ å…¨å±€æ··å…¥</span>
app.<span class="hljs-title function_">mixin</span>({
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Component created'</span>);
  }
});

<span class="hljs-comment">// å¯åŠ¨åº”ç”¨</span>
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Application mounted'</span>);
});
</code></pre>
<h4 data-id="heading-17">ä¸ƒã€æ„å»ºå·¥å…·ä¸æ‰“åŒ…</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç®€å•çš„æ¨¡å—æ‰“åŒ…å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleBundler</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">entry</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">entry</span> = entry;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">modules</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bundle</span> = <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-comment">// æ„å»º</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">collectModules</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">entry</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bundle</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateBundle</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">bundle</span>;
  }
  
  <span class="hljs-comment">// æ”¶é›†æ¨¡å—</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">collectModules</span>(<span class="hljs-params">filePath, visited = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>()</span>) {
    <span class="hljs-keyword">if</span> (visited.<span class="hljs-title function_">has</span>(filePath)) <span class="hljs-keyword">return</span>;
    visited.<span class="hljs-title function_">add</span>(filePath);
    
    <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹</span>
    <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">readFile</span>(filePath);
    
    <span class="hljs-comment">// è§£æä¾èµ–</span>
    <span class="hljs-keyword">const</span> deps = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseDependencies</span>(content);
    <span class="hljs-keyword">const</span> code = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">transformCode</span>(content);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">modules</span>.<span class="hljs-title function_">set</span>(filePath, {
      code,
      deps
    });
    
    <span class="hljs-comment">// é€’å½’æ”¶é›†ä¾èµ–</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> dep <span class="hljs-keyword">of</span> deps) {
      <span class="hljs-keyword">const</span> depPath = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolvePath</span>(filePath, dep);
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">collectModules</span>(depPath, visited);
    }
  }
  
  <span class="hljs-comment">// ç”Ÿæˆæ‰“åŒ…ä»£ç </span>
  <span class="hljs-title function_">generateBundle</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> modules = {};
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">modules</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-variable language_">module</span>, id</span>) =&gt;</span> {
      modules[id] = {
        <span class="hljs-attr">code</span>: <span class="hljs-variable language_">module</span>.<span class="hljs-property">code</span>,
        <span class="hljs-attr">deps</span>: <span class="hljs-variable language_">module</span>.<span class="hljs-property">deps</span>
      };
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">`
      (function(modules) {
        function require(id) {
          const { code, deps } = modules[id];
          
          function localRequire(relativePath) {
            return require(deps[relativePath]);
          }
          
          const module = { exports: {} };
          const fn = new Function('require', 'module', 'exports', code);
          fn(localRequire, module, module.exports);
          
          return module.exports;
        }
        
        require('<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.entry}</span>');
      })({
        <span class="hljs-subst">${<span class="hljs-built_in">Array</span>.<span class="hljs-keyword">from</span>(<span class="hljs-variable language_">this</span>.modules.entries()).map(([id, <span class="hljs-variable language_">module</span>]) =&gt; {
          <span class="hljs-keyword">return</span> <span class="hljs-string">`'<span class="hljs-subst">${id}</span>': {
            code: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-variable language_">module</span>.code)}</span>,
            deps: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-variable language_">module</span>.deps)}</span>
          }`</span>;
        }).join(<span class="hljs-string">',\n'</span>)}</span>
      });
    `</span>;
  }
  
  <span class="hljs-comment">// è§£æä¾èµ–</span>
  <span class="hljs-title function_">parseDependencies</span>(<span class="hljs-params">content</span>) {
    <span class="hljs-keyword">const</span> deps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    
    <span class="hljs-comment">// åŒ¹é…importè¯­å¥</span>
    <span class="hljs-keyword">const</span> importRegex = <span class="hljs-regexp">/import\s+(?:.*?\s+from\s+)?['"](.+?)['"]/g</span>;
    <span class="hljs-keyword">let</span> match;
    
    <span class="hljs-keyword">while</span> ((match = importRegex.<span class="hljs-title function_">exec</span>(content)) !== <span class="hljs-literal">null</span>) {
      deps.<span class="hljs-title function_">add</span>(match[<span class="hljs-number">1</span>]);
    }
    
    <span class="hljs-comment">// åŒ¹é…requireè°ƒç”¨</span>
    <span class="hljs-keyword">const</span> requireRegex = <span class="hljs-regexp">/require\(['"](.+?)['"]\)/g</span>;
    
    <span class="hljs-keyword">while</span> ((match = requireRegex.<span class="hljs-title function_">exec</span>(content)) !== <span class="hljs-literal">null</span>) {
      deps.<span class="hljs-title function_">add</span>(match[<span class="hljs-number">1</span>]);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(deps);
  }
  
  <span class="hljs-comment">// è½¬æ¢ä»£ç </span>
  <span class="hljs-title function_">transformCode</span>(<span class="hljs-params">content</span>) {
    <span class="hljs-comment">// ç®€å•è½¬æ¢ï¼šç§»é™¤import/exportè¯­å¥</span>
    <span class="hljs-keyword">let</span> transformed = content
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/import\s+.*?\s+from\s+['"](.+?)['"]/g</span>, <span class="hljs-string">''</span>)
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/export\s+(?:default\s+)?/g</span>, <span class="hljs-string">''</span>);
    
    <span class="hljs-keyword">return</span> transformed;
  }
  
  <span class="hljs-comment">// è¯»å–æ–‡ä»¶</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ–‡ä»¶è¯»å–</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(path);
    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">text</span>();
  }
  
  <span class="hljs-comment">// è§£æè·¯å¾„</span>
  <span class="hljs-title function_">resolvePath</span>(<span class="hljs-params">base, relative</span>) {
    <span class="hljs-keyword">const</span> baseDir = base.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, base.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-string">'/'</span>));
    
    <span class="hljs-keyword">if</span> (relative.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'./'</span>)) {
      <span class="hljs-keyword">return</span> baseDir + <span class="hljs-string">'/'</span> + relative.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>);
    }
    
    <span class="hljs-keyword">if</span> (relative.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'../'</span>)) {
      <span class="hljs-keyword">let</span> current = baseDir;
      <span class="hljs-keyword">let</span> target = relative;
      
      <span class="hljs-keyword">while</span> (target.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'../'</span>)) {
        current = current.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, current.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-string">'/'</span>));
        target = target.<span class="hljs-title function_">slice</span>(<span class="hljs-number">3</span>);
      }
      
      <span class="hljs-keyword">return</span> current + <span class="hljs-string">'/'</span> + target;
    }
    
    <span class="hljs-keyword">return</span> relative;
  }
}

<span class="hljs-comment">// ä½¿ç”¨æ‰“åŒ…å™¨</span>
<span class="hljs-keyword">const</span> bundler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleBundler</span>(<span class="hljs-string">'./src/index.js'</span>);
bundler.<span class="hljs-title function_">build</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">bundle</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Bundle generated:'</span>, bundle.<span class="hljs-property">length</span>, <span class="hljs-string">'bytes'</span>);
  
  <span class="hljs-comment">// æ‰§è¡Œæ‰“åŒ…åçš„ä»£ç </span>
  <span class="hljs-built_in">eval</span>(bundle);
});

<span class="hljs-comment">// å¼€å‘æœåŠ¡å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DevServer</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">watchers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }
  
  <span class="hljs-comment">// æ·»åŠ ä¸­é—´ä»¶</span>
  <span class="hljs-title function_">use</span>(<span class="hljs-params">middleware</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">middlewares</span>.<span class="hljs-title function_">push</span>(middleware);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// å¯åŠ¨æœåŠ¡å™¨</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Starting dev server on http://localhost:<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.config.port}</span>`</span>);
    
    <span class="hljs-comment">// çƒ­é‡è½½ä¸­é—´ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">use</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hotReloadMiddleware</span>());
    
    <span class="hljs-comment">// æ–‡ä»¶æœåŠ¡ä¸­é—´ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">use</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">staticMiddleware</span>());
    
    <span class="hljs-comment">// ç¼–è¯‘ä¸­é—´ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">use</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compileMiddleware</span>());
    
    <span class="hljs-comment">// å¯åŠ¨æ–‡ä»¶ç›‘å¬</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startWatching</span>();
    
    <span class="hljs-comment">// å¯åŠ¨HTTPæœåŠ¡å™¨</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startHTTPServer</span>();
  }
  
  <span class="hljs-comment">// çƒ­é‡è½½ä¸­é—´ä»¶</span>
  <span class="hljs-title function_">hotReloadMiddleware</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (ctx, next) =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>();
      
      <span class="hljs-comment">// å¦‚æœæ˜¯HTMLæ–‡ä»¶ï¼Œæ³¨å…¥çƒ­é‡è½½è„šæœ¬</span>
      <span class="hljs-keyword">if</span> (ctx.<span class="hljs-property">path</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.html'</span>)) {
        ctx.<span class="hljs-property">body</span> = ctx.<span class="hljs-property">body</span>.<span class="hljs-title function_">replace</span>(
          <span class="hljs-string">'&lt;/body&gt;'</span>,
          <span class="hljs-string">'&lt;script src="/hot-reload.js"&gt;&lt;/script&gt;&lt;/body&gt;'</span>
        );
      }
    };
  }
  
  <span class="hljs-comment">// é™æ€æ–‡ä»¶æœåŠ¡</span>
  <span class="hljs-title function_">staticMiddleware</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (ctx, next) =&gt; {
      <span class="hljs-comment">// å¤„ç†é™æ€æ–‡ä»¶è¯·æ±‚</span>
      <span class="hljs-keyword">if</span> (ctx.<span class="hljs-property">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; ctx.<span class="hljs-property">path</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/static/'</span>)) {
        <span class="hljs-keyword">const</span> filePath = ctx.<span class="hljs-property">path</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">7</span>);
        <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">readFile</span>(filePath);
        
        ctx.<span class="hljs-property">body</span> = content;
        ctx.<span class="hljs-property">type</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getMimeType</span>(filePath);
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>();
    };
  }
  
  <span class="hljs-comment">// ç¼–è¯‘ä¸­é—´ä»¶</span>
  <span class="hljs-title function_">compileMiddleware</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (ctx, next) =&gt; {
      <span class="hljs-comment">// å¤„ç†JSæ–‡ä»¶è¯·æ±‚</span>
      <span class="hljs-keyword">if</span> (ctx.<span class="hljs-property">path</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.js'</span>)) {
        <span class="hljs-keyword">const</span> filePath = ctx.<span class="hljs-property">path</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">readFile</span>(filePath);
        
        <span class="hljs-comment">// ç®€å•ç¼–è¯‘</span>
        <span class="hljs-keyword">const</span> compiled = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compileJS</span>(content);
        
        ctx.<span class="hljs-property">body</span> = compiled;
        ctx.<span class="hljs-property">type</span> = <span class="hljs-string">'application/javascript'</span>;
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">next</span>();
    };
  }
  
  <span class="hljs-comment">// ç¼–è¯‘JS</span>
  <span class="hljs-title function_">compileJS</span>(<span class="hljs-params">content</span>) {
    <span class="hljs-comment">// ç®€å•Babelè½¬è¯‘</span>
    <span class="hljs-keyword">return</span> content
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/const\s+/g</span>, <span class="hljs-string">'var '</span>)
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/let\s+/g</span>, <span class="hljs-string">'var '</span>)
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/export\s+/g</span>, <span class="hljs-string">'// export '</span>)
      .<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/import\s+/g</span>, <span class="hljs-string">'// import '</span>);
  }
  
  <span class="hljs-comment">// è¯»å–æ–‡ä»¶</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ–‡ä»¶è¯»å–</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">`// Content of <span class="hljs-subst">${path}</span>`</span>;
  }
  
  <span class="hljs-comment">// è·å–MIMEç±»å‹</span>
  <span class="hljs-title function_">getMimeType</span>(<span class="hljs-params">path</span>) {
    <span class="hljs-keyword">const</span> types = {
      <span class="hljs-string">'.js'</span>: <span class="hljs-string">'application/javascript'</span>,
      <span class="hljs-string">'.css'</span>: <span class="hljs-string">'text/css'</span>,
      <span class="hljs-string">'.html'</span>: <span class="hljs-string">'text/html'</span>,
      <span class="hljs-string">'.json'</span>: <span class="hljs-string">'application/json'</span>
    };
    
    <span class="hljs-keyword">const</span> ext = path.<span class="hljs-title function_">substring</span>(path.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-string">'.'</span>));
    <span class="hljs-keyword">return</span> types[ext] || <span class="hljs-string">'text/plain'</span>;
  }
  
  <span class="hljs-comment">// å¯åŠ¨æ–‡ä»¶ç›‘å¬</span>
  <span class="hljs-title function_">startWatching</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Watching for file changes...'</span>);
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ–‡ä»¶ç›‘å¬</span>
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶å˜åŒ–</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkFileChanges</span>();
    }, <span class="hljs-number">1000</span>);
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶å˜åŒ–</span>
  <span class="hljs-title function_">checkFileChanges</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ–‡ä»¶å˜åŒ–æ£€æµ‹</span>
    <span class="hljs-keyword">const</span> changedFiles = [];
    
    <span class="hljs-keyword">if</span> (changedFiles.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Files changed:'</span>, changedFiles);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'fileChange'</span>, changedFiles);
    }
  }
  
  <span class="hljs-comment">// å¯åŠ¨HTTPæœåŠ¡å™¨</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">startHTTPServer</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'HTTP server started'</span>);
    
    <span class="hljs-comment">// æ¨¡æ‹ŸHTTPè¯·æ±‚å¤„ç†</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
      <span class="hljs-comment">// æœåŠ¡å™¨è¿è¡Œä¸­...</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Server stopped'</span>);
        <span class="hljs-title function_">resolve</span>();
      }, <span class="hljs-number">3600000</span>); <span class="hljs-comment">// 1å°æ—¶ååœæ­¢</span>
    });
  }
  
  <span class="hljs-comment">// äº‹ä»¶å‘å°„</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, data</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> <span class="hljs-title function_">listener</span>(data));
    }
  }
  
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = {};
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event]) <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event] = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event].<span class="hljs-title function_">push</span>(listener);
  }
}

<span class="hljs-comment">// å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
<span class="hljs-keyword">const</span> devServer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DevServer</span>({
  <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,
  <span class="hljs-attr">watch</span>: [<span class="hljs-string">'src/**/*.js'</span>, <span class="hljs-string">'src/**/*.css'</span>]
});

devServer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'fileChange'</span>, <span class="hljs-function">(<span class="hljs-params">files</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hot reloading...'</span>, files);
});

devServer.<span class="hljs-title function_">start</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);
</code></pre>
<h4 data-id="heading-18">æ€»ç»“</h4>
<p>é€šè¿‡äº²æ‰‹å®ç°è¿™äº›æ ¸å¿ƒåŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸ä»…æ·±å…¥ç†è§£äº†ç°ä»£å‰ç«¯æ¡†æ¶çš„è®¾è®¡åŸç†ï¼Œè¿˜æŒæ¡äº†æ„å»ºå¯ç»´æŠ¤ã€å¯æ‰©å±•çš„åº“å’Œå·¥å…·çš„èƒ½åŠ›ã€‚ä»å“åº”å¼ç³»ç»Ÿåˆ°çŠ¶æ€ç®¡ç†ï¼Œä»è·¯ç”±åˆ°è¡¨å•éªŒè¯ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æ˜¯æ„å»ºå¤æ‚åº”ç”¨çš„åŸºç¡€ã€‚</p>
<p><strong>å…³é”®æ”¶è·:</strong></p>
<ol>
<li><strong>MVVMæ¡†æ¶:</strong> ç†è§£äº†æ•°æ®ç»‘å®šã€è™šæ‹ŸDOMå’Œç»„ä»¶åŒ–çš„æ ¸å¿ƒåŸç†</li>
<li><strong>çŠ¶æ€ç®¡ç†:</strong> æŒæ¡äº†å•å‘æ•°æ®æµå’Œä¸­é—´ä»¶æœºåˆ¶çš„è®¾è®¡æ€æƒ³</li>
<li><strong>è·¯ç”±ç³»ç»Ÿ:</strong> å®ç°äº†å®¢æˆ·ç«¯è·¯ç”±çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬åµŒå¥—è·¯ç”±å’Œå®ˆå«</li>
<li><strong>è¡¨å•å¤„ç†:</strong> æ„å»ºäº†å®Œæ•´çš„éªŒè¯å’Œè¡¨å•çŠ¶æ€ç®¡ç†ç³»ç»Ÿ</li>
<li><strong>HTTPå®¢æˆ·ç«¯:</strong> å®ç°äº†æ‹¦æˆªå™¨ã€å–æ¶ˆè¯·æ±‚ç­‰é«˜çº§ç‰¹æ€§</li>
<li><strong>æ’ä»¶ç³»ç»Ÿ:</strong> è®¾è®¡äº†å¯æ‰©å±•çš„åº”ç”¨ç¨‹åºæ¶æ„</li>
</ol>
<p>è¿™äº›å®ç°è™½ç„¶ç®€åŒ–ï¼Œä½†æ¶µç›–äº†æ ¸å¿ƒæ¦‚å¿µã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¿™äº›ç†è§£ï¼Œæ›´å¥½åœ°ä½¿ç”¨å’Œå®šåˆ¶ç°æœ‰æ¡†æ¶ï¼Œç”šè‡³æ„å»ºç¬¦åˆç‰¹å®šéœ€æ±‚çš„å·¥å…·åº“ã€‚</p>
<p>è®°ä½ï¼Œæ¡†æ¶å’Œåº“çš„æœ¬è´¨æ˜¯è§£å†³é—®é¢˜çš„æ–¹æ³•è®ºã€‚ç†è§£å…¶è®¾è®¡æ€æƒ³æ¯”è®°ä½APIæ›´ä¸ºé‡è¦ã€‚é€šè¿‡ä¸æ–­å®è·µå’Œé‡æ„ï¼Œä½ å°†èƒ½å¤Ÿè®¾è®¡å‡ºæ›´ä¼˜é›…ã€æ›´é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ Kotlin ä¸­åˆ›å»º DSL]]></title>    <link>https://juejin.cn/post/7586617459487506484</link>    <guid>https://juejin.cn/post/7586617459487506484</guid>    <pubDate>2025-12-23T05:59:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586617459487506484" data-draft-id="7586622708998717480" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ Kotlin ä¸­åˆ›å»º DSL"/> <meta itemprop="keywords" content="Kotlin"/> <meta itemprop="datePublished" content="2025-12-23T05:59:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITä¹æ‰‹"/> <meta itemprop="url" content="https://juejin.cn/user/556779445171708"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ Kotlin ä¸­åˆ›å»º DSL
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/556779445171708/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITä¹æ‰‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T05:59:53.000Z" title="Tue Dec 23 2025 05:59:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Kotlin ä¸­åˆ›å»º DSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰çš„æ ¸å¿ƒï¼Œæ˜¯è®©ä»£ç ç»“æ„æ›´è´´åˆå…·ä½“é¢†åŸŸï¼ˆå¦‚æ„å»ºç½‘é¡µã€é…ç½®é¡¹ç›®ï¼‰çš„æ€ç»´é€»è¾‘ã€‚å…¶åŸºç¡€åŸç†ä¸»è¦ä¾èµ– Kotlin çš„Â <strong>å¸¦æ¥æ”¶è€…çš„ Lambda è¡¨è¾¾å¼</strong>Â å’ŒÂ <strong>æ‰©å±•å‡½æ•°/å±æ€§</strong>ã€‚</p>
<h3 data-id="heading-0">ğŸ§± æ ¸å¿ƒæ¦‚å¿µä¸æŠ€æœ¯è¦ç‚¹</h3>
<p>ä½ å¯ä»¥é€šè¿‡ä¸‹è¡¨å¿«é€Ÿäº†è§£è¿™ä¸¤ç§æ ¸å¿ƒæŠ€æœ¯å¦‚ä½•åä½œæ¥æ„å»ºDSLï¼š</p>

























<table><thead><tr><th>æŠ€æœ¯æ ¸å¿ƒ</th><th>è§’è‰²ä¸ä½œç”¨</th><th>ç®€å•ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>å¸¦æ¥æ”¶è€…çš„ Lambda</strong></td><td>æä¾›<strong>æ„å»ºä¸Šä¸‹æ–‡</strong>ã€‚Lambda å†…éƒ¨ (<code>this</code>) æŒ‡å‘ä¸€ä¸ªç‰¹å®šå¯¹è±¡ï¼Œä½¿ä½ èƒ½å¤Ÿç›´æ¥åœ¨è¯¥å¯¹è±¡çš„ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨æ–¹æ³•ã€‚</td><td><code>html { }</code>Â ä¸­çš„ Lambda åœ¨Â <code>HtmlBuilder</code>Â çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œï¼Œ<code>this</code>Â å°±æ˜¯Â <code>HtmlBuilder</code>Â å®ä¾‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.cn%2Fdeveloper%2Finformation%2F%25e5%25a6%2582%25e4%25bd%2595%25e4%25bd%25bf%25e7%2594%25a8kotlin%25e5%259c%25a8%25e4%25b8%258d%25e4%25bd%25bf%25e7%2594%25a8%25e5%25af%25bc%25e5%2585%25a5%25e6%2588%2596val%25e7%259a%2584%25e6%2583%2585%25e5%2586%25b5%25e4%25b8%258b%25e7%25bc%2596%25e5%2586%2599DSL-article" target="_blank" title="https://cloud.tencent.cn/developer/information/%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8kotlin%e5%9c%a8%e4%b8%8d%e4%bd%bf%e7%94%a8%e5%af%bc%e5%85%a5%e6%88%96val%e7%9a%84%e6%83%85%e5%86%b5%e4%b8%8b%e7%bc%96%e5%86%99DSL-article" ref="nofollow noopener noreferrer"/>ã€‚</td></tr><tr><td><strong>æ‰©å±•å‡½æ•°/å±æ€§</strong></td><td>æä¾›<strong>é¢†åŸŸè¯æ±‡</strong>ã€‚ä¸ºç‰¹å®šç±»å‹ï¼ˆå¦‚Â <code>Tag</code>ï¼‰æ·»åŠ å‡½æ•°ï¼Œä½¿è°ƒç”¨åƒåœ¨æ“ä½œé¢†åŸŸå†…çš„åŸç”Ÿæ¦‚å¿µã€‚</td><td>ä¸ºÂ <code>Tag</code>Â ç±»æ‰©å±•Â <code>body { }</code>Â å‡½æ•°ï¼Œè®©ä½ åœ¨DSLä¸­èƒ½ç›´æ¥å†™Â <code>body</code><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F614556" target="_blank" title="https://developer.aliyun.com/article/614556" ref="nofollow noopener noreferrer"/>ã€‚</td></tr><tr><td><strong>ç»“åˆä½¿ç”¨</strong></td><td>ä¸¤è€…ç»“åˆï¼Œä¾¿èƒ½åˆ›é€ å‡º<strong>ç»“æ„æ¸…æ™°ã€è¯­ä¹‰ä¸°å¯Œ</strong>çš„é¢†åŸŸç‰¹å®šè¯­å¥å—ã€‚</td><td><code>html { body { } }</code></td></tr></tbody></table>
<h3 data-id="heading-1">ğŸ› ï¸ å®æˆ˜æ¼”ç»ƒï¼šåˆ›å»º HTML DSL</h3>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªæ„å»ºç®€å• HTML çš„ DSL ç¤ºä¾‹ï¼Œæ¥å…·ä½“æ„Ÿå—è¿™äº›æŠ€æœ¯çš„åº”ç”¨ã€‚ä»£ç æ³¨é‡Šæ ‡æ³¨äº†å…³é”®éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å®šä¹‰ DSL çš„å…¥å£å‡½æ•°ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå¸¦æ¥æ”¶è€…çš„ Lambdaã€‚</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">html</span><span class="hljs-params">(<span class="hljs-keyword">init</span>: <span class="hljs-type">HtmlBuilder</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span>: String {
    <span class="hljs-keyword">val</span> builder = HtmlBuilder()
    builder.<span class="hljs-keyword">init</span>() <span class="hljs-comment">// åœ¨æ­¤æ‰§è¡Œ Lambdaï¼Œæ„å»º HTML</span>
    <span class="hljs-keyword">return</span> builder.toString()
}

<span class="hljs-comment">// 2. å®šä¹‰æ„å»ºå™¨ç±»ï¼Œä½œä¸ºæ¥æ”¶è€…ç±»å‹ï¼Œæä¾›æ„å»ºä¸Šä¸‹æ–‡ã€‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HtmlBuilder</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> buffer = StringBuilder()

    <span class="hljs-comment">// ç”¨äºåˆ›å»ºæ ‡ç­¾çš„å‡½æ•°ï¼Œä¹Ÿæ˜¯å¸¦æ¥æ”¶è€…çš„ Lambda</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">tag</span><span class="hljs-params">(name: <span class="hljs-type">String</span>, <span class="hljs-keyword">init</span>: <span class="hljs-type">Tag</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        buffer.append(<span class="hljs-string">"&lt;<span class="hljs-variable">$name</span>&gt;"</span>)
        <span class="hljs-keyword">val</span> tag = Tag(name, buffer)
        tag.<span class="hljs-keyword">init</span>() <span class="hljs-comment">// åœ¨æ–°çš„æ ‡ç­¾ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œ</span>
        buffer.append(<span class="hljs-string">"&lt;/<span class="hljs-variable">$name</span>&gt;"</span>)
    }

    <span class="hljs-comment">// æ·»åŠ çº¯æ–‡æœ¬</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">text</span><span class="hljs-params">(content: <span class="hljs-type">String</span>)</span></span> {
        buffer.append(content)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">toString</span><span class="hljs-params">()</span></span> = buffer.toString()
}

<span class="hljs-comment">// 3. å®šä¹‰æ ‡ç­¾ç±»ï¼Œä½œä¸ºåµŒå¥—æ„å»ºçš„æ¥æ”¶è€…ã€‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Tag</span>(<span class="hljs-keyword">val</span> name: String, <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> buffer: StringBuilder) {
    <span class="hljs-comment">// å¯ä»¥åœ¨ Tag ä¸Šä¸‹æ–‡ä¸­å®šä¹‰æ›´å¤šé¢†åŸŸæ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">text</span><span class="hljs-params">(content: <span class="hljs-type">String</span>)</span></span> {
        buffer.append(content)
    }
}

<span class="hljs-comment">// 4. ä½¿ç”¨ DSL æ„å»º HTML</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> htmlContent = html { <span class="hljs-comment">// è¿›å…¥ HtmlBuilder ä¸Šä¸‹æ–‡</span>
        tag(<span class="hljs-string">"html"</span>) {
            tag(<span class="hljs-string">"body"</span>) {
                tag(<span class="hljs-string">"h1"</span>) {
                    text(<span class="hljs-string">"Hello, DSL!"</span>) <span class="hljs-comment">// åœ¨ H1 æ ‡ç­¾çš„ä¸Šä¸‹æ–‡ä¸­æ·»åŠ æ–‡æœ¬</span>
                }
                tag(<span class="hljs-string">"p"</span>) {
                    text(<span class="hljs-string">"This is a paragraph."</span>)
                }
            }
        }
    }
    println(htmlContent)
}
</code></pre>
<p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œä¼šè¾“å‡ºï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, DSL!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>This is a paragraph.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š7 ä¸ª V8 å¼•æ“åçˆ±çš„ç¼–ç æ¨¡å¼è®©ä½ æé€Ÿ 40%]]></title>    <link>https://juejin.cn/post/7586615716905926656</link>    <guid>https://juejin.cn/post/7586615716905926656</guid>    <pubDate>2025-12-23T04:16:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586615716905926656" data-draft-id="7586587644823683106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š7 ä¸ª V8 å¼•æ“åçˆ±çš„ç¼–ç æ¨¡å¼è®©ä½ æé€Ÿ 40%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-23T04:16:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š7 ä¸ª V8 å¼•æ“åçˆ±çš„ç¼–ç æ¨¡å¼è®©ä½ æé€Ÿ 40%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T04:16:52.000Z" title="Tue Dec 23 2025 04:16:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>JavaScript æ€§èƒ½ä¼˜åŒ–ï¼š7 ä¸ª V8 å¼•æ“åçˆ±çš„ç¼–ç æ¨¡å¼è®©ä½ æé€Ÿ 40%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼ŒJavaScript æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæ°¸æ’çš„è¯é¢˜ã€‚éšç€åº”ç”¨çš„å¤æ‚åº¦ä¸æ–­æå‡ï¼Œå¼€å‘è€…è¶Šæ¥è¶Šä¾èµ–åº•å±‚å¼•æ“çš„ä¼˜åŒ–èƒ½åŠ›ã€‚V8 ä½œä¸º Chrome å’Œ Node.js çš„æ ¸å¿ƒå¼•æ“ï¼Œå…¶å†…éƒ¨æœºåˆ¶å¯¹ä»£ç æ‰§è¡Œæ•ˆç‡æœ‰ç€å†³å®šæ€§å½±å“ã€‚ç†è§£ V8 çš„å·¥ä½œåŸç†å¹¶é‡‡ç”¨å…¶åçˆ±çš„ç¼–ç æ¨¡å¼ï¼Œå¯ä»¥æ˜¾è‘—æå‡ç¨‹åºæ€§èƒ½â€”â€”åœ¨æŸäº›åœºæ™¯ä¸‹ç”šè‡³èƒ½è¾¾åˆ° <strong>40%</strong> çš„é€Ÿåº¦æå‡ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æ V8 å¼•æ“çš„ä¼˜åŒ–ç­–ç•¥ï¼Œæ­ç¤ºä¸ƒä¸ªç»è¿‡éªŒè¯çš„é«˜æ•ˆç¼–ç æ¨¡å¼ã€‚è¿™äº›æŠ€æœ¯ä¸ä»…åŸºäº Google V8å›¢é˜Ÿçš„å…¬å¼€æ–‡æ¡£å’Œæ¼”è®²å†…å®¹ï¼Œä¹Ÿç»è¿‡äº†å®é™…åŸºå‡†æµ‹è¯•éªŒè¯ã€‚æ— è®ºæ‚¨æ˜¯å¼€å‘é«˜æ€§èƒ½åº”ç”¨è¿˜æ˜¯è¿½æ±‚æè‡´çš„ç”¨æˆ·ä½“éªŒï¼Œè¿™äº›çŸ¥è¯†éƒ½å°†æˆä¸ºæ‚¨çš„ç§˜å¯†æ­¦å™¨ã€‚</p>
<hr/>
<h2 data-id="heading-2">V8 å¼•æ“å¿«é€Ÿå…¥é—¨</h2>
<p>åœ¨æ·±å…¥ä¼˜åŒ–æŠ€å·§å‰ï¼Œæˆ‘ä»¬éœ€è¦ç®€å•äº†è§£ V8 çš„å·¥ä½œæœºåˆ¶ã€‚V8 ä½¿ç”¨å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰æŠ€æœ¯ï¼Œå°† JavaScriptä»£ç è½¬æ¢ä¸ºé«˜æ•ˆçš„æœºå™¨ç ã€‚è¿™ä¸€è¿‡ç¨‹åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>è§£é‡Šå™¨ï¼ˆIgnitionï¼‰</strong>ï¼šå¿«é€Ÿç”Ÿæˆå­—èŠ‚ç </li>
<li><strong>åŸºçº¿ç¼–è¯‘å™¨ï¼ˆTurbofanï¼‰</strong>ï¼šå¯¹çƒ­ç‚¹å‡½æ•°è¿›è¡Œåˆæ­¥ä¼˜åŒ–</li>
<li><strong>ä¼˜åŒ–ç¼–è¯‘å™¨ï¼ˆSparkplugï¼‰</strong>ï¼šç”Ÿæˆé«˜åº¦ä¼˜åŒ–çš„æœºå™¨ç </li>
</ol>
<p>å…³é”®ç‚¹åœ¨äºï¼š<strong>V8ä¼šåŠ¨æ€åˆ†æä»£ç çš„è¿è¡Œæ–¹å¼å¹¶æ®æ­¤è¿›è¡Œä¼˜åŒ–</strong>ã€‚è¿™æ„å‘³ç€æ‚¨çš„ç¼–ç æ–¹å¼ç›´æ¥å½±å“æœ€ç»ˆçš„æœºå™¨ç è´¨é‡ã€‚</p>
<hr/>
<h2 data-id="heading-3">7ä¸ªV8åçˆ±çš„ç¼–ç æ¨¡å¼</h2>
<h3 data-id="heading-4">Pattern #1ï¼šä¿æŒå¯¹è±¡å½¢çŠ¶ç¨³å®š</h3>
<h4 data-id="heading-5">Why it matters:</h4>
<p>V8ä½¿ç”¨"éšè—ç±»"ï¼ˆHidden Classï¼‰ç³»ç»Ÿæ¥ä¼˜åŒ–å±æ€§è®¿é—®ã€‚å½“å¯¹è±¡ç»“æ„é¢‘ç¹å˜åŒ–æ—¶ï¼Œä¼šå¯¼è‡´éšè—ç±»è½¬æ¢ï¼ˆtransitionï¼‰ï¼Œäº§ç”Ÿæ€§èƒ½å¼€é”€ã€‚</p>
<h4 data-id="heading-6">Bad Practice:</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> user = {};
    user.<span class="hljs-property">name</span> = <span class="hljs-string">"Alice"</span>; <span class="hljs-comment">// Hidden Class C0 â†’ C1</span>
    user.<span class="hljs-property">age</span> = <span class="hljs-number">30</span>;       <span class="hljs-comment">// C1 â†’ C2</span>
    <span class="hljs-keyword">return</span> user;
}
</code></pre>
<h4 data-id="heading-7">Better Approach:</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-comment">// Single Hidden Class</span>
        <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> 
    };
}
</code></pre>
<h4 data-id="heading-8">Performance Impact:</h4>
<p>ç¨³å®šå¯¹è±¡å½¢çŠ¶å¯ä»¥å‡å°‘çº¦15-20%çš„å±æ€§è®¿é—®æ—¶é—´ã€‚</p>
<hr/>
<h3 data-id="heading-9">Pattern #2ï¼šé¢„åˆ†é…æ•°ç»„å¤§å°</h3>
<h4 data-id="heading-10">Why it matters:</h4>
<p>V8å¯¹è¿ç»­çš„å°æ•°ç»„æœ‰ç‰¹æ®Šä¼˜åŒ–ï¼ˆç§°ä¸º"Packed SMI Elements"ï¼‰ã€‚åŠ¨æ€æ‰©å®¹ä¼šè§¦å‘å…ƒç´ ç§ç±»è½¬æ¢ï¼ˆElements Kind Transitionï¼‰ã€‚</p>
<h4 data-id="heading-11">Bad Practice:</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [];
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">1000</span>; i++) {
    arr.<span class="hljs-title function_">push</span>(i); <span class="hljs-comment">// Causes multiple allocations</span>
}
</code></pre>
<h4 data-id="heading-12">Better Approach:</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000</span>);
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">1000</span>; i++) {
    arr[i] = i; <span class="hljs-comment">// Pre-allocation avoids reallocation</span>
}
</code></pre>
<h4 data-id="heading-13">Benchmark Data:</h4>
<p>é¢„åˆ†é…å¤§æ•°ç»„å¯å‡å°‘70%çš„åˆ›å»ºæ—¶é—´ï¼ˆNode.js v18æµ‹è¯•ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-14">Pattern #3ï¼šä½¿ç”¨å•æ€å‡½æ•°å‚æ•°</h3>
<h4 data-id="heading-15">Why it matters:</h4>
<p>TurboFanä¼šå¯¹å•æ€ï¼ˆmonomorphicï¼‰è°ƒç”¨åšç‰¹æ®Šä¼˜åŒ–ã€‚å½“å‡½æ•°å‚æ•°ç±»å‹ä¸€è‡´æ—¶ï¼Œä¼šäº§ç”Ÿæ›´ä¼˜çš„æœºå™¨ç ã€‚</p>
<h4 data-id="heading-16">Bad Practice:</h4>
<pre><code class="hljs language-javascriptfunction" lang="javascriptfunction">    return a + b;
}

add(1, 2);     // Number path
add("a", "b"); // String path â†’ polymorphic
</code></pre>
<h4 data-id="heading-17">Better Approach:</h4>
<pre><code class="hljs language-javascript//" lang="javascript//">function addNumbers(a, b) { return a + b; }
function concatStrings(a, b) { return a + b; }
</code></pre>
<h4 data-id="heading-18">Optimization Insightï¼š</h4>
<p>å•æ€è°ƒç”¨æ¯”å¤šæ€è°ƒç”¨å¿«5-10å€ï¼ˆV8å›¢é˜Ÿæ•°æ®ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-19">Pattern #4ï¼šé¿å…try-catchå†…è”</h3>
<h4 data-id="heading-20">Why it matters:</h4>
<p>åŒ…å«try-catchçš„å‡½æ•°é€šå¸¸ä¸ä¼šè¢«å†…è”ä¼˜åŒ–ï¼ˆinliningï¼‰ï¼Œè€Œå†…è”æ˜¯é‡è¦çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µã€‚</p>
<h4 data-id="heading-21">Bad Practice:</h4>
<pre><code class="hljs language-javascriptfunction" lang="javascriptfunction">    try {
        return JSON.parse(json); // Prevents inlining
    } catch(e) {
        return null;
    }
}
</code></pre>
<h4 data-id="heading-22">Better Approach:</h4>
<pre><code class="hljs language-javascriptfunction" lang="javascriptfunction">    const result = JSON.parse(json);
    return result;
}

// Handle errors at caller level with single try-catch
</code></pre>
<hr/>
<h3 data-id="heading-23">Pattern #5ï¼šåˆç†åˆ©ç”¨æ•°å­—ç±»å‹</h3>
<p>V8å¯¹SMI(Small Integer)æœ‰ç‰¹æ®Šå¤„ç†ï¼š</p>

























<table><thead><tr><th>Number Type</th><th>Storage</th><th>Optimization Level</th></tr></thead><tbody><tr><td>SMI</td><td>31-bit</td><td>æœ€é«˜æ•ˆ</td></tr><tr><td>Heap Number</td><td>64-bit</td><td>ä¸€èˆ¬</td></tr><tr><td>BigInt</td><td>ä»»æ„ç²¾åº¦</td><td>æœ€ä½</td></tr></tbody></table>
<p>æœ€ä½³å®è·µï¼š</p>
<pre><code class="hljs language-javascript//" lang="javascript//">for(let i=0; i&lt;10000; i++) {}

// Avoid - forces Heap Number allocation 
for(let i=0; i&lt;10000; i+=0.5) {}
</code></pre>
<hr/>
<h3 data-id="heading-24">Pattern #6ï¼šé¿å…argumentså¯¹è±¡æ»¥ç”¨</h3>
<p>ç°ä»£JavaScriptæä¾›äº†æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-javascript//" lang="javascript//">function sum() {
    let total = 0;
    for(let i=0; i&lt;arguments.length; i++) { 
        total += arguments[i];
    }
    return total;
}

// Optimized version 
function sum(...args) { // Rest parameters are optimized
    return args.reduce((a,b)=&gt;a+b,0);
} 
</code></pre>
<p>Performance Boost: Restå‚æ•°æ¯”argumentså¿«2-3å€ã€‚</p>
<hr/>
<h3 data-id="heading-25">Pattern #7ï¼šæ§åˆ¶å†…å­˜è®¿é—®é¡ºåºæ€§</h3>
<p>CPUç¼“å­˜åå¥½é¡ºåºå†…å­˜è®¿é—®ï¼š</p>
<pre><code class="hljs language-javascript//" lang="javascript//">for(let y=0; y&lt;rows; y++) {
    for(let x=0; x&lt;cols; x++) {
        process(grid[y][x]); // Sequential memory access  
    }
}

// Cache-unfriendly alternative 
for(let x=0; x&lt;cols; x++) {
    for(let y=0; y&lt;rowsï¼›y++) {  
        process(grid[y][x]); // Random access pattern  
Â Â Â Â }
}
</code></pre>
<p>Difference:é¡ºåºè®¿é—®å¯èƒ½å¸¦æ¥300-500%çš„æ€§èƒ½å·®å¼‚ï¼</p>
<hr/>
<h2 data-id="heading-26">Advanced Techniques (Bonus)</h2>
<p>å¯¹äºè¿½æ±‚æè‡´æ€§èƒ½çš„åœºæ™¯ï¼š</p>
<ol>
<li><strong>Wasm Interop</strong>: CPUå¯†é›†å‹ä»»åŠ¡è€ƒè™‘WebAssembly</li>
<li><strong>SharedArrayBuffer</strong>:çº¿ç¨‹é—´é«˜æ•ˆæ•°æ®å…±äº«</li>
<li><strong>æŒ‡é’ˆå‹ç¼©</strong>:ç¡®ä¿æ•°æ®ç»“æ„å¯¹é½32ä½è¾¹ç•Œ</li>
</ol>
<hr/>
<h2 data-id="heading-27">Debugging Performance Issues</h2>
<p>å®ç”¨å·¥å…·é“¾ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">chrome:<span class="hljs-comment">//tracing/     - V8è¿è¡Œæ—¶åˆ†æ  </span>
node --prof           - Node.jså†…ç½®åˆ†æå™¨  
perfetto.dev          -ç³»ç»Ÿçº§æ€§èƒ½è·Ÿè¸ª   
</code></pre>
<p>å…³é”®æŒ‡æ ‡æ£€æŸ¥æ¸…å•ï¼š
âœ“ Hidden Classå˜æ›´<br/>
âœ“ Elements Kindå˜æ›´<br/>
âœ“ Deoptimizationäº‹ä»¶</p>
<hr/>
<h2 data-id="heading-28">Conclusion</h2>
<p>é€šè¿‡è¿™ä¸ƒå¤§æ¨¡å¼çš„å­¦ä¹ æˆ‘ä»¬äº†è§£åˆ°ï¼š
â€¢ V8çš„JITç‰¹æ€§ä½¿JavaScriptè¡¨ç°å‡ºæ¥è¿‘åŸç”Ÿè¯­è¨€çš„æ€§èƒ½æ½œåŠ›<br/>
â€¢å¤§éƒ¨åˆ†æ”¶ç›Šæ¥è‡ªé¿å…å»ä¼˜åŒ–çš„é™·é˜±è€Œéå¤æ‚çš„ç®—æ³•æ”¹å˜<br/>
â€¢å¾®å°çš„ç¼–ç é£æ ¼æ”¹å˜å¯èƒ½äº§ç”Ÿä¸æˆæ¯”ä¾‹çš„å·¨å¤§å›æŠ¥</p>
<p>è®°ä½è¿™äº›åŸåˆ™å¹¶éè¦æ±‚åœ¨æ‰€æœ‰åœ°æ–¹éƒ½æœºæ¢°å¥—ç”¨â€”â€”å…³é”®æ˜¯ç†è§£èƒŒåçš„åŸç†å¹¶åœ¨hot pathä¸Šæ­£ç¡®åº”ç”¨ã€‚"è¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº"ï¼Œä½†äº‹åä¸è¿›è¡Œæµ‹é‡é©±åŠ¨çš„ä¼˜åŒ–åŒæ ·ä¸å¯å–ã€‚</p>
<p>å»ºè®®å°†è¿™äº›æŠ€å·§èå…¥æ—¥å¸¸å¼€å‘æµç¨‹ä¸­å¹¶ç»“åˆçœŸå®ä¸–ç•Œçš„åŸºå‡†æµ‹è¯•æŒç»­éªŒè¯æ•ˆæœâ€”â€”æ‚¨å¯èƒ½ä¼šæƒŠè®¶åœ°å‘ç°é‚£äº›çœ‹ä¼¼å¾®ä¸è¶³é“çš„æ”¹åŠ¨ç¡®å®å¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Easy-Es 2.1.0-easysearch ç‰ˆæœ¬å‘å¸ƒ]]></title>    <link>https://juejin.cn/post/7586585688005443625</link>    <guid>https://juejin.cn/post/7586585688005443625</guid>    <pubDate>2025-12-23T04:22:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585688005443625" data-draft-id="7586623059525009471" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Easy-Es 2.1.0-easysearch ç‰ˆæœ¬å‘å¸ƒ"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2025-12-23T04:22:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æé™å®éªŒå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/1258294223312599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Easy-Es 2.1.0-easysearch ç‰ˆæœ¬å‘å¸ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1258294223312599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æé™å®éªŒå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T04:22:13.000Z" title="Tue Dec 23 2025 04:22:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">01 | ç‰ˆæœ¬æ›´æ–°æ¦‚è¿°</h2>
<p>ç»è¿‡æé™ç§‘æŠ€ä¸ Dromara å¼€æºç¤¾åŒºä¸‹ Easy-Es é¡¹ç›®çš„ç´§å¯†åˆä½œä¸å…±åŒåŠªåŠ›ï¼Œæˆ‘ä»¬å¾ˆè£å¹¸åœ°<strong>è”åˆæ¨å‡º</strong> <strong>Easy-Es 2.1.0-easysearch</strong> ç‰ˆæœ¬ï¼</p>
<p>ä½œä¸ºåŒæ–¹æºæ‰‹æ‰“é€ çš„ç¬¬ä¸€ä¸ªåˆä½œæˆæœï¼Œæœ¬ç‰ˆæœ¬å·²æ­£å¼å‘å¸ƒï¼š</p>
<ul>
<li><strong>æºç ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fdromara%2Feasy-es%2Ftree%2Feasy-es4easySearch%2F" target="_blank" title="https://gitee.com/dromara/easy-es/tree/easy-es4easySearch/" ref="nofollow noopener noreferrer">gitee.com/dromara/easâ€¦</a></li>
<li><strong>Maven ä¾èµ–</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmvnrepository.com%2Fartifact%2Forg.dromara.easy-es%2Feasy-es-boot-starter%2F2.1.0-easysearch" target="_blank" title="https://mvnrepository.com/artifact/org.dromara.easy-es/easy-es-boot-starter/2.1.0-easysearch" ref="nofollow noopener noreferrer">mvnrepository.com/artifact/orâ€¦</a></li>
</ul>
<p>æœ¬æ¬¡æ›´æ–°çš„æ ¸å¿ƒå†…å®¹æ˜¯å°† <strong>Easy-Es</strong> æ¡†æ¶åº•å±‚å¢åŠ å…¼å®¹æé™ç§‘æŠ€è‡ªä¸»ç ”å‘çš„ <strong>Easysearch</strong> æœç´¢å¼•æ“ï¼Œè¿™æ ‡å¿—ç€<strong>å›½äº§æœç´¢å¼•æ“ä¸å›½å†…ä¼˜ç§€å¼€æºé¡¹ç›®æ·±åº¦èåˆ</strong>çš„é‡è¦é‡Œç¨‹ç¢‘ï¼Œæ˜¯<strong>æé™ç§‘æŠ€ä¸ Dromara ç¤¾åŒºæºæ‰‹å…±å»ºå›½äº§æŠ€æœ¯ç”Ÿæ€</strong>çš„åˆ›æ–°å®è·µã€‚</p>
<h2 data-id="heading-1">02 | è¿ç§»è‡³ Easysearch çš„èƒŒæ™¯ä¸ä¼˜åŠ¿</h2>
<p>éšç€å›½å†…å¯¹è‡ªä¸»å¯æ§æŠ€æœ¯éœ€æ±‚çš„æ—¥ç›Šå¢é•¿ï¼Œç‰¹åˆ«æ˜¯åœ¨åŸºç¡€è®¾æ–½è½¯ä»¶é¢†åŸŸï¼Œä¼ä¸šå¯¹äºä¿¡åˆ›åˆè§„çš„è¦æ±‚ä¸æ–­æå‡ã€‚æé™ç§‘æŠ€è‡ªä¸»ç ”å‘çš„ Easysearch æœç´¢å¼•æ“å…·å¤‡ä»¥ä¸‹æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å›½äº§åŒ–è‡ªä¸»å¯æ§</strong>ï¼šå®Œå…¨è‡ªä¸»ç ”å‘ï¼Œç¬¦åˆä¿¡åˆ›è¦æ±‚ï¼Œæ— è®¸å¯è¯é£é™©ï¼Œä¸ºä¼ä¸šæä¾›å®‰å…¨å¯é çš„æŠ€æœ¯ä¿éšœ</li>
<li><strong>è½»é‡çº§æ¶æ„</strong>ï¼šç›¸æ¯”ä¼ ç»Ÿæœç´¢å¼•æ“ï¼Œèµ„æºå ç”¨æ›´å°‘ï¼Œå¯åŠ¨æ›´å¿«é€Ÿï¼Œæ˜¾è‘—é™ä½ä¼ä¸šè¿ç»´æˆæœ¬</li>
<li><strong>å“è¶Šæ€§èƒ½è¡¨ç°</strong>ï¼šæŸ¥è¯¢æ€§èƒ½ä¼˜å¼‚ï¼Œèƒ½å¤Ÿæ»¡è¶³å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯éœ€æ±‚ï¼Œç”¨æˆ·ä½“éªŒæµç•…</li>
<li><strong>è‰¯å¥½å…¼å®¹æ€§</strong>ï¼šä¸ Elasticsearch çš„ API æ¥å£åŸºæœ¬å…¼å®¹ï¼Œè¿ç§»æˆæœ¬è¾ƒä½ï¼Œä¿æŠ¤ç”¨æˆ·ç°æœ‰æŠ•èµ„</li>
</ul>
<p>åŸºäºä»¥ä¸Šä¼˜åŠ¿ï¼ŒåŒæ–¹å†³å®šå…±åŒå°† Easy-Es æ¡†æ¶åº•å±‚è¿ç§»è‡³ Easysearchï¼Œè¿™ä¸ä»…ä¸ºç”¨æˆ·æä¾›æ›´å¤šé€‰æ‹©ï¼Œæ›´æ˜¯åŒæ–¹æºæ‰‹æ¨åŠ¨å›½äº§æœç´¢å¼•æ“ç”Ÿæ€å»ºè®¾çš„é‡è¦ä¸¾æªã€‚</p>
<h2 data-id="heading-2">03 | Easy-Es æ¡†æ¶ä¼˜åŠ¿</h2>
<p>Easy-Es æ¡†æ¶åœ¨æœç´¢å¼€å‘é¢†åŸŸå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>æç®€ä»£ç å¼€å‘</strong>ï¼šç›¸æ¯”åŸç”Ÿ API å¯å‡å°‘ 50%-80% çš„ä»£ç é‡ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ Easy-Es ä»…éœ€ä¸€è¡Œä»£ç å®ŒæˆæŸ¥è¯¢</span>
List&lt;Document&gt; documents = documentMapper.selectList(
    EsWrappers.lambdaQuery(Document.class).eq(Document::getTitle, <span class="hljs-string">"æµ‹è¯•"</span>)
);
</code></pre>
<ol start="2">
<li>
<p><strong>è‡ªåŠ¨ç´¢å¼•ç®¡ç†</strong>ï¼š
æ¡†æ¶æä¾›å…¨è‡ªåŠ¨æ™ºèƒ½ç´¢å¼•æ‰˜ç®¡åŠŸèƒ½ï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒç´¢å¼•çš„åˆ›å»ºã€æ›´æ–°åŠæ•°æ®è¿ç§»ç­‰å¤æ‚æ“ä½œï¼Œç´¢å¼•å…¨ç”Ÿå‘½å‘¨æœŸç”±æ¡†æ¶è‡ªåŠ¨ç®¡ç†ï¼Œè¿‡ç¨‹é›¶åœæœºã€‚</p>
</li>
<li>
<p><strong>SQL è¯­æ³•å…¼å®¹</strong>ï¼š
æ”¯æŒä½¿ç”¨ MySQL è¯­æ³•å®Œæˆæœç´¢æŸ¥è¯¢æ“ä½œï¼Œæ— éœ€å­¦ä¹ å¤æ‚çš„ DSL è¯­å¥ã€‚æ”¯æŒ andã€orã€likeã€in ç­‰å¸¸ç”¨ SQL è¯­æ³•ã€‚</p>
</li>
<li>
<p><strong>Lambda è¡¨è¾¾å¼æ”¯æŒ</strong>ï¼š
é‡‡ç”¨ Lambda é£æ ¼ç¼–ç¨‹ï¼Œæä¾›ç±»å‹å®‰å…¨çš„å­—æ®µè®¿é—®ï¼Œé¿å…æ‰‹åŠ¨è¾“å…¥å­—æ®µåå¯èƒ½äº§ç”Ÿçš„é”™è¯¯ï¼Œæå‡ä»£ç å¯è¯»æ€§å’Œå¼€å‘æ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>æ— ç¼ Spring Boot é›†æˆ</strong>ï¼š
ä¸ Spring Boot ç”Ÿæ€æ·±åº¦é›†æˆï¼Œæä¾›å¼€ç®±å³ç”¨çš„è‡ªåŠ¨é…ç½®ï¼Œæ— éœ€å¤æ‚çš„æ‰‹åŠ¨é…ç½®ï¼Œæ”¯æŒ Spring Boot Actuator ç›‘æ§ï¼Œå®Œç¾èå…¥ä¼ä¸šçº§åº”ç”¨æ¶æ„ã€‚</p>
</li>
<li>
<p><strong>ä¸°å¯Œçš„æŸ¥è¯¢åŠŸèƒ½</strong>ï¼š
æ”¯æŒå¤æ‚çš„åµŒå¥—æŸ¥è¯¢ã€èšåˆæŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢ã€é«˜äº®æ˜¾ç¤ºç­‰é«˜çº§æœç´¢åŠŸèƒ½ï¼ŒåŒæ—¶ä¿æŒ API çš„ç®€æ´æ˜“ç”¨ï¼Œæ»¡è¶³å„ç§ä¸šåŠ¡åœºæ™¯éœ€æ±‚ã€‚</p>
</li>
<li>
<p><strong>åˆ†å¸ƒå¼æ¶æ„æ”¯æŒ</strong>ï¼š
å®Œç¾é€‚é… Easysearch çš„åˆ†å¸ƒå¼ç‰¹æ€§ï¼Œæ”¯æŒé›†ç¾¤æ¨¡å¼éƒ¨ç½²ï¼Œå…·å¤‡é«˜å¯ç”¨æ€§å’Œæ¨ªå‘æ‰©å±•èƒ½åŠ›ï¼Œæ»¡è¶³ä¼ä¸šçº§å¤§è§„æ¨¡æ•°æ®å¤„ç†éœ€æ±‚ã€‚</p>
</li>
<li>
<p><strong>æˆç†Ÿç¨³å®šçš„å›½äº§ ORM æ¡†æ¶</strong>ï¼š
ä½œä¸º Dromara å¼€æºç¤¾åŒºä¸‹çš„é¡¶çº§å¼€æºé¡¹ç›®ï¼ŒEasy-Es å·²åœ¨å›½å†…ä¼—å¤šä¼ä¸šå’Œé¡¹ç›®ä¸­å¾—åˆ°å¹¿æ³›åº”ç”¨å’ŒéªŒè¯ï¼Œæ‹¥æœ‰æ´»è·ƒçš„ä¸­æ–‡ç¤¾åŒºå’Œå®Œå–„çš„æ–‡æ¡£æ”¯æŒï¼Œä¸ºä¼ä¸šçº§åº”ç”¨æä¾›äº†å¯é çš„æŠ€æœ¯ä¿éšœã€‚</p>
</li>
</ol>
<h2 data-id="heading-3">04 | å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹</h2>
<h3 data-id="heading-4">1. æ·»åŠ ä¾èµ–</h3>
<p>æ ¹æ®æ‚¨ä½¿ç”¨çš„æ„å»ºå·¥å…·ï¼Œé€‰æ‹©å¯¹åº”çš„é…ç½®æ–¹å¼ï¼š</p>
<h4 data-id="heading-5">Maven é¡¹ç›®</h4>
<p><strong>pom.xml é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">spring-boot.version</span>&gt;</span>2.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring-boot.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.dromara.easy-es<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>easy-es-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.0-easysearch<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<p><strong>Maven å¯åŠ¨å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œåº”ç”¨</span>
mvn spring-boot:run

<span class="hljs-comment"># ç¼–è¯‘æ‰“åŒ…</span>
mvn clean package
</code></pre>
<h4 data-id="heading-6">Gradle é¡¹ç›®</h4>
<p><strong>build.gradle é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-gradle" lang="gradle">plugins {
    id 'java'
    id 'org.springframework.boot' version '2.7.0'
    id 'io.spring.dependency-management' version '1.0.11.RELEASE'
}

group = 'org.easysearch'
version = '1.0-SNAPSHOT'
sourceCompatibility = '11'

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    implementation 'org.dromara.easy-es:easy-es-boot-starter:2.1.0-easysearch'
    implementation 'org.springframework.boot:spring-boot-starter-web'
}
</code></pre>
<p><strong>Gradle å¯åŠ¨å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œåº”ç”¨</span>
./gradlew bootRun

<span class="hljs-comment"># ç¼–è¯‘æ‰“åŒ…</span>
./gradlew clean build
</code></pre>
<h3 data-id="heading-7">2. é…ç½®æ–‡ä»¶è®¾ç½®</h3>
<p><strong>application.yml</strong>ï¼ˆæ ¹æ®å®é™… Easysearch éƒ¨ç½²æƒ…å†µä¿®æ”¹ï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">easy-es:</span>
  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span>
  <span class="hljs-comment"># Easysearch æœåŠ¡åœ°å€</span>
  <span class="hljs-attr">address:</span> <span class="hljs-string">localhost:9200</span>
  <span class="hljs-comment"># åè®®ï¼šhttp æˆ– https</span>
  <span class="hljs-attr">schema:</span> <span class="hljs-string">https</span>
  <span class="hljs-comment"># Easysearch ç”¨æˆ·å</span>
  <span class="hljs-attr">username:</span> <span class="hljs-string">admin</span>
  <span class="hljs-comment"># Easysearch å¯†ç </span>
  <span class="hljs-attr">password:</span> <span class="hljs-string">your_password_here</span>
  <span class="hljs-comment"># è¿æ¥ä¿æŒæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
  <span class="hljs-attr">keep-alive-millis:</span> <span class="hljs-number">18000</span>

  <span class="hljs-attr">global-config:</span>
    <span class="hljs-comment"># å¼€å¯å½©è›‹æ¨¡å¼ï¼ˆå¯åŠ¨æ—¶æ˜¾ç¤º ASCII è‰ºæœ¯å›¾æ¡ˆï¼‰</span>
    <span class="hljs-attr">i-kun-mode:</span> <span class="hljs-literal">true</span>
    <span class="hljs-comment"># ç´¢å¼•å¤„ç†æ¨¡å¼ï¼šsmoothly è¡¨ç¤ºå¹³æ»‘æ¨¡å¼ï¼ˆé›¶åœæœºæ›´æ–°ç´¢å¼•ï¼‰</span>
    <span class="hljs-attr">process-index-mode:</span> <span class="hljs-string">smoothly</span>
    <span class="hljs-comment"># å¼‚æ­¥å¤„ç†ç´¢å¼•æ—¶æ˜¯å¦é˜»å¡</span>
    <span class="hljs-attr">async-process-index-blocking:</span> <span class="hljs-literal">true</span>
    <span class="hljs-comment"># æ˜¯å¦æ‰“å° DSL è¯­å¥ï¼ˆå¼€å‘è°ƒè¯•æ—¶å¯è®¾ä¸º trueï¼‰</span>
    <span class="hljs-attr">print-dsl:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">db-config:</span>
      <span class="hljs-comment"># ä¸‹åˆ’çº¿è½¬é©¼å³°</span>
      <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
      <span class="hljs-comment"># ç´¢å¼•å‰ç¼€</span>
      <span class="hljs-attr">index-prefix:</span> <span class="hljs-string">dev_</span>
      <span class="hljs-comment"># ä¸»é”®ç±»å‹ï¼šcustomize è¡¨ç¤ºè‡ªå®šä¹‰</span>
      <span class="hljs-attr">id-type:</span> <span class="hljs-string">customize</span>
      <span class="hljs-comment"># å­—æ®µæ›´æ–°ç­–ç•¥ï¼šnot_empty è¡¨ç¤ºéç©ºæ—¶æ‰æ›´æ–°</span>
      <span class="hljs-attr">field-strategy:</span> <span class="hljs-string">not_empty</span>
      <span class="hljs-comment"># åˆ·æ–°ç­–ç•¥ï¼šimmediate è¡¨ç¤ºç«‹å³åˆ·æ–°</span>
      <span class="hljs-attr">refresh-policy:</span> <span class="hljs-string">immediate</span>
      <span class="hljs-comment"># å¼€å¯è¿½è¸ªæ€»å‘½ä¸­æ•°</span>
      <span class="hljs-attr">enable-track-total-hits:</span> <span class="hljs-literal">true</span>
</code></pre>
<h3 data-id="heading-8">3. å®ä½“ç±»å®šä¹‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.dromara.easyes.sample.entity;

<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.experimental.Accessors;
<span class="hljs-keyword">import</span> org.dromara.easyes.annotation.HighLight;
<span class="hljs-keyword">import</span> org.dromara.easyes.annotation.IndexField;
<span class="hljs-keyword">import</span> org.dromara.easyes.annotation.IndexId;
<span class="hljs-keyword">import</span> org.dromara.easyes.annotation.IndexName;
<span class="hljs-keyword">import</span> org.dromara.easyes.annotation.Settings;
<span class="hljs-keyword">import</span> org.dromara.easyes.annotation.rely.Analyzer;
<span class="hljs-keyword">import</span> org.dromara.easyes.annotation.rely.FieldStrategy;
<span class="hljs-keyword">import</span> org.dromara.easyes.annotation.rely.FieldType;
<span class="hljs-keyword">import</span> org.dromara.easyes.annotation.rely.IdType;

<span class="hljs-keyword">import</span> java.time.LocalDateTime;

<span class="hljs-comment">/**
 * es æ•°æ®æ¨¡å‹
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Accessors(chain = true)</span>
<span class="hljs-meta">@Settings(shardsNum = 3, replicasNum = 2)</span>
<span class="hljs-meta">@IndexName(value = "easyes_document", keepGlobalPrefix = true)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Document</span> {
    <span class="hljs-comment">/**
     * es ä¸­çš„å”¯ä¸€ id
     */</span>
    <span class="hljs-meta">@IndexId(type = IdType.CUSTOMIZE)</span>
    <span class="hljs-keyword">private</span> String id;

    <span class="hljs-comment">/**
     * æ–‡æ¡£æ ‡é¢˜ï¼Œé»˜è®¤ä¸º keyword ç±»å‹ï¼Œå¯è¿›è¡Œç²¾ç¡®æŸ¥è¯¢
     */</span>
    <span class="hljs-keyword">private</span> String title;

    <span class="hljs-comment">/**
     * æ–‡æ¡£å†…å®¹ï¼ŒæŒ‡å®šä¸º TEXT ç±»å‹ï¼Œä½¿ç”¨ IK åˆ†è¯å™¨
     * æ”¯æŒé«˜äº®æ˜¾ç¤ºï¼Œé«˜äº®ç»“æœæ˜ å°„åˆ° highlightContent å­—æ®µ
     */</span>
    <span class="hljs-meta">@HighLight(mappingField = "highlightContent")</span>
    <span class="hljs-meta">@IndexField(fieldType = FieldType.TEXT, analyzer = Analyzer.IK_SMART)</span>
    <span class="hljs-keyword">private</span> String content;

    <span class="hljs-comment">/**
     * åˆ›å»ºè€…ï¼Œå­—æ®µç­–ç•¥ä¸ºéç©ºæ—¶æ‰æ›´æ–°
     */</span>
    <span class="hljs-meta">@IndexField(strategy = FieldStrategy.NOT_EMPTY)</span>
    <span class="hljs-keyword">private</span> String creator;

    <span class="hljs-comment">/**
     * åˆ›å»ºæ—¶é—´
     */</span>
    <span class="hljs-meta">@IndexField(fieldType = FieldType.DATE, dateFormat = "yyyy-MM-dd HH:mm:ss")</span>
    <span class="hljs-keyword">private</span> LocalDateTime gmtCreate;

    <span class="hljs-comment">/**
     * é«˜äº®è¿”å›å€¼è¢«æ˜ å°„çš„å­—æ®µ
     */</span>
    <span class="hljs-keyword">private</span> String highlightContent;

    <span class="hljs-comment">/**
     * æ–‡æ¡£ç‚¹èµæ•°
     */</span>
    <span class="hljs-keyword">private</span> Integer starNum;

    <span class="hljs-comment">/**
     * åœ°ç†ä½ç½®ç»çº¬åº¦åæ ‡ï¼Œä¾‹å¦‚: "40.13933715136454,116.63441990026217"
     */</span>
    <span class="hljs-meta">@IndexField(fieldType = FieldType.GEO_POINT)</span>
    <span class="hljs-keyword">private</span> String location;
}
</code></pre>
<h3 data-id="heading-9">4. Mapper æ¥å£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.dromara.easyes.sample.mapper;

<span class="hljs-keyword">import</span> org.dromara.easyes.core.kernel.BaseEsMapper;
<span class="hljs-keyword">import</span> org.dromara.easyes.sample.entity.Document;

<span class="hljs-comment">/**
 * Mapper æ¥å£ï¼Œç»§æ‰¿ BaseEsMapper å³å¯è·å¾—æ‰€æœ‰ CRUD æ–¹æ³•
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DocumentMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseEsMapper</span>&lt;Document&gt; {
}
</code></pre>
<h3 data-id="heading-10">5. å¯åŠ¨ç±»é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.dromara.easyes.sample;

<span class="hljs-keyword">import</span> org.dromara.easyes.spring.annotation.EsMapperScan;
<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;

<span class="hljs-comment">/**
 * å¯åŠ¨ç±»
 */</span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EsMapperScan("org.dromara.easyes.sample.mapper")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EasyEsApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(EasyEsApplication.class, args);
    }
}
</code></pre>
<h3 data-id="heading-11">6. ä¸šåŠ¡ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.dromara.easyes.sample.controller;

<span class="hljs-keyword">import</span> org.dromara.easyes.core.conditions.select.LambdaEsQueryWrapper;
<span class="hljs-keyword">import</span> org.dromara.easyes.sample.entity.Document;
<span class="hljs-keyword">import</span> org.dromara.easyes.sample.mapper.DocumentMapper;
<span class="hljs-keyword">import</span> org.easysearch.action.search.SearchResponse;
<span class="hljs-keyword">import</span> org.easysearch.search.aggregations.Aggregations;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestParam;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;

<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SampleController</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> DocumentMapper documentMapper;

    <span class="hljs-comment">/**
     * åˆå§‹åŒ–æ’å…¥æ•°æ®
     */</span>
    <span class="hljs-meta">@GetMapping("/insert")</span>
    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">insert</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-comment">// æ’å…¥ 5 æ¡æµ‹è¯•æ•°æ®</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++) {
            <span class="hljs-type">Document</span> <span class="hljs-variable">document</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>();
            document.setId(String.valueOf(i));
            document.setTitle(<span class="hljs-string">"æµ‹è¯•"</span> + i);
            document.setContent(<span class="hljs-string">"æµ‹è¯•å†…å®¹"</span> + i);
            document.setCreator(<span class="hljs-string">"åˆ›å»ºè€…"</span> + i);
            document.setGmtCreate(LocalDateTime.now());
            document.setStarNum(i * <span class="hljs-number">10</span>);
            count += documentMapper.insert(document);
        }
        <span class="hljs-keyword">return</span> count;
    }

    <span class="hljs-comment">/**
     * æ ¹æ®æ ‡é¢˜ç²¾ç¡®æŸ¥è¯¢
     */</span>
    <span class="hljs-meta">@GetMapping("/listDocumentByTitle")</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">listDocumentByTitle</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String title)</span> {
        LambdaEsQueryWrapper&lt;Document&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaEsQueryWrapper</span>&lt;&gt;();
        wrapper.eq(Document::getTitle, title);
        <span class="hljs-keyword">return</span> documentMapper.selectList(wrapper);
    }

    <span class="hljs-comment">/**
     * é«˜äº®æœç´¢
     */</span>
    <span class="hljs-meta">@GetMapping("/highlightSearch")</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">highlightSearch</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String content)</span> {
        LambdaEsQueryWrapper&lt;Document&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaEsQueryWrapper</span>&lt;&gt;();
        wrapper.match(Document::getContent, content);
        <span class="hljs-keyword">return</span> documentMapper.selectList(wrapper);
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æ‰€æœ‰æ•°æ®
     */</span>
    <span class="hljs-meta">@GetMapping("/selectAll")</span>
    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">selectAll</span><span class="hljs-params">()</span> {
        LambdaEsQueryWrapper&lt;Document&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaEsQueryWrapper</span>&lt;&gt;();
        <span class="hljs-keyword">return</span> documentMapper.selectList(wrapper);
    }

    <span class="hljs-comment">/**
     * èšåˆæŸ¥è¯¢ - æŒ‰åˆ›å»ºæ—¶é—´å’Œç‚¹èµæ•°åˆ†ç»„ç»Ÿè®¡
     */</span>
    <span class="hljs-meta">@GetMapping("/aggByDateAndStar")</span>
    <span class="hljs-keyword">public</span> Aggregations <span class="hljs-title function_">aggByDateAndStar</span><span class="hljs-params">()</span> {
        LambdaEsQueryWrapper&lt;Document&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaEsQueryWrapper</span>&lt;&gt;();
        wrapper.groupBy(Document::getGmtCreate)
                .max(Document::getStarNum)
                .min(Document::getStarNum);
        <span class="hljs-type">SearchResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> documentMapper.search(wrapper);
        <span class="hljs-keyword">return</span> response.getAggregations();
    }

    <span class="hljs-comment">/**
     * ä½¿ç”¨ SQL è¯­å¥æŸ¥è¯¢æ–‡æ¡£
     */</span>
    <span class="hljs-meta">@GetMapping("/queryBySQL")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">queryBySQL</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(required = false)</span> String title)</span> {
        String sql;
        <span class="hljs-keyword">if</span> (title != <span class="hljs-literal">null</span> &amp;&amp; !title.isEmpty()) {
            sql = String.format(<span class="hljs-string">"SELECT * FROM dev_easyes_document WHERE title = '%s'"</span>, title);
        } <span class="hljs-keyword">else</span> {
            sql = <span class="hljs-string">"SELECT * FROM dev_easyes_document LIMIT 10"</span>;
        }
        <span class="hljs-keyword">return</span> documentMapper.executeSQL(sql);
    }
}
</code></pre>
<h3 data-id="heading-12">7. å¿«é€Ÿæµ‹è¯•</h3>
<p>å¯åŠ¨åº”ç”¨åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ¥å£æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ’å…¥æµ‹è¯•æ•°æ®</span>
curl http://localhost:8080/insert

<span class="hljs-comment"># 2. æŸ¥è¯¢æ‰€æœ‰æ•°æ®</span>
curl http://localhost:8080/selectAll

<span class="hljs-comment"># 3. æ ¹æ®æ ‡é¢˜ç²¾ç¡®æŸ¥è¯¢</span>
curl <span class="hljs-string">"http://localhost:8080/listDocumentByTitle?title=æµ‹è¯•1"</span>

<span class="hljs-comment"># 4. é«˜äº®æœç´¢</span>
curl <span class="hljs-string">"http://localhost:8080/highlightSearch?content=æµ‹è¯•"</span>

<span class="hljs-comment"># 5. SQL æŸ¥è¯¢</span>
curl <span class="hljs-string">"http://localhost:8080/queryBySQL?title=æµ‹è¯•1"</span>

<span class="hljs-comment"># 6. èšåˆæŸ¥è¯¢</span>
curl http://localhost:8080/aggByDateAndStar
</code></pre>
<h2 data-id="heading-13">05 | ç›¸å…³é“¾æ¥</h2>
<ul>
<li><strong>Easy-Es å®˜æ–¹ç½‘ç«™</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Feasy-es.cn" target="_blank" title="https://easy-es.cn" ref="nofollow noopener noreferrer">easy-es.cn</a></li>
<li><strong>Gitee ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fdromara%2Feasy-es" target="_blank" title="https://gitee.com/dromara/easy-es" ref="nofollow noopener noreferrer">gitee.com/dromara/easâ€¦</a></li>
<li><strong>GitHub ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdromara%2Feasy-es" target="_blank" title="https://github.com/dromara/easy-es" ref="nofollow noopener noreferrer">github.com/dromara/easâ€¦</a></li>
<li><strong>Easysearch å®˜æ–¹ç½‘ç«™</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Finfinilabs.cn%2Fproducts%2Feasysearch" target="_blank" title="https://infinilabs.cn/products/easysearch" ref="nofollow noopener noreferrer">infinilabs.cn/products/eaâ€¦</a></li>
</ul>
<h2 data-id="heading-14">06 | ç‰¹åˆ«è‡´è°¢</h2>
<p>åœ¨æ­¤ï¼Œæé™ç§‘æŠ€è¦ç‰¹åˆ«æ„Ÿè°¢ Easy-Es é¡¹ç›®çš„æ ¸å¿ƒå¼€å‘è€…â€œè€æ±‰â€å’Œå„ä½è´¡çŒ®è€…å’Œç»´æŠ¤è€…ä»¬ã€‚æ­£æ˜¯å› ä¸ºæœ‰äº†ä½ ä»¬çš„è¾›å‹¤ä»˜å‡ºã€ä¸“ä¸šç²¾ç¥ä»¥åŠå¯¹å¼€æºäº‹ä¸šçš„çƒ­å¿±å¥‰çŒ®ï¼ŒEasy-Es é¡¹ç›®æ‰èƒ½åœ¨å›½å†…å¤–è·å¾—å¦‚æ­¤å¹¿æ³›çš„è®¤å¯å’Œåº”ç”¨ã€‚</p>
<p>ä¹Ÿæ„Ÿè°¢ä½ ä»¬å¯¹å›½äº§æŠ€æœ¯ç”Ÿæ€å»ºè®¾çš„ä¿¡ä»»ä¸æ”¯æŒã€‚æ­¤æ¬¡ Easy-Es ä¸ Easysearch çš„æ·±åº¦æ•´åˆï¼Œæ­£æ˜¯åŒæ–¹é€šåŠ›åˆä½œã€äº’åˆ©å…±èµ¢çš„æœ€ä½³ä½“ç°ã€‚</p>
<p>æˆ‘ä»¬ç›¸ä¿¡ï¼Œåœ¨ Easy-Es é¡¹ç›®å›¢é˜Ÿçš„æŒç»­æ¨åŠ¨ä¸‹ï¼Œå›½äº§å¼€æºè½¯ä»¶å¿…å°†è¿æ¥æ›´åŠ è¾‰ç…Œçš„æ˜å¤©ã€‚æé™ç§‘æŠ€å°†ç»§ç»­è‡´åŠ›äºæä¾›ä¼˜è´¨çš„å›½äº§æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼Œä¸ Easy-Es é¡¹ç›®å›¢é˜Ÿæºæ‰‹å…±è¿›ï¼Œä¸ºä¸­å›½å¼€æºç”Ÿæ€çš„å‘å±•è´¡çŒ®æ›´å¤šåŠ›é‡ï¼</p>
<hr/>
<h2 data-id="heading-15">å…³äº Easy-Es</h2>
<p>Easy-Esï¼ˆç®€ç§° EEï¼‰æ˜¯ä¸€æ¬¾åŸºäº Elasticsearch(ç®€ç§° ES)å®˜æ–¹æä¾›çš„ ElasticsearchClient æ‰“é€ çš„ ORM å¼€å‘æ¡†æ¶ï¼Œåœ¨ ElasticsearchClient çš„åŸºç¡€ä¸Šï¼Œåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿï¼Œæ‚¨å¦‚æœæœ‰ç”¨è¿‡ Mybatis-Plus(ç®€ç§° MP)ï¼Œé‚£ä¹ˆæ‚¨åŸºæœ¬å¯ä»¥é›¶å­¦ä¹ æˆæœ¬ç›´æ¥ä¸Šæ‰‹ EEï¼ŒEE æ˜¯ MP çš„ ES å¹³æ›¿ç‰ˆï¼Œåœ¨æœ‰äº›æ–¹é¢ç”šè‡³æ¯” MP æ›´ç®€å•ï¼ŒåŒæ—¶ä¹Ÿèå…¥äº†æ›´å¤š ES ç‹¬æœ‰çš„åŠŸèƒ½ï¼ŒåŠ©åŠ›æ‚¨å¿«é€Ÿå®ç°å„ç§åœºæ™¯çš„å¼€å‘ã€‚</p>
<p><strong>å®˜ç½‘</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.easy-es.cn" target="_blank" title="https://www.easy-es.cn" ref="nofollow noopener noreferrer">www.easy-es.cn</a></p>
<p>Easy-Es for Easysearch æ˜¯ä¸€æ¬¾ç®€åŒ– Easysearch å›½äº§åŒ–æœç´¢å¼•æ“æ“ä½œçš„å¼€æºæ¡†æ¶ï¼Œå…¨è‡ªåŠ¨æ™ºèƒ½ç´¢å¼•æ‰˜ç®¡ã€‚åŒæ—¶ä¹Ÿæ˜¯å›½å†…é¦–å®¶ä¸“é—¨é’ˆå¯¹ Easysearch å®¢æˆ·ç«¯ç®€åŒ–çš„å·¥å…·ã€‚å®ƒç®€åŒ– CRUD åŠå…¶å®ƒé«˜é˜¶æ“ä½œï¼Œå¯ä»¥æ›´å¥½çš„å¸®åŠ©å¼€å‘è€…å‡è½»å¼€å‘è´Ÿæ‹…ã€‚åº•å±‚é‡‡ç”¨ Easysearch Java Clientï¼Œä¿è¯å…¶åŸç”Ÿæ€§èƒ½åŠæ‹“å±•æ€§ã€‚</p>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fdromara%2Feasy-es%2Ftree%2Feasy-es4easySearch" target="_blank" title="https://gitee.com/dromara/easy-es/tree/easy-es4easySearch" ref="nofollow noopener noreferrer">gitee.com/dromara/easâ€¦</a></p>
<h2 data-id="heading-16">å…³äºæé™ç§‘æŠ€</h2>
<p><strong>æé™ç§‘æŠ€</strong>ï¼ˆå…¨ç§°ï¼šæé™æ•°æ®ï¼ˆåŒ—äº¬ï¼‰ç§‘æŠ€æœ‰é™å…¬å¸ï¼‰æ˜¯ä¸€å®¶ä¸“æ³¨äºå®æ—¶æœç´¢ä¸æ•°æ®åˆ†æçš„è½¯ä»¶å…¬å¸ã€‚</p>
<p><strong>æ——ä¸‹å“ç‰Œ</strong>ï¼šæé™å®éªŒå®¤ï¼ˆINFINI Labsï¼‰è‡´åŠ›äºæ‰“é€ æè‡´æ˜“ç”¨çš„æ•°æ®æ¢ç´¢ä¸åˆ†æä½“éªŒï¼Œä¸ºç”¨æˆ·æä¾›å®‰å…¨ã€ç¨³å®šã€é«˜æ€§èƒ½çš„å›½äº§æœç´¢è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>å®˜ç½‘</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Finfinilabs.cn" target="_blank" title="https://infinilabs.cn" ref="nofollow noopener noreferrer">infinilabs.cn</a></p>
<blockquote>
<p>ä½œè€…ï¼šå¼ ç£Šï¼Œæé™ç§‘æŠ€ï¼ˆINFINI Labsï¼‰æœç´¢å¼•æ“ç ”å‘è´Ÿè´£äººï¼Œå¯¹ Elasticsearch å’Œ Lucene æºç æ¯”è¾ƒç†Ÿæ‚‰ï¼Œç›®å‰ä¸»è¦è´Ÿè´£å…¬å¸çš„ Easysearch äº§å“çš„ç ”å‘ä»¥åŠå®¢æˆ·æœåŠ¡å·¥ä½œã€‚
åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Finfinilabs.cn%2Fblog%2F2025%2Feasy-es-2.1.0-easysearch-release%2F" target="_blank" title="https://infinilabs.cn/blog/2025/easy-es-2.1.0-easysearch-release/" ref="nofollow noopener noreferrer">infinilabs.cn/blog/2025/eâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨Specç»™AI Agentç«‹è§„çŸ©ï¼ŒAIç¼–ç å‘Šåˆ«æ‰‹å¿™è„šä¹±]]></title>    <link>https://juejin.cn/post/7586569284551655464</link>    <guid>https://juejin.cn/post/7586569284551655464</guid>    <pubDate>2025-12-23T03:22:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586569284551655464" data-draft-id="7586531677721477155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨Specç»™AI Agentç«‹è§„çŸ©ï¼ŒAIç¼–ç å‘Šåˆ«æ‰‹å¿™è„šä¹±"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-23T03:22:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–‡å¿ƒå¿«ç BaiduComate"/> <meta itemprop="url" content="https://juejin.cn/user/992209294070809"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨Specç»™AI Agentç«‹è§„çŸ©ï¼ŒAIç¼–ç å‘Šåˆ«æ‰‹å¿™è„šä¹±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/992209294070809/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–‡å¿ƒå¿«ç BaiduComate
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:22:15.000Z" title="Tue Dec 23 2025 03:22:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æµ…æSpecæ¨¡å¼</h2>
<p>åœ¨ç”¨AIå†™ä»£ç æ—¶ï¼Œä½ æœ‰æ²¡æœ‰è¿‡è¿™æ ·çš„å›°æ‰°ï¼Ÿ<strong>è®©AIæ”¹ä¸ªåŠŸèƒ½ï¼Œå®ƒè¦ä¹ˆä¹±æ”¹ä¸€é€šï¼Œè¦ä¹ˆè«åå…¶å¦™åŠ äº›ç”¨ä¸ä¸Šçš„ä»£ç ï¼Œæ€»æ„Ÿè§‰å®ƒâ€œä¸å¬è¯â€æˆ–è€…â€œä¸ä¸“å¿ƒâ€ï¼Ÿ</strong> è¿™ç§æƒ…å†µçš„å‡ºç°ï¼Œå°±æ˜¯å› ä¸ºæ²¡å’ŒAIæœ‹å‹å•†é‡å¥½æ‰§è¡Œæ€è·¯ã€‚</p>
<p>é’ˆå¯¹æ­¤æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨Rulesè§„å®šå®ƒçš„æ€è€ƒæ¡†æ¶ã€‚æ—©æœŸï¼ŒCursorç¤¾åŒºä¸­æœ‰ä¸€ç§AIç¼–ç è¡Œä¸ºåè®®å«åšRIPER-5ï¼Œä»£è¡¨äº”ç§æ¨¡å¼(ç ”ç©¶RESEARCH-ä¿¡æ¯æ”¶é›†å’Œæ·±å…¥ç†è§£ã€åˆ›æ–°INNOVATE-å¤´è„‘é£æš´æ½œåœ¨æ–¹æ³•ã€è®¡åˆ’PLAN-åˆ›å»ºè¯¦å°½çš„æŠ€æœ¯è§„èŒƒã€æ‰§è¡ŒEXECUTE-å‡†ç¡®å®æ–½è§„åˆ’çš„å†…å®¹ã€å›é¡¾REVIEW-æ— æƒ…åœ°éªŒè¯å®æ–½ä¸è®¡åˆ’çš„ç¬¦åˆç¨‹åº¦) ï¼Œé€šè¿‡å¼ºåˆ¶æ€§ã€åˆ†é˜¶æ®µçš„æµç¨‹æ¥çº¦æŸAIçš„è¡Œä¸ºï¼Œç¡®ä¿å…¶åœ¨æ‰§è¡Œå¤æ‚ç¼–ç ä»»åŠ¡æ—¶çš„æ¯ä¸€æ­¥æ“ä½œéƒ½å®‰å…¨ã€å¯æ§ä¸”ç¬¦åˆé¢„æœŸã€‚</p>
<p>éœ€è¦å°†è¿™ä¸ªå·¥ä½œæµè¯´æ˜ç»™åˆ°ç¼–ç æ™ºèƒ½ä½“ï¼Œæ‰§è¡Œæ—¶é™åˆ¶å½“å‰é˜¶æ®µéœ€è¦åšçš„äº‹æƒ…ä»¥åŠä¸å¯åšçš„äº‹æƒ…ï¼Œå¦å¤–éœ€è¦äººå·¥ç»™æ˜ç¡®ä¿¡å·è½¬ç§»åˆ°ä¸‹ä¸€ä¸ªæ¨¡å¼ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯è¿˜æ˜¯æŒºéš¾å—çš„ï¼ŸSPECæ¨¡å¼çš„å‡ºç°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚<strong>ç™¾åº¦æ–‡å¿ƒå¿«ç æœ€è¿‘æ¨å‡ºäº†SPECç¼–ç æ¨¡å¼ï¼Œè®©ç¼–ç ä»»åŠ¡æ›´åŠ è§„èŒƒ</strong>ï¼Œ<strong>ä»è€Œå¤§å¹…æå‡äº†Agentçš„ä»£ç ç”Ÿæˆè´¨é‡å’Œæ•ˆæœã€‚</strong></p>
<p><strong>SPECæ¨¡å¼çš„æ ¸å¿ƒç‚¹æ˜¯"è§„èŒƒé©±åŠ¨å¼€å‘"</strong> ï¼ˆSpecification-Driven Developmentï¼ŒSDDï¼‰æ¨¡å¼ï¼Œè¿™ä¸ä¼ ç»Ÿçš„"æ°›å›´ç¼–ç "ï¼ˆVibe Codingï¼‰å½¢æˆäº†å¯¹æ¯”ã€‚ç”¨ã€Œåšé¥­ã€è¿™ä¸ªæœ€è´´è¿‘ç”Ÿæ´»çš„åœºæ™¯æ¥ç±»æ¯”ï¼Œ<strong>Vibeç¼–ç¨‹å°±åƒã€Œè¡—å¤´å¤§å¨å‡­æ„Ÿè§‰é¢ å‹ºã€ï¼Œæ²¡æœ‰å›ºå®šé£Ÿè°±ï¼Œå…¨é ã€Œæ‰‹æ„Ÿã€ç«å€™ã€é£Ÿå®¢åé¦ˆã€åšèœã€‚è€ŒSPECå°±æ˜¯ã€ŒæŒ‰ç±³å…¶æ—é£Ÿè°±ç²¾å‡†åšèœã€ï¼š</strong></p>
<p>1.å…ˆæ˜ç¡®ã€Œæƒ…å¢ƒã€ï¼šä»Šæ™šè¦åš 3 äººä»½çš„æ³•å¼ç‰›æ’ï¼Œé£Ÿææ¸…å•ã€å¨å…·éƒ½æå‰ç¡®è®¤ï¼›</p>
<p>2.å†é”å®šã€Œé—®é¢˜ã€ï¼šç‰›æ’å®¹æ˜“ç…è€ï¼Œä¸”è¦ç²¾å‡†è¾¾åˆ°äº”åˆ†ç†Ÿï¼›</p>
<p>3.æ¥ç€ã€Œåˆ†æè¯„ä¼°ã€ï¼šè®¡ç®—ç‰›æ’åšåº¦ï¼ˆ2cmï¼‰å¯¹åº”ç…åˆ¶æ—¶é—´ï¼ˆæ¯é¢ 2 åˆ†é’Ÿï¼‰ï¼Œç”šè‡³é¢„åˆ¤ã€Œç«å¤ªçŒ›ä¼šç„¦ã€ï¼Œæå‰å‡†å¤‡è°ƒå°ç«çš„é¢„æ¡ˆï¼›</p>
<p>4.æœ€åã€Œç»“è®º / è¡ŒåŠ¨ã€ï¼šä¸¥æ ¼æŒ‰æ­¥éª¤æ‰§è¡Œï¼Œç…å®Œé™ç½® 3 åˆ†é’Ÿï¼Œæ‘†ç›˜åæ£€æŸ¥ç†Ÿåº¦ï¼Œè®°å½•è¿™æ¬¡çš„æ—¶é—´å‚æ•°ï¼Œä¸‹æ¬¡å¤ç”¨ã€‚</p>
<p>å¯¹åº”åˆ°SPECæ¨¡å¼å°±æ˜¯ä»¥ä¸‹äº”ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>æ–‡æ¡£Docï¼šéœ€æ±‚ç›®æ ‡ã€å®ç°æ–¹æ¡ˆè¯´æ˜ã€‚</li>
<li>ä»»åŠ¡Tasksï¼šä»»åŠ¡æ‹†è§£ä¸æ‰§è¡Œè®¡åˆ’ã€‚</li>
<li>ä»£ç å˜æ›´Changesï¼šæ‰§è¡Œé˜¶æ®µçš„ä»£ç å˜æ›´å¯è§†åŒ–ä¸éªŒè¯ã€‚</li>
<li>ç½‘é¡µé¢„è§ˆPreviewï¼šå¯è§†åŒ–å‰ç«¯æˆ–æœ€ç»ˆæˆæœé¢„è§ˆã€‚</li>
<li>ä»»åŠ¡æ€»ç»“Summaryï¼šä»»åŠ¡æ€»ç»“ä¸äº¤ä»˜ç»“æœã€‚</li>
</ul>
<p><strong>SPECæ¨¡å¼å°†å¼€å‘è¿‡ç¨‹ä»¥åŠå…³é”®äº§ç‰©å…¨éƒ¨å‘ˆç°å‡ºæ¥ï¼Œå¯ä»¥éšæ—¶æŸ¥çœ‹ã€ä¿®æ”¹ï¼Œç”šè‡³å¯ä»¥å›é€€åˆ°ä¸Šä¸ªæ­¥éª¤ï¼Œè®©AIçš„å·¥ä½œä¸å†æ˜¯é»‘ç›’ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯è§å¯å¹²é¢„çš„åä½œè¿‡ç¨‹</strong>ã€‚è¿™æ ·ä¹Ÿä¼šè¿«ä½¿å¤§å®¶åœ¨å¼€å§‹å°±æƒ³æ¸…æ¥šã€‚</p>
<h2 data-id="heading-1">Q&amp;A</h2>
<p><strong>Q1ï¼š Specæ¨¡å¼å’Œç›´æ¥ç”¨AIç”Ÿæˆä»£ç æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p><strong>Aï¼š</strong> ä¼ ç»Ÿæ¨¡å¼æ˜¯â€œé»‘ç›’ç›´å‡ºâ€ï¼šäººç±»ç»™æŒ‡ä»¤ï¼ŒAIç›´æ¥ç”Ÿæˆä»£ç å’Œä¿®æ”¹ã€‚ä¸€æ—¦å®ƒçš„ç†è§£æœ‰åå·®ï¼Œé¢å¯¹çš„å°±æ˜¯ä¸€å †éœ€è¦è´¹åŠ›å®¡æŸ¥å’Œçº æ­£çš„é”™è¯¯ä»£ç ï¼Œ<strong>è¿”å·¥æˆæœ¬å¾ˆé«˜</strong>ã€‚è€ŒSpecæ¨¡å¼å°†è¿‡ç¨‹â€œç™½ç›’åŒ–â€å’Œâ€œé˜¶æ®µåŒ–â€äº†ã€‚<strong>å®ƒçš„æ ¸å¿ƒåŒºåˆ«æ˜¯å¼•å…¥äº†ä¸€ä¸ª â€œéœ€ç¡®è®¤â€çš„ç¼“å†²é˜¶æ®µï¼ˆæ–‡æ¡£Docå’Œä»»åŠ¡Tasksï¼‰</strong> ã€‚å¯ä»¥æå‰çœ‹åˆ°AIçš„â€œæ€è·¯â€ï¼Œ<strong>å¹¶åœ¨æˆæœ¬æœ€ä½çš„â€œè®¡åˆ’é˜¶æ®µâ€å°±ä¿®æ­£é”™è¯¯æˆ–è°ƒæ•´æ–¹å‘ï¼Œä»è€Œä»æ ¹æºä¸Šé¿å…â€œåšæ— ç”¨åŠŸâ€ã€‚</strong></p>
<p><strong>Q2ï¼š Specæ¨¡å¼åœ¨å®é™…æ“ä½œä¸­ä¼šä¸ä¼šæµç¨‹å¾ˆå¤æ‚ï¼Ÿ</strong></p>
<p><strong>Aï¼š</strong> æ“ä½œéå¸¸ç›´è§‚ï¼Œå¯ä»¥é€šè¿‡æ¸…æ™°çš„â€œäº§ç‰©è§†å›¾â€æ¥å¼•å¯¼ã€‚ç•Œé¢è®¾æœ‰å…­ä¸ªæ ‡ç­¾é¡µï¼ˆTabï¼‰ï¼Œç ”å‘åªéœ€è¦å…³æ³¨å…¶ä¸­ä¸¤ä¸ªæœ€å…³é”®çš„éƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>æ–‡æ¡£ï¼ˆDocï¼‰</strong> ï¼šAIåœ¨è¿™é‡Œå‘ˆç°å®ƒå¯¹éœ€æ±‚çš„ç†è§£å’Œæ•´ä½“å®ç°æ–¹æ¡ˆã€‚è¿™æ˜¯<strong>ç¬¬ä¸€æ¬¡ç¡®è®¤ç‚¹</strong>ã€‚</li>
<li><strong>ä»»åŠ¡ï¼ˆTasksï¼‰</strong> ï¼šAIå°†æ–¹æ¡ˆæ‹†è§£ä¸ºå…·ä½“çš„ã€å¯æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ã€‚è¿™æ˜¯<strong>ç¬¬äºŒæ¬¡ï¼Œä¹Ÿæ˜¯æ‰§è¡Œå‰çš„æœ€åä¸€æ¬¡ç¡®è®¤ç‚¹</strong>ã€‚ä½ çš„å·¥ä½œé‡å¿ƒä»â€œé€è¡Œå®¡æŸ¥ä»£ç â€è½¬å˜ä¸ºâ€œç²¾å‡†å®¡æ ¸å¼€å¤´å’Œç»“å°¾â€ã€‚ä¸€æ—¦ç¡®è®¤Tasksï¼ŒAIä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œå¹¶é™†ç»­äº§ç”ŸChangesï¼ˆä»£ç å˜æ›´ï¼‰ã€Previewï¼ˆé¢„è§ˆï¼‰ç­‰åç»­äº§ç‰©ã€‚æ•´ä¸ªè¿‡ç¨‹æ˜¯<strong>éšæ€§å¼•å¯¼ã€æŸ”æ€§æ¨è¿›</strong>çš„ï¼Œäººç±»æ‹¥æœ‰éšæ—¶ä¸­æ–­æˆ–è°ƒæ•´çš„â€œåˆ¹è½¦æƒâ€ã€‚</li>
</ol>
<p><strong>Q3ï¼š Specæ¨¡å¼é€‚åˆä»€ä¹ˆæ ·çš„å¼€å‘åœºæ™¯ï¼Ÿ</strong></p>
<p><strong>Aï¼š</strong> å®ƒéå¸¸é€‚åˆ<strong>éœ€æ±‚æ˜ç¡®ä½†å®ç°æœ‰ä¸€å®šå¤æ‚åº¦</strong>çš„åœºæ™¯ï¼Œä¾‹å¦‚ï¼šå¼€å‘ä¸€ä¸ªæ–°åŠŸèƒ½æ¨¡å—ã€è¿›è¡Œä¸€æ¬¡æ¶‰åŠå¤šä¸ªæ–‡ä»¶çš„é‡æ„ã€æˆ–å®ç°ä¸€ä¸ªè¯¦ç»†çš„ä¸šåŠ¡é€»è¾‘ã€‚å¯¹äº<strong>å›¢é˜Ÿæ¶æ„å¸ˆ</strong>ï¼Œå¯ä»¥é€šè¿‡å®¡æ ¸Docæ¥ç¡®ä¿æŠ€æœ¯æ–¹æ¡ˆç¬¦åˆæ¶æ„è§„èŒƒï¼›å¯¹äº<strong>æ ¸å¿ƒå¼€å‘è€…</strong>ï¼Œå¯ä»¥é€šè¿‡å®¡æ ¸Tasksæ¥ç¡®ä¿å®ç°è·¯å¾„çš„ä¸¥è°¨æ€§ï¼›å³ä½¿æ˜¯<strong>æ–°æ‰‹æˆ–è·¨ç•Œå¼€å‘è€…</strong>ï¼Œä¹Ÿèƒ½é€šè¿‡è¿™ä¸ªæ¸…æ™°çš„è¿‡ç¨‹æ›´å¥½åœ°ç†è§£å’Œæ§åˆ¶AIçš„å·¥ä½œï¼Œå°†å…¶è½¬åŒ–ä¸ºå¯é çš„ç”Ÿäº§åŠ›ã€‚</p>
<p><strong>Q4ï¼š AIä»£ç å®¡æŸ¥å’Œä¼ ç»Ÿçš„é™æ€æ‰«æå·¥å…·æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</strong></p>
<p><strong>Aï¼š</strong> AIä»£ç å®¡æŸ¥æ˜¯ "ä»£ç ç†è§£è€…"ï¼Œä¼ ç»Ÿé™æ€æ‰«ææ˜¯ "è§„åˆ™æ‰§è¡Œè€…"ã€‚</p>
<ul>
<li><strong>åº•å±‚åŸç†ï¼š</strong> å‰è€…æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ã€æ·±åº¦å­¦ä¹ ï¼Œé€šè¿‡ç†è§£ä»£ç è¯­ä¹‰å’Œä¸Šä¸‹æ–‡æ¨ç†é—®é¢˜ï¼Œåè€…åŸºäºé¢„å®šä¹‰è§„åˆ™åº“ã€æ­£åˆ™è¡¨è¾¾å¼ã€è¯­æ³•è§£ææ ‘çš„æ¨¡å¼åŒ¹é…ï¼›</li>
<li><strong>ä¸šåŠ¡é€»è¾‘æ¼æ´ï¼š</strong> å‰è€…å¯è¯†åˆ«ï¼ˆåŸºäºå¯¹ä»£ç æ„å›¾çš„ç†è§£ï¼‰ï¼›åè€…åŸºæœ¬ä¸æ”¯æŒï¼ˆè§„åˆ™æ— æ³•åŒ¹é…ä¸šåŠ¡è¯­ä¹‰ï¼‰ï¼›</li>
<li><strong>æ˜“ç”¨æ€§ä¸é›†æˆæ€§ï¼š</strong> å‰è€…å¯IDEå¯é›†æˆåˆ° CI/CDï¼›åè€…ä¸€èˆ¬é›†æˆåœ¨CI/CDéœ€è¦ç¼–å†™å¤æ‚è„šæœ¬ï¼›</li>
<li><strong>é€‚é…æ€§ï¼š</strong> å‰è€…æ”¯æŒå®šåˆ¶åŒ–è®­ç»ƒå¯é€‚é…å†…éƒ¨è§„èŒƒå’Œç‰¹æœ‰é€»è¾‘ï¼Œåè€…ä¸ºé€šç”¨å‹æ— æ³•é€‚é…å†…éƒ¨è§„èŒƒã€‚</li>
</ul>
<p>å‰è€…æ™ºèƒ½ä½†å‡†ç¡®æ€§å°šä¸è¶³ï¼Œéœ€è¦äººå»å†³ç­–ï¼Œåè€…é«˜æ•ˆä½†æ­»æ¿ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼ŒäºŒè€…ç»“åˆæ‰èƒ½æœ€å¤§åŒ–ä»£ç è´¨é‡ä¸å®‰å…¨ã€‚</p>
<p><strong>Q5ï¼š AIä»£ç å®¡æŸ¥å¦‚ä½•çœŸæ­£æå‡å›¢é˜Ÿçš„å¼€å‘æ•ˆç‡ï¼Ÿ</strong></p>
<p><strong>Aï¼šæ ¸å¿ƒæ˜¯æŠŠå¼€å‘è€…ä»é‡å¤ã€ä½ä»·å€¼çš„å®¡æŸ¥å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œèšç„¦é«˜ä»·å€¼çš„é€»è¾‘è®¾è®¡å’Œä¸šåŠ¡åˆ›æ–°ï¼ŒåŒæ—¶é€šè¿‡æ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–é™ä½åä½œæˆæœ¬ã€‚</strong></p>
<ol>
<li>ç¼–ç é˜¶æ®µï¼šå®æ—¶çº é”™ï¼Œå‡å°‘ã€Œè¿”å·¥æˆæœ¬ã€</li>
<li>å¼€å‘è€…æœ€è€—æ—¶çš„ç¯èŠ‚ä¹‹ä¸€æ˜¯ã€Œç¼–ç â†’æµ‹è¯•â†’å‘ç°é—®é¢˜â†’è¿”å·¥ã€çš„å¾ªç¯ï¼ŒAI ä»£ç å®¡æŸ¥èƒ½æŠŠé—®é¢˜æ‹¦æˆªåœ¨ç¼–ç é˜¶æ®µï¼Œå¤§å¹…ç¼©çŸ­è¿™ä¸ªå¾ªç¯ï¼š</li>
<li>ä»£ç è¯„å®¡ï¼ˆCode Reviewï¼‰é˜¶æ®µï¼šä»ã€Œäººå·¥é€è¡ŒæŸ¥ã€åˆ°ã€ŒAI å…ˆç­› + äººå·¥èšç„¦æ ¸å¿ƒã€</li>
</ol>
<p>ä¼ ç»Ÿ CR çš„ç—›ç‚¹æ˜¯ï¼šè¯„å®¡è€…éœ€èŠ±è´¹å¤§é‡æ—¶é—´æ£€æŸ¥ã€ŒåŸºç¡€æ¼æ´ã€æ ¼å¼é—®é¢˜ã€é‡å¤ä»£ç ã€ï¼ŒçœŸæ­£èšç„¦ã€Œä¸šåŠ¡é€»è¾‘ã€æ¶æ„è®¾è®¡ã€çš„æ—¶é—´å æ¯”ä¸è¶³ 30%ã€‚AI å¯é‡æ„ CR æµç¨‹ã€‚</p>
<ul>
<li>AIå‰ç½®è¿‡æ»¤ä½ä»·å€¼é—®é¢˜ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤ã€Œè¯­æ³•é”™è¯¯ã€å¸¸è§æ¼æ´ï¼ˆSQL æ³¨å…¥ / XSSï¼‰ã€ä»£ç å¼‚å‘³ï¼ˆè¿‡é•¿å‡½æ•° / é‡å¤ä»£ç ï¼‰ã€ï¼Œä»…å°†ã€Œé«˜é£é™©é€»è¾‘æ¼æ´ã€æ¶æ„é—®é¢˜ã€æäº¤äººå·¥è¯„å®¡ã€‚</li>
<li><strong>AIç”Ÿæˆç»“æ„åŒ–è¯„å®¡æŠ¥å‘Š</strong>ï¼šæ›¿ä»£äººå·¥å†™ã€Œè¯„å®¡å¤‡æ³¨ã€ï¼Œè‡ªåŠ¨æ ‡æ³¨ï¼š</li>
</ul>

<ul>
<li><strong>è·¨è¯­è¨€ / è·¨æ¨¡å—è¯„å®¡ææ•ˆ</strong>ï¼šæ¯”å¦‚å‰ç«¯é¡¹ç›®è°ƒç”¨åç«¯æ¥å£ï¼ŒAI èƒ½è·¨æ¨¡å—åˆ†æã€Œå‚æ•°ä¼ é€’ä¸åŒ¹é…ã€å¼‚å¸¸å¤„ç†ç¼ºå¤±ã€ç­‰é—®é¢˜ï¼Œè€Œäººå·¥è¯„å®¡å¾€å¾€å› ä¸ç†Ÿæ‚‰å…¶ä»–æ¨¡å—ä»£ç å¯¼è‡´é—æ¼ã€‚</li>
</ul>
<p><strong>Q6ï¼š æœ‰äº†AIä»£ç å®¡æŸ¥èƒ½åŠ›åï¼Œäººè¿˜éœ€è¦åšä»€ä¹ˆå·¥ä½œå‘¢ï¼Ÿ</strong></p>
<p><strong>Aï¼š</strong> äººä¸å†éœ€è¦åš â€œAI èƒ½åšçš„äº‹â€ï¼Œä½†å¿…é¡»åšå¥½ â€œAI åšä¸äº†çš„äº‹â€ï¼š<strong>æŠŠæ§æ–¹å‘ã€åšå…³é”®å†³ç­–ã€è°ƒæ•™AIã€æ²‰æ·€èƒ½åŠ›ã€é©±åŠ¨åˆ›æ–°ã€‚</strong></p>
<ol>
<li>
<p>å¯¹é½å›¢é˜Ÿç›®æ ‡ï¼Œå®šåˆ¶ AI å®¡æŸ¥è§„åˆ™ï¼ˆé¿å…ã€Œé€šç”¨ AIã€ä¸è´´åˆä¸šåŠ¡ï¼‰</p>
</li>
<li>
<p>é‡åŒ–æ•ˆæœï¼ŒæŒç»­ä¼˜åŒ– AI èƒ½åŠ›</p>
</li>
</ol>
<p>è®¾å®šå¯é‡åŒ–çš„æ•ˆç‡æŒ‡æ ‡ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>CR å¹³å‡è€—æ—¶ï¼šä»ã€Œæ¯åƒè¡Œä»£ç  30åˆ†é’Ÿã€é™è‡³ã€Œæ¯åƒè¡Œä»£ç  10åˆ†é’Ÿã€ï¼›</li>
<li>çº¿ä¸Š Bug ç‡ï¼šå¦‚é€»è¾‘ç±» Bug å‡å°‘ 50% ä»¥ä¸Šï¼›</li>
</ul>
<ol start="3">
<li>å­¦ä¼šé¿å‘</li>
</ol>
<ul>
<li><strong>ä¸è¦ä¾èµ– AI åšã€Œæœ€ç»ˆå†³ç­–ã€</strong>ï¼šAI å¯èƒ½äº§ç”Ÿã€Œå¹»è§‰ã€ï¼ˆç»™å‡ºé”™è¯¯çš„ä¿®å¤å»ºè®®ï¼‰ï¼Œéœ€è®¾å®šã€Œäººå·¥å¤æ ¸é«˜é£é™©å»ºè®®ã€çš„è§„åˆ™ï¼Œé¿å…å›  AI é”™è¯¯å¯¼è‡´çº¿ä¸Šé—®é¢˜ï¼›</li>
<li>æ§åˆ¶ AI å®¡æŸ¥èŒƒå›´ï¼šå¯¹ã€Œæ ¸å¿ƒä¸šåŠ¡æ¨¡å—ã€åšæ·±åº¦å®¡æŸ¥ï¼Œå¯¹ã€Œå·¥å…·ç±» / ä½é£é™©æ¨¡å—ã€ä»…åšåŸºç¡€æ‰«æï¼Œé¿å…è¶…å¤§è§„æ¨¡ä»£ç åˆ†æå¯¼è‡´ IDE å¡é¡¿ã€CI æµç¨‹å˜æ…¢ï¼›</li>
<li>ä¸æ›¿ä»£ã€Œäººå·¥æ¶æ„è¯„å®¡ã€ï¼šAI æ“…é•¿ã€Œç»†èŠ‚é—®é¢˜ã€ï¼Œä½†å¯¹ã€Œæ¶æ„åˆç†æ€§ã€æŠ€æœ¯é€‰å‹ã€çš„åˆ¤æ–­ä¸è¶³ï¼Œéœ€ä¿ç•™ã€Œæ ¸å¿ƒæ¨¡å—æ¶æ„è¯„å®¡ã€çš„äººå·¥ç¯èŠ‚ï¼›</li>
</ul>
<p><strong>Q7ï¼š AIä»£ç ç”Ÿæˆå·¥å…·æœ‰æ—¶ä¼šç”Ÿæˆçœ‹ä¼¼æ­£ç¡®ä½†å®é™…æœ‰é€»è¾‘æ¼æ´æˆ–å®‰å…¨é£é™©çš„ä»£ç ã€‚åœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œåº”å¦‚ä½•ç³»ç»Ÿæ€§é˜²èŒƒè¿™ç§â€œæ™ºèƒ½å¹»è§‰â€å¸¦æ¥çš„é£é™©ï¼Ÿ</strong></p>
<p><strong>Aï¼š</strong> è¿™æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„å·¥ç¨‹å®è·µé—®é¢˜ã€‚å¯ä»¥å»ºç«‹ <strong>â€œç”Ÿæˆå¼AIä»£ç è´¨é‡é—¨ç¦â€</strong> ä½“ç³»ï¼š</p>
<ol>
<li><strong>æ˜ç¡®è§„èŒƒä¸è´£ä»»</strong>ï¼šç›®å‰é˜¶æ®µä»£ç è¿˜æ˜¯éƒ½å½’åˆ°ã€äººã€çš„å¤´ä¸Šï¼Œæ‰€ä»¥å¯¹äºç”Ÿæˆçš„æ‰€æœ‰ä»£ç é€»è¾‘äººå¿…é¡»æ˜¯è¦ä¿è¯æ¸…æ¥šçš„ã€‚ä¸è¿œçš„å°†æ¥ï¼Œå¦‚æœçœŸçš„ä¸éœ€è¦äººçš„è¯ï¼Œè¦åˆ¶å®šå›¢é˜Ÿå†…éƒ¨çš„ã€ŠAIç”Ÿæˆä»£ç ä½¿ç”¨è§„èŒƒã€‹ï¼Œå“ªäº›åœºæ™¯éœ€ç¦ç”¨ã€å“ªäº›åœºæ™¯éœ€äººå·¥å¤æ ¸ã€‚</li>
<li><strong>æµç¨‹å¼ºåˆ¶æ£€æŸ¥:</strong> å¦‚åŒäººä»£ç å®¡æŸ¥æœºåˆ¶ã€‚</li>
</ol>
<p><strong>Q8ï¼š åœ¨AI Code Reviewä¸­ï¼Œç»å¸¸æ”¶åˆ°å¤§é‡å…³äºä»£ç é£æ ¼ã€ç®€å•é”™è¯¯çš„å»ºè®®ï¼Œåè€Œé€ æˆäº†â€œå‘Šè­¦ç–²åŠ³â€ã€‚å¦‚ä½•é…ç½®å’Œä¼˜åŒ–AIå®¡æŸ¥å·¥å…·ï¼Œä½¿å…¶èšç„¦äºçœŸæ­£æœ‰ä»·å€¼çš„ã€é«˜å±‚æ¬¡çš„æ´å¯Ÿï¼Ÿ</strong></p>
<p><strong>Aï¼š</strong> è¿™éœ€è¦ä»â€œå™ªå£°è¿‡æ»¤â€å’Œâ€œä¿¡å·å¢å¼ºâ€ä¸¤ä¸ªç»´åº¦è¿›è¡Œé…ç½®ä¼˜åŒ–ï¼š</p>
<p><strong>åˆ†å±‚ä¸é™å™ª</strong>ï¼š</p>
<ul>
<li><strong>å…³é—­åŸºç¡€å™ªéŸ³</strong>ï¼šåœ¨å·¥å…·è®¾ç½®ä¸­ï¼Œç›´æ¥å…³é—­å›¢é˜Ÿå·²é€šè¿‡ESLintã€Prettierç­‰å·¥å…·è‡ªåŠ¨åŒ–å¤„ç†çš„è§„åˆ™ï¼Œè¿™äº›é”™è¯¯å·¥å…·æ›´æ“…é•¿ã€‚</li>
<li><strong>è®¾ç½®ä¸¥é‡æ€§ç­‰çº§</strong>ï¼šåªè®©AIåœ¨PRä¸­<strong>é«˜äº®æ˜¾ç¤ºâ€œå…³é”®â€å’Œâ€œé‡è¦â€çº§åˆ«çš„é—®é¢˜</strong>ï¼Œå¦‚æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆã€æ¶æ„å¼‚å‘³ã€å®‰å…¨æ¼æ´ã€‚</li>
</ul>
<p><strong>å®šåˆ¶ä¸èšç„¦</strong>ï¼š</p>
<ul>
<li><strong>è®­ç»ƒè‡ªå®šä¹‰è§„åˆ™</strong>ï¼šç”¨å›¢é˜Ÿçš„å†å²Code Reviewæ•°æ®è®­ç»ƒå®ƒï¼Œè®©å®ƒå­¦ä¹ å›¢é˜ŸçœŸæ­£å…³å¿ƒçš„æ¨¡å¼ã€‚</li>
<li><strong>Promptä¼˜åŒ–ï¼š</strong> å¯ä¸»åŠ¨è¦æ±‚AIå…³æ³¨ç‰¹å®šæ–¹é¢ã€‚</li>
</ul>
<p><strong>Q9ï¼š å¯¹äºé—ç•™ç³»ç»Ÿæˆ–å¤æ‚çš„è€ä»£ç åº“ï¼ŒAIç¼–ç¨‹å’Œå®¡æŸ¥å·¥å…·ä¼¼ä¹è¡¨ç°ä¸ä½³ã€‚æœ‰ä»€ä¹ˆç­–ç•¥èƒ½è®©AIåœ¨è¿™äº›åœºæ™¯ä¸­æ›´å¥½å¾—å‘æŒ¥ä½œç”¨ï¼Ÿ</strong></p>
<p><strong>Aï¼š</strong> Comateæœ¬èº«å°±æ˜¯å…·å¤‡ä»£ç åº“æ„ŸçŸ¥èƒ½åŠ›çš„IDE, å¯ä»¥é€šè¿‡æ£€ç´¢ç­‰æ‰‹æ®µçœ‹åˆ°é¡¹ç›®å…¨è²Œ ã€‚å¦‚æœè¿˜æ˜¯æ•ˆæœä¸ç†æƒ³çš„è¯ï¼Œå¯ä»¥<strong>ä¸ºAIæä¾›ç‰¹å®šä¸Šä¸‹æ–‡</strong>ï¼Œé‡‡ç”¨ <strong>â€œå¤–ç§‘æ‰‹æœ¯å¼â€</strong> ï¼ˆç²¾ç¡®ã€å¯æ§ï¼‰çš„åº”ç”¨ç­–ç•¥ï¼š</p>
<p><strong>æä¾›çŸ¥è¯†ä¸Šä¸‹æ–‡</strong>ï¼š</p>
<ul>
<li><strong>å¢é‡å¼æ–‡æ¡£åŒ–</strong>ï¼šåœ¨ä¿®æ”¹æŸä¸ªè€æ—§æ¨¡å—å‰ï¼Œå…ˆç”¨AI<strong>åˆ†æä»£ç ç‰‡æ®µï¼Œç”Ÿæˆæ‘˜è¦æ³¨é‡Šæˆ–æµç¨‹å›¾</strong>ã€‚è¿™ä¸ªè¿‡ç¨‹æœ¬èº«å°±æ˜¯åœ¨ä¸ºAIå’Œä½ è‡ªå·±æ„å»ºä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>åˆ›å»ºâ€œçŸ¥è¯†é”šç‚¹â€</strong> ï¼šåœ¨ä»£ç åº“ä¸­ç»´æŠ¤ä¸€ä¸ªå…³é”®çš„ context.md æ–‡ä»¶ï¼Œç”¨AIæ€»ç»“ç³»ç»Ÿæ ¸å¿ƒæµç¨‹ã€ç‹¬ç‰¹çº¦å®šå’Œâ€œåœ°é›·åŒºâ€ã€‚</li>
</ul>
<p><strong>é™åˆ¶èŒƒå›´ï¼Œèšç„¦åº”ç”¨</strong>ï¼š</p>
<ul>
<li><strong>ä¸ç”¨äºå…¨å±€é‡æ„</strong>ï¼šé¿å…è®©AIç›´æ¥é‡å†™æ•´ä¸ªæ¨¡å—ã€‚è€Œæ˜¯ç”¨äº<strong>å±€éƒ¨ä»»åŠ¡</strong>ï¼Œä¾‹å¦‚ï¼šâ€œç”¨TSé‡å†™è¿™ä¸ªæ—§çš„å¯†ç éªŒè¯å‡½æ•°ï¼Œä¿æŒè¾“å…¥è¾“å‡ºä¸å˜â€ã€‚</li>
</ul>
<p><strong>Q10ï¼š éšç€å¤šæ¨¡æ€AIå’ŒCoding Agentçš„å‘å±•ï¼Œæœªæ¥çš„AIç¼–ç¨‹ä¼šæ˜¯ä»€ä¹ˆå½¢æ€ï¼Ÿåº”è¯¥ä¸ºæ­¤åšå¥½ä»€ä¹ˆå‡†å¤‡ï¼Ÿ</strong></p>
<p><strong>Aï¼š</strong> é¢„æµ‹æœªæ¥æ˜¯ä¸ªå¾ˆéš¾çš„äº‹æƒ…ï¼Œä¹Ÿè®¸æœªæ¥ä¼šèµ°å‘ <strong>â€œç›®æ ‡é©±åŠ¨çš„AIè½¯ä»¶å·¥ç¨‹ååŒä½“â€</strong> ã€‚</p>
<p><strong>é¢„æµ‹çš„å½¢æ€</strong>ï¼š</p>
<ul>
<li><strong>ä»ä»£ç ç”Ÿæˆåˆ°â€œå·¥ä½œæµå®Œæˆâ€</strong> ï¼šAIä»£ç†ä¸ä»…èƒ½å†™éœ€æ±‚ä»£ç ï¼Œè¿˜èƒ½<strong>è‡ªä¸»æ‰§è¡Œ</strong>ä¸€ä¸ªå®Œæ•´å¼€å‘ä»»åŠ¡ï¼Œä¸è¿œçš„å°†æ¥ï¼ŒAI Coding ä¹Ÿæ­£åœ¨å¾€AI Development å‘å±•ã€‚å¦‚ï¼šâ€œå®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½â€ï¼Œéšåå®ƒä¼šè‡ªè¡Œæ‹†è§£ä¸ºåˆ›å»ºUIç»„ä»¶ã€åç«¯APIã€æ•°æ®åº“è¿ç§»ã€å¹¶ç¼–å†™æµ‹è¯•ã€CI/CDã€ä¸Šçº¿ã€æ•°æ®åˆ†æã€‚</li>
<li><strong>å¤šæ¨¡æ€äº¤äº’</strong>ï¼šä½ å¯ä»¥å¯¹ç€ç™½æ¿è‰å›¾ã€æ¶æ„å›¾å£è¿°éœ€æ±‚ï¼ŒAIç›´æ¥ç”Ÿæˆå¯¹åº”ä»£ç æ¡†æ¶æˆ–è¯„å®¡ç°æœ‰è®¾è®¡ã€‚</li>
<li><strong>åŠ¨æ€ã€å®æ—¶çš„å®¡æŸ¥ä¸é‡æ„</strong>ï¼šAIå°†æŒç»­åœ¨åå°ç›‘æ§ä»£ç è´¨é‡ï¼Œä¸ä»…æå»ºè®®ï¼Œæ›´ä¼šåœ¨è¢«æˆæƒå<strong>è‡ªåŠ¨å®æ–½</strong>å°å‹ã€å®‰å…¨çš„æ”¹è¿›ï¼ˆå¦‚ä¾èµ–å‡çº§ã€é‡å¤ä»£ç æå–ï¼‰ã€‚</li>
</ul>
<p><strong>è¦åšçš„å‡†å¤‡</strong>ï¼š</p>
<ul>
<li><strong>æå‡æŠ½è±¡ä¸æ¶æ„èƒ½åŠ›</strong>ï¼šå¼€å‘è€…å¿…é¡»æ›´åƒ<strong>ç³»ç»Ÿæ¶æ„å¸ˆå’Œäº§å“è´Ÿè´£äºº</strong>ï¼Œä¸“æ³¨äºå®šä¹‰æ¸…æ™°çš„ç›®æ ‡ã€çº¦æŸæ¡ä»¶å’ŒéªŒæ”¶æ ‡å‡†ï¼Œä»¥ç²¾ç¡®æŒ‡æŒ¥AIå†›å›¢ã€‚</li>
<li><strong>æŒæ¡â€œå…ƒç¼–ç¨‹â€ä¸æç¤ºé“¾è®¾è®¡</strong>ï¼šéœ€è¦è®¾è®¡é«˜æ•ˆçš„å·¥ä½œæµï¼Œè®©å¤šä¸ªAI Agentï¼ˆå¦‚åˆ†æã€å¼€å‘ã€æµ‹è¯•ã€å®¡æŸ¥ä»£ç†ï¼‰ååŒå·¥ä½œã€‚</li>
<li><strong>å¼ºåŒ–éªŒè¯ä¸å¯é æ€§å·¥ç¨‹</strong>ï¼šéšç€AIè‡ªä¸»æ€§å¢å¼ºï¼Œ<strong>ç›‘æ§ã€å¯è§‚æµ‹æ€§ã€å›æ»šæœºåˆ¶å’Œç»¼åˆæµ‹è¯•</strong>å˜å¾—å‰æ‰€æœªæœ‰çš„é‡è¦ï¼Œä»¥ç¡®ä¿AIå®æ–½å˜åŠ¨çš„ç³»ç»Ÿæ•´ä½“ç¨³å®šå¯é ã€‚ç»ˆæå°±æ˜¯è¦åŸ¹å…»ä¸€ç§ <strong>â€œäººæœºå…±é©¾â€</strong> çš„æ€ç»´æ¨¡å¼â€”â€”äººç±»è®¾å®šæˆ˜ç•¥æ–¹å‘å’Œä¼¦ç†æŠ¤æ ï¼ŒAIè´Ÿè´£æˆ˜æœ¯æ‰§è¡Œä¸ä¼˜åŒ–è¿­ä»£ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[pxcharts å¤šç»´è¡¨æ ¼å¼€æºï¼ä¸€æ¬¾ä¸“ä¸ºå¼€å‘è€…å’Œæ•°æ®åˆ†æå¸ˆæ‰“é€ çš„è½»é‡åŒ–æ™ºèƒ½è¡¨æ ¼]]></title>    <link>https://juejin.cn/post/7586569284551606312</link>    <guid>https://juejin.cn/post/7586569284551606312</guid>    <pubDate>2025-12-23T03:14:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586569284551606312" data-draft-id="7586570254861549608" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="pxcharts å¤šç»´è¡¨æ ¼å¼€æºï¼ä¸€æ¬¾ä¸“ä¸ºå¼€å‘è€…å’Œæ•°æ®åˆ†æå¸ˆæ‰“é€ çš„è½»é‡åŒ–æ™ºèƒ½è¡¨æ ¼"/> <meta itemprop="keywords" content="å‰ç«¯,GitHub,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-23T03:14:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾å°å¤•"/> <meta itemprop="url" content="https://juejin.cn/user/3808363978429613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            pxcharts å¤šç»´è¡¨æ ¼å¼€æºï¼ä¸€æ¬¾ä¸“ä¸ºå¼€å‘è€…å’Œæ•°æ®åˆ†æå¸ˆæ‰“é€ çš„è½»é‡åŒ–æ™ºèƒ½è¡¨æ ¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363978429613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾å°å¤•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:14:52.000Z" title="Tue Dec 23 2025 03:14:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸ŠæœŸå’Œå¤§å®¶åˆ†äº«äº†æˆ‘ä»¬ç²¾å¿ƒæ‰“ç£¨çš„ååŒAIæ–‡æ¡£Â <strong>JitWord</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a36f77042543f7bed4f68d70d2d2e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=xCPT3ZLGsa85moB6ERYNNnU909o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€è¿‘ä¸€ç›´åœ¨è¿­ä»£Â <strong>JitWord</strong>Â ååŒæ–‡æ¡£å’ŒÂ <strong>Pxcharts</strong>Â æ™ºèƒ½è¡¨æ ¼ï¼Œæ”¶åˆ°äº†å¾ˆå¤šç²‰ä¸çš„åé¦ˆã€‚ä¸ºäº†è®©æ›´å¤šç”¨æˆ·å’Œå¼€å‘è€…èƒ½äº†è§£å¤šç»´è¡¨æ ¼çš„æŠ€æœ¯å®ç°ä»¥åŠæ ¸å¿ƒçš„ä¸€äº›æŠ€æœ¯æ¶æ„éš¾ç‚¹ï¼Œæˆ‘èŠ±äº†ä¸¤å‘¨æ—¶é—´ï¼Œåšäº†ä¸€æ¬¾å¼€æºç‰ˆçš„å¤šç»´è¡¨æ ¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63374d189f25481fba68a5ce6d53f9bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=utWdegWRFxunNR8S2n4sLMfr4nY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>Pxcharts</strong>Â å¼€æºç‰ˆæ”¯æŒå„ç§å¤æ‚è¡¨æ ¼çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åˆ—æ‹–æ‹½æ’åºï¼Œæ‹–æ‹½è°ƒæ•´å®½åº¦ï¼Œå­—æ®µç®¡ç†ï¼Œè¡Œæ’åºï¼Œå„ç§å¤æ‚ç­›é€‰ï¼Œå¤šè§†å›¾ç®¡ç†ç­‰ï¼Œè¿˜èƒ½è½»æ¾é›†æˆAIåŠŸèƒ½ï¼Œå®ç°AIå¤šç»´è¡¨æ ¼ã€‚è¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šå¼€æºåœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMrXujiang%2Fpxcharts" target="_blank" title="https://github.com/MrXujiang/pxcharts" ref="nofollow noopener noreferrer">github.com/MrXujiang/pâ€¦</a></p>
<p>æ¥ä¸‹æ¥å°±å’Œå¤§å®¶è¯¦ç»†ä»‹ç»ä¸€ä¸‹è¿™æ¬¾å¼€æºå¤šç»´è¡¨æ ¼ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦åšpxchartså¤šç»´è¡¨ï¼Œè¿˜å¼€æºäº†ï¼Ÿ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cede2e590e404b61ada224fc5bd166b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=VE%2FS4%2FoOI53%2F%2BDbukNsMes538kc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤šç»´è¡¨æ ¼ä¸æ˜¯ä¼ ç»Ÿç”µå­è¡¨æ ¼çš„ â€œå‡çº§ç‰ˆâ€ï¼Œè€Œæ˜¯<strong>èåˆäº†è¡¨æ ¼çš„çµæ´»ã€æ•°æ®åº“çš„ç»“æ„åŒ–ã€çœ‹æ¿çš„å¯è§†åŒ–ã€è¡¨å•çš„é‡‡é›†èƒ½åŠ›</strong>çš„ä¸€ç«™å¼åä½œå·¥å…·ã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äº<strong>æ‰“ç ´ â€œæ•°æ®å­¤å²›â€ï¼Œè®©éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½å¿«é€Ÿæ­å»ºä¸ªæ€§åŒ–ä¸šåŠ¡ç³»ç»Ÿ</strong>ï¼Œé€‚é…ä»ä¸ªäººç®¡ç†åˆ°å›¢é˜Ÿåä½œçš„å…¨åœºæ™¯éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2adeba536f884c6eaf4edc9ffc457702~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=Ci%2B1xzFka76U4Kamlci4xpzax4s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶å®æˆ‘åœ¨3å¹´å‰å°±å¼€å§‹ç ”ç©¶å¤šç»´è¡¨æ ¼çš„åº”ç”¨åœºæ™¯å’ŒæŠ€æœ¯å®ç°äº†ï¼Œä¹‹æ‰€ä»¥è¦åšï¼Œæ˜¯å› ä¸ºç›®å‰å¸‚é¢ä¸Šæ²¡æœ‰æ¯”è¾ƒå¥½çš„å¼€æºæ–¹æ¡ˆï¼Œæ›´å¤šçš„åªæ˜¯å¯¹åŸºç¡€è¡¨æ ¼çš„å°è£…ï¼Œå¹¶ä¸èƒ½è¾¾åˆ°å¤æ‚çš„ä¸šåŠ¡ç®¡ç†å’Œå¤šè§†å›¾ç®¡ç†çš„èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db866687c3b74fe0aac6f1b048c593ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=mGRp7eC%2FbVx969rZ7vkDRAU7cWY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ‰€ä»¥åˆ†æäº†å¤§é‡åº”ç”¨åœºæ™¯å’Œç›®å‰çš„å¼€æºæ–¹æ¡ˆä¹‹åï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦åšä¸€æ¬¾æ‹¿å¾—å‡ºæ‰‹çš„å¤šç»´è¡¨æ ¼è§£å†³æ–¹æ¡ˆã€‚pxchartså¤šç»´è¡¨æ ¼å¼€æºç‰ˆçš„åŠŸèƒ½äº®ç‚¹æ¥ä¸‹æ¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹pxchartså¤šç»´è¡¨æ ¼å¼€æºç‰ˆçš„åŠŸèƒ½äº®ç‚¹ï¼Œè®©å¤§å®¶æ›´å¥½çš„æ„Ÿå—å®ƒçš„ä»·å€¼ã€‚</p>
<p>1.Â <strong>å¤šè§†å›¾æ”¯æŒ</strong>Â - è¡¨æ ¼è§†å›¾ã€çœ‹æ¿è§†å›¾ã€äººå‘˜åˆ†é…è§†å›¾ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de865ea0ca754a238c4cc5567a1e6d4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=IdvyOLPM98N6JfHCMLJwtj3oqow%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol start="2">
<li>Â <strong>ç²¾ç¾UIè®¾è®¡</strong>Â - åŸºäº shadcn/ui + Tailwind CSSï¼Œç®€æ´ç°ä»£çš„ç•Œé¢é£æ ¼</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc1081545fc1484fa127dbf224150112~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=Nq6h23dYRzEY%2F0jg2pSdB84jZRA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>3.Â <strong>æ‹–æ‹½æ’åº</strong>Â - æ”¯æŒä»»åŠ¡æ‹–æ‹½æ’åºã€åˆ—æ‹–æ‹½æ’åºï¼Œçµæ´»è‡ªå®šä¹‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f9c3705b84a412589e01f579a9c44a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=GzjFdnqZkHSfzx%2BdCSGpVm8xwI0%3D" alt="å›¾ç‰‡" loading="lazy"/><br/>
<strong>4. æ•°æ®ç»Ÿè®¡</strong>Â - å†…ç½®ä»»åŠ¡ç»Ÿè®¡çœ‹æ¿ï¼Œæ•°æ®å¯è§†åŒ–å±•ç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f46e210d5f8448db21aa948f29075c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=mugWViheHyQ994rFbLgJ%2Fuc43lg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>5. é«˜çº§ç­›é€‰</strong>Â - æ”¯æŒæ¡ä»¶ç­›é€‰ã€æ’åºã€åˆ†ç»„ï¼Œå¿«é€Ÿå®šä½ç›®æ ‡æ•°æ®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feb11dbfb8024f5cae072ee3b4428d24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=Lw1cGaMS5Li%2FjDDsIwRzRdoxShk%3D" alt="å›¾ç‰‡" loading="lazy"/><br/>
<strong>6. æ•°æ®å¯¼å…¥å¯¼å‡º</strong>Â - æ”¯æŒ JSON æ ¼å¼çš„æ•°æ®å¯¼å…¥å¯¼å‡º</p>
<p><strong>7. è‡ªå®šä¹‰å­—æ®µ</strong>Â - æ”¯æŒæ·»åŠ è‡ªå®šä¹‰å­—æ®µï¼Œçµæ´»æ‰©å±•æ•°æ®ç»“æ„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4b30df1048c4751824b87dc4be80739~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=o3rqMnWMB63n%2BFSKYuV99XAtRNY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>8. æ€§èƒ½ä¼˜åŒ–</strong>Â - åŸºäºpxchartsç‹¬æœ‰çš„æ¸²æŸ“å¼•æ“ï¼Œæ”¯æŒé«˜æ€§èƒ½æ¸²æŸ“(Ultraç‰ˆ)</p>
<p>å½“ç„¶è¿˜æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå¤§å®¶å¯ä»¥æœ¬åœ°ä½“éªŒã€‚</p>
<h2 data-id="heading-1">æŠ€æœ¯å®ç°</h2>
<p>å¤šç»´è¡¨æ ¼æˆ‘é‡‡ç”¨äº†åˆ†å±‚è®¾è®¡æ¶æ„ï¼Œåˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ¨¡å—ï¼š</p>
<ol>
<li><strong>åº”ç”¨å±‚</strong>App Routerï¼Œå¤„ç†è·¯ç”±å’Œé¡µé¢çº§é…ç½®</li>
<li><strong>è§†å›¾å±‚</strong>ç‹¬ç«‹çš„è§†å›¾ç»„ä»¶ï¼Œè´Ÿè´£ä¸åŒåŠŸèƒ½æ¨¡å—çš„å±•ç¤º</li>
<li><strong>ä¸šåŠ¡ç»„ä»¶å±‚</strong>å¯å¤ç”¨çš„ä¸šåŠ¡ç»„ä»¶ï¼Œå°è£…ç‰¹å®šä¸šåŠ¡é€»è¾‘</li>
<li><strong>UIç»„ä»¶å±‚</strong>é€šç”¨UIç»„ä»¶ï¼Œæ— ä¸šåŠ¡é€»è¾‘</li>
<li><strong>æ•°æ®å±‚</strong>ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†å’Œæ•°æ®æ“ä½œ</li>
<li><strong>å·¥å…·å±‚</strong>å…¬å…±å·¥å…·å‡½æ•°å’Œè‡ªå®šä¹‰Hooks</li>
</ol>
<p>Â æ‰€æœ‰çš„åˆ†å±‚æ¨¡å—æˆ‘éƒ½é‡‡ç”¨äº†ä¼ä¸šçº§ç»„ä»¶æ¶æ„ï¼Œä¸‹é¢ç®€å•ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹ï¼š</p>
<ol>
<li>è§†å›¾å±‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5633177bbd1d4619b1eb1a0dfce3cb04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=OfGGvwLS%2F%2FKBEcxP%2BiIULGIPTuM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol start="2">
<li>ä¸šåŠ¡å±‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a7aa1a3ff164bc4bff9c0b9cc9be7da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=smYJl3f7I35%2F7qUU1FtSI1wrpJ0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol start="3">
<li>UIå±‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39d5e2a7be7c42e8823609ec469bcacb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=J%2B0Cg%2BiMOpsnpl7dvfc6HHxYIco%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol start="4">
<li>æ•°æ®å±‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8c18cc098444753a3717a80dbed8bb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=58wBL%2BbbkUwl3x6max%2BkVHPvAXg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ol start="5">
<li>å·¥å…·å±‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/059947e0392e46cabe1e27d1352f104a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=5u1wkF1s3OOjxI2xfHP6XFK%2BqBw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ç§æ¶æ„è®¾è®¡å¯ä»¥é€‚é…å„ç§ä¼ä¸šçº§å¤æ‚ç³»ç»Ÿï¼Œå¦‚æœå¤§å®¶åœ¨åšæ¶æ„ç›¸å…³çš„åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚æ¥ä¸‹æ¥ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹Â pxchartsÂ å¼€æºç‰ˆçš„ä»£ç ç»„ç»‡è§„èŒƒï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8eea277b83fa4c30a46617fda50c4c6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064491&amp;x-signature=NWDm8y0EXkC7PAl7s7cQ0ujMpO8%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹‹æ‰€ä»¥è¦åˆ†äº«è¿™ä¸ªæ¨¡å—ï¼Œæ˜¯å› ä¸ºæˆ‘çš„æ¶æ„ä¸“æ ä¸­å¾ˆå¤šç²‰ä¸æƒ³å­¦ä¹ æ¶æ„è®¾è®¡å’Œä»£ç è§„èŒƒï¼Œè¿™é‡Œå°±å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘å¸¸ç”¨å·¥ç¨‹ç»„ç»‡è§„åˆ™ã€‚</p>
<h2 data-id="heading-2">å¿«é€Ÿå¼€å§‹ï¼ˆæœ¬åœ°å¯åŠ¨å¼€å‘æŒ‡å—ï¼‰</h2>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆåœ¨ç”µè„‘é‡Œå‡†å¤‡ä¸€ä¸‹ç¯å¢ƒï¼Œç¯å¢ƒæ¨èï¼š</p>
<ul>
<li>Node.js 18.17 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
<li>pnpm 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ˆæ¨èï¼‰</li>
</ul>
<p>ç„¶åå°±å¯ä»¥è½»æ¾å®‰è£…å¯åŠ¨å•¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†é¡¹ç›®</span>
gitÂ <span class="hljs-built_in">clone</span>Â https://github.com/MrXujiang/pxcharts.git
<span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span>Â pxcharts
<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pnpm install
<span class="hljs-comment"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
pnpm dev
</code></pre>
<p>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a> å°±å¯ä»¥æŸ¥çœ‹åº”ç”¨ã€‚</p>
<p>å¦‚æœå¤§å®¶æƒ³éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ„å»º</span>
pnpmÂ build
<span class="hljs-comment"># å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨</span>
pnpm start
</code></pre>
<p>å¦‚æœå¤§å®¶æƒ³æœåŠ¡å™¨è¿è¡Œæ›´ç¨³å®šï¼Œå¯ä»¥å‚è€ƒæˆ‘æ¶æ„ä¸“æ çš„æœåŠ¡å™¨éƒ¨ç½²ç›¸å…³çš„æ•™ç¨‹ã€‚</p>
<p>æœ€åï¼Œå†å‘ä¸€ä¸‹å¼€æºåœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMrXujiang%2Fpxcharts" target="_blank" title="https://github.com/MrXujiang/pxcharts" ref="nofollow noopener noreferrer">github.com/MrXujiang/pâ€¦</a></p>
<p>å¦‚æœé¡¹ç›®å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œä¸å¦¨ç‚¹ä¸ª star æ”¯æŒä¸€ä¸‹å“¦ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾ªåºæ¸è¿› â€”â€” Flutter GetX çŠ¶æ€ç®¡ç†]]></title>    <link>https://juejin.cn/post/7586559672129568820</link>    <guid>https://juejin.cn/post/7586559672129568820</guid>    <pubDate>2025-12-23T02:56:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586559672129568820" data-draft-id="7507820125945921590" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾ªåºæ¸è¿› â€”â€” Flutter GetX çŠ¶æ€ç®¡ç†"/> <meta itemprop="keywords" content="Flutter,é¢è¯•,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-23T02:56:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äººå½¢æ‰“ç æœº"/> <meta itemprop="url" content="https://juejin.cn/user/2085122730895063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾ªåºæ¸è¿› â€”â€” Flutter GetX çŠ¶æ€ç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2085122730895063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äººå½¢æ‰“ç æœº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T02:56:07.000Z" title="Tue Dec 23 2025 02:56:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Flutter åº”ç”¨å¼€å‘ä¸­çŠ¶æ€ç®¡ç†æ˜¯é‡è¦çš„ä¸€ç¯ï¼Œç›®å‰æˆç†Ÿçš„çŠ¶æ€ç®¡ç†æ’ä»¶æœ‰ providerï¼Œproviderï¼Œgetx ç­‰ï¼Œæœ¬æ–‡åŸºäº getx çš„ä½¿ç”¨åŠåŸºæœ¬åŸç†å±•å¼€è®¨è®ºï¼Œæ–‡æœ«æœ‰å…·ä½“å·¥ç¨‹ç¤ºä¾‹é“¾æ¥ï¼›</p>
<h2 data-id="heading-0">1. GetX çš„æ ¸å¿ƒæ¶æ„</h2>
<p>GetX æ˜¯ä¸€ä¸ªè½»é‡çº§çš„çŠ¶æ€ç®¡ç†ã€ä¾èµ–æ³¨å…¥å’Œè·¯ç”±ç®¡ç†æ¡†æ¶ï¼Œå®ƒçš„æ ¸å¿ƒç›®æ ‡â€”â€”&gt;</p>
<blockquote>
<p>å‡å°‘æ ·æ¿ä»£ç ï¼Œæœ€å¤§åŒ–å¼€å‘æ•ˆç‡</p>
</blockquote>
<p>ä»æ›´æ–°åŸç†åŠå·¥ç¨‹æ•´åˆä¸Šä¸ provider åŠ bloc çš„å·®å¼‚</p>









































<table><thead><tr><th>ç»´åº¦</th><th>Provider</th><th>BLoC</th><th>GetX</th></tr></thead><tbody><tr><td>æ˜¯å¦ä¾èµ– context</td><td>å¼º</td><td>ä¸­</td><td>âŒ ä¸éœ€è¦</td></tr><tr><td>çŠ¶æ€æ›´æ–°æ¨¡å‹</td><td>rebuild</td><td>event â†’ state</td><td>å“åº”å¼ / å‘½ä»¤å¼</td></tr><tr><td>æ ·æ¿ä»£ç </td><td>å°‘</td><td>å¤š</td><td>æå°‘</td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td>Widget é©±åŠ¨</td><td>BLoC æ˜¾å¼æ§åˆ¶</td><td>Route + SmartManagement</td></tr><tr><td>å·¥ç¨‹æ•´åˆåº¦</td><td>ä½</td><td>ä¸­</td><td>é«˜</td></tr></tbody></table>
<h3 data-id="heading-1">1.1 å“åº”å¼ç¼–ç¨‹æ¨¡å‹</h3>
<p>GetX çš„å“åº”å¼ç¼–ç¨‹åŸºäºè§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰å®ç°ã€‚å½“ä¸€ä¸ªè¢«è§‚å¯Ÿçš„å˜é‡ï¼ˆä½¿ç”¨<code>.obs</code>æ ‡è®°ï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä¾èµ–è¯¥å˜é‡çš„ UI ç»„ä»¶éƒ½ä¼šè‡ªåŠ¨é‡å»ºã€‚</p>
<p>å†…éƒ¨å®ç°ä¸Šï¼ŒGetX ä½¿ç”¨äº†ä¸€ä¸ªåä¸º <code>GetStream</code>çš„æµï¼ˆStreamï¼‰æ¥ç®¡ç†çŠ¶æ€å˜åŒ–ã€‚å½“å¯è§‚å¯Ÿå¯¹è±¡çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘æµä¸­çš„äº‹ä»¶ï¼Œä»è€Œé€šçŸ¥æ‰€æœ‰ç›‘å¬è€…ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç®€åŒ–çš„å†…éƒ¨å®ç°åŸç†</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RxImpl</span>&lt;<span class="hljs-title">T</span>&gt; </span>{
 <span class="hljs-keyword">final</span> _subject = GetStream&lt;T&gt;();
 
 T <span class="hljs-keyword">get</span> value =&gt; _subject.value;
 <span class="hljs-keyword">set</span> value(T val) {
   _subject.add(val);  <span class="hljs-comment">// è§¦å‘æµäº‹ä»¶</span>
 }
}
</code></pre>
<h3 data-id="heading-2">1.2 ä¾èµ–æ³¨å…¥ç³»ç»Ÿ</h3>
<p>GetX çš„ä¾èµ–æ³¨å…¥ç³»ç»ŸåŸºäºæœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService Locator Patternï¼‰ã€‚å®ƒç»´æŠ¤äº†ä¸€ä¸ªå…¨å±€çš„ä¾èµ–å®ä¾‹æ˜ å°„è¡¨ï¼Œé€šè¿‡ç±»å‹æˆ–æ ‡ç­¾æ¥æŸ¥æ‰¾å’Œæ³¨å†Œä¾èµ–é¡¹ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç®€åŒ–çš„å†…éƒ¨å®ç°åŸç†</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetInstance</span> </span>{
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> _singl = &lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;{};
  
  <span class="hljs-keyword">void</span> put&lt;S&gt;(S dependency, {<span class="hljs-built_in">String?</span> tag}) {
    _singl[_getKey(S, tag)] = dependency;
  }
  
  S find&lt;S&gt;({<span class="hljs-built_in">String?</span> tag}) {
    <span class="hljs-keyword">return</span> _singl[_getKey(S, tag)] <span class="hljs-keyword">as</span> S;
  }
  
  <span class="hljs-built_in">String</span> _getKey(<span class="hljs-built_in">Type</span> type, <span class="hljs-built_in">String?</span> tag) =&gt; tag == <span class="hljs-keyword">null</span> ? type.toString() : type.toString() + tag;
}
</code></pre>
<h3 data-id="heading-3">1.3 è·¯ç”±ç®¡ç†ç³»ç»Ÿ</h3>
<p>GetX çš„è·¯ç”±ç®¡ç†æ˜¯å¯¹ Flutter åŸç”Ÿå¯¼èˆª API çš„å°è£…ï¼Œå®ƒç»´æŠ¤äº†ä¸€ä¸ªå…¨å±€çš„è·¯ç”±å†å²æ ˆï¼Œå¹¶æä¾›äº†æ›´ç®€æ´çš„ API æ¥ç®¡ç†é¡µé¢å¯¼èˆªã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç®€åŒ–çš„å†…éƒ¨å®ç°åŸç†</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetNavigation</span> </span>{
  <span class="hljs-keyword">final</span> _history = &lt;GetPage&gt;[];
  
  Future&lt;T?&gt; to&lt;T&gt;(GetPage page) {
    _history.add(page);
    <span class="hljs-keyword">return</span> Navigator.push(...);  <span class="hljs-comment">// è°ƒç”¨FlutteråŸç”Ÿå¯¼èˆª</span>
  }
  
  <span class="hljs-keyword">void</span> back() {
    _history.removeLast();
    Navigator.pop(...);  <span class="hljs-comment">// è°ƒç”¨FlutteråŸç”Ÿå¯¼èˆª</span>
  }
}
</code></pre>
<h2 data-id="heading-4">2. GetX çš„å·¥ä½œåŸç†</h2>
<h3 data-id="heading-5">2.1 çŠ¶æ€ç®¡ç†åŸç†</h3>
<h4 data-id="heading-6">ç®€å•çŠ¶æ€ç®¡ç†</h4>
<p>ç®€å•çŠ¶æ€ç®¡ç†ä½¿ç”¨Â <code>GetBuilder</code>å’ŒÂ <code>update()</code>æ–¹æ³•ï¼š</p>
<ol>
<li>å½“è°ƒç”¨Â <code>update()</code>æ—¶ï¼ŒGetX ä¼šé€šçŸ¥æ‰€æœ‰ä½¿ç”¨<code>GetBuilder</code>æ„å»ºçš„ä¸è¯¥æ§åˆ¶å™¨å…³è”çš„ UI ç»„ä»¶è¿›è¡Œé‡å»º</li>
<li>å†…éƒ¨ä½¿ç”¨å”¯ä¸€ ID æ¥æ ‡è¯†æ¯ä¸ªæ§åˆ¶å™¨å®ä¾‹ï¼Œç¡®ä¿åªæœ‰ç›¸å…³çš„ UI ç»„ä»¶ä¼šé‡å»º</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç®€åŒ–çš„å†…éƒ¨å®ç°åŸç†</span>
<span class="hljs-keyword">void</span> update([<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt;? ids]) {
  <span class="hljs-keyword">if</span> (ids == <span class="hljs-keyword">null</span>) {
    <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ç›‘å¬è¯¥æ§åˆ¶å™¨çš„UIç»„ä»¶</span>
    _notifyAllListeners();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// åªé€šçŸ¥ç‰¹å®šIDçš„UIç»„ä»¶</span>
    _notifyListenersById(ids);
  }
}
</code></pre>
<h4 data-id="heading-7">å“åº”å¼çŠ¶æ€ç®¡ç†</h4>
<p>å“åº”å¼çŠ¶æ€ç®¡ç†ä½¿ç”¨Â <code>.obs</code> ä¸ <code>Obx()</code></p>
<ol>
<li>
<p>å½“<code>.obs</code>å˜é‡çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘å†…éƒ¨çš„Â <code>GetStream</code></p>
</li>
<li>
<p><code>Obx()</code>ç»„ä»¶ä¼šç›‘å¬è¿™äº›æµçš„å˜åŒ–ï¼Œå¹¶åœ¨å€¼å˜åŒ–æ—¶è‡ªåŠ¨é‡å»º UI</p>
</li>
<li>
<p>GetX ä½¿ç”¨äº†ä¸€ä¸ªæ™ºèƒ½çš„å·®å¼‚ç®—æ³•ï¼Œåªé‡å»ºä¾èµ–å˜åŒ–å€¼çš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ•´ä¸ªé¡µé¢</p>
</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant A as Obxå£°æ˜é˜¶æ®µ
    participant B as æ•°æ®è®¿é—®é˜¶æ®µ
    participant C as æ•°æ®æ›´æ–°é˜¶æ®µ
    participant D as UIé‡å»ºé˜¶æ®µ

    A-&gt;&gt;B: åˆ›å»º_ObxStateå’ŒRxNotifier
    B-&gt;&gt;C: é€šè¿‡ä»£ç†ç»‘å®šè§‚å¯Ÿè€…
    C-&gt;&gt;D: è§¦å‘setStateé‡å»º
    Note right of D: æœ€å°èŒƒå›´å±€éƒ¨åˆ·æ–°
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç®€åŒ–çš„å†…éƒ¨å®ç°åŸç†</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Obx</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  _ObxState createState() =&gt; _ObxState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_ObxState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">Obx</span>&gt; </span>{
  <span class="hljs-keyword">late</span> StreamSubscription _subscription;
  
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    <span class="hljs-comment">// è®¢é˜…å¯è§‚å¯Ÿå˜é‡çš„å˜åŒ–</span>
    _subscription = _getStream().listen((_) {
      <span class="hljs-keyword">if</span> (mounted) setState(() {});  <span class="hljs-comment">// è§¦å‘UIé‡å»º</span>
    });
  }
  
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-comment">// æ„å»ºUIæ—¶ä¼šè®¿é—®å¯è§‚å¯Ÿå˜é‡ï¼Œä»è€Œå»ºç«‹ä¾èµ–å…³ç³»</span>
    <span class="hljs-keyword">return</span> widget.builder();
  }
}
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant WidgetTree as Widgetæ ‘
    participant ObxWidget as ObxWidget
    participant _ObxState as _ObxState
    participant RxNotifier as RxNotifier
    participant RxObject as Rx
    participant GetStream as GetStream

    WidgetTree-&gt;&gt;ObxWidget: æ’å…¥Obxç»„ä»¶
    ObxWidget-&gt;&gt;_ObxState: createState()
    _ObxState-&gt;&gt;RxNotifier: åˆ›å»º_observerå®ä¾‹
    _ObxState-&gt;&gt;GetStream: è®¢é˜…ç›‘å¬(subs = _observer.listen)
    loop æ„å»ºé˜¶æ®µ
        _ObxState-&gt;&gt;RxInterface: proxy = _observer
        RxObject--&gt;&gt;GetStream: è®¿é—®.valueè§¦å‘addListener
        RxObject-&gt;&gt;RxNotifier: æ³¨å†Œç›‘å¬å…³ç³»
        RxInterface--&gt;&gt;_ObxState: æ¢å¤proxyåŸå§‹å€¼
    end
    Note over RxObject,RxNotifier: å»ºç«‹åŒå‘ç»‘å®šå…³ç³»

    par æ•°æ®æ›´æ–°æ—¶
        RxObject-&gt;&gt;GetStream: å¹¿æ’­å˜åŒ–äº‹ä»¶
        GetStream-&gt;&gt;RxNotifier: é€šçŸ¥_observer
        RxNotifier-&gt;&gt;_ObxState: è°ƒç”¨_updateTree
        _ObxState-&gt;&gt;WidgetTree: setStateå±€éƒ¨é‡å»º
    end
</code></pre>
<h3 data-id="heading-8">2.2 ä¾èµ–æ³¨å…¥åŸç†</h3>
<p>GetX çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿæ”¯æŒå¤šç§æ³¨å…¥æ–¹å¼ï¼š</p>
<ol>
<li>
<p><strong>å¸¸è§„æ³¨å…¥</strong>ï¼ˆ<code>Get.put</code>ï¼‰ï¼šç«‹å³åˆ›å»ºå®ä¾‹å¹¶æ³¨å†Œ</p>
</li>
<li>
<p><strong>æ‡’åŠ è½½æ³¨å…¥</strong>ï¼ˆ<code> Get.lazyPut</code>ï¼‰ï¼šåªåœ¨é¦–æ¬¡ä½¿ç”¨æ—¶åˆ›å»ºå®ä¾‹</p>
</li>
<li>
<p><strong>å¼‚æ­¥æ³¨å…¥</strong>ï¼ˆ<code>Get.putAsync</code>ï¼‰ï¼šå¼‚æ­¥åˆ›å»ºå®ä¾‹</p>
</li>
<li>
<p><strong>ä¸€æ¬¡æ€§æ³¨å…¥</strong>ï¼ˆ<code>Get.create</code>ï¼‰ï¼šæ¯æ¬¡è·å–éƒ½åˆ›å»ºæ–°å®ä¾‹</p>
</li>
</ol>
<p>å†…éƒ¨å®ç°ä¸Šï¼ŒGetX ä½¿ç”¨å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰æ¥ç®¡ç†ä¾èµ–çš„åˆ›å»ºæ–¹å¼ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç®€åŒ–çš„å†…éƒ¨å®ç°åŸç†</span>
<span class="hljs-keyword">void</span> lazyPut&lt;S&gt;(InstanceBuilderCallback&lt;S&gt; builder) {
  _factories[_getKey(S)] = builder;  <span class="hljs-comment">// å­˜å‚¨å·¥å‚å‡½æ•°</span>
}

S find&lt;S&gt;() {
  <span class="hljs-keyword">final</span> key = _getKey(S);
  <span class="hljs-keyword">if</span> (_singl.containsKey(key)) {
    <span class="hljs-keyword">return</span> _singl[key];  <span class="hljs-comment">// è¿”å›å·²å­˜åœ¨çš„å®ä¾‹</span>
  }
  
  <span class="hljs-keyword">if</span> (_factories.containsKey(key)) {
    <span class="hljs-keyword">final</span> instance = _factories[key]();  <span class="hljs-comment">// è°ƒç”¨å·¥å‚å‡½æ•°åˆ›å»ºå®ä¾‹</span>
    _singl[key] = instance;  <span class="hljs-comment">// ç¼“å­˜å®ä¾‹</span>
    <span class="hljs-keyword">return</span> instance;
  }
  
  <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">'æœªæ‰¾åˆ°ä¾èµ–é¡¹'</span>);
}
</code></pre>
<h3 data-id="heading-9">2.3 è·¯ç”±ç®¡ç†åŸç†</h3>
<p>GetX çš„è·¯ç”±ç®¡ç†ç³»ç»Ÿåœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªé¡µé¢å †æ ˆï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„å¯¼èˆªæ–¹æ³•ï¼š</p>
<ol>
<li>
<p><strong>åŸºæœ¬å¯¼èˆª</strong>ï¼š<code>Get.to()</code>  <code>Get.back()</code></p>
</li>
<li>
<p><strong>å‘½åè·¯ç”±</strong>ï¼š<code>Get.toNamed()</code>  <code>Get.offNamed()</code></p>
</li>
<li>
<p><strong>æ›¿æ¢å¯¼èˆª</strong>ï¼š<code>Get.off()</code>   <code>Get.offAll()</code></p>
</li>
</ol>
<p>æ¯ä¸ªè·¯ç”±æ“ä½œéƒ½ä¼šæ›´æ–°å†…éƒ¨çš„é¡µé¢å †æ ˆï¼Œå¹¶è°ƒç”¨ Flutter åŸç”Ÿçš„å¯¼èˆª APIï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç®€åŒ–çš„å†…éƒ¨å®ç°åŸç†</span>
Future&lt;T?&gt; toNamed&lt;T&gt;(<span class="hljs-built_in">String</span> routeName, {<span class="hljs-built_in">dynamic</span> arguments}) {
  <span class="hljs-keyword">final</span> route = _findRouteByName(routeName);
  <span class="hljs-keyword">if</span> (route != <span class="hljs-keyword">null</span>) {
    _currentRoute = route;
    <span class="hljs-keyword">return</span> Navigator.of(context).pushNamed(routeName, arguments: arguments);
  }
  <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">'æœªæ‰¾åˆ°è·¯ç”±'</span>);
}
</code></pre>
<h2 data-id="heading-10">3. GetX çš„ä¼˜åŒ–æœºåˆ¶</h2>
<h3 data-id="heading-11">3.1 å†…å­˜ç®¡ç†</h3>
<p>GetX æä¾›äº†æ™ºèƒ½çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼š</p>
<ol>
<li>
<p><strong>è‡ªåŠ¨é‡Šæ”¾</strong>ï¼šå½“æ§åˆ¶å™¨ä¸å†è¢«ä½¿ç”¨æ—¶ï¼Œé»˜è®¤ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾</p>
</li>
<li>
<p><strong>æ°¸ä¹…å®ä¾‹</strong>ï¼šä½¿ç”¨Â <code>permanent: true</code>Â å‚æ•°å¯ä»¥åˆ›å»ºæ°¸ä¹…å®ä¾‹</p>
</li>
<li>
<p><strong>æ™ºèƒ½å®ä¾‹</strong>ï¼šä½¿ç”¨ <code>fenix: true</code> å‚æ•°å¯ä»¥åœ¨éœ€è¦æ—¶é‡æ–°åˆ›å»ºå·²é‡Šæ”¾çš„å®ä¾‹</p>
</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// è‡ªåŠ¨é‡Šæ”¾æœºåˆ¶ç®€åŒ–å®ç°</span>
<span class="hljs-keyword">void</span> _autoRelease() {
  <span class="hljs-keyword">if</span> (!_isPermanent &amp;&amp; _getBuilderCount() == <span class="hljs-number">0</span>) {
    _singl.remove(_getKey(<span class="hljs-keyword">this</span>.runtimeType));
  }
}
</code></pre>
<h3 data-id="heading-12">3.2 æ€§èƒ½ä¼˜åŒ–</h3>
<p>GetX åœ¨æ€§èƒ½æ–¹é¢åšäº†å¤šé¡¹ä¼˜åŒ–ï¼š</p>
<ol>
<li>
<p><strong>å±€éƒ¨æ›´æ–°</strong>ï¼šåªé‡å»ºä¾èµ–å˜åŒ–æ•°æ®çš„ UI éƒ¨åˆ†</p>
</li>
<li>
<p><strong>æ‡’åŠ è½½</strong>ï¼šåªåœ¨éœ€è¦æ—¶åˆ›å»ºä¾èµ–å®ä¾‹</p>
</li>
<li>
<p><strong>æŒ‰éœ€æ„å»º</strong>ï¼šä½¿ç”¨Â <code>GetBuilder</code> id å‚æ•°å¯ä»¥æ›´ç²¾ç¡®åœ°æ§åˆ¶ UI æ›´æ–°èŒƒå›´</p>
</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å±€éƒ¨æ›´æ–°æœºåˆ¶ç®€åŒ–å®ç°</span>
<span class="hljs-keyword">void</span> update([<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">String</span>&gt;? ids]) {
  <span class="hljs-keyword">if</span> (ids == <span class="hljs-keyword">null</span>) {
    _notifyAllListeners();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// åªé€šçŸ¥ç‰¹å®šIDçš„ç›‘å¬å™¨</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> id <span class="hljs-keyword">in</span> ids) {
      _notifyListenersById(id);
    }
  }
}
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[main.dart å¯åŠ¨] --&gt; B[AppStoreInternal å•ä¾‹åˆå§‹åŒ–]
    B --&gt; C[AppStore æ„é€ å‡½æ•°æ‰§è¡Œ]
    C --&gt; D[_connectivity.onConnectivityChanged.listen]
    D --&gt; E[ç­‰å¾…ç½‘ç»œçŠ¶æ€å˜åŒ–]
    
    F[LottieJsonWidget initData] --&gt; G[å»¶è¿Ÿ1ç§’]
    G --&gt; H[åˆå§‹åŒ–ç¯å¢ƒé…ç½®]
    H --&gt; I[LoginUtils.setLoginRegion]
    I --&gt; J[LoginUtils.getIpCountryCode]
    J --&gt; K[LoginPluginApi.requestIpRegionIfNecessary]
    
    E --&gt; L[_updateConnectionStatus è¢«è°ƒç”¨]
    L --&gt; M[networkChange æ‰§è¡Œ]
    M --&gt; N{ç½‘ç»œçŠ¶æ€åˆ¤æ–­}
    
    N --&gt;|æœ‰ç½‘ç»œ| O[await initUserInfo]
    N --&gt;|æ— ç½‘ç»œ| P[è®¾ç½®ç¦»çº¿æ—¶é—´]
    
    O --&gt; Q[RESTApis.getUserInfo]
    Q --&gt; R[await getUserPrivilege]
    R --&gt; S[notifyListeners]
    
    K --&gt; T[å¼‚æ­¥è·å–IPåœ°åŒº]
    T --&gt; U[AppStoreInternal.store.setIpCountryCode]
    U --&gt; V[notifyListeners]
    
    S --&gt; W[UIæ›´æ–°]
    V --&gt; W
    
    X[App.onMounted] --&gt; Y[AppStoreInternal.store.setMainContext]
    Y --&gt; Z[æ£€æŸ¥ç½‘ç»œçŠ¶æ€]
    Z --&gt; AA[AppUpgradeUtils.checkUpgrade]
    
    BB[AppPages useMounted] --&gt; CC[init å‡½æ•°]
    CC --&gt; DD{ç½‘ç»œå’Œç™»å½•çŠ¶æ€æ£€æŸ¥}
    DD --&gt;|æœ‰ç½‘ç»œä¸”å·²ç™»å½•| EE[ApplicationController.queryUserConfig]
    DD --&gt;|æ— ç½‘ç»œæˆ–æœªç™»å½•| FF[è·³è¿‡é…ç½®åŠ è½½]
    
    EE --&gt; GG[PrintReportController.uploadIsarToService]
    
    style A fill:#e1f5fe
    style C fill:#fff3e0
    style L fill:#f3e5f5
    style O fill:#e8f5e8
    style T fill:#fff8e1
    style W fill:#fce4ec
</code></pre>
<h2 data-id="heading-13">å·¥ç¨‹ç¤ºä¾‹</h2>
<pre><code class="hljs language-text" lang="text">lib/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨ï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ modules/           # å„åŠŸèƒ½æ¨¡å—çš„UIé¡µé¢
â”‚   â”œâ”€â”€ routes/            # è·¯ç”±ç®¡ç†
â”‚   â”œâ”€â”€ translations/      # å›½é™…åŒ–ç¿»è¯‘
â”‚   â””â”€â”€ bindings/          # ä¾èµ–æ³¨å…¥ç»‘å®š
â””â”€â”€ main.dart              # åº”ç”¨å…¥å£
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flizy-coding%2Fgetx_demo" target="_blank" title="https://github.com/lizy-coding/getx_demo" ref="nofollow noopener noreferrer">github.com/lizy-codingâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ollmam+langchain.jså®ç°æœ¬åœ°å¤§æ¨¡å‹ç®€å•è®°å¿†å¯¹è¯-å†…å­˜ç‰ˆ]]></title>    <link>https://juejin.cn/post/7586597780640432138</link>    <guid>https://juejin.cn/post/7586597780640432138</guid>    <pubDate>2025-12-23T03:08:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586597780640432138" data-draft-id="7586505172815839283" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ollmam+langchain.jså®ç°æœ¬åœ°å¤§æ¨¡å‹ç®€å•è®°å¿†å¯¹è¯-å†…å­˜ç‰ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,LangChain,AIGC"/> <meta itemprop="datePublished" content="2025-12-23T03:08:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¨Šå°è‚†"/> <meta itemprop="url" content="https://juejin.cn/user/1257497033719320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ollmam+langchain.jså®ç°æœ¬åœ°å¤§æ¨¡å‹ç®€å•è®°å¿†å¯¹è¯-å†…å­˜ç‰ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497033719320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¨Šå°è‚†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:08:51.000Z" title="Tue Dec 23 2025 03:08:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½¿ç”¨Ollamaä¸LangChainæ­å»ºæœ¬åœ°å¤§æ¨¡å‹å¯¹è¯Demo</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨Ollamaä¸LangChainæ­å»ºä¸€ä¸ªæœ¬åœ°å¤§æ¨¡å‹å¯¹è¯Demoï¼Œè¯¥Demoæ”¯æŒå°†èŠå¤©è®°å½•å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚æ¶‰åŠçš„ä¾èµ–å·¥å…·å»ºè®®å‚è€ƒå®˜æ–¹æ–‡æ¡£è·å–å®‰è£…æ•™ç¨‹ï¼Œæ­¤å¤„ä¸é€ä¸€èµ˜è¿°ã€‚</p>
<p>éœ€æ³¨æ„ï¼Œå½“å‰Demoéœ€åœ¨Node.js 18+ç¯å¢ƒä¸‹è¿è¡Œï¼Œè‹¥ä½¿ç”¨ä½äºè¯¥ç‰ˆæœ¬çš„Nodeç¯å¢ƒï¼Œéœ€è‡ªè¡Œå¯»æ‰¾é€‚é…æ–¹æ¡ˆï¼Œä»¥å…è¿è¡Œå¤±è´¥ã€‚</p>
<h3 data-id="heading-2">ä¸ºä½•é€‰æ‹©Ollamaï¼Ÿ</h3>
<p>Ollamaå¯¹æœ¬åœ°éƒ¨ç½²åœºæ™¯æ”¯æŒå‹å¥½ï¼Œæ— éœ€ä¾èµ–äº‘æœåŠ¡å³å¯åœ¨æœ¬åœ°è¿è¡Œå¤§æ¨¡å‹ï¼Œä¸”å…¼å®¹å¤šç§å¼€æºæ¨¡å‹ï¼Œæ¥å£è®¾è®¡ç®€æ´æ˜“ç”¨ã€‚å¯¹äºå¼€å‘è€…å’Œä¼ä¸šè€Œè¨€ï¼Œæœ¬åœ°éƒ¨ç½²åœ¨çµæ´»æ€§å’Œæˆæœ¬æ§åˆ¶ä¸Šå‡ä¼˜äºé¢‘ç¹è°ƒç”¨äº‘æ¥å£ã€‚</p>
<h3 data-id="heading-3">ä¸ºä½•é€‰æ‹©LangChainï¼Ÿ</h3>
<p>LangChainå ªç§°å¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„â€œé›†æˆæ¡†æ¶â€ï¼Œèƒ½å¤Ÿå°†å¤§æ¨¡å‹ä¸å„ç±»æ•°æ®ã€å·¥å…·è¿›è¡Œæ•´åˆï¼Œä½¿æ¨¡å‹ä¸ä»…æ”¯æŒåŸºç¡€å¯¹è¯ï¼Œè¿˜èƒ½ä¸å¤–éƒ¨ç¯å¢ƒäº¤äº’ã€‚å…¶å¯¹Node.jsçš„åŸç”Ÿæ”¯æŒå¯¹å‰ç«¯å¼€å‘è€…å°¤ä¸ºå‹å¥½ï¼Œå¯ç›´æ¥ä½¿ç”¨JavaScriptå¼€å‘å¤§æ¨¡å‹åº”ç”¨ï¼Œé™ä½æŠ€æœ¯æ ˆåˆ‡æ¢æˆæœ¬ã€‚</p>
<h3 data-id="heading-4">Ollama å¿«é€Ÿä¸Šæ‰‹</h3>
<p>ä¸‹è½½Ollamaåï¼Œå¯å‰å¾€å®˜ç½‘Modelsé¡µé¢é€‰æ‹©åˆé€‚çš„æ¨¡å‹éƒ¨ç½²ï¼šéœ€ä¸€ä¸ªè¯­è¨€æ¨¡å‹ï¼ˆå¦‚æœ¬æ–‡ä½¿ç”¨çš„deepseek-r1:1.5bï¼‰å’Œä¸€ä¸ªæ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼ˆå¦‚mxbai-embed-largeï¼Œç”¨äºè¯­ä¹‰æœç´¢ï¼Œæ£€ç´¢æ•ˆæœä¼˜äºå•çº¯ä¾èµ–è¯­è¨€æ¨¡å‹ï¼‰ã€‚</p>
<p>æœ¬åœ°æµ‹è¯•å»ºè®®é€‰æ‹©è½»é‡ç‰ˆæœ¬ä»¥èŠ‚çœå†…å­˜ï¼Œç”Ÿäº§ç¯å¢ƒåˆ™æ¨èå®Œæ•´ç‰ˆæ¨¡å‹ä»¥ä¿è¯æ€§èƒ½ã€‚</p>
<h3 data-id="heading-5">ä»£ç å®ç°ï¼šé›†æˆOllamaåˆ°åº”ç”¨ä¸­</h3>
<p>é¦–å…ˆå¼•å…¥<code>@langchain/ollama</code>ï¼Œé€šè¿‡<code>ChatOllama</code>å®ä¾‹åŒ–è¯­è¨€æ¨¡å‹ã€‚æœ¬æ–‡ä½¿ç”¨deepseek-r1:1.5bï¼Œè¿æ¥æœ¬åœ°OllamaæœåŠ¡ï¼ˆé»˜è®¤åœ°å€ä¸º<a href="https://link.juejin.cn?target=http%3A%2F%2F127.0.0.1%3A11434" target="_blank" title="http://127.0.0.1:11434" ref="nofollow noopener noreferrer">http://127.0.0.1:11434</a>ï¼Œè‹¥ç«¯å£å·²ä¿®æ”¹éœ€åŒæ­¥è°ƒæ•´ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOllama</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/ollama"</span>;
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOllama</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-r1:1.5b'</span>,
  <span class="hljs-attr">baseUrl</span>: <span class="hljs-string">"http://127.0.0.1:11434"</span>,
  <span class="hljs-attr">topP</span>: <span class="hljs-number">1.0</span>,
  <span class="hljs-attr">topK</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">streaming</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨æµå¼è¾“å‡ºï¼Œç”¨äºå®ç°å®æ—¶å“åº”</span>
})
</code></pre>
<h3 data-id="heading-6">å®šä¹‰å¯¹è¯è§’è‰²ä¸æç¤ºè¯æ¨¡æ¿</h3>
<p>å¯¹è¯ä¸­éœ€æ˜ç¡®è§’è‰²åˆ†å·¥ï¼Œé€šå¸¸åŒ…æ‹¬ç³»ç»Ÿï¼ˆsystemï¼‰ã€ç”¨æˆ·ï¼ˆhumanï¼‰ã€åŠ©æ‰‹ï¼ˆAIï¼‰ä¸‰ç±»è§’è‰²ï¼Œå¯é€šè¿‡<code>@langchain/core/messages</code>ä¸­çš„<code>HumanMessage</code>ã€<code>AIMessage</code>ã€<code>SystemMessage</code>å®ç°ã€‚</p>
<p>ä½¿ç”¨<code>ChatPromptTemplate.fromMessages</code>å®šä¹‰æç¤ºè¯æ¨¡æ¿ï¼Œä¾¿äºå¤„ç†å¤šè½®å¯¹è¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatPromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/prompts"</span>;
<span class="hljs-keyword">const</span> textPrompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªå…·å¤‡è®°å¿†åŠŸèƒ½çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œéœ€ç»“åˆå†å²å¯¹è¯å†…å®¹å›ç­”ç”¨æˆ·é—®é¢˜ã€‚"</span>],
  [<span class="hljs-string">"placeholder"</span>, <span class="hljs-string">"{chat_history}"</span>], <span class="hljs-comment">// ç”¨äºæ³¨å…¥å†å²å¯¹è¯è®°å½•</span>
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{user_input}"</span>] <span class="hljs-comment">// ç”¨äºæ³¨å…¥ç”¨æˆ·å½“å‰è¾“å…¥</span>
]);
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><code>system</code>è§’è‰²ç”¨äºå®šä¹‰åŠ©æ‰‹è¡Œä¸ºè§„åˆ™ï¼ˆå¦‚â€œä¿æŒä¸“ä¸šè¯­æ°”â€ï¼‰ï¼›</li>
<li><code>human</code>è§’è‰²å¯¹åº”ç”¨æˆ·è¾“å…¥å†…å®¹ï¼›</li>
<li><code>placeholder</code>ç”¨äºåŠ¨æ€æ’å…¥å†å²å¯¹è¯è®°å½•ï¼Œç¡®ä¿æ¨¡å‹èƒ½å…³è”ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
<h3 data-id="heading-7">æ•æ„Ÿè¯è¿‡æ»¤æœºåˆ¶</h3>
<p>ä¸ºè§„èŒƒå¯¹è¯å†…å®¹ï¼Œéœ€æ·»åŠ æ•æ„Ÿè¯æ£€æŸ¥æ­¥éª¤ã€‚é€šè¿‡<code>RunnableLambda</code>å°è£…è‡ªå®šä¹‰æ£€æŸ¥å‡½æ•°ï¼Œåœ¨å¯¹è¯æµç¨‹ä¸­æ‹¦æˆªå«æ•æ„Ÿè¯çš„è¾“å…¥ï¼ˆå¦‚â€œå‚»ç“œâ€â€œç™½ç—´â€ç­‰ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableLambda</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">profanityChecker</span> = (<span class="hljs-params">input: { user_input: <span class="hljs-built_in">string</span> }</span>) =&gt; {
  <span class="hljs-keyword">const</span> sensitiveWords = [<span class="hljs-string">"å‚»ç“œ"</span>, <span class="hljs-string">"ç™½ç—´"</span>, <span class="hljs-string">"ä¸è‰¯å†…å®¹"</span>];
  <span class="hljs-keyword">if</span> (sensitiveWords.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">word</span> =&gt;</span> input.<span class="hljs-property">user_input</span>.<span class="hljs-title function_">includes</span>(word))) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æ£€æµ‹åˆ°æ•æ„Ÿå†…å®¹ï¼Œè¯·ä½¿ç”¨æ–‡æ˜ç”¨è¯­ã€‚"</span>);
  }
  <span class="hljs-keyword">return</span> input; <span class="hljs-comment">// æ£€æŸ¥é€šè¿‡åˆ™ç»§ç»­æ‰§è¡Œåç»­æµç¨‹</span>
};
<span class="hljs-keyword">const</span> customCheckStep = <span class="hljs-title class_">RunnableLambda</span>.<span class="hljs-title function_">from</span>(profanityChecker);
</code></pre>
<h3 data-id="heading-8">å®ç°å¯¹è¯å†å²æ£€ç´¢ï¼ˆRAGæ ¸å¿ƒé€»è¾‘ï¼‰</h3>
<p>ä»…å­˜å‚¨å†å²è®°å½•ä¸è¶³ä»¥æ”¯æ’‘æ¨¡å‹å…³è”ä¸Šä¸‹æ–‡ï¼Œéœ€é€šè¿‡RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰é€»è¾‘æ£€ç´¢ä¸å½“å‰è¾“å…¥ç›¸å…³çš„å†å²å¯¹è¯ã€‚å°†æ£€ç´¢é€»è¾‘å°è£…ä¸º<code>Runnable</code>ï¼Œé›†æˆåˆ°LangChainçš„è°ƒç”¨é“¾ä¸­ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">retrieveStep</span> = RunnableLambda.<span class="hljs-keyword">from</span>(<span class="hljs-title function_ invoke__">async</span> (<span class="hljs-attr">input</span>: { <span class="hljs-attr">user_input</span>: <span class="hljs-keyword">string</span>; <span class="hljs-attr">sessionId</span>: <span class="hljs-keyword">string</span> }) =&gt; {
  <span class="hljs-keyword">return</span> await <span class="hljs-title function_ invoke__">retrieveRelevantHistory</span>(input.user_input, input.sessionId);
});
</code></pre>
<p>ä¸Šè¿°<code>retrieveRelevantHistory</code>å‡½æ•°ä¼šæ ¹æ®ç”¨æˆ·è¾“å…¥ä»å†…å­˜ä¸­æ£€ç´¢è¯­ä¹‰ç›¸å…³çš„å†å²å¯¹è¯ï¼Œä¾›æ¨¡å‹ç”Ÿæˆå›å¤æ—¶å‚è€ƒã€‚</p>
<h3 data-id="heading-9">æ„å»ºé“¾å¼è°ƒç”¨æµç¨‹</h3>
<p>ä½¿ç”¨<code>RunnableSequence</code>å°†æ•æ„Ÿè¯æ£€æŸ¥ã€å†å²æ£€ç´¢ã€æç¤ºè¯æ¨¡æ¿æ³¨å…¥ã€æ¨¡å‹è°ƒç”¨ç­‰æ­¥éª¤ä¸²è”ï¼Œå½¢æˆå®Œæ•´çš„å¤„ç†é“¾è·¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableSequence</span>, <span class="hljs-title class_">RunnablePassthrough</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;
<span class="hljs-keyword">const</span> ragChain = <span class="hljs-title class_">RunnableSequence</span>.<span class="hljs-title function_">from</span>([
  customCheckStep, <span class="hljs-comment">// å…ˆæ‰§è¡Œæ•æ„Ÿè¯æ£€æŸ¥</span>
  <span class="hljs-title class_">RunnablePassthrough</span>.<span class="hljs-title function_">assign</span>({ <span class="hljs-comment">// æ³¨å…¥ä¼šè¯IDå’Œæ£€ç´¢ç»“æœ</span>
    <span class="hljs-attr">sessionId</span>: <span class="hljs-function">(<span class="hljs-params">_, config</span>) =&gt;</span> config.<span class="hljs-property">configurable</span>.<span class="hljs-property">sessionId</span>,
    <span class="hljs-attr">relevant_history</span>: retrieveStep,
  }),
  textPrompt, <span class="hljs-comment">// åº”ç”¨æç¤ºè¯æ¨¡æ¿</span>
  llm <span class="hljs-comment">// è°ƒç”¨è¯­è¨€æ¨¡å‹ç”Ÿæˆå›å¤</span>
]);
</code></pre>
<h3 data-id="heading-10">ä¼šè¯ç®¡ç†ï¼šéš”ç¦»ä¸åŒå¯¹è¯è®°å½•</h3>
<p>ä¸ºé¿å…ä¸åŒç”¨æˆ·çš„å¯¹è¯è®°å½•æ··æ·†ï¼Œä½¿ç”¨<code>RunnableWithMessageHistory</code>å®ç°ä¼šè¯éš”ç¦»ï¼Œæ¯ä¸ª<code>sessionId</code>å¯¹åº”ç‹¬ç«‹çš„å†å²è®°å½•ã€‚é€šè¿‡<code>getSessionStore</code>è·å–ä¼šè¯ä¸“å±å­˜å‚¨å®ä¾‹ï¼Œç¡®ä¿å†å²è®°å½•ä¸ä¸²ç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableWithMessageHistory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;
<span class="hljs-keyword">const</span> textChainWithHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RunnableWithMessageHistory</span>({
  <span class="hljs-attr">runnable</span>: ragChain,
  <span class="hljs-attr">getMessageHistory</span>: <span class="hljs-keyword">async</span> (<span class="hljs-attr">sessionId</span>: <span class="hljs-built_in">string</span>) =&gt; {
    <span class="hljs-keyword">const</span> sessionStore = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSessionStore</span>(sessionId);
    <span class="hljs-keyword">return</span> sessionStore.<span class="hljs-property">chatHistory</span>; <span class="hljs-comment">// å¤ç”¨ä¼šè¯ä¸“å±çš„å†å²è®°å½•å®ä¾‹</span>
  },
  <span class="hljs-attr">inputMessagesKey</span>: <span class="hljs-string">"user_input"</span>,
  <span class="hljs-attr">historyMessagesKey</span>: <span class="hljs-string">"chat_history"</span>,
});
</code></pre>
<h3 data-id="heading-11">getMessageHistoryä¸retrieveRelevantHistoryåä½œæµç¨‹è¯´æ˜</h3>
<p>å‰æ–‡æåŠçš„<code>getMessageHistory</code>ï¼ˆç”¨äºRunnableWithMessageHistoryï¼‰ä¸<code>retrieveRelevantHistory</code>ï¼ˆç”¨äºRunnableLambdaï¼‰å¹¶éé‡å¤è®¾è®¡ï¼Œè€Œæ˜¯é€šè¿‡â€œä¼šè¯éš”ç¦»-å®Œæ•´å†å²è·å–-ç›¸å…³å†å²ç­›é€‰â€çš„é€’è¿›é€»è¾‘åä½œï¼Œç¡®ä¿å¯¹è¯è®°å¿†åŠŸèƒ½çš„å‡†ç¡®æ€§ä¸é«˜æ•ˆæ€§ã€‚ä¸¤è€…çš„æ ¸å¿ƒåä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€æ­¥ï¼šä¼šè¯éš”ç¦»ä¸å®Œæ•´å†å²è·å–</strong>ï¼šå½“ç”¨æˆ·å‘èµ·æ–°è¯·æ±‚æ—¶ï¼Œ<code>RunnableWithMessageHistory</code>é€šè¿‡<code>getMessageHistory</code>å‡½æ•°ï¼Œæ ¹æ®å½“å‰<code>sessionId</code>ä»<code>getSessionStore</code>ä¸­è·å–è¯¥ä¼šè¯ä¸“å±çš„<code>chatHistory</code>å®ä¾‹ï¼Œå®ç°ä¸åŒç”¨æˆ·å¯¹è¯è®°å½•çš„éš”ç¦»ï¼ŒåŒæ—¶æ‹¿åˆ°è¯¥ä¼šè¯çš„å…¨éƒ¨å†å²å¯¹è¯æ•°æ®ã€‚</li>
<li><strong>ç¬¬äºŒæ­¥ï¼šæ³¨å…¥å®Œæ•´å†å²åˆ°ä¸Šä¸‹æ–‡</strong>ï¼š<code>getMessageHistory</code>è·å–çš„å®Œæ•´å†å²è®°å½•ï¼Œä¼šè‡ªåŠ¨æ³¨å…¥åˆ°æç¤ºè¯æ¨¡æ¿çš„<code>{chat_history}</code>å ä½ç¬¦ä¸­ï¼Œä¸ºæ¨¡å‹æä¾›â€œå…¨é‡ä¸Šä¸‹æ–‡èƒŒæ™¯â€ã€‚</li>
<li><strong>ç¬¬ä¸‰æ­¥ï¼šè¯­ä¹‰æ£€ç´¢ç­›é€‰ç›¸å…³å†å²</strong>ï¼šåœ¨é“¾å¼è°ƒç”¨æµç¨‹ä¸­ï¼Œ<code>retrieveStep</code>é€šè¿‡<code>retrieveRelevantHistory</code>å‡½æ•°ï¼ŒåŸºäºå½“å‰ç”¨æˆ·è¾“å…¥çš„è¯­ä¹‰ï¼Œä»ä¼šè¯ä¸“å±çš„å‘é‡åº“ä¸­æ£€ç´¢å‡ºæœ€ç›¸å…³çš„å†å²å¯¹è¯ç‰‡æ®µï¼ˆè€Œéå…¨é‡å†å²ï¼‰ï¼Œå¹¶å°†æ£€ç´¢ç»“æœä½œä¸º<code>relevant_history</code>æ³¨å…¥åˆ°è°ƒç”¨é“¾ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>ç¬¬å››æ­¥ï¼šæ¨¡å‹ç»“åˆåŒç»´åº¦å†å²ç”Ÿæˆå›å¤</strong>ï¼šæ¨¡å‹æœ€ç»ˆä¼šåŒæ—¶å‚è€ƒâ€œå…¨é‡å†å²ä¸Šä¸‹æ–‡â€ï¼ˆç¡®ä¿å¯¹è¯è¿è´¯æ€§ï¼‰å’Œâ€œè¯­ä¹‰ç›¸å…³å†å²ç‰‡æ®µâ€ï¼ˆèšç„¦æ ¸å¿ƒä¿¡æ¯ï¼Œé¿å…ä¸Šä¸‹æ–‡çª—å£è¿‡è½½ï¼‰ï¼Œç”Ÿæˆç²¾å‡†ä¸”è´´åˆä¸Šä¸‹æ–‡çš„å›å¤ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼Œ<code>getMessageHistory</code>è´Ÿè´£â€œç²¾å‡†æ‰¾åˆ°å½“å‰ç”¨æˆ·çš„æ‰€æœ‰å†å²â€ï¼Œè§£å†³â€œå†å²å½’å±â€é—®é¢˜ï¼›<code>retrieveRelevantHistory</code>è´Ÿè´£â€œä»æ‰€æœ‰å†å²ä¸­æŒ‘å‡ºæœ‰ç”¨çš„éƒ¨åˆ†â€ï¼Œè§£å†³â€œé•¿å¯¹è¯æ•ˆç‡ä¸ç²¾å‡†æ€§â€é—®é¢˜ï¼Œä¸¤è€…ååŒå®ç°äº†â€œå®‰å…¨éš”ç¦»+é«˜æ•ˆæ£€ç´¢â€çš„è®°å¿†åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-12">æ–‡æœ¬åµŒå…¥å¤„ç†ï¼šå‘é‡è½¬æ¢ä¸å­˜å‚¨</h3>
<p>ä¸ºå®ç°å†å²å¯¹è¯çš„è¯­ä¹‰æ£€ç´¢ï¼Œéœ€å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºï¼ˆåµŒå…¥ï¼‰ã€‚ä½¿ç”¨<code>OllamaEmbeddings</code>åŠ è½½mxbai-embed-largeæ¨¡å‹å®Œæˆè¿™ä¸€è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OllamaEmbeddings</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/ollama"</span>;
<span class="hljs-keyword">const</span> embeddingModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OllamaEmbeddings</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-string">'mxbai-embed-large'</span>,
  <span class="hljs-attr">baseUrl</span>: <span class="hljs-string">"http://127.0.0.1:11434"</span>,
  <span class="hljs-attr">truncate</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è‡ªåŠ¨æˆªæ–­è¶…é•¿æ–‡æœ¬</span>
})
</code></pre>
<h3 data-id="heading-13">ä¼šè¯å­˜å‚¨ç»“æ„è®¾è®¡</h3>
<p><code>getSessionStore</code>å‡½æ•°ä¸ºæ¯ä¸ªä¼šè¯åˆå§‹åŒ–ä¸“å±å­˜å‚¨ï¼ŒåŒ…å«ä¸‰ç±»æ ¸å¿ƒç»„ä»¶ï¼š</p>
<ul>
<li>èŠå¤©è®°å½•ï¼ˆ<code>chatHistory</code>ï¼‰ï¼šå­˜å‚¨åŸå§‹å¯¹è¯æ¶ˆæ¯ï¼›</li>
<li>å‘é‡åº“ï¼ˆ<code>vectorStore</code>ï¼‰ï¼šå­˜å‚¨æ–‡æœ¬åµŒå…¥å‘é‡ï¼›</li>
<li>æ£€ç´¢å™¨ï¼ˆ<code>retriever</code>ï¼‰ï¼šç”¨äºè¯­ä¹‰æ£€ç´¢çš„å·¥å…·ã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">export const <span class="hljs-attr">getSessionStore</span> = async (sessionId: string) =&gt; {
  if (!sessionStores<span class="hljs-section">[sessionId]</span>) {
    const <span class="hljs-attr">chatHistory</span> = new InMemoryChatMessageHistory()<span class="hljs-comment">;</span>
    const <span class="hljs-attr">vectorStore</span> = new MemoryVectorStore(embeddingModel)<span class="hljs-comment">; // å†…å­˜å‘é‡åº“ï¼Œé€‚ç”¨äºDemoåœºæ™¯</span>
    // æ£€ç´¢å™¨é…ç½®ï¼šé‡‡ç”¨mmræ¨¡å¼ï¼ˆæœ€å¤§è¾¹é™…ç›¸å…³æ€§ï¼‰ï¼Œæ¯æ¬¡è¿”å›10æ¡æœ€ç›¸å…³ç»“æœ
    const <span class="hljs-attr">retriever</span> = vectorStore.asRetriever({ searchType: <span class="hljs-string">"mmr"</span>, k: <span class="hljs-number">10</span> })<span class="hljs-comment">;</span>
    sessionStores<span class="hljs-section">[sessionId]</span> = { chatHistory, vectorStore, retriever }<span class="hljs-comment">;</span>
  }
  return sessionStores<span class="hljs-section">[sessionId]</span><span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p>æ³¨æ„ï¼š<code>searchType: "mmr"</code>å¯åœ¨ä¿è¯ç›¸å…³æ€§çš„åŒæ—¶é¿å…ç»“æœé‡å¤ï¼›<code>k:10</code>è¡¨ç¤ºå•æ¬¡æ£€ç´¢æœ€å¤šè¿”å›10æ¡å†å²è®°å½•ã€‚</p>
<h3 data-id="heading-14">å­˜å‚¨èŠå¤©è®°å½•åˆ°å‘é‡åº“</h3>
<p>æ¯è½®å¯¹è¯ç»“æŸåï¼Œéœ€å°†â€œç”¨æˆ·è¾“å…¥+åŠ©æ‰‹å›å¤â€å­˜å…¥å‘é‡åº“ï¼Œæ ¼å¼ä¸ºâ€œç”¨æˆ·ï¼šxxx\nåŠ©æ‰‹ï¼šxxxâ€ï¼Œä¾¿äºæ¨¡å‹ç†è§£ä¸Šä¸‹æ–‡ã€‚é¦–æ¬¡è¾“å…¥æ— åŠ©æ‰‹å›å¤æ—¶ï¼Œä»…å­˜å‚¨ç”¨æˆ·å†…å®¹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">addMessageToVectorStore</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">
  sessionId: <span class="hljs-built_in">string</span>,
  humanInput: <span class="hljs-built_in">string</span>,
  aiResponse?: <span class="hljs-built_in">string</span>
</span>) =&gt; {
  <span class="hljs-keyword">const</span> { vectorStore } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSessionStore</span>(sessionId);
  <span class="hljs-keyword">const</span> messageText = aiResponse 
    ? <span class="hljs-string">`ç”¨æˆ·ï¼š<span class="hljs-subst">${humanInput}</span>\nåŠ©æ‰‹ï¼š<span class="hljs-subst">${aiResponse}</span>`</span> 
    : <span class="hljs-string">`ç”¨æˆ·ï¼š<span class="hljs-subst">${humanInput}</span>`</span>;
  <span class="hljs-keyword">await</span> vectorStore.<span class="hljs-title function_">addDocuments</span>([{
    <span class="hljs-attr">pageContent</span>: messageText,
    <span class="hljs-attr">metadata</span>: { sessionId, <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() } <span class="hljs-comment">// é™„åŠ ä¼šè¯IDå’Œæ—¶é—´æˆ³ï¼Œä¾¿äºè¿½æº¯</span>
  }]);
};
</code></pre>
<h3 data-id="heading-15">å®æ—¶äº¤äº’ä½“éªŒï¼šæµå¼å“åº”ä¸SSE</h3>
<p>ä¸ºæå‡ç”¨æˆ·ä½“éªŒï¼Œé€šè¿‡æ¨¡å‹çš„æµå¼è¾“å‡ºï¼ˆ<code>stream</code>æ–¹æ³•ï¼‰å®ç°â€œè¾¹ç”Ÿæˆè¾¹è¿”å›â€çš„æ‰“å­—æœºæ•ˆæœï¼Œå¹¶ä½¿ç”¨SSEï¼ˆæœåŠ¡å™¨å‘é€äº‹ä»¶ï¼‰å°†ç»“æœå®æ—¶æ¨é€ç»™å‰ç«¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡å™¨ç«¯æµå¼å¤„ç†é€»è¾‘</span>
<span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> textChainWithHistory.<span class="hljs-title function_">stream</span>(
  { user_input },
  { <span class="hljs-attr">configurable</span>: { sessionId } }
);
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) { <span class="hljs-comment">// é€æ®µè·å–æ¨¡å‹ç”Ÿæˆçš„å†…å®¹</span>
  <span class="hljs-keyword">const</span> content = chunk.<span class="hljs-property">content</span> || <span class="hljs-string">""</span>;
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({ content })}</span>\n\n`</span>); <span class="hljs-comment">// æŒ‰SSEæ ¼å¼æ¨é€</span>
}
</code></pre>
<h3 data-id="heading-16">å¤„ç†è·¨åŸŸè¯·æ±‚</h3>
<p>ä¸ºé¿å…å‰ç«¯è°ƒç”¨æ¥å£æ—¶å‡ºç°è·¨åŸŸé”™è¯¯ï¼Œéœ€åœ¨æœåŠ¡å™¨ç«¯é…ç½®CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰ç­–ç•¥ï¼Œå¤„ç†é¢„æ£€è¯·æ±‚ï¼ˆOPTIONSæ–¹æ³•ï¼‰ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang"><span class="hljs-function"><span class="hljs-title">if</span> <span class="hljs-params">(req.method === <span class="hljs-string">"OPTIONS"</span>)</span> {
  <span class="hljs-title">res</span>.<span class="hljs-title">setHeader</span><span class="hljs-params">(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>)</span>;
  <span class="hljs-title">res</span>.<span class="hljs-title">setHeader</span><span class="hljs-params">(<span class="hljs-string">"Access-Control-Allow-Methods"</span>, <span class="hljs-string">"GET, POST, OPTIONS"</span>)</span>;
  <span class="hljs-title">res</span>.<span class="hljs-title">setHeader</span><span class="hljs-params">(<span class="hljs-string">"Access-Control-Allow-Headers"</span>, <span class="hljs-string">"Content-Type"</span>)</span>;
  <span class="hljs-title">res</span>.<span class="hljs-title">writeHead</span><span class="hljs-params">(<span class="hljs-number">204</span>)</span>;
  <span class="hljs-title">res</span>.<span class="hljs-title">end</span><span class="hljs-params">()</span>;
  <span class="hljs-title">return</span>;
}
</span></code></pre>
<h3 data-id="heading-17">ç»“è¯­</h3>
<p>è‡³æ­¤ï¼Œä¸€ä¸ªå…·å¤‡è®°å¿†åŠŸèƒ½ã€æ”¯æŒå†å²å¯¹è¯æ£€ç´¢åŠå®æ—¶äº¤äº’çš„æœ¬åœ°å¤§æ¨¡å‹Demoå·²æ­å»ºå®Œæˆã€‚è¯¥æ–¹æ¡ˆåŸºäºOllamaè¿è¡Œæœ¬åœ°æ¨¡å‹ï¼Œé€šè¿‡LangChainæ•´åˆé€»è¾‘ï¼Œåˆ©ç”¨å†…å­˜å­˜å‚¨å¯¹è¯æ•°æ®ï¼Œå…¼é¡¾åŠŸèƒ½æ€§ä¸è½»é‡æ€§ã€‚å»ºè®®å®é™…è¿è¡Œä½“éªŒï¼Œè¿›ä¸€æ­¥æ¢ç´¢å…¶æ‰©å±•æ½œåŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis ä¸¤ä¸ªéšè”½æ·±å‘å®å½•ï¼šArrays.asList() ä¸æ•°å­— 0 çš„â€œç¦»å¥‡å¤±è¸ªâ€]]></title>    <link>https://juejin.cn/post/7586588823905730569</link>    <guid>https://juejin.cn/post/7586588823905730569</guid>    <pubDate>2025-12-23T02:47:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586588823905730569" data-draft-id="7586540799250726966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis ä¸¤ä¸ªéšè”½æ·±å‘å®å½•ï¼šArrays.asList() ä¸æ•°å­— 0 çš„â€œç¦»å¥‡å¤±è¸ªâ€"/> <meta itemprop="keywords" content="MyBatis,Java,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-23T02:47:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ—…äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3485898277388519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis ä¸¤ä¸ªéšè”½æ·±å‘å®å½•ï¼šArrays.asList() ä¸æ•°å­— 0 çš„â€œç¦»å¥‡å¤±è¸ªâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3485898277388519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ—…äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T02:47:33.000Z" title="Tue Dec 23 2025 02:47:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ—©ä¸Šåˆšåˆ°å…¬å¸ï¼Œæ‰“å¼€ç”µè„‘ï¼Œå†™ç€éœ€æ±‚å¬ç€æ­Œã€‚çªç„¶é’‰é’‰ä¸€å“ï¼Œæµ‹è¯•å‘æ¥æ¶ˆæ¯ï¼š"ä½ é‚£ä¸ªæ¥å£æŠ¥é”™äº†"ã€‚æ‰“å¼€æ—¥å¿—ä¸€çœ‹ï¼ŒMyBatisåˆç‚¸äº†ã€‚</p>
</blockquote>
<p>è¯´å®è¯ï¼ŒMyBatisè¿™ç©æ„å„¿å¹³æ—¶æŒºå¥½ç”¨çš„ï¼Œä½†æœ‰æ—¶å€™æŠ¥çš„é”™çœŸè®©äººæ‘¸ä¸ç€å¤´è„‘ã€‚å°¤å…¶æ˜¯é‚£ç§<strong>æœ¬åœ°è·‘å¾—å¥½å¥½çš„ï¼Œä¸€ä¸Šçº¿å°±ç‚¸çš„Bug</strong>ï¼Œç®€ç›´è®©äººæ€€ç–‘äººç”Ÿã€‚ä»Šå¤©å°±è®°å½•ä¸¤ä¸ªè®©æˆ‘debugåˆ°æ·±å¤œçš„å‘ï¼Œå®ƒä»¬éƒ½æœ‰ä¸ªå…±åŒç‰¹ç‚¹ï¼š<strong>ä»£ç çœ‹èµ·æ¥å®Œå…¨æ²¡é—®é¢˜ï¼Œä½†è¿è¡Œæ—¶å°±æ˜¯è«åå…¶å¦™åœ°æŠ¥é”™</strong>ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿè¢«MyBatisæŠ˜ç£¨è¿‡ï¼Œè¿™ç¯‡æ–‡ç« å¯èƒ½ä¼šè®©ä½ ä¼šå¿ƒä¸€ç¬‘ï¼šåŸæ¥ä¸æ˜¯æˆ‘ä¸€ä¸ªäººè¸©è¿‡è¿™äº›å‘ğŸ˜‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad176944fd4d4a52b8bd1dce48cdd750~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5peF5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767062852&amp;x-signature=5jgXpST%2F6%2FD5nyl7EOm0mCVc%2F7o%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">å‘ä½ä¸€ï¼šArrays.asList() é‡ä¸Šè€ç‰ˆæœ¬MyBatisï¼ˆ3.2.xç‰ˆæœ¬ï¼‰</h2>
<h3 data-id="heading-1">äº‹æ•…ç°åœº</h3>
<p>å‘¨äº”ä¸‹åˆå››ç‚¹åŠï¼ˆæ˜¯çš„ï¼ŒBugæ€»æ˜¯åœ¨å¿«ä¸‹ç­æ—¶å‡ºç°ï¼‰ï¼Œæµ‹è¯•ç¯å¢ƒçªç„¶æŠ¥äº†ä¸ªä»¤äººå¤´å¤§çš„å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-java" lang="java">   <span class="hljs-string">"org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.builder.BuilderException: Error evaluating expression 'userCode.size() &gt; 0'. Cause: org.apache.ibatis.ognl.MethodFailedException: Method "</span>size<span class="hljs-string">" failed for object [aaa, bbb] [java.lang.IllegalAccessException: Class org.apache.ibatis.ognl.OgnlRuntime can not access a member of class java.util.Collections$UnmodifiableCollection with modifiers "</span><span class="hljs-keyword">public</span><span class="hljs-string">"]
     at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
     at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:364)
     at $Proxy15.selectList(Unknown Source)
     at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194)
     at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:114)
     at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:58)
     at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:43)
     at $Proxy18.fetchOrder(Unknown Source)
     at com.xx.xx.server.impl.XX.fetchOrderByUnitNo(RechargeCardBillServiceImpl.java:351)
     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     at java.lang.reflect.Method.invoke(Method.java:597)
     at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:317)
     at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:198)
     at $Proxy26.fetchOrderByUnitNo(Unknown Source)
     at com.ofpay.ofdc.task.AbstractRechargeTask.run(AbstractRechargeTask.java:65)
     at java.lang.Thread.run(Thread.java:662)
</span></code></pre>
<p>çœ‹åˆ°è¿™ä¸ªå¼‚å¸¸ï¼Œæˆ‘ç¬¬ä¸€ååº”æ˜¯ï¼š<strong>ä»€ä¹ˆé¬¼ï¼Ÿsize()æ–¹æ³•è¿˜èƒ½è°ƒç”¨å¤±è´¥ï¼Ÿ</strong></p>
<p>æ¥çœ‹çœ‹å‡ºé—®é¢˜çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Controllerå±‚</span>
List&lt;String&gt; userCodes = Arrays.asList(<span class="hljs-string">"aaa"</span>, <span class="hljs-string">"bbb"</span>, <span class="hljs-string">"ccc"</span>);
orderService.fetchOrderByUserCodes(userCodes);
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Mapper.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fetchOrder"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"Order"</span>&gt;</span>
    SELECT * FROM t_order
    WHERE 1=1
    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"userCode != null and userCode.size() &gt; 0"</span>&gt;</span>
        AND user_code IN
        <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">"userCode"</span> <span class="hljs-attr">item</span>=<span class="hljs-string">"code"</span> <span class="hljs-attr">open</span>=<span class="hljs-string">"("</span> <span class="hljs-attr">close</span>=<span class="hljs-string">")"</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">","</span>&gt;</span>
            #{code}
        <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
<p>è¿™ä»£ç çœ‹èµ·æ¥æ²¡å•¥é—®é¢˜å•Šï¼ŸuserCodeä¸ä¸ºç©ºï¼Œè°ƒä¸ªsize()æ–¹æ³•åˆ¤æ–­é•¿åº¦ï¼Œå¤©ç»åœ°ä¹‰ã€‚ä½†å®ƒå°±æ˜¯æŠ¥é”™äº†ï¼Œè€Œä¸”æ˜¯å¶ç°ï¼ˆä¸€èˆ¬å¶ç°éƒ½æœ‰å¤§å‘ï¼‰ã€‚</p>
<h3 data-id="heading-2">å…ˆè¯´è§£å†³æ–¹æ¡ˆ</h3>
<p>ä¸€é¡¿<strong>ChatGPT + Google + Stack Overflowæœç´¢</strong>åï¼Œæ‰¾åˆ°äº†ä¸‰ç§è§£å†³åŠæ³•ï¼š</p>
<p><strong>æ–¹æ¡ˆ1ï¼šæ”¹å…¥å‚ç±»å‹ï¼ˆæœ€å¿«ï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŠŠArrays.asListè¿”å›çš„"å‡ArrayList"è½¬æˆçœŸæ­£çš„ArrayList</span>
List&lt;String&gt; userCodes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="hljs-string">"aaa"</span>, <span class="hljs-string">"bbb"</span>, <span class="hljs-string">"ccc"</span>));
</code></pre>
<p>æ”¹å®Œé‡æ–°å‘å¸ƒï¼Œé—®é¢˜ç§’è§£å†³ã€‚æµ‹è¯•éªŒè¯é€šè¿‡ï¼Œç»ˆäºå¯ä»¥ä¸‹ç­äº†ã€‚</p>
<p><strong>æ–¹æ¡ˆ2ï¼šæ”¹XMLè¡¨è¾¾å¼ï¼ˆä¸æ”¹Javaä»£ç ï¼‰</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç”¨lengthå±æ€§æ›¿ä»£size()æ–¹æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"userCode != null and userCode.length &gt; 0"</span>&gt;</span>
    AND user_code IN ...
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªæ–¹æ¡ˆä¹Ÿèƒ½workï¼Œè€Œä¸”ä¸ç”¨æ”¹ä¸šåŠ¡ä»£ç ï¼Œæ”¹å®Œå°±èƒ½ç”¨ã€‚</p>
<p><strong>æ–¹æ¡ˆ3ï¼šå‡çº§MyBatisç‰ˆæœ¬ï¼ˆæ²»æœ¬ä¹‹ç­–ï¼‰</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä»è€å¤è‘£ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- 2014å¹´çš„ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å‡çº§åˆ°ç°ä»£ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ä¸è¿‡è¿™ä¸ªæ–¹æ¡ˆéœ€è¦åšå…¨é¢çš„å›å½’æµ‹è¯•ï¼Œå‘¨äº”æ™šä¸Šå°±ç®—äº†ï¼Œç•™åˆ°ä¸‹å‘¨æ…¢æ…¢æã€‚</p>
<h3 data-id="heading-3">åˆ¨æ ¹é—®åº•ï¼šè¿™åˆ°åº•æ˜¯ä¸ªå•¥å‘ï¼Ÿ</h3>
<p>çº¿ä¸Šé—®é¢˜è§£å†³äº†ï¼Œä½†æ€»æ„Ÿè§‰å“ªé‡Œä¸å¯¹åŠ²ã€‚å‘¨æœ«é—²ç€æ²¡äº‹ï¼Œå†³å®šæŠŠè¿™ä¸ªè¯¡å¼‚çš„å¼‚å¸¸åˆ¨æ ¹é—®åº•ææ¸…æ¥šã€‚ç¿»äº†åŠå¤©èµ„æ–™ï¼Œç»ˆäºæ˜ç™½æ˜¯æ€ä¹ˆå›äº‹äº†ã€‚</p>
<p><strong>ç¬¬ä¸€å±‚é—®é¢˜ï¼šç±»å‹ä¸åŒ</strong></p>
<p><code>Arrays.asList()</code> è¿”å›çš„ä¸æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„ <code>java.util.ArrayList</code>ï¼Œè€Œæ˜¯ <code>java.util.Arrays</code> çš„ä¸€ä¸ªç§æœ‰é™æ€å†…éƒ¨ç±» <code>Arrays$ArrayList</code>ã€‚</p>
<p>å†™ä¸ªç®€å•çš„æµ‹è¯•éªŒè¯ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; list1 = Arrays.asList(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>);
List&lt;String&gt; list2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>));

System.out.println(list1.getClass());  
<span class="hljs-comment">// è¾“å‡º: class java.util.Arrays$ArrayList</span>

System.out.println(list2.getClass());  
<span class="hljs-comment">// è¾“å‡º: class java.util.ArrayList</span>
</code></pre>
<p>çœ‹åˆ°æ²¡ï¼Ÿä¸€ä¸ªæ˜¯<code>Arrays$ArrayList</code>ï¼Œä¸€ä¸ªæ˜¯<code>ArrayList</code>ï¼Œè™½ç„¶éƒ½å®ç°äº†Listæ¥å£ï¼Œä½†ç±»å‹å®Œå…¨ä¸åŒã€‚</p>
<p><strong>ç¬¬äºŒå±‚é—®é¢˜ï¼šè®¿é—®æƒé™å¼‚å¸¸</strong></p>
<p>MyBatisç”¨OGNLè¡¨è¾¾å¼å¼•æ“æ¥è§£æXMLä¸­çš„æ¡ä»¶åˆ¤æ–­ï¼ˆæ¯”å¦‚ <code>userCode.size() &gt; 0</code>ï¼‰ã€‚å½“OGNLå°è¯•é€šè¿‡åå°„è°ƒç”¨ <code>Arrays$ArrayList</code> çš„ <code>size()</code> æ–¹æ³•æ—¶ï¼Œå‘ç°è¿™ä¸ªç±»æ˜¯ <code>private static class</code>ï¼ˆç§æœ‰é™æ€å†…éƒ¨ç±»ï¼‰ã€‚</p>
<p>è™½ç„¶ <code>size()</code> æ–¹æ³•æœ¬èº«æ˜¯ <code>public</code> çš„ï¼Œä½†å› ä¸ºç±»æœ¬èº«æ˜¯ <code>private</code> ä¿®é¥°ç¬¦ï¼ŒOGNLåœ¨åå°„è®¿é—®æ—¶éœ€è¦è°ƒç”¨ <code>setAccessible(true)</code> æ¥ç»•è¿‡æƒé™æ£€æŸ¥ã€‚é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼</p>
<p><strong>ç¬¬ä¸‰å±‚é—®é¢˜ï¼šå¹¶å‘Bugï¼ˆé‡ç‚¹æ¥äº†ï¼ï¼‰</strong></p>
<p>è€ç‰ˆæœ¬MyBatisåœ¨å¤„ç†åå°„æ—¶æœ‰ä¸ªå¹¶å‘é—®é¢˜ï¼š<strong>å½“éœ€è¦è°ƒç”¨ç§æœ‰ç±»çš„æ–¹æ³•æ—¶ï¼Œä¼šå…ˆè®¾ç½® <code>accessible = true</code>ï¼Œè°ƒç”¨å®Œå†è®¾å› <code>false</code>ã€‚ä½†è¿™ä¸ªæ“ä½œæ²¡æœ‰åŠ é”ï¼ï¼ˆéåŸå­æ€§ï¼‰</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼š</p>
<ul>
<li>çº¿ç¨‹Aï¼šè®¾ç½® <code>accessible = true</code>ï¼Œå‡†å¤‡è°ƒç”¨æ–¹æ³•</li>
<li>çº¿ç¨‹Bï¼šä¹Ÿè®¾ç½® <code>accessible = true</code>ï¼Œç„¶åè°ƒç”¨æ–¹æ³•ï¼Œå†è®¾å› <code>false</code></li>
<li>çº¿ç¨‹Aï¼šæ­¤æ—¶å»è°ƒç”¨æ–¹æ³•ï¼Œå‘ç° <code>accessible</code> å·²ç»è¢«Bæ”¹æˆ <code>false</code> äº†ï¼Œboomï¼ğŸ’¥</li>
</ul>
<p>è¿™å°±æ˜¯<strong>ä¸ºä»€ä¹ˆè¿™ä¸ªBugå¶å°”æ‰å‡ºç°ï¼Œå› ä¸ºå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸ªå¹¶å‘é—®é¢˜</strong>ï¼åªæœ‰åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨è¿™ä¸ªæ¥å£æ—¶æ‰ä¼šè§¦å‘ã€‚</p>
<p>GitHubä¸Šæœ‰äººæ—©åœ¨2014å¹´å°±æäº†è¿™ä¸ªissueï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmybatis%2Fmybatis-3%2Fpull%2F384" target="_blank" title="https://github.com/mybatis/mybatis-3/pull/384" ref="nofollow noopener noreferrer">mybatis/mybatis-3#384</a></p>
<p>åæ¥MyBatisåœ¨3.3.xç‰ˆæœ¬ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼Œå¯¹åå°„æ“ä½œåŠ äº†åŒæ­¥æ§åˆ¶ï¼Œç¡®ä¿ <code>accessible</code> çš„è®¾ç½®å’Œæ–¹æ³•è°ƒç”¨æ˜¯åŸå­æ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-4">å‘ä½äºŒï¼šå‚æ•°ä¼ 0ï¼ŒSQLæ¡ä»¶ç¥ç§˜æ¶ˆå¤±ä¹‹è°œ</h2>
<h3 data-id="heading-5">åˆä¸€ä¸ªå‘¨äº”çš„æ•…äº‹</h3>
<p>æ˜¯çš„ï¼Œåˆæ˜¯å‘¨äº”ä¸‹åˆï¼ˆå¢¨è²å®šå¾‹ï¼šBugæ°¸è¿œåœ¨å‘¨äº”å‡ºç°ğŸ˜­ï¼‰ã€‚éœ€æ±‚å¾ˆç®€å•ï¼šæŸ¥è¯¢æ‰€æœ‰"å¾…æ”¯ä»˜"çŠ¶æ€ï¼ˆstatus=0ï¼‰çš„è®¢å•ã€‚ååˆ†é’Ÿå†™å®Œä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Serviceå±‚</span>
<span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">queryPendingOrders</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> orderMapper.queryOrderByStatus(<span class="hljs-number">0</span>);  <span class="hljs-comment">// 0è¡¨ç¤ºå¾…æ”¯ä»˜</span>
}
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Mapper.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"queryOrderByStatus"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"Order"</span>&gt;</span>
    SELECT * FROM t_order
    WHERE 1=1
    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null and status != ''"</span>&gt;</span>
        AND status = #{status}
    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
<p>æœ¬åœ°æµ‹è¯•ï¼Œå®Œç¾è¿è¡Œã€‚æäº¤ä»£ç ï¼Œåˆå¹¶ä¸»å¹²ï¼Œå‘å¸ƒæµ‹è¯•ç¯å¢ƒã€‚å¿ƒæƒ³è¿™æ¬¡ç¨³äº†ï¼Œå‡†å¤‡æå‰æ”¶æ‹¾ä¸œè¥¿ä¸‹ç­ã€‚</p>
<p>ç»“æœåŠå°æ—¶åï¼Œæµ‹è¯•åŒå­¦å‘æ¥æ¶ˆæ¯ï¼š"è¿™ä¸ªæ¥å£æœ‰é—®é¢˜å•Šï¼Œæ€ä¹ˆæŠŠæ‰€æœ‰çŠ¶æ€çš„è®¢å•éƒ½æŸ¥å‡ºæ¥äº†ï¼Ÿæˆ‘è¦çš„æ˜¯status=0çš„è®¢å•ã€‚"</p>
<p>æˆ‘ä¸€è„¸æ‡µé€¼ï¼šï¼Ÿï¼Ÿï¼Ÿä¸å¯èƒ½å•Šï¼Œæˆ‘åˆšæµ‹è¿‡çš„ï¼Œæ˜æ˜æ²¡é—®é¢˜ï¼</p>
<p>æ‰“å¼€æµ‹è¯•ç¯å¢ƒæ—¥å¿—ï¼Œæ‰§è¡Œçš„SQLæ˜¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_order <span class="hljs-keyword">WHERE</span> <span class="hljs-number">1</span><span class="hljs-operator">=</span><span class="hljs-number">1</span>
</code></pre>
<p><strong>WHEREåé¢çš„statusæ¡ä»¶å‘¢ï¼Ÿè¢«åƒäº†ï¼Ÿ</strong></p>
<h3 data-id="heading-6">Debugä¹‹æ—…</h3>
<p>æˆ‘åœ¨æœ¬åœ°æ‰“æ–­ç‚¹ï¼Œä¸€æ­¥æ­¥è°ƒè¯•ï¼š</p>
<ol>
<li>Controllerå±‚ä¼ å…¥çš„å‚æ•°ï¼š<code>status = 0</code> âœ…</li>
<li>Serviceå±‚æ”¶åˆ°çš„å‚æ•°ï¼š<code>status = 0</code> âœ…</li>
<li>MyBatisæ‰§è¡Œçš„SQLï¼š<code>WHERE 1=1</code> âŒ</li>
</ol>
<p>é—®é¢˜è‚¯å®šå‡ºåœ¨XMLçš„ifåˆ¤æ–­ä¸Šã€‚ç›¯ç€è¿™è¡Œçœ‹äº†å¥½å‡ åˆ†é’Ÿï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null and status != ''"</span>&gt;</span>
</code></pre>
<p>çªç„¶çµå…‰ä¸€ç°ï¼š<strong>ä¼šä¸ä¼šæ˜¯ 0 è¢«åˆ¤å®šæˆäº†ç©ºå­—ç¬¦ä¸²ï¼Ÿ</strong></p>
<p>èµ¶ç´§æ”¹æˆè¿™æ ·è¯•è¯•ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null"</span>&gt;</span>
    AND status = #{status}
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<p>é‡æ–°å‘å¸ƒï¼Œé—®é¢˜è§£å†³ï¼æµ‹è¯•ç¯å¢ƒæŸ¥è¯¢status=0çš„è®¢å•ï¼Œæ­£å¸¸è¿”å›äº†ã€‚</p>
<h3 data-id="heading-7">åŸç†æ­ç§˜ï¼šOGNLçš„ç±»å‹è½¬æ¢é™·é˜±</h3>
<p>è¿™åˆæ˜¯ä¸€ä¸ªMyBatisï¼ˆå‡†ç¡®è¯´æ˜¯OGNLï¼‰çš„ç»å…¸å‘ã€‚<strong>è¿™ä¸ªå‘æ¯”ç¬¬ä¸€ä¸ªè¿˜éšè”½ï¼Œå› ä¸ºå®ƒä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯æ‚„æ‚„åœ°æŠŠä½ çš„æ¡ä»¶åƒæ‰</strong>ã€‚</p>
<p><strong>OGNLçš„æ±‚å€¼é€»è¾‘</strong></p>
<p>MyBatisçš„ <code>&lt;if&gt;</code> æ ‡ç­¾ç”¨çš„æ˜¯OGNLè¡¨è¾¾å¼å¼•æ“ã€‚å½“ä½ å†™ <code>status != ''</code> æ—¶ï¼ŒOGNLå†…éƒ¨ä¼šç»å†è¿™æ ·çš„åˆ¤æ–­æµç¨‹ï¼š</p>
<ol>
<li>å…ˆé€šè¿‡ <code>OgnlCache.getValue()</code> è·å–è¡¨è¾¾å¼çš„å€¼ï¼ˆè¿™é‡Œè¡¨è¾¾å¼è¿”å›äº†falseï¼‰</li>
<li>ç„¶ååœ¨ <code>ExpressionEvaluator.evaluateBoolean()</code> ä¸­åˆ¤æ–­è¿™ä¸ªå€¼ï¼Œæ ¹æ®è¿”å›çš„ä¸åŒç±»å‹ä½œä¸åŒåˆ¤æ–­ï¼Œæœ€ç»ˆè¿”å›booleanç±»å‹ç»“æœã€‚</li>
</ol>
<p>å…ˆçœ‹ç¬¬äºŒæ­¥ï¼OGNLå¯¹ä¸åŒç±»å‹æœ‰ä¸åŒçš„åˆ¤æ–­é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ExpressionEvaluator.evaluateBoolean()æ–¹æ³• OGNLçš„åˆ¤æ–­é€»è¾‘</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">evaluateBoolean</span><span class="hljs-params">(String expression, Object parameterObject)</span> {
  <span class="hljs-comment">// è¿™é‡Œvalueè¿”å›çš„æ˜¯false</span>
  <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> OgnlCache.getValue(expression, parameterObject);
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Boolean) {
    <span class="hljs-comment">// å› æ­¤ä¼šèµ°åˆ°è¿™é‡Œï¼Œè¿”å›false</span>
    <span class="hljs-keyword">return</span> (Boolean) value;
  }
  <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> Number) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(String.valueOf(value)).compareTo(BigDecimal.ZERO) != <span class="hljs-number">0</span>;
  }
  <span class="hljs-keyword">return</span> value != <span class="hljs-literal">null</span>;
}
</code></pre>
<p><strong>ç±»å‹è½¬æ¢çš„å‘</strong></p>
<p>å½“ä½ å†™ <code>status != ''</code> æ—¶ï¼Œä»<code>OgnlCache.getValue()</code>å¾€ä¸‹ä¸æ–­è¿½æº¯ï¼ŒOGNLæœ€ç»ˆä¼šè°ƒç”¨ <code>compareWithConversion</code> æ–¹æ³•åšç±»å‹è½¬æ¢æ¯”è¾ƒã€‚è¿™ä¸ªæ–¹æ³•ä¼šæŠŠä¸¤è¾¹çš„å€¼éƒ½è½¬æˆåŒä¸€ç±»å‹å†æ¯”è¾ƒï¼š</p>
<ul>
<li>æ•°å€¼ <code>0</code> ä¼šè¢«è½¬æˆ <code>doubleç±»å‹ï¼š0.0</code></li>
<li>ç©ºå­—ç¬¦ä¸² <code>""</code> ä¹Ÿä¼šè¢«è½¬æˆ <code>doubleç±»å‹ï¼š0.0</code></li>
</ul>
<p>ç»“æœå°±æ˜¯ <code>0 == ""</code> è¢«åˆ¤å®šä¸º <code>true</code>ï¼Œå¯¼è‡´ <code>status != ''</code> è¿”å› <code>false</code>ï¼Œä½ çš„ifæ¡ä»¶ä¸æˆç«‹ï¼ŒSQLæ¡ä»¶å°±æ²¡äº†ï¼</p>
<p><strong>ä¸ºä»€ä¹ˆæœ¬åœ°æµ‹è¯•æ²¡é—®é¢˜ï¼Ÿ</strong></p>
<p>æ˜¯å› ä¸ºæˆ‘æœ¬åœ°æµ‹è¯•æ—¶ä¼ çš„å‚æ•°æ˜¯ <code>status=1</code> æˆ–å…¶ä»–é0å€¼ï¼Œè€Œæµ‹è¯•ç¯å¢ƒåˆšå¥½ä¼ äº† <code>status=0</code>ã€‚è¿™ç§Bugç‰¹åˆ«éšè”½ï¼Œå› ä¸ºå®ƒä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯æŸ¥è¯¢ç»“æœä¸ç¬¦åˆé¢„æœŸã€‚</p>
<p><strong>è¿™ä¸ªå‘çš„é€‚ç”¨èŒƒå›´</strong>ï¼š</p>
<ul>
<li>å‚æ•°æ˜¯<strong>æ•°å€¼ç±»å‹</strong>ï¼ˆIntegerã€Longç­‰ï¼‰çš„ <strong>0</strong></li>
<li>XMLä¸­å†™äº† <code>!= ''</code> çš„ç©ºå­—ç¬¦ä¸²åˆ¤æ–­</li>
<li><strong>å­—ç¬¦ä¸²"0"ä¸å—å½±å“</strong>ï¼ˆ<code>"0" != ''</code> æ­£å¸¸åˆ¤å®šä¸ºtrueï¼‰</li>
</ul>
<p>æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»çœ‹çœ‹MyBatisæºç ä¸­çš„ <code>ExpressionEvaluator</code> ç±»å’ŒOGNLçš„ <code>OgnlOps.compareWithConversion</code> æ–¹æ³•ï¼Œå°±èƒ½æ˜ç™½æ•´ä¸ªè½¬æ¢è¿‡ç¨‹äº†ã€‚</p>
<h3 data-id="heading-8">æ­£ç¡®å§¿åŠ¿å¤§å…¨</h3>
<p>æ ¹æ®ä¸åŒåœºæ™¯ï¼Œæˆ‘æ€»ç»“äº†å‡ ç§å†™æ³•ï¼š</p>
<p><strong>åœºæ™¯1ï¼šå‚æ•°æ˜¯Integer/Longç­‰åŒ…è£…ç±»å‹</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ¨èï¼šåªåˆ¤nullï¼Œæ•°å€¼0æ˜¯æœ‰æ•ˆå€¼ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null"</span>&gt;</span>
    AND status = #{status}
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<p><strong>åœºæ™¯2ï¼šå‚æ•°å¯èƒ½æ˜¯æ•°å€¼ä¹Ÿå¯èƒ½æ˜¯å­—ç¬¦ä¸²</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ˜¾å¼åŒ…å«0çš„åˆ¤æ–­ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"status != null and (status != '' or status == 0)"</span>&gt;</span>
    AND status = #{status}
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<p><strong>åœºæ™¯3ï¼šå­—ç¬¦ä¸²ç±»å‹å‚æ•°</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å­—ç¬¦ä¸²æ­£å¸¸åˆ¤æ–­ï¼Œä¸ä¼šæœ‰å‘ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"userName != null and userName != ''"</span>&gt;</span>
    AND user_name = #{userName}
<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
</code></pre>
<h3 data-id="heading-9">é¿å‘å»ºè®®</h3>
<ol>
<li>
<p><strong>æ•°å€¼ç±»å‹å‚æ•°ï¼Œåˆ«ç”¨ç©ºå­—ç¬¦ä¸²åˆ¤æ–­</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âŒ é”™è¯¯å†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"count != null and count != ''"</span>&gt;</span>

<span class="hljs-comment">&lt;!-- âœ… æ­£ç¡®å†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"count != null"</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>è®°ä½æ•°å€¼ç±»å‹å’Œå­—ç¬¦ä¸²ç±»å‹è¦åŒºåˆ†å¯¹å¾…</strong></p>
<ul>
<li>æ•°å€¼ç±»å‹ï¼ˆIntegerã€Longï¼‰ï¼šåªåˆ¤<code>!= null</code></li>
<li>å­—ç¬¦ä¸²ç±»å‹ï¼šåˆ¤<code>!= null and != ''</code></li>
</ul>
</li>
<li>
<p><strong>ç¡®å®éœ€è¦å…¼å®¹çš„åœºæ™¯ï¼Œæ˜ç¡®å†™å‡º0çš„åˆ¤æ–­</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"value != null and (value != '' or value == 0)"</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>å‡çº§MyBatisç‰ˆæœ¬å¹¶ä¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜</strong>ï¼ˆå› ä¸ºè¿™æ˜¯OGNLçš„ç‰¹æ€§ï¼Œä¸æ˜¯bugï¼‰</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-10">æ€»ç»“ä¸æœ€ä½³å®è·µ</h2>
<p>è¿™ä¸¤ä¸ªé—®é¢˜è™½ç„¶è¡¨ç°å½¢å¼ä¸åŒï¼Œä½†éƒ½æºäº<strong>OGNLè¡¨è¾¾å¼å¼•æ“</strong>çš„ç‰¹æ®Šè¡Œä¸ºã€‚ç†è§£è¿™äº›é™·é˜±èƒŒåçš„æœºåˆ¶ï¼Œèƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å¥å£®çš„MyBatisä»£ç ã€‚</p>
<h3 data-id="heading-11">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>
<p><strong>Arrays.asList()çš„é™·é˜±</strong></p>
<ul>
<li>
<p><code>Arrays.asList()</code> è¿”å›çš„ä¸æ˜¯çœŸæ­£çš„ArrayListï¼Œæ˜¯Arraysçš„ç§æœ‰é™æ€å†…éƒ¨ç±»</p>
</li>
<li>
<p>è€ç‰ˆæœ¬MyBatisï¼ˆ3.3.xä¹‹å‰ï¼‰çš„OGNLè¡¨è¾¾å¼å¼•æ“ï¼š<strong>åå°„è®¿é—®ç§æœ‰é™æ€å†…éƒ¨ç±»çš„publicæ–¹æ³•æ—¶ï¼Œåœ¨è®¾ç½® <code>accessible = true</code>å‚æ•°æ—¶ä¼šæœ‰å¹¶å‘é—®é¢˜</strong></p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼šåŒ…è£…æˆçœŸæ­£çš„ArrayListæˆ–å‡çº§MyBatisç‰ˆæœ¬</p>
</li>
</ul>
</li>
<li>
<p><strong>ã€Œifã€æ ‡ç­¾ï¼šæ•°å€¼0åˆ¤ç©ºçš„é™·é˜±</strong></p>
<ul>
<li>
<p>OGNLä¼šå°†æ•°å€¼0ä¸ç©ºå­—ç¬¦ä¸²åšç±»å‹è½¬æ¢æ¯”è¾ƒ</p>
</li>
<li>
<p><code>status != ''</code> ä¼šè¿”å›falseï¼Œå¯¼è‡´ã€Œifã€è¡¨è¾¾å¼æ¡ä»¶ä¸æ»¡è¶³ï¼Œæ•°å€¼0çš„æŸ¥è¯¢æ¡ä»¶è¢«è¿‡æ»¤</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼šæ•°å€¼ç±»å‹åªåˆ¤æ–­<code>!= null</code>ï¼Œä¸è¦åˆ¤æ–­ç©ºå­—ç¬¦ä¸²</p>
</li>
</ul>
</li>
</ol>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ é¿å¼€è¿™äº›å‘ï¼Œè®©å‘¨äº”ä¸‹ç­ä¸å†æ˜¯å¥¢æœ› ğŸ˜„</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS æŠ“åŒ…å·¥å…·åœ¨ä¸åŒåœºæ™¯çš„å®é™…ä½œç”¨]]></title>    <link>https://juejin.cn/post/7586550947704766474</link>    <guid>https://juejin.cn/post/7586550947704766474</guid>    <pubDate>2025-12-23T03:27:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586550947704766474" data-draft-id="7586550947704750090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS æŠ“åŒ…å·¥å…·åœ¨ä¸åŒåœºæ™¯çš„å®é™…ä½œç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-23T03:27:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒå°±å¥½2025"/> <meta itemprop="url" content="https://juejin.cn/user/3850962908492660"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS æŠ“åŒ…å·¥å…·åœ¨ä¸åŒåœºæ™¯çš„å®é™…ä½œç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3850962908492660/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒå°±å¥½2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:27:22.000Z" title="Tue Dec 23 2025 03:27:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åˆšå¼€å§‹åš iOS å¼€å‘æ—¶ï¼Œæˆ‘å¯¹æŠ“åŒ…å·¥å…·çš„ç†è§£å¾ˆç®€å•ã€‚
èƒ½çœ‹åˆ°æ¥å£è¯·æ±‚ï¼Œå‚æ•°æ²¡é—®é¢˜ï¼Œè¿”å›å€¼ç¬¦åˆé¢„æœŸï¼Œäº‹æƒ…å°±ç®—ç»“æŸã€‚</p>
<p>ä½†éšç€é¡¹ç›®å˜å¤æ‚ï¼Œé—®é¢˜å¼€å§‹åªåœ¨çœŸæœºä¸Šå‡ºç°ï¼Œåªåœ¨éƒ¨åˆ†ç”¨æˆ·å‡ºç°ï¼Œç”šè‡³åªåœ¨æŸäº›ç½‘ç»œç¯å¢ƒä¸‹å‡ºç°ï¼ŒiOS æŠ“åŒ…å·¥å…·çš„æ„ä¹‰æ‰çœŸæ­£å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>è¿™æ—¶ï¼ŒæŠ“åŒ…ä¸å†æ˜¯è¾…åŠ©éªŒè¯ï¼Œè€Œæ˜¯ç»§ç»­æ’æŸ¥çš„å”¯ä¸€å…¥å£ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä»£ç†å‹ iOS æŠ“åŒ…å·¥å…·ï¼Œä¾ç„¶æ˜¯æœ€å…ˆå‡ºåœºçš„</strong></h2>
<p>åœ¨å¤§å¤šæ•°æ—¥å¸¸å¼€å‘ä¸­ï¼Œä»£ç†æŠ“åŒ…å·¥å…·ä»ç„¶æ˜¯é¦–é€‰ã€‚</p>
<p>å®ƒä»¬å¾ˆé€‚åˆåšè¿™æ ·å‡ ä»¶äº‹ï¼š</p>
<ul>
<li>ç¡®è®¤è¯·æ±‚æ˜¯å¦å‘å‡º</li>
<li>éªŒè¯å‚æ•°æ˜¯å¦è¢«æ­£ç¡®æ‹¼è£…</li>
<li>æ£€æŸ¥ Header æ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
<li>å¯¹æ¯”ä¸åŒç‰ˆæœ¬æ¥å£å·®å¼‚</li>
</ul>
<p>åœ¨è°ƒè¯•ç¯å¢ƒã€æ¨¡æ‹Ÿå™¨ç¯å¢ƒä¸‹ï¼Œè¿™ç§æ–¹å¼æ•ˆç‡éå¸¸é«˜ï¼Œä¹Ÿè¶³å¤Ÿç›´è§‚ã€‚</p>
<p>é—®é¢˜é€šå¸¸å‡ºç°åœ¨åœºæ™¯å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>å½“æŠ“åŒ…å¼€å§‹å‡ºç°ä¸ç¨³å®šçš„æ—¶å€™</strong></h2>
<p>å¦‚æœ iOS æŠ“åŒ…è¿‡ç¨‹ä¸­å‡ºç°ä»¥ä¸‹æƒ…å†µï¼Œæˆ‘ä¸€èˆ¬ä¼šæš‚åœç»§ç»­æŠ˜è…¾ä»£ç†é…ç½®ï¼š</p>
<ul>
<li>æ¨¡æ‹Ÿå™¨å¯ä»¥ï¼ŒçœŸæœºä¸è¡Œ</li>
<li>æ¥å£å¶å°”èƒ½æŠ“åˆ°ï¼Œå¶å°”å®Œå…¨æ¶ˆå¤±</li>
<li>HTTPS è¿æ¥å­˜åœ¨ï¼Œä½†å†…å®¹ä¸å¯è¯»</li>
<li>è¯ä¹¦å·²ç»ä¿¡ä»»ï¼Œä½†ä»ç„¶è§£ä¸äº†å¯†</li>
</ul>
<p>è¿™äº›ç°è±¡å¹¶ä¸ä¸€å®šè¯´æ˜å·¥å…·æœ‰é—®é¢˜ï¼Œæ›´å¸¸è§çš„åŸå› æ˜¯ï¼š<strong>App åœ¨çœŸæœºç¯å¢ƒä¸‹å¹¶ä¸å®Œå…¨èµ°ä»£ç†è·¯å¾„ã€‚</strong></p>
<hr/>
<h2 data-id="heading-2"><strong>HTTPS å®‰å…¨ç­–ç•¥ï¼Œæ˜¯ iOS æŠ“åŒ…å·¥å…·çš„åˆ†æ°´å²­</strong></h2>
<p>åœ¨ iOS App ä¸­ï¼Œå¼•å…¥ HTTPS pin æ ¡éªŒã€åŒå‘è®¤è¯å·²ç»å¾ˆå¸¸è§ã€‚
ä¸€æ—¦å¯ç”¨è¿™äº›ç­–ç•¥ï¼ŒåŸºäºä»£ç†çš„æŠ“åŒ…å·¥å…·èƒ½çœ‹åˆ°çš„å†…å®¹å°±ä¼šå¤§å¹…å‡å°‘ã€‚</p>
<p>è¿™æ—¶ï¼Œå¦‚æœç»§ç»­å›´ç»•â€œä¸ºä»€ä¹ˆæŠ“ä¸åˆ°åŒ…â€åå¤è°ƒæ•´é…ç½®ï¼Œå¾ˆå®¹æ˜“é™·å…¥æ— æ•ˆå¾ªç¯ã€‚
æ›´æœ‰æ•ˆçš„åšæ³•ï¼Œæ˜¯æ¢ä¸€ä¸ªæŠ“åŒ…è§†è§’ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>è®¾å¤‡ä¾§æŠ“åŒ…ï¼Œè®©çœŸæœºè¡Œä¸ºå˜å¾—å¯è§</strong></h2>
<p>åœ¨éœ€è¦ç¡®è®¤çœŸå®è®¾å¤‡ç½‘ç»œè¡Œä¸ºæ—¶ï¼Œæˆ‘ä¼šä½¿ç”¨ <strong>æŠ“åŒ…å¤§å¸ˆï¼ˆSniff Masterï¼‰</strong> è¿™ç§è®¾å¤‡ä¾§æŠ“åŒ…å·¥å…·ã€‚</p>
<p>å®ƒåœ¨æ•´ä¸ªæµç¨‹ä¸­çš„ä½œç”¨å¹¶ä¸å¤æ‚ï¼šå›ç­”ä¸€ä¸ªæœ€åŸºç¡€çš„é—®é¢˜â€”â€”è¿™ä¸ª iOS App åœ¨çœŸæœºä¸Šåˆ°åº•å‘äº†ä»€ä¹ˆè¯·æ±‚ã€‚</p>
<p>ä¸ä¾èµ–ç³»ç»Ÿä»£ç†ã€ä¸éœ€è¦è¶Šç‹±æˆ– rootï¼Œåªè¦è¿æ¥è®¾å¤‡å°±èƒ½å¼€å§‹æŠ“å– HTTPSã€TCPã€UDP ç­‰é€šä¿¡æ•°æ®ã€‚è¿™ç§æ–¹å¼åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ä»·å€¼ï¼š</p>
<ul>
<li>ç¬¬ä¸‰æ–¹ SDK ç½‘ç»œè¡Œä¸ºåˆ†æ</li>
<li>HTTPS pin æ ¡éªŒå¯¼è‡´ä»£ç†æŠ“åŒ…å¤±æ•ˆ</li>
<li>çœŸæœºä¸æ¨¡æ‹Ÿå™¨è¡Œä¸ºä¸ä¸€è‡´</li>
</ul>
<p>å®ƒå¹¶ä¸æ˜¯ç”¨æ¥æ›¿ä»£ä»£ç†æŠ“åŒ…ï¼Œè€Œæ˜¯è¡¥é½â€œçœŸå®è¿è¡Œç¯å¢ƒâ€è¿™ä¸€å±‚ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>æŒ‡å®š App æŠ“åŒ…ï¼Œæ¯”åŠŸèƒ½å †å æ›´é‡è¦</strong></h2>
<p>åœ¨çœŸæœºç¯å¢ƒä¸‹æŠ“åŒ…ï¼Œä¸€ä¸ªå¾ˆç°å®çš„é—®é¢˜æ˜¯å™ªéŸ³ã€‚</p>
<p>ç³»ç»ŸæœåŠ¡ã€åå°åŒæ­¥ã€å…¶ä»– App çš„è¯·æ±‚ï¼Œå¾ˆå®¹æ˜“è®©ä½ è¯¯ä»¥ä¸ºè¯·æ±‚æ²¡å‘å‡ºæ¥ã€‚
æŠ“åŒ…å¤§å¸ˆï¼ˆSniffmasterï¼‰å·¥å…·æ”¯æŒåªæŠ“å–æŒ‡å®š Appï¼Œåˆ¤æ–­ä¼šç®€å•å¾—å¤šã€‚</p>
<p>å½“æ‰€æœ‰æ•°æ®éƒ½æ¥è‡ªåŒä¸€ä¸ª App æ—¶ï¼Œå¼‚å¸¸æ¨¡å¼å¾€å¾€ä¼šè‡ªç„¶æ˜¾ç°å‡ºæ¥ï¼Œè€Œä¸æ˜¯è¢«åŸ‹åœ¨æµ·é‡è¯·æ±‚ä¸­ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>iOS æŠ“åŒ…ï¼Œå¹¶ä¸æ€»æ˜¯ HTTPS çš„é—®é¢˜</strong></h2>
<p>åœ¨ä¸€äº›å¤æ‚é¡¹ç›®ä¸­ï¼Œæˆ‘é‡åˆ°è¿‡è¿™æ ·çš„æƒ…å†µï¼š</p>
<ul>
<li>HTTPS æ¥å£è¿”å›æ­£å¸¸</li>
<li>ä½†å®¢æˆ·ç«¯çŠ¶æ€æ²¡æœ‰æ›´æ–°</li>
<li>é‡å¯ App åä¸€åˆ‡æ¢å¤</li>
</ul>
<p>ç»§ç»­ç›¯ç€æ¥å£ï¼Œå…¶å®å¾ˆéš¾æ¨è¿›ã€‚
è¿™æ—¶éœ€è¦è€ƒè™‘ï¼Œæ˜¯å¦å­˜åœ¨ HTTP ä¹‹å¤–çš„é€šä¿¡è¡Œä¸ºã€‚</p>
<hr/>
<h2 data-id="heading-6"><strong>æ•°æ®æµæŠ“åŒ…ï¼Œè®©è¿æ¥é—®é¢˜æµ®å‡ºæ°´é¢</strong></h2>
<p>ä¸å°‘ iOS App ä¼šä½¿ç”¨ TCP é•¿è¿æ¥æˆ–è‡ªå®šä¹‰åè®®å®ŒæˆçŠ¶æ€åŒæ­¥ã€æ¨é€æˆ–å¿ƒè·³ã€‚</p>
<p>è¿™äº›è¡Œä¸ºï¼Œåœ¨ä»£ç†æŠ“åŒ…å·¥å…·ä¸­å¾€å¾€æ˜¯ä¸å¯è§çš„ã€‚
è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆâ€œæ¥å£çœ‹èµ·æ¥æ­£å¸¸ï¼Œä½†åŠŸèƒ½ä¸æ­£å¸¸â€çš„æƒ…å†µå¹¶ä¸å°‘è§ã€‚</p>
<p>æŠ“åŒ…å¤§å¸ˆæ”¯æŒ TCP / UDP æ•°æ®æµæŠ“å–ï¼Œå¹¶å¯ä»¥å¯¼å‡ºæ•°æ®è¿›ä¸€æ­¥åˆ†æã€‚åœ¨åˆ†æè¿™äº›é—®é¢˜æ—¶ï¼Œå®ƒçš„ä»·å€¼å¹¶ä¸åœ¨äºè§£æåè®®ï¼Œè€Œåœ¨äºç¡®è®¤ï¼š</p>
<ul>
<li>è¿æ¥æ˜¯å¦å»ºç«‹</li>
<li>æ˜¯å¦é¢‘ç¹æ–­å¼€</li>
<li>æ•°æ®æ˜¯å¦çœŸçš„å‘é€å’Œæ¥æ”¶</li>
</ul>
<p>è¿™ä¸€æ­¥ï¼Œå¾€å¾€èƒ½ç›´æ¥æ”¹å˜æ’æŸ¥æ–¹å‘ã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>Wireshark å¹¶ä¸æ˜¯ iOS æŠ“åŒ…çš„èµ·ç‚¹</strong></h2>
<p>å¾ˆå¤šäººåœ¨è®¨è®º iOS æŠ“åŒ…å·¥å…·æ—¶ï¼Œä¼šç›´æ¥æåˆ° Wiresharkã€‚</p>
<p>ä½†ä»å·¥ç¨‹å®è·µæ¥çœ‹ï¼Œå®ƒæ›´é€‚åˆå‡ºç°åœ¨é—®é¢˜å·²ç»è¢«ç¼©å°èŒƒå›´ä¹‹åã€‚
åœ¨æ²¡æœ‰æ˜ç¡®æ–¹å‘ä¹‹å‰ï¼Œç›´æ¥é¢å¯¹å¤§é‡åº•å±‚æ•°æ®ï¼Œåè€Œä¼šå¢åŠ ç†è§£æˆæœ¬ã€‚</p>
<p>æˆ‘æ›´å€¾å‘äºæŠŠå®ƒå½“ä½œâ€œç¡®è®¤å·¥å…·â€ï¼Œè€Œä¸æ˜¯ç¬¬ä¸€é€‰æ‹©ã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>æ‹¦æˆªå’Œä¿®æ”¹ï¼Œç”¨æ¥éªŒè¯è€Œä¸æ˜¯çŒœæµ‹</strong></h2>
<p>åœ¨å®šä½åˆ°é—®é¢˜å¯èƒ½åŸå› åï¼Œæˆ‘é€šå¸¸ä¼šé€šè¿‡ä¿®æ”¹æŠ“åˆ°çš„è¯·æ±‚æˆ–å“åº”ï¼ŒéªŒè¯å®¢æˆ·ç«¯è¡Œä¸ºã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>ä¿®æ”¹çŠ¶æ€ç ï¼Œè§‚å¯Ÿå®¢æˆ·ç«¯æ˜¯å¦é‡è¯•</li>
<li>åˆ é™¤æŸäº›å­—æ®µï¼Œç¡®è®¤æ˜¯å¦å­˜åœ¨éšå«ä¾èµ–</li>
</ul>
<p>è¿™ç§æ–¹å¼æ¯”åå¤æ”¹ä»£ç æ›´ç›´æ¥ï¼Œä¹Ÿæ›´å®¹æ˜“æ§åˆ¶å˜é‡ã€‚</p>
<p>æŠ“åŒ…å¤§å¸ˆæ”¯æŒé€šè¿‡è„šæœ¬æ‹¦æˆªå’Œä¿®æ”¹è¯·æ±‚ã€å“åº”ï¼Œåœ¨è¿™ä¸€é˜¶æ®µæ›´åƒæ˜¯å®éªŒå·¥å…·ï¼Œè€Œä¸æ˜¯å•çº¯çš„æŠ“åŒ…å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>å¯¹ iOS æŠ“åŒ…å·¥å…·çš„ä¸€ç‚¹çœ‹æ³•</strong></h2>
<p>ç»å†è¿‡å‡ æ¬¡çœŸæœºé—®é¢˜æ’æŸ¥ä¹‹åï¼Œæˆ‘å¯¹ iOS æŠ“åŒ…å·¥å…·çš„ç†è§£å˜å¾—æ›´åŠ¡å®ï¼š</p>
<ul>
<li>æ²¡æœ‰å“ªä¸€ä¸ªå·¥å…·é€‚åˆæ‰€æœ‰åœºæ™¯</li>
<li>æŠ“åŒ…å¤±è´¥ï¼Œå¾€å¾€æ˜¯åœ¨æç¤ºä½ æ¢è§†è§’</li>
<li>å¤šå·¥å…·ç»„åˆï¼Œæ‰èƒ½è¦†ç›–å®Œæ•´é€šä¿¡è·¯å¾„</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code æ¥å…¥ç¬¬ä¸‰æ–¹AIæ¨¡å‹ï¼ˆMiMo-V2-Flashï¼‰]]></title>    <link>https://juejin.cn/post/7586588823906091017</link>    <guid>https://juejin.cn/post/7586588823906091017</guid>    <pubDate>2025-12-23T03:27:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586588823906091017" data-draft-id="7586588823905943561" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code æ¥å…¥ç¬¬ä¸‰æ–¹AIæ¨¡å‹ï¼ˆMiMo-V2-Flashï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,Claude,åç«¯"/> <meta itemprop="datePublished" content="2025-12-23T03:27:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²äº‘ä¸€é¹¤"/> <meta itemprop="url" content="https://juejin.cn/user/729731452122382"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code æ¥å…¥ç¬¬ä¸‰æ–¹AIæ¨¡å‹ï¼ˆMiMo-V2-Flashï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731452122382/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²äº‘ä¸€é¹¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:27:03.000Z" title="Tue Dec 23 2025 03:27:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>è¿™é‡Œç”¨å‰å‡ å¤©æ–°å‡ºçš„å°ç±³è‡ªç ” AI å¤§æ¨¡å‹ MiMo-V2-Flash ä¸¾ä¾‹ï¼Œè¿›è¡Œæ¥å…¥ç¬¬ä¸‰æ–¹æ¨¡å‹ API çš„é…ç½®</p>
<p>å…¶ä»–ç¬¬ä¸‰æ–¹æ¨¡å‹çš„æ¥å…¥æ–¹å¼å¯ä»¥ä½œä¸ºå‚è€ƒï¼Œæ€»ä½“æ€è·¯æ˜¯å·®ä¸å¤šçš„</p>
<h2 data-id="heading-1">æ­¥éª¤ 1ï¼šå®‰è£… Claude Code CLI</h2>
<pre><code class="hljs language-bash" lang="bash">npm install -g @anthropic-ai/claude-code
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd10c4c8ccc14607af050ac64b855871~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065223&amp;x-signature=L2A0%2BRC4n%2FhA1izmbGZ%2FQMQmrSc%3D" alt="1.png" loading="lazy"/></p>
<p>é€šè¿‡ <code>claude -- v</code> æŸ¥çœ‹ç‰ˆæœ¬å·ï¼Œæµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/794c6fa4acca426cbc5f1cf6e700714b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065223&amp;x-signature=qUYGgYPyYnuic0VtuG2Htg0c0EY%3D" alt="2.png" loading="lazy"/></p>
<p>æˆåŠŸæ‰“å°ç‰ˆæœ¬å·ä¸º â€œv2.0.75â€</p>
<p>ä¸è¿‡åŒæ—¶ä¹Ÿæç¤º Claude Code åœ¨å’±çš„åœ°åŒºä¸å¯ç”¨</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦è®¾ç½®è®©å®ƒè·³è¿‡ç™»å½•</p>
<h2 data-id="heading-2">æ­¥éª¤ 2ï¼šè·³è¿‡ç™»å½•</h2>
<p>åœ¨ç”µè„‘ä¸­å…¨å±€æœç´¢æ‰¾åˆ° <code>.claude.json</code> æ–‡ä»¶ï¼ˆä¸€èˆ¬åœ¨ C:\Users\ç”¨æˆ·åç›®å½•ä¸‹ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3ca166f5fcd4509af449e01c5053993~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065223&amp;x-signature=C773ZIoRXkavn8U4M82iLfDVELs%3D" alt="3.png" loading="lazy"/></p>
<p>æ‰“å¼€æ–‡ä»¶æ·»åŠ ä¸‹é¢çš„é…ç½®</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"hasCompletedOnboarding"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/583de8c114c249f898bbb9ac12ae26ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065223&amp;x-signature=wNu7Q%2BKB0NnDoYdjKFE8ViN3pfs%3D" alt="4.png" loading="lazy"/></p>
<h2 data-id="heading-3">æ­¥éª¤ 3ï¼šæ·»åŠ å°ç±³é…ç½®æ–‡ä»¶</h2>
<p>åœ¨<code>.claude.json</code> æ–‡ä»¶åŒçº§ç›®å½•ä¸‹æ‰¾åˆ° <code>.claude/ </code>æ–‡ä»¶å¤¹</p>
<p>è¿›å…¥æ–‡ä»¶å¤¹å¹¶æ–°å»º <code>settings.json</code> æ–‡ä»¶</p>
<p>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œå…¶ä¸­ <code>ANTHROPIC_AUTH_TOKEN</code> å€¼ä¸ºä½ è‡ªå·±ç”³è¯·çš„ key</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"ANTHROPIC_BASE_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://api.xiaomimimo.com/anthropic"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ANTHROPIC_AUTH_TOKEN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åœ¨è¿™é‡Œå¡«å†™ä½ è‡ªå·±ç”³è¯·çš„ key"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ANTHROPIC_DEFAULT_OPUS_MODEL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mimo-v2-flash"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ANTHROPIC_DEFAULT_SONNET_MODEL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mimo-v2-flash"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ANTHROPIC_DEFAULT_HAIKU_MODEL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mimo-v2-flash"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
<p>è·å– API Key æ­¥éª¤ï¼š</p>
<p>è®¿é—®å®˜æ–¹é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.xiaomimimo.com%2F%23%2Fconsole%2Fapi-keys" target="_blank" title="https://platform.xiaomimimo.com/#/console/api-keys" ref="nofollow noopener noreferrer">platform.xiaomimimo.com/#/console/aâ€¦</a> -&gt; ç‚¹å‡»â€œæ–°å»º API keyâ€æŒ‰é’® -&gt; è¾“å…¥åç§°ä»¥åˆ›å»ºæ–°çš„ API Keyã€‚</p>
<p>æ³¨æ„ï¼API Key ä»…åœ¨åˆ›å»ºæ—¶å¯è§å¯å¤åˆ¶ï¼Œè¯·å¦¥å–„ä¿å­˜ã€‚</p>
<h2 data-id="heading-4">æ­¥éª¤ 4ï¼šå¯åŠ¨ Claude Code</h2>
<p>ä»¥ä¸Šé…ç½®å®Œæˆåï¼Œåœ¨æ¡Œé¢æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ‘è¿™é‡Œå–åä¸ºâ€œclaude-xiaomiâ€ï¼Œé€šè¿‡ vscode æ‰“å¼€é¡¹ç›®ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ <code>claude</code> å¹¶æŒ‰å›è½¦ï¼Œå®ƒä¼šè¯¢é—®ä½ æ˜¯å¦å…è®¸ Claude Code è¯»å–å†™å…¥æˆ–æ‰§è¡Œæ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä¸Šä¸‹ç®­å¤´é€‰æ‹© <code>yesï¼Œproceed</code>ï¼Œå¹¶æŒ‰å›è½¦ç¡®è®¤</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79ca1599b6ba42f0ae0ae7021129ccb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065223&amp;x-signature=ERfP5Xpxg%2FNjuOIGTJQE0Gb65y8%3D" alt="5.png" loading="lazy"/></p>
<p>ç„¶åå‡ºç°è¿™ä¸ªæ¬¢è¿ç•Œé¢ï¼Œè‡³æ­¤ä¸ºæ­¢ï¼ŒClaude Code æ¥å…¥ MiMo-V2-Flash æ¨¡å‹ å·²ç»é…ç½®å®Œæˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e43d64c66d8142758f4aa123b988c1f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065223&amp;x-signature=H2MiCBlBcLe5cc3Q3eU4RxbuJUw%3D" alt="6.png" loading="lazy"/></p>
<p>ä¸‹é¢æˆ‘å°±å¯ä»¥ç›´æ¥è¾“å…¥æ–‡å­—å’Œä»–å¯¹è¯äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1bdfd49d81a4de38aded050b8bfef94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065223&amp;x-signature=vktnYXm2nfv92vxTqhZ%2B%2FLhL5KI%3D" alt="7.png" loading="lazy"/></p>
<h2 data-id="heading-5">æ­¥éª¤ 5ï¼šå…³é—­ Claude Code æ€è€ƒæ¨¡å¼</h2>
<p>MiMo å®˜ç½‘è¯´ MiMo-V2-Flash æ¨¡å‹æš‚ä¸é€‚é… Claude Code æ€è€ƒæ¨¡å¼ï¼Œä¸‹é¢æ˜¯å…³é—­æ­¥éª¤</p>
<p>å‘½ä»¤è¡Œè¾“å…¥ <code>/config </code> -&gt; å›è½¦ -&gt; ä¸Šä¸‹ç®­å¤´é€‰æ‹© <code>Thinking mode</code> é€‰é¡¹ï¼Œå›è½¦åˆ‡æ¢é€‰é¡¹å€¼ true æˆ–è€… falseï¼ˆé»˜è®¤ä¸º trueï¼‰-&gt; æŒ‰ ESC è¿”å›</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a93795fa5e514e6db696747f23b62b40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065223&amp;x-signature=LeTvJyWEK2IyoN8X3g5FeyQIXdM%3D" alt="8.png" loading="lazy"/></p>
<h2 data-id="heading-6">æ­¥éª¤ 6ï¼šå¼€å§‹ Claude Code ä½¿ç”¨å§</h2>
<p>ä»¥åæ¯æ¬¡éœ€è¦ä½¿ç”¨ Claude Code çš„æ—¶å€™ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ <code>claude</code>å³å¯å”¤é†’å¯¹è¯æ¡†</p>
<p>ä¹Ÿå¯ä»¥åœ¨ vscode ä¸­ç‚¹å‡»å³ä¸Šè§’çš„ Claude Code å›¾æ ‡å”¤é†’å¯¹è¯æ¡†ï¼Œ<code>Claude Code for VS Code</code> è¿™ä¸ªæ’ä»¶å¥½åƒè‡ªåŠ¨å°±å®‰è£…åˆ°äº† vscode ä¸­ï¼ˆåæ­£æˆ‘æ˜¯æ²¡æ³¨æ„å•¥æ—¶å€™å‡ºç°çš„ï¼‰</p>
<p>ç„¶åå°±è·Ÿåœ¨ cursor æˆ–è€… trae ä¸€æ ·è¿›è¡Œä½¿ç”¨å³å¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7d516614db7453a8574b26870afcc5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065223&amp;x-signature=iN6e9AIDYTj1hL0uodNMmiI6ZCk%3D" alt="9.png" loading="lazy"/></p>
<h2 data-id="heading-7">å‚è€ƒé“¾æ¥</h2>
<p>claude å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2Fdocs%2Fzh-CN%2Fquickstart" target="_blank" title="https://code.claude.com/docs/zh-CN/quickstart" ref="nofollow noopener noreferrer">code.claude.com/docs/zh-CN/â€¦</a></p>
<p>xiaomimimo å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.xiaomimimo.com%2F%23%2Fdocs%2Fintegration%2Fclaude-code" target="_blank" title="https://platform.xiaomimimo.com/#/docs/integration/claude-code" ref="nofollow noopener noreferrer">platform.xiaomimimo.com/#/docs/inteâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çªç ´LLMæ•ˆç‡ç“¶é¢ˆï¼šå¤šæ ‡è®°é¢„æµ‹(MTP)æŠ€æœ¯æ·±åº¦è§£æä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7586615716905746432</link>    <guid>https://juejin.cn/post/7586615716905746432</guid>    <pubDate>2025-12-23T03:29:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586615716905746432" data-draft-id="7586570254861778984" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çªç ´LLMæ•ˆç‡ç“¶é¢ˆï¼šå¤šæ ‡è®°é¢„æµ‹(MTP)æŠ€æœ¯æ·±åº¦è§£æä¸å®æˆ˜"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-23T03:29:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾é†’"/> <meta itemprop="url" content="https://juejin.cn/user/708512558088669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹åŸç†å‰–æâ€”â€”çªç ´LLMæ•ˆç‡ç“¶é¢ˆï¼šå¤šæ ‡è®°é¢„æµ‹(MTP)æŠ€æœ¯æ·±åº¦è§£æä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/708512558088669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾é†’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:29:20.000Z" title="Tue Dec 23 2025 03:29:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è½åœ°çš„è¿‡ç¨‹ä¸­ï¼Œâ€œç”Ÿæˆæ•ˆç‡â€å§‹ç»ˆæ˜¯ç»•ä¸å¼€çš„æ ¸å¿ƒç—›ç‚¹â€”â€”ä¼ ç»Ÿè‡ªå›å½’æ¨¡å‹åƒâ€œæŒ¤ç‰™è†â€ä¸€æ ·é€è¯å…ƒï¼ˆTokenï¼‰ç”Ÿæˆæ–‡æœ¬ï¼Œä¸ä»…æ¨ç†é€Ÿåº¦æ…¢ï¼Œè®­ç»ƒæ•ˆç‡ä¹Ÿéš¾ä»¥æ»¡è¶³å¤§è§„æ¨¡åº”ç”¨éœ€æ±‚ã€‚è€Œ<strong>å¤šæ ‡è®°é¢„æµ‹ï¼ˆMulti-Token Prediction, MTPï¼‰</strong> ä½œä¸ºè§£å†³è¿™ä¸€é—®é¢˜çš„å…³é”®æŠ€æœ¯ï¼Œæ­£åœ¨æˆä¸ºLLMæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæ–¹å‘ã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯æœ¬è´¨ã€æ‰§è¡Œæµç¨‹ã€å®æˆ˜ç¤ºä¾‹åˆ°è½åœ°åº”ç”¨ï¼Œå…¨æ–¹ä½æ‹†è§£MTPæŠ€æœ¯ã€‚</p>
<h2 data-id="heading-1">MTPæ ¸å¿ƒå®šä¹‰ï¼šä¸æ­¢äºâ€œä¸€æ¬¡ç”Ÿæˆå¤šä¸ªTokenâ€</h2>
<p>å¤šæ ‡è®°é¢„æµ‹ï¼ˆMTPï¼‰æ˜¯ä¸€ç§è®©å¤§è¯­è¨€æ¨¡å‹åœ¨<strong>å•æ¬¡å‰å‘ä¼ æ’­ä¸­åŒæ—¶é¢„æµ‹å¤šä¸ªåç»­è¯å…ƒ</strong>çš„æŠ€æœ¯ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯æ‰“ç ´ä¼ ç»Ÿâ€œå•Tokené€æ¬¡ç”Ÿæˆâ€çš„æ•ˆç‡æ·é”ã€‚</p>
<p>ä¸ä¼ ç»Ÿå•æ ‡è®°é¢„æµ‹ï¼ˆNTPï¼‰çš„æ ¸å¿ƒå·®å¼‚ï¼š</p>
<ul>
<li>ä¼ ç»ŸNTPï¼šè¾“å…¥æ–‡æœ¬â†’æ¨¡å‹é¢„æµ‹ç¬¬t+1ä¸ªTokenâ†’ä»¥t+1ä¸ºæ–°è¾“å…¥â†’é¢„æµ‹t+2ä¸ªTokenï¼ˆå¾ªç¯å¾€å¤ï¼‰ï¼›</li>
<li>MTPï¼šè¾“å…¥æ–‡æœ¬â†’æ¨¡å‹å•æ¬¡å‰å‘ä¼ æ’­â†’åŒæ—¶é¢„æµ‹t+1ã€t+2â€¦t+nä¸ªTokenï¼Œç›´æ¥å®Œæˆå¤šæ­¥ç”Ÿæˆã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼ŒMTPè®©æ¨¡å‹ä»â€œä¸€æ­¥èµ°ä¸€æ ¼â€å˜æˆâ€œä¸€æ­¥èµ°å¤šæ ¼â€ï¼Œæ—¢æå‡è®­ç»ƒæ—¶çš„ä¿¡å·å¯†åº¦ï¼Œåˆå¤§å¹…é™ä½æ¨ç†æ—¶çš„è¿­ä»£æ¬¡æ•°ã€‚</p>
<h2 data-id="heading-2">MTPæ ¸å¿ƒæ‰§è¡Œæµç¨‹</h2>
<p>MTPçš„æ‰§è¡Œæµç¨‹åˆ†ä¸º<strong>è®­ç»ƒé˜¶æ®µ</strong>å’Œ<strong>æ¨ç†é˜¶æ®µ</strong>ï¼Œå…¶ä¸­æ¨ç†é˜¶æ®µç»“åˆâ€œæ¨æµ‹è§£ç ï¼ˆSpeculative Decodingï¼‰â€æ—¶æ•ˆæœæœ€ä¼˜ã€‚</p>
<h3 data-id="heading-3">1. åŸºç¡€MTPè®­ç»ƒæµç¨‹</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8bdb87ed6d14384bfe67b8ae906a43d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YaS:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065360&amp;x-signature=FHOJWkUttJX1tday%2Bfper%2F%2FQVyU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æµç¨‹æ‹†è§£</strong>ï¼š</p>
<ol>
<li>è¾“å…¥æ–‡æœ¬ç»TokenåŒ–è½¬ä¸ºåºåˆ—<code>Xâ‚,Xâ‚‚...Xâ‚œ</code>ï¼›</li>
<li>å…±äº«Transformerç¼–ç å™¨å°†åºåˆ—ç¼–ç ä¸ºä¸Šä¸‹æ–‡è¡¨å¾<code>Hâ‚œ</code>ï¼›</li>
<li>å¤šä¸ªç‹¬ç«‹çš„MTPè¾“å‡ºå¤´åŸºäº<code>Hâ‚œ</code>ï¼Œå¹¶è¡Œé¢„æµ‹<code>t+1</code>åˆ°<code>t+n</code>ä¸ªTokenï¼›</li>
<li>è®¡ç®—æ¯ä¸ªMTPå¤´çš„é¢„æµ‹æŸå¤±ï¼ˆäº¤å‰ç†µï¼‰ï¼Œæ€»æŸå¤±ä¸ºæ‰€æœ‰å¤´æŸå¤±çš„å¹³å‡å€¼ï¼›</li>
<li>åå‘ä¼ æ’­æ›´æ–°æ¨¡å‹å‚æ•°ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ•›ã€‚</li>
</ol>
<h3 data-id="heading-4">2. MTP+æ¨æµ‹è§£ç æ¨ç†æµç¨‹ï¼ˆä¸»æµè½åœ°æ–¹æ¡ˆï¼‰</h3>
<p>å•çº¯çš„MTPå¯èƒ½å­˜åœ¨â€œå¤šTokené¢„æµ‹ä¸è¿è´¯â€çš„é—®é¢˜ï¼Œç»“åˆæ¨æµ‹è§£ç åï¼Œæ—¢èƒ½ä¿æ•ˆç‡åˆèƒ½ä¿è´¨é‡ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75fac2031b92462b86c9ccb07c36a6e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YaS:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065360&amp;x-signature=yBzVOyNIwuotLibktiuEBvZ1pGo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æµç¨‹æ‹†è§£</strong>ï¼š</p>
<ol>
<li>è½»é‡çº§MTPâ€œè‰ç¨¿æ¨¡å‹â€åŸºäºè¾“å…¥ä¸Šä¸‹æ–‡ï¼Œå¹¶è¡Œç”ŸæˆKä¸ªå€™é€‰Tokenï¼ˆæ¯”å¦‚K=4ï¼‰ï¼›</li>
<li>é«˜ç²¾åº¦ä¸»æ¨¡å‹é€šè¿‡<strong>å•æ¬¡å‰å‘ä¼ æ’­</strong>ï¼Œæ‰¹é‡éªŒè¯è¿™Kä¸ªå€™é€‰Tokençš„åˆç†æ€§ï¼›</li>
<li>è‹¥éªŒè¯é€šè¿‡ï¼ˆDeepSeekå®æµ‹æ¥å—ç‡85%-90%ï¼‰ï¼Œç›´æ¥è¾“å‡ºè¿™Kä¸ªTokenï¼Œæ¨¡å‹æ­¥æ•°ä¸€æ¬¡æ€§+Kï¼›</li>
<li>è‹¥éƒ¨åˆ†TokenéªŒè¯å¤±è´¥ï¼Œä»…ä¿ç•™é€šè¿‡çš„Tokenï¼Œé‡æ–°ç”Ÿæˆè¢«æ‹’ç»çš„éƒ¨åˆ†ï¼›</li>
<li>é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°ç”Ÿæˆæ»¡è¶³é•¿åº¦è¦æ±‚çš„æ–‡æœ¬ã€‚</li>
</ol>
<h3 data-id="heading-5">3. DeepSeekä¾èµ–é“¾å¼MTPæ¶æ„ï¼ˆä¿è¿è´¯çš„è¿›é˜¶æ–¹æ¡ˆï¼‰</h3>
<p>ä¸ºè§£å†³â€œç‹¬ç«‹å¤šå¤´MTPç”Ÿæˆä¸è¿è´¯â€çš„é—®é¢˜ï¼ŒDeepSeekè®¾è®¡äº†ä¾èµ–é“¾å¼MTPæ¶æ„ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47f0c2adf901461ea3b724ef06529c95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Im-6YaS:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767065360&amp;x-signature=%2BtT0LazpV1e%2FixwrjSC8xE0tgrI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
æ ¸å¿ƒé€»è¾‘ï¼šåä¸€ä¸ªMTPå¤´çš„é¢„æµ‹ä¾èµ–å‰ä¸€ä¸ªå¤´çš„è¾“å‡ºè¡¨å¾ï¼Œæ—¢ä¿ç•™äº†â€œå¤šTokené¢„æµ‹â€çš„æ•ˆç‡ï¼Œåˆä¿è¯äº†æ–‡æœ¬çš„è¯­ä¹‰è¿è´¯æ€§ã€‚</p>
<h2 data-id="heading-6">MTPå®æˆ˜ç¤ºä¾‹ï¼šæç®€PyTorchå®ç°æ¡†æ¶</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€åŒ–ç‰ˆçš„MTPæ¨¡å‹å®ç°ï¼Œå¸®åŠ©ä½ ç†è§£æ ¸å¿ƒä»£ç é€»è¾‘ï¼ˆä»…ä¿ç•™å…³é”®æ¨¡å—ï¼Œæ— å¤æ‚ä¼˜åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim

<span class="hljs-comment"># è¶…å‚æ•°è®¾ç½®</span>
VOCAB_SIZE = <span class="hljs-number">10000</span>  <span class="hljs-comment"># è¯æ±‡è¡¨å¤§å°</span>
EMBED_DIM = <span class="hljs-number">256</span>     <span class="hljs-comment"># åµŒå…¥ç»´åº¦</span>
HIDDEN_DIM = <span class="hljs-number">512</span>    <span class="hljs-comment"># Transformeréšè—å±‚ç»´åº¦</span>
NUM_HEADS = <span class="hljs-number">8</span>       <span class="hljs-comment"># æ³¨æ„åŠ›å¤´æ•°</span>
NUM_LAYERS = <span class="hljs-number">2</span>      <span class="hljs-comment"># Transformerå±‚æ•°</span>
MTP_NUM = <span class="hljs-number">3</span>         <span class="hljs-comment"># ä¸€æ¬¡é¢„æµ‹3ä¸ªTokenï¼ˆt+1/t+2/t+3ï¼‰</span>

<span class="hljs-comment"># 1. å…±äº«Transformerç¼–ç å™¨ï¼ˆåŸºç¡€ç¼–ç æ¨¡å—ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedEncoder</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.embedding = nn.Embedding(VOCAB_SIZE, EMBED_DIM)
        self.transformer_encoder = nn.TransformerEncoder(
            nn.TransformerEncoderLayer(EMBED_DIM, NUM_HEADS, HIDDEN_DIM),
            num_layers=NUM_LAYERS
        )
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-comment"># x: [seq_len, batch_size]</span>
        embed = self.embedding(x)  <span class="hljs-comment"># [seq_len, batch_size, embed_dim]</span>
        enc_out = self.transformer_encoder(embed)  <span class="hljs-comment"># [seq_len, batch_size, embed_dim]</span>
        <span class="hljs-keyword">return</span> enc_out[-<span class="hljs-number">1</span>]  <span class="hljs-comment"># è¿”å›æœ€åä¸€ä¸ªTokençš„è¡¨å¾: [batch_size, embed_dim]</span>

<span class="hljs-comment"># 2. MTPå¤šè¾“å‡ºå¤´ï¼ˆå¹¶è¡Œé¢„æµ‹å¤šä¸ªTokenï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MTPModel</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.encoder = SharedEncoder()
        <span class="hljs-comment"># å®šä¹‰MTP_NUMä¸ªç‹¬ç«‹çš„è¾“å‡ºå¤´</span>
        self.mtp_heads = nn.ModuleList([
            nn.Linear(EMBED_DIM, VOCAB_SIZE) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(MTP_NUM)
        ])
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-comment"># x: [seq_len, batch_size]</span>
        context_feat = self.encoder(x)  <span class="hljs-comment"># [batch_size, embed_dim]</span>
        <span class="hljs-comment"># æ¯ä¸ªå¤´å¹¶è¡Œé¢„æµ‹ä¸€ä¸ªToken</span>
        mtp_outputs = [head(context_feat) <span class="hljs-keyword">for</span> head <span class="hljs-keyword">in</span> self.mtp_heads]
        <span class="hljs-comment"># è¿”å›t+1/t+2/t+3çš„é¢„æµ‹logits: [MTP_NUM, batch_size, vocab_size]</span>
        <span class="hljs-keyword">return</span> torch.stack(mtp_outputs)

<span class="hljs-comment"># 3. è®­ç»ƒæµç¨‹ç¤ºä¾‹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">train_mtp_model</span>():
    model = MTPModel()
    criterion = nn.CrossEntropyLoss()  <span class="hljs-comment"># äº¤å‰ç†µæŸå¤±</span>
    optimizer = optim.Adam(model.parameters(), lr=<span class="hljs-number">1e-4</span>)
    
    <span class="hljs-comment"># æ¨¡æ‹Ÿè®­ç»ƒæ•°æ®ï¼šè¾“å…¥åºåˆ—[1,2,3,4]ï¼Œç›®æ ‡Tokenä¸º[5,6,7]ï¼ˆt+1=5, t+2=6, t+3=7ï¼‰</span>
    batch_size = <span class="hljs-number">2</span>
    input_seq = torch.tensor([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>], [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]]).T  <span class="hljs-comment"># [seq_len=4, batch_size=2]</span>
    target_tokens = torch.tensor([[<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>], [<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>]]).T    <span class="hljs-comment"># [MTP_NUM=3, batch_size=2]</span>
    
    model.train()
    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):
        optimizer.zero_grad()
        <span class="hljs-comment"># å‰å‘ä¼ æ’­ï¼šè·å–3ä¸ªTokençš„é¢„æµ‹logits</span>
        mtp_logits = model(input_seq)  <span class="hljs-comment"># [3, 2, 10000]</span>
        
        <span class="hljs-comment"># è®¡ç®—æ€»æŸå¤±ï¼šæ¯ä¸ªMTPå¤´çš„æŸå¤±ç›¸åŠ </span>
        total_loss = <span class="hljs-number">0.0</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(MTP_NUM):
            <span class="hljs-comment"># logits: [2, 10000], target: [2]</span>
            loss = criterion(mtp_logits[i], target_tokens[i])
            total_loss += loss
        
        <span class="hljs-comment"># åå‘ä¼ æ’­</span>
        total_loss.backward()
        optimizer.step()
        
        <span class="hljs-keyword">if</span> (epoch+<span class="hljs-number">1</span>) % <span class="hljs-number">20</span> == <span class="hljs-number">0</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Epoch <span class="hljs-subst">{epoch+<span class="hljs-number">1</span>}</span>, Total Loss: <span class="hljs-subst">{total_loss.item():<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># æ‰§è¡Œè®­ç»ƒ</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    train_mtp_model()
</code></pre>
<p><strong>ä»£ç å…³é”®è¯´æ˜</strong>ï¼š</p>
<ol>
<li><code>SharedEncoder</code>ï¼šå…±äº«çš„Transformerç¼–ç å™¨ï¼Œä¸ºæ‰€æœ‰MTPå¤´æä¾›ç»Ÿä¸€çš„ä¸Šä¸‹æ–‡è¡¨å¾ï¼›</li>
<li><code>MTPModel</code>ï¼šåŒ…å«3ä¸ªç‹¬ç«‹çš„çº¿æ€§è¾“å‡ºå¤´ï¼Œå¹¶è¡Œé¢„æµ‹<code>t+1</code>ã€<code>t+2</code>ã€<code>t+3</code>ä¸‰ä¸ªTokenï¼›</li>
<li>è®­ç»ƒé˜¶æ®µï¼šè®¡ç®—æ¯ä¸ªMTPå¤´çš„äº¤å‰ç†µæŸå¤±ï¼Œæ±‚å’Œåä½œä¸ºæ€»æŸå¤±åå‘ä¼ æ’­ï¼Œè®©æ¨¡å‹å­¦ä¹ â€œä¸€æ¬¡é¢„æµ‹å¤šä¸ªTokenâ€çš„èƒ½åŠ›ï¼›</li>
<li>è¾“å‡ºç¤ºä¾‹ï¼šè®­ç»ƒ100è½®åæŸå¤±ä¼šé€æ­¥ä¸‹é™ï¼Œè¯´æ˜æ¨¡å‹å·²å­¦ä¼šä»è¾“å…¥<code>[1,2,3,4]</code>é¢„æµ‹ç›®æ ‡<code>[5,6,7]</code>ã€‚</li>
</ol>
<h2 data-id="heading-7">MTP vs ä¼ ç»Ÿå•æ ‡è®°é¢„æµ‹ï¼ˆNTPï¼‰æ ¸å¿ƒå¯¹æ¯”</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»Ÿå•æ ‡è®°é¢„æµ‹ï¼ˆNTPï¼‰</th><th>å¤šæ ‡è®°é¢„æµ‹ï¼ˆMTPï¼‰</th></tr></thead><tbody><tr><td>é¢„æµ‹æ–¹å¼</td><td>æ¯æ¬¡ç”Ÿæˆ1ä¸ªToken</td><td>ä¸€æ¬¡ç”Ÿæˆnä¸ªToken</td></tr><tr><td>æ¨ç†é€Ÿåº¦</td><td>åŸºå‡†å€¼ï¼ˆ1å€ï¼‰</td><td>1.8~2.6å€ï¼ˆç»“åˆæ¨æµ‹è§£ç ï¼‰</td></tr><tr><td>è®­ç»ƒä¿¡å·å¯†åº¦</td><td>ä½ï¼ˆæ¯æ­¥1ä¸ªæŸå¤±ï¼‰</td><td>é«˜ï¼ˆæ¯æ­¥nä¸ªæŸå¤±ï¼‰</td></tr><tr><td>æ–‡æœ¬è¿è´¯æ€§</td><td>ä¸€èˆ¬ï¼ˆä»…ä¾èµ–å‰1ä¸ªTokenï¼‰</td><td>ä¼˜ç§€ï¼ˆä¾èµ–é“¾å¼è¡¨å¾ï¼‰</td></tr><tr><td>ç¡¬ä»¶èµ„æºåˆ©ç”¨ç‡</td><td>ä½ï¼ˆå•æ¬¡å‰å‘ä¼ æ’­ä»…ç”¨1æ¬¡ï¼‰</td><td>é«˜ï¼ˆå•æ¬¡å‰å‘ä¼ æ’­ç”¨næ¬¡ï¼‰</td></tr><tr><td>å…¸å‹è½åœ°åœºæ™¯</td><td>å°æ¨¡å‹ã€ä½å»¶è¿Ÿè¦æ±‚åœºæ™¯</td><td>å¤§æ¨¡å‹ã€é•¿æ–‡æœ¬ç”Ÿæˆã€ç§»åŠ¨ç«¯</td></tr></tbody></table>
<h2 data-id="heading-8">MTPçš„è½åœ°åº”ç”¨ä¸æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-9">1. æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li><strong>æ•ˆç‡ç¿»å€</strong>ï¼šæ¨ç†é€Ÿåº¦æå‡1.8~2.6å€ï¼Œè®­ç»ƒæ—¶ä¿¡å·å¯†åº¦æ›´é«˜ï¼Œæ”¶æ•›æ›´å¿«ï¼›</li>
<li><strong>è¯­ä¹‰æ›´è¿è´¯</strong>ï¼šä¾èµ–é“¾å¼æ¶æ„è®©å¤šTokenç”Ÿæˆç¬¦åˆè¯­è¨€é€»è¾‘ï¼Œé¿å…â€œå‰è¨€ä¸æ­åè¯­â€ï¼›</li>
<li><strong>ç¡¬ä»¶é€‚é…æ€§å¥½</strong>ï¼šè”å‘ç§‘å¤©ç‘9400+ç­‰èŠ¯ç‰‡å·²é›†æˆMTPç¡¬ä»¶åŠ é€Ÿï¼Œé€‚é…ç§»åŠ¨ç«¯éƒ¨ç½²ï¼›</li>
<li><strong>æˆæœ¬é™ä½</strong>ï¼šå‡å°‘æ¨ç†æ—¶çš„å‰å‘ä¼ æ’­æ¬¡æ•°ï¼Œå¤§å¹…é™ä½ç®—åŠ›æ¶ˆè€—ï¼ˆå°ç±³MiMoæ¨¡å‹ä»…ç”¨1/50ç®—åŠ›è¾¾åˆ°åŒç­‰æ€§èƒ½ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-10">2. å…¸å‹è½åœ°æ¡ˆä¾‹</h3>
<ul>
<li><strong>DeepSeek-V3</strong>ï¼šä¾èµ–é“¾å¼MTP+æ¨æµ‹è§£ç ï¼Œæ¨ç†é€Ÿåº¦æå‡1.8å€ï¼Œç”Ÿæˆè´¨é‡ä¸åŸç”Ÿæ¨¡å‹æŒå¹³ï¼›</li>
<li><strong>å°ç±³MiMoæ¨¡å‹</strong>ï¼šMTP+åœ¨çº¿ç­–ç•¥è’¸é¦ï¼Œ32å¹¶å‘æ—¶æ¨ç†é€Ÿåº¦è¾¾1146 Tokens/ç§’ï¼›</li>
<li><strong>è”å‘ç§‘å¤©ç‘9400+</strong>ï¼šç¡¬ä»¶çº§MTPåŠ é€Ÿï¼Œæ”¯æŒæ‰‹æœºç«¯é«˜æ•ˆè¿è¡ŒQwen3ç­‰å¤§æ¨¡å‹ã€‚</li>
</ul>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>MTPæŠ€æœ¯çš„æ ¸å¿ƒä»·å€¼ï¼Œæ˜¯åœ¨ä¸ç‰ºç‰²LLMç”Ÿæˆè´¨é‡çš„å‰æä¸‹ï¼Œè§£å†³äº†è‡ªå›å½’æ¨¡å‹â€œé€Tokenç”Ÿæˆâ€çš„æ•ˆç‡ç“¶é¢ˆã€‚ä»æŠ€æœ¯æ¼”è¿›æ¥çœ‹ï¼Œæœªæ¥MTPå°†æœç€â€œæ›´é«˜å¹¶è¡Œåº¦ã€æ›´å¼ºè¯­ä¹‰è¿è´¯æ€§ã€æ›´ä½ç¡¬ä»¶ä¾èµ–â€æ–¹å‘å‘å±•ï¼š</p>
<ol>
<li>ç»“åˆMoEï¼ˆæ··åˆä¸“å®¶æ¨¡å‹ï¼‰ï¼Œè¿›ä¸€æ­¥æå‡MTPçš„å¹¶è¡Œè®¡ç®—æ•ˆç‡ï¼›</li>
<li>ä¼˜åŒ–ä¾èµ–é“¾å¼æ¶æ„ï¼Œå¹³è¡¡â€œå¹¶è¡Œåº¦â€ä¸â€œè¿è´¯æ€§â€ï¼›</li>
<li>è½»é‡åŒ–MTPæ¨¡å—ï¼Œè®©ä¸­å°æ¨¡å‹ä¹Ÿèƒ½äº«å—æ•ˆç‡æå‡ã€‚</li>
</ol>
<p>å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œç†è§£MTPçš„æ ¸å¿ƒé€»è¾‘ï¼ˆå…±äº«ç¼–ç +å¤šè¾“å‡ºå¤´+æŸå¤±èåˆï¼‰ï¼Œå¹¶æŒæ¡â€œMTP+æ¨æµ‹è§£ç â€çš„è½åœ°èŒƒå¼ï¼Œå°†æˆä¸ºä¼˜åŒ–LLMåº”ç”¨çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Tauri (23)â€”â€”ä¸ºä»€ä¹ˆæ¯å°ç”µè„‘ä½ç½®æ˜¾ç¤ºæ•ˆæœä¸ä¸€è‡´ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7586555198116085766</link>    <guid>https://juejin.cn/post/7586555198116085766</guid>    <pubDate>2025-12-23T03:01:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586555198116085766" data-draft-id="7586585498744242230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Tauri (23)â€”â€”ä¸ºä»€ä¹ˆæ¯å°ç”µè„‘ä½ç½®æ˜¾ç¤ºæ•ˆæœä¸ä¸€è‡´ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,APP,Rust"/> <meta itemprop="datePublished" content="2025-12-23T03:01:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨å¤œå¯»æ™´å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/1943592288391496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Tauri (23)â€”â€”ä¸ºä»€ä¹ˆæ¯å°ç”µè„‘ä½ç½®æ˜¾ç¤ºæ•ˆæœä¸ä¸€è‡´ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592288391496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨å¤œå¯»æ™´å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:01:25.000Z" title="Tue Dec 23 2025 03:01:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åšè·¨å¹³å°æ¡Œé¢åº”ç”¨ï¼ˆTauri / Electron / Flutter Desktopï¼‰æ—¶ï¼Œ<strong>â€œçª—å£å°ºå¯¸/ä½ç½®åœ¨ä¸åŒç”µè„‘ä¸Šä¸ä¸€è‡´â€</strong> æ˜¯éå¸¸é«˜é¢‘ã€ä¸”éå¸¸éšè”½çš„å‘ï¼š</p>
<ul>
<li>åŒä¸€ä»½ä»£ç ï¼Œåœ¨ä½ ç”µè„‘ä¸Šå®Œç¾å±…ä¸­ï¼Œåœ¨åŒäº‹ç”µè„‘ä¸Šå´åä¸Š/åä¸‹ï¼›</li>
<li>å¤–æ¥æ˜¾ç¤ºå™¨ååˆå˜äº†ï¼›</li>
<li>Windows 125% ç¼©æ”¾æ—¶å°¤å…¶æ˜æ˜¾ã€‚</li>
</ul>
<p>æœ¬æ–‡ç»“åˆæˆ‘ä»¬ Coco åœ¨ Tauri é‡Œçš„çœŸå®ä»£ç ï¼ˆ<code>src-tauri/src/lib.rs:320-375</code>ï¼‰æ¥è§£é‡Šè¿™äº›å…³é”®è¯èƒŒåçš„â€œåæ ‡ä½“ç³»â€ï¼Œå¹¶æ€»ç»“æˆ‘ä»¬åœ¨é¡¹ç›®é‡Œä¼šé‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©ä»¥å <strong>ä¸€æ¬¡æ€§æŠŠ DPI/ç¼©æ”¾å‘å¡«å¹³</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. å…ˆçœ‹çœŸå®åœºæ™¯ï¼šæˆ‘ä»¬åœ¨åšä»€ä¹ˆï¼Ÿ</h2>
<p>Coco åœ¨æ˜¾ç¤ºä¸»çª—å£æ—¶ï¼Œä¼šæŠŠçª—å£ç§»åŠ¨åˆ° â€œå½“å‰é¼ æ ‡æ‰€åœ¨çš„æ˜¾ç¤ºå™¨â€ï¼Œå¹¶åšå±…ä¸­ï¼š</p>
<ul>
<li><code>show_coco</code> ä¼šè°ƒç”¨ <code>move_window_to_active_monitor</code>ï¼ˆ<code>src-tauri/src/lib.rs:261-295</code>ï¼‰</li>
<li><code>move_window_to_active_monitor</code> æ ¸å¿ƒé€»è¾‘åœ¨è¿™é‡Œï¼ˆ<code>src-tauri/src/lib.rs:320-375</code>ï¼‰</li>
</ul>
<p>ç”¨æˆ·é€‰ä¸­çš„å…³é”®ç‰‡æ®µï¼ˆ<code>src-tauri/src/lib.rs:352-357</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// 590 æ˜¯æˆ‘ä»¬ä¸»çª—å£çš„é»˜è®¤é«˜åº¦</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_height</span> = <span class="hljs-number">590</span> * scale_factor <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>;

<span class="hljs-comment">// Horizontal center uses actual width, vertical center uses 590 baseline</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_x</span> = monitor_position.x + (monitor_size.width <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span> - window_width) / <span class="hljs-number">2</span>;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_y</span> = monitor_position.y + (monitor_size.height <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span> - window_height) / <span class="hljs-number">2</span>;
</code></pre>
<p>ä½ ä¼šçœ‹åˆ°å‡ ä¸ªå…³é”®å­—ï¼š</p>
<ul>
<li><code>scale_factor</code>ï¼šç¼©æ”¾æ¯” / DPI ç¼©æ”¾å› å­</li>
<li><code>monitor_position</code> / <code>monitor_size</code>ï¼šå±å¹•ä½ç½®ä¸å°ºå¯¸</li>
<li><code>window_width</code> / <code>window_height</code>ï¼šçª—å£å®½é«˜</li>
<li><code>PhysicalPosition</code>ï¼šè®¾ç½®çª—å£ä½ç½®æ—¶é‡‡ç”¨ â€œç‰©ç†åæ ‡â€ï¼ˆ<code>src-tauri/src/lib.rs:358-360</code>ï¼‰</li>
</ul>
<p>é—®é¢˜çš„æ ¹æºå¾€å¾€å°±å‡ºåœ¨ï¼š<strong>è¿™äº›å˜é‡åˆ°åº•å±äºâ€œç‰©ç†åƒç´ â€è¿˜æ˜¯â€œé€»è¾‘åƒç´ â€ï¼Ÿå¦‚æœå•ä½æ··äº†ï¼Œå±…ä¸­å¿…ç„¶é”™ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">2. ä¸‰ä¸ªåƒç´ æ¦‚å¿µï¼šç‰©ç†åƒç´ ã€é€»è¾‘åƒç´ ã€ç¼©æ”¾æ¯”</h2>
<h3 data-id="heading-2">2.1 ç‰©ç†åƒç´ ï¼ˆPhysical Pixelï¼‰</h3>
<p>æ˜¾ç¤ºå™¨çš„çœŸå®åƒç´ ç‚¹ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>1920Ã—1080</li>
<li>2560Ã—1440</li>
<li>3840Ã—2160ï¼ˆ4Kï¼‰</li>
</ul>
<p>ç‰©ç†åƒç´ æ˜¯ç¡¬ä»¶å±‚é¢çš„ç½‘æ ¼ï¼Œ<strong>ä¸ä¼šå› ä¸ºç³»ç»Ÿç¼©æ”¾è€Œæ”¹å˜</strong>ã€‚</p>
<h3 data-id="heading-3">2.2 é€»è¾‘åƒç´ ï¼ˆLogical Pixel / DIP / Pointï¼‰</h3>
<p>æ“ä½œç³»ç»Ÿä¸ºäº†è®© UI åœ¨ä¸åŒ DPI ä¸Šçœ‹èµ·æ¥ â€œå·®ä¸å¤šå¤§â€ï¼Œå¼•å…¥äº† â€œè®¾å¤‡æ— å…³åƒç´ â€ã€‚</p>
<p>ç›´è§‰ç†è§£ï¼š</p>
<ul>
<li>UI çš„ <code>590px</code> æ›´æ¥è¿‘â€œé€»è¾‘åƒç´ â€</li>
<li>æ“ä½œç³»ç»Ÿ/æ¸²æŸ“å±‚ä¼šæŠŠé€»è¾‘åƒç´ æ˜ å°„åˆ°ç‰©ç†åƒç´ </li>
</ul>
<h3 data-id="heading-4">2.3 ç¼©æ”¾æ¯”ï¼ˆScale Factor / Device Pixel Ratioï¼‰</h3>
<p>ç¼©æ”¾æ¯”æè¿°ä¸¤è€…çš„å…³ç³»ï¼š</p>
<ul>
<li><code>physical = logical * scale_factor</code></li>
<li><code>logical = physical / scale_factor</code></li>
</ul>
<p>å…¸å‹å–å€¼ï¼š</p>
<ul>
<li>macOS Retinaï¼šç»å¸¸æ˜¯ <code>2.0</code></li>
<li>Windowsï¼šå¯èƒ½æ˜¯ <code>1.0 / 1.25 / 1.5 / 1.75 / 2.0 ...</code>ï¼ˆå°¤å…¶ 125%/150% éå¸¸å¸¸è§ï¼‰</li>
<li>å¤šæ˜¾ç¤ºå™¨æ—¶ï¼šä¸åŒå±å¹•å¯èƒ½ä¸åŒç¼©æ”¾æ¯”ï¼ˆ<strong>Per-monitor DPI</strong>ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5">3. ä¸ºä»€ä¹ˆæ¯ä¸ªäººç”µè„‘æ•ˆæœä¸ä¸€è‡´ï¼Ÿ</h2>
<h3 data-id="heading-6">3.1 æ¯ä¸ªäººçš„ç¼©æ”¾è®¾ç½®ä¸åŒï¼ˆå°¤å…¶ Windowsï¼‰</h3>
<p>åŒæ ·æ˜¯ 27 å¯¸ 2K å±ï¼š</p>
<ul>
<li>A è®¾ç½® 100%ï¼ˆ<code>scale_factor=1.0</code>ï¼‰</li>
<li>B è®¾ç½® 125%ï¼ˆ<code>scale_factor=1.25</code>ï¼‰</li>
<li>C è®¾ç½® 150%ï¼ˆ<code>scale_factor=1.5</code>ï¼‰</li>
</ul>
<p>å¦‚æœä½ çš„ä»£ç ç”¨ â€œå†™æ­»çš„åƒç´ å€¼â€ å»åšä½ç½®/å¤§å°è®¡ç®—ï¼Œä½†æ²¡æœ‰æ˜ç¡®å®ƒå±äºé€»è¾‘è¿˜æ˜¯ç‰©ç†ï¼Œå°±ä¼šå¯¼è‡´ <strong>æŸäº›æœºå™¨ä¸Šåç§»é‡å¤§</strong>ã€‚</p>
<h3 data-id="heading-7">3.2 å¤šæ˜¾ç¤ºå™¨ + ä¸åŒç¼©æ”¾æ¯”ï¼šåæ ‡ç³»ç»Ÿéšå±å¹•å˜åŒ–</h3>
<p>ç”¨æˆ·æŠŠçª—å£ä»å†…å±ï¼ˆ2.0ï¼‰æ‹–åˆ°å¤–æ¥å±ï¼ˆ1.0ï¼‰ï¼Œæˆ–è€…é¼ æ ‡åœ¨å¤–æ¥å±ä½†çª—å£åœ¨å†…å±ï¼Œè¿™æ—¶ï¼š</p>
<ul>
<li>â€œé¼ æ ‡æ‰€åœ¨å±å¹•â€ çš„åæ ‡ç©ºé—´</li>
<li>â€œçª—å£å½“å‰ scale_factorâ€</li>
<li>â€œä½ ç”¨æ¥è®¡ç®—çš„ monitor.size/positionâ€</li>
</ul>
<p>å¯èƒ½å¹¶ä¸åœ¨åŒä¸€ä¸ªç¼©æ”¾ä½“ç³»é‡Œã€‚</p>
<p>Coco çš„åšæ³•æ˜¯ç”¨ <code>cursor_position</code> æ‰¾é¼ æ ‡ä½ç½®ï¼Œå†ç”¨ <code>monitor_from_point</code> æ‰¾å¯¹åº”å±å¹•ï¼ˆ<code>src-tauri/src/lib.rs:323-340</code>ï¼‰ã€‚æ–¹å‘æ˜¯å¯¹çš„ï¼Œä½†æ›´å…³é”®çš„æ˜¯ï¼š<strong>åç»­è®¡ç®—å¿…é¡»ç»Ÿä¸€å•ä½ã€‚</strong></p>
<h3 data-id="heading-8">3.3 æœ€å®¹æ˜“å¿½ç•¥ï¼šå°æ•°ç¼©æ”¾æ¯” + æ•´æ•°æˆªæ–­å¯¼è‡´ç³»ç»Ÿæ€§åå·®</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_height</span> = <span class="hljs-number">590</span> * scale_factor <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>;
</code></pre>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªéšæ‚£ï¼š</p>
<ol>
<li><code>scale_factor</code> é€šå¸¸æ˜¯ <code>f64</code>ï¼Œæ¯”å¦‚ <code>1.25</code>ã€<code>1.5</code></li>
<li>ç›´æ¥ <code>as i32</code> ä¼š<strong>æˆªæ–­</strong>ï¼ˆä¸æ˜¯å››èˆäº”å…¥ï¼‰</li>
</ol>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<ul>
<li>å½“ <code>scale_factor = 1.25</code> æ—¶ï¼Œ<code>scale_factor as i32 = 1</code></li>
<li><code>window_height = 590 * 1 = 590</code></li>
</ul>
<p>è¿™ç­‰ä»·äºå®Œå…¨å¿½ç•¥äº† 125% ç¼©æ”¾ï¼Œå¿…ç„¶ä¼šå‡ºç°â€œçºµå‘å±…ä¸­ä¸å‡†â€ã€‚</p>
<p>å³ä½¿ä½ å†™æˆï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_height</span> = (<span class="hljs-number">590.0</span> * scale_factor) <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>;
</code></pre>
<p>ä¹Ÿä¼šå› ä¸º <code>as i32</code> æˆªæ–­å¯¼è‡´ â€œæ¯æ¬¡éƒ½åä¸€ä¸¤åƒç´ åˆ°å‡ ååƒç´ â€ï¼Œåœ¨æŸäº›æ˜¾ç¤ºå™¨ä¸Šä¼šéå¸¸æ˜æ˜¾ï¼ˆå°¤å…¶çª—å£å¸é™„ã€å±…ä¸­æ—¶æ›´æ•æ„Ÿï¼‰ã€‚</p>
<h3 data-id="heading-9">3.4 WebView/CSS çš„ px è¯­ä¹‰ä¸çª—å£ API çš„ px è¯­ä¹‰å¯èƒ½ä¸åŒ</h3>
<p>å‰ç«¯ï¼ˆWebï¼‰é‡Œ <code>px</code> åŸºæœ¬ç­‰åŒäº<strong>é€»è¾‘åƒç´ </strong>ï¼ˆCSS åƒç´ ï¼‰ã€‚
Tauri çš„çª—å£ API æœ‰æ—¶è¦æ±‚ä½ æ˜ç¡®æ˜¯ <code>LogicalPosition/Size</code> è¿˜æ˜¯ <code>PhysicalPosition/Size</code>ã€‚</p>
<p>å¦‚æœä½ ç”¨â€œCSS é‡Œçœ‹èµ·æ¥æ˜¯ 590 é«˜â€çš„æ¦‚å¿µï¼Œç›´æ¥å¡åˆ° <code>PhysicalPosition</code> ä½“ç³»é‡Œå»ç®—ä½ç½®ï¼Œå°±ä¼šå‡ºç° â€œåŒäº‹ç”µè„‘ UI é«˜åº¦ä¸€æ ·ï¼Œä½†çª—å£å±…ä¸­ä¸ä¸€æ ·â€ çš„é”™è§‰ã€‚</p>
<hr/>
<h2 data-id="heading-10">4. åœ¨å®é™…é¡¹ç›®ä¸­ä¼šé‡åˆ°å“ªäº›å…¸å‹é—®é¢˜ï¼Ÿ</h2>
<h3 data-id="heading-11">é—®é¢˜ Aï¼šçª—å£å±…ä¸­åœ¨æŸäº›æœºå™¨ä¸Šåä¸Š/åä¸‹</h3>
<p>å¸¸è§åŸå› ï¼š</p>
<ul>
<li>ç”¨é€»è¾‘é«˜åº¦ï¼ˆå¦‚ 590ï¼‰å»å‡ç‰©ç†å±å¹•é«˜åº¦ï¼ˆmonitor_size å¯èƒ½æ˜¯ç‰©ç†ï¼‰ï¼Œå•ä½æ··ç”¨</li>
<li>æˆ–è€…ç”¨ç‰©ç†é«˜åº¦ï¼Œä½† scale_factor è®¡ç®—/å–æ•´ä¸å¯¹</li>
</ul>
<h3 data-id="heading-12">é—®é¢˜ Bï¼šå¤–æ¥æ˜¾ç¤ºå™¨åï¼Œçª—å£å‡ºç°åœ¨é”™è¯¯çš„å±å¹•æˆ–åæ ‡è·‘é£</h3>
<p>å¸¸è§åŸå› ï¼š</p>
<ul>
<li>ä»ç„¶æŒ‰â€œä¸»å±å¹•â€ç¼©æ”¾æ¥æ¢ç®—</li>
<li><code>cursor_position</code> / <code>monitor_from_point</code> / <code>window.scale_factor</code> æ²¡æœ‰ç»Ÿä¸€è¯­ä¹‰ï¼ˆé¼ æ ‡åœ¨ A å±ï¼Œscale_factor å´æ¥è‡ª B å±ï¼‰</li>
</ul>
<h3 data-id="heading-13">é—®é¢˜ Cï¼šWindows 125% ç¼©æ”¾æ—¶é”™å¾—æœ€ç¦»è°±</h3>
<p>å¸¸
è§åŸå› ï¼š</p>
<ul>
<li><code>1.25</code> è¿™ç±»å°æ•°ç¼©æ”¾æœ€å®¹æ˜“è¢« <code>as i32</code> æˆªæ–­</li>
<li>è¿˜ä¼šå¼•å…¥å¤§é‡â€œ0.5 åƒç´ â€ç±»çš„ rounding å·®ï¼Œå åŠ åè¯¯å·®æ‰©å¤§</li>
</ul>
<hr/>
<h2 data-id="heading-14">5. è§£å†³æ–¹æ¡ˆï¼šå”¯ä¸€åŸåˆ™â€”â€”<strong>å…¨ç¨‹ç»Ÿä¸€åæ ‡ç©ºé—´</strong></h2>
<p>ä½ å¯ä»¥é€‰ä¸¤æ¡è·¯çº¿ä¹‹ä¸€ï¼š</p>
<h3 data-id="heading-15">è·¯çº¿ 1ï¼šå…¨ç¨‹ç”¨é€»è¾‘åæ ‡è®¡ç®—ï¼Œæœ€åç”¨ <code>LogicalPosition</code> è®¾ç½®</h3>
<p>é€‚ç”¨äºï¼šä½ çš„ UI è®¾è®¡æ˜¯æŒ‰â€œé€»è¾‘å°ºå¯¸â€ï¼ˆä¾‹å¦‚ 590 è¿™ä¸ª baselineï¼‰å®šä¹‰çš„ã€‚</p>
<p>æ¨èå†™æ³•ï¼ˆç¤ºæ„ï¼‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tauri::dpi::{LogicalPosition, LogicalSize};

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">scale</span> = window.<span class="hljs-title function_ invoke__">scale_factor</span>()?;

<span class="hljs-comment">// æ³¨æ„ï¼šmonitor.position/size å¤šæ•°æƒ…å†µä¸‹æ˜¯ Physicalï¼Œéœ€è¦è½¬ logical</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">monitor_pos_l</span> = monitor.<span class="hljs-title function_ invoke__">position</span>().to_logical::&lt;<span class="hljs-type">f64</span>&gt;(scale);
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">monitor_size_l</span> = monitor.<span class="hljs-title function_ invoke__">size</span>().to_logical::&lt;<span class="hljs-type">f64</span>&gt;(scale);

<span class="hljs-comment">// window.inner_size() é€šå¸¸è¿”å› PhysicalSizeï¼Œä¹Ÿè½¬ logical</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_size_l</span> = window.<span class="hljs-title function_ invoke__">inner_size</span>()?.to_logical::&lt;<span class="hljs-type">f64</span>&gt;(scale);

<span class="hljs-comment">// ä½ çš„ baseline ç›´æ¥ç”¨é€»è¾‘å€¼</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">baseline_h</span> = <span class="hljs-number">590.0_f64</span>;

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = monitor_pos_l.x + (monitor_size_l.width - window_size_l.width) / <span class="hljs-number">2.0</span>;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">y</span> = monitor_pos_l.y + (monitor_size_l.height - baseline_h) / <span class="hljs-number">2.0</span>;

window.<span class="hljs-title function_ invoke__">set_position</span>(LogicalPosition::<span class="hljs-title function_ invoke__">new</span>(x, y))?;
</code></pre>
<p>æ ¸å¿ƒå¥½å¤„ï¼š</p>
<ul>
<li>590 å°±æ˜¯ä½  UI é‡Œçš„ 590ï¼ˆé€»è¾‘ï¼‰</li>
<li>è®¡ç®—æ›´ç›´è§‚ï¼Œå°‘è¸©å‘</li>
</ul>
<h3 data-id="heading-16">è·¯çº¿ 2ï¼šå…¨ç¨‹ç”¨ç‰©ç†åæ ‡è®¡ç®—ï¼Œæœ€åç”¨ <code>PhysicalPosition</code> è®¾ç½®</h3>
<p>é€‚ç”¨äºï¼šä½ å·²ç»åœ¨ä½¿ç”¨ç‰©ç† APIï¼Œä¸” monitor/window çš„ size/position éƒ½æ˜¯ physicalã€‚</p>
<p>å…³é”®ç‚¹æ˜¯ï¼š<strong>ä¸è¦æŠŠ scale_factor æˆªæ–­æˆæ•´æ•°</strong>ï¼Œè¦ç”¨æµ®ç‚¹ä¹˜å®Œå† <code>round()</code>ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tauri::dpi::PhysicalPosition;

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">scale</span> = window.<span class="hljs-title function_ invoke__">scale_factor</span>()?; <span class="hljs-comment">// f64</span>

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">baseline_h_physical</span> = (<span class="hljs-number">590.0</span> * scale).<span class="hljs-title function_ invoke__">round</span>() <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>;

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">monitor_position</span> = monitor.<span class="hljs-title function_ invoke__">position</span>(); <span class="hljs-comment">// PhysicalPosition&lt;i32&gt;</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">monitor_size</span> = monitor.<span class="hljs-title function_ invoke__">size</span>();         <span class="hljs-comment">// PhysicalSize&lt;u32&gt;</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_size</span> = window.<span class="hljs-title function_ invoke__">inner_size</span>()?;    <span class="hljs-comment">// PhysicalSize&lt;u32&gt;</span>

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_x</span> =
  monitor_position.x + (monitor_size.width <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span> - window_size.width <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>) / <span class="hljs-number">2</span>;

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_y</span> =
  monitor_position.y + (monitor_size.height <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span> - baseline_h_physical) / <span class="hljs-number">2</span>;

window.<span class="hljs-title function_ invoke__">set_position</span>(PhysicalPosition::<span class="hljs-title function_ invoke__">new</span>(window_x, window_y))?;
</code></pre>
<p>å¯¹æ¯” Coco å½“å‰ä»£ç ï¼ˆ<code>src-tauri/src/lib.rs:351-356</code>ï¼‰ï¼Œå·®å¼‚ç‚¹å°±æ˜¯ï¼š</p>
<ul>
<li><code>scale_factor as i32</code> æ”¹ä¸º <code>round()</code> åå†è½¬æ•´æ•°</li>
<li>æ˜ç¡® <code>590</code> å±äºé€»è¾‘ baselineï¼Œæ¢ç®—æˆç‰©ç†é«˜åº¦å†å‚ä¸ç‰©ç†è®¡ç®—</li>
</ul>
<hr/>
<h2 data-id="heading-17">6. ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šé‡åˆ°è¿™ç§é—®é¢˜ï¼Ÿï¼ˆæ ¹å› æ€»ç»“ï¼‰</h2>
<p>ä¸€å¥è¯ï¼š<strong>è·¨å¹³å°çª—å£ç³»ç»ŸæŠŠâ€œåƒç´ â€æ‹†æˆäº†ä¸¤å¥—åæ ‡ï¼Œè€Œæˆ‘ä»¬å¾ˆå®¹æ˜“æ··ç”¨ã€‚</strong></p>
<p>ä½ çœ‹åˆ°çš„ <code>590</code> å¯èƒ½æ¥è‡ªï¼š</p>
<ul>
<li>å‰ç«¯ CSS çš„è®¾è®¡å°ºå¯¸ï¼ˆé€»è¾‘ï¼‰</li>
<li>äº§å“/äº¤äº’å®šä¹‰çš„ baselineï¼ˆé€»è¾‘ï¼‰</li>
<li>ä½† monitor/window API è¿”å›çš„å´å¯èƒ½æ˜¯ physical</li>
<li>å†åŠ ä¸Š Windows å°æ•°ç¼©æ”¾ä¸å¤šå± per-monitor DPIï¼Œæ··ç”¨åå¿…ç„¶å‡ºç°â€œæ¯ä¸ªäººä¸ä¸€æ ·â€</li>
</ul>
<hr/>
<h2 data-id="heading-18">7. é˜²è¸©å‘ Checklistï¼ˆå¼ºçƒˆå»ºè®®å›¢é˜Ÿçº¦å®šï¼‰</h2>
<ul>
<li>ä»»ä½•æ¶‰åŠçª—å£çš„ <code>x/y/width/height</code> è®¡ç®—ï¼Œå…ˆå†™æ¸…æ¥šï¼š<strong>è¿™æ®µä»£ç ä½¿ç”¨ Logical è¿˜æ˜¯ Physical</strong></li>
<li><strong>ç¦æ­¢</strong>å†™ <code>scale_factor as i32</code> è¿™ç§æˆªæ–­å¼è½¬æ¢ï¼ˆå°¤å…¶ Windows 125%ï¼‰</li>
<li>éœ€è¦æ•´æ•°æ—¶ï¼šä¼˜å…ˆ <code>round()</code>ï¼Œå…¶æ¬¡ <code>floor/ceil</code>ï¼ˆè§† UI æœŸæœ›å†³å®šï¼‰</li>
<li>å¤šå±åœºæ™¯ï¼šä»¥â€œç›®æ ‡å±å¹•â€çš„ scale_factor åšæ¢ç®—ï¼ˆé¼ æ ‡åœ¨å“ªä¸ªå±å¹•ã€çª—å£è¦ç§»åŠ¨åˆ°å“ªä¸ªå±å¹•ï¼Œå°±ç”¨é‚£ä¸ªå±å¹•å¯¹åº”çš„ç¼©æ”¾ä½“ç³»ï¼‰</li>
<li>ä¿æŒâ€œä¸€æ®µè®¡ç®—â€ä¸è¦æ··å…¥ä¸åŒå•ä½ï¼š
<ul>
<li>è¦ä¹ˆéƒ½ logical</li>
<li>è¦ä¹ˆéƒ½ physical</li>
<li>ä¸­é—´è½¬æ¢ä¸€æ¬¡ï¼Œä¹‹åä¸å†æ··ç”¨</li>
</ul>
</li>
<li>å½“ä½ å‘ç°â€œåªæœ‰éƒ¨åˆ†åŒäº‹ç”µè„‘ä¸å¯¹â€ï¼Œä¼˜å…ˆæ€€ç–‘ï¼š
<ul>
<li>Windows ç¼©æ”¾æ¯”ï¼ˆ125%/150%ï¼‰</li>
<li>å¤–æ¥å± DPI ä¸ä¸€è‡´</li>
<li>å°æ•°ç¼©æ”¾è¢«æˆªæ–­ / rounding ä¸ä¸€è‡´</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-19">8. å›åˆ° Cocoï¼šè¿™æ®µä»£ç åœ¨åšä»€ä¹ˆï¼Ÿå“ªé‡Œæœ€å®¹æ˜“è¸©é›·ï¼Ÿ</h2>
<p>Coco å½“å‰å®ç°ï¼ˆ<code>src-tauri/src/lib.rs:320-375</code>ï¼‰æ•´ä½“æ€è·¯æ˜¯åˆç†çš„ï¼š</p>
<ul>
<li>ç”¨é¼ æ ‡ä½ç½®æ‰¾ monitorï¼ˆ<code>src-tauri/src/lib.rs:323-340</code>ï¼‰</li>
<li>ç”¨ monitor çš„ position/size è®¡ç®—å±…ä¸­ï¼ˆ<code>src-tauri/src/lib.rs:339-356</code>ï¼‰</li>
<li>ç”¨ <code>PhysicalPosition</code> è®¾ç½®çª—å£ä½ç½®ï¼ˆ<code>src-tauri/src/lib.rs:358-360</code>ï¼‰</li>
</ul>
<p>ä½†æœ€å±é™©çš„ä¸€è¡Œå°±æ˜¯ï¼ˆ<code>src-tauri/src/lib.rs:352</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">window_height</span> = <span class="hljs-number">590</span> * scale_factor <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>;
</code></pre>
<p>å®ƒä¼šåœ¨ <code>scale_factor=1.25</code> ç­‰æƒ…å†µä¸‹ç›´æ¥æˆªæ–­ï¼Œå¯¼è‡´çºµå‘å±…ä¸­åœ¨ä¸åŒç¼©æ”¾æ¯”è®¾å¤‡ä¸Šå·®å¼‚å·¨å¤§ã€‚</p>
<hr/>
<h2 data-id="heading-20">9. ç»“è¯­</h2>
<p>æ¡Œé¢åº”ç”¨ â€œçœ‹èµ·æ¥åƒç½‘é¡µâ€ï¼Œä½†çª—å£ç³»ç»Ÿçš„åƒç´ ä½“ç³»è¿œæ¯”ç½‘é¡µå¤æ‚ï¼š<strong>DPIã€ç¼©æ”¾æ¯”ã€å¤šæ˜¾ç¤ºå™¨ã€ç‰©ç†/é€»è¾‘åæ ‡</strong>ä»»ä½•ä¸€ä¸ªç‚¹å¤„ç†ä¸ä¸€è‡´ï¼Œéƒ½ä¼šè®© â€œåŒä¸€ä»½ä»£ç åœ¨ä¸åŒäººç”µè„‘ä¸Šä¸ä¸€æ ·â€ã€‚</p>
<p>æœ€é è°±çš„å·¥ç¨‹åŒ–åšæ³•åªæœ‰ä¸€ä¸ªï¼š<br/>
<strong>ç»Ÿä¸€åæ ‡ç©ºé—´ï¼Œæ˜ç¡®è½¬æ¢è¾¹ç•Œï¼Œé¿å…æˆªæ–­è¯¯å·®ã€‚</strong></p>
<p>åªè¦å›¢é˜ŸæŠŠè¿™å¥—çº¦å®šå›ºåŒ–ä¸‹æ¥ï¼Œåç»­å†åšçª—å£å±…ä¸­ã€å¸é™„ã€è·Ÿéšé¼ æ ‡ã€è·¨æ˜¾ç¤ºå™¨ç§»åŠ¨ï¼Œéƒ½ä¼šç¨³å®šå¾ˆå¤šã€‚</p>
<h2 data-id="heading-21">å¼€æº</h2>
<p>å¦‚æœä½ å¯¹æˆ‘ä»¬çš„æŠ€æœ¯ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œæˆ–è€…æƒ³ä½“éªŒä¸€ä¸‹è¿™æ¬¾å…¨èƒ½çš„ç”Ÿäº§åŠ›å·¥å…·ï¼Œæ¬¢è¿è®¿é—®æˆ‘ä»¬çš„å¼€æºä»“åº“å’Œå®˜ç½‘ï¼š</p>
<ul>
<li><strong>GitHub</strong>:Â <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fcoco-app" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fcoco-app" target="_blank">github.com/infinilabs/â€¦</a></li>
<li><strong>Website</strong>:Â <a href="https://link.juejin.cn/?target=https%3A%2F%2Fcoco.rs" title="https://link.juejin.cn/?target=https%3A%2F%2Fcoco.rs" target="_blank">coco.rs</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆç§»åŠ¨ç«¯ safari ç”¨ translate ç§»åŠ¨å…ƒç´ å¡å¡çš„]]></title>    <link>https://juejin.cn/post/7586584105741402162</link>    <guid>https://juejin.cn/post/7586584105741402162</guid>    <pubDate>2025-12-23T03:33:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586584105741402162" data-draft-id="7586573133349470254" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆç§»åŠ¨ç«¯ safari ç”¨ translate ç§»åŠ¨å…ƒç´ å¡å¡çš„"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–,CSS"/> <meta itemprop="datePublished" content="2025-12-23T03:33:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ssshooter"/> <meta itemprop="url" content="https://juejin.cn/user/3122268751795101"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆç§»åŠ¨ç«¯ safari ç”¨ translate ç§»åŠ¨å…ƒç´ å¡å¡çš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268751795101/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ssshooter
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:33:19.000Z" title="Tue Dec 23 2025 03:33:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. å¹¶æ²¡æœ‰è§¦å‘çœŸæ­£çš„â€œç¡¬ä»¶åŠ é€Ÿâ€</h3>
<p>è™½ç„¶ <code>translate</code> ç†è®ºä¸Šæ¯”ä¿®æ”¹ <code>top/left</code> å¿«ï¼Œä½†åœ¨ Safari ä¸­ï¼Œå¦‚æœä½ åªä½¿ç”¨ <code>translate(x, y)</code>ï¼Œæµè§ˆå™¨å¯èƒ½ä»å°†å…¶è§†ä¸ºæ™®é€šçš„ 2D å˜æ¢ï¼Œä¸ä¸€å®šä¼šä¸ºå…¶åˆ†é…ç‹¬ç«‹çš„ <strong>GPU å›¾å±‚ï¼ˆCompositing Layerï¼‰</strong> ã€‚</p>
<ul>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> å¼ºåˆ¶å¼€å¯ 3D æ¸²æŸ“ï¼Œè¯±å¯¼æµè§ˆå™¨ä½¿ç”¨ GPUã€‚</p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ¨èå†™æ³•ï¼šä½¿ç”¨ 3d ä½ç§» */</span>
<span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(x, y, <span class="hljs-number">0</span>); 

<span class="hljs-comment">/* æˆ–è€…é…åˆ will-change æå‰å‘ŠçŸ¥æµè§ˆå™¨ */</span>
<span class="hljs-attribute">will-change</span>: transform;
</code></pre>
</li>
</ul>
<h3 data-id="heading-1">2. åˆ·æ–°ç‡åŒæ­¥é—®é¢˜ (RequestAnimationFrame)</h3>
<p>åŸç”Ÿæ»šåŠ¨ï¼ˆScrollï¼‰æ˜¯ç”±ç³»ç»Ÿçš„æ¸²æŸ“è¿›ç¨‹ç›´æ¥å¤„ç†çš„ï¼Œé€šå¸¸æ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§ã€‚è€Œå¦‚æœä½ æ˜¯é€šè¿‡ JS ç›‘å¬ <code>scroll</code> äº‹ä»¶æˆ–è€… <code>touchmove</code> æ¥é©±åŠ¨ <code>translate</code>ï¼Œä¼šå­˜åœ¨<strong>å»¶è¿Ÿ</strong>ï¼š</p>
<ol>
<li><strong>äº‹ä»¶èŠ‚æµï¼š</strong> JS äº‹ä»¶è§¦å‘é¢‘ç‡å¾€å¾€è·Ÿä¸ä¸Šå±å¹•åˆ·æ–°ç‡ã€‚</li>
<li><strong>ä¸»çº¿ç¨‹é˜»å¡ï¼š</strong> å¦‚æœä½ çš„ JS æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œ<code>translate</code> çš„æ›´æ–°å°±ä¼šæ‰å¸§ã€‚</li>
</ol>
<ul>
<li><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> å°½é‡ä½¿ç”¨ <strong>CSS Transition</strong> æˆ– <strong>CSS Animation</strong>ã€‚CSS åŠ¨ç”»åœ¨ Safari ä¸­è¿è¡Œåœ¨åˆæˆå™¨çº¿ç¨‹ï¼ˆCompositor Threadï¼‰ï¼Œå³ä½¿ä¸»çº¿ç¨‹å¡é¡¿ï¼ŒåŠ¨ç”»ä¾ç„¶å¯ä»¥ä¿æŒæµç•…ã€‚</li>
</ul>
<h3 data-id="heading-2">3. â€œéšå½¢çš„â€ é‡ç»˜å¼€é”€</h3>
<p>å³ä½¿ä½¿ç”¨äº† <code>translate</code>ï¼Œå¦‚æœä½ çš„å…ƒç´ åŒ…å«ä»¥ä¸‹å±æ€§ï¼Œæ¯ä¸€å¸§ç§»åŠ¨éƒ½ä¼šè¿«ä½¿ GPU é‡æ–°è®¡ç®—å…‰æ …åŒ–ï¼Œå¯¼è‡´ä¸¥é‡çš„æ‰å¸§ï¼š</p>
<ul>
<li>
<p><strong>Box-shadow / Filters (blur):</strong> é˜´å½±å’Œæ»¤é•œæå…¶è€—è´¹èµ„æºã€‚</p>
</li>
<li>
<p><strong>Masks / Clip-path:</strong> é®ç½©è®¡ç®—ã€‚</p>
</li>
<li>
<p><strong>æ²¡æœ‰è®¾ç½® backface-visibility:</strong> åœ¨ç§»åŠ¨ç«¯ Safari ä¸Šï¼Œæœ‰æ—¶ä¼šå‡ºç°é—ªçƒã€‚</p>
</li>
<li>
<p><strong>ä¼˜åŒ–æŠ€å·§ï¼š</strong></p>
<p>CSS</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.moving-element</span> {
  <span class="hljs-attribute">backface-visibility</span>: hidden;
  <span class="hljs-attribute">perspective</span>: <span class="hljs-number">1000</span>;
  -webkit-<span class="hljs-attribute">font-smoothing</span>: subpixel-antialiased; <span class="hljs-comment">/* é˜²æ­¢æ–‡å­—åœ¨ç§»åŠ¨æ—¶å˜æ¨¡ç³Š */</span>
}
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-3">å¿«é€Ÿæ£€æŸ¥æ¸…å•</h3>

























<table><thead><tr><th><strong>ä¼˜åŒ–æ‰‹æ®µ</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>ä½¿ç”¨ <code>translate3d</code></strong></td><td>ç¡®ä¿å…ƒç´ æ‹¥æœ‰ç‹¬ç«‹çš„æ˜¾å­˜å±‚</td></tr><tr><td><strong>æ£€æŸ¥ <code>will-change</code></strong></td><td>å‘ŠçŸ¥æµè§ˆå™¨æå‰å‡†å¤‡ï¼Œä½†ä¸è¦æ»¥ç”¨ï¼ˆä¼šå¯¼è‡´å†…å­˜æº¢å‡ºï¼‰</td></tr><tr><td><strong>ç§»é™¤å†…é˜´å½±å’Œæ»¤é•œ</strong></td><td>è¿™äº›æ˜¯æ€§èƒ½æ€æ‰‹ï¼Œå»ºè®®ç”¨å›¾ç‰‡ä»£æ›¿å¤æ‚é˜´å½±</td></tr><tr><td><strong>æ£€æŸ¥ JS é€»è¾‘</strong></td><td>å¦‚æœæ˜¯ç”¨ JS æ§åˆ¶ï¼Œå¿…é¡»åŒ…è£¹åœ¨ <code>requestAnimationFrame</code> ä¸­</td></tr></tbody></table>
<p>äº²æµ‹æ¨èæ·»åŠ  <strong>transform: translate3d(0,0,0);</strong>ï¼Œç«‹å³è§£å›æ„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AOP çš„çœŸç›¸ï¼šæ³¨è§£åªæ˜¯å£°æ˜ï¼Œä»£ç†æ‰æ˜¯æ‰§è¡Œ]]></title>    <link>https://juejin.cn/post/7586585688005115945</link>    <guid>https://juejin.cn/post/7586585688005115945</guid>    <pubDate>2025-12-23T03:41:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585688005115945" data-draft-id="7586585498744684598" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AOP çš„çœŸç›¸ï¼šæ³¨è§£åªæ˜¯å£°æ˜ï¼Œä»£ç†æ‰æ˜¯æ‰§è¡Œ"/> <meta itemprop="keywords" content="é¢è¯•,æ¶æ„,Spring"/> <meta itemprop="datePublished" content="2025-12-23T03:41:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AOP çš„çœŸç›¸ï¼šæ³¨è§£åªæ˜¯å£°æ˜ï¼Œä»£ç†æ‰æ˜¯æ‰§è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:41:28.000Z" title="Tue Dec 23 2025 03:41:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¾ˆå¤šäººç”¨Spring AOPæ—¶ï¼Œä»¥ä¸ºåªè¦åœ¨æ–¹æ³•ä¸ŠåŠ ä¸ª<code>@Transactional</code>ã€<code>@Retry</code>ï¼Œå°±èƒ½è‡ªåŠ¨æœ‰äº‹åŠ¡ã€é‡è¯•åŠŸèƒ½ã€‚ä½†å½“ä»£ç å‡ºé—®é¢˜æ—¶ï¼Œå¾€å¾€ä¸€è„¸æ‡µé€¼ï¼šä¸ºä»€ä¹ˆæ³¨è§£æ²¡ç”Ÿæ•ˆï¼Ÿä¸ºä»€ä¹ˆä»£ç†å¤±è´¥äº†ï¼Ÿ</p>
<p>è¿™æ¬¡æˆ‘ç”¨ä¸åˆ°1000è¡Œä»£ç ï¼Œæ‰‹å†™äº†ä¸€ä¸ªMini-AOPæ¡†æ¶ï¼Œçº¯JDKå®ç°ï¼Œ0ä¾èµ–ã€‚ç›®çš„å¾ˆç®€å•ï¼š<strong>çœ‹æ¸…æ¥šAOPåˆ°åº•æ˜¯æ€ä¹ˆè¿ä½œçš„</strong>ã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒè®¤çŸ¥ï¼šAOPä¸æ˜¯ä½ æƒ³çš„é‚£æ ·</h2>
<h3 data-id="heading-2">å¸¸è§è¯¯è§£</h3>
<p>å¾ˆå¤šäººä»¥ä¸ºAOPæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> {
    <span class="hljs-meta">@Before("UserService.*")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(JoinPoint jp)</span> {
        System.out.println(<span class="hljs-string">"æ‰“æ—¥å¿—"</span>);
    }
}

<span class="hljs-comment">// ç„¶åå†™ä¸šåŠ¡ä»£ç </span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-comment">// è‡ªåŠ¨å°±æœ‰æ—¥å¿—äº†ï¼Ÿ</span>
    }
}
</code></pre>
<p>ä»¥ä¸ºåŠ äº†æ³¨è§£å°±è‡ªåŠ¨åœ¨æ–¹æ³•å‰åæ’å…¥ä»£ç äº†ã€‚<strong>è¿™æ˜¯é”™çš„ï¼</strong></p>
<h3 data-id="heading-3">çœŸå®æƒ…å†µ</h3>
<p>AOPçš„æœ¬è´¨æ˜¯<strong>ä¸‰å±‚ç»“æ„</strong>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3952679a3a564030a456894b89ca990a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LiP5rWq5peg55eV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066313&amp;x-signature=GuWiuKyLUtXpVgM%2F9v7BnwgT3uQ%3D" alt="115.jpg" loading="lazy"/></p>
<ol>
<li><strong>å£°æ˜å±‚</strong>ï¼šä½ å†™çš„<code>@Before</code>ã€<code>@Around</code>ç­‰æ³¨è§£ï¼Œåªæ˜¯é…ç½®ï¼Œä¸æ‰§è¡Œä»»ä½•é€»è¾‘</li>
<li><strong>è§¦å‘å±‚</strong>ï¼šä»£ç†å¯¹è±¡åœ¨æ–¹æ³•è°ƒç”¨æ—¶ï¼Œé€šè¿‡è¡¨è¾¾å¼åŒ¹é…å†³å®šå“ªäº›åˆ‡é¢è¦æ‰§è¡Œ</li>
<li><strong>ä¸šåŠ¡å±‚</strong>ï¼šè¢«AOPåŒ…è£¹çš„çœŸå®ä¸šåŠ¡ä»£ç </li>
</ol>
<p>ç”¨å¤§ç™½è¯è¯´ï¼š<strong>æ³¨è§£ä¸ä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼Œå¿…é¡»æœ‰ä¸€ä¸ªä»£ç†å±‚æ¥è¯†åˆ«æ³¨è§£ã€åŒ¹é…è¡¨è¾¾å¼ã€å†³å®šæ‰§è¡Œé¡ºåº</strong>ã€‚</p>
<h2 data-id="heading-4">Mini-AOPçš„æ ¸å¿ƒå®ç°</h2>
<h3 data-id="heading-5">æ•´ä½“æ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç”¨æˆ·è°ƒç”¨] --&gt; B[ä»£ç†å¯¹è±¡]
    B --&gt; C{åˆ‡ç‚¹åŒ¹é…}
    C --&gt;|åŒ¹é…æˆåŠŸ| D[æ”¶é›†é€šçŸ¥]
    D --&gt; E[æ‰§è¡ŒBefore]
    E --&gt; F[æ‰§è¡ŒAround]
    F --&gt; G[çœŸå®æ–¹æ³•]
    G --&gt; H[æ‰§è¡ŒAfter]
    C --&gt;|ä¸åŒ¹é…| G
</code></pre>
<h3 data-id="heading-6">å…³é”®ç±»è¯´æ˜</h3>
<p><strong>1. BeanFactory - å®¹å™¨å’Œä»£ç†åˆ›å»ºè€…</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BeanFactory</span> {
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; beans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> List&lt;Object&gt; aspects = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-comment">// æ³¨å†ŒBeanæ—¶ï¼Œè¯†åˆ«å‡ºåˆ‡é¢ç±»</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> {
        <span class="hljs-type">Object</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> clazz.newInstance();
        <span class="hljs-keyword">if</span> (clazz.isAnnotationPresent(Aspect.class)) {
            aspects.add(instance);  <span class="hljs-comment">// æ”¶é›†åˆ‡é¢</span>
        }
        beans.put(getBeanName(clazz), instance);
    }
    
    <span class="hljs-comment">// è·å–Beanæ—¶ï¼Œå†³å®šæ˜¯å¦åˆ›å»ºä»£ç†</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getBean</span><span class="hljs-params">(String name, Class&lt;T&gt; type)</span> {
        <span class="hljs-type">Object</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> beans.get(name);
        <span class="hljs-keyword">if</span> (needProxy(bean)) {
            <span class="hljs-keyword">return</span> AopProxy.createProxy(bean, aspects);  <span class="hljs-comment">// åˆ›å»ºä»£ç†</span>
        }
        <span class="hljs-keyword">return</span> (T) bean;
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<ul>
<li>æ³¨å†Œæ—¶æ”¶é›†æ‰€æœ‰<code>@Aspect</code>ç±»</li>
<li>è·å–Beanæ—¶åˆ¤æ–­æ˜¯å¦éœ€è¦ä»£ç†ï¼Œå¦‚æœéœ€è¦å°±è¿”å›ä»£ç†å¯¹è±¡è€Œä¸æ˜¯åŸå§‹å¯¹è±¡</li>
</ul>
<p><strong>2. AopProxy - ä»£ç†å’Œåˆ‡ç‚¹åŒ¹é…æ ¸å¿ƒ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AopProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {
    <span class="hljs-keyword">private</span> Object target;
    <span class="hljs-keyword">private</span> List&lt;Object&gt; aspects;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> {
        <span class="hljs-comment">// 1. éå†æ‰€æœ‰åˆ‡é¢</span>
        <span class="hljs-keyword">for</span> (Object aspect : aspects) {
            <span class="hljs-keyword">for</span> (Method aspectMethod : aspect.getClass().getDeclaredMethods()) {
                <span class="hljs-comment">// 2. æ£€æŸ¥æ³¨è§£å’Œåˆ‡ç‚¹è¡¨è¾¾å¼</span>
                <span class="hljs-keyword">if</span> (aspectMethod.isAnnotationPresent(Before.class)) {
                    <span class="hljs-type">String</span> <span class="hljs-variable">pointcut</span> <span class="hljs-operator">=</span> aspectMethod.getAnnotation(Before.class).value();
                    <span class="hljs-comment">// 3. åŒ¹é…è¡¨è¾¾å¼</span>
                    <span class="hljs-keyword">if</span> (matches(pointcut, method)) {
                        beforeAdvices.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Advice</span>(aspect, aspectMethod));
                    }
                }
            }
        }
        
        <span class="hljs-comment">// 4. æŒ‰é¡ºåºæ‰§è¡Œé€šçŸ¥é“¾</span>
        <span class="hljs-keyword">return</span> executeAdvices(method, args, beforeAdvices, afterAdvices);
    }
    
    <span class="hljs-comment">// ç®€å•çš„åˆ‡ç‚¹åŒ¹é…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">matches</span><span class="hljs-params">(String pointcut, Method method)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">fullName</span> <span class="hljs-operator">=</span> method.getDeclaringClass().getSimpleName() 
                        + <span class="hljs-string">"."</span> + method.getName();
        <span class="hljs-type">String</span> <span class="hljs-variable">regex</span> <span class="hljs-operator">=</span> pointcut.replace(<span class="hljs-string">"*"</span>, <span class="hljs-string">".*"</span>);
        <span class="hljs-keyword">return</span> fullName.matches(regex);
    }
}
</code></pre>
<p><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<ul>
<li>æ–¹æ³•è°ƒç”¨æ—¶ï¼Œéå†æ‰€æœ‰åˆ‡é¢ç±»</li>
<li>è¯»å–åˆ‡é¢æ–¹æ³•ä¸Šçš„æ³¨è§£å’Œè¡¨è¾¾å¼</li>
<li>ç”¨è¡¨è¾¾å¼åŒ¹é…å½“å‰æ–¹æ³•ï¼Œå†³å®šæ˜¯å¦æ‰§è¡Œ</li>
<li>æ”¶é›†æ‰€æœ‰åŒ¹é…çš„é€šçŸ¥ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-7">å®Œæ•´çš„è°ƒç”¨æµç¨‹</h3>
<p>ä»¥è¿™æ®µä»£ç ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ³¨å†Œ</span>
factory.register(LogAspect.class);
factory.register(UserServiceImpl.class);

<span class="hljs-comment">// è·å–</span>
<span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> factory.getBean(<span class="hljs-string">"userService"</span>, UserService.class);

<span class="hljs-comment">// è°ƒç”¨</span>
userService.saveUser(<span class="hljs-string">"å¼ ä¸‰"</span>);
</code></pre>
<p>å®é™…æ‰§è¡Œæµç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant U as ç”¨æˆ·ä»£ç 
    participant P as ä»£ç†å¯¹è±¡
    participant A as AopProxy.invoke
    participant L as LogAspect
    participant R as RetryAspect
    participant T as çœŸå®å¯¹è±¡

    U-&gt;&gt;P: saveUser(&amp;#34;å¼ ä¸‰&amp;#34;)
    P-&gt;&gt;A: invoke(method, args)
    A-&gt;&gt;A: åŒ¹é…åˆ‡ç‚¹è¡¨è¾¾å¼
    A-&gt;&gt;L: @BeforeåŒ¹é…æˆåŠŸ
    L--&gt;&gt;A: logBefore()
    A-&gt;&gt;R: @AroundåŒ¹é…æˆåŠŸ
    R-&gt;&gt;A: retry { proceed() }
    A-&gt;&gt;T: method.invoke(target, args)
    T--&gt;&gt;A: è¿”å›ç»“æœ
    A-&gt;&gt;L: @Afteræ‰§è¡Œ
    L--&gt;&gt;A: logAfter()
    A--&gt;&gt;P: è¿”å›æœ€ç»ˆç»“æœ
    P--&gt;&gt;U: è¿”å›ç»™ç”¨æˆ·
</code></pre>
<h3 data-id="heading-8">åˆ‡ç‚¹è¡¨è¾¾å¼çš„åŒ¹é…æœºåˆ¶</h3>
<p>è¿™æ˜¯æœ€å®¹æ˜“è¢«å¿½ç•¥çš„éƒ¨åˆ†ã€‚å¾ˆå¤šäººä»¥ä¸ºå†™äº†<code>@Before("UserService.*")</code>å°±è‡ªåŠ¨ç”Ÿæ•ˆï¼Œä½†å®é™…ä¸Šï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ‡é¢å®šä¹‰</span>
<span class="hljs-meta">@Before("UserService.*")</span>  <span class="hljs-comment">// åªæ˜¯å£°æ˜äº†ä¸€ä¸ªå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(JoinPoint jp)</span> { }

<span class="hljs-comment">// å¿…é¡»æœ‰ä»£ç æ¥è§£æè¿™ä¸ªå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">matches</span><span class="hljs-params">(String pointcut, Method method)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> method.getDeclaringClass().getSimpleName();
    <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> method.getName();
    <span class="hljs-type">String</span> <span class="hljs-variable">fullName</span> <span class="hljs-operator">=</span> className + <span class="hljs-string">"."</span> + methodName;  <span class="hljs-comment">// å¦‚ "UserService.saveUser"</span>
    
    <span class="hljs-comment">// æŠŠè¡¨è¾¾å¼è½¬æˆæ­£åˆ™</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">regex</span> <span class="hljs-operator">=</span> pointcut.replace(<span class="hljs-string">"*"</span>, <span class="hljs-string">".*"</span>);  <span class="hljs-comment">// "UserService.*" -&gt; "UserService\..*"</span>
    
    <span class="hljs-comment">// åŒ¹é…</span>
    <span class="hljs-keyword">return</span> fullName.matches(regex);
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ol>
<li>è¡¨è¾¾å¼åªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸ä¼šè‡ªåŠ¨åŒ¹é…</li>
<li>å¿…é¡»åœ¨è¿è¡Œæ—¶è§£æè¡¨è¾¾å¼å¹¶å’Œæ–¹æ³•åæ¯”å¯¹</li>
<li>è¿™ä¸ªåŒ¹é…å‘ç”Ÿåœ¨æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ—¶</li>
</ol>
<h3 data-id="heading-9">é€šçŸ¥çš„æ‰§è¡Œé¡ºåº</h3>
<p>å¤šä¸ªåˆ‡é¢å åŠ æ—¶ï¼Œæ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d2454105344494a8a442d28ff982197~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LiP5rWq5peg55eV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066313&amp;x-signature=d5Ic2AYQldRmHVRx7BNHWx92Qxs%3D" alt="116.jpg" loading="lazy"/></p>
<p>ä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">executeAdvices</span><span class="hljs-params">(Method method, Object[] args, 
                              List&lt;Advice&gt; beforeAdvices,
                              List&lt;Advice&gt; afterAdvices,
                              List&lt;Advice&gt; aroundAdvices)</span> {
    
    <span class="hljs-comment">// æ„å»ºè°ƒç”¨é“¾</span>
    Supplier&lt;Object&gt; chain = () -&gt; {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œ@Before</span>
            <span class="hljs-keyword">for</span> (Advice advice : beforeAdvices) {
                advice.method.invoke(advice.aspect, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JoinPoint</span>(target, method, args));
            }
            
            <span class="hljs-comment">// æ‰§è¡ŒçœŸå®æ–¹æ³•</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(target, args);
            
            <span class="hljs-comment">// æ‰§è¡Œ@After</span>
            <span class="hljs-keyword">for</span> (Advice advice : afterAdvices) {
                advice.method.invoke(advice.aspect, <span class="hljs-keyword">new</span> <span class="hljs-title class_">JoinPoint</span>(target, method, args));
            }
            
            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
    };
    
    <span class="hljs-comment">// @AroundåŒ…è£¹æ•´ä¸ªé“¾æ¡</span>
    <span class="hljs-keyword">for</span> (Advice around : aroundAdvices) {
        <span class="hljs-type">Object</span> <span class="hljs-variable">finalChain</span> <span class="hljs-operator">=</span> chain;
        chain = () -&gt; around.method.invoke(around.aspect, 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProceedingJoinPoint</span>(target, method, args, finalChain));
    }
    
    <span class="hljs-keyword">return</span> chain.get();
}
</code></pre>
<h2 data-id="heading-10">ä¸€ä¸ªå®Œæ•´ç¤ºä¾‹</h2>
<h3 data-id="heading-11">åˆ‡é¢å®šä¹‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Order(1)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogAspect</span> {
    <span class="hljs-meta">@Before("UserService.*")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logBefore</span><span class="hljs-params">(JoinPoint jp)</span> {
        System.out.println(<span class="hljs-string">"[æ—¥å¿—] æ–¹æ³•: "</span> + jp.getSignature());
    }
    
    <span class="hljs-meta">@After("UserService.*")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAfter</span><span class="hljs-params">(JoinPoint jp)</span> {
        System.out.println(<span class="hljs-string">"[æ—¥å¿—] æ–¹æ³•æ‰§è¡Œå®Œæ¯•"</span>);
    }
}

<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Order(2)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RetryAspect</span> {
    <span class="hljs-meta">@Around("UserService.save*")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">retry</span><span class="hljs-params">(ProceedingJoinPoint pjp)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
            <span class="hljs-keyword">try</span> {
                System.out.println(<span class="hljs-string">"[é‡è¯•] ç¬¬ "</span> + (i + <span class="hljs-number">1</span>) + <span class="hljs-string">" æ¬¡"</span>);
                <span class="hljs-keyword">return</span> pjp.proceed();
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">if</span> (i == <span class="hljs-number">2</span>) <span class="hljs-keyword">throw</span> e;
                Thread.sleep(<span class="hljs-number">1000</span>);
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h3 data-id="heading-12">ä¸šåŠ¡ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name)</span>;
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(String name)</span> {
        count++;
        System.out.println(<span class="hljs-string">"==&gt; ä¿å­˜ç”¨æˆ·: "</span> + name);
        <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">3</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ä¿å­˜å¤±è´¥"</span>);
        }
    }
}
</code></pre>
<h3 data-id="heading-13">è¿è¡Œç»“æœ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BeanFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanFactory</span>();
factory.register(LogAspect.class);
factory.register(RetryAspect.class);
factory.register(UserServiceImpl.class);

<span class="hljs-type">UserService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> factory.getBean(<span class="hljs-string">"userService"</span>, UserService.class);
service.saveUser(<span class="hljs-string">"å¼ ä¸‰"</span>);
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[æ—¥å¿—]</span> æ–¹æ³•: UserService.saveUser
<span class="hljs-section">[é‡è¯•]</span> ç¬¬ 1 æ¬¡
==&gt; ä¿å­˜ç”¨æˆ·: å¼ ä¸‰
<span class="hljs-section">[é‡è¯•]</span> ç¬¬ 2 æ¬¡
==&gt; ä¿å­˜ç”¨æˆ·: å¼ ä¸‰
<span class="hljs-section">[é‡è¯•]</span> ç¬¬ 3 æ¬¡
==&gt; ä¿å­˜ç”¨æˆ·: å¼ ä¸‰
<span class="hljs-section">[æ—¥å¿—]</span> æ–¹æ³•æ‰§è¡Œå®Œæ¯•
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼š</p>
<ol>
<li>æ—¥å¿—åˆ‡é¢å…ˆæ‰§è¡Œï¼ˆOrder=1ï¼‰</li>
<li>é‡è¯•åˆ‡é¢åŒ…è£¹åœ¨å¤–é¢ï¼ˆOrder=2ï¼‰</li>
<li>å¤±è´¥ä¸¤æ¬¡åç¬¬ä¸‰æ¬¡æˆåŠŸ</li>
</ol>
<h2 data-id="heading-14">å’ŒSpring AOPçš„å¯¹æ¯”</h2>
<h3 data-id="heading-15">ç›¸åŒç‚¹</h3>
<ol>
<li>éƒ½ä½¿ç”¨JDKåŠ¨æ€ä»£ç†</li>
<li>éƒ½é€šè¿‡åˆ‡ç‚¹è¡¨è¾¾å¼åŒ¹é…æ–¹æ³•</li>
<li>éƒ½æ”¯æŒå¤šç§é€šçŸ¥ç±»å‹å’Œä¼˜å…ˆçº§</li>
</ol>
<h3 data-id="heading-16">ä¸åŒç‚¹</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Mini-AOP</th><th>Spring AOP</th></tr></thead><tbody><tr><td>ä»£ç†æ–¹å¼</td><td>åªæœ‰JDKä»£ç†</td><td>JDK + CGLIB</td></tr><tr><td>åˆ‡ç‚¹è¡¨è¾¾å¼</td><td>ç®€å•é€šé…ç¬¦</td><td>å®Œæ•´AspectJè¯­æ³•</td></tr><tr><td>å®¹å™¨</td><td>æ‰‹åŠ¨æ³¨å†Œ</td><td>è‡ªåŠ¨æ‰«æ</td></tr><tr><td>ä¾èµ–æ³¨å…¥</td><td>ä¸æ”¯æŒ</td><td>å®Œæ•´æ”¯æŒ</td></tr><tr><td>ä»£ç é‡</td><td>800è¡Œ</td><td>10ä¸‡è¡Œ+</td></tr></tbody></table>
<h3 data-id="heading-17">æœ¬è´¨æ˜¯ä¸€æ ·çš„</h3>
<p>Spring AOPçš„æ ¸å¿ƒæµç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fa4ed1312ad44bea8df2cfbbc312ef4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LiP5rWq5peg55eV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066313&amp;x-signature=oB45fePje47IQs5MRzWivlqok8w%3D" alt="117.jpg" loading="lazy"/></p>
<p>å’ŒMini-AOPå¯¹æ¯”ï¼š</p>






























<table><thead><tr><th>æ­¥éª¤</th><th>Mini-AOP</th><th>Spring AOP</th></tr></thead><tbody><tr><td>æ‰«æåˆ‡é¢</td><td><code>factory.register(LogAspect.class)</code></td><td><code>@ComponentScan + @Aspect</code></td></tr><tr><td>åˆ¤æ–­æ˜¯å¦éœ€è¦ä»£ç†</td><td><code>needProxy(bean)</code></td><td><code>AbstractAutoProxyCreator.wrapIfNecessary</code></td></tr><tr><td>åˆ›å»ºä»£ç†</td><td><code>AopProxy.createProxy</code></td><td><code>ProxyFactory.getProxy</code></td></tr><tr><td>åˆ‡ç‚¹åŒ¹é…</td><td><code>matches(pointcut, method)</code></td><td><code>AspectJExpressionPointcut.matches</code></td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼šSpringåªæ˜¯æŠŠè¿™å¥—é€»è¾‘åšå¾—æ›´é€šç”¨ã€æ›´çµæ´»ï¼Œä½†åº•å±‚æ€æƒ³å®Œå…¨ä¸€è‡´ã€‚</p>
<h2 data-id="heading-18">å…³é”®æ”¶è·</h2>
<h3 data-id="heading-19">1. æ³¨è§£ä¸æ˜¯é­”æ³•</h3>
<p>å†™äº†<code>@Before</code>ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œå¿…é¡»æœ‰ä»£ç å»ï¼š</p>
<ol>
<li>è¯»å–æ³¨è§£</li>
<li>è§£æè¡¨è¾¾å¼</li>
<li>åŒ¹é…æ–¹æ³•</li>
<li>æ‰§è¡Œé€»è¾‘</li>
</ol>
<h3 data-id="heading-20">2. ä»£ç†æ˜¯æ ¸å¿ƒ</h3>
<p>AOPçš„æœ¬è´¨å°±æ˜¯åŠ¨æ€ä»£ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·ä»¥ä¸ºè°ƒç”¨çš„æ˜¯</span>
<span class="hljs-type">UserService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();

<span class="hljs-comment">// å®é™…æ‹¿åˆ°çš„æ˜¯</span>
<span class="hljs-type">UserService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> Proxy.newProxyInstance(...);
</code></pre>
<p>æ‰€æœ‰AOPé€»è¾‘éƒ½åœ¨è¿™ä¸ªä»£ç†å¯¹è±¡çš„<code>invoke</code>æ–¹æ³•é‡Œã€‚</p>
<h3 data-id="heading-21">3. è¡¨è¾¾å¼åŒ¹é…æ˜¯å…³é”®</h3>
<p>åˆ‡é¢èƒ½ä¸èƒ½ç”Ÿæ•ˆï¼Œå–å†³äºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (matches(<span class="hljs-string">"UserService.*"</span>, method)) {
    <span class="hljs-comment">// æ‰§è¡Œåˆ‡é¢é€»è¾‘</span>
}
</code></pre>
<p>è¿™ä¸ªåŒ¹é…é€»è¾‘æ‰æ˜¯å†³å®š"å“ªäº›æ–¹æ³•è¢«æ‹¦æˆª"çš„çœŸæ­£åŸå› ã€‚</p>
<h3 data-id="heading-22">4. ä¸‰å±‚ç»“æ„</h3>
<p>æ°¸è¿œè®°ä½ï¼š</p>
<pre><code class="hljs">æ³¨è§£ï¼ˆå£°æ˜ï¼‰ + ä»£ç†ï¼ˆè§¦å‘ï¼‰ + åŒ¹é…ï¼ˆå†³ç­–ï¼‰ = AOP
</code></pre>
<p>ç¼ºå°‘ä»»ä½•ä¸€å±‚ï¼ŒAOPéƒ½ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>æ‰‹å†™è¿™ä¸ªMini-AOPæ¡†æ¶åï¼Œå¯¹Spring AOPçš„ç†è§£å½»åº•é€šé€äº†ï¼š</p>
<ol>
<li>AOPä¸æ˜¯æ³¨è§£çš„é­”æ³•ï¼Œæ˜¯ä»£ç†å¯¹è±¡åœ¨è¿è¡Œæ—¶çš„åŠ¨æ€åŒ¹é…å’Œè°ƒç”¨</li>
<li>åˆ‡ç‚¹è¡¨è¾¾å¼åªæ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦æœ‰åŒ¹é…å™¨æ¥è§£æå’Œåˆ¤æ–­</li>
<li>é€šçŸ¥çš„æ‰§è¡Œé¡ºåºç”±ä»£ç†å¯¹è±¡æ§åˆ¶ï¼Œä¸æ˜¯æ³¨è§£å†³å®šçš„</li>
<li>Spring AOPåªæ˜¯æŠŠè¿™å¥—æœºåˆ¶åšå¾—æ›´å®Œå–„ï¼Œæœ¬è´¨å’Œ800è¡Œä»£ç æ²¡åŒºåˆ«</li>
</ol>
<p>ä¸‹æ¬¡é‡åˆ°"ä¸ºä»€ä¹ˆ@Transactionalæ²¡ç”Ÿæ•ˆ"è¿™ç§é—®é¢˜ï¼Œå°±èƒ½å¿«é€Ÿå®šä½ï¼šæ˜¯ä¸æ˜¯ä»£ç†æ²¡åˆ›å»ºï¼Ÿæ˜¯ä¸æ˜¯è¡¨è¾¾å¼æ²¡åŒ¹é…ä¸Šï¼Ÿæ˜¯ä¸æ˜¯è°ƒç”¨æ–¹å¼ä¸å¯¹ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025äººå·¥æ™ºèƒ½æœ€æ–°å®Œæ•´å­¦ä¹ è·¯çº¿ï¼ŒAIå…¥é—¨å¿…çœ‹ï¼Œå¸¦ä½ å¿«é€Ÿå…¥é—¨]]></title>    <link>https://juejin.cn/post/7586597780640710666</link>    <guid>https://juejin.cn/post/7586597780640710666</guid>    <pubDate>2025-12-23T03:42:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586597780640710666" data-draft-id="7586588823906238473" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025äººå·¥æ™ºèƒ½æœ€æ–°å®Œæ•´å­¦ä¹ è·¯çº¿ï¼ŒAIå…¥é—¨å¿…çœ‹ï¼Œå¸¦ä½ å¿«é€Ÿå…¥é—¨"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-23T03:42:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025äººå·¥æ™ºèƒ½æœ€æ–°å®Œæ•´å­¦ä¹ è·¯çº¿ï¼ŒAIå…¥é—¨å¿…çœ‹ï¼Œå¸¦ä½ å¿«é€Ÿå…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:42:15.000Z" title="Tue Dec 23 2025 03:42:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>åœ¨äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰é£é€Ÿå‘å±•çš„ä»Šå¤©ï¼ŒæŒæ¡AIæŠ€æœ¯å·²ç»æˆä¸ºäº†è®¸å¤šé«˜æ•ˆç ”ç©¶è€…å’ŒèŒåœºäººçš„å¿…å¤‡æŠ€èƒ½ã€‚ ä»æ·±åº¦å­¦ä¹ åˆ°å¼ºåŒ–å­¦ä¹ ï¼Œä»å¤§æ¨¡å‹è®­ç»ƒåˆ°å®é™…åº”ç”¨ï¼ŒAIæŠ€æœ¯çš„å¹¿åº¦å’Œæ·±åº¦ä¸æ–­æ‹“å±•ã€‚</p>
<p>ä½œä¸ºä¸€åAIå­¦ä¹ è€…ï¼Œé¢å¯¹æµ©ç€šçš„çŸ¥è¯†æµ·æ´‹ï¼Œå¦‚ä½•æœ‰æ¡ä¸ç´Šåœ°å­¦ä¹ å¹¶åº”ç”¨è¿™äº›æŠ€æœ¯å‘¢ï¼Ÿ åˆ«æ‹…å¿ƒï¼Œä»Šå¤©æˆ‘ä¸ºä½ æ•´ç†äº†ä¸€ä»½å…¨é¢çš„AIå­¦ä¹ è·¯çº¿å›¾åŠèµ„æºæ¨èï¼Œå¸¦ä½ ä¸€æ­¥æ­¥è¸ä¸ŠAIå­¦ä¹ ä¹‹è·¯ã€‚</p>
<h2 data-id="heading-0">AIè·¯çº¿å›¾</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2aec5ac0f8c4ea3b400a695368111ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066135&amp;x-signature=brP1bHElxFxYfz437lOWOK8Iw3s%3D" alt="" loading="lazy"/></p>
<p>æ‹†åˆ†å¼€æ¥å…¶å®å°±å››å¤§é˜¶æ®µï¼Œå±‚å±‚é€’è¿›ï¼Œç†è®ºï¼‹å®æˆ˜ï¼Œéå¸¸é€‚åˆ0åŸº</p>
<h2 data-id="heading-1">ç¬¬ä¸€é˜¶æ®µï¼ŒåŸºç¡€ç†è®º</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df7f4951f49d466182492ce02698704c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066135&amp;x-signature=txKhQkpJQivPRnEuDyNz1CUd3%2Fw%3D" alt="" loading="lazy"/></p>
<p>Pythonæ˜¯é¦–è¦æŒæ¡çš„è¯­è¨€ï¼Œå…¶æ¬¡è¦æŒæ¡æ•°æ®ç»“æ„ä¸ç®—æ³•å’Œæ•°å­¦åŸºç¡€ï¼ŒåŠæŒæ¡ä¸‰æ–¹åº“çš„å®‰è£…ä¸ä½¿ç”¨</p>
<h2 data-id="heading-2">ç¬¬äºŒé˜¶æ®µï¼Œæ ¸å¿ƒè¯¾ç¨‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60d583bd178d4aac8bb6e9fbf3d71585~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066135&amp;x-signature=PlPWHH9JNreHY75hiT13q5CI4vw%3D" alt="" loading="lazy"/></p>
<p>æŒæ¡å›¾åƒè®¤çŸ¥ä¸Opcvã€æœºå™¨å­¦ä¹ ã€æœºå™¨è§†è§‰</p>
<h2 data-id="heading-3">ç¬¬ä¸‰é˜¶æ®µï¼šæ·±åº¦è¯¾ç¨‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99f18af21eec46f4932d160c1f947616~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066135&amp;x-signature=y8nkc4P7x2jq88%2BvnN0nSghd5W4%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªé‡Œé¢è¦æŒæ¡æ·±åº¦å­¦ä¹ ã€å·ç§¯ç¥ç»ç½‘ç»œCNNã€å¾ªç¯ç¥ç»ç½‘ç»œRNNã€TransformeråŠå¤§æ¨¡å‹</p>
<h2 data-id="heading-4">ç¬¬å››é˜¶æ®µï¼šå®æˆ˜</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/029cd7842cb54b51b073af6a0c7bd934~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066135&amp;x-signature=eiTiaODiwZyZx9WrJSmBTLoqAQg%3D" alt="" loading="lazy"/></p>
<p>ä¸ç®¡ä½ æ˜¯æé«˜è‡ªå·±çš„èƒ½åŠ›ï¼Œè¿˜æ˜¯æ‰¾å·¥ä½œï¼Œå‚ä¸å®æˆ˜é¡¹ç›®éå¸¸é‡è¦</p>
<h2 data-id="heading-5">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆï¼šåˆå­¦è€…çš„åŠ¡å®å­¦ä¹ è·¯çº¿å›¾]]></title>    <link>https://juejin.cn/post/7586588823906271241</link>    <guid>https://juejin.cn/post/7586588823906271241</guid>    <pubDate>2025-12-23T03:46:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586588823906271241" data-draft-id="7586588823906254857" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆï¼šåˆå­¦è€…çš„åŠ¡å®å­¦ä¹ è·¯çº¿å›¾"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-23T03:46:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆï¼šåˆå­¦è€…çš„åŠ¡å®å­¦ä¹ è·¯çº¿å›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:46:54.000Z" title="Tue Dec 23 2025 03:46:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶èŠèŠå¦‚ä½•æˆä¸ºä¸€åäººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆâ€”â€”ä½†ä¼šé‡‡ç”¨åŠ¡å®çš„è§†è§’ï¼Œå……åˆ†è€ƒè™‘å¤§å¤šæ•°äººå®é™…çš„èµ·ç‚¹ã€‚</p>
<p>å¸‚é¢ä¸Šæœ‰æ— æ•°â€œäººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆå­¦ä¹ è·¯çº¿å›¾â€ï¼Œå£°ç§°åªéœ€å‡ ä¸ªæœˆå°±èƒ½è®©ä½ æˆä¸ºäººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆã€‚ä½œä¸ºä¸€ååœ¨äºšé©¬é€Šï¼ˆAmazonï¼‰ä»äº‹åº”ç”¨æœºå™¨å­¦ä¹ å·¥ä½œã€ä¸“æ³¨äºæœºå™¨å­¦ä¹ åŸºç¡€è®¾æ–½åŠç”Ÿæˆå¼äººå·¥æ™ºèƒ½å†…å®¹ç†è§£çš„ä»ä¸šè€…ï¼Œæˆ‘å¯ä»¥è´Ÿè´£ä»»åœ°å‘Šè¯‰ä½ ï¼šè¦åœ¨å¤§å‹ç§‘æŠ€å…¬å¸æˆä¸ºä¸€åäººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆï¼Œéœ€è¦æŠ•å…¥å¤§é‡æ—¶é—´å¹¶ä»˜å‡ºæŒç»­çš„åŠªåŠ›ã€‚</p>
<p>ä½†å¥½æ¶ˆæ¯æ˜¯ï¼Œè¦å¼€å§‹æ„å»ºå®ç”¨çš„äººå·¥æ™ºèƒ½åº”ç”¨ï¼Œä½ å¹¶ä¸éœ€è¦æŒæ¡æ‰€æœ‰é‚£äº›é«˜çº§æŠ€èƒ½ï¼å¤§å¤šæ•°è‡ªå­¦æˆæ‰çš„å¼€å‘è€…å¹¶ä¸ä¼šä»å¤§å‹ç§‘æŠ€å…¬å¸èµ·æ­¥ï¼›ä»–ä»¬é€šå¸¸ä»ä¸ªäººé¡¹ç›®åšèµ·ï¼Œæˆ–åŠ å…¥åˆåˆ›å…¬å¸ï¼Œäº¦æˆ–æ˜¯å¼€å‘è‡ªå·±çš„äººå·¥æ™ºèƒ½åº”ç”¨ï¼Œåœ¨å®è·µè¿‡ç¨‹ä¸­ä¸æ–­å­¦ä¹ ã€‚</p>
<p>å› æ­¤ï¼Œä¸‹é¢æˆ‘å°†æ‹†è§£ä¸€ä»½æ›´åŠ¡å®çš„å­¦ä¹ è·¯çº¿å›¾ï¼Œæ¸…æ™°è¯´æ˜åœ¨ä½ å­¦ä¹ æ—…ç¨‹çš„æ¯ä¸ªé˜¶æ®µï¼ŒçœŸæ­£éœ€è¦æŒæ¡çš„å†…å®¹ã€‚</p>
<p>é¡ºä¾¿æä¸€å¥ï¼Œå¦‚æœä½ åªæƒ³äº†è§£æ‰€éœ€æŒæ¡çš„æŠ€èƒ½æ¸…å•ï¼Œå¯ä»¥åœ¨ç§ä¿¡ä½œè€…å…è´¹ä¸‹è½½ã€‚</p>
<h2 data-id="heading-0"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆï¼Ÿ</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆçš„å…·ä½“å·¥ä½œå†…å®¹ï¼Œå› ä¸ºå¾ˆå¤šå­¦ä¹ è·¯çº¿å›¾ç”šè‡³éƒ½æ²¡æœ‰å‡†ç¡®æè¿°è¿™ä¸ªå²—ä½ï¼å®ƒä»¬å¾€å¾€æè¿°çš„æ˜¯æ•°æ®ç§‘å­¦æˆ–ä¼ ç»Ÿæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆçš„å·¥ä½œèŒƒç•´ã€‚</p>
<p>äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆçš„æ ¸å¿ƒèŒè´£å¹¶éåƒæ•°æ®ç§‘å­¦å®¶æˆ–æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆé‚£æ ·ä»é›¶å¼€å§‹è®­ç»ƒæ¨¡å‹ã€‚ç›¸åï¼Œäººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆä¸»è¦è´Ÿè´£ä»¥ä¸‹å·¥ä½œï¼š</p>
<ul>
<li>â€¢ åŸºäºGPT-4ã€LLaMAç­‰é¢„è®­ç»ƒåŸºç¡€æ¨¡å‹æ„å»ºåº”ç”¨ç¨‹åº</li>
<li>â€¢ ä¸“æ³¨äºé€šè¿‡æç¤ºå·¥ç¨‹ã€æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRetrieval-Augmented Generationï¼ŒRAGï¼‰å’Œå¾®è°ƒå®ç°æ¨¡å‹é€‚é…</li>
<li>â€¢ ä¼˜å…ˆè€ƒè™‘å¯æ‰©å±•æ€§ã€è¯„ä¼°ã€æ¨ç†ä¼˜åŒ–åŠå®é™…åœºæ™¯éƒ¨ç½²</li>
<li>â€¢ å¤„ç†ç«¯åˆ°ç«¯ç³»ç»Ÿï¼ŒåŒ…æ‹¬å®‰å…¨æ€§ã€æ•°æ®å¤„ç†å’Œç”¨æˆ·åé¦ˆ</li>
</ul>
<p>è¿™æ˜¯ä¸€ä¸ªä»¥è½¯ä»¶å·¥ç¨‹æŠ€èƒ½ä¸ºåŸºç¡€çš„ä¸“ä¸šå²—ä½ï¼Œæ ¹æ®ä¸ªäººèƒŒæ™¯ä¸åŒï¼Œæœ‰å¤šç§å…¥è¡Œé€”å¾„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠè¿™ä¸€ç‚¹ã€‚</p>
<h2 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>åŸºç¡€æŠ€èƒ½</h2>
<p>åœ¨æ·±å…¥å­¦ä¹ äººå·¥æ™ºèƒ½ç‰¹å®šæŠ€æœ¯ä¹‹å‰ï¼Œä½ éœ€è¦æŒæ¡ä¸€äº›åŸºç¡€æŠ€èƒ½ï¼š</p>
<ul>
<li>â€¢Â <strong>æ•°å­¦åŸºç¡€</strong>ï¼šç»Ÿè®¡å­¦ã€æ¦‚ç‡è®ºå’ŒåŸºç¡€çº¿æ€§ä»£æ•°æœ‰åŠ©äºä½ ç†è§£æŠ€æœ¯èƒŒåçš„åŸç†ã€‚ä½ ä¸éœ€è¦æ‹¥æœ‰æ•°å­¦åšå£«å­¦ä½ï¼Œä½†è‡³å°‘è¦ä»æ¦‚å¿µä¸Šç†è§£çŸ©é˜µè¿ç®—ã€æ¦‚ç‡åˆ†å¸ƒç­‰æ¦‚å¿µã€‚</li>
<li>â€¢Â <strong>Pythonç¼–ç¨‹</strong>ï¼šå³ä½¿æ˜¯éƒ¨ç½²è‡ªå·±çš„äººå·¥æ™ºèƒ½åº”ç”¨ï¼Œä½ ä¹Ÿéœ€è¦èƒ½å¤Ÿç¼–å†™ç”Ÿäº§çº§åˆ«çš„ä»£ç ã€‚åœ¨è¯¥é¢†åŸŸï¼Œæ‰å®çš„PythonæŠ€èƒ½å‡ ä¹æ˜¯å¿…å¤‡æ¡ä»¶ã€‚</li>
<li>â€¢Â <strong>åŸºç¡€è½¯ä»¶å¼€å‘æ¦‚å¿µ</strong>ï¼šåŒ…æ‹¬ä½¿ç”¨Gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€å‘½ä»¤è¡ŒåŸºç¡€æ“ä½œï¼Œä»¥åŠç†è§£å¦‚ä½•ä½¿ç”¨APIã€‚ä½ éœ€è¦çŸ¥é“ä¸åŒæœåŠ¡ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Œä»¥åŠå¦‚ä½•æœ‰æ•ˆç®¡ç†ä»£ç ã€‚</li>
<li>â€¢Â <strong>æœºå™¨å­¦ä¹ åŸºç¡€æ¦‚å¿µ</strong>ï¼šå°½ç®¡äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆä¸å¸¸ä»é›¶å¼€å§‹è®­ç»ƒæ¨¡å‹ï¼Œä½†ç†è§£ç›‘ç£å­¦ä¹ ä¸æ— ç›‘ç£å­¦ä¹ çš„åŒºåˆ«ã€åŸºç¡€æ¨¡å‹è¯„ä¼°æŒ‡æ ‡ï¼Œä»¥åŠè¿‡æ‹Ÿåˆã€æ¬ æ‹Ÿåˆç­‰æ¦‚å¿µï¼Œèƒ½è®©ä½ æŒæ¡ç†è§£æ›´é«˜çº§ä¸»é¢˜çš„â€œé€šç”¨è¯­è¨€â€ã€‚</li>
</ul>
<p>è¿™äº›åŸºç¡€è‡³å…³é‡è¦ï¼Œå› ä¸ºäººå·¥æ™ºèƒ½å·¥ç¨‹æœ¬è´¨ä¸Šæ˜¯åœ¨è½¯ä»¶å·¥ç¨‹å­¦ç§‘åŸºç¡€ä¸Šå‘å±•èµ·æ¥çš„ä¸“ä¸šé¢†åŸŸã€‚æ²¡æœ‰è¿™äº›åŸºç¡€ï¼Œä½ åœ¨å­¦ä¹ æ›´é«˜çº§æ¦‚å¿µæ—¶ä¼šä¸¾æ­¥ç»´è‰°ã€‚</p>
<h2 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>æ„å»ºä½ çš„ç¬¬ä¸€ä¸ªäººå·¥æ™ºèƒ½é¡¹ç›®</h2>
<p>æŒæ¡ä¸Šè¿°åŸºç¡€åï¼Œä½ å°±å¯ä»¥å¼€å§‹æ¥è§¦äººå·¥æ™ºèƒ½å·¥å…·å’Œæ¨¡å‹äº†ã€‚é¦–å…ˆï¼Œä½ éœ€è¦å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>
<ol>
<li><strong>å­¦ä¹ ä½¿ç”¨äººå·¥æ™ºèƒ½API</strong>ï¼šåƒOpenAI APIè¿™æ ·çš„æœåŠ¡èƒ½è®©ä½ æ— éœ€è‡ªè¡Œæ„å»ºæ¨¡å‹ï¼Œå°±èƒ½é›†æˆå¼ºå¤§çš„æ¨¡å‹åŠŸèƒ½ã€‚è¿™æ˜¯å¼€å§‹æ„å»ºå…·å¤‡äººå·¥æ™ºèƒ½èƒ½åŠ›çš„å®é™…åº”ç”¨æœ€å¿«çš„æ–¹å¼ã€‚</li>
</ol>
</li>
<li>
<ol start="2">
<li><strong>ç†è§£æç¤ºå·¥ç¨‹</strong>ï¼šå­¦ä¹ å¦‚ä½•ä¸äººå·¥æ™ºèƒ½æ¨¡å‹è¿›è¡Œæœ‰æ•ˆâ€œæ²Ÿé€šâ€æ˜¯ä¸€é¡¹å…³é”®æŠ€èƒ½ã€‚è®¾è®¡ç²¾è‰¯çš„æç¤ºèƒ½æ˜¾è‘—æå‡æ¨¡å‹è¾“å‡ºè´¨é‡ï¼Œå¯¹äºè·å¾—ç¨³å®šç»“æœè‡³å…³é‡è¦ã€‚</li>
</ol>
</li>
<li>
<ol start="3">
<li><strong>æ„å»ºç®€å•çš„RAGåº”ç”¨</strong>ï¼šè¿™éœ€è¦é€šè¿‡å‘é‡æ•°æ®åº“å’ŒåµŒå…¥æŠ€æœ¯ï¼Œå°†äººå·¥æ™ºèƒ½æ¨¡å‹ä¸ä½ è‡ªå·±çš„æ•°æ®æºè¿æ¥èµ·æ¥ï¼Œä»è€Œè®©æ¨¡å‹èƒ½æ›´æœ‰æ•ˆåœ°å›ç­”ä½ çš„é—®é¢˜ã€‚</li>
</ol>
</li>
<li>
<ol start="4">
<li><strong>å°è¯•ä¸åŒçš„é¢„è®­ç»ƒæ¨¡å‹</strong>ï¼šåˆ©ç”¨Hugging Faceç­‰å¹³å°è·å–ä»–äººå¼€å‘çš„æ¨¡å‹ã€‚è¿™èƒ½è®©ä½ åœ¨æ— éœ€è‡ªè¡Œè®­ç»ƒæˆ–å¾®è°ƒæ¨¡å‹çš„æƒ…å†µä¸‹ï¼Œç§¯ç´¯å¯¹ä¸åŒæ¨¡å‹æ¶æ„çš„ç»éªŒã€‚</li>
</ol>
</li>
<li>
<ol start="5">
<li><strong>æŒæ¡åŸºç¡€åº”ç”¨æ¶æ„</strong>ï¼šä½ éœ€è¦å¼€å§‹å­¦ä¹ å¦‚ä½•æ„å»ºäººå·¥æ™ºèƒ½åº”ç”¨çš„ç»“æ„ï¼ŒåŒ…æ‹¬æ°å½“çš„è¾“å…¥å¤„ç†ã€ä¸Šä¸‹æ–‡æ„å»ºå’Œè¾“å‡ºå¤„ç†ã€‚</li>
</ol>
</li>
</ol>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä½ çš„é‡ç‚¹æ˜¯â€œåº”ç”¨â€è€Œéâ€œåˆ›é€ â€â€”â€”å³åˆ©ç”¨ç°æœ‰å·¥å…·æ„å»ºå®ç”¨é¡¹ç›®ã€‚å¤§å¤šæ•°è‡ªå­¦å¼€å‘è€…éƒ½æ˜¯ä»è¿™ä¸ªé˜¶æ®µèµ·æ­¥çš„ï¼ä½ å¯ä»¥å¼€å‘èŠå¤©æœºå™¨äººã€å†…å®¹ç”Ÿæˆå™¨ã€ç®€å•åˆ†ç±»ç³»ç»Ÿç­‰åº”ç”¨ï¼Œè§£å†³å®é™…é—®é¢˜ã€‚</p>
<p>å¦‚æœä½ éœ€è¦å¸®åŠ©æ¥å­¦ä¹ æ„å»ºé¡¹ç›®æ‰€éœ€çš„å…¨éƒ¨æŠ€èƒ½ï¼ŒDataCampå¹³å°æä¾›äº†ä¼˜è´¨è¯¾ç¨‹ï¼ŒåŠ©åŠ›ä½ æ‰“ä¸‹äººå·¥æ™ºèƒ½å·¥ç¨‹åŸºç¡€ï¼š</p>
<ul>
<li>â€¢ å¯¹äºå¸Œæœ›å°†äººå·¥æ™ºèƒ½é›†æˆåˆ°åº”ç”¨ä¸­çš„å¼€å‘è€…ï¼Œå…¶â€œå¼€å‘è€…äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆåŠ©ç†â€ï¼ˆAssociate AI Engineer for Developersï¼‰å­¦ä¹ è·¯å¾„ä¼šæ•™ä½ å¦‚ä½•ä½¿ç”¨OpenAI APIã€Hugging Faceã€LangChainï¼Œä»¥åŠPineconeç­‰å‘é‡æ•°æ®åº“ã€‚</li>
<li>â€¢ å¯¹äºæ‹¥æœ‰æ•°æ®ç§‘å­¦èƒŒæ™¯ã€å¸Œæœ›æ·±å…¥å­¦ä¹ åŸºç¡€æ¨¡å‹åº”ç”¨çš„äººï¼Œâ€œæ•°æ®ç§‘å­¦å®¶äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆåŠ©ç†â€ï¼ˆAssociate AI Engineer for Data Scientistsï¼‰å­¦ä¹ è·¯å¾„èƒ½å¸®åŠ©ä½ å‘äººå·¥æ™ºèƒ½å·¥ç¨‹é¢†åŸŸè½¬å‹ã€‚</li>
<li>â€¢ å¦‚æœä½ æ˜¯å®Œå…¨çš„åˆå­¦è€…ï¼Œâ€œäººå·¥æ™ºèƒ½åŸºç¡€â€ï¼ˆAI Fundamentalsï¼‰å­¦ä¹ è·¯å¾„ä¼šé€šè¿‡æ— ä»£ç æ–¹å¼ï¼Œä¸ºä½ ä»‹ç»äººå·¥æ™ºèƒ½æ ¸å¿ƒæ¦‚å¿µã€‚</li>
</ul>
<p>è¿™äº›è¯¾ç¨‹çš„ä¼˜åŠ¿åœ¨äºï¼Œå®ƒä»¬èƒ½ä¸ºä½ æ‰“ä¸‹å¿…è¦çš„åŸºç¡€ï¼Œè®©ä½ ï¼š</p>
<ul>
<li>â€¢ å¼€å§‹æ„å»ºå®é™…é¡¹ç›®â€”â€”è¿™æ˜¯å­¦ä¹ è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ç¯èŠ‚</li>
<li>â€¢ å‘ç°äººå·¥æ™ºèƒ½å·¥ç¨‹é¢†åŸŸä¸­æœ€å¸å¼•ä½ çš„æ–¹å‘ï¼Œä»¥ä¾¿ç»§ç»­ä½ çš„å­¦ä¹ æ—…ç¨‹</li>
</ul>
<h2 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>è¿ˆå‘ä¸“ä¸šäººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆ</h2>
<p>æ‹¥æœ‰æ‰å®çš„åŸºç¡€å¹¶å®Œæˆä¸€äº›å®é™…é¡¹ç›®åï¼Œä½ è‡ªç„¶ä¼šå¸Œæœ›æ·±åŒ–è‡ªå·±çš„çŸ¥è¯†ã€‚</p>
<p>æ­¤æ—¶ï¼Œé˜…è¯»å¥‡æ™®Â·èƒ¡æ©ï¼ˆChip Huyenï¼‰æ‰€è‘—çš„ã€Šäººå·¥æ™ºèƒ½å·¥ç¨‹ã€‹ï¼ˆAI Engineeringï¼‰æ˜¯ç»ä½³é€‰æ‹©ï¼Œè¯¥ä¹¦æ¶µç›–äº†æˆä¸ºä¸€åå®æˆ˜å‹äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆæ‰€éœ€ç†è§£çš„å…¨éƒ¨å†…å®¹ã€‚é˜…è¯»è¿™æœ¬ä¹¦åŠå…¶å‚è€ƒæ–‡çŒ®ï¼Œèƒ½è®©ä½ åœ¨å­¦ä¹ é“è·¯ä¸Šç¨³æ­¥å‰è¡Œã€‚</p>
<p>é¡ºä¾¿è¯´ä¸€å¥â€”â€”æˆ‘åœ¨è‡ªå·±çš„YouTubeé¢‘é“ä¸Šåˆ¶ä½œäº†ä¸€ä¸ª76åˆ†é’Ÿçš„å®Œæ•´ç‰ˆæ€»ç»“è§†é¢‘ï¼Œæ‹†è§£äº†ä¹¦ä¸­æ‰€æœ‰å…³é”®æ¦‚å¿µã€‚ä½ å¯ä»¥åœ¨é˜…è¯»å‰è§‚çœ‹è¯¥è§†é¢‘è¿›è¡Œé¢„ä¹ ï¼Œä¹Ÿå¯ä»¥åœ¨é˜…è¯»åè§‚çœ‹ä»¥å·©å›ºå¤ä¹ ã€‚</p>
<p>éšç€ä½ å®Œæˆæ›´å¤šé¡¹ç›®ï¼Œå¹¶å­¦ä¹ è¯¸å¦‚å¥‡æ™®æ‰€è‘—ä¹¦ç±ç­‰èµ„æ–™ï¼Œä½ çš„æŠ€èƒ½ä¼šè‡ªç„¶æ‹“å±•ï¼Œé€æ¸æ¶µç›–ä»¥ä¸‹é¢†åŸŸï¼š</p>
<ul>
<li>â€¢Â <strong>æ·±åº¦å­¦ä¹ </strong>ï¼šç†è§£ç¥ç»ç½‘ç»œçš„å¤æ‚ç»†èŠ‚ã€è®­ç»ƒè¿‡ç¨‹ä»¥åŠåŸºç¡€æ¨¡å‹çš„å·¥ä½œåŸç†ã€‚å­¦ä¹ Transformeræ¶æ„ã€æ³¨æ„åŠ›æœºåˆ¶ï¼Œä»¥åŠåµŒå…¥æŠ€æœ¯å¦‚ä½•æ•æ‰è¯­ä¹‰ä¿¡æ¯ã€‚</li>
<li>â€¢Â <strong>éƒ¨ç½²ä¸åŸºç¡€è®¾æ–½</strong>ï¼šå­¦ä¹ ä½¿ç”¨Dockerè¿›è¡Œå®¹å™¨åŒ–ï¼Œä»¥åŠåœ¨AWSã€GCPã€Azureç­‰å¹³å°ä¸Šè¿›è¡Œäº‘éƒ¨ç½²ã€‚ç†è§£ç³»ç»Ÿæ¶æ„ã€ç›‘æ§å’Œæ—¥å¿—ç®¡ç†ã€‚</li>
<li>â€¢Â <strong>é«˜çº§RAGæŠ€æœ¯</strong>ï¼šå®ç°æ›´å¤æ‚çš„æ–‡æ¡£åˆ†å—ç­–ç•¥ï¼Œä¼˜åŒ–åµŒå…¥æŠ€æœ¯ï¼Œå¹¶ç†è§£ä¸åŒæ£€ç´¢æ–¹æ³•ä¹‹é—´çš„æƒè¡¡ã€‚</li>
<li>â€¢Â <strong>åŸºç¡€æ¨¡å‹åº”ç”¨</strong>ï¼šæŒæ¡ä½ç§©é€‚åº”ï¼ˆLoRAï¼‰ç­‰å¾®è°ƒæŠ€æœ¯ï¼Œå¹¶æ ¹æ®æˆæœ¬ã€æ€§èƒ½å’Œæˆæƒè®¸å¯ä¹‹é—´çš„æƒè¡¡ï¼Œåšå‡ºæ˜æ™ºçš„æ¨¡å‹é€‰æ‹©å†³ç­–ã€‚</li>
<li>â€¢Â <strong>æ„å»ºç¨³å¥çš„è¯„ä¼°ç³»ç»Ÿ</strong>ï¼šå»ºç«‹ç³»ç»ŸåŒ–çš„æ¨¡å‹æ€§èƒ½æµ‹è¯•æ–¹æ³•ï¼Œè¡¡é‡å¹»è§‰ç°è±¡ä¸åå·®ï¼Œå¹¶å®æ–½è‡ªåŠ¨åŒ–å’Œäººå·¥è¯„ä¼°æµç¨‹ã€‚</li>
<li>â€¢Â <strong>æ¨ç†ä¼˜åŒ–</strong>ï¼šé€šè¿‡é‡åŒ–ã€è’¸é¦ã€ä¼˜åŒ–éƒ¨ç½²æ¶æ„ç­‰æŠ€æœ¯ï¼Œæé«˜æ¨¡å‹è¿è¡Œé€Ÿåº¦å’Œæ•ˆç‡ã€‚</li>
<li>â€¢Â <strong>æ™ºèƒ½ä½“ç³»ç»Ÿ</strong>ï¼šæ„å»ºèƒ½å¤Ÿåˆ†è§£å¤æ‚ä»»åŠ¡ã€æœ‰æ•ˆä½¿ç”¨å·¥å…·ï¼Œå¹¶åœ¨é•¿æ—¶é—´äº¤äº’ä¸­ä¿æŒä¸Šä¸‹æ–‡çš„äººå·¥æ™ºèƒ½åº”ç”¨ã€‚</li>
<li>â€¢Â <strong>å®‰å…¨ã€éšç§ä¸ä¼¦ç†</strong>ï¼šå®æ–½é˜²èŒƒæç¤ºæ³¨å…¥ç­‰æ”»å‡»çš„é˜²æŠ¤æªæ–½ï¼Œç¡®ä¿éšç§åˆè§„ï¼Œå¹¶è€ƒé‡äººå·¥æ™ºèƒ½ç³»ç»Ÿçš„ä¼¦ç†å½±å“ã€‚</li>
</ul>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä½ æ­£ä»â€œä½¿ç”¨äººå·¥æ™ºèƒ½å·¥å…·â€å‘â€œç†è§£å·¥å…·å·¥ä½œåŸç†å¹¶é’ˆå¯¹ç‰¹å®šåœºæ™¯ä¼˜åŒ–å·¥å…·â€è½¬å˜ã€‚ä¸­çº§ä¸é«˜çº§äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆçš„åŒºåˆ«ï¼Œå¾€å¾€å°±åœ¨äºæ˜¯å¦ç²¾é€šè¿™äº›é«˜çº§ä¸»é¢˜ã€‚æ²¡æœ‰è¿™äº›æŠ€èƒ½ï¼Œä½ å°†éš¾ä»¥æ„å»ºå…·å¤‡è§„æ¨¡åŒ–è¿è¥èƒ½åŠ›æˆ–èƒ½åº”å¯¹å¤æ‚å®é™…åœºæ™¯çš„ç³»ç»Ÿï¼›è€ŒæŒæ¡è¿™äº›æŠ€èƒ½åï¼Œä½ å°†æœ‰èµ„æ ¼åº”è˜é¡¶çº§å…¬å¸ä¸­ä»äº‹å‰æ²¿äººå·¥æ™ºèƒ½åº”ç”¨çš„å²—ä½â€”â€”è¿™ç±»å²—ä½çš„è–ªèµ„é€šå¸¸å¯è¾¾30ä¸‡è‡³40ä¸‡ç¾å…ƒã€‚</p>
<p>åœ¨è¿™ä¸ªé«˜çº§é˜¶æ®µï¼Œè¿˜æœ‰æ›´å¤šä¸“ä¸šæŠ€èƒ½éœ€è¦å­¦ä¹ â€”â€”ä»æ•°æ®é›†å·¥ç¨‹åˆ°åº”ç”¨æ¶æ„æ¨¡å¼ç­‰ã€‚</p>
<p>å¦‚æœä½ æƒ³äº†è§£ä¸“ä¸šäººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆæ‰€éœ€çš„å®Œæ•´æŠ€èƒ½æ¸…å•ï¼Œæˆ‘åˆ¶ä½œäº†ä¸€ä»½è¯¦å°½çš„æ£€æŸ¥æ¸…å•ï¼Œå¯ç§ä¿¡ä½œè€…å…è´¹ä¸‹è½½ã€‚</p>
<h2 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>åŠ¡å®çš„æ—¶é—´è§„åˆ’</h2>
<p>ä»è¿™ä»½å……æ»¡æŠ€æœ¯ç»†èŠ‚çš„æ¸…å•ä¸­ä¸éš¾çœ‹å‡ºï¼Œæƒ³ä»å®Œå…¨çš„åˆå­¦è€…åœ¨ä¸‰ä¸ªæœˆå†…æˆé•¿ä¸ºä¸“ä¸šäººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆï¼Œæ˜¯ä¸ç°å®çš„ã€‚ä»¥ä¸‹æ˜¯æ›´åŠ¡å®çš„æ—¶é—´è§„åˆ’ï¼š</p>
<ul>
<li>â€¢Â <strong>æŒæ¡åŸºç¡€å¹¶æ„å»ºé¦–ä¸ªäººå·¥æ™ºèƒ½åº”ç”¨</strong>ï¼šçº¦6ä¸ªæœˆï¼ˆå…¼èŒå­¦ä¹ ï¼‰<br/>
è¿™ä¸€å‰ææ˜¯ä½ èƒ½æŒç»­å­¦ä¹ ï¼Œä¸”å·²å…·å¤‡ä¸€å®šç¼–ç¨‹åŸºç¡€ã€‚å¦‚æœä»é›¶åŸºç¡€å¼€å§‹ï¼Œéœ€é¢å¤–å¢åŠ 6ä¸ªæœˆã€‚</li>
<li>â€¢Â <strong>ç†Ÿç»ƒæŒæ¡æ›´é«˜çº§æ¦‚å¿µ</strong>ï¼šå†éœ€6è‡³12ä¸ªæœˆ<br/>
åœ¨æ­¤æœŸé—´ï¼Œä½ åº”ä¸æ–­æ„å»ºæ›´å¤æ‚çš„é¡¹ç›®ï¼Œå¹¶æ·±åŒ–å¯¹åº•å±‚æŠ€æœ¯çš„ç†è§£ã€‚</li>
<li>â€¢Â <strong>è¾¾åˆ°ä¸“ä¸šæ°´å¹³</strong>ï¼šå†éœ€1è‡³2å¹´<br/>
è¿™ä¸€é˜¶æ®µï¼Œä½ å°†åŸ¹å…»åœ¨å¤§å‹å…¬å¸æˆ–é«˜çº§äººå·¥æ™ºèƒ½åº”ç”¨é¡¹ç›®ä¸­ä»»èŒæ‰€éœ€çš„ä¸“ä¸šæŠ€èƒ½ã€‚</li>
<li>â€¢Â <strong>æˆä¸ºé¡¶çº§å…¬å¸çš„é«˜çº§/ä¸»ç®¡çº§äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆï¼ˆè–ªèµ„çœŸæ­£è¾¾åˆ°30ä¸‡ç¾å…ƒä»¥ä¸Šï¼‰</strong> ï¼šå†éœ€3è‡³5å¹´<br/>
è¦ç²¾é€šäººå·¥æ™ºèƒ½å·¥ç¨‹çš„å…¨é¢†åŸŸæŠ€èƒ½ï¼Œå¹¶ç§¯ç´¯é¢†å¯¼å¤æ‚é¡¹ç›®çš„ç»éªŒï¼Œéœ€è¦åœ¨è¯¥é¢†åŸŸæŠ•å…¥å¤§é‡æ—¶é—´ã€‚</li>
</ul>
<p>æ€»ä½“è€Œè¨€ï¼Œå¦‚æœä½ ä»é›¶åŸºç¡€å¼€å§‹ï¼Œä¸”ä»¥å…¼èŒæ–¹å¼å­¦ä¹ ï¼Œé¢„è®¡éœ€è¦3è‡³6å¹´æ‰èƒ½è¾¾æˆç›®æ ‡ã€‚</p>
<p>è¿™çœ‹èµ·æ¥æ—¶é—´å¾ˆé•¿ï¼Ÿç¡®å®å¦‚æ­¤ï¼Œä½†ä¹Ÿç¬¦åˆå®é™…æƒ…å†µã€‚</p>
<p>è¯·è®°ä½ï¼Œä½ å®Œå…¨å¯ä»¥æ›´æ—©åœ°å¼€å§‹æ„å»ºé¡¹ç›®ï¼Œç”šè‡³è¿›å…¥è¯¥é¢†åŸŸå·¥ä½œâ€”â€”æ— éœ€ç­‰åˆ°æŒæ¡æ‰€æœ‰æŠ€èƒ½æ‰è¡ŒåŠ¨ã€‚</p>
<h2 data-id="heading-5">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‰æ¬¾ä½ å¿…é¡»å°è¯•çš„è¶…æ£’AIå·¥å…·]]></title>    <link>https://juejin.cn/post/7586585498744766518</link>    <guid>https://juejin.cn/post/7586585498744766518</guid>    <pubDate>2025-12-23T03:45:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586585498744766518" data-draft-id="7586573133349519406" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‰æ¬¾ä½ å¿…é¡»å°è¯•çš„è¶…æ£’AIå·¥å…·"/> <meta itemprop="keywords" content="AIGC,OpenAI"/> <meta itemprop="datePublished" content="2025-12-23T03:45:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‰æ€æ´¾Anspire"/> <meta itemprop="url" content="https://juejin.cn/user/3044964115417419"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‰æ¬¾ä½ å¿…é¡»å°è¯•çš„è¶…æ£’AIå·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3044964115417419/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‰æ€æ´¾Anspire
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:45:43.000Z" title="Tue Dec 23 2025 03:45:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6599bc8f58c9463fbc251172fc64141d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=6PZIPjWQTD%2FpU7LWuHYwdn1wn7M%3D" alt="" loading="lazy"/></p>
<p>ä½œè€…ä½¿ç”¨AIç”Ÿæˆ</p>
<p>å¿«é€Ÿæé†’ä¸€ä¸‹ã€‚è¿™äº›ä¸æ˜¯èµåŠ©å†…å®¹ï¼Œå®ƒä»¬åªæ˜¯å¾ˆæ£’ã€‚</p>
<p><strong>è®©æˆ‘ä»¬ç›´æ¥å¼€å§‹å§ï¼</strong></p>
<h2 data-id="heading-0">1. Google AI Studioåº”ç”¨æ„å»ºå™¨</h2>
<p>å”¯ä¸€çš„Vibecodingå¹³å°ï¼Œèƒ½è®©ä½ åœ¨å‡ åˆ†é’Ÿå†…ï¼ˆå…è´¹ï¼‰è·å¾—ç¾è§‚ã€å®ç”¨çš„åº”ç”¨ç¨‹åºã€‚</p>
<p>æ²¡é”™ï¼Œä½ æ²¡çœ‹é”™ã€‚ä½ å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…åˆ›å»ºè‡ªå·±çš„åº”ç”¨ç¨‹åºï¼ˆå†…éƒ¨å·¥å…·æˆ–é¢å‘å…¬ä¼—çš„åº”ç”¨ï¼‰ã€‚å®ƒç¡®å®æœ‰æ•ˆï¼Œè€Œä¸”æ•ˆæœéå¸¸å‡ºè‰²ã€‚</p>
<p>è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Faistudio.google.com%2F" target="_blank" title="https://aistudio.google.com/" ref="nofollow noopener noreferrer">aistudio.google.com/</a>å¹¶æ³¨å†Œä¸€ä¸ªå…è´¹è´¦æˆ·ï¼Œç„¶åç‚¹å‡»ä¾§è¾¹æ ä¸­çš„â€œæ„å»ºâ€å¼€å§‹ä½¿ç”¨ã€‚</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc8ad248945c4ee48f8024538284428f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=Ad6M0FDaK%2FXxmDsh2qlWQeZrz5k%3D" alt="" loading="lazy"/></p>
<p>æ„å»ºå°±åƒç‚¹å‡»å’Œæç¤ºä¸€æ ·ç®€å•</p>
<p><strong>è®©æˆ‘ä»¬ç›´æ¥æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚</strong></p>
<p>æœ€è¿‘ï¼Œæˆ‘æƒ³ä¸ºæˆ‘çš„æœè£…å“ç‰Œæ·»åŠ ä¸€äº›åˆºç»£äº§å“ã€‚ç„¶è€Œï¼Œæˆ‘ç”¨æ¥åˆºç»£æœè£…çš„ç½‘ç«™åªæœ‰å‡ ç§çº¿çš„é¢œè‰²ã€‚æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªå·¥å…·ï¼Œä½¿ç”¨</p>
<p>ä»…</p>
<p>è¿™15ç§é¢œè‰²å°†å›¾åƒè½¬æ¢ä¸ºåƒç´ ç”»ã€‚</p>
<p>æˆ‘å…ˆè¿›è¡Œäº†ç®€è¦æè¿°ï¼Œå®ƒé©¬ä¸Šå°±å¼€å§‹æ„å»ºäº†ã€‚</p>
<p>ç»è¿‡å‡ ä¸ªæç¤ºå’Œæ·»åŠ äº†å‡ ä¸ªåŠŸèƒ½åï¼Œæˆ‘å¾—åˆ°äº†ä¸€ä¸ªè¿è¡Œæ•ˆæœæä½³çš„ä¸œè¥¿ï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b8b5614fbd8430eb5177252c31204f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=IQdEFC7OQt%2FtjYcDj2Ggx9hMVe4%3D" alt="" loading="lazy"/></p>
<p>æˆåŠŸå°†é¦™è•‰è½¬æ¢ä¸ºç‰¹å®šé¢œè‰²çš„åƒç´ ç”»ï¼</p>
<p>ä½ ç”šè‡³å¯ä»¥éƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œä»¥ä¾¿å…¶ä»–äººä¹Ÿèƒ½ä½¿ç”¨å®ƒï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5fab72921164219a5265b126a091971~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=MUpDTGoTNnHXPKLEM7oKd00Ih%2FQ%3D" alt="" loading="lazy"/></p>
<p>ä»Google AIå·¥ä½œå®¤å¯¼å‡ºé€‰é¡¹</p>
<p>è¿™ç»å¯¹æ˜¯æˆ‘ç”¨è¿‡çš„æœ€è®©äººä¸Šç˜¾ã€æœ€æœ‰è¶£çš„AIå·¥å…·ã€‚</p>
<p>ä¸ºäº†å¥½ç©ï¼Œæˆ‘ä»…ç”¨ä¸¤ä¸ªå°æç¤ºå°±æˆåŠŸæ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„Wordleå…‹éš†ç‰ˆï¼ˆåªæ˜¯ä½¿ç”¨10å­—æ¯å•è¯ï¼‰ï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc0534412cab46a185eb1457c40f7513~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=9KrGakLm5x6AiwMXFHGoUN1a22s%3D" alt="" loading="lazy"/></p>
<p>æç¤ºè¯â€¦</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49d7e5b2d2a647b5ba6b0961c904b0b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=wisF2zIA7j4sGjkN%2B8N%2BF%2Bsv1ug%3D" alt="" loading="lazy"/></p>
<p>ä»¥åŠæœ€ç»ˆå‘ˆç°çš„æ¸¸æˆï¼</p>
<p>æ˜¯çš„ï¼Œå®ƒåœ¨å‡ åˆ†é’Ÿå†…å°±åˆ›å»ºäº†è¿™ä¸ªæ¸¸æˆï¼Œè€Œä¸”å®ƒçœŸçš„èƒ½è¿è¡Œã€‚ç›¸å½“ä»¤äººæƒŠå¹ï¼</p>
<h2 data-id="heading-1">2. å¤åˆ¶</h2>
<p>è¿è¡Œæœ€å…ˆè¿›çš„AIæ¨¡å‹ï¼Œåˆ›é€ ä¸€åˆ‡ã€‚</p>
<p>Replicateæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ±‡é›†äº†æ‰€æœ‰æœ€ä½³ç”Ÿæˆå¼AIå·¥å…·çš„åº“ã€‚Replicateä¸Šæœ‰æ•°åƒä¸ªAIæ¨¡å‹ï¼Œè€Œä¸”å®ƒä»¬éƒ½éå¸¸å®¹æ˜“è¿è¡Œã€‚</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0963472483c44761be44176808d4c629~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=x%2BtZq5XxG56ooe%2BxKD9cyJLSrVE%3D" alt="" loading="lazy"/></p>
<p>å±•ç¤ºä¸€ç³»åˆ—æ¨¡å‹çš„Replicateæ¢ç´¢é¡µé¢</p>
<p>è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Freplicate.com%2Fexplore" target="_blank" title="https://replicate.com/explore" ref="nofollow noopener noreferrer">replicate.com/explore</a>ï¼Œå³å¯ç«‹å³å¼€å§‹ã€‚</p>
<p><strong>æˆ‘å°†é€šè¿‡ä¸€ä¸ªä¾‹å­å‘ä½ å±•ç¤ºå®ƒçš„ä¸€äº›åŠŸèƒ½ï¼š</strong></p>
<p>é¦–å…ˆï¼Œå‡è®¾æˆ‘æƒ³ç”¨è¯­è¨€æ¨¡å‹ä¸ºAIå›¾åƒç”Ÿæˆå™¨ç”Ÿæˆä¸€ä¸ªæç¤ºè¯ã€‚åœ¨ç ”ç©¶äº†æ‰€æœ‰é¡¶çº§æ¨¡å‹åï¼Œæˆ‘é€‰æ‹©äº†Deepseekï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/810127694d7248f4a2ee0f298979052e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=0WS61tf%2BLOiBOwtQt4L7UVRfxxk%3D" alt="" loading="lazy"/></p>
<p>ç”Ÿæˆå›¾åƒæç¤º</p>
<p>ç„¶åï¼Œæˆ‘å¯ä»¥å°†è¿™ä¸ªå›¾åƒæç¤ºè¾“å…¥åˆ°ç›®å‰æœ€æ–°ã€æœ€å¥½çš„åˆ›æ„AIå›¾åƒæ¨¡å‹ä¹‹ä¸€â€”â€”Deepseek 4.5ä¸­ï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/159d354f174b423c986edb8afcb3952d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=t9Dkx77k%2FdSUlP7QpH3ftt%2FSBP4%3D" alt="" loading="lazy"/></p>
<p>æ¥è‡ªSeedreamçš„å›¾åƒå’Œæç¤º</p>
<p>ç°åœ¨ï¼Œå‡è®¾æˆ‘å–œæ¬¢å®ƒçš„æŸä¸€ä¸ªæ–¹é¢ã€‚ä½†å¦‚æœæˆ‘æ”¾å¤§ï¼Œå®ƒå°±å˜å¾—æ¨¡ç³Šäº†ï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7d2398a1f194136ae4232cdd1d54be0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=AeH2FzQJbNIjvhsSqGZchDZOQHo%3D" alt="" loading="lazy"/></p>
<p>å›¾åƒæœ‰ç‚¹æ¨¡ç³Šã€‚</p>
<p>è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå—¯ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨å›¾åƒè¶…åˆ†è¾¨ç‡å·¥å…·ï¼Œå°†åˆ†è¾¨ç‡å’Œç»†èŠ‚æå‡åˆ°ä»¤äººéš¾ä»¥ç½®ä¿¡çš„ç¨‹åº¦ï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ab38339acf848769459fed84d04c60a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=aGDd%2F7SWXPw5Y2GXCGnC8iDg73A%3D" alt="" loading="lazy"/></p>
<p>è½°ï¼ç¬é—´å‘ˆç°æ›´å‡ºè‰²çš„ç»†èŠ‚å’Œåˆ†è¾¨ç‡ã€‚</p>
<p>æœ€åï¼Œå‡è®¾æˆ‘æƒ³æŠŠå®ƒåšæˆè§†é¢‘ã€‚æˆ‘ä¹Ÿèƒ½åšåˆ°ï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cd3f6b94168407fa529fd0dfe542ad7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=H5F2usaeqluUbVPOuHpEIT6y1Vw%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨Veo 3.1åˆ¶ä½œè§†é¢‘</p>
<p>æ²¡é”™ï¼Œæ‰€ä»¥Replicateç›¸å½“é…·ã€‚é™¤äº†è¿™äº›åŠŸèƒ½ï¼Œä½ è¿˜å¯ä»¥ï¼š</p>
<ul>
<li>
<p>è½¬å½•éŸ³é¢‘</p>
</li>
<li>
<p>æ£€æµ‹å›¾åƒä¸­çš„å½¢çŠ¶</p>
</li>
<li>
<p>ç°å®ä¸–ç•Œè§†è§‰æ„ŸçŸ¥</p>
</li>
<li>
<p>ç”ŸæˆéŸ³æ•ˆ</p>
</li>
<li>
<p>OCRå›¾åƒ</p>
</li>
<li>
<p>è¿˜æœ‰æ›´å¤šï¼</p>
</li>
</ul>
<p>å¾ˆéš¾æƒ³è±¡æ‰€æœ‰è¿™äº›å·¥å…·éƒ½é›†æˆåœ¨ä¸€ä¸ªç®€å•çš„å¹³å°ä¸Šã€‚æˆ‘ä¸€ç›´ç”¨å®ƒæ¥å®Œæˆæ›´å…·åˆ›æ„çš„å·¥ä½œã€‚</p>
<h2 data-id="heading-2">3. Rhyme.ink</h2>
<p>è¯­éŸ³å†™ä½œç”»å¸ƒã€‚æ— éœ€è§¦ç¢°é”®ç›˜ï¼Œå³å¯è¿ç»­å†™ä½œæ•°å°æ—¶ã€‚</p>
<p>æŠŠæˆ‘æœ€å–œæ¬¢çš„ç•™åˆ°æœ€åâ€¦â€¦</p>
<p>ä½œä¸ºä¸€åç‹‚çƒ­çš„å†™ä½œè€…ï¼Œæˆ‘ä¸€ç›´åœ¨å¯»æ‰¾æ›´ç®€å•ã€æ›´å¿«æ·ã€æ›´å¥½çš„å†™ä½œæ–¹å¼ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Frhyme.ink%2F" target="_blank" title="https://rhyme.ink/" ref="nofollow noopener noreferrer">rhyme.ink</a>å°±æ˜¯ç­”æ¡ˆã€‚</p>
<p>ä½ åªéœ€ç”¨è¯­éŸ³å°±èƒ½æ’°å†™ã€æ ¼å¼åŒ–å’Œç¼–è¾‘æ•´ç¯‡æ–‡ç« ã€è®ºæ–‡æˆ–å…¶ä»–ä»»ä½•å†…å®¹ã€‚</p>
<p>å†™ä½œå˜å¾—åƒååœ¨æ¤…å­ä¸ŠèŠå¤©ä¸€æ ·è½»æ¾ã€‚ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨AIè¯­éŸ³å‘½ä»¤æ¥ä¿®æ­£è¯­æ³•é”™è¯¯ã€å»é™¤å¡«å……è¯ï¼Œä»¥åŠåšä»»ä½•ä½ èƒ½æƒ³åˆ°çš„äº‹æƒ…ã€‚</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1826c279523e4e1e82d71020e96b6042~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=Nb9anbgGtYHPw05S0qBh%2BsIS%2FJY%3D" alt="" loading="lazy"/></p>
<p>ã€ŠRhyme Canvasæ¬¢è¿æ–‡æ¡£ã€‹</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Rhyme å†™ä½œçš„ç¤ºä¾‹ï¼Œä»¥åŠä¸ºä½•å®ƒæ¯”æ‰“å­—ï¼Œç”šè‡³æ›´ä¸ç”¨è¯´æ‰‹å†™ï¼Œè¦å®¹æ˜“å¾—å¤šã€‚</p>
<p>å‡è®¾æˆ‘æƒ³å†™ä¸€ç¯‡å…³äºæˆ‘æœ€è¿‘æœ€å–œæ¬¢çš„æ–°éŸ³ä¹æµæ´¾ä¹‹ä¸€çš„å°åšå®¢æ–‡ç« ã€‚</p>
<p>æˆ‘å¯ä»¥è¯´è¯ï¼ŒRhymeä¼šåœ¨æˆ‘è¯´è¯æ—¶æ’å…¥æˆ‘çš„å¥å­ã€‚æˆ‘è¿˜å¯ä»¥é€šè¿‡è¯­éŸ³å‘½ä»¤æ·»åŠ ç©ºæ ¼ã€é¡¹ç›®ç¬¦å·å’Œå„ç§å…¶ä»–æ ¼å¼ï¼š</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c8176beb05b4468aeab070ec42308b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=TkbHcnVyvH8bgfDpnlAzVyVEZ0k%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¹ˆå¿«å°±å†™å®Œæ„Ÿè§‰çœŸå¥½ï¼</p>
<p>æˆ‘ç”¨è¯­éŸ³å†™å¹¶æ’ç‰ˆäº†è¿™ä¸ªå†…å®¹ï¼Œå¤§æ¦‚åªç”¨äº†ä¸€åˆ†é’Ÿã€‚è¿›å…¥çŠ¶æ€éœ€è¦ä¸€ç‚¹æ—¶é—´ï¼Œä½†ä¸€æ—¦ä½ è®©æ€ç»ªè‡ªç”±æµæ·Œï¼Œä¸å†æ‹…å¿ƒè¯­æ³•ã€æ­£ç¡®æ€§æˆ–çŠ¯é”™ï¼Œä¸€åˆ‡å°±å˜å¾—çœŸå®èµ·æ¥ã€‚</p>
<p>ä½ è¿˜å¯ä»¥è®©AIé€šè¿‡è¯­éŸ³ä¸ºä½ æ‰§è¡Œå‘½ä»¤ï¼Œåªéœ€è¯´â€œRhymeâ€å³å¯ã€‚ä¸æƒ³å­¦ä¹ è¯­éŸ³æ ¼å¼å‘½ä»¤ï¼Ÿä½ è¯´å®Œåï¼ŒRhymeå°±èƒ½å¸®ä½ å®Œæˆã€‚</p>
<p>å‡è®¾æˆ‘æƒ³æŠŠè¿™ä¸ªç”»å¸ƒå†…å®¹è½¬æ¢ä¸ºæ•£æ–‡å¹¶ä¿®æ­£ä¸€äº›è¯­æ³•é”™è¯¯ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘åªæ˜¯è¯´ï¼šâ€œå˜¿ï¼ŒRhymeï¼Œè¯·æŠŠè¿™ä¸ªç”»å¸ƒå†…å®¹è½¬æ¢ä¸ºæ•£æ–‡å¹¶ä¿®æ­£æ‰€æœ‰è¯­æ³•é”™è¯¯â€</p>
<p>æŒ‰å›è½¦é”®æˆ–ç‚¹å‡»ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f94b13cd20954cbd8da841f2b3a530dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a6J5oCd5rS-QW5zcGlyZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767066343&amp;x-signature=LYz9445WBt2sA4wSeqHLFUFmduw%3D" alt="" loading="lazy"/></p>
<p>å¿«é€Ÿç¼–è¾‘ï¼Œå°†ç”»å¸ƒè½¬æ¢ä¸ºæ•£æ–‡ã€‚</p>
<p><strong>éŸµå¾‹çš„ä¸€äº›æœ€ä½³éƒ¨åˆ†åŒ…æ‹¬ï¼š</strong></p>
<ol>
<li>
<p>è‡ªå®šä¹‰å•è¯è¯†åˆ«â€”â€”ä¸ºä»»ä½•å†…å®¹æ’å…¥è‡ªå®šä¹‰å•è¯ã€‚ä½ ç”šè‡³å¯ä»¥æ·»åŠ å•ä¸ªå•è¯å‘½ä»¤æ¥æ’å…¥æ•´ä¸ªæ®µè½ï¼</p>
</li>
<li>
<p>å®Œæ•´çš„Markdownç¼–è¾‘åŠŸèƒ½ï¼ˆå°±åƒMediumä¸€æ ·ï¼‰ã€‚ä½ å¯ä»¥æ·»åŠ æ ‡é¢˜ã€ç²—ä½“æ–‡æœ¬ã€åˆ—è¡¨ç­‰ç­‰ã€‚</p>
</li>
<li>
<p>å®Œå…¨æ”¯æŒè¯­éŸ³å¯¼èˆªã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¯­éŸ³å‘½ä»¤å¿«é€Ÿç§»åŠ¨å…‰æ ‡ã€‚å®é™…ä¸Šï¼Œæ‚¨æ ¹æœ¬æ— éœ€è§¦ç¢°é¼ æ ‡æˆ–é”®ç›˜ï¼</p>
</li>
<li>
<p>æ‰€æœ‰æ“ä½œéƒ½å¯æ’¤é”€ã€‚æ˜¯å¬é”™äº†ä½ çš„æŒ‡ä»¤å—ï¼Ÿè¿˜æ˜¯AIæ²¡æœ‰æŒ‰ä½ çš„è¦æ±‚æ‰§è¡Œï¼Ÿåªéœ€è¯´â€œæ’¤é”€â€ï¼Œç„¶åå†è¯•ä¸€æ¬¡ã€‚</p>
</li>
<li>
<p>å¯å®šåˆ¶çš„é¢œè‰²æ ·å¼ã€‚</p>
</li>
<li>
<p>ä¸“æ³¨æ¨¡å¼ï¼Œæä¾›æ— å¹²æ‰°çš„å†™ä½œç”»å¸ƒï¼Œ0 UIã€‚</p>
</li>
<li>
<p>è½¬å½•æ—¶å…·å¤‡å®Œæ•´çš„é”®ç›˜ç¼–è¾‘åŠŸèƒ½ã€‚</p>
</li>
<li>
<p>å“¦ï¼Œè€Œä¸”å®ƒæ˜¯å…è´¹çš„ï¼</p>
</li>
</ol>
<p>æˆ‘æ¯å¤©éƒ½åœ¨ç”¨å®ƒï¼Œå¸Œæœ›ä½ ä»¬ä¹Ÿèƒ½åƒæˆ‘ä¸€æ ·è§‰å¾—å®ƒå¾ˆæœ‰ç”¨ï¼æˆ‘ç‰¹åˆ«æ¿€åŠ¨èƒ½å’Œä½ ä»¬åˆ†äº«è¿™ä¸ªã€‚</p>
<p>è¿™äº›æ˜¯æˆ‘ç›®å‰æœ€å–œæ¬¢çš„AIå·¥å…·ã€‚ä½ æœ‰å–œæ¬¢çš„å—ï¼Ÿåœ¨è¯„è®ºé‡Œåˆ†äº«ä¸€ä¸‹å§ï¼</p>
<p>æ„Ÿè°¢é˜…è¯»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AgentRunï¼š60 ç§’åˆ›å»ºç¬¬ä¸€ä¸ª Agentï¼Œä¸€é”®è½¬æ¢ä¸ºé«˜ä»£ç ï¼ŒAI å¼€å‘è€…çš„â€œç§˜å¯†æ­¦å™¨â€ï¼]]></title>    <link>https://juejin.cn/post/7586579021283934262</link>    <guid>https://juejin.cn/post/7586579021283934262</guid>    <pubDate>2025-12-23T03:06:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586579021283934262" data-draft-id="7586582977707982890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AgentRunï¼š60 ç§’åˆ›å»ºç¬¬ä¸€ä¸ª Agentï¼Œä¸€é”®è½¬æ¢ä¸ºé«˜ä»£ç ï¼ŒAI å¼€å‘è€…çš„â€œç§˜å¯†æ­¦å™¨â€ï¼"/> <meta itemprop="keywords" content="Serverless"/> <meta itemprop="datePublished" content="2025-12-23T03:06:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AgentRunï¼š60 ç§’åˆ›å»ºç¬¬ä¸€ä¸ª Agentï¼Œä¸€é”®è½¬æ¢ä¸ºé«˜ä»£ç ï¼ŒAI å¼€å‘è€…çš„â€œç§˜å¯†æ­¦å™¨â€ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T03:06:47.000Z" title="Tue Dec 23 2025 03:06:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šåˆ˜å®‡</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA4NjI4MzM4MQ%3D%3D%26mid%3D2660257517%26idx%3D1%26sn%3D050bc317ac020aec7b848f9531af8da6%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzA4NjI4MzM4MQ==&amp;mid=2660257517&amp;idx=1&amp;sn=050bc317ac020aec7b848f9531af8da6&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— AgentRun å…¨æ–°å‘å¸ƒå</a>ï¼Œæˆ‘ä»¬æ•´ç†äº†â€œæ¢ç§˜ AgentRunâ€ç³»åˆ—æ–‡ç« ï¼Œæœ¬ç³»åˆ—å°†æ¢³ç†ä¼ä¸šè½åœ° Agent å¸¸è§éš¾é¢˜ï¼Œç»™å‡ºå…·ä½“è§£æ³•ï¼ŒåŠ©åŠ› Agentic å¿«é€Ÿ AI èµ°è¿›ç”Ÿäº§çº§ç¯å¢ƒã€‚</p>
<p>å½“æˆ‘ä»¬è°ˆè®º AI Agent çš„å¼€å‘æ—¶ï¼Œå¸¸å¸¸é¢ä¸´ä¸€ä¸ªä¸¤éš¾çš„é€‰æ‹©ï¼š<strong>ä½ä»£ç å¹³å°ä¸Šæ‰‹å¿«ä½†ç¼ºä¹çµæ´»æ€§ï¼Œä¸€æ—¦éœ€æ±‚å¤æ‚å°±æŸæ‰‹æ— ç­–ï¼›é«˜ä»£ç å¼€å‘è™½ç„¶çµæ´»ä½†é—¨æ§›é«˜ï¼Œä¸šåŠ¡äººå‘˜æ— æ³•å‚ä¸ï¼ŒéªŒè¯å‘¨æœŸé•¿ã€‚</strong> èƒ½å¦é±¼ä¸ç†ŠæŒå…¼å¾—ï¼Ÿ</p>
<p>å‡½æ•°è®¡ç®— AgentRun ç»™å‡ºäº†ç­”æ¡ˆï¼š<strong>é€šè¿‡æ— ä»£ç å¿«é€Ÿåˆ›å»º Agent éªŒè¯æƒ³æ³•ï¼Œå½“ä¸šåŠ¡å‘å±•éœ€è¦æ›´å¤æ‚å®šåˆ¶æ—¶ï¼Œä¸€é”®è½¬æ¢ä¸ºé«˜ä»£ç ç»§ç»­æ¼”è¿›ã€‚</strong> è¿™ä¸æ˜¯ç®€å•çš„åŠŸèƒ½å †ç Œï¼Œè€Œæ˜¯æ·±åˆ»ç†è§£äº† Agent åº”ç”¨ä» 0 åˆ° 1ã€ä» 1 åˆ° 100 çš„çœŸå®è·¯å¾„ã€‚</p>
<h2 data-id="heading-0">ä»æƒ³æ³•åˆ°ä¸Šçº¿ï¼š60 ç§’åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Agent</h2>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæœ€äº†è§£ä¸šåŠ¡éœ€æ±‚çš„æ˜¯ä¸šåŠ¡äººå‘˜è€Œä¸æ˜¯æŠ€æœ¯äººå‘˜ï¼Œä½†ä¼ ç»Ÿçš„ Agent å¼€å‘éœ€è¦ç¼–å†™å¤§é‡ä»£ç ï¼Œä¸šåŠ¡äººå‘˜æ— æ³•ç›´æ¥å‚ä¸ã€‚å‡½æ•°è®¡ç®—Â <strong>AgentRun çš„æ— ä»£ç åˆ›å»ºèƒ½åŠ›æ‰“ç ´äº†è¿™ä¸ªé™åˆ¶ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67e680ffbaab456f9efafa82db56453d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064006&amp;x-signature=kdiCfrDdKncRH0lOlPYmY3IxybE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚å›¾ï¼Œåˆ›å»ºä¸€ä¸ª Agent åªéœ€è¦ä¸‰å››ä¸ªæ­¥éª¤ï¼š</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šåœ¨æ§åˆ¶å°é€‰æ‹©åˆ›å»º Agent</strong></p>
<p>è¿›å…¥å‡½æ•°è®¡ç®—Â AgentRun æ§åˆ¶å° <strong>[</strong> <strong>1]</strong> ï¼Œç‚¹å‡»â€œåˆ›å»º Agentâ€æŒ‰é’®ã€‚</p>
<p><strong>ç¬¬äºŒæ­¥ï¼šé€‰æ‹©å¿«é€Ÿåˆ›å»ºæ¨¡å¼</strong></p>
<p>åœ¨å¼¹å‡ºçš„çª—å£ä¸­é€‰æ‹©â€œå¿«é€Ÿåˆ›å»ºâ€ï¼Œå¹³å°ä¼šå¼•å¯¼ä½ é€šè¿‡ç®€å•çš„é…ç½®å®Œæˆ Agent åˆ›å»ºã€‚</p>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šé…ç½®ä½ çš„ Agent</strong></p>
<p>è¿™æ˜¯æ ¸å¿ƒæ­¥éª¤ï¼Œä½ éœ€è¦å®Œæˆå‡ ä¸ªç®€å•çš„é…ç½®ï¼š</p>
<ul>
<li><strong>é€‰æ‹©æ¨¡å‹ï¼š</strong> ä» Qwenã€Claudeã€GPT-4 ç­‰ä¸»æµæ¨¡å‹ä¸­é€‰æ‹©ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¼ä¸šè‡ªå»ºçš„ç§æœ‰æ¨¡å‹ã€‚ä¸çŸ¥é“é€‰å“ªä¸ªï¼Ÿå¹³å°ä¼šæ ¹æ®ä½ çš„ä»»åŠ¡ç±»å‹æ™ºèƒ½æ¨èã€‚</li>
<li><strong>æè¿°ä½ çš„éœ€æ±‚ï¼š</strong> ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ çš„éœ€æ±‚ï¼Œæ¯”å¦‚â€œæˆ‘æƒ³è¦ä¸€ä¸ªèƒ½å¸®ç”¨æˆ·æŸ¥è¯¢è®¢å•çŠ¶æ€çš„å®¢æœ Agentâ€ã€‚å‡½æ•°è®¡ç®— AgentRun çš„ AI ç”Ÿæˆèƒ½åŠ›ä¼šè‡ªåŠ¨ç†è§£ä½ çš„éœ€æ±‚ï¼Œç”Ÿæˆåˆé€‚çš„ Prompt å’Œé…ç½®ã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¹³å°æä¾›Â Prompt AI ä¼˜åŒ–åŠŸèƒ½ï¼Œä¼šè‡ªåŠ¨åˆ†æä½ çš„æç¤ºè¯ï¼Œç»™å‡ºä¼˜åŒ–å»ºè®®ï¼Œè®© Agent çš„æ•ˆæœæ›´å¥½ã€‚</li>
<li><strong>é€‰æ‹©å·¥å…·å’Œèƒ½åŠ›ï¼š</strong> ä»å·¥å…·å¸‚åœºé€‰æ‹© Agent éœ€è¦çš„èƒ½åŠ›ã€‚éœ€è¦æ‰§è¡Œä»£ç ï¼Ÿæ·»åŠ  Code Interpreterã€‚éœ€è¦æ“ä½œæµè§ˆå™¨ï¼Ÿæ·»åŠ  Browser Toolã€‚éœ€è¦è°ƒç”¨ä¼ä¸šå†…éƒ¨ APIï¼Ÿä»å·¥å…·å¸‚åœºæœç´¢æˆ–ä¸€é”®åˆ›å»º MCPã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒAgent æœ¬èº«ã€Sandboxã€å…¶ä»–å·¥å…·éƒ½å¯ä»¥ä»¥ MCP å½¢å¼æä¾›â€”â€”è¿™æ„å‘³ç€ä½ å¯ä»¥è®©ä¸€ä¸ª Agent è°ƒç”¨å¦ä¸€ä¸ª Agent çš„èƒ½åŠ›ï¼Œå®ç°èƒ½åŠ›çš„ç»„åˆå’Œå¤ç”¨ã€‚</li>
</ul>
<p><strong>ç¬¬å››æ­¥ï¼šç‚¹å‡»åˆ›å»º</strong></p>
<p>å®Œæˆé…ç½®åï¼Œç‚¹å‡»â€œåˆ›å»ºâ€æŒ‰é’®ï¼Œ<strong>60 ç§’åï¼Œä½ çš„ Agent å°±å¯ä»¥å¼€å§‹å·¥ä½œäº†ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/069944a36e9741869d9f75664aa84a17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064006&amp;x-signature=IWblmRH%2BNu71gbf6JowwHkpxwec%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¹³å°è¿˜æ”¯æŒ<strong>ç‰ˆæœ¬ç®¡ç†å’Œç°åº¦å‘å¸ƒ</strong>ï¼Œä½ å¯ä»¥å®‰å…¨åœ°æµ‹è¯•æ–°ç‰ˆæœ¬ï¼Œç¡®è®¤æ²¡é—®é¢˜åå†å…¨é‡å‘å¸ƒã€‚</p>
<blockquote>
<p>é™¤äº†å¿«é€Ÿåˆ›å»ºï¼Œä½ è¿˜å¯ä»¥è¿›è¡Œåœ¨çº¿æµ‹è¯•ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œå¤šæ¨¡å‹æµ‹è¯•ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd7fc506a8ef44689dd1f6745b3d57fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064006&amp;x-signature=mKZDXcxHR49EbigjyZQx%2Ff2NlyM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
</blockquote>
<h2 data-id="heading-1">ä¸šåŠ¡å‘å±•ï¼ŒAgent ä¹Ÿè¦è¿›åŒ–</h2>
<p>å¿«é€Ÿåˆ›å»ºçš„ Agent è¿è¡Œäº†ä¸€æ®µæ—¶é—´ï¼Œä¸šåŠ¡é‡ä¸æ–­å¢é•¿ï¼Œéœ€æ±‚ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ã€‚ä½ å¼€å§‹é‡åˆ°è¿™äº›é—®é¢˜ï¼š</p>
<ul>
<li>éœ€è¦æ ¹æ®ç”¨æˆ·çš„å†å²è¡Œä¸ºåšä¸ªæ€§åŒ–æ¨èï¼Œä½†æ— ä»£ç é…ç½®æ— æ³•å®ç°å¤æ‚çš„é€»è¾‘åˆ¤æ–­</li>
<li>éœ€è¦å¯¹æ¥ä¼ä¸šå†…éƒ¨å¤æ‚çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œéœ€è¦å¤æ‚çš„æ•°æ®è½¬æ¢å’Œé”™è¯¯å¤„ç†</li>
<li>éœ€è¦å¯¹ Agent çš„è¡Œä¸ºè¿›è¡Œç²¾ç»†åŒ–æ§åˆ¶ï¼Œæ¯”å¦‚åœ¨ç‰¹å®šæ¡ä»¶ä¸‹è°ƒç”¨ç‰¹å®šæ¨¡å‹</li>
<li>éœ€è¦ä¼˜åŒ–æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¨¡å‹è°ƒç”¨ä»¥é™ä½æˆæœ¬</li>
</ul>
<p><strong>è¿™æ—¶å€™ï¼Œä½ éœ€è¦çš„æ˜¯ä»£ç çº§åˆ«çš„æ§åˆ¶èƒ½åŠ›ã€‚</strong> ä¼ ç»Ÿçš„ä½ä»£ç å¹³å°åˆ°äº†è¿™ä¸€æ­¥å°±æŸæ‰‹æ— ç­–ï¼Œä½ è¦ä¹ˆå¿å—åŠŸèƒ½å—é™ï¼Œè¦ä¹ˆæ¨å€’é‡æ¥ç”¨é«˜ä»£ç é‡å†™æ•´ä¸ª Agentã€‚ä½†å‡½æ•°è®¡ç®— AgentRun æä¾›äº†ç¬¬ä¸‰æ¡è·¯ï¼š<strong>ä¸€é”®è½¬æ¢ä¸ºé«˜ä»£ç ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12b143bcd03d41fa9937bd9288a2e949~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064006&amp;x-signature=y4y8dv1e8nCHAO9I7r7zmNgmeio%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œè½¬æ¢è¿‡ç¨‹éå¸¸ç®€å•ï¼š</p>
<ol>
<li>åœ¨ Agent ç®¡ç†é¡µé¢ç‚¹å‡»â€œè½¬æ¢ä¸ºé«˜ä»£ç â€</li>
<li>å¹³å°ä¼šè‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„ Python ä»£ç </li>
<li>ä»£ç ç»“æ„æ¸…æ™°ï¼ŒåŒ…å«å®Œæ•´çš„æ³¨é‡Šï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹</li>
<li>ä½ å¯ä»¥é€‰æ‹©åœ¨å‡½æ•°è®¡ç®— AgentRun çš„åœ¨çº¿ IDE ä¸­ç›´æ¥ç¼–è¾‘ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½åˆ°æœ¬åœ°ä½¿ç”¨ä½ å–œæ¬¢çš„å¼€å‘å·¥å…·</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84f731f6d19b43e6b97a60ee3f4099c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064006&amp;x-signature=yOTJ4EfOFuoa%2B%2BuKSugTTzIL%2BQc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è½¬æ¢åçš„ä»£ç ä¸æ˜¯â€œåƒåœ¾ä»£ç â€</strong> ï¼Œè€Œæ˜¯éµå¾ªæœ€ä½³å®è·µã€ç»“æ„æ¸…æ™°çš„é«˜è´¨é‡ä»£ç ã€‚å®ƒä¿ç•™äº†ä½ ä¹‹å‰æ‰€æœ‰çš„é…ç½®ï¼ˆæ¨¡å‹é€‰æ‹©ã€Promptã€å·¥å…·é…ç½®ï¼‰ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºè§„èŒƒçš„ä»£ç ç»“æ„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c88492872e894db08f9e8983a3c6b21e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064006&amp;x-signature=J6wSitl5TrMQvrRwUFLg1jfB5CA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-2">é«˜ä»£ç çš„æ·±åº¦å®šåˆ¶èƒ½åŠ›</h2>
<p>è½¬æ¢ä¸ºé«˜ä»£ç åï¼Œä½ è¿›å…¥äº†ä¸€ä¸ªå…¨æ–°çš„ä¸–ç•Œã€‚å¦‚å›¾ 3 æ‰€ç¤ºï¼Œå‡½æ•°è®¡ç®— AgentRun æä¾›äº†å®Œæ•´çš„é«˜ä»£ç å¼€å‘ç¯å¢ƒã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªçœŸå®çš„ä¾‹å­ã€‚å‡è®¾ä½ çš„å®¢æœ Agent éœ€è¦æ ¹æ®ç”¨æˆ·çš„ VIP ç­‰çº§æä¾›ä¸åŒçš„æœåŠ¡ç­–ç•¥ã€‚åœ¨æ— ä»£ç é˜¶æ®µï¼Œä½ åªèƒ½é…ç½®ç»Ÿä¸€çš„æ¨¡å‹ã€Prompt å’Œå·¥å…·ï¼Œæ‰€æœ‰ç”¨æˆ·å¾—åˆ°çš„éƒ½æ˜¯ç›¸åŒçš„æœåŠ¡ã€‚ä½†è½¬æ¢ä¸ºé«˜ä»£ç åï¼Œä½ å¯ä»¥å®ç°ç²¾ç»†åŒ–çš„ä¸ªæ€§åŒ–ç­–ç•¥ã€‚</p>
<p><strong>è½¬æ¢ä¸ºé«˜ä»£ç åï¼Œä½ è·å¾—äº†å®Œå…¨çš„æ§åˆ¶èƒ½åŠ›ã€‚</strong> å¯ä»¥æ ¹æ®ç”¨æˆ·ç­‰çº§åŠ¨æ€è°ƒæ•´æœåŠ¡ç­–ç•¥â€”â€”VIP ç”¨æˆ·ä½¿ç”¨æ›´å¥½çš„æ¨¡å‹ã€æ›´è¯¦ç»†çš„ Promptã€æ›´é«˜ä¼˜å…ˆçº§çš„å“åº”é€Ÿåº¦ï¼Œè€Œæ™®é€šç”¨æˆ·åˆ™ä½¿ç”¨æ›´ç»æµçš„é…ç½®ï¼Œåœ¨ä¿è¯ä½“éªŒçš„å‰æä¸‹é™ä½æˆæœ¬ã€‚å¯ä»¥å®ç°æ™ºèƒ½æˆæœ¬ä¼˜åŒ–ï¼Œä¸å†å¯¹æ‰€æœ‰è¯·æ±‚éƒ½ä½¿ç”¨åŒä¸€ä¸ªæ¨¡å‹ï¼Œè€Œæ˜¯æ ¹æ®æŸ¥è¯¢çš„å¤æ‚åº¦ã€ç”¨æˆ·ç­‰çº§ã€å†å²è¡Œä¸ºç­‰å› ç´ ï¼ŒåŠ¨æ€é€‰æ‹©æœ€åˆé€‚çš„æ¨¡å‹ã€‚ç®€å•é—®é¢˜ç”¨å°æ¨¡å‹å¿«é€Ÿå“åº”ï¼Œå¤æ‚é—®é¢˜æ‰ä½¿ç”¨å¤§æ¨¡å‹ï¼Œå®ç°æˆæœ¬å’Œæ•ˆæœçš„æœ€ä¼˜å¹³è¡¡ã€‚</p>
<p>å½“ç„¶ï¼Œå¯é æ€§å’Œå®‰å…¨æ€§ä¹Ÿèƒ½å¾—åˆ°å…¨é¢å¢å¼ºã€‚å¯ä»¥æ·»åŠ è‡ªåŠ¨é‡è¯•æœºåˆ¶ã€è¶…æ—¶æ§åˆ¶ã€å¼‚å¸¸å¤„ç†ï¼Œå½“æ¨¡å‹è°ƒç”¨å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æ¨¡å‹æˆ–è¿”å›é¢„è®¾çš„é™çº§å“åº”ï¼Œç¡®ä¿æœåŠ¡å§‹ç»ˆå¯ç”¨ã€‚åœ¨è¿”å›ç»“æœå‰è‡ªåŠ¨è¿‡æ»¤æ•æ„Ÿä¿¡æ¯ï¼Œæ·»åŠ å†…å®¹å®¡æ ¸ï¼Œè®°å½•å®Œæ•´çš„å®¡è®¡æ—¥å¿—ã€‚è¿˜å¯ä»¥å®ç°å¤šæ­¥éª¤çš„å¤æ‚ä¸šåŠ¡æµç¨‹ï¼Œæ¯”å¦‚å…ˆæŸ¥è¯¢ç”¨æˆ·å†å²è®¢å•ï¼Œå†æ ¹æ®è®¢å•çŠ¶æ€å†³å®šä¸‹ä¸€æ­¥æ“ä½œï¼Œæœ€åæ•´åˆå¤šä¸ªæ•°æ®æºçš„ä¿¡æ¯ç»™å‡ºç»¼åˆå»ºè®®ã€‚è¿™äº›åœ¨æ— ä»£ç ç•Œé¢ä¸­éš¾ä»¥å®ç°çš„å¤æ‚é€»è¾‘ï¼Œåœ¨é«˜ä»£ç ä¸­éƒ½å¯ä»¥çµæ´»å®ç°ã€‚</p>
<h2 data-id="heading-3">æ›´è¿›ä¸€æ­¥ï¼šä¸å‡½æ•°è®¡ç®— AgentRun åŸºç¡€è®¾æ–½æ·±åº¦é›†æˆ</h2>
<p>è½¬æ¢ä¸ºé«˜ä»£ç åï¼Œä½ ä¸ä»…å¯ä»¥ç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼Œè¿˜å¯ä»¥æ·±åº¦åˆ©ç”¨å‡½æ•°è®¡ç®— AgentRun æä¾›çš„å„ç§åŸºç¡€è®¾æ–½èƒ½åŠ›ã€‚<strong>è¿™äº›èƒ½åŠ›é€šè¿‡ç®€å•çš„é…ç½®å’Œè°ƒç”¨å°±å¯ä»¥ä½¿ç”¨ï¼Œä½ ä¸éœ€è¦è‡ªå·±å®ç°å¤æ‚çš„åŸºç¡€è®¾æ–½ã€‚</strong></p>
<p>åˆ©ç”¨å‡½æ•°è®¡ç®— AgentRun çš„æ¨¡å‹ä»£ç†èƒ½åŠ›ï¼Œä½ å¯ä»¥é…ç½®ä¸»æ¨¡å‹å’Œå¤šä¸ªå¤‡ç”¨æ¨¡å‹ï¼Œå¯ç”¨ç†”æ–­æœºåˆ¶ã€‚å½“ä¸»æ¨¡å‹å‡ºç°é—®é¢˜æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æ¨¡å‹ï¼Œæ•´ä¸ªè¿‡ç¨‹å¯¹ç”¨æˆ·é€æ˜ï¼Œç¡®ä¿æœåŠ¡è¿ç»­æ€§ã€‚é€šè¿‡å‰ç½® Hook å¯ä»¥åœ¨å·¥å…·è°ƒç”¨å‰è‡ªåŠ¨æ³¨å…¥ç”¨æˆ·å‡­è¯ã€è®°å½•è¯·æ±‚æ—¥å¿—ã€æ ¡éªŒå‚æ•°åˆæ³•æ€§ï¼›é€šè¿‡åç½® Hook å¯ä»¥å¯¹ç»“æœè¿›è¡Œè½¬æ¢ã€è®°å½•å®¡è®¡æ—¥å¿—ã€å¤„ç†å¼‚å¸¸æƒ…å†µã€‚è¿™äº›é€šç”¨é€»è¾‘ä¸éœ€è¦åœ¨æ¯ä¸ªå·¥å…·ä¸­é‡å¤å®ç°ï¼Œåªéœ€é…ç½®ä¸€æ¬¡å³å¯ã€‚</p>
<p>å¯¹äºè€—æ—¶è¾ƒé•¿çš„æ“ä½œï¼Œæ¯”å¦‚å¤æ‚æ•°æ®åˆ†æã€å¤§æ–‡ä»¶å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°è®¡ç®— AgentRun çš„å¼‚æ­¥è°ƒç”¨èƒ½åŠ›ã€‚Agent ä¸å¿…é˜»å¡ç­‰å¾…ï¼Œå¯ä»¥ç»§ç»­å¤„ç†å…¶ä»–è¯·æ±‚ï¼Œå½“å¼‚æ­¥ä»»åŠ¡å®Œæˆåé€šè¿‡å›è°ƒé€šçŸ¥ç»“æœã€‚è¿™ç§èƒ½åŠ›åœ¨æ„å»ºé«˜å¹¶å‘ã€é«˜æ€§èƒ½çš„ Agent åº”ç”¨æ—¶å°¤ä¸ºé‡è¦ã€‚</p>
<h2 data-id="heading-4">çœŸå®æ¡ˆä¾‹ï¼šFunctionQ çš„æ¼”è¿›ä¹‹è·¯</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7af6e17b495e401ebd5f0f15345584a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064006&amp;x-signature=4zXPr9C9nlCSTTWL4UBo9a9%2FpGA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>äº§å“ç»ç†åœ¨ç¬¬ä¸€å¤©é€šè¿‡æ— ä»£ç ç•Œé¢å¿«é€Ÿåˆ›å»ºäº†ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬çš„ Agentï¼Œé€‰æ‹©äº† Qwen-Max æ¨¡å‹ï¼Œé…ç½®äº†ç®€å•çš„ Promptï¼Œä»å·¥å…·å¸‚åœºé€‰æ‹©äº†â€œå‡½æ•°åˆ—è¡¨æŸ¥è¯¢â€ã€â€œå‡½æ•°è¯¦æƒ…æŸ¥è¯¢â€ã€â€œæ—¥å¿—æŸ¥è¯¢â€ç­‰å·¥å…·ã€‚å½“å¤©ä¸‹åˆï¼Œè¿™ä¸ªåŸºç¡€ç‰ˆæœ¬å°±ä¸Šçº¿äº†ï¼Œå¼€å§‹æœåŠ¡å†…éƒ¨æµ‹è¯•ç”¨æˆ·ã€‚</p>
<p>ç¬¬ä¸‰å¤©ï¼Œæµ‹è¯•ç”¨æˆ·å¼€å§‹åé¦ˆé—®é¢˜ï¼šAgent è°ƒç”¨å·¥å…·æ—¶æŠ¥â€œæƒé™ä¸è¶³â€é”™è¯¯ï¼Œå¤šä¸ªç”¨æˆ·ä½¿ç”¨æ—¶æ•°æ®æ··ä¹±ï¼Œæˆæœ¬å¢é•¿å¾ˆå¿«ä½†ä¸çŸ¥é“èŠ±åœ¨å“ªé‡Œã€‚è¿™äº›é—®é¢˜åœ¨æ— ä»£ç ç•Œé¢æ— æ³•è§£å†³ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦æ›´å¤æ‚çš„é€»è¾‘æ§åˆ¶ã€‚</p>
<p><strong>ç¬¬äº”å¤©ï¼Œå¼€å‘å›¢é˜Ÿå°† Agent è½¬æ¢ä¸ºé«˜ä»£ç ï¼Œé—®é¢˜è¿åˆƒè€Œè§£ã€‚</strong> é€šè¿‡é…ç½® Hook å®ç°äº†åŠ¨æ€å‡­è¯æ³¨å…¥ï¼Œæ ¹æ®ç”¨æˆ· ID è‡ªåŠ¨è·å–å¯¹åº”çš„ AccessKey å’Œ SecretKeyï¼Œåœ¨å·¥å…·è°ƒç”¨å‰æ³¨å…¥åˆ°è¯·æ±‚ä¸­ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥ä½†æƒé™é—®é¢˜å¾—åˆ°è§£å†³ã€‚åˆ©ç”¨å‡½æ•°è®¡ç®— AgentRun çš„ä¼šè¯äº²å’Œæœºåˆ¶ï¼Œç¡®ä¿åŒä¸€ç”¨æˆ·çš„è¯·æ±‚å§‹ç»ˆè·¯ç”±åˆ°åŒä¸€å®ä¾‹ï¼Œæ¯ä¸ªç”¨æˆ·æ‹¥æœ‰ç‹¬ç«‹çš„è®°å¿†å­˜å‚¨ï¼Œå½»åº•éš”ç¦»ä¸åŒç”¨æˆ·çš„æ•°æ®ã€‚å®ç°æ™ºèƒ½æ¨¡å‹é€‰æ‹©ç­–ç•¥åï¼Œç®€å•çš„åˆ—è¡¨æŸ¥è¯¢ä½¿ç”¨ Qwen-Turboï¼Œå¤æ‚çš„é—®é¢˜åˆ†æä½¿ç”¨ Qwen-Maxï¼Œåœ¨ä¿æŒç”¨æˆ·ä½“éªŒçš„å‰æä¸‹ï¼Œæˆæœ¬é™ä½äº†çº¦ 40%ã€‚</p>
<p>ä¸¤å‘¨åï¼Œéšç€ç”¨æˆ·å¢é•¿ï¼Œå›¢é˜Ÿç»§ç»­ä¼˜åŒ–ã€‚æ·»åŠ äº†æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼Œç›¸åŒçš„æŸ¥è¯¢ç›´æ¥è¿”å›ç¼“å­˜ç»“æœï¼Œå“åº”é€Ÿåº¦ä» 2 ç§’é™åˆ° 0.1 ç§’ã€‚å®ç°äº†å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡å‹ç¼©ï¼Œå‡å°‘ Token æ¶ˆè€—ã€‚é›†æˆäº†ä¼ä¸šå†…éƒ¨çš„å·¥å•ç³»ç»Ÿï¼ŒAgent å¯ä»¥è‡ªåŠ¨åˆ›å»ºå’Œè·Ÿè¸ªå·¥å•ã€‚æ ¹æ®é—®é¢˜ç±»å‹å®ç°äº†æ™ºèƒ½è·¯ç”±ï¼Œè‡ªåŠ¨åˆ†å‘åˆ°ä¸åŒçš„ä¸“ä¸š Agentã€‚</p>
<p><strong>å¦‚æœæ²¡æœ‰â€œæ— ä»£ç åˆ°é«˜ä»£ç â€çš„èƒ½åŠ›ï¼Œè¿™ä¸ªé¡¹ç›®ä¼šé¢ä¸´ä»€ä¹ˆï¼Ÿ</strong> è¦ä¹ˆä¸€å¼€å§‹å°±ç”¨é«˜ä»£ç å¼€å‘ï¼ŒéªŒè¯å‘¨æœŸä» 1 å¤©å˜æˆ 1 å‘¨ï¼Œé”™è¿‡æœ€ä½³æ—¶é—´çª—å£ã€‚è¦ä¹ˆä¸€ç›´ç”¨æ— ä»£ç ï¼Œæ— æ³•è§£å†³æƒé™ã€æˆæœ¬ã€æ€§èƒ½ç­‰å…³é”®é—®é¢˜ï¼Œæœ€ç»ˆä¸å¾—ä¸æ”¾å¼ƒã€‚æˆ–è€…æ¨å€’é‡æ¥ï¼Œæµªè´¹å‰æœŸæ‰€æœ‰ç§¯ç´¯ï¼Œå›¢é˜Ÿå£«æ°”å—æŒ«ã€‚å‡½æ•°è®¡ç®—Â <strong>AgentRun è®©å›¢é˜Ÿå¯ä»¥ä»æœ€å¿«çš„æ–¹å¼å¼€å§‹ï¼Œéšç€ä¸šåŠ¡å‘å±•å¹³æ»‘æ¼”è¿›ï¼Œæ²¡æœ‰æŠ€æœ¯å€ºåŠ¡ï¼Œæ²¡æœ‰æ¨å€’é‡æ¥ã€‚</strong></p>
<h2 data-id="heading-5">è¿™ä¸åªæ˜¯åŠŸèƒ½ï¼Œæ›´æ˜¯ç†å¿µ</h2>
<p>ä»æ— ä»£ç åˆ°é«˜ä»£ç çš„æ¼”è¿›èƒ½åŠ›ï¼ŒèƒŒåä½“ç°çš„æ˜¯å‡½æ•°è®¡ç®— AgentRun å¯¹ Agent åº”ç”¨å¼€å‘çš„æ·±åˆ»ç†è§£ã€‚</p>
<p><strong>Agent åº”ç”¨çš„å¼€å‘ä¸æ˜¯çº¿æ€§çš„ã€‚</strong> å®ƒä¸æ˜¯ä»éœ€æ±‚åˆ†æã€è®¾è®¡ã€å¼€å‘ã€æµ‹è¯•ã€ä¸Šçº¿è¿™æ ·çš„ç€‘å¸ƒæµç¨‹ã€‚æ›´å¤šæ—¶å€™ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¿«é€ŸéªŒè¯ã€è¿­ä»£ä¼˜åŒ–ã€é€æ­¥å®Œå–„çš„èºæ—‹å¼è¿‡ç¨‹ã€‚åœ¨æƒ³æ³•éªŒè¯é˜¶æ®µï¼Œä½ éœ€è¦çš„æ˜¯é€Ÿåº¦ï¼›åœ¨ä¸šåŠ¡æˆç†Ÿé˜¶æ®µï¼Œä½ éœ€è¦çš„æ˜¯çµæ´»æ€§å’Œæ§åˆ¶åŠ›ã€‚æ²¡æœ‰ä¸€ç§å·¥å…·èƒ½åŒæ—¶æ»¡è¶³æ‰€æœ‰é˜¶æ®µçš„éœ€æ±‚ï¼Œä½†å‡½æ•°è®¡ç®— AgentRun é€šè¿‡â€œæ— ç¼æ¼”è¿›â€è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><strong>æŠ€æœ¯é€‰æ‹©ä¸åº”è¯¥æ˜¯ä¸€æ¬¡æ€§çš„å†³å®šã€‚</strong> é€‰æ‹©ä½ä»£ç å°±è¢«é”å®šåœ¨ä½ä»£ç çš„èƒ½åŠ›è¾¹ç•Œå†…ï¼Œé€‰æ‹©é«˜ä»£ç å°±è¦æ‰¿å—é«˜é—¨æ§›å’Œæ¼«é•¿çš„å¼€å‘å‘¨æœŸã€‚å‡½æ•°è®¡ç®— AgentRun è®©ä½ å¯ä»¥ä»æœ€é€‚åˆå½“å‰é˜¶æ®µçš„æ–¹å¼å¼€å§‹ï¼Œéšæ—¶æ ¹æ®éœ€è¦æ¼”è¿›åˆ°ä¸‹ä¸€ä¸ªé˜¶æ®µã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ç§æ¼”è¿›æ˜¯â€œé›¶æˆæœ¬â€çš„â€”â€”è½¬æ¢ä¸ºé«˜ä»£ç ä¸ä¼šä¸¢å¤±ä»»ä½•ä¹‹å‰çš„é…ç½®å’Œç§¯ç´¯ï¼Œç”Ÿæˆçš„ä»£ç è´¨é‡é«˜ã€ç»“æ„æ¸…æ™°ï¼Œä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šç»§ç»­å¼€å‘ï¼Œè€Œä¸æ˜¯æ¨å€’é‡æ¥ã€‚</p>
<p>è¿™ç§è®¾è®¡ç†å¿µçš„ä»·å€¼ï¼Œåœ¨äºå®ƒå°Šé‡äº†äº§å“å¼€å‘çš„çœŸå®è§„å¾‹ã€‚æ²¡æœ‰äººèƒ½åœ¨ç¬¬ä¸€å¤©å°±é¢„è§æ‰€æœ‰éœ€æ±‚ï¼Œä¹Ÿæ²¡æœ‰å›¢é˜Ÿæ„¿æ„ä¸ºäº†æœªæ¥å¯èƒ½çš„éœ€æ±‚è€Œåœ¨åˆæœŸå°±æ‰¿æ‹…é«˜æ˜‚çš„å¼€å‘æˆæœ¬ã€‚å‡½æ•°è®¡ç®—Â <strong>AgentRun è®©ä½ å¯ä»¥è½»è£…ä¸Šé˜µå¿«é€ŸéªŒè¯ï¼Œå½“éœ€æ±‚æ˜ç¡®åå†æ·±åº¦æŠ•å…¥ï¼Œè¿™æ‰æ˜¯æœ€ç¬¦åˆå®é™…çš„å¼€å‘è·¯å¾„ã€‚</strong></p>
<h2 data-id="heading-6">ç«‹å³ä½“éªŒ</h2>
<p>å‡½æ•°è®¡ç®— AgentRun çš„æ— ä»£ç åˆ°é«˜ä»£ç æ¼”è¿›èƒ½åŠ›ï¼Œç°å·²å¼€æ”¾ä½“éªŒï¼š</p>
<ol>
<li>å¿«é€Ÿåˆ›å»ºï¼šè®¿é—®æ§åˆ¶å°ï¼ˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Ffunctionai.console.aliyun.com%2Fcn-hangzhou%2Fagent%2Fexplore" target="_blank" title="https://functionai.console.aliyun.com/cn-hangzhou/agent/explore" ref="nofollow noopener noreferrer">functionai.console.aliyun.com/cn-hangzhouâ€¦</a> ï¼‰ï¼Œ60 ç§’åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ª Agent</li>
<li><strong>æ·±åº¦å®šåˆ¶ï¼š</strong> å½“éœ€è¦æ›´å¤æ‚åŠŸèƒ½æ—¶ï¼Œä¸€é”®è½¬æ¢ä¸ºé«˜ä»£ç </li>
<li><strong>æŒç»­æ¼”è¿›ï¼š</strong> åˆ©ç”¨å‡½æ•°è®¡ç®— AgentRun çš„åŸºç¡€è®¾æ–½èƒ½åŠ›ï¼ŒæŒç»­ä¼˜åŒ–ä½ çš„ Agent</li>
</ol>
<p>ä»æƒ³æ³•åˆ°ä¸Šçº¿ï¼Œä»åŸå‹åˆ°ç”Ÿäº§ï¼Œå‡½æ•°è®¡ç®— AgentRun å§‹ç»ˆæ˜¯ä½ æœ€å¥½çš„ä¼™ä¼´ã€‚æ¬¢è¿åŠ å…¥â€œå‡½æ•°è®¡ç®— AgentRun å®¢æˆ·ç¾¤â€ï¼Œé’‰é’‰ç¾¤å·ï¼š134570017218ã€‚</p>
<h3 data-id="heading-7">å¿«é€Ÿäº†è§£å‡½æ•°è®¡ç®— AgentRun</h3>
<p><strong>ä¸€å¥è¯ä»‹ç»ï¼š</strong> å‡½æ•°è®¡ç®— AgentRun æ˜¯ä¸€ä¸ªä»¥é«˜ä»£ç ä¸ºæ ¸å¿ƒçš„ä¸€ç«™å¼ Agentic AI åŸºç¡€è®¾æ–½å¹³å°ã€‚ç§‰æŒç”Ÿæ€å¼€æ”¾å’Œçµæ´»ç»„è£…çš„ç†å¿µï¼Œä¸ºä¼ä¸šçº§ Agent åº”ç”¨æä¾›ä»å¼€å‘ã€éƒ¨ç½²åˆ°è¿ç»´çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd79c2a830b043ffbb9620f5594e6da0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767064006&amp;x-signature=EKbeJMYfwKqDhLQwEbiTb3zuXRI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><em>å‡½æ•°è®¡ç®— AgentRun æ¶æ„å›¾</em></p>
<p>AgentRun è¿è¡Œæ—¶åŸºäºé˜¿é‡Œäº‘å‡½æ•°è®¡ç®— FC æ„å»ºï¼Œç»§æ‰¿äº† Serverless è®¡ç®—æè‡´å¼¹æ€§ã€æŒ‰é‡ä»˜è´¹ã€é›¶è¿ç»´çš„æ ¸å¿ƒä¼˜åŠ¿ã€‚é€šè¿‡æ·±åº¦é›†æˆ AgentScopeã€Langchainã€RAGFlowã€Mem0 ç­‰ä¸»æµå¼€æºç”Ÿæ€ã€‚AgentRun å°† Serverless çš„æè‡´å¼¹æ€§ã€é›¶è¿ç»´å’ŒæŒ‰é‡ä»˜è´¹çš„ç‰¹æ€§ä¸ AI åŸç”Ÿåº”ç”¨åœºæ™¯æ·±åº¦èåˆï¼ŒåŠ©åŠ›ä¼ä¸šå®ç°æˆæœ¬ä¸æ•ˆç‡çš„æè‡´ä¼˜åŒ–ï¼Œ<strong>å¹³å‡ TCO é™ä½ 60%</strong> ã€‚Â </p>
<p>è®©å¼€å‘è€…åªéœ€ä¸“æ³¨äº Agent çš„ä¸šåŠ¡é€»è¾‘åˆ›æ–°ï¼Œæ— éœ€å…³å¿ƒåº•å±‚åŸºç¡€è®¾æ–½ï¼Œè®© Agentic AI çœŸæ­£è¿›å…¥ä¼ä¸šç”Ÿäº§ç¯å¢ƒã€‚</p>
<p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p>
<p>[1]Â AgentRun æ§åˆ¶å°</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ffunctionai.console.aliyun.com%2Fcn-hangzhou%2Fagent%2Fexplore" target="_blank" title="https://functionai.console.aliyun.com/cn-hangzhou/agent/explore" ref="nofollow noopener noreferrer">functionai.console.aliyun.com/cn-hangzhouâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[Docker/K8S] Kubernetesæ•…éšœå…‹æ˜Ÿï¼š19ä¸ªé«˜é¢‘é—®é¢˜é€ŸæŸ¥ä¸ç§’è§£æŒ‡å—ï¼ˆ2025ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7586498198149005363</link>    <guid>https://juejin.cn/post/7586498198149005363</guid>    <pubDate>2025-12-22T12:27:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586498198149005363" data-draft-id="7586482860103991323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[Docker/K8S] Kubernetesæ•…éšœå…‹æ˜Ÿï¼š19ä¸ªé«˜é¢‘é—®é¢˜é€ŸæŸ¥ä¸ç§’è§£æŒ‡å—ï¼ˆ2025ç‰ˆï¼‰"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-22T12:27:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸“ä¸šIT"/> <meta itemprop="url" content="https://juejin.cn/user/1118626084823481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [Docker/K8S] Kubernetesæ•…éšœå…‹æ˜Ÿï¼š19ä¸ªé«˜é¢‘é—®é¢˜é€ŸæŸ¥ä¸ç§’è§£æŒ‡å—ï¼ˆ2025ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1118626084823481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸“ä¸šIT
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T12:27:53.000Z" title="Mon Dec 22 2025 12:27:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Kubernetesæ•…éšœå…‹æ˜Ÿï¼š19ä¸ªé«˜é¢‘é—®é¢˜é€ŸæŸ¥ä¸ç§’è§£æŒ‡å—ï¼ˆ2025ç‰ˆï¼‰</h2>
<p>éšç€äº‘åŸç”ŸæŠ€æœ¯çš„æ™®åŠï¼ŒKuberneteså·²æˆä¸ºç°ä»£åº”ç”¨éƒ¨ç½²çš„äº‹å®æ ‡å‡†ã€‚ç„¶è€Œï¼Œå…¶å¤æ‚æ€§ä¹Ÿå¸¦æ¥äº†ç‹¬ç‰¹çš„æ•…éšœæ’æŸ¥æŒ‘æˆ˜ã€‚æœ¬æ–‡å°†èšç„¦19ä¸ªé«˜é¢‘æ•…éšœåœºæ™¯ï¼Œæä¾›å¿«é€Ÿå®šä½å’Œè§£å†³æ–¹æ¡ˆï¼ŒåŠ©æ‚¨æˆä¸ºKubernetesæ•…éšœæ’é™¤ä¸“å®¶ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é›†ç¾¤åŸºç¡€é—®é¢˜æ’æŸ¥</h3>
<h4 data-id="heading-2">1. èŠ‚ç‚¹çŠ¶æ€å¼‚å¸¸</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€</span>
kubectl <span class="hljs-keyword">get</span> nodes
kubectl describe node &lt;node-name&gt;

<span class="hljs-meta"># å¸¸è§æ•…éšœï¼šèŠ‚ç‚¹NotReady</span>
<span class="hljs-meta"># è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥kubeletçŠ¶æ€</span>
systemctl status kubelet
journalctl -u kubelet -n <span class="hljs-number">50</span> --no-pager

<span class="hljs-meta"># é‡å¯kubeletï¼ˆè°¨æ…æ“ä½œï¼‰</span>
sudo systemctl restart kubelet
</code></pre>
<h4 data-id="heading-3">2. ç½‘ç»œæ’ä»¶æ•…éšœ</h4>
<p>Calico/Flannelç­‰CNIæ’ä»¶é—®é¢˜å¸¸å¯¼è‡´Podé—´é€šä¿¡å¤±è´¥ï¼š</p>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œæ’ä»¶PodçŠ¶æ€</span>
kubectl get pods -n kube-<span class="hljs-keyword">system</span> | <span class="hljs-keyword">grep</span> -E <span class="hljs-string">'calico|flannel|cilium'</span>

<span class="hljs-comment"># é‡å¯ç½‘ç»œæ’ä»¶ï¼ˆå¦‚æœå…è®¸ï¼‰</span>
kubectl <span class="hljs-keyword">delete</span> pods -n kube-<span class="hljs-keyword">system</span> -l k8s-app=calico-node
</code></pre>
<h3 data-id="heading-4">äºŒã€Podä¸å®¹å™¨å±‚æ•…éšœ</h3>
<h4 data-id="heading-5">3. Podä¸€ç›´å¤„äºPendingçŠ¶æ€</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æŸ¥çœ‹å…·ä½“åŸå› </span>
kubectl describe pod &lt;pod-name&gt;

<span class="hljs-comment"># å¸¸è§åŸå› åŠè§£å†³æ–¹æ¡ˆï¼š</span>
<span class="hljs-comment"># 1. èµ„æºä¸è¶³ï¼šæ£€æŸ¥èŠ‚ç‚¹èµ„æº</span>
kubectl describe nodes | <span class="hljs-keyword">grep</span> -A <span class="hljs-number">5</span> -B <span class="hljs-number">5</span> <span class="hljs-string">"Allocatable"</span>

<span class="hljs-comment"># 2. ä¸æ»¡è¶³èŠ‚ç‚¹é€‰æ‹©å™¨/æ±¡ç‚¹å®¹å¿</span>
<span class="hljs-comment"># è°ƒæ•´èŠ‚ç‚¹é€‰æ‹©å™¨æˆ–æ·»åŠ å®¹å¿</span>
</code></pre>
<h4 data-id="heading-6">4. Podå´©æºƒå¾ªç¯ï¼ˆCrashLoopBackOffï¼‰</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æŸ¥çœ‹Podæ—¥å¿—</span>
kubectl logs &lt;pod-name&gt; --previous

<span class="hljs-comment"># è¿›å…¥Podè°ƒè¯•ï¼ˆå¦‚æœPodèƒ½çŸ­æš‚è¿è¡Œï¼‰</span>
kubectl <span class="hljs-keyword">exec</span> -it &lt;pod-name&gt; -- <span class="hljs-regexp">/bin/s</span>h

<span class="hljs-comment"># æ£€æŸ¥åº”ç”¨å¯åŠ¨å‘½ä»¤å’Œå‚æ•°</span>
kubectl describe pod &lt;pod-name&gt; | <span class="hljs-keyword">grep</span> -A <span class="hljs-number">10</span> <span class="hljs-string">"Command"</span>
</code></pre>
<h4 data-id="heading-7">5. é•œåƒæ‹‰å–å¤±è´¥ï¼ˆImagePullBackOffï¼‰</h4>
<p>yaml</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æ£€æŸ¥é•œåƒä»“åº“è®¤è¯</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Secret</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">regcred</span>
<span class="hljs-attr">type:</span> <span class="hljs-string">kubernetes.io/dockerconfigjson</span>
<span class="hljs-attr">data:</span>
  <span class="hljs-string">.dockerconfigjson:</span> <span class="hljs-string">&lt;base64-encoded-docker-config&gt;</span>
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€æœåŠ¡ä¸ç½‘ç»œé—®é¢˜</h3>
<h4 data-id="heading-9">6. Serviceæ— æ³•è®¿é—®</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ£€æŸ¥Serviceç«¯ç‚¹</span>
kubectl <span class="hljs-keyword">get</span> endpoints &lt;service-name&gt;

<span class="hljs-meta"># å¦‚æœæ²¡æœ‰ç«¯ç‚¹ï¼Œæ£€æŸ¥SelectoråŒ¹é…</span>
kubectl <span class="hljs-keyword">get</span> pods --show-labels | grep &lt;selector-label&gt;

<span class="hljs-meta"># ä¸´æ—¶ç«¯å£è½¬å‘è°ƒè¯•</span>
kubectl port-forward svc/&lt;service-name&gt; <span class="hljs-number">8080</span>:<span class="hljs-number">80</span>
</code></pre>
<h4 data-id="heading-10">7. Ingressæ§åˆ¶å™¨é—®é¢˜</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ£€æŸ¥Ingressæ§åˆ¶å™¨çŠ¶æ€</span>
kubectl <span class="hljs-keyword">get</span> pods -n ingress-nginx

<span class="hljs-meta"># æŸ¥çœ‹Ingressäº‹ä»¶</span>
kubectl describe ingress &lt;ingress-name&gt;

<span class="hljs-meta"># æ£€æŸ¥IngressClassé…ç½®</span>
kubectl <span class="hljs-keyword">get</span> ingressclass
</code></pre>
<h3 data-id="heading-11">å››ã€å­˜å‚¨ä¸é…ç½®é—®é¢˜</h3>
<h4 data-id="heading-12">8. PVCä¸€ç›´å¤„äºPendingçŠ¶æ€</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æ£€æŸ¥StorageClass</span>
<span class="hljs-string">kubectl</span> <span class="hljs-string">get</span> <span class="hljs-string">storageclass</span>

<span class="hljs-comment"># æ£€æŸ¥PV/PVCè¯¦æƒ…</span>
<span class="hljs-string">kubectl</span> <span class="hljs-string">describe</span> <span class="hljs-string">pvc</span> <span class="hljs-string">&lt;pvc-name&gt;</span>
<span class="hljs-string">kubectl</span> <span class="hljs-string">describe</span> <span class="hljs-string">pv</span> <span class="hljs-string">&lt;pv-name&gt;</span>

<span class="hljs-comment"># åŠ¨æ€ä¾›åº”å¤±è´¥æ—¶ï¼Œå¯åˆ›å»ºé™æ€PV</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolume</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">static-pv</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">capacity:</span>
    <span class="hljs-attr">storage:</span> <span class="hljs-string">10Gi</span>
  <span class="hljs-attr">accessModes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteOnce</span>
  <span class="hljs-attr">hostPath:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">"/mnt/data"</span>
</code></pre>
<h4 data-id="heading-13">9. ConfigMap/Secretæ›´æ–°æœªç”Ÿæ•ˆ</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹PodæŒ‚è½½çš„é…ç½®</span>
kubectl <span class="hljs-built_in">exec</span> &lt;pod-name&gt; -- <span class="hljs-built_in">cat</span> /etc/config/app.properties

<span class="hljs-comment"># å¼ºåˆ¶é‡æ–°éƒ¨ç½²ï¼ˆè§¦å‘é…ç½®æ›´æ–°ï¼‰</span>
kubectl rollout restart deployment/&lt;deployment-name&gt;
</code></pre>
<h3 data-id="heading-14">äº”ã€èµ„æºä¸è°ƒåº¦ä¼˜åŒ–</h3>
<h4 data-id="heading-15">10. å†…å­˜/CPUé™åˆ¶å¯¼è‡´OOMKilled</h4>
<p>yaml</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># åˆç†è®¾ç½®èµ„æºé™åˆ¶</span>
<span class="hljs-attr">resources:</span>
  <span class="hljs-attr">requests:</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"256Mi"</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"250m"</span>
  <span class="hljs-attr">limits:</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"512Mi"</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>

<span class="hljs-comment"># ç›‘æ§èµ„æºä½¿ç”¨</span>
<span class="hljs-string">kubectl</span> <span class="hljs-string">top</span> <span class="hljs-string">pods</span>
<span class="hljs-string">kubectl</span> <span class="hljs-string">describe</span> <span class="hljs-string">pod</span> <span class="hljs-string">&lt;pod-name&gt;</span> <span class="hljs-string">|</span> <span class="hljs-string">grep</span> <span class="hljs-string">-A</span> <span class="hljs-number">5</span> <span class="hljs-string">"Limits"</span>
</code></pre>
<h4 data-id="heading-16">11. èŠ‚ç‚¹èµ„æºå‹åŠ›</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æ£€æŸ¥èŠ‚ç‚¹èµ„æºåˆ†é…</span>
kubectl describe nodes | <span class="hljs-keyword">grep</span> -A <span class="hljs-number">10</span> <span class="hljs-string">"Allocated resources"</span>

<span class="hljs-comment"># é©±é€ä½ä¼˜å…ˆçº§Podï¼ˆå¦‚æœ‰é…ç½®ï¼‰</span>
kubectl get pods --all-namespaces -o wide | <span class="hljs-keyword">grep</span> Evicted
</code></pre>
<h3 data-id="heading-17">å…­ã€é«˜çº§è°ƒè¯•æŠ€å·§</h3>
<h4 data-id="heading-18">12. ä½¿ç”¨ä¸´æ—¶è°ƒè¯•å®¹å™¨</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Kubernetes 1.18+ æ”¯æŒä¸´æ—¶å®¹å™¨</span>
kubectl debug &lt;pod-name&gt; -it <span class="hljs-attr">--image</span>=busybox --target=&lt;container-name&gt;
</code></pre>
<h4 data-id="heading-19">13. ç½‘ç»œç­–ç•¥è°ƒè¯•</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-css" lang="css"># æ£€æŸ¥ç½‘ç»œç­–ç•¥å½±å“
kubectl get networkpolicy <span class="hljs-attr">--all-namespaces</span>

# åˆ›å»ºæµ‹è¯•PodéªŒè¯è¿é€šæ€§
kubectl run test-pod <span class="hljs-attr">--image</span>=busybox <span class="hljs-attr">--rm</span> -it <span class="hljs-attr">--restart</span>=Never -- ping &lt;target-pod-ip&gt;
</code></pre>
<h3 data-id="heading-20">ä¸ƒã€è‡ªåŠ¨ä¿®å¤ä¸é¢„é˜²</h3>
<h4 data-id="heading-21">14. é…ç½®å¥åº·æ£€æŸ¥</h4>
<p>yaml</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æ·»åŠ å°±ç»ªå’Œå­˜æ´»æ¢é’ˆ</span>
<span class="hljs-attr">livenessProbe:</span>
  <span class="hljs-attr">httpGet:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/healthz</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
  <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">30</span>
  <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>

<span class="hljs-attr">readinessProbe:</span>
  <span class="hljs-attr">tcpSocket:</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
  <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">5</span>
  <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
</code></pre>
<h4 data-id="heading-22">15. ä½¿ç”¨PodDisruptionBudgetä¿è¯å¯ç”¨æ€§</h4>
<p>yaml</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">policy/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PodDisruptionBudget</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">myapp-pdb</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">minAvailable:</span> <span class="hljs-number">2</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">myapp</span>
</code></pre>
<h3 data-id="heading-23">å…«ã€ç›‘æ§ä¸æ—¥å¿—èšåˆ</h3>
<h4 data-id="heading-24">16. é›†ä¸­æ—¥å¿—æ”¶é›†</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¿«é€ŸæŸ¥çœ‹ç›¸å…³Podæ—¥å¿—</span>
kubectl logs -l <span class="hljs-attr">app</span>=myapp --tail=<span class="hljs-number">50</span>

<span class="hljs-comment"># å¤šå®¹å™¨Podæ—¥å¿—æŸ¥çœ‹</span>
kubectl logs &lt;pod-name&gt; -c &lt;container-name&gt;
</code></pre>
<h4 data-id="heading-25">17. æ€§èƒ½æŒ‡æ ‡ç›‘æ§</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…Metrics Server</span>
kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml

<span class="hljs-comment"># æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ</span>
kubectl top nodes
kubectl top pods -A
</code></pre>
<h3 data-id="heading-26">ä¹ã€å®‰å…¨ä¸æƒé™é—®é¢˜</h3>
<h4 data-id="heading-27">18. RBACæƒé™ä¸è¶³</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ£€æŸ¥ç”¨æˆ·/æœåŠ¡è´¦æˆ·æƒé™</span>
kubectl auth can-i create pods --<span class="hljs-keyword">as</span> system:serviceaccount:<span class="hljs-literal">default</span>:my-sa

<span class="hljs-meta"># æŸ¥çœ‹è¯¦ç»†çš„RBACé…ç½®</span>
kubectl <span class="hljs-keyword">get</span> rolebindings,clusterrolebindings --all-namespaces
</code></pre>
<h4 data-id="heading-28">19. Podå®‰å…¨ç­–ç•¥è¿è§„</h4>
<p>bash</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ£€æŸ¥PodSecurityPolicy</span>
kubectl <span class="hljs-keyword">get</span> psp

<span class="hljs-meta"># æŸ¥çœ‹è¢«æ‹’ç»çš„Podäº‹ä»¶</span>
kubectl <span class="hljs-keyword">get</span> events --field-selector=reason=FailedCreate
</code></pre>
<h3 data-id="heading-29">æ€»ç»“ï¼šæ„å»ºç³»ç»ŸåŒ–æ’éšœæµç¨‹</h3>
<ol>
<li><strong>å¿«é€Ÿè¯Šæ–­</strong>ï¼šä½¿ç”¨<code>kubectl get</code>å’Œ<code>describe</code>è·å–èµ„æºçŠ¶æ€</li>
<li><strong>æ—¥å¿—åˆ†æ</strong>ï¼šæ·±å…¥å®¹å™¨æ—¥å¿—æŸ¥æ‰¾é”™è¯¯çº¿ç´¢</li>
<li><strong>ç½‘ç»œéªŒè¯</strong>ï¼šæ£€æŸ¥æœåŠ¡å‘ç°å’Œç½‘ç»œç­–ç•¥</li>
<li><strong>èµ„æºé…ç½®</strong>ï¼šç¡®è®¤è¯·æ±‚å’Œé™åˆ¶è®¾ç½®åˆç†</li>
<li><strong>æƒé™æ£€æŸ¥</strong>ï¼šéªŒè¯RBACå’ŒPSPé…ç½®</li>
<li><strong>é›†ç¾¤å¥åº·</strong>ï¼šç›‘æ§ç»„ä»¶çŠ¶æ€å’Œèµ„æºä½¿ç”¨</li>
</ol>
<p>è®°ä½è¿™äº›å‘½ä»¤å’ŒæŠ€å·§ï¼Œç»“åˆè‡ªåŠ¨åŒ–ç›‘æ§å‘Šè­¦ï¼Œæ‚¨å°†èƒ½å¤§å¹…ç¼©çŸ­Kubernetesæ•…éšœæ¢å¤æ—¶é—´ã€‚éšç€Kubernetesç”Ÿæ€çš„æ¼”è¿›ï¼Œä¿æŒå¯¹æ–°ç‰ˆæœ¬ç‰¹æ€§å’Œæœ€ä½³å®è·µçš„äº†è§£åŒæ ·é‡è¦ã€‚2025å¹´çš„Kubernetesç¯å¢ƒæ›´åŠ æ™ºèƒ½åŒ–ï¼Œä½†åšå®çš„æ•…éšœæ’æŸ¥åŸºæœ¬åŠŸä»ç„¶æ˜¯æ¯ä¸ªäº‘åŸç”Ÿå·¥ç¨‹å¸ˆçš„æ ¸å¿ƒç«äº‰åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é«˜å¹¶å‘ä¸‹å¦‚ä½•é˜²æ­¢é‡å¤æäº¤è®¢å•ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7586588823905468425</link>    <guid>https://juejin.cn/post/7586588823905468425</guid>    <pubDate>2025-12-23T02:11:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586588823905468425" data-draft-id="7586573133348782126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é«˜å¹¶å‘ä¸‹å¦‚ä½•é˜²æ­¢é‡å¤æäº¤è®¢å•ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-23T02:11:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é«˜å¹¶å‘ä¸‹å¦‚ä½•é˜²æ­¢é‡å¤æäº¤è®¢å•ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T02:11:36.000Z" title="Tue Dec 23 2025 02:11:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å½“ä½ çš„ç”¨æˆ·ç–¯ç‹‚ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼Œä½ çš„ç³»ç»Ÿå‡†å¤‡å¥½è¿æ¥è¿™åœºâ€œè¿å‡»é£æš´â€äº†å—ï¼Ÿ</p>
<p>åœ¨ç”µå•†ç³»ç»Ÿçš„å®æˆ˜ä¸­ï¼Œæˆ‘è§è¿‡å¤ªå¤šå› é‡å¤æäº¤å¯¼è‡´çš„èµ„æŸäº‹æ•…â€”â€”ç”¨æˆ·ä¸€æ¬¡ç‚¹å‡»ï¼Œç³»ç»Ÿå´åˆ›å»ºäº†å¤šä¸ªè®¢å•ï¼Œå¯¼è‡´åº“å­˜é”™ä¹±ã€ç”¨æˆ·é‡å¤æ”¯ä»˜ã€å®¢æœæŠ•è¯‰çˆ†æ£šã€‚</p>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å·¥ä½œä¸­å¯èƒ½é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šå¤§ä¿ƒæœŸé—´ï¼Œç”¨æˆ·åé¦ˆâ€œæ˜æ˜åªç‚¹äº†ä¸€æ¬¡ï¼Œä¸ºä»€ä¹ˆæ‰£äº†ä¸¤æ¬¡æ¬¾ï¼Ÿâ€</p>
<p>å¼€å‘åŒå­¦æŸ¥äº†åŠå¤©æ—¥å¿—ï¼Œå‘ç°åŒä¸€ä¸ªç”¨æˆ·è¯·æ±‚åœ¨æ¯«ç§’çº§å†…çœŸçš„åˆ°è¾¾äº†æœåŠ¡å™¨ä¸¤æ¬¡ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« å°±è·Ÿå¤§å®¶èŠèŠé«˜å¹¶å‘ä¸‹é˜²æ­¢é‡å¤æäº¤è®¢å•ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" title="https://link.juejin.cn/?target=http%3A%2F%2Fsusan.net.cn%2Fproject" target="_blank">æ›´å¤šé¡¹ç›®å®æˆ˜åœ¨æˆ‘çš„æŠ€æœ¯ç½‘ç«™ï¼šwww.susan.net.cn/project</a></p>
<h2 data-id="heading-1">01 ä¸ºä»€ä¹ˆä¼šé‡å¤æäº¤ï¼Ÿ</h2>
<p>åœ¨æ·±å…¥è§£å†³æ–¹æ¡ˆå‰ï¼Œæˆ‘ä»¬å¿…é¡»ææ¸…æ¥šé‡å¤æäº¤æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚</p>
<p>å¸¸è§çš„åœºæ™¯æœ‰ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·æ— æ„è¯†é‡å¤ç‚¹å‡»</strong>ï¼šç½‘ç»œå»¶è¿Ÿæ—¶ï¼Œç”¨æˆ·å¿ƒæ€¥å¤šæ¬¡ç‚¹å‡»æäº¤æŒ‰é’®</li>
<li><strong>å‰ç«¯é˜²æŠ–å¤±æ•ˆ</strong>ï¼šå‰ç«¯åšäº†é˜²æŠ–å¤„ç†ï¼Œä½†è¢«ç»•è¿‡æˆ–é…ç½®ä¸å½“</li>
<li><strong>ç½‘ç»œè¶…æ—¶é‡è¯•</strong>ï¼šè¯·æ±‚è¶…æ—¶åï¼Œå®¢æˆ·ç«¯æˆ–ç½‘å…³è‡ªåŠ¨é‡è¯•</li>
<li><strong>æ¶æ„æ”»å‡»</strong>ï¼šç«äº‰å¯¹æ‰‹æˆ–é»‘å®¢æ•…æ„é‡å¤æäº¤</li>
<li><strong>åç«¯å¤„ç†è¶…æ—¶</strong>ï¼šç¬¬ä¸€ä¸ªè¯·æ±‚å¤„ç†æ…¢ï¼Œå®¢æˆ·ç«¯ä»¥ä¸ºå¤±è´¥åˆå‘ä¸€æ¬¡</li>
</ol>
<p>æ¥çœ‹ä¸€ä¸ªå…¸å‹çš„ç”¨æˆ·æ“ä½œæµç¨‹ï¼Œä»¥åŠå…¶ä¸­å¯èƒ½å‘ç”Ÿé‡å¤çš„å„ä¸ªç¯èŠ‚ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51b6ad873d9e48358c9963bf3e114a07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767060695&amp;x-signature=EezGzi0fvGo9YpZfGutG%2Bde0qJQ%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä»ç”¨æˆ·ç‚¹å‡»åˆ°è®¢å•è½åº“ï¼Œå‡ ä¹æ¯ä¸ªç¯èŠ‚éƒ½å¯èƒ½æˆä¸ºé‡å¤æäº¤çš„â€œæ¡ˆå‘ç°åœºâ€ã€‚</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°±é’ˆå¯¹è¿™äº›ç¯èŠ‚ï¼Œå±‚å±‚å¸ƒé˜²ã€‚</p>
<h2 data-id="heading-2">02 ç¬¬ä¸€é“é˜²çº¿ï¼šå‰ç«¯é˜²æŠ–ä¸æŒ‰é’®æ§åˆ¶</h2>
<p>è¿™æ˜¯æœ€ç›´è§‚ã€æˆæœ¬æœ€ä½çš„é˜²æŠ¤æªæ–½ã€‚</p>
<p>åŸåˆ™æ˜¯ï¼š<strong>åœ¨ç”¨æˆ·äº¤äº’å±‚é¢å°½é‡å‡å°‘æ— æ•ˆè¯·æ±‚</strong>ã€‚</p>
<h3 data-id="heading-3">2.1 æŒ‰é’®çŠ¶æ€æ§åˆ¶</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯é˜²æŠ–å®ç°ç¤ºä¾‹ï¼ˆVue + Element UIï¼‰</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> 
    <span class="hljs-attr">:loading</span>=<span class="hljs-string">"submitting"</span> 
    <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"submitting"</span>
    @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSubmitOrder"</span>
  &gt;</span>
    {{ submitting ? 'æäº¤ä¸­...' : 'æäº¤è®¢å•' }}
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">submitting</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">submitToken</span>: <span class="hljs-literal">null</span> <span class="hljs-comment">// ç”¨äºæ ‡è¯†å½“å‰æäº¤çš„token</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleSubmitOrder</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">submitting</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">warning</span>(<span class="hljs-string">'æ­£åœ¨æäº¤ï¼Œè¯·å‹¿é‡å¤ç‚¹å‡»'</span>)
        <span class="hljs-keyword">return</span>
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitting</span> = <span class="hljs-literal">true</span>
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€tokenï¼Œç”¨äºåç«¯å¹‚ç­‰æ€§æ ¡éªŒ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitToken</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateSubmitToken</span>()
        
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$api</span>.<span class="hljs-property">order</span>.<span class="hljs-title function_">submit</span>({
          <span class="hljs-attr">orderData</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">orderData</span>,
          <span class="hljs-attr">submitToken</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitToken</span>
        })
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'è®¢å•æäº¤æˆåŠŸ'</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">`/order/detail/<span class="hljs-subst">${result.orderId}</span>`</span>)
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`æäº¤å¤±è´¥: <span class="hljs-subst">${error.message}</span>`</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">submitting</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">// å¤±è´¥åé‡ç½®çŠ¶æ€</span>
      }
    },
    
    <span class="hljs-title function_">generateSubmitToken</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥ç”¨UUIDæˆ–æ—¶é—´æˆ³+éšæœºæ•°</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">`order_submit_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">36</span>).substr(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>)}</span>`</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-4">2.2 è¯·æ±‚é˜²æŠ–ä¸æ‹¦æˆª</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨axiosæ‹¦æˆªå™¨å®ç°è¯·æ±‚é˜²æŠ–</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>

<span class="hljs-comment">// å­˜å‚¨æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚</span>
<span class="hljs-keyword">const</span> pendingRequests = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()

<span class="hljs-comment">// ç”Ÿæˆè¯·æ±‚key</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">generateReqKey</span> = (<span class="hljs-params">config</span>) =&gt; {
  <span class="hljs-keyword">const</span> { method, url, params, data } = config
  <span class="hljs-keyword">return</span> [method, url, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(params), <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data)].<span class="hljs-title function_">join</span>(<span class="hljs-string">'&amp;'</span>)
}

<span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> key = <span class="hljs-title function_">generateReqKey</span>(config)
  
  <span class="hljs-keyword">if</span> (pendingRequests.<span class="hljs-title function_">has</span>(key)) {
    <span class="hljs-comment">// è¯·æ±‚å·²å­˜åœ¨ï¼Œå–æ¶ˆå½“å‰è¯·æ±‚</span>
    config.<span class="hljs-property">cancelToken</span> = <span class="hljs-keyword">new</span> axios.<span class="hljs-title class_">CancelToken</span>(<span class="hljs-function"><span class="hljs-params">cancel</span> =&gt;</span> {
      <span class="hljs-title function_">cancel</span>(<span class="hljs-string">`é‡å¤è¯·æ±‚å·²è¢«æ‹¦æˆª: <span class="hljs-subst">${key}</span>`</span>)
    })
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ–°è¯·æ±‚ï¼Œæ·»åŠ åˆ°pendingä¸­</span>
    pendingRequests.<span class="hljs-title function_">set</span>(key, config)
  }
  
  <span class="hljs-keyword">return</span> config
})

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> key = <span class="hljs-title function_">generateReqKey</span>(response.<span class="hljs-property">config</span>)
    pendingRequests.<span class="hljs-title function_">delete</span>(key)
    <span class="hljs-keyword">return</span> response
  },
  <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (axios.<span class="hljs-title function_">isCancel</span>(error)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚è¢«å–æ¶ˆ:'</span>, error.<span class="hljs-property">message</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
    }
    
    <span class="hljs-comment">// é”™è¯¯å¤„ç†å®Œæˆåï¼Œä¹Ÿè¦ä»pendingä¸­ç§»é™¤</span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">config</span>) {
      <span class="hljs-keyword">const</span> key = <span class="hljs-title function_">generateReqKey</span>(error.<span class="hljs-property">config</span>)
      pendingRequests.<span class="hljs-title function_">delete</span>(key)
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)
</code></pre>
<p><strong>å‰ç«¯é˜²æŠ¤å°ç»“</strong>ï¼š</p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œèƒ½æ‹¦æˆªå¤§éƒ¨åˆ†ç”¨æˆ·æ— æ„è¯†çš„é‡å¤ç‚¹å‡»</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¯è¢«ç»•è¿‡ï¼ˆå¦‚ç›´æ¥è°ƒç”¨APIã€ç¦ç”¨JSã€ä½¿ç”¨Postmanç­‰å·¥å…·ï¼‰</li>
<li><strong>ç»“è®º</strong>ï¼šå‰ç«¯é˜²æŠ¤æ˜¯<strong>å¿…è¦ä½†ä¸å……åˆ†</strong>çš„æªæ–½ï¼Œç»ä¸èƒ½ä½œä¸ºå”¯ä¸€é˜²çº¿</li>
</ul>
<h2 data-id="heading-5">03 ç¬¬äºŒé“é˜²çº¿ï¼šåç«¯æ¥å£å¹‚ç­‰æ€§è®¾è®¡</h2>
<p>å¹‚ç­‰æ€§æ˜¯è§£å†³é‡å¤æäº¤çš„<strong>æ ¸å¿ƒç†å¿µ</strong>ã€‚</p>
<p>æ‰€è°“å¹‚ç­‰ï¼Œå°±æ˜¯<strong>åŒä¸€ä¸ªæ“ä½œæ‰§è¡Œå¤šæ¬¡çš„ç»“æœä¸æ‰§è¡Œä¸€æ¬¡çš„ç»“æœç›¸åŒ</strong>ã€‚</p>
<h3 data-id="heading-6">3.1 ä»€ä¹ˆæ˜¯å¹‚ç­‰æ€§ï¼Ÿ</h3>
<p>å¯¹äºè®¢å•æäº¤æ¥å£ï¼š</p>
<ul>
<li><strong>å¹‚ç­‰</strong>ï¼šæ— è®ºè°ƒç”¨1æ¬¡è¿˜æ˜¯Næ¬¡ï¼Œéƒ½åªåˆ›å»ºä¸€ä¸ªè®¢å•</li>
<li><strong>éå¹‚ç­‰</strong>ï¼šè°ƒç”¨Næ¬¡å¯èƒ½åˆ›å»ºNä¸ªè®¢å•</li>
</ul>
<h3 data-id="heading-7">3.2 åŸºäºTokençš„å¹‚ç­‰å®ç°</h3>
<p>è¿™æ˜¯æœ€å¸¸ç”¨çš„å¹‚ç­‰å®ç°æ–¹æ¡ˆï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å®¢æˆ·ç«¯åœ¨æäº¤å‰ï¼Œå…ˆå‘åç«¯ç”³è¯·ä¸€ä¸ªå”¯ä¸€Token</li>
<li>æäº¤è®¢å•æ—¶æºå¸¦æ­¤Token</li>
<li>æœåŠ¡ç«¯æ£€æŸ¥Tokenæ˜¯å¦å·²ä½¿ç”¨è¿‡</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¹‚ç­‰æ€§TokenæœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdempotentTokenService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">IDEMPOTENT_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"idempotent:token:"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">TOKEN_EXPIRE_SECONDS</span> <span class="hljs-operator">=</span> <span class="hljs-number">300</span>; <span class="hljs-comment">// Tokenæœ‰æ•ˆæœŸ5åˆ†é’Ÿ</span>
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆå¹‚ç­‰æ€§Token
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateToken</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
        <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> IDEMPOTENT_PREFIX + userId + <span class="hljs-string">":"</span> + token;
        
        <span class="hljs-comment">// å­˜å‚¨Tokenï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´</span>
        redisTemplate.opsForValue().set(
            redisKey, 
            <span class="hljs-string">"1"</span>, 
            TOKEN_EXPIRE_SECONDS, 
            TimeUnit.SECONDS
        );
        
        <span class="hljs-keyword">return</span> token;
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥å¹¶æ¶ˆè´¹Token
     * <span class="hljs-doctag">@return</span> true: Tokenæœ‰æ•ˆä¸”æ¶ˆè´¹æˆåŠŸ; false: Tokenæ— æ•ˆæˆ–å·²æ¶ˆè´¹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkAndConsumeToken</span><span class="hljs-params">(String userId, String token)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> IDEMPOTENT_PREFIX + userId + <span class="hljs-string">":"</span> + token;
        
        <span class="hljs-comment">// ä½¿ç”¨Luaè„šæœ¬ä¿è¯åŸå­æ€§</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">luaScript</span> <span class="hljs-operator">=</span> <span class="hljs-string">"""
            if redis.call('get', KEYS[1]) == '1' then
                redis.call('del', KEYS[1])
                return 1
            else
                return 0
            end
            """</span>;
        
        DefaultRedisScript&lt;Long&gt; redisScript = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultRedisScript</span>&lt;&gt;();
        redisScript.setScriptText(luaScript);
        redisScript.setResultType(Long.class);
        
        <span class="hljs-type">Long</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> redisTemplate.execute(
            redisScript, 
            Collections.singletonList(redisKey)
        );
        
        <span class="hljs-keyword">return</span> result != <span class="hljs-literal">null</span> &amp;&amp; result == <span class="hljs-number">1L</span>;
    }
}

<span class="hljs-comment">// ä½¿ç”¨AOPå®ç°å¹‚ç­‰æ€§æ ¡éªŒ</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Idempotent {
    String <span class="hljs-title function_">key</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>; <span class="hljs-comment">// å¹‚ç­‰é”®ï¼Œæ”¯æŒSpELè¡¨è¾¾å¼</span>
    <span class="hljs-type">long</span> <span class="hljs-title function_">expireTime</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">300</span>; <span class="hljs-comment">// è¿‡æœŸæ—¶é—´ï¼Œç§’</span>
}

<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdempotentAspect</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;
    
    <span class="hljs-meta">@Around("@annotation(idempotent)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint joinPoint, Idempotent idempotent)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// 1. è·å–æ–¹æ³•å‚æ•°</span>
        Object[] args = joinPoint.getArgs();
        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> (MethodSignature) joinPoint.getSignature();
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> signature.getMethod();
        
        <span class="hljs-comment">// 2. è§£æå¹‚ç­‰é”®ï¼ˆæ”¯æŒSpELï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">keyExpression</span> <span class="hljs-operator">=</span> idempotent.key();
        <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> parseKey(keyExpression, method, args);
        
        <span class="hljs-comment">// 3. å°è¯•è·å–åˆ†å¸ƒå¼é”ï¼ˆé˜²æ­¢å¹¶å‘è¯·æ±‚åŒæ—¶é€šè¿‡æ£€æŸ¥ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> redisKey + <span class="hljs-string">":lock"</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-variable">lockAcquired</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å°è¯•åŠ é”</span>
            lockAcquired = redisTemplate.opsForValue()
                .setIfAbsent(lockKey, <span class="hljs-string">"1"</span>, <span class="hljs-number">10</span>, TimeUnit.SECONDS);
            
            <span class="hljs-keyword">if</span> (!lockAcquired) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"</span>);
            }
            
            <span class="hljs-comment">// 4. æ£€æŸ¥Tokenæ˜¯å¦å·²ä½¿ç”¨</span>
            <span class="hljs-type">Boolean</span> <span class="hljs-variable">exists</span> <span class="hljs-operator">=</span> redisTemplate.hasKey(redisKey);
            <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(exists)) {
                <span class="hljs-comment">// Tokenå·²ä½¿ç”¨ï¼Œç›´æ¥è¿”å›ä¹‹å‰çš„å¤„ç†ç»“æœï¼ˆè¿™é‡Œéœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡è°ƒæ•´ï¼‰</span>
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"è¯·å‹¿é‡å¤æäº¤è®¢å•"</span>);
            }
            
            <span class="hljs-comment">// 5. æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();
            
            <span class="hljs-comment">// 6. æ ‡è®°Tokenå·²ä½¿ç”¨</span>
            redisTemplate.opsForValue().set(
                redisKey, 
                <span class="hljs-string">"processed"</span>, 
                idempotent.expireTime(), 
                TimeUnit.SECONDS
            );
            
            <span class="hljs-keyword">return</span> result;
            
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// é‡Šæ”¾é”</span>
            <span class="hljs-keyword">if</span> (lockAcquired) {
                redisTemplate.delete(lockKey);
            }
        }
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">parseKey</span><span class="hljs-params">(String expression, Method method, Object[] args)</span> {
        <span class="hljs-comment">// è¿™é‡Œå®ç°SpELè¡¨è¾¾å¼è§£æï¼Œè·å–å®é™…çš„å¹‚ç­‰é”®</span>
        <span class="hljs-comment">// ä¾‹å¦‚å¯ä»¥ä»å‚æ•°ä¸­æå–userId+orderToken</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"parsed:key:from:expression"</span>;
    }
}

<span class="hljs-comment">// åœ¨è®¢å•æäº¤æ¥å£ä¸Šä½¿ç”¨</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/order")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {
    
    <span class="hljs-meta">@PostMapping("/submit")</span>
    <span class="hljs-meta">@Idempotent(key = "#request.userId + ':' + #request.submitToken", expireTime = 300)</span>
    <span class="hljs-keyword">public</span> ApiResponse&lt;OrderSubmitResult&gt; <span class="hljs-title function_">submitOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> OrderSubmitRequest request)</span> {
        <span class="hljs-comment">// è¿™é‡Œæ˜¯çœŸæ­£çš„è®¢å•åˆ›å»ºé€»è¾‘</span>
        <span class="hljs-type">OrderSubmitResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> orderService.createOrder(request);
        <span class="hljs-keyword">return</span> ApiResponse.success(result);
    }
}
</code></pre>
<p>æœ€è¿‘ä¸ºäº†å¸®åŠ©å¤§å®¶æ‰¾å·¥ä½œï¼Œä¸“é—¨å»ºäº†ä¸€äº›å·¥ä½œå†…æ¨ç¾¤ï¼Œå„å¤§åŸå¸‚éƒ½æœ‰ï¼Œæ¬¢è¿å„ä½HRå’Œæ‰¾å·¥ä½œçš„å°ä¼™ä¼´è¿›ç¾¤äº¤æµï¼Œç¾¤é‡Œç›®å‰å·²ç»æ”¶é›†äº†20å¤šå®¶å¤§å‚çš„å·¥ä½œå†…æ¨å²—ä½ã€‚åŠ è‹ä¸‰çš„å¾®ä¿¡ï¼šli_su223ï¼Œå¤‡æ³¨ï¼šæ˜é‡‘+æ‰€åœ¨åŸå¸‚ï¼Œå³å¯è¿›ç¾¤ã€‚</p>
<h3 data-id="heading-8">3.3 åŸºäºå”¯ä¸€ä¸šåŠ¡æ ‡è¯†çš„å¹‚ç­‰</h3>
<p>é™¤äº†Tokenæ–¹æ¡ˆï¼Œè¿˜å¯ä»¥åˆ©ç”¨ä¸šåŠ¡çš„è‡ªç„¶å”¯ä¸€æ€§å®ç°å¹‚ç­‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> OrderSubmitResult <span class="hljs-title function_">createOrder</span><span class="hljs-params">(OrderSubmitRequest request)</span> {
        <span class="hljs-comment">// æ–¹æ³•1ï¼šå…ˆæŸ¥è¯¢æ˜¯å¦å­˜åœ¨</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">existingOrder</span> <span class="hljs-operator">=</span> orderMapper.selectByUniqueKey(
            request.getUserId(), 
            request.getProductId(), 
            request.getSubmitTime()
        );
        
        <span class="hljs-keyword">if</span> (existingOrder != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// è®¢å•å·²å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span>
            <span class="hljs-keyword">return</span> convertToResult(existingOrder);
        }
        
        <span class="hljs-comment">// æ–¹æ³•2ï¼šåˆ©ç”¨æ•°æ®åº“å”¯ä¸€çº¦æŸ</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Order</span> <span class="hljs-variable">newOrder</span> <span class="hljs-operator">=</span> buildOrder(request);
            orderMapper.insert(newOrder);
            <span class="hljs-keyword">return</span> convertToResult(newOrder);
        } <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
            <span class="hljs-comment">// æ•è·å”¯ä¸€é”®å†²çªå¼‚å¸¸</span>
            log.warn(<span class="hljs-string">"è®¢å•é‡å¤æäº¤ï¼ŒuniqueKey={}"</span>, request.getUniqueKey());
            
            <span class="hljs-comment">// æŸ¥è¯¢å·²åˆ›å»ºçš„è®¢å•å¹¶è¿”å›</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">createdOrder</span> <span class="hljs-operator">=</span> orderMapper.selectByUniqueKey(
                request.getUserId(), 
                request.getProductId(), 
                request.getSubmitTime()
            );
            
            <span class="hljs-keyword">if</span> (createdOrder == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"è®¢å•å¤„ç†å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•"</span>);
            }
            
            <span class="hljs-keyword">return</span> convertToResult(createdOrder);
        }
    }
    
    <span class="hljs-comment">// è®¢å•è¡¨å¯æ·»åŠ å”¯ä¸€ç´¢å¼•</span>
    <span class="hljs-comment">// ALTER TABLE t_order ADD UNIQUE KEY uk_user_product_time (user_id, product_id, submit_time);</span>
}
</code></pre>
<p><strong>å¹‚ç­‰æ€§è®¾è®¡å°ç»“</strong>ï¼š</p>
<ul>
<li><strong>Tokenæ–¹æ¡ˆ</strong>ï¼šé€šç”¨æ€§å¼ºï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯</li>
<li><strong>ä¸šåŠ¡æ ‡è¯†æ–¹æ¡ˆ</strong>ï¼šæ›´è‡ªç„¶ï¼Œä½†ä¾èµ–ä¸šåŠ¡çš„å¤©ç„¶å”¯ä¸€æ€§</li>
<li><strong>å…³é”®ç‚¹</strong>ï¼šæ‰€æœ‰å¹‚ç­‰æ€§æ£€æŸ¥<strong>å¿…é¡»åœ¨äº‹åŠ¡å¼€å§‹å‰å®Œæˆ</strong>ï¼Œå¦åˆ™å¯èƒ½å¤±æ•ˆ</li>
</ul>
<h2 data-id="heading-9">04 ç¬¬ä¸‰é“é˜²çº¿ï¼šæ•°æ®åº“å±‚é˜²æŠ¤</h2>
<p>æ•°æ®åº“æ˜¯æ•°æ®æŒä¹…åŒ–çš„æœ€åä¸€é“å…³å¡ï¼Œåœ¨è¿™é‡Œè®¾ç½®é˜²æŠ¤è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-10">4.1 å”¯ä¸€çº¦æŸä¸ä¹è§‚é”</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¢å•è¡¨è®¾è®¡ç¤ºä¾‹</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `t_order` (
  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®'</span>,
  `order_no` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è®¢å•å·ï¼Œä¸šåŠ¡å”¯ä¸€'</span>,
  `user_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·ID'</span>,
  `product_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å•†å“ID'</span>,
  `quantity` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è´­ä¹°æ•°é‡'</span>,
  `amount` <span class="hljs-type">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è®¢å•é‡‘é¢'</span>,
  `status` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'è®¢å•çŠ¶æ€ï¼š1-å¾…æ”¯ä»˜ï¼Œ2-å·²æ”¯ä»˜'</span>,
  `submit_token` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æäº¤Tokenï¼Œç”¨äºå¹‚ç­‰'</span>,
  `version` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'ç‰ˆæœ¬å·ï¼Œç”¨äºä¹è§‚é”'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  `update_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_order_no` (`order_no`), <span class="hljs-comment">-- è®¢å•å·å”¯ä¸€</span>
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_user_submit_token` (`user_id`, `submit_token`), <span class="hljs-comment">-- æäº¤Tokenå”¯ä¸€</span>
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_user_product_time` (`user_id`, `product_id`, `create_time`), <span class="hljs-comment">-- ä¸šåŠ¡ç»´åº¦å”¯ä¸€</span>
  KEY `idx_user_id` (`user_id`),
  KEY `idx_create_time` (`create_time`)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'è®¢å•è¡¨'</span>;
</code></pre>
<h3 data-id="heading-11">4.2 æ•°æ®åº“å±‚é¢çš„å¹‚ç­‰å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡+å”¯ä¸€çº¦æŸä¿è¯æœ€ç»ˆä¸€è‡´æ€§</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceV2</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> IdempotentTokenService tokenService;
    
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> OrderSubmitResult <span class="hljs-title function_">submitOrderWithDBProtection</span><span class="hljs-params">(OrderSubmitRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> request.getUserId();
        <span class="hljs-type">String</span> <span class="hljs-variable">submitToken</span> <span class="hljs-operator">=</span> request.getSubmitToken();
        
        <span class="hljs-comment">// 1. æ£€æŸ¥å¹‚ç­‰Tokenï¼ˆåœ¨äº‹åŠ¡å¤–å…ˆæ£€æŸ¥ä¸€æ¬¡ï¼‰</span>
        <span class="hljs-keyword">if</span> (!tokenService.checkAndConsumeToken(userId, submitToken)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"è¯·å‹¿é‡å¤æäº¤è®¢å•"</span>);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. ç”Ÿæˆè®¢å•å·ï¼ˆé›ªèŠ±ç®—æ³•ç­‰åˆ†å¸ƒå¼IDç”Ÿæˆå™¨ï¼‰</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">orderNo</span> <span class="hljs-operator">=</span> generateOrderNo();
            
            <span class="hljs-comment">// 3. åˆ›å»ºè®¢å•å¯¹è±¡</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
            order.setOrderNo(orderNo);
            order.setUserId(userId);
            order.setProductId(request.getProductId());
            order.setQuantity(request.getQuantity());
            order.setAmount(calculateAmount(request));
            order.setSubmitToken(submitToken);
            
            <span class="hljs-comment">// 4. æ’å…¥è®¢å•ï¼ˆè¿™é‡Œä¾èµ–æ•°æ®åº“å”¯ä¸€çº¦æŸï¼‰</span>
            orderMapper.insert(order);
            
            <span class="hljs-comment">// 5. æ›´æ–°åº“å­˜ç­‰åç»­æ“ä½œ...</span>
            updateProductStock(request.getProductId(), request.getQuantity());
            
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderSubmitResult</span>(orderNo, <span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸ"</span>);
            
        } <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
            <span class="hljs-comment">// 6. å¤„ç†å”¯ä¸€çº¦æŸå†²çª</span>
            log.warn(<span class="hljs-string">"è®¢å•é‡å¤æäº¤ï¼ŒuserId={}, token={}"</span>, userId, submitToken);
            
            <span class="hljs-comment">// æŸ¥è¯¢å·²åˆ›å»ºçš„è®¢å•</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">existingOrder</span> <span class="hljs-operator">=</span> orderMapper.selectBySubmitToken(userId, submitToken);
            <span class="hljs-keyword">if</span> (existingOrder != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderSubmitResult</span>(
                    existingOrder.getOrderNo(), 
                    <span class="hljs-string">"è®¢å•å·²åˆ›å»ºæˆåŠŸï¼Œè¯·å‹¿é‡å¤æäº¤"</span>
                );
            }
            
            <span class="hljs-comment">// ç†è®ºä¸Šä¸ä¼šèµ°åˆ°è¿™é‡Œï¼Œé™¤éæœ‰æç«¯æƒ…å†µ</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"è®¢å•å¤„ç†å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•"</span>);
        }
    }
}
</code></pre>
<h2 data-id="heading-12">05 ç¬¬å››é“é˜²çº¿ï¼šåˆ†å¸ƒå¼é”</h2>
<p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå¤šä¸ªå®ä¾‹å¯èƒ½åŒæ—¶å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œéœ€è¦åˆ†å¸ƒå¼é”æ¥ä¿è¯åªæœ‰ä¸€ä¸ªå®ä¾‹æ‰§è¡Œæ ¸å¿ƒé€»è¾‘ã€‚</p>
<h3 data-id="heading-13">5.1 åŸºäºRedisçš„åˆ†å¸ƒå¼é”</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedissonClient redissonClient;
    
    <span class="hljs-comment">/**
     * å°è¯•è·å–åˆ†å¸ƒå¼é”
     * <span class="hljs-doctag">@param</span> lockKey é”çš„key
     * <span class="hljs-doctag">@param</span> waitTime ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
     * <span class="hljs-doctag">@param</span> leaseTime æŒæœ‰æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
     * <span class="hljs-doctag">@return</span> é”å¯¹è±¡ï¼Œè·å–å¤±è´¥è¿”å›null
     */</span>
    <span class="hljs-keyword">public</span> RLock <span class="hljs-title function_">tryLock</span><span class="hljs-params">(String lockKey, <span class="hljs-type">long</span> waitTime, <span class="hljs-type">long</span> leaseTime)</span> {
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(lockKey);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">boolean</span> <span class="hljs-variable">acquired</span> <span class="hljs-operator">=</span> lock.tryLock(waitTime, leaseTime, TimeUnit.MILLISECONDS);
            <span class="hljs-keyword">return</span> acquired ? lock : <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * è®¢å•æäº¤åˆ†å¸ƒå¼é”
     */</span>
    <span class="hljs-keyword">public</span> RLock <span class="hljs-title function_">lockForOrderSubmit</span><span class="hljs-params">(String userId, String submitToken)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">"order:submit:lock:%s:%s"</span>, userId, submitToken);
        <span class="hljs-keyword">return</span> tryLock(lockKey, <span class="hljs-number">100</span>, <span class="hljs-number">5000</span>); <span class="hljs-comment">// ç­‰å¾…100msï¼Œé”æŒæœ‰5ç§’</span>
    }
}

<span class="hljs-comment">// åœ¨è®¢å•æœåŠ¡ä¸­ä½¿ç”¨åˆ†å¸ƒå¼é”</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceV3</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DistributedLockService lockService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;
    
    <span class="hljs-keyword">public</span> OrderSubmitResult <span class="hljs-title function_">submitOrderWithDistributedLock</span><span class="hljs-params">(OrderSubmitRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> request.getUserId();
        <span class="hljs-type">String</span> <span class="hljs-variable">submitToken</span> <span class="hljs-operator">=</span> request.getSubmitToken();
        
        <span class="hljs-comment">// 1. è·å–åˆ†å¸ƒå¼é”</span>
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> lockService.lockForOrderSubmit(userId, submitToken);
        <span class="hljs-keyword">if</span> (lock == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•"</span>);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦å·²å¤„ç†</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">existingOrder</span> <span class="hljs-operator">=</span> orderMapper.selectBySubmitToken(userId, submitToken);
            <span class="hljs-keyword">if</span> (existingOrder != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderSubmitResult</span>(
                    existingOrder.getOrderNo(), 
                    <span class="hljs-string">"è®¢å•å·²åˆ›å»ºæˆåŠŸï¼Œè¯·å‹¿é‡å¤æäº¤"</span>
                );
            }
            
            <span class="hljs-comment">// 3. æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
            <span class="hljs-keyword">return</span> doCreateOrder(request);
            
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// 4. é‡Šæ”¾é”</span>
            <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {
                lock.unlock();
            }
        }
    }
    
    <span class="hljs-keyword">private</span> OrderSubmitResult <span class="hljs-title function_">doCreateOrder</span><span class="hljs-params">(OrderSubmitRequest request)</span> {
        <span class="hljs-comment">// å®é™…çš„è®¢å•åˆ›å»ºé€»è¾‘</span>
        <span class="hljs-comment">// è¿™é‡Œå·²ç»ä¿è¯äº†åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¤„ç†åŒä¸€ä¸ªæäº¤è¯·æ±‚</span>
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<h3 data-id="heading-14">5.2 åˆ†å¸ƒå¼é”çš„æ³¨æ„äº‹é¡¹</h3>
<p>ä½¿ç”¨åˆ†å¸ƒå¼é”æ—¶è¦æ³¨æ„ï¼š</p>
<ol>
<li><strong>é”ç²’åº¦</strong>ï¼šä¸è¦å¤ªç²—ï¼ˆå½±å“æ€§èƒ½ï¼‰ä¹Ÿä¸è¦å¤ªç»†ï¼ˆå¢åŠ å¤æ‚åº¦ï¼‰</li>
<li><strong>é”è¶…æ—¶</strong>ï¼šå¿…é¡»è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œé˜²æ­¢æ­»é”</li>
<li><strong>é”ç»­æœŸ</strong>ï¼šå¯¹äºé•¿æ—¶é—´æ“ä½œï¼Œéœ€è¦å®ç°é”ç»­æœŸæœºåˆ¶</li>
<li><strong>å¯é‡å…¥æ€§</strong>ï¼šåŒä¸€ä¸ªçº¿ç¨‹å¯ä»¥é‡å¤è·å–é”</li>
<li><strong>å®¹é”™æ€§</strong>ï¼šRedisé›†ç¾¤æ•…éšœæ—¶è¦æœ‰é™çº§æ–¹æ¡ˆ</li>
</ol>
<h2 data-id="heading-15">06 ç¬¬äº”é“é˜²çº¿ï¼šå¼‚æ­¥å¤„ç†ä¸æ¶ˆæ¯é˜Ÿåˆ—</h2>
<p>å¯¹äºé«˜å¹¶å‘åœºæ™¯ï¼Œå¯ä»¥é‡‡ç”¨å¼‚æ­¥å¤„ç†æ¨¡å¼ï¼Œå°†åŒæ­¥è¯·æ±‚è½¬ä¸ºå¼‚æ­¥ä»»åŠ¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90fb2463affa440aa8d5fb9e84bd73f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767060695&amp;x-signature=etKQANGWdTFnRfnHUnFWHdjeWws%3D" alt="" loading="lazy"/></p>
<p>å®ç°ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¼‚æ­¥è®¢å•å¤„ç†å®ç°</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncOrderService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RocketMQTemplate rocketMQTemplate;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥æäº¤è®¢å•
     */</span>
    <span class="hljs-keyword">public</span> AsyncSubmitResult <span class="hljs-title function_">asyncSubmitOrder</span><span class="hljs-params">(OrderSubmitRequest request)</span> {
        <span class="hljs-comment">// 1. ç”Ÿæˆå”¯ä¸€è¯·æ±‚ID</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">requestId</span> <span class="hljs-operator">=</span> generateRequestId(request.getUserId());
        
        <span class="hljs-comment">// 2. å¿«é€ŸéªŒè¯ï¼ˆåº“å­˜ã€ç”¨æˆ·çŠ¶æ€ç­‰ï¼‰</span>
        quickValidate(request);
        
        <span class="hljs-comment">// 3. å°†è¯·æ±‚IDä¸ç”¨æˆ·å…³è”ï¼ˆç”¨äºæŸ¥è¯¢ç»“æœï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">pendingKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order:pending:"</span> + request.getUserId() + <span class="hljs-string">":"</span> + requestId;
        redisTemplate.opsForValue().set(pendingKey, <span class="hljs-string">"processing"</span>, <span class="hljs-number">10</span>, TimeUnit.MINUTES);
        
        <span class="hljs-comment">// 4. å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—</span>
        <span class="hljs-type">OrderMessage</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderMessage</span>();
        message.setRequestId(requestId);
        message.setRequest(request);
        message.setTimestamp(System.currentTimeMillis());
        
        rocketMQTemplate.asyncSend(
            <span class="hljs-string">"ORDER_SUBMIT_TOPIC"</span>, 
            message, 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SendCallback</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(SendResult sendResult)</span> {
                    log.info(<span class="hljs-string">"è®¢å•æ¶ˆæ¯å‘é€æˆåŠŸ: {}"</span>, requestId);
                }
                
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onException</span><span class="hljs-params">(Throwable throwable)</span> {
                    log.error(<span class="hljs-string">"è®¢å•æ¶ˆæ¯å‘é€å¤±è´¥: {}"</span>, requestId, throwable);
                    <span class="hljs-comment">// å‘é€å¤±è´¥ï¼Œæ›´æ–°çŠ¶æ€</span>
                    redisTemplate.opsForValue().set(
                        pendingKey, 
                        <span class="hljs-string">"failed"</span>, 
                        <span class="hljs-number">5</span>, 
                        TimeUnit.MINUTES
                    );
                }
            }
        );
        
        <span class="hljs-comment">// 5. ç«‹å³è¿”å›ï¼Œå‘ŠçŸ¥ç”¨æˆ·å¤„ç†ä¸­</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncSubmitResult</span>(requestId, <span class="hljs-string">"è®¢å•æäº¤æˆåŠŸï¼Œæ­£åœ¨å¤„ç†ä¸­"</span>);
    }
}

<span class="hljs-comment">// æ¶ˆæ¯æ¶ˆè´¹è€…</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RocketMQMessageListener(
    topic = "ORDER_SUBMIT_TOPIC",
    consumerGroup = "order-submit-consumer-group"
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderSubmitConsumer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RocketMQListener</span>&lt;OrderMessage&gt; {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderMapper orderMapper;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(OrderMessage message)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">requestId</span> <span class="hljs-operator">=</span> message.getRequestId();
        <span class="hljs-type">OrderSubmitRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> message.getRequest();
        
        <span class="hljs-comment">// 1. å¹‚ç­‰æ£€æŸ¥ï¼ˆåŸºäºrequestIdï¼‰</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">existing</span> <span class="hljs-operator">=</span> orderMapper.selectByRequestId(requestId);
        <span class="hljs-keyword">if</span> (existing != <span class="hljs-literal">null</span>) {
            log.info(<span class="hljs-string">"è®¢å•å·²å¤„ç†ï¼Œè·³è¿‡: {}"</span>, requestId);
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// 2. åˆ›å»ºè®¢å•</span>
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> createOrder(request, requestId);
        
        <span class="hljs-keyword">try</span> {
            orderMapper.insert(order);
            log.info(<span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸ: {}"</span>, order.getOrderNo());
            
            <span class="hljs-comment">// 3. æ›´æ–°å¤„ç†çŠ¶æ€</span>
            updateProcessingStatus(request.getUserId(), requestId, <span class="hljs-string">"success"</span>, order.getOrderNo());
            
        } <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
            log.warn(<span class="hljs-string">"è®¢å•é‡å¤ï¼ŒrequestId={}"</span>, requestId);
            <span class="hljs-comment">// æŸ¥è¯¢å·²åˆ›å»ºçš„è®¢å•</span>
            <span class="hljs-type">Order</span> <span class="hljs-variable">created</span> <span class="hljs-operator">=</span> orderMapper.selectByRequestId(requestId);
            <span class="hljs-keyword">if</span> (created != <span class="hljs-literal">null</span>) {
                updateProcessingStatus(request.getUserId(), requestId, <span class="hljs-string">"success"</span>, created.getOrderNo());
            }
        }
    }
}
</code></pre>
<h2 data-id="heading-16">07 ç»¼åˆæ–¹æ¡ˆï¼šå¤šå±‚æ¬¡è”åˆé˜²æŠ¤</h2>
<p>åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé‡‡ç”¨å¤šå±‚æ¬¡ã€ç«‹ä½“åŒ–çš„é˜²æŠ¤ç­–ç•¥ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç»¼åˆæ–¹æ¡ˆæµç¨‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6a5a4471629405bb76af04a642c9279~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767060695&amp;x-signature=qM7q5jh8zQOC9Fchq4j0HOaKuw4%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªå¤šå±‚æ¬¡æ–¹æ¡ˆä¸­ï¼Œæ¯ä¸€å±‚éƒ½æœ‰å…¶ç‰¹å®šä½œç”¨ï¼š</p>
<ul>
<li><strong>å‰ç«¯å±‚</strong>ï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼Œæ‹¦æˆªå¤§éƒ¨åˆ†æ— æ„è¯†é‡å¤</li>
<li><strong>ç½‘å…³å±‚</strong>ï¼šå®‰å…¨é˜²æŠ¤ï¼Œé˜²åˆ·ã€é™æµ</li>
<li><strong>ä¸šåŠ¡å±‚</strong>ï¼šæ ¸å¿ƒå¹‚ç­‰é€»è¾‘ï¼Œåˆ†å¸ƒå¼é”ä¿è¯å¹¶å‘å®‰å…¨</li>
<li><strong>æ•°æ®å±‚</strong>ï¼šæœ€ç»ˆä¿éšœï¼Œå”¯ä¸€çº¦æŸé˜²æ­¢æ•°æ®ä¸ä¸€è‡´</li>
<li><strong>å¼‚æ­¥å±‚</strong>ï¼šå‰Šå³°å¡«è°·ï¼Œæå‡ç³»ç»Ÿååé‡</li>
</ul>
<h2 data-id="heading-17">08 å®æˆ˜ï¼šä¸åŒåœºæ™¯ä¸‹çš„æ–¹æ¡ˆé€‰æ‹©</h2>
<p>ä¸åŒçš„ä¸šåŠ¡åœºæ™¯éœ€è¦ä¸åŒçš„é˜²æŠ¤ç­–ç•¥ï¼Œè¿™é‡Œç»™å‡ºä¸€äº›å®è·µå»ºè®®ï¼š</p>
<h3 data-id="heading-18">8.1 æ™®é€šç”µå•†è®¢å•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ™®é€šç”µå•†è®¢å•æ¨èæ–¹æ¡ˆ</span>
<span class="hljs-meta">@Service</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StandardOrderService</span> {
    
    <span class="hljs-comment">// ç»¼åˆä½¿ç”¨ï¼šå‰ç«¯é˜²æŠ– + Tokenå¹‚ç­‰ + æ•°æ®åº“å”¯ä¸€çº¦æŸ</span>
    <span class="hljs-keyword">public</span> OrderSubmitResult <span class="hljs-title function_">submitStandardOrder</span><span class="hljs-params">(OrderSubmitRequest request)</span> {
        <span class="hljs-comment">// 1. å‚æ•°æ ¡éªŒ</span>
        validateRequest(request);
        
        <span class="hljs-comment">// 2. å¹‚ç­‰Tokenæ£€æŸ¥ï¼ˆRedisï¼‰</span>
        <span class="hljs-keyword">if</span> (!idempotentCheck(request.getUserId(), request.getSubmitToken())) {
            <span class="hljs-keyword">return</span> getExistingOrderResult(request.getUserId(), request.getSubmitToken());
        }
        
        <span class="hljs-comment">// 3. åˆ†å¸ƒå¼é”ï¼ˆé˜²å¹¶å‘ï¼‰</span>
        <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> acquireOrderLock(request.getUserId(), request.getProductId());
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 4. åº“å­˜æ£€æŸ¥ç­‰ä¸šåŠ¡æ ¡éªŒ</span>
            checkInventory(request.getProductId(), request.getQuantity());
            
            <span class="hljs-comment">// 5. åˆ›å»ºè®¢å•ï¼ˆä¾èµ–æ•°æ®åº“å”¯ä¸€çº¦æŸï¼‰</span>
            <span class="hljs-keyword">return</span> createOrderInTransaction(request);
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }
}
</code></pre>
<h3 data-id="heading-19">8.2 ç§’æ€è®¢å•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç§’æ€è®¢å•éœ€è¦æ›´æè‡´çš„ä¼˜åŒ–</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlashSaleOrderService</span> {
    
    <span class="hljs-comment">// ç§’æ€æ–¹æ¡ˆï¼šå¼‚æ­¥å¤„ç† + åº“å­˜é¢„æ‰£ + æœ€ç»ˆä¸€è‡´æ€§</span>
    <span class="hljs-keyword">public</span> FlashSaleSubmitResult <span class="hljs-title function_">submitFlashSaleOrder</span><span class="hljs-params">(FlashSaleRequest request)</span> {
        <span class="hljs-comment">// 1. éªŒè¯ç”¨æˆ·èµ„æ ¼å’Œæ´»åŠ¨çŠ¶æ€ï¼ˆç¼“å­˜ä¸­æ£€æŸ¥ï¼‰</span>
        <span class="hljs-keyword">if</span> (!checkUserQualification(request.getUserId(), request.getActivityId())) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"æ‚¨ä¸å…·å¤‡å‚ä¸èµ„æ ¼"</span>);
        }
        
        <span class="hljs-comment">// 2. é¢„æ‰£åº“å­˜ï¼ˆRedisåŸå­æ“ä½œï¼‰</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">stockDeducted</span> <span class="hljs-operator">=</span> preDeductStock(
            request.getActivityId(), 
            request.getProductId(), 
            request.getUserId()
        );
        
        <span class="hljs-keyword">if</span> (!stockDeducted) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"åº“å­˜ä¸è¶³"</span>);
        }
        
        <span class="hljs-comment">// 3. ç”Ÿæˆå”¯ä¸€è¯·æ±‚ID</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">requestId</span> <span class="hljs-operator">=</span> generateRequestId(request.getUserId(), request.getActivityId());
        
        <span class="hljs-comment">// 4. å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¿«é€Ÿè¿”å›ï¼‰</span>
        sendToMQ(request, requestId);
        
        <span class="hljs-comment">// 5. ç«‹å³è¿”å›</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlashSaleSubmitResult</span>(requestId, <span class="hljs-string">"ç§’æ€è¯·æ±‚å·²æ¥å—ï¼Œå¤„ç†ä¸­"</span>);
    }
    
    <span class="hljs-comment">// æ¶ˆè´¹è€…å¼‚æ­¥åˆ›å»ºè®¢å•</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processFlashSaleOrder</span><span class="hljs-params">(FlashSaleRequest request, String requestId)</span> {
        <span class="hljs-comment">// è¿™é‡Œåªéœ€è¦å¤„ç†çœŸæ­£çš„è®¢å•åˆ›å»º</span>
        <span class="hljs-comment">// å› ä¸ºåº“å­˜å·²åœ¨Redisä¸­é¢„æ‰£ï¼Œåªéœ€ä¿è¯æœ€ç»ˆä¸€è‡´æ€§</span>
        <span class="hljs-keyword">try</span> {
            createOrder(request, requestId);
            <span class="hljs-comment">// åŒæ­¥åº“å­˜åˆ°æ•°æ®åº“</span>
            syncStockToDB(request.getProductId(), request.getActivityId());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å¤±è´¥æ—¶å›æ»šRedisåº“å­˜</span>
            rollbackStockInRedis(request.getActivityId(), request.getProductId(), request.getUserId());
            <span class="hljs-keyword">throw</span> e;
        }
    }
}
</code></pre>
<h2 data-id="heading-20">10 æ€»ç»“</h2>
<p>é˜²æ­¢é‡å¤æäº¤è®¢å•æ˜¯ä¸€ä¸ªç³»ç»Ÿå·¥ç¨‹ï¼Œéœ€è¦ä»å‰åˆ°åã€å¤šå±‚æ¬¡çš„é˜²æŠ¤ã€‚</p>
<p>è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹å…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong>å‰ç«¯é˜²æŠ¤æ˜¯ä½“éªŒï¼Œä¸æ˜¯ä¿éšœ</strong>ï¼šæŒ‰é’®é˜²æŠ–ã€è¯·æ±‚æ‹¦æˆªèƒ½æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œä½†ä¸èƒ½ä½œä¸ºå”¯ä¸€é˜²çº¿ã€‚</li>
<li><strong>å¹‚ç­‰æ€§æ˜¯æ ¸å¿ƒç†å¿µ</strong>ï¼šæ— è®ºæ˜¯Tokenæ–¹æ¡ˆè¿˜æ˜¯ä¸šåŠ¡å”¯ä¸€æ ‡è¯†ï¼Œéƒ½è¦ä¿è¯åŒä¸€æ“ä½œæ‰§è¡Œå¤šæ¬¡çš„ç»“æœä¸€è‡´ã€‚</li>
<li><strong>åˆ†å¸ƒå¼é”è§£å†³å¹¶å‘é—®é¢˜</strong>ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œé˜²æ­¢å¤šä¸ªå®ä¾‹åŒæ—¶å¤„ç†åŒä¸€è¯·æ±‚ã€‚</li>
<li><strong>æ•°æ®åº“æ˜¯æœ€åé˜²çº¿</strong>ï¼šå”¯ä¸€çº¦æŸã€ä¹è§‚é”ç­‰æœºåˆ¶èƒ½åœ¨åº”ç”¨å±‚é˜²æŠ¤å¤±æ•ˆæ—¶ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li><strong>å¼‚æ­¥å¤„ç†æå‡åå</strong>ï¼šå¯¹äºé«˜å¹¶å‘åœºæ™¯ï¼Œå°†åŒæ­¥è¯·æ±‚è½¬ä¸ºå¼‚æ­¥å¤„ç†ï¼Œæé«˜ç³»ç»Ÿæ•´ä½“ååé‡ã€‚</li>
<li><strong>ç›‘æ§å‘Šè­¦å¿…ä¸å¯å°‘</strong>ï¼šæ²¡æœ‰ç›‘æ§çš„ç³»ç»Ÿå°±åƒæ²¡æœ‰ä»ªè¡¨çš„é£æœºï¼Œæ— æ³•å‘ç°é—®é¢˜å’Œä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ol>
<p>åœ¨å®é™…æ¶æ„è®¾è®¡ä¸­ï¼Œæˆ‘é€šå¸¸å»ºè®®é‡‡ç”¨ <strong>"å‰ç«¯é˜²æŠ– + ç½‘å…³é™æµ + Tokenå¹‚ç­‰ + åˆ†å¸ƒå¼é” + æ•°æ®åº“å”¯ä¸€çº¦æŸ"</strong> çš„ç»¼åˆæ–¹æ¡ˆï¼Œå¯¹äºç§’æ€ç­‰æè‡´åœºæ™¯å†åŠ å…¥å¼‚æ­¥å¤„ç†ã€‚</p>
<p>æœ‰äº›å°ä¼™ä¼´å¯èƒ½ä¼šè§‰å¾—è¿™äº›é˜²æŠ¤æªæ–½å¤ªå¤æ‚ï¼Œå½±å“å¼€å‘æ•ˆç‡ã€‚</p>
<p>ä½†è¯·è®°ä½ï¼š<strong>é¢„é˜²çš„æˆæœ¬è¿œä½äºä¿®å¤çš„æˆæœ¬</strong>ã€‚</p>
<p>ä¸€æ¬¡é‡å¤æäº¤å¯¼è‡´çš„èµ„æŸäº‹æ•…ï¼Œå¯èƒ½å°±éœ€è¦æ•´ä¸ªå›¢é˜ŸåŠ ç­æ•°å‘¨æ¥ä¿®å¤æ•°æ®å’Œå®‰æŠšç”¨æˆ·ã€‚</p>
<p>æŠ€æœ¯æ–¹æ¡ˆæ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰æœ€é€‚åˆä¸šåŠ¡åœºæ™¯çš„å¹³è¡¡ã€‚</p>
<h2 data-id="heading-21">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p>
<p>æ›´å¤šé¡¹ç›®å®æˆ˜åœ¨æˆ‘çš„æŠ€æœ¯ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.susan.net.cn%2Fproject" title="https://link.juejin.cn?target=http%3A%2F%2Fwww.susan.net.cn%2Fproject" target="_blank">www.susan.net.cn/project</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­£åˆ™è¡¨è¾¾å¼åœ¨ Scala ä¸­çš„åº”ç”¨]]></title>    <link>https://juejin.cn/post/7586559672129011764</link>    <guid>https://juejin.cn/post/7586559672129011764</guid>    <pubDate>2025-12-23T00:44:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586559672129011764" data-draft-id="7586559672128978996" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­£åˆ™è¡¨è¾¾å¼åœ¨ Scala ä¸­çš„åº”ç”¨"/> <meta itemprop="keywords" content="Scala"/> <meta itemprop="datePublished" content="2025-12-23T00:44:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç äºè€æ€»"/> <meta itemprop="url" content="https://juejin.cn/user/582105100725436"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­£åˆ™è¡¨è¾¾å¼åœ¨ Scala ä¸­çš„åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/582105100725436/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç äºè€æ€»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T00:44:20.000Z" title="Tue Dec 23 2025 00:44:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï½ä»Šå¤©æ¥èŠä¸ª<strong>é€šç”¨åˆå®ç”¨</strong>çš„æŠ€èƒ½ï¼šæ­£åˆ™è¡¨è¾¾å¼åœ¨ Scala ä¸­çš„åº”ç”¨ã€‚ä¸ç®¡ä½ æ˜¯å¤„ç†æ—¥å¿—ã€æ ¡éªŒæ‰‹æœºå·ï¼Œè¿˜æ˜¯æå–å­—ç¬¦ä¸²é‡Œçš„ç‰¹å®šå†…å®¹ï¼Œæ­£åˆ™éƒ½æ˜¯ç»•ä¸å¼€çš„ â€œæ•ˆç‡ç¥å™¨â€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆææ‡‚ï¼šæ­£åˆ™åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿ</h2>
<p>å¾ˆå¤šæœ‹å‹è§‰å¾—æ­£åˆ™ â€œéš¾å­¦â€ï¼Œå…¶å®æ ¸å¿ƒå°±ä¸€å¥è¯ï¼š<strong>æ­£åˆ™æ˜¯ä¸€å¥—ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„ â€œå­—ç¬¦ä¸²è§„åˆ™è¯­è¨€â€</strong> Â â€”â€” ä¸ç®¡ä½ ç”¨ Scalaã€Java è¿˜æ˜¯ Pythonï¼Œåªè¦æ˜¯å†™<code>\d</code>å°±ä»£è¡¨åŒ¹é…æ•°å­—ï¼Œå†™<code>{11}</code>å°±ä»£è¡¨é‡å¤ 11 æ¬¡ï¼Œè§„åˆ™æ˜¯é€šç”¨çš„ã€‚</p>
<p>å®ƒä¸»è¦ç”¨æ¥å¹²ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li><strong>æŸ¥æ‰¾</strong>ï¼šä»å¤§å­—ç¬¦ä¸²é‡Œæªå‡ºç¬¦åˆè§„åˆ™çš„å­ä¸²ï¼ˆæ¯”å¦‚ä»ä¸€æ®µæ–‡å­—é‡Œæ‰¾æ‰‹æœºå·ï¼‰</li>
<li><strong>åŒ¹é…</strong>ï¼šéªŒè¯æ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼ˆæ¯”å¦‚æ£€æŸ¥è¾“å…¥çš„æ˜¯ä¸æ˜¯åˆæ³•æ‰‹æœºå·ï¼‰</li>
</ul>
<h2 data-id="heading-1">äºŒã€å®æˆ˜ï¼šç”¨ Scala æ‰¾å­—ç¬¦ä¸²é‡Œçš„ 11 ä½æ•°å­—</h2>
<p>ç›´æ¥ä¸Šä»£ç ï¼ˆè¿™æ˜¯æˆ‘å†™çš„ä¸€ä¸ª â€œæå– 11 ä½æ•°å­—â€ çš„ç¤ºä¾‹ï¼‰ï¼Œå’±ä»¬è¾¹çœ‹è¾¹æ‹†ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">/*
* 1ã€å¤„ç†å­—ç¬¦ä¸²
* 2ã€æŸ¥æ‰¾ï¼šåœ¨å¤§å­—ç¬¦ä¸²é‡Œæ‰¾ç¬¦åˆè§„åˆ™çš„å­ä¸²
* 3ã€åŒ¹é…ï¼šéªŒè¯å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³è§„åˆ™
* åˆ’é‡ç‚¹ï¼šæ­£åˆ™æ˜¯é€šç”¨æŠ€æœ¯ï¼Œå’Œç¼–ç¨‹è¯­è¨€æ— å…³ï¼
*/</span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">reg01</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    <span class="hljs-comment">// 1. å®šä¹‰æ­£åˆ™è§„åˆ™ï¼šåŒ¹é…11ä½è¿ç»­æ•°å­—</span>
    <span class="hljs-keyword">val</span> reg = <span class="hljs-string">"\d{11}"</span>.r  
    
    <span class="hljs-comment">// 2. å‡†å¤‡è¦å¤„ç†çš„ç›®æ ‡å­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">val</span> target = <span class="hljs-string">"I like æˆ‘å–œæ¬¢ æ•°13347589473!"</span>
    
    <span class="hljs-comment">// 3. æŸ¥æ‰¾å¹¶è¾“å‡ºç»“æœ</span>
    println(<span class="hljs-string">"æ‰¾åˆ°çš„11ä½æ•°å­—æ˜¯ï¼š"</span>)
    reg.findAllIn(target).foreach(println)
  }
}
</code></pre>
<h3 data-id="heading-2">ä»£ç æ‹†è§£ï¼š3 æ­¥æå®šæ­£åˆ™åŒ¹é…</h3>
<h4 data-id="heading-3">1. å®šä¹‰æ­£åˆ™è§„åˆ™ï¼š<code>val reg = "\d{11}".r</code></h4>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li><code>\d{11}</code>ï¼šè¿™æ˜¯<strong>æ­£åˆ™è¯­æ³•</strong>â€”â€”<code>\d</code>ä»£è¡¨ â€œä¸€ä¸ªæ•°å­—â€ï¼ˆScala é‡Œè¦å†™ä¸¤ä¸ªåæ–œæ <code>\</code>åšè½¬ä¹‰ï¼‰ï¼Œ<code>{11}</code>ä»£è¡¨ â€œè¿ç»­å‡ºç° 11 æ¬¡â€ï¼Œåˆèµ·æ¥å°±æ˜¯ â€œåŒ¹é… 11 ä½è¿ç»­æ•°å­—â€ï¼›</li>
<li><code>.r</code>ï¼šè¿™æ˜¯ Scala çš„ â€œå°é­”æ³•â€â€”â€” æŠŠæ™®é€šå­—ç¬¦ä¸²è½¬æˆ<code>Regex</code>å¯¹è±¡ï¼Œåªæœ‰è½¬æˆè¿™ä¸ªå¯¹è±¡ï¼Œæ‰èƒ½è°ƒç”¨æ­£åˆ™çš„ä¸“å±æ–¹æ³•ã€‚</li>
</ul>
<h4 data-id="heading-4">2. å‡†å¤‡ç›®æ ‡å­—ç¬¦ä¸²ï¼š<code>val target = "I like æˆ‘å–œæ¬¢ æ•°13347589473!"</code></h4>
<p>å°±æ˜¯å’±ä»¬è¦å¤„ç†çš„åŸå§‹å†…å®¹ï¼Œé‡Œé¢æ··äº†è‹±æ–‡ã€ä¸­æ–‡å’Œæ•°å­—ï¼Œæˆ‘ä»¬è¦æŠŠ 11 ä½çš„æ•°å­— â€œæªâ€ å‡ºæ¥ã€‚</p>
<h4 data-id="heading-5">3. æ‰§è¡ŒæŸ¥æ‰¾ï¼š<code>reg.findAllIn(target).foreach(println)</code></h4>
<ul>
<li><code>findAllIn(target)</code>ï¼š<code>Regex</code>å¯¹è±¡çš„æ ¸å¿ƒæ–¹æ³•ï¼Œä½œç”¨æ˜¯<strong>æŠŠç›®æ ‡å­—ç¬¦ä¸²é‡Œæ‰€æœ‰ç¬¦åˆè§„åˆ™çš„å­ä¸²éƒ½æ‰¾å‡ºæ¥</strong>ï¼Œè¿”å›ä¸€ä¸ªå¯è¿­ä»£çš„é›†åˆï¼›</li>
<li><code>foreach(println)</code>ï¼šéå†é›†åˆï¼ŒæŠŠæ‰¾åˆ°çš„ç»“æœæ‰“å°å‡ºæ¥ã€‚</li>
</ul>
<h3 data-id="heading-6">è¿è¡Œç»“æœ</h3>
<p>æ‰§è¡Œä»£ç åï¼Œæ§åˆ¶å°ä¼šç›´æ¥è¾“å‡ºï¼š</p>
<pre><code class="hljs">æ‰¾åˆ°çš„11ä½æ•°å­—æ˜¯ï¼š
13347589473
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€è¿›é˜¶ï¼šæ­£åˆ™åœ¨ Scala é‡Œçš„å¸¸ç”¨ç©æ³•</h2>
<p>å…‰ â€œæŸ¥æ‰¾â€ è¿˜ä¸å¤Ÿï¼Œæ­£åˆ™è¿˜æœ‰å¾ˆå¤šå®ç”¨æ“ä½œï¼Œè¿™é‡Œè¡¥å…… 3 ä¸ªé«˜é¢‘åœºæ™¯ï¼š</p>
<h3 data-id="heading-8">1. åªæ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„å†…å®¹</h3>
<p>ç”¨<code>findFirstIn</code>æ–¹æ³•ï¼Œé€‚åˆåªéœ€è¦ â€œç¬¬ä¸€ä¸ªç»“æœâ€ çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// æ‰¾ç¬¬ä¸€ä¸ª11ä½æ•°å­—</span>
<span class="hljs-keyword">val</span> firstNum = reg.findFirstIn(target)
firstNum.foreach(res =&gt; println(<span class="hljs-string">s"ç¬¬ä¸€ä¸ªåŒ¹é…ç»“æœï¼š<span class="hljs-subst">$res</span>"</span>))
</code></pre>
<p>è¾“å‡ºï¼š<code>ç¬¬ä¸€ä¸ªåŒ¹é…ç»“æœï¼š13347589473</code></p>
<h3 data-id="heading-9">2. éªŒè¯æ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆè§„åˆ™</h3>
<p>ç”¨<code>matches</code>æ–¹æ³•ï¼Œæ¯”å¦‚éªŒè¯ â€œè¾“å…¥çš„æ˜¯ä¸æ˜¯çº¯ 11 ä½æ•°å­—â€ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">val</span> phone1 = <span class="hljs-string">"13347589473"</span>  <span class="hljs-comment">// åˆæ³•</span>
<span class="hljs-keyword">val</span> phone2 = <span class="hljs-string">"13347589473abc"</span>  <span class="hljs-comment">// ä¸åˆæ³•</span>
println(phone1.matches(<span class="hljs-string">"\d{11}"</span>))  <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
println(phone2.matches(<span class="hljs-string">"\d{11}"</span>))  <span class="hljs-comment">// è¾“å‡ºï¼šfalse</span>
</code></pre>
<h3 data-id="heading-10">3. æ›¿æ¢åŒ¹é…çš„å†…å®¹</h3>
<p>ç”¨<code>replaceAllIn</code>æ–¹æ³•ï¼ŒæŠŠæ‰¾åˆ°çš„å†…å®¹æ›¿æ¢æˆå…¶ä»–å­—ç¬¦ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// æŠŠ11ä½æ•°å­—æ›¿æ¢æˆ****è„±æ•</span>
<span class="hljs-keyword">val</span> desensitized = reg.replaceAllIn(target, <span class="hljs-string">"****"</span>)
println(desensitized)  <span class="hljs-comment">// è¾“å‡ºï¼šI like æˆ‘å–œæ¬¢ æ•°****!</span>
</code></pre>
<h2 data-id="heading-11">å››ã€æœ€åæ€»ç»“ï¼šæ­£åˆ™çš„ â€œé€šç”¨ + é«˜æ•ˆâ€</h2>
<ol>
<li><strong>è§„åˆ™é€šç”¨</strong>ï¼šæ­£åˆ™è¯­æ³•æ˜¯è·¨è¯­è¨€çš„ï¼Œå­¦ä¼š<code>\d</code>ã€<code>{n}</code>ã€<code>\w</code>è¿™äº›åŸºç¡€è¯­æ³•ï¼Œæ¢ä»»ä½•è¯­è¨€éƒ½èƒ½ç”¨ï¼›</li>
<li><strong>Scala è°ƒç”¨æµç¨‹å›ºå®š</strong>ï¼šå®šä¹‰è§„åˆ™ï¼ˆå­—ç¬¦ä¸² +.rï¼‰â†’ è°ƒç”¨æ–¹æ³•ï¼ˆfindAllIn/matches ç­‰ï¼‰â†’ å¤„ç†ç»“æœï¼›</li>
<li><strong>åœºæ™¯å¹¿æ³›</strong>ï¼šæ—¥å¿—è§£æã€è¡¨å•æ ¡éªŒã€æ•°æ®æ¸…æ´—â€¦â€¦ åªè¦æ¶‰åŠå­—ç¬¦ä¸²å¤„ç†ï¼Œæ­£åˆ™éƒ½æ˜¯ â€œå·æ‡’ç¥å™¨â€ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CompletableFuture å¼‚å¸¸åå™¬ï¼šå¼‚æ­¥ä»»åŠ¡å¼‚å¸¸æœªå¤„ç†å¯¼è‡´ç»“æœä¸¢å¤±]]></title>    <link>https://juejin.cn/post/7586505172815888435</link>    <guid>https://juejin.cn/post/7586505172815888435</guid>    <pubDate>2025-12-23T00:55:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586505172815888435" data-draft-id="7584266920640528435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CompletableFuture å¼‚å¸¸åå™¬ï¼šå¼‚æ­¥ä»»åŠ¡å¼‚å¸¸æœªå¤„ç†å¯¼è‡´ç»“æœä¸¢å¤±"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-23T00:55:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uup"/> <meta itemprop="url" content="https://juejin.cn/user/4378706456356627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CompletableFuture å¼‚å¸¸åå™¬ï¼šå¼‚æ­¥ä»»åŠ¡å¼‚å¸¸æœªå¤„ç†å¯¼è‡´ç»“æœä¸¢å¤±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4378706456356627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T00:55:36.000Z" title="Tue Dec 23 2025 00:55:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Bug åœºæ™¯</h2>
<p>åœ¨ä¸€ä¸ªåŸºäº Java çš„å¾®æœåŠ¡åº”ç”¨ä¸­ï¼Œä½¿ç”¨Â <code>CompletableFuture</code>Â æ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œä»¥æé«˜ç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤„ç†ç”¨æˆ·æ³¨å†Œæµç¨‹æ—¶ï¼Œä¼šå¼‚æ­¥è°ƒç”¨å¤šä¸ªæœåŠ¡è¿›è¡Œæ•°æ®æ ¡éªŒã€ç”Ÿæˆè´¦å·ç­‰æ“ä½œã€‚ç„¶è€Œï¼Œåœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå‘ç°å½“æŸä¸ªå¼‚æ­¥ä»»åŠ¡å‡ºç°å¼‚å¸¸æ—¶ï¼Œæ²¡æœ‰å¾—åˆ°æ­£ç¡®çš„å¤„ç†ï¼Œå¯¼è‡´æ•´ä¸ªæ³¨å†Œæµç¨‹çœ‹ä¼¼æ­£å¸¸å®Œæˆï¼Œä½†å®é™…ä¸Šéƒ¨åˆ†å…³é”®æ•°æ®æ²¡æœ‰æ­£ç¡®ç”Ÿæˆï¼Œå½±å“äº†ä¸šåŠ¡çš„æ­£å¸¸è¿›è¡Œã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-2">å¼‚æ­¥ä»»åŠ¡ç±»ï¼ˆæœ‰ç¼ºé™·ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutionException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTaskExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">performAsyncTask</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-comment">// æ¨¡æ‹Ÿå¯èƒ½å‡ºç°å¼‚å¸¸çš„æ“ä½œ</span>
            <span class="hljs-keyword">if</span> (Math.random() &gt; <span class="hljs-number">0.5</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡å¼‚å¸¸"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡æˆåŠŸå®Œæˆ"</span>;
        });
    }
}
</code></pre>
<h3 data-id="heading-3">æµ‹è¯•ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CompletableFutureBugExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        CompletableFuture&lt;String&gt; future = AsyncTaskExample.performAsyncTask();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.get();
            System.out.println(<span class="hljs-string">"ä»»åŠ¡ç»“æœ: "</span> + result);
        } <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€é—®é¢˜æè¿°</h2>
<ol>
<li><strong>é¢„æœŸè¡Œä¸º</strong>ï¼šå½“å¼‚æ­¥ä»»åŠ¡å‡ºç°å¼‚å¸¸æ—¶ï¼Œèƒ½å¤ŸåŠæ—¶æ•è·å¹¶å¤„ç†å¼‚å¸¸ï¼Œç¡®ä¿ä¸šåŠ¡æµç¨‹çš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚ä¾‹å¦‚ï¼Œåœ¨ç”¨æˆ·æ³¨å†Œåœºæ™¯ä¸­ï¼Œå¦‚æœæŸä¸ªå¼‚æ­¥æ ¡éªŒæˆ–ç”Ÿæˆæ“ä½œå¤±è´¥ï¼Œåº”è¯¥å›æ»šæ•´ä¸ªæ³¨å†Œæµç¨‹ï¼Œå¹¶å‘ç”¨æˆ·è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</li>
<li><strong>å®é™…è¡Œä¸º</strong>ï¼šåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œè™½ç„¶Â <code>CompletableFuture</code>Â ä¸­çš„ä»»åŠ¡å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œä½†åœ¨è°ƒç”¨Â <code>future.get()</code>Â æ—¶ï¼Œå¼‚å¸¸è¢«Â <code>ExecutionException</code>Â åŒ…è£…ï¼Œå¹¶ä¸”åœ¨Â <code>main</code>Â æ–¹æ³•ä¸­åªæ˜¯ç®€å•åœ°æ‰“å°äº†å †æ ˆä¿¡æ¯ã€‚è¿™ä½¿å¾—ä¸šåŠ¡å±‚æ— æ³•å¯¹å…·ä½“çš„å¼‚å¸¸è¿›è¡Œé’ˆå¯¹æ€§å¤„ç†ï¼Œå¯¼è‡´å³ä½¿å¼‚æ­¥ä»»åŠ¡å¤±è´¥ï¼Œç¨‹åºä¹Ÿå¯èƒ½ç»§ç»­æ‰§è¡Œåç»­é€»è¾‘ï¼Œå°±å¥½åƒä»»åŠ¡æˆåŠŸå®Œæˆä¸€æ ·ï¼Œä»è€Œä¸¢å¤±äº†æ­£ç¡®çš„ç»“æœï¼Œå½±å“ä¸šåŠ¡åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œå¼‚å¸¸è¢« â€œåå™¬â€ åœ¨Â <code>ExecutionException</code>Â ä¸­ï¼Œæ²¡æœ‰è¢«æ¸…æ™°åœ°ä¼ é€’å’Œå¤„ç†ï¼Œå¢åŠ äº†è°ƒè¯•å’Œç»´æŠ¤çš„éš¾åº¦ã€‚</li>
</ol>
<h2 data-id="heading-5">å››ã€è§£å†³æ–¹æ¡ˆ</h2>
<ol>
<li><strong>ä½¿ç”¨Â <code>exceptionally</code>Â æ–¹æ³•å¤„ç†å¼‚å¸¸</strong>ï¼š<code>CompletableFuture</code>Â æä¾›äº†Â <code>exceptionally</code>Â æ–¹æ³•ï¼Œå¯åœ¨å¼‚æ­¥ä»»åŠ¡å‡ºç°å¼‚å¸¸æ—¶ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤å€¼æˆ–æ‰§è¡Œä¸€äº›æ›¿ä»£æ“ä½œã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTaskExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">performAsyncTask</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">if</span> (Math.random() &gt; <span class="hljs-number">0.5</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡å¼‚å¸¸"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡æˆåŠŸå®Œæˆ"</span>;
        }).exceptionally(ex -&gt; {
            System.err.println(<span class="hljs-string">"æ•è·åˆ°å¼‚æ­¥ä»»åŠ¡å¼‚å¸¸: "</span> + ex.getMessage());
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡å¤±è´¥ï¼Œè¿”å›é»˜è®¤å€¼"</span>;
        });
    }
}
</code></pre>
<h3 data-id="heading-6">ä¿®æ”¹åçš„æµ‹è¯•ä»£ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CompletableFutureBugExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        CompletableFuture&lt;String&gt; future = AsyncTaskExample.performAsyncTask();
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.join();
        System.out.println(<span class="hljs-string">"ä»»åŠ¡ç»“æœ: "</span> + result);
    }
}
</code></pre>
<ol start="2">
<li><strong>ä½¿ç”¨Â <code>whenComplete</code>Â æ–¹æ³•</strong>ï¼š<code>whenComplete</code>Â æ–¹æ³•å¯ä»¥åœ¨ä»»åŠ¡å®Œæˆï¼ˆæ— è®ºæ˜¯æ­£å¸¸å®Œæˆè¿˜æ˜¯å¼‚å¸¸å®Œæˆï¼‰æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­å¯ä»¥æ ¹æ®ä»»åŠ¡çŠ¶æ€è¿›è¡Œç›¸åº”å¤„ç†ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTaskExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">performAsyncTask</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">if</span> (Math.random() &gt; <span class="hljs-number">0.5</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡å¼‚å¸¸"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡æˆåŠŸå®Œæˆ"</span>;
        }).whenComplete((result, ex) -&gt; {
            <span class="hljs-keyword">if</span> (ex != <span class="hljs-literal">null</span>) {
                System.err.println(<span class="hljs-string">"æ•è·åˆ°å¼‚æ­¥ä»»åŠ¡å¼‚å¸¸: "</span> + ex.getMessage());
            }
        });
    }
}
</code></pre>
<h3 data-id="heading-7">ç»“åˆÂ <code>handle</code>Â æ–¹æ³•è·å–ç»“æœæˆ–å¤„ç†å¼‚å¸¸</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTaskExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">performAsyncTask</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CompletableFuture.supplyAsync(() -&gt; {
            <span class="hljs-keyword">if</span> (Math.random() &gt; <span class="hljs-number">0.5</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡å¼‚å¸¸"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡æˆåŠŸå®Œæˆ"</span>;
        }).handle((result, ex) -&gt; {
            <span class="hljs-keyword">if</span> (ex != <span class="hljs-literal">null</span>) {
                System.err.println(<span class="hljs-string">"æ•è·åˆ°å¼‚æ­¥ä»»åŠ¡å¼‚å¸¸: "</span> + ex.getMessage());
                <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡å¤±è´¥ï¼Œè¿”å›é»˜è®¤å€¼"</span>;
            }
            <span class="hljs-keyword">return</span> result;
        });
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WPFä¸­çš„IValueConverteræ¥å£ï¼ˆå€¼è½¬æ¢å™¨ï¼‰]]></title>    <link>https://juejin.cn/post/7586559672129093684</link>    <guid>https://juejin.cn/post/7586559672129093684</guid>    <pubDate>2025-12-23T01:09:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586559672129093684" data-draft-id="7586498198149611571" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WPFä¸­çš„IValueConverteræ¥å£ï¼ˆå€¼è½¬æ¢å™¨ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-23T01:09:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="seekCat"/> <meta itemprop="url" content="https://juejin.cn/user/925121393197673"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WPFä¸­çš„IValueConverteræ¥å£ï¼ˆå€¼è½¬æ¢å™¨ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/925121393197673/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    seekCat
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T01:09:18.000Z" title="Tue Dec 23 2025 01:09:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1.IValueConverter æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>
<h4 data-id="heading-1">1.1 å®šä¹‰</h4>
<p>IValueConverteræ˜¯WPFä¸­ç”¨äºæ•°æ®ç»‘å®šæ—¶è¿›è¡Œå€¼è½¬æ¢çš„æ¥å£ã€‚</p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">namespace</span> <span class="hljs-title">System.Windows.Data</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IValueConverter</span>{
        <span class="hljs-function"><span class="hljs-built_in">object</span> <span class="hljs-title">Convert</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> <span class="hljs-keyword">value</span>, Type targetType, <span class="hljs-built_in">object</span> parameter, CultureInfo culture</span>)</span>;
        <span class="hljs-function"><span class="hljs-built_in">object</span> <span class="hljs-title">ConvertBack</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> <span class="hljs-keyword">value</span>, Type targetType, <span class="hljs-built_in">object</span> parameter, CultureInfo culture</span>)</span>;
    }
}
</code></pre>
<p>å½“éœ€è¦è°ƒç”¨æ—¶ï¼Œå®ç°è¯¥æ¥å£å¹¶é‡å†™Convertå’ŒConvertBackï¼Œä»¥ä¸‹åˆ†åˆ«å™è¿°è¿™ä¸¤ä¸ªæ–¹æ³•çš„ç”¨é€”</p>
<h4 data-id="heading-2">1.2 æ ¸å¿ƒä½œç”¨</h4>
<p>å½“ViewModleä¸­çš„æ•°æ®ç±»å‹ï¼Œä¸èƒ½ç›´æ¥ç”¨Viewå±•ç¤ºï¼Œå³ViewModelä¸Viewå¯¹åº”çš„æ•°æ®ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œéœ€è¦ä½¿ç”¨è¯¥æ¥å£è¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢ï¼ŒIValueConverterèµ·åˆ°äº†â€œç¿»è¯‘å®˜â€çš„è§’è‰²ã€‚</p>
<h3 data-id="heading-3">2.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å€¼è½¬æ¢å™¨ï¼Ÿ</h3>
<p>åœ¨ MVVM æ¨¡å¼ä¸­ï¼š</p>
<ul>
<li>ViewModel åªæš´éœ² <strong>ä¸šåŠ¡å«ä¹‰çš„æ•°æ®</strong></li>
<li>View éœ€è¦ <strong>UI èƒ½ç†è§£çš„ç±»å‹</strong></li>
</ul>
<p>å…¸å‹ç¤ºä¾‹ï¼š</p>





















<table><thead><tr><th>ViewModelæ•°æ®</th><th>View</th></tr></thead><tbody><tr><td>bool</td><td>Visibility</td></tr><tr><td>enum</td><td>Style</td></tr><tr><td>DataTime</td><td>string</td></tr></tbody></table>
<p>ä¸ºäº†è§£å†³è¿™æ ·çš„ç±»å‹ä¸åŒ¹é…ï¼Œéœ€è¦ä½¿ç”¨å€¼è½¬æ¢å™¨</p>
<h3 data-id="heading-4">3.IValueConverter çš„ç”Ÿå‘½å‘¨æœŸä¸æ‰§è¡Œæ—¶æœº</h3>
<h4 data-id="heading-5">3.1 æ‰§è¡Œæ—¶æœº</h4>
<p>IValueConverterçš„å®ç°ç±»å¯¹è±¡ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè¢«è°ƒç”¨</p>
<ul>
<li>ç»‘å®šæºå±æ€§é¦–æ¬¡èµ‹å€¼</li>
<li>ç»‘å®šæºå±æ€§å‘ç”Ÿå˜åŒ–ï¼ˆINotifyPropertyChangedï¼‰</li>
<li>ç»‘å®šç›®æ ‡éœ€è¦é‡æ–°è®¡ç®—æ˜¾ç¤ºå€¼</li>
</ul>
<h4 data-id="heading-6">3.2 æ‰§è¡Œæ–¹å‘</h4>
<p>ViewModel -&gt; View è°ƒç”¨Convertæ–¹æ³• <br/>
View -&gt; ViewModel è°ƒç”¨ConvertBackæ–¹æ³•</p>
<h3 data-id="heading-7">4.Convert ä¸ ConvertBack çš„èŒè´£åˆ’åˆ†</h3>
<h4 data-id="heading-8">4.1 Convert</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-function"><span class="hljs-built_in">object</span> <span class="hljs-title">Convert</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> <span class="hljs-keyword">value</span>, Type targetType,<span class="hljs-built_in">object</span> parameter, CultureInfo culture</span>)</span>;
</code></pre>

























<table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>value</td><td>å½“å‰ä¼ é€’çš„å€¼ï¼Œåœ¨Concertä¸­æ¥è‡ªViewModel</td></tr><tr><td>targetType</td><td>ç›®æ ‡å±æ€§ç±»å‹</td></tr><tr><td>parameter</td><td>XAMLä¼ å…¥çš„é™„åŠ å‚æ•°</td></tr><tr><td>culture</td><td>åŒºåŸŸä¿¡æ¯</td></tr></tbody></table>
<h4 data-id="heading-9">4.2CovertBack</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-function"><span class="hljs-built_in">object</span> <span class="hljs-title">ConvertBack</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> <span class="hljs-keyword">value</span>, Type targetType, <span class="hljs-built_in">object</span> parameter, CultureInfo culture</span>)</span>;
</code></pre>

























<table><thead><tr><th>å‚æ•°</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>value</td><td>å½“å‰ä¼ é€’çš„å€¼ï¼Œæ¥è‡ªView</td></tr><tr><td>targetType</td><td>ç›®æ ‡å±æ€§ç±»å‹</td></tr><tr><td>parameter</td><td>XAMLä¼ å…¥çš„é™„åŠ å‚æ•°</td></tr><tr><td>culture</td><td>åŒºåŸŸä¿¡æ¯</td></tr></tbody></table>
<p>ä¸€èˆ¬ä¸å…·ä½“å®ç°</p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-function"><span class="hljs-built_in">object</span> <span class="hljs-title">ConvertBack</span>(<span class="hljs-params"><span class="hljs-built_in">object</span> <span class="hljs-keyword">value</span>, Type targetType, <span class="hljs-built_in">object</span> parameter, CultureInfo culture</span>)</span>{
    Binding.DoNothing;
}
</code></pre>
<p>åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µéœ€è¦å…·ä½“å®ç°</p>
<ul>
<li>Mode=TwoWay</li>
</ul>
<pre><code class="hljs language-XAML" lang="XAML">{Binding Path=... Mode=TwoWay}
</code></pre>
<ul>
<li>Viewéœ€è¦å›å†™åˆ°ViewModelä¸­</li>
</ul>
<h3 data-id="heading-10">5.å…·ä½“å®ä¾‹</h3>
<p>éœ€è¦å®ç°å¯¼èˆªæ æŒ‰é’®è¢«æŒ‰ä¸‹åï¼Œæ ·å¼æ”¹å˜ä»¥æé†’ç”¨æˆ·ç•Œé¢åˆ‡æ¢ï¼Œä¸ºäº†å®Œæˆè¯¥éœ€æ±‚ï¼Œå¯ä»¥åœ¨ViewModelä¸­ç»´æŠ¤ä¸€ä¸ªæšä¸¾å±æ€§æ¥è®°å½•å½“å‰çš„è®¿é—®ç•Œé¢</p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment">//æšä¸¾</span>
```
<span class="hljs-keyword">public</span> <span class="hljs-built_in">enum</span> MainWindowMenuItem
{
    Menu1,
    Menu2,
    Menu3,
    Menu4,
    Menu5,
    Menu6,
    Menu7,
    Menu8,
    Menu9
}
```

<span class="hljs-keyword">public</span> <span class="hljs-keyword">partial</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MainWindowViewModel</span> : <span class="hljs-title">ObservableObject</span>
{
    ...Other...
    [<span class="hljs-meta">ObservableProperty</span>] <span class="hljs-keyword">private</span> MainWindowMenuItem _selectedMenuItem = MainWindowMenuItem.Menu1;
    ...Other...
}
</code></pre>
<pre><code class="hljs language-XAML" lang="XAML">&lt;Button
    Style="{Binding SelectedMenuItem,Converter={StaticResource MenuConverter},ConverterParameter={x:Static local:MainWindowMenuItem.Menu1}}"
    Command="{Binding SelectMenuCommand}"
    CommandParameter="{x:Static local:MainWindowMenuItem.Menu1}"&gt;
    &lt;Button.Content&gt;
        ...
    &lt;/Button.Content&gt;
&lt;/Button&gt;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªæŒ‰é’®ç»‘å®šäº†ä¸€ä¸ªä¼ å…¥æšä¸¾çš„å‘½ä»¤ï¼Œå½“ç‚¹å‡»å®ƒçš„æ—¶å€™ï¼Œä»–ä¼šä¿®æ”¹ViewModelä¸­çš„SelectedMenuItemå±æ€§ï¼Œå½“è¯¥å±æ€§è¢«ä¿®æ”¹æ—¶ï¼Œä¼šæŠŠå¯¹åº”çš„æšä¸¾å€¼äº¤ç»™å€¼è½¬æ¢å™¨ï¼Œç„¶åå¯¹æ¯”æŒ‰é’®ä¸Šçš„parameterï¼Œå°†è¢«ç‚¹å‡»çš„æŒ‰é’®çš„æ ·å¼ä¿®æ”¹ä¸ºSelectedButtonStyleã€‚</p>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MenuConverter</span>:<span class="hljs-title">IValueConverter</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">object</span>? Convert(<span class="hljs-built_in">object</span>? <span class="hljs-keyword">value</span>, Type targetType, <span class="hljs-built_in">object</span>? parameter, CultureInfo culture)
    {
        <span class="hljs-keyword">var</span> normal = (Style)Application.Current.Resources[<span class="hljs-string">"NormalButtonStyle"</span>];
        <span class="hljs-keyword">var</span> selected = (Style)Application.Current.Resources[<span class="hljs-string">"SelectedButtonStyle"</span>];

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">value</span> == <span class="hljs-literal">null</span> || parameter == <span class="hljs-literal">null</span>)
            <span class="hljs-keyword">return</span> normal;

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">value</span>.Equals(parameter) ? selected : normal;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">object</span>? ConvertBack(<span class="hljs-built_in">object</span>? <span class="hljs-keyword">value</span>, Type targetType, <span class="hljs-built_in">object</span>? parameter, CultureInfo culture)
    {
        <span class="hljs-keyword">return</span> Binding.DoNothing;
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearch ä¸­çš„ termçš„æŸ¥è¯¢]]></title>    <link>https://juejin.cn/post/7586582977707933738</link>    <guid>https://juejin.cn/post/7586582977707933738</guid>    <pubDate>2025-12-23T02:13:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586582977707933738" data-draft-id="7586585688004345897" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearch ä¸­çš„ termçš„æŸ¥è¯¢"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-23T02:13:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ä¸ªå¤§ä¸“ç”Ÿçš„æ·˜æ±°ä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/1327865775796807"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearch ä¸­çš„ termçš„æŸ¥è¯¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1327865775796807/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ä¸ªå¤§ä¸“ç”Ÿçš„æ·˜æ±°ä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T02:13:02.000Z" title="Tue Dec 23 2025 02:13:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Elasticsearch ä¸­çš„ term æŸ¥è¯¢è¯¦è§£ï¼ˆé™„å¸¸è§è¸©å‘ç‚¹ï¼‰</h2>
<p>åœ¨ä½¿ç”¨ Elasticsearch è¿›è¡Œæœç´¢æ—¶ï¼Œ<code>term</code> æŸ¥è¯¢æ˜¯ä¸€ä¸ª<strong>éå¸¸åŸºç¡€ä½†åˆéå¸¸å®¹æ˜“è¢«è¯¯ç”¨</strong>çš„æŸ¥è¯¢æ–¹å¼ã€‚å¾ˆå¤šäººä¼šç–‘æƒ‘ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆ <code>term</code> æŸ¥ä¸å‡ºæ¥æ•°æ®ï¼Ÿ</li>
<li><code>term</code> å’Œ <code>match</code> åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li>
<li>ä»€ä¹ˆå­—æ®µé€‚åˆç”¨ <code>term</code>ï¼Ÿ</li>
</ul>
<p>æœ¬æ–‡å°†å›´ç»•è¿™äº›é—®é¢˜ï¼Œç³»ç»Ÿè®²æ¸… <strong><code>term</code> æŸ¥è¯¢çš„åŸç†ã€ä½¿ç”¨åœºæ™¯å’Œå¸¸è§å‘ç‚¹</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯ term æŸ¥è¯¢ï¼Ÿ</h3>
<p><code>term</code> æŸ¥è¯¢å±äº <strong>ç²¾ç¡®åŒ¹é…ï¼ˆExact Matchï¼‰æŸ¥è¯¢</strong>ã€‚</p>
<blockquote>
<p>å®ƒä¸ä¼šå¯¹æŸ¥è¯¢æ¡ä»¶åšåˆ†è¯ã€åˆ†æå¤„ç†ï¼Œè€Œæ˜¯ç›´æ¥æ‹¿ä½ ç»™çš„å€¼ï¼Œå»å€’æ’ç´¢å¼•é‡Œåšç²¾ç¡®åŒ¹é…ã€‚</p>
</blockquote>
<p>å®˜æ–¹ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p><strong>term query finds documents that contain the exact term specified in the inverted index</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€term æŸ¥è¯¢çš„åŸºæœ¬ç”¨æ³•</h3>
<h4 data-id="heading-3">1ï¸âƒ£ åŸºæœ¬ç¤ºä¾‹</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"userId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1001</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SUCCESS"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¯¹åº”çš„æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">GET test_index/_search
{
  <span class="hljs-string">"query"</span>: {
    <span class="hljs-string">"term"</span>: {
      <span class="hljs-string">"status"</span>: {
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"SUCCESS"</span>
      }
    }
  }
}
</code></pre>
<p>å¦‚æœ <code>status</code> å­—æ®µåœ¨ç´¢å¼•ä¸­æ˜¯ <strong>æœªåˆ†è¯å­—æ®µï¼ˆkeywordï¼‰</strong> ï¼Œé‚£ä¹ˆè¿™æ¡æŸ¥è¯¢æ˜¯å¯ä»¥æ­£å¸¸å‘½ä¸­çš„ã€‚</p>
<hr/>
<h4 data-id="heading-4">2ï¸âƒ£ ç®€å†™å½¢å¼</h4>
<pre><code class="hljs language-bash" lang="bash">GET test_index/_search
{
  <span class="hljs-string">"query"</span>: {
    <span class="hljs-string">"term"</span>: {
      <span class="hljs-string">"status"</span>: <span class="hljs-string">"SUCCESS"</span>
    }
  }
}
</code></pre>
<p>æ•ˆæœä¸ä¸Šé¢å®Œå…¨ä¸€è‡´ã€‚</p>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€term æŸ¥è¯¢çš„æ ¸å¿ƒç‰¹æ€§</h3>
<h4 data-id="heading-6">âœ… 1. ä¸ä¼šåˆ†è¯</h4>
<p>è¿™æ˜¯ <strong>æœ€é‡è¦çš„ä¸€ç‚¹</strong>ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"term"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>Elasticsearch <strong>ä¸ä¼š</strong>æŠŠâ€œå¼ ä¸‰â€æ‹†æˆâ€œå¼ â€â€œä¸‰â€</li>
<li>åªä¼šåŒ¹é…ç´¢å¼•ä¸­ <strong>å®Œå…¨ç­‰äºâ€œå¼ ä¸‰â€</strong> çš„ term</li>
</ul>
<hr/>
<h4 data-id="heading-7">âœ… 2. åŒºåˆ†å¤§å°å†™ï¼ˆå–å†³äºå­—æ®µï¼‰</h4>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span>
</code></pre>
<p>å¦‚æœä½ ç”¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"term"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SUCCESS"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>â¡ <strong>å¯èƒ½æŸ¥ä¸åˆ°ç»“æœ</strong></p>
<p>æ˜¯å¦åŒºåˆ†å¤§å°å†™ï¼Œ<strong>å–å†³äºå­—æ®µæ˜¯å¦ç»è¿‡ analyzer å¤„ç†</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-8">å››ã€term æŸ¥è¯¢æœ€å®¹æ˜“è¸©çš„å‘ âš ï¸</h3>
<h4 data-id="heading-9">âŒ 1. å¯¹ text å­—æ®µä½¿ç”¨ term æŸ¥è¯¢</h4>
<p>è¿™æ˜¯æ–°æ‰‹æœ€å¸¸çŠ¯çš„é”™è¯¯ã€‚</p>
<h5 data-id="heading-10">ç¤ºä¾‹å­—æ®µæ˜ å°„ï¼š</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç´¢å¼•å†…å®¹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Elasticsearch is powerful"</span>
</code></pre>
<p>ä½ ç”¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"term"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Elasticsearch"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>â¡ <strong>å¤§æ¦‚ç‡æŸ¥ä¸åˆ°æ•°æ®</strong></p>
<h5 data-id="heading-11">åŸå› æ˜¯ï¼š</h5>
<ul>
<li><code>text</code> ç±»å‹å­—æ®µåœ¨å†™å…¥æ—¶å·²ç»è¢« <strong>åˆ†è¯</strong></li>
<li>å€’æ’ç´¢å¼•ä¸­å­˜çš„æ˜¯ <code>elasticsearch</code>ã€<code>is</code>ã€<code>powerful</code></li>
<li>è€Œä½ ç”¨ <code>term</code> æŸ¥çš„æ˜¯<strong>åŸå§‹å­—ç¬¦ä¸²</strong></li>
</ul>
<hr/>
<h4 data-id="heading-12">âœ… æ­£ç¡®åšæ³• 1ï¼šä½¿ç”¨ <code>.keyword</code> å­—æ®µ</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"term"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"message.keyword"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Elasticsearch is powerful"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h4 data-id="heading-13">âœ… æ­£ç¡®åšæ³• 2ï¼šæ”¹ç”¨ match æŸ¥è¯¢</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"match"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Elasticsearch"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h4 data-id="heading-14">âŒ 2. term æŸ¥è¯¢ä¸é€‚åˆâ€œæ¨¡ç³Šæœç´¢â€</h4>
<p>ä¾‹å¦‚ä½ æƒ³æŸ¥ï¼š</p>
<ul>
<li>åŒ…å«æŸä¸ªè¯</li>
<li>ç±»ä¼¼ SQL çš„ <code>like</code></li>
</ul>
<p>âŒ <strong>term åšä¸äº†</strong></p>
<p>åº”è¯¥ç”¨ï¼š</p>
<ul>
<li><code>match</code></li>
<li><code>match_phrase</code></li>
<li><code>wildcard</code></li>
<li><code>regexp</code></li>
</ul>
<hr/>
<h3 data-id="heading-15">äº”ã€ä»€ä¹ˆåœºæ™¯é€‚åˆç”¨ term æŸ¥è¯¢ï¼Ÿ</h3>
<h4 data-id="heading-16">âœ… éå¸¸é€‚åˆçš„åœºæ™¯</h4>

































<table><thead><tr><th>åœºæ™¯</th><th>æ˜¯å¦é€‚åˆ</th></tr></thead><tbody><tr><td>çŠ¶æ€ç ï¼ˆstatusï¼‰</td><td>âœ…</td></tr><tr><td>æšä¸¾å€¼</td><td>âœ…</td></tr><tr><td>ç”¨æˆ·ID</td><td>âœ…</td></tr><tr><td>è®¢å•å·</td><td>âœ…</td></tr><tr><td>æ˜¯å¦åˆ é™¤ï¼ˆis_deletedï¼‰</td><td>âœ…</td></tr><tr><td>ç²¾ç¡®æ ‡ç­¾</td><td>âœ…</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">"term":</span> {
  <span class="hljs-attr">"userId":</span> <span class="hljs-number">1001</span>
}
</code></pre>
<hr/>
<h4 data-id="heading-17">âŒ ä¸é€‚åˆçš„åœºæ™¯</h4>





















<table><thead><tr><th>åœºæ™¯</th><th>åŸå› </th></tr></thead><tbody><tr><td>æ–‡ç« æ ‡é¢˜</td><td>éœ€è¦åˆ†è¯</td></tr><tr><td>æè¿°ä¿¡æ¯</td><td>éœ€è¦å…¨æ–‡æœç´¢</td></tr><tr><td>æ¨¡ç³ŠåŒ¹é…</td><td>term ä¸æ”¯æŒ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-18">å…­ã€term vs matchï¼Œå¯¹æ¯”æ€»ç»“</h3>






























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>term</th><th>match</th></tr></thead><tbody><tr><td>æ˜¯å¦åˆ†è¯</td><td>âŒ ä¸åˆ†è¯</td><td>âœ… åˆ†è¯</td></tr><tr><td>æ˜¯å¦ç²¾ç¡®åŒ¹é…</td><td>âœ…</td><td>âŒ</td></tr><tr><td>é€‚åˆå­—æ®µç±»å‹</td><td>keyword / æ•°å€¼</td><td>text</td></tr><tr><td>ä½¿ç”¨éš¾åº¦</td><td>æ˜“è¸©å‘</td><td>æ›´å‹å¥½</td></tr></tbody></table>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p><strong>term ç”¨äºâ€œç¡®å®šä½ çŸ¥é“ç´¢å¼•é‡Œé•¿ä»€ä¹ˆæ ·â€çš„åœºæ™¯ï¼Œmatch ç”¨äºâ€œæˆ‘æƒ³æœè¿™æ®µè¯â€çš„åœºæ™¯ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-19">ä¸ƒã€ç”Ÿäº§ç¯å¢ƒä¸­çš„æœ€ä½³å®è·µ â­</h3>
<p>1ï¸âƒ£ <strong>æ˜ç¡®å­—æ®µç±»å‹</strong></p>
<ul>
<li>ç²¾ç¡®æŸ¥è¯¢ â†’ <code>keyword</code></li>
<li>æœç´¢æ–‡æœ¬ â†’ <code>text</code></li>
</ul>
<p>2ï¸âƒ£ <strong>term æŸ¥è¯¢åªç”¨åœ¨ç¡®å®šå€¼ä¸Š</strong></p>
<ul>
<li>çŠ¶æ€ã€IDã€æšä¸¾</li>
</ul>
<p>3ï¸âƒ£ <strong>æŸ¥ä¸åˆ°ç»“æœæ—¶ï¼Œå…ˆçœ‹ mapping</strong></p>
<pre><code class="hljs language-bash" lang="bash">GET index_name/_mapping
</code></pre>
<hr/>
<h3 data-id="heading-20">å…«ã€ç»“è¯­</h3>
<p><code>term</code> æŸ¥è¯¢æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œä½†<strong>å¤æ‚çš„æ˜¯å®ƒå¯¹å­—æ®µç±»å‹å’Œç´¢å¼•ç»“æ„çš„è¦æ±‚</strong>ã€‚</p>
<p>å¾ˆå¤šâ€œES æŸ¥ä¸å‡ºæ•°æ®â€çš„é—®é¢˜ï¼Œæ ¹æœ¬åŸå› åªæœ‰ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>ä½ ä»¥ä¸ºä½ åœ¨æŸ¥å€¼ï¼Œå…¶å®ä½ åœ¨æŸ¥åˆ†è¯åçš„ termã€‚</strong></p>
</blockquote>
<p>å¦‚æœä½ èƒ½çœŸæ­£ç†è§£è¿™ä¸€ç‚¹ï¼Œ<code>term</code> æŸ¥è¯¢å°±å†ä¹Ÿä¸ä¼šè¸©å‘äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactå“²å­¦ï¼šä¿æŒç»„ä»¶çº¯ç²¹ å“ˆæ°”å°±è¦å“ˆå¾—çº¯ç²¹]]></title>    <link>https://juejin.cn/post/7586518130761416744</link>    <guid>https://juejin.cn/post/7586518130761416744</guid>    <pubDate>2025-12-22T16:29:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586518130761416744" data-draft-id="7585850609015963663" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactå“²å­¦ï¼šä¿æŒç»„ä»¶çº¯ç²¹  å“ˆæ°”å°±è¦å“ˆå¾—çº¯ç²¹"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-22T16:29:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹¥å€¾"/> <meta itemprop="url" content="https://juejin.cn/user/3270387091383163"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactå“²å­¦ï¼šä¿æŒç»„ä»¶çº¯ç²¹  å“ˆæ°”å°±è¦å“ˆå¾—çº¯ç²¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3270387091383163/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹¥å€¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-22T16:29:59.000Z" title="Mon Dec 22 2025 16:29:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="" data-highlight-key="ascetic">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.hljs-addition,.hljs-attribute,.hljs-bullet,.hljs-link,.hljs-section,.hljs-string,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#888}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#ccc}.hljs-keyword,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-strong,.hljs-type{font-weight:700}.hljs-emphasis{font-style:italic}</style><h2 data-id="heading-0">çº¯ç²¹å‡½æ•°çš„è®¾è®¡ç†å¿µ</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯çº¯ç²¹å‡½æ•°</h3>
<blockquote>
<p>çº¯ç²¹å‡½æ•°çš„ä¸¤å¤§æ ¸å¿ƒæ¡ä»¶</p>
</blockquote>
<p>æ¡ä»¶1ï¼š å‡½æ•°ä¸ä¿®æ”¹è¢«è°ƒç”¨å‰å°±å­˜åœ¨çš„å˜é‡ä¸å¯¹è±¡ï¼Œåªåšçº¯ç²¹çš„è¿ç®—ã€‚</p>
<p>æ¡ä»¶2ï¼š ä¿è¯å‡½æ•°ç›¸åŒçš„è¾“å…¥ï¼Œå°±ä¼šæœ‰ç›¸åŒè¾“å‡ºã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå¤–éƒ¨å˜é‡</span>
<span class="hljs-keyword">let</span>  num=<span class="hljs-number">0</span>;

<span class="hljs-comment">//çº¯ç²¹å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x</span>)
{<span class="hljs-comment">//æ»¡è¶³ä¸¤å¤§æ ¸å¿ƒæ¡ä»¶</span>
 <span class="hljs-comment">//æ¡ä»¶1ï¼šä¸ä¿®æ”¹å‡½æ•°å¤–çš„ä»»ä½•å˜é‡</span>
 <span class="hljs-comment">//æ¡ä»¶2ï¼š è¾“å…¥ x å›ºå®šï¼Œåˆ™è¾“å‡ºå¿…ç„¶æ˜¯ x+1 </span>
    <span class="hljs-keyword">return</span> x+<span class="hljs-number">1</span>;
}

<span class="hljs-comment">//è°ƒç”¨çº¯ç²¹å‡½æ•°ï¼Œä¼ å…¥å¤–éƒ¨çš„num</span>
<span class="hljs-keyword">let</span> a=<span class="hljs-title function_">add</span>(num);
<span class="hljs-keyword">let</span> b=<span class="hljs-title function_">add</span>(num)

<span class="hljs-comment">// numå¹¶æœªè¢«ä¿®æ”¹ï¼Œä¸¤æ¬¡è¾“å…¥ç›¸åŒï¼Œå¾—åˆ°çš„ç»“æœä¹Ÿç›¸åŒ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num,a) <span class="hljs-comment">// è¾“å‡º0 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num,b) <span class="hljs-comment">// è¾“å‡º0 1</span>
</code></pre>
<h2 data-id="heading-2">çº¯ç²¹ç»„ä»¶ï¼šReactå“²å­¦</h2>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯çº¯ç²¹çš„ç»„ä»¶</h3>
<blockquote>
<p>çº¯ç²¹ç»„ä»¶çš„ä¸¤å¤§æ ¸å¿ƒæ¡ä»¶</p>
</blockquote>
<p>reactæ¨¡ä»¿çº¯ç²¹å‡½æ•°çš„è®¾è®¡ç†å¿µï¼Œæå‡ºçº¯ç²¹ç»„ä»¶çš„è®¾è®¡ç†å¿µåŒæ ·éœ€è¦æ»¡è¶³ä¸¤ä¸ªæ ¸å¿ƒæ¡ä»¶ï¼š</p>
<p>æ¡ä»¶1ï¼šä¸ä¿®æ”¹ç»„ä»¶æ¸²æŸ“å‰å­˜åœ¨çš„å¯¹è±¡ä¸å˜é‡ã€‚</p>
<p>æ¡ä»¶2ï¼šç›¸åŒçš„è¾“å‡ºï¼Œè¿”å›ç›¸åŒçš„jsx</p>
<blockquote>
<p>åä¾‹ï¼šä»€ä¹ˆæ ·çš„ç»„ä»¶ä¸çº¯ç²¹</p>
</blockquote>
<p>æ¡ä»¶1ï¼šç»„ä»¶å†…éƒ¨å¯¹å¤–éƒ¨ä¾èµ–å€¼è¿›è¡Œæ›´æ”¹</p>
<p>æ¡ä»¶2ï¼šå¤šæ¬¡æ¸²æŸ“ç»„ä»¶æ—¶è¾“å…¥ç›¸åŒï¼Œä½†æ˜¯è¿”å›åˆ°jsxå´ä¸åŒ</p>
<p>å¦‚æœæ»¡è¶³ä¸Šè¯‰ä¸¤ä¸ªä»»æ„ä¸€ä¸ªæ¡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶å°†ä¸çº¯ç²¹</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå¤–éƒ¨å˜é‡</span>
<span class="hljs-keyword">let</span> num=<span class="hljs-number">0</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>){
<span class="hljs-comment">// ç»„ä»¶ä¿®æ”¹å¤–éƒ¨ä¾èµ–å€¼</span>
<span class="hljs-comment">// å¯¼è‡´ç›¸åŒçš„è¾“å…¥ä¸‹ï¼Œæ¯æ¬¡è¿”å›çš„</span>
  num++;
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{num}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Child</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc27263d0e144a07809a07bef692c4d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iul5YC-:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767025967&amp;x-signature=%2Fe02kHgsWmvUAgjLRKA4ISQcoHA%3D" alt="8aabb038e73721ff973ca11dd32f127e.png" loading="lazy"/></p>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆéœ€è¦ä¿æŒç»„ä»¶çº¯ç²¹</h3>
<ol>
<li>ä¿è¯ç»„ä»¶æ¸²æŸ“çš„ç‹¬ç«‹æ€§</li>
</ol>
<blockquote>
<p>æ‰€è°“ç‹¬ç«‹æ€§ï¼š</p>
</blockquote>
<p>å¦‚æœç»„ä»¶æ¸²æŸ“æ—¶ä¿®æ”¹äº†å¤–éƒ¨é¢„å…ˆå­˜åœ¨çš„å˜é‡ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>
<p>åç»­ä¾èµ–è¿™äº›å˜é‡ä¸å¯¹è±¡çš„ç»„ä»¶æ¸²æŸ“äº§ç”Ÿä¸ç¡®å®šæ€§ï¼Œè¿™å°±å¯¼è‡´ä¾èµ–åŒä¸€å˜é‡çš„ç»„ä»¶éœ€è¦ä¿è¯æ¸²æŸ“çš„é¡ºåºã€‚</p>
</li>
<li>
<p>ä½†æ˜¯ç»„ä»¶åœ¨æµè§ˆå™¨ä¸­çš„æ¸²æŸ“æ—¶æœºæ˜¯ä¸ç¡®å®šçš„ã€‚å¦‚æœç»„ä»¶æ¸²æŸ“ç»“æœï¼Œä¾èµ–ç»„ä»¶é—´æ¸²æŸ“çš„é¡ºåºã€‚å°±ä¼šå¯¼è‡´æ—¢å®šé€»è¾‘å¤±æ•ˆï¼Œä»è€Œäº§ç”Ÿé”™è¯¯ã€‚</p>
</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬è¦æ’é™¤è¿™ç§ä¸ç¡®å®šæ€§ï¼Œä½¿å¾—reactç»„ä»¶ä½¿ç”¨æ›´åŠ å®‰å…¨ï¼Œè®©ç»„ä»¶æ¸²æŸ“ä¹‹é—´çš„æ¸²æŸ“é€»è¾‘æ›´åŠ ç‹¬ç«‹</p>
<ol start="2">
<li>ä¿è¯ç»„ä»¶æ¸²æŸ“çš„ç¡®å®šæ€§</li>
</ol>
<blockquote>
<p>æ‰€è°“ç¡®å®šæ€§</p>
</blockquote>
<p>ç¡®å®šæ€§å»ºç«‹åœ¨ç‹¬ç«‹æ€§ä¹‹ä¸Š</p>
<ul>
<li>å½“ç»„ä»¶æ¸²æŸ“æ—¶ç‹¬ç«‹åœ°ä¸å½±å“å¤–éƒ¨ç»„ä»¶çš„æ¸²æŸ“é€»è¾‘ï¼Œç”±æ­¤ä¿è¯ç»„ä»¶å¤–éƒ¨ç»„ä»¶æ¸²æŸ“çš„ç¡®å®šæ€§ï¼Œèƒ½å¤Ÿé¢„å…ˆé¿å…è®¸å¤šé”™è¯¯</li>
</ul>
<ol start="3">
<li>æ²¡æœ‰ä¿æŒçº¯ç²¹æ€§çš„åé¢æ¡ˆä¾‹</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å…¨å±€å˜é‡ï¼ˆå¤–éƒ¨çŠ¶æ€ï¼‰</span>
<span class="hljs-keyword">let</span> globalCount = <span class="hljs-number">0</span>;

<span class="hljs-comment">// ç»„ä»¶Aï¼šæ¸²æŸ“æ—¶ä¿®æ”¹å¤–éƒ¨å˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ComponentA</span>(<span class="hljs-params"/>) {
  globalCount += <span class="hljs-number">1</span>; <span class="hljs-comment">// ä¿®æ”¹å¤–éƒ¨å˜é‡</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç»„ä»¶Aï¼š{globalCount}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç»„ä»¶Bï¼šä¾èµ–åŒä¸€ä¸ªå¤–éƒ¨å˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ComponentB</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç»„ä»¶Bï¼š{globalCount * 2}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ï¼šåŒæ—¶æ¸²æŸ“Aå’ŒB</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ComponentA</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ComponentB</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<ul>
<li>ç†æƒ³é¡ºåºï¼ˆAå…ˆæ¸²æŸ“ï¼ŒBåæ¸²æŸ“ï¼‰ï¼šglobalCount å…ˆå˜æˆ 1ï¼ŒBæ¸²æŸ“2 â†’ ç»“æœ:A=1,B=2ï¼›</li>
<li>å®é™…å¯èƒ½çš„é¡ºåºï¼ˆReactè°ƒåº¦å¯¼è‡´Bå…ˆæ¸²æŸ“ï¼‰ï¼šBå…ˆè¯»å– globalCount=0æ¸²æŸ“0ï¼Œå†AæŠŠ globalCount æ”¹æˆ 1â†’ç»“æœï¼šA=1ï¼ŒB=0ï¼›</li>
</ul>
<h2 data-id="heading-5">ä¿æŒçº¯ç²¹  !=   ä¸å¯ä¿®æ”¹</h2>
<h3 data-id="heading-6">å±€éƒ¨çªå˜</h3>
<ol>
<li>ä»€ä¹ˆæ˜¯å±€éƒ¨çªå˜</li>
</ol>
<blockquote>
<p>åœ¨reactå®˜æ–¹æ–‡æ¡£ä¸­çš„å®šä¹‰å…¶å®æ˜¯â€œå±€éƒ¨mutationâ€ï¼Œå³åœ¨æ¸²æŸ“æ—¶ä¿®æ”¹ç»„ä»¶å†…éƒ¨â€œåˆšåˆšåˆ›å»ºå¯¹è±¡æˆ–è€…å˜é‡â€ã€‚</p>
</blockquote>
<ul>
<li>è¿™æ ·çš„å±€éƒ¨çªå˜ä¸ä¼šå½±å“å¤–éƒ¨ç»„ä»¶çš„æ¸²æŸ“é€»è¾‘ï¼Œåªå½±å“ç»„ä»¶å†…éƒ¨çš„é€»è¾‘ã€‚</li>
</ul>
<ol start="2">
<li>åˆ©ç”¨å±€éƒ¨çªå˜ä¿æŒç»„ä»¶çš„çº¯ç²¹æ€§</li>
</ol>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// å…¨å±€å˜é‡ï¼ˆå¤–éƒ¨çŠ¶æ€ï¼‰</span>
<span class="hljs-keyword">let</span> globalCount = <span class="hljs-number">0</span>;

<span class="hljs-comment">// ç»„ä»¶Aï¼šæ¸²æŸ“æ—¶ä¸ä¿®æ”¹å¤–éƒ¨å˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ComponentA</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> <span class="hljs-title class_">Count</span>=globalCount+<span class="hljs-number">1</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç»„ä»¶Aï¼š{Count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// ç»„ä»¶Bï¼šä¾èµ–åŒä¸€ä¸ªå¤–éƒ¨å˜é‡ï¼Œä½†æ˜¯ä¸ç›´æ¥ä¿®æ”¹å¤–éƒ¨å˜é‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ComponentB</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> <span class="hljs-title class_">Count</span>=(globalCount+<span class="hljs-number">1</span>)*<span class="hljs-number">2</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç»„ä»¶Bï¼š{Count * 2}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ï¼šåŒæ—¶æ¸²æŸ“Aå’ŒB</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ComponentA</span> /&gt;</span> 
      <span class="hljs-tag">&lt;<span class="hljs-name">ComponentB</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<ul>
<li>æ— è®ºAï¼ŒBè°å…ˆæ¸²æŸ“ï¼Œéƒ½æ”¹å˜ä¸äº†æ¸²æŸ“ç»“æœï¼šA=1ï¼ŒB=2</li>
<li>æœ€ç»ˆä½¿ç»„ä»¶é‡æ–°ä¿æŒâ€œçº¯ç²¹â€</li>
</ul>
<h3 data-id="heading-7">ç”¨â€œæ›´æ–°â€ æ›¿æ¢ â€œä¿®æ”¹â€</h3>
<blockquote>
<p>ä½¿ç”¨â€œçŠ¶æ€â€ç®¡ç†å˜é‡</p>
</blockquote>
<ul>
<li>ä¸ºäº†ä¿è¯ç»„ä»¶çš„çº¯ç²¹æ€§ï¼Œå¹¶ä¸æ„å‘³ç€ç»„ä»¶æ¸²æŸ“ä¾èµ–çš„å¤–éƒ¨å˜é‡å®Œå…¨å°±ä¸èƒ½æ”¹å˜äº†ã€‚å¯ä»¥é€šè¿‡â€œçŠ¶æ€â€æ¥ç®¡ç†å¤–éƒ¨å˜é‡ã€‚</li>
</ul>
<blockquote>
<p>â€œçŠ¶æ€â€ç®¡ç†å˜é‡çš„å¥½å¤„</p>
</blockquote>
<ul>
<li>å½“å˜é‡éœ€è¦è¢«ä¿®æ”¹æ—¶ï¼Œä¸å†ç›´æ¥å¯¹å…¶è¿›è¡Œå˜æ›´ã€‚è€Œæ˜¯ç­‰å¾…ç»„ä»¶æ¸²æŸ“å®Œæˆåï¼Œæ›´æ–°å¹¶å°†ä¿®æ”¹å€¼ä¼ å…¥ç»„ä»¶ä¸­ã€‚ç”±æ­¤ä¿æŒç»„ä»¶æ¸²æŸ“æ—¶çš„ç‹¬ç«‹æ€§ä¸ç¡®å®šæ€§</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// æ˜¾ç¤ºè´­ç‰©è½¦æ•°é‡çš„ç»„ä»¶ï¼ˆçº¯ç²¹ç»„ä»¶ï¼šåªä¾èµ– propsï¼Œæ— ä»»ä½•å‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">PureCartCount</span>(<span class="hljs-params">{ count }</span>) {
  <span class="hljs-comment">// åªè¯»å– propsï¼Œä¸ä¿®æ”¹ä»»ä½•å¤–éƒ¨æ•°æ®ï¼Œç›¸åŒ props å¿…ç„¶æ¸²æŸ“ç›¸åŒç»“æœ</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è´­ç‰©è½¦æ•°é‡ï¼š{count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}

<span class="hljs-comment">// æ§åˆ¶æ•°é‡å¢å‡çš„ç»„ä»¶ï¼ˆä¸ç›´æ¥ä¿®æ”¹æ•°æ®ï¼Œåªå‘èµ·æ›´æ–°è¯·æ±‚ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">PureCountControls</span>(<span class="hljs-params">{ onAdd, onSubtract }</span>) {
  <span class="hljs-comment">// ä¸è§¦ç¢°ä»»ä½•å˜é‡ï¼Œåªé€šè¿‡çˆ¶ç»„ä»¶ä¼ å…¥çš„å‡½æ•°å‘èµ·â€œæ›´æ–°è¯·æ±‚â€</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onSubtract}</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onAdd}</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶ï¼šç”¨çŠ¶æ€ç®¡ç†å˜é‡ï¼Œç»Ÿä¸€æ§åˆ¶æ›´æ–°é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç”¨ useState ç®¡ç†è´­ç‰©è½¦æ•°é‡ï¼ˆçŠ¶æ€ç”± React ç®¡æ§ï¼Œåˆå§‹å€¼ 1ï¼‰</span>
  <span class="hljs-keyword">const</span> [cartCount, setCartCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);

  <span class="hljs-comment">// æ•°é‡â€œæ›´æ–°â€é€»è¾‘ï¼šç”Ÿæˆæ–°å€¼ï¼Œä¸ä¿®æ”¹åŸçŠ¶æ€</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleAdd</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// å…³é”®ï¼šä¸ç›´æ¥æ”¹ cartCountï¼ˆå¦‚ cartCount +=1ï¼‰ï¼Œè€Œæ˜¯é€šè¿‡ setCartCount ç”Ÿæˆæ–°å€¼</span>
    <span class="hljs-title function_">setCartCount</span>(<span class="hljs-function"><span class="hljs-params">prevCount</span> =&gt;</span> prevCount + <span class="hljs-number">1</span>);
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubtract</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ç”Ÿæˆæ–°å€¼ï¼ˆåŸ cartCount ä¿æŒä¸å˜ï¼Œç›´åˆ° React è§¦å‘é‡æ–°æ¸²æŸ“ï¼‰</span>
    <span class="hljs-title function_">setCartCount</span>(<span class="hljs-function"><span class="hljs-params">prevCount</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">1</span>, prevCount - <span class="hljs-number">1</span>)); <span class="hljs-comment">// é¿å…æ•°é‡å°äº 1</span>
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æ–°çŠ¶æ€é€šè¿‡ props ä¼ å…¥çº¯ç²¹ç»„ä»¶ï¼Œç»„ä»¶åªâ€œè¯»â€ä¸â€œå†™â€ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">PureCartCount</span> <span class="hljs-attr">count</span>=<span class="hljs-string">{cartCount}</span> /&gt;</span>
      {/* ä¼ é€’æ›´æ–°å‡½æ•°ï¼Œè®©å­ç»„ä»¶å‘èµ·æ›´æ–°è¯·æ±‚ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">PureCountControls</span> <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{handleAdd}</span> <span class="hljs-attr">onSubtract</span>=<span class="hljs-string">{handleSubtract}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>; 
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»å…¥é—¨åˆ°å®è·µï¼šç©è½¬åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåˆ©å™¨SkyWalking]]></title>    <link>https://juejin.cn/post/7586569284551393320</link>    <guid>https://juejin.cn/post/7586569284551393320</guid>    <pubDate>2025-12-23T02:26:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586569284551393320" data-draft-id="7586569284551327784" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»å…¥é—¨åˆ°å®è·µï¼šç©è½¬åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåˆ©å™¨SkyWalking"/> <meta itemprop="keywords" content="åç«¯,Java,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-23T02:26:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Shepherd"/> <meta itemprop="url" content="https://juejin.cn/user/3415500769991869"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»å…¥é—¨åˆ°å®è·µï¼šç©è½¬åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªåˆ©å™¨SkyWalking
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3415500769991869/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Shepherd
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T02:26:44.000Z" title="Tue Dec 23 2025 02:26:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.æ¦‚è¿°</h2>
<p>åœ¨å½“ä»Šå¾®æœåŠ¡æ¶æ„ç››è¡Œçš„æ—¶ä»£ï¼Œä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„å‰ç«¯è¯·æ±‚ï¼ŒèƒŒåå¾€å¾€æ¶‰åŠæ•°åä¸ªç”šè‡³ä¸Šç™¾ä¸ªæœåŠ¡çš„ååŒè°ƒç”¨ã€‚å½“ç³»ç»Ÿå‡ºç°æ€§èƒ½é—®é¢˜æˆ–å¼‚å¸¸æ—¶ï¼Œä»…é ä¼ ç»Ÿæ—¥å¿—ç›‘æ§å¾€å¾€å¦‚åŒâ€œå¤§æµ·æé’ˆâ€ï¼Œéš¾ä»¥è¿…é€Ÿå®šä½é—®é¢˜æ ¹æºã€‚</p>
<p>æ­£æ˜¯åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œ<strong>SkyWalking</strong> â€”â€” ä¸€æ¬¾ä¼˜ç§€çš„å›½äº§å¼€æºåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªä¸æ€§èƒ½ç›‘æ§ç³»ç»Ÿåº”è¿è€Œç”Ÿã€‚è¯¥é¡¹ç›®æœ€åˆç”±å´æ™Ÿï¼ˆåä¸ºå¼€å‘è€…ï¼‰ä¸ªäººå¼€æºï¼Œäº2017å¹´è¿›å…¥Apacheå­µåŒ–å™¨ï¼Œå¹¶æœ€ç»ˆæˆä¸ºApacheé¡¶çº§é¡¹ç›®ã€‚æˆªè‡³ç›®å‰ï¼ŒSkyWalkingåœ¨GitHubä¸Šå·²æ”¶è·è¶…è¿‡25kçš„Starï¼Œè¶³ä»¥è¯æ˜å…¶å¼ºå¤§çš„å½±å“åŠ›å’Œå¹¿æ³›çš„åº”ç”¨å‰æ™¯</p>
<h3 data-id="heading-1">1.1 SkyWalking æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>SkyWalking æ˜¯ä¸€ä¸ªå¼€æºçš„å¯è§‚æµ‹æ€§å¹³å°ï¼Œç”¨äºä»æœåŠ¡ã€äº‘åŸç”ŸåŸºç¡€è®¾æ–½ä¸­æ”¶é›†ã€åˆ†æã€èšåˆå’Œå¯è§†åŒ–æ•°æ®ã€‚å®ƒæä¾›äº†æ¸…æ™°çš„åˆ†å¸ƒå¼ç³»ç»Ÿè§‚æµ‹èƒ½åŠ›ï¼Œå¹¶æ”¯æŒè·¨äº‘ã€è·¨é›†ç¾¤çš„ç»Ÿä¸€ç›‘æ§ã€‚ä½œä¸ºç°ä»£åŒ–çš„åº”ç”¨æ€§èƒ½ç›‘æ§ï¼ˆAPMï¼‰ç³»ç»Ÿï¼ŒSkyWalking å°¤å…¶é€‚åˆäº‘åŸç”Ÿå’ŒåŸºäºå®¹å™¨çš„å¾®æœåŠ¡æ¶æ„ã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒä¼˜åŠ¿ï¼š</h4>
<ul>
<li><strong>æ— ä¾µå…¥æ¢é’ˆ</strong>ï¼šé€šè¿‡Java Agentå­—èŠ‚ç å¢å¼ºå®ç°ç›‘æ§ï¼Œæ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç </li>
<li><strong>é«˜æ€§èƒ½é€šä¿¡</strong>ï¼šé‡‡ç”¨gRPCè¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œæ•ˆç‡é«˜ã€å»¶è¿Ÿä½</li>
<li><strong>åŠŸèƒ½å…¨é¢</strong>ï¼šæ”¯æŒé“¾è·¯è¿½è¸ªã€JVMç›‘æ§ã€æœåŠ¡ä¾èµ–åˆ†æã€å‘Šè­¦ç­‰</li>
<li><strong>ç”Ÿæ€å‹å¥½</strong>ï¼šå®Œç¾æ”¯æŒSpring Cloudã€Spring Bootç­‰ä¸»æµå¾®æœåŠ¡æ¡†æ¶</li>
</ul>
<h4 data-id="heading-3">å…¸å‹åº”ç”¨åœºæ™¯ï¼š</h4>
<ol start="0">
<li><strong>æ€§èƒ½ç“¶é¢ˆè¯Šæ–­</strong>ï¼šå¿«é€Ÿå®šä½æ…¢æŸ¥è¯¢ã€é«˜å»¶è¿Ÿæ¥å£</li>
<li><strong>å…¨é“¾è·¯è¿½è¸ª</strong>ï¼šå¯è§†åŒ–å±•ç¤ºè¯·æ±‚åœ¨å¾®æœåŠ¡é—´çš„å®Œæ•´è°ƒç”¨è·¯å¾„</li>
<li><strong>æœåŠ¡ä¾èµ–åˆ†æ</strong>ï¼šè‡ªåŠ¨ç»˜åˆ¶æœåŠ¡æ‹“æ‰‘ï¼Œè¯†åˆ«å…³é”®ä¾èµ–ä¸ç“¶é¢ˆç‚¹</li>
<li><strong>å¼‚å¸¸æ ¹å› å®šä½</strong>ï¼šç»“åˆé“¾è·¯ã€æŒ‡æ ‡ä¸æ—¥å¿—ï¼Œè¿…é€Ÿå®šä½æ•…éšœæºå¤´</li>
<li><strong>å®¹é‡è§„åˆ’å‚è€ƒ</strong>ï¼šåŸºäºå†å²æ€§èƒ½æ•°æ®è¿›è¡Œèµ„æºé¢„æµ‹ä¸æ‰©å®¹å†³ç­–</li>
</ol>
<h3 data-id="heading-4">1.2 ä¸»æµé“¾è·¯è¿½è¸ªæ¡†æ¶å¯¹æ¯”</h3>
<p>éšç€å¾®æœåŠ¡æ¶æ„çš„æ™®åŠï¼Œåˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªæŠ€æœ¯ä¹Ÿæ—¥è¶‹æˆç†Ÿï¼Œç›®å‰ä¸»æµçš„å¼€æºæ–¹æ¡ˆåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>Spring Cloud Sleuth + Zipkin</strong>ï¼šéœ€ä»£ç åŸ‹ç‚¹ï¼Œä¾µå…¥æ€§å¼º</li>
<li><strong>å¤§ä¼—ç‚¹è¯„ Cat</strong>ï¼šåŒæ ·éœ€è¦ä¾µå…¥å¼åŸ‹ç‚¹ï¼Œæ¥å…¥æˆæœ¬è¾ƒé«˜</li>
<li><strong>Pinpoint</strong>ï¼šéŸ©å›½å›¢é˜Ÿå¼€å‘ï¼ŒåŒæ ·åŸºäºå­—èŠ‚ç å¢å¼ºï¼Œæ— ä¾µå…¥</li>
<li><strong>SkyWalking</strong>ï¼šå›½äº§å¼€æºï¼Œæ— ä¾µå…¥ã€æ€§èƒ½å¥½ã€ç¤¾åŒºæ´»è·ƒ</li>
</ul>
<p>SkyWalking ä¸ Pinpoint å‡é€šè¿‡å­—èŠ‚ç æ³¨å…¥å®ç°ç›‘æ§ï¼Œå¯¹ä¸šåŠ¡ä»£ç é›¶ä¾µå…¥ï¼Œæ˜¯ç›®å‰ä¼ä¸šçº§APMç³»ç»Ÿçš„ä¼˜é€‰æ–¹æ¡ˆã€‚å¯¹äºå›½å†…å¼€å‘è€…è€Œè¨€ï¼ŒSkyWalking å…·æœ‰ä¸­æ–‡æ–‡æ¡£ä¸°å¯Œã€ç¤¾åŒºå“åº”å¿«ã€ä¸å›½å†…æŠ€æœ¯æ ˆæ•´åˆåº¦é«˜ç­‰ä¼˜åŠ¿ï¼Œæ›´å€¼å¾—æ¨èã€‚</p>
<h2 data-id="heading-5">2.SkyWalking æ¶æ„ä¸åŸç†</h2>
<p>SkyWalking æ ¸å¿ƒæ¶æ„ç»„ä»¶é€»è¾‘ä¸Šåˆ†ä¸ºå››éƒ¨åˆ†: æ¢é’ˆ(Agent)ã€ å¹³å°åç«¯(OAP)ï¼Œå­˜å‚¨(Storage)å’Œç”¨æˆ·ç•Œé¢(UI)</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ca0b92da986436cab298ce75bf47c87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=TrOLedJhFLGcXZ48aQFxWyWsQzM%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>æ¢é’ˆ(Agent):</strong> æ”¶é›†ç›‘æ§æ•°æ®, å°†æ•°æ®æ ¼å¼åŒ–ä¸º SkyWalking é€‚ç”¨çš„æ ¼å¼ï¼Œç„¶åä¼ é€’ç»™ä¸­é—´çš„OAPæœåŠ¡å™¨ã€‚</li>
<li><strong>OAP:</strong> å…¨ç§°å³å›¾ä¸Šçš„Observabilitiy Analysis Platformï¼Œ å®Œæˆæ•°æ®èšåˆ, æ•°æ®åˆ†æä»¥åŠé©±åŠ¨æ•°æ®æµä»æ¢é’ˆåˆ°ç”¨æˆ·ç•Œé¢çš„æµç¨‹</li>
<li><strong>å­˜å‚¨</strong> é€šè¿‡å¼€æ”¾çš„æ’ä»¶åŒ–çš„æ¥å£å­˜æ”¾ SkyWalking æ•°æ®. ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªæ—¢æœ‰çš„å­˜å‚¨ç³»ç»Ÿ, å¦‚ ElasticSearch, H2 æˆ– MySQL é›†ç¾¤(Sharding-Sphere ç®¡ç†),ä¹Ÿå¯ä»¥é€‰æ‹©è‡ªå·±å®ç°ä¸€ä¸ªå­˜å‚¨ç³»ç»Ÿ. å½“ç„¶, æˆ‘ä»¬éå¸¸æ¬¢è¿ä½ è´¡çŒ®æ–°çš„å­˜å‚¨ç³»ç»Ÿå®ç°ã€‚</li>
<li><strong>UI</strong> ä¸€ä¸ªåŸºäºæ¥å£é«˜åº¦å®šåˆ¶åŒ–çš„Webç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥å¯è§†åŒ–æŸ¥çœ‹å’Œç®¡ç† SkyWalking æ•°æ®ã€‚</li>
</ul>
<p>SkyWalking åˆ©ç”¨Java AgentæŠ€æœ¯ï¼Œåœ¨ç±»åŠ è½½é˜¶æ®µåŠ¨æ€æ³¨å…¥ç›‘æ§é€»è¾‘ï¼Œæ— éœ€æ”¹åŠ¨æºç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Skywalkingé€šè¿‡javaagentåœ¨ç±»åŠ è½½æ—¶åŠ¨æ€æ³¨å…¥ç›‘æ§ä»£ç </span>
<span class="hljs-comment">// ä¸éœ€è¦ä¿®æ”¹ä¸šåŠ¡ä»£ç </span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SkywalkingAgent</span> {
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">premain</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> args, Instrumentation inst</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// 1. æ³¨å†Œç±»æ–‡ä»¶è½¬æ¢å™¨</span>
 Â  Â  Â  Â inst.<span class="hljs-title function_">addTransformer</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassFileTransformer</span>() {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">public</span> byte[] <span class="hljs-title function_">transform</span>(<span class="hljs-params">...</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 2. ä½¿ç”¨ByteBuddy/Javassistä¿®æ”¹å­—èŠ‚ç </span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 3. åœ¨æ–¹æ³•å…¥å£/å‡ºå£æ’å…¥ç›‘æ§é€»è¾‘</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   });
 Â   }
}
</code></pre>
<p>è¿™ç§æ–¹å¼æ—¢ä¿è¯äº†ç›‘æ§çš„å…¨é¢æ€§ï¼Œåˆå®ç°äº†å¯¹ä¸šåŠ¡çš„å®Œå…¨é€æ˜ã€‚å…³äºjavaagentçŸ¥è¯†ç‚¹è¯·å¦å¤–è‡ªè¡ŒæŸ¥é˜…èµ„æ–™ã€‚</p>
<h2 data-id="heading-6">3.SkyWalking å®‰è£…ä¸éƒ¨ç½²</h2>
<p>åŸºäºä¸Šé¢å¯¹Skywalkingæ¶æ„åŸç†çš„ä»‹ç»ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»å¯¹å®ƒå·²ç»æœ‰äº†ä¸€å®šçš„è®¤è¯†äº†è§£ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å¼€å§‹æ­å»ºä¸€ä¸ªå¼ºå¤§çš„ç›‘æ§ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-7">3.1 ä¸‹è½½å®‰è£…åŒ…</h3>
<p>å»å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fskywalking.incubator.apache.org%2Fdownloads%2F" target="_blank" title="https://skywalking.incubator.apache.org/downloads/" ref="nofollow noopener noreferrer">skywalking.incubator.apache.org/downloads/</a> ä¸‹è½½ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©ç‰ˆæœ¬æ˜¯: <code>v9.7.0</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ca0336b94c04e2ca7ea94a69830ef91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=mNSl87FUiKUJCI0PaCMm2xxfhK8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.2 è§£å‹ä¸è°ƒæ•´é…ç½®</h3>
<pre><code class="hljs"> tar -zxvf apache-skywalking-apm-9.7.0.tar.gz
</code></pre>
<p>è§£å‹ä¹‹åæœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15704295d3664275850d7e66bb27fecd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=8FLjbp8fm6u40baT5jx%2FBIxAuRo%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>bin</strong>ï¼šå­˜æ”¾ä¸€äº›å¯æ‰§è¡Œçš„è„šæœ¬ï¼Œæ¯”å¦‚è¯´å¯åŠ¨Skywalking OAPæœåŠ¡çš„è„šæœ¬</p>
</li>
<li>
<p><strong>configï¼š</strong> å­˜æ”¾é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œæ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„ï¼Œæœ‰OAPæœåŠ¡çš„é…ç½®æ–‡ä»¶<code>applicaiton.yml</code>ã€‚é…ç½®é¡¹å¤ªå¤šäº†æ‰€ä»¥è¿™é‡Œæˆ‘éšä¾¿åˆ—ä¸¾ä¸¤é¡¹çœ‹çœ‹</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">cluster:</span>
 Â <span class="hljs-comment"># é»˜è®¤å•ä¾‹éƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥é›†ç¾¤éƒ¨ç½²ï¼Œæ¯”å¦‚è¯´é€šè¿‡æ³¨å†Œä¸­å¿ƒnacos</span>
  <span class="hljs-symbol">selector:</span> <span class="hljs-variable">${</span><span class="hljs-variable constant_">SW_CLUSTER</span><span class="hljs-symbol">:standalone</span>}
 Â 
<span class="hljs-symbol">storage:</span>
 Â <span class="hljs-comment"># æ•°æ®å­˜å‚¨é»˜è®¤æ˜¯å†…å­˜æ•°æ®åº“h2ï¼Œç”Ÿäº§ç¯å¢ƒä¸€èˆ¬æ¨èelasticsearchï¼Œå®˜æ–¹ä¹Ÿå¼ºçƒˆå»ºè®®</span>
  <span class="hljs-symbol">selector:</span> <span class="hljs-variable">${</span><span class="hljs-variable constant_">SW_STORAGE</span><span class="hljs-symbol">:h2</span>}
</code></pre>
<p>ç”±äºæˆ‘æ˜¯æœ¬åœ°æ­å»ºæ¼”ç¤ºï¼Œå°±å®Œå…¨æŒ‰ç…§é»˜è®¤çš„å³å¯ï¼Œæ²¡æœ‰åšä»»ä½•ä¿®æ”¹</p>
</li>
<li>
<p><strong>webappï¼š</strong> UIæœåŠ¡ï¼Œé»˜è®¤ç«¯å£æ˜¯<code>8080</code>ï¼Œä½†ä¸€èˆ¬è¿™ä¸ªç«¯å£è¢«å ç”¨äº†ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸€ä¸‹<code>webapp/application.yml</code>ï¼Œæˆ‘è¿™é‡Œæ”¹æˆï¼š<code>8181</code></p>
</li>
</ul>

<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">serverPort:</span> <span class="hljs-variable">${</span><span class="hljs-variable constant_">SW_SERVER_PORT</span><span class="hljs-symbol">:-</span><span class="hljs-number">8181</span>}
â€‹
<span class="hljs-comment"># Comma seperated list of OAP addresses.</span>
<span class="hljs-symbol">oapServices:</span> <span class="hljs-variable">${</span><span class="hljs-variable constant_">SW_OAP_ADDRESS</span><span class="hljs-symbol">:-http</span><span class="hljs-symbol">://localhost</span><span class="hljs-symbol">:</span><span class="hljs-number">12800</span>}
â€‹
<span class="hljs-symbol">zipkinServices:</span> <span class="hljs-variable">${</span><span class="hljs-variable constant_">SW_ZIPKIN_ADDRESS</span><span class="hljs-symbol">:-http</span><span class="hljs-symbol">://localhost</span><span class="hljs-symbol">:</span><span class="hljs-number">9412</span>}
</code></pre>
<h3 data-id="heading-9">3.3 å¯åŠ¨æœåŠ¡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨OAPåç«¯</span>
bin/oapService.sh
â€‹
<span class="hljs-comment"># å¯åŠ¨UIå‰ç«¯</span>
bin/webappService.sh
</code></pre>
<p>å¯åŠ¨åè®¿é—® <code>http://localhost:8181</code> å³å¯è¿›å…¥SkyWalkingç›‘æ§æ§åˆ¶å°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75d598b437d04cd8b47e0ff28215dcde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=frFgzIGIq9KSkYgQ%2BD7RKgEFzgI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">4.Spring Bootæ¥å…¥æŒ‡å—</h2>
<p>åœ¨å¯åŠ¨å‘½ä»¤ä¸­æ·»åŠ Java Agentå‚æ•°</p>
<pre><code class="hljs language-ini" lang="ini">-javaagent:/Users/shepherdmy/skywalking/skywalking-agent/skywalking-agent.jar
<span class="hljs-attr">-Dskywalking.agent.service_name</span>=shepherd-demo01-service
<span class="hljs-attr">-Dskywalking.collector.backend_service</span>=localhost:<span class="hljs-number">11800</span>
</code></pre>
<p>é¡¹ç›®å¯åŠ¨æˆåŠŸä¹‹åï¼ŒSkywalkingä¼šç›‘æ§åˆ°ä¸€ä¸ªåä¸º<code>shepherd-demo01-service</code>çš„æœåŠ¡ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚å¯çœ‹åˆ°å¯¹åº”çš„æœåŠ¡åç§°ã€å®ä¾‹ã€æ¥å£è°ƒç”¨é“¾è·¯ç­‰ä¿¡æ¯</p>
<ul>
<li><strong>æœåŠ¡æ¦‚è§ˆ</strong>ï¼šå±•ç¤ºæœåŠ¡è´Ÿè½½é‡ã€æ¥å£è¯·æ±‚å¹³å‡å“åº”æ—¶é—´ã€æˆåŠŸç‡ç­‰å…³é”®æŒ‡æ ‡</li>
</ul>
<p>ç‚¹å‡»<code>æœåŠ¡å</code>è¿›å…¥ç›‘æ§æŒ‡æ ‡æ¦‚è§ˆé¡µï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f52029626f24cb2aefa364389a813e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=5IqAJRpysDS%2Barjil%2F3wVwlFM8Q%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>å®ä¾‹è¯¦æƒ…</strong>ï¼šæŸ¥çœ‹å®ä¾‹ä¸‹çš„ç›‘æ§æŒ‡æ ‡ä¿¡æ¯ï¼Œå¦‚JVMå†…å­˜ã€CPUã€GCç­‰æƒ…å†µ</li>
</ul>
<p>ç‚¹å‡» <code>Instance</code>ï¼Œå¯ä»¥æŸ¥åˆ°è¯¥æœåŠ¡çš„<code>å®ä¾‹åˆ—è¡¨</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e87a39de548a4373be931ff797d5ce48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=kWno9h4AN4211ArBTwazfpaoOFc%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»<code>å®ä¾‹å</code>è¿›å…¥ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ä¸ªå®ä¾‹ä¸‹çš„ç›‘æ§ä¿¡æ¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e927f8052274b9d98fb14fa044fd8d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=AMWmU0l%2B9NrtGIDJa1DH4SK0YSk%3D" alt="" loading="lazy"/></p>
<p>æŸ¥çœ‹å®ä¾‹çš„jvmä¿¡æ¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45452dfad25746a7a60e3641d6767ea6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=Ufm52vQ%2FP5uplbUcZALpclkjZes%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>æŸ¥çœ‹EndPointç«¯ç‚¹ä¿¡æ¯</strong></li>
</ul>
<p>ç«¯ç‚¹å¯ä»¥ç®€å•ç†è§£ä¸ºæ˜¯è¢«ç›‘æ§æœåŠ¡æ‰€æ¥æ”¶çš„è¯·æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92e42e56720749d58b6dcec52ad77255~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=bKoYWpE6jt4nqeh8m8QVznjmD1U%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»<code>GET:/user/page</code>ç«¯ç‚¹è¿›å»ï¼Œå¯ä»¥æŸ¥çœ‹è¿™ä¸ªè¯·æ±‚çš„ç›‘æ§ä¿¡æ¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/364f1908094a4e8daeac425da38f268a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=Y3DxeEEtD1%2B%2BcxsHkrtgLnAFPr4%3D" alt="" loading="lazy"/></p>
<p>è¯¥è¯·æ±‚<code>GET:/user/page</code>é€»è¾‘æ˜¯å…ˆæŸ¥è¯¢<code>Redis</code>ï¼Œæœ‰ç¼“å­˜æ•°æ®å°±ç›´æ¥è¿”å›ï¼Œæ²¡æœ‰å†æ ¹æ®å‚æ•°å»æ•°æ®åº“<code>MySQL</code>æŸ¥è¯¢æ•°æ®å­˜å…¥<code>Redis</code>ä¹‹åè¿”å›ï¼Œè¿™é‡Œè¯¦ç»†å±•ç¤ºäº†è¯·æ±‚çš„æ•´ä¸ªè°ƒç”¨é“¾è·¯ï¼Œéå¸¸æ¸…æ™°ç›´è§‚ã€‚</p>
<ul>
<li><strong>æ‹“æ‰‘å›¾</strong>ï¼šå¯è§†åŒ–æœåŠ¡é—´ä¾èµ–å…³ç³»</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35c2b0462aa04478a11a1e6a7bd7bc67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hlcGhlcmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061604&amp;x-signature=1O8tLje6E2iO1LGq3qs4vPEal%2Bg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">5.æ€»ç»“</h2>
<p>SkyWalking æä¾›å¤šå±‚çº§çš„ç›‘æ§æŒ‡æ ‡ï¼ŒåŠ©åŠ›å…¨æ–¹ä½ç³»ç»Ÿå¯è§‚æµ‹ï¼š</p>

























<table><thead><tr><th>å±‚çº§</th><th>ç›‘æ§æŒ‡æ ‡ç¤ºä¾‹</th></tr></thead><tbody><tr><td>æœåŠ¡çº§åˆ«</td><td>P99/P95å»¶è¿Ÿã€è¯·æ±‚é‡ã€é”™è¯¯ç‡</td></tr><tr><td>å®ä¾‹çº§åˆ«</td><td>CPUä½¿ç”¨ç‡ã€JVMå †å†…å­˜ã€çº¿ç¨‹æ•°ã€GCæ¬¡æ•°</td></tr><tr><td>æ¥å£ç«¯ç‚¹</td><td>æ…¢æ¥å£TOP10ã€é”™è¯¯æ¥å£TOP5ã€è°ƒç”¨é“¾è¯¦æƒ…</td></tr><tr><td>æ•°æ®åº“</td><td>æ…¢SQLæŸ¥è¯¢ã€è¿æ¥æ± çŠ¶æ€ã€æ‰§è¡Œæ—¶é—´åˆ†å¸ƒ</td></tr></tbody></table>
<p>SkyWalking ä½œä¸ºä¸€æ¬¾å¼€æºAPMç³»ç»Ÿï¼Œå‡­å€Ÿå…¶<strong>æ— ä¾µå…¥çš„è®¾è®¡</strong>ã€<strong>å“è¶Šçš„æ€§èƒ½è¡¨ç°</strong>ä»¥åŠ<strong>æ´»è·ƒçš„ä¸­æ–‡ç¤¾åŒº</strong>ï¼Œå·²æˆä¸ºä¼—å¤šä¼ä¸šå¾®æœåŠ¡ç›‘æ§çš„é¦–é€‰æ–¹æ¡ˆã€‚æ— è®ºæ˜¯å¼€å‘è°ƒè¯•ã€æ€§èƒ½ä¼˜åŒ–ï¼Œè¿˜æ˜¯çº¿ä¸Šæ•…éšœæ’æŸ¥ï¼ŒSkyWalking éƒ½èƒ½æä¾›å¼ºå¤§çš„æ•°æ®æ”¯æŒå’Œå¯è§†åŒ–èƒ½åŠ›ã€‚</p>
<p>åˆç†éƒ¨ç½²ä¸ä½¿ç”¨SkyWalkingï¼Œä¸ä»…èƒ½æå‡ç³»ç»Ÿç¨³å®šæ€§ï¼Œè¿˜èƒ½æ˜¾è‘—é™ä½è¿ç»´å¤æ‚åº¦ï¼Œæ˜¯ç°ä»£åˆ†å¸ƒå¼ç³»ç»Ÿå¯è§‚æµ‹æ€§å»ºè®¾ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ–‡åˆæ­¥ä»‹ç»äº†SkyWalkingçš„æ ¸å¿ƒæ¦‚å¿µã€éƒ¨ç½²æµç¨‹ä¸æ¥å…¥å®è·µï¼Œå…³äºå¾®æœåŠ¡é“¾è·¯è¿½è¸ªçš„æ›´æ·±å±‚åŸç†ã€Traceä¸Spançš„ç»„æˆã€ä»¥åŠä¸Log4j2/Logbackç­‰æ—¥å¿—æ¡†æ¶çš„æ•´åˆï¼Œæˆ‘ä»¬å°†åœ¨åç»­æ–‡ç« ä¸­ç»§ç»­æ¢è®¨ã€‚æ¬¢è¿å…³æ³¨äº¤æµï¼Œå…±åŒè¿›æ­¥</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React å­¦ä¹ ï¼šçˆ¶ä¼ å­çš„å•é¡¹æ•°æ®æµâ€”â€”props]]></title>    <link>https://juejin.cn/post/7586569284550934568</link>    <guid>https://juejin.cn/post/7586569284550934568</guid>    <pubDate>2025-12-23T00:58:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586569284550934568" data-draft-id="7586550947703275530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React å­¦ä¹ ï¼šçˆ¶ä¼ å­çš„å•é¡¹æ•°æ®æµâ€”â€”props"/> <meta itemprop="keywords" content="JavaScript,React.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-12-23T00:58:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—å±±å®‰"/> <meta itemprop="url" content="https://juejin.cn/user/1795929588117962"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React å­¦ä¹ ï¼šçˆ¶ä¼ å­çš„å•é¡¹æ•°æ®æµâ€”â€”props
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1795929588117962/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—å±±å®‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T00:58:03.000Z" title="Tue Dec 23 2025 00:58:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨å­¦ä¹  React çš„ props ï¼Œé¡ºæ‰‹æ•´ç†äº†è‡ªå·±çš„ä¸€äº›å­¦ä¹ ä»£ç å’Œç¬”è®°ã€‚props æ˜¯ React ç»„ä»¶é€šä¿¡çš„æ ¸å¿ƒï¼Œç©å¥½äº†å®ƒï¼Œä½ å†™ç»„ä»¶å°±ä¼šåƒæ­ç§¯æœ¨ä¸€æ ·é¡ºæ‰‹ã€‚ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œå°±ä»æœ€åŸºç¡€çš„ç”¨æ³•å¼€å§‹è®²èµ·ï¼Œä¸€æ­¥æ­¥å¸¦ä½ æ·±å…¥ï¼Œè¿˜ä¼šç»“åˆå®é™…ä»£ç ä¾‹å­æ¥è¯´æ˜ã€‚é¡ºä¾¿èŠèŠ React 19 å‰åçš„å°å˜åŒ–ã€å¸¸è§çš„ CSS å†™æ³•ï¼Œä»¥åŠé‚£ä¸ªè¶…çº§å¥½ç”¨çš„ children propsã€‚</p>
<p>æ–‡ç« åŸºäºæˆ‘è‡ªå·±çš„å­¦ä¹ é¡¹ç›®ï¼Œä»£ç æ¥è‡ªä¸€ä¸ªç®€å•çš„ Appï¼ŒåŒ…å« Greetingã€Card å’Œ Modal ç»„ä»¶ã€‚å’±ä»¬è¾¹çœ‹ä»£ç è¾¹èŠï¼Œç»å¯¹å¹²è´§æ»¡æ»¡ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Props æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¿™ä¹ˆé‡è¦ï¼Ÿï¼ˆé‡ç‚¹å¯¹æ¯” stateï¼‰</h2>
<p>åœ¨ React é‡Œï¼Œç»„ä»¶è¦æ­£å¸¸å·¥ä½œï¼Œå°±ç¦»ä¸å¼€â€œæ•°æ®â€ã€‚æ•°æ®ä¸»è¦åˆ†ä¸¤ç±»ï¼š<strong>state</strong> å’Œ <strong>props</strong>ã€‚è¿™ä¸¤å…„å¼Ÿé•¿å¾—æœ‰ç‚¹åƒï¼Œä½†ç”¨é€”å’Œæ€§æ ¼å®Œå…¨ä¸ä¸€æ ·ï¼Œææ¸…æ¥šå®ƒä»¬çš„å…³ç³»ï¼Œä½ å†™ç»„ä»¶æ—¶æ‰ä¼šå¿ƒé‡Œæœ‰åº•ã€‚</p>
<p>ç”¨å¤§ç™½è¯æ€»ç»“ï¼š</p>



































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>stateï¼ˆçŠ¶æ€ï¼‰</th><th>propsï¼ˆå±æ€§ï¼‰</th></tr></thead><tbody><tr><td><strong>æ˜¯è°çš„ï¼Ÿ</strong></td><td>ç»„ä»¶<strong>è‡ªå·±</strong>çš„ç§æœ‰æ•°æ®</td><td>çˆ¶ç»„ä»¶<strong>ä¼ ç»™</strong>å­ç»„ä»¶çš„æ•°æ®</td></tr><tr><td><strong>èƒ½ä¸èƒ½æ”¹ï¼Ÿ</strong></td><td>å¯ä»¥æ”¹ï¼ˆç”¨ setState æˆ– useStateï¼‰</td><td><strong>åªè¯»</strong>ï¼å­ç»„ä»¶ä¸èƒ½ç›´æ¥æ”¹</td></tr><tr><td><strong>æ”¹äº†ä¼šæ€æ ·ï¼Ÿ</strong></td><td>ä¿®æ”¹åç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“</td><td>åªæœ‰çˆ¶ç»„ä»¶é‡æ–°ä¼ æ–°å€¼ï¼Œå­ç»„ä»¶æ‰ä¼šæ›´æ–°</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>å±äºå½“å‰ç»„ä»¶ï¼Œç»„ä»¶é”€æ¯å°±æ²¡äº†</td><td>åƒâ€œå¿«é€’â€ä¸€æ ·ï¼Œä»çˆ¶ç»„ä»¶é€åˆ°å­ç»„ä»¶</td></tr><tr><td><strong>å…¸å‹ç”¨é€”</strong></td><td>è¡¨å•è¾“å…¥å€¼ã€å¼€å…³çŠ¶æ€ã€è®¡æ•°å™¨ç­‰å¯å˜æ•°æ®</td><td>é…ç½®ä¿¡æ¯ã€æ˜¾ç¤ºå†…å®¹ã€å›è°ƒå‡½æ•°ç­‰</td></tr></tbody></table>
<h3 data-id="heading-2">ç”¨ç”Ÿæ´»ä¾‹å­æ¯”å–»æœ€æ¸…æ¥š</h3>
<p>æƒ³è±¡ä½ å®¶æœ‰ä¸ªå„¿å­ï¼ˆå­ç»„ä»¶ï¼‰å’Œè€çˆ¸ï¼ˆçˆ¶ç»„ä»¶ï¼‰ï¼š</p>
<ul>
<li><strong>state</strong> å°±åƒå„¿å­è‡ªå·±çš„é›¶èŠ±é’±ï¼šä»–è‡ªå·±èµšçš„ï¼ˆæˆ–çˆ¸ç»™çš„åˆå§‹å€¼ï¼‰ï¼Œæƒ³æ€ä¹ˆèŠ±å°±æ€ä¹ˆèŠ±ï¼ˆä¿®æ”¹ï¼‰ï¼Œçˆ¸ç®¡ä¸ç€ã€‚</li>
<li><strong>props</strong> å°±åƒçˆ¸ç»™å„¿å­çš„ä»»åŠ¡å’Œå·¥å…·ï¼šçˆ¸è¯´â€œä»Šå¤©å¸®æˆ‘ä¹°ç“¶é…±æ²¹ï¼Œé¡ºä¾¿å¸¦å¼ ç”µå½±ç¥¨å›æ¥â€ï¼Œå„¿å­åªèƒ½æŒ‰çˆ¸ç»™çš„é’±å’Œè¦æ±‚å»åŠï¼Œä¸èƒ½è‡ªå·±æ”¹ä»»åŠ¡ï¼ˆâ€œæˆ‘åè¦ä¹°å¯ä¹â€ä¸è¡Œï¼‰ã€‚</li>
</ul>
<p>å¦‚æœå„¿å­æƒ³è·Ÿçˆ¸è¯´â€œæˆ‘ä¹°å®Œäº†â€æˆ–è€…â€œæˆ‘éœ€è¦æ›´å¤šé’±â€ï¼Œé‚£åªèƒ½é€šè¿‡çˆ¸äº‹å…ˆç»™çš„â€œä¼ è¯æ–¹å¼â€ï¼ˆå›è°ƒå‡½æ•°ï¼‰æ¥æ²Ÿé€šâ€”â€”è¿™å°±å¼•å‡ºäº†æˆ‘ä»¬ä¸Šæ¬¡è®²çš„â€œå­ä¼ çˆ¶â€ã€‚</p>
<h3 data-id="heading-3">ä»£ç å¯¹æ¯”æœ€ç›´è§‚</h3>
<p>æ¥çœ‹åŒä¸€ä¸ªéœ€æ±‚ï¼šæ˜¾ç¤ºä¸€ä¸ªé—®å€™è¯­ï¼Œå¯ä»¥æ”¹åå­—å’Œæ¬¢è¿è¯ã€‚</p>
<p><strong>ç”¨ state çš„æ–¹å¼</strong>ï¼ˆæ•°æ®åœ¨ç»„ä»¶è‡ªå·±æ‰‹é‡Œï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">GreetingSelf</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'é™Œç”Ÿäºº'</span>);
  <span class="hljs-keyword">const</span> [message, setMessage] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'æ¬¢è¿å…‰ä¸´'</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello {name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      
      {/* è‡ªå·±æ”¹è‡ªå·±ï¼Œè¶…çº§è‡ªç”± */}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ”¹åå­—"</span> 
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setName(e.target.value)} 
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
        <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æ”¹æ¬¢è¿è¯"</span> 
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setMessage(e.target.value)} 
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>è¿™ä¸ªç»„ä»¶å®Œå…¨è‡ªç»™è‡ªè¶³ï¼Œæƒ³æ”¹å•¥æ”¹å•¥ã€‚</p>
<p><strong>ç”¨ props çš„æ–¹å¼</strong>ï¼ˆæ•°æ®ä»å¤–é¢ä¼ è¿›æ¥ï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Greeting</span>(<span class="hljs-params">{ name, message }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello {name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      
      {/* è¿™é‡Œä¸èƒ½æ”¹ï¼æƒ³æ”¹å¾—è®©çˆ¶ç»„ä»¶æ¥ */}
      {/* <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">...</span> /&gt;</span>  // æ²¡ç”¨ï¼Œprops æ˜¯åªè¯»çš„ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [name, setName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'keji'</span>);
  <span class="hljs-keyword">const</span> [message, setMessage] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'æ¬¢è¿æ¥åˆ°è…¾è®¯'</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">{name}</span> <span class="hljs-attr">message</span>=<span class="hljs-string">{message}</span> /&gt;</span>
      
      {/* åªæœ‰è¿™é‡Œèƒ½æ”¹ï¼Œæ”¹äº†ä¼šé‡æ–°ä¼ ç»™å­ç»„ä»¶ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{name}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setName(e.target.value)} /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{message}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setMessage(e.target.value)} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>çœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿ</p>
<ul>
<li>ç”¨ stateï¼šç»„ä»¶å†…éƒ¨è‡ªå·±ç®¡æ•°æ®ï¼Œé€‚åˆç‹¬ç«‹çš„å°éƒ¨ä»¶ã€‚</li>
<li>ç”¨ propsï¼šç»„ä»¶å˜æˆâ€œçº¯å±•ç¤ºâ€å·¥å…·ï¼Œæ•°æ®ç»Ÿä¸€ç”±çˆ¶ç»„ä»¶ç®¡ç†ï¼Œé€‚åˆå¤ç”¨ï¼ˆåŒä¸€ä¸ª Greeting å¯ä»¥ç»™ä¸åŒäººç”¨ä¸åŒæ¬¢è¿è¯ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-4">äºŒã€React 19 ä¹‹å‰ï¼šProps çš„ç»å…¸ç©æ³•</h2>
<p>åœ¨ React 18 åŠæ›´æ—©ç‰ˆæœ¬ï¼Œprops ç”¨æ³•å·²ç»å¾ˆæˆç†Ÿäº†ï¼š</p>
<ol>
<li>
<p><strong>è§£æ„ props</strong>ï¼šç›´æ¥åœ¨å‚æ•°é‡Œè§£æ„ï¼Œç”¨èµ·æ¥æœ€çˆ½ã€‚</p>
</li>
<li>
<p><strong>é»˜è®¤å€¼</strong>ï¼šä¸¤ç§æ–¹å¼</p>
<ul>
<li>ES6 é»˜è®¤å‚æ•°ï¼šmessage = "é»˜è®¤å€¼"</li>
<li>defaultPropsï¼ˆé™æ€å±æ€§ï¼Œå·²è¢«åºŸå¼ƒï¼‰</li>
</ul>
<p>ç¤ºä¾‹ï¼ˆæ—§æ–¹å¼ï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title class_">Greeting</span>.<span class="hljs-property">defaultProps</span> = {
  <span class="hljs-attr">message</span>: <span class="hljs-string">"æ¬¢è¿æ¥åˆ°å­—èŠ‚"</span>
};
</code></pre>
</li>
<li>
<p><strong>ç±»å‹æ£€æŸ¥</strong>ï¼šç”¨ prop-types åŒ…</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">PropTypes</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"prop-types"</span>;

<span class="hljs-title class_">Greeting</span>.<span class="hljs-property">propTypes</span> = {
  <span class="hljs-attr">name</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">string</span>.<span class="hljs-property">isRequired</span>,
  <span class="hljs-attr">message</span>: <span class="hljs-title class_">PropTypes</span>.<span class="hljs-property">string</span>,
};
</code></pre>
<p>å¼€å‘æ¨¡å¼ä¸‹ï¼Œå¦‚æœä¼ é”™ç±»å‹ä¼šè­¦å‘Šï¼Œå¾ˆå®ç”¨ã€‚</p>
</li>
<li>
<p><strong>ä¼ ä»»æ„æ•°æ®</strong>ï¼šå­—ç¬¦ä¸²ã€æ•°å­—ã€å¯¹è±¡ã€å‡½æ•°ã€ç”šè‡³ JSX éƒ½å¯ä»¥ã€‚</p>
</li>
</ol>
<h2 data-id="heading-5">ä¸‰ã€React 19 ä¹‹åï¼šProps çš„å°å˜åŒ–ï¼ˆæ›´ç®€æ´äº†ï¼‰</h2>
<p>React 19ï¼ˆ2024 å¹´ 12 æœˆç¨³å®šå‘å¸ƒï¼‰å¯¹ props æœ¬èº«çš„æ ¸å¿ƒæœºåˆ¶æ²¡å¤§æ”¹ï¼Œä½†æœ‰ä¸€äº›æ¸…ç†å’Œæ”¹è¿›ï¼Œè®©ä»£ç æ›´ç°ä»£ï¼š</p>
<ul>
<li>
<p><strong>ç§»é™¤ propTypes å’Œ defaultProps</strong>ï¼šè¿™äº›æ—©åœ¨ React 15.5 å°±è¢«æ ‡è®°åºŸå¼ƒäº†ï¼ŒReact 19 ç›´æ¥ä» React åŒ…é‡Œåˆ æ‰ã€‚ä»¥åç”¨çš„è¯ä¸ä¼šæŠ¥é”™ï¼Œä½†å®Œå…¨æ²¡æ•ˆæœã€‚</p>
<ul>
<li>æ¨èï¼šç”¨ TypeScript åšé™æ€ç±»å‹æ£€æŸ¥ï¼Œæˆ–è€…ç»§ç»­ç”¨ç‹¬ç«‹çš„ prop-types åŒ…ï¼ˆæ‰‹åŠ¨æ£€æŸ¥ï¼‰ã€‚</li>
<li>é»˜è®¤å€¼ç»Ÿä¸€ç”¨ ES6 é»˜è®¤å‚æ•°ï¼Œæ›´ç®€æ´ã€‚</li>
</ul>
</li>
<li>
<p><strong>ref ç°åœ¨å¯ä»¥ç›´æ¥ä½œä¸º prop ä¼ </strong>ï¼ˆè¶…çº§å®ç”¨ï¼ï¼‰ ä»¥å‰ï¼Œå‡½æ•°ç»„ä»¶æƒ³æ¥æ”¶ ref å¿…é¡»è£¹ä¸€å±‚ forwardRefï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// React 18</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyInput</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>
));
</code></pre>
<p>React 19 åï¼Œå‡½æ•°ç»„ä»¶ç›´æ¥æ”¶ refï¼Œåƒ children ä¸€æ ·è‡ªç„¶ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// React 19</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">{ ref, ...props }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>;
}
</code></pre>
<p>å°‘äº†å¥½å¤šæ ·æ¿ä»£ç ï¼Œå®˜æ–¹è¿˜æä¾›äº† codemod è‡ªåŠ¨è¿ç§»ã€‚</p>
</li>
</ul>
<p>å…¶ä»– props ç›¸å…³çš„å°ä¼˜åŒ–ï¼šå¯¹ Custom Elementsï¼ˆWeb Componentsï¼‰çš„æ”¯æŒæ›´å¥½ï¼Œprops ä¼šä¼˜å…ˆä½œä¸º property ä¼ ï¼Œè€Œä¸æ˜¯ attributeã€‚</p>
<p>æ€»ä¹‹ï¼ŒReact 19 çš„ props æ›´å¹²å‡€ã€æ›´è´´è¿‘ç°ä»£ JSã€‚å¦‚æœä½ è¿˜åœ¨ç”¨è€é¡¹ç›®ï¼Œå»ºè®®å‡çº§æ—¶è·‘ä¸€ä¸‹å®˜æ–¹ codemodã€‚</p>
<h2 data-id="heading-6">å››ã€React Props çš„å„ç§â€œè¾¹ç•Œæƒ…å†µâ€è¯¦è§£ï¼šä¸ä¼ ã€ä¼ äº†ä¸ç”¨ã€æ²¡ç»™å€¼ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h2>
<p>åœ¨å®é™…å†™ä»£ç æ—¶ï¼Œprops çš„è¿™äº›â€œè¾¹ç¼˜æƒ…å†µâ€ç»å¸¸è®©äººæ‘¸ä¸ç€å¤´è„‘ã€‚ä»Šå¤©æˆ‘ä»¬å°±ä¸€ä¸ªä¸ªæ‹†å¼€çœ‹ï¼Œç»“åˆçœŸå®ä»£ç å’Œæ§åˆ¶å°è¾“å‡ºï¼Œå‘Šè¯‰ä½ åˆ°åº•ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œä»¥åŠæ€ä¹ˆé¿å…å‘ã€‚</p>
<h4 data-id="heading-7">1. ä¸ä¼ æŸä¸ª propï¼ˆå®Œå…¨æ²¡å†™ï¼‰</h4>
<p><strong>æƒ…å†µ</strong>ï¼šçˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œå‹æ ¹æ²¡å†™è¿™ä¸ª propã€‚</p>
<p><strong>ç»“æœ</strong>ï¼šå­ç»„ä»¶æ”¶åˆ°è¿™ä¸ª prop çš„å€¼æ˜¯ <strong>undefined</strong>ã€‚</p>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<p>å­ç»„ä»¶ Greeting.jsxï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Greeting</span>(<span class="hljs-params">{ name, message, showIcon }</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ name, message, showIcon });  <span class="hljs-comment">// å…³é”®çœ‹è¿™é‡Œ</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello {name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      {showIcon &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ‘‹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>çˆ¶ç»„ä»¶è¿™æ ·ç”¨ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Greeting</span> /&gt;
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">{ <span class="hljs-attr">name</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-attr">message</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-attr">showIcon</span>: <span class="hljs-literal">undefined</span> }
</code></pre>
<p>é¡µé¢æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-text" lang="text">Hello          // ç©º
               // ç©º
</code></pre>
<p><strong>ç»“è®º</strong>ï¼šä¸ä¼  = undefinedï¼Œä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¾ç¤ºä¼šå¾ˆä¸‘ã€‚</p>
<h4 data-id="heading-8">2. ä¼ äº† prop ä½†å­ç»„ä»¶æ²¡ç”¨ï¼ˆå†™äº†ä½†æ²¡è§£æ„/ä½¿ç”¨ï¼‰</h4>
<p><strong>æƒ…å†µ</strong>ï¼šçˆ¶ç»„ä»¶ä¼ äº†å€¼ï¼Œä½†å­ç»„ä»¶å‚æ•°é‡Œæ²¡æ¥æ”¶å®ƒã€‚</p>
<p><strong>ç»“æœ</strong>ï¼šä¼ çš„å€¼ä¼šä¸¢å¤±ï¼Œå­ç»„ä»¶æ ¹æœ¬æ‹¿ä¸åˆ°ã€‚</p>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Greeting</span> name=<span class="hljs-string">"å°æ˜"</span> message=<span class="hljs-string">"æ¬¢è¿"</span> /&gt;
</code></pre>
<p>å­ç»„ä»¶æ•…æ„ä¸æ¥æ”¶ nameï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Greeting</span>(<span class="hljs-params">{ message }</span>) {  <span class="hljs-comment">// åªè§£æ„äº† messageï¼Œname è¢«å¿½ç•¥</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ message });

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello {message}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
}
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">{ <span class="hljs-attr">message</span>: <span class="hljs-string">"æ¬¢è¿"</span> }
</code></pre>
<p>name çš„å€¼â€œå°æ˜â€ç›´æ¥ä¸¢äº†ï¼Œå­ç»„ä»¶å®Œå…¨ä¸çŸ¥é“æœ‰è¿™ä¸ª propã€‚</p>
<p><strong>å¦ä¸€ç§å†™æ³•</strong>ï¼ˆç”¨ props å¯¹è±¡ï¼‰ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Greeting</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props);  <span class="hljs-comment">// { name: "å°æ˜", message: "æ¬¢è¿" }</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello {props.message}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;  <span class="hljs-comment">// åªç”¨äº† message</span>
}
</code></pre>
<p>è¿™ç§æƒ…å†µä¸‹ props å¯¹è±¡é‡Œæ˜¯æœ‰ name çš„ï¼Œä½†å¦‚æœä½ æ²¡ç”¨å®ƒï¼Œå°±ç™½ä¼ äº†ã€‚</p>
<p><strong>ç»“è®º</strong>ï¼šä¼ äº†ä½†æ²¡ç”¨ = ç™½ä¼ ï¼Œæµªè´¹æ€§èƒ½ï¼ˆè½»å¾®ï¼‰ï¼Œä»£ç æ˜“æ··æ·†ã€‚</p>
<h4 data-id="heading-9">3. ä¼ äº† prop ä½†æ²¡ç»™å€¼ï¼ˆï¼‰</h4>
<p><strong>æƒ…å†µ</strong>ï¼šå†™äº† prop åï¼Œä½†æ²¡èµ‹å€¼ï¼ˆå¸ƒå°”ç±»å‹å¸¸è§ï¼‰ã€‚</p>
<p><strong>ç»“æœ</strong>ï¼šReact ä¼šè‡ªåŠ¨æŠŠè¿™ä¸ª prop çš„å€¼è®¾ä¸º <strong>true</strong>ã€‚</p>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Greeting</span> showIcon /&gt;        <span class="hljs-comment">// æ²¡å†™ =true</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">showIcon</span>=<span class="hljs-string">{true}</span> /&gt;</span></span> <span class="hljs-comment">// æ˜¾å¼å†™ true</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">showIcon</span>=<span class="hljs-string">{false}</span> /&gt;</span></span><span class="hljs-comment">// æ˜¾å¼å†™ false</span>
</code></pre>
<p>å­ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Greeting</span>(<span class="hljs-params">{ showIcon }</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ showIcon });

  <span class="hljs-keyword">return</span> showIcon &amp;&amp; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ‘‹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>;
}
</code></pre>
<p>ä¸‰ç§å†™æ³•çš„æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">{ <span class="hljs-attr">showIcon</span>: <span class="hljs-literal">true</span> }     <span class="hljs-comment">// &lt;Greeting showIcon /&gt;</span>
{ <span class="hljs-attr">showIcon</span>: <span class="hljs-literal">true</span> }     <span class="hljs-comment">// &lt;Greeting showIcon={true} /&gt;</span>
{ <span class="hljs-attr">showIcon</span>: <span class="hljs-literal">false</span> }    <span class="hljs-comment">// &lt;Greeting showIcon={false} /&gt;</span>
</code></pre>
<p><strong>ç»“è®º</strong>ï¼šåœ¨ JSX ä¸­ï¼Œ ç­‰ä»·äº ã€‚è¿™æ˜¯ React çš„è¯­æ³•ç³–ï¼Œè¶…çº§å¸¸è§äºå¼€å…³ç±» propï¼ˆå¦‚ disabledã€checkedã€selected ç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-10">4. ç»™äº†é»˜è®¤å€¼çš„æƒ…å†µï¼ˆES6 é»˜è®¤å‚æ•°ï¼‰</h4>
<p><strong>æƒ…å†µ</strong>ï¼šä¸ä¼ æˆ–ä¼  undefined æ—¶ï¼Œç”¨é»˜è®¤å€¼å…œåº•ã€‚</p>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Greeting</span>(<span class="hljs-params">{ 
  name = <span class="hljs-string">"é™Œç”Ÿäºº"</span>, 
  message = <span class="hljs-string">"æ¬¢è¿å…‰ä¸´"</span>, 
  showIcon = <span class="hljs-literal">false</span> 
}</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>({ name, message, showIcon });

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello {name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{message}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      {showIcon &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ğŸ‘‹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>æµ‹è¯•å‡ ç§è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Greeting</span> /&gt;                          <span class="hljs-comment">// å…¨ä¸ä¼ </span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">{undefined}</span> /&gt;</span></span>         <span class="hljs-comment">// æ˜¾å¼ä¼  undefined</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">""</span> /&gt;</span></span>                  <span class="hljs-comment">// ä¼ ç©ºå­—ç¬¦ä¸²ï¼ˆä¸ä¼šç”¨é»˜è®¤ï¼‰</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Greeting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å°æ˜"</span> /&gt;</span></span>
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">{ <span class="hljs-attr">name</span>: <span class="hljs-string">"é™Œç”Ÿäºº"</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"æ¬¢è¿å…‰ä¸´"</span>, <span class="hljs-attr">showIcon</span>: <span class="hljs-literal">false</span> }
{ <span class="hljs-attr">name</span>: <span class="hljs-string">"é™Œç”Ÿäºº"</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"æ¬¢è¿å…‰ä¸´"</span>, <span class="hljs-attr">showIcon</span>: <span class="hljs-literal">false</span> }  <span class="hljs-comment">// undefined è§¦å‘é»˜è®¤</span>
{ <span class="hljs-attr">name</span>: <span class="hljs-string">""</span>,       <span class="hljs-attr">message</span>: <span class="hljs-string">"æ¬¢è¿å…‰ä¸´"</span>, <span class="hljs-attr">showIcon</span>: <span class="hljs-literal">false</span> }  <span class="hljs-comment">// ç©ºå­—ç¬¦ä¸²ä¸ä¼šè§¦å‘é»˜è®¤</span>
{ <span class="hljs-attr">name</span>: <span class="hljs-string">"å°æ˜"</span>,   <span class="hljs-attr">message</span>: <span class="hljs-string">"æ¬¢è¿å…‰ä¸´"</span>, <span class="hljs-attr">showIcon</span>: <span class="hljs-literal">false</span> }
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼šåªæœ‰ <strong>undefined</strong> æ‰ä¼šè§¦å‘ ES6 é»˜è®¤å€¼ã€‚ä¼  nullã€""ã€falseã€0 éƒ½ä¸ä¼šè§¦å‘é»˜è®¤å€¼ã€‚</p>
<h4 data-id="heading-11">5. æ€»ç»“è¡¨æ ¼ï¼ˆä¸€ç›®äº†ç„¶ï¼‰</h4>





















































<table><thead><tr><th>çˆ¶ç»„ä»¶å†™æ³•</th><th>å­ç»„ä»¶æ”¶åˆ°å€¼</th><th>æ˜¯å¦è§¦å‘é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¸å†™ prop</td><td>undefined</td><td>æ˜¯</td><td>æœ€å¸¸è§å‘</td></tr><tr><td>&lt; Comp flag /&gt;</td><td>true</td><td>-</td><td>å¸ƒå°” prop çš„è¯­æ³•ç³–</td></tr><tr><td>&lt; Comp flag={true/false} /&gt;</td><td>true / false</td><td>-</td><td>æ˜¾å¼æ§åˆ¶</td></tr><tr><td>&lt; Comp name={undefined} /&gt;</td><td>undefined</td><td>æ˜¯</td><td>æ˜¾å¼ä¼  undefined ä¹Ÿä¼šè§¦å‘é»˜è®¤</td></tr><tr><td>&lt; Comp name="" /&gt;</td><td>""ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</td><td>å¦</td><td>ä¼ äº†å…·ä½“å€¼ï¼Œå°±ä¸ä¼šç”¨é»˜è®¤</td></tr><tr><td>&lt; Comp name={null} /&gt;</td><td>null</td><td>å¦</td><td>null æ˜¯åˆæ³•å€¼ï¼Œä¸ä¼šè§¦å‘é»˜è®¤</td></tr><tr><td>ä¼ äº† prop ä½†å­ç»„ä»¶æ²¡æ¥æ”¶</td><td>æ‹¿ä¸åˆ°ï¼ˆä¸¢å¤±ï¼‰</td><td>-</td><td>ä»£ç  bugï¼Œå»ºè®®ç”¨ TS æˆ– PropTypes æ£€æŸ¥</td></tr></tbody></table>
<h2 data-id="heading-12">äº”ã€childrenï¼šæœ€å¼ºå¤§çš„ props</h2>
<p>children æ˜¯ React è‡ªåŠ¨ä¼ ç»™ä½ çš„ä¸€ä¸ªç‰¹æ®Š propï¼Œä»£è¡¨ç»„ä»¶æ ‡ç­¾ä¹‹é—´çš„å†…å®¹ã€‚å®ƒè®©ç»„ä»¶è¶…çº§çµæ´»ï¼Œèƒ½â€œæ’æ§½â€ä»»æ„ JSXã€‚</p>
<p><strong>Card ç»„ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-title class_">App</span>.<span class="hljs-property">jsx</span>
&lt;<span class="hljs-title class_">Card</span> className=<span class="hljs-string">"user-card"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æŸ¥çœ‹è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Card</span>&gt;
</code></pre>
<p><strong>Card å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//Card.jsx</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Card</span> = (<span class="hljs-params">{ children, className = <span class="hljs-string">""</span> }</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">card</span> ${<span class="hljs-attr">className</span>}`}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
<p>å…¶ä¸­,{children}å°±æ˜¯</p>
<pre><code class="hljs language-jsx" lang="jsx">  &lt;h2&gt;å¼ ä¸‰&lt;/h2&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æŸ¥çœ‹è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<p>ç›´æ¥æŠŠçˆ¶ç»„ä»¶ä¼ çš„ JSX åŸæ ·æ¸²æŸ“å‡ºæ¥ï¼Œå®Œç¾å°è£…å¡ç‰‡æ ·å¼ã€‚</p>
<p><strong>Modal ç»„ä»¶</strong>ï¼ˆæ›´é«˜çº§çš„å®šåˆ¶ï¼‰ï¼š æˆ‘ä»¬æƒ³è®© Modal æ”¯æŒè‡ªå®šä¹‰ header å’Œ footerï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//App.jsx</span>
&lt;<span class="hljs-title class_">Modal</span> <span class="hljs-title class_">HeaderComponent</span>={<span class="hljs-title class_">MyHeader</span>} <span class="hljs-title class_">FooterComponent</span>={<span class="hljs-title class_">MyFooter</span>}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½ å¯ä»¥åœ¨è¿™é‡Œæ˜¾ç¤ºä»»ä½•JSX<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Modal</span>&gt;
</code></pre>
<p>Modal å®ç°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//Modal.jsx</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params">{ HeaderComponent, FooterComponent, children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.overlay}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.modal}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">HeaderComponent</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.content}</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">FooterComponent</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>è¿™é‡Œ children å°±æ˜¯å¼¹çª—æ­£æ–‡å†…å®¹ï¼Œè€Œ Header/Footer æ˜¯é€šè¿‡ props ä¼ ç»„ä»¶ï¼Œå®ç°é«˜åº¦å®šåˆ¶ã€‚</p>
<p>children çš„å¨åŠ›åœ¨äºï¼šå®ƒè®©ä½ çš„ç»„ä»¶åƒâ€œå®¹å™¨â€ä¸€æ ·ï¼Œèƒ½åŒ…è£¹ä»»æ„å†…å®¹ã€‚Ant Designã€Material UI çš„å¾ˆå¤šç»„ä»¶éƒ½é å®ƒå®ç°çµæ´»æ€§ã€‚</p>
<h2 data-id="heading-13">å…­ã€React ä¸­å¸¸è§çš„ CSS æ ·å¼å†™æ³•</h2>
<p>React æ˜¯â€œCSS in JSâ€çš„é¼»ç¥–ï¼Œæ ·å¼å†™æ³•çµæ´»å¤šå˜ã€‚æ¥çœ‹å‡ ç§å¸¸è§æ–¹å¼ï¼Œå„æœ‰ä¼˜ç¼ºç‚¹ï¼š</p>
<ol>
<li>
<p><strong>å†…è”æ ·å¼ï¼ˆstyle å¯¹è±¡ï¼‰</strong> â€”â€” æœ€ç®€å•ï¼Œç›´æ¥åœ¨ JSX é‡Œå†™</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;h2 style={{ <span class="hljs-attr">margin</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">"blue"</span> }}&gt;è‡ªå®šä¹‰æ ‡é¢˜&lt;/h2&gt;
</code></pre>
<p>é€‚åˆå¿«é€ŸåŸå‹æˆ–åŠ¨æ€æ ·å¼ï¼ˆæ¯”å¦‚æ ¹æ® props å˜è‰²ï¼‰ã€‚ç¼ºç‚¹ï¼šæ²¡æ³•ç”¨ä¼ªç±»ï¼ˆå¦‚ :hoverï¼‰ï¼Œå†™å¤šäº†å¾ˆä¹±ã€‚</p>
</li>
<li>
<p><strong>å•ç‹¬ CSS æ–‡ä»¶ + className</strong> â€”â€” ä¼ ç»Ÿæ–¹å¼ï¼Œæœ€å¸¸è§ çœ‹ Card.jsx å’Œ Card.cssï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-string">"./Card.css"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Card</span> = (<span class="hljs-params">{ children, className = <span class="hljs-string">""</span> }</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">card</span> ${<span class="hljs-attr">className</span>}`}&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
<p>CSS æ–‡ä»¶é‡Œå†™ï¼š</p>
<pre><code class="hljs language-CSS" lang="CSS"><span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ffffff</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
  <span class="hljs-comment">/* ... */</span>
}

<span class="hljs-selector-class">.card</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">4px</span>);
  <span class="hljs-comment">/* æ‚¬åœæ•ˆæœ */</span>
}
</code></pre>
<p>ä¼˜ç‚¹ï¼šæ”¯æŒæ‰€æœ‰ CSS ç‰¹æ€§ï¼ˆä¼ªç±»ã€åª’ä½“æŸ¥è¯¢ï¼‰ï¼Œæ˜“ç»´æŠ¤ã€‚ç¼ºç‚¹ï¼šç±»åå†²çªé£é™©ï¼ˆå¯ä»¥ç”¨ CSS Modules è§£å†³ï¼‰ã€‚</p>
</li>
<li>
<p><strong>CSS in JSï¼ˆå¯¹è±¡æ ·å¼ï¼‰</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> styles = {
  <span class="hljs-attr">overlay</span>: { <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"rgba(0,0,0,0.5)"</span>, <span class="hljs-comment">/* ... */</span> },
  <span class="hljs-attr">modal</span>: { <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">"white"</span>, <span class="hljs-comment">/* ... */</span> },
};

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{styles.overlay}</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<p>ä¼˜ç‚¹ï¼šæ ·å¼ä½œç”¨åŸŸå¤©ç„¶éš”ç¦»ï¼ŒåŠ¨æ€æ ·å¼è¶…æ–¹ä¾¿ã€‚ç¼ºç‚¹ï¼šè¿è¡Œæ—¶å¼€é”€ç¨å¤§ï¼Œä¼ªç±»æ”¯æŒå·®ï¼ˆéœ€è¦é¢å¤–åº“å¦‚ styled-componentsï¼‰ã€‚</p>
</li>
<li>
<p><strong>å…¶ä»–æµè¡Œæ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>styled-components</strong> æˆ– <strong>emotion</strong>ï¼šå†™æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå…¼é¡¾ä½œç”¨åŸŸå’Œä¼ªç±»ã€‚</li>
<li><strong>Tailwind CSS</strong>ï¼šutility-firstï¼Œç›´æ¥åœ¨ className é‡Œå †ç±»ã€‚</li>
<li><strong>CSS Modules</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ç±»åï¼Œé¿å…å†²çªã€‚</li>
</ul>
</li>
</ol>
<p>ä¸ªäººå»ºè®®ï¼šå°é¡¹ç›®å†…è”æˆ–å•ç‹¬ CSS å¤Ÿç”¨ï¼Œä¸­å¤§å‹é¡¹ç›®æ¨è CSS Modules + Tailwindï¼Œæˆ–è€… styled-componentsã€‚</p>
<h2 data-id="heading-14">æœ€åæ€»ç»“</h2>
<p>props æ˜¯ React çš„çµé­‚ï¼ŒæŒæ¡å®ƒä½ å°±æŒæ¡äº†ç»„ä»¶é€šä¿¡ã€‚é»˜è®¤å€¼ã€ç±»å‹æ£€æŸ¥ã€children è¿™äº›ç»†èŠ‚ç”¨å¥½äº†ï¼Œä»£ç ä¼šä¼˜é›…å¾ˆå¤šã€‚React 19 æŠŠä¸€äº›è€å¤è‘£æ¸…ç†æ‰ï¼Œé¼“åŠ±æˆ‘ä»¬å†™æ›´ç°ä»£çš„ä»£ç ï¼ˆES6 é»˜è®¤ + TSï¼‰ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨å­¦ Reactï¼Œå»ºè®®è‡ªå·±åŠ¨æ‰‹æ­å‡ ä¸ªç»„ä»¶ç©ç© props å’Œ childrenï¼Œæ„Ÿè§‰å®Œå…¨ä¸ä¸€æ ·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»ˆç‚¹ã€å…‰åœˆä¸ Lottie ç”Ÿå‘½å‘¨æœŸï¼šå¤æ‚å…³é—­åŠ¨æ•ˆçš„ã€Œæ”¶å°¾å·¥ç¨‹ã€]]></title>    <link>https://juejin.cn/post/7586582977707474986</link>    <guid>https://juejin.cn/post/7586582977707474986</guid>    <pubDate>2025-12-23T00:55:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586582977707474986" data-draft-id="7586491717874253843" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»ˆç‚¹ã€å…‰åœˆä¸ Lottie ç”Ÿå‘½å‘¨æœŸï¼šå¤æ‚å…³é—­åŠ¨æ•ˆçš„ã€Œæ”¶å°¾å·¥ç¨‹ã€"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-23T00:55:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Archilect"/> <meta itemprop="url" content="https://juejin.cn/user/1505660538979515"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»ˆç‚¹ã€å…‰åœˆä¸ Lottie ç”Ÿå‘½å‘¨æœŸï¼šå¤æ‚å…³é—­åŠ¨æ•ˆçš„ã€Œæ”¶å°¾å·¥ç¨‹ã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1505660538979515/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Archilect
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T00:55:57.000Z" title="Tue Dec 23 2025 00:55:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç»ˆç‚¹ã€å…‰åœˆä¸ Lottie ç”Ÿå‘½å‘¨æœŸï¼šå¤æ‚å…³é—­åŠ¨æ•ˆçš„ã€Œæ”¶å°¾å·¥ç¨‹ã€</h2>
<blockquote>
<p>å…³é”®è¯ï¼šArkUIã€ETSã€Lottieã€Canvasã€ç”Ÿå‘½å‘¨æœŸã€å¥å£®æ€§</p>
</blockquote>
<p>åœ¨å¤šé˜¶æ®µå…³é—­åŠ¨æ•ˆä¸­ï¼Œã€Œä»å“ªå„¿é£å‡ºå»ã€åªæ˜¯å‰åŠç¨‹ï¼›<br/>
<strong>çœŸæ­£è®©ç”¨æˆ·è§‰å¾—è‡ªç„¶çš„ï¼Œæ˜¯ã€Œé£åˆ°å“ªå„¿ã€ä»¥åŠã€Œæ€ä¹ˆåœ¨ç»ˆç‚¹æ”¶å°¾ã€ã€‚</strong></p>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬èšç„¦ä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>ç»ˆç‚¹åŒºåŸŸå¦‚ä½•æŠ½è±¡ä¸ºä¸€ä¸ªé€šç”¨çš„ <code>TargetRect</code>ï¼›</li>
<li>ä» <code>TargetRect</code> æ¨å¯¼å‡º icon çš„ç»ˆç‚¹åæ ‡å’Œå…‰åœˆï¼ˆhaloï¼‰çš„å¤§å°ä¸åç§»ï¼›</li>
<li>Lottie/Canvas åœ¨ ArkUI åœºæ™¯ä¸‹çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¸å¥å£®æ€§è®¾è®¡ã€‚
<em>TL;DRï¼šç”¨ TargetRect æè¿°è½ç‚¹ â†’ ç®—å‡º icon/halo å‚æ•° â†’ æŠŠ Lottie ç”Ÿå‘½å‘¨æœŸä¸äº‹ä»¶å…œåº•ä¸²èµ·æ¥ï¼Œå°±èƒ½è®©å…³é—­åŠ¨ç”»æœ‰ä¸€ä¸ªâ€œæ‰å®çš„è½ç‚¹â€ã€‚</em></li>
</ul>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ç»ˆç‚¹æŠ½è±¡ï¼šTargetRect è€Œä¸æ˜¯ã€ŒæŸä¸šåŠ¡ç»„ä»¶ã€</h3>
<p>åœ¨å…·ä½“ä¸šåŠ¡ä¸­ï¼Œå…³é—­åŠ¨æ•ˆçš„ç»ˆç‚¹å¯èƒ½æ˜¯ï¼š</p>
<ul>
<li>é¦–é¡µæŸä¸ªã€Œå…¥å£å›¾æ ‡ã€ï¼›</li>
<li>åº•éƒ¨ Tab ä¸Šçš„ä¸€ä¸ªæŒ‰é’®ï¼›</li>
<li>é¡µé¢å†…çš„æŸä¸ªå¡ç‰‡æ”¶çº³ä½ã€‚</li>
</ul>
<p>ä½†åœ¨åŠ¨æ•ˆå¼•æ“é‡Œï¼Œæˆ‘ä»¬ä¸æƒ³çŸ¥é“è¿™äº›ç»†èŠ‚ï¼Œåªå¸Œæœ›æ‹¿åˆ°ä¸€ä¸ª<strong>æŠ½è±¡çš„çŸ©å½¢</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TargetRect</span> {
  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>    <span class="hljs-comment">// å·¦ä¸Šè§’ x</span>
  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>    <span class="hljs-comment">// å·¦ä¸Šè§’ y</span>
  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>
}
</code></pre>
<p>å¤–éƒ¨ä¸–ç•Œï¼ˆåŸç”Ÿå±‚/ä¸šåŠ¡ç»„ä»¶ï¼‰é€šè¿‡æŸç§å›è°ƒæŠŠ <code>TargetRect</code> æä¾›ç»™åŠ¨æ•ˆå¼•æ“ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">type</span> <span class="hljs-title class_">TargetResolver</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">TargetRect</span> | <span class="hljs-literal">null</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CloseAnimationEngine</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> resolveTarget: TargetResolver</span>) {}

  <span class="hljs-title function_">initTargetArea</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> rect = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolveTarget</span>()
    <span class="hljs-keyword">if</span> (!rect || rect.<span class="hljs-property">width</span> &lt;= <span class="hljs-number">0</span> || rect.<span class="hljs-property">height</span> &lt;= <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// éæ³•å‚æ•°ï¼Œåç»­èµ°å…œåº•å…³é—­</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">markTargetInvalid</span>()
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// åç»­åŸºäº rect è®¡ç®—ç»ˆç‚¹å’Œå…‰åœˆ</span>
  }
}
</code></pre>
<blockquote>
<p>è®¾è®¡è¦ç‚¹ï¼š</p>
<ul>
<li>åŠ¨æ•ˆå¼•æ“åªæ¥æ”¶ <code>TargetRect</code>ï¼Œä¸ç›´æ¥ä¾èµ–ä»»ä½•å…·ä½“ç»„ä»¶æˆ–ä¸šåŠ¡å­—æ®µï¼›</li>
<li>å‚æ•°åœ¨å…¥å£å¤„å°±åšå®Œæ ¡éªŒï¼Œåç»­é€»è¾‘åªå¤„ç†ã€Œåˆæ³•çš„çŸ©å½¢ã€æˆ–ã€Œæ— ç»ˆç‚¹ï¼ˆèµ°å…œåº•ï¼‰ã€ä¸¤ç§æƒ…å†µã€‚</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€ä» TargetRect åˆ° icon ç»ˆç‚¹ï¼šä¸­å¿ƒå¯¹é½ä¸ç¼©æ”¾åçš„å°ºå¯¸</h3>
<p>å‡è®¾æˆ‘ä»¬æœ€ç»ˆè¦è®©ä¸€ä¸ªç¼©å°åçš„å¼¹çª—å†…å®¹ï¼ˆæˆ–è€…ç‹¬ç«‹ iconï¼‰è½åœ¨ <code>TargetRect</code> ä¸­å¤®ï¼›<br/>
å¹¶ä¸”è¿™ä¸ª icon æœ¬èº«ä¹Ÿä¼šæœ‰ä¸€ä¸ªç¼©æ”¾æ¯”ä¾‹ <code>finalScale</code>ï¼ˆä¾‹å¦‚ 0.3ï¼‰ï¼Œå¯¹åº”æŸä¸ªå®¹å™¨å®½é«˜ <code>contentWidth/Height</code>ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›ï¼š</p>
<ul>
<li>icon ç¼©æ”¾åçš„è§†è§‰çŸ©å½¢ï¼Œåˆšå¥½å±…ä¸­æ”¾åœ¨ <code>TargetRect</code> ä¸­ï¼›</li>
<li>å³ä½¿ <code>TargetRect</code> å¾ˆå°ï¼Œicon ä¹Ÿä¸ä¼šå¤ªå°çœ‹ä¸è§ï¼ˆè¿™ä¸€ç‚¹å¯äº¤ç»™ä¸šåŠ¡é…ç½®å…œåº•ï¼‰ã€‚</li>
</ul>
<p>ä¸­å¿ƒå¯¹é½çš„è®¡ç®—å¯ä»¥å†™æˆï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">computeIconEndPosition</span>(<span class="hljs-params">
  rect: TargetRect,
  contentSize: { width: <span class="hljs-built_in">number</span>; height: <span class="hljs-built_in">number</span> },
  finalScale: <span class="hljs-built_in">number</span>,
</span>): { <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span> } {
  <span class="hljs-keyword">const</span> scaledWidth = contentSize.<span class="hljs-property">width</span> * finalScale
  <span class="hljs-keyword">const</span> scaledHeight = contentSize.<span class="hljs-property">height</span> * finalScale

  <span class="hljs-keyword">const</span> offsetX = (rect.<span class="hljs-property">width</span> - scaledWidth) / <span class="hljs-number">2</span>
  <span class="hljs-keyword">const</span> offsetY = (rect.<span class="hljs-property">height</span> - scaledHeight) / <span class="hljs-number">2</span>

  <span class="hljs-keyword">const</span> endX = rect.<span class="hljs-property">x</span> + offsetX
  <span class="hljs-keyword">const</span> endY = rect.<span class="hljs-property">y</span> + offsetY

  <span class="hljs-keyword">return</span> { <span class="hljs-attr">x</span>: endX, <span class="hljs-attr">y</span>: endY }
}
</code></pre>
<p>è¿™åªè§£å†³äº†ã€Œç¼©æ”¾åçŸ©å½¢å’Œç›®æ ‡çŸ©å½¢ä¸­å¿ƒå¯¹é½ã€çš„é—®é¢˜ã€‚<br/>
ç»“åˆä¸Šä¸€ç¯‡çš„ç¼©æ”¾åç§»ä¿®æ­£ï¼Œæˆ‘ä»¬ä¼šè¿›ä¸€æ­¥æŠŠè¿™ä¸ª <code>endX/endY</code> è¾“å…¥åˆ° <code>applyScaleOffset</code> ä¸­ï¼Œå¾—åˆ°æœ€ç»ˆä¾› <code>motionPath</code> ä½¿ç”¨çš„ç»ˆç‚¹åæ ‡ã€‚</p>
<p>é€»è¾‘é“¾æ¡å¯ä»¥ç”¨ mermaid ç®€å•è¡¨ç¤ºä¸ºï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
  A[TargetRect(x,y,w,h)] --&gt; B[iconç¼©æ”¾å°ºå¯¸&lt;br/&gt;scaledW,scaledH]
  B --&gt; C[ä¸­å¿ƒå¯¹é½&lt;br/&gt;endX = x + (w - scaledW)/2]
  C --&gt; D[ç¼©æ”¾åç§»ä¿®æ­£&lt;br/&gt;feed into motionPath endPoint]
</code></pre>
<blockquote>
<p>è‹¥å¹³å°ä¸æ”¯æŒ mermaidï¼Œå¯å¤åˆ¶åˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fmermaid.live" target="_blank" title="https://mermaid.live" ref="nofollow noopener noreferrer">mermaid.live</a> æŸ¥çœ‹ç¤ºæ„ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€å…‰åœˆï¼ˆHaloï¼‰ï¼šæ—¢è¦åŒ…ä½ç›®æ ‡ï¼Œåˆä¸èƒ½å°å¾—çœ‹ä¸è§</h3>
<p>åœ¨ç»ˆç‚¹ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªã€Œå…‰åœˆæ”¶å°¾ã€ï¼š</p>
<ul>
<li>å…‰åœˆä»¥ icon ä¸ºä¸­å¿ƒï¼›</li>
<li>å…‰åœˆçš„ç›´å¾„è‡³å°‘è¦è¦†ç›– <code>TargetRect</code>ï¼›</li>
<li>åŒæ—¶ä¸èƒ½å°äºä¸€ä¸ªè§†è§‰å…œåº•å€¼ï¼ˆä¾‹å¦‚ 132vpï¼‰ã€‚</li>
</ul>
<p>å› æ­¤å¯ä»¥è¿™æ ·è®¡ç®—ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">computeHalo</span>(<span class="hljs-params">
  rect: TargetRect,
  contentSize: { width: <span class="hljs-built_in">number</span>; height: <span class="hljs-built_in">number</span> },
  finalScale: <span class="hljs-built_in">number</span>,
  minDiameter: <span class="hljs-built_in">number</span>,
</span>) {
  <span class="hljs-keyword">const</span> scaledWidth = contentSize.<span class="hljs-property">width</span> * finalScale
  <span class="hljs-keyword">const</span> scaledHeight = contentSize.<span class="hljs-property">height</span> * finalScale

  <span class="hljs-keyword">const</span> haloDiameter = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(rect.<span class="hljs-property">width</span>, rect.<span class="hljs-property">height</span>, minDiameter)

  <span class="hljs-comment">// ä¸ºäº†è®©haloä¸­å¿ƒå¯¹é½iconï¼Œéœ€è¦åœ¨æ¸²æŸ“æ—¶åšä¸€ä¸ªåç§»</span>
  <span class="hljs-keyword">const</span> haloOffsetX = -(haloDiameter - scaledWidth) / <span class="hljs-number">2</span>
  <span class="hljs-keyword">const</span> haloOffsetY = -(haloDiameter - scaledHeight) / <span class="hljs-number">2</span>

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">diameter</span>: haloDiameter,
    <span class="hljs-attr">offsetX</span>: haloOffsetX,
    <span class="hljs-attr">offsetY</span>: haloOffsetY,
  }
}
</code></pre>
<p>åœ¨æ¸²æŸ“å±‚ï¼ˆæ¯”å¦‚ä¸€ä¸ª Canvas å®¹å™¨ï¼‰ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title class_">Canvas</span>(haloCanvasContext)
  .<span class="hljs-title function_">size</span>({ <span class="hljs-attr">width</span>: halo.<span class="hljs-property">diameter</span>, <span class="hljs-attr">height</span>: halo.<span class="hljs-property">diameter</span> })
  .<span class="hljs-title function_">offset</span>({ <span class="hljs-attr">x</span>: halo.<span class="hljs-property">offsetX</span>, <span class="hljs-attr">y</span>: halo.<span class="hljs-property">offsetY</span> })
</code></pre>
<p>é…åˆä¸Šä¸€èŠ‚çš„ icon ç»ˆç‚¹åæ ‡ï¼Œæ•´ä½“æ•ˆæœå°±æ˜¯ï¼š</p>
<ul>
<li>icon è½åœ¨ <code>TargetRect</code> ä¸­å¿ƒï¼›</li>
<li>å…‰åœˆä»¥ icon ä¸ºä¸­å¿ƒæ‰©æ•£ï¼Œç›´å¾„è‡³å°‘è¦†ç›–ç›®æ ‡åŒºåŸŸï¼›</li>
<li>åœ¨å°ç›®æ ‡ä¸Šä»æœ‰è¶³å¤Ÿçš„è§†è§‰å­˜åœ¨æ„Ÿã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">å››ã€å½¢æ€åˆ‡æ¢ï¼šdialog â†’ icon â†’ lottie</h3>
<p>åœ¨å…³é—­åŠ¨æ•ˆè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæœ‰ä¸‰ç§å½¢æ€ï¼š</p>
<ul>
<li><code>dialog</code>ï¼šåŸå§‹å¼¹çª—å½¢æ€ï¼ˆçŸ©å½¢å¡ç‰‡ï¼‰ï¼›</li>
<li><code>icon</code>ï¼šç¼©å°åçš„å›¾æ ‡å½¢æ€ï¼›</li>
<li><code>lottie</code>ï¼šç»ˆç‚¹å…‰åœˆå½¢æ€ï¼ˆç”± Lottie æ’­æ”¾ï¼‰ã€‚</li>
</ul>
<p>åœ¨ ArkUI è¿™ç±»å£°æ˜å¼ UI æ¡†æ¶ä¸­ï¼Œæ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯ï¼š</p>
<ul>
<li>åœ¨ UI å±‚ç”¨ä¸€ä¸ª <code>form</code> çŠ¶æ€æè¿°å½“å‰å½¢æ€ï¼›</li>
<li>ç”¨ <code>if/else</code> æˆ– <code>switch</code> å†³å®šå½“å‰éœ€è¦æ¸²æŸ“å“ªä¸ªå­æ ‘ï¼›</li>
<li>åœ¨åŠ¨æ•ˆå¼•æ“ä¸­åªä¿®æ”¹ <code>form</code>ï¼Œè€Œä¸ç›´æ¥æ“æ§å…·ä½“ UI ç»„ä»¶ã€‚</li>
</ul>
<p>ä¼ªä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// çŠ¶æ€</span>
<span class="hljs-meta">@State</span> <span class="hljs-attr">form</span>: <span class="hljs-string">'dialog'</span> | <span class="hljs-string">'icon'</span> | <span class="hljs-string">'lottie'</span> = <span class="hljs-string">'dialog'</span>

<span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
  <span class="hljs-title class_">Column</span>() {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">form</span> === <span class="hljs-string">'dialog'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildDialogContent</span>()
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">form</span> === <span class="hljs-string">'icon'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildIcon</span>()
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">form</span> === <span class="hljs-string">'lottie'</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildHalo</span>()
    }
  }
}
</code></pre>
<p>åœ¨åŠ¨æ•ˆå¼•æ“é‡Œï¼Œå½¢æ€åˆ‡æ¢å¤§è‡´æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ç¼©å°å®Œæˆååˆ‡æ¢åˆ° icon å½¢æ€</span>
stepMap.<span class="hljs-property">switchToIcon</span> = {
  <span class="hljs-attr">change</span>: <span class="hljs-function">() =&gt;</span> {
    state.<span class="hljs-property">form</span> = <span class="hljs-string">'icon'</span>
  },
  <span class="hljs-attr">animateParam</span>: { <span class="hljs-attr">duration</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">onFinish</span>: <span class="hljs-function">() =&gt;</span> stepper.<span class="hljs-title function_">start</span>([<span class="hljs-string">'wobbleIcon'</span>]) },
}

<span class="hljs-comment">// æŠ›æ·å®Œæˆåï¼Œå¦‚æœéœ€è¦å…‰åœˆï¼Œåˆ™åˆ‡æ¢åˆ° lottie å½¢æ€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onThrowFinished</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (config.<span class="hljs-property">enableHalo</span>) {
    state.<span class="hljs-property">form</span> = <span class="hljs-string">'lottie'</span>
    <span class="hljs-comment">// æ›´æ–°å®¹å™¨å°ºå¯¸ä¸ºhaloç›´å¾„ï¼Œé‡ç½®scaleç­‰</span>
    state.<span class="hljs-property">containerSize</span> = halo.<span class="hljs-property">diameter</span>
    state.<span class="hljs-property">scale</span> = <span class="hljs-number">1</span>
  } <span class="hljs-keyword">else</span> {
    events.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'closeAnimationFinished'</span>)
  }
}
</code></pre>
<p>è¿™æ ·å¯ä»¥ç¡®ä¿ï¼š</p>
<ul>
<li>UI ç»“æ„å¯¹å½¢æ€é«˜åº¦æ•æ„Ÿï¼šå“ªç§å½¢æ€å°±æ¸²æŸ“å“ªç§å­æ ‘ï¼Œä¸ä¼šã€Œæ®‹ç•™ã€ï¼›</li>
<li>åŠ¨æ•ˆå¼•æ“åªä¿®æ”¹çŠ¶æ€ï¼ŒUI æ¸²æŸ“ç”±æ¡†æ¶æ¥ç®¡ï¼Œç¬¦åˆå£°æ˜å¼èŒƒå¼ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">äº”ã€Lottie + Canvasï¼šåœ¨ ArkUI ä¸­ç®¡ç†åŠ¨ç”»èµ„æº</h3>
<p>å…‰åœˆæœ¬èº«é€šå¸¸æ˜¯é€šè¿‡ Lottie å®ç°çš„ï¼ŒArkUI æä¾›äº†åŸºäº Canvas æ¸²æŸ“ Lottie çš„èƒ½åŠ›ã€‚<br/>
ä¸€ä¸ªé€šç”¨çš„åšæ³•æ˜¯ï¼š</p>
<ul>
<li>åœ¨ UI å±‚ç”¨ä¸€ä¸ª Canvas ç»„ä»¶ä½œä¸ºå®¹å™¨ï¼›</li>
<li>åœ¨ Canvas <code>onReady</code> æ—¶åˆå§‹åŒ– Lottie åŠ¨ç”»ï¼›</li>
<li>åœ¨ Canvas <code>onDisappear</code> æ—¶é”€æ¯ Lottie å®ä¾‹ã€‚</li>
</ul>
<p>ä¼ªä»£ç ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-meta">@Builder</span>
<span class="hljs-title function_">buildHalo</span>(<span class="hljs-params"/>) {
  <span class="hljs-title class_">Canvas</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">haloCanvasContext</span>)
    .<span class="hljs-title function_">size</span>({ <span class="hljs-attr">width</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">halo</span>.<span class="hljs-property">diameter</span>, <span class="hljs-attr">height</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">halo</span>.<span class="hljs-property">diameter</span> })
    .<span class="hljs-title function_">offset</span>({ <span class="hljs-attr">x</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">halo</span>.<span class="hljs-property">offsetX</span>, <span class="hljs-attr">y</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">halo</span>.<span class="hljs-property">offsetY</span> })
    .<span class="hljs-title function_">onReady</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initHaloLottie</span>())
    .<span class="hljs-title function_">onDisAppear</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">destroyHaloLottie</span>())
}
</code></pre>
<p>å¯¹åº”çš„ Lottie ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">initHaloLottie</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> sourcePath = <span class="hljs-string">'halo.json'</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">rawContent</span>: <span class="hljs-title class_">Uint8Array</span> | <span class="hljs-literal">undefined</span>

  <span class="hljs-keyword">try</span> {
    rawContent = uiContext.<span class="hljs-title function_">getHostContext</span>()?.<span class="hljs-property">resourceManager</span>.<span class="hljs-title function_">getRawFileContentSync</span>(sourcePath)
  } <span class="hljs-keyword">catch</span> (error) {
    logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to load halo lottie file'</span>, error)
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emitCloseFinished</span>() <span class="hljs-comment">// èµ„æºå¼‚å¸¸æ—¶ç›´æ¥å…œåº•å…³é—­</span>
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-keyword">const</span> jsonText = <span class="hljs-title class_">TextDecoder</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'utf-8'</span>).<span class="hljs-title function_">decodeToString</span>(rawContent)
  <span class="hljs-keyword">const</span> animationData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(jsonText)

  <span class="hljs-comment">// é¿å…é‡å¤å®ä¾‹</span>
  lottie.<span class="hljs-title function_">destroy</span>(<span class="hljs-string">'halo'</span>)

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationItem</span> = lottie.<span class="hljs-title function_">loadAnimation</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'halo'</span>,
    animationData,
    <span class="hljs-attr">container</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">haloCanvasContext</span>,
    <span class="hljs-attr">renderer</span>: <span class="hljs-string">'canvas'</span>,
    <span class="hljs-attr">autoplay</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">loop</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">frameRate</span>: <span class="hljs-number">60</span>,
  })

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationItem</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'complete'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emitCloseFinished</span>()
  })
}

<span class="hljs-title function_">destroyHaloLottie</span>(<span class="hljs-params"/>) {
  lottie.<span class="hljs-title function_">destroy</span>(<span class="hljs-string">'halo'</span>)
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">animationItem</span> = <span class="hljs-literal">undefined</span>
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>æ¯æ¬¡åŠ è½½å‰å…ˆ <code>destroy</code> åŒåå®ä¾‹ï¼Œé¿å…é‡å¤å ç”¨èµ„æºï¼›</li>
<li>Lottie ç”Ÿå‘½å‘¨æœŸä¸ Canvas ç”Ÿå‘½å‘¨æœŸä¸¥æ ¼ç»‘å®šï¼ŒCanvas æ¶ˆå¤±æ—¶å¿…é¡»é”€æ¯åŠ¨ç”»ï¼›</li>
<li>complete äº‹ä»¶è§¦å‘å…³é—­å®Œæˆä¿¡å·ï¼Œè¶…æ—¶å…œåº•ï¼ˆè§ä¸‹ä¸€èŠ‚ï¼‰åˆ™ä½œä¸º backupã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">å…­ã€å¥å£®æ€§è®¾è®¡ï¼šä¸€æ¬¡æ€§äº‹ä»¶ã€éæ³•å‚æ•°ã€è¶…æ—¶å…œåº•</h3>
<p>å¤æ‚åŠ¨æ•ˆæœ€æ€•çš„ä¸æ˜¯ã€Œä¸å¤Ÿç‚«ã€ï¼Œè€Œæ˜¯ã€Œå‡ºé—®é¢˜æ—¶æŠŠç”¨æˆ·å¡æ­»åœ¨åŠè·¯ã€ã€‚<br/>
ä¸ºäº†è®©å…³é—­åŠ¨æ•ˆå¯é å¯æ§ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡æ—¶åˆ»æ„åšäº†å‡ ä»¶ã€Œé˜²å¾¡æ€§ç¼–ç¨‹ã€çš„äº‹æƒ…ï¼š</p>
<h4 data-id="heading-7">1. TargetRect ä¸¥æ ¼æ ¡éªŒ</h4>
<p>åœ¨ <code>resolveTarget</code> è¿”å›å€¼å…¥å£å¤„å°±åšå®Œæ‰€æœ‰åˆæ³•æ€§æ ¡éªŒï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> rect = <span class="hljs-title function_">resolveTarget</span>()
<span class="hljs-keyword">if</span> (!rect || rect.<span class="hljs-property">width</span> &lt;= <span class="hljs-number">0</span> || rect.<span class="hljs-property">height</span> &lt;= <span class="hljs-number">0</span>) {
  logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Invalid target rect, fallback to simple close'</span>)
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">useWhirlwind</span> = <span class="hljs-literal">false</span>   <span class="hljs-comment">// æˆ–è€…æ ‡è®°ä¸ºæ— ç»ˆç‚¹</span>
}
</code></pre>
<p>è¿™æ ·åç»­æ‰€æœ‰è®¡ç®—éƒ½å¯ä»¥å‡å®š <code>TargetRect</code> æ˜¯åˆæ³•çš„ï¼Œä¸å¿…åœ¨å„å¤„é‡å¤åˆ¤ç©ºã€‚</p>
<h4 data-id="heading-8">2. åŠ¨æ•ˆå¼€å§‹äº‹ä»¶ä¸€æ¬¡æ€§æ¶ˆè´¹</h4>
<p>æ— è®ºæ˜¯ä»åŸç”Ÿå±‚è¿˜æ˜¯ä¸šåŠ¡å±‚å‘å‡ºçš„ã€Œå¼€å§‹å…³é—­åŠ¨æ•ˆã€ä¿¡å·ï¼Œéƒ½å»ºè®®ï¼š</p>
<ul>
<li>ç”¨ä¸€æ¬¡æ€§è®¢é˜…ï¼ˆä¾‹å¦‚ <code>emitter.once</code>ï¼‰ï¼Œé˜²æ­¢ä¸€æ®µç”Ÿå‘½å‘¨æœŸå†…å¤šæ¬¡è§¦å‘ï¼›</li>
<li>æˆ–è€…åœ¨åŠ¨æ•ˆå¼•æ“é‡ŒåŠ ä¸€ä¸ªã€Œè¿è¡Œä¸­ã€çŠ¶æ€æ ‡è®°ï¼Œå¿½ç•¥åç»­é‡å¤è§¦å‘ã€‚</li>
</ul>
<pre><code class="hljs language-ts" lang="ts">emitter.<span class="hljs-title function_">once</span>(<span class="hljs-string">'CLOSE_ANIMATION_START'</span>, <span class="hljs-function">(<span class="hljs-params">payload: CloseAnimPayload</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">canRunWhirlwind</span>(payload)) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emitCloseFinished</span>()
    <span class="hljs-keyword">return</span>
  }
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startWithPayload</span>(payload)
})
</code></pre>
<h4 data-id="heading-9">3. è¶…æ—¶å…œåº•ï¼šæ°¸è¿œä¿è¯å¼¹çª—èƒ½è¢«å…³é—­</h4>
<p>å³ä½¿æˆ‘ä»¬åšäº†å®Œæ•´çš„ complete ç›‘å¬ï¼Œä¹Ÿéš¾ä»¥é¿å…ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li>Lottie å†…éƒ¨å¼‚å¸¸ï¼Œcomplete ä¸è§¦å‘ï¼›</li>
<li>Canvas æå‰é”€æ¯ï¼›</li>
<li>æŸä¸ªé˜¶æ®µè¢«å¤–éƒ¨æ‰“æ–­ã€‚</li>
</ul>
<p>å› æ­¤åœ¨å¼€å§‹å…³é—­åŠ¨æ•ˆæ—¶ï¼Œå¯ä»¥åŒæ—¶å¯åŠ¨ä¸€ä¸ªã€Œå®‰å…¨å®šæ—¶å™¨ã€ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">startSafeTimeout</span>(<span class="hljs-params"/>) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">closed</span>) {
      logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Close animation timeout, force close'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emitCloseFinished</span>()
    }
  }, <span class="hljs-number">3000</span>) <span class="hljs-comment">// 3ç§’å…œåº•</span>
}
</code></pre>
<p>è¿™æ ·å¯ä»¥ä¿è¯ï¼š<br/>
<strong>æ— è®ºå‘ç”Ÿä»€ä¹ˆï¼Œç”¨æˆ·æœ€å¤šç­‰å¾…ä¸€ä¸ªå›ºå®šçš„æ—¶é—´çª—å£ï¼Œå¼¹çª—ä¸€å®šä¼šè¢«å…³é—­ã€‚</strong></p>
<hr/>
<h3 data-id="heading-10">ä¸ƒã€å°ç»“</h3>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬è®²çš„éƒ½æ˜¯ã€Œæ”¶å°¾å·¥ç¨‹ã€ï¼š</p>
<ul>
<li>æŠŠç»ˆç‚¹æŠ½è±¡ä¸ºä¸€ä¸ª <code>TargetRect</code>ï¼Œä¸å…·ä½“ä¸šåŠ¡ç»„ä»¶è§£è€¦ï¼›</li>
<li>ä» <code>TargetRect</code> æ¨å¯¼å‡º icon ç»ˆç‚¹å’Œå…‰åœˆï¼ˆhaloï¼‰çš„å°ºå¯¸ä¸åç§»ï¼Œç¡®ä¿è§†è§‰ä¸Šã€Œæ‰“å¾—å‡†ã€ä¸”ã€ŒåŒ…å¾—ä½ã€ï¼›</li>
<li>åœ¨ ArkUI ä¸­é€šè¿‡ Canvas + Lottie å®ç°å…‰åœˆåŠ¨ç”»ï¼Œå¹¶ä½¿ç”¨ä¸¥æ ¼çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ä¿è¯èµ„æºå¯æ§ï¼›</li>
<li>é€šè¿‡ä¸€æ¬¡æ€§äº‹ä»¶è®¢é˜…ã€å‚æ•°æ ¡éªŒå’Œè¶…æ—¶å…œåº•ï¼Œè®©å¤æ‚åŠ¨æ•ˆåœ¨å¼‚å¸¸æƒ…å†µä¸‹ä»ç„¶å®‰å…¨å…³é—­ã€‚</li>
</ul>
<p>åˆ°è¿™é‡Œï¼ŒWhirlwind å¼å…³é—­åŠ¨æ•ˆçš„æŠ€æœ¯ç»†èŠ‚åŸºæœ¬å®Œæ•´äº†ï¼š<br/>
æ—¶é—´è½´ä¸Šæœ‰ AnimationStepper ç¼–æ’ï¼Œç©ºé—´ä¸Šæœ‰åŒå±‚å®¹å™¨å’Œå‡ ä½•ä¿®æ­£ï¼Œç»ˆç‚¹æœ‰ç²¾ç¡®çš„ç›®æ ‡æ˜ å°„å’Œå…‰åœˆæ”¶å°¾ã€‚</p>
<p>åœ¨æœ€åä¸€ç¯‡ã€Šæ€§èƒ½ &amp; å·¥ç¨‹åŒ–ç¯‡ã€‹ä¸­ï¼Œæˆ‘ä»¬ä¼šç«™åˆ°æ›´é«˜ä¸€å±‚ï¼Œä»æ€§èƒ½ã€åŸ‹ç‚¹ã€ç°åº¦ã€é…ç½®å’Œèµ„æºç®¡ç†ç­‰è§’åº¦ï¼Œè®¨è®ºå¦‚ä½•æŠŠè¿™ç§å¤æ‚åŠ¨æ•ˆåšæˆã€Œå¯ä»¥é•¿æœŸæ¼”è¿›ã€çš„å·¥ç¨‹èƒ½åŠ›ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§çš„ Demoã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[neståˆä½“éªŒ-ç”¨nestå®ç°ä¸€ä¸ªç®€å•çš„CRUDåŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7586559672129126452</link>    <guid>https://juejin.cn/post/7586559672129126452</guid>    <pubDate>2025-12-23T01:13:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586559672129126452" data-draft-id="7582863493260427316" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="neståˆä½“éªŒ-ç”¨nestå®ç°ä¸€ä¸ªç®€å•çš„CRUDåŠŸèƒ½"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2025-12-23T01:13:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jun_ä¸è§"/> <meta itemprop="url" content="https://juejin.cn/user/3263006244609502"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            neståˆä½“éªŒ-ç”¨nestå®ç°ä¸€ä¸ªç®€å•çš„CRUDåŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3263006244609502/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jun_ä¸è§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T01:13:37.000Z" title="Tue Dec 23 2025 01:13:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">nestç®€ä»‹</h2>
<p>Nestæ˜¯ä¸€ä¸ªç”¨äºæ„å»ºé«˜æ•ˆã€å¯æ‰©å±•çš„NodeæœåŠ¡å™¨ç«¯åº”ç”¨æ¡†æ¶ã€‚å®ƒé»˜è®¤ä½¿ç”¨Expressä½œä¸ºHTTPæœåŠ¡ç«¯æ¡†æ¶ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ”¯æŒFastifyä½œä¸ºæ›¿ä»£ï¼Œä½¿ç”¨TypeScriptæ„å»ºå¹¶å…¨é¢æ”¯æŒ TypeScriptï¼ŒåŒæ—¶ä»å…è®¸å¼€å‘è€…ä½¿ç”¨çº¯ JavaScript ç¼–ç ï¼Œèåˆäº† OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰ã€FPï¼ˆå‡½æ•°å¼ç¼–ç¨‹ï¼‰å’Œ FRPï¼ˆå‡½æ•°å“åº”å¼ç¼–ç¨‹ï¼‰ç­‰å…ƒç´ ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³ä¼ ç»Ÿ Node.js æ¡†æ¶ï¼ˆå¦‚ Express/Koaï¼‰ç¼ºä¹ç»Ÿä¸€æ¶æ„è§„èŒƒã€å¤§å‹é¡¹ç›®ä»£ç æ˜“æ··ä¹±çš„é—®é¢˜ã€‚</p>
<p>NestJS é‡‡ç”¨äº†ä¸€ç§æ¸…æ™°çš„<strong>ä¸‰å±‚ç»“æ„</strong>æ¥ç»„ç»‡åº”ç”¨é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯MVCç»“æ„ã€‚</p>
<h3 data-id="heading-1">1. æ¨¡å— (Modules)</h3>
<ul>
<li>
<p><strong>ä½œç”¨ï¼š</strong> æ¨¡å—æ˜¯ NestJS åº”ç”¨çš„<strong>åŸºæœ¬ç»„ç»‡å•å…ƒ</strong>ã€‚å®ƒä»¬æ˜¯å…·æœ‰ <code>@Module()</code> è£…é¥°å™¨çš„ç±»ï¼Œç”¨äºå°†åº”ç”¨çš„ä¸åŒåŠŸèƒ½å’Œç‰¹æ€§ï¼ˆå¦‚ç”¨æˆ·ç®¡ç†ã€è®¢å•å¤„ç†ç­‰ï¼‰é€»è¾‘ä¸Šåˆ’åˆ†ä¸ºç‹¬ç«‹çš„ã€å¯é‡ç”¨çš„éƒ¨åˆ†ã€‚</p>
</li>
<li>
<p><strong>èŒè´£ï¼š</strong> æ¨¡å—è´Ÿè´£<strong>ç»„åˆ</strong>æ§åˆ¶å™¨å’ŒæœåŠ¡ï¼ˆæä¾›è€…ï¼‰ï¼Œå¹¶å®šä¹‰ä¸€ç»„åŠŸèƒ½ã€‚æ¯ä¸ªåº”ç”¨è‡³å°‘æœ‰ä¸€ä¸ª<strong>æ ¹æ¨¡å—ï¼ˆRoot Moduleï¼‰</strong> ã€‚</p>
</li>
<li>
<p><strong>å…³é”®å±æ€§ï¼š</strong></p>
<ul>
<li><code>controllers</code>: å±äºæœ¬æ¨¡å—çš„<strong>æ§åˆ¶å™¨</strong>ã€‚</li>
<li><code>providers</code>: å±äºæœ¬æ¨¡å—çš„<strong>æœåŠ¡</strong>ã€ä»“åº“ã€å·¥å‚ç­‰ï¼ˆç»Ÿç§°ä¸º<strong>æä¾›è€…</strong>ï¼‰ã€‚</li>
<li><code>imports</code>: å¯¼å…¥<strong>å…¶ä»–æ¨¡å—</strong>ï¼Œä»¥ä¾¿ä½¿ç”¨å®ƒä»¬å¯¼å‡ºçš„æä¾›è€…ã€‚</li>
<li><code>exports</code>: å¯¼å‡ºæœ¬æ¨¡å—çš„æä¾›è€…ï¼Œä¾›<strong>å…¶ä»–æ¨¡å—</strong>å¯¼å…¥ä½¿ç”¨ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">2. æ§åˆ¶å™¨ (Controllers)</h3>
<ul>
<li><strong>ä½œç”¨ï¼š</strong> æ§åˆ¶å™¨è´Ÿè´£å¤„ç†<strong>ä¼ å…¥çš„è¯·æ±‚</strong>å’Œè¿”å›<strong>å“åº”</strong>ã€‚å®ƒä»¬ä½œä¸ºåº”ç”¨çš„å…¥å£ç‚¹ã€‚</li>
<li><strong>èŒè´£ï¼š</strong> å®ƒä»¬ä½¿ç”¨ <code>@Controller()</code> è£…é¥°å™¨å®šä¹‰è·¯ç”±è·¯å¾„ï¼Œå¹¶ä½¿ç”¨ <code>@Get()</code>, <code>@Post()</code>, <code>@Put()</code>, <code>@Delete()</code> ç­‰è£…é¥°å™¨æ¥å¤„ç†ç‰¹å®šçš„ HTTP æ–¹æ³•ã€‚æ§åˆ¶å™¨é€šå¸¸åªåŒ…å«è·¯ç”±é€»è¾‘ï¼Œå¹¶å°†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘<strong>å§”æ‰˜</strong>ç»™æœåŠ¡ï¼ˆæä¾›è€…ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-3">3. æä¾›è€… (Providers / Services)</h3>
<ul>
<li><strong>ä½œç”¨ï¼š</strong> æä¾›è€…æ˜¯ NestJS ä¸­<strong>æœ€æ ¸å¿ƒ</strong>çš„æ¦‚å¿µä¹‹ä¸€ï¼Œç”¨äºå¤„ç†<strong>ä¸šåŠ¡é€»è¾‘</strong>å’Œæ•°æ®æŒä¹…åŒ–ã€‚</li>
<li><strong>èŒè´£ï¼š</strong> å®ƒä»¬æ˜¯å¯æ³¨å…¥ï¼ˆInjectableï¼‰çš„ç±»ï¼Œé€šå¸¸åŒ…å«å¤æ‚çš„é€»è¾‘ã€æ•°æ®åº“äº¤äº’ã€å¤–éƒ¨ API è°ƒç”¨ç­‰ã€‚å®ƒä»¬ä½¿ç”¨ <code>@Injectable()</code> è£…é¥°å™¨ï¼Œå¹¶ç”± NestJS çš„<strong>ä¾èµ–æ³¨å…¥ç³»ç»Ÿ</strong>æ¥ç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸå’Œä¾èµ–å…³ç³»ã€‚</li>
<li><strong>å¸¸è§ç±»å‹ï¼š</strong> æœåŠ¡ï¼ˆServicesï¼‰ã€ä»“åº“ï¼ˆRepositoriesï¼‰ã€å·¥å‚ï¼ˆFactoriesï¼‰ã€è¾…åŠ©å‡½æ•°ç­‰ã€‚</li>
</ul>
<h2 data-id="heading-4">æ¶æ„æ”¯æ’‘æ¨¡å—ï¼ˆé€šè¿‡è£…é¥°å™¨å®ç°ï¼‰</h2>
<p>è¿™äº›ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„â€œæ¨¡å—ç±»â€ï¼Œè€Œæ˜¯ NestJS ç”¨æ¥å¢å¼ºåŠŸèƒ½å’Œæ§åˆ¶åº”ç”¨è¡Œä¸ºçš„<strong>æ¶æ„ç»„ä»¶</strong>ï¼š</p>








































<table><thead><tr><th><strong>æ¨¡å—/æ¦‚å¿µ</strong></th><th><strong>è£…é¥°å™¨</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td><strong>ä¾èµ–æ³¨å…¥ (DI)</strong></td><td><code>@Injectable()</code></td><td>ç®¡ç†æä¾›è€…çš„ç”Ÿå‘½å‘¨æœŸï¼Œè‡ªåŠ¨è§£å†³ç»„ä»¶é—´çš„ä¾èµ–å…³ç³»ï¼Œå®ç°<strong>æ¾æ•£è€¦åˆ</strong>ã€‚</td></tr><tr><td><strong>ä¸­é—´ä»¶ (Middleware)</strong></td><td>N/A (é€šè¿‡ <code>MiddlewareConsumer</code>)</td><td>åœ¨æ§åˆ¶å™¨å¤„ç†è¯·æ±‚ä¹‹å‰æ‰§è¡Œçš„å‡½æ•°ï¼Œç”¨äºèº«ä»½éªŒè¯ã€æ—¥å¿—è®°å½•ç­‰ã€‚</td></tr><tr><td><strong>å®ˆå« (Guards)</strong></td><td><code>@Injectable()</code>, <code>@UseGuards()</code></td><td>åœ¨è¯·æ±‚è¿›å…¥æ§åˆ¶å™¨æ–¹æ³•<strong>ä¹‹å‰</strong>æ‰§è¡Œï¼Œç”¨äºæˆæƒï¼ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒè®¿é—®æ­¤è·¯ç”±ï¼‰ã€‚</td></tr><tr><td><strong>æ‹¦æˆªå™¨ (Interceptors)</strong></td><td><code>@Injectable()</code>, <code>@UseInterceptors()</code></td><td>æ‹¦æˆª<strong>è¯·æ±‚</strong>å’Œ<strong>å“åº”</strong>ï¼Œç”¨äºè½¬æ¢æ•°æ®ã€æ·»åŠ ç¼“å­˜ã€æˆ–æ‰§è¡Œè¯·æ±‚/å“åº”æ—¥å¿—è®°å½•ç­‰ã€‚</td></tr><tr><td><strong>ç®¡é“ (Pipes)</strong></td><td><code>@Injectable()</code>, <code>@UsePipes()</code></td><td>åœ¨æ§åˆ¶å™¨æ–¹æ³•è¢«è°ƒç”¨<strong>ä¹‹å‰</strong>æ‰§è¡Œï¼Œç”¨äºæ•°æ®éªŒè¯ï¼ˆValidationï¼‰å’Œæ•°æ®è½¬æ¢ï¼ˆTransformationï¼‰ã€‚</td></tr><tr><td><strong>è¿‡æ»¤å™¨ (Exception Filters)</strong></td><td><code>@Catch()</code>, <code>@UseFilters()</code></td><td>æ•è·å¹¶å¤„ç†åº”ç”¨ä¸­æœªå¤„ç†çš„å¼‚å¸¸ï¼Œå®šåˆ¶åŒ–è¿”å›ç»™å®¢æˆ·ç«¯çš„é”™è¯¯å“åº”æ ¼å¼ã€‚</td></tr></tbody></table>
<p>nestä»å‘é€è¯·æ±‚çš„å“åº”çš„æµç¨‹å¤§è‡´æ˜¯è¿™æ ·çš„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40a85e08477f4c6cbc37bb13dd0cd235~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAganVuX-S4jeingQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767057217&amp;x-signature=6NBqDwxEzU%2FCHLVSrB1w7CUrAEs%3D" alt="exported_image (1).png" loading="lazy"/></p>
<p>æ€»ç»“æ¥è¯´ï¼Œ<strong>æ¨¡å—</strong>æ˜¯åº”ç”¨çš„éª¨æ¶ï¼Œ<strong>æ§åˆ¶å™¨</strong>æ˜¯å…¥å£ï¼Œ<strong>æä¾›è€…</strong>æ˜¯æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œè€Œ <strong>å®ˆå«ã€ç®¡é“ã€æ‹¦æˆªå™¨</strong> ç­‰åˆ™æ˜¯ NestJS æä¾›çš„å¼ºå¤§å·¥å…·ï¼Œç”¨äºå¤„ç†è¯·æ±‚ç”Ÿå‘½å‘¨æœŸä¸­çš„<strong>æˆæƒã€éªŒè¯å’Œè½¬æ¢</strong>ç­‰ä»»åŠ¡ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯nestçš„ä¸€äº›ç®€å•ä»‹ç»ï¼Œæƒ³è¯¦ç»†äº†è§£çš„å¯ä»¥åˆ°nestçš„å®˜ç½‘å­¦ä¹ ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.nestjs.cn%2Fintroduction" target="_blank" title="https://docs.nestjs.cn/introduction" ref="nofollow noopener noreferrer"># NestJS ä¸­æ–‡æ–‡æ¡£</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.nestjs.com%2F" target="_blank" title="https://docs.nestjs.com/" ref="nofollow noopener noreferrer"># NestJS è‹±æ–‡æ–‡æ¡£</a></p>
<h2 data-id="heading-5">ä½¿ç”¨nestå®ç°ä¸€ä¸ªç®€å•çš„URUDåŠŸèƒ½</h2>
<p>é¦–å…ˆnestæœ‰ä¸€ä¸ªè‡ªå·±çš„cliå¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿåˆ›å»ºä¸€ä¸ªnesté¡¹ç›®ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…ä¸€ä¸‹nest Cli</p>
<pre><code class="hljs language-js" lang="js">npm i -g @nestjs/cli
</code></pre>
<p>å®‰è£…å®Œnest Cliåï¼Œå°±å¯ä»¥åˆ›å»ºé¡¹ç›®äº†</p>
<pre><code class="hljs language-js" lang="js">nest <span class="hljs-keyword">new</span> [é¡¹ç›®åç§°]

<span class="hljs-comment">// CLI ä¼šè¯¢é—®ä½ ä½¿ç”¨å“ªä¸ªåŒ…ç®¡ç†å™¨ï¼ˆnpmã€yarn æˆ– pnpmï¼‰ï¼Œé€‰æ‹©åä¼šè‡ªåŠ¨åˆ›å»ºé¡¹ç›®å¹¶å®‰è£…ä¾èµ–ã€‚</span>

</code></pre>
<p>æ–°å»ºå®Œé¡¹ç›®åï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">project-name/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts              <span class="hljs-comment"># åº”ç”¨å…¥å£æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ app.module.ts        <span class="hljs-comment"># æ ¹æ¨¡å—</span>
â”‚   â”œâ”€â”€ app.controller.ts    <span class="hljs-comment"># æ ¹æ§åˆ¶å™¨</span>
â”‚   â””â”€â”€ app.service.ts       <span class="hljs-comment"># æ ¹æœåŠ¡</span>
â”œâ”€â”€ <span class="hljs-built_in">test</span>/                    <span class="hljs-comment"># æµ‹è¯•æ–‡ä»¶</span>
â”œâ”€â”€ dist/                    <span class="hljs-comment"># ç¼–è¯‘åçš„æ–‡ä»¶</span>
â”œâ”€â”€ node_modules/            <span class="hljs-comment"># ä¾èµ–åŒ…</span>
â”œâ”€â”€ package.json             <span class="hljs-comment"># é¡¹ç›®é…ç½®å’Œä¾èµ–</span>
â”œâ”€â”€ tsconfig.json            <span class="hljs-comment"># TypeScript é…ç½®</span>
â”œâ”€â”€ nest-cli.json            <span class="hljs-comment"># NestJS CLI é…ç½®</span>
â””â”€â”€ README.md                <span class="hljs-comment"># é¡¹ç›®è¯´æ˜</span>
</code></pre>
<p>ä¸»è¦å®ç°ä¸€ä¸ªç”¨æˆ·æ¨¡å—ï¼Œåœ¨é¡¹ç›®ä»£ç ä¸­æœ‰è¾ƒä¸ºè¯¦ç»†çš„æ³¨è§£è¯´æ˜ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„Useræ¨¡å—çš„ä»£ç ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œå…ˆç”¨ä¸€ä¸ªç¤ºä¾‹æ¥ç®€å•è¯´å®ƒä»¬çš„å¤§æ¦‚æµç¨‹ï¼ˆåˆ›å»ºç”¨æˆ·ï¼‰ï¼š</p>
<h3 data-id="heading-6">1. è¯·æ±‚å…¥å£</h3>
<pre><code class="hljs language-http" lang="http">POST /api/users
Content-Type: application/json

{
  "name": "å¼ ä¸‰",
  "email": "zhangsan@example.com",
  "age": 25
}
</code></pre>
<p>å‘é€ä¸€ä¸ªPOSTç±»å‹çš„æ¥å£ï¼Œåœ°å€/api/usersï¼Œä¸‹æ–¹çš„è¯·æ±‚ä½“æ˜¯è¯·æ±‚ä½“bodyã€‚</p>
<h3 data-id="heading-7">2. è·¯ç”±åŒ¹é…</h3>
<p>æ–‡ä»¶ï¼š <code>user.controller.ts</code></p>
<pre><code class="hljs language-js" lang="js">@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'api/users'</span>)  <span class="hljs-comment">// è·¯ç”±å‰ç¼€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  @<span class="hljs-title class_">Post</span>()  <span class="hljs-comment">// åŒ¹é… POST /api/users</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">@Body() createUserDto: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">create</span>(createUserDto);
  }
}
</code></pre>
<p><strong>æµç¨‹è¯´æ˜ï¼š</strong></p>
<ol>
<li>NestJS è·¯ç”±ç³»ç»ŸåŒ¹é… <code>POST /api/users</code></li>
<li>æ‰¾åˆ° <code>UserController</code> çš„ <code>create</code> æ–¹æ³•</li>
<li>å‡†å¤‡æ‰§è¡Œæ–¹æ³•</li>
</ol>
<h3 data-id="heading-8">3. æ•°æ®éªŒè¯ï¼ˆValidationPipeï¼‰</h3>
<p>æ–‡ä»¶ï¼š<code>main.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript">app.<span class="hljs-title function_">useGlobalPipes</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationPipe</span>({
    <span class="hljs-attr">whitelist</span>: <span class="hljs-literal">true</span>,              <span class="hljs-comment">// è¿‡æ»¤æœªå®šä¹‰çš„å±æ€§</span>
    <span class="hljs-attr">forbidNonWhitelisted</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// ç¦æ­¢æœªå®šä¹‰çš„å±æ€§</span>
    <span class="hljs-attr">transform</span>: <span class="hljs-literal">true</span>,              <span class="hljs-comment">// è‡ªåŠ¨è½¬æ¢ç±»å‹</span>
  }),
);
</code></pre>
<p><strong>éªŒè¯æµç¨‹ï¼š</strong></p>
<ol>
<li><code>@Body()</code> è£…é¥°å™¨æå–è¯·æ±‚ä½“ JSON æ•°æ®</li>
<li>ValidationPipe æ ¹æ® <code>CreateUserDto</code> çš„éªŒè¯è§„åˆ™è¿›è¡ŒéªŒè¯ï¼š
<ul>
<li><code>name</code>: å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼ˆ<code>@IsString()</code>ï¼‰</li>
<li><code>email</code>: å¿…é¡»æ˜¯æœ‰æ•ˆé‚®ç®±æ ¼å¼ï¼ˆ<code>@IsEmail()</code>ï¼‰</li>
<li><code>age</code>: å¯é€‰ï¼Œå¦‚æœæä¾›å¿…é¡»æ˜¯ 0-150 çš„æ•´æ•°ï¼ˆ<code>@IsOptional()</code>, <code>@IsInt()</code>, <code>@Min(0)</code>, <code>@Max(150)</code>ï¼‰</li>
</ul>
</li>
<li>å¦‚æœéªŒè¯å¤±è´¥ï¼Œè¿”å› <code>400 Bad Request</code>ï¼ŒåŒ…å«é”™è¯¯è¯¦æƒ…</li>
<li>å¦‚æœéªŒè¯é€šè¿‡ï¼Œå°†æ•°æ®è½¬æ¢ä¸º <code>CreateUserDto</code> å®ä¾‹</li>
</ol>
<p><strong>éªŒè¯è§„åˆ™ï¼ˆCreateUserDtoï¼‰ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateUserDto</span> {
  <span class="hljs-meta">@IsString</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'ç”¨æˆ·åå¿…é¡»æ˜¯å­—ç¬¦ä¸²'</span> })
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-meta">@IsEmail</span>({}, { <span class="hljs-attr">message</span>: <span class="hljs-string">'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'</span> })
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-meta">@IsOptional</span>()
  <span class="hljs-meta">@IsInt</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'å¹´é¾„å¿…é¡»æ˜¯æ•´æ•°'</span> })
  <span class="hljs-meta">@Min</span>(<span class="hljs-number">0</span>, { <span class="hljs-attr">message</span>: <span class="hljs-string">'å¹´é¾„ä¸èƒ½å°äº0'</span> })
  <span class="hljs-meta">@Max</span>(<span class="hljs-number">150</span>, { <span class="hljs-attr">message</span>: <span class="hljs-string">'å¹´é¾„ä¸èƒ½å¤§äº150'</span> })
  age?: <span class="hljs-built_in">number</span>;
}
</code></pre>
<h3 data-id="heading-9">4. æ§åˆ¶å™¨å¤„ç†</h3>
<p><strong>æ–‡ä»¶ï¼š</strong> <code>user.controller.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(<span class="hljs-meta">@Body</span>() <span class="hljs-attr">createUserDto</span>: <span class="hljs-title class_">CreateUserDto</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UserResponseDto</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">create</span>(createUserDto);
}
</code></pre>
<p><strong>æµç¨‹è¯´æ˜ï¼š</strong></p>
<ol>
<li>æ¥æ”¶éªŒè¯åçš„ <code>CreateUserDto</code> å¯¹è±¡</li>
<li>è°ƒç”¨ <code>userService.create()</code> æ–¹æ³•</li>
<li>ç­‰å¾…æœåŠ¡å±‚è¿”å›ç»“æœ</li>
<li>è¿”å› <code>UserResponseDto</code> ç±»å‹çš„æ•°æ®</li>
</ol>
<h3 data-id="heading-10">5. æœåŠ¡å±‚å¤„ç†</h3>
<p><strong>æ–‡ä»¶ï¼š</strong> <code>user.service.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(<span class="hljs-attr">createUserDto</span>: <span class="hljs-title class_">CreateUserDto</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span>&gt; {
  <span class="hljs-comment">// 1. åˆ›å»ºå®ä½“å®ä¾‹</span>
  <span class="hljs-keyword">const</span> newUser = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">name</span>: createUserDto.<span class="hljs-property">name</span>,
    <span class="hljs-attr">email</span>: createUserDto.<span class="hljs-property">email</span>,
    <span class="hljs-attr">age</span>: createUserDto.<span class="hljs-property">age</span>,
  });

  <span class="hljs-comment">// 2. ä¿å­˜åˆ°æ•°æ®åº“</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">save</span>(newUser);
}
</code></pre>
<p><strong>æµç¨‹è¯´æ˜ï¼š</strong></p>
<ol>
<li>
<p><strong>åˆ›å»ºå®ä½“å®ä¾‹</strong>ï¼š</p>
<ul>
<li><code>repository.create()</code> åˆ›å»º <code>User</code> å®ä½“å®ä¾‹</li>
<li>æ­¤æ—¶å®ä½“è¿˜æœªä¿å­˜åˆ°æ•°æ®åº“</li>
<li>åªè®¾ç½®äº†åŸºæœ¬å­—æ®µï¼ˆname, email, ageï¼‰</li>
</ul>
</li>
<li>
<p><strong>ä¿å­˜åˆ°æ•°æ®åº“</strong>ï¼š</p>
<ul>
<li><code>repository.save()</code> æ‰§è¡Œ INSERT æ“ä½œ</li>
<li>TypeORM è‡ªåŠ¨å¤„ç†ï¼š
<ul>
<li>ç”Ÿæˆè‡ªå¢ IDï¼ˆ<code>@PrimaryGeneratedColumn()</code>ï¼‰</li>
<li>è®¾ç½® <code>createdAt</code>ï¼ˆ<code>@CreateDateColumn()</code>ï¼‰</li>
<li>è®¾ç½® <code>updatedAt</code>ï¼ˆ<code>@UpdateDateColumn()</code>ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>ä¸»è¦æ¶‰åŠçš„æ–‡ä»¶main.tsï¼Œä¸»è¦å…¥å£ï¼Œç”¨äºé¡¹ç›®çš„å…¥å£ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ValidationPipe</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-comment">/**
 * åº”ç”¨ç¨‹åºå¯åŠ¨å…¥å£
 * bootstrap å‡½æ•°æ˜¯ NestJS åº”ç”¨çš„å…¥å£ç‚¹
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä½¿ç”¨ NestFactory åˆ›å»º NestJS åº”ç”¨å®ä¾‹</span>
  <span class="hljs-comment">// NestFactory æ˜¯åˆ›å»ºåº”ç”¨çš„æ ¸å¿ƒå·¥å‚ç±»</span>
  <span class="hljs-comment">// AppModule æ˜¯åº”ç”¨çš„æ ¹æ¨¡å—ï¼ŒåŒ…å«äº†æ‰€æœ‰åŠŸèƒ½æ¨¡å—çš„é…ç½®</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);
  
  <span class="hljs-comment">/**
   * å¯ç”¨è·¨åŸŸèµ„æºå…±äº« (CORS)
   * å…è®¸å‰ç«¯åº”ç”¨ï¼ˆè¿è¡Œåœ¨ localhost:3000ï¼‰è®¿é—®åç«¯ API
   * credentials: true è¡¨ç¤ºå…è®¸æºå¸¦è®¤è¯ä¿¡æ¯ï¼ˆå¦‚ cookiesï¼‰
   */</span>
  app.<span class="hljs-title function_">enableCors</span>({
    <span class="hljs-attr">origin</span>: <span class="hljs-string">'http://localhost:3000'</span>, <span class="hljs-comment">// å…è®¸çš„å‰ç«¯åŸŸå</span>
    <span class="hljs-attr">credentials</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…è®¸æºå¸¦å‡­è¯</span>
  });

  <span class="hljs-comment">/**
   * å…¨å±€éªŒè¯ç®¡é“
   * è‡ªåŠ¨éªŒè¯æ‰€æœ‰ä¼ å…¥çš„è¯·æ±‚æ•°æ®ï¼Œæ ¹æ® DTO ä¸­çš„è£…é¥°å™¨è¿›è¡ŒéªŒè¯
   */</span>
  app.<span class="hljs-title function_">useGlobalPipes</span>(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationPipe</span>({
      <span class="hljs-attr">whitelist</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è‡ªåŠ¨è¿‡æ»¤æ‰ DTO ä¸­æœªå®šä¹‰çš„å±æ€§</span>
      <span class="hljs-attr">forbidNonWhitelisted</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¦‚æœè¯·æ±‚åŒ…å«æœªå®šä¹‰çš„å±æ€§ï¼ŒæŠ›å‡ºé”™è¯¯</span>
      <span class="hljs-attr">transform</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è‡ªåŠ¨å°†è¯·æ±‚æ•°æ®è½¬æ¢ä¸º DTO å®ä¾‹</span>
    }),
  );

  <span class="hljs-comment">/**
   * å¯åŠ¨ HTTP æœåŠ¡å™¨
   * process.env.PORT ä»ç¯å¢ƒå˜é‡è¯»å–ç«¯å£ï¼Œå¦‚æœæœªè®¾ç½®åˆ™é»˜è®¤ä½¿ç”¨ 3001
   * ?? æ˜¯ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼Œå½“å·¦ä¾§ä¸º null æˆ– undefined æ—¶ä½¿ç”¨å³ä¾§çš„å€¼
   */</span>
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> ?? <span class="hljs-number">3001</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Application is running on: http://localhost:<span class="hljs-subst">${process.env.PORT ?? <span class="hljs-number">3001</span>}</span>`</span>);
}

<span class="hljs-comment">// æ‰§è¡Œå¯åŠ¨å‡½æ•°</span>
<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<p>app.module.tsï¼Œæ¨¡å—å¦‚æœéœ€è¦åœ¨å½“å‰æ¨¡å—ä½¿ç”¨é‚£å°±éœ€è¦è¿›è¡Œå¯¼å…¥ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigModule</span>, <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TypeOrmModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/typeorm'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user/user.module'</span>;

<span class="hljs-comment">/**
 * AppModule - åº”ç”¨çš„æ ¹æ¨¡å—
 * 
 * <span class="hljs-doctag">@Module</span> è£…é¥°å™¨ç”¨äºå®šä¹‰ä¸€ä¸ªæ¨¡å—ç±»
 * æ¨¡å—æ˜¯ NestJS ä¸­ç»„ç»‡ä»£ç çš„åŸºæœ¬å•å…ƒï¼Œç±»ä¼¼äº Angular çš„æ¨¡å—æ¦‚å¿µ
 * 
 * æ¨¡å—çš„ä¸‰ä¸ªä¸»è¦å±æ€§ï¼š
 * - imports: å¯¼å…¥å…¶ä»–æ¨¡å—ï¼Œä½¿å½“å‰æ¨¡å—å¯ä»¥ä½¿ç”¨å…¶ä»–æ¨¡å—å¯¼å‡ºçš„åŠŸèƒ½
 * - controllers: æ³¨å†Œæ§åˆ¶å™¨ï¼Œå¤„ç† HTTP è¯·æ±‚
 * - providers: æ³¨å†Œæä¾›è€…ï¼ˆæœåŠ¡ï¼‰ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘ï¼Œå¯ä»¥åœ¨æ•´ä¸ªæ¨¡å—ä¸­æ³¨å…¥ä½¿ç”¨
 */</span>
@<span class="hljs-title class_">Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-comment">/**
     * ConfigModule - é…ç½®æ¨¡å—
     * 
     * ä½œç”¨ï¼šç®¡ç†åº”ç”¨é…ç½®ï¼Œæ”¯æŒä»ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ç­‰è¯»å–é…ç½®
     * 
     * å‚æ•°è¯´æ˜ï¼š
     *   - isGlobal: true - è®¾ç½®ä¸ºå…¨å±€æ¨¡å—ï¼Œæ‰€æœ‰æ¨¡å—éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ ConfigService
     *   - envFilePath: '.env' - ç¯å¢ƒå˜é‡æ–‡ä»¶è·¯å¾„
     *   - load: [] - å¯ä»¥åŠ è½½é¢å¤–çš„é…ç½®æº
     * 
     * è¯´æ˜ï¼š
     *   - å…¨å±€æ¨¡å—æ„å‘³ç€ä¸éœ€è¦åœ¨æ¯ä¸ªæ¨¡å—ä¸­å¯¼å…¥ ConfigModule
     *   - å¯ä»¥ç›´æ¥åœ¨ä»»ä½•åœ°æ–¹æ³¨å…¥ ConfigService ä½¿ç”¨
     */</span>
    <span class="hljs-title class_">ConfigModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">isGlobal</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…¨å±€é…ç½®æ¨¡å—</span>
      <span class="hljs-attr">envFilePath</span>: <span class="hljs-string">'.env'</span>, <span class="hljs-comment">// ç¯å¢ƒå˜é‡æ–‡ä»¶è·¯å¾„</span>
    }),

    <span class="hljs-comment">/**
     * TypeOrmModule.forRootAsync() - TypeORM å¼‚æ­¥é…ç½®
     * 
     * ä½œç”¨ï¼šé…ç½® TypeORM æ•°æ®åº“è¿æ¥
     * 
     * ä¸ºä»€ä¹ˆä½¿ç”¨ forRootAsyncï¼š
     *   - å¯ä»¥å¼‚æ­¥è·å–é…ç½®ï¼ˆå¦‚ä» ConfigServiceï¼‰
     *   - æ”¯æŒä¾èµ–æ³¨å…¥ï¼ˆå¦‚æ³¨å…¥ ConfigServiceï¼‰
     *   - æ›´çµæ´»ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶è¯»å–é…ç½®
     * 
     * å‚æ•°è¯´æ˜ï¼š
     *   - imports: [ConfigModule] - å¯¼å…¥ ConfigModule ä»¥ä½¿ç”¨ ConfigService
     *   - useFactory: å·¥å‚å‡½æ•°ï¼Œè¿”å› TypeORM é…ç½®å¯¹è±¡
     *   - inject: [ConfigService] - æ³¨å…¥ ConfigService åˆ°å·¥å‚å‡½æ•°
     */</span>
    <span class="hljs-title class_">TypeOrmModule</span>.<span class="hljs-title function_">forRootAsync</span>({
      <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">ConfigModule</span>],
      <span class="hljs-attr">useFactory</span>: <span class="hljs-function">(<span class="hljs-params">configService: ConfigService</span>) =&gt;</span> ({
        <span class="hljs-comment">/**
         * type - æ•°æ®åº“ç±»å‹
         * æ”¯æŒï¼šmysql, postgres, sqlite, mssql, mongodb ç­‰
         */</span>
        <span class="hljs-attr">type</span>: <span class="hljs-string">'mysql'</span>,

        <span class="hljs-comment">/**
         * host - æ•°æ®åº“ä¸»æœºåœ°å€
         * ä»ç¯å¢ƒå˜é‡ DB_HOST è¯»å–ï¼Œé»˜è®¤ localhost
         */</span>
        <span class="hljs-attr">host</span>: configService.<span class="hljs-title function_">get</span>(<span class="hljs-string">'DB_HOST'</span>, <span class="hljs-string">'localhost'</span>),

        <span class="hljs-comment">/**
         * port - æ•°æ®åº“ç«¯å£
         * ä»ç¯å¢ƒå˜é‡ DB_PORT è¯»å–ï¼Œé»˜è®¤ 3306ï¼ˆMySQL é»˜è®¤ç«¯å£ï¼‰
         */</span>
        <span class="hljs-attr">port</span>: configService.<span class="hljs-property">get</span>&lt;number&gt;(<span class="hljs-string">'DB_PORT'</span>, <span class="hljs-number">3306</span>),

        <span class="hljs-comment">/**
         * username - æ•°æ®åº“ç”¨æˆ·å
         * ä»ç¯å¢ƒå˜é‡ DB_USERNAME è¯»å–
         */</span>
        <span class="hljs-attr">username</span>: configService.<span class="hljs-title function_">get</span>(<span class="hljs-string">'DB_USERNAME'</span>, <span class="hljs-string">'root'</span>),

        <span class="hljs-comment">/**
         * password - æ•°æ®åº“å¯†ç 
         * ä»ç¯å¢ƒå˜é‡ DB_PASSWORD è¯»å–
         */</span>
        <span class="hljs-attr">password</span>: configService.<span class="hljs-title function_">get</span>(<span class="hljs-string">'DB_PASSWORD'</span>, <span class="hljs-string">''</span>),

        <span class="hljs-comment">/**
         * database - æ•°æ®åº“åç§°
         * ä»ç¯å¢ƒå˜é‡ DB_DATABASE è¯»å–
         */</span>
        <span class="hljs-attr">database</span>: configService.<span class="hljs-title function_">get</span>(<span class="hljs-string">'DB_DATABASE'</span>, <span class="hljs-string">'nest_db'</span>),

        <span class="hljs-comment">/**
         * entities - å®ä½“ç±»æ•°ç»„
         * æŒ‡å®š TypeORM è¦ç®¡ç†çš„å®ä½“ç±»

         */</span>
        <span class="hljs-attr">entities</span>: [__dirname + <span class="hljs-string">'/**/*.entity{.ts,.js}'</span>],

        <span class="hljs-comment">/**
         * synchronize - è‡ªåŠ¨åŒæ­¥æ•°æ®åº“ç»“æ„
         * 
         * ä½œç”¨ï¼šæ ¹æ®å®ä½“ç±»è‡ªåŠ¨åˆ›å»ºæˆ–æ›´æ–°æ•°æ®åº“è¡¨ç»“æ„
         * 
         * æ³¨æ„ï¼š
         *   - true: å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œè‡ªåŠ¨åŒæ­¥è¡¨ç»“æ„ï¼ˆæ–¹ä¾¿å¼€å‘ï¼‰
         *   - false: ç”Ÿäº§ç¯å¢ƒå¿…é¡»è®¾ä¸º falseï¼Œä½¿ç”¨è¿ç§»ï¼ˆmigrationï¼‰ç®¡ç†æ•°æ®åº“ç»“æ„
         *   - è®¾ä¸º true æ—¶ï¼Œä¿®æ”¹å®ä½“ç±»ä¼šè‡ªåŠ¨ä¿®æ”¹æ•°æ®åº“è¡¨ï¼Œå¯èƒ½ä¸¢å¤±æ•°æ®
         */</span>
        <span class="hljs-attr">synchronize</span>: configService.<span class="hljs-title function_">get</span>(<span class="hljs-string">'DB_SYNCHRONIZE'</span>, <span class="hljs-string">'true'</span>) === <span class="hljs-string">'true'</span>,

        <span class="hljs-comment">/**
         * logging - SQL æ—¥å¿—
         * 
         * ä½œç”¨ï¼šæ˜¯å¦æ‰“å°æ‰§è¡Œçš„ SQL è¯­å¥
         * 
         * è¯´æ˜ï¼š
         *   - true: å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œå¯ä»¥çœ‹åˆ°æ‰§è¡Œçš„ SQL
         *   - false: ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œå‡å°‘æ—¥å¿—è¾“å‡º
         *   - ä¹Ÿå¯ä»¥è®¾ç½®ä¸º ['query', 'error'] ç­‰æ•°ç»„ï¼Œåªè®°å½•ç‰¹å®šç±»å‹çš„æ—¥å¿—
         */</span>
        <span class="hljs-attr">logging</span>: configService.<span class="hljs-title function_">get</span>(<span class="hljs-string">'DB_LOGGING'</span>, <span class="hljs-string">'true'</span>) === <span class="hljs-string">'true'</span>,

        <span class="hljs-comment">/**
         * å…¶ä»–å¸¸ç”¨é…ç½®é€‰é¡¹ï¼š
         * 
         * - charset: 'utf8mb4' - å­—ç¬¦é›†ï¼ˆæ”¯æŒ emojiï¼‰
         * - timezone: '+08:00' - æ—¶åŒº
         * - extra: { connectionLimit: 10 } - è¿æ¥æ± é…ç½®
         * - migrations: [] - æ•°æ®åº“è¿ç§»æ–‡ä»¶
         * - subscribers: [] - è®¢é˜…è€…ï¼ˆå®ä½“ç›‘å¬å™¨ï¼‰
         */</span>
      }),
      <span class="hljs-attr">inject</span>: [<span class="hljs-title class_">ConfigService</span>],
    }),
    <span class="hljs-title class_">UserModule</span>, <span class="hljs-comment">// å¯¼å…¥ç”¨æˆ·æ¨¡å—ï¼Œè¿™æ ·æ‰å¯ä»¥ä½¿ç”¨useræ¨¡å—ä¸­å¯¼å‡ºçš„æ–¹æ³•</span>
  ],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>], <span class="hljs-comment">// æ³¨å†Œåº”ç”¨æ§åˆ¶å™¨</span>
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>], <span class="hljs-comment">// æ³¨å†Œåº”ç”¨æœåŠ¡</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<p>user.controller.tsï¼Œåœ¨useræ¨¡å—ä¸­çš„æ§åˆ¶å™¨ï¼Œç”¨äºè·¯ç”±çš„åŒ¹é…ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Controller</span>,<span class="hljs-title class_">Get</span>,<span class="hljs-title class_">Post</span>,<span class="hljs-title class_">Body</span>,<span class="hljs-title class_">Patch</span>,<span class="hljs-title class_">Param</span>,<span class="hljs-title class_">Delete</span>,<span class="hljs-title class_">ParseIntPipe</span>,} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/create-user.dto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UpdateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/update-user.dto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserResponseDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/user-response.dto'</span>;

<span class="hljs-comment">/**
 * UserController - ç”¨æˆ·æ§åˆ¶å™¨
 * 
 * è´Ÿè´£å¤„ç†ç”¨æˆ·ç›¸å…³çš„ HTTP è¯·æ±‚
 * å®ç°å®Œæ•´çš„ CRUD æ“ä½œï¼šCreateï¼ˆåˆ›å»ºï¼‰ã€Readï¼ˆè¯»å–ï¼‰ã€Updateï¼ˆæ›´æ–°ï¼‰ã€Deleteï¼ˆåˆ é™¤ï¼‰
 */</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Controller</span>('api/users') - æ§åˆ¶å™¨è·¯ç”±è£…é¥°å™¨
 * 
 * ä½œç”¨ï¼šå®šä¹‰æ§åˆ¶å™¨çš„è·¯ç”±å‰ç¼€ï¼Œæ‰€æœ‰è¯¥æ§åˆ¶å™¨ä¸‹çš„è·¯ç”±éƒ½ä¼šè‡ªåŠ¨åŠ ä¸Šè¿™ä¸ªå‰ç¼€
 * å‚æ•°ï¼š'api/users' - è·¯ç”±å‰ç¼€è·¯å¾„
 * æ•ˆæœï¼š
 *   - å¦‚æœæ–¹æ³•è£…é¥°å™¨æ˜¯ <span class="hljs-doctag">@Get</span>()ï¼Œå®Œæ•´è·¯å¾„ä¸º GET /api/users
 *   - å¦‚æœæ–¹æ³•è£…é¥°å™¨æ˜¯ <span class="hljs-doctag">@Get</span>(':id')ï¼Œå®Œæ•´è·¯å¾„ä¸º GET /api/users/:id
 */</span>
 
@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'api/users'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  <span class="hljs-comment">/**
   * ä¾èµ–æ³¨å…¥ - é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ UserService
   * private readonly è¡¨ç¤ºè¿™æ˜¯ç§æœ‰åªè¯»å±æ€§ï¼Œåªèƒ½åœ¨ç±»å†…éƒ¨ä½¿ç”¨
   */</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private readonly userService: UserService</span>) {}
  
  <span class="hljs-comment">/**
   * åˆ›å»ºç”¨æˆ·
   * POST /api/users
   */</span>
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Post</span>() - HTTP POST æ–¹æ³•è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šå°†æ–¹æ³•æ ‡è®°ä¸ºå¤„ç† POST è¯·æ±‚çš„è·¯ç”±å¤„ç†å™¨
   * å‚æ•°ï¼šä¸ä¼ å‚æ•°æ—¶ï¼Œè·¯ç”±è·¯å¾„ä¸ºç©ºï¼Œå®Œæ•´è·¯å¾„ä¸ºæ§åˆ¶å™¨çš„å‰ç¼€ + ç©ºè·¯å¾„ = /api/users
   * è¯´æ˜ï¼šPOST è¯·æ±‚é€šå¸¸ç”¨äºåˆ›å»ºæ–°èµ„æº
   */</span>
  @<span class="hljs-title class_">Post</span>()
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Body</span>() - è¯·æ±‚ä½“å‚æ•°è£…é¥°å™¨
     * 
     * ä½œç”¨ï¼šä» HTTP è¯·æ±‚ä½“ä¸­æå–æ•°æ®å¹¶æ³¨å…¥åˆ°æ–¹æ³•å‚æ•°ä¸­
     * è¯´æ˜ï¼š
     *   - NestJS ä¼šè‡ªåŠ¨å°† JSON è¯·æ±‚ä½“è§£æä¸º CreateUserDto å¯¹è±¡
     *   - ç»“åˆ ValidationPipeï¼Œä¼šè‡ªåŠ¨éªŒè¯æ•°æ®æ˜¯å¦ç¬¦åˆ DTO ä¸­å®šä¹‰çš„è§„åˆ™
     *   - å¦‚æœéªŒè¯å¤±è´¥ï¼Œä¼šè¿”å› 400 é”™è¯¯
     */</span>
    @<span class="hljs-title class_">Body</span>() <span class="hljs-attr">createUserDto</span>: <span class="hljs-title class_">CreateUserDto</span>
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UserResponseDto</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">create</span>(createUserDto);
  }

  <span class="hljs-comment">/**
   * è·å–æ‰€æœ‰ç”¨æˆ·
   * GET /api/users
   */</span>

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Get</span>() - HTTP GET æ–¹æ³•è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šå°†æ–¹æ³•æ ‡è®°ä¸ºå¤„ç† GET è¯·æ±‚çš„è·¯ç”±å¤„ç†å™¨
   * å‚æ•°ï¼šä¸ä¼ å‚æ•°æ—¶ï¼Œè·¯ç”±è·¯å¾„ä¸ºç©ºï¼Œå®Œæ•´è·¯å¾„ä¸º /api/users
   * è¯´æ˜ï¼šGET è¯·æ±‚ç”¨äºè·å–èµ„æº
   */</span>
  @<span class="hljs-title class_">Get</span>()
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UserResponseDto</span>[]&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">findAll</span>();
  }

  <span class="hljs-comment">/**
   * æ ¹æ®IDè·å–å•ä¸ªç”¨æˆ·
   * GET /api/users/:id
   */</span>

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Get</span>(':id') - HTTP GET æ–¹æ³•è£…é¥°å™¨ï¼ˆå¸¦è·¯å¾„å‚æ•°ï¼‰
   * 
   * ä½œç”¨ï¼šå®šä¹‰å¸¦è·¯å¾„å‚æ•°çš„ GET è·¯ç”±
   * å‚æ•°ï¼š':id' - è·¯å¾„å‚æ•°ï¼Œå†’å·è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåŠ¨æ€å‚æ•°
   * å®Œæ•´è·¯å¾„ï¼šGET /api/users/:id
   * è¯´æ˜ï¼šè·¯å¾„å‚æ•°å¯ä»¥é€šè¿‡ <span class="hljs-doctag">@Param</span>() è£…é¥°å™¨è·å–
   */</span>
  @<span class="hljs-title class_">Get</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Param</span>('id', ParseIntPipe) - è·¯å¾„å‚æ•°è£…é¥°å™¨ + ç®¡é“è½¬æ¢
     * 
     * ä½œç”¨ï¼š
     *   1. <span class="hljs-doctag">@Param</span>('id') - ä»è·¯ç”±è·¯å¾„ä¸­æå–åä¸º 'id' çš„å‚æ•°
     *   2. ParseIntPipe - å°†å­—ç¬¦ä¸²å‚æ•°è½¬æ¢ä¸ºæ•´æ•°ç±»å‹
     * 
     * è¯´æ˜ï¼š
     *   - HTTP è¯·æ±‚ä¸­çš„è·¯å¾„å‚æ•°é»˜è®¤æ˜¯å­—ç¬¦ä¸²ç±»å‹
     *   - ParseIntPipe ä¼šè‡ªåŠ¨å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—
     *   - å¦‚æœè½¬æ¢å¤±è´¥ï¼ˆå¦‚ä¼ å…¥éæ•°å­—ï¼‰ï¼Œä¼šè‡ªåŠ¨è¿”å› 400 é”™è¯¯
     *   - è¿™æ˜¯ NestJS ä¸­ç±»å‹è½¬æ¢å’ŒéªŒè¯çš„å¸¸ç”¨æ–¹å¼
     */</span>
    @<span class="hljs-title class_">Param</span>(<span class="hljs-string">'id'</span>, <span class="hljs-title class_">ParseIntPipe</span>) <span class="hljs-attr">id</span>: number
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UserResponseDto</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">findOne</span>(id);
  }

  <span class="hljs-comment">/**
   * æ›´æ–°ç”¨æˆ·ä¿¡æ¯
   * PATCH /api/users/:id
   */</span>

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Patch</span>(':id') - HTTP PATCH æ–¹æ³•è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šå°†æ–¹æ³•æ ‡è®°ä¸ºå¤„ç† PATCH è¯·æ±‚çš„è·¯ç”±å¤„ç†å™¨
   * å‚æ•°ï¼š':id' - è·¯å¾„å‚æ•°ï¼Œè¡¨ç¤ºè¦æ›´æ–°çš„èµ„æºID
   * è¯´æ˜ï¼š
   *   - PATCH ç”¨äºéƒ¨åˆ†æ›´æ–°èµ„æºï¼ˆåªæ›´æ–°æä¾›çš„å­—æ®µï¼‰
   *   - ä¸ PUT çš„åŒºåˆ«ï¼šPUT é€šå¸¸ç”¨äºå®Œæ•´æ›¿æ¢èµ„æºï¼ŒPATCH ç”¨äºéƒ¨åˆ†æ›´æ–°
   *   - RESTful API ä¸­ï¼Œæ›´æ–°æ“ä½œé€šå¸¸ä½¿ç”¨ PATCH
   */</span>
  @<span class="hljs-title class_">Patch</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">update</span>(
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Param</span>('id', ParseIntPipe) - æå–å¹¶è½¬æ¢è·¯å¾„å‚æ•° id
     */</span>
    @<span class="hljs-title class_">Param</span>(<span class="hljs-string">'id'</span>, <span class="hljs-title class_">ParseIntPipe</span>) <span class="hljs-attr">id</span>: number,
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Body</span>() - æå–è¯·æ±‚ä½“æ•°æ®
     * 
     * è¯´æ˜ï¼šUpdateUserDto ä¸­çš„å­—æ®µéƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥åªæ›´æ–°éƒ¨åˆ†å­—æ®µ
     */</span>
    @<span class="hljs-title class_">Body</span>() <span class="hljs-attr">updateUserDto</span>: <span class="hljs-title class_">UpdateUserDto</span>,
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UserResponseDto</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">update</span>(id, updateUserDto);
  }

  <span class="hljs-comment">/**
   * åˆ é™¤ç”¨æˆ·
   * DELETE /api/users/:id
   */</span>

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Delete</span>(':id') - HTTP DELETE æ–¹æ³•è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šå°†æ–¹æ³•æ ‡è®°ä¸ºå¤„ç† DELETE è¯·æ±‚çš„è·¯ç”±å¤„ç†å™¨
   * å‚æ•°ï¼š':id' - è·¯å¾„å‚æ•°ï¼Œè¡¨ç¤ºè¦åˆ é™¤çš„èµ„æºID
   * è¯´æ˜ï¼šDELETE è¯·æ±‚ç”¨äºåˆ é™¤èµ„æºï¼Œæ˜¯ RESTful API ä¸­åˆ é™¤æ“ä½œçš„æ ‡å‡†æ–¹æ³•
   */</span>
  @<span class="hljs-title class_">Delete</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">remove</span>(
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@Param</span>('id', ParseIntPipe) - æå–å¹¶è½¬æ¢è·¯å¾„å‚æ•° id
     */</span>
    @<span class="hljs-title class_">Param</span>(<span class="hljs-string">'id'</span>, <span class="hljs-title class_">ParseIntPipe</span>) <span class="hljs-attr">id</span>: number
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">remove</span>(id);
  }
}
</code></pre>
<p>user.service.tsï¼Œåœ¨useræ¨¡å—ä¸­çš„æä¾›è€…ï¼Œç”¨äºå¤„ç†è¯·æ±‚çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">NotFoundException</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InjectRepository</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/typeorm'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Repository</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'typeorm'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./entities/user.entity'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/create-user.dto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UpdateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/update-user.dto'</span>;

<span class="hljs-comment">/**
 * UserService - ç”¨æˆ·æœåŠ¡ç±»
 * 
 * è´Ÿè´£å¤„ç†ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘
 * ä½¿ç”¨ TypeORM Repository è¿›è¡Œæ•°æ®åº“æ“ä½œ
 */</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Injectable</span>() - å¯æ³¨å…¥è£…é¥°å™¨
 * 
 * ä½œç”¨ï¼šæ ‡è®°æ­¤ç±»å¯ä»¥è¢« NestJS çš„ä¾èµ–æ³¨å…¥ç³»ç»Ÿç®¡ç†
 * 
 * åŠŸèƒ½è¯´æ˜ï¼š
 *   1. ä½¿æ­¤ç±»å¯ä»¥è¢«å…¶ä»–ç±»ï¼ˆå¦‚æ§åˆ¶å™¨ï¼‰é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä½¿ç”¨
 *   2. NestJS ä¼šè‡ªåŠ¨ç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸï¼ˆé»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œæ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼‰
 *   3. å¯ä»¥åœ¨æ¨¡å—çš„ providers æ•°ç»„ä¸­æ³¨å†Œ
 *   4. æ”¯æŒä¾èµ–æ³¨å…¥ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­æ³¨å…¥å…¶ä»–æœåŠ¡
 * 
 * ç”Ÿå‘½å‘¨æœŸï¼š
 *   - é»˜è®¤ä½œç”¨åŸŸï¼šå•ä¾‹ï¼ˆSINGLETONï¼‰ï¼Œåº”ç”¨å¯åŠ¨æ—¶åˆ›å»ºä¸€æ¬¡ï¼Œæ‰€æœ‰åœ°æ–¹å…±äº«åŒä¸€ä¸ªå®ä¾‹
 *   - å¯ä»¥é€šè¿‡ { scope: Scope.REQUEST } è®¾ç½®ä¸ºè¯·æ±‚ä½œç”¨åŸŸï¼Œæ¯ä¸ªè¯·æ±‚åˆ›å»ºæ–°å®ä¾‹
 *   - å¯ä»¥é€šè¿‡ { scope: Scope.TRANSIENT } è®¾ç½®ä¸ºç¬æ€ä½œç”¨åŸŸï¼Œæ¯æ¬¡æ³¨å…¥éƒ½åˆ›å»ºæ–°å®ä¾‹
 * 
 * ä½¿ç”¨åœºæ™¯ï¼š
 *   - å°è£…ä¸šåŠ¡é€»è¾‘
 *   - æ•°æ®è®¿é—®å±‚ï¼ˆå¦‚æ•°æ®åº“æ“ä½œï¼‰
 *   - å¯å¤ç”¨çš„åŠŸèƒ½æ¨¡å—
 */</span>
@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-comment">/**
   * æ„é€ å‡½æ•° - ä¾èµ–æ³¨å…¥ Repository
   * 
   * <span class="hljs-doctag">@InjectRepository</span>(User) - Repository æ³¨å…¥è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šæ³¨å…¥ TypeORM Repositoryï¼Œç”¨äºæ•°æ®åº“æ“ä½œ
   * 
   * å‚æ•°è¯´æ˜ï¼š
   *   - User - å®ä½“ç±»ï¼ŒæŒ‡å®šè¦æ“ä½œçš„å®ä½“ç±»å‹
   * 
   * è¯´æ˜ï¼š
   *   - Repository&lt;User&gt; æ˜¯ TypeORM æä¾›çš„æ•°æ®åº“æ“ä½œæ¥å£
   *   - æä¾›äº†ä¸°å¯Œçš„æ•°æ®åº“æ“ä½œæ–¹æ³•ï¼ˆfind, save, delete, update ç­‰ï¼‰
   *   - ç±»å‹å®‰å…¨ï¼šTypeScript ä¼šæ ¹æ® User å®ä½“ç±»æä¾›ç±»å‹æç¤º
   *   - éœ€è¦åœ¨ UserModule ä¸­ä½¿ç”¨ TypeOrmModule.forFeature([User]) æ³¨å†Œ
   */</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    @InjectRepository(User)
    private userRepository: Repository&lt;User&gt;,
  </span>) {}

  <span class="hljs-comment">/**
   * åˆ›å»ºç”¨æˆ·
   * 
   * <span class="hljs-doctag">@param</span> createUserDto åˆ›å»ºç”¨æˆ·çš„æ•°æ®
   * <span class="hljs-doctag">@returns</span> åˆ›å»ºçš„ç”¨æˆ·å¯¹è±¡ï¼ˆPromiseï¼‰
   * 
   * è¯´æ˜ï¼š
   *   - create() æ–¹æ³•åˆ›å»ºå®ä½“å®ä¾‹ï¼Œä½†ä¸ä¿å­˜åˆ°æ•°æ®åº“
   *   - save() æ–¹æ³•å°†å®ä½“ä¿å­˜åˆ°æ•°æ®åº“
   *   - TypeORM ä¼šè‡ªåŠ¨å¤„ç† createdAt å’Œ updatedAt å­—æ®µ
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(<span class="hljs-attr">createUserDto</span>: <span class="hljs-title class_">CreateUserDto</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span>&gt; {
    <span class="hljs-comment">// åˆ›å»ºå®ä½“å®ä¾‹</span>
    <span class="hljs-keyword">const</span> newUser = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">name</span>: createUserDto.<span class="hljs-property">name</span>,
      <span class="hljs-attr">email</span>: createUserDto.<span class="hljs-property">email</span>,
      <span class="hljs-attr">age</span>: createUserDto.<span class="hljs-property">age</span>,
    });

    <span class="hljs-comment">// ä¿å­˜åˆ°æ•°æ®åº“</span>
    <span class="hljs-comment">// save() æ–¹æ³•ä¼šï¼š</span>
    <span class="hljs-comment">// 1. æ’å…¥æ–°è®°å½•åˆ°æ•°æ®åº“</span>
    <span class="hljs-comment">// 2. è‡ªåŠ¨è®¾ç½® createdAt å’Œ updatedAtï¼ˆå› ä¸ºä½¿ç”¨äº† @CreateDateColumn å’Œ @UpdateDateColumnï¼‰</span>
    <span class="hljs-comment">// 3. è¿”å›ä¿å­˜åçš„å®ä½“ï¼ˆåŒ…å«è‡ªåŠ¨ç”Ÿæˆçš„ idï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">save</span>(newUser);
  }

  <span class="hljs-comment">/**
   * è·å–æ‰€æœ‰ç”¨æˆ·
   * 
   * <span class="hljs-doctag">@returns</span> ç”¨æˆ·æ•°ç»„ï¼ˆPromiseï¼‰
   * 
   * è¯´æ˜ï¼š
   *   - find() æ–¹æ³•æŸ¥è¯¢æ‰€æœ‰è®°å½•
   *   - è¿”å›æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰è®°å½•åˆ™è¿”å›ç©ºæ•°ç»„ []
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span>[]&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">find</span>();
  }

  <span class="hljs-comment">/**
   * æ ¹æ®IDè·å–å•ä¸ªç”¨æˆ·
   * 
   * <span class="hljs-doctag">@param</span> id ç”¨æˆ·ID
   * <span class="hljs-doctag">@returns</span> ç”¨æˆ·å¯¹è±¡ï¼ˆPromiseï¼‰
   * <span class="hljs-doctag">@throws</span> NotFoundException å¦‚æœç”¨æˆ·ä¸å­˜åœ¨
   * 
   * è¯´æ˜ï¼š
   *   - findOne({ where: { id } }) æ ¹æ®æ¡ä»¶æŸ¥è¯¢å•æ¡è®°å½•
   *   - å¦‚æœæ‰¾ä¸åˆ°è®°å½•ï¼Œè¿”å› null
   *   - éœ€è¦æ‰‹åŠ¨æ£€æŸ¥å¹¶æŠ›å‡ºå¼‚å¸¸
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(<span class="hljs-attr">id</span>: number): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span>&gt; {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">findOne</span>({ <span class="hljs-attr">where</span>: { id } });

    <span class="hljs-keyword">if</span> (!user) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NotFoundException</span>(<span class="hljs-string">`ç”¨æˆ· ID <span class="hljs-subst">${id}</span> ä¸å­˜åœ¨`</span>);
    }

    <span class="hljs-keyword">return</span> user;
  }

  <span class="hljs-comment">/**
   * æ›´æ–°ç”¨æˆ·ä¿¡æ¯
   * 
   * <span class="hljs-doctag">@param</span> id ç”¨æˆ·ID
   * <span class="hljs-doctag">@param</span> updateUserDto æ›´æ–°çš„æ•°æ®
   * <span class="hljs-doctag">@returns</span> æ›´æ–°åçš„ç”¨æˆ·å¯¹è±¡ï¼ˆPromiseï¼‰
   * <span class="hljs-doctag">@throws</span> NotFoundException å¦‚æœç”¨æˆ·ä¸å­˜åœ¨
   * 
   * è¯´æ˜ï¼š
   *   - å…ˆæŸ¥æ‰¾ç”¨æˆ·ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸
   *   - ä½¿ç”¨ Object.assign() æˆ–å±•å¼€è¿ç®—ç¬¦æ›´æ–°å­—æ®µ
   *   - save() æ–¹æ³•ä¼šï¼š
   *     1. å¦‚æœå®ä½“æœ‰ idï¼Œæ‰§è¡Œ UPDATE æ“ä½œ
   *     2. è‡ªåŠ¨æ›´æ–° updatedAt å­—æ®µï¼ˆå› ä¸ºä½¿ç”¨äº† <span class="hljs-doctag">@UpdateDateColumn</span>ï¼‰
   *     3. è¿”å›æ›´æ–°åçš„å®ä½“
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">update</span>(<span class="hljs-attr">id</span>: number, <span class="hljs-attr">updateUserDto</span>: <span class="hljs-title class_">UpdateUserDto</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span>&gt; {
    <span class="hljs-comment">// æŸ¥æ‰¾ç”¨æˆ·ï¼Œå¦‚æœä¸å­˜åœ¨ä¼šæŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findOne</span>(id);

    <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-comment">// Object.assign() å°† updateUserDto ä¸­çš„å±æ€§å¤åˆ¶åˆ° user å¯¹è±¡</span>
    <span class="hljs-comment">// åªæ›´æ–°æä¾›çš„å­—æ®µï¼Œæœªæä¾›çš„å­—æ®µä¿æŒä¸å˜</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(user, updateUserDto);

    <span class="hljs-comment">// ä¿å­˜æ›´æ–°</span>
    <span class="hljs-comment">// save() æ–¹æ³•æ£€æµ‹åˆ°å®ä½“æœ‰ idï¼Œä¼šæ‰§è¡Œ UPDATE è€Œä¸æ˜¯ INSERT</span>
    <span class="hljs-comment">// @UpdateDateColumn è£…é¥°çš„å­—æ®µä¼šè‡ªåŠ¨æ›´æ–°ä¸ºå½“å‰æ—¶é—´</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">save</span>(user);
  }

  <span class="hljs-comment">/**
   * åˆ é™¤ç”¨æˆ·
   * 
   * <span class="hljs-doctag">@param</span> id ç”¨æˆ·ID
   * <span class="hljs-doctag">@throws</span> NotFoundException å¦‚æœç”¨æˆ·ä¸å­˜åœ¨
   * 
   * è¯´æ˜ï¼š
   *   - remove() æ–¹æ³•éœ€è¦ä¼ å…¥å®ä½“å¯¹è±¡
   *   - delete() æ–¹æ³•å¯ä»¥ç›´æ¥ä¼ å…¥ idï¼Œæ›´é«˜æ•ˆ
   *   - ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ï¼Œdelete() æ›´ç®€å•ç›´æ¥
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">remove</span>(<span class="hljs-attr">id</span>: number): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; {
    <span class="hljs-comment">// å…ˆæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findOne</span>(id); <span class="hljs-comment">// å¦‚æœä¸å­˜åœ¨ä¼šæŠ›å‡ºå¼‚å¸¸</span>

    <span class="hljs-comment">// åˆ é™¤ç”¨æˆ·</span>
    <span class="hljs-comment">// delete() æ–¹æ³•æ ¹æ® id åˆ é™¤è®°å½•</span>
    <span class="hljs-comment">// è¿”å› DeleteResult å¯¹è±¡ï¼ŒåŒ…å« affected å±æ€§ï¼ˆå—å½±å“çš„è¡Œæ•°ï¼‰</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">delete</span>(id);
  }
}
</code></pre>
<p>ä»¥ä¸Šæ¶‰åŠçš„DTOæœ‰ä¸‰ä¸ªï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p>create-user.dto.ts:</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">IsString</span>, <span class="hljs-title class_">IsEmail</span>, <span class="hljs-title class_">IsOptional</span>, <span class="hljs-title class_">IsInt</span>, <span class="hljs-title class_">Min</span>, <span class="hljs-title class_">Max</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'class-validator'</span>;

<span class="hljs-comment">/**
 * CreateUserDto - åˆ›å»ºç”¨æˆ·æ•°æ®ä¼ è¾“å¯¹è±¡
 * ç”¨äºæ¥æ”¶åˆ›å»ºç”¨æˆ·çš„è¯·æ±‚æ•°æ®
 * 
 * DTO (Data Transfer Object) çš„ä½œç”¨ï¼š
 *   1. å®šä¹‰ API æ¥å£çš„è¯·æ±‚æ•°æ®ç»“æ„
 *   2. æä¾›æ•°æ®éªŒè¯è§„åˆ™ï¼ˆé€šè¿‡ class-validator è£…é¥°å™¨ï¼‰
 *   3. ç±»å‹å®‰å…¨ï¼šTypeScript ç±»å‹æ£€æŸ¥
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateUserDto</span> {
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsString</span>() - å­—ç¬¦ä¸²éªŒè¯è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šéªŒè¯è¯¥å­—æ®µå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹
   * 
   * å‚æ•°è¯´æ˜ï¼š
   *   - message: éªŒè¯å¤±è´¥æ—¶è¿”å›çš„é”™è¯¯æ¶ˆæ¯
   * 
   * éªŒè¯è§„åˆ™ï¼š
   *   - å¦‚æœä¼ å…¥çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼ŒéªŒè¯ä¼šå¤±è´¥
   *   - éªŒè¯å¤±è´¥æ—¶ï¼ŒNestJS ä¼šè¿”å› 400 é”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯ä¸º "ç”¨æˆ·åå¿…é¡»æ˜¯å­—ç¬¦ä¸²"
   * 
   * è¯´æ˜ï¼š
   *   - class-validator æä¾›äº†ä¸°å¯Œçš„éªŒè¯è£…é¥°å™¨
   *   - éœ€è¦é…åˆ ValidationPipe ä½¿ç”¨ï¼ˆåœ¨ main.ts ä¸­å·²é…ç½®ï¼‰
   *   - éªŒè¯åœ¨è¯·æ±‚åˆ°è¾¾æ§åˆ¶å™¨æ–¹æ³•ä¹‹å‰è‡ªåŠ¨æ‰§è¡Œ
   */</span>
  @<span class="hljs-title class_">IsString</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'ç”¨æˆ·åå¿…é¡»æ˜¯å­—ç¬¦ä¸²'</span> })
  <span class="hljs-attr">name</span>: string;
  
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsEmail</span>() - é‚®ç®±æ ¼å¼éªŒè¯è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šéªŒè¯è¯¥å­—æ®µå¿…é¡»æ˜¯æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼
   * 
   * å‚æ•°è¯´æ˜ï¼š
   *   - ç¬¬ä¸€ä¸ªå‚æ•° {}: é‚®ç®±éªŒè¯é€‰é¡¹ï¼ˆä½¿ç”¨é»˜è®¤é€‰é¡¹ï¼‰
   *   - ç¬¬äºŒä¸ªå‚æ•° { message: ... }: éªŒè¯å¤±è´¥æ—¶çš„é”™è¯¯æ¶ˆæ¯
   * 
   * éªŒè¯è§„åˆ™ï¼š
   *   - å¿…é¡»ç¬¦åˆé‚®ç®±æ ¼å¼ï¼ˆå¦‚ï¼šuser<span class="hljs-doctag">@example</span>.comï¼‰
   *   - éªŒè¯å¤±è´¥æ—¶è¿”å› "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
   * 
   * è¯´æ˜ï¼š
   *   - è¿™æ˜¯æ•°æ®éªŒè¯çš„é‡è¦ç¯èŠ‚ï¼Œé˜²æ­¢æ— æ•ˆæ•°æ®è¿›å…¥ç³»ç»Ÿ
   *   - éªŒè¯åœ¨æœåŠ¡å±‚å¤„ç†ä¹‹å‰å®Œæˆï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§
   */</span>
  @<span class="hljs-title class_">IsEmail</span>({}, { <span class="hljs-attr">message</span>: <span class="hljs-string">'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'</span> })
  <span class="hljs-attr">email</span>: string;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsOptional</span>() - å¯é€‰å­—æ®µè£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šæ ‡è®°è¯¥å­—æ®µæ˜¯å¯é€‰çš„ï¼Œå¦‚æœæœªæä¾›å€¼ï¼Œè·³è¿‡åç»­éªŒè¯
   * 
   * è¯´æ˜ï¼š
   *   - å¦‚æœå­—æ®µå­˜åœ¨ï¼Œåˆ™æ‰§è¡Œåç»­çš„éªŒè¯è§„åˆ™
   *   - å¦‚æœå­—æ®µä¸å­˜åœ¨ï¼ˆundefinedï¼‰ï¼Œåˆ™è·³è¿‡éªŒè¯
   *   - å¿…é¡»æ”¾åœ¨å…¶ä»–éªŒè¯è£…é¥°å™¨ä¹‹å‰
   *   - ä¸ TypeScript çš„å¯é€‰å±æ€§ï¼ˆ?ï¼‰é…åˆä½¿ç”¨
   */</span>
  @<span class="hljs-title class_">IsOptional</span>()

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsInt</span>() - æ•´æ•°éªŒè¯è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šéªŒè¯è¯¥å­—æ®µå¿…é¡»æ˜¯æ•´æ•°
   * 
   * è¯´æ˜ï¼š
   *   - éªŒè¯å€¼æ˜¯å¦ä¸ºæ•´æ•°ç±»å‹
   *   - å¦‚æœä¼ å…¥å°æ•°æˆ–éæ•°å­—ï¼ŒéªŒè¯ä¼šå¤±è´¥
   */</span>
  @<span class="hljs-title class_">IsInt</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'å¹´é¾„å¿…é¡»æ˜¯æ•´æ•°'</span> })

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Min</span>() - æœ€å°å€¼éªŒè¯è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šéªŒè¯æ•°å€¼å¿…é¡»å¤§äºæˆ–ç­‰äºæŒ‡å®šå€¼
   * 
   * å‚æ•°ï¼š0 - æœ€å°å€¼
   * è¯´æ˜ï¼šå¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°
   */</span>
  @<span class="hljs-title class_">Min</span>(<span class="hljs-number">0</span>, { <span class="hljs-attr">message</span>: <span class="hljs-string">'å¹´é¾„ä¸èƒ½å°äº0'</span> })

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Max</span>() - æœ€å¤§å€¼éªŒè¯è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šéªŒè¯æ•°å€¼å¿…é¡»å°äºæˆ–ç­‰äºæŒ‡å®šå€¼
   * 
   * å‚æ•°ï¼š200 - æœ€å¤§å€¼
   * è¯´æ˜ï¼šå¹´é¾„ä¸èƒ½è¶…è¿‡ 200
   * 
   * éªŒè¯é“¾è¯´æ˜ï¼š
   *   1. <span class="hljs-doctag">@IsOptional</span>() - å¦‚æœå­—æ®µä¸å­˜åœ¨ï¼Œè·³è¿‡åç»­éªŒè¯
   *   2. <span class="hljs-doctag">@IsInt</span>() - å¦‚æœå­—æ®µå­˜åœ¨ï¼Œå¿…é¡»æ˜¯æ•´æ•°
   *   3. <span class="hljs-doctag">@Min</span>(0) - å¦‚æœå­—æ®µå­˜åœ¨ä¸”æ˜¯æ•´æ•°ï¼Œå¿…é¡» &gt;= 0
   *   4. <span class="hljs-doctag">@Max</span>(150) - å¦‚æœå­—æ®µå­˜åœ¨ä¸”æ˜¯æ•´æ•°ï¼Œå¿…é¡» &lt;= 150
   * 
   * éªŒè¯é¡ºåºï¼šä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ‰§è¡Œï¼Œä»»ä½•ä¸€ä¸ªéªŒè¯å¤±è´¥éƒ½ä¼šè¿”å›é”™è¯¯
   */</span>
  @<span class="hljs-title class_">Max</span>(<span class="hljs-number">200</span>, { <span class="hljs-attr">message</span>: <span class="hljs-string">'å¹´é¾„ä¸èƒ½å¤§äº200'</span> })
  age?: number;
}
</code></pre>
<p>update-user.dto.tsï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">IsString</span>, <span class="hljs-title class_">IsEmail</span>, <span class="hljs-title class_">IsOptional</span>, <span class="hljs-title class_">IsInt</span>, <span class="hljs-title class_">Min</span>, <span class="hljs-title class_">Max</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'class-validator'</span>;

<span class="hljs-comment">/**
 * UpdateUserDto - æ›´æ–°ç”¨æˆ·æ•°æ®ä¼ è¾“å¯¹è±¡
 * ç”¨äºæ¥æ”¶æ›´æ–°ç”¨æˆ·çš„è¯·æ±‚æ•°æ®
 * æ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºæ›´æ–°æ—¶å¯èƒ½åªæ›´æ–°éƒ¨åˆ†å­—æ®µ
 * 
 * ä¸ CreateUserDto çš„åŒºåˆ«ï¼š
 *   - CreateUserDto: æ‰€æœ‰å¿…å¡«å­—æ®µéƒ½ä¸èƒ½ä¸ºç©ºï¼ˆnameã€email å¿…å¡«ï¼‰
 *   - UpdateUserDto: æ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯é€‰çš„ï¼Œç¬¦åˆ PATCH éƒ¨åˆ†æ›´æ–°çš„è¯­ä¹‰
 * 
 * è®¾è®¡åŸåˆ™ï¼š
 *   - éƒ¨åˆ†æ›´æ–°ï¼šç”¨æˆ·å¯ä»¥åªæ›´æ–°éœ€è¦ä¿®æ”¹çš„å­—æ®µ
 *   - çµæ´»æ€§ï¼šä¸éœ€è¦æä¾›æ‰€æœ‰å­—æ®µï¼Œåªæä¾›è¦æ›´æ–°çš„å­—æ®µå³å¯
 *   - éªŒè¯ï¼šå¦‚æœæä¾›äº†å­—æ®µï¼Œåˆ™å¿…é¡»ç¬¦åˆéªŒè¯è§„åˆ™
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpdateUserDto</span> {

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsOptional</span>() - æ ‡è®°ä¸ºå¯é€‰å­—æ®µ
   * 
   * è¯´æ˜ï¼šæ›´æ–°æ“ä½œä¸­ï¼Œå¦‚æœå®¢æˆ·ç«¯ä¸æä¾›æ­¤å­—æ®µï¼Œè¡¨ç¤ºä¸æ›´æ–°è¯¥å­—æ®µ
   */</span>
  @<span class="hljs-title class_">IsOptional</span>()

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsString</span>() - å¦‚æœæä¾›äº† name å­—æ®µï¼Œåˆ™å¿…é¡»æ˜¯å­—ç¬¦ä¸²
   * 
   * éªŒè¯é€»è¾‘ï¼š
   *   - å¦‚æœ name æœªæä¾›ï¼ˆundefinedï¼‰ï¼šè·³è¿‡éªŒè¯ï¼ˆå› ä¸º <span class="hljs-doctag">@IsOptional</span>ï¼‰
   *   - å¦‚æœ name æä¾›äº†ï¼šå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹
   */</span>
  @<span class="hljs-title class_">IsString</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'ç”¨æˆ·åå¿…é¡»æ˜¯å­—ç¬¦ä¸²'</span> })
  name?: string;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsOptional</span>() - æ ‡è®°ä¸ºå¯é€‰
   */</span>
  @<span class="hljs-title class_">IsOptional</span>()

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsEmail</span>() - å¦‚æœæä¾›äº† email å­—æ®µï¼Œåˆ™å¿…é¡»æ˜¯æœ‰æ•ˆé‚®ç®±æ ¼å¼
   * 
   * è¯´æ˜ï¼šæ›´æ–°é‚®ç®±æ—¶ï¼Œå¿…é¡»æä¾›æœ‰æ•ˆçš„é‚®ç®±æ ¼å¼
   */</span>
  @<span class="hljs-title class_">IsEmail</span>({}, { <span class="hljs-attr">message</span>: <span class="hljs-string">'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'</span> })
  email?: string;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsOptional</span>() - æ ‡è®°ä¸ºå¯é€‰
   */</span>
  @<span class="hljs-title class_">IsOptional</span>()

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@IsInt</span>() - å¦‚æœæä¾›äº† age å­—æ®µï¼Œåˆ™å¿…é¡»æ˜¯æ•´æ•°
   */</span>
  @<span class="hljs-title class_">IsInt</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">'å¹´é¾„å¿…é¡»æ˜¯æ•´æ•°'</span> })

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Min</span>(0) - å¦‚æœæä¾›äº† age å­—æ®µï¼Œåˆ™å¿…é¡» &gt;= 0
   */</span>
  @<span class="hljs-title class_">Min</span>(<span class="hljs-number">0</span>, { <span class="hljs-attr">message</span>: <span class="hljs-string">'å¹´é¾„ä¸èƒ½å°äº0'</span> })

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Max</span>(200) - å¦‚æœæä¾›äº† age å­—æ®µï¼Œåˆ™å¿…é¡» &lt;= 200
   * 
   * éªŒè¯é“¾è¯´æ˜ï¼ˆä¸ CreateUserDto ç›¸åŒï¼‰ï¼š
   *   1. <span class="hljs-doctag">@IsOptional</span>() - å­—æ®µå¯é€‰
   *   2. å¦‚æœæä¾›äº†å€¼ï¼Œåˆ™å¿…é¡»é€šè¿‡åç»­æ‰€æœ‰éªŒè¯
   *   3. éªŒè¯é¡ºåºï¼šIsInt -&gt; Min -&gt; Max
   */</span>
  @<span class="hljs-title class_">Max</span>(<span class="hljs-number">200</span>, { <span class="hljs-attr">message</span>: <span class="hljs-string">'å¹´é¾„ä¸èƒ½å¤§äº200'</span> })
  age?: number;
}
</code></pre>
<p>user-response.dto.ts ï¼š</p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-comment">/**
 * UserResponseDto - ç”¨æˆ·å“åº”æ•°æ®ä¼ è¾“å¯¹è±¡
 * ç”¨äº API å“åº”ï¼ŒåŒ…å«å®Œæ•´çš„ç”¨æˆ·ä¿¡æ¯
 * 
 * ä½œç”¨ï¼š
 *   1. å®šä¹‰ API å“åº”çš„æ•°æ®ç»“æ„
 *   2. ç±»å‹å®‰å…¨ï¼šç¡®ä¿å“åº”æ•°æ®çš„ç±»å‹æ­£ç¡®
 * 
 * ä¸ User å®ä½“çš„åŒºåˆ«ï¼š
 *   - User å®ä½“ï¼šå†…éƒ¨æ•°æ®ç»“æ„ï¼Œå¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯æˆ–å†…éƒ¨å­—æ®µ
 *   - UserResponseDtoï¼šå¯¹å¤–æš´éœ²çš„æ•°æ®ç»“æ„ï¼ŒåªåŒ…å«éœ€è¦è¿”å›ç»™å®¢æˆ·ç«¯çš„å­—æ®µ
 * 
 * æœ€ä½³å®è·µï¼š
 *   - ä½¿ç”¨ DTO æ§åˆ¶è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®
 *   - å¯ä»¥éšè—æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰
 *   - å¯ä»¥æ ¼å¼åŒ–æ•°æ®ï¼ˆå¦‚æ—¥æœŸæ ¼å¼ï¼‰
 *   - å¯ä»¥æ·»åŠ é¢å¤–çš„è®¡ç®—å­—æ®µ
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserResponseDto</span> {
  <span class="hljs-attr">id</span>: number;
  
  <span class="hljs-attr">name</span>: string;

  <span class="hljs-attr">email</span>: string;

  age?: number;

  <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>;

  <span class="hljs-attr">updatedAt</span>: <span class="hljs-title class_">Date</span>;
}
</code></pre>
<p>user.entity.tsæ˜¯ç”¨æˆ·å®ä½“ç±»ï¼ˆæ•°æ®åº“è¡¨æ˜ å°„ï¼‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Entity</span>,
  <span class="hljs-title class_">Column</span>,
  <span class="hljs-title class_">PrimaryGeneratedColumn</span>,
  <span class="hljs-title class_">CreateDateColumn</span>,
  <span class="hljs-title class_">UpdateDateColumn</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'typeorm'</span>;

<span class="hljs-comment">/**
 * User å®ä½“ç±» - TypeORM å®ä½“
 * 
 * ä½œç”¨ï¼š
 *   1. å®šä¹‰æ•°æ®åº“è¡¨ç»“æ„
 *   2. æ˜ å°„æ•°æ®åº“è¡¨åˆ° TypeScript ç±»
 *   3. æä¾›ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ
 * 
 * <span class="hljs-doctag">@Entity</span>('users') - å®ä½“è£…é¥°å™¨
 * 
 * ä½œç”¨ï¼šæ ‡è®°è¿™æ˜¯ä¸€ä¸ª TypeORM å®ä½“ç±»
 * å‚æ•°ï¼š'users' - æ•°æ®åº“è¡¨åï¼ˆå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨ç±»åçš„å°å†™å½¢å¼ï¼‰
 * 
 * è¯´æ˜ï¼š
 *   - TypeORM ä¼šæ ¹æ®è¿™ä¸ªå®ä½“ç±»è‡ªåŠ¨åˆ›å»ºæˆ–åŒæ­¥æ•°æ®åº“è¡¨
 *   - å®ä½“ç±»ä¸­çš„å±æ€§ä¼šæ˜ å°„åˆ°æ•°æ®åº“è¡¨çš„åˆ—
 */</span>
@<span class="hljs-title class_">Entity</span>(<span class="hljs-string">'users'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@PrimaryGeneratedColumn</span>() - ä¸»é”®è‡ªå¢åˆ—è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šå®šä¹‰ä¸»é”®åˆ—ï¼Œè‡ªåŠ¨ç”Ÿæˆé€’å¢çš„ ID
   * 
   * è¯´æ˜ï¼š
   *   - è¿™æ˜¯æ•°æ®åº“è¡¨çš„ä¸»é”®
   *   - è‡ªåŠ¨é€’å¢ï¼Œæ¯æ¬¡æ’å…¥æ–°è®°å½•æ—¶è‡ªåŠ¨ç”Ÿæˆ
   *   - ç±»å‹ä¸º numberï¼Œå¯¹åº” MySQL çš„ INT æˆ– BIGINT
   */</span>
  @<span class="hljs-title class_">PrimaryGeneratedColumn</span>()
  <span class="hljs-attr">id</span>: number;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Column</span>() - æ™®é€šåˆ—è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šå®šä¹‰æ•°æ®åº“è¡¨çš„æ™®é€šåˆ—
   * 
   * å‚æ•°è¯´æ˜ï¼š
   *   - type: 'varchar' - æ•°æ®åº“åˆ—ç±»å‹ï¼Œvarchar æ˜¯å¯å˜é•¿åº¦å­—ç¬¦ä¸²
   *   - length: 255 - æœ€å¤§é•¿åº¦
   *   - nullable: false - ä¸å…è®¸ä¸ºç©ºï¼ˆå¿…å¡«å­—æ®µï¼‰
   * 
   * è¯´æ˜ï¼š
   *   - å¦‚æœä¸æŒ‡å®š typeï¼ŒTypeORM ä¼šæ ¹æ® TypeScript ç±»å‹æ¨æ–­
   *   - string ç±»å‹é»˜è®¤æ˜ å°„ä¸º varchar(255)
   */</span>
  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'varchar'</span>, <span class="hljs-attr">length</span>: <span class="hljs-number">255</span>, <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">name</span>: string;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Column</span>() - é‚®ç®±åˆ—
   * 
   * å‚æ•°è¯´æ˜ï¼š
   *   - unique: true - å”¯ä¸€çº¦æŸï¼Œç¡®ä¿é‚®ç®±ä¸é‡å¤
   *   - nullable: false - ä¸å…è®¸ä¸ºç©º
   * 
   * è¯´æ˜ï¼š
   *   - unique: true ä¼šåœ¨æ•°æ®åº“å±‚é¢åˆ›å»ºå”¯ä¸€ç´¢å¼•
   *   - å¦‚æœå°è¯•æ’å…¥é‡å¤é‚®ç®±ï¼Œæ•°æ®åº“ä¼šæŠ›å‡ºé”™è¯¯
   */</span>
  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'varchar'</span>, <span class="hljs-attr">length</span>: <span class="hljs-number">255</span>, <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">email</span>: string;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@Column</span>() - å¹´é¾„åˆ—ï¼ˆå¯é€‰å­—æ®µï¼‰
   * 
   * å‚æ•°è¯´æ˜ï¼š
   *   - type: 'int' - æ•´æ•°ç±»å‹
   *   - nullable: true - å…è®¸ä¸ºç©ºï¼ˆå¯é€‰å­—æ®µï¼‰
   *   - default: null - é»˜è®¤å€¼ä¸º null
   * 
   * è¯´æ˜ï¼š
   *   - å¯é€‰å­—æ®µåœ¨ TypeScript ä¸­ä½¿ç”¨ ? æ ‡è®°
   *   - æ•°æ®åº“åˆ—ä¹Ÿè®¾ç½®ä¸º nullable: true
   */</span>
  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'int'</span>, <span class="hljs-attr">nullable</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span> })
  age?: number;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@CreateDateColumn</span>() - åˆ›å»ºæ—¶é—´åˆ—è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šè‡ªåŠ¨ç®¡ç†è®°å½•çš„åˆ›å»ºæ—¶é—´
   * 
   * è¯´æ˜ï¼š
   *   - TypeORM ä¼šåœ¨æ’å…¥æ–°è®°å½•æ—¶è‡ªåŠ¨è®¾ç½®å½“å‰æ—¶é—´
   *   - ç±»å‹ä¸º Dateï¼Œå¯¹åº” MySQL çš„ DATETIME æˆ– TIMESTAMP
   *   - ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼ŒTypeORM ä¼šè‡ªåŠ¨å¤„ç†
   */</span>
  @<span class="hljs-title class_">CreateDateColumn</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'timestamp'</span> })
  <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>;

  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@UpdateDateColumn</span>() - æ›´æ–°æ—¶é—´åˆ—è£…é¥°å™¨
   * 
   * ä½œç”¨ï¼šè‡ªåŠ¨ç®¡ç†è®°å½•çš„æ›´æ–°æ—¶é—´
   * 
   * è¯´æ˜ï¼š
   *   - TypeORM ä¼šåœ¨æ›´æ–°è®°å½•æ—¶è‡ªåŠ¨æ›´æ–°ä¸ºå½“å‰æ—¶é—´
   *   - æ¯æ¬¡æ‰§è¡Œ UPDATE æ“ä½œæ—¶ï¼Œæ­¤å­—æ®µä¼šè‡ªåŠ¨æ›´æ–°
   *   - ä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼ŒTypeORM ä¼šè‡ªåŠ¨å¤„ç†
   */</span>
  @<span class="hljs-title class_">UpdateDateColumn</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'timestamp'</span> })
  <span class="hljs-attr">updatedAt</span>: <span class="hljs-title class_">Date</span>;
}


</code></pre>
<p>user.module.tsï¼Œuserçš„æ¨¡å—ï¼Œå¯¼å…¥å…¶ä»–æ¨¡å—çš„æä¾›è€…ï¼Œæˆ–è€…å¯¼å‡ºè‡ªå·±çš„æä¾›è€…ç»™å…¶ä»–çš„æ¨¡å—å¯¼å…¥ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TypeOrmModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/typeorm'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./entities/user.entity'</span>;

<span class="hljs-comment">/**
 * UserModule - ç”¨æˆ·æ¨¡å—
 * 
 * å°è£…ç”¨æˆ·ç›¸å…³çš„æ‰€æœ‰åŠŸèƒ½ï¼š
 * - UserController: å¤„ç†ç”¨æˆ·ç›¸å…³çš„ HTTP è¯·æ±‚
 * - UserService: å¤„ç†ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡é€»è¾‘
 * - User Entity: ç”¨æˆ·å®ä½“ç±»ï¼ˆæ•°æ®åº“è¡¨æ˜ å°„ï¼‰
 */</span>

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@Module</span>() - æ¨¡å—è£…é¥°å™¨
 * 
 * ä½œç”¨ï¼šå®šä¹‰ä¸€ä¸ª NestJS æ¨¡å—ï¼Œæ˜¯ç»„ç»‡ä»£ç çš„åŸºæœ¬å•å…ƒ
 * 
 * å‚æ•°è¯´æ˜ï¼š
 *   - controllers: æ³¨å†Œè¯¥æ¨¡å—ä¸­çš„æ§åˆ¶å™¨
 *     * ä½œç”¨ï¼šä½¿æ§åˆ¶å™¨å¯ä»¥å¤„ç† HTTP è¯·æ±‚
 *     * è¯´æ˜ï¼šåªæœ‰åœ¨æ­¤æ•°ç»„ä¸­æ³¨å†Œçš„æ§åˆ¶å™¨æ‰èƒ½è¢« NestJS è¯†åˆ«å’Œå¤„ç†
 * 
 *   - providers: æ³¨å†Œè¯¥æ¨¡å—ä¸­çš„æä¾›è€…ï¼ˆæœåŠ¡ã€å·¥å‚ç­‰ï¼‰
 *     * ä½œç”¨ï¼šä½¿æœåŠ¡å¯ä»¥è¢«ä¾èµ–æ³¨å…¥ç³»ç»Ÿç®¡ç†
 *     * è¯´æ˜ï¼šåªæœ‰åœ¨æ­¤æ•°ç»„ä¸­æ³¨å†Œçš„æœåŠ¡æ‰èƒ½è¢«æ³¨å…¥ä½¿ç”¨
 *     * æ³¨æ„ï¼šæœåŠ¡é»˜è®¤æ˜¯å•ä¾‹çš„ï¼Œæ•´ä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªå®ä¾‹
 * 
 *   - exports: å¯¼å‡ºè¯¥æ¨¡å—ä¸­çš„æä¾›è€…
 *     * ä½œç”¨ï¼šä½¿å…¶ä»–æ¨¡å—å¯ä»¥å¯¼å…¥å¹¶ä½¿ç”¨è¿™äº›æä¾›è€…
 *     * è¯´æ˜ï¼š
 *       - åªæœ‰å¯¼å‡ºçš„æœåŠ¡æ‰èƒ½è¢«å…¶ä»–æ¨¡å—ä½¿ç”¨
 *       - å¦‚æœ UserService è¢«å¯¼å‡ºï¼Œå…¶ä»–æ¨¡å—å¯¼å…¥ UserModule åå°±å¯ä»¥ä½¿ç”¨ UserService
 *       - è¿™æ˜¯æ¨¡å—é—´å…±äº«åŠŸèƒ½çš„æ ‡å‡†æ–¹å¼
 * 
 *   - imports: å¯¼å…¥å…¶ä»–æ¨¡å—
 *     * ä½œç”¨ï¼šä½¿å½“å‰æ¨¡å—å¯ä»¥ä½¿ç”¨å…¶ä»–æ¨¡å—å¯¼å‡ºçš„åŠŸèƒ½
 *     * è¯´æ˜ï¼šä¾‹å¦‚å¯¼å…¥ TypeOrmModule.forFeature() å¯ä»¥ä½¿ç”¨æ•°æ®åº“ Repository
 * 
 * æ¨¡å—çš„ä½œç”¨ï¼š
 *   1. ä»£ç ç»„ç»‡ï¼šå°†ç›¸å…³åŠŸèƒ½ç»„ç»‡åœ¨ä¸€èµ·
 *   2. ä¾èµ–ç®¡ç†ï¼šç®¡ç†æ¨¡å—å†…éƒ¨çš„ä¾èµ–å…³ç³»
 *   3. å°è£…ï¼šéšè—å†…éƒ¨å®ç°ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£
 *   4. å¯å¤ç”¨ï¼šå¯¼å‡ºçš„æœåŠ¡å¯ä»¥åœ¨å¤šä¸ªæ¨¡å—ä¸­å¤ç”¨
 * 
 * æ¨¡å—çš„å±‚æ¬¡ç»“æ„ï¼š
 *   - æ ¹æ¨¡å—ï¼ˆAppModuleï¼‰ï¼šåº”ç”¨çš„å…¥å£æ¨¡å—
 *   - åŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ UserModuleï¼‰ï¼šå°è£…ç‰¹å®šåŠŸèƒ½çš„æ¨¡å—
 *   - å…±äº«æ¨¡å—ï¼šæä¾›é€šç”¨åŠŸèƒ½çš„æ¨¡å—
 */</span>
@<span class="hljs-title class_">Module</span>({
  <span class="hljs-comment">/**
   * TypeOrmModule.forFeature([User]) - æ³¨å†Œå®ä½“åˆ° TypeORM
   * 
   * ä½œç”¨ï¼šåœ¨å½“å‰æ¨¡å—ä¸­æ³¨å†Œ TypeORM å®ä½“ï¼Œä½¿è¯¥æ¨¡å—å¯ä»¥ä½¿ç”¨ Repository
   * 
   * å‚æ•°è¯´æ˜ï¼š
   *   - [User] - å®ä½“ç±»æ•°ç»„ï¼ŒæŒ‡å®šè¦åœ¨è¯¥æ¨¡å—ä¸­ä½¿ç”¨çš„å®ä½“
   * 
   * è¯´æ˜ï¼š
   *   - forFeature() å¿…é¡»åœ¨æ¯ä¸ªéœ€è¦ä½¿ç”¨ Repository çš„æ¨¡å—ä¸­è°ƒç”¨
   *   - æ³¨å†Œåï¼Œå¯ä»¥åœ¨è¯¥æ¨¡å—çš„æœåŠ¡ä¸­æ³¨å…¥ Repository&lt;User&gt;
   *   - ä¸ forRoot() çš„åŒºåˆ«ï¼š
   *     * forRoot(): åœ¨æ ¹æ¨¡å—ä¸­é…ç½®æ•°æ®åº“è¿æ¥ï¼ˆå…¨å±€é…ç½®ï¼‰
   *     * forFeature(): åœ¨åŠŸèƒ½æ¨¡å—ä¸­æ³¨å†Œå®ä½“ï¼ˆæ¨¡å—çº§é…ç½®ï¼‰
   * 
   * ä½¿ç”¨ç¤ºä¾‹ï¼š
   *   // user.service.ts
   *   constructor(
   *     <span class="hljs-doctag">@InjectRepository</span>(User)
   *     private userRepository: Repository&lt;User&gt;,
   *   ) {}
   */</span>
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">TypeOrmModule</span>.<span class="hljs-title function_">forFeature</span>([<span class="hljs-title class_">User</span>])],

  <span class="hljs-comment">/**
   * controllers - æ§åˆ¶å™¨æ•°ç»„
   * 
   * ä½œç”¨ï¼šæ³¨å†Œè¯¥æ¨¡å—ä¸­çš„æ§åˆ¶å™¨
   * è¯´æ˜ï¼šUserController ä¼šè¢«æ³¨å†Œï¼Œå¯ä»¥å¤„ç† /api/users ç›¸å…³çš„è¯·æ±‚
   */</span>
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">UserController</span>],

  <span class="hljs-comment">/**
   * providers - æä¾›è€…æ•°ç»„
   * 
   * ä½œç”¨ï¼šæ³¨å†Œè¯¥æ¨¡å—ä¸­çš„æœåŠ¡
   * è¯´æ˜ï¼šUserService ä¼šè¢«æ³¨å†Œï¼Œå¯ä»¥åœ¨ UserController ä¸­æ³¨å…¥ä½¿ç”¨
   */</span>
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">UserService</span>],

  <span class="hljs-comment">/**
   * exports - å¯¼å‡ºæ•°ç»„
   * 
   * ä½œç”¨ï¼šå¯¼å‡º UserServiceï¼Œä½¿å…¶ä»–æ¨¡å—å¯ä»¥å¯¼å…¥ UserModule å¹¶ä½¿ç”¨ UserService
   * ä½¿ç”¨åœºæ™¯ï¼š
   *   - å¦‚æœå…¶ä»–æ¨¡å—ï¼ˆå¦‚ OrderModuleï¼‰éœ€è¦ä½¿ç”¨ UserService
   *   - å¯ä»¥åœ¨ OrderModule ä¸­å¯¼å…¥ UserModule
   *   - ç„¶ååœ¨ OrderService ä¸­æ³¨å…¥ UserService
   * 
   * ç¤ºä¾‹ï¼š
   *   // order.module.ts
   *   <span class="hljs-doctag">@Module</span>({
   *     imports: [UserModule], // å¯¼å…¥ UserModule
   *     ...
   *   })
   *   
   *   // order.service.ts
   *   constructor(private userService: UserService) {} // å¯ä»¥æ³¨å…¥ä½¿ç”¨
   */</span>
  <span class="hljs-attr">exports</span>: [<span class="hljs-title class_">UserService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserModule</span> {}
</code></pre>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>ä»¥ä¸Šæ˜¯ Nest.js çš„åŸºç¡€ä»‹ç»åŠç®€æ˜“ CRUD å®ç°ï¼Œè¿™æ˜¯æˆ‘å…¥é—¨ Nest.js çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯ä¸ªäººå­¦ä¹ è®°å½•ã€‚</p>
<p>æƒ³è¦æ·±å…¥å­¦ä¹ ï¼Œå¯ä¼˜å…ˆæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼Œä¹Ÿå¯å‚è€ƒå…¶ä»–åšä¸»çš„æ–‡ç« ä¸è§†é¢‘ã€‚</p>
<p>ä¸å¿…çº ç»“ â€œå­¦ Nest.js ä¸ºä½•ä¸ç›´æ¥å­¦ Java/Goâ€ï¼šä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘å­¦ä¹  Nest.js çš„æˆæœ¬æ›´ä½ï¼Œä¸”ç°é˜¶æ®µå¹¶éä¸ºäº†å·¥ä½œä¸šåŠ¡åº”ç”¨ï¼Œæ›´å¤šæ˜¯æ–¹ä¾¿è‡ªå·±å¶å°”ç¼–å†™ä¸€äº›ä¸ªäººå°Demoã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆè¯´ String æ˜¯ JavaScript ä¸­â€œæœ€å®‰é™å´æœ€å±é™©â€çš„ç±»å‹]]></title>    <link>https://juejin.cn/post/7586587644823191586</link>    <guid>https://juejin.cn/post/7586587644823191586</guid>    <pubDate>2025-12-23T02:25:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7586587644823191586" data-draft-id="7586559672129437748" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆè¯´ String æ˜¯ JavaScript ä¸­â€œæœ€å®‰é™å´æœ€å±é™©â€çš„ç±»å‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-23T02:25:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¯ä»¶æ±‚ç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1038379932466263"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆè¯´ String æ˜¯ JavaScript ä¸­â€œæœ€å®‰é™å´æœ€å±é™©â€çš„ç±»å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1038379932466263/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¯ä»¶æ±‚ç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-23T02:25:34.000Z" title="Tue Dec 23 2025 02:25:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ 31 å²ã€çˆ±æŠ˜è…¾ä»£ç ã€ä¹Ÿçˆ±æŠŠæŠ€æœ¯è®²æˆæ•…äº‹çš„å°ç±³ã€‚</p>
<p>å¦‚æœä½ å†™ JavaScript çš„æ—¶é—´å¤Ÿä¹…ï¼Œä¸€å®šä¼šæœ‰ä¸€ç§æ„Ÿè§‰ï¼š</p>
<blockquote>
<p>JS é‡Œæœ€ç†Ÿæ‚‰ã€ç”¨å¾—æœ€å¤šã€ä½†åˆæœ€å®¹æ˜“è¢«å¿½ç•¥çš„ç±»å‹ï¼Œå°±æ˜¯ Stringã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å¤©å¤©åœ¨ç”¨å®ƒï¼Œå´å¾ˆå°‘è®¤çœŸâ€œèŠä¸€èŠå®ƒâ€ã€‚äºæ˜¯æœ‰ä¸€å¤©ï¼Œæˆ‘åœ¨æ•²ä»£ç çš„æ—¶å€™çªç„¶è„‘è¡¥äº†ä¸€ä¸ªç”»é¢ï¼š</p>
<blockquote>
<p><strong>String ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯ä¸€ä¸ªåºå¤§çš„â€œæ–‡å­—ç‹å›½â€ã€‚</strong></p>
</blockquote>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘å°±å¸¦ä½ è·Ÿç€æˆ‘ï¼Œä¸€èµ·èµ°è¿› JavaScript çš„<strong>æ–‡å­—ç‹å›½</strong>ï¼Œçœ‹çœ‹ String è¿™ä¸ªâ€œè€æœ‹å‹â€ï¼Œåˆ°åº•è—äº†å¤šå°‘ä½ å¯èƒ½æ²¡è®¤çœŸæƒ³è¿‡çš„ç§˜å¯†ã€‚</p>
<h2 data-id="heading-0">å­—ç¬¦å­—é¢é‡ï¼šæ–‡å­—ç‹å›½çš„â€œå…¥å£å¤§é—¨â€</h2>
<p>æ•…äº‹è¦ä»â€œè¿›åŸâ€è¯´èµ·ã€‚åœ¨ JavaScript é‡Œï¼Œåªè¦ä½ æƒ³è¿›å…¥æ–‡å­—ç‹å›½ï¼Œå°±å¿…é¡»ä»<strong>å­—ç¬¦å­—é¢é‡</strong>è¿™å‡ æ‰‡å¤§é—¨è¿›å»ã€‚</p>
<p><strong>1ã€ä¸‰ç§æœ€å¸¸è§çš„å­—ç¬¦å­—é¢é‡</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17eaef09612543e1ba37052969ae06ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=Hlcb3v%2BAXSMmisRwfF6DpCS3%2Bzw%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨ JS é‡Œï¼Œå­—ç¬¦ä¸²å¯ä»¥ç”¨ï¼š</p>
<ul>
<li>åŒå¼•å· "</li>
<li>å•å¼•å· '</li>
<li>åå¼•å· `ï¼ˆæ¨¡æ¿å­—é¢é‡ï¼‰</li>
</ul>
<p>æˆ‘ç¬¬ä¸€æ¬¡å­¦ JS çš„æ—¶å€™ï¼Œç‰¹åˆ«çº ç»“ï¼š <strong>â€œè€å¸ˆï¼Œåˆ°åº•ç”¨å•å¼•å·è¿˜æ˜¯åŒå¼•å·ï¼Ÿâ€</strong></p>
<p>åæ¥å·¥ä½œå‡ å¹´æ‰å‘ç°ï¼š<strong>JavaScript æœ¬èº«ä¸åœ¨ä¹ï¼Œé¡¹ç›®è§„èŒƒæ‰åœ¨ä¹ã€‚</strong></p>
<p><strong>2ã€è½¬ä¹‰å­—ç¬¦ï¼šåŸé—¨çš„â€œæš—å·â€</strong></p>
<p>å¦‚æœä½ æƒ³åœ¨å­—ç¬¦ä¸²é‡Œæ”¾ä¸€äº›â€œç‰¹æ®Šè§’è‰²â€ï¼Œå°±å¾—ç”¨è½¬ä¹‰å­—ç¬¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e1d4f73f2cc400683029d53d58dbbfa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=T64C%2FkBq8%2FqIN30kgPY11z%2FCv4U%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¸¸è§è½¬ä¹‰å­—ç¬¦å¯¹ç…§è¡¨ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0c688cd1eec4fa4b35421b872aecde0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=kc%2FG0nExT4E8jYt%2BT2BNuJZ4LVM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨æ–‡å­—ç‹å›½é‡Œï¼Œ<strong>åæ–œæ å°±åƒâ€œé€šè¡Œè¯â€ï¼Œå‘Šè¯‰ JSï¼šåé¢è¿™ä¸ªå­—ç¬¦åˆ«æŒ‰åŸæ¥çš„æ„æ€ç†è§£ã€‚</strong></p>
<h2 data-id="heading-1">å­—ç¬¦ä¸²çš„ç‰¹ç‚¹ï¼šæ–‡å­—ç‹å›½çš„â€œåŸºæœ¬å›½æ³•â€</h2>
<p>è¿›äº†åŸï¼Œæ€»è¦å…ˆäº†è§£è¿™ä¸ªå›½å®¶çš„åŸºæœ¬è§„åˆ™ã€‚</p>
<p><strong>1ã€å­—ç¬¦ä¸²æ˜¯â€œä¸å¯å˜çš„â€</strong></p>
<p>è¿™æ˜¯ String æœ€é‡è¦ã€ä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«å¿½ç•¥çš„ä¸€ç‚¹ï¼š<strong>å­—ç¬¦ä¸²ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸å¯è¢«ä¿®æ”¹ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/facbe3c7df89484aa42d12c80484ca25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=dt3f1MYy9wOBQWbzwydsiqA6f8U%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä½ ä»¥ä¸ºä½ åœ¨æ”¹å­—ç¬¦ä¸²ï¼Œå®é™…ä¸Š JS åœ¨å¿ƒé‡Œå†·å†·åœ°å¯¹ä½ è¯´äº†ä¸€å¥ï¼šâ€œå¯¹ä¸èµ·ï¼Œæœ¬å›½ä¸æ”¯æŒåŸåœ°ä¿®æ”¹ã€‚â€</p>
<p>ä½ çœŸæ­£èƒ½åšçš„ï¼Œåªæ˜¯<strong>åˆ›å»ºä¸€ä¸ªæ–°å­—ç¬¦ä¸²</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42f3646a545644f8b9a6ca85ce9a0371~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=3hab4wfjHQCKUPUdHYBr2yTaGjg%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å­—ç¬¦ä¸²å°±åƒä¸€å—å·²ç»çƒ¤å¥½çš„è›‹ç³•ï¼Œä½ ä¸èƒ½ä»ä¸­é—´æŒ–ä¸€å—å†å¡å›å»ï¼Œä½ åªèƒ½<strong>é‡æ–°çƒ¤ä¸€å—æ–°çš„ã€‚</strong></p>
<p><strong>2ã€å­—ç¬¦ä¸²æœ‰ lengthï¼Œä½†ä¸æ˜¯æ•°ç»„</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5472b6befd24af89c0aede528f1bd18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=LhIXUpTxdiNYnSAJT7P4i8QOR5E%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å¾ˆå¤šæ–°äººä¸€çœ‹åˆ° str[0]ï¼Œå°±è¯¯ä»¥ä¸ºå­—ç¬¦ä¸²æ˜¯æ•°ç»„ã€‚</p>
<p><strong>é”™ã€‚</strong> å­—ç¬¦ä¸²åªæ˜¯ <strong>â€œåƒæ•°ç»„ä¸€æ ·å¯è¯»â€</strong> ï¼Œä½†æœ¬è´¨ä¸æ˜¯æ•°ç»„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db36915bcf544aa8a319e9ce5c27ec75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=K%2F1JKnQ4zLSh75BeDQKATeoBpec%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-2">è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼šè·¨å›½å…¬æ°‘çš„â€œèº«ä»½è½¬æ¢â€ã€‚</h2>
<p>åœ¨æ–‡å­—ç‹å›½é‡Œï¼Œç»å¸¸ä¼šæœ‰â€œå¤–æ¥äººå£â€ï¼Œæ¯”å¦‚ï¼šæ•°å­—ã€å¸ƒå°”å€¼ã€å¯¹è±¡â€¦â€¦ä»–ä»¬æƒ³è¿›åŸï¼Œå°±å¿…é¡»<strong>å˜æˆå­—ç¬¦ä¸²</strong>ã€‚</p>
<p><strong>1ã€ä½¿ç”¨ String()</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27fd57562330497093f18e1d1d9fdcfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=ZjZIU2Agx%2B4FJjklcEwLgsONq70%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¿™æ˜¯æœ€å®‰å…¨ã€æœ€é€šç”¨çš„æ–¹å¼ã€‚</p>
<p><strong>2ã€ä½¿ç”¨ toString()</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12e9a3fee69d486dbd158746cdbac086~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=jvL2Acwq6iWnltPifB3GW7Yb4sk%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä½†è¦æ³¨æ„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d27855b2d48e4e7d85bc8a4bba9b8fab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=lxRnGAuixgxy4C9oVkl%2B00bqh8I%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>3ã€ç»éªŒæ€»ç»“</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0738ad2d30141c0a1952de289d1ee31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=z1vWKstVQztKCPDzTmA5Cgm6qTE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>4ã€éšå¼è½¬æ¢ï¼ˆä¸æ¨èä½†ä½ ä¸€å®šè§è¿‡ï¼‰</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f99955d6d3e4650a94df180c134d4ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=O96jGD0aMUqVdlsIz15ipVR%2BYIU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¿™æ˜¯ JS åœ¨èƒŒåå·å·åšçš„äº‹æƒ…ã€‚å°ç±³çš„å¿ å‘Šæ˜¯ï¼š<strong>é¢è¯•å¯ä»¥è¯´ï¼Œä»£ç é‡Œå°‘ç”¨ã€‚</strong></p>
<h2 data-id="heading-3">æ¨¡æ¿å­—é¢é‡ï¼šæ–‡å­—ç‹å›½çš„â€œé«˜çº§è¯­æ³•â€</h2>
<p>ES6 ä¹‹åï¼Œæ–‡å­—ç‹å›½è¿æ¥äº†ä¸€æ¬¡â€œæŠ€æœ¯é©å‘½â€ã€‚</p>
<p><strong>1ã€æ¨¡æ¿å­—é¢é‡ç™»åœº</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f828d53315640d3b07046a7b8274368~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=evX%2F%2FjqcZJZ9M7ioXTnR1oKsakk%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä½ ç¬¬ä¸€æ¬¡ç”¨æ¨¡æ¿å­—é¢é‡æ—¶ï¼Œä¸€å®šä¼šæœ‰ä¸€ç§æ„Ÿè§‰ï¼šâ€œä»¥å‰é‚£å † + æ‹¼å­—ç¬¦ä¸²çš„æ—¥å­ï¼Œç»ˆäºç»“æŸäº†ã€‚â€</p>
<p><strong>2ã€æ”¯æŒå¤šè¡Œå­—ç¬¦ä¸²</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01e45161932149c5bfe5f47293e6712e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=hXKePtWfoIviFGgi2BXxkklbHCE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä¸ç”¨ \nï¼Œä¸ç”¨æ‹¼æ¥ï¼Œ<strong>å†™ä»€ä¹ˆæ ·ï¼Œå°±æ˜¯ä»€ä¹ˆæ ·ã€‚</strong></p>
<h2 data-id="heading-4">å­—ç¬¦ä¸²æ’å€¼ï¼šè®©å­—ç¬¦ä¸²â€œæ´»èµ·æ¥â€</h2>
<p>æ¨¡æ¿å­—é¢é‡çœŸæ­£çš„çµé­‚ï¼Œæ˜¯<strong>å­—ç¬¦ä¸²æ’å€¼</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa4d1488a28c4dcca18c9a5139a59e4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=e0k8BQbTyWGKRIpdxaWZ8JUQFcA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>${} é‡Œï¼š</p>
<ul>
<li>å¯ä»¥å†™å˜é‡</li>
<li>å¯ä»¥å†™è¡¨è¾¾å¼</li>
<li>å¯ä»¥å†™å‡½æ•°è°ƒç”¨</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffba3da2d53f47ecb362535ff317d432~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=C0ymmEFGvrujx1Zh5SiHfzDmB%2FE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æœ¬è´¨ç†è§£</strong></p>
<p>å­—ç¬¦ä¸²æ’å€¼ä¸æ˜¯â€œæ‹¼æ¥å­—ç¬¦ä¸²â€ï¼Œè€Œæ˜¯ <strong>â€œåœ¨å­—ç¬¦ä¸²é‡Œæ‰§è¡Œ JavaScript è¡¨è¾¾å¼â€ã€‚</strong></p>
<h2 data-id="heading-5">æ¨¡æ¿å­—é¢é‡æ ‡ç­¾å‡½æ•°ï¼šæ–‡å­—ç‹å›½çš„â€œç¿»è¯‘å®˜â€</h2>
<p>æ¥ä¸‹æ¥è¿™ä¸€éƒ¨åˆ†ï¼Œæ˜¯å¾ˆå¤šäºº<strong>è§è¿‡ï¼Œä½†æ²¡ç”¨è¿‡ï¼Œä¹Ÿæ²¡ææ‡‚çš„é«˜çº§ç©æ³•</strong>ã€‚</p>
<p><strong>1ã€ä»€ä¹ˆæ˜¯æ ‡ç­¾å‡½æ•°ï¼Ÿ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5b9fa9b50554c31b9ffd210dc39c15f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=9jZHQ0PufzA%2F6HHew9TBGY0S7QY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¾“å‡ºç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eba3129b8904562aa716c98d5feeb21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=vC0KAmfTdTZOQ7g1SqmqkwMVwhM%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>è§£é‡Šä¸€ä¸‹</strong></p>
<ul>
<li>stringsï¼šè¢« ${} åˆ†å‰²åçš„å­—ç¬¦ä¸²æ•°ç»„</li>
<li>valuesï¼šæ’å€¼è¡¨è¾¾å¼çš„å€¼</li>
</ul>
<p><strong>2ã€æ ‡ç­¾å‡½æ•°èƒ½å¹²å˜›ï¼Ÿ</strong></p>
<p>ç¤ºä¾‹ï¼šé˜²æ­¢ XSS</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d12c54fa0d54d3fb364a16b639debb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=UMD3BVx5FY6cYDqhYCE5Bqxf7Gk%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>ç°å®æ„ä¹‰</strong></p>
<ul>
<li>æ¨¡æ¿å¼•æ“</li>
<li>SQL æ„å»º</li>
<li>XSS é˜²æŠ¤</li>
<li>å›½é™…åŒ–æ–‡æœ¬å¤„ç†</li>
</ul>
<p>å¯ä»¥ç†è§£ä¸ºï¼š<strong>æ ‡ç­¾å‡½æ•° = å­—ç¬¦ä¸²çš„â€œé¢„å¤„ç†å™¨â€ã€‚</strong></p>
<h2 data-id="heading-6">åŸå§‹å­—ç¬¦ä¸²ï¼šä¸è¢«è½¬ä¹‰çš„â€œåŸè²Œæ–‡æœ¬â€</h2>
<p>æœ€åä¸€ä¸ªç‚¹ï¼Œéå¸¸ç»†ï¼Œä½†éå¸¸æœ‰ç”¨ã€‚</p>
<p><strong>1ã€ä»€ä¹ˆæ˜¯åŸå§‹å­—ç¬¦ä¸²ï¼Ÿ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f587fa5811a940ac81981b291bb2000e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=CjNH66icLhhOWjYlWPVs8F10Qp4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>String.raw ä¼š<strong>ä¿ç•™å­—ç¬¦ä¸²çš„åŸå§‹å†…å®¹</strong>ã€‚</p>
<p><strong>2ã€ä½¿ç”¨åœºæ™¯</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a35502ba16eb4b518a5e08f0a2bf9861~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2v5Lu25rGC55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767061533&amp;x-signature=Yqzb1NkkZAk7L0cXtwbkw3J6yWE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>é€‚åˆï¼š</p>
<ul>
<li>æ­£åˆ™è¡¨è¾¾å¼</li>
<li>Windows è·¯å¾„</li>
<li>éœ€è¦ç²¾ç¡®å­—ç¬¦çš„åœºæ™¯</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong></p>
<p>åŸå§‹å­—ç¬¦ä¸²ï¼Œå°±æ˜¯â€œæˆ‘å†™ä»€ä¹ˆï¼Œä½ å°±ç»™æˆ‘ä»€ä¹ˆâ€ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“ï¼šString ä¸ç®€å•ï¼Œåªæ˜¯ä½ å¤ªç†Ÿäº†</h2>
<p>å†™åˆ°è¿™é‡Œï¼Œå°ç±³æƒ³è¯´ä¸€å¥æå¿ƒçªå­çš„ï¼š</p>
<blockquote>
<p><strong>String æ˜¯ JavaScript é‡Œæœ€åŸºç¡€çš„ç±»å‹ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«ä½ä¼°çš„ç±»å‹ä¹‹ä¸€ã€‚</strong></p>
</blockquote>
<p>ä½ å¤©å¤©åœ¨ç”¨å®ƒï¼Œä½†çœŸæ­£ç†è§£å®ƒçš„<strong>ä¸å¯å˜æ€§ã€æ¨¡æ¿èƒ½åŠ›ã€æ ‡ç­¾å‡½æ•°</strong>ä¹‹åï¼Œä½ ä¼šå‘ç°ï¼š</p>
<ul>
<li>ä»£ç æ›´ä¼˜é›…</li>
<li>æ€è·¯æ›´æ¸…æ™°</li>
<li>é¢è¯•ä¹Ÿæ›´æœ‰åº•æ°”</li>
</ul>
<h2 data-id="heading-8">END</h2>
<p>æˆ‘æ˜¯å°ç±³ï¼Œä¸€ä¸ªå–œæ¬¢åˆ†äº«æŠ€æœ¯çš„31å²ç¨‹åºå‘˜ã€‚å¦‚æœä½ å–œæ¬¢æˆ‘çš„æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·â€œ<strong>è½¯ä»¶æ±‚ç”Ÿ</strong>â€ï¼Œè·å–æ›´å¤šæŠ€æœ¯å¹²è´§ï¼</p>
<p>å¥½æœ‹å‹ä»¬ï¼Œæˆ‘ä»¬ä¸‹ç¯‡è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>