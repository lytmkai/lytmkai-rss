<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æ·±å…¥è§£æ Vue SSR ç¼–è¯‘å™¨çš„æ ¸å¿ƒå‡½æ•°ï¼šcompile]]></title>    <link>https://juejin.cn/post/7569959427878273034</link>    <guid>https://juejin.cn/post/7569959427878273034</guid>    <pubDate>2025-11-09T00:15:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569959427878273034" data-draft-id="7569976345929859123" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥è§£æ Vue SSR ç¼–è¯‘å™¨çš„æ ¸å¿ƒå‡½æ•°ï¼šcompile"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-09T00:15:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥è§£æ Vue SSR ç¼–è¯‘å™¨çš„æ ¸å¿ƒå‡½æ•°ï¼šcompile
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T00:15:19.000Z" title="Sun Nov 09 2025 00:15:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Vue 3 çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSR, Server-Side Renderingï¼‰ä½“ç³»ä¸­ï¼Œ<code>compile()</code> æ˜¯ä¸€ä¸ªå…³é”®å‡½æ•°ã€‚å®ƒè´Ÿè´£å°†æ¨¡æ¿å­—ç¬¦ä¸²æˆ– AST æŠ½è±¡è¯­æ³•æ ‘è½¬åŒ–ä¸º <strong>å¯åœ¨æœåŠ¡ç«¯æ‰§è¡Œçš„æ¸²æŸ“å‡½æ•°</strong>ï¼Œä»¥ç”Ÿæˆæœ€ç»ˆçš„ HTML å­—ç¬¦ä¸²ã€‚</p>
<p>æœ¬æ–‡æˆ‘ä»¬å°†æ·±å…¥è§£æ <code>compile</code> çš„å®Œæ•´å®ç°ï¼Œå‰–æå…¶åº•å±‚æœºåˆ¶ä¸è®¾è®¡å“²å­¦ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ¦‚å¿µï¼š<code>compile</code> æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</h2>
<p><code>compile</code> æ˜¯ Vue SSR ç¼–è¯‘æµç¨‹çš„å…¥å£å‡½æ•°ï¼ŒåŠŸèƒ½ä¸Šç±»ä¼¼äºå‰ç«¯ç‰ˆæœ¬çš„ <code>@vue/compiler-dom</code> çš„ <code>compile</code>ï¼Œä½†ä¸“ä¸ºæœåŠ¡ç«¯æ¸²æŸ“ä¼˜åŒ–ã€‚<br/>
å®ƒä¸»è¦å®Œæˆä»¥ä¸‹å‡ ä¸ªä»»åŠ¡ï¼š</p>
<ol>
<li><strong>è§£ææ¨¡æ¿</strong>ï¼ˆParsingï¼‰â†’ ç”Ÿæˆ ASTï¼›</li>
<li><strong>æ‰§è¡Œè½¬æ¢</strong>ï¼ˆTransformï¼‰â†’ ä¸º SSR æ³¨å…¥ç‰¹å®šé€»è¾‘ï¼›</li>
<li><strong>ç”Ÿæˆä»£ç </strong>ï¼ˆCodegenï¼‰â†’ è¾“å‡ºæœåŠ¡ç«¯å¯æ‰§è¡Œçš„æ¸²æŸ“å‡½æ•°ä»£ç ã€‚</li>
</ol>
<p>æ ¸å¿ƒç›®æ ‡ï¼šæŠŠ <code>.vue</code> æ¨¡æ¿è½¬åŒ–ä¸ºæœåŠ¡ç«¯å¯è¿è¡Œçš„æ¸²æŸ“å‡½æ•°ï¼Œä½¿å¾—åŒä¸€æ¨¡æ¿åœ¨ Node.js ç¯å¢ƒä¸‹å¯ä»¥ç”Ÿæˆ HTML å­—ç¬¦ä¸²ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€åŸç†ï¼šä»æ¨¡æ¿åˆ°æ¸²æŸ“å‡½æ•°çš„ç¼–è¯‘æµç¨‹</h2>
<p>æ¥çœ‹å®Œæ•´æºç ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">export</span> <span class="hljs-string">function</span> <span class="hljs-string">compile(</span>
  <span class="hljs-attr">source:</span> <span class="hljs-string">string</span> <span class="hljs-string">|</span> <span class="hljs-string">RootNode,</span>
  <span class="hljs-attr">options:</span> <span class="hljs-string">CompilerOptions</span> <span class="hljs-string">=</span> {}<span class="hljs-string">,</span>
<span class="hljs-string">):</span> <span class="hljs-string">CodegenResult</span> {
  <span class="hljs-string">options</span> <span class="hljs-string">=</span> {
    <span class="hljs-string">...options</span>,
    <span class="hljs-string">...parserOptions</span>,
    <span class="hljs-attr">ssr:</span> <span class="hljs-literal">true</span>,
    <span class="hljs-attr">inSSR:</span> <span class="hljs-literal">true</span>,
    <span class="hljs-attr">scopeId:</span> <span class="hljs-string">options.mode</span> <span class="hljs-string">===</span> <span class="hljs-string">'function'</span> <span class="hljs-string">?</span> <span class="hljs-attr">null :</span> <span class="hljs-string">options.scopeId</span>,
    <span class="hljs-attr">prefixIdentifiers:</span> <span class="hljs-literal">true</span>,
    <span class="hljs-attr">cacheHandlers:</span> <span class="hljs-literal">false</span>,
    <span class="hljs-attr">hoistStatic:</span> <span class="hljs-literal">false</span>,
  }

  <span class="hljs-string">const</span> <span class="hljs-string">ast</span> <span class="hljs-string">=</span> <span class="hljs-string">typeof</span> <span class="hljs-string">source</span> <span class="hljs-string">===</span> <span class="hljs-string">'string'</span> <span class="hljs-string">?</span> <span class="hljs-string">baseParse(source</span>, <span class="hljs-string">options)</span> <span class="hljs-string">:</span> <span class="hljs-string">source</span>
  <span class="hljs-string">rawOptionsMap.set(ast</span>, <span class="hljs-string">options)</span>

  <span class="hljs-string">transform(ast</span>, {
    <span class="hljs-string">...options</span>,
    <span class="hljs-attr">hoistStatic:</span> <span class="hljs-literal">false</span>,
    <span class="hljs-attr">nodeTransforms:</span> [
      <span class="hljs-string">transformVBindShorthand</span>,
      <span class="hljs-string">ssrTransformIf</span>,
      <span class="hljs-string">ssrTransformFor</span>,
      <span class="hljs-string">trackVForSlotScopes</span>,
      <span class="hljs-string">transformExpression</span>,
      <span class="hljs-string">ssrTransformSlotOutlet</span>,
      <span class="hljs-string">ssrInjectFallthroughAttrs</span>,
      <span class="hljs-string">ssrInjectCssVars</span>,
      <span class="hljs-string">ssrTransformElement</span>,
      <span class="hljs-string">ssrTransformComponent</span>,
      <span class="hljs-string">trackSlotScopes</span>,
      <span class="hljs-string">transformStyle</span>,
      <span class="hljs-string">...(options.nodeTransforms</span> <span class="hljs-string">||</span> []<span class="hljs-string">)</span>,
    ],
    <span class="hljs-attr">directiveTransforms:</span> {
      <span class="hljs-attr">bind:</span> <span class="hljs-string">transformBind</span>,
      <span class="hljs-attr">on:</span> <span class="hljs-string">transformOn</span>,
      <span class="hljs-attr">model:</span> <span class="hljs-string">ssrTransformModel</span>,
      <span class="hljs-attr">show:</span> <span class="hljs-string">ssrTransformShow</span>,
      <span class="hljs-attr">cloak:</span> <span class="hljs-string">noopDirectiveTransform</span>,
      <span class="hljs-attr">once:</span> <span class="hljs-string">noopDirectiveTransform</span>,
      <span class="hljs-attr">memo:</span> <span class="hljs-string">noopDirectiveTransform</span>,
      <span class="hljs-string">...(options.directiveTransforms</span> <span class="hljs-string">||</span> {}<span class="hljs-string">)</span>,
    },
  }<span class="hljs-string">)</span>

  <span class="hljs-string">ssrCodegenTransform(ast</span>, <span class="hljs-string">options)</span>

  <span class="hljs-string">return</span> <span class="hljs-string">generate(ast</span>, <span class="hljs-string">options)</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-2">ğŸ” æ­¥éª¤ 1ï¼šé…ç½®ç¼–è¯‘é€‰é¡¹</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">options</span> <span class="hljs-string">=</span> {
  <span class="hljs-string">...options</span>,
  <span class="hljs-string">...parserOptions</span>,
  <span class="hljs-attr">ssr:</span> <span class="hljs-literal">true</span>,
  <span class="hljs-attr">inSSR:</span> <span class="hljs-literal">true</span>,
  <span class="hljs-attr">scopeId:</span> <span class="hljs-string">options.mode</span> <span class="hljs-string">===</span> <span class="hljs-string">'function'</span> <span class="hljs-string">?</span> <span class="hljs-attr">null :</span> <span class="hljs-string">options.scopeId</span>,
  <span class="hljs-attr">prefixIdentifiers:</span> <span class="hljs-literal">true</span>,
  <span class="hljs-attr">cacheHandlers:</span> <span class="hljs-literal">false</span>,
  <span class="hljs-attr">hoistStatic:</span> <span class="hljs-literal">false</span>,
}
</code></pre>
<h4 data-id="heading-3">è¯´æ˜ï¼š</h4>
<ul>
<li><code>ssr: true</code> ä¸ <code>inSSR: true</code> â†’ æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨å¤„äºæœåŠ¡ç«¯æ¸²æŸ“æ¨¡å¼ï¼›</li>
<li><code>prefixIdentifiers: true</code> â†’ åœ¨ SSR æ¨¡å¼ä¸‹å¯ç”¨å˜é‡å‰ç¼€ï¼ˆå¦‚ <code>_ctx.</code>ï¼‰ï¼Œé¿å…ä½œç”¨åŸŸå†²çªï¼›</li>
<li><code>cacheHandlers</code> ä¸ <code>hoistStatic</code> è¢«ç¦ç”¨ï¼Œå› ä¸º SSR æ²¡æœ‰å®¢æˆ·ç«¯ diff çš„æ€§èƒ½éœ€æ±‚ã€‚</li>
</ul>
<h4 data-id="heading-4">æ³¨é‡Šï¼š</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// SSR æ¨¡å¼ä¸‹éœ€è¦æ˜ç¡®å¼€å¯æœåŠ¡ç«¯æ ‡å¿—</span>
<span class="hljs-comment">// å¹¶å…³é—­å‰ç«¯ä¼˜åŒ–ï¼ˆå¦‚äº‹ä»¶ç¼“å­˜ã€é™æ€æå‡ï¼‰</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">ğŸ” æ­¥éª¤ 2ï¼šç”Ÿæˆæˆ–ä½¿ç”¨å·²æœ‰ AST</h3>
<pre><code class="hljs language-bash" lang="bash">const ast = typeof <span class="hljs-built_in">source</span> === <span class="hljs-string">'string'</span> ? baseParse(<span class="hljs-built_in">source</span>, options) : <span class="hljs-built_in">source</span>
rawOptionsMap.<span class="hljs-built_in">set</span>(ast, options)
</code></pre>
<h4 data-id="heading-6">è¯´æ˜ï¼š</h4>
<ul>
<li>è‹¥ä¼ å…¥å­—ç¬¦ä¸²æ¨¡æ¿ï¼Œåˆ™è°ƒç”¨ <code>baseParse()</code> å°†å…¶è§£æä¸º ASTï¼›</li>
<li>è‹¥å·²æ˜¯ <code>RootNode</code>ï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼›</li>
<li><code>rawOptionsMap.set()</code> ä¿å­˜ç¼–è¯‘é…ç½®ï¼Œç”¨äºåç»­å­æ ‘çš„ SSR è½¬æ¢ï¼ˆå°¤å…¶æ˜¯ <code>&lt;slot&gt;</code>ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">ğŸ” æ­¥éª¤ 3ï¼šæ‰§è¡Œ AST è½¬æ¢ï¼ˆTransform é˜¶æ®µï¼‰</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">transform</span>(ast, {
  ..<span class="hljs-selector-class">.options</span>,
  nodeTransforms: [...],
  directiveTransforms: {...},
})
</code></pre>
<h4 data-id="heading-8">å…³é”®ï¼š</h4>
<p>è¿™ä¸€é˜¶æ®µå°†æ¨¡æ¿ AST è½¬åŒ–ä¸º <strong>SSR å‹å¥½çš„ä¸­é—´è¡¨ç¤ºï¼ˆIRï¼‰</strong> ã€‚</p>
<h4 data-id="heading-9">æ ¸å¿ƒ Node Transformsï¼š</h4>

















































<table><thead><tr><th>è½¬æ¢å‡½æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>transformVBindShorthand</code></td><td>å¤„ç† <code>:prop</code> çš„ç®€å†™ç»‘å®š</td></tr><tr><td><code>ssrTransformIf</code></td><td>å°† <code>v-if</code> è½¬åŒ–ä¸ºæ¡ä»¶æ¸²æŸ“è¡¨è¾¾å¼</td></tr><tr><td><code>ssrTransformFor</code></td><td>å°† <code>v-for</code> è½¬åŒ–ä¸ºå¾ªç¯æ¸²æŸ“</td></tr><tr><td><code>trackVForSlotScopes</code></td><td>è·Ÿè¸ª <code>v-for</code> ä¸­çš„æ’æ§½ä½œç”¨åŸŸ</td></tr><tr><td><code>ssrTransformSlotOutlet</code></td><td>æ”¹å†™ <code>&lt;slot&gt;</code> ä¸º SSR è¾“å‡ºå‡½æ•°</td></tr><tr><td><code>ssrInjectFallthroughAttrs</code></td><td>å¤„ç†ç»„ä»¶é€ä¼ å±æ€§</td></tr><tr><td><code>ssrInjectCssVars</code></td><td>æ³¨å…¥ SSR ç‰ˆæœ¬çš„ CSS å˜é‡</td></tr><tr><td><code>ssrTransformElement</code></td><td>æ ¸å¿ƒï¼šå°†æ™®é€šå…ƒç´ èŠ‚ç‚¹è½¬åŒ–ä¸º SSR å¯æ¸²æŸ“å­—ç¬¦ä¸²</td></tr><tr><td><code>ssrTransformComponent</code></td><td>ç»„ä»¶çº§åˆ«çš„ SSR è½¬æ¢</td></tr><tr><td><code>transformStyle</code></td><td>å¤„ç†æ ·å¼ç»‘å®šï¼ˆ<code>v-bind:style</code>ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-10">æŒ‡ä»¤è½¬æ¢ï¼ˆDirective Transformsï¼‰ï¼š</h4>



































<table><thead><tr><th>æŒ‡ä»¤</th><th>è½¬æ¢å‡½æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>v-bind</code></td><td><code>transformBind</code></td><td>ä¿ç•™ DOM ç¼–è¯‘é€»è¾‘</td></tr><tr><td><code>v-on</code></td><td><code>transformOn</code></td><td>ä¿ç•™äº‹ä»¶é€»è¾‘ï¼ˆéƒ¨åˆ†å¿½ç•¥ï¼‰</td></tr><tr><td><code>v-model</code></td><td><code>ssrTransformModel</code></td><td>SSR ç‰¹æ®Šå¤„ç†åŒå‘ç»‘å®š</td></tr><tr><td><code>v-show</code></td><td><code>ssrTransformShow</code></td><td>è½¬åŒ–ä¸ºæœåŠ¡ç«¯æ¡ä»¶æ¸²æŸ“</td></tr><tr><td><code>v-cloak/once/memo</code></td><td><code>noopDirectiveTransform</code></td><td>åœ¨ SSR é˜¶æ®µè¢«å¿½ç•¥</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-11">ğŸ” æ­¥éª¤ 4ï¼šSSR ä¸“ç”¨ä»£ç ç”Ÿæˆé˜¶æ®µ</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">ssrCodegenTransform</span>(ast, options)
</code></pre>
<p>è¿™ä¸€é˜¶æ®µä¼šæ‰«æå¹¶ä¿®æ”¹ <code>ast.codegenNode</code>ï¼Œå°†å…¶æ›¿æ¢ä¸º <strong>SSR ä»£ç ç”Ÿæˆæ ‘</strong>ã€‚</p>
<p>è¿™ä¸€æ­¥æ˜¯ SSR çš„â€œé­”æ³•â€æ‰€åœ¨ï¼Œå®ƒå°†æ¨¡æ¿ç»“æ„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥é€»è¾‘ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span>&gt;{{ msg }}&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<p>ä¼šè¢«ç¼–è¯‘æˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">push(`&lt;div&gt;<span class="hljs-variable">${_ctx.msg}</span>&lt;/div&gt;`)
</code></pre>
<hr/>
<h3 data-id="heading-12">ğŸ” æ­¥éª¤ 5ï¼šç”Ÿæˆæœ€ç»ˆæ¸²æŸ“å‡½æ•°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">return</span> generate(ast, options)
</code></pre>
<p>æœ€ç»ˆè¾“å‡ºçš„ <code>CodegenResult</code> åŒ…å«ï¼š</p>
<ul>
<li>æ¸²æŸ“å‡½æ•°å­—ç¬¦ä¸²ï¼›</li>
<li>ä¾èµ–å¯¼å…¥ä¿¡æ¯ï¼›</li>
<li>SSR ä¸Šä¸‹æ–‡ç®¡ç†ä»£ç ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-13">ä¸‰ã€å¯¹æ¯”ï¼šSSR ç¼–è¯‘ vs. DOM ç¼–è¯‘</h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th>DOM ç¼–è¯‘ï¼ˆå®¢æˆ·ç«¯ï¼‰</th><th>SSR ç¼–è¯‘ï¼ˆæœåŠ¡ç«¯ï¼‰</th></tr></thead><tbody><tr><td>è¾“å‡º</td><td>æ¸²æŸ“å‡½æ•°ï¼ˆVNode æ ‘ï¼‰</td><td>æ¸²æŸ“å‡½æ•°ï¼ˆHTML å­—ç¬¦ä¸²ï¼‰</td></tr><tr><td>ä¼˜åŒ–</td><td>é™æ€æå‡ã€äº‹ä»¶ç¼“å­˜</td><td>å­—ç¬¦ä¸²æ‹¼æ¥ä¼˜åŒ–</td></tr><tr><td>æŒ‡ä»¤å¤„ç†</td><td>è¿è¡Œæ—¶ patch</td><td>ç¼–è¯‘æœŸç”Ÿæˆé€»è¾‘</td></tr><tr><td>æ ·å¼ä½œç”¨åŸŸ</td><td>åŠ¨æ€æ·»åŠ </td><td>ç¼–è¯‘æ—¶æ³¨å…¥</td></tr><tr><td>è¿è¡Œç¯å¢ƒ</td><td>æµè§ˆå™¨</td><td>Node.js</td></tr></tbody></table>
<p>å¯ä»¥çœ‹å‡º SSR ç¼–è¯‘å™¨å»æ‰äº†è®¸å¤šâ€œå‰ç«¯è¿è¡Œæ—¶ä¼˜åŒ–â€ï¼Œæ¢å– <strong>ç¼–è¯‘æœŸç¡®å®šæ€§</strong> ä¸ <strong>æ‰§è¡Œé€Ÿåº¦</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-14">å››ã€å®è·µï¼šå¦‚ä½•ä½¿ç”¨ <code>compile</code></h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæœ€å°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { compile } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/compiler-ssr'</span>

<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">compile</span>(<span class="hljs-string">`&lt;div&gt;Hello {{ name }}&lt;/div&gt;`</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">code</span>)
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ssrRender</span>(<span class="hljs-params">_ctx, _push, _parent, _attrs</span>) {
  <span class="hljs-title function_">_push</span>(<span class="hljs-string">`&lt;div&gt;Hello <span class="hljs-subst">${_ctx.name}</span>&lt;/div&gt;`</span>)
}
</code></pre>
<blockquote>
<p>è¿™æ®µä»£ç å¯ç›´æ¥åœ¨ Node ç¯å¢ƒä¸­æ‰§è¡Œï¼Œç”¨äºæœåŠ¡ç«¯è¾“å‡º HTMLã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">äº”ã€æ‹“å±•ï¼šSSR çš„å­ç¼–è¯‘æµç¨‹</h2>
<p>SSR ç¼–è¯‘å™¨è¿˜æ”¯æŒï¼š</p>
<ul>
<li>å¯¹ <strong>æ’æ§½å†…å®¹</strong>ï¼ˆslot branchesï¼‰è¿›è¡Œç‹¬ç«‹ç¼–è¯‘ï¼›</li>
<li>æ”¯æŒ CSS å˜é‡æ³¨å…¥ï¼›</li>
<li>æ”¯æŒè‡ªå®šä¹‰ <code>directiveTransforms</code>ï¼Œç”¨äºæ‰©å±• SSR æŒ‡ä»¤ã€‚</li>
</ul>
<p>å¼€å‘è€…å¯é€šè¿‡ <code>options.nodeTransforms</code> æˆ– <code>options.directiveTransforms</code> æ³¨å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œå®ç°ä¸ªæ€§åŒ–çš„ SSR ç¼–è¯‘ç®¡çº¿ã€‚</p>
<hr/>
<h2 data-id="heading-16">å…­ã€æ½œåœ¨é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>ä¸ hydration ä¸å…¼å®¹çš„è¡Œä¸º</strong><br/>
æŸäº›æŒ‡ä»¤å¦‚ <code>v-once</code>ã€<code>v-memo</code> æ— æ³•åœ¨ SSR ç«¯ä½¿ç”¨ï¼Œä¼šåœ¨ hydration æ—¶å¤±æ•ˆã€‚</li>
<li><strong>CSS å˜é‡åŒæ­¥é—®é¢˜</strong><br/>
<code>ssrInjectCssVars</code> ä»…ç¼–è¯‘æ³¨å…¥å˜é‡ï¼Œä½†å®¢æˆ·ç«¯éœ€åŒæ­¥ä»¥é¿å…é—ªçƒã€‚</li>
<li><strong>æ€§èƒ½é™·é˜±</strong><br/>
è‹¥æ¨¡æ¿è¿‡å¤§ï¼Œ<code>generate()</code> é˜¶æ®µå¯èƒ½ç”Ÿæˆæé•¿å­—ç¬¦ä¸²ï¼›å¯è€ƒè™‘åˆ†å—æ¸²æŸ“ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p><code>compile()</code> æ˜¯ Vue SSR ç¼–è¯‘å™¨çš„æ ¸å¿ƒæ¥å£ï¼Œå®ƒå°†æ¨¡æ¿ç¼–è¯‘ä¸ºå¯æ‰§è¡Œçš„å­—ç¬¦ä¸²ç”Ÿæˆå‡½æ•°ï¼Œæ˜¯ä»æ¨¡æ¿åˆ° HTML çš„æ¡¥æ¢ã€‚<br/>
é€šè¿‡å¤šå±‚ transform ç®¡çº¿ä¸ SSR ä¸“ç”¨ codegenï¼ŒVue å®ç°äº†ä¼˜é›…çš„æ¨¡æ¿åˆ°å­—ç¬¦ä¸²ç¼–è¯‘æœºåˆ¶ã€‚</p>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŠ¨æ€ç›‘å¬DOMå…ƒç´ é«˜åº¦å˜åŒ–]]></title>    <link>https://juejin.cn/post/7570201730991783962</link>    <guid>https://juejin.cn/post/7570201730991783962</guid>    <pubDate>2025-11-09T15:15:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570201730991783962" data-draft-id="7569945160870264878" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŠ¨æ€ç›‘å¬DOMå…ƒç´ é«˜åº¦å˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-09T15:15:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å«"/> <meta itemprop="url" content="https://juejin.cn/user/1961184474695213"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŠ¨æ€ç›‘å¬DOMå…ƒç´ é«˜åº¦å˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1961184474695213/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T15:15:48.000Z" title="Sun Nov 09 2025 15:15:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<strong>å‰ç«¯æ¶æ„å¸ˆ</strong>ï¼Œå…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€<strong>ç¨‹åºå‘˜å¤§å«</strong>ã€‘ï¼Œå…è´¹é¢†å–ç²¾å“å‰ç«¯èµ„æ–™ã€‚</p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œç›‘å¬DOMå…ƒç´ çš„é«˜åº¦å˜åŒ–æœ‰æ—¶å€™æ˜¯ä¸€ä¸ªå¸¸è§éœ€æ±‚ï¼Œå°¤å…¶æ˜¯åœ¨åšå“åº”å¼è®¾è®¡æˆ–éœ€è¦æ ¹æ®å†…å®¹å˜åŒ–è°ƒæ•´å¸ƒå±€æ—¶ã€‚å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ç°ä»£æµè§ˆå™¨æ”¯æŒçš„ <code>ResizeObserver</code>ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡å…¼å®¹æ€§æ›´å¼ºçš„ iframe æŠ€æœ¯æ¥å®ç°ï¼Œé€‚ç”¨äºè€æ¬¾æ‰‹æœºå’ŒIEæµè§ˆå™¨ã€‚</p>
<h2 data-id="heading-1">1. ResizeObserver</h2>
<p><code>ResizeObserver</code> æ˜¯ç°ä»£æµè§ˆå™¨æä¾›çš„ä¸€ç§ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–çš„ APIã€‚å®ƒå¯ä»¥ç›‘å¬ä»»æ„å…ƒç´ çš„å¤§å°å˜åŒ–ï¼Œå¹¶åœ¨å˜åŒ–æ—¶è§¦å‘å›è°ƒå‡½æ•°ï¼Œé€‚åˆå¤„ç† DOM å…ƒç´ é«˜åº¦å˜åŒ–çš„æƒ…å†µã€‚</p>
<h3 data-id="heading-2">ç¤ºä¾‹ä»£ç ï¼š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€‰æ‹©ä½ æƒ³è¦ç›‘å¬çš„ DOM å…ƒç´ </span>
<span class="hljs-keyword">const</span> targetElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.target'</span>);

<span class="hljs-comment">// åˆ›å»º ResizeObserver å®ä¾‹ï¼Œå¹¶ä¼ å…¥å›è°ƒå‡½æ•°</span>
<span class="hljs-keyword">const</span> resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function"><span class="hljs-params">entries</span> =&gt;</span> {
    <span class="hljs-comment">// entries æ˜¯ä¸€ä¸ªåŒ…å«è¢«ç›‘å¬å…ƒç´ çš„æ•°ç»„</span>
    entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
        <span class="hljs-comment">// è·å–ç›®æ ‡å…ƒç´ çš„å½“å‰é«˜åº¦</span>
        <span class="hljs-keyword">const</span> height = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">height</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ çš„å½“å‰é«˜åº¦:'</span>, height);
    });
});

<span class="hljs-comment">// å¼€å§‹ç›‘å¬ç›®æ ‡å…ƒç´ çš„å°ºå¯¸å˜åŒ–</span>
resizeObserver.<span class="hljs-title function_">observe</span>(targetElement);
</code></pre>
<h3 data-id="heading-3">ä½¿ç”¨è¯´æ˜ï¼š</h3>
<ul>
<li><code>ResizeObserver</code> ä¼šç›‘å¬ç›®æ ‡å…ƒç´ çš„å¤§å°å˜åŒ–ï¼Œå¹¶è¿”å›ä¸€ä¸ª <code>entries</code> æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸€é¡¹ä»£è¡¨ä¸€ä¸ªè¢«è§‚å¯Ÿçš„å…ƒç´ ã€‚</li>
<li><code>entry.contentRect</code> æ˜¯ä¸€ä¸ªåŒ…å«å…ƒç´ å°ºå¯¸ä¿¡æ¯çš„çŸ©å½¢å¯¹è±¡ï¼Œ<code>height</code> å±æ€§å³ä¸ºå…ƒç´ çš„é«˜åº¦ã€‚</li>
<li>è¿™ä¸ªæ–¹æ³•å¯¹äºç°ä»£æµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Safari ç­‰ï¼‰éƒ½æœ‰æ•ˆï¼Œæ”¯æŒç¨‹åº¦è¾ƒé«˜ã€‚</li>
</ul>
<h2 data-id="heading-4">2. Iframe</h2>
<p>å¯¹äºä¸€äº›è€æ¬¾æµè§ˆå™¨ï¼ˆå¦‚ IE æµè§ˆå™¨ï¼‰æˆ–è€…éœ€è¦å…¼å®¹æ›´å¤šè®¾å¤‡çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ iframe æŠ€æœ¯æ¥å®ç°åŠ¨æ€ç›‘å¬å®¹å™¨çš„é«˜åº¦å˜åŒ–ã€‚é€šè¿‡åµŒå…¥ä¸€ä¸ªéšè—çš„ iframe å…ƒç´ ï¼Œå¯ä»¥ç›‘å¬ iframe å…ƒç´ çš„ <code>resize</code> äº‹ä»¶æ¥é—´æ¥åˆ¤æ–­å®¹å™¨çš„é«˜åº¦ã€‚</p>
<h3 data-id="heading-5">ç¤ºä¾‹ä»£ç ï¼ˆçº¯ HTML å®ç°ï¼‰ï¼š</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åŠ¨æ€ç›‘å¬DOMå…ƒç´ é«˜åº¦å˜åŒ– - iframe ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.container</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>; <span class="hljs-comment">/* åˆå§‹é«˜åº¦ */</span>
            <span class="hljs-attribute">position</span>: relative;
            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
        }
        <span class="hljs-selector-class">.resize-iframe</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">border</span>: none;
            <span class="hljs-attribute">position</span>: absolute;
            <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
            <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resize-iframe"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"about:blank"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.container'</span>);
        <span class="hljs-keyword">const</span> iframe = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.resize-iframe'</span>);

        <span class="hljs-comment">// ç›‘å¬ iframe çš„ resize äº‹ä»¶</span>
        iframe.<span class="hljs-property">contentWindow</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            <span class="hljs-comment">// è·å–å®¹å™¨çš„å½“å‰é«˜åº¦</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¹å™¨çš„å½“å‰é«˜åº¦:'</span>, container.<span class="hljs-property">offsetHeight</span>);
        });

        <span class="hljs-comment">// ä¸ºäº†æ¼”ç¤ºï¼Œåœ¨å®¹å™¨çš„é«˜åº¦å˜åŒ–æ—¶è§¦å‘ resize äº‹ä»¶</span>
        <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
            container.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">500</span> + <span class="hljs-string">'px'</span>;  <span class="hljs-comment">// éšæœºè°ƒæ•´å®¹å™¨é«˜åº¦</span>
        }, <span class="hljs-number">2000</span>);  <span class="hljs-comment">// æ¯2ç§’è°ƒæ•´ä¸€æ¬¡é«˜åº¦</span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">ä½¿ç”¨è¯´æ˜ï¼š</h3>
<ul>
<li>è¿™ä¸ªæ–¹æ³•é€šè¿‡å°†ä¸€ä¸ªéšè—çš„ iframe åµŒå¥—åˆ°ç›®æ ‡å®¹å™¨å†…ï¼Œåˆ©ç”¨ iframe çš„ <code>resize</code> äº‹ä»¶æ¥æ£€æµ‹å®¹å™¨çš„é«˜åº¦å˜åŒ–ã€‚</li>
<li>ç”±äº <code>iframe</code> çš„ <code>resize</code> äº‹ä»¶ä¼šåœ¨å®¹å™¨çš„å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨äº‹ä»¶å›è°ƒä¸­è·å–å®¹å™¨çš„æœ€æ–°é«˜åº¦ã€‚</li>
<li>æ­¤æ–¹æ³•çš„å…¼å®¹æ€§æ›´å¹¿ï¼Œå¯ä»¥æ”¯æŒè€æ—§æµè§ˆå™¨ï¼Œå¦‚ IE æµè§ˆå™¨ã€‚</li>
</ul>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸¤ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€ç›‘å¬ DOM å…ƒç´ çš„é«˜åº¦å˜åŒ–ï¼Œé€‰æ‹©é€‚åˆçš„æ–¹æ¡ˆå¯ä»¥ä¿è¯è·¨æµè§ˆå™¨å’Œè®¾å¤‡çš„å…¼å®¹æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue SSR ç¼–è¯‘å™¨æºç æ·±æï¼šssrTransformShow çš„å®ç°åŸç†ä¸è®¾è®¡å“²å­¦]]></title>    <link>https://juejin.cn/post/7569913182036049930</link>    <guid>https://juejin.cn/post/7569913182036049930</guid>    <pubDate>2025-11-09T00:11:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569913182036049930" data-draft-id="7569960869959057454" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue SSR ç¼–è¯‘å™¨æºç æ·±æï¼šssrTransformShow çš„å®ç°åŸç†ä¸è®¾è®¡å“²å­¦"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-09T00:11:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue SSR ç¼–è¯‘å™¨æºç æ·±æï¼šssrTransformShow çš„å®ç°åŸç†ä¸è®¾è®¡å“²å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T00:11:52.000Z" title="Sun Nov 09 2025 00:11:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¦‚å¿µç†è§£ï¼š<code>v-show</code> åœ¨ SSR ç¯å¢ƒä¸­çš„æœ¬è´¨é—®é¢˜</h2>
<p>åœ¨ Vue çš„å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰ä¸­ï¼Œ<code>v-show</code> æ˜¯é€šè¿‡åŠ¨æ€ä¿®æ”¹å…ƒç´ çš„ <code>display</code> æ ·å¼å±æ€§æ¥æ§åˆ¶æ˜¾éšçš„ã€‚<br/>
ä½†åœ¨ <strong>SSRï¼ˆServer-Side Renderingï¼‰</strong> ç¯å¢ƒä¸‹ï¼Œæ²¡æœ‰çœŸå®çš„ DOM æ“ä½œï¼Œå› æ­¤å¿…é¡»åœ¨ <strong>ç¼–è¯‘é˜¶æ®µ</strong> å°†å…¶è½¬æ¢ä¸ºåˆé€‚çš„â€œæ ·å¼è¡¨è¾¾å¼â€ï¼Œä»¥ä¾¿åœ¨æ¸²æŸ“ HTML æ—¶å³å†³å®šå…ƒç´ çš„æ˜¾ç¤ºä¸å¦ã€‚</p>
<p>è¿™æ®µæºç æ­£æ˜¯ Vue SSR ç¼–è¯‘é˜¶æ®µå¯¹ <code>v-show</code> æŒ‡ä»¤çš„ä¸“ç”¨è½¬æ¢å‡½æ•°ï¼š<code>ssrTransformShow</code>ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€åŸç†å‰–æï¼šä» AST è½¬æ¢åˆ°å¯æ‰§è¡Œçš„ SSR è¡¨è¾¾å¼</h2>
<p>æºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">DOMErrorCodes</span>,
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">DirectiveTransform</span>,
  createConditionalExpression,
  createDOMCompilerError,
  createObjectExpression,
  createObjectProperty,
  createSimpleExpression,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/compiler-dom'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">ssrTransformShow</span>: <span class="hljs-title class_">DirectiveTransform</span> = <span class="hljs-function">(<span class="hljs-params">dir, node, context</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (!dir.<span class="hljs-property">exp</span>) {
    context.<span class="hljs-title function_">onError</span>(
      <span class="hljs-title function_">createDOMCompilerError</span>(<span class="hljs-title class_">DOMErrorCodes</span>.<span class="hljs-property">X_V_SHOW_NO_EXPRESSION</span>),
    )
  }
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: [
      <span class="hljs-title function_">createObjectProperty</span>(
        <span class="hljs-string">`style`</span>,
        <span class="hljs-title function_">createConditionalExpression</span>(
          dir.<span class="hljs-property">exp</span>!,
          <span class="hljs-title function_">createSimpleExpression</span>(<span class="hljs-string">`null`</span>, <span class="hljs-literal">false</span>),
          <span class="hljs-title function_">createObjectExpression</span>([
            <span class="hljs-title function_">createObjectProperty</span>(
              <span class="hljs-string">`display`</span>,
              <span class="hljs-title function_">createSimpleExpression</span>(<span class="hljs-string">`none`</span>, <span class="hljs-literal">true</span>),
            ),
          ]),
          <span class="hljs-literal">false</span> <span class="hljs-comment">/* no newline */</span>,
        ),
      ),
    ],
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-2">ğŸ” é€è¡Œæ³¨é‡Šè®²è§£</h3>
<h4 data-id="heading-3">1. å¯¼å…¥ç¼–è¯‘å™¨å·¥å…·å‡½æ•°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">DOMErrorCodes</span>,                <span class="hljs-comment">// DOM ç¼–è¯‘å™¨é”™è¯¯ç æšä¸¾</span>
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">DirectiveTransform</span>,       <span class="hljs-comment">// æŒ‡ä»¤è½¬æ¢å™¨ç±»å‹å®šä¹‰</span>
  createConditionalExpression,   <span class="hljs-comment">// åˆ›å»ºæ¡ä»¶ï¼ˆä¸‰å…ƒï¼‰è¡¨è¾¾å¼èŠ‚ç‚¹</span>
  createDOMCompilerError,        <span class="hljs-comment">// åˆ›å»ºç¼–è¯‘é”™è¯¯å¯¹è±¡</span>
  createObjectExpression,        <span class="hljs-comment">// åˆ›å»ºå¯¹è±¡å­—é¢é‡è¡¨è¾¾å¼èŠ‚ç‚¹</span>
  createObjectProperty,          <span class="hljs-comment">// åˆ›å»ºå¯¹è±¡å±æ€§èŠ‚ç‚¹</span>
  createSimpleExpression,        <span class="hljs-comment">// åˆ›å»ºç®€å•è¡¨è¾¾å¼èŠ‚ç‚¹</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/compiler-dom'</span>
</code></pre>
<p>ğŸ‘‰ è¿™äº›å‡½æ•°ç”¨äºç”Ÿæˆ Vue ç¼–è¯‘å™¨ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰èŠ‚ç‚¹ï¼Œä½¿æ¨¡æ¿è¯­æ³•è½¬æ¢ä¸º JavaScript æ¸²æŸ“å‡½æ•°è¡¨è¾¾å¼ã€‚</p>
<hr/>
<h4 data-id="heading-4">2. å®šä¹‰ <code>ssrTransformShow</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">ssrTransformShow</span>: <span class="hljs-title class_">DirectiveTransform</span> = <span class="hljs-function">(<span class="hljs-params">dir, node, context</span>) =&gt;</span> {
</code></pre>
<ul>
<li><code>dir</code>ï¼šæŒ‡ä»¤å¯¹è±¡ï¼ŒåŒ…å« <code>name</code>ã€<code>exp</code>ã€<code>modifiers</code> ç­‰ä¿¡æ¯ã€‚</li>
<li><code>node</code>ï¼šå½“å‰å¤„ç†çš„ AST èŠ‚ç‚¹ï¼ˆå¦‚ <code>&lt;div v-show="visible"&gt;</code>ï¼‰ã€‚</li>
<li><code>context</code>ï¼šç¼–è¯‘ä¸Šä¸‹æ–‡ï¼ŒåŒ…å«é”™è¯¯å¤„ç†ã€ä»£ç ç”ŸæˆçŠ¶æ€ç­‰ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-5">3. é”™è¯¯å¤„ç†ï¼šæœªä¼ å…¥è¡¨è¾¾å¼æ—¶æŠ¥é”™</h4>
<pre><code class="hljs language-scss" lang="scss">if (!dir.exp) {
  context<span class="hljs-selector-class">.onError</span>(
    createDOMCompilerError(DOMErrorCodes.X_V_SHOW_NO_EXPRESSION),
  )
}
</code></pre>
<p>ğŸ§© è§£é‡Šï¼š</p>
<ul>
<li>è‹¥ <code>v-show</code> æœªç»‘å®šè¡¨è¾¾å¼ï¼ˆå¦‚ <code>&lt;div v-show&gt;</code>ï¼‰ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µæŠ›å‡º <code>X_V_SHOW_NO_EXPRESSION</code> é”™è¯¯ã€‚</li>
<li>è¿™æ˜¯è¯­ä¹‰å±‚æ£€æŸ¥ï¼Œç¡®ä¿ SSR è¾“å‡ºé€»è¾‘æ­£ç¡®ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-6">4. è¿”å›è½¬æ¢ç»“æœï¼šç”Ÿæˆ SSR æ ·å¼è¡¨è¾¾å¼</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">return</span> {
  props: [
    createObjectProperty(
      <span class="hljs-string">`style`</span>,
      createConditionalExpression(
        dir.exp!,                      <span class="hljs-comment">// æ¡ä»¶ï¼šè‹¥è¡¨è¾¾å¼ä¸ºçœŸ</span>
        createSimpleExpression(<span class="hljs-string">`null`</span>, <span class="hljs-literal">false</span>),   <span class="hljs-comment">// åˆ™æ ·å¼ä¸º nullï¼ˆä¿æŒé»˜è®¤ï¼‰</span>
        createObjectExpression([       <span class="hljs-comment">// å¦åˆ™å¼ºåˆ¶è®¾ç½® display:none</span>
          createObjectProperty(
            <span class="hljs-string">`display`</span>,
            createSimpleExpression(<span class="hljs-string">`none`</span>, <span class="hljs-literal">true</span>),
          ),
        ]),
        <span class="hljs-literal">false</span> <span class="hljs-comment">/* no newline */</span>,
      ),
    ),
  ],
}
</code></pre>
<p>ğŸ§  é€»è¾‘è½¬æ¢æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p>æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">v-show</span>=<span class="hljs-string">"visible"</span>&gt;&lt;/div&gt;
</code></pre>
<p>ç¼–è¯‘æˆ SSR æ¸²æŸ“è¡¨è¾¾å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css">{
  style: visible ? null : { <span class="hljs-attribute">display</span>: <span class="hljs-string">"none"</span> }
}
</code></pre>
<p>æ­¤ç»“æ„åœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶å³èƒ½å†³å®šå…ƒç´ æ˜¯å¦éšè—ï¼Œè€Œä¸ä¾èµ–æµè§ˆå™¨æ‰§è¡Œé€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€å¯¹æ¯”åˆ†æï¼š<code>v-show</code> vs <code>v-if</code> åœ¨ SSR ä¸­çš„å·®å¼‚</h2>























<table><thead><tr><th>æŒ‡ä»¤</th><th>æ¸²æŸ“æœºåˆ¶</th><th>SSR è¡¨ç°</th><th>æ€§èƒ½ç‰¹å¾</th></tr></thead><tbody><tr><td><code>v-if</code></td><td>æ¡ä»¶æ€§æ¸²æŸ“ï¼ˆåˆ›å»º/é”€æ¯ DOMï¼‰</td><td>æœåŠ¡ç«¯ç›´æ¥ç”Ÿæˆæˆ–çœç•¥å¯¹åº” HTML</td><td>è½»é‡ä½†æœ‰é‡ç»˜ä»£ä»·</td></tr><tr><td><code>v-show</code></td><td>æ ·å¼æ§åˆ¶ï¼ˆ<code>display: none</code>ï¼‰</td><td>æœåŠ¡ç«¯ç”Ÿæˆå…ƒç´ ä½†éšè—</td><td>ä¿æŒç»“æ„å®Œæ•´ï¼Œé€‚ç”¨äºé¢‘ç¹åˆ‡æ¢æ˜¾ç¤º</td></tr></tbody></table>
<p>ğŸ“Œ ç»“è®ºï¼š<code>ssrTransformShow</code> çš„å­˜åœ¨ï¼Œä½¿å¾— <code>v-show</code> ä¹Ÿèƒ½åœ¨ SSR è¾“å‡ºé˜¶æ®µä¿ç•™ DOM ç»“æ„ä¸€è‡´æ€§ï¼Œæœ‰åˆ©äº <strong>hydrationï¼ˆå®¢æˆ·ç«¯æ¿€æ´»ï¼‰</strong> ä¸€è‡´æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-8">å››ã€å®è·µéƒ¨åˆ†ï¼šè‡ªå®šä¹‰ SSR æŒ‡ä»¤è½¬æ¢ç¤ºä¾‹</h2>
<p>å‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªç±»ä¼¼ <code>v-visible</code> çš„ SSR æŒ‡ä»¤ï¼Œå…¶é€»è¾‘ä¸ <code>v-show</code> ç±»ä¼¼ä½†æ§åˆ¶ <code>visibility</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">ssrTransformVisible</span>: <span class="hljs-title class_">DirectiveTransform</span> = <span class="hljs-function">(<span class="hljs-params">dir, node, context</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (!dir.<span class="hljs-property">exp</span>) {
    context.<span class="hljs-title function_">onError</span>(<span class="hljs-title function_">createDOMCompilerError</span>(<span class="hljs-title class_">DOMErrorCodes</span>.<span class="hljs-property">X_V_SHOW_NO_EXPRESSION</span>))
  }
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">props</span>: [
      <span class="hljs-title function_">createObjectProperty</span>(
        <span class="hljs-string">`style`</span>,
        <span class="hljs-title function_">createConditionalExpression</span>(
          dir.<span class="hljs-property">exp</span>!,
          <span class="hljs-title function_">createSimpleExpression</span>(<span class="hljs-string">`null`</span>, <span class="hljs-literal">false</span>),
          <span class="hljs-title function_">createObjectExpression</span>([
            <span class="hljs-title function_">createObjectProperty</span>(
              <span class="hljs-string">`visibility`</span>,
              <span class="hljs-title function_">createSimpleExpression</span>(<span class="hljs-string">`hidden`</span>, <span class="hljs-literal">true</span>),
            ),
          ]),
          <span class="hljs-literal">false</span>,
        ),
      ),
    ],
  }
}
</code></pre>
<p>ğŸ”§ ç¼–è¯‘ç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;div <span class="hljs-attr">v-visible</span>=<span class="hljs-string">"isVisible"</span>&gt;&lt;/div&gt;
</code></pre>
<p>â¡ SSR æ¸²æŸ“åï¼š</p>
<pre><code class="hljs language-css" lang="css">{
  style: isVisible ? null : { <span class="hljs-attribute">visibility</span>: <span class="hljs-string">"hidden"</span> }
}
</code></pre>
<hr/>
<h2 data-id="heading-9">äº”ã€æ‹“å±•æ€è€ƒï¼šSSR ç¼–è¯‘å™¨çš„å¯æ‰©å±•æ€§æœºåˆ¶</h2>
<p>Vue ç¼–è¯‘å™¨çš„è®¾è®¡é«˜åº¦æ¨¡å—åŒ–ã€‚<br/>
æ‰€æœ‰æŒ‡ä»¤éƒ½é€šè¿‡ç±»ä¼¼çš„ <code>DirectiveTransform</code> æ¥å£å®ç°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">DirectiveTransform</span> {
  (dir: DirectiveNode, node: ElementNode, context: TransformContext): TransformResult
}
</code></pre>
<p>å› æ­¤å¼€å‘è€…å¯è‡ªç”±æ‰©å±•ï¼š</p>
<ul>
<li>æ–°å¢è‡ªå®šä¹‰æŒ‡ä»¤ï¼›</li>
<li>ä¸º SSR å®šä¹‰ç‹¬ç«‹è½¬æ¢é€»è¾‘ï¼›</li>
<li>æ‹“å±• AST èŠ‚ç‚¹ç»“æ„ï¼›</li>
<li>å®ç°æ’ä»¶å¼ç¼–è¯‘ä¸­é—´å±‚ã€‚</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ Vue ç¼–è¯‘å™¨èƒ½æ”¯æŒå¤šå¹³å°ï¼ˆWebã€SSRã€Custom Rendererï¼‰çš„å…³é”®æœºåˆ¶ã€‚</p>
<hr/>
<h2 data-id="heading-10">å…­ã€æ½œåœ¨é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong><code>v-show</code> çš„åŠ¨æ€æ€§ç¼ºå¤±</strong><br/>
SSR ä»…å¤„ç†åˆå§‹æ¸²æŸ“ï¼Œåç»­ä»éœ€åœ¨å®¢æˆ·ç«¯ç”± runtime æ›´æ–°æ ·å¼ã€‚<br/>
è‹¥è¡¨è¾¾å¼ä¾èµ–å¼‚æ­¥æ•°æ®ï¼Œåˆ™ SSR é˜¶æ®µæ— æ³•ç²¾ç¡®æ§åˆ¶ã€‚</li>
<li><strong>æ ·å¼è¦†ç›–å†²çª</strong><br/>
è‹¥æ¨¡æ¿æˆ– CSS å·²è®¾ç½® <code>display</code> æ ·å¼ï¼ŒSSR è¾“å‡ºçš„å†…è”æ ·å¼å¯èƒ½è¢«è¦†ç›–ã€‚</li>
<li><strong>hydration ä¸ä¸€è‡´é£é™©</strong><br/>
è‹¥ SSR é˜¶æ®µä¸å®¢æˆ·ç«¯åˆå§‹æ•°æ®ä¸ä¸€è‡´ï¼Œä¼šé€ æˆ hydration mismatchã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p><code>ssrTransformShow</code> æ˜¯ Vue SSR ç¼–è¯‘ç®¡çº¿ä¸­çš„ä¸€ä¸ªå°è€Œç²¾çš„ç»„ä»¶ï¼Œå…¶æ ¸å¿ƒä½¿å‘½æ˜¯ï¼š</p>
<blockquote>
<p>å°†â€œæ˜¾ç¤ºæ§åˆ¶æŒ‡ä»¤â€è½¬è¯‘ä¸ºâ€œæ ·å¼è¡¨è¾¾å¼â€ï¼Œç¡®ä¿ SSR è¾“å‡ºç»“æ„å®Œæ•´ä¸”å¯é¢„æµ‹ã€‚</p>
</blockquote>
<p>é€šè¿‡ <code>createConditionalExpression</code>ã€<code>createObjectExpression</code> ç­‰å‡½æ•°çš„ç»„åˆï¼ŒVue å®ç°äº†â€œ<strong>æ¨¡æ¿ â†’ AST â†’ SSR è¡¨è¾¾å¼</strong>â€çš„å…¨é“¾æ¡è‡ªåŠ¨åŒ–ç¼–è¯‘ã€‚</p>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æï¼šVue SSR ç¼–è¯‘å™¨ä¸­çš„ ssrTransformElement ä¸ ssrProcessElement]]></title>    <link>https://juejin.cn/post/7569913182036000778</link>    <guid>https://juejin.cn/post/7569913182036000778</guid>    <pubDate>2025-11-08T23:34:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569913182036000778" data-draft-id="7569886315197612083" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æï¼šVue SSR ç¼–è¯‘å™¨ä¸­çš„ ssrTransformElement ä¸ ssrProcessElement"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-08T23:34:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æï¼šVue SSR ç¼–è¯‘å™¨ä¸­çš„ ssrTransformElement ä¸ ssrProcessElement
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-08T23:34:19.000Z" title="Sat Nov 08 2025 23:34:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¦‚å¿µæ¦‚è¿°</h2>
<p>åœ¨ Vue 3 çš„ SSRï¼ˆServer-Side Renderingï¼‰ç¼–è¯‘é˜¶æ®µï¼Œ<code>ssrTransformElement</code> æ˜¯è´Ÿè´£å°†æ¨¡æ¿ä¸­çš„ DOM å…ƒç´ ï¼ˆ<code>&lt;div&gt;</code>, <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code> ç­‰ï¼‰è½¬åŒ–ä¸ºå¯åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„ <strong>å­—ç¬¦ä¸²æ„å»ºä»£ç </strong> çš„æ ¸å¿ƒé€»è¾‘ä¹‹ä¸€ã€‚<br/>
å®ƒçš„ä¸»è¦èŒè´£æ˜¯ï¼š</p>
<ol>
<li>åˆ†ææ¨¡æ¿ AST èŠ‚ç‚¹ï¼ˆAbstract Syntax Treeï¼‰ã€‚</li>
<li>å¤„ç†é™æ€ä¸åŠ¨æ€å±æ€§ï¼ˆ<code>v-bind</code>ã€<code>v-model</code>ã€<code>v-text</code>ã€<code>v-html</code> ç­‰ï¼‰ã€‚</li>
<li>æ„å»ºæœ€ç»ˆå¯æ‰§è¡Œçš„ SSR æ¸²æŸ“ä»£ç ï¼ˆå³å­—ç¬¦ä¸²æ‹¼æ¥é€»è¾‘ï¼‰ã€‚</li>
<li>ä¸º <code>ssrProcessElement</code> é˜¶æ®µæä¾›ç»“æ„åŒ–çš„è¾“å‡ºæ•°æ®ï¼ˆ<code>node.ssrCodegenNode</code>ï¼‰ã€‚</li>
</ol>
<p>è€Œ <code>ssrProcessElement</code> åˆ™æ˜¯å°† <code>ssrTransformElement</code> é˜¶æ®µå‡†å¤‡å¥½çš„æŒ‡ä»¤ç»“æ„ <strong>å…·ä½“è¾“å‡ºä¸ºæœ€ç»ˆ HTML å­—ç¬¦ä¸²</strong> çš„é˜¶æ®µã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€åŸç†å‰–æ</h2>
<h3 data-id="heading-2">1. SSR ç¼–è¯‘å™¨çš„åŒé˜¶æ®µæœºåˆ¶</h3>
<p>Vue çš„ SSR ç¼–è¯‘åˆ†ä¸ºä¸¤ä¸ªä¸»è¦é˜¶æ®µï¼š</p>

















<table><thead><tr><th>é˜¶æ®µ</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>Transform é˜¶æ®µï¼ˆå¦‚ <code>ssrTransformElement</code>ï¼‰</strong></td><td>åˆ†æ ASTï¼Œæå–åŠ¨æ€å±æ€§ä¸æŒ‡ä»¤ï¼Œç”Ÿæˆä¸­é—´ç»“æ„</td></tr><tr><td><strong>Codegen é˜¶æ®µï¼ˆå¦‚ <code>ssrProcessElement</code>ï¼‰</strong></td><td>æ ¹æ® Transform çš„ç»“æœæ‹¼æ¥æœ€ç»ˆ HTML å­—ç¬¦ä¸²</td></tr></tbody></table>
<p>è¿™ä¸¤ä¸ªé˜¶æ®µåˆ†åˆ«è¿è¡Œåœ¨ <strong>ç¼–è¯‘æœŸï¼ˆæ„å»ºæ—¶ï¼‰</strong> å’Œ <strong>è¿è¡ŒæœŸï¼ˆè¯·æ±‚æ—¶ï¼‰</strong> ï¼Œç¡®ä¿æ€§èƒ½ä¸çµæ´»æ€§å¹¶å­˜ã€‚</p>
<hr/>
<h3 data-id="heading-3">2. <code>ssrTransformElement</code> æ ¸å¿ƒç»“æ„è§£æ</h3>
<h4 data-id="heading-4">å…³é”®æµç¨‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">ssrTransformElement</span>: <span class="hljs-title class_">NodeTransform</span> = <span class="hljs-function">(<span class="hljs-params">node, context</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (node.<span class="hljs-property">type</span> !== <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">ELEMENT</span> || node.<span class="hljs-property">tagType</span> !== <span class="hljs-title class_">ElementTypes</span>.<span class="hljs-property">ELEMENT</span>) {
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ssrPostTransformElement</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// Step 1: åˆå§‹åŒ–æ¨¡æ¿å­—é¢é‡</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">openTag</span>: <span class="hljs-title class_">TemplateLiteral</span>[<span class="hljs-string">'elements'</span>] = [<span class="hljs-string">`&lt;<span class="hljs-subst">${node.tag}</span>`</span>]

    <span class="hljs-comment">// Step 2: æ£€æŸ¥åŠ¨æ€ç»‘å®šä¸è‡ªå®šä¹‰æŒ‡ä»¤</span>
    <span class="hljs-keyword">const</span> hasDynamicVBind = <span class="hljs-title function_">hasDynamicKeyVBind</span>(node)
    <span class="hljs-keyword">const</span> hasCustomDir = node.<span class="hljs-property">props</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">type</span> === <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">DIRECTIVE</span> &amp;&amp; !<span class="hljs-title function_">isBuiltInDirective</span>(p.<span class="hljs-property">name</span>))

    <span class="hljs-comment">// Step 3: è‹¥å­˜åœ¨åŠ¨æ€ç»‘å®šæˆ–è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œåˆ™ç”ŸæˆåŠ¨æ€å±æ€§è¡¨è¾¾å¼</span>
    <span class="hljs-keyword">if</span> (hasDynamicVBind || hasCustomDir) {
      <span class="hljs-keyword">const</span> { props, directives } = <span class="hljs-title function_">buildProps</span>(node, context, node.<span class="hljs-property">props</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)
      <span class="hljs-keyword">const</span> mergedProps = <span class="hljs-title function_">buildSSRProps</span>(props, directives, context)
      <span class="hljs-keyword">const</span> propsExp = <span class="hljs-title function_">createCallExpression</span>(context.<span class="hljs-title function_">helper</span>(<span class="hljs-variable constant_">SSR_RENDER_ATTRS</span>), [mergedProps])
      openTag.<span class="hljs-title function_">push</span>(propsExp)
    }

    <span class="hljs-comment">// Step 4: ç”Ÿæˆæœ€ç»ˆ SSR æ¨¡æ¿å­—ç¬¦ä¸²èŠ‚ç‚¹</span>
    node.<span class="hljs-property">ssrCodegenNode</span> = <span class="hljs-title function_">createTemplateLiteral</span>(openTag)
  }
}
</code></pre>
<h4 data-id="heading-5">ä»£ç é€æ®µæ³¨é‡Š</h4>

































<table><thead><tr><th>ç‰‡æ®µ</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><code>openTag</code></td><td>æ„å»º HTML èµ·å§‹æ ‡ç­¾çš„æ¨¡æ¿ç‰‡æ®µï¼Œå¦‚ <code>&lt;div</code> æˆ– <code>&lt;input</code>ã€‚</td></tr><tr><td><code>hasDynamicVBind</code></td><td>åˆ¤æ–­æ˜¯å¦å­˜åœ¨åŠ¨æ€å±æ€§ï¼ˆ<code>v-bind:[key]</code>ï¼‰ã€‚</td></tr><tr><td><code>buildProps</code></td><td>å°†æ‰€æœ‰å±æ€§ä¸æŒ‡ä»¤æ±‡æ€»ä¸ºç»Ÿä¸€çš„ <code>props</code> è¡¨è¾¾å¼ã€‚</td></tr><tr><td><code>buildSSRProps</code></td><td>åˆå¹¶ <code>v-bind</code> ä¸æŒ‡ä»¤ç”Ÿæˆçš„å±æ€§é›†åˆã€‚</td></tr><tr><td><code>createCallExpression(SSR_RENDER_ATTRS, ...)</code></td><td>ç”Ÿæˆè¿è¡Œæ—¶è°ƒç”¨ï¼Œå®é™…æ‰§è¡Œæ—¶ä¼šè°ƒç”¨ <code>ssrRenderAttrs()</code> æ¥è¾“å‡ºå­—ç¬¦ä¸²å±æ€§ã€‚</td></tr><tr><td><code>createTemplateLiteral</code></td><td>å°†æ‰€æœ‰éƒ¨åˆ†æ‹¼æ¥æˆæœ€ç»ˆå¯åºåˆ—åŒ–çš„æ¨¡æ¿å­—ç¬¦ä¸²ç»“æ„ã€‚</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-6">3. <code>buildSSRProps</code> çš„åˆå¹¶é€»è¾‘</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">export</span> <span class="hljs-selector-tag">function</span> <span class="hljs-selector-tag">buildSSRProps</span>(
  <span class="hljs-attribute">props</span>: PropsExpression | undefined,
  <span class="hljs-attribute">directives</span>: DirectiveNode[],
  <span class="hljs-attribute">context</span>: TransformContext,
): <span class="hljs-selector-tag">JSChildNode</span> {
  <span class="hljs-selector-tag">let</span> <span class="hljs-selector-tag">mergePropsArgs</span>: <span class="hljs-selector-tag">JSChildNode</span><span class="hljs-selector-attr">[]</span> = <span class="hljs-selector-attr">[]</span>

  <span class="hljs-selector-tag">if</span> (props) {
    <span class="hljs-selector-tag">mergePropsArgs</span><span class="hljs-selector-class">.push</span>(props)
  }

  <span class="hljs-selector-tag">for</span> (const dir of directives) {
    <span class="hljs-selector-tag">mergePropsArgs</span><span class="hljs-selector-class">.push</span>(
      <span class="hljs-built_in">createCallExpression</span>(context.<span class="hljs-built_in">helper</span>(SSR_GET_DIRECTIVE_PROPS), [
        <span class="hljs-built_in">`_ctx`</span>,
        ...<span class="hljs-built_in">buildDirectiveArgs</span>(dir, context).elements,
      ])
    )
  }

  <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">mergePropsArgs</span><span class="hljs-selector-class">.length</span> &gt; <span class="hljs-number">1</span>
    ? <span class="hljs-selector-tag">createCallExpression</span>(context.<span class="hljs-built_in">helper</span>(MERGE_PROPS), mergePropsArgs)
    : <span class="hljs-selector-tag">mergePropsArgs</span><span class="hljs-selector-attr">[0]</span>
}
</code></pre>
<p><strong>è§£é‡Šï¼š</strong></p>
<ul>
<li><code>MERGE_PROPS</code> å®é™…å¯¹åº”è¿è¡Œæ—¶çš„ <code>Object.assign()</code> æˆ–åˆå¹¶å‡½æ•°ï¼›</li>
<li>è‹¥å­˜åœ¨å¤šä¸ªæŒ‡ä»¤æˆ–åŠ¨æ€ç»‘å®šï¼Œåˆ™è°ƒç”¨ <code>mergeProps</code>ï¼›</li>
<li>è‹¥åªæœ‰ä¸€ä¸ªï¼Œåˆ™ç›´æ¥è¿”å›å•ä¸€è¡¨è¾¾å¼ï¼›</li>
<li>æœ€ç»ˆç»“æœä¼šäº¤ç»™ <code>SSR_RENDER_ATTRS</code> è´Ÿè´£è¾“å‡º HTML å±æ€§å­—ç¬¦ä¸²ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">4. <code>ssrProcessElement</code> è¾“å‡ºé˜¶æ®µ</h3>
<pre><code class="hljs language-scss" lang="scss">export function <span class="hljs-built_in">ssrProcessElement</span>(
  node: PlainElementNode,
  context: SSRTransformContext,
): void {
  const elementsToAdd = node<span class="hljs-selector-class">.ssrCodegenNode</span>!<span class="hljs-selector-class">.elements</span>
  for (let j = <span class="hljs-number">0</span>; j &lt; elementsToAdd.length; j++) {
    context<span class="hljs-selector-class">.pushStringPart</span>(elementsToAdd[j])
  }

  context<span class="hljs-selector-class">.pushStringPart</span>(`&gt;`) <span class="hljs-comment">// å…³é—­èµ·å§‹æ ‡ç­¾</span>
  const rawChildren = rawChildrenMap<span class="hljs-selector-class">.get</span>(node)

  if (rawChildren) {
    context<span class="hljs-selector-class">.pushStringPart</span>(rawChildren)
  } else if (node.children.length) {
    <span class="hljs-built_in">processChildren</span>(node, context)
  }

  if (!isVoidTag(node.tag)) {
    context<span class="hljs-selector-class">.pushStringPart</span>(`&lt;/${node.tag}&gt;`)
  }
}
</code></pre>
<h4 data-id="heading-8">æ³¨é‡Šè¯´æ˜ï¼š</h4>






























<table><thead><tr><th>æ­¥éª¤</th><th>åŠ¨ä½œ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>â‘ </td><td>è¾“å‡º <code>node.ssrCodegenNode</code> ä¸­ä¿å­˜çš„æ‰€æœ‰ç‰‡æ®µ</td><td>åŒ…æ‹¬ <code>&lt;div</code>, å±æ€§å­—ç¬¦ä¸²ç­‰</td></tr><tr><td>â‘¡</td><td>è¾“å‡º <code>&gt;</code></td><td>æ ‡è®°æ ‡ç­¾èµ·å§‹ç»“æŸ</td></tr><tr><td>â‘¢</td><td>å¤„ç† <code>rawChildren</code> æˆ–é€’å½’å¤„ç†å­èŠ‚ç‚¹</td><td>æ”¯æŒ <code>v-html</code>ã€<code>v-text</code> ç­‰ç‰¹æ®Šæƒ…å†µ</td></tr><tr><td>â‘£</td><td>è‹¥ä¸æ˜¯ç©ºæ ‡ç­¾ï¼ˆå¦‚ <code>&lt;br&gt;</code>ã€<code>&lt;img&gt;</code>ï¼‰ï¼Œè¾“å‡ºé—­åˆæ ‡ç­¾</td><td>è¾“å‡º <code>&lt;/div&gt;</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€å¯¹æ¯”åˆ†æï¼šä¸æ™®é€šç¼–è¯‘å™¨çš„å·®å¼‚</h2>






























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>å®¢æˆ·ç«¯ç¼–è¯‘å™¨ (<code>@vue/compiler-dom</code>)</th><th>SSR ç¼–è¯‘å™¨ (<code>@vue/compiler-ssr</code>)</th></tr></thead><tbody><tr><td>è¾“å‡ºç›®æ ‡</td><td>æ¸²æŸ“å‡½æ•° (VNode)</td><td>HTML å­—ç¬¦ä¸²</td></tr><tr><td>åŠ¨æ€ç»‘å®š</td><td>è½¬ä¸ºå“åº”å¼è¡¨è¾¾å¼</td><td>è½¬ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥è°ƒç”¨</td></tr><tr><td>v-model</td><td>è¿è¡Œæ—¶å¤„ç†</td><td>ç¼–è¯‘æœŸé™æ€æ’å…¥</td></tr><tr><td>è¾“å‡ºæ€§èƒ½</td><td>ä¾èµ–è¿è¡Œæ—¶ diff</td><td>ä¸€æ¬¡æ€§ç”Ÿæˆå®Œæ•´ HTML</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">å››ã€å®è·µï¼šæ‰‹åŠ¨è°ƒè¯• SSR Element è½¬æ¢</h2>
<p>å‡è®¾æ¨¡æ¿å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;textarea <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"obj"</span> v-model=<span class="hljs-string">"content"</span>&gt;&lt;/textarea&gt;
</code></pre>
<p>ç»è¿‡ <code>ssrTransformElement</code> å¤„ç†åï¼Œå°†ç”Ÿæˆå¦‚ä¸‹ä¼ªä»£ç ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">_ssrRenderAttrs</span>(<span class="hljs-built_in">_mergeProps</span>(obj, <span class="hljs-built_in">_ssrGetDynamicModelProps</span>(obj, content)))
</code></pre>
<p>è§£é‡Šï¼š</p>
<ul>
<li><code>obj</code> æä¾›åŠ¨æ€ç»‘å®šå±æ€§ï¼›</li>
<li><code>v-model</code> åœ¨ SSR é˜¶æ®µè½¬ä¸º <code>_ssrGetDynamicModelProps()</code>ï¼›</li>
<li><code>MERGE_PROPS</code> åˆå¹¶ä¸¤è€…ï¼›</li>
<li>è¿è¡Œæ—¶ä¼šè‡ªåŠ¨æ¸²æŸ“å‡ºï¼š</li>
</ul>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">textarea</span> value="<span class="hljs-attribute">content</span>-value"&gt;&lt;/<span class="hljs-selector-tag">textarea</span>&gt;
</code></pre>
<hr/>
<h2 data-id="heading-11">äº”ã€æ‹“å±•ä¸é«˜çº§æœºåˆ¶</h2>
<ol>
<li>
<p><strong>rawChildrenMap çš„ä½œç”¨</strong><br/>
ç”¨äºè®°å½•éœ€è¦åœ¨ SSR è¾“å‡ºé˜¶æ®µç‰¹æ®Šæ›¿æ¢çš„èŠ‚ç‚¹å†…å®¹ï¼Œå¦‚ï¼š</p>
<ul>
<li><code>v-html</code></li>
<li><code>v-text</code></li>
<li><code>&lt;textarea&gt;</code> çš„åŠ¨æ€ <code>value</code></li>
</ul>
</li>
<li>
<p><strong>åŠ¨æ€å±æ€§æ¸²æŸ“å‡½æ•°</strong></p>
<ul>
<li><code>SSR_RENDER_ATTR</code>ï¼šæ¸²æŸ“é™æ€å®‰å…¨å±æ€§ã€‚</li>
<li><code>SSR_RENDER_DYNAMIC_ATTR</code>ï¼šå¤„ç†åŠ¨æ€ key å±æ€§ã€‚</li>
<li><code>SSR_RENDER_STYLE</code> / <code>SSR_RENDER_CLASS</code>ï¼šåˆå¹¶ style ä¸ classã€‚</li>
</ul>
</li>
<li>
<p><strong>å®‰å…¨ä¸å…¼å®¹æ€§</strong></p>
<ul>
<li>é€šè¿‡ <code>isSSRSafeAttrName</code> è¿‡æ»¤æ½œåœ¨ XSS é£é™©ã€‚</li>
<li>å¯¹è‡ªå®šä¹‰å…ƒç´ ï¼ˆ<code>&lt;my-element&gt;</code>ï¼‰ä¿ç•™åŸå§‹å±æ€§åã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-12">å…­ã€æ½œåœ¨é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h2>






























<table><thead><tr><th>é—®é¢˜ç±»å‹</th><th>æè¿°</th><th>è§£å†³æ€è·¯</th></tr></thead><tbody><tr><td><strong>åŠ¨æ€å±æ€§è¦†ç›–</strong></td><td>å¤šä¸ª <code>v-bind</code> å¯èƒ½è¦†ç›–é™æ€å±æ€§</td><td>é€šè¿‡ <code>MERGE_PROPS</code> é¡ºåºåˆå¹¶</td></tr><tr><td><strong>Textarea å†…å®¹å†²çª</strong></td><td>åŒæ—¶å­˜åœ¨ <code>v-bind</code> ä¸é™æ€æ–‡æœ¬</td><td>é€šè¿‡ä¸´æ—¶å˜é‡ <code>_temp</code> åˆ¤æ–­æ˜¯å¦å«æœ‰ <code>.value</code></td></tr><tr><td><strong>æŒ‡ä»¤ä¼˜å…ˆçº§æ··ä¹±</strong></td><td>å¦‚ <code>v-text</code> ä¸ <code>v-html</code> å¹¶å­˜</td><td>é€šè¿‡ <code>rawChildrenMap</code> åç½®å¤„ç†</td></tr><tr><td><strong>æ€§èƒ½æŸè€—</strong></td><td>å¤šå±‚ <code>mergeProps</code> åµŒå¥—å¯èƒ½é™ä½æ€§èƒ½</td><td>ç¼–è¯‘é˜¶æ®µå°½é‡åˆå¹¶é™æ€å±æ€§</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13">ç»“è¯­</h2>
<p><code>ssrTransformElement</code> ä¸ <code>ssrProcessElement</code> å…±åŒæ„æˆäº† Vue SSR ç¼–è¯‘ç®¡çº¿çš„ã€Œç»“æ„ç”Ÿæˆ â†’ æ¸²æŸ“è¾“å‡ºã€é—­ç¯ã€‚å®ƒä»¬çš„è®¾è®¡ä½“ç°äº† Vue åœ¨æ¨¡æ¿ç¼–è¯‘å±‚é¢å¯¹ <strong>åŠ¨æ€æ€§ã€æ€§èƒ½ä¸å®‰å…¨æ€§</strong> çš„ä¸‰é‡å¹³è¡¡ã€‚</p>
<p>é€šè¿‡è¿™ä¸€æœºåˆ¶ï¼ŒVue èƒ½å¤Ÿåœ¨æœåŠ¡ç«¯ç”Ÿæˆä¸å®¢æˆ·ç«¯å‡ ä¹ä¸€è‡´çš„ DOM æ ‘ï¼Œä»è€Œå®ç°æ— ç¼ hydrationã€‚</p>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯»æ‡‚ Pinï¼Œä¸€æ¬¡ææ¸… Rust æœ€éš¾çš„æŒ‡é’ˆ]]></title>    <link>https://juejin.cn/post/7569976345930956851</link>    <guid>https://juejin.cn/post/7569976345930956851</guid>    <pubDate>2025-11-09T12:34:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569976345930956851" data-draft-id="7569976345930924083" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯»æ‡‚ Pinï¼Œä¸€æ¬¡ææ¸… Rust æœ€éš¾çš„æŒ‡é’ˆ"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-11-09T12:34:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é±¼ä¸ƒæˆé¥±"/> <meta itemprop="url" content="https://juejin.cn/user/3017475369480509"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯»æ‡‚ Pinï¼Œä¸€æ¬¡ææ¸… Rust æœ€éš¾çš„æŒ‡é’ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3017475369480509/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é±¼ä¸ƒæˆé¥±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T12:34:12.000Z" title="Sun Nov 09 2025 12:34:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>è¿™æ˜¯Rustä¹ä¹å…«åä¸€éš¾ç¬¬13ç¯‡ï¼Œä»‹ç»ä¸‹pinæŒ‡é’ˆã€‚pinæŒ‡é’ˆè·ŸFutureç´§å¯†ç›¸å…³ï¼Œä¹Ÿç®—æ˜¯å¤šçº¿ç¨‹éƒ¨åˆ†ç¬¬ä¸‰ç¯‡ã€‚å…³äºè¿™å—ï¼Œä¹‹å‰çœ‹äº†å‡ ç¯‡æ–‡ç« ï¼Œæœ‰è¯„è®ºè¿™å—éš¾ä»¥ç†è§£ï¼Œæˆ‘ä¹ŸåŒæ„Ÿã€‚å¿˜è®°è°è¯´çš„äº†ï¼Œå¦‚æœä¸èƒ½ç®€å•æ˜äº†çš„æè¿°æŸä¸ªä¸œè¥¿ï¼Œè¯´æ˜è‡ªå·±è¿˜æ²¡çœŸæ­£æŒæ¡ã€‚æœ¬ç¯‡å°è¯•ç”¨ç®€å•æ–¹å¼æ•´ç†Pinç›¸å…³çš„çŸ¥è¯†ï¼Œæœ‰é—®é¢˜è¯·ç•™è¨€ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€åŸºæœ¬æ¦‚å¿µ</h2>
<p>å…¥é—¨pinï¼Œå…ˆè¦çŸ¥é“å››ä¸ªæ¦‚å¿µï¼špinï¼ŒUnpinå’Œ!Upin,ä»¥åŠrustçš„moveã€‚é€šè¿‡è¿™äº›æ¦‚å¿µçš„å¯¹æ¯”ï¼Œç†è§£pinçš„è¾¹ç•Œï¼Œåœ¨å“ªäº›èŒƒå›´å‘ç”Ÿä½œç”¨ã€‚</p>
<h3 data-id="heading-2">1ã€<code>Pin&lt;T&gt;</code> åˆ°åº•æ˜¯ä»€ä¹ˆ</h3>
<h3 data-id="heading-3">Pinæ˜¯ä¸ªæ™ºèƒ½æŒ‡é’ˆåŒ…è£…å™¨ã€‚æ¯”å¦‚:</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::pin::Pin;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = <span class="hljs-number">10</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">pinned</span> = Pin::<span class="hljs-title function_ invoke__">new</span>(&amp;x);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Pinned: {:?}"</span>, pinned);<span class="hljs-comment">//Pinned: 10</span>
}
</code></pre>
<ul>
<li>å®ƒåŒ…è£¹äº†ä¸€ä¸ªç±»å‹ <code>T</code>ï¼ˆé€šå¸¸æ˜¯æ”¾åœ¨<strong>å †ä¸Š</strong>çš„ï¼Œå¦‚ <code>Box&lt;T&gt;</code>ï¼‰ï¼Œå¯¹ <strong>!Unpin ç±»å‹</strong> ï¼Œ ç¼–è¯‘å™¨ä¼šåœ¨è¯­æ³•å±‚é¢é˜»æ­¢ç§»åŠ¨ã€‚</li>
<li>ç®€å•è¯´å°±æ˜¯å¯ä»¥æ‹¿åˆ° <code>&amp;T</code> æˆ– <code>&amp;mut T</code>ï¼Œä½†ä¿è¯ä¸ä¼šæŠŠæ•´ä¸ª <code>T</code> ç§»åˆ°åˆ«çš„å†…å­˜ä½ç½®ã€‚</li>
</ul>
<h3 data-id="heading-4">2ã€Unpinæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><code>Unpin</code> æ˜¯ä¸€ä¸ª <strong>æ ‡è®° trait</strong>ï¼Œè¡¨ç¤ºè¯¥ç±»å‹å¯ä»¥å®‰å…¨åœ°è¢«ç§»åŠ¨ã€‚</p>
<ul>
<li>
<p>å¤§å¤šæ•°æ™®é€šç±»å‹ï¼ˆå¦‚ <code>i32</code>, <code>String</code>, <code>Vec&lt;T&gt;</code>ï¼‰<strong>é»˜è®¤å®ç°</strong>äº† <code>Unpin</code>ï¼›</p>
</li>
<li>
<p>ä½†ä¸€äº›ç±»å‹ï¼ˆå¦‚ <code>Future</code>ã€è‡ªå¼•ç”¨ç»“æ„ï¼‰<strong>ä¸ä¼šè‡ªåŠ¨å®ç°</strong>ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">need_unpin</span>&lt;T: Unpin&gt;(x: T) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å¯ä»¥å®‰å…¨ç§»åŠ¨"</span>);
}
</code></pre>
<p>å¦‚æœæŸç±»å‹æ²¡æœ‰ <code>Unpin</code>ï¼Œé‚£ä¹ˆå®ƒå°± <strong>å¿…é¡»è¢«å›ºå®šï¼ˆpinnedï¼‰</strong> æ‰èƒ½å®‰å…¨ä½¿ç”¨ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">3ã€!Unpinæ˜¯ä»€ä¹ˆ</h3>
<p><strong><code>!Unpin</code></strong> å°±æ˜¯ <strong>æ²¡æœ‰å®ç° <code>Unpin</code> çš„ç±»å‹</strong>ï¼Œè¡¨ç¤ºç±»å‹ <strong>ä¸èƒ½éšæ„ç§»åŠ¨</strong>ã€‚<code>!Unpin</code> å¹¶ä¸æ˜¯ Rust çš„è¯­æ³•ï¼Œè€Œæ˜¯â€œæ²¡æœ‰å®ç° Unpin çš„ç±»å‹â€çš„æ„æ€ã€‚Rust é»˜è®¤ä¼šè‡ªåŠ¨ä¸ºå¤§éƒ¨åˆ†ç±»å‹å®ç° <code>Unpin</code>ï¼Œåªæœ‰å°‘æ•°ç±»å‹ï¼ˆè‡ªå¼•ç”¨ã€Futureã€PhantomPinnedï¼‰æ‰æ˜¯ <code>!Unpin</code></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::pin::Pin;
<span class="hljs-keyword">use</span> std::marker::PhantomPinned;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SelfRef</span> {
    data: <span class="hljs-type">String</span>,
    ptr: *<span class="hljs-keyword">const</span> <span class="hljs-type">String</span>,
    _pin: PhantomPinned, <span class="hljs-comment">// è¡¨ç¤º !Unpin</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// æ™®é€šç±»å‹ Unpin</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">42</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">px</span> = Pin::<span class="hljs-title function_ invoke__">new</span>(x);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">moved_px</span> = px; <span class="hljs-comment">// âœ… å¯ä»¥ç§»åŠ¨</span>

    <span class="hljs-comment">// è‡ªå¼•ç”¨ç±»å‹ !Unpin</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">y</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">pin</span>(SelfRef {
        data: <span class="hljs-string">"hello"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        ptr: std::ptr::<span class="hljs-title function_ invoke__">null</span>(),
        _pin: PhantomPinned,
    });
    <span class="hljs-comment">// let moved_y = y; // âŒ ç¼–è¯‘æŠ¥é”™ï¼Œä¸å¯ç§»åŠ¨</span>
}
</code></pre>
<p>Unpin ç±»å‹ â†’ é’‰ä½ä¹Ÿèƒ½æ¬ï¼Œ!Unpin ç±»å‹ â†’ é’‰ä½åæ— æ³•æ¬ã€‚æ¢å¥è¯**!Unpin çš„ä½œç”¨æ˜¯â€œå›ºå®šå¯¹è±¡çš„åœ°å€â€ï¼Œè€Œä¸æ˜¯æ¬åŠ¨å †ä¸Šçš„æ•°æ®**ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">Stack                     Heap
+<span class="hljs-comment">-------+                 +--------+</span>
| a     | <span class="hljs-comment">--------------&gt; | "hello"|</span>
| Box   |                 +<span class="hljs-comment">--------+</span>
+<span class="hljs-comment">-------+</span>
!Unpin é˜»æ­¢ a è¢« move
</code></pre>
<ul>
<li>
<p><code>a</code>ï¼ˆæ ˆä¸Šçš„ Boxï¼‰è¢« Pin ï¼Œ æ ˆä¸Šçš„åœ°å€ä¸èƒ½è¢«ç§»åŠ¨ï¼Œå †ä¸Šçš„ <code>"hello"</code> æ•°æ®ä¸å—å½±å“</p>
</li>
<li>
<p>Pin ä½œç”¨åœ¨ <strong>æ ˆä¸Šçš„å¯¹è±¡åœ°å€</strong>ï¼Œç¡®ä¿å†…éƒ¨æŒ‡é’ˆä¸ä¼šæ‚¬ç©º</p>
</li>
</ul>
<h3 data-id="heading-6">4ã€Pinã€Unpinå’Œ!Unpinä¸‰è€…å¯¹æ¯”</h3>

























<table><thead><tr><th>ç±»å‹</th><th>Pin æ˜¯å¦ç”Ÿæ•ˆ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Unpin</td><td>âŒ ä¸ç”Ÿæ•ˆï¼ˆé€æ˜ï¼‰</td><td>ç§»åŠ¨ä»ç„¶å…è®¸ï¼Œå®‰å…¨æ— é—®é¢˜</td></tr><tr><td>!Unpin</td><td>âœ… ç”Ÿæ•ˆ</td><td>æ ˆä¸Šå€¼è¢«å›ºå®šï¼Œç§»åŠ¨ä¼šç¼–è¯‘æŠ¥é”™ï¼Œä¿æŠ¤å†…éƒ¨å¼•ç”¨å®‰å…¨</td></tr><tr><td>Copy ç±»å‹</td><td>âŒ ä¸ç”Ÿæ•ˆ</td><td>move å…¶å®æ˜¯å¤åˆ¶ï¼ŒPin å¯¹å®ƒæ— æ„ä¹‰</td></tr></tbody></table>
<p><strong><code>Pin</code> æ˜¯åŠ¨ä½œï¼Œâ€œæŠŠå¯¹è±¡é’‰ä½â€ï¼Œ<code>Unpin</code> / <code>!Unpin</code> å†³å®šé’‰ä½åèƒ½å¦ç§»åŠ¨ã€‚</strong></p>
<h3 data-id="heading-7">5ã€Pinä¸moveçš„å…³ç³»</h3>

































<table><thead><tr><th>ç±»å‹</th><th>Copyï¼Ÿ</th><th>Unpinï¼Ÿ</th><th>Pin åç§»åŠ¨ï¼Ÿ</th><th>Pin ä½œç”¨</th></tr></thead><tbody><tr><td>i32 / bool / f64</td><td>âœ…</td><td>âœ…</td><td>âœ… å¯ä»¥ç§»åŠ¨</td><td>ä¸èµ·ä½œç”¨ï¼ˆé€æ˜ï¼‰</td></tr><tr><td>String / Vec / Box</td><td>âŒ</td><td>âœ…</td><td>âœ… å¯ä»¥ç§»åŠ¨</td><td>å¯¹ Unpin ç±»å‹ä¸èµ·ä½œç”¨</td></tr><tr><td>è‡ªå¼•ç”¨ / Future</td><td>âŒ</td><td>âŒ</td><td>âŒ ç¦æ­¢ç§»åŠ¨</td><td>Pin ç”Ÿæ•ˆï¼Œä¿æŠ¤å†…éƒ¨å¼•ç”¨</td></tr></tbody></table>
<p><strong>Pin çš„å®é™…æ„ä¹‰åªé’ˆå¯¹ !Unpin ï¼ˆPin&lt;T: !Unpin&gt;ï¼‰ç±»å‹</strong>ï¼ŒCopy æˆ– Unpin ç±»å‹( Stringã€Vecã€Box) æ ‡è®°äº† Pinï¼ˆPin&lt;T: Unpin&gt;ï¼‰ï¼Œæœ¬è´¨ä¸Šä¸èµ·ä½œç”¨ã€‚</p>
<h2 data-id="heading-8">äºŒã€æ ¸å¿ƒAPIä½¿ç”¨å…¥é—¨</h2>
<p>ä¸Šä¸€ç« èŠ‚ç¡®å®šäº†è¾¹ç•Œï¼Œè¿™ä¸€ç« çœ‹ä¸‹Pinçš„apiæ€ä¹ˆç”¨ã€‚</p>
<h3 data-id="heading-9">ç¤ºä¾‹1ï¼šPin&lt;Box&gt;</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::pin::Pin;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Data</span> {
    value: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
  
  	<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">boxed</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">123</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">pinned</span> = Pin::<span class="hljs-title function_ invoke__">new</span>(boxed);

    <span class="hljs-comment">// i32 æ˜¯ Unpinï¼Œæ‰€ä»¥å¯ä»¥å®‰å…¨å–å‡º</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">inner</span> = Pin::<span class="hljs-title function_ invoke__">into_inner</span>(pinned); 
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, inner);
   
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">data</span> = Data {
        value: <span class="hljs-string">"hello"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    };

    <span class="hljs-comment">// æ™®é€š Boxï¼Œå¯ä»¥è‡ªç”±ç§»åŠ¨</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">boxed</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(data);

    <span class="hljs-comment">// Pin&lt;Box&lt;T&gt;&gt;ï¼šç¦æ­¢ç§»åŠ¨å†…éƒ¨ T</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">pinned</span>: Pin&lt;<span class="hljs-type">Box</span>&lt;Data&gt;&gt; = Pin::<span class="hljs-title function_ invoke__">new</span>(boxed);

    <span class="hljs-comment">// å®‰å…¨è®¿é—®å­—æ®µ</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Value = {}"</span>, pinned.value);

    <span class="hljs-comment">// å°è¯•ç§»åŠ¨ pinnedï¼ˆç¼–è¯‘å¤±è´¥ï¼‰ï¼Œå†…éƒ¨å€¼ï¼ˆDataï¼‰è¢«ç§»åŠ¨å‡ºåŸæ¥çš„å†…å­˜åœ°å€ï¼ŒåŸå…ˆåœ°å€ä¸Šçš„é‚£å—å †å†…å­˜å˜æˆç©ºçš„ï¼Œè¿åäº†pinçš„çº¦æŸ</span>
    <span class="hljs-comment">// let moved = *pinned; // âŒ</span>
}
</code></pre>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>Pin&lt;Box&lt;T&gt;&gt;</code> ä¿è¯ <code>T</code> åœ¨å †ä¸Šçš„åœ°å€ä¸ä¼šæ”¹å˜ï¼›ä»ç„¶å¯ä»¥ä¿®æ”¹å†…å®¹ï¼Œä½†ä¸èƒ½â€œç§»èµ°â€æ•´ä¸ªç»“æ„ä½“ã€‚</li>
<li>Pin::new()ï¼šå¯¹ <code>!Unpin</code> ç±»å‹ï¼ˆä¾‹å¦‚è‡ªå¼•ç”¨ç»“æ„ä½“ï¼‰ï¼Œä¸èƒ½ç›´æ¥ç”¨è¿™ä¸ªå‡½æ•°ã€‚ç¼–è¯‘å™¨ä¼šå¼ºåˆ¶ä½ ä½¿ç”¨ <code>unsafe { Pin::new_unchecked(...) }</code>ã€‚</li>
<li>å¦‚æœæƒ³åªæœ‰å½“ç±»å‹æ˜¯ <code>Unpin</code>ï¼ˆå¯å®‰å…¨ç§»åŠ¨ï¼‰æ—¶æ‰èƒ½ç”¨into_innerã€‚</li>
</ul>
<h3 data-id="heading-10">ç¤ºä¾‹2ï¼šè‡ªå¼•ç”¨ç»“æ„ä½“ï¼ˆ<code>Pin</code> çš„å…¸å‹åœºæ™¯ï¼‰</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::pin::Pin;
<span class="hljs-keyword">use</span> std::ptr::NonNull;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SelfRef</span> {
    data: <span class="hljs-type">String</span>,
    ptr: <span class="hljs-type">Option</span>&lt;NonNull&lt;<span class="hljs-type">String</span>&gt;&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">SelfRef</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(txt: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> SelfRef {
        SelfRef {
            data: txt.<span class="hljs-title function_ invoke__">to_string</span>(),
            ptr: <span class="hljs-literal">None</span>,
        }
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">init</span>(<span class="hljs-keyword">self</span>: Pin&lt;&amp;<span class="hljs-keyword">mut</span> SelfRef&gt;) {
        <span class="hljs-comment">// å®‰å…¨åœ°æ‹¿åˆ°å†…éƒ¨å¯å˜å¼•ç”¨</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">this</span> = <span class="hljs-keyword">unsafe</span> { <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">get_unchecked_mut</span>() };
        <span class="hljs-comment">// è®¾ç½®æŒ‡é’ˆæŒ‡å‘è‡ªå·±å­—æ®µ</span>
        this.ptr = <span class="hljs-title function_ invoke__">Some</span>(NonNull::<span class="hljs-title function_ invoke__">from</span>(&amp;this.data));
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">print</span>(&amp;<span class="hljs-keyword">self</span>) {
        <span class="hljs-keyword">unsafe</span> {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"self.data = {}"</span>, <span class="hljs-keyword">self</span>.data);
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(ptr) = <span class="hljs-keyword">self</span>.ptr {
                <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ptr -&gt; {}"</span>, ptr.<span class="hljs-title function_ invoke__">as_ref</span>());
            }
        }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">pin</span>(SelfRef::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">"Rust Pin!"</span>));
    s.<span class="hljs-title function_ invoke__">as_mut</span>().<span class="hljs-title function_ invoke__">init</span>();  <span class="hljs-comment">// åˆå§‹åŒ–è‡ªå¼•ç”¨</span>
    s.<span class="hljs-title function_ invoke__">print</span>();          <span class="hljs-comment">// âœ… OKï¼šdata æ²¡è¢«ç§»åŠ¨</span>
}
</code></pre>
<h3 data-id="heading-11">ç¤ºä¾‹ 3ï¼šåœ¨å¼‚æ­¥ä»»åŠ¡ä¸­ï¼ˆ<code>Future</code> çš„å…¸å‹åº”ç”¨ï¼‰</h3>
<p><code>async fn</code> ç”Ÿæˆçš„çŠ¶æ€æœºå…¶å®æ˜¯ <strong>è‡ªå¼•ç”¨ç»“æ„ä½“</strong>ã€‚ <code>Pin</code> åœ¨è¿è¡Œæ—¶ä¿æŠ¤å®ƒä¸è¢«ç§»åŠ¨ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::pin::Pin;
<span class="hljs-keyword">use</span> std::future::Future;
<span class="hljs-keyword">use</span> std::task::{Context, Poll};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyFuture</span> {
    counter: <span class="hljs-type">u8</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Future</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyFuture</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = <span class="hljs-type">u8</span>;

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">poll</span>(<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>: Pin&lt;&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">Self</span>&gt;, _cx: &amp;<span class="hljs-keyword">mut</span> Context&lt;<span class="hljs-symbol">'_</span>&gt;) <span class="hljs-punctuation">-&gt;</span> Poll&lt;<span class="hljs-keyword">Self</span>::Output&gt; {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.counter &lt; <span class="hljs-number">3</span> {
            <span class="hljs-keyword">self</span>.counter += <span class="hljs-number">1</span>;
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Counting: {}"</span>, <span class="hljs-keyword">self</span>.counter);
            Poll::Pending
        } <span class="hljs-keyword">else</span> {
            Poll::<span class="hljs-title function_ invoke__">Ready</span>(<span class="hljs-keyword">self</span>.counter)
        }
    }
}

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = MyFuture { counter: <span class="hljs-number">0</span> }.<span class="hljs-keyword">await</span>;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Done: {}"</span>, result);
}
</code></pre>
<p><code>Pin</code> ç¡®ä¿ <code>MyFuture</code> å†…éƒ¨çŠ¶æ€ï¼ˆå¦‚å¼•ç”¨ï¼‰ä¸ä¼šåœ¨ <code>.await</code> æœŸé—´è¢«ç§»åŠ¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>async</code> è¯­æ³•èƒ½å®‰å…¨åœ°å¤„ç†å¤æ‚çŠ¶æ€ã€‚</p>
<h3 data-id="heading-12">ç¤ºä¾‹4ï¼šunsafe</h3>
<h4 data-id="heading-13">a) Pin::new_unchecked</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = SelfRef { ... }; <span class="hljs-comment">// !Unpin ç±»å‹</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">px</span> = <span class="hljs-keyword">unsafe</span> { Pin::<span class="hljs-title function_ invoke__">new_unchecked</span>(&amp;<span class="hljs-keyword">mut</span> x) };
</code></pre>
<ul>
<li><strong>ä¸ºä»€ä¹ˆ unsafe</strong>ï¼š
<ul>
<li>ç¼–è¯‘å™¨ä¸èƒ½ä¿è¯åç»­ä¸ä¼šç§»åŠ¨ <code>x</code></li>
<li>éœ€è¦å¼€å‘è€…ä¿è¯ <code>x</code> åœ¨ç”Ÿå‘½å‘¨æœŸå†…ä¸ä¼šç§»åŠ¨</li>
</ul>
</li>
<li>Pin::new_uncheckedï¼šå¿…é¡» <strong>100% ç¡®ä¿</strong> è¿™ä¸ªå€¼ä¸ä¼šåœ¨ pinned åè¢«ç§»åŠ¨ï¼Œä¸€èˆ¬åªåœ¨åº•å±‚æ¡†æ¶ï¼ˆå¦‚ tokioã€futuresï¼‰æˆ–è‡ªå¼•ç”¨å®ç°ä¸­ç”¨ï¼Œä¸šåŠ¡ä»£ç ä¸€èˆ¬ä¸ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-14">b) Pin::get_unchecked_mut</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">px</span>: Pin&lt;&amp;<span class="hljs-keyword">mut</span> SelfRef&gt; = Pin::<span class="hljs-title function_ invoke__">new</span>(&amp;<span class="hljs-keyword">mut</span> x);

<span class="hljs-keyword">unsafe</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">mut_ref</span>: &amp;<span class="hljs-keyword">mut</span> SelfRef = Pin::<span class="hljs-title function_ invoke__">get_unchecked_mut</span>(px.<span class="hljs-title function_ invoke__">as_mut</span>());
    mut_ref.ptr = &amp;<span class="hljs-keyword">mut</span> mut_ref.data; <span class="hljs-comment">// è‡ªå¼•ç”¨èµ‹å€¼</span>
}
</code></pre>
<ul>
<li>get_unchecked_mut()ï¼šä¸å®‰å…¨é€‚ç”¨ä»»ä½•ç±»å‹ï¼Œè·³è¿‡ç§»åŠ¨å®‰å…¨æ£€æŸ¥ï¼Œæ‰‹åŠ¨ä¿è¯ pinned å€¼ä¸ä¼šç§»åŠ¨</li>
</ul>
<h4 data-id="heading-15">c)  into_inner å †ä¸Šå¯¹è±¡æ‹†å›åŸç±»å‹ï¼ˆ!Unpin ç±»å‹ä¸å¯è¡Œï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">px</span>: Pin&lt;<span class="hljs-type">Box</span>&lt;SelfRef&gt;&gt; = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">pin</span>(SelfRef { ... });
<span class="hljs-comment">// let b: Box&lt;SelfRef&gt; = Pin::into_inner(px); // âŒ ä¸å®‰å…¨ï¼Œç¼–è¯‘ç¦æ­¢</span>
</code></pre>
<ul>
<li>å¯¹ Unpin ç±»å‹å®‰å…¨ï¼Œå¯ä»¥æ‹†å› Box</li>
<li>å¯¹ !Unpin ç±»å‹ï¼Œæ‹†å› Box éœ€è¦ unsafe å¹¶è‡ªå·±ä¿è¯ç§»åŠ¨ä¸ä¼šç ´åå®‰å…¨ï¼ˆä¸€èˆ¬ä¸æ¨èï¼‰</li>
</ul>
<h2 data-id="heading-16">ä¸‰ã€ä¸ºä»€ä¹ˆè¦è‡ªå¼•ç”¨</h2>
<p>pinæŒ‡é’ˆå¸¸ç”¨åœºæ™¯æ˜¯è‡ªå¼•ç”¨ï¼Œè¿™é‡ŒèŠèŠè‡ªå¼•ç”¨æ˜¯å•¥ï¼Œä¸ºä»€ä¹ˆæœ‰è‡ªå¼•ç”¨ã€‚</p>
<h3 data-id="heading-17">1ã€å¯¹æ¯”æ–¹æ³•è®¿é—®å’Œå†…éƒ¨å¼•ç”¨</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²å­—æ®µ <code>data</code>ï¼Œæƒ³è®¿é—®å‰ä¸¤ä¸ªå­—ç¬¦ï¼š</p>
<h4 data-id="heading-18">aã€æ–¹æ³•è®¿é—®ï¼ˆæ¨èåšæ³•ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyStruct</span> {
    data: <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyStruct</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">slice</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
        &amp;<span class="hljs-keyword">self</span>.data[<span class="hljs-number">0</span>..<span class="hljs-number">2</span>] <span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨éƒ½ç”Ÿæˆåˆ‡ç‰‡</span>
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = MyStruct { data: <span class="hljs-string">"Hello"</span>.<span class="hljs-title function_ invoke__">into</span>() };
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, s.<span class="hljs-title function_ invoke__">slice</span>()); <span class="hljs-comment">// "He"</span>
}
</code></pre>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼š
Rust borrow checker å®‰å…¨ï¼Œæ²¡æœ‰æ‚¬ç©ºæŒ‡é’ˆï¼Œç®€å•ã€å¯ç»´æŠ¤</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼š
æ¯æ¬¡è°ƒç”¨éƒ½ä¼šç”Ÿæˆä¸€ä¸ªåˆ‡ç‰‡ï¼ˆéå¸¸è½»é‡çº§ï¼Œä½†åœ¨<strong>é«˜æ€§èƒ½/å¤§é‡æ•°æ®</strong>åœºæ™¯ä¸‹å¯èƒ½äº§ç”Ÿå¾®å°å¼€é”€ï¼‰</p>
</li>
</ul>
<h4 data-id="heading-19">bã€å†…éƒ¨å¼•ç”¨ï¼ˆself_ref / slice æŒ‡å‘ dataï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SelfRef</span> {
    data: <span class="hljs-type">String</span>,
    slice: *<span class="hljs-keyword">const</span> <span class="hljs-type">str</span>, <span class="hljs-comment">// å†…éƒ¨æŒ‡é’ˆ</span>
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">SelfRef</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(txt: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">s</span> = SelfRef {
            data: txt.<span class="hljs-title function_ invoke__">to_string</span>(),
            slice: std::ptr::<span class="hljs-title function_ invoke__">null</span>(),
        };
        s.slice = &amp;s.data[<span class="hljs-number">0</span>..<span class="hljs-number">2</span>] <span class="hljs-keyword">as</span> *<span class="hljs-keyword">const</span> <span class="hljs-type">str</span>; <span class="hljs-comment">// æŒ‡å‘ data</span>
        s
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_slice</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">str</span> {
        <span class="hljs-keyword">unsafe</span> { &amp;*<span class="hljs-keyword">self</span>.slice }
    }
}
</code></pre>
<ul>
<li>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li><strong>é›¶æ‹·è´</strong>ï¼šåˆ‡ç‰‡é¢„å…ˆè®¡ç®—å¥½ï¼Œè®¿é—®ä¸éœ€è¦æ¯æ¬¡åˆ‡åˆ†</li>
<li>å¯ç”¨äº<strong>å¼‚æ­¥/è‡ªå¼•ç”¨ç»“æ„</strong>ï¼Œé¿å…åœ¨ Future çŠ¶æ€æœº poll æ—¶é‡å¤ç”Ÿæˆåˆ‡ç‰‡</li>
</ul>
</li>
<li>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>å¿…é¡»ä½¿ç”¨ <strong>Pin</strong> æˆ–å †åˆ†é…ä¿è¯ <code>data</code> åœ°å€ä¸å˜</li>
<li>ä½¿ç”¨è£¸æŒ‡é’ˆï¼Œéœ€è¦ <code>unsafe</code>ï¼Œé£é™©å¤§</li>
<li>ç¨‹åºå¤æ‚åº¦é«˜ï¼Œå¯ç»´æŠ¤æ€§å·®</li>
</ul>
</li>
</ul>
<h3 data-id="heading-20">2ã€è‡ªå¼•ç”¨åœºæ™¯</h3>
<h4 data-id="heading-21">aã€é›¶æ‹·è´è§£æ</h4>
<p>HTTPã€JSONã€CSVã€æ–‡æœ¬æµç­‰å¤§é‡æ•°æ®å¤„ç†ï¼Œæƒ³å­˜å‚¨å¯¹ buffer çš„åˆ‡ç‰‡ï¼Œè€Œä¸æ˜¯å¤åˆ¶å­—ç¬¦ä¸²ã€‚é‚£å†…éƒ¨å¼•ç”¨å¯ä»¥ç›´æ¥ä¿å­˜ sliceï¼Œé¿å…æ¯æ¬¡ <code>data[0..n]</code> ç”Ÿæˆæ–°åˆ‡ç‰‡</p>
<h4 data-id="heading-22">bã€å¼‚æ­¥çŠ¶æ€æœº / Future è‡ªå¼•ç”¨</h4>
<p>çŠ¶æ€æœºå­—æ®µä¹‹é—´å¯èƒ½äº’ç›¸å¼•ç”¨Poll æ—¶ä¸å¸Œæœ›é‡æ–°è®¡ç®— slice æˆ–ä¸´æ—¶å˜é‡</p>
<h4 data-id="heading-23">cã€é«˜æ€§èƒ½å›¾ç»“æ„ / AI / Tensor</h4>
<p>èŠ‚ç‚¹å­˜æŒ‡é’ˆæŒ‡å‘æ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ¯æ¬¡ç”Ÿæˆæ–°å¯¹è±¡</p>
<h3 data-id="heading-24">3ã€ä¸åŠ pinçš„æœ‰ä»€ä¹ˆé—®é¢˜</h3>
<p>å‡è®¾2çš„åœºæ™¯æ²¡åŠ pinï¼ŒRust ç¼–è¯‘å™¨åœ¨é¢å¯¹â€œç›´æ¥è‡ªå¼•ç”¨â€ï¼Œé€šå¸¸ä¼šï¼š</p>
<ul>
<li>
<p>å¦‚æœæ˜¯å®‰å…¨å¼•ç”¨ï¼ˆ<code>&amp;str</code>ï¼‰ï¼Œ<strong>ç›´æ¥æ‹’ç»ç¼–è¯‘</strong>ï¼›</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">BadRef</span>&lt;<span class="hljs-symbol">'a</span>&gt; {
    data: <span class="hljs-type">String</span>,
    slice: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">str</span>, <span class="hljs-comment">// å¼•ç”¨è‡ªèº«å­—æ®µ</span>
}

<span class="hljs-keyword">impl</span>&lt;<span class="hljs-symbol">'a</span>&gt; BadRef&lt;<span class="hljs-symbol">'a</span>&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(txt: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = txt.<span class="hljs-title function_ invoke__">to_string</span>();
        <span class="hljs-keyword">Self</span> {
            data: s,
            slice: &amp;s, <span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯</span>
        }
    }
}
</code></pre>
<pre><code class="hljs language-swift" lang="swift">error[<span class="hljs-type">E0505</span>]: cannot move out of `s` because it <span class="hljs-keyword">is</span> borrowed
 <span class="hljs-operator">--&gt;</span> src<span class="hljs-operator">/</span>main.rs:<span class="hljs-number">9</span>:<span class="hljs-number">13</span>
  <span class="hljs-operator">|</span>
<span class="hljs-number">8</span> <span class="hljs-operator">|</span>         <span class="hljs-keyword">let</span> s <span class="hljs-operator">=</span> txt.to_string();
  <span class="hljs-operator">|</span>             <span class="hljs-operator">-</span> binding `s` declared here
<span class="hljs-number">9</span> <span class="hljs-operator">|</span>         <span class="hljs-keyword">Self</span> { data: s, slice: <span class="hljs-operator">&amp;</span>s }
  <span class="hljs-operator">|</span>                    <span class="hljs-operator">^</span> move out of `s` occurs here
  <span class="hljs-operator">|</span>                    <span class="hljs-operator">|</span>
  <span class="hljs-operator">|</span>                    borrow later used here
</code></pre>
<p>Rust æ£€æµ‹åˆ° <code>&amp;s</code> å¼•ç”¨äº†å±€éƒ¨å˜é‡ <code>s</code>ï¼Œä½†åˆ move äº†å®ƒï¼ˆæ‰€æœ‰æƒè½¬ç§»ï¼‰ï¼Œè¿™è¿åäº†ç”Ÿå‘½å‘¨æœŸè§„åˆ™ã€‚</p>
</li>
<li>
<p>å¦‚æœç”¨è£¸æŒ‡é’ˆï¼ˆ<code>*const T</code>ï¼‰ï¼Œ<strong>ç¼–è¯‘èƒ½è¿‡ä½†å±äºæœªå®šä¹‰è¡Œä¸ºï¼ˆUBï¼‰</strong>ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::ptr;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SelfRef</span> {
    data: <span class="hljs-type">String</span>,
    ptr: *<span class="hljs-keyword">const</span> <span class="hljs-type">String</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">SelfRef</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(s);
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ptr</span> = &amp;data <span class="hljs-keyword">as</span> *<span class="hljs-keyword">const</span> <span class="hljs-type">String</span>;
        <span class="hljs-keyword">Self</span> { data, ptr }
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">print</span>(&amp;<span class="hljs-keyword">self</span>) {
        <span class="hljs-keyword">unsafe</span> {
            <span class="hljs-comment">// è®¿é—® ptr æŒ‡å‘çš„æ—§åœ°å€</span>
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ptr -&gt; {}"</span>, &amp;*<span class="hljs-keyword">self</span>.ptr);
        }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = SelfRef::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-string">"hello"</span>);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">y</span> = x; <span class="hljs-comment">// move å‘ç”Ÿ</span>
    <span class="hljs-comment">// æ­¤æ—¶ y.ptr ä»æŒ‡å‘ x.data çš„æ—§åœ°å€ï¼ˆå·²è¢« dropï¼‰</span>

    y.<span class="hljs-title function_ invoke__">print</span>(); <span class="hljs-comment">// âŒ UB: è®¿é—®å·²é‡Šæ”¾å†…å­˜</span>
}
</code></pre>
<p>interrupted by signal 11:SIGSEGVï¼Œæˆ–è€…å‡ºç°ä¹±ç ï¼Œå› ä¸º <code>b.slice</code> æŒ‡å‘äº† <code>a.data</code> çš„æ—§ä½ç½®ã€‚æœ‰çš„rustç‰ˆæœ¬å¯èƒ½ä¸å´©ï¼Œæœ‰ç‚¹éšæœºï¼Œæ‰€ä»¥æ˜¯æœªå®šä¹‰è¡Œä¸ºã€‚</p>
</li>
</ul>
<h2 data-id="heading-25">å››ã€Pinå…·ä½“æ˜¯æ€ä¹ˆå›ºå®šçš„</h2>
<p><code>Pin</code> æœ¬èº«ä¸ä¿è¯å¯¹è±¡çœŸçš„â€œä¸ä¼šè¢«ç§»åŠ¨â€ï¼Œå®ƒåªæ˜¯ <strong>åœ¨ç±»å‹ç³»ç»Ÿå±‚é¢é™åˆ¶ç§»åŠ¨</strong>,ä¾èµ–äºâ€œä¸èƒ½è·å– <code>&amp;mut T</code> åŸå§‹å¼•ç”¨ï¼š</p>
<ul>
<li>å¯¹äº <code>Pin&lt;Box&lt;T&gt;&gt;</code>ï¼Œå †ä¸Šåˆ†é… + æ— æ³•æ›¿æ¢æŒ‡é’ˆ = åœ°å€ç¨³å®š</li>
<li>å¯¹äº <code>Pin&lt;&amp;mut T&gt;</code>ï¼Œç¼–è¯‘å™¨ç¦æ­¢ <code>T</code> è¢« <code>mem::replace()</code> æˆ– <code>move</code></li>
</ul>
<h3 data-id="heading-26">1ã€PhantomPinned + !Unpin</h3>
<p>Rust ç¼–è¯‘å™¨é€šè¿‡ <strong>ç±»å‹ç³»ç»Ÿçº¦æŸ</strong>å›ºå®šå†…éƒ¨æŒ‡é’ˆã€‚<code>PhantomPinned</code> ç”¨æ¥æ ‡è®°ä¸€ä¸ªç±»å‹ <strong>ä¸å¯ç§»åŠ¨</strong>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ç±»å‹éƒ½å®ç° <code>Unpin</code>ï¼š</p>
<ul>
<li>
<p><code>Unpin</code> æ„å‘³ç€å¯ä»¥å®‰å…¨ç§»åŠ¨ã€‚</p>
</li>
<li>
<p>è‡ªå¼•ç”¨ç±»å‹å¿…é¡»æ˜¾å¼ç¦ç”¨ <code>Unpin</code>ï¼ˆé€šè¿‡ <code>PhantomPinned</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::marker::PhantomPinned;
<span class="hljs-keyword">use</span> std::pin::Pin;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SelfRef</span> {
    data: <span class="hljs-type">String</span>,
    ptr: *<span class="hljs-keyword">const</span> <span class="hljs-type">String</span>,
    _pin: PhantomPinned, <span class="hljs-comment">// ç¦æ­¢ç§»åŠ¨</span>
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-27">2ã€Pin çš„ API å±‚çº¦æŸ</h3>
<p>Pinçš„æ ¸å¿ƒapiå®šä¹‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">impl</span>&lt;T: ?<span class="hljs-built_in">Sized</span>&gt; Pin&lt;&amp;<span class="hljs-keyword">mut</span> T&gt; {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">as_mut</span>(<span class="hljs-keyword">self</span>: Pin&lt;&amp;<span class="hljs-keyword">mut</span> T&gt;) <span class="hljs-punctuation">-&gt;</span> Pin&lt;&amp;<span class="hljs-keyword">mut</span> T&gt; { ... }
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_unchecked_mut</span>(<span class="hljs-keyword">self</span>: Pin&lt;&amp;<span class="hljs-keyword">mut</span> T&gt;) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-keyword">mut</span> T { ... }
}
</code></pre>
<ul>
<li>
<p><code>as_mut</code>  å®‰å…¨è·å–å¯å˜å¼•ç”¨ï¼Œä½†ä»ç„¶è¢« Pin çº¦æŸã€‚</p>
</li>
<li>
<p><code>get_unchecked_mut</code> æ˜¯ <strong>unsafe</strong>çš„ï¼Œå…è®¸æ‰‹åŠ¨ç§»åŠ¨å†…éƒ¨å­—æ®µï¼Œä½†é£é™©è‡ªæ‹…ã€‚</p>
</li>
<li>
<p>ç¼–è¯‘å™¨åªå…è®¸å®‰å…¨ API ç§»åŠ¨å¤–éƒ¨åŒ…è£¹æŒ‡é’ˆï¼Œä½†å†…éƒ¨ T åœ°å€å›ºå®šã€‚</p>
</li>
</ul>
<h3 data-id="heading-28">3ã€é˜»æ­¢moveçš„ä¾‹å­</h3>
<p>å †ä¸Šç§»åŠ¨ç¦æ­¢çš„ä¾‹å­ï¼ŒPinåœ¨ç¼–è¯‘æœŸå°±ä¼šé˜»æ­¢</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::pin::Pin;
<span class="hljs-keyword">use</span> std::marker::PhantomPinned;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SelfRef</span> {
    data: <span class="hljs-type">String</span>,
    ptr: *<span class="hljs-keyword">const</span> <span class="hljs-type">String</span>,
    _pin: PhantomPinned, <span class="hljs-comment">// !Unpinï¼Œç¦æ­¢ç§»åŠ¨</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// å †ä¸Šåˆ›å»º SelfRef å¹¶ Pin</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">boxed</span>: Pin&lt;<span class="hljs-type">Box</span>&lt;SelfRef&gt;&gt; = <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">pin</span>(SelfRef {
        data: <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>),
        ptr: std::ptr::<span class="hljs-title function_ invoke__">null</span>(),
        _pin: PhantomPinned,
    });

    <span class="hljs-comment">// åˆå§‹åŒ–å†…éƒ¨è‡ªå¼•ç”¨æŒ‡é’ˆ</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ptr</span> = &amp;boxed.data <span class="hljs-keyword">as</span> *<span class="hljs-keyword">const</span> <span class="hljs-type">String</span>;
    <span class="hljs-keyword">unsafe</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">mut_ref</span> = Pin::<span class="hljs-title function_ invoke__">as_mut</span>(&amp;<span class="hljs-keyword">mut</span> boxed);
        Pin::<span class="hljs-title function_ invoke__">get_unchecked_mut</span>(mut_ref).ptr = ptr;
    }

    <span class="hljs-comment">// âŒ å°è¯• move å†…éƒ¨ SelfRef ä¼šæŠ¥é”™</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">moved</span> = *boxed; <span class="hljs-comment">// error: cannot move out of `*boxed` because it is pinned</span>

    <span class="hljs-comment">// // ä½†æ˜¯ Box æœ¬èº«å¯ä»¥ç§»åŠ¨</span>
    <span class="hljs-comment">// let moved_boxed = boxed; // âœ… Box å¯ç§»åŠ¨ï¼Œä½†å †ä¸Šåœ°å€å›ºå®š</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// println!("data via pinned: {}", unsafe { &amp;*moved_boxed.ptr });</span>
}


</code></pre>
<p>åŸç†ï¼š</p>
<ul>
<li>Box æ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Œç§»åŠ¨ Box åªç§»åŠ¨æŒ‡é’ˆï¼Œä¸ç§»åŠ¨å †æ•°æ®ï¼Œå¦‚ä¸‹å›¾ï¼Œå †æ²¡å˜ï¼›</li>
<li>Pin API ä¿è¯ T åœ¨å †ä¸Šçš„å†…å­˜åœ°å€ä¸ä¼šæ”¹å˜ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ec66390241147e7ae27470b0ba78730~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6bG85LiD5oiQ6aWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763296451&amp;x-signature=VtRzzPTncRIR7%2FnDbHQDNlteSt8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-29">äº”ã€ä¸ºä»€ä¹ˆ <code>Future</code> è¦æœ‰ Pin è®¾è®¡</h2>
<h3 data-id="heading-30">1ã€futureè‡ªå¼•ç”¨</h3>
<p>ä¸€ä¸ª <code>async fn</code> ç¼–è¯‘åå…¶å®ä¼šç”Ÿæˆä¸€ä¸ª<strong>çŠ¶æ€æœºç»“æ„ä½“</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">s</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"hello"</span>);
    <span class="hljs-title function_ invoke__">bar</span>(&amp;s).<span class="hljs-keyword">await</span>;
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{s}"</span>);
}
</code></pre>
<p>ç¼–è¯‘å™¨å¤§è‡´ä¼šç”Ÿæˆï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">FooFuture</span> {
    State0,                        <span class="hljs-comment">// åˆå§‹çŠ¶æ€</span>
    State1 { s: <span class="hljs-type">String</span>, bar_fut: BarFuture&lt;<span class="hljs-symbol">'_</span>&gt; },  <span class="hljs-comment">// await ä¹‹å</span>
    Done,
}
</code></pre>
<p>æ¯æ¬¡ <code>.poll()</code> æ—¶ï¼Œ<code>Future</code> ä¼šè¢«æ¨è¿›åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚</p>
<p>åœ¨ <code>State1</code> ä¸­ï¼Œ<code>bar_fut</code> æŒæœ‰ä¸€ä¸ªå¯¹ <code>s</code> çš„å¼•ç”¨ï¼š<code>BarFuture&lt;'_&gt; // ç”Ÿå‘½å‘¨æœŸä¾èµ– FooFuture::s</code></p>
<p>è¿™æ„å‘³ç€æ•´ä¸ª <code>FooFuture</code> ç»“æ„ä½“å†…éƒ¨å‡ºç°äº†**è‡ªå¼•ç”¨ï¼ˆself-referentialï¼‰**å…³ç³»ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">FooFuture
 â”œâ”€ s: <span class="hljs-type">String</span>
 â””â”€ bar_fut: BarFuture&lt;<span class="hljs-symbol">'s</span>&gt;
              â†‘
              â””â”€â”€ å¼•ç”¨äº† s
</code></pre>
<h3 data-id="heading-31">2ã€Futureä½•æ—¶è¢«ç§»åŠ¨</h3>
<p>å½“ Future è¢«è¿è¡Œï¼ˆæ¯”å¦‚é€šè¿‡ <code>tokio::spawn</code>ã€<code>block_on</code>ï¼‰æ—¶ï¼Œæ‰§è¡Œå™¨ä¼šåšè¿™æ ·çš„äº‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">fut</span> = <span class="hljs-title function_ invoke__">foo</span>();          <span class="hljs-comment">// åˆ›å»º Future</span>
executor.<span class="hljs-title function_ invoke__">spawn</span>(fut);      <span class="hljs-comment">// æŠŠ Future ç§»è¿›ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMove #1ï¼‰</span>
</code></pre>
<p>åœ¨ä»»åŠ¡ç³»ç»Ÿä¸­ï¼Œæ‰§è¡Œå™¨é€šå¸¸ä¼šï¼š</p>
<ul>
<li>æŠŠ <code>fut</code> ç§»è¿›æŸä¸ªå †ä¸Šåˆ†é…çš„ä»»åŠ¡ç»“æ„ä½“ï¼›</li>
<li>å†ä»ä»»åŠ¡ç»“æ„ä½“ä¸­å–å‡º <code>Pin&lt;&amp;mut fut&gt;</code> å»è°ƒç”¨ <code>poll()</code>ã€‚</li>
</ul>
<p>è¿™æ ·ï¼Œ<strong>åœ¨è¢« poll ä¹‹å‰ï¼Œå®ƒå·²ç»è¢« move è¿‡ä¸€æ¬¡äº†ã€‚</strong></p>
<p>æ›´éšè”½çš„æƒ…å†µ:</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">fut</span> = <span class="hljs-title function_ invoke__">foo</span>();
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">f1</span> = <span class="hljs-keyword">async</span> { fut.<span class="hljs-keyword">await</span> };
</code></pre>
<p><code>fut</code> è¢«åµŒå…¥å¦ä¸€ä¸ª Future <code>f1</code> ä¸­ã€‚ <code>f1</code> ä¹Ÿä¼šè¢« executor å†æ¬¡ç§»åŠ¨ã€‚ ä¹Ÿå°±æ˜¯è¯´ <code>fut</code> å¯èƒ½ç»å†ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-title function_ invoke__">foo</span>() <span class="hljs-punctuation">-&gt;</span> åˆ›å»º Future
   â†“ <span class="hljs-keyword">move</span>
<span class="hljs-keyword">async</span> { fut.<span class="hljs-keyword">await</span> } <span class="hljs-punctuation">-&gt;</span> å¦ä¸€ä¸ª Future åŒ…è£…
   â†“ <span class="hljs-keyword">move</span>
executor.<span class="hljs-title function_ invoke__">spawn</span>() <span class="hljs-punctuation">-&gt;</span> æ”¾å…¥ä»»åŠ¡
   â†“ <span class="hljs-keyword">move</span>
<span class="hljs-title function_ invoke__">poll</span>() <span class="hljs-punctuation">-&gt;</span> å›ºå®šåˆ°å †ä¸Š
</code></pre>
<p>å¦‚æœ <code>FooFuture</code> åœ¨ poll è¿‡ç¨‹ä¸­è¢« <strong>ç§»åŠ¨ (move)</strong>ï¼Œé‚£ä¹ˆ <code>s</code> åœ¨å†…å­˜ä¸­çš„åœ°å€å°±å˜äº†ã€‚
ä½† <code>bar_fut</code> ä»ç„¶ä¿å­˜ç€æ—§åœ°å€çš„å¼•ç”¨ï¼Œåˆ™<strong>å¼•ç”¨å¤±æ•ˆï¼Œå±äºUBï¼ˆæœªå®šä¹‰è¡Œä¸ºï¼‰ï¼</strong>ã€‚</p>
<p>æ‰€ä»¥Rusté€šè¿‡Pinæ¥å›ºå®šFutureå†…å­˜ä½ç½®</p>
<h3 data-id="heading-32">3ã€æµç¨‹å¦‚ä¸‹</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71d1b2e2fae34a98b71845636c8f6573~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn6bG85LiD5oiQ6aWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763296451&amp;x-signature=TQ44aG1DJbNBgDEW8PsmfpLREyk%3D" alt="" loading="lazy"/></p>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>å½“å†™ä¸€ä¸ª <code>async fn foo() { â€¦ }</code> æˆ– <code>async { â€¦ }</code>ï¼ŒRust ç¼–è¯‘å™¨æŠŠå®ƒè½¬æˆä¸€ä¸ªçŠ¶æ€æœº structï¼Œå…¶å­—æ®µåŒ…æ‹¬å±€éƒ¨å˜é‡ã€çŠ¶æ€æ ‡è®°ã€å¯èƒ½çš„ Waker ç­‰ã€‚</li>
<li>å¦‚æœè¿™ä¸ªçŠ¶æ€æœº <strong>åœ¨ await ç‚¹ä¹‹å</strong> è¿˜æŒæœ‰å¯¹è‡ªèº«ç»“æ„ä½“å†…éƒ¨å­—æ®µï¼ˆä¾‹å¦‚ <code>&amp;mut self.field</code>ã€æˆ– <code>&amp;self.field</code>ï¼‰çš„å¼•ç”¨ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ª <strong>è‡ªå¼•ç”¨ Future</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå­˜å‚¨äº†æŒ‡å‘è‡ªèº«å†…å®¹çš„å¼•ç”¨ã€‚</li>
<li>è‹¥è¿™ç§ Future è¢«ç§»åŠ¨ï¼ˆå³åœ°å€å˜åŒ–ï¼‰ï¼Œé‚£ä¹ˆè¿™äº›å†…éƒ¨å¼•ç”¨å°±å˜æˆæ‚¬å‚å¼•ç”¨ï¼Œå¯èƒ½å¼•èµ· UBã€‚</li>
<li>å› æ­¤ï¼Œä¸ºäº†å®‰å…¨ï¼ŒRust è¦æ±‚ï¼šè‹¥ä¸€ä¸ª Future æœ‰å¯èƒ½æ˜¯è‡ªå¼•ç”¨çš„ï¼ˆå³ç”Ÿæˆå™¨çŠ¶æ€æœºå¯èƒ½è¿™æ ·ï¼‰ï¼Œé‚£ä¹ˆå®ƒå¿…é¡» <strong>å…ˆå›ºå®šä½åœ°å€ï¼ˆpinnedï¼‰</strong>ï¼Œå†è¢« <code>poll</code>ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>poll(self: Pin&lt;&amp;mut Self&gt;, â€¦)</code> è€Œä¸æ˜¯ <code>&amp;mut Self</code>ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F72769316%2Fwhy-do-futures-use-pins-in-rust%3Futm_source%3Dchatgpt.com" target="_blank" title="https://stackoverflow.com/questions/72769316/why-do-futures-use-pins-in-rust?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">stackoverflow.com/questions/7â€¦</a></li>
<li>åœ¨ <code>Pin&lt;&amp;mut Self&gt;</code> çš„çº¦æŸä¸‹ï¼Œç±»å‹ç³»ç»Ÿç¦æ­¢ä½ å†å·å·å°† Self ç§»åŠ¨ã€‚åªæœ‰å½“ Self ç±»å‹å®ç°äº† <code>Unpin</code> ï¼ˆè¡¨ç¤ºâ€œå³ä¾¿è¢« Pin åŒ…è£…ï¼Œä¹Ÿå¯å®‰å…¨ç§»åŠ¨â€ï¼‰æ—¶ï¼Œæ‰å…è®¸â€œè§£é™¤å›ºå®šâ€çš„æ“ä½œã€‚</li>
<li>æ€»ç»“æ¥è¯´ï¼Œåœ¨ poll æœŸé—´ï¼Œä¿è¯ Future æ‰€è¡¨ç¤ºçš„å†…å­˜ä½ç½®ä¸ä¼šæ”¹å˜**ï¼Œä»è€Œåº•å±‚çŠ¶æ€æœºå­—æ®µä¸­çš„â€œself-å¼•ç”¨â€ä¾ç„¶æœ‰æ•ˆã€‚</li>
</ul>
<h2 data-id="heading-33">å…­ã€æ€»ç»“</h2>
<p>Pinä¸»è¦ä¿è¯ !Unpin ç±»å‹åœ¨å†…å­˜ä¸­çš„åœ°å€å›ºå®šï¼Œæ¯”å¦‚è‡ªå¼•ç”¨ç±»å‹ã€å¼‚æ­¥ Future ç±»å‹ï¼ˆasync/await å†…éƒ¨çŠ¶æ€æœºï¼‰ã€åº•å±‚å¼‚æ­¥ I/O é©±åŠ¨ï¼ˆå¦‚ Tokio å†…éƒ¨ taskã€io_uring bufferï¼‰ã€‚ç†è§£èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œå¯¹æ™®é€šç±»å‹æˆ–çŸ­ç”Ÿå‘½å‘¨æœŸå˜é‡æ²¡å¿…è¦ä½¿ç”¨ï¼Œé™¤éæ˜¯æ˜ç¡®çš„éœ€æ±‚ã€‚å¦‚æœç”¨çš„è¯ï¼Œèƒ½ç”¨å®‰å…¨ API å°±ä¸ç”¨ unsafeï¼›åªèƒ½ unsafe çš„åœ°æ–¹ï¼Œè¦ä¿è¯å¯¹è±¡ç»å¯¹ä¸åŠ¨ã€‚</p>
<p>å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè¯·ç‚¹ä¸ªå…³æ³¨å§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue SSR æºç è§£æï¼šssrProcessIf æ¡ä»¶æ¸²æŸ“çš„æœåŠ¡ç«¯è½¬æ¢é€»è¾‘]]></title>    <link>https://juejin.cn/post/7569909335909253129</link>    <guid>https://juejin.cn/post/7569909335909253129</guid>    <pubDate>2025-11-09T00:06:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569909335909253129" data-draft-id="7569909335909236745" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue SSR æºç è§£æï¼šssrProcessIf æ¡ä»¶æ¸²æŸ“çš„æœåŠ¡ç«¯è½¬æ¢é€»è¾‘"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-09T00:06:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue SSR æºç è§£æï¼šssrProcessIf æ¡ä»¶æ¸²æŸ“çš„æœåŠ¡ç«¯è½¬æ¢é€»è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T00:06:42.000Z" title="Sun Nov 09 2025 00:06:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ç¼–è¯‘é˜¶æ®µï¼Œ<code>v-if / v-else-if / v-else</code> æŒ‡ä»¤éœ€è¦è¢«è½¬æ¢ä¸ºå¯åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œçš„æ¸²æŸ“é€»è¾‘ï¼Œä»¥ç”Ÿæˆæ­£ç¡®çš„ HTML è¾“å‡ºã€‚<br/>
æœ¬æ–‡å°†æ·±å…¥è§£æ <code>ssrProcessIf</code> çš„æºç ç»“æ„ã€åŸç†è®¾è®¡ã€ä¸ç¼–è¯‘ç«¯å·®å¼‚ï¼Œå¹¶é€æ­¥è®²è§£å¦‚ä½•ç”Ÿæˆå¯¹åº”çš„ SSR ä»£ç èŠ‚ç‚¹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ¦‚å¿µå±‚ï¼š<code>ssrProcessIf</code> çš„èŒè´£å®šä½</h2>
<p>åœ¨ Vue çš„ç¼–è¯‘æµç¨‹ä¸­ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€é˜¶æ®µï¼ˆAST æ„å»ºï¼‰</strong> ï¼šé€šè¿‡ <code>createStructuralDirectiveTransform</code> æ³¨å†Œç»“æ„æ€§æŒ‡ä»¤ï¼ˆå¦‚ <code>v-if</code>ã€<code>v-for</code>ï¼‰ã€‚</li>
<li><strong>ç¬¬äºŒé˜¶æ®µï¼ˆSSR è½¬æ¢ï¼‰</strong> ï¼šæ ¹æ® AST èŠ‚ç‚¹ç”ŸæˆæœåŠ¡ç«¯å¯æ‰§è¡Œä»£ç æ®µã€‚</li>
</ul>
<p><code>ssrProcessIf</code> å±äºç¬¬äºŒé˜¶æ®µå‡½æ•°ï¼Œå…¶ä¸»è¦ä»»åŠ¡æ˜¯ï¼š</p>
<blockquote>
<p>å°†ç¼–è¯‘å™¨ DOM å±‚çš„ <code>IfNode</code>ï¼ˆå³ <code>v-if</code>ã€<code>v-else-if</code>ã€<code>v-else</code>ï¼‰è½¬æ¢ä¸º SSR ç¯å¢ƒä¸‹å¯æ‰§è¡Œçš„ JavaScript æ¡ä»¶è¯­å¥ï¼ˆ<code>if / else if / else</code>ï¼‰ï¼Œå¹¶æ„å»ºå¯¹åº”çš„æ¸²æŸ“é€»è¾‘å—ï¼ˆ<code>BlockStatement</code>ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€åŸç†å±‚ï¼šæºç è§£æ„ä¸é€»è¾‘æµç¨‹</h2>
<p>å®Œæ•´æºç å¦‚ä¸‹ï¼ˆé™„è¯¦ç»†æ³¨é‡Šï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> {
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">BlockStatement</span>,
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">IfBranchNode</span>,
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">IfNode</span>,
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">NodeTransform</span>,
  <span class="hljs-title class_">NodeTypes</span>,
  createBlockStatement,
  createCallExpression,
  createIfStatement,
  createStructuralDirectiveTransform,
  processIf,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/compiler-dom'</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">SSRTransformContext</span>,
  processChildrenAsStatement,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../ssrCodegenTransform'</span>

<span class="hljs-comment">// (1) æ³¨å†ŒæŒ‡ä»¤ transformï¼Œç”¨äºç¬¬ä¸€é˜¶æ®µ AST æ„å»º</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">ssrTransformIf</span>: <span class="hljs-title class_">NodeTransform</span> = <span class="hljs-title function_">createStructuralDirectiveTransform</span>(
  <span class="hljs-regexp">/^(?:if|else|else-if)$/</span>, <span class="hljs-comment">// åŒ¹é…ä¸‰ç§ v-if æŒ‡ä»¤</span>
  processIf, <span class="hljs-comment">// ä½¿ç”¨ compiler-dom ä¸­çš„åŸºç¡€é€»è¾‘</span>
)

<span class="hljs-comment">// (2) SSR é˜¶æ®µï¼šæ ¹æ® AST ç”ŸæˆæœåŠ¡ç«¯ä»£ç ç»“æ„</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ssrProcessIf</span>(<span class="hljs-params">
  node: IfNode,
  context: SSRTransformContext,
  disableNestedFragments = <span class="hljs-literal">false</span>,
  disableComment = <span class="hljs-literal">false</span>,
</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> [rootBranch] = node.<span class="hljs-property">branches</span>

  <span class="hljs-comment">// 2.1 ç”Ÿæˆç¬¬ä¸€ä¸ª if è¯­å¥</span>
  <span class="hljs-keyword">const</span> ifStatement = <span class="hljs-title function_">createIfStatement</span>(
    rootBranch.<span class="hljs-property">condition</span>!,
    <span class="hljs-title function_">processIfBranch</span>(rootBranch, context, disableNestedFragments),
  )
  context.<span class="hljs-title function_">pushStatement</span>(ifStatement)

  <span class="hljs-comment">// 2.2 éå†åç»­çš„ else-if / else åˆ†æ”¯</span>
  <span class="hljs-keyword">let</span> currentIf = ifStatement
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; node.<span class="hljs-property">branches</span>.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">const</span> branch = node.<span class="hljs-property">branches</span>[i]
    <span class="hljs-keyword">const</span> branchBlockStatement = <span class="hljs-title function_">processIfBranch</span>(
      branch,
      context,
      disableNestedFragments,
    )
    <span class="hljs-keyword">if</span> (branch.<span class="hljs-property">condition</span>) {
      <span class="hljs-comment">// else-if åˆ†æ”¯</span>
      currentIf = currentIf.<span class="hljs-property">alternate</span> = <span class="hljs-title function_">createIfStatement</span>(
        branch.<span class="hljs-property">condition</span>,
        branchBlockStatement,
      )
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// else åˆ†æ”¯</span>
      currentIf.<span class="hljs-property">alternate</span> = branchBlockStatement
    }
  }

  <span class="hljs-comment">// 2.3 æ—  else åˆ†æ”¯æ—¶æ’å…¥ç©ºæ³¨é‡ŠèŠ‚ç‚¹</span>
  <span class="hljs-keyword">if</span> (!currentIf.<span class="hljs-property">alternate</span> &amp;&amp; !disableComment) {
    currentIf.<span class="hljs-property">alternate</span> = <span class="hljs-title function_">createBlockStatement</span>([
      <span class="hljs-title function_">createCallExpression</span>(<span class="hljs-string">`_push`</span>, [<span class="hljs-string">'`&lt;!----&gt;`'</span>]), <span class="hljs-comment">// è¾“å‡ºç©ºæ³¨é‡Šå ä½</span>
    ])
  }
}

<span class="hljs-comment">// (3) å¤„ç†å•ä¸ªåˆ†æ”¯çš„å†…éƒ¨ children</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processIfBranch</span>(<span class="hljs-params">
  branch: IfBranchNode,
  context: SSRTransformContext,
  disableNestedFragments = <span class="hljs-literal">false</span>,
</span>): <span class="hljs-title class_">BlockStatement</span> {
  <span class="hljs-keyword">const</span> { children } = branch
  <span class="hljs-keyword">const</span> needFragmentWrapper =
    !disableNestedFragments &amp;&amp;
    (children.<span class="hljs-property">length</span> !== <span class="hljs-number">1</span> || children[<span class="hljs-number">0</span>].<span class="hljs-property">type</span> !== <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">ELEMENT</span>) &amp;&amp;
    <span class="hljs-comment">// ä¼˜åŒ–ï¼šå•ä¸€å­èŠ‚ç‚¹ä¸º ForNode æ—¶å¯è·³è¿‡ Fragment åŒ…è£¹</span>
    !(children.<span class="hljs-property">length</span> === <span class="hljs-number">1</span> &amp;&amp; children[<span class="hljs-number">0</span>].<span class="hljs-property">type</span> === <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">FOR</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">processChildrenAsStatement</span>(branch, context, needFragmentWrapper)
}
</code></pre>
<h3 data-id="heading-2">ğŸ§© æ ¸å¿ƒé€»è¾‘åˆ†å±‚è§£æ</h3>

























<table><thead><tr><th>å±‚æ¬¡</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><code>ssrTransformIf</code></td><td>æ³¨å†Œ AST è½¬æ¢æ’ä»¶ï¼Œè¯†åˆ«æ‰€æœ‰ v-if æŒ‡ä»¤ã€‚</td></tr><tr><td><code>ssrProcessIf</code></td><td>å°† AST çš„ <code>IfNode</code> è½¬æ¢ä¸º SSR è¯­å¥æ ‘ï¼ˆJavaScript é€»è¾‘å—ï¼‰ã€‚</td></tr><tr><td><code>processIfBranch</code></td><td>å°†åˆ†æ”¯çš„å­èŠ‚ç‚¹è½¬æ¢ä¸ºæ¸²æŸ“è¯­å¥ä½“ï¼Œè‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦ <code>&lt;template&gt;</code> Fragment åŒ…è£¹ã€‚</td></tr><tr><td><code>_push('&lt;!-- --&gt;')</code></td><td>æ— åŒ¹é…åˆ†æ”¯æ—¶ï¼Œè¾“å‡º SSR ç©ºæ³¨é‡Šï¼ˆä¸å®¢æˆ·ç«¯æ¸²æŸ“ä¸€è‡´ï¼‰ã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€å¯¹æ¯”å±‚ï¼šSSR vs Client ç¼–è¯‘é€»è¾‘</h2>






























<table><thead><tr><th>é¡¹ç›®</th><th>å®¢æˆ·ç«¯ç¼–è¯‘ï¼ˆ<code>compiler-dom</code>ï¼‰</th><th>æœåŠ¡ç«¯ç¼–è¯‘ï¼ˆ<code>compiler-ssr</code>ï¼‰</th></tr></thead><tbody><tr><td>è¾“å‡ºç›®æ ‡</td><td>æ¸²æŸ“å‡½æ•°ï¼ˆ<code>_createVNode</code> ç­‰ï¼‰</td><td>å­—ç¬¦ä¸²æ‹¼æ¥è¾“å‡ºï¼ˆ<code>_push()</code> è°ƒç”¨ï¼‰</td></tr><tr><td>æ¡ä»¶æ§åˆ¶</td><td>é€šè¿‡ <code>createConditionalExpression</code> ç”Ÿæˆä¸‰å…ƒè¡¨è¾¾å¼</td><td>é€šè¿‡ <code>createIfStatement</code> ç”Ÿæˆå®é™… JS if/else è¯­å¥</td></tr><tr><td>ç©ºåˆ†æ”¯å¤„ç†</td><td>è¾“å‡º <code>null</code></td><td>è¾“å‡º HTML æ³¨é‡Š <code>&lt;!----&gt;</code></td></tr><tr><td>Fragment åŒ…è£¹</td><td>ä¾èµ– runtime æ¸²æŸ“ä¼˜åŒ–</td><td>åœ¨ç¼–è¯‘é˜¶æ®µåˆ¤æ–­æ˜¯å¦åˆå¹¶ Fragment</td></tr></tbody></table>
<p>â†’ <strong>æ€»ç»“</strong>ï¼š<br/>
å®¢æˆ·ç«¯ç¼–è¯‘åå‘è¿è¡Œæ—¶åŠ¨æ€å†³ç­–ï¼ˆè™šæ‹Ÿ DOM diffï¼‰ï¼Œ<br/>
è€Œ SSR ç¼–è¯‘æ˜¯é™æ€åŒ–ã€é¢„å±•å¼€çš„é€»è¾‘æ ‘ï¼Œè¿½æ±‚â€œå¯ç›´æ¥è¾“å‡ºå­—ç¬¦ä¸²â€çš„é«˜æ•ˆæ€§ã€‚</p>
<hr/>
<h2 data-id="heading-4">å››ã€å®è·µå±‚ï¼šç¤ºä¾‹æ¨æ¼”</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span>&gt;
  &lt;<span class="hljs-selector-tag">div</span> v-if="ok"&gt;<span class="hljs-selector-tag">A</span>&lt;/<span class="hljs-selector-tag">div</span>&gt;
  &lt;<span class="hljs-selector-tag">div</span> v-else-if="maybe"&gt;<span class="hljs-selector-tag">B</span>&lt;/<span class="hljs-selector-tag">div</span>&gt;
  &lt;<span class="hljs-selector-tag">div</span> v-else&gt;C&lt;/<span class="hljs-selector-tag">div</span>&gt;
&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<p>ç»è¿‡ <code>ssrProcessIf</code> è½¬æ¢åï¼Œå†…éƒ¨ä¼šç”Ÿæˆä¼ªä»£ç ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">if (ok) {
  _push(`&lt;<span class="hljs-selector-tag">div</span>&gt;<span class="hljs-selector-tag">A</span>&lt;/<span class="hljs-selector-tag">div</span>&gt;`)
} else if (maybe) {
  _push(`&lt;<span class="hljs-selector-tag">div</span>&gt;<span class="hljs-selector-tag">B</span>&lt;/<span class="hljs-selector-tag">div</span>&gt;`)
} else {
  _push(`&lt;<span class="hljs-selector-tag">div</span>&gt;C&lt;/<span class="hljs-selector-tag">div</span>&gt;`)
}
</code></pre>
<p>è‹¥ç¼ºçœ <code>v-else</code>ï¼Œåˆ™è¾“å‡ºï¼š</p>
<pre><code class="hljs language-xml" lang="xml">if (ok) {
  _push(`<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>A<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>`)
} else {
  _push(`<span class="hljs-comment">&lt;!----&gt;</span>`)
}
</code></pre>
<p>â†’ è¿™ç§æ–¹å¼ä¿è¯äº† SSR è¾“å‡ºçš„ HTML ç»“æ„ä¸å®¢æˆ·ç«¯æ¸²æŸ“ä¿æŒä¸€è‡´ã€‚</p>
<hr/>
<h2 data-id="heading-5">äº”ã€æ‹“å±•å±‚ï¼šç›¸å…³æ¨¡å—è”åŠ¨</h2>
<ul>
<li>
<p><strong><code>processChildrenAsStatement</code></strong><br/>
è´Ÿè´£å°†æ¨¡æ¿çš„å­èŠ‚ç‚¹ç¼–è¯‘ä¸º <code>BlockStatement</code>ï¼Œä»¥ä¾¿åœ¨ SSR ç¯å¢ƒä¸­å¯æŒ‰é¡ºåº <code>_push()</code>ã€‚</p>
</li>
<li>
<p><strong><code>SSRTransformContext</code></strong><br/>
ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li><code>_push()</code> è¾“å‡ºæµç®¡ç†ï¼›</li>
<li>é™æ€/åŠ¨æ€ç‰‡æ®µæ”¶é›†ï¼›</li>
<li>åµŒå¥—ç‰‡æ®µï¼ˆFragmentï¼‰å¤„ç†å¼€å…³ï¼›</li>
</ul>
</li>
<li>
<p><strong><code>createIfStatement</code></strong><br/>
å†…éƒ¨å°è£…ä¸ºæ ‡å‡†çš„ AST <code>IfStatement</code>ï¼Œç¡®ä¿è¾“å‡º JS å¯è¢«åç»­ Codegen é˜¶æ®µç›´æ¥åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-6">å…­ã€æ½œåœ¨é—®é¢˜ä¸ä¼˜åŒ–æ–¹å‘</h2>
<ol>
<li>
<p><strong>å¤šå±‚åµŒå¥—æ¡ä»¶çš„ä»£ç é‡è†¨èƒ€</strong></p>
<ul>
<li>SSR è¾“å‡ºçš„æ˜¯çº¯ JS æ§åˆ¶æµï¼Œä¼šå¯¼è‡´åˆ†æ”¯è¾ƒå¤šæ—¶ä½“ç§¯å¢é•¿ã€‚</li>
<li>å¯è€ƒè™‘åç»­é˜¶æ®µå¼•å…¥â€œæ¡ä»¶é¢„è®¡ç®—â€æˆ–â€œçŸ­è·¯ä¼˜åŒ–â€ã€‚</li>
</ul>
</li>
<li>
<p><strong>Fragment åŒ…è£¹åˆ¤æ–­é€»è¾‘å¤æ‚</strong></p>
<ul>
<li>å½“å‰é€šè¿‡èŠ‚ç‚¹ç±»å‹å’Œæ•°é‡åˆ¤æ–­ï¼Œè¾¹ç•Œæƒ…å†µï¼ˆå¦‚ <code>v-if</code> å†…åŒ…è£¹ <code>template</code>ï¼‰å¯èƒ½å‡ºç°è¿‡åŒ…æˆ–æ¼åŒ…ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯è°ƒè¯•æ€§å¼±</strong></p>
<ul>
<li>SSR é˜¶æ®µç”Ÿæˆçš„ <code>_push</code> è°ƒç”¨åœ¨è°ƒè¯•æ—¶å¯è¯»æ€§å·®ï¼Œæœªæ¥å¯è€ƒè™‘å¼•å…¥ Source Map æˆ–ç»“æ„åŒ–æ¸²æŸ“æ ‘è°ƒè¯•å™¨ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p><code>ssrProcessIf</code> æ˜¯ Vue SSR ç¼–è¯‘å™¨ä¸­å¤„ç†æ¡ä»¶æ¸²æŸ“çš„å…³é”®æ¨¡å—ã€‚<br/>
å®ƒé€šè¿‡é™æ€åŒ–å±•å¼€æ¡ä»¶é€»è¾‘ã€ç”Ÿæˆ JS æ§åˆ¶æµè¯­å¥ï¼Œå®ç°äº†ä¸å®¢æˆ·ç«¯ä¸€è‡´çš„è¾“å‡ºç»“æœã€‚<br/>
è¿™ä¸€è®¾è®¡ä½“ç°äº† <strong>â€œè¿è¡Œæ—¶åŠ¨æ€æ€§ â†’ ç¼–è¯‘æœŸç¡®å®šæ€§â€</strong> çš„ Vue SSR æ¶æ„å“²å­¦ã€‚</p>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ Vue SSR ä¸­çš„ v-for ç¼–è¯‘é€»è¾‘ï¼šssrProcessFor æºç è§£æ]]></title>    <link>https://juejin.cn/post/7569976345929809971</link>    <guid>https://juejin.cn/post/7569976345929809971</guid>    <pubDate>2025-11-09T00:04:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569976345929809971" data-draft-id="7569976345929793587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ Vue SSR ä¸­çš„ v-for ç¼–è¯‘é€»è¾‘ï¼šssrProcessFor æºç è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-09T00:04:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ Vue SSR ä¸­çš„ v-for ç¼–è¯‘é€»è¾‘ï¼šssrProcessFor æºç è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T00:04:10.000Z" title="Sun Nov 09 2025 00:04:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¦‚å¿µèƒŒæ™¯</h2>
<p>åœ¨ Vue 3 çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ç¼–è¯‘é˜¶æ®µï¼Œ<code>v-for</code> æŒ‡ä»¤çš„å¤„ç†è¿‡ç¨‹è¢«æ‹†åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€é˜¶æ®µï¼ˆç»“æ„åŒ–è½¬æ¢ï¼‰</strong> ï¼šé€šè¿‡ <code>createStructuralDirectiveTransform</code> æ•è·æ¨¡æ¿ä¸­çš„ <code>v-for</code> è¯­æ³•ï¼Œå¹¶ç”Ÿæˆè¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚</li>
<li><strong>ç¬¬äºŒé˜¶æ®µï¼ˆSSR ä¸“ç”¨ä»£ç ç”Ÿæˆï¼‰</strong> ï¼šä½¿ç”¨ <code>ssrProcessFor</code> å°†è¯­æ³•æ ‘èŠ‚ç‚¹è½¬åŒ–ä¸º SSR è¿è¡Œæ—¶å¯æ‰§è¡Œçš„æ¸²æŸ“å‡½æ•°ç‰‡æ®µã€‚</li>
</ol>
<p>æ¢å¥è¯è¯´ï¼Œ<code>ssrProcessFor</code> æ˜¯ SSR ç¼–è¯‘ä¸­ <strong>è´Ÿè´£æŠŠ <code>v-for</code> ä» AST è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥é€»è¾‘</strong> çš„æ ¸å¿ƒå‡½æ•°ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æºç ç»“æ„æ€»è§ˆ</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> {
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">ForNode</span>,
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">NodeTransform</span>,
  <span class="hljs-title class_">NodeTypes</span>,
  createCallExpression,
  createForLoopParams,
  createFunctionExpression,
  createStructuralDirectiveTransform,
  processFor,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/compiler-dom'</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-keyword">type</span> <span class="hljs-title class_">SSRTransformContext</span>,
  processChildrenAsStatement,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../ssrCodegenTransform'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">SSR_RENDER_LIST</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../runtimeHelpers'</span>

<span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µï¼šv-for çš„ç»“æ„åŒ–æŒ‡ä»¤è½¬æ¢</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">ssrTransformFor</span>: <span class="hljs-title class_">NodeTransform</span> =
  <span class="hljs-title function_">createStructuralDirectiveTransform</span>(<span class="hljs-string">'for'</span>, processFor)

<span class="hljs-comment">// ç¬¬äºŒé˜¶æ®µï¼šv-for çš„ SSR ä»£ç ç”Ÿæˆé€»è¾‘</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ssrProcessFor</span>(<span class="hljs-params">
  node: ForNode,
  context: SSRTransformContext,
  disableNestedFragments = <span class="hljs-literal">false</span>,
</span>): <span class="hljs-built_in">void</span> {
  <span class="hljs-keyword">const</span> needFragmentWrapper =
    !disableNestedFragments &amp;&amp;
    (node.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> !== <span class="hljs-number">1</span> || node.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-property">type</span> !== <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">ELEMENT</span>)
  <span class="hljs-keyword">const</span> renderLoop = <span class="hljs-title function_">createFunctionExpression</span>(
    <span class="hljs-title function_">createForLoopParams</span>(node.<span class="hljs-property">parseResult</span>),
  )
  renderLoop.<span class="hljs-property">body</span> = <span class="hljs-title function_">processChildrenAsStatement</span>(
    node,
    context,
    needFragmentWrapper,
  )

  <span class="hljs-keyword">if</span> (!disableNestedFragments) {
    context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&lt;!--[--&gt;`</span>)
  }
  context.<span class="hljs-title function_">pushStatement</span>(
    <span class="hljs-title function_">createCallExpression</span>(context.<span class="hljs-title function_">helper</span>(<span class="hljs-variable constant_">SSR_RENDER_LIST</span>), [
      node.<span class="hljs-property">source</span>,
      renderLoop,
    ]),
  )
  <span class="hljs-keyword">if</span> (!disableNestedFragments) {
    context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&lt;!--]--&gt;`</span>)
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€åŸç†æ‹†è§£</h2>
<h3 data-id="heading-3">1. ç¬¬ä¸€é˜¶æ®µï¼šç»“æ„åŒ–æŒ‡ä»¤è½¬æ¢</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> <span class="hljs-type">const</span> ssrTransformFor: NodeTransform =
  <span class="hljs-built_in">createStructuralDirectiveTransform</span>(<span class="hljs-string">'for'</span>, processFor)
</code></pre>
<p>è¿™æ®µä»£ç è°ƒç”¨äº† Vue ç¼–è¯‘å™¨çš„æ ¸å¿ƒå·¥å…· <code>createStructuralDirectiveTransform</code>ã€‚<br/>
å…¶ä½œç”¨æ˜¯ï¼š</p>
<ul>
<li><strong>æ•è·æ¨¡æ¿ä¸­æ‰€æœ‰å¸¦ <code>v-for</code> çš„èŠ‚ç‚¹</strong>ï¼›</li>
<li><strong>è°ƒç”¨ <code>processFor</code></strong> å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª <code>ForNode</code> AST èŠ‚ç‚¹ã€‚</li>
</ul>
<blockquote>
<p>è¿™ä¸€é˜¶æ®µä»…æ„å»ºé™æ€ç»“æ„ï¼Œä¸å…³å¿ƒ SSR é€»è¾‘ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">2. ç¬¬äºŒé˜¶æ®µï¼šSSR æ¸²æŸ“é€»è¾‘ç”Ÿæˆ</h3>
<p>æ¥ä¸‹æ¥ï¼Œ<code>ssrProcessFor</code> ä¼šåœ¨ SSR transform pass ä¸­è¢«è°ƒç”¨ï¼Œå°† <code>ForNode</code> è½¬åŒ–ä¸ºæœ€ç»ˆçš„æœåŠ¡ç«¯å­—ç¬¦ä¸²æ‹¼æ¥é€»è¾‘ã€‚</p>
<h4 data-id="heading-5">(1) åˆ¤æ–­æ˜¯å¦éœ€è¦ Fragment åŒ…è£¹</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">needFragmentWrapper</span> =
  !disableNestedFragments &amp;&amp;
  (node.children.length !== 1 || node.children<span class="hljs-section">[0]</span>.type !== NodeTypes.ELEMENT)
</code></pre>
<ul>
<li>å½“ <code>v-for</code> å†…æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæˆ–å­èŠ‚ç‚¹ä¸æ˜¯å•ä¸ªå…ƒç´ æ—¶ï¼Œéœ€è¦ç”¨æ³¨é‡Šæ ‡è®°çš„ <strong>fragment åŒ…è£¹</strong>ï¼Œä»¥åœ¨ SSR è¾“å‡ºä¸­ç»´æŒæ­£ç¡®çš„å±‚çº§ç»“æ„ã€‚</li>
<li>ä¾‹å¦‚ï¼š</li>
</ul>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">div</span> v-for="<span class="hljs-selector-tag">i</span> in list"&gt;
  &lt;<span class="hljs-selector-tag">span</span>&gt;{{ <span class="hljs-selector-tag">i</span> }}&lt;/<span class="hljs-selector-tag">span</span>&gt;
  &lt;<span class="hljs-selector-tag">p</span>&gt;text&lt;/<span class="hljs-selector-tag">p</span>&gt;
&lt;/<span class="hljs-selector-tag">div</span>&gt;
</code></pre>
<p>ä¼šè¢«åŒ…è£¹ä¸ºï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--[--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-comment">&lt;!--]--&gt;</span>
</code></pre>
<hr/>
<h4 data-id="heading-6">(2) æ„é€ å¾ªç¯å‡½æ•°è¡¨è¾¾å¼</h4>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">renderLoop</span> = createFunctionExpression(
  createForLoopParams(node.parseResult),
)
</code></pre>
<ul>
<li>
<p><code>createForLoopParams</code> ä» <code>v-for="(item, index) in list"</code> ä¸­æå–å‚æ•°ï¼š<code>(item, index)</code>ï¼›</p>
</li>
<li>
<p><code>createFunctionExpression</code> åˆ™ç”Ÿæˆç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">(item, <span class="hljs-keyword">index</span>) =&gt; { <span class="hljs-regexp">/* æ¸²æŸ“é€»è¾‘ */</span> }
</code></pre>
</li>
</ul>
<hr/>
<h4 data-id="heading-7">(3) ç”Ÿæˆå¾ªç¯ä½“é€»è¾‘</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">renderLoop.body</span> = processChildrenAsStatement(
  node,
  context,
  needFragmentWrapper,
)
</code></pre>
<ul>
<li><code>processChildrenAsStatement</code> ä¼šæŠŠ <code>v-for</code> çš„å­èŠ‚ç‚¹è½¬åŒ–ä¸º SSR è¾“å‡ºè¯­å¥ï¼›</li>
<li>å…¶ä¸­ä¼šé€’å½’è°ƒç”¨ SSR ç‰ˆæœ¬çš„ <code>processElement</code>ã€<code>processText</code> ç­‰ï¼›</li>
<li>å¦‚æœ <code>needFragmentWrapper = true</code>ï¼Œåˆ™ä¼šåœ¨è¾“å‡ºä¸­æ’å…¥æ³¨é‡ŠèŠ‚ç‚¹åŒ…è£¹å­èŠ‚ç‚¹ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-8">(4) ç”Ÿæˆæœ€ç»ˆ SSR è°ƒç”¨è¡¨è¾¾å¼</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">context</span><span class="hljs-selector-class">.pushStatement</span>(
  <span class="hljs-built_in">createCallExpression</span>(context.<span class="hljs-built_in">helper</span>(SSR_RENDER_LIST), [
    node.source,
    renderLoop,
  ]),
)
</code></pre>
<p>ç”Ÿæˆçš„ä»£ç é€»è¾‘å¤§è‡´ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">_ssrRenderList</span>(list, <span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
  <span class="hljs-comment">// renderLoop.body é€»è¾‘</span>
})
</code></pre>
<p><code>SSR_RENDER_LIST</code> æ˜¯ Vue SSR è¿è¡Œæ—¶çš„è¾…åŠ©å‡½æ•°ï¼Œä½œç”¨ä¸å®¢æˆ·ç«¯æ¸²æŸ“ä¸­çš„ <code>renderList</code> ç›¸åŒï¼Œç”¨äºåœ¨ SSR é˜¶æ®µæ‰§è¡Œå¾ªç¯æ¸²æŸ“ã€‚</p>
<hr/>
<h4 data-id="heading-9">(5) å¤„ç† Fragment åŒ…è£¹æ ‡è®°</h4>
<pre><code class="hljs language-xml" lang="xml">if (!disableNestedFragments) {
  context.pushStringPart(`<span class="hljs-comment">&lt;!--[--&gt;</span>`)
}
// ...loop...
if (!disableNestedFragments) {
  context.pushStringPart(`<span class="hljs-comment">&lt;!--]--&gt;</span>`)
}
</code></pre>
<ul>
<li>
<p>è¿™ä¸¤è¡Œåˆ†åˆ«åœ¨å¾ªç¯è¾“å‡ºå‰åæ’å…¥ç‰¹æ®Šæ³¨é‡Šæ ‡è®°ï¼›</p>
</li>
<li>
<p>è¿™äº›æ ‡è®°å¸®åŠ©å®¢æˆ·ç«¯ hydration è¿‡ç¨‹æ­£ç¡®å®šä½ Fragment è¾¹ç•Œï¼›</p>
</li>
<li>
<p>ä¾‹å¦‚ SSR è¾“å‡ºï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--[--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--]--&gt;</span>
</code></pre>
</li>
</ul>
<hr/>
<h2 data-id="heading-10">å››ã€æ ¸å¿ƒé€»è¾‘æµç¨‹å›¾</h2>
<pre><code class="hljs language-scss" lang="scss">v-for AST èŠ‚ç‚¹
    â†“
<span class="hljs-built_in">ssrProcessFor</span>()
    â†“
åˆ¤æ–­æ˜¯å¦éœ€è¦ Fragment
    â†“
æ„é€  renderLoop å‡½æ•°è¡¨è¾¾å¼
    â†“
å°†å­èŠ‚ç‚¹è½¬æ¢ä¸ºå¯æ‰§è¡Œè¯­å¥å—
    â†“
åŒ…è£… SSR_RENDER_LIST è°ƒç”¨
    â†“
è¾“å‡ºå­—ç¬¦ä¸²æ ‡è®° + æ¸²æŸ“ç»“æœ
</code></pre>
<hr/>
<h2 data-id="heading-11">äº”ã€ä¸å®¢æˆ·ç«¯ç¼–è¯‘å¯¹æ¯”</h2>



































<table><thead><tr><th>ç»´åº¦</th><th>å®¢æˆ·ç«¯ç¼–è¯‘</th><th>SSR ç¼–è¯‘</th></tr></thead><tbody><tr><td>è¾“å‡ºç›®æ ‡</td><td>Virtual DOM æ¸²æŸ“å‡½æ•°</td><td>å­—ç¬¦ä¸²æ‹¼æ¥é€»è¾‘</td></tr><tr><td>è¿è¡Œæ—¶ Helper</td><td><code>renderList</code></td><td><code>SSR_RENDER_LIST</code></td></tr><tr><td>Fragment</td><td>ç”¨ VNode åŒ…è£¹</td><td>ç”¨æ³¨é‡ŠèŠ‚ç‚¹åŒ…è£¹</td></tr><tr><td>Hydration éœ€æ±‚</td><td>ä¸å­˜åœ¨</td><td>å¿…é¡»ç»´æŒ DOM è¾¹ç•Œä¸€è‡´æ€§</td></tr><tr><td>å­èŠ‚ç‚¹å¤„ç†</td><td>ç”Ÿæˆè™šæ‹ŸèŠ‚ç‚¹æ•°ç»„</td><td>è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¾“å‡ºé€»è¾‘</td></tr></tbody></table>
<p>å¯ä»¥çœ‹å‡ºï¼ŒSSR çš„ <code>v-for</code> å¤„ç†é€»è¾‘é‡ç‚¹åœ¨äº<strong>å­—ç¬¦ä¸²è¾“å‡ºæ­£ç¡®æ€§ä¸ Hydration è¾¹ç•Œç»´æŠ¤</strong>ï¼Œè€Œéè™šæ‹ŸèŠ‚ç‚¹æ„é€ ã€‚</p>
<hr/>
<h2 data-id="heading-12">å…­ã€å®è·µæ¡ˆä¾‹</h2>
<h3 data-id="heading-13">ç¤ºä¾‹æ¨¡æ¿</h3>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">ul</span>&gt;
  &lt;<span class="hljs-selector-tag">li</span> v-for="(item, <span class="hljs-selector-tag">i</span>) in list"&gt;{{ item }}&lt;/<span class="hljs-selector-tag">li</span>&gt;
&lt;/<span class="hljs-selector-tag">ul</span>&gt;
</code></pre>
<h3 data-id="heading-14">SSR ç¼–è¯‘ç»“æœï¼ˆç®€åŒ–åï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">_ssrRenderList</span>(_ctx.<span class="hljs-property">list</span>, <span class="hljs-function">(<span class="hljs-params">item, i</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${_ssrInterpolate(item)}</span>&lt;/li&gt;`</span>
})
</code></pre>
<p>åœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶ï¼Œè¯¥å‡½æ•°è¿”å›æ‹¼æ¥å¥½çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œæœ€ç»ˆç”Ÿæˆ HTMLã€‚</p>
<hr/>
<h2 data-id="heading-15">ä¸ƒã€æ‹“å±•æ€è€ƒ</h2>
<ol>
<li>
<p><strong><code>disableNestedFragments</code> å‚æ•°çš„ç”¨é€”</strong></p>
<ul>
<li>ç”¨äºåµŒå¥—ç»“æ„ä¸­ï¼ˆå¦‚ <code>v-for</code> å†…éƒ¨çš„ <code>v-if</code>ï¼‰ï¼Œé¿å…é‡å¤åŒ…è£¹ã€‚</li>
<li>ä¾‹å¦‚æ¨¡æ¿å±‚å·²ç»æ·»åŠ äº† Fragment æ³¨é‡Šï¼Œå°±å¯ä»¥ç¦ç”¨å†…éƒ¨ fragmentã€‚</li>
</ul>
</li>
<li>
<p><strong><code>SSR_RENDER_LIST</code> çš„æ‰§è¡Œæœºåˆ¶</strong></p>
<ul>
<li>åœ¨è¿è¡Œæ—¶æ‰§è¡Œå¾ªç¯ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²ï¼›</li>
<li>åŒæ—¶ç»´æŒé¡ºåºå’Œç´¢å¼•ä¸€è‡´ï¼Œç¡®ä¿ hydration å¯¹åº”å…³ç³»ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–æ–¹å‘</strong></p>
<ul>
<li>å¯é’ˆå¯¹é™æ€ <code>list</code> è¿›è¡Œç¼–è¯‘æœŸå±•å¼€ï¼›</li>
<li>åœ¨é•¿åˆ—è¡¨ä¸­é€šè¿‡åˆ†å—æ¸²æŸ“å‡å°‘å†…å­˜å ç”¨ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-16">å…«ã€æ½œåœ¨é—®é¢˜ä¸è°ƒè¯•è¦ç‚¹</h2>






























<table><thead><tr><th>é—®é¢˜</th><th>å¯èƒ½åŸå› </th><th>è§£å†³æ€è·¯</th></tr></thead><tbody><tr><td>SSR è¾“å‡ºç»“æ„ä¸åŒ¹é…</td><td>ç¼ºå°‘ Fragment æ³¨é‡Šè¾¹ç•Œ</td><td>æ£€æŸ¥ <code>needFragmentWrapper</code> åˆ¤æ–­é€»è¾‘</td></tr><tr><td>Hydration é”™ä½</td><td>å­èŠ‚ç‚¹é¡ºåºæˆ–æ³¨é‡Šæ ‡è¯†é”™è¯¯</td><td>ç¡®è®¤ <code>&lt;!--[--&gt;</code> å’Œ <code>&lt;!--]--&gt;</code> å¯¹åº”ä½ç½®</td></tr><tr><td>æ€§èƒ½ä¸‹é™</td><td>åŠ¨æ€è¡¨è¾¾å¼å¤æ‚</td><td>å¯ä½¿ç”¨ key ä¼˜åŒ– diff é€»è¾‘</td></tr><tr><td>åµŒå¥—å¾ªç¯å‡ºé”™</td><td>å‚æ•°ä½œç”¨åŸŸå†²çª</td><td>æ£€æŸ¥ <code>createForLoopParams</code> æ˜¯å¦æ­£ç¡®ç”Ÿæˆå‚æ•°</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-17">ä¹ã€æ€»ç»“</h2>
<p><code>ssrProcessFor</code> æ˜¯ Vue SSR ç¼–è¯‘ç®¡çº¿ä¸­å°†æ¨¡æ¿å¾ªç¯æŒ‡ä»¤è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ¸²æŸ“é€»è¾‘çš„å…³é”®æ¨¡å—ã€‚<br/>
å…¶æ ¸å¿ƒå·¥ä½œåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç”Ÿæˆå¾ªç¯å‡½æ•°è¡¨è¾¾å¼ï¼›</li>
<li>å¤„ç†å­èŠ‚ç‚¹æ¸²æŸ“ï¼›</li>
<li>ç®¡ç† Fragment åŒ…è£¹ä¸æ³¨é‡Šè¾¹ç•Œï¼›</li>
<li>æœ€ç»ˆç”ŸæˆåŸºäº <code>SSR_RENDER_LIST</code> çš„å¯æ‰§è¡Œè¾“å‡ºã€‚</li>
</ul>
<p>å®ƒæ˜¯ Vue SSR ä¿è¯æ¨¡æ¿åœ¨å®¢æˆ·ç«¯å¤æ°´æ—¶<strong>ç»“æ„ç²¾ç¡®å¯¹åº”</strong>çš„é‡è¦æœºåˆ¶ä¹‹ä¸€ã€‚</p>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue SSR æ·±åº¦è§£æï¼šssrProcessTeleport çš„æºç æœºåˆ¶ä¸å®ç°åŸç†]]></title>    <link>https://juejin.cn/post/7569959427878240266</link>    <guid>https://juejin.cn/post/7569959427878240266</guid>    <pubDate>2025-11-08T23:56:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569959427878240266" data-draft-id="7569959427878223882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue SSR æ·±åº¦è§£æï¼šssrProcessTeleport çš„æºç æœºåˆ¶ä¸å®ç°åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-08T23:56:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue SSR æ·±åº¦è§£æï¼šssrProcessTeleport çš„æºç æœºåˆ¶ä¸å®ç°åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-08T23:56:17.000Z" title="Sat Nov 08 2025 23:56:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-08
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue 3 çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ç¼–è¯‘é˜¶æ®µä¸­ï¼Œ<code>ssrProcessTeleport</code> æ˜¯ä¸€ä¸ªäºŒæ¬¡ç¼–è¯‘ï¼ˆsecond-passï¼‰é˜¶æ®µçš„ä»£ç ç”Ÿæˆè½¬æ¢å‡½æ•°ï¼Œç”¨äºå¤„ç† <code>&lt;teleport&gt;</code> ç»„ä»¶çš„æœåŠ¡ç«¯è¾“å‡ºé€»è¾‘ã€‚<br/>
æœ¬æ–‡å°†æ·±å…¥å‰–æå…¶è®¾è®¡ç›®çš„ã€å®ç°åŸç†ä¸ç¼–è¯‘é“¾ä¸­çš„ä½ç½®ï¼Œå¹¶é€šè¿‡é€è¡Œæ³¨é‡Šå±•ç¤ºæºç çš„è¿è¡Œæµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ¦‚å¿µèƒŒæ™¯ï¼šSSR ä¸ Teleport çš„ç‰¹æ®Šæ€§</h2>
<p><strong>Teleport çš„æ ¸å¿ƒä½œç”¨</strong>æ˜¯åœ¨å®¢æˆ·ç«¯æ¸²æŸ“æ—¶å…è®¸å¼€å‘è€…å°†æŸäº›å†…å®¹æ¸²æŸ“åˆ° DOM æ ‘çš„å…¶ä»–ä½ç½®ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"#modal"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Modal content<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">teleport</span>&gt;</span>
</code></pre>
<p>è€Œåœ¨ <strong>SSRï¼ˆServer-Side Renderingï¼‰</strong> æ¨¡å¼ä¸­ï¼ŒVue å¿…é¡»åœ¨ç”Ÿæˆ HTML å­—ç¬¦ä¸²æ—¶ä¿ç•™è¿™ç§ç»“æ„çš„é€»è¾‘ä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨å®¢æˆ·ç«¯ hydrate æ—¶ä»èƒ½æ­£ç¡®å…³è”ç›®æ ‡èŠ‚ç‚¹ã€‚<br/>
å› æ­¤ï¼ŒSSR ç¼–è¯‘å™¨å¿…é¡»æ•è· teleport çš„ç›®æ ‡ (<code>to</code> å±æ€§)ã€å†…å®¹åŠç¦ç”¨çŠ¶æ€ (<code>disabled</code>)ï¼Œå¹¶ç”Ÿæˆå¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œçš„æ¸²æŸ“å‡½æ•°è°ƒç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€åŸç†å‰–æï¼šå‡½æ•°ç»“æ„ä¸æ ¸å¿ƒæµç¨‹</h2>
<p>æˆ‘ä»¬å…ˆçœ‹å®Œæ•´å‡½æ•°ç»“æ„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ssrProcessTeleport</span>(<span class="hljs-params">
  node: ComponentNode,
  context: SSRTransformContext,
</span>): <span class="hljs-keyword">void</span> {
  <span class="hljs-comment">// 1. æå– to å±æ€§</span>
  <span class="hljs-keyword">const</span> targetProp = <span class="hljs-title function_">findProp</span>(node, <span class="hljs-string">'to'</span>)
  <span class="hljs-keyword">if</span> (!targetProp) {
    context.<span class="hljs-title function_">onError</span>(
      <span class="hljs-title function_">createSSRCompilerError</span>(<span class="hljs-title class_">SSRErrorCodes</span>.<span class="hljs-property">X_SSR_NO_TELEPORT_TARGET</span>, node.<span class="hljs-property">loc</span>),
    )
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-comment">// 2. è§£æ teleport çš„ç›®æ ‡è¡¨è¾¾å¼</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">target</span>: <span class="hljs-title class_">ExpressionNode</span> | <span class="hljs-literal">undefined</span>
  <span class="hljs-keyword">if</span> (targetProp.<span class="hljs-property">type</span> === <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">ATTRIBUTE</span>) {
    target =
      targetProp.<span class="hljs-property">value</span> &amp;&amp; <span class="hljs-title function_">createSimpleExpression</span>(targetProp.<span class="hljs-property">value</span>.<span class="hljs-property">content</span>, <span class="hljs-literal">true</span>)
  } <span class="hljs-keyword">else</span> {
    target = targetProp.<span class="hljs-property">exp</span>
  }
  <span class="hljs-keyword">if</span> (!target) {
    context.<span class="hljs-title function_">onError</span>(
      <span class="hljs-title function_">createSSRCompilerError</span>(
        <span class="hljs-title class_">SSRErrorCodes</span>.<span class="hljs-property">X_SSR_NO_TELEPORT_TARGET</span>,
        targetProp.<span class="hljs-property">loc</span>,
      ),
    )
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-comment">// 3. æ£€æŸ¥ disabled å±æ€§</span>
  <span class="hljs-keyword">const</span> disabledProp = <span class="hljs-title function_">findProp</span>(node, <span class="hljs-string">'disabled'</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)
  <span class="hljs-keyword">const</span> disabled = disabledProp
    ? disabledProp.<span class="hljs-property">type</span> === <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">ATTRIBUTE</span>
      ? <span class="hljs-string">`true`</span>
      : disabledProp.<span class="hljs-property">exp</span> || <span class="hljs-string">`false`</span>
    : <span class="hljs-string">`false`</span>

  <span class="hljs-comment">// 4. ç”Ÿæˆå†…å®¹æ¸²æŸ“å‡½æ•°</span>
  <span class="hljs-keyword">const</span> contentRenderFn = <span class="hljs-title function_">createFunctionExpression</span>(
    [<span class="hljs-string">`_push`</span>],
    <span class="hljs-literal">undefined</span>,
    <span class="hljs-literal">true</span>,
    <span class="hljs-literal">false</span>,
    node.<span class="hljs-property">loc</span>,
  )
  contentRenderFn.<span class="hljs-property">body</span> = <span class="hljs-title function_">processChildrenAsStatement</span>(node, context)

  <span class="hljs-comment">// 5. è°ƒç”¨ SSR_RENDER_TELEPORT helper è¾“å‡ºæœ€ç»ˆä»£ç </span>
  context.<span class="hljs-title function_">pushStatement</span>(
    <span class="hljs-title function_">createCallExpression</span>(context.<span class="hljs-title function_">helper</span>(<span class="hljs-variable constant_">SSR_RENDER_TELEPORT</span>), [
      <span class="hljs-string">`_push`</span>,
      contentRenderFn,
      target,
      disabled,
      <span class="hljs-string">`_parent`</span>,
    ]),
  )
}
</code></pre>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€é€è¡Œè§£æä¸ä»£ç æ³¨é‡Š</h2>
<h3 data-id="heading-3">1. ä¾èµ–å¯¼å…¥éƒ¨åˆ†</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> {
  <span class="hljs-built_in">type</span> ComponentNode,
  <span class="hljs-built_in">type</span> ExpressionNode,
  NodeTypes,
  createCallExpression,
  createFunctionExpression,
  createSimpleExpression,
  findProp,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/compiler-dom'</span>
</code></pre>
<ul>
<li>è¿™äº›æ¥è‡ª <code>@vue/compiler-dom</code> çš„å·¥å…·å¸®åŠ©æˆ‘ä»¬åœ¨ AST å±‚é¢åˆ†æèŠ‚ç‚¹ç»“æ„ã€‚</li>
<li><code>findProp</code> ç”¨äºæŸ¥æ‰¾èŠ‚ç‚¹ä¸Šçš„å±æ€§ã€‚</li>
<li><code>createSimpleExpression</code> ç”¨äºåŒ…è£…å­—é¢é‡ã€‚</li>
<li><code>createFunctionExpression</code> ä¸ <code>createCallExpression</code> ç”¨äºç”Ÿæˆå¯åºåˆ—åŒ–çš„å‡½æ•°è°ƒç”¨è¡¨è¾¾å¼ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> {
  <span class="hljs-built_in">type</span> SSRTransformContext,
  processChildrenAsStatement,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../ssrCodegenTransform'</span>
</code></pre>
<ul>
<li><code>SSRTransformContext</code> è®°å½•å½“å‰çš„ç¼–è¯‘çŠ¶æ€ï¼ˆä¾‹å¦‚ helper å‡½æ•°ã€è¾“å‡ºç¼“å†²åŒºç­‰ï¼‰ã€‚</li>
<li><code>processChildrenAsStatement</code> ä¼šå°†ç»„ä»¶çš„å­èŠ‚ç‚¹è½¬æ¢ä¸º <code>_push</code> è°ƒç”¨åºåˆ—ï¼ˆå³ç”Ÿæˆ HTML çš„éƒ¨åˆ†ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">2. ç›®æ ‡å±æ€§æå–ä¸æ ¡éªŒ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> targetProp = findProp(node, <span class="hljs-string">'to'</span>)
<span class="hljs-keyword">if</span> (!targetProp) {
  context.onError(
    createSSRCompilerError(SSRErrorCodes.X_SSR_NO_TELEPORT_TARGET, node.loc),
  )
  <span class="hljs-keyword">return</span>
}
</code></pre>
<blockquote>
<p>ğŸ” Teleport æ²¡æœ‰ <code>to</code> å±æ€§æ—¶ç›´æ¥æŠ¥é”™ï¼Œå› ä¸ºæ— æ³•ç¡®å®šæ¸²æŸ“ç›®æ ‡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">3. ç”Ÿæˆ Teleport ç›®æ ‡è¡¨è¾¾å¼</h3>
<pre><code class="hljs language-ini" lang="ini">let target: ExpressionNode | undefined
if (<span class="hljs-attr">targetProp.type</span> === NodeTypes.ATTRIBUTE) {
  <span class="hljs-attr">target</span> =
    targetProp.value &amp;&amp; createSimpleExpression(targetProp.value.content, true)
} else {
  <span class="hljs-attr">target</span> = targetProp.exp
}
</code></pre>
<ul>
<li>å½“ <code>to</code> æ˜¯é™æ€å­—ç¬¦ä¸²æ—¶ï¼ˆå¦‚ <code>"body"</code>ï¼‰ï¼Œä¼šè½¬æ¢æˆç®€å•è¡¨è¾¾å¼ï¼›</li>
<li>è‹¥ä¸ºåŠ¨æ€ç»‘å®šï¼ˆå¦‚ <code>:to="dynamicTarget"</code>ï¼‰ï¼Œåˆ™ç›´æ¥ä½¿ç”¨å·²å­˜åœ¨çš„è¡¨è¾¾å¼ã€‚</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> (!target) {
  context.onError(
    createSSRCompilerError(
      SSRErrorCodes.X_SSR_NO_TELEPORT_TARGET,
      targetProp.loc,
    ),
  )
  <span class="hljs-keyword">return</span>
}
</code></pre>
<blockquote>
<p>å†æ¬¡è¿›è¡Œå®¹é”™æ£€æŸ¥ï¼Œç¡®ä¿ç›®æ ‡æœ‰æ•ˆã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">4. è§£æ Teleport çš„ disabled å±æ€§</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">const</span> disabledProp = findProp(node, <span class="hljs-string">'disabled'</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)
<span class="hljs-type">const</span> disabled = disabledProp
  ? disabledProp.type === NodeTypes.ATTRIBUTE
    ? `<span class="hljs-literal">true</span>`
    : disabledProp.<span class="hljs-built_in">exp</span> || `<span class="hljs-literal">false</span>`
  : `<span class="hljs-literal">false</span>`
</code></pre>
<blockquote>
<p>è¿™é‡Œå®ç°äº†å¯¹ <code>&lt;teleport disabled&gt;</code>ã€<code>:disabled="isOff"</code> ç­‰å¤šç§å†™æ³•çš„å…¼å®¹ã€‚<br/>
è‹¥å®Œå…¨æœªå£°æ˜åˆ™é»˜è®¤ä¸º <code>"false"</code>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">5. ç”Ÿæˆå†…å®¹æ¸²æŸ“å‡½æ•°</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">contentRenderFn</span> = createFunctionExpression(
  <span class="hljs-section">[`_push`]</span>,
  undefined,
  true,
  false,
  node.loc,
)
<span class="hljs-attr">contentRenderFn.body</span> = processChildrenAsStatement(node, context)
</code></pre>
<ul>
<li>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªå‡½æ•° <code>( _push ) =&gt; { ... }</code>ï¼Œå…¶ä¸­ <code>_push</code> æ˜¯ SSR ç”Ÿæˆå­—ç¬¦ä¸²çš„ç´¯ç§¯å™¨ã€‚</li>
<li>é€šè¿‡ <code>processChildrenAsStatement</code> å°†å­èŠ‚ç‚¹è½¬æ¢ä¸º <code>_push('&lt;div&gt;...&lt;/div&gt;')</code> çš„åºåˆ—ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">6. ç”Ÿæˆæœ€ç»ˆçš„ Teleport æ¸²æŸ“è°ƒç”¨</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">context</span><span class="hljs-selector-class">.pushStatement</span>(
  <span class="hljs-built_in">createCallExpression</span>(context.<span class="hljs-built_in">helper</span>(SSR_RENDER_TELEPORT), [
    <span class="hljs-built_in">`_push`</span>,
    contentRenderFn,
    target,
    disabled,
    <span class="hljs-built_in">`_parent`</span>,
  ]),
)
</code></pre>
<blockquote>
<p>è¿™ä¸€æ­¥å®é™…ä¸Šä¼šç”Ÿæˆç±»ä¼¼å¦‚ä¸‹çš„ SSR ä»£ç ï¼š</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">_ssrRenderTeleport</span>(_push, <span class="hljs-function">(<span class="hljs-params">_push</span>) =&gt;</span> {
  <span class="hljs-title function_">_push</span>(<span class="hljs-string">`&lt;div&gt;Modal content&lt;/div&gt;`</span>)
}, <span class="hljs-string">"#modal"</span>, <span class="hljs-literal">false</span>, _parent)
</code></pre>
<p><code>SSR_RENDER_TELEPORT</code> æ˜¯è¿è¡Œæ—¶ helperï¼Œç”¨æ¥åœ¨æœåŠ¡å™¨æ¸²æŸ“æ—¶è¾“å‡ºå ä½ç»“æ„å¹¶è®°å½• Teleport çš„ä¸Šä¸‹æ–‡ã€‚</p>
<hr/>
<h2 data-id="heading-9">å››ã€ä¸å®¢æˆ·ç«¯ç¼–è¯‘é€»è¾‘çš„å¯¹æ¯”</h2>




















<table><thead><tr><th>æ¨¡å¼</th><th>æ¸²æŸ“ä½ç½®</th><th>ä¸»è¦èŒè´£</th></tr></thead><tbody><tr><td><strong>å®¢æˆ·ç«¯ç¼–è¯‘ (<code>compiler-dom</code>)</strong></td><td>å°† <code>&lt;teleport&gt;</code> è½¬æ¢ä¸ºè¿è¡Œæ—¶ç»„ä»¶è°ƒç”¨</td><td>è´Ÿè´£ DOM æ“ä½œä¸æŒ‚è½½ç›®æ ‡</td></tr><tr><td><strong>SSR ç¼–è¯‘ (<code>compiler-ssr</code>)</strong></td><td>ç”Ÿæˆ <code>_ssrRenderTeleport</code> è°ƒç”¨</td><td>è´Ÿè´£è¾“å‡º HTML å­—ç¬¦ä¸²ç»“æ„</td></tr></tbody></table>
<p>SSR ç¼–è¯‘å™¨çš„ç›®æ ‡ä¸æ˜¯è¿è¡Œç»„ä»¶é€»è¾‘ï¼Œè€Œæ˜¯é¢„å…ˆç”Ÿæˆå­—ç¬¦ä¸²æ¨¡æ¿ï¼Œå› æ­¤å®ƒä¼šå°† Teleport çš„è¿è¡Œé€»è¾‘â€œé™çº§â€ä¸ºå­—ç¬¦ä¸²æ‹¼æ¥å‡½æ•°è°ƒç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-10">äº”ã€å®è·µï¼šå¦‚ä½•è°ƒè¯•ä¸æ‰©å±•</h2>
<p>å¦‚æœä½ æƒ³åœ¨è‡ªå®šä¹‰ SSR ç¯å¢ƒä¸­æ³¨å…¥é¢å¤–é€»è¾‘ï¼ˆä¾‹å¦‚è®°å½• Teleport ä½¿ç”¨æ¬¡æ•°ï¼‰ï¼Œå¯ä»¥åœ¨ <code>ssrCodegenTransform</code> é˜¶æ®µæ‹¦æˆªï¼š</p>
<pre><code class="hljs language-scss" lang="scss">context<span class="hljs-selector-class">.registerHelper</span>(SSR_RENDER_TELEPORT)
</code></pre>
<p>å¹¶åœ¨è¿è¡Œæ—¶è‡ªå®šä¹‰ <code>_ssrRenderTeleport</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ssrRenderTeleport</span>(<span class="hljs-params">push, renderContent, target, disabled, parent</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Teleport to: <span class="hljs-subst">${target}</span>`</span>)
  <span class="hljs-keyword">if</span> (!disabled) {
    <span class="hljs-title function_">renderContent</span>(push)
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-11">å…­ã€æ‹“å±•æ€è€ƒ</h2>
<ul>
<li><strong>å¯æ’æ‹”æ€§è®¾è®¡</strong>ï¼šVue SSR çš„ transform é˜¶æ®µæ˜¯æ¨¡å—åŒ–çš„ï¼Œå¯é’ˆå¯¹ç»„ä»¶ç±»å‹æ³¨å†Œä¸åŒçš„äºŒæ¬¡å¤„ç†å‡½æ•°ã€‚</li>
<li><strong>AST çº§ç¼–è¯‘å¤ç”¨</strong>ï¼šæ­¤é€»è¾‘å¤ç”¨ <code>compiler-dom</code> çš„èŠ‚ç‚¹å®šä¹‰ä½“ç³»ï¼Œä½¿å¾— SSR ä¸ DOM ç¼–è¯‘å™¨é«˜åº¦å…¼å®¹ã€‚</li>
<li><strong>è¿è¡Œæ—¶ä¸ç¼–è¯‘æ—¶è§£è€¦</strong>ï¼šSSR ç¼–è¯‘å™¨ä¸ä¼šç›´æ¥ç”Ÿæˆ HTMLï¼Œè€Œæ˜¯ç”Ÿæˆè¿è¡Œæ—¶ helper è°ƒç”¨ï¼Œä½¿å¾—æœåŠ¡å™¨ç«¯é€»è¾‘æ›´çµæ´»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-12">ä¸ƒã€æ½œåœ¨é—®é¢˜ä¸æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>åŠ¨æ€ç›®æ ‡è¡¨è¾¾å¼çš„æ±‚å€¼</strong>ï¼šSSR ä¸ä¼šå®é™…è§£æ <code>:to</code> ç»‘å®šçš„å€¼ï¼Œå¿…é¡»åœ¨è¿è¡Œæ—¶ç¯å¢ƒä¸­ç¡®å®šï¼›</li>
<li><strong>disabled çš„å­—ç¬¦ä¸²åŒ–é™·é˜±</strong>ï¼šåœ¨ SSR ç”Ÿæˆçš„ä»£ç ä¸­ <code>"false"</code> æ˜¯å­—ç¬¦ä¸²ï¼Œä¸æ˜¯çœŸå¸ƒå°”ï¼›</li>
<li><strong>Hydration å·®å¼‚</strong>ï¼šæœåŠ¡ç«¯è¾“å‡ºå¿…é¡»ä¸å®¢æˆ·ç«¯ Teleport çš„æŒ‚è½½ä½ç½®ä¸€è‡´ï¼Œå¦åˆ™ hydration å¤±è´¥ï¼›</li>
<li><strong>åµŒå¥— Teleport åœºæ™¯</strong>ï¼šéœ€è¦è°¨æ…å¤„ç†å¤šå±‚ Teleportï¼Œå¦åˆ™ä¼šå¼•å‘è¾“å‡ºé¡ºåºä¸ä¸€è‡´ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-13">å…«ã€ç»“è¯­</h2>
<p><code>ssrProcessTeleport</code> å±•ç¤ºäº† Vue SSR ç¼–è¯‘å™¨çš„å¼ºå¤§ä¸ä¼˜é›…è®¾è®¡ï¼š<br/>
å®ƒä»¥æœ€å°çš„ä»£ä»·åœ¨ç¼–è¯‘é˜¶æ®µä¿ç•™ Teleport çš„è¿è¡Œè¯­ä¹‰ï¼ŒåŒæ—¶é€šè¿‡æŠ½è±¡å±‚ï¼ˆhelper + contextï¼‰ç¡®ä¿ä»£ç å¯ç»´æŠ¤æ€§ä¸æ‰©å±•æ€§ã€‚</p>
<blockquote>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šå®ƒæ˜¯å°†â€œå®¢æˆ·ç«¯ç»“æ„æŒ‡ä»¤â€è½¬è¯‘ä¸ºâ€œæœåŠ¡ç«¯å­—ç¬¦ä¸²æŒ‡ä»¤â€çš„æ¡¥æ¢ã€‚</p>
</blockquote>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Coze+n8nå®æˆ˜ï¼šå…¬ä¼—å·æ–‡ç« ä»ä»¿å†™åˆ°è‰ç¨¿ç®±ï¼Œ2åˆ†é’Ÿå…¨æå®šï¼Œä½ åªéœ€æäº¤é“¾æ¥ï¼]]></title>    <link>https://juejin.cn/post/7570500819888848939</link>    <guid>https://juejin.cn/post/7570500819888848939</guid>    <pubDate>2025-11-10T06:09:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570500819888848939" data-draft-id="7570339961908969515" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Coze+n8nå®æˆ˜ï¼šå…¬ä¼—å·æ–‡ç« ä»ä»¿å†™åˆ°è‰ç¨¿ç®±ï¼Œ2åˆ†é’Ÿå…¨æå®šï¼Œä½ åªéœ€æäº¤é“¾æ¥ï¼"/> <meta itemprop="keywords" content="Coze,Agent,AIGC"/> <meta itemprop="datePublished" content="2025-11-10T06:09:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åç«¯å°è‚¥è‚ "/> <meta itemprop="url" content="https://juejin.cn/user/2966945320667536"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Coze+n8nå®æˆ˜ï¼šå…¬ä¼—å·æ–‡ç« ä»ä»¿å†™åˆ°è‰ç¨¿ç®±ï¼Œ2åˆ†é’Ÿå…¨æå®šï¼Œä½ åªéœ€æäº¤é“¾æ¥ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2966945320667536/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åç«¯å°è‚¥è‚ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:09:19.000Z" title="Mon Nov 10 2025 06:09:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°è‚¥è‚ ï¼Œä¸“æ³¨ AI å¹²è´§çŸ¥è¯†åˆ†äº«ï¼ä»Šå¤©ç»™å¸¦æ¥çš„æ˜¯n8n+Cozeå®æˆ˜æ•™ç¨‹ï¼Œä¸€é”®ä»¿å†™å…¬ä¼—å·æ–‡ç« åˆ°ä½ çš„è‰ç¨¿ç®±ä¸­ã€‚</strong></p>
<h2 data-id="heading-0">1. å‰è¨€</h2>
<p>åœ¨å‰å‡ ä¸ªæœˆæˆ‘åšè¿‡ä¸€ä¸ªCoze+RPAçš„å…¬ä¼—å·å·¥ä½œæµï¼š<a href="https://juejin.cn/post/7523119147435507727" target="_blank" title="https://juejin.cn/post/7523119147435507727">èººèµšå¿…å¤‡ï¼RPA+Coze+è±†åŒ…ï¼šå…¬ä¼—å·è‡ªåŠ¨å‘æ–‡ï¼ŒAIç‡0%äº²æµ‹æœ‰æ•ˆï¼ˆé™„AIç‡0%æç¤ºè¯ï¼‰</a>ã€‚æœ€è¿‘ä¸æ˜¯éƒ½åœ¨ç ”ç©¶n8nå—ï¼Ÿæœ‰ç¾¤å‹å°±é—®èƒ½ä¸ä¸èƒ½åŸºäºn8nä»¿å†™ï¼Œæˆ‘çš„å›ç­”æ˜¯å½“ç„¶å¯ä»¥ã€‚<strong>åªéœ€è¦ä½ æä¾›ä¸€ä¸ªå¯¹æ ‡æ–‡ç« é“¾æ¥ï¼Œç­‰å¾…å‡ ç§’é’Ÿåï¼Œä¸€ç¯‡æ–°çš„æ–‡ç« å°±ä¼šå‡ºç°åœ¨ä½ çš„å…¬ä¼—å·è‰ç¨¿ç®±å½“ä¸­ï¼Œè¿˜é…äº†å°é¢å›¾</strong>ã€‚</p>
<p>æˆ‘ç”¨åŠå¤©æ—¶é—´æ­å»ºäº†ä¸€ä¸ªn8nå·¥ä½œæµï¼Œæ“ä½œæ–¹æ³•éå¸¸ç®€å•ï¼Œæ‰“å¼€å·¥ä½œæµç•Œé¢ï¼Œç‚¹å‡»åº•éƒ¨çš„ <strong>ã€Excute</strong> <strong>workflow</strong> <strong>ã€‘</strong> æŒ‰é’®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c430cf47db054b1d8fd1edf905b37a2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=ePDrRj4V24MGoC48mPyUE2mszO4%3D" alt="" loading="lazy"/></p>
<p>åœ¨å¼¹å‡ºçš„è¡¨å•ä¸­è¾“å…¥å¯¹æ ‡æ–‡ç« é“¾æ¥ï¼Œç‚¹å‡»ã€submitã€‘æŒ‰é’®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01ce3eb1d80e4b908cf80e0e0cc68e2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=v7ptEBepSodis5nVYN04vNrozN8%3D" alt="" loading="lazy"/></p>
<p>ç­‰å¾…å‡ ç§’åæ–°çš„æ–‡ç« å°±ä¼šå‡ºç°åœ¨æˆ‘ä»¬çš„å…¬ä¼—å·è‰ç¨¿ç®±ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e555527d65ca4f05b54ae394405b222e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=1bpyHbwYsVM8MvgQYWjoOlTNS7E%3D" alt="" loading="lazy"/></p>
<p>ä¸‹å›¾ä¸­å·¦è¾¹æ˜¯åŸæ–‡ï¼Œå³è¾¹æ˜¯ä»¿å†™æ–°æ–‡ <strong>ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12a1849bec894d1fb0c9ba5d27727f5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=Jap38XNZBU6gxcKKYADhucgsY5U%3D" alt="" loading="lazy"/></p>
<p><strong>åœ¨</strong> <strong>æ–°æ–‡</strong> <strong>é‡Œæˆ‘æ²¡åšé…å›¾ï¼Œå› ä¸ºCozeä¹‹å‰åšè¿‡åŒæ ·åŠŸèƒ½çš„</strong> <strong>å·¥ä½œæµ</strong> <strong>ï¼Œå¤§å®¶éƒ½ååº”æƒ³è‡ªå·±é…å›¾ï¼Œæ‰€ä»¥åœ¨n8nè¿™è¾¹å°±çœç•¥äº†å·¥ä½œæµé…å›¾çš„æ­¥éª¤ã€‚å¯¹è¿™ä¸ªå·¥ä½œæµæ„Ÿå…´è¶£çš„è¯»è€…èµ¶ç´§ç ä½è·Ÿç»ƒå“¦~</strong></p>
<h2 data-id="heading-1">2. å·¥ä½œæµæ­å»ºå‰ç½®æ“ä½œ</h2>
<h3 data-id="heading-2">2.1. å¼€é€šå›¾åƒç”ŸæˆæœåŠ¡</h3>
<p><strong>æœ¬</strong> <strong>å·¥ä½œæµ</strong> <strong>ç”Ÿå›¾ä¾æ‰˜é€šä¹‰ä¸‡ç›¸2.5</strong> <strong>MCP</strong> <strong>Serverï¼Œæ•…éœ€è¦å»å¯¹åº”ç½‘ç«™å¼€é€šæœåŠ¡ã€‚</strong></p>
<p>é€šä¹‰ä¸‡ç›¸2.5-å›¾åƒè§†é¢‘ç”Ÿæˆå¼€é€šåœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F%3Fspm%3Da2c4g.11186623.0.0.7f477980N1ex6P%26tab%3Dmcp%23%2Fmcp-market%2Fdetail%2FWan25Media" target="_blank" title="https://bailian.console.aliyun.com/?spm=a2c4g.11186623.0.0.7f477980N1ex6P&amp;tab=mcp#/mcp-market/detail/Wan25Media" ref="nofollow noopener noreferrer">bailian.console.aliyun.com/?spm=a2c4g.â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00a4560cc50442d5a06d6cee86a08460~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=83CMmQtBNrfNHrgesmQxI4Krnug%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.2. ä¸‹è½½n8nç¤¾åŒºèŠ‚ç‚¹</h3>
<p>åœ¨n8nä¸­æ–°å¢ç¤¾åŒºèŠ‚ç‚¹n8n-nodes-wechat-offiaccountã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7da90d985ae144048f77c720c20f2cb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=qXGV5TGC1SV0R9Ez%2Bv1aNLpTlt8%3D" alt="" loading="lazy"/></p>
<p>å®‰è£…å®Œæˆåéœ€è¦å›åˆ°n8nç•Œé¢ï¼Œæ–°å»ºå‡­è¯ï¼ˆWechat Official Account Credentials accountï¼‰ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a733730717bc4d0eacd435124e0062ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=IEY8n8gV98lfgFZE9QIOBHceCOk%3D" alt="" loading="lazy"/></p>
<p>å°†å…¬ä¼—å·åå°çš„appidå’Œsecretå¡«å…¥ä¸Šè¿°è¡¨å•ï¼ŒåŒæ—¶éœ€è¦å°†ä½ çš„å…¬ç½‘ipé…ç½®åˆ°ç™½åå•å½“ä¸­ï¼Œå…¬ç½‘ipè·å–æŒ‡ä»¤ä¸ºï¼šcurl ipinfo.io/ipã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7357898839814447bc3c2e0b7acc770d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=DifOTw%2BYYINyfka1MhhZhT0RThA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">3. å·¥ä½œæµæ­å»º</h2>
<p>æ•´ä¸ªå·¥ä½œæµå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¥ä¸‹æ¥å°±å¼€å§‹ä¾æ¬¡æ‹†è§£å·¥ä½œæµçš„æ¯ä¸ªèŠ‚ç‚¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1430ddda028b499c8b763e0209422869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=kmUR5RJI9D5v7L8LAtqZplp%2FWz4%3D" alt="" loading="lazy"/></p>
<p><strong>å¼€å§‹èŠ‚ç‚¹ï¼š</strong> å¼€å§‹èŠ‚ç‚¹ç±»å‹é€‰æ‹©<strong>On form submissionã€‚</strong></p>
<ul>
<li>Form Titleå¡«å†™å…¬ä¼—å·ä»¿å†™</li>
<li>ç‚¹å‡» <strong>ã€add Form Elementã€‘</strong> èŠ‚ç‚¹æ–°å¢è¡¨å•è¦ç´ ï¼Œåœ¨Field Nameå¡«å…¥å…¬ä¼—å·é“¾æ¥ï¼ŒElement Typeé€‰æ‹©textï¼ŒPlaceholderä»»æ„å¡«å…¥ä¸€ä¸ªå…¬ä¼—å·æ–‡ç« é“¾æ¥ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94a7bfcea310415b950ba26d499a6939~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=%2BAvruBTINVREJf%2BU9NU34Ih%2FcmM%3D" alt="" loading="lazy"/></p>
<p><strong>HTTP Requestï¼ˆè°ƒç”¨Cozeè·å–å…¬ä¼—å·æ–‡ç« å†…</strong> <strong>api</strong> <strong>ï¼‰ï¼š</strong> å¼€å§‹èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>HTTP Requestï¼Œ</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯è°ƒç”¨Cozeå·¥ä½œæµçš„apiæ ¹æ®è¾“å…¥æ–‡ç« çš„urlæ¥è·å–æ–‡ç« çš„æ ‡é¢˜å’Œå†…å®¹ã€‚</p>
<ul>
<li>Methodå¡«å†™POSTã€‚</li>
<li>URLå¡«å†™<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.coze.cn%2Fv1%2Fworkflow%2Frun%25E3%2580%2582" target="_blank" title="https://api.coze.cn/v1/workflow/run%E3%80%82" ref="nofollow noopener noreferrer">api.coze.cn/v1/workflowâ€¦</a></li>
<li>Generic Auth Typeé€‰æ‹©Header Authã€‚</li>
<li>Header Authå¡«å†™Cozeçš„å‡­è¯</li>
<li>æ‰“å¼€Send Headersï¼ŒSpecify Headersé€‰æ‹©Using Fields Belowï¼ŒHeader Parametersä¸­Nameå¡«å†™Content-Typeï¼Œvalueå¡«å†™application/jsonã€‚</li>
<li>æ‰“å¼€Send Bodyï¼ŒBody Content Typeé€‰æ‹©JSONï¼ŒSpecify Bodyé€‰æ‹©Using JSONï¼ŒJSONä¸­å¡«å†™ï¼š</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">{
  <span class="hljs-string">"workflow_id"</span>: <span class="hljs-string">"ä½ çš„Cozeå·¥ä½œæµid"</span>,
  <span class="hljs-string">"parameters"</span>: {
    <span class="hljs-string">"input"</span>: <span class="hljs-string">"{{ <span class="hljs-variable">$json</span>['å…¬ä¼—å·é“¾æ¥'] }}"</span>
  }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b91fae9553f4c4abce4676f1913bb41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=7KdSgRvYMvAi1pRL%2F2Qet%2BnEIfQ%3D" alt="" loading="lazy"/></p>
<p>Cozeå·¥ä½œæµæ­å»ºå¾ˆç®€å•ï¼Œå°±ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œæ ¸å¿ƒå°±æ˜¯é€šè¿‡Cozeæ’ä»¶æ¥è·å–å…¬ä¼—å·æ–‡ç« é“¾æ¥å†…å®¹å¹¶æ¸…æ´—æ–‡ç« æ•°æ®ï¼Œæ’é™¤å¹²æ‰°é¡¹ï¼ˆå¦‚å‘å¸ƒæ—¶é—´è¿™äº›æ— æ„ä¹‰çš„å­—ï¼‰åè¿›è¡Œè¾“å‡ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8169a4cb196c4447ab481dcca6c490d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=vwwA5rw%2BqAv3o2SThRoYMikL4VA%3D" alt="" loading="lazy"/></p>
<p>å·¥ä½œæµæ­å»ºå¥½ä»¥åå°±å¯ä»¥ä»¥APIçš„å½¢å¼è¿›è¡Œè°ƒç”¨äº†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92bfe149546c42fd9953c048724a21c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=V86X0aBcbqKrHk9%2FBWlsru7a4NU%3D" alt="" loading="lazy"/></p>
<p><strong>Code in</strong> <strong>JavaScript</strong> <strong>ï¼ˆæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸º</strong> <strong>json</strong> <strong>æ ¼å¼ï¼‰ï¼šHTTP Request</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Code in JavaScriptï¼Œ</strong> è¿™æ˜¯ä¸€ä¸ªä»£ç èŠ‚ç‚¹ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯æŠŠå‰ç½®èŠ‚ç‚¹è¾“å‡ºçš„å­—ç¬¦ä¸²æ•°æ®è½¬æ¢ä¸ºjsonæ ¼å¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8b64c3c4e544524b549c37e39ace729~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=YHANrcgfJQHTJxOdD1yBV0cB0rE%3D" alt="" loading="lazy"/></p>
<p><strong>çˆ†æ–‡ä»¿å†™ï¼ˆ</strong> <strong>AI</strong> <strong>Agentï¼‰ï¼šCode in</strong> <strong>JavaScript</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>AI Agent</strong>èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨è·å–å‰ç½®èŠ‚ç‚¹è¾“å‡ºçš„æ–‡ç« æ ‡é¢˜å’Œå†…å®¹åŸºäºgemini-2.5-proæ¨¡å‹è¿›è¡Œæ·±åº¦äºŒåˆ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3a0a2adbb6d45bca11a11eb81e6f695~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=28TRWIRa5aqshrZLWGWMSeAAgXM%3D" alt="" loading="lazy"/></p>
<ul>
<li>åœ¨Chat Modelå¤„ç‚¹å‡»ã€+ã€‘ï¼Œæ–°å¢èŠå¤©æ¨¡å‹ã€‚</li>
<li>åœ¨Output Parserå¤„ç‚¹å‡»ã€+ã€‘ï¼Œè§„æ•´è¾“å‡ºæ ¼å¼ï¼ŒJSON Exampleå¤„å¡«å…¥ï¼š</li>
</ul>

<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"title"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"content"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25e3a2c4e1e743f2ac7110b1951d8f0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=W4t0priBgc5qH84mf1TaBcxmZv8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">3.1 ç”Ÿæˆå°é¢</h3>
<p><strong>ç”Ÿæˆå°é¢ï¼ˆ</strong> <strong>AI</strong> <strong>Agentï¼‰ï¼šçˆ†æ–‡ä»¿å†™ï¼ˆAI Agentï¼‰</strong> èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>AI Agentã€‚</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨çš„è°ƒç”¨é€šä¹‰ä¸‡ç›¸2.5çš„MCP Serveræ¥ç”Ÿæˆå›¾ç‰‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c597d490ed794789bb43582529cd3fc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=mlU4O74mVUQb1btKcO0stsCT%2BWo%3D" alt="" loading="lazy"/></p>
<ul>
<li>Chat Modelå¤„ç‚¹å‡»ã€+ã€‘æ–°å¢OpenAI Chat Modeï¼ˆæˆ–DeepSeek Chat Modelï¼‰ã€‚</li>
<li>Toolå¤„ç‚¹å‡»ã€+ã€‘æ–°å¢MCP Client Toolç”¨äºå›¾ç‰‡ç”Ÿæˆã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cce09ce1b97f41baaaa263cfc6dbb3bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=skWhz6Uk01mtftMiwjtrCNfhWCw%3D" alt="" loading="lazy"/></p>
<p>Endpointå¡«å†™<a href="https://link.juejin.cn?target=https%3A%2F%2Fdashscope.aliyuncs.com%2Fapi%2Fv1%2Fmcps%2FWan25Media%2Fsse%25E3%2580%2582" target="_blank" title="https://dashscope.aliyuncs.com/api/v1/mcps/Wan25Media/sse%E3%80%82" ref="nofollow noopener noreferrer">dashscope.aliyuncs.com/api/v1/mcpsâ€¦</a></p>
<p>Server Transporté€‰æ‹©Server Sent Events (Deprecated)ã€‚</p>
<p>Authenticationé€‰æ‹©Header Authã€‚</p>
<p>Credential for Header Authç‚¹å‡»Create new credentialï¼ŒNameå¡«å†™Authorizationï¼ŒValueå¡«å†™é˜¿é‡Œäº‘ç™¾ç‚¼çš„keyï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F%3Fspm%3Da2c4g.11186623.0.0.7f477980N1ex6P%26tab%3Dmodel%23%2Fapi-key%25EF%25BC%2589%25EF%25BC%258C%25E6%25B3%25A8%25E6%2584%258Fkey%25E5%2589%258D%25E9%259D%25A2%25E9%259C%2580%25E8%25A6%2581%25E5%258A%25A0Bearer%25E5%2592%258C%25E4%25B8%2580%25E4%25B8%25AA%25E8%258B%25B1%25E6%2596%2587%25E7%25A9%25BA%25E6%25A0%25BC%25E3%2580%2582**%25E6%259C%2580%25E5%2590%258E%25E6%258A%258A%25E8%25BF%2599%25E4%25B8%25AAAuth%25E5%2591%25BD%25E5%2590%258D%25E4%25B8%25BAbailian%25E3%2580%2582" target="_blank" title="https://bailian.console.aliyun.com/?spm=a2c4g.11186623.0.0.7f477980N1ex6P&amp;tab=model#/api-key%EF%BC%89%EF%BC%8C%E6%B3%A8%E6%84%8Fkey%E5%89%8D%E9%9D%A2%E9%9C%80%E8%A6%81%E5%8A%A0Bearer%E5%92%8C%E4%B8%80%E4%B8%AA%E8%8B%B1%E6%96%87%E7%A9%BA%E6%A0%BC%E3%80%82**%E6%9C%80%E5%90%8E%E6%8A%8A%E8%BF%99%E4%B8%AAAuth%E5%91%BD%E5%90%8D%E4%B8%BAbailian%E3%80%82" ref="nofollow noopener noreferrer">bailian.console.aliyun.com/?spm=a2c4g.â€¦</a>**</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06923ce274f04160aec4dc5e7398a94a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=jW8EPc7np%2BoIsPasG6AZ1qJvntk%3D" alt="" loading="lazy"/></p>
<p><strong>HTTP Request1ï¼ˆå°†å°é¢å›¾é“¾æ¥è½¬æ¢ä¸ºæ–‡ä»¶ï¼‰ï¼šç”Ÿæˆå°é¢ï¼ˆ</strong> <strong>AI</strong> <strong>Agentï¼‰</strong> èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ·»åŠ <strong>HTTP Request</strong>èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯æŠŠå›¾ç‰‡é“¾æ¥è½¬æ¢ä¸ºæ–‡ä»¶æ ¼å¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75e5f45ed13d4ce5b887fd6ece0e744a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=2ic2T1T2aY%2BAJoI96iBuw3vrUNI%3D" alt="" loading="lazy"/></p>
<p><strong>Media:uploadOther mediaï¼ˆä¸Šä¼ å°é¢å›¾ï¼‰ï¼šHTTP Request1</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Media:uploadOther mediaã€‚</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯ä¸Šä¼ å›¾ç‰‡é“¾æ¥å¹¶è¿”å›ä¸€ä¸ªmedia_idï¼Œåç»­å¡«å……åˆ°å…¬ä¼—å·å°é¢ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/006b504ac9374f5280747a9ce1c78ab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=i92E%2BIsCQhP7ICI0VvrFGpFh2M0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">3.2. ç”Ÿæˆæ­£æ–‡</h3>
<p><strong>Code in JavaScript1ï¼šçˆ†æ–‡ä»¿å†™ï¼ˆ</strong> <strong>AI</strong> <strong>Agentï¼‰</strong> èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢Code in JavaScriptï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å°†æ­£æ–‡å†…å®¹æ”¹å†™æˆhtmlæ ¼å¼å†…å®¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45a64f65af3b41ea911899620b9e1de9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=Pjg34iKv8cSA4owYyPRwOTvK%2FRI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">3.3. ä¸Šä¼ åˆ°è‰ç¨¿ç®±</h3>
<p><strong>Mergeï¼šCode in JavaScript1å’ŒMedia:uploadOther media</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Mergeã€‚</strong> è¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯æ•´åˆå‰é¢ç”Ÿæˆçš„å°é¢å’Œä»¿å†™åŸæ–‡ã€‚</p>
<ul>
<li>Modeé€‰æ‹©Combine</li>
<li>Combine Byé€‰æ‹©Position</li>
<li>Number of Inputså¡«å†™2</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7033e031e62d41d2960a9cc379c7bb6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=aPEkb%2BEZVqX4rcHLJfE2LEcFeqc%3D" alt="" loading="lazy"/></p>
<p><strong>æ–°å¢è‰ç¨¿ï¼šMerge</strong>èŠ‚ç‚¹å‡ºæ¥åç‚¹å‡»ã€+ã€‘æ–°å¢<strong>Draft:add draft</strong>èŠ‚ç‚¹ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„ä½œç”¨æ˜¯å°†å‰ç½®èŠ‚ç‚¹ç”Ÿæˆçš„å°é¢å’Œæ­£æ–‡éƒ½ä¸Šä¼ åˆ°å…¬ä¼—å·è‰ç¨¿å½“ä¸­ã€‚</p>
<p>è‰ç¨¿æ–‡ç« å¯¹è±¡å†…å®¹(Articles)å¡«å†™ï¼š</p>
<pre><code class="hljs language-python" lang="python">[
  {
    <span class="hljs-string">"article_type"</span>: <span class="hljs-string">"news"</span>,
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"{{ $('çˆ†æ–‡ä»¿å†™').item.json.output.title }}"</span>,
    <span class="hljs-string">"author"</span>: <span class="hljs-string">"å°è‚¥è‚ "</span>,
    <span class="hljs-string">"content"</span>: <span class="hljs-string">"{{ 
  $json.htmlContent
    .replaceAll("</span>\n<span class="hljs-string">", "</span>\n<span class="hljs-string">")   
    .replaceAll("</span>\<span class="hljs-string">r", "</span>\<span class="hljs-string">r")   
    .replaceAll("</span><span class="hljs-string">""</span>, <span class="hljs-string">"'"</span>)   
}}<span class="hljs-string">",
    "</span>thumb_media_id<span class="hljs-string">": "</span>{{ $json.media_id }}<span class="hljs-string">",
    "</span>show_cover_pic<span class="hljs-string">": 1,
    "</span>need_open_comment<span class="hljs-string">": 1,
    "</span>only_fans_can_comment<span class="hljs-string">": 0
  }
]
</span></code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34eff983330a401d88ae8c90b2fbabf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=u1nsGtMPR%2FlEPTB38j8Q921A2TQ%3D" alt="" loading="lazy"/></p>
<p>ä»¥ä¸Šå°±æ˜¯æ•´ä¸ªå·¥ä½œæµçš„å®Œæ•´æµç¨‹æ‹†è§£ï¼ŒåŠ¨æ‰‹èƒ½åŠ›å¼ºçš„è¯»è€…å¯ä»¥è·Ÿç€æ•™ç¨‹å®è·µä¸€éã€‚å¦‚æœæƒ³ç›´æ¥è·å–å·¥ä½œæµï¼Œå¯ä»¥åŠ å…¥ç¤¾ç¾¤åæˆ‘æ‹‰ä½ è¿›ç©ºé—´ç›´æ¥å­¦ä¹ ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-8">4. ç»“è¯­</h2>
<p>æœ¬æ–‡è¯¦ç»†æ‹†è§£äº†å¦‚ä½•åˆ©ç”¨ <strong>n8n</strong> å¼ºå¤§çš„è‡ªåŠ¨åŒ–èƒ½åŠ›ï¼Œé…åˆ <strong>Coze</strong> å’Œ <strong>AI</strong> <strong>Agent</strong>ï¼ˆå¦‚ <strong>Gemini 2.5 Pro</strong> æ¨¡å‹ï¼‰å®ç°ä¸€ä¸ªé«˜åº¦è‡ªåŠ¨åŒ–çš„å…¬ä¼—å·æ–‡ç« ä»¿å†™å·¥ä½œæµã€‚ä»å‰ç½®æœåŠ¡çš„å¼€é€šã€ç¤¾åŒºèŠ‚ç‚¹çš„å®‰è£…ï¼Œåˆ°å·¥ä½œæµçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹â€”â€”æ•°æ®è·å–ã€å†…å®¹æ·±åº¦äºŒåˆ›ã€å°é¢å›¾ç”Ÿæˆã€æ ¼å¼è½¬æ¢ï¼Œç›´è‡³æœ€ç»ˆä¸Šä¼ åˆ°å…¬ä¼—å·<strong>è‰ç¨¿ç®±</strong>ï¼Œæˆ‘ä»¬å®Œæˆäº†æ•´ä¸ª<strong>ä¸€é”®ä»¿å†™</strong>çš„é—­ç¯ã€‚</p>
<p><strong>å¦‚æœ¬æ¬¡åˆ†äº«å¯¹ä½ æœ‰å¸®åŠ©ï¼Œéº»çƒ¦ä¸€é”®ä¸‰è¿æ”¯æŒä¸€ä¸‹å°è‚¥è‚ ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§~</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a96bc810e0f4e9b9ba33c8bc628fc68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359758&amp;x-signature=yMZwLutQPoQH8yGkU0EzOKu92qY%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æï¼šVue 3 ä¸­ ssrTransformTransitionGroup çš„å®ç°åŸç†ä¸æœºåˆ¶]]></title>    <link>https://juejin.cn/post/7569976345929777203</link>    <guid>https://juejin.cn/post/7569976345929777203</guid>    <pubDate>2025-11-09T00:02:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569976345929777203" data-draft-id="7569913182036033546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æï¼šVue 3 ä¸­ ssrTransformTransitionGroup çš„å®ç°åŸç†ä¸æœºåˆ¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-09T00:02:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æï¼šVue 3 ä¸­ ssrTransformTransitionGroup çš„å®ç°åŸç†ä¸æœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T00:02:31.000Z" title="Sun Nov 09 2025 00:02:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue 3 çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ç¼–è¯‘ä½“ç³»ä¸­ï¼Œ<strong><code>TransitionGroup</code></strong> æ˜¯ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„ç»„ä»¶ã€‚<br/>
å®ƒæ—¢æ˜¯ä¸€ä¸ªè¿‡æ¸¡å®¹å™¨ï¼Œåˆéœ€è¦åœ¨æœåŠ¡ç«¯ç”Ÿæˆç»“æ„åŒ– HTMLï¼Œå¹¶åœ¨å®¢æˆ·ç«¯ä¿æŒå¯ hydration çš„ä¸€è‡´æ€§ã€‚<br/>
ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼ŒVue ç¼–è¯‘å™¨å¯¹å®ƒè¿›è¡Œäº†ä¸“é—¨çš„ä¸¤é˜¶æ®µå¤„ç†â€”â€”<br/>
ä¹Ÿå°±æ˜¯æœ¬æ–‡è¦æ·±å…¥è§£æçš„ <code>ssrTransformTransitionGroup</code> ä¸ <code>ssrProcessTransitionGroup</code>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä¸æ•´ä½“æ¦‚å¿µ</h2>
<p>Vue çš„ SSR ç¼–è¯‘è¿‡ç¨‹ä¸æ™®é€šç¼–è¯‘ï¼ˆå³ DOM æ¸²æŸ“ç¼–è¯‘ï¼‰ä¸åŒã€‚<br/>
åœ¨ SSR æ¨¡å¼ä¸‹ï¼Œæ¨¡æ¿éœ€è¦è¢«è½¬æ¢ä¸º<strong>å¯ç›´æ¥è¾“å‡º HTML å­—ç¬¦ä¸²çš„æ¸²æŸ“å‡½æ•°</strong>ã€‚</p>
<p>å¯¹äºä¸€èˆ¬ç»„ä»¶æ¥è¯´ï¼ŒSSR ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°† propsã€children ç­‰ä¿¡æ¯ç¼–è¯‘ä¸ºå­—ç¬¦ä¸²ã€‚<br/>
ä½†å¯¹äº <code>&lt;TransitionGroup&gt;</code> è¿™ç§<strong>åŠ¨æ€åŒ…è£…å®¹å™¨ç»„ä»¶</strong>ï¼Œåˆ™å¿…é¡»ç‰¹æ®Šå¤„ç†ï¼š</p>
<ul>
<li>å®ƒå…è®¸å¼€å‘è€…é€šè¿‡ <code>tag</code> æˆ– <code>:tag</code> è‡ªå®šä¹‰åŒ…è£¹å…ƒç´ ï¼›</li>
<li>å®ƒä¼šåœ¨è¿è¡Œæ—¶<strong>å°†å­èŠ‚ç‚¹å±•å¹³ï¼ˆflattenï¼‰</strong> ï¼›</li>
<li>å®ƒä¼šåœ¨è¿è¡Œæ—¶<strong>è¿‡æ»¤æ³¨é‡ŠèŠ‚ç‚¹</strong>ï¼›</li>
<li>åŒæ—¶è¿˜è¦ä¿è¯ SSR ä¸ Hydration é˜¶æ®µ DOM ç»“æ„å¯¹é½ã€‚</li>
</ul>
<p>äºæ˜¯ Vue å†…éƒ¨å¼•å…¥äº†ä¸€ä¸ªåŒé˜¶æ®µè®¾è®¡ï¼š</p>
<blockquote>
<p><strong>Phase 1ï¼šæ„å»ºé˜¶æ®µï¼ˆTransformï¼‰</strong><br/>
<strong>Phase 2ï¼šè¾“å‡ºé˜¶æ®µï¼ˆProcessï¼‰</strong></p>
</blockquote>
<p>è¿™å°±æ˜¯æœ¬æ–‡ä»¶å®ç°çš„æ ¸å¿ƒé€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æºç å…¨è²Œ</h2>
<p>ä»¥ä¸‹æ˜¯ Vue æºç ä¸­çš„å…³é”®å®ç°ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ssrTransformTransitionGroup</span>(<span class="hljs-params">node, context</span>) {
  <span class="hljs-keyword">return</span> (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> tag = <span class="hljs-title function_">findProp</span>(node, <span class="hljs-string">'tag'</span>)
    <span class="hljs-keyword">if</span> (tag) {
      <span class="hljs-keyword">const</span> otherProps = node.<span class="hljs-property">props</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p !== tag)
      <span class="hljs-keyword">const</span> { props, directives } = <span class="hljs-title function_">buildProps</span>(node, context, otherProps, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)
      <span class="hljs-keyword">let</span> propsExp = <span class="hljs-literal">null</span>
      <span class="hljs-keyword">if</span> (props || directives.<span class="hljs-property">length</span>) {
        propsExp = <span class="hljs-title function_">createCallExpression</span>(context.<span class="hljs-title function_">helper</span>(<span class="hljs-variable constant_">SSR_RENDER_ATTRS</span>), [
          <span class="hljs-title function_">buildSSRProps</span>(props, directives, context),
        ])
      }
      wipMap.<span class="hljs-title function_">set</span>(node, {
        tag,
        propsExp,
        <span class="hljs-attr">scopeId</span>: context.<span class="hljs-property">scopeId</span> || <span class="hljs-literal">null</span>,
      })
    }
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ssrProcessTransitionGroup</span>(<span class="hljs-params">node, context</span>) {
  <span class="hljs-keyword">const</span> entry = wipMap.<span class="hljs-title function_">get</span>(node)
  <span class="hljs-keyword">if</span> (entry) {
    <span class="hljs-keyword">const</span> { tag, propsExp, scopeId } = entry
    <span class="hljs-keyword">if</span> (tag.<span class="hljs-property">type</span> === <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">DIRECTIVE</span>) {
      <span class="hljs-comment">// åŠ¨æ€ tag</span>
      context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&lt;`</span>)
      context.<span class="hljs-title function_">pushStringPart</span>(tag.<span class="hljs-property">exp</span>!)
      <span class="hljs-keyword">if</span> (propsExp) context.<span class="hljs-title function_">pushStringPart</span>(propsExp)
      <span class="hljs-keyword">if</span> (scopeId) context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">` <span class="hljs-subst">${scopeId}</span>`</span>)
      context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&gt;`</span>)

      <span class="hljs-title function_">processChildren</span>(node, context, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>)

      context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&lt;/`</span>)
      context.<span class="hljs-title function_">pushStringPart</span>(tag.<span class="hljs-property">exp</span>!)
      context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&gt;`</span>)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// é™æ€ tag</span>
      context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&lt;<span class="hljs-subst">${tag.value!.content}</span>`</span>)
      <span class="hljs-keyword">if</span> (propsExp) context.<span class="hljs-title function_">pushStringPart</span>(propsExp)
      <span class="hljs-keyword">if</span> (scopeId) context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">` <span class="hljs-subst">${scopeId}</span>`</span>)
      context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&gt;`</span>)

      <span class="hljs-title function_">processChildren</span>(node, context, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>)
      context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&lt;/<span class="hljs-subst">${tag.value!.content}</span>&gt;`</span>)
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// æ—  tag æƒ…å†µ</span>
    <span class="hljs-title function_">processChildren</span>(node, context, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>)
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€åŸç†å‰–æï¼šSSR ç¼–è¯‘çš„ä¸¤é˜¶æ®µé€»è¾‘</h2>
<h3 data-id="heading-3">1. Transform é˜¶æ®µï¼ˆ<code>ssrTransformTransitionGroup</code>ï¼‰</h3>
<p>åœ¨ AST è½¬æ¢é˜¶æ®µï¼ŒVue ç¼–è¯‘å™¨ä¼šéå†æ¨¡æ¿ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚<br/>
å¯¹äº <code>&lt;TransitionGroup&gt;</code>ï¼Œè¿™ä¸€æ­¥ä¸»è¦åšçš„æ˜¯<strong>ä¿¡æ¯æå–</strong>ï¼š</p>
<h4 data-id="heading-4">æ ¸å¿ƒæµç¨‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> tag = <span class="hljs-title function_">findProp</span>(node, <span class="hljs-string">'tag'</span>) <span class="hljs-comment">// æ‰¾å‡º &lt;TransitionGroup tag="ul"&gt; çš„ tag å±æ€§</span>
<span class="hljs-keyword">const</span> otherProps = node.<span class="hljs-property">props</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p !== tag) <span class="hljs-comment">// è¿‡æ»¤æ‰ tag</span>
<span class="hljs-keyword">const</span> { props, directives } = <span class="hljs-title function_">buildProps</span>(...) <span class="hljs-comment">// æ„å»º SSR props</span>
</code></pre>
<h4 data-id="heading-5">é€»è¾‘è¯´æ˜</h4>
<ul>
<li>
<p><strong><code>findProp</code></strong>ï¼šæŸ¥æ‰¾ <code>&lt;TransitionGroup&gt;</code> ä¸Šçš„ tag å±æ€§ï¼›</p>
</li>
<li>
<p><strong><code>buildProps</code></strong>ï¼šæ„å»º SSR éœ€è¦çš„ propsï¼›</p>
<ul>
<li>è¿™é‡Œä¼ å…¥çš„ <code>true /* ssr (skip event listeners) */</code> è¡¨ç¤ºè·³è¿‡äº‹ä»¶ç›‘å¬ï¼Œå› ä¸º SSR ä¸ç»‘å®šäº‹ä»¶ï¼›</li>
</ul>
</li>
<li>
<p><strong><code>createCallExpression</code></strong>ï¼šç”Ÿæˆ <code>_ssrRenderAttrs()</code> è°ƒç”¨è¡¨è¾¾å¼ï¼Œç”¨äºåœ¨åç»­æ‹¼æ¥å­—ç¬¦ä¸²æ—¶æ’å…¥å±æ€§å­—ç¬¦ä¸²ï¼›</p>
</li>
<li>
<p>æœ€ç»ˆç»“æœå­˜å…¥ä¸€ä¸ª <code>WeakMap</code> ç¼“å­˜ï¼Œä»¥ä¾¿ç¬¬äºŒé˜¶æ®µä½¿ç”¨ã€‚</p>
</li>
</ul>
<h4 data-id="heading-6">ç”Ÿæˆçš„ä¸­é—´æ•°æ®ç»“æ„</h4>
<pre><code class="hljs language-yaml" lang="yaml">{
  <span class="hljs-attr">tag:</span> <span class="hljs-string">AttributeNode</span> <span class="hljs-string">|</span> <span class="hljs-string">DirectiveNode</span>,
  <span class="hljs-attr">propsExp:</span> <span class="hljs-string">CallExpression</span> <span class="hljs-string">|</span> <span class="hljs-literal">null</span>,
  <span class="hljs-attr">scopeId:</span> <span class="hljs-string">string</span> <span class="hljs-string">|</span> <span class="hljs-literal">null</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-7">2. Process é˜¶æ®µï¼ˆ<code>ssrProcessTransitionGroup</code>ï¼‰</h3>
<p>è¿™ä¸€é˜¶æ®µçœŸæ­£æ‰§è¡Œâ€œæ¸²æŸ“å­—ç¬¦ä¸²è¾“å‡ºâ€ã€‚</p>
<h4 data-id="heading-8">åŠ¨æ€æ ‡ç­¾ï¼ˆ<code>:tag="expr"</code>ï¼‰é€»è¾‘</h4>
<pre><code class="hljs language-scss" lang="scss">if (tag.type === NodeTypes.DIRECTIVE) {
  context<span class="hljs-selector-class">.pushStringPart</span>(`&lt;`)
  context<span class="hljs-selector-class">.pushStringPart</span>(tag.exp!)
  if (propsExp) context<span class="hljs-selector-class">.pushStringPart</span>(propsExp)
  if (scopeId) context<span class="hljs-selector-class">.pushStringPart</span>(` ${scopeId}`)
  context<span class="hljs-selector-class">.pushStringPart</span>(`&gt;`)
  <span class="hljs-built_in">processChildren</span>(node, context, false, true, true)
  context<span class="hljs-selector-class">.pushStringPart</span>(`&lt;/`)
  context<span class="hljs-selector-class">.pushStringPart</span>(tag.exp!)
  context<span class="hljs-selector-class">.pushStringPart</span>(`&gt;`)
}
</code></pre>
<blockquote>
<p>åœ¨è¿™é‡Œï¼Œ<code>tag.exp!</code> æ˜¯ä¸€ä¸ªåŠ¨æ€è¡¨è¾¾å¼ï¼ˆä¾‹å¦‚ <code>"listTag"</code>ï¼‰ï¼Œ<br/>
SSR è¾“å‡ºä¼šå˜æˆç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">&lt;<span class="hljs-variable">${listTag}</span> ...attrs&gt;...&lt;/<span class="hljs-variable">${listTag}</span>&gt;
</code></pre>
</blockquote>
<h4 data-id="heading-9">é™æ€æ ‡ç­¾ï¼ˆ<code>tag="ul"</code>ï¼‰é€»è¾‘</h4>
<pre><code class="hljs language-javascript" lang="javascript">context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&lt;<span class="hljs-subst">${tag.value!.content}</span>`</span>)
<span class="hljs-keyword">if</span> (propsExp) context.<span class="hljs-title function_">pushStringPart</span>(propsExp)
<span class="hljs-keyword">if</span> (scopeId) context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">` <span class="hljs-subst">${scopeId}</span>`</span>)
context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&gt;`</span>)
<span class="hljs-title function_">processChildren</span>(node, context, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>)
context.<span class="hljs-title function_">pushStringPart</span>(<span class="hljs-string">`&lt;/<span class="hljs-subst">${tag.value!.content}</span>&gt;`</span>)
</code></pre>
<blockquote>
<p>è¾“å‡ºç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;ul <span class="hljs-attr">class</span>=<span class="hljs-string">"fade-list"</span>&gt; ... &lt;/ul&gt;
</code></pre>
</blockquote>
<h4 data-id="heading-10">ç‰¹æ®Šå‚æ•°è¯´æ˜</h4>
<p><code>processChildren(node, context, false, true, true)</code> çš„æœ€åä¸¤ä¸ªå¸ƒå°”å‚æ•°éå¸¸å…³é”®ï¼š</p>
<ul>
<li><strong><code>flattenFragments = true</code></strong>ï¼šè¡¨ç¤ºå°†æ‰€æœ‰å­èŠ‚ç‚¹å±•å¼€ä¸ºå•å±‚ fragmentï¼›</li>
<li><strong><code>ignoreComments = true</code></strong>ï¼šTransitionGroup ä¼šåœ¨è¿è¡Œæ—¶è¿‡æ»¤æ‰æ³¨é‡ŠèŠ‚ç‚¹ï¼Œå› æ­¤ SSR ä¹Ÿå¿…é¡»åŒæ­¥ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-11">å››ã€å¯¹æ¯”ä¸ç‰¹æ€§åˆ†æ</h2>









































<table><thead><tr><th>ç‰¹æ€§é¡¹</th><th>æ™®é€šç»„ä»¶</th><th>Transition</th><th>TransitionGroup</th></tr></thead><tbody><tr><td>è¾“å‡ºç»“æ„</td><td>å›ºå®š DOM æˆ– Fragment</td><td>åŒ…è£¹å­å…ƒç´ </td><td><strong>åŠ¨æ€ tag å¯é…ç½®</strong></td></tr><tr><td>Props å¤„ç†</td><td>æ­£å¸¸</td><td>æ­£å¸¸</td><td><strong>è·³è¿‡äº‹ä»¶ç›‘å¬</strong></td></tr><tr><td>å­èŠ‚ç‚¹æ¸²æŸ“</td><td>ä¿æŒå±‚çº§</td><td>å•å±‚</td><td><strong>å¼ºåˆ¶å±•å¹³ (flatten)</strong></td></tr><tr><td>æ³¨é‡ŠèŠ‚ç‚¹</td><td>ä¿ç•™</td><td>ä¿ç•™</td><td><strong>è¿‡æ»¤æ‰æ³¨é‡ŠèŠ‚ç‚¹</strong></td></tr><tr><td>SSR è¾“å‡º</td><td>é™æ€</td><td>åŠ¨æ€åŒ…è£¹</td><td><strong>åŠ¨æ€æ‹¼æ¥æ ‡ç­¾ç»“æ„</strong></td></tr></tbody></table>
<p>è¿™ä¸€è¡¨æ ¼æ­ç¤ºäº†ä¸ºä»€ä¹ˆ Vue éœ€è¦ä¸“é—¨çš„ SSR transform é€»è¾‘æ¥å¤„ç†å®ƒï¼š<br/>
TransitionGroup åŒæ—¶å…·å¤‡â€œå®¹å™¨â€ä¸â€œåŠ¨æ€ç»“æ„â€çš„ç‰¹æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-12">äº”ã€æ‹“å±•ç†è§£ï¼šSSR Transform çš„æ¨¡å¼åŒ–è®¾è®¡</h2>
<p>Vue çš„ SSR Transform ç³»ç»Ÿæ™®ééµå¾ªä¸€ä¸ªæ¨¡æ¿åŒ–çš„æ¨¡å¼ï¼š</p>




















<table><thead><tr><th>é˜¶æ®µ</th><th>å‡½æ•°å‘½å</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>Transform é˜¶æ®µ</strong></td><td><code>ssrTransformXxx</code></td><td>åªè´Ÿè´£æ”¶é›†é™æ€ä¿¡æ¯ï¼Œè®°å½•åˆ° WeakMap</td></tr><tr><td><strong>Process é˜¶æ®µ</strong></td><td><code>ssrProcessXxx</code></td><td>è¯»å–ç¼“å­˜ä¿¡æ¯ï¼Œç”Ÿæˆæœ€ç»ˆå­—ç¬¦ä¸²è¾“å‡º</td></tr></tbody></table>
<p>åŒç±»æ–‡ä»¶åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>ssrTransformComponent</code></li>
<li><code>ssrTransformTeleport</code></li>
<li><code>ssrTransformSlotOutlet</code></li>
</ul>
<p>è¿™ç§è®¾è®¡å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>é€»è¾‘è§£è€¦</strong>ï¼šTransform ä¸è¾“å‡ºç”Ÿæˆåˆ†ç¦»ï¼›</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…é‡å¤å±æ€§åˆ†æï¼›</li>
<li><strong>é€’å½’å®‰å…¨</strong>ï¼šæ”¯æŒåµŒå¥—ç»“æ„ï¼ˆå¦‚ TransitionGroup å†…å†åµŒå¥—ç»„ä»¶ï¼‰ï¼›</li>
<li><strong>Hydration ä¸€è‡´æ€§</strong>ï¼šä¿è¯ SSR è¾“å‡ºä¸å®¢æˆ·ç«¯æ¸²æŸ“ç»“æ„å¯¹é½ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-13">å…­ã€æ½œåœ¨é—®é¢˜ä¸å®ç°æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>WeakMap ç”Ÿå‘½å‘¨æœŸ</strong><br/>
ç¼–è¯‘é˜¶æ®µç¼“å­˜ä»…å­˜äºå†…å­˜ï¼Œè‹¥å­˜åœ¨å¹¶è¡Œç¼–è¯‘ï¼ˆå¦‚ Vite å¤šçº¿ç¨‹ SSRï¼‰ï¼Œéœ€é¿å…äº¤å‰è®¿é—®ã€‚</p>
</li>
<li>
<p><strong>å±æ€§æ‹¼æ¥å®‰å…¨æ€§</strong><br/>
ç”±äº SSR æ‹¼æ¥å­—ç¬¦ä¸²ç›´æ¥è¾“å‡º HTMLï¼Œå¿…é¡»ä¿è¯ <code>tag.exp</code> å®‰å…¨ï¼Œé˜²æ­¢ XSS æ³¨å…¥ã€‚Vue å†…éƒ¨å¯¹è¯¥è¡¨è¾¾å¼æœ‰ AST çº§éªŒè¯ã€‚</p>
</li>
<li>
<p><strong>ä½œç”¨åŸŸ ID æ‹¼æ¥ç»†èŠ‚</strong><br/>
æ³¨æ„ <code>context.pushStringPart(</code> ${scopeId}<code>)</code> å‰çš„ç©ºæ ¼ï¼Œ<br/>
è‹¥çœç•¥ï¼Œå¯èƒ½å¯¼è‡´å±æ€§ç²˜è¿é”™è¯¯ï¼Œå¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;<span class="hljs-attr">ulclass</span>=<span class="hljs-string">"fade"</span>&gt;  // âŒ é”™è¯¯è¾“å‡º
</code></pre>
</li>
<li>
<p><strong>æ—  tag æƒ…å†µ</strong><br/>
è‹¥å¼€å‘è€…æœªæŒ‡å®š tagï¼ŒVue ä¼šé€€å› fragment æ¨¡å¼ï¼ˆå³ä¸åŒ…è£¹ä»»ä½•æ ‡ç­¾ï¼‰ï¼Œ<br/>
æ­¤æ—¶è°ƒç”¨ <code>processChildren(..., true, true, true)</code>ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-14">ä¸ƒã€æ€»ç»“ä¸å¯ç¤º</h2>
<p><code>ssrTransformTransitionGroup</code> æ˜¯ Vue 3 SSR æ¶æ„ä¸­ä¸€ä¸ªå°è€Œç²¾å¦™çš„ç‰‡æ®µã€‚<br/>
å®ƒçš„å®ç°ä½“ç°å‡º Vue å¯¹ç¼–è¯‘é˜¶æ®µä¸è¿è¡Œæ—¶ä¸€è‡´æ€§çš„æé«˜è¦æ±‚ï¼š</p>
<ul>
<li>åˆ©ç”¨ <strong>ä¸¤é˜¶æ®µç¼–è¯‘ç­–ç•¥</strong> è§£å†³åŠ¨æ€ç»“æ„é—®é¢˜ï¼›</li>
<li>åœ¨ <strong>AST Transform å±‚</strong> æå‰æŠ½å–ä¿¡æ¯ï¼Œé¿å…ç”ŸæˆæœŸé‡å¤è¿ç®—ï¼›</li>
<li>é€šè¿‡ <strong>processChildren</strong> çš„å‚æ•°æ§åˆ¶ï¼Œå®Œç¾æ¨¡æ‹Ÿäº†è¿è¡Œæ—¶è¡Œä¸ºã€‚</li>
</ul>
<p>è¿™ç§ç²¾ç»†åŒ–è®¾è®¡è®© Vue çš„ SSR è¾“å‡ºæ—¢é«˜æ•ˆåˆç²¾å‡†ï¼Œä¿è¯äº†å‰åç«¯æ¸²æŸ“ç»“æ„ä¸€è‡´æ€§ã€‚</p>
<hr/>
<p><strong>ç»“å°¾è¯´æ˜ï¼š</strong><br/>
æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¯CSS&JSå®ç°ï¼šä¸æ»‘æ¸å˜è¿‡æ¸¡çš„åŠ¨æ€å¯¼èˆªæ ]]></title>    <link>https://juejin.cn/post/7570243451724726299</link>    <guid>https://juejin.cn/post/7570243451724726299</guid>    <pubDate>2025-11-09T14:48:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570243451724726299" data-draft-id="7570243451724627995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¯CSS&amp;JSå®ç°ï¼šä¸æ»‘æ¸å˜è¿‡æ¸¡çš„åŠ¨æ€å¯¼èˆªæ "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-09T14:48:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€è¯ºæ»šé›ªçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2824015112318094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¯CSS&amp;JSå®ç°ï¼šä¸æ»‘æ¸å˜è¿‡æ¸¡çš„åŠ¨æ€å¯¼èˆªæ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2824015112318094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€è¯ºæ»šé›ªçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T14:48:18.000Z" title="Sun Nov 09 2025 14:48:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œé€šå¸¸å®ç°çš„å¯¼èˆªæ åˆ‡æ¢æ—¶æ²¡æœ‰æ·»åŠ äº¤äº’æ•ˆæœï¼Œä»Šå¤©å°±ä»0åˆ°1å®ç°ä¸€ä¸ªç¾è§‚ä¸”äº¤äº’æµç•…çš„å¯¼èˆªæ ã€‚</p>
<p>ç›´æ¥çœ‹æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a14905729de471599df7f5cef3f90f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6K-65rua6Zuq55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763305123&amp;x-signature=aG9JfTgsywgDAG88p4Gn%2FZcVgB4%3D" alt="tab-ezgif.com-video-to-gif-converter.gif" loading="lazy"/></p>
<h2 data-id="heading-1">1.å¯¼èˆªæ å®ç°æ€è·¯</h2>
<p>å®ç°çš„å¯¼èˆªæ éœ€è¦å…·å¤‡<strong>ä¸æ»‘è¿‡æ¸¡åŠ¨ç”»</strong>ï¼Œåˆ‡æ¢é€‰é¡¹æ—¶ï¼ŒæŒ‡ç¤ºå™¨é€šè¿‡è‡ªå®šä¹‰è´å¡å°”æ›²çº¿ï¼ˆcubic-bezier(0.68, -0.55, 0.265, 1.55)ï¼‰å®ç°çµåŠ¨è¿‡æ¸¡æ•ˆæœã€‚</p>
<h2 data-id="heading-2">2. æ¡ˆä¾‹ä»£ç </h2>
<p>ä¸‹é¢é€éƒ¨åˆ†æ‹†è§£ä»£ç ï¼Œå¸¦ä½ ç†è§£æ¯ä¸ªæ¨¡å—çš„ä½œç”¨ã€‚</p>
<h3 data-id="heading-3">2.1 æ¨¡æ¿ç»“æ„</h3>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-container"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ¸å˜æŒ‡ç¤ºå™¨ï¼šæ ¸å¿ƒåŠ¨ç”»å…ƒç´  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"indicator"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"indicatorStyle"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¯¼èˆªå®¹å™¨ï¼šåŒ…è£¹æ‰€æœ‰å¯¼èˆªé¡¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å¾ªç¯æ¸²æŸ“å¯¼èˆªé¡¹ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(tab, index) in tabs"</span> 
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span> 
        <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span> 
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: activeTab === index }"</span>
        @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeTab(index)"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ tab.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<ul>
<li><strong>å±‚çº§å…³ç³»</strong>ï¼šnav-container ä½œä¸ºæœ€å¤–å±‚å®¹å™¨ï¼Œå†…éƒ¨åŒ…å« indicatorï¼ˆæŒ‡ç¤ºå™¨ï¼‰å’Œ navï¼ˆå¯¼èˆªé¡¹å®¹å™¨ï¼‰ï¼Œé€šè¿‡ z-index æ§åˆ¶å±‚çº§ï¼ˆæŒ‡ç¤ºå™¨ z=0ï¼Œå¯¼èˆªé¡¹ z=2ï¼‰</li>
<li><strong>æ¿€æ´»çŠ¶æ€</strong>ï¼šé€šè¿‡ :class="{ active: activeTab === index }" æ§åˆ¶é€‰ä¸­é¡¹çš„æ–‡å­—é¢œè‰²ï¼ˆç™½è‰²ï¼‰</li>
</ul>
<h3 data-id="heading-4">2.2 é€»è¾‘å¤„ç†</h3>
<p>ä¸»è¦æ§åˆ¶äº¤äº’ä¸åŠ¨ç”»æ•ˆæœã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">// 1. å¯¼èˆªæ•°æ®ï¼šå¯æ ¹æ®éœ€æ±‚æ‰©å±•ï¼ˆå¦‚æ·»åŠ è·¯ç”±åœ°å€ã€å›¾æ ‡ç­‰ï¼‰</span>
<span class="hljs-keyword">const</span> tabs = [
    { <span class="hljs-attr">label</span>: <span class="hljs-string">'é¦–é¡µ'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">0</span> },
    { <span class="hljs-attr">label</span>: <span class="hljs-string">'åˆ†ç±»'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">1</span> },
    { <span class="hljs-attr">label</span>: <span class="hljs-string">'è´­ç‰©è½¦'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">2</span> },
    { <span class="hljs-attr">label</span>: <span class="hljs-string">'æˆ‘çš„'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">3</span> }
]
<span class="hljs-comment">// 2. é€‰ä¸­é¡¹çŠ¶æ€ï¼šç”¨ ref å®šä¹‰å“åº”å¼å˜é‡</span>
<span class="hljs-keyword">const</span> activeTab = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
<span class="hljs-comment">// 3. æŒ‡ç¤ºå™¨æ ·å¼è®¡ç®—ï¼šç”¨ computed å®æ—¶æ›´æ–°ä½ç½®å’Œå®½åº¦</span>
<span class="hljs-keyword">const</span> indicatorStyle = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-comment">// å·¦åç§»é‡ï¼šé€‰ä¸­é¡¹ç´¢å¼• * (100% / å¯¼èˆªé¡¹æ•°é‡)</span>
  <span class="hljs-attr">left</span>: <span class="hljs-string">`<span class="hljs-subst">${activeTab.value * (<span class="hljs-number">100</span> / tabs.length)}</span>%`</span>,
  <span class="hljs-comment">// å®½åº¦ï¼šå‡åˆ†å¯¼èˆªæ ï¼ˆ100% / å¯¼èˆªé¡¹æ•°é‡ï¼‰</span>
  <span class="hljs-attr">width</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-number">100</span> / tabs.length}</span>%`</span>
}))
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">2.3 å®ç°è§†è§‰ä¸åŠ¨ç”»</h3>
<p>æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* æ¸å˜æŒ‡ç¤ºå™¨ï¼šæ ¸å¿ƒè§†è§‰å…ƒç´  */</span>
<span class="hljs-selector-class">.indicator</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#4facfe</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#00f2fe</span> <span class="hljs-number">100%</span>); <span class="hljs-comment">/* è“é’æ¸å˜ */</span>
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">35px</span>; <span class="hljs-comment">/* ä¸å®¹å™¨åœ†è§’ä¸€è‡´ï¼šé¿å…æ£±è§’ */</span>
  <span class="hljs-comment">/* è‡ªå®šä¹‰è¿‡æ¸¡æ›²çº¿ï¼šè®©åŠ¨ç”»æ›´çµåŠ¨ï¼ˆéåŒ€é€Ÿï¼‰ */</span>
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.5s</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.68</span>, -<span class="hljs-number">0.55</span>, <span class="hljs-number">0.265</span>, <span class="hljs-number">1.55</span>);
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* æŒ‡ç¤ºå™¨åœ¨æœ€ä¸‹å±‚ */</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-6">3. å¯¼èˆªæ ä¼˜åŒ–</h2>
<p>åŸºç¡€ç‰ˆæœ¬å·²å®ç°æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸‹é¢åˆ†äº«å‡ ä¸ªå®ç”¨çš„ä¼˜åŒ–æ–¹å‘ï¼Œæ»¡è¶³æ›´å¤šåœºæ™¯éœ€æ±‚ã€‚</p>
<h3 data-id="heading-7">3.1 æ·»åŠ  hover æ•ˆæœï¼šå¢å¼ºäº¤äº’åé¦ˆ</h3>
<p>åœ¨ .nav-item ä¸­æ·»åŠ  hover æ ·å¼ï¼Œè®©æœªé€‰ä¸­é¡¹ä¹Ÿæœ‰äº¤äº’åé¦ˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.nav-item</span><span class="hljs-selector-pseudo">:hover</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-class">.active</span>) {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#4facfe</span>; <span class="hljs-comment">/* hover æ—¶æ–‡å­—å˜æµ…è“ */</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.05</span>); <span class="hljs-comment">/* è½»å¾®æ”¾å¤§ï¼šå¢å¼ºæ„ŸçŸ¥ */</span>
}
</code></pre>
<h3 data-id="heading-8">3.2 æ”¯æŒè·¯ç”±è·³è½¬ï¼šé€‚é…å•é¡µåº”ç”¨</h3>
<ol>
<li>å…ˆå¼•å…¥ Vue Routerï¼š</li>
</ol>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
</code></pre>
<p>2.  åœ¨ tabs æ•°ç»„ä¸­æ·»åŠ è·¯ç”±åœ°å€ï¼š</p>

<pre><code class="hljs language-lua" lang="lua">const tabs = [
  { label: <span class="hljs-string">'é¦–é¡µ'</span>, value: <span class="hljs-number">1</span>, <span class="hljs-built_in">path</span>: <span class="hljs-string">'/'</span> },
  { label: <span class="hljs-string">'åˆ†ç±»'</span>, value: <span class="hljs-number">2</span>, <span class="hljs-built_in">path</span>: <span class="hljs-string">'/category'</span> },
  { label: <span class="hljs-string">'è´­ç‰©è½¦'</span>, value: <span class="hljs-number">3</span>, <span class="hljs-built_in">path</span>: <span class="hljs-string">'/cart'</span> },
  { label: <span class="hljs-string">'æˆ‘çš„'</span>, value: <span class="hljs-number">4</span>, <span class="hljs-built_in">path</span>: <span class="hljs-string">'/mine'</span> }
]
</code></pre>
<p>3.  ä¿®æ”¹ changeTab æ–¹æ³•ï¼Œå®ç°è·¯ç”±è·³è½¬ï¼š</p>

<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">changeTab</span> = (index) =&gt; {
  <span class="hljs-attr">activeTab.value</span> = index
  router.push({ path: tabs<span class="hljs-section">[index]</span>.path })
}
</code></pre>
<h3 data-id="heading-9">3.3 è‡ªå®šä¹‰æŒ‡ç¤ºå™¨æ ·å¼</h3>
<p>ä»£ç ä¸­æ³¨é‡Šäº† â€œä¸‹åˆ’çº¿æ ·å¼â€ çš„æŒ‡ç¤ºå™¨ï¼Œè‹¥ä¸éœ€è¦æ¸å˜èƒŒæ™¯ï¼Œå¯æ›¿æ¢ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.indicator</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: auto;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* ä¸‹åˆ’çº¿é åº•éƒ¨ */</span>
  <span class="hljs-attribute">height</span>: auto;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#4facfe</span>; <span class="hljs-comment">/* ä¸‹åˆ’çº¿é¢œè‰² */</span>
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0</span>; <span class="hljs-comment">/* å–æ¶ˆåœ†è§’ */</span>
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease; <span class="hljs-comment">/* ç®€åŒ–è¿‡æ¸¡æ›²çº¿ */</span>
}
</code></pre>
<h3 data-id="heading-10">3.4 æ”¯æŒè§¦æ‘¸æ»‘åŠ¨</h3>
<p>è‹¥éœ€è¦åœ¨ç§»åŠ¨ç«¯æ”¯æŒ â€œè§¦æ‘¸æ»‘åŠ¨åˆ‡æ¢â€ï¼Œå¯ç»“åˆ touchstart å’Œ touchend äº‹ä»¶ï¼Œè®¡ç®—æ»‘åŠ¨è·ç¦»æ¥åˆ¤æ–­æ˜¯å¦åˆ‡æ¢å¯¼èˆªé¡¹ï¼Œæ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è®°å½•è§¦æ‘¸èµ·å§‹ä½ç½®</span>
<span class="hljs-keyword">const</span> startX = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
<span class="hljs-comment">// è§¦æ‘¸å¼€å§‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleTouchStart</span> = (<span class="hljs-params">e</span>) =&gt; {
  startX.<span class="hljs-property">value</span> = e.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">clientX</span>
}
<span class="hljs-comment">// è§¦æ‘¸ç»“æŸ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleTouchEnd</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-keyword">const</span> endX = e.<span class="hljs-property">changedTouches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">clientX</span>
  <span class="hljs-keyword">const</span> diffX = endX - startX.<span class="hljs-property">value</span>
  
  <span class="hljs-comment">// æ»‘åŠ¨è·ç¦»è¶…è¿‡ 50px æ‰åˆ‡æ¢ï¼ˆé¿å…è¯¯è§¦ï¼‰</span>
  <span class="hljs-keyword">if</span> (diffX &gt; <span class="hljs-number">50</span> &amp;&amp; activeTab.<span class="hljs-property">value</span> &gt; <span class="hljs-number">0</span>) {
    activeTab.<span class="hljs-property">value</span>--
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (diffX &lt; -<span class="hljs-number">50</span> &amp;&amp; activeTab.<span class="hljs-property">value</span> &lt; tabs.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {
    activeTab.<span class="hljs-property">value</span>++
  }
}
<span class="hljs-comment">// åœ¨æ¨¡æ¿ä¸­æ·»åŠ è§¦æ‘¸äº‹ä»¶</span>
&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"nav"</span> <span class="hljs-meta">@touchstart</span>=<span class="hljs-string">"handleTouchStart"</span> <span class="hljs-meta">@touchend</span>=<span class="hljs-string">"handleTouchEnd"</span>&gt;
  &lt;!-- å¯¼èˆªé¡¹ --&gt;
&lt;/div&gt;
</code></pre>
<h2 data-id="heading-11">4. å®Œæ•´ä»£ç </h2>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼ˆå¯ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"indicator"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"indicatorStyle"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
          <span class="hljs-attr">class</span>=<span class="hljs-string">"nav"</span> 
          @<span class="hljs-attr">touchstart</span>=<span class="hljs-string">"handleTouchStart"</span> 
          @<span class="hljs-attr">touchend</span>=<span class="hljs-string">"handleTouchEnd"</span>
        &gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
            <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(tab, index) in tabs"</span> 
            <span class="hljs-attr">:key</span>=<span class="hljs-string">"tab.value"</span>
            <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span> 
            <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: activeTab === index }"</span>
            @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeTab(index)"</span>
          &gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ tab.label }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
    <span class="hljs-keyword">import</span> { useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
    <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
    <span class="hljs-comment">// å¯¼èˆªæ•°æ®ï¼ˆæ”¯æŒè·¯ç”±ï¼‰</span>
    <span class="hljs-keyword">const</span> tabs = [
      { <span class="hljs-attr">label</span>: <span class="hljs-string">'é¦–é¡µ'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span> },
      { <span class="hljs-attr">label</span>: <span class="hljs-string">'åˆ†ç±»'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">'/category'</span> },
      { <span class="hljs-attr">label</span>: <span class="hljs-string">'è´­ç‰©è½¦'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">'/cart'</span> },
      { <span class="hljs-attr">label</span>: <span class="hljs-string">'æˆ‘çš„'</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">'/mine'</span> }
    ]
    <span class="hljs-keyword">const</span> activeTab = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> startX = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
    <span class="hljs-comment">// æŒ‡ç¤ºå™¨æ ·å¼</span>
    <span class="hljs-keyword">const</span> indicatorStyle = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
      <span class="hljs-attr">left</span>: <span class="hljs-string">`<span class="hljs-subst">${activeTab.value * (<span class="hljs-number">100</span> / tabs.length)}</span>%`</span>,
      <span class="hljs-attr">width</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-number">100</span> / tabs.length}</span>%`</span>
    }))
    <span class="hljs-comment">// åˆ‡æ¢å¯¼èˆªï¼ˆå«è·¯ç”±è·³è½¬ï¼‰</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeTab</span> = (<span class="hljs-params">index</span>) =&gt; {
      activeTab.<span class="hljs-property">value</span> = index
      router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: tabs[index].<span class="hljs-property">path</span> })
    }
    <span class="hljs-comment">// è§¦æ‘¸æ»‘åŠ¨é€»è¾‘ï¼ˆç§»åŠ¨ç«¯é€‚é…ï¼‰</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleTouchStart</span> = (<span class="hljs-params">e</span>) =&gt; {
      startX.<span class="hljs-property">value</span> = e.<span class="hljs-property">touches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">clientX</span>
    }
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleTouchEnd</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">const</span> endX = e.<span class="hljs-property">changedTouches</span>[<span class="hljs-number">0</span>].<span class="hljs-property">clientX</span>
      <span class="hljs-keyword">const</span> diffX = endX - startX.<span class="hljs-property">value</span>
      <span class="hljs-keyword">if</span> (diffX &gt; <span class="hljs-number">50</span> &amp;&amp; activeTab.<span class="hljs-property">value</span> &gt; <span class="hljs-number">0</span>) {
        activeTab.<span class="hljs-property">value</span>--
        router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: tabs[activeTab.<span class="hljs-property">value</span>].<span class="hljs-property">path</span> })
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (diffX &lt; -<span class="hljs-number">50</span> &amp;&amp; activeTab.<span class="hljs-property">value</span> &lt; tabs.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {
        activeTab.<span class="hljs-property">value</span>++
        router.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">path</span>: tabs[activeTab.<span class="hljs-property">value</span>].<span class="hljs-property">path</span> })
      }
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.nav-container</span> {
      <span class="hljs-attribute">position</span>: relative;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">90%</span>; <span class="hljs-comment">/* ç¼©å°å®½åº¦ï¼Œé¿å…è´´è¾¹ */</span>
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto; <span class="hljs-comment">/* å±…ä¸­æ˜¾ç¤º */</span>
      <span class="hljs-attribute">height</span>: <span class="hljs-number">44px</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">35px</span>;
      <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.08</span>);
      <span class="hljs-attribute">overflow</span>: hidden;
    }
    <span class="hljs-selector-class">.nav</span> {
      <span class="hljs-attribute">position</span>: relative;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
    }
    <span class="hljs-selector-class">.nav-item</span> {
      <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#555</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> ease;
      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;
    }
    <span class="hljs-selector-class">.nav-item</span><span class="hljs-selector-class">.active</span> {
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    }
    <span class="hljs-selector-class">.nav-item</span><span class="hljs-selector-pseudo">:hover</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-class">.active</span>) {
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#4facfe</span>;
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.05</span>);
    }
    <span class="hljs-selector-class">.indicator</span> {
      <span class="hljs-attribute">position</span>: absolute;
      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">45deg</span>, <span class="hljs-number">#ff9a9e</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#fecfef</span> <span class="hljs-number">100%</span>); 
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">35px</span>;
      <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.5s</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.68</span>, -<span class="hljs-number">0.55</span>, <span class="hljs-number">0.265</span>, <span class="hljs-number">1.55</span>);
      <span class="hljs-attribute">z-index</span>: <span class="hljs-number">0</span>;
    }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-12">5. æ€»ç»“</h2>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼šå¯¼èˆªæ å®ç°çš„æ ¸å¿ƒæ€è·¯å°±æ˜¯æ˜¯é€šè¿‡åŠ¨æ€è®¡ç®—æŒ‡ç¤ºå™¨æ ·å¼ï¼Œé…åˆ<strong>transition</strong>å®ç°åŠ¨ç”»æ•ˆæœã€‚</p>
<p>å¦‚æœ‰é”™è¯¯ï¼Œè¯·æŒ‡æ­£O^O!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç–¯äº†ï¼åŒ11ï¼Œç™¾åº¦æ–‡å¿ƒå¿«ç å¸®æˆ‘çœé’±åˆèµšé’±ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7570651893869969460</link>    <guid>https://juejin.cn/post/7570651893869969460</guid>    <pubDate>2025-11-10T06:23:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570651893869969460" data-draft-id="7570630923709939764" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç–¯äº†ï¼åŒ11ï¼Œç™¾åº¦æ–‡å¿ƒå¿«ç å¸®æˆ‘çœé’±åˆèµšé’±ï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-10T06:23:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–‡å¿ƒå¿«ç BaiduComate"/> <meta itemprop="url" content="https://juejin.cn/user/992209294070809"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç–¯äº†ï¼åŒ11ï¼Œç™¾åº¦æ–‡å¿ƒå¿«ç å¸®æˆ‘çœé’±åˆèµšé’±ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/992209294070809/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–‡å¿ƒå¿«ç BaiduComate
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:23:23.000Z" title="Mon Nov 10 2025 06:23:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŒ11ï¼Œä¸€åœºèµ›åšæ¸¡åŠ«ã€‚</p>
<p><strong>ğŸ’¼ä¸Šç­ï¼š</strong></p>
<p>çº¯ç‰›é©¬æŒ£çªå›Šè´¹</p>
<p>åŠå¤œå‡Œæ™¨2ç‚¹æ¥åˆ°äº§å“éœ€æ±‚ï¼Œç¬¬äºŒå¤©äº§å“å°±è¦ä¸Šçº¿ğŸ¤¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e70e7d4b1ece4e86b9a32d301586524b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=LBoVfp1rY4CmIgmcgPsjXOLfpqc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>ğŸ›ï¸ä¸‹ç­ï¼š</strong></p>
<p>åŒ–èº«èŠ±å‘—æ•°å­¦å®¶</p>
<p>æ¯å¤©åœ¨ã€Œä¸ä¹°è¡€äºã€å’Œã€Œä¹°äº†å–é£ã€ä¹‹é—´åå¤æ¨ªè·³ğŸŒš</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60dd53c38504474f932048cc90b6a2e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=ip7ovYV98HGPh6E0geEeEWjcQ0k%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æˆ‘æ‚Ÿäº†</p>
<p>åŸæ¥æˆ‘çš„è´¦æˆ·åªæ˜¯ä¸ªå·¥èµ„ä¸­è½¬ç«™</p>
<p>ç”Ÿæ´»æ¯ç‡¥æ— å‘³ï¼Œèµ„æœ¬å®¶æˆå¼„äººç±»ğŸ¤¡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c98f6f7366c4e9f8929e8da0b99512f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=oS%2BkKwfyUJnFx3Gc%2BaAiAdcf0QQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä½†ï¼æ‰“å·¥äººæ°¸ä¸ä¸ºå¥´ï¼</p>
<p>æ—¢ç„¶ç”Ÿæ´»ç»™æˆ‘å…³ä¸Šäº†ä¸€æ‰‡çª—ï¼Œæˆ‘å°±ç”¨Comateèµ°åé—¨ğŸ˜‰</p>
<p>è¿™ä¸ªåŒ11</p>
<p>æˆ‘å†³å®šç”¨ç™¾åº¦æ–‡å¿ƒå¿«ç Comate</p>
<p>æ•´ä¸¤ä¸ª**ã€ŒåŒ11ç‰¹ä¾›ã€ğŸ’â™€ï¸**</p>
<p><strong>1ï¸âƒ£ ã€Œé˜²å‰æ‰‹ç®¡å®¶ã€</strong></p>
<p><strong>Subagentå¤šæ™ºèƒ½ä½“åä½œ</strong>æå®šå‰åç«¯åˆ†ç¦»å¼€å‘</p>
<p>ä¸“æ²»â€œæ‰‹ä¸å¬è„‘ï¼Œè„‘ä¸ä¿¡ä½™é¢â€çš„èµ›åšæ¸…é†’å‰‚ğŸ’¸</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa227935855045ffa4b821b7e4d5fc0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=bU2qIVvo09usTgTkeLQPipYs47c%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>2ï¸âƒ£ ã€Œå®˜ç½‘é€Ÿæˆå™¨ã€</strong></p>
<p><strong>è‡ªå®šä¹‰Agent</strong>åˆ›å»ºè‡ªå·±çš„AIå‘˜å·¥</p>
<p>è®©è€æ¿é—­å˜´æƒŠè‰³ã€æ‰“å·¥äººå‡†æ—¶ä¸‹ç­çš„é­”æ³•ç”Ÿæˆå™¨âš¡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdeb86f13b4a44a5b1830116c26b3ffa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=Y95EIQZAwk24lw1o0AO9U5pJ6GQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æ¥å§ï¼Œæ˜¯æ—¶å€™è¡¨æ¼”çœŸæ­£çš„æŠ€æœ¯äº†ï¼</p>
<h2 data-id="heading-0">To ç®¡ä¸ä½æ‰‹çš„æ¶ˆè´¹è€…ï¼šComateåŠ©ä½ æ­å»ºã€Œé˜²å‰æ‰‹ç®¡å®¶ã€</h2>
<p>ğŸ›’ æ ¸å¿ƒåŠŸèƒ½</p>
<ul>
<li><strong>å•†å“æ¸…å•ç®¡ç†</strong>ï¼šæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤è´­ç‰©å•†å“ï¼›æ ‡è®°å·²è´­/å¾…è´­çŠ¶æ€</li>
<li><strong>é˜²æ­¢è¿‡åº¦æ¶ˆè´¹</strong>ï¼šæŒ‰ç…§ç”¨æˆ·é¢„ç®—ã€è´­ä¹°ä¼˜å…ˆçº§è¾…åŠ©è´­ç‰©å†³ç­–</li>
<li><strong>æŠ¢è´­é€€è´§æé†’</strong>ï¼šæŠ¢è´­ã€é€€è´§æˆªæ­¢æ—¥æœŸï¼Œç³»ç»Ÿä¼šæå‰æé†’ç”¨æˆ·</li>
</ul>
<p>ğŸŒŸæŠ€æœ¯ç‰¹è‰²</p>
<ul>
<li>å…¨æ ˆæ¶æ„ï¼šFirebaseåç«¯ + React Nativeå‰ç«¯</li>
<li>è·¨ç«¯æ”¯æŒï¼šæ”¯æŒå¤šè®¾å¤‡è®¿é—®</li>
<li>å®æ—¶åŒæ­¥ï¼šå‰åç«¯æ•°æ®å®æ—¶äº¤äº’</li>
<li>æ•°æ®å­˜å‚¨ï¼šå†…ç½®H2æ•°æ®åº“è‡ªåŠ¨ä¿å­˜</li>
</ul>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬å›åˆ°æ¡ˆå‘ç°åœºï¼Œçœ‹çœ‹å½“æ—¶AIæ˜¯æ€æ ·å¼•é¢†æˆ‘è¿™ä¸ªæŠ€æœ¯å°ç™½çš„â€”â€”</p>
<h3 data-id="heading-1">Step1 æå‡ºéœ€æ±‚</h3>
<p>æœ€å¼€å§‹ï¼Œæˆ‘åªæ˜¯ç”¨<strong>å¤§ç™½è¯</strong>å†™ä¸‹äº†æˆ‘çš„éœ€æ±‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0236827a94b4beebf75468c4ff9864a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=VEHPYhR4Lx68fwmuuKFc7ztJ%2FCQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>âœ¨è¿™é‡Œæœ‰ä¸€ä¸ªå°å¿ƒæœºï¼š</p>
<p>è®©Comateç›´æ¥è”ç½‘æœç´¢githubç­‰å¼€å‘è€…ç¤¾åŒºï¼Œä»å¤ç°åšèµ·ï¼Œåç»­å†å¾®è°ƒï¼Œäº²æµ‹æ¯”ç›´æ¥è¾“å…¥éœ€æ±‚ææ•ˆ200%ã€‚</p>
<p>å½“æˆ‘æŠŠè¿™ä¸ªä»»åŠ¡äº¤ç»™ Zulu æ™ºèƒ½ä½“åï¼Œå®ƒä¸ä»…â€œå¬æ‡‚äº†â€ï¼Œè¿˜åƒä¸€ä¸ªèµ„æ·±æ¶æ„å¸ˆä¸€æ ·ï¼Œ<strong>ä¸»åŠ¨å¸®æˆ‘è§„åˆ’äº†åŒ…å«SpringBooå’ŒVueçš„å®Œæ•´æŠ€æœ¯æ ˆ</strong> ğŸ‘‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7705d698f4e3402db2b224a07e0906a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=lA23jIP782Z46COsfgUkuVvUoxU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä¸‹ä¸€ç§’ï¼Œç»ˆç«¯çª—å£å°±è¢«æ¿€æ´»äº† ï¼Œç‚¹å‡»â€œæ‰§è¡Œâ€æŒ‰é’®ï¼ŒZulu å°±èƒ½<strong>è‡ªåŠ¨å®‰è£…ä¾èµ–ã€ç€æ‰‹å¼€å‘ç¨‹åº</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdcfcf1f95544a92940e609220450ef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=k3oafdZe9ubXNuuAGKkr2RJiCuI%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-2">Step2 å±ä¸Šé›•èŠ±ï¼Œå¾ªå¾ªå–„è¯±ï¼ŒåšZuluæœ€æ…ˆç¥¥çš„çˆ¶äº²</h3>
<p>ä¸€é¡¿æ“ä½œåï¼ŒZuluç»™äº†æˆ‘ä¸€ä¸ªæœ€åˆå§‹çš„ç‰ˆæœ¬</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee6e412a41f049eb9bee97ac9f44d4b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=J%2FrhXdDCl1Ddasjll2oKpcTqJ2Q%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æœ‰ç‚¹ä¸‘ï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§Zuluç»™å‡ºçš„<strong>ä¸‹ä¸€æ­¥å¼•å¯¼</strong>ï¼Œç»§ç»­å®Œå–„è¿™ä¸ªç½‘é¡µçš„å…¶ä»–åŠŸèƒ½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23154b86cff34540ae096683ad03c462~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=WMPJoQ40s38maUhhK5Mhyyt9dQ8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ä¸‹ä¸€ç§’ï¼Œç»ˆç«¯çª—å£å°±è¢«æ¿€æ´»äº† ï¼Œç‚¹å‡»â€œæ‰§è¡Œâ€æŒ‰é’®ï¼ŒZulu å°±èƒ½<strong>è‡ªåŠ¨å®‰è£…ä¾èµ–ã€ç€æ‰‹å¼€å‘ç¨‹åº</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a0f106966584c5f8f6f204f37423983~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=0eqLWpJ2PkQeZ0dbSol7Zh0COJQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-3">Step3 è¿‡ç¨‹ä¸­ï¼Œå…ä¸äº†ä¼šdebugï¼Œä¿æŒå§¿æ€ä¼˜é›…</h3>
<p>æ¥ä¸‹æ¥ï¼Œå°±æ˜¯ä¸æ–­debugçš„è¿‡ç¨‹</p>
<p>æ‹’ç»äº²è‡ªåŠ¨æ‰‹ï¼Insteadï¼Œä½ å¯ä»¥è¯•è¯•ä»¥ä¸‹å‡ ç§ä¼˜é›…çš„debugå§¿åŠ¿ï¼š</p>
<p>1ï¸âƒ£æŠŠå‡ºé”™çš„ç½‘é¡µ<strong>æˆªå±</strong>ç»™Zulu</p>
<p>2ï¸âƒ£<strong>command + Y</strong>ï¼ŒæŠŠç»ˆç«¯ä¿¡æ¯ç›´æ¥æ·»åŠ åˆ°Zuluçš„ä¸Šä¸‹æ–‡</p>
<p>3ï¸âƒ£å¦‚æœæƒ³æ›´ä¸æ»‘ä¸€ç‚¹ï¼Œå¯ä»¥å‹¾é€‰â€œ<strong>è‡ªåŠ¨æ‰§è¡Œ</strong>â€ï¼Œè®©Zuluå®ç°æµ‹è¯•-debugçš„é—­ç¯ï½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93843c8eac29401c9afe47f9df2f3b8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=%2FFqm7lTgjGbe1ieqsplvVTrdUHc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32d85c33f0d647a692c65f57b8e0a68f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=wMcWrw0pYs3KqsvSbsD4zFWmd5Q%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/400e66cc28344fe6b2ee8f59d18d3304~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=A4qtb2qnFE3wihjIzzR8rNXWQNE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-4">æœ€åï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¬£èµä¸€ä¸‹æˆå“ï¼š</h3>
<p>æˆå“è§†é¢‘ğŸ‘‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJtWbZEDBx5eukG53KjFFYw" target="_blank" title="https://mp.weixin.qq.com/s/JtWbZEDBx5eukG53KjFFYw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/JtWbZEDBxâ€¦</a></p>
<h2 data-id="heading-5">To æ‰å¤´å‘çš„æ‰“å·¥äººï¼šComateä¸ºä½ â€œç§’å»ºâ€åŒ11å®˜ç½‘</h2>
<p>ğŸ’» <strong>åŒ11å®˜ç½‘æ ¸å¿ƒåŠŸèƒ½</strong></p>
<ul>
<li>å‰å°å•†åŸç®¡ç†ç³»ç»Ÿ-å•†å“å±•ç¤ºã€è´­ç‰©è½¦ã€ç”¨æˆ·è®¤è¯</li>
<li>åå°ç®¡ç†ç³»ç»Ÿ-å•†å“ç®¡ç†ã€è®¢å•ç®¡ç†ã€ç”¨æˆ·ç®¡ç†</li>
<li>æ”¯ä»˜ç»“ç®—ç³»ç»Ÿ-å®Œæ•´çš„è®¢å•æµç¨‹å’Œæ”¯ä»˜é›†æˆ</li>
<li>ç”¨æˆ·è®¤è¯ç³»ç»Ÿ-æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†</li>
</ul>
<p>ğŸŒŸ <strong>æŠ€æœ¯ç‰¹è‰²</strong></p>
<ul>
<li>âš¡ï¸ <strong>å‰ç«¯</strong>: åŸç”ŸJavaScript + CSS3 + HTML5</li>
<li>ğŸš€ <strong>å­˜å‚¨</strong>: localStorageæ•°æ®æŒä¹…åŒ–</li>
<li>ğŸ¨ <strong>æ ·å¼</strong>: è‡ªå®šä¹‰CSSå˜é‡ä¸»é¢˜ç³»ç»Ÿ</li>
<li><strong>ğŸ«‚ äº¤äº’</strong>: äº‹ä»¶å§”æ‰˜å’ŒDOMæ“ä½œ</li>
</ul>
<p>åŠå¤œä¸¤ç‚¹ï¼Œæ¥åˆ°è€æ¿ç”µè¯â˜ï¸ï¼š â€œå®˜ç½‘æˆ‘æ˜å¤©å°±è¦ï¼è¦æœç´¢ï¼è¦è´­ç‰©è½¦ï¼è¦æŠ½å¥–ï¼â€</p>
<p>ğŸ‘¶ æˆ‘ï¼ŒèŒåœºè€å¥½äººï¼ŒåŠå¤œæ¥åˆ°è¯‰æ±‚ï¼Œç­”åº”åå¼€å§‹åæ‚”ã€‚</p>
<p>ğŸ¤– Comateï¼šâ€œæ²¡äº‹ï¼Œæˆ‘æ¥ã€‚æ­£åœ¨å¯åŠ¨å¤šAgentååŒ...@å‰ç«¯Agent å¼€å§‹æ„å»ºé¡µé¢ï¼Œ@åç«¯Agent æ­£åœ¨ç¼–å†™è´­ç‰©è½¦é€»è¾‘...â€</p>
<p>è¿™æ¬¡ï¼Œæˆ‘ç‰›é©¬ç¿»èº«cosèµ„æœ¬å®¶ï¼Œç”¨Comateçš„Agentæ¨¡å¼å»ºç«‹è‡ªå·±çš„AIé»‘å¥´ï¼Œ7x24å°æ—¶åœ¨çº¿ä¸ºæˆ‘æ‰“å·¥ğŸ‘‡ã€åŒ…å·¥å¤´æ˜¯æ€æ ·äº‘ç›‘å·¥çš„ï¼Ÿã€‘ğŸ‘‡</p>
<h3 data-id="heading-6">Step1 å»ºç«‹ä¸€ä¸ªæ™ºèƒ½ä½“å¸®æˆ‘æ‰“å·¥</h3>
<p>ç‚¹å‡» <strong>+ Agent</strong>ï¼Œå†™å‡ºä½ ä½¿ç”¨å®ƒçš„åœºæ™¯ä»¥åŠå…·ä½“çš„æŒ‡ä»¤ï¼Œå†æŠŠèƒ½å‹¾çš„å·¥å…·éƒ½å‹¾ä¸Šï¼ŒæŠŠèƒ½ä¸‹è½½çš„MCPéƒ½ä¸‹ä¸Š</p>
<p>ç‚¹å‡»åˆ›å»ºï¼Œå°±å¯ä»¥ç‚¹å‡»å·¦ä¸‹è§’çš„Zuluè¿›è¡Œåˆ‡æ¢ä½ çš„ä¸“å±å‘˜å·¥äº†ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eb4d143e21d4ef9b3603b2b3f31421b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=V34fk%2F9inKFDWdjwMHSsoqLpIN8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c451a658caf44e6fa52360a4cc289a17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=HVWB%2FRwxMjN6K3UrBoo%2BoBwHy%2BY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>MCPä¸‹è½½æ–¹å¼</strong>ï¼š</p>
<p>ç‚¹å‡»å³ä¸Šè§’ğŸ”¨ï¼Œä¸ä¼šé…ç½®ç¯å¢ƒå¯éšæ—¶æˆªå›¾è¯¢é—®Zuluï¼Œä¸€æ­¥åˆ°èƒƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e9d8621113e42829c90b83d3d3ca33e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=u1fGOwATGGk4MO%2FhTw%2BWUUYF0KE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fc2ad0ae9f44f06908ab42f81dcc58c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=IFmH3QxA6YgYYOJo2Lloy4DKe4E%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h3 data-id="heading-7">Step2 æå‡ºéœ€æ±‚</h3>
<p>æ¥ç€ï¼Œå†™å‡ºä½ æƒ³è¦æ­å»ºçš„ç½‘ç«™ï¼Œä»¥åŠç½‘ç«™å¤§è‡´çš„æ¶æ„ï½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16e7d89a7ff244cc88697b3853c77bb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=e8WgDwE0Cd1JD%2BrYgpGb0cqDDnc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>âœ¨ä¸æƒ³å¤ªéº»çƒ¦çš„è¯ï¼Œå¯ä»¥åƒæˆ‘è¿™æ ·ï¼Œå¼•å¯¼Zuluè”ç½‘æœç´¢ç›¸ä¼¼çš„ç½‘ç«™ï¼Œç›´æ¥æ¨¡ä»¿ä»–ä»¬çš„åŠŸèƒ½å³å¯ï¼</p>
<p>ä½ è¿˜å¯ä»¥æŠŠä½ çš„äº§å“å›¾ã€ç½‘é¡µèƒŒæ™¯åœ°å€ç»™åˆ°AIï¼Œä»–ä¼šè‡ªåŠ¨å¸®ä½ â€œå®‰æ’â€è¿›ç½‘é¡µ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b23b8a03b1e64089a48a8578dcd7b92d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=IYUfx4oJvPCuu3XJpRi39tLkZ8A%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>ğŸ‘‡æœ€ç»ˆæ•ˆæœçœŸçš„æƒŠè‰³åˆ°æˆ‘äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6516d4e2b954501a477768fc882a0f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5b-D5b-r56CBQmFpZHVDb21hdGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360603&amp;x-signature=GGOxdFMNLYVxwyGYcx4icfOqseU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>ğŸš€ è¿›é˜¶ç©æ³•ï¼šä»â€œç…§æŠ„â€åˆ°â€œè¶…æŠ„â€ï¼Œè®©ä½ çš„è„‘æ´é‡è›®ç”Ÿé•¿ï¼</strong></p>
<p>å«Œå¼ƒâ€œé˜²å‰æ‰‹ç®¡å®¶â€åªèƒ½æé†’é¢„ç®—ï¼Ÿâ€œå®˜ç½‘é€Ÿæˆå™¨â€åªèƒ½æ‘†æ‘†å•†å“ï¼Ÿ</p>
<p>æ ¼å±€æ‰“å¼€ï¼<strong>åŸºäºä¸Šé¢çš„å®æˆ˜ï¼Œä½ å®Œå…¨å¯ä»¥ç©å¾—æ›´é‡ï¼š</strong></p>
<ul>
<li>æ¯”å¦‚ï¼Œç»™â€œé˜²å‰æ‰‹ç®¡å®¶â€<strong>åŠ ä¸Šè¯­éŸ³æ€’å¼</strong>ï¼šâ€œå¿«ä½æ‰‹ï¼è¿™ä¸ªæœˆåƒé¥­é’±éƒ½æ²¡äº†ï¼â€</li>
<li>æˆ–è€…ï¼Œè®©â€œå®˜ç½‘è½¬ç›˜â€<strong>ç»‘å®šåœ°ç†ä½ç½®</strong>ï¼Œé™„è¿‘ç”¨æˆ·æŠ½å¥–æ¦‚ç‡ç¿»å€ï¼Œçº¿ä¸‹å¼•æµæ‹‰æ»¡ã€‚</li>
<li>å†æ¯”å¦‚ï¼Œ<strong>æ¥å…¥å®æ—¶ä»·æ ¼æ›²çº¿</strong>ï¼Œè®©å®˜ç½‘è‡ªåŠ¨æç¤ºâ€œæ­¤å•†å“30å¤©æœ€ä½ä»·â€ï¼Œè½¬åŒ–ç‡é£™å‡ã€‚</li>
</ul>
<p><strong>AIç¼–ç¨‹çš„é­…åŠ›å°±åœ¨äºï¼šä½ çš„æ¯ä¸ªâ€œè¦æ˜¯èƒ½â€¦â€¦å°±å¥½äº†â€ï¼Œéƒ½èƒ½è¢«å†™æˆä»£ç ï¼Œè¿è¡Œåœ¨çœŸå®çš„ç”Ÿæ´»å’Œç”Ÿæ„é‡Œã€‚</strong></p>
<p><strong>ğŸ‘‡ åˆ«å…‰å¿ƒåŠ¨ï¼Œç°åœ¨å°±ä¸Šæ‰‹å¼€é€ ï¼</strong></p>
<p>ä¸€é”®ä¸‹è½½ Comateï¼ŒæŠŠä½ çš„è„‘æ´å˜æˆç°å®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcomate.baidu.com%2Fzh%2Fdownload%25EF%25BB%25BF" target="_blank" title="https://comate.baidu.com/zh/download%EF%BB%BF" ref="nofollow noopener noreferrer">comate.baidu.com/zh/downloadâ€¦</a></p>
<ul>
<li>æ–¹å¼ä¸€ï¼šç›´æ¥ä¸‹è½½Comate AI IDEï¼Œäº«å—ä¸æ»‘å¼€å‘è¿‡ç¨‹</li>
<li>æ–¹å¼äºŒï¼šåœ¨ VS Code æˆ– Jetbrains IDE ä¸­æœç´¢â€œæ–‡å¿ƒå¿«ç â€æ’ä»¶ï¼Œå®‰è£…å³ç”¨</li>
</ul>
<p><strong>ç¼–ç¨‹ä»æœªå¦‚æ­¤ç®€å•ï¼Œä½ çš„æƒ³æ³•ï¼Œæ‰æ˜¯æœ€å…³é”®çš„é‚£è¡Œä»£ç ã€‚</strong></p>
<p><strong>ã€æŠ•ç¥¨ã€‘å¦‚æœ Comate å…è´¹ç»™ä½ ç”¨ï¼Œä½ æœ€æƒ³â€œé€ â€ç‚¹å•¥ï¼Ÿ</strong></p>
<p>A. é€ ä¸ªâ€œé˜²å‰æ‰‹â€APPï¼Œç®¡ä½è‡ªå·±</p>
<p>B. é€ ä¸ªâ€œå®˜ç½‘/å°ç¨‹åºâ€ï¼Œå¸®æœ‹å‹ï¼ˆæˆ–æå‰¯ä¸šï¼‰</p>
<p>C. é€ ä¸ªâ€œAIåŠ©ç†â€ï¼Œå¸®æˆ‘è‡ªåŠ¨å†™å‘¨æŠ¥/PPT</p>
<p>D. è„‘æ´å¤ªå¤§ï¼Œè¯„è®ºåŒºè§ï¼</p>
<p>ğŸ”¥ã€æŠ•ç¨¿é€šé“å¼€å¯ï¼ã€‘</p>
<p>å¦‚æœä½ å·²ç»ç”¨ Comate æ•´è¿‡å¥½æ´»å„¿ã€å†™è¿‡ç¥å™¨â€”â€”åˆ«è—ç€ï¼æˆ‘ä»¬è¯šå¾â€œComate é‡ç”Ÿç”¨æ³•â€å®æˆ˜å¿ƒå¾—ï¼</p>
<p>æ–¹å¼ï¼šåå°ç§ä¿¡ï¼Œç•™ä¸‹ä½ çš„ç‚¹å­ï¼æˆ‘ä»¬çš„å·¥ä½œäººå‘˜å°†éšæ—¶ç‡¥å€™ï¼</p>
<p>ğŸ‘‰ ä¸€ç»é‡‡çº³ï¼Œé€ä½  Comate ä¸ªäººä¸“ä¸šç‰ˆæœˆå¡ + å®˜æ–¹å‘¨è¾¹å¤§ç¤¼åŒ…ï¼</p>
<p>ğŸ‘‰ ç©æ³•è¶Šéªšã€åœºæ™¯è¶ŠçœŸå®ï¼Œè¶Šå®¹æ˜“å…¥é€‰ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ ä¸€ä¸ªå´å°‘ä¿©ï¼šAntd Tag å¤šèŠ‚ç‚¹åŒæ—¶æ¶ˆå¤±]]></title>    <link>https://juejin.cn/post/7570268773333073947</link>    <guid>https://juejin.cn/post/7570268773333073947</guid>    <pubDate>2025-11-09T15:48:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570268773333073947" data-draft-id="7569976345931022387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ ä¸€ä¸ªå´å°‘ä¿©ï¼šAntd Tag å¤šèŠ‚ç‚¹åŒæ—¶æ¶ˆå¤±"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,React.js"/> <meta itemprop="datePublished" content="2025-11-09T15:48:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¡ºå‡¡"/> <meta itemprop="url" content="https://juejin.cn/user/2788017221153015"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ ä¸€ä¸ªå´å°‘ä¿©ï¼šAntd Tag å¤šèŠ‚ç‚¹åŒæ—¶æ¶ˆå¤±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017221153015/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¡ºå‡¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T15:48:05.000Z" title="Sun Nov 09 2025 15:48:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    18
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">éœ€æ±‚</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6998ad4d6b1f4301a10a1ef8c1705998~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aG65Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763313379&amp;x-signature=m6U84spwVZGvBVeXWyNOi0IU610%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€ä¸ªè¡¨å•çš„å°éœ€æ±‚ï¼Œèƒ½å¡«å†™å¤šä¸ªç¦åˆ©ï¼Œæœ€å¤šåä¸ªï¼Œç¦åˆ©åç§°å…è®¸é‡å¤ï¼Œå’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fant.design%2Fcomponents%2Ftag-cn%23tag-demo-control" target="_blank" title="https://ant.design/components/tag-cn#tag-demo-control" ref="nofollow noopener noreferrer">å®˜æ–¹çš„åŠ¨æ€æ·»åŠ å’Œåˆ é™¤ç¤ºä¾‹</a>äº¤äº’ä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯å®˜æ–¹ç¤ºä¾‹ä¸æ”¯æŒ tag å†…å®¹é‡å¤ï¼Œä½¿ç”¨çš„ tag å†…å®¹ä½œä¸º key</p>
<p>æˆ‘å¤åˆ¶ä¸¢ç»™ AIï¼Œä¸‹æ‰å»é‡ï¼Œé™åˆ¶ä¸ªæ•°ï¼Œå¥½ï¼æ»¡è¶³éœ€æ±‚äº†ï¼Œkey å€¼æ€ä¹ˆåŠä¸èƒ½ç”¨é‡å¤çš„ï¼Œæ‹¼ä¸ªç´¢å¼•å§ï¼Œæœ€åä¸»è¦ä»£ç å¦‚ä¸‹ï¼Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9833951839b84b30be341ee723feb636~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aG65Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763313379&amp;x-signature=nl9RbkcEdy2iAZ3yco9Se%2F89494%3D" alt="image.png" loading="lazy"/></p>
<p>åé—®ä¸€ä¸‹ï¼šä½ è§‰å¾—è¿™ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œèƒ½è¾¾åˆ°åˆ ä¸€ä¸ªå°‘ä¿©çš„æ•ˆæœå—ğŸ¤”ï¼Ÿï¼Ÿï¼Ÿ</p>
<h2 data-id="heading-1">é—®é¢˜</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/131fd1a6ec6f4b618a4e420ebbd753f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aG65Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763313379&amp;x-signature=Egx6%2FjBl7NB0yMQSlcBq5YEdKf0%3D" alt="image.png" loading="lazy"/></p>
<p>å¤§å®¶åº”è¯¥éƒ½çŸ¥é“ç”¨ index ä½œä¸º keyï¼Œä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œå¯¹äºæˆ‘è¿™ä¸ªéœ€æ±‚çš„å½±å“æ˜¯ï¼Œç‚¹å‡»ç¬¬ä¸€ä¸ªç¦åˆ©åˆ é™¤æ“ä½œï¼Œå®é™…ç§»é™¤çš„æ˜¯æœ€åä¸€ä¸ªç¦åˆ©çš„èŠ‚ç‚¹ï¼Œæˆ‘è§‰å¾—åœ¨è¿™ä¸ªéœ€æ±‚æ˜¯å¯ä»¥æ¥å—çš„ï¼Œåœ¨æ²¡æœ‰åŠ¨ç”»å‰æä¸‹ä¹Ÿä½“æ„Ÿä¸åˆ°ï¼Œæ‰€ä»¥æˆ‘å¹¶æ²¡æœ‰æ”¹è¿™ä¸ªä»£ç ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d60254120f4454b937cf40f4bb563d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aG65Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763313379&amp;x-signature=476w1McOeeijsDAkhzC2Kpsj79s%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†æ˜¯å®é™…æµ‹è¯•çš„æ•ˆæœçš„æ˜¯ï¼Œ<strong>æœ€åä¸€ä¸ªç¦åˆ©çš„èŠ‚ç‚¹æ²¡äº†ï¼Œç¬¬ä¸€ä¸ªç¦åˆ©èŠ‚ç‚¹ä¹Ÿæ²¡äº†</strong>ï¼Œæˆ‘ï¼ï¼ï¼</p>
<p>è¿™å•¥æƒ…å†µï¼Œè¿™ä¸å¯¹å‘€ï¼Œæ ¹æ® <a href="https://juejin.cn/post/7118580620195790855" target="_blank" title="https://juejin.cn/post/7118580620195790855">React Diff ç®—æ³•çš„åŸç†</a>å§å•¦å§å•¦...ä»–ä¸åº”è¯¥æ˜¯è¿™æ ·ç„¶å...ä»–å’‹èƒ½...</p>
<h2 data-id="heading-2">åŸå› </h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffa835de756e41da95b1161fbdb2a7d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aG65Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763313379&amp;x-signature=NEaPMEFsiF2Y9HwJjeqyOt8m6EA%3D" alt="image.png" loading="lazy"/></p>
<p>å¼€å§‹ debugï¼Œæ‰“å¼€æ§åˆ¶å° command + shif + pï¼Œæœç´¢å¹¶è¿›å…¥ react-dom.development.js æ–‡ä»¶ï¼Œæœç´¢ reconcileChildrenArray æ–¹æ³•ï¼Œæ‰“ä¸Šæ–­ç‚¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a22f03b2a294467a543c381fd6c6bae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aG65Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763313379&amp;x-signature=T5G75yPtl7yzeapdVNXK%2BxSI7bg%3D" alt="image.png" loading="lazy"/></p>
<p>React Diff çš„å¤„ç†ä¹Ÿæ²¡é—®é¢˜å‘€ï¼Œè¢«æ ‡è®°åˆ é™¤çš„æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿè¢«æ­£ç¡®å¤ç”¨äº†ï¼Œä»€ä¹ˆæƒ…å†µï¼Ÿéš¾é“åé¢çš„ä»£ç å‡ºäº†é—®é¢˜ï¼Œæˆ‘å°±è®²æ–­ç‚¹å°±æ”¾åˆ°äº† commitRoot æ–¹æ³•ï¼Œå…ˆçœ‹äº† root.finishedWork å‘ç°ä¹Ÿæ˜¯æ­£ç¡®çš„ï¼Œåé¢ç»§ç»­æ‰§è¡Œäº†å‡ ä¸‹ï¼Œæƒ³æ‰¾å‡ºé—®é¢˜å‡ºåœ¨å“ª...å°±çªç„¶è§‰çš„è¿™ä¸ªç¦åˆ©èŠ‚ç‚¹æ˜¯ä¸æ˜¯çœŸæ²¡è¢«åˆ é™¤ï¼Œä½†æ˜¯è¢«éšè—æ‰äº†ï¼Œæˆ‘å°±åˆ‡æ¢åˆ°äº†å…ƒç´ æ§åˆ¶å°ï¼Œè¿˜çœŸæ˜¯æˆ‘å»ï¼ï¼ï¼è¿™ä¸ºå•¥å¤šäº†ä¸ª ant-tag-hidden çš„ç±»</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e0192406f8f4ae0afcf9ca4466e2afd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aG65Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763313379&amp;x-signature=nw5QF0xSX%2FAu%2F5iAqW0%2BldoaUiM%3D" alt="image.png" loading="lazy"/></p>
<p>çœ‹äº†ä¸‹ Antd Tag ä»£ç ï¼Œè¿˜çœŸæœ‰è¿™ä¸ªè®¾è®¡ï¼Œç»™è¢«ç§»é™¤é¡¹åŠ  ant-tag-hiddenï¼ŒåŠ ä¸Šç´¢å¼• key å¤ç”¨å¯¼è‡´å‡ºç°â€œå¤šèŠ‚ç‚¹åŒæ—¶æ¶ˆå¤±â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8242539c45204d48923b6dd973956038~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aG65Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763313379&amp;x-signature=4FUzT0ZnHzgjb5Da1Yrdl2i7Vg0%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue SSR æºç è§£æï¼šssrTransformModel æ·±åº¦å‰–æ]]></title>    <link>https://juejin.cn/post/7569909335909269513</link>    <guid>https://juejin.cn/post/7569909335909269513</guid>    <pubDate>2025-11-09T00:09:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7569909335909269513" data-draft-id="7569976345929842739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue SSR æºç è§£æï¼šssrTransformModel æ·±åº¦å‰–æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-09T00:09:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="excel"/> <meta itemprop="url" content="https://juejin.cn/user/2911162520062862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue SSR æºç è§£æï¼šssrTransformModel æ·±åº¦å‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2911162520062862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    excel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-09T00:09:41.000Z" title="Sun Nov 09 2025 00:09:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¦‚å¿µ</h2>
<p>åœ¨ Vue çš„ SSRï¼ˆæœåŠ¡ç«¯æ¸²æŸ“ï¼‰ç¼–è¯‘é˜¶æ®µä¸­ï¼Œ<code>v-model</code> æŒ‡ä»¤çš„å¤„ç†é€»è¾‘ä¸å®¢æˆ·ç«¯æ¸²æŸ“å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚<br/>
å®¢æˆ·ç«¯çš„ <code>v-model</code> ä¾èµ–è¿è¡Œæ—¶åŒå‘ç»‘å®šæœºåˆ¶ï¼Œè€Œ SSR éœ€è¦åœ¨ç¼–è¯‘æ—¶å°±ç”Ÿæˆé™æ€å­—ç¬¦ä¸²è¾“å‡ºï¼Œå› æ­¤å¿…é¡»æä¾›ä¸€ä¸ªå¯¹åº”çš„ <strong>SSR ç‰ˆæœ¬ transform</strong>ï¼š<code>ssrTransformModel</code>ã€‚</p>
<p>å®ƒçš„ä»»åŠ¡æ˜¯ï¼š</p>
<ul>
<li>å°† <code>v-model</code> æŒ‡ä»¤åœ¨æœåŠ¡ç«¯ç¼–è¯‘é˜¶æ®µè½¬åŒ–ä¸ºé€‚ç”¨äºæœåŠ¡ç«¯çš„æ¸²æŸ“è¡¨è¾¾å¼ï¼›</li>
<li>è‡ªåŠ¨ä¸ºä¸åŒç±»å‹çš„è¡¨å•æ§ä»¶ï¼ˆ<code>input</code>ã€<code>textarea</code>ã€<code>select</code> ç­‰ï¼‰æ³¨å…¥æ­£ç¡®çš„ SSR ç»‘å®šé€»è¾‘ï¼›</li>
<li>ç¡®ä¿åœ¨æ¨¡æ¿è¢«æ¸²æŸ“æˆå­—ç¬¦ä¸²æ—¶ï¼Œ<code>v-model</code> çš„å€¼åæ˜ åœ¨ DOM å±æ€§ä¸­ï¼ˆä¾‹å¦‚é€‰ä¸­çŠ¶æ€æˆ–è¾“å…¥å€¼ï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€åŸç†</h2>
<p><code>ssrTransformModel</code> æ˜¯ä¸€ä¸ª <code>DirectiveTransform</code>ï¼Œå³ç”¨äºæŒ‡ä»¤ç¼–è¯‘çš„è½¬æ¢å‡½æ•°ã€‚å®ƒé€šè¿‡åŒ¹é… <code>v-model</code> æŒ‡ä»¤èŠ‚ç‚¹ï¼Œæ ¹æ®èŠ‚ç‚¹ç±»å‹ï¼ˆHTML å…ƒç´ ç±»å‹ï¼‰ç”Ÿæˆå¯¹åº”çš„ SSR ä»£ç ç‰‡æ®µã€‚</p>
<p>æ ¸å¿ƒæ€è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p><strong>åˆ¤æ–­èŠ‚ç‚¹ç±»å‹</strong></p>
<ul>
<li>æ™®é€šå…ƒç´ ï¼ˆ<code>input</code>ã€<code>textarea</code>ã€<code>select</code>ï¼‰ â†’ æœåŠ¡ç«¯é™æ€è¾“å‡ºï¼›</li>
<li>ç»„ä»¶èŠ‚ç‚¹ï¼ˆ<code>&lt;MyInput v-model="x" /&gt;</code>ï¼‰ â†’ å§”æ‰˜ç»™ <code>transformModel()</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>é’ˆå¯¹ä¸åŒå…ƒç´ çš„å¤„ç†é€»è¾‘</strong></p>
<ul>
<li><code>input[type=text]</code>ï¼šè¾“å‡º <code>value</code> å±æ€§ï¼›</li>
<li><code>input[type=radio]</code>ï¼šæ ¹æ® <code>v-model</code> å€¼æ˜¯å¦åŒ¹é…å½“å‰é€‰é¡¹ç”Ÿæˆ <code>checked</code>ï¼›</li>
<li><code>input[type=checkbox]</code>ï¼šæ ¹æ®æ•°ç»„/å¸ƒå°”åˆ¤æ–­ç”Ÿæˆ <code>checked</code>ï¼›</li>
<li><code>textarea</code>ï¼šå°†å†…éƒ¨å†…å®¹æ›¿æ¢ä¸ºæ’å€¼ï¼›</li>
<li><code>select</code>ï¼šé€’å½’å¤„ç†æ‰€æœ‰ <code>option</code>ï¼Œä¸ºé€‰ä¸­é¡¹æ·»åŠ  <code>selected</code> å±æ€§ã€‚</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯ä¸æ ¡éªŒ</strong></p>
<ul>
<li>
<p>æ£€æŸ¥ä¸åˆæ³•ç”¨æ³•ï¼Œå¦‚ï¼š</p>
<ul>
<li><code>v-model</code> ä¸ <code>value</code> åŒæ—¶å­˜åœ¨ï¼›</li>
<li><code>v-model</code> ç”¨äº <code>&lt;input type="file"&gt;</code>ï¼›</li>
<li><code>v-model</code> ç”¨äºéè¡¨å•å…ƒç´ ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æºç ä¸é€è¡Œæ³¨é‡Š</h2>
<h3 data-id="heading-3">1. å¼•å…¥ä¸ç±»å‹å£°æ˜</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> {
  DOMErrorCodes,
  <span class="hljs-built_in">type</span> DirectiveTransform,
  ElementTypes,
  <span class="hljs-built_in">type</span> ExpressionNode,
  NodeTypes,
  <span class="hljs-built_in">type</span> PlainElementNode,
  <span class="hljs-built_in">type</span> TemplateChildNode,
  createCallExpression,
  createConditionalExpression,
  createDOMCompilerError,
  createInterpolation,
  createObjectProperty,
  createSimpleExpression,
  findProp,
  hasDynamicKeyVBind,
  transformModel,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@vue/compiler-dom'</span>
<span class="hljs-keyword">import</span> {
  SSR_INCLUDE_BOOLEAN_ATTR,
  SSR_LOOSE_CONTAIN,
  SSR_LOOSE_EQUAL,
  SSR_RENDER_DYNAMIC_MODEL,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../runtimeHelpers'</span>
<span class="hljs-keyword">import</span> <span class="hljs-built_in">type</span> { DirectiveTransformResult } <span class="hljs-keyword">from</span> <span class="hljs-string">'packages/compiler-core/src/transform'</span>
</code></pre>
<blockquote>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li>å‰åŠéƒ¨åˆ†å¯¼å…¥ AST å¤„ç†ç›¸å…³å·¥å…·å‡½æ•°ï¼ˆå¦‚ <code>createCallExpression</code>ã€<code>createConditionalExpression</code> ç­‰ï¼‰ã€‚</li>
<li>ååŠéƒ¨åˆ†å¯¼å…¥ SSR æ¸²æŸ“è¾…åŠ©å‡½æ•°ï¼ˆå¦‚ <code>SSR_LOOSE_EQUAL</code>ã€<code>SSR_RENDER_DYNAMIC_MODEL</code> ç­‰ï¼‰ï¼Œè¿™äº›æ˜¯ SSR è¿è¡Œæ—¶åœ¨å­—ç¬¦ä¸²æ‹¼æ¥ä¸­ä½¿ç”¨çš„ helperã€‚</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-4">2. æ ¸å¿ƒ transform å‡½æ•°å®šä¹‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">ssrTransformModel</span>: <span class="hljs-title class_">DirectiveTransform</span> = <span class="hljs-function">(<span class="hljs-params">dir, node, context</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> model = dir.<span class="hljs-property">exp</span>!
</code></pre>
<blockquote>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>dir</code>ï¼šè¡¨ç¤º <code>v-model</code> æŒ‡ä»¤èŠ‚ç‚¹ï¼›</li>
<li><code>node</code>ï¼šå½“å‰ç»‘å®šçš„å…ƒç´ èŠ‚ç‚¹ï¼›</li>
<li><code>context</code>ï¼šç¼–è¯‘ä¸Šä¸‹æ–‡ï¼Œç”¨äºé”™è¯¯æŠ¥å‘Šã€helper æ³¨å†Œç­‰ï¼›</li>
<li><code>model</code>ï¼š<code>v-model</code> çš„è¡¨è¾¾å¼èŠ‚ç‚¹ï¼ˆå¦‚ <code>foo.bar</code>ï¼‰ã€‚</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-5">3. æ£€æŸ¥é‡å¤ç»‘å®š <code>value</code></h3>
<pre><code class="hljs language-scss" lang="scss">  function <span class="hljs-built_in">checkDuplicatedValue</span>() {
    const value = <span class="hljs-built_in">findProp</span>(node, 'value')
    if (value) {
      context<span class="hljs-selector-class">.onError</span>(
        createDOMCompilerError(
          DOMErrorCodes.X_V_MODEL_UNNECESSARY_VALUE,
          value.loc,
        ),
      )
    }
  }
</code></pre>
<blockquote>
<p><strong>é€»è¾‘è¯´æ˜ï¼š</strong><br/>
SSR ä¸éœ€è¦å†æ˜¾å¼è®¾ç½® <code>value</code>ï¼Œå› ä¸º <code>v-model</code> å·²è‡ªåŠ¨ç”Ÿæˆå®ƒï¼›è‹¥æ¨¡æ¿ä¸­å¤šå†™ä¸€ä¸ª <code>value</code>ï¼Œä¼šæŠ¥é”™æç¤ºç”¨æˆ·ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">4. é€’å½’å¤„ç† <code>&lt;select&gt;</code> å­èŠ‚ç‚¹</h3>
<pre><code class="hljs language-ini" lang="ini">  const <span class="hljs-attr">processSelectChildren</span> = (children: TemplateChildNode[]) =&gt; {
    children.forEach(<span class="hljs-attr">child</span> =&gt; {
      if (<span class="hljs-attr">child.type</span> === NodeTypes.ELEMENT) {
        processOption(child as PlainElementNode)
      } else if (<span class="hljs-attr">child.type</span> === NodeTypes.FOR) {
        processSelectChildren(child.children)
      } else if (<span class="hljs-attr">child.type</span> === NodeTypes.IF) {
        child.branches.forEach(<span class="hljs-attr">b</span> =&gt; processSelectChildren(b.children))
      }
    })
  }
</code></pre>
<blockquote>
<p><strong>é€»è¾‘è¯´æ˜ï¼š</strong><br/>
é€’å½’éå† <code>&lt;select&gt;</code> çš„æ‰€æœ‰å±‚çº§å­èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬è¢« <code>v-for</code> æˆ– <code>v-if</code> åŒ…è£¹çš„é€‰é¡¹ï¼Œç¡®ä¿æ¯ä¸ª <code>&lt;option&gt;</code> éƒ½èƒ½æ­£ç¡®æ ‡æ³¨ <code>selected</code> çŠ¶æ€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">5. å¤„ç† <code>&lt;option&gt;</code> å…ƒç´ </h3>
<pre><code class="hljs language-scss" lang="scss">  function <span class="hljs-built_in">processOption</span>(plainNode: PlainElementNode) {
    if (plainNode.tag === 'option') {
      if (plainNode.props.findIndex(p =&gt; p.name === 'selected') === -<span class="hljs-number">1</span>) {
        const value = <span class="hljs-built_in">findValueBinding</span>(plainNode)
        plainNode<span class="hljs-selector-class">.ssrCodegenNode</span>!<span class="hljs-selector-class">.elements</span><span class="hljs-selector-class">.push</span>(
          createConditionalExpression(
            createCallExpression(context.helper(SSR_INCLUDE_BOOLEAN_ATTR), <span class="hljs-selector-attr">[              createConditionalExpression(                createCallExpression(`Array.isArray`, [model]</span>),
                <span class="hljs-built_in">createCallExpression</span>(context.helper(SSR_LOOSE_CONTAIN), <span class="hljs-selector-attr">[                  model,                  value,                ]</span>),
                <span class="hljs-built_in">createCallExpression</span>(context.helper(SSR_LOOSE_EQUAL), <span class="hljs-selector-attr">[                  model,                  value,                ]</span>),
              ),
            ]),
            <span class="hljs-built_in">createSimpleExpression</span>(' selected', true),
            <span class="hljs-built_in">createSimpleExpression</span>('', true),
            false,
          ),
        )
      }
    } else if (plainNode.tag === 'optgroup') {
      <span class="hljs-built_in">processSelectChildren</span>(plainNode.children)
    }
  }
</code></pre>
<blockquote>
<p><strong>é€æ­¥è¯´æ˜ï¼š</strong></p>
<ol>
<li>
<p>è‹¥ <code>&lt;option&gt;</code> æ²¡æœ‰æ˜¾å¼ <code>selected</code>ï¼Œåˆ™åˆ¤æ–­å®ƒæ˜¯å¦åº”è¢«é€‰ä¸­ï¼›</p>
</li>
<li>
<p>åˆ¤æ–­é€»è¾‘ï¼š</p>
<ul>
<li>å¦‚æœ <code>v-model</code> æ˜¯æ•°ç»„ï¼Œåˆ™è°ƒç”¨ <code>SSR_LOOSE_CONTAIN(model, value)</code>ï¼›</li>
<li>å¦åˆ™ç”¨ <code>SSR_LOOSE_EQUAL(model, value)</code>ï¼›</li>
</ul>
</li>
<li>
<p>è‹¥åˆ¤æ–­ä¸ºçœŸï¼Œåˆ™æ‹¼æ¥å­—ç¬¦ä¸² <code>" selected"</code> åˆ°æœ€ç»ˆ SSR è¾“å‡ºã€‚</p>
</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-8">6. ä¸»é€»è¾‘åˆ†æ”¯ï¼ˆæ ¹æ®å…ƒç´ ç±»å‹ï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">  if (<span class="hljs-attr">node.tagType</span> === ElementTypes.ELEMENT) {
    const res: <span class="hljs-attr">DirectiveTransformResult</span> = { props: [] }
    const <span class="hljs-attr">defaultProps</span> = [
      createObjectProperty(`value`, model),
    ]
</code></pre>
<blockquote>
<p>åˆ›å»º transform ç»“æœå¯¹è±¡ <code>res</code>ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘åç”Ÿæˆçš„ propsï¼ˆæœ€ç»ˆè½¬ä¸º SSR å±æ€§å­—ç¬¦ä¸²ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-9">6.1 è¾“å…¥æ¡† <code>&lt;input&gt;</code></h4>
<pre><code class="hljs language-ini" lang="ini">    if (<span class="hljs-attr">node.tag</span> === <span class="hljs-string">'input'</span>) {
      const <span class="hljs-attr">type</span> = findProp(node, <span class="hljs-string">'type'</span>)
      if (type) {
        const <span class="hljs-attr">value</span> = findValueBinding(node)
</code></pre>
<h5 data-id="heading-10">(1) åŠ¨æ€ç±»å‹è¾“å…¥æ¡†</h5>
<pre><code class="hljs language-ini" lang="ini">        if (<span class="hljs-attr">type.type</span> === NodeTypes.DIRECTIVE) {
          <span class="hljs-attr">res.ssrTagParts</span> = [
            createCallExpression(context.helper(SSR_RENDER_DYNAMIC_MODEL), [
              type.exp!,
              model,
              value,
            ]),
          ]
</code></pre>
<blockquote>
<p>ç”¨ <code>SSR_RENDER_DYNAMIC_MODEL</code> å¤„ç†ï¼Œä¾‹å¦‚ï¼š<code>&lt;input :type="inputType" v-model="x"&gt;</code>ã€‚<br/>
SSR é˜¶æ®µä¼šç”ŸæˆåŠ¨æ€ <code>type</code> åˆ†æ”¯é€»è¾‘ã€‚</p>
</blockquote>
<h5 data-id="heading-11">(2) é™æ€ç±»å‹è¾“å…¥æ¡†</h5>
<p>æ ¹æ® <code>type</code> å€¼ä¸åŒï¼š</p>
<ul>
<li><strong>radio</strong></li>
</ul>
<pre><code class="hljs language-css" lang="css">case 'radio':
  res.props = [
    <span class="hljs-built_in">createObjectProperty</span>(
      `checked`,
      <span class="hljs-built_in">createCallExpression</span>(context.<span class="hljs-built_in">helper</span>(SSR_LOOSE_EQUAL), [model, value]),
    ),
  ]
</code></pre>
<ul>
<li><strong>checkbox</strong></li>
</ul>
<pre><code class="hljs language-css" lang="css">case 'checkbox':
  const trueValueBinding = <span class="hljs-built_in">findProp</span>(node, <span class="hljs-string">'true-value'</span>)
  ...
  res.props = [
    <span class="hljs-built_in">createObjectProperty</span>(
      `checked`,
      <span class="hljs-built_in">createConditionalExpression</span>(
        <span class="hljs-built_in">createCallExpression</span>(`Array.isArray`, [model]),
        <span class="hljs-built_in">createCallExpression</span>(context.<span class="hljs-built_in">helper</span>(SSR_LOOSE_CONTAIN), [model, value]),
        model,
      ),
    ),
  ]
</code></pre>
<ul>
<li><strong>file</strong></li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">case</span> <span class="hljs-string">'file'</span>:
  context.onError(
    createDOMCompilerError(
      DOMErrorCodes.X_V_MODEL_ON_FILE_INPUT_ELEMENT,
      <span class="hljs-built_in">dir</span>.loc,
    ),
  )
</code></pre>
<ul>
<li><strong>defaultï¼ˆtext/passwordç­‰ï¼‰</strong></li>
</ul>
<pre><code class="hljs language-ini" lang="ini">default:
  checkDuplicatedValue()
  <span class="hljs-attr">res.props</span> = defaultProps
</code></pre>
<hr/>
<h4 data-id="heading-12">6.2 æ–‡æœ¬åŸŸ <code>&lt;textarea&gt;</code></h4>
<pre><code class="hljs language-ini" lang="ini">    } else if (<span class="hljs-attr">node.tag</span> === <span class="hljs-string">'textarea'</span>) {
      checkDuplicatedValue()
      <span class="hljs-attr">node.children</span> = [createInterpolation(model, model.loc)]
</code></pre>
<blockquote>
<p>æ›¿æ¢å†…éƒ¨å†…å®¹ä¸ºæ’å€¼è¡¨è¾¾å¼ï¼Œä½¿å¾— SSR è¾“å‡º <code>&lt;textarea&gt;å†…å®¹&lt;/textarea&gt;</code>ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-13">6.3 ä¸‹æ‹‰æ¡† <code>&lt;select&gt;</code></h4>
<pre><code class="hljs language-ini" lang="ini">    } else if (<span class="hljs-attr">node.tag</span> === <span class="hljs-string">'select'</span>) {
      processSelectChildren(node.children)
</code></pre>
<blockquote>
<p>è°ƒç”¨å‰æ–‡å®šä¹‰çš„é€’å½’å‡½æ•°ï¼Œä¸º <code>&lt;option&gt;</code> è‡ªåŠ¨æ·»åŠ  <code>selected</code>ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-14">6.4 éæ³•ç”¨æ³•å¤„ç†</h4>
<pre><code class="hljs language-python" lang="python">    } <span class="hljs-keyword">else</span> {
      context.onError(
        createDOMCompilerError(
          DOMErrorCodes.X_V_MODEL_ON_INVALID_ELEMENT,
          <span class="hljs-built_in">dir</span>.loc,
        ),
      )
    }
</code></pre>
<blockquote>
<p>ä¾‹å¦‚åœ¨ <code>&lt;div&gt;</code> æˆ– <code>&lt;span&gt;</code> ä¸Šä½¿ç”¨ <code>v-model</code>ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-15">6.5 è¿”å›ç»“æœ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">    <span class="hljs-keyword">return</span> res
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// component v-model</span>
    <span class="hljs-keyword">return</span> transformModel(dir, node, context)
  }
</code></pre>
<blockquote>
<p>å¯¹ç»„ä»¶èŠ‚ç‚¹äº¤ç”±é€šç”¨çš„ <code>transformModel</code> å¤„ç†ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-16">7. è¾…åŠ©å‡½æ•°ï¼šæå– <code>value</code> ç»‘å®š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">findValueBinding</span>(<span class="hljs-params">node: PlainElementNode</span>): <span class="hljs-title class_">ExpressionNode</span> {
  <span class="hljs-keyword">const</span> valueBinding = <span class="hljs-title function_">findProp</span>(node, <span class="hljs-string">'value'</span>)
  <span class="hljs-keyword">return</span> valueBinding
    ? valueBinding.<span class="hljs-property">type</span> === <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">DIRECTIVE</span>
      ? valueBinding.<span class="hljs-property">exp</span>!
      : <span class="hljs-title function_">createSimpleExpression</span>(valueBinding.<span class="hljs-property">value</span>!.<span class="hljs-property">content</span>, <span class="hljs-literal">true</span>)
    : <span class="hljs-title function_">createSimpleExpression</span>(<span class="hljs-string">`null`</span>, <span class="hljs-literal">false</span>)
}
</code></pre>
<blockquote>
<p>è‹¥èŠ‚ç‚¹æœ‰ <code>v-bind:value</code> æˆ–é™æ€ <code>value</code> å±æ€§ï¼Œè¿”å›å…¶è¡¨è¾¾å¼ï¼›å¦åˆ™è¿”å›ä¸€ä¸ªç©ºè¡¨è¾¾å¼ <code>null</code>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-17">å››ã€å¯¹æ¯”åˆ†æ</h2>






























<table><thead><tr><th>ç±»å‹</th><th>å®¢æˆ·ç«¯ç¼–è¯‘ (<code>transformModel</code>)</th><th>SSR ç¼–è¯‘ (<code>ssrTransformModel</code>)</th></tr></thead><tbody><tr><td>è¾“å‡ºå½¢å¼</td><td>åŠ¨æ€ç»‘å®š + äº‹ä»¶</td><td>é™æ€å­—ç¬¦ä¸²ç”Ÿæˆ</td></tr><tr><td>ç›®æ ‡</td><td>è¿è¡Œæ—¶ DOM æ›´æ–°</td><td>åˆå§‹ HTML æ¸²æŸ“</td></tr><tr><td>å¤„ç†æ—¶æœº</td><td>è¿è¡Œæ—¶</td><td>ç¼–è¯‘æ—¶</td></tr><tr><td>è¡¨å•ç±»å‹æ”¯æŒ</td><td>åŒæ­¥è¿è¡Œæ—¶ DOM</td><td>é¢„æ¸²æŸ“é€‰ä¸­ä¸å€¼</td></tr></tbody></table>
<p>SSR ç‰ˆæœ¬çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ï¼š<strong>å®ƒå¿…é¡»åœ¨æ²¡æœ‰ DOM çš„ç¯å¢ƒä¸‹æ¨¡æ‹Ÿâ€œé€‰ä¸­/è¾“å…¥â€çŠ¶æ€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-18">äº”ã€å®è·µåº”ç”¨</h2>
<p>å‡è®¾æ¨¡æ¿å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;select <span class="hljs-attr">v-model</span>=<span class="hljs-string">"lang"</span>&gt;
  &lt;option <span class="hljs-attr">value</span>=<span class="hljs-string">"en"</span>&gt;English&lt;/option&gt;
  &lt;option <span class="hljs-attr">value</span>=<span class="hljs-string">"jp"</span>&gt;Japanese&lt;/option&gt;
&lt;/select&gt;
</code></pre>
<p>SSR ç¼–è¯‘åä¼šç”Ÿæˆï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">&lt;<span class="hljs-keyword">select</span>&gt;
  &lt;<span class="hljs-keyword">option</span> value=<span class="hljs-string">"en"</span> selected&gt;English&lt;/<span class="hljs-keyword">option</span>&gt;
  &lt;<span class="hljs-keyword">option</span> value=<span class="hljs-string">"jp"</span>&gt;Japanese&lt;/<span class="hljs-keyword">option</span>&gt;
&lt;/<span class="hljs-keyword">select</span>&gt;
</code></pre>
<blockquote>
<p>å¦‚æœ <code>lang === 'en'</code>ï¼Œåˆ™ <code>selected</code> ä¼šåœ¨æœåŠ¡å™¨ç«¯ç›´æ¥è¾“å‡ºã€‚<br/>
å®¢æˆ·ç«¯ hydration é˜¶æ®µæ— éœ€å†é¢å¤–å¤„ç†é€‰ä¸­é€»è¾‘ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-19">å…­ã€æ‹“å±•ï¼šä¸ <code>v-bind</code>ã€<code>v-if</code> çš„ååŒ</h2>
<p>åœ¨ SSR ç¼–è¯‘ä¸­ï¼Œ<code>v-model</code> ä¸ <code>v-bind</code>ã€<code>v-if</code>ã€<code>v-for</code> å¯äº¤ç»‡å­˜åœ¨ã€‚<br/>
<code>ssrTransformModel</code> ç‰¹æ„æ”¯æŒé€’å½’éå† <code>v-if</code> å’Œ <code>v-for</code> å­èŠ‚ç‚¹ï¼Œç¡®ä¿æ‰€æœ‰åŠ¨æ€æ¸²æŸ“çš„é€‰é¡¹éƒ½è¢«æ­£ç¡®åˆ¤æ–­å’Œè¾“å‡ºã€‚</p>
<hr/>
<h2 data-id="heading-20">ä¸ƒã€æ½œåœ¨é—®é¢˜ä¸è®¾è®¡æ€è€ƒ</h2>
<ol>
<li><strong>åŠ¨æ€ç±»å‹çš„å¤æ‚æ€§</strong><br/>
<code>&lt;input :type="inputType" v-model="x"&gt;</code> åœ¨ SSR ä¸­å¿…é¡»ç”Ÿæˆå¤šåˆ†æ”¯æ¸²æŸ“é€»è¾‘ï¼Œå¦åˆ™æ— æ³•ç¡®å®š <code>checked/value</code> çš„ç”Ÿæˆè§„åˆ™ã€‚</li>
<li><strong>æ•°ç»„ç»‘å®šçš„å…¼å®¹æ€§</strong><br/>
é€šè¿‡ <code>Array.isArray()</code> åˆ¤æ–­æ˜¯å¦æ˜¯å¤šé€‰ç»‘å®šï¼Œè¿™ç§åŠ¨æ€æ£€æµ‹åœ¨ SSR ç¯å¢ƒä¸­éœ€è°¨æ…å¤„ç†æ€§èƒ½å¼€é”€ã€‚</li>
<li><strong>hydration å¯¹é½é—®é¢˜</strong><br/>
SSR è¾“å‡ºçš„åˆå§‹çŠ¶æ€å¿…é¡»ä¸å®¢æˆ·ç«¯åˆå§‹ <code>data</code> å®Œå…¨ä¸€è‡´ï¼Œå¦åˆ™ä¼šå‡ºç° mismatch è­¦å‘Šã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-21">å…«ã€æ€»ç»“</h2>
<p><code>ssrTransformModel</code> æ˜¯ Vue SSR ç¼–è¯‘ä½“ç³»ä¸­æœ€å…³é”®çš„æŒ‡ä»¤å¤„ç†é€»è¾‘ä¹‹ä¸€ã€‚<br/>
å®ƒåœ¨ç¼–è¯‘é˜¶æ®µå°† <code>v-model</code> çš„åŒå‘ç»‘å®šè¯­ä¹‰è½¬åŒ–ä¸ºé™æ€å±æ€§å­—ç¬¦ä¸²ï¼Œä»è€Œå®ç°<strong>åˆå§‹çŠ¶æ€å¯è¿˜åŸã€æ— è¿è¡Œæ—¶ä¾èµ–çš„ HTML è¾“å‡º</strong>ã€‚</p>
<p>è¿™æ®µä»£ç å……åˆ†ä½“ç°äº† Vue åœ¨ <strong>ç¼–è¯‘æœŸä¸è¿è¡ŒæœŸåˆ†å±‚è®¾è®¡</strong> çš„æ€æƒ³ï¼š</p>
<blockquote>
<p>ç¼–è¯‘æœŸé™æ€ç”Ÿæˆ + è¿è¡Œæ—¶åŠ¨æ€ç»‘å®š = é«˜æ€§èƒ½ä¸é«˜ä¸€è‡´æ€§å¹¶å­˜ã€‚</p>
</blockquote>
<hr/>
<p><strong>æœ¬æ–‡éƒ¨åˆ†å†…å®¹å€ŸåŠ© AI è¾…åŠ©ç”Ÿæˆï¼Œå¹¶ç”±ä½œè€…æ•´ç†å®¡æ ¸ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[EMR StarRocks Stellaå†…æ ¸æ­£å¼å‘å¸ƒï¼Œç™»é¡¶TPCæ¦œå•å…¨çƒç¬¬ä¸€]]></title>    <link>https://juejin.cn/post/7570866247979188276</link>    <guid>https://juejin.cn/post/7570866247979188276</guid>    <pubDate>2025-11-10T07:28:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570866247979188276" data-draft-id="7570604028633546787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="EMR StarRocks Stellaå†…æ ¸æ­£å¼å‘å¸ƒï¼Œç™»é¡¶TPCæ¦œå•å…¨çƒç¬¬ä¸€"/> <meta itemprop="keywords" content="æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2025-11-10T07:28:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            EMR StarRocks Stellaå†…æ ¸æ­£å¼å‘å¸ƒï¼Œç™»é¡¶TPCæ¦œå•å…¨çƒç¬¬ä¸€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T07:28:06.000Z" title="Mon Nov 10 2025 07:28:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025Â å¹´äº‘æ –å¤§ä¼šï¼ŒEMRÂ ServerlessÂ StarRocksé‡ç£…å‘å¸ƒå…¨æ–°ä¼ä¸šçº§ç‰ˆæœ¬å†…æ ¸StellaÂ (<strong>St</strong>arRocksÂ <strong>E</strong>fficientÂ andÂ <strong>L</strong>ightening-fastÂ <strong>La</strong>kehouse)ï¼Œå®Œå…¨å…¼å®¹å¼€æºStarRocksï¼Œä¸ºç”¨æˆ·æä¾›ä¼ä¸šçº§çš„äº§å“åŠŸèƒ½ã€å“è¶Šçš„æ€§èƒ½åŠç¨³å®šæ€§ä¿éšœã€‚</p>
<p>EMRÂ ServerlessÂ StarRocksåœ¨æƒå¨TPCåŸºå‡†æµ‹è¯•ä¸­åˆ›é€ ä½³ç»©ï¼šåœ¨â€œæ•°æ®åˆ†æâ€æ€§èƒ½æµ‹è¯•TPC-Hæ¦œå•ä¸­ï¼Œé˜¿é‡Œäº‘EMRÂ ServerlessÂ StarRocksÂ ï¼ˆStellaÂ 1.2.0å†…æ ¸ï¼‰ä»¥QphHè¶…754ä¸‡åˆ†çš„æ€§èƒ½ç»“æœ<strong>æ–©è·å…¨çƒå† å†›</strong>ï¼Œ<strong>é¢†å…ˆç¬¬äºŒå111%</strong>ï¼›</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ce0b5f6a128481ebed10270a3fc9cb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364485&amp;x-signature=%2Bb2L%2FyFvlVFCriFcBQURR9eKT0k%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/353ef8ddd52d42cc8a4bf75b8958c3b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364485&amp;x-signature=a0rnCCPKqenchYWJ01noPaJnZOY%3D" alt="image.png" loading="lazy"/></p>
<p>å…¨æ–°ä¼ä¸šçº§å†…æ ¸Stellaåœ¨<strong>TPC-HÂ 10TBæ ‡å‡†æµ‹è¯•åœºæ™¯ä¸‹ï¼Œç›¸æ¯”ä¸Šä¸€ç‰ˆæœ¬æ€§èƒ½æå‡è¶…è¿‡120%</strong>ï¼Œç™»é¡¶TPCæ¦œå•å…¨çƒç¬¬ä¸€ï¼›ä¸æ­¤åŒæ—¶ï¼Œåœ¨Lakehouseå…¸å‹åœºæ™¯ä¸­ï¼ŒStarRocksÂ +Â Paimonç»„åˆçš„TPC-HÂ 1Tçš„æ€§èƒ½æµ‹è¯•ï¼Œ<strong>ç›¸æ¯”ä¸Šä¸€ä¸ªç‰ˆæœ¬æ€§èƒ½æå‡100%</strong>ï¼Œç›¸æ¯”TrinoÂ +Â Paimonå®æµ‹<strong>æ€§èƒ½æå‡é«˜è¾¾12å€</strong>ï¼ŒPaimonÂ DVè¡¨çš„<strong>æ¨¡å¼ä¸‹æå‡300%</strong>ã€‚å……åˆ†éªŒè¯äº†å…¶åœ¨å¤æ‚åˆ†ææŸ¥è¯¢ä¸­çš„æè‡´æ€§èƒ½ä¸äº‘åŸç”Ÿæ¶æ„çš„é¢†å…ˆä¼˜åŠ¿ã€‚åŒæ—¶å‘å¸ƒäº†å…¨æ–°çš„å…¨æ–‡æ£€ç´¢å¼•æ“ï¼Œè¾ƒä¹‹å‰ç‰ˆæœ¬<strong>è¿‡æ»¤æ€§èƒ½æå‡100%</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7e35488111c4533bf2c7f3ffc1845ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364485&amp;x-signature=gwuch4gcKDpq2OGOV04k2Uw1drw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸‰å¤§æ ¸å¿ƒåœºæ™¯å…¨é¢å‡çº§</h2>
<p>StellaÂ èšç„¦äº‘åŸç”ŸLakehouseèƒ½åŠ›æå‡ï¼Œåœ¨å®æ—¶æ•°ä»“ã€æ¹–ä»“åˆ†æã€å…¨æ–‡æ£€ç´¢ä¸‰å¤§æ ¸å¿ƒåœºæ™¯ä¸Šå–å¾—é‡å¤§çªç ´ï¼š</p>
<ol>
<li><strong>å®æ—¶æ•°ä»“</strong></li>
</ol>
<ul>
<li><strong>å¤šWarehouseï¼ˆå¤šè®¡ç®—ç»„ï¼‰æ­£å¼å‘å¸ƒ</strong>ï¼šæ”¯æŒ<strong>è¯»å†™åˆ†ç¦»</strong>åœºæ™¯ï¼Œå·²ç»è¿‡å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒéªŒè¯</li>
<li><strong>å†…æ ¸æ€§èƒ½å¤§å¹…æå‡</strong>ï¼šæ€§èƒ½è¾ƒä¸Šä¸ªç‰ˆæœ¬<strong>æå‡100%</strong></li>
<li><strong>ä½¿ç”¨æˆæœ¬å¤§å¤§é™ä½</strong>ï¼šé«˜é¢‘å¯¼å…¥<strong>é™ä½50%èµ„æºæ¶ˆè€—</strong>ï¼Œå­˜å‚¨APIè¯·æ±‚æˆæœ¬<strong>é™ä½80%</strong></li>
<li><strong>å…ƒæ•°æ®ç®¡ç†æ•ˆç‡æå‡</strong>ï¼šæµ·é‡Tabletè°ƒåº¦æ€§èƒ½<strong>æå‡300%</strong></li>
<li><strong>ä¼ä¸šçº§èƒ½åŠ›</strong>ï¼šå®Œæ•´æ”¯æŒ<strong>æ•°æ®æ²»ç†å’Œè¡€ç¼˜</strong>åŠŸèƒ½</li>
<li><strong>å­˜å‚¨ä¸å¯è§‚æµ‹æ€§æå‡</strong>ï¼šç£ç›˜ç©ºé—´å’Œç¨³å®šæ€§å…¨é¢å¯¹é½<strong>å­˜ç®—ä¸€ä½“</strong>æ¶æ„ï¼Œå¯è§‚æµ‹æ€§å¤§å¹…æå‡</li>
</ul>
<ol start="2">
<li><strong>æ¹–ä»“åˆ†æ</strong></li>
</ol>
<ul>
<li><strong>PaimonæŸ¥è¯¢æ€§èƒ½æå‡100%</strong>ï¼šåœ¨æ ‡å‡†TPC-Håœºæ™¯ä¸‹ï¼ŒæŸ¥è¯¢æ€§èƒ½è¾ƒä¸Šä¸€ç‰ˆæœ¬æ˜¾è‘—æå‡</li>
<li><strong>PaimonÂ DVè¡¨åˆ†ææ€§èƒ½****æå‡300%+</strong>ï¼šé€šè¿‡å¯¹DVåºåˆ—åŒ–æœºåˆ¶çš„å¤§å¹…ä¼˜åŒ–ï¼ŒDVè¡¨æ¨¡å‹æŸ¥è¯¢æ•ˆç‡æå‡çº¦10å€</li>
<li><strong>è·¨å¼•æ“æ€§èƒ½é¢†å…ˆ</strong>ï¼šStarRocks+Paimonç›¸è¾ƒTrino+Paimonæ€§èƒ½<strong>æå‡12å€ä»¥ä¸Š</strong></li>
<li><strong>æ— ç¼é›†æˆäº‘ä¸ŠDLFÂ 2.Ã—ç³»åˆ—</strong>ï¼šä¸é˜¿é‡Œäº‘DataÂ LakeÂ Formationæ·±åº¦é›†æˆï¼Œæ”¯æŒç”¨æˆ·ã€æƒé™ã€å…ƒæ•°æ®ç»Ÿä¸€ç®¡ç†ï¼Œäº‘ä¸Šå³å¼€å³ç”¨çš„Lakehouseæ¶æ„</li>
</ul>
<ol start="3">
<li><strong>å…¨æ–‡æ£€ç´¢</strong></li>
</ol>
<ul>
<li><strong>å…¨æ–°<strong><strong>å€’æ’ç´¢å¼•</strong></strong>æ¶æ„å’Œèƒ½åŠ›æ­£å¼å‘å¸ƒ</strong>ï¼šé‡æ„ç¤¾åŒºç‰ˆæœ¬ï¼Œæ”¹è¿›è®¾è®¡ç¼ºé™·</li>
<li><strong>å¯¼å…¥æ€§èƒ½æå‡3å€+</strong>ï¼šæ£€ç´¢å¼•æ“æ•°æ®å¯¼å…¥æ•ˆç‡å¤§å¹…æé«˜</li>
<li><strong>æ—¥å¿—åˆ†ææ€§èƒ½æå‡5å€+</strong>ï¼šæŸ¥è¯¢å“åº”é€Ÿåº¦æ˜¾è‘—æå‡</li>
<li><strong>å­˜å‚¨é™æœ¬80%+</strong>ï¼šStarRocksé‡‡ç”¨çš„åˆ—å­˜æ¨¡å¼è¾ƒè¡Œå­˜æ¨¡å¼å¤§å¤§æå‡å‹ç¼©ç©ºé—´èƒ½åŠ›</li>
</ul>
<h2 data-id="heading-1">æ ¸å¿ƒèƒ½åŠ›ä¼˜åŒ–</h2>
<h3 data-id="heading-2">Multi-Warehouseï¼šä¼ä¸šçº§èµ„æºéš”ç¦»æ–¹æ¡ˆ</h3>
<p>Multi-Warehouseé’ˆå¯¹å¤§å‹StarRocksé›†ç¾¤çš„èµ„æºéš”ç¦»éš¾é¢˜æä¾›äº†æœ‰æ•ˆè§£å†³æ–¹æ¡ˆã€‚éšç€é›†ç¾¤è§„æ¨¡æ‰©å¤§å’Œä¸šåŠ¡åœºæ™¯å¢å¤šï¼Œèµ„æºäº‰æŠ¢é—®é¢˜é€æ¸å‡¸æ˜¾â€”â€”å¯¼å…¥ä»»åŠ¡è¿‡å¤§å½±å“æŸ¥è¯¢æ€§èƒ½ã€å¤§å‹SQLæ“ä½œé˜»å¡å…¶ä»–ä¸šåŠ¡æŸ¥è¯¢ã€‚</p>
<p>Multi-WarehouseåŸºäºå­˜ç®—åˆ†ç¦»æ¶æ„ï¼Œå®ç°äº†ï¼š</p>
<ul>
<li><strong>æ•°æ®å…±äº«ä¸è®¡ç®—éš”ç¦»</strong>ï¼šå¤šä¸ªWarehouseå…±äº«åŒä¸€å­˜å‚¨å±‚ï¼ˆå¦‚OSSï¼‰ï¼Œå®ç°æ•°æ®é«˜æ•ˆå…±ç”¨ï¼›è®¡ç®—èµ„æºé€šè¿‡ç¡¬éš”ç¦»æœºåˆ¶ç‹¬ç«‹åˆ†é…</li>
<li><strong>å…¨é¢èµ„æºéš”ç¦»</strong>ï¼šæœ€æ–°ç‰ˆæœ¬æ”¯æŒCompactionæŒ‡å®šè¿è¡Œåœ¨ç‰¹å®šWarehouseä¸­ï¼Œé¿å…èµ„æºé›†ä¸­äº‰æŠ¢</li>
<li><strong>å¼¹æ€§ä¼¸ç¼©ååŒ</strong>ï¼šä¸å¼¹æ€§ä¼¸ç¼©èƒ½åŠ›ç»“åˆä½¿ç”¨ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€è°ƒæ•´è®¡ç®—èµ„æºè§„æ¨¡ï¼Œç™½å¤©é«˜å³°æ‰©å®¹ã€å¤œé—´ä½å³°ç¼©å®¹ï¼Œåœ¨ä¿éšœæ€§èƒ½çš„åŒæ—¶æœ‰æ•ˆæ§åˆ¶æˆæœ¬</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa0d5016149146c29a558bb4831a5258~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364485&amp;x-signature=gh%2BTmSFydmqx8X17NihLfZTobmc%3D" alt="image.png" loading="lazy"/></p>
<p>ç›®å‰ï¼Œåœ¨ä½¿ç”¨å­˜ç®—åˆ†ç¦»æ¶æ„çš„å®¢æˆ·ä¸­ï¼Œçº¦åŠæ•°å·²å¯ç”¨Multi-Warehouseï¼Œè¯¥åŠŸèƒ½ä¸å¼¹æ€§ä¼¸ç¼©å·²æˆä¸ºä¼ä¸šç”¨æˆ·å¹¿æ³›ç»„åˆä½¿ç”¨çš„ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-3">StellaÂ å†…æ ¸æ€§èƒ½æå‡</h3>
<p>åœ¨TPC-HÂ 10TåŸºå‡†æµ‹è¯•ä¸­ï¼Œå­˜ç®—åˆ†ç¦»ç‰ˆæœ¬çš„Stellaç›¸æ¯”ä¸Šä¸€ç‰ˆæœ¬<strong>æ€§èƒ½æå‡è¶…è¿‡120%</strong>ï¼Œå……åˆ†å±•ç°äº†äº‘åŸç”Ÿæ¶æ„çš„æŠ€æœ¯ä¼˜åŠ¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7a12ce984734e55892cf1385b9fa787~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364485&amp;x-signature=h877JAI2ymGXev1G7hHc7T4VgCA%3D" alt="image.png" loading="lazy"/></p>
<p><strong>é‡ç‚¹ä¼˜åŒ–ï¼š</strong></p>
<ul>
<li>æ”¯æŒIndexÂ &amp;Â MetaÂ CacheÂ åŠŸèƒ½ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆä¿éšœå…ƒæ•°æ®ç¼“å­˜å‘½ä¸­ç‡ï¼Œå¤§å¤§æå‡æŸ¥è¯¢æ€§èƒ½</li>
<li>ç¼“å­˜è‡ªé€‚åº”IOæ¡†æ¶ï¼Œæ›´å¥½çš„å‡è¡¡ç£ç›˜å’ŒOSSæ•ˆç‡ï¼Œæé«˜ç¼“å­˜å‘½ä¸­ç‡</li>
<li>é«˜é¢‘å¯¼å…¥åœºæ™¯ï¼Œä¼˜åŒ–è°ƒåº¦ç®—æ³•ï¼Œä¿éšœä¸å€¾æ–œï¼Œæå‡å¯¼å…¥æ•ˆç‡</li>
<li>æµ·é‡Tabletè°ƒåº¦æƒ…å†µä¸‹ï¼Œä¼˜åŒ–sharedÂ balanceç®—æ³•ï¼Œåœ¨50+èŠ‚ç‚¹å¼¹æ€§ä¼¸ç¼©åœºæ™¯ä¸‹ï¼Œè¾¾åˆ°ç§’çº§å‡è¡¡</li>
<li>è½»é‡ETLåœºæ™¯ä¸‹ä¼˜åŒ–ç¼“å­˜ç©ºé—´ç®¡ç†æ¡†æ¶</li>
</ul>
<h3 data-id="heading-4">æ¹–ä»“åˆ†æåœºæ™¯ä¼˜åŒ–</h3>
<p>Stellaåœ¨Lakehouseåœºæ™¯ä¸‹æŸ¥è¯¢Paimonä¸‹æ€§èƒ½çš„æå‡ä¹Ÿéå¸¸æ˜æ˜¾ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23d881c2f56741c4b4a1b5d87d012399~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364485&amp;x-signature=mGZhcXXHwPXt5tJHYaUWY5LY61k%3D" alt="image.png" loading="lazy"/></p>
<p><strong>é‡ç‚¹ä¼˜åŒ–</strong></p>
<ul>
<li>å¤§è§„æ¨¡å…ƒæ•°æ®åœºæ™¯ä¸‹ï¼Œå®ç°åˆ†å¸ƒå¼å…ƒæ•°æ®è§£ææ¡†æ¶ï¼Œé¿å…å•ç‚¹ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½ã€‚</li>
<li>ä¼˜åŒ–å…ƒæ•°æ®è·å–æ€§èƒ½ï¼Œæ”¯æŒmanifestÂ cacheï¼Œæå‡æŸ¥è¯¢æ€§èƒ½åŠMVåˆ·æ–°æ•ˆç‡ã€‚</li>
<li>é‡æ„DeleteÂ Vectoråºåˆ—åŒ–æ¡†æ¶ï¼Œå¤§å¹…åº¦æå‡DVæŸ¥è¯¢æ€§èƒ½ã€‚</li>
<li>DLFÂ 2.5Â æ·±åº¦é›†æˆï¼Œä¸Openlakeæ–¹æ¡ˆæ— ç¼è¡”æ¥ã€‚</li>
</ul>
<p>é€šè¿‡<strong>ä¸DataÂ LakeÂ Formationçš„æ·±åº¦é›†æˆ</strong>ï¼Œç”¨æˆ·åªéœ€ç®€å•åˆ›å»ºcatalogå³å¯è®¿é—®DLFä¸­çš„æ•°æ®è¡¨ï¼Œæƒé™é…ç½®åœ¨DLFä¸­å³å¯è‡ªåŠ¨åŒæ­¥è‡³StarRocksï¼Œå®ç°çœŸæ­£çš„å³å¼€å³ç”¨ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6961b504626d4e60919da235efc4881c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364485&amp;x-signature=AuRWb8A%2FvwAR10J9iAJAeU6jCMM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">å…¨æ–‡æ£€ç´¢å‘å¸ƒ</h3>
<p>å…¨æ–°å…¨æ–‡æ£€ç´¢åŠŸèƒ½ç°å·²åœ¨å­˜ç®—ä¸€ä½“ä¸åˆ†ç¦»æ¶æ„ä¸­å…¨é¢æ”¯æŒï¼ŒåŸºäºÂ å…¨æ–‡å€’æ’ç´¢å¼•å®ç°é«˜æ•ˆæ–‡æœ¬æœç´¢ã€‚é€‚ç”¨äºæ—¥å¿—åˆ†æã€å•†å“æ ‡é¢˜åŒ¹é…ç­‰åœºæ™¯ã€‚ç›¸æ¯”æ—§ç‰ˆï¼ŒæŸ¥è¯¢æ€§èƒ½æå‡Â 3-5Â å€ï¼Œå¯¼å…¥æ›´å¿«ï¼Œå­˜å‚¨æˆæœ¬æ˜¾è‘—é™ä½ã€‚å…¨æ–‡æ£€ç´¢åŠŸèƒ½æ”¯æŒä¸»é”®è¡¨å’Œæ˜ç»†è¡¨ï¼Œç”¨æˆ·å¯åœ¨å»ºè¡¨æ—¶æˆ–å»ºè¡¨ååˆ›å»ºç´¢å¼•ï¼Œä½¿ç”¨matchã€match_allç­‰è¯­æ³•å®ç°å¤šæ ·åŒ–çš„æ–‡æœ¬æ£€ç´¢éœ€æ±‚ã€‚</p>
<h4 data-id="heading-6">å…¨æ–‡å€’æ’ç´¢å¼•ä½¿ç”¨æ–¹æ³•</h4>
<p><strong>å»ºè¡¨æ—¶åˆ›å»ºç´¢å¼•ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `t` (
  `k` <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT "",
  `v` STRING COMMENT "",
  INDEX idx (v) <span class="hljs-keyword">USING</span> GIN("parser" <span class="hljs-operator">=</span> "english")
) ENGINE<span class="hljs-operator">=</span>OLAP
DUPLICATE KEY(`k`)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(`k`) BUCKETS <span class="hljs-number">1</span>
PROPERTIES (
  "replicated_storage" <span class="hljs-operator">=</span> "false"
);
</code></pre>
<p><strong>å»ºè¡¨ååˆ›å»ºç´¢å¼•ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- Create Index After Create Table</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> t <span class="hljs-keyword">ADD</span> INDEX idx (v) <span class="hljs-keyword">USING</span> GIN( <span class="hljs-string">'parser'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'english'</span>);
</code></pre>
<p><strong>å…¨æ–‡æ£€ç´¢æŸ¥è¯¢ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- MATCH/MATCH_ANY</span>
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> testdb.http_logs 
<span class="hljs-keyword">where</span> request <span class="hljs-keyword">match</span> "images hm_bg";

<span class="hljs-comment">-- MATCH_ALL</span>
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> testdb.http_logs 
<span class="hljs-keyword">where</span> request match_all "images hm_bg";

<span class="hljs-comment">-- MATCH_PHRASE</span>
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> testdb.http_logs 
<span class="hljs-keyword">where</span> request match_phrase "GET /images";

<span class="hljs-comment">-- MATCH_PHRASE_PREFIX</span>
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> testdb.http_logs 
<span class="hljs-keyword">where</span> request match_phrase_prefix "GET /im";

<span class="hljs-comment">-- MATCH_PHRASE_EDGE</span>
<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> testdb.http_logs 
<span class="hljs-keyword">where</span> request match_phrase_edge <span class="hljs-string">'et images hm'</span>;
</code></pre>
<p>StellaÂ çš„å‘å¸ƒæ ‡å¿—ç€Â EMRÂ ServerlessÂ StarRocksÂ åœ¨ä¼ä¸šçº§æ•°æ®åˆ†æé¢†åŸŸè¿ˆå…¥æ–°çš„é‡Œç¨‹ç¢‘ã€‚ä»å®æ—¶æ•°ä»“åˆ°æ¹–ä»“åˆ†æï¼Œä»å…¨æ–‡æ£€ç´¢åˆ°å¤šä¸šåŠ¡éš”ç¦»ï¼ŒStellaÂ ä¸ºæ¯ä¸€ä¸ªåœºæ™¯éƒ½å¸¦æ¥äº†å®å®åœ¨åœ¨çš„æ€§èƒ½æå‡å’Œæˆæœ¬ä¼˜åŒ–ã€‚</p>
<p>ä¾æ‰˜äºåœ¨Â <strong>TPC-HÂ 10TÂ åŸºå‡†æµ‹è¯•ä¸­è¶…è¿‡Â 120%Â çš„æ€§èƒ½é£è·ƒ</strong>ï¼Œä»¥åŠåœ¨å¼€æ”¾æ¹–ä»“åœºæ™¯ä¸‹æå‡é«˜è¾¾Â <strong>12Â å€çš„å®æµ‹æŸ¥è¯¢ä¼˜åŠ¿</strong>ï¼ŒStellaÂ ä¸ä»…éªŒè¯äº†å…¶æŠ€æœ¯æ¶æ„çš„å…ˆè¿›æ€§ï¼Œæ›´å½°æ˜¾äº†é˜¿é‡Œäº‘åœ¨äº‘åŸç”Ÿæ•°æ®å¤„ç†é¢†åŸŸçš„æ·±åšç§¯ç´¯ä¸æŒç»­åˆ›æ–°èƒ½åŠ›ã€‚è¿™äº›æˆç»©èƒŒåï¼Œæ˜¯å­˜ç®—åˆ†ç¦»æ¶æ„ã€åˆ†å¸ƒå¼å…ƒæ•°æ®ç®¡ç†ã€æ™ºèƒ½ç¼“å­˜è°ƒåº¦ã€DeleteÂ VectorÂ ä¼˜åŒ–ç­‰æ ¸å¿ƒæŠ€æœ¯çš„å…¨é¢çªç ´ï¼Œä½¿å¾—Â StellaÂ èƒ½å¤Ÿä»å®¹åº”å¯¹è¶…å¤§è§„æ¨¡æ•°æ®ä¸‹çš„å¤æ‚åˆ†ææŒ‘æˆ˜ã€‚</p>
<p>é¢å‘æœªæ¥ï¼ŒStellaÂ å°†ç»§ç»­æ·±åŒ–åœ¨Â LakehouseÂ æ¶æ„ã€å®æ—¶åŒ–ã€æ™ºèƒ½åŒ–æ–¹å‘çš„æ¢ç´¢ï¼Œä¸ºä¼ä¸šæ„å»ºç»Ÿä¸€ã€é«˜æ•ˆã€ä½æˆæœ¬çš„æ•°æ®åˆ†æåº•åº§æä¾›æ›´å¼ºæœ‰åŠ›çš„æ”¯æ’‘ã€‚æ— è®ºæ˜¯é‡‘èã€ç”µå•†ã€äº’è”ç½‘è¿˜æ˜¯åˆ¶é€ ä¸šå®¢æˆ·ï¼Œéƒ½å°†å€ŸåŠ©StellaÂ å®ç°æ›´å¿«é€Ÿçš„å†³ç­–å“åº”ã€æ›´çµæ´»çš„èµ„æºè°ƒåº¦ä¸æ›´å¯è§‚çš„æ€»ä½“æ‹¥æœ‰æˆæœ¬ï¼ˆTCOï¼‰ä¼˜åŒ–ã€‚EMRÂ ServerlessÂ StarRocksÂ æ­£ä»¥å¼€æºå…¼å®¹ä¸ºåŸºçŸ³ï¼Œä»¥ä¼ä¸šçº§èƒ½åŠ›ä¸ºæ ¸å¿ƒï¼Œå¼•é¢†äº‘åŸç”Ÿæ•°æ®åˆ†æçš„æ–°æ—¶ä»£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®é™…å¼€å‘ä¸­ | ä¸ || çš„ä½¿ç”¨æ–¹æ³•åŠç»„ä»¶å°è£…æ–¹æ¡ˆè§£æ]]></title>    <link>https://juejin.cn/post/7570500819888930859</link>    <guid>https://juejin.cn/post/7570500819888930859</guid>    <pubDate>2025-11-10T06:15:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570500819888930859" data-draft-id="7514645274707853366" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®é™…å¼€å‘ä¸­ | ä¸ || çš„ä½¿ç”¨æ–¹æ³•åŠç»„ä»¶å°è£…æ–¹æ¡ˆè§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-10T06:15:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·954515681162"/> <meta itemprop="url" content="https://juejin.cn/user/898732860638087"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®é™…å¼€å‘ä¸­ | ä¸ || çš„ä½¿ç”¨æ–¹æ³•åŠç»„ä»¶å°è£…æ–¹æ¡ˆè§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/898732860638087/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·954515681162
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:15:31.000Z" title="Mon Nov 10 2025 06:15:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€åŸºæœ¬ä½¿ç”¨æ–¹æ³•</h3>
<ol>
<li><strong>æŒ‰ä½æˆ–è¿ç®—ç¬¦ï¼ˆ|ï¼‰</strong>
å¸¸ç”¨äºäºŒè¿›åˆ¶ä½æ“ä½œï¼Œå¦‚æƒé™æ§åˆ¶ã€çŠ¶æ€åˆå¹¶ç­‰åœºæ™¯ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æƒé™æ§åˆ¶ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">READ</span> = <span class="hljs-number">1</span>;    <span class="hljs-comment">// äºŒè¿›åˆ¶: 0001</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">WRITE</span> = <span class="hljs-number">2</span>;   <span class="hljs-comment">// äºŒè¿›åˆ¶: 0010</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DELETE</span> = <span class="hljs-number">4</span>;  <span class="hljs-comment">// äºŒè¿›åˆ¶: 0100</span>

<span class="hljs-comment">// ç»„åˆæƒé™</span>
<span class="hljs-keyword">let</span> userPermission = <span class="hljs-variable constant_">READ</span> | <span class="hljs-variable constant_">WRITE</span>; <span class="hljs-comment">// 0011 = 3</span>

<span class="hljs-comment">// æ£€æŸ¥æƒé™</span>
<span class="hljs-keyword">if</span> (userPermission &amp; <span class="hljs-variable constant_">READ</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”¨æˆ·æ‹¥æœ‰è¯»å–æƒé™"</span>);
}
</code></pre>
<ol start="2">
<li><strong>é€»è¾‘æˆ–è¿ç®—ç¬¦ï¼ˆ||ï¼‰</strong>
å¸¸ç”¨äºæ¡ä»¶åˆ¤æ–­ä¸­çš„çŸ­è·¯æ±‚å€¼ï¼Œæˆ–è®¾ç½®é»˜è®¤å€¼ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çŸ­è·¯æ±‚å€¼ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateInput</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">if</span> (!value || value.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"è¾“å…¥ä¸èƒ½ä¸ºç©º"</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-string">"éªŒè¯é€šè¿‡"</span>;
}

<span class="hljs-comment">// é»˜è®¤å€¼è®¾ç½®</span>
<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">timeout</span>: options.<span class="hljs-property">timeout</span> || <span class="hljs-number">3000</span>,
  <span class="hljs-attr">retries</span>: options.<span class="hljs-property">retries</span> || <span class="hljs-number">3</span>
};
</code></pre>
<h3 data-id="heading-1">äºŒã€ç»„ä»¶å°è£…æ–¹æ¡ˆ</h3>
<ol>
<li><strong>ä½æ“ä½œå·¥å…·ç±»å°è£…</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BitwiseUtils</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {}

  <span class="hljs-comment">// åˆå¹¶å¤šä¸ªæ ‡å¿—ä½</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">combineFlags</span>(<span class="hljs-params">...flags</span>) {
    <span class="hljs-keyword">return</span> flags.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">result, flag</span>) =&gt;</span> result | flag, <span class="hljs-number">0</span>);
  }

  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªæ ‡å¿—ä½</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">hasFlag</span>(<span class="hljs-params">value, flag</span>) {
    <span class="hljs-keyword">return</span> (value &amp; flag) === flag;
  }

  <span class="hljs-comment">// ç§»é™¤æŸä¸ªæ ‡å¿—ä½</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">removeFlag</span>(<span class="hljs-params">value, flag</span>) {
    <span class="hljs-keyword">return</span> value &amp; ~flag;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> permissions = <span class="hljs-title class_">BitwiseUtils</span>.<span class="hljs-title function_">combineFlags</span>(<span class="hljs-variable constant_">READ</span>, <span class="hljs-variable constant_">WRITE</span>);
<span class="hljs-title class_">BitwiseUtils</span>.<span class="hljs-title function_">hasFlag</span>(permissions, <span class="hljs-variable constant_">DELETE</span>); <span class="hljs-comment">// false</span>
</code></pre>
<ol start="2">
<li><strong>é€»è¾‘åˆ¤æ–­ç»„ä»¶å°è£…ï¼ˆReactç¤ºä¾‹ï¼‰</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ConditionalComponent</span>(<span class="hljs-params">{ condition, left, right }</span>) {
  <span class="hljs-keyword">return</span> condition ? left : right;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
&lt;<span class="hljs-title class_">ConditionalComponent</span> 
  condition={user.<span class="hljs-property">isAdmin</span> || user.<span class="hljs-title function_">hasPermission</span>(<span class="hljs-string">"edit"</span>)}
  left={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AdminPanel</span> /&gt;</span></span>}
  right={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserPanel</span> /&gt;</span></span>}
/&gt;
</code></pre>
<h3 data-id="heading-2">ä¸‰ã€è¿›é˜¶åº”ç”¨åœºæ™¯</h3>
<ol>
<li><strong>æ€§èƒ½ä¼˜åŒ–ï¼šçŸ­è·¯æ±‚å€¼çš„åº”ç”¨</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¿å…ä¸å¿…è¦çš„å‡½æ•°è°ƒç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">expensiveOperation</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ‰§è¡Œè€—æ—¶æ“ä½œ"</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-comment">// å½“isEnabledä¸ºfalseæ—¶ï¼Œä¸ä¼šæ‰§è¡ŒexpensiveOperation</span>
<span class="hljs-keyword">if</span> (isEnabled || <span class="hljs-title function_">expensiveOperation</span>()) {
  <span class="hljs-comment">// å¤„ç†é€»è¾‘</span>
}
</code></pre>
<ol start="2">
<li><strong>äºŒè¿›åˆ¶çŠ¶æ€æœº</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StateMachine</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = <span class="hljs-number">0</span>;
  }

  <span class="hljs-comment">// è®¾ç½®çŠ¶æ€</span>
  <span class="hljs-title function_">setState</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> |= state;
  }

  <span class="hljs-comment">// æ¸…é™¤çŠ¶æ€</span>
  <span class="hljs-title function_">clearState</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> &amp;= ~state;
  }

  <span class="hljs-comment">// æ£€æŸ¥çŠ¶æ€</span>
  <span class="hljs-title function_">isActive</span>(<span class="hljs-params">state</span>) {
    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> &amp; state) !== <span class="hljs-number">0</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> machine = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateMachine</span>();
machine.<span class="hljs-title function_">setState</span>(<span class="hljs-variable constant_">LOADING</span>);
machine.<span class="hljs-title function_">isActive</span>(<span class="hljs-variable constant_">LOADING</span>); <span class="hljs-comment">// true</span>
</code></pre>
<h3 data-id="heading-3">å››ã€æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>è¿ç®—ç¬¦ä¼˜å…ˆçº§é—®é¢˜</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šå¯èƒ½å¯¼è‡´é€»è¾‘é”™è¯¯</span>
<span class="hljs-keyword">if</span> (a || b &amp; c) { ... }

<span class="hljs-comment">// æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨æ‹¬å·æ˜ç¡®ä¼˜å…ˆçº§</span>
<span class="hljs-keyword">if</span> (a || (b &amp; c)) { ... }
</code></pre>
<ol start="2">
<li><strong>ç±»å‹è½¬æ¢é™·é˜±</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éå¸ƒå°”å€¼åœ¨é€»è¾‘è¿ç®—ä¸­çš„è½¬æ¢</span>
<span class="hljs-number">0</span> || <span class="hljs-number">5</span>; <span class="hljs-comment">// è¿”å›5ï¼ˆçœŸå€¼ï¼‰</span>
<span class="hljs-string">''</span> || <span class="hljs-string">'default'</span>; <span class="hljs-comment">// è¿”å›'default'</span>
</code></pre>
<p>é€šè¿‡åˆç†å°è£…å’Œä½¿ç”¨è¿™ä¸¤ä¸ªè¿ç®—ç¬¦ï¼Œå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼ŒåŒæ—¶é¿å…æ½œåœ¨çš„é€»è¾‘é”™è¯¯ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„è¿ç®—ç¬¦ï¼Œå¹¶é€šè¿‡å·¥å…·ç±»æˆ–ç»„ä»¶åŒ–çš„æ–¹å¼å°†é€šç”¨é€»è¾‘å°è£…å¤ç”¨ã€‚</p>
<hr/>
<p>JavaScript, å‰ç«¯å¼€å‘ï¼Œé€»è¾‘è¿ç®—ç¬¦ï¼Œä½è¿ç®—ç¬¦ï¼Œç»„ä»¶å°è£…ï¼Œç»„ä»¶åŒ–å¼€å‘ï¼Œå‰ç«¯</p>
<hr/>
<hr/>
<p>å‡†å¤‡äº†ä¸€äº›é¢è¯•èµ„æ–™ï¼Œè¯·åœ¨ä»¥ä¸‹é“¾æ¥ä¸­è·å–
<a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.quark.cn%2Fs%2F4459235fee85" target="_blank" title="https://pan.quark.cn/s/4459235fee85" ref="nofollow noopener noreferrer">pan.quark.cn/s/4459235feâ€¦</a></p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”µå­å‘ç¥¨è§£æå·¥å…·-golangæœåŠ¡ç«¯å¼€å‘æ¡ˆä¾‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7570648023110959142</link>    <guid>https://juejin.cn/post/7570648023110959142</guid>    <pubDate>2025-11-10T07:11:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570648023110959142" data-draft-id="7570491473034035209" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”µå­å‘ç¥¨è§£æå·¥å…·-golangæœåŠ¡ç«¯å¼€å‘æ¡ˆä¾‹è¯¦è§£"/> <meta itemprop="keywords" content="Go"/> <meta itemprop="datePublished" content="2025-11-10T07:11:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰å¤´é—ªäº®äº®"/> <meta itemprop="url" content="https://juejin.cn/user/1333047014199326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”µå­å‘ç¥¨è§£æå·¥å…·-golangæœåŠ¡ç«¯å¼€å‘æ¡ˆä¾‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1333047014199326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰å¤´é—ªäº®äº®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T07:11:05.000Z" title="Mon Nov 10 2025 07:11:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”µå­å‘ç¥¨è§£æå·¥å…·-golangæœåŠ¡ç«¯å¼€å‘æ¡ˆä¾‹è¯¦è§£</h2>
<h3 data-id="heading-1">1. é¡¹ç›®ç»“æ„</h3>
<p>æœ¬é¡¹ç›®æ˜¯ä¸Šä¸€ç¯‡ã€# ç”µå­å‘ç¥¨è§£æå·¥å…·-c#æ¡Œé¢åº”ç”¨å¼€å‘æ¡ˆä¾‹è¯¦è§£ã€‘çš„æœåŠ¡ç«¯å¼€å‘æ¡ˆä¾‹è¯¦è§£ï¼Œé‡‡ç”¨MVCæ¶æ„æ¨¡å¼è®¾è®¡ï¼Œä¸»è¦æä¾›ç”µå­å‘ç¥¨OCRè¯†åˆ«ã€PDF/OFDæ–‡ä»¶é¢„è§ˆç­‰åŠŸèƒ½ã€‚é¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œå„æ¨¡å—èŒè´£åˆ†æ˜ã€‚</p>
<p>é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">â”œâ”€â”€ main.go              <span class="hljs-comment"># ä¸»ç¨‹åºå…¥å£æ–‡ä»¶</span>
â”œâ”€â”€ config/              <span class="hljs-comment"># é…ç½®ç›¸å…³ç›®å½•</span>
â”‚   â””â”€â”€ config.go        <span class="hljs-comment"># é…ç½®åŠ è½½ä¸è§£æ</span>
â”œâ”€â”€ controller/          <span class="hljs-comment"># æ§åˆ¶å™¨å±‚ï¼Œå¤„ç†è¯·æ±‚</span>
â”‚   â”œâ”€â”€ api/             <span class="hljs-comment"># APIæ§åˆ¶å™¨</span>
â”‚   â””â”€â”€ <span class="hljs-built_in">test</span>/            <span class="hljs-comment"># æµ‹è¯•æ§åˆ¶å™¨</span>
â”œâ”€â”€ datasource/          <span class="hljs-comment"># æ•°æ®æºè¿æ¥</span>
â”‚   â””â”€â”€ engine.go        <span class="hljs-comment"># æ•°æ®åº“å¼•æ“åˆå§‹åŒ–</span>
â”œâ”€â”€ inference/           <span class="hljs-comment"># OCRæ¨¡å‹å’Œé…ç½®</span>
â”œâ”€â”€ logger/              <span class="hljs-comment"># æ—¥å¿—ç³»ç»Ÿ</span>
â”‚   â””â”€â”€ log.go           <span class="hljs-comment"># æ—¥å¿—å¤„ç†é€»è¾‘</span>
â”œâ”€â”€ model/               <span class="hljs-comment"># æ•°æ®æ¨¡å‹</span>
â”œâ”€â”€ service/             <span class="hljs-comment"># æœåŠ¡å±‚ï¼Œä¸šåŠ¡é€»è¾‘</span>
â”œâ”€â”€ static/              <span class="hljs-comment"># é™æ€èµ„æºæ–‡ä»¶</span>
â”‚   â”œâ”€â”€ css/             <span class="hljs-comment"># æ ·å¼æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ js/              <span class="hljs-comment"># JavaScriptæ–‡ä»¶</span>
â”‚   â””â”€â”€ views/           <span class="hljs-comment"># HTMLè§†å›¾æ–‡ä»¶</span>
â””â”€â”€ utils/               <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
</code></pre>
<p>ä¸»è¦æ¨¡å—èŒè´£ï¼š</p>
<ul>
<li><strong>main.go</strong>ï¼šåº”ç”¨ç¨‹åºå…¥å£ï¼Œåˆå§‹åŒ–é…ç½®ã€ä¸­é—´ä»¶ã€è·¯ç”±æ³¨å†Œç­‰</li>
<li><strong>config/</strong>ï¼šå¤„ç†åº”ç”¨é…ç½®ï¼ŒåŒ…æ‹¬æ•°æ®åº“è¿æ¥ã€æœåŠ¡å™¨ç«¯å£ç­‰</li>
<li><strong>controller/</strong>ï¼šå¤„ç†HTTPè¯·æ±‚ï¼Œè°ƒç”¨ç›¸åº”çš„æœåŠ¡å±‚é€»è¾‘</li>
<li><strong>datasource/</strong>ï¼šè´Ÿè´£æ•°æ®åº“è¿æ¥å’Œä¼šè¯ç®¡ç†</li>
<li><strong>inference/</strong>ï¼šå­˜æ”¾PaddleOCRæ¨¡å‹æ–‡ä»¶å’Œé…ç½®</li>
<li><strong>logger/</strong>ï¼šå®ç°æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œæ”¯æŒæ–‡ä»¶æ—¥å¿—</li>
<li><strong>static/</strong>ï¼šå­˜æ”¾å‰ç«¯é™æ€èµ„æºï¼ŒåŒ…æ‹¬Vue3ç›¸å…³æ–‡ä»¶å’ŒHTMLè§†å›¾</li>
</ul>
<h3 data-id="heading-2">2. é¡¹ç›®åº”ç”¨æŠ€æœ¯æ¶æ„åŠåº”ç”¨åŒ…ä»‹ç»</h3>
<h4 data-id="heading-3">2.1 æŠ€æœ¯æ ˆæ¦‚è¿°</h4>
<p>æœ¬é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆæ„å»ºï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>













































<table><thead><tr><th>æŠ€æœ¯/æ¡†æ¶</th><th>ç‰ˆæœ¬/æ¥æº</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>Go</td><td>-</td><td>ä¸»è¦å¼€å‘è¯­è¨€</td></tr><tr><td>Iris</td><td>v12</td><td>Webæ¡†æ¶</td></tr><tr><td>PaddleOCR</td><td>-</td><td>å…‰å­¦å­—ç¬¦è¯†åˆ«</td></tr><tr><td>Vue3</td><td>-</td><td>å‰ç«¯æ¡†æ¶</td></tr><tr><td>XORM</td><td>-</td><td>ORMæ¡†æ¶</td></tr><tr><td>MSSQL</td><td>-</td><td>æ•°æ®åº“</td></tr><tr><td>Zap</td><td>-</td><td>æ—¥å¿—åº“</td></tr></tbody></table>
<h4 data-id="heading-4">2.2 é¡¹ç›®åŒ…å¼•ç”¨åˆ—è¡¨åŠæ ¸å¿ƒæŠ€æœ¯åŒ…ä»‹ç»</h4>
<h4 data-id="heading-5">2.2.1 å¼•ç”¨åŒ…åˆ—è¡¨</h4>
<p>ä»¥ä¸‹æ˜¯é¡¹ç›®ä¸­ä¸»è¦å¼•ç”¨çš„åŒ…åˆ—è¡¨ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç±»ï¼š</p>
<h5 data-id="heading-6">1. åŸºç¡€åŠŸèƒ½åŒ…</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">"encoding/base64"</span>  <span class="hljs-comment">// Base64ç¼–ç è§£ç å¤„ç†</span>
    <span class="hljs-string">"fmt"</span>               <span class="hljs-comment">// æ ¼å¼åŒ–è¾“å‡º</span>
    <span class="hljs-string">"io/ioutil"</span>         <span class="hljs-comment">// æ–‡ä»¶è¯»å†™æ“ä½œ</span>
    <span class="hljs-string">"net/http"</span>          <span class="hljs-comment">// HTTPç½‘ç»œé€šä¿¡</span>
    <span class="hljs-string">"os"</span>                <span class="hljs-comment">// æ“ä½œç³»ç»Ÿæ¥å£</span>
    <span class="hljs-string">"os/exec"</span>           <span class="hljs-comment">// æ‰§è¡Œå¤–éƒ¨å‘½ä»¤</span>
    <span class="hljs-string">"path/filepath"</span>     <span class="hljs-comment">// æ–‡ä»¶è·¯å¾„å¤„ç†</span>
    <span class="hljs-string">"strconv"</span>           <span class="hljs-comment">// å­—ç¬¦ä¸²ä¸åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢</span>
    <span class="hljs-string">"strings"</span>           <span class="hljs-comment">// å­—ç¬¦ä¸²å¤„ç†å‡½æ•°</span>
    <span class="hljs-string">"sync"</span>              <span class="hljs-comment">// å¹¶å‘æ§åˆ¶</span>
    <span class="hljs-string">"time"</span>              <span class="hljs-comment">// æ—¶é—´å¤„ç†</span>
    <span class="hljs-string">"io"</span>                <span class="hljs-comment">// è¾“å…¥è¾“å‡ºæ“ä½œ</span>
    <span class="hljs-string">"unicode"</span>           <span class="hljs-comment">// Unicodeå­—ç¬¦å¤„ç†</span>
)
</code></pre>
<h5 data-id="heading-7">2. Webæ¡†æ¶ä¸ä¸­é—´ä»¶</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">"github.com/kataras/iris/v12"</span>               <span class="hljs-comment">// ä¸»Webæ¡†æ¶</span>
    <span class="hljs-string">"github.com/kataras/iris/v12/context"</span>       <span class="hljs-comment">// Irisä¸Šä¸‹æ–‡</span>
    <span class="hljs-string">"github.com/kataras/iris/v12/middleware/logger"</span> <span class="hljs-comment">// æ—¥å¿—ä¸­é—´ä»¶</span>
    <span class="hljs-string">"github.com/kataras/iris/v12/mvc"</span>           <span class="hljs-comment">// MVCæ¶æ„æ”¯æŒ</span>
    <span class="hljs-string">"github.com/kataras/iris/v12/sessions"</span>      <span class="hljs-comment">// ä¼šè¯ç®¡ç†</span>
)
</code></pre>
<h5 data-id="heading-8">3. æ—¥å¿—ç³»ç»Ÿ</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">"go.uber.org/zap"</span>            <span class="hljs-comment">// é«˜æ€§èƒ½æ—¥å¿—åº“</span>
    mlog <span class="hljs-string">"invoiceServer/logger"</span>   <span class="hljs-comment">// è‡ªå®šä¹‰æ—¥å¿—æ¨¡å—</span>
)
</code></pre>
<h5 data-id="heading-9">4. æ•°æ®åº“ç›¸å…³</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">"github.com/denisenkom/go-mssqldb"</span> <span class="hljs-comment">// SQL Serveræ•°æ®åº“é©±åŠ¨</span>
    <span class="hljs-string">"github.com/go-sql-driver/mysql"</span>   <span class="hljs-comment">// MySQLæ•°æ®åº“é©±åŠ¨</span>
    <span class="hljs-string">"github.com/go-xorm/xorm"</span>          <span class="hljs-comment">// ORMæ¡†æ¶</span>
    <span class="hljs-string">"xorm.io/core"</span>                     <span class="hljs-comment">// XORMæ ¸å¿ƒåº“</span>
    <span class="hljs-string">"invoiceServer/datasource"</span>         <span class="hljs-comment">// è‡ªå®šä¹‰æ•°æ®æºæ¨¡å—</span>
)
</code></pre>
<h5 data-id="heading-10">5. å·¥å…·ç±»åº“</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">"github.com/olekukonko/tablewriter"</span> <span class="hljs-comment">// è¡¨æ ¼è¾“å‡ºæ ¼å¼åŒ–</span>
    <span class="hljs-string">"golang.org/x/exp/rand"</span>            <span class="hljs-comment">// æ‰©å±•éšæœºæ•°ç”Ÿæˆ</span>
    <span class="hljs-string">"golang.org/x/time/rate"</span>           <span class="hljs-comment">// é€Ÿç‡é™åˆ¶</span>
)
</code></pre>
<h5 data-id="heading-11">6. ç³»ç»Ÿè°ƒç”¨ä¸Cé›†æˆ</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">"syscall"</span> <span class="hljs-comment">// ç³»ç»Ÿè°ƒç”¨ï¼ˆç”¨äºè°ƒç”¨DLLï¼‰</span>
    <span class="hljs-string">"unsafe"</span>  <span class="hljs-comment">// ä¸å®‰å…¨æ“ä½œï¼ˆç”¨äºDLLæ¥å£è°ƒç”¨ï¼‰</span>
    <span class="hljs-string">"C"</span>       <span class="hljs-comment">// Cè¯­è¨€é›†æˆ</span>
)
</code></pre>
<h5 data-id="heading-12">7. é¡¹ç›®å†…éƒ¨åŒ…</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
    <span class="hljs-string">"invoiceServer/config"</span>                 <span class="hljs-comment">// é…ç½®ç®¡ç†</span>
    apiController <span class="hljs-string">"invoiceServer/controller/api"</span> <span class="hljs-comment">// APIæ§åˆ¶å™¨</span>
    testController <span class="hljs-string">"invoiceServer/controller/test"</span> <span class="hljs-comment">// æµ‹è¯•æ§åˆ¶å™¨</span>
    testService <span class="hljs-string">"invoiceServer/service/test"</span> <span class="hljs-comment">// æµ‹è¯•æœåŠ¡</span>
)
</code></pre>
<p>ä»¥ä¸ŠåŒ…åˆ—è¡¨åŸºäºé¡¹ç›®ä¸­å®é™…å¼•ç”¨çš„ä¾èµ–ï¼Œä¸»è¦ç”¨äºå®ç°WebæœåŠ¡ã€OCRè¯†åˆ«ã€æ•°æ®åº“æ“ä½œã€æ—¥å¿—ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<h5 data-id="heading-13">2.2.2 Iris Webæ¡†æ¶</h5>
<p>Irisæ˜¯ä¸€ä¸ªé«˜æ•ˆã€æ¨¡å—åŒ–ã€åŠŸèƒ½ä¸°å¯Œçš„Go Webæ¡†æ¶ï¼Œæä¾›äº†è·¯ç”±ã€ä¸­é—´ä»¶ã€è§†å›¾æ¨¡æ¿ç­‰å®Œæ•´çš„Webå¼€å‘åŠŸèƒ½ã€‚é¡¹ç›®ä¸­ä½¿ç”¨Irisæ„å»ºRESTful APIï¼Œå¤„ç†HTTPè¯·æ±‚å’Œå“åº”ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Irisæ¡†æ¶åˆå§‹åŒ–ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">newApp</span><span class="hljs-params">()</span></span> *iris.Application {
    <span class="hljs-comment">//æ–°å»ºirisæ¡†æ¶app</span>
    app := iris.New()
    <span class="hljs-comment">//æ³¨å†Œé™æ€èµ„æº</span>
    app.HandleDir(<span class="hljs-string">"."</span>, <span class="hljs-string">"./static"</span>)
    <span class="hljs-comment">//æ³¨å†Œè§†å›¾æ–‡ä»¶</span>
    tmpl := iris.HTML(<span class="hljs-string">"./static/views"</span>, <span class="hljs-string">".html"</span>)
    tmpl.Delims(<span class="hljs-string">"{{"</span>, <span class="hljs-string">"}}"</span>)
    tmpl.Reload(<span class="hljs-literal">true</span>)
    app.RegisterView(tmpl)
    <span class="hljs-comment">// å…¶ä»–é…ç½®...</span>
    <span class="hljs-keyword">return</span> app
}
</code></pre>
<h5 data-id="heading-14">2.2.3 PaddleOCR</h5>
<p>æœ¬é¡¹ç›®é€šè¿‡è°ƒç”¨PaddleOCR.dllåŠ¨æ€åº“å®ç°å‘ç¥¨å›¾åƒæ–‡å­—è¯†åˆ«åŠŸèƒ½ã€‚</p>
<ul>
<li>PaddleOCR.dllåŠ¨æ€åº“æ˜¯å¹¿å·è‹±ç”°ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸åŸºäºç™¾åº¦å¼€æºçš„PaddleOCRå·¥å…·åº“å°è£…çš„äºŒæ¬¡å¼€å‘ç‰ˆæœ¬ï¼Œæ”¯æŒWindowså¹³å°ä¸‹çš„Goè¯­è¨€è°ƒç”¨ã€‚</li>
<li>å¹¿å·è‹±ç”°ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸æä¾›ä¸“ä¸šçš„ç™¾åº¦å¼€æºçš„PaddleOCRå·¥å…·åº“å°è£…äºŒæ¬¡å¼€å‘æœåŠ¡ï¼Œæ”¯æŒå®šåˆ¶åŒ–éœ€æ±‚ã€‚</li>
<li>æœ¬é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯cpuå…è´¹ç‰ˆæœ¬çš„PaddleOCRï¼Œå¦‚éœ€è¦å®šåˆ¶åŒ–éœ€æ±‚ï¼Œå¯è‡ªè¡Œè”ç³»å¹¿å·è‹±ç”°ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸ï¼Œè´­ä¹°åŠ é€Ÿç‰ˆæœ¬ã€‚</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino">å¹¿å·è‹±ç”°ä¿¡æ¯ç§‘æŠ€æœ‰é™å…¬å¸                  
https:<span class="hljs-comment">//www.yingtianit.com/               </span>
QQç¾¤ï¼š<span class="hljs-number">318860399</span> å®šåˆ¶å¼€å‘QQï¼š<span class="hljs-number">277784829</span>         
</code></pre>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// PaddleOCRåˆå§‹åŒ–ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> {
    dll, _ := syscall.LoadDLL(<span class="hljs-string">"PaddleOCR.dll"</span>)        <span class="hljs-comment">//åŠ è½½PaddleOCR.dllåŠ¨æ€åº“æ–‡ä»¶</span>
    Initjson, _ := dll.FindProc(<span class="hljs-string">"Initializejson"</span>)     <span class="hljs-comment">//æŸ¥æ‰¾åŠ¨æ€åº“çš„æ¥å£å‡½æ•°</span>
    detect, _ := dll.FindProc(<span class="hljs-string">"Detect"</span>)                <span class="hljs-comment">//æŸ¥æ‰¾åŠ¨æ€åº“çš„æ¥å£å‡½æ•°</span>
    <span class="hljs-comment">// è¯»å–é…ç½®æ–‡ä»¶</span>
    jsonconfig, err := ioutil.ReadFile(root + <span class="hljs-string">"\\inference\\PaddleOCR.config.json"</span>)
    <span class="hljs-comment">// åˆå§‹åŒ–PaddleOCR</span>
    Initjson.Call(strPtr(root+<span class="hljs-string">"\\inference\\ch_PP-OCRv4_det_infer"</span>),
        strPtr(root+<span class="hljs-string">"\\inference\\ch_ppocr_mobile_v2.0_cls_infer"</span>),
        strPtr(root+<span class="hljs-string">"\\inference\\ch_PP-OCRv4_rec_infer"</span>),
        strPtr(root+<span class="hljs-string">"\\inference\\ppocr_keys.txt"</span>), strPtr(<span class="hljs-type">string</span>(jsonconfig)))
}
</code></pre>
<h5 data-id="heading-15">2.2.4 XORM</h5>
<p>XORMæ˜¯ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„Goè¯­è¨€ORMåº“ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ã€‚é¡¹ç›®ä¸­ä½¿ç”¨XORMä¸MSSQLæ•°æ®åº“è¿›è¡Œäº¤äº’ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// XORMåˆå§‹åŒ–ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewMsSqlEngine</span><span class="hljs-params">()</span></span> *xorm.Engine {
    <span class="hljs-comment">//è·å–é…ç½®</span>
    initConfig := config.InitConfig()
    database := initConfig.DbMsSql2008
    <span class="hljs-comment">//æ„å»ºè¿æ¥å­—ç¬¦ä¸²</span>
    dataSourceName := <span class="hljs-string">"server="</span> + database.Host + <span class="hljs-string">";database="</span> + database.Database + <span class="hljs-string">";user id="</span> + database.User + <span class="hljs-string">";password="</span> + database.Pwd + <span class="hljs-string">";port="</span> + database.Port + <span class="hljs-string">";encrypt=disable"</span>
    <span class="hljs-comment">//åˆ›å»ºæ•°æ®åº“å¼•æ“</span>
    engine, err := xorm.NewEngine(database.Drive, dataSourceName)
    <span class="hljs-comment">//é…ç½®è¿æ¥æ± </span>
    engine.SetMaxOpenConns(<span class="hljs-number">2000</span>)
    engine.SetMaxIdleConns(<span class="hljs-number">1000</span>)
    engine.SetConnMaxLifetime(<span class="hljs-number">60</span>)
    <span class="hljs-keyword">return</span> engine
}
</code></pre>
<h5 data-id="heading-16">2.2.5 Zapæ—¥å¿—åº“</h5>
<p>Zapæ˜¯Uberå¼€æºçš„é«˜æ€§èƒ½æ—¥å¿—åº“ï¼Œæä¾›ç»“æ„åŒ–æ—¥å¿—è®°å½•åŠŸèƒ½ã€‚é¡¹ç›®ä¸­ä½¿ç”¨Zapè®°å½•ç³»ç»Ÿè¿è¡Œæ—¥å¿—ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Zapæ—¥å¿—åˆå§‹åŒ–ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">InitLogger</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> err <span class="hljs-type">error</span>
    Logger, err = zap.NewProduction()
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(err)
    }
}
</code></pre>
<h3 data-id="heading-17">3. é¡¹ç›®åŠŸèƒ½è°ƒç”¨æµç¨‹å›¾</h3>
<h4 data-id="heading-18">3.1 PDF/OFDæ–‡ä»¶åœ¨çº¿é¢„è§ˆæµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å®¢æˆ·ç«¯è¯·æ±‚PDF/OFDé¢„è§ˆé¡µé¢] --&gt; B[æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚]
    B --&gt; C[è¿”å›PDF/OFDé¢„è§ˆHTMLé¡µé¢]
    C --&gt; D[å‰ç«¯åŠ è½½PDF.js/OFD.jsåº“]
    D --&gt; E[å‘é€æ–‡ä»¶è¯·æ±‚]
    E --&gt; F[æœåŠ¡å™¨è¿”å›æ–‡ä»¶å†…å®¹]
    F --&gt; G[å‰ç«¯æ¸²æŸ“å¹¶æ˜¾ç¤ºæ–‡ä»¶]
</code></pre>
<h4 data-id="heading-19">3.2 æ¥æ”¶å›¾ç‰‡å¹¶è°ƒç”¨PaddleOCRè§£ææµç¨‹</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å®¢æˆ·ç«¯ä¸Šä¼ å›¾ç‰‡/Base64æ•°æ®] --&gt; B[æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚]
    B --&gt; C{æ•°æ®æ ¼å¼}
    C --&gt;|Base64| D[è§£ç Base64æ•°æ®]
    C --&gt;|æ–‡ä»¶| E[ä¿å­˜ä¸´æ—¶æ–‡ä»¶]
    D --&gt; F[åˆ›å»ºä¸´æ—¶æ–‡ä»¶]
    E --&gt; G[è¯»å–æ–‡ä»¶å†…å®¹]
    F --&gt; G
    G --&gt; H[è°ƒç”¨PaddleOCR.dllè¿›è¡Œè¯†åˆ«]
    H --&gt; I[å¤„ç†è¯†åˆ«ç»“æœ]
    I --&gt; J[è¿”å›JSONæ ¼å¼ç»“æœ]
</code></pre>
<p/>
<h3 data-id="heading-20">4. é¡¹ç›®è¿è¡Œæ•ˆæœå›¾</h3>
<p>è¿™é‡Œæ˜¯é¡¹ç›®è¿è¡Œæ•ˆæœå›¾</p>
<ol>
<li>****ï¼šæœåŠ¡å¯åŠ¨</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21511001da3541c599b6a58ad6ac4645~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364433&amp;x-signature=IFKokMsUXhOFUPz8Byd0ylGt1uU%3D" alt="å¯åŠ¨.PNG" loading="lazy"/>
2. <strong>ä¸»é¡µé¢</strong>ï¼šå±•ç¤ºhtmlä¸­vue3.jsæ–‡ä»¶å¼•ç”¨å®ç°ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢ç•Œé¢ï¼Œæ”¯æŒæŒ‰IDã€åç§°ã€é‚®ç®±æœç´¢ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4f4ab15007f477fb1730786e3279941~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364433&amp;x-signature=vYTat57bY7UsLsSXzxo6UW9x%2FmU%3D" alt="index.PNG" loading="lazy"/>
3. <strong>PDF/OFDé¢„è§ˆé¡µé¢</strong>ï¼šæ”¯æŒåœ¨çº¿é¢„è§ˆPDFå’ŒOFDæ ¼å¼çš„ç”µå­å‘ç¥¨æ–‡ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/762285a44e4e48949be63aae23cd3c21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364433&amp;x-signature=GE5dSIhoCFE2V3LhPx2xeZHzhP4%3D" alt="pdfview.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1478e6fdf0a4eab9c731cfd4ec3286c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364433&amp;x-signature=dTh9yVNQzellDjLoJ%2FcDFDM9kjI%3D" alt="ofdview.png" loading="lazy"/>
4. <strong>OCRè¯†åˆ«åŠŸèƒ½</strong>ï¼šæ¥æ”¶å›¾ç‰‡æˆ–Base64æ•°æ®ï¼Œè°ƒç”¨PaddleOCRè¿›è¡Œæ–‡å­—è¯†åˆ«å¹¶è¿”å›ç»“æœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a2fec3fdd964b769a74c870364ca91b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763364433&amp;x-signature=6GwIPUsgbjK9nflOhkrG7ddTBZQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-21">5. æ ¸å¿ƒåŠŸèƒ½ä»£ç ç¤ºä¾‹</h3>
<h4 data-id="heading-22">5.1 PDF/OFDæ–‡ä»¶åœ¨çº¿é¢„è§ˆ</h4>
<p><strong>æœåŠ¡ç«¯è·¯ç”±é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// PDFé¢„è§ˆè·¯ç”±</span>
app.Get(<span class="hljs-string">"/pdfbrower"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx iris.Context)</span></span> {
    mlog.WriteLog(ctx, <span class="hljs-string">"pdfobject.html"</span>)
    ctx.View(<span class="hljs-string">"pdfobject.html"</span>)
})

<span class="hljs-comment">// OFDé¢„è§ˆè·¯ç”±</span>
app.Get(<span class="hljs-string">"/ofdbrower"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx iris.Context)</span></span> {
    mlog.WriteLog(ctx, <span class="hljs-string">"ofd.html"</span>)
    ctx.View(<span class="hljs-string">"ofd.html"</span>)
})
</code></pre>
<p><strong>æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ–‡ä»¶ä¸Šä¼ æ¥å£</span>
app.Post(<span class="hljs-string">"/uploadbrowerfile"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx iris.Context)</span></span> {
    <span class="hljs-comment">// è·å–ä¸Šä¼ çš„æ–‡ä»¶</span>
    file, info, err := ctx.FormFile(<span class="hljs-string">"file"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        ctx.StatusCode(iris.StatusBadRequest)
        ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: <span class="hljs-string">"è·å–æ–‡ä»¶å¤±è´¥: "</span> + err.Error()})
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> file.Close()

    <span class="hljs-comment">// è·å–æ–‡ä»¶æ‰©å±•å</span>
    ext := filepath.Ext(info.Filename)
    <span class="hljs-keyword">if</span> ext == <span class="hljs-string">""</span> {
        ctx.StatusCode(iris.StatusBadRequest)
        ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: <span class="hljs-string">"æ–‡ä»¶æ²¡æœ‰æ‰©å±•å"</span>})
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// æ„é€ ç›®æ ‡æ–‡ä»¶è·¯å¾„</span>
    targetFilename := ext[<span class="hljs-number">1</span>:] + ext <span class="hljs-comment">// å»æ‰å¼€å¤´çš„ç‚¹ï¼Œä¾‹å¦‚ "pdf" + ".pdf"</span>
    targetPath := filepath.Join(tempDir, targetFilename)

    <span class="hljs-comment">// åˆ›å»ºç›®æ ‡æ–‡ä»¶</span>
    out, err := os.Create(targetPath)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        ctx.StatusCode(iris.StatusInternalServerError)
        ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: <span class="hljs-string">"åˆ›å»ºç›®æ ‡æ–‡ä»¶å¤±è´¥: "</span> + err.Error()})
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> out.Close()

    <span class="hljs-comment">// å¤åˆ¶æ–‡ä»¶å†…å®¹</span>
    _, err = io.Copy(out, file)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        ctx.StatusCode(iris.StatusInternalServerError)
        ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: <span class="hljs-string">"ä¿å­˜æ–‡ä»¶å¤±è´¥: "</span> + err.Error()})
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// è¿”å›æˆåŠŸä¿¡æ¯</span>
    ctx.JSON(iris.Map{
        <span class="hljs-string">"message"</span>: <span class="hljs-string">"æ–‡ä»¶ä¸Šä¼ æˆåŠŸ"</span>,
        <span class="hljs-string">"file"</span>:    targetFilename,
        <span class="hljs-string">"path"</span>:    targetPath,
    })
})
</code></pre>
<p><strong>HTMLä»£ç pdfobject.html</strong>:</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>PDF Embed with Timestamp<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%; height: 1024px;"</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">embed</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"pdf-embed"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/pdf"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"100%"</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

	<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
		<span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>(); <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´æˆ³  </span>
		<span class="hljs-keyword">const</span> pdfUrl = <span class="hljs-string">`./tempData/pdf.pdf?t=<span class="hljs-subst">${timestamp}</span>`</span>; <span class="hljs-comment">// æ„é€ å¸¦æ—¶é—´æˆ³çš„ URL  </span>
		<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'pdf-embed'</span>).<span class="hljs-property">src</span> = pdfUrl; <span class="hljs-comment">// è®¾ç½® embed çš„ src  </span>
	</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><strong>HTMLä»£ç ofd.html</strong>:</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ä¸€ä¸ªç®€æ˜“çš„æ’åºæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/ofd.umd.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.hidden</span> {
            <span class="hljs-attribute">display</span>: none;
            <span class="hljs-comment">/* æˆ–è€…ä½¿ç”¨ visibility: hidden; */</span>
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"file-input"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">".ofd"</span> <span class="hljs-attr">onchange</span>=<span class="hljs-string">"fileChanged(event)"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"ofdContainer"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:100%; height:800px;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// é»˜è®¤æ–‡ä»¶å  </span>
        <span class="hljs-comment">// const defaultFileName = './tempData/ofd.ofd';</span>
        <span class="hljs-comment">// ä½¿ç”¨æ—¶é—´æˆ³æˆ–éšæœºæ•°æ„é€ æ–°çš„URL  </span>
        <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>(); <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ Math.random()  </span>
        <span class="hljs-keyword">const</span> defaultFileName = <span class="hljs-string">`./tempData/ofd.ofd?t=<span class="hljs-subst">${timestamp}</span>`</span>; <span class="hljs-comment">// æ·»åŠ æ—¶é—´æˆ³  </span>
        <span class="hljs-comment">// é»˜è®¤æ–‡ä»¶å</span>
        <span class="hljs-comment">// é»˜è®¤æ–‡ä»¶åä» URL æŸ¥è¯¢å‚æ•°ä¸­è·å–  </span>
        <span class="hljs-comment">//const urlParams = new URLSearchParams(window.location.search);  </span>
        <span class="hljs-comment">//const defaultFileName = urlParams.get('file');  // é»˜è®¤å€¼ä¸º 'ofd5.ofd'  </span>

        <span class="hljs-comment">// åœ¨é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½é»˜è®¤çš„ OFD æ–‡ä»¶  </span>

        <span class="hljs-comment">// é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½é»˜è®¤çš„ OFD æ–‡ä»¶  </span>

        <span class="hljs-keyword">function</span> <span class="hljs-title function_">fileChanged</span>(<span class="hljs-params">e</span>) {
            <span class="hljs-comment">// è·å–æ–‡ä»¶æ•°æ®  </span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]);
            <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
            <span class="hljs-comment">// const file = fileName;</span>

            <span class="hljs-keyword">if</span> (!file) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ²¡æœ‰é€‰æ‹©æ–‡ä»¶'</span>);
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// è½¬æ¢ OFD æ–‡æ¡£  </span>
            ofd.<span class="hljs-title function_">parseOfdDocument</span>({
                <span class="hljs-attr">ofd</span>: file,
                <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) {
                    <span class="hljs-keyword">const</span> screenWidth = <span class="hljs-number">800</span>;
                    <span class="hljs-keyword">const</span> ofdRenderRes = ofd.<span class="hljs-title function_">renderOfd</span>(screenWidth, res[<span class="hljs-number">0</span>]);
                    <span class="hljs-keyword">let</span> ofdContainerDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'ofdContainer'</span>);
                    ofdContainerDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>; <span class="hljs-comment">// æ¸…ç©ºä¹‹å‰çš„å†…å®¹  </span>
                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> ofdRenderRes) {
                        ofdContainerDiv.<span class="hljs-title function_">appendChild</span>(item);
                    }
                },
                <span class="hljs-attr">fail</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ofdæ–‡ä»¶æ¸²æŸ“å¤±è´¥'</span>, err);
                }
            });
        }

        <span class="hljs-comment">// é€šè¿‡ JavaScript è¯»å–é»˜è®¤æ–‡ä»¶å¹¶åŠ å…¥ input  </span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadDefaultFile</span>(<span class="hljs-params"/>) {
            <span class="hljs-title function_">fetch</span>(defaultFileName)
                .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">blob</span>())
                .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">blob</span> =&gt;</span> {
                    <span class="hljs-keyword">const</span> file = <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>([blob], defaultFileName, { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/vnd.oasis.opendocument.text'</span> });
                    <span class="hljs-keyword">const</span> event = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'change'</span>); <span class="hljs-comment">// åˆ›å»ºchangeäº‹ä»¶  </span>
                    <span class="hljs-keyword">const</span> input = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'file-input'</span>);
                    <span class="hljs-keyword">const</span> dataTransfer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataTransfer</span>();
                    dataTransfer.<span class="hljs-property">items</span>.<span class="hljs-title function_">add</span>(file);
                    input.<span class="hljs-property">files</span> = dataTransfer.<span class="hljs-property">files</span>; <span class="hljs-comment">// å°†æ–‡ä»¶åˆ†é…ç»™æ–‡ä»¶è¾“å…¥  </span>
                    input.<span class="hljs-title function_">dispatchEvent</span>(event); <span class="hljs-comment">// æ‰‹åŠ¨è§¦å‘changeäº‹ä»¶  </span>
                })
                .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åŠ è½½é»˜è®¤æ–‡ä»¶å¤±è´¥'</span>, err);
                });
        }

        <span class="hljs-comment">// fileChanged(fileChanged);</span>
        <span class="hljs-title function_">loadDefaultFile</span>(); <span class="hljs-comment">// é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è°ƒç”¨è¯¥å‡½æ•°  </span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-23">5.2 PaddleOCRå‘ç¥¨è¯†åˆ«åŠŸèƒ½</h4>
<p><strong>OCRåˆå§‹åŒ–ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> detect *syscall.Proc
<span class="hljs-keyword">var</span> tempDir <span class="hljs-type">string</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// åŠ è½½PaddleOCR.dllåŠ¨æ€åº“</span>
    dll, _ := syscall.LoadDLL(<span class="hljs-string">"PaddleOCR.dll"</span>)
    <span class="hljs-comment">// æŸ¥æ‰¾åˆå§‹åŒ–å‡½æ•°</span>
    Initjson, _ := dll.FindProc(<span class="hljs-string">"Initializejson"</span>)
    detect, _ := dll.FindProc(<span class="hljs-string">"Detect"</span>)
    enableANSI, _ := dll.FindProc(<span class="hljs-string">"EnableANSIResult"</span>)
    enableJson, _ := dll.FindProc(<span class="hljs-string">"EnableJsonResult"</span>)
    <span class="hljs-comment">// è·å–å½“å‰ç›®å½•</span>
    root := getCurrentAbPathBywd()

    <span class="hljs-comment">// è¯»å–é…ç½®æ–‡ä»¶</span>
    jsonconfig, err := ioutil.ReadFile(root + <span class="hljs-string">"\\inference\\PaddleOCR.config.json"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Println(err)
    }

    <span class="hljs-comment">// è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ï¼Œä¼ å…¥æ¨¡å‹è·¯å¾„å’Œé…ç½®</span>
    Initjson.Call(strPtr(root+<span class="hljs-string">"\\inference\\ch_PP-OCRv4_det_infer"</span>),
        strPtr(root+<span class="hljs-string">"\\inference\\ch_ppocr_mobile_v2.0_cls_infer"</span>),
        strPtr(root+<span class="hljs-string">"\\inference\\ch_PP-OCRv4_rec_infer"</span>),
        strPtr(root+<span class="hljs-string">"\\inference\\ppocr_keys.txt"</span>), strPtr(<span class="hljs-type">string</span>(jsonconfig)))

    <span class="hljs-comment">// å¯ç”¨ANSIç¼–ç è¿”å›ç»“æœ</span>
    enableANSI.Call(<span class="hljs-number">1</span>) <span class="hljs-comment">// 0: Unicodeç¼–ç , 1: ANSIç¼–ç </span>
    enableJson.Call(<span class="hljs-number">0</span>) <span class="hljs-comment">// 0: è¿”å›çº¯å­—ç¬¦ä¸²ç»“æœ, 1: è¿”å›JSONå­—ç¬¦ä¸²ç»“æœ</span>
}
</code></pre>
<p/>
<p><strong>OCRè¯†åˆ«å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// OcrData è°ƒç”¨PaddleOCRè¿›è¡Œè¯†åˆ«</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">OcrData</span><span class="hljs-params">(file *os.File)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    start := time.Now() <span class="hljs-comment">// è®°å½•å¼€å§‹æ—¶é—´</span>
    <span class="hljs-comment">// è°ƒç”¨PaddleOCRçš„Detectæ–¹æ³•è¿›è¡Œè¯†åˆ«</span>
    res, _, _ := detect.Call(strPtr(file.Name()))
    <span class="hljs-comment">// å°†Cå­—ç¬¦ä¸²è½¬æ¢ä¸ºGoå­—ç¬¦ä¸²</span>
    p_result := (*C.char)(unsafe.Pointer(res))

    end := time.Now()         <span class="hljs-comment">// è®°å½•ç»“æŸæ—¶é—´</span>
    elapsed := end.Sub(start) <span class="hljs-comment">// è®¡ç®—æ‰§è¡Œæ—¶é—´</span>

    ocrresult := C.GoString(p_result)
    str_res := fmt.Sprintf(<span class="hljs-string">"%v"</span>, ocrresult)

    <span class="hljs-comment">// å¤„ç†ç»“æœï¼Œæ›¿æ¢æ¢è¡Œç¬¦ç­‰</span>
    str_res = strings.ReplaceAll(str_res, <span class="hljs-string">"\n"</span>, <span class="hljs-string">";"</span>)
    str_res = strings.ReplaceAll(str_res, <span class="hljs-string">"\r"</span>, <span class="hljs-string">";"</span>)
    str_res = strings.ReplaceAll(str_res, <span class="hljs-string">"\t"</span>, <span class="hljs-string">";"</span>) <span class="hljs-comment">// æ›¿æ¢åˆ¶è¡¨ç¬¦</span>

    fmt.Printf(<span class="hljs-string">"------------------------------------------------------ã€%sã€‘è§£ææ—¶é—´ä¸ºï¼šã€%sã€‘\n"</span>, file.Name(), get_Time(elapsed))

    <span class="hljs-keyword">return</span> str_res, <span class="hljs-literal">nil</span>
}
</code></pre>
<p><strong>OCR APIæ¥å£</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å®šä¹‰æ¥æ”¶å›¾ç‰‡ Base64 æ•°æ®çš„è·¯ç”±</span>
app.Post(<span class="hljs-string">"/ocr"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx iris.Context)</span></span> {
    <span class="hljs-comment">// ä»è¯·æ±‚ä¸­è§£æ JSON æ•°æ®</span>
    <span class="hljs-keyword">if</span> err := ctx.ReadJSON(&amp;jpgData); err != <span class="hljs-literal">nil</span> {
        ctx.StatusCode(http.StatusBadRequest)
        ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: <span class="hljs-string">"Failed to parse JSON data"</span>})
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// è§£ç  Base64 æ•°æ®</span>
    decodedData, err := base64.StdEncoding.DecodeString(jpgData.Base64)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        ctx.StatusCode(http.StatusBadRequest)
        ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: <span class="hljs-string">"Failed to decode Base64 data"</span>})
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// åˆ›å»ºä¸´æ—¶æ–‡ä»¶ä¿å­˜å›¾ç‰‡</span>
    tempFile, err := ioutil.TempFile(<span class="hljs-string">""</span>, <span class="hljs-string">"*.jpg"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        ctx.StatusCode(http.StatusInternalServerError)
        ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: <span class="hljs-string">"Failed to create temporary file"</span>})
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> os.Remove(tempFile.Name())
    <span class="hljs-keyword">defer</span> tempFile.Close()

    <span class="hljs-comment">// å°†è§£ç åçš„æ•°æ®å†™å…¥ä¸´æ—¶æ–‡ä»¶</span>
    <span class="hljs-keyword">if</span> _, err := tempFile.Write(decodedData); err != <span class="hljs-literal">nil</span> {
        ctx.StatusCode(http.StatusInternalServerError)
        ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: <span class="hljs-string">"Failed to write to temporary file"</span>})
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// è°ƒç”¨ PaddleOCR è¿›è¡Œè¯†åˆ«</span>
    ocrText, err := OcrData(tempFile)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        ctx.StatusCode(http.StatusInternalServerError)
        ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: fmt.Sprintf(<span class="hljs-string">"Failed to run PaddleOCR: %v"</span>, err)})
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// å¤„ç† PaddleOCR çš„è¾“å‡º</span>
    resultText := strings.TrimSpace(<span class="hljs-type">string</span>(ocrText))
    result := OCRResult{Text: resultText}
    tt := time.Now()
    mlog.WriteLog(ctx, fmt.Sprintf(<span class="hljs-string">"è§£ææ—¶é—´ï¼š%s è§£æå†…å®¹ï¼šã€%vã€‘"</span>, tt.Format(<span class="hljs-string">"2006-01-02 15:04:05"</span>), resultText))
    <span class="hljs-comment">// è¿”å› JSON æ ¼å¼çš„ç»“æœ</span>
    ctx.JSON(result)
})
</code></pre>
<h3 data-id="heading-24">6. ä¸»åº”ç”¨ç¨‹åºå…¥å£åŠä¸­é—´ä»¶è®¾ç½®</h3>
<h4 data-id="heading-25">6.1 åº”ç”¨ç¨‹åºå…¥å£</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// ç¡®ä¿ tempData æ–‡ä»¶å¤¹å­˜åœ¨</span>
    tempDir = <span class="hljs-string">"./tempData"</span>
    <span class="hljs-keyword">if</span> err := os.MkdirAll(tempDir, os.ModePerm); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(fmt.Sprintf(<span class="hljs-string">"æ— æ³•åˆ›å»º tempData æ–‡ä»¶å¤¹: %v"</span>, err))
    }

    <span class="hljs-comment">// æ‰“å°å½“å‰æ—¶é—´ä¿¡æ¯</span>
    tt := time.Now()
    fmt.Printf(<span class="hljs-string">"å½“å‰æ—¶é—´:%s\n"</span>, tt.Format(<span class="hljs-string">"2006-01-02 15:04:05"</span>))
    mlog.WriteNotCtxLog(fmt.Sprintf(<span class="hljs-string">"MesServer API Server Start Time: %v"</span>, time.Now()))

    <span class="hljs-comment">// åˆå§‹åŒ–æœåŠ¡å™¨é…ç½®</span>
    config := config.InitConfig()
    <span class="hljs-comment">// åˆå§‹åŒ–æ—¥å¿—æ¨¡å—</span>
    mlog.InitLogger()
    <span class="hljs-comment">// åœ¨ç³»ç»Ÿåœæ­¢æ—¶è®°å½•æ—¥å¿—</span>
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> err := mlog.Logger.Sync(); err != <span class="hljs-literal">nil</span> {
            mlog.WriteNotCtxLog(fmt.Sprintf(<span class="hljs-string">"MesServer API Server Stop: %v"</span>, err))
        }
    }()

    <span class="hljs-comment">// åˆ›å»ºIrisåº”ç”¨</span>
    app := newApp()

    <span class="hljs-comment">// æ·»åŠ æ—¥å¿—ä¸­é—´ä»¶</span>
    app.Use(logger.New(
        logger.Config{
            Status: <span class="hljs-literal">true</span>,
            IP: <span class="hljs-literal">true</span>,
            Method: <span class="hljs-literal">true</span>,
            Path: <span class="hljs-literal">true</span>,
            Query: <span class="hljs-literal">true</span>,
            LogFunc: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(endTime time.Time, latency time.Duration, status, ip, method, path <span class="hljs-type">string</span>, message <span class="hljs-keyword">interface</span>{}, headerMessage <span class="hljs-keyword">interface</span>{})</span></span> {
                <span class="hljs-comment">// æ—¥å¿—è®°å½•é€»è¾‘</span>
                <span class="hljs-comment">// ...</span>
            },
        }))

    <span class="hljs-comment">// è‡ªå®šä¹‰Recoverä¸­é—´ä»¶</span>
    app.Use(recoverMiddleware)
    <span class="hljs-comment">// è®¾ç½®è·¨åŸŸ</span>
    app.Use(Cors)
    <span class="hljs-comment">// åº”ç”¨é…ç½®</span>
    configation(app)
    <span class="hljs-comment">// è·¯ç”±è®¾ç½®</span>
    mvcHandle(app)

    <span class="hljs-comment">// è¾“å‡ºè·¯ç”±åˆ—è¡¨</span>
    routes := app.GetRoutes()
    table := tablewriter.NewWriter(os.Stdout)
    table.SetHeader([]<span class="hljs-type">string</span>{<span class="hljs-string">"è·¯ç”±è®¿é—®æ–¹å¼"</span>, <span class="hljs-string">"è®¿é—®åœ°å€"</span>, <span class="hljs-string">"æ‰§è¡Œå‡½æ•°"</span>})
    <span class="hljs-keyword">for</span> _, r := <span class="hljs-keyword">range</span> routes {
        method := r.Method
        path := r.FormattedPath
        funcName := r.MainHandlerName
        row := []<span class="hljs-type">string</span>{method, path, funcName}
        table.Append(row)
    }
    table.Render()

    <span class="hljs-comment">// è·å–é…ç½®ä¸­çš„IPåœ°å€å’Œç«¯å£å·</span>
    addr := config.Host + <span class="hljs-string">":"</span> + config.Port
    mlog.WriteNotCtxLog(fmt.Sprintf(<span class="hljs-string">"MesServer API Server Start: %v"</span>, addr))
    <span class="hljs-comment">// å¯åŠ¨æœåŠ¡</span>
    app.Run(
        iris.Addr(addr),
        iris.WithCharset(<span class="hljs-string">"UTF-8"</span>),
        iris.WithoutServerError(iris.ErrServerClosed),
        iris.WithOptimizations,
    )
}
</code></pre>
<h4 data-id="heading-26">6.2 ä¸­é—´ä»¶è®¾ç½®</h4>
<p><strong>Recoverä¸­é—´ä»¶</strong>ï¼šç”¨äºæ•è·panicå¹¶è¿”å›å‹å¥½é”™è¯¯ä¿¡æ¯</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è‡ªå®šä¹‰Recoverä¸­é—´ä»¶</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">recoverMiddleware</span><span class="hljs-params">(ctx iris.Context)</span></span> {
    <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> r := <span class="hljs-built_in">recover</span>(); r != <span class="hljs-literal">nil</span> {
            <span class="hljs-comment">// è®°å½•å´©æºƒæ—¥å¿—</span>
            mlog.Logger.Error(<span class="hljs-string">"Recovered from panic"</span>, zap.Any(<span class="hljs-string">"error"</span>, r))

            <span class="hljs-comment">// å¼ºåˆ¶å†™å…¥æ—¥å¿—</span>
            mlog.LogToFile(fmt.Sprintf(<span class="hljs-string">"Recovered from panic: %v"</span>, r))

            <span class="hljs-comment">// è¿”å›ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯</span>
            ctx.StatusCode(<span class="hljs-number">500</span>)
            ctx.JSON(iris.Map{<span class="hljs-string">"error"</span>: <span class="hljs-string">"Internal Server Error"</span>})
        }
    }()
    ctx.Next()
}
</code></pre>
<p><strong>æ—¥å¿—ä¸­é—´ä»¶</strong>ï¼šç”¨äºè®°å½•HTTPè¯·æ±‚æ—¥å¿—</p>
<pre><code class="hljs language-go" lang="go">app.Use(logger.New(
    logger.Config{
        <span class="hljs-comment">// æ˜¯å¦è®°å½•çŠ¶æ€ç </span>
        Status: <span class="hljs-literal">true</span>,
        <span class="hljs-comment">// æ˜¯å¦è®°å½•è¿œç¨‹IPåœ°å€</span>
        IP: <span class="hljs-literal">true</span>,
        <span class="hljs-comment">// æ˜¯å¦å‘ˆç°HTTPè°“è¯</span>
        Method: <span class="hljs-literal">true</span>,
        <span class="hljs-comment">// æ˜¯å¦è®°å½•è¯·æ±‚è·¯å¾„</span>
        Path: <span class="hljs-literal">true</span>,
        <span class="hljs-comment">// æ˜¯å¦å¼€å¯æŸ¥è¯¢è¿½åŠ </span>
        Query: <span class="hljs-literal">true</span>,
        LogFunc: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(endTime time.Time, latency time.Duration, status, ip, method, path <span class="hljs-type">string</span>, message <span class="hljs-keyword">interface</span>{}, headerMessage <span class="hljs-keyword">interface</span>{})</span></span> {
            msg := <span class="hljs-string">"&lt;no message&gt;"</span> <span class="hljs-comment">// é»˜è®¤å€¼</span>
            <span class="hljs-keyword">if</span> message != <span class="hljs-literal">nil</span> {
                msg = fmt.Sprintf(<span class="hljs-string">"%v"</span>, message)
            }

            logMessage := fmt.Sprintf(
                <span class="hljs-string">"[%s] %s %s %s %s %d %s"</span>,
                endTime.Format(time.RFC3339),
                method,
                path,
                ip,
                status,
                latency,
                msg,
            )
            mlog.LogToFile(logMessage)
        },
    }))
</code></pre>
<h3 data-id="heading-27">7. Vue3ä¸Goå‰åç«¯å¼€å‘è®¾ç½®</h3>
<h4 data-id="heading-28">7.1 Vue3å‰ç«¯è®¾ç½®</h4>
<p>é¡¹ç›®ä¸­ä½¿ç”¨Vue3ä½œä¸ºå‰ç«¯æ¡†æ¶ï¼Œé€šè¿‡Axiosä¸Goåç«¯APIè¿›è¡Œäº¤äº’ã€‚ä»¥ä¸‹æ˜¯å‰ç«¯Vue3åº”ç”¨çš„å…³é”®è®¾ç½®ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"/&gt; --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"IE=edge,chrome=1"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- &lt;meta http-equiv="X-UA-Compatible" content="chrome=1"&gt; --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>myoa<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"../css/bootstrap.min.css"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/polyfill.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/browser.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/bluebird.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/vue.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/axios.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/IPConfig.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../js/html5shiv.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-tag">a</span> {
            <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">15px</span>;
            <span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">10px</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container-fluid"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card border-info mb-3"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 20px;"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-header text-info"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>ç”¨æˆ·ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-body text-info form-inline"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-row"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group mb-2 mr-sm-2"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group-prepend"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group-text text-info"</span>&gt;</span> Id <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"off"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-info"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id_query"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span>
                                @<span class="hljs-attr">click</span>=<span class="hljs-string">"search('id')"</span>&gt;</span>æœç´¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group mb-2 mr-sm-2"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group-prepend"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group-text text-info"</span>&gt;</span> Name <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"off"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-info"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"name_query"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span>
                                @<span class="hljs-attr">click</span>=<span class="hljs-string">"search('name')"</span>&gt;</span>æœç´¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group mb-2 mr-sm-2"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group-prepend"</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group-text text-info"</span>&gt;</span> Email <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">autocomplete</span>=<span class="hljs-string">"off"</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-info"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"email_query"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span>
                                @<span class="hljs-attr">click</span>=<span class="hljs-string">"search('email')"</span>&gt;</span>æœç´¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-row"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-info"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"getList"</span>&gt;</span>å…¨éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-success"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"javascript:void(0)"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"add"</span>&gt;</span>æ–°å¢<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>


                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table table-striped table-bordered table-hover text-info"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">thead</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"thead-inverse"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Id<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Email<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>Created On<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in users"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">"row"</span>&gt;</span>[item.id]<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>[item.name]<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>[item.email]<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>[item.createdTime]<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">


        <span class="hljs-comment">// // request è¯·æ±‚æ‹¦æˆª</span>
        axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">request</span>) {
            <span class="hljs-comment">// å¯¹ request è¿›è¡Œæ‹¦æˆª</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·³è½¬åˆ°ç™»å½•é¡µé¢'</span>)
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åå°æœåŠ¡åœ°å€ï¼š'</span>, <span class="hljs-variable constant_">URL</span>)
            }
            <span class="hljs-keyword">return</span> request;
        }, <span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) {
            <span class="hljs-comment">// åœ¨é”™è¯¯è¯·æ±‚æ—¶è¿›è¡Œæ“ä½œ</span>
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
        });

        <span class="hljs-comment">// response è¯·æ±‚æ‹¦æˆª</span>
        axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) {
            <span class="hljs-comment">// å¯¹ response è¿›è¡Œæ‹¦æˆª</span>
            <span class="hljs-keyword">switch</span> (response.<span class="hljs-property">status</span>) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">200</span>:
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥å£è®¿é—®æˆåŠŸ'</span>)
                    <span class="hljs-keyword">break</span>
                <span class="hljs-keyword">case</span> <span class="hljs-number">400</span>:
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æç¤ºé”™è¯¯ä¿¡æ¯'</span>)
                    <span class="hljs-keyword">break</span>
                <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é‡å®šå‘åˆ°ç™»å½•é¡µé¢'</span>)
                    <span class="hljs-keyword">break</span>
            }

            <span class="hljs-keyword">return</span> response;
        }, <span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) {
            <span class="hljs-comment">// åœ¨é”™è¯¯è¯·æ±‚æ—¶è¿›è¡Œæ“ä½œ</span>
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
        });
        <span class="hljs-comment">//è·å–åå°APIæœåŠ¡å…¨å±€IPåœ°å€ã€ç«¯å£ã€æ¥å£ç»„</span>

        <span class="hljs-keyword">var</span> <span class="hljs-variable constant_">URL</span> = <span class="hljs-title class_">IPConfig</span>.<span class="hljs-property">IP</span> + <span class="hljs-string">':'</span> + <span class="hljs-title class_">IPConfig</span>.<span class="hljs-property">HOST</span> + <span class="hljs-string">'/api'</span>;
        axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">baseURL</span> = <span class="hljs-variable constant_">URL</span>;
        axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">xsrfHeaderName</span> = <span class="hljs-string">'X-CSRFToken'</span>
        axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">xsrfCookieName</span> = <span class="hljs-string">'csrftoken'</span>
        axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">withCredentials</span> = <span class="hljs-literal">false</span>
        axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">timeout</span> = <span class="hljs-string">'5000'</span>

        axios.<span class="hljs-property">defaults</span>.<span class="hljs-property">headers</span>[<span class="hljs-string">'Content-Type'</span>] = <span class="hljs-string">'application/x-www-form-urlencoded;charset=UTF-8'</span>
        <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
            <span class="hljs-attr">el</span>: <span class="hljs-string">'#app'</span>,
            <span class="hljs-attr">data</span>: {
                <span class="hljs-attr">id</span>: <span class="hljs-string">''</span>,
                <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>,
                <span class="hljs-attr">email</span>: <span class="hljs-string">''</span>,
                <span class="hljs-attr">queryBuilder</span>: <span class="hljs-string">''</span>,
                <span class="hljs-attr">users</span>: [],

            },

            <span class="hljs-attr">created</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getList</span>()
            },
            <span class="hljs-attr">methods</span>: {
                <span class="hljs-title function_">getList</span>(<span class="hljs-params"/>) {
                    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/users'</span>)
                        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
                            <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span> = response.<span class="hljs-property">data</span>
                            <span class="hljs-comment">// alert(this.users)</span>
                        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
                            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error)
                        })
                },
                <span class="hljs-title function_">search</span>(<span class="hljs-params">queryBuilder</span>) {
                    <span class="hljs-comment">//alert(queryBuilder)</span>
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">queryBuilder</span> = queryBuilder
                    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/user/query'</span>, {

                        <span class="hljs-attr">params</span>: {
                            <span class="hljs-attr">id</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>,
                            <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>,
                            <span class="hljs-attr">email</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">email</span>,
                            <span class="hljs-attr">queryBuilder</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">queryBuilder</span>,
                        }
                    }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
                        <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span> = response.<span class="hljs-property">data</span>
                    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error)
                    })
                },
                <span class="hljs-title function_">add</span>(<span class="hljs-params"/>) {
                    axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/user'</span>, {
                        <span class="hljs-comment">// id:parseInt(this.id),</span>
                        <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>,
                        <span class="hljs-attr">email</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">email</span>,
                    }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
                        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getList</span>()
                        <span class="hljs-comment">//this.users = response.data</span>
                    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error)
                    })
                }
            },
            <span class="hljs-attr">delimiters</span>: [<span class="hljs-string">'['</span>, <span class="hljs-string">"]"</span>],
        });
        vm.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$ajax</span> = axios
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>


<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-29">7.2 Goåç«¯æœåŠ¡APIå®ç°</h4>
<p>é¡¹ç›®ä¸­ä½¿ç”¨Irisçš„MVCæ¨¡å¼å®ç°RESTful APIï¼Œä¾›Vue3å‰ç«¯è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">/**
 * main.goä¸­ MVC æ¶æ„æ¨¡å¼å¤„ç†
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">mvcHandle</span><span class="hljs-params">(app *iris.Application)</span></span> {
    <span class="hljs-comment">//å¯ç”¨session,å¹¶è®¾ç½®sessionå¯¹è±¡çš„è¿‡æœŸæ—¶é—´ä¸º24å°æ—¶</span>
    sessManager := sessions.New(sessions.Config{
        Cookie:  <span class="hljs-string">"sessioncookie"</span>,
        Expires: <span class="hljs-number">24</span> * time.Hour,
    })

    <span class="hljs-comment">// ã€vue apiã€‘åŠŸèƒ½æ¨¡å—</span>
    <span class="hljs-comment">// ä¾‹å¦‚ï¼šhttp://localhost:9000/api/users</span>
    Api := mvc.New(app.Party(<span class="hljs-string">"/api"</span>))
    <span class="hljs-comment">// æ³¨å†Œå½“å‰æ•°æ®äº‘æœåŠ¡ç±»å’Œå¯åŠ¨å¯¹sessions.Sessionçš„è®¿é—®æ“ä½œ</span>
    Api.Register(
        engine,        <span class="hljs-comment">// æ•°æ®åº“å¼•æ“</span>
        dir,           <span class="hljs-comment">// å½“å‰ç›®å½•</span>
        sessManager.Start,
    )
    <span class="hljs-comment">// æŒ‡å®šå½“å‰æ•°æ®æœåŠ¡ç”±é‚£ä¸ªæ§åˆ¶å™¨å¤„ç†</span>
    Api.Handle(<span class="hljs-built_in">new</span>(apiController.ApiController))
}

</code></pre>
<h4 data-id="heading-30">7.3 ç»“æ„ä½“æ¨¡æ¿</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> model

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"invoiceServer/utils"</span>
	<span class="hljs-string">"time"</span>
)

<span class="hljs-comment">//TestUser is a struct</span>
<span class="hljs-comment">/**
 * ã€TestUserã€‘ä¿¡æ¯ç»“æ„ä½“,ç”¨äºæ˜ å°„ã€test_userã€‘æ•°æ®è¡¨
 */</span>
<span class="hljs-keyword">type</span> TestUser <span class="hljs-keyword">struct</span> {
	ID          <span class="hljs-type">int64</span>     <span class="hljs-string">`xorm:"pk autoincr" json:"id"`</span>      <span class="hljs-comment">//ä¸»é”®ID</span>
	Name        <span class="hljs-type">string</span>    <span class="hljs-string">`xorm:"varchar(50)" json:"name"`</span>    <span class="hljs-comment">//ç”¨æˆ·å§“å</span>
	Email       <span class="hljs-type">string</span>    <span class="hljs-string">`xorm:"varchar(100)" json:"email"`</span>  <span class="hljs-comment">//ç”µå­é‚®ä»¶</span>
	CreatedTime time.Time <span class="hljs-string">`xorm:"created" json:"createdTime"`</span> <span class="hljs-comment">//åˆ›å»ºæ—¶é—´</span>
}

<span class="hljs-comment">//TestUserToRespDesc is a function interface</span>
<span class="hljs-comment">/**
 * å°†æ•°æ®åº“æŸ¥è¯¢å‡ºæ¥çš„ç»“æœè¿›è¡Œæ ¼å¼ç»„è£…æˆrequestè¯·æ±‚éœ€è¦çš„jsonå­—æ®µæ ¼å¼
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(testUser *TestUser)</span></span> TestUserToRespDesc() <span class="hljs-keyword">interface</span>{} {
	respInfo := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}{
		<span class="hljs-string">"id"</span>:          testUser.ID,
		<span class="hljs-string">"name"</span>:        testUser.Name,
		<span class="hljs-string">"email"</span>:       testUser.Email,
		<span class="hljs-string">"createdTime"</span>: utils.FormatDatetime(testUser.CreatedTime),
	}
	<span class="hljs-keyword">return</span> respInfo
}


</code></pre>
<h4 data-id="heading-31">7.4 æ§åˆ¶å™¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> api

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"invoiceServer/utils"</span>
	<span class="hljs-string">"strconv"</span>
	<span class="hljs-string">"strings"</span>

	<span class="hljs-string">"github.com/go-xorm/xorm"</span>
	<span class="hljs-string">"github.com/kataras/iris/v12"</span>
	<span class="hljs-string">"github.com/kataras/iris/v12/sessions"</span>
)

<span class="hljs-comment">//MainFrameController is a struct</span>
<span class="hljs-comment">/*
 *ã€ä¸»æ¡†æ¶é¡µã€‘æ§åˆ¶å™¨ç»“æ„ä½“
 *æ ¹æ®å®¢æˆ·ç«¯è®¿é—®çš„APIåœ°å€è°ƒç”¨Serviceæ•°æ®æœåŠ¡é‡Œçš„CURDæ¥å£å¤„ç†æ•°æ®ï¼Œå¹¶è¿”å›ç»™å®¢æˆ·ç«¯
 */</span>
<span class="hljs-keyword">type</span> ApiController <span class="hljs-keyword">struct</span> {
	<span class="hljs-comment">//ä¸Šä¸‹æ–‡å¯¹è±¡</span>
	Ctx    iris.Context
	Engine *xorm.Engine
	<span class="hljs-comment">//ã€System_Sessionã€‘ service</span>
	<span class="hljs-comment">// MainFrameService system.MainFrameService</span>
	<span class="hljs-comment">//sessionå¯¹è±¡</span>
	Path    <span class="hljs-type">string</span>
	Session *sessions.Session
}

<span class="hljs-comment">//GetMytable is a function</span>
<span class="hljs-comment">/*
 * è·å–æˆ‘çš„åŠå…¬æ¡Œã€åŠŸèƒ½åç»­å¼€å‘ä¸­ã€‘
 * è¯·æ±‚ç±»å‹ï¼šGet
 * è¯·æ±‚Urlï¼š/system/mytable
 * å‡½æ•°åä¸ºè¯·æ±‚ç±»å‹+è®¿é—®åœ°å€GetMytable(),è®¿é—®åœ°å€é¦–å­—æ¯å¤§å†™
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(uc *ApiController)</span></span> GetUsers() {
	<span class="hljs-comment">//æŸ¥è¯¢ç»“æœè½¬map</span>
	<span class="hljs-keyword">var</span> osql = <span class="hljs-string">"select name,email,createdTime,ID as id from test_user"</span>
	fmt.Printf(<span class="hljs-string">"osql: %v\n"</span>, osql)
	<span class="hljs-comment">//æŸ¥è¯¢ç»“æœè½¬MAP</span>
	data, _ := utils.DoQueryForMap(uc.Engine, osql)
	<span class="hljs-comment">//æŸ¥è¯¢ç»“æœè½¬JSON</span>
	uc.Ctx.JSON(data)
}

<span class="hljs-keyword">type</span> TestUser <span class="hljs-keyword">struct</span> {
	Name  <span class="hljs-type">string</span> <span class="hljs-string">`json:"name"`</span>
	Email <span class="hljs-type">string</span> <span class="hljs-string">`json:"email"`</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(uc *ApiController)</span></span> PostUser() {
	<span class="hljs-comment">// name := ctx.FormValue("name")</span>
	<span class="hljs-comment">// email := ctx.FormValue("email")</span>
	<span class="hljs-comment">// fmt.Printf("æ¥æ”¶vueä¼ å…¥æ•°æ®: Name:%s Email:%s\n", name, email)</span>
	<span class="hljs-comment">// ctx.WriteString("&lt;h1&gt;&lt;a&gt;" + name + "&lt;/a&gt;&lt;a&gt;" + email + "&lt;/a&gt;&lt;/h1&gt;")</span>

	c := &amp;TestUser{}
	<span class="hljs-keyword">if</span> err := uc.Ctx.ReadJSON(c); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-comment">//Println("error")</span>
		<span class="hljs-built_in">panic</span>(err.Error())
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-comment">//ctx.JSON(c)</span>
		fmt.Printf(<span class="hljs-string">"æ¥æ”¶vueä¼ å…¥JSONæ•°æ®: Name:%s Email:%s \n"</span>, c.Name, c.Email)
		<span class="hljs-comment">//db, _ := util.GetDB()</span>
		tsql := fmt.Sprintf(<span class="hljs-string">"INSERT INTO test_user(name,email) VALUES('%s','%s') select ID = convert(bigint, SCOPE_IDENTITY());"</span>, c.Name, c.Email)
		<span class="hljs-keyword">var</span> newId <span class="hljs-type">int64</span>
		newId = utils.DoInsertRow(uc.Engine, tsql)
		fmt.Printf(<span class="hljs-string">"æ–°å¢æ•°æ®IDä¸ºï¼šã€%dã€‘\n"</span>, newId)

		uc.Ctx.JSON(c)
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(uc *ApiController)</span></span> GetUserQuery() {
	<span class="hljs-comment">//id := ctx.FormValue("id")</span>
	id, err := strconv.Atoi(uc.Ctx.FormValue(<span class="hljs-string">"id"</span>))
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		id = <span class="hljs-number">0</span>
	}
	name := uc.Ctx.FormValue(<span class="hljs-string">"name"</span>)
	email := uc.Ctx.FormValue(<span class="hljs-string">"email"</span>)
	queryBuilder := uc.Ctx.FormValue(<span class="hljs-string">"queryBuilder"</span>)
	fmt.Printf(<span class="hljs-string">"æ¥æ”¶vueä¼ å…¥æ•°æ®: ID:%s Name:%s Email:%s queryBuilderï¼š%s\n"</span>, id, name, email, queryBuilder)
	<span class="hljs-comment">//æŸ¥è¯¢ç»“æœè½¬map</span>
	<span class="hljs-comment">//db, _ := util.GetDB()</span>
	<span class="hljs-comment">//æŸ¥è¯¢ç»“æœè½¬JSON</span>
	<span class="hljs-keyword">var</span> queryValue <span class="hljs-type">string</span> = <span class="hljs-string">""</span>
	<span class="hljs-keyword">switch</span> {
	<span class="hljs-keyword">case</span> queryBuilder == <span class="hljs-string">"id"</span>:
		queryBuilder = strings.ToUpper(queryBuilder)
		queryValue = strconv.Itoa(id)
	<span class="hljs-keyword">case</span> queryBuilder == <span class="hljs-string">"name"</span>:
		queryValue = <span class="hljs-string">"'"</span> + name + <span class="hljs-string">"'"</span>
	<span class="hljs-keyword">case</span> queryBuilder == <span class="hljs-string">"email"</span>:
		queryValue = <span class="hljs-string">"'"</span> + email + <span class="hljs-string">"'"</span>
	<span class="hljs-keyword">default</span>:
		queryValue = strconv.Itoa(id)
	}

	<span class="hljs-keyword">var</span> osql = fmt.Sprintf(<span class="hljs-string">"select name,email,createdTime,ID as id from test_user where %s=%s"</span>, queryBuilder, queryValue)
	fmt.Print(osql + <span class="hljs-string">"\n"</span>)
	<span class="hljs-comment">//æŸ¥è¯¢ç»“æœè½¬MAP</span>
	data, _ := utils.DoQueryForMap(uc.Engine, osql)
	<span class="hljs-comment">//defer db.Close()</span>
	uc.Ctx.JSON(data)
}


</code></pre>
<h4 data-id="heading-32">7.5 æ•°æ®æœåŠ¡ç¤ºä¾‹-é‡‡ç”¨é€šç”¨æ•°æ®æœåŠ¡ç±»</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> utils

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"database/sql"</span>
	<span class="hljs-string">"encoding/json"</span>
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"log"</span>
	<span class="hljs-string">"strconv"</span>
	<span class="hljs-string">"strings"</span>
	<span class="hljs-string">"time"</span>

	<span class="hljs-string">"github.com/go-xorm/xorm"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DoInsertRow</span><span class="hljs-params">(engine *xorm.Engine, sqlInfo <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">int64</span> {
	<span class="hljs-comment">//æ’å…¥æ•°æ® æ³¨ï¼šç”±äºLastInsertIdå¯¹è‡ªå¢åŠ ä¸»é”®IDä¸æ”¯æŒï¼Œæ‰€ä»¥ç”¨å¦å¤–ä¸€ä¸ªæ–¹å¼è§£å†³æ’å…¥è¿”å›æ–°å¢ID</span>
	<span class="hljs-comment">// stmt, err := db.Prepare("INSERT äººå‘˜æ¸…å•(ç­ç»„,å§“å) VALUES(?,?,ref SCOPE_IDENTITY)")</span>
	<span class="hljs-comment">// util.CheckError("insert: %s\n", err)</span>
	<span class="hljs-comment">// res, err := stmt.Exec("ä¿¡æ¯éƒ¨","æGO")</span>
	<span class="hljs-comment">// util.CheckError("insert: %s\n", err)</span>
	<span class="hljs-comment">// id, err := res.LastInsertId()</span>
	<span class="hljs-comment">// util.CheckError("GetNewId: %s\n", err)</span>
	<span class="hljs-comment">// fmt.Printf("GetNewId:%s\n",id)</span>
	<span class="hljs-comment">//tsql=fmt.Sprintf("INSERT INTO äººå‘˜æ¸…å•(ç­ç»„,å§“å) VALUES('%s','%s') select id = convert(bigint, SCOPE_IDENTITY());", "ä¿¡æ¯ç»„","æGO")</span>
	row := engine.DB().DB.QueryRow(sqlInfo)

	<span class="hljs-keyword">var</span> id <span class="hljs-type">int64</span>
	row.Scan(&amp;id)
	<span class="hljs-comment">//fmt.Printf("GetNewId:%d\n",id)</span>
	<span class="hljs-keyword">return</span> id
}

<span class="hljs-comment">// CheckError is a function</span>
<span class="hljs-comment">// func CheckError(tag string, err error) {</span>
<span class="hljs-comment">// 	if err != nil {</span>
<span class="hljs-comment">// 		fmt.Printf(tag, err)</span>
<span class="hljs-comment">// 		return</span>
<span class="hljs-comment">// 	}</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// Count is a function</span>
<span class="hljs-comment">/**
 * æ ¹æ®sqlæŸ¥è¯¢è¿”å›ä¸€è¡Œæ•°æ®
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Count</span><span class="hljs-params">(engine *xorm.Engine, sqlInfo <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">int</span>, <span class="hljs-type">error</span>) {
	fmt.Println(sqlInfo)
	<span class="hljs-comment">// æ‰§è¡ŒSQLè¯­å¥,å¹¶è¾“å‡ºç»“æœé›†å†…å®¹</span>
	rows, err := engine.DB().DB.Query(sqlInfo)
	CheckError(<span class="hljs-string">"query: %s\n"</span>, err)
	<span class="hljs-keyword">defer</span> rows.Close()
	<span class="hljs-keyword">var</span> countId <span class="hljs-type">int</span>
	<span class="hljs-keyword">for</span> rows.Next() {
		rows.Scan(&amp;countId)
		<span class="hljs-comment">//fmt.Printf("data: %s \n",data)</span>
	}
	<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-comment">// but what should we do if there's an error?</span>
		log.Println(<span class="hljs-string">"æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
	}
	<span class="hljs-keyword">return</span> countId, err
}

<span class="hljs-comment">// FindRowData is a function</span>
<span class="hljs-comment">/**
 * æ ¹æ®sqlæŸ¥è¯¢è¿”å›ä¸€è¡Œæ•°æ®
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">FindRowData</span><span class="hljs-params">(engine *xorm.Engine, sqlInfo <span class="hljs-type">string</span>)</span></span> (data []<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>) {
	fmt.Println(sqlInfo)
	<span class="hljs-comment">// æ‰§è¡ŒSQLè¯­å¥,å¹¶è¾“å‡ºç»“æœé›†å†…å®¹</span>
	rows, err := engine.DB().DB.Query(sqlInfo)
	CheckError(<span class="hljs-string">"query: %s\n"</span>, err)
	<span class="hljs-keyword">defer</span> rows.Close()
	data = RowsToSliceMap(rows)
	<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-comment">// but what should we do if there's an error?</span>
		log.Println(<span class="hljs-string">"æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
	}
	<span class="hljs-keyword">return</span> data
}

<span class="hljs-comment">// RowsToSliceMap is a function</span>
<span class="hljs-comment">/**
 *å°†æ•°æ®é›†ç›´æ¥è½¬æ¢ä¸ºåŠ¨æ€è½¬æˆåˆ‡ç‰‡(å­—æ®µä»»æ„æ‹“å±•)
 *å…ˆæŠŠå­—æ®µçš„å€¼éƒ½å½“æˆå­—ç¬¦ä¸²
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">RowsToSliceMap</span><span class="hljs-params">(rows *sql.Rows)</span></span> (list []<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>) {
	<span class="hljs-comment">//å­—æ®µåç§°</span>
	columns, _ := rows.Columns()
	<span class="hljs-comment">//å¤šå°‘ä¸ªå­—æ®µ</span>
	length := <span class="hljs-built_in">len</span>(columns)
	<span class="hljs-comment">//æ¯ä¸€è¡Œå­—æ®µçš„å€¼</span>
	values := <span class="hljs-built_in">make</span>([]sql.RawBytes, length)
	<span class="hljs-comment">//ä¿å­˜çš„æ˜¯valuesçš„å†…å­˜åœ°å€</span>
	pointer := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">interface</span>{}, length)
	<span class="hljs-comment">//</span>
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; length; i++ {
		pointer[i] = &amp;values[i]
	}
	<span class="hljs-comment">//</span>
	<span class="hljs-keyword">for</span> rows.Next() {
		<span class="hljs-comment">//æŠŠå‚æ•°å±•å¼€ï¼ŒæŠŠæ¯ä¸€è¡Œçš„å€¼å­˜åˆ°æŒ‡å®šçš„å†…å­˜åœ°å€å»ï¼Œå¾ªç¯è¦†ç›–ï¼Œvaluesä¹Ÿå°±è·Ÿç€è¢«èµ‹å€¼äº†</span>
		rows.Scan(pointer...)
		<span class="hljs-comment">//æ¯ä¸€è¡Œ</span>
		row := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>)
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; length; i++ {
			row[columns[i]] = <span class="hljs-type">string</span>(values[i])
		}
		list = <span class="hljs-built_in">append</span>(list, row)
	}
	<span class="hljs-comment">//if err:= rows.Close(); err != nil {</span>
	<span class="hljs-comment">//	// but what should we do if there's an error?</span>
	<span class="hljs-comment">//	log.Println("è·å–è¿”å›å€¼æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢",err)</span>
	<span class="hljs-comment">//}</span>
	<span class="hljs-comment">//</span>
	<span class="hljs-keyword">return</span>
}

<span class="hljs-comment">// getExecProcParametersMap is a function</span>
<span class="hljs-comment">/**
 *æ ¹æ®å­˜å‚¨è¿‡ç¨‹åè¿”å›å‚æ•°åˆ—è¡¨
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getExecProcParametersMap</span><span class="hljs-params">(engine *xorm.Engine, procName <span class="hljs-type">string</span>)</span></span> (<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
	osql := fmt.Sprintf(<span class="hljs-string">"EXEC [dbo].[Proc_Parameters] @PROC_NAME='%s'"</span>, procName)
	fmt.Println(osql)
	rows, err := engine.DB().DB.Query(osql)
	<span class="hljs-keyword">defer</span> rows.Close()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">if</span> err == sql.ErrNoRows {
			log.Fatal(<span class="hljs-string">"æ²¡æœ‰è·å–åˆ°æ•°æ®"</span>, err)
		} <span class="hljs-keyword">else</span> {
			log.Fatal(err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}
	<span class="hljs-comment">//è·å–ç»“æœé›†</span>
	<span class="hljs-keyword">var</span> list <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span> <span class="hljs-comment">//è¿”å›çš„åˆ‡ç‰‡</span>
	list = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>)
	<span class="hljs-keyword">for</span> rows.Next() {
		<span class="hljs-keyword">var</span> parameter <span class="hljs-type">string</span>
		<span class="hljs-keyword">var</span> parametertype <span class="hljs-type">string</span>
		<span class="hljs-keyword">var</span> length <span class="hljs-type">int</span>
		<span class="hljs-keyword">var</span> xscale <span class="hljs-type">int</span>
		<span class="hljs-keyword">var</span> parameter_output <span class="hljs-type">int</span>
		<span class="hljs-keyword">var</span> scale <span class="hljs-type">int</span>
		rows.Scan(&amp;parameter, &amp;parametertype, &amp;length, &amp;xscale, &amp;parameter_output, &amp;scale)
		<span class="hljs-keyword">var</span> item <span class="hljs-type">string</span>
		<span class="hljs-comment">//item=fmt.Sprintf("%s,%s,%s,%s,%s,%s",parameter, parametertype,strconv.Itoa(length),strconv.Itoa(xscale),strconv.Itoa(parameter_output),strconv.Itoa(scale))</span>
		<span class="hljs-comment">//int, err := strconv.Atoi(string) å°†å­—ç¬¦ä¸²è½¬INT</span>
		item = fmt.Sprintf(<span class="hljs-string">"%v,%v,%v,%v,%v,%v"</span>, parameter, parametertype, length, xscale, parameter_output, scale)
		<span class="hljs-comment">//fmt.Println(item)</span>
		list[parameter] = item
	}
	<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-comment">// but what should we do if there's an error?</span>
		log.Println(<span class="hljs-string">"è·å–è¿”å›å€¼æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
	}
	<span class="hljs-keyword">return</span> list, err
}

<span class="hljs-comment">// getExecProcSql is a function</span>
<span class="hljs-comment">/**
 * æ ¹æ®å­˜å‚¨è¿‡ç¨‹åå’Œå‚æ•°mapæ•°ç»„ï¼Œç”Ÿæˆå¯ä»¥æ‰§è¡Œçš„ã€å­˜å‚¨è¿‡ç¨‹ã€‘sqlè¯­å¥ï¼Œè¯­å¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†
 * 1ã€å®šä¹‰è¾“å‡ºå˜é‡  DECLARE @return_value int,@msg varchar(100);
* 2ã€æ‰§è¡Œã€å­˜å‚¨è¿‡ç¨‹ã€‘å¹¶é…ä¸Šè¾“å…¥å‚æ•°å’Œè¾“å‡ºå‚æ•° EXEC @return_value = [dbo].[proc_aa] @dwUserID = 1,@nBaseEnsureType = 0,@msg=@msg output;
 * 3ã€æ‰§è¡Œã€å­˜å‚¨è¿‡ç¨‹ã€‘åéœ€è¦è¾“å‡ºçš„ç»“æœå’Œä¿¡æ¯ SELECT 'ReturnValue' = @return_value,'ReturnMsg' =@msg
*/</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getExecProcSql</span><span class="hljs-params">(procName <span class="hljs-type">string</span>, inParas <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>, inParasTypes <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>, bErrorDescribe <span class="hljs-type">bool</span>)</span></span> <span class="hljs-type">string</span> {
	<span class="hljs-keyword">var</span> sql <span class="hljs-type">string</span>
	<span class="hljs-keyword">var</span> paras <span class="hljs-type">string</span>
	<span class="hljs-comment">//inParasTypesæ˜¯ä»åå°æ•°æ®åº“ä¸­æ ¹æ®å­˜å‚¨è¿‡ç¨‹åæå–å‚æ•°åˆ—è¡¨ï¼Œä¸‹é¢æ˜¯æ ¹æ®inParasTypesä¸­çš„å‚æ•°ç±»å‹è¿›è¡Œsqlè¯­å¥è¾“å…¥å˜é‡æ˜¯å¦éœ€è¦æ·»åŠ "'"</span>
	<span class="hljs-comment">//for key, value := range inParasTypes {</span>
	<span class="hljs-comment">//   fmt.Printf("inParasTypes[%d] =%s\n", key, value)</span>
	<span class="hljs-comment">//fmt.Printf("-------&gt;%s---[1]--&gt;,%s\n", value, strings.Split(value, ",")[1])</span>
	<span class="hljs-comment">//}</span>
	<span class="hljs-keyword">for</span> key, value := <span class="hljs-keyword">range</span> inParas {
		<span class="hljs-comment">/*æŸ¥çœ‹å…ƒç´ åœ¨é›†åˆä¸­æ˜¯å¦å­˜åœ¨ */</span>
		parName, ok := inParasTypes[key] <span class="hljs-comment">/*å¦‚æœç¡®å®šæ˜¯çœŸå®çš„,åˆ™å­˜åœ¨,å¦åˆ™ä¸å­˜åœ¨ */</span>
		<span class="hljs-keyword">if</span> ok {
			parType := strings.Split(parName, <span class="hljs-string">","</span>)[<span class="hljs-number">1</span>] <span class="hljs-comment">//è·å–å‚æ•°ç±»å‹</span>
			<span class="hljs-keyword">switch</span> {
			<span class="hljs-keyword">case</span> parType == <span class="hljs-string">"varchar"</span>, parType == <span class="hljs-string">"nvarchar"</span>:
				paras += key + <span class="hljs-string">" = '"</span> + value + <span class="hljs-string">"'"</span>
			<span class="hljs-keyword">case</span> parType == <span class="hljs-string">"char"</span>, parType == <span class="hljs-string">"nchar"</span>:
				paras += key + <span class="hljs-string">" = '"</span> + value + <span class="hljs-string">"'"</span>
			<span class="hljs-keyword">case</span> parType == <span class="hljs-string">"text"</span>, parType == <span class="hljs-string">"ntext"</span>:
				paras += key + <span class="hljs-string">" = '"</span> + value + <span class="hljs-string">"'"</span>
			<span class="hljs-keyword">case</span> parType == <span class="hljs-string">"image"</span>:
				paras += key + <span class="hljs-string">" = '"</span> + value + <span class="hljs-string">"'"</span>
			<span class="hljs-keyword">case</span> parType == <span class="hljs-string">"datetime"</span>:
				paras += key + <span class="hljs-string">" = '"</span> + value + <span class="hljs-string">"'"</span>
			<span class="hljs-keyword">case</span> parType == <span class="hljs-string">"uniqueidentifier"</span>:
				paras += key + <span class="hljs-string">" = '"</span> + value + <span class="hljs-string">"'"</span>
			<span class="hljs-keyword">default</span>:
				paras += key + <span class="hljs-string">" = "</span> + value
			}
			<span class="hljs-comment">//if parType=="varchar" || parType=="nvarchar"  || parType=="text"  || parType=="ntext" || parType=="char"   || parType=="nchar" || parType=="image" || parType=="datetime" {</span>
			<span class="hljs-comment">//	paras += key + " = '" + value+"'"</span>
			<span class="hljs-comment">//}else{</span>
			<span class="hljs-comment">//	paras += key + " = " + value</span>
			<span class="hljs-comment">//}</span>
		} <span class="hljs-keyword">else</span> {
			paras += key + <span class="hljs-string">" = "</span> + value
		}

		paras += <span class="hljs-string">","</span>
	}

	paras = strings.TrimRight(paras, <span class="hljs-string">","</span>)
	paras += <span class="hljs-string">",@msg=@msg output"</span>
	paras += <span class="hljs-string">";"</span>

	<span class="hljs-keyword">if</span> bErrorDescribe == <span class="hljs-literal">true</span> {
		sql = <span class="hljs-string">""</span>
	} <span class="hljs-keyword">else</span> {
		sql = fmt.Sprintf(<span class="hljs-string">"DECLARE @return_value int,@msg varchar(100); EXEC @return_value = [dbo].[%s] %s SELECT 'ReturnValue' = @return_value,'ReturnMsg'=@msg"</span>, procName, paras)
	}

	<span class="hljs-keyword">return</span> sql
}

<span class="hljs-comment">// ExecProcTest is a function</span>
<span class="hljs-comment">/**
 *è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å­˜å‚¨è¿‡ç¨‹çš„å‡½æ•°ï¼Œæ ¹æ®å­˜å‚¨è¿‡ç¨‹åå’Œå‚æ•°è¿”å›ç»“æœé›†å’Œè¾“å‡ºå­˜å‚¨è¿‡ç¨‹çš„æ‰§è¡Œç»“æœå’Œä¿¡æ¯æç¤º
 *Goå®šä¹‰äº†ä¸€ä¸ªç‰¹æ®Šçš„é”™è¯¯å¸¸é‡ï¼Œç§°ä¸ºsql.ErrNoRowsã€‚å½“ç»“æœä¸ºç©ºæ—¶ï¼Œä»QueryRow()è¿”å›çš„å°±æ˜¯sql.ErrNoRowsã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™éœ€è¦ä½œä¸ºç‰¹æ®Šæƒ…å†µæ¥å¤„ç†ã€‚ç©ºç»“æœé€šå¸¸ä¸ä¼šè¢«åº”ç”¨ç¨‹åºä»£ç è§†ä¸ºé”™è¯¯ï¼Œå¦‚æœä½ ä¸æ£€æŸ¥è¿”å›çš„Errroæ˜¯å¦æ˜¯è¿™ä¸ªç‰¹æ®Šçš„å¸¸é‡ï¼Œè¿™å°†å¯¼è‡´æ‚¨çš„åº”ç”¨ç¨‹åºä»¥æ‚¨æ‰€ä¸å¸Œæœ›çš„æ–¹å¼å¤±è´¥ã€‚

 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ExecProcTest</span><span class="hljs-params">(engine *xorm.Engine, procName <span class="hljs-type">string</span>, inParas <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> {
	parasTypesList, err := getExecProcParametersMap(engine, procName)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"err:%s\n"</span>, err)
	} <span class="hljs-keyword">else</span> {
		fmt.Printf(<span class="hljs-string">"parasTypesList:%s\n"</span>, parasTypesList)
	}
	osql := getExecProcSql(procName, inParas, parasTypesList, <span class="hljs-literal">false</span>)
	fmt.Println(osql)
	rows, err := engine.DB().DB.Query(osql)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">if</span> err == sql.ErrNoRows {
			log.Fatal(<span class="hljs-string">"æ²¡æœ‰è·å–åˆ°æ•°æ®"</span>, err)
		} <span class="hljs-keyword">else</span> {
			log.Fatal(err)
		}

	} <span class="hljs-keyword">else</span> {
		<span class="hljs-comment">//å°†æ•°æ®é›†ç›´æ¥è½¬æ¢ä¸ºåŠ¨æ€è½¬æˆåˆ‡ç‰‡(å­—æ®µä»»æ„æ‹“å±•)</span>
		list := RowsToSliceMap(rows)
		<span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> list {
			fmt.Println(k)
			fmt.Println(v[<span class="hljs-string">"id"</span>], v[<span class="hljs-string">"table_name"</span>], v[<span class="hljs-string">"file_data"</span>], v[<span class="hljs-string">"uploader"</span>], v[<span class="hljs-string">"upload_time"</span>])
		}

		<span class="hljs-comment">//è·å–ç»“æœé›†ï¼Œrows.Nest()ä¸­ä¸€ä¸ªåªè¯»å‘å‰æ¸¸æ ‡ï¼Œè¯»å–åå…‰æ ‡åˆ°å°¾ï¼Œä¸èƒ½é‡å¤è¯»å–ï¼Œä¸Šé¢çš„ä»£ç å’Œä¸‹é¢çš„ä»£ç åªæœ‰ä¸€ä¸ªæœ‰æ•ˆ</span>
		<span class="hljs-keyword">for</span> rows.Next() {
			<span class="hljs-keyword">var</span> table_name <span class="hljs-type">string</span>
			<span class="hljs-keyword">var</span> uploader <span class="hljs-type">string</span>
			<span class="hljs-keyword">var</span> file_data <span class="hljs-type">string</span>
			<span class="hljs-keyword">var</span> id <span class="hljs-type">int</span>
			<span class="hljs-keyword">var</span> upload_time <span class="hljs-type">string</span>
			rows.Scan(&amp;id, &amp;table_name, &amp;file_data, &amp;uploader, &amp;upload_time)
			fmt.Printf(<span class="hljs-string">"%v,%v,%v,%v,%v\n"</span>, id, table_name, file_data, uploader, upload_time)
		}
		<span class="hljs-comment">//if err = rows.Close(); err != nil {</span>
		<span class="hljs-comment">//	// but what should we do if there's an error?</span>
		<span class="hljs-comment">//	log.Println("æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢",err)</span>
		<span class="hljs-comment">//}</span>

		<span class="hljs-comment">//è·å–è¿”å›å€¼ï¼Œå¤šä¸ªç»“æœé›†éœ€è¦ç”¨rows.NextResultSet()å¯¹ç»“æœé›†è¿›è¡Œåˆ‡æ¢å¹¶è¯»å–æ•°æ®</span>
		<span class="hljs-keyword">if</span> rows.NextResultSet() {
			<span class="hljs-keyword">for</span> rows.Next() {
				<span class="hljs-keyword">var</span> returnValue <span class="hljs-type">int</span>
				<span class="hljs-keyword">var</span> returnMsg <span class="hljs-type">string</span>
				rows.Scan(&amp;returnValue, &amp;returnMsg)
				fmt.Printf(<span class="hljs-string">"ReturnValue %v ReturnMsgï¼š%v\n"</span>, returnValue, returnMsg)
			}
			<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
				<span class="hljs-comment">// but what should we do if there's an error?</span>
				log.Println(<span class="hljs-string">"è·å–è¿”å›å€¼æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
			}
		}
	}
	<span class="hljs-keyword">return</span> err

}

<span class="hljs-comment">// ExecProcNoParasNoResultSet is a function</span>
<span class="hljs-comment">/**
 *æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ï¼Œæ— å‚æ•°åªè¿”å›å­˜å‚¨è¿‡ç¨‹çš„è¿”å›å€¼å’Œè¿”å›msgï¼Œæ— è¿”å›ç»“æœé›†
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ExecProcNoParasNoResultSet</span><span class="hljs-params">(engine *xorm.Engine, procName <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">int</span>, <span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {

	osql := fmt.Sprintf(<span class="hljs-string">"DECLARE @return_value int,@msg varchar(100); EXEC @return_value = [dbo].[%s] @msg=@msg output;SELECT 'ReturnValue' = @return_value,'ReturnMsg'=@msg"</span>, procName)
	fmt.Println(osql)
	rows, err := engine.DB().DB.Query(osql)
	<span class="hljs-keyword">defer</span> rows.Close()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">if</span> err == sql.ErrNoRows {
			log.Fatal(<span class="hljs-string">"æ²¡æœ‰è·å–åˆ°æ•°æ®"</span>, err)
		} <span class="hljs-keyword">else</span> {
			log.Fatal(err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-string">""</span>, err
	}
	<span class="hljs-comment">//è·å–è¿”å›å€¼</span>
	<span class="hljs-keyword">var</span> returnValue <span class="hljs-type">int</span>
	<span class="hljs-keyword">var</span> returnMsg <span class="hljs-type">string</span>
	<span class="hljs-comment">//if rows.NextResultSet() {</span>
	<span class="hljs-keyword">for</span> rows.Next() {
		rows.Scan(&amp;returnValue, &amp;returnMsg)
		fmt.Printf(<span class="hljs-string">"ReturnValue %v ReturnMsgï¼š%v\n"</span>, returnValue, returnMsg)
	}
	<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-comment">// but what should we do if there's an error?</span>
		log.Println(<span class="hljs-string">"è·å–è¿”å›å€¼æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
	}
	<span class="hljs-comment">//}</span>
	<span class="hljs-keyword">return</span> returnValue, returnMsg, err
}

<span class="hljs-comment">// ExecProcNoResultSet is a function</span>
<span class="hljs-comment">/**
 *åªè¿”å›å­˜å‚¨è¿‡ç¨‹çš„è¿”å›å€¼å’Œè¿”å›msgï¼Œæ— è¿”å›ç»“æœé›†
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ExecProcNoResultSet</span><span class="hljs-params">(engine *xorm.Engine, procName <span class="hljs-type">string</span>, inParas <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">int</span>, <span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
	parasTypesList, err := getExecProcParametersMap(engine, procName)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"columns:%s\n"</span>, parasTypesList)
	}
	osql := getExecProcSql(procName, inParas, parasTypesList, <span class="hljs-literal">false</span>)
	fmt.Println(osql)
	rows, err := engine.DB().DB.Query(osql)
	<span class="hljs-keyword">defer</span> rows.Close()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">if</span> err == sql.ErrNoRows {
			log.Fatal(<span class="hljs-string">"æ²¡æœ‰è·å–åˆ°æ•°æ®"</span>, err)
		} <span class="hljs-keyword">else</span> {
			log.Fatal(err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>, <span class="hljs-string">""</span>, err
	}
	<span class="hljs-comment">//è·å–è¿”å›å€¼</span>
	<span class="hljs-keyword">var</span> returnValue <span class="hljs-type">int</span>
	<span class="hljs-keyword">var</span> returnMsg <span class="hljs-type">string</span>
	<span class="hljs-comment">//if rows.NextResultSet() {</span>
	<span class="hljs-keyword">for</span> rows.Next() {
		rows.Scan(&amp;returnValue, &amp;returnMsg)
		fmt.Printf(<span class="hljs-string">"ReturnValue %v ReturnMsgï¼š%v"</span>, returnValue, returnMsg)
	}
	<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-comment">// but what should we do if there's an error?</span>
		log.Println(<span class="hljs-string">"è·å–è¿”å›å€¼æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
	}
	<span class="hljs-comment">//}</span>
	<span class="hljs-keyword">return</span> returnValue, returnMsg, err
}

<span class="hljs-comment">// ExecProcResultSetForMap is a function</span>
<span class="hljs-comment">/**
 *è¿”å›ç»“æœé›†mapï¼Œå¹¶ä¸”è¿”å›å­˜å‚¨è¿‡ç¨‹çš„è¿”å›å€¼å’Œè¿”å›msg
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ExecProcResultSetForMap</span><span class="hljs-params">(engine *xorm.Engine, procName <span class="hljs-type">string</span>, inParas <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>)</span></span> ([]<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}, <span class="hljs-type">int</span>, <span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
	parasTypesList, err := getExecProcParametersMap(engine, procName)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"columns:%s\n"</span>, parasTypesList)
	}
	osql := getExecProcSql(procName, inParas, parasTypesList, <span class="hljs-literal">false</span>)
	fmt.Println(osql)
	rows, err := engine.DB().DB.Query(osql)
	<span class="hljs-keyword">defer</span> rows.Close()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">if</span> err == sql.ErrNoRows {
			log.Fatal(<span class="hljs-string">"æ²¡æœ‰è·å–åˆ°æ•°æ®"</span>, err)
		} <span class="hljs-keyword">else</span> {
			log.Fatal(err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, <span class="hljs-number">0</span>, <span class="hljs-string">""</span>, err
	}
	columns, _ := rows.Columns()
	columnLength := <span class="hljs-built_in">len</span>(columns)
	cache := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">interface</span>{}, columnLength) <span class="hljs-comment">//ä¸´æ—¶å­˜å‚¨æ¯è¡Œæ•°æ®</span>
	<span class="hljs-keyword">for</span> index, _ := <span class="hljs-keyword">range</span> cache {
		<span class="hljs-comment">//ä¸ºæ¯ä¸€åˆ—åˆå§‹åŒ–ä¸€ä¸ªæŒ‡é’ˆ</span>
		<span class="hljs-keyword">var</span> a <span class="hljs-keyword">interface</span>{}
		cache[index] = &amp;a
	}
	<span class="hljs-keyword">var</span> list []<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{} <span class="hljs-comment">//è¿”å›çš„åˆ‡ç‰‡</span>
	<span class="hljs-keyword">for</span> rows.Next() {
		_ = rows.Scan(cache...)
		item := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{})
		<span class="hljs-keyword">for</span> i, data := <span class="hljs-keyword">range</span> cache {
			item[columns[i]] = *data.(*<span class="hljs-keyword">interface</span>{}) <span class="hljs-comment">//å–å®é™…ç±»å‹</span>
		}
		list = <span class="hljs-built_in">append</span>(list, item)
	}
	<span class="hljs-comment">//if err = rows.Close(); err != nil {</span>
	<span class="hljs-comment">//	// but what should we do if there's an error?</span>
	<span class="hljs-comment">//	log.Println("æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢",err)</span>
	<span class="hljs-comment">//}</span>
	<span class="hljs-comment">//è·å–è¿”å›å€¼</span>
	<span class="hljs-keyword">var</span> returnValue <span class="hljs-type">int</span>
	<span class="hljs-keyword">var</span> returnMsg <span class="hljs-type">string</span>
	<span class="hljs-keyword">if</span> rows.NextResultSet() {
		<span class="hljs-keyword">for</span> rows.Next() {
			rows.Scan(&amp;returnValue, &amp;returnMsg)
			fmt.Printf(<span class="hljs-string">"ReturnValue %v ReturnMsgï¼š%v\n"</span>, returnValue, returnMsg)
		}
		<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
			<span class="hljs-comment">// but what should we do if there's an error?</span>
			log.Println(<span class="hljs-string">"è·å–è¿”å›å€¼æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
		}
	}
	fmt.Println(returnMsg)
	<span class="hljs-keyword">return</span> list, returnValue, returnMsg, err
}

<span class="hljs-comment">//éå†map</span>
<span class="hljs-comment">// for key, value := range list {</span>
<span class="hljs-comment">//     fmt.Printf("list[%d] =%s\n", key, value)</span>
<span class="hljs-comment">// }</span>

<span class="hljs-comment">// ExecProcResultSetForJSON is a function</span>
<span class="hljs-comment">/**
 *è¿”å›ç»“æœé›†jsonå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è¿”å›å­˜å‚¨è¿‡ç¨‹çš„è¿”å›å€¼å’Œè¿”å›msg
 *å‡½æ•°è°ƒç”¨æ–¹æ³•
 *	var jsondata string
 *	jsondata,_=util.ExecProcResultSetForJson(db,osql)
 *	fmt.Println(jsondata)
 */</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ExecProcResultSetForJSON</span><span class="hljs-params">(engine *xorm.Engine, procName <span class="hljs-type">string</span>, inParas <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">int</span>, <span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
	parasTypesList, err := getExecProcParametersMap(engine, procName)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Printf(<span class="hljs-string">"columns:%s\n"</span>, parasTypesList)
	}
	osql := getExecProcSql(procName, inParas, parasTypesList, <span class="hljs-literal">false</span>)
	fmt.Println(osql)
	rows, err := engine.DB().DB.Query(osql)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-number">0</span>, <span class="hljs-string">""</span>, err
	}
	<span class="hljs-keyword">defer</span> rows.Close()
	columns, err := rows.Columns()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">if</span> err == sql.ErrNoRows {
			log.Fatal(<span class="hljs-string">"æ²¡æœ‰è·å–åˆ°æ•°æ®"</span>, err)
		} <span class="hljs-keyword">else</span> {
			log.Fatal(err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-number">0</span>, <span class="hljs-string">""</span>, err
	}
	count := <span class="hljs-built_in">len</span>(columns)
	tableData := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}, <span class="hljs-number">0</span>)
	values := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">interface</span>{}, count)
	valuePtrs := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">interface</span>{}, count)
	<span class="hljs-keyword">for</span> rows.Next() {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; count; i++ {
			valuePtrs[i] = &amp;values[i]
		}
		rows.Scan(valuePtrs...)
		entry := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{})
		<span class="hljs-keyword">for</span> i, col := <span class="hljs-keyword">range</span> columns {
			<span class="hljs-keyword">var</span> v <span class="hljs-keyword">interface</span>{}
			val := values[i]
			b, ok := val.([]<span class="hljs-type">byte</span>)
			<span class="hljs-keyword">if</span> ok {
				v = <span class="hljs-type">string</span>(b)
			} <span class="hljs-keyword">else</span> {
				v = val
			}
			entry[col] = v
		}
		tableData = <span class="hljs-built_in">append</span>(tableData, entry)
	}
	<span class="hljs-comment">//if err = rows.Close(); err != nil {</span>
	<span class="hljs-comment">//	// but what should we do if there's an error?</span>
	<span class="hljs-comment">//	log.Println("æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢",err)</span>
	<span class="hljs-comment">//}</span>
	jsonData, err := json.Marshal(tableData)

	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-number">0</span>, <span class="hljs-string">""</span>, err
	}
	<span class="hljs-comment">//fmt.Println(string(jsonData))</span>
	<span class="hljs-comment">//jsonstr:=</span>
	<span class="hljs-keyword">var</span> returnValue <span class="hljs-type">int</span>
	<span class="hljs-keyword">var</span> returnMsg <span class="hljs-type">string</span>
	<span class="hljs-keyword">if</span> rows.NextResultSet() {
		<span class="hljs-keyword">for</span> rows.Next() {
			rows.Scan(&amp;returnValue, &amp;returnMsg)
			fmt.Printf(<span class="hljs-string">"ReturnValue %v ReturnMsgï¼š%v\n"</span>, returnValue, returnMsg)
		}
		<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
			<span class="hljs-comment">// but what should we do if there's an error?</span>
			log.Println(<span class="hljs-string">"è·å–è¿”å›å€¼æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
		}
	}

	<span class="hljs-keyword">return</span> <span class="hljs-type">string</span>(jsonData), returnValue, returnMsg, err

}

<span class="hljs-comment">// DoQueryForMap is a function</span>
<span class="hljs-comment">/*
 *æ ¹æ®ä¼ å…¥çš„sqlï¼Œä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®å¹¶å°†è·å¾—çš„ç»“æœé›†è½¬æ¢æˆmap
 *è°ƒç”¨æ–¹æ³•
 	var osql string
	osql="select cast(id as varchar(20)) as id,å§“å AS name,ç­ç»„ AS class from äººå‘˜æ¸…å• where å§“å like 'æGO%' AND ç­ç»„='ä¿¡æ¯ç»„'"
	data,_:=util.DoQueryForMap(db,osql)
   //éå†map
    for key, value := range data {
		fmt.Printf("list[%d] =%s\n", key, value)
	}
	//å°†ç»“æœè½¬ä¸ºjson
	if b,err:= json.Marshal(data);err==nil{
		str:=string(b[:])
		fmt.Println("main:",str)
	}
*/</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DoQueryForMap</span><span class="hljs-params">(engine *xorm.Engine, sqlInfo <span class="hljs-type">string</span>)</span></span> ([]<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">//fmt.Println(sqlInfo)</span>
	rows, err := engine.DB().DB.Query(sqlInfo)
	<span class="hljs-keyword">defer</span> rows.Close()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">if</span> err == sql.ErrNoRows {
			log.Fatal(<span class="hljs-string">"æ²¡æœ‰è·å–åˆ°æ•°æ®"</span>, err)
		} <span class="hljs-keyword">else</span> {
			log.Fatal(err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}
	columns, _ := rows.Columns()

	columnLength := <span class="hljs-built_in">len</span>(columns)
	cache := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">interface</span>{}, columnLength) <span class="hljs-comment">//ä¸´æ—¶å­˜å‚¨æ¯è¡Œæ•°æ®</span>
	<span class="hljs-keyword">for</span> index, _ := <span class="hljs-keyword">range</span> cache {
		<span class="hljs-comment">//ä¸ºæ¯ä¸€åˆ—åˆå§‹åŒ–ä¸€ä¸ªæŒ‡é’ˆ</span>
		<span class="hljs-keyword">var</span> a <span class="hljs-keyword">interface</span>{}
		cache[index] = &amp;a
	}
	<span class="hljs-keyword">var</span> list []<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{} <span class="hljs-comment">//è¿”å›çš„åˆ‡ç‰‡</span>
	<span class="hljs-keyword">for</span> rows.Next() {
		_ = rows.Scan(cache...)
		item := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{})
		<span class="hljs-keyword">for</span> i, data := <span class="hljs-keyword">range</span> cache {
			item[columns[i]] = *data.(*<span class="hljs-keyword">interface</span>{}) <span class="hljs-comment">//å–å®é™…ç±»å‹</span>
		}
		list = <span class="hljs-built_in">append</span>(list, item)
	}
	<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-comment">// but what should we do if there's an error?</span>
		log.Println(<span class="hljs-string">"æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
	}
	<span class="hljs-comment">//_ = rows.Close()</span>
	<span class="hljs-comment">//éå†map</span>
	<span class="hljs-comment">// for key, value := range list {</span>
	<span class="hljs-comment">//     fmt.Printf("list[%d] =%s\n", key, value)</span>
	<span class="hljs-comment">// }</span>
	<span class="hljs-keyword">return</span> list, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// DoQueryForJSON is a function</span>
<span class="hljs-comment">/*
 *æ ¹æ®ä¼ å…¥çš„sqlï¼Œä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®å¹¶å°†è·å¾—çš„ç»“æœé›†è½¬æ¢æˆ
 *å‡½æ•°è°ƒç”¨æ–¹æ³•
	var jsondata string
	jsondata,_=util.DoQueryForJson(db,osql)
	fmt.Println(jsondata)
*/</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">DoQueryForJSON</span><span class="hljs-params">(engine *xorm.Engine, sqlInfo <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">//fmt.Println(sqlInfo)</span>
	rows, err := engine.DB().DB.Query(sqlInfo)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">if</span> err == sql.ErrNoRows {
			log.Fatal(<span class="hljs-string">"æ²¡æœ‰è·å–åˆ°æ•°æ®"</span>, err)
		} <span class="hljs-keyword">else</span> {
			log.Fatal(err)
		}
		<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
	}
	<span class="hljs-keyword">defer</span> rows.Close()
	columns, err := rows.Columns()
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
	}
	count := <span class="hljs-built_in">len</span>(columns)
	tableData := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}, <span class="hljs-number">0</span>)
	values := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">interface</span>{}, count)
	valuePtrs := <span class="hljs-built_in">make</span>([]<span class="hljs-keyword">interface</span>{}, count)
	<span class="hljs-keyword">for</span> rows.Next() {
		<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; count; i++ {
			valuePtrs[i] = &amp;values[i]
		}
		rows.Scan(valuePtrs...)
		entry := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{})
		<span class="hljs-keyword">for</span> i, col := <span class="hljs-keyword">range</span> columns {
			<span class="hljs-keyword">var</span> v <span class="hljs-keyword">interface</span>{}
			val := values[i]
			b, ok := val.([]<span class="hljs-type">byte</span>)
			<span class="hljs-keyword">if</span> ok {
				v = <span class="hljs-type">string</span>(b)
			} <span class="hljs-keyword">else</span> {
				v = val
			}
			entry[col] = v
		}
		tableData = <span class="hljs-built_in">append</span>(tableData, entry)
	}
	<span class="hljs-keyword">if</span> err = rows.Close(); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-comment">// but what should we do if there's an error?</span>
		log.Println(<span class="hljs-string">"æ•°æ®é›†è¯»å–æ•°æ®å¼‚å¸¸ç»ˆæ­¢"</span>, err)
	}
	jsonData, err := json.Marshal(tableData)

	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
	}
	<span class="hljs-comment">//fmt.Println(string(jsonData))</span>
	<span class="hljs-comment">//jsonstr:=</span>
	<span class="hljs-keyword">return</span> <span class="hljs-type">string</span>(jsonData), <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// InterfaceSliceConvStringSlice is a function</span>
<span class="hljs-comment">/**
  * å°†interface slice è½¬æ¢æˆstring slice
  * æ ¹æ®YTPEè¿”å›interface sliceä¸­çš„å„å­é¡¹çš„ç±»å‹ï¼Œæ ¹æ®ç±»å‹å¯¹å­é¡¹è¿›è¡Œè½¬æ¢ï¼Œå¹¶ä¿å­˜åˆ°string slice
  * å‡½æ•°è°ƒç”¨ä»£ç ï¼š
	//InterfaceSliceToStringSliceå‡½æ•°,å°†Interfaceç±»å‹çš„åˆ‡ç‰‡Sliceè½¬æ¢ä¸ºStringç±»å‹çš„Slice
	strArray:=utils.InterfaceSliceToStringSlice("redis",100,false,true,10.22,time.Now())
	//å°†å­—ç¬¦å‹åˆ‡ç‰‡ä¸­çš„å€¼ç”¨å­—ç¬¦ä¸²è¿æ¥åœ¨ä¸€èµ·ï¼Œä»¥[","]ä½œä¸ºåˆ†éš”ç¬¦
	res := strings.Join(strArray, ",")
	fmt.Println("InterfaceSliceConvStringSliceå‡½æ•°è¿”å›å€¼ï¼š",res)
	//ç”¨åå°„åŒ…ä¸­çš„TypeOfå‡½æ•°è¿”å›æ•°æ®ç±»å‹
	day:=time.Now()
	fmt.Println(reflect.TypeOf(day))
*/</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">InterfaceSliceToStringSlice</span><span class="hljs-params">(params ...<span class="hljs-keyword">interface</span>{})</span></span> []<span class="hljs-type">string</span> {
	<span class="hljs-keyword">var</span> paramSlice []<span class="hljs-type">string</span>
	<span class="hljs-keyword">for</span> _, param := <span class="hljs-keyword">range</span> params {
		<span class="hljs-keyword">switch</span> v := param.(<span class="hljs-keyword">type</span>) {
		<span class="hljs-keyword">case</span> <span class="hljs-type">bool</span>:
			paramSlice = <span class="hljs-built_in">append</span>(paramSlice, strconv.FormatBool(v))
		<span class="hljs-keyword">case</span> <span class="hljs-type">float64</span>:
			paramSlice = <span class="hljs-built_in">append</span>(paramSlice, strconv.FormatFloat(v, <span class="hljs-string">'f'</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">64</span>))
		<span class="hljs-keyword">case</span> <span class="hljs-type">string</span>:
			paramSlice = <span class="hljs-built_in">append</span>(paramSlice, v)
		<span class="hljs-keyword">case</span> <span class="hljs-type">int</span>:
			paramSlice = <span class="hljs-built_in">append</span>(paramSlice, strconv.FormatInt(<span class="hljs-type">int64</span>(v), <span class="hljs-number">10</span>))
		<span class="hljs-keyword">case</span> time.Time:
			paramSlice = <span class="hljs-built_in">append</span>(paramSlice, fmt.Sprintf(<span class="hljs-string">"%d-%d-%d %d:%d:%d"</span>, v.Year(), v.Month(), v.Day(), v.Hour(), v.Minute(), v.Second()))
		<span class="hljs-keyword">default</span>:
			<span class="hljs-built_in">panic</span>(<span class="hljs-string">"params type not supported"</span>)
		}

	}
	<span class="hljs-comment">//res := strings.Join(paramSlice, ",")</span>
	<span class="hljs-comment">//fmt.Println(res)</span>
	<span class="hljs-keyword">return</span> paramSlice
}

</code></pre>
<h4 data-id="heading-33">7.6 è·¯ç”±è®¾ç½®</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> router

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"github.com/kataras/iris/v12"</span>
)

<span class="hljs-keyword">const</span> (
	apiPrefix              = <span class="hljs-string">"api"</span>

)

</code></pre>
<h3 data-id="heading-34">8. æ—¥å¿—ç³»ç»Ÿé›†æˆ</h3>
<p>é¡¹ç›®ä½¿ç”¨Zapæ—¥å¿—åº“å®ç°é«˜æ€§èƒ½çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œæ”¯æŒæ§åˆ¶å°è¾“å‡ºå’Œæ–‡ä»¶æ—¥å¿—ã€‚</p>
<h4 data-id="heading-35">8.1 æ—¥å¿—ç³»ç»Ÿåˆå§‹åŒ–</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> (
    Logger *zap.Logger
    mu     sync.Mutex <span class="hljs-comment">// ç”¨äºæ–‡ä»¶æ—¥å¿—çš„äº’æ–¥é”</span>
)

<span class="hljs-comment">// åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">InitLogger</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> err <span class="hljs-type">error</span>
    Logger, err = zap.NewProduction()
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(err)
    }
}
</code></pre>
<h4 data-id="heading-36">8.2 æ—¥å¿—å†™å…¥æ–‡ä»¶</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// LogToFile å°†æ—¥å¿—å†™å…¥æ–‡ä»¶ï¼Œä½¿ç”¨äº’æ–¥é”ä¿è¯å¹¶å‘å®‰å…¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">LogToFile</span><span class="hljs-params">(logMessage <span class="hljs-type">string</span>)</span></span> {
    mu.Lock()
    <span class="hljs-keyword">defer</span> mu.Unlock()

    file, err := os.OpenFile(<span class="hljs-string">"./logs/app.log"</span>, os.O_APPEND|os.O_CREATE|os.O_WRONLY, <span class="hljs-number">0666</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        Logger.Error(<span class="hljs-string">"Failed to open log file"</span>, zap.Error(err))
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">defer</span> file.Close()

    _, err = file.WriteString(logMessage + <span class="hljs-string">"\n"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        Logger.Error(<span class="hljs-string">"Failed to write to log file"</span>, zap.Error(err))
    }
}
</code></pre>
<h4 data-id="heading-37">8.3 æ—¥å¿—è®°å½•æ–¹æ³•</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// LogMessage æ ¼å¼åŒ–å¹¶è®°å½•æ—¥å¿—ä¿¡æ¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">LogMessage</span><span class="hljs-params">(endTime time.Time, latency time.Duration, status, ip, method, path <span class="hljs-type">string</span>, message <span class="hljs-keyword">interface</span>{})</span></span> {
    msg := <span class="hljs-string">"&lt;no message&gt;"</span> <span class="hljs-comment">// é»˜è®¤å€¼</span>
    <span class="hljs-keyword">if</span> message != <span class="hljs-literal">nil</span> {
        msg = fmt.Sprintf(<span class="hljs-string">"%v"</span>, message)
    }

    logMessage := fmt.Sprintf(
        <span class="hljs-string">"[%s] %s %s %s %s %d %s"</span>,
        endTime.Format(time.RFC3339),
        method,
        path,
        ip,
        status,
        latency.Milliseconds(), <span class="hljs-comment">// ä»¥æ¯«ç§’è®°å½•å»¶è¿Ÿ</span>
        msg,
    )
    LogToFile(logMessage)
}

<span class="hljs-comment">// WriteLog è®°å½•å¸¦ä¸Šä¸‹æ–‡çš„æ—¥å¿—</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">WriteLog</span><span class="hljs-params">(ctx iris.Context, msg <span class="hljs-type">string</span>)</span></span> {
    start := time.Now()
    endTime := time.Now()
    latency := endTime.Sub(start)
    status := fmt.Sprintf(<span class="hljs-string">"%d"</span>, ctx.GetStatusCode())
    ip := ctx.RemoteAddr()
    method := ctx.Method()
    path := ctx.Path()
    <span class="hljs-comment">// è°ƒç”¨ LogMessage</span>
    LogMessage(endTime, latency, status, ip, method, path, msg)
}

<span class="hljs-comment">// WriteNotCtxLog è®°å½•ç³»ç»Ÿçº§æ—¥å¿—ï¼ˆæ— è¯·æ±‚ä¸Šä¸‹æ–‡ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">WriteNotCtxLog</span><span class="hljs-params">(msg <span class="hljs-type">string</span>)</span></span> {
    start := time.Now()
    endTime := time.Now()
    latency := endTime.Sub(start)
    status := fmt.Sprintf(<span class="hljs-string">"%d"</span>, <span class="hljs-number">200</span>)
    ip := <span class="hljs-string">"127.0.0.1"</span>
    method := <span class="hljs-string">"System"</span>
    path := <span class="hljs-string">"0.0.0.0:8888"</span>
    <span class="hljs-comment">// è°ƒç”¨ LogMessage</span>
    LogMessage(endTime, latency, status, ip, method, path, msg)
}
</code></pre>
<h3 data-id="heading-38">9. è·¨åŸŸè®¾ç½®</h3>
<p>é¡¹ç›®å®ç°äº†CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰åŠŸèƒ½ï¼Œå…è®¸å‰ç«¯åº”ç”¨ä»ä¸åŒåŸŸåè®¿é—®åç«¯APIã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è®¾ç½®irisè·¨åŸŸè¯·æ±‚,ä»¥ä¿è¯VUEé¡¹ç›®å¯ä»¥æ­£å¸¸è¯·æ±‚æ•°æ®</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Cors</span><span class="hljs-params">(ctx iris.Context)</span></span> {
    ctx.Header(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>) <span class="hljs-comment">// å…è®¸æ‰€æœ‰æ¥æº</span>
    <span class="hljs-keyword">if</span> ctx.Request().Method == <span class="hljs-string">"OPTIONS"</span> {
        ctx.Header(<span class="hljs-string">"Access-Control-Allow-Methods"</span>, <span class="hljs-string">"GET,POST,PUT,DELETE,PATCH,OPTIONS"</span>)
        ctx.Header(<span class="hljs-string">"Access-Control-Max-Age"</span>, <span class="hljs-string">"86400"</span>) <span class="hljs-comment">// é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸä¸º24å°æ—¶</span>
        ctx.Header(<span class="hljs-string">"Access-Control-Allow-Headers"</span>, <span class="hljs-string">"Content-Type, Access-Control-Allow-Headers,authorization,Authorization, X-Requested-With"</span>)
        ctx.StatusCode(<span class="hljs-number">204</span>) <span class="hljs-comment">// æ— å†…å®¹å“åº”</span>
        <span class="hljs-keyword">return</span>
    }
    ctx.Next() <span class="hljs-comment">// ç»§ç»­å¤„ç†è¯·æ±‚</span>
}
</code></pre>
<p>åœ¨åº”ç”¨ç¨‹åºä¸­å¯ç”¨è·¨åŸŸä¸­é—´ä»¶ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åœ¨mainå‡½æ•°ä¸­å¯ç”¨è·¨åŸŸä¸­é—´ä»¶</span>
app.Use(Cors)
</code></pre>
<h3 data-id="heading-39">10. é¡¹ç›®é…ç½®æ–‡ä»¶åŠåŠ è½½åŠŸèƒ½</h3>
<p>é¡¹ç›®ä½¿ç”¨JSONæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«åº”ç”¨ç¨‹åºé…ç½®ã€æ•°æ®åº“é…ç½®ç­‰ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-40">10.1 é…ç½®ç»“æ„ä½“å®šä¹‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// DbMysql MySQLæ•°æ®åº“é…ç½®</span>
<span class="hljs-keyword">type</span> DbMysql <span class="hljs-keyword">struct</span> {
    Drive    <span class="hljs-type">string</span> <span class="hljs-string">`json:"drive"`</span>
    Port     <span class="hljs-type">string</span> <span class="hljs-string">`json:"port"`</span>
    User     <span class="hljs-type">string</span> <span class="hljs-string">`json:"user"`</span>
    Pwd      <span class="hljs-type">string</span> <span class="hljs-string">`json:"pwd"`</span>
    Host     <span class="hljs-type">string</span> <span class="hljs-string">`json:"host"`</span>
    Database <span class="hljs-type">string</span> <span class="hljs-string">`json:"database"`</span>
}

<span class="hljs-comment">// DbMssql2008 SQL Server 2008æ•°æ®åº“é…ç½®</span>
<span class="hljs-keyword">type</span> DbMssql2008 <span class="hljs-keyword">struct</span> {
    Drive    <span class="hljs-type">string</span> <span class="hljs-string">`json:"drive"`</span>
    Port     <span class="hljs-type">string</span> <span class="hljs-string">`json:"port"`</span>
    User     <span class="hljs-type">string</span> <span class="hljs-string">`json:"user"`</span>
    Pwd      <span class="hljs-type">string</span> <span class="hljs-string">`json:"pwd"`</span>
    Host     <span class="hljs-type">string</span> <span class="hljs-string">`json:"host"`</span>
    Database <span class="hljs-type">string</span> <span class="hljs-string">`json:"database"`</span>
}

<span class="hljs-comment">// DbMssql2000 SQL Server 2000æ•°æ®åº“é…ç½®</span>
<span class="hljs-keyword">type</span> DbMssql2000 <span class="hljs-keyword">struct</span> {
    Drive    <span class="hljs-type">string</span> <span class="hljs-string">`json:"drive"`</span>
    Port     <span class="hljs-type">string</span> <span class="hljs-string">`json:"port"`</span>
    User     <span class="hljs-type">string</span> <span class="hljs-string">`json:"user"`</span>
    Pwd      <span class="hljs-type">string</span> <span class="hljs-string">`json:"pwd"`</span>
    Host     <span class="hljs-type">string</span> <span class="hljs-string">`json:"host"`</span>
    Database <span class="hljs-type">string</span> <span class="hljs-string">`json:"database"`</span>
    Provider <span class="hljs-type">string</span> <span class="hljs-string">`json:"provider"`</span>
}

<span class="hljs-comment">// DbRedis Redisæ•°æ®åº“é…ç½®</span>
<span class="hljs-keyword">type</span> DbRedis <span class="hljs-keyword">struct</span> {
    NetWork  <span class="hljs-type">string</span> <span class="hljs-string">`json:"net_work"`</span>
    Addr     <span class="hljs-type">string</span> <span class="hljs-string">`json:"addr"`</span>
    Port     <span class="hljs-type">string</span> <span class="hljs-string">`json:"port"`</span>
    Password <span class="hljs-type">string</span> <span class="hljs-string">`json:"password"`</span>
    Prefix   <span class="hljs-type">string</span> <span class="hljs-string">`json:"prefix"`</span>
}

<span class="hljs-comment">// AppConfig åº”ç”¨ç¨‹åºé…ç½®</span>
<span class="hljs-keyword">type</span> AppConfig <span class="hljs-keyword">struct</span> {
    AppName     <span class="hljs-type">string</span>      <span class="hljs-string">`json:"app_name"`</span>
    Host        <span class="hljs-type">string</span>      <span class="hljs-string">`json:"host"`</span>
    Port        <span class="hljs-type">string</span>      <span class="hljs-string">`json:"port"`</span>
    StaticPath  <span class="hljs-type">string</span>      <span class="hljs-string">`json:"static_path"`</span>
    Mode        <span class="hljs-type">string</span>      <span class="hljs-string">`json:"mode"`</span>
    DbMySql     DbMysql     <span class="hljs-string">`json:"dbmysql"`</span>
    DbMsSql2000 DbMssql2000 <span class="hljs-string">`json:"dbmssql2000"`</span>
    DbMsSql2008 DbMssql2008 <span class="hljs-string">`json:"dbmssql2008"`</span>
    DbRedis     DbRedis     <span class="hljs-string">`json:"dbredis"`</span>
}
</code></pre>
<h4 data-id="heading-41">10.2 config.jsonæ–‡ä»¶ç¤ºä¾‹</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"app_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"invoiceServer"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.0.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"7777"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"static_path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/static"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dev"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dbmysql"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"drive"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mysql"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3306"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"root"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pwd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123456789"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"127.0.0.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"database"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"invoice"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dbmssql2000"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"drive"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"adodb"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1433"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sa"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pwd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123456789"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"localhost"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"database"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"invoice"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"provider"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SQLOLEDB"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dbmssql2008"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"drive"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mssql"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1888"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sa"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pwd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"123456789"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"localhost"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"database"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"invoice"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dbredis"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"net_work"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tcp"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"addr"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"127.0.0.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"6379"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prefix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"invoice_"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-42">10.3 é…ç½®åŠ è½½å‡½æ•°</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// InitConfig åˆå§‹åŒ–æœåŠ¡å™¨é…ç½®</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">InitConfig</span><span class="hljs-params">()</span></span> *AppConfig {
    <span class="hljs-comment">// æ‰“å¼€é…ç½®æ–‡ä»¶</span>
    file, err := os.Open(<span class="hljs-string">"./config.json"</span>)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(err.Error())
    }
    <span class="hljs-comment">// åˆ›å»ºJSONè§£ç å™¨</span>
    decoder := json.NewDecoder(file)
    <span class="hljs-comment">// è§£ç JSONæ•°æ®åˆ°AppConfigç»“æ„ä½“</span>
    <span class="hljs-keyword">var</span> config *AppConfig
    err = decoder.Decode(&amp;config)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(err.Error())
    }
    <span class="hljs-keyword">return</span> config
}
</code></pre>
<p/>
<h4 data-id="heading-43">10.4 é…ç½®ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨é…ç½®</span>
config := config.InitConfig()
<span class="hljs-comment">// è·å–é…ç½®ä¸­çš„IPåœ°å€å’Œç«¯å£å·</span>
addr := config.Host + <span class="hljs-string">":"</span> + config.Port
<span class="hljs-comment">// å¯åŠ¨æœåŠ¡</span>
app.Run(
    iris.Addr(addr),
    iris.WithCharset(<span class="hljs-string">"UTF-8"</span>),
    iris.WithoutServerError(iris.ErrServerClosed),
    iris.WithOptimizations,
)
</code></pre>
<h3 data-id="heading-44">11. MSSQL/XORMæ•°æ®åº“è¿æ¥é…ç½®ä¸åº”ç”¨</h3>
<p>é¡¹ç›®ä½¿ç”¨XORMæ¡†æ¶ä¸MSSQLæ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œæ”¯æŒæ•°æ®åº“è¿æ¥æ± ã€SQLæ—¥å¿—ç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-45">11.1 æ•°æ®åº“å¼•æ“åˆå§‹åŒ–</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// NewMsSqlEngine å®ä¾‹åŒ–MSSQLæ•°æ®åº“å¼•æ“</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewMsSqlEngine</span><span class="hljs-params">()</span></span> *xorm.Engine {
    <span class="hljs-comment">// è·å–é…ç½®</span>
    initConfig := config.InitConfig()
    <span class="hljs-keyword">if</span> initConfig == <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }

    database := initConfig.DbMsSql2008
    <span class="hljs-comment">// æ„å»ºMSSQLè¿æ¥å­—ç¬¦ä¸²</span>
    dataSourceName := <span class="hljs-string">"server="</span> + database.Host + <span class="hljs-string">";database="</span> + database.Database + <span class="hljs-string">";user id="</span> + database.User + <span class="hljs-string">";password="</span> + database.Pwd + <span class="hljs-string">";port="</span> + database.Port + <span class="hljs-string">";encrypt=disable"</span>
    <span class="hljs-comment">// åˆ›å»ºæ•°æ®åº“å¼•æ“</span>
    engine, err := xorm.NewEngine(database.Drive, dataSourceName)

    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        log.Fatal(<span class="hljs-string">"æ•°æ®åº“è¿æ¥å¤±è´¥:"</span>, err)
    }
    <span class="hljs-comment">// æµ‹è¯•è¿æ¥</span>
    <span class="hljs-keyword">if</span> err := engine.Ping(); err != <span class="hljs-literal">nil</span> {
        log.Fatal(<span class="hljs-string">"å»ºç«‹æ•°æ®åº“è¿æ¥å¤±è´¥:"</span>, err)
    }

    <span class="hljs-comment">// è®¾ç½®å­—æ®µæ˜ å°„è§„åˆ™</span>
    engine.SetColumnMapper(core.GonicMapper{})
    <span class="hljs-comment">// åŒæ­¥æ•°æ®åº“ç»“æ„</span>
    err = engine.Sync2(
        <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ·»åŠ éœ€è¦åŒæ­¥çš„æ¨¡å‹ç»“æ„ä½“</span>
        <span class="hljs-built_in">new</span>(model.TestUser),

    )
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        fmt.Printf(<span class="hljs-string">"engine.Sync2:%s"</span>, err.Error())
    }

    <span class="hljs-comment">// è®¾ç½®æ—¥å¿—çº§åˆ«</span>
    engine.Logger().SetLevel(core.LOG_INFO)
    <span class="hljs-keyword">var</span> logger *xorm.SimpleLogger = sqlLogger()
    logger.SetLevel(core.LOG_INFO)
    engine.SetLogger(logger)

    <span class="hljs-comment">// é…ç½®è¿æ¥æ± </span>
    engine.SetMaxOpenConns(<span class="hljs-number">2000</span>)
    engine.SetMaxIdleConns(<span class="hljs-number">1000</span>)
    engine.SetConnMaxLifetime(<span class="hljs-number">60</span>) <span class="hljs-comment">// 1åˆ†é’Ÿä¸€æ¬¡å¿ƒè·³</span>

    <span class="hljs-keyword">return</span> engine
}
</code></pre>
<h4 data-id="heading-46">11.2 SQLæ—¥å¿—è®°å½•</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// sqlLogger åˆ›å»ºSQLæ—¥å¿—è®°å½•å™¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sqlLogger</span><span class="hljs-params">()</span></span> *xorm.SimpleLogger {
    config := rollingwriter.Config{
        LogPath:                <span class="hljs-string">"./logs"</span>,                    <span class="hljs-comment">// æ—¥å¿—è·¯å¾„</span>
        TimeTagFormat:          <span class="hljs-string">"060102150405"</span>,              <span class="hljs-comment">// æ—¶é—´æ ¼å¼ä¸²</span>
        FileName:               <span class="hljs-string">"ExecSql"</span>,                   <span class="hljs-comment">// æ—¥å¿—æ–‡ä»¶å</span>
        MaxRemain:              <span class="hljs-number">3</span>,                           <span class="hljs-comment">// é…ç½®æ—¥å¿—æœ€å¤§å­˜ç•™æ•°</span>
        RollingPolicy:          rollingwriter.VolumeRolling, <span class="hljs-comment">// é…ç½®æ»šåŠ¨ç­–ç•¥</span>
        RollingVolumeSize:      <span class="hljs-string">"1M"</span>,                        <span class="hljs-comment">// é…ç½®æˆªæ–­æ–‡ä»¶ä¸‹é™å¤§å°</span>
        WriterMode:             <span class="hljs-string">"none"</span>,
        BufferWriterThershould: <span class="hljs-number">256</span>,
        Compress: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å‹ç¼©æ—¥å¿—æ–‡ä»¶</span>
    }
    <span class="hljs-comment">// åˆ›å»ºæ—¥å¿—æ–‡ä»¶</span>
    writer, err := rollingwriter.NewWriterFromConfig(&amp;config)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-built_in">panic</span>(err)
    }
    <span class="hljs-comment">// åˆ›å»ºXORMæ—¥å¿—è®°å½•å™¨</span>
    <span class="hljs-keyword">var</span> logger *xorm.SimpleLogger = xorm.NewSimpleLogger(writer)
    <span class="hljs-keyword">return</span> logger
}
</code></pre>
<p/>
<h4 data-id="heading-47">11.3 æ•°æ®åº“æœåŠ¡ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// MVCæ¶æ„ä¸­çš„æ•°æ®åº“æœåŠ¡ä½¿ç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">mvcHandle</span><span class="hljs-params">(app *iris.Application)</span></span> {
    <span class="hljs-comment">// å¯ç”¨session</span>
    sessManager := sessions.New(sessions.Config{
        Cookie:  <span class="hljs-string">"sessioncookie"</span>,
        Expires: <span class="hljs-number">24</span> * time.Hour,
    })

    <span class="hljs-comment">// ã€mssqlæ•°æ®åº“æµ‹è¯•æ¨¡å—ã€‘</span>
    mssqlDbToolsTestDataService := testService.NewMssqlDbToolsTestDataService(engine)
    mssqlDbToolsTest := mvc.New(app.Party(<span class="hljs-string">"/test/mssqlDbToos"</span>))
    <span class="hljs-comment">// æ³¨å†ŒæœåŠ¡å’Œsession</span>
    mssqlDbToolsTest.Register(
        mssqlDbToolsTestDataService,
        dir,
        sessManager.Start,
    )
    <span class="hljs-comment">// æŒ‡å®šæ§åˆ¶å™¨</span>
    mssqlDbToolsTest.Handle(<span class="hljs-built_in">new</span>(testController.MssqlDbToolsTestDataController))
}
</code></pre>
<h3 data-id="heading-48">12. æ€»ç»“</h3>
<p>æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ç”µå­å‘ç¥¨è§£æGo APIæœåŠ¡ç«¯åº”ç”¨ï¼Œç»“åˆäº†ç°ä»£Webå¼€å‘æŠ€æœ¯æ ˆå’ŒOCRè¯†åˆ«æŠ€æœ¯ã€‚é¡¹ç›®å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>ç»“æ„æ¸…æ™°</strong>ï¼šé‡‡ç”¨MVCæ¶æ„ï¼Œå„æ¨¡å—èŒè´£åˆ†æ˜ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚</li>
<li><strong>æŠ€æœ¯å…ˆè¿›</strong>ï¼šä½¿ç”¨Goè¯­è¨€ã€Irisæ¡†æ¶ã€PaddleOCRç­‰å…ˆè¿›æŠ€æœ¯ï¼Œæ€§èƒ½ä¼˜è‰¯ã€‚</li>
<li><strong>åŠŸèƒ½å®Œå–„</strong>ï¼šæ”¯æŒå‘ç¥¨OCRè¯†åˆ«ã€PDF/OFDæ–‡ä»¶é¢„è§ˆã€æ•°æ®åº“äº¤äº’ç­‰åŠŸèƒ½ã€‚</li>
<li><strong>å‰åç«¯åˆ†ç¦»</strong>ï¼šé‡‡ç”¨Vue3ä½œä¸ºå‰ç«¯æ¡†æ¶ï¼Œå®ç°å‰åç«¯åˆ†ç¦»å¼€å‘ã€‚</li>
<li><strong>å®‰å…¨å¯é </strong>ï¼šå®ç°äº†è·¨åŸŸè®¾ç½®ã€æ—¥å¿—ç³»ç»Ÿã€é”™è¯¯å¤„ç†ç­‰å®‰å…¨æœºåˆ¶ã€‚</li>
</ol>
<p>é€šè¿‡æœ¬æ–‡æ¡£çš„è¯¦ç»†è§£æï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„å’Œå®ç°åŸç†ï¼Œä¸ºåç»­çš„å¼€å‘å’Œç»´æŠ¤å·¥ä½œæä¾›å‚è€ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[COC Asia 2025ï½œå¾—å¸†äº‘ ETLï¼šé¡ºåº” Hive æ–°ç‰¹æ€§ï¼Œé‡å¡‘æ•°æ®ç®¡é“çš„æœªæ¥]]></title>    <link>https://juejin.cn/post/7570866247979302964</link>    <guid>https://juejin.cn/post/7570866247979302964</guid>    <pubDate>2025-11-10T07:39:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570866247979302964" data-draft-id="7570630923711053876" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="COC Asia 2025ï½œå¾—å¸†äº‘ ETLï¼šé¡ºåº” Hive æ–°ç‰¹æ€§ï¼Œé‡å¡‘æ•°æ®ç®¡é“çš„æœªæ¥"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-10T07:39:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—å¸†äº‘ä½ä»£ç "/> <meta itemprop="url" content="https://juejin.cn/user/2254449849150557"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            COC Asia 2025ï½œå¾—å¸†äº‘ ETLï¼šé¡ºåº” Hive æ–°ç‰¹æ€§ï¼Œé‡å¡‘æ•°æ®ç®¡é“çš„æœªæ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2254449849150557/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—å¸†äº‘ä½ä»£ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T07:39:20.000Z" title="Mon Nov 10 2025 07:39:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨COC Asia 2025å¤§ä¼šä¸Šï¼ŒClouderaé«˜çº§å·¥ç¨‹æ€»ç›‘Attila TurÃ³czyå‘è¡¨äº†é¢˜ä¸ºâ€œApache Hiveä¸­åˆ†æ”¯ä¸æ ‡ç­¾çš„ETLæœªæ¥â€çš„ç²¾å½©æ¼”è®²ã€‚</p>
<p>è¿™åœºæ¼”è®²ä¸ä»…å±•ç¤ºäº†Hiveçš„æœ€æ–°æŠ€æœ¯æ¼”è¿›ï¼Œä¹Ÿé¢„ç¤ºç€æ•°æ®é›†æˆä¸ETLå·¥å…·çš„å…¨æ–°å˜é©æ–¹å‘ã€‚</p>
<p>ä½œä¸ºä¼ä¸šçº§æ•°æ®é›†æˆé¢†åŸŸçš„æ·±è€•è€…ï¼Œå¾—å¸†äº‘ETLæ­£åœ¨ç§¯ææ‹¥æŠ±Hiveä¸Icebergå¸¦æ¥çš„æ–°ç‰¹æ€§ï¼Œé€šè¿‡æ™ºèƒ½åŒ–å’Œå¯è§‚æµ‹çš„èƒ½åŠ›å‡çº§ï¼Œè®©ä¼ä¸šçš„æ•°æ®ç®¡é“æ›´ç¨³å®šã€æ›´é«˜æ•ˆã€æ›´æ™ºèƒ½ã€‚</p>
<h2 data-id="heading-0"><strong>Hiveçš„æ–°èƒ½åŠ›ï¼Œæ­£åœ¨æ”¹å˜ETLçš„æ¸¸æˆè§„åˆ™</strong></h2>
<p>éšç€Apache Hive 4.0+å¼•å…¥Icebergè¡¨ã€åˆ†æ”¯ï¼ˆBranchingï¼‰ä¸æ ‡ç­¾ï¼ˆTaggingï¼‰æœºåˆ¶ï¼ŒETLçš„å¼€å‘ä¸ç®¡ç†æ–¹å¼æ­£è¢«å½»åº•é‡å¡‘ã€‚ä¼ ç»ŸETLé€šå¸¸ä»¥çº¿æ€§æµç¨‹æ‰§è¡Œï¼šæå– â†’ è½¬æ¢ â†’ åŠ è½½ï¼Œä¸€æ—¦å‡ºç°å¼‚å¸¸ï¼Œå¾€å¾€éš¾ä»¥å¿«é€Ÿå›æº¯å’Œä¿®å¤ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32c4595c3bd8455896b8f60e01f6f2e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X5biG5LqR5L2O5Luj56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763365160&amp;x-signature=OeBGR6fEvOm8kXdOVFcAYbQFrUc%3D" alt="å›¾ç‰‡" loading="lazy"/>è€ŒHiveçš„æ–°ç‰¹æ€§è®©æ•°æ®é›†æˆå…·å¤‡äº†â€œç‰ˆæœ¬æ§åˆ¶â€çš„èƒ½åŠ›ï¼š-   åˆ†æ”¯è®©æ•°æ®å¤„ç†æ›´å®‰å…¨ï¼šå¯åœ¨ç‹¬ç«‹ç¯å¢ƒä¸­æµ‹è¯•ä¸éªŒè¯å˜æ›´ï¼Œä¸å½±å“ä¸»è¡¨ï¼›</p>
<ul>
<li>æ ‡ç­¾è®©æ•°æ®ç‰ˆæœ¬æ›´æ¸…æ™°ï¼šä¸ºæ¯æ¬¡å‘å¸ƒæˆ–å®¡è®¡æ‰“ä¸Šæ—¶é—´ç‚¹ï¼Œè½»æ¾å®ç°â€œæ—¶é—´æ—…è¡Œâ€ï¼›</li>
<li>Write-Audit-Publish (WAP)Â æ¨¡å¼è®©å‘å¸ƒæ›´å¯æ§ï¼šæ•°æ®åœ¨å‘å¸ƒå‰å¯è‡ªåŠ¨æ ¡éªŒã€è¿‡æ»¤ã€æ¸…ç†ï¼Œä¸»åˆ†æ”¯å§‹ç»ˆä¿æŒé«˜è´¨é‡ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26687080a5a243e0aee1e5863e07728f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X5biG5LqR5L2O5Luj56CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763365160&amp;x-signature=hJcHrioCbqlpV7Ol40YpTwYi4vU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ä»…æ˜¯Hiveçš„å‡çº§ï¼Œæ›´æ˜¯ETLå·¥å…·è¿›åŒ–çš„å¥‘æœºã€‚</p>
<h2 data-id="heading-1">å¾—å¸†äº‘ETLçš„è¿›åŒ–æ–¹å‘</h2>
<p>é¢å¯¹Hiveæ–°ç‰¹æ€§çš„æµªæ½®ï¼Œå¾—å¸†äº‘ETLåœ¨æœ€æ–°ç‰ˆæœ¬ä¸­å®Œæˆäº†å¤šé¡¹å…³é”®å‡çº§ï¼š</p>
<p>ğŸ”¹Â å…¨é¢å…¼å®¹Icebergè¡¨ç»“æ„ï¼šå¯ç›´æ¥åœ¨ETLä»»åŠ¡ä¸­è¯»å†™åˆ†æ”¯ä¸æ ‡ç­¾æ•°æ®ï¼Œæ”¯æŒä¸»åˆ†æ”¯åˆå¹¶ä¸å¿«ç…§ç®¡ç†ï¼›
ğŸ”¹Â å¯è§†åŒ–åˆ†æ”¯ç¼–æ’ï¼šå¼€å‘è€…å¯åœ¨ç•Œé¢ä¸Šç›´æ¥åˆ›å»ºã€åˆå¹¶ã€æ¸…ç†åˆ†æ”¯ä»»åŠ¡ï¼Œè®©ç‰ˆæœ¬ç®¡ç†æ›´ç›´è§‚ï¼›
ğŸ”¹Â å†…ç½®WAPæ¨¡å¼ï¼šè‡ªåŠ¨å°†ä»»åŠ¡è¾“å‡ºå†™å…¥å®¡è®¡åŒºï¼Œé€šè¿‡è´¨é‡æ£€æµ‹åå†å‘å¸ƒåˆ°ä¸»è¡¨ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼›
ğŸ”¹Â å¢å¼ºå…ƒæ•°æ®è¿½è¸ªï¼šç»“åˆå¾—å¸†äº‘å…ƒæ•°æ®ä¸­å¿ƒï¼Œå®Œæ•´è®°å½•æ¯æ¬¡åˆå¹¶ã€å›æ»šä¸å·®å¼‚ï¼Œæ„å»ºé€æ˜å¯è§‚æµ‹çš„æ•°æ®ç®¡é“ã€‚è¿™æ„å‘³ç€ï¼Œå¾—å¸†äº‘ETLä¸å†åªæ˜¯ä¸€ä¸ªâ€œæ•°æ®æ¬è¿å·¥å…·â€ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯åä½œã€å¯è¿½è¸ªã€å¯éªŒè¯çš„æ™ºèƒ½æ•°æ®é›†æˆå¹³å°ã€‚</p>
<h2 data-id="heading-2">é¢å‘æœªæ¥çš„ETLï¼šæ™ºèƒ½ã€å¼€æ”¾ã€æ¼”è¿›ä¸­</h2>
<p>Hiveçš„æ¯ä¸€æ¬¡æŠ€æœ¯æ¼”è¿›ï¼Œéƒ½åœ¨ä¸ºETLçš„æœªæ¥æŒ‡æ˜æ–¹å‘ã€‚å¾—å¸†äº‘ETLå°†æŒç»­ï¼š</p>
<ul>
<li>ç´§è·ŸApacheç¤¾åŒºèŠ‚å¥ï¼Œæ”¯æŒHive 4.2çš„æ–°è¯­æ³•å’Œæ•°æ®ä¿ç•™ç­–ç•¥ï¼›</li>
<li>èåˆAIèƒ½åŠ›ï¼Œå®ç°æ™ºèƒ½æ˜ å°„ã€å¼‚å¸¸æ£€æµ‹ä¸è‡ªé€‚åº”è°ƒä¼˜ï¼›</li>
<li>æ‹“å±•å¤šå¼•æ“ç”Ÿæ€ï¼Œè®©Sparkã€Flinkã€Hiveç­‰å¼•æ“ååŒæ‰§è¡Œï¼Œé‡Šæ”¾è®¡ç®—æ½œèƒ½ã€‚æˆ‘ä»¬ç›¸ä¿¡ï¼Œä¸‹ä¸€ä»£ETLå°†ä¸æ­¢æ˜¯â€œè‡ªåŠ¨åŒ–â€ï¼Œè€Œæ˜¯â€œè‡ªè¿›åŒ–â€â€”â€”èƒ½ç†è§£æ•°æ®ã€ä¼˜åŒ–æµç¨‹ã€ä¿éšœè´¨é‡ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©ä»£ç æ›´æ¸…æ™°ï¼šAndroid ä¸­çš„ MVCã€MVP ä¸ MVVM]]></title>    <link>https://juejin.cn/post/7570630923711135796</link>    <guid>https://juejin.cn/post/7570630923711135796</guid>    <pubDate>2025-11-10T07:50:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570630923711135796" data-draft-id="7570247858869338164" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©ä»£ç æ›´æ¸…æ™°ï¼šAndroid ä¸­çš„ MVCã€MVP ä¸ MVVM"/> <meta itemprop="keywords" content="Android,MVVM,MVC"/> <meta itemprop="datePublished" content="2025-11-10T07:50:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ç™½"/> <meta itemprop="url" content="https://juejin.cn/user/2549135752044601"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©ä»£ç æ›´æ¸…æ™°ï¼šAndroid ä¸­çš„ MVCã€MVP ä¸ MVVM
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2549135752044601/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T07:50:10.000Z" title="Mon Nov 10 2025 07:50:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">çœŸæ­£çš„é—®é¢˜</h2>
<p>åœ¨æ²¡æœ‰å¼•å…¥æ¶æ„æ—¶ï¼Œæˆ‘ä»¬çš„ <code>Activity</code> æˆ– <code>Fragment</code> éå¸¸è‡ƒè‚¿ï¼šæ—¢è¦è´Ÿè´£å±•ç¤º Viewï¼Œåˆè¦è´Ÿè´£å“åº”ç‚¹å‡»äº‹ä»¶ï¼Œè¿˜éœ€è¦å»è´Ÿè´£ç½‘ç»œè¯·æ±‚ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œç®¡ç†æ•°æ®çŠ¶æ€...</p>
<p>è¿™å¯¼è‡´äº†é«˜è€¦åˆæ€§ï¼Œè¿™ç§ä»£ç å‡ ä¹æ— æ³•æµ‹è¯•ä¸”éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¼•å…¥äº†æ¶æ„æ¨¡å¼ï¼Œå°±æ˜¯ä¸ºäº†æ‹†å¼€ <code>Activity</code> æˆ– <code>Fragment</code>ã€‚</p>
<h2 data-id="heading-1">MVC å’Œ MVP çš„å…³ç³»</h2>
<p>é¦–å…ˆæ¾„æ¸…ä¸€ä¸ªè¯¯åŒºï¼šMVP å¹¶ä¸æ˜¯ MVC çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œåªæ˜¯è§£å†³åŒä¸€ä¸ªé—®é¢˜çš„ä¸¤ç§ä¸åŒçš„æ‹†åˆ†æ€è·¯ã€‚</p>
<p>æˆ‘ä»¬é€šå¸¸è®¤ä¸ºåŸç”Ÿ Android å°±æ˜¯ MVCï¼Œå…¶ä¸­ <code>Activity</code> æ˜¯ Controllerï¼ŒXML å¸ƒå±€æ˜¯ Viewï¼Œ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Model: ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterModel</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span></span> {
        count++
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = count
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> model = CounterModel()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.view_counter_content)

        <span class="hljs-keyword">val</span> countTextView = findViewById&lt;TextView&gt;(R.id.count_text_view)
        <span class="hljs-keyword">val</span> incrementButon = findViewById&lt;Button&gt;(R.id.increment_button)
        incrementButon.setOnClickListener {
            model.increment()
            countTextView.text = model.getCount().toString()
        }
    }
}
</code></pre>
<p><code>view_counter_content.xml</code> æ–‡ä»¶å¸ƒå±€ä»£ç ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/count_text_view"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"0"</span>
        <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"24sp"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/increment_button"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"Increment"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<p>ä½† XMLï¼ˆViewï¼‰åªè´Ÿè´£å¸ƒå±€ï¼Œè‚©è´Ÿçš„èŒè´£å¤ªå°‘ï¼Œæ˜¾ç¤ºéƒ½æ˜¯ç”± <code>Activity</code>ï¼ˆControllerï¼‰æ¥å®Œæˆçš„ï¼Œæ‰€ä»¥ Cã€V è¿˜æ˜¯è€¦åˆåœ¨äº†ä¸€èµ·ï¼Œæˆ‘ä»¬å¯ä»¥ç§°å…¶ä¸º â€œM-VCâ€ æ¶æ„ã€‚</p>
<h3 data-id="heading-2">MVC æ‹† Viewï¼šè§£è€¦è§†å›¾</h3>
<p>æˆ‘ä»¬å¯ä»¥å°è£…ä¸€ä¸ªè‡ªå®šä¹‰ Viewï¼Œè®©å®ƒè‡ªå·±åœ¨ç®¡ç†å†…éƒ¨çš„ UI å’Œäº‹ä»¶ï¼Œå¯¹å¤–æš´éœ²æ¥å£å’Œå›è°ƒã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Model: ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterModel</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span></span> {
        count++
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = count
}


<span class="hljs-comment">// ç®¡ç†è‡ªå·±çš„å­è§†å›¾å’Œ UI äº‹ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterView</span>(context: Context, attrs: AttributeSet?) : LinearLayout(context, attrs) {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> countTextView: TextView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> incrementButon: Button

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> onIncrementListener: (() -&gt; <span class="hljs-built_in">Unit</span>)? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">init</span> {
        <span class="hljs-comment">// åŠ è½½å¸ƒå±€</span>
        inflate(context, R.layout.view_counter_content, <span class="hljs-keyword">this</span>)

        countTextView = findViewById(R.id.count_text_view)
        incrementButon = findViewById(R.id.increment_button)

        incrementButon.setOnClickListener {
            <span class="hljs-comment">// é€šçŸ¥ Controller å‘ç”Ÿäº†ç‚¹å‡»äº‹ä»¶</span>
            onIncrementListener?.invoke()
        }
    }

    <span class="hljs-comment">// è®© Controller æ›´æ–° UI</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setCount</span><span class="hljs-params">(count: <span class="hljs-type">Int</span>)</span></span> {
        countTextView.text = count.toString()
    }

    <span class="hljs-comment">// è®© Controller ç›‘å¬ UI äº‹ä»¶ (å‘½åå·²ç»Ÿä¸€)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setOnIncrementListener</span><span class="hljs-params">(listener: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        <span class="hljs-keyword">this</span>.onIncrementListener = listener
    }

}

<span class="hljs-comment">// Controller: Activityï¼Œè´Ÿè´£è°ƒåº¦</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MVCActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> model = CounterModel()
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_mvc)

        <span class="hljs-keyword">val</span> counterView = findViewById&lt;CounterView&gt;(R.id.counter_view)
        <span class="hljs-comment">// Controller åˆå§‹åŠ è½½æ•°æ®</span>
        counterView.setCount(model.getCount())

        <span class="hljs-comment">// Controller ç›‘å¬ UI äº‹ä»¶</span>
        counterView.setOnIncrementListener {
            <span class="hljs-comment">// äº‹ä»¶è§¦å‘ï¼Œæ›´æ–° Model</span>
            model.increment()
            <span class="hljs-comment">// ä½¿ç”¨ Model çš„æ–°æ•°æ®æ›´æ–° UI</span>
            counterView.setCount(model.getCount())
        }
    }
}
</code></pre>
<p><code>activity_mvc</code> å¸ƒå±€ä»£ç ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">com.example.app.CounterView</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/counter_view"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">com.example.app.CounterView</span>&gt;</span>
</code></pre>
<p>è¿™æ · <code>Activity</code>ï¼ˆControllerï¼‰ å°±å¾ˆå¹²å‡€äº†ï¼Œåªè´Ÿè´£è°ƒåº¦ï¼Œå¹¶ä¸ç”¨å…³å¿ƒæ§ä»¶çš„å­˜åœ¨ã€‚</p>
<h3 data-id="heading-3">MVP æ‹† Controllerï¼šè§£è€¦æ§åˆ¶å™¨</h3>
<p>MVP æ‹†åˆ†çš„ä¸æ˜¯ Viewï¼Œå®ƒè®¤ä¸º <code>Activity</code> ä¹Ÿæ˜¯ Viewï¼ˆå› ä¸ºå®ƒæŒæœ‰ View çš„å¼•ç”¨ï¼‰ã€‚</p>
<p>MVP æŠŠæ‰€æœ‰çš„è°ƒåº¦å’Œä¸šåŠ¡é€»è¾‘æŠ½å–åˆ°äº† <code>Presenter</code> ä¸­ï¼Œé€šè¿‡æ¥å£å’Œ <code>Activity</code> é€šä¿¡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Model: ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterModel</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span></span> {
        count++
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = count
}

<span class="hljs-comment">// Contract: å®šä¹‰ View å’Œ Presenter çš„æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">CounterContract</span> {
    <span class="hljs-comment">// View çš„æ¥å£</span>
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">View</span> {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showCount</span><span class="hljs-params">(count: <span class="hljs-type">Int</span>)</span></span>
    }

    <span class="hljs-comment">// Presenter çš„æ¥å£</span>
    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Presenter</span> {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadInitialCount</span><span class="hljs-params">()</span></span>
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">incrementCount</span><span class="hljs-params">()</span></span>
    }
}

<span class="hljs-comment">// Presenter: æ§åˆ¶å™¨ï¼Œè´Ÿè´£æ‰€æœ‰é€»è¾‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterPresenter</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> view: CounterContract.View,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> model: CounterModel
) : CounterContract.Presenter {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadInitialCount</span><span class="hljs-params">()</span></span> {
        view.showCount(model.getCount())
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">incrementCount</span><span class="hljs-params">()</span></span> {
        model.increment()
        view.showCount(model.getCount())
    }
}


<span class="hljs-comment">// View: Activityï¼Œå®ç°æ¥å£ï¼Œæ‰€æœ‰é€»è¾‘å§”æ‰˜ç»™ Presenter</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MVPActivity</span> : <span class="hljs-type">AppCompatActivity</span>(), CounterContract.View {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> presenter: CounterContract.Presenter
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> countTextView: TextView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> incrementButton: Button

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_mvp)

        countTextView = findViewById(R.id.count_text_view)
        incrementButton = findViewById(R.id.increment_button)
        presenter = CounterPresenter(<span class="hljs-keyword">this</span>, CounterModel())

        <span class="hljs-comment">// ç»‘å®šæŒ‰é’®ç‚¹å‡»äº‹ä»¶åˆ° Presenter</span>
        incrementButton.setOnClickListener {
            presenter.incrementCount()
        }

        <span class="hljs-comment">// åŠ è½½åˆå§‹æ•°æ®</span>
        presenter.loadInitialCount()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showCount</span><span class="hljs-params">(count: <span class="hljs-type">Int</span>)</span></span> {
        countTextView.text = count.toString()
    }
}
</code></pre>
<blockquote>
<p><code>activity_mvp</code> å¸ƒå±€æ–‡ä»¶çš„ä»£ç å’Œ <code>view_counter_content</code>Â å¸ƒå±€ä¸€æ ·ã€‚</p>
</blockquote>
<p><code>Presenter</code> æ˜¯ä¸€ä¸ªçº¯ç²¹çš„ç±»ï¼Œè€Œ <code>Activity</code> å˜ä¸ºäº†è¢«åŠ¨çš„è§†å›¾ï¼Œåªè´Ÿè´£å®ç°æ¥å£ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº† MVC å’Œ MVP éƒ½æ˜¯ä¸ºäº†è§£è€¦ V å’Œ Cï¼Œåªä¸è¿‡ä¸¤è€…çš„æ–¹å‘ä¸åŒã€‚MVP å¹¶æ²¡æœ‰æ¯” MVC æ›´å¥½ã€‚</p>
<h2 data-id="heading-4">MVVM ä¸æ•°æ®ç»‘å®š</h2>
<p>MVP è§£å†³äº†è€¦åˆæ€§ï¼Œä½†ä¹Ÿå¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼Œéšç€ä¸šåŠ¡å˜å¾—å¤æ‚ï¼Œ<code>CounterContract.View</code> æ¥å£ä¹Ÿä¼šè¶Šæ¥è¶Šè‡ƒè‚¿ï¼ŒPresenter å’Œ View å­˜åœ¨äº†å¤§é‡çš„å‘½ä»¤å¼è°ƒç”¨ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬èƒ½ä¸èƒ½è®© View è®¢é˜…æ•°æ®ï¼Œæˆ‘ä»¬è´Ÿè´£ä¿®æ”¹æ•°æ®ï¼ŒView è‡ªåŠ¨æ›´æ–°å‘¢ï¼Ÿ</p>
<p>è¿™å°±æ˜¯ MVVM çš„æ ¸å¿ƒæ€æƒ³ï¼šæ•°æ®ç»‘å®šã€‚</p>
<p>æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ <code>ViewModel</code> å’Œ <code>LiveData</code> è¿™ä¸¤ä¸ª<strong>å·¥å…·</strong>æ¥å®ç°å®ƒï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Model: ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterModel</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span></span> {
        count++
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = count
}

<span class="hljs-comment">// ViewModel: æŒæœ‰ Modelï¼Œæš´éœ²çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterViewModel</span> : <span class="hljs-type">ViewModel</span>() {

    <span class="hljs-comment">// ViewModel è‡ªå·±åˆ›å»ºå’Œç®¡ç† Model</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> model = CounterModel()

    <span class="hljs-comment">// å¯¹å¤–æš´éœ² LiveData</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _count = MutableLiveData&lt;<span class="hljs-built_in">Int</span>&gt;()
    <span class="hljs-keyword">val</span> count: LiveData&lt;<span class="hljs-built_in">Int</span>&gt; = _count

    <span class="hljs-keyword">init</span> {
        <span class="hljs-comment">// åŠ è½½åˆå§‹çŠ¶æ€</span>
        _count.value = model.getCount()
    }

    <span class="hljs-comment">//  å¯¹å¤–æš´éœ²ä¸šåŠ¡é€»è¾‘æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">incrementCount</span><span class="hljs-params">()</span></span> {
        model.increment()
        _count.value = model.getCount()
    }
}


<span class="hljs-comment">// View: Activityï¼ŒæŒæœ‰ ViewModel</span>
<span class="hljs-comment">// è®¢é˜… ViewModel çš„ LiveDataï¼Œè°ƒç”¨ ViewModel çš„æ–¹æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MVVMActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> countTextView: TextView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> incrementButton: Button
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModel: CounterViewModel <span class="hljs-keyword">by</span> viewModels()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_mvvm) <span class="hljs-comment">// åŒ activity_mvp.xml</span>

        countTextView = findViewById(R.id.count_text_view)
        incrementButton = findViewById(R.id.increment_button)

        incrementButton.setOnClickListener {
            <span class="hljs-comment">// è°ƒç”¨ ViewModel çš„æ–¹æ³•</span>
            viewModel.incrementCount()
        }

        <span class="hljs-comment">// è®¢é˜… ViewModel çš„ LiveData</span>
        viewModel.count.observe(<span class="hljs-keyword">this</span>) { newCount -&gt;
            <span class="hljs-comment">// çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ›´æ–° UI</span>
            countTextView.text = newCount.toString()
        }
    }
}
</code></pre>
<p><code>Activity</code> ä¸éœ€è¦å®ç°ä»»ä½•æ¥å£ï¼Œ<code>ViewModel</code> ä¹Ÿæ— éœ€æŒæœ‰ <code>Activity</code> çš„å¼•ç”¨ï¼ŒçœŸæ­£å®ç°äº† V å’Œ VM çš„è§£è€¦ã€‚</p>
<h3 data-id="heading-5">ViewModel çš„è§’è‰²</h3>
<p><code>androidx.lifecycle.ViewModel</code> æœ€åˆæ˜¯ä¸ºäº†è§£å†³å±å¹•æ—‹è½¬ç­‰é…ç½®å˜æ›´æ—¶çš„æ•°æ®å­˜æ´»é—®é¢˜è€Œè¯ç”Ÿçš„ï¼Œæ— è®ºæ˜¯ <code>Presenter</code> æˆ–æ˜¯è‡ªå®šä¹‰çš„ VM å¯¹è±¡ï¼Œéƒ½ä¼šåœ¨ Activity é”€æ¯æ—¶é‡å»ºã€‚</p>
<blockquote>
<p>æ•°æ®ç»‘å®šçš„æœ¬è´¨æ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼æ¥å®ç°æ•°æ®ç»‘å®šï¼Œæ‰€ä»¥ VM ä¸ä¸€å®šä»£è¡¨äº† <code>androidx.lifecycle.ViewModel</code>ã€‚</p>
</blockquote>
<p>ä½†ç”±äº <code>ViewModel</code> çš„ç‰¹æ€§ï¼Œèƒ½å¤ŸæŒæœ‰çŠ¶æ€ã€å®Œæˆé€»è¾‘å¤„ç†ï¼Œå› æ­¤ï¼Œå®ƒå®Œç¾åœ°æ‰¿æ‹…äº† VM çš„è§’è‰²ã€‚</p>
<p>æ‰€ä»¥ï¼Œç°åœ¨ MVVM æ¶æ„ä¸­ï¼š</p>
<ul>
<li>VM æŒ‡çš„ä¸€èˆ¬æ˜¯ ViewModelï¼ˆå†…éƒ¨æŒæœ‰ <code>LiveData</code> æˆ– <code>StateFlow</code>ï¼‰</li>
<li>V æŒ‡çš„æ˜¯ Activity / Fragment / Composableï¼Œ</li>
<li>M æ˜¯ Modelï¼ˆåœ¨å¤æ‚é¡¹ç›®ä¸­é€šå¸¸æ˜¯ <code>Repository</code> æˆ– <code>UseCase</code>ï¼‰</li>
</ul>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>æ¶æ„è®¾è®¡çš„çœŸæ­£æ ¸å¿ƒå°±æ˜¯<strong>æ‹†åˆ†</strong>ï¼Œæ— è®ºæ˜¯ MVCï¼ˆæ‹†åˆ† Viewï¼‰ã€MVPï¼ˆæ‹†åˆ† Controllerï¼‰è¿˜æ˜¯ MVVMï¼ˆç”¨æ•°æ®ç»‘å®šè§£è€¦ï¼‰ã€‚å®ƒä»¬çš„ç›®çš„éƒ½æ˜¯å°†è‡ƒè‚¿çš„é›†åˆä½“ï¼Œæ‹†åˆ†ä¸ºæ¸…æ™°çš„ã€å„å¸å…¶èŒçš„ç»„ä»¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹å…¥é—¨ç¬¬ä¸€è¯¾ï¼šå½»åº•ææ‡‚Tokenï¼]]></title>    <link>https://juejin.cn/post/7570500819889389611</link>    <guid>https://juejin.cn/post/7570500819889389611</guid>    <pubDate>2025-11-10T08:00:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570500819889389611" data-draft-id="7570598043297923135" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹å…¥é—¨ç¬¬ä¸€è¯¾ï¼šå½»åº•ææ‡‚Tokenï¼"/> <meta itemprop="keywords" content="LLM,ç¨‹åºå‘˜,Agent"/> <meta itemprop="datePublished" content="2025-11-10T08:00:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹å…¥é—¨ç¬¬ä¸€è¯¾ï¼šå½»åº•ææ‡‚Tokenï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T08:00:50.000Z" title="Mon Nov 10 2025 08:00:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>ä»é›¶å¼€å§‹ï¼Œç”¨10åˆ†é’ŸæŒæ¡å¤§æ¨¡å‹ä¸–ç•Œçš„â€œåŸºç¡€è´§å¸â€</p>
<p>æœ‹å‹ä»¬ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„å¤§æ¨¡å‹å­¦ä¹ ä¹‹æ—…ç¬¬ä¸€ç«™ï¼ä»Šå¤©æˆ‘ä»¬è¦æ”»å…‹çš„ï¼Œæ˜¯é‚£ä¸ªæ— å¤„ä¸åœ¨å´åˆå¸¸å¸¸è®©äººå›°æƒ‘çš„æ¦‚å¿µâ€”â€”<strong>Token</strong>ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªæ–°æ‰‹ï¼Œæˆ‘æ·±çŸ¥åˆå­¦è€…çš„ç—›ç‚¹ã€‚æ‰€ä»¥è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä¼šç”¨æœ€ç›´ç™½çš„è¯­è¨€ï¼Œå¸¦ä½ ä»é›¶å¼€å§‹ï¼Œä¸€æ­¥æ­¥ææ‡‚Tokenåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå®ƒå¦‚æ­¤é‡è¦ã€‚</p>
<p>å›¾ç¤ºï¼šå°±åƒæŠŠä¸€ç›’ç³–æœåˆ†è£…æˆå°åŒ…ï¼ŒTokenization å°†æ–‡æœ¬åˆ‡åˆ†ä¸ºæ¨¡å‹å¯å¤„ç†çš„åŸºæœ¬å•å…ƒ</p>
<h2 data-id="heading-0">ä¸€ã€åˆè¯†Tokenï¼šä»â€œåˆ†ç³–æœâ€è¯´èµ·</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ é¢å‰æœ‰ä¸€ç›’äº”å½©æ–‘æ–“çš„ç³–æœï¼Œç°åœ¨è¦æŠŠå®ƒä»¬åˆ†è£…æˆå°åŒ…è£…ã€‚</p>
<p><strong>åŸå§‹ç³–æœ</strong>ï¼š<code>æˆ‘çˆ±å­¦ä¹ äººå·¥æ™ºèƒ½æŠ€æœ¯</code></p>
<p><strong>åˆ†è£…åçš„ç³–æœåŒ…</strong>ï¼š<code>["æˆ‘", "çˆ±", "å­¦ä¹ ", "äººå·¥", "æ™ºèƒ½", "æŠ€æœ¯"]</code></p>
<p>åœ¨è¿™ä¸ªæ¯”å–»ä¸­ï¼š</p>
<ul>
<li>
<p><strong>æ•´å¥è¯</strong></p>
<p>å°±åƒé‚£ç›’å®Œæ•´çš„ç³–æœ</p>
</li>
<li>
<p><strong>æ¯ä¸ªå°åŒ…è£…</strong></p>
<p>å°±æ˜¯ä¸€ä¸ªToken</p>
</li>
<li>
<p><strong>åˆ†è£…è¿‡ç¨‹</strong></p>
<p>å°±æ˜¯Tokenizationï¼ˆåˆ†è¯ï¼‰</p>
</li>
</ul>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½æç„¶å¤§æ‚Ÿï¼šâ€œå“¦ï¼ŒTokenå°±æ˜¯è¯è¯­å˜›ï¼â€</p>
<p>åˆ«æ€¥ï¼Œäº‹æƒ…æ²¡é‚£ä¹ˆç®€å•ã€‚è®©æˆ‘ä»¬ç»§ç»­æ·±å…¥...</p>
<h2 data-id="heading-1">äºŒã€Tokençš„çœŸé¢ç›®ï¼šä¸åªæ˜¯è¯è¯­</h2>
<p>åœ¨å®é™…çš„å¤§æ¨¡å‹ä¸­ï¼ŒTokençš„åˆ’åˆ†è¦æ¯”ç®€å•çš„â€œæŒ‰è¯åˆ†â€å¤æ‚å¾—å¤šã€‚è®©æˆ‘ä»¬çœ‹çœ‹çœŸå®æƒ…å†µï¼š</p>
<p><strong>è‹±æ–‡ä¾‹å­</strong>ï¼š</p>
<ul>
<li>è¾“å…¥ï¼š<code>"I'm learning AI."</code></li>
<li>TokenåŒ–ï¼š<code>["I", "'", "m", " learning", " AI", "."]</code></li>
</ul>
<p><strong>ä¸­æ–‡ä¾‹å­</strong>ï¼š</p>
<ul>
<li>è¾“å…¥ï¼š<code>"æˆ‘æ­£åœ¨å­¦ä¹ äººå·¥æ™ºèƒ½"</code></li>
<li>TokenåŒ–ï¼š<code>["æˆ‘", "æ­£åœ¨", "å­¦ä¹ ", "äººå·¥", "æ™ºèƒ½"]</code></li>
</ul>
<p>å‘ç°äº†å—ï¼ŸTokenå¯ä»¥æ˜¯ï¼š</p>
<ul>
<li>
<p>å®Œæ•´çš„è¯ï¼ˆå¦‚â€œå­¦ä¹ â€ï¼‰</p>
</li>
<li>
<p>è¯çš„ä¸€éƒ¨åˆ†ï¼ˆå¦‚â€œäººå·¥â€ã€â€œæ™ºèƒ½â€ï¼‰</p>
</li>
<li>
<p>æ ‡ç‚¹ç¬¦å·ï¼ˆå¦‚å¥å·ï¼‰</p>
</li>
<li>
<p>ç”šè‡³å•è¯çš„ä¸€éƒ¨åˆ†ï¼ˆå¦‚è‹±æ–‡ä¸­çš„"'m"ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8dd9ba3f0094e3bb57b6e1ce508f1ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763366450&amp;x-signature=ZKzP0UJrRB4YiRIsx5uEGHZ6Suo%3D" alt="" loading="lazy"/></p>
</li>
</ul>
<p>å›¾ç¤ºï¼šä¸åŒè¯­è¨€çš„TokenåŒ–ç»“æœå¯¹æ¯”</p>
<h2 data-id="heading-2">ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦Tokenï¼Ÿä¸‰å¤§æ ¸å¿ƒåŸå› </h2>
<ol start="0">
<li>
<p><strong>è§£å†³è¯æ±‡è¡¨çˆ†ç‚¸é—®é¢˜</strong></p>
<p>å¦‚æœæ¯ä¸ªè¯éƒ½å•ç‹¬å¤„ç†ï¼Œæ¨¡å‹éœ€è¦è®°ä½æ•°ç™¾ä¸‡ä¸ªè¯ã€‚é€šè¿‡å°†è¯æ‹†åˆ†æˆæ›´å°çš„Tokenï¼Œåªéœ€è¦å‡ åƒä¸ªTokenå°±èƒ½ç»„åˆå‡ºå‡ ä¹æ‰€æœ‰çš„è¯ã€‚</p>
</li>
<li>
<p><strong>å¤„ç†æœªçŸ¥è¯æ±‡</strong></p>
<p>å½“æ¨¡å‹é‡åˆ°æ²¡è§è¿‡çš„è¯æ—¶ï¼Œå¦‚æœæ˜¯åŸºäºTokençš„ï¼Œå®ƒå¯ä»¥ç”¨å·²çŸ¥çš„Tokenæ¥â€œæ‹¼å‡‘â€ç†è§£ã€‚æ¯”å¦‚é‡åˆ°â€œæ·±åº¦å­¦ä¹ â€ï¼Œå³ä½¿æ²¡å­¦è¿‡è¿™ä¸ªè¯ï¼Œä¹ŸçŸ¥é“â€œæ·±åº¦â€å’Œâ€œå­¦ä¹ â€è¿™ä¸¤ä¸ªTokenã€‚</p>
</li>
<li>
<p><strong>ç»Ÿä¸€å¤šè¯­è¨€å¤„ç†</strong></p>
<p>ä¸åŒè¯­è¨€çš„è¯æ±‡ç»“æ„å·®å¼‚å¾ˆå¤§ï¼Œä½†é€šè¿‡TokenåŒ–ï¼Œå¯ä»¥å»ºç«‹ç»Ÿä¸€çš„æ–¹å¼æ¥å¤„ç†å„ç§è¯­è¨€ã€‚</p>
</li>
</ol>
<h2 data-id="heading-3">å››ã€Tokençš„â€œä»·æ ¼ä½“ç³»â€ï¼šæˆæœ¬ä¸é™åˆ¶</h2>
<p>ç†è§£Tokençš„å¦ä¸€ä¸ªé‡è¦è§’åº¦æ˜¯ï¼š<strong>Tokenæ˜¯è®¡ç®—æˆæœ¬çš„å•ä½</strong>ã€‚</p>
<p>åœ¨å¤§å¤šæ•°å¤§æ¨¡å‹ä¸­ï¼š</p>
<ul>
<li>
<p><strong>è¾“å…¥å’Œè¾“å‡ºéƒ½æŒ‰Tokenè®¡æ•°</strong></p>
</li>
<li>
<p><strong>è®¡ç®—èµ„æºä¸Tokenæ•°é‡ç›´æ¥ç›¸å…³</strong></p>
</li>
<li>
<p><strong>æ¨¡å‹æœ‰æœ€å¤§Tokené™åˆ¶</strong></p>
<p>ï¼ˆä¸Šä¸‹æ–‡çª—å£ï¼‰</p>
</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·è¾“å…¥ï¼š32ä¸ªTokenæ¨¡å‹å›å¤ï¼š45ä¸ªTokenæœ¬æ¬¡å¯¹è¯æ€»è®¡ï¼š77ä¸ªToken
</code></pre>
<p>è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆï¼š</p>
<ul>
<li>é•¿æ–‡æ¡£å¤„ç†æˆæœ¬æ›´é«˜</li>
<li>å¯¹è¯æœ‰é•¿åº¦é™åˆ¶</li>
<li>ç²¾ç®€çš„Promptèƒ½èŠ‚çœèµ„æº</li>
</ul>
<p>å›¾ç¤ºï¼šAPIè°ƒç”¨ä¸­Tokençš„è®¡è´¹æ–¹å¼ï¼ˆæ¥æºï¼šOpenAIï¼‰</p>
<h2 data-id="heading-4">äº”ã€äº²æ‰‹å®éªŒï¼šçœ‹çœ‹çœŸå®Tokené•¿ä»€ä¹ˆæ ·</h2>
<p>ç†è®ºè¯´å†å¤šï¼Œä¸å¦‚äº²æ‰‹è¯•è¯•ã€‚ä½ å¯ä»¥åœ¨ä»¥ä¸‹å¹³å°ç›´è§‚çœ‹åˆ°æ–‡æœ¬æ˜¯å¦‚ä½•è¢«TokenåŒ–çš„ï¼š</p>
<p><strong>æ¨èå·¥å…·</strong>ï¼š</p>
<ul>
<li>
<p><strong>OpenAI Tokenizer</strong></p>
<p>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Ftokenizer" target="_blank" title="https://platform.openai.com/tokenizer" ref="nofollow noopener noreferrer">platform.openai.com/tokenizer</a></p>
</li>
<li>
<p><strong>Hugging Face Tokenizer</strong></p>
<p>ï¼šå„ç§æ¨¡å‹çš„åœ¨çº¿æ¼”ç¤º</p>
</li>
</ul>
<p>è¯•ç€è¾“å…¥ä¸€äº›æ–‡æœ¬ï¼Œè§‚å¯Ÿå®ƒä»¬æ˜¯å¦‚ä½•è¢«æ‹†åˆ†çš„ã€‚è¿™ä¸ªç»ƒä¹ ä¼šè®©ä½ å¯¹Tokenæœ‰æ›´ç›´è§‚çš„æ„Ÿå—ã€‚</p>
<h2 data-id="heading-5">å…­ã€Tokenåœ¨å¤§æ¨¡å‹ä¸­çš„æ ¸å¿ƒä½œç”¨</h2>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä»æ›´é«˜è§†è§’çœ‹Tokençš„é‡è¦æ€§ï¼š</p>
<ol start="0">
<li>
<p><strong>æ¨¡å‹ç†è§£çš„â€œåŸææ–™â€</strong></p>
<p>å¤§æ¨¡å‹å¹¶ä¸ç›´æ¥ç†è§£æ–‡å­—ï¼Œå®ƒä»¬ç†è§£çš„æ˜¯Tokençš„æ•°å­—è¡¨ç¤ºã€‚æ¯ä¸ªTokenéƒ½è¢«è½¬æ¢æˆä¸€ä¸ªæ•°å­—IDï¼Œæ¨¡å‹åŸºäºè¿™äº›IDè¿›è¡Œè®¡ç®—ã€‚</p>
</li>
<li>
<p><strong>è®­ç»ƒçš„åŸºç¡€å•å…ƒ</strong></p>
<p>åœ¨æ¨¡å‹è®­ç»ƒæ—¶ï¼Œå®ƒå­¦ä¹ çš„æ˜¯Tokenä¹‹é—´çš„æ¦‚ç‡å…³ç³»ã€‚â€œä»Šå¤©å¤©æ°”å¾ˆâ€åé¢å¾ˆå¯èƒ½æ¥â€œå¥½â€ï¼Œè€Œä¸æ˜¯â€œé¦™è•‰â€ã€‚</p>
</li>
<li>
<p><strong>ç”Ÿæˆæ–‡æœ¬çš„â€œç§¯æœ¨â€</strong></p>
<p>å½“æ¨¡å‹ç”Ÿæˆæ–‡æœ¬æ—¶ï¼Œå®ƒå®é™…ä¸Šæ˜¯åœ¨é¢„æµ‹ä¸‹ä¸€ä¸ªæœ€å¯èƒ½çš„Tokenï¼Œç„¶ååŸºäºæ–°çš„Tokenç»§ç»­é¢„æµ‹ä¸‹ä¸€ä¸ªï¼Œå¦‚æ­¤å¾ªç¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8002cf564fe24d0384a0853f49484c7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763366450&amp;x-signature=YZ6nNelqrKMIzROvBHzdqGXy4tU%3D" alt="" loading="lazy"/></p>
</li>
</ol>
<h2 data-id="heading-6">ä¸ƒã€è¿›é˜¶çŸ¥è¯†ï¼šä¸åŒæ¨¡å‹çš„Tokenå·®å¼‚</h2>
<p>å½“ä½ æ·±å…¥ä½¿ç”¨æ—¶ï¼Œä¼šå‘ç°ä¸åŒæ¨¡å‹æœ‰ä¸åŒçš„TokenåŒ–ç­–ç•¥ï¼š</p>
<ul>
<li>
<p><strong>GPTç³»åˆ—</strong></p>
<p>ï¼šä½¿ç”¨Byte Pair Encoding (BPE)</p>
</li>
<li>
<p><strong>BERTç³»åˆ—</strong></p>
<p>ï¼šä½¿ç”¨WordPiece</p>
</li>
<li>
<p><strong>SentencePiece</strong></p>
<p>ï¼šç”¨äºå¤šè¯­è¨€æ¨¡å‹</p>
</li>
</ul>
<p>ä¸è¿‡ä½œä¸ºåˆå­¦è€…ï¼Œä½ åªéœ€è¦çŸ¥é“ï¼š<strong>ä¸åŒæ¨¡å‹å¯¹åŒä¸€æ–‡æœ¬å¯èƒ½äº§ç”Ÿä¸åŒæ•°é‡çš„Token</strong>ï¼Œè¿™ä¼šå½±å“ä½¿ç”¨æˆæœ¬å’Œæ•ˆæœã€‚</p>
<p><strong>å®è·µå°è´´å£«</strong></p>
<p>åŸºäºå¯¹Tokençš„ç†è§£ï¼Œè¿™é‡Œæœ‰äº›å®ç”¨å»ºè®®ï¼š</p>
<ol start="0">
<li>
<p><strong>ä¼˜åŒ–Prompt</strong></p>
<p>ï¼šåˆ é™¤ä¸å¿…è¦çš„è¯è¯­ï¼Œå‡å°‘Tokenæ¶ˆè€—</p>
</li>
<li>
<p><strong>å¤„ç†é•¿æ–‡æœ¬</strong></p>
<p>ï¼šæ„è¯†åˆ°é•¿æ–‡æ¡£éœ€è¦åˆ†æ®µå¤„ç†</p>
</li>
<li>
<p><strong>æˆæœ¬ä¼°ç®—</strong></p>
<p>ï¼šåœ¨è°ƒç”¨APIå‰ï¼Œå…ˆç”¨Tokenizerå·¥å…·ä¼°ç®—Tokenæ•°é‡</p>
</li>
<li>
<p><strong>ä¸­æ–‡ç‰¹æ€§</strong></p>
<p>ï¼šä¸­æ–‡å­—ç¬¦é€šå¸¸1ä¸ªæ±‰å­—=1-2ä¸ªTokenï¼Œè‹±æ–‡å•è¯å¯èƒ½è¢«æ‹†åˆ†æˆå¤šä¸ªToken</p>
</li>
</ol>
<p><strong>ç»“è¯­</strong></p>
<p>æ­å–œï¼ç°åœ¨ä½ å·²ç»ä¸å†æ˜¯Tokenå°ç™½äº†ã€‚æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ä»Šå¤©çš„é‡ç‚¹ï¼š</p>
<ul>
<li>âœ…Â <strong>Tokenæ˜¯æ–‡æœ¬çš„åŸºæœ¬å¤„ç†å•å…ƒ</strong>ï¼Œä¸å®Œå…¨æ˜¯è¯è¯­</li>
<li>âœ…Â <strong>TokenåŒ–è®©æ¨¡å‹èƒ½é«˜æ•ˆå¤„ç†å„ç§è¯­è¨€å’Œæ–°è¯</strong></li>
<li>âœ…Â <strong>Tokenæ˜¯è®¡ç®—æˆæœ¬å’Œèµ„æºé™åˆ¶çš„è®¡é‡å•ä½</strong></li>
<li>âœ…Â <strong>ç†è§£Tokenæœ‰åŠ©äºä¼˜åŒ–ä½¿ç”¨å¤§æ¨¡å‹</strong></li>
</ul>
<p>å­¦ä¹ å¤§æ¨¡å‹å°±åƒå­¦ä¸€é—¨æ–°è¯­è¨€ï¼Œè€ŒTokenå°±æ˜¯è¿™é—¨è¯­è¨€çš„å­—æ¯è¡¨ã€‚æŒæ¡äº†å®ƒï¼Œä½ å°±æ‰“å¼€äº†ç†è§£æ•´ä¸ªAIä¸–ç•Œçš„å¤§é—¨ã€‚</p>
<p><strong>PSï¼š</strong> åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢ç´¢å¦ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µâ€”â€”Embeddingï¼ˆåµŒå…¥ï¼‰ï¼Œçœ‹çœ‹æ¨¡å‹æ˜¯å¦‚ä½•æŠŠæ–‡å­—å˜æˆæ•°å­—å‘é‡çš„ã€‚ç›¸ä¿¡æˆ‘ï¼Œé‚£ä¼šæ˜¯å¦ä¸€ä¸ªâ€œåŸæ¥å¦‚æ­¤â€çš„ç¾å¦™æ—¶åˆ»ï¼</p>
<p><em>è§‰å¾—æœ‰æ”¶è·å—ï¼Ÿæ¬¢è¿æ”¶è—è¿™ç¯‡æ–‡ç« ï¼Œåœ¨å®è·µè¿‡ç¨‹ä¸­æœ‰ä»»ä½•å…³äºTokençš„é—®é¢˜ï¼Œéƒ½å¯ä»¥å›æ¥æ¸©ä¹ ã€‚å­¦ä¹ è·¯ä¸Šï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ï¼</em></p>
<h2 data-id="heading-7">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 çš„ Composition API å’Œ Options API æœ‰å“ªäº›åŒºåˆ«ï¼Ÿä¸¾ä¾‹è¯´æ˜ Composition API çš„ä¼˜åŠ¿ã€‚]]></title>    <link>https://juejin.cn/post/7570604028633628707</link>    <guid>https://juejin.cn/post/7570604028633628707</guid>    <pubDate>2025-11-10T06:16:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570604028633628707" data-draft-id="7570659828810334242" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 çš„ Composition API å’Œ Options API æœ‰å“ªäº›åŒºåˆ«ï¼Ÿä¸¾ä¾‹è¯´æ˜ Composition API çš„ä¼˜åŠ¿ã€‚"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-10T06:16:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 çš„ Composition API å’Œ Options API æœ‰å“ªäº›åŒºåˆ«ï¼Ÿä¸¾ä¾‹è¯´æ˜ Composition API çš„ä¼˜åŠ¿ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:16:23.000Z" title="Mon Nov 10 2025 06:16:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€ä¸¤è€…çš„å®šä¹‰ä¸æ ¸å¿ƒæ€æƒ³</strong></h2>


















































<table><thead><tr><th><strong>é¡¹ç›®</strong></th><th><strong>Options APIï¼ˆVue2 ä¼ ç»Ÿå†™æ³•ï¼‰</strong></th><th><strong>Composition APIï¼ˆVue3 æ–°å†™æ³•ï¼‰</strong></th></tr></thead><tbody><tr><td>æ ¸å¿ƒç†å¿µ</td><td>æŒ‰â€œé€‰é¡¹ç±»å‹â€ç»„ç»‡ä»£ç ï¼ˆdataã€methodsã€computedã€watch åˆ†åŒºï¼‰</td><td>æŒ‰â€œåŠŸèƒ½é€»è¾‘â€ç»„ç»‡ä»£ç ï¼ˆé€»è¾‘èšåˆã€å‡½æ•°å¤ç”¨ï¼‰</td></tr><tr><td>å†™æ³•å½¢å¼</td><td>export default { data(){}, methods:{}, computed:{}}</td><td>ä½¿ç”¨ setup() å‡½æ•°ï¼Œé€šè¿‡ refã€reactiveã€computedã€watch ç­‰ç»„åˆé€»è¾‘</td></tr><tr><td>å­¦ä¹ æ›²çº¿</td><td>ç®€å•ç›´è§‚ï¼Œé€‚åˆå°é¡¹ç›®</td><td>åˆæœŸç•¥å¤æ‚ï¼Œä½†åœ¨å¤§å‹é¡¹ç›®ä¸­æ›´æ¸…æ™°</td></tr><tr><td>ä»£ç ç»„ç»‡</td><td>åˆ†æ•£ï¼šç›¸å…³é€»è¾‘è¢«æ‹†åœ¨ä¸åŒé€‰é¡¹ä¸­</td><td>èšåˆï¼šç›¸å…³é€»è¾‘å¯ä»¥é›†ä¸­åœ¨ä¸€èµ·</td></tr><tr><td>é€»è¾‘å¤ç”¨</td><td>ä¾èµ– mixinsï¼ˆæœ‰å‘½åå†²çªã€æ¥æºä¸æ˜ç­‰é—®é¢˜ï¼‰</td><td>å¯é€šè¿‡è‡ªå®šä¹‰ hook å‡½æ•°ï¼ˆç»„åˆå¼å‡½æ•°ï¼‰çµæ´»å¤ç”¨</td></tr><tr><td>this æŒ‡å‘</td><td>è‡ªåŠ¨ç»‘å®šç»„ä»¶å®ä¾‹</td><td>æ²¡æœ‰ thisï¼Œç›´æ¥ä½¿ç”¨å®šä¹‰çš„å˜é‡</td></tr><tr><td>Tree-shaking</td><td>ä¸æ”¯æŒï¼ˆVue å…¨é‡å¼•å…¥ï¼‰</td><td>æ”¯æŒæŒ‰éœ€å¼•å…¥ï¼Œæ„å»ºæ›´å°</td></tr><tr><td>ç±»å‹æ”¯æŒ</td><td>TypeScript å…¼å®¹è¾ƒå¼±</td><td>å¤©ç„¶æ”¯æŒ TypeScript ç±»å‹æ¨å¯¼</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€ç¤ºä¾‹å¯¹æ¯”</strong></h2>
<h3 data-id="heading-2"><strong>ğŸ§© 1. Options API å†™æ³•ï¼ˆVue2 é£æ ¼ï¼‰</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
    }
  },
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-title function_">double</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++
    }
  }
}
</code></pre>
<h3 data-id="heading-3"><strong>ğŸ§  2. Composition API å†™æ³•ï¼ˆVue3 æ–°å†™æ³•ï¼‰</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">const</span> double = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; count.<span class="hljs-property">value</span>++

    <span class="hljs-keyword">return</span> { count, double, increment }
  }
}
</code></pre>
<p>ğŸ‘‰ å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>Composition API ç›´æ¥é€šè¿‡å‡½æ•°å¼ API æ“ä½œæ•°æ®ï¼›</li>
<li>ä¸ä¾èµ– thisï¼›</li>
<li>æ‰€æœ‰é€»è¾‘åœ¨ setup() å†…éƒ¨é›†ä¸­å®šä¹‰ï¼Œæ›´æ˜“äºç»„åˆä¸æŠ½ç¦»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4"><strong>ä¸‰ã€Composition API çš„ä¼˜åŠ¿è¯¦è§£</strong></h2>
<h3 data-id="heading-5"><strong>1ï¸âƒ£ é€»è¾‘èšåˆï¼ˆLogic Compositionï¼‰</strong></h3>
<p>åœ¨ Options API ä¸­ï¼Œä¸€ä¸ªåŠŸèƒ½é€»è¾‘å¾€å¾€è¢«æ‹†æ•£åœ¨ä¸åŒåŒºåŸŸï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¾‹å­ï¼šè·å–ç”¨æˆ·æ•°æ® + ç›‘å¬çª—å£å¤§å°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">width</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> }
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchUser</span>()
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params"/>) { ... }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateWidth</span>)
  },
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateWidth</span>)
  }
}
</code></pre>
<p>è¿™äº›é€»è¾‘â€œåŠŸèƒ½ä¸Šæ˜¯ç›¸å…³çš„â€ï¼Œä½†åœ¨ä»£ç ä¸­è¢«â€œç»“æ„ä¸Šæ‹†æ•£â€ã€‚</p>
<p>Composition API èƒ½è®©å®ƒä»¬èšåˆåœ¨ä¸€èµ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> user = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
    <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">ref</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>)

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUser</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; { ... }

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateWidth</span> = (<span class="hljs-params"/>) =&gt; { width.<span class="hljs-property">value</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> }

    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">fetchUser</span>()
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, updateWidth)
    })
    <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, updateWidth))

    <span class="hljs-keyword">return</span> { user, width }
  }
}
</code></pre>
<p>è¿™æ ·ï¼š</p>
<ul>
<li>é€»è¾‘æ›´èšåˆï¼›</li>
<li>ç”Ÿå‘½å‘¨æœŸä¸é€»è¾‘æ“ä½œæ›´æ¥è¿‘ï¼›</li>
<li>æ›´å®¹æ˜“ç»´æŠ¤å’Œé˜…è¯»ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>2ï¸âƒ£ é€»è¾‘å¤ç”¨æ›´å¼ºï¼ˆHooksï¼‰</strong></h3>
<p>Vue2 æ—¶ä»£é€»è¾‘å¤ç”¨ä¸»è¦é  <strong>Mixins</strong>ï¼Œä½†å­˜åœ¨ï¼š</p>
<ul>
<li>
<p>å‘½åå†²çªï¼›</p>
</li>
<li>
<p>æ¥æºä¸æ˜ï¼›</p>
</li>
<li>
<p>æ•°æ®æ¥æºä¸æ¸…æ™°ï¼›</p>
</li>
<li>
<p>é€»è¾‘éš¾è¿½è¸ªã€‚</p>
</li>
</ul>
<p>è€Œ Composition API å…è®¸æˆ‘ä»¬åƒ React Hooks ä¸€æ ·å°è£…å¤ç”¨é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// useMouse.js</span>
<span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMouse</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> y = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = e =&gt; {
    x.<span class="hljs-property">value</span> = e.<span class="hljs-property">pageX</span>
    y.<span class="hljs-property">value</span> = e.<span class="hljs-property">pageY</span>
  }
  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update))
  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update))
  <span class="hljs-keyword">return</span> { x, y }
}
</code></pre>
<p>åœ¨ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useMouse } <span class="hljs-keyword">from</span> <span class="hljs-string">'./useMouse'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { x, y } = <span class="hljs-title function_">useMouse</span>()
    <span class="hljs-keyword">return</span> { x, y }
  }
}
</code></pre>
<p>ğŸ‘‰ é€»è¾‘æŠ½ç¦»æ¸…æ™°ï¼Œå¤ç”¨ç®€å•ï¼Œå®Œå…¨æ— å‰¯ä½œç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>3ï¸âƒ£ æ›´å¥½çš„ TypeScript æ”¯æŒ</strong></h3>
<p>åœ¨ Composition API ä¸­ï¼š</p>
<ul>
<li>refã€reactive éƒ½æœ‰å®Œå–„çš„ç±»å‹æ¨å¯¼ï¼›</li>
<li>ä¸éœ€è¦å†å£°æ˜ this çš„ç±»å‹ï¼›</li>
<li>è¿”å›å€¼ç›´æ¥ç”± IDE è‡ªåŠ¨æç¤ºç±»å‹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>4ï¸âƒ£ æ€§èƒ½å’Œç¼–è¯‘ä¼˜åŒ–</strong></h3>
<ul>
<li>Vue3 ä½¿ç”¨äº† <strong>åŸºäºæ¨¡æ¿ç¼–è¯‘ä¼˜åŒ–çš„å“åº”æ€§è¿½è¸ª</strong>ï¼›</li>
<li>Composition API çš„å‡½æ•°å¼ç»“æ„æ›´å®¹æ˜“è¢«ç¼–è¯‘å™¨åˆ†æï¼›</li>
<li>ç»“åˆ <strong>Tree-shaking</strong> å¯å‡å°åŒ…ä½“ç§¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-9"><strong>å››ã€ä½•æ—¶ç”¨å“ªç§ APIï¼Ÿ</strong></h2>

























<table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>æ¨è API</strong></th></tr></thead><tbody><tr><td>å°å‹é¡¹ç›® / åˆå­¦è€…</td><td>Options APIï¼ˆç»“æ„ç›´è§‚ï¼‰</td></tr><tr><td>å¤§å‹é¡¹ç›® / å¤æ‚é€»è¾‘</td><td>Composition APIï¼ˆé€»è¾‘æ›´æ¸…æ™°ï¼Œå¯å¤ç”¨ï¼‰</td></tr><tr><td>éœ€è¦é€»è¾‘æŠ½ç¦»æˆ–æ’ä»¶å¼€å‘</td><td>Composition API</td></tr><tr><td>éœ€è¦ TypeScript æ”¯æŒ</td><td>Composition API</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10"><strong>äº”ã€æ€»ç»“ä¸€å¥è¯</strong></h2>
<blockquote>
<p><strong>Options API</strong>ï¼šç»“æ„åŒ–ã€ä¸Šæ‰‹å¿«ï¼Œä½†é€»è¾‘åˆ†æ•£ã€‚</p>
</blockquote>
<blockquote>
<p><strong>Composition API</strong>ï¼šå‡½æ•°åŒ–ã€æ¨¡å—åŒ–ï¼Œé€»è¾‘èšåˆã€å¤ç”¨å¼ºï¼Œæ˜¯ Vue3 çš„æœªæ¥æ–¹å‘ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éƒ½è¯´node.jsæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7570295366480576548</link>    <guid>https://juejin.cn/post/7570295366480576548</guid>    <pubDate>2025-11-10T06:19:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570295366480576548" data-draft-id="7570339961909329963" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éƒ½è¯´node.jsæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2025-11-10T06:19:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éƒ½è¯´node.jsæ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:19:49.000Z" title="Mon Nov 10 2025 06:19:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€å¤´</h2>
<p>ä¹‹å‰çœ‹ä¸€äº› Node.js çš„æŠ€æœ¯æ–‡ç« æˆ–è€…å®˜æ–¹æ–‡æ¡£ï¼Œç»å¸¸ä¼šçœ‹åˆ°"äº‹ä»¶é©±åŠ¨"è¿™ä¸ªè¯â€”â€”Node.js æ˜¯äº‹ä»¶é©±åŠ¨çš„ã€äº‹ä»¶é©±åŠ¨æ¶æ„ã€åŸºäºäº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥ I/O æ¨¡å‹ã€‚</p>
<p>ä½†è¿™åˆ°åº•æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>ä»€ä¹ˆæ˜¯äº‹ä»¶é©±åŠ¨ï¼Ÿè·Ÿæˆ‘ä»¬å¹³å¸¸å†™çš„ä»£ç æœ‰ä»€ä¹ˆä¸ä¸€æ ·ï¼Ÿ</li>
<li>é™¤äº†äº‹ä»¶é©±åŠ¨,è¿˜æœ‰åˆ«çš„ç¼–ç¨‹æ¨¡å‹å—ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆ Node.js è¦é€‰æ‹©äº‹ä»¶é©±åŠ¨ï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</li>
<li>äº‹ä»¶é©±åŠ¨æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŸèƒŒåçš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<p>æœ‰äººè¯´äº‹ä»¶é©±åŠ¨å°±æ˜¯"æ³¨å†Œå›è°ƒå‡½æ•°,ç­‰äº‹ä»¶å‘ç”Ÿæ—¶è°ƒç”¨",ä½†ä¸ºä»€ä¹ˆè¿™ç§æ–¹å¼é€‚åˆ I/O å¯†é›†å‹åº”ç”¨ï¼Ÿä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯éé˜»å¡çš„?</p>
<p>ç ”ç©¶äº†ä¸€ä¸‹æ‰å‘ç°,äº‹ä»¶é©±åŠ¨ä¸åªæ˜¯ä¸€ç§ç¼–ç¨‹é£æ ¼,å®ƒèƒŒåæ˜¯ä¸€æ•´å¥—å®Œå…¨ä¸åŒçš„ç¨‹åºæ‰§è¡Œæ¨¡å‹ã€‚ç†è§£äº†å®ƒ,å°±èƒ½æ˜ç™½ä¸ºä»€ä¹ˆ Node.js ç”¨å•çº¿ç¨‹ä¹Ÿèƒ½é«˜å¹¶å‘,ä¹Ÿèƒ½æ›´å¥½åœ°ç†è§£å¼‚æ­¥ç¼–ç¨‹ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿå¯¹äº‹ä»¶é©±åŠ¨æ„Ÿå…´è¶£,æƒ³ææ¸…æ¥šå®ƒçš„åŸç†å’Œåº”ç”¨åœºæ™¯,é‚£å°±è·Ÿæˆ‘ä¸€èµ·æ¥å­¦ä¹ ä¸€ä¸‹å§ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ç¼–ç¨‹æ¨¡å‹ï¼Ÿ</h2>
<p>åœ¨è¯´äº‹ä»¶é©±åŠ¨ä¹‹å‰,å…ˆå¾—ææ¸…æ¥šä»€ä¹ˆæ˜¯"ç¼–ç¨‹æ¨¡å‹"ã€‚</p>
<p>ç¼–ç¨‹æ¨¡å‹(Programming Model)è¯´ç©¿äº†å°±æ˜¯:ç¨‹åºæ€ä¹ˆç»„ç»‡ã€æ€ä¹ˆæ‰§è¡Œã€æ€ä¹ˆå¤„ç†å¹¶å‘çš„ä¸€å¥—è§„åˆ™å’Œæ€è·¯ã€‚</p>
<p>å°±åƒç›–æˆ¿å­,å¯ä»¥ç”¨ä¸åŒçš„å»ºç­‘é£æ ¼â€”â€”ä¸­å¼ã€æ¬§å¼ã€ç°ä»£ç®€çº¦ã€‚ç¼–ç¨‹ä¹Ÿä¸€æ ·,åŒæ ·çš„åŠŸèƒ½å¯ä»¥ç”¨ä¸åŒçš„æ¨¡å‹æ¥å®ç°,æ¯ç§æ¨¡å‹æœ‰è‡ªå·±çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">å¸¸è§çš„å‡ ç§ç¼–ç¨‹æ¨¡å‹</h3>
<p>ä¸»æµçš„ç¼–ç¨‹æ¨¡å‹ä¸»è¦æœ‰è¿™å‡ ç§:</p>
<p><strong>1. åŒæ­¥é˜»å¡æ¨¡å‹</strong> (ä¼ ç»Ÿçš„ Cã€Java çº¿ç¨‹æ¨¡å‹)
ç¨‹åºä¸€è¡Œè¡Œå¾€ä¸‹æ‰§è¡Œ,é‡åˆ° I/O æ“ä½œå°±ç­‰ç€,ç›´åˆ°å®Œæˆæ‰ç»§ç»­ã€‚æƒ³è¦å¹¶å‘?å¼€å¤šä¸ªçº¿ç¨‹ã€‚</p>
<p><strong>2. äº‹ä»¶é©±åŠ¨æ¨¡å‹</strong> (Node.jsã€Nginx)
ç¨‹åºæ³¨å†Œä¸€å †äº‹ä»¶ç›‘å¬å™¨,ç„¶ååœ¨äº‹ä»¶å¾ªç¯é‡Œä¸æ–­æ£€æŸ¥æœ‰æ²¡æœ‰äº‹ä»¶å‘ç”Ÿ,æœ‰å°±è°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°ã€‚</p>
<p><strong>3. åç¨‹æ¨¡å‹</strong> (Goã€Python asyncio)
çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ,ä½†é‡åˆ° I/O æ—¶ä¼šä¸»åŠ¨è®©å‡º CPU,ç­‰ I/O å®Œæˆåæ¢å¤æ‰§è¡Œã€‚</p>
<p><strong>4. Actor æ¨¡å‹</strong> (Erlangã€Akka)
æŠŠç¨‹åºæ‹†æˆå¾ˆå¤šç‹¬ç«‹çš„ actor,æ¯ä¸ª actor æœ‰è‡ªå·±çš„çŠ¶æ€,é€šè¿‡æ¶ˆæ¯ä¼ é€’é€šä¿¡ã€‚</p>
<p>è¿™äº›æ¨¡å‹æ²¡æœ‰ç»å¯¹çš„å¥½å,åªæœ‰é€‚ä¸é€‚åˆã€‚å°±åƒèºä¸åˆ€å’Œé”¤å­,ä¿®ç”µè„‘ç”¨èºä¸åˆ€,é’‰é’‰å­ç”¨é”¤å­,ç”¨å¯¹äº†å·¥å…·æ‰èƒ½äº‹åŠåŠŸå€ã€‚</p>
<h2 data-id="heading-3">äº‹ä»¶é©±åŠ¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-4">æ ¸å¿ƒæ€æƒ³</h3>
<p>äº‹ä»¶é©±åŠ¨çš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•:</p>
<p><strong>ä¸è¦ç­‰,è€Œæ˜¯ç•™ä¸ªè”ç³»æ–¹å¼,äº‹æƒ…å¥½äº†é€šçŸ¥æˆ‘ã€‚</strong></p>
<p>å°±åƒå»é¥­é¦†åƒé¥­,æœ‰ä¸¤ç§æ–¹å¼:</p>
<ul>
<li><strong>é˜»å¡æ–¹å¼</strong>:ç«™åœ¨çª—å£ç­‰,ä¸€ç›´ç›¯ç€å¨å¸ˆç‚’èœ,ç‚’å¥½äº†æ‹¿èµ°</li>
<li><strong>äº‹ä»¶é©±åŠ¨æ–¹å¼</strong>:æ‹¿ä¸ªå·,åä¸‹æ¥ç©æ‰‹æœº,å«å·äº†(äº‹ä»¶å‘ç”Ÿ)å†å»å–</li>
</ul>
<p>Node.js å°±æ˜¯ç¬¬äºŒç§æ–¹å¼ã€‚ç¨‹åºä¸ä¼šå‚»ç­‰ I/O æ“ä½œå®Œæˆ,è€Œæ˜¯æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°,å‘Šè¯‰ç³»ç»Ÿ"I/O å®Œæˆäº†å«æˆ‘",ç„¶åç»§ç»­å¹²åˆ«çš„äº‹ã€‚</p>
<h3 data-id="heading-5">äº‹ä»¶é©±åŠ¨çš„ä¸‰è¦ç´ </h3>
<p>è¦ç†è§£äº‹ä»¶é©±åŠ¨,å¾—ææ¸…æ¥šä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[äº‹ä»¶æº] --&gt; B[äº‹ä»¶å¾ªç¯]
    B --&gt; C[äº‹ä»¶å¤„ç†å™¨]
    C --&gt; B
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1e1
</code></pre>
<p><strong>1. äº‹ä»¶æº(Event Source)</strong>
äº§ç”Ÿäº‹ä»¶çš„åœ°æ–¹ã€‚åœ¨ Node.js é‡Œ,å¸¸è§çš„äº‹ä»¶æºæœ‰:</p>
<ul>
<li>æ–‡ä»¶è¯»å†™(fs.readFile å®Œæˆ)</li>
<li>ç½‘ç»œè¯·æ±‚(HTTP è¯·æ±‚åˆ°è¾¾)</li>
<li>å®šæ—¶å™¨(setTimeout æ—¶é—´åˆ°)</li>
<li>ç”¨æˆ·è¾“å…¥(process.stdin æ”¶åˆ°æ•°æ®)</li>
</ul>
<p><strong>2. äº‹ä»¶å¾ªç¯(Event Loop)</strong>
äº‹ä»¶é©±åŠ¨çš„å¿ƒè„ã€‚å®ƒä¸åœåœ°æ£€æŸ¥æœ‰æ²¡æœ‰äº‹ä»¶å‘ç”Ÿ,æœ‰å°±æ‹¿å‡ºæ¥å¤„ç†ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªæ°¸ä¸åœæ­‡çš„ä¼ é€å¸¦,äº‹ä»¶æ”¾ä¸Šå»,ä¸€ä¸ªä¸ªè¢«æ‹¿èµ°å¤„ç†ã€‚</p>
<p><strong>3. äº‹ä»¶å¤„ç†å™¨(Event Handler/Callback)</strong>
äº‹ä»¶å‘ç”Ÿæ—¶è¦æ‰§è¡Œçš„ä»£ç ,é€šå¸¸å°±æ˜¯ä½ æ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚</p>
<h3 data-id="heading-6">ä¸€ä¸ªç®€å•çš„ä¾‹å­</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// äº‹ä»¶é©±åŠ¨çš„æ–‡ä»¶è¯»å–</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. å¼€å§‹è¯»æ–‡ä»¶'</span>);

<span class="hljs-comment">// æ³¨å†Œäº‹ä»¶å¤„ç†å™¨(å›è°ƒå‡½æ•°)</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'test.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°ä¼šåœ¨æ–‡ä»¶è¯»å–å®Œæˆæ—¶è¢«è°ƒç”¨</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. æ–‡ä»¶å†…å®¹:'</span>, data);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç '</span>);

<span class="hljs-comment">// è¾“å‡ºé¡ºåº:</span>
<span class="hljs-comment">// 1. å¼€å§‹è¯»æ–‡ä»¶</span>
<span class="hljs-comment">// 2. ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç </span>
<span class="hljs-comment">// 3. æ–‡ä»¶å†…å®¹: (æ–‡ä»¶å†…å®¹)</span>
</code></pre>
<p>å…³é”®ç‚¹:</p>
<ul>
<li><code>fs.readFile</code> ä¸ä¼šé˜»å¡,å®ƒç«‹å³è¿”å›</li>
<li>å›è°ƒå‡½æ•°æ³¨å†Œåˆ°äº‹ä»¶å¾ªç¯ä¸­</li>
<li>ç¨‹åºç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç </li>
<li>æ–‡ä»¶è¯»å®Œå,äº‹ä»¶å¾ªç¯è°ƒç”¨å›è°ƒå‡½æ•°</li>
</ul>
<p>è¿™å°±æ˜¯äº‹ä»¶é©±åŠ¨çš„ç²¾é«“â€”â€”<strong>éé˜»å¡å¼‚æ­¥æ‰§è¡Œ</strong>ã€‚</p>
<h2 data-id="heading-7">ä¸ºä»€ä¹ˆ Node.js é€‰æ‹©äº‹ä»¶é©±åŠ¨ï¼Ÿ</h2>
<h3 data-id="heading-8">I/O å¯†é›†å‹åº”ç”¨çš„ç—›ç‚¹</h3>
<p>Node.js è®¾è®¡ä¹‹åˆå°±ç„å‡†äº† Web æœåŠ¡å™¨è¿™ä¸ªåœºæ™¯ã€‚Web æœåŠ¡å™¨çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ<strong>I/O å¯†é›†,è®¡ç®—ç®€å•</strong>ã€‚</p>
<p>æƒ³æƒ³ä¸€ä¸ªå…¸å‹çš„ Web è¯·æ±‚:</p>
<ol>
<li>æ¥æ”¶ HTTP è¯·æ±‚(ç½‘ç»œ I/O)</li>
<li>æŸ¥è¯¢æ•°æ®åº“(ç£ç›˜ I/O)</li>
<li>è¯»å–æ–‡ä»¶(ç£ç›˜ I/O)</li>
<li>è¿”å›å“åº”(ç½‘ç»œ I/O)</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹å¤§éƒ¨åˆ†æ—¶é—´éƒ½èŠ±åœ¨ç­‰ I/O ä¸Š,çœŸæ­£çš„è®¡ç®—(JSON åºåˆ—åŒ–ã€å­—ç¬¦ä¸²æ‹¼æ¥)åªå å¾ˆå°ä¸€éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-9">ä¼ ç»Ÿå¤šçº¿ç¨‹æ¨¡å‹çš„é—®é¢˜</h3>
<p>ä¼ ç»Ÿçš„åšæ³•æ˜¯:ä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ä¸»çº¿ç¨‹] --&gt; B[çº¿ç¨‹1: å¤„ç†è¯·æ±‚1]
    A --&gt; C[çº¿ç¨‹2: å¤„ç†è¯·æ±‚2]
    A --&gt; D[çº¿ç¨‹3: å¤„ç†è¯·æ±‚3]
    A --&gt; E[çº¿ç¨‹4: å¤„ç†è¯·æ±‚4]
    B --&gt; F[ç­‰å¾…æ•°æ®åº“ ğŸ’¤]
    C --&gt; G[ç­‰å¾…æ–‡ä»¶ ğŸ’¤]
    D --&gt; H[ç­‰å¾…ç½‘ç»œ ğŸ’¤]
    E --&gt; I[ç­‰å¾…æ•°æ®åº“ ğŸ’¤]
    style F fill:#ffcccc
    style G fill:#ffcccc
    style H fill:#ffcccc
    style I fill:#ffcccc
</code></pre>
<p>çœ‹èµ·æ¥ä¸é”™,ä½†æœ‰å‡ ä¸ªé—®é¢˜:</p>
<ol>
<li>
<p><strong>çº¿ç¨‹å¼€é”€å¤§</strong></p>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹éœ€è¦ 1-2MB æ ˆç©ºé—´</li>
<li>åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹æœ‰å¼€é”€</li>
<li>å¤§é‡çº¿ç¨‹åˆ‡æ¢ä¼šæ¶ˆè€— CPU</li>
</ul>
</li>
<li>
<p><strong>èµ„æºæµªè´¹</strong></p>
<ul>
<li>çº¿ç¨‹å¤§éƒ¨åˆ†æ—¶é—´åœ¨ç­‰ I/O,å®é™…ä¸Šå•¥ä¹Ÿæ²¡å¹²</li>
<li>æƒ³è±¡ä¸€ä¸‹:10000 ä¸ªç”¨æˆ·å¹¶å‘,å°±å¾—å¼€ 10000 ä¸ªçº¿ç¨‹,æ¯ä¸ªçº¿ç¨‹ 90% çš„æ—¶é—´åœ¨ç¡è§‰</li>
</ul>
</li>
<li>
<p><strong>éš¾ä»¥è°ƒè¯•å’Œç»´æŠ¤</strong></p>
<ul>
<li>å¤šçº¿ç¨‹ç¼–ç¨‹å®¹æ˜“å‡ºç°ç«æ€æ¡ä»¶ã€æ­»é”</li>
<li>è°ƒè¯•å¤šçº¿ç¨‹ç¨‹åºæ˜¯ä¸ªå™©æ¢¦</li>
</ul>
</li>
</ol>
<h3 data-id="heading-10">äº‹ä»¶é©±åŠ¨çš„ä¼˜åŠ¿</h3>
<p>Node.js ç”¨äº‹ä»¶é©±åŠ¨ + å•çº¿ç¨‹è§£å†³äº†è¿™äº›é—®é¢˜:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[äº‹ä»¶å¾ªç¯&lt;br&gt;å•çº¿ç¨‹] --&gt; B[å¤„ç†è¯·æ±‚1]
    B --&gt; A
    A --&gt; C[å¤„ç†è¯·æ±‚2]
    C --&gt; A
    A --&gt; D[å¤„ç†è¯·æ±‚3]
    D --&gt; A
    A --&gt; E[å¤„ç†è¯·æ±‚4]
    E --&gt; A
    F[I/O æ“ä½œ] -.å¼‚æ­¥.-&gt; A
    style A fill:#90EE90
</code></pre>
<p><strong>1. é«˜å¹¶å‘ä½å¼€é”€</strong>
å•çº¿ç¨‹ + éé˜»å¡ I/O,å¯ä»¥ç”¨å¾ˆå°çš„å†…å­˜å¤„ç†å¤§é‡å¹¶å‘è¿æ¥ã€‚</p>
<p>æ•°æ®è¯´è¯:</p>
<ul>
<li>Apache(å¤šçº¿ç¨‹): å¤„ç† 10000 å¹¶å‘éœ€è¦ ~2GB å†…å­˜</li>
<li>Node.js(äº‹ä»¶é©±åŠ¨): å¤„ç† 10000 å¹¶å‘éœ€è¦ ~200MB å†…å­˜</li>
</ul>
<p><strong>2. ç¼–ç¨‹ç®€å•</strong>
æ‰€æœ‰ä»£ç éƒ½åœ¨å•çº¿ç¨‹æ‰§è¡Œ,ä¸ç”¨æ‹…å¿ƒå¤šçº¿ç¨‹çš„é‚£äº›å‘:</p>
<ul>
<li>ä¸éœ€è¦åŠ é”</li>
<li>ä¸ä¼šæœ‰ç«æ€æ¡ä»¶</li>
<li>å›è°ƒå‡½æ•°é¡ºåºæ‰§è¡Œ,ä¸ä¼šåŒæ—¶è¿è¡Œ</li>
</ul>
<p><strong>3. èµ„æºåˆ©ç”¨ç‡é«˜</strong>
ç­‰ I/O çš„æ—¶å€™ä¸æ˜¯å¹²åç€,è€Œæ˜¯å»å¤„ç†å…¶ä»–è¯·æ±‚ã€‚å°±åƒé“¶è¡ŒæŸœå‘˜,ä¸€ä¸ªå®¢æˆ·åŠä¸šåŠ¡å¡ä½äº†,ä¸å‚»ç­‰ç€,è€Œæ˜¯å…ˆæœåŠ¡ä¸‹ä¸€ä¸ªå®¢æˆ·ã€‚</p>
<h3 data-id="heading-11">äº‹ä»¶é©±åŠ¨çš„å±€é™</h3>
<p>å½“ç„¶,äº‹ä»¶é©±åŠ¨ä¸æ˜¯é“¶å¼¹,ä¹Ÿæœ‰å®ƒçš„çŸ­æ¿:</p>
<p><strong>1. CPU å¯†é›†å‹ä»»åŠ¡çš„è½¯è‚‹</strong>
å•çº¿ç¨‹æ„å‘³ç€ä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹ã€‚å¦‚æœæŸä¸ªå›è°ƒå‡½æ•°æ‰§è¡Œæ—¶é—´å¾ˆé•¿(æ¯”å¦‚è®¡ç®—å¯†é›†å‹ä»»åŠ¡),æ•´ä¸ªäº‹ä»¶å¾ªç¯å°±ä¼šè¢«é˜»å¡,å…¶ä»–è¯·æ±‚éƒ½å¾—ç­‰ç€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ’€ è¿™ä¼šé˜»å¡æ•´ä¸ªäº‹ä»¶å¾ªç¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">complexCalculation</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000000000</span>; i++) {
    sum += i;
  }
  <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-comment">// åœ¨è¿™ä¸ªè®¡ç®—æœŸé—´,å…¶ä»–è¯·æ±‚éƒ½ä¼šå¡ä½</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/heavy'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">complexCalculation</span>();  <span class="hljs-comment">// é˜»å¡å‡ ç§’é’Ÿ</span>
  res.<span class="hljs-title function_">json</span>({ result });
});
</code></pre>
<p><strong>2. å›è°ƒåœ°ç‹±</strong>
åµŒå¥—çš„å›è°ƒå‡½æ•°ä¼šè®©ä»£ç å˜æˆ"å›è°ƒé‡‘å­—å¡”",éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ˜± å›è°ƒåœ°ç‹±</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file1.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data1</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
  fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file2.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data2</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file3.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, data3</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data1, data2, data3);
    });
  });
});
</code></pre>
<p>ä¸è¿‡è¿™ä¸ªé—®é¢˜å·²ç»æœ‰äº†å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆ:Promise å’Œ async/awaitã€‚</p>
<p><strong>3. é”™è¯¯å¤„ç†å¤æ‚</strong>
å¼‚æ­¥ä»£ç çš„é”™è¯¯å¤„ç†æ¯”åŒæ­¥ä»£ç éº»çƒ¦,ä¸€ä¸ªæ²¡ catch çš„ Promise rejection å¯èƒ½å¯¼è‡´è¿›ç¨‹å´©æºƒã€‚</p>
<h2 data-id="heading-12">äº‹ä»¶é©±åŠ¨çš„åº•å±‚åŸç†</h2>
<p>ææ˜ç™½äº†"æ˜¯ä»€ä¹ˆ"å’Œ"ä¸ºä»€ä¹ˆ",ç°åœ¨æ¥çœ‹çœ‹"æ€ä¹ˆå®ç°"ã€‚</p>
<h3 data-id="heading-13">Node.js çš„äº‹ä»¶å¾ªç¯</h3>
<p>Node.js çš„äº‹ä»¶å¾ªç¯æ˜¯æ•´ä¸ªäº‹ä»¶é©±åŠ¨æ¶æ„çš„æ ¸å¿ƒ,å®ƒå»ºç«‹åœ¨ libuv è¿™ä¸ª C åº“ä¹‹ä¸Šã€‚</p>
<h4 data-id="heading-14">äº‹ä»¶å¾ªç¯çš„ç»“æ„</h4>
<p>äº‹ä»¶å¾ªç¯åˆ†ä¸ºå¤šä¸ªé˜¶æ®µ(Phase),æ¯ä¸ªé˜¶æ®µæœ‰è‡ªå·±çš„ä»»åŠ¡é˜Ÿåˆ—:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[timers&lt;br&gt;æ‰§è¡Œ setTimeout/setInterval] --&gt; B[pending callbacks&lt;br&gt;æ‰§è¡Œå»¶è¿Ÿçš„ I/O å›è°ƒ]
    B --&gt; C[idle, prepare&lt;br&gt;å†…éƒ¨ä½¿ç”¨]
    C --&gt; D[poll&lt;br&gt;è·å–æ–°çš„ I/O äº‹ä»¶]
    D --&gt; E[check&lt;br&gt;æ‰§è¡Œ setImmediate]
    E --&gt; F[close callbacks&lt;br&gt;æ‰§è¡Œå…³é—­å›è°ƒ]
    F --&gt; A
    style A fill:#ffe1e1
    style D fill:#e1f5ff
    style E fill:#fff4e1
</code></pre>
<p><strong>å„é˜¶æ®µçš„ä½œç”¨</strong>:</p>
<ol>
<li>
<p><strong>timers é˜¶æ®µ</strong>
æ‰§è¡Œ <code>setTimeout</code> å’Œ <code>setInterval</code> çš„å›è°ƒ</p>
</li>
<li>
<p><strong>pending callbacks é˜¶æ®µ</strong>
æ‰§è¡Œä¸€äº›ç³»ç»Ÿæ“ä½œçš„å›è°ƒ,æ¯”å¦‚ TCP é”™è¯¯</p>
</li>
<li>
<p><strong>idle, prepare é˜¶æ®µ</strong>
ä»…å†…éƒ¨ä½¿ç”¨</p>
</li>
<li>
<p><strong>poll é˜¶æ®µ</strong> (æœ€é‡è¦)</p>
<ul>
<li>è·å–æ–°çš„ I/O äº‹ä»¶</li>
<li>æ‰§è¡Œ I/O ç›¸å…³çš„å›è°ƒ</li>
<li>å¦‚æœ poll é˜Ÿåˆ—ä¸ä¸ºç©º,ä¼šä¾æ¬¡æ‰§è¡Œå›è°ƒç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è¾¾åˆ°ç³»ç»Ÿé™åˆ¶</li>
<li>å¦‚æœ poll é˜Ÿåˆ—ä¸ºç©º:
<ul>
<li>å¦‚æœæœ‰ <code>setImmediate</code>,è¿›å…¥ check é˜¶æ®µ</li>
<li>å¦‚æœæœ‰ timers åˆ°æœŸ,å›åˆ° timers é˜¶æ®µ</li>
<li>å¦åˆ™ç­‰å¾…æ–°çš„ I/O äº‹ä»¶</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>check é˜¶æ®µ</strong>
æ‰§è¡Œ <code>setImmediate</code> çš„å›è°ƒ</p>
</li>
<li>
<p><strong>close callbacks é˜¶æ®µ</strong>
æ‰§è¡Œå…³é—­äº‹ä»¶çš„å›è°ƒ,æ¯”å¦‚ <code>socket.on('close', ...)</code></p>
</li>
</ol>
<h4 data-id="heading-15">å¾®ä»»åŠ¡é˜Ÿåˆ—(Microtask Queue)</h4>
<p>é™¤äº†äº‹ä»¶å¾ªç¯çš„é˜¶æ®µé˜Ÿåˆ—,è¿˜æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„å¾®ä»»åŠ¡é˜Ÿåˆ—:</p>
<ul>
<li><strong>Promise å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>: Promise.then/catch/finally</li>
<li><strong>process.nextTick é˜Ÿåˆ—</strong>: process.nextTick</li>
</ul>
<p>å¾®ä»»åŠ¡çš„ç‰¹ç‚¹æ˜¯:<strong>åœ¨å½“å‰é˜¶æ®µç»“æŸåã€è¿›å…¥ä¸‹ä¸€é˜¶æ®µå‰æ‰§è¡Œ</strong>ã€‚</p>
<p>æ‰§è¡Œä¼˜å…ˆçº§:</p>
<pre><code class="hljs language-arduino" lang="arduino">process.nextTick &gt; Promise å¾®ä»»åŠ¡ &gt; äº‹ä»¶å¾ªç¯å„é˜¶æ®µçš„å®ä»»åŠ¡
</code></pre>
<h3 data-id="heading-16">ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. script start'</span>);

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. setTimeout'</span>);
}, <span class="hljs-number">0</span>);

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. promise1'</span>);
}).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4. promise2'</span>);
});

process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'5. nextTick'</span>);
});

<span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'6. setImmediate'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'7. script end'</span>);

<span class="hljs-comment">// è¾“å‡ºé¡ºåº:</span>
<span class="hljs-comment">// 1. script start</span>
<span class="hljs-comment">// 7. script end</span>
<span class="hljs-comment">// 5. nextTick          (nextTick é˜Ÿåˆ—)</span>
<span class="hljs-comment">// 3. promise1          (Promise å¾®ä»»åŠ¡é˜Ÿåˆ—)</span>
<span class="hljs-comment">// 4. promise2          (Promise å¾®ä»»åŠ¡é˜Ÿåˆ—)</span>
<span class="hljs-comment">// 2. setTimeout        (timers é˜¶æ®µ)</span>
<span class="hljs-comment">// 6. setImmediate      (check é˜¶æ®µ)</span>
</code></pre>
<p>æ‰§è¡Œæµç¨‹:</p>
<ol>
<li>
<p><strong>ä¸»ä»£ç æ‰§è¡Œ</strong></p>
<ul>
<li>è¾“å‡º: 1, 7</li>
<li>setTimeout æ³¨å†Œåˆ° timers é˜¶æ®µ</li>
<li>Promise æ³¨å†Œåˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>nextTick æ³¨å†Œåˆ° nextTick é˜Ÿåˆ—</li>
<li>setImmediate æ³¨å†Œåˆ° check é˜¶æ®µ</li>
</ul>
</li>
<li>
<p><strong>ä¸»ä»£ç ç»“æŸ,æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—</strong></p>
<ul>
<li>å…ˆæ‰§è¡Œ nextTick é˜Ÿåˆ—: è¾“å‡º 5</li>
<li>å†æ‰§è¡Œ Promise å¾®ä»»åŠ¡: è¾“å‡º 3, 4</li>
</ul>
</li>
<li>
<p><strong>è¿›å…¥äº‹ä»¶å¾ªç¯</strong></p>
<ul>
<li>timers é˜¶æ®µ: è¾“å‡º 2</li>
<li>poll é˜¶æ®µ: æ— ä»»åŠ¡</li>
<li>check é˜¶æ®µ: è¾“å‡º 6</li>
</ul>
</li>
</ol>
<h3 data-id="heading-17">éé˜»å¡ I/O çš„å®ç°</h3>
<p>Node.js çš„éé˜»å¡ I/O ä¾èµ–æ“ä½œç³»ç»Ÿæä¾›çš„å¼‚æ­¥ I/O æ¥å£ã€‚</p>
<h4 data-id="heading-18">æ“ä½œç³»ç»Ÿå±‚é¢çš„æ”¯æŒ</h4>
<p>ä¸åŒæ“ä½œç³»ç»Ÿæœ‰ä¸åŒçš„å¼‚æ­¥ I/O æœºåˆ¶:</p>

























<table><thead><tr><th>æ“ä½œç³»ç»Ÿ</th><th>å¼‚æ­¥ I/O æœºåˆ¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Linux</td><td>epoll</td><td>é«˜æ•ˆçš„ I/O å¤šè·¯å¤ç”¨</td></tr><tr><td>macOS/BSD</td><td>kqueue</td><td>ç±»ä¼¼ epoll</td></tr><tr><td>Windows</td><td>IOCP</td><td>I/O å®Œæˆç«¯å£</td></tr></tbody></table>
<p>libuv æŠŠè¿™äº›ä¸åŒçš„åº•å±‚æ¥å£å°è£…æˆç»Ÿä¸€çš„ API,è®© Node.js å¯ä»¥è·¨å¹³å°è¿è¡Œã€‚</p>
<h4 data-id="heading-19">I/O æ“ä½œçš„å®Œæ•´æµç¨‹</h4>
<p>ä»¥æ–‡ä»¶è¯»å–ä¸ºä¾‹:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ä»£ç 
    participant Node as Node.js
    participant Libuv as libuv
    participant OS as æ“ä½œç³»ç»Ÿ
    
    App-&gt;&gt;Node: fs.readFile('file.txt', callback)
    Node-&gt;&gt;Libuv: åˆ›å»ºè¯»å–è¯·æ±‚
    Libuv-&gt;&gt;OS: å‘èµ·å¼‚æ­¥è¯»å–
    Node--&gt;&gt;App: ç«‹å³è¿”å›(éé˜»å¡)
    
    Note over App: ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç 
    
    OS-&gt;&gt;Libuv: I/O å®Œæˆé€šçŸ¥
    Libuv-&gt;&gt;Node: å°†å›è°ƒåŠ å…¥äº‹ä»¶é˜Ÿåˆ—
    Node-&gt;&gt;App: äº‹ä»¶å¾ªç¯æ‰§è¡Œ callback
</code></pre>
<p>æ•´ä¸ªè¿‡ç¨‹:</p>
<ol>
<li><strong>å‘èµ·è¯·æ±‚</strong>: åº”ç”¨è°ƒç”¨ <code>fs.readFile</code>,Node.js ç«‹å³è¿”å›,ä¸ç­‰å¾…</li>
<li><strong>æ“ä½œç³»ç»Ÿå¤„ç†</strong>: OS åœ¨åå°è¯»å–æ–‡ä»¶</li>
<li><strong>å®Œæˆé€šçŸ¥</strong>: OS é€šçŸ¥ libuv I/O å®Œæˆ</li>
<li><strong>å›è°ƒæ‰§è¡Œ</strong>: äº‹ä»¶å¾ªç¯åœ¨ poll é˜¶æ®µæ‰§è¡Œå›è°ƒå‡½æ•°</li>
</ol>
<p>å…³é”®ç‚¹:åº”ç”¨ä»£ç ä»ä¸ç­‰å¾… I/O,ä¸€ç›´åœ¨äº‹ä»¶å¾ªç¯ä¸­ä¸æ–­å¤„ç†æ–°çš„ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-20">çº¿ç¨‹æ± çš„ç§˜å¯†</h3>
<p>è™½ç„¶ Node.js æ˜¯å•çº¿ç¨‹,ä½†æœ‰äº›æ“ä½œ(æ¯”å¦‚æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€DNS æŸ¥è¯¢)åœ¨æŸäº›ç³»ç»Ÿä¸Šæ²¡æœ‰çœŸæ­£çš„å¼‚æ­¥æ¥å£ã€‚</p>
<p>libuv æ€ä¹ˆåŠ?ç”¨çº¿ç¨‹æ± æ¨¡æ‹Ÿå¼‚æ­¥!</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ä¸»çº¿ç¨‹&lt;br&gt;äº‹ä»¶å¾ªç¯] --&gt; B[çº¿ç¨‹æ± &lt;br&gt;4ä¸ªå·¥ä½œçº¿ç¨‹]
    B --&gt; C[çº¿ç¨‹1: è¯»æ–‡ä»¶]
    B --&gt; D[çº¿ç¨‹2: å†™æ–‡ä»¶]
    B --&gt; E[çº¿ç¨‹3: DNSæŸ¥è¯¢]
    B --&gt; F[çº¿ç¨‹4: cryptoåŠ å¯†]
    C -.å®Œæˆ.-&gt; A
    D -.å®Œæˆ.-&gt; A
    E -.å®Œæˆ.-&gt; A
    F -.å®Œæˆ.-&gt; A
    style A fill:#90EE90
    style B fill:#FFE4B5
</code></pre>
<p>é»˜è®¤çº¿ç¨‹æ± å¤§å°æ˜¯ 4,å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è°ƒæ•´:</p>
<pre><code class="hljs language-bash" lang="bash">UV_THREADPOOL_SIZE=8 node app.js
</code></pre>
<p>éœ€è¦çº¿ç¨‹æ± çš„æ“ä½œ:</p>
<ul>
<li>æ–‡ä»¶ç³»ç»Ÿæ“ä½œ(fs.readFile, fs.writeFile ç­‰)</li>
<li>DNS æ“ä½œ(dns.lookup)</li>
<li>ä¸€äº› crypto æ“ä½œ</li>
<li>zlib å‹ç¼©</li>
</ul>
<p>ç½‘ç»œ I/O(HTTPã€TCP)ä¸éœ€è¦çº¿ç¨‹æ± ,ä½¿ç”¨çœŸæ­£çš„å¼‚æ­¥ I/Oã€‚</p>
<h2 data-id="heading-21">äº‹ä»¶é©±åŠ¨ vs å…¶ä»–ç¼–ç¨‹æ¨¡å‹</h2>
<h3 data-id="heading-22">ä¸å¤šçº¿ç¨‹æ¨¡å‹å¯¹æ¯”</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>äº‹ä»¶é©±åŠ¨(Node.js)</th><th>å¤šçº¿ç¨‹(Java/C++)</th></tr></thead><tbody><tr><td><strong>å¹¶å‘æ–¹å¼</strong></td><td>å•çº¿ç¨‹ + å¼‚æ­¥ I/O</td><td>å¤šçº¿ç¨‹ + åŒæ­¥ I/O</td></tr><tr><td><strong>å†…å­˜å ç”¨</strong></td><td>ä½(æ¯ä¸ªè¿æ¥ ~2KB)</td><td>é«˜(æ¯ä¸ªçº¿ç¨‹ 1-2MB)</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>I/O å¯†é›†å‹</td><td>CPU å¯†é›†å‹</td></tr><tr><td><strong>ç¼–ç¨‹éš¾åº¦</strong></td><td>ç®€å•(æ— é”)</td><td>å¤æ‚(éœ€è¦åŠ é”)</td></tr><tr><td><strong>CPU åˆ©ç”¨</strong></td><td>å•æ ¸(éœ€è¦å¤šè¿›ç¨‹)</td><td>å¤šæ ¸</td></tr><tr><td><strong>æ€§èƒ½ç“¶é¢ˆ</strong></td><td>CPU è®¡ç®—</td><td>çº¿ç¨‹åˆ‡æ¢ã€é”ç«äº‰</td></tr></tbody></table>
<p><strong>é€‰æ‹©å»ºè®®</strong>:</p>
<ul>
<li>I/O å¯†é›†å‹(Web æœåŠ¡å™¨ã€API ç½‘å…³): äº‹ä»¶é©±åŠ¨</li>
<li>CPU å¯†é›†å‹(è§†é¢‘å¤„ç†ã€ç§‘å­¦è®¡ç®—): å¤šçº¿ç¨‹</li>
<li>æ··åˆå‹: äº‹ä»¶é©±åŠ¨ + Worker çº¿ç¨‹å¤„ç† CPU ä»»åŠ¡</li>
</ul>
<h3 data-id="heading-23">ä¸åç¨‹æ¨¡å‹å¯¹æ¯”</h3>
<p>Go çš„åç¨‹(goroutine)å’Œ Node.js çš„äº‹ä»¶é©±åŠ¨éƒ½æ˜¯ä¸ºäº†è§£å†³é«˜å¹¶å‘é—®é¢˜,ä½†æ€è·¯ä¸åŒ:</p>
<p><strong>Go åç¨‹æ¨¡å‹</strong>:</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç </span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">handler</span><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> {
    data := readDatabase()  <span class="hljs-comment">// å®é™…ä¸Šæ˜¯å¼‚æ­¥çš„,ä½†å†™èµ·æ¥åƒåŒæ­¥</span>
    fmt.Fprintf(w, data)
}
</code></pre>
<p><strong>Node.js äº‹ä»¶é©±åŠ¨</strong>:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼‚æ­¥ä»£ç (Promise)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">req, res</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readDatabase</span>();  <span class="hljs-comment">// æ˜ç¡®æ ‡æ³¨å¼‚æ­¥</span>
  res.<span class="hljs-title function_">send</span>(data);
}
</code></pre>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Go åç¨‹</th><th>Node.js äº‹ä»¶é©±åŠ¨</th></tr></thead><tbody><tr><td><strong>ä»£ç é£æ ¼</strong></td><td>åŒæ­¥é£æ ¼(çœ‹èµ·æ¥)</td><td>å¼‚æ­¥é£æ ¼</td></tr><tr><td><strong>å¿ƒæ™ºè´Ÿæ‹…</strong></td><td>ä½(è‡ªåŠ¨è°ƒåº¦)</td><td>ä¸­(éœ€è¦ç†è§£å¼‚æ­¥)</td></tr><tr><td><strong>è°ƒè¯•éš¾åº¦</strong></td><td>éš¾(goroutine æ³„æ¼)</td><td>ä¸­(å›è°ƒ/Promise)</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>ç•¥é«˜</td><td>ç•¥ä½</td></tr></tbody></table>
<p>åç¨‹æ˜¯æ›´é«˜çº§çš„æŠ½è±¡,æŠŠå¼‚æ­¥çš„å¤æ‚åº¦è—åœ¨è¿è¡Œæ—¶é‡Œã€‚ä½† Node.js çš„äº‹ä»¶é©±åŠ¨æ¨¡å‹æ›´é€æ˜,å¼€å‘è€…èƒ½æ¸…æ¥šåœ°çœ‹åˆ°å“ªé‡Œæ˜¯å¼‚æ­¥çš„ã€‚</p>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p>ç ”ç©¶å®Œäº‹ä»¶é©±åŠ¨,æˆ‘çš„ç†è§£æ˜¯:</p>
<p><strong>åŸç†å±‚é¢</strong>:</p>
<ul>
<li>äº‹ä»¶é©±åŠ¨æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹,æ ¸å¿ƒæ˜¯"éé˜»å¡ + äº‹ä»¶å¾ªç¯ + å›è°ƒå‡½æ•°"</li>
<li>Node.js ç”¨å•çº¿ç¨‹ + å¼‚æ­¥ I/O å®ç°é«˜å¹¶å‘,é¿å…äº†å¤šçº¿ç¨‹çš„å¤æ‚æ€§å’Œå¼€é”€</li>
<li>äº‹ä»¶å¾ªç¯åˆ†å¤šä¸ªé˜¶æ®µ,æ¯ä¸ªé˜¶æ®µå¤„ç†ç‰¹å®šç±»å‹çš„ä»»åŠ¡</li>
<li>åº•å±‚ä¾èµ– libuv å°è£…ä¸åŒæ“ä½œç³»ç»Ÿçš„å¼‚æ­¥ I/O æ¥å£</li>
</ul>
<p><strong>å®ç”¨å±‚é¢</strong>:</p>
<ul>
<li>é€‚åˆ I/O å¯†é›†å‹åº”ç”¨(Web æœåŠ¡å™¨ã€APIã€å®æ—¶åº”ç”¨)</li>
<li>ä¸é€‚åˆ CPU å¯†é›†å‹åº”ç”¨(é™¤éç”¨ Worker çº¿ç¨‹)</li>
<li>ç¼–ç¨‹ç®€å•(æ— é”ã€æ— ç«æ€),ä½†éœ€è¦ç†è§£å¼‚æ­¥æ€ç»´</li>
<li>é”™è¯¯å¤„ç†å’Œè°ƒè¯•éœ€è¦é¢å¤–æ³¨æ„</li>
</ul>
<p><strong>ä½¿ç”¨å»ºè®®</strong>:</p>
<ol>
<li><strong>å¼€å‘ Web åº”ç”¨/API</strong>: æ³¨å†Œè·¯ç”±å¤„ç†å‡½æ•° â†’ å¤„ç†è¯·æ±‚ â†’ å¼‚æ­¥æ“ä½œ(æ•°æ®åº“ã€æ–‡ä»¶) â†’ è¿”å›å“åº”(æ°¸è¿œä¸è¦é˜»å¡!)</li>
<li><strong>å¤„ç†é«˜å¹¶å‘ I/O</strong>: å¤§é‡å¹¶å‘è¿æ¥(èŠå¤©æœåŠ¡å™¨ã€æ¸¸æˆæœåŠ¡å™¨) â†’ äº‹ä»¶é©±åŠ¨å®Œç¾é€‚é…</li>
<li><strong>CPU å¯†é›†ä»»åŠ¡</strong>: æŠŠè®¡ç®—æ”¾åˆ° Worker çº¿ç¨‹ â†’ ä¸»çº¿ç¨‹åªè´Ÿè´£åè°ƒ â†’ ä¿æŒäº‹ä»¶å¾ªç¯ç•…é€š</li>
</ol>
<p>äº‹ä»¶é©±åŠ¨ä¸æ˜¯å®Œç¾çš„,ä½†åœ¨å®ƒæ“…é•¿çš„é¢†åŸŸ(I/O å¯†é›†å‹é«˜å¹¶å‘),å®ƒç¡®å®æ˜¯æœ€ä¼˜è§£ä¹‹ä¸€ã€‚ç†è§£å®ƒçš„åŸç†å’Œå±€é™,æ‰èƒ½æ›´å¥½åœ°å‘æŒ¥å®ƒçš„ä¼˜åŠ¿,ä¹Ÿæ‰èƒ½åœ¨éœ€è¦çš„æ—¶å€™é€‰æ‹©æ›´åˆé€‚çš„æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-25">å‚è€ƒèµ„æ–™</h2>
<ol>
<li>
<p><strong>Node.js å®˜æ–¹æ–‡æ¡£</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fen%2Fdocs%2Fguides%2Fevent-loop-timers-and-nexttick%2F" target="_blank" title="https://nodejs.org/en/docs/guides/event-loop-timers-and-nexttick/" ref="nofollow noopener noreferrer">The Node.js Event Loop</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fen%2Fdocs%2Fguides%2Fdont-block-the-event-loop%2F" target="_blank" title="https://nodejs.org/en/docs/guides/dont-block-the-event-loop/" ref="nofollow noopener noreferrer">Don't Block the Event Loop</a></li>
</ul>
</li>
<li>
<p><strong>libuv æ–‡æ¡£</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fdocs.libuv.org%2Fen%2Fv1.x%2Fdesign.html" target="_blank" title="http://docs.libuv.org/en/v1.x/design.html" ref="nofollow noopener noreferrer">libuv Design Overview</a> - ç†è§£åº•å±‚å®ç°</li>
</ul>
</li>
<li>
<p><strong>æ·±å…¥æ–‡ç« </strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.freecodecamp.org%2Fnews%2Funderstanding-node-js-event-driven-architecture-223292fcbc2d%2F" target="_blank" title="https://www.freecodecamp.org/news/understanding-node-js-event-driven-architecture-223292fcbc2d/" ref="nofollow noopener noreferrer">Understanding Node.js Event-Driven Architecture</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.insiderattack.net%2Fevent-loop-and-the-big-picture-nodejs-event-loop-part-1-1cb67a182810" target="_blank" title="https://blog.insiderattack.net/event-loop-and-the-big-picture-nodejs-event-loop-part-1-1cb67a182810" ref="nofollow noopener noreferrer">Node.js Under The Hood</a></li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ¶æ„ä¸­çš„ä¸­é—´å±‚è®¾è®¡ï¼šæ„å»ºç¨³å¥å¯ç»´æŠ¤çš„ç»„ä»¶ä½“ç³»]]></title>    <link>https://juejin.cn/post/7570651893869936692</link>    <guid>https://juejin.cn/post/7570651893869936692</guid>    <pubDate>2025-11-10T06:19:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570651893869936692" data-draft-id="7570651893869903924" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ¶æ„ä¸­çš„ä¸­é—´å±‚è®¾è®¡ï¼šæ„å»ºç¨³å¥å¯ç»´æŠ¤çš„ç»„ä»¶ä½“ç³»"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2025-11-10T06:19:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ¶æ„ä¸­çš„ä¸­é—´å±‚è®¾è®¡ï¼šæ„å»ºç¨³å¥å¯ç»´æŠ¤çš„ç»„ä»¶ä½“ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:19:53.000Z" title="Mon Nov 10 2025 06:19:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œä¸­é—´å±‚æ¶æ„è®¾è®¡å·²æˆä¸ºæ„å»ºå¤§å‹å¤æ‚åº”ç”¨çš„å…³é”®ç­–ç•¥ã€‚ç‰¹åˆ«æ˜¯åœ¨ç»„ä»¶åŒ–å¼€å‘ä¸­ï¼Œåˆç†çš„ä¸­é—´å±‚è®¾è®¡èƒ½å¤Ÿæ˜¾è‘—æå‡ä»£ç è´¨é‡ã€å›¢é˜Ÿåä½œæ•ˆç‡å’Œç³»ç»Ÿå¯ç»´æŠ¤æ€§ã€‚</p>
<p>================================================================================</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ç»„ä»¶ä¸­é—´å±‚ï¼Ÿ</h2>
<p>ç»„ä»¶ä¸­é—´å±‚æ˜¯ä½äºä¸šåŠ¡é€»è¾‘ä¸åŸºç¡€UIç»„ä»¶ä¹‹é—´çš„æŠ½è±¡å±‚ï¼Œå®ƒé€šè¿‡å¯¹åº•å±‚ç»„ä»¶ï¼ˆå¦‚ Ant Designã€Element UI ç­‰ï¼‰è¿›è¡Œç»Ÿä¸€å°è£…ï¼Œä¸ºä¸šåŠ¡å¼€å‘æä¾›æ ‡å‡†åŒ–ã€å¢å¼ºå‹çš„ç»„ä»¶æ¥å£ã€‚</p>
<p><strong>æ¶æ„å±‚æ¬¡ç¤ºæ„ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">ä¸šåŠ¡ç»„ä»¶å±‚ (Business Components)
    â†“
ç»„ä»¶ä¸­é—´å±‚ (Component Middleware) â† æ ¸å¿ƒæŠ½è±¡å±‚
    â†“
åŸºç¡€UIåº“ (UI Libraries) â† AntDã€Element UI ç­‰
    â†“
åŸç”Ÿ<span class="hljs-selector-tag">HTML</span>å…ƒç´  (Native HTML)
</code></pre>
<h2 data-id="heading-1">äºŒã€ä¸­é—´å±‚è®¾è®¡çš„æ ¸å¿ƒä»·å€¼</h2>
<h3 data-id="heading-2">1. æŠ€æœ¯æ ˆè§£è€¦ä¸é£é™©æ§åˆ¶</h3>
<p><strong>é—®é¢˜åœºæ™¯ï¼š</strong> ä¸šåŠ¡ä»£ç ç›´æ¥ä¾èµ–ç‰¹å®šUIåº“ï¼Œå¯¼è‡´æŠ€æœ¯æ ˆåˆ‡æ¢æˆæœ¬æé«˜</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ç›´æ¥ä¾èµ– - å±é™©çš„åšæ³•</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">Table</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserManagement</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span>åˆ é™¤ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">dataSource</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>
  );
}

<span class="hljs-comment">// âœ… ä¸­é—´å±‚å°è£… - å®‰å…¨çš„åšæ³•</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrimaryButton</span>, <span class="hljs-title class_">DataTable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserManagement</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PrimaryButton</span>&gt;</span>åˆ é™¤ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">PrimaryButton</span>&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">DataTable</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>
  );
}
</code></pre>
<p><strong>ä¼˜åŠ¿ä½“ç°ï¼š</strong> å½“éœ€è¦ä» Ant Design è¿ç§»åˆ°å…¶ä»–UIåº“æ—¶ï¼Œåªéœ€ä¿®æ”¹ä¸­é—´å±‚å®ç°ï¼Œä¸šåŠ¡ä»£ç æ— éœ€æ”¹åŠ¨ã€‚</p>
<h3 data-id="heading-3">2. ç»Ÿä¸€è®¾è®¡è§„èŒƒä¸ç”¨æˆ·ä½“éªŒ</h3>
<p>é€šè¿‡ä¸­é—´å±‚å¼ºåˆ¶å®æ–½è®¾è®¡ç³»ç»Ÿè§„èŒƒï¼Œç¡®ä¿æ•´ä¸ªåº”ç”¨äº¤äº’ä¸€è‡´æ€§ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// components/EnhancedTable/index.tsx
import React from 'react'<span class="hljs-comment">;</span>
import { Table, Empty, Spin, Alert } from 'antd'<span class="hljs-comment">;</span>

interface EnhancedTableProps {
  loading?: boolean<span class="hljs-comment">;</span>
  error?: Error | null<span class="hljs-comment">;</span>
  data: any<span class="hljs-section">[]</span><span class="hljs-comment">;</span>
  columns: any<span class="hljs-section">[]</span><span class="hljs-comment">;</span>
  onRetry?: () =&gt; void<span class="hljs-comment">;</span>
}

export const EnhancedTable: React.FC&lt;EnhancedTableProps&gt; = ({
  <span class="hljs-attr">loading</span> = <span class="hljs-literal">false</span>,
  <span class="hljs-attr">error</span> = null,
  <span class="hljs-attr">data</span> = [],
  columns,
  onRetry,
  ...rest
}) =&gt; {
  if (error) {
    return (
      &lt;Alert
        <span class="hljs-attr">message</span>=<span class="hljs-string">"æ•°æ®åŠ è½½å¤±è´¥"</span>
        <span class="hljs-attr">description</span>={error.message}
        <span class="hljs-attr">type</span>=<span class="hljs-string">"error"</span>
        <span class="hljs-attr">action</span>={
          &lt;Button <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> <span class="hljs-literal">on</span>Click={<span class="hljs-literal">on</span>Retry}&gt;
            é‡è¯•
          &lt;/Button&gt;
        }
      /&gt;
    )<span class="hljs-comment">;</span>
  }

  return (
    &lt;Spin <span class="hljs-attr">spinning</span>={loading}&gt;
      &lt;Table
        <span class="hljs-attr">dataSource</span>={data}
        <span class="hljs-attr">columns</span>={columns}
        <span class="hljs-attr">locale</span>={{
          emptyText: (
            &lt;Empty 
              <span class="hljs-attr">description</span>={loading ? <span class="hljs-string">'åŠ è½½ä¸­...'</span> : <span class="hljs-string">'æš‚æ— æ•°æ®'</span>}
              <span class="hljs-attr">image</span>={Empty.PRESENTED_IMAGE_SIMPLE}
            /&gt;
          )
        }}
        <span class="hljs-attr">pagination</span>={{
          showSizeChanger: true,
          showQuickJumper: true,
          showTotal: (total) =&gt; `å…± ${total} æ¡`,
          pageSizeOptions: <span class="hljs-section">['10', '20', '50', '100']</span>,
        }}
        {...rest}
      /&gt;
    &lt;/Spin&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-4">3. åŠŸèƒ½å¢å¼ºä¸æ¨ªåˆ‡å…³æ³¨ç‚¹å¤„ç†</h3>
<p>ä¸­é—´å±‚å¤©ç„¶é€‚åˆå¤„ç†è·¨ç»„ä»¶çš„é€šç”¨é€»è¾‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// components/SecureButton/index.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, message, <span class="hljs-title class_">Modal</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'antd'</span>;
<span class="hljs-keyword">import</span> { usePermission } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/usePermission'</span>;
<span class="hljs-keyword">import</span> { useTracking } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useTracking'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">SecureButtonProps</span> {
  <span class="hljs-comment">// æƒé™æ§åˆ¶</span>
  permission?: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">// æ“ä½œç¡®è®¤</span>
  confirm?: <span class="hljs-built_in">string</span> | { <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span> };
  <span class="hljs-comment">// åŸ‹ç‚¹è¿½è¸ª</span>
  tracking?: { <span class="hljs-attr">event</span>: <span class="hljs-built_in">string</span>; data?: <span class="hljs-built_in">any</span> };
  <span class="hljs-comment">// é˜²é‡å¤æäº¤</span>
  debounce?: <span class="hljs-built_in">number</span>;
  onClick?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span> | <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">SecureButton</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">SecureButtonProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  permission,
  confirm,
  tracking,
  debounce = <span class="hljs-number">300</span>,
  onClick,
  children,
  ...props
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { hasPermission } = <span class="hljs-title function_">usePermission</span>();
  <span class="hljs-keyword">const</span> { trackEvent } = <span class="hljs-title function_">useTracking</span>();
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-comment">// æƒé™æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (permission &amp;&amp; !<span class="hljs-title function_">hasPermission</span>(permission)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ç¡®è®¤å¯¹è¯æ¡†</span>
    <span class="hljs-keyword">if</span> (confirm) {
      <span class="hljs-keyword">const</span> confirmed = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-title class_">Modal</span>.<span class="hljs-title function_">confirm</span>({
          <span class="hljs-attr">title</span>: <span class="hljs-keyword">typeof</span> confirm === <span class="hljs-string">'string'</span> ? <span class="hljs-string">'ç¡®è®¤æ“ä½œ'</span> : confirm.<span class="hljs-property">title</span>,
          <span class="hljs-attr">content</span>: <span class="hljs-keyword">typeof</span> confirm === <span class="hljs-string">'string'</span> ? confirm : confirm.<span class="hljs-property">content</span>,
          <span class="hljs-attr">onOk</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">true</span>),
          <span class="hljs-attr">onCancel</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-literal">false</span>),
        });
      });
      
      <span class="hljs-keyword">if</span> (!confirmed) <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// åŸ‹ç‚¹è®°å½•</span>
    <span class="hljs-keyword">if</span> (tracking) {
      <span class="hljs-title function_">trackEvent</span>(tracking.<span class="hljs-property">event</span>, tracking.<span class="hljs-property">data</span>);
    }

    <span class="hljs-comment">// åŠ è½½çŠ¶æ€ä¸é˜²é‡å¤</span>
    <span class="hljs-keyword">if</span> (!loading) {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> onClick?.();
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>), debounce);
      }
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
      {<span class="hljs-attr">...props</span>}
      <span class="hljs-attr">loading</span>=<span class="hljs-string">{loading}</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>
      <span class="hljs-attr">disabled</span>=<span class="hljs-string">{props.disabled</span> || <span class="hljs-attr">loading</span>}
    &gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-5">4. ç±»å‹å®‰å…¨ä¸å¼€å‘ä½“éªŒæå‡</h3>
<p>é€šè¿‡ TypeScript æä¾›ç²¾ç¡®çš„ç±»å‹æç¤ºå’Œçº¦æŸï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// types/table.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TableColumn</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">dataIndex</span>: keyof T;
  render?: <span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">any</span>, record: T, index: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;
  sorter?: <span class="hljs-built_in">boolean</span> | (<span class="hljs-function">(<span class="hljs-params">a: T, b: T</span>) =&gt;</span> <span class="hljs-built_in">number</span>);
  filters?: { <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span> }[];
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaginationConfig</span> {
  <span class="hljs-attr">current</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">pageSize</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">onChange</span>: <span class="hljs-function">(<span class="hljs-params">page: <span class="hljs-built_in">number</span>, pageSize?: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// components/DataTable/index.tsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TableColumn</span>, <span class="hljs-title class_">PaginationConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/types/table'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">DataTableProps</span>&lt;T&gt; {
  <span class="hljs-attr">data</span>: T[];
  <span class="hljs-attr">columns</span>: <span class="hljs-title class_">TableColumn</span>&lt;T&gt;[];
  pagination?: <span class="hljs-title class_">PaginationConfig</span>;
  loading?: <span class="hljs-built_in">boolean</span>;
  rowKey?: keyof T | (<span class="hljs-function">(<span class="hljs-params">record: T</span>) =&gt;</span> <span class="hljs-built_in">string</span>);
}
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€ä¸­é—´å±‚è®¾è®¡æ¨¡å¼ä¸å®è·µ</h2>
<h3 data-id="heading-7">1. ç»„åˆæ¨¡å¼ (Composition)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// components/SearchTable/index.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EnhancedTable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../EnhancedTable'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SearchBar</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../SearchBar'</span>;
<span class="hljs-keyword">import</span> { usePagination } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/usePagination'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">SearchTable</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">SearchTableProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  searchFields,
  onSearch,
  ...tableProps
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { pagination, setPagination } = <span class="hljs-title function_">usePagination</span>();
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSearch</span> = (<span class="hljs-params">values: <span class="hljs-built_in">any</span></span>) =&gt; {
    onSearch?.(values);
    <span class="hljs-title function_">setPagination</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> ({ ...prev, <span class="hljs-attr">current</span>: <span class="hljs-number">1</span> }));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"search-table"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">SearchBar</span> <span class="hljs-attr">fields</span>=<span class="hljs-string">{searchFields}</span> <span class="hljs-attr">onSearch</span>=<span class="hljs-string">{handleSearch}</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">EnhancedTable</span>
        {<span class="hljs-attr">...tableProps</span>}
        <span class="hljs-attr">pagination</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">...pagination</span>,
          <span class="hljs-attr">onChange:</span> <span class="hljs-attr">setPagination</span>,
        }}
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-8">2. é«˜é˜¶ç»„ä»¶æ¨¡å¼ (HOC)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// hooks/withErrorBoundary.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> withErrorBoundary&lt;P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span>&gt;(
  <span class="hljs-title class_">Component</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ComponentType</span>&lt;P&gt;,
  fallback?: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>
) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span>&lt;P, { <span class="hljs-attr">hasError</span>: <span class="hljs-built_in">boolean</span> }&gt; {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props: P</span>) {
      <span class="hljs-variable language_">super</span>(props);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span> };
    }

    <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> };
    }

    <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error: <span class="hljs-built_in">Error</span>, errorInfo: React.ErrorInfo</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Component Error:'</span>, error, errorInfo);
    }

    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) {
        <span class="hljs-keyword">return</span> fallback || <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç»„ä»¶æ¸²æŸ“å¤±è´¥<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
      }

      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...this.props</span>} /&gt;</span></span>;
    }
  };
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">EnhancedTableWithErrorBoundary</span> = <span class="hljs-title function_">withErrorBoundary</span>(<span class="hljs-title class_">EnhancedTable</span>);
</code></pre>
<h3 data-id="heading-9">3. è‡ªå®šä¹‰ Hook æ¨¡å¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// hooks/useTable.ts</span>
<span class="hljs-keyword">import</span> { useState, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useTable&lt;T&gt;(<span class="hljs-attr">initialData</span>: T[] = []) {
  <span class="hljs-keyword">const</span> [data, setData] = useState&lt;T[]&gt;(initialData);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-title class_">Error</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> refresh = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">fetchFunction</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T[]&gt;) =&gt; {
    <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchFunction</span>();
      <span class="hljs-title function_">setData</span>(result);
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-title function_">setError</span>(err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>);
      <span class="hljs-keyword">throw</span> err;
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    }
  }, []);

  <span class="hljs-keyword">return</span> {
    data,
    loading,
    error,
    setData,
    refresh,
  };
}
</code></pre>
<h2 data-id="heading-10">å››ã€å®é™…ä¸šåŠ¡åœºæ™¯åº”ç”¨</h2>
<h3 data-id="heading-11">åœºæ™¯ï¼šç”¨æˆ·ç®¡ç†ç³»ç»Ÿè¡¨æ ¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// features/user/components/UserTable.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SearchTable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/SearchTable'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SecureButton</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/SecureButton'</span>;
<span class="hljs-keyword">import</span> { useUserTable } <span class="hljs-keyword">from</span> <span class="hljs-string">'../hooks/useUserTable'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">UserTable</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> {
    data,
    loading,
    pagination,
    searchFields,
    handleSearch,
    handleDelete,
    handleEdit,
  } = <span class="hljs-title function_">useUserTable</span>();

  <span class="hljs-keyword">const</span> columns = [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'name'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'å§“å'</span>,
      <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'name'</span>,
    },
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'email'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'é‚®ç®±'</span>,
      <span class="hljs-attr">dataIndex</span>: <span class="hljs-string">'email'</span>,
    },
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'actions'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'æ“ä½œ'</span>,
      <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">_, record</span>) =&gt;</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">SecureButton</span>
            <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleEdit(record)}
            permission="user:edit"
          &gt;
            ç¼–è¾‘
          <span class="hljs-tag">&lt;/<span class="hljs-name">SecureButton</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">SecureButton</span>
            <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>
            <span class="hljs-attr">danger</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleDelete(record.id)}
            permission="user:delete"
            confirm="ç¡®å®šåˆ é™¤è¯¥ç”¨æˆ·å—ï¼Ÿ"
            tracking={{ event: 'user_delete' }}
          &gt;
            åˆ é™¤
          <span class="hljs-tag">&lt;/<span class="hljs-name">SecureButton</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      ),
    },
  ];

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SearchTable</span>
      <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span>
      <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span>
      <span class="hljs-attr">loading</span>=<span class="hljs-string">{loading}</span>
      <span class="hljs-attr">pagination</span>=<span class="hljs-string">{pagination}</span>
      <span class="hljs-attr">searchFields</span>=<span class="hljs-string">{searchFields}</span>
      <span class="hljs-attr">onSearch</span>=<span class="hljs-string">{handleSearch}</span>
      <span class="hljs-attr">rowKey</span>=<span class="hljs-string">"id"</span>
    /&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-12">äº”ã€æ¶æ„æ”¶ç›Šä¸é•¿æœŸä»·å€¼</h2>
<h3 data-id="heading-13">å¯åº¦é‡çš„æŠ€æœ¯æ”¶ç›Š</h3>
<ul>
<li>
<p><strong>å¼€å‘æ•ˆç‡</strong>ï¼šç»„ä»¶å¤ç”¨ç‡æå‡ 40-60%</p>
</li>
<li>
<p><strong>ç»´æŠ¤æˆæœ¬</strong>ï¼šUIåº“å‡çº§å·¥ä½œé‡å‡å°‘ 70-80%</p>
</li>
<li>
<p><strong>ä»£ç è´¨é‡</strong>ï¼šç±»å‹è¦†ç›–ç‡æå‡è‡³ 90%+</p>
</li>
<li>
<p><strong>å›¢é˜Ÿåä½œ</strong>ï¼šæ–°æˆå‘˜ä¸Šæ‰‹æ—¶é—´ç¼©çŸ­ 50%</p>
</li>
</ul>
<h3 data-id="heading-14">æˆ˜ç•¥ä»·å€¼</h3>
<ol>
<li>
<p><strong>æŠ€æœ¯å€ºåŠ¡æ§åˆ¶</strong>ï¼šé€šè¿‡ä¸­é—´å±‚éš”ç¦»å˜åŒ–ï¼Œæœ‰æ•ˆæ§åˆ¶æŠ€æœ¯å€ºåŠ¡ç§¯ç´¯</p>
</li>
<li>
<p><strong>æ¸è¿›å¼é‡æ„</strong>ï¼šæ”¯æŒè€ç³»ç»Ÿæ¸è¿›å¼è¿ç§»å’Œé‡æ„</p>
</li>
<li>
<p><strong>å¤šç«¯é€‚é…</strong>ï¼šä¸ºå°ç¨‹åºã€ç§»åŠ¨ç«¯ç­‰ä¸åŒå¹³å°æä¾›ç»Ÿä¸€API</p>
</li>
<li>
<p><strong>A/Bæµ‹è¯•</strong>ï¼šåœ¨ä¸­é—´å±‚å®ç°æ— ä¾µå…¥çš„åŠŸèƒ½å¼€å…³å’Œå®éªŒé…ç½®</p>
</li>
</ol>
<h2 data-id="heading-15">å…­ã€æœ€ä½³å®è·µä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-16">å®æ–½å»ºè®®</h3>
<ol>
<li>
<p><strong>æ¸è¿›å¼æ¨è¿›</strong>ï¼šä»æœ€å¸¸ç”¨çš„ç»„ä»¶å¼€å§‹å°è£…ï¼Œé€æ­¥è¦†ç›–</p>
</li>
<li>
<p><strong>æ–‡æ¡£é©±åŠ¨</strong>ï¼šä¸ºæ¯ä¸ªä¸­é—´å±‚ç»„ä»¶æä¾›å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£å’Œç¤ºä¾‹</p>
</li>
<li>
<p><strong>ç‰ˆæœ¬ç®¡ç†</strong>ï¼šå»ºç«‹ä¸­é—´å±‚ç»„ä»¶çš„ç‰ˆæœ¬å‘å¸ƒå’Œæ›´æ–°æœºåˆ¶</p>
</li>
<li>
<p><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šç›‘æ§ä¸­é—´å±‚ç»„ä»¶çš„æ€§èƒ½å½±å“å’Œé”™è¯¯ç‡</p>
</li>
</ol>
<h3 data-id="heading-17">é¿å…çš„é™·é˜±</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ è¿‡åº¦å°è£… - å¢åŠ äº†ä¸å¿…è¦çš„å¤æ‚åº¦</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">SuperButton</span> = (<span class="hljs-params">{ 
  ultraProp, 
  megaConfig, 
  ...rest 
}</span>) =&gt; {
  <span class="hljs-comment">// è¿‡äºå¤æ‚çš„é€»è¾‘...</span>
};

<span class="hljs-comment">// âœ… é€‚åº¦å°è£… - ä¿æŒç®€å•æ¸…æ™°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">PrimaryButton</span> = (<span class="hljs-params">{ 
  confirm, 
  tracking, 
  ...buttonProps 
}</span>) =&gt; {
  <span class="hljs-comment">// èšç„¦æ ¸å¿ƒå¢å¼ºåŠŸèƒ½...</span>
};
</code></pre>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>å‰ç«¯ç»„ä»¶ä¸­é—´å±‚è®¾è®¡ä¸ä»…æ˜¯æŠ€æœ¯å®ç°ï¼Œæ›´æ˜¯æ¶æ„æ€ç»´çš„ä½“ç°ã€‚å®ƒé€šè¿‡åˆç†çš„æŠ½è±¡å’Œå°è£…ï¼Œåœ¨ä¿è¯å¼€å‘ä½“éªŒçš„åŒæ—¶ï¼Œä¸ºåº”ç”¨é•¿æœŸæ¼”è¿›æä¾›äº†åšå®çš„æŠ€æœ¯åŸºç¡€ã€‚æˆåŠŸçš„ä¸­é—´å±‚è®¾è®¡åº”è¯¥åƒä¸€åº§ç²¾å¿ƒè®¾è®¡çš„æ¡¥æ¢ï¼Œæ—¢è¿æ¥ç°åœ¨ä¸æœªæ¥ï¼Œåˆæ‰¿è½½ç€å›¢é˜Ÿåä½œå’Œä¸šåŠ¡å‘å±•çš„é‡ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰“ç ´è¯¯è§£ï¼MongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ·±åº¦å®æµ‹ï¼šå¿«ç…§éš”ç¦»ç«Ÿèƒ½é˜²ä½ 8 ç§å¼‚å¸¸ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7570598043297480767</link>    <guid>https://juejin.cn/post/7570598043297480767</guid>    <pubDate>2025-11-10T06:18:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570598043297480767" data-draft-id="7570534000717496383" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰“ç ´è¯¯è§£ï¼MongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ·±åº¦å®æµ‹ï¼šå¿«ç…§éš”ç¦»ç«Ÿèƒ½é˜²ä½ 8 ç§å¼‚å¸¸ï¼Ÿ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-10T06:18:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3227821868332765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰“ç ´è¯¯è§£ï¼MongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ·±åº¦å®æµ‹ï¼šå¿«ç…§éš”ç¦»ç«Ÿèƒ½é˜²ä½ 8 ç§å¼‚å¸¸ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821868332765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‘¡è„åŸæŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:18:33.000Z" title="Mon Nov 10 2025 06:18:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‰“ç ´è¯¯è§£ï¼MongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ·±åº¦å®æµ‹ï¼šå¿«ç…§éš”ç¦»ç«Ÿèƒ½é˜²ä½ 8 ç§å¼‚å¸¸ï¼Ÿ</h2>
<p>ä½œä¸º NoSQL æ•°æ®åº“çš„ä»£è¡¨ï¼ŒMongoDB çš„äº‹åŠ¡èƒ½åŠ›ä¸€ç›´è¢«éƒ¨åˆ†å¼€å‘è€…â€œä½ä¼°â€â€”â€”ä¸å°‘äººè¿˜æŠ±ç€â€œè€ç‰ˆæœ¬æœ‰å‘â€â€œNoSQL äº‹åŠ¡ä¸é è°±â€çš„å›ºæœ‰å°è±¡ã€‚ä½†å®é™…ä¸Šï¼Œè‡ª 4.0 ç‰ˆæœ¬æ”¯æŒå¤šæ–‡æ¡£äº‹åŠ¡åï¼ŒMongoDB å·²å®ç° ACID å…¼å®¹ï¼Œå…¶åŸºäºå¿«ç…§éš”ç¦»ï¼ˆSnapshot Isolationï¼‰çš„è®¾è®¡ï¼Œä¸ä»…èƒ½åª²ç¾ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„ä¸€è‡´æ€§ï¼Œè¿˜é€šè¿‡ç‹¬ç‰¹çš„å†²çªå¤„ç†æœºåˆ¶å…¼é¡¾äº†æ€§èƒ½ã€‚æœ¬æ–‡ç»“åˆå®Œæ•´å®æµ‹ä»£ç å’Œæ¡ˆä¾‹ï¼Œå¸¦å¤§å®¶å½»åº•ææ‡‚ MongoDB çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œç†æ¸…é‚£äº›æµä¼ å·²ä¹…çš„è¯¯è§£ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒç»“è®ºï¼šMongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«çš„æœ¬è´¨</h3>
<p>MongoDB çš„å¤šæ–‡æ¡£äº‹åŠ¡é‡‡ç”¨<strong>å¿«ç…§éš”ç¦»ï¼ˆSnapshot Isolationï¼‰</strong> æœºåˆ¶ï¼Œä¾æ‰˜å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰å®ç°å¼ºä¸€è‡´æ€§ï¼Œå®Œå…¨æ»¡è¶³ ACID ç‰¹æ€§ã€‚</p>
<p>å¾ˆå¤šå¼€å‘è€…ä¼šä¸‹æ„è¯†å°†å…¶ä¸ SQL æ ‡å‡†çš„éš”ç¦»çº§åˆ«å¯¹æ ‡ï¼Œä½†è¿™ç§åšæ³•å¹¶ä¸æ°å½“â€”â€”SQL æ ‡å‡†çš„éš”ç¦»çº§åˆ«å®šä¹‰å¹¶æœªè€ƒè™‘ MVCCï¼Œè€Œ MongoDBã€PostgreSQL ç­‰ä¸»æµæ•°æ®åº“å‡ä¾èµ– MVCC å®ç°å¹¶å‘æ§åˆ¶ã€‚ç®€å•æ¥è¯´ï¼š</p>
<ul>
<li>MongoDB çš„äº‹åŠ¡éš”ç¦»èƒ½åŠ›ä¸é€Šè‰²äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼›</li>
<li>æ—©æœŸç‰ˆæœ¬ï¼ˆå¦‚ 4.0 åˆšæ”¯æŒå¤šæ–‡æ¡£äº‹åŠ¡æ—¶ï¼‰çš„éƒ¨åˆ†é—®é¢˜å·²å®Œå…¨ä¿®å¤ï¼Œåƒæ—©æœŸ Jepsen æŠ¥å‘Šä¸­æåˆ°çš„å¼‚å¸¸åœºæ™¯å·²ä¸å¤å­˜åœ¨ï¼›</li>
<li>å…¶éš”ç¦»çº§åˆ«é€šè¿‡<code>readConcern</code>ï¼ˆè¯»å…³æ³¨çº§åˆ«ï¼‰æ§åˆ¶ï¼Œä¸åŒçº§åˆ«å¯¹åº”ä¸åŒçš„ä¸€è‡´æ€§ä¿éšœå’Œä½¿ç”¨åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€å„è¯»å…³æ³¨çº§åˆ«çš„ç‰¹ç‚¹ï¼ˆä¸ SQL éš”ç¦»çº§åˆ«çš„åŒºåˆ«ï¼‰</h3>
<p>MongoDB çš„äº‹åŠ¡éš”ç¦»æ ¸å¿ƒç”±<code>readConcern</code>å‚æ•°æ§åˆ¶ï¼Œä¸åŒçº§åˆ«å¯¹åº”ä¸åŒçš„ä¸€è‡´æ€§è¡¨ç°ï¼Œä¸”æ— æ³•ç›´æ¥ç­‰åŒäº SQL æ ‡å‡†çš„éš”ç¦»çº§åˆ«ï¼Œå…·ä½“ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-3">1. local çº§åˆ«</h4>
<ul>
<li>å¯èƒ½è¯»å–åˆ°æœªæäº¤çš„ä¸­é—´çŠ¶æ€ï¼ˆè¿™äº›çŠ¶æ€åç»­å¯èƒ½å› äº‹åŠ¡å›æ»šè€Œå¤±æ•ˆï¼‰ï¼Œå› æ­¤æœ‰æ—¶è¢«ç±»æ¯”ä¸º SQL çš„â€œè¯»æœªæäº¤â€ï¼›</li>
<li>ä½†éœ€æ³¨æ„ï¼šéƒ¨åˆ† SQL æ•°æ®åº“åœ¨æç«¯æƒ…å†µä¸‹ä¹Ÿä¼šå‡ºç°ç±»ä¼¼è¡Œä¸ºï¼Œå´ä»å°†å…¶å½’ä¸ºâ€œè¯»å·²æäº¤â€çº§åˆ«ï¼Œå¯è§ç›´æ¥å¯¹æ ‡å¹¶ä¸ä¸¥è°¨ã€‚</li>
</ul>
<h4 data-id="heading-4">2. majority çº§åˆ«</h4>
<ul>
<li>ä»…è¯»å–å·²è¢«å¤§å¤šæ•°èŠ‚ç‚¹ç¡®è®¤æäº¤çš„æ•°æ®ï¼Œé¿å…äº†â€œè¯»æœªæäº¤â€é—®é¢˜ï¼Œå¸¸è¢«ç±»æ¯”ä¸º SQL çš„â€œè¯»å·²æäº¤â€ï¼›</li>
<li>å…³é”®åŒºåˆ«ï¼šSQL çš„â€œè¯»å·²æäº¤â€æ˜¯ä¸ºäº†å‡å°‘ä¸¤é˜¶æ®µé”çš„é”å®šæ—¶é•¿ï¼Œé‡‡ç”¨â€œå†²çªç­‰å¾…â€æœºåˆ¶ï¼›è€Œ MongoDB å¤šæ–‡æ¡£äº‹åŠ¡é‡‡ç”¨â€œå†²çªå³å¤±è´¥â€ï¼ˆfail-on-conflictï¼‰æœºåˆ¶ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…ï¼›</li>
<li>å±€é™ï¼šåœ¨å¤šåˆ†ç‰‡åœºæ™¯ä¸‹ï¼Œå¯èƒ½è¯»å–åˆ°å¤šä¸ªä¸åŒæ—¶é—´ç‚¹çš„çŠ¶æ€ï¼Œæ— æ³•ä¿è¯è·¨åˆ†ç‰‡çš„æ—¶é—´çº¿ä¸€è‡´æ€§ã€‚</li>
</ul>
<h4 data-id="heading-5">3. snapshot çº§åˆ«</h4>
<ul>
<li>çœŸæ­£ç­‰åŒäºâ€œå¿«ç…§éš”ç¦»â€ï¼Œèƒ½æä¾›è·¨åˆ†ç‰‡çš„æ—¶é—´çº¿ä¸€è‡´æ€§ï¼Œé˜²æ­¢çš„å¼‚å¸¸åœºæ™¯æ¯”â€œè¯»å·²æäº¤â€æ›´å¤šï¼›</li>
<li>æœ‰è¶£çš„æ˜¯ï¼šéƒ¨åˆ†æ•°æ®åº“ä¼šå°†å…¶ç§°ä¸ºâ€œå¯ä¸²è¡ŒåŒ–â€ï¼Œå› ä¸º SQL æ ‡å‡†å¹¶æœªè€ƒè™‘â€œå†™å€¾æ–œâ€ï¼ˆwrite skewï¼‰å¼‚å¸¸ï¼Œè€Œå¿«ç…§éš”ç¦»æœ¬èº«å¯è§„é¿éƒ¨åˆ†æ­¤ç±»åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-6">4. linearizable çº§åˆ«</h4>
<ul>
<li>ä»…é€‚ç”¨äºå•æ–‡æ¡£æ“ä½œï¼Œæ— æ³•ç”¨äºå¤šæ–‡æ¡£äº‹åŠ¡ï¼Œå¯ç±»æ¯”ä¸º SQL çš„â€œå¯ä¸²è¡ŒåŒ–â€ï¼›</li>
<li>ç‰¹ç‚¹ï¼šèƒ½ä¿è¯å•æ–‡æ¡£æ“ä½œçš„çº¿æ€§ä¸€è‡´æ€§ï¼Œä½†ä¼šé‡æ–°å¼•å…¥è¯»é”å¸¦æ¥çš„æ‰©å±•æ€§é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯å¤šæ•°æ•°æ®åº“ä¸é»˜è®¤æä¾›å¯ä¸²è¡ŒåŒ–çº§åˆ«çš„åŸå› â€”â€”MVCC çš„æ ¸å¿ƒä¼˜åŠ¿å°±æ˜¯é¿å…è¯»é”ã€‚</li>
</ul>
<h3 data-id="heading-7">ä¸‰ã€å®æµ‹éªŒè¯ï¼šMongoDB å¦‚ä½•é˜²æ­¢äº‹åŠ¡å¼‚å¸¸ï¼Ÿ</h3>
<p>ä¸ºäº†éªŒè¯ MongoDB äº‹åŠ¡çš„éš”ç¦»èƒ½åŠ›ï¼Œæµ‹è¯•è€…éµå¾ª Martin Kleppmann çš„æµ‹è¯•æ¡†æ¶ï¼ˆåŸæœ¬ç”¨äº PostgreSQLï¼‰ï¼Œé’ˆå¯¹å¤šæ–‡æ¡£äº‹åŠ¡åœºæ™¯è¿›è¡Œäº†ä¸€ç³»åˆ—å®æµ‹ã€‚æ‰€æœ‰æµ‹è¯•å‡é‡‡ç”¨<code>readConcern: majority</code>å’Œ<code>writeConcern: majority</code>é…ç½®ï¼ˆå•èŠ‚ç‚¹ç¯å¢ƒï¼‰ï¼Œéƒ¨åˆ†è·¨åˆ†ç‰‡åœºæ™¯éœ€ä½¿ç”¨<code>snapshot</code>çº§åˆ«ï¼Œä»¥ä¸‹æ˜¯å¸¦å®Œæ•´ä»£ç çš„å…³é”®æµ‹è¯•ç»“æœï¼š</p>
<h4 data-id="heading-8">æµ‹è¯•å‰æ</h4>
<p>æ‰€æœ‰æµ‹è¯•å‡åˆå§‹åŒ–åŸºç¡€æ•°æ®ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®</span>
use test_db;
db.<span class="hljs-property">test</span>.<span class="hljs-title function_">drop</span>();
db.<span class="hljs-property">test</span>.<span class="hljs-title function_">insertMany</span>([
  { <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> },
  { <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">20</span> }
]);
</code></pre>
<p>äº‹åŠ¡å‡é€šè¿‡<code>startSession()</code>å¼€å¯ï¼Œæ˜ç¡®æŒ‡å®šè¯»/å†™å…³æ³¨çº§åˆ«ã€‚</p>
<h4 data-id="heading-9">1. é˜²æ­¢å†™å¾ªç¯ï¼ˆG0ï¼‰ï¼šå†²çªå³å¤±è´¥ï¼Œæ‹’ç»æ— é™ç­‰å¾…</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šä¸¤ä¸ªäº‹åŠ¡åŒæ—¶æ›´æ–°åŒä¸€æ–‡æ¡£ï¼›</li>
<li>ä¼ ç»Ÿä¸¤é˜¶æ®µé”æ•°æ®åº“ï¼šç¬¬äºŒä¸ªäº‹åŠ¡ä¼šç­‰å¾…ç¬¬ä¸€ä¸ªäº‹åŠ¡å®Œæˆï¼Œé¿å…å†²çªï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡åŒæ—¶æ›´æ–°åŒä¸€æ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>å…³é”®å·®å¼‚ï¼šéšå¼å•æ–‡æ¡£äº‹åŠ¡ï¼ˆè‡ªåŠ¨æäº¤ï¼‰é‡‡ç”¨â€œå†²çªç­‰å¾…â€æœºåˆ¶ï¼Œæµ‹è¯•ä¸­ç­‰å¾… 60 ç§’è¶…æ—¶åæ‰§è¡ŒæˆåŠŸï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> db = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">getDB</span>(<span class="hljs-string">"test_db"</span>);
<span class="hljs-title function_">print</span>(<span class="hljs-string">`Elapsed time: <span class="hljs-subst">${
  ((startTime = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>())
  &amp;amp;&amp;amp; db.test.updateOne({ _id: <span class="hljs-number">1</span> }, { $set: { value: <span class="hljs-number">12</span> } }))
  &amp;amp;&amp;amp; (<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() - startTime)
}</span> ms`</span>);

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šElapsed time: 72548 msï¼ˆç­‰å¾…çº¦60ç§’è¶…æ—¶åæˆåŠŸï¼‰</span>
<span class="hljs-comment">// æ­¤æ—¶T1äº‹åŠ¡å› è¶…æ—¶è¢«ä¸­æ­¢ï¼Œæäº¤æ—¶ä¼šæŠ¥é”™ï¼š</span>
<span class="hljs-comment">// session1.commitTransaction();</span>
<span class="hljs-comment">// MongoServerError[NoSuchTransaction]: Transaction with { txnNumber: 2 } has been aborted.</span>
</code></pre>
<ul>
<li>ç»“è®ºï¼šæ˜¾å¼å¤šæ–‡æ¡£äº‹åŠ¡é‡‡ç”¨â€œå†²çªå³å¤±è´¥â€ï¼Œè®©åº”ç”¨è‡ªè¡Œå¤„ç†é‡è¯•é€»è¾‘ï¼Œå…¼é¡¾å¤æ‚äº‹åŠ¡çš„çµæ´»æ€§ã€‚</li>
</ul>
<h4 data-id="heading-10">2. é˜²æ­¢æœªæäº¤è¯»ï¼ˆG1aï¼‰ï¼šåªè®¤å·²æäº¤æ•°æ®</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šäº‹åŠ¡ T1 æ›´æ–°æ–‡æ¡£åæœªæäº¤ï¼Œäº‹åŠ¡ T2 è¯»å–è¯¥æ–‡æ¡£ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ›´æ–°æ–‡æ¡£ä½†æœªæäº¤</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">101</span> } });

<span class="hljs-comment">// T2è¯»å–æ–‡æ¡£ï¼Œä»…èƒ½çœ‹åˆ°å·²æäº¤æ•°æ®</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// T1å›æ»šäº‹åŠ¡</span>
session1.<span class="hljs-title function_">abortTransaction</span>();

<span class="hljs-comment">// T2å†æ¬¡è¯»å–ï¼Œç»“æœä¸å˜</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

session2.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>ç»“è®ºï¼š<code>majority</code>æˆ–<code>snapshot</code>çº§åˆ«å‡èƒ½æœç»â€œè¯»å–æœªæäº¤æ•°æ®â€çš„å¼‚å¸¸ã€‚</li>
</ul>
<h4 data-id="heading-11">3. é˜²æ­¢ä¸­é—´è¯»ï¼ˆG1bï¼‰ï¼šäº‹åŠ¡å†…è¯»æ—¶é—´çº¿å›ºå®š</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šT1 æ›´æ–°æ–‡æ¡£å¹¶æäº¤ï¼ŒT2 åœ¨ T1 æäº¤å‰å·²å¯åŠ¨ï¼Œåç»­å†æ¬¡è¯»å–è¯¥æ–‡æ¡£ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ›´æ–°æ–‡æ¡£ï¼ˆæœªæäº¤ï¼‰</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">101</span> } });

<span class="hljs-comment">// T2è¯»å–ï¼Œçœ‹ä¸åˆ°æœªæäº¤å˜æ›´</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// T1ä¿®æ”¹å¹¶æäº¤</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
session1.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T2å†æ¬¡è¯»å–ï¼Œä»çœ‹ä¸åˆ°T1æäº¤çš„æ–°å€¼</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

session2.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>åŒºåˆ«äº SQLï¼šå¤šæ•° MVCC æ¶æ„çš„ SQL æ•°æ®åº“åœ¨â€œè¯»å·²æäº¤â€çº§åˆ«ä¸‹ï¼Œä¼šåœ¨æ¯ä¸ªè¯­å¥æ‰§è¡Œå‰é‡ç½®è¯»æ—¶é—´çº¿ï¼Œå› æ­¤èƒ½çœ‹åˆ°åç»­æäº¤çš„æ–°å€¼ï¼Œè€Œ MongoDB äº‹åŠ¡çš„è¯»æ—¶é—´çº¿å›ºå®šåœ¨äº‹åŠ¡å¯åŠ¨æ—¶ï¼Œä»æ ¹æºé¿å…äº†â€œä¸­é—´è¯»â€ã€‚</li>
</ul>
<h4 data-id="heading-12">4. é˜²æ­¢å¾ªç¯ä¿¡æ¯æµè½¬ï¼ˆG1cï¼‰ï¼šæœªæäº¤å˜æ›´äº’ä¸å¯è§</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šT1 æ›´æ–°æ–‡æ¡£ 1ï¼ŒT2 æ›´æ–°æ–‡æ¡£ 2ï¼Œä¸¤è€…äº’ç›¸è¯»å–å¯¹æ–¹æ›´æ–°çš„æ–‡æ¡£ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ›´æ–°æ–‡æ¡£1ï¼ŒT2æ›´æ–°æ–‡æ¡£2</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">22</span> } });

<span class="hljs-comment">// T1è¯»å–æ–‡æ¡£2ï¼Œçœ‹ä¸åˆ°T2çš„æœªæäº¤æ›´æ–°</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// T2è¯»å–æ–‡æ¡£1ï¼Œçœ‹ä¸åˆ°T1çš„æœªæäº¤æ›´æ–°</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>

<span class="hljs-comment">// æäº¤ä¸¤ä¸ªäº‹åŠ¡</span>
session1.<span class="hljs-title function_">commitTransaction</span>();
session2.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<h4 data-id="heading-13">5. é˜²æ­¢äº‹åŠ¡æ¶ˆå¤±ï¼ˆOTVï¼‰ï¼šå¤šäº‹åŠ¡å†²çªå¿«é€Ÿå¤±è´¥</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šä¸‰ä¸ªäº‹åŠ¡åŒæ—¶æ“ä½œåŒä¸€æ‰¹æ–‡æ¡£ï¼Œå­˜åœ¨äº¤å‰æ›´æ–°ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T3</span>
<span class="hljs-keyword">const</span> session3 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T3</span> = session3.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session3.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ›´æ–°ä¸¤ä¸ªæ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">19</span> } });

<span class="hljs-comment">// T2æ›´æ–°æ–‡æ¡£1ï¼Œè§¦å‘å†²çª</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>ä¼˜åŠ¿ï¼šç›¸æ¯”ä¼ ç»Ÿæ•°æ®åº“çš„â€œç­‰å¾…-è¶…æ—¶â€æœºåˆ¶ï¼ŒMongoDB çš„â€œå†²çªå³å¤±è´¥â€èƒ½è®©åº”ç”¨æ›´å¿«æ„ŸçŸ¥å¹¶å¤„ç†å†²çªï¼Œæå‡æ•´ä½“ååé‡ã€‚</li>
</ul>
<h4 data-id="heading-14">6. é˜²æ­¢å¤šå‰é©±è°“è¯å¼‚å¸¸ï¼ˆPMPï¼‰ï¼šå¿«ç…§ä¸€è‡´æ€§è¦†ç›–æŸ¥è¯¢åœºæ™¯</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ 1ï¼šT1 å¯åŠ¨åæ‰§è¡ŒæŸ¥è¯¢ï¼ˆæ— åŒ¹é…ç»“æœï¼‰ï¼ŒT2 æ’å…¥åŒ¹é…è¯¥æŸ¥è¯¢æ¡ä»¶çš„æ–‡æ¡£å¹¶æäº¤ï¼ŒT1 å†æ¬¡æ‰§è¡Œç›¸åŒæŸ¥è¯¢ï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æŸ¥è¯¢value=30çš„æ–‡æ¡£ï¼Œæ— ç»“æœ</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: <span class="hljs-number">30</span> }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>

<span class="hljs-comment">// T2æ’å…¥åŒ¹é…æ¡ä»¶çš„æ–‡æ¡£å¹¶æäº¤</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">insertOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">30</span> });
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T1å†æ¬¡æŸ¥è¯¢ï¼Œä»æ— ç»“æœ</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>

session1.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>æµ‹è¯•åœºæ™¯ 2ï¼šT1 æ‰¹é‡æ›´æ–°æ–‡æ¡£ï¼ŒT2 æ‰¹é‡åˆ é™¤åŒ¹é…æ–‡æ¡£ï¼Œè§¦å‘å†²çªï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æ‰¹é‡æ›´æ–°æ‰€æœ‰æ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateMany</span>({}, { <span class="hljs-attr">$inc</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> } });

<span class="hljs-comment">// T2åˆ é™¤value=20çš„æ–‡æ¡£ï¼Œè§¦å‘å†²çª</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">deleteMany</span>({ <span class="hljs-attr">value</span>: <span class="hljs-number">20</span> });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>ç»“è®ºï¼šMongoDB é€šè¿‡å¿«ç…§éš”ç¦»å’Œå†²çªæ£€æµ‹ï¼Œé¿å…äº†åŸºäºè¿‡æ—¶æŸ¥è¯¢ç»“æœæ‰§è¡Œå†™æ“ä½œçš„å¼‚å¸¸ã€‚</li>
</ul>
<h4 data-id="heading-15">7. é˜²æ­¢ä¸¢å¤±æ›´æ–°ï¼ˆP4ï¼‰ï¼šæ‹’ç»å¹¶è¡Œæ›´æ–°è¦†ç›–</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ï¼šä¸¤ä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€æ–‡æ¡£ï¼ŒåŸºäºç›¸åŒçš„æ—§å€¼æ‰§è¡Œæ›´æ–°ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡å‡è¯»å–æ–‡æ¡£1çš„æ—§å€¼</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡åŸºäºæ—§å€¼æ‰§è¡Œæ›´æ–°ï¼Œåæ‰§è¡Œçš„è§¦å‘å†²çª</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>å…³é”®ï¼šåº”ç”¨åªéœ€æ•è·è¯¥é”™è¯¯å¹¶é‡è¯•ï¼Œå³å¯ä¿è¯æ›´æ–°çš„åŸå­æ€§ã€‚</li>
</ul>
<h4 data-id="heading-16">8. é˜²æ­¢è¯»å€¾æ–œï¼ˆG-singleï¼‰ï¼šäº‹åŠ¡å†…æ•°æ®ä¸€è‡´æ€§</h4>
<ul>
<li>æµ‹è¯•åœºæ™¯ 1ï¼šT1 å¯åŠ¨åè¯»å–æ–‡æ¡£ 2ï¼ŒT2 æ›´æ–°æ–‡æ¡£ 1 å’Œ 2 å¹¶æäº¤ï¼ŒT1 å†æ¬¡è¯»å–æ–‡æ¡£ 2ï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({

  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1è¯»å–æ–‡æ¡£1å’Œ2</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// T2æ›´æ–°ä¸¤ä¸ªæ–‡æ¡£å¹¶æäº¤</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">18</span> } });
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T1å†æ¬¡è¯»å–æ–‡æ¡£2ï¼Œç»“æœä¸å˜</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 2, value: 20 } ]</span>

session1.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>æµ‹è¯•åœºæ™¯ 2ï¼šT1 æŸ¥è¯¢åŒ¹é…æ¡ä»¶çš„æ–‡æ¡£ï¼ŒT2 æ›´æ–°æ–‡æ¡£ä½¿å…¶æ»¡è¶³æ–°æ¡ä»¶å¹¶æäº¤ï¼ŒT1 å†æ¬¡æŸ¥è¯¢ï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1æŸ¥è¯¢valueèƒ½è¢«5æ•´é™¤çš„æ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">findOne</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">5</span>, <span class="hljs-number">0</span>] } }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š{ _id: 1, value: 10 }</span>

<span class="hljs-comment">// T2æ›´æ–°æ–‡æ¡£1ä½¿å…¶èƒ½è¢«3æ•´é™¤å¹¶æäº¤</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T1æŸ¥è¯¢valueèƒ½è¢«3æ•´é™¤çš„æ–‡æ¡£ï¼Œæ— ç»“æœ</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>

session1.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>æµ‹è¯•åœºæ™¯ 3ï¼šT2 æ›´æ–°æ–‡æ¡£åæäº¤ï¼ŒT1 åˆ é™¤åŒ¹é…æ—§å€¼çš„æ–‡æ¡£ï¼Œè§¦å‘å†²çªï¼›</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// T1è¯»å–æ–‡æ¡£1</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 } ]</span>

<span class="hljs-comment">// T2æ›´æ–°ä¸¤ä¸ªæ–‡æ¡£å¹¶æäº¤</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">12</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">18</span> } });
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T1åˆ é™¤value=20çš„æ–‡æ¡£ï¼Œè§¦å‘å†²çª</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">deleteMany</span>({ <span class="hljs-attr">value</span>: <span class="hljs-number">20</span> });

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šæŠ›å‡ºå†™å†²çªé”™è¯¯</span>
<span class="hljs-comment">// MongoServerError[WriteConflict]: Caused by :: Write conflict during plan execution and yielding is disabled. :: Please retry your operation or multi-document transaction.</span>
</code></pre>
<ul>
<li>å¯¹æ¯” SQLï¼šSQL çš„â€œè¯»å·²æäº¤â€çº§åˆ«å¯èƒ½å‡ºç°â€œè¯»å€¾æ–œâ€ï¼Œå³åŒä¸€äº‹åŠ¡å†…ä¸¤æ¬¡è¯»å–åŒä¸€æ–‡æ¡£å¾—åˆ°ä¸åŒç»“æœï¼Œè€Œ MongoDB çš„å¿«ç…§éš”ç¦»å®Œå…¨è§„é¿äº†è¿™ä¸€é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-17">å››ã€éœ€è¦åº”ç”¨å±‚å¤„ç†çš„äº‹åŠ¡å¼‚å¸¸</h3>
<p>MongoDB çš„å¿«ç…§éš”ç¦»å¹¶éä¸‡èƒ½ï¼Œä»¥ä¸‹ä¸¤ç§å¼‚å¸¸æ— æ³•é€šè¿‡æ•°æ®åº“å±‚é¢è‡ªåŠ¨é˜²æ­¢ï¼Œéœ€è¦åº”ç”¨å±‚ä»‹å…¥å¤„ç†ï¼š</p>
<h4 data-id="heading-18">1. å†™å€¾æ–œï¼ˆG2-itemï¼‰ï¼šè¯»ä¾èµ–å¯¼è‡´çš„é€»è¾‘å†²çª</h4>
<ul>
<li>åœºæ™¯ï¼šä¸¤ä¸ªäº‹åŠ¡åŒæ—¶è¯»å–åŒä¸€æ‰¹æ–‡æ¡£ï¼ŒåŸºäºè¯»å–ç»“æœæ‰§è¡Œæ›´æ–°ï¼Œæ›´æ–°åçš„æ•°æ®å¯èƒ½è¿åä¸šåŠ¡è§„åˆ™ï¼ˆå¦‚ä¸¤ä¸ªäº‹åŠ¡å‡åˆ¤æ–­â€œåº“å­˜å……è¶³â€å¹¶æ‰£å‡ï¼Œæœ€ç»ˆå¯¼è‡´åº“å­˜ä¸ºè´Ÿï¼‰ï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"majority"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"snapshot"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡å‡è¯»å–æ–‡æ¡£1å’Œ2</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: { <span class="hljs-attr">$in</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>] } });
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">_id</span>: { <span class="hljs-attr">$in</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>] } });
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 1, value: 10 }, { _id: 2, value: 20 } ]</span>

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡åˆ†åˆ«æ›´æ–°æ–‡æ¡£</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">1</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">11</span> } });
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">updateOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">2</span> }, { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">21</span> } });

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡å‡æäº¤æˆåŠŸï¼Œæœªè§¦å‘å†²çª</span>
session1.<span class="hljs-title function_">commitTransaction</span>();
session2.<span class="hljs-title function_">commitTransaction</span>();
</code></pre>
<ul>
<li>åŸå› ï¼šMongoDB ä¸ä¼šåœ¨è¯»å–æ—¶åŠ é”ï¼Œä¹Ÿæ— æ³•æ„ŸçŸ¥â€œåŸºäºè¯»å–ç»“æœçš„å†™ä¾èµ–â€ï¼›</li>
<li>è§£å†³æ–¹æ¡ˆï¼šåº”ç”¨å±‚å¯é€šè¿‡â€œæ›´æ–°è¯»é›†æ–‡æ¡£â€çš„æ–¹å¼ï¼Œå°†è¯»ä¾èµ–è½¬åŒ–ä¸ºå†™å†²çªï¼ˆå¦‚è¯»å–æ–‡æ¡£æ—¶æ›´æ–°ä¸€ä¸ªâ€œç‰ˆæœ¬å·â€å­—æ®µï¼‰ï¼Œè¿«ä½¿å†²çªäº‹åŠ¡å¤±è´¥é‡è¯•ã€‚</li>
</ul>
<h4 data-id="heading-19">2. åä¾èµ–å¾ªç¯ï¼ˆG2ï¼‰ï¼šè·¨äº‹åŠ¡è¯»å†™ä¾èµ–å†²çª</h4>
<ul>
<li>åœºæ™¯ï¼šä¸¤ä¸ªäº‹åŠ¡å‡åŸºäºå¯¹æ–¹å·²æ›´æ–°çš„æ–‡æ¡£æ‰§è¡Œå†™æ“ä½œï¼Œå¯¼è‡´æœ€ç»ˆç»“æœè¿åé¢„æœŸï¼›</li>
<li>MongoDB æµ‹è¯•ä»£ç ï¼š</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®ï¼ˆåŒä¸Šï¼Œç•¥ï¼‰</span>

<span class="hljs-comment">// äº‹åŠ¡T1</span>
<span class="hljs-keyword">const</span> session1 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T1</span> = session1.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session1.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"snapshot"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// äº‹åŠ¡T2</span>
<span class="hljs-keyword">const</span> session2 = db.<span class="hljs-title function_">getMongo</span>().<span class="hljs-title function_">startSession</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">T2</span> = session2.<span class="hljs-title function_">getDatabase</span>(<span class="hljs-string">"test_db"</span>);
session2.<span class="hljs-title function_">startTransaction</span>({
  <span class="hljs-attr">readConcern</span>: { <span class="hljs-attr">level</span>: <span class="hljs-string">"snapshot"</span> },
  <span class="hljs-attr">writeConcern</span>: { <span class="hljs-attr">w</span>: <span class="hljs-string">"majority"</span> }
});

<span class="hljs-comment">// ä¸¤ä¸ªäº‹åŠ¡å‡æŸ¥è¯¢valueèƒ½è¢«3æ•´é™¤çš„æ–‡æ¡£ï¼Œæ— ç»“æœ</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>
<span class="hljs-variable constant_">T2</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>(); 
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[]</span>

<span class="hljs-comment">// T1æ’å…¥ä¸¤ä¸ªèƒ½è¢«3æ•´é™¤çš„æ–‡æ¡£å¹¶æäº¤</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">insertOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">30</span> });
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">insertOne</span>({ <span class="hljs-attr">_id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">42</span> });
session1.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// T2æäº¤ï¼ˆæ— æ›´æ–°æ“ä½œï¼‰</span>
session2.<span class="hljs-title function_">commitTransaction</span>();

<span class="hljs-comment">// æœ€ç»ˆæŸ¥è¯¢ï¼Œèƒ½çœ‹åˆ°T1æ’å…¥çš„æ–‡æ¡£</span>
<span class="hljs-variable constant_">T1</span>.<span class="hljs-property">test</span>.<span class="hljs-title function_">find</span>({ <span class="hljs-attr">value</span>: { <span class="hljs-attr">$mod</span>: [<span class="hljs-number">3</span>, <span class="hljs-number">0</span>] } }).<span class="hljs-title function_">toArray</span>();
<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š[ { _id: 3, value: 30 }, { _id: 4, value: 42 } ]</span>
</code></pre>
<ul>
<li>åŸå› ï¼šMongoDB ä¸ä¼šåœ¨è¯»å†™æ“ä½œä¹‹é—´åŠ é”ï¼Œæ— æ³•æ£€æµ‹æ­¤ç±»è·¨äº‹åŠ¡çš„è¯»ä¾èµ–å†²çªï¼›</li>
<li>è§£å†³æ–¹æ¡ˆï¼šè‹¥äº‹åŠ¡çš„å†™æ“ä½œä¾èµ–äºä¹‹å‰çš„è¯»å–ç»“æœï¼Œåº”ç”¨å±‚éœ€æ˜¾å¼æ›´æ–°è¯»å–è¿‡çš„æ–‡æ¡£ï¼ˆå¦‚æ·»åŠ â€œå·²å¤„ç†â€æ ‡è®°ï¼‰ï¼Œè§¦å‘ MongoDB çš„å†™å†²çªæ£€æµ‹ï¼Œé¿å…å¼‚å¸¸ã€‚</li>
</ul>
<h3 data-id="heading-20">äº”ã€æ€»ç»“ï¼šMongoDB äº‹åŠ¡éš”ç¦»çº§åˆ«æ€ä¹ˆç”¨ï¼Ÿ</h3>
<ol>
<li>æ ¸å¿ƒé€‰å‹ï¼šå•åˆ†ç‰‡åœºæ™¯ç”¨<code>readConcern: majority</code>å³å¯æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ï¼Œå¤šåˆ†ç‰‡åœºæ™¯éœ€ç”¨<code>snapshot</code>ä¿è¯è·¨åˆ†ç‰‡ä¸€è‡´æ€§ï¼›</li>
<li>å†²çªå¤„ç†ï¼šæ˜¾å¼å¤šæ–‡æ¡£äº‹åŠ¡é‡‡ç”¨â€œå†²çªå³å¤±è´¥â€ï¼Œåº”ç”¨éœ€å®ç°é‡è¯•é€»è¾‘ï¼ˆç®€å•åœºæ™¯å¯ç›´æ¥é‡è¯•ï¼Œå¤æ‚åœºæ™¯éœ€å¤„ç†å¹‚ç­‰æ€§ï¼‰ï¼›</li>
<li>æ‰“ç ´è¯¯è§£ï¼šMongoDB çš„å¤šæ–‡æ¡£äº‹åŠ¡æ—©å·²å…·å¤‡ç”Ÿäº§çº§ç¨³å®šæ€§ï¼Œå…¶éš”ç¦»èƒ½åŠ›ä¸é€Šè‰²äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼Œæ— éœ€å†è¢«â€œNoSQL äº‹åŠ¡ä¸é è°±â€çš„è€è§‚å¿µæŸç¼šï¼›</li>
<li>æ€§èƒ½å¹³è¡¡ï¼šé€šè¿‡ MVCC å’Œâ€œå†²çªå³å¤±è´¥â€æœºåˆ¶ï¼ŒMongoDB åœ¨ä¿è¯ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œé¿å…äº†è¯»é”å¸¦æ¥çš„æ‰©å±•æ€§é—®é¢˜ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚</li>
</ol>
<p>å¦‚æœä½ çš„ä¸šåŠ¡éœ€è¦ä½¿ç”¨ MongoDB çš„å¤šæ–‡æ¡£äº‹åŠ¡ï¼Œä¸å¦¨ç›´æ¥å¤åˆ¶æœ¬æ–‡çš„æµ‹è¯•ä»£ç è¿›è¡ŒéªŒè¯ï¼Œç»“åˆè‡ªèº«ä¸šåŠ¡ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„è¯»å…³æ³¨çº§åˆ«ï¼ŒåŒæ—¶åœ¨åº”ç”¨å±‚å¤„ç†å¥½å†™å€¾æ–œå’Œåä¾èµ–å¾ªç¯é—®é¢˜ï¼Œå³å¯å……åˆ†å‘æŒ¥å…¶é«˜å¹¶å‘+å¼ºä¸€è‡´æ€§çš„ä¼˜åŠ¿ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æï¼šè§£å†³ backdrop-filter ä¸ border-radius çš„åœ†è§’æ¼å…‰é—®é¢˜]]></title>    <link>https://juejin.cn/post/7570646659865985050</link>    <guid>https://juejin.cn/post/7570646659865985050</guid>    <pubDate>2025-11-10T06:52:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570646659865985050" data-draft-id="7570769486706458662" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æï¼šè§£å†³ backdrop-filter ä¸ border-radius çš„åœ†è§’æ¼å…‰é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,HTML"/> <meta itemprop="datePublished" content="2025-11-10T06:52:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_å¿—å“¥_"/> <meta itemprop="url" content="https://juejin.cn/user/3474112476882071"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æï¼šè§£å†³ backdrop-filter ä¸ border-radius çš„åœ†è§’æ¼å…‰é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3474112476882071/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _å¿—å“¥_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:52:47.000Z" title="Mon Nov 10 2025 06:52:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€</h3>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼Œ<code>backdrop-filter</code>Â å±æ€§ä¸ºåˆ›å»ºæ¯›ç»ç’ƒç­‰é«˜çº§è§†è§‰æ•ˆæœæä¾›äº†å¼ºå¤§çš„æ”¯æŒï¼Œæå¤§åœ°æå‡äº†ç”¨æˆ·ç•Œé¢çš„å±‚æ¬¡æ„Ÿå’Œç°ä»£æ„Ÿã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬å°†å®ƒä¸Â <code>border-radius</code>Â ç»“åˆä½¿ç”¨æ—¶ï¼Œä¸€ä¸ªå¸¸è§çš„æ¸²æŸ“é—®é¢˜ä¾¿ä¼šæµ®ç°ï¼šåœ†è§’è¾¹ç¼˜å‡ºç°ä¸åº”æœ‰çš„â€œæ¼å…‰â€ç°è±¡ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¯¥é—®é¢˜çš„æ ¹æºï¼Œåˆ†æç°æœ‰è§£å†³æ–¹æ¡ˆçš„å±€é™æ€§ï¼Œå¹¶æœ€ç»ˆæä¾›ä¸€ä¸ªåŸºäº CSS Mask çš„ã€è¡Œä¹‹æœ‰æ•ˆçš„ç»ˆæè§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">é—®é¢˜æ ¹æºï¼šæ¸²æŸ“å±‚çº§çš„å†²çª</h3>
<p>è¦ç†è§£â€œæ¼å…‰â€ç°è±¡ï¼Œæˆ‘ä»¬å¿…é¡»æ·±å…¥æµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶ã€‚è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒåœ¨äºÂ <code>backdrop-filter</code>Â å’ŒÂ <code>border-radius</code>Â åœ¨æ¸²æŸ“æµæ°´çº¿ä¸­çš„å·¥ä½œé¡ºåºå’Œæ–¹å¼å­˜åœ¨æ ¹æœ¬æ€§çš„å†²çªã€‚</p>
<ol>
<li>
<p><strong><code>backdrop-filter</code>Â çš„å·¥ä½œåŸç†</strong>ï¼š<br/>
<code>backdrop-filter</code>Â ä½œç”¨äºå…ƒç´ èƒŒåçš„æ‰€æœ‰å†…å®¹ã€‚å®ƒä¼šè·å–è¿™äº›å†…å®¹ï¼Œåº”ç”¨æŒ‡å®šçš„æ»¤é•œï¼ˆå¦‚Â <code>blur</code>ï¼‰ï¼Œç„¶åå°†ç»“æœç»˜åˆ¶åœ¨å½“å‰å…ƒç´ çš„èƒŒæ™¯åŒºåŸŸã€‚å…³é”®åœ¨äºï¼Œè¿™ä¸ªæ¨¡ç³Šæ•ˆæœçš„ç»˜åˆ¶æ˜¯åŸºäºå…ƒç´ çš„<strong>è¾¹ç•Œæ¡†</strong>ï¼Œå³ä¸€ä¸ªçŸ©å½¢åŒºåŸŸã€‚</p>
</li>
<li>
<p><strong>æ¨¡ç³Šæ•ˆæœçš„â€œæº¢å‡ºâ€</strong> ï¼š<br/>
æ¨¡ç³Šç®—æ³•çš„æœ¬è´¨æ˜¯åƒç´ å‘å‘¨å›´æ‰©æ•£ï¼Œè¿™ä¼šå¯¼è‡´æ¨¡ç³Šåçš„å›¾åƒå°ºå¯¸å¤§äºåŸå§‹å›¾åƒï¼Œå½¢æˆä¸€ä¸ªâ€œå…‰æ™•â€æˆ–â€œæº¢å‡ºâ€è¾¹ç¼˜ã€‚è¿™ä¸ªæº¢å‡ºéƒ¨åˆ†ä¼šè¶…å‡ºå…ƒç´ åŸå§‹çš„çŸ©å½¢è¾¹ç•Œã€‚</p>
</li>
<li>
<p><strong><code>border-radius</code>Â çš„å·¥ä½œåŸç†</strong>ï¼š<br/>
<code>border-radius</code>Â æ˜¯ä¸€ä¸ªè£å‰ªå±æ€§ã€‚å®ƒåœ¨å…ƒç´ çš„å†…å®¹ï¼ˆåŒ…æ‹¬èƒŒæ™¯ã€è¾¹æ¡†ç­‰ï¼‰è¢«ç»˜åˆ¶å®Œæˆåï¼Œå¯¹å…ƒç´ è‡ªèº«è¿›è¡Œå‡ ä½•è£å‰ªï¼Œä½¿å…¶å‘ˆç°åœ†è§’ã€‚</p>
</li>
<li>
<p><strong>æ¸²æŸ“å†²çªç‚¹</strong>ï¼š<br/>
æµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹å†³å®šäº†Â <code>backdrop-filter</code>Â çš„æ¨¡ç³Šæ•ˆæœï¼ˆåŒ…æ‹¬å…¶æº¢å‡ºçš„å…‰æ™•ï¼‰ä¼šå…ˆè¢«å®Œæ•´åœ°ç»˜åˆ¶åœ¨ä¸€ä¸ªçŸ©å½¢åŒºåŸŸå†…ã€‚éšåï¼Œ<code>border-radius</code>Â æ‰å¯¹è¿™ä¸ªå…ƒç´ è¿›è¡Œè£å‰ªã€‚ç»“æœæ˜¯ï¼Œ<code>border-radius</code>Â åªèƒ½è£å‰ªå…ƒç´ æœ¬èº«çš„å†…å®¹ï¼Œå´æ— æ³•è£å‰ªé‚£ä¸ªå·²ç»ç»˜åˆ¶å®Œæˆã€å¹¶æº¢å‡ºåˆ°åœ†è§’ä¹‹å¤–çš„æ¨¡ç³Šå…‰æ™•ã€‚è¿™ä¾¿å¯¼è‡´äº†æˆ‘ä»¬è§‚å¯Ÿåˆ°çš„â€œæ¼å…‰â€ç°è±¡ã€‚</p>
<p>å¯ä»¥å°†å…¶ç±»æ¯”ä¸ºï¼šå…ˆåœ¨ä¸€å—æ–¹å½¢ç»ç’ƒä¸Šå–·æ¶‚äº†å¸¦æœ‰è¾¹ç¼˜æ‰©æ•£æ•ˆæœçš„æ²¹æ¼†ï¼Œç„¶åå†ç”¨åœ†å½¢æ¨¡å…·å»åˆ‡å‰²è¿™å—ç»ç’ƒã€‚æ²¹æ¼†çš„æ‰©æ•£è¾¹ç¼˜ä¾ç„¶ä¼šä»åœ†å½¢è½®å»“å¤–æ˜¾éœ²å‡ºæ¥ã€‚</p>
</li>
</ol>
<h3 data-id="heading-2">å¸¸è§è§£å†³æ–¹æ¡ˆåŠå…¶å±€é™æ€§</h3>
<p>é¢å¯¹æ­¤é—®é¢˜ï¼Œå¼€å‘è€…é€šå¸¸ä¼šå°è¯•ä¸€äº›æ ‡å‡†çš„è£å‰ªæ–¹æ³•ï¼Œä½†å¾€å¾€æ”¶æ•ˆç”šå¾®ã€‚</p>
<p><strong>å°è¯•æ–¹æ¡ˆï¼šä½¿ç”¨Â <code>clip-path</code></strong></p>
<p>ä¸€ä¸ªç›´è§‚çš„æ€è·¯æ˜¯ä½¿ç”¨åŠŸèƒ½æ›´å¼ºå¤§çš„Â <code>clip-path</code>Â å±æ€§è¿›è¡Œè£å‰ªã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">inset</span>(<span class="hljs-number">0</span> round <span class="hljs-number">12px</span>);
</code></pre>
<p>ç„¶è€Œï¼Œæ­¤æ–¹æ¡ˆåŒæ ·æ— æ³•è§£å†³é—®é¢˜ã€‚å…¶æ ¹æœ¬åŸå› ä¸Â <code>border-radius</code>Â ç±»ä¼¼ï¼š<code>clip-path</code>Â ä¹Ÿåœ¨å†…å®¹ç»˜åˆ¶ä¹‹åç”Ÿæ•ˆï¼Œå®ƒæ— æ³•å½±å“å·²ç»â€œæº¢å‡ºâ€åˆ°å…ƒç´ è¾¹ç•Œä¹‹å¤–çš„æ¨¡ç³Šå…‰æ™•ã€‚å› æ­¤ï¼Œå®ƒå’ŒÂ <code>border-radius</code>Â åœ¨è¿™ä¸ªç‰¹å®šåœºæ™¯ä¸‹éƒ½é¢ä¸´ç€ç›¸åŒçš„æ¸²æŸ“é¡ºåºé™åˆ¶ã€‚</p>
<h3 data-id="heading-3">ç»ˆæè§£å†³æ–¹æ¡ˆï¼šåˆ©ç”¨ CSS Mask è¿›è¡Œé¢„è£å‰ª</h3>
<p>æ—¢ç„¶äº‹åè£å‰ªæ— æ•ˆï¼Œæˆ‘ä»¬éœ€è¦æ¢ä¸€ç§æ€è·¯ï¼š<strong>åœ¨å†…å®¹ç»˜åˆ¶ä¹‹å‰å°±çº¦æŸå…¶ç»˜åˆ¶åŒºåŸŸ</strong>ã€‚è¿™æ­£æ˜¯ CSSÂ <code>mask</code>Â å±æ€§çš„æ ¸å¿ƒèƒ½åŠ›ã€‚<code>mask</code>Â ä¸ä¼šåœ¨å†…å®¹ç»˜åˆ¶åè¿›è¡Œè£å‰ªï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªè’™ç‰ˆï¼Œåªæœ‰è’™ç‰ˆä¸é€æ˜çš„åŒºåŸŸæ‰ä¼šè¢«ç»˜åˆ¶å†…å®¹ã€‚</p>
<p>é€šè¿‡Â <code>mask-image</code>ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸æœŸæœ›åœ†è§’å®Œå…¨ä¸€è‡´çš„è’™ç‰ˆï¼Œä»æ ¹æœ¬ä¸Šæœç»æ¨¡ç³Šæ•ˆæœæº¢å‡ºçš„å¯èƒ½ã€‚</p>
<p><strong>æ ¸å¿ƒå®ç°ä»£ç ï¼š</strong></p>
<p>è¯¥æ–¹æ¡ˆåº”åº”ç”¨äºÂ <code>video</code>Â å…ƒç´ çš„<strong>å¤–å±‚å®¹å™¨</strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.video-container</span> {
  <span class="hljs-comment">/* ... å…¶ä»–å¸ƒå±€æ ·å¼ ... */</span>

  <span class="hljs-comment">/* æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼šåº”ç”¨å¾„å‘æ¸å˜è’™ç‰ˆ */</span>
  -webkit-<span class="hljs-attribute">mask-image</span>: <span class="hljs-built_in">-webkit-radial-gradient</span>(white, black);
  <span class="hljs-attribute">mask-image</span>: <span class="hljs-built_in">radial-gradient</span>(white, black);

  <span class="hljs-comment">/* å…³é”®ä¼˜åŒ–ï¼šè§¦å‘ç¡¬ä»¶åŠ é€Ÿï¼Œç¡®ä¿è’™ç‰ˆæ•ˆæœç¨³å®š */</span>
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(<span class="hljs-number">0</span>);
}
</code></pre>
<p><strong>åŸç†è§£æï¼š</strong></p>
<ol>
<li><strong><code>mask-image: radial-gradient(white, black);</code></strong><br/>
æˆ‘ä»¬ä½¿ç”¨Â <code>radial-gradient</code>Â åˆ›å»ºäº†ä¸€ä¸ªä»ä¸­å¿ƒç™½è‰²åˆ°è¾¹ç¼˜é»‘è‰²çš„å¾„å‘æ¸å˜ä½œä¸ºè’™ç‰ˆã€‚åœ¨ CSS Mask ä¸­ï¼Œæ¸å˜çš„é€æ˜åº¦å†³å®šäº†å†…å®¹çš„å¯è§æ€§ï¼š<strong>ç™½è‰²ï¼ˆä¸é€æ˜ï¼‰éƒ¨åˆ†æ˜¾ç¤ºå†…å®¹ï¼Œé»‘è‰²ï¼ˆå®Œå…¨é€æ˜ï¼‰éƒ¨åˆ†éšè—å†…å®¹</strong>ã€‚è¿™ä¸ªåœ†å½¢è’™ç‰ˆå¼ºåˆ¶æµè§ˆå™¨åªåœ¨åœ†è§’åŒºåŸŸå†…æ¸²æŸ“æ‰€æœ‰å­å…ƒç´ å’Œæ•ˆæœï¼ŒåŒ…æ‹¬Â <code>backdrop-filter</code>Â äº§ç”Ÿçš„æ¨¡ç³Šã€‚ä»»ä½•è¯•å›¾æº¢å‡ºåˆ°è’™ç‰ˆä¹‹å¤–çš„å…‰æ™•éƒ½ä¼šè¢«ç›´æ¥éšè—ï¼Œä»è€Œåœ¨æ ¹æºä¸Šè§£å†³äº†æ¼å…‰é—®é¢˜ã€‚</li>
<li><strong><code>transform: translateZ(0);</code></strong><br/>
è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ€§èƒ½å’Œç¨³å®šæ€§ä¼˜åŒ–ã€‚è¯¥å±æ€§ä¼šè§¦å‘å…ƒç´ çš„ç¡¬ä»¶åŠ é€Ÿï¼Œå°†å…¶æå‡åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“å±‚ã€‚è¿™å¯ä»¥ç¡®ä¿Â <code>mask</code>Â çš„æ•ˆæœè¢« GPU æ­£ç¡®ã€é«˜æ•ˆåœ°åˆæˆï¼Œé¿å…åœ¨æŸäº›å¤æ‚å¸ƒå±€æˆ–æµè§ˆå™¨ä¸­å¯èƒ½å‡ºç°çš„æ¸²æŸ“é”™ä½æˆ–å¤±æ•ˆé—®é¢˜ï¼Œä¿è¯äº†æ–¹æ¡ˆçš„å¥å£®æ€§ã€‚</li>
</ol>
<h4 data-id="heading-4">å®Œæ•´ä»£ç ç¤ºä¾‹</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€å¯ç›´æ¥ä½¿ç”¨çš„ä»£ç ç»“æ„ï¼Œæ¸…æ™°åœ°å±•ç¤ºäº†å¦‚ä½•åº”ç”¨æ­¤æ–¹æ¡ˆã€‚å¤åˆ¶ä»£ç åˆ°æœ¬åœ°ï¼Œæ›¿æ¢videoçš„urlå°±è¡Œï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åœ†è§’è§†é¢‘æ’­æ”¾å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">justify-content</span>: center;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#000</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, Roboto, <span class="hljs-string">'Helvetica Neue'</span>, Arial, sans-serif;
    }

    <span class="hljs-selector-class">.video-player-wrapper</span> {
      <span class="hljs-attribute">position</span>: relative;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">450px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">overflow</span>: hidden;
      <span class="hljs-attribute">clip-path</span>: <span class="hljs-built_in">inset</span>(<span class="hljs-number">0</span> round <span class="hljs-number">12px</span>);
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#000</span>;
      <span class="hljs-comment">/* å¼ºåˆ¶åˆ›å»ºåˆæˆå±‚å¹¶å°è¯•è®©åœ†è§’ç”Ÿæ•ˆï¼ˆå…¼å®¹æ€§å¢å¼ºï¼‰ */</span>
      -webkit-<span class="hljs-attribute">mask-image</span>: <span class="hljs-built_in">-webkit-radial-gradient</span>(white, black);
      <span class="hljs-attribute">mask-image</span>: <span class="hljs-built_in">radial-gradient</span>(white, black);
      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateZ</span>(<span class="hljs-number">0</span>);
    }

    <span class="hljs-selector-class">.video-player-wrapper</span> <span class="hljs-selector-tag">video</span><span class="hljs-selector-class">.video-element</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">object-fit</span>: cover;
      <span class="hljs-attribute">display</span>: block;
    }

    <span class="hljs-selector-class">.video-title</span> {
      <span class="hljs-attribute">position</span>: absolute;
      <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">28px</span>;
      <span class="hljs-attribute">color</span>: white;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">28px</span>;
      <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-attribute">box-sizing</span>: border-box;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);
      -webkit-backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">20px</span>);
      backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">20px</span>);
      <span class="hljs-attribute">overflow</span>: hidden;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-player-wrapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-element"</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">muted</span> <span class="hljs-attr">loop</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"xxx.mp4"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-title"</span>&gt;</span>
      æˆ‘æ˜¯videoæ ‡é¢˜
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">ç»“æ¡ˆé™ˆè¯</h3>
<p>çœ‹ï¼Œå†é¡½å›ºçš„æ¸²æŸ“BUGï¼Œä¹Ÿæ•Œä¸è¿‡æˆ‘ä»¬å¯¹åº•å±‚åŸç†çš„ç†è§£å’Œä¸€ç‚¹ç‚¹â€œéªšæ“ä½œâ€çš„æ™ºæ…§ã€‚ä»ç†è§£æ¸²æŸ“é¡ºåºçš„â€œå…ˆæ–©åå¥â€ï¼Œåˆ°æ”¾å¼ƒæ— æ•ˆçš„Â <code>clip-path</code>ï¼Œæœ€åç”¨Â <code>mask-image</code>Â å®ç°é™ç»´æ‰“å‡»ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±åƒä¸€åœºç²¾å½©çš„ä¾¦æ¢æ¨ç†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[100% ç”¨ AI åšå®Œä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä» Plan åˆ° Finished æˆ‘å­¦åˆ°äº†è¿™äº›]]></title>    <link>https://juejin.cn/post/7570579125153923082</link>    <guid>https://juejin.cn/post/7570579125153923082</guid>    <pubDate>2025-11-10T05:41:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570579125153923082" data-draft-id="7569945160869396526" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="100% ç”¨ AI åšå®Œä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä» Plan åˆ° Finished æˆ‘å­¦åˆ°äº†è¿™äº›"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-11-10T05:41:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Immerse"/> <meta itemprop="url" content="https://juejin.cn/user/2708812817761752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            100% ç”¨ AI åšå®Œä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä» Plan åˆ° Finished æˆ‘å­¦åˆ°äº†è¿™äº›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2708812817761752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Immerse
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:41:17.000Z" title="Mon Nov 10 2025 05:41:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Immerseï¼Œä¸€åç‹¬ç«‹å¼€å‘è€…ã€å†…å®¹åˆ›ä½œè€…ã€AGI å®è·µè€…ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyaolifeng.com%2Fother%2Fwx_public_account.webp" target="_blank" title="https://yaolifeng.com/other/wx_public_account.webp" ref="nofollow noopener noreferrer">æ²‰æµ¸å¼è¶£è°ˆ</a>ï¼Œè·å–æœ€æ–°æ–‡ç« ï¼ˆæ›´å¤šå†…å®¹åªåœ¨å…¬ä¼—å·æ›´æ–°ï¼‰</p>
<p>ä¸ªäººç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fyaolifeng.com" target="_blank" title="https://yaolifeng.com" ref="nofollow noopener noreferrer">yaolifeng.com</a> ä¹ŸåŒæ­¥æ›´æ–°ã€‚</p>
<p>è½¬è½½è¯·åœ¨æ–‡ç« å¼€å¤´æ³¨æ˜å‡ºå¤„å’Œç‰ˆæƒä¿¡æ¯ã€‚</p>
<p>æˆ‘ä¼šåœ¨è¿™é‡Œåˆ†äº«å…³äº<code>ç¼–ç¨‹</code>ã€<code>ç‹¬ç«‹å¼€å‘</code>ã€<code>AIå¹²è´§</code>ã€<code>å¼€æº</code>ã€<code>ä¸ªäººæ€è€ƒ</code>ç­‰å†…å®¹ã€‚</p>
<p>å¦‚æœæœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿åŠ¨åŠ¨å°æ‰‹æŒ‡ä¸€é”®ä¸‰è¿(<code>ç‚¹èµ</code>ã€<code>è¯„è®º</code>ã€<code>è½¬å‘</code>)ï¼Œç»™æˆ‘ä¸€äº›æ”¯æŒå’Œé¼“åŠ±ï¼Œè°¢è°¢ï¼</p>
<hr/>
<p>å¥³æœ‹å‹ä¸€å¥è¯å‚¬ç”Ÿçš„ Chrome æ’ä»¶ï¼Œè§£å†³æ‰¹é‡ä¸‹è½½å›¾ç‰‡é—®é¢˜</p>
<p>å‘¨æœ«åœ¨å®¶ï¼Œå¥³æœ‹å‹å·¥ä½œéœ€è¦ä¸‹è½½ç½‘ç«™ä¸Šçš„ä¸€äº›å›¾ç‰‡ï¼Œå¥¹è¯´å¤ªéº»çƒ¦äº†ã€‚</p>
<p>å³é”®ã€é€‰æ‹©ä¿å­˜å›¾ç‰‡ã€é€‰æ–‡ä»¶å¤¹ã€æ”¹åå­—ï¼Œä¸€å¼ å›¾å°±å¾—æŠ˜è…¾å¥½å‡ æ­¥ã€‚</p>
<p>è¦æ˜¯ç½‘é¡µé‡Œæœ‰äºŒä¸‰åå¼ å›¾ï¼Œè¿™å¾—ç‚¹å¤šå°‘æ¬¡é¼ æ ‡ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/550b2e439f2c4a399982ae36ac02021e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSW1tZXJzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358077&amp;x-signature=byXdlOtH%2Fdx1m7xLnfxR3J1wqes%3D" width="300" loading="lazy"/>
<h2 data-id="heading-0">ä¸‹è½½åœ°å€ï¼š</h2>
<p>GitHub:<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic" target="_blank" title="https://github.com/yaolifeng0629/PickPic" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic</code></a></p>
<p>è°·æ­Œæµè§ˆå™¨å•†åº—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchromewebstore.google.com%2Fdetail%2Fpickpic-one-click-downloa%2Fhfdohacifjijbgobekodafjpjghflemh" target="_blank" title="https://chromewebstore.google.com/detail/pickpic-one-click-downloa/hfdohacifjijbgobekodafjpjghflemh" ref="nofollow noopener noreferrer"><code>https://chromewebstore.google.com/detail/pickpic-one-click-downloa/hfdohacifjijbgobekodafjpjghflemh</code></a></p>
<p>å‹ç¼©åŒ…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic%2Freleases%2Ftag%2Fv1.0.2" target="_blank" title="https://github.com/yaolifeng0629/PickPic/releases/tag/v1.0.2" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic/releases/tag/v1.0.2</code></a></p>
<h2 data-id="heading-1">ä¸€ä¸ªå¾ˆç®€å•çš„éœ€æ±‚</h2>
<p>éœ€æ±‚å…¶å®å¾ˆæ˜ç¡®ã€‚</p>
<p>åœ¨ç½‘é¡µä¸Šçœ‹åˆ°å–œæ¬¢çš„å›¾ç‰‡ï¼Œæƒ³æ‰¹é‡ä¿å­˜åˆ°æœ¬åœ°ã€‚</p>
<p>å¬èµ·æ¥å¾ˆç®€å•å¯¹å§ï¼Ÿä½†æˆ‘æœäº†ä¸€åœˆï¼Œå‘ç°ç°æœ‰çš„å·¥å…·éƒ½ä¸å¤ªæ»¡æ„ã€‚</p>
<p>æœ‰äº›æ’ä»¶åŠŸèƒ½å€’æ˜¯æœ‰ï¼Œä½†è¦ä¹ˆå¤ªå¤æ‚ï¼Œè¦ä¹ˆå¹¿å‘Šä¸€å †ï¼Œè¦ä¹ˆå°±æ˜¯åªæ”¯æŒç‰¹å®šç½‘ç«™ã€‚</p>
<p>æˆ‘æƒ³è¦çš„å¾ˆç®€å•ï¼šæ‰“å¼€ç½‘é¡µï¼Œä¸€é”®é¢„è§ˆï¼Œé€‰æ‹©ä¸‹è½½ï¼Œå®Œäº‹ã€‚</p>
<p>æ‰€ä»¥å†³å®šè‡ªå·±åšä¸€ä¸ªã€‚</p>
<h2 data-id="heading-2">è¿™ä¸ªæ’ä»¶èƒ½å¹²å•¥</h2>
<p>æ ¸å¿ƒåŠŸèƒ½å°±å‡ ä¸ªã€‚</p>
<p>ç‚¹å‡»æµè§ˆå™¨å›¾æ ‡ï¼Œä¾§è¾¹æ ä¼šæ˜¾ç¤ºå½“å‰ç½‘é¡µçš„æ‰€æœ‰å›¾ç‰‡å’Œè§†é¢‘ã€‚</p>
<p>å¯ä»¥é¢„è§ˆï¼ŒåŒå‡»å›¾ç‰‡ä¼šåœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ï¼Œçœ‹å¾—æ›´æ¸…æ¥šã€‚</p>
<p>æƒ³ä¸‹è½½å“ªå¼ å°±å‹¾é€‰å“ªå¼ ï¼Œä¹Ÿå¯ä»¥å…¨é€‰ã€‚</p>
<p>å•å¼ å›¾ç›´æ¥ä¸‹è½½ï¼Œå¤šå¼ å›¾è‡ªåŠ¨æ‰“åŒ…æˆ ZIP æ–‡ä»¶ã€‚</p>
<p>å¯¹å¾®ä¿¡å…¬ä¼—å·åšäº†ç‰¹æ®Šä¼˜åŒ–ã€‚èƒ½çœ‹åˆ°æ–‡ç« æ ‡é¢˜ã€ä½œè€…ã€æè¿°è¿™äº›ä¿¡æ¯ã€‚</p>
<p>æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢ã€‚</p>
<p>å°±è¿™äº›ï¼Œæ²¡æœ‰å¤æ‚çš„è®¾ç½®ï¼Œæ‰“å¼€å°±èƒ½ç”¨ã€‚</p>
<h2 data-id="heading-3">å¼€å‘è¿‡ç¨‹è¿˜æŒºé¡º</h2>
<p>æŠ€æœ¯æ ˆç”¨çš„æ˜¯ Plasmo æ¡†æ¶ï¼Œè¿™ç©æ„ä¸“é—¨åšæµè§ˆå™¨æ’ä»¶çš„ã€‚</p>
<p>é…åˆ Reactã€TypeScriptã€Tailwind CSSï¼Œå¼€å‘ä½“éªŒå¾ˆä¸é”™ã€‚</p>
<p>çŠ¶æ€ç®¡ç†ç”¨ Zustandï¼Œè½»é‡å¥½ç”¨ã€‚</p>
<p>å›¾ç‰‡æ‰“åŒ…ç”¨ JSZipï¼Œç”Ÿæˆ ZIP æ–‡ä»¶å¾ˆå¿«ã€‚</p>
<h2 data-id="heading-4">æ”¯æŒçš„ç½‘ç«™æŒºå¤š</h2>
<p>é™¤äº†å¾®ä¿¡å…¬ä¼—å·ï¼Œå…¶ä»–ç½‘ç«™ä¹Ÿéƒ½èƒ½ç”¨ã€‚</p>
<p>æˆ‘æµ‹è¯•äº†æ˜é‡‘ã€çŸ¥ä¹ã€InfoQã€ç®€ä¹¦ã€CSDNã€åšå®¢å›­è¿™äº›æŠ€æœ¯ç¤¾åŒºï¼Œéƒ½æ²¡é—®é¢˜ã€‚</p>
<p>ç†è®ºä¸Šä»»ä½•ç½‘é¡µéƒ½èƒ½ç”¨ï¼Œå› ä¸ºæˆ‘åšçš„æ˜¯é€šç”¨æå–é€»è¾‘ã€‚åªè¦æ˜¯ img æ ‡ç­¾æˆ–è€… video æ ‡ç­¾ï¼Œéƒ½èƒ½è¯†åˆ«å‡ºæ¥ã€‚ï¼ˆæš‚æ—¶æ²¡æœ‰å¤„ç†é˜²çˆ¬é€»è¾‘ï¼‰</p>
<p>å¯¹å¾®ä¿¡å…¬ä¼—å·åšäº†é¢å¤–ä¼˜åŒ–ï¼Œå› ä¸ºè‡ªå·±å¹³æ—¶ä¹Ÿä¼šç”¨åˆ°ï¼Œæ‰€ä»¥å¤šèŠ±äº†ç‚¹å¿ƒæ€ã€‚</p>
<p>å…¶ä»–ç½‘ç«™æš‚æ—¶æ²¡åšç‰¹æ®Šå¤„ç†ï¼Œä½†åŸºæœ¬åŠŸèƒ½éƒ½æ˜¯æ­£å¸¸çš„ã€‚</p>
<h2 data-id="heading-5">ä¸ºå•¥åˆæ˜¯ä¸€ä¸ªå·¥å…·</h2>
<p>åšè¿™ä¸ªæ’ä»¶çš„æ—¶å€™ï¼Œæˆ‘æƒ³èµ·ä¹‹å‰çœ‹ Marc Lou çš„åˆ†äº«ã€‚</p>
<p>ä»–è¯´æœ€å¥½çš„äº§å“ï¼Œå¾€å¾€æ˜¯è§£å†³è‡ªå·±é—®é¢˜çš„äº§å“ã€‚</p>
<p>å› ä¸ºä½ å°±æ˜¯ç¬¬ä¸€ä¸ªç”¨æˆ·ï¼Œæœ€æ¸…æ¥šå“ªé‡Œå¥½ç”¨å“ªé‡Œä¸å¥½ç”¨ã€‚</p>
<p>ä¸éœ€è¦åšå¸‚åœºè°ƒç ”ï¼Œä¸éœ€è¦çŒœç”¨æˆ·æƒ³è¦ä»€ä¹ˆã€‚</p>
<p>ä½ è‡ªå·±ç”¨ç€èˆ’æœï¼Œäº§å“å°±ä¸ä¼šå¤ªå·®ã€‚</p>
<p>åšçš„è¿‡ç¨‹ä¸­æ²¡æƒ³è¿‡èƒ½ä¸èƒ½èµšé’±ï¼Œä¼šä¸ä¼šæœ‰å¾ˆå¤šäººç”¨ã€‚</p>
<p>å°±æ˜¯å•çº¯æƒ³è§£å†³è¿™ä¸ªç—’å¤„ã€‚</p>
<h2 data-id="heading-6">æ¥ä¸‹æ¥æƒ³åŠ ç‚¹å•¥</h2>
<p>ç›®å‰åŠŸèƒ½è¿˜æ¯”è¾ƒåŸºç¡€ï¼Œåé¢æƒ³åŠ ä¸€äº›æ–°ä¸œè¥¿ã€‚</p>
<p>æ¯”å¦‚æ‰¹é‡é‡å‘½åï¼ŒæŒ‰æ–‡ç« æ ‡é¢˜ã€æ—¥æœŸã€åºå·è¿™äº›è§„åˆ™è‡ªåŠ¨å‘½åæ–‡ä»¶ã€‚</p>
<p>åœ¨è€ƒè™‘æ”¯æŒæ›´å¤šæ ¼å¼ï¼Œä¸å…‰æ˜¯å›¾ç‰‡å’Œè§†é¢‘ï¼ŒPDFã€éŸ³é¢‘è¿™äº›ä¹Ÿèƒ½æå–ã€‚</p>
<p>ä¸è¿‡è¿™äº›éƒ½æ˜¯æƒ³æ³•ï¼Œä¼šä¸ä¼šåšã€ä»€ä¹ˆæ—¶å€™åšï¼Œè¿˜æ²¡ç¡®å®šã€‚</p>
<p>å…ˆæŠŠç›®å‰çš„é—®é¢˜è§£å†³äº†å†è¯´ã€‚</p>
<h2 data-id="heading-7">å¦‚ä½•ä½¿ç”¨</h2>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1585e810b32147d1914912475b88334a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSW1tZXJzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358077&amp;x-signature=vzLV%2FjeEgxKoqoxwr1DFwp8X5pE%3D" width="300" loading="lazy"/>
<p>GitHub:<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic" target="_blank" title="https://github.com/yaolifeng0629/PickPic" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic</code></a></p>
<p>è°·æ­Œæµè§ˆå™¨å•†åº—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchromewebstore.google.com%2Fdetail%2Fpickpic-one-click-downloa%2Fhfdohacifjijbgobekodafjpjghflemh" target="_blank" title="https://chromewebstore.google.com/detail/pickpic-one-click-downloa/hfdohacifjijbgobekodafjpjghflemh" ref="nofollow noopener noreferrer"><code>https://chromewebstore.google.com/detail/pickpic-one-click-downloa/hfdohacifjijbgobekodafjpjghflemh</code></a></p>
<p>å‹ç¼©åŒ…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic%2Freleases%2Ftag%2Fv1.0.2" target="_blank" title="https://github.com/yaolifeng0629/PickPic/releases/tag/v1.0.2" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic/releases/tag/v1.0.2</code></a></p>
<p>æ¬¢è¿æ Issue å’Œ PRï¼Œæœ‰æƒ³æ³•å¯ä»¥ä¸€èµ·è®¨è®ºã€‚</p>
<p>ä¹Ÿæ¬¢è¿ Star æ”¯æŒä¸€ä¸‹ã€‚</p>
<p>é¡¹ç›®è¿˜åœ¨æ—©æœŸé˜¶æ®µï¼Œè‚¯å®šæœ‰ä¸å®Œå–„çš„åœ°æ–¹ã€‚</p>
<p>ä½†æˆ‘ä¼šæŒç»­ç»´æŠ¤ï¼Œé‡åˆ°é—®é¢˜ä¼šå°½å¿«ä¿®å¤ã€‚</p>
<h2 data-id="heading-8">å¼€å‘è¿‡ç¨‹å¼€æº</h2>
<p>å¯¹äº†ï¼Œè¿™ä¸ªé¡¹ç›®ä» Plan åˆ° Task å†åˆ° Implementï¼Œæ¯ä¸ªé˜¶æ®µæˆ‘éƒ½å¼€æºå‡ºæ¥äº†ã€‚</p>
<p>åŒ…æ‹¬æœ€åˆçš„æƒ³æ³•ã€ä»»åŠ¡æ‹†è§£ã€å…·ä½“å®ç°ï¼Œç”šè‡³åŸå‹è®¾è®¡éƒ½åœ¨ GitHub ä»“åº“é‡Œã€‚</p>
<p>æƒ³çœ‹å®Œæ•´å¼€å‘è¿‡ç¨‹çš„å°ä¼™ä¼´ï¼Œå¯ä»¥å»ä»“åº“ç¿»ä¸€ç¿»ã€‚</p>
<p>è¯´ä¸å®šèƒ½ç»™ä½ è‡ªå·±åšé¡¹ç›®æä¾›ç‚¹æ€è·¯ã€‚</p>
<p>é¡ºä¾¿ç‚¹ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼Œæ„Ÿè°¢ï¼</p>
<h2 data-id="heading-9">ä¸€ç‚¹å°æ„Ÿæ‚Ÿ</h2>
<p>åšè¿™ä¸ªæ’ä»¶è®©æˆ‘æƒ³æ˜ç™½ä¸€ä»¶äº‹ã€‚</p>
<p>ä¸æ˜¯æ‰€æœ‰é¡¹ç›®éƒ½è¦è¿½æ±‚å•†ä¸šåŒ–ï¼Œä¸æ˜¯æ‰€æœ‰äº§å“éƒ½è¦æƒ³ç€èµšé’±ã€‚</p>
<p>æœ‰æ—¶å€™å°±æ˜¯æƒ³è§£å†³ä¸€ä¸ªå°é—®é¢˜ï¼Œè®©è‡ªå·±çš„ç”Ÿæ´»æ–¹ä¾¿ä¸€ç‚¹ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹æœ¬èº«å°±å¾ˆæœ‰æ„æ€ã€‚</p>
<p>è€Œä¸”ä½ çœŸå¿ƒè§£å†³äº†è‡ªå·±çš„é—®é¢˜ï¼Œäº§å“è‡ªç„¶ä¼šæœ‰æ¸©åº¦ã€‚</p>
<p>åˆ«äººç”¨èµ·æ¥ä¹Ÿèƒ½æ„Ÿå—åˆ°è¿™ç§çœŸå®ã€‚</p>
<p>Marc Lou è¯´å¥½å¥‡å¿ƒæ‰æ˜¯åˆ›ä¸šçš„èµ·ç‚¹ï¼Œæˆ‘è§‰å¾—è¯´å¾—ç‰¹åˆ«å¯¹ã€‚</p>
<p>å…ˆæŠŠç—’å¤„æŒ äº†ï¼Œè‡³äºèƒ½ä¸èƒ½å˜æˆç”Ÿæ„ï¼Œé‚£æ˜¯åé¢çš„äº‹ã€‚</p>
<hr/>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyaolifeng0629%2FPickPic" target="_blank" title="https://github.com/yaolifeng0629/PickPic" ref="nofollow noopener noreferrer"><code>https://github.com/yaolifeng0629/PickPic</code></a></p>
<p>æ¬¢è¿è¯•ç”¨ï¼Œæ¬¢è¿åé¦ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ¬å‘¨ 6 ä¸ªæœ€ç«ç«ç«ç« GitHub é¡¹ç›®ï¼ŒAI æ€ç–¯äº†ã€‚]]></title>    <link>https://juejin.cn/post/7570630923710267444</link>    <guid>https://juejin.cn/post/7570630923710267444</guid>    <pubDate>2025-11-10T05:46:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570630923710267444" data-draft-id="7570659828810170402" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ¬å‘¨ 6 ä¸ªæœ€ç«ç«ç«ç« GitHub é¡¹ç›®ï¼ŒAI æ€ç–¯äº†ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-10T05:46:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ¬å‘¨ 6 ä¸ªæœ€ç«ç«ç«ç« GitHub é¡¹ç›®ï¼ŒAI æ€ç–¯äº†ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:46:06.000Z" title="Mon Nov 10 2025 05:46:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">01ã€DeepCodeï¼šæ™ºèƒ½ä½“ç¼–ç¨‹å¹³å°</h2>
<p>DeepCode ç”±é¦™æ¸¯å¤§å­¦æ•°æ®æ™ºèƒ½å®éªŒå®¤å¼€å‘ï¼Œç°åœ¨æœ‰ 1 ä¸‡ Star äº†ã€‚</p>
<p>å®ƒé‡‡ç”¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ¶æ„ï¼Œèƒ½å¤Ÿç†è§£å¤æ‚éœ€æ±‚ï¼Œå¦‚ç ”ç©¶è®ºæ–‡æˆ–è‡ªç„¶è¯­è¨€æè¿°ï¼Œå¹¶é€šè¿‡æ™ºèƒ½ä½“åä½œè‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„ã€å¯è¿è¡Œçš„ä»£ç ã€‚</p>
<p>æ¯”å¦‚ç”¨æˆ·ä¸Šä¼ ä¸€ç¯‡ ICML è®ºæ–‡ï¼ŒDeepCode èƒ½è‡ªåŠ¨è§£æå…¶ä¸­çš„ç®—æ³•ï¼Œç”Ÿæˆ Python å®ç°ï¼Œå¹¶é™„å¸¦æµ‹è¯•ç”¨ä¾‹å’Œæ–‡æ¡£ã€‚</p>
<p>å®ƒæœ‰ä¸€ä¸ª<strong>ç½‘é¡µç•Œé¢</strong>ï¼Œæ”¯æŒå¯è§†åŒ–äº¤äº’ä½“éªŒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcef5060fb7f4bafb047dcddd146a25e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=t%2BGGjHCa7D6smTa3Vml9W66qs5o%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿæœ‰ä¸€ä¸ª<strong>å‘½ä»¤è¡Œç•Œé¢</strong>ï¼Œå¯ä»¥åŸºäºç»ˆç«¯å¼€å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab6f66bff61740548641a50865bf79f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=Tr9HNNJYbe7JNK5j8mXha7UwZkc%3D" alt="image.png" loading="lazy"/></p>
<p>é™¤äº†å­¦æœ¯è®ºæ–‡ä¸­æå–ç®—æ³•å¹¶å®ç°ã€‚è¿˜æ”¯æŒÂ Text2WebÂ åŠŸèƒ½å¯ä»¥å°†æ–‡æœ¬æè¿°è½¬åŒ–ä¸ºå®Œæ•´å‰ç«¯ä»£ç ã€‚</p>
<p>Text2BackendÂ åŠŸèƒ½å¯ä»¥æ ¹æ®ç®€å•è¾“å…¥ç”Ÿæˆé«˜æ•ˆåç«¯ä»£ç ã€‚</p>
<p>é¡¹ç›®åœ¨ OpenAI çš„ PaperBench åŸºå‡†æµ‹è¯•ä¸­è¡¨ç°ä¼˜å¼‚ï¼Œç”šè‡³è¶…è¶Šäº†äººç±»ä¸“å®¶å’Œå•†ä¸šä»£ç ä»£ç†ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/HKUDS/DeepCode</span>
</code></pre>
<h2 data-id="heading-1">02ã€Strixï¼šå¼€æº AI é»‘å®¢</h2>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®å…¶å®æ˜¯ä¸€ä¸ªå®‰å…¨æµ‹è¯•æ¡†æ¶ï¼Œä½¿ç”¨ AI æ™ºèƒ½ä½“åƒçœŸå®é»‘å®¢ä¸€æ ·åŠ¨æ€åˆ†æåº”ç”¨æ¼æ´ã€‚</p>
<p>Strix çš„ç‰¹è‰²æ˜¯ä¼šå®é™…è¿è¡Œè¦æµ‹è¯•çš„ä»£ç ï¼Œåƒæ˜¯æ¨¡æ‹ŸçœŸå®é»‘å®¢è¡Œä¸ºæ¥æ”»å‡»ç½‘ç«™ï¼Œæœ€åå‘ç°å®‰å…¨æ¼æ´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bd545ef4012471d98942eed7e36d50d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=EBYNRPJaHkJQrErq2SmnLeEQ7Q8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®é¡¹ç›®å†…ç½®å¤šç§å·¥å…·æ¨¡å—ï¼Œä¾‹å¦‚ HTTP ä»£ç†ç”¨äºè¯·æ±‚æ“çºµã€æµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯• XSS/CSRFã€Python è¿è¡Œæ—¶ç”¨äºè‡ªå®šä¹‰æ¼æ´å¼€å‘ã€‚</p>
<p>å®ƒä¸ä»…è¯†åˆ«æ½œåœ¨æ¼æ´ï¼Œè¿˜ä¼šå°è¯•åˆ©ç”¨ SQL æ³¨å…¥æˆ–æƒé™æå‡ï¼Œç¡®ä¿é—®é¢˜çœŸå®å­˜åœ¨ã€‚æ‰€æœ‰æ“ä½œåœ¨éš”ç¦»çš„ Docker ç¯å¢ƒä¸­è¿›è¡Œï¼Œä¿è¯æµ‹è¯•å®‰å…¨æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7aab5a1cc6064ea28e3865d41defd066~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=WB3TMQ3uv11cJyqGAo0ygtaF3So%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/usestrix/strix</span>
</code></pre>
<h2 data-id="heading-2">03ã€LocalAIï¼šè‡ªå·±ç”µè„‘ä¸Šç”¨ AI</h2>
<p>LocalAI è¿™ä¸ªå¼€æºé¡¹ç›®çœ‹åå­—å°±èƒ½çŒœå‡ºæ¥ã€‚è®©ä½ èƒ½åœ¨ä¸ªäººç”µè„‘æˆ–è‡ªå·±çš„æœåŠ¡å™¨ä½æˆæœ¬è¿è¡Œ AI æ¨¡å‹ã€‚</p>
<p>ç°åœ¨å¿« 4 ä¸‡æ˜Ÿæ˜Ÿäº†ã€‚</p>
<p>å¯æ‰©å±•æ€§å¾ˆå¼ºï¼Œä½ å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è‡ªå®šä¹‰æ¨¡å‹ï¼Œæ”¯æŒæ–‡å­—ç”Ÿæˆæ¨¡å‹ã€éŸ³é¢‘ã€è§†é¢‘ã€å›¾åƒã€è¯­éŸ³å…‹éš†ç­‰æ¨¡å‹ï¼Œè€Œä¸”è¿˜æ”¯æŒ WebUI ï¼Œå¾ˆæ–¹ä¾¿ç®¡ç†ä½ çš„æœ¬åœ°æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd2e598c43ac4fb1b568d63faf016fcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=OCW4t9GrFo6HXXjEanR%2F3Oy6LAE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒå®ç°äº†ä¸ OpenAIã€Anthropic ç­‰å•†ä¸š API å…¼å®¹çš„ REST æ¥å£ï¼Œæ„å‘³ç€ç°æœ‰åº”ç”¨åªéœ€ä¿®æ”¹ API ç«¯ç‚¹å³å¯æ— ç¼åˆ‡æ¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27e96d07c84b4ae0a1c13e080d6dbea8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=jw7KiuHehhpnIJitYc6DNsoRAOo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddf05540f3ca4fe88696125adbc3d1ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=uNaiXMi7LMRYqW9BJdB9OzAoC04%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/deb3ec5a616f42b593c667d27c5a3acd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=OunphN4%2Bsp%2FoA3D%2Bz1UsC4VjlHw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09991f474a714808aa11693eac5df10f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=Rh9RHd2oeog4KQueA01%2B5eE22Js%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4d50e0a000d4769877d0464de66b69c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=XMCJPRoaXzfnFmVQtg6XBItmJBk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/mudler/LocalAI</span>
</code></pre>
<h2 data-id="heading-3">04ã€Skyvernï¼šè‡ªåŠ¨åŒ–æµè§ˆå™¨å·¥ä½œæµ</h2>
<p>Skyvern å®ƒåˆ©ç”¨ AI å¤§æ¨¡å‹å’Œè®¡ç®—æœºè§†è§‰è‡ªåŠ¨åŒ–æµè§ˆå™¨æ“ä½œã€‚</p>
<p>å¯¹äºéœ€è¦å¤„ç†ç½‘é¡µä»»åŠ¡çš„ç”¨æˆ·ï¼Œè¿™æˆ–è®¸èƒ½èŠ‚çœå¤§é‡æ—¶é—´ã€‚å’Œæˆ‘ä¹‹å‰ä»‹ç»çš„ä¸€äº›æµè§ˆå™¨è‡ªåŠ¨åŒ–å¼€æºé¡¹ç›®ä¸åŒï¼Œè¿™ä¸ªÂ Skyvern æ˜¯åŸºäºå±å¹•å…ƒç´ äº¤äº’çš„ï¼Œç”¨è§†è§‰ AI å¤§æ¨¡å‹ç†è§£ç½‘é¡µå†…å®¹ï¼Œæ¨¡æ‹Ÿäººç±»æ“ä½œï¼Œæ¯”å¦‚ç‚¹å‡»ã€æ»šåŠ¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac680ba5f6954a4fb2881257d9c2433e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=qYlnccjCI43IMjzlebiNe8YU%2FH8%3D" alt="image.png" loading="lazy"/></p>
<p>ç³»ç»Ÿé‡‡ç”¨å¤šæ™ºèƒ½ä½“åä½œçš„æ€è·¯ï¼šä¸€ä¸ªæ™ºèƒ½ä½“åˆ†æç›®æ ‡ï¼Œå¦ä¸€ä¸ªæ‰§è¡ŒåŠ¨ä½œã€‚å…±åŒå®Œæˆä½ ä¸‹è¾¾çš„ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€ï¼šhttps://github.com/Skyvern-AI/skyvern
</code></pre>
<h2 data-id="heading-4">05ã€NocoBaseï¼šåŸºäº AI çš„æ— ä»£ç å¹³å°</h2>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®è‡ªç§°æ˜¯æœ€å¯æ‰©å±•çš„ AI é©±åŠ¨æ— ä»£ç å¹³å°ï¼Œä½ å¯ä»¥é€šè¿‡é…ç½®æ¥æ­å»ºåº”ç”¨ã€‚</p>
<p>æ€è·¯æ˜¯åŸºäºæ•°æ®æ¨¡å‹é©±åŠ¨åº”ç”¨æ„å»ºï¼Œè€Œä¸æ˜¯å›ºå®šè¡¨å•ã€‚</p>
<p>ä½ å¯åœ¨ä½¿ç”¨æ¨¡å¼ä¸‹æ‹–æ‹–æ‹½æ‹½ç»„è£…é¡µé¢ï¼Œå¹¶åœ¨é…ç½®æ¨¡å¼ä¸‹è°ƒæ•´æ•°æ®å…³ç³»å’Œæƒé™ã€‚è¿™ä¸ªå¼€æºå¹³å°å†…ç½®äº† AI èƒ½åŠ›ï¼Œå¯ä»¥æŠŠ AI åµŒå…¥ä¸šåŠ¡æµç¨‹ï¼Œå®ç°äººæœºåä½œã€‚ä¾‹å¦‚ï¼Œæ­å»ºä¸€ä¸ªå®¢æˆ·ç®¡ç†ç³»ç»Ÿï¼ŒAI è‡ªåŠ¨å¤„ç†æ•°æ®åˆ†ç±»ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/nocobase/nocobase</span>
</code></pre>
<h2 data-id="heading-5">06ã€Agent Lightning</h2>
<p>Agent Lightning æ˜¯å¾®è½¯å¼€å‘çš„å¼€æºæ¡†æ¶ï¼Œå®ƒèƒ½è®©ç”¨æˆ·èƒ½ç”¨å¼ºåŒ–å­¦ä¹ ç­‰æŠ€æœ¯ä¼˜åŒ–ä»»ä½• AI æ™ºèƒ½ä½“ç†ï¼Œæ— éœ€é‡å†™ä»£ç ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2327be03d8904d90b14318e0c6e4b3f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=Ty7woUq3iTem7ULzcD0ndpEEAAI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒé€šè¿‡å‘å°„äº‹ä»¶çš„æ–¹å¼æ”¶é›†æ™ºèƒ½ä½“è¿è¡Œæ•°æ®ï¼Œæ¯”å¦‚æç¤ºã€å·¥å…·è°ƒç”¨ï¼Œå­˜å‚¨åˆ° LightningStoreï¼Œç„¶ååº”ç”¨ç®—æ³•ï¼ˆå¦‚APOï¼‰ç”Ÿæˆä¼˜åŒ–èµ„æºï¼ˆå¦‚æ–°æç¤ºæ¨¡æ¿ï¼‰ã€‚</p>
<p>æ¡†æ¶æ”¯æŒå¤šä»£ç†ç³»ç»Ÿé€‰æ‹©æ€§ä¼˜åŒ–ï¼Œå¹¶æä¾›Trainerç®¡ç†è®­ç»ƒå¾ªç¯ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ç”¨å…¶æå‡èŠå¤©ä»£ç†çš„SQLç”Ÿæˆå‡†ç¡®ç‡ã€‚é¡¹ç›®å¼ºè°ƒæ˜“ç”¨æ€§ï¼šåªéœ€æ·»åŠ å‡ è¡Œè¾…åŠ©ä»£ç å³å¯é›†æˆã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/microsoft/agent-lightning</span>
</code></pre>
<h2 data-id="heading-6">07ã€Glowï¼šåœ¨å‘½ä»¤è¡Œä¸­ä¼˜é›…æ¸²æŸ“ Markdown</h2>
<p>Glowæ˜¯ä¸€ä¸ªç”¨ Go ç¼–å†™çš„å¼€æºå‘½ä»¤è¡Œå·¥å…·ï¼Œä¸“ä¸ºåœ¨ç»ˆç«¯ä¸­ä¼˜é›…æ˜¾ç¤º Markdown è®¾è®¡ã€‚å®ƒä¸åƒç®€å•è§£æå™¨ï¼Œè€Œæ˜¯å®Œæ•´æ¸²æŸ“å¼•æ“ï¼Œèƒ½å¤„ç†å¤æ‚å…ƒç´ å¦‚ä»£ç å—ã€æ•°å­¦å…¬å¼ã€‚ç»ˆç«¯æ˜¾ç¤º Markdown ä¸ç”¨å¤´ç–¼äº†ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/charmbracelet/glow</span>
</code></pre>
<p>æœ¬å‘¨è¿˜æœ‰å…¶å®ƒçƒ­é—¨çš„å¼€æºé¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¼ å›¾ä¸€è§ˆã€‚å¾ˆå¤šé¡¹ç›®é€›é€›ä¹‹å‰å‘è¿‡å•ç‹¬çš„æ–‡ç« ä»‹ç»è¿‡ï¼Œæ„Ÿå…´è¶£çš„å»ç¿»ä¸€ç¿»å§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cb37414a7b84c6cbaa76edf63df2606~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358366&amp;x-signature=0Z6%2Bg7c%2BU86fBjN4r4wx7AzH%2Bfc%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Elasticsearchï¼šå¦‚ä½•ä¸º Elastic Stack éƒ¨ç½² E5 æ¨¡å‹ - ä¸‹è½½åŠéš”ç¦»ç¯å¢ƒ]]></title>    <link>https://juejin.cn/post/7570339961909264427</link>    <guid>https://juejin.cn/post/7570339961909264427</guid>    <pubDate>2025-11-10T06:10:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570339961909264427" data-draft-id="7570500819888865323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Elasticsearchï¼šå¦‚ä½•ä¸º Elastic Stack éƒ¨ç½² E5 æ¨¡å‹ - ä¸‹è½½åŠéš”ç¦»ç¯å¢ƒ"/> <meta itemprop="keywords" content="Elasticsearch"/> <meta itemprop="datePublished" content="2025-11-10T06:10:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Elasticsearch"/> <meta itemprop="url" content="https://juejin.cn/user/2612095360441448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Elasticsearchï¼šå¦‚ä½•ä¸º Elastic Stack éƒ¨ç½² E5 æ¨¡å‹ - ä¸‹è½½åŠéš”ç¦»ç¯å¢ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612095360441448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Elasticsearch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:10:45.000Z" title="Mon Nov 10 2025 06:10:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/899034501fa54e4a91b8d14c64bf0807~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=FA%2F5NLhcOGVOpPWcUxH7pY3BXw0%3D" alt="" loading="lazy"/></p>
<p>ä»åŒå‘ç¼–ç å™¨è¡¨ç¤ºï¼ˆEmbeddings from bidirectional Encoder Representationsï¼Œç®€ç§° E5ï¼‰æ˜¯ä¸€ç§è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡å‹ï¼Œå®ƒå¯ä»¥é€šè¿‡ä½¿ç”¨ç¨ å¯†å‘é‡è¡¨ç¤ºæ¥æ‰§è¡Œå¤šè¯­è¨€è¯­ä¹‰æœç´¢ã€‚è¯¥æ¨¡å‹æ¨èç”¨äºéè‹±è¯­æ–‡æ¡£å’ŒæŸ¥è¯¢ã€‚å¦‚æœä½ æƒ³å¯¹è‹±æ–‡æ–‡æ¡£æ‰§è¡Œè¯­ä¹‰æœç´¢ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Fmachine-learning%2Fnlp%2Fml-nlp-elser" title="https://www.elastic.co/docs/explore-analyze/machine-learning/nlp/ml-nlp-elser" target="_blank" ref="nofollow noopener noreferrer">ELSER</a> æ¨¡å‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fsolutions%2Fsearch%2Fsemantic-search" title="https://www.elastic.co/docs/solutions/search/semantic-search" target="_blank" ref="nofollow noopener noreferrer">è¯­ä¹‰æœç´¢</a>æ ¹æ®ä¸Šä¸‹æ–‡å«ä¹‰å’Œç”¨æˆ·æ„å›¾æä¾›æœç´¢ç»“æœï¼Œè€Œä¸æ˜¯ä»…ä»…åŒ¹é…å…³é”®è¯ã€‚</p>
<p>E5 æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼š</p>
<ol>
<li>
<p><strong>è·¨å¹³å°ç‰ˆæœ¬</strong>ï¼šå¯åœ¨ä»»ä½•ç¡¬ä»¶ä¸Šè¿è¡Œ</p>
</li>
<li>
<p><strong>IntelÂ® ç¡…ä¼˜åŒ–ç‰ˆæœ¬</strong>ï¼šé’ˆå¯¹ Intel ç¡¬ä»¶ä¼˜åŒ–</p>
</li>
</ol>
<p>åœ¨ <strong>Model Management &gt; Trained Models</strong> é¡µé¢ä¸Šï¼Œå¯ä»¥æŸ¥çœ‹æ ¹æ®é›†ç¾¤ç¡¬ä»¶æ¨èéƒ¨ç½²çš„ E5 ç‰ˆæœ¬ã€‚ä¸è¿‡ï¼Œæ¨èçš„ä½¿ç”¨æ–¹å¼æ˜¯é€šè¿‡ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fapi%2Fdoc%2Felasticsearch%2Foperation%2Foperation-inference-put-elasticsearch" title="https://www.elastic.co/docs/api/doc/elasticsearch/operation/operation-inference-put-elasticsearch" target="_blank" ref="nofollow noopener noreferrer">inference API</a> ä½œä¸ºæœåŠ¡</strong> ä½¿ç”¨ E5ï¼Œè¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿åœ°ä¸‹è½½å’Œéƒ¨ç½²æ¨¡å‹ï¼Œæ— éœ€æ‰‹åŠ¨é€‰æ‹©ä¸åŒç‰ˆæœ¬ã€‚</p>
<p>å¦‚éœ€æ›´å¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬è®¸å¯è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒ HuggingFace ä¸Šçš„ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Felastic%2Fmultilingual-e5-small" title="https://huggingface.co/elastic/multilingual-e5-small" target="_blank" ref="nofollow noopener noreferrer">multilingual-e5-small</a></strong> å’Œ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Felastic%2Fmultilingual-e5-small-optimized" title="https://huggingface.co/elastic/multilingual-e5-small-optimized" target="_blank" ref="nofollow noopener noreferrer">multilingual-e5-small-optimized</a></strong> æ¨¡å‹å¡ã€‚</p>
<h2 data-id="heading-0">è¦æ±‚</h2>
<p>è¦ä½¿ç”¨ E5ï¼Œä½ å¿…é¡»æ‹¥æœ‰ç”¨äº semantic search çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fcn%2Fsubscriptions" title="https://www.elastic.co/cn/subscriptions" target="_blank" ref="nofollow noopener noreferrer">ç›¸åº”è®¢é˜…ç­‰çº§</a>æˆ–å·²æ¿€æ´»è¯•ç”¨æœŸã€‚</p>
<p>å»ºè®®ä¸ºä½ çš„ E5 éƒ¨ç½²å¯ç”¨ trained model autoscalingã€‚å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fdeploy-manage%2Fautoscaling%2Ftrained-model-autoscaling" title="https://www.elastic.co/docs/deploy-manage/autoscaling/trained-model-autoscaling" target="_blank" ref="nofollow noopener noreferrer">Trained model autoscaling</a> äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p>
<h2 data-id="heading-1">ä¸‹è½½å¹¶éƒ¨ç½² E5</h2>
<p>ä¸‹è½½å¹¶éƒ¨ç½² E5 æœ€ç®€å•ä¸”æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fapi%2Fdoc%2Felasticsearch%2Fgroup%2Fendpoint-inference" title="https://www.elastic.co/docs/api/doc/elasticsearch/group/endpoint-inference" target="_blank" ref="nofollow noopener noreferrer">inference API</a>ã€‚</p>
<p>1ï¼‰åœ¨ Kibana ä¸­ï¼Œè¿›å…¥ Dev Consoleã€‚<br/>
2ï¼‰é€šè¿‡è¿è¡Œä»¥ä¸‹ API è¯·æ±‚ï¼Œä½¿ç”¨ elasticsearch æœåŠ¡åˆ›å»ºä¸€ä¸ª inference endpointï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  PUT _inference/text_embedding/my-e5-model
2.  {
3.    <span class="hljs-string">"service"</span>: <span class="hljs-string">"elasticsearch"</span>,
4.    <span class="hljs-string">"service_settings"</span>: {
5.      <span class="hljs-string">"num_allocations"</span>: 1,
6.      <span class="hljs-string">"num_threads"</span>: 1,
7.      <span class="hljs-string">"model_id"</span>: <span class="hljs-string">".multilingual-e5-small"</span>
8.    }
9.  }

`AIå†™ä»£ç 
</code></pre>
<p>è¯¥ API è¯·æ±‚ä¼šè‡ªåŠ¨å¯åŠ¨æ¨¡å‹ä¸‹è½½ï¼Œç„¶åéƒ¨ç½²æ¨¡å‹ã€‚</p>
<p>å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fapi%2Fdoc%2Felasticsearch%2Foperation%2Foperation-inference-put-elasticsearch" title="https://www.elastic.co/docs/api/doc/elasticsearch/operation/operation-inference-put-elasticsearch" target="_blank" ref="nofollow noopener noreferrer">elasticsearch inference service</a> æ–‡æ¡£äº†è§£å¯ç”¨è®¾ç½®çš„æ›´å¤šä¿¡æ¯ã€‚</p>
<p>åœ¨åˆ›å»º E5 inference endpoint åï¼Œå®ƒå³å¯ç”¨äº semantic searchã€‚åœ¨ Elastic Stack ä¸­æ‰§è¡Œ semantic search æœ€ç®€å•çš„æ–¹æ³•æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fsolutions%2Fsearch%2Fsemantic-search%2Fsemantic-search-semantic-text" title="https://www.elastic.co/docs/solutions/search/semantic-search/semantic-search-semantic-text" target="_blank" ref="nofollow noopener noreferrer">éµå¾ª semantic_text workflow</a>ã€‚</p>
<h2 data-id="heading-2">ä¸‹è½½å¹¶éƒ¨ç½² E5 çš„æ›¿ä»£æ–¹æ³•</h2>
<p>ä½ ä¹Ÿå¯ä»¥ä» Trained models é¡µé¢ã€Search &gt; Indicesï¼Œæˆ–é€šè¿‡åœ¨ Dev Console ä¸­ä½¿ç”¨ trained models API ä¸‹è½½å¹¶éƒ¨ç½² E5 æ¨¡å‹ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨é’ˆå¯¹ Intel å’Œ Linux ä¼˜åŒ–çš„æ¨¡å‹ï¼Œå»ºè®®ä¸‹è½½å¹¶éƒ¨ç½²è¯¥ç‰ˆæœ¬ã€‚</p>
</blockquote>
<h3 data-id="heading-3">ä½¿ç”¨ Trained Models é¡µé¢è¿›è¡Œä¸‹è½½</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7abd237f70354f7687d7b343e031d4a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=UhGJV4N9CNzoOw6QoZU%2FcxChkSc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/967d1f30e4c04961a2492ee98ab8eb59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=UddlXsEWrnQR%2BL8b3EEMqDjUvVE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0df4fb7c4a8442b9736a4e9b37a1759~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=J%2FUnyXcrPTHo92Xv2xYRnfY9xYw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed039fbefad84592806555059f775ab1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=jDIR354s7KPbuV5XfAv9A5v70EY%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„å‘½ä»¤æ¥å¸è½½å·²ç»å®‰è£…å¥½çš„æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">`DELETE _ml/trained_models/.multilingual-e5-small?<span class="hljs-attr">force</span>=<span class="hljs-literal">true</span>`AIå†™ä»£ç 
</code></pre>
<p>ä¸€æ—¦è¢«å¸è½½ï¼Œå°±ä¼šæ¢å¤åˆ°ä¹‹å‰çš„æ ·å­ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d2a00cd35174771b9c3763faa7eccd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=D7XwSdYkvijgOhQexh%2BUYYo5RKY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">åœ¨ Dev Console ä¸­ä½¿ç”¨ trained models API</h3>
<p>1ï¼‰åœ¨ Kibana ä¸­ï¼Œè¿›å…¥ Dev Consoleã€‚<br/>
2ï¼‰é€šè¿‡è¿è¡Œä»¥ä¸‹ API è°ƒç”¨åˆ›å»º E5 æ¨¡å‹é…ç½®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">`

<span class="hljs-bullet">1.</span>  PUT <span class="hljs-emphasis">_ml/trained_</span>models/.multilingual-e5-small
<span class="hljs-bullet">2.</span>  {
<span class="hljs-bullet">3.</span>    "input": {
<span class="hljs-bullet">4.</span>      "field<span class="hljs-emphasis">_names": [
5.        "text_</span>field"
<span class="hljs-bullet">6.</span>      ]
<span class="hljs-bullet">7.</span>    }
<span class="hljs-bullet">8.</span>  }

`AIå†™ä»£ç 
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fddc057fd79f425ea5b2dbff3fde99f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRWxhc3RpY3NlYXJjaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763359844&amp;x-signature=fWEUEMa9V2M9G%2Bz7%2BDZIfdVmpu8%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæ¨¡å‹å°šæœªä¸‹è½½ï¼Œè¯¥ API è°ƒç”¨ä¼šè‡ªåŠ¨å¯åŠ¨æ¨¡å‹ä¸‹è½½ã€‚</p>
<p>3ï¼‰ä½¿ç”¨ start trained model deployment API å¹¶æä¾› deployment ID æ¥éƒ¨ç½²æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`POST _ml/trained_models/.multilingual-e5-small/deployment/_start?deployment_id=for_search`AIå†™ä»£ç 
</code></pre>
<h2 data-id="heading-5">åœ¨éš”ç¦»ç¯å¢ƒä¸­éƒ¨ç½² E5 æ¨¡å‹</h2>
<p>å¦‚æœä½ æƒ³åœ¨éš”ç¦»ç¯å¢ƒä¸­å®‰è£… E5ï¼Œä½ æœ‰ä»¥ä¸‹é€‰é¡¹ï¼š</p>
<ul>
<li>
<p>å°†æ¨¡å‹æ–‡ä»¶æ”¾å…¥æ‰€æœ‰ master-eligible èŠ‚ç‚¹ config ç›®å½•å†…çš„æŸä¸ªç›®å½•ä¸­ï¼ˆé€‚ç”¨äº multilingual-e5-small å’Œ multilingual-e5-small-linux-x86-64ï¼‰</p>
</li>
<li>
<p>ä½¿ç”¨ HuggingFace å®‰è£…æ¨¡å‹ï¼ˆä»…é€‚ç”¨äº multilingual-e5-small æ¨¡å‹ï¼‰</p>
</li>
</ul>
<h3 data-id="heading-6">æ¨¡å‹æ–‡ä»¶</h3>
<p>å¯¹äº multilingual-e5-small æ¨¡å‹ï¼Œä½ çš„ç³»ç»Ÿä¸­éœ€è¦ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">`

<span class="hljs-number">1.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small.metadata.json</span>
<span class="hljs-number">2.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small.pt</span>
<span class="hljs-number">3.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small.vocab.json</span>

`AIå†™ä»£ç 
</code></pre>
<p>å¯¹äºä¼˜åŒ–ç‰ˆæœ¬ï¼Œä½ çš„ç³»ç»Ÿä¸­éœ€è¦ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">`

<span class="hljs-number">1.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small_linux-x86_64.metadata.json</span>
<span class="hljs-number">2.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small_linux-x86_64.pt</span>
<span class="hljs-number">3.</span>  https:<span class="hljs-comment">//ml-models.elastic.co/multilingual-e5-small_linux-x86_64.vocab.json</span>

`AIå†™ä»£ç 
</code></pre>
<h3 data-id="heading-7">ä½¿ç”¨åŸºäºæ–‡ä»¶çš„è®¿é—®</h3>
<p>å¯¹äºåŸºäºæ–‡ä»¶çš„è®¿é—®ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
<ol>
<li>
<p>ä¸‹è½½<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Fmachine-learning%2Fnlp%2Fml-nlp-e5%23e5-model-artifacts" title="https://www.elastic.co/docs/explore-analyze/machine-learning/nlp/ml-nlp-e5#e5-model-artifacts" target="_blank" ref="nofollow noopener noreferrer">æ¨¡å‹æ–‡ä»¶</a>ã€‚</p>
</li>
<li>
<p>å°†æ–‡ä»¶æ”¾å…¥ Elasticsearch éƒ¨ç½²çš„ config ç›®å½•ä¸‹çš„ models å­ç›®å½•ä¸­ã€‚</p>
</li>
<li>
<p>é€šè¿‡åœ¨ config/elasticsearch.yml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œï¼Œå°†ä½ çš„ Elasticsearch éƒ¨ç½²æŒ‡å‘æ¨¡å‹ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">`xpack.ml.model_repository: file://<span class="hljs-variable">${path.home}</span>/config/models/`AIå†™ä»£ç 
</code></pre>
</li>
<li>
<p>åœ¨æ‰€æœ‰ master-eligible èŠ‚ç‚¹é‡å¤æ­¥éª¤ 2 å’Œæ­¥éª¤ 3ã€‚</p>
</li>
<li>
<p>é€ä¸€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fdeploy-manage%2Fmaintenance%2Fstart-stop-services%2Ffull-cluster-restart-rolling-restart-procedures%23restart-cluster-rolling" title="https://www.elastic.co/docs/deploy-manage/maintenance/start-stop-services/full-cluster-restart-rolling-restart-procedures#restart-cluster-rolling" target="_blank" ref="nofollow noopener noreferrer">é‡å¯</a> master-eligible èŠ‚ç‚¹ã€‚</p>
</li>
<li>
<p>ä»ä¸»èœå•è¿›å…¥ <strong>Trained Models</strong> é¡µé¢ï¼Œæˆ–ä½¿ç”¨ Kibana çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.elastic.co%2Fdocs%2Fexplore-analyze%2Ffind-and-organize%2Ffind-apps-and-objects" title="https://www.elastic.co/docs/explore-analyze/find-and-organize/find-apps-and-objects" target="_blank" ref="nofollow noopener noreferrer">å…¨å±€æœç´¢å­—æ®µ</a>ã€‚ä½ å¯ä»¥åœ¨è®­ç»ƒæ¨¡å‹åˆ—è¡¨ä¸­æ‰¾åˆ° E5ã€‚</p>
</li>
<li>
<p>ç‚¹å‡» <strong>Add trained model</strong> æŒ‰é’®ï¼Œé€‰æ‹©ä½ åœ¨æ­¥éª¤ 1 ä¸‹è½½å¹¶æƒ³è¦éƒ¨ç½²çš„ E5 æ¨¡å‹ç‰ˆæœ¬ï¼Œç„¶åç‚¹å‡» <strong>Download</strong>ã€‚æ‰€é€‰æ¨¡å‹å°†ä»ä½ åœ¨æ­¥éª¤ 2 æ”¾ç½®çš„æ¨¡å‹ç›®å½•ä¸­ä¸‹è½½ã€‚</p>
</li>
<li>
<p>ä¸‹è½½å®Œæˆåï¼Œç‚¹å‡» <strong>Start deployment</strong> æŒ‰é’®å¯åŠ¨éƒ¨ç½²ã€‚</p>
</li>
<li>
<p>æä¾› deployment IDï¼Œé€‰æ‹©ä¼˜å…ˆçº§ï¼Œå¹¶è®¾ç½®æ¯ä¸ªåˆ†é…çš„ allocation æ•°é‡å’Œçº¿ç¨‹æ•°ã€‚</p>
</li>
<li>
<p>ç‚¹å‡» <strong>Start</strong>ã€‚</p>
</li>
</ol>
<h2 data-id="heading-8">ä½¿ç”¨ HuggingFace ä»“åº“</h2>
<p>ä½ å¯ä»¥é€šè¿‡å°† eland_import_hub_model è„šæœ¬æŒ‡å‘æ¨¡å‹çš„æœ¬åœ°æ–‡ä»¶ï¼Œåœ¨å—é™æˆ–å°é—­ç½‘ç»œä¸­å®‰è£… multilingual-e5-small æ¨¡å‹ã€‚</p>
<p>å¯¹äºç¦»çº¿å®‰è£…ï¼Œæ¨¡å‹éœ€è¦å…ˆåœ¨æœ¬åœ°å…‹éš†ï¼Œä½ çš„ç³»ç»Ÿä¸­éœ€è¦å®‰è£… Git å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-lfs.com%2F" title="https://git-lfs.com/" target="_blank" ref="nofollow noopener noreferrer">Git Large File Storage</a>ã€‚</p>
<p>1ï¼‰ä½¿ç”¨æ¨¡å‹ URL ä» Hugging Face å…‹éš† E5 æ¨¡å‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">`git <span class="hljs-built_in">clone</span> https://huggingface.co/intfloat/multilingual-e5-small`AIå†™ä»£ç 
</code></pre>
<p>è¯¥å‘½ä»¤ä¼šåœ¨ multilingual-e5-small ç›®å½•ä¸­ç”Ÿæˆæ¨¡å‹çš„æœ¬åœ°å‰¯æœ¬ã€‚</p>
<p>2ï¼‰ä½¿ç”¨ eland_import_hub_model è„šæœ¬ï¼Œå¹¶å°† --hub-model-id è®¾ç½®ä¸ºå…‹éš†æ¨¡å‹çš„ç›®å½•æ¥å®‰è£…å®ƒï¼š</p>
<pre><code class="hljs language-css" lang="css">`

<span class="hljs-number">1</span>.  eland_import_hub_model \
<span class="hljs-number">2</span>.        <span class="hljs-attr">--url</span> 'XXXX' \
<span class="hljs-number">3</span>.        <span class="hljs-attr">--hub-model-id</span> /PATH/<span class="hljs-selector-tag">TO</span>/MODEL \
<span class="hljs-number">4</span>.        <span class="hljs-attr">--task-type</span> text_embedding \
<span class="hljs-number">5</span>.        <span class="hljs-attr">--es-username</span> elastic <span class="hljs-attr">--es-password</span> XXX \
<span class="hljs-number">6</span>.        <span class="hljs-attr">--es-model-id</span> multilingual-e5-small

`AIå†™ä»£ç 
</code></pre>
<p>å¦‚æœä½ ä½¿ç”¨ Docker é•œåƒè¿è¡Œ eland_import_hub_modelï¼Œå¿…é¡»ç»‘å®šæŒ‚è½½æ¨¡å‹ç›®å½•ï¼Œä»¥ä¾¿å®¹å™¨å¯ä»¥è¯»å–æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">`

1.  docker run --mount <span class="hljs-built_in">type</span>=<span class="hljs-built_in">bind</span>,<span class="hljs-built_in">source</span>=/PATH/TO/MODELS,destination=/models,<span class="hljs-built_in">readonly</span> -it --<span class="hljs-built_in">rm</span> docker.elastic.co/eland/eland \
2.      eland_import_hub_model \
3.        --url <span class="hljs-string">'XXXX'</span> \
4.        --hub-model-id /models/multilingual-e5-small \
5.        --task-type text_embedding \
6.        --es-username elastic --es-password XXX \
7.        --es-model-id multilingual-e5-small

`AIå†™ä»£ç 
</code></pre>
<p>ä¸€æ—¦ä¸Šä¼ åˆ° Elasticsearchï¼Œæ¨¡å‹å°†ä½¿ç”¨ --es-model-id æŒ‡å®šçš„ IDã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™æ¨¡å‹ ID å°†ä» --hub-model-id æ¨å¯¼ï¼›ç©ºæ ¼å’Œè·¯å¾„åˆ†éš”ç¬¦ä¼šè¢«è½¬æ¢ä¸ºåŒä¸‹åˆ’çº¿ __ã€‚</p>
<h2 data-id="heading-9">å…è´£å£°æ˜</h2>
<p>å®¢æˆ·å¯ä»¥å°†ç¬¬ä¸‰æ–¹è®­ç»ƒæ¨¡å‹æ·»åŠ åˆ° Elastic è¿›è¡Œç®¡ç†ã€‚è¿™äº›æ¨¡å‹ä¸å±äº Elasticã€‚è™½ç„¶ Elastic ä¼šæ ¹æ®æ–‡æ¡£æ”¯æŒä¸è¿™äº›æ¨¡å‹çš„é›†æˆæ€§èƒ½ï¼Œä½†ä½ ç†è§£å¹¶åŒæ„ Elastic å¯¹ç¬¬ä¸‰æ–¹æ¨¡å‹æˆ–å®ƒä»¬å¯èƒ½ä½¿ç”¨çš„åº•å±‚è®­ç»ƒæ•°æ®ä¸æ‹¥æœ‰æ§åˆ¶æƒï¼Œä¹Ÿä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚</p>
<p>æœ¬ E5 æ¨¡å‹ï¼Œå¦‚å®šä¹‰ã€æ‰˜ç®¡ã€é›†æˆå¹¶ä¸æˆ‘ä»¬çš„å…¶ä»– Elastic è½¯ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œå—æˆ‘ä»¬çš„æ ‡å‡†ä¿ä¿®è¦†ç›–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RabbitMQ Unacked æ¶ˆæ¯æ·±åº¦è§£æï¼šæœºåˆ¶ã€é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7570491473034346505</link>    <guid>https://juejin.cn/post/7570491473034346505</guid>    <pubDate>2025-11-10T06:14:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570491473034346505" data-draft-id="7570579125154070538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RabbitMQ Unacked æ¶ˆæ¯æ·±åº¦è§£æï¼šæœºåˆ¶ã€é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Spring Boot,RabbitMQ"/> <meta itemprop="datePublished" content="2025-11-10T06:14:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€ç å†œDebugæ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/2438031766469579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RabbitMQ Unacked æ¶ˆæ¯æ·±åº¦è§£æï¼šæœºåˆ¶ã€é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2438031766469579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€ç å†œDebugæ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:14:13.000Z" title="Mon Nov 10 2025 06:14:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€</h3>
<p>åœ¨ RabbitMQ çš„æ¶ˆæ¯å¤„ç†ä¸­ï¼ŒUnackedï¼ˆæœªç¡®è®¤ï¼‰çŠ¶æ€æ˜¯ä¸€ä¸ªå…³é”®æ¦‚å¿µã€‚ç†è§£ Unacked æ¶ˆæ¯çš„è¡Œä¸ºæœºåˆ¶å¯¹äºæ„å»ºå¯é çš„æ¶ˆæ¯ç³»ç»Ÿè‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Unacked æ¶ˆæ¯çš„ç”Ÿå‘½å‘¨æœŸã€ä¸ºä»€ä¹ˆå®ƒä»¬å¯èƒ½ä¸ä¼šé‡æ–°å…¥é˜Ÿï¼Œä»¥åŠå¦‚ä½•æœ‰æ•ˆç®¡ç†è¿™ç§æƒ…å†µã€‚</p>
<h3 data-id="heading-1">ä¸€ã€Unacked æ¶ˆæ¯çš„åŸºæœ¬æ¦‚å¿µ</h3>
<h4 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯ Unacked æ¶ˆæ¯</h4>
<p>Unacked æ¶ˆæ¯æ˜¯æŒ‡å·²ç»è¢«æ¶ˆè´¹è€…è·å–ä½†å°šæœªç¡®è®¤çš„æ¶ˆæ¯ã€‚è¿™ç§çŠ¶æ€å­˜åœ¨äºæ‰‹åŠ¨ç¡®è®¤æ¨¡å¼ï¼ˆManual Acknowledgementï¼‰ä¸‹ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ¶ˆæ¯çŠ¶æ€æµè½¬ç¤ºæ„å›¾</span>
Producer â†’ Broker â†’ <span class="hljs-selector-attr">[Ready]</span> â†’ Consumer â†’ <span class="hljs-selector-attr">[Unacked]</span> â†’ (Ack/Nack/Reject)
</code></pre>
<h4 data-id="heading-3">1.2 æ¶ˆæ¯ç¡®è®¤çš„ä¸‰ç§æ–¹å¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageAckExamples</span> {
    
    <span class="hljs-meta">@RabbitListener(queues = "test_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">long</span> <span class="hljs-variable">deliveryTag</span> <span class="hljs-operator">=</span> message.getMessageProperties().getDeliveryTag();
        
        <span class="hljs-comment">// 1. ç¡®è®¤æ¶ˆæ¯ - æˆåŠŸå¤„ç†</span>
        channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
        
        <span class="hljs-comment">// 2. æ‹’ç»æ¶ˆæ¯å¹¶é‡æ–°å…¥é˜Ÿ</span>
        channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
        
        <span class="hljs-comment">// 3. æ‹’ç»æ¶ˆæ¯å¹¶ä¸¢å¼ƒ</span>
        channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
    }
}
</code></pre>
<h3 data-id="heading-4">äºŒã€Unacked æ¶ˆæ¯çš„æœ€ç»ˆå‘½è¿</h3>
<h4 data-id="heading-5">2.1 æ¶ˆæ¯çš„å››ç§å¯èƒ½ç»“å±€</h4>
<h5 data-id="heading-6">2.1.1 æ¶ˆè´¹è€…æ­£å¸¸ç¡®è®¤</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¶ˆæ¯è¢«æˆåŠŸå¤„ç†å¹¶ä» RabbitMQ ä¸­åˆ é™¤</span>
channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
</code></pre>
<h5 data-id="heading-7">2.1.2 æ¶ˆè´¹è€…æ‹’ç»å¹¶é‡æ–°å…¥é˜Ÿ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¶ˆæ¯é‡æ–°å˜ä¸º Ready çŠ¶æ€ï¼Œå¯è¢«å…¶ä»–æ¶ˆè´¹è€…å¤„ç†</span>
channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
</code></pre>
<h5 data-id="heading-8">2.1.3 æ¶ˆè´¹è€…è¿æ¥æ–­å¼€</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å½“æ¶ˆè´¹è€…è¿æ¥å¼‚å¸¸æ–­å¼€æ—¶ï¼Œæ‰€æœ‰ Unacked æ¶ˆæ¯ä¼šè‡ªåŠ¨é‡æ–°å…¥é˜Ÿ</span>
<span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨æ“ä½œï¼ŒRabbitMQ è‡ªåŠ¨å¤„ç†</span>
</code></pre>
<h5 data-id="heading-9">2.1.4 æ¶ˆè´¹è€…å¿˜è®°ç¡®è®¤</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœ€å±é™©çš„æƒ…å†µï¼šæ¶ˆæ¯ä¸€ç›´å¤„äº Unacked çŠ¶æ€</span>
<span class="hljs-comment">// ç›´åˆ°æ¶ˆè´¹è€…è¿æ¥æ–­å¼€æ‰ä¼šé‡æ–°å…¥é˜Ÿ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> {
    <span class="hljs-comment">// å¤„ç†ä¸šåŠ¡é€»è¾‘...</span>
    <span class="hljs-comment">// ä½†å¿˜è®°è°ƒç”¨ basicAck() æˆ– basicNack()</span>
    <span class="hljs-comment">// æ¶ˆæ¯å°†ä¸€ç›´å¤„äº Unacked çŠ¶æ€ï¼</span>
}
</code></pre>
<h4 data-id="heading-10">2.2 Unacked æ¶ˆæ¯çš„èµ„æºå ç”¨</h4>
<ul>
<li>å†…å­˜ç©ºé—´</li>
<li>æ¶ˆæ¯åœ¨é˜Ÿåˆ—ä¸­çš„ä½ç½®ï¼ˆä½†å¯¹å…¶ä»–æ¶ˆè´¹è€…ä¸å¯è§ï¼‰</li>
<li>ç½‘ç»œè¿æ¥èµ„æº</li>
<li>æ¶ˆè´¹è€…é€šé“èµ„æº</li>
</ul>
<h3 data-id="heading-11">ä¸‰ã€ä¸ºä»€ä¹ˆ Unacked æ¶ˆæ¯æ²¡æœ‰é‡æ–°å…¥é˜Ÿ</h3>
<h4 data-id="heading-12">3.1 ä¸»è¦åŸå› åˆ†æ</h4>
<h5 data-id="heading-13">3.1.1 æ¶ˆè´¹è€…è¿æ¥ä»ç„¶æ´»è·ƒ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActiveButStuckConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "test_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-comment">// æ¶ˆè´¹è€…è¿›ç¨‹æ­£å¸¸è¿è¡Œï¼Œè¿æ¥ä¿æŒæ´»è·ƒ</span>
        <span class="hljs-comment">// RabbitMQ è®¤ä¸ºæ¶ˆè´¹è€…ä»åœ¨å¤„ç†æ¶ˆæ¯</span>
        <span class="hljs-comment">// å› æ­¤ä¸ä¼šè‡ªåŠ¨é‡æ–°å…¥é˜Ÿ</span>
        
        <span class="hljs-comment">// å¦‚æœè¿™é‡Œå‘ç”Ÿé˜»å¡æˆ–æ­»é”ï¼Œæ¶ˆæ¯å°†æ°¸è¿œå¤„äº Unacked çŠ¶æ€</span>
        processMessage(message); <span class="hljs-comment">// å‡è®¾è¿™é‡Œå¡ä½äº†</span>
        
        <span class="hljs-comment">// æ°¸è¿œæ‰§è¡Œä¸åˆ°ç¡®è®¤ä»£ç </span>
        <span class="hljs-comment">// channel.basicAck(deliveryTag, false);</span>
    }
}
</code></pre>
<h5 data-id="heading-14">3.1.2 Prefetch Count é…ç½®è¿‡å¤§</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LargePrefetchConfig</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SimpleRabbitListenerContainerFactory <span class="hljs-title function_">containerFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SimpleRabbitListenerContainerFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleRabbitListenerContainerFactory</span>();
        factory.setPrefetchCount(<span class="hljs-number">50</span>); <span class="hljs-comment">// è®¾ç½®è¿‡å¤§</span>
        
        <span class="hljs-comment">// é—®é¢˜ï¼šæ¶ˆè´¹è€…å¯ä»¥ä¸€æ¬¡æ€§è·å–50æ¡æ¶ˆæ¯</span>
        <span class="hljs-comment">// å¦‚æœå…¶ä¸­å‡ æ¡æ¶ˆæ¯å¤„ç†å¡ä½ï¼Œå…¶ä»–æ¶ˆæ¯ä¹Ÿä¼šè¢«é˜»å¡</span>
        <span class="hljs-comment">// æ‰€æœ‰50æ¡æ¶ˆæ¯éƒ½ä¼šå¤„äº Unacked çŠ¶æ€</span>
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h5 data-id="heading-15">3.1.3 ç¼ºå°‘è¶…æ—¶æœºåˆ¶</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoTimeoutConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "blocking_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleBlockingOperation</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-comment">// æ²¡æœ‰è®¾ç½®å¤„ç†è¶…æ—¶</span>
        <span class="hljs-comment">// å¦‚æœå¤–éƒ¨ä¾èµ–æœåŠ¡å“åº”æ…¢æˆ–æŒ‚èµ·</span>
        <span class="hljs-comment">// æ¶ˆæ¯å°†æ°¸è¿œå¤„äº Unacked çŠ¶æ€</span>
        ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(
            <span class="hljs-string">"http://slow-service/api"</span>, 
            String.class  <span class="hljs-comment">// æ²¡æœ‰è®¾ç½®è¶…æ—¶æ—¶é—´</span>
        );
        
        <span class="hljs-comment">// å¦‚æœæœåŠ¡ä¸å“åº”ï¼Œè¿™é‡Œæ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
        channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
    }
}
</code></pre>
<h4 data-id="heading-16">3.2 å…·ä½“é—®é¢˜åœºæ™¯</h4>
<h5 data-id="heading-17">3.2.1 æ•°æ®åº“è¿æ¥æ± è€—å°½</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseBlockedConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "db_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processWithDB</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å¦‚æœæ•°æ®åº“è¿æ¥æ± è€—å°½ï¼Œè¿™é‡Œä¼šä¸€ç›´ç­‰å¾…</span>
            <span class="hljs-comment">// çº¿ç¨‹è¢«é˜»å¡ï¼Œæ— æ³•æ‰§è¡Œç¡®è®¤æ“ä½œ</span>
            dbService.saveLargeData(extractData(message));
            
            <span class="hljs-comment">// æ°¸è¿œæ‰§è¡Œä¸åˆ°è¿™é‡Œ</span>
            channel.basicAck(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å¼‚å¸¸ä¹Ÿæ•è·ä¸åˆ°ï¼Œå› ä¸ºæ˜¯åœ¨ç­‰å¾…è¿æ¥</span>
        }
    }
}
</code></pre>
<h5 data-id="heading-18">3.2.2 åŒæ­¥ HTTP è°ƒç”¨æ— è¶…æ—¶</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpBlockedConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "http_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callExternalApi</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-comment">// åˆ›å»ºæ²¡æœ‰è¶…æ—¶è®¾ç½®çš„ RestTemplate</span>
        <span class="hljs-type">RestTemplate</span> <span class="hljs-variable">noTimeoutTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();
        
        <span class="hljs-comment">// å¦‚æœå¤–éƒ¨æœåŠ¡ä¸å“åº”ï¼Œè°ƒç”¨å°†æ°¸è¿œæŒ‚èµ·</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> noTimeoutTemplate.getForObject(
            <span class="hljs-string">"http://unreliable-service/api"</span>, 
            String.class
        );
        
        <span class="hljs-comment">// æ°¸è¿œä¸ä¼šæ‰§è¡Œç¡®è®¤</span>
        channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
    }
}
</code></pre>
<h5 data-id="heading-19">3.2.3 æ­»é”æˆ–èµ„æºç«äº‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadlockConsumer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lockA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lockB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
    
    <span class="hljs-meta">@RabbitListener(queues = "deadlock_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processWithDeadlock</span><span class="hljs-params">(Message message, Channel channel)</span> {
        <span class="hljs-keyword">synchronized</span> (lockA) {
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">100</span>);
                <span class="hljs-keyword">synchronized</span> (lockB) {  <span class="hljs-comment">// å¯èƒ½å‘ç”Ÿæ­»é”</span>
                    processBusinessLogic(message);
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œåˆ°ç¡®è®¤</span>
            }
        }
        <span class="hljs-comment">// ç¡®è®¤ä»£ç æ°¸è¿œæ‰§è¡Œä¸åˆ°</span>
    }
}
</code></pre>
<h3 data-id="heading-20">å››ã€è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-21">4.1 è®¾ç½®åˆç†çš„è¶…æ—¶æœºåˆ¶</h4>
<h5 data-id="heading-22">4.1.1 ä½¿ç”¨è¶…æ—¶æ§åˆ¶çš„æ¶ˆè´¹è€…</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TimeoutAwareConsumer</span> {
    <span class="hljs-meta">@RabbitListener(queues = "timeout_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleWithTimeout</span><span class="hljs-params">(Message message, Channel channel)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">long</span> <span class="hljs-variable">deliveryTag</span> <span class="hljs-operator">=</span> message.getMessageProperties().getDeliveryTag();
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
        
        Future&lt;?&gt; future = executor.submit(() -&gt; {
            processMessage(message); <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†</span>
        });
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è®¾ç½®30ç§’è¶…æ—¶</span>
            future.get(<span class="hljs-number">30</span>, TimeUnit.SECONDS);
            channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
            logger.info(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†æˆåŠŸ"</span>);
            
        } <span class="hljs-keyword">catch</span> (TimeoutException e) {
            future.cancel(<span class="hljs-literal">true</span>); <span class="hljs-comment">// å–æ¶ˆä»»åŠ¡</span>
            <span class="hljs-comment">// è¶…æ—¶åæ‹’ç»æ¶ˆæ¯å¹¶é‡æ–°å…¥é˜Ÿ</span>
            channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
            logger.warn(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†è¶…æ—¶ï¼Œå·²é‡æ–°å…¥é˜Ÿ"</span>);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
            logger.error(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†å¤±è´¥ï¼Œå·²ä¸¢å¼ƒ"</span>, e);
            
        } <span class="hljs-keyword">finally</span> {
            executor.shutdown();
        }
    }
}
</code></pre>
<h5 data-id="heading-23">4.1.2 é…ç½® HTTP å®¢æˆ·ç«¯è¶…æ—¶</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestTemplateConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>(getClientHttpRequestFactory());
    }
    
    <span class="hljs-keyword">private</span> ClientHttpRequestFactory <span class="hljs-title function_">getClientHttpRequestFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">HttpComponentsClientHttpRequestFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpComponentsClientHttpRequestFactory</span>();
        factory.setConnectTimeout(<span class="hljs-number">5000</span>);    <span class="hljs-comment">// 5ç§’è¿æ¥è¶…æ—¶</span>
        factory.setReadTimeout(<span class="hljs-number">30000</span>);      <span class="hljs-comment">// 30ç§’è¯»å–è¶…æ—¶</span>
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h4 data-id="heading-24">4.2 ä¼˜åŒ– RabbitMQ é…ç½®</h4>
<h5 data-id="heading-25">4.2.1 åˆç†çš„ Prefetch Count</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedRabbitConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SimpleRabbitListenerContainerFactory <span class="hljs-title function_">containerFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">SimpleRabbitListenerContainerFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleRabbitListenerContainerFactory</span>();
        
        <span class="hljs-comment">// æ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è®¾ç½®åˆé€‚çš„é¢„å–æ•°é‡</span>
        factory.setPrefetchCount(<span class="hljs-number">3</span>); <span class="hljs-comment">// è¾ƒå°çš„å€¼é¿å…æ¶ˆæ¯å †ç§¯</span>
        factory.setConcurrentConsumers(<span class="hljs-number">2</span>); <span class="hljs-comment">// åˆé€‚çš„å¹¶å‘æ•°</span>
        factory.setMaxConcurrentConsumers(<span class="hljs-number">5</span>);
        
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h5 data-id="heading-26">4.2.2 å¿ƒè·³æ£€æµ‹é…ç½®</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeartbeatConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> CachingConnectionFactory <span class="hljs-title function_">connectionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-type">CachingConnectionFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CachingConnectionFactory</span>();
        factory.setHost(<span class="hljs-string">"localhost"</span>);
        factory.setRequestedHeartBeat(<span class="hljs-number">30</span>); <span class="hljs-comment">// 30ç§’å¿ƒè·³æ£€æµ‹</span>
        
        <span class="hljs-comment">// å¦‚æœæ¶ˆè´¹è€…ä¸å“åº”å¿ƒè·³ï¼Œè¿æ¥ä¼šè¢«å…³é—­</span>
        <span class="hljs-comment">// Unacked æ¶ˆæ¯ä¼šè‡ªåŠ¨é‡æ–°å…¥é˜Ÿ</span>
        <span class="hljs-keyword">return</span> factory;
    }
}
</code></pre>
<h4 data-id="heading-27">4.3 å®ç°å¥å£®çš„é”™è¯¯å¤„ç†</h4>
<h5 data-id="heading-28">4.3.1 å®Œæ•´çš„å¼‚å¸¸å¤„ç†</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RobustConsumer</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_RETRY_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
    
    <span class="hljs-meta">@RabbitListener(queues = "robust_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">long</span> <span class="hljs-variable">deliveryTag</span> <span class="hljs-operator">=</span> message.getMessageProperties().getDeliveryTag();
        <span class="hljs-type">MessageProperties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> message.getMessageProperties();
        Map&lt;String, Object&gt; headers = properties.getHeaders();
        
        <span class="hljs-comment">// è·å–é‡è¯•æ¬¡æ•°</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">retryCount</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) headers.getOrDefault(<span class="hljs-string">"retry-count"</span>, <span class="hljs-number">0</span>);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†é€»è¾‘</span>
            processBusiness(message);
            
            <span class="hljs-comment">// å¤„ç†æˆåŠŸï¼Œç¡®è®¤æ¶ˆæ¯</span>
            channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
            logger.info(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†æˆåŠŸ"</span>);
            
        } <span class="hljs-keyword">catch</span> (TemporaryException e) {
            <span class="hljs-comment">// ä¸´æ—¶å¼‚å¸¸ï¼Œæ ¹æ®é‡è¯•æ¬¡æ•°å†³å®šæ˜¯å¦é‡æ–°å…¥é˜Ÿ</span>
            <span class="hljs-keyword">if</span> (retryCount &lt; MAX_RETRY_COUNT) {
                headers.put(<span class="hljs-string">"retry-count"</span>, retryCount + <span class="hljs-number">1</span>);
                channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>); <span class="hljs-comment">// é‡æ–°å…¥é˜Ÿ</span>
                logger.warn(<span class="hljs-string">"æ¶ˆæ¯å¤„ç†ä¸´æ—¶å¤±è´¥ï¼Œç¬¬{}æ¬¡é‡è¯•"</span>, retryCount + <span class="hljs-number">1</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// é‡è¯•æ¬¡æ•°è¶…é™ï¼Œè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—</span>
                channel.basicNack(deliveryTag, <span class="hljs-literal">false</span>, <span class="hljs-literal">false</span>);
                logger.error(<span class="hljs-string">"æ¶ˆæ¯é‡è¯•æ¬¡æ•°è¶…é™ï¼Œå·²è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—"</span>);
            }
            
        } <span class="hljs-keyword">catch</span> (PermanentException e) {
            <span class="hljs-comment">// æ°¸ä¹…å¼‚å¸¸ï¼Œç›´æ¥ç¡®è®¤ï¼ˆé¿å…é‡å¤æ¶ˆè´¹ï¼‰</span>
            channel.basicAck(deliveryTag, <span class="hljs-literal">false</span>);
            logger.error(<span class="hljs-string">"æ¶ˆæ¯å­˜åœ¨æ°¸ä¹…æ€§é”™è¯¯ï¼Œå·²ç¡®è®¤å¹¶ä¸¢å¼ƒ"</span>, e);
        }
    }
}
</code></pre>
<h5 data-id="heading-29">4.3.2 æ­»ä¿¡é˜Ÿåˆ—é…ç½®</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeadLetterConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">mainQueue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> QueueBuilder.durable(<span class="hljs-string">"main_queue"</span>)
                .deadLetterExchange(<span class="hljs-string">"dlx_exchange"</span>)
                .deadLetterRoutingKey(<span class="hljs-string">"dlq_routing_key"</span>)
                .ttl(<span class="hljs-number">60000</span>) <span class="hljs-comment">// 60ç§’TTL</span>
                .build();
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Queue <span class="hljs-title function_">deadLetterQueue</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Queue</span>(<span class="hljs-string">"dead_letter_queue"</span>, <span class="hljs-literal">true</span>);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DirectExchange <span class="hljs-title function_">dlxExchange</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DirectExchange</span>(<span class="hljs-string">"dlx_exchange"</span>);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Binding <span class="hljs-title function_">dlxBinding</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> BindingBuilder.bind(deadLetterQueue())
                .to(dlxExchange())
                .with(<span class="hljs-string">"dlq_routing_key"</span>);
    }
}
</code></pre>
<h4 data-id="heading-30">4.4 ç›‘æ§å’Œå‘Šè­¦</h4>
<h5 data-id="heading-31">4.4.1 Unacked æ¶ˆæ¯ç›‘æ§</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RabbitMQMonitor</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RabbitAdmin rabbitAdmin;
    
    <span class="hljs-meta">@Scheduled(fixedRate = 30000)</span> <span class="hljs-comment">// æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorUnackedMessages</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Properties</span> <span class="hljs-variable">queueProps</span> <span class="hljs-operator">=</span> rabbitAdmin.getQueueProperties(<span class="hljs-string">"your_queue"</span>);
        <span class="hljs-keyword">if</span> (queueProps != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">int</span> <span class="hljs-variable">unackedCount</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) queueProps.get(<span class="hljs-string">"QUEUE_MESSAGE_UNACKNOWLEDGED"</span>);
            <span class="hljs-type">int</span> <span class="hljs-variable">readyCount</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) queueProps.get(<span class="hljs-string">"QUEUE_MESSAGE_COUNT"</span>);
            
            <span class="hljs-comment">// å‘Šè­¦æ¡ä»¶</span>
            <span class="hljs-keyword">if</span> (unackedCount &gt; <span class="hljs-number">10</span>) {
                logger.warn(<span class="hljs-string">"Unacked æ¶ˆæ¯è¿‡å¤š: {}"</span>, unackedCount);
                sendAlert(<span class="hljs-string">"RabbitMQ Unacked æ¶ˆæ¯å‘Šè­¦"</span>, 
                         String.format(<span class="hljs-string">"å½“å‰Unackedæ¶ˆæ¯: %d, Readyæ¶ˆæ¯: %d"</span>, 
                                     unackedCount, readyCount));
            }
            
            <span class="hljs-comment">// é•¿æœŸä¸å‡å°‘çš„ Unacked æ¶ˆæ¯</span>
            <span class="hljs-keyword">if</span> (unackedCount &gt; <span class="hljs-number">0</span>) {
                checkStuckMessages();
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkStuckMessages</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰é•¿æ—¶é—´å¤„äº Unacked çŠ¶æ€çš„æ¶ˆæ¯</span>
        <span class="hljs-comment">// å¯ä»¥é€šè¿‡è®°å½•æ¶ˆæ¯è¿›å…¥ Unacked çŠ¶æ€çš„æ—¶é—´æ¥åˆ¤æ–­</span>
    }
}
</code></pre>
<h5 data-id="heading-32">4.4.2 æ¶ˆè´¹è€…å¥åº·æ£€æŸ¥</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsumerHealthCheck</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">lastProcessTime</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(System.currentTimeMillis());
    
    <span class="hljs-meta">@RabbitListener(queues = "health_check_queue")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message message, Channel channel)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">try</span> {
            processMessage(message);
            channel.basicAck(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>);
            lastProcessTime.set(System.currentTimeMillis());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            channel.basicNack(message.getMessageProperties().getDeliveryTag(), <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
        }
    }
    
    <span class="hljs-keyword">public</span> Health <span class="hljs-title function_">health</span><span class="hljs-params">()</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">lastTime</span> <span class="hljs-operator">=</span> lastProcessTime.get();
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        
        <span class="hljs-keyword">if</span> (currentTime - lastTime &gt; <span class="hljs-number">300000</span>) { <span class="hljs-comment">// 5åˆ†é’Ÿæ— æ´»åŠ¨</span>
            <span class="hljs-keyword">return</span> Health.down()
                    .withDetail(<span class="hljs-string">"lastProcessTime"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(lastTime))
                    .withDetail(<span class="hljs-string">"inactiveDuration"</span>, currentTime - lastTime)
                    .build();
        }
        
        <span class="hljs-keyword">return</span> Health.up()
                .withDetail(<span class="hljs-string">"lastProcessTime"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(lastTime))
                .build();
    }
}
</code></pre>
<h3 data-id="heading-33">äº”ã€ç´§æ€¥å¤„ç†æªæ–½</h3>
<h4 data-id="heading-34">5.1 é‡å¯æ¶ˆè´¹è€…åº”ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å½“å‘ç°å¤§é‡ Unacked æ¶ˆæ¯ä¸å‡å°‘æ—¶çš„ç´§æ€¥å¤„ç†</span>
<span class="hljs-comment"># 1. åœæ­¢æ¶ˆè´¹è€…</span>
./stop-consumer.sh

<span class="hljs-comment"># 2. ç­‰å¾…å‡ ç§’è®©è¿æ¥å®Œå…¨å…³é—­</span>
<span class="hljs-built_in">sleep</span> 5

<span class="hljs-comment"># 3. é‡æ–°å¯åŠ¨æ¶ˆè´¹è€…</span>
./start-consumer.sh

<span class="hljs-comment"># è¿™æ ·æ‰€æœ‰ Unacked æ¶ˆæ¯ä¼šé‡æ–°å˜ä¸º Ready çŠ¶æ€</span>
</code></pre>
<h4 data-id="heading-35">5.2 é€šè¿‡ç®¡ç†ç•Œé¢å¤„ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€šè¿‡ RabbitMQ HTTP API å¼ºåˆ¶å–æ¶ˆæ¶ˆè´¹è€…è¿æ¥</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmergencyHandler</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">forceCloseConnection</span><span class="hljs-params">(String connectionName)</span> {
        <span class="hljs-comment">// è°ƒç”¨ RabbitMQ ç®¡ç†APIå…³é—­æŒ‡å®šè¿æ¥</span>
        <span class="hljs-comment">// è¿™æ ·è¯¥è¿æ¥ä¸‹çš„æ‰€æœ‰ Unacked æ¶ˆæ¯ä¼šé‡æ–°å…¥é˜Ÿ</span>
    }
}
</code></pre>
<h3 data-id="heading-36">å…­ã€æ€»ç»“</h3>
<p>Unacked æ¶ˆæ¯æ²¡æœ‰é‡æ–°å…¥é˜Ÿé€šå¸¸è¡¨æ˜æ¶ˆè´¹è€…å¤„äº"å‡æ­»"çŠ¶æ€â€”â€”è¿æ¥ä¿æŒæ´»è·ƒä½†å®é™…å·²æ— æ³•æ­£å¸¸å¤„ç†æ¶ˆæ¯ã€‚è¿™ç§æƒ…å†µæ¯”æ¶ˆè´¹è€…å®Œå…¨å´©æºƒæ›´å±é™©ï¼Œå› ä¸º RabbitMQ ä¼šä¸€ç›´ç­‰å¾…ç¡®è®¤ã€‚
<strong>å…³é”®é¢„é˜²æªæ–½ï¼š</strong></p>
<ul>
<li>è®¾ç½®åˆç†çš„è¶…æ—¶æœºåˆ¶Â - é¿å…æ— é™æœŸç­‰å¾…</li>
<li>ä¼˜åŒ– Prefetch CountÂ - é¿å…è¿‡å¤šæ¶ˆæ¯è¢«å•ä¸ªæ¶ˆè´¹è€…å ç”¨</li>
<li>å®Œå–„å¼‚å¸¸å¤„ç†Â - ç¡®ä¿æ‰€æœ‰è·¯å¾„éƒ½æœ‰ç¡®è®¤æ“ä½œ</li>
<li>å®æ–½ç›‘æ§å‘Šè­¦Â - åŠæ—¶å‘ç°å¤„ç†åœæ»é…</li>
<li>ç½®æ­»ä¿¡é˜Ÿåˆ—Â - å¤„ç†æ— æ³•æ­£å¸¸æ¶ˆè´¹çš„æ¶ˆæ¯</li>
</ul>
<p>é€šè¿‡ä»¥ä¸Šæªæ–½ï¼Œå¯ä»¥å¤§å¤§é™ä½ Unacked æ¶ˆæ¯å †ç§¯çš„é£é™©ï¼Œæ„å»ºæ›´åŠ å¥å£®å¯é çš„æ¶ˆæ¯å¤„ç†ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ThreadLocalï¼šä»åŸç†åˆ°æ¶æ„å®è·µçš„å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7570604028633645091</link>    <guid>https://juejin.cn/post/7570604028633645091</guid>    <pubDate>2025-11-10T06:18:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570604028633645091" data-draft-id="7570604028633612323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ThreadLocalï¼šä»åŸç†åˆ°æ¶æ„å®è·µçš„å…¨é¢è§£æ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-10T06:18:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Homeey"/> <meta itemprop="url" content="https://juejin.cn/user/413072103576493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ThreadLocalï¼šä»åŸç†åˆ°æ¶æ„å®è·µçš„å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/413072103576493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Homeey
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:18:52.000Z" title="Mon Nov 10 2025 06:18:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šå¤šçº¿ç¨‹ä¸–ç•Œé‡Œçš„å˜é‡éš”ç¦»è‰ºæœ¯</h2>
<p>åœ¨Javaå¹¶å‘ç¼–ç¨‹çš„èˆå°ä¸Šï¼Œçº¿ç¨‹å®‰å…¨å§‹ç»ˆæ˜¯å¼€å‘è€…å¿…é¡»è·¨è¶Šçš„é¸¿æ²Ÿã€‚å½“å¤šä¸ªçº¿ç¨‹å…±äº«èµ„æºæ—¶ï¼ŒåŒæ­¥æœºåˆ¶å¾€å¾€å¸¦æ¥æ€§èƒ½æŸè€—ï¼Œè€ŒThreadLocalçš„å‡ºç°ä¸ºæˆ‘ä»¬æä¾›äº†å¦ä¸€ç§æ€è·¯â€”â€”<strong>é€šè¿‡å˜é‡çš„çº¿ç¨‹ç§æœ‰åŒ–å®ç°çº¿ç¨‹å®‰å…¨</strong>ã€‚è¿™ç§æœºåˆ¶åœ¨Springäº‹åŠ¡ç®¡ç†ã€MyBatisä¼šè¯ç®¡ç†ç­‰æ¡†æ¶ä¸­è¢«å¹¿æ³›åº”ç”¨ï¼Œæˆä¸ºæ„å»ºé«˜å¹¶å‘ç³»ç»Ÿçš„éšå½¢åŸºçŸ³ã€‚ä½†ä½ çœŸçš„äº†è§£ThreadLocalèƒŒåçš„å­˜å‚¨å¥¥ç§˜å—ï¼Ÿå½“çº¿ç¨‹æ± é‡ä¸ŠThreadLocalæ—¶ä¸ºä½•ä¼šå‡ºç°æ•°æ®é”™ä¹±ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä»æºç å®ç°åˆ°æ¶æ„è®¾è®¡ï¼Œå…¨é¢æŒæ¡ThreadLocalçš„æŠ€æœ¯ç²¾é«“ä¸å®æˆ˜æ™ºæ…§ã€‚</p>
<h2 data-id="heading-1">ThreadLocalçš„æ ¸å¿ƒåŸç†ï¼šçº¿ç¨‹ç§æœ‰å˜é‡çš„å­˜å‚¨å“²å­¦</h2>
<h3 data-id="heading-2">çº¿ç¨‹å±€éƒ¨å˜é‡çš„å­˜å‚¨æœºåˆ¶</h3>
<p>æ¯ä¸ªThreadå¯¹è±¡å†…éƒ¨éƒ½ç»´æŠ¤ç€ä¸€ä¸ªThreadLocalMapå®ä¾‹ï¼Œè¿™ä¸ªç‰¹æ®Šçš„Mapæ­£æ˜¯çº¿ç¨‹ç§æœ‰å˜é‡çš„"ç§˜å¯†ä»“åº“"ã€‚ä¸ä¼ ç»Ÿé›†åˆä¸åŒï¼Œ<strong>ThreadLocalMapæ˜¯ä»¥ThreadLocalå®ä¾‹ä¸ºé”®ã€ä»¥ç›®æ ‡å˜é‡ä¸ºå€¼</strong>çš„å­˜å‚¨ç»“æ„ã€‚å½“æˆ‘ä»¬é€šè¿‡threadLocal.set(value)æ–¹æ³•å­˜å‚¨å˜é‡æ—¶ï¼Œå®é™…ä¸Šæ˜¯å°†æ•°æ®å­˜å…¥å½“å‰çº¿ç¨‹çš„ThreadLocalMapä¸­ï¼›è€ŒthreadLocal.get()åˆ™æ˜¯ä»å½“å‰çº¿ç¨‹çš„Mapä¸­å–å‡ºå¯¹åº”çš„å€¼ã€‚è¿™ç§è®¾è®¡ä½¿å¾—æ¯ä¸ªçº¿ç¨‹éƒ½æ‹¥æœ‰ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œè‡ªç„¶é¿å…äº†çº¿ç¨‹é—´çš„ç«äº‰é—®é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acbf82a8e0bb4621bb4c3b33952f9910~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9tZWV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360331&amp;x-signature=FoNouySj%2Bc0TgEktTbayDyQU%2FT0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">JVMå†…å­˜æ¨¡å‹è§†è§’ä¸‹çš„ThreadLocal</h3>
<p>ä»JVMå†…å­˜æ¨¡å‹æ¥çœ‹ï¼ŒThreadLocalæ¶‰åŠä¸‰ä¸ªå…³é”®è§’è‰²ï¼š</p>
<ul>
<li><strong>ThreadLocalå®ä¾‹</strong>ï¼šä½œä¸ºé™æ€å˜é‡å­˜åœ¨äºæ–¹æ³•åŒº</li>
<li><strong>Threadå¯¹è±¡</strong>ï¼šå­˜åœ¨äºå †å†…å­˜ä¸­ï¼Œå…¶threadLocalså­—æ®µå¼•ç”¨ThreadLocalMap</li>
<li><strong>ThreadLocalMap</strong>ï¼šæ¯ä¸ªçº¿ç¨‹ç‹¬æœ‰çš„å“ˆå¸Œè¡¨ï¼Œé”®ä¸ºThreadLocalå®ä¾‹çš„å¼±å¼•ç”¨</li>
</ul>
<p>è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„<strong>å¼±å¼•ç”¨(WeakReference)</strong> çš„è®¾è®¡ã€‚ThreadLocalMapçš„Entryç»§æ‰¿è‡ªWeakReferenceï¼Œå½“ThreadLocalå®ä¾‹ä¸å†è¢«å¤–éƒ¨å¼ºå¼•ç”¨æ—¶ï¼Œå³ä½¿Mapä¸­ä»æœ‰Entryï¼Œè¯¥é”®ä¹Ÿä¼šè¢«GCå›æ”¶ã€‚è¿™ç§æœºåˆ¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†å†…å­˜æ³„æ¼é£é™©ï¼Œä½†å¦‚æœvalueæ˜¯å¼ºå¼•ç”¨ä¸”æœªæ‰‹åŠ¨åˆ é™¤ï¼Œä»å¯èƒ½å¯¼è‡´"é”®æ¶ˆå¤±ä½†å€¼æ®‹ç•™"çš„å†…å­˜æ³„æ¼é—®é¢˜ã€‚</p>
<h2 data-id="heading-4">ThreadLocalçš„å®ç°ç»†èŠ‚ï¼šThreadLocalMapçš„ç²¾å¦™è®¾è®¡</h2>
<h3 data-id="heading-5">ThreadLocalMapçš„å†…éƒ¨ç»“æ„</h3>
<p>ThreadLocalMapæ˜¯JDKç²¾å¿ƒè®¾è®¡çš„å®šåˆ¶åŒ–å“ˆå¸Œè¡¨ï¼Œä¸HashMapç›¸æ¯”æœ‰è¯¸å¤šç‰¹æ®Šä¹‹å¤„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Entry</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WeakReference</span>&lt;ThreadLocal&lt;?&gt;&gt; {
    Object value;
    Entry(ThreadLocal&lt;?&gt; k, Object v) {
      <span class="hljs-built_in">super</span>(k);
      value = v;
    }
}

<span class="hljs-comment">// åˆå§‹å®¹é‡å¿…é¡»æ˜¯2çš„å¹‚</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">INITIAL_CAPACITY</span> <span class="hljs-operator">=</span> <span class="hljs-number">16</span>;
<span class="hljs-comment">// å­˜å‚¨Entryçš„æ•°ç»„</span>
<span class="hljs-keyword">private</span> Entry[] table;
<span class="hljs-comment">// å…ƒç´ æ•°é‡</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-comment">// æ‰©å®¹é˜ˆå€¼ï¼Œé»˜è®¤ä¸ºå®¹é‡çš„2/3</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> threshold;
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d01f925e98fa4d468bf9b047283c29ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9tZWV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360331&amp;x-signature=7qo5pOxkQoj4j2o3H9tAqdZ9En0%3D" alt="" loading="lazy"/></p>
<p>ä¸HashMapçš„æ‹‰é“¾æ³•è§£å†³å“ˆå¸Œå†²çªä¸åŒï¼Œ<strong>ThreadLocalMapé‡‡ç”¨å¼€æ”¾åœ°å€æ³•</strong>â€”â€”å½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œä¼šå°è¯•ä¸‹ä¸€ä¸ªç©ºé—²çš„æ•°ç»„ä½ç½®ã€‚è¿™ç§è®¾è®¡è™½ç„¶èŠ‚çœç©ºé—´ï¼Œä½†åœ¨é«˜å†²çªåœºæ™¯ä¸‹æ€§èƒ½å¯èƒ½ä¸‹é™ï¼Œä¸è¿‡è€ƒè™‘åˆ°å•ä¸ªçº¿ç¨‹ä¸­ThreadLocalå®ä¾‹é€šå¸¸ä¸ä¼šè¿‡å¤šï¼Œè¿™ç§æƒè¡¡æ˜¯åˆç†çš„ã€‚</p>
<h3 data-id="heading-6">ThreadLocalMapçš„åˆå§‹åŒ–ä¸æ‰©å®¹æœºåˆ¶</h3>
<p>ThreadLocalMapçš„åˆå§‹åŒ–æ˜¯<strong>å»¶è¿ŸåŠ è½½</strong>çš„ï¼Œåªæœ‰å½“ç¬¬ä¸€æ¬¡è°ƒç”¨set()æˆ–get()æ–¹æ³•æ—¶æ‰ä¼šåˆ›å»ºå®ä¾‹ã€‚å…¶æ‰©å®¹æœºåˆ¶ä¹Ÿé¢‡å…·ç‰¹è‰²ï¼š</p>
<ul>
<li>å½“å…ƒç´ æ•°é‡è¶…è¿‡é˜ˆå€¼ï¼ˆå®¹é‡çš„2/3ï¼‰æ—¶è§¦å‘æ‰©å®¹</li>
<li>æ–°å®¹é‡ä¸ºåŸå®¹é‡çš„2å€ï¼ˆä¿æŒ2çš„å¹‚ç‰¹æ€§ï¼‰</li>
<li>æ‰©å®¹è¿‡ç¨‹ä¸­ä¼šé‡æ–°è®¡ç®—æ‰€æœ‰Entryçš„å“ˆå¸Œä½ç½®ï¼Œå¹¶æ¸…ç†è¿‡æœŸEntryï¼ˆé”®ä¸ºnullçš„Entryï¼‰</li>
</ul>
<p>ä»¥ä¸‹æ˜¯æ‰©å®¹æ ¸å¿ƒä»£ç çš„ç®€åŒ–ç‰ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resize</span><span class="hljs-params">()</span> {
    Entry[] oldTab = table;
    <span class="hljs-type">int</span> <span class="hljs-variable">oldLen</span> <span class="hljs-operator">=</span> oldTab.length;
    <span class="hljs-type">int</span> <span class="hljs-variable">newLen</span> <span class="hljs-operator">=</span> oldLen * <span class="hljs-number">2</span>;
    Entry[] newTab = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Entry</span>[newLen];
    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; oldLen; ++j) {
        <span class="hljs-type">Entry</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> oldTab[j];
        <span class="hljs-keyword">if</span> (e != <span class="hljs-literal">null</span>) {
            ThreadLocal&lt;?&gt; k = e.get();
            <span class="hljs-keyword">if</span> (k == <span class="hljs-literal">null</span>) {
                e.value = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å¸®åŠ©GC</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> k.threadLocalHashCode &amp; (newLen - <span class="hljs-number">1</span>);
                <span class="hljs-keyword">while</span> (newTab[h] != <span class="hljs-literal">null</span>)
                h = nextIndex(h, newLen);
                newTab[h] = e;
                count++;
            }
        }
    }

    setThreshold(newLen);
    size = count;
    table = newTab;
}
</code></pre>
<h3 data-id="heading-7">å˜é‡å­˜å–çš„å®Œæ•´æµç¨‹è§£æ</h3>
<p><strong>set()æ–¹æ³•çš„æ‰§è¡Œé€»è¾‘</strong>ï¼š</p>
<ol>
<li>è·å–å½“å‰çº¿ç¨‹çš„ThreadLocalMap</li>
<li>è‹¥Mapä¸å­˜åœ¨åˆ™åˆ›å»ºï¼ˆè°ƒç”¨createMap()ï¼‰</li>
<li>è®¡ç®—ThreadLocalå®ä¾‹çš„å“ˆå¸Œç </li>
<li>éå†Entryæ•°ç»„å¯»æ‰¾åˆé€‚ä½ç½®ï¼ˆå¤„ç†å“ˆå¸Œå†²çªï¼‰</li>
<li>æ›¿æ¢å·²æœ‰Entryæˆ–æ–°å¢Entry</li>
<li>æ¸…ç†è¿‡æœŸEntryå¹¶æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹</li>
</ol>
<p><strong>get()æ–¹æ³•çš„æ‰§è¡Œé€»è¾‘</strong>ï¼š</p>
<ol>
<li>è·å–å½“å‰çº¿ç¨‹çš„ThreadLocalMap</li>
<li>è‹¥Mapä¸å­˜åœ¨åˆ™åˆå§‹åŒ–å¹¶è¿”å›åˆå§‹å€¼ï¼ˆé€šè¿‡initialValue()ï¼‰</li>
<li>è®¡ç®—å“ˆå¸Œç å¹¶æŸ¥æ‰¾å¯¹åº”Entry</li>
<li>è‹¥æ‰¾åˆ°æœ‰æ•ˆEntryåˆ™è¿”å›å€¼ï¼Œå¦åˆ™è¿”å›åˆå§‹å€¼</li>
<li>æŸ¥æ‰¾è¿‡ç¨‹ä¸­ä¼šé¡ºä¾¿æ¸…ç†è¿‡æœŸEntry</li>
</ol>
<p>è¿™ç§"<strong>æ‡’åŠ è½½+æŒ‰éœ€åˆå§‹åŒ–</strong>"çš„ç­–ç•¥ï¼Œæ—¢èŠ‚çœäº†å†…å­˜ç©ºé—´ï¼Œåˆä¿è¯äº†çº¿ç¨‹é¦–æ¬¡è®¿é—®æ—¶çš„æ­£ç¡®æ€§ã€‚</p>
<h2 data-id="heading-8">ThreadLocalçš„å…¸å‹åº”ç”¨åœºæ™¯ä¸æ¶æ„ä»·å€¼</h2>
<h3 data-id="heading-9">æ•°æ®åº“è¿æ¥ç®¡ç†ï¼šäº‹åŠ¡éš”ç¦»çš„åŸºçŸ³</h3>
<p>åœ¨JDBCç¼–ç¨‹ä¸­ï¼Œä¸€ä¸ªæ•°æ®åº“è¿æ¥ï¼ˆConnectionï¼‰é€šå¸¸ä¸èƒ½è¢«å¤šçº¿ç¨‹å…±äº«ã€‚ThreadLocalå®Œç¾è§£å†³äº†è¿™ä¸€é—®é¢˜â€”â€”<strong>ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…ç‹¬ç«‹çš„è¿æ¥å®ä¾‹</strong>ï¼Œç¡®ä¿äº‹åŠ¡æ“ä½œçš„åŸå­æ€§ã€‚Springæ¡†æ¶çš„TransactionSynchronizationManageræ­£æ˜¯é‡‡ç”¨è¿™ç§æœºåˆ¶ï¼Œå°†æ•°æ®åº“è¿æ¥ä¸å½“å‰çº¿ç¨‹ç»‘å®šï¼Œå®ç°äº†å£°æ˜å¼äº‹åŠ¡çš„ä¼˜é›…å°è£…ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionHolder</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Connection&gt; connectionHolder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> connectionHolder.get();
        <span class="hljs-keyword">if</span> (conn == <span class="hljs-literal">null</span>) {
            conn = DriverManager.getConnection(DB_URL, USER, PASS);
            connectionHolder.set(conn);
        }
        <span class="hljs-keyword">return</span> conn;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">releaseConnection</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> connectionHolder.get();
        <span class="hljs-keyword">if</span> (conn != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">try</span> {
                conn.close();
            } <span class="hljs-keyword">catch</span> (SQLException e) {
                <span class="hljs-comment">// å¼‚å¸¸å¤„ç†</span>
            }
            connectionHolder.remove(); <span class="hljs-comment">// å¿…é¡»æ¸…ç†ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-10">åˆ†å¸ƒå¼è¿½è¸ªï¼šè·¨æœåŠ¡è°ƒç”¨çš„ä¸Šä¸‹æ–‡ä¼ é€’</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œåˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼ˆå¦‚Zipkinã€SkyWalkingï¼‰éœ€è¦åœ¨è·¨æœåŠ¡è°ƒç”¨æ—¶ä¼ é€’è¿½è¸ªä¸Šä¸‹æ–‡ã€‚ThreadLocalå¯ä»¥<strong>æš‚å­˜å½“å‰çº¿ç¨‹çš„è¿½è¸ªä¿¡æ¯</strong>ï¼ˆå¦‚TraceIdã€SpanIdï¼‰ï¼Œé€šè¿‡æ‹¦æˆªå™¨åœ¨æœåŠ¡è°ƒç”¨å‰åè‡ªåŠ¨ä¼ é€’è¿™äº›ä¿¡æ¯ã€‚è¿™ç§æ–¹å¼é¿å…äº†åœ¨æ–¹æ³•å‚æ•°ä¸­æ˜¾å¼ä¼ é€’ä¸Šä¸‹æ–‡ï¼Œæå¤§ç®€åŒ–äº†ä»£ç å®ç°ã€‚</p>
<h3 data-id="heading-11">çŠ¶æ€ç®¡ç†ï¼šæ— çŠ¶æ€æœåŠ¡çš„çŠ¶æ€æŒæœ‰æ–¹æ¡ˆ</h3>
<p>RESTful APIè®¾è®¡å€¡å¯¼æœåŠ¡çš„æ— çŠ¶æ€æ€§ï¼Œä½†å®é™…ä¸šåŠ¡ä¸­å¾€å¾€éœ€è¦ç»´æŠ¤ç”¨æˆ·ä¼šè¯ã€è¯·æ±‚å¤´ç­‰çŠ¶æ€ä¿¡æ¯ã€‚ThreadLocalæä¾›äº†<strong>è¯·æ±‚çº§åˆ«çš„çŠ¶æ€å­˜å‚¨</strong>èƒ½åŠ›ï¼Œé…åˆServletçš„Filteræœºåˆ¶ï¼Œå¯ä»¥å°†ç”¨æˆ·è®¤è¯ä¿¡æ¯ã€è¯·æ±‚å‚æ•°ç­‰ä¸Šä¸‹æ–‡æ•°æ®ç»‘å®šåˆ°å½“å‰å¤„ç†çº¿ç¨‹ï¼Œåœ¨æ•´ä¸ªè¯·æ±‚ç”Ÿå‘½å‘¨æœŸå†…éšæ—¶è®¿é—®ã€‚Spring Securityçš„SecurityContextHolderå°±æ˜¯å…¸å‹åº”ç”¨æ¡ˆä¾‹ã€‚</p>
<h2 data-id="heading-12">ThreadLocalçš„å±€é™æ€§ï¼šéšè—åœ¨ä¾¿åˆ©èƒŒåçš„é™·é˜±</h2>
<h3 data-id="heading-13">çº¿ç¨‹æ± ç¯å¢ƒä¸‹çš„æ•°æ®æ±¡æŸ“é£é™©</h3>
<p>çº¿ç¨‹æ± çš„çº¿ç¨‹å¤ç”¨ç‰¹æ€§ä¸ThreadLocalçš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å­˜åœ¨å¤©ç„¶çŸ›ç›¾ã€‚å½“çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œ<strong>ThreadLocalå˜é‡è‹¥æœªæ˜¾å¼æ¸…ç†</strong>ï¼Œåˆ™ä¸‹æ¬¡å¤ç”¨è¯¥çº¿ç¨‹æ—¶å¯èƒ½è¯»å–åˆ°æ—§æ•°æ®ï¼Œå¯¼è‡´éš¾ä»¥æ’æŸ¥çš„"å¹½çµæ•°æ®"é—®é¢˜ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„é”™è¯¯æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šçº¿ç¨‹æ± ç¯å¢ƒä¸‹æœªæ¸…ç†ThreadLocal</span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">1</span>);
ThreadLocal&lt;Integer&gt; threadLocal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();

executor.submit(() -&gt; {
    threadLocal.set(<span class="hljs-number">100</span>);
    System.out.println(<span class="hljs-string">"ä»»åŠ¡1: "</span> + threadLocal.get()); <span class="hljs-comment">// è¾“å‡º100</span>
});

executor.submit(() -&gt; {
    System.out.println(<span class="hljs-string">"ä»»åŠ¡2: "</span> + threadLocal.get()); <span class="hljs-comment">// å¯èƒ½è¾“å‡º100ï¼ˆæ•°æ®æ±¡æŸ“ï¼‰</span>
});

executor.shutdown();
</code></pre>
<h3 data-id="heading-14">å†…å­˜æ³„æ¼çš„æ½œåœ¨å¨èƒ</h3>
<p>å°½ç®¡ThreadLocalMapçš„Entryé”®æ˜¯å¼±å¼•ç”¨ï¼Œä½†<strong>å€¼ä»ç„¶æ˜¯å¼ºå¼•ç”¨</strong>ã€‚å¦‚æœThreadLocalå®ä¾‹è¢«å›æ”¶ï¼ˆå¦‚é™æ€å˜é‡è¢«å¸è½½ï¼‰ï¼Œè€Œçº¿ç¨‹ä»åœ¨è¿è¡Œï¼ˆå¦‚çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹ï¼‰ï¼Œåˆ™Entryçš„é”®ä¼šå˜ä¸ºnullï¼Œä½†å€¼å¯¹è±¡ä»è¢«Entryå¼ºå¼•ç”¨ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ­£ç¡®çš„åšæ³•æ˜¯åœ¨ä½¿ç”¨å®Œæ¯•åä¸»åŠ¨è°ƒç”¨remove()æ–¹æ³•æ¸…ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> {
    threadLocal.set(value);
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘å¤„ç†</span>
} <span class="hljs-keyword">finally</span> {
    threadLocal.remove(); <span class="hljs-comment">// ç¡®ä¿æ¸…é™¤ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
}
</code></pre>
<h3 data-id="heading-15">è·¨çº¿ç¨‹ä¼ é€’çš„å¤©ç„¶éšœç¢</h3>
<p>ThreadLocalè®¾è®¡çš„åˆè¡·å°±æ˜¯å˜é‡çš„çº¿ç¨‹éš”ç¦»ï¼Œå› æ­¤<strong>æ— æ³•ç›´æ¥åœ¨çˆ¶å­çº¿ç¨‹é—´ä¼ é€’æ•°æ®</strong>ã€‚åœ¨å¼‚æ­¥ç¼–ç¨‹åœºæ™¯ä¸‹ï¼ˆå¦‚CompletableFutureã€æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹ï¼‰ï¼Œä¸»çº¿ç¨‹è®¾ç½®çš„ThreadLocalå˜é‡åœ¨å­çº¿ç¨‹ä¸­æ— æ³•è®¿é—®ï¼Œè¿™æå¤§é™åˆ¶äº†å…¶åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„åº”ç”¨èŒƒå›´ã€‚</p>
<h2 data-id="heading-16">TTLï¼šThreadLocalçš„è·¨çº¿ç¨‹ä¼ é€’è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-17">TransmittableThreadLocalçš„è®¾è®¡ç†å¿µ</h3>
<p>é¢å¯¹ThreadLocalçš„è·¨çº¿ç¨‹ä¼ é€’éš¾é¢˜ï¼Œé˜¿é‡Œå·´å·´å¼€æºçš„TTLï¼ˆTransmittable ThreadLocalï¼‰æ¡†æ¶ç»™å‡ºäº†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯<strong>åœ¨ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± æ—¶ï¼Œè‡ªåŠ¨æ•è·å½“å‰çº¿ç¨‹çš„ThreadLocalçŠ¶æ€ï¼Œå¹¶åœ¨ä»»åŠ¡æ‰§è¡Œå‰å°†è¿™äº›çŠ¶æ€å¤åˆ¶åˆ°ç›®æ ‡çº¿ç¨‹</strong>ï¼Œæ‰§è¡Œå®Œæ¯•åå†æ¢å¤ç›®æ ‡çº¿ç¨‹çš„åŸæœ‰çŠ¶æ€ã€‚</p>
<h3 data-id="heading-18">TTLçš„å®ç°åŸç†æ·±åº¦å‰–æ</h3>
<p>TTLé€šè¿‡<strong>å­—èŠ‚ç å¢å¼ºæŠ€æœ¯</strong>å¯¹çº¿ç¨‹æ± çš„submit()ã€execute()ç­‰æ–¹æ³•è¿›è¡Œæ‹¦æˆªï¼Œåœ¨ä»»åŠ¡æäº¤å’Œæ‰§è¡Œçš„å…³é”®èŠ‚ç‚¹å®ŒæˆThreadLocalçŠ¶æ€çš„ä¼ é€’ï¼š</p>
<ol>
<li><strong>çŠ¶æ€æ•è·</strong>ï¼šå½“æäº¤ä»»åŠ¡æ—¶ï¼ŒTTLä¼šæ‰«æå½“å‰çº¿ç¨‹çš„æ‰€æœ‰TransmittableThreadLocalå®ä¾‹ï¼Œå°†å…¶é”®å€¼å¯¹å­˜å…¥ä¸´æ—¶å®¹å™¨</li>
<li><strong>çŠ¶æ€æ³¨å…¥</strong>ï¼šä»»åŠ¡åœ¨çº¿ç¨‹æ± æ‰§è¡Œå‰ï¼ŒTTLä¼šå°†æ•è·çš„çŠ¶æ€æ³¨å…¥åˆ°æ‰§è¡Œçº¿ç¨‹</li>
<li><strong>çŠ¶æ€æ¢å¤</strong>ï¼šä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼ŒTTLä¼šæ¢å¤æ‰§è¡Œçº¿ç¨‹åŸæœ‰çš„ThreadLocalçŠ¶æ€</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9d56909f0b14abd8d66da7168672833~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSG9tZWV5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763360331&amp;x-signature=RUxwMJOx%2F1xxQLZsP3UUFKzq4c4%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§æœºåˆ¶ç¡®ä¿äº†çº¿ç¨‹æ± ç¯å¢ƒä¸‹å˜é‡ä¼ é€’çš„é€æ˜æ€§ï¼ŒåŒæ—¶é¿å…äº†å¯¹ä¸šåŠ¡ä»£ç çš„ä¾µå…¥ã€‚TTLçš„æ ¸å¿ƒå®ç°ç±»TransmittableThreadLocalç»§æ‰¿è‡ªInheritableThreadLocalï¼Œä½†æ‰©å±•äº†çŠ¶æ€ä¼ é€’çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-19">TTLçš„å®æˆ˜åº”ç”¨ï¼šä»ä»£ç æ”¹é€ åˆ°æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-20">å¼•å…¥TTLä¾èµ–</h3>
<p>åœ¨Mavené¡¹ç›®ä¸­æ·»åŠ TTLä¾èµ–ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>transmittable-thread-local<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.14.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-21">çº¿ç¨‹æ± åœºæ™¯ä¸‹çš„TTLä½¿ç”¨ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯åœ¨çº¿ç¨‹æ± ä¸­ä¼ é€’ç”¨æˆ·ä¸Šä¸‹æ–‡çš„å…¸å‹æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å®šä¹‰å¯ä¼ é€’çš„ThreadLocal</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserContext</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> TransmittableThreadLocal&lt;UserInfo&gt; context = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransmittableThreadLocal</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(UserInfo userInfo)</span> {
        context.set(userInfo);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> UserInfo <span class="hljs-title function_">get</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> context.get();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {
        context.remove();
    }
}

<span class="hljs-comment">// 2. åˆ›å»ºå¢å¼ºçš„çº¿ç¨‹æ± </span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> TtlExecutors.getTtlExecutorService(
    Executors.newFixedThreadPool(<span class="hljs-number">5</span>)
);

<span class="hljs-comment">// 3. åœ¨ä¸»çº¿ç¨‹è®¾ç½®ä¸Šä¸‹æ–‡</span>
UserContext.set(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserInfo</span>(<span class="hljs-string">"1001"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>));

<span class="hljs-comment">// 4. æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± </span>
executor.submit(() -&gt; {
    <span class="hljs-comment">// å­çº¿ç¨‹ä¸­å¯ä»¥è·å–åˆ°ä¸»çº¿ç¨‹è®¾ç½®çš„ä¸Šä¸‹æ–‡</span>
    <span class="hljs-type">UserInfo</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> UserContext.get();
    System.out.println(<span class="hljs-string">"å­çº¿ç¨‹è·å–ç”¨æˆ·ä¿¡æ¯: "</span> + user.getName()); <span class="hljs-comment">// è¾“å‡º"å¼ ä¸‰"</span>
});

<span class="hljs-comment">// 5. æ¸…ç†ä¸Šä¸‹æ–‡</span>
UserContext.remove();
executor.shutdown();
</code></pre>
<h3 data-id="heading-22">ä¸Springæ¡†æ¶çš„é›†æˆæ–¹æ¡ˆ</h3>
<p>åœ¨Spring Bootåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰TaskExecutorå®ç°TTLçš„è‡ªåŠ¨é…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TtlTaskExecutorConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">taskExecutor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">5</span>);
        executor.setMaxPoolSize(<span class="hljs-number">10</span>);
        executor.setQueueCapacity(<span class="hljs-number">20</span>);
        executor.initialize();
        <span class="hljs-comment">// åŒ…è£…ä¸ºTTLå¢å¼ºçš„çº¿ç¨‹æ± </span>
        <span class="hljs-keyword">return</span> TtlExecutors.getTtlExecutor(executor);
    }
}
</code></pre>
<p>è¿™æ ·é…ç½®åï¼Œ@Asyncæ³¨è§£çš„å¼‚æ­¥æ–¹æ³•å°±èƒ½è‡ªåŠ¨ä¼ é€’TransmittableThreadLocalä¸­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-23">ThreadLocalä¸TTLçš„é€‰å‹ç­–ç•¥ï¼šæ¶æ„è§†è§’çš„æƒè¡¡</h2>
<h3 data-id="heading-24">æŠ€æœ¯ç‰¹æ€§å¯¹æ¯”åˆ†æ</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>ThreadLocal</th><th>TransmittableThreadLocal</th></tr></thead><tbody><tr><td>çº¿ç¨‹éš”ç¦»</td><td>âœ… å®Œç¾æ”¯æŒ</td><td>âœ… æ”¯æŒä¸”å¯é…ç½®ä¼ é€’è§„åˆ™</td></tr><tr><td>è·¨çº¿ç¨‹ä¼ é€’</td><td>âŒä¸æ”¯æŒ</td><td>âœ… åŸç”Ÿæ”¯æŒçº¿ç¨‹æ± ä¼ é€’</td></tr><tr><td>å†…å­˜å ç”¨</td><td>ä½</td><td>ä¸­ï¼ˆéœ€é¢å¤–å­˜å‚¨ä¼ é€’çŠ¶æ€ï¼‰</td></tr><tr><td>æ€§èƒ½æŸè€—</td><td>æä½</td><td>ä½ï¼ˆå­—èŠ‚ç å¢å¼ºå¸¦æ¥å¾®å°å¼€é”€ï¼‰</td></tr><tr><td>ä½¿ç”¨å¤æ‚åº¦</td><td>ç®€å•</td><td>ä¸­ç­‰ï¼ˆéœ€ç†è§£ä¼ é€’æœºåˆ¶ï¼‰</td></tr><tr><td>å…¼å®¹æ€§</td><td>JDKåŸç”Ÿæ”¯æŒ</td><td>éœ€å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–</td></tr></tbody></table>
<h3 data-id="heading-25">æ¶æ„è®¾è®¡ä¸­çš„å†³ç­–æŒ‡å—</h3>
<p><strong>ä¼˜å…ˆé€‰æ‹©ThreadLocalçš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç®€å•çš„å•çº¿ç¨‹åœºæ™¯ï¼ˆå¦‚Servletè¯·æ±‚å¤„ç†ï¼‰</li>
<li>æ— éœ€è·¨çº¿ç¨‹ä¼ é€’å˜é‡çš„åœºæ™¯</li>
<li>å¯¹æ€§èƒ½è¦æ±‚æé«˜ä¸”èµ„æºå—é™çš„ç³»ç»Ÿ</li>
</ul>
<p><strong>æ¨èä½¿ç”¨TTLçš„åœºæ™¯</strong>ï¼š</p>
<ul>
<li>åŸºäºçº¿ç¨‹æ± çš„å¼‚æ­¥ä»»åŠ¡å¤„ç†</li>
<li>å¾®æœåŠ¡æ¶æ„ä¸­çš„ä¸Šä¸‹æ–‡ä¼ é€’</li>
<li>åˆ†å¸ƒå¼è¿½è¸ªã€é“¾è·¯ç›‘æ§ç³»ç»Ÿ</li>
<li>ä»»ä½•éœ€è¦è·¨çº¿ç¨‹å…±äº«ä¸Šä¸‹æ–‡çš„åœºæ™¯</li>
</ul>
<h3 data-id="heading-26">æœ€ä½³å®è·µæ€»ç»“</h3>
<ol>
<li><strong>å§‹ç»ˆæ‰‹åŠ¨æ¸…ç†</strong>ï¼šæ— è®ºä½¿ç”¨ThreadLocalè¿˜æ˜¯TTLï¼Œéƒ½åº”åœ¨finallyå—ä¸­è°ƒç”¨remove()æ–¹æ³•</li>
<li><strong>é¿å…å­˜å‚¨å¤§å¯¹è±¡</strong>ï¼šThreadLocalä¸­å­˜å‚¨å¤§å¯¹è±¡å¯èƒ½å¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œå°¤å…¶åœ¨æ ¸å¿ƒçº¿ç¨‹é•¿æœŸè¿è¡Œçš„åœºæ™¯</li>
<li><strong>è°¨æ…ä½¿ç”¨é™æ€ThreadLocal</strong>ï¼šé™æ€å®ä¾‹ç”Ÿå‘½å‘¨æœŸä¸ç±»ç›¸åŒï¼Œæ›´å®¹æ˜“å¼•å‘å†…å­˜æ³„æ¼</li>
<li><strong>çº¿ç¨‹æ± å¿…é¡»é…åˆTTL</strong>ï¼šåœ¨ä»»ä½•ä½¿ç”¨çº¿ç¨‹æ± çš„åœºæ™¯ï¼Œè‹¥éœ€ä¼ é€’ä¸Šä¸‹æ–‡ï¼ŒTTLæ˜¯ç›®å‰æœ€æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆ</li>
<li><strong>ç›‘æ§ä¸å‘Šè­¦</strong>ï¼šé€šè¿‡JVMç›‘æ§å·¥å…·ï¼ˆå¦‚VisualVMï¼‰å®šæœŸæ£€æŸ¥ThreadLocalçš„ä½¿ç”¨æƒ…å†µï¼Œé˜²æ­¢æ»¥ç”¨</li>
</ol>
<h2 data-id="heading-27">ç»“è¯­ï¼šç†è§£æœ¬è´¨ï¼Œæ–¹èƒ½å–„ç”¨å…¶åŠ›</h2>
<p>ThreadLocalä½œä¸ºJavaå¹¶å‘ç¼–ç¨‹çš„é‡è¦å·¥å…·ï¼Œå…¶ä»·å€¼ä¸ä»…åœ¨äºæä¾›çº¿ç¨‹å®‰å…¨çš„å˜é‡éš”ç¦»æ–¹æ¡ˆï¼Œæ›´åœ¨äºå®ƒå¯å‘æˆ‘ä»¬æ€è€ƒ**"ç©ºé—´æ¢æ—¶é—´"**çš„æ¶æ„è®¾è®¡æ€æƒ³ã€‚ä»JDKæºç ä¸­çš„ç²¾å¦™å®ç°ï¼Œåˆ°TTLæ¡†æ¶å¯¹è·¨çº¿ç¨‹ä¼ é€’éš¾é¢˜çš„ç ´è§£ï¼Œæ¯ä¸€æ­¥æŠ€æœ¯æ¼”è¿›éƒ½ä½“ç°ç€å¼€å‘è€…å¯¹å¹¶å‘æœ¬è´¨çš„æ·±åˆ»ç†è§£ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„é“¶å¼¹ã€‚å”¯æœ‰æ·±å…¥ç†è§£æŠ€æœ¯åŸç†ï¼Œç»“åˆå…·ä½“ä¸šåŠ¡åœºæ™¯ï¼Œæ‰èƒ½åšå‡ºåˆç†çš„æŠ€æœ¯é€‰å‹ã€‚æ— è®ºæ˜¯åŸç”ŸThreadLocalçš„ç®€å•ç›´æ¥ï¼Œè¿˜æ˜¯TTLçš„çµæ´»å¼ºå¤§ï¼Œæœ€ç»ˆçš„ç›®æ ‡éƒ½æ˜¯æ„å»ºæ›´å¥å£®ã€æ›´æ˜“ç»´æŠ¤çš„ç³»ç»Ÿæ¶æ„ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ çœŸæ­£æŒæ¡ThreadLocalçš„ç²¾é«“ï¼Œåœ¨å¹¶å‘ç¼–ç¨‹çš„ä¸–ç•Œä¸­ä»å®¹å‰è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç«™åœ¨MySQLè‚©è†€ä¸Šå¿«é€Ÿå…¥é—¨PostgreSQLï¼Œå¼€æºç¤¾åŒºæœ€å–œçˆ±çš„å…³ç³»æ•°æ®åº“]]></title>    <link>https://juejin.cn/post/7570630923710578740</link>    <guid>https://juejin.cn/post/7570630923710578740</guid>    <pubDate>2025-11-10T06:45:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570630923710578740" data-draft-id="7570630923710562356" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç«™åœ¨MySQLè‚©è†€ä¸Šå¿«é€Ÿå…¥é—¨PostgreSQLï¼Œå¼€æºç¤¾åŒºæœ€å–œçˆ±çš„å…³ç³»æ•°æ®åº“"/> <meta itemprop="keywords" content="PostgreSQL,MySQL"/> <meta itemprop="datePublished" content="2025-11-10T06:45:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èµµæ–‡å®‡"/> <meta itemprop="url" content="https://juejin.cn/user/283045668323520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç«™åœ¨MySQLè‚©è†€ä¸Šå¿«é€Ÿå…¥é—¨PostgreSQLï¼Œå¼€æºç¤¾åŒºæœ€å–œçˆ±çš„å…³ç³»æ•°æ®åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045668323520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èµµæ–‡å®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:45:57.000Z" title="Mon Nov 10 2025 06:45:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>PostgreSQL æ˜¯ä¸€ä¸ªå¼€æºçš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œæ˜¯æœ€æµè¡Œçš„å¼€æºå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¹‹ä¸€ï¼Œå…·æœ‰ strong SQL å…¼å®¹æ€§ï¼Œæ”¯æŒ ACID äº‹åŠ¡ï¼Œä»¥åŠä¸°å¯Œçš„æ‰©å±•åŠŸèƒ½ã€‚</p>
<p>æœ¬æ–‡ä¸»è¦åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>æˆ‘ä¸ºä»€ä¹ˆé€‰æ‹©PostgreSQL</li>
<li>åŸºäº Docker Compose å¿«é€Ÿå®‰è£… PostgreSQL</li>
<li>ç™»å½• PostgreSQL</li>
<li>PostgreSQLä¸MySQLå¸¸ç”¨è¯­æ³•å·®å¼‚</li>
<li>PostgreSQLç®¡ç†Shellå·¥å…·</li>
</ol>
<h2 data-id="heading-0">1.æˆ‘ä¸ºä»€ä¹ˆé€‰æ‹©PostgreSQL</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e122746530064a14bd9bf2e42d0d0476~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LW15paH5a6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763361957&amp;x-signature=zjlRUlXPz0HfT802SvHKd80l0KQ%3D" alt="PostgreSQL" loading="lazy"/></p>
<p>å…¬ä¼—å·èŠå¤©çª—å£å‘é€ã€<strong>æ•°æ®åº“æ’å</strong>ã€‘å¯è·å–æœ€æ–°çš„æ•°æ®ç®¡ç†ç³»ç»Ÿæ’åèµ„æ–™ï¼ŒåŒ…å«å…³ç³»æ•°æ®åº“ã€KVå­˜å‚¨ã€æ—¶åºæ•°æ®åº“ã€ç¼“å­˜æ•°æ®åº“ã€æ–‡æ¡£æ•°æ®åº“ã€å›¾æ•°æ®åº“ã€å‘é‡æ•°æ®åº“ã€æœç´¢æ•°æ®åº“ã€åˆ—æ•°æ®åº“ç­‰ã€‚</p>
<p>ç”±äº Oracle å’Œ SQL Server æ˜¯å•†ä¸šçš„æ•°æ®åº“ï¼Œå¾ˆå¤šå¼€æºé¡¹ç›®åœ¨è¿›è¡Œå…³ç³»æ•°æ®åº“é€‰æ‹©æ—¶ä¼šé€‰æ‹©é»˜è®¤æ”¯æŒ MySQL å’Œ PostgreSQLã€‚ MySQLç”±äºç‰¹æ®Šçš„ç¤¾åŒºå‘å±•ç­‰åŸå› ï¼Œç”¨æˆ·é€æ¸å‘ MariaDB å’Œ PostgreSQL è¿ç§»ã€‚</p>
<p>è—äº‘é˜å¾ˆå¤šé¡¹ç›®å¦‚ Harborã€Giteaã€Keycloakã€Umamiã€Discourse é»˜è®¤éƒ½æ”¯æŒä½¿ç”¨ PostgreSQLï¼Œæ‰€ä»¥åœ¨å¹³å°å»ºè®¾æ—¶ä¹Ÿå°±é€‰æ‹©äº† PostgreSQLã€‚</p>
<p>æ–°ç”¨æˆ·ä»ä¹‹å‰ç†Ÿæ‚‰çš„ MySQL åˆ‡æ¢æˆ PostgreSQL å¹¶ä¸å›°éš¾ï¼Œè¿™ç¯‡æ–‡ç« çš„å†…å®¹è™½ç„¶ä¸å¤šä½†ä¹ŸåŸºæœ¬èƒ½å¤Ÿæ”¯æ’‘ä»MySQLåˆ‡æ¢æˆPostgreSQLã€‚</p>
<p>ç”±äºSQLæ ‡å‡†æ˜¯ä¸€æ ·ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œæ•°æ®åº“ä½¿ç”¨æ—¶ï¼Œæ•°æ®çš„å¢åˆ æ”¹æŸ¥çš„è¯­æ³•å·®å¼‚è¾ƒå°ã€‚ä½†æ˜¯å¯¹äºæ•°æ®åº“ç®¡ç†æœ‰å·®å¼‚è¾ƒå¤§ï¼Œæ–°æ‰‹éœ€è¦é‡ç‚¹å…³æ³¨ï¼Œä¹Ÿæ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚</p>
<h2 data-id="heading-1">2.åŸºäº Docker Compose å¿«é€Ÿå®‰è£… PostgreSQL</h2>
<p>PostgreSQL æœ‰å¤šç§å®‰è£…æ–¹å¼ï¼Œè¿™é‡Œä»¥ Docker Compose å¿«é€Ÿå®‰è£… PostgreSQL ä¸ºä¾‹ã€‚</p>
<p>å¦‚æœå®‰è£… Docker å—é˜»å¯ä»¥å‚è€ƒæ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqRKYuYOJIVDdHT-As3qk3g" target="_blank" title="https://mp.weixin.qq.com/s/qRKYuYOJIVDdHT-As3qk3g" ref="nofollow noopener noreferrer">æ— æ³•è®¿é—®Dockerå®˜ç½‘ï¼Œå›½å†…å¦‚ä½•åˆè§„é«˜æ•ˆå®‰è£…Dockerè½¯ä»¶[æœ€ä½³å®è·µ]</a></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">pgsql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">harbor.cncfstack.com/docker.io/library/postgres:14.19</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">pgsql</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=user0001</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=pwd0001</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_DB=myfirstdb</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/etc/localtime:/etc/localtime</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/data/postgressql-data:/var/lib/postgresql/data</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"5432:5432"</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">resources:</span>
        <span class="hljs-attr">limits:</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">'2'</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">4G</span>
</code></pre>
<p>PostgreSQLé»˜è®¤çš„é…ç½®åŸºæœ¬æ»¡è¶³ä½¿ç”¨äº†ï¼Œæˆ‘å°±æ²¡æœ‰æŒ‚è½½é…ç½®æ–‡ä»¶ã€‚å¦‚æœæœ‰ç‰¹æ®Šçš„é…ç½®éœ€è¦è°ƒæ•´ï¼Œå¯ä»¥æ·»åŠ  command å’Œ volumes é…ç½®ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml">    <span class="hljs-attr">command:</span> [<span class="hljs-string">"postgres"</span>, <span class="hljs-string">"-c"</span>, <span class="hljs-string">"config_file=/etc/postgresql/postgresql.conf"</span>]
<span class="hljs-string">...</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/data/postgresql/conf/postgresql.conf:/etc/postgresql/postgresql.conf</span>
</code></pre>
<p>å¯åŠ¨å®¹å™¨ä½¿ç”¨ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fcncfstack.com%2Fapp%2Fimage" target="_blank" title="https://cncfstack.com/app/image" ref="nofollow noopener noreferrer">è—äº‘é˜é•œåƒä»“åº“</a></strong> å¯ä»¥å¿«é€Ÿæ‹‰å–ï¼Œå…¶ä»–ç‰ˆæœ¬é•œåƒå¯è‡ªè¡ŒæŸ¥æ‰¾æ›´æ¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e99db48aaacf4050b8c56e24565699e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LW15paH5a6H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763361957&amp;x-signature=WtF8JQ8qxBtlSYkSbf5nGRUC4HA%3D" alt="postgresqlç‰ˆæœ¬åˆ—è¡¨" loading="lazy"/></p>
<h2 data-id="heading-2">3.ç™»å½• PostgreSQL</h2>
<p>ä½¿ç”¨å®¹å™¨çš„æ–¹å¼å¯ä»¥å¾ˆä¾¿æ·çš„ç™»å½•åˆ°PostgreSQLä¸­ï¼Œä¸éœ€è¦åœ¨å®¿ä¸»æœºä¸Šå®‰è£…ä»»ä½•å·¥å…·ã€‚</p>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ä¿®æ”¹ç›¸å…³çš„è´¦å·å¯†ç åœ°å€ä¿¡æ¯åå³å¯ç™»å½•ï¼Œåœ¨é€€å‡ºåç”±äº <code>--rm</code> é€‰é¡¹ä¹Ÿä¼šè‡ªåŠ¨æ¸…ç†è¯¥å®¹å™¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># docker run -it --rm -e PGPASSWORD=pwd0001 --network host -v /etc/localtime:/etc/localtime  harbor.cncfstack.com/docker.io/library/postgres:14.19 psql -h 127.0.0.1 -U user0001 -p 5432 -d myfirstdb</span>
psql (14.19 (Debian 14.19-1.pgdg13+1))
Type <span class="hljs-string">"help"</span> <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>.

myfirstdb=<span class="hljs-comment">#</span>
</code></pre>
<p>è¿™é‡Œçœ‹ä¸Šå»å‘½ä»¤æ¯”è¾ƒé•¿ï¼Œæ–‡ç« æœ«å°¾ä¼šæä¾›ä¸€ä¸ªå°è£…å¥½çš„ Shell è„šæœ¬ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-3">4.PostgreSQLä¸MySQLå¸¸ç”¨è¯­æ³•å·®å¼‚</h2>
<h3 data-id="heading-4">åŸºç¡€ä¿¡æ¯åŠç³»ç»Ÿä¿¡æ¯æŸ¥è¯¢å·®å¼‚</h3>
<p>åœ¨ PostgreSQL ä¸­ï¼Œå¾ˆå¤šç®¡ç†ç›¸å…³çš„å‘½ä»¤æ˜¯ä½¿ç”¨æŒ‡ä»¤çš„æ ¼å¼ï¼Œæ¯”è¾ƒç²¾ç®€ä½†ä¸å¤ªå¥½è®°ï¼Œéœ€è¦å¤šåŠ¨æ‰‹å®æ“åŠ æ·±å°è±¡ã€‚</p>











































































<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">è·å–å¸®åŠ©ä¿¡æ¯</td><td align="left"><code>HELP 'contents';</code></td><td align="left"><code>\?</code></td></tr><tr><td align="left">æŸ¥çœ‹å‘½ä»¤å†å²</td><td align="left">ä¸æ”¯æŒ</td><td align="left"><code>\s</code></td></tr><tr><td align="left">é€€å‡ºç™»å½•</td><td align="left"><code>exit</code> æˆ– <code>quit</code> æˆ– <code>\q</code></td><td align="left"><code>\q</code></td></tr><tr><td align="left">å•è¡Œæ³¨é‡Š</td><td align="left"><code>#</code> æˆ– <code>--</code></td><td align="left"><code>--</code></td></tr><tr><td align="left">å­—ç¬¦ä¸²å¼•ç”¨</td><td align="left">å•å¼•å· <code>'</code> æˆ–åŒå¼•å· <code>"</code></td><td align="left">åªä½¿ç”¨å•å¼•å· <code>'</code> (åŒå¼•å·ç”¨äºæ ‡è¯†ç¬¦)</td></tr><tr><td align="left">æ ‡è¯†ç¬¦å¼•ç”¨</td><td align="left">åå¼•å· <code>`</code></td><td align="left">åŒå¼•å· <code>"</code></td></tr><tr><td align="left">å¤§å°å†™æ•æ„Ÿæ€§</td><td align="left">é»˜è®¤<strong>ä¸æ•æ„Ÿ</strong></td><td align="left">é»˜è®¤<strong>æ•æ„Ÿ</strong></td></tr><tr><td align="left">æ‰§è¡Œå¤–éƒ¨æ–‡ä»¶</td><td align="left"><code>SOURCE file_name;</code></td><td align="left"><code>\i filename</code></td></tr><tr><td align="left">æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</td><td align="left"><code>SELECT VERSION();</code></td><td align="left"><code>SELECT version();</code></td></tr><tr><td align="left">æŸ¥çœ‹å½“å‰ç”¨æˆ·</td><td align="left"><code>SELECT USER();</code></td><td align="left"><code>SELECT current_user;</code></td></tr><tr><td align="left">æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·</td><td align="left"><code>SELECT user FROM mysql.user;</code></td><td align="left"><code>\du</code> æˆ– <code>SELECT usename FROM pg_user;</code></td></tr><tr><td align="left">æŸ¥çœ‹è¡¨ç©ºé—´</td><td align="left"><code>SHOW VARIABLES LIKE 'datadir';</code></td><td align="left"><code>\db</code> æˆ– <code>SELECT * FROM pg_tablespace;</code></td></tr><tr><td align="left">æŸ¥çœ‹æ‰©å±•/æ’ä»¶</td><td align="left"><code>SHOW PLUGINS;</code></td><td align="left"><code>\dx</code> æˆ– <code>SELECT * FROM pg_extension;</code></td></tr></tbody></table>
<h3 data-id="heading-5">æ•°æ®åº“ç›¸å…³æ“ä½œå·®å¼‚</h3>



































<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“</td><td align="left"><code>SHOW DATABASES;</code></td><td align="left"><code>\l</code></td></tr><tr><td align="left">è¿æ¥åˆ°æ•°æ®åº“</td><td align="left"><code>USE database_name;</code></td><td align="left"><code>\c database_name</code></td></tr><tr><td align="left">æŸ¥çœ‹å½“å‰æ•°æ®åº“</td><td align="left"><code>SELECT DATABASE();</code></td><td align="left"><code>SELECT current_database();</code></td></tr><tr><td align="left">æŸ¥çœ‹æ•°æ®åº“ä¿¡æ¯</td><td align="left"><code>SHOW CREATE DATABASE db_name;</code></td><td align="left"><code>\l+ db_name</code></td></tr><tr><td align="left">æŸ¥çœ‹è¿æ¥ä¿¡æ¯</td><td align="left"><code>SHOW PROCESSLIST;</code></td><td align="left"><code>SELECT * FROM pg_stat_activity;</code></td></tr></tbody></table>
<h3 data-id="heading-6">è¡¨ç›¸å…³æ“ä½œå·®å¼‚</h3>








































<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">åˆ—å‡ºæ‰€æœ‰è¡¨</td><td align="left"><code>SHOW TABLES;</code></td><td align="left"><code>\dt</code></td></tr><tr><td align="left">åˆ—å‡ºæ‰€æœ‰è¡¨ï¼ˆå«ç³»ç»Ÿè¡¨ï¼‰</td><td align="left"><code>SHOW FULL TABLES;</code></td><td align="left"><code>\dt+ *.*</code></td></tr><tr><td align="left">æŸ¥çœ‹è¡¨ç»“æ„</td><td align="left"><code>DESCRIBE table_name;</code></td><td align="left"><code>\d table_name</code></td></tr><tr><td align="left">æŸ¥çœ‹è¯¦ç»†è¡¨ä¿¡æ¯</td><td align="left"><code>SHOW CREATE TABLE table_name;</code></td><td align="left"><code>\d+ table_name</code></td></tr><tr><td align="left">æŸ¥çœ‹è¡¨ç´¢å¼•</td><td align="left"><code>SHOW INDEX FROM table_name;</code></td><td align="left"><code>\d table_name</code></td></tr><tr><td align="left">æŸ¥çœ‹åˆ—ä¿¡æ¯</td><td align="left"><code>SHOW COLUMNS FROM table_name;</code></td><td align="left"><code>\d table_name</code></td></tr></tbody></table>
<h3 data-id="heading-7">æ¨¡å¼ï¼ˆSchemaï¼‰ç›¸å…³æ“ä½œå·®å¼‚</h3>

























<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">åˆ—å‡ºæ‰€æœ‰æ¨¡å¼</td><td align="left"><code>SHOW DATABASES;</code></td><td align="left"><code>\dn</code></td></tr><tr><td align="left">æŸ¥çœ‹å½“å‰æ¨¡å¼</td><td align="left"><code>SELECT DATABASE();</code></td><td align="left"><code>SELECT current_schema();</code></td></tr><tr><td align="left">åˆ‡æ¢æ¨¡å¼</td><td align="left"><code>USE database_name;</code></td><td align="left"><code>SET search_path TO schema_name;</code></td></tr></tbody></table>
<h3 data-id="heading-8">åŠŸèƒ½è¯­æ³•å·®å¼‚</h3>











































































<table><thead><tr><th align="left">åŠŸèƒ½ / ç‰¹æ€§</th><th align="left">MySQL</th><th align="left">PostgreSQL</th></tr></thead><tbody><tr><td align="left">è‡ªå¢ä¸»é”®</td><td align="left"><code>AUTO_INCREMENT</code></td><td align="left"><code>SERIAL</code> æˆ– <code>GENERATED ... AS IDENTITY</code> (æ›´æ–°ç‰ˆæœ¬)</td></tr><tr><td align="left">è·å–æœ€åè‡ªå¢å€¼</td><td align="left"><code>3092147</code></td><td align="left">ä½¿ç”¨ <code>INSERT ... RETURNING id;</code> æˆ– <code>CURRVAL()</code></td></tr><tr><td align="left">åˆ†é¡µæŸ¥è¯¢</td><td align="left"><code>LIMIT size OFFSET offset</code> <br/> æˆ– <code>LIMIT offset, size</code></td><td align="left"><code>LIMIT size OFFSET offset</code></td></tr><tr><td align="left">æ£€æŸ¥ NULL å€¼</td><td align="left"><code>IS NULL</code> æˆ– <code>IS NOT NULL</code> (ä¸æ¨èä½¿ç”¨ <code>= NULL</code>)</td><td align="left">å¿…é¡»ä½¿ç”¨ <code>IS NULL</code> æˆ– <code>IS NOT NULL</code> (<code>= NULL</code> æ€»æ˜¯è¿”å›å‡)</td></tr><tr><td align="left">æ­£åˆ™è¡¨è¾¾å¼</td><td align="left"><code>REGEXP</code></td><td align="left"><code>~</code> (åŒºåˆ†å¤§å°å†™) æˆ– <code>~*</code> (ä¸åŒºåˆ†å¤§å°å†™)</td></tr><tr><td align="left">è·å–å½“å‰æ—¶é—´</td><td align="left"><code>NOW()</code></td><td align="left"><code>CURRENT_TIMESTAMP</code></td></tr><tr><td align="left">æ—¥æœŸå¢å‡</td><td align="left"><code>DATE_ADD(date, INTERVAL expr unit)</code></td><td align="left"><code>date + INTERVAL 'expr unit'</code></td></tr><tr><td align="left">IFNULL ç­‰æ•ˆå‡½æ•°</td><td align="left"><code>IFNULL(expr, fallback)</code></td><td align="left"><code>COALESCE(expr, fallback)</code></td></tr><tr><td align="left">ç±»å‹è½¬æ¢</td><td align="left"><code>CAST(expr AS type)</code> <br/> æˆ– <code>CONVERT(expr, type)</code></td><td align="left"><code>CAST(expr AS type)</code> <br/> æˆ– <code>expr::type</code></td></tr><tr><td align="left">å…¬å…±è¡¨è¡¨è¾¾å¼</td><td align="left">8.0+ ç‰ˆæœ¬æ”¯æŒ</td><td align="left">æ”¯æŒ</td></tr><tr><td align="left">çª—å£å‡½æ•°</td><td align="left">8.0+ ç‰ˆæœ¬æ”¯æŒ</td><td align="left">æ”¯æŒ</td></tr><tr><td align="left">JSON æ”¯æŒ</td><td align="left">JSON ç±»å‹ (5.7+)</td><td align="left">JSONB (äºŒè¿›åˆ¶ï¼Œæ€§èƒ½æ›´ä¼˜)</td></tr><tr><td align="left">GIS æ”¯æŒ</td><td align="left">ç©ºé—´æ•°æ®ç±»å‹</td><td align="left">PostGIS æ‰©å±• (åŠŸèƒ½å¼ºå¤§)</td></tr></tbody></table>
<h2 data-id="heading-9">5.PostgreSQLç®¡ç†Shellå·¥å…·</h2>
<p>åœ¨å®¹å™¨ä½¿ç”¨æ—¶ï¼Œä¸ºäº†æ›´é«˜æ•ˆçš„ä½¿ç”¨ PostgreSQLï¼Œå¯ä»¥å°è£…ä¸€ä¸ª PostgreSQL ç®¡ç†å·¥å…·ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
<p>è¿™é‡Œæ˜¯æˆ‘å°è£…çš„å·¥å…·ï¼Œä¸€ä¸ªé…ç½®æ–‡ä»¶ <code>env</code> å’Œä¸€ä¸ªè„šæœ¬ <code>pgtools.sh</code> æ–‡ä»¶ï¼Œè¯¥è„šæœ¬ä¸»è¦æä¾›äº†4ä¸ªåŠŸèƒ½ï¼šç™»å½•ã€åˆ›å»ºæ•°æ®åº“ã€å¤‡ä»½æ•°æ®åº“ã€æ¢å¤æ•°æ®åº“ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">./pgtools.sh
Must have optionï¼Œexample: ./pgtools.sh login postgres
./pgtools.sh login &lt;dbname&gt;
./pgtools.sh createdb &lt;dbname&gt;
./pgtools.sh backup &lt;dbname&gt;
./pgtools.sh restore &lt;dbname&gt;
</code></pre>
<ul>
<li><strong>envé…ç½®æ–‡ä»¶</strong></li>
</ul>
<p>envé…ç½®æ–‡ä»¶ä¸»è¦æ˜¯ä¸€äº›æ•æ„Ÿä¿¡æ¯å’ŒåŠ¨æ€ä¿¡æ¯ï¼Œç›´æ¥å†™æ­»åœ¨è„šæœ¬ä¸­ä¼šå¯¼è‡´è„šæœ¬çš„å…¼å®¹æ€§å·®ï¼Œæ‰€ä»¥å¯ä»¥ç‹¬ç«‹é…ç½®ï¼Œæ–¹ä¾¿åç»­ä¿®æ”¹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> PG_IP=`ip addr show eth0 |grep <span class="hljs-string">"inet\ "</span>|awk -F<span class="hljs-string">'/'</span> <span class="hljs-string">'{print $1}'</span>|awk <span class="hljs-string">'{print $2}'</span>`
<span class="hljs-built_in">export</span> PG_PASSWORD=<span class="hljs-string">'pwd0001'</span>
<span class="hljs-built_in">export</span> PG_USER=user0001
<span class="hljs-built_in">export</span> PG_PORT=5432
</code></pre>
<ul>
<li><strong>PostgreSQL ç®¡ç†å·¥å…· pgtools.sh æ–‡ä»¶</strong></li>
</ul>
<p>è„šæœ¬ä¸­ç›´æ¥æœ‰ä¸€ä¸ªå­—ç¬¦ä¸² <code>YOUR_OSS_BUCKET</code> éœ€è¦ä¿®æ”¹ä¸ºè‡ªå·±çš„OSSå­˜å‚¨æ¡¶åç§°ã€‚</p>
<p>åœ¨è„šæœ¬å‡†å¤‡å®Œæˆåï¼Œå¯ä»¥æ·»åŠ å¯æ‰§è¡Œæƒé™å¹¶å°† PATH æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œæ–¹ä¾¿ä½¿ç”¨ã€‚</p>
<p>è¯¦ç»†çš„è„šæœ¬å†…å®¹</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

SUBCMD=<span class="hljs-variable">$1</span>
DBNAME=<span class="hljs-variable">$2</span>

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne 2 ];<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"MUST have optionï¼Œexample: <span class="hljs-variable">$0</span> login postgres"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$0</span> login &lt;dbname&gt;"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$0</span> createdb &lt;dbname&gt;"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$0</span> backup &lt;dbname&gt;"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$0</span> restore &lt;dbname&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">source</span> `<span class="hljs-built_in">dirname</span> <span class="hljs-variable">$0</span>`/env

DATETIME=`<span class="hljs-built_in">date</span> +%Y%m%d-%H%M%S`

BAK_DIR=<span class="hljs-string">"/data/backup/postgresql"</span>
<span class="hljs-keyword">if</span> [ ! -d <span class="hljs-variable">$BAK_DIR</span> ];<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$BAK_DIR</span>
<span class="hljs-keyword">fi</span>

BAK_FILE=<span class="hljs-variable">${BAK_DIR}</span>/<span class="hljs-variable">${DBNAME}</span>/<span class="hljs-variable">${DBNAME}</span>-<span class="hljs-variable">${PG_IP}</span>-<span class="hljs-variable">${DATETIME}</span>.sql
<span class="hljs-keyword">if</span> [ ! -d <span class="hljs-variable">${BAK_DIR}</span>/<span class="hljs-variable">${DBNAME}</span> ];<span class="hljs-keyword">then</span>
     <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">${BAK_DIR}</span>/<span class="hljs-variable">${DBNAME}</span>
<span class="hljs-keyword">fi</span>

PGCLI_RM=<span class="hljs-string">"docker run -it --rm -e POSTGRES_PASSWORD=<span class="hljs-variable">$PG_PASSWORD</span> -e PGPASSWORD=<span class="hljs-variable">$PG_PASSWORD</span> -v /data/backup:/data/backup -v /etc/localtime:/etc/localtime  harbor.cncfstack.com/docker.io/library/postgres:14.19 "</span>

<span class="hljs-function"><span class="hljs-title">login</span></span>(){
    <span class="hljs-variable">$PGCLI_RM</span> psql -h <span class="hljs-variable">$PG_IP</span> -U <span class="hljs-variable">$PG_USER</span> -p <span class="hljs-variable">$PG_PORT</span> -d <span class="hljs-variable">$DBNAME</span>
}

<span class="hljs-function"><span class="hljs-title">createdb</span></span>(){
    <span class="hljs-variable">$PGCLI_RM</span> createdb -h <span class="hljs-variable">$PG_IP</span> -U <span class="hljs-variable">$PG_USER</span> -p <span class="hljs-variable">$PG_PORT</span> <span class="hljs-variable">$DBNAME</span>
}

<span class="hljs-function"><span class="hljs-title">backup</span></span>(){
  <span class="hljs-variable">$PGCLI_RM</span> pg_dump -h <span class="hljs-variable">$PG_IP</span> -p <span class="hljs-variable">$PG_PORT</span> -U cygpgsql -d <span class="hljs-variable">$DBNAME</span> -f <span class="hljs-variable">$BAK_FILE</span>
  ossutil <span class="hljs-built_in">cp</span> -f <span class="hljs-variable">$BAK_FILE</span> oss://YOUR_OSS_BUCKET/postgresql/<span class="hljs-variable">${DBNAME}</span>/<span class="hljs-variable">${DBNAME}</span>-<span class="hljs-variable">${PG_IP}</span>-<span class="hljs-variable">${DATETIME}</span>.sql
}

<span class="hljs-function"><span class="hljs-title">restore</span></span>(){
   <span class="hljs-variable">$PGCLI_RM</span> psql -h <span class="hljs-variable">$PG_IP</span> -p <span class="hljs-variable">$PG_PORT</span> -U <span class="hljs-variable">$PG_USER</span> -d <span class="hljs-variable">$DBNAME</span> -f /data/backup/<span class="hljs-variable">${DBNAME}</span>.sql
}

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$SUBCMD</span> = <span class="hljs-string">"login"</span> ];<span class="hljs-keyword">then</span>
    login
<span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$SUBCMD</span> = <span class="hljs-string">"createdb"</span> ];<span class="hljs-keyword">then</span>
    createdb
<span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$SUBCMD</span> = <span class="hljs-string">"backup"</span> ];<span class="hljs-keyword">then</span>
    backup
<span class="hljs-keyword">elif</span> [ <span class="hljs-variable">$SUBCMD</span> = <span class="hljs-string">"restore"</span> ];<span class="hljs-keyword">then</span>
    restore
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Unkonw SUBCMD"</span>
    <span class="hljs-built_in">exit</span> 2
<span class="hljs-keyword">fi</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–°æ‰‹ä¹Ÿèƒ½ä¸Šæ‰‹ï¼šä»é›¶å†™ä¸€ä¸ªé¸¿è’™ï¼ˆHarmonyOSï¼‰åº”ç”¨çš„æœ€çŸ­è·¯å¾„]]></title>    <link>https://juejin.cn/post/7570339961909297195</link>    <guid>https://juejin.cn/post/7570339961909297195</guid>    <pubDate>2025-11-10T06:15:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570339961909297195" data-draft-id="7570295366480461860" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–°æ‰‹ä¹Ÿèƒ½ä¸Šæ‰‹ï¼šä»é›¶å†™ä¸€ä¸ªé¸¿è’™ï¼ˆHarmonyOSï¼‰åº”ç”¨çš„æœ€çŸ­è·¯å¾„"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2025-11-10T06:15:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¿»æ–—èŠ±å›­èƒ¡è‹±ä¿Š"/> <meta itemprop="url" content="https://juejin.cn/user/1662117311953688"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–°æ‰‹ä¹Ÿèƒ½ä¸Šæ‰‹ï¼šä»é›¶å†™ä¸€ä¸ªé¸¿è’™ï¼ˆHarmonyOSï¼‰åº”ç”¨çš„æœ€çŸ­è·¯å¾„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117311953688/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¿»æ–—èŠ±å›­èƒ¡è‹±ä¿Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:15:46.000Z" title="Mon Nov 10 2025 06:15:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‡†å¤‡å¼€å‘ç¯å¢ƒ</h2>
<ol>
<li>å®‰è£… <strong>DevEco Studio</strong>ï¼ˆåä¸ºå®˜æ–¹ IDEï¼‰ï¼Œé¦–æ¬¡å¯åŠ¨æŒ‰å‘å¯¼ä¸‹è½½å¯¹åº”çš„ <strong>HarmonyOS SDK</strong>ã€‚</li>
<li>å¦‚æœæ²¡æœ‰çœŸæœºï¼Œåˆ›å»ºä¸€ä¸ª <strong>æ¨¡æ‹Ÿå™¨</strong>ï¼ˆé€‰æ‹©ä¸å·¥ç¨‹ API ç‰ˆæœ¬åŒ¹é…çš„ç³»ç»Ÿé•œåƒï¼‰ã€‚</li>
<li>æ–°å»ºå·¥ç¨‹ï¼š<code>Create HarmonyOS Project â†’ Application (ArkTS / Stage) â†’ Empty Ability</code>ï¼Œå¡«å†™åŒ…åï¼ˆ<code>com.example.demo</code> ä¹‹ç±»ï¼‰ã€è®¾å¤‡ç±»å‹ï¼ˆPhone/Tabletï¼‰ï¼Œå®Œæˆå³å¯ã€‚</li>
</ol>
<blockquote>
<p>å°è´´å£«ï¼šçœŸæœºè°ƒè¯•éœ€å¼€å¯å¼€å‘è€…æ¨¡å¼ä¸ HDBï¼›æ¨¡æ‹Ÿå™¨ä¸éœ€è¦è¯ä¹¦ç­¾åï¼Œå‘å¸ƒåˆ°å•†åº—æ‰éœ€è¦ã€‚</p>
</blockquote>
<h2 data-id="heading-1">äºŒã€è®¤è¯†é¡¹ç›®ç»“æ„ï¼ˆç²¾ç®€ç‰ˆï¼‰</h2>
<ul>
<li><code>entry/src/main/ets/pages/</code>ï¼šé¡µé¢ä»£ç ï¼Œåç¼€ <code>.ets</code>ï¼Œé‡‡ç”¨ ArkTS å£°æ˜å¼ UIã€‚</li>
<li><code>app.json5</code> / <code>module.json5</code>ï¼šåº”ç”¨ä¸æ¨¡å—é…ç½®ï¼ˆåŒ…åã€æƒé™ã€å…¥å£ Ability ç­‰ï¼‰ã€‚</li>
<li><code>resources/</code>ï¼šå›¾ç‰‡ã€å­—ç¬¦ä¸²ç­‰èµ„æºã€‚</li>
<li><code>build-profile.json5</code>ï¼šæ„å»ºä¸ç­¾åé…ç½®ï¼ˆå‘å¸ƒé˜¶æ®µä¼šç”¨åˆ°ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€å†™ä¸€ä¸ªä¸¤é¡µå°åº”ç”¨ï¼ˆè®¡æ•° + è·¯ç”±ï¼‰</h2>
<p>IDE ä¼šç”Ÿæˆé¦–é¡µ <code>Index.ets</code>ã€‚æˆ‘ä»¬å†å»ºä¸€ä¸ª <code>Detail.ets</code>ï¼Œå±•ç¤ºä»é¦–é¡µä¼ é€’è¿‡æ¥çš„å‚æ•°ã€‚</p>
<p><strong>Index.ets</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.router'</span>;

@<span class="hljs-title class_">Entry</span>
@<span class="hljs-title class_">Component</span>
struct <span class="hljs-title class_">Index</span> {
  @<span class="hljs-title class_">State</span> <span class="hljs-attr">count</span>: number = <span class="hljs-number">0</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">16</span> }) {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Hello HarmonyOS'</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">24</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Bold</span>)

      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`count: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.count}</span>`</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">18</span>)

      <span class="hljs-title class_">Row</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">12</span> }) {
        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'+1'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++)
        <span class="hljs-title class_">Button</span>(<span class="hljs-string">'å»è¯¦æƒ…'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          router.<span class="hljs-title function_">pushUrl</span>({
            <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/Detail'</span>,
            <span class="hljs-attr">params</span>: { <span class="hljs-attr">from</span>: <span class="hljs-string">'Index'</span>, <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> }
          });
        })
      }
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)
    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)
    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">24</span>)
  }
}

</code></pre>
<p>Detail.ets</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.router'</span>;

@<span class="hljs-title class_">Entry</span>
@<span class="hljs-title class_">Component</span>
struct <span class="hljs-title class_">Detail</span> {
  private <span class="hljs-attr">from</span>: string = (router.<span class="hljs-title function_">getParams</span>()?.<span class="hljs-property">from</span> <span class="hljs-keyword">as</span> string) ?? <span class="hljs-string">'unknown'</span>;
  private <span class="hljs-attr">value</span>: number = (router.<span class="hljs-title function_">getParams</span>()?.<span class="hljs-property">value</span> <span class="hljs-keyword">as</span> number) ?? <span class="hljs-number">0</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>({ <span class="hljs-attr">space</span>: <span class="hljs-number">16</span> }) {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'Detail Page'</span>).<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">22</span>).<span class="hljs-title function_">fontWeight</span>(<span class="hljs-title class_">FontWeight</span>.<span class="hljs-property">Medium</span>)
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`æ¥è‡ª: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.<span class="hljs-keyword">from</span>}</span>`</span>)
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`æ”¶åˆ°çš„ count: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.value}</span>`</span>)

      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'è¿”å›'</span>).<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> router.<span class="hljs-title function_">back</span>())
    }
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>).<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)
    .<span class="hljs-title function_">alignItems</span>(<span class="hljs-title class_">HorizontalAlign</span>.<span class="hljs-property">Center</span>)
    .<span class="hljs-title function_">padding</span>(<span class="hljs-number">24</span>)
  }
}

</code></pre>
<p>è¯´æ˜ï¼šArkUI ä½¿ç”¨å£°æ˜å¼ç»„ä»¶ï¼ˆ<code>Column/Row/Text/Button</code> ç­‰ï¼‰ä¸é“¾å¼å±æ€§ï¼Œæ•°æ®ç”¨ <code>@State</code> å“åº”å¼æ›´æ–°ï¼›<code>@ohos.router</code> è´Ÿè´£é¡µé¢è·³è½¬ä¸å‚æ•°ä¼ é€’ã€‚è·¯ç”± URL ä¸€èˆ¬ä¸æ–‡ä»¶è·¯å¾„ä¸€è‡´ï¼Œå¦‚ <code>pages/Detail</code> å¯¹åº” <code>pages/Detail.ets</code>ã€‚</p>
<h2 data-id="heading-3">å››ã€è¿è¡Œä¸è°ƒè¯•</h2>
<ul>
<li><strong>é¢„è§ˆ/æ¨¡æ‹Ÿå™¨</strong>ï¼šIDE é¡¶éƒ¨é€‰æ‹©è®¾å¤‡ï¼Œç‚¹å‡» â–¶ å³å¯å®‰è£…è¿è¡Œã€‚</li>
<li><strong>çœŸæœºè°ƒè¯•</strong>ï¼šUSB è¿æ¥ï¼Œå…è®¸ HDBï¼Œåœ¨è®¾å¤‡åˆ—è¡¨ä¸­é€‰æ‹©çœŸæœºã€‚</li>
<li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šå–„ç”¨ <code>Log</code> ä¸ IDE çš„ <strong>Layout Inspector</strong>ï¼Œå¿«é€Ÿå®šä½ UI ä¸çŠ¶æ€é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-4">äº”ã€å¸¸è§å‘ä½ä¸è§„é¿</h2>
<ul>
<li><strong>API ç‰ˆæœ¬ä¸åŒ¹é…</strong>ï¼šå·¥ç¨‹ç¼–è¯‘ç‰ˆæœ¬éœ€ä¸æ¨¡æ‹Ÿå™¨/çœŸæœºç³»ç»Ÿç‰ˆæœ¬å…¼å®¹ï¼Œå¦åˆ™æ— æ³•å®‰è£…ã€‚</li>
<li><strong>ç­¾åä¸å‘å¸ƒ</strong>ï¼šè°ƒè¯•é˜¶æ®µå¯ä»¥ç”¨è°ƒè¯•æ„å»ºï¼›ä¸Šæ¶éœ€é…ç½®ç­¾åä¸ <strong>HAP</strong> å‘å¸ƒåŒ…ã€‚</li>
<li><strong>èµ„æºä¸å¤šè¯­è¨€</strong>ï¼šæŠŠæ–‡æ¡ˆæ”¾åˆ° <code>resources/base/element/string.json</code>ï¼Œä¾¿äºå›½é™…åŒ–ä¸ç»Ÿä¸€ç®¡ç†ã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šå¸¸è§è£…é¥°å™¨æœ‰ <code>@State / @Prop / @Link / @Provide / @Consume</code>ï¼Œå…ˆç”¨ <code>@State</code> ç®¡ç†æœ¬åœ°çŠ¶æ€æœ€ç®€å•ã€‚</li>
</ul>
<h2 data-id="heading-5">å…­ã€æ¥ä¸‹æ¥å¯ä»¥åšä»€ä¹ˆï¼Ÿ</h2>
<ul>
<li>åšä¸€ä¸ª <strong>ToDo æ¸…å•</strong>ï¼šåˆ—è¡¨ç»„ä»¶ + æ–°å¢/åˆ é™¤/å‹¾é€‰ï¼Œé…åˆæœ¬åœ°æ•°æ®å­˜å‚¨ã€‚</li>
<li>é€‚é… <strong>æ·±è‰²æ¨¡å¼</strong> ä¸ <strong>ä¸åŒè®¾å¤‡</strong>ï¼ˆæ‰‹æœº/å¹³æ¿ï¼‰ï¼Œå­¦ä¹ å“åº”å¼å¸ƒå±€ä¸èµ„æºåˆ†å‹ã€‚</li>
<li>å¼•å…¥ç½‘ç»œè¯·æ±‚ä¸æƒé™ï¼ˆä¾‹å¦‚ç›¸æœºã€æ–‡ä»¶å­˜å‚¨ï¼‰ï¼Œå®Œå–„çœŸå®ä¸šåŠ¡åœºæ™¯ã€‚</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œä½ å·²ç»å®Œæˆäº†ä¸€ä¸ªå¯è¿è¡Œä¸”åŒ…å«è·¯ç”±çš„é¸¿è’™åº”ç”¨éª¨æ¶ã€‚æŠŠä¸Šé¢çš„ä»£ç ç²˜åˆ° DevEco Studio é‡Œè·‘èµ·æ¥ï¼Œå†æŒ‰ã€Œæ¥ä¸‹æ¥ã€çš„å»ºè®®åšä¸€ç‚¹ç‚¹æ‰©å±•ï¼Œå°±èƒ½å®ç°ä¸€ä¸ªç®€å•çš„é¸¿è’™demoåº”ç”¨äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¼€å‘å¦‚ä½•çµæ´»ä½¿ç”¨ css å˜é‡]]></title>    <link>https://juejin.cn/post/7570648023110615078</link>    <guid>https://juejin.cn/post/7570648023110615078</guid>    <pubDate>2025-11-10T06:35:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570648023110615078" data-draft-id="7570646659865886746" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¼€å‘å¦‚ä½•çµæ´»ä½¿ç”¨ css å˜é‡"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-10T06:35:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åå­—è·¯å£çš„ç«ä¸"/> <meta itemprop="url" content="https://juejin.cn/user/2154698521720984"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¼€å‘å¦‚ä½•çµæ´»ä½¿ç”¨ css å˜é‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2154698521720984/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åå­—è·¯å£çš„ç«ä¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:35:50.000Z" title="Mon Nov 10 2025 06:35:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§© ä¸€ã€CSS å˜é‡çš„å®šä¹‰ä¸ä½¿ç”¨åŸºç¡€</h2>
<h3 data-id="heading-1">å®šä¹‰æ–¹å¼</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#409eff</span>;
  <span class="hljs-attr">--font-size-base</span>: <span class="hljs-number">14px</span>;
}
</code></pre>
<p><code>:root</code> é€‰æ‹©å™¨ç›¸å½“äºå…¨å±€ä½œç”¨åŸŸï¼ˆç±»ä¼¼å…¨å±€å˜é‡ï¼‰ã€‚</p>
<h3 data-id="heading-2">ä½¿ç”¨æ–¹å¼</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">var</span>(--font-size-base);
}
</code></pre>
<p><code>var()</code> è¯­æ³•ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color, <span class="hljs-number">#333</span>); <span class="hljs-comment">/* ç¬¬äºŒä¸ªå‚æ•°æ˜¯é»˜è®¤å€¼ */</span>
</code></pre>
<hr/>
<h2 data-id="heading-3">âš™ï¸ äºŒã€åŠ¨æ€ä¿®æ”¹ CSS å˜é‡ï¼ˆæ ¸å¿ƒï¼‰</h2>
<p>CSS å˜é‡æ˜¯<strong>è¿è¡Œæ—¶åŠ¨æ€çš„</strong>ï¼Œå¯ä»¥é€šè¿‡ JS ä¿®æ”¹è€Œç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢ã€‚</p>
<h3 data-id="heading-4">âœ… æ–¹æ³• 1ï¼šä¿®æ”¹æ ¹èŠ‚ç‚¹å˜é‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--primary-color'</span>, <span class="hljs-string">'#ff4d4f'</span>);
</code></pre>
<h3 data-id="heading-5">âœ… æ–¹æ³• 2ï¼šä¿®æ”¹æŸä¸ªå±€éƒ¨ä½œç”¨åŸŸ</h3>
<p>CSS å˜é‡æœ‰ä½œç”¨åŸŸï¼Œå¯ä»¥å®šä¹‰åœ¨æŸä¸ªå…ƒç´ ä¸Šï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span> {
  <span class="hljs-attr">--card-bg</span>: white;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--card-bg);
}
</code></pre>
<p>JS åŠ¨æ€æ”¹å®ƒï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">'.card'</span>).style.setProperty(<span class="hljs-string">'--card-bg'</span>, <span class="hljs-string">'#f5f5f5'</span>);
</code></pre>
<hr/>
<h2 data-id="heading-6">ğŸ§­ ä¸‰ã€çµæ´»åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-7">1. <strong>ä¸»é¢˜åˆ‡æ¢ï¼ˆæš—è‰² / äº®è‰²ï¼‰</strong></h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#000</span>;
}

<span class="hljs-selector-attr">[data-theme=<span class="hljs-string">"dark"</span>]</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#121212</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#fff</span>;
}
</code></pre>
<p>JS åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-theme'</span>, <span class="hljs-string">'dark'</span>);
</code></pre>
<blockquote>
<p>ğŸ”¥ æ¨èåšæ³•ï¼šé€šè¿‡ <code>data-theme</code> æˆ– <code>class</code> åˆ‡æ¢ä¸»é¢˜ï¼ŒCSS è‡ªå·±å¤„ç†é¢œè‰²æ˜ å°„ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">2. <strong>å“åº”å¼è®¾è®¡ + åŠ¨æ€è®¡ç®—</strong></h3>
<p>åˆ©ç”¨ <code>calc()</code>ã€<code>clamp()</code> ç­‰å‡½æ•°ä¸å˜é‡ç»“åˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--base-size</span>: <span class="hljs-number">16px</span>;
}

<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--base-size) * <span class="hljs-number">1.2</span>);
}
</code></pre>
<p>åœ¨ JS ä¸­åŠ¨æ€è°ƒæ•´å…¨å±€å­—å·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--base-size'</span>, <span class="hljs-string">'18px'</span>);
</code></pre>
<hr/>
<h3 data-id="heading-9">3. <strong>ç»„ä»¶å‚æ•°åŒ–</strong></h3>
<p>åœ¨ç»„ä»¶å°è£…ä¸­ï¼ˆå¦‚ React / Vue / Web Componentsï¼‰ï¼Œå¯é€šè¿‡å˜é‡è®©ç»„ä»¶æ ·å¼å¯é…ç½®ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.my-button</span> {
  <span class="hljs-attr">--btn-color</span>: <span class="hljs-number">#409eff</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--btn-color);
}
</code></pre>
<p>çˆ¶ç»„ä»¶é€šè¿‡ style ä¼ å…¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;MyButton <span class="hljs-attr">style</span>=<span class="hljs-string">"--btn-color: #ff4d4f"</span> /&gt;
</code></pre>
<hr/>
<h3 data-id="heading-10">4. <strong>é…åˆåŠ¨ç”» / åŠ¨æ€è¿‡æ¸¡</strong></h3>
<p>CSS å˜é‡å¯ä»¥å’Œ transition é…åˆä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--panel-height</span>: <span class="hljs-number">100px</span>;
}

<span class="hljs-selector-class">.panel</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-built_in">var</span>(--panel-height);
  <span class="hljs-attribute">transition</span>: height <span class="hljs-number">0.3s</span> ease;
}
</code></pre>
<p>JS åŠ¨æ€ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--panel-height'</span>, <span class="hljs-string">'200px'</span>);
</code></pre>
<p>é¢æ¿é«˜åº¦ä¼šå¹³æ»‘è¿‡æ¸¡ã€‚</p>
<hr/>
<h2 data-id="heading-11">ğŸ§  å››ã€CSS å˜é‡ vs é¢„å¤„ç†å™¨å˜é‡ï¼ˆLESS/SASSï¼‰</h2>






























<table><thead><tr><th>ç‰¹æ€§</th><th>CSSå˜é‡</th><th>LESS/SASSå˜é‡</th></tr></thead><tbody><tr><td>ç”Ÿæ•ˆæ—¶æœº</td><td>è¿è¡Œæ—¶</td><td>ç¼–è¯‘æ—¶</td></tr><tr><td>åŠ¨æ€ä¿®æ”¹</td><td>âœ… å¯è¿è¡Œæ—¶ä¿®æ”¹</td><td>âŒ éœ€é‡æ–°ç¼–è¯‘</td></tr><tr><td>å¯ä½œç”¨åŸŸåŒ–</td><td>âœ… æœ‰ä½œç”¨åŸŸï¼ˆç»§æ‰¿ï¼‰</td><td>âŒ å…¨å±€æˆ–å±€éƒ¨ç¼–è¯‘ä½œç”¨åŸŸ</td></tr><tr><td>æµè§ˆå™¨æ”¯æŒ</td><td>âœ… ç°ä»£æµè§ˆå™¨å…¨æ”¯æŒ</td><td>âœ… ä¾èµ–ç¼–è¯‘</td></tr></tbody></table>
<p>ğŸ’¡ é€šå¸¸ç»“åˆä½¿ç”¨ï¼š</p>
<ul>
<li>LESS å˜é‡è´Ÿè´£ <strong>ç¼–è¯‘æ—¶æ ·å¼ç»“æ„</strong></li>
<li>CSS å˜é‡è´Ÿè´£ <strong>è¿è¡Œæ—¶åŠ¨æ€ä¸»é¢˜</strong></li>
</ul>
<hr/>
<h2 data-id="heading-12">ğŸ§° äº”ã€å®è·µå»ºè®®</h2>
<ol>
<li>
<p><strong>å®šä¹‰å‘½åè§„èŒƒï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attr">--color-primary</span>
<span class="hljs-attr">--font-size-sm</span>
<span class="hljs-attr">--layout-header-height</span>
</code></pre>
</li>
<li>
<p><strong>å»ºç«‹ç»Ÿä¸€å…¥å£æ–‡ä»¶ï¼š</strong><br/>
<code>variables.css</code> ç®¡ç†æ‰€æœ‰å˜é‡ï¼Œé€šè¿‡ <code>@import</code> æˆ–æ„å»ºå·¥å…·å¼•å…¥ã€‚</p>
</li>
<li>
<p><strong>é¿å…æ»¥ç”¨ï¼š</strong><br/>
åŠ¨æ€æ”¹åŠ¨é¢‘ç¹çš„å˜é‡å¯ä½¿ç”¨ JS æ ·å¼æˆ– class åˆ‡æ¢ï¼Œé™æ€ä¸»é¢˜ç±»å˜é‡ç”¨ CSS å˜é‡å³å¯ã€‚</p>
</li>
<li>
<p><strong>å¯ç»“åˆå­˜å‚¨ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">theme</span> = <span class="hljs-string">'dark'</span><span class="hljs-comment">;</span>
localStorage.setItem('theme', theme)<span class="hljs-comment">;</span>
<span class="hljs-attr">document.documentElement.dataset.theme</span> = theme<span class="hljs-comment">;</span>
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-13">ğŸ¨ ç¤ºä¾‹ï¼šå¤šä¸»é¢˜åŠ¨æ€åˆ‡æ¢</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attr">--bg</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attr">--text</span>: <span class="hljs-number">#000</span>;
  }

  <span class="hljs-selector-attr">[data-theme=<span class="hljs-string">'dark'</span>]</span> {
    <span class="hljs-attr">--bg</span>: <span class="hljs-number">#1e1e1e</span>;
    <span class="hljs-attr">--text</span>: <span class="hljs-number">#fff</span>;
  }

  <span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--bg);
    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text);
    <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.3s</span>, color <span class="hljs-number">0.3s</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"toggleTheme"</span>&gt;</span>åˆ‡æ¢ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'toggleTheme'</span>).<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> isDark = root.<span class="hljs-property">dataset</span>.<span class="hljs-property">theme</span> === <span class="hljs-string">'dark'</span>;
      root.<span class="hljs-property">dataset</span>.<span class="hljs-property">theme</span> = isDark ? <span class="hljs-string">'light'</span> : <span class="hljs-string">'dark'</span>;
    };
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è§£å¯†æºç ã€‘ RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- naive parser è¯­ä¹‰åˆ‡å—ï¼ˆmarkdown ç¯‡ï¼‰]]></title>    <link>https://juejin.cn/post/7570295366480560164</link>    <guid>https://juejin.cn/post/7570295366480560164</guid>    <pubDate>2025-11-10T06:17:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570295366480560164" data-draft-id="7570295366480527396" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è§£å¯†æºç ã€‘ RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- naive parser è¯­ä¹‰åˆ‡å—ï¼ˆmarkdown ç¯‡ï¼‰"/> <meta itemprop="keywords" content="Agent,LLM,æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-10T06:17:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸¸å…ˆæ£®"/> <meta itemprop="url" content="https://juejin.cn/user/4388906148043879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è§£å¯†æºç ã€‘ RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- naive parser è¯­ä¹‰åˆ‡å—ï¼ˆmarkdown ç¯‡ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906148043879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸¸å…ˆæ£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T06:17:42.000Z" title="Mon Nov 10 2025 06:17:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ RAGFlow çš„è¯­ä¹‰åˆ‡å—ä½“ç³»ä¸­ï¼Œ<code>markdown</code> æ˜¯ä¸€ç§ç‹¬ç‰¹ä¸”å¤æ‚çš„è¾“å…¥ç±»å‹ã€‚ä¸åŒäº PDF æˆ– DOCX ç­‰äºŒè¿›åˆ¶æ ¼å¼ï¼ŒMarkdown å¤©ç„¶å¸¦æœ‰è¯­ä¹‰ç»“æ„ï¼ˆæ ‡é¢˜ã€åˆ—è¡¨ã€å¼•ç”¨ã€ä»£ç å—ã€è¡¨æ ¼ç­‰ï¼‰ï¼Œè¿™è®©è§£æå™¨ä¸éœ€è¦é¢å¤–çš„ OCR æˆ–æ’ç‰ˆåˆ†æå³å¯ç²¾ç¡®è¿˜åŸå†…å®¹å±‚æ¬¡ã€‚</p>
<p>ç„¶è€Œï¼ŒMarkdown çš„çµæ´»æ€§ä¹Ÿæ˜¯ä¸€æŠŠåŒåˆƒå‰‘â€”â€”
ä¸åŒè¯­æ³•é£æ ¼ï¼ˆå¦‚æ— è¾¹æ¡†è¡¨æ ¼ï¼‰ã€åµŒå¥—å…ƒç´ ã€å›¾ç‰‡é“¾æ¥ã€HTML æ··å†™ç­‰æƒ…å†µéƒ½ä¼šä½¿è¯­ä¹‰åˆ‡å—å˜å¾—å¤æ‚ã€‚<br/>
å› æ­¤ï¼ŒRAGFlow åœ¨ Markdown çš„è§£æä¸­é‡‡ç”¨äº†ä¸“é—¨çš„ <code>MarkdownParser</code> ä¸ <code>MarkdownElementExtractor</code> åŒå±‚æ¶æ„ï¼Œå¹¶å¼•å…¥äº† <code>VisionFigureParser</code> æ¥å¢å¼ºå›¾ç‰‡è¯­ä¹‰ï¼Œä½¿æ–‡æœ¬ä¸å›¾åƒå½¢æˆçœŸæ­£çš„å¤šæ¨¡æ€è¯­ä¹‰å—ã€‚</p>
<p>æœ¬ç¯‡å°†å¸¦ä½ æ·±å…¥æºç å±‚ï¼Œè§£è¯» RAGFlow å¦‚ä½•ä¸€æ­¥æ­¥å®Œæˆä» Markdown æ–‡æ¡£åˆ°ç»“æ„åŒ–è¯­ä¹‰å—çš„å…¨è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">çœæµç‰ˆ</h2>
<p>Markdown æ–‡æ¡£çš„è¯­ä¹‰åˆ‡å—åœ¨ RAGFlow ä¸­ç”±ä¸‰ä¸ªé˜¶æ®µå®Œæˆï¼š<strong>è¯­æ³•ç»“æ„è§£æ â†’ å›¾ç‰‡æå–ä¸è§†è§‰å¢å¼º â†’ æ–‡æœ¬åˆå¹¶ä¸åˆ†è¯ã€‚</strong></p>
<p><strong>æ ¸å¿ƒæµç¨‹ä¸€è§ˆï¼š</strong></p>
<ol>
<li><strong>ç»“æ„è§£æ</strong>ï¼š<br/>
ä½¿ç”¨ <code>MarkdownElementExtractor</code> æå–æ ‡é¢˜ã€æ®µè½ã€åˆ—è¡¨ã€ä»£ç å—ã€å¼•ç”¨ç­‰è¯­ä¹‰å•å…ƒã€‚</li>
<li><strong>è¡¨æ ¼æå–</strong>ï¼š<br/>
è¯†åˆ«æ ‡å‡†ä¸æ— è¾¹æ¡† Markdown è¡¨æ ¼ï¼Œé€‰æ‹©â€œåˆ†ç¦»æ¨¡å¼â€æˆ–â€œæ¸²æŸ“æ¨¡å¼â€è¿›è¡Œå­˜å‚¨ã€‚</li>
<li><strong>å›¾ç‰‡å¤„ç†</strong>ï¼š<br/>
ä»æ–‡æœ¬ä¸­æå–å›¾ç‰‡é“¾æ¥ï¼Œä¸‹è½½æˆ–åŠ è½½æœ¬åœ°å›¾ç‰‡ï¼›åˆå¹¶åŒä¸€æ®µè½çš„å›¾ç‰‡ï¼Œå¹¶äº¤ç”±è§†è§‰æ¨¡å‹ç”Ÿæˆè¯­ä¹‰æè¿°ã€‚</li>
<li><strong>å¤šæ¨¡æ€èåˆ</strong>ï¼š<br/>
å°†æ–‡æœ¬ä¸è§†è§‰æè¿°æ‹¼æ¥ï¼Œå½¢æˆå…·å¤‡ä¸Šä¸‹æ–‡çš„è¯­ä¹‰æ®µã€‚</li>
<li><strong>åˆ†è¯ä¸åˆ‡å—</strong>ï¼š<br/>
æœ€ç»ˆè°ƒç”¨ <code>naive_merge_with_images</code> ä¸ <code>tokenize_chunks_with_images</code>ï¼Œå®Œæˆåˆ‡åˆ†æ–‡æœ¬ä¸å›¾ç‰‡çš„å…³è”ã€‚</li>
</ol>
<p><strong>è®¾è®¡äº®ç‚¹</strong></p>
<ul>
<li><strong>åŒæ¨¡è¡¨æ ¼è§£æä½“ç³»</strong>ï¼šåŒæ—¶å…¼å®¹â€œæ ‡å‡†è¡¨æ ¼ï¼ˆå¸¦è¾¹æ¡†ï¼‰â€ä¸â€œæ— è¾¹æ¡†è¡¨æ ¼â€ï¼Œæ”¯æŒç‹¬ç«‹å­˜å‚¨ï¼ˆç»“æ„åŒ–è¾“å…¥ï¼‰ä¸æ¸²æŸ“æ›¿æ¢ï¼ˆè§†è§‰è¿˜åŸï¼‰ï¼Œä¿è¯å‡†ç¡®æ€§ä¸å¯è¯»</li>
</ul>
<h2 data-id="heading-2">æ‰‹æ’•ç‰ˆ</h2>
<h3 data-id="heading-3">1. è§£æå™¨åˆå§‹åŒ–</h3>
<pre><code class="hljs language-python" lang="python">markdown_parser = Markdown(<span class="hljs-built_in">int</span>(parser_config.get(<span class="hljs-string">"chunk_token_num"</span>, <span class="hljs-number">128</span>)))
</code></pre>
<h4 data-id="heading-4">1.1 Markdown ç±»</h4>
<p>ç»§æ‰¿ <code>MarkdownParser</code> åŸºç±»ï¼Œè§£æè¡¨æ ¼ï¼›ä½¿ç”¨ <code>MarkdownElementExtractor().extract_elements()</code> è§£ææ–‡æœ¬å†…å®¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Markdown</span>(<span class="hljs-title class_ inherited__">MarkdownParser</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, filename, binary=<span class="hljs-literal">None</span>, separate_tables=<span class="hljs-literal">True</span></span>):
        <span class="hljs-keyword">if</span> binary:
            encoding = find_codec(binary)
            txt = binary.decode(encoding, errors=<span class="hljs-string">"ignore"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">"r"</span>) <span class="hljs-keyword">as</span> f:
                txt = f.read()

        remainder, tables = self.extract_tables_and_remainder(<span class="hljs-string">f'<span class="hljs-subst">{txt}</span>\n'</span>, separate_tables=separate_tables)

        extractor = MarkdownElementExtractor(txt)
        element_sections = extractor.extract_elements()
        sections = [(element, <span class="hljs-string">""</span>) <span class="hljs-keyword">for</span> element <span class="hljs-keyword">in</span> element_sections]

        tbls = []
        <span class="hljs-keyword">for</span> table <span class="hljs-keyword">in</span> tables:
            tbls.append(((<span class="hljs-literal">None</span>, markdown(table, extensions=[<span class="hljs-string">'markdown.extensions.tables'</span>])), <span class="hljs-string">""</span>))
        <span class="hljs-keyword">return</span> sections, tbls
</code></pre>
<h4 data-id="heading-5">1.2 MarkdownParser åŸºç±»</h4>
<p><strong>extract_tables_and_remainder</strong>ï¼šæå–æ–‡æ¡£ä¸­çš„è¡¨æ ¼ä»¥åŠå…¶ä»–éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-6">1.2.1 extract_tables_and_remainder</h4>
<p><strong>1ï¼‰ä¸¤ç§è¡¨æ ¼è¯†åˆ«æ–¹æ¡ˆï¼Œå…¼å®¹ markdown ä¸­ä¸¤ç§è¡¨æ ¼çš„è¯­æ³•å½¢å¼ã€‚</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> <span class="hljs-string">"|"</span> <span class="hljs-keyword">in</span> markdown_text:  <span class="hljs-comment"># for optimize performance</span>
    <span class="hljs-comment"># æ ‡å‡† Markdown è¡¨æ ¼</span>
    border_table_pattern = re.<span class="hljs-built_in">compile</span>(
        <span class="hljs-string">r"""
        (?:\n|^)
        (?:\|.*?\|.*?\|.*?\n)
        (?:\|(?:\s*[:-]+[-| :]*\s*)\|.*?\n)
        (?:\|.*?\|.*?\|.*?\n)+
    """</span>,
        re.VERBOSE,
    )
    working_text = replace_tables_with_rendered_html(border_table_pattern, tables)

    <span class="hljs-comment"># æ— è¾¹æ¡† Markdown è¡¨æ ¼</span>
    no_border_table_pattern = re.<span class="hljs-built_in">compile</span>(
        <span class="hljs-string">r"""
        (?:\n|^)
        (?:\S.*?\|.*?\n)
        (?:(?:\s*[:-]+[-| :]*\s*).*?\n)
        (?:\S.*?\|.*?\n)+
        """</span>,
        re.VERBOSE,
    )
    working_text = replace_tables_with_rendered_html(no_border_table_pattern, tables)
</code></pre>
<p><strong>æ ‡å‡† Markdown è¡¨æ ¼</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä½¿ç”¨ç®¡é“ç¬¦ | åŒ…å›´æ‰€æœ‰å•å…ƒæ ¼
<span class="hljs-bullet">2.</span> å¿…é¡»æœ‰åˆ†éš”çº¿è¡Œï¼ˆç¬¬äºŒè¡Œï¼‰
<span class="hljs-bullet">3.</span> å•å…ƒæ ¼å†…å®¹å¯ä»¥åŒ…å«ç©ºæ ¼

| å§“å | å¹´é¾„ | éƒ¨é—¨ | è–ªèµ„ |
|------|------|------|------|
| å¼ ä¸‰ | 25   | æŠ€æœ¯éƒ¨ | 15000 |
| æå›› | 30   | é”€å”®éƒ¨ | 12000 |
| ç‹äº” | 28   | å¸‚åœºéƒ¨ | 13000 |
</code></pre>
<p><strong>æ— è¾¹æ¡† Markdown è¡¨æ ¼</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> åªæœ‰åˆ†éš”çº¿è¡Œä½¿ç”¨ | å’Œ -
<span class="hljs-bullet">2.</span> æ•°æ®è¡Œçš„å•å…ƒæ ¼ä¸è¢« | åŒ…å›´

å§“å å¹´é¾„ éƒ¨é—¨ è–ªèµ„
---- ---- ---- -----
å¼ ä¸‰ 25   æŠ€æœ¯éƒ¨ 15000
æå›› 30   é”€å”®éƒ¨ 12000
ç‹äº” 28   å¸‚åœºéƒ¨ 13000
</code></pre>
<p><strong>2ï¼‰ä¸¤ç§è¡¨æ ¼è§£ææ–¹æ¡ˆ</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> separate_tables:
    <span class="hljs-comment"># Skip this match (i.e., remove it)</span>
    new_text += working_text[last_end : <span class="hljs-keyword">match</span>.start()] + <span class="hljs-string">"\n\n"</span>
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># Replace with rendered HTML</span>
    html_table = markdown(raw_table, extensions=[<span class="hljs-string">"markdown.extensions.tables"</span>]) <span class="hljs-keyword">if</span> render <span class="hljs-keyword">else</span> raw_table
    new_text += working_text[last_end : <span class="hljs-keyword">match</span>.start()] + html_table + <span class="hljs-string">"\n\n"</span>
</code></pre>
<p><strong>è¡¨æ ¼åˆ†ç¦»æ¨¡å¼ (separate_tables=True)</strong></p>
<p>å°†æ•´ä¸ªè¡¨æ ¼è½¬æ¢æˆæ–‡æœ¬ï¼Œä¿è¯è¯­ä¹‰å®Œæ•´æ€§ï¼Œä½œä¸ºåç»­åˆ‡åˆ†å’Œé‡åŒ–çš„æ•°æ®åŸºç¡€ã€‚</p>
<pre><code class="hljs language-erlang" lang="erlang">è¾“å…¥ Markdown:
æ­£æ–‡...
| å§“å | å¹´é¾„ | éƒ¨é—¨ |
|------|------|------|
| å¼ ä¸‰ | <span class="hljs-number">25</span>   | æŠ€æœ¯ |
æ­£æ–‡...

è¾“å‡º:
æ­£æ–‡...
æ­£æ–‡...

è¡¨æ ¼å•ç‹¬å­˜å‚¨: [<span class="hljs-string">"| å§“å | å¹´é¾„ | éƒ¨é—¨ |\n|------|------|------|\n| å¼ ä¸‰ | 25   | æŠ€æœ¯ |"</span>]
</code></pre>
<p><strong>è¡¨æ ¼æ¸²æŸ“æ¨¡å¼ (separate_tables=False)</strong></p>
<p>ä¿æŒåŸå§‹æ ¼å¼å’Œæ ·å¼ï¼Œæ»¡è¶³é‡ç°æ–‡æ¡£å¤–è§‚éœ€è¦ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">è¾“å…¥ Markdown:
æ­£æ–‡...
| å§“å | å¹´é¾„ | éƒ¨é—¨ |
|------|------|------|
| å¼ ä¸‰ | 25   | æŠ€æœ¯ |
æ­£æ–‡...

è¾“å‡º:
æ­£æ–‡...
<span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å¹´é¾„<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>éƒ¨é—¨<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>25<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>æŠ€æœ¯<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
æ­£æ–‡...
</code></pre>
<h4 data-id="heading-7">1.3 MarkdownElementExtractor ç±»</h4>
<p>å»ºç«‹é’ˆå¯¹ Markdown è¯­æ³•è§„åˆ™ï¼Œé€šè¿‡ä¸åŒè§„åˆ™è§£ææ–‡æœ¬ä¸­çš„å„ä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_elements</span>(<span class="hljs-params">self</span>):
    sections = []
    i = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> i &lt; <span class="hljs-built_in">len</span>(self.lines):
        line = self.lines[i]
        
        <span class="hljs-comment"># ä¼˜å…ˆçº§è§£æé¡ºåº</span>
        <span class="hljs-keyword">if</span> re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r"^#{1,6}\s+.*$"</span>, line):           <span class="hljs-comment"># 1. æ ‡é¢˜</span>
            element = self._extract_header(i)
        <span class="hljs-keyword">elif</span> line.strip().startswith(<span class="hljs-string">"```"</span>):           <span class="hljs-comment"># 2. ä»£ç å—</span>
            element = self._extract_code_block(i)
        <span class="hljs-keyword">elif</span> re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r"^\s*[-*+]\s+.*$"</span>, line) <span class="hljs-keyword">or</span> \   <span class="hljs-comment"># 3. åˆ—è¡¨</span>
             re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r"^\s*\d+\.\s+.*$"</span>, line):
            element = self._extract_list_block(i)
        <span class="hljs-keyword">elif</span> line.strip().startswith(<span class="hljs-string">"&gt;"</span>):             <span class="hljs-comment"># 4. å¼•ç”¨å—</span>
            element = self._extract_blockquote(i)
        <span class="hljs-keyword">elif</span> line.strip():                             <span class="hljs-comment"># 5. æ–‡æœ¬å—</span>
            element = self._extract_text_block(i)
        <span class="hljs-keyword">else</span>:                                          <span class="hljs-comment"># 6. ç©ºè¡Œ</span>
            i += <span class="hljs-number">1</span>
            <span class="hljs-keyword">continue</span>
        
        sections.append(element[<span class="hljs-string">"content"</span>])
        i = element[<span class="hljs-string">"end_line"</span>] + <span class="hljs-number">1</span>  <span class="hljs-comment"># è·³åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ </span>
    
    <span class="hljs-keyword">return</span> [section <span class="hljs-keyword">for</span> section <span class="hljs-keyword">in</span> sections <span class="hljs-keyword">if</span> section.strip()]
</code></pre>
<hr/>
<h3 data-id="heading-8">2. é€šè¿‡è§£æå™¨ <code>markdown_parser</code> è§£æå‡ºæ–‡æœ¬ç»“æ„å’Œè¡¨æ ¼å†…å®¹ã€‚</h3>
<pre><code class="hljs language-python" lang="python">sections, tables = markdown_parser(filename, binary, separate_tables=<span class="hljs-literal">False</span>)
</code></pre>
<hr/>
<h3 data-id="heading-9">3. è·å– section ä¸­çš„å›¾ç‰‡</h3>
<pre><code class="hljs language-python" lang="python">section_images = []
<span class="hljs-keyword">for</span> idx, (section_text, _) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(sections):
    images = markdown_parser.get_pictures(section_text) <span class="hljs-keyword">if</span> section_text <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
</code></pre>
<h4 data-id="heading-10">3.1 markdown_parser.get_pictures</h4>
<p>1ï¼‰è·å–å›¾ç‰‡é“¾æ¥</p>
<pre><code class="hljs language-python" lang="python">image_urls = self.get_picture_urls(text)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_picture_urls</span>(<span class="hljs-params">self, sections</span>):
    ...
    <span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
    <span class="hljs-comment"># å°† markdown æ–‡æ¡£è½¬æ¢æˆ html</span>
    html_content = markdown(text)
    soup = BeautifulSoup(html_content, <span class="hljs-string">'html.parser'</span>)
    <span class="hljs-comment"># æå–å›¾ç‰‡é“¾æ¥</span>
    html_images = [img.get(<span class="hljs-string">'src'</span>) <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> soup.find_all(<span class="hljs-string">'img'</span>) <span class="hljs-keyword">if</span> img.get(<span class="hljs-string">'src'</span>)]
    <span class="hljs-keyword">return</span> html_images
</code></pre>
<p>2ï¼‰è·å–å›¾ç‰‡ï¼ˆè¿œç¨‹ or æœ¬åœ°ï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">if</span> url.startswith((<span class="hljs-string">'http://'</span>, <span class="hljs-string">'https://'</span>)):
    <span class="hljs-comment"># è¿œç¨‹ URLï¼šä¸‹è½½å›¾ç‰‡</span>
    response = requests.get(url, stream=<span class="hljs-literal">True</span>, timeout=<span class="hljs-number">30</span>)
    <span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span> <span class="hljs-keyword">and</span> response.headers[<span class="hljs-string">'Content-Type'</span>].startswith(<span class="hljs-string">'image/'</span>):
        img = Image.<span class="hljs-built_in">open</span>(BytesIO(response.content)).convert(<span class="hljs-string">'RGB'</span>)
        images.append(img)
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼šç›´æ¥æ‰“å¼€</span>
    <span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
    local_path = Path(url)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> local_path.exists():
        logging.warning(<span class="hljs-string">f"Local image file not found: <span class="hljs-subst">{url}</span>"</span>)
        <span class="hljs-keyword">continue</span>
    img = Image.<span class="hljs-built_in">open</span>(url).convert(<span class="hljs-string">'RGB'</span>)
    images.append(img)
</code></pre>
<h3 data-id="heading-11">4. å‚ç›´åˆå¹¶åŒä¸€ä¸ª section ä¸­å›¾ç‰‡ï¼Œä½¿ç”¨è§†è§‰æ¨¡å‹å°†å›¾ç‰‡è§£ææˆæ–‡æœ¬æè¿°</h3>
<pre><code class="hljs language-python" lang="python">combined_image = reduce(concat_img, images) <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(images) &gt; <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> images[<span class="hljs-number">0</span>]
section_images.append(combined_image)
markdown_vision_parser = VisionFigureParser(vision_model=vision_model, figures_data= [((combined_image, [<span class="hljs-string">"markdown image"</span>]), [(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)])], **kwargs)
boosted_figures = markdown_vision_parser(callback=callback)
sections[idx] = (section_text + <span class="hljs-string">"\n\n"</span> + <span class="hljs-string">"\n\n"</span>.join([fig[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] <span class="hljs-keyword">for</span> fig <span class="hljs-keyword">in</span> boosted_figures]), sections[idx][<span class="hljs-number">1</span>])
</code></pre>
<blockquote>
<p><em>VisionFigureParser çš„è¯¦ç»†è§£æå¯å‚è€ƒã€Šnaive parser è¯­ä¹‰åˆ‡å—ï¼ˆdocx ç¯‡ï¼‰ã€‹ä¸­çš„ VisionFigureParser ç±»æ¨¡å—</em></p>
</blockquote>
<h3 data-id="heading-12">5. å¯¹æ–‡æœ¬å’Œè¡¨æ ¼å†…å®¹è¿›è¡Œåˆ†è¯</h3>
<pre><code class="hljs language-python" lang="python">res = tokenize_table(tables, doc, is_english)
</code></pre>
<blockquote>
<p><em>tokenize_table çš„è¯¦ç»†è§£æå¯å‚è€ƒã€Šnavie åˆ†è¯å™¨åŸç†ã€‹</em></p>
</blockquote>
<hr/>
<h3 data-id="heading-13">6. sections åå¤„ç†</h3>
<pre><code class="hljs language-python" lang="python">chunks, images = naive_merge_with_images(sections, section_images,
                                <span class="hljs-built_in">int</span>(parser_config.get(
                                    <span class="hljs-string">"chunk_token_num"</span>, <span class="hljs-number">128</span>)), parser_config.get(
                                    <span class="hljs-string">"delimiter"</span>, <span class="hljs-string">"\n!?ã€‚ï¼›ï¼ï¼Ÿ"</span>))
res.extend(tokenize_chunks_with_images(chunks, doc, is_english, images))
</code></pre>
<p><strong>naive_merge_with_images</strong>ï¼šå°†æ¯ä¸ª section ä¸åˆå¹¶åçš„ section å›¾ç‰‡è¿›è¡Œå…³è”ã€‚å¦‚æœæ˜¯è·¨é¡µçš„ chunkï¼Œåˆ™éœ€è¦å°†ä¸¤é¡µçš„å›¾ç‰‡åˆå¹¶åè¿›è¡Œå…³è”ã€‚</p>
<p><strong>tokenize_chunks_with_images</strong>ï¼šåˆ†è¯ï¼Œè¿”å›ç»Ÿä¸€æ ¼å¼çš„ç»“æ„åŒ–æ–‡æ¡£å—ï¼Œä½œä¸ºåç»­å‘é‡åŒ–è¾“å…¥ã€‚</p>
<h2 data-id="heading-14">ä¸‹æœŸé¢„å‘Š</h2>
<p>åœ¨æœ¬æœŸã€Šã€è§£å¯†æºç ã€‘RAGFlow åˆ‡åˆ†æœ€ä½³å®è·µ- naive parser è¯­ä¹‰åˆ‡å—ï¼ˆmarkdown ç¯‡ï¼‰ã€‹ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥å‰–æäº† .md æ–‡æ¡£åœ¨ RAGFlow ä¸­çš„å®Œæ•´è§£ææµæ°´çº¿ï¼ŒåŒºåˆ«äºä¹‹å‰ docxï¼Œpdf æ–‡æ¡£è§£æï¼Œé€šè¿‡æ ¹æ® markdown ä¸ç”Ÿä¿±æ¥çš„ç»“æ„åŒ–è¯­æ³•è¿›è¡Œæ–‡æœ¬è§£æåï¼Œå°†æ–‡æ¡£ä¸­çš„å›¾ç‰‡å•ç‹¬è§£æå‡ºæ¥ï¼Œæœ€åè¿›è¡Œå…³è”ã€‚</p>
<p>åœ¨ä¸‹ä¸€æœŸä¸­ï¼Œæˆ‘ä»¬å°†å‰–æ naive parser ä¸‹æœ€åçš„ä¸‰ä¸ªæ–‡ä»¶ç±»å‹ html|json|doc çš„è¯­ä¹‰åˆ‡å—æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éŸ³è§†é¢‘é€šç”¨ç»„ä»¶è®¾è®¡æ¢ç´¢å’Œåº”ç”¨]]></title>    <link>https://juejin.cn/post/7570651893867855924</link>    <guid>https://juejin.cn/post/7570651893867855924</guid>    <pubDate>2025-11-10T04:41:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570651893867855924" data-draft-id="7570306250027974708" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éŸ³è§†é¢‘é€šç”¨ç»„ä»¶è®¾è®¡æ¢ç´¢å’Œåº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯,éŸ³è§†é¢‘å¼€å‘"/> <meta itemprop="datePublished" content="2025-11-10T04:41:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ”¿é‡‡äº‘æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3456520257288974"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éŸ³è§†é¢‘é€šç”¨ç»„ä»¶è®¾è®¡æ¢ç´¢å’Œåº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520257288974/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ”¿é‡‡äº‘æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:41:30.000Z" title="Mon Nov 10 2025 04:41:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1ã€èƒŒæ™¯ä»‹ç»</h3>
<p>ä¸šåŠ¡å±‚é¢ï¼ŒåŸºäºå›½å®¶å‘å±•æ”¹é©å§”åŠå…¬å…æ—¥å‰å°å‘å…³äºåŠ å¿«æ¨å¹¿è¿œç¨‹å¼‚åœ°è¯„æ ‡çš„é€šçŸ¥ï¼Œéƒ¨ç½²åœ¨å…¨å›½èŒƒå›´å†…åŠ å¿«æ¨å¹¿è¿œç¨‹å¼‚åœ°è¯„æ ‡ï¼Œé‡åœ¨è§£å†³ä¼ ç»Ÿçš„è¯„æ ‡é—®é¢˜ï¼Œæå‡æ•´ä½“çš„å…¬å¹³æ€§å’Œå…¬æ­£æ€§ï¼Œä¼˜åŒ–ä¸“å®¶èµ„æºçš„è¯„æ ‡é…ç½®ï¼ŒéŸ³è§†é¢‘ä½œä¸ºæ•´ä¸ªä¸šåŠ¡æµç¨‹ä¸­è¯„æ ‡ç¯èŠ‚å…³é”®çš„æ¡¥æ¢ï¼Œèµ·ç€é‡å¤§çš„ä½œç”¨ã€‚</p>
<p>æŠ€æœ¯å±‚é¢ï¼Œé’ˆå¯¹ç›®å‰å„ä¸­å¿ƒç›¸å…³éŸ³è§†é¢‘çš„è¯‰æ±‚ï¼Œä»¥åŠç›®å‰å‡ºç°çš„éŸ³è§†é¢‘å¯¹æ¥æˆæœ¬é«˜ã€æ ‡å‡†ä¸ç»Ÿä¸€ã€è´¨é‡éš¾æŠŠæ§ã€ä½“éªŒä¸ä¸€è‡´ç­‰ç›¸å…³é—®é¢˜ï¼Œæå‡æ•´ä½“ç ”å‘æ•ˆç‡ï¼Œæ”¶æ•›ç”¨æˆ·ä½“éªŒã€ç»Ÿä¸€å¼€å‘æ ‡å‡†ï¼Œä¿è¯ç›¸å…³æ€§èƒ½æ£€æµ‹ç­‰è‡³å…³é‡è¦ã€‚ä¸‹é¢æˆ‘å°†è¯¦ç»†ä»‹ç»ä¸‹åœ¨æœ¬æ¬¡ç ”å‘è¿‡ç¨‹ä¸­ï¼ŒåŸºäºéŸ³è§†é¢‘ç›¸å…³åº•å±‚åŸç†çš„æ¢ç´¢å’Œé€šç”¨åŒ–ç»„ä»¶è®¾è®¡è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜æ¢è®¨ã€‚</p>
<h4 data-id="heading-1">1.1 éŸ³è§†é¢‘ç›‘æ§</h4>
<p>æ•´ä¸ªè¯„æ ‡ç¯èŠ‚ï¼Œä¸»è¦ç”¨åˆ°éŸ³è§†é¢‘å¼ºåŒ–ç›‘ç®¡æ‰‹æ®µåŒ…æ‹¬ä¸‹é¢ä¸‰å¤§æ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c75027b6a55d44c584345acdae18c989~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=sE07cXl9C2Qai8%2BYm2jMfn9XKFw%3D" alt="image.png" loading="lazy"/></p>
<p>åŠ å¼ºç”µå­åŒ–è¯„æ ‡è¿‡ç¨‹ä¸­çš„ç›‘ç®¡åŠ›åº¦ï¼Œå¯¹äºéŸ³è§†é¢‘å„æ–¹é¢çš„èƒ½åŠ›ï¼Œè¦æ±‚éå¸¸é«˜ï¼Œæ»¡è¶³ä¸šåŠ¡çš„æ•´ä½“ç”µå­åŒ–è¯„æ ‡æµç¨‹ï¼Œé’ˆå¯¹ä¸åŒçš„ä¸šåŠ¡åœºæ™¯åšå®šåˆ¶åŒ–å¤„ç†ï¼Œé‚£ä¹ˆå­µåŒ–ä¸€æ¬¾éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶çš„äº§å“ï¼Œæä¾›ä¸€ç«™å¼é…ç½®éŸ³è§†é¢‘çš„èƒ½åŠ›ï¼Œå¾ˆæœ‰å¿…è¦ã€‚å¯ä»¥æœ‰æ•ˆè§£å†³ä¸åŒå›¢é˜Ÿæ¥å…¥çš„æˆæœ¬é«˜ã€ä¸šåŠ¡å®šåˆ¶åŒ–ã€å¼€è¯„åŒå±ç­‰é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">2ã€éŸ³è§†é¢‘<code>WebRTC</code>ä»‹ç»</h3>
<h4 data-id="heading-3">2.1 åŸºæœ¬åŸç†</h4>
<p>éŸ³è§†é¢‘åº•å±‚èƒ½åŠ›ï¼Œæ˜¯åŸºäºæµè§ˆå™¨æä¾›çš„WEBç«¯ç‚¹å¯¹ç‚¹ä¹‹é—´é€šä¿¡çš„<code>WebRTC</code>çš„èƒ½åŠ›ï¼Œé€šè¿‡æµè§ˆå™¨æä¾›çš„APIï¼Œ å¯åœ¨ç½‘é¡µç«¯å®ç°éŸ³è§†é¢‘é€šä¿¡ï¼Œ<code>WebRTC</code>ä¸»è¦æä¾›äº†2ç§èƒ½åŠ›ï¼Œ<code>åª’ä½“æ•è·è®¾å¤‡</code>å’Œ<code>ç‚¹å¯¹ç‚¹è¿æ¥</code>ã€‚</p>
<p>aã€éŸ³è§†é¢‘<code>ç‚¹å¯¹ç‚¹è¿æ¥</code>çš„åŸºæœ¬åŸç†æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/847a19a6a25f42fc998d27bc64083e3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=WZR9E%2FZZMcjiDsunoZgoTjthSK8%3D" alt="image.png" loading="lazy"/></p>
<p>å®¢æˆ·ç«¯A ä¸å®¢æˆ·ç«¯Bä¹‹é—´ï¼Œå› ä¸ºé˜²ç«å¢™çš„é™åˆ¶æ˜¯æ— æ³•è¿›è¡Œé€šä¿¡çš„ï¼Œéœ€è¦å€ŸåŠ©TURNæœåŠ¡å™¨ï¼Œè¿›è¡Œç‚¹ä¸ç‚¹ä¹‹é—´çš„é“¾æ¥ï¼Œå¤§è‡´åŸºæœ¬åŸç†å¯ä»¥ç”¨ä¸‹å›¾æ¥è¯´æ˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa12a1b557da4348ae292fdcf9d5aefc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=KnjdTwx9bj1nWNffz%2FPFkPJdj4Y%3D" alt="image.png" loading="lazy"/></p>
<p>bã€éŸ³è§†é¢‘<code>åª’ä½“æ•è·è®¾å¤‡</code>çš„è·å–</p>
<p>åª’ä½“æ•è·è®¾å¤‡åŒ…æ‹¬æ‘„åƒå¤´å’Œéº¦å…‹é£ï¼Œè¿˜åŒ…æ‹¬å±å¹•æ•è·è®¾å¤‡ã€‚å¯¹äºæ‘„åƒå¤´å’Œéº¦å…‹é£ï¼Œè°ƒç”¨Â <code>navigator.mediaDevices.getUserMedia()</code>Â æ¥æ•è·Â <code>MediaStreams</code>ã€‚å¯¹äºå±å¹•å½•åˆ¶ï¼Œä½¿ç”¨Â <code>navigator.mediaDevices.getDisplayMedia()</code>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‘„åƒå¤´å’Œéº¦å…‹é£</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">openMediaDevices</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">constraints</span>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">getUserMedia</span>(constraints);
}

<span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> stream = <span class="hljs-title function_">openMediaDevices</span>({<span class="hljs-string">'video'</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">'audio'</span>:<span class="hljs-literal">true</span>});
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éŸ³è§†é¢‘æµæ•°æ®:'</span>, stream);
} <span class="hljs-keyword">catch</span>(error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
}
</code></pre>
<p>å¦‚æœå­˜åœ¨å¤–æ¥è®¾å¤‡æ‘„åƒå¤´æˆ–è€…éº¦å…‹é£ï¼Œæ­¤æ—¶ï¼Œéœ€è¦å»æŸ¥è¯¢æ‰€æœ‰å½“å‰å®¢æˆ·ç«¯çš„æ‰€æœ‰è®¾å¤‡ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•°Â <code>enumerateDevices()</code>Â æ¥å®ç° ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> getConnectedDevices = <span class="hljs-title function_">async</span>(<span class="hljs-params"><span class="hljs-keyword">type</span></span>) {
    <span class="hljs-keyword">const</span> devices = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">enumerateDevices</span>();
    <span class="hljs-keyword">return</span> devices.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">device</span> =&gt;</span> device.<span class="hljs-property">kind</span> === <span class="hljs-keyword">type</span>)
}

<span class="hljs-keyword">const</span> videoCameras = <span class="hljs-title function_">getConnectedDevices</span>(<span class="hljs-string">'videoinput'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰çš„æ‘„åƒå¤´çš„æ•°æ®:'</span>, videoCameras);
</code></pre>
<p>æ‹¿åˆ°éŸ³è§†é¢‘æµä¹‹åï¼Œéœ€è¦è¿›è¡Œæ’­æ”¾ï¼Œå¯ä»¥å°†å…¶èµ‹å€¼ç»™è§†é¢‘çš„<code>DOM</code>å…ƒç´ ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const  <span class="hljs-attr">play</span> = async() {
    try {
        const <span class="hljs-attr">constraints</span> = {<span class="hljs-string">'video'</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">'audio'</span>: <span class="hljs-literal">true</span>}<span class="hljs-comment">;</span>
        const <span class="hljs-attr">stream</span> = await navigator.mediaDevices.getUserMedia(constraints)<span class="hljs-comment">;</span>
        const <span class="hljs-attr">videoElement</span> = document.querySelector(<span class="hljs-string">'video#localVideo'</span>)<span class="hljs-comment">;</span>
        <span class="hljs-attr">videoElement.srcObject</span> = stream<span class="hljs-comment">;</span>
    } catch(error) {
        console.error('Error opening video camera.', error)<span class="hljs-comment">;</span>
    }
}

return (
  &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"video-demo-container"</span>&gt;
    &lt;video <span class="hljs-attr">id</span>=<span class="hljs-string">"localVideo"</span> autoplay playsinline controls=<span class="hljs-string">"false"</span>/&gt;
  &lt;/div&gt;
)
</code></pre>
<h4 data-id="heading-4">2.2 <code>WebRTC</code>é€šä¿¡åè®®ä»‹ç»</h4>
<p><code>WebRTC</code>çš„ä¼ è¾“åè®®ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼ŒåŸºäºä¸‹é¢å‡ ä¸ªåè®®æ¥ä¿è¯å®æ—¶éŸ³è§†é¢‘æ—¢æµç•…åˆå®‰å…¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7db140d380148bc8ae692864675d23a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=K8rMQtj%2BukyCQ3bs6o9fkCRRIIA%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¸‹é¢åˆ†åˆ«çœ‹ä¸‹ï¼Œè¿™å‡ ç§åè®®å„è‡ªåœ¨éŸ³è§†é¢‘ä¸­èµ·åˆ°çš„ä½œç”¨å’Œåˆ†å·¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e5af1a5273549e9a26b9a1a916d287b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=Ay6fj2nuR7icblned5yfWXH5nhU%3D" alt="image.png" loading="lazy"/></p>
<p>æåˆ°DTLSåè®® ï¼Œ å¤§å®¶åº”è¯¥çŸ¥é“å¦å¤–ä¸€ä¸ªTLSåè®® ï¼Œä½†æ˜¯TLSåè®®æ˜¯ä¸ºTCPè®¾è®¡çš„ï¼Œå®ƒä¾èµ–äºTCPçš„å¯é ã€æœ‰åºä¼ è¾“ï¼Œè€ŒUDPæ˜¯ä¸å¯é ã€ä¸ä¿è¯é¡ºåºçš„ï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨TLSï¼Œå› æ­¤ï¼ŒDTLSä¸»è¦æ˜¯ä¸ºUDPè®¾è®¡çš„ã€‚å¦‚ä¸‹<code>WebRTC</code>å„åè®®å·¥ä½œæµç¨‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd4a556dbeda4dc3bd0319ab132d5097~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=UxZJfm0e6XiNxNNuB7m0xCh%2BUoQ%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">2.3 <code>WebRTC</code>éŸ³è§†é¢‘å®ç°è¿‡ç¨‹</h4>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ•´ä¸ªéŸ³è§†é¢‘è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ å‰æœŸçš„å‡†å¤‡é˜¶æ®µã€ä¿¡ä»¤é˜¶æ®µã€é“¾æ¥é˜¶æ®µã€æœ€åçš„é€šä¿¡é˜¶æ®µï¼Œå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºæµç¨‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdc1169f1bdf46808b7dad389cc0d339~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=vaTVLT7BValztQp%2FgcBr8TwZn7I%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ›å»ºOfferçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> peerConnection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RTCPeerConnection</span>();
<span class="hljs-comment">// åˆ›å»ºSDP</span>
peerConnection.<span class="hljs-title function_">createOffer</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">offer</span>) {
  <span class="hljs-comment">// ...</span>
}, <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);
});
</code></pre>
<p>åŸºäºä»¥ä¸Šæ•´ä¸ªéŸ³è§†é¢‘çš„åº•å±‚èƒ½åŠ›ï¼Œä¸‹é¢æˆ‘è¿™è¾¹å°†è¯¦ç»†ä»‹ç»ä¸‹ï¼ŒåŸºäºæˆ‘ä»¬çš„å…¬å¸çš„ä¸šåŠ¡æƒ…å†µï¼Œé’ˆå¯¹ä¸šåŠ¡çš„èƒŒæ™¯å’Œè¯‰æ±‚ï¼Œæä¾›çš„ä¸€ç«™å¼æ¥å…¥éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶çš„ç›¸å…³è®¾è®¡å’Œé—®é¢˜æ¢è®¨ã€‚</p>
<h3 data-id="heading-6">3ã€éŸ³è§†é¢‘é€šç”¨ç»„ä»¶è®¾è®¡</h3>
<h4 data-id="heading-7">3.1 ç»„ä»¶åŸºæœ¬è®¾è®¡æ€è·¯</h4>
<p>éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ï¼Œä¼šæä¾›åŸºäºéŸ³è§†é¢‘åº•å±‚èƒ½åŠ›ï¼Œæä¾›SDKå’ŒUIç»„ä»¶äºŒæ–¹åŒ…ä¸¤ä¸ªäº§ç‰©ï¼Œé’ˆå¯¹æ¯ä¸ªSDKä¸­ï¼Œä¼šæä¾›è¯­éŸ³è½¬æ–‡å­—ã€èŠå¤©ã€çº¯è¯­éŸ³ã€è§†é¢‘+è¯­éŸ³ç­‰SDK, å¯ä»¥ä¾›ä¸åŒçš„åœºæ™¯ä½¿ç”¨ï¼Œæ¯”å¦‚æ¡Œé¢å½•å±ç­‰éœ€è¦å•ç‹¬è°ƒç”¨SDK , å…¶æ¬¡é’ˆå¯¹UIç»„ä»¶ï¼Œä¼šæ‰“åŒ…å°è£…å¥½çš„æ•´å¥—UIäº§å“ï¼Œé€šè¿‡é…ç½®å‚æ•°ï¼Œå³å¯å®ç°æ•´å¥—éŸ³è§†é¢‘çš„åŠŸèƒ½å’Œä½¿ç”¨ã€‚</p>
<p>å®ç°æ•ˆæœDemoæˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b046015354f4147b27181fbe6b34fba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=NGWPLubag5tpZr94nJ6ehwgWpsg%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸Šé¢çš„Demoæˆªå›¾åŠŸèƒ½æ“ä½œæ˜¯å‚ç›´å¸ƒå±€çš„æµ®å±‚ï¼Œä¹Ÿæä¾›äº†æ°´å¹³æ–¹å‘çš„å¸ƒå±€æµ®å±‚ï¼Œä¸»è¦é€šè¿‡å‚æ•°é…ç½®ã€‚</p>
<p>æ•´ä¸ªéŸ³è§†é¢‘æ ¸å¿ƒåŠŸèƒ½åˆ†ä¸ºä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5010bf506b749658084d2b8ead50979~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=87%2BdS00yde%2BGfmguc8IJsYv21Ks%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<ul>
<li>è§†é¢‘å—çš„å¤§å°ï¼Œä¼šè·Ÿéšå½“å‰å±å¹•çš„å¤§å°ï¼Œè¿›è¡ŒåŠ¨æ€å˜åŒ–ï¼Œä¸”å®æ—¶è®¡ç®—å¤§å°ï¼Œèµ‹å€¼ç»™æ¯ä¸ªç»„ä»¶çš„åŒºåŸŸå®¹å™¨çš„å®½åº¦ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦ç›‘å¬<code>window.onResize</code>çš„å¤§å°å˜åŒ–ã€‚</li>
<li>æ“ä½œåŒºåŠŸèƒ½æ¨¡å—ï¼Œé€šè¿‡å‚æ•°é…ç½®ï¼Œç”±ä¸šåŠ¡ä¾§æ§åˆ¶å…¶æ˜¾éšï¼ŒåŒ…æ‹¬å›¾æ ‡ã€åç§°ã€ç½®ç°ç­‰ã€‚</li>
<li>å†…ç½®åŠŸèƒ½åŒºåŸŸï¼Œä¸»è¦æ˜¯é€šç”¨ç»„ä»¶æœ¬èº«æä¾›çš„å†…ç½®èƒ½åŠ›ï¼Œæ¯”å¦‚è®¨è®ºå’Œè¯­éŸ³è½¬æ–‡å­—ç­‰ã€‚</li>
<li>å¤–ç½®åŠŸèƒ½åŒºåŸŸï¼Œæ¯”å¦‚ä¸šåŠ¡è‡ªå®šä¹‰æ’å…¥çš„ç»„ä»¶é¡µé¢ï¼Œç›®å‰æä¾›2ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯åµŒå…¥å¼çš„æ’å…¥ï¼Œä¸€ç§æ˜¯æµ®å±‚å¼æ’å…¥ï¼Œä¾æ®å‚æ•°å­—æ®µ <code>isSlotComponentInsertToPage</code> æ¥åŒºåˆ†ã€‚</li>
<li>ä¸»è¦æ ¸å¿ƒçš„æ¨¡å—ï¼Œä¸»è¦åŒ…æ‹¬è§†é¢‘æ¨¡å—ã€æ“ä½œåŒºæ¨¡å—ã€å†…ç½®/è‡ªå®šä¹‰åŠŸèƒ½åŒºåŸŸæ¨¡å—ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bede8912bd6a4bcc893b8c1fd8e4d2fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=ILcSlOXG%2F%2Fmpnz2xqr%2Bx8m1gv%2BI%3D" alt="image.png" loading="lazy"/></p>
<p>æµ‹è¯•Demoä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">
import React, { useEffect, useState , useRef } from 'react'<span class="hljs-comment">;</span>

// è‡ªå®šä¹‰ç»„ä»¶å¼¹çª—
export const <span class="hljs-attr">DefineComponent</span> = (props) =&gt; {
  const {
    onRemoveSoltComponent,
    onShareScreen,
  } = props
  console.log("===defineComponent", props)
  const <span class="hljs-attr">onClickSure</span> = async () =&gt; {
    await onShareScreen?.()
    await onRemoveSoltComponent?.()
  }
  return (
    &lt;Modal
      <span class="hljs-attr">title</span>=<span class="hljs-string">"è‡ªå®šä¹‰ç»„ä»¶"</span>
      <span class="hljs-attr">visible</span>={<span class="hljs-literal">true</span>}
      <span class="hljs-attr">onCancel</span>={<span class="hljs-literal">on</span>RemoveSoltComponent}
      <span class="hljs-attr">onOk</span>={<span class="hljs-literal">on</span>ClickSure}
    &gt;
      &lt;p&gt;Some contents...&lt;/p&gt;
      &lt;p&gt;Some contents...&lt;/p&gt;
      &lt;p&gt;Some contents...&lt;/p&gt;
    &lt;/Modal&gt;
  )
}

// è‡ªå®šä¹‰ç»„ä»¶å¼¹çª—2
export const <span class="hljs-attr">DefineComponent2</span> = (props) =&gt; {

  const {
    onRemoveSoltComponent,
    targetKey
  } = props<span class="hljs-comment">;</span>
  console.log("OnCloseDialog", props)

  // å…³é—­å½“å‰ç»„ä»¶
  const <span class="hljs-attr">onRemoveSoltComponentHandle</span> = () =&gt; {
    onRemoveSoltComponent(targetKey)
  }

  return &lt;div <span class="hljs-attr">onClick</span>={<span class="hljs-literal">on</span>RemoveSoltComponentHandle}&gt;è¿™æ˜¯ä¸€ä¸ªä¸šåŠ¡æ–¹è‡ªå®šä¹‰æ’å…¥é¡µé¢çš„ä¼šè®®ç›‘æ§<span class="hljs-number">2222222</span>ç»„ä»¶ï¼Œ ç‚¹å‡»æˆ‘å¯ä»¥å…³é—­é¡µé¢&lt;/div&gt;
}

/**
 * è§†é¢‘+è¯­éŸ³çš„ç»„ä»¶ï¼Œä¸šåŠ¡æ–¹å¼•å…¥demo
 */
const <span class="hljs-attr">OnlineMeetingDemo</span> = () =&gt; {
  const <span class="hljs-section">[modalVisible, setModalVisible]</span> = useState(true)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">modalVisibleControl</span> = {
    visible: modalVisible,
    closeVisible: () =&gt; {
      setModalVisible(false)<span class="hljs-comment">;</span>
    },
  }
  // é€šç”¨æŒ‰é’®è®¾ç½®æ•°æ®, é»˜è®¤é€šç”¨ç»„ä»¶ä¸­çš„æŒ‰é’®ï¼Œå…¨éƒ¨å±•ç¤º
  const <span class="hljs-attr">generalButtonSettingsData</span> = [
    {
      btnKey: BUTTON_CONSTANTS.CHANGE_VIEW_BUTTON_KEY, // å”¯ä¸€keyå€¼
      isDisabled: <span class="hljs-literal">false</span>, // æ˜¯å¦ç½®ç°
      disabledToolTip: <span class="hljs-string">""</span>, // ç½®ç°çš„æç¤ºtooltip
      isShow: <span class="hljs-literal">true</span>, // æŒ‰é’®æ˜¯å¦æ˜¾ç¤º
      <span class="hljs-literal">on</span>ClickBefore: () =&gt; {}, // ç‚¹å‡»ä¹‹å‰
      <span class="hljs-literal">on</span>ClickAfter: () =&gt; {
        console.log(<span class="hljs-string">"åˆ‡æ¢è§†å›¾ä¹‹å"</span>)
      }, // ç‚¹å‡»ä¹‹å
    },
    ...
  ]<span class="hljs-comment">;</span>

  // è‡ªå®šä¹‰ä¸šåŠ¡ä¾§æŒ‰é’®æ•°æ®
  const <span class="hljs-attr">customButtonSettings</span> = [
    {
      btnImg: <span class="hljs-string">'https://sitecdn.zcycdn.com/1167DH/20248/68cd9c74-6493-4cff-b228-42e3f6965ce5.svg'</span>,
      btnName: <span class="hljs-string">'ä¸šåŠ¡è‡ªå®šä¹‰æŒ‰é’®åç§°'</span>,
      btnKey: <span class="hljs-string">'talkBtn'</span>,
      isDisabled: <span class="hljs-literal">false</span>, // æ˜¯å¦ç½®ç°
      isShow: <span class="hljs-literal">true</span>, // æŒ‰é’®æ˜¯å¦æ˜¾ç¤º
      <span class="hljs-literal">on</span>Click: (props) =&gt; { },
      slotComponent: &lt;div&gt;è¿™æ˜¯ä¸€ä¸ªä¸šåŠ¡æ–¹è‡ªå®šä¹‰æ’å…¥Aç»„ä»¶&lt;/div&gt;, 
      isSlotComponentInsertToPage: <span class="hljs-literal">true</span>, // è‡ªå®šä¹‰ç»„ä»¶æ˜¯å¦æ’å…¥åˆ°é¡µé¢
    },
    ...
  ]

  return (
    &lt;div
      <span class="hljs-attr">className</span>=<span class="hljs-string">"online-meeting-container"</span>
      <span class="hljs-attr">style</span>={{ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-string">'100%'</span> }}
    &gt;
        &lt;OnlineVideoMeeting
          <span class="hljs-attr">ref</span>={inputRef}
          <span class="hljs-attr">direction</span>=<span class="hljs-string">"inline"</span> // vertical | inline æ–¹å‘
          <span class="hljs-attr">style</span>={{ width: <span class="hljs-string">'100%'</span>, height: <span class="hljs-string">'100%'</span> }}
          <span class="hljs-attr">manufacturer</span>=<span class="hljs-string">"yunxin"</span>
          <span class="hljs-attr">customConfig</span>={configData} // ä¸šåŠ¡æ–¹ç›¸å…³ä¿¡æ¯æ•°æ®
          <span class="hljs-attr">generalButtonSettings</span>={generalButtonSettingsData} // é€šç”¨æŒ‰é’®ç»„ä»¶é…ç½®
          <span class="hljs-attr">customButtonSettings</span>={customButtonSettings} // è‡ªå®šä¹‰æŒ‰é’®é…ç½®
          <span class="hljs-attr">onCustomClientEvents</span>={<span class="hljs-literal">on</span>DefineClientEvents} // æ¥æ”¶åˆ°è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹ï¼Œäº‹ä»¶çš„å›è°ƒ

          <span class="hljs-attr">isCanSeeOtherVideo</span>={<span class="hljs-literal">true</span>} // é»˜è®¤ä¸º<span class="hljs-literal">true</span> å½“å‰è§’è‰²ï¼Œæ˜¯å¦å¯ä»¥çœ‹åˆ°å…¶å®ƒäººçš„è§†é¢‘ç”»é¢ ï¼ˆæ¯”å¦‚ï¼Œä¾›åº”å•†æ— æ³•çœ‹åˆ°ä¸“å®¶çš„ç”»é¢ï¼‰
          <span class="hljs-attr">isOpenAIDenoise</span>={<span class="hljs-literal">false</span>} // é»˜è®¤ä¸å¼€å¯ <span class="hljs-literal">false</span>ï¼Œæ˜¯å¦å¼€å¯å˜å£°ï¼Œå¦‚æœä¸ºç›²è¯„é¡¹ç›®ï¼Œéœ€è¦å¼€å¯å˜å£°
          <span class="hljs-attr">needAIUidList</span>={[]} // ä¼ å…¥éœ€è¦å˜å£°çš„accId ï¼Œ ä»…å½“isOpenAIDenoise ä¸º<span class="hljs-literal">true</span> æ—¶å€™ç”Ÿæ•ˆ
          <span class="hljs-attr">isSpecailRole</span>={<span class="hljs-literal">false</span>} // é»˜è®¤<span class="hljs-literal">false</span> ç‰¹æ®Šçš„è§’è‰²ï¼Œå¯ä»¥è¿›å…¥è§†é¢‘ä¼šè®®ï¼Œä½†æ˜¯ä¸å¯å¼€å¯è§†é¢‘å’ŒéŸ³é¢‘, æ¯”å¦‚ç›‘ç®¡è§’è‰²
          <span class="hljs-attr">isShowRemoveMember</span>={<span class="hljs-literal">true</span>} // é»˜è®¤ä¸æ˜¾ç¤ºï¼Œæ˜¯å¦æ˜¾ç¤ºç§»é™¤äººå‘˜çš„æŒ‰é’® ,é»˜è®¤ ä¸º<span class="hljs-literal">false</span>
          <span class="hljs-attr">isAutoStartMeeting</span>={<span class="hljs-literal">false</span>} // å¦‚æœä¸º<span class="hljs-literal">false</span> , è¯´æ˜ éœ€è¦ç‚¹å‡» å¼€å§‹ä¼šè®®ï¼Œæ‰å¯ä»¥å¯åŠ¨ä¼šè®® ï¼Œ é»˜è®¤ä¸º<span class="hljs-literal">true</span>
          <span class="hljs-attr">isJoinMeetingAutomatically</span>={<span class="hljs-literal">false</span>}  // å½“ isAutoStartMeeting ä¸º<span class="hljs-literal">false</span> æ—¶ï¼Œæ‰ä¼šç”Ÿæ•ˆï¼Œæ˜¯å¦è‡ªåŠ¨è®©å‚ä¼šäººè¿›å…¥ä¼šè®®ï¼Œ<span class="hljs-literal">true</span> æ˜¯ï¼Œ <span class="hljs-literal">false</span>çš„è¯ï¼Œéœ€è¦å‚ä¼šäººç‚¹å‡» å¼€å§‹ä¼šè®® æŒ‰é’®ï¼Œæ‰å¯ä»¥è¿›å…¥
          <span class="hljs-attr">isDisabledAllVideo</span>={<span class="hljs-literal">false</span>} // æ˜¯å¦å°†æ‰€æœ‰ä¸ä¼šè€…çš„è§†é¢‘ç”»é¢ç½®ä¸ºä¸å¯è§ï¼Œæ¯”å¦‚ç›²è¯„é¡¹ç›®çš„è¯ï¼Œå°†æ‰€æœ‰äººçš„è§†é¢‘ç”»é¢éƒ½ç½®ä¸ºä¸å¯è§ , é»˜è®¤ä¸º <span class="hljs-literal">false</span>
          <span class="hljs-attr">disabledVideoToolTip</span>=<span class="hljs-string">""</span> // è§†é¢‘æµ®å±‚tooltipæç¤º , é»˜è®¤ä¸º ç©º
          <span class="hljs-attr">peerOnLineEvent</span>={(props) =&gt; {}} // åŠ å…¥æˆ¿é—´äº‹ä»¶
          <span class="hljs-attr">peerLeaveEvent</span>={(props) =&gt; {}} // ç¦»å¼€æˆ¿é—´äº‹ä»¶
          <span class="hljs-attr">onCloseModalErrorEvents</span>={() =&gt; { }}
          <span class="hljs-attr">onPublishLocalStreamSuccess</span>={()=&gt;{ }}
          <span class="hljs-attr">shouldCrash</span>={shouldCrash}
        /&gt;
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>

}<span class="hljs-comment">;</span>
export default OnlineMeetingDemo<span class="hljs-comment">;</span>
  
</code></pre>
<p>ç»„ä»¶æš´éœ²å‡ºå»å‚æ•°ç»™å¤–éƒ¨ä½¿ç”¨ï¼Œé€šè¿‡<code>cloneElement</code> <code>useImperativeHandle</code>ã€é’©å­å‡½æ•°å›è°ƒcallBackç­‰æ–¹å¼ï¼Œè¿›è¡Œå†…å¤–éƒ¨ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<p>æ•´ä½“çš„éŸ³è§†é¢‘äº§å“è®¾è®¡å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dae76abb9924422aacc225b4d0174279~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=jzAkNb5vhqcmuA4PV7JK9x37Q1w%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-8">3.2 å¤šæ¸ é“è§†é¢‘<code>SDK</code>åè®®çº¦æŸ</h4>
<p>å› ä¸šåŠ¡çš„å‘å±•è¯‰æ±‚ï¼Œåœ¨è®¾è®¡åº•å±‚çš„<code>SDK</code>çš„æ—¶å€™ï¼Œéœ€è¦è€ƒè™‘åç»­çš„<code>SDK</code>çš„å¯æ‰©å±•æ€§ï¼Œåƒæˆ‘ä»¬çš„æ¸ é“å•†æœ‰å¤šä¸ªï¼Œæ¯ä¸ªè§†é¢‘æ¸ é“å•†æä¾›çš„å¯¹åº”çš„è§†é¢‘<code>SDK</code>æ˜¯ä¸ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå¦‚ä½•å»å…¼å®¹ä¸åŒçš„è§†é¢‘æ¸ é“å•†<code>SDK</code>å‘¢ï¼Ÿ</p>
<p>ç¬¬ä¸€ç§<code>SDK</code>è®¾è®¡æ–¹æ¡ˆï¼Œå¦‚æœæ¸ é“å•†<code>SDK</code>é¢‘ç¹æ›´æ”¹, ä»¥åŠé¢‘ç¹æ¥å…¥æ–°çš„<code>SDK</code>çš„è¯ï¼Œæ¯”è¾ƒé€‚ç”¨æ­¤ä¸šåŠ¡åœºæ™¯</p>
<p>é€šè¿‡ åœ¨è‡ªå·±çš„äºŒæ–¹åŒ…ä¸­ï¼Œç»Ÿä¸€åŠ¨æ€åŠ è½½æ³¨å…¥ ä¸åŒçš„<code>SDK</code>çš„åŒ…ç‰ˆæœ¬ï¼Œæ¯ä¸ªè§†é¢‘æ¸ é“å•†å‡ä¸ºå•ç‹¬çš„äºŒæ–¹åŒ…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ee43ab18fd14a1ab6eac5b4d6cd209a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=bdmK3jUbVruxozRACqGkYvwP8l8%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬äºŒç§<code>SDK</code>è®¾è®¡æ–¹æ¡ˆï¼Œå¦‚æœæ¸ é“å•†<code>SDK</code>è¾ƒå°‘ï¼Œä¸”æ›´æ”¹ä¸é¢‘ç¹ï¼Œé‚£ä¹ˆæ¯”è¾ƒé€‚ç”¨æ­¤ä¸šåŠ¡åœºæ™¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3831b7a26464b57a0436a7b522cdeff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=QNof6OovNpopB5aScPFlTLY%2BGdw%3D" alt="image.png" loading="lazy"/></p>
<p>ä»¥ä¸Šä¸¤ç§<code>SDK</code>è®¾è®¡æ–¹æ¡ˆï¼Œå¯¹äºæˆ‘ä»¬å½“å‰çš„ä¸šåŠ¡è¯‰æ±‚ï¼Œ<code>SDK</code>æ¸ é“å•†è¾ƒå°‘ï¼Œä¸”ç¨³å®šï¼Œé‚£ä¹ˆç›®å‰é‡‡ç”¨çš„æ˜¯ç¬¬äºŒç§è®¾è®¡æ–¹æ¡ˆï¼Œä»£ç Demoç±»ä¼¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Channel1SDK</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./channelSource/channel1"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Channel2SDK</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./channelSource/channel2"</span>;

<span class="hljs-comment">/**
 * æ ¹æ®é…ç½®è·å–å¯¹åº”çš„SDKçš„å®ä¾‹
 * <span class="hljs-doctag">@param</span> <span class="hljs-variable">type</span>
 * <span class="hljs-doctag">@returns</span>
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getSDKInstance</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"><span class="hljs-keyword">type</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">type</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯·ä¼ å…¥ä¸‰æ–¹éŸ³è§†é¢‘type"</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">"channel1"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Channel1SDK</span>();
  }
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">"channel2"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Channel2SDK</span>();
  }
  ...
};
</code></pre>
<p>é’ˆå¯¹æ¯ä¸ª<code>SDK</code>, è®¾ç½®ç»Ÿä¸€çš„åº•å±‚çš„åè®®<code>API</code>æ–¹æ³•ï¼Œå¦‚ä¸‹ç±»ä¼¼ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">AudioTransformText</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"src/public/audioTransform"</span>;
<span class="hljs-keyword">import</span>  <span class="hljs-title class_">Video</span>  <span class="hljs-keyword">from</span> <span class="hljs-string">'./video'</span>;
<span class="hljs-keyword">import</span>   <span class="hljs-variable constant_">IM</span>  <span class="hljs-keyword">from</span> <span class="hljs-string">'./im'</span>;
<span class="hljs-keyword">import</span>   <span class="hljs-title class_">Audio</span>  <span class="hljs-keyword">from</span> <span class="hljs-string">'./audio'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Utils</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BaseSDK</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../../basicSdk'</span>;

<span class="hljs-comment">/*
 * channel1 çš„SDK èŠå¤©ã€è§†é¢‘ã€éŸ³é¢‘
 * @export
 * @class Channel1SDK
 * @implements {BaseSDK}
* */</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IMPropsType</span> , <span class="hljs-title class_">OptsPropsType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"src/types/typings"</span>;

 <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Channel1SDK</span>  <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BaseSDK</span>{
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){

  }
  <span class="hljs-comment">// è·å–IM SDK</span>
  <span class="hljs-keyword">async</span> getIM (payload?:<span class="hljs-title class_">IMPropsType</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">IM</span> (payload);
  }

  <span class="hljs-comment">// è·å–WEBRTC SDK</span>
  <span class="hljs-keyword">async</span> getVideo (payload?:<span class="hljs-title class_">OptsPropsType</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Video</span> (payload);
  }

  <span class="hljs-comment">// è·å–AUDIO SDK</span>
  <span class="hljs-keyword">async</span> getAudio (payload?:<span class="hljs-title class_">OptsPropsType</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Audio</span> (payload);
  }

  <span class="hljs-comment">// è·å–é€šç”¨å·¥å…· SDK</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getUtils</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Utils</span>(); <span class="hljs-comment">// é€šç”¨å·¥å…·ç±»</span>
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAudioTransText</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AudioTransformText</span>(); <span class="hljs-comment">// è·å–è¯­éŸ³è½¬æ–‡å­—SDK</span>
  }

}
</code></pre>
<p>æ¯ä¸€ä¸ª<code>IM</code>ã€<code>Video</code>ã€<code>Audio</code>ã€<code>Utils</code>ã€<code>AudioTransformText</code>å‡åŸºäºè‡ªå·±è‡ªå·±çš„<code>BaseSDK</code> å»è¿›è¡Œå®ç°ï¼Œæ¯”å¦‚<code>IM</code> è‡ªå·±çš„ <code>BaseIMSDK</code>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HistoryMsgsPropsType</span>, <span class="hljs-title class_">ResendMsgPropsType</span>  } <span class="hljs-keyword">from</span> <span class="hljs-string">"src/types/typings"</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@desc</span> åŸºç¡€çš„IM å£°æ˜
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BaseIMSDK</span> {

  <span class="hljs-comment">//å‘é€æ¶ˆæ¯ type ä¸º â€œtextâ€è¡¨ç¤ºæ–‡æœ¬ ï¼Œ â€œfileâ€è¡¨ç¤ºæ–‡ä»¶</span>
  <span class="hljs-attr">sendMsg</span>:<span class="hljs-function">(<span class="hljs-params">msg?:<span class="hljs-built_in">any</span> , <span class="hljs-keyword">type</span>?:<span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt;;

  <span class="hljs-comment">// æ¶ˆæ¯å›è°ƒ å°†æ¥æ”¶åˆ°çš„æ–‡æœ¬æˆ–æ–‡ä»¶</span>
  <span class="hljs-comment">// ä¸šåŠ¡æ–¹ç›´æ¥ im.onReciveMsg = (msg) =&gt; {}; ä½¿ç”¨è·å–åˆ°çš„msgå³å¯</span>
  <span class="hljs-attr">onReciveMsg</span>:<span class="hljs-function">(<span class="hljs-params">msg?:<span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;

  <span class="hljs-comment">//æ’¤å›æ¶ˆæ¯</span>
  <span class="hljs-attr">recallMsg</span>:<span class="hljs-function">(<span class="hljs-params">msg?:<span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Boolean</span>&gt;;

  <span class="hljs-comment">// è·å–å†å²æ¶ˆæ¯</span>
  <span class="hljs-attr">getHistoryMsgs</span>:<span class="hljs-function">(<span class="hljs-params">payload? : HistoryMsgsPropsType </span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;;

  <span class="hljs-comment">// æ¶ˆæ¯é‡å‘</span>
  <span class="hljs-attr">resendMsg</span>:<span class="hljs-function">(<span class="hljs-params">payload?:ResendMsgPropsType</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Boolean</span>&gt;;

  <span class="hljs-comment">// æ¶ˆæ¯æ¥æ”¶æ–¹åœ¨æ”¶åˆ°æ¶ˆæ¯å¹¶é˜…è¯»å, è°ƒç”¨æ­¤æ–¹æ³•å‘é€å·²è¯»å›æ‰§</span>
  sendReceiptMsg : <span class="hljs-function">(<span class="hljs-params">payload?:ResendMsgPropsType</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Boolean</span>&gt;;

  <span class="hljs-comment">// æ¶ˆæ¯å·²è¯»å›æ‰§ å›è°ƒå‡½æ•°</span>
  onReceiptedMsg : <span class="hljs-function">(<span class="hljs-params">msg?:<span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Boolean</span>&gt;;

}
</code></pre>
<p>åç»­é’ˆå¯¹æ¯ä¸ªæ¸ é“å•†ï¼ŒæŒ‰ç…§åŸºäºå®šçš„ç»Ÿä¸€åè®®ç±»<code>API</code>çš„æ–¹æ³•ï¼Œå»å®ç°å¯¹åº”çš„åŠŸèƒ½å³å¯ã€‚</p>
<h4 data-id="heading-9">3.3 ç»„ä»¶UIé™çº§å®¹é”™</h4>
<p>å³å½“æŸä¸ªç»„ä»¶å› ä¸ºæŸäº›åŸå› ï¼ˆå¦‚æ•°æ®é”™è¯¯ã€ä¾èµ–ç¼ºå¤±ã€å†…éƒ¨å¼‚å¸¸ç­‰ï¼‰æ— æ³•æ­£å¸¸æ¸²æŸ“æ—¶ï¼Œæˆ‘ä»¬ä¸ä¼šè®©æ•´ä¸ªé¡µé¢å´©æºƒï¼Œè€Œæ˜¯å±•ç¤ºä¸€ä¸ªå¤‡ç”¨çš„UIï¼ˆå¦‚é”™è¯¯æç¤ºã€å ä½ç¬¦ç­‰ï¼‰ï¼ŒåŒæ—¶ä¿è¯å…¶ä»–ç»„ä»¶çš„æ­£å¸¸æ¸²æŸ“ã€‚</p>
<h5 data-id="heading-10">3.3.1 ç»„ä»¶çº§UIé™çº§å®¹é”™å¤„ç†æ–¹æ³•</h5>
<p>é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c72e3560b4d4ca1a9535b79017dfc90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=B8MKG8kk7oHRUmPO01B1YqBEgbM%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬è¯¦ç»†çœ‹ä¸‹ï¼Œå‡ ç§ä¸åŒçš„é”™è¯¯è¾¹ç•Œå¤„ç†æ–¹æ³•çš„åº”ç”¨ã€‚</p>
<p><code>Error Boundaries</code></p>
<p>React 16å¼•å…¥çš„æ¦‚å¿µï¼Œå¯ä»¥æ•è·å­ç»„ä»¶æ ‘ä¸­çš„JavaScripté”™è¯¯ï¼Œè®°å½•é”™è¯¯ï¼Œå¹¶æ˜¾ç¤ºä¸€ä¸ªé™çº§UIï¼Œå®ƒå®šä¹‰äº†<code>static getDerivedStateFromError()</code>å’Œ<code>componentDidCatch()</code>ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­çš„ä¸€ä¸ªæˆ–ä¸¤ä¸ªï¼Œ æ³¨æ„ï¼Œé”™è¯¯è¾¹ç•Œæ— æ³•æ•è·äº‹ä»¶å¤„ç†ã€å¼‚æ­¥ä»£ç ã€æœåŠ¡ç«¯æ¸²æŸ“ç­‰é”™è¯¯ã€‚</p>
<p>å½“æ•è·åˆ°errorçš„æ—¶å€™ï¼Œè¿›è¡Œé»˜è®¤è§†å›¾å±•ç¤ºï¼Œè€Œä¸æ˜¯ä½¿æ•´ä¸ªç•Œé¢å‡ºç°ç™½å±çš„ç°è±¡ï¼Œæ¶‰åŠåŒ…æ‹¬æ•´ä¸ªç•Œé¢ï¼Œä»¥åŠå±€éƒ¨çš„ç»„ä»¶çš„å´©æºƒç­‰ç»„ä»¶æƒ…å†µï¼Œç›¸å…³<code>ErrorBoundary</code>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ErrorView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/ErrorView'</span>;
<span class="hljs-keyword">import</span> { pushLogToSentry } <span class="hljs-keyword">from</span> <span class="hljs-string">'./helpers'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">ERROR_TYPE</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./constants'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {
      <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span>,
    };
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-variable language_">window</span>?.<span class="hljs-property">console</span>?.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getDerivedStateFromError:'</span>, error);
    <span class="hljs-comment">// æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> };
  }

  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>) {
    <span class="hljs-variable language_">window</span>?.<span class="hljs-property">console</span>?.<span class="hljs-title function_">log</span>(<span class="hljs-string">'componentDidCatch error:'</span>, error);
    <span class="hljs-variable language_">window</span>?.<span class="hljs-property">console</span>?.<span class="hljs-title function_">log</span>(<span class="hljs-string">'componentDidCatch errorInfo:'</span>, errorInfo);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (__DEV__) <span class="hljs-keyword">return</span>;
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">//</span>
    }

    <span class="hljs-comment">// å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">pushLogToSentry</span>({
        <span class="hljs-attr">message</span>: <span class="hljs-string">`
        url: src/components/ErrorBoundary
        errorName: <span class="hljs-subst">${error?.name}</span>
        errorMsg: <span class="hljs-subst">${error?.meesage}</span>
        errorStack: <span class="hljs-subst">${error?.stack}</span>
        errorComponentStack: <span class="hljs-subst">${errorInfo?.componentStack}</span>
        `</span>,
        <span class="hljs-attr">level</span>: <span class="hljs-variable constant_">ERROR_TYPE</span>,
      });
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">//</span>
    }
  }

  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { children, onRefresh, errorWrapProps = {} } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;
    <span class="hljs-keyword">const</span> { hasError } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
    <span class="hljs-comment">// é”™è¯¯å±•ç¤ºçš„è§†å›¾</span>
    <span class="hljs-keyword">if</span> (hasError) {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorView</span>
          <span class="hljs-attr">onRefresh</span>=<span class="hljs-string">{onRefresh}</span>
          <span class="hljs-attr">errorWrapProps</span>=<span class="hljs-string">{errorWrapProps}</span>
        /&gt;</span></span>
      );
    }
    <span class="hljs-keyword">return</span> children;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">withErrorBoundary</span> = (<span class="hljs-params">{ onRefresh, errorWrapProps = {} } = {}</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">Component</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">ErrorBoundary</span> {
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> { hasError } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
      <span class="hljs-comment">// é”™è¯¯å±•ç¤ºçš„è§†å›¾</span>
      <span class="hljs-keyword">if</span> (hasError) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorView</span> <span class="hljs-attr">onRefresh</span>=<span class="hljs-string">{onRefresh}</span> <span class="hljs-attr">errorWrapProps</span>=<span class="hljs-string">{errorWrapProps}</span> /&gt;</span></span>;
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Component</span>) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...this.state</span>} {<span class="hljs-attr">...this.props</span>} /&gt;</span></span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  };
};
</code></pre>
<p>ä¸šåŠ¡ä¾§å¼•å…¥çš„æ—¶å€™ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>  <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"src/components"</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponent</span> = (<span class="hljs-params"/>)=&gt;{
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span></span>
  )
}
</code></pre>
<p>é‚£ä¹ˆé’ˆå¯¹è¿™ç§é”™è¯¯è¾¹ç•Œçš„å¤„ç†æ–¹æ³•ï¼Œå¦‚ä½•å»æ¨¡æ‹Ÿé’ˆå¯¹éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶å´©æºƒçš„å„ç§åœºæ™¯å‘¢ï¼Ÿ</p>
<ul>
<li>æµ‹è¯•æ­¥éª¤</li>
</ul>

<pre><code class="hljs language-css" lang="css">graph <span class="hljs-selector-tag">TD</span>
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[åˆ›å»ºä¼šå´©æºƒçš„å­ç»„ä»¶]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[åœ¨çˆ¶ç»„ä»¶ä¸­åµŒå…¥]</span>
    <span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[è§¦å‘å´©æºƒæ¡ä»¶]</span>
    C --&gt; D<span class="hljs-selector-attr">[æ£€æµ‹çˆ¶ç»„ä»¶è¡Œä¸º]</span>
    D --&gt; E<span class="hljs-selector-attr">[æ•è·è¾¹ç•Œæƒ…å†µ]</span>
</code></pre>
<ul>
<li>åŠŸèƒ½æµ‹è¯•åœºæ™¯</li>
</ul>






























<table><thead><tr><th>æµ‹è¯•åŠ¨ä½œ</th><th>é¢„æœŸç»“æœ</th><th>æ£€æµ‹æ–¹æ³•</th></tr></thead><tbody><tr><td>è§¦å‘å­ç»„ä»¶å´©æºƒ</td><td>å­ç»„ä»¶æ˜¾ç¤ºé”™è¯¯è¾¹ç•Œå†…å®¹</td><td>æ£€æŸ¥DOMå…ƒç´ Â <code>.error-fallback</code></td></tr><tr><td>çˆ¶ç»„ä»¶æŒ‰é’®åŠŸèƒ½</td><td>çˆ¶ç»„ä»¶çŠ¶æ€æ­£å¸¸æ›´æ–°</td><td>æ£€æŸ¥Â <code>parentState</code>Â çŠ¶æ€</td></tr><tr><td>çˆ¶ç»„ä»¶æ¸²æŸ“</td><td>å´©æºƒåŒºåŸŸå¤–UIå®Œæ•´æ— ç™½å±</td><td>å¯è§†æ£€æŸ¥ + DOM å¿«ç…§å¯¹æ¯”</td></tr><tr><td>æ§åˆ¶å°é”™è¯¯</td><td>é”™è¯¯è¢«æ•è·æœªæ‰©æ•£</td><td>ç›‘å¬Â <code>window.onerror</code>Â äº‹ä»¶</td></tr></tbody></table>
<ul>
<li>æµ‹è¯•è¿‡ç¨‹&amp;ç»“æœå¦‚ä¸‹æˆªå›¾ï¼š</li>
</ul>
<p>1ã€æ¨¡æ‹ŸéŸ³è§†é¢‘ç»„ä»¶ï¼Œå¼•å…¥åˆ°ä¸šåŠ¡å·¥ç¨‹é¡¹ç›®ä¸­ï¼Œæ­¤æ—¶å¦‚æœéŸ³è§†é¢‘ç»„ä»¶å†…éƒ¨å‡ºç°å´©æºƒçš„æƒ…å†µï¼Œå³æŠ¥é”™äº†</p>
<p><code>throw new Error</code>ï¼Œæ­¤æ—¶ï¼Œä¸šåŠ¡å·¥ç¨‹ä¸šåŠ¡ä¸åº”è¯¥å—åˆ°å½±å“ï¼Œç•Œé¢æ˜¾ç¤ºæ­£å¸¸ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b91151281feb447da5a2e1d9438d5e32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=oDhFGFQHl8iEBZhTXMSjBJe3Xw8%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘å­ç»„ä»¶å´©æºƒï¼Œæ­¤æ—¶ çˆ¶ç»„ä»¶ä¾ç„¶å¯ä»¥æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e9a44c83a324151b9e6e9517a76bd3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=VBXnsvRan44AvTNuZA28QFeS3E0%3D" alt="image.png" loading="lazy"/></p>
<p>2ã€æ¨¡æ‹Ÿä¸šåŠ¡è‡ªå®šä¹‰ç»„ä»¶å´©æºƒçš„æƒ…å†µï¼Œåœ¨éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ä¸­ï¼Œå¯ä»¥è‡ªå®šä¹‰æ’å…¥ä¸šåŠ¡æ–¹çš„ç»„ä»¶ï¼Œæ­¤æ—¶å¦‚æœä¸šåŠ¡æ–¹ç»„ä»¶å´©æºƒäº†ï¼Œé‚£ä¹ˆå¯¹åº”çš„éŸ³è§†é¢‘ç»„ä»¶ä¸åº”è¯¥å—åˆ°å½±å“ï¼Œä¸ä¼šå‡ºç°ç™½å±çš„ç°è±¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9d50aeb22b74aad9f6d249687843f0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=umVP3BYbS38geA%2FqN33WSZNF1SA%3D" alt="image.png" loading="lazy"/></p>
<p>try-catch</p>
<p>é”™è¯¯è¾¹ç•Œæ— æ³•æ•è·å¼‚æ­¥ä»£ç å’Œäº‹ä»¶ä¸­çš„é”™è¯¯ï¼Œè¿™äº›é”™è¯¯æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼Œä¾‹å¦‚ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ã€‚</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  state = { hasError: <span class="hljs-literal">false</span> };

  handleClick = () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å¯èƒ½ä¼šæŠ›å‡ºé”™è¯¯çš„æ“ä½œ</span>
      doSomething();
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">this</span>.setState({ hasError: <span class="hljs-literal">true</span> });
      console.error(error);
    }
  }

  render() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.state.hasError) {
      <span class="hljs-keyword">return</span> &lt;div&gt;<span class="hljs-type">Error</span> in event handler.&lt;/div&gt;;
    }

    <span class="hljs-keyword">return</span> &lt;button onClick={<span class="hljs-keyword">this</span>.handleClick}&gt;<span class="hljs-type">Click</span> me&lt;/button&gt;;
  }
}
</code></pre>
<p>å¯¹äºå¼‚æ­¥ä»£ç ï¼ˆå¦‚setTimeoutã€Promiseï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„try-catchï¼Œä½†æ³¨æ„ï¼Œåœ¨Promiseä¸­è¦ç”¨catchï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">someAsyncFunction</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
  })
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> });
  });
</code></pre>
<p>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰</p>
<p>å¯ä»¥åˆ›å»ºä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªåŒ…è£¹äº†é”™è¯¯è¾¹ç•Œçš„æ–°ç»„ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">withErrorBoundary</span> = (<span class="hljs-params">{ onRefresh, errorWrapProps = {} } = {}</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">Component</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">extends</span> <span class="hljs-title class_">ErrorBoundary</span> {
    <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> { hasError } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>;
      <span class="hljs-comment">// é”™è¯¯å±•ç¤ºçš„è§†å›¾</span>
      <span class="hljs-keyword">if</span> (hasError) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorView</span> <span class="hljs-attr">onRefresh</span>=<span class="hljs-string">{onRefresh}</span> <span class="hljs-attr">errorWrapProps</span>=<span class="hljs-string">{errorWrapProps}</span> /&gt;</span></span>;
      }
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Component</span>) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...this.state</span>} {<span class="hljs-attr">...this.props</span>} /&gt;</span></span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  };
};
</code></pre>
<p>ä¸šåŠ¡ä¾§ä½¿ç”¨çš„æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { withErrorBoundary } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/components'</span>;
<span class="hljs-keyword">const</span>  <span class="hljs-title function_">MyConponent</span> = (<span class="hljs-params"/>)=&gt;{
  .....
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">withErrorBoundary</span>()(<span class="hljs-title class_">MyConponent</span>)
</code></pre>
<h5 data-id="heading-11">3.3.2 å¸¸è§çš„é™çº§åœºæ™¯ä¸å¤„ç†æ–¹æ¡ˆ</h5>
<ul>
<li>ç»„ä»¶åŠ è½½å¤±è´¥é™çº§</li>
</ul>
<p>åœºæ™¯ï¼šå¼‚æ­¥ç»„ä»¶åŠ è½½è¶…æ—¶æˆ–ç½‘ç»œé”™è¯¯</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">Suspense</span>, useState, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// 1. é”™è¯¯è¾¹ç•Œé™çº§</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  state = { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> };
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span>, error };
  }
  
  <span class="hljs-title function_">componentDidCatch</span>(<span class="hljs-params">error, errorInfo</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Component loading failed:'</span>, error, errorInfo);
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) {
      <span class="hljs-comment">// é™çº§åˆ°åŸºç¡€UI</span>
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">fallback</span> || (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"component-fallback"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åŠŸèƒ½åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> this.setState({ hasError: false })}&gt;
            é‡è¯•
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;
  }
}

<span class="hljs-comment">// 2. å¼‚æ­¥ç»„ä»¶é™çº§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> 
  <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ComplexComponent'</span>)
    .<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> ({ 
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BasicComponent</span> /&gt;</span></span> 
    }))
);

<span class="hljs-comment">// å¤‡ç”¨åŸºç¡€ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">BasicComponent</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"basic-version"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>åŸºç¡€æ¨¡å¼<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰åŠŸèƒ½ä»¥ç®€åŒ–æ¨¡å¼æ˜¾ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">BasicComponent</span> /&gt;</span>}&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span></span>
);
</code></pre>
<ul>
<li>åŠŸèƒ½ä¾èµ–é™çº§</li>
</ul>
<p>åœºæ™¯ï¼šæµè§ˆå™¨ä¸æ”¯æŒæŸäº›APIæˆ–ç¬¬ä¸‰æ–¹åº“åŠ è½½å¤±è´¥</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç‰¹æ€§æ£€æµ‹é™çº§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">withFeatureDetection</span> = (<span class="hljs-params">features</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">Component</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [supportedFeatures, setSupportedFeatures] = <span class="hljs-title function_">useState</span>({});
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ£€æµ‹æµè§ˆå™¨æ”¯æŒæƒ…å†µ</span>
    <span class="hljs-keyword">const</span> checks = {
      <span class="hljs-attr">webGL</span>: !!<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>).<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'webgl'</span>),
      <span class="hljs-attr">touch</span>: <span class="hljs-string">'ontouchstart'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>,
      <span class="hljs-attr">serviceWorker</span>: <span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator,
      <span class="hljs-comment">// æ·»åŠ æ›´å¤šç‰¹æ€§æ£€æµ‹...</span>
    };
    
    <span class="hljs-title function_">setSupportedFeatures</span>(checks);
  }, []);

  <span class="hljs-comment">// æ ¹æ®æ”¯æŒæƒ…å†µè¿”å›ä¸åŒç»„ä»¶</span>
  <span class="hljs-keyword">if</span> (features.<span class="hljs-property">requiresWebGL</span> &amp;&amp; !supportedFeatures.<span class="hljs-property">webGL</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CanvasFallback</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...props</span>} <span class="hljs-attr">supportedFeatures</span>=<span class="hljs-string">{supportedFeatures}</span> /&gt;</span></span>;
};

<span class="hljs-comment">// ç¬¬ä¸‰æ–¹åº“é™çº§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MapComponent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [mapLib, setMapLib] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åŠ¨æ€åŠ è½½åœ°å›¾åº“</span>
    <span class="hljs-keyword">import</span>(<span class="hljs-string">'advanced-map-library'</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">lib</span> =&gt;</span> <span class="hljs-title function_">setMapLib</span>(lib))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'é«˜çº§åœ°å›¾åº“åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨åŸºç¡€ç‰ˆæœ¬'</span>);
        <span class="hljs-comment">// é™çº§åˆ°åŸºç¡€åœ°å›¾æˆ–é™æ€å›¾ç‰‡</span>
        <span class="hljs-keyword">import</span>(<span class="hljs-string">'./basic-map'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">lib</span> =&gt;</span> <span class="hljs-title function_">setMapLib</span>(lib));
      });
  }, []);
  
  <span class="hljs-keyword">if</span> (!mapLib) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åœ°å›¾åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  
  <span class="hljs-keyword">return</span> mapLib.<span class="hljs-property">default</span> ? 
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapLib.default</span> /&gt;</span></span> : 
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/static-map.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"é™æ€åœ°å›¾"</span> /&gt;</span></span>;
};
</code></pre>
<ul>
<li>æ€§èƒ½é™çº§æ–¹æ³•</li>
</ul>
<p>åœºæ™¯ï¼šè®¾å¤‡æ€§èƒ½ä¸è¶³æ—¶è‡ªåŠ¨é™ä½è§†è§‰æ•ˆæœ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ€§èƒ½æ„ŸçŸ¥é™çº§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">usePerformanceMode</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [performanceMode, setPerformanceMode] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'normal'</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ£€æµ‹è®¾å¤‡æ€§èƒ½</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">detectPerformance</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-comment">// 1. æ£€æŸ¥ç½‘ç»œé€Ÿåº¦</span>
      <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">connection</span>) {
        <span class="hljs-keyword">const</span> { effectiveType, downlink } = navigator.<span class="hljs-property">connection</span>;
        <span class="hljs-keyword">if</span> (effectiveType === <span class="hljs-string">'slow-2g'</span> || downlink &lt; <span class="hljs-number">1</span>) {
          <span class="hljs-title function_">setPerformanceMode</span>(<span class="hljs-string">'low'</span>);
          <span class="hljs-keyword">return</span>;
        }
      }
      
      <span class="hljs-comment">// 2. æ£€æŸ¥è®¾å¤‡å†…å­˜</span>
      <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">deviceMemory</span> &amp;&amp; navigator.<span class="hljs-property">deviceMemory</span> &lt; <span class="hljs-number">4</span>) {
        <span class="hljs-title function_">setPerformanceMode</span>(<span class="hljs-string">'low'</span>);
        <span class="hljs-keyword">return</span>;
      }
      
      <span class="hljs-comment">// 3. æ£€æŸ¥ç”µæ± çŠ¶æ€</span>
      <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">getBattery</span>) {
        navigator.<span class="hljs-title function_">getBattery</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">battery</span> =&gt;</span> {
          <span class="hljs-keyword">if</span> (battery.<span class="hljs-property">level</span> &lt; <span class="hljs-number">0.2</span> &amp;&amp; !battery.<span class="hljs-property">charging</span>) {
            <span class="hljs-title function_">setPerformanceMode</span>(<span class="hljs-string">'low-power'</span>);
          }
        });
      }
    };
    
    <span class="hljs-title function_">detectPerformance</span>();
  }, []);
  
  <span class="hljs-keyword">return</span> performanceMode;
};

<span class="hljs-comment">// è‡ªé€‚åº”ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">AdaptiveChart</span> = (<span class="hljs-params">{ data }</span>) =&gt; {
  <span class="hljs-keyword">const</span> performanceMode = <span class="hljs-title function_">usePerformanceMode</span>();
  
  <span class="hljs-keyword">switch</span> (performanceMode) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'low'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'low-power'</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SimpleChart</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>; <span class="hljs-comment">// ç®€åŒ–ç‰ˆå›¾è¡¨</span>
      
    <span class="hljs-keyword">case</span> <span class="hljs-string">'normal'</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">InteractiveChart</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>; <span class="hljs-comment">// äº¤äº’å¼å›¾è¡¨</span>
      
    <span class="hljs-attr">default</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">StaticChart</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>; <span class="hljs-comment">// é™æ€å›¾è¡¨</span>
  }
};
</code></pre>
<ul>
<li>æ¸è¿›å¢å¼ºç­–ç•¥</li>
</ul>
<p>é€šè¿‡è®¾ç½®ä¸åŒç‰ˆæœ¬çš„æ–¹å¼ï¼Œå»è¿›è¡Œè®¾ç½®ä¸åŒçš„æ¨¡å¼åˆ‡æ¢</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶çº§æ¸è¿›å¢å¼º</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">ProgressiveEnhancementComponent</span> = (<span class="hljs-params">{ enhancedFeatures = <span class="hljs-literal">true</span> }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [isEnhanced, setIsEnhanced] = <span class="hljs-title function_">useState</span>(enhancedFeatures);
  
  <span class="hljs-comment">// é™çº§å¼€å…³ï¼ˆç”¨äºè°ƒè¯•æˆ–ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleEnhancement</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setIsEnhanced</span>(!isEnhanced);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"progressive-component"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleEnhancement}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"enhancement-toggle"</span>&gt;</span>
        {isEnhanced ? 'åˆ‡æ¢åˆ°åŸºç¡€æ¨¡å¼' : 'åˆ‡æ¢åˆ°å¢å¼ºæ¨¡å¼'}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      
      {isEnhanced ? (
        // å¢å¼ºç‰ˆæœ¬ - åŒ…å«åŠ¨ç”»ã€å¤æ‚äº¤äº’
        <span class="hljs-tag">&lt;<span class="hljs-name">EnhancedVersion</span> /&gt;</span>
      ) : (
        // åŸºç¡€ç‰ˆæœ¬ - ç®€å•é™æ€å†…å®¹
        <span class="hljs-tag">&lt;<span class="hljs-name">BasicVersion</span> /&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<p>æ€»ç»“æ¦‚æ‹¬çš„è¯ï¼Œå¤§æ¦‚ä¸»è¦æ˜¯ä»ä¸‹é¢çš„å‡ ä¸ªæ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdb81c0f31ff472b867ec8dc0e9fbc7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=UdxxnZXMgs%2FZcyAqGXufQVPGnhA%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-12">3.4 ç»„ä»¶çš„åŠ¨æ€æ³¨å…¥</h4>
<p>åœ¨éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ä¸­ï¼Œæ¶‰åŠåˆ°è¯¸å¤šä¸šåŠ¡åœºæ™¯ï¼ŒåŠ¨æ€é…ç½®æ³¨å…¥ç»„ä»¶çš„çš„åŠŸèƒ½ï¼Œä¸‹é¢è¯¦ç»†çš„ä»‹ç»ä¸‹ï¼Œç›¸å…³çš„ä¸€äº›ç»„ä»¶åŠ¨æ€æ³¨å…¥çš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬å·¥ç¨‹ä¸­ç”¨çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯é™æ€å¯¼å…¥äº†ï¼Œä¸‹é¢çœ‹ä¸‹ä¸¤è€…åŒºåˆ«ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é™æ€å¯¼å…¥ - ç¼–è¯‘æ—¶ç»‘å®š</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">StaticComponentDemo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./StaticComponentDemo'</span>;

<span class="hljs-comment">// åŠ¨æ€æ³¨å…¥ - è¿è¡Œæ—¶åŠ è½½</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">DynamicComponentDemo</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./DynamicComponentDemo'</span>));
</code></pre>
<p><code>React</code>ç»„ä»¶åŠ¨æ€æ³¨å…¥ä¸»è¦æ˜¯é€šè¿‡å°†â€‹ä»£ç åˆ†å‰²â€‹â€‹ã€â€‹â€‹æŒ‰éœ€åŠ è½½â€‹â€‹å’Œâ€‹â€‹è¿è¡Œæ—¶é›†æˆâ€‹â€‹ç›¸ç»“åˆçš„æ–¹å¼ ï¼Œ æ˜¯åœ¨è¿è¡Œæ—¶æŒ‰éœ€åŠ è½½å’Œæ¸²æŸ“ç»„ä»¶â€‹â€‹</p>
<p>åŠ¨æ€æ³¨å…¥ç»„ä»¶çš„ç‰¹ç‚¹ä¸»è¦æœ‰ä¸‹é¢å‡ ç‚¹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ecc7e9975b244d5b5d1725ec21431d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=D7JS4NWls%2FDN4Km5te3HcN4yEWs%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥å‡å°‘åˆå§‹åŠ è½½ä½“ç§¯ï¼Œæå‡é¦–å±é€Ÿåº¦ï¼Œæ”¯æŒæ’ä»¶åŒ–ã€ä¸»é¢˜åŒ–ã€A/B æµ‹è¯•ç­‰é«˜çº§åœºæ™¯ï¼Œä¿æŒä»£ç æ¨¡å—åŒ–ï¼Œç®€åŒ–å¤æ‚åº”ç”¨ç»“æ„ï¼Œå®ç°çœŸæ­£çš„çƒ­æ’æ‹”ç»„ä»¶ç³»ç»Ÿã€‚<code>React</code>ç»„ä»¶åŠ¨æ€æ³¨å…¥æœ‰å“ªå‡ ç§æ–¹å¼å‘¢ï¼Ÿ</p>
<p>1ã€<code>React.lazy</code>å’ŒÂ <code>Suspense</code>çš„æ–¹å¼</p>
<p>æ­¤ç§æ–¹å¼ä¸»è¦æ˜¯æŒ‰éœ€åŠ è½½ç»„ä»¶ï¼Œ<code>React.lazy</code>å‡½æ•°å…è®¸åŠ¨æ€åœ°åŠ è½½ç»„ä»¶ï¼Œå®ƒè¿”å›ä¸€ä¸ªPromiseï¼Œè¯¥Promiseè§£æä¸ºä¸€ä¸ªåŒ…å«Reactç»„ä»¶çš„æ¨¡å—ã€‚é€šå¸¸ä¸<code>Suspense</code>ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œåœ¨åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºå›é€€å†…å®¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { <span class="hljs-title class_">Suspense</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponentDemo</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./LazyComponentDemo'</span>));

<span class="hljs-keyword">const</span>  <span class="hljs-title function_">MyComponentDemo</span> =(<span class="hljs-params"/>)=&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponentDemo</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<ul>
<li><code>React.lazy</code>æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªåŠ¨æ€<code>import()</code>çš„Promiseã€‚</li>
<li>å½“ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œä¼šè§¦å‘åŠ è½½ã€‚åŠ è½½è¿‡ç¨‹ä¸­ï¼Œ<code>Suspense</code>ä¼šæ˜¾ç¤º<code>fallback</code>å†…å®¹ã€‚</li>
<li>åŠ è½½å®Œæˆåï¼Œç»„ä»¶è¢«æ¸²æŸ“ã€‚</li>
</ul>
<p>æ³¨æ„â€‹ï¼š<code>React.lazy</code>åªæ”¯æŒé»˜è®¤å¯¼å‡ºï¼ˆexport defaultï¼‰çš„ç»„ä»¶ã€‚</p>
<p>React.lazy å†…éƒ¨å®ç°</p>
<pre><code class="hljs language-ini" lang="ini">function lazy(ctor) {
  let <span class="hljs-attr">thenable</span> = null<span class="hljs-comment">;</span>
  
  return {
    $$typeof: REACT_LAZY_TYPE,
    _payload: {
      _status: -1,  // çŠ¶æ€: <span class="hljs-attr">-1</span>=æœªåŠ è½½, <span class="hljs-number">0</span>=åŠ è½½ä¸­, <span class="hljs-number">1</span>=åŠ è½½æˆåŠŸ, <span class="hljs-number">2</span>=åŠ è½½å¤±è´¥
      _result: ctor, // åŠ è½½å‡½æ•°
    },
    _init(payload) {
      if (<span class="hljs-attr">payload._status</span> === -<span class="hljs-number">1</span>) {
        const <span class="hljs-attr">ctorResult</span> = ctor()<span class="hljs-comment">;</span>
        <span class="hljs-attr">thenable</span> = ctorResult<span class="hljs-comment">;</span>
        
        <span class="hljs-attr">payload._status</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        ctorResult.then(
          <span class="hljs-attr">module</span> =&gt; {
            if (<span class="hljs-attr">payload._status</span> === <span class="hljs-number">0</span>) {
              <span class="hljs-attr">payload._status</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
              <span class="hljs-attr">payload._result</span> = module.default<span class="hljs-comment">;</span>
            }
          },
          <span class="hljs-attr">error</span> =&gt; {
            if (<span class="hljs-attr">payload._status</span> === <span class="hljs-number">0</span>) {
              <span class="hljs-attr">payload._status</span> = <span class="hljs-number">2</span><span class="hljs-comment">;</span>
              <span class="hljs-attr">payload._result</span> = error<span class="hljs-comment">;</span>
            }
          }
        )<span class="hljs-comment">;</span>
      }
      
      switch (payload._status) {
        case 1: return payload._result<span class="hljs-comment">;</span>
        case 2: throw payload._result<span class="hljs-comment">;</span>
        default: throw thenable<span class="hljs-comment">;</span>
      }
    }
  }<span class="hljs-comment">;</span>
}
</code></pre>
<p>Suspense å·¥ä½œåŸç† æ¸²æŸ“é‡åˆ°æœªå‡†å¤‡å¥½çš„ç»„ä»¶æ—¶æŠ›å‡º Promise , React æ•è·è¯¥ Promise å¹¶æš‚åœæ¸²æŸ“ , æ˜¾ç¤ºæœ€è¿‘çš„ Suspense , fallback UI ,Promise å®Œæˆåé‡æ–°å°è¯•æ¸²æŸ“ , æˆåŠŸåˆ™æ˜¾ç¤ºç»„ä»¶ï¼Œå¤±è´¥åˆ™æŠ›å‡ºé”™è¯¯ã€‚</p>
<p>2ã€ä½¿ç”¨é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰å®ç°åŠ¨æ€åŠ è½½</p>
<p>åˆ›å»ºä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œåœ¨ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­ç®¡ç†åŠ è½½çŠ¶æ€ï¼Œå¹¶åœ¨åŠ è½½å®Œæˆåæ¸²æŸ“ç›®æ ‡ç»„ä»¶ï¼Œæ¯”è¾ƒé€‚ç”¨éœ€è¦è‡ªå®šä¹‰åŠ è½½é€»è¾‘æˆ–å¤„ç†éé»˜è®¤å¯¼å‡ºçš„ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">withDynamicImportDemo</span> = (<span class="hljs-params">importFunc</span>)=&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DynamicComponent</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-keyword">const</span> [<span class="hljs-title class_">Component</span>, setComponent] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
      importFunc().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">module</span> =&gt;</span> {
        <span class="hljs-title function_">setComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>); <span class="hljs-comment">// å‡è®¾æ˜¯é»˜è®¤å¯¼å‡º</span>
      });
    }, []);

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Component</span> ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> {<span class="hljs-attr">...props</span>} /&gt;</span></span> : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  };
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyLazyComponent</span> = <span class="hljs-title function_">withDynamicImportDemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./MyComponent'</span>));
</code></pre>
<p>3ã€<code>import()</code>åŠ¨æ€åŠ è½½ + çŠ¶æ€ç®¡ç†</p>
<p>ä¸»è¦æ˜¯åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­åŠ¨æ€å¯¼å…¥ç»„ä»¶ï¼Œç„¶åæ›´æ–°çŠ¶æ€è§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponentDemo</span> = (<span class="hljs-params"/>)=&gt; {
  <span class="hljs-keyword">const</span> [<span class="hljs-title class_">Component</span>, setComponent] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">default</span>: <span class="hljs-title class_">DynamicComponent</span> } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./DynamicComponent'</span>);
    <span class="hljs-title function_">setComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">DynamicComponent</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>ç‚¹å‡»åŠ è½½ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {Component ? <span class="hljs-tag">&lt;<span class="hljs-name">Component</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æµ‹è¯•ç‚¹å‡»<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>4ã€<code>loadable-components</code></p>
<p><code>loadable-components</code>æ˜¯ä¸€ä¸ªæµè¡Œçš„åº“ï¼Œæä¾›äº†æ›´å¼ºå¤§çš„åŠ¨æ€å¯¼å…¥åŠŸèƒ½ï¼ŒåŒ…æ‹¬æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒã€‚å¦‚SSRæ”¯æŒã€é¢„åŠ è½½ç­‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> loadable <span class="hljs-keyword">from</span> <span class="hljs-string">'@loadable/component'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">LoadableComponent</span> = <span class="hljs-title function_">loadable</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./MyComponentDemo'</span>), {
  <span class="hljs-attr">fallback</span>: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æµ‹è¯•<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>,
});

<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponentPage</span> = (<span class="hljs-params"/>)=&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoadableComponent</span> /&gt;</span></span>;
}
</code></pre>
<p>5ã€ReactDOM.createPortal</p>
<p>ä½¿ç”¨<code>ReactDOM.createPortal</code>å°†ç»„ä»¶æ¸²æŸ“åˆ°æŒ‡å®šçš„DOMèŠ‚ç‚¹ã€‚ç»“åˆåŠ¨æ€åŠ è½½ï¼Œå¯ä»¥å…ˆåŠ è½½ç»„ä»¶å†å°†å…¶æ¸²æŸ“åˆ°ç›®æ ‡ä½ç½®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">DynamicPortalDemo</span> = (<span class="hljs-params"/>)=&gt; {
  <span class="hljs-keyword">const</span> [targetNode] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'portal-root'</span>));
  <span class="hljs-keyword">const</span> [<span class="hljs-title class_">Component</span>, setComponent] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">import</span>(<span class="hljs-string">'./PortalComponent'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">module</span> =&gt;</span> {
      <span class="hljs-title function_">setComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">module</span>.<span class="hljs-property">default</span>);
    });
  }, []);

  <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Component</span> || !targetNode) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createPortal</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> /&gt;</span></span>, targetNode);
}
</code></pre>
<p>åœ¨éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ç°ç»„ä»¶åŠ¨æ€åŠ è½½çš„ç•Œé¢ï¼Œæ•´ä¸ªè¯­éŸ³è½¬æ–‡å­—ç»„ä»¶ã€äº¤æµè®¨è®ºç»„ä»¶ã€ä»¥åŠä¸šåŠ¡è‡ªå®šä¹‰çš„ç»„ä»¶ï¼Œåƒè®²æ ‡é¡ºåºç»„ä»¶ã€ä¼šè®®ç›‘æ§ã€ä¼šè®®ç¬”å½•ç»„ä»¶ç­‰ï¼Œéƒ½æ˜¯åŠ¨æ€æ³¨å…¥çš„ç»„ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a783ec3e727a4be39c02f56c5d29695e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=NX0pn8hx7N2ECIAXmqdMB4VslOA%3D" alt="image.png" loading="lazy"/></p>
<p>ç›¸å…³çš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">  // éå†æ³¨å†Œå¯¹åº”çš„ç»„ä»¶
const <span class="hljs-attr">getDomContent</span> = (arr) =&gt; {
  return (
    &lt;&gt;
      {arr?.map((<span class="hljs-attr">item</span> = {}) =&gt; {
        const <span class="hljs-attr">DomItem</span> = innerContainerComponent[item?.btnKey]<span class="hljs-comment">;</span>
        return (
          &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"online-meeting-inner-slot-list"</span> key={item.btnKey}&gt;
            &lt;React.Suspense <span class="hljs-attr">fallback</span>={&lt;div /&gt;}&gt;
              {DomItem &amp;&amp; (
                &lt;DomItem
                  <span class="hljs-attr">innerComponentList</span> = {innerSlotComponent}
                  <span class="hljs-attr">direction</span>={direction}
                  <span class="hljs-attr">btnConfig</span>={item}
                  <span class="hljs-attr">btnKey</span>={item?.btnKey}
                  <span class="hljs-attr">im</span>={im}
                  <span class="hljs-attr">onCloseIMDialog</span>={() =&gt; {
                    onCloseIMDialog(item?.btnKey)<span class="hljs-comment">;</span>
                  }}
                      <span class="hljs-attr">onRemoveSoltComponent</span>={() =&gt; <span class="hljs-literal">on</span>RemoveSoltComponent(item?.btnKey)}
                  {...props}
                /&gt;
              )}
            &lt;/React.Suspense&gt;
          &lt;/div&gt;
        )<span class="hljs-comment">;</span>
      })}
    &lt;/&gt;
  )<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

return (
  &lt;div <span class="hljs-attr">className</span>=<span class="hljs-string">"online-meeting-inner-slot-container"</span>&gt;
    {getDomContent(innerSlotComponent)}
  &lt;/div&gt;
)<span class="hljs-comment">;</span>
</code></pre>
<p>åˆ©ç”¨ç»„ä»¶åŠ¨æ€æ³¨å…¥ï¼Œå¯ä»¥è¿›è¡Œä¸€äº›æ€§èƒ½ä¼˜åŒ–æ–¹é¢çš„ä¼˜åŒ–ç­–ç•¥ï¼Œä¸»è¦æœ‰ä¸‹é¢å‡ ä¸ªæ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e95f3eb3f8424b43b761ab0900792a65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=qVm3uTdQOv7hOcBXP5I%2BfljLDZ8%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">componentCacheDemo</span> = new Map()<span class="hljs-comment">;</span>
const <span class="hljs-attr">CachedComponent</span> = (loader)=&gt; {
  const <span class="hljs-section">[Component, setComponent]</span> = useState(null)<span class="hljs-comment">;</span>
  
  useEffect(() =&gt; {
    if (componentCacheDemo.has(loader)) {
      setComponent(componentCacheDemo.get(loader))<span class="hljs-comment">;</span>
      return<span class="hljs-comment">;</span>
    }
    
    loader().then(<span class="hljs-attr">module</span> =&gt; {
      const <span class="hljs-attr">Comp</span> = module.default<span class="hljs-comment">;</span>
      componentCacheDemo.set(loader, Comp)<span class="hljs-comment">;</span>
      setComponent(() =&gt; Comp)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[loader]</span>)<span class="hljs-comment">;</span>
  
  return Component<span class="hljs-comment">;</span>
}
</code></pre>
<p>ç»„ä»¶åŠ¨æ€åŠ è½½çš„æœªæ¥å‘å±•è¶‹åŠ¿ï¼ŒåƒæœåŠ¡ç«¯ç»„ä»¶ç›´æ¥åŠ¨æ€åŠ è½½ ã€è¿œç¨‹ç»„ä»¶åŠ¨æ€åŠ è½½ã€åŸºäº AI çš„é¢„æµ‹åŠ è½½ç­‰ï¼Œéšç€ React 18 å¹¶å‘ç‰¹æ€§ã€<code>Server Components</code> å’Œ <code>Module Federation</code> ç­‰æŠ€æœ¯çš„å‘å±•ï¼ŒåŠ¨æ€åŠ è½½ç»„ä»¶å°†æˆä¸ºä¸€ç§æ ¸å¿ƒæ¨¡å¼ã€‚</p>
<h3 data-id="heading-13">4ã€éŸ³è§†é¢‘é€šç”¨ç»„ä»¶å¤šç«¯æ¶ˆæ¯æ”¶å‘</h3>
<h4 data-id="heading-14">4.1 <code>IM</code>æ¶ˆæ¯æ”¶å‘</h4>
<p><code>IM</code>ä¸»è¦æ˜¯åœ¨è§†é¢‘ä¼šè®®ä¸­, æˆ‘ä»¬çš„ä¸»æŒäººåœ¨è§†é¢‘ä¼šè®®ä¸­ä¼šæ“æ§å…¶ä»–ä¸ä¼šäººå‘˜çš„éŸ³è§†é¢‘å¼€å¯å…³é—­,é‚€è¯·ä¸ä¼šäººå‘˜çš„å¼€å¯é¡µé¢ç›‘æ§ç­‰æ“ä½œã€‚è¿™äº›æ“ä½œæˆ‘ä»¬ä¼šé€šè¿‡IMæ¶ˆæ¯å‘é€çš„æ–¹å¼é€šçŸ¥ç»™ç›¸åº”çš„ä¸ä¼šäººå‘˜ï¼Œå…¶æ¬¡åŒ…æ‹¬è§†é¢‘ä¼šè®®çš„è®¨è®ºåŠŸèƒ½ã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸‹ï¼Œ<code>IM</code>æ¶ˆæ¯æ”¶å‘çš„æµç¨‹æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac689f7d5e7a4f0d815191d873aa5e9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=uuANy41Gn1SDQYMhZsbYfEHpu34%3D" alt="image.png" loading="lazy"/></p>
<p>å®¢æˆ·ç«¯A ä¸å®¢æˆ·ç«¯Bï¼Œä¼šé€šè¿‡å½“å‰æœ¬ç«¯è·å–åˆ°å”¯ä¸€æ ‡è¯†Token, è¿›è¡Œç™»å½•ï¼Œä¸”å®ç°æ¶ˆæ¯ä¹‹é—´çš„ä¼ é€ã€‚åº•å±‚èƒ½åŠ›ä¹Ÿæ˜¯åŸºäº<code>WebRTC</code>çš„ç‚¹ä¸ç‚¹ä¹‹é—´çš„é€šä¿¡é“¾æ¥ å’Œ <code>WebSocket</code>æ¥å®ç°çš„ã€‚</p>
<p>éŸ³è§†é¢‘IMç³»ç»ŸåŒ…å«å¤šç§æ¶ˆæ¯ç±»å‹ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„ä¼ è¾“è¦æ±‚ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// æ¶ˆæ¯ç±»å‹å®šä¹‰
enum MessageType {
  <span class="hljs-attr">TEXT</span> = <span class="hljs-string">'text'</span>,           // æ–‡æœ¬æ¶ˆæ¯
  <span class="hljs-attr">IMAGE</span> = <span class="hljs-string">'image'</span>,         // å›¾ç‰‡æ¶ˆæ¯
  <span class="hljs-attr">AUDIO</span> = <span class="hljs-string">'audio'</span>,         // éŸ³é¢‘æ¶ˆæ¯
  <span class="hljs-attr">VIDEO</span> = <span class="hljs-string">'video'</span>,         // è§†é¢‘æ¶ˆæ¯
  <span class="hljs-attr">FILE</span> = <span class="hljs-string">'file'</span>,           // æ–‡ä»¶æ¶ˆæ¯
  <span class="hljs-attr">CALL_INVITE</span> = <span class="hljs-string">'call_invite'</span>,    // é€šè¯é‚€è¯·
  <span class="hljs-attr">CALL_ACCEPT</span> = <span class="hljs-string">'call_accept'</span>,    // é€šè¯æ¥å—
  <span class="hljs-attr">CALL_REJECT</span> = <span class="hljs-string">'call_reject'</span>,    // é€šè¯æ‹’ç»
  <span class="hljs-attr">CALL_END</span> = <span class="hljs-string">'call_end'</span>,          // é€šè¯ç»“æŸ
  <span class="hljs-attr">TYPING</span> = <span class="hljs-string">'typing'</span>,              // è¾“å…¥çŠ¶æ€
  <span class="hljs-attr">READ_RECEIPT</span> = <span class="hljs-string">'read_receipt'</span>   // å·²è¯»å›æ‰§
}
</code></pre>
<p>æ¶ˆæ¯æ”¶å‘æ ¸å¿ƒä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IMCore</span> {
  <span class="hljs-keyword">private</span> wsManager: WebSocketManager;     <span class="hljs-comment">// WebSocketè¿æ¥ç®¡ç†</span>
  <span class="hljs-keyword">private</span> messageQueue: MessageQueue;      <span class="hljs-comment">// æ¶ˆæ¯é˜Ÿåˆ—</span>
  <span class="hljs-keyword">private</span> mediaProcessor: MediaProcessor;  <span class="hljs-comment">// åª’ä½“å¤„ç†</span>
  <span class="hljs-keyword">private</span> storage: MessageStorage;         <span class="hljs-comment">// æ¶ˆæ¯å­˜å‚¨</span>
  
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.<span class="hljs-keyword">init</span>();
  }
  
  <span class="hljs-keyword">private</span> async <span class="hljs-keyword">init</span>() {
    await <span class="hljs-keyword">this</span>.setupWebSocket();
    <span class="hljs-keyword">this</span>.setupMessageHandlers();
  }
}
</code></pre>
<p>æˆ‘ä»¬çœ‹ä¸‹éŸ³è§†é¢‘é€šç”¨åŒ–ç»„ä»¶ä¸­å®ç°çš„æ•ˆæœæˆªå›¾ï¼š</p>
<p>ä¸»æŒäºº ï½œ å®¢æˆ·ç«¯A</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ebf83ee3afa4e939ba07312d9ed8c60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=dx6faYc6eeTL3ZIYL0dkxaFVmNM%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸“å®¶ï½œå®¢æˆ·ç«¯B</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/313766f7a6bc4ac7a784521503cd34e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=GMIc8DsCDBoLhUzaB%2FV6yV93kWc%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<p>å½“å®¢æˆ·ç«¯Aå‘é€å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯Bçš„äººï¼Œå­˜åœ¨ç›‘å¬æ¶ˆæ¯äº‹ä»¶ï¼Œå½“ç›‘å¬åˆ°æ¶ˆæ¯çš„æ—¶å€™ï¼ŒåŠ¨æ€å°†æ­¤æ¶ˆæ¯æ–‡æœ¬ï¼Œæ³¨å…¥åˆ°æ•°ç»„ä¸­ï¼Œä¸”åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> // ç›‘å¬æ¶ˆæ¯
  const <span class="hljs-attr">onMsg</span> = (msgsValue = []) =&gt; {
    if (msgsValue?.length &gt; 0) {
      const <span class="hljs-attr">originHistoryMsgs</span> = originHistoryMsgsRef?.current || []<span class="hljs-comment">;</span>
      const <span class="hljs-attr">newMsgs</span> = originHistoryMsgs.concat(msgsValue)<span class="hljs-comment">;</span>
      setMsgs(newMsgs)<span class="hljs-comment">;</span>
    }
  }<span class="hljs-comment">;</span>

// åˆå§‹åŒ–è¯·æ±‚å†å²æ•°æ®ï¼Œä»¥åŠæ³¨å†Œæ¥å—IMå‘é€è¿‡æ¥çš„æ¶ˆæ¯
  useEffect(() =&gt; {
    const { im } = props<span class="hljs-comment">;</span>
    getHistoryData()<span class="hljs-comment">;</span>
    try {
      <span class="hljs-attr">im.onReciveMsg</span> = <span class="hljs-literal">on</span>Msg<span class="hljs-comment">;</span>
    } catch (err) {
      //
    }
  }, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-15">4.2 <code>webSocket</code>æ¶ˆæ¯æ”¶å‘</h4>
<p>åœ¨éŸ³è§†é¢‘ä¸­ï¼Œå¦å¤–ä¸€ä¸ªæ¶ˆæ¯æ”¶å‘çš„æ–¹å¼ï¼Œå°±æ˜¯ä½¿ç”¨ <code>webSocket</code>ï¼Œè¿›è¡Œå®æ—¶çš„é€šä¿¡ï¼Œè¿™ç§åº”è¯¥æ˜¯æ¯”è¾ƒå¸¸è§ä½¿ç”¨çš„ã€‚<code>webSocket</code>çš„ç‰¹æ€§ä¸»è¦åŒ…æ‹¬ä¸‹é¢è¿™äº›æ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1be16963f0884d52a281a1a04d64bca4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=ZCXswQDXhU4CAbWg1VkNhmwLBRU%3D" alt="image.png" loading="lazy"/></p>
<p>å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯â€‹åŒæ—¶â€‹â€‹å‘é€å’Œæ¥æ”¶æ•°æ® ï¼Œå»ºç«‹è¿æ¥åï¼Œæ•°æ®ä¼ è¾“æ— éœ€ HTTP æ¡æ‰‹å¼€é”€ï¼Œä¸€ä¸ªè¿æ¥æŒç»­å¤ç”¨ï¼Œé¿å…é¢‘ç¹å»ºç«‹/æ–­å¼€è¿æ¥çš„å¼€é”€ï¼Œå¯è¿›è¡Œé«˜æ•ˆä¼ è¾“å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶æ¶ˆæ¯ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹<code>webSocket</code>çš„ç›¸å…³çš„ç‰¹æ€§å’Œå…·ä½“å®ç°ï¼š</p>
<p>1ã€è¿æ¥å»ºç«‹ï¼šHTTP å‡çº§æ¡æ‰‹</p>
<p>WebSocket è¿æ¥å§‹äºæ ‡å‡†çš„ HTTP è¯·æ±‚ï¼Œé€šè¿‡Â <code>Upgrade</code>å¤´åˆ‡æ¢åè®®</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">GET</span> <span class="hljs-string">/chat</span> <span class="hljs-string">HTTP/1.1</span>
<span class="hljs-attr">Host:</span> <span class="hljs-string">server.example.com</span>
<span class="hljs-attr">Upgrade:</span> <span class="hljs-string">websocket</span>          <span class="hljs-comment"># å…³é”®ï¼šè¯·æ±‚å‡çº§åè®®</span>
<span class="hljs-attr">Connection:</span> <span class="hljs-string">Upgrade</span>         <span class="hljs-comment"># å…³é”®ï¼šè¦æ±‚åˆ‡æ¢è¿æ¥</span>
<span class="hljs-attr">Sec-WebSocket-Key:</span> <span class="hljs-string">dGhlIHNhbXBsZSBub25jZQ==</span>  <span class="hljs-comment"># å®¢æˆ·ç«¯éšæœºå¯†é’¥</span>
<span class="hljs-attr">Sec-WebSocket-Version:</span> <span class="hljs-number">13</span>    <span class="hljs-comment"># åè®®ç‰ˆæœ¬</span>
</code></pre>
<p>2ã€æœåŠ¡å™¨å“åº”åè®®å‡çº§</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">HTTP/1.1</span> <span class="hljs-number">101</span> <span class="hljs-string">Switching</span> <span class="hljs-string">Protocols</span>
<span class="hljs-attr">Upgrade:</span> <span class="hljs-string">websocket</span>
<span class="hljs-attr">Connection:</span> <span class="hljs-string">Upgrade</span>
<span class="hljs-attr">Sec-WebSocket-Accept:</span> <span class="hljs-string">s3pPLMBiTxaQ9kYGzzhZRbK+xOo=</span>  <span class="hljs-comment"># éªŒè¯å¯†é’¥</span>
</code></pre>
<p>3ã€å¯†é’¥éªŒè¯åŸç†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3a87a8f37964ad0be662262596f19c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=pKB4gP%2FAvB0i%2BxZPzmYofwOST1M%3D" alt="image.png" loading="lazy"/></p>
<p>4ã€è¿æ¥ä¿æ´»ï¼šå¿ƒè·³æœºåˆ¶</p>
<p>é€šè¿‡ â€‹Ping/Pong å¸§â€‹â€‹ ç»´æŒè¿æ¥æ´»æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b962177c3874b6782663d018b91e6c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=WuBqZqQPGuTKBpjzyGPeujHrcDo%3D" alt="image.png" loading="lazy"/></p>
<p>æ•´ä½“çš„é€šä¿¡è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8bcd58ee5a5420e941b68f5761626b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=6OnCB5vIrEyvbvOX%2FTbAgAe%2FVec%3D" alt="image.png" loading="lazy"/></p>
<p>5ã€è¿æ¥å…³é—­ï¼šæ¡æ‰‹ç»ˆæ­¢</p>
<p>å…³é—­æµç¨‹éœ€åŒæ–¹äº¤æ¢å…³é—­å¸§, å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bafb797b5c8d4c5a9f7cd95e7f0cb8ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=GJ8XXAXoH8RWR%2BnkNOmSElzlVR4%3D" alt="image.png" loading="lazy"/></p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯ä¸‹é¢è¿™äº›æ–¹é¢ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/581fec64a4ba49f2b6726837d9a83e84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pS_6YeH5LqR5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763354490&amp;x-signature=55L75un1JMu5Kd8YGY411UeUx%2F0%3D" alt="image.png" loading="lazy"/></p>
<p>å°è£…çš„webSocketçš„demoä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@description</span> æ¶ˆæ¯å®æ—¶é€šä¿¡ç»„ä»¶ï¼ˆwebsocketå®ç°ï¼‰
 * <span class="hljs-doctag">@class</span> WebsocketDemo
 * <span class="hljs-doctag">@constructor</span> éé™æ€ç±»
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebsocketDemo</span> {
  <span class="hljs-keyword">constructor</span>(opt) {
    <span class="hljs-comment">// websocketå®ä¾‹</span>
    <span class="hljs-keyword">this</span>.ws = <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// url</span>
    <span class="hljs-keyword">this</span>.url = opt.url || <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// å¿ƒè·³åŒ…æ•°æ®ï¼Œå®¢æˆ·ç«¯å‘é€pingï¼ŒæœåŠ¡ç«¯å›å¤pong</span>
    <span class="hljs-keyword">this</span>.heartData = opt.heartData || <span class="hljs-string">'ping'</span>;
    <span class="hljs-comment">// å®¢æˆ·ç«¯å‘é€å¿ƒè·³çš„å®šæ—¶å™¨ timer</span>
    <span class="hljs-keyword">this</span>.heartTimer = <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// å®¢æˆ·ç«¯å¤šä¹…å‘é€ä¸€æ¬¡å¿ƒè·³åŒ…ï¼Œé»˜è®¤ 2mins</span>
    <span class="hljs-keyword">this</span>.heartInterval = opt.heartInterval || <span class="hljs-number">2</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;
    <span class="hljs-comment">// æ˜¯å¦å…è®¸é‡è¿ã€‚é»˜è®¤è‡ªåŠ¨æ‹¿ä¸Šä¸€æ¬¡ uri è¿›è¡Œé‡è¿ã€‚å¦‚æœè¿æ¥ä¸ºæœåŠ¡ç«¯è¿”å›çš„åŠ¨æ€ uri æ—¶ï¼Œè¯·è®¾ç½®è¯¥å€¼ä¸º false</span>
    <span class="hljs-keyword">this</span>.allowReconnect = opt.allowReconnect;
    <span class="hljs-comment">// é‡è¿è®¡æ•°å™¨</span>
    <span class="hljs-keyword">this</span>.reconnectCounter = <span class="hljs-number">0</span>;
    <span class="hljs-comment">// é‡è¿æ¬¡æ•°ä¸Šé™ï¼Œé»˜è®¤æœ€å¤šå°è¯•é‡è¿ 3 æ¬¡</span>
    <span class="hljs-keyword">this</span>.reconnectLimit = opt.reconnectLimit || <span class="hljs-number">3</span>;
    <span class="hljs-comment">// é‡è¿çš„å®šæ—¶å™¨ timer</span>
    <span class="hljs-keyword">this</span>.reconnectTimer = <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// å®šæ—¶å¤šä¹…é‡è¿ä¸€æ¬¡ï¼Œé»˜è®¤ä¸º 5s</span>
    <span class="hljs-keyword">this</span>.reconnectInterval = opt.reconnectInterval || <span class="hljs-number">5</span> * <span class="hljs-number">1000</span>;
    <span class="hljs-comment">// åˆ›å»ºè¿æ¥æˆåŠŸåçš„å›è°ƒå‡½æ•°</span>
    <span class="hljs-keyword">this</span>.connectedCallback = opt.connectedCallback || function () {};
    <span class="hljs-comment">// æ¥æ”¶åˆ°æœåŠ¡å™¨ç«¯æ¶ˆæ¯åçš„å›è°ƒå‡½æ•°</span>
    <span class="hljs-keyword">this</span>.getMsgCallback = opt.getMsgCallback || function () {};
    window.onbeforeunload = () =&gt; {
      <span class="hljs-keyword">this</span>.ws.close();
    };
    <span class="hljs-keyword">this</span>.createWebSocket(<span class="hljs-keyword">this</span>.url);
  }

  <span class="hljs-comment">// åˆ›å»ºè¿æ¥</span>
  createWebSocket(url) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// åˆ¤æ–­å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒ websocket</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-string">'WebSocket'</span> <span class="hljs-keyword">in</span> window) {
        <span class="hljs-keyword">this</span>.ws = new WebSocket(<span class="hljs-keyword">this</span>.url);
      } <span class="hljs-keyword">else</span> {
        alert(
          <span class="hljs-string">'æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒwebsocketåè®®ï¼Œå»ºè®®ä½¿ç”¨æ–°ç‰ˆè°·æ­Œã€ç«ç‹ç­‰æµè§ˆå™¨ï¼Œè¯·å‹¿ä½¿ç”¨IE10ä»¥ä¸‹æµè§ˆå™¨ï¼Œ360æµè§ˆå™¨è¯·ä½¿ç”¨æé€Ÿæ¨¡å¼ï¼Œä¸è¦ä½¿ç”¨å…¼å®¹æ¨¡å¼ï¼'</span>,
        );
      }
      <span class="hljs-keyword">this</span>.<span class="hljs-keyword">init</span>();
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">this</span>.reconnect(url);
    }
  }

  <span class="hljs-comment">// åˆå§‹åŒ–äº‹ä»¶å¤„ç†</span>
  <span class="hljs-keyword">init</span>() {
    <span class="hljs-keyword">this</span>.ws.onclose = (closeEvent) =&gt; {
      <span class="hljs-keyword">this</span>.closedCallback();
      <span class="hljs-keyword">if</span> (
        closeEvent.code !== <span class="hljs-number">4001</span> &amp;&amp;
        closeEvent.code !== <span class="hljs-number">4003</span> &amp;&amp;
        closeEvent.code !== <span class="hljs-number">1100</span> &amp;&amp;
        closeEvent.code !== <span class="hljs-number">1000</span>
      ) {
        <span class="hljs-keyword">this</span>.reconnect(<span class="hljs-keyword">this</span>.url);
      }
    };
    <span class="hljs-keyword">this</span>.ws.onerror = () =&gt; {
      <span class="hljs-keyword">this</span>.errorCallback();
      <span class="hljs-keyword">this</span>.reconnect(<span class="hljs-keyword">this</span>.url);
    };
    <span class="hljs-keyword">this</span>.ws.onopen = () =&gt; {
      <span class="hljs-keyword">this</span>.reconnectCounter = <span class="hljs-number">0</span>; <span class="hljs-comment">// é‡è¿è®¡æ•°å™¨é‡ç½®</span>
      <span class="hljs-keyword">this</span>.startHeartBeat(); <span class="hljs-comment">// å¿ƒè·³æ£€æµ‹é‡ç½®ï¼Œå¹¶å¯åŠ¨</span>
      <span class="hljs-keyword">this</span>.connectedCallback();
    };
    <span class="hljs-keyword">this</span>.ws.onmessage = (event) =&gt; {
      <span class="hljs-keyword">this</span>.startHeartBeat(); 
      <span class="hljs-keyword">if</span> (event.<span class="hljs-keyword">data</span> !== <span class="hljs-string">'pong'</span>) {
        <span class="hljs-keyword">this</span>.getMsgCallback(event.<span class="hljs-keyword">data</span>);
      }
    };
  }

  <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
  send(<span class="hljs-keyword">data</span>) {
    <span class="hljs-keyword">const</span> dataStr = typeof <span class="hljs-keyword">data</span> !== <span class="hljs-string">'string'</span> ? JSON.stringify(<span class="hljs-keyword">data</span>) : <span class="hljs-keyword">data</span>;
    <span class="hljs-keyword">this</span>.ws.send(dataStr);
  }

  <span class="hljs-comment">// å…³é—­è¿æ¥</span>
  close() {
    <span class="hljs-keyword">this</span>.allowReconnect = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.ws.close();
  }

  <span class="hljs-comment">// å°è¯•é‡è¿</span>
  reconnect() {
    clearTimeout(<span class="hljs-keyword">this</span>.reconnectTimer);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.allowReconnect === <span class="hljs-literal">false</span>) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.reconnectCounter &lt; <span class="hljs-keyword">this</span>.reconnectLimit) {
      <span class="hljs-keyword">this</span>.reconnectTimer = setTimeout(() =&gt; {
        <span class="hljs-keyword">this</span>.createWebSocket(<span class="hljs-keyword">this</span>.url);
        <span class="hljs-keyword">this</span>.reconnectCounter += <span class="hljs-number">1</span>;
      }, <span class="hljs-keyword">this</span>.reconnectInterval);
    }
  }

  <span class="hljs-comment">// å¯åŠ¨å¿ƒè·³æœºåˆ¶</span>
  startHeartBeat() {
    clearTimeout(<span class="hljs-keyword">this</span>.heartTimer); <span class="hljs-comment">// æ¸…é™¤ å®¢æˆ·ç«¯å‘é€å¿ƒè·³çš„å®šæ—¶å™¨</span>
    <span class="hljs-keyword">this</span>.heartTimer = setTimeout(() =&gt; {
      <span class="hljs-keyword">this</span>.ws.send(<span class="hljs-string">'ping'</span>);
    }, <span class="hljs-keyword">this</span>.heartInterval);
  }
}

export default WebsocketDemo;
</code></pre>
<p>è°ƒç”¨æ¥å…¥ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚ä¸‹ä»£ç å®ä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">wsInstanceDemo</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebsocketDemo</span>({
      <span class="hljs-attr">url</span>: wsUrl,
      <span class="hljs-attr">allowReconnect</span>: <span class="hljs-literal">false</span>,
      heartInterval,
      <span class="hljs-attr">connectedCallback</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">global</span>.<span class="hljs-property">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿æ¥åˆ›å»ºæˆåŠŸ'</span>);
      },
      <span class="hljs-attr">getMsgCallback</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-comment">// å¤„ç†æ¥å—åˆ°çš„æ¶ˆæ¯æ•°æ®</span>
        ....
      }
})
</code></pre>
<h3 data-id="heading-16">5ã€å°ç»“</h3>
<p>ä»¥ä¸Šæ˜¯é’ˆå¯¹æ•´ä¸ªéŸ³è§†é¢‘ç›¸å…³çš„æ¢ç´¢ï¼Œæœªæ¥é’ˆå¯¹éŸ³è§†é¢‘äº§å“ï¼Œè¿˜éœ€è¦æŒç»­çš„æ‰“ç£¨, å¾€AIæ–¹å‘é é½ï¼Œæ¯”å¦‚å¯ä»¥ç»“åˆ <code>ML5</code> + <code>WebRTC</code>çš„æ–¹å¼ï¼Œåœ¨å®æ—¶éŸ³è§†é¢‘æ–¹é¢ï¼Œæ¯”å¦‚åª’ä½“ç­‰ç›¸å…³çš„åŠŸèƒ½ï¼Œå¯ä»¥ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HTTPæŠ“åŒ…åˆ†æç¥å™¨ï¼ŒFiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†è®¾ç½®ä¸HTTPSè°ƒè¯•å…¨æŒ‡å—ï¼ˆå¼€å‘è€…å®æˆ˜åˆ†äº«ï¼‰]]></title>    <link>https://juejin.cn/post/7570647711260196874</link>    <guid>https://juejin.cn/post/7570647711260196874</guid>    <pubDate>2025-11-10T05:11:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570647711260196874" data-draft-id="7570647711260180490" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HTTPæŠ“åŒ…åˆ†æç¥å™¨ï¼ŒFiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†è®¾ç½®ä¸HTTPSè°ƒè¯•å…¨æŒ‡å—ï¼ˆå¼€å‘è€…å®æˆ˜åˆ†äº«ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-10T05:11:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HTTPæŠ“åŒ…åˆ†æç¥å™¨ï¼ŒFiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†è®¾ç½®ä¸HTTPSè°ƒè¯•å…¨æŒ‡å—ï¼ˆå¼€å‘è€…å®æˆ˜åˆ†äº«ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:11:54.000Z" title="Mon Nov 10 2025 05:11:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€å‘å’Œæµ‹è¯•çš„æ—¥å¸¸å·¥ä½œä¸­ï¼Œ<strong>â€œæ¥å£è°ƒä¸é€šâ€</strong> å‡ ä¹æ˜¯æœ€å¸¸è§çš„ç—›ç‚¹ã€‚
API è¯·æ±‚å¤±è´¥ã€å“åº”å¼‚å¸¸ã€è·¨åŸŸæŠ¥é”™ã€ç§»åŠ¨ç«¯è®¿é—®å¼‚å¸¸â€¦â€¦æ¯ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„é—®é¢˜ï¼ŒèƒŒåå¯èƒ½éšè—ç€è¯·æ±‚å¤´é”™è¯¯ã€è¯ä¹¦é…ç½®é—®é¢˜ã€ç”šè‡³æ˜¯æœåŠ¡å™¨å“åº”å»¶è¿Ÿã€‚</p>
<p>é¢å¯¹è¿™ç§å¤æ‚æƒ…å†µï¼Œæœ€æœ‰æ•ˆçš„åŠæ³•ä¸æ˜¯â€œçŒœâ€ï¼Œè€Œæ˜¯â€œæŠ“åŒ…â€ï¼Œè€Œè¯´åˆ°æŠ“åŒ…å·¥å…·ï¼Œ<strong>Fiddler</strong> å‡ ä¹æ˜¯æ¯ä¸€ä½å¼€å‘è€…çš„å¿…å¤‡ç¥å™¨ã€‚</p>
<p>æœ¬æ–‡å°†ä¸ºä½ ç³»ç»Ÿè®²è§£ <strong>FiddleræŠ“åŒ…å·¥å…·</strong> çš„å®‰è£…é…ç½®ã€ä»£ç†è®¾ç½®ã€HTTPS æŠ“åŒ…ã€è°ƒè¯•æŠ€å·§åŠå®æˆ˜æ¡ˆä¾‹ï¼Œè®©ä½ ä»å…¥é—¨åˆ°è¿›é˜¶ï¼ŒæŒæ¡ç½‘ç»œè¯·æ±‚åˆ†æçš„å…¨æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€FiddleræŠ“åŒ…å·¥å…·ç®€ä»‹</strong></h2>
<p><strong>Fiddler</strong> æ˜¯ç”± Telerik å¼€å‘çš„ä¸€æ¬¾å…è´¹ HTTP/HTTPS æŠ“åŒ…ä¸è°ƒè¯•å·¥å…·ã€‚
å®ƒé€šè¿‡å»ºç«‹æœ¬åœ°ä»£ç†æœåŠ¡å™¨ï¼Œæ‹¦æˆªç³»ç»Ÿä¸­æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œå¸®åŠ©å¼€å‘è€…åˆ†ææ¥å£è°ƒç”¨ã€ç›‘æ§æµé‡ã€æ¨¡æ‹Ÿå“åº”ã€ä¼˜åŒ–æ€§èƒ½ã€‚</p>
<p>ä¸å…¶ä»–æŠ“åŒ…å·¥å…·ï¼ˆå¦‚ Charlesã€Postmanã€Wiresharkï¼‰ç›¸æ¯”ï¼ŒFiddler çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>å…è´¹ä¸”åŠŸèƒ½å…¨é¢</strong>ï¼›</li>
<li><strong>æ”¯æŒå¤šç«¯æŠ“åŒ…ï¼ˆWeb / App / å°ç¨‹åº / æ¡Œé¢ç¨‹åºï¼‰</strong>ï¼›</li>
<li><strong>æ”¯æŒ HTTPS è§£å¯†ä¸è¯ä¹¦ç®¡ç†</strong>ï¼›</li>
<li><strong>å¯è®¾ç½®æ–­ç‚¹ä¿®æ”¹è¯·æ±‚ä¸å“åº”</strong>ï¼›</li>
<li><strong>Mock æ•°æ®æ”¯æŒæœ¬åœ°æ¥å£è°ƒè¯•</strong>ï¼›</li>
<li><strong>å†…ç½®æ€§èƒ½åˆ†æä¸è¯·æ±‚ç»Ÿè®¡å·¥å…·</strong>ã€‚</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼ŒFiddler æ˜¯å¼€å‘è€…è°ƒè¯•æ¥å£ä¸åˆ†æç½‘ç»œè¯·æ±‚æœ€å¼ºå¤§çš„å·¥å…·ä¹‹ä¸€ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸é…ç½®æ–¹æ³•</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>Fiddler å®‰è£…éå¸¸ç®€å•ï¼Œå¯åŠ¨åä¼šè‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿä»£ç†ã€‚
æ‰“å¼€æµè§ˆå™¨è®¿é—®ä»»æ„ç½‘ç«™ï¼Œä½ å°±èƒ½åœ¨å·¦ä¾§é¢æ¿çœ‹åˆ°æ‰€æœ‰ HTTP è¯·æ±‚ã€‚</p>
<p><strong>å°æç¤ºï¼š</strong></p>
<ul>
<li>â€œCapturingâ€ è¡¨ç¤ºå½“å‰æ­£åœ¨æŠ“åŒ…ï¼›</li>
<li>â€œPausedâ€ è¡¨ç¤ºæš‚åœæŠ“åŒ…ï¼Œå¯ç‚¹å‡»çŠ¶æ€æ å¯ç”¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. Fiddlerä»£ç†è®¾ç½®ï¼ˆç”µè„‘ + ç§»åŠ¨ç«¯ï¼‰</strong></h3>
<p>å¦‚æœä½ å¸Œæœ›æŠ“å–ç§»åŠ¨ç«¯æµé‡ï¼ˆä¾‹å¦‚ iOSã€Android App æˆ–å°ç¨‹åºï¼‰ï¼Œ
éœ€è¦å¼€å¯ Fiddler çš„è¿œç¨‹ä»£ç†åŠŸèƒ½ï¼š</p>
<p><strong>æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€èœå• <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>æŸ¥çœ‹ç”µè„‘çš„æœ¬åœ° IP åœ°å€ä¸ç«¯å£ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ç¡®ä¿æ‰‹æœºä¸ç”µè„‘åœ¨åŒä¸€ Wi-Fi ç½‘ç»œä¸‹ï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi é«˜çº§è®¾ç½®ä¸­é…ç½®ä»£ç†ï¼š
<ul>
<li>æœåŠ¡å™¨ï¼šç”µè„‘ IP</li>
<li>ç«¯å£ï¼š8888</li>
</ul>
</li>
</ol>
<p>å®Œæˆåï¼Œæ‰‹æœºæ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½ä¼šé€šè¿‡ Fiddler è¿›è¡Œè½¬å‘ä¸ç›‘æ§ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…é…ç½®</strong></h3>
<p>ç°ä»£ç½‘ç«™å‡ ä¹éƒ½ä½¿ç”¨ HTTPSï¼Œå› æ­¤å¿…é¡»å®‰è£…è¯ä¹¦æ‰èƒ½æŸ¥çœ‹åŠ å¯†æµé‡ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»» Fiddler æ ¹è¯ä¹¦ï¼›</li>
<li>å¯¹äºç§»åŠ¨ç«¯ï¼Œè¿˜éœ€å¯¼å…¥è¯ä¹¦å¹¶è®¾ç½®ä¿¡ä»»ã€‚</li>
</ul>
<p>å®Œæˆåï¼ŒFiddler å³å¯è§£æ HTTPS è¯·æ±‚çš„å®Œæ•´å†…å®¹ï¼ŒåŒ…æ‹¬ Headerã€Body ä¸å“åº”ç»“æœã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddlerä½¿ç”¨æ•™ç¨‹ï¼šæ ¸å¿ƒåŠŸèƒ½è¯¦è§£</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>åœ¨ä¸»ç•Œé¢ä¸­ï¼Œæ¯æ¡è¯·æ±‚éƒ½å¯å±•å¼€æŸ¥çœ‹è¯¦ç»†å†…å®¹ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å¼ã€URLã€çŠ¶æ€ç ï¼›</li>
<li>è¯·æ±‚å¤´ï¼ˆHeadersï¼‰ã€å‚æ•°ï¼ˆParamsï¼‰ã€è¯·æ±‚ä½“ï¼ˆBodyï¼‰ï¼›</li>
<li>å“åº”å†…å®¹ï¼ˆResponseï¼‰ä¸è€—æ—¶ç»Ÿè®¡ï¼ˆStatisticsï¼‰ã€‚</li>
</ul>
<p>ğŸ“ <strong>å®ç”¨æŠ€å·§ï¼š</strong>
ç‚¹å‡»å³ä¸‹è§’çš„ â€œTimelineâ€ å¯æŸ¥çœ‹æ¯ä¸ªé˜¶æ®µè€—æ—¶ï¼ˆDNS / TCP / TLS / Responseï¼‰ï¼Œ
æœ‰åŠ©äºåˆ¤æ–­æ€§èƒ½ç“¶é¢ˆæ˜¯å¦æ¥è‡ªç½‘ç»œå»¶è¿Ÿæˆ–æœåŠ¡å™¨å“åº”æ…¢ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. æ–­ç‚¹è°ƒè¯•ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler çš„æ–­ç‚¹åŠŸèƒ½å¯æ‹¦æˆªè¯·æ±‚ä¸å“åº”ï¼Œå…è®¸å¼€å‘è€…æ‰‹åŠ¨ä¿®æ”¹æ•°æ®ã€‚</p>
<p><strong>å¸¸è§åº”ç”¨ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹Ÿæ¥å£å¼‚å¸¸ï¼ˆè¿”å› 500 / 404ï¼‰ï¼›</li>
<li>ä¿®æ”¹è¯·æ±‚å‚æ•°æˆ– Headerï¼›</li>
<li>æµ‹è¯•å‰ç«¯å®¹é”™æœºåˆ¶ï¼›</li>
<li>éªŒè¯å®‰å…¨é€»è¾‘ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ‹¦æˆªç™»å½•æ¥å£è¯·æ±‚ï¼Œå°†å“åº”ä¿®æ”¹ä¸º <code>{ "code": 403 }</code>ï¼Œ
ä»è€ŒéªŒè¯å‰ç«¯æ˜¯å¦èƒ½æ­£ç¡®å¤„ç†æƒé™å¼‚å¸¸ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. æœ¬åœ°Mockæ¥å£ï¼ˆAutoResponderï¼‰</strong></h3>
<p>å½“å‰åç«¯æ¥å£æœªå¼€å‘å®Œæˆæ—¶ï¼Œå¯ä½¿ç”¨ Fiddler æ¨¡æ‹Ÿæ¥å£è¿”å›ã€‚</p>
<p><strong>æ“ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>ç‚¹å‡» â€œAdd Ruleâ€ æ·»åŠ åŒ¹é…è§„åˆ™ï¼›</li>
<li>æŒ‡å®šæœ¬åœ° JSON æ–‡ä»¶æˆ–è‡ªå®šä¹‰å“åº”å†…å®¹ï¼›</li>
<li>å¯ç”¨è§„åˆ™åï¼ŒåŒ¹é…è¯·æ±‚å°†è¿”å›æ¨¡æ‹Ÿæ•°æ®ã€‚</li>
</ol>
<p><strong>åº”ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</strong>
å‰ç«¯å¼€å‘é¡µé¢æ—¶ï¼Œåç«¯æ¥å£è¿˜æœªå®Œæˆï¼Œå¯ç”¨ Fiddler è¿”å›å‡æ•°æ®è¿›è¡Œ UI ä¸é€»è¾‘è°ƒè¯•ï¼Œå¤§å¤§æé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—è®© Fiddler æˆä¸ºâ€œå¯äº¤äº’ç‰ˆ Postmanâ€ã€‚
å¼€å‘è€…å¯è‡ªç”±æ„é€ è¯·æ±‚ã€ä¿®æ”¹å‚æ•°ã€æ·»åŠ  Header å¹¶é‡æ”¾ã€‚</p>
<p>é€‚åˆåœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>è°ƒè¯•æ¥å£å‚æ•°ä¸è¿”å›é€»è¾‘ï¼›</li>
<li>éªŒè¯ç­¾åã€Token æ˜¯å¦æ­£ç¡®ï¼›</li>
<li>å¤ç°çº¿ä¸Šé—®é¢˜ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>5. è¿‡æ»¤ä¸æœç´¢ï¼ˆFiltersï¼‰</strong></h3>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œè¯·æ±‚æ•°å¾€å¾€æˆç™¾ä¸Šåƒï¼Œä½¿ç”¨ Filters æ¨¡å—å¯ä»¥æŒ‰åŸŸåã€åè®®ã€è¯·æ±‚ç±»å‹å¿«é€Ÿè¿‡ï¼Œ æé«˜è°ƒè¯•æ•ˆç‡ã€‚</p>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€Fiddlerå®æˆ˜æ¡ˆä¾‹ï¼šç§»åŠ¨ç«¯æ¥å£Bugæ’æŸ¥</strong></h2>
<p>åœ¨ä¸€æ¬¡ç§»åŠ¨ç«¯è°ƒè¯•ä¸­ï¼Œæµ‹è¯•äººå‘˜åé¦ˆç™»å½•æ¥å£è¿”å› 403 é”™è¯¯ã€‚
åç«¯æ—¥å¿—æ˜¾ç¤ºæ­£å¸¸ï¼Œæ¥å£ç‹¬ç«‹æµ‹è¯•ä¹Ÿæ²¡é—®é¢˜ã€‚</p>
<p>ä½¿ç”¨ Fiddler æŠ“åŒ…åå‘ç°ï¼š
App è¯·æ±‚æ—¶å°‘äº† Header <code>Content-Type: application/json</code>ï¼Œ
å¯¼è‡´æœåŠ¡å™¨è§£æå¤±è´¥ã€‚</p>
<p>ä»…ç”¨ä¸¤åˆ†é’Ÿå®šä½é—®é¢˜ï¼ŒæˆåŠŸè§£å†³ã€‚
è¿™ç±»éšè”½ Bugï¼Œåœ¨æ²¡æœ‰æŠ“åŒ…å·¥å…·æ—¶å¾€å¾€éš¾ä»¥å‘ç°ã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€Fiddlerå¸¸ç”¨åŠŸèƒ½é€Ÿè§ˆ</strong></h2>



































<table><thead><tr><th>æ¨¡å—åç§°</th><th>åŠŸèƒ½è¯´æ˜</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰å…³é”®å­—è¿‡æ»¤è¯·æ±‚</td><td>èšç„¦ç›®æ ‡æ¥å£</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£å“åº”</td><td>å‰åç«¯åˆ†ç¦»å¼€å‘</td></tr><tr><td><strong>Breakpoints</strong></td><td>ä¿®æ”¹è¯·æ±‚ä¸å“åº”</td><td>æ¨¡æ‹Ÿé”™è¯¯åœºæ™¯</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>API æµ‹è¯•ä¸éªŒè¯</td></tr><tr><td><strong>Timeline</strong></td><td>åˆ†æè¯·æ±‚è€—æ—¶</td><td>æ€§èƒ½ä¼˜åŒ–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€Fiddlerä¸å…¶ä»–æŠ“åŒ…å·¥å…·å¯¹æ¯”</strong></h2>






























<table><thead><tr><th>å·¥å…·</th><th>ä¼˜åŠ¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>å…è´¹ã€åŠŸèƒ½å¼ºã€æ”¯æŒè¯·æ±‚ä¿®æ”¹</td><td>å¼€å‘ / æµ‹è¯•</td></tr><tr><td><strong>Charles</strong></td><td>ç•Œé¢ç®€æ´ã€æ˜“ç”¨æ€§å¼º</td><td>æ–°æ‰‹ç”¨æˆ·</td></tr><tr><td><strong>Postman</strong></td><td>æ„é€ ä¸æ¥å£æµ‹è¯•æ–¹ä¾¿</td><td>API è°ƒè¯•</td></tr><tr><td><strong>Wireshark</strong></td><td>åˆ†æåº•å±‚åè®®</td><td>ç½‘ç»œå®‰å…¨ä¸è¿ç»´</td></tr></tbody></table>
<p><strong>ç»“è®ºï¼š</strong>
åœ¨â€œæ¥å£çº§è°ƒè¯• + ç½‘ç»œåˆ†æâ€å±‚é¢ï¼ŒFiddler å‡ ä¹æ— å¯æ›¿ä»£ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>ä¸ƒã€å­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³ç³»ç»Ÿå­¦ä¹  Fiddlerï¼Ÿæ¨èè®¿é—®**<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a>**,é€šè¿‡æŒæ¡ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹</strong>ã€<strong>ä»£ç†è®¾ç½®</strong> ä¸ <strong>è°ƒè¯•æŠ€å·§</strong>ï¼Œ
ä½ å¯ä»¥è½»æ¾å®šä½æ¥å£é—®é¢˜ã€åˆ†æç½‘ç»œæ€§èƒ½ã€éªŒè¯é€»è¾‘æ­£ç¡®æ€§ã€‚</p>
<p>ç½‘ç«™åŒ…å«ï¼š</p>
<ul>
<li>Fiddler å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼›</li>
<li>HTTPS æŠ“åŒ…é…ç½®ä¸è¯ä¹¦ç®¡ç†ï¼›</li>
<li>ç§»åŠ¨ç«¯ä»£ç†è®¾ç½®ï¼›</li>
<li>å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆï¼›</li>
<li>Mock ä¸è°ƒè¯•å®æˆ˜æ¡ˆä¾‹ã€‚</li>
</ul>
<hr/>
<p>è°ƒè¯•ï¼Œæ˜¯ä¸€åå¼€å‘è€…çš„æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€ã€‚
è€Œ <strong>FiddleræŠ“åŒ…å·¥å…·</strong> å°±æ˜¯é‚£æŠŠè®©ç½‘ç»œé€šä¿¡â€œé€æ˜åŒ–â€çš„æ”¾å¤§é•œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift æ„å»º Android åº”ç”¨ï¼Ÿå®ƒæ¥äº†]]></title>    <link>https://juejin.cn/post/7570651893867954228</link>    <guid>https://juejin.cn/post/7570651893867954228</guid>    <pubDate>2025-11-10T05:28:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570651893867954228" data-draft-id="7568796644347887616" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift æ„å»º Android åº”ç”¨ï¼Ÿå®ƒæ¥äº†"/> <meta itemprop="keywords" content="Swift,iOS"/> <meta itemprop="datePublished" content="2025-11-10T05:28:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift æ„å»º Android åº”ç”¨ï¼Ÿå®ƒæ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:28:16.000Z" title="Mon Nov 10 2025 05:28:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4d40136e2fb4e9b8e561157cf588586~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763357295&amp;x-signature=RFtGISs%2BqLZNtsz%2BRj0ZZbNI06M%3D" alt="swift.png" loading="lazy"/></p>
<p>é€‚ç”¨äº Android ç³»ç»Ÿçš„ Swift SDK æœ€è¿‘ä»¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.swift.org%2Fblog%2Fnightly-swift-sdk-for-android" target="_blank" title="https://www.swift.org/blog/nightly-swift-sdk-for-android" ref="nofollow noopener noreferrer">nightly æ„å»ºç‰ˆæœ¬å‘å¸ƒ</a>ï¼Œè¯¥ SDK æ—¨åœ¨å¸®åŠ©å¼€å‘è€…å°†ä»–ä»¬çš„ Swift åŒ…ç§»æ¤åˆ° Android ç³»ç»Ÿï¼Œä½¿è·¨å¹³å°å…±äº«ä»£ç æ›´åŠ å®¹æ˜“ã€‚</p>
<p>è™½ç„¶ä»å¤„äºé¢„è§ˆé˜¶æ®µï¼Œä½† Swift åŒ…ç´¢å¼•ä¸­å·²æœ‰è¶…è¿‡ 25% çš„åŒ…å¯ä»¥ç¼–è¯‘ç”¨äº Android ç³»ç»Ÿã€‚</p>
<p>ä»æ ¸å¿ƒå±‚é¢æ¥çœ‹ï¼Œé€‚ç”¨äº Android ç³»ç»Ÿçš„ Swift SDK åŒ…å«ä¸€ä¸ªä¸º Android å¹³å°é‡èº«å®šåˆ¶çš„ Swift å·¥å…·é“¾ï¼ˆå³ç¼–è¯‘å™¨å’Œè¿è¡Œåœ¨ Android ç³»ç»Ÿä¸Šçš„ Swift æ ‡å‡†åº“å®ç°ï¼‰ï¼Œä»¥åŠä¸€ç»„èƒ½è®© Swift è®¿é—® Android API çš„ç»‘å®šã€‚è¯¥ Swift å·¥å…·é“¾å€ŸåŠ© <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fswiftlang%2Fswift-java" target="_blank" title="https://github.com/swiftlang/swift-java" ref="nofollow noopener noreferrer">swift-java</a> é¡¹ç›®å®ç° Java ä¸ Swift çš„äº’æ“ä½œæ€§ï¼Œèƒ½å¤Ÿåˆ›å»ºå…±äº«å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ä¼šè¢«é“¾æ¥åˆ° Android å®‰è£…åŒ…ï¼ˆ<code>.apk</code>ï¼‰å­˜æ¡£ä¸­ï¼Œå¹¶å¯é€šè¿‡ Java æœ¬åœ°æ¥å£ï¼ˆ<code>JNI</code>ï¼‰è¿›è¡Œè®¿é—®ã€‚</p>
<p>Android ç‰ˆ Swift SDK åœ¨ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰æ–¹é¢é‡‡å–ä¸­ç«‹çš„ç­–ç•¥ã€‚å…¶å›¢é˜Ÿä¸ä¼šåªä¸“æ³¨äºæŸä¸€ç§ UI æ¡†æ¶ï¼Œè€Œæ˜¯ä¼šæ”¯æŒç°æœ‰çš„æ¡†æ¶ï¼Œç‰¹åˆ«æ˜¯ Android åŸç”Ÿå¼€å‘å·¥å…·åŒ…ï¼ˆå¦‚ <code>Jetpack Compose</code> å’Œä¼ ç»Ÿçš„åŸºäº <code>XML</code> çš„ç³»ç»Ÿï¼‰ã€<code>Flutter</code> çš„ UI å¼•æ“ï¼Œä»¥åŠåƒ <code>Skip</code> è¿™æ ·çš„ç¬¬ä¸‰æ–¹æ¡¥æ¥è§£å†³æ–¹æ¡ˆã€‚Swift  Android å›¢é˜Ÿå¹¶æœªæ˜ç¡®æåŠçš„å¦ä¸€ç§å¯è¡Œæ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ <code>OpenGL</code>ã€<code>Vulkan</code> æˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ä»¥ Swift å®ç° UIï¼Œç„¶åä½¿ç”¨ <code>NativeActivity</code> å°†å…¶é›†æˆåˆ° Android åº”ç”¨ä¸­ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ <code>Skip</code> æ¡†æ¶ï¼Œå®ƒé€šè¿‡å°† <code>SwiftUI</code> ä¸ <code>Jetpack Compose</code> è¿›è¡Œæ¡¥æ¥ï¼Œåœ¨ Android ç³»ç»Ÿä¸Šé‡æ–°å®ç°äº† <code>SwiftUI</code>ã€‚è¿™ç§æ–¹æ³•è®© iOS å¼€å‘è€…èƒ½ç”¨æœ€å°‘çš„ç²¾åŠ›ï¼Œåœ¨åŒä¸€ä¸ªä»£ç åº“ä¸­ç¼–å†™åº”ç”¨çš„ä¸šåŠ¡é€»è¾‘å’Œç”¨æˆ·ç•Œé¢ã€‚</p>
<p>æœ‰ä¸€ä¸ªåä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fswiftcrossui.dev%2F" target="_blank" title="https://swiftcrossui.dev/" ref="nofollow noopener noreferrer">SwiftCrossUI</a> çš„å¼€æºæ›¿ä»£æ–¹æ¡ˆï¼Œå®ƒèƒ½åœ¨ macOSã€Linuxã€Windows ç³»ç»Ÿä¸Šæä¾›ç±»ä¼¼äº SwiftUI çš„ç”¨æˆ·ç•Œé¢ APIï¼Œå¹¶ä¸”å¯¹ Android ä¹Ÿæœ‰ä¸€äº›åˆæ­¥æ”¯æŒã€‚</p>
<p>è™½ç„¶åœ¨ iOS å’Œ Android åº”ç”¨ä¸­éƒ½ä½¿ç”¨ Swift çš„å‰æ™¯å¬èµ·æ¥å¾ˆè¯±äººï¼Œä½†æ­£å¦‚ andrekandre åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fnews.ycombinator.com%2Fitem%3Fid%3D45700274" target="_blank" title="https://news.ycombinator.com/item?id=45700274" ref="nofollow noopener noreferrer">Hacker News</a> ä¸ŠæŒ‡å‡ºçš„ï¼Œåˆ›å»ºå‡ºè‰²çš„è·¨å¹³å°åº”ç”¨ä¸ä»…ä»…æ˜¯å·¥å…·é“¾æ”¯æŒå’ŒåŸç”Ÿå·¥å…·åŒ…çš„é—®é¢˜ï¼š</p>
<blockquote>
<p>ä¹‹å‰å°±èµ°è¿‡è¿™æ¡è·¯ï¼Œè¯´å®è¯ï¼Œæœ€å¤§çš„é—®é¢˜åœ¨äºå¼€å‘è€…çš„ç”¨æˆ·ä½“éªŒï¼ˆiOS å¼€å‘è€…ä¸å®¹æ˜“è¿›è¡Œè°ƒè¯•ï¼Œä¸ Kotlin å­˜åœ¨æ¨¡å‹ä¸åŒ¹é…çš„é—®é¢˜ï¼Œæ¯”å¦‚æ— æ³•ä» Swift æ•è· Kotlin å¼‚å¸¸ï¼‰ï¼Œè€Œä¸”æœ€ç»ˆå³ä¾¿æ˜¯ Kotlin å¤šå¹³å°ä¹Ÿå’Œç”¨äº Android å¼€å‘çš„ Kotlin ä¸ä¸€æ ·ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œä½ ä»ç„¶ç®—æ˜¯åœ¨å¼•å…¥ç¬¬ä¸‰ç§è¯­è¨€â€¦â€¦</p>
</blockquote>
<p>åœ¨è‹¹æœå®£å¸ƒåœ¨ Swift é¡¹ç›®ä¸­æˆç«‹ä¸€ä¸ª Android å·¥ä½œå°ç»„å¤§çº¦å…­ä¸ªæœˆåï¼Œé€‚ç”¨äº Android ç³»ç»Ÿçš„ Swift è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆSDKï¼‰é¦–æ¬¡å‘å¸ƒã€‚è¯¥å·¥ä½œå°ç»„æ—¨åœ¨ç¡®ä¿ Swift æ— éœ€ä¾èµ–éå®˜æ–¹åˆ†æ”¯å°±èƒ½ç¼–è¯‘ç”¨äº Android ç³»ç»Ÿçš„ä»£ç ï¼Œå¹¶å¢å¼º Swift çš„æ ‡å‡†åº“ï¼Œä½¿å…¶èƒ½æ›´å¥½åœ°ä¸ Android API å…¼å®¹ã€‚</p>
<p>åœ¨é€‚ç”¨äº Android ç³»ç»Ÿçš„ Swift SDK å‘å¸ƒä¹‹å‰ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆï¼ˆå¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.scade.io%2F" target="_blank" title="https://www.scade.io/" ref="nofollow noopener noreferrer">Scade.io</a>ï¼‰å°†ä»–ä»¬çš„ Swift ä»£ç ç¼–è¯‘ç”¨äº Android ç³»ç»Ÿã€‚Scade åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fswiftlang%2Fswift-java" target="_blank" title="https://github.com/swiftlang/swift-java" ref="nofollow noopener noreferrer">Swift4j</a>ï¼Œä¸“æ³¨äºéç”¨æˆ·ç•Œé¢çš„åº”ç”¨ç¨‹åºé€»è¾‘ã€‚</p>
<p>å¯¹äºå¸Œæœ›å°†åº”ç”¨ç§»æ¤åˆ° iOS ç³»ç»Ÿçš„ Android å¼€å‘è€…æ¥è¯´ï¼Œä¸€ä¸ªæ›´æˆç†Ÿçš„é€‰æ‹©æ˜¯ä½¿ç”¨ Kotlin å¤šå¹³å°ä¸ <code>Jetpack Compose</code> å¤šå¹³å°æŠ€æœ¯ï¼Œè¿™å¯¹ä»äº‹ Android å¼€å‘çš„å¼€å‘è€…æ¥è¯´ï¼Œä¼šæ›´åŠ å‹å¥½å¹³æ»‘ã€‚</p>
<blockquote>
<p>åŸæ–‡<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.infoq.com%2Fnews%2F2025%2F10%2Fswift-sdk-android%2F%3FtopicPageSponsorship%3D84d80d2e-e1fc-48d1-9b49-d099f08c9cdb" target="_blank" title="https://www.infoq.com/news/2025/10/swift-sdk-android/?topicPageSponsorship=84d80d2e-e1fc-48d1-9b49-d099f08c9cdb" ref="nofollow noopener noreferrer">www.infoq.com/news/2025/1â€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Appç«¯ç”¨æˆ·æ¯æ—¥å¼¹å‡ºç­¾åˆ°å¼¹çª—å¦‚ä½•å®ç°ï¼Ÿï¼ˆuniapp+Vue)]]></title>    <link>https://juejin.cn/post/7570604028633088035</link>    <guid>https://juejin.cn/post/7570604028633088035</guid>    <pubDate>2025-11-10T03:50:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570604028633088035" data-draft-id="7570533058840412195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Appç«¯ç”¨æˆ·æ¯æ—¥å¼¹å‡ºç­¾åˆ°å¼¹çª—å¦‚ä½•å®ç°ï¼Ÿï¼ˆuniapp+Vue)"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-11-10T03:50:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Crystal328"/> <meta itemprop="url" content="https://juejin.cn/user/2359973194513272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Appç«¯ç”¨æˆ·æ¯æ—¥å¼¹å‡ºç­¾åˆ°å¼¹çª—å¦‚ä½•å®ç°ï¼Ÿï¼ˆuniapp+Vue)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2359973194513272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Crystal328
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:50:07.000Z" title="Mon Nov 10 2025 03:50:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>éœ€æ±‚ï¼š</strong></p>
<ul>
<li>åç«¯æä¾›æ¥å£è¿”å›ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ã€‚</li>
<li>åº”ç”¨å¯åŠ¨æˆ–é‡æ–°å±•ç¤ºæ—¶ï¼Œè‹¥ç”¨æˆ·æœªç­¾åˆ°ï¼Œéœ€è¦å¼¹å‡ºç­¾åˆ°å¼¹çª—ï¼›å·²ç­¾åˆ°åˆ™ä¸å¼¹ã€‚</li>
<li>ç­¾åˆ°æˆåŠŸåè‡ªåŠ¨å…³é—­å¼¹çª—ã€‚<br/></li>
</ul>
<p><strong>æ€è·¯ï¼š</strong></p>
<ol>
<li>ç”¨ <code>App.vue</code> çš„ <code>onShow</code> ç”Ÿå‘½å‘¨æœŸåšå…¨å±€åˆ¤æ–­ï¼Œç¡®ä¿åœ¨ä»»æ„é¡µé¢æ¿€æ´»æ—¶éƒ½èƒ½æ£€æŸ¥ç­¾åˆ°çŠ¶æ€ã€‚</li>
<li>åœ¨ç­¾åˆ°å¼¹çª—é¡µ <code>pages/checkIn/checkIn.vue</code> ä¸­è´Ÿè´£ï¼š  æ‹‰å–ç­¾åˆ°è¯¦æƒ…ã€æ¸²æŸ“å¥–åŠ±åˆ—è¡¨ã€è°ƒç”¨ç­¾åˆ°æ¥å£å¹¶åœ¨æˆåŠŸåè‡ªåŠ¨å…³é—­ã€‚</li>
</ol>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong><br/></p>
<ol>
<li>å°è£…æ¥å£è°ƒç”¨æ–¹æ³•</li>
</ol>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-comment">// è·å–ç­¾åˆ°ä¿¡æ¯</span>
  <span class="hljs-title function_">getSigninInfoApi</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">return</span> http.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/api/sign_in/info"</span>, { <span class="hljs-attr">params</span>: data || {} });
  },
  <span class="hljs-comment">// æ‰§è¡Œç­¾åˆ°</span>
  <span class="hljs-title function_">signInApi</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-keyword">return</span> http.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/api/sign_in/sign"</span>, { <span class="hljs-attr">data</span>: data || {} });
  },
</code></pre>
<ol start="2">
<li>å…¨å±€å…¥å£æ£€æŸ¥ç­¾åˆ°çŠ¶æ€ (App.vue)</li>
</ol>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-keyword">import</span> { loginApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/login.js'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">checkSigninStatus</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// Step 1. æ£€æŸ¥ token æ˜¯å¦å­˜åœ¨ï¼Œæ²¡æœ‰ç™»å½•ç”¨æˆ·ä¸è§¦å‘ç­¾åˆ°é€»è¾‘</span>
  <span class="hljs-keyword">const</span> token = uni.<span class="hljs-title function_">getStorageSync</span>(<span class="hljs-string">'token'</span>);
  <span class="hljs-keyword">if</span> (!token) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Step 2. è¯·æ±‚ç­¾åˆ°çŠ¶æ€æ¥å£</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> loginApi.<span class="hljs-title function_">getSigninInfoApi</span>({});
    <span class="hljs-keyword">if</span> (res?.<span class="hljs-property">code</span> !== <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ¥å£å¼‚å¸¸ç›´æ¥é€€å‡º</span>

    <span class="hljs-keyword">const</span> hasSignedToday = !!res?.<span class="hljs-property">data</span>?.<span class="hljs-property">is_signed_today</span>;
    <span class="hljs-keyword">if</span> (hasSignedToday) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å·²ç­¾åˆ°åˆ™ä¸å¼¹çª—</span>

    <span class="hljs-comment">// Step 3. æ‰“å¼€ç­¾åˆ°å¼¹çª—ï¼ˆé˜²æ­¢é‡å¤è·³è½¬ï¼‰</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">openPopup</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">const</span> pages = <span class="hljs-title function_">getCurrentPages</span>();
      <span class="hljs-keyword">const</span> currentPage = pages[pages.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
      <span class="hljs-keyword">if</span> (!currentPage || currentPage.<span class="hljs-property">route</span> === <span class="hljs-string">'pages/checkIn/checkIn'</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-comment">// è½»å¾®å»¶è¿Ÿé˜²æ­¢è·¯ç”±å†²çª</span>
      uni.<span class="hljs-title function_">navigateTo</span>({
        <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/checkIn/checkIn'</span>
      });
    };

    <span class="hljs-built_in">setTimeout</span>(openPopup, <span class="hljs-number">300</span>);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ£€æŸ¥ç­¾åˆ°çŠ¶æ€å¤±è´¥:'</span>, e);
  }
};

<span class="hljs-comment">// åœ¨ App.vue çš„ onShow ç”Ÿå‘½å‘¨æœŸä¸­è§¦å‘</span>
<span class="hljs-title function_">onShow</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">checkSigninStatus</span>();
});
</code></pre>
<ol start="3">
<li>ç­¾åˆ°å¼¹çª—é€»è¾‘ (pages/checkIn/checkIn.vue)</li>
</ol>
<ul>
<li>é¡µé¢åŠ è½½æ—¶å±•ç¤ºç­¾åˆ°æŒ‰é’®ã€‚</li>
<li>ç‚¹å‡»â€œç­¾åˆ°â€åè°ƒç”¨ <code>loginApi.signInApi()</code>ã€‚</li>
<li>ç­¾åˆ°æˆåŠŸåå¼¹å‡ºæç¤ºå¹¶è‡ªåŠ¨å…³é—­å¼¹çª—ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// pages/checkIn/checkIn.vue</span>
<span class="hljs-keyword">import</span> { loginApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/login.js'</span>;

<span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);       <span class="hljs-comment">// æŒ‰é’®åŠ è½½çŠ¶æ€</span>
<span class="hljs-keyword">const</span> isSignedToday = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// æ˜¯å¦å·²ç­¾åˆ°</span>

<span class="hljs-comment">// é¡µé¢åŠ è½½æ—¶æ‹‰å–ç­¾åˆ°çŠ¶æ€</span>
<span class="hljs-title function_">onShow</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> loginApi.<span class="hljs-title function_">getSigninInfoApi</span>({});
  <span class="hljs-keyword">if</span> (res?.<span class="hljs-property">code</span> === <span class="hljs-number">1</span>) {
    isSignedToday.<span class="hljs-property">value</span> = !!res.<span class="hljs-property">data</span>.<span class="hljs-property">is_signed_today</span>;
  }
});

<span class="hljs-comment">// ç‚¹å‡»â€œç«‹å³ç­¾åˆ°â€æŒ‰é’®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSignIn</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (loading.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> loginApi.<span class="hljs-title function_">signInApi</span>({});
    <span class="hljs-keyword">if</span> (res?.<span class="hljs-property">code</span> === <span class="hljs-number">1</span>) {
      uni.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: <span class="hljs-string">'ç­¾åˆ°æˆåŠŸ'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'success'</span>
      });
      <span class="hljs-comment">// å»¶è¿Ÿå…³é—­å¼¹çª—</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        uni.<span class="hljs-title function_">navigateBack</span>(); <span class="hljs-comment">// è¿”å›ä¸Šä¸€ä¸ªé¡µé¢ï¼ˆå³å…³é—­å¼¹çª—ï¼‰</span>
      }, <span class="hljs-number">800</span>);
    } <span class="hljs-keyword">else</span> {
      uni.<span class="hljs-title function_">showToast</span>({
        <span class="hljs-attr">title</span>: res?.<span class="hljs-property">msg</span> || <span class="hljs-string">'ç­¾åˆ°å¤±è´¥ï¼Œè¯·ç¨åå†è¯•'</span>,
        <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
      });
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç­¾åˆ°è¯·æ±‚å¤±è´¥:'</span>, err);
    uni.<span class="hljs-title function_">showToast</span>({
      <span class="hljs-attr">title</span>: <span class="hljs-string">'ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•'</span>,
      <span class="hljs-attr">icon</span>: <span class="hljs-string">'none'</span>
    });
  } <span class="hljs-keyword">finally</span> {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ]]></title>    <link>https://juejin.cn/post/7570630923710005300</link>    <guid>https://juejin.cn/post/7570630923710005300</guid>    <pubDate>2025-11-10T04:05:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570630923710005300" data-draft-id="7570651893867659316" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ    "/> <meta itemprop="keywords" content="å‰ç«¯,Trae,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-10T04:05:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kknone"/> <meta itemprop="url" content="https://juejin.cn/user/1366025597879930"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ    
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1366025597879930/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kknone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:05:11.000Z" title="Mon Nov 10 2025 04:05:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. ä¾¦å¬å™¨çš„åŸºæœ¬ç”¨æ³•</h3>
<p>ä¾¦å¬å™¨ï¼ˆ<code>watch</code>ï¼‰æ˜¯Vue 3ä¸­ç”¨äº<strong>å“åº”å¼è·Ÿè¸ªæ•°æ®æºå˜åŒ–</strong>çš„æ ¸å¿ƒAPIï¼Œå®ƒå…è®¸ä½ åœ¨å“åº”å¼æ•°æ®æ”¹å˜æ—¶æ‰§è¡Œè‡ªå®šä¹‰å‰¯ä½œç”¨ï¼ˆå¦‚å‘è¯·æ±‚ã€æ›´æ–°DOMã€æ—¥å¿—è®°å½•ç­‰ï¼‰ã€‚å…¶æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š<strong>æ˜ç¡®æŒ‡å®šè¦ç›‘å¬çš„â€œæºâ€ï¼Œå¹¶å®šä¹‰â€œå˜åŒ–æ—¶çš„å›è°ƒâ€</strong>ã€‚</p>
<h4 data-id="heading-1">1.1 ç›‘å¬å•ä¸ªrefæº</h4>
<p><code>ref</code>æ˜¯Vue 3ä¸­æœ€åŸºç¡€çš„å“åº”å¼åŒ…è£…å™¨ï¼Œç›‘å¬<code>ref</code>çš„è¯­æ³•éå¸¸ç›´è§‚â€”â€”ç›´æ¥å°†<code>ref</code>å¯¹è±¡ä½œä¸º<code>watch</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch } from 'vue'

// å“åº”å¼æ•°æ®ï¼šè®¡æ•°å™¨
const count = ref(0)

// ä¾¦å¬å™¨ï¼šç›‘å¬countçš„å˜åŒ–
watch(count, (newValue, oldValue) =&gt; {
  console.log(`è®¡æ•°å™¨ä» ${oldValue} å˜åˆ°äº† ${newValue}`)
  // è¿™é‡Œå¯ä»¥æ‰§è¡Œä»»ä½•å‰¯ä½œç”¨ï¼Œæ¯”å¦‚æ›´æ–°é¡µé¢æ ‡é¢˜
  document.title = `Count: ${newValue}`
})
&lt;/script&gt;

&lt;template&gt;
  &lt;button @click="count++"&gt;ç‚¹å‡»å¢åŠ ï¼ˆå½“å‰ï¼š{{ count }}ï¼‰&lt;/button&gt;
&lt;/template&gt;
</code></pre>
<p><strong>å…³é”®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>watch</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<strong>ç›‘å¬æº</strong>ï¼ˆè¿™é‡Œæ˜¯<code>count</code>ï¼‰ï¼›</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯<strong>å˜åŒ–å›è°ƒ</strong>ï¼Œæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š<code>newValue</code>ï¼ˆå˜åŒ–åçš„å€¼ï¼‰ã€<code>oldValue</code>ï¼ˆå˜åŒ–å‰çš„å€¼ï¼‰ï¼›</li>
<li>ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œ<code>count</code>å˜åŒ–ä¼šè§¦å‘å›è°ƒï¼Œä¿®æ”¹é¡µé¢æ ‡é¢˜ã€‚</li>
</ul>
<h4 data-id="heading-2">1.2 ç›‘å¬reactiveå¯¹è±¡çš„å±æ€§</h4>
<p>å¯¹äº<code>reactive</code>åˆ›å»ºçš„å“åº”å¼å¯¹è±¡ï¼Œ<strong>ä¸èƒ½ç›´æ¥ç›‘å¬æ•´ä¸ªå¯¹è±¡çš„å±æ€§</strong>ï¼ˆä¼šä¸¢å¤±å“åº”å¼è·Ÿè¸ªï¼‰ï¼Œéœ€è¦ç”¨<strong>getterå‡½æ•°</strong>è¿”å›è¦ç›‘å¬çš„å±æ€§ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { reactive, watch } from 'vue'

// å“åº”å¼å¯¹è±¡ï¼šç”¨æˆ·çŠ¶æ€
const user = reactive({
  name: 'Alice',
  age: 25
})

// ä¾¦å¬å™¨ï¼šç›‘å¬user.nameçš„å˜åŒ–
watch(
  () =&gt; user.name, // getterå‡½æ•°ï¼šè¿”å›è¦ç›‘å¬çš„å±æ€§
  (newName, oldName) =&gt; {
    console.log(`ç”¨æˆ·åä» ${oldName} æ”¹ä¸º ${newName}`)
  }
)
&lt;/script&gt;

&lt;template&gt;
  &lt;input v-model="user.name" placeholder="ä¿®æ”¹ç”¨æˆ·å" /&gt;
&lt;/template&gt;
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨getterï¼Ÿ</strong><br/>
<code>reactive</code>å¯¹è±¡çš„å±æ€§æ˜¯â€œå“åº”å¼ä»£ç†â€ï¼Œç›´æ¥å†™<code>user.name</code>ä¼šè¿”å›åŸå§‹å€¼ï¼Œæ— æ³•è¢«<code>watch</code>è·Ÿè¸ªã€‚getterå‡½æ•°ä¼šè®©Vueæ„ŸçŸ¥åˆ°â€œè¿™ä¸ªå±æ€§éœ€è¦è¢«è·Ÿè¸ªâ€ã€‚</p>
<h4 data-id="heading-3">1.3 ç›‘å¬å¤šä¸ªæº</h4>
<p><code>watch</code>æ”¯æŒåŒæ—¶ç›‘å¬<strong>å¤šä¸ªå“åº”å¼æº</strong>ï¼Œåªéœ€å°†æºåŒ…è£…æˆæ•°ç»„å³å¯ã€‚å›è°ƒå‡½æ•°çš„å‚æ•°ä¼šå¯¹åº”æ•°ç»„çš„æ–°å€¼å’Œæ—§å€¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, reactive, watch } from 'vue'

const count = ref(0)
const user = reactive({ name: 'Alice' })

// ç›‘å¬countå’Œuser.nameä¸¤ä¸ªæº
watch(
  [count, () =&gt; user.name], // æºæ•°ç»„
  ([newCount, newName], [oldCount, oldName]) =&gt; { // æ–°å€¼æ•°ç»„ã€æ—§å€¼æ•°ç»„
    console.log(`è®¡æ•°å™¨ï¼š${oldCount} â†’ ${newCount}ï¼›ç”¨æˆ·åï¼š${oldName} â†’ ${newName}`)
  }
)
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-4">2. ä¾¦å¬å™¨çš„é«˜çº§é€‰é¡¹</h3>
<p><code>watch</code>è¿˜æ”¯æŒé€šè¿‡<strong>é€‰é¡¹å¯¹è±¡</strong>ï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰é…ç½®æ›´çµæ´»çš„è¡Œä¸ºï¼Œå¸¸è§é€‰é¡¹æœ‰<code>deep</code>ï¼ˆæ·±åº¦ç›‘å¬ï¼‰ã€<code>immediate</code>ï¼ˆç«‹å³æ‰§è¡Œï¼‰ã€‚</p>
<h4 data-id="heading-5">2.1 æ·±åº¦ç›‘å¬ï¼ˆ<code>deep: true</code>ï¼‰</h4>
<p>å½“ç›‘å¬çš„æºæ˜¯<strong>åµŒå¥—å¯¹è±¡</strong>æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹<code>watch</code>åªä¼šè·Ÿè¸ªâ€œå¯¹è±¡å¼•ç”¨â€çš„å˜åŒ–ï¼Œä¸ä¼šè·Ÿè¸ªâ€œåµŒå¥—å±æ€§â€çš„å˜åŒ–ã€‚éœ€è¦å¼€å¯<code>deep: true</code>æ¥ç›‘å¬åµŒå¥—å±æ€§ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { reactive, watch } from 'vue'

// åµŒå¥—å“åº”å¼å¯¹è±¡ï¼šå•†å“ä¿¡æ¯
const product = reactive({
  id: 1,
  info: {
    name: 'Vue 3 å®æˆ˜',
    price: 99 // åµŒå¥—å±æ€§
  }
})

// æ·±åº¦ç›‘å¬product.infoçš„å˜åŒ–
watch(
  () =&gt; product.info,
  (newInfo, oldInfo) =&gt; {
    console.log(`å•†å“ä¿¡æ¯æ›´æ–°ï¼šä»·æ ¼ä» ${oldInfo.price} å˜ä¸º ${newInfo.price}`)
  },
  { deep: true } // å¼€å¯æ·±åº¦ç›‘å¬
)
&lt;/script&gt;

&lt;template&gt;
  &lt;input v-model.number="product.info.price" placeholder="ä¿®æ”¹ä»·æ ¼" /&gt;
&lt;/template&gt;
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šæ·±åº¦ç›‘å¬ä¼šéå†å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å±æ€§ï¼Œæ€§èƒ½å¼€é”€è¾ƒå¤§ï¼Œå°½é‡åªåœ¨å¿…è¦æ—¶ä½¿ç”¨ï¼ˆæ¯”å¦‚ç¡®å®éœ€è¦è·Ÿè¸ªåµŒå¥—å˜åŒ–ï¼‰ã€‚</p>
<h4 data-id="heading-6">2.2 ç«‹å³æ‰§è¡Œï¼ˆ<code>immediate: true</code>ï¼‰</h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>watch</code>åªä¼šåœ¨<strong>æºç¬¬ä¸€æ¬¡å˜åŒ–æ—¶</strong>æ‰§è¡Œå›è°ƒã€‚å¦‚æœéœ€è¦<strong>åˆå§‹æŒ‚è½½æ—¶å°±æ‰§è¡Œä¸€æ¬¡</strong>ï¼ˆæ¯”å¦‚åˆå§‹åŒ–æ—¶æ‹‰å–æ•°æ®ï¼‰ï¼Œå¯ä»¥åŠ <code>immediate: true</code>ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch } from 'vue'

const keyword = ref('Vue')

// ç«‹å³æ‰§è¡Œï¼šé¡µé¢åŠ è½½æ—¶å…ˆæŸ¥ä¸€æ¬¡â€œVueâ€çš„æœç´¢ç»“æœ
watch(
  keyword,
  async (newKeyword) =&gt; {
    const res = await fetch(`https://api.example.com/search?q=${newKeyword}`)
    const data = await res.json()
    console.log('æœç´¢ç»“æœï¼š', data)
  },
  { immediate: true }
)
&lt;/script&gt;
</code></pre>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šåˆå§‹åŒ–æ—¶æ ¹æ®é»˜è®¤å€¼åŠ è½½æ•°æ®ï¼ˆæ¯”å¦‚æœç´¢é¡µçš„é»˜è®¤å…³é”®è¯ï¼‰ã€‚</p>
<h3 data-id="heading-7">3. watch vs watchEffectï¼šæ ¸å¿ƒå·®å¼‚ä¸é€‰æ‹©</h3>
<details>
<summary>å¾€æœŸæ–‡ç« å½’æ¡£</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc405a8d9950af5b7c63b56c348ac36b6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c405a8d9950af5b7c63b56c348ac36b6/" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆVue 3éœ€è¦refå‡½æ•°ï¼Ÿå®ƒçš„å“åº”å¼åŸç†ä¸æ­£ç¡®ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa7e9abb9691a81e4404d9facabe0f7c3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a7e9abb9691a81e4404d9facabe0f7c3/" ref="nofollow noopener noreferrer">Vue 3ä¸­reactiveå‡½æ•°å¦‚ä½•é€šè¿‡Proxyå®ç°å“åº”å¼ï¼Ÿä½¿ç”¨æ—¶è¦é¿å¼€å“ªäº›è¯¯åŒºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbd995ea45161727597fb85b62566c43d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bd995ea45161727597fb85b62566c43d/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿçš„åº•å±‚åŸç†ä¸å®è·µè¦ç‚¹ä½ çœŸçš„æ‡‚å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F53e3f270a80675df662c6857a3332c0f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/53e3f270a80675df662c6857a3332c0f/" ref="nofollow noopener noreferrer">Vue 3æ¨¡æ¿å¦‚ä½•é€šè¿‡ç¼–è¯‘ä¸‰é˜¶æ®µå®ç°ä»å£°æ˜å¼è¯­æ³•åˆ°é«˜æ•ˆæ¸²æŸ“çš„è·¨è¶Š - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fddbce4f2a23aa72c96b1c0473900321e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ddbce4f2a23aa72c96b1c0473900321e/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿å¼•ç”¨ï¼šä»æ”¶DOMâ€œå¿«é€’â€åˆ°è°ƒå­ç»„ä»¶æ–¹æ³•ï¼Œä½ ç©æ˜ç™½äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F23a2d5a334e15575277814c16e45df50%2F" target="_blank" title="https://blog.cmdragon.cn/posts/23a2d5a334e15575277814c16e45df50/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿é‡Œçš„JSè¡¨è¾¾å¼æœ‰å•¥ä¸èƒ½ç¢°ï¼Ÿè®¡ç®—å±æ€§ä¸ºå•¥æ¯”æ–¹æ³•æ›´èƒ½æ‰“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6be38de6382e31d282659b689c5b17f0%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6be38de6382e31d282659b689c5b17f0/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueçš„v-modelè¡¨å•ç»‘å®šï¼šè¯­æ³•ç³–ã€åŠ¨æ€å€¼ã€ä¿®é¥°ç¬¦çš„å°æŠ€å·§ä½ éƒ½æŒæ¡äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F60ce517684f4a418f453d66aa805606c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/60ce517684f4a418f453d66aa805606c/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3äº‹ä»¶å¤„ç†çš„æŒ‘æˆ˜é¢˜ï¼šv-onã€ä¿®é¥°ç¬¦ã€è‡ªå®šä¹‰äº‹ä»¶ä½ èƒ½é€šå…³å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe4ae7d5e4a9205bb11b2baccb230c637%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e4ae7d5e4a9205bb11b2baccb230c637/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3çš„v-æŒ‡ä»¤ï¼šæ•°æ®å’ŒDOMçš„â€œç¿»è¯‘å®˜â€åˆ°åº•æœ‰å¤šå°‘æœ¬äº‹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F999ce4fb32259ff4fbf4bf7bcb851654%2F" target="_blank" title="https://blog.cmdragon.cn/posts/999ce4fb32259ff4fbf4bf7bcb851654/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3ï¼Œæ’å€¼ã€åŠ¨æ€ç»‘å®šå’Œé¿å‘æŠ€å·§ä½ éƒ½ææ‡‚äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa6997d81b49cd232b87e1cf603888ad1%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a6997d81b49cd232b87e1cf603888ad1/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLå¿«åˆ°é£èµ·ï¼Ÿå…ˆæ‰¾å¥åº·å¯†ç è¿˜æ˜¯å…ˆæ¢å¼•æ“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1fee7afbb9abd4540b8aa9c141d6845d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1fee7afbb9abd4540b8aa9c141d6845d/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLæŸ¥è¯¢å¿«åˆ°é£èµ·ï¼Ÿåˆ†åŒºè¡¨ã€ç‰©åŒ–è§†å›¾ã€å¹¶è¡ŒæŸ¥è¯¢è¿™ä¸‰æ‹›çµä¸çµï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F79c590fbd87ece535b11a71c9667884f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/79c590fbd87ece535b11a71c9667884f/" ref="nofollow noopener noreferrer">å­æŸ¥è¯¢æ€»æ‹–æ…¢æŸ¥è¯¢ï¼ŸæŠŠå®ƒå˜æˆè¿æ¥å°±èƒ½è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F748cdac2536008199abf8a8a2cd0ec85%2F" target="_blank" title="https://blog.cmdragon.cn/posts/748cdac2536008199abf8a8a2cd0ec85/" ref="nofollow noopener noreferrer">PostgreSQLå…¨è¡¨æ‰«ææ…¢åˆ°å´©æºƒï¼Ÿå»ºç´¢å¼•+æ”¹æŸ¥è¯¢+æ›´ç»Ÿè®¡ä¿¡æ¯ä¸‰æ‹›èƒ½ç ´ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F32ca943703226d317d4276a8fb53b0dd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/32ca943703226d317d4276a8fb53b0dd/" ref="nofollow noopener noreferrer">å¤æ‚æŸ¥è¯¢æ€»æ‹–åè…¿ï¼ŸPostgreSQLå¤šåˆ—ç´¢å¼•+è¦†ç›–ç´¢å¼•çš„ç¥ä»™æŠ€å·§ä½ getæ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fca93f1d53aa910e7ba5ffd8df611c12b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ca93f1d53aa910e7ba5ffd8df611c12b/" ref="nofollow noopener noreferrer">åªç»™è¡¨å­é›†å»ºç´¢å¼•ï¼Ÿç”¨å‡½æ•°ç»“æœå»ºç´¢å¼•ï¼ŸPostgreSQLè¿™ä¿©æ“ä½œå‡­å•¥èƒ½çœç©ºé—´åˆåŠ é€Ÿï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ff507856ebfddd592448813c510a53669%2F" target="_blank" title="https://blog.cmdragon.cn/posts/f507856ebfddd592448813c510a53669/" ref="nofollow noopener noreferrer">B-treeç´¢å¼•åƒå­—å…¸æŸ¥è¯ä¸€æ ·å·¥ä½œï¼Ÿé‚£å“ªäº›æ•°æ®åº“æŸ¥è¯¢å®ƒèƒ½åŠ é€Ÿï¼Œå“ªäº›ä¸èƒ½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb2213bfcb5b88a862f2138404c03d596%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b2213bfcb5b88a862f2138404c03d596/" ref="nofollow noopener noreferrer">æƒ³æŠ“PostgreSQLé‡Œçš„æ…¢SQLï¼Ÿpg_stat_statementsåŸºç¡€é»‘åŒ£å­å’Œpg_stat_monitoræ—¶é—´çª—ï¼Œè°èƒ½å¸®ä½ æ›´å‡†æªå‡ºæ€§èƒ½å°å·ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F26614eb7da6c476dde41d367ad888d2f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/26614eb7da6c476dde41d367ad888d2f/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œæ—¶å…‰æœºâ€MVCCå’Œé”æœºåˆ¶æ˜¯æ€ä¹ˆæå®šé«˜å¹¶å‘çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F69f99bc6972a860d559c74aad7280da4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/69f99bc6972a860d559c74aad7280da4/" ref="nofollow noopener noreferrer">PostgreSQLæ€§èƒ½æš´æ¶¨çš„å…³é”®ï¼Ÿå†…å­˜IOå¹¶å‘å‚æ•°å±…ç„¶è¦è¿™ä¹ˆè®¾ç½®ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F7b7053f392147a8b3b1a16bebeb08d0a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/7b7053f392147a8b3b1a16bebeb08d0a/" ref="nofollow noopener noreferrer">å¤§è¡¨æŸ¥è¯¢æ…¢åˆ°ç¿»éæ•´ä¸ªä¹¦æ¶ï¼ŸPostgreSQLåˆ†åŒºè¡¨æ•™ä½ æ€ä¹ˆâ€œåˆ†ç±»â€æ‰é«˜æ•ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc856e3cb073822349f3bf2d29995dcfc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c856e3cb073822349f3bf2d29995dcfc/" ref="nofollow noopener noreferrer">PostgreSQL æŸ¥è¯¢æ…¢ï¼Ÿæ˜¯ä¸æ˜¯å¿˜äº†ä¼˜åŒ– GROUP BYã€ORDER BY å’Œçª—å£å‡½æ•°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc096347d18e67b7431faacd2c4757093%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c096347d18e67b7431faacd2c4757093/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„å­æŸ¥è¯¢å’ŒCTEå±…ç„¶åœ¨æ€§èƒ½ä¸Šâ€œææ¶â€ï¼Ÿåˆ°åº•è¯¥ç«™å“ªè¾¹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F2eca89463454fd4250d7b66243b9fe5a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/2eca89463454fd4250d7b66243b9fe5a/" ref="nofollow noopener noreferrer">PostgreSQLé€‰Joinç­–ç•¥æœ‰å•¥å°ä¹ä¹ï¼ŸNested Loop/Merge/Hashè°æ˜¯å®ƒçš„èœï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F068ecb772a87d7df20a8c9fb4b233f8e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/068ecb772a87d7df20a8c9fb4b233f8e/" ref="nofollow noopener noreferrer">PostgreSQLæ–°æ‰‹SQLæ€»ç¿»è½¦ï¼Ÿè¿™7ä¸ªæ€§èƒ½é™·é˜±ä½ è¸©è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd498f63cd0a2d5a77e445c688a8b88db%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d498f63cd0a2d5a77e445c688a8b88db/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•é€‰B-Treeè¿˜æ˜¯GiSTï¼Ÿâ€œç‘å£«å†›åˆ€â€å’Œâ€œå¤šé¢æ‰‹â€çš„å·®åˆ«ä½ å±…ç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F9101b75bdec6faea9b35d54f14e37f36%2F" target="_blank" title="https://blog.cmdragon.cn/posts/9101b75bdec6faea9b35d54f14e37f36/" ref="nofollow noopener noreferrer">æƒ³çŸ¥é“æ•°æ®åº“æ€ä¹ˆç»™æŸ¥è¯¢â€œç®—æˆæœ¬é€‰è·¯çº¿â€ï¼ŸEXPLAINèƒ½å¸®ä½ çœ‹æ˜ç™½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd527f8ebb6e3dae2c7dfe4c8d8979444%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d527f8ebb6e3dae2c7dfe4c8d8979444/" ref="nofollow noopener noreferrer">PostgreSQLå¤„ç†SQLå±…ç„¶åƒåšè›‹ç³•ï¼Ÿè§£æåˆ°æ‰§è¡Œçš„4æ­¥é‡Œè—ç€å¤šå°‘æŸ¥è¯¢ä¼˜åŒ–çš„å°å¿ƒæœºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6bfdae84f313cf7ad0bb7045c4392347%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6bfdae84f313cf7ad0bb7045c4392347/" ref="nofollow noopener noreferrer">PostgreSQLå¤‡ä»½ä¸æ˜¯å¤åˆ¶æ–‡ä»¶ï¼Ÿç‰©ç†vsé€»è¾‘å’‹é€‰ï¼Ÿè¯¯åˆ è¿˜èƒ½ç²¾å‡†æ¢å¤åˆ°1åˆ†é’Ÿå‰ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fde3672803de34dbad244d0a8d48b0eb5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/de3672803de34dbad244d0a8d48b0eb5/" ref="nofollow noopener noreferrer">è½¬è´¦ä¸ç¿»è½¦ã€å¹¶å‘ä¸å¹²æ‰°ï¼ŒPostgreSQLçš„ACIDç‰¹æ€§åˆ°åº•æœ‰å•¥é­”æ³•ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe463e8a2668abdf00a228c9b79324ded%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e463e8a2668abdf00a228c9b79324ded/" ref="nofollow noopener noreferrer">é“¶è¡Œè½¬è´¦ä¸ç™½æ‰£é’±ã€ç”µå•†ä¸‹å•ä¸è¶…å–ï¼ŒPostgreSQLäº‹åŠ¡çš„è¯€çªæ˜¯å•¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F5c967e595058c4a1fc4474a68e64031d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/5c967e595058c4a1fc4474a68e64031d/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„PL/pgSQLåˆ°åº•æ˜¯å•¥ï¼Ÿèƒ½è®©SQLä»â€œè¯´ç›®æ ‡â€å˜â€œè®²æ­¥éª¤â€ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F325047855e3e23b5ef82f7d2db134fbd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/325047855e3e23b5ef82f7d2db134fbd/" ref="nofollow noopener noreferrer">PostgreSQLè§†å›¾ä¸å­˜æ•°æ®ï¼Ÿé‚£å®ƒæ€ä¹ˆç®€åŒ–æŸ¥è¯¢è¿˜èƒ½é€’å½’ç”Ÿæˆåºåˆ—å’Œæ§åˆ¶æƒé™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd2dba50bb6e4df7b27e735245a06a2a2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d2dba50bb6e4df7b27e735245a06a2a2/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•è¿™ä¹ˆç©ï¼Œæ‰èƒ½è®©ä½ çš„æŸ¥è¯¢çœŸçš„â€œé£â€èµ·æ¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F849ae5bab0f8c66e94c2f6ad1bb798e3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/849ae5bab0f8c66e94c2f6ad1bb798e3/" ref="nofollow noopener noreferrer">PostgreSQLçš„è¡¨å…³ç³»å’Œçº¦æŸï¼Œå’‹å¸®ä½ æå®šç”¨æˆ·è®¢å•ä¸æ··ä¹±ã€å­¦ç”Ÿé€‰è¯¾ä¸é‡å¤ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fef4800975ffa84f1ca51976a70a1585b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ef4800975ffa84f1ca51976a70a1585b/" ref="nofollow noopener noreferrer">PostgreSQLæŸ¥è¯¢çš„ç­›å­ã€æ’åºã€èšåˆã€åˆ†ç»„ï¼Ÿä½ ä¼šç”¨å®ƒä»¬æå®šæ•°æ®å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbf54711525c507c5eacfa7b0151c39d2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bf54711525c507c5eacfa7b0151c39d2/" ref="nofollow noopener noreferrer">PostgreSQLæ•°æ®ç±»å‹æ€ä¹ˆé€‰æ‰é«˜æ•ˆä¸è¸©å‘ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F887809b3e0375f5956873cd442f516d8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/887809b3e0375f5956873cd442f516d8/" ref="nofollow noopener noreferrer">æƒ³è§£é”PostgreSQLæŸ¥è¯¢ä»åŸºç¡€åˆ°è¿›é˜¶çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Ÿä½ éƒ½getäº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F934be1203725e8be9d6f6e9104e5abcc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/934be1203725e8be9d6f6e9104e5abcc/" ref="nofollow noopener noreferrer">PostgreSQL DELETEå±…ç„¶æœ‰è¿™äº›æ“ä½œï¼Ÿè¿”å›æ•°æ®ã€è¿è¡¨åˆ ä½ è¯•è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0f0622e9b7402b599e618150d0596ffe%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0f0622e9b7402b599e618150d0596ffe/" ref="nofollow noopener noreferrer">PostgreSQL UPDATEè¯­å¥æ€ä¹ˆç©ï¼Ÿä»æ”¹é‚®ç®±åˆ°æ‰¹é‡æ›´æ–°çš„é¿å‘æŠ€å·§ä½ éƒ½ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0e3bf7efc030b024ea67ee855a00f2de%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0e3bf7efc030b024ea67ee855a00f2de/" ref="nofollow noopener noreferrer">PostgreSQLæ’å…¥æ•°æ®è¿˜åœ¨é€æ¡æ•²ï¼Ÿæ‰¹é‡ã€å†²çªå¤„ç†ã€è¿”å›è‡ªå¢IDçš„æŠ€å·§ä½ ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb6cd3c86da6aac26ed829e472d34078e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b6cd3c86da6aac26ed829e472d34078e/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œä»“åº“-æˆ¿é—´-è´§æ¶â€æ¸¸æˆï¼Œä½ èƒ½å»ºå‡ºç”µå•†æ•°æ®åº“å’Œè¡¨å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fba1f545a3410144552fbdbfcf31b5265%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ba1f545a3410144552fbdbfcf31b5265/" ref="nofollow noopener noreferrer">PostgreSQL 17å®‰è£…æ€»ç¿»è½¦ï¼ŸWindows/macOS/Linuxé¿å‘æŒ‡å—å¸®ä½ æå®šï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb5474d1480509c5072085abc80b3dd9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b5474d1480509c5072085abc80b3dd9f/" ref="nofollow noopener noreferrer">èƒ½å½“å…³ç³»å‹æ•°æ®åº“è¿˜èƒ½ç©å¯¹è±¡ç‰¹æ€§ï¼Œèƒ½æ‹†å¤æ‚æŸ¥è¯¢è¿˜èƒ½è‡ªåŠ¨ç®¡åº“å­˜ï¼ŒPostgreSQLå‡­ä»€ä¹ˆè¿™ä¹ˆé¦™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fcc098d8836e787baa8a4d92e4d56d5c5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/cc098d8836e787baa8a4d92e4d56d5c5/" ref="nofollow noopener noreferrer">ç»™æ¥å£åŠ æ–°å­—æ®µåˆä¸æå´©è€å®¢æˆ·ç«¯ï¼ŸFastAPIçš„å¤šç‰ˆæœ¬APIé å“ªä¸‰æ‹›å®ç°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F46d05151c5bd31cf37a7bcf0b8f5b0b8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/46d05151c5bd31cf37a7bcf0b8f5b0b8/" ref="nofollow noopener noreferrer">æµé‡çªå¢è¦æå´©FastAPIï¼Ÿç†”æ–­æµ‹è¯•æ˜¯æ€ä¹ˆé˜²ç³»ç»Ÿé›ªå´©çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F65ce343cc5df9faf3a8e2eeaab42ae45%2F" target="_blank" title="https://blog.cmdragon.cn/posts/65ce343cc5df9faf3a8e2eeaab42ae45/" ref="nofollow noopener noreferrer">FastAPIç§’æ€åº“å­˜æ€»å˜è´Ÿæ•°ï¼ŸRedisåˆ†å¸ƒå¼é”èƒ½å¸®ä½ å®ˆä½åº•çº¿å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Feed6cd8985d9be0a4b092a7da38b3e0c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/eed6cd8985d9be0a4b092a7da38b3e0c/" ref="nofollow noopener noreferrer">FastAPIçš„CIæµæ°´çº¿æ€ä¹ˆè‡ªåŠ¨æµ‹ç«¯ç‚¹ï¼Œè¿˜èƒ½è®©AllureæŠ¥å‘Šç¾åˆ°çŠ¯è§„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6157d87338ce894d18c013c3c4777abb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6157d87338ce894d18c013c3c4777abb/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨GitHub Actionsä¸ºFastAPIé¡¹ç›®æ‰“é€ è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ffc4ef84559e04693a620d0714cb30787%2F" target="_blank" title="https://blog.cmdragon.cn/posts/fc4ef84559e04693a620d0714cb30787/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨Git Hookå’ŒCIæµæ°´çº¿ä¸ºFastAPIé¡¹ç›®ä¿é©¾æŠ¤èˆªï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F02b0c96842d1481c72dab63a149ce0dd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/02b0c96842d1481c72dab63a149ce0dd/" ref="nofollow noopener noreferrer">FastAPIå¦‚ä½•ç”¨å¥‘çº¦æµ‹è¯•ç¡®ä¿APIçš„ã€Œèœå•ã€ä¸ã€Œèœå“ã€ä¸€è‡´ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc9c1e3bb0fdc15303b9b3b1f20124b0b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c9c1e3bb0fdc15303b9b3b1f20124b0b/" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆTDDèƒ½è®©ä½ çš„FastAPIå¼€å‘é£èµ·æ¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fddbfa0447a5d0d6f9af12e7a6b206f70%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ddbfa0447a5d0d6f9af12e7a6b206f70/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨FastAPIç©è½¬å¤šæ¨¡å—æµ‹è¯•ä¸å¼‚æ­¥ä»»åŠ¡ï¼Œè®©ä»£ç ä¸å†â€œé—¹è„¾æ°”â€ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbf9883a75ffa46b523a03b16ec56ce48%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bf9883a75ffa46b523a03b16ec56ce48/" ref="nofollow noopener noreferrer">å¦‚ä½•åœ¨FastAPIä¸­ç©è½¬â€œæ—¶å…‰å€’æµâ€çš„æ•°æ®åº“äº‹åŠ¡å›æ»šæµ‹è¯•ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe553dbd5d51835d2c69553f4a773e2d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be553dbd5d51835d2c69553f4a773e2d/" ref="nofollow noopener noreferrer">å¦‚ä½•åœ¨FastAPIä¸­ä¼˜é›…åœ°æ¨¡æ‹Ÿå¤šæ¨¡å—é›†æˆæµ‹è¯•ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F533874f5700b8506d4c68781597db659%2F" target="_blank" title="https://blog.cmdragon.cn/posts/533874f5700b8506d4c68781597db659/" ref="nofollow noopener noreferrer">å¤šç¯å¢ƒé…ç½®åˆ‡æ¢æœºåˆ¶èƒ½å¦è®©å¼€å‘ä¸ç”Ÿäº§æ— ç¼è¡”æ¥ï¼Ÿ - cmdragon's Blog</a></li>
</ul>
</details>
<details>
<summary>å…è´¹å¥½ç”¨çš„çƒ­é—¨åœ¨çº¿å·¥å…·</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fraid-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/raid-calculator" ref="nofollow noopener noreferrer">RAID è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fphotoshop-online" target="_blank" title="https://tools.cmdragon.cn/zh/apps/photoshop-online" ref="nofollow noopener noreferrer">åœ¨çº¿PS - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmermaid-live-editor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/mermaid-live-editor" ref="nofollow noopener noreferrer">Mermaid åœ¨çº¿ç¼–è¾‘å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmath-solver-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/math-solver-calculator" ref="nofollow noopener noreferrer">æ•°å­¦æ±‚è§£è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsmart-teleprompter" target="_blank" title="https://tools.cmdragon.cn/zh/apps/smart-teleprompter" ref="nofollow noopener noreferrer">æ™ºèƒ½æè¯å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmagic-resume" target="_blank" title="https://tools.cmdragon.cn/zh/apps/magic-resume" ref="nofollow noopener noreferrer">é­”æ³•ç®€å† - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-puzzle-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-puzzle-tool" ref="nofollow noopener noreferrer">Image Puzzle Tool - å›¾ç‰‡æ‹¼å›¾å·¥å…· | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsubtitle-downloader" target="_blank" title="https://tools.cmdragon.cn/zh/apps/subtitle-downloader" ref="nofollow noopener noreferrer">å­—å¹•ä¸‹è½½å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flyrics-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lyrics-generator" ref="nofollow noopener noreferrer">æ­Œè¯ç”Ÿæˆå·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcloud-drive-search" target="_blank" title="https://tools.cmdragon.cn/zh/apps/cloud-drive-search" ref="nofollow noopener noreferrer">ç½‘ç›˜èµ„æºèšåˆæœç´¢ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fascii-art-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ascii-art-generator" ref="nofollow noopener noreferrer">ASCIIå­—ç¬¦ç”»ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fjwt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/jwt-tool" ref="nofollow noopener noreferrer">JSON Web Tokens å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbcrypt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/bcrypt-tool" ref="nofollow noopener noreferrer">Bcrypt å¯†ç å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-composer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-composer" ref="nofollow noopener noreferrer">GIF åˆæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-decomposer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-decomposer" ref="nofollow noopener noreferrer">GIF åˆ†è§£å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-steganography" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-steganography" ref="nofollow noopener noreferrer">æ–‡æœ¬éšå†™æœ¯ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh" target="_blank" title="https://tools.cmdragon.cn/zh" ref="nofollow noopener noreferrer">CMDragon åœ¨çº¿å·¥å…· - é«˜çº§AIå·¥å…·ç®±ä¸å¼€å‘è€…å¥—ä»¶ | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%3Fcategory%3Dtrending" target="_blank" title="https://tools.cmdragon.cn/zh/apps?category=trending" ref="nofollow noopener noreferrer">åº”ç”¨å•†åº— - å‘ç°1000+æå‡æ•ˆç‡ä¸å¼€å‘çš„AIå·¥å…·å’Œå®ç”¨ç¨‹åº | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fchangelog" target="_blank" title="https://tools.cmdragon.cn/zh/changelog" ref="nofollow noopener noreferrer">CMDragon æ›´æ–°æ—¥å¿— - æœ€æ–°æ›´æ–°ã€åŠŸèƒ½ä¸æ”¹è¿› | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fsponsor" target="_blank" title="https://tools.cmdragon.cn/zh/sponsor" ref="nofollow noopener noreferrer">æ”¯æŒæˆ‘ä»¬ - æˆä¸ºèµåŠ©è€… | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-image-ai" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-image-ai" ref="nofollow noopener noreferrer">AIæ–‡æœ¬ç”Ÿæˆå›¾åƒ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftemp-email" target="_blank" title="https://tools.cmdragon.cn/zh/apps/temp-email" ref="nofollow noopener noreferrer">ä¸´æ—¶é‚®ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fqrcode-parser" target="_blank" title="https://tools.cmdragon.cn/zh/apps/qrcode-parser" ref="nofollow noopener noreferrer">äºŒç»´ç è§£æå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-mindmap" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-mindmap" ref="nofollow noopener noreferrer">æ–‡æœ¬è½¬æ€ç»´å¯¼å›¾ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fregex-visualizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/regex-visualizer" ref="nofollow noopener noreferrer">æ­£åˆ™è¡¨è¾¾å¼å¯è§†åŒ–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsteganography-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/steganography-tool" ref="nofollow noopener noreferrer">æ–‡ä»¶éšå†™å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fiptv-explorer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/iptv-explorer" ref="nofollow noopener noreferrer">IPTV é¢‘é“æ¢ç´¢å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsnapdrop" target="_blank" title="https://tools.cmdragon.cn/zh/apps/snapdrop" ref="nofollow noopener noreferrer">å¿«ä¼  - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flucky-draw" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lucky-draw" ref="nofollow noopener noreferrer">éšæœºæŠ½å¥–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fanime-scene-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/anime-scene-finder" ref="nofollow noopener noreferrer">åŠ¨æ¼«åœºæ™¯æŸ¥æ‰¾å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftime-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/time-toolkit" ref="nofollow noopener noreferrer">æ—¶é—´å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fspeed-test" target="_blank" title="https://tools.cmdragon.cn/zh/apps/speed-test" ref="nofollow noopener noreferrer">ç½‘é€Ÿæµ‹è¯• - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-remover" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-remover" ref="nofollow noopener noreferrer">AI æ™ºèƒ½æŠ å›¾å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-replacer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-replacer" ref="nofollow noopener noreferrer">èƒŒæ™¯æ›¿æ¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fartistic-qrcode" target="_blank" title="https://tools.cmdragon.cn/zh/apps/artistic-qrcode" ref="nofollow noopener noreferrer">è‰ºæœ¯äºŒç»´ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fopen-graph-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/open-graph-generator" ref="nofollow noopener noreferrer">Open Graph å…ƒæ ‡ç­¾ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-comparison" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-comparison" ref="nofollow noopener noreferrer">å›¾åƒå¯¹æ¯”å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-compressor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-compressor" ref="nofollow noopener noreferrer">å›¾ç‰‡å‹ç¼©ä¸“ä¸šç‰ˆ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fpassword-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/password-generator" ref="nofollow noopener noreferrer">å¯†ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsvg-optimizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/svg-optimizer" ref="nofollow noopener noreferrer">SVGä¼˜åŒ–å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcolor-palette" target="_blank" title="https://tools.cmdragon.cn/zh/apps/color-palette" ref="nofollow noopener noreferrer">è°ƒè‰²æ¿ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fonline-metronome" target="_blank" title="https://tools.cmdragon.cn/zh/apps/online-metronome" ref="nofollow noopener noreferrer">åœ¨çº¿èŠ‚æ‹å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcss-grid-layout" target="_blank" title="https://tools.cmdragon.cn/zh/apps/css-grid-layout" ref="nofollow noopener noreferrer">CSSç½‘æ ¼å¸ƒå±€ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Femail-validator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/email-validator" ref="nofollow noopener noreferrer">é‚®ç®±éªŒè¯å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcalligraphy-practice" target="_blank" title="https://tools.cmdragon.cn/zh/apps/calligraphy-practice" ref="nofollow noopener noreferrer">ä¹¦æ³•ç»ƒä¹ å­—å¸– - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffinance-calculator-suite" target="_blank" title="https://tools.cmdragon.cn/zh/apps/finance-calculator-suite" ref="nofollow noopener noreferrer">é‡‘èè®¡ç®—å™¨å¥—ä»¶ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fchinese-kinship-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/chinese-kinship-calculator" ref="nofollow noopener noreferrer">ä¸­å›½äº²æˆšå…³ç³»è®¡ç®—å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fprotobuf-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/protobuf-toolkit" ref="nofollow noopener noreferrer">Protocol Buffer å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-upscaler" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-upscaler" ref="nofollow noopener noreferrer">å›¾ç‰‡æ— æŸæ”¾å¤§ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-compare" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-compare" ref="nofollow noopener noreferrer">æ–‡æœ¬æ¯”è¾ƒå·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-batch-lookup" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-batch-lookup" ref="nofollow noopener noreferrer">IPæ‰¹é‡æŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdomain-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/domain-finder" ref="nofollow noopener noreferrer">åŸŸåæŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdns-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/dns-toolkit" ref="nofollow noopener noreferrer">DNSå·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffavicon-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/favicon-generator" ref="nofollow noopener noreferrer">ç½‘ç«™å›¾æ ‡ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fsitemap_index.xml" target="_blank" title="https://tools.cmdragon.cn/sitemap_index.xml" ref="nofollow noopener noreferrer">XML Sitemap</a></li>
</ul>
</details>
Vue 3è¿˜æä¾›äº†`watchEffect`ï¼Œå®ƒå’Œ`watch`çš„æ ¸å¿ƒå·®å¼‚åœ¨äº**ä¾èµ–è·Ÿè¸ªçš„æ–¹å¼**ï¼Œé€‰æ‹©å“ªä¸ªå–å†³äºä½ çš„éœ€æ±‚ï¼š
<h4 data-id="heading-8">3.1 æ ¸å¿ƒå·®å¼‚å¯¹æ¯”</h4>






























<table><thead><tr><th>ç‰¹æ€§</th><th><code>watch</code></th><th><code>watchEffect</code></th></tr></thead><tbody><tr><td>ä¾èµ–è·Ÿè¸ª</td><td>æ‰‹åŠ¨æŒ‡å®šç›‘å¬æºï¼ˆæ˜¾å¼ï¼‰</td><td>è‡ªåŠ¨è·Ÿè¸ªå›è°ƒä¸­ä½¿ç”¨çš„æ‰€æœ‰æºï¼ˆéšå¼ï¼‰</td></tr><tr><td>åˆå§‹æ‰§è¡Œ</td><td>é»˜è®¤ä¸æ‰§è¡Œï¼ˆéœ€<code>immediate</code>ï¼‰</td><td>æŒ‚è½½æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>æ—§å€¼è·å–</td><td>æ”¯æŒï¼ˆå›è°ƒå‚æ•°æœ‰<code>oldValue</code>ï¼‰</td><td>ä¸æ”¯æŒï¼ˆåªå…³æ³¨å½“å‰å€¼ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>éœ€è¦æ˜ç¡®æ§åˆ¶ç›‘å¬æºã€éœ€è¦æ—§å€¼</td><td>åªéœ€å“åº”ä¾èµ–å˜åŒ–ã€æ— éœ€æ—§å€¼</td></tr></tbody></table>
<h4 data-id="heading-9">3.2 ä»£ç ç¤ºä¾‹å¯¹æ¯”</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch, watchEffect } from 'vue'

const count = ref(0)
const message = ref('Hello')

// ä½¿ç”¨watchï¼šæ˜¾å¼ç›‘å¬count
watch(count, (newVal, oldVal) =&gt; {
  console.log(`countä» ${oldVal} å˜åˆ° ${newVal}`)
})

// ä½¿ç”¨watchEffectï¼šè‡ªåŠ¨è·Ÿè¸ªcountå’Œmessage
watchEffect(() =&gt; {
  console.log(`å½“å‰countï¼š${count.value}ï¼Œmessageï¼š${message.value}`)
})
&lt;/script&gt;
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<ul>
<li>é¡µé¢åŠ è½½æ—¶ï¼Œ<code>watchEffect</code>ç«‹å³æ‰§è¡Œï¼Œè¾“å‡º<code>å½“å‰countï¼š0ï¼Œmessageï¼šHello</code>ï¼›</li>
<li>ç‚¹å‡»æŒ‰é’®ä¿®æ”¹<code>count</code>ï¼Œ<code>watch</code>å’Œ<code>watchEffect</code>éƒ½ä¼šè§¦å‘ï¼›</li>
<li>ä¿®æ”¹<code>message</code>ï¼Œåªæœ‰<code>watchEffect</code>è§¦å‘ï¼ˆå› ä¸ºå®ƒè‡ªåŠ¨è·Ÿè¸ªäº†<code>message</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">4. å®è·µä¸­çš„åº”ç”¨åœºæ™¯</h3>
<p>ä¾¦å¬å™¨çš„ä»·å€¼åœ¨äº<strong>å°†â€œæ•°æ®å˜åŒ–â€ä¸â€œå‰¯ä½œç”¨â€è§£è€¦</strong>ï¼Œä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸è§çš„å®é™…åœºæ™¯ï¼š</p>
<h4 data-id="heading-11">4.1 æ•°æ®å˜åŒ–æ—¶å‘èµ·ç½‘ç»œè¯·æ±‚</h4>
<p>æ¯”å¦‚ç”¨æˆ·é€‰æ‹©åŸå¸‚åï¼Œè‡ªåŠ¨åŠ è½½è¯¥åŸå¸‚çš„å¤©æ°”ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch } from 'vue'

const city = ref('åŒ—äº¬')
const weather = ref('')

// ç›‘å¬cityå˜åŒ–ï¼ŒåŠ è½½å¤©æ°”
watch(city, async (newCity) =&gt; {
  const res = await fetch(`https://api.example.com/weather?city=${newCity}`)
  const data = await res.json()
  weather.value = data.weather
})
&lt;/script&gt;

&lt;template&gt;
  &lt;select v-model="city"&gt;
    &lt;option value="åŒ—äº¬"&gt;åŒ—äº¬&lt;/option&gt;
    &lt;option value="ä¸Šæµ·"&gt;ä¸Šæµ·&lt;/option&gt;
    &lt;option value="å¹¿å·"&gt;å¹¿å·&lt;/option&gt;
  &lt;/select&gt;
  &lt;p&gt;å½“å‰å¤©æ°”ï¼š{{ weather }}&lt;/p&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-12">4.2 è¡¨å•è¾“å…¥çš„å®æ—¶éªŒè¯</h4>
<p>æ¯”å¦‚æ³¨å†Œé¡µçš„å¯†ç å¼ºåº¦æ ¡éªŒï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch } from 'vue'

const password = ref('')
const passwordError = ref('')

// å®æ—¶éªŒè¯å¯†ç å¼ºåº¦
watch(password, (newPwd) =&gt; {
  if (newPwd.length &lt; 6) {
    passwordError.value = 'å¯†ç å¿…é¡»è‡³å°‘6ä½'
  } else if (!/[A-Z]/.test(newPwd)) {
    passwordError.value = 'å¯†ç å¿…é¡»åŒ…å«å¤§å†™å­—æ¯'
  } else {
    passwordError.value = ''
  }
})
&lt;/script&gt;

&lt;template&gt;
  &lt;input type="password" v-model="password" placeholder="è¾“å…¥å¯†ç " /&gt;
  &lt;p class="error" v-if="passwordError"&gt;{{ passwordError }}&lt;/p&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-13">5. è¯¾åQuiz</h3>
<p>é€šè¿‡ä»¥ä¸‹é—®é¢˜å·©å›ºæ‰€å­¦çŸ¥è¯†ï¼ˆç­”æ¡ˆåŸºäºVueå®˜ç½‘æ–‡æ¡£ï¼‰ï¼š</p>
<h4 data-id="heading-14">é—®é¢˜1ï¼šå¦‚ä½•ç›‘å¬reactiveå¯¹è±¡ä¸­çš„åµŒå¥—å±æ€§ï¼ˆå¦‚<code>state.user.address.city</code>ï¼‰ï¼Ÿè¯·å†™å‡ºä»£ç ç¤ºä¾‹ã€‚</h4>
<p><strong>ç­”æ¡ˆ</strong>ï¼šä½¿ç”¨getterå‡½æ•°è¿”å›åµŒå¥—å±æ€§ï¼ˆæ˜¾å¼æŒ‡å®šç›‘å¬æºï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">user</span>: {
    <span class="hljs-attr">address</span>: {
      <span class="hljs-attr">city</span>: <span class="hljs-string">'Beijing'</span>
    }
  }
})

<span class="hljs-comment">// æ­£ç¡®å†™æ³•ï¼šç”¨getterè¿”å›åµŒå¥—å±æ€§</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">user</span>.<span class="hljs-property">address</span>.<span class="hljs-property">city</span>,
  <span class="hljs-function">(<span class="hljs-params">newCity, oldCity</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åŸå¸‚ä» <span class="hljs-subst">${oldCity}</span> æ”¹ä¸º <span class="hljs-subst">${newCity}</span>`</span>)
  }
)
</code></pre>
<p><strong>é”™è¯¯å†™æ³•</strong>ï¼šç›´æ¥å†™<code>state.user.address.city</code>ï¼ˆä¼šä¸¢å¤±å“åº”å¼è·Ÿè¸ªï¼‰ã€‚</p>
<h4 data-id="heading-15">é—®é¢˜2ï¼š<code>watch</code>å’Œ<code>watchEffect</code>çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿè¯·åˆ—ä¸¾ä¸¤ç‚¹ã€‚</h4>
<p><strong>ç­”æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>ä¾èµ–è·Ÿè¸ªæ–¹å¼</strong>ï¼š<code>watch</code>éœ€è¦æ‰‹åŠ¨æŒ‡å®šç›‘å¬æºï¼ˆæ˜¾å¼ï¼‰ï¼Œ<code>watchEffect</code>è‡ªåŠ¨è·Ÿè¸ªå›è°ƒä¸­ä½¿ç”¨çš„æ‰€æœ‰æºï¼ˆéšå¼ï¼‰ï¼›</li>
<li><strong>åˆå§‹æ‰§è¡Œæ—¶æœº</strong>ï¼š<code>watch</code>é»˜è®¤ä¸æ‰§è¡Œï¼ˆéœ€<code>immediate</code>é€‰é¡¹ï¼‰ï¼Œ<code>watchEffect</code>æŒ‚è½½æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ol>
<h3 data-id="heading-16">6. å¸¸è§æŠ¥é”™ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-17">æŠ¥é”™1ï¼šç›‘å¬reactiveå¯¹è±¡æ—¶ï¼Œæ—§å€¼ä¸æ–°å€¼ç›¸åŒ</h4>
<p><strong>ç°è±¡</strong>ï¼šä¿®æ”¹<code>reactive</code>å¯¹è±¡çš„å±æ€§åï¼Œ<code>watch</code>å›è°ƒä¸­çš„<code>oldValue</code>å’Œ<code>newValue</code>å®Œå…¨ä¸€æ ·ã€‚<br/>
<strong>åŸå› </strong>ï¼š<code>reactive</code>è¿”å›çš„æ˜¯<strong>ä»£ç†å¯¹è±¡</strong>ï¼Œä¿®æ”¹å±æ€§ä¸ä¼šæ”¹å˜å¯¹è±¡çš„å¼•ç”¨ï¼Œå› æ­¤<code>oldValue</code>å’Œ<code>newValue</code>æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚<br/>
<strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>è‹¥éœ€ç›‘å¬å•ä¸ªå±æ€§ï¼Œç”¨<code>getter</code>å‡½æ•°è¿”å›å±æ€§ï¼ˆå¦‚<code>() =&gt; state.count</code>ï¼‰ï¼Œæ­¤æ—¶<code>oldValue</code>ä¼šæ˜¯åŸå§‹å€¼ï¼›</li>
<li>è‹¥éœ€ç›‘å¬æ•´ä¸ªå¯¹è±¡ï¼Œæ‰‹åŠ¨ä¿å­˜æ—§å€¼ï¼ˆé€‚ç”¨äºç®€å•åœºæ™¯ï¼‰ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })
<span class="hljs-keyword">let</span> oldCount = state.<span class="hljs-property">count</span> <span class="hljs-comment">// æ‰‹åŠ¨ä¿å­˜æ—§å€¼</span>

<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">count</span>,
  <span class="hljs-function">(<span class="hljs-params">newCount</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ—§å€¼ï¼š<span class="hljs-subst">${oldCount}</span>ï¼Œæ–°å€¼ï¼š<span class="hljs-subst">${newCount}</span>`</span>)
    oldCount = newCount <span class="hljs-comment">// æ›´æ–°æ—§å€¼</span>
  }
)
</code></pre>
</li>
</ul>
<h4 data-id="heading-18">æŠ¥é”™2ï¼šæ·±åº¦ç›‘å¬ä¸ç”Ÿæ•ˆ</h4>
<p><strong>ç°è±¡</strong>ï¼šä¿®æ”¹<code>reactive</code>å¯¹è±¡çš„åµŒå¥—å±æ€§ï¼Œ<code>watch</code>å›è°ƒä¸è§¦å‘ã€‚<br/>
<strong>åŸå› </strong>ï¼šæœªå¼€å¯<code>deep: true</code>é€‰é¡¹ï¼Œ<code>watch</code>é»˜è®¤åªè·Ÿè¸ªå¯¹è±¡çš„<strong>å¼•ç”¨å˜åŒ–</strong>ï¼Œä¸è·Ÿè¸ªåµŒå¥—å±æ€§ã€‚<br/>
<strong>è§£å†³æ–¹æ³•</strong>ï¼šåœ¨<code>watch</code>çš„é€‰é¡¹ä¸­æ·»åŠ <code>deep: true</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> state.<span class="hljs-property">user</span>,
  <span class="hljs-function">(<span class="hljs-params">newUser, oldUser</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯æ›´æ–°ï¼š'</span>, newUser)
  },
  { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> } <span class="hljs-comment">// å¿…é¡»åŠ ï¼</span>
)
</code></pre>
<h4 data-id="heading-19">æŠ¥é”™3ï¼š<code>immediate: true</code>æ—¶æ—§å€¼ä¸º<code>undefined</code></h4>
<p><strong>ç°è±¡</strong>ï¼šå¼€å¯<code>immediate</code>åï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œå›è°ƒæ—¶<code>oldValue</code>æ˜¯<code>undefined</code>ã€‚<br/>
<strong>åŸå› </strong>ï¼š<code>immediate</code>è®©å›è°ƒåœ¨<strong>æŒ‚è½½æ—¶ç«‹å³æ‰§è¡Œ</strong>ï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰â€œæ—§å€¼â€ï¼ˆç¬¬ä¸€æ¬¡æ‰§è¡Œï¼‰ã€‚<br/>
<strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>è‹¥ä¸éœ€è¦æ—§å€¼ï¼Œå¿½ç•¥å³å¯ï¼›</li>
<li>è‹¥éœ€è¦åˆå§‹å€¼ï¼Œæ‰‹åŠ¨å¤„ç†ï¼ˆæ¯”å¦‚ç”¨<code>ref</code>ä¿å­˜åˆå§‹å€¼ï¼‰ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> keyword = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Vue'</span>)
<span class="hljs-keyword">const</span> initialKeyword = keyword.<span class="hljs-property">value</span> <span class="hljs-comment">// ä¿å­˜åˆå§‹å€¼</span>

<span class="hljs-title function_">watch</span>(
  keyword,
  <span class="hljs-function">(<span class="hljs-params">newKeyword, oldKeyword</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (oldKeyword === <span class="hljs-literal">undefined</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åˆå§‹å…³é”®è¯ï¼š<span class="hljs-subst">${initialKeyword}</span>`</span>)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å…³é”®è¯ä» <span class="hljs-subst">${oldKeyword}</span> æ”¹ä¸º <span class="hljs-subst">${newKeyword}</span>`</span>)
    }
  },
  { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> }
)
</code></pre>
</li>
</ul>
<h3 data-id="heading-20">å‚è€ƒé“¾æ¥</h3>
<ul>
<li>Vueå®˜ç½‘ï¼šä¾¦å¬å™¨åŸºç¡€ â†’ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fwatchers.html" target="_blank" title="https://vuejs.org/guide/essentials/watchers.html" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></li>
<li>Vueå®˜ç½‘ï¼š<code>watch</code> vs <code>watchEffect</code> â†’ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fwatchers.html%23watcheffect" target="_blank" title="https://vuejs.org/guide/essentials/watchers.html#watcheffect" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></li>
<li>Vueå®˜ç½‘ï¼šä¾¦å¬å™¨é€‰é¡¹ â†’ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fwatchers.html%23watcher-options" target="_blank" title="https://vuejs.org/guide/essentials/watchers.html#watcher-options" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Xcode å¸¸ç”¨ä½¿ç”¨æŠ€å·§è¯´æ˜ï¼Œæ€»æœ‰ä¸€ä¸ªå¸®åŠ©ä½ ]]></title>    <link>https://juejin.cn/post/7570491473033969673</link>    <guid>https://juejin.cn/post/7570491473033969673</guid>    <pubDate>2025-11-10T04:57:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570491473033969673" data-draft-id="7570491473033953289" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Xcode å¸¸ç”¨ä½¿ç”¨æŠ€å·§è¯´æ˜ï¼Œæ€»æœ‰ä¸€ä¸ªå¸®åŠ©ä½ "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-10T04:57:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024å°ç¥"/> <meta itemprop="url" content="https://juejin.cn/user/70007368988926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Xcode å¸¸ç”¨ä½¿ç”¨æŠ€å·§è¯´æ˜ï¼Œæ€»æœ‰ä¸€ä¸ªå¸®åŠ©ä½ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/70007368988926/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024å°ç¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:57:36.000Z" title="Mon Nov 10 2025 04:57:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘çš„å¼€æºé¡¹ç›®PakePluså¯ä»¥å°†ç½‘é¡µ/Vue/Reacté¡¹ç›®æ‰“åŒ…ä¸ºæ¡Œé¢/æ‰‹æœºåº”ç”¨å¹¶ä¸”å°äº5Måªéœ€å‡ åˆ†é’Ÿï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpakeplus.com" target="_blank" title="https://pakeplus.com" ref="nofollow noopener noreferrer">pakeplus.com</a></p><p><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eebb6e6a31cf41929a15ad1293866a12~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p><p/>
<h3 id="user-content-1-command--click-è·³æºç option--click-æ˜¾ç¤ºå¸®åŠ©" data-id="heading-0">1.Â <code>Command + Click</code>Â è·³æºç </h3>
<p>å¯ä»¥å•ç‹¬åœ¨settingé‡Œé¢è®¾ç½®ï¼š</p>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ba47293ecca45c484031a54ff757a58~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<p><code>Option + Click</code>Â æ˜¾ç¤ºå¸®åŠ©ï¼š</p>
<p><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16fceb3fb0864c4584a0e70a5f33967e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<p>Control + Click å¯ä»¥æŸ¥çœ‹è¿™ä¸ªæ–¹æ³•è°ƒç”¨è€…åœ¨å“ªé‡Œï¼šÂ </p>
<p><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcc8b08a019d4982bb1f4bb6cb244bd6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<h3 id="user-content-2-command--enter-æ˜¾ç¤ºä»£ç æç¤º" data-id="heading-1">2.Â <code>Command + Enter</code>Â æ˜¾ç¤ºä»£ç æç¤º</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœç´¢æ¡†æœç´¢è¯¥å¿«æ·æ–¹å¼ï¼Œæ›¿æ¢å¹¶æŒ‰ä¸‹å¿«æ·é”® `Command + Enter"ï¼Œå¦‚æœæœ‰å¿«æ·é”®å†²çªï¼Œéœ€è¦è§£å†³å†²çª</span>
Show Code Actions
</code></pre>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e49c6aa1f82c4297b9d930b35e17f2dc~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<h3 id="user-content-3-shift--backspace-åˆ é™¤å½“å‰è¡Œ" data-id="heading-2">3.Â <code>shift + BackSpace</code>Â åˆ é™¤å½“å‰è¡Œ</h3>
<pre><code class="hljs language-scss" lang="scss">Delete Line
</code></pre>
<h3 id="user-content-4-shift--enter-æ¢è¡Œ" data-id="heading-3">4.Â <code>shift + Enter</code>Â æ¢è¡Œ</h3>
<p>ç¼–è¾‘æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢å‡ è¡Œï¼Œç”¨äºæ·»åŠ å¿«æ·æŒ‡ä»¤</p>
<pre><code class="hljs language-css" lang="css">sudo vim /Applications/Xcode<span class="hljs-selector-class">.app</span>/Contents/Frameworks/IDEKit<span class="hljs-selector-class">.framework</span>/Versions/<span class="hljs-selector-tag">A</span>/Resources/IDETextKeyBindingSet<span class="hljs-selector-class">.plist</span>
</code></pre>
<p>æ–°å¢å†…å®¹</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">plist</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="hljs-string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">plist</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
<span class="hljs-comment">&lt;!-- å¼€å§‹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>My Custom<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>insert new line below<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>moveToEndOfLine:, insertNewline:<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ç»“æŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>Cancellation<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>Cancel<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>cancelOperation:<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span>
</code></pre>
<p>é‡æ–°æ‰“å¼€ xcodeï¼Œæ–°å¢ä¸‹é¢çš„å¿«æ·é”®</p>
<pre><code class="hljs language-arduino" lang="arduino">insert <span class="hljs-keyword">new</span> line below
</code></pre>
<h3 id="user-content-5-option--command--p-åˆ·æ–°-preview" data-id="heading-4">5.Â <code>option + command + p</code>Â åˆ·æ–° preview</h3>
<h3 id="user-content-6-option--command--l-ä»£ç æ ¼å¼åŒ–" data-id="heading-5">6.Â ä»£ç æ ¼å¼åŒ–</h3>
<p>å®‰è£… SwiftFormat for Xcode æ’ä»¶ï¼Œå…·ä½“æ•™ç¨‹ï¼š<a data-link-desc="æ–‡ç« æµè§ˆé˜…è¯»564æ¬¡ï¼Œç‚¹èµ13æ¬¡ï¼Œæ”¶è—8æ¬¡ã€‚å®‰è£…ååœ¨Xcodeçš„Editorèœå•æ‰¾ä¸åˆ°SwfitFormaté€‰é¡¹ï¼Œå¯ä»¥å°è¯•æ‰“å¼€SwfitFormat for Xcodeè½¯ä»¶ï¼Œç„¶åå†åœ¨è®¾ç½®é‡Œå®‰å…¨ä¸éšç§é€‰ä¸­Xcodeçš„è¿™ä¸ªæ’ä»¶ï¼Œç„¶åé‡å¯Xcodeå°è¯•ï¼Œæˆ‘å°±æ˜¯å› ä¸ºå®‰è£…SwfitFormat for Xcodeåæ²¡æœ‰æ‰“å¼€è¿‡ï¼Œç›´æ¥åœ¨å®‰å…¨ä¸éšç§é‡Œé¢æ‰¾ä¸åˆ°Xcodeçš„é€‰é¡¹ï¼Œæ‰€ä»¥å°±æ²¡æœ‰ç”Ÿæ•ˆï¼Œè®°å¾—è¿™ä¸€æ­¥ä¸€å®šè¦åšï¼æ‰“å¼€è®¾ç½® &gt; éšç§ä¸å®‰å…¨æ€§ &gt; é€‰æ‹©Xcode Sourde Editor &gt;" data-link-icon="https://g.csdnimg.cn/static/logo/favicon32.ico" data-link-title="Xcodeä»£ç æ ¼å¼åŒ–SwiftFormatå®‰è£…ä½¿ç”¨ï¼Œä»¥åŠä¸ç”Ÿæ•ˆé—®é¢˜-CSDNåšå®¢" href="https://link.juejin.cn?target=https%3A%2F%2Fxiaoshen.blog.csdn.net%2Farticle%2Fdetails%2F138999042" title="https://xiaoshen.blog.csdn.net/article/details/138999042" target="_blank" ref="nofollow noopener noreferrer">Xcodeä»£ç æ ¼å¼åŒ–SwiftFormatå®‰è£…ä½¿ç”¨ï¼Œä»¥åŠä¸ç”Ÿæ•ˆé—®é¢˜-CSDNåšå®¢</a></p>
<pre><code class="hljs language-arduino" lang="arduino">Format <span class="hljs-built_in">File</span>
</code></pre>
<h3 id="user-content-7-é‡æ„ä¸‹çš„é‡å‘½å-shift--f6" data-id="heading-6">7. é‡æ„ä¸‹çš„é‡å‘½åÂ <code>shift + F6</code></h3>
<pre><code class="hljs">Rename
</code></pre>
<h3 id="user-content-8-å¤šé€‰-ctrl--g" data-id="heading-7">8. å¤šé€‰Â <code>Ctrl + G</code></h3>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">Select</span> <span class="hljs-keyword">Next</span> Occurence
</code></pre>
<h3 id="user-content-9-æŸ¥æ‰¾æ–‡ä»¶-command--shift--o" data-id="heading-8">9. æŸ¥æ‰¾æ–‡ä»¶Â <code>Command + shift + O</code></h3>
<h3 id="user-content-10-æ‰“å¼€åº“-command-shift--l" data-id="heading-9">10. æ‰“å¼€åº“Â <code>Command +shift + L</code></h3>
<h3 id="user-content-11-åˆ›å»º-snippets" data-id="heading-10">11. åˆ›å»º snippets</h3>
<p>åœ¨ç¼–è¾‘å™¨ä¸­å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> &lt;#variable#&gt; = &lt;#<span class="hljs-keyword">val</span>#&gt;
</code></pre>
<p>é¼ æ ‡é€‰ä¸­è¯¥æ®µä»£ç ï¼Œå³é”®ä¿å­˜ä¸º snippetsï¼š</p>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b58d84d569194461a80d5c31a09a303b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<h3 data-id="heading-11"/>
<h3 id="user-content-12-ç¼–è¾‘å™¨ä»£ç å¯æŠ˜å " data-id="heading-12">12. ç¼–è¾‘å™¨ä»£ç å¯æŠ˜å </h3>
<p>ä¸‹é¢çš„code structure when scrollingä¹Ÿæ˜¯æ§åˆ¶æŠ˜å çš„</p>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5a679837bfb43589f65d402d9e4e157~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
<h3 data-id="heading-13"/>
<h3 id="user-content-13-å…³é—­æ„å»ºæˆåŠŸæç¤º" data-id="heading-14">13. å…³é—­æ„å»ºæˆåŠŸæç¤º</h3>
<p class="img-center"><img alt="" src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8083bae0a3ff498e90d539b93e14ced9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" width="1200" loading="lazy"/></p>
å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯1024å°ç¥ï¼ŒæŠ€æœ¯ç¾¤ / ç§æ´»ç¾¤ / è‚¡ç¥¨ç¾¤ æˆ– äº¤æœ‹å‹ éƒ½å¯ä»¥ç§ä¿¡æˆ‘ã€‚
å¦‚æœä½ è§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œä¸€é”®ä¸‰è¿ (ç‚¹èµã€è¯„è®ºã€å…³æ³¨)ï¼Œå°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒ~</div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Service Worker æ·±åº¦è§£æï¼šè®©ä½ çš„ Web åº”ç”¨ç¦»çº¿ä¹Ÿèƒ½é£]]></title>    <link>https://juejin.cn/post/7570191839594692671</link>    <guid>https://juejin.cn/post/7570191839594692671</guid>    <pubDate>2025-11-10T03:58:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570191839594692671" data-draft-id="7570008954044317730" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Service Worker æ·±åº¦è§£æï¼šè®©ä½ çš„ Web åº”ç”¨ç¦»çº¿ä¹Ÿèƒ½é£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-11-10T03:58:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å˜¿èµ·"/> <meta itemprop="url" content="https://juejin.cn/user/2076315267907197"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Service Worker æ·±åº¦è§£æï¼šè®©ä½ çš„ Web åº”ç”¨ç¦»çº¿ä¹Ÿèƒ½é£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2076315267907197/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å˜¿èµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:58:56.000Z" title="Mon Nov 10 2025 03:58:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œç”¨æˆ·ä½“éªŒå·²ç»æˆä¸ºäº†è¡¡é‡ä¸€ä¸ªåº”ç”¨æˆåŠŸä¸å¦çš„é‡è¦æ ‡å‡†ã€‚ç”¨æˆ·ä¸ä»…å¸Œæœ›ç½‘ç«™åŠ è½½é€Ÿåº¦å¿«ï¼Œè¿˜å¸Œæœ›å³ä½¿åœ¨ç½‘ç»œä¸ç¨³å®šæˆ–å®Œå…¨æ–­ç½‘çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨åº”ç”¨ã€‚è¿™å°±å¼•å‡ºäº†æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’â€”â€”Service Workerã€‚</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Service Worker æ˜¯ä¸€ç§åœ¨æµè§ˆå™¨åå°è¿è¡Œçš„è„šæœ¬ï¼Œå®ƒç‹¬ç«‹äºç½‘é¡µä¸»çº¿ç¨‹ï¼Œå¯ä»¥æ‹¦æˆªç½‘ç»œè¯·æ±‚ã€ç¼“å­˜èµ„æºï¼Œç”šè‡³åœ¨ç¦»çº¿çŠ¶æ€ä¸‹ä¹Ÿèƒ½æä¾›å®Œæ•´çš„ç”¨æˆ·ä½“éªŒã€‚å®ƒæ˜¯å®ç° PWAï¼ˆæ¸è¿›å¼ Web åº”ç”¨ï¼‰çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œä¸º Web åº”ç”¨å¸¦æ¥äº†åŸç”Ÿåº”ç”¨èˆ¬çš„ç¦»çº¿èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e55818b63a042d4af75d0c5cf2a0039~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Zi_6LW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351936&amp;x-signature=TEDI1CLw6QyGTc2YQSlG2RG%2BIJg%3D" alt="" loading="lazy"/></p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»åŸºç¡€æ¦‚å¿µå¼€å§‹ï¼Œé€æ­¥æ·±å…¥æ¢è®¨ Service Worker çš„å·¥ä½œæœºåˆ¶ã€ç”Ÿå‘½å‘¨æœŸã€å®é™…åº”ç”¨ä»¥åŠæœ€ä½³å®è·µã€‚æ— è®ºä½ æ˜¯åˆšåˆšæ¥è§¦å‰ç«¯å¼€å‘çš„æ–°æ‰‹ï¼Œè¿˜æ˜¯å¸Œæœ›æ·±å…¥äº†è§£ Service Worker çš„èµ„æ·±å¼€å‘è€…ï¼Œç›¸ä¿¡è¿™ç¯‡æ–‡ç« éƒ½èƒ½ä¸ºä½ å¸¦æ¥æœ‰ä»·å€¼çš„å‚è€ƒã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ Service Workerï¼Ÿ</h2>
<p>Service Worker æ˜¯ä¸€ç§ç‰¹æ®Šçš„ JavaScript è„šæœ¬ï¼Œå®ƒè¿è¡Œåœ¨æµè§ˆå™¨åå°ï¼Œç‹¬ç«‹äºç½‘é¡µä¸»çº¿ç¨‹ã€‚å®ƒå°±åƒæ˜¯æµè§ˆå™¨å’Œç½‘ç»œä¹‹é—´çš„ä¸€ä¸ªä»£ç†ï¼Œå¯ä»¥æ‹¦æˆªç½‘ç»œè¯·æ±‚ã€ç¼“å­˜èµ„æºï¼Œç”šè‡³åœ¨æ²¡æœ‰ç½‘ç»œè¿æ¥çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æä¾›å®Œæ•´çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-2">Service Worker çš„æ ¸å¿ƒç‰¹æ€§</h3>
<ol>
<li><strong>ç‹¬ç«‹è¿è¡Œ</strong>ï¼šService Worker è¿è¡Œåœ¨ç‹¬ç«‹çš„çº¿ç¨‹ä¸­ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹</li>
<li><strong>ç½‘ç»œä»£ç†</strong>ï¼šå¯ä»¥æ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶è‡ªå®šä¹‰å“åº”</li>
<li><strong>ç¦»çº¿æ”¯æŒ</strong>ï¼šé€šè¿‡ç¼“å­˜æœºåˆ¶å®ç°ç¦»çº¿è®¿é—®</li>
<li><strong>åå°åŒæ­¥</strong>ï¼šæ”¯æŒåå°æ•°æ®åŒæ­¥åŠŸèƒ½</li>
<li><strong>æ¨é€é€šçŸ¥</strong>ï¼šå¯ä»¥æ¥æ”¶å’Œå¤„ç†æ¨é€é€šçŸ¥</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b973ebc1629045b69268d36ff037ea4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Zi_6LW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351936&amp;x-signature=1dIk0%2FKLsOYa69MDO5TQtKYMAQM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">Service Worker ä¸å…¶ä»–æŠ€æœ¯çš„å¯¹æ¯”</h3>
<p>ä¸ä¼ ç»Ÿçš„æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ç›¸æ¯”ï¼ŒService Worker æä¾›äº†æ›´å¼ºå¤§å’Œçµæ´»çš„ç¼“å­˜æ§åˆ¶èƒ½åŠ›ã€‚ä¼ ç»Ÿçš„æµè§ˆå™¨ç¼“å­˜ä¾èµ–äº HTTP å¤´éƒ¨è®¾ç½®ï¼Œè€Œ Service Worker å…è®¸å¼€å‘è€…å®Œå…¨æ§åˆ¶ç¼“å­˜ç­–ç•¥ã€‚</p>
<p>ä¸ AppCache ç›¸æ¯”ï¼ŒService Worker è§£å†³äº† AppCache çš„è®¸å¤šé—®é¢˜ï¼Œå¦‚ç¼“å­˜æ›´æ–°å›°éš¾ã€æ— æ³•è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥ç­‰ã€‚AppCache å·²ç»è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼ŒService Worker æ˜¯å…¶æ¨èçš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-4">Service Worker çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>ç†è§£ Service Worker çš„ç”Ÿå‘½å‘¨æœŸå¯¹äºæ­£ç¡®ä½¿ç”¨å®ƒè‡³å…³é‡è¦ã€‚Service Worker çš„ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬æ³¨å†Œã€å®‰è£…ã€æ¿€æ´»å’Œæ›´æ–°ç­‰é˜¶æ®µã€‚</p>
<h3 data-id="heading-5">æ³¨å†Œ Service Worker</h3>
<p>è¦ä½¿ç”¨ Service Workerï¼Œé¦–å…ˆéœ€è¦åœ¨ä¸»é¡µé¢ä¸­æ³¨å†Œå®ƒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'/sw.js'</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†ŒæˆåŠŸ:'</span>, registration);
    })
    .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†Œå¤±è´¥:'</span>, error);
    });
}
</code></pre>
<p>æ³¨å†Œæ—¶å¯ä»¥æŒ‡å®šä½œç”¨åŸŸï¼Œé™åˆ¶ Service Worker æ§åˆ¶çš„é¡µé¢èŒƒå›´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'/sw.js'</span>, {
  <span class="hljs-attr">scope</span>: <span class="hljs-string">'/app/'</span>
}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker ä½œç”¨åŸŸ:'</span>, registration.<span class="hljs-property">scope</span>);
});
</code></pre>
<h3 data-id="heading-6">å®‰è£…é˜¶æ®µ</h3>
<p>å½“ Service Worker æ–‡ä»¶é¦–æ¬¡ä¸‹è½½åï¼Œä¼šè§¦å‘å®‰è£…äº‹ä»¶ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç¼“å­˜åº”ç”¨çš„æ ¸å¿ƒèµ„æºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker å®‰è£…ä¸­...'</span>);
  
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'my-app-v1'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">addAll</span>([
        <span class="hljs-string">'/'</span>,
        <span class="hljs-string">'/index.html'</span>,
        <span class="hljs-string">'/styles/main.css'</span>,
        <span class="hljs-string">'/scripts/main.js'</span>,
        <span class="hljs-string">'/images/logo.png'</span>
      ]);
    })
  );
});
</code></pre>
<p>åœ¨å®‰è£…é˜¶æ®µï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>åªèƒ½ç¼“å­˜åŒæºèµ„æºæˆ–å·²é…ç½® CORS çš„è·¨åŸŸèµ„æº</li>
<li>ç¼“å­˜æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªèµ„æºç¼“å­˜å¤±è´¥ï¼Œæ•´ä¸ªæ“ä½œéƒ½ä¼šå¤±è´¥</li>
<li>å¯ä»¥ä½¿ç”¨ <code>skipWaiting()</code> æ–¹æ³•å¼ºåˆ¶è·³è¿‡ç­‰å¾…çŠ¶æ€</li>
</ol>
<h3 data-id="heading-7">æ¿€æ´»é˜¶æ®µ</h3>
<p>å®‰è£…å®Œæˆåï¼ŒService Worker ä¼šè¿›å…¥æ¿€æ´»é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬å¯ä»¥æ¸…ç†æ—§ç‰ˆæœ¬çš„ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ¿€æ´»ä¸­...'</span>);
  
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cacheNames</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        cacheNames.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
          <span class="hljs-comment">// è¿”å›éœ€è¦åˆ é™¤çš„ç¼“å­˜åç§°</span>
          <span class="hljs-keyword">return</span> name !== <span class="hljs-string">'my-app-v1'</span>;
        }).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
          <span class="hljs-comment">// åˆ é™¤æ—§ç¼“å­˜</span>
          <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">delete</span>(name);
        })
      );
    })
  );
});
</code></pre>
<p>æ¿€æ´»é˜¶æ®µçš„æœ€ä½³å®è·µï¼š</p>
<ol>
<li>æ¸…ç†ä¸å†éœ€è¦çš„æ—§ç¼“å­˜</li>
<li>é¿å…åœ¨æ¿€æ´»é˜¶æ®µæ‰§è¡Œè€—æ—¶æ“ä½œ</li>
<li>å¯ä»¥ä½¿ç”¨ <code>clients.claim()</code> æ–¹æ³•æ§åˆ¶æœªå—æ§åˆ¶çš„å®¢æˆ·ç«¯</li>
</ol>
<h3 data-id="heading-8">æ›´æ–°æœºåˆ¶</h3>
<p>å½“ Service Worker æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨ä¼šä¸‹è½½æ–°ç‰ˆæœ¬å¹¶è§¦å‘æ›´æ–°æµç¨‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°ç‰ˆæœ¬å®‰è£…ä¸­...'</span>);
  <span class="hljs-comment">// å¼ºåˆ¶è·³è¿‡ç­‰å¾…çŠ¶æ€ï¼Œç«‹å³æ¿€æ´»æ–°ç‰ˆæœ¬</span>
  self.<span class="hljs-title function_">skipWaiting</span>();
});

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°ç‰ˆæœ¬æ¿€æ´»ä¸­...'</span>);
  <span class="hljs-comment">// ç«‹å³æ§åˆ¶æ‰€æœ‰å®¢æˆ·ç«¯</span>
  event.<span class="hljs-title function_">waitUntil</span>(self.<span class="hljs-property">clients</span>.<span class="hljs-title function_">claim</span>());
});
</code></pre>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ Service Worker çš„ç”Ÿå‘½å‘¨æœŸå’Œè¯·æ±‚å¤„ç†æµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒä»¥ä¸‹å›¾è¡¨ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f98863e02ea4d2f9adaf43c55ce5a1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Zi_6LW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351936&amp;x-signature=ocLy01IwdSfUbAtHeaszV8PEcBg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">Service Worker API è¯¦è§£</h2>
<h3 data-id="heading-10">Cache API</h3>
<p>Cache API æ˜¯ Service Worker çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œç”¨äºå­˜å‚¨å’Œæ£€ç´¢ç½‘ç»œè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰“å¼€ç¼“å­˜</span>
caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'my-cache'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
  <span class="hljs-comment">// æ·»åŠ å•ä¸ªèµ„æºåˆ°ç¼“å­˜</span>
  cache.<span class="hljs-title function_">put</span>(request, response);
  
  <span class="hljs-comment">// æ·»åŠ å¤šä¸ªèµ„æºåˆ°ç¼“å­˜</span>
  cache.<span class="hljs-title function_">addAll</span>([request1, request2]);
  
  <span class="hljs-comment">// åŒ¹é…ç¼“å­˜ä¸­çš„èµ„æº</span>
  cache.<span class="hljs-title function_">match</span>(request).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†å“åº”</span>
  });
  
  <span class="hljs-comment">// åˆ é™¤ç¼“å­˜ä¸­çš„èµ„æº</span>
  cache.<span class="hljs-title function_">delete</span>(request);
});
</code></pre>
<h3 data-id="heading-11">Fetch API</h3>
<p>Fetch API å…è®¸ Service Worker æ‹¦æˆªå’Œå¤„ç†ç½‘ç»œè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-comment">// å…‹éš†è¯·æ±‚ä»¥é¿å…æ¶ˆè´¹åŸå§‹è¯·æ±‚</span>
  <span class="hljs-keyword">const</span> clonedRequest = request.<span class="hljs-title function_">clone</span>();
  
  <span class="hljs-comment">// è‡ªå®šä¹‰è¯·æ±‚å¤„ç†é€»è¾‘</span>
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(request).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cachedResponse</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (cachedResponse) {
        <span class="hljs-keyword">return</span> cachedResponse;
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(clonedRequest).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-comment">// å¤„ç†ç½‘ç»œå“åº”</span>
        <span class="hljs-keyword">return</span> response;
      });
    })
  );
});
</code></pre>
<h3 data-id="heading-12">Background Sync API</h3>
<p>Background Sync API å…è®¸åœ¨è¿æ¥æ¢å¤æ—¶åŒæ­¥æ•°æ®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ³¨å†Œåå°åŒæ­¥</span>
navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">ready</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
  registration.<span class="hljs-property">sync</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'sync-data'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åå°åŒæ­¥å·²æ³¨å†Œ'</span>);
  });
});

<span class="hljs-comment">// å¤„ç†åŒæ­¥äº‹ä»¶</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'sync'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">tag</span> === <span class="hljs-string">'sync-data'</span>) {
    event.<span class="hljs-title function_">waitUntil</span>(<span class="hljs-title function_">syncData</span>());
  }
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">syncData</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ‰§è¡Œæ•°æ®åŒæ­¥é€»è¾‘</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/sync'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">getPendingData</span>())
  });
}
</code></pre>
<h3 data-id="heading-13">Push API</h3>
<p>Push API å…è®¸æ¥æ”¶æœåŠ¡å™¨æ¨é€çš„é€šçŸ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¯·æ±‚æ¨é€æƒé™</span>
<span class="hljs-title class_">Notification</span>.<span class="hljs-title function_">requestPermission</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">permission</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (permission === <span class="hljs-string">'granted'</span>) {
    <span class="hljs-comment">// è®¢é˜…æ¨é€æœåŠ¡</span>
    navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">ready</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
      registration.<span class="hljs-property">pushManager</span>.<span class="hljs-title function_">subscribe</span>({
        <span class="hljs-attr">userVisibleOnly</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">applicationServerKey</span>: <span class="hljs-title function_">urlBase64ToUint8Array</span>(<span class="hljs-string">'your-public-key'</span>)
      }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">subscription</span> =&gt;</span> {
        <span class="hljs-comment">// å‘é€è®¢é˜…ä¿¡æ¯åˆ°æœåŠ¡å™¨</span>
        <span class="hljs-title function_">sendSubscriptionToServer</span>(subscription);
      });
    });
  }
});

<span class="hljs-comment">// å¤„ç†æ¨é€æ¶ˆæ¯</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'push'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> data = event.<span class="hljs-property">data</span>.<span class="hljs-title function_">json</span>();
  
  event.<span class="hljs-title function_">waitUntil</span>(
    self.<span class="hljs-property">registration</span>.<span class="hljs-title function_">showNotification</span>(data.<span class="hljs-property">title</span>, {
      <span class="hljs-attr">body</span>: data.<span class="hljs-property">body</span>,
      <span class="hljs-attr">icon</span>: data.<span class="hljs-property">icon</span>,
      <span class="hljs-attr">tag</span>: data.<span class="hljs-property">tag</span>
    })
  );
});
</code></pre>
<h2 data-id="heading-14">å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-15">ç¦»çº¿é¡µé¢</h3>
<p>é€šè¿‡ Service Workerï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºç”¨æˆ·æä¾›ç¦»çº¿æ—¶çš„å‹å¥½æç¤ºé¡µé¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// å¦‚æœç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œè¿”å›ç¦»çº¿é¡µé¢</span>
      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">request</span>.<span class="hljs-property">mode</span> === <span class="hljs-string">'navigate'</span>) {
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(<span class="hljs-string">'/offline.html'</span>);
      }
      
      <span class="hljs-comment">// å¯¹äºå…¶ä»–èµ„æºï¼Œè¿”å›ç›¸åº”çš„å ä½ç¬¦</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(...);
    })
  );
});
</code></pre>
<h3 data-id="heading-16">ç¼“å­˜ç­–ç•¥</h3>
<p>ä¸åŒçš„èµ„æºå¯èƒ½éœ€è¦ä¸åŒçš„ç¼“å­˜ç­–ç•¥ï¼š</p>
<ol>
<li><strong>Cache First</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œé€‚åˆé™æ€èµ„æº</li>
<li><strong>Network First</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç½‘ç»œï¼Œé€‚åˆéœ€è¦å®æ—¶æ›´æ–°çš„å†…å®¹</li>
<li><strong>Stale While Revalidate</strong>ï¼šä½¿ç”¨ç¼“å­˜çš„åŒæ—¶åœ¨åå°æ›´æ–°</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Cache First ç­–ç•¥</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> response || <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>);
    })
  );
});

<span class="hljs-comment">// Network First ç­–ç•¥</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>);
    })
  );
});

<span class="hljs-comment">// Stale While Revalidate ç­–ç•¥</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'my-cache'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> cache.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> fetchPromise = <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">networkResponse</span> =&gt;</span> {
          cache.<span class="hljs-title function_">put</span>(event.<span class="hljs-property">request</span>, networkResponse.<span class="hljs-title function_">clone</span>());
          <span class="hljs-keyword">return</span> networkResponse;
        });
        
        <span class="hljs-keyword">return</span> response || fetchPromise;
      });
    })
  );
});
</code></pre>
<h3 data-id="heading-17">åŠ¨æ€ç¼“å­˜</h3>
<p>å¯¹äºåŠ¨æ€å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ™ºèƒ½ç¼“å­˜ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-comment">// å¯¹äº API è¯·æ±‚ï¼Œä½¿ç”¨ Network First ç­–ç•¥</span>
  <span class="hljs-keyword">if</span> (request.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/'</span>)) {
    event.<span class="hljs-title function_">respondWith</span>(
      <span class="hljs-title function_">fetch</span>(request).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(request);
      })
    );
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-comment">// å¯¹äºé™æ€èµ„æºï¼Œä½¿ç”¨ Cache First ç­–ç•¥</span>
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(request).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> response || <span class="hljs-title function_">fetch</span>(request);
    })
  );
});
</code></pre>
<h2 data-id="heading-18">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-19">ç‰ˆæœ¬ç®¡ç†</h3>
<p>åˆç†çš„ç‰ˆæœ¬ç®¡ç†å¯ä»¥é¿å…ç¼“å­˜é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_NAME</span> = <span class="hljs-string">'my-app-v1.0.0'</span>;
<span class="hljs-keyword">const</span> urlsToCache = [
  <span class="hljs-string">'/'</span>,
  <span class="hljs-string">'/styles/main.css'</span>,
  <span class="hljs-string">'/scripts/main.js'</span>
];

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'install'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.<span class="hljs-title function_">addAll</span>(urlsToCache))
  );
});
</code></pre>
<h3 data-id="heading-20">é”™è¯¯å¤„ç†</h3>
<p>å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-comment">// æ£€æŸ¥å“åº”æ˜¯å¦æœ‰æ•ˆ</span>
        <span class="hljs-keyword">if</span> (!response || response.<span class="hljs-property">status</span> !== <span class="hljs-number">200</span> || !response.<span class="hljs-property">ok</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Invalid response'</span>);
        }
        <span class="hljs-keyword">return</span> response;
      })
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„å“åº”æˆ–é”™è¯¯é¡µé¢</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Fetch failed:'</span>, error);
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>) || caches.<span class="hljs-title function_">match</span>(<span class="hljs-string">'/error.html'</span>);
      })
  );
});
</code></pre>
<h3 data-id="heading-21">æ€§èƒ½ä¼˜åŒ–</h3>
<ol>
<li>é¢„ç¼“å­˜å…³é”®èµ„æº</li>
<li>åˆç†è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´</li>
<li>åŠæ—¶æ¸…ç†æ— ç”¨ç¼“å­˜</li>
<li>é¿å…ç¼“å­˜è¿‡å¤šæ•°æ®</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é™åˆ¶ç¼“å­˜å¤§å°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">limitCacheSize</span>(<span class="hljs-params">cacheName, maxItems</span>) {
  caches.<span class="hljs-title function_">open</span>(cacheName).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
    cache.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">keys</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (keys.<span class="hljs-property">length</span> &gt; maxItems) {
        cache.<span class="hljs-title function_">delete</span>(keys[<span class="hljs-number">0</span>]).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">limitCacheSize</span>(cacheName, maxItems);
        });
      }
    });
  });
}
</code></pre>
<h3 data-id="heading-22">å®‰å…¨è€ƒè™‘</h3>
<ol>
<li>Service Worker åªèƒ½åœ¨ HTTPS ç¯å¢ƒä¸‹è¿è¡Œ</li>
<li>é¿å…ç¼“å­˜æ•æ„Ÿæ•°æ®</li>
<li>éªŒè¯æ‰€æœ‰ç½‘ç»œå“åº”</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éªŒè¯å“åº”å®‰å…¨æ€§</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isResponseSafe</span>(<span class="hljs-params">response</span>) {
  <span class="hljs-comment">// æ£€æŸ¥å†…å®¹ç±»å‹</span>
  <span class="hljs-keyword">const</span> contentType = response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-type'</span>);
  <span class="hljs-keyword">if</span> (!contentType || !contentType.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'application/json'</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// æ£€æŸ¥å“åº”æ¥æº</span>
  <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">url</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'https://'</span>)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<h2 data-id="heading-23">è°ƒè¯•æŠ€å·§</h2>
<p>è°ƒè¯• Service Worker å¯èƒ½ä¼šæœ‰äº›å›°éš¾ï¼Œä½†æŒæ¡ä¸€äº›æŠ€å·§å¯ä»¥è®©å·¥ä½œå˜å¾—è½»æ¾ï¼š</p>
<ol>
<li>ä½¿ç”¨ Chrome DevTools çš„ Application é¢æ¿</li>
<li>æŸ¥çœ‹ Service Worker çš„çŠ¶æ€å’Œæ—¥å¿—</li>
<li>ä½¿ç”¨ <code>skipWaiting()</code> å¼ºåˆ¶æ¿€æ´»æ–°çš„ Service Worker</li>
<li>æ¸…é™¤ç¼“å­˜å’Œ Service Worker æ•°æ®è¿›è¡Œæµ‹è¯•</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å¼€å‘ç¯å¢ƒä¸­å¼ºåˆ¶æ›´æ–° Service Worker</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">getRegistrations</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">registrations</span> =&gt;</span> {
    registrations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">registration</span> =&gt;</span> {
      registration.<span class="hljs-title function_">unregister</span>();
    });
  });
}
</code></pre>
<h2 data-id="heading-24">å…¼å®¹æ€§è€ƒè™‘</h2>
<p>è™½ç„¶ç°ä»£æµè§ˆå™¨å¯¹ Service Worker çš„æ”¯æŒå·²ç»ç›¸å½“å®Œå–„ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ä»éœ€è€ƒè™‘ï¼š</p>
<ol>
<li>æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒ Service Worker</li>
<li>ä¸ºä¸æ”¯æŒçš„æµè§ˆå™¨æä¾›é™çº§æ–¹æ¡ˆ</li>
<li>ç¡®ä¿åº”ç”¨åœ¨æ²¡æœ‰ Service Worker çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æµ‹ Service Worker æ”¯æŒ</span>
<span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  <span class="hljs-comment">// æ”¯æŒ Service Worker</span>
  navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">'/sw.js'</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// ä¸æ”¯æŒ Service Workerï¼Œæä¾›é™çº§æ–¹æ¡ˆ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker ä¸å—æ”¯æŒ'</span>);
}
</code></pre>
<h2 data-id="heading-25">å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-26">ç¼“å­˜æ›´æ–°é—®é¢˜</h3>
<p>é—®é¢˜ï¼šç”¨æˆ·æ— æ³•è·å–æœ€æ–°çš„èµ„æº
è§£å†³æ–¹æ¡ˆï¼šå®ç°åˆç†çš„ç¼“å­˜æ›´æ–°ç­–ç•¥</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ç°ç¼“å­˜ç‰ˆæœ¬æ§åˆ¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_VERSION</span> = <span class="hljs-string">'v1.0.0'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_NAME</span> = <span class="hljs-string">`my-app-<span class="hljs-subst">${CACHE_VERSION}</span>`</span>;

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">waitUntil</span>(
    caches.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cacheNames</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        cacheNames.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
          <span class="hljs-keyword">return</span> name !== <span class="hljs-variable constant_">CACHE_NAME</span>;
        }).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">name</span> =&gt;</span> {
          <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">delete</span>(name);
        })
      );
    })
  );
});
</code></pre>
<h3 data-id="heading-27">è·¨åŸŸèµ„æºç¼“å­˜</h3>
<p>é—®é¢˜ï¼šæ— æ³•ç¼“å­˜è·¨åŸŸèµ„æº
è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿æœåŠ¡å™¨é…ç½®äº†æ­£ç¡®çš„ CORS å¤´éƒ¨</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤„ç†è·¨åŸŸèµ„æº</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-keyword">if</span> (request.<span class="hljs-property">url</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'https://api.example.com'</span>)) {
    event.<span class="hljs-title function_">respondWith</span>(
      <span class="hljs-title function_">fetch</span>(request, {
        <span class="hljs-attr">mode</span>: <span class="hljs-string">'cors'</span>,
        <span class="hljs-attr">credentials</span>: <span class="hljs-string">'omit'</span>
      }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
        <span class="hljs-comment">// ç¼“å­˜å“åº”</span>
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'api-cache'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> {
          cache.<span class="hljs-title function_">put</span>(request, response.<span class="hljs-title function_">clone</span>());
          <span class="hljs-keyword">return</span> response;
        });
      }).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// è¿”å›ç¼“å­˜çš„å“åº”</span>
        <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(request);
      })
    );
  }
});
</code></pre>
<h2 data-id="heading-28">æµ‹è¯•ç­–ç•¥</h2>
<h3 data-id="heading-29">å•å…ƒæµ‹è¯•</h3>
<p>ä¸º Service Worker ç¼–å†™å•å…ƒæµ‹è¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Jest æµ‹è¯• Service Worker åŠŸèƒ½</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">'Service Worker'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è®¾ç½®æµ‹è¯•ç¯å¢ƒ</span>
  });
  
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'åº”è¯¥ç¼“å­˜æ ¸å¿ƒèµ„æº'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// æµ‹è¯•ç¼“å­˜åŠŸèƒ½</span>
  });
  
  <span class="hljs-title function_">test</span>(<span class="hljs-string">'åº”è¯¥æ­£ç¡®å¤„ç†ç½‘ç»œè¯·æ±‚'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">// æµ‹è¯•è¯·æ±‚å¤„ç†åŠŸèƒ½</span>
  });
});
</code></pre>
<h3 data-id="heading-30">ç«¯åˆ°ç«¯æµ‹è¯•</h3>
<p>ä½¿ç”¨å·¥å…·è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Puppeteer æµ‹è¯•ç¦»çº¿åŠŸèƒ½</span>
<span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>);

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> puppeteer.<span class="hljs-title function_">launch</span>();
  <span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">newPage</span>();
  
  <span class="hljs-comment">// è®¿é—®åº”ç”¨å¹¶ç­‰å¾… Service Worker æ¿€æ´»</span>
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">goto</span>(<span class="hljs-string">'http://localhost:3000'</span>);
  <span class="hljs-keyword">await</span> page.evaluate(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> navigator.<span class="hljs-property">serviceWorker</span>.<span class="hljs-property">ready</span>;
  });
  
  <span class="hljs-comment">// æ¨¡æ‹Ÿç¦»çº¿ç¯å¢ƒ</span>
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">setOfflineMode</span>(<span class="hljs-literal">true</span>);
  
  <span class="hljs-comment">// æµ‹è¯•ç¦»çº¿è®¿é—®</span>
  <span class="hljs-keyword">await</span> page.<span class="hljs-title function_">reload</span>();
  
  <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">close</span>();
})();
</code></pre>
<h2 data-id="heading-31">é¡¹ç›®æ¡ˆä¾‹åˆ†æ</h2>
<h3 data-id="heading-32">ç”µå•†ç½‘ç«™çš„ç¦»çº¿è´­ç‰©è½¦</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ç°ç¦»çº¿è´­ç‰©è½¦åŠŸèƒ½</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-comment">// å¤„ç†è´­ç‰©è½¦ API è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (request.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/cart'</span>)) {
    event.<span class="hljs-title function_">respondWith</span>(
      <span class="hljs-title function_">fetch</span>(request).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// ç¦»çº¿æ—¶è¿”å›æœ¬åœ°å­˜å‚¨çš„æ•°æ®</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">getLocalCart</span>()), {
          <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
        });
      })
    );
  }
});

<span class="hljs-comment">// åŒæ­¥ç¦»çº¿æ“ä½œ</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'sync'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (event.<span class="hljs-property">tag</span> === <span class="hljs-string">'sync-cart'</span>) {
    event.<span class="hljs-title function_">waitUntil</span>(<span class="hljs-title function_">syncCart</span>());
  }
});
</code></pre>
<h3 data-id="heading-33">å†…å®¹ç®¡ç†ç³»ç»Ÿçš„ç¦»çº¿ç¼–è¾‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®ç°ç¦»çº¿å†…å®¹ç¼–è¾‘</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> request = event.<span class="hljs-property">request</span>;
  
  <span class="hljs-comment">// å¤„ç†å†…å®¹ä¿å­˜è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (request.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/content'</span>) &amp;&amp; request.<span class="hljs-property">method</span> === <span class="hljs-string">'POST'</span>) {
    event.<span class="hljs-title function_">respondWith</span>(
      <span class="hljs-title function_">fetch</span>(request).<span class="hljs-keyword">catch</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// ç¦»çº¿æ—¶ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨</span>
        <span class="hljs-title function_">saveLocalContent</span>(request);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">offline</span>: <span class="hljs-literal">true</span> }), {
          <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
        });
      })
    );
  }
});
</code></pre>
<h2 data-id="heading-34">æ€§èƒ½ç›‘æ§å’Œåˆ†æ</h2>
<h3 data-id="heading-35">ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®°å½•ç¼“å­˜å‘½ä¸­æƒ…å†µ</span>
<span class="hljs-keyword">let</span> cacheHits = <span class="hljs-number">0</span>;
<span class="hljs-keyword">let</span> networkRequests = <span class="hljs-number">0</span>;

self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (response) {
        cacheHits++;
        <span class="hljs-title function_">logPerformance</span>(<span class="hljs-string">'cache-hit'</span>, event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);
        <span class="hljs-keyword">return</span> response;
      }
      
      networkRequests++;
      <span class="hljs-title function_">logPerformance</span>(<span class="hljs-string">'network-request'</span>, event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>);
    })
  );
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">logPerformance</span>(<span class="hljs-params">type, url</span>) {
  <span class="hljs-comment">// å‘é€æ€§èƒ½æ•°æ®åˆ°åˆ†ææœåŠ¡</span>
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/analytics'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ type, url, <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() })
  });
}
</code></pre>
<h3 data-id="heading-36">ç”¨æˆ·ä½“éªŒæŒ‡æ ‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘æ§ç”¨æˆ·ä½“éªŒæŒ‡æ ‡</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  
  event.<span class="hljs-title function_">respondWith</span>(
    <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> endTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> duration = endTime - startTime;
      
      <span class="hljs-comment">// è®°å½•è¯·æ±‚è€—æ—¶</span>
      <span class="hljs-title function_">logMetric</span>(<span class="hljs-string">'request-duration'</span>, duration, event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);
      
      <span class="hljs-keyword">return</span> response;
    }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
      <span class="hljs-comment">// è®°å½•é”™è¯¯</span>
      <span class="hljs-title function_">logMetric</span>(<span class="hljs-string">'request-error'</span>, <span class="hljs-number">1</span>, event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);
      <span class="hljs-keyword">throw</span> error;
    })
  );
});
</code></pre>
<h2 data-id="heading-37">æœªæ¥å‘å±•è¶‹åŠ¿</h2>
<h3 data-id="heading-38">Web Workers ä¸ Service Workers çš„èåˆ</h3>
<p>æœªæ¥çš„ Web å¹³å°å¯èƒ½ä¼šè¿›ä¸€æ­¥æ•´åˆ Web Workers å’Œ Service Workersï¼Œæä¾›æ›´ç»Ÿä¸€çš„åå°å¤„ç†èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-39">å¢å¼ºçš„ç¦»çº¿åŠŸèƒ½</h3>
<p>éšç€ Web å¹³å°çš„å‘å±•ï¼ŒService Worker å°†è·å¾—æ›´å¤šçš„ API æ”¯æŒï¼Œå¦‚åå°åœ°ç†ä½ç½®æ›´æ–°ã€åå°åª’ä½“å¤„ç†ç­‰ã€‚</p>
<h3 data-id="heading-40">æ›´å¥½çš„å¼€å‘å·¥å…·æ”¯æŒ</h3>
<p>æµè§ˆå™¨å‚å•†æ­£åœ¨ä¸æ–­æ”¹è¿›å¼€å‘è€…å·¥å…·ï¼Œæä¾›æ›´å¥½çš„ Service Worker è°ƒè¯•å’Œç›‘æ§åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-41">æ€»ç»“</h2>
<p>Service Worker ä½œä¸ºç°ä»£ Web å¼€å‘çš„é‡è¦æŠ€æœ¯ï¼Œä¸º Web åº”ç”¨å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„èƒ½åŠ›ã€‚é€šè¿‡åˆç†ä½¿ç”¨ Service Workerï¼Œæˆ‘ä»¬å¯ä»¥æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒï¼Œç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œä¸ç¨³å®šçš„ç¯å¢ƒä¸­ã€‚</p>
<p>æŒæ¡ Service Worker ä¸ä»…èƒ½è®©ä½ çš„åº”ç”¨æ›´åŠ å¥å£®ï¼Œè¿˜èƒ½ä¸ºç”¨æˆ·æä¾›åŸç”Ÿåº”ç”¨èˆ¬çš„ä½“éªŒã€‚éšç€ PWA æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒService Worker å°†åœ¨æœªæ¥çš„ Web å¼€å‘ä¸­æ‰®æ¼”æ›´åŠ é‡è¦çš„è§’è‰²ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ Service Workerã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®ä»å°åŠŸèƒ½å¼€å§‹å°è¯•ï¼Œé€æ­¥æŒæ¡å…¶å¼ºå¤§çš„åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-42">å‚è€ƒèµ„æ–™</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FService_Worker_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API" ref="nofollow noopener noreferrer">MDN Service Worker Documentation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ffundamentals%2Fprimers%2Fservice-workers" target="_blank" title="https://developers.google.com/web/fundamentals/primers/service-workers" ref="nofollow noopener noreferrer">Google Web Fundamentals - Service Workers</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fservice-workers%2F" target="_blank" title="https://www.w3.org/TR/service-workers/" ref="nofollow noopener noreferrer">W3C Service Workers Specification</a></li>
</ol>
<p>æœ€åï¼Œåˆ›ä½œä¸æ˜“è¯·å…è®¸æˆ‘æ’æ’­ä¸€åˆ™è‡ªå·±å¼€å‘çš„â€œæ•°è§„è§„-æ’äº”åŠ©æ‰‹â€ï¼ˆæœ‰å„ç§é¢„æµ‹åˆ†æï¼‰å°ç¨‹åºå¹¿å‘Šï¼Œæ„Ÿå…´è¶£å¯ä»¥å¾®ä¿¡å°ç¨‹åºä½“éªŒæ”¾æ¾æ”¾æ¾ï¼Œç¨‹åºå‘˜ä¹Ÿè¦æœ‰ç‚¹å¨±ä¹ç”Ÿæ´»ï¼Œæä¸å¥½å°±ä¸­ä¸ªæ’åˆ—äº”äº†å‘¢ï¼Ÿ</p>
<p>æ„Ÿå…´è¶£çš„å¯ä»¥ç›´æ¥ç‚¹å‡»ä¸‹æ–¹é“¾æ¥ç›´æ¥è·³è½¬åˆ°å¾®ä¿¡å°ç¨‹åºï¼š</p>
<p>Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.luoshu.online%2Fjumptomp.html" target="_blank" title="https://www.luoshu.online/jumptomp.html" ref="nofollow noopener noreferrer">www.luoshu.online/jumptomp.htâ€¦</a></p>
<p>æˆ–è€…å¯ä»¥å¾®ä¿¡æœç´¢å°ç¨‹åºâ€œ<strong>æ•°è§„è§„-æ’äº”åŠ©æ‰‹</strong>â€ä½“éªŒä½“éªŒï¼</p>
<p><strong>å¦‚æœè§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œæ¬¢è¿<code>ç‚¹ä¸ªèµ</code>ğŸ‘+<code>æ”¶è—</code>â­+<code>å…³æ³¨</code>æ”¯æŒæˆ‘å§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day 7ï¼š05. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-é¦–é¡µå¼€å‘]]></title>    <link>https://juejin.cn/post/7570295366480298020</link>    <guid>https://juejin.cn/post/7570295366480298020</guid>    <pubDate>2025-11-10T05:49:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570295366480298020" data-draft-id="7570295366480265252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day 7ï¼š05. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-é¦–é¡µå¼€å‘"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-10T05:49:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”³é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/4353721775165486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day 7ï¼š05. åŸºäºNuxtå¼€å‘åšå®¢é¡¹ç›®-é¦–é¡µå¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721775165486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”³é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T05:49:07.000Z" title="Mon Nov 10 2025 05:49:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ae3e5a6a6084c5a8364e92d37c7864a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=lgUHgvRFqZkP9zEVfhStmLZ3GdI%3D" alt="PixPin_2025-11-10_13-40-04.gif" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>é¦–é¡µæ˜¯ç«™ç‚¹çš„â€œè„¸é¢â€ï¼Œä¹Ÿæ˜¯ä¿¡æ¯ä¼ è¾¾æœ€ç›´æ¥çš„çª—å£ã€‚é¦–é¡µçš„è®¾è®¡è´¨é‡ï¼Œä¸ä»…å…³ç³»åˆ°ç”¨æˆ·å¯¹ç«™ç‚¹çš„ç¬¬ä¸€å°è±¡ï¼Œæ›´ç›´æ¥å½±å“å…¶ä½¿ç”¨ä½“éªŒä¸æ•´ä½“è¯„ä»·ã€‚å› æ­¤ï¼Œç²¾å¿ƒæ‰“é€ é¦–é¡µï¼Œè‡³å…³é‡è¦ã€‚</p>
<p>æˆ‘å…¶å®æ¯”è¾ƒåæ„Ÿä¸€äº›èŠ±é‡Œèƒ¡å“¨çš„é¡µé¢ï¼Œä½†æ˜¯æ°åˆ°å¥½å¤„çš„åŠ¨ç”»ç¡®å®å¯ä»¥æé«˜ç”¨æˆ·çš„ä½“éªŒï¼Œä¹Ÿåˆ©äºç½‘ç«™æ¨å¹¿ã€‚</p>
<p>æˆ‘çš„ç›®æ ‡æ˜¯å¯»æ±‚å¹³è¡¡ï¼Œä¿¡æ¯ä½œä¸ºä¸»å¯¼ï¼ŒåŠ¨ç”»ä½œä¸ºè¾…åŠ©ã€‚</p>
<p>ä¸‹é¢å¼€å§‹æˆ‘ä»¬çš„é¦–é¡µæ‰“é€ å§ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ¸å˜æ–‡å­—æ ‡é¢˜</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d68379c813742c7b3fef76572e36843~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=3xqmEMO3l%2Bov9zPKZWzBL5UdNd4%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨<code>tailwindcss</code>çš„åŠ æŒä¸‹ï¼Œå®ç°è¿™ç§æ•ˆæœå¤ªæ–¹ä¾¿äº†ï¼Œåªéœ€è¦ä»¥ä¸‹å‡ ä¸ªæŒ‡ä»¤å³å¯</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ml-1 font-bold text-xl bg-linear-to-r from-blue-700 via-blue-400 to-sky-400 bg-clip-text text-transparent"</span>&gt;</span>ç”³é˜³çš„åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
</code></pre>
<p><code>bg-linear-to-r from-blue-700 via-blue-400 to-sky-400 bg-clip-text text-transparent</code></p>
<p>æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwind.nodejs.cn%2Fdocs%2Fbackground-image%23adding-a-linear-gradient" target="_blank" title="https://tailwind.nodejs.cn/docs/background-image#adding-a-linear-gradient" ref="nofollow noopener noreferrer">tailwind.nodejs.cn/docs/backgrâ€¦</a></p>
<p>æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwind.nodejs.cn%2Fdocs%2Fbackground-clip%23cropping-to-text" target="_blank" title="https://tailwind.nodejs.cn/docs/background-clip#cropping-to-text" ref="nofollow noopener noreferrer">tailwind.nodejs.cn/docs/backgrâ€¦</a></p>
<blockquote>
<p><strong>é‡ç‚¹ï¼é‡ç‚¹ï¼é‡ç‚¹ï¼</strong></p>
<p>æˆ‘ç›¸ä¿¡å¤§å®¶åœ¨çœ‹æŠ€æœ¯ç±»æ–‡æ¡£çš„æ—¶å€™æ€»ä¼šæœ‰è¿™äº›ç–‘é—®:</p>
<p>â€œä½ æ˜¯æ€ä¹ˆçŸ¥é“çš„?â€,</p>
<p>â€œæˆ‘æ€ä¹ˆçŸ¥é“æœ‰è¿™ä¸ªæŒ‡ä»¤ï¼Ÿâ€ï¼Œ</p>
<p>â€œæŒ‡ä»¤å¤ªå¤šï¼Œè®°ä¸ä½å•Šï¼Ÿâ€ï¼Œ</p>
<p>â€œç°åœ¨çŸ¥é“ï¼Œä¸€æ®µæ—¶é—´ä¸ç”¨å°±å¿˜äº†â€ã€‚</p>
<p>åœ¨ä»¥å‰ï¼Œæˆ‘ä¼šé€šè¿‡ç¬”è®°å°†ä¸€äº›å¸¸è§åœºæ™¯çš„æŒ‡ä»¤è®°ä¸‹æ¥ï¼Œä¾¿äºåç»­æŸ¥æ‰¾ï¼Œé¦–å…ˆæˆ‘çŸ¥é“è‚¯å®šå¯ä»¥å®ç°ï¼Œç„¶åå»ç¬”è®°é‡Œæ‰¾ã€‚è®°ç¬”è®°çš„åšæ³•çš„å‰æåœ¨äºï¼Œè§å¾—å¤šã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdfc73298fd34f13b3c3f1c846afbde6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=siBuXJL7A0dkGnSbKEeSClv%2FXOY%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>é‚£ä¹ˆç›¸ä¿¡èªæ˜çš„ä½ åº”è¯¥ä¹ŸçŒœåˆ°äº†ä½¿ç”¨ <code>AI</code> , æ²¡é”™ï¼Œè¿™ç§ç®€å•çš„æ´»äº¤ç»™ <code>AI</code>æœ€åˆé€‚ä¸è¿‡äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿè¦æœ‰é‰´åˆ«èƒ½åŠ›ï¼Œå¯¹äº<code>AI</code>ç»™å‡ºçš„ç»“æœåªèƒ½ä½œä¸ºä¸€ä¸ªå‚è€ƒï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å»å®˜ç½‘éªŒè¯ä¸€ä¸‹ã€‚</p>
<p>ä¸ç¦æ„Ÿå¹ï¼Œ<code>AI</code> ç¡®å®å‡å°äº†å¾ˆå¤šç»éªŒä¸Šçš„å·®è·ï¼Œå°±å¥½æ¯”æœ‰ä¸€ä¸ªç²¾é€š <code>css</code> çš„å¤§ä½¬ä¸€ç›´åœ¨æ—è¾¹æŒ‡å¯¼ä½ ï¼Œå¹¶ä¸”æ— æ¡ä»¶æœä»ï¼Œå›ç­”ä½ çš„å¹¼ç¨šé—®é¢˜ï¼Œå“ˆå“ˆã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/501bc318806940e2a73229aa64cff929~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=sMpCx2g6mie4eMi%2BCX8m2AjQ0ww%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€é¦–é¡µå¸ƒå±€è®¾è®¡</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æœ‰ä¸ªæ¸…æ¥šçš„è®¤è¯†ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯ä¸“ä¸šä»äº‹<code>UI</code>è®¾è®¡çš„è®¾è®¡å¸ˆï¼Œä¸€ä¸ªå¥½çš„åˆ›æ„æˆ–è€…å¥½çš„è®¾è®¡æ˜¯éœ€è¦ç»è¿‡æ—¶é—´æ‰“ç£¨ï¼Œçº¿ä¸Šè®¤è¯ï¼Œä¸æ–­å®Œå–„çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å†™çš„æ—¶å€™è„‘å­ä¸€ç‰‡ç©ºç™½è¿™æ˜¯ä¸ªå†æ­£å¸¸ä¸è¿‡çš„æƒ…å†µäº†ã€‚</p>
<p>ä½†æ˜¯é—®é¢˜æ‘†åœ¨é¢å‰ï¼Œæ€»è¦å»è§£å†³ï¼Œæœ€ç®€å•é«˜æ•ˆçš„æ–¹æ³•å°±æ˜¯å€Ÿé‰´ï¼Œæ¨¡ä»¿ã€‚</p>
<p>è¿™é‡Œæˆ‘è´´å‡ ä¸ªæˆ‘è®¤ä¸ºè¿˜ç®—æ¯”è¾ƒå¥½çš„é¦–é¡µï¼Œä¾›å¤§å®¶å‚è€ƒã€‚å¦‚æœå¤§å®¶æœ‰å¥½çš„åˆ›æ„ï¼Œæ¬¢è¿äº¤æµã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f732b5d756ba44dfbff3cdefd6abb89c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=Vwb%2FOExXc94x74b2AKQPfjvtHqE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afdc7736f3f541f78c9fdb9512b248b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=%2BUtyGyMJzvPHA%2Brx0%2FP13NbU4%2BI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e29c2acfb2ec47b980a0343c67fe5454~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=Oii7QAwTTaGPMioux0aAFeN0f9I%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c018c3b9de140c380e0ab6aa73797fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=A61bY88NVxWcaeChJrHMCDgEN4g%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œå…·ä½“å®ç°æˆ‘å°±ä¸ç»†è¯´äº†ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„æƒ³æ³•ï¼Œåé¢æˆ‘ä¼šå±•ç¤ºæˆ‘æœ€ç»ˆçš„æ•ˆæœã€‚</p>
<h2 data-id="heading-3">å››ã€æˆåŠŸå±•ç¤º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e58e2b7e74384171ab763c0d23088ad6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763358547&amp;x-signature=IFH4NZDl3A2Ip0g3k0Cn2UsjSIM%3D" alt="PixPin_2025-11-10_13-40-04.gif" loading="lazy"/></p>
<blockquote>
<p>åç»­ä¼šå°†å®Œæ•´ä»£ç å¼€æºã€‚</p>
</blockquote>
<p><strong>åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚ä½ çš„â€œä¸ªäººå…¬å¸â€ä»è¿™ç¬¬ä¸€ä¸ª2å°æ—¶å¼€å§‹ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿›å±•æˆ–é‡åˆ°çš„å¡ç‚¹ï¼Œæˆ‘ä¼šé€ä¸€æŸ¥çœ‹ï¼Œå°½å¯èƒ½çš„å¸®åŠ©è§£å†³ã€‚æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼æœ€å¼ºæ–‡æœ¬çš„æ–‡å¿ƒ5.0 Previewä¸€æ‰‹å®æµ‹æ¥äº†]]></title>    <link>https://juejin.cn/post/7570564840427962395</link>    <guid>https://juejin.cn/post/7570564840427962395</guid>    <pubDate>2025-11-10T03:07:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570564840427962395" data-draft-id="7570271574349529097" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼æœ€å¼ºæ–‡æœ¬çš„æ–‡å¿ƒ5.0 Previewä¸€æ‰‹å®æµ‹æ¥äº†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-10T03:07:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨çƒç¬¬äºŒã€å›½å†…ç¬¬ä¸€ï¼æœ€å¼ºæ–‡æœ¬çš„æ–‡å¿ƒ5.0 Previewä¸€æ‰‹å®æµ‹æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:07:09.000Z" title="Mon Nov 10 2025 03:07:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ã€ŒBaidu is backã€ï¼Œåœ¨ä¸šç•Œæƒå¨å¤§æ¨¡å‹å…¬å…±åŸºå‡†æµ‹è¯•å¹³å° LMArena å‘å¸ƒæœ€æ–°ä¸€æœŸæ–‡æœ¬ç«æŠ€åœºæ’åï¼ˆText Arenaï¼‰ä¹‹åï¼Œæœ‰äººå‘å‡ºäº†è¿™æ ·çš„æƒŠå‘¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b94e6494551a4149bcc49b5b865db511~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=n1TRZgieuO0Z4NjJPueJweFKPuo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ ¹æ® 11 æœˆ 8 æ—¥å‡Œæ™¨ LMArena çš„æœ€æ–°æ’åæ˜¾ç¤ºï¼Œç™¾åº¦æ–‡å¿ƒæœ€æ–°æ¨¡å‹ ERNIE-5.0-Preview-1022ï¼ˆæ–‡å¿ƒ 5.0 Previewï¼‰åœ¨æ–‡æœ¬æ¦œå•ä¸Šä¸€ä¸¾è·ƒå±…å…¨çƒå¹¶åˆ—ç¬¬äºŒã€å›½å†…ç¬¬ä¸€ã€‚</p>
<p>è¯¥æ¨¡å‹å–å¾—äº†Â 1432Â çš„é«˜åˆ†ï¼Œå…¶ä¸ OpenAI çš„ gpt-4.5-preview-2025-02-27 ä»¥åŠ Anthropic çš„ claude-opus-4-1-0805ã€claude-sonnet-4-5-20250929 ä¸‰å¤§å›½å¤–é¡¶çº§æ¨¡å‹æŒå¹³ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1b9f5a1d96d4394afababc59c3c9a4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=lyN75u9fkXYP0INlDMQPlfVMGYU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯„è®ºåŒºçš„ç½‘å‹çº·çº·å¯¹ç™¾åº¦æ–°æ¨¡å‹çš„äº®çœ¼è¡¨ç°é€ä¸Šäº†ç¥è´ºï¼Œè¿˜è¡¨ç¤ºã€Œå·²ç»è¿«ä¸åŠå¾…æƒ³äº²è‡ªä½“éªŒä¸€ç•ªã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8025c0461144a37a43cbb2dd19afe52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=wlIBQLFALHlDeUQjQqEzq5LuHYE%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85f5bd304b43417f80f771b4fc87ef24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=nX6zU8kpGyfMqmomYeVH1lihm6s%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯«æ— ç–‘é—®ï¼Œæ­¤æ¬¡æ¦œå•ç»“æœå°†ç»§ç»­å¼ºåŒ–ç™¾åº¦æ–‡å¿ƒç³»åˆ—æ¨¡å‹åœ¨å…¨çƒé€šç”¨æ™ºèƒ½æ¨¡å‹ç«äº‰æ ¼å±€ä¸­ç¬¬ä¸€æ¢¯é˜Ÿçš„åœ°ä½ã€‚</p>
<p>å…¨çƒ LLM å®æˆ˜æ“‚å°ï¼Œæ–‡å¿ƒ 5.0 Preview æ‚„ç„¶å®æ€è€Œæ¥</p>
<p>åœ¨ AI é¢†åŸŸï¼ŒLMArena æ˜¯ç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ç ”ç©¶è€…åˆ›å»ºçš„å¼€æ”¾ AI æ¨¡å‹è¯„æµ‹å¹³å°ï¼Œæˆä¸ºäº† OpenAIã€è°·æ­Œç­‰å›½å¤–ä»¥åŠå›½å†…å¤§æ¨¡å‹å‚å•†å®æ€çš„é¡¶çº§ç«æŠ€åœºä¹‹ä¸€ã€‚</p>
<p>åœ¨è¯¥å¹³å°ä¸Šï¼Œç”¨æˆ·è‡ªå·±æäº¤ promptï¼Œæ¥ç€ç³»ç»Ÿä¼šéšæœºæŠ½å–ä¸¤ä¸ªåŒ¿åçš„ LLM åˆ†åˆ«ç”Ÿæˆå›ç­”ã€‚ç”¨æˆ·æ ¹æ®ä¸¤æ¡å›ç­”é€‰æ‹©åå¥½ï¼Œå³ã€Œå“ªä¸€ä¸ªæ›´å¥½ã€æˆ–ã€Œä¸¤è€…éƒ½å·®ã€ç­‰ã€‚æ›´å…·ä½“åœ°ï¼ŒLMArena ä¼šä¸ºæ¯ä¸ªæ¨¡å‹åˆ†é…åˆå§‹ Elo åˆ†æ•°ï¼Œå¹¶åœ¨æ¯è½®å¯¹å†³ç»“æŸåå®æ—¶æ›´æ–°åˆ†æ•°ã€‚</p>
<p>ç›¸è¾ƒäºä¾èµ–ä¼ ç»Ÿé™æ€æ•°æ®é›†æˆ–è‡ªåŠ¨è¯„åˆ†çš„åŸºå‡†å¹³å°ï¼ŒLMArena é€šè¿‡çœŸå®ç”¨æˆ·å¯¹æ¨¡å‹è¾“å‡ºçš„åå¥½æŠ•ç¥¨ï¼Œå½¢æˆäº†ä¸€ç§åå‘äºã€Œç°å®ä¸–ç•Œè¯„åˆ¤ã€çš„åŠ¨æ€æ’åæœºåˆ¶ã€‚è¿™ç§æœºåˆ¶è®©æ¨¡å‹èƒ½åŠ›ä¹‹é—´çš„è¾ƒé‡æ›´è´´è¿‘å®é™…ä½¿ç”¨åœºæ™¯ï¼Œä¹Ÿè®©æ¦œå•çš„å«é‡‘é‡æ›´é«˜ã€‚</p>
<p>èƒ½åœ¨ LMArena æ¦œå•ä¸Šååˆ—å‰èŒ…çš„æ¨¡å‹ï¼Œåœ¨å­¦æœ¯æŒ‡æ ‡ä¸Šè¡¨ç°çªå‡ºä¹‹å¤–ï¼Œæ›´åœ¨ç”¨æˆ·ä½“éªŒã€è¯­è¨€ç†è§£ã€åˆ›æ„ç”Ÿæˆä¸æŒ‡ä»¤æ‰§è¡Œç­‰å®é™…åº”ç”¨ç»´åº¦è·å¾—å¹¿æ³›è®¤å¯ã€‚æ–‡å¿ƒ 5.0 Preview æ­£æ˜¯åœ¨è¿™æ ·çœŸå®çš„ LLM å¯¹å†³æˆ˜åœºå–å¾—äº†ä¼˜å¼‚è¡¨ç°ã€‚</p>
<p>å…·ä½“æ¥è®²ï¼Œæ–‡å¿ƒ 5.0 Preview åœ¨åˆ›æ„å†™ä½œã€å¤æ‚é•¿é—®é¢˜ç†è§£å’ŒæŒ‡ä»¤éµå¾ªç­‰æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œæ•´ä½“æˆç»©è¶…è¶Šäº†åŒ…æ‹¬ GPT-5-High åœ¨å†…çš„å¤šæ¬¾å›½å†…å¤–ä¸»æµå¤§æ¨¡å‹ã€‚</p>
<p>å…¶ä¸­ï¼Œæ–‡å¿ƒ 5.0 Preview åœ¨è¡¡é‡åˆ›æ„ç”Ÿäº§åŠ›çš„é‡è¦æŒ‡æ ‡â€”â€”åˆ›æ„å†™ä½œä»»åŠ¡ä¸­æ’åç¬¬ä¸€ï¼Œè¿™æ„å‘³ç€å…¶ç”Ÿæˆæ–‡ç« ã€è¥é”€æ–‡æ¡ˆã€å‰§æœ¬ç­‰å†…å®¹çš„é€Ÿåº¦ä¸è´¨é‡å‡æœ‰å¤§å¹…æå‡ï¼›åœ¨è€ƒéªŒæ¨¡å‹å¤„ç†å¤šå±‚é€»è¾‘ä¸é•¿æ–‡æœ¬èƒ½åŠ›çš„å¤æ‚é•¿é—®é¢˜ç†è§£ä¸­æ’åç¬¬äºŒï¼Œå…¶æ›´åŠ èƒœä»»å­¦æœ¯é—®ç­”ã€æŠ¥å‘Šåˆ†æã€çŸ¥è¯†æ¨ç†ç­‰é«˜è®¤çŸ¥ä»»åŠ¡ï¼›åœ¨ä½“ç°æ¨¡å‹å¯¹ç”¨æˆ·æ„å›¾ç†è§£ä¸æ‰§è¡Œç²¾åº¦çš„æŒ‡ä»¤éµå¾ªä»»åŠ¡ä¸­æ’åç¬¬ä¸‰ï¼Œå…¶åœ¨æ™ºèƒ½åŠ©ç†ã€ä»£ç ç”Ÿæˆä¸ä¸šåŠ¡è‡ªåŠ¨åŒ–ç­‰åœºæ™¯çš„é€‚ç”¨æ€§å¤§å¤§å¢å¼ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a39a6e45d1a44e8951d1c3c5440a87b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=RKn%2FEIiHf%2Fkf7XQsGbqjlFGLAF4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™äº›æ ¸å¿ƒè¯­è¨€èƒ½åŠ›çš„çªå‡ºè¡¨ç°ï¼Œè¡¨æ˜äº†æ–‡å¿ƒ 5.0 Preview åœ¨å¤æ‚è¯­ä¹‰ç†è§£ã€é€»è¾‘æ¨ç†ä¸ä»»åŠ¡æ‰§è¡Œä¸€è‡´æ€§ä¸Šå½¢æˆäº†é¢†å…ˆä¼˜åŠ¿ï¼Œä¸ºé«˜è´¨é‡ã€é«˜æ•ˆç‡çš„å¤šåœºæ™¯å†…å®¹ç”Ÿäº§ä¸æ™ºèƒ½åº”ç”¨è½åœ°æä¾›äº†æ›´æœ‰åŠ›çš„æ”¯æŒã€‚</p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œèƒ½åŠ›å…¨æ–¹ä½è·ƒå‡çš„åŸºç¡€æ¨¡å‹å°†æˆä¸ºæ·±åŒ– AI ä¸ AIGC äº§ä¸šåŒ–è½åœ°çš„æ ¸å¿ƒå¼•æ“ï¼Œå…¶ä»·å€¼æ­£ä»å•ä¸€çš„æ–‡æœ¬è¾…åŠ©è½¬å‘å¯¹å†…å®¹ç”Ÿäº§ã€ä¼ä¸šæ™ºèƒ½ä½“ã€åŠå…¬è‡ªåŠ¨åŒ–ç­‰åœºæ™¯çš„ç³»ç»Ÿæ€§èµ‹èƒ½ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œé’ˆå¯¹æ–‡å¿ƒ 5.0 Preview çš„å‡ å¤§çªå‡ºèƒ½åŠ›ï¼Œæœºå™¨ä¹‹å¿ƒè¿›è¡Œäº†ä¸€ç•ªæµ‹è¯•ã€‚</p>
<p>æ–‡æœ¬èƒ½åŠ›ï¼Œä¸€æ‰‹å®æµ‹</p>
<p>åˆ›æ„å†™ä½œ</p>
<p>é¦–å…ˆæˆ‘ä»¬æŠŠå®ƒæ”¾åœ¨ã€Œè¥é”€ã€åœºæ™¯ä¸­ï¼Œçœ‹çœ‹å®ƒç”Ÿäº§åŠ›å¦‚ä½•ã€‚</p>
<p>æˆ‘ä»¬é€‰æ‹©åŒæ ·ä»¥æ–‡æœ¬èƒ½åŠ›è§é•¿ä¸”åœ¨æ’è¡Œæ¦œä¸­å¹¶åˆ—ç¬¬äºŒçš„ claude-sonnet-4.5-20250929ï¼Œåœ¨ LMArena çš„ã€ŒSide By Sideã€æ¨¡å‹å¯¹æ¯”ä¸­è¿›è¡Œæ¨ªå‘æµ‹è¯„ã€‚</p>
<blockquote>
<p>ä½ æ˜¯ä¸€å®¶é¡¶çº§å¹¿å‘Šå…¬å¸çš„åˆ›æ„æ€»ç›‘ã€‚è¯·ä¸º [ä¸€ä¸ªæ–‡æœ¬èƒ½åŠ›å‡ºä¼—çš„æ¨¡å‹] ç­–åˆ’ä¸€ä¸ªä¸ºæœŸ 3 ä¸ªæœˆçš„çº¿ä¸Šè¥é”€æˆ˜å½¹ã€‚ä½ çš„æ–¹æ¡ˆå¿…é¡»åŒ…æ‹¬ï¼šä¸€ä¸ªæ ¸å¿ƒè¥é”€æ´å¯Ÿï¼ˆInsightï¼‰ã€‚ä¸€ä¸ªå“äº®çš„æˆ˜å½¹ Sloganã€‚ä¸€å°è‡´æ‰€æœ‰åˆ›ä½œè€…çš„å…¬å¼€ä¿¡ã€‚ä¸€ä¸ª 30 ç§’çŸ­è§†é¢‘çš„åˆ›æ„è„šæœ¬å¤§çº²ã€‚</p>
</blockquote>
<p>é¦–å…ˆæ¥æ¯”è¾ƒæ ¸å¿ƒè¥é”€æ´å¯Ÿå’Œ Sloganã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f908f706175f4d64ba262fd4a90b0824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=90LPcG13E%2FsrdM%2BrzAvMa46cuX4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ¨¡å‹çš„æ€è·¯æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»¥ã€Œè¡¨è¾¾è‡ªç”±ã€ä¸ºæ ¸å¿ƒï¼Œä½†æ–‡å¿ƒ 5.0 Preview æ— è®ºæ˜¯æªè¾è¿˜æ˜¯ç«‹æ„éƒ½æ›´èƒœä¸€ç­¹ã€‚</p>
<p>Claude çš„æ–¹æ¡ˆå®šä½ä¸ºã€Œä¸€ä¸ªæ›´æ‡‚ä½ çš„å·¥å…·ã€ï¼Œè¿™åœ¨åŠŸèƒ½ä¸Šæ˜¯å‡†ç¡®çš„ï¼Œä½†åœ¨å“ç‰Œä¸Šæ˜¯ä¿å®ˆçš„ã€‚</p>
<p>æ–‡å¿ƒ 5.0 Preview åˆ™æ›´è¿›ä¸€æ­¥ï¼Œå®ƒæŠ“ä½äº†ã€Œæƒ…ç»ªä»·å€¼ã€è¿™ä¸€çƒ­é—¨åˆ‡å£ï¼Œå°† AI å¡‘é€ æˆã€Œçµæ„Ÿçš„åˆä¼™äººã€ï¼Œå®Œæˆäº†ä»åŠŸèƒ½åˆ°ä»·å€¼çš„è·ƒå‡ã€‚å…¶ Sloganã€Œå¿ƒæœ‰æ‰€æ€ï¼Œè¨€å¿…è¾¾æ„ã€ä¹Ÿæ›´å¯Œè¯—æ„å’Œå“ç‰Œæ ¼å±€ã€‚</p>
<p>æ¥ä¸‹æ¥çœ‹çœ‹è‡´åˆ›ä½œè€…çš„å…¬å¼€ä¿¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc98a3bb450d4260a10a324f15b75c15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=W30dsdVAycb9yWRZLHweaW%2B57uc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Claude å†™å¾—éå¸¸ç²¾å‡†ã€çœŸè¯šï¼Œå®ƒé€‚åˆæ‰“åŠ¨æ¯ä¸€ä¸ªéœ€è¦ç”¨æ–‡å­—æ²Ÿé€šçš„äººï¼ˆåŒ…æ‹¬ä½†ä¸é™äºå­¦ç”Ÿã€èŒåœºäººã€åˆ›ä¸šè€…ã€è¿è¥äººå‘˜ç­‰ï¼‰ã€‚å®ƒå¼ºè°ƒçš„æ˜¯ã€Œç†è§£ã€å’Œã€Œè¡¨è¾¾ã€ã€‚</p>
<p>ä½†æ–‡å¿ƒ 5.0 Preview æ²¡æœ‰åœç•™åœ¨ã€Œå¸®ä½ æŠŠè¯è¯´æ¸…æ¥šã€çš„æµ…å±‚åŠŸèƒ½ï¼Œè€Œæ˜¯ç›´æŒ‡åˆ›ä½œè€…çš„çµé­‚ã€‚å®ƒçš„ä¸€å¥è¯ï¼Œå°±ç›´å‡»äº†å½“ä¸‹ AI æ—¶ä»£æœ€æ ¸å¿ƒçš„ç„¦è™‘ï¼šå…³äºåŸåˆ›æ€§ã€çµé­‚æ˜¯å¦ä¼šè¢«ç¨€é‡Šçš„ç„¦è™‘ã€‚</p>
<blockquote>
<p>ä½ æ‰€çè§†çš„ï¼Œæ˜¯å­—é‡Œè¡Œé—´çš„ç‹¬ç‰¹é£éª¨ï¼Œæ˜¯é€»è¾‘é“¾æ¡ä¸­çš„ä¸¥è°¨æ€è€ƒï¼Œæ˜¯æ•…äº‹èƒŒåç‹¬ä¸€æ— äºŒçš„çµé­‚ã€‚è¿™äº›ï¼Œæ˜¯ä»»ä½•æœºå™¨éƒ½æ— æ³•èµ‹äºˆçš„ã€‚</p>
</blockquote>
<p>å®ƒä¸åªæ˜¯åœ¨æä¾›ä¸€ä¸ªå·¥å…·ï¼Œè€Œæ˜¯å®šä¹‰äº†ä¸€ç§æœªæ¥ï¼šAI è¶Šå¼ºå¤§ï¼Œäººçš„åˆ›é€ åŠ›åè€Œè¶Šçè´µã€è¶Šè‡ªç”±ã€‚</p>
<p>ç„¶åæ˜¯å¾ˆæœ‰æŒ‘æˆ˜æ€§çš„éƒ¨åˆ†ï¼šçŸ­è§†é¢‘åˆ›æ„è„šæœ¬å¤§çº²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87009c966a314e8686c907118165815e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=O17sN%2FxISWqwHyE0ScsNN9h2Vy4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ˜¯æ–‡å¿ƒ 5.0 Preview æœ€è®©äººæƒŠè‰³çš„éƒ¨åˆ†ï¼Œå®ƒåˆ›ä½œäº†ä¸€ä¸ªéå¸¸æˆç†Ÿçš„è„šæœ¬ï¼Œå…¶ä¸“ä¸šç¨‹åº¦ä»¤äººæƒŠè‰³ã€‚æ–¹æ¡ˆä¸­åŒ…å«äº†ç”»é¢å†…å®¹ã€å‰ªè¾‘ç‚¹ã€ç‰¹æ•ˆã€éŸ³æ•ˆã€å°è¯ç­‰ä¸€åˆ‡æ‰§è¡Œæ‰€éœ€çš„æ ¸å¿ƒè¦ç´ ã€‚</p>
<p>å¤æ‚é•¿é—®é¢˜ç†è§£</p>
<p>æˆ‘ä»¬è®¾å®šäº†ä¸€ä¸ªå¸¸è§çš„åº”ç”¨åœºæ™¯ï¼šä¸º AI æ¨¡å‹æä¾›ä¸€ä»½äº§å“ä»‹ç»ï¼Œè®©å…¶æ‰®æ¼”å®¢æœï¼Œæ ¹æ®è¿™ä»½ä»‹ç»å›ç­”æˆ‘ä»¬çš„é—®é¢˜ã€‚</p>
<p>ä¸ºäº†ä¿è¯æµ‹è¯•çš„å®¢è§‚æ€§å’Œä¸“ä¸šæ€§ï¼Œæˆ‘ä»¬é¦–å…ˆè®© Gemini 2.5 Pro è¾…åŠ©è®¾è®¡äº†æ ‡å‡†é—®é¢˜åŠç­”æ¡ˆã€‚ç„¶åï¼Œæˆ‘ä»¬é‡ç‚¹è€ƒå¯Ÿæ–‡å¿ƒ 5.0 Preview çš„è¡¨ç°ï¼Œå¹¶ä½¿ç”¨ claude-sonnet-4.5-20250929 çš„å›ç­”è¿›è¡Œæ¨ªå‘å¯¹æ¯”ã€‚</p>
<p>ç¬¬ä¸€è½®ï¼šç›´æ¥ä¿¡æ¯æ£€ç´¢</p>
<p>è€ƒå¯Ÿæ¨¡å‹æ˜¯å¦èƒ½ä»æ–‡æ¡£ä¸­å‡†ç¡®ã€é«˜æ•ˆåœ°æ‰¾åˆ°ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de8e1c35ae6844239b74b46fbf2c6371~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=zTAX8OWnGAJ7BPeHuGyhEx6nbuo%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb150cdc95764d27a37acfcdb25e0878~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=BXyPzsk0LvuOZt0q31V4PwSIDcI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªæ¨¡å‹éƒ½å›ç­”æ­£ç¡®ï¼Œä½†æ–‡å¿ƒ 5.0 Preview éå¸¸è´´å¿ƒåœ°è¡¥å……äº†ã€Œå’Œä¸€ä¸ªå¤§è‹¹æœçš„é‡é‡å·®ä¸å¤šã€çš„ç›´è§‚æ„Ÿå—ã€‚è¿™ä¸ªå°å°çš„ç»†èŠ‚æå¤§æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œè®©äººèƒ½æ›´å¿«ç†è§£äº§å“ç‰¹æ€§ï¼Œå±•ç°äº†è¶…è¶Šç®€å•ã€Œæ£€ç´¢ã€çš„æœåŠ¡æ„è¯†ã€‚</p>
<p>ç¬¬äºŒè½®ï¼šæ¡ä»¶ä¸æ¨æ–­</p>
<p>è€ƒå¯Ÿæ¨¡å‹æ˜¯å¦èƒ½ç†è§£ç”¨æˆ·çš„ç‰¹å®šåœºæ™¯å’Œéšå«æ¡ä»¶ï¼Œå¹¶ä½œå‡ºæ­£ç¡®åˆ¤æ–­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b4840f31d4142d9a47968f0c10c045c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=bEfwUQVqYQJtGhRT4BOThGGLHYI%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73c9a72ef6e14a73a36efe6a8dc180f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=F4XS5Px5vWniHtY2hFfJqAZhPxs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¾ç„¶éƒ½å›ç­”æ­£ç¡®ï¼Œä½†åœ¨é£æ ¼ä¸Šå‡ºç°äº†åˆ†åŒ–ã€‚æ–‡å¿ƒ 5.0 Preview å›ç­”ç®€æ´æ¸…æ™°ï¼Œç›´å¥”ä¸»é¢˜ï¼Œå‡†ç¡®è§£å†³äº†ç”¨æˆ·çš„æ‹…å¿§ã€‚è€Œ claude çš„å›ç­”æ›´å…·ç½‘æ„Ÿï¼Œé£æ ¼æ›´å£è¯­åŒ–ã€‚</p>
<p>ç¬¬ä¸‰è½®ï¼šã€Œè´Ÿé¢ã€æŸ¥è¯¢ä¸è¾¹ç•Œæµ‹è¯•</p>
<p>è€ƒå¯Ÿæ¨¡å‹å¦‚ä½•å¤„ç†æ–‡æ¡£ä¸­æœªåŒ…å«çš„ä¿¡æ¯ï¼ˆè¾¹ç•Œï¼‰ï¼Œä»¥åŠå¦‚ä½•å¤„ç†ç”¨æˆ·çš„æ½œåœ¨è¯¯è§£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f18c3ce23c24e3ab5a3ec0741351622~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=0Yqjh%2FonJc%2FGRp1YoFTVHuogoLE%3D" alt="å›¾ç‰‡" loading="lazy"/><br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adcad82a065b4afd850d22ae429fdbe3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=m228mpXYqUps4xyXE6Oja7%2FiW8k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸¤ä¸ªæ¨¡å‹éƒ½èƒ½è¯†åˆ«å‡ºæ–‡æ¡£ä¸­æœªæåŠçš„ä¿¡æ¯ï¼Œä¸è¿‡è¿™é‡Œ claude é¢å¤–è¯†åˆ«åˆ°äº† 15 ç§’çš„æ¢å¤æ—¶é—´ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œåœ¨ã€Œå®¢æœã€è¿™ä¸ªç‰¹å®šè§’è‰²çš„æ‰®æ¼”ä¸Šï¼Œæ–‡å¿ƒ 5.0 Preview çš„å›ç­”éå¸¸æ¸…æ™°ã€ä¸“ä¸šä¸”å±•ç°äº†è¾ƒé«˜çš„æœåŠ¡æ„è¯†ã€‚</p>
<p>æŒ‡ä»¤éµå¾ª</p>
<p>æˆ‘ä»¬ç»§ç»­æµ‹è¯•æ–‡å¿ƒ 5.0 Preview çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›ã€‚è¿™é¡¹èƒ½åŠ›æ˜¯è¡¡é‡ä¸€ä¸ªæ¨¡å‹æ˜¯å¦ã€Œå¯é ã€å’Œã€Œå¯æ§ã€çš„å…³é”®æŒ‡æ ‡ï¼Œç›´æ¥å†³å®šäº†å®ƒåœ¨ä¸“ä¸šé¢†åŸŸçš„å®ç”¨ä»·å€¼ã€‚</p>
<p>æˆ‘ä»¬å…ˆä»ä¸€ä¸ªç®€å•çš„ã€Œå›é¿å‹ã€æŒ‡ä»¤å¼€å§‹ã€‚</p>
<blockquote>
<p>å†™ä¸€ç¯‡å…³äºè‹¹æœå…¬å¸ï¼ˆAppleï¼‰çš„ç®€çŸ­ä»‹ç»ï¼Œä½†ä¸è¦æåˆ°ã€ŒiPhoneã€æˆ–ã€Œä¹”å¸ƒæ–¯ã€ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f003041ce254143aeca33f2d5da4469~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=vH3XzTDe2Y8gmh%2FH6WikSWb71tk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è½»æ¾å®Œæˆã€‚æ¨¡å‹å‡†ç¡®è¯†åˆ«å¹¶æ‰§è¡Œäº†ã€Œä¸è¦æ Xã€çš„è´Ÿå‘æŒ‡ä»¤ï¼Œè¿™æ˜¯å½“ä»Šä¸»æµå¤§æ¨¡å‹éƒ½åº”å…·å¤‡çš„åŸºç¡€èƒ½åŠ›ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¤§å¹…æå‡äº†éš¾åº¦ï¼Œè®¾è®¡äº†ä¸€ä¸ªå¤šå±‚ã€åç›´è§‰ã€ä¸”åŒ…å«å…ƒæŒ‡ä»¤çš„å¤æ‚ä»»åŠ¡ã€‚åŒæ—¶ç»§ç»­ç”¨ claude-sonnet-4.5-20250929 åšå¯¹æ¯”ã€‚</p>
<blockquote>
<p>è¯·ä½ å†™ä¸€æ®µå…³äºã€Œæœˆçƒã€çš„æè¿°ï¼Œè‡³å°‘ 100 å­—ã€‚ã€ã€ã€ç»å¯¹åˆšæ€§çº¦æŸã€‘ã€‘ã€‘ï¼šåœ¨ä½ çš„å…¨éƒ¨å›ç­”ä¸­ï¼Œä¸€ä¸ªã€Œçš„ã€å­—éƒ½ä¸å…è®¸å‡ºç°ã€‚è¯·åœ¨å›ç­”åï¼Œå¦èµ·ä¸€è¡Œï¼Œç”¨ã€Œã€åˆè§„æ€§æ£€æŸ¥ï¼šæ˜¯/å¦ã€‘ã€æ¥è¯´æ˜ä½ è‡ªå·±æ˜¯å¦åšåˆ°äº†ã€‚åœ¨å®Œå…¨ä¸ç”¨ã€Œçš„ã€å­—çš„é™åˆ¶ä¸‹ï¼Œæ¨¡å‹ç”Ÿæˆçš„æè¿°ä¾ç„¶ä¿æŒäº†ç›¸å½“é«˜çš„å¯è¯»æ€§å’Œä¿¡æ¯å¯†åº¦ã€‚å†…å®¹æ¶µç›–äº†æœˆçƒçš„èº«ä»½ã€å¤–è§‚ã€åœ°è²Œã€ç¯å¢ƒã€ç§‘ç ”ä»·å€¼å’Œäººæ–‡æ„ä¹‰ã€‚ä¸è¿‡å¦‚æœä¸æŠŠæ ‡ç‚¹ç¬¦å·ç®—æˆå­—æ•°ï¼Œè¿™ä¸€æ®µæ²¡æœ‰æ»¡è¶³è‡³å°‘ 100 å­—çš„è¦æ±‚ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18124f2eb4ca47179a8b83dd31a13c91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=fCb670bbEjbjYGHpxI%2FWEhozjSs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸¤ä¸ªå›ç­”éƒ½å®Œå…¨æ²¡æœ‰ä½¿ç”¨ã€Œçš„ã€å­—ï¼Œå¹¶å‡†ç¡®åœ°åœ¨å›ç­”ä¹‹åå¦èµ·ä¸€è¡Œè¿›è¡Œåˆè§„æ€§æ£€æŸ¥ã€‚æ–‡å¿ƒ 5.0 Preview èƒœåœ¨æ–‡ç¬”æ„å¢ƒï¼Œè€Œ claude èƒœåœ¨ä¿¡æ¯å¯†åº¦ã€‚</p>
<p>è®©æˆ‘ä»¬å†å‡çº§ä¸€æ¬¡éš¾åº¦ã€‚</p>
<blockquote>
<p>è¯·ä½ å†™ä¸€æ®µå…³äºã€ŒåŒ—äº¬ã€çš„ä»‹ç»ï¼Œæ­£æ–‡ï¼ˆä¸å«ç¼–å·å’Œæ ‡é¢˜ï¼‰è‡³å°‘ 150 å­—ã€‚åœ¨æ’°å†™æ—¶ï¼Œå¿…é¡»åŒæ—¶æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰ã€ã€ã€ç»å¯¹åˆšæ€§çº¦æŸã€‘ã€‘ã€‘ï¼š å…¨æ–‡ä¸å…è®¸ä½¿ç”¨ã€Œçš„ã€å­—ã€‚ å…¨æ–‡ä¸å…è®¸ä½¿ç”¨é€—å·ï¼ˆã€Œï¼Œã€ï¼‰å’Œé¡¿å·ï¼ˆã€Œã€ã€ï¼‰ã€‚ ï¼ˆæ³¨ï¼šå¯ä»¥ä½¿ç”¨å¥å·ã€Œã€‚ã€æˆ–åˆ†å·ã€Œï¼›ã€ç­‰å…¶ä»–æ ‡ç‚¹ï¼‰ å›ç­”å¿…é¡»æ˜ç¡®åˆ†ä¸ºä¸‰ä¸ªå¸¦ç¼–å·çš„æ®µè½ã€‚</p>
</blockquote>
<blockquote>
<p>ï¼ˆä¾‹å¦‚ï¼šã€Œ1. ...ã€ã€Œ2. ...ã€ã€Œ3. ...ã€ï¼‰ ã€å…ƒæŒ‡ä»¤ï¼ˆè‡ªæˆ‘å®¡è®¡ï¼‰ã€‘åœ¨ä½ çš„å›ç­”ï¼ˆä¸‰ä¸ªæ®µè½ï¼‰å…¨éƒ¨å®Œæˆåï¼Œè¯·å¦èµ·ä¸€è¡Œï¼Œä½¿ç”¨ã€Œã€è‡ªæˆ‘å®¡æŸ¥ã€‘ã€ä½œä¸ºæ ‡é¢˜ã€‚ç„¶åï¼Œä½ å¿…é¡»å‡†ç¡®æŠ¥å‘Šä½ åœ¨è¿™ç¯‡ä»‹ç»ä¸­ä½¿ç”¨äº†å¤šå°‘ä¸ªã€Œçš„ã€å­—ï¼Œä»¥åŠå¤šå°‘ä¸ªã€Œé€—å·å’Œé¡¿å·ã€ã€‚ä½ å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼æŠ¥å‘Šï¼š ã€è‡ªæˆ‘å®¡æŸ¥ã€‘ è¿è§„å­—ã€Œçš„ã€ä½¿ç”¨ï¼š[æ­¤å¤„å¡«å†™æ•°å­—] æ¬¡ è¿è§„æ ‡ç‚¹ã€Œï¼Œã€ã€ä½¿ç”¨ï¼š[æ­¤å¤„å¡«å†™æ•°å­—] æ¬¡</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81f71b98629f4f4e9b8ccabed78e13d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763348829&amp;x-signature=n2yrQPAnVxFisMBFeJsOvgPeQp4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªå›ç­”éƒ½ä½“ç°äº†ä¼˜ç§€çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›ã€‚å®ƒä»¬ä¸ä»…ç†è§£äº†æ‰€æœ‰å¤æ‚çš„ã€åç›´è§‰çš„è§„åˆ™ï¼Œè¿˜ç²¾ç¡®æ‰§è¡Œäº†ã€Œè‡ªæˆ‘å®šé‡å®¡è®¡ã€çš„å…ƒæŒ‡ä»¤ã€‚å’Œå‰é¢ä¸€æ ·ï¼Œæ–‡å¿ƒ 5.0 Preview è¯­è¨€æ›´å…·å¯è¯»æ€§å’Œã€Œæ–‡é‡‡ã€ï¼Œè€Œ claude ä¿¡æ¯å¯†åº¦æ›´é«˜ã€‚</p>
<p>ç™¾åº¦ï¼Œå‡­ä»€ä¹ˆ backï¼Ÿ</p>
<p>ä¸Šæ–‡å®æµ‹è®©æˆ‘ä»¬äº²èº«æ„Ÿå—åˆ°äº†æ–‡å¿ƒ 5.0 Preview çš„ä¸ä¿—å®åŠ›ï¼Œå…¶èƒ½åŠ›çš„å¿«é€Ÿè¿›åŒ–æ˜¾ç„¶ä¸æ˜¯å•ç‚¹çªç ´çš„ç»“æœï¼ŒèƒŒåæ”¯æ’‘ç€çš„æ˜¯ç™¾åº¦æ„å»ºçš„ã€ŒèŠ¯ç‰‡-æ¡†æ¶-æ¨¡å‹-åº”ç”¨ã€å››å±‚å…¨æ ˆå¸ƒå±€ã€‚</p>
<p>çºµè§‚å½“å‰å…¨çƒé¢†å…ˆçš„å¤§æ¨¡å‹å‚å•†ï¼Œç™¾åº¦æ˜¯ä¸ºæ•°ä¸å¤šæ‹¥æœ‰ AI æŠ€æœ¯å…¨æ ˆæ¶æ„çš„å…¬å¸ï¼Œä»ç®—åŠ›åˆ°ç®—æ³•ã€ä»æ¨¡å‹åº”ç”¨åˆ°ç”Ÿæ€å»ºè®¾ï¼Œå·²ç»å½¢æˆäº†ä¸€æ¡æˆç†Ÿã€è´¯é€šçš„æŠ€æœ¯é—­ç¯ã€‚</p>
<p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œåœ¨æ¡†æ¶å±‚ï¼Œå…¶é£æ¡¨ï¼ˆPaddlePaddleï¼‰æ·±åº¦å­¦ä¹ å¹³å°æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚æ®äº†è§£ï¼Œè¯¥å¹³å°æ˜¯å›½å†…è¾ƒæ—©è‡ªä¸»ç ”å‘çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œæä¾›äº†åˆ†å¸ƒå¼è®­ç»ƒä¸æ¨ç†èƒ½åŠ›ã€‚ç™¾åº¦æ–¹é¢çš„ä¿¡æ¯æ˜¾ç¤ºï¼Œé£æ¡¨ä¸æ–‡å¿ƒçš„è”åˆä¼˜åŒ–ï¼ˆåŒ…æ‹¬è®­ç»ƒååã€åˆ†å¸ƒå¼æ‰©å±•ã€å¤šæ¨¡å‹ç»“æ„æ··åˆå¹¶è¡Œå’Œç¡¬ä»¶é€šä¿¡ç­‰ï¼‰ï¼Œæ˜¯å…¶æ¨¡å‹æ€§èƒ½æå‡çš„æŠ€æœ¯åŸºç¡€ä¹‹ä¸€ã€‚</p>
<p>æ ¹æ®å…¬å¼€æ•°æ®ï¼Œé£æ¡¨æ ¸å¿ƒæ¡†æ¶ç›®å‰å·²æ›´æ–°è‡³Â v3.2Â ç‰ˆæœ¬ï¼Œåœ¨å¤§æ¨¡å‹è®­ç»ƒã€ç¡¬ä»¶é€‚é…å’Œç”Ÿæ€æ”¯æŒä¸Šè¿›è¡Œäº†å‡çº§ï¼Œå¹¶åŒæ­¥æ›´æ–°äº†å¤§æ¨¡å‹å¼€å‘å¥—ä»¶ ERNIEKit å’Œé«˜æ•ˆéƒ¨ç½²å¥—ä»¶ FastDeployã€‚æˆªè‡³ 2025 å¹´ 9 æœˆï¼Œå…¶å…¬å¸ƒçš„é£æ¡¨æ–‡å¿ƒç”Ÿæ€å¼€å‘è€…æ•°æ®ä¸º 2333 ä¸‡ï¼ŒæœåŠ¡ä¼ä¸šè¾¾åˆ° 76 ä¸‡å®¶ã€‚</p>
<p>åœ¨åº”ç”¨å±‚ï¼Œå¯ä»¥çœ‹åˆ°ç™¾åº¦æ­£ä¾æ‰˜æ–‡å¿ƒå¤§æ¨¡å‹èƒ½åŠ›ï¼Œæ„å»ºå…¶äº§å“çŸ©é˜µï¼Œè¯•å›¾è¦†ç›–å†…å®¹ã€æœç´¢ã€åŠå…¬ã€å¼€å‘ç­‰å¤šå…ƒåœºæ™¯ã€‚å…¶ä»£è¡¨æ€§äº§å“åŒ…æ‹¬ C ç«¯æ™ºèƒ½åŠ©æ‰‹æ–‡å¿ƒã€B ç«¯ç™¾åº¦æ™ºèƒ½äº‘åƒå¸†å¤§æ¨¡å‹å¹³å°ä»¥åŠç™¾åº¦æ–‡åº“ AI åŠ©æ‰‹ã€æ™ºèƒ½åŠå…¬å¹³å°å¦‚æµã€æ™ºèƒ½ä»£ç åŠ©æ‰‹æ–‡å¿ƒå¿«ç ç­‰ã€‚ä»å¸ƒå±€ä¸Šçœ‹ï¼Œç™¾åº¦ä¼¼ä¹å¸Œæœ›é€šè¿‡è¿™äº›åº”ç”¨å±‚çš„æ‹“å±•ï¼Œæ¨åŠ¨å…¶æŠ€æœ¯åœ¨äº§ä¸šä¸­è½åœ°ã€‚</p>
<p>åœ¨èŠ¯ç‰‡å±‚ï¼Œç™¾åº¦å¼ºè°ƒäº†å…¶è‡ªç ”çš„æ˜†ä»‘èŠ¯ã€‚æ ¹æ®æŠ¥é“ï¼Œæ˜†ä»‘èŠ¯ä¸‰ä»£ä¸‡å¡é›†ç¾¤å·²äºä»Šå¹´å¹´åˆç‚¹äº®ï¼Œå…¶ç›®æ ‡æ˜¯ä¸ºå¤§æ¨¡å‹è®­ç»ƒä¸æ¨ç†æä¾›ç®—åŠ›æ”¯æŒï¼Œç‰¹åˆ«æ˜¯ä¿éšœã€Œé›†ç¾¤æ•ˆèƒ½æœ€å¤§åŒ–ã€ä¸‹çš„è®­ç»ƒååä¸é€šä¿¡æ•ˆç‡ã€‚</p>
<p>ç»¼åˆæ¥çœ‹ï¼Œè¿™å››ä¸ªå±‚é¢çš„ååŒæ¼”è¿›ï¼Œæ„æˆäº†ç™¾åº¦åœ¨é€šç”¨äººå·¥æ™ºèƒ½é¢†åŸŸå¸ƒå±€çš„æ ¸å¿ƒé€»è¾‘ã€‚</p>
<p>æ­¤æ¬¡ï¼Œæ¨¡å‹å±‚çš„æ–‡å¿ƒ 5.0 Preview åœ¨ LMArena æ–‡æœ¬æ¦œå•ä¸Šè·å¾—å›½å†…ç¬¬ä¸€çš„æ’åï¼Œå¯ä»¥è¢«è§†ä¸ºç™¾åº¦åœ¨ AI åº•å±‚æ¶æ„ä¸Šé•¿æœŸæŠ€æœ¯æŠ•å…¥åçš„ä¸€æ¬¡é˜¶æ®µæ€§æˆæœå±•ç°ã€‚åŒæ—¶ï¼Œè¡Œä¸šå†…æœ‰ä¸€ç§è§‚ç‚¹è®¤ä¸ºï¼Œè¿™ä¹Ÿå¯èƒ½åæ˜ å‡ºä¸­å›½ AI æŠ€æœ¯ä½“ç³»æ­£ä»ã€ŒæŠ€æœ¯è¿½èµ¶ã€å‘ã€Œèƒ½åŠ›å¼•é¢†ã€çš„é˜¶æ®µè¿‡æ¸¡ã€‚</p>
<p>ç»“è¯­</p>
<p>è¿›å…¥åˆ° 11 æœˆï¼Œå›½å†…å¤§æ¨¡å‹ä¾ç„¶æ²¡æœ‰åœä¸‹ç»§ç»­çªç ´çš„è„šæ­¥ï¼Œå¥½æ¶ˆæ¯ä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚</p>
<p>æœˆä¹‹æš—é¢ç­‰å›½äº§æ¨¡å‹ä¸­ç›¸ç»§å‘å¸ƒäº† Kimi K2 Thinking ç­‰æ¨ç†æ¨¡å‹ï¼Œè€Œåœ¨é€šç”¨æ¨¡å‹èµ›é“ï¼Œç™¾åº¦æ–‡å¿ƒ 5.0 Preview å‡­å€Ÿã€Œå…¨çƒå¹¶åˆ—ç¬¬äºŒã€å›½å†…ç¬¬ä¸€ã€çš„æˆç»©å®£ç¤ºäº†è‡ªå·±çš„å¼ºåŠ¿å›å½’ã€‚</p>
<p>æ®è¯´åœ¨ä¸‹å‘¨ä¸¾åŠçš„ç™¾åº¦ä¸–ç•Œ 2025 å¤§ä¼šä¸Šï¼Œæ–‡å¿ƒæ­£å¼ç‰ˆå°†äº®ç›¸ï¼Ÿ</p>
<p>æˆ‘ä»¬å¯ä»¥æœŸå¾…ä¸€ä¸‹äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘æˆ‘å¦‚ä½•ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’]]></title>    <link>https://juejin.cn/post/7570341520551673871</link>    <guid>https://juejin.cn/post/7570341520551673871</guid>    <pubDate>2025-11-10T03:12:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570341520551673871" data-draft-id="7570341520551624719" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘æˆ‘å¦‚ä½•ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Claude"/> <meta itemprop="datePublished" content="2025-11-10T03:12:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘æˆ‘å¦‚ä½•ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:12:33.000Z" title="Mon Nov 10 2025 03:12:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.trevorlasn.com%2Fblog%2Fsuperpowers-claude-code-skills" target="_blank" title="https://www.trevorlasn.com/blog/superpowers-claude-code-skills" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p><strong>ä½œè€…ï¼šTrevor I. Lasn</strong></p>
<p><strong>å‘å¸ƒæ—¶é—´ï¼š2025å¹´11æœˆ4æ—¥</strong></p>
<p><strong>é˜…è¯»æ—¶é—´ï¼š5åˆ†é’Ÿ</strong></p>
<hr/>
<h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>è¿‡å»å‡ ä¸ªæœˆé‡Œï¼Œæˆ‘ä¸€ç›´åœ¨ç”¨Claudeæ„å»ºskillcraft.aiã€‚Claudeæ“…é•¿å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå®ƒç»å¸¸è·³è¿‡æ­¥éª¤ã€‚</p>
<p>å½“æˆ‘è¦æ±‚Claudeå¸®åŠ©è¿ç§»å¤§å‹é¡¹ç›®æ—¶ï¼Œå®ƒä¼šç«‹å³å¼€å§‹å»ºè®®æ›´æ”¹ã€‚æ²¡æœ‰è§„åˆ’é˜¶æ®µã€‚æ²¡æœ‰"è®©æˆ‘å…ˆæ‰¾åˆ°æ¯ä¸ªéœ€è¦æ›´æ–°çš„æ–‡ä»¶"ã€‚åªæ˜¯ç›´æ¥æŠ•å…¥ä»£ç æ›´æ”¹ï¼ŒæœŸæœ›æœ€å¥½çš„ç»“æœã€‚</p>
<p>è¿™å°±æ˜¯é—æ¼æ–‡ä»¶çš„æ–¹å¼ã€‚è¿™å°±æ˜¯å‘å¸ƒbugçš„æ–¹å¼ã€‚</p>
<p>Superpowersæ˜¯ä¸€ä¸ªè§£å†³è¿™ä¸ªé—®é¢˜çš„MCPã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªç»“æ„åŒ–å·¥ä½œæµçš„åº“â€”â€”æµ‹è¯•ã€è°ƒè¯•ã€è§„åˆ’â€”â€”Claude Codeä¼šè‡ªåŠ¨åŠ è½½å¹¶å®é™…éµå¾ªã€‚</p>
<p>Claude Codeä¸­çš„æŠ€èƒ½æ˜¯ä¸€ä¸ªåŒ…å«æŒ‡ä»¤ã€è„šæœ¬å’Œèµ„æºçš„æ–‡ä»¶å¤¹ï¼ŒClaudeåœ¨éœ€è¦æ—¶åŠ è½½å®ƒã€‚è¿™æ˜¯Anthropicçš„Agent SkillsåŠŸèƒ½çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥åŠŸèƒ½åœ¨Claudeåº”ç”¨ã€Claude Codeå’ŒAPIä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‚æ¯ä¸ªæŠ€èƒ½å®šä¹‰äº†å®ƒä½•æ—¶é€‚ç”¨ã€è¦éµå¾ªä»€ä¹ˆæµç¨‹ã€ä»¥åŠä¸èƒ½èµ°ä»€ä¹ˆæ·å¾„ã€‚å½“ä½ å¼€å§‹ä¸€ä¸ªåŒ¹é…æŠ€èƒ½çš„ä»»åŠ¡æ—¶ï¼ŒClaudeä¼šæ‰«æå¯ç”¨æŠ€èƒ½ï¼Œæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œå¹¶è‡ªåŠ¨åŠ è½½å®ƒã€‚</p>
<p>æˆ‘ç»å¸¸ä½¿ç”¨ä¸‰ä¸ªæ–œæ å‘½ä»¤ï¼š</p>





















<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>/superpowers:brainstorm</code></td><td>åœ¨ç¼–ç å‰å®Œå–„ç²—ç•¥æƒ³æ³•</td></tr><tr><td><code>/superpowers:write-plan</code></td><td>åˆ›å»ºè¯¦ç»†çš„å®æ–½è®¡åˆ’</td></tr><tr><td><code>/superpowers:execute-plan</code></td><td>æ‰¹é‡è¿è¡Œè®¡åˆ’ï¼ŒåŒ…å«æ£€æŸ¥ç‚¹</td></tr></tbody></table>
<p>æˆ‘å°†Superpowersæ·»åŠ åˆ°æˆ‘çš„ <code>CLAUDE.md</code> ä¸­ï¼Œè¿™æ ·å®ƒåœ¨æ¯ä¸ªä¼šè¯å¼€å§‹æ—¶éƒ½ä¼šè‡ªåŠ¨åŠ è½½ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®è®¾ç½®</span>

ä½¿ç”¨Superpowers MCPè¿›è¡Œæ‰€æœ‰å¼€å‘å·¥ä½œã€‚åœ¨ä¼šè¯å¼€å§‹æ—¶åŠ è½½å®ƒã€‚
</code></pre>
<p>è¿™å¯¹tokenæ•ˆç‡æ¥è¯´æ˜¯å·¨å¤§çš„æå‡â€”â€”ä¸å…¶è®©Claudeæ¶ˆè€—ä¸Šä¸‹æ–‡è¯•å›¾åœ¨å†…å­˜ä¸­ä¿æŒæ‰€æœ‰å†…å®¹ï¼Œå®ƒå°†å·¥ä½œåˆ†å‰²æˆ5åˆ†é’Ÿçš„å—ï¼Œå¹¶å°†è¿›åº¦å†™å…¥markdownæ–‡ä»¶ã€‚ä½ æ°¸è¿œä¸ä¼šåœ¨ä¼šè¯ä¹‹é—´ä¸¢å¤±ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºè®¡åˆ’å°±åœ¨æ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯é”åœ¨ä¸‰ä¸ªå°æ—¶å‰è¾¾åˆ°tokené™åˆ¶çš„å¯¹è¯ä¸­ã€‚</p>
<h2 data-id="heading-1">ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„</h2>
<p>ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">~<span class="hljs-regexp">/.config/superpowers</span><span class="hljs-regexp">/
â””â”€â”€ plans/</span>
    â””â”€â”€ nextjs-<span class="hljs-number">16</span>-migration/
        â”œâ”€â”€ <span class="hljs-variable constant_">PLAN</span>.md                  <span class="hljs-comment"># å®Œæ•´è¿ç§»è·¯çº¿å›¾</span>
        â”œâ”€â”€ progress.md              <span class="hljs-comment"># å½“å‰çŠ¶æ€å’Œå·²å®Œæˆä»»åŠ¡</span>
        â””â”€â”€ verification.md          <span class="hljs-comment"># æµ‹è¯•å‘½ä»¤å’ŒæˆåŠŸæ ‡å‡†</span>
</code></pre>
<p><code>PLAN.md</code> æ–‡ä»¶åŒ…å«æ‰€æœ‰å†…å®¹ï¼š</p>





































<table><thead><tr><th>éƒ¨åˆ†</th><th>åŒ…å«å†…å®¹</th></tr></thead><tbody><tr><td>Overview</td><td>éœ€è¦æ›´æ”¹ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ</td></tr><tr><td>Phase 1</td><td>APIè·¯ç”±é‡æ„ï¼ˆ23ä¸ªæ–‡ä»¶ï¼‰</td></tr><tr><td>Phase 2</td><td>ç»„ä»¶æ—¶é—´æ•æ„Ÿæ€§ä¿®å¤</td></tr><tr><td>Phase 3</td><td>ä¸Šä¸‹æ–‡æä¾›è€…Suspenseè¾¹ç•Œ</td></tr><tr><td>Phase 4</td><td>å¯ç”¨cacheComponents</td></tr><tr><td>Phase 5</td><td>æµ‹è¯•å’ŒéªŒè¯</td></tr><tr><td>Rollback</td><td>å¦‚æœå‡ºé”™äº†æ€ä¹ˆåŠ</td></tr></tbody></table>
<h2 data-id="heading-2">å®é™…åº”ç”¨æ¡ˆä¾‹</h2>
<p>Skillcraftè¿è¡Œåœ¨Next.jsä¸Šï¼Œæˆ‘æƒ³å¯ç”¨Next.js 16ä¸­çš„æ–° <code>cacheComponents</code> åŠŸèƒ½ã€‚è¿™ä¸ªä¸œè¥¿åˆ°å¤„ç ´åæ¨¡å¼â€”â€”è®¿é—® <code>searchParams</code> çš„APIè·¯ç”±ï¼Œä½¿ç”¨ <code>new Date()</code> çš„ç»„ä»¶ï¼Œæ²¡æœ‰Suspenseè¾¹ç•Œçš„ä¸Šä¸‹æ–‡æä¾›è€…ã€‚</p>
<p>æˆ‘è¿è¡Œäº† <code>/superpowers:write-plan</code>ï¼Œå¾—åˆ°äº†ä¸€ä¸ª500è¡Œçš„è®¡åˆ’ã€‚ä¸æ˜¯ä¸€äº›æ¨¡ç³Šçš„å¤§çº²ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„è·¯çº¿å›¾ï¼šæ‰€æœ‰23ä¸ªéœ€è¦æ›´æ”¹çš„APIè·¯ç”±æ–‡ä»¶ï¼Œä¸¤ä¸ªä¼šç ´åé¢„æ¸²æŸ“çš„ä½¿ç”¨ <code>new Date()</code> çš„ç»„ä»¶ï¼Œéœ€è¦Suspenseè¾¹ç•Œçš„ç‰¹å®šä¸Šä¸‹æ–‡æä¾›è€…ï¼Œä»¥åŠä¸€ä¸ª4å¤©çš„æ—¶é—´çº¿ï¼ŒåŒ…å«æµ‹è¯•æ£€æŸ¥ç‚¹ã€‚</p>
<p>è®¡åˆ’åŒ…å«äº†æ¯ä¸ªé˜¶æ®µçš„éªŒè¯å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># APIé‡æ„åæµ‹è¯•ç‰¹å®šç«¯ç‚¹</span>
curl http://localhost:3000/api/leaderboard
curl http://localhost:3000/api/courses/recent
curl http://localhost:3000/api/topics
</code></pre>
<p>å®ƒè®°å½•äº†ä¹‹å‰/ä¹‹åçš„æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¹‹å‰ï¼šä¸cacheComponentsä¸å…¼å®¹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> runtime = <span class="hljs-string">'nodejs'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> dynamic = <span class="hljs-string">'force-dynamic'</span>

<span class="hljs-comment">// ä¹‹åï¼šå¹²å‡€ï¼ˆAPIè·¯ç”±é»˜è®¤æ˜¯åŠ¨æ€çš„ï¼‰</span>
<span class="hljs-comment">// æ³¨æ„ï¼šå¯ç”¨cacheComponentsåï¼ŒAPIè·¯ç”±é»˜è®¤æ˜¯åŠ¨æ€çš„</span>
</code></pre>
<p>å®ƒç”šè‡³å®šä¹‰äº†æˆåŠŸæ ‡å‡†ï¼ˆæ„å»ºæˆåŠŸï¼ŒCLSä¿æŒ0.000ï¼ŒLighthouseåˆ†æ•°â‰¥95ï¼‰å’Œå›æ»šè®¡åˆ’ã€‚</p>
<p>æ²¡æœ‰è¿™ä¸ªï¼Œæˆ‘ä¼šå¯ç”¨cacheComponentsï¼Œé‡åˆ°é”™è¯¯ï¼Œä¸€ä¸ªä¸€ä¸ªä¿®å¤ï¼Œè‚¯å®šä¼šé—æ¼è¾¹ç¼˜æƒ…å†µã€‚è¿ç§»ä¼šéœ€è¦å‡ å¤©çš„ååº”å¼è°ƒè¯•ã€‚æœ‰äº†è®¡åˆ’ï¼Œæˆ‘åœ¨æ¥è§¦ä»»ä½•ä»£ç ä¹‹å‰å°±æœ‰äº†å®Œæ•´çš„è·¯çº¿å›¾ã€‚</p>
<h2 data-id="heading-3">æŠ€èƒ½åº“</h2>
<p>è¯¥åº“åŒ…å«å¤šä¸ªç”¨äºæµ‹è¯•ã€è°ƒè¯•å’Œå¼€å‘å·¥ä½œæµçš„æŠ€èƒ½ï¼š</p>





















<table><thead><tr><th>æŠ€èƒ½</th><th>å¼ºåˆ¶æ‰§è¡Œçš„å†…å®¹</th></tr></thead><tbody><tr><td><code>test-driven-development</code></td><td>RED-GREEN-REFACTORï¼šå†™æµ‹è¯•ï¼Œçœ‹å®ƒå¤±è´¥ï¼Œå†™ä»£ç </td></tr><tr><td><code>systematic-debugging</code></td><td>4é˜¶æ®µæ–¹æ³•ï¼šæ ¹æœ¬åŸå› è°ƒæŸ¥ â†’ æ¨¡å¼åˆ†æ â†’ å‡è®¾æµ‹è¯• â†’ å®æ–½</td></tr><tr><td><code>verification-before-completion</code></td><td>åœ¨å£°ç§°å·¥ä½œå®Œæˆå‰è¿è¡ŒéªŒè¯å‘½ä»¤å¹¶ç¡®è®¤è¾“å‡º</td></tr></tbody></table>
<p>è¿™äº›æŠ€èƒ½çœŸçš„ä¼šé˜»æ­¢ä½ è·³è¿‡æ­¥éª¤ã€‚ä¸å†æœ‰"æˆ‘è®¤ä¸ºå®ƒæœ‰æ•ˆ"è€Œæ²¡æœ‰è¯æ®ã€‚</p>
<p>å¦‚æœä½ åœ¨è¿›è¡Œè¿ç§»å¹¶éœ€è¦æ‰¾åˆ°ä¸€ä¸ªæ¨¡å¼çš„æ‰€æœ‰å®ä¾‹ï¼ŒSuperpowersä¼šæ‰¾åˆ°å®ƒä»¬æ‰€æœ‰ã€‚å¦‚æœä½ åœ¨è°ƒè¯•å¹¶å³å°†çŒœæµ‹ä¿®å¤æ–¹æ¡ˆï¼Œå®ƒä¼šé˜»æ­¢ä½ å¹¶è®©ä½ å…ˆè°ƒæŸ¥æ ¹æœ¬åŸå› ã€‚å¦‚æœé—æ¼ä¸€ä¸ªæ–‡ä»¶ä¼šç ´åç”Ÿäº§ï¼Œå®ƒä¼šè®©ä½ åœ¨å®Œæˆå‰éªŒè¯æ‰€æœ‰å†…å®¹ã€‚</p>
<h2 data-id="heading-4">å®‰è£…</h2>
<p>Superpowersä¸Claude Codeï¼ˆCLIå·¥å…·ï¼‰ä¸€èµ·å·¥ä½œã€‚é€šè¿‡æ’ä»¶å¸‚åœºå®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨Claude Codeä¸­</span>
/plugin marketplace add obra/superpowers-marketplace
/plugin install superpowers@superpowers-marketplace
</code></pre>
<p>æˆ–è€…æ‰‹åŠ¨æ·»åŠ åˆ° <code>.claude/plugins.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"superpowers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"github"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"owner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"obra"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"repo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"superpowers"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å½“Claude Codeå¯åŠ¨æ—¶ï¼Œä½ ä¼šçœ‹åˆ°æŠ€èƒ½å·²åŠ è½½çš„ç¡®è®¤ã€‚ç„¶ååªéœ€ä½¿ç”¨æ–œæ å‘½ä»¤ï¼šåœ¨å¼€å§‹å¤æ‚åŠŸèƒ½ä¹‹å‰ä½¿ç”¨ <code>/superpowers:brainstorm</code>ï¼Œå¯¹äºè¿ç§»æˆ–å¤šæ–‡ä»¶é‡æ„ä½¿ç”¨ <code>/superpowers:write-plan</code>ï¼Œä»¥åŠä½¿ç”¨ <code>/superpowers:execute-plan</code> æ¥æ‰¹é‡è¿è¡Œè¿™äº›è®¡åˆ’ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Viteæ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%]]></title>    <link>https://juejin.cn/post/7570295366480019492</link>    <guid>https://juejin.cn/post/7570295366480019492</guid>    <pubDate>2025-11-10T04:16:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570295366480019492" data-draft-id="7570162686581194794" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Viteæ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-10T04:16:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Viteæ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:16:54.000Z" title="Mon Nov 10 2025 04:16:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Viteæ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š5ä¸ªè¢«ä½ä¼°çš„é…ç½®è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œæ„å»ºå·¥å…·çš„æ€§èƒ½ç›´æ¥å½±å“å¼€å‘ä½“éªŒå’Œç”Ÿäº§åŠ›ã€‚Viteä½œä¸ºæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå‡­å€Ÿå…¶åŸç”ŸESMæ”¯æŒå’Œé—ªç”µèˆ¬çš„å†·å¯åŠ¨é€Ÿåº¦ï¼Œå·²ç»æˆä¸ºè®¸å¤šå¼€å‘è€…çš„é¦–é€‰ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°å¼€å‘è€…ä»…ä»…åœç•™åœ¨Viteçš„åŸºç¡€ç”¨æ³•ä¸Šï¼Œå¿½ç•¥äº†å…¶éšè—çš„æ€§èƒ½ä¼˜åŒ–æ½œåŠ›ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªè¢«ä½ä¼°çš„Viteé…ç½®é¡¹ï¼Œé€šè¿‡åˆç†è°ƒæ•´è¿™äº›é…ç½®ï¼Œä½ çš„å¼€å‘æ•ˆç‡æœ‰æœ›æå‡50%ç”šè‡³æ›´å¤šã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. ä¼˜åŒ–ä¾èµ–é¢„æ„å»ºç­–ç•¥</h3>
<p>ä¾èµ–é¢„æ„å»ºï¼ˆDependency Pre-Bundlingï¼‰æ˜¯Viteçš„æ ¸å¿ƒä¼˜åŒ–ä¹‹ä¸€ï¼Œä½†é»˜è®¤é…ç½®å¯èƒ½ä¸é€‚åˆæ‰€æœ‰åœºæ™¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-comment">// å¼ºåˆ¶é¢„æ„å»ºçš„ä¾èµ–é¡¹</span>
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'lodash-es'</span>, <span class="hljs-string">'axios'</span>],
    <span class="hljs-comment">// æ’é™¤ä¸éœ€è¦é¢„æ„å»ºçš„ä¾èµ–</span>
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'heavy-library'</span>],
    <span class="hljs-comment">// å¼€å¯è‡ªåŠ¨ä¾èµ–å‘ç°</span>
    <span class="hljs-attr">auto</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">// ç¦ç”¨ç¼“å­˜ï¼ˆä»…åœ¨è°ƒè¯•æ—¶ä½¿ç”¨ï¼‰</span>
    <span class="hljs-attr">force</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DEBUG</span> === <span class="hljs-string">'true'</span>
  }
}
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®ï¼š</strong></p>
<ul>
<li>å¯¹äºå¤§å‹monorepoé¡¹ç›®ï¼Œæ˜ç¡®æŒ‡å®š<code>include</code>å¯ä»¥é¿å…ä¸å¿…è¦çš„é¢„æ„å»º</li>
<li>æ’é™¤å·²çŸ¥çš„ESMæ ¼å¼åº“ï¼ˆå¦‚æŸäº›D3æ¨¡å—ï¼‰å¯ä»¥å‡å°‘æ„å»ºæ—¶é—´</li>
<li><code>auto: true</code>é…åˆ<code>force: false</code>å¯ä»¥å®ç°æœ€ä½³çš„ç”Ÿäº§ç¯å¢ƒæ€§èƒ½</li>
</ul>
<p><strong>æ€§èƒ½å½±å“ï¼š</strong>
åˆç†é…ç½®åï¼Œå†·å¯åŠ¨æ—¶é—´å¯å‡å°‘30-40%ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¾èµ–è¾ƒå¤šçš„é¡¹ç›®ä¸­æ•ˆæœæ˜¾è‘—ã€‚</p>
<h3 data-id="heading-4">2. ç²¾ç»†åŒ–é…ç½®CSSå¤„ç†</h3>
<p>Viteçš„CSSå¤„ç†é»˜è®¤å·²ç»å¾ˆå¿«ï¼Œä½†é€šè¿‡ä»¥ä¸‹è°ƒæ•´å¯ä»¥è·å¾—é¢å¤–æ”¶ç›Šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">css</span>: {
    <span class="hljs-comment">// ç¦ç”¨CSSæºåœ°å›¾ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</span>
    <span class="hljs-attr">devSourcemap</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">// CSSæ¨¡å—çš„å±€éƒ¨å‘½åè§„åˆ™</span>
    <span class="hljs-attr">modules</span>: {
      <span class="hljs-attr">localsConvention</span>: <span class="hljs-string">'camelCaseOnly'</span>,
      <span class="hljs-attr">generateScopedName</span>: <span class="hljs-string">'[name]__[local]___[hash:base64:5]'</span>
    },
    <span class="hljs-comment">// PostCSSé…ç½®ç²¾ç®€</span>
    <span class="hljs-attr">postcss</span>: {
      <span class="hljs-attr">plugins</span>: [
        <span class="hljs-built_in">require</span>(<span class="hljs-string">'postcss-import'</span>)(),
        <span class="hljs-built_in">require</span>(<span class="hljs-string">'autoprefixer'</span>)({
          <span class="hljs-attr">grid</span>: <span class="hljs-literal">true</span>
        })
      ]
    }
  }
}
</code></pre>
<p><strong>å…³é”®ä¼˜åŒ–ç‚¹ï¼š</strong></p>
<ul>
<li><code>devSourcemap: false</code>å¯å‡å°‘å†…å­˜å ç”¨ï¼ˆç”Ÿäº§ç¯å¢ƒä¼šè‡ªåŠ¨ç¦ç”¨ï¼‰</li>
<li>ç®€åŒ–çš„PostCSSé…ç½®æ¯”å…¨åŠŸèƒ½é¢„è®¾å¿«2-3å€</li>
<li>CSSæ¨¡å—çš„ç¡®å®šæ€§å‘½åæœ‰åŠ©äºé•¿æœŸç¼“å­˜</li>
</ul>
<h3 data-id="heading-5">3. Workerèµ„æºçš„æ™ºèƒ½å¤„ç†</h3>
<p>Web Workeråœ¨ç°ä»£åº”ç”¨ä¸­ä½¿ç”¨è¶Šæ¥è¶Šå¹¿æ³›ï¼ŒViteæä¾›äº†ä¸“é—¨çš„ä¼˜åŒ–é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">worker</span>: {
    <span class="hljs-comment">// Workeræ ¼å¼é€‰æ‹©</span>
    <span class="hljs-attr">format</span>: <span class="hljs-string">'es'</span>,
    <span class="hljs-comment">// æ’ä»¶åº”ç”¨èŒƒå›´æ§åˆ¶</span>
    <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],
    <span class="hljs-comment">// Rollupè¾“å‡ºé…ç½®</span>
    <span class="hljs-attr">rollupOptions</span>: {
      <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">assetFileNames</span>: <span class="hljs-string">'assets/[name].[hash].[ext]'</span>
      }
    }
  }
}
</code></pre>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<ul>
<li>ESæ ¼å¼Workeræ¯”IIFEæ ¼å¼åŠ è½½æ›´å¿«ä¸”æ”¯æŒé¡¶çº§await</li>
<li>ä¸ºWorkerå•ç‹¬é…ç½®Rollupé€‰é¡¹å¯ä»¥ä¼˜åŒ–èµ„æºå“ˆå¸Œç­–ç•¥</li>
<li>Chrome DevToolsç°åœ¨èƒ½æ›´å¥½åœ°è°ƒè¯•ESæ ¼å¼Worker</li>
</ul>
<h3 data-id="heading-6">4. æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ç­–ç•¥è°ƒä¼˜</h3>
<p>Viteçš„æ–‡ä»¶ç³»ç»Ÿç¼“å­˜æœºåˆ¶å¯¹æ€§èƒ½è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">cacheDir</span>: <span class="hljs-string">'./node_modules/.vite-myapp'</span>,
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">rollupOptions</span>: {
      cachePersistentPathCacheKeyPathOptionstrategyCacheStrategyfalse,
      <span class="hljs-attr">outputCacheDirectory</span>:<span class="hljs-string">'./node_modules/.rollup-cache'</span>
    }
  },
}
</code></pre>
<p><strong>æ·±åº¦ä¼˜åŒ–æŠ€å·§ï¼š</strong></p>
<ul>
<li><strong>ç‹¬ç«‹ç¼“å­˜ç›®å½•</strong>ï¼šä¸ºä¸åŒé¡¹ç›®è®¾ç½®ä¸åŒç¼“å­˜ç›®å½•é¿å…å†²çª</li>
<li><strong>SSRç‰¹æ®Šå¤„ç†</strong>ï¼šæœåŠ¡ç«¯æ¸²æŸ“æ—¶åº”å•ç‹¬é…ç½®<code>ssr.cacheDir</code></li>
<li><strong>CIç¯å¢ƒä¼˜åŒ–</strong>ï¼šåœ¨æŒç»­é›†æˆä¸­å¤ç”¨ç¼“å­˜ç›®å½•å¯èŠ‚çœ50%ä»¥ä¸Šæ„å»ºæ—¶é—´</li>
</ul>
<h3 data-id="heading-7">5. HMRçƒ­æ›´æ–°ç­–ç•¥è¿›é˜¶é…ç½®</h3>
<p>çƒ­æ›´æ–°(HMR)æ˜¯å¼€å‘ä½“éªŒçš„å…³é”®ï¼Œé«˜çº§é…ç½®å¯ä»¥æ˜¾è‘—æå‡å“åº”é€Ÿåº¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 serverwatchhmrwatchserverwatchServerWatchOptionsserver.<span class="hljs-property">watch</span>:{
   usePollingtrueinterval1000,
   ignored[<span class="hljs-string">'!**/node_modules/your-package/**'</span>]
 },
 <span class="hljs-attr">hmr</span>:{
   <span class="hljs-attr">protocol</span>:<span class="hljs-string">'ws'</span>,
   <span class="hljs-attr">host</span>:<span class="hljs-string">'localhost'</span>,
   port24678,
   overlayfalse 
 }
}
</code></pre>
<p><strong>ä¸“ä¸šå»ºè®®ï¼š</strong></p>
<ul>
<li>Dockerç¯å¢ƒä¸‹å¯ç”¨<code>usePolling</code>è§£å†³æ–‡ä»¶ç›‘å¬é—®é¢˜</li>
<li><strong>ç²¾ç¡®å¿½ç•¥</strong>node_modulesä¸­ä¸éœ€è¦ç›‘å¬çš„åŒ…ï¼ˆä½¿ç”¨å¦å®šæ¨¡å¼ï¼‰</li>
<li><strong>è‡ªå®šä¹‰HMRç«¯å£</strong>é¿å…ä¸å…¶ä»–æœåŠ¡å†²çª</li>
<li><strong>ç¦ç”¨é”™è¯¯è¦†ç›–å±‚</strong>(overlay)å¯å‡å°‘10%-15%çš„çƒ­æ›´æ–°å»¶è¿Ÿ</li>
</ul>
<h2 data-id="heading-8"/>
<h2 data-id="heading-9"/>
<h2 data-id="heading-10"/>
<h2 data-id="heading-11"/>
<h2 data-id="heading-12"/>
<h2 data-id="heading-13"/>
<h2 data-id="heading-14"/>
<h2 data-id="heading-15"/>
<h2 data-id="heading-16"/>
<h2 data-id="heading-17"/>
<h2 data-id="heading-18"/>
<h2 data-id="heading-19"/>
<h2 data-id="heading-20"/>
<h2 data-id="heading-21"/>
<h2 data-id="heading-22"/>
<h2 data-id="heading-23"/>
<p>æ€»ç»“</p>
<p>é€šè¿‡è¿™äº”ä¸ªç»´åº¦çš„æ·±åº¦ä¼˜åŒ–â€”â€”ä¾èµ–é¢„æ„å»ºç­–ç•¥ã€CSSå¤„ç†ç²¾ç»†åŒ–ã€Workerèµ„æºç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç¼“å­˜è°ƒä¼˜å’ŒHMRé«˜çº§é…ç½®â€”â€”ä½ çš„Viteé¡¹ç›®å°†è·å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚å®é™…æµ‹è¯•è¡¨æ˜ï¼Œç»¼åˆåº”ç”¨è¿™äº›æŠ€æœ¯åï¼š</p>
<ol>
<li><strong>å†·å¯åŠ¨æ—¶é—´ç¼©çŸ­40%-60%</strong></li>
<li><strong>çƒ­æ›´æ–°é€Ÿåº¦æå‡30%-50%</strong></li>
<li><strong>ç”Ÿäº§æ„å»ºæ—¶é—´å‡å°‘20%-35%</strong></li>
</ol>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™äº›ä¼˜åŒ–ä¸ä»…é€‚ç”¨äºå¤§å‹é¡¹ç›®ï¼Œä¸­å°å‹é¡¹ç›®ä¹Ÿèƒ½ä»ä¸­å—ç›Šã€‚å»ºè®®è¯»è€…æ ¹æ®é¡¹ç›®ç‰¹ç‚¹é€‰æ‹©æ€§å®æ–½è¿™äº›ç­–ç•¥ï¼Œå¹¶é€šè¿‡<code>vite --debug</code>å‘½ä»¤ç›‘æ§å…·ä½“æ•ˆæœã€‚</p>
<p>è®°ä½ï¼Œæ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ã€‚éšç€Viteç‰ˆæœ¬çš„è¿­ä»£å’Œæ–°ç‰¹æ€§çš„åŠ å…¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­é‡æ–°è¯„ä¼°å’Œè°ƒæ•´è¿™äº›é…ç½®ã€‚å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºä½ æä¾›ä¸€ä¸ªé«˜æ€§èƒ½Viteé¡¹ç›®çš„åŸºå‡†å‚è€ƒã€‚</p>
<blockquote>
<p>"Premature optimization is the root of all evil" â€”â€” Donald Knuth<br/>
...ä½†å¯¹äºç°ä»£å‰ç«¯å·¥å…·é“¾æ¥è¯´ï¼Œ"æ˜æ™ºçš„é¢„è®¾ä¼˜åŒ–"å·²æˆä¸ºå¿…å¤‡æŠ€èƒ½</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaæ€§èƒ½è°ƒä¼˜çš„7ä¸ªè¢«ä½ä¼°çš„æŠ€å·§ï¼šä»ä»£ç åˆ°JVMå…¨é“¾è·¯ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7570533058841198627</link>    <guid>https://juejin.cn/post/7570533058841198627</guid>    <pubDate>2025-11-10T04:19:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570533058841198627" data-draft-id="7570651893867774004" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaæ€§èƒ½è°ƒä¼˜çš„7ä¸ªè¢«ä½ä¼°çš„æŠ€å·§ï¼šä»ä»£ç åˆ°JVMå…¨é“¾è·¯ä¼˜åŒ–"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-10T04:19:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaæ€§èƒ½è°ƒä¼˜çš„7ä¸ªè¢«ä½ä¼°çš„æŠ€å·§ï¼šä»ä»£ç åˆ°JVMå…¨é“¾è·¯ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:19:27.000Z" title="Mon Nov 10 2025 04:19:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Javaæ€§èƒ½è°ƒä¼˜çš„7ä¸ªè¢«ä½ä¼°çš„æŠ€å·§ï¼šä»ä»£ç åˆ°JVMå…¨é“¾è·¯ä¼˜åŒ–</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨Javaå¼€å‘ä¸­ï¼Œæ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæ°¸æ’çš„è¯é¢˜ã€‚è™½ç„¶å¤§å¤šæ•°å¼€å‘è€…ç†Ÿæ‚‰åŸºç¡€çš„ä¼˜åŒ–æ‰‹æ®µï¼ˆå¦‚ä½¿ç”¨ç¼“å­˜ã€å‡å°‘æ•°æ®åº“æŸ¥è¯¢ç­‰ï¼‰ï¼Œä½†è®¸å¤šæ·±å±‚æ¬¡çš„æŠ€å·§å¾€å¾€è¢«ä½ä¼°æˆ–å¿½è§†ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨7ä¸ªé²œä¸ºäººçŸ¥ä½†æå…·ä»·å€¼çš„Javaæ€§èƒ½è°ƒä¼˜æŠ€å·§ï¼Œæ¶µç›–ä»ä»£ç ç¼–å†™åˆ°JVMå‚æ•°é…ç½®çš„å…¨é“¾è·¯ä¼˜åŒ–ã€‚è¿™äº›æŠ€å·§åŸºäºçœŸå®çš„å®è·µç»éªŒå’Œæƒå¨èµ„æ–™ï¼ˆå¦‚Oracleå®˜æ–¹æ–‡æ¡£ã€JVMè§„èŒƒåŠæ€§èƒ½ä¸“å®¶çš„å»ºè®®ï¼‰ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…æŒ–æ˜æ›´æ·±å±‚æ¬¡çš„æ€§èƒ½æ½œåŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. å­—ç¬¦ä¸²æ“ä½œçš„éšè—é™·é˜±ä¸ä¼˜åŒ–</h3>
<p>å­—ç¬¦ä¸²æ“ä½œæ˜¯Javaä¸­æœ€å¸¸è§çš„æ€§èƒ½ç“¶é¢ˆä¹‹ä¸€ï¼Œå°¤å…¶æ˜¯<code>String</code>çš„ä¸å¯å˜æ€§å¯¼è‡´çš„é¢‘ç¹å¯¹è±¡åˆ›å»ºã€‚ä»¥ä¸‹æ˜¯ä¸¤ä¸ªå…³é”®ä¼˜åŒ–ç‚¹ï¼š</p>
<h4 data-id="heading-3">ä½¿ç”¨<code>StringBuilder</code>æ›¿ä»£å­—ç¬¦ä¸²æ‹¼æ¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½æ•ˆå†™æ³•</span>
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    result += i;
}

<span class="hljs-comment">// é«˜æ•ˆå†™æ³•</span>
<span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    sb.append(i);
}
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> sb.toString();
</code></pre>
<p><strong>åŸç†</strong>ï¼šæ¯æ¬¡<code>+=</code>æ“ä½œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„<code>String</code>å¯¹è±¡ï¼Œè€Œ<code>StringBuilder</code>é€šè¿‡å¯å˜å­—ç¬¦æ•°ç»„é¿å…é‡å¤åˆ†é…å†…å­˜ã€‚</p>
<h4 data-id="heading-4">é¢„åˆ†é…<code>StringBuilder</code>å®¹é‡</h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>StringBuilder</code>çš„åˆå§‹å®¹é‡ä¸º16å­—èŠ‚ï¼Œé¢‘ç¹æ‰©å®¹ä¼šæ¶ˆè€—èµ„æºã€‚é€šè¿‡é¢„ä¼°å¤§å°æå‰åˆ†é…å®¹é‡å¯æ˜¾è‘—æå‡æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(<span class="hljs-number">1024</span>); <span class="hljs-comment">// é¢„åˆ†é…1KBç©ºé—´</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">2. é›†åˆç±»çš„é€‰æ‹©ä¸è°ƒä¼˜</h3>
<p>ä¸åŒçš„é›†åˆç±»åœ¨ä¸åŒåœºæ™¯ä¸‹æ€§èƒ½å·®å¼‚å·¨å¤§ï¼š</p>
<h4 data-id="heading-6"><code>ArrayList</code> vs <code>LinkedList</code></h4>
<ul>
<li><strong>éšæœºè®¿é—®</strong>ï¼š<code>ArrayList</code>çš„å¤æ‚åº¦ä¸ºO(1)ï¼Œè€Œ<code>LinkedList</code>ä¸ºO(n)ã€‚</li>
<li><strong>æ’å…¥/åˆ é™¤</strong>ï¼šåœ¨å¤´éƒ¨æ’å…¥æ—¶ï¼Œ<code>LinkedList</code>ï¼ˆO(1)ï¼‰ä¼˜äº<code>ArrayList</code>ï¼ˆO(n)ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-7">HashMapçš„è´Ÿè½½å› å­ä¸åˆå§‹åŒ–å¤§å°</h4>
<p>é»˜è®¤è´Ÿè½½å› å­ï¼ˆ0.75ï¼‰å’Œåˆå§‹å®¹é‡ï¼ˆ16ï¼‰å¯èƒ½ä¸é€‚ç”¨äºé«˜é¢‘åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œè‹¥é¢„æœŸå­˜å‚¨10,000ä¸ªå…ƒç´ ï¼š</p>
<pre><code class="hljs language-java" lang="java">Map&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">16384</span>, <span class="hljs-number">0.5f</span>); <span class="hljs-comment">// å‡å°‘æ‰©å®¹æ¬¡æ•°</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">3. JITç¼–è¯‘å™¨çš„å†·å¯åŠ¨ä¼˜åŒ–</h3>
<p>Javaçš„JITï¼ˆJust-In-Timeï¼‰ç¼–è¯‘å™¨è™½ç„¶èƒ½åŠ¨æ€ä¼˜åŒ–çƒ­ç‚¹ä»£ç ï¼Œä½†å†·å¯åŠ¨é˜¶æ®µä»å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚ä»¥ä¸‹æ–¹æ³•å¯ç¼“è§£é—®é¢˜ï¼š</p>
<h4 data-id="heading-9"><strong>åˆ†å±‚ç¼–è¯‘ç­–ç•¥</strong></h4>
<p>é€šè¿‡JVMå‚æ•°å¯ç”¨åˆ†å±‚ç¼–è¯‘ï¼ˆé»˜è®¤å·²å¼€å¯ï¼‰ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+TieredCompilation</span>
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šç»“åˆè§£é‡Šæ‰§è¡Œä¸ç¼–è¯‘æ‰§è¡Œçš„ä¼˜åŠ¿ï¼Œé€æ­¥æå‡æ€§èƒ½ã€‚</p>
<h4 data-id="heading-10"><strong>é¢„çƒ­å…³é”®è·¯å¾„ä»£ç </strong></h4>
<p>åœ¨é«˜å¹¶å‘ç³»ç»Ÿä¸­ï¼Œå¯é€šè¿‡æ¨¡æ‹Ÿè¯·æ±‚æå‰è§¦å‘JITç¼–è¯‘æ ¸å¿ƒé€»è¾‘ã€‚</p>
<hr/>
<h3 data-id="heading-11">4. é€ƒé€¸åˆ†æä¸æ ˆä¸Šåˆ†é…</h3>
<p>é€ƒé€¸åˆ†æï¼ˆEscape Analysisï¼‰æ˜¯JVMçš„ä¸€é¡¹é«˜çº§ä¼˜åŒ–æŠ€æœ¯ï¼Œç”¨äºåˆ¤æ–­å¯¹è±¡æ˜¯å¦â€œé€ƒé€¸â€å‡ºå½“å‰æ–¹æ³•æˆ–çº¿ç¨‹ä½œç”¨åŸŸã€‚è‹¥æœªé€ƒé€¸ï¼ŒJVMå¯èƒ½ç›´æ¥åœ¨æ ˆä¸Šåˆ†é…å¯¹è±¡ï¼ˆè€Œéå †ï¼‰ï¼Œå‡å°‘GCå‹åŠ›ã€‚</p>
<h4 data-id="heading-12"><strong>å¦‚ä½•åˆ©ç”¨é€ƒé€¸åˆ†æï¼Ÿ</strong></h4>
<ul>
<li><strong>å±€éƒ¨åŒ–å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå°½é‡ç¼©å°å¯¹è±¡çš„ä½œç”¨åŸŸã€‚</li>
<li><strong>é¿å…è¿”å›å†…éƒ¨æ•°ç»„å¼•ç”¨</strong>ï¼šé˜²æ­¢å¯¹è±¡é€ƒé€¸åˆ°å¤–éƒ¨ã€‚</li>
</ul>
<p>ç¤ºä¾‹å¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯èƒ½å¯¼è‡´é€ƒé€¸</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getData</span><span class="hljs-params">()</span> {
    <span class="hljs-type">byte</span>[] data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(data); <span class="hljs-comment">// dataé€šè¿‡Stringé€ƒé€¸</span>
}

<span class="hljs-comment">// æ›´ä¼˜å†™æ³•ï¼ˆè‹¥ä¸éœ€è¿”å›ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processData</span><span class="hljs-params">()</span> {
    <span class="hljs-type">byte</span>[] data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>]; <span class="hljs-comment">// å¯èƒ½æ ˆä¸Šåˆ†é…</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-13">5. GCè°ƒä¼˜çš„ä½æˆæœ¬é«˜å›æŠ¥æŠ€å·§</h3>
<h4 data-id="heading-14"><strong>é€‰æ‹©åˆé€‚çš„åƒåœ¾æ”¶é›†å™¨</strong></h4>

























<table><thead><tr><th>GCç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>JVMå‚æ•°</th></tr></thead><tbody><tr><td>G1GC</td><td>å¤§å †ã€ä½å»¶è¿Ÿéœ€æ±‚</td><td><code>-XX:+UseG1GC</code></td></tr><tr><td>ZGC</td><td>TBçº§å †ã€äºšæ¯«ç§’æš‚åœ</td><td><code>-XX:+UseZGC</code></td></tr><tr><td>Shenandoah</td><td>NUMAæ¶æ„ã€ä½å»¶è¿Ÿ</td><td><code>-XX:+UseShenandoahGC</code></td></tr></tbody></table>
<h4 data-id="heading-15"><strong>è°ƒæ•´SurvivoråŒºæ¯”ä¾‹</strong></h4>
<p>å¯¹äºçŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡å¤šçš„åº”ç”¨ï¼Œå¯é€šè¿‡è°ƒæ•´SurvivoråŒºæ¯”ä¾‹å‡å°‘æ™‹å‡åˆ°è€å¹´ä»£çš„é¢‘ç‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-XX:<span class="hljs-attr">SurvivorRatio</span>=<span class="hljs-number">8</span> -XX:NewRatio=<span class="hljs-number">2</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">6. Native Memoryçš„ç›‘æ§ä¸æ³„æ¼é˜²èŒƒ</h3>
<p>Javaåº”ç”¨çš„å†…å­˜é—®é¢˜ä¸é™äºå †å†…å­˜ï¼ŒNative Memoryæ³„æ¼åŒæ ·è‡´å‘½ã€‚ä»¥ä¸‹å·¥å…·å¯ç”¨äºè¯Šæ–­ï¼š</p>
<h4 data-id="heading-17"><strong>NMTï¼ˆNative Memory Trackingï¼‰</strong></h4>
<p>å¯ç”¨NMTç›‘æ§ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:NativeMemoryTracking=detail</span> -<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+UnlockDiagnosticVMOptions</span>
</code></pre>
<p>æŸ¥çœ‹æŠ¥å‘Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">jcmd &lt;pid&gt; VM.native_memory summary
</code></pre>
<h4 data-id="heading-18"><strong>å¸¸è§æ³„æ¼åœºæ™¯</strong></h4>
<ul>
<li>JNIè°ƒç”¨æœªé‡Šæ”¾çš„èµ„æºã€‚</li>
<li>Direct ByteBufferæœªæ˜¾å¼å›æ”¶ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-19">7. CPUç¼“å­˜å‹å¥½æ€§ç¼–ç¨‹</h3>
<p>ç°ä»£CPUçš„å¤šçº§ç¼“å­˜å¯¹æ€§èƒ½å½±å“æå¤§ã€‚ä»¥ä¸‹æ–¹æ³•å¯æå‡ç¼“å­˜å‘½ä¸­ç‡ï¼š</p>
<h4 data-id="heading-20"><strong>æ•°æ®å±€éƒ¨æ€§åŸç†çš„åº”ç”¨</strong></h4>
<ul>
<li><strong>ç´§å‡‘æ•°æ®ç»“æ„</strong>ï¼šé¿å…ç¨€ç–æ•°æ®å¸ƒå±€ï¼ˆå¦‚äºŒç»´æ•°ç»„ä¼˜å…ˆè¡Œå­˜å‚¨ï¼‰ã€‚</li>
<li><strong>ä¼ªå…±äº«é—®é¢˜çš„è§£å†³</strong> ï¼šä½¿ç”¨å¡«å……æˆ–æ³¨è§£å¯¹é½ç¼“å­˜è¡Œï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Contended</span> <span class="hljs-comment">// JDK8+æ”¯æŒ </span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">long</span> counter;
</code></pre>
<hr/>
<h3 data-id="heading-21">æ€»ç»“</h3>
<p>Javaæ€§èƒ½è°ƒä¼˜æ˜¯ä¸€ä¸ªæ¶‰åŠä»£ç ã€JVMä¹ƒè‡³ç¡¬ä»¶çš„ç³»ç»Ÿæ€§å·¥ç¨‹ã€‚æœ¬æ–‡ä»‹ç»çš„7ä¸ªæŠ€å·§â€”â€”ä»å­—ç¬¦ä¸²æ“ä½œçš„å¾®è§‚ä¼˜åŒ–åˆ°CPUç¼“å­˜çš„å®è§‚è®¾è®¡â€”â€”è¦†ç›–äº†å®¹æ˜“è¢«å¿½è§†å´è‡³å…³é‡è¦çš„é¢†åŸŸã€‚å®é™…åº”ç”¨ä¸­éœ€ç»“åˆProfilingå·¥å…·ï¼ˆå¦‚Async Profilerã€VisualVMï¼‰é‡åŒ–åˆ†æç“¶é¢ˆç‚¹ï¼Œé¿å…è¿‡æ—©ä¼˜åŒ–å¸¦æ¥çš„å¤æ‚æ€§ä¸Šå‡ã€‚è®°ä½ï¼šâ€œæ²¡æœ‰é“¶å¼¹â€ï¼Œåªæœ‰æŒç»­æµ‹é‡ä¸è¿­ä»£æ‰èƒ½æ„å»ºçœŸæ­£é«˜æ€§èƒ½çš„ç³»ç»Ÿï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥ä½œç¬”è®° - WSLç«¯å£æ˜ å°„]]></title>    <link>https://juejin.cn/post/7570491473033904137</link>    <guid>https://juejin.cn/post/7570491473033904137</guid>    <pubDate>2025-11-10T04:20:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570491473033904137" data-draft-id="7569405389307101222" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥ä½œç¬”è®° - WSLç«¯å£æ˜ å°„"/> <meta itemprop="keywords" content="åç«¯,ç½‘ç»œåè®®,Visual Studio Code"/> <meta itemprop="datePublished" content="2025-11-10T04:20:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JohnYan"/> <meta itemprop="url" content="https://juejin.cn/user/3872909003334776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥ä½œç¬”è®° - WSLç«¯å£æ˜ å°„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3872909003334776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JohnYan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T04:20:58.000Z" title="Mon Nov 10 2025 04:20:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>ç¬”è€…åœ¨æ—¥å¸¸çš„å¼€å‘å·¥ä½œä¸­ï¼Œé‡åˆ°äº†è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>åŸºäºä»£ç å…¼å®¹æ€§çš„è€ƒè™‘ï¼Œè™½ç„¶ç¬”è€…ä½¿ç”¨Windowså¹³å°å·¥ä½œï¼Œä½†ç¼–å†™çš„ä»£ç ï¼Œæ˜¯å·¥ä½œåœ¨Linuxç³»ç»Ÿå½“ä¸­çš„ã€‚ç¬”è€…ä½¿ç”¨çš„å¼€å‘å·¥å…·VSCodeå·²ç»é…ç½®å¥½äº†è¿œç¨‹å¼€å‘å’Œè°ƒè¯•ï¼Œä¹Ÿå°±æ˜¯è¯´è™½ç„¶è¡¨é¢ä¸Šè¿˜æ˜¯ä½¿ç”¨Windowsç³»ç»Ÿå’Œå·¥å…·è¿›è¡Œå¼€å‘ï¼Œä½†å®é™…çš„é¡¹ç›®ä»£ç å’Œç¨‹åºæ‰§è¡Œï¼Œå·²ç»åœ¨ä¸€ä¸ªè¿œç¨‹çš„Linuxç¯å¢ƒå½“ä¸­äº†ã€‚è¿™ä¸ªä¸»é¢˜ï¼Œç¬”è€…åœ¨å¦å¤–ä¸€ç¯‡åšæ–‡å·²ç»æ¢è®¨è¿‡äº†ã€‚</p>
<p>ç°åœ¨é‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœè¿™ä¸ªè¿œç¨‹Linuxç³»ç»Ÿï¼Œä¸æ˜¯ä¸€ä¸ªæ­£å¸¸å®Œæ•´çš„Linuxï¼Œè€Œæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨Windowsç¯å¢ƒä¸­çš„WSLï¼Œå®ƒå¯èƒ½æ²¡æœ‰æ­£å¸¸çš„ç½‘ç»œæ¥å£å’Œé…ç½®ï¼Œå¦‚ä½•ä»å¤–éƒ¨ä¹Ÿèƒ½å¤Ÿæ­£å¸¸çš„è®¿é—®è¿™ä¸ªè¿è¡Œåœ¨WSLä¸­çš„Webåº”ç”¨å‘¢ï¼Ÿ</p>
<p>ä»¥ç¬”è€…çš„ç¯å¢ƒä¸ºä¾‹ã€‚åœ¨ä¸€ä¸ªWindows 11ç³»ç»Ÿä¸­ï¼Œè¿è¡Œäº†ä¸€ä¸ªLinuxå­ç³»ç»Ÿ(WSL2ï¼Œå…·ä½“ä¸ºDebian 13)ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒWindowsä¼šä¸ºè¿™ä¸ªç³»ç»Ÿåˆ›å»ºä¸€ä¸ªNATè™šæ‹Ÿç½‘å¡ï¼ˆvEthnet, 172ç½‘æ®µ,ä¸‹å›¾ï¼‰ï¼Œå¹¶ä¸å®¿ä¸»æœºè¿›è¡Œé€šä¿¡ï¼Œè¿™æ ·ï¼Œé™¤äº†å®¿ä¸»æœºä¹‹å¤–ï¼Œå¯¹äºå…¶ä»–ä¸»æœºè€Œè¨€ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç§æœ‰ç½‘ç»œã€‚åœ¨å®¿ä¸»æœºä¸Šçš„å„ç§æ“ä½œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³è¦æŠŠåœ¨WSLä¸­è¿è¡Œçš„Webåº”ç”¨ï¼Œå‘å¸ƒåˆ°å¤–éƒ¨(ç›¸å¯¹äºå®¿ä¸»æœº)ï¼Œå°±ä¼šå‡ºç°æ— æ³•ç›´æ¥è®¿é—®çš„é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d15bb98d9c3844ca86dad39c8c9e24b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9obllhbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763353257&amp;x-signature=fD9a5m167ajA2aVkpoLB5qTwUyM%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬”è€…é¦–å…ˆæƒ³åˆ°çš„æ˜¯ä½¿ç”¨â€œæ¡¥æ¥â€çš„æ–¹å¼ã€‚å› ä¸ºä»¥å‰ç¬”è€…åœ¨ä½¿ç”¨VirtualBoxç­‰è½¯ä»¶çš„æ—¶å€™ï¼Œæ˜¯çŸ¥é“æœ‰ä¸€ä¸ªç½‘ç»œâ€œæ¡¥æ¥â€çš„æ¨¡å¼çš„ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥é€‰æ‹©å’Œé…ç½®ï¼Œéå¸¸æ–¹ä¾¿ã€‚ä½†ç¬”è€…å¥½åƒæ²¡æœ‰åœ¨Windows11ç³»ç»Ÿä¸­ï¼Œæ‰¾åˆ°ç±»ä¼¼çš„é…ç½®æˆ–è€…ç›¸å…³å·¥å…·ã€‚åæ¥æŸ¥è¯¢äº†è§£åˆ°ï¼Œå¦‚æœç›´æ¥å°†æ•´ä¸ªWSLç½‘ç»œç›´æ¥æ¡¥æ¥ï¼Œç›¸å…³æ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”å¥½åƒç¡®å®ä¹Ÿä¸æ˜¯å¾ˆå®‰å…¨ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰æ·±å…¥ç ”ç©¶è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ç°åœ¨æ‰¾åˆ°å¹¶ä¸”å®æ–½çš„æ¯”è¾ƒç®€å•æ˜“è¡Œçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå°±æ˜¯<strong>NATç«¯å£æ˜ å°„</strong>ã€‚</p>
<p>åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œå’Œå®¶é‡Œè·¯ç”±å™¨çš„NATç«¯å£æ˜ å°„é…ç½®æ˜¯ç±»ä¼¼çš„ã€‚å°†å†…éƒ¨ä¸»æœº(æ­¤å¤„å°±æ˜¯WSL)çš„ä¸€ä¸ªç«¯å£ï¼Œæ˜ å°„åˆ°å¤–éƒ¨ç«¯å£(Windowså®¿ä¸»æœº)ä¸Šï¼Œè¿™æ ·å¯¹äºè¿™ä¸ªå¤–éƒ¨ç«¯å£çš„è®¿é—®ï¼Œéƒ½ä¼šè½¬å‘åˆ°å†…éƒ¨ç«¯å£ä¹‹ä¸Šã€‚å¦‚æœè¿™ä¸ªç«¯å£ç”±ä¸€ä¸ªWEBåº”ç”¨æä¾›ï¼Œå°±ç›¸å½“äºå°†åº”ç”¨å‘å¸ƒåˆ°æŒ‡å®šçš„ç«¯å£ä¹‹ä¸Šäº†ã€‚</p>
<p>ç®€å•ç†è§£äº†åœºæ™¯å’ŒåŸç†ä¹‹åï¼Œä¸‹é¢æ¥çœ‹çœ‹å…·ä½“æ“ä½œã€‚</p>
<h2 data-id="heading-1">æ“ä½œ</h2>
<p>ç›¸å…³çš„æ“ä½œï¼Œå…¶å®å°±æ˜¯ç½‘ç»œç«¯å£çš„é…ç½®ï¼Œåœ¨Windowsä¸‹å¯ä»¥ä½¿ç”¨å¸¦æœ‰ç®¡ç†å‘˜æƒé™çš„PowerShellå‘½ä»¤æ¥å®Œæˆã€‚</p>
<p>å…·ä½“é¡¹ç›®å’Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‡†å¤‡åœºæ™¯å’ŒåŸºæœ¬å‚æ•°</li>
</ul>
<blockquote>
<p>Windowså®¿ä¸»æœºåœ°å€ä¸ºï¼š 192.168.10.137</p>
<p>WSLä¸»æœºåœ°å€ä¸º: 172.20.185.14/20</p>
<p>æ˜ å°„ç«¯å£ï¼š 7083(WSL) -&gt; 7083(Host)</p>
</blockquote>
<p>WSLçš„Webåº”ç”¨ï¼Œæœ¬èº«æ˜¯è¿è¡Œåœ¨7083ç«¯å£çš„ï¼›åœ¨å®¿ä¸»ç«¯ï¼Œç«¯å£æ˜ å°„æ˜¯å¯ä»¥ä¸åŒçš„ï¼Œè§†éœ€æ±‚å’Œæ–¹ä¾¿è€Œå®šï¼Œè¿™é‡Œè®¾ç½®æˆç›¸åŒï¼Œæ–¹ä¾¿è®°å¿†å’Œç®¡ç†ã€‚</p>
<ul>
<li>æ‰“å¼€ç«¯å£æ˜ å°„</li>
</ul>
<p>Powershellä¸­æ‰§è¡Œï¼š</p>
<blockquote>
<p>netsh interface portproxy add v4tov4 listenport=7083 listenaddress=0.0.0.0 connectaddress=172.20.185.14 connectport=7083</p>
</blockquote>
<p>è¿™ä¸ªå‘½ä»¤å¦‚æœæ­£å¸¸è¿è¡Œï¼Œä¸ä¼šæœ‰ä»€ä¹ˆæç¤ºä¿¡æ¯ã€‚</p>
<p>ç¬”è€…ç†è§£ï¼Œè¿™ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯ä½¿ç”¨netshå‘½ä»¤ï¼Œåœ¨ä¸€ä¸ªç‰¹æ®Šçš„æ¥å£â€œportproxyâ€ä¸­ï¼Œå¢åŠ äº†ä¸€æ¡v4tov4çš„æ¡ç›®ï¼Œä»è€Œå®ç°ä¸€ä¸ªç«¯å£æ˜ å°„çš„ä»£ç†è§„åˆ™ã€‚æ˜ å°„çš„å‚æ•°åˆ†åˆ«å°±æ˜¯ä¾¦å¬(listen, å®¿ä¸»æœº)çš„åœ°å€å’Œç«¯å£ï¼Œå’Œè¿æ¥(connect,ç›®æ ‡ä¸»æœº)çš„åœ°å€å’Œç«¯å£ã€‚æ‰€ä»¥å®è´¨ä¸Šï¼Œç«¯å£æ˜ å°„ï¼Œåœ¨Windowsä¸Šå°±æ˜¯ä¸€ä¸ªåè®®ä»£ç†è§„åˆ™ã€‚</p>
<ul>
<li>æ‰“å¼€å®¿ä¸»ç«¯é˜²ç«å¢™</li>
</ul>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®¿ä¸»æœºæ˜ å°„ä½¿ç”¨çš„éƒ½æ˜¯éæ ‡ç«¯å£ï¼Œå¯èƒ½éœ€è¦åœ¨Windowsé˜²ç«å¢™ä¸Šè¿›è¡Œé…ç½®</p>
<blockquote>
<p>netsh advfirewall firewall add rule name="WSL2 7803" dir=in action=allow protocol=TCP localport=7083</p>
</blockquote>
<p>è¿™ä¸ªå‘½ä»¤ä¼šåœ¨Windowsé˜²ç«å¢™è§„åˆ™ä¸­åˆ›å»ºä¸€ä¸ªå…¥ç«™ç«¯å£ä¸º7083ï¼Œåè®®æ˜¯TCPçš„å…è®¸æ“ä½œã€‚å…¶å®å°±æ˜¯æ‰“å¼€å®¿ä¸»æœºçš„7083TCPç«¯å£ã€‚</p>
<ul>
<li>æ‰“å¼€WSLé˜²ç«å¢™</li>
</ul>
<p>ç†è®ºè€Œè¨€ï¼Œå¦‚æœåœ¨ä¸€ä¸ªç‹¬ç«‹çš„Linuxç³»ç»Ÿè¿›è¡Œç½‘ç»œè®¿é—®ï¼Œè¿˜éœ€è¦é…ç½®å¯¹åº”çš„é˜²ç«å¢™è§„åˆ™ã€‚ä½†ç¬”è€…å®é™…ä¸Šæ²¡æœ‰åœ¨WSLä¸­è¿›è¡Œæ“ä½œï¼Œå°±å®ç°äº†ç«¯å£çš„æ˜ å°„ã€‚å¯èƒ½æ˜¯WSLæ¯”è¾ƒç‰¹æ®Šï¼Œæ— éœ€é¢å¤–é…ç½®ï¼Œæˆ–è€…M$å·²ç»é›†æˆäº†WSLå’ŒWindowså®¿ä¸»æœºçš„é˜²ç«å¢™è§„åˆ™å—ï¼Ÿ</p>
<p>å¦‚æœæ˜¯ä¸€ä¸ªæ­£å¸¸çš„Linuxä¸»æœºï¼Œå¯èƒ½çš„éœ€è¦æ“ä½œå¦‚ä¸‹(ä½¿ç”¨ufwé˜²ç«å¢™)ï¼š</p>
<blockquote>
<p>sudo ufw allow 7083/tcp</p>
</blockquote>
<ul>
<li>æµ‹è¯•æ˜ å°„å…³ç³»</li>
</ul>
<p>å¯ä»¥ç®€å•çš„å¯¹è¿™ä¸ªæ˜ å°„å…³ç³»è¿›è¡Œæµ‹è¯•ï¼Œå°±æ˜¯ç”¨ä»»ä½•æ–¹å¼ï¼Œè®¿é—®è¿™ä¸ªå¤–éƒ¨ç«¯å£å°±å¯ä»¥äº†ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">
// ä»å®¿ä¸»æœºå‘èµ·ï¼Œ è®¿é—®WSL
curl http://172.20.185.14:7083
NotFound

// ä»å®¿ä¸»æœºå‘èµ·ï¼Œè®¿é—®å®¿ä¸»æœº
curl http://192.168.10.137:7083
NotFound


</code></pre>
<p>ä½œä¸ºWebAPIåº”ç”¨ï¼Œè¿™é‡Œçš„é»˜è®¤å“åº”å†…å®¹ï¼Œå°±æ˜¯NotFoundï¼Œè€Œä¸”ä¸¤è€…è®¿é—®ç»“æœä¸€è‡´ï¼Œè¯´æ˜ä»å†…å¤–éƒ¨çš„Webåº”ç”¨è¿è¡Œå’Œè®¿é—®éƒ½æ˜¯æ­£å¸¸çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»»ä½•èƒ½å¤Ÿè®¿é—®å®¿ä¸»æœºçš„å…¶ä»–ä¸»æœºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ·çš„æ–¹å¼è®¿é—®WSLçš„ç½‘ç»œåº”ç”¨äº†ã€‚</p>
<p>è‡³æ­¤é…ç½®å’Œæµ‹è¯•å·¥ä½œå°±éƒ½æŒ‰ç…§è®¾æƒ³å’Œé¢„è®¡å®Œæˆäº†ã€‚</p>
<h2 data-id="heading-2">å°ç»“</h2>
<p>æœ¬æ–‡ä»ç¬”è€…æ—¥å¸¸å·¥ä½œä¸­é‡åˆ°çš„ä¸€ä¸ªéœ€è¦å°†è¿è¡Œåœ¨WSLä¸­çš„Webåº”ç”¨å‘å¸ƒå‡ºæ¥çš„éœ€æ±‚å‡ºå‘ï¼Œè®¨è®ºäº†WSLå¯¹ç½‘ç»œåº”ç”¨è®¿é—®çš„é™åˆ¶ï¼Œå³åç»­é€‰æ‹©NATæ˜ å°„çš„æŠ€æœ¯æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å…¶åŸºæœ¬åŸç†å’Œæ“ä½œè¿‡ç¨‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäº”ï¼‰ï¼šAgentåº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†]]></title>    <link>https://juejin.cn/post/7570533058841002019</link>    <guid>https://juejin.cn/post/7570533058841002019</guid>    <pubDate>2025-11-10T03:40:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570533058841002019" data-draft-id="7570604028632776739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäº”ï¼‰ï¼šAgentåº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-10T03:40:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäº”ï¼‰ï¼šAgentåº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:40:19.000Z" title="Mon Nov 10 2025 03:40:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8b0abffc0245b89a76b9a087704044~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=kq%2ByR1j8jj03KbqWisy%2FnN%2F1478%3D" alt="é¦–.webp" loading="lazy"/></p>
<h2 data-id="heading-0">1. å¼•è¨€</h2>
<p>äººå·¥æ™ºèƒ½æ­£ç»å†æ·±åˆ»å˜é©ã€‚ä¼ ç»ŸAIå¤šä¸ºè¢«åŠ¨å·¥å…·ï¼Œè€Œéšç€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆMASï¼‰çš„å¿«é€Ÿå‘å±•ï¼ŒAI Agentæ­£å‘å…·æœ‰é«˜åº¦è‡ªä¸»æ€§çš„ä¸»åŠ¨æ™ºèƒ½ä½“ï¼ˆAgentic AIï¼‰æ¼”è¿›ã€‚è¿™äº›AI Agentsèƒ½å¤Ÿè‡ªä¸»æ€è€ƒã€è§„åˆ’å’Œæ‰§è¡Œå¤æ‚ä»»åŠ¡ï¼Œç”šè‡³ååŒå®Œæˆæ›´å¤æ‚çš„ç›®æ ‡ã€‚</p>
<p>è¿™ç§æ¼”è¿›å¸¦æ¥äº†å‰æ‰€æœªæœ‰çš„æœºé‡ï¼ŒåŒæ—¶ä¹Ÿå¼•å‘äº†æ–°çš„å®‰å…¨æŒ‘æˆ˜ï¼Œç‰¹åˆ«æ˜¯åœ¨èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†æ–¹é¢ã€‚è¿‘å¹´æ¥å‘ç”Ÿçš„å¤šèµ·å®‰å…¨äº‹ä»¶å……åˆ†è¯´æ˜äº†AI Agentèº«ä»½ç®¡ç†çš„é‡è¦æ€§å’Œç´§è¿«æ€§ã€‚2024å¹´11æœˆï¼ŒLangChainç”Ÿæ€ä¸­çš„LangSmithå¹³å°Prompt Hubæš´éœ²å‡ºä¸¥é‡çš„èº«ä»½ä¸æƒé™ç®¡ç†æ¼æ´â€œAgentSmithâ€ã€‚æ”»å‡»è€…é€šè¿‡ä¸Šä¼ å¸¦æœ‰æ¶æ„ä»£ç†é…ç½®çš„promptï¼Œå½“ç”¨æˆ·forkå¹¶æ‰§è¡Œè¿™äº›promptæ—¶ï¼Œç”¨æˆ·çš„é€šä¿¡æ•°æ®åŒ…æ‹¬APIå¯†é’¥å’Œä¸Šä¼ å†…å®¹ä¼šè¢«æ‚„ç„¶ä¸­è½¬è‡³æ”»å‡»è€…æ§åˆ¶çš„æœåŠ¡å™¨ï¼Œå¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚åŒæ—¶ï¼Œæ”»å‡»å¯èƒ½å¼•å‘ä»£ç†é…ç½®ç¯¡æ”¹ã€æœªç»æˆæƒçš„APIè°ƒç”¨åŠè¿œç¨‹ä»£ç æ‰§è¡Œï¼Œä¸¥é‡å½±å“ç³»ç»Ÿå®‰å…¨ã€‚</p>
<p>2025å¹´æŠ«éœ²çš„MCP Inspectorè¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2025-49596ï¼‰åˆ™æ˜¯å¦ä¸€å…¸å‹æ¡ˆä¾‹ã€‚è¯¥å·¥å…·ç¼ºä¹å®¢æˆ·ç«¯ä¸æœ¬åœ°ä»£ç†ä¹‹é—´çš„è®¤è¯ï¼Œæ”»å‡»è€…ä»…éœ€è¯±å¯¼å¼€å‘è€…è®¿é—®æ¶æ„ç½‘é¡µï¼Œä¾¿èƒ½ç»•è¿‡æµè§ˆå™¨å®‰å…¨ç­–ç•¥ï¼Œé€šè¿‡è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ”»å‡»å‘æœ¬åœ°æœåŠ¡å‘é€æ¶æ„å‘½ä»¤ï¼Œå®ç°å¯¹ç»ˆç«¯çš„è¿œç¨‹æ§åˆ¶ã€‚</p>
<p>è¿™äº›å®‰å…¨äº‹ä»¶æ­ç¤ºäº†Agentic AIç³»ç»Ÿä¸­ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šä¸€æ˜¯AI Agentçš„èº«ä»½è®¤è¯ä¸æˆæƒæœºåˆ¶å¦‚ä½•ç¡®ä¿å¯ä¿¡ä¸”å®‰å…¨ï¼›äºŒæ˜¯åœ¨å¤æ‚çš„ä»£ç†è°ƒç”¨é“¾ä¸­å¦‚ä½•æœ‰æ•ˆä¼ é€’å’ŒéªŒè¯èº«ä»½ä¿¡æ¯ã€‚æœ¬æ–‡å°†æ·±å…¥åˆ†æè¿™äº›æŒ‘æˆ˜ï¼Œå¹¶ç»“åˆäºšé©¬é€Šäº‘ç§‘æŠ€å¹³å°çš„å®è·µç»éªŒï¼Œæä¾›å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">2. AI Agent èº«ä»½ç®¡ç†çš„æ ¸å¿ƒæ¦‚å¿µä¸æŠ€æœ¯è¦æ±‚</h2>
<p>Agentic AI èº«ä»½ï¼ˆAgent Identityï¼‰ç›¸å…³çš„æ¦‚å¿µå’Œæœ¯è¯­ï¼Œç”¨äºæè¿°ä»£ç†å’Œå·¥å…·ç­‰èº«ä»½ç®¡ç†åŠå‡­è¯å¤„ç†æ‰€æ¶‰åŠçš„ç»„ä»¶ã€æµç¨‹ä¸å…³ç³»ã€‚ç†è§£<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fbedrock-agentcore%2Flatest%2Fdevguide%2Fidentity-terminology.html" target="_blank" title="https://docs.aws.amazon.com/bedrock-agentcore/latest/devguide/identity-terminology.html" ref="nofollow noopener noreferrer">è¿™äº›æœ¯è¯­</a>æœ‰åŠ©äºæ·±å…¥æŠŠæ¡AI Agent å·¥ä½œæµä¸­å¦‚ä½•åè°ƒå¤šæ–¹ç»„ä»¶çš„èº«ä»½è®¤è¯ä¸æˆæƒæœºåˆ¶ã€‚</p>
<p>ä»¥ä¸‹åˆ—å‡ºçš„æœ¯è¯­æ˜¯åœ¨å¼€å‘ Agentic AI ç³»ç»Ÿä¸­å¸¸ç”¨çš„ï¼Œå·²è¢«èº«ä»½ä¸è®¿é—®ç®¡ç†ï¼ˆIAMï¼‰é¢†åŸŸå¹¿æ³›é‡‡çº³ï¼Œéäºšé©¬é€Šäº‘ç§‘æŠ€çš„ä¸“æœ‰ç”¨è¯­ã€‚å…¶ä»–é€šç”¨çš„èº«ä»½ç®¡ç†æœ¯è¯­å¯ä»¥å‚è€ƒç›¸å…³<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fcognito%2Flatest%2Fdeveloperguide%2Fcognito-terms.html" target="_blank" title="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-terms.html" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-2">2.1 èº«ä»½ä¸è®¤è¯æ–¹é¢çš„æ¦‚å¿µä¸æœ¯è¯­</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44cbc6fc15bd4c63afbe6b92cbfa0ed8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=gsMKnHGS5mJfDhEfWUYSUq4SBDk%3D" alt="2.1è¡¨æ ¼.webp" loading="lazy"/></p>
<h3 data-id="heading-3">2.2 OAuth and Token ç®¡ç†æ–¹é¢çš„æ¦‚å¿µå’Œæœ¯è¯­</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80f66c8be3ed458daf50d80bea0aef9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=EWRTRdxNid%2FSfeiJac244f7ZMAA%3D" alt="2.2.webp" loading="lazy"/></p>
<h3 data-id="heading-4">2.3 OAuth 2.0çš„æˆæƒæœºåˆ¶æ˜¯Agentic AIèº«ä»½æˆæƒçš„æ ¸å¿ƒæŠ€æœ¯</h3>
<p>Agentic AIç³»ç»Ÿä¸­ï¼Œæ™®éé‡‡ç”¨çš„æˆæƒæœºåˆ¶æ˜¯åŸºäºOAuth 2.0è¿›è¡Œçš„ï¼ŒåŒ…æ‹¬MCPåè®®ä¹Ÿæ˜¯åŸºäºå…¶è¿›è¡Œæˆæƒã€‚æ‰€ä»¥ï¼Œæ·±å…¥ç†è§£Agentic AIå„ç»„ä»¶é—´çš„èº«ä»½è®¤è¯ä¸æˆæƒæœºåˆ¶çš„å‰ææ˜¯å……åˆ†ç†è§£OAuthæˆæƒçš„æµç¨‹ã€‚å…¶ä¸­ï¼ŒAnthropicå®˜æ–¹å¯¹MCPåè®®ä¸­é‡‡ç”¨çš„OAuthæˆæƒæµç¨‹è¿›è¡Œäº†è¯¦ç»†æè¿°ï¼Œå…·ä½“å®¢æˆ·å‚è€ƒå…¶å®˜æ–¹ç½‘ç«™çš„åè®®æè¿°éƒ¨åˆ†Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification%2F2025-06-18%2Fbasic%2Fauthorization" target="_blank" title="https://modelcontextprotocol.io/specification/2025-06-18/basic/authorization" ref="nofollow noopener noreferrer">OAuth 2.0çš„æˆæƒæµç¨‹</a>ã€‚</p>
<p>åœ¨Agentic AIç³»ç»Ÿçš„è®¾è®¡ä¸­ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯æ¥é€‰æ‹©åˆé€‚çš„OAuth å·¥ä½œæ¨¡å‹ã€‚å…¶ä¸­å…¸å‹çš„æ¨¡å¼æœ‰2è…¿æˆæƒï¼ˆ2-Legged Authï¼Œ2LOï¼‰å’Œ3è…¿æˆæƒï¼ˆ3-Legged Authï¼Œ3LOï¼‰ï¼Œå¦‚æœéœ€è¦ç”¨æˆ·ï¼ˆUserï¼‰å‚ä¸å…¶ä¸­çš„æˆæƒæµç¨‹é€‚åˆç”¨3LOï¼Œå¦‚æœä¸éœ€è¦ç”¨æˆ·å‚ä¸çš„é€‚åˆç”¨2LOã€‚</p>
<p>ä¸‹å›¾æ˜¯2LOå’Œ3LOæˆæƒæµç¨‹çš„å…¸å‹æ­¥éª¤è¯´æ˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/456611ff45b2465083ec46717c716827~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=4rYLQXIUwWGAfWiEWXBYyKT75Us%3D" alt="å›¾1.webp" loading="lazy"/></p>
<p align="center">å›¾1 â€“ 2LOå’Œ3LOæˆæƒæµç¨‹</p>
<h4 data-id="heading-5">2.3.1 2LO æˆæƒæµç¨‹</h4>
<p>OAuth å®¢æˆ·ç«¯å‡­æ®æˆäºˆç”¨äºæ— éœ€ç”¨æˆ·äº¤äº’çš„æœºå™¨å¯¹æœºå™¨èº«ä»½éªŒè¯ï¼Œé€‚ç”¨äºä»£ç†ä½¿ç”¨ 2LO ç›´æ¥å‘èµ„æºæœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯ã€‚ä¾‹å¦‚ä»£ç†Agent è®¿é—®å…·æœ‰æœåŠ¡è§’è‰²çš„åŒä¸€è´¦æˆ·ä¸­æ•°æ®åº“ã€‚</p>
<p>å…·ä½“æµç¨‹åŒ…æ‹¬:</p>
<p>Client è®¤è¯: åº”ç”¨å‘é€ â€˜client_idâ€™ å’Œ â€˜client_secretâ€™ åˆ°è®¤è¯æœåŠ¡å™¨ï¼›</p>
<p>Token ç­¾å‘: æœåŠ¡å™¨éªŒè¯å¯†é’¥ææ–™ï¼Œå¹¶è¿”å›ä¸€ä¸ªâ€˜access_tokenâ€˜ï¼›</p>
<p>èµ„æºè®¿é—®: åº”ç”¨ä½¿ç”¨Tokenè®¿é—®å—ä¿æŠ¤çš„èµ„æºã€‚</p>
<h4 data-id="heading-6">2.3.2 3LO æˆæƒæµç¨‹</h4>
<p>ç”¨äºåº”ç”¨ä»£è¡¨ç”¨æˆ·è¿›è¡Œæ“ä½œçš„åœºæ™¯ï¼Œéœ€è¦ç”¨æˆ·çš„åŒæ„ã€‚ä¾‹å¦‚ä»£ç†Agent ä»£è¡¨ç”¨æˆ·è®¿é—®ç”µå­é‚®ä»¶æœåŠ¡ã€‚</p>
<p>å…·ä½“æµç¨‹åŒ…æ‹¬:</p>
<p>User é‡å®šå‘: å®¢æˆ·ç«¯é‡å®šå‘ç”¨æˆ·è¯·æ±‚åˆ°æˆæƒæœåŠ¡å™¨ï¼›</p>
<p>User åŒæ„: ç”¨æˆ·å®Œæˆè®¤è¯å¹¶åŒæ„ï¼›</p>
<p>Code äº¤æ¢: æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯è¿”å›æˆæƒcodeï¼›</p>
<p>Token è¯·æ±‚: å®¢æˆ·ç«¯é€šè¿‡æˆæƒcodeå’ŒÂ <code>client_secret</code>Â ä¸æˆæƒæœåŠ¡å™¨äº¤æ¢Â <code>access_token</code>Â å’Œ refresh_tokenï¼›</p>
<p>èµ„æºè®¿é—®: å®¢æˆ·ç«¯é€šè¿‡ä½¿ç”¨tokenè®¿é—®ç”¨æˆ·æ‹¥æœ‰çš„èµ„æºã€‚</p>
<h2 data-id="heading-7">3. Agentic AI èº«ä»½ç®¡ç†é¢ä¸´çš„æ ¸å¿ƒæŒ‘æˆ˜ä¸é˜²æŠ¤ç­–ç•¥</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fowasp.org%2F" target="_blank" title="https://owasp.org/" ref="nofollow noopener noreferrer">OWASP</a>(å¼€æ”¾å¼å…¨çƒåº”ç”¨ç¨‹åºå®‰å…¨é¡¹ç›®ï¼ŒOpen Worldwide Application Security Project)åŸºäºAgentic AIçš„ç‰¹æ€§åŠåº”ç”¨ç³»ç»Ÿéƒ¨ç½²æ¶æ„ã€å„é¢†åŸŸä¸“å®¶çš„ç ”ç©¶åŠå®è·µç»éªŒï¼Œæ€»ç»“äº†15ä¸ªå®‰å…¨å¨èƒï¼Œå…·ä½“å¯å‚è€ƒæœ¬ç³»åˆ—åšå®¢ä¹‹ã€ŠAgentic AI å®‰å…¨é˜²æŠ¤-Agentéšç§ä¸å®‰å…¨ã€‹çš„å¯¹åº”å†…å®¹ã€‚åœ¨è¿™15ä¸ªå®‰å…¨å¨èƒä¸­ï¼Œæœ‰2ä¸ªæ˜¯ä¸èº«ä»½ç›¸å…³çš„ï¼ŒåŒ…æ‹¬T3 æƒé™æ³„æ¼å’ŒT9 èº«ä»½æ¬ºéª—å’Œå†’å……ã€‚</p>
<ul>
<li>T3 æƒé™æ»¥ç”¨ï¼šå½“æ”»å‡»è€…åˆ©ç”¨æƒé™ç®¡ç†ä¸­çš„å¼±ç‚¹æ‰§è¡Œæœªç»æˆæƒçš„æ“ä½œæ—¶ï¼Œå°±ä¼šå‘ç”Ÿæƒé™æ»¥ç”¨ã€‚è¿™é€šå¸¸æ¶‰åŠåŠ¨æ€è§’è‰²ç»§æ‰¿æˆ–é”™è¯¯é…ç½®ã€‚</li>
<li>T9 èº«ä»½æ¬ºéª—å’Œå†’å……ï¼šæ”»å‡»è€…åˆ©ç”¨èº«ä»½éªŒè¯æœºåˆ¶å†’å……äººå·¥æ™ºèƒ½ä»£ç†æˆ–äººç±»ç”¨æˆ·ï¼Œä»è€Œä»¥è™šå‡èº«ä»½æ‰§è¡Œæœªç»æˆæƒçš„æ“ä½œã€‚</li>
</ul>
<p>å¯¹äºèº«ä»½æ¬ºéª—å’Œå†’å……å¨èƒï¼Œåœ¨ä¸€ä¸ªå…¸å‹çš„Agentic AIé€»è¾‘æ¶æ„ä¸­ï¼Œéœ€è¦è¿›è¡Œèº«ä»½è®¤è¯ä¸æˆæƒçš„äº¤äº’ç‚¹éå¸¸å¤šã€ä¸”æ¶‰åŠåˆ°éä¸€æ–¹è‡ªç ”çš„éƒ¨åˆ†ï¼Œå¯¼è‡´é£é™©ç‚¹çš„æ§åˆ¶å˜å¾—å¤æ‚ã€‚èº«ä»½çš„ä¼ é€’ï¼ˆå¦‚ä¸‹å›¾è“è‰²ç®­å¤´å’Œç¼–å·ï¼‰æ˜¯é‡è¦å†…å®¹ä¹‹ä¸€ï¼Œæœ€åˆUserçš„èº«ä»½ç®¡ç†å’Œè®¤è¯ã€Agent Actionå¯¹User èº«ä»½å’Œé‰´æƒä¼šè¯ï¼ˆAccess Tokenï¼‰çš„ä¼ é€’ã€toolså¯¹User çš„æˆæƒç­‰ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0c2a87f8f6c43ea8c50cbe558c3f8fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=63IFK341iMz%2FzFkDk1s9Ueguwxs%3D" alt="å›¾2.webp" loading="lazy"/></p>
<p align="center">å›¾2 â€“ èº«ä»½æ¬ºéª—å’Œå†’å……å¨èƒçš„åˆ†å¸ƒç‚¹</p>
<h3 data-id="heading-8">3.1 Agentic AIä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒï¼Œå’Œä¼ ç»Ÿåº”ç”¨ä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒçš„æ ¸å¿ƒåŒºåˆ«</h3>
<p>ä¼ ç»Ÿåº”ç”¨ï¼ˆæ²¡æœ‰ä½¿ç”¨Agentic AIä¹‹å‰çš„åº”ç”¨ï¼‰å¯¹ç”¨æˆ·çš„èº«ä»½ç®¡ç†å’Œæˆæƒæ˜¯éå¸¸æ˜ç¡®çš„ï¼Œå³å¯¹å½“å‰ç™»å½•åº”ç”¨ç³»ç»Ÿçš„ç”¨æˆ·èº«ä»½è¿›è¡Œè®¤è¯å’Œæˆæƒï¼ŒåŒ…æ‹¬å•ç‚¹ç™»å½•SSOè®¤è¯ã€ç»†ç²’åº¦æˆæƒå’ŒOAuthæˆæƒç­‰ã€‚ä½†åº”ç”¨ç³»ç»Ÿä¸­å¼•å…¥Agentic AIæŠ€æœ¯åï¼Œæ•°æ®çš„æŸ¥è¯¢å’Œç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„è°ƒç”¨ç­‰ï¼Œä¼šç”±AI Agentä»£ç†æ¥å®Œæˆï¼Œå› ä¸ºå½“å‰ç™»å½•çš„ç”¨æˆ·è¦æŸ¥è¯¢æˆ–æ“ä½œçš„å†…å®¹å¯èƒ½ä¸æ˜¯å¯¹å…¶è‡ªèº«çš„æŸ¥è¯¢æˆ–æ“ä½œï¼Œæœ‰å¯èƒ½æ˜¯é€šè¿‡promptçš„æ–¹å¼æŸ¥è¯¢æˆ–æ“ä½œå…¶ä»–ç”¨æˆ·çš„ä¿¡æ¯ï¼Œè¿™ä¸€ç‚¹æ˜¯ä¸ä¼ ç»Ÿåº”ç”¨çš„æœ€å¤§åŒºåˆ«ã€‚æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªç¤ºä¾‹å›¾æ¥è¿›è¡Œå¯¹æ¯”å’Œè¯´æ˜ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8e46bfaef3147fcb5e30d00e99335ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=9v1Mroc1VRh7QyZlmLidS3nlwag%3D" alt="å›¾3.webp" loading="lazy"/></p>
<p align="center">å›¾3 â€“ ä¼ ç»Ÿåº”ç”¨ä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒæ¶æ„  </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f9efc9b92244a40a9e5a18c2a689559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=dxN%2FKM1FIqguJPNG8%2B8Ka3KRN%2Fo%3D" alt="å›¾4.webp" loading="lazy"/></p>
<p align="center">å›¾4 â€“ Agentic AIç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒæ¶æ„</p>
<p>Agentic AI åº”ç”¨ç³»ç»Ÿä¸­çš„æˆæƒé—®é¢˜åæ˜ äº†ä¼ ç»Ÿè®¿é—®æ§åˆ¶æ¨¡å‹çš„æ ¹æœ¬æ€§å±€é™ã€‚å½“æ•°æ®é€šè¿‡è®­ç»ƒã€å¾®è°ƒæˆ–æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ–¹å¼è¢«è¾“å…¥åˆ°LLMä¸­åï¼Œæ¨¡å‹æœ¬èº«æ— æ³•åˆ¤æ–­è¯·æ±‚è€…æ˜¯å¦æœ‰æƒè®¿é—®è¿™äº›æ•°æ®ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆæƒå†³ç­–å¿…é¡»åœ¨AIåº”ç”¨çš„å…¶ä»–å±‚é¢å®ç°ï¼Œè€Œä¸èƒ½ä¾èµ–æ¨¡å‹æœ¬èº«çš„åˆ¤æ–­ã€‚</p>
<p>åœ¨ä¼ä¸šçº§AIåº”ç”¨ä¸­ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—æ›´åŠ å¤æ‚ã€‚ä¸åŒç”¨æˆ·å¯èƒ½å¯¹åŒä¸€æ•°æ®é›†å…·æœ‰ä¸åŒçš„è®¿é—®æƒé™ï¼Œä½†LLMæ— æ³•è‡ªä¸»åŒºåˆ†è¿™äº›æƒé™å·®å¼‚ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªä¼ä¸šçŸ¥è¯†ç®¡ç†ç³»ç»Ÿä¸­ï¼Œé”€å”®å›¢é˜Ÿå’Œè´¢åŠ¡å›¢é˜Ÿå¯èƒ½å¯¹å®¢æˆ·æ•°æ®å…·æœ‰ä¸åŒçš„è®¿é—®æƒé™ï¼Œä½†å¦‚æœè¿™äº›æ•°æ®éƒ½è¢«ç”¨äºè®­ç»ƒæˆ–å¢å¼ºåŒä¸€ä¸ªLLMï¼Œæ¨¡å‹å°±æ— æ³•è‡ªåŠ¨æ‰§è¡Œè¿™ç§æƒé™åŒºåˆ†ã€‚</p>
<p>è§£å†³æˆæƒé—®é¢˜éœ€è¦åœ¨åº”ç”¨æ¶æ„å±‚é¢å®æ–½ç¡®å®šæ€§çš„æˆæƒæœºåˆ¶ã€‚è¿™åŒ…æ‹¬åœ¨æ•°æ®è¾“å…¥LLMä¹‹å‰è¿›è¡Œæƒé™æ£€æŸ¥ï¼Œæ ¹æ®ç”¨æˆ·èº«ä»½å’Œæƒé™è¿‡æ»¤å¯è®¿é—®çš„æ•°æ®æºã€‚åœ¨RAGç³»ç»Ÿä¸­ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·æƒé™åŠ¨æ€é€‰æ‹©å¯æŸ¥è¯¢çš„å‘é‡æ•°æ®åº“æˆ–çŸ¥è¯†åº“ã€‚åœ¨æ¨¡å‹è¾“å‡ºé˜¶æ®µï¼Œä¹Ÿéœ€è¦æ ¹æ®ç”¨æˆ·æƒé™å¯¹å“åº”å†…å®¹è¿›è¡Œè¿‡æ»¤å’Œè„±æ•ã€‚</p>
<p>åŸºäºä¼šè¯å±æ€§çš„æƒé™ä¼ é€’æ˜¯ä¸€ç§æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡å®‰å…¨ä¾§é€šé“ï¼ˆå¦‚Amazon Bedrock Agentsçš„ä¼šè¯å±æ€§ï¼‰ä¼ é€’ç”¨æˆ·èº«ä»½å’Œæƒé™ä¿¡æ¯ï¼Œä½¿åç«¯ç³»ç»Ÿèƒ½å¤Ÿåœ¨å¤„ç†AIè¯·æ±‚æ—¶æ‰§è¡Œé€‚å½“çš„æˆæƒæ£€æŸ¥ã€‚è¿™ç§æ–¹æ³•å°†æˆæƒå†³ç­–ä»ä¸å¯é çš„LLMæ¨ç†è½¬ç§»åˆ°å¯æ§çš„åº”ç”¨é€»è¾‘ä¸­ã€‚</p>
<h3 data-id="heading-9">3.2 MCPåè®®ä¸­æ··æ·†ä»£ç†äººææƒé—®é¢˜</h3>
<p>MCPåè®®çš„è®¾è®¡ç†å¿µå¯¼è‡´å…¶åœ¨æ¶æ„å±‚é¢å°±ç³»ç»Ÿæ€§åœ°å¼•å…¥äº†ä¼ ç»Ÿå®‰å…¨é¢†åŸŸä¸­ç»å…¸çš„â€œ æ··æ·†ä»£ç†äºº â€ é—®é¢˜ï¼ˆ Confused Deputy Problemï¼‰ã€‚é¦–å…ˆï¼ŒMCP æœåŠ¡å™¨ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹è¿è¡Œï¼Œæ‹¥æœ‰å…¶è‡ªèº«åœ¨ä¸»æœºç³»ç»Ÿä¸Šçš„æƒé™é›†åˆï¼Œä¾‹å¦‚æ–‡ä»¶ç³»ç»Ÿè¯»å†™æƒé™æˆ–ç½‘ç»œè®¿é—®æƒé™ã€‚å…¶æ¬¡ï¼Œ LLM å®¢æˆ·ç«¯é€šå¸¸ä»£è¡¨ç”¨æˆ·è¡Œäº‹ï¼Œå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä»¥æ‰§è¡Œå·¥å…·ã€‚ä½†æ˜¯ MCP è§„èŒƒåœ¨å…¶é»˜è®¤çŠ¶æ€ä¸‹ï¼Œç¼ºä¹ä¸€ä¸ªç»Ÿä¸€ä¸”è¢«ä¸€è‡´æ€§æ‰§è¡Œçš„è®¤è¯å’Œæˆæƒæœºåˆ¶ï¼Œæ¥å°†ç»ˆç«¯ç”¨æˆ·çš„èº«ä»½å’Œæƒé™å®‰å…¨åœ°ä¼ é€’ç»™æœåŠ¡å™¨ã€‚å› æ­¤ï¼Œå½“ä¸€ä¸ªç”¨æˆ·ï¼ˆå¯èƒ½æ˜¯ä½æƒé™ç”¨æˆ·ï¼‰é€šè¿‡ LLM æç¤ºè°ƒç”¨ä¸€ä¸ªå·¥å…·æ—¶ï¼ŒæœåŠ¡å™¨å®é™…ä¸Šæ˜¯ä½¿ç”¨å…¶è‡ªèº«çš„æƒé™ï¼ˆå¯èƒ½æ˜¯é«˜æƒé™ï¼‰æ¥æ‰§è¡Œè¯¥æ“ä½œï¼Œè€Œéç”¨æˆ·çš„æƒé™ã€‚è¿™å°±åˆ›é€ äº†ä¸€ä¸ªå…¸å‹çš„æƒé™æå‡åœºæ™¯ï¼Œå³ä¸€ä¸ªä½æƒé™çš„è¯·æ±‚è€…ï¼ˆç”¨æˆ·ï¼‰æ¬ºéª—äº†ä¸€ä¸ªé«˜æƒé™çš„ä»£ç†ï¼ˆæœåŠ¡å™¨ï¼‰æ¥æ‰§è¡Œè¶Šæƒæ“ä½œã€‚æ­¤ç±»è¶Šæƒé—®é¢˜ï¼Œé€šè¿‡ç»™å¤§æ¨¡å‹LLMä½œç³»ç»Ÿçº§æç¤ºè¯é™åˆ¶ä¹Ÿåªèƒ½åœ¨å°‘éƒ¨åˆ†æƒ…å†µä¸‹ç”Ÿæ•ˆï¼Œä¸”æœ‰ä¸ç¡®å®šæ€§ã€‚</p>
<p>æ··æ·†ä»£ç†é—®é¢˜æ˜¯AIåº”ç”¨å®‰å…¨ä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„å¨èƒä¹‹ä¸€ï¼Œå¹¶æŠŠä¼ ç»Ÿçš„å¨èƒæ•ˆæœæ”¾å¤§ã€‚è¿™ç§æ”»å‡»åˆ©ç”¨äº†AIç³»ç»Ÿçš„ä»£ç†ç‰¹æ€§ï¼Œé€šè¿‡å…·æœ‰æ›´é«˜æƒé™çš„AIåº”ç”¨é—´æ¥è·å–åŸæœ¬æ— æƒè®¿é—®çš„èµ„æºã€‚æ”»å‡»çš„å…¸å‹åœºæ™¯æ˜¯ï¼šç”¨æˆ·ç›´æ¥è®¿é—®æŸä¸ªèµ„æºä¼šè¢«æ‹’ç»ï¼Œä½†é€šè¿‡AIåº”ç”¨è®¿é—®åŒæ ·çš„èµ„æºå´èƒ½æˆåŠŸï¼Œä»è€Œç»•è¿‡äº†åŸæœ‰çš„å®‰å…¨æ§åˆ¶ã€‚æ··æ·†ä»£ç†å®‰å…¨å¨èƒç¤ºä¾‹ï¼šç›´æ¥è®¿é—® S3 å­˜å‚¨æ¡¶çš„ç”¨æˆ·ä¼šè¢«æ‹’ç»è®¿é—®ï¼›ä½†è®¿é—® LLM çš„ç”¨æˆ·ï¼ˆä½¿ç”¨ RAG å¹¶å­˜å‚¨æ¥è‡ªåŒä¸€ S3 å­˜å‚¨æ¡¶çš„æ•°æ®ï¼‰åˆ™ä¼šè·å¾—è®¿é—®æƒé™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26782a12458f4d4ab1b39ed772ec2bf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=qdmBbgdstjKfwbG%2FRvtk27egLls%3D" alt="å›¾5.webp" loading="lazy"/></p>
<p align="center">å›¾5 â€“ Agentç³»ç»Ÿä¸­æ··æ·†ä»£ç†ç¤ºæ„å›¾</p>
<p>è¿™ç§æ”»å‡»çš„æ ¹æœ¬åŸå› åœ¨äºAIåº”ç”¨å’Œåº•å±‚èµ„æºä¹‹é—´çš„æƒé™ä¸åŒ¹é…ã€‚AIåº”ç”¨ä¸ºäº†å®Œæˆå¤æ‚ä»»åŠ¡ï¼Œå¾€å¾€è¢«æˆäºˆäº†è¾ƒé«˜çš„ç³»ç»Ÿæƒé™ï¼Œä½†è¿™äº›æƒé™çš„ä½¿ç”¨ç¼ºä¹ç»†ç²’åº¦çš„æ§åˆ¶ã€‚å½“ç”¨æˆ·é€šè¿‡AIåº”ç”¨é—´æ¥è®¿é—®èµ„æºæ—¶ï¼Œå®é™…ä¸Šæ˜¯å€Ÿç”¨äº†AIåº”ç”¨çš„æƒé™ï¼Œè€Œä¸æ˜¯åŸºäºç”¨æˆ·è‡ªèº«çš„æƒé™ã€‚</p>
<h3 data-id="heading-10">3.3 æ„å»ºç«¯åˆ°ç«¯çš„Agentic AIèº«ä»½ç®¡ç†çš„æ•´ä½“é˜²æŠ¤ç­–ç•¥</h3>
<p>é˜²èŒƒæ··æ·†ä»£ç†æ”»å‡»éœ€è¦å®æ–½ä¸¥æ ¼çš„æƒé™ä¸€è‡´æ€§æ£€æŸ¥ã€‚æ— è®ºç”¨æˆ·é€šè¿‡ä½•ç§é€”å¾„è®¿é—®èµ„æºï¼Œéƒ½åº”è¯¥åŸºäºç›¸åŒçš„æƒé™æ¨¡å‹è¿›è¡Œæˆæƒå†³ç­–ã€‚è¿™è¦æ±‚åœ¨AIåº”ç”¨çš„æ¶æ„è®¾è®¡ä¸­å¼•å…¥ç”¨æˆ·èº«ä»½ä¼ é€’æœºåˆ¶ï¼Œç¡®ä¿åº•å±‚ç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«çœŸå®çš„è¯·æ±‚è€…èº«ä»½ã€‚</p>
<p>å®æ–½ç»†ç²’åº¦çš„æƒé™ä»£ç†æ˜¯å¦ä¸€ç§æœ‰æ•ˆçš„é˜²æŠ¤ç­–ç•¥ã€‚AIåº”ç”¨ä¸åº”è¯¥æ‹¥æœ‰è¶…å‡ºå…¶åŠŸèƒ½éœ€æ±‚çš„æƒé™ï¼Œè€Œåº”è¯¥åŸºäºå…·ä½“çš„ç”¨æˆ·è¯·æ±‚åŠ¨æ€è·å–ç›¸åº”çš„æƒé™ã€‚è¿™å¯ä»¥é€šè¿‡æƒé™å§”æ‰˜æœºåˆ¶å®ç°ï¼ŒAIåº”ç”¨ä»£è¡¨ç”¨æˆ·è¯·æ±‚ç‰¹å®šçš„æƒé™ï¼Œè€Œä¸æ˜¯æ‹¥æœ‰å›ºå®šçš„é«˜æƒé™ã€‚</p>
<p>å®¡è®¡å’Œç›‘æ§æœºåˆ¶å¯¹äºæ£€æµ‹æ··æ·†ä»£ç†æ”»å‡»è‡³å…³é‡è¦ã€‚ç³»ç»Ÿåº”è¯¥è®°å½•æ‰€æœ‰çš„æƒé™ä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬æƒé™çš„æ¥æºã€ä½¿ç”¨è€…ã€è®¿é—®çš„èµ„æºå’Œæ“ä½œç±»å‹ã€‚é€šè¿‡åˆ†æè¿™äº›å®¡è®¡æ—¥å¿—ï¼Œå¯ä»¥è¯†åˆ«å¼‚å¸¸çš„æƒé™ä½¿ç”¨æ¨¡å¼å’Œæ½œåœ¨çš„å®‰å…¨å¨èƒã€‚</p>
<p>OWASPå¯¹äºAgentic AIçš„15ä¸ªå¨èƒé£é™©ä¸­ï¼Œè™½ç„¶åªæœ‰2ä¸ªä¸èº«ä»½ç›¸å…³ï¼Œä½†è¿™ä¸¤ä¸ªé£é™©ç‚¹ç‰¹åˆ«æ˜¯T9èº«ä»½æ¬ºéª—ä¸å†’å……å¨èƒï¼Œä¼šå‘ç”Ÿåœ¨Agentic AIç³»ç»Ÿä¸­çš„å¤šä¸ªç¯èŠ‚ï¼Œå› æ­¤æ„å»ºAgentic AIç³»ç»Ÿçš„ç«¯åˆ°ç«¯èº«ä»½ç®¡ç†è§£å†³æ–¹æ¡ˆæ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œå…·ä½“å‚è€ƒæ¶æ„å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c483f4e3fad344f290fcada9602fd923~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=O%2FiN%2BxHD7CkWFUTmabBQJsW8W8A%3D" alt="å›¾6.webp" loading="lazy"/></p>
<p align="center">å›¾6 â€“ Agentic AIç³»ç»Ÿä¸­ç«¯åˆ°ç«¯èº«ä»½è®¤è¯ä¸æˆæƒæ¶æ„</p>
<p>ç«¯åˆ°ç«¯çš„èº«ä»½è®¤è¯ä¸æˆæƒç³»ç»Ÿï¼ŒåŒ…æ‹¬å¦‚ä¸‹å‡ ä¸ªæ ¸å¿ƒèƒ½åŠ›ã€‚å…·ä½“ç¤ºä¾‹å¯ä»¥å‚è€ƒä¸‹ä¸€ç« èŠ‚çš„åŸºäºäºšé©¬é€ŠBedrock AgentCore Identityå¼€å‘Agentic AIç³»ç»Ÿçš„èº«ä»½æ¨¡å—çš„ç›¸å…³å†…å®¹ã€‚</p>
<ol>
<li>Agentå…¥æ–¹é¢çš„è®¤è¯å’Œæˆæƒï¼šå¯¹è¯·æ±‚çš„ç”¨æˆ·è¿›è¡Œè®¤è¯å’Œæˆæƒï¼ŒåŒ…æ‹¬é€šè¿‡ç¬¬ä¸‰æ–¹èº«ä»½æä¾›å•†ç™»å½•è¿›æ¥çš„ç”¨æˆ·ã€‚</li>
<li>å¤–éƒ¨å·¥å…·æˆ–æœåŠ¡å¯¹Agentçš„æˆæƒï¼šä¸è®ºæ˜¯è‡ªå·±ç ”å‘çš„ä¸€æ–¹å·¥å…·ï¼Œè¿˜æ˜¯ç¬¬ä¸‰æ–¹ç ”å‘çš„å•†ä¸šåŒ–æˆ–å¼€æºçš„å·¥å…·ï¼Œéƒ½éœ€è¦å¯¹Agentæˆ–Agentä»£è¡¨ç”¨æˆ·çš„æˆæƒï¼Œé¿å…å§”æ‰˜äººæ”»å‡»ã€‚</li>
<li>Agentè®¿é—®å¤–éƒ¨å·¥å…·æˆ–æœåŠ¡çš„èƒ½åŠ›ï¼ˆå³å‡ºæ–¹å‘ï¼‰ï¼šä¸ºäº†é…åˆå¤–éƒ¨å·¥å…·æˆ–æœåŠ¡å¯¹Agentçš„æˆæƒï¼ŒAgentéœ€è¦å…·å¤‡ OAuth å®¢æˆ·ç«¯çš„èƒ½åŠ›ï¼ŒåŒ…æ‹¬2LOå’Œ3LOçš„æ–¹å¼ã€‚å¦‚æœæ˜¯è®¿é—®äº‘èµ„æºï¼Œéœ€è¦æœ‰ä¿å­˜äº‘èµ„æºè®¿é—®çŸ­æœŸæƒé™çš„èƒ½åŠ›ï¼Œå¦‚IAM roleæˆ–STSã€‚</li>
<li>Tool Gatewayå…¥æ–¹å‘è®¤è¯å’Œæˆæƒï¼šå¦‚æœé€šè¿‡Tool Gatewayæ–¹å¼é›†ä¸­ç®¡ç†å¤šä¸ªMCPæœåŠ¡å™¨ï¼ŒAgentç”±Tool Gatewayæ¥è®¿é—®toolsï¼Œé‚£ä¹ˆTool Gatewayéœ€è¦å…·å¤‡å¯¹Agentæˆ–Agentä»£è¡¨ç”¨æˆ·çš„æˆæƒã€‚</li>
</ol>
<h2 data-id="heading-11">4. äºšé©¬é€Šäº‘ç§‘æŠ€äº‘å¹³å°ä¸Šçš„AI Agentèº«ä»½ç®¡ç†è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-12">4.1 æ–¹æ¡ˆä¸€ï¼š Amazon Bedrock AgentCore Identity â€“ å…¨æ‰˜ç®¡ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ</h3>
<p>Amazon Bedrock AgentCore Identity æ˜¯ä¸€é¡¹å…¨é¢çš„èº«ä»½å’Œå‡­è¯ç®¡ç†æœåŠ¡ï¼Œä¸“ä¸º AI ä»£ç†å’Œè‡ªåŠ¨åŒ–å·¥ä½œè´Ÿè½½è€Œè®¾è®¡ã€‚å®ƒæä¾›å®‰å…¨çš„èº«ä»½éªŒè¯ã€æˆæƒå’Œå‡­æ®ç®¡ç†åŠŸèƒ½ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿè°ƒç”¨ä»£ç†ï¼Œè€Œä»£ç†èƒ½å¤Ÿä»£è¡¨ç”¨æˆ·è®¿é—®å¤–éƒ¨èµ„æºå’ŒæœåŠ¡çš„åŒæ—¶ä¿æŒä¸¥æ ¼çš„å®‰å…¨æ§åˆ¶å’Œå®¡è®¡è·Ÿè¸ªã€‚è¯¥æœåŠ¡ä¸ Amazon Bedrock AgentCore åŸç”Ÿé›†æˆï¼Œä¸ºä»£ç†åº”ç”¨ç¨‹åºæä¾›å…¨é¢çš„èº«ä»½å’Œå‡­è¯ç®¡ç†ã€‚</p>
<p>AgentCore Identity è§£å†³äº† AI ä»£ç†éƒ¨ç½²ä¸­çš„ä¸€ä¸ªæ ¹æœ¬æ€§æŒ‘æˆ˜ï¼šè®©ä»£ç†èƒ½å¤Ÿåœ¨å¤šä¸ªæœåŠ¡ä¸­å®‰å…¨åœ°è®¿é—®ç”¨æˆ·ç‰¹å®šæ•°æ®ï¼ŒåŒæ—¶ä¸ç‰ºç‰²å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚ä¼ ç»Ÿæ–¹æ³•è¦ä¹ˆä½¿ç”¨å¹¿æ³›çš„è®¿é—®å‡­è¯è€Œç¼ºä¹ç»†ç²’åº¦æ§åˆ¶ï¼Œè¦ä¹ˆéœ€è¦ä¸ºæ¯æ¬¡æœåŠ¡é›†æˆè·å–æ˜ç¡®çš„ç”¨æˆ·åŒæ„ï¼ˆè¿™ä¼šå¸¦æ¥ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒï¼‰ã€‚AgentCore Identity é€šè¿‡ä¸€ä¸ªå…¨é¢çš„å·¥ä½œæµå®ç°é›¶ä¿¡ä»»å®‰å…¨åŸåˆ™å’ŒåŸºäºå§”æ‰˜çš„èº«ä»½éªŒè¯æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p>
<h4 data-id="heading-13">Amazon Bedrock AgentCore Identity æ¶‰åŠçš„2ç§èº«ä»½è®¤è¯å’Œæˆæƒ</h4>
<p>å…¥ç«™æˆæƒï¼šInbound Auth æ˜¯æŒ‡éªŒè¯ç”¨æˆ·æˆ–å®¢æˆ·ç«¯åº”ç”¨çš„è®¤è¯æœºåˆ¶ï¼Œç”¨äºæ§åˆ¶è°å¯ä»¥è®¿é—®å’Œè°ƒç”¨æ‚¨çš„ä»£ç†æˆ–å·¥å…·ã€‚</p>
<p>å‡ºç«™æˆæƒï¼šOutbound Auth æ˜¯æŒ‡å·²é€šè¿‡å…¥ç«™è®¤è¯çš„ä»£ç†ï¼Œå®‰å…¨è®¿é—®ç›®æ ‡æœåŠ¡çš„è®¤è¯æœºåˆ¶ï¼Œä½¿ä»£ç†èƒ½å¤Ÿå®‰å…¨åœ°è°ƒç”¨å„ç§å¤–éƒ¨APIã€Lambdaå‡½æ•°ç­‰èµ„æºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cbbedc0df644369b3e12f5658d1ad2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=uGkomNMLQfCEz9E%2FoBQbqNovuFo%3D" alt="å›¾7.webp" loading="lazy"/></p>
<p align="center">å›¾7 â€“ Bedrock AgentCore Identityè®¤è¯ä¸æˆæƒæ¶æ„å›¾</p>
<h4 data-id="heading-14">å…¥ç«™æˆæƒ</h4>
<p>ç”¨æˆ·é€šè¿‡å…¶ç»„ç»‡çš„ç°æœ‰èº«ä»½æä¾›è€…ï¼ˆå¦‚ Auth0ã€Cognito æˆ–å…¶ä»– OIDC å…¼å®¹ç³»ç»Ÿï¼‰è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶è·å¾—è®¿é—®ä»¤ç‰Œæˆ–èº«ä»½ä»¤ç‰Œã€‚è¯¥ä»¤ç‰ŒåŒ…å«ç”¨æˆ·èº«ä»½ä¿¡æ¯å’ŒæˆæƒèŒƒå›´ï¼Œä¸ºæ•´ä¸ªå·¥ä½œæµç¨‹å»ºç«‹ç”¨æˆ·çš„èº«ä»½ä¸Šä¸‹æ–‡ã€‚åº”ç”¨ç¨‹åºæ¥æ”¶æ­¤ä»¤ç‰Œï¼Œå¹¶å°†ä½¿ç”¨å®ƒæ¥æˆæƒå¯¹ä»£ç†çš„è¯·æ±‚ã€‚</p>
<p>ä¸‹é¢ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fcognito%2F" target="_blank" title="https://aws.amazon.com/cn/cognito/" ref="nofollow noopener noreferrer">Amazon Cognito</a>Â ä¸ºä¾‹ï¼Œè®²è§£å¦‚ä½•é…ç½®å…¥ç«™æˆæƒã€‚</p>
<p>åœ¨å¼€å‘åº”ç”¨çš„æ—¶å€™ï¼Œåœ¨ä»£ç ä¸­å¯ä»¥æˆæƒCognito User Poolé‡Œé¢çš„ç”¨æˆ·è®¿é—®æƒé™ã€‚Amazon Cognito æ˜¯ Web å’Œç§»åŠ¨çš„åº”ç”¨ç¨‹åºçš„èº«ä»½è¯†åˆ«å¹³å°ã€‚å€ŸåŠ© Amazon Cognitoï¼Œæ‚¨å¯ä»¥ä»Cognitoç”¨æˆ·æ± ã€ä¼ä¸šç›®å½•æˆ–è€… Google å’Œ Facebook ç­‰æ¶ˆè´¹è€…èº«ä»½æä¾›å•†æä¾›ç”¨æˆ·çš„èº«ä»½éªŒè¯å’Œæˆæƒã€‚é¦–å…ˆåˆ›å»º1ä¸ªCognito User Poolï¼Œåœ¨è¿™ä¸ªUser Poolä¸­åˆ›å»º1ä¸ªApp clientï¼Œä»¥åŠ1ä¸ªç”¨æˆ·ï¼Œå‡è®¾ä½ æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤é€šè¿‡ç”¨æˆ·åå¯†ç çš„æ–¹å¼æˆæƒç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Authenticate User</span>
aws cognito-idp initiate-auth \
--client-id <span class="hljs-string">"<span class="hljs-variable">$CLIENT_ID</span>"</span> \
--auth-flow USER_PASSWORD_AUTH \
--auth-parameters USERNAME=<span class="hljs-string">'testuser'</span>,PASSWORD=<span class="hljs-string">'MyPassword123!'</span> \
--region <span class="hljs-string">"<span class="hljs-variable">$REGION</span>"</span> \
auth.json
</code></pre>
<p>å¯ä»¥å¾—åˆ°æˆæƒçš„è¿”å›ç»“æœï¼Œç»“æœä¸­åŒ…å«JSON Web ä»¤ç‰Œï¼ˆJWTï¼‰æ ¼å¼çš„AccessTokenï¼ŒRefreshTokenå’ŒIdTokenï¼ŒAccessToken åŒ…å«æƒé™èŒƒå›´(scope)ï¼Œæ¯”å¦‚â€cognito:groupsâ€: [â€developersâ€, â€œteam-alphaâ€]å®šä¹‰å…è®¸å“ªäº›ç»„è®¿é—®ï¼Œâ€scopeâ€: â€myApi/profile.read myApi/profile.write myApi/accountâ€ç”¨äºAPIè®¿é—®æˆæƒï¼ŒRefreshToken ç”¨äºè·å–æ–°çš„Access Tokenå’ŒID Tokenï¼ŒIdToken åŒ…å«ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œç”¨äºèº«ä»½éªŒè¯ã€‚è¿”å›çš„ä¿¡æ¯ç±»ä¼¼äºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-string">"eyJraWQiOiJvcHE5UmpBMTFBMWFcLzdoUFdRaUgwRmlDTjlMYm1QbnJQRWM3SVQ1M05XTT0iLCJhbGciOiJSUzI1NiJ9.eyJvcmlnaW5fanRpIjoiZTRkN2M1OWUtM2NjZC00OGFhLWFkN2YtMmY3ZTgzMmEzZDAzIiwic3ViIjoiZDRhODA0ZjgtYTA0MS03MGU0LTY3MmYtNzk2ZWM2M2VlNzQwIiwiYXVkIjoiNWFmNXBvaW8wbG5pa29zbWtnZjQxYjNrODAiLCJldmVudF9pZCI6IjFiNGZiYzA2LWVlMzgtNDBlYi1iNjRhLTA3ZTllNzIzNzVlNiIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxNzUzNzc5MzQ4LCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAudXMtZWFzdC0xLmFtYXpvbmF3cy5jb21cL3VzLWVhc3QtMV9vQTJKTkMxdnUiLCJjb2duaXRvOnVzZXJuYW1lIjoidGVzdHVzZXIiLCJleHAiOjE3NTM3ODI5NDgsImlhdCI6MTc1Mzc3OTM0OCwianRpIjoiNDBiNjEwODMtZmRiZi00YzBmLTk3OTEtOGJmYTJjOGUwNDk1In0.A9wVkmed3aet3Q3mgvSF5-KLcEskBf5JOQnqSuyP4Rv2uz_Q7BhGgDV-AfHiBn9SNI1LI6QxlRp-YqRrh4lyyxsdrQGAH5fIlYvVproslLHlSdq2tPb9klHzPjOpyYTNt3cBCq1WRGiiklfvSM1R-RJ8546IPLP2LN-oEXL-kKNdUpxSLUWSsjuk9kkH1ZkN27NxRtnjzc1KG7MBHJRtVsGUsF8b7m5L1rSYzorbj19j2z5oCHnfZHm8wZkWteEAED2jsjJaRCEwyzqXBgSpnTIy8gYO_tlpwswCpg9dgR1MSwK72OjQvLsf_xubRq2Ykv2RylF4cdF8EuGtLOIb_w"</span>
</code></pre>
<p>å¦‚æœæ²¡æœ‰å¸¦ä¸ŠAccess Tokenï¼Œç›´æ¥è°ƒç”¨AgentCore Runtimeçš„æ—¶å€™å°†çœ‹åˆ°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼šâ€AccessDeniedException: An error occurred (AccessDeniedException) when calling the InvokeAgentRuntime operation: Agent is configured for a different authorization token typeâ€ã€‚è¿™äº›tokençŸ­æœŸæœ‰æ•ˆï¼Œå¯ä»¥åœ¨cognitoä¸­é…ç½®åˆ·æ–°çš„æ—¶é•¿ã€‚å¹¶ä¸”Amazon Cognitoæä¾›æ‰˜ç®¡çš„ç™»å½•å’Œæ³¨å†Œé¡µé¢ï¼Œä»¥åŠä¸°å¯Œçš„å®‰å…¨èƒ½åŠ›ï¼Œæ¯”å¦‚è¦æ±‚ç”¨æˆ·ç»‘å®šMFAï¼Œè¿™æ ·å¯ä»¥é¿å…æœªæˆæƒçš„äººæ‹¿åˆ°ç”¨æˆ·åå¯†ç ä¼ªè£…æˆæˆæƒç”¨æˆ·ä½¿ç”¨è®¿é—®æƒé™ã€‚</p>
<h4 data-id="heading-15">å‡ºç«™æˆæƒ</h4>
<p>Amazon Bedrock AgentCore IdentityéªŒè¯å¯¹äºšé©¬é€Šäº‘ç§‘æŠ€ èµ„æºã€ç¬¬ä¸‰æ–¹æœåŠ¡æˆ– AgentCore Gateway ç›®æ ‡çš„è®¿é—®æƒé™ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ OAuth 2LO/3LO æˆ– API å¯†é’¥ã€‚èº«ä»½ç³»ç»Ÿç®€åŒ–äº†ç®¡ç†å¤šç§å‡­è¯ç±»å‹çš„å¤æ‚æ€§ï¼ŒåŒæ—¶ä¸ºèº«ä»½éªŒè¯å’Œæˆæƒæ“ä½œæä¾›äº†ç»Ÿä¸€çš„æ¥å£ã€‚</p>
<p>åœ¨ä»£ç ä¸­å¯ä»¥é€šè¿‡è°ƒç”¨APIï¼šcreate_api_key_credential_providerï¼Œå°†èƒ½å¤Ÿè®¿é—®ç¬¬ä¸‰æ–¹å·¥å…·çš„APIå¯†é’¥ä¿å­˜åˆ°AgentCore Identityçš„Resource Credential Providerä¸­ã€‚å½“ç”¨æˆ·å‘èµ·ä»£ç†äº¤äº’æ—¶ï¼Œåº”ç”¨ç¨‹åºä¼šå‘å‡ºè¯·æ±‚ï¼Œä»£è¡¨ç”¨æˆ·è°ƒç”¨ AI ä»£ç†ã€‚æ­¤è¯·æ±‚åŒ…å«ç”¨æˆ·çš„èº«ä»½éªŒè¯ä»¤ç‰Œä»¥åŠä»£ç†éœ€è¦å®Œæˆçš„ä»»ä½•å¿…è¦ä¸Šä¸‹æ–‡ã€‚åº”ç”¨ç¨‹åºå……å½“ä»£ç†ï¼Œå°†ç”¨æˆ·çš„èº«ä»½éªŒè¯è¯·æ±‚è½¬å‘åˆ°ä»£ç†åŸºç¡€æ¶æ„ï¼ŒåŒæ—¶ç»´æŠ¤ç”¨æˆ·çš„èº«ä»½ä¸Šä¸‹æ–‡ã€‚</p>
<p>å‡ºç«™æˆæƒæ”¯æŒä»¥ä¸‹ä¸‰ç§èº«ä»½ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae8cf00327ea4926b51152265e454758~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=JNjCA8DldrIA2JXBnagAzdH3k2w%3D" alt="å‡ºç«™æˆæƒè¡¨æ ¼.webp" loading="lazy"/></p>
<h4 data-id="heading-16">AgentCore Identity çš„å®‰å…¨æ€§</h4>
<ul>
<li>å®‰å…¨çš„å‡­è¯å­˜å‚¨ï¼Œä»£ç ä¸­æ²¡æœ‰ç¡¬ç¼–ç çš„APIå¯†é’¥ï¼Œä¸å®¹æ˜“æ³„æ¼æœºå¯†</li>
<li>è·¨å¤šç§èµ„æºç±»å‹çš„ä¸€è‡´èº«ä»½éªŒè¯æ¥å£</li>
<li>å…¨é¢çš„å®¡è®¡æ—¥å¿—ä»¥ç¡®ä¿å®‰å…¨æ€§å’Œåˆè§„æ€§</li>
<li>åŸºäºèº«ä»½å’Œä¸Šä¸‹æ–‡çš„ç»†ç²’åº¦è®¿é—®æ§åˆ¶</li>
<li>é€šè¿‡ AgentCore SDK ç®€åŒ–é›†æˆ</li>
</ul>
<h3 data-id="heading-17">4.2 æ–¹æ¡ˆäºŒï¼š åŸºäºAmazon Bedrock Agentæ„å»ºç«¯åˆ°ç«¯çš„ç»†ç²’åº¦è®¿é—®æ§åˆ¶çš„AI Agent</h3>
<p>æˆ‘ä»¬ä¸ºå®¢æˆ·æä¾›äº†ä¸€ä¸ªåŸºäºAmazon Bedrock Agentsæ„å»ºAI Agentçš„ç»†ç²’åº¦è®¿é—®æ§åˆ¶çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fcatalog.workshops.aws%2Fsecuring-genai-app%2Fen-US" target="_blank" title="https://catalog.workshops.aws/securing-genai-app/en-US" ref="nofollow noopener noreferrer">å®‰å…¨å®æ–½æ–¹æ¡ˆ</a>ã€‚è¯¥æ–¹æ¡ˆé€šè¿‡ç»“åˆå¤šä¸ªäºšé©¬é€Šäº‘ç§‘æŠ€æœåŠ¡ï¼Œå®ç°äº†å®‰å…¨å¯é çš„Agentic AI åº”ç”¨è®¿é—®æ§åˆ¶ä½“ç³»ã€‚æ•´ä¸ªç³»ç»Ÿè®¾è®¡æ³¨é‡å®‰å…¨æ€§å’Œè®¿é—®æ§åˆ¶ï¼Œç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®å…¶æƒé™èŒƒå›´å†…çš„æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹çš„æ•™è‚²é¢†åŸŸç”Ÿæˆå¼AIåº”ç”¨å®‰å…¨å®è·µæ¡ˆä¾‹ã€‚æ ¸å¿ƒå†…å®¹åŒ…æ‹¬ï¼š</p>
<p>1ï¼‰é€šè¿‡å®é™…çš„åº”ç”¨åœºæ™¯ï¼Œä»¥å­¦æ ¡åŠ©æ‰‹(SchoolAgent)ä¸ºä¾‹ï¼Œé€šè¿‡èŠå¤©ç•Œé¢è®©ä¸åŒè§’è‰²ï¼ˆå¦‚å­¦ç”Ÿã€æ•™å¸ˆã€ç›‘æŠ¤äººï¼‰åŸºäºå„è‡ªæƒé™æŸ¥è¯¢å’Œè·å–ä¿¡æ¯ã€‚</p>
<p>2ï¼‰å®‰å…¨æ§åˆ¶æœºåˆ¶çš„è®¾è®¡ï¼Œ</p>
<ul>
<li>ä½¿ç”¨Amazon Cognitoè¿›è¡Œç”¨æˆ·èº«ä»½éªŒè¯</li>
<li>é€šè¿‡Amazon Verified Permissions å®æ–½ç»†ç²’åº¦è®¿é—®æ§åˆ¶</li>
<li>ç¡®ä¿AIä»£ç†èƒ½è¯†åˆ«ç”¨æˆ·èº«ä»½å¹¶åªæä¾›æˆæƒèŒƒå›´å†…çš„æ•°æ®</li>
</ul>
<p>3ï¼‰è®¿é—®æƒé™è®¾è®¡ï¼š</p>
<ul>
<li>å®¶é•¿åªèƒ½è®¿é—®å…¶å­å¥³çš„æ•°æ®</li>
<li>æ•™å¸ˆä»…å¯æŸ¥çœ‹å…¶ä»»æ•™ç­çº§çš„ä¿¡æ¯</li>
<li>é€šè¿‡åˆ†å±‚å®‰å…¨æ§åˆ¶ç¡®ä¿æ•°æ®è®¿é—®å®‰å…¨</li>
</ul>
<p>é€šè¿‡å¦‚ä¸‹å‚è€ƒæ¶æ„ï¼Œå¯ä»¥å®ç°å®Œæ•´çš„èº«ä»½è®¤è¯ä¸æˆæƒæµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4802739975eb4fe9b48d2b3dbeb69627~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=qILauzuFW1bjeJFi6uB%2FfQF3puE%3D" alt="å›¾8.webp" loading="lazy"/></p>
<p align="center">å›¾8 â€“ æ„å»ºç«¯åˆ°ç«¯èº«ä»½è®¤è¯ä¸æˆæƒæ¶æ„</p>
<h3 data-id="heading-18">4.3 æ–¹æ¡ˆä¸‰ï¼š åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºæœåŠ¡æ„å»ºçµæ´»å¯æ§å…¨è‡ªå»ºæ–¹æ¡ˆ</h3>
<p>é‰´äº Amazon Bedrock AgentCore Identity å’Œ Bedrock Agents ç­‰ä¸“æœ‰æ‰˜ç®¡æ–¹æ¡ˆåœ¨ä¸­å›½åŒºå°šæœªè½åœ°ï¼Œä¼ä¸šå¯åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºç°æœ‰æœåŠ¡ï¼Œé‡‡ç”¨å®Œå…¨è‡ªå»ºæ–¹å¼çµæ´»å®ç° Agentic AI åº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†ã€‚</p>
<p>æœ¬æ–¹æ¡ˆå……åˆ†ç»“åˆä¼ä¸šè‡ªæœ‰ SSO/OIDC/ADã€JWT Tokenã€è‡ªä¸»ç”¨æˆ·æ± ã€API Gatewayã€IAMã€STSã€Secrets Manager åŠæ ‡å‡† API è°ƒç”¨é“¾ï¼Œå®ç°å…¨æµç¨‹é›¶æ‰˜ç®¡ã€æ•°æ®å¯æ§ã€æœ€å°æƒé™ã€åˆè§„å¯å®¡è®¡ã€‚æ¶æ„å…¼å®¹æ··åˆäº‘å’Œæœ¬åœ° ITï¼Œä¾¿äºæ¼”è¿›å’Œå¹³æ»‘å‡çº§ã€‚</p>
<p>ä¼˜åŠ¿ï¼šæ— éœ€ä¾èµ–äº‘ä¸Šæ‰˜ç®¡æœåŠ¡ï¼Œæ”¿ç­–åˆè§„æ€§å¼ºï¼Œæƒé™æ§åˆ¶ç»†è…»ï¼Œç»„ä»¶æ›¿æ¢çµæ´»ï¼Œé€‚é…å¤§å‹ä¼ä¸šå’Œé«˜åº¦è‡ªå®šä¹‰åœºæ™¯ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šæ•°æ®é«˜æ•æ„Ÿã€æƒé™å·®å¼‚å¤§ã€å¼‚æ„ IT ç¯å¢ƒã€å¯¹æ¥è‡ªæœ‰ ID ä½“ç³»æˆ–å¤šæ´»éƒ¨ç½²çš„ Agent åº”ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/528c680913c54edfa53394455ef5c0b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=qicc1JSNLUCN2gsnT0%2FkD2KDCPo%3D" alt="å›¾9.webp" loading="lazy"/></p>
<p align="center">å›¾9 â€“ åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºæœåŠ¡æ„å»ºçµæ´»å¯æ§å…¨è‡ªå»ºæ–¹æ¡ˆ</p>
<h3 data-id="heading-19">4.4 MCP Server è®¤è¯&amp;æˆæƒç®¡ç†</h3>
<p>ä»¥ä¸‹ç« èŠ‚ä»‹ç»ä½¿ç”¨Amazon AgentCoreå’ŒAmazon Cognitoç»„ä»¶å®ç°Agentä»£ç†MCP serverè®¤è¯é‰´æƒçš„å®æ–½ç¤ºä¾‹ã€‚</p>
<p>Amazon AgentCore æ˜¯ä¸€ç§æœåŠ¡ï¼Œæ—¨åœ¨ç®€åŒ–å’ŒåŠ é€Ÿ AI ä»£ç†çš„éƒ¨ç½²å’Œç®¡ç†ã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—å·¥å…·å’Œ APIï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºã€éƒ¨ç½²å’Œç®¡ç† AI ä»£ç†ã€‚Amazon AgentCore æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥çµæ´»é€‰æ‹©æœ€é€‚åˆè‡ªå·±çš„å·¥å…·ã€‚</p>
<p>Amazon Cognito æ˜¯ä¸€ç§ç”¨æˆ·èº«ä»½å’Œè®¿é—®ç®¡ç†æœåŠ¡ï¼Œå®ƒå…è®¸å¼€å‘è€…è½»æ¾åœ°æ·»åŠ ç”¨æˆ·æ³¨å†Œå’Œç™»å½•åŠŸèƒ½åˆ°ä»–ä»¬çš„åº”ç”¨ä¸­ã€‚Amazon Cognito æä¾›äº†ä¸¤ä¸ªä¸»è¦ç»„ä»¶ï¼š</p>
<ol>
<li>ç”¨æˆ·æ± ï¼šç”¨æˆ·æ± æ˜¯ä¸€ä¸ªå®Œå…¨æ‰˜ç®¡çš„ç”¨æˆ·ç›®å½•ï¼Œå¯ä»¥ç”¨äºç®¡ç†å’ŒéªŒè¯ç”¨æˆ·ã€‚ç”¨æˆ·æ± æ”¯æŒå¤šç§èº«ä»½éªŒè¯æœºåˆ¶ï¼ŒåŒ…æ‹¬ç”¨æˆ·åå’Œå¯†ç ã€ç”µå­é‚®ä»¶å’ŒçŸ­ä¿¡éªŒè¯ç ã€ç¤¾äº¤èº«ä»½æä¾›å•†ï¼ˆå¦‚ Googleã€Facebookï¼‰ç­‰ã€‚</li>
<li>èº«ä»½æ± ï¼šèº«ä»½æ± å…è®¸åº”ç”¨ç¨‹åºè·å–ä¸´æ—¶äºšé©¬é€Šäº‘ç§‘æŠ€å‡­è¯ï¼Œä»¥è®¿é—®äºšé©¬é€Šäº‘ç§‘æŠ€èµ„æºã€‚èº«ä»½æ± å¯ä»¥ä¸ç”¨æˆ·æ± é›†æˆï¼Œä¸ºç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æä¾›è®¿é—®æƒé™ã€‚<br/>
éƒ¨ç½² AgentCore MCP Server çš„è¯¦ç»†æ­¥éª¤ï¼š</li>
</ol>
<p>åœ¨éƒ¨ç½² AgentCore MCP Server æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Amazon Cognito è¿›è¡Œç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯çš„è®¾ç½®ï¼Œä»¥å®ç°é‰´æƒåŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„å®ç°æ­¥éª¤å’Œä»£ç ç¤ºä¾‹ï¼š</p>
<ol>
<li>åˆ›å»º Amazon Cognito ç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯</li>
</ol>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ç®¡ç†æ§åˆ¶å°ä¸­åˆ›å»ºä¸€ä¸ª Cognito ç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯ã€‚ä»¥ä¸‹æ˜¯åˆ›å»ºç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯çš„å‘½ä»¤ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">aws cognito<span class="hljs-operator">-</span>idp <span class="hljs-keyword">create</span><span class="hljs-operator">-</span><span class="hljs-keyword">user</span><span class="hljs-operator">-</span>pool <span class="hljs-comment">--pool-name mcp-server-user-pool</span>
aws cognito<span class="hljs-operator">-</span>idp <span class="hljs-keyword">create</span><span class="hljs-operator">-</span><span class="hljs-keyword">user</span><span class="hljs-operator">-</span>pool<span class="hljs-operator">-</span>client <span class="hljs-comment">--user-pool-id &lt;USER_POOL_ID&gt; --client-name mcp-server-app-client</span>
</code></pre>
<p>2.  åˆ›å»º IAM è§’è‰²</p>
<p>ä¸ºäº†è®© MCP æœåŠ¡èƒ½å¤Ÿä¸ Cognito è¿›è¡Œäº¤äº’ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª IAM è§’è‰²ï¼Œå¹¶é™„åŠ ç›¸åº”çš„ç­–ç•¥ã€‚ä»¥ä¸‹æ˜¯åˆ›å»º IAM è§’è‰²çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import boto3

<span class="hljs-attr">client</span> = boto3.client(<span class="hljs-string">'iam'</span>)

<span class="hljs-comment"># åˆ›å»º IAM è§’è‰²</span>
<span class="hljs-attr">response</span> = client.create_role(
    <span class="hljs-attr">RoleName</span>=<span class="hljs-string">'agentcore-mcp-server-role'</span>,
    <span class="hljs-attr">AssumeRolePolicyDocument</span>=json.dumps({
        "Version": "2012-10-17",
        "Statement": <span class="hljs-section">[
            {
                "Effect": "Allow",
                "Principal": {
                    "Service": "ec2.amazonaws.com"
                },
                "Action": "sts:AssumeRole"
            }
        ]</span>
    })
)

<span class="hljs-comment"># é™„åŠ  Cognito è®¿é—®ç­–ç•¥</span>
client.attach_role_policy(
    <span class="hljs-attr">RoleName</span>=<span class="hljs-string">'agentcore-mcp-server-role'</span>,
    <span class="hljs-attr">PolicyArn</span>=<span class="hljs-string">'arn:aws:iam::aws:policy/AmazonCognitoPowerUser'</span>
)
</code></pre>
<p>3.  é…ç½® AgentCore Runtime</p>
<p>åœ¨é…ç½® AgentCore Runtime æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®š Cognito ç”¨æˆ·æ± å’Œåº”ç”¨å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œä»¥åŠ IAM è§’è‰²çš„ ARNã€‚ä»¥ä¸‹æ˜¯é…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">response</span> = agentcore_runtime.configure(
    <span class="hljs-attr">entrypoint</span>=<span class="hljs-string">'mcp_server.fixed.py'</span>,
    <span class="hljs-attr">execution_role_arn</span>=<span class="hljs-string">'arn:aws:iam::687912291502:role/agentcore-mcp-server-auto-role'</span>,
    <span class="hljs-attr">auto_create_ecrs</span>=<span class="hljs-literal">True</span>,
    <span class="hljs-attr">requirements_txt</span>=<span class="hljs-string">'requirements.txt'</span>,
    <span class="hljs-attr">region</span>=<span class="hljs-string">'region'</span>,
    <span class="hljs-attr">authorizer_configuration</span>=auth_config,
    <span class="hljs-attr">protocol</span>=<span class="hljs-string">'MCP'</span>,
    <span class="hljs-attr">agent_name</span>=<span class="hljs-string">'mcp_server_auto'</span>
)
</code></pre>
<p>4.  å¯åŠ¨ AgentCore Runtime</p>
<p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¯åŠ¨ AgentCore Runtimeï¼Œå¹¶é€šè¿‡ Cognito è¿›è¡Œç”¨æˆ·è®¤è¯å’Œé‰´æƒã€‚ä»¥ä¸‹æ˜¯å¯åŠ¨ç¤ºä¾‹ä»£ç ï¼š</p>
<p>launch_result = agentcore_runtime.launch()</p>
<p>åœ¨ AI Agentåº”ç”¨ä¸­ï¼ŒMCP Server çš„é‰´æƒæœºåˆ¶æ˜¯ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§å’Œç¨³å®šæ€§çš„å…³é”®ã€‚é€šè¿‡ Amazon AgentCore å’Œ Amazon Cognitoï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å®ç°å’Œç®¡ç† MCP æœåŠ¡å™¨çš„é‰´æƒåŠŸèƒ½ã€‚è¿™ä¸ä»…æé«˜äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œè¿˜ç®€åŒ–äº†å¼€å‘å’Œéƒ¨ç½²è¿‡ç¨‹ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äº AI æ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘çš„å¼€å‘ã€‚</p>
<h2 data-id="heading-20">5. ç»“è¯­</h2>
<p>åœ¨Agentic AIåº”ç”¨ç³»ç»Ÿå¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œèº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†å·²æˆä¸ºæ„å»ºå®‰å…¨å¯ä¿¡AIç”Ÿæ€ç³»ç»Ÿçš„åŸºçŸ³ã€‚ä»â€AgentSmithâ€åˆ°â€MCP Inspectorâ€ç­‰å®‰å…¨äº‹ä»¶çš„æ•™è®­è¡¨æ˜ï¼Œæˆ‘ä»¬å¿…é¡»é«˜åº¦é‡è§†AI Agentçš„èº«ä»½ç®¡ç†é—®é¢˜ã€‚æ„å»ºå®‰å…¨å¯ä¿¡çš„ç³»ç»Ÿéœ€è¦éµå¾ªæœ€å°æƒé™ã€é›¶ä¿¡ä»»éªŒè¯ã€çºµæ·±é˜²å¾¡å’ŒæŒç»­ç›‘æ§ç­‰æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼ŒåŒæ—¶é‡‡ç”¨é˜¶æ®µåŒ–å®æ–½ç­–ç•¥ï¼Œä»åŸºç¡€èº«ä»½è®¤è¯é€æ­¥æ‰©å±•åˆ°å®Œæ•´çš„å®‰å…¨ä½“ç³»ã€‚</p>
<p>é¢å¯¹ä¼ ç»Ÿèº«ä»½ç®¡ç†å‘åŠ¨æ€åŒ–ã€æ™ºèƒ½åŒ–å’Œç»†ç²’åº¦æ–¹å‘çš„æ¼”è¿›ï¼Œä¼ä¸šå¯ä»¥é€šè¿‡é‡‡ç”¨OAuth 2.0ã€å»ä¸­å¿ƒåŒ–èº«ä»½ç­‰æŠ€æœ¯æ¡†æ¶ï¼Œç»“åˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcatalog.workshops.aws%2Fsecuring-genai-app%2Fen-US" target="_blank" title="https://catalog.workshops.aws/securing-genai-app/en-US" ref="nofollow noopener noreferrer">Amazon Bedrock AgentCore IdentityÂ </a>ç­‰äº‘å¹³å°è§£å†³æ–¹æ¡ˆï¼Œæœ‰æ•ˆåº”å¯¹æ··æ·†ä»£ç†äººç­‰ç‰¹æœ‰çš„å®‰å…¨å¨èƒã€‚é€šè¿‡å»ºç«‹ç¡®å®šæ€§çš„æˆæƒæœºåˆ¶å’Œå®‰å…¨çš„èº«ä»½ä¿¡æ¯ä¼ é€’é€šé“ï¼Œç¡®ä¿AI Agentåœ¨ä»£è¡¨ç”¨æˆ·æ‰§è¡Œä»»åŠ¡æ—¶æ—¢ä¿æŒé«˜æ•ˆæ€§ï¼Œåˆä¸å¤±å®‰å…¨æ€§ã€‚</p>
<p>éšç€æŠ€æœ¯çš„æŒç»­æˆç†Ÿå’Œæ ‡å‡†åŒ–è¿›ç¨‹çš„æ¨è¿›ï¼ŒAI Agentèº«ä»½ç®¡ç†å°†å˜å¾—æ›´åŠ æ™ºèƒ½å’Œè‡ªé€‚åº”ã€‚ç°åœ¨æ­£æ˜¯ä¼ä¸šè§„åˆ’å’Œå®æ–½AI Agentèº«ä»½ç®¡ç†ç³»ç»Ÿçš„æœ€ä½³æ—¶æœºï¼Œå”¯æœ‰å»ºç«‹èµ·å®Œå–„çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†ä½“ç³»ï¼Œæ‰èƒ½ç¡®ä¿AI Agentåœ¨ä¸ºäººç±»ç¤¾ä¼šåˆ›é€ ä»·å€¼çš„åŒæ—¶ï¼Œå§‹ç»ˆä¿æŒåœ¨å¯æ§å’Œå®‰å…¨çš„è½¨é“ä¸Šè¿è¡Œã€‚è¿™ä¸ä»…æ˜¯æŠ€æœ¯å‘å±•çš„å¿…ç„¶è¦æ±‚ï¼Œæ›´æ˜¯AIæŠ€æœ¯èµ°å‘æˆç†Ÿå’Œæ™®åŠçš„é‡è¦åŸºçŸ³ã€‚<br/>
<strong>æœ¬ç¯‡ä½œè€…</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c9a6564354e426a9d617e8adb2f6851~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763350819&amp;x-signature=ZEcbvf58xsNIef4RkozS8CIRRy0%3D" alt="ä½œè€….webp" loading="lazy"/></p>
<p>å…³äºAgentic AIåŸºç¡€è®¾æ–½çš„æ›´å¤šå®è·µç»éªŒå‚è€ƒï¼Œæ¬¢è¿ç‚¹å‡»ï¼š<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentive-ai-infrastructure-practice-series-1" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentive-ai-infrastructure-practice-series-1" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆä¸€ï¼‰ï¼šAgentåº”ç”¨å¼€å‘ä¸è½åœ°å®è·µæ€è€ƒ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-sandbox-practice%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-sandbox-practice/" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäºŒï¼‰ï¼šä¸“ç”¨æ²™ç›’ç¯å¢ƒçš„å¿…è¦æ€§ä¸å®è·µæ–¹æ¡ˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-infrastructure-deep-practice-experience-thinking-series-three-best-practices-for-agent-memory-module" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-infrastructure-deep-practice-experience-thinking-series-three-best-practices-for-agent-memory-module" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆä¸‰ï¼‰ï¼šAgentè®°å¿†æ¨¡å—çš„æœ€ä½³å®è·µ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-infrastructure-practice-experience-series-four-mcp-server-from-local" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-infrastructure-practice-experience-series-four-mcp-server-from-local" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆå››ï¼‰ï¼šMCPæœåŠ¡å™¨ä»æœ¬åœ°åˆ°äº‘ç«¯çš„éƒ¨ç½²æ¼”è¿›</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-infrastructure-practice-series-5%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-infrastructure-practice-series-5/" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆäº”ï¼‰ï¼šAgentåº”ç”¨ç³»ç»Ÿä¸­çš„èº«ä»½è®¤è¯ä¸æˆæƒç®¡ç†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagent-quality-evaluation%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agent-quality-evaluation/" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆå…­ï¼‰ï¼šAgentè´¨é‡è¯„ä¼°</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fagentic-ai-infrastructure-practice-series-7%2F" target="_blank" title="https://aws.amazon.com/cn/blogs/china/agentic-ai-infrastructure-practice-series-7/" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆä¸ƒï¼‰ï¼šå¯è§‚æµ‹æ€§åœ¨Agentåº”ç”¨çš„æŒ‘æˆ˜ä¸å®è·µ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fcn%2Fblogs%2Fchina%2Fprivacy-and-security-of-agent-applications" target="_blank" title="https://aws.amazon.com/cn/blogs/china/privacy-and-security-of-agent-applications" ref="nofollow noopener noreferrer">Agentic AIåŸºç¡€è®¾æ–½å®è·µç»éªŒç³»åˆ—ï¼ˆå…«ï¼‰ï¼šAgentåº”ç”¨çš„éšç§å’Œå®‰å…¨</a></p>
<p>*å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cursoråœ¨å›æ”¶å›¢é˜Ÿçš„å®è·µ]]></title>    <link>https://juejin.cn/post/7570500819888439339</link>    <guid>https://juejin.cn/post/7570500819888439339</guid>    <pubDate>2025-11-10T03:52:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7570500819888439339" data-draft-id="7569977160276852779" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cursoråœ¨å›æ”¶å›¢é˜Ÿçš„å®è·µ"/> <meta itemprop="keywords" content="Cursor"/> <meta itemprop="datePublished" content="2025-11-10T03:52:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cursoråœ¨å›æ”¶å›¢é˜Ÿçš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T03:52:37.000Z" title="Mon Nov 10 2025 03:52:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>æœ€è¿‘ä¸€æ®µæ—¶é—´ï¼Œå›æ”¶å›¢é˜Ÿä¸€ç›´åšæŒç”¨Cursoræ¥è¾…åŠ©å¼€å‘ï¼Œå¹¶åœ¨AIå¼€å‘æ¨¡å¼ä¸Šè¿›è¡Œäº†å¤šæ¬¡è¿­ä»£ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº›æˆ‘ä»¬åœ¨AIç¼–ç¨‹æ–¹é¢çš„å®è·µå¿ƒå¾—ã€‚</p>
<p>é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ï¼ŒAIç¼–ç¨‹å¹¶ä¸èƒ½å–ä»£ç¨‹åºå‘˜çš„ç‹¬ç«‹ç¼–ç èƒ½åŠ›ï¼Œä¹Ÿä¸æ˜¯è¯´ç®€å•é…ç½®å‡ ä¸ªMCPå°±èƒ½è®©AIçš„ç¼–ç¨‹èƒ½åŠ›å‘ç”Ÿè´¨çš„é£è·ƒã€‚ä»Šå¤©æˆ‘å°†é‡ç‚¹ä»å®é™…åº”ç”¨å‡ºå‘ï¼Œåˆ†äº«ä¸€äº›AIç¼–ç¨‹çš„æ€è·¯ä¸æµç¨‹ä¼˜åŒ–ç»éªŒï¼Œå¸®åŠ©å„ä½çœŸæ­£çš„åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼ŒæŠŠAIç”¨èµ·æ¥ã€‚</p>
<h2 data-id="heading-1">æˆ‘ä»¬åˆ°åº•èƒ½ç”¨Cursorå¹²ä»€ä¹ˆ</h2>
<p>æˆ‘ä¸€ç›´åœ¨æ€è€ƒï¼Œä½œä¸ºä¸€ä¸ªæœˆä½¿ç”¨æˆæœ¬è¶…è¿‡100å—çš„â€œæƒå¨â€å·¥å…·æ¥è¯´ï¼Œå¦‚æœåªè®©ä»–åšä¸€äº›beançš„ç”Ÿæˆï¼Œmapperçš„ç”Ÿæˆï¼Œæœªå…å¤ªè¿‡äºæµªè´¹ã€‚ä½†æ˜¯å¦‚æœç›´æ¥æŠŠéœ€æ±‚æ–‡æ¡£å–‚ç»™ä»–ï¼Œç”Ÿæˆçš„ä»£ç è·ç¦»æˆ‘ä»¬çš„æœŸæœ›åˆå¤ªå¤§ã€‚æˆ‘ä»¬æ€»è¯´ï¼Œæƒ³è®©AIç”Ÿæˆç¬¦åˆè¦æ±‚çš„ä»£ç ï¼Œéœ€è¦è¯¦ç»†çš„å°†æˆ‘ä»¬çš„éœ€æ±‚å†™æˆæç¤ºè¯å‘Šè¯‰AIï¼Œä½†æ˜¯åˆ°åº•å¦‚ä½•æ‰ç®—è¯¦ç»†å‘¢ï¼Ÿå¦‚ä½•æ‰èƒ½å†™å‡ºè¿™ä»½è¯¦ç»†çš„æç¤ºè¯å‘¢ï¼Ÿ</p>
<p>ä¸‹é¢æ˜¯æˆ‘ä½¿ç”¨Cursorè¿›è¡Œé¡¹ç›®å¼€å‘çš„ä¸‰æ­¥èµ°ï¼š</p>
<ol>
<li>ç”±Cursorå¸®åŠ©å¼€å‘è€…æ‹†åˆ†é¡¹ç›®â€”â€”åˆæ­¥å®Œæˆæç¤ºè¯æ¡†æ¶</li>
<li>ç”±å¼€å‘è€…å¸®åŠ©Cursorç†è§£é¡¹ç›®â€”â€”ä¸°å¯Œæç¤ºè¯å†…å®¹</li>
<li>å®Œæˆå¼€å‘åç”±Cursorå¸®åŠ©å¼€å‘è€…è¿›è¡Œå›å½’éªŒè¯</li>
</ol>
<br/>
<h3 data-id="heading-2">ä¸€ã€è®©cursorå¸®åŠ©ä½ æ›´å¥½çš„æ‹†åˆ†é¡¹ç›®</h3>
<p>æ—¢ç„¶ç›´æ¥ç”Ÿæˆä»£ç éš¾åº¦å¤ªå¤§ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½å…ˆå°è¯•è®©AIåšä¸€äº›æ›´ç®€å•çš„äº‹æƒ…ï¼Œæ¯”å¦‚åˆ†æä¸€ä¸‹éœ€æ±‚æ–‡æ¡£ã€‚</p>
<p>ä¸€èˆ¬æ¥è®²ï¼Œå¯¹äºä¸€ä¸ªé¡¹ç›®çš„åˆ†æä¸»è¦åˆ†ä¸¤æ­¥ï¼š</p>
<ol>
<li>å¯¹äºé¡¹ç›®æ–°æµç¨‹çš„åˆ†æ</li>
<li>å¯¹äºç›¸å…³ç°çŠ¶çš„åˆ†æ</li>
</ol>
<p>ä¸Šè¿°æ­¥éª¤æ­¥å®Œæˆåæˆ‘ä»¬æœŸæœ›Cursorèƒ½å¤ŸåŸºäºéœ€æ±‚PRDæ–‡æ¡£ï¼Œå¸®æˆ‘ä»¬æ€»ç»“ä¸€ä»½å…¼å®¹å½“ä¸‹ç³»ç»Ÿé€»è¾‘çš„åˆæ­¥çš„åŠŸèƒ½åˆ†ææ–‡æ¡£ï¼ˆä¸éœ€è¦åŠŸèƒ½çš„å…·ä½“å®ç°æ–¹æ¡ˆï¼Œåªéœ€è¦ç¡®å®šæœ‰å“ªäº›åŠŸèƒ½å³å¯ï¼‰ï¼ŒåŒ…æ‹¬ä¸€äº›å®ä½“ç±»ã€VOå¯¹è±¡çš„å®šä¹‰ï¼Œæ¥å£å®šä¹‰ï¼Œæ•°æ®åº“è¡¨å®šä¹‰ç­‰ç­‰ã€‚</p>
<h4 data-id="heading-3">1ã€é’ˆå¯¹æ–°æµç¨‹ï¼ˆPRDæ–‡æ¡£ï¼‰çš„åˆ†æ</h4>
<p>Cursorå¯ä»¥å¾ˆå¥½çš„åˆ†æå¹¶æ€»ç»“PRDæ–‡æ¡£çš„å†…å®¹ï¼Œä½†äº§å“ç»™å‡ºçš„PRDæ–‡æ¡£ä¸­ä¸å¯é¿å…çš„ä¼šå¯¹ä¸€äº›â€œä¼—æ‰€å‘¨çŸ¥â€çš„ä¸Šä¸‹æ–‡è¿›è¡Œçœç•¥ï¼ŒCursorä¹Ÿå› æ­¤æ— æ³•å¾—çŸ¥é¡¹ç›®çš„å…¨è²Œï¼Œå•çº¯æŠŠPRDæ–‡æ¡£å–‚ç»™Cursorå¹¶ä¸èƒ½è®©ä»–ç›´æ¥ç”Ÿæˆç¬¦åˆæˆ‘ä»¬æœŸæœ›çš„ä»£ç ã€‚</p>
<p>ä½†è¿™ä¸ä»£è¡¨æˆ‘ä»¬åœ¨è¿™ä¸€é˜¶æ®µå®Œå…¨æ— æ³•è®©Cursorä¸ºæˆ‘ä»¬åˆ›é€ ä»·å€¼ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Cursorçš„åˆ†ææ€»ç»“èƒ½åŠ›ï¼Œæ¢³ç†PRDæ–‡æ¡£ä¸­çš„åŠŸèƒ½ç‚¹ä¸è¦ç‚¹ï¼ŒåŠ é€Ÿè‡ªå·±ç†è§£é¡¹ç›®ï¼Œå¹¶ç»“åˆè‡ªå·±å¯¹prdçš„ç†è§£è¿›è¡ŒåŒå‘éªŒè¯ã€‚é¿å…åæœŸå¼€å‘æ—¶å‡ºç°ä¸äº§å“ç†è§£ä¸ç¬¦æˆ–è€…é—æ¼åŠŸèƒ½ç‚¹ã€‚</p>
<p>ä½¿ç”¨Cursorè¯»å–å¹¶åˆ†ææœ¬æ¬¡éœ€æ±‚PRDæ–‡æ¡£çš„å†…å®¹æ—¶ï¼Œä¸ºäº†ä¸è¢«ä¸Šä¸‹æ–‡é•¿åº¦æ‰€é™åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦è®©Cursorå°†ä»–çš„æ€è€ƒç»“æœè¿›è¡Œè®°å½•ã€‚ä¾‹å¦‚ä¸‹é¢çš„æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">https://dashen.zhuanspirit.com/pages/viewpage.action?<span class="hljs-attr">pageId</span>=xxxxxxxx 
æå–ä¸€ä¸‹ä¸Šé¢é“¾æ¥çš„æ–‡æ¡£ä¸­çš„å†…å®¹ã€‚å¸®æˆ‘æç‚¼ã€XXXXXè´¦å•ã€‘éƒ¨åˆ†ç›¸å…³åŠŸèƒ½ï¼Œæœ‰å“ªäº›éœ€è¦å¼€å‘çš„åŠŸèƒ½ç‚¹ï¼Œæ³¨æ„ï¼Œæˆ‘ä»¬æœ¬æ¬¡ä»…éœ€è¦æŸ¥è¯¢XXXXåˆ—è¡¨ä»¥åŠæŸ¥è¯¢XXXXæµæ°´è¯¦æƒ…ï¼Œå…¶ä½™ç›¸å…³åŠŸèƒ½å’Œç»„ä»¶å·²ç»å®ç°å®Œæˆã€‚
åˆ†æä½ éœ€è¦æ‹†åˆ†å‡ºå¤šå°‘ä¸ªåŠŸèƒ½ç‚¹ä»¥åŠæ¥å£

åœ¨æˆ‘è®©ä½ å†™ä»£ç ä¹‹å‰ä¸è¦ç”Ÿæˆä»£ç ï¼Œå…ˆé€æ­¥åˆ†æéœ€æ±‚ï¼Œå†è¯´æ˜ä½ æ‰“ç®—æ€ä¹ˆåš
å°†ä½ çš„æ€è€ƒä»¥mdçš„å½¢å¼ä¿å­˜åœ¨.docs/æŠ€æœ¯è®¾è®¡.mdä¸‹
</code></pre>
<blockquote>
<p>ä¹Ÿè®¸ä½ çš„åœ¨çº¿PRDæ–‡æ¡£éœ€è¦ç™»é™†æ‰å¯æŸ¥çœ‹ï¼Œè¿™é‡Œç»™å‡ºä¸¤ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>æ‰¾åˆ°ä½ çš„æœ¬åœ°cookieï¼Œè®©Cursorå¸¦ç€cookieå¯¹ä½ çš„åœ¨çº¿æ–‡æ¡£è¿›è¡Œè®¿é—®</li>
<li>ä½¿ç”¨mcpï¼Œå…·ä½“æ–¹æ³•è¿™é‡Œä¸è¿›è¡Œå±•å¼€</li>
</ol>
</blockquote>
<p>ç„¶åï¼Œåå¤ä¸AIè¿›è¡Œæ²Ÿé€šï¼Œæ˜ç¡®å‘Šè¯‰ä»–æˆ‘ä»¬éœ€è¦ä»€ä¹ˆï¼Œä¸éœ€è¦ä»€ä¹ˆï¼Œä¾‹å¦‚ä¸‹é¢çš„æç¤ºè¯ã€‚</p>
<pre><code class="hljs">æˆ‘ä»¬ä¸åšæ•°æ®åŒæ­¥ä¸ä¿å­˜ç›¸å…³çš„å·¥ä½œï¼Œä»è®¾è®¡æ–¹æ¡ˆä¸­å‰”é™¤ï¼Œæ‰€æœ‰çš„æ•°æ®å·²ç»å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬åªéœ€è¦æŸ¥è¯¢å°±å¯ä»¥äº†
å¸®æˆ‘è®¾è®¡è¿™ä¸ªæ¥å£çš„æŸ¥è¯¢çš„å‚æ•°ä¸è¿”å›å€¼
</code></pre>
<br/>
<p>ä¸‹é¢æ˜¯åŸºäºCursorè¿›è¡ŒPRDæ–‡æ¡£åˆ†æçš„åŸºæœ¬æµç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/153b7c74e3f042a487efe480cc838e0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=%2BV%2Feyj2gMMJXYNrs%2BPxo%2BkdpoJQ%3D" alt="Cursorè¾…åŠ©ç¡®è®¤PRDæ–‡æ¡£åŠŸèƒ½ç‚¹çš„è¿‡ç¨‹" loading="lazy"/></p>
<p>é¦–å…ˆæ˜ç¡®ä¸€ç‚¹ï¼šä¸è¦è¯•å›¾è®©Cursoræ¥æ•™æˆ‘ä»¬å¦‚ä½•åšé¡¹ç›®ï¼Œè€Œæ˜¯è®©å®ƒååŠ©å®Œæˆæ¯ä¸ªç¯èŠ‚ã€‚æ‰€ä»¥å¦‚æœè§‰å¾—è‡ªå·±å¯ä»¥æ›´å¿«æ›´å‡†ç¡®çš„ä¿®æ”¹æ–‡æ¡£çš„æŸä¸€éƒ¨åˆ†ï¼Œä¸»åŠ¨å»ä¿®æ”¹ï¼Œä¸è¦è®©AIæ¥åšã€‚æ¯”å¦‚ï¼ŒAIå¸®å¿™è®¾è®¡äº†ä¸€ä¸ªå®ä½“å¯¹è±¡ï¼Œä½†æ˜¯å…¶ä¸­éƒ¨åˆ†å­—æ®µå‘½åä¸ç¬¦åˆæˆ‘ä»¬çš„ä¸šåŠ¡è¦æ±‚ï¼Œæˆ‘ä»¬å°±ä¸è¦è®©AIæ¥ä¿®æ”¹äº†ï¼Œç›´æ¥åŠ¨æ‰‹ä¿®æ”¹mdæ–‡æ¡£ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœä½ äº²è‡ªæ”¹åŠ¨çš„å†…å®¹å¾ˆå¤šï¼Œå»ºè®®ä¸‹æ¬¡è·ŸCursoræ²Ÿé€šçš„æ—¶å€™æ–°å¼€å¯ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œé‡æ–°è®©ä»–è¯»å–PRDæ–‡æ¡£åŠå¯¹åº”çš„åˆ†ææ–‡æ¡£ï¼Œå¦åˆ™Cursorä¼šä¿ç•™ä¹‹å‰ç”Ÿæˆçš„è®°å¿†ï¼Œå¯¼è‡´ä½ çš„æ”¹åŠ¨å¯èƒ½ä¸ä¼šç”Ÿæ•ˆã€‚</p>
<p>ä¸‹é¢æ˜¯æ­¤é˜¶æ®µç”Ÿæˆçš„åŠŸèƒ½åˆ†ææ–‡æ¡£çš„éƒ¨åˆ†å±•ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cad7926278946eb98ab687225d1ef9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=phbq6jfAKDVncGSDsG3orHZC9H4%3D" alt="img" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d701f588f6b74d6aa757431eeafd1267~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=guqaeK7MweqHyD3xrcqpN%2BN1Whk%3D" alt="CursoråŸºäºPRDæ–‡æ¡£åˆæ­¥ç”Ÿæˆçš„æ–‡æ¡£" loading="lazy"/></p>
<h4 data-id="heading-4">2ã€å¯¹äºç›®å‰å·²æœ‰ä»£ç çš„åˆ†æï¼Œä»¥åŠå½±å“èŒƒå›´åˆ†æ</h4>
<p>ç›¸æ¯”äºå¼€å‘è€…æ¥è¯´ï¼ŒCursorä¼šæ›´è´´è¿‘ä»£ç ã€‚æˆ‘ä»¬å¯ä»¥åœ¨Cursorçš„ååŠ©ä¸‹æ›´å¥½çš„å®Œæˆç°æœ‰ä¸šåŠ¡æµç¨‹çš„æ¢³ç†ã€‚
æ›´å…·ä½“çš„è®²ï¼Œæˆ‘ä»¬å¯ä»¥ä»éœ€æ±‚çš„ç›®æ ‡æ”¹åŠ¨ç‚¹å¼€å§‹ï¼Œæ¢³ç†å…¶æ‰€å±åŠŸèƒ½å’Œå®ç°æ–¹å¼ï¼ŒåŒ…å«æ•°æ®ç®¡ç†ã€äº¤äº’æµç¨‹ç­‰ç­‰ã€‚
è¿™é‡Œä»‹ç»ä¸€ä¸‹æˆ‘ä»¬å¸¸ç”¨çš„Cursoræ’ä»¶ï¼š
Mermaid Previewæ’ä»¶ï¼Œä¸Markdown Preview Enhancedæ’ä»¶ã€‚</p>
<blockquote>
<p>æµç¨‹å›¾ç”Ÿæˆæ’ä»¶
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2936d20205f84e8096c5483082f0f7c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=WhNhktifJKbaS%2BXV%2BkEzB8fqYcA%3D" alt="img" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6c1026715a04c2e9af783feef7551fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=c5jVMHbT5BU7uYDSapg1APaFJpQ%3D" alt="img" loading="lazy"/></p>
</blockquote>
<p>å®‰è£…å®Œæ’ä»¶å¹¶é‡å¯cursoråæˆ‘ä»¬ä¾¿å¯ä»¥é€šè¿‡å¦‚ä¸‹æç¤ºè¯è¿›è¡Œæµç¨‹å›¾ç”Ÿæˆäº†ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">com.xxx.xxx.xxx.xxx.facade.SxxxxxxxxFacade<span class="hljs-meta">#getxxxxxx</span>
é’ˆå¯¹è¯¥æ–¹æ³•å¸®æˆ‘ç”Ÿæˆä¸€ä¸ª.mdçš„ä¸šåŠ¡æµç¨‹å›¾
</code></pre>
<br/>
<p>å¯¹äºå¤æ‚çš„ç³»ç»Ÿæµç¨‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºæ­¤ç§æ–¹æ³•ç”Ÿæˆæµç¨‹å›¾ï¼Œè¾…åŠ©ç¡®å®šæœ¬æ¬¡æ”¹åŠ¨çš„ä»£ç çš„å½±å“èŒƒå›´ã€‚</p>
<h3 data-id="heading-5">äºŒã€å¸®åŠ©Cursoræ›´å¥½çš„ç†è§£é¡¹ç›®ï¼Œå¹¶ç”Ÿæˆä»£ç </h3>
<p>æˆ‘ä»¬æ€»æ˜¯å¸Œæœ›æœ‰ä¸€ä¸ªå·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬æŒ–æ˜AIçš„æ½œåŠ›ï¼Œè®©ä»–æ›´å¥½çš„æ˜ç™½æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œäº†è§£æˆ‘ä»¬çš„ä¸šåŠ¡ï¼Œä¾‹å¦‚å„ç§çŸ¥è¯†åº“ï¼Œå„ç§Ruleï½¡å³ä½¿AIçš„æ€ç»´èƒ½åŠ›å¯ä»¥ä¸çœŸäººåª²ç¾ï¼Œæˆ‘ä»¬ä¹Ÿå¾ˆéš¾æƒ³è±¡è®©ä½ èº«è¾¹çš„æŸä¸€ä½ç»éªŒä¸°å¯Œçš„åŒäº‹ä»…ä¾é äº§å“æ–‡æ¡£å°±å¯ä»¥å‡†ç¡®çš„å®Œæˆé¡¹ç›®å¼€å‘ã€‚é¡¹ç›®è¿‡ç¨‹ä¸­å¿…ç„¶ä¼šç»å†å¤šæ¬¡æ²Ÿé€š,å¤šæ¬¡æ–¹æ¡ˆä¿®æ­£ï¼Œæœ€ç»ˆå¤šæ–¹è¾¾æˆä¸€è‡´ï¼Œå†è¿›å…¥å¼€å‘é˜¶æ–­ã€‚
åŒæ ·ï¼Œåœ¨æ­£å¼è¿›è¡Œå¼€å‘å‰ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æœ‰ä¸€ä»½æŠ€æœ¯æ–‡æ¡£æ¥æŒ‡å¯¼Cursorè¿›è¡Œå¼€å‘ã€‚<strong>ä¸åŒäºå‰é¢éœ€æ±‚æ–‡æ¡£çš„ç®€å•åˆ†æï¼Œè¿™ä¸€éƒ¨åˆ†çš„åˆ†æéœ€è¦å¯¹æ¯ä¸€ä¸ªåŠŸèƒ½æœ‰è¯¦ç»†çš„æè¿°</strong>ã€‚æˆ‘ä»¬å¯ä»¥åŸºäºä¹‹å‰è½åœ°mdæ–‡æ¡£ç»§ç»­è¿›è¡Œå®Œå–„ã€‚è¿™ä¸€é˜¶æ®µçš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ºCursorè¡¥å……ä¸Šä¸‹æ–‡ç»†èŠ‚å¹¶æ ¸éªŒCursorç»“è®ºçš„è¿‡ç¨‹ã€‚æˆ‘ä»¬éœ€è¦é’ˆå¯¹æ¯ä¸€ä¸ªåŠŸèƒ½ç‚¹ï¼š</p>
<ol>
<li><strong>è°ƒæ•´AIçš„å‘½åæ–¹å¼ä¸ä»£ç ç”Ÿæˆä½ç½®</strong>ï¼ˆå¯ä»¥ä½¿ç”¨Ruleè¿›è¡Œç®€åŒ–ï¼‰ã€‚</li>
<li><strong>è°ƒæ•´AIä½¿ç”¨çš„å·¥å…·ç±»ä¸æœåŠ¡ç±»ã€‚</strong></li>
<li><strong>è°ƒæ•´AIçš„é€»è¾‘ç»†èŠ‚</strong>ï¼ˆä¾‹å¦‚è°ƒæ•´æ ¡éªŒè§„åˆ™ï¼Œåˆ¤æ–­é¡ºåºç­‰ï¼‰ã€‚</li>
<li><strong>è°ƒæ•´AIçš„ä¸šåŠ¡ç»†èŠ‚</strong>ï¼ˆä¼˜å…ˆä»PRDæ–‡æ¡£ä¸ŠèŠ‚é€‰åŸæ–‡ï¼Œå°è¯•è®©Cursorç†è§£ã€‚å¦‚æœPRDæ–‡æ¡£æ²¡æœ‰å†™æ¸…ä¸šåŠ¡æµç¨‹ï¼Œå°±è‡ªå·±åŠ¨æ‰‹æè¿°æµç¨‹æˆ–è€…å¹²è„†ç›´æ¥è®©Cursorè·³è¿‡ç”Ÿæˆå¹¶é¢„ç•™æ–¹æ³•ï¼Œæ–¹ä¾¿åé¢è‡ªå·±åŠ¨æ‰‹è¡¥å……é€»è¾‘ï¼‰ã€‚</li>
</ol>
<p>æœ€ç»ˆæˆ‘ä»¬å¾—åˆ°äº†è¿™æ ·ä¸€ä»½è¯¦ç»†æè¿°äº†ä¸šåŠ¡åŠŸèƒ½çš„mdæ–‡æ¡£ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6681742d8fa54dbb8528f5c798412597~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=ud5L%2BwVmxA3ksQenWshch2Is3rQ%3D" alt="img" loading="lazy"/></p>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œå¾—åˆ°çš„è¿™ä»½æ–‡æ¡£å®é™…ä¸Šæ˜¯æˆ‘ä»¬ä¸Cursoréƒ½èƒ½ç†è§£ï¼Œå¹¶ä¸”è¾¾æˆä¸€è‡´çš„ã€‚æˆ‘ä»¬ç»ˆäºå¾—åˆ°äº†é‚£ä»½å¯ä»¥ä¾›æˆ‘ä»¬ç”¨ä½œâ€œç”Ÿæˆæç¤ºè¯â€çš„åŠŸèƒ½åˆ†ææ–‡æ¡£ï¼ŒåŸºäºè¿™ä»½æ–‡æ¡£åç»­Cursorç”Ÿæˆçš„ä»£ç ä¹Ÿéƒ½åŸºæœ¬å¯ä»¥æ»¡è¶³è¦æ±‚ã€‚</p>
<p>ä¸‹å›¾ä¸ºä½¿ç”¨Cursorç”Ÿæˆä»£ç çš„æ•´ä½“é€»è¾‘æµç¨‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f17d9f31e86452ab4bb6a83b6e4a9fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763351557&amp;x-signature=wIoB931QkHRBWXsDetZcpDQh7lU%3D" alt="img" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬æ¯æ¬¡åªå°±ä¸€ä¸ªåŠŸèƒ½ç‚¹è¿›è¡Œåˆ†æï¼Œå¹¶ä¸”ä¸€æ—¦ä½ è§‰å¾—è¿™ä¸ªåŠŸèƒ½ç‚¹å·²ç»ç›¸å¯¹å®Œå–„ï¼Œå°½å¿«è½åœ°æˆä»£ç ï¼Œä¸è¦ç•™åœ¨ä¸€èµ·ï¼Œè®©AIæœ€åä¸€èµ·ç”Ÿæˆã€‚
ä¸€æ–¹é¢AIåœ¨å¤„ç†è¿‡å¤šçš„å†…å®¹æ—¶ä¼šä¸å¯é¿å…çš„äº§ç”Ÿåå·®ï¼Œå¦ä¸€æ–¹é¢ï¼Œå¦‚æœé¡¹ç›®è¿‡å¤§ï¼Œæˆ‘ä»¬ä¹Ÿå®¹æ˜“å¿˜è®°ä¸€äº›ç»†èŠ‚ï¼Œå¯¼è‡´èŠ±è´¹é¢å¤–çš„æ—¶é—´æ¥è¿›è¡Œå›å¿†ä¸éªŒè¯ã€‚</p>
<h3 data-id="heading-6">ä¸‰ã€Cursorå¸®åŠ©å¼€å‘è€…è¿›è¡Œå›å½’éªŒè¯</h3>
<p>é™¤å»å¼€å‘é˜¶æ®µçš„è¾…åŠ©ä½œç”¨ï¼ŒCursorå¦ä¸€å¤§ä½œç”¨ä½“ç°åœ¨å¼€å‘åçš„è¾…åŠ©è´¨é‡ä¿è¯ä¸Šã€‚é€šå¸¸ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li>æ”¹åŠ¨å½±å“è¯„ä¼°</li>
<li>åŠŸèƒ½éªŒè¯</li>
</ol>
<p>ä¸ºäº†å®ç°ä¸Šè¿°èƒ½åŠ›ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸‰æ­¥èµ°çš„æ–¹å¼æ¥è¿›è¡Œ</p>
<h4 data-id="heading-7">1ã€æ”¹åŠ¨èŒƒå›´æ•´ç†</h4>
<p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤é€ä¸ªæ–‡ä»¶åˆ†æå½“å‰åˆ†æ”¯æ”¹åŠ¨ç‚¹å¹¶è¾“å‡ºåˆ°cr.diff æ–‡ä»¶ä¸­ï¼Œéšååœ¨mdæ–‡ä»¶æœ«å°¾è¿›è¡Œæ€»ç»“ï¼šgit diff origin/master Â &gt; cr.diff</p>
<h4 data-id="heading-8">2ã€åŸºæœ¬ä»£ç å®¡æŸ¥</h4>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æç¤ºè¯å¼•å¯¼Cursorè¿›è¡ŒåŸºæœ¬ä»£ç å®¡æŸ¥ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æ‰«ædiff æ–‡ä»¶ä¸­çš„å·®å¼‚ä»£ç ã€‚reviwe çš„è§„åˆ™å¦‚ä¸‹

<span class="hljs-bullet">1.</span> æ–¹æ³•ä½“è¡Œæ•°åº”å°‘äº100è¡Œ, ä¸åŒ…æ‹¬ç©ºè¡Œ,å’Œæ³¨é‡Š
<span class="hljs-bullet">2.</span> æšä¸¾å®šä¹‰éœ€è¦æœ‰ä¸¤ä¸ªä»¥ä¸Šå±æ€§, code, name, å¹¶ä¸”éœ€è¦æœ‰é€šè¿‡codeè·å–æšä¸¾é¡¹çš„æ–¹æ³•
<span class="hljs-bullet">3.</span> æ¥å£è¿”å›falseÂ , å‰ç«¯æ˜¯å¦æœ‰å¯¹falseè¿›è¡Œå¤„ç†Â 
<span class="hljs-bullet">4.</span> throw äº†å¼‚å¸¸çš„ä½ç½®, ä¸€å®šè¦æ‰“logæ—¥å¿—Â 
<span class="hljs-bullet">5.</span> æ‰€æœ‰çš„public å…¬æœ‰æ–¹æ³•éƒ½è¦æ‰“å°å…¥å‚log.infoæ—¥å¿—Â 
<span class="hljs-bullet">6.</span> æ‰€æœ‰çš„public å…¬æœ‰æ–¹æ³•, ç»“æŸéƒ½è¦æ‰“å°ç»“æŸæ—¥å¿—Â 
<span class="hljs-bullet">7.</span> æ‰€æœ‰è°ƒç”¨rpcçš„æ–¹æ³•, éƒ½è¦æ‰“å°æ—¥å¿—
<span class="hljs-bullet">8.</span> æ‰€æœ‰æ–¹æ³•éƒ½è¦æœ‰æ–¹æ³•çº§åˆ«çš„æ³¨é‡Š
<span class="hljs-bullet">9.</span> try catchå¼‚å¸¸å, å¦‚æœåœ¨catch ä¸­åˆæŠ›å‡ºäº†æ–°åˆ›å»ºçš„å¼‚å¸¸æ—¶, éœ€è¦å°†åŸå¼‚å¸¸èµ‹å€¼ç»™æ–°å¼‚å¸¸
<span class="hljs-bullet">10.</span> ä¸èƒ½è°ƒç”¨è¢«æ ‡è®°@Deprecated çš„å±æ€§æˆ–æ–¹æ³•æˆ–ç±»
<span class="hljs-bullet">11.</span> å®šä¹‰çš„å¸¸é‡å€¼, ç»™å‡ºæ¸…æ™°çš„æ³¨é‡Šè¯´æ˜ç”¨é€”, é¿å…ç¡¬ç¼–ç 
<span class="hljs-bullet">12.</span> æ ‡æ³¨äº†@transactionalçš„æ–¹æ³•è¦æ˜ç¡®å›æ»šå¼‚å¸¸ç±»å‹, å¯¹äºåªè¯»æ“ä½œè¦æ ‡æ³¨åªè¯»readOnly=trueÂ æé«˜æ€§èƒ½
<span class="hljs-bullet">13.</span> 3æ¬¡ä»¥ä¸Šå­—ç¬¦ä¸²æ‹¼æ¥ä½¿ç”¨StringBuilderä»£æ›¿å­—ç¬¦ä¸²æ‹¼æ¥
<span class="hljs-bullet">14.</span> æ£€æŸ¥æ˜¯å¦å­˜åœ¨å…¶ä»–ç ´åå…¼å®¹æ€§çš„æ”¹åŠ¨æˆ–é€»è¾‘ä¸Šçš„é”™è¯¯
<span class="hljs-bullet">15.</span> æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¾ªç¯è°ƒç”¨å¯¼è‡´çš„é€»è¾‘é—®é¢˜
16ã€æ–°å¢çš„é¡µé¢æäº¤å’Œæ”¯ä»˜ç›¸å…³æµç¨‹è¦è€ƒè™‘å¹‚ç­‰å¤„ç†
17ã€æ¥å£å¯èƒ½è¢«é‡å¤è°ƒç”¨å’Œmqæ¶ˆæ¯é‡å¤æ¥æ”¶åœºæ™¯è¦è€ƒè™‘å¹¶å‘å’Œäº‹åŠ¡å†²çªå’Œæ•°æ®è¦†ç›–ï¼Œè¦å–„ç”¨åˆ†å¸ƒå¼é”
18ã€é’ˆå¯¹æ•°æ®åº“å•ä¸€å­—æ®µçš„ä¿®æ”¹ï¼Œå°½å¯èƒ½è¦ç²¾ç¡®ä¿®æ”¹ï¼Œä½¿ç”¨æ•´ä½“å¯¹è±¡è¿›è¡Œä¿®æ”¹
19ã€æ˜¯å¦å­˜åœ¨é‡å¤ä»£ç 
20ã€ä¿®æ”¹é€»è¾‘æ˜¯å¦è®¾è®¡åˆ°è®¡æ•°ç³»ç»Ÿå£å¾„çš„ä¿®æ”¹
21ã€æ•°æ®äº¤äº’è¿‡ç¨‹ä¸­ï¼ˆæ•°æ®åº“å’Œå¤–éƒ¨è°ƒç”¨ï¼‰çš„ç©ºæŒ‡é’ˆåˆ¤æ–­å’Œå¤„ç†
22ã€çŠ¶æ€æµè½¬è¿‡ç¨‹å’Œæ¶‰åŠèµ„äº§æŸå¤±çš„éƒ¨åˆ†è¦å¯¹å‰ç½®çŠ¶æ€è¿›è¡Œæ ¡éªŒ
23ã€æ¶‰åŠæ•°æ®åº“å’Œå¤–éƒ¨äº‹åŠ¡çš„æ¥å£ï¼Œè¦ä¿è¯æ•´ä½“äº‹åŠ¡çš„ä¸€è‡´æ€§ï¼Œæ— æ³•ä¿è¯çš„è¦æœ‰è¡¥å¿æœºåˆ¶
24ã€æ¶‰åŠå¼‚æ­¥å›è°ƒçš„åœºæ™¯ï¼Œè¦è€ƒè™‘ä¸­é—´æ€çš„å¤„ç†
25ã€ä¸å…è®¸æŠŠé…ç½®è§„åˆ™äº¤ç»™è¿è¥åŒå­¦
26ã€è¿”å›çš„listç±»å‹ï¼Œè¦ç»™å®šé»˜è®¤å€¼ï¼Œä¸èƒ½ç»™null
27ã€ä¸»é”®å¿…é¡»è®¾ç½®è‡ªå¢æˆ–è€…ä½¿ç”¨åˆ†å¸ƒå¼id
28ã€æ•°æ®åº“è¡¨æ˜¯å¦å»ºç«‹äº†ç´¢å¼•
29ã€å¼‚å¸¸åœºæ™¯è¦æ‰“å°æŠ¥è­¦ï¼Œå°½å¯èƒ½ä¼˜å…ˆå¤šæ‰“å°
éå†æ‰€æœ‰è§„åˆ™, ä¸€ä¸ªè§„åˆ™ä¸€ä¸ªè§„åˆ™çš„å»æ£€æŸ¥å¢é‡ä»£ç çš„è§„èŒƒæ€§, æ¯ä¸ªè§„åˆ™è¿›è¡ŒReviewæ—¶, ä½¿ç”¨ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡, æœ€åå½’çº³æ‰€æœ‰çš„Reviewç»“æœ.
è¾“å‡ºè¿åè§„åˆ™çš„æ–‡ä»¶ä½ç½®, åœ¨æˆ‘è¯´å¯ä»¥ä¿®æ”¹ä¹‹å‰ä¸è¦ä¿®æ”¹æ–‡ä»¶
</code></pre>
<h4 data-id="heading-9">3ã€åŠŸèƒ½è¾…åŠ©éªŒè¯</h4>
<p>åœ¨å®Œæˆä»£ç ç”Ÿæˆä¸åˆæ­¥å®¡æŸ¥åï¼Œæˆ‘ä»¬è¿›å…¥åŠŸèƒ½éªŒè¯é˜¶æ®µã€‚æ­¤æ—¶å¯åˆ©ç”¨Cursoråˆ†æä»£ç å˜æ›´ï¼Œè‡ªåŠ¨ç”Ÿæˆè‡ªæµ‹ç”¨ä¾‹æ¸…å•ã€‚é€šè¿‡æç¤ºè¯å¼•å¯¼Cursorç»“åˆä¸šåŠ¡é€»è¾‘ã€æ¥å£è¾“å…¥è¾“å‡ºåŠå¼‚å¸¸åˆ†æ”¯ï¼Œè¾“å‡ºè¦†ç›–æ ¸å¿ƒè·¯å¾„ã€è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯å¤„ç†çš„æµ‹è¯•åœºæ™¯ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs">åŸºäºå½“å‰ä»£ç å˜æ›´ï¼Œåˆ—å‡ºéœ€è¦è‡ªæµ‹çš„åŠŸèƒ½ç‚¹å’Œè¾¹ç•Œæƒ…å†µï¼ŒåŒ…æ‹¬æ­£å¸¸æµç¨‹ã€å¼‚å¸¸è¾“å…¥ã€çŠ¶æ€æ ¡éªŒç­‰ï¼Œè¾“å‡ºä¸ºè¡¨æ ¼å½¢å¼ï¼ŒåŒ…å«ç”¨ä¾‹ç¼–å·ã€åœºæ™¯æè¿°ã€é¢„æœŸç»“æœã€‚
</code></pre>
<p>è¯¥è¿‡ç¨‹ä¸ä»…æ˜¯æµ‹è¯•å‡†å¤‡ï¼Œæ›´æ˜¯å¯¹æ•´ä½“é€»è¾‘çš„å†ç¡®è®¤ã€‚é€šè¿‡Cursorè¾…åŠ©éªŒè¯ï¼Œæå‡è‡ªæµ‹å®Œæ•´æ€§ï¼Œå‡å°‘åæœŸå›å½’æˆæœ¬ï¼Œç¡®ä¿äº¤ä»˜è´¨é‡ã€‚</p>
<h2 data-id="heading-10">å°ç»“</h2>
<p>è‡³æ­¤ï¼Œæœ¬æ–‡åˆ†äº«äº†å›æ”¶å›¢é˜Ÿåœ¨AIç¼–ç¨‹å®è·µä¸­çš„ç»éªŒï¼Œé‡ç‚¹ä»‹ç»äº†å¦‚ä½•é«˜æ•ˆä½¿ç”¨Cursorè¾…åŠ©å¼€å‘ã€‚é€šè¿‡åˆ†é˜¶æ®µåä½œâ€”â€”ä»éœ€æ±‚åˆ†æï¼Œç°çŠ¶æ¢³ç†åˆ°æŠ€æœ¯è®¾è®¡ï¼Œä»£ç ç”Ÿæˆï¼Œå†åˆ°æµ‹è¯•éªŒè¯ã€‚</p>
<p>AIæ—¶ä»£ï¼Œå¼€å‘è€…çš„æ ¸å¿ƒç«äº‰åŠ›æ­£ä»â€œæŒæ¡çŸ¥è¯†â€è½¬å‘â€œæå‡ºé—®é¢˜â€ã€‚å·¥å…·å¦‚Cursorå¹¶éæ›¿ä»£å¼€å‘äººå‘˜ï¼Œè€Œæ˜¯é€šè¿‡äººæœºååŒï¼Œæå‡éœ€æ±‚ç†è§£ã€æŠ€æœ¯è®¾è®¡ä¸ä»£ç è´¨é‡çš„æ•ˆç‡ã€‚æˆ‘ä»¬è¦ä»¥ä¸“ä¸šç§¯ç´¯æ„å»ºæ¸…æ™°ä¸Šä¸‹æ–‡ï¼Œå¼•å¯¼AIå®Œæˆæ‹†è§£ã€åˆ†æã€ç”Ÿæˆä¸éªŒè¯ï¼Œæœ€ç»ˆå®ç°é«˜æ•ˆã€é«˜è´¨é‡çš„å¼€å‘é—­ç¯ã€‚</p>
<blockquote>
<p>å…³äºä½œè€…ï¼Œé»„æ•¬ä¹¾ï¼Œä¾ å®¢æ±‡Javaå¼€å‘å·¥ç¨‹å¸ˆã€‚</p>
</blockquote>
<blockquote>
<p>è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚
å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>