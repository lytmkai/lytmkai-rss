<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[0ä»£ç å†™SQLï¼Spring AIä¿å§†çº§æ•™ç¨‹ï¼š5åˆ†é’Ÿå®ç°AIè‡ªç„¶è¯­è¨€æŸ¥æ•°æ®ï¼Œæ•æ„ŸæŸ¥è¯¢è‡ªåŠ¨æ‹¦æˆªğŸš€]]></title>    <link>https://juejin.cn/post/7582809606066651162</link>    <guid>https://juejin.cn/post/7582809606066651162</guid>    <pubDate>2025-12-12T10:16:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606066651162" data-draft-id="7582791876366417958" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" 0ä»£ç å†™SQLï¼Spring AIä¿å§†çº§æ•™ç¨‹ï¼š5åˆ†é’Ÿå®ç°AIè‡ªç„¶è¯­è¨€æŸ¥æ•°æ®ï¼Œæ•æ„ŸæŸ¥è¯¢è‡ªåŠ¨æ‹¦æˆªğŸš€"/> <meta itemprop="keywords" content="Spring,AIç¼–ç¨‹,SQL"/> <meta itemprop="datePublished" content="2025-12-12T10:16:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/808832912075352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             0ä»£ç å†™SQLï¼Spring AIä¿å§†çº§æ•™ç¨‹ï¼š5åˆ†é’Ÿå®ç°AIè‡ªç„¶è¯­è¨€æŸ¥æ•°æ®ï¼Œæ•æ„ŸæŸ¥è¯¢è‡ªåŠ¨æ‹¦æˆªğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/808832912075352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:16:40.000Z" title="Fri Dec 12 2025 10:16:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">0ä»£ç å†™SQLï¼Spring AIä¿å§†çº§æ•™ç¨‹ï¼š5åˆ†é’Ÿå®ç°AIè‡ªç„¶è¯­è¨€æŸ¥æ•°æ®ï¼Œæ•æ„ŸæŸ¥è¯¢è‡ªåŠ¨æ‹¦æˆªğŸš€</h2>
<p>è¿˜åœ¨ä¸ºâ€œéæŠ€æœ¯ç”¨æˆ·æŸ¥æ•°æ®è¦å†™SQLâ€å¤´ç–¼ï¼Ÿè¿˜åœ¨æ‹…å¿ƒText-to-SQLæ³¨å…¥ã€è¶ŠæƒæŸ¥è¯¢é£é™©ï¼Ÿ</p>
<p>ä»Šå¤©ç»™å¤§å®¶å¸¦æ¥ <strong>Spring AIç›´æ¥Text-to-SQLå®æˆ˜æ–¹æ¡ˆ</strong>â€”â€”æ— éœ€æ‡‚SQLï¼Œç”¨æˆ·è‡ªç„¶è¯­è¨€éšä¾¿é—®ï¼ˆå¦‚ä¸‹å•æ•°ã€æœ€è´µè®¢å•ã€é«˜é¢‘å•†å“ï¼‰ï¼ŒAIè‡ªåŠ¨ç”ŸæˆSQLæŸ¥æ•°æ®åº“ï¼Œè¿è§„æŸ¥è¯¢ï¼ˆè¶Šæƒã€æ•æ„Ÿå­—æ®µã€å†™æ“ä½œï¼‰è‡ªåŠ¨æ‹¦æˆªï¼Œå…¨ç¨‹ä¿å§†çº§æ­¥éª¤ï¼Œå¤åˆ¶ç²˜è´´å°±èƒ½è½åœ°ï¼</p>
<h3 data-id="heading-1">ğŸ”¥ ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªæ–¹æ¡ˆï¼Ÿ3å¤§æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li><strong>çµæ´»åˆ°â€œéšä¾¿é—®â€</strong> ï¼šç”¨æˆ·ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼ˆå¦‚â€œè¿‘30å¤©å·²æ”¯ä»˜çš„è®¢å•æœ‰å¤šå°‘ç¬”ï¼Ÿâ€â€œæˆ‘å¸¸ä¹°çš„å•†å“TOP3â€ï¼‰ï¼ŒAIè‡ªåŠ¨è½¬SQLï¼Œæ— éœ€é¢„å®šä¹‰æŸ¥è¯¢é€»è¾‘ï¼›</li>
<li><strong>å®‰å…¨åˆ°â€œæ— æ­»è§’â€</strong> ï¼šäº‹å‰æç¤ºè¯é™åˆ¶+äº‹åSQLæ ¡éªŒï¼ŒåŒé‡é˜²æŠ¤æ‹¦æˆªå†™æ“ä½œã€æ³¨å…¥æ”»å‡»ã€è¶ŠæƒæŸ¥è¯¢ã€æ•æ„Ÿå­—æ®µæŸ¥è¯¢ï¼›</li>
<li><strong>ç®€å•åˆ°â€œé›¶é—¨æ§›â€</strong> ï¼šSpringç”Ÿæ€æ— ç¼é›†æˆï¼Œ5åˆ†é’Ÿå®Œæˆé…ç½®+ç¼–ç ï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿè½åœ°ï¼Œæ— éœ€æ·±å…¥AIçŸ¥è¯†ã€‚</li>
</ol>
<h3 data-id="heading-2">ğŸ› ï¸ ä¿å§†çº§è½åœ°æ­¥éª¤ï¼šä»0åˆ°1å®ç°AIæ•°æ®æŸ¥è¯¢</h3>
<h4 data-id="heading-3">ä¸€ã€ç¯å¢ƒå‡†å¤‡ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ï¼‰</h4>
<h5 data-id="heading-4">1. å¼•å…¥æ ¸å¿ƒä¾èµ–ï¼ˆpom.xmlï¼‰</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Spring AI æ ¸å¿ƒï¼ˆLLMäº¤äº’+SQLç”Ÿæˆï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Claude LLMï¼ˆå¯æ›¿æ¢ä¸ºé€šä¹‰åƒé—®/DeepSeekï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-anthropic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- SQLæ ¡éªŒå·¥å…· --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-sql-generator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Spring Securityï¼ˆç”¨æˆ·è®¤è¯+æ•°æ®éš”ç¦»ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- æ•°æ®åº“+ORM --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h5 data-id="heading-5">2. æ•°æ®åº“è¡¨ç»“æ„ï¼ˆMySQLï¼‰</h5>
<p>æ ¸å¿ƒæ˜¯<code>user_id</code>å…³è”ç”¨æˆ·ä¸è®¢å•ï¼Œç¡®ä¿æ•°æ®éš”ç¦»ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç”¨æˆ·è¡¨ï¼ˆå«æ•æ„Ÿå­—æ®µï¼Œç¦æ­¢æŸ¥è¯¢ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> sys_user (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    username <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    password <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, <span class="hljs-comment">-- åŠ å¯†å­˜å‚¨</span>
    phone <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-comment">-- æ•æ„Ÿå­—æ®µ</span>
);

<span class="hljs-comment">-- è®¢å•ä¸»è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_main (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    user_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    total_amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    create_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    status TINYINT <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'0-å¾…æ”¯ä»˜ï¼Œ1-å·²æ”¯ä»˜ï¼Œ2-å·²å–æ¶ˆ'</span>,
    <span class="hljs-keyword">FOREIGN</span> KEY (user_id) <span class="hljs-keyword">REFERENCES</span> sys_user(id),
    INDEX idx_user_create (user_id, create_time)
);

<span class="hljs-comment">-- è®¢å•é¡¹è¡¨ï¼ˆå•†å“æ˜ç»†ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> order_item (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    order_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    product_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    product_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    quantity <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    unit_price <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    <span class="hljs-keyword">FOREIGN</span> KEY (order_id) <span class="hljs-keyword">REFERENCES</span> order_main(id)
);
</code></pre>
<h4 data-id="heading-6">äºŒã€æ ¸å¿ƒé…ç½®ï¼š1åˆ†é’Ÿæå®šLLM+å®‰å…¨è§„åˆ™</h4>
<p>åœ¨<code>application.yaml</code>ä¸­é…ç½®LLMã€æ•°æ®åº“å’Œå®‰å…¨æç¤ºè¯ï¼ˆå…³é”®ï¼ï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">spring:
  datasource:
    url: jdbc:mysql://localhost:<span class="hljs-number">3306</span>/order_db?useSSL=false&amp;serverTimezone=UTC
    username: readonly_user # æ•°æ®åº“åªè¯»ç”¨æˆ·ï¼ˆä»…æˆSELECTæƒé™ï¼‰
    password: ä½ çš„å¯†ç 
  ai:
    anthropic:
      api-key: ${ANTHROPIC_API_KEY} # ç¯å¢ƒå˜é‡åŠ è½½ï¼Œé¿å…ç¡¬ç¼–ç 
      chat:
        options:
          model: claude-opus-<span class="hljs-number">4</span>-<span class="hljs-number">20250514</span>
          # ğŸ”¥ æ ¸å¿ƒæç¤ºè¯ï¼šé™åˆ¶LLMç”Ÿæˆåˆè§„SQL
          system-prompt: |
            ä½ æ˜¯è®¢å•æŸ¥è¯¢SQLç”ŸæˆåŠ©æ‰‹ï¼Œä»…ç”Ÿæˆç¬¦åˆä»¥ä¸‹è§„åˆ™çš„SQLï¼š
            <span class="hljs-number">1</span>. å…è®¸è¡¨ï¼šorder_mainã€order_itemï¼ˆç¦æ­¢æŸ¥sys_useråŠå…¶ä»–è¡¨ï¼‰ï¼›
            <span class="hljs-number">2</span>. å¿…åŠ æ¡ä»¶ï¼šAND order_main.user_id = {CURRENT_USER_ID}ï¼ˆä¸å¯çœç•¥ï¼‰ï¼›
            <span class="hljs-number">3</span>. ä»…æ”¯æŒSELECTï¼Œç¦æ­¢INSERT/UPDATE/DELETEç­‰å†™æ“ä½œï¼›
            <span class="hljs-number">4</span>. ç¦æ­¢æŸ¥æ•æ„Ÿå­—æ®µï¼šphoneã€passwordç­‰ï¼›
            <span class="hljs-number">5</span>. ä»…è¿”å›çº¯SQLï¼Œæ— markdownåŒ…è£¹ï¼›
            <span class="hljs-number">6</span>. è¿è§„é—®é¢˜ç›´æ¥è¿”å›ï¼š"è¯¥æŸ¥è¯¢ä¸ç¬¦åˆè§„åˆ™ï¼ŒåŸå› ï¼š{å…·ä½“è¿è§„ç±»å‹}"ã€‚
            # è¡¨ç»“æ„å‚è€ƒ
            order_mainï¼š<span class="hljs-built_in">id</span>(è®¢å•å·)ã€<span class="hljs-built_in">user_id</span>(ç”¨æˆ·ID)ã€<span class="hljs-built_in">total_amount</span>(é‡‘é¢)ã€<span class="hljs-built_in">create_time</span>(æ—¶é—´)ã€<span class="hljs-built_in">status</span>(çŠ¶æ€)
            order_itemï¼š<span class="hljs-built_in">order_id</span>(è®¢å•å·)ã€<span class="hljs-built_in">product_name</span>(å•†å“å)ã€<span class="hljs-built_in">quantity</span>(æ•°é‡)
</code></pre>
<h4 data-id="heading-7">ä¸‰ã€ç¼–ç å®ç°ï¼š3ä¸ªæ ¸å¿ƒç»„ä»¶ï¼ˆå¤åˆ¶å³ç”¨ï¼‰</h4>
<h5 data-id="heading-8">1. ç”¨æˆ·ä¸Šä¸‹æ–‡ï¼šæå–å½“å‰ç™»å½•ç”¨æˆ·IDï¼ˆæ•°æ®éš”ç¦»ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserContext</span> {
    <span class="hljs-comment">// ä»Spring Securityè·å–å½“å‰ç”¨æˆ·ID</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getCurrentUserId</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Authentication</span> <span class="hljs-variable">auth</span> <span class="hljs-operator">=</span> SecurityContextHolder.getContext().getAuthentication();
        <span class="hljs-keyword">if</span> (auth == <span class="hljs-literal">null</span> || !(auth.getPrincipal() <span class="hljs-keyword">instanceof</span> SysUser user)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·æœªç™»å½•ï¼Œæ— æ³•æŸ¥è¯¢"</span>);
        }
        <span class="hljs-keyword">return</span> user.getId();
    }
}
</code></pre>
<h5 data-id="heading-9">2. SQLæ ¡éªŒå™¨ï¼šæ‹¦æˆªè¿è§„SQLï¼ˆäº‹åå…œåº•ï¼‰</h5>
<pre><code class="hljs language-arduino" lang="arduino">@Component
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SqlValidator</span> {
    <span class="hljs-comment">// ç¦æ­¢çš„æ“ä½œã€æ•æ„Ÿå­—æ®µã€å…è®¸çš„è¡¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> List&lt;<span class="hljs-type">String</span>&gt; FORBIDDEN_OPS = List.<span class="hljs-built_in">of</span>(<span class="hljs-string">"INSERT"</span>, <span class="hljs-string">"UPDATE"</span>, <span class="hljs-string">"DELETE"</span>, <span class="hljs-string">"DROP"</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> List&lt;<span class="hljs-type">String</span>&gt; SENSITIVE_FIELDS = List.<span class="hljs-built_in">of</span>(<span class="hljs-string">"phone"</span>, <span class="hljs-string">"password"</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> List&lt;<span class="hljs-type">String</span>&gt; ALLOWED_TABLES = List.<span class="hljs-built_in">of</span>(<span class="hljs-string">"order_main"</span>, <span class="hljs-string">"order_item"</span>);

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">validate</span><span class="hljs-params">(<span class="hljs-type">String</span> sql, Long userId)</span> </span>{
        <span class="hljs-type">String</span> lowerSql = sql.<span class="hljs-built_in">toLowerCase</span>();
        <span class="hljs-comment">// 1. ç¦æ­¢å†™æ“ä½œ</span>
        <span class="hljs-keyword">if</span> (FORBIDDEN_OPS.<span class="hljs-built_in">stream</span>().<span class="hljs-built_in">anyMatch</span>(op -&gt; lowerSql.<span class="hljs-built_in">startsWith</span>(op.<span class="hljs-built_in">toLowerCase</span>()))) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalSqlException</span>(<span class="hljs-string">"ç¦æ­¢éæŸ¥è¯¢æ“ä½œ"</span>);
        }
        <span class="hljs-comment">// 2. å¿…é¡»åŒ…å«user_idï¼ˆé˜²è¶Šæƒï¼‰</span>
        <span class="hljs-keyword">if</span> (!lowerSql.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"order_main.user_id ="</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalSqlException</span>(<span class="hljs-string">"ä»…å…è®¸æŸ¥è¯¢è‡ªå·±çš„è®¢å•"</span>);
        }
        <span class="hljs-comment">// 3. ç¦æ­¢æ•æ„Ÿå­—æ®µ</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">String</span> field : SENSITIVE_FIELDS) {
            <span class="hljs-keyword">if</span> (lowerSql.<span class="hljs-built_in">contains</span>(field)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">IllegalSqlException</span>(<span class="hljs-string">"ç¦æ­¢æŸ¥è¯¢æ•æ„Ÿå­—æ®µï¼š"</span> + field);
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }

    <span class="hljs-comment">// è‡ªå®šä¹‰å¼‚å¸¸</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IllegalSqlException</span> extends RuntimeException {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">IllegalSqlException</span><span class="hljs-params">(<span class="hljs-type">String</span> msg)</span> </span>{ <span class="hljs-built_in">super</span>(msg); }
    }
}
</code></pre>
<h5 data-id="heading-10">3. æ ¸å¿ƒæœåŠ¡ï¼šæ•´åˆAIç”Ÿæˆ+æ ¡éªŒ+æ‰§è¡Œ</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderTextToSqlService</span> {
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> <span class="hljs-title class_">ChatClient</span> chatClient;
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> <span class="hljs-title class_">JdbcTemplate</span> jdbcTemplate;
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserContext</span> userContext;
    <span class="hljs-meta">@Autowired</span> <span class="hljs-keyword">private</span> <span class="hljs-title class_">SqlValidator</span> sqlValidator;

    <span class="hljs-comment">// è‡ªç„¶è¯­è¨€â†’SQLâ†’æŸ¥è¯¢â†’ç»“æœ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">query</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> question</span>) {
        <span class="hljs-title class_">Long</span> userId = userContext.<span class="hljs-title function_">getCurrentUserId</span>();
        <span class="hljs-comment">// 1. LLMç”ŸæˆSQLï¼ˆæ›¿æ¢{CURRENT_USER_ID}ä¸ºçœŸå®IDï¼‰</span>
        <span class="hljs-title class_">String</span> systemPrompt = chatClient.<span class="hljs-title function_">options</span>().<span class="hljs-title function_">getSystemPrompt</span>()
                .<span class="hljs-title function_">replace</span>(<span class="hljs-string">"{CURRENT_USER_ID}"</span>, userId.<span class="hljs-title function_">toString</span>());
        <span class="hljs-title class_">String</span> generatedSql = chatClient.<span class="hljs-title function_">prompt</span>()
                .<span class="hljs-title function_">system</span>(systemPrompt)
                .<span class="hljs-title function_">user</span>(question)
                .<span class="hljs-title function_">call</span>()
                .<span class="hljs-title function_">content</span>();

        <span class="hljs-comment">// 2. æ‹¦æˆªLLMè¿”å›çš„è¿è§„æç¤º</span>
        <span class="hljs-keyword">if</span> (generatedSql.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"è¯¥æŸ¥è¯¢ä¸ç¬¦åˆè§„åˆ™"</span>)) {
            <span class="hljs-keyword">return</span> generatedSql;
        }

        <span class="hljs-comment">// 3. æ ¡éªŒSQLåˆæ³•æ€§</span>
        <span class="hljs-keyword">try</span> {
            sqlValidator.<span class="hljs-title function_">validate</span>(generatedSql, userId);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">SqlValidator</span>.<span class="hljs-property">IllegalSqlException</span> e) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æŸ¥è¯¢å¤±è´¥ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>();
        }

        <span class="hljs-comment">// 4. æ‰§è¡ŒSQLå¹¶æ ¼å¼åŒ–ç»“æœ</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt;&gt; result = jdbcTemplate.<span class="hljs-title function_">queryForList</span>(generatedSql);
            <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">isEmpty</span>() ? <span class="hljs-string">"æœªæŸ¥è¯¢åˆ°æ•°æ®"</span> : <span class="hljs-title function_">formatResult</span>(question, result);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"SQLæ‰§è¡Œå¤±è´¥ï¼š"</span> + e.<span class="hljs-title function_">getMessage</span>().<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>);
        }
    }

    <span class="hljs-comment">// ç»“æœæ ¼å¼åŒ–ï¼ˆè‡ªç„¶è¯­è¨€è¾“å‡ºï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">formatResult</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> question, List&lt;<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">Object</span>&gt;&gt; result</span>) {
        <span class="hljs-keyword">if</span> (question.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"å¤šå°‘"</span>) || question.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"æ•°é‡"</span>)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç¬¦åˆæ¡ä»¶çš„è®°å½•å…±"</span> + result.<span class="hljs-title function_">size</span>() + <span class="hljs-string">"æ¡"</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (question.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"æœ€è´µ"</span>) || question.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"æœ€é«˜"</span>)) {
            <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; top = result.<span class="hljs-title function_">get</span>(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>.<span class="hljs-title function_">format</span>(<span class="hljs-string">"æœ€è´µè®¢å•ï¼š\nè®¢å•å·ï¼š%s\né‡‘é¢ï¼š%.2få…ƒ\næ—¶é—´ï¼š%s"</span>,
                    top.<span class="hljs-title function_">get</span>(<span class="hljs-string">"id"</span>), top.<span class="hljs-title function_">get</span>(<span class="hljs-string">"total_amount"</span>), top.<span class="hljs-title function_">get</span>(<span class="hljs-string">"create_time"</span>));
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// é€šç”¨ç»“æœæ ¼å¼åŒ–</span>
            <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">stream</span>()
                    .<span class="hljs-title function_">map</span>(map -&gt; map.<span class="hljs-title function_">entrySet</span>().<span class="hljs-title function_">stream</span>()
                            .<span class="hljs-title function_">map</span>(e -&gt; e.<span class="hljs-title function_">getKey</span>() + <span class="hljs-string">"ï¼š"</span> + e.<span class="hljs-title function_">getValue</span>())
                            .<span class="hljs-title function_">collect</span>(<span class="hljs-title class_">Collectors</span>.<span class="hljs-title function_">joining</span>(<span class="hljs-string">" | "</span>)))
                    .<span class="hljs-title function_">collect</span>(<span class="hljs-title class_">Collectors</span>.<span class="hljs-title function_">joining</span>(<span class="hljs-string">"\n"</span>));
        }
    }
}
</code></pre>
<h5 data-id="heading-11">4. æš´éœ²APIï¼šç”¨æˆ·äº¤äº’å…¥å£</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/api/ai/query"</span>)
public class OrderTextToSqlController {
    <span class="hljs-variable">@Autowired</span> private OrderTextToSqlService service;

    <span class="hljs-variable">@PostMapping</span>
    public ResponseEntity&lt;String&gt; <span class="hljs-built_in">query</span>(<span class="hljs-variable">@RequestBody</span> Map&lt;String, String&gt; request) {
        <span class="hljs-selector-tag">try</span> {
            <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">result</span> = <span class="hljs-selector-tag">service</span><span class="hljs-selector-class">.query</span>(request.<span class="hljs-built_in">get</span>(<span class="hljs-string">"question"</span>));
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(result);
        } <span class="hljs-selector-tag">catch</span> (RuntimeException e) {
            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.badRequest</span>()<span class="hljs-selector-class">.body</span>(e.<span class="hljs-built_in">getMessage</span>());
        }
    }
}
</code></pre>
<h4 data-id="heading-12">å››ã€æµ‹è¯•éªŒè¯ï¼šåˆæ³•/è¿è§„æŸ¥è¯¢éƒ½èƒ½æ‹¦æˆª</h4>
<h5 data-id="heading-13">1. åˆæ³•æŸ¥è¯¢ï¼ˆæ­£å¸¸è¿”å›ï¼‰</h5>
<ul>
<li>
<p>è¯·æ±‚ï¼š<code>POST /api/ai/query</code>ï¼Œè¯·æ±‚ä½“ <code>{"question":"æˆ‘è¿‘30å¤©å·²æ”¯ä»˜çš„è®¢å•æœ‰å¤šå°‘ç¬”ï¼Ÿ"}</code></p>
</li>
<li>
<p>AIç”ŸæˆSQLï¼š</p>
<ul>
<li>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> order_main 
<span class="hljs-keyword">WHERE</span> status<span class="hljs-operator">=</span><span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&gt;=</span> DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>) 
<span class="hljs-keyword">AND</span> order_main.user_id<span class="hljs-operator">=</span><span class="hljs-number">123</span>;
</code></pre>
</li>
</ul>
</li>
<li>
<p>å“åº”ï¼š<code>"ç¬¦åˆæ¡ä»¶çš„è®°å½•å…±3æ¡"</code></p>
</li>
</ul>
<h5 data-id="heading-14">2. è¿è§„æŸ¥è¯¢ï¼ˆè‡ªåŠ¨æ‹¦æˆªï¼‰</h5>
<ul>
<li>è¶ŠæƒæŸ¥è¯¢ï¼š<code>{"question":"æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„è®¢å•"}</code> â†’ å“åº”ï¼š<code>"è¯¥æŸ¥è¯¢ä¸ç¬¦åˆè§„åˆ™ï¼ŒåŸå› ï¼šè¶ŠæƒæŸ¥è¯¢"</code></li>
<li>æ•æ„Ÿå­—æ®µï¼š<code>{"question":"æˆ‘çš„æ‰‹æœºå·æ˜¯å¤šå°‘ï¼Ÿ"}</code> â†’ å“åº”ï¼š<code>"è¯¥æŸ¥è¯¢ä¸ç¬¦åˆè§„åˆ™ï¼ŒåŸå› ï¼šæ¶‰åŠæ•æ„Ÿå­—æ®µ"</code></li>
<li>SQLæ³¨å…¥ï¼š<code>{"question":"æŸ¥è¯¢æˆ‘çš„è®¢å• where 1=1"}</code> â†’ å“åº”ï¼š<code>"æŸ¥è¯¢å¤±è´¥ï¼šæŸ¥è¯¢åŒ…å«æ½œåœ¨é£é™©"</code></li>
</ul>
<h3 data-id="heading-15">ğŸš¨ é¿å‘æŒ‡å—ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h3>
<ol start="4">
<li>æ•°æ®åº“ç”¨æˆ·å¿…é¡»è®¾ä¸º<strong>åªè¯»</strong>ï¼Œä»…æˆäºˆSELECTæƒé™ï¼Œé¿å…LLMçªç ´é™åˆ¶ï¼›</li>
<li>æç¤ºè¯è¦æ˜ç¡®â€œå…è®¸çš„è¡¨/å­—æ®µâ€ï¼Œå‡å°‘LLMæ­§ä¹‰ï¼ˆæ¯”å¦‚æ˜ç¡®ç¦æ­¢sys_userè¡¨ï¼‰ï¼›</li>
<li>ç»™è®¢å•è¡¨çš„<code>user_id+create_time</code>åŠ ç´¢å¼•ï¼Œé¿å…å¤æ‚æŸ¥è¯¢å¡é¡¿ï¼›</li>
<li>æ•æ„Ÿå­—æ®µè¦å•ç‹¬ç»´æŠ¤åœ¨<code>SENSITIVE_FIELDS</code>ï¼Œæ–°å¢æ•æ„Ÿå­—æ®µç›´æ¥æ·»åŠ å³å¯ã€‚</li>
</ol>
<h3 data-id="heading-16">ğŸ“Œ æ€»ç»“</h3>
<p>è¿™å¥—æ–¹æ¡ˆç”¨Spring AI+Text-to-SQLï¼Œå®Œç¾è§£å†³äº†â€œéæŠ€æœ¯ç”¨æˆ·æŸ¥æ•°æ®â€å’Œâ€œå®‰å…¨é£é™©â€ä¸¤å¤§ç—›ç‚¹ï¼š</p>
<ul>
<li>å¯¹ç”¨æˆ·ï¼šæ— éœ€æ‡‚SQLï¼Œè‡ªç„¶è¯­è¨€éšä¾¿é—®ï¼ŒæŸ¥è¯¢æ•ˆç‡ç¿»å€ï¼›</li>
<li>å¯¹å¼€å‘è€…ï¼š5åˆ†é’Ÿè½åœ°ï¼Œé›¶ä¾µå…¥é›†æˆSpringç”Ÿæ€ï¼Œå®‰å…¨é˜²æŠ¤æ— æ­»è§’ã€‚</li>
</ul>
<p>ç°åœ¨å°±åŠ¨æ‰‹è¯•è¯•å§ï¼å¦‚æœéœ€è¦å®Œæ•´æºç ã€LLMæ›¿æ¢æ•™ç¨‹ï¼ˆå¦‚é€šä¹‰åƒé—®/æœ¬åœ°Ollamaï¼‰ï¼Œè¯„è®ºåŒºå›å¤ã€AIæŸ¥è¯¢ã€‘å³å¯è·å–ï½</p>
<p>å…³æ³¨æˆ‘ï¼Œä¸‹æœŸå¸¦æ¥ã€ŠAIæŸ¥è¯¢ç»“æœå¯è§†åŒ–ã€‹ã€Šå¤šLLMé€‚é…æ–¹æ¡ˆã€‹ï¼Œè®©ä½ çš„AIæ•°æ®æŸ¥è¯¢æ›´å¼ºå¤§ï¼ğŸ”¥</p>
<p>#SpringAI #TextToSQL #Javaå¼€å‘ #AIåº”ç”¨ #ä¿å§†çº§æ•™ç¨‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­å»ºNginxå®‰å…¨ç½‘å…³ï¼š3æ­¥å µä½90%çš„Webæ¼æ´ï¼ä¼ä¸šçº§é˜²æŠ¤å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7582777037863796786</link>    <guid>https://juejin.cn/post/7582777037863796786</guid>    <pubDate>2025-12-12T10:40:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582777037863796786" data-draft-id="7582777037863780402" data-original-type="2" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­å»ºNginxå®‰å…¨ç½‘å…³ï¼š3æ­¥å µä½90%çš„Webæ¼æ´ï¼ä¼ä¸šçº§é˜²æŠ¤å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T10:40:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PFinalç¤¾åŒº_å—ä¸"/> <meta itemprop="url" content="https://juejin.cn/user/1855631357906040"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­å»ºNginxå®‰å…¨ç½‘å…³ï¼š3æ­¥å µä½90%çš„Webæ¼æ´ï¼ä¼ä¸šçº§é˜²æŠ¤å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631357906040/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PFinalç¤¾åŒº_å—ä¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T10:40:37.000Z" title="Fri Dec 12 2025 10:40:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»31åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»0æ­å»ºNginxå®‰å…¨ç½‘å…³ï¼š3æ­¥å µä½90%çš„Webæ¼æ´ï¼</h2>
<blockquote>
<p><strong>è­¦å‘Š</strong>ï¼šä½ çš„ç½‘ç«™å¯èƒ½æ­£åœ¨è¢«æ”»å‡»ï¼</p>
<p>æ ¹æ®2024å¹´Webå®‰å…¨æŠ¥å‘Šï¼Œè¶…è¿‡<strong>87%çš„ä¼ä¸šç½‘ç«™</strong>å­˜åœ¨Nginxé…ç½®å®‰å…¨éšæ‚£ï¼Œå…¶ä¸­<strong>Hostå¤´æ”»å‡»</strong>å’Œ<strong>æ•æ„Ÿæ–‡ä»¶æ³„éœ²</strong>å æ¯”é«˜è¾¾<strong>63%</strong>ã€‚</p>
<p>æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ æ„å»ºä¼ä¸šçº§Nginxå®‰å…¨ç½‘å…³ï¼Œ<strong>é›¶æˆæœ¬</strong>å®ç°<strong>ç­‰ä¿2.0åˆè§„</strong>é˜²æŠ¤ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸš¨ ç°çŠ¶ï¼šä½ çš„ç½‘ç«™é¢ä¸´è¿™äº›å¨èƒå—ï¼Ÿ</h3>
<h4 data-id="heading-2">çœŸå®æ¡ˆä¾‹å›é¡¾</h4>
<p><strong>æ¡ˆä¾‹ä¸€ï¼šHostå¤´æ”»å‡»å¯¼è‡´ç”¨æˆ·å¯†ç æ³„éœ²</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-number">2024</span>å¹´<span class="hljs-number">3</span>æœˆï¼ŒæŸç”µå•†å¹³å°é­å—Hostå¤´æ”»å‡»
æ”»å‡»è€…æ„é€ æ¶æ„è¯·æ±‚ï¼š
<span class="hljs-keyword">GET</span> /password-reset HTTP/<span class="hljs-number">1.1</span>
<span class="hljs-symbol">Host:</span> attacker-controlled-domain.com

ç»“æœï¼šå¹³å°å‘é€çš„é‡ç½®é“¾æ¥æŒ‡å‘æ”»å‡»è€…åŸŸå
å½±å“ï¼šè¶…è¿‡<span class="hljs-number">1200</span>åç”¨æˆ·å¯†ç è¢«é‡ç½®ï¼Œç›´æ¥ç»æµæŸå¤±<span class="hljs-number">50</span>ä¸‡+
</code></pre>
<p><strong>æ¡ˆä¾‹äºŒï¼šæ•æ„Ÿæ–‡ä»¶æ³„éœ²å¼•å‘æ•°æ®ç¾éš¾</strong></p>
<pre><code class="hljs language-diff" lang="diff">2024å¹´1æœˆï¼ŒæŸSaaSå…¬å¸.gitç›®å½•è¢«å…¬å¼€è®¿é—®
æ”»å‡»è€…ä¸‹è½½å®Œæ•´ä»£ç ä»“åº“ï¼Œå‘ç°ï¼š
<span class="hljs-deletion">- æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼ˆåŒ…å«å¯†ç ï¼‰</span>
<span class="hljs-deletion">- APIå¯†é’¥å’ŒToken</span>
<span class="hljs-deletion">- å†…éƒ¨ç½‘ç»œæ¶æ„æ–‡æ¡£</span>
<span class="hljs-deletion">- å‘˜å·¥ä¸ªäººä¿¡æ¯è¡¨</span>

ç»“æœï¼šè¢«å‹’ç´¢æ¯”ç‰¹å¸30æšï¼Œå®¢æˆ·æ•°æ®åœ¨æš—ç½‘å‡ºå”®
</code></pre>
<h4 data-id="heading-3">å¸¸è§Webå®‰å…¨æ¼æ´æ¸…å•</h4>









































<table><thead><tr><th>æ¼æ´ç±»å‹</th><th>å±å®³ç­‰çº§</th><th>æ£€æµ‹æ–¹æ³•</th><th>å½±å“èŒƒå›´</th></tr></thead><tbody><tr><td><strong>Hostå¤´æ³¨å…¥</strong></td><td>ğŸ”´ ä¸¥é‡</td><td><code>curl -H "Host: evil.com"</code></td><td>å‡­è¯çªƒå–ã€ä¼šè¯åŠ«æŒ</td></tr><tr><td><strong>æ•æ„Ÿæ–‡ä»¶æ³„éœ²</strong></td><td>ğŸ”´ ä¸¥é‡</td><td>è®¿é—®<code>/.git/config</code></td><td>æºç æ³„éœ²ã€é…ç½®æš´éœ²</td></tr><tr><td><strong>ç›®å½•éå†</strong></td><td>ğŸŸ¡ é«˜å±</td><td><code>/../../../etc/passwd</code></td><td>ç³»ç»Ÿæ–‡ä»¶è¯»å–</td></tr><tr><td><strong>ç‰ˆæœ¬ä¿¡æ¯æ³„éœ²</strong></td><td>ğŸŸ¡ ä¸­å±</td><td><code>curl -I</code>æŸ¥çœ‹Serverå¤´</td><td>ç²¾å‡†æ”»å‡»ã€ç‰ˆæœ¬æ¼æ´åˆ©ç”¨</td></tr><tr><td><strong>ç‚¹å‡»åŠ«æŒ</strong></td><td>ğŸŸ¡ ä¸­å±</td><td>iframeåµŒå¥—æµ‹è¯•</td><td>ç”¨æˆ·è¯¯å¯¼ã€æ¶æ„æ“ä½œ</td></tr></tbody></table>
<h3 data-id="heading-4">ğŸ›¡ï¸ æ ¸å¿ƒé˜²æŠ¤ç­–ç•¥ï¼š3æ­¥æ„å»ºå®‰å…¨ç½‘å…³</h3>
<h4 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼šèº«ä»½éšè— - æ¶ˆé™¤æ”»å‡»é¢ä¿¡æ¯</h4>
<h5 data-id="heading-6">1.1 ç‰ˆæœ¬å·éšè—ï¼ˆåŸºç¡€ä½†å…³é”®ï¼‰</h5>
<p><strong>ä¸ºä»€ä¹ˆå¿…é¡»éšè—ç‰ˆæœ¬å·ï¼Ÿ</strong></p>
<ul>
<li>Nginxç‰ˆæœ¬æ³„éœ² = ç»™æ”»å‡»è€…æä¾›<strong>ç²¾ç¡®çš„æ”»å‡»åœ°å›¾</strong></li>
<li>CVEæ¼æ´æ•°æ®åº“éƒ½æ˜¯æŒ‰ç‰ˆæœ¬å·ç»„ç»‡çš„</li>
<li>æ”»å‡»è€…å¯ä»¥<strong>è‡ªåŠ¨åŒ–æ‰«æ</strong>ç‰¹å®šç‰ˆæœ¬çš„å·²çŸ¥æ¼æ´</li>
</ul>
<p><strong>é…ç½®æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># /etc/nginx/nginx.conf
http {
    # éšè—ç‰ˆæœ¬å· - è¿™æ˜¯ç¬¬ä¸€é“é˜²çº¿
    server_tokens off;
    
    # å…¶ä»–é…ç½®...
}
</code></pre>
<p><strong>éªŒè¯æ•ˆæœï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼˜åŒ–å‰</span>
$ curl -I http://your-domain.com
HTTP/1.1 200 OK
Server: nginx/1.24.0  <span class="hljs-comment"># â† ç‰ˆæœ¬æš´éœ²ï¼</span>

<span class="hljs-comment"># ä¼˜åŒ–å</span>
$ curl -I http://your-domain.com
HTTP/1.1 200 OK
Server: nginx           <span class="hljs-comment"># â† ç‰ˆæœ¬éšè—ï¼</span>
</code></pre>
<h5 data-id="heading-7">1.2 é”™è¯¯é¡µé¢ä¿¡æ¯æ¸…ç†</h5>
<p><strong>è‡ªå®šä¹‰é”™è¯¯é¡µé¢ï¼ˆé˜²æ­¢ä¿¡æ¯æ³„éœ²ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯é¡µé¢
cat &gt; /var/www/html/error.html &lt;&lt; 'EOF'
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;ç³»ç»Ÿç»´æŠ¤ä¸­&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;ç³»ç»Ÿç»´æŠ¤ä¸­&lt;/h1&gt;
    &lt;p&gt;è¯·ç¨åé‡è¯•ï¼Œæˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
EOF

# Nginxé…ç½®
server {
    error_page 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 421 422 423 424 425 426 428 429 431 451 500 501 502 503 504 505 506 507 508 510 511 /error.html;
    
    location = /error.html {
        internal;
        root /var/www/html;
    }
}
</code></pre>
<h4 data-id="heading-8">ç¬¬äºŒæ­¥ï¼šå…¥å£å°å µ - æ„å»ºå¤šå±‚é˜²æŠ¤ç½‘</h4>
<h5 data-id="heading-9">2.1 æ•æ„Ÿæ–‡ä»¶è®¿é—®æ§åˆ¶</h5>
<p><strong>ä¸ºä»€ä¹ˆä¼ ç»Ÿé˜²æŠ¤ä¸å¤Ÿï¼Ÿ</strong></p>
<ul>
<li>ç®€å•çš„<code>deny all</code>ä¼šè¿”å›403ï¼Œä½†<strong>ä»ç„¶æ³„éœ²æ–‡ä»¶å­˜åœ¨æ€§</strong></li>
<li>æ”»å‡»è€…å¯ä»¥é€šè¿‡<strong>å“åº”å·®å¼‚</strong>åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
<li>éœ€è¦<strong>ç»Ÿä¸€è¿”å›404</strong>ï¼Œè®©æ”»å‡»è€…æ— æ³•åŒºåˆ†</li>
</ul>
<p><strong>ä¼ä¸šçº§é˜²æŠ¤é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># ç¬¬ä¸€å±‚ï¼šéšè—æ–‡ä»¶é˜²æŠ¤ï¼ˆä»¥ç‚¹å¼€å¤´çš„æ–‡ä»¶ï¼‰
location ~ /\. {
    deny all;
    return 404;  # ç»Ÿä¸€è¿”å›404ï¼Œä¸æš´éœ²æ–‡ä»¶å­˜åœ¨æ€§
}

# ç¬¬äºŒå±‚ï¼šç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶é˜²æŠ¤
location ~* \.(git|svn|hg|bzr)/ {
    deny all;
    return 404;
}

# ç¬¬ä¸‰å±‚ï¼šé…ç½®æ–‡ä»¶å’Œå¤‡ä»½æ–‡ä»¶é˜²æŠ¤
location ~* \.(env|config|conf|ini|properties|yaml|yml)$ {
    deny all;
    return 404;
}

# ç¬¬å››å±‚ï¼šå¼€å‘æ–‡ä»¶é˜²æŠ¤
location ~* \.(log|cache|tmp|bak|backup|old|save|sql|db)$ {
    deny all;
    return 404;
}

# ç¬¬äº”å±‚ï¼šå‹ç¼©åŒ…å’Œæ–‡æ¡£é˜²æŠ¤
location ~* \.(zip|tar|gz|rar|7z|pdf|doc|docx|xls|xlsx)$ {
    deny all;
    return 404;
}

# ç¬¬å…­å±‚ï¼šç‰¹æ®Šç›®å½•é˜²æŠ¤
location ~* ^/(admin|manage|backend|api-docs|swagger|phpmyadmin|wp-admin)/ {
    deny all;
    return 404;
}
</code></pre>
<h5 data-id="heading-10">2.2 ç›®å½•éå†é˜²æŠ¤ï¼ˆPath Traversalï¼‰</h5>
<p><strong>æ”»å‡»åŸç†åˆ†æï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">æ­£å¸¸è¯·æ±‚: GET /images/photo.jpg
æ”»å‡»è¯·æ±‚: GET /images/../../../etc/passwd

ç›®æ ‡ï¼šè·³å‡ºWebç›®å½•ï¼Œè®¿é—®ç³»ç»Ÿæ–‡ä»¶
</code></pre>
<p><strong>é˜²æŠ¤ç­–ç•¥ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># æ–¹æ³•1ï¼šæ˜¾å¼æ‹’ç»è·¯å¾„éå†æ¨¡å¼
location ~ \.\./ {
    deny all;
    return 404;
}

# æ–¹æ³•2ï¼šé™åˆ¶è·¯å¾„æ·±åº¦ï¼ˆæ¨èï¼‰
location ~* ^(.*/){3,}.*\.\. {
    deny all;
    return 404;
}

# æ–¹æ³•3ï¼šURLè§£ç åæ£€æŸ¥ï¼ˆé˜²æ­¢ç¼–ç ç»•è¿‡ï¼‰
location ~* "%2e%2e%2f" {
    deny all;
    return 404;
}
</code></pre>
<h5 data-id="heading-11">2.3 HTTPæ–¹æ³•é™åˆ¶</h5>
<p>**æœ€å°æƒé™åŸåˆ™ï¼š**åªå…è®¸å¿…è¦çš„HTTPæ–¹æ³•</p>
<pre><code class="hljs language-nginx" lang="nginx"># é™åˆ¶HTTPæ–¹æ³•
if ($request_method !~ ^(GET|HEAD|POST)$) {
    return 405;
}

# æ›´ä¸¥æ ¼çš„APIæ¥å£é™åˆ¶
location /api/ {
    # APIåªå…è®¸GETå’ŒPOST
    if ($request_method !~ ^(GET|POST)$) {
        return 405;
    }
    
    # ä¸Šä¼ æ¥å£åªå…è®¸POST
    location /api/upload {
        if ($request_method != POST) {
            return 405;
        }
    }
}
</code></pre>
<h4 data-id="heading-12">ç¬¬ä¸‰æ­¥ï¼šèº«ä»½é”å®š - é˜²å¾¡Hostå¤´æ”»å‡»</h4>
<h5 data-id="heading-13">3.1 Hostå¤´æ”»å‡»åŸç†æ·±åº¦è§£æ</h5>
<p><strong>æ”»å‡»åœºæ™¯é‡ç°ï¼š</strong></p>
<pre><code class="hljs language-http" lang="http"># æ­£å¸¸è¯·æ±‚
GET /api/password-reset HTTP/1.1
Host: legitimate-site.com

# æ”»å‡»è¯·æ±‚
GET /api/password-reset HTTP/1.1
Host: attacker-controlled.com
</code></pre>
<p><strong>æ”»å‡»å½±å“ï¼š</strong></p>
<ol>
<li><strong>å¯†ç é‡ç½®é“¾æ¥åŠ«æŒ</strong> - ç”¨æˆ·æ”¶åˆ°çš„é‡ç½®é‚®ä»¶åŒ…å«æ¶æ„é“¾æ¥</li>
<li><strong>SSRFæ”»å‡»</strong> - æœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ ï¼Œè®¿é—®å†…ç½‘èµ„æº</li>
<li><strong>ç¼“å­˜æ±¡æŸ“</strong> - æ±¡æŸ“CDNç¼“å­˜ï¼Œä¼ æ’­æ¶æ„å†…å®¹</li>
<li><strong>ä¼šè¯åŠ«æŒ</strong> - é‡å®šå‘åˆ°é’“é±¼ç½‘ç«™çªƒå–å‡­è¯</li>
</ol>
<h5 data-id="heading-14">3.2 ä¼ä¸šçº§Hostå¤´é˜²æŠ¤æ–¹æ¡ˆ</h5>
<p><strong>ç¬¬ä¸€å±‚ï¼šé»˜è®¤æ‹’ç»æœåŠ¡å™¨å—</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># è¿™ä¸ªé…ç½®å¿…é¡»æ”¾åœ¨æ‰€æœ‰serverå—ä¹‹å‰ï¼
server {
    listen 80 default_server;
    listen [::]:80 default_server;
    listen 443 ssl default_server;
    listen [::]:443 ssl default_server;
    
    # æ‹’ç»æ‰€æœ‰æœªæ˜ç¡®åŒ¹é…çš„è¯·æ±‚
    server_name _ "";
    
    # è¿”å›403ç¦æ­¢è®¿é—®
    return 403;
    
    # å¯é€‰ï¼šè®°å½•æ”»å‡»æ—¥å¿—
    access_log /var/log/nginx/block-host-attack.log;
}
</code></pre>
<p><strong>ç¬¬äºŒå±‚ï¼šæ˜ç¡®åŸŸåç™½åå•</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># åªå…è®¸ç‰¹å®šçš„åˆæ³•åŸŸå
server {
    listen 80;
    listen [::]:80;
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    # æ˜ç¡®æŒ‡å®šå…è®¸çš„åŸŸå
    server_name example.com www.example.com;
    
    # å¼ºåˆ¶HTTPSï¼ˆå¦‚æœé…ç½®äº†SSLï¼‰
    if ($scheme != "https") {
        return 301 https://$server_name$request_uri;
    }
    
    # ä½ çš„ä¸šåŠ¡é…ç½®...
}
</code></pre>
<p><strong>ç¬¬ä¸‰å±‚ï¼šHostå¤´éªŒè¯</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># åœ¨locationå—ä¸­æ·»åŠ Hostå¤´éªŒè¯
location / {
    # éªŒè¯Hostå¤´æ˜¯å¦åŒ¹é…server_name
    if ($host !~* ^(example\.com|www\.example\.com)$) {
        return 403;
    }
    
    # é¢å¤–çš„Hostå¤´æ ¼å¼éªŒè¯
    if ($host ~* [^a-z0-9\-\.]) {
        return 403;
    }
    
    # ä»£ç†åˆ°åç«¯æ—¶ä¿ç•™åŸå§‹Host
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
</code></pre>
<h5 data-id="heading-15">3.3 é«˜çº§é˜²æŠ¤ï¼šå¤šå±‚éªŒè¯æœºåˆ¶</h5>
<p><strong>ç»“åˆåœ°ç†ä½ç½®å’Œåº”ç”¨å±‚éªŒè¯ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># åœ°ç†ä½ç½®é™åˆ¶ï¼ˆå¯é€‰ï¼‰
geoip_country /usr/share/GeoIP/GeoIP.dat;
map $geoip_country_code $allowed_country {
    default no;
    CN yes;      # ä¸­å›½
    US yes;      # ç¾å›½
    JP yes;      # æ—¥æœ¬
}

server {
    # ... å…¶ä»–é…ç½® ...
    
    location / {
        # åœ°ç†ä½ç½®éªŒè¯
        if ($allowed_country = no) {
            return 403;
        }
        
        # Hostå¤´éªŒè¯
        if ($host !~* ^(example\.com|www\.example\.com)$) {
            return 403;
        }
        
        # User-AgentéªŒè¯ï¼ˆé˜²æ­¢è‡ªåŠ¨åŒ–æ”»å‡»ï¼‰
        if ($http_user_agent ~* (wget|curl|libwww-perl|python|nikto|scan|nmap|sqlmap|hydra|gobuster)) {
            return 403;
        }
        
        proxy_pass http://backend;
    }
}
</code></pre>
<h3 data-id="heading-16">ğŸš€ è¿›é˜¶é˜²æŠ¤ï¼šå®‰å…¨å“åº”å¤´é…ç½®</h3>
<h4 data-id="heading-17">4.1 ç°ä»£æµè§ˆå™¨å®‰å…¨ç­–ç•¥</h4>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å®‰å…¨å“åº”å¤´ï¼Ÿ</strong></p>
<ul>
<li><strong>çºµæ·±é˜²å¾¡</strong>ï¼šå³ä½¿åº”ç”¨å±‚æœ‰æ¼æ´ï¼Œæµè§ˆå™¨å®‰å…¨æœºåˆ¶å¯æä¾›é¢å¤–ä¿æŠ¤</li>
<li><strong>åˆè§„è¦æ±‚</strong>ï¼šç­‰ä¿2.0æ˜ç¡®è¦æ±‚é…ç½®å®‰å…¨å“åº”å¤´</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šé˜²æ­¢ç‚¹å‡»åŠ«æŒç­‰æ”»å‡»å½±å“ç”¨æˆ·ä¿¡ä»»</li>
</ul>
<p><strong>å®Œæ•´å®‰å…¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># å®‰å…¨å“åº”å¤´é…ç½®
add_header X-Frame-Options "DENY" always;
add_header X-Content-Type-Options "nosniff" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Referrer-Policy "strict-origin-when-cross-origin" always;

# å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰- æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´
add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https:; media-src 'self'; object-src 'none'; child-src 'none'; form-action 'self'; base-uri 'self'; frame-ancestors 'none';" always;

# ä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼ˆHSTSï¼‰- ä»…HTTPSç«™ç‚¹ä½¿ç”¨
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;

# æƒé™ç­–ç•¥ï¼ˆæ§åˆ¶æµè§ˆå™¨åŠŸèƒ½ï¼‰
add_header Permissions-Policy "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=()" always;
</code></pre>
<h4 data-id="heading-18">4.2 é€Ÿç‡é™åˆ¶å’ŒDDoSé˜²æŠ¤</h4>
<p><strong>åŸºç¡€é€Ÿç‡é™åˆ¶ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># å®šä¹‰é€Ÿç‡é™åˆ¶åŒºåŸŸ
limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
limit_req_zone $binary_remote_addr zone=login:10m rate=1r/s;

server {
    location /api/ {
        # APIæ¥å£é€Ÿç‡é™åˆ¶
        limit_req zone=api burst=20 nodelay;
        limit_req_status 429;
        
        proxy_pass http://backend;
    }
    
    location /login {
        # ç™»å½•æ¥å£æ›´ä¸¥æ ¼çš„é™åˆ¶
        limit_req zone=login burst=5 nodelay;
        limit_req_status 429;
        
        proxy_pass http://backend;
    }
}
</code></pre>
<p><strong>é«˜çº§DDoSé˜²æŠ¤ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># è¿æ¥æ•°é™åˆ¶
limit_conn_zone $binary_remote_addr zone=addr:10m;
limit_conn_zone $server_name zone=perserver:10m;

# è¯·æ±‚å¤§å°é™åˆ¶
client_max_body_size 10M;
client_body_timeout 12s;
client_header_timeout 12s;

server {
    # å•IPè¿æ¥æ•°é™åˆ¶
    limit_conn addr 100;
    limit_conn perserver 1000;
    
    # å¤§è¯·æ±‚é˜²æŠ¤
    location /upload {
        client_max_body_size 100M;
    }
}
</code></pre>
<h3 data-id="heading-19">ğŸ§ª å®Œæ•´éªŒè¯æµ‹è¯•æ–¹æ¡ˆ</h3>
<h4 data-id="heading-20">5.1 è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</h4>
<p><strong>åˆ›å»ºå®‰å…¨æµ‹è¯•è„šæœ¬ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># nginx-security-test.sh</span>

DOMAIN=<span class="hljs-string">"your-domain.com"</span>
IP=<span class="hljs-string">"your-server-ip"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ” å¼€å§‹Nginxå®‰å…¨ç½‘å…³éªŒè¯æµ‹è¯•..."</span>

<span class="hljs-comment"># 1. ç‰ˆæœ¬éšè—æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 1. ç‰ˆæœ¬éšè—æµ‹è¯•"</span>
curl -s -I <span class="hljs-string">"http://<span class="hljs-variable">$DOMAIN</span>"</span> | grep -i <span class="hljs-string">"server"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… Serverå¤´å·²éšè—"</span>

<span class="hljs-comment"># 2. æ•æ„Ÿæ–‡ä»¶è®¿é—®æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 2. æ•æ„Ÿæ–‡ä»¶è®¿é—®æµ‹è¯•"</span>
files=(<span class="hljs-string">".git/config"</span> <span class="hljs-string">".env"</span> <span class="hljs-string">"config.php.bak"</span> <span class="hljs-string">"admin/index.php"</span> <span class="hljs-string">"phpmyadmin/"</span>)
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${files[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    response=$(curl -s -o /dev/null -w <span class="hljs-string">"%{http_code}"</span> <span class="hljs-string">"http://<span class="hljs-variable">$DOMAIN</span>/<span class="hljs-variable">$file</span>"</span>)
    <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"404"</span> ] || [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"403"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… <span class="hljs-variable">$file</span>: å·²é˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ <span class="hljs-variable">$file</span>: å¯è®¿é—® (HTTP <span class="hljs-variable">$response</span>)"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># 3. Hostå¤´æ”»å‡»æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 3. Hostå¤´æ”»å‡»æµ‹è¯•"</span>
response=$(curl -s -o /dev/null -w <span class="hljs-string">"%{http_code}"</span> -H <span class="hljs-string">"Host: evil.com"</span> <span class="hljs-string">"http://<span class="hljs-variable">$IP</span>/"</span>)
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"403"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… Hostå¤´æ”»å‡»: å·²é˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ Hostå¤´æ”»å‡»: æœªé˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 4. ç›®å½•éå†æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 4. ç›®å½•éå†æµ‹è¯•"</span>
response=$(curl -s -o /dev/null -w <span class="hljs-string">"%{http_code}"</span> <span class="hljs-string">"http://<span class="hljs-variable">$DOMAIN</span>/images/../../../etc/passwd"</span>)
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"404"</span> ] || [ <span class="hljs-string">"<span class="hljs-variable">$response</span>"</span> = <span class="hljs-string">"403"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… ç›®å½•éå†: å·²é˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ ç›®å½•éå†: æœªé˜»æ­¢ (HTTP <span class="hljs-variable">$response</span>)"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 5. å®‰å…¨å“åº”å¤´æµ‹è¯•</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ“‹ 5. å®‰å…¨å“åº”å¤´æµ‹è¯•"</span>
curl -s -I <span class="hljs-string">"http://<span class="hljs-variable">$DOMAIN</span>"</span> | grep -E <span class="hljs-string">"(X-Frame-Options|X-Content-Type-Options|X-XSS-Protection|Content-Security-Policy)"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš ï¸  éƒ¨åˆ†å®‰å…¨å¤´ç¼ºå¤±"</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ¯ æµ‹è¯•å®Œæˆï¼å»ºè®®ä¿®å¤æ‰€æœ‰âŒæ ‡è®°çš„é—®é¢˜ã€‚"</span>
</code></pre>
<h4 data-id="heading-21">5.2 æ‰‹åŠ¨éªŒè¯å‘½ä»¤</h4>
<p><strong>å…³é”®éªŒè¯å‘½ä»¤ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç‰ˆæœ¬éšè—éªŒè¯</span>
curl -I http://your-domain.com

<span class="hljs-comment"># æ•æ„Ÿæ–‡ä»¶æµ‹è¯•</span>
curl -I http://your-domain.com/.git/config
curl -I http://your-domain.com/.env
curl -I http://your-domain.com/config.php.bak

<span class="hljs-comment"># Hostå¤´æ”»å‡»æµ‹è¯•</span>
curl -H <span class="hljs-string">"Host: evil.com"</span> -I http://your-server-ip/
curl -H <span class="hljs-string">"Host: attacker.com"</span> -I http://your-domain.com/

<span class="hljs-comment"># ç›®å½•éå†æµ‹è¯•</span>
curl -I <span class="hljs-string">"http://your-domain.com/images/../../../etc/passwd"</span>
curl -I <span class="hljs-string">"http://your-domain.com/static/..%2f..%2f..%2fetc%2fpasswd"</span>

<span class="hljs-comment"># å®‰å…¨å“åº”å¤´éªŒè¯</span>
curl -I http://your-domain.com | grep -i <span class="hljs-string">"x-frame\|x-content\|x-xss\|csp\|hsts"</span>
</code></pre>
<h3 data-id="heading-22">ğŸ“‹ ç”Ÿäº§ç¯å¢ƒå®Œæ•´é…ç½®æ¨¡æ¿</h3>
<h4 data-id="heading-23">6.1 ä¸»é…ç½®æ–‡ä»¶ï¼ˆnginx.confï¼‰</h4>
<pre><code class="hljs language-nginx" lang="nginx">user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections 1024;
    use epoll;
    multi_accept on;
}

http {
    # åŸºç¡€ä¼˜åŒ–
    include /etc/nginx/mime.types;
    default_type application/octet-stream;
    
    # æ—¥å¿—æ ¼å¼
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for" '
                    'rt=$request_time uct="$upstream_connect_time" '
                    'uht="$upstream_header_time" urt="$upstream_response_time"';
    
    access_log /var/log/nginx/access.log main;
    
    # æ€§èƒ½ä¼˜åŒ–
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    client_max_body_size 10M;
    
    # Gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 10240;
    gzip_proxied expired no-cache no-store private must-revalidate auth;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/javascript
        application/xml+rss
        application/json;
    
    # é€Ÿç‡é™åˆ¶
    limit_req_zone $binary_remote_addr zone=api:10m rate=10r/s;
    limit_req_zone $binary_remote_addr zone=login:10m rate=1r/s;
    limit_conn_zone $binary_remote_addr zone=addr:10m;
    
    # éšè—ç‰ˆæœ¬å· - å®‰å…¨ç¬¬ä¸€é“é˜²çº¿
    server_tokens off;
    
    # é»˜è®¤æ‹’ç»æœåŠ¡å™¨å—ï¼ˆå¿…é¡»æ”¾åœ¨æœ€å‰é¢ï¼‰
    server {
        listen 80 default_server;
        listen [::]:80 default_server;
        listen 443 ssl default_server;
        listen [::]:443 ssl default_server;
        
        server_name _ "";
        return 403;
        
        # è®°å½•è¢«é˜»æ­¢çš„è¯·æ±‚
        access_log /var/log/nginx/block-default.log;
        
        ssl_certificate /etc/nginx/ssl/dummy.crt;
        ssl_certificate_key /etc/nginx/ssl/dummy.key;
    }
    
    # åŒ…å«ç«™ç‚¹é…ç½®
    include /etc/nginx/conf.d/*.conf;
}
</code></pre>
<h4 data-id="heading-24">6.2 ç«™ç‚¹å®‰å…¨é…ç½®ï¼ˆsite-security.confï¼‰</h4>
<pre><code class="hljs language-nginx" lang="nginx"># ä¸šåŠ¡ç«™ç‚¹å®‰å…¨é…ç½®
server {
    listen 80;
    listen [::]:80;
    server_name example.com www.example.com;
    
    # å¼ºåˆ¶HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    
    # æ˜ç¡®æŒ‡å®šå…è®¸çš„åŸŸå
    server_name example.com www.example.com;
    
    # SSLé…ç½®
    ssl_certificate /etc/nginx/ssl/example.com.crt;
    ssl_certificate_key /etc/nginx/ssl/example.com.key;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384;
    ssl_prefer_server_ciphers off;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    
    # HSTSï¼ˆHTTPä¸¥æ ¼ä¼ è¾“å®‰å…¨ï¼‰
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
    
    # åŸºç¡€å®‰å…¨å“åº”å¤´
    add_header X-Frame-Options "DENY" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    
    # CSPï¼ˆå†…å®¹å®‰å…¨ç­–ç•¥ï¼‰- æ ¹æ®å®é™…ä¸šåŠ¡è°ƒæ•´
    add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' https:; connect-src 'self' https:; media-src 'self'; object-src 'none'; child-src 'none'; form-action 'self'; base-uri 'self'; frame-ancestors 'none';" always;
    
    # æƒé™ç­–ç•¥
    add_header Permissions-Policy "geolocation=(), microphone=(), camera=(), payment=(), usb=(), magnetometer=(), gyroscope=(), accelerometer=()" always;
    
    # æ ¹ç›®å½•é…ç½®
    root /var/www/html;
    index index.html index.htm index.php;
    
    # å®‰å…¨æ–‡ä»¶è®¿é—®æ§åˆ¶
    # éšè—æ–‡ä»¶ï¼ˆä»¥.å¼€å¤´ï¼‰
    location ~ /\. {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶
    location ~* \.(git|svn|hg|bzr)/ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # é…ç½®æ–‡ä»¶
    location ~* \.(env|config|conf|ini|properties|yaml|yml)$ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # æ—¥å¿—å’Œå¤‡ä»½æ–‡ä»¶
    location ~* \.(log|cache|tmp|bak|backup|old|save|sql|db)$ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # å‹ç¼©åŒ…å’Œæ–‡æ¡£
    location ~* \.(zip|tar|gz|rar|7z|pdf|doc|docx|xls|xlsx|ppt|pptx)$ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # ç‰¹æ®Šç›®å½•
    location ~* ^/(admin|manage|backend|api-docs|swagger|phpmyadmin|wp-admin|wp-config|xmlrpc) {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # è·¯å¾„éå†é˜²æŠ¤
    location ~ \.\./ {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # URLè§£ç åçš„è·¯å¾„éå†
    location ~* "%2e%2e%2f" {
        deny all;
        return 404;
        access_log off;
        log_not_found off;
    }
    
    # APIæ¥å£é€Ÿç‡é™åˆ¶
    location /api/ {
        limit_req zone=api burst=20 nodelay;
        limit_req_status 429;
        
        # é¢å¤–çš„ç™»å½•æ¥å£é™åˆ¶
        location /api/login {
            limit_req zone=login burst=5 nodelay;
            limit_req_status 429;
        }
        
        # ä»£ç†åˆ°åç«¯
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # è¿æ¥è¶…æ—¶è®¾ç½®
        proxy_connect_timeout 30s;
        proxy_send_timeout 30s;
        proxy_read_timeout 30s;
    }
    
    # é™æ€èµ„æºå¤„ç†
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|woff|woff2|ttf|svg|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
        access_log off;
    }
    
    # é»˜è®¤location
    location / {
        # Hostå¤´éªŒè¯
        if ($host !~* ^(example\.com|www\.example\.com)$) {
            return 403;
        }
        
        # User-AgentéªŒè¯ï¼ˆé˜²æ­¢è‡ªåŠ¨åŒ–æ”»å‡»ï¼‰
        if ($http_user_agent ~* (wget|curl|libwww-perl|python|nikto|scan|nmap|sqlmap|hydra|gobuster|dirbuster)) {
            return 403;
        }
        
        # è¯·æ±‚æ–¹æ³•é™åˆ¶
        if ($request_method !~ ^(GET|HEAD|POST)$) {
            return 405;
        }
        
        # ä»£ç†åˆ°åç«¯
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # è¿æ¥è¶…æ—¶
        proxy_connect_timeout 30s;
        proxy_send_timeout 30s;
        proxy_read_timeout 30s;
    }
    
    # é”™è¯¯é¡µé¢
    error_page 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 421 422 423 424 425 426 428 429 431 451 500 501 502 503 504 505 506 507 508 510 511 /error.html;
    
    location = /error.html {
        internal;
        root /var/www/html;
    }
    
    # è®¿é—®æ—¥å¿—
    access_log /var/log/nginx/example.com-access.log main;
    error_log /var/log/nginx/example.com-error.log warn;
}
</code></pre>
<h3 data-id="heading-25">ğŸ¯ éƒ¨ç½²ä¸ç»´æŠ¤æŒ‡å—</h3>
<h4 data-id="heading-26">7.1 éƒ¨ç½²æ­¥éª¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¤‡ä»½ç°æœ‰é…ç½®</span>
<span class="hljs-built_in">cp</span> /etc/nginx/nginx.conf /etc/nginx/nginx.conf.backup.$(<span class="hljs-built_in">date</span> +%Y%m%d)

<span class="hljs-comment"># 2. æµ‹è¯•æ–°é…ç½®</span>
nginx -t

<span class="hljs-comment"># 3. é‡æ–°åŠ è½½é…ç½®</span>
nginx -s reload

<span class="hljs-comment"># 4. éªŒè¯æ•ˆæœ</span>
./nginx-security-test.sh
</code></pre>
<h4 data-id="heading-27">7.2 ç›‘æ§ä¸å‘Šè­¦</h4>
<p><strong>è®¾ç½®ç›‘æ§è„šæœ¬ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># security-monitor.sh</span>

LOG_FILE=<span class="hljs-string">"/var/log/nginx/security-alerts.log"</span>
ALERT_EMAIL=<span class="hljs-string">"admin@example.com"</span>

<span class="hljs-comment"># ç›‘æ§Hostå¤´æ”»å‡»</span>
grep <span class="hljs-string">"Host:.*\.com"</span> /var/log/nginx/access.log | grep -v <span class="hljs-string">"example.com"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-subst">$(date)</span>] Hostå¤´æ”»å‡»æ£€æµ‹: <span class="hljs-variable">$line</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ°Hostå¤´æ”»å‡»: <span class="hljs-variable">$line</span>"</span> | mail -s <span class="hljs-string">"Nginxå®‰å…¨å‘Šè­¦"</span> <span class="hljs-variable">$ALERT_EMAIL</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># ç›‘æ§æ•æ„Ÿæ–‡ä»¶è®¿é—®</span>
grep -E <span class="hljs-string">"(\.git|\.env|config\.bak)"</span> /var/log/nginx/access.log | grep <span class="hljs-string">" 200"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"[<span class="hljs-subst">$(date)</span>] æ•æ„Ÿæ–‡ä»¶è®¿é—®å‘Šè­¦: <span class="hljs-variable">$line</span>"</span> &gt;&gt; <span class="hljs-variable">$LOG_FILE</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ°æ•æ„Ÿæ–‡ä»¶è®¿é—®: <span class="hljs-variable">$line</span>"</span> | mail -s <span class="hljs-string">"ç´§æ€¥å®‰å…¨å‘Šè­¦"</span> <span class="hljs-variable">$ALERT_EMAIL</span>
<span class="hljs-keyword">done</span>
</code></pre>
<h4 data-id="heading-28">7.3 å®šæœŸå®‰å…¨å®¡è®¡</h4>
<p><strong>æœˆåº¦å®‰å…¨æ£€æŸ¥æ¸…å•ï¼š</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ£€æŸ¥Nginxè®¿é—®æ—¥å¿—ä¸­çš„å¼‚å¸¸è¯·æ±‚</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> éªŒè¯æ‰€æœ‰å®‰å…¨å¤´æ˜¯å¦æ­£ç¡®è®¾ç½®</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æµ‹è¯•æ•æ„Ÿæ–‡ä»¶æ˜¯å¦ä»ç„¶è¢«é˜»æ­¢</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ£€æŸ¥SSLè¯ä¹¦æœ‰æ•ˆæœŸ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ›´æ–°GeoIPæ•°æ®åº“</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®¡æŸ¥é€Ÿç‡é™åˆ¶é˜ˆå€¼æ˜¯å¦éœ€è¦è°ƒæ•´</li>
</ul>
<h3 data-id="heading-29">ğŸ† æ€»ç»“ï¼šæ„å»ºä¼ä¸šçº§å®‰å…¨ç½‘å…³</h3>
<h4 data-id="heading-30">æ ¸å¿ƒé˜²æŠ¤æˆæœ</h4>
<p>é€šè¿‡æœ¬æŒ‡å—çš„å®æ–½ï¼Œä½ çš„ç½‘ç«™å°†è·å¾—ï¼š</p>



































<table><thead><tr><th>é˜²æŠ¤ç»´åº¦</th><th>å®ç°æ•ˆæœ</th><th>å®‰å…¨ç­‰çº§</th></tr></thead><tbody><tr><td><strong>ä¿¡æ¯éšè—</strong></td><td>ç‰ˆæœ¬å·å®Œå…¨éšè—ï¼Œé”™è¯¯é¡µé¢è‡ªå®šä¹‰</td><td>ğŸ”´ ä¼˜ç§€</td></tr><tr><td><strong>å…¥å£æ§åˆ¶</strong></td><td>æ•æ„Ÿæ–‡ä»¶100%é˜»æ­¢ï¼Œç›®å½•éå†é˜²æŠ¤</td><td>ğŸ”´ ä¼˜ç§€</td></tr><tr><td><strong>èº«ä»½éªŒè¯</strong></td><td>Hostå¤´æ”»å‡»å®Œå…¨é˜²æŠ¤ï¼ŒåŸŸåç™½åå•éªŒè¯</td><td>ğŸ”´ ä¼˜ç§€</td></tr><tr><td><strong>å“åº”å®‰å…¨</strong></td><td>å®Œæ•´å®‰å…¨å¤´é…ç½®ï¼Œæµè§ˆå™¨é˜²æŠ¤æœºåˆ¶å¯ç”¨</td><td>ğŸŸ¡ è‰¯å¥½</td></tr><tr><td><strong>æ€§èƒ½ä¼˜åŒ–</strong></td><td>é€Ÿç‡é™åˆ¶ç”Ÿæ•ˆï¼Œèµ„æºç¼“å­˜ä¼˜åŒ–</td><td>ğŸŸ¡ è‰¯å¥½</td></tr></tbody></table>
<h4 data-id="heading-31">åˆè§„æ€§è¯„ä¼°</h4>
<p><strong>ç­‰ä¿2.0åˆè§„æ£€æŸ¥ï¼š</strong></p>
<ul>
<li>âœ… <strong>è®¿é—®æ§åˆ¶</strong>ï¼šå®ç°äº†åŸºäºåŸŸåçš„è®¿é—®æ§åˆ¶</li>
<li>âœ… <strong>å®‰å…¨å®¡è®¡</strong>ï¼šå®Œæ•´çš„è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—</li>
<li>âœ… <strong>å…¥ä¾µé˜²èŒƒ</strong>ï¼šå¤šå±‚é˜²æŠ¤æœºåˆ¶é˜»æ­¢å¸¸è§æ”»å‡»</li>
<li>âœ… <strong>æ¶æ„ä»£ç é˜²èŒƒ</strong>ï¼šé˜²æ­¢æ–‡ä»¶ä¸Šä¼ å’Œæ‰§è¡Œ</li>
<li>âœ… <strong>æ•°æ®å®Œæ•´æ€§</strong>ï¼šæ•æ„Ÿæ–‡ä»¶è®¿é—®æ§åˆ¶</li>
</ul>
<h4 data-id="heading-32">ç»´æŠ¤å»ºè®®</h4>
<ol>
<li><strong>å®šæœŸæ›´æ–°</strong>ï¼šå…³æ³¨Nginxå®‰å…¨å…¬å‘Šï¼ŒåŠæ—¶æ›´æ–°ç‰ˆæœ¬</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå»ºç«‹å®Œæ•´çš„å®‰å…¨ç›‘æ§ä½“ç³»</li>
<li><strong>æ¸—é€æµ‹è¯•</strong>ï¼šæ¯å­£åº¦è¿›è¡Œä¸€æ¬¡å®‰å…¨æµ‹è¯•</li>
<li><strong>é…ç½®å¤‡ä»½</strong>ï¼šå®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶å’Œè¯ä¹¦</li>
<li><strong>å›¢é˜ŸåŸ¹è®­</strong>ï¼šç¡®ä¿å›¢é˜Ÿäº†è§£å®‰å…¨é…ç½®çš„é‡è¦æ€§</li>
</ol>
<h4 data-id="heading-33">ä¸‹ä¸€æ­¥è¡ŒåŠ¨</h4>
<p>ç°åœ¨ä½ å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªä¼ä¸šçº§çš„Nginxå®‰å…¨ç½‘å…³ï¼å»ºè®®ï¼š</p>
<ol>
<li><strong>ç«‹å³æµ‹è¯•</strong>ï¼šä½¿ç”¨æä¾›çš„æµ‹è¯•è„šæœ¬éªŒè¯é…ç½®</li>
<li><strong>ç›‘æ§éƒ¨ç½²</strong>ï¼šè®¾ç½®å®‰å…¨ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶</li>
<li><strong>å›¢é˜Ÿåˆ†äº«</strong>ï¼šå°†è¿™ä»½æŒ‡å—åˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜</li>
<li><strong>æŒç»­æ”¹è¿›</strong>ï¼šæ ¹æ®å®é™…æ”»å‡»æƒ…å†µè°ƒæ•´é˜²æŠ¤ç­–ç•¥</li>
</ol>
<p>è®°ä½ï¼š<strong>å®‰å…¨æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§çš„é…ç½®</strong>ã€‚ä¿æŒè­¦æƒ•ï¼Œå®šæœŸå®¡æŸ¥ï¼Œä½ çš„ç½‘ç«™å°†å›ºè‹¥é‡‘æ±¤ï¼</p>
<hr/>
<h3 data-id="heading-34">ğŸš€ ç¬¬å…«éƒ¨åˆ†ï¼šäº‘åŸç”Ÿå®‰å…¨æ¶æ„æ¼”è¿›</h3>
<h4 data-id="heading-35">8.1 Kubernetes Ingresså®‰å…¨ç­–ç•¥</h4>
<p><strong>ä¼ ç»ŸNginx vs äº‘åŸç”Ÿæ¶æ„çš„æŒ‘æˆ˜ï¼š</strong></p>
<p>åœ¨ä¼ ç»Ÿæ¶æ„ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ç®¡ç†Nginxå®ä¾‹ï¼Œä½†åœ¨Kubernetesç¯å¢ƒä¸­ï¼Œå®‰å…¨è¾¹ç•Œå˜å¾—æ›´åŠ å¤æ‚ã€‚Podé—´çš„ç½‘ç»œé€šä¿¡ã€æœåŠ¡å‘ç°ã€åŠ¨æ€æ‰©ç¼©å®¹éƒ½å¸¦æ¥äº†æ–°çš„å®‰å…¨æŒ‘æˆ˜ã€‚</p>
<p><strong>Kubernetesç½‘ç»œå®‰å…¨æ¨¡å‹ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># NetworkPolicyï¼šç½‘ç»œå±‚è®¿é—®æ§åˆ¶</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">networking.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">NetworkPolicy</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-network-policy</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">production</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">podSelector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
  <span class="hljs-attr">policyTypes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Ingress</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Egress</span>
  <span class="hljs-attr">ingress:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">from:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">namespaceSelector:</span>
        <span class="hljs-attr">matchLabels:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">production</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">podSelector:</span>
        <span class="hljs-attr">matchLabels:</span>
          <span class="hljs-attr">role:</span> <span class="hljs-string">frontend</span>
    <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">443</span>
  <span class="hljs-attr">egress:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">to:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">namespaceSelector:</span>
        <span class="hljs-attr">matchLabels:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">production</span>
    <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>  <span class="hljs-comment"># åç«¯æœåŠ¡ç«¯å£</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">53</span>    <span class="hljs-comment"># DNSæŸ¥è¯¢</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">UDP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">53</span>
</code></pre>
<p><strong>Ingress Controllerå®‰å…¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># nginx-ingress-controllerå®‰å…¨éƒ¨ç½²</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-controller</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">ingress-nginx</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">serviceAccountName:</span> <span class="hljs-string">nginx-ingress-serviceaccount</span>
      <span class="hljs-attr">securityContext:</span>
        <span class="hljs-attr">runAsNonRoot:</span> <span class="hljs-literal">true</span>
        <span class="hljs-attr">runAsUser:</span> <span class="hljs-number">101</span>
        <span class="hljs-attr">fsGroup:</span> <span class="hljs-number">101</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-controller</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">k8s.gcr.io/ingress-nginx/controller:v1.8.1</span>
        <span class="hljs-attr">securityContext:</span>
          <span class="hljs-attr">allowPrivilegeEscalation:</span> <span class="hljs-literal">false</span>
          <span class="hljs-attr">readOnlyRootFilesystem:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">capabilities:</span>
            <span class="hljs-attr">drop:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">ALL</span>
            <span class="hljs-attr">add:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">NET_BIND_SERVICE</span>
        <span class="hljs-attr">args:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">/nginx-ingress-controller</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--configmap=$(POD_NAMESPACE)/nginx-configuration</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--tcp-services-configmap=$(POD_NAMESPACE)/tcp-services</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--udp-services-configmap=$(POD_NAMESPACE)/udp-services</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--annotations-prefix=nginx.ingress.kubernetes.io</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--enable-ssl-passthrough</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">--ssl-passthrough-proxy-port=442</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">POD_NAME</span>
          <span class="hljs-attr">valueFrom:</span>
            <span class="hljs-attr">fieldRef:</span>
              <span class="hljs-attr">fieldPath:</span> <span class="hljs-string">metadata.name</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">POD_NAMESPACE</span>
          <span class="hljs-attr">valueFrom:</span>
            <span class="hljs-attr">fieldRef:</span>
              <span class="hljs-attr">fieldPath:</span> <span class="hljs-string">metadata.namespace</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">http</span>
          <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span>
          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">https</span>
          <span class="hljs-attr">containerPort:</span> <span class="hljs-number">443</span>
          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">webhook</span>
          <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8443</span>
          <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
        <span class="hljs-attr">livenessProbe:</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/healthz</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">10254</span>
            <span class="hljs-attr">scheme:</span> <span class="hljs-string">HTTP</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">readinessProbe:</span>
          <span class="hljs-attr">httpGet:</span>
            <span class="hljs-attr">path:</span> <span class="hljs-string">/healthz</span>
            <span class="hljs-attr">port:</span> <span class="hljs-number">10254</span>
            <span class="hljs-attr">scheme:</span> <span class="hljs-string">HTTP</span>
          <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">10</span>
          <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">resources:</span>
          <span class="hljs-attr">requests:</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">100m</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">90Mi</span>
          <span class="hljs-attr">limits:</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">200m</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">180Mi</span>
</code></pre>
<p><strong>Podå®‰å…¨ç­–ç•¥ï¼ˆPodSecurityPolicyï¼‰ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">policy/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PodSecurityPolicy</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-psp</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">privileged:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">allowPrivilegeEscalation:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">requiredDropCapabilities:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">ALL</span>
  <span class="hljs-attr">allowedCapabilities:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">NET_BIND_SERVICE</span>
  <span class="hljs-attr">volumes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'configMap'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'emptyDir'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'projected'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'secret'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'downwardAPI'</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">'persistentVolumeClaim'</span>
  <span class="hljs-attr">hostNetwork:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">hostIPC:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">hostPID:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">runAsUser:</span>
    <span class="hljs-attr">rule:</span> <span class="hljs-string">'MustRunAsNonRoot'</span>
  <span class="hljs-attr">supplementalGroups:</span>
    <span class="hljs-attr">rule:</span> <span class="hljs-string">'MustRunAs'</span>
    <span class="hljs-attr">ranges:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">min:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">max:</span> <span class="hljs-number">65535</span>
  <span class="hljs-attr">fsGroup:</span>
    <span class="hljs-attr">rule:</span> <span class="hljs-string">'MustRunAs'</span>
    <span class="hljs-attr">ranges:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">min:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">max:</span> <span class="hljs-number">65535</span>
  <span class="hljs-attr">readOnlyRootFilesystem:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">seLinux:</span>
    <span class="hljs-attr">rule:</span> <span class="hljs-string">'RunAsAny'</span>
</code></pre>
<h4 data-id="heading-36">8.2 å®¹å™¨åŒ–Nginxå®‰å…¨æœ€ä½³å®è·µ</h4>
<p><strong>æœ€å°æƒé™å®¹å™¨é•œåƒæ„å»ºï¼š</strong></p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># å¤šé˜¶æ®µæ„å»ºå®‰å…¨Nginxé•œåƒ
FROM alpine:3.18 AS builder

# å®‰è£…æ„å»ºä¾èµ–
RUN apk add --no-cache \
    gcc \
    g++ \
    make \
    pcre-dev \
    zlib-dev \
    openssl-dev \
    geoip-dev

# ä¸‹è½½å¹¶ç¼–è¯‘Nginxï¼ˆåŒ…å«å®‰å…¨æ¨¡å—ï¼‰
ENV NGINX_VERSION=1.25.3
RUN wget http://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz &amp;&amp; \
    tar -xzf nginx-${NGINX_VERSION}.tar.gz &amp;&amp; \
    cd nginx-${NGINX_VERSION} &amp;&amp; \
    ./configure \
        --prefix=/etc/nginx \
        --sbin-path=/usr/sbin/nginx \
        --conf-path=/etc/nginx/nginx.conf \
        --error-log-path=/var/log/nginx/error.log \
        --http-log-path=/var/log/nginx/access.log \
        --pid-path=/var/run/nginx.pid \
        --lock-path=/var/run/nginx.lock \
        --with-http_ssl_module \
        --with-http_v2_module \
        --with-http_realip_module \
        --with-http_geoip_module \
        --with-http_secure_link_module \
        --with-http_sub_module \
        --with-http_stub_status_module \
        --with-stream \
        --with-stream_ssl_module \
        --with-stream_ssl_preread_module &amp;&amp; \
    make &amp;&amp; make install

# ç”Ÿäº§é•œåƒ
FROM alpine:3.18

# åˆ›å»ºéç‰¹æƒç”¨æˆ·
RUN addgroup -g 101 -S nginx &amp;&amp; \
    adduser -S -D -H -u 101 -h /var/cache/nginx -s /sbin/nologin -G nginx -g nginx nginx

# å®‰è£…è¿è¡Œæ—¶ä¾èµ–
RUN apk add --no-cache \
    pcre \
    zlib \
    openssl \
    geoip \
    ca-certificates \
    tzdata

# å¤åˆ¶ç¼–è¯‘å¥½çš„Nginx
COPY --from=builder /etc/nginx /etc/nginx
COPY --from=builder /usr/sbin/nginx /usr/sbin/nginx
COPY --from=builder /var/log/nginx /var/log/nginx

# å¤åˆ¶é…ç½®æ–‡ä»¶
COPY nginx.conf /etc/nginx/nginx.conf
COPY security.conf /etc/nginx/conf.d/security.conf

# è®¾ç½®æ–‡ä»¶æƒé™
RUN chown -R nginx:nginx /etc/nginx &amp;&amp; \
    chown -R nginx:nginx /var/log/nginx &amp;&amp; \
    chown -R nginx:nginx /var/cache/nginx &amp;&amp; \
    chmod 644 /etc/nginx/nginx.conf &amp;&amp; \
    chmod 644 /etc/nginx/conf.d/security.conf

# åˆ›å»ºå¿…è¦çš„ç›®å½•
RUN mkdir -p /var/cache/nginx/client_temp &amp;&amp; \
    mkdir -p /var/cache/nginx/proxy_temp &amp;&amp; \
    mkdir -p /var/cache/nginx/fastcgi_temp &amp;&amp; \
    mkdir -p /var/cache/nginx/uwsgi_temp &amp;&amp; \
    mkdir -p /var/cache/nginx/scgi_temp &amp;&amp; \
    chown -R nginx:nginx /var/cache/nginx

# å¥åº·æ£€æŸ¥è„šæœ¬
COPY healthcheck.sh /usr/local/bin/healthcheck.sh
RUN chmod +x /usr/local/bin/healthcheck.sh

# åˆ‡æ¢åˆ°éç‰¹æƒç”¨æˆ·
USER nginx

# æš´éœ²ç«¯å£
EXPOSE 8080 8443

# å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD /usr/local/bin/healthcheck.sh

# å¯åŠ¨å‘½ä»¤
ENTRYPOINT ["nginx", "-g", "daemon off;"]
</code></pre>
<p><strong>å¥åº·æ£€æŸ¥è„šæœ¬ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/sh</span>
<span class="hljs-comment"># healthcheck.sh</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># æ£€æŸ¥Nginxè¿›ç¨‹</span>
<span class="hljs-keyword">if</span> ! pgrep -x <span class="hljs-string">"nginx"</span> &gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Nginx process not running"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•</span>
<span class="hljs-keyword">if</span> ! nginx -t &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Nginx configuration test failed"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥ç›‘å¬ç«¯å£</span>
<span class="hljs-keyword">if</span> ! netstat -<span class="hljs-built_in">ln</span> | grep -q <span class="hljs-string">":8080 "</span>; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Nginx not listening on port 8080"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æµ‹è¯•HTTPå“åº”</span>
<span class="hljs-keyword">if</span> ! wget -q -O /dev/null -T 5 http://localhost:8080/health; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Nginx health check endpoint failed"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Health check passed"</span>
<span class="hljs-built_in">exit</span> 0
</code></pre>
<h4 data-id="heading-37">8.3 Service Meshé›†æˆå®‰å…¨æ–¹æ¡ˆ</h4>
<p><strong>Istioç¯å¢ƒä¸‹çš„å®‰å…¨ç­–ç•¥ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Istioå®‰å…¨ç­–ç•¥é…ç½®</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">security.istio.io/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PeerAuthentication</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-peer-auth</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">ingress-nginx</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
  <span class="hljs-attr">mtls:</span>
    <span class="hljs-attr">mode:</span> <span class="hljs-string">STRICT</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">security.istio.io/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">AuthorizationPolicy</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-authz</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">ingress-nginx</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">nginx-ingress</span>
  <span class="hljs-attr">rules:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">from:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">source:</span>
        <span class="hljs-attr">principals:</span> [<span class="hljs-string">"cluster.local/ns/production/sa/frontend"</span>]
    <span class="hljs-bullet">-</span> <span class="hljs-attr">source:</span>
        <span class="hljs-attr">ipBlocks:</span> [<span class="hljs-string">"10.0.0.0/8"</span>, <span class="hljs-string">"172.16.0.0/12"</span>, <span class="hljs-string">"192.168.0.0/16"</span>]
    <span class="hljs-attr">to:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">operation:</span>
        <span class="hljs-attr">methods:</span> [<span class="hljs-string">"GET"</span>, <span class="hljs-string">"POST"</span>, <span class="hljs-string">"PUT"</span>, <span class="hljs-string">"DELETE"</span>]
        <span class="hljs-attr">paths:</span> [<span class="hljs-string">"/api/*"</span>, <span class="hljs-string">"/health"</span>, <span class="hljs-string">"/metrics"</span>]
  <span class="hljs-bullet">-</span> <span class="hljs-attr">from:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">source:</span>
        <span class="hljs-attr">principals:</span> [<span class="hljs-string">"cluster.local/ns/monitoring/sa/prometheus"</span>]
    <span class="hljs-attr">to:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">operation:</span>
        <span class="hljs-attr">methods:</span> [<span class="hljs-string">"GET"</span>]
        <span class="hljs-attr">paths:</span> [<span class="hljs-string">"/metrics"</span>, <span class="hljs-string">"/health"</span>]
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">networking.istio.io/v1beta1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">DestinationRule</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-ingress-destination-rule</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">ingress-nginx</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">host:</span> <span class="hljs-string">nginx-ingress-service.ingress-nginx.svc.cluster.local</span>
  <span class="hljs-attr">trafficPolicy:</span>
    <span class="hljs-attr">tls:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">ISTIO_MUTUAL</span>
    <span class="hljs-attr">connectionPool:</span>
      <span class="hljs-attr">tcp:</span>
        <span class="hljs-attr">maxConnections:</span> <span class="hljs-number">100</span>
      <span class="hljs-attr">http:</span>
        <span class="hljs-attr">http1MaxPendingRequests:</span> <span class="hljs-number">50</span>
        <span class="hljs-attr">http2MaxRequests:</span> <span class="hljs-number">100</span>
        <span class="hljs-attr">maxRequestsPerConnection:</span> <span class="hljs-number">10</span>
    <span class="hljs-attr">loadBalancer:</span>
      <span class="hljs-attr">simple:</span> <span class="hljs-string">LEAST_REQUEST</span>
    <span class="hljs-attr">outlierDetection:</span>
      <span class="hljs-attr">consecutiveErrors:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">baseEjectionTime:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">maxEjectionPercent:</span> <span class="hljs-number">50</span>
      <span class="hljs-attr">minHealthPercent:</span> <span class="hljs-number">30</span>
</code></pre>
<h3 data-id="heading-38">ğŸ¤– ç¬¬ä¹éƒ¨åˆ†ï¼šAIé©±åŠ¨æ™ºèƒ½é˜²æŠ¤</h3>
<h4 data-id="heading-39">9.1 æœºå™¨å­¦ä¹ å¼‚å¸¸æ£€æµ‹</h4>
<p><strong>åŸºäºæµé‡çš„å¼‚å¸¸æ£€æµ‹ç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># ml_anomaly_detector.py</span>

<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> IsolationForest
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiohttp

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NginxAnomalyDetector</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)
        self.model = IsolationForest(contamination=<span class="hljs-number">0.1</span>, random_state=<span class="hljs-number">42</span>)
        self.scaler = StandardScaler()
        self.is_fitted = <span class="hljs-literal">False</span>
        
        <span class="hljs-comment"># ç‰¹å¾å®šä¹‰</span>
        self.features = [
            <span class="hljs-string">'request_rate'</span>, <span class="hljs-string">'response_time'</span>, <span class="hljs-string">'status_4xx_ratio'</span>,
            <span class="hljs-string">'status_5xx_ratio'</span>, <span class="hljs-string">'unique_ips'</span>, <span class="hljs-string">'payload_size_avg'</span>,
            <span class="hljs-string">'user_agent_entropy'</span>, <span class="hljs-string">'path_depth_avg'</span>, <span class="hljs-string">'query_params_count'</span>
        ]
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_features_from_log</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""ä»Nginxæ—¥å¿—æå–ç‰¹å¾"""</span>
        df = pd.DataFrame(log_data)
        
        features = {}
        features[<span class="hljs-string">'request_rate'</span>] = <span class="hljs-built_in">len</span>(df) / <span class="hljs-number">60</span>  <span class="hljs-comment"># æ¯åˆ†é’Ÿè¯·æ±‚æ•°</span>
        features[<span class="hljs-string">'response_time'</span>] = df[<span class="hljs-string">'request_time'</span>].mean() <span class="hljs-keyword">if</span> <span class="hljs-string">'request_time'</span> <span class="hljs-keyword">in</span> df <span class="hljs-keyword">else</span> <span class="hljs-number">0.1</span>
        features[<span class="hljs-string">'status_4xx_ratio'</span>] = (df[<span class="hljs-string">'status'</span>] &gt;= <span class="hljs-number">400</span>).<span class="hljs-built_in">sum</span>() / <span class="hljs-built_in">len</span>(df) <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(df) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
        features[<span class="hljs-string">'status_5xx_ratio'</span>] = (df[<span class="hljs-string">'status'</span>] &gt;= <span class="hljs-number">500</span>).<span class="hljs-built_in">sum</span>() / <span class="hljs-built_in">len</span>(df) <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(df) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
        features[<span class="hljs-string">'unique_ips'</span>] = df[<span class="hljs-string">'remote_addr'</span>].nunique()
        features[<span class="hljs-string">'payload_size_avg'</span>] = df[<span class="hljs-string">'body_bytes_sent'</span>].mean() <span class="hljs-keyword">if</span> <span class="hljs-string">'body_bytes_sent'</span> <span class="hljs-keyword">in</span> df <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>
        features[<span class="hljs-string">'user_agent_entropy'</span>] = self._calculate_entropy(df[<span class="hljs-string">'http_user_agent'</span>].dropna())
        features[<span class="hljs-string">'path_depth_avg'</span>] = df[<span class="hljs-string">'request_uri'</span>].apply(<span class="hljs-keyword">lambda</span> x: x.count(<span class="hljs-string">'/'</span>) <span class="hljs-keyword">if</span> pd.notna(x) <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>).mean()
        features[<span class="hljs-string">'query_params_count'</span>] = df[<span class="hljs-string">'request_uri'</span>].apply(<span class="hljs-keyword">lambda</span> x: x.count(<span class="hljs-string">'?'</span>) + x.count(<span class="hljs-string">'&amp;'</span>) <span class="hljs-keyword">if</span> pd.notna(x) <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>).mean()
        
        <span class="hljs-keyword">return</span> features
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_calculate_entropy</span>(<span class="hljs-params">self, series</span>):
        <span class="hljs-string">"""è®¡ç®—ä¿¡æ¯ç†µ"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(series) == <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
        
        value_counts = series.value_counts()
        probabilities = value_counts / <span class="hljs-built_in">len</span>(series)
        entropy = -np.<span class="hljs-built_in">sum</span>(probabilities * np.log2(probabilities + <span class="hljs-number">1e-10</span>))
        <span class="hljs-keyword">return</span> entropy
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">train_model</span>(<span class="hljs-params">self, historical_data</span>):
        <span class="hljs-string">"""è®­ç»ƒå¼‚å¸¸æ£€æµ‹æ¨¡å‹"""</span>
        features_list = []
        <span class="hljs-keyword">for</span> log_entry <span class="hljs-keyword">in</span> historical_data:
            features = self.extract_features_from_log([log_entry])
            features_list.append([features[f] <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> self.features])
        
        X = np.array(features_list)
        X_scaled = self.scaler.fit_transform(X)
        self.model.fit(X_scaled)
        self.is_fitted = <span class="hljs-literal">True</span>
        
        logging.info(<span class="hljs-string">f"æ¨¡å‹è®­ç»ƒå®Œæˆï¼Œä½¿ç”¨<span class="hljs-subst">{<span class="hljs-built_in">len</span>(historical_data)}</span>æ¡å†å²æ•°æ®"</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_anomaly</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""é¢„æµ‹å¼‚å¸¸"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.is_fitted:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>, <span class="hljs-number">0.0</span>
        
        features = self.extract_features_from_log([log_data])
        feature_vector = np.array([[features[f] <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> self.features]])
        feature_scaled = self.scaler.transform(feature_vector)
        
        anomaly_score = self.model.decision_function(feature_scaled)[<span class="hljs-number">0</span>]
        is_anomaly = self.model.predict(feature_scaled)[<span class="hljs-number">0</span>] == -<span class="hljs-number">1</span>
        
        <span class="hljs-keyword">return</span> is_anomaly, anomaly_score
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">real_time_monitoring</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å®æ—¶ç›‘æ§Nginxæ—¥å¿—"""</span>
        logging.info(<span class="hljs-string">"å¼€å§‹å®æ—¶ç›‘æ§Nginxæ—¥å¿—..."</span>)
        
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># ä»Redisè·å–æœ€æ–°æ—¥å¿—ï¼ˆæ¨¡æ‹Ÿå®æ—¶æ—¥å¿—æµï¼‰</span>
                log_entry = self.redis_client.lpop(<span class="hljs-string">'nginx:logs:realtime'</span>)
                <span class="hljs-keyword">if</span> log_entry:
                    log_data = json.loads(log_entry)
                    
                    is_anomaly, score = self.predict_anomaly(log_data)
                    
                    <span class="hljs-keyword">if</span> is_anomaly:
                        logging.warning(<span class="hljs-string">f"æ£€æµ‹åˆ°å¼‚å¸¸æµé‡ï¼å¼‚å¸¸è¯„åˆ†ï¼š<span class="hljs-subst">{score:<span class="hljs-number">.3</span>f}</span>"</span>)
                        
                        <span class="hljs-comment"># è§¦å‘è‡ªåŠ¨é˜»æ–­</span>
                        <span class="hljs-keyword">await</span> self.trigger_auto_block(log_data)
                        
                        <span class="hljs-comment"># å‘é€å‘Šè­¦</span>
                        <span class="hljs-keyword">await</span> self.send_alert(log_data, score)
                    
                    <span class="hljs-comment"># ç¼“å­˜æ­£å¸¸è¡Œä¸ºæ¨¡å¼</span>
                    <span class="hljs-keyword">await</span> self.cache_behavior_pattern(log_data)
                    
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"å®æ—¶ç›‘æ§å¼‚å¸¸ï¼š<span class="hljs-subst">{e}</span>"</span>)
            
            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">trigger_auto_block</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""è‡ªåŠ¨é˜»æ–­å¼‚å¸¸IP"""</span>
        suspicious_ip = log_data.get(<span class="hljs-string">'remote_addr'</span>)
        <span class="hljs-keyword">if</span> suspicious_ip:
            <span class="hljs-comment"># æ·»åŠ åˆ°Redisé»‘åå•</span>
            self.redis_client.sadd(<span class="hljs-string">'nginx:blocklist:ips'</span>, suspicious_ip)
            self.redis_client.expire(<span class="hljs-string">f'nginx:blocklist:ips'</span>, <span class="hljs-number">3600</span>)  <span class="hljs-comment"># 1å°æ—¶è¿‡æœŸ</span>
            
            <span class="hljs-comment"># è®°å½•é˜»æ–­æ—¥å¿—</span>
            block_info = {
                <span class="hljs-string">'ip'</span>: suspicious_ip,
                <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
                <span class="hljs-string">'reason'</span>: <span class="hljs-string">'ml_anomaly_detection'</span>,
                <span class="hljs-string">'request_uri'</span>: log_data.get(<span class="hljs-string">'request_uri'</span>),
                <span class="hljs-string">'user_agent'</span>: log_data.get(<span class="hljs-string">'http_user_agent'</span>)
            }
            self.redis_client.lpush(<span class="hljs-string">'nginx:blocklist:history'</span>, json.dumps(block_info))
            
            logging.info(<span class="hljs-string">f"è‡ªåŠ¨é˜»æ–­IPï¼š<span class="hljs-subst">{suspicious_ip}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_alert</span>(<span class="hljs-params">self, log_data, anomaly_score</span>):
        <span class="hljs-string">"""å‘é€å®‰å…¨å‘Šè­¦"""</span>
        alert = {
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'anomaly_detection'</span>,
            <span class="hljs-string">'severity'</span>: <span class="hljs-string">'high'</span> <span class="hljs-keyword">if</span> anomaly_score &lt; -<span class="hljs-number">0.5</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'medium'</span>,
            <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
            <span class="hljs-string">'source_ip'</span>: log_data.get(<span class="hljs-string">'remote_addr'</span>),
            <span class="hljs-string">'request_uri'</span>: log_data.get(<span class="hljs-string">'request_uri'</span>),
            <span class="hljs-string">'anomaly_score'</span>: anomaly_score,
            <span class="hljs-string">'details'</span>: log_data
        }
        
        <span class="hljs-comment"># å‘é€åˆ°å‘Šè­¦ç³»ç»Ÿï¼ˆWebhookã€é‚®ä»¶ã€çŸ­ä¿¡ç­‰ï¼‰</span>
        self.redis_client.publish(<span class="hljs-string">'security:alerts'</span>, json.dumps(alert))
        
        <span class="hljs-comment"># è®°å½•åˆ°æ•°æ®åº“</span>
        self.redis_client.lpush(<span class="hljs-string">'security:alerts:history'</span>, json.dumps(alert))
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">cache_behavior_pattern</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""ç¼“å­˜ç”¨æˆ·è¡Œä¸ºæ¨¡å¼"""</span>
        user_ip = log_data.get(<span class="hljs-string">'remote_addr'</span>)
        <span class="hljs-keyword">if</span> user_ip:
            <span class="hljs-comment"># æ„å»ºç”¨æˆ·è¡Œä¸ºæŒ‡çº¹</span>
            behavior_fingerprint = {
                <span class="hljs-string">'user_agent'</span>: log_data.get(<span class="hljs-string">'http_user_agent'</span>),
                <span class="hljs-string">'accept_language'</span>: log_data.get(<span class="hljs-string">'http_accept_language'</span>),
                <span class="hljs-string">'request_rate'</span>: <span class="hljs-keyword">await</span> self.get_user_request_rate(user_ip),
                <span class="hljs-string">'path_patterns'</span>: <span class="hljs-keyword">await</span> self.get_user_path_patterns(user_ip)
            }
            
            <span class="hljs-comment"># ç¼“å­˜24å°æ—¶</span>
            self.redis_client.setex(
                <span class="hljs-string">f'behavior:fingerprint:<span class="hljs-subst">{user_ip}</span>'</span>,
                <span class="hljs-number">86400</span>,
                json.dumps(behavior_fingerprint)
            )
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_request_rate</span>(<span class="hljs-params">self, user_ip</span>):
        <span class="hljs-string">"""è·å–ç”¨æˆ·è¯·æ±‚é¢‘ç‡"""</span>
        now = datetime.now()
        key = <span class="hljs-string">f'request_rate:<span class="hljs-subst">{user_ip}</span>:<span class="hljs-subst">{now.strftime(<span class="hljs-string">"%Y%m%d%H%M"</span>)}</span>'</span>
        <span class="hljs-keyword">return</span> self.redis_client.get(key) <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user_path_patterns</span>(<span class="hljs-params">self, user_ip</span>):
        <span class="hljs-string">"""è·å–ç”¨æˆ·è®¿é—®è·¯å¾„æ¨¡å¼"""</span>
        <span class="hljs-comment"># ä»æœ€è¿‘100æ¡è®°å½•ä¸­åˆ†æè·¯å¾„æ¨¡å¼</span>
        key = <span class="hljs-string">f'user_paths:<span class="hljs-subst">{user_ip}</span>'</span>
        paths = self.redis_client.lrange(key, <span class="hljs-number">0</span>, <span class="hljs-number">99</span>)
        <span class="hljs-keyword">return</span> [p.decode(<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> paths] <span class="hljs-keyword">if</span> paths <span class="hljs-keyword">else</span> []

<span class="hljs-comment"># é›†æˆåˆ°Nginxé…ç½®</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    detector = NginxAnomalyDetector()
    
    <span class="hljs-comment"># åŠ è½½å†å²æ•°æ®è®­ç»ƒæ¨¡å‹</span>
    historical_logs = load_historical_logs()  <span class="hljs-comment"># ä»æ—¥å¿—æ–‡ä»¶æˆ–æ•°æ®åº“åŠ è½½</span>
    detector.train_model(historical_logs)
    
    <span class="hljs-comment"># å¯åŠ¨å®æ—¶ç›‘æ§</span>
    <span class="hljs-keyword">await</span> detector.real_time_monitoring()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h4 data-id="heading-40">9.2 å®æ—¶å¨èƒæƒ…æŠ¥é›†æˆ</h4>
<p><strong>å¨èƒæƒ…æŠ¥æ•°æ®èšåˆç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># threat_intelligence_feed.py</span>

<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiohttp
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">import</span> logging

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreatIntelligenceAggregator</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">1</span>)
        self.feeds = [
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'AbuseIPDB'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://api.abuseipdb.com/api/v2/blacklist'</span>,
                <span class="hljs-string">'headers'</span>: {<span class="hljs-string">'Key'</span>: <span class="hljs-string">'YOUR_API_KEY'</span>, <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'application/json'</span>},
                <span class="hljs-string">'confidence_threshold'</span>: <span class="hljs-number">80</span>
            },
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'VirusTotal'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://www.virustotal.com/vtapi/v2/ip-address/report'</span>,
                <span class="hljs-string">'api_key'</span>: <span class="hljs-string">'YOUR_VIRUSTOTAL_API_KEY'</span>,
                <span class="hljs-string">'params'</span>: {<span class="hljs-string">'apikey'</span>: <span class="hljs-string">'YOUR_VIRUSTOTAL_API_KEY'</span>}
            },
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'AlienVault_OTX'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://otx.alienvault.com/api/v1/indicators/export'</span>,
                <span class="hljs-string">'headers'</span>: {<span class="hljs-string">'X-OTX-API-KEY'</span>: <span class="hljs-string">'YOUR_OTX_API_KEY'</span>}
            }
        ]
        
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_threat_feed</span>(<span class="hljs-params">self, session, feed</span>):
        <span class="hljs-string">"""è·å–å¨èƒæƒ…æŠ¥æ•°æ®"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(feed[<span class="hljs-string">'url'</span>], headers=feed.get(<span class="hljs-string">'headers'</span>, {}), params=feed.get(<span class="hljs-string">'params'</span>, {})) <span class="hljs-keyword">as</span> response:
                <span class="hljs-keyword">if</span> response.status == <span class="hljs-number">200</span>:
                    data = <span class="hljs-keyword">await</span> response.json()
                    <span class="hljs-keyword">return</span> {<span class="hljs-string">'feed_name'</span>: feed[<span class="hljs-string">'name'</span>], <span class="hljs-string">'data'</span>: data}
                <span class="hljs-keyword">else</span>:
                    logging.error(<span class="hljs-string">f"è·å–å¨èƒæƒ…æŠ¥å¤±è´¥ï¼š<span class="hljs-subst">{feed[<span class="hljs-string">'name'</span>]}</span> - <span class="hljs-subst">{response.status}</span>"</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logging.error(<span class="hljs-string">f"è·å–å¨èƒæƒ…æŠ¥å¼‚å¸¸ï¼š<span class="hljs-subst">{feed[<span class="hljs-string">'name'</span>]}</span> - <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">aggregate_threat_intelligence</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""èšåˆå¨èƒæƒ…æŠ¥æ•°æ®"""</span>
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
            tasks = [self.fetch_threat_feed(session, feed) <span class="hljs-keyword">for</span> feed <span class="hljs-keyword">in</span> self.feeds]
            results = <span class="hljs-keyword">await</span> asyncio.gather(*tasks)
            
            aggregated_threats = {
                <span class="hljs-string">'malicious_ips'</span>: <span class="hljs-built_in">set</span>(),
                <span class="hljs-string">'suspicious_domains'</span>: <span class="hljs-built_in">set</span>(),
                <span class="hljs-string">'attack_signatures'</span>: <span class="hljs-built_in">set</span>(),
                <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat()
            }
            
            <span class="hljs-keyword">for</span> result <span class="hljs-keyword">in</span> results:
                <span class="hljs-keyword">if</span> result:
                    <span class="hljs-keyword">await</span> self.process_feed_data(result, aggregated_threats)
            
            <span class="hljs-comment"># å­˜å‚¨åˆ°Redis</span>
            <span class="hljs-keyword">await</span> self.store_threat_intelligence(aggregated_threats)
            
            <span class="hljs-keyword">return</span> aggregated_threats
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_feed_data</span>(<span class="hljs-params">self, feed_result, aggregated_threats</span>):
        <span class="hljs-string">"""å¤„ç†å„ä¸ªå¨èƒæƒ…æŠ¥æºçš„æ•°æ®"""</span>
        feed_name = feed_result[<span class="hljs-string">'feed_name'</span>]
        data = feed_result[<span class="hljs-string">'data'</span>]
        
        <span class="hljs-keyword">if</span> feed_name == <span class="hljs-string">'AbuseIPDB'</span>:
            <span class="hljs-keyword">for</span> ip_data <span class="hljs-keyword">in</span> data.get(<span class="hljs-string">'data'</span>, []):
                <span class="hljs-keyword">if</span> ip_data.get(<span class="hljs-string">'confidence'</span>, <span class="hljs-number">0</span>) &gt;= <span class="hljs-number">80</span>:
                    aggregated_threats[<span class="hljs-string">'malicious_ips'</span>].add(ip_data[<span class="hljs-string">'ipAddress'</span>])
                    
        <span class="hljs-keyword">elif</span> feed_name == <span class="hljs-string">'VirusTotal'</span>:
            <span class="hljs-keyword">for</span> ip, report <span class="hljs-keyword">in</span> data.items():
                <span class="hljs-keyword">if</span> report.get(<span class="hljs-string">'response_code'</span>) == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> report.get(<span class="hljs-string">'positives'</span>, <span class="hljs-number">0</span>) &gt; <span class="hljs-number">5</span>:
                    aggregated_threats[<span class="hljs-string">'malicious_ips'</span>].add(ip)
                    
        <span class="hljs-keyword">elif</span> feed_name == <span class="hljs-string">'AlienVault_OTX'</span>:
            <span class="hljs-keyword">for</span> pulse <span class="hljs-keyword">in</span> data.get(<span class="hljs-string">'results'</span>, []):
                <span class="hljs-keyword">for</span> indicator <span class="hljs-keyword">in</span> pulse.get(<span class="hljs-string">'indicators'</span>, []):
                    <span class="hljs-keyword">if</span> indicator.get(<span class="hljs-string">'type'</span>) == <span class="hljs-string">'IP'</span>:
                        aggregated_threats[<span class="hljs-string">'malicious_ips'</span>].add(indicator.get(<span class="hljs-string">'indicator'</span>))
                    <span class="hljs-keyword">elif</span> indicator.get(<span class="hljs-string">'type'</span>) == <span class="hljs-string">'domain'</span>:
                        aggregated_threats[<span class="hljs-string">'suspicious_domains'</span>].add(indicator.get(<span class="hljs-string">'indicator'</span>))
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">store_threat_intelligence</span>(<span class="hljs-params">self, threats</span>):
        <span class="hljs-string">"""å­˜å‚¨å¨èƒæƒ…æŠ¥æ•°æ®"""</span>
        <span class="hljs-comment"># å­˜å‚¨æ¶æ„IP</span>
        <span class="hljs-keyword">if</span> threats[<span class="hljs-string">'malicious_ips'</span>]:
            self.redis_client.delete(<span class="hljs-string">'threats:malicious_ips'</span>)
            <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> threats[<span class="hljs-string">'malicious_ips'</span>]:
                self.redis_client.sadd(<span class="hljs-string">'threats:malicious_ips'</span>, ip)
            self.redis_client.expire(<span class="hljs-string">'threats:malicious_ips'</span>, <span class="hljs-number">3600</span>)  <span class="hljs-comment"># 1å°æ—¶è¿‡æœŸ</span>
        
        <span class="hljs-comment"># å­˜å‚¨å¯ç–‘åŸŸå</span>
        <span class="hljs-keyword">if</span> threats[<span class="hljs-string">'suspicious_domains'</span>]:
            self.redis_client.delete(<span class="hljs-string">'threats:suspicious_domains'</span>)
            <span class="hljs-keyword">for</span> domain <span class="hljs-keyword">in</span> threats[<span class="hljs-string">'suspicious_domains'</span>]:
                self.redis_client.sadd(<span class="hljs-string">'threats:suspicious_domains'</span>, domain)
            self.redis_client.expire(<span class="hljs-string">'threats:suspicious_domains'</span>, <span class="hljs-number">3600</span>)
        
        <span class="hljs-comment"># è®°å½•æ›´æ–°æ—¶é—´</span>
        self.redis_client.<span class="hljs-built_in">set</span>(<span class="hljs-string">'threats:last_update'</span>, threats[<span class="hljs-string">'timestamp'</span>])
        
        logging.info(<span class="hljs-string">f"å¨èƒæƒ…æŠ¥æ›´æ–°å®Œæˆï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(threats[<span class="hljs-string">'malicious_ips'</span>])}</span>ä¸ªæ¶æ„IPï¼Œ<span class="hljs-subst">{<span class="hljs-built_in">len</span>(threats[<span class="hljs-string">'suspicious_domains'</span>])}</span>ä¸ªå¯ç–‘åŸŸå"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_ip_reputation</span>(<span class="hljs-params">self, ip_address</span>):
        <span class="hljs-string">"""æ£€æŸ¥IPä¿¡èª‰"""</span>
        malicious_ips = self.redis_client.smembers(<span class="hljs-string">'threats:malicious_ips'</span>)
        malicious_ips = [ip.decode(<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">for</span> ip <span class="hljs-keyword">in</span> malicious_ips]
        
        <span class="hljs-keyword">if</span> ip_address <span class="hljs-keyword">in</span> malicious_ips:
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'is_threat'</span>: <span class="hljs-literal">True</span>,
                <span class="hljs-string">'threat_level'</span>: <span class="hljs-string">'high'</span>,
                <span class="hljs-string">'source'</span>: <span class="hljs-string">'threat_intelligence_feeds'</span>,
                <span class="hljs-string">'recommendation'</span>: <span class="hljs-string">'block_immediately'</span>
            }
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'is_threat'</span>: <span class="hljs-literal">False</span>,
            <span class="hljs-string">'threat_level'</span>: <span class="hljs-string">'low'</span>,
            <span class="hljs-string">'source'</span>: <span class="hljs-string">'clean'</span>,
            <span class="hljs-string">'recommendation'</span>: <span class="hljs-string">'allow'</span>
        }
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_continuous_updates</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æŒç»­æ›´æ–°å¨èƒæƒ…æŠ¥"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                logging.info(<span class="hljs-string">"å¼€å§‹æ›´æ–°å¨èƒæƒ…æŠ¥æ•°æ®..."</span>)
                <span class="hljs-keyword">await</span> self.aggregate_threat_intelligence()
                logging.info(<span class="hljs-string">"å¨èƒæƒ…æŠ¥æ•°æ®æ›´æ–°å®Œæˆ"</span>)
                
                <span class="hljs-comment"># æ¯30åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡</span>
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1800</span>)
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"å¨èƒæƒ…æŠ¥æ›´æ–°å¼‚å¸¸ï¼š<span class="hljs-subst">{e}</span>"</span>)
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">300</span>)  <span class="hljs-comment"># 5åˆ†é’Ÿåé‡è¯•</span>

<span class="hljs-comment"># Nginxé…ç½®é›†æˆå¨èƒæƒ…æŠ¥</span>
location / {
    <span class="hljs-comment"># åœ¨accessé˜¶æ®µæ£€æŸ¥IPå¨èƒæƒ…æŠ¥</span>
    access_by_lua_block {
        local redis = require <span class="hljs-string">"resty.redis"</span>
        local red = redis:new()
        red:set_timeout(<span class="hljs-number">1000</span>) -- <span class="hljs-number">1</span>ç§’è¶…æ—¶
        
        local ok, err = red:connect(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">6379</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ok then
            ngx.log(ngx.ERR, <span class="hljs-string">"Redisè¿æ¥å¤±è´¥: "</span>, err)
            <span class="hljs-keyword">return</span>
        end
        
        local client_ip = ngx.var.remote_addr
        local is_threat = red:sismember(<span class="hljs-string">"threats:malicious_ips"</span>, client_ip)
        
        <span class="hljs-keyword">if</span> is_threat == <span class="hljs-number">1</span> then
            ngx.log(ngx.WARN, <span class="hljs-string">"æ£€æµ‹åˆ°æ¶æ„IP: "</span>, client_ip)
            ngx.exit(<span class="hljs-number">403</span>)
        end
    }
    
    <span class="hljs-comment"># å…¶ä»–é…ç½®...</span>
}
</code></pre>
<h3 data-id="heading-41">ğŸ¢ ç¬¬åéƒ¨åˆ†ï¼šç°ä»£ä¼ä¸šçº§é›†æˆæ–¹æ¡ˆ</h3>
<h4 data-id="heading-42">10.1 DevSecOpsæµæ°´çº¿é›†æˆ</h4>
<p><strong>GitLab CI/CDå®‰å…¨æµæ°´çº¿ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .gitlab-ci.yml</span>
<span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">security-scan</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">build</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">security-test</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">deploy</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">security-monitor</span>

<span class="hljs-attr">variables:</span>
  <span class="hljs-attr">DOCKER_DRIVER:</span> <span class="hljs-string">overlay2</span>
  <span class="hljs-attr">DOCKER_TLS_CERTDIR:</span> <span class="hljs-string">"/certs"</span>
  <span class="hljs-attr">REGISTRY:</span> <span class="hljs-string">registry.example.com</span>
  <span class="hljs-attr">IMAGE_NAME:</span> <span class="hljs-string">$REGISTRY/nginx-security-gateway</span>

<span class="hljs-comment"># å®‰å…¨æ‰«æé˜¶æ®µ</span>
<span class="hljs-attr">security:nginx-config:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">security-scan</span>
  <span class="hljs-attr">image:</span> 
    <span class="hljs-attr">name:</span> <span class="hljs-string">nginx:alpine</span>
    <span class="hljs-attr">entrypoint:</span> [<span class="hljs-string">""</span>]
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">apk</span> <span class="hljs-string">add</span> <span class="hljs-string">--no-cache</span> <span class="hljs-string">python3</span> <span class="hljs-string">py3-pip</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">pip3</span> <span class="hljs-string">install</span> <span class="hljs-string">pyyaml</span> <span class="hljs-string">jsonschema</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">|
      python3 -c "
      import yaml
      import json
      import sys
</span>      
      <span class="hljs-comment"># éªŒè¯Nginxé…ç½®æ–‡ä»¶è¯­æ³•</span>
      <span class="hljs-string">import</span> <span class="hljs-string">subprocess</span>
      <span class="hljs-string">result</span> <span class="hljs-string">=</span> <span class="hljs-string">subprocess.run(['nginx',</span> <span class="hljs-string">'-t'</span><span class="hljs-string">,</span> <span class="hljs-string">'-c'</span><span class="hljs-string">,</span> <span class="hljs-string">'/etc/nginx/nginx.conf'</span><span class="hljs-string">],</span> 
                            <span class="hljs-string">capture_output=True,</span> <span class="hljs-string">text=True)</span>
      <span class="hljs-string">if</span> <span class="hljs-string">result.returncode</span> <span class="hljs-type">!=</span> <span class="hljs-attr">0:</span>
          <span class="hljs-string">print('Nginxé…ç½®è¯­æ³•é”™è¯¯:',</span> <span class="hljs-string">result.stderr)</span>
          <span class="hljs-string">sys.exit(1)</span>
      
      <span class="hljs-comment"># å®‰å…¨åŸºçº¿æ£€æŸ¥</span>
      <span class="hljs-string">with</span> <span class="hljs-string">open('/etc/nginx/nginx.conf',</span> <span class="hljs-string">'r'</span><span class="hljs-string">)</span> <span class="hljs-attr">as f:</span>
          <span class="hljs-string">config</span> <span class="hljs-string">=</span> <span class="hljs-string">f.read()</span>
      
      <span class="hljs-string">security_checks</span> <span class="hljs-string">=</span> [
          <span class="hljs-string">('server_tokens</span> <span class="hljs-string">off'</span>, <span class="hljs-string">'ç‰ˆæœ¬å·éšè—'</span><span class="hljs-string">)</span>,
          <span class="hljs-string">('add_header</span> <span class="hljs-string">X-Frame-Options'</span>, <span class="hljs-string">'ç‚¹å‡»åŠ«æŒé˜²æŠ¤'</span><span class="hljs-string">)</span>,
          <span class="hljs-string">('add_header</span> <span class="hljs-string">X-Content-Type-Options'</span>, <span class="hljs-string">'MIMEå—…æ¢é˜²æŠ¤'</span><span class="hljs-string">)</span>,
          <span class="hljs-string">('location</span> <span class="hljs-string">~</span> <span class="hljs-string">/\\.'</span>, <span class="hljs-string">'éšè—æ–‡ä»¶ä¿æŠ¤'</span><span class="hljs-string">)</span>,
          <span class="hljs-string">('location</span> <span class="hljs-string">~*</span> <span class="hljs-string">\\\.(git|env)'</span>, <span class="hljs-string">'æ•æ„Ÿæ–‡ä»¶ä¿æŠ¤'</span><span class="hljs-string">)</span>
      ]
      
      <span class="hljs-string">missing_security</span> <span class="hljs-string">=</span> []
      <span class="hljs-string">for</span> <span class="hljs-string">check,</span> <span class="hljs-attr">description in security_checks:</span>
          <span class="hljs-attr">if check not in config:</span>
              <span class="hljs-string">missing_security.append(description)</span>
      
      <span class="hljs-attr">if missing_security:</span>
          <span class="hljs-string">print('ç¼ºå¤±çš„å®‰å…¨é…ç½®:',</span> <span class="hljs-string">missing_security)</span>
          <span class="hljs-string">sys.exit(1)</span>
      
      <span class="hljs-string">print('âœ…</span> <span class="hljs-string">å®‰å…¨é…ç½®æ£€æŸ¥é€šè¿‡')</span>
      <span class="hljs-string">"
  artifacts:
    reports:
      junit: security-report.xml
    expire_in: 1 week
  only:
    - branches
    - merge_requests

# å®¹å™¨é•œåƒå®‰å…¨æ‰«æ
security:container-scan:
  stage: security-scan
  image: aquasec/trivy:latest
  script:
    - trivy image --exit-code 1 --severity HIGH,CRITICAL $IMAGE_NAME:latest || true
    - trivy image --format json --output trivy-report.json $IMAGE_NAME:latest
  artifacts:
    reports:
      container_scanning: trivy-report.json
    expire_in: 1 week
  allow_failure: true

# æ„å»ºé˜¶æ®µ
build:docker:
  stage: build
  image: docker:latest
  services:
    - docker:dind
  script:
    - docker build -t $IMAGE_NAME:$CI_COMMIT_SHA .
    - docker tag $IMAGE_NAME:$CI_COMMIT_SHA $IMAGE_NAME:latest
    - docker push $IMAGE_NAME:$CI_COMMIT_SHA
    - docker push $IMAGE_NAME:latest
  dependencies:
    - security:nginx-config

# å®‰å…¨æµ‹è¯•é˜¶æ®µ
security:penetration-test:
  stage: security-test
  image: owasp/zap2docker-stable:latest
  script:
    - mkdir -p zap-reports
    - zap-baseline.py -t http://nginx-security-gateway-staging.example.com \\
        -r zap-report.html \\
        -J zap-report.json \\
        -w zap-report.md \\
        -x zap-report.xml
  artifacts:
    reports:
      junit: zap-report.xml
    paths:
      - zap-reports/
    expire_in: 1 week
  allow_failure: true

# éƒ¨ç½²é˜¶æ®µ
deploy:staging:
  stage: deploy
  image: alpine:latest
  script:
    - apk add --no-cache curl
    - |
      # éƒ¨ç½²åˆ°stagingç¯å¢ƒ
      curl -X POST \\
        -H "</span><span class="hljs-attr">Content-Type:</span> <span class="hljs-string">application/json"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-H</span> <span class="hljs-string">"Authorization: Bearer $STAGING_API_TOKEN"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-d</span> <span class="hljs-string">"{\\"</span><span class="hljs-string">image\\":</span> <span class="hljs-string">\\"$IMAGE_NAME:$CI_COMMIT_SHA\\",</span> <span class="hljs-string">\\"environment\\":</span> <span class="hljs-string">\\"staging\\"}"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">https://api.staging.example.com/deploy</span>
      
      <span class="hljs-comment"># ç­‰å¾…éƒ¨ç½²å®Œæˆ</span>
      <span class="hljs-string">sleep</span> <span class="hljs-number">30</span>
      
      <span class="hljs-comment"># éªŒè¯éƒ¨ç½²</span>
      <span class="hljs-string">curl</span> <span class="hljs-string">-f</span> <span class="hljs-string">http://nginx-security-gateway-staging.example.com/health</span> <span class="hljs-string">||</span> <span class="hljs-string">exit</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">environment:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">staging</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">http://nginx-security-gateway-staging.example.com</span>
  <span class="hljs-attr">dependencies:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">build:docker</span>

<span class="hljs-attr">deploy:production:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">deploy</span>
  <span class="hljs-attr">image:</span> <span class="hljs-string">alpine:latest</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">apk</span> <span class="hljs-string">add</span> <span class="hljs-string">--no-cache</span> <span class="hljs-string">curl</span> <span class="hljs-string">jq</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">|
      # è·å–stagingç¯å¢ƒæµ‹è¯•ç»“æœ
      STAGING_TESTS=$(curl -s https://api.staging.example.com/tests/$CI_COMMIT_SHA)
      SECURITY_SCORE=$(echo $STAGING_TESTS | jq -r '.security_score')
</span>      
      <span class="hljs-string">if</span> [ <span class="hljs-string">"$SECURITY_SCORE"</span> <span class="hljs-string">-lt</span> <span class="hljs-number">90</span> ]<span class="hljs-string">;</span> <span class="hljs-string">then</span>
        <span class="hljs-string">echo</span> <span class="hljs-string">"å®‰å…¨è¯„åˆ†ä¸è¶³: $SECURITY_SCORE/100"</span>
        <span class="hljs-string">exit</span> <span class="hljs-number">1</span>
      <span class="hljs-string">fi</span>
      
      <span class="hljs-comment"># éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</span>
      <span class="hljs-string">curl</span> <span class="hljs-string">-X</span> <span class="hljs-string">POST</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-H</span> <span class="hljs-string">"Content-Type: application/json"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-H</span> <span class="hljs-string">"Authorization: Bearer $PRODUCTION_API_TOKEN"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">-d</span> <span class="hljs-string">"{\\"</span><span class="hljs-string">image\\":</span> <span class="hljs-string">\\"$IMAGE_NAME:$CI_COMMIT_SHA\\",</span> <span class="hljs-string">\\"environment\\":</span> <span class="hljs-string">\\"production\\"}"</span> <span class="hljs-string">\\</span>
        <span class="hljs-string">https://api.production.example.com/deploy</span>
      
      <span class="hljs-comment"># éªŒè¯éƒ¨ç½²</span>
      <span class="hljs-string">sleep</span> <span class="hljs-number">60</span>
      <span class="hljs-string">curl</span> <span class="hljs-string">-f</span> <span class="hljs-string">https://nginx-security-gateway.example.com/health</span> <span class="hljs-string">||</span> <span class="hljs-string">exit</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">environment:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">production</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">https://nginx-security-gateway.example.com</span>
  <span class="hljs-attr">when:</span> <span class="hljs-string">manual</span>
  <span class="hljs-attr">only:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">master</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">tags</span>

<span class="hljs-comment"># å®‰å…¨ç›‘æ§é˜¶æ®µ</span>
<span class="hljs-attr">monitor:security-metrics:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">security-monitor</span>
  <span class="hljs-attr">image:</span> <span class="hljs-string">python:3.11-alpine</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">pip</span> <span class="hljs-string">install</span> <span class="hljs-string">requests</span> <span class="hljs-string">prometheus-client</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">|
      python3 -c "
      import requests
      import json
      from prometheus_client import CollectorRegistry, Gauge, push_to_gateway
</span>      
      <span class="hljs-comment"># è·å–å®‰å…¨æŒ‡æ ‡</span>
      <span class="hljs-string">response</span> <span class="hljs-string">=</span> <span class="hljs-string">requests.get('https://nginx-security-gateway.example.com/metrics')</span>
      <span class="hljs-string">metrics</span> <span class="hljs-string">=</span> <span class="hljs-string">response.text</span>
      
      <span class="hljs-comment"># è§£æå…³é”®å®‰å…¨æŒ‡æ ‡</span>
      <span class="hljs-string">registry</span> <span class="hljs-string">=</span> <span class="hljs-string">CollectorRegistry()</span>
      <span class="hljs-string">blocked_requests</span> <span class="hljs-string">=</span> <span class="hljs-string">Gauge('nginx_blocked_requests_total',</span> <span class="hljs-string">'Total blocked requests'</span><span class="hljs-string">,</span> <span class="hljs-string">registry=registry)</span>
      <span class="hljs-string">anomaly_detections</span> <span class="hljs-string">=</span> <span class="hljs-string">Gauge('nginx_anomaly_detections_total',</span> <span class="hljs-string">'Total anomaly detections'</span><span class="hljs-string">,</span> <span class="hljs-string">registry=registry)</span>
      <span class="hljs-string">threat_intel_hits</span> <span class="hljs-string">=</span> <span class="hljs-string">Gauge('nginx_threat_intel_hits_total',</span> <span class="hljs-string">'Total threat intelligence hits'</span><span class="hljs-string">,</span> <span class="hljs-string">registry=registry)</span>
      
      <span class="hljs-comment"># æ¨é€æŒ‡æ ‡åˆ°Prometheus</span>
      <span class="hljs-string">push_to_gateway('prometheus.example.com:9091',</span> <span class="hljs-string">job='nginx-security-gateway',</span> <span class="hljs-string">registry=registry)</span>
      
      <span class="hljs-string">print('âœ…</span> <span class="hljs-string">å®‰å…¨æŒ‡æ ‡å·²æ¨é€åˆ°ç›‘æ§ç³»ç»Ÿ')</span>
      <span class="hljs-string">"
  dependencies:
    - deploy:production
  allow_failure: true
</span></code></pre>
<h4 data-id="heading-43">10.2 SIEM/SOARå¹³å°é›†æˆ</h4>
<p><strong>Splunké›†æˆé…ç½®ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># splunk-integration.sh</span>

<span class="hljs-comment"># Nginxå®‰å…¨æ—¥å¿—è½¬å‘åˆ°Splunk</span>
NGINX_LOG_DIR=<span class="hljs-string">"/var/log/nginx"</span>
SPLUNK_HEC_URL=<span class="hljs-string">"https://splunk.example.com:8088/services/collector"</span>
SPLUNK_HEC_TOKEN=<span class="hljs-string">"your-hec-token-here"</span>

<span class="hljs-comment"># åˆ›å»ºæ—¥å¿—è½¬å‘è„šæœ¬</span>
<span class="hljs-built_in">cat</span> &gt; /usr/local/bin/nginx-splunk-forwarder.py &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/usr/bin/env python3</span>
import json
import time
import requests
import gzip
from datetime import datetime
import logging

class NginxSplunkForwarder:
    def __init__(self, splunk_url, splunk_token):
        self.splunk_url = splunk_url
        self.splunk_token = splunk_token
        self.headers = {
            <span class="hljs-string">'Authorization'</span>: f<span class="hljs-string">'Splunk {splunk_token}'</span>,
            <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
        }
        
    def parse_nginx_log(self, log_line):
        <span class="hljs-string">""</span><span class="hljs-string">"è§£æNginxæ—¥å¿—"</span><span class="hljs-string">""</span>
        try:
            <span class="hljs-comment"># å‡è®¾ä½¿ç”¨JSONæ ¼å¼çš„Nginxæ—¥å¿—</span>
            log_data = json.loads(log_line)
            
            <span class="hljs-comment"># æ·»åŠ å®‰å…¨ç›¸å…³å­—æ®µ</span>
            log_data[<span class="hljs-string">'event_type'</span>] = <span class="hljs-string">'nginx_access'</span>
            log_data[<span class="hljs-string">'security_relevant'</span>] = self.is_security_relevant(log_data)
            log_data[<span class="hljs-string">'threat_level'</span>] = self.calculate_threat_level(log_data)
            
            <span class="hljs-built_in">return</span> log_data
        except json.JSONDecodeError:
            <span class="hljs-built_in">return</span> None
    
    def is_security_relevant(self, log_data):
        <span class="hljs-string">""</span><span class="hljs-string">"åˆ¤æ–­æ˜¯å¦ä¸ºå®‰å…¨ç›¸å…³äº‹ä»¶"</span><span class="hljs-string">""</span>
        security_indicators = [
            log_data.get(<span class="hljs-string">'status'</span>, 0) &gt;= 400,  <span class="hljs-comment"># é”™è¯¯çŠ¶æ€ç </span>
            <span class="hljs-string">'bot'</span> <span class="hljs-keyword">in</span> log_data.get(<span class="hljs-string">'http_user_agent'</span>, <span class="hljs-string">''</span>).lower(),
            <span class="hljs-string">'scan'</span> <span class="hljs-keyword">in</span> log_data.get(<span class="hljs-string">'http_user_agent'</span>, <span class="hljs-string">''</span>).lower(),
            log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>).count(<span class="hljs-string">'../'</span>) &gt; 0,  <span class="hljs-comment"># è·¯å¾„éå†</span>
            <span class="hljs-string">'.git'</span> <span class="hljs-keyword">in</span> log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>),  <span class="hljs-comment"># Gitç›®å½•è®¿é—®</span>
            <span class="hljs-string">'.env'</span> <span class="hljs-keyword">in</span> log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>),  <span class="hljs-comment"># ç¯å¢ƒæ–‡ä»¶è®¿é—®</span>
            len(log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>)) &gt; 1000,  <span class="hljs-comment"># è¶…é•¿URI</span>
            log_data.get(<span class="hljs-string">'body_bytes_sent'</span>, 0) == 0 and log_data.get(<span class="hljs-string">'status'</span>) == 200  <span class="hljs-comment"># ç©ºå“åº”</span>
        ]
        
        <span class="hljs-built_in">return</span> any(security_indicators)
    
    def calculate_threat_level(self, log_data):
        <span class="hljs-string">""</span><span class="hljs-string">"è®¡ç®—å¨èƒç­‰çº§"</span><span class="hljs-string">""</span>
        threat_score = 0
        
        <span class="hljs-comment"># çŠ¶æ€ç è¯„åˆ†</span>
        status = log_data.get(<span class="hljs-string">'status'</span>, 0)
        <span class="hljs-keyword">if</span> status &gt;= 500:
            threat_score += 10
        <span class="hljs-keyword">elif</span> status &gt;= 400:
            threat_score += 5
        
        <span class="hljs-comment"># URIå¼‚å¸¸è¯„åˆ†</span>
        uri = log_data.get(<span class="hljs-string">'request_uri'</span>, <span class="hljs-string">''</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-string">'../'</span> <span class="hljs-keyword">in</span> uri:
            threat_score += 15
        <span class="hljs-keyword">if</span> <span class="hljs-string">'.git'</span> <span class="hljs-keyword">in</span> uri or <span class="hljs-string">'.env'</span> <span class="hljs-keyword">in</span> uri:
            threat_score += 20
        <span class="hljs-keyword">if</span> len(uri) &gt; 1000:
            threat_score += 5
        
        <span class="hljs-comment"># User-Agentå¼‚å¸¸è¯„åˆ†</span>
        user_agent = log_data.get(<span class="hljs-string">'http_user_agent'</span>, <span class="hljs-string">''</span>)
        suspicious_patterns = [<span class="hljs-string">'bot'</span>, <span class="hljs-string">'scan'</span>, <span class="hljs-string">'nmap'</span>, <span class="hljs-string">'nikto'</span>, <span class="hljs-string">'sqlmap'</span>, <span class="hljs-string">'hydra'</span>]
        <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> suspicious_patterns:
            <span class="hljs-keyword">if</span> pattern <span class="hljs-keyword">in</span> user_agent.lower():
                threat_score += 10
                <span class="hljs-built_in">break</span>
        
        <span class="hljs-comment"># å“åº”æ—¶é—´å¼‚å¸¸è¯„åˆ†</span>
        request_time = <span class="hljs-built_in">float</span>(log_data.get(<span class="hljs-string">'request_time'</span>, 0))
        <span class="hljs-keyword">if</span> request_time &gt; 5.0:
            threat_score += 5
        
        <span class="hljs-comment"># å¨èƒç­‰çº§æ˜ å°„</span>
        <span class="hljs-keyword">if</span> threat_score &gt;= 30:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'critical'</span>
        <span class="hljs-keyword">elif</span> threat_score &gt;= 20:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'high'</span>
        <span class="hljs-keyword">elif</span> threat_score &gt;= 10:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'medium'</span>
        <span class="hljs-keyword">elif</span> threat_score &gt;= 5:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'low'</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">return</span> <span class="hljs-string">'info'</span>
    
    def send_to_splunk(self, event_data):
        <span class="hljs-string">""</span><span class="hljs-string">"å‘é€äº‹ä»¶åˆ°Splunk"</span><span class="hljs-string">""</span>
        payload = {
            <span class="hljs-string">'event'</span>: event_data,
            <span class="hljs-string">'sourcetype'</span>: <span class="hljs-string">'nginx:security'</span>,
            <span class="hljs-string">'index'</span>: <span class="hljs-string">'security'</span>,
            <span class="hljs-string">'host'</span>: <span class="hljs-string">'nginx-security-gateway'</span>
        }
        
        try:
            response = requests.post(
                self.splunk_url,
                headers=self.headers,
                json=payload,
                <span class="hljs-built_in">timeout</span>=10
            )
            
            <span class="hljs-keyword">if</span> response.status_code != 200:
                logging.error(f<span class="hljs-string">"Splunk HECé”™è¯¯: {response.status_code} - {response.text}"</span>)
                <span class="hljs-built_in">return</span> False
            
            <span class="hljs-built_in">return</span> True
        except requests.exceptions.RequestException as e:
            logging.error(f<span class="hljs-string">"å‘é€äº‹ä»¶åˆ°Splunkå¤±è´¥: {e}"</span>)
            <span class="hljs-built_in">return</span> False
    
    def monitor_log_file(self, log_file_path):
        <span class="hljs-string">""</span><span class="hljs-string">"ç›‘æ§æ—¥å¿—æ–‡ä»¶"</span><span class="hljs-string">""</span>
        with open(log_file_path, <span class="hljs-string">'r'</span>) as f:
            <span class="hljs-comment"># ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾</span>
            f.seek(0, 2)
            
            <span class="hljs-keyword">while</span> True:
                line = f.readline()
                <span class="hljs-keyword">if</span> not line:
                    time.sleep(0.1)
                    <span class="hljs-built_in">continue</span>
                
                <span class="hljs-comment"># è§£ææ—¥å¿—</span>
                parsed_data = self.parse_nginx_log(line.strip())
                <span class="hljs-keyword">if</span> parsed_data:
                    <span class="hljs-comment"># å‘é€åˆ°Splunk</span>
                    <span class="hljs-keyword">if</span> parsed_data[<span class="hljs-string">'security_relevant'</span>] or parsed_data[<span class="hljs-string">'threat_level'</span>] != <span class="hljs-string">'info'</span>:
                        success = self.send_to_splunk(parsed_data)
                        <span class="hljs-keyword">if</span> success:
                            logging.info(f<span class="hljs-string">"å®‰å…¨äº‹ä»¶å·²å‘é€åˆ°Splunk: {parsed_data.get('remote_addr')} - {parsed_data.get('threat_level')}"</span>)

<span class="hljs-comment"># å¯åŠ¨æ—¥å¿—ç›‘æ§</span>
forwarder = NginxSplunkForwarder(SPLUNK_HEC_URL, SPLUNK_HEC_TOKEN)
forwarder.monitor_log_file(<span class="hljs-string">"/var/log/nginx/security-access.log"</span>)
EOF

<span class="hljs-built_in">chmod</span> +x /usr/local/bin/nginx-splunk-forwarder.py
</code></pre>
<p><strong>Elasticsearchå®‰å…¨åˆ†æï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mappings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"date"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"event_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"remote_addr"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ip"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"request_uri"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"standard"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"http_user_agent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"analyzer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"standard"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"integer"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"body_bytes_sent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"long"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"request_time"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"float"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"security_relevant"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"boolean"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"threat_level"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"geoip"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"country_iso_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"location"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"geo_point"</span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"attack_classification"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"attack_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"confidence"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"float"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"severity"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"keyword"</span><span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"settings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"number_of_shards"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"number_of_replicas"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"lifecycle"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nginx-security-policy"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"rollover_alias"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nginx-security"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-44">10.3 å¤šäº‘ç¯å¢ƒç»Ÿä¸€å®‰å…¨ç­–ç•¥</h4>
<p><strong>Terraformå¤šäº‘å®‰å…¨é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-hcl" lang="hcl"># terraform/main.tf
terraform {
  required_version = "&gt;= 1.0"
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~&gt; 5.0"
    }
    azurerm = {
      source  = "hashicorp/azurerm"
      version = "~&gt; 3.0"
    }
    google = {
      source  = "hashicorp/google"
      version = "~&gt; 4.0"
    }
  }
}

# AWS WAFé…ç½®
module "aws_waf" {
  source = "./modules/aws-waf"
  
  name_prefix = "nginx-security"
  
  # åŸºç¡€è§„åˆ™
  managed_rules = [
    {
      name     = "AWSManagedRulesCommonRuleSet"
      priority = 1
      override_action = "none"
      excluded_rules = []
    },
    {
      name     = "AWSManagedRulesKnownBadInputsRuleSet"
      priority = 2
      override_action = "none"
      excluded_rules = []
    },
    {
      name     = "AWSManagedRulesSQLiRuleSet"
      priority = 3
      override_action = "none"
      excluded_rules = []
    },
    {
      name     = "AWSManagedRulesLinuxRuleSet"
      priority = 4
      override_action = "none"
      excluded_rules = []
    }
  ]
  
  # è‡ªå®šä¹‰è§„åˆ™
  custom_rules = [
    {
      name     = "block_malicious_ips"
      priority = 5
      action   = "block"
      
      statement = {
        ip_set_reference_statement = {
          arn = aws_wafv2_ip_set.malicious_ips.arn
        }
      }
    },
    {
      name     = "rate_limit_per_ip"
      priority = 6
      action   = "block"
      
      statement = {
        rate_based_statement = {
          limit              = 2000
          aggregate_key_type = "IP"
          evaluation_window_sec = 300
        }
      }
    }
  ]
  
  tags = {
    Environment = var.environment
    Purpose     = "nginx-security-gateway"
    ManagedBy   = "terraform"
  }
}

# Azure Application Gateway WAF
module "azure_waf" {
  source = "./modules/azure-waf"
  
  name                = "nginx-security-waf"
  resource_group_name = azurerm_resource_group.main.name
  location           = azurerm_resource_group.main.location
  
  # WAFç­–ç•¥
  waf_policy_settings = {
    enabled = true
    mode    = "Prevention"
    
    managed_rules = {
      owasp_3_2 = {
        enabled = true
        
        rule_overrides = [
          {
            rule_id = "942100"
            enabled = true
            action  = "Block"
          },
          {
            rule_id = "942110"
            enabled = true
            action  = "Block"
          }
        ]
      }
    }
    
    custom_rules = [
      {
        name     = "block_malicious_ips"
        priority = 1
        rule_type = "MatchRule"
        action   = "Block"
        
        match_conditions = [
          {
            match_variables = [
              {
                variable_name = "RemoteAddr"
              }
            ]
            operator = "IPMatch"
            match_values = var.malicious_ip_ranges
          }
        ]
      }
    ]
  }
  
  tags = {
    Environment = var.environment
    Purpose     = "nginx-security-gateway"
    ManagedBy   = "terraform"
  }
}

# Google Cloud Armor
module "gcp_cloud_armor" {
  source = "./modules/gcp-cloud-armor"
  
  project = var.gcp_project_id
  name    = "nginx-security-policy"
  
  # å®‰å…¨è§„åˆ™
  security_rules = [
    {
      action   = "deny(403)"
      priority = 100
      
      match = {
        versioned_expr = "SRC_IPS_V1"
        config = {
          src_ip_ranges = var.malicious_ip_ranges
        }
      }
      
      description = "Block known malicious IPs"
    },
    {
      action   = "rate_based_ban"
      priority = 200
      
      match = {
        versioned_expr = "SRC_IPS_V1"
        config = {
          src_ip_ranges = ["*"]
        }
      }
      
      rate_limit_options = {
        conform_action = "allow"
        exceed_action = "deny(429)"
        enforce_on_key = "IP"
        rate_limit_threshold = {
          count        = 100
          interval_sec = 60
        }
        ban_duration_sec = 600
      }
      
      description = "Rate limit per IP"
    }
  ]
  
  adaptive_protection_config = {
    layer_7_ddos_defense_config = {
      enable = true
    }
  }
  
  tags = {
    Environment = var.environment
    Purpose     = "nginx-security-gateway"
    ManagedBy   = "terraform"
  }
}
</code></pre>
<h3 data-id="heading-45">âš¡ ç¬¬åä¸€éƒ¨åˆ†ï¼šé«˜çº§æ”»é˜²å¯¹æŠ—ä¸é›¶æ—¥é˜²æŠ¤</h3>
<h4 data-id="heading-46">11.1 é›¶æ—¥æ¼æ´åº”æ€¥å“åº”æœºåˆ¶</h4>
<p><strong>è‡ªåŠ¨åŒ–æ¼æ´å“åº”ç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># zero_day_response_system.py</span>

<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiohttp
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> subprocess
<span class="hljs-keyword">import</span> hashlib

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ZeroDayResponseSystem</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">2</span>)
        self.vulnerability_feeds = [
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'NVD'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://services.nvd.nist.gov/rest/json/cves/2.0'</span>,
                <span class="hljs-string">'params'</span>: {
                    <span class="hljs-string">'resultsPerPage'</span>: <span class="hljs-number">100</span>,
                    <span class="hljs-string">'startIndex'</span>: <span class="hljs-number">0</span>,
                    <span class="hljs-string">'pubStartDate'</span>: (datetime.now() - timedelta(days=<span class="hljs-number">7</span>)).strftime(<span class="hljs-string">'%Y-%m-%dT%H:%M:%S.%f'</span>)[:-<span class="hljs-number">3</span>] + <span class="hljs-string">'Z'</span>
                }
            },
            {
                <span class="hljs-string">'name'</span>: <span class="hljs-string">'VulnDB'</span>,
                <span class="hljs-string">'url'</span>: <span class="hljs-string">'https://vulndb.cyberriskanalytics.com/api/v1/vulnerabilities'</span>,
                <span class="hljs-string">'headers'</span>: {<span class="hljs-string">'X-API-KEY'</span>: <span class="hljs-string">'YOUR_VULNDB_API_KEY'</span>}
            }
        ]
        
        <span class="hljs-comment"># Nginxç›¸å…³CVEæ¨¡å¼</span>
        self.nginx_cve_patterns = [
            <span class="hljs-string">'nginx'</span>, <span class="hljs-string">'NGINX'</span>, <span class="hljs-string">'CVE-2023'</span>, <span class="hljs-string">'CVE-2024'</span>,  <span class="hljs-comment"># å¹´ä»½æ¨¡å¼</span>
            <span class="hljs-string">'buffer overflow'</span>, <span class="hljs-string">'denial of service'</span>, <span class="hljs-string">'DoS'</span>, <span class="hljs-string">'remote code execution'</span>,
            <span class="hljs-string">'RCE'</span>, <span class="hljs-string">'authentication bypass'</span>, <span class="hljs-string">'privilege escalation'</span>
        ]
        
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_vulnerability_feed</span>(<span class="hljs-params">self, session, feed</span>):
        <span class="hljs-string">"""è·å–æ¼æ´æƒ…æŠ¥"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(feed[<span class="hljs-string">'url'</span>], 
                                 headers=feed.get(<span class="hljs-string">'headers'</span>, {}), 
                                 params=feed.get(<span class="hljs-string">'params'</span>, {})) <span class="hljs-keyword">as</span> response:
                <span class="hljs-keyword">if</span> response.status == <span class="hljs-number">200</span>:
                    data = <span class="hljs-keyword">await</span> response.json()
                    <span class="hljs-keyword">return</span> {<span class="hljs-string">'feed_name'</span>: feed[<span class="hljs-string">'name'</span>], <span class="hljs-string">'data'</span>: data}
                <span class="hljs-keyword">else</span>:
                    logging.error(<span class="hljs-string">f"è·å–æ¼æ´æƒ…æŠ¥å¤±è´¥ï¼š<span class="hljs-subst">{feed[<span class="hljs-string">'name'</span>]}</span> - <span class="hljs-subst">{response.status}</span>"</span>)
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            logging.error(<span class="hljs-string">f"è·å–æ¼æ´æƒ…æŠ¥å¼‚å¸¸ï¼š<span class="hljs-subst">{feed[<span class="hljs-string">'name'</span>]}</span> - <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_vulnerabilities</span>(<span class="hljs-params">self, vuln_data</span>):
        <span class="hljs-string">"""åˆ†ææ¼æ´æ•°æ®ï¼Œè¯†åˆ«ä¸Nginxç›¸å…³çš„å¨èƒ"""</span>
        relevant_vulnerabilities = []
        
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> vuln_data:
            feed_name = item[<span class="hljs-string">'feed_name'</span>]
            data = item[<span class="hljs-string">'data'</span>]
            
            <span class="hljs-keyword">if</span> feed_name == <span class="hljs-string">'NVD'</span>:
                <span class="hljs-keyword">for</span> vuln <span class="hljs-keyword">in</span> data.get(<span class="hljs-string">'vulnerabilities'</span>, []):
                    cve_id = vuln.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'id'</span>, <span class="hljs-string">''</span>)
                    description = vuln.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'descriptions'</span>, [{}])[<span class="hljs-number">0</span>].get(<span class="hljs-string">'value'</span>, <span class="hljs-string">''</span>)
                    
                    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦ä¸Nginxç›¸å…³</span>
                    <span class="hljs-keyword">if</span> self.is_nginx_related_vulnerability(cve_id, description):
                        vuln_info = {
                            <span class="hljs-string">'cve_id'</span>: cve_id,
                            <span class="hljs-string">'description'</span>: description,
                            <span class="hljs-string">'severity'</span>: self.extract_severity(vuln),
                            <span class="hljs-string">'published_date'</span>: vuln.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'published'</span>, <span class="hljs-string">''</span>),
                            <span class="hljs-string">'affected_versions'</span>: self.extract_affected_versions(description),
                            <span class="hljs-string">'attack_vector'</span>: self.extract_attack_vector(vuln),
                            <span class="hljs-string">'mitigation_available'</span>: self.check_mitigation_available(cve_id)
                        }
                        relevant_vulnerabilities.append(vuln_info)
        
        <span class="hljs-keyword">return</span> relevant_vulnerabilities
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_nginx_related_vulnerability</span>(<span class="hljs-params">self, cve_id, description</span>):
        <span class="hljs-string">"""åˆ¤æ–­æ˜¯å¦ä¸ºä¸Nginxç›¸å…³çš„æ¼æ´"""</span>
        combined_text = <span class="hljs-string">f"<span class="hljs-subst">{cve_id}</span> <span class="hljs-subst">{description}</span>"</span>.lower()
        
        <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦åŒ…å«Nginxç›¸å…³å…³é”®è¯</span>
        <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> self.nginx_cve_patterns:
            <span class="hljs-keyword">if</span> pattern.lower() <span class="hljs-keyword">in</span> combined_text:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_severity</span>(<span class="hljs-params">self, vuln_data</span>):
        <span class="hljs-string">"""æå–æ¼æ´ä¸¥é‡ç¨‹åº¦"""</span>
        metrics = vuln_data.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'metrics'</span>, {})
        
        <span class="hljs-comment"># CVSS v3.1è¯„åˆ†</span>
        <span class="hljs-keyword">if</span> <span class="hljs-string">'cvssMetricV31'</span> <span class="hljs-keyword">in</span> metrics:
            cvss = metrics[<span class="hljs-string">'cvssMetricV31'</span>][<span class="hljs-number">0</span>]
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'version'</span>: <span class="hljs-string">'CVSS v3.1'</span>,
                <span class="hljs-string">'score'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'baseScore'</span>, <span class="hljs-number">0</span>),
                <span class="hljs-string">'severity'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'baseSeverity'</span>, <span class="hljs-string">'UNKNOWN'</span>),
                <span class="hljs-string">'vector'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'vectorString'</span>, <span class="hljs-string">''</span>)
            }
        
        <span class="hljs-comment"># CVSS v3.0è¯„åˆ†</span>
        <span class="hljs-keyword">elif</span> <span class="hljs-string">'cvssMetricV30'</span> <span class="hljs-keyword">in</span> metrics:
            cvss = metrics[<span class="hljs-string">'cvssMetricV30'</span>][<span class="hljs-number">0</span>]
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'version'</span>: <span class="hljs-string">'CVSS v3.0'</span>,
                <span class="hljs-string">'score'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'baseScore'</span>, <span class="hljs-number">0</span>),
                <span class="hljs-string">'severity'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'baseSeverity'</span>, <span class="hljs-string">'UNKNOWN'</span>),
                <span class="hljs-string">'vector'</span>: cvss.get(<span class="hljs-string">'cvssData'</span>, {}).get(<span class="hljs-string">'vectorString'</span>, <span class="hljs-string">''</span>)
            }
        
        <span class="hljs-keyword">return</span> {<span class="hljs-string">'version'</span>: <span class="hljs-string">'UNKNOWN'</span>, <span class="hljs-string">'score'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'severity'</span>: <span class="hljs-string">'UNKNOWN'</span>, <span class="hljs-string">'vector'</span>: <span class="hljs-string">''</span>}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_affected_versions</span>(<span class="hljs-params">self, description</span>):
        <span class="hljs-string">"""æå–å—å½±å“çš„ç‰ˆæœ¬ä¿¡æ¯"""</span>
        version_patterns = [
            <span class="hljs-string">r'nginx\s+([0-9]+\.[0-9]+\.[0-9]+)'</span>,  <span class="hljs-comment"># nginx 1.2.3</span>
            <span class="hljs-string">r'versions?\s+([0-9]+\.[0-9]+\.[0-9]+)'</span>,  <span class="hljs-comment"># versions 1.2.3</span>
            <span class="hljs-string">r'before\s+([0-9]+\.[0-9]+\.[0-9]+)'</span>,   <span class="hljs-comment"># before 1.2.3</span>
            <span class="hljs-string">r'prior\s+to\s+([0-9]+\.[0-9]+\.[0-9]+)'</span> <span class="hljs-comment"># prior to 1.2.3</span>
        ]
        
        affected_versions = []
        <span class="hljs-keyword">import</span> re
        
        <span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> version_patterns:
            matches = re.findall(pattern, description, re.IGNORECASE)
            affected_versions.extend(matches)
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(affected_versions))
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_attack_vector</span>(<span class="hljs-params">self, vuln_data</span>):
        <span class="hljs-string">"""æå–æ”»å‡»å‘é‡ä¿¡æ¯"""</span>
        descriptions = vuln_data.get(<span class="hljs-string">'cve'</span>, {}).get(<span class="hljs-string">'descriptions'</span>, [])
        
        attack_vectors = []
        <span class="hljs-keyword">for</span> desc <span class="hljs-keyword">in</span> descriptions:
            value = desc.get(<span class="hljs-string">'value'</span>, <span class="hljs-string">''</span>).lower()
            
            <span class="hljs-keyword">if</span> <span class="hljs-string">'network'</span> <span class="hljs-keyword">in</span> value:
                attack_vectors.append(<span class="hljs-string">'NETWORK'</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-string">'adjacent'</span> <span class="hljs-keyword">in</span> value:
                attack_vectors.append(<span class="hljs-string">'ADJACENT_NETWORK'</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-string">'local'</span> <span class="hljs-keyword">in</span> value:
                attack_vectors.append(<span class="hljs-string">'LOCAL'</span>)
            <span class="hljs-keyword">if</span> <span class="hljs-string">'physical'</span> <span class="hljs-keyword">in</span> value:
                attack_vectors.append(<span class="hljs-string">'PHYSICAL'</span>)
        
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(attack_vectors))
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_mitigation_available</span>(<span class="hljs-params">self, cve_id</span>):
        <span class="hljs-string">"""æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„ç¼“è§£æªæ–½"""</span>
        <span class="hljs-comment"># è¿™é‡Œå¯ä»¥æŸ¥è¯¢å†…éƒ¨çŸ¥è¯†åº“æˆ–å¤–éƒ¨API</span>
        <span class="hljs-comment"># è¿”å›ç¼“è§£æªæ–½ä¿¡æ¯</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'available'</span>: <span class="hljs-literal">True</span>,  <span class="hljs-comment"># å‡è®¾æ€»æœ‰ç¼“è§£æªæ–½</span>
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'configuration'</span>,
            <span class="hljs-string">'description'</span>: <span class="hljs-string">'å¯ä»¥é€šè¿‡é…ç½®è°ƒæ•´ç¼“è§£'</span>,
            <span class="hljs-string">'effort_level'</span>: <span class="hljs-string">'medium'</span>
        }
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_emergency_response</span>(<span class="hljs-params">self, vulnerability</span>):
        <span class="hljs-string">"""ç”Ÿæˆåº”æ€¥å“åº”æªæ–½"""</span>
        response_actions = []
        
        <span class="hljs-comment"># æ ¹æ®æ¼æ´ä¸¥é‡ç¨‹åº¦ç”Ÿæˆå“åº”æªæ–½</span>
        severity_score = vulnerability[<span class="hljs-string">'severity'</span>][<span class="hljs-string">'score'</span>]
        
        <span class="hljs-keyword">if</span> severity_score &gt;= <span class="hljs-number">9.0</span>:  <span class="hljs-comment"># Critical</span>
            response_actions = [
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'immediate_block'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'ç«‹å³é˜»æ–­å¯ç–‘æ”»å‡»æ¨¡å¼'</span>,
                    <span class="hljs-string">'implementation'</span>: self.create_immediate_block_rule(vulnerability)
                },
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'enhanced_logging'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'å¯ç”¨å¢å¼ºæ—¥å¿—è®°å½•'</span>,
                    <span class="hljs-string">'implementation'</span>: self.enable_enhanced_logging(vulnerability)
                },
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'emergency_patch'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'ç´§æ€¥è¡¥ä¸éƒ¨ç½²'</span>,
                    <span class="hljs-string">'implementation'</span>: self.schedule_emergency_patch(vulnerability)
                }
            ]
        <span class="hljs-keyword">elif</span> severity_score &gt;= <span class="hljs-number">7.0</span>:  <span class="hljs-comment"># High</span>
            response_actions = [
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'rate_limiting'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'å®æ–½ä¸¥æ ¼çš„é€Ÿç‡é™åˆ¶'</span>,
                    <span class="hljs-string">'implementation'</span>: self.create_rate_limiting_rule(vulnerability)
                },
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'signature_detection'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'éƒ¨ç½²ç‰¹å¾æ£€æµ‹è§„åˆ™'</span>,
                    <span class="hljs-string">'implementation'</span>: self.create_signature_rule(vulnerability)
                }
            ]
        <span class="hljs-keyword">elif</span> severity_score &gt;= <span class="hljs-number">4.0</span>:  <span class="hljs-comment"># Medium</span>
            response_actions = [
                {
                    <span class="hljs-string">'action'</span>: <span class="hljs-string">'monitoring_enhancement'</span>,
                    <span class="hljs-string">'description'</span>: <span class="hljs-string">'å¢å¼ºç›‘æ§å’Œå‘Šè­¦'</span>,
                    <span class="hljs-string">'implementation'</span>: self.enhance_monitoring(vulnerability)
                }
            ]
        
        <span class="hljs-keyword">return</span> response_actions
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">create_immediate_block_rule</span>(<span class="hljs-params">self, vulnerability</span>):
        <span class="hljs-string">"""åˆ›å»ºç«‹å³é˜»æ–­è§„åˆ™"""</span>
        <span class="hljs-comment"># ç”ŸæˆNginxé…ç½®ç‰‡æ®µ</span>
        block_rule = <span class="hljs-string">f"""
        # é›¶æ—¥æ¼æ´ç´§æ€¥é˜»æ–­è§„åˆ™ - <span class="hljs-subst">{vulnerability[<span class="hljs-string">'cve_id'</span>]}</span>
        location / {{
            # é˜»æ–­å·²çŸ¥æ”»å‡»IP
            include /etc/nginx/blocklists/emergency-block-<span class="hljs-subst">{vulnerability[<span class="hljs-string">'cve_id'</span>]}</span>.conf;
            
            # é˜»æ–­å¯ç–‘User-Agent
            if ($http_user_agent ~* "<span class="hljs-subst">{self.extract_suspicious_user_agents(vulnerability)}</span>") {{
                return 403;
            }}
            
            # é˜»æ–­å¯ç–‘è¯·æ±‚æ¨¡å¼
            if ($request_uri ~* "<span class="hljs-subst">{self.extract_attack_patterns(vulnerability)}</span>") {{
                return 403;
            }}
            
            # é¢å¤–çš„å®‰å…¨æ£€æŸ¥
            include /etc/nginx/security/emergency-security.conf;
        }}
        """</span>
        
        <span class="hljs-comment"># ä¿å­˜è§„åˆ™åˆ°æ–‡ä»¶</span>
        rule_file = <span class="hljs-string">f"/etc/nginx/conf.d/emergency-<span class="hljs-subst">{vulnerability[<span class="hljs-string">'cve_id'</span>]}</span>.conf"</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(rule_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
            f.write(block_rule)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'rule_file'</span>: rule_file,
            <span class="hljs-string">'reload_required'</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">'testing_required'</span>: <span class="hljs-literal">True</span>
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_suspicious_user_agents</span>(<span class="hljs-params">self, vulnerability</span>):
        <span class="hljs-string">"""æå–å¯ç–‘çš„User-Agentæ¨¡å¼"""</span>
        <span class="hljs-comment"># åŸºäºæ¼æ´ç‰¹å¾ç”ŸæˆUser-Agentæ£€æµ‹æ¨¡å¼</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"(bot|scanner|nikto|sqlmap|nmap|masscan|zgrab)"</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_attack_patterns</span>(<span class="hljs-params">self, vulnerability</span>):
        <span class="hljs-string">"""æå–æ”»å‡»æ¨¡å¼"""</span>
        <span class="hljs-comment"># åŸºäºæ¼æ´æè¿°ç”Ÿæˆæ”»å‡»æ¨¡å¼æ£€æµ‹</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"(\\\\.\\\\.\\\\/|\\\\.git|\\\\.env|config\\\\.php|wp-admin)"</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">deploy_emergency_rules</span>(<span class="hljs-params">self, vulnerability, response_actions</span>):
        <span class="hljs-string">"""éƒ¨ç½²åº”æ€¥å“åº”è§„åˆ™"""</span>
        deployment_results = []
        
        <span class="hljs-keyword">for</span> action <span class="hljs-keyword">in</span> response_actions:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-keyword">if</span> action[<span class="hljs-string">'action'</span>] == <span class="hljs-string">'immediate_block'</span>:
                    result = action[<span class="hljs-string">'implementation'</span>]
                    
                    <span class="hljs-comment"># æµ‹è¯•Nginxé…ç½®</span>
                    test_result = subprocess.run([<span class="hljs-string">'nginx'</span>, <span class="hljs-string">'-t'</span>], capture_output=<span class="hljs-literal">True</span>, text=<span class="hljs-literal">True</span>)
                    <span class="hljs-keyword">if</span> test_result.returncode == <span class="hljs-number">0</span>:
                        <span class="hljs-comment"># é‡æ–°åŠ è½½Nginx</span>
                        reload_result = subprocess.run([<span class="hljs-string">'nginx'</span>, <span class="hljs-string">'-s'</span>, <span class="hljs-string">'reload'</span>], capture_output=<span class="hljs-literal">True</span>, text=<span class="hljs-literal">True</span>)
                        <span class="hljs-keyword">if</span> reload_result.returncode == <span class="hljs-number">0</span>:
                            deployment_results.append({
                                <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                                <span class="hljs-string">'status'</span>: <span class="hljs-string">'success'</span>,
                                <span class="hljs-string">'message'</span>: <span class="hljs-string">'ç´§æ€¥é˜»æ–­è§„åˆ™å·²æˆåŠŸéƒ¨ç½²'</span>
                            })
                        <span class="hljs-keyword">else</span>:
                            deployment_results.append({
                                <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                                <span class="hljs-string">'status'</span>: <span class="hljs-string">'failed'</span>,
                                <span class="hljs-string">'message'</span>: <span class="hljs-string">f'Nginxé‡æ–°åŠ è½½å¤±è´¥: <span class="hljs-subst">{reload_result.stderr}</span>'</span>
                            })
                    <span class="hljs-keyword">else</span>:
                        deployment_results.append({
                            <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                            <span class="hljs-string">'status'</span>: <span class="hljs-string">'failed'</span>,
                            <span class="hljs-string">'message'</span>: <span class="hljs-string">f'Nginxé…ç½®æµ‹è¯•å¤±è´¥: <span class="hljs-subst">{test_result.stderr}</span>'</span>
                            })
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                deployment_results.append({
                    <span class="hljs-string">'action'</span>: action[<span class="hljs-string">'action'</span>],
                    <span class="hljs-string">'status'</span>: <span class="hljs-string">'error'</span>,
                    <span class="hljs-string">'message'</span>: <span class="hljs-built_in">str</span>(e)
                })
        
        <span class="hljs-keyword">return</span> deployment_results
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run_continuous_monitoring</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æŒç»­ç›‘æ§é›¶æ—¥æ¼æ´"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                logging.info(<span class="hljs-string">"å¼€å§‹æ£€æŸ¥æ–°çš„é›¶æ—¥æ¼æ´..."</span>)
                
                <span class="hljs-comment"># è·å–æœ€æ–°æ¼æ´ä¿¡æ¯</span>
                <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
                    tasks = [self.fetch_vulnerability_feed(session, feed) <span class="hljs-keyword">for</span> feed <span class="hljs-keyword">in</span> self.vulnerability_feeds]
                    results = <span class="hljs-keyword">await</span> asyncio.gather(*tasks)
                    
                    <span class="hljs-comment"># åˆ†ææ¼æ´</span>
                    relevant_vulns = <span class="hljs-keyword">await</span> self.analyze_vulnerabilities([r <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> results <span class="hljs-keyword">if</span> r])
                    
                    <span class="hljs-comment"># å¤„ç†é«˜å±æ¼æ´</span>
                    <span class="hljs-keyword">for</span> vuln <span class="hljs-keyword">in</span> relevant_vulns:
                        <span class="hljs-keyword">if</span> vuln[<span class="hljs-string">'severity'</span>][<span class="hljs-string">'score'</span>] &gt;= <span class="hljs-number">7.0</span>:  <span class="hljs-comment"># High severity</span>
                            logging.warning(<span class="hljs-string">f"å‘ç°é«˜å±Nginxæ¼æ´: <span class="hljs-subst">{vuln[<span class="hljs-string">'cve_id'</span>]}</span> (Score: <span class="hljs-subst">{vuln[<span class="hljs-string">'severity'</span>][<span class="hljs-string">'score'</span>]}</span>)"</span>)
                            
                            <span class="hljs-comment"># ç”Ÿæˆåº”æ€¥å“åº”</span>
                            response_actions = <span class="hljs-keyword">await</span> self.generate_emergency_response(vuln)
                            
                            <span class="hljs-comment"># éƒ¨ç½²åº”æ€¥æªæ–½</span>
                            deployment_results = <span class="hljs-keyword">await</span> self.deploy_emergency_rules(vuln, response_actions)
                            
                            <span class="hljs-comment"># è®°å½•å“åº”æ—¥å¿—</span>
                            response_log = {
                                <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
                                <span class="hljs-string">'vulnerability'</span>: vuln,
                                <span class="hljs-string">'response_actions'</span>: response_actions,
                                <span class="hljs-string">'deployment_results'</span>: deployment_results
                            }
                            
                            self.redis_client.lpush(<span class="hljs-string">'zeroday:response_logs'</span>, json.dumps(response_log))
                            
                            <span class="hljs-comment"># å‘é€å‘Šè­¦</span>
                            <span class="hljs-keyword">await</span> self.send_zero_day_alert(vuln, response_actions)
                
                <span class="hljs-comment"># æ¯6å°æ—¶æ£€æŸ¥ä¸€æ¬¡</span>
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">21600</span>)
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"é›¶æ—¥æ¼æ´ç›‘æ§å¼‚å¸¸ï¼š<span class="hljs-subst">{e}</span>"</span>)
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">3600</span>)  <span class="hljs-comment"># 1å°æ—¶åé‡è¯•</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_zero_day_alert</span>(<span class="hljs-params">self, vulnerability, response_actions</span>):
        <span class="hljs-string">"""å‘é€é›¶æ—¥æ¼æ´å‘Šè­¦"""</span>
        alert = {
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'zero_day_vulnerability'</span>,
            <span class="hljs-string">'severity'</span>: <span class="hljs-string">'critical'</span> <span class="hljs-keyword">if</span> vulnerability[<span class="hljs-string">'severity'</span>][<span class="hljs-string">'score'</span>] &gt;= <span class="hljs-number">9.0</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'high'</span>,
            <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
            <span class="hljs-string">'vulnerability'</span>: vulnerability,
            <span class="hljs-string">'response_actions'</span>: response_actions,
            <span class="hljs-string">'action_required'</span>: <span class="hljs-string">'immediate_response'</span>
        }
        
        <span class="hljs-comment"># å‘é€åˆ°å‘Šè­¦ç³»ç»Ÿ</span>
        self.redis_client.publish(<span class="hljs-string">'security:zero_day_alerts'</span>, json.dumps(alert))

<span class="hljs-comment"># å¯åŠ¨é›¶æ—¥æ¼æ´ç›‘æ§ç³»ç»Ÿ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    zero_day_system = ZeroDayResponseSystem()
    <span class="hljs-keyword">await</span> zero_day_system.run_continuous_monitoring()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h4 data-id="heading-47">11.2 é«˜çº§æŒç»­å¨èƒ(APT)é˜²æŠ¤</h4>
<p><strong>APTæ”»å‡»æ£€æµ‹ä¸é˜²æŠ¤ç³»ç»Ÿï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-comment"># apt_detection_system.py</span>

<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime, timedelta
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict, deque
<span class="hljs-keyword">import</span> logging

<span class="hljs-keyword">class</span> <span class="hljs-title class_">APTDetectionSystem</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">3</span>)
        
        <span class="hljs-comment"># APTæ”»å‡»è¡Œä¸ºæ¨¡å¼</span>
        self.apt_behavior_patterns = {
            <span class="hljs-string">'reconnaissance'</span>: {
                <span class="hljs-string">'indicators'</span>: [<span class="hljs-string">'scanning'</span>, <span class="hljs-string">'enumeration'</span>, <span class="hljs-string">'fingerprinting'</span>],
                <span class="hljs-string">'threshold'</span>: <span class="hljs-number">10</span>,
                <span class="hljs-string">'time_window'</span>: <span class="hljs-number">3600</span>  <span class="hljs-comment"># 1å°æ—¶</span>
            },
            <span class="hljs-string">'lateral_movement'</span>: {
                <span class="hljs-string">'indicators'</span>: [<span class="hljs-string">'privilege_escalation'</span>, <span class="hljs-string">'credential_dumping'</span>, <span class="hljs-string">'remote_access'</span>],
                <span class="hljs-string">'threshold'</span>: <span class="hljs-number">5</span>,
                <span class="hljs-string">'time_window'</span>: <span class="hljs-number">1800</span>  <span class="hljs-comment"># 30åˆ†é’Ÿ</span>
            },
            <span class="hljs-string">'data_exfiltration'</span>: {
                <span class="hljs-string">'indicators'</span>: [<span class="hljs-string">'large_data_transfer'</span>, <span class="hljs-string">'unusual_outbound'</span>, <span class="hljs-string">'encrypted_communication'</span>],
                <span class="hljs-string">'threshold'</span>: <span class="hljs-number">3</span>,
                <span class="hljs-string">'time_window'</span>: <span class="hljs-number">7200</span>  <span class="hljs-comment"># 2å°æ—¶</span>
            },
            <span class="hljs-string">'persistence'</span>: {
                <span class="hljs-string">'indicators'</span>: [<span class="hljs-string">'backdoor_installation'</span>, <span class="hljs-string">'scheduled_tasks'</span>, <span class="hljs-string">'registry_modification'</span>],
                <span class="hljs-string">'threshold'</span>: <span class="hljs-number">2</span>,
                <span class="hljs-string">'time_window'</span>: <span class="hljs-number">86400</span>  <span class="hljs-comment"># 24å°æ—¶</span>
            }
        }
        
        <span class="hljs-comment"># ç”¨æˆ·è¡Œä¸ºåŸºçº¿</span>
        self.user_behavior_baseline = {}
        
        <span class="hljs-comment"># å¨èƒç‹©çŒè§„åˆ™</span>
        self.threat_hunting_rules = [
            self.detect_low_and_slow_attacks,
            self.detect_living_off_the_land,
            self.detect_c2_communications,
            self.detect_data_staging
        ]
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_user_behavior</span>(<span class="hljs-params">self, user_id, current_behavior</span>):
        <span class="hljs-string">"""åˆ†æç”¨æˆ·è¡Œä¸ºåå·®"""</span>
        <span class="hljs-keyword">if</span> user_id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.user_behavior_baseline:
            <span class="hljs-comment"># å»ºç«‹ç”¨æˆ·è¡Œä¸ºåŸºçº¿</span>
            self.user_behavior_baseline[user_id] = {
                <span class="hljs-string">'request_patterns'</span>: deque(maxlen=<span class="hljs-number">1000</span>),
                <span class="hljs-string">'time_patterns'</span>: deque(maxlen=<span class="hljs-number">1000</span>),
                <span class="hljs-string">'resource_access'</span>: defaultdict(<span class="hljs-built_in">int</span>),
                <span class="hljs-string">'geo_patterns'</span>: deque(maxlen=<span class="hljs-number">100</span>),
                <span class="hljs-string">'established'</span>: datetime.now()
            }
            <span class="hljs-keyword">return</span> {<span class="hljs-string">'risk_score'</span>: <span class="hljs-number">0</span>, <span class="hljs-string">'anomalies'</span>: []}
        
        baseline = self.user_behavior_baseline[user_id]
        anomalies = []
        risk_score = <span class="hljs-number">0</span>
        
        <span class="hljs-comment"># 1. æ—¶é—´æ¨¡å¼å¼‚å¸¸æ£€æµ‹</span>
        current_hour = current_behavior.get(<span class="hljs-string">'timestamp'</span>, datetime.now()).hour
        time_pattern = baseline[<span class="hljs-string">'time_patterns'</span>]
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(time_pattern) &gt; <span class="hljs-number">50</span>:
            usual_hours = [t.hour <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> time_pattern]
            hour_frequency = defaultdict(<span class="hljs-built_in">int</span>)
            <span class="hljs-keyword">for</span> h <span class="hljs-keyword">in</span> usual_hours:
                hour_frequency[h] += <span class="hljs-number">1</span>
            
            <span class="hljs-comment"># æ£€æŸ¥å½“å‰æ—¶é—´æ˜¯å¦åœ¨ç”¨æˆ·é€šå¸¸æ´»è·ƒæ—¶é—´ä¹‹å¤–</span>
            <span class="hljs-keyword">if</span> current_hour <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> hour_frequency <span class="hljs-keyword">and</span> <span class="hljs-built_in">len</span>(hour_frequency) &gt; <span class="hljs-number">0</span>:
                anomalies.append({
                    <span class="hljs-string">'type'</span>: <span class="hljs-string">'unusual_time_access'</span>,
                    <span class="hljs-string">'severity'</span>: <span class="hljs-string">'medium'</span>,
                    <span class="hljs-string">'details'</span>: <span class="hljs-string">f"Access at <span class="hljs-subst">{current_hour}</span>:00, user usually active at <span class="hljs-subst">{<span class="hljs-built_in">list</span>(hour_frequency.keys())}</span>"</span>
                })
                risk_score += <span class="hljs-number">20</span>
        
        <span class="hljs-comment"># 2. èµ„æºè®¿é—®å¼‚å¸¸æ£€æµ‹</span>
        current_resource = current_behavior.get(<span class="hljs-string">'resource'</span>, <span class="hljs-string">''</span>)
        resource_access = baseline[<span class="hljs-string">'resource_access'</span>]
        
        <span class="hljs-keyword">if</span> current_resource <span class="hljs-keyword">and</span> current_resource <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> resource_access:
            <span class="hljs-comment"># é¦–æ¬¡è®¿é—®æ–°èµ„æº</span>
            anomalies.append({
                <span class="hljs-string">'type'</span>: <span class="hljs-string">'new_resource_access'</span>,
                <span class="hljs-string">'severity'</span>: <span class="hljs-string">'low'</span>,
                <span class="hljs-string">'details'</span>: <span class="hljs-string">f"First time accessing: <span class="hljs-subst">{current_resource}</span>"</span>
            })
            risk_score += <span class="hljs-number">10</span>
        
        <span class="hljs-comment"># 3. è¯·æ±‚æ¨¡å¼å¼‚å¸¸æ£€æµ‹</span>
        current_pattern = {
            <span class="hljs-string">'method'</span>: current_behavior.get(<span class="hljs-string">'method'</span>, <span class="hljs-string">''</span>),
            <span class="hljs-string">'path'</span>: current_behavior.get(<span class="hljs-string">'path'</span>, <span class="hljs-string">''</span>),
            <span class="hljs-string">'params'</span>: current_behavior.get(<span class="hljs-string">'params'</span>, {})
        }
        
        request_patterns = baseline[<span class="hljs-string">'request_patterns'</span>]
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(request_patterns) &gt; <span class="hljs-number">100</span>:
            <span class="hljs-comment"># è®¡ç®—ä¸å†å²æ¨¡å¼çš„ç›¸ä¼¼åº¦</span>
            similarity_scores = []
            <span class="hljs-keyword">for</span> historical_pattern <span class="hljs-keyword">in</span> request_patterns:
                similarity = self.calculate_pattern_similarity(current_pattern, historical_pattern)
                similarity_scores.append(similarity)
            
            <span class="hljs-comment"># è®¡ç®—å¹³å‡ç›¸ä¼¼åº¦</span>
            avg_similarity = np.mean(similarity_scores)
            
            <span class="hljs-keyword">if</span> avg_similarity &lt; <span class="hljs-number">0.3</span>:  <span class="hljs-comment"># ç›¸ä¼¼åº¦ä½äºé˜ˆå€¼</span>
                anomalies.append({
                    <span class="hljs-string">'type'</span>: <span class="hljs-string">'unusual_request_pattern'</span>,
                    <span class="hljs-string">'severity'</span>: <span class="hljs-string">'high'</span>,
                    <span class="hljs-string">'details'</span>: <span class="hljs-string">f"Request pattern similarity <span class="hljs-subst">{avg_similarity:<span class="hljs-number">.2</span>f}</span>, significantly different from historical patterns"</span>
                })
                risk_score += <span class="hljs-number">30</span>
        
        <span class="hljs-comment"># 4. åœ°ç†ä½ç½®å¼‚å¸¸æ£€æµ‹</span>
        current_geo = current_behavior.get(<span class="hljs-string">'geo_location'</span>)
        <span class="hljs-keyword">if</span> current_geo:
            geo_patterns = baseline[<span class="hljs-string">'geo_patterns'</span>]
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(geo_patterns) &gt; <span class="hljs-number">10</span> <span class="hljs-keyword">and</span> current_geo <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> geo_patterns:
                <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸å¯èƒ½çš„åœ°ç†ä½ç½®è·³è½¬</span>
                recent_locations = [g <span class="hljs-keyword">for</span> g <span class="hljs-keyword">in</span> geo_patterns[-<span class="hljs-number">5</span>:]]  <span class="hljs-comment"># æœ€è¿‘5æ¬¡è®¿é—®ä½ç½®</span>
                <span class="hljs-keyword">if</span> current_geo <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> recent_locations:
                    anomalies.append({
                        <span class="hljs-string">'type'</span>: <span class="hljs-string">'unusual_geolocation'</span>,
                        <span class="hljs-string">'severity'</span>: <span class="hljs-string">'high'</span>,
                        <span class="hljs-string">'details'</span>: <span class="hljs-string">f"Access from unusual location: <span class="hljs-subst">{current_geo}</span>, recent locations: <span class="hljs-subst">{recent_locations}</span>"</span>
                    })
                    risk_score += <span class="hljs-number">40</span>
        
        <span class="hljs-comment"># 5. åº”ç”¨å¨èƒç‹©çŒè§„åˆ™</span>
        <span class="hljs-keyword">for</span> hunter <span class="hljs-keyword">in</span> self.threat_hunting_rules:
            hunter_result = hunter(current_behavior, baseline)
            <span class="hljs-keyword">if</span> hunter_result:
                anomalies.append(hunter_result)
                risk_score += <span class="hljs-number">25</span>
        
        <span class="hljs-comment"># æ›´æ–°åŸºçº¿</span>
        baseline[<span class="hljs-string">'request_patterns'</span>].append(current_pattern)
        baseline[<span class="hljs-string">'time_patterns'</span>].append(current_behavior.get(<span class="hljs-string">'timestamp'</span>, datetime.now()))
        <span class="hljs-keyword">if</span> current_resource:
            baseline[<span class="hljs-string">'resource_access'</span>][current_resource] += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> current_geo:
            baseline[<span class="hljs-string">'geo_patterns'</span>].append(current_geo)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'risk_score'</span>: <span class="hljs-built_in">min</span>(risk_score, <span class="hljs-number">100</span>),  <span class="hljs-comment"># é™åˆ¶æœ€å¤§é£é™©åˆ†æ•°ä¸º100</span>
            <span class="hljs-string">'anomalies'</span>: anomalies
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_pattern_similarity</span>(<span class="hljs-params">self, pattern1, pattern2</span>):
        <span class="hljs-string">"""è®¡ç®—è¯·æ±‚æ¨¡å¼ç›¸ä¼¼åº¦"""</span>
        <span class="hljs-comment"># ç®€åŒ–å®ç°ï¼Œå®é™…åº”ç”¨ä¸­å¯ä½¿ç”¨æ›´å¤æ‚çš„ç®—æ³•</span>
        <span class="hljs-keyword">if</span> pattern1[<span class="hljs-string">'method'</span>] != pattern2[<span class="hljs-string">'method'</span>]:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>
        
        path_similarity = self._string_similarity(pattern1[<span class="hljs-string">'path'</span>], pattern2[<span class="hljs-string">'path'</span>])
        params_similarity = self._params_similarity(pattern1[<span class="hljs-string">'params'</span>], pattern2[<span class="hljs-string">'params'</span>])
        
        <span class="hljs-keyword">return</span> (path_similarity * <span class="hljs-number">0.7</span>) + (params_similarity * <span class="hljs-number">0.3</span>)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_string_similarity</span>(<span class="hljs-params">self, s1, s2</span>):
        <span class="hljs-string">"""è®¡ç®—å­—ç¬¦ä¸²ç›¸ä¼¼åº¦ï¼ˆç®€åŒ–ç‰ˆï¼‰"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> s1 <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> s2:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>
            
        <span class="hljs-comment"># ä½¿ç”¨Levenshteinè·ç¦»è®¡ç®—ç›¸ä¼¼åº¦</span>
        <span class="hljs-keyword">from</span> Levenshtein <span class="hljs-keyword">import</span> ratio
        <span class="hljs-keyword">return</span> ratio(s1, s2)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_params_similarity</span>(<span class="hljs-params">self, params1, params2</span>):
        <span class="hljs-string">"""è®¡ç®—å‚æ•°ç›¸ä¼¼åº¦"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> params1 <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> params2:
            <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> params1 <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> params2:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>
        
        keys1 = <span class="hljs-built_in">set</span>(params1.keys())
        keys2 = <span class="hljs-built_in">set</span>(params2.keys())
        common_keys = keys1.intersection(keys2)
        all_keys = keys1.union(keys2)
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> all_keys:
            <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span>
            
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(common_keys) / <span class="hljs-built_in">len</span>(all_keys)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_low_and_slow_attacks</span>(<span class="hljs-params">self, behavior, baseline</span>):
        <span class="hljs-string">"""æ£€æµ‹ä½é€Ÿæ”»å‡»"""</span>
        <span class="hljs-comment"># å®ç°ä½é€Ÿæ”»å‡»æ£€æµ‹é€»è¾‘</span>
        <span class="hljs-keyword">pass</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_living_off_the_land</span>(<span class="hljs-params">self, behavior, baseline</span>):
        <span class="hljs-string">"""æ£€æµ‹Living-off-the-landæ”»å‡»"""</span>
        <span class="hljs-comment"># å®ç°åˆæ³•å·¥å…·æ»¥ç”¨æ”»å‡»æ£€æµ‹é€»è¾‘</span>
        <span class="hljs-keyword">pass</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">start_monitoring</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å¯åŠ¨APTç›‘æ§"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-comment"># å®ç°APTç›‘æ§ä¸»å¾ªç¯</span>
            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">60</span>)

<span class="hljs-comment"># Nginxæ—¥å¿—å®æ—¶ç›‘æ§é›†æˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NginxAPTMonitor</span>:
    <span class="hljs-string">"""Nginx APTæ”»å‡»å®æ—¶ç›‘æ§ç³»ç»Ÿ"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, log_file_path=<span class="hljs-string">'/var/log/nginx/access.log'</span></span>):
        self.log_file_path = log_file_path
        self.apt_detector = APTDetectionSystem()
        self.redis_client = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">4</span>)
        self.alert_threshold = <span class="hljs-number">70</span>  <span class="hljs-comment"># é£é™©åˆ†æ•°é˜ˆå€¼</span>
        
        <span class="hljs-comment"># å¯åŠ¨å¼‚æ­¥ç›‘æ§ä»»åŠ¡</span>
        self.monitoring_tasks = [
            self.monitor_nginx_logs(),
            self.process_suspicious_activities(),
            self.generate_threat_reports()
        ]
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">monitor_nginx_logs</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ç›‘æ§Nginxè®¿é—®æ—¥å¿—"""</span>
        <span class="hljs-keyword">import</span> aiofiles
        <span class="hljs-keyword">import</span> re
        
        <span class="hljs-comment"># Nginxæ—¥å¿—æ ¼å¼è§£ææ­£åˆ™è¡¨è¾¾å¼</span>
        log_pattern = re.<span class="hljs-built_in">compile</span>(
            <span class="hljs-string">r'(\d+\.\d+\.\d+\.\d+)\s+-\s+-\s+\[(.+?)\]\s+"(\w+)\s+(.+?)\s+HTTP/[\d.]+"\s+(\d+)\s+(\d+)\s+"(.+?)"\s+"(.+?)"'</span>
        )
        
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiofiles.<span class="hljs-built_in">open</span>(self.log_file_path, mode=<span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> log_file:
            <span class="hljs-comment"># ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾ï¼ˆåªç›‘æ§æ–°æ—¥å¿—ï¼‰</span>
            <span class="hljs-keyword">await</span> log_file.seek(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)
            
            <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
                line = <span class="hljs-keyword">await</span> log_file.readline()
                <span class="hljs-keyword">if</span> line:
                    <span class="hljs-keyword">match</span> = log_pattern.<span class="hljs-keyword">match</span>(line.strip())
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">match</span>:
                        log_data = {
                            <span class="hljs-string">'remote_addr'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">1</span>),
                            <span class="hljs-string">'timestamp'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">2</span>),
                            <span class="hljs-string">'method'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">3</span>),
                            <span class="hljs-string">'request'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">4</span>),
                            <span class="hljs-string">'status'</span>: <span class="hljs-built_in">int</span>(<span class="hljs-keyword">match</span>.group(<span class="hljs-number">5</span>)),
                            <span class="hljs-string">'body_bytes_sent'</span>: <span class="hljs-built_in">int</span>(<span class="hljs-keyword">match</span>.group(<span class="hljs-number">6</span>)),
                            <span class="hljs-string">'http_referer'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">7</span>),
                            <span class="hljs-string">'http_user_agent'</span>: <span class="hljs-keyword">match</span>.group(<span class="hljs-number">8</span>)
                        }
                        
                        <span class="hljs-comment"># åˆ†æç”¨æˆ·è¡Œä¸º</span>
                        risk_analysis = <span class="hljs-keyword">await</span> self.analyze_user_session(log_data)
                        
                        <span class="hljs-keyword">if</span> risk_analysis[<span class="hljs-string">'risk_score'</span>] &gt; self.alert_threshold:
                            <span class="hljs-keyword">await</span> self.trigger_high_risk_alert(log_data, risk_analysis)
                
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.1</span>)  <span class="hljs-comment"># é¿å…CPUå ç”¨è¿‡é«˜</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_user_session</span>(<span class="hljs-params">self, log_data</span>):
        <span class="hljs-string">"""åˆ†æç”¨æˆ·ä¼šè¯é£é™©"""</span>
        user_id = log_data[<span class="hljs-string">'remote_addr'</span>]
        
        <span class="hljs-comment"># æ„å»ºç”¨æˆ·è¡Œä¸ºæ•°æ®</span>
        behavior_data = {
            <span class="hljs-string">'timestamp'</span>: datetime.now(),
            <span class="hljs-string">'method'</span>: log_data[<span class="hljs-string">'method'</span>],
            <span class="hljs-string">'path'</span>: log_data[<span class="hljs-string">'request'</span>].split(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>],
            <span class="hljs-string">'params'</span>: <span class="hljs-built_in">dict</span>(param.split(<span class="hljs-string">'='</span>) <span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> log_data[<span class="hljs-string">'request'</span>].split(<span class="hljs-string">'?'</span>)[<span class="hljs-number">1</span>].split(<span class="hljs-string">'&amp;'</span>)) <span class="hljs-keyword">if</span> <span class="hljs-string">'?'</span> <span class="hljs-keyword">in</span> log_data[<span class="hljs-string">'request'</span>] <span class="hljs-keyword">else</span> {},
            <span class="hljs-string">'status_code'</span>: log_data[<span class="hljs-string">'status'</span>],
            <span class="hljs-string">'user_agent'</span>: log_data[<span class="hljs-string">'http_user_agent'</span>],
            <span class="hljs-string">'resource'</span>: log_data[<span class="hljs-string">'request'</span>].split(<span class="hljs-string">'?'</span>)[<span class="hljs-number">0</span>],
            <span class="hljs-string">'geo_location'</span>: <span class="hljs-keyword">await</span> self.get_geo_location(log_data[<span class="hljs-string">'remote_addr'</span>])
        }
        
        <span class="hljs-comment"># ä½¿ç”¨APTæ£€æµ‹ç³»ç»Ÿåˆ†æ</span>
        risk_analysis = self.apt_detector.analyze_user_behavior(user_id, behavior_data)
        
        <span class="hljs-comment"># ç¼“å­˜åˆ†æç»“æœ</span>
        <span class="hljs-keyword">await</span> self.cache_risk_analysis(user_id, risk_analysis)
        
        <span class="hljs-keyword">return</span> risk_analysis
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_geo_location</span>(<span class="hljs-params">self, ip_address</span>):
        <span class="hljs-string">"""è·å–IPåœ°å€åœ°ç†ä½ç½®"""</span>
        <span class="hljs-comment"># å®ç°IPåœ°ç†ä½ç½®æŸ¥è¯¢ï¼ˆå¯ä½¿ç”¨MaxMind GeoIPç­‰åº“ï¼‰</span>
        <span class="hljs-comment"># è¿™é‡Œè¿”å›æ¨¡æ‹Ÿæ•°æ®</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"location_for_<span class="hljs-subst">{ip_address}</span>"</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">cache_risk_analysis</span>(<span class="hljs-params">self, user_id, risk_analysis</span>):
        <span class="hljs-string">"""ç¼“å­˜é£é™©åˆ†æç»“æœ"""</span>
        key = <span class="hljs-string">f"risk_analysis:<span class="hljs-subst">{user_id}</span>"</span>
        <span class="hljs-keyword">await</span> self.redis_client.setex(key, <span class="hljs-number">3600</span>, json.dumps(risk_analysis))  <span class="hljs-comment"># ç¼“å­˜1å°æ—¶</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">trigger_high_risk_alert</span>(<span class="hljs-params">self, log_data, risk_analysis</span>):
        <span class="hljs-string">"""è§¦å‘é«˜é£é™©è­¦æŠ¥"""</span>
        alert_data = {
            <span class="hljs-string">'timestamp'</span>: datetime.now().isoformat(),
            <span class="hljs-string">'user_ip'</span>: log_data[<span class="hljs-string">'remote_addr'</span>],
            <span class="hljs-string">'risk_score'</span>: risk_analysis[<span class="hljs-string">'risk_score'</span>],
            <span class="hljs-string">'anomalies'</span>: risk_analysis[<span class="hljs-string">'anomalies'</span>],
            <span class="hljs-string">'request_details'</span>: log_data,
            <span class="hljs-string">'alert_level'</span>: <span class="hljs-string">'HIGH'</span> <span class="hljs-keyword">if</span> risk_analysis[<span class="hljs-string">'risk_score'</span>] &gt; <span class="hljs-number">80</span> <span class="hljs-keyword">else</span> <span class="hljs-string">'MEDIUM'</span>
        }
        
        <span class="hljs-comment"># å‘é€åˆ°è­¦æŠ¥é˜Ÿåˆ—</span>
        <span class="hljs-keyword">await</span> self.redis_client.lpush(<span class="hljs-string">'security_alerts:high_risk'</span>, json.dumps(alert_data))
        
        <span class="hljs-comment"># è®°å½•æ—¥å¿—</span>
        logging.warning(<span class="hljs-string">f"HIGH RISK ALERT: User <span class="hljs-subst">{log_data[<span class="hljs-string">'remote_addr'</span>]}</span> risk score <span class="hljs-subst">{risk_analysis[<span class="hljs-string">'risk_score'</span>]}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_suspicious_activities</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å¤„ç†å¯ç–‘æ´»åŠ¨"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># ä»é˜Ÿåˆ—è·å–é«˜é£é™©è­¦æŠ¥</span>
                alert_data = <span class="hljs-keyword">await</span> self.redis_client.brpop(<span class="hljs-string">'security_alerts:high_risk'</span>, timeout=<span class="hljs-number">1</span>)
                <span class="hljs-keyword">if</span> alert_data:
                    alert = json.loads(alert_data[<span class="hljs-number">1</span>])
                    
                    <span class="hljs-comment"># è‡ªåŠ¨é˜»æ–­é«˜é£é™©ç”¨æˆ·</span>
                    <span class="hljs-keyword">if</span> alert[<span class="hljs-string">'risk_score'</span>] &gt; <span class="hljs-number">80</span>:
                        <span class="hljs-keyword">await</span> self.auto_block_user(alert[<span class="hljs-string">'user_ip'</span>], alert[<span class="hljs-string">'risk_score'</span>])
                    
                    <span class="hljs-comment"># å‘é€é€šçŸ¥ï¼ˆé‚®ä»¶ã€Slackç­‰ï¼‰</span>
                    <span class="hljs-keyword">await</span> self.send_security_notification(alert)
                    
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"Error processing suspicious activities: <span class="hljs-subst">{e}</span>"</span>)
            
            <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">auto_block_user</span>(<span class="hljs-params">self, user_ip, risk_score</span>):
        <span class="hljs-string">"""è‡ªåŠ¨é˜»æ–­ç”¨æˆ·"""</span>
        <span class="hljs-comment"># ä½¿ç”¨Nginxçš„denyæŒ‡ä»¤é˜»æ–­IP</span>
        block_command = <span class="hljs-string">f"echo 'deny <span class="hljs-subst">{user_ip}</span>;' &gt;&gt; /etc/nginx/conf.d/auto_blocks.conf &amp;&amp; nginx -s reload"</span>
        
        <span class="hljs-comment"># è®°å½•é˜»æ–­æ“ä½œ</span>
        block_record = {
            <span class="hljs-string">'user_ip'</span>: user_ip,
            <span class="hljs-string">'risk_score'</span>: risk_score,
            <span class="hljs-string">'blocked_at'</span>: datetime.now().isoformat(),
            <span class="hljs-string">'auto_unblock_at'</span>: (datetime.now() + timedelta(hours=<span class="hljs-number">24</span>)).isoformat()  <span class="hljs-comment"># 24å°æ—¶åè‡ªåŠ¨è§£å°</span>
        }
        
        <span class="hljs-keyword">await</span> self.redis_client.setex(<span class="hljs-string">f"blocked_user:<span class="hljs-subst">{user_ip}</span>"</span>, <span class="hljs-number">86400</span>, json.dumps(block_record))
        logging.info(<span class="hljs-string">f"Auto-blocked user <span class="hljs-subst">{user_ip}</span> with risk score <span class="hljs-subst">{risk_score}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">send_security_notification</span>(<span class="hljs-params">self, alert</span>):
        <span class="hljs-string">"""å‘é€å®‰å…¨é€šçŸ¥"""</span>
        <span class="hljs-comment"># å®ç°é€šçŸ¥å‘é€é€»è¾‘ï¼ˆé‚®ä»¶ã€Slackã€ä¼ä¸šå¾®ä¿¡ç­‰ï¼‰</span>
        notification = {
            <span class="hljs-string">'type'</span>: <span class="hljs-string">'security_alert'</span>,
            <span class="hljs-string">'title'</span>: <span class="hljs-string">f"APT Attack Detected - Risk Score: <span class="hljs-subst">{alert[<span class="hljs-string">'risk_score'</span>]}</span>"</span>,
            <span class="hljs-string">'content'</span>: <span class="hljs-string">f"Suspicious activity detected from IP <span class="hljs-subst">{alert[<span class="hljs-string">'user_ip'</span>]}</span>. Anomalies: <span class="hljs-subst">{alert[<span class="hljs-string">'anomalies'</span>]}</span>"</span>,
            <span class="hljs-string">'timestamp'</span>: alert[<span class="hljs-string">'timestamp'</span>]
        }
        
        <span class="hljs-comment"># è¿™é‡Œå¯ä»¥é›†æˆå„ç§é€šçŸ¥æœåŠ¡</span>
        logging.info(<span class="hljs-string">f"Security notification sent: <span class="hljs-subst">{notification}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_threat_reports</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""ç”Ÿæˆå¨èƒæŠ¥å‘Š"""</span>
        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
            <span class="hljs-keyword">try</span>:
                <span class="hljs-comment"># æ¯å°æ—¶ç”Ÿæˆä¸€æ¬¡å¨èƒæŠ¥å‘Š</span>
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">3600</span>)
                
                <span class="hljs-comment"># æ”¶é›†è¿‡å»ä¸€å°æ—¶çš„å¨èƒæ•°æ®</span>
                threat_summary = <span class="hljs-keyword">await</span> self.collect_threat_summary()
                
                <span class="hljs-comment"># ç”ŸæˆæŠ¥å‘Š</span>
                report = {
                    <span class="hljs-string">'period'</span>: <span class="hljs-string">f"<span class="hljs-subst">{datetime.now() - timedelta(hours=<span class="hljs-number">1</span>)}</span> - <span class="hljs-subst">{datetime.now()}</span>"</span>,
                    <span class="hljs-string">'total_alerts'</span>: threat_summary[<span class="hljs-string">'total_alerts'</span>],
                    <span class="hljs-string">'high_risk_users'</span>: threat_summary[<span class="hljs-string">'high_risk_users'</span>],
                    <span class="hljs-string">'blocked_ips'</span>: threat_summary[<span class="hljs-string">'blocked_ips'</span>],
                    <span class="hljs-string">'top_threat_types'</span>: threat_summary[<span class="hljs-string">'top_threat_types'</span>],
                    <span class="hljs-string">'recommendations'</span>: self.generate_security_recommendations(threat_summary)
                }
                
                <span class="hljs-comment"># ä¿å­˜æŠ¥å‘Š</span>
                report_key = <span class="hljs-string">f"threat_report:<span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Y%m%d_%H'</span>)}</span>"</span>
                <span class="hljs-keyword">await</span> self.redis_client.setex(report_key, <span class="hljs-number">86400</span> * <span class="hljs-number">7</span>, json.dumps(report))  <span class="hljs-comment"># ä¿å­˜7å¤©</span>
                
                logging.info(<span class="hljs-string">f"Threat report generated: <span class="hljs-subst">{report_key}</span>"</span>)
                
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                logging.error(<span class="hljs-string">f"Error generating threat reports: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">collect_threat_summary</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ”¶é›†å¨èƒæ‘˜è¦"""</span>
        <span class="hljs-comment"># å®ç°å¨èƒæ•°æ®æ”¶é›†é€»è¾‘</span>
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">'total_alerts'</span>: <span class="hljs-number">42</span>,
            <span class="hljs-string">'high_risk_users'</span>: [<span class="hljs-string">'192.168.1.100'</span>, <span class="hljs-string">'10.0.0.50'</span>],
            <span class="hljs-string">'blocked_ips'</span>: [<span class="hljs-string">'192.168.1.100'</span>],
            <span class="hljs-string">'top_threat_types'</span>: [<span class="hljs-string">'unusual_request_pattern'</span>, <span class="hljs-string">'unusual_geolocation'</span>]
        }
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_security_recommendations</span>(<span class="hljs-params">self, threat_summary</span>):
        <span class="hljs-string">"""ç”Ÿæˆå®‰å…¨å»ºè®®"""</span>
        recommendations = []
        
        <span class="hljs-keyword">if</span> threat_summary[<span class="hljs-string">'total_alerts'</span>] &gt; <span class="hljs-number">50</span>:
            recommendations.append(<span class="hljs-string">"Consider implementing stricter access controls"</span>)
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(threat_summary[<span class="hljs-string">'blocked_ips'</span>]) &gt; <span class="hljs-number">5</span>:
            recommendations.append(<span class="hljs-string">"Review and potentially expand IP blocking policies"</span>)
        
        recommendations.append(<span class="hljs-string">"Regular security awareness training for development teams"</span>)
        recommendations.append(<span class="hljs-string">"Consider implementing additional MFA for administrative access"</span>)
        
        <span class="hljs-keyword">return</span> recommendations
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">start_all_monitoring</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""å¯åŠ¨æ‰€æœ‰ç›‘æ§ä»»åŠ¡"""</span>
        logging.info(<span class="hljs-string">"Starting Nginx APT monitoring system..."</span>)
        
        <span class="hljs-comment"># å¹¶å‘è¿è¡Œæ‰€æœ‰ç›‘æ§ä»»åŠ¡</span>
        <span class="hljs-keyword">await</span> asyncio.gather(*self.monitoring_tasks)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹å’Œéƒ¨ç½²é…ç½®</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># åˆ›å»ºç›‘æ§å®ä¾‹</span>
    monitor = NginxAPTMonitor(<span class="hljs-string">'/var/log/nginx/access.log'</span>)
    
    <span class="hljs-comment"># å¯åŠ¨ç›‘æ§</span>
    asyncio.run(monitor.start_all_monitoring())
</code></pre>
<hr/>
<h3 data-id="heading-48">ğŸ¯ æ€»ç»“ï¼šæ„å»ºä¼ä¸šçº§å®‰å…¨é˜²çº¿çš„å®Œæ•´è·¯å¾„</h3>
<p>é€šè¿‡æœ¬æ–‡çš„æ·±å…¥æ¢è®¨ï¼Œæˆ‘ä»¬å·²ç»ä»åŸºç¡€çš„Nginxå®‰å…¨åŠ å›ºï¼Œé€æ­¥æ„å»ºäº†ä¸€ä¸ªæ¶µç›–<strong>äº‘åŸç”Ÿæ¶æ„</strong>ã€<strong>AIæ™ºèƒ½é˜²æŠ¤</strong>ã€<strong>ä¼ä¸šé›†æˆ</strong>å’Œ<strong>é«˜çº§å¨èƒæ£€æµ‹</strong>çš„å®Œæ•´å®‰å…¨ä½“ç³»ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™ä¸ªæ¸è¿›å¼çš„å®‰å…¨å»ºè®¾è·¯å¾„ï¼š</p>
<h4 data-id="heading-49">ğŸ›¡ï¸ åŸºç¡€å®‰å…¨ï¼ˆ90%æ¼æ´é˜²æŠ¤ï¼‰</h4>
<ul>
<li><strong>Hostå¤´æ”»å‡»é˜²æŠ¤</strong>ï¼šé€šè¿‡ä¸¥æ ¼çš„ä¸»æœºåéªŒè¯å’Œé»˜è®¤æœåŠ¡å™¨é…ç½®</li>
<li><strong>æ•æ„Ÿæ–‡ä»¶ä¿æŠ¤</strong>ï¼šä½¿ç”¨locationåŒ¹é…å’Œè®¿é—®æ§åˆ¶åˆ—è¡¨</li>
<li><strong>ç›®å½•éå†é˜²æŠ¤</strong>ï¼šURLè§„èŒƒåŒ–å¤„ç†å’Œè·¯å¾„éªŒè¯</li>
<li><strong>ç‰ˆæœ¬ä¿¡æ¯éšè—</strong>ï¼šserver_tokens offé…ç½®</li>
<li><strong>é”™è¯¯é¡µé¢å®šåˆ¶</strong>ï¼šé˜²æ­¢ä¿¡æ¯æ³„éœ²çš„ç»Ÿä¸€é”™è¯¯å¤„ç†</li>
</ul>
<h4 data-id="heading-50">â˜ï¸ äº‘åŸç”Ÿå®‰å…¨æ¶æ„</h4>
<ul>
<li><strong>Kubernetes Ingresså®‰å…¨</strong>ï¼šNetworkPolicyå’ŒRBACçš„ç²¾ç»†åŒ–æ§åˆ¶</li>
<li><strong>å®¹å™¨åŒ–æœ€ä½³å®è·µ</strong>ï¼šæœ€å°æƒé™é•œåƒå’Œå®‰å…¨ä¸Šä¸‹æ–‡</li>
<li><strong>Service Meshé›†æˆ</strong>ï¼šIstioçš„mTLSå’Œæµé‡ç­–ç•¥</li>
<li><strong>å¤šé›†ç¾¤å®‰å…¨ç­–ç•¥</strong>ï¼šç»Ÿä¸€çš„å®‰å…¨æ²»ç†å’Œåˆè§„æ£€æŸ¥</li>
</ul>
<h4 data-id="heading-51">ğŸ¤– AIé©±åŠ¨çš„æ™ºèƒ½é˜²æŠ¤</h4>
<ul>
<li><strong>æœºå™¨å­¦ä¹ å¼‚å¸¸æ£€æµ‹</strong>ï¼šå®æ—¶æµé‡åˆ†æå’Œè¡Œä¸ºåŸºçº¿å»ºç«‹</li>
<li><strong>å¨èƒæƒ…æŠ¥é›†æˆ</strong>ï¼šå¤šæºå¨èƒæ•°æ®çš„å®æ—¶å…³è”åˆ†æ</li>
<li><strong>è‡ªåŠ¨åŒ–å“åº”æœºåˆ¶</strong>ï¼šåŸºäºé£é™©è¯„åˆ†çš„æ™ºèƒ½é˜»æ–­å’Œå‘Šè­¦</li>
<li><strong>é¢„æµ‹æ€§å®‰å…¨é˜²æŠ¤</strong>ï¼šé›¶æ—¥æ¼æ´çš„æå‰é¢„è­¦å’Œé˜²æŠ¤</li>
</ul>
<h4 data-id="heading-52">ğŸ¢ ä¼ä¸šçº§é›†æˆæ–¹æ¡ˆ</h4>
<ul>
<li><strong>DevSecOpsæµæ°´çº¿</strong>ï¼šå®‰å…¨æµ‹è¯•çš„å·¦ç§»å’Œè‡ªåŠ¨åŒ–</li>
<li><strong>SIEM/SOARé›†æˆ</strong>ï¼šå®‰å…¨äº‹ä»¶çš„ç»Ÿä¸€ç®¡ç†å’Œå“åº”</li>
<li><strong>åˆè§„æ€§è‡ªåŠ¨åŒ–</strong>ï¼šGDPRã€ç­‰ä¿ç­‰æ ‡å‡†çš„è‡ªåŠ¨åˆè§„æ£€æŸ¥</li>
<li><strong>å¤šäº‘å®‰å…¨ç­–ç•¥</strong>ï¼šè·¨äº‘å¹³å°çš„ç»Ÿä¸€å®‰å…¨ç®¡ç†</li>
</ul>
<h4 data-id="heading-53">ğŸ¯ é«˜çº§å¨èƒé˜²æŠ¤ï¼ˆAPTæ£€æµ‹ï¼‰</h4>
<ul>
<li><strong>è¡Œä¸ºåˆ†æå¼•æ“</strong>ï¼šç”¨æˆ·è¡Œä¸ºåŸºçº¿å’Œå¼‚å¸¸æ£€æµ‹</li>
<li><strong>å¨èƒç‹©çŒç³»ç»Ÿ</strong>ï¼šä¸»åŠ¨å¨èƒå‘ç°å’Œæƒ…æŠ¥æ”¶é›†</li>
<li><strong>é›¶æ—¥æ¼æ´å“åº”</strong>ï¼šå¿«é€Ÿæ¼æ´è¯„ä¼°å’Œä¸´æ—¶é˜²æŠ¤</li>
<li><strong>APTæ”»å‡»é“¾æ£€æµ‹</strong>ï¼šå¤šé˜¶æ®µæ”»å‡»çš„å®Œæ•´é“¾è·¯åˆ†æ</li>
</ul>
<h4 data-id="heading-54">ğŸ“Š å®æ–½å»ºè®®ä¸æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-55">1. æ¸è¿›å¼éƒ¨ç½²ç­–ç•¥</h5>
<pre><code class="hljs">é˜¶æ®µ1ï¼šåŸºç¡€å®‰å…¨åŠ å›ºï¼ˆ1-2å‘¨ï¼‰
â”œâ”€â”€ Nginxé…ç½®ä¼˜åŒ–
â”œâ”€â”€ è®¿é—®æ§åˆ¶å®æ–½
â””â”€â”€ æ—¥å¿—ç›‘æ§å»ºç«‹

é˜¶æ®µ2ï¼šé«˜çº§é˜²æŠ¤é›†æˆï¼ˆ2-4å‘¨ï¼‰
â”œâ”€â”€ WAFè§„åˆ™éƒ¨ç½²
â”œâ”€â”€ é€Ÿç‡é™åˆ¶ä¼˜åŒ–
â””â”€â”€ SSL/TLSå¼ºåŒ–

é˜¶æ®µ3ï¼šæ™ºèƒ½åŒ–å‡çº§ï¼ˆ4-8å‘¨ï¼‰
â”œâ”€â”€ AIå¼‚å¸¸æ£€æµ‹
â”œâ”€â”€ å¨èƒæƒ…æŠ¥é›†æˆ
â””â”€â”€ è‡ªåŠ¨åŒ–å“åº”

é˜¶æ®µ4ï¼šä¼ä¸šçº§æ•´åˆï¼ˆ8-12å‘¨ï¼‰
â”œâ”€â”€ DevSecOpsé›†æˆ
â”œâ”€â”€ SIEM/SOARè¿æ¥
â””â”€â”€ åˆè§„æ€§è‡ªåŠ¨åŒ–

</code></pre>
<h5 data-id="heading-56">2. å…³é”®æ€§èƒ½æŒ‡æ ‡ï¼ˆKPIï¼‰</h5>
<ul>
<li><strong>å®‰å…¨äº‹ä»¶å“åº”æ—¶é—´</strong>ï¼šä»æ£€æµ‹åˆ°é˜»æ–­ &lt; 5åˆ†é’Ÿ</li>
<li><strong>è¯¯æŠ¥ç‡</strong>ï¼šAIæ£€æµ‹è¯¯æŠ¥ &lt; 5%</li>
<li><strong>ç³»ç»Ÿå¯ç”¨æ€§</strong>ï¼šå®‰å…¨æœåŠ¡å¯ç”¨æ€§ &gt; 99.9%</li>
<li><strong>åˆè§„è¦†ç›–ç‡</strong>ï¼šè‡ªåŠ¨åŒ–åˆè§„æ£€æŸ¥ &gt; 95%</li>
</ul>
<h5 data-id="heading-57">3. è¿ç»´ç›‘æ§è¦ç‚¹</h5>
<ul>
<li><strong>å®æ—¶ç›‘æ§</strong>ï¼š24/7å®‰å…¨è¿è¥ä¸­å¿ƒ</li>
<li><strong>å®šæœŸè¯„ä¼°</strong>ï¼šæœˆåº¦å®‰å…¨æ€åŠ¿åˆ†æ</li>
<li><strong>å¨èƒç‹©çŒ</strong>ï¼šå­£åº¦ä¸»åŠ¨å¨èƒæœç´¢</li>
<li><strong>åº”æ€¥æ¼”ç»ƒ</strong>ï¼šåŠå¹´åº¦å®‰å…¨äº‹ä»¶æ¼”ç»ƒ</li>
</ul>
<h4 data-id="heading-58">ğŸ”® æœªæ¥å‘å±•è¶‹åŠ¿</h4>
<p>éšç€æŠ€æœ¯çš„ä¸æ–­æ¼”è¿›ï¼ŒNginxå®‰å…¨ç½‘å…³ä¹Ÿå°†é¢ä¸´æ–°çš„æŒ‘æˆ˜å’Œæœºé‡ï¼š</p>
<h5 data-id="heading-59">1. é›¶ä¿¡ä»»æ¶æ„é›†æˆ</h5>
<ul>
<li><strong>å¾®åˆ†æ®µæŠ€æœ¯</strong>ï¼šæ›´ç»†ç²’åº¦çš„ç½‘ç»œåˆ†æ®µ</li>
<li><strong>èº«ä»½æ„ŸçŸ¥ä»£ç†</strong>ï¼šåŸºäºèº«ä»½çš„åŠ¨æ€è®¿é—®æ§åˆ¶</li>
<li><strong>æŒç»­ä¿¡ä»»è¯„ä¼°</strong>ï¼šå®æ—¶çš„ä¿¡ä»»åº¦è®¡ç®—å’Œå†³ç­–</li>
</ul>
<h5 data-id="heading-60">2. é‡å­å®‰å…¨å‡†å¤‡</h5>
<ul>
<li><strong>åé‡å­å¯†ç å­¦</strong>ï¼šæŠ—é‡å­è®¡ç®—æ”»å‡»çš„åŠ å¯†ç®—æ³•</li>
<li><strong>é‡å­å¯†é’¥åˆ†å‘</strong>ï¼šé‡å­é€šä¿¡æŠ€æœ¯çš„å®‰å…¨åº”ç”¨</li>
<li><strong>æ··åˆåŠ å¯†æ–¹æ¡ˆ</strong>ï¼šä¼ ç»Ÿä¸é‡å­å®‰å…¨çš„å¹³æ»‘è¿‡æ¸¡</li>
</ul>
<h5 data-id="heading-61">3. è¾¹ç¼˜è®¡ç®—å®‰å…¨</h5>
<ul>
<li><strong>è¾¹ç¼˜èŠ‚ç‚¹é˜²æŠ¤</strong>ï¼šåˆ†å¸ƒå¼è¾¹ç¼˜ç¯å¢ƒçš„å®‰å…¨ç®¡ç†</li>
<li><strong>5Gç½‘ç»œå®‰å…¨</strong>ï¼šæ–°ä¸€ä»£ç½‘ç»œçš„å®‰å…¨æŒ‘æˆ˜</li>
<li><strong>IoTè®¾å¤‡é›†æˆ</strong>ï¼šæµ·é‡ç‰©è”ç½‘è®¾å¤‡çš„å®‰å…¨æ¥å…¥</li>
</ul>
<h4 data-id="heading-62">ğŸ’¡ æœ€åçš„å»ºè®®</h4>
<p>æ„å»ºä¼ä¸šçº§å®‰å…¨é˜²çº¿æ˜¯ä¸€ä¸ª<strong>æŒç»­æ¼”è¿›</strong>çš„è¿‡ç¨‹ï¼Œè€Œéä¸€æ¬¡æ€§é¡¹ç›®ã€‚å»ºè®®é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š</p>
<ol>
<li><strong>å®‰å…¨ä¼˜å…ˆ</strong>ï¼šåœ¨ç³»ç»Ÿè®¾è®¡çš„æ¯ä¸ªé˜¶æ®µéƒ½å°†å®‰å…¨ä½œä¸ºé¦–è¦è€ƒè™‘</li>
<li><strong>åˆ†å±‚é˜²æŠ¤</strong>ï¼šå®æ–½å¤šå±‚é˜²å¾¡ç­–ç•¥ï¼Œé¿å…å•ç‚¹å¤±æ•ˆ</li>
<li><strong>è‡ªåŠ¨åŒ–ä¼˜å…ˆ</strong>ï¼šå°½å¯èƒ½è‡ªåŠ¨åŒ–å®‰å…¨æµç¨‹ï¼Œå‡å°‘äººä¸ºé”™è¯¯</li>
<li><strong>æŒç»­å­¦ä¹ </strong>ï¼šä¿æŒå¯¹æ–°å¨èƒå’Œå®‰å…¨æŠ€æœ¯çš„æŒç»­å­¦ä¹ </li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šå»ºç«‹è·¨éƒ¨é—¨çš„å®‰å…¨åä½œæœºåˆ¶</li>
</ol>
<p>è®°ä½ï¼Œ<strong>æœ€å¥½çš„å®‰å…¨ä¸æ˜¯æœ€å¼ºçš„é˜²æŠ¤ï¼Œè€Œæ˜¯æœ€é€‚åˆçš„å¹³è¡¡</strong>ã€‚åœ¨è¿½æ±‚æè‡´å®‰å…¨çš„åŒæ—¶ï¼Œä¹Ÿè¦è€ƒè™‘ç³»ç»Ÿçš„å¯ç”¨æ€§ã€æ€§èƒ½å’Œæˆæœ¬æ•ˆç›Šã€‚é€šè¿‡æœ¬æ–‡æä¾›çš„è¿™å¥—å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªèº«éœ€æ±‚å’Œç¯å¢ƒç‰¹ç‚¹ï¼Œé€‰æ‹©æœ€é€‚åˆçš„å®‰å…¨å»ºè®¾è·¯å¾„ï¼Œé€æ­¥æ„å»ºèµ·åšä¸å¯æ‘§çš„ä¼ä¸šçº§å®‰å…¨é˜²çº¿ã€‚</p>
<p>å®‰å…¨ä¹‹è·¯ï¼Œæ°¸æ— æ­¢å¢ƒã€‚è®©æˆ‘ä»¬æºæ‰‹å…±å»ºæ›´å®‰å…¨çš„æ•°å­—ä¸–ç•Œï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaä¼°è®¡Agenté¢†åŸŸæ–°æ€å‡ºä¸€åŒ¹é»‘é©¬ï¼ˆagentscope-javaï¼‰]]></title>    <link>https://juejin.cn/post/7582809606066978842</link>    <guid>https://juejin.cn/post/7582809606066978842</guid>    <pubDate>2025-12-12T12:23:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606066978842" data-draft-id="7582815307438882867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaä¼°è®¡Agenté¢†åŸŸæ–°æ€å‡ºä¸€åŒ¹é»‘é©¬ï¼ˆagentscope-javaï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T12:23:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªæ¥å½±å­"/> <meta itemprop="url" content="https://juejin.cn/user/3716786555465943"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaä¼°è®¡Agenté¢†åŸŸæ–°æ€å‡ºä¸€åŒ¹é»‘é©¬ï¼ˆagentscope-javaï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3716786555465943/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªæ¥å½±å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T12:23:31.000Z" title="Fri Dec 12 2025 12:23:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AgentScope - Java ä»‹ç»</h2>
<p>è°ˆåˆ° AgentScope-Javaï¼Œå¾—å…ˆèŠä¸‹é˜¿é‡Œåœ¨ä¸€å¹´å‰å¼€æºçš„ Python ç‰ˆçš„ Agent æ¡†æ¶ AgentScopeï¼Œè¿™æ˜¯ä¸€æ¬¾ä¸»æ‰“é¢å‘ç ”ç©¶äººå‘˜å’Œ Python å¼€å‘è€…çš„å¤šæ™ºèƒ½ä½“å¼€å‘æ¡†æ¶ï¼Œå’Œç™¾ç‚¼æ·±åº¦èåˆï¼Œå­µåŒ–äºå¤§åé¼é¼çš„é˜¿é‡Œé€šä¹‰å®éªŒå®¤ï¼Œç›®å‰å·²åœ¨ Github ä¸­æ–©è· 14.4kstarï¼Œç›®å‰è¯¥é¡¹ç›®è¿˜åœ¨ç¨³å®šè¿­ä»£ä¸­ï¼Œé’‰é’‰ç¤¾åŒºç¾¤äººæ•° 2000+</p>
<p>github åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope" target="_blank" title="https://github.com/agentscope-ai/agentscope" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cf9834034f44cffaabc78f01c6da514~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=D50uTrw3z2%2B9Ctv%2F68EEXQ9Q8F0%3D" alt="" loading="lazy"/></p>
<p>éšç€ AI Agent çš„æ¼”è¿›å‘å±•ï¼Œå‘ç°å¾ˆå¤šåŸæœ‰çš„ Agent æ¡†æ¶ä¸Šå±‚å°è£…çš„è¶Šæ¥è¶Šå®Œå–„ï¼Œç”¨æˆ·åªéœ€è¦ç®€å•çš„é…ç½®å³å¯åˆ›å»ºä¸“ä¸š Agent å»æ‰§è¡Œç‰¹å®šä»»åŠ¡ã€‚2025 å¹´ 11 æœˆåº•ï¼ŒAgentScope Java æ­£å¼æ¨å‡ºå‘å¸ƒ 1.0 ç‰ˆæœ¬</p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjava.agentscope.io%2Fzh%2Ftask%2Fagent-config.html" target="_blank" title="https://java.agentscope.io/zh/task/agent-config.html" ref="nofollow noopener noreferrer">java.agentscope.io/zh/task/ageâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ff89eb97194411d9b5f37439880459b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=hgjADw7n0jSw5MvRKKCiW4jpCWE%3D" alt="" loading="lazy"/></p>
<p>github ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-java" target="_blank" title="https://github.com/agentscope-ai/agentscope-java" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16a01316a2914b1aa7559719f2a83357~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=2yDCVfRy9mh0WzJQNhb%2BsZYas%2BQ%3D" alt="" loading="lazy"/></p>
<p>AgentScope Java å»ºè®¾åˆæœŸï¼Œå‰æœŸå¯¹æ ‡è¿½èµ¶ AgentScope èƒ½åŠ›ï¼Œæ®ç¤¾åŒºäº¤æµæ—¶å®˜æ–¹ AgentScope è´Ÿè´£äººé€éœ²ï¼ŒæŠ•å…¥äº†å¾ˆå¤š P7ã€P8 äººåŠ›å‚ä¸å»ºè®¾ï¼Œä¹Ÿæ¬¢è¿ç¤¾åŒºæ›´å¤šäººå‚ä¸è¿›æ¥å»ºè®¾è¿™å—èƒ½åŠ›ï¼ŒåæœŸéšç€æŠ€æœ¯å‘å±•æ¼”è¿›ä¼šæ›´å¤šå¼•å…¥ Java ç”Ÿæ€çš„å¾®æœåŠ¡ä½“ç³»ã€‚è¿™é‡Œé™„ä¸€å¼ å½“å‰çš„ AgentScope æŠ€æœ¯æ¶æ„å›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e9ca9414c4045b88617681e4f84f644~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=OaxwLzG0B6tyx33783tue0WRRKE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">AgentScope - Java å’Œ Spring AI Alibaba çš„åŒºåˆ«</h2>
<ol>
<li>AgentScope-Java å’Œ Spring AI Alibaba å±äºåŒä¸€å›¢é˜Ÿä¸åŒå°ç»„ç»´æŠ¤</li>
<li>Spring AI Alibaba è·Ÿéšé€‚é… Spring ä½“ç³»ï¼Œé›†æˆ Nacosã€Higress ç­‰å¼€æºç»„ä»¶ï¼Œæ“…é•¿å• Agent çš„å¤æ‚ä»»åŠ¡å·¥ä½œæµç¼–æ’ï¼Œåˆ©ç”¨ Graph æ­å»º Workflow</li>
<li>AgentScope-Java å®Œå…¨é˜¿é‡Œäº‘è‡ªç ”ï¼Œä¾§é‡ Agentic ç†å¿µï¼Œå¼ºè°ƒæ™ºèƒ½ä½“é—´çš„é€šä¿¡ã€è§’è‰²åˆ†å·¥ã€çŠ¶æ€åŒæ­¥</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c572116ea9a7455b9c7137b8c01185b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=Bzhz5Cy55LlZNsqxcPpt4cnT2bE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16bc0f385d7c49a9a489622d0a1501dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=pt8XOW8azsoInlnu%2BJ3Mld9TtSA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">AgentScope - Java æœªæ¥çš„å¼€æºè·¯çº¿</h2>
<p>9 æœˆå¼€æºï¼Œå½“å‰ v0.2 ç‰ˆæœ¬å·²å…·å¤‡ ReActAgent æ ¸å¿ƒèƒ½åŠ›ï¼Œè®¡åˆ’äº 12 æœˆåˆå‘å¸ƒ v1.0 ç‰ˆæœ¬ï¼Œæ–°å¢ RAGã€Planã€Tracingã€Evaluation åŠ Studio ç­‰å…¨å¥—åŠŸèƒ½ï¼Œè¾¾åˆ°ç”Ÿäº§å¯ç”¨ï¼›Runtime v1.0 ä¹Ÿå°†åŒæ­¥ä¸Šçº¿ï¼Œæä¾›æ¶µç›–å®‰å…¨æ²™ç®±ã€A2A Agent åœ¨å†…çš„ä¼ä¸šçº§è½åœ°æ–¹æ¡ˆã€‚12 æœˆä¸­ä¸‹æ—¬ï¼Œæ¨å‡ºåŸºäº ReMe çš„ä¸Šä¸‹æ–‡ç®¡ç†ä¸åŸºäº Trinity-RFT çš„å¼ºåŒ–å­¦ä¹ æœ€ä½³å®è·µã€‚åœ¨æ¶æ„ä¸Šå…¨åŠ›æ¨è¿› Serverless åŒ–ï¼Œé€šè¿‡å®ç°æ¯«ç§’çº§å†·å¯åŠ¨ä¸æ··åˆéƒ¨ç½²ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨åº”å¯¹é«˜å¹¶å‘çš„åŒæ—¶ï¼Œæ˜¾è‘—é™ä½éƒ¨ç½²æˆæœ¬å¹¶æå‡æ•ˆç‡</p>
<h2 data-id="heading-3">AgentScope - Java å¿«é€Ÿä¸Šæ‰‹ç¤ºä¾‹</h2>
<p>pom æ–‡ä»¶å¯¼å…¥</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">revision</span>&gt;</span>1.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">revision</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.agentscope<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>agentscope-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${revision}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>æœ€ç®€å•çš„ Agent æ„å»ºç¤ºä¾‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent._builder_()
        .name(<span class="hljs-string">"Assistant"</span>)
        .sysPrompt(<span class="hljs-string">"You are a helpful AI assistant."</span>)
        .model(DashScopeChatModel._builder_()
                .apiKey(System._getenv_(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
                .modelName(<span class="hljs-string">"qwen-max"</span>)
                .build())
        .build();

<span class="hljs-type">String</span> <span class="hljs-variable">textContext</span> <span class="hljs-operator">=</span> <span class="hljs-string">"æˆ‘çš„å¤–å·æ˜¯å½±å­ï¼Œè¯·è®°ä½è¿™ä¸ªä¿¡æ¯ï¼Œå¹¶åœ¨åç»­çš„å¯¹è¯ä¸­ä½¿ç”¨å®ƒæ¥ç§°å‘¼æˆ‘ã€‚"</span>;
<span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(Msg._builder_()
                .textContent(textContext)
                .build()).block();
<span class="hljs-keyword">assert</span> response != <span class="hljs-literal">null</span>;
System._out_.println(response.getTextContent());
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02842c6c039a484895bb4b0b2c9ea262~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=vpQXrcoZ1QSnEh2Q4FBqsUHvE1g%3D" alt="" loading="lazy"/></p>
<p>æ›´å¤šæœ€ä½³å®è·µç¤ºå¯ä¸‹è½½æºç æŸ¥çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-java%2Ftree%2Fmain%2Fagentscope-examples" target="_blank" title="https://github.com/agentscope-ai/agentscope-java/tree/main/agentscope-examples" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a88f2e0bd1994274b1de794897ede8b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyq5p2l5b2x5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147011&amp;x-signature=xQ7j6oh0H7YYHTysEY4rZju1QL0%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Springboot3.0å¹¶ä¸èƒ½æ‹¯æ•‘ä½ çš„å±å±±]]></title>    <link>https://juejin.cn/post/7582637280218775606</link>    <guid>https://juejin.cn/post/7582637280218775606</guid>    <pubDate>2025-12-12T12:28:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582637280218775606" data-draft-id="7582787460418551850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Springboot3.0å¹¶ä¸èƒ½æ‹¯æ•‘ä½ çš„å±å±±"/> <meta itemprop="keywords" content="åç«¯,Java,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-12T12:28:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©™åºå‘˜å°ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/1546375522426169"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Springboot3.0å¹¶ä¸èƒ½æ‹¯æ•‘ä½ çš„å±å±±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1546375522426169/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©™åºå‘˜å°ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T12:28:09.000Z" title="Fri Dec 12 2025 12:28:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Spring Boot 3.0 å‘å¸ƒåï¼Œä¸ºä»€ä¹ˆè®¸å¤šé¡¹ç›®ä»ç„¶è¿Ÿç–‘å‡çº§ï¼Ÿ</h2>
<p>Spring Boot 3.0ï¼ˆ2022å¹´12æœˆå‘å¸ƒï¼‰ ä»£è¡¨äº† Spring ç”Ÿæ€çš„ä¸€æ¬¡é‡å¤§é‡Œç¨‹ç¢‘ï¼šä¸ Spring Framework 6 ä¸€èµ·ï¼Œå®ƒå®Œæˆäº†å¯¹ç°ä»£ Java ç‰¹æ€§çš„å¯¹æ¥ï¼ˆä¾‹å¦‚æŠŠæœ€ä½è¿è¡Œæ—¶æé«˜åˆ° Java 17ï¼‰ï¼Œå¹¶æŠŠä¸ Java EE ç›¸å…³çš„ API è¿ç§»åˆ° Jakarta å‘½åç©ºé—´ï¼ˆ<code>javax.*</code> â†’ <code>jakarta.*</code>ï¼‰ã€‚è¿™äº›å˜åŒ–å°†æ¡†æ¶çš„é•¿æœŸæ¼”è¿›æ–¹å‘æ˜ç¡®åœ°å¯¹é½åˆ°äº† Jakarta EE ä¸æœ€æ–° JDK çš„èŠ‚å¥ï¼Œä¸ºæ–°é¡¹ç›®å¸¦æ¥äº†æ›´å¥½çš„åŸç”Ÿé•œåƒæ”¯æŒã€AOT å’Œè§‚æµ‹æ€§ç­‰é•¿æœŸæ”¶ç›Šï¼Œä½†åŒæ—¶ä¹Ÿåˆ¶é€ äº†æ˜¾è‘—çš„å‘åå…¼å®¹å£å’ã€‚</p>
<p>å› æ­¤åœ¨javaç¤¾åŒºä¸­å‡ºç°äº†ä¸€ä¸ªæ˜æ˜¾çš„åˆ†å±‚ç°è±¡ï¼š<strong>æ–°åˆ›å»ºçš„é¡¹ç›®å’Œè¿½æ±‚é•¿æœŸæŠ€æœ¯å€ºåŠ¡æœ€å°åŒ–çš„å›¢é˜Ÿå€¾å‘äºç›´æ¥é‡‡ç”¨ 3.xï¼›è€Œå¤§é‡æ—¢æœ‰ï¼ˆlegacyï¼‰ç³»ç»Ÿä¸ä¼ä¸šçº§åº”ç”¨åˆ™é€‰æ‹©è§‚æœ›æˆ–æ¸è¿›è¿ç§»</strong>ã€‚è¿™ç§åˆ†å±‚å¹¶éâ€œå¼€å‘è€…æ‡’æƒ°â€æˆ–â€œ3.0 ä¸å¥½ç”¨â€ï¼Œè€Œæ˜¯ç”±ä¸€ç³»åˆ—æŠ€æœ¯ä¸ç®¡ç†å±‚é¢çš„æˆæœ¬â€”æ”¶ç›Šæƒè¡¡æ¨åŠ¨çš„å†³ç­–ç»“æœã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯ç»†èŠ‚ã€ä¾èµ–ç”Ÿæ€ã€å·¥ç¨‹æˆæœ¬ä¸ç»„ç»‡æµç¨‹å››ä¸ªç»´åº¦ç³»ç»Ÿå‰–æè¿™äº›æƒè¡¡ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒå˜åŠ¨å¯¼è‡´â€œç ´åæ€§å‡çº§â€</h2>
<p>Spring Boot 3 çš„å‡çº§éšœç¢ï¼Œå¹¶ä¸æ˜¯æ¥è‡ªâ€œæ–°ç‰¹æ€§å¤ªå¤æ‚â€ï¼Œè€Œæ˜¯æ¥è‡ªäºå®ƒå¯¹åº•å±‚æŠ€æœ¯æ ˆçš„<strong>ç»“æ„æ€§å˜æ›´</strong>ã€‚è¿™äº›å˜æ›´ç«™åœ¨æ¡†æ¶æ¼”è¿›çš„è§’åº¦çœ‹å®Œå…¨æ­£ç¡®ï¼Œä½†å¯¹ç°æœ‰ç³»ç»Ÿè€Œè¨€ï¼Œéƒ½æ˜¯<strong>ä¸å¯å¿½è§†çš„ç ´åæ€§ä¿®æ”¹ï¼ˆBreaking Changesï¼‰</strong>ã€‚</p>
<p>æœ¬ç« ä»ä¸¤ä¸ªæœ€å…³é”®çš„å‡çº§éšœç¢åˆ‡å…¥ï¼š
<strong>ï¼ˆ1ï¼‰Java EE â†’ Jakarta EE åŒ…åè¿ç§»é€ æˆçš„å¤§è§„æ¨¡å…¼å®¹é—®é¢˜</strong>
<strong>ï¼ˆ2ï¼‰æœ€ä½è¿è¡Œç¯å¢ƒæå‡åˆ° Java 17 çš„è·¨è¶Šå¼è¦æ±‚</strong></p>
<hr/>
<h3 data-id="heading-2">2.1 Java EEï¼ˆjavaxï¼‰â†’ Jakarta EEï¼ˆjakartaï¼‰çš„å…¨é¢è¿ç§»</h3>
<p>Spring Boot 3.x åŸºäº Spring Framework 6ï¼Œè€Œ Spring Framework 6 çš„æœ€å¤§å˜æ›´ï¼Œå°±æ˜¯å…¨é¢æ‹¥æŠ± Jakarta EE 9+ã€‚è¿™æ„å‘³ç€ï¼š</p>
<blockquote>
<p><strong>æ‰€æœ‰åŸæœ¬äº¤äº’ä¾èµ– javax çš„ API å…¨éƒ¨åˆ‡æ¢åˆ° jakarta å‘½åç©ºé—´ã€‚</strong></p>
</blockquote>
<p>è¡¨é¢ä¸Šçœ‹åªæ˜¯åŒ…åå‰ç¼€æ›¿æ¢ï¼Œä½†å®é™…æ˜¯æ•´ä¸ªç”Ÿæ€é“¾çš„å¤§åœ°éœ‡ã€‚</p>
<hr/>
<h4 data-id="heading-3">2.1.1 åŒ…åå˜åŒ–å¸¦æ¥çš„ç¼–è¯‘çº§ç ´å</h4>
<p>ä¾‹å¦‚ï¼ŒServletã€JPAã€Validation ç­‰æ ¸å¿ƒ API çš„è·¯å¾„å…¨éƒ¨å˜åŠ¨ï¼š</p>

























<table><thead><tr><th>åŸ javax åŒ…ï¼ˆæ—§é¡¹ç›®ï¼‰</th><th>æ–° jakarta åŒ…ï¼ˆBoot 3ï¼‰</th></tr></thead><tbody><tr><td><code>javax.servlet.*</code></td><td><code>jakarta.servlet.*</code></td></tr><tr><td><code>javax.persistence.*</code></td><td><code>jakarta.persistence.*</code></td></tr><tr><td><code>javax.validation.*</code></td><td><code>jakarta.validation.*</code></td></tr><tr><td><code>javax.ws.rs.*</code></td><td><code>jakarta.ws.rs.*</code></td></tr></tbody></table>
<p>å¯¹äºä¸€ä¸ªæˆç†Ÿé¡¹ç›®æ¥è¯´ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>åªè¦ä½ ç”¨åˆ°äº† JPAã€Validationã€Filterã€Listenerã€Multipartã€JAX-RS ç­‰ä»»æ„åŠŸèƒ½
â†’ <strong>å¿…ç„¶ç¼–è¯‘å¤±è´¥</strong></li>
<li>è‡ªç ” SDK æˆ–å†…éƒ¨ä¸­é—´ä»¶å¦‚æœå¼•ç”¨äº† javax
â†’ <strong>æ•´ä¸ªå…¬å¸æ‰€æœ‰ä¾èµ–å®ƒçš„æœåŠ¡éƒ½æ— æ³•å‡çº§</strong></li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå›¢é˜Ÿå‡çº§çš„é—®é¢˜ï¼Œè€Œæ˜¯<strong>æ•´ä¸ªç»„ç»‡çš„ä¾èµ–é“¾éƒ½è¦åè°ƒ</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-4">2.1.2 Maven/Gradle ä¾èµ–å¯èƒ½çœ‹ä¼¼â€œå…¼å®¹â€ï¼Œä½†å®é™…ä¸Šæ— æ³•è¿è¡Œ</h4>
<p>æœ€å…¸å‹çš„é—®é¢˜ï¼š</p>
<ul>
<li>å³ä½¿ dependency å¯ä»¥æ­£å¸¸ä¸‹è½½</li>
<li>ä½†å†…éƒ¨å®ç°è¿˜æ˜¯åŸºäº <code>javax.*</code> çš„ç±»</li>
<li>ç¨‹åºè¿è¡Œæ—¶ç›´æ¥æŠ›ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">java.lang.NoClassDefFoundError: javax/validation/Constraint
</code></pre>
<p>æ¢è¨€ä¹‹ï¼š<strong>ä¾èµ–æ²¡æŠ¥é”™ â‰  å¯ç”¨ã€‚</strong></p>
<p>è¿™å¯¼è‡´å¤§é‡ç¬¬ä¸‰æ–¹åº“ï¼ˆSwaggerã€Shiroã€Jedis æ—§ç‰ˆæœ¬ã€Quartz æ—§ç‰ˆæœ¬ï¼‰éœ€è¦ç»Ÿä¸€è¿ç§»ï¼Œå¦åˆ™æ— æ³•åœ¨ Boot 3 ç¯å¢ƒè¿è½¬ã€‚</p>
<hr/>
<h4 data-id="heading-5">2.1.3 è‡ªåŠ¨é…ç½®å¤±æ•ˆå¸¦æ¥çš„è¡Œä¸ºçº§ç ´å</h4>
<p>Spring Boot åœ¨è‡ªåŠ¨é…ç½®ä¸­å¤§é‡å¼•ç”¨ javax ç±»å‹ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><code>MultipartConfigElement</code></li>
<li><code>ServletContextListener</code></li>
<li><code>ConstraintValidator</code></li>
<li><code>PersistenceProvider</code></li>
</ul>
<p>å½“è¿™äº›ç±»å‹å˜ä¸º <code>jakarta.*</code> ä¹‹åï¼š</p>
<ul>
<li>Boot 2.x çš„è‡ªåŠ¨é…ç½®å…¨éƒ¨å¤±æ•ˆ</li>
<li>Boot 3.x ä¸­è¢«é‡å†™ï¼Œä½†è¦æ±‚ä¾èµ–æ ˆæ–°æ—§ä¸€è‡´</li>
</ul>
<p>è¿™å°±å¯¼è‡´ï¼š</p>
<blockquote>
<p><strong>åªè¿ç§»è‡ªå·±çš„ä»£ç æ²¡æœ‰æ„ä¹‰ï¼Œæ•´ä¸ªè¿è¡Œç¯å¢ƒå¿…é¡»ä¸€èµ·è¿ç§»ã€‚</strong></p>
</blockquote>
<p>å¯¹äºå¤§å‹ä¼ä¸šé¡¹ç›®ï¼Œè¿™å‡ ä¹æ„å‘³ç€ä¸€ä¸ªç³»ç»Ÿçº§åˆ«çš„å·¥ç¨‹ä»»åŠ¡ã€‚</p>
<hr/>
<h3 data-id="heading-6">2.2 JDK ç‰ˆæœ¬è¦æ±‚æå‡ï¼šå¿…é¡» Java 17+</h3>
<p>Spring Boot 3.x çš„è¿è¡Œæ—¶æœ€ä½è¦æ±‚æ˜¯ <strong>Java 17</strong>ã€‚è¿™åˆæ˜¯ä¸€ä¸ªå·¨å¤§çš„é—¨æ§›ã€‚</p>
<hr/>
<h4 data-id="heading-7">2.2.1 ä¸ºä»€ä¹ˆè¿™æ˜¯å¿…ç„¶è¦æ±‚ï¼Ÿ</h4>
<p>å› ä¸ºï¼š</p>
<ul>
<li>Java 17 æ˜¯ LTS</li>
<li>Spring æœªæ¥è¦æ”¯æŒè™šæ‹Ÿçº¿ç¨‹ï¼ˆJDK19+ / 21 LTSï¼‰</li>
<li>AOTã€GraalVM åœ¨ 17+ æ‰è¿›å…¥æˆç†Ÿé˜¶æ®µ</li>
</ul>
<p>ä»æ¡†æ¶è§†è§’çœ‹è¿™æ˜¯åˆç†çš„ï¼Œä½†ä»ä¼ä¸šè§†è§’çœ‹æ„å‘³ç€ï¼š</p>
<ul>
<li>CI/CD éœ€è¦å‡çº§</li>
<li>å®¹å™¨åŸºç¡€é•œåƒéœ€è¦å‡çº§</li>
<li>ç”Ÿäº§æœåŠ¡å™¨ JRE éœ€è¦ç»Ÿä¸€å‡çº§</li>
<li>ä¾èµ–åº“å¿…é¡»æ”¯æŒ JDK 17ï¼Œå¦åˆ™ç¼–è¯‘å¤±è´¥æˆ–è¿è¡Œå¤±è´¥</li>
</ul>
<p>è¿™ä¸æ˜¯ä¸€ä¸ªâ€œæ¢ä¸ª JDKâ€è¿™ä¹ˆç®€å•çš„äº‹æƒ…ã€‚</p>
<hr/>
<h4 data-id="heading-8">2.2.2 Java 8 â†’ Java 17 æ˜¯å•ä½æ•°å¹´è·¨åº¦çš„è¿ç§»</h4>
<p>è·¨è¶Š 7 ä¸ªå¤§ç‰ˆæœ¬å¸¦æ¥å¤§é‡å¯èƒ½çš„é—®é¢˜ï¼š</p>
<ul>
<li>å­—èŠ‚ç æ ¼å¼å˜æ›´</li>
<li>JDK å†…éƒ¨ APIï¼ˆå¦‚ <code>Unsafe</code>ï¼‰é™åˆ¶å¢å¼º</li>
<li>åå°„è®¿é—®è§„åˆ™æ›´ä¸¥æ ¼</li>
<li>ä¸€äº›è€æ—§æ¡†æ¶ï¼ˆæ—©æœŸçš„ Nettyã€Quartzã€POIã€Fastjson 1.x ç­‰ï¼‰å¯èƒ½ä¸å…¼å®¹ 17</li>
</ul>
<p>å¯¹å†å²ç³»ç»Ÿæ¥è¯´ï¼Œ<strong>åªè¦æœ‰ä¸€ä¸ªâ€œä¸æ”¯æŒ Java 17â€çš„ä¾èµ–ï¼Œå°±å¡æ­»å‡çº§é“¾è·¯ã€‚</strong></p>
<hr/>
<h4 data-id="heading-9">2.2.3 æ¶æ„ä¸åŸºç¡€è®¾æ–½é“¾è·¯çš„è¿é”ååº”</h4>
<p>å‡çº§ JDK ä¸æ˜¯åç«¯å•ç‹¬èƒ½å†³å®šçš„ï¼š</p>
<ul>
<li>DevOpsï¼šCI é•œåƒç»Ÿä¸€å‡çº§</li>
<li>è¿ç»´ï¼šç”Ÿäº§ç¯å¢ƒ JVM å‡çº§</li>
<li>å®‰å…¨ç»„ï¼šè¯„ä¼°æ–°ç‰ˆæœ¬æ˜¯å¦å½±å“å®‰å…¨ç­–ç•¥</li>
<li>å„ä¸šåŠ¡çº¿å›¢é˜Ÿï¼šå‡çº§å…±ç”¨ç»„ä»¶ä¸ SDK</li>
<li>æµ‹è¯•ï¼šå¤§é‡çš„å›å½’æµ‹è¯•</li>
</ul>
<p>å› æ­¤ JDK å‡çº§ä¸æ˜¯ä»£ç é—®é¢˜ï¼Œæ˜¯<strong>ç»„ç»‡çº§åè°ƒé—®é¢˜</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-10">2.3 è¿™ä¸¤å¤§å˜åŒ–å åŠ åé€ æˆäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>Spring Boot 3 çš„â€œç ´åæ€§å‡çº§â€ä¸æ˜¯æ¥è‡ªåŠŸèƒ½æœ¬èº«ï¼Œè€Œæ˜¯æ¥è‡ªç”Ÿæ€é“¾çš„æ–­è£‚ä¸ç»„ç»‡åä½œæˆæœ¬ã€‚</strong></p>
</blockquote>
<p>è€é¡¹ç›®ä¸å‡çº§çš„æ ¹æœ¬åŸå› ä¸æ˜¯â€œä¸æƒ³â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ä¸€å‡çº§å°±ç‰µä¸€å‘åŠ¨å…¨èº«</li>
<li>é£é™©å¤§ã€æ”¶ç›ŠçŸ­æœŸä¸æ˜æ˜¾</li>
<li>æˆæœ¬å¾ˆéš¾åœ¨ä¸šåŠ¡ç›®æ ‡ä¸­ justify</li>
</ul>
<p>ä¹Ÿå› æ­¤å‡ºç°äº†ç¤¾åŒºå¸¸è§ç»“è®ºï¼š</p>
<blockquote>
<p><strong>Spring Boot 3 æ›´é€‚åˆæ–°é¡¹ç›®ï¼Œè€Œä¸æ˜¯è¿ç§»é¡¹ç›®ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€ä¾èµ–ç”Ÿæ€é“¾ä¸å¤Ÿâ€œè·Ÿä¸Šæ¥â€ï¼Œå¯¼è‡´å‡çº§å—é˜»</h2>
<p>å¦‚æœè¯´ç¬¬äºŒç« æ‰€è¿°çš„å˜æ›´æ˜¯â€œæ¡†æ¶çº§åˆ«çš„ç ´åæ€§å‡çº§â€ï¼Œé‚£ä¹ˆä¾èµ–ç”Ÿæ€çš„é—®é¢˜åˆ™æ˜¯â€œç³»ç»Ÿçº§åˆ«çš„å‡çº§é˜»æ–­â€ã€‚å› ä¸ºä¸€ä¸ªæˆç†Ÿçš„ä¼ä¸šæœåŠ¡ï¼Œå¾€å¾€ä¸æ˜¯ç®€å•åœ°ä¾èµ– Spring Bootï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>Spring Bootï¼ˆæ ¸å¿ƒæ¡†æ¶ï¼‰</li>
<li>Spring Cloud / Security / Data ç­‰ï¼ˆå…¨å®¶æ¡¶ï¼‰</li>
<li>åŸºç¡€è®¾æ–½ SDKï¼ˆRedisã€MQã€æœç´¢ã€ä¸­é—´ä»¶ï¼‰</li>
<li>å…¬å¸è‡ªç ” SDKï¼ˆæ—¥å¿—ã€ç›‘æ§ã€ç½‘å…³ã€æƒé™ã€é…ç½®ä¸­å¿ƒï¼‰</li>
<li>å„ç±»ç¬¬ä¸‰æ–¹åº“ï¼ˆSwaggerã€Shiroã€Quartzã€POI ç­‰ï¼‰</li>
</ul>
<p>è¿™äº›ä¾èµ–æ„æˆä¸€ä¸ªå¤æ‚çš„<strong>ç”Ÿæ€å›¾è°±</strong>ã€‚</p>
<p>ä¸€ä¸ªå¸¸è¢«ä½ä¼°çš„äº‹å®æ˜¯ï¼š</p>
<blockquote>
<p><strong>è¿ç§» Boot 3.x ä¸æ˜¯è¿ç§»ä¸€ä¸ªé¡¹ç›®ï¼Œè€Œæ˜¯è¿ç§»æ•´ä¸ªç”Ÿæ€ã€‚</strong></p>
</blockquote>
<p>ä¸‹é¢åˆ†ä¸‰ä¸ªå±‚æ¬¡æ‹†å¼€è§£é‡Šã€‚</p>
<hr/>
<h3 data-id="heading-12">3.1 Spring å…¨å®¶æ¡¶çš„è¿é”å‡çº§ï¼šç‰ˆæœ¬ä¾èµ–å›¾å†³å®šäº†å‡çº§èŠ‚å¥</h3>
<p>Spring Boot 3.x å¯¹åº”çš„æ˜¯ Spring Framework 6ï¼Œè€Œ Framework 6 åˆæ˜¯ Jakarta EE 9+ çš„ä½“ç³»ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>Spring Cloud å¿…é¡»å‡çº§åˆ° 2022.x æˆ–æ›´é«˜</li>
<li>Spring Security å¿…é¡»å‡çº§åˆ° 6.x</li>
<li>Spring Data ä¹Ÿå¿…é¡»æ•´ä½“å‡çº§åˆ°æ–°çš„å‘½åç©ºé—´æ”¯æŒä¸Š</li>
<li>Spring Batchã€Spring Integration ç­‰æ‰€æœ‰å®˜æ–¹å­é¡¹ç›®éƒ½è¦è·Ÿç€å‡çº§</li>
</ul>
<p>å› æ­¤ï¼Œå¤§å¤šæ•°ä¼ä¸šä¼šé‡åˆ°è¿™æ ·çš„è¿é”ååº”ï¼š</p>
<h4 data-id="heading-13">3.1.1 åªå‡çº§ Boot 3.xï¼Œæœ¬åœ°å¯åŠ¨å³å¤±è´¥</h4>
<p>å› ä¸ºè€ç‰ˆæœ¬çš„ Spring Cloud æˆ– Security ä»ç„¶ä¾èµ– <code>javax.*</code> ç±»å‹ã€‚</p>
<p>ä¸€äº›å…¸å‹é”™è¯¯æ˜¯ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">java.lang.NoClassDefFoundError: javax/servlet/ServletRequest
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">NoSuchMethodError: javax.persistence.EntityManager.getMetamodel()
</code></pre>
<p>è¿™äº›é”™è¯¯çš„æœ¬è´¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>Spring Boot 3.x å¼ºåˆ¶è¦æ±‚ç”Ÿæ€é“¾ç‰ˆæœ¬æ•´é½åˆ’ä¸€ï¼Œåªå‡çº§ä¸€ä¸ªç»„ä»¶æ˜¯ä¸å¯èƒ½æˆåŠŸçš„ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-14">3.2 ç¬¬ä¸‰æ–¹åº“çš„ Jakarta è¿ç§»ä¸å®Œå…¨åŒæ­¥ï¼Œå¯¼è‡´å…¼å®¹æ€§æ–­å±‚</h3>
<p>ç¬¬ä¸‰æ–¹åº“åœ¨æ­¤æ¬¡è¿ç§»ä¸­é­é‡çš„é—®é¢˜æ¯” Spring å®˜æ–¹æ›´å¤§ï¼Œå› ä¸ºä»–ä»¬åŸæœ¬ä¸ä¸ Jakarta EE 95%ä»¥ä¸Šçš„ API å¼ºç»‘å®šï¼Œä½†åœ¨ 3.x ç¯å¢ƒä¸­å¿…é¡»åŒæ­¥å‡çº§ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº› Boot 3 è¿ç§»ä¸­å¸¸è§çš„â€œå¡ç‚¹åº“â€ï¼š</p>



































<table><thead><tr><th>å¸¸è§ä¾èµ–</th><th>å‡çº§å‰æƒ…å†µ</th><th>Boot 3 çŠ¶æ€</th></tr></thead><tbody><tr><td>Swagger / Springfoxï¼ˆæ—§ï¼‰</td><td>å¤§é‡ä½¿ç”¨ javax</td><td>Springfox å·²åœæ­¢ç»´æŠ¤ï¼Œæ— æ³•å…¼å®¹</td></tr><tr><td>Shiroï¼ˆæ—§ï¼‰</td><td>ä¸ Servlet API è€¦åˆï¼Œä½¿ç”¨ javax</td><td>éœ€ä½¿ç”¨æœ€æ–°åˆ†æ”¯</td></tr><tr><td>Quartzï¼ˆæ—§ï¼‰</td><td>åŸºäº javax äº‹åŠ¡ç®¡ç†</td><td>ä½ç‰ˆæœ¬æ— æ³•è¿è¡Œ</td></tr><tr><td>MyBatis + æŸäº›è‡ªå®šä¹‰æ’ä»¶</td><td>æ’ä»¶å†…å¼•ç”¨ javax</td><td>éœ€è¦æ’ä»¶åŒæ­¥å‡çº§</td></tr><tr><td>æ—§ç‰ˆ Redis å®¢æˆ·ç«¯ï¼ˆJedisï¼‰</td><td>æœ‰çš„ä¾èµ– JDK è€ç‰¹æ€§</td><td>åœ¨ JDK17+ ä¸‹æ˜“æŠ¥é”™</td></tr></tbody></table>
<h4 data-id="heading-15">3.2.1 â€œçœ‹ä¼¼å…¼å®¹ï¼Œä½†è¿è¡Œæ—¶å´©æºƒâ€æ˜¯æœ€å¸¸è§çš„ç¾éš¾</h4>
<p>ä¾èµ–èƒ½ç¼–è¯‘ä¸ä»£è¡¨èƒ½è¿è¡Œã€‚</p>
<p>Boot 3 è¿ç§»ä¸­å¤§é‡é‡åˆ°è¿™ç§ç°è±¡ï¼š</p>
<ul>
<li>ä¾èµ–å¼•å…¥æˆåŠŸ</li>
<li>ç¼–è¯‘æ²¡æœ‰é—®é¢˜</li>
<li>è¿è¡Œæ—¶é©¬ä¸ŠæŠ¥ <code>ClassNotFoundException</code></li>
</ul>
<p>åŸå› é€šå¸¸æ˜¯ï¼š</p>
<ul>
<li><code>.class</code> æ–‡ä»¶ä¾æ—§å¼•ç”¨ javax</li>
<li>é¡¹ç›®æ²¡æœ‰è¿™ç§ç±»ï¼Œå› æ­¤æ— æ³•åŠ è½½</li>
</ul>
<p>å¼€å‘è€…ä¼šè¯¯ä»¥ä¸ºæ˜¯é…ç½®é—®é¢˜ï¼Œä½†æœ¬è´¨æ˜¯<strong>ä¾èµ–æœ¬èº«æ— æ³•å…¼å®¹æ–°çš„åŒ…åä½“ç³»</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-16">3.3 ä¼ä¸šå†…éƒ¨è‡ªç ” SDKï¼šå‡çº§çš„â€œå†³å®šæ€§ç“¶é¢ˆâ€</h3>
<p>å¦‚æœè¯´ç¬¬ä¸‰æ–¹åº“æ˜¯ Boot 3 éš¾è¿ç§»çš„å¤–éƒ¨å› ç´ ï¼Œé‚£ä¹ˆ <strong>ä¼ä¸šè‡ªç ” SDK æ‰æ˜¯æœ€éš¾å¤„ç†çš„å†…éƒ¨å› ç´ </strong>ã€‚</p>
<p>å¸¸è§çš„è‡ªç ”ç»„ä»¶åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ—¥å¿— SDKï¼ˆAOP + MDCï¼‰</li>
<li>æƒé™ SDKï¼ˆæ‹¦æˆªå™¨ + Filterï¼‰</li>
<li>ç½‘å…³ SDKï¼ˆServlet + Feignï¼‰</li>
<li>Kafka / RocketMQ åŒ…è£… SDK</li>
<li>æ–‡ä»¶ä¸Šä¼  SDKï¼ˆåŸºäº Multipart/Servletï¼‰</li>
<li>JPA é€šç”¨å°è£…ã€MyBatis é€šç”¨ mapper</li>
<li>éªŒè¯è§„åˆ™ï¼ˆJSR303 / javax.validationï¼‰</li>
</ul>
<p>è¿™äº› SDK <strong>å‡ ä¹ä¸€å®šå¼•ç”¨ javax åŒ…</strong>ã€‚</p>
<p>è€Œä¸€æ—¦å…¬å¸å†…éƒ¨ SDK æ²¡æœ‰å‡çº§ï¼š</p>
<blockquote>
<p><strong>å…¨å…¬å¸æ‰€æœ‰æœåŠ¡â€”â€”æ— è®ºå¤§å°â€”â€”éƒ½æ— æ³•è¿ç§» Spring Boot 3ã€‚</strong></p>
</blockquote>
<p>è¿™å’Œå‡çº§ç¬¬ä¸‰æ–¹åº“å®Œå…¨ä¸æ˜¯ä¸€ä¸ªé—®é¢˜é‡çº§ï¼š</p>
<ul>
<li>æ¶‰åŠç»„ç»‡åä½œ</li>
<li>æ¶‰åŠæ•°åä¸ªå›¢é˜Ÿ</li>
<li>æ¶‰åŠè¿ç»´ã€æµ‹è¯•ã€å¤§é‡å›å½’</li>
<li>å…¶ä¸­æŸäº›è€ç³»ç»Ÿå·²ç»æ— äººç»´æŠ¤</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè®¸å¤šå…¬å¸ä¼šè¯´ï¼š</p>
<blockquote>
<p>â€œBoot 3 æˆ‘ä»¬å…ˆè§‚å¯Ÿä¸€å¹´ã€‚â€</p>
</blockquote>
<p>å› ä¸ºçœŸæ­£çš„æˆæœ¬ä¸åœ¨ä¸šåŠ¡ä»£ç ï¼Œè€Œåœ¨ç”Ÿæ€é“¾ä¸Šã€‚</p>
<hr/>
<h2 data-id="heading-17">3.4 è¿ç§»æˆæœ¬ä¸å¯æ§ï¼šä¾èµ–é“¾æ·±åº¦è¶Šæ·±ï¼Œå‡çº§éš¾åº¦è¶ŠæŒ‡æ•°çº§å¢é•¿</h2>
<p>Spring Boot é¡¹ç›®å¾€å¾€ä¸æ˜¯â€œå•ä½“é«˜å†…èšâ€ï¼Œè€Œæ˜¯æœ‰ä¸‰å±‚ä¾èµ–é“¾ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ä¸šåŠ¡æœåŠ¡
 â†“
å…¬å¸ä¸­é—´å±‚ libraries (SDK)
 â†“
ç¬¬ä¸‰æ–¹åŸºç¡€åº“
 â†“
Spring Boot / Framework
</code></pre>
<p>å‡çº§ Boot 3 çš„è¿‡ç¨‹å°±åƒæ‹”ä¸€æ ¹çº¿ï¼š</p>
<ul>
<li>ä»»ä½•ä¸€å±‚ä¸å…¼å®¹
â†’ æ•´ä¸ªç³»ç»Ÿä¸èƒ½å¯åŠ¨</li>
<li>å¤šå›¢é˜Ÿéœ€è¦åŒæ—¶ä¿®å¤
â†’ åä½œæˆæœ¬çˆ†ç‚¸</li>
<li>å¯¹è€æ—§æœåŠ¡éš¾ä»¥åŠ¨æ‰‹
â†’ æˆä¸ºæŠ€æœ¯å€ºåŠ¡æ°¸ä¹…é˜»ç¢</li>
</ul>
<p>å› æ­¤ï¼Œä»å·¥ç¨‹ç»´åº¦å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š</p>
<blockquote>
<p><strong>Spring Boot 3 çš„é—®é¢˜ä¸æ˜¯â€œéš¾â€ï¼Œè€Œæ˜¯â€œé“¾æ¡é•¿â€ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-18">å››ã€è€é¡¹ç›®å‡çº§æˆæœ¬è¿‡é«˜ï¼šä¸ä»…æ˜¯ä»£ç ï¼Œè¿˜æœ‰æ¶æ„</h2>
<p>å¯¹äºä¸€ä¸ªè¿è¡Œå¤šå¹´çš„ Spring Boot 2.x ç³»ç»Ÿæ¥è¯´ï¼Œå‡çº§åˆ° Boot 3.x å¸¦æ¥çš„å¹¶ä¸æ˜¯â€œä¿®æ”¹å‡ ä¸ª importï¼Œç„¶åè·‘ä¸€ä¸‹å›å½’æµ‹è¯•â€è¿™ä¹ˆè½»æ¾ã€‚è¿™æ˜¯å› ä¸ºï¼š</p>
<blockquote>
<p><strong>Spring Boot åœ¨ä¸€ä¸ªæˆç†Ÿé¡¹ç›®ä¸­ï¼Œæ˜¯æ¡†æ¶ï¼Œä¹Ÿæ˜¯æ¶æ„çš„åŸºç¡€è®¾æ–½ä¹‹ä¸€ã€‚</strong></p>
</blockquote>
<p>å› æ­¤å‡çº§ç‰µæ¶‰çš„å±‚é¢ä¸ä»…æ˜¯ä»£ç ï¼Œè¿˜åŒ…æ‹¬è®¾è®¡æ¨¡å¼é€‰å‹ã€ä¾èµ–è€¦åˆã€æµ‹è¯•ä½“ç³»ã€CI/CD ä¸åŸºç¡€è®¾æ–½ã€‚ä»¥ä¸‹ä»ä¸‰ä¸ªç»´åº¦å±•å¼€è¯´æ˜ã€‚</p>
<hr/>
<h3 data-id="heading-19">4.1 å­˜é‡é¡¹ç›®è§„æ¨¡åºå¤§ï¼Œè¿ç§»å·¥ä½œå‘ˆâ€œéçº¿æ€§å¢é•¿â€</h3>
<p>å¯¹äºä¸€ä¸ªå­˜åœ¨è¶…è¿‡ 2 å¹´çš„æœåŠ¡è€Œè¨€ï¼Œå®ƒä¼šè¡¨ç°å‡ºä¸‰ä¸ªå…¸å‹ç‰¹å¾ï¼š</p>
<h4 data-id="heading-20">4.1.1 ä»£ç é‡å¤§ä¸”è·¨æ¨¡å—å¹¿</h4>
<p>å³ä½¿ä¸šåŠ¡ä»£ç æœ¬èº«å‡ åä¸‡è¡Œï¼ŒBoot 3 çš„è¿ç§»å½±å“çš„ä¹Ÿä¸æ­¢æ˜¯æ§åˆ¶å™¨æˆ– service å±‚ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>å„ç§ Filter / Interceptor</li>
<li>è®¤è¯ã€æˆæƒç›¸å…³é€»è¾‘ï¼ˆJWTã€Sessionã€Token æ ¡éªŒç­‰ï¼‰</li>
<li>ç»Ÿä¸€å¼‚å¸¸å¤„ç†</li>
<li>éªŒè¯æ³¨è§£ï¼ˆJSR303 â†’ Jakarta Validationï¼‰</li>
<li>æ•°æ®è®¿é—®ç»„ä»¶ï¼ˆJPAã€MyBatis æ’ä»¶ï¼‰</li>
<li>æ¶ˆæ¯ä¸­é—´ä»¶å°è£…çš„ Client</li>
</ul>
<p><strong>è¿™äº›åœ°æ–¹å¾€å¾€åŒ…å«å¤§é‡ javax å¼•ç”¨æˆ–ä¾èµ–æ¡†æ¶è¡Œä¸ºçš„ç»†èŠ‚ã€‚</strong></p>
<p>æ¯ä¸€å¤„çœ‹ä¼¼å¾®å°çš„ç ´åæ€§å˜åŒ–ï¼Œéƒ½å¯èƒ½å¼•å‘å¦ä¸€å±‚çš„è¿é”ä¿®æ”¹ã€‚</p>
<hr/>
<h4 data-id="heading-21">4.1.2 è®¸å¤šé¡¹ç›®æœ‰â€œæ—¶é—´ç§¯ç´¯çš„æŠ€æœ¯å€ºåŠ¡â€</h4>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>æ—§çš„ AOP å†™æ³•ä¾èµ–ç‰¹å®šçš„ API</li>
<li>è‡ªå®šä¹‰ starter ä½¿ç”¨äº†æ—§çš„ AutoConfiguration æ¨¡å‹</li>
<li>Configurations ä¸­ä½¿ç”¨äº†è¿‡æ—¶çš„å±æ€§</li>
<li>å†å²ç‰ˆæœ¬çš„ SDK å¼•ç”¨äº† javax çš„ SPI</li>
<li>æŸäº›æ¨¡å—ç¼–å†™æ—¶æ²¡æœ‰è€ƒè™‘å¯ç»´æŠ¤æ€§ï¼ˆhard-coded æˆ– deep-coupledï¼‰</li>
</ul>
<p>Boot 3 çš„è¿ç§»ä¼šè¿«ä½¿å›¢é˜Ÿæ­£è§†è¿™äº›æŠ€æœ¯å€ºåŠ¡ï¼Œè€Œä¸æ˜¯â€œåŸå°ä¸åŠ¨è¿ç§»è¿‡å»â€ã€‚</p>
<p>æ¢è¨€ä¹‹ï¼Œå‡çº§è¿‡ç¨‹æœ¬èº«å°±æ˜¯ä¸€ä¸ª<strong>æŠ€æœ¯å€ºåŠ¡æš´éœ²å™¨</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-22">4.1.3 è·¨è¶Šç‰ˆæœ¬è¶Šå¤§ï¼Œæ½œåœ¨ä¸å…¼å®¹ç‚¹è¶Šå¤š</h4>
<p>ä» 2.6 / 2.7 â†’ 3.x
æœ¬è´¨ä¸Šä¸æ˜¯â€œminor upgradeâ€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ä¾èµ– Jakarta EE</li>
<li>Spring Framework 6 å…¨é¢é‡æ„</li>
<li>éƒ¨åˆ† API è¢«åºŸå¼ƒæˆ–æ›¿æ¢</li>
<li>å¯åŠ¨æ—¶åºå˜åŒ–</li>
<li>Bean æ³¨å…¥è¯­ä¹‰æ›´ä¸¥æ ¼</li>
</ul>
<p>å› æ­¤ï¼Œæ—§é¡¹ç›®è¿ç§»è¦å¤„ç†çš„ä¸æ˜¯ä¸€ä¸¤ä¸ªâ€œæŠ¥é”™â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>æ•°ç™¾å¤„ç¼–è¯‘é”™è¯¯</li>
<li>æ•°åå¤„è¿è¡Œæ—¶å·®å¼‚</li>
<li>è®¸å¤šéšæ€§è¡Œä¸ºå˜åŒ–ï¼ˆauto-configurationã€path matchingã€CORSã€actuatorï¼‰</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿ç§»å¾€å¾€å˜æˆâ€œé¡¹ç›®é‡æ„â€çš„è§„æ¨¡ã€‚</p>
<hr/>
<h3 data-id="heading-23">4.2 é›†æˆæµ‹è¯•ä¸ä¸šåŠ¡å›å½’æˆæœ¬æé«˜</h3>
<p>åœ¨ä¼ä¸šçº§é¡¹ç›®ä¸­ï¼Œ<strong>æœ€è´µçš„ä¸æ˜¯ä»£ç ä¿®æ”¹ï¼Œè€Œæ˜¯æµ‹è¯•</strong>ã€‚</p>
<p>Spring Boot å‡çº§ä¼šå½±å“ä»¥ä¸‹å…³é”®ç‚¹ï¼š</p>
<hr/>
<h4 data-id="heading-24">4.2.1 è‡ªåŠ¨é…ç½®è¡Œä¸ºå˜åŒ–</h4>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>WebMvc path matching é»˜è®¤è¡Œä¸ºè°ƒæ•´</li>
<li>Jackson è‡ªåŠ¨æ¨¡å—åŠ è½½æœ‰å·®å¼‚</li>
<li>Data JPA çš„ repository åˆå§‹åŒ–æ—¶åºå˜åŠ¨</li>
<li>WebFlux é¡¹ç›®ä¸­éƒ¨åˆ† auto-config çš„å¼€å¯æ¡ä»¶å˜åŒ–</li>
</ul>
<p>è¿™äº›éƒ½èƒ½é€ æˆï¼š</p>
<ul>
<li>éƒ¨åˆ†æ¥å£ 404</li>
<li>Bean æœªåŠ è½½</li>
<li>Serializer ä¸ä¸€è‡´</li>
<li>æ•°æ®ç»‘å®šå¤±è´¥</li>
<li>WebSocket æˆ– CORS é…ç½®å¤±æ•ˆ</li>
</ul>
<p>è¦éªŒè¯è¿™äº›å¹¶ç¡®ä¿æ—  regressionsï¼Œéœ€è¦å¤§é‡ä¸šåŠ¡å›å½’ã€‚</p>
<hr/>
<h4 data-id="heading-25">4.2.2 è®¤è¯ã€æƒé™ã€ç½‘å…³é“¾è·¯é£é™©æ›´é«˜</h4>
<p>å°¤å…¶ä½¿ç”¨ï¼š</p>
<ul>
<li>Spring Security</li>
<li>OAuth2</li>
<li>Feign + æƒé™ token ä¼ é€’</li>
<li>Gateway + global filters</li>
</ul>
<p>å› ä¸º Boot 3 æ•´ä½“è¿ç§»åˆ°äº†æ–°çš„ API ä¸é…ç½®ä½“ç³»ï¼Œä¸€äº›é»˜è®¤ç­–ç•¥å‘ç”Ÿå˜åŠ¨ã€‚</p>
<p><strong>å®‰å…¨ç›¸å…³çš„å›å½’æµ‹è¯•å¾€å¾€æ˜¯æœ€ä¸¥è‹›ä¸”æœ€è€—æ—¶çš„ã€‚</strong></p>
<hr/>
<h4 data-id="heading-26">4.2.3 åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆE2Eï¼‰éš¾åº¦å¤§</h4>
<p>åªè¦ä¸€ä¸ªæœåŠ¡å‡çº§ï¼Œå…¶ä¸‹æ¸¸æˆ–ä¸Šæ¸¸æœåŠ¡å¯èƒ½å‡ºç°ï¼š</p>
<ul>
<li>è®¤è¯æ ¼å¼ä¸å…¼å®¹</li>
<li>è·¨æœåŠ¡ DTO åºåˆ—åŒ–ä¸ä¸€è‡´</li>
<li>Feign å®¢æˆ·ç«¯è¡Œä¸ºå·®å¼‚</li>
<li>ç½‘å…³è¿‡æ»¤å™¨æ¨é€é”™è¯¯</li>
<li>é“¾è·¯è¿½è¸ªé€»è¾‘ä¸¢å¤±</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š</p>
<blockquote>
<p><strong>å¦‚æœç³»ç»Ÿæ˜¯å¾®æœåŠ¡æ¶æ„ï¼Œå‡çº§ä¸€ä¸ªæœåŠ¡å¯èƒ½å½±å“äº”åˆ°åä¸ªæœåŠ¡ã€‚</strong></p>
</blockquote>
<p>å› æ­¤å¾ˆå¤šå…¬å¸ä¼šé€‰æ‹©ï¼š</p>
<ul>
<li>â€œç­‰å…¨é“¾è·¯å‡†å¤‡å¥½å†ä¸€èµ·å‡çº§â€</li>
<li>æˆ–è€…å¹²è„†â€œä¸åŠ¨å®ƒï¼Œé£é™©å¤ªé«˜â€</li>
</ul>
<hr/>
<h3 data-id="heading-27">4.3 å‡çº§æ¶‰åŠå¤šä¸ªå›¢é˜Ÿåä½œï¼Œæ˜¯ç»„ç»‡çº§é¡¹ç›®</h3>
<p>æŠ€æœ¯é—®é¢˜åªæ˜¯è¡¨è±¡ï¼Œå®é™…ç“¶é¢ˆåœ¨ç»„ç»‡åä½œèƒ½åŠ›ã€‚</p>
<hr/>
<h4 data-id="heading-28">4.3.1 æ¶æ„/å¹³å°å›¢é˜Ÿéœ€è¦å‡çº§åŸºç¡€è®¾æ–½</h4>
<p>åŒ…æ‹¬ï¼š</p>
<ul>
<li>JDK 17</li>
<li>CI/CD æ„å»ºé•œåƒ</li>
<li>Docker åŸºç¡€é•œåƒ</li>
<li>GitLab Runner / Jenkins JDK ç‰ˆæœ¬</li>
<li>ç›‘æ§/é“¾è·¯è¿½è¸ªç»„ä»¶é€‚é…ï¼ˆä¾‹å¦‚ Micrometer 3.xï¼‰</li>
</ul>
<p>è¿™äº›ä¸æ˜¯ä»£ç å±‚é¢èƒ½è§£å†³çš„ã€‚</p>
<hr/>
<h4 data-id="heading-29">4.3.2 è¿ç»´å›¢é˜Ÿéœ€è¦è¯„ä¼°è¿è¡Œé£é™©</h4>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>GC ç­–ç•¥å˜åŒ–ï¼ˆJava 8 â†’ Java 17ï¼‰</li>
<li>Native Image éƒ¨ç½²æ¨¡å¼çš„å½±å“</li>
<li>å®¹å™¨å†…å­˜è¡Œä¸ºå·®å¼‚</li>
<li>æ—¥å¿—ã€metrics å¹³å°çš„å…¼å®¹æ€§</li>
</ul>
<p>æ²¡æœ‰è¿ç»´å›¢é˜Ÿçš„æ”¯æŒï¼Œå‡çº§æ˜¯æ— æ³•è¿›è¡Œçš„ã€‚</p>
<hr/>
<h4 data-id="heading-30">4.3.3 QAæ— æ³•åœ¨çŸ­æœŸå†…è¦†ç›–æ‰€æœ‰å›å½’åœºæ™¯</h4>
<p>å°¤å…¶åœ¨ï¼š</p>
<ul>
<li>é‡‘è/äº¤æ˜“ç³»ç»Ÿ</li>
<li>ç”µå•†/è®¢å•é“¾è·¯</li>
<li>å†…éƒ¨å¤§ä¸­å°ç³»ç»Ÿ</li>
</ul>
<p>æµ‹è¯•é“¾è·¯å¤æ‚ï¼Œå‡çº§å¯èƒ½å¼•å‘ï¼š</p>
<ul>
<li>è®¢å•çŠ¶æ€å¼‚å¸¸</li>
<li>æ”¯ä»˜å›è°ƒé—®é¢˜</li>
<li>æ•°æ®ä¸€è‡´æ€§é—®é¢˜</li>
<li>ä¸šåŠ¡æŒ‡æ ‡ç»Ÿè®¡é”™è¯¯</li>
</ul>
<p>è¿™äº›é£é™©è¿œé«˜äºâ€œå‡çº§æ¡†æ¶å¸¦æ¥çš„æ”¶ç›Šâ€ã€‚</p>
<p>å› æ­¤ä¼ä¸šå¾€å¾€ä¼šé‡‡ç”¨ä¸€ç§æ€åº¦ï¼š</p>
<blockquote>
<p><strong>â€œBoot 2.x è¿˜åœ¨ç»´æŠ¤ï¼Œæˆ‘ä»¬æ²¡å¿…è¦å†’é™©å‡çº§ã€‚â€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-31">äº”ã€Spring Boot 3 çš„äº®ç‚¹ä¸ºä»€ä¹ˆæ²¡æˆä¸ºâ€œå¼ºåˆšéœ€â€ï¼Ÿ</h2>
<p>ä»æŠ€æœ¯è§’åº¦çœ‹ï¼ŒSpring Boot 3 æ˜¯ä¸€ä¸ªéå¸¸â€œå…ˆè¿›â€çš„ç‰ˆæœ¬ã€‚å®ƒæ‹¥æŠ±äº† Java 17ã€GraalVMã€AOTã€è™šæ‹Ÿçº¿ç¨‹ç­‰ç°ä»£ JVM èƒ½åŠ›ï¼Œä¹Ÿä¸ºæœªæ¥ 5 å¹´çš„ Java ç”Ÿæ€å¥ å®šåŸºç¡€ã€‚ä½†ä»è½åœ°åº”ç”¨è§’åº¦çœ‹ï¼Œè¿™äº›äº®ç‚¹ <strong>å¹¶ä¸è¶³ä»¥è®©ä¼ä¸šæ„¿æ„æ‰¿æ‹…å¤§è§„æ¨¡è¿ç§»çš„é«˜æˆæœ¬</strong>ã€‚</p>
<p>æœ¬ç« ä»å››ä¸ªè§’åº¦åˆ†æï¼šæŠ€æœ¯å¯¹ç”Ÿäº§ä»·å€¼ã€è¿ç§»æˆæœ¬ vs æ”¶ç›Šã€ç”Ÿæ€æˆç†Ÿåº¦ã€æœªæ¥æ€§ vs ç°å®æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-32">5.1 AOT / Native Imageï¼šçœ‹èµ·æ¥å¾ˆå¼ºï¼Œä½†è½åœ°é—¨æ§›å¤ªé«˜</h3>
<p>Spring Boot 3 æœ€è¢«å®£ä¼ çš„å–ç‚¹ä¹‹ä¸€ï¼Œæ˜¯ AOTï¼ˆAhead-of-Timeï¼‰å’Œ Native Imageã€‚</p>
<p>å®ƒèƒ½å¸¦æ¥ï¼š</p>
<ul>
<li>å†·å¯åŠ¨é€Ÿåº¦å¯ç¼©çŸ­åˆ°æ¯«ç§’çº§</li>
<li>å†…å­˜å ç”¨æ˜¾è‘—é™ä½</li>
<li>éƒ¨ç½²å¯ç›´æ¥å˜æˆä¸€ä¸ªå°ä½“ç§¯å¯æ‰§è¡ŒåŒ…</li>
</ul>
<p>å¬èµ·æ¥éå¸¸ç¾å¥½ï¼Œä½†å®é™…è½åœ°ä¼šé‡åˆ°å¤§é‡ç°å®é—®é¢˜ã€‚</p>
<hr/>
<h4 data-id="heading-33">5.1.1 AOT å¹¶ä¸èƒ½ç®€å•â€œæ‰“å¼€å¼€å…³å°±èƒ½ç”¨â€</h4>
<p>ä½¿ç”¨ AOT ä¼šå‘ç°ï¼š</p>
<ul>
<li>éœ€è¦æ‰«æå¤§é‡åå°„ï¼Œç”¨ <code>@NativeHint</code> æˆ– JSON æ‰‹åŠ¨å£°æ˜</li>
<li>ç¬¬ä¸‰æ–¹åº“å¦‚æœæœªé€‚é… GraalVMï¼Œä¼šç›´æ¥æ— æ³•æ„å»º</li>
<li>å‡çº§åçš„é”™è¯¯é€šå¸¸æ˜¯ <strong>â€œæ„å»ºæœŸå´©æºƒâ€</strong>ï¼Œéš¾ä»¥æ’æŸ¥</li>
<li>Framework è¡Œä¸ºå’Œ JVM æ¨¡å¼å˜åŒ–è¾ƒå¤§ï¼Œæµ‹è¯•æˆæœ¬æ¿€å¢</li>
</ul>
<p>è€Œå¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ï¼š</p>
<ul>
<li>ä½¿ç”¨ JPA</li>
<li>ä½¿ç”¨ MyBatis</li>
<li>ä½¿ç”¨å„ç§åå°„æ’ä»¶</li>
<li>ä½¿ç”¨å„ç§åŠ¨æ€ä»£ç†</li>
<li>ä½¿ç”¨å¤æ‚åºåˆ—åŒ–ï¼ˆJacksonï¼‰</li>
</ul>
<p>æœ¬èº«å°±ä¸é€‚åˆ AOT è¿è¡Œæ¨¡å¼ã€‚</p>
<p>å®é™…ä½“éªŒï¼š</p>
<blockquote>
<p><strong>èƒ½åœ¨ AOT + Native æ¨¡å¼è·‘é€šçš„é¡¹ç›®ï¼Œå¤šæ•°æ˜¯éå¸¸ç®€å•çš„æœåŠ¡ã€‚</strong></p>
</blockquote>
<p>å¯¹äºä¼ä¸šä¸»æµä¸šåŠ¡æ¥è¯´ï¼Œè¿™ä¸ªäº®ç‚¹<strong>çŸ­æœŸä¸æ„æˆé©±åŠ¨åŠ›</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-34">5.1.2 Native Image æ„å»ºæˆæœ¬æé«˜</h4>
<p>æ„å»ºä¸€æ¬¡ Native åŒ…çš„ä½“éªŒï¼š</p>
<ul>
<li>æœ¬åœ°éœ€è¦å¤§é‡ä¾èµ–</li>
<li>æ„å»ºæ—¶é—´å¯èƒ½ 5â€“15 åˆ†é’Ÿï¼ˆå–å†³äºé¡¹ç›®å¤æ‚åº¦ï¼‰</li>
<li>å¤±è´¥çš„è°ƒè¯•æˆæœ¬å¾ˆé«˜</li>
<li>CI/CD Mirror éœ€è¦æ›´æ¢</li>
<li>ä¸é€‚åˆé«˜é¢‘æ„å»ºçš„æœåŠ¡</li>
</ul>
<p>è¿™ä¸ä¼ ç»Ÿ JVM æ¨¡å¼â€œç§’çº§æ„å»ºï¼Œå¿«é€Ÿè¿­ä»£â€çš„ä½“éªŒå®Œå…¨ä¸åŒã€‚</p>
<p>å¯¹ä¸šåŠ¡æ¥è¯´ï¼š</p>
<blockquote>
<p><strong>å¼€å‘æ•ˆç‡å’Œæ„å»ºæˆæœ¬æ¯”å¯åŠ¨é€Ÿåº¦æ›´é‡è¦ã€‚</strong></p>
</blockquote>
<p>å› æ­¤ Native Image ä¸æ˜¯ç”Ÿäº§åŠ›å·¥å…·ï¼Œè€Œæ˜¯<strong>ç‰¹å®šåœºæ™¯ï¼ˆå‡½æ•°è®¡ç®—ã€è¾¹ç¼˜äº‘ï¼‰çš„ä¼˜åŒ–æ‰‹æ®µ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-35">5.2 è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadï¼‰æ²¡æœ‰å½¢æˆå¼ºéœ€æ±‚</h3>
<p>è™šæ‹Ÿçº¿ç¨‹æ˜¯ Java 19/21 çš„äº®ç‚¹ï¼Œè€Œ Boot 3 æ—©å·²æ”¯æŒå®ƒã€‚ä½†ç°å®ä¸šåŠ¡ä¸­ï¼š</p>
<ul>
<li>å¤§éƒ¨åˆ†æœåŠ¡å·²ç»é‡‡ç”¨ Reactorï¼ˆWebFluxï¼‰æˆ–å®Œå–„çš„çº¿ç¨‹æ± æ¨¡å‹</li>
<li>ä¸šåŠ¡ç“¶é¢ˆé€šå¸¸ä¸æ˜¯çº¿ç¨‹æ•°ï¼Œè€Œæ˜¯æ•°æ®åº“/ç¼“å­˜/IO</li>
<li>è™šæ‹Ÿçº¿ç¨‹å¯¹é˜»å¡é€»è¾‘å‹å¥½ï¼Œä½†é˜»å¡æœ¬èº«ä¸æ˜¯æœ€ä½³å®è·µ</li>
<li>ä¸ç°æœ‰ç»„ä»¶ï¼ˆå¦‚ JDBC Driverï¼‰æœ‰æ—¶ä»å­˜åœ¨å…¼å®¹é™åˆ¶</li>
</ul>
<p>å› æ­¤è™šæ‹Ÿçº¿ç¨‹å®é™…ä¸Šï¼š</p>
<blockquote>
<p><strong>æ˜¯æœªæ¥è¶‹åŠ¿ï¼Œä½†ä¸æ˜¯â€œå¿…é¡»å‡çº§æ‰èƒ½ç”¨â€çš„å¿…è¦æ€§ã€‚</strong></p>
</blockquote>
<p>å¯¹å¤§å¤šæ•°ä¼ä¸šï¼š
<strong>â€œèƒ½è·‘å°±è¡Œï¼Œä¸è¦åŠ¨å®ƒâ€</strong> æ˜¯çœŸéœ€æ±‚ã€‚
â€œæ¢æ¨¡å‹å†æµ‹è¯•å…¨éƒ¨é“¾è·¯â€åˆ™æ˜¯é«˜é£é™©è¡Œä¸ºã€‚</p>
<hr/>
<h3 data-id="heading-36">5.3 Java 17 çš„è¯­è¨€ç‰¹æ€§æ˜¯å¥½ï¼Œä½†ä¸æ˜¯ä¸šåŠ¡ç—›ç‚¹</h3>
<p>Java 17ï¼ˆBoot 3 çš„æœ€ä½è¦æ±‚ï¼‰å¸¦æ¥äº†ï¼š</p>
<ul>
<li>Sealed Classes</li>
<li>Records</li>
<li>Pattern Matching</li>
<li>Text Blocks</li>
<li>å¼ºåŒ–çš„ switch æ¨¡å¼åŒ¹é…</li>
<li>æ›´ç°ä»£çš„ JVM ä¼˜åŒ–</li>
</ul>
<p>çœ‹èµ·æ¥å¾ˆé¦™ï¼Œä½†ä¸šåŠ¡ä»£ç æ˜¯å¦éœ€è¦ï¼Ÿ</p>
<p>ç»“è®ºæ˜¯ï¼š<strong>å®Œå…¨å¯ä»¥åœ¨ Java 8/11 ä¸­å†™å‡ºç¨³å®šã€å¯è¯»ã€æ€§èƒ½è¶³å¤Ÿçš„ç”Ÿäº§ç³»ç»Ÿã€‚</strong></p>
<p>ä¼ä¸šä¸ä¼šä¸ºäº†ï¼š</p>
<ul>
<li>æ›´ä¼˜é›…çš„ switch</li>
<li>å°‘å†™ä¸€ç‚¹æ ·æ¿ä»£ç </li>
<li>æ›´ç°ä»£çš„ JVM è™šæ‹Ÿçº¿ç¨‹</li>
</ul>
<p>å»æ‰¿æ‹…ï¼š</p>
<ul>
<li>æ›¿æ¢åŸºç¡€é•œåƒ</li>
<li>å…¨é“¾è·¯é€‚é…</li>
<li>æ‰€æœ‰ç³»ç»Ÿå›å½’</li>
<li>SDK æ”¹é€ </li>
</ul>
<p>è¯­è¨€ç‰¹æ€§ä¸å¤Ÿâ€œç—›ç‚¹çº§åˆ«â€çš„å‡çº§åŠ¨åŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-37">5.4 ç”Ÿæ€æˆç†Ÿåº¦å»¶è¿Ÿï¼Œå¯¼è‡´äº®ç‚¹çŸ­æœŸéš¾è½åœ°</h3>
<p>Boot 3 çš„è®¸å¤šæ–°ç‰¹æ€§ä¾èµ–ï¼š</p>
<ul>
<li>Spring Framework 6</li>
<li>Java 17+</li>
<li>GraalVM / Native Image</li>
<li>Micrometer 3.x</li>
<li>Actuator 3.x</li>
<li>æ–°ç‰ˆ Spring Cloud 2022.x</li>
</ul>
<p>ä½†è¿™äº›ç”Ÿæ€ç»„ä»¶ï¼š</p>
<ul>
<li>åœ¨å‘å¸ƒåˆæœŸç¨³å®šæ€§ä¸è¶³</li>
<li>æœ‰äº›åœ¨ 2023 å¹´ä»æŒç»­ä¿® bug</li>
<li>éƒ¨åˆ†ç»„ä»¶çš„ç¬¬ä¸‰æ–¹æ‰©å±•éœ€è¦æ—¶é—´é€‚é…</li>
<li>æ–‡æ¡£å’Œ StackOverflow è§£å†³æ–¹æ¡ˆç›¸å¯¹å°‘</li>
</ul>
<p>å› æ­¤æ—©æœŸç”¨æˆ·å¾€å¾€è¯„ä»·ï¼š</p>
<blockquote>
<p>â€œé—®é¢˜å¤ªå¤šï¼Œç­‰ 1â€“2 ä¸ªå°ç‰ˆæœ¬å†è¯´ã€‚â€</p>
</blockquote>
<p>ä¼ä¸šä¸ºäº†ç¨³å®šï¼Œä¸ä¼šåœ¨ç”Ÿæ€ä¸æˆç†Ÿæ—¶å¤§è§„æ¨¡è¿ç§»ã€‚</p>
<hr/>
<h3 data-id="heading-38">5.5 æœ€å…³é”®ç‚¹ï¼šSpring Boot 2.x å·²ç»â€œè¶³å¤Ÿå¥½â€</h3>
<p>å¯¹äºå¤§å¤šæ•°ä¸šåŠ¡å›¢é˜Ÿæ¥è¯´ï¼ŒBoot 2.x æä¾›çš„èƒ½åŠ›å·²ç»å®Œå…¨æ»¡è¶³ï¼š</p>
<ul>
<li>ç¨³å®š</li>
<li>ç”Ÿæ€æˆç†Ÿ</li>
<li>æ–‡æ¡£ä¸°å¯Œ</li>
<li>ç¤¾åŒºé—®é¢˜å¤š</li>
<li>æ’ä»¶ä¸ SDK å®Œæ•´å…¼å®¹</li>
<li>å®˜æ–¹é•¿æœŸç»´æŠ¤ï¼ˆé¢„è®¡ç»´æŠ¤è‡³ 2025ï¼‰</li>
</ul>
<p>è¿™è®©è¿ç§»å˜å¾—â€œä¸å…·å¤‡æ€§ä»·æ¯”â€ã€‚</p>
<p>å°¤å…¶æ˜¯ï¼š</p>
<blockquote>
<p><strong>è¿ç§»æˆæœ¬ï¼ˆé«˜ï¼‰ &gt; æ–°ç‰¹æ€§å¸¦æ¥çš„æ”¶ç›Šï¼ˆä½ï¼‰</strong></p>
</blockquote>
<p>åœ¨ä¼ä¸šç¯å¢ƒä¸­ï¼Œè¿™æ ·çš„å‡çº§è‡ªç„¶å°±å¤±å»äº†åŠ¨åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-39">å…­ã€Spring Boot 3.x ä»€ä¹ˆæ—¶å€™å€¼å¾—å‡çº§ï¼Ÿâ€”â€”åŸºäºæ”¶ç›Šçš„æŠ€æœ¯å†³ç­–æ¨¡å‹</h2>
<p>è™½ç„¶å‰æ–‡è¯¦ç»†åˆ†æäº†å¤§é‡ç»„ç»‡æš‚ç¼“å‡çº§çš„åŸå› ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ Spring Boot 3.x ä¸å€¼å¾—é‡‡ç”¨ã€‚ç›¸åï¼Œåªè¦æ»¡è¶³ç‰¹å®šæ¡ä»¶ï¼Œâ€œæ¨è¿Ÿå‡çº§â€æ‰æ˜¯é£é™©æœ€ä½çš„ç­–ç•¥ï¼›è€Œå½“ç³»ç»Ÿè¿›å…¥ä¸€å®šå¢é•¿é˜¶æ®µæ—¶ï¼Œç»§ç»­åœç•™åœ¨ 2.x æ‰æ˜¯çœŸæ­£æ˜‚è´µçš„é€‰æ‹©ã€‚</p>
<p>æœ¬ç« åŸºäºå·¥ç¨‹å¯é‡åŒ–çš„æŒ‡æ ‡ï¼Œå»ºç«‹ä¸€ä¸ªâ€œå‡çº§è§¦å‘æ¨¡å‹â€ï¼ˆUpgrade Trigger Modelï¼ŒUTMï¼‰ï¼Œå¸®åŠ©å›¢é˜Ÿåˆ¤æ–­æ˜¯å¦åº”å½“è¿›è¡Œè¿ç§»ã€‚</p>
<hr/>
<h3 data-id="heading-40">6.1 è§¦å‘æ¡ä»¶ä¸€ï¼šä½ çš„ç³»ç»Ÿå·²ç»å¼€å§‹å—é™äºæ—§ç‰ˆ JDK/JVM çš„æ€§èƒ½ä¸æ”¯æŒå‘¨æœŸ</h3>
<p>Spring Boot 3.x å¼ºåˆ¶è¦æ±‚ <strong>Java 17+</strong>ï¼Œè¿™ä¸ä»…æ˜¯è¯­æ³•ç‰¹æ€§å˜åŒ–ï¼Œæ›´æ˜¯ <strong>JVM å±‚é¢çš„æ€§èƒ½è´¨å˜</strong>ã€‚</p>
<p>ä½ åº”è¯¥ä¼˜å…ˆå‡çº§ï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ul>
<li>GC å‹åŠ›å¼€å§‹é¢‘ç¹å½±å“å»¶è¿Ÿï¼Œä½†æ— æ³•ä½¿ç”¨ JDK17+ çš„ <strong>ZGC / Shenandoah</strong></li>
<li>æœåŠ¡ QPS å¿«é€Ÿå¢é•¿ï¼Œç³»ç»Ÿ CPU é•¿æœŸé£™é«˜ï¼ˆJava 17 å¸¦æ¥å®é™…å¯è§‚çš„æ€§èƒ½æå‡ï¼‰</li>
<li>éœ€è¦åˆ©ç”¨ <strong>Recordã€Switch æ¨¡å¼åŒ¹é…ã€Virtual Threadsï¼ˆJava 21ï¼‰</strong> è¿›è¡Œé‡æ„</li>
</ul>
<blockquote>
<p>ç®€å•æ¥è¯´ï¼š<strong>å¦‚æœä½ æ­£åœ¨ä¸ºæ€§èƒ½èŠ±é’±ï¼ˆæ‰©å®¹/åŠ å®ä¾‹ï¼‰ï¼Œå‡çº§æˆæœ¬ï¼ˆå½“ä½ é‡åˆ°æ¶æ„å‡çº§çš„æ—¶å€™ï¼‰å¾€å¾€æ¯”æ‰©æœºå™¨æ›´ä¾¿å®œ</strong>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-41">6.2 è§¦å‘æ¡ä»¶äºŒï¼šç³»ç»Ÿå¼€å§‹éœ€è¦ AOTã€Native Imageã€å¯è§‚æµ‹æ€§ç­‰ç°ä»£èƒ½åŠ›</h3>
<p>Spring Boot 3.x æ˜¯ä¸ºä¸‹é¢è¿™äº›åœºæ™¯å‡†å¤‡çš„ï¼š</p>
<ul>
<li>
<p><strong>Native Image</strong>ï¼ˆGraalVMï¼‰ï¼šæ˜¾è‘—å‡å°‘å†·å¯åŠ¨æ—¶é—´ï¼Œéå¸¸é€‚åˆ</p>
<ul>
<li>Serverless</li>
<li>Kubernetes çŸ­ç”Ÿå‘½å‘¨æœŸ Pod</li>
<li>CLI å·¥å…·ä¸è¾¹ç¼˜æœåŠ¡</li>
</ul>
</li>
<li>
<p><strong>AOT</strong>ï¼šæå‰ç”Ÿæˆéƒ¨åˆ†è¿è¡ŒæœŸå¤„ç†ï¼ˆåå°„/ä»£ç†ï¼‰ï¼Œå‡å°‘å¯åŠ¨æ—¶é—´ä¸å†…å­˜</p>
</li>
<li>
<p><strong>Micrometer 1.10+ &amp; Observability API</strong>ï¼šæ–°çš„é“¾è·¯è¿½è¸ªæ¨¡å‹æ›´è§„èŒƒã€æ›´æ˜“æ‰©å±•</p>
</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨æ„å»ºï¼š</p>
<ul>
<li>é«˜å¹¶å‘ç³»ç»Ÿ</li>
<li>å¾®æœåŠ¡è§„æ¨¡è¶…è¿‡åä¸ª</li>
<li>éƒ¨ç½²åœ¨ Serverless / Function ç¯å¢ƒ</li>
<li>å¯¹å¯åŠ¨é€Ÿåº¦å’Œå†…å­˜æ•æ„Ÿçš„ SaaS äº§å“</li>
</ul>
<p>é‚£ <em>ä¸å‡çº§</em> åè€ŒæŸå¤±æ›´å¤§ã€‚</p>
<hr/>
<h3 data-id="heading-42">6.3 è§¦å‘æ¡ä»¶ä¸‰ï¼šæŠ€æœ¯å€ºåœ¨æŒç»­ç´¯ç§¯ï¼Œå‡çº§éš¾åº¦æ­£åœ¨æŒ‡æ•°çº§å¢é•¿</h3>
<p>é—ç•™ç³»ç»ŸæŠ€æœ¯å€ºå…·æœ‰â€œå¤åˆ©æ•ˆåº”â€ï¼Œè¡¨ç°ä¸ºï¼š</p>
<ul>
<li>é¡¹ç›®ä¾èµ–é“¾è€æ—§ï¼Œå·²ç»å‡ºç°å¤§é‡â€œä¸ç»´æŠ¤åº“â€</li>
<li>æ–°åŠŸèƒ½éš¾ä»¥å¼•å…¥ç°ä»£æ¡†æ¶ï¼ˆSpring AIã€Spring Authorization Server ç­‰ï¼‰</li>
<li>å¼€å‘è€… onboarding æˆæœ¬è¶Šæ¥è¶Šé«˜</li>
<li>CI/CD ä¸éƒ¨ç½²ç¯å¢ƒå¼€å§‹å¯¹æ—§ç‰ˆæœ¬äº§ç”Ÿä¸å…¼å®¹ï¼ˆå¦‚æ—§ç‰ˆæ„å»ºæ’ä»¶ï¼‰</li>
</ul>
<p><strong>è¶Šæ™šå‡çº§ï¼Œæˆæœ¬è¶Šä¸æ˜¯çº¿æ€§å¢é•¿ï¼Œè€Œæ˜¯å‘ˆç°æŒ‡æ•°å¼è†¨èƒ€</strong>ã€‚</p>
<p>å®é™…æµ‹ç®—ä¸­å¸¸è§çš„ç°è±¡ï¼š</p>





















<table><thead><tr><th>ç³»ç»ŸçŠ¶æ€</th><th>å‡çº§æˆæœ¬</th></tr></thead><tbody><tr><td>Spring Boot 2.6 â†’ 2.7</td><td>è¾ƒä½ï¼Œå¯æ§</td></tr><tr><td>Spring Boot 2.6 â†’ 3.0</td><td>ä¸­é«˜ï¼Œéœ€è¦å¤§è§„æ¨¡ namespace æ”¹åŠ¨</td></tr><tr><td>Spring Boot 2.0 â†’ 3.0</td><td>æé«˜ï¼Œå¾€å¾€éœ€è¦â€œé‡æ–°æ­å»ºé¡¹ç›®éª¨æ¶â€</td></tr></tbody></table>
<blockquote>
<p>å›¢é˜Ÿåº”è¯¥å®šæœŸåšä¸€æ¬¡â€œå‡çº§çª—å£è¯„ä¼°â€ï¼Œé¿å…è¿›å…¥æ— æ³•å‡çº§çš„çŠ¶æ€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-43">6.4 è§¦å‘æ¡ä»¶å››ï¼šä½ çš„ç»„ç»‡æ­£åœ¨ç»å†æ¶æ„è°ƒæ•´æˆ–å¾®æœåŠ¡æ‹†åˆ†</h3>
<p>é‡æ„ã€æ‹†åˆ†ã€æ¨¡å—åŒ–æ”¹é€ æ˜¯æœ€é€‚åˆå‡çº§çš„æ—¶é—´ç‚¹ï¼Œå› ä¸ºï¼š</p>
<ul>
<li>åæ­£è¦æ”¹ä»£ç  â†’ å¯ä»¥é¡ºå¸¦è¿ç§»åˆ° Spring Boot 3.x</li>
<li>å­æ¨¡å—å¯ä»¥å…ˆå‡çº§ï¼Œä¸»ç³»ç»Ÿä¿æŒä¸åŠ¨ â†’ é£é™©å¯æ§</li>
<li>é€‚åˆé¡ºä¾¿å¼•å…¥ Java 17 çš„æ–°ç¼–ç¨‹æ¨¡å‹</li>
</ul>
<p><strong>è¿ç§»æœ€å¥½ä¸æ¶æ„å˜åŒ–ä¸€èµ·åšï¼Œè€Œä¸æ˜¯åœ¨ç³»ç»Ÿç¨³å®šæœŸåšã€‚</strong></p>
<hr/>
<h3 data-id="heading-44">åˆ¤æ–­é€»è¾‘æ¨¡å‹ï¼ˆUTMï¼‰</h3>
<p>å½“é‡åˆ°ä¸‹é¢æƒ…å†µæ—¶ï¼Œéœ€è¦è€ƒè™‘å‡çº§ Spring Boot 3.x ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ€§èƒ½æˆ–å¯è§‚æµ‹æ€§é‡åˆ°ç“¶é¢ˆ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æœ‰ Native/AOT/Modern JVM çš„éœ€æ±‚</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æŠ€æœ¯å€ºå¿«é€Ÿç´¯ç§¯</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ­£åœ¨è¿›è¡Œæ¶æ„æ›´è¿­æˆ–æœåŠ¡æ‹†åˆ†</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ–°ç‰¹æ€§ï¼ˆå¦‚ Spring AIï¼‰å¿…é¡»ä¾èµ– 3.x</li>
</ul>
<p>åªè¦æ»¡è¶³ä»¥ä¸Šä»»æ„ä¸¤æ¡ï¼Œå‡çº§ä»â€œå¯é€‰â€å˜ä¸ºâ€œæ¨èâ€ï¼›æ»¡è¶³ä¸‰æ¡ä»¥ä¸Šï¼Œå‡çº§å‡ ä¹æ˜¯â€œå¿…é€‰â€ã€‚</p>
<hr/>
<h2 data-id="heading-45">ä¸ƒã€ç»“è¯­ï¼šSpring Boot 3.x çš„å‡çº§ä¸æ˜¯å†²åŠ¨ï¼Œè€Œæ˜¯å·¥ç¨‹ç®¡ç†</h2>
<p>Spring Boot 3.0 çš„å‡çº§äº‰è®®ï¼Œè¡¨é¢ä¸Šçœ‹æ˜¯â€œæŠ€æœ¯ç¤¾åŒºåˆ†æ­§â€ï¼Œä½†æœ¬è´¨ä¸Šæ˜¯ä¸€åœº<strong>å·¥ç¨‹ç®¡ç†ä¸é£é™©æ§åˆ¶çš„åšå¼ˆ</strong>ã€‚</p>
<p>å¯¹æ–°é¡¹ç›®è€Œè¨€â€”â€”
<strong>3.x æ˜¯æœ€ä½³èµ·ç‚¹ï¼Œæ²¡æœ‰ç†ç”±é€‰æ‹©è½åç‰ˆæœ¬ã€‚</strong></p>
<p>å¯¹æˆç†Ÿç³»ç»Ÿè€Œè¨€â€”â€”
<strong>ç¨³å®šä¼˜å…ˆã€å…¼å®¹ä¼˜å…ˆã€ä¸šåŠ¡éœ€æ±‚ä¼˜å…ˆï¼›è°¨æ…ä¸æ˜¯ä¿å®ˆï¼Œè€Œæ˜¯ä¸“ä¸šã€‚</strong></p>
<p>å¯¹æ•´ä¸ªè¡Œä¸šè€Œè¨€â€”â€”
Spring Boot 3.x çš„å‡ºç°æ ‡å¿—ç€ Java ç”Ÿæ€å…¨é¢è¿›å…¥â€œå JavaEE æ—¶ä»£â€ï¼š</p>
<ul>
<li>Jakarta EE æˆä¸ºä¸»æµå‘½åç©ºé—´</li>
<li>Java 17+ æˆä¸ºäº‹å®æ ‡å‡†</li>
<li>åŸç”Ÿé•œåƒä¸ AOT è¿›å…¥ä¼ä¸šçº§æ¡†æ¶æ ¸å¿ƒ</li>
<li>å¯è§‚æµ‹æ€§ã€å¯ä¿¡åº¦ä¸æ€§èƒ½æˆä¸ºé¡¶å±‚è®¾è®¡</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š
<strong>å³ä¾¿ä½ ç°åœ¨ä¸å‡çº§ï¼Œä½ è¿Ÿæ—©è¦å‡çº§ã€‚</strong>
ä½ çš„å›¢é˜Ÿèƒ½åšçš„ä¸æ˜¯é¿å…å‡çº§ï¼Œè€Œæ˜¯å†³å®šâ€”â€”
<strong>ä»€ä¹ˆæ—¶å€™å‡çº§ã€ä»¥ä»€ä¹ˆæ–¹å¼å‡çº§ã€å¦‚ä½•æŠŠé£é™©å‹åˆ°æœ€ä½ã€‚</strong></p>
<p>æœ€ç»ˆï¼Œä¼˜ç§€çš„å·¥ç¨‹å¸ˆä¸ä¼˜ç§€çš„å›¢é˜Ÿéƒ½å¿…é¡»é¢å¯¹æŠ€æœ¯å€ºåŠ¡ï¼Œä½†åªæœ‰ä¼˜ç§€çš„å›¢é˜Ÿèƒ½åœ¨æ­£ç¡®çš„æ—¶æœºè§£å†³å®ƒï¼Œè€Œä¸æ˜¯è®©å®ƒæ‹–å®ç³»ç»Ÿçš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-182 Elasticsearch å€’æ’ç´¢å¼•åº•å±‚æ‹†è§£ï¼šTerms å­—å…¸ã€FSTã€SkipList ä¸ Lucene ç´¢å¼•æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7582815307439734835</link>    <guid>https://juejin.cn/post/7582815307439734835</guid>    <pubDate>2025-12-13T02:50:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582815307439734835" data-draft-id="7582809606067634202" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-182 Elasticsearch å€’æ’ç´¢å¼•åº•å±‚æ‹†è§£ï¼šTerms å­—å…¸ã€FSTã€SkipList ä¸ Lucene ç´¢å¼•æ–‡ä»¶"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Elasticsearch"/> <meta itemprop="datePublished" content="2025-12-13T02:50:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-182 Elasticsearch å€’æ’ç´¢å¼•åº•å±‚æ‹†è§£ï¼šTerms å­—å…¸ã€FSTã€SkipList ä¸ Lucene ç´¢å¼•æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T02:50:19.000Z" title="Sat Dec 13 2025 02:50:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<p>åœºæ™¯ï¼šæƒ³æŠŠ ESã€Œä¸ºä»€ä¹ˆå¿«/ä¸ºä»€ä¹ˆå å†…å­˜/ä¸ºä»€ä¹ˆå†™å…¥è¦ mergeã€è®²æ¸…æ¥šï¼Œå¿…é¡»ä¸‹æ²‰åˆ° Lucene çš„å€’æ’ç´¢å¼•ä¸æ–‡ä»¶ç»“æ„
ç»“è®ºï¼šæŸ¥è¯¢é“¾è·¯æœ¬è´¨æ˜¯ Term æŸ¥æ‰¾ï¼ˆtim/tip + FSTï¼‰â†’ postings è¯»å–ï¼ˆdoc ç­‰ï¼‰â†’ postings åˆå¹¶ï¼ˆSkipList/è·³è·ƒï¼‰
äº§å‡ºï¼šä¸€å¥—ä»æ¦‚å¿µåˆ°æ–‡ä»¶åç¼€ã€åˆ°æ•°æ®ç»“æ„é€‰æ‹©ã€åˆ°æŸ¥è¯¢æ‰§è¡Œçš„å¯å¤ç”¨è®²è§£æ¡†æ¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d937432ec0ba4eaa94d6ed7fdf2134bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=Ph%2FrjxkbrTlGLY4jCYV78Fmo3wo%3D" alt="å¤§æ•°æ®-182 Elasticsearch å€’æ’ç´¢å¼•åº•å±‚æ‹†è§£ï¼šTerms å­—å…¸ã€FSTã€SkipList ä¸ Lucene ç´¢å¼•æ–‡ä»¶" loading="lazy"/></p>
<h2 data-id="heading-1">ç‰ˆæœ¬çŸ©é˜µ</h2>





























<table><thead><tr><th>ç±»å‹</th><th>ç‰ˆæœ¬/è¯´æ˜</th><th>çŠ¶æ€</th><th>ç”¨é€”è¯´æ˜</th></tr></thead><tbody><tr><td>Lucene</td><td>æœ€æ–°ç‰ˆæœ¬ï¼š10.3.2</td><td>æ–‡æ¡£æ ¸å¯¹ï¼ˆæœªå®æµ‹ï¼‰</td><td>ç”¨äºâ€œLucene å½“å‰ç‰ˆæœ¬/å¹´ä»½â€è¡¨è¿°</td></tr><tr><td>Elasticsearch</td><td>9.2.2 å·²å‘å¸ƒ</td><td>æ–‡æ¡£æ ¸å¯¹ï¼ˆæœªå®æµ‹ï¼‰</td><td>ç”¨äºâ€œES 9.x å·²è¿›å…¥ä¸»çº¿â€çš„è¡¨è¿°</td></tr><tr><td>ES è¿ç§»è·¯å¾„</td><td>è¿ç§»åˆ° 9.0 éœ€å…ˆåˆ°æœ€åä¸€ä¸ª 8.x</td><td>æ–‡æ¡£æ ¸å¯¹ï¼ˆæœªå®æµ‹ï¼‰</td><td>ç”¨äºâ€œ8â†’9 å‡çº§è·¯å¾„â€æé†’</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ea98eb79a614e13b8f30fdd67f8ec65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=MUFnrIiTtLJbbHeWF7r8X4flxHg%3D" alt="Elasticsearch" loading="lazy"/></p>
<h2 data-id="heading-2">Elasticsearch æ•°æ®ç»“æ„</h2>
<h3 data-id="heading-3">å€’æ’ç´¢å¼•</h3>
<h4 data-id="heading-4">æ¦‚å¿µæ¦‚è¿°</h4>
<p>å€’æ’ç´¢å¼•æ˜¯å…¨æ–‡æ£€ç´¢çš„æ ¹åŸºï¼Œç†è§£äº†å€’æ’ç´¢å¼•ä¹‹åæ‰èƒ½ç®—æ˜¯å…¥é—¨äº†å…¨æ–‡æ£€ç´¢çš„é¢†åŸŸï¼Œå€’æ’ç´¢å¼•çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä¹Ÿå¾ˆå¥½ç†è§£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1c373176d6d4dff88825e7e5a419ae1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=ntKl1QeUSr6hycGMuZ%2B16glscnY%3D" alt="Elasticsearch å€’æ’ç´¢å¼•" loading="lazy"/>
å€’æ’ç´¢å¼•ï¼ˆInverted Indexï¼‰æ˜¯ä¿¡æ¯æ£€ç´¢ç³»ç»Ÿä¸­å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒç”±ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li>
<p><strong>ç´¢å¼•è¡¨ï¼ˆTerms Dictionaryï¼‰</strong>ï¼š</p>
<ul>
<li>ç”±æ–‡æ¡£é›†åˆä¸­æ‰€æœ‰ç‹¬ç«‹çš„å…³é”®è¯ï¼ˆTermï¼‰ç»„æˆçš„æœ‰åºåˆ—è¡¨</li>
<li>æ¯ä¸ªTermé€šå¸¸æ˜¯ç»è¿‡åˆ†è¯å’Œæ ‡å‡†åŒ–å¤„ç†åçš„ç»“æœï¼ˆå¦‚è½¬ä¸ºå°å†™ã€å»é™¤åœç”¨è¯ç­‰ï¼‰</li>
<li>åœ¨å®é™…å®ç°ä¸­ï¼Œç´¢å¼•è¡¨å¸¸é‡‡ç”¨Bæ ‘æˆ–å“ˆå¸Œè¡¨ç­‰æ•°æ®ç»“æ„æ¥åŠ é€ŸæŸ¥æ‰¾</li>
<li>ç¤ºä¾‹ï¼šå¯¹äºæ–‡æ¡£"the quick brown fox"ï¼Œå¤„ç†åå¯èƒ½å¾—åˆ°["quick", "brown", "fox"]ä¸‰ä¸ªTerm</li>
</ul>
</li>
<li>
<p><strong>å€’æ’è¡¨ï¼ˆPosting Listï¼‰</strong>ï¼š</p>
<ul>
<li>è®°å½•æ¯ä¸ªTermåœ¨å“ªäº›æ–‡æ¡£ä¸­å‡ºç°çš„ä¿¡æ¯é›†åˆ</li>
<li>æ¯ä¸ªPostingé€šå¸¸åŒ…å«ï¼š
<ul>
<li>æ–‡æ¡£IDï¼ˆDocIDï¼‰</li>
<li>è¯é¢‘ï¼ˆTerm Frequencyï¼‰</li>
<li>ä½ç½®ä¿¡æ¯ï¼ˆPositionï¼Œç”¨äºçŸ­è¯­æŸ¥è¯¢ï¼‰</li>
</ul>
</li>
<li>ç¤ºä¾‹ï¼šTerm"fox"çš„Posting Listå¯èƒ½æ˜¯[(doc1, 2, [5,12]), (doc3, 1, [7])]ï¼Œè¡¨ç¤ºåœ¨doc1ä¸­å‡ºç°2æ¬¡ï¼ˆä½ç½®5å’Œ12ï¼‰ï¼Œåœ¨doc3ä¸­å‡ºç°1æ¬¡ï¼ˆä½ç½®7ï¼‰</li>
</ul>
</li>
</ol>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼ˆå¦‚Elasticsearchã€Luceneç­‰æœç´¢å¼•æ“ï¼‰ï¼š</p>
<ul>
<li>ç´¢å¼•è¡¨é€šå¸¸å­˜å‚¨åœ¨å†…å­˜ä¸­ä»¥å®ç°å¿«é€ŸæŸ¥æ‰¾</li>
<li>å€’æ’è¡¨é‡‡ç”¨å‹ç¼©å­˜å‚¨æŠ€æœ¯ï¼ˆå¦‚å·®å€¼ç¼–ç ã€ä½å›¾ç­‰ï¼‰æ¥å‡å°‘å­˜å‚¨ç©ºé—´</li>
<li>è¿˜ä¼šç»´æŠ¤é¢å¤–çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆå¦‚DF-æ–‡æ¡£é¢‘ç‡ï¼‰ç”¨äºæŸ¥è¯¢ä¼˜åŒ–</li>
</ul>
<h4 data-id="heading-5">å¦‚æœå­˜å‚¨ä¸€ä¸ªå€’æ’ç´¢å¼•æ•°æ®ï¼Ÿé€‰æ‹©å“ªç§æ•°æ®ç»“æ„ï¼Ÿ</h4>
<p>å…¨æ–‡æœç´¢å¼•æ“é€šå¸¸æ˜¯éœ€è¦å­˜å‚¨å¤§é‡çš„æ–‡æœ¬ï¼Œä¸ä»…ä»…æ˜¯Postingså¯èƒ½ä¼šæ˜¯éå¸¸å·¨å¤§ï¼ŒåŒæ ·Dictionaryçš„å¤§å°æå¯èƒ½ä¹Ÿæ˜¯éå¸¸åºå¤§ï¼ŒçœŸæ­£çš„æœç´¢å¼•æ“çš„å€’æ’ç´¢å¼•å®ç°éƒ½æå…¶å¤æ‚ï¼Œå› ä¸ºå®ƒç›´æ¥å½±å“äº†æœç´¢æ€§èƒ½å’ŒåŠŸèƒ½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fd59f7976674d62b27b1a48d8d0f3d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=GXfbSCit5Zqtdjlx7hWtRkA65oU%3D" alt="Elasticsearch å­˜å‚¨æ•°æ®" loading="lazy"/>
Luceneä½œä¸ºä¸€æ¬¾é«˜æ€§èƒ½çš„å…¨æ–‡æ£€ç´¢å¼•æ“åº“ï¼Œå…¶å®ç°é‡‡ç”¨äº†å¤šé¡¹å…ˆè¿›æŠ€æœ¯æ¥ä¿è¯ç´¢å¼•çš„é«˜æ•ˆæ€§å’Œå¯é æ€§ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒç‰¹æ€§çš„è¯¦ç»†è¯´æ˜ï¼š</p>
<ol>
<li>ç´¢å¼•æŒä¹…åŒ–æœºåˆ¶ï¼š</li>
</ol>
<ul>
<li>é‡‡ç”¨åˆ†æ®µ(segment)å­˜å‚¨ç­–ç•¥ï¼Œæ¯ä¸ªsegmentéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å€’æ’ç´¢å¼•</li>
<li>æ”¯æŒå°†ç´¢å¼•æ•°æ®åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Š</li>
<li>ä½¿ç”¨ç‰¹æ®Šçš„æ–‡ä»¶æ ¼å¼(å¦‚.fdt, .fdxç­‰)ç»„ç»‡ç´¢å¼•æ•°æ®</li>
<li>æ”¯æŒç´¢å¼•å‹ç¼©ä»¥å‡å°‘å­˜å‚¨ç©ºé—´å ç”¨</li>
</ul>
<ol start="2">
<li>é«˜æ€§èƒ½å†™å…¥è®¾è®¡ï¼š</li>
</ol>
<ul>
<li>é‡‡ç”¨å†™å…¥ç¼“å†²æœºåˆ¶ï¼Œå…ˆåœ¨å†…å­˜ä¸­æ„å»ºç´¢å¼•</li>
<li>å®šæœŸå°†å†…å­˜ä¸­çš„ç´¢å¼•flushåˆ°ç£ç›˜å½¢æˆæ–°çš„segment</li>
<li>æ”¯æŒè¿‘å®æ—¶çš„NRT(Near Real-Time)æœç´¢</li>
<li>é€šè¿‡åˆå¹¶(merge)ç­–ç•¥ä¼˜åŒ–segmentæ•°é‡</li>
</ul>
<ol start="3">
<li>æ ¸å¿ƒæ•°æ®ç»“æ„ä¸ç®—æ³•ï¼š</li>
</ol>
<ul>
<li>ä½¿ç”¨FST(Finite State Transducer)å®ç°é«˜æ•ˆè¯å…¸æŸ¥æ‰¾</li>
<li>é‡‡ç”¨è·³è¡¨(SkipList)åŠ é€Ÿå€’æ’é“¾çš„éå†</li>
<li>å®ç°åŸºäºBM25çš„è¯„åˆ†ç®—æ³•</li>
<li>æ”¯æŒå¤šç§æŸ¥è¯¢ä¼˜åŒ–æŠ€æœ¯ï¼Œå¦‚æŸ¥è¯¢é‡å†™å’Œç¼“å­˜</li>
</ul>
<ol start="4">
<li>å®é™…åº”ç”¨åœºæ™¯ï¼š</li>
</ol>
<ul>
<li>ç”µå•†å¹³å°çš„å•†å“æœç´¢(å¦‚Amazon)</li>
<li>ä¼ä¸šæ–‡æ¡£ç®¡ç†ç³»ç»Ÿ</li>
<li>æ—¥å¿—åˆ†æç³»ç»Ÿ(å¦‚ELK Stack)</li>
<li>ç¤¾äº¤åª’ä½“çš„å†…å®¹æ£€ç´¢</li>
</ul>
<p>Luceneé€šè¿‡è¿™ç§ç²¾å¿ƒè®¾è®¡çš„æ¶æ„ï¼Œåœ¨ä¿è¯æ•°æ®æŒä¹…åŒ–çš„åŒæ—¶ï¼Œå®ç°äº†æ¥è¿‘å†…å­˜çº§åˆ«çš„æœç´¢æ€§èƒ½ï¼Œä½¿å…¶æˆä¸ºä¼—å¤šå•†ä¸šæœç´¢ç³»ç»Ÿçš„åŸºç¡€å¼•æ“ã€‚</p>
<h4 data-id="heading-6">Luceneç´¢å¼•æ–‡ä»¶åˆ†æ</h4>
<p>Lucene æ˜¯ä¸€ä¸ªåŸºäº Java çš„å¼€æºå…¨æ–‡æ£€ç´¢åº“ï¼Œç”± Doug Cutting äº 1999 å¹´åˆ›å»ºã€‚Lucene çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ä¸ºåº”ç”¨ç¨‹åºæä¾›é«˜æ•ˆçš„æ–‡æœ¬ç´¢å¼•å’Œæœç´¢èƒ½åŠ›ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æ„å»ºå¿«é€Ÿã€å¯æ‰©å±•çš„å…¨æ–‡æœç´¢åŠŸèƒ½ã€‚Lucene æœ¬èº«æ˜¯ä¸€ä¸ªä½çº§åº“ï¼Œå¹¶ä¸æä¾›å›¾å½¢ç•Œé¢æˆ–é«˜çº§åº”ç”¨åŠŸèƒ½ï¼Œå®ƒæ›´å¤šæ˜¯ä½œä¸ºä¸€ä¸ªåº•å±‚å·¥å…·è¢«é›†æˆåˆ°å…¶ä»–ç³»ç»Ÿæˆ–æ¡†æ¶ä¸­ã€‚</p>
<ul>
<li>
<p>ç´¢å¼•ï¼ˆIndexï¼‰ï¼š ç´¢å¼•æ˜¯ Lucene çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒæ˜¯ä¸ºäº†åŠ é€Ÿæœç´¢è¿‡ç¨‹è€Œåˆ›å»ºçš„æ•°æ®ç»“æ„ã€‚Lucene ä¼šå°†æ–‡æ¡£ä¸­çš„æ–‡æœ¬åˆ†è§£ä¸ºç§°ä¸º "å€’æ’ç´¢å¼•"ï¼ˆinverted indexï¼‰çš„å½¢å¼ã€‚å€’æ’ç´¢å¼•ç±»ä¼¼äºä¹¦çš„ç´¢å¼•é¡µï¼Œå®ƒåˆ—å‡ºäº†æ¯ä¸ªå…³é”®å­—åœ¨æ–‡æ¡£ä¸­çš„ä½ç½®ã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·æœç´¢ç‰¹å®šçš„è¯æˆ–çŸ­è¯­æ—¶ï¼ŒLucene å¯ä»¥å¿«é€ŸæŸ¥æ‰¾åˆ°åŒ…å«è¯¥è¯çš„æ–‡æ¡£ã€‚</p>
</li>
<li>
<p>æ–‡æ¡£ï¼ˆDocumentï¼‰ï¼š åœ¨ Lucene ä¸­ï¼Œæ–‡æ¡£æ˜¯æœç´¢å’Œç´¢å¼•çš„åŸºæœ¬å•å…ƒã€‚æ¯ä¸ªæ–‡æ¡£ç”±è‹¥å¹²å­—æ®µï¼ˆFieldï¼‰ç»„æˆï¼Œå­—æ®µå¯ä»¥åŒ…å«ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚æ ‡é¢˜ã€å†…å®¹ã€æ—¥æœŸç­‰ã€‚æ–‡æ¡£åœ¨ Lucene ä¸­é€šå¸¸ä¸æ•°æ®åº“ä¸­çš„ä¸€æ¡è®°å½•ç›¸å¯¹åº”ã€‚</p>
</li>
<li>
<p>å­—æ®µï¼ˆFieldï¼‰ï¼š å­—æ®µæ˜¯æ–‡æ¡£çš„ç»„æˆéƒ¨åˆ†ï¼Œæ¯ä¸ªå­—æ®µå¯ä»¥å­˜å‚¨ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€æ—¥æœŸç­‰ã€‚å­—æ®µå¯ä»¥æŒ‡å®šæ˜¯å¦è¢«ç´¢å¼•ï¼Œæ˜¯å¦è¢«å­˜å‚¨ï¼Œä»¥åŠæ˜¯å¦å¯ä»¥è¢«æœç´¢ç­‰ã€‚</p>
</li>
<li>
<p>åˆ†è¯å™¨ï¼ˆAnalyzerï¼‰ï¼š åˆ†è¯å™¨è´Ÿè´£å°†è¾“å…¥çš„æ–‡æœ¬åˆ†è§£ä¸ºè¯æ±‡å•å…ƒï¼ˆTokenï¼‰ï¼Œè¿™äº›è¯æ±‡å•å…ƒæ˜¯ Lucene ç”¨æ¥ç´¢å¼•å’Œæœç´¢çš„åŸºç¡€ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸­æ–‡æ–‡æœ¬ï¼Œåˆ†è¯å™¨éœ€è¦å°†è¿ç»­çš„å­—ç¬¦åˆ‡åˆ†ä¸ºæœ‰æ„ä¹‰çš„è¯æ±‡ï¼›å¯¹äºè‹±æ–‡æ–‡æœ¬ï¼Œå®ƒä¼šç§»é™¤æ ‡ç‚¹ç¬¦å·ã€è½¬æ¢å¤§å°å†™ç­‰ã€‚ä¸åŒçš„è¯­è¨€å’Œéœ€æ±‚å¯èƒ½éœ€è¦ä¸åŒçš„åˆ†è¯å™¨ã€‚</p>
</li>
<li>
<p>æŸ¥è¯¢ï¼ˆQueryï¼‰ï¼š Lucene æä¾›äº†å¤šç§ç±»å‹çš„æŸ¥è¯¢ï¼ˆQueryï¼‰ï¼Œå…è®¸ç”¨æˆ·æ„å»ºå¤æ‚çš„æœç´¢é€»è¾‘ï¼Œæ¯”å¦‚å¸ƒå°”æŸ¥è¯¢ï¼ˆBoolean Queryï¼‰ã€çŸ­è¯­æŸ¥è¯¢ï¼ˆPhrase Queryï¼‰ã€èŒƒå›´æŸ¥è¯¢ï¼ˆRange Queryï¼‰ç­‰ã€‚æŸ¥è¯¢çš„ä½œç”¨æ˜¯é€šè¿‡åŒ¹é…å€’æ’ç´¢å¼•æ¥æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ã€‚</p>
</li>
<li>
<p>è¯„åˆ†ï¼ˆScoringï¼‰ï¼š Lucene å¯¹æœç´¢ç»“æœè¿›è¡Œè¯„åˆ†ï¼Œæ ¹æ®æ–‡æ¡£ä¸æŸ¥è¯¢çš„åŒ¹é…ç¨‹åº¦è¿”å›ä¸€ä¸ªç›¸å…³æ€§å¾—åˆ†ï¼ˆRelevance Scoreï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒLucene ä½¿ç”¨ TF-IDFï¼ˆè¯é¢‘-é€†æ–‡æ¡£é¢‘ç‡ï¼‰ç®—æ³•æ¥è®¡ç®—å¾—åˆ†ï¼Œç¡®ä¿æ›´ç›¸å…³çš„æ–‡æ¡£æ’åœ¨æœç´¢ç»“æœçš„å‰é¢ã€‚</p>
</li>
<li>
<p>ç´¢å¼•å™¨ï¼ˆIndexerï¼‰ï¼š ç´¢å¼•å™¨è´Ÿè´£å°†æ–‡æ¡£ä¸­çš„æ•°æ®è½¬åŒ–ä¸ºå€’æ’ç´¢å¼•ã€‚Lucene çš„ç´¢å¼•è¿‡ç¨‹åŒ…æ‹¬å°†æ–‡æ¡£åˆ†è§£ä¸ºè¯æ±‡å•å…ƒï¼Œè¿‡æ»¤æ‰ä¸å¿…è¦çš„è¯ï¼ˆå¦‚åœç”¨è¯ï¼‰ï¼Œç„¶åå°†æœ‰æ„ä¹‰çš„è¯æ±‡å­˜å…¥å€’æ’ç´¢å¼•ä¸­ã€‚ç´¢å¼•å™¨è¿˜è´Ÿè´£å®šæœŸä¼˜åŒ–ç´¢å¼•ä»¥æé«˜æœç´¢æ•ˆç‡ã€‚</p>
</li>
<li>
<p>å­˜å‚¨ä¸åˆå¹¶ï¼ˆStorage and Mergingï¼‰ï¼š Lucene çš„ç´¢å¼•å­˜å‚¨æ˜¯åˆ†æ®µå¼çš„ï¼Œæ¯æ¬¡ç´¢å¼•æ“ä½œä¼šåˆ›å»ºæ–°çš„æ®µï¼ˆsegmentï¼‰ã€‚Lucene ä¼šå®šæœŸåˆå¹¶è¿™äº›æ®µä»¥å‡å°‘ç¢ç‰‡ã€æé«˜æ€§èƒ½ã€‚æ®µæ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ ·çš„è®¾è®¡ä½¿å¾— Lucene èƒ½å¤Ÿé«˜æ•ˆåœ°è¿›è¡Œå¹¶å‘æœç´¢å’Œç´¢å¼•æ“ä½œã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9696145108546719b92bfa79c6e58f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=0nfv0qS3ifq7ev3CLmR7eBVzytk%3D" alt="Elasticsearch ç´¢å¼•æ–‡ä»¶åˆ†æ" loading="lazy"/>
Luceneå°†ç´¢å¼•æ–‡ä»¶æ‹†åˆ†ä¸ºäº†å¤šä¸ªæ–‡ä»¶ï¼Œè¿™é‡Œä»…è®¨è®ºå€’æ’ç´¢å¼•çš„éƒ¨åˆ†ï¼š</p>
<ul>
<li>tipï¼šLuceneæŠŠç”¨äºå­˜å‚¨Termsçš„ç´¢å¼•æ–‡ä»¶å«Terms Indexï¼Œå®ƒçš„åç¼€æ˜¯ï¼štip</li>
<li>docï¼šæŠŠPostingsä¿¡æ¯åˆ†åˆ«å­˜å‚¨åœ¨docï¼Œåˆ†åˆ«è®°å½•Postingsçš„DocIdä¿¡æ¯å’ŒTermè¯é¢‘ä¿¡æ¯</li>
<li>timï¼šTerms Dictionaryçš„æ–‡ä»¶åç¼€ç§°ä¸ºtimï¼Œå®ƒæ˜¯Termä¸Positingsçš„å…³ç³»çº½å¸¦ï¼Œå­˜å‚¨äº†Termå’Œå…¶å¯¹åº”çš„Postingsæ–‡ä»¶æŒ‡é’ˆ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c281cc3e7f574815a0b22f9b92f83316~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=pyjDyv%2FzXxYbxX3kw%2BzJbxqaDW0%3D" alt="Elasticsearch ç´¢å¼•åˆ†æ" loading="lazy"/></p>
<ul>
<li>Term Dictionaryï¼šæŠŠTermæŒ‰å­—å…¸æ’åºï¼Œç„¶åç”¨äºŒåˆ†æ³•æŸ¥æ‰¾Termï¼ˆå­˜åœ¨ç£ç›˜ï¼‰åœ¨Luceneï¼ŒTerms Dictionaryè¢«å­˜å‚¨åœ¨ tim æ–‡ä»¶ä¸Šï¼Œå½“ä¸€ä¸ªSegmentçš„æ–‡æ¡£æ•°é‡è¶Šæ¥è¶Šå¤šçš„åŒæ—¶ Dictionary çš„è¯æ±‡ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œé‚£æŸ¥è¯¢æ•ˆç‡å¿…ç„¶ä¹Ÿä¼šè¶Šæ¥è¶Šæ…¢ã€‚å¦‚æœæœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç»“æ„ä¹Ÿä¸ºDictionaryæ„å»ºä¸€ä¸ªç´¢å¼•ï¼Œå°†Dictionaryçš„ç´¢å¼•è¿›ä¸€æ­¥å‹ç¼©ï¼Œè¿™å°±æ˜¯åæ¥çš„Terms Indexï¼ˆ.tipï¼‰ã€‚</li>
<li>TermIndexï¼šæ˜¯Term Dictionaryçš„ç´¢å¼•ï¼Œå­˜Termçš„å‰ç¼€ï¼Œå’Œä¸è¯¥å‰ç¼€å¯¹åº”çš„Term Dictionaryä¸­çš„ç¬¬ä¸€ä¸ªTermçš„Blockçš„ä½ç½®ï¼Œæ‰¾åˆ°è¿™ä¸ªç¬¬ä¸€ä¸ªTermåä¼šå†å¾€åé¡ºåºæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡Termï¼ˆå­˜åœ¨å†…å­˜ï¼‰ã€‚</li>
</ul>
<p>å°èŠ‚ä¸€ä¸‹ï¼š</p>
<ul>
<li>é€šè¿‡Terms Indexï¼ˆtipï¼‰å¯ä»¥å¿«é€Ÿçš„åœ¨Terms Dictionary(tim)ä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„Termï¼Œä»¥åŠå®ƒå¯¹åº”çš„Postingsæ–‡ä»¶æŒ‡é’ˆï¼ˆæŒ‡å‘docï¼‰</li>
<li>Terms Index å®é™…ä¸Šä¸€ä¸ªæˆ–è€…å¤šä¸ªFSTç»„æˆçš„ï¼ŒSegmentä¸Šæ¯ä¸ªå­—æ®µéƒ½æœ‰è‡ªå·±çš„ä¸€ä¸ªFSTï¼ˆFST Indexï¼‰è®°å½•åœ¨tipä¸Šï¼ˆFSTç±»ä¼¼ä¸€ç§TRIEæ ‘ï¼‰</li>
</ul>
<h4 data-id="heading-7">Trie</h4>
<p>Trieè¢«ç§°ä½œå­—å…¸æ ‘ã€å‰ç¼€æ ‘ï¼ˆPrefix Treeï¼‰ã€å•è¯æŸ¥æ‰¾æ ‘ï¼šTrieæœç´¢å­—ç¬¦ä¸²çš„æ•ˆç‡ä¸»è¦è·Ÿå­—ç¬¦ä¸²çš„é•¿åº¦æœ‰å…³ï¼ˆO(len(å•è¯é•¿åº¦))ï¼‰
ä½¿ç”¨Trieå­˜å‚¨ï¼š cat-&gt;1ï¼Œdog-&gt;2ï¼Œdoggy-&gt;3ï¼Œdoes-&gt;4ï¼Œcast-&gt;5ï¼Œadd-&gt;6ï¼Œè¿™å…­ä¸ªå•è¯æ—¶ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75c82369f3f04e06a7a32e52820043ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=nVF7pAKBqQ1qyVhQjWMGHYO9PNk%3D" alt="Elasticsearch Trie å­—å…¸æ ‘" loading="lazy"/>
Trieï¼ˆå­—å…¸æ ‘ï¼‰çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(len(key))ï¼Œå…¶ä¸­len(key)è¡¨ç¤ºæŸ¥è¯¢é”®çš„é•¿åº¦ã€‚è¿™ç§æ•°æ®ç»“æ„é€šè¿‡å…±äº«é”®çš„å‰ç¼€æ¥ä¼˜åŒ–å­˜å‚¨ç©ºé—´ï¼Œä½†æ— æ³•å…±äº«åç¼€éƒ¨åˆ†ã€‚</p>
<p>FSTï¼ˆFinite State Transducerï¼Œæœ‰é™çŠ¶æ€è½¬æ¢å™¨ï¼‰æ˜¯ä¸€ç§æ›´é«˜çº§çš„æ•°æ®ç»“æ„ï¼Œå®ƒä¸ä»…èƒ½å¤Ÿå…±äº«é”®çš„å‰ç¼€ï¼Œè¿˜èƒ½å…±äº«åç¼€ã€‚FSTå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ol>
<li>åŠŸèƒ½æ›´å…¨é¢ï¼šé™¤äº†èƒ½åˆ¤æ–­æŸ¥æ‰¾çš„Keyæ˜¯å¦å­˜åœ¨å¤–ï¼Œè¿˜èƒ½ç»™å‡ºç›¸åº”çš„è¾“å‡º(output)</li>
<li>åŒé‡ä¼˜åŒ–ï¼šåœ¨æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸Šéƒ½åšäº†æœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ–</li>
<li>å†…å­˜æ•ˆç‡ï¼šä¼˜åŒ–çš„æ•°æ®ç»“æ„ä½¿å¾—Luceneèƒ½å¤Ÿå°†æ•´ä¸ªTerm Indexå®Œå…¨åŠ è½½åˆ°å†…å­˜ä¸­</li>
</ol>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒFSTçš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¿«é€Ÿå®šä½ï¼šé€šè¿‡å…±äº«å‰åç¼€çš„ç‰¹æ€§å¿«é€Ÿå®šä½åˆ°ç›®æ ‡Term</li>
<li>è¾“å‡ºè·å–ï¼šåœ¨å®šä½åˆ°Termçš„åŒæ—¶è·å–å¯¹åº”çš„outputï¼ˆå³postingå€’æ’åˆ—è¡¨ï¼‰</li>
<li>æ€§èƒ½ä¼˜åŠ¿ï¼šç›¸æ¯”ä¼ ç»ŸTrieï¼ŒFSTèƒ½æ˜¾è‘—å‡å°‘å†…å­˜å ç”¨å¹¶æé«˜æŸ¥è¯¢æ•ˆç‡</li>
</ol>
<p>å…¸å‹åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>æœç´¢å¼•æ“ç´¢å¼•æ„å»ºï¼ˆå¦‚Luceneï¼‰</li>
<li>å¤§è§„æ¨¡è¯å…¸å­˜å‚¨</li>
<li>éœ€è¦å¿«é€Ÿå‰ç¼€/åç¼€æŸ¥è¯¢çš„ç³»ç»Ÿ</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨Luceneä¸­ï¼ŒFSTå¯ä»¥å°†æ•°åä¸‡ä¸ªTermåŠå…¶å¯¹åº”çš„postingåˆ—è¡¨é«˜æ•ˆåœ°å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå®ç°æ¯«ç§’çº§çš„æŸ¥è¯¢å“åº”ã€‚</p>
<h3 data-id="heading-8">SkipListåº”ç”¨</h3>
<h4 data-id="heading-9">æ¦‚å¿µæ¦‚è¿°</h4>
<p>å‡è®¾æŸä¸ªç´¢å¼•å­—æ®µä¸­æœ‰sexã€addresså­—æ®µï¼Œæ£€ç´¢æ¡ä»¶ä¸ºï¼šsex='female' and address='åŒ—äº¬'</p>
<ul>
<li>ç»™å®šæŸ¥è¯¢è¿‡æ»¤æ¡ä»¶ sex='female'çš„è¿‡ç¨‹å°±æ˜¯å…ˆä»Term indexæ‰¾åˆ°femaleåœ¨Term Dictionaryçš„å¤§æ¦‚ä½ç½®</li>
<li>å†ä» Term Dictionaryé‡Œç²¾ç¡®çš„æ‰¾åˆ° Female è¿™ä¸ªTermï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªposting listæˆ–è€…ä¸€ä¸ªæŒ‡å‘posting listä½ç½®çš„æŒ‡é’ˆ</li>
<li>æŸ¥è¯¢ address='åŒ—äº¬' çš„è¿‡ç¨‹ç±»ä¼¼çš„ï¼Œå¾—åˆ°ä¸€ä¸ªposting listæˆ–è€…ä¸€ä¸ªæŒ‡å‘posting listä½ç½®çš„æŒ‡é’ˆ</li>
</ul>
<p>éœ€è¦è®¡ç®—å‡º sex='female' and address='åŒ—äº¬' å°±æ˜¯æŠŠä¸¤ä¸ª positing liståšä¸€ä¸ªä¸åˆå¹¶ã€‚
ESä¸­ä½¿ç”¨SkipListæ•°æ®ç»“æ„ï¼ŒåŒæ—¶éå†sexå’Œaddressçš„posting listï¼Œç›¸äº’skipã€‚</p>
<h4 data-id="heading-10">æœ‰åºé›†åˆè®¡ç®—äº¤é›†</h4>
<pre><code class="hljs language-shell" lang="shell">list1: {1,2,3,4,20,21,50,60,70}
list2: {50,70}
</code></pre>
<h4 data-id="heading-11">æ±‚äº¤é›† æ‹‰é“¾æ³•</h4>
<p>ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘é¦–å…ƒç´ ï¼Œæ¯”è¾ƒå…ƒç´ çš„å¤§å°ï¼š</p>
<ul>
<li>å¦‚æœç›¸åŒï¼Œæ”¾å…¥ç»“æœé›†ï¼Œéšæ„ç§»åŠ¨ä¸€ä¸ªæŒ‡é’ˆ</li>
<li>å¦åˆ™ï¼Œç§»åŠ¨å€¼è¾ƒå°çš„ä¸€ä¸ªæŒ‡é’ˆï¼Œç›´åˆ°é˜Ÿå°¾</li>
</ul>
<p>è¿™ç§æ–¹æ³•çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>é›†åˆä¸­çš„å…ƒç´ æœ€å¤šè¢«æ¯”è¾ƒä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦Oï¼ˆNï¼‰</li>
<li>å¤šä¸ªæœ‰åºé›†åˆå¯ä»¥åŒæ—¶è¿›è¡Œ</li>
</ul>
<h4 data-id="heading-12">æ±‚äº¤é›† è·³è¡¨SkipList</h4>
<p>æœ‰åºé“¾è¡¨é›†åˆæ±‚äº¤é›†ï¼Œè·³è¡¨æ˜¯æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥å°†æœ‰åºé›†åˆæ±‚äº¤é›†çš„å¤æ‚åº¦æœ‰Oï¼ˆNï¼‰é™è‡³Oï¼ˆLogï¼ˆNï¼‰ï¼‰
å¦‚æœä½¿ç”¨æ‹‰é“¾æ³•ï¼Œä¼šå‘ç°æ¯ä¸ªå…ƒç´ éƒ½è¦è¢«æ¯”å¯¹ä½†æ˜¯å…¶ä¸­å¾ˆå¤šéƒ½æ˜¯æ— æ•ˆæ¯”å¯¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºOï¼ˆNï¼‰ï¼Œæ‰€è°“è·³è¡¨å¯ä»¥æŠŠæ—¶é—´å¤æ‚ä¼˜åŒ–è‡³LogNï¼Œå°±æ˜¯å› ä¸ºè·³è¡¨å¯ä»¥è·³è¿‡å¾ˆå¤šæ— æ•ˆçš„å¯¹æ¯”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/259fb046c70847aa9b1e9f788d7cf1b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=9z9zk7A8Rk3l5dk7SbMMNCquWF8%3D" alt="Elasticsearch SkipList è·³è¡¨" loading="lazy"/>
è·³è¡¨çš„å®ç°ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69bc6033ea734104af82641616e2a3ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=45xpFhbepyNDSUWMKqqdQ9wFCX4%3D" alt="Elasticsearch è·³è¡¨çš„å®ç°" loading="lazy"/>
æœç´¢çš„è¿‡ç¨‹ï¼š</p>
<ul>
<li>ä»é¡¶å±‚é“¾è¡¨çš„é¦–å…ƒç´ å¼€å§‹ï¼Œä»å·¦å¾€å³æœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªå¤§äºæˆ–è€…ç­‰äºç›®æ ‡çš„å…ƒç´ ï¼Œæˆ–è€…åˆ°è¾¾å½“å‰å±‚é“¾è¡¨çš„å°¾éƒ¨</li>
<li>å¦‚æœè¯¥å…ƒç´ ç­‰äºç›®æ ‡å…ƒç´ ï¼Œåˆ™è¡¨æ˜è¯¥å…ƒç´ å·²ç»è¢«æ‰¾åˆ°</li>
<li>å¦‚æœè¯¥å…ƒç´ å¤§äºç›®æ ‡å…ƒç´ æˆ–å·²ç»åˆ°è¾¾é“¾è¡¨çš„å°¾éƒ¨ï¼Œåˆ™é€€å›åˆ°å½“å‰å±‚å‰ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åè½¬å…¥ä¸‹ä¸€å±‚è¿›è¡Œæœç´¢</li>
</ul>
<p>æ·»åŠ å…ƒç´ ï¼Œéšæœºå†³å®šæ–°æ·»åŠ å…ƒç´ çš„å±‚æ•°ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e31c2288120545dda4b7c8dc1da78c3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=h2MtHNSiTwFw95sEKBUAYcYtDNU%3D" alt="Elasticsearch è·³è¡¨æ·»åŠ å…ƒç´ " loading="lazy"/>
åˆ é™¤å…ƒç´ ï¼Œä¿®æ”¹è·³è¡¨çš„æœ‰æ•ˆå±‚æ•°ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56bd71657d554b18b6a7ce99709995f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766199018&amp;x-signature=kRJdwF8mM7wMh67XyPh%2Ftyvjbxo%3D" alt="Elasticsearch è·³è¡¨åˆ é™¤å…ƒç´ " loading="lazy"/></p>
<h2 data-id="heading-13">é”™è¯¯é€ŸæŸ¥</h2>








































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>è¯»è€…æ··æ·†Terms Dictionaryã€Terms Indexã€FSTæ¦‚å¿µ</td><td>ä¸‰ä¸ªå±‚çº§ï¼ˆè¯å…¸/ç´¢å¼•/å®ç°ç»“æ„ï¼‰æè¿°æ··ç”¨</td><td>æ˜ç¡®åŒºåˆ†å®šä¹‰ï¼š<br/>- <code>.tim</code>ä¸ºè¯å…¸å—<br/>- <code>.tip</code>ä¸ºè¯å…¸ç´¢å¼•ï¼ˆå¸¸ç”±FSTæ‰¿è½½ï¼‰<br/>- FSTæ˜¯ç´¢å¼•ç»“æ„ï¼Œéè¯å…¸æœ¬ä½“</td></tr><tr><td>"Terms Dictionaryå­˜ç£ç›˜ï¼ŒäºŒåˆ†æŸ¥æ‰¾"è¡¨è¿°è¿‡åº¦å…·ä½“åŒ–</td><td>Luceneå®é™…é‡‡ç”¨block+ç´¢å¼•ç»„åˆç»“æ„</td><td>ä¿®æ”¹ä¸ºï¼š"æŒ‰å­—å…¸åºç»„ç»‡ä¸ºblockï¼Œå¹¶ç”±<code>.tip</code>ç´¢å¼•åŠ é€Ÿå®šä½"</td></tr><tr><td>"å€’æ’è¡¨äº¤é›†å¤æ‚åº¦ä»O(N)é™åˆ°O(logN)"å¼•å‘è´¨ç–‘</td><td>è·³è¡¨ä¸»è¦å‡å°‘æ¯”è¾ƒ/å±€éƒ¨è·³è·ƒæˆæœ¬ï¼Œæ•´ä½“å¤æ‚åº¦ä»ä¸postingsé•¿åº¦ç›¸å…³</td><td>è°ƒæ•´ä¸ºï¼š"é€šè¿‡skip pointerså‡å°‘æ— æ•ˆæ‰«æï¼Œæ˜¾è‘—é™ä½å®é™…è€—æ—¶"</td></tr><tr><td>TF-IDFä¸BM25è¯„åˆ†ç®—æ³•æè¿°å‰åçŸ›ç›¾</td><td>æ–‡æ¡£æœªç»Ÿä¸€Lucene/ESçš„é»˜è®¤è¯„åˆ†æ¨¡å‹</td><td>æ˜ç¡®è¯´æ˜ï¼š<br/>- ä¸»æµé‡‡ç”¨BM25<br/>- TF-IDFä½œä¸ºå†å²/å¯é€‰æ¨¡å‹æåŠ</td></tr><tr><td>"ç´¢å¼•è¡¨é€šå¸¸å­˜å‚¨åœ¨å†…å­˜ä¸­"è¢«è¯¯è§£ä¸ºå…¨é‡é©»ç•™</td><td>æœªè¯´æ˜ç¼“å­˜ç­–ç•¥çš„å®é™…æƒ…å†µ</td><td>ä¿®æ­£ä¸ºï¼š".tip/FSTå¸¸å¯åŠ è½½æˆ–å¼ºç¼“å­˜ï¼›.tim/postingsé€šè¿‡mmap/OS cacheæé€Ÿ"</td></tr><tr><td>è¯»è€…è¯¯è®¤ä¸º.docæ–‡ä»¶ä»…å«docId/TF</td><td>æœªè¯´æ˜positions/payloadç­‰åˆ†æ–‡ä»¶å­˜å‚¨æœºåˆ¶</td><td>è¡¥å……è¯´æ˜ï¼š"ä¸åŒç»´åº¦æ•°æ®åˆ†æ–‡ä»¶å­˜å‚¨ï¼ˆå¦‚pos/payç­‰ï¼‰ï¼Œç»“æ„éšcodecå˜åŒ–"</td></tr></tbody></table>
<h2 data-id="heading-14">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-15">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-16">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-180 Java æ¥å…¥ FastDFSï¼šè‡ªç¼–è¯‘å®¢æˆ·ç«¯ä¸ Maven/Spring Boot å®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-17">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[.NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ4ï¼‰äº‹ä»¶å®æˆ˜]]></title>    <link>https://juejin.cn/post/7582787460418633770</link>    <guid>https://juejin.cn/post/7582787460418633770</guid>    <pubDate>2025-12-12T13:18:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582787460418633770" data-draft-id="7582808491607015478" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=".NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ4ï¼‰äº‹ä»¶å®æˆ˜"/> <meta itemprop="keywords" content="C#,.NET"/> <meta itemprop="datePublished" content="2025-12-12T13:18:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘è¦æ‹¿å¾®è½¯MVP"/> <meta itemprop="url" content="https://juejin.cn/user/1945461219656633"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            .NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ4ï¼‰äº‹ä»¶å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1945461219656633/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘è¦æ‹¿å¾®è½¯MVP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T13:18:22.000Z" title="Fri Dec 12 2025 13:18:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€æ–‡æˆ‘ä»¬å·²ç»å¤§è‡´ä»‹ç»äº†å…³äºäº‹ä»¶çš„åŸºç¡€å…¥é—¨ï¼Œç°åœ¨æˆ‘ä»¬æ¥ä¸€ä¸ªäº‹ä»¶çš„å®æˆ˜ï¼Œè®©å¤§å®¶æ›´åŠ æ·±å…¥çš„ç†è§£äº‹ä»¶ã€‚è¿™ä¸ªä»£ç ä¹Ÿæ˜¯è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå¦‚æœå¯¹è¿™ä¸ªæ¨¡å¼ä¸æ¸…æ¥šï¼Œå¯ä»¥çœ‹æˆ‘ä¸Šä¸€ä¸ªæ–‡ç« ï¼š<a href="https://juejin.cn/post/7582637280217595958" target="_blank" title="https://juejin.cn/post/7582637280217595958">.NETè¿›é˜¶â€”â€”æ·±å…¥ç†è§£å§”æ‰˜ï¼ˆ3ï¼‰äº‹ä»¶å…¥é—¨ä¸ºä»€ä¹ˆæˆ‘è¦æŠŠäº‹ä»¶æ”¾åœ¨å§”æ‰˜è¿™ä¸ªä¸“é¢˜é‡Œå‘¢ï¼Ÿä¸»è¦çš„åŸå› æ˜¯äº‹ä»¶æ˜¯å§”æ‰˜çš„é«˜çº§å°è£…ã€‚ æ¢å¥ - æ˜é‡‘</a></p>
<h2 data-id="heading-0">ä¸€ã€å‰æ™¯æè¦</h2>
<h3 data-id="heading-1">1.1 <code>EventHandler</code>ä»‹ç»</h3>
<p>æˆ‘ä»¬è¿™ä¸ªä»£ç ä¸­çš„å§”æ‰˜ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„<code>EventHandler</code>å§”æ‰˜ï¼š</p>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">delegate</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EventHandler</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>? sender, EventArgs e</span>)</span>;
</code></pre>
<p>è¿™ä¸ªå§”æ‰˜æ²¡æœ‰è¿”å›å€¼ï¼Œä½†éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯<code>object</code>ç±»å‹çš„ï¼Œä¸€ä¸ªæ˜¯<code>EventArgs</code>ç±»å‹çš„ï¼Œè¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå…¶å®ï¼Œ<code>object</code>ç±»å‹å°±æ˜¯è°ƒç”¨è€…ï¼Œå‰©ä¸‹çš„<code>EventArgs</code>å°±æ˜¯è¦ä¼ é€’çš„å‚æ•°ï¼Œæˆ‘è¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œæ¥ç€çœ‹ä¸‹å»ä½ å°±æ‡‚äº†ã€‚</p>
<h3 data-id="heading-2">1.2 å®æˆ˜èƒŒæ™¯ä»‹ç»</h3>
<h4 data-id="heading-3">åœºæ™¯èƒŒæ™¯</h4>
<p>ä½ ä½åœ¨ â€œå¹¸ç¦å°åŒºâ€ï¼Œç‰©ä¸šè´Ÿè´£é€šçŸ¥ä¸šä¸»åœæ°´ / åœç”µç­‰äº‹å®œï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€æ­¥ï¼šä¸šä¸»è®¢é˜…é€šçŸ¥</strong>å¼ ä¸‰ã€æå››ã€ç‹äº”å»ç‰©ä¸šå‰å°ç™»è®°ï¼šâ€œåœæ°´é€šçŸ¥ä¸€å®šè¦å‘Šè¯‰æˆ‘ï¼â€ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Â <code>+= è®¢é˜…äº‹ä»¶</code>ï¼‰ï¼›</li>
<li><strong>ç¬¬äºŒæ­¥ï¼šç‰©ä¸šå‡†å¤‡é€šçŸ¥å†…å®¹</strong>ç‰©ä¸šç¡®å®šï¼šâ€œæ˜å¤©ï¼ˆ2025-12-15ï¼‰ä¸Šåˆ 8 ç‚¹åˆ° 12 ç‚¹ï¼Œå°åŒºåœæ°´ 4 å°æ—¶ï¼ŒåŸå› æ˜¯æ°´ç®¡ç»´ä¿®â€ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Â <code>WaterStopNotice</code>Â å‚æ•°ï¼‰ï¼›</li>
<li><strong>ç¬¬ä¸‰æ­¥ï¼šç‰©ä¸šæŒ¨å®¶æŒ¨æˆ·é€šçŸ¥</strong>ç‰©ä¸šäººå‘˜ä¸Šé—¨ï¼Œå¯¹æ¯ä¸ªç™»è®°çš„ä¸šä¸»è¯´ï¼šâ€œæˆ‘æ˜¯å¹¸ç¦å°åŒºç‰©ä¸šï¼ˆ<code>sender</code>ï¼‰ï¼Œé€šçŸ¥ä½ ï¼šæ˜å¤© 8 ç‚¹ - 12 ç‚¹åœæ°´ 4 å°æ—¶ï¼ˆ<code>e</code>Â å‚æ•°ï¼‰â€ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Â <code>Invoke</code>Â ä¼ å‚ï¼‰ï¼›</li>
<li><strong>ç¬¬å››æ­¥ï¼šä¸šä¸»å“åº”é€šçŸ¥</strong>å¼ ä¸‰ï¼šâ€œçŸ¥é“äº†ï¼Œæˆ‘å›¤ç‚¹æ°´â€ï¼›æå››ï¼šâ€œæˆ‘æå‰æ´—å¥½è¡£æœâ€ï¼›ç‹äº”ï¼šâ€œæˆ‘æé†’çˆ¸å¦ˆåˆ«å¿˜æ¥æ°´â€ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Â <code>Buy</code>Â æ–¹æ³•æ‰§è¡Œä¸åŒé€»è¾‘ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-4">äºŒã€ä»£ç è¯¦æƒ…</h2>
<h3 data-id="heading-5">2.1 ä¼ é€’ä¿¡æ¯ç±»ï¼šWaterStopNotice</h3>
<pre><code class="hljs language-cs" lang="cs">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WaterStopNotice</span>:<span class="hljs-title">EventArgs</span>
    {
        <span class="hljs-keyword">public</span> DateTime StopTime { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// åœæ°´å¼€å§‹æ—¶é—´</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Duration { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }      <span class="hljs-comment">// åœæ°´æ—¶é•¿ï¼ˆå°æ—¶ï¼‰</span>
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Reason { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }     <span class="hljs-comment">// åœæ°´åŸå› </span>
    }
</code></pre>
<p>é¦–å…ˆï¼Œè¿™ä¸ªç±»æ˜¯æˆ‘ä»¬éœ€è¦ä¼ é€’çš„ä¿¡æ¯ç±»ï¼Œå¯ä»¥çœ‹åˆ°å®ƒæ˜¯ç»§æ‰¿è‡ª<code>EventArgs</code>ç±»ï¼Œæ‰€ä»¥è¿™ä¸ªç±»æ˜¯å¯ä»¥å½“æˆ<code>EventArgs</code>ç±»ä¼ é€’ä¿¡æ¯çš„ã€‚</p>
<h3 data-id="heading-6">2.2 å°åŒºç‰©ä¸šç±»ï¼šCommunityProperty</h3>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CommunityProperty</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> PropertyName { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// ç‰©ä¸šåç§°ï¼ˆæ¯”å¦‚â€œå¹¸ç¦å°åŒºç‰©ä¸šâ€ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Phone { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }        <span class="hljs-comment">// ç‰©ä¸šè”ç³»ç”µè¯</span>

    <span class="hljs-comment">// å®šä¹‰â€œåœæ°´é€šçŸ¥â€äº‹ä»¶ï¼ˆå¯¹å¤–æš´éœ²ï¼Œä¸šä¸»åªèƒ½è®¢é˜…/å–æ¶ˆï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler WaterStopEvent;

    <span class="hljs-comment">// ç‰©ä¸šå†…éƒ¨çš„â€œå‘é€šçŸ¥â€æ–¹æ³•ï¼ˆå¯¹åº”ä»£ç é‡Œçš„PublicShowï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">SendWaterStopNotice</span>()</span>
    {
        Console.WriteLine(<span class="hljs-string">$"ã€<span class="hljs-subst">{PropertyName}</span>ã€‘å¼€å§‹é€šçŸ¥ä¸šä¸»åœæ°´äº‹å®œï¼"</span>);

        <span class="hljs-comment">// å‡†å¤‡é€šçŸ¥è¯¦æƒ…ï¼ˆeå‚æ•°ï¼‰</span>
        WaterStopNotice notice = <span class="hljs-keyword">new</span> WaterStopNotice()
        {
            StopTime = <span class="hljs-keyword">new</span> DateTime(<span class="hljs-number">2025</span>, <span class="hljs-number">12</span>, <span class="hljs-number">15</span>, <span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>),
            Duration = <span class="hljs-number">4</span>,
            Reason = <span class="hljs-string">"å°åŒºä¸»æ°´ç®¡ç»´ä¿®"</span>
        };

        <span class="hljs-comment">// è§¦å‘äº‹ä»¶ï¼šæŒ¨å®¶æŒ¨æˆ·é€šçŸ¥ï¼ˆä¼ 2ä¸ªå‚æ•°ï¼šç‰©ä¸šè‡ªå·±+é€šçŸ¥è¯¦æƒ…ï¼‰</span>
        WaterStopEvent.Invoke(<span class="hljs-keyword">this</span>, notice);
    }
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°åœ¨è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªå±æ€§ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ªäº‹ä»¶ï¼š</p>
<pre><code class="hljs language-cs" lang="cs"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler WaterStopEvent;
</code></pre>
<p>è¿™ä¸ªäº‹ä»¶æ˜¯æŠŠ<code>EventHanlder</code>è¿™ä¸ªå§”æ‰˜å°è£…äº†ï¼Œæˆ‘ä»¬åœ¨1.1è®¨è®ºäº†å®ƒçš„ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯<code>object</code>ç±»å‹ï¼Œä¸€ä¸ªæ˜¯<code>EventArgs</code>ç±»å‹ï¼Œç°åœ¨æˆ‘ä»¬æŠŠè¿™ä¸ªå§”æ‰˜å°è£…ä»äº‹ä»¶åï¼Œè¿™ä¸ªäº‹ä»¶<code>WaterStopEvent</code>ä¹Ÿå°±è·Ÿè¯¥å§”æ‰˜ä¸€æ ·ï¼Œåªèƒ½æ¥æ”¶å¸¦æœ‰ä¸¤ä¸ªå‚æ•°<code>object? sender</code>å’Œ<code>EventArgs e</code>ï¼Œå¹¶ä¸”æ²¡æœ‰è¿”å›å€¼çš„æ–¹æ³•ã€‚</p>
<p>å…¶æ¬¡ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†è§¦å‘æ–¹æ³•<code>SendWaterStopNotice</code>ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†<code>WaterStopNotice</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç”¨è¿™ä¸ªå®ä¾‹å¯¹è±¡æ¥ä¼ é€’å‚æ•°ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜è§¦å‘äº†äº‹ä»¶<code> WaterStopEvent.Invoke(this, notice);</code>ï¼Œå³è°ƒç”¨<code>SendWaterStopNotice</code>æ–¹æ³•ï¼Œå°±å¯ä»¥è§¦å‘ç»‘å®šçš„äº‹ä»¶ã€‚</p>
<p>è§¦å‘è¿™ä¸ªäº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¼ é€’äº†ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯<code>this</code>ï¼Œå¦ä¸€ä¸ªæ˜¯åˆšåˆšåˆ›å»ºçš„å®ä¾‹<code>notice</code>ï¼Œ<code>notice</code>æ¯”è¾ƒå¥½ç†è§£ï¼Œå°±æ˜¯æˆ‘ä»¬åˆ›å»ºçš„ç”¨æ¥é€šçŸ¥å°åŒºä¸šä¸»çš„ä¿¡æ¯ï¼Œä½†æ˜¯å‰é¢çš„<code>this</code>æ˜¯å•¥å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“<code>this</code>æŒ‡å‘çš„æ˜¯å®ä¾‹æœ¬èº«ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™é‡Œçš„<code>this</code>ä¼ é€’çš„æ˜¯æˆ‘ä»¬åç»­è¦å°†æ ¡åŒºä¸šä¸»ç±»<code>CommunityProperty</code>å®ä¾‹åŒ–åçš„é‚£ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦ä¼ é€’è¿™ä¸ªå®ä¾‹å¯¹è±¡å‘¢ï¼Ÿæƒ³ä¸€æƒ³ï¼Œå¦‚æœä½ æ˜¯å°åŒºä¸šä¸»ï¼Œå½“æœ‰äººé€šçŸ¥ä½ è¦åœæ°´æ—¶ï¼Œ<strong>ä½ æ˜¯ä¸æ˜¯è¦ç¡®è®¤ä¸€ä¸‹å¯¹æ–¹æ˜¯è°ï¼Œåªæœ‰ç¡®è®¤å¯¹æ–¹æ˜¯ç‰©ä¸šåï¼Œä½ æ‰ä¼šé€‰æ‹©ç›¸ä¿¡</strong>ã€‚é‚£ä¹ˆè¿™é‡Œä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œç”±äºæˆ‘ä»¬çš„å¯¹è±¡ä¸­æœ‰ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªæ˜¯<code>PropertyName</code>ç‰©ä¸šåå­—ï¼Œå¦ä¸€ä¸ªæ˜¯ç‰©ä¸šçš„ç”µè¯<code>Phone</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æŠŠè¿™äº›ä¿¡æ¯ä¹Ÿä¼ é€’ç»™å°åŒºä¸šä¸»ï¼Œè®©ä»–ä»¬çŸ¥é“å‘èµ·è¿™ä¸ªæ¶ˆæ¯çš„æ˜¯è°ï¼Œå¹¶ä¸”å‘èµ·æ¶ˆæ¯çš„äººçš„ç”µè¯ã€‚</p>
<h3 data-id="heading-7">2.2 ç‰©ä¸šç±»ï¼šHouseOwner</h3>
<pre><code class="hljs language-cs" lang="cs"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HouseOwner</span>
 {
     <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Name { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// ä¸šä¸»å§“å</span>
     <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> HouseNumber { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// é—¨ç‰Œå·</span>

     <span class="hljs-comment">// æ¥æ”¶é€šçŸ¥çš„æ–¹æ³•ï¼ˆå¯¹åº”ä»£ç é‡Œçš„Buyï¼‰</span>
     <span class="hljs-comment">// sender = ç‰©ä¸šå®ä¾‹ï¼Œe = åœæ°´é€šçŸ¥è¯¦æƒ…</span>
     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ReceiveNotice</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>? sender, EventArgs e</span>)</span>
     {
         <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šç¡®è®¤æ˜¯è°å‘çš„é€šçŸ¥ï¼ˆæŠŠsenderè½¬å›ç‰©ä¸šç±»å‹ï¼‰</span>
         CommunityProperty property = sender <span class="hljs-keyword">as</span> CommunityProperty;
         <span class="hljs-keyword">if</span> (property == <span class="hljs-literal">null</span>)
         {
             Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{Name}</span>ï¼ˆ<span class="hljs-subst">{HouseNumber}</span>å·ï¼‰ï¼šæ”¶åˆ°ä¸æ˜é€šçŸ¥ï¼Œå¿½ç•¥ï¼"</span>);
             <span class="hljs-keyword">return</span>;
         }

         <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šè·å–é€šçŸ¥è¯¦æƒ…ï¼ˆæŠŠeè½¬å›åœæ°´é€šçŸ¥ç±»å‹ï¼‰</span>
         WaterStopNotice notice = e <span class="hljs-keyword">as</span> WaterStopNotice;
         <span class="hljs-keyword">if</span> (notice == <span class="hljs-literal">null</span>)
         {
             Console.WriteLine(<span class="hljs-string">$"<span class="hljs-subst">{Name}</span>ï¼ˆ<span class="hljs-subst">{HouseNumber}</span>å·ï¼‰ï¼šé€šçŸ¥å†…å®¹æ— æ•ˆï¼"</span>);
             <span class="hljs-keyword">return</span>;
         }

         <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šæ ¹æ®é€šçŸ¥åšå‡†å¤‡ï¼ˆä¸åŒä¸šä¸»ååº”ä¸åŒï¼‰</span>
         Console.WriteLine(<span class="hljs-string">$"\nã€<span class="hljs-subst">{Name}</span>ï¼ˆ<span class="hljs-subst">{HouseNumber}</span>å·ï¼‰ã€‘æ”¶åˆ°é€šçŸ¥ï¼š"</span>);
         Console.WriteLine(<span class="hljs-string">$"  é€šçŸ¥æ–¹ï¼š<span class="hljs-subst">{property.PropertyName}</span>ï¼ˆè”ç³»ç”µè¯ï¼š<span class="hljs-subst">{property.Phone}</span>ï¼‰"</span>);
         Console.WriteLine(<span class="hljs-string">$"  åœæ°´æ—¶é—´ï¼š<span class="hljs-subst">{notice.StopTime:yyyy-MM-dd HH:mm}</span>"</span>);
         Console.WriteLine(<span class="hljs-string">$"  åœæ°´æ—¶é•¿ï¼š<span class="hljs-subst">{notice.Duration}</span>å°æ—¶"</span>);
         Console.WriteLine(<span class="hljs-string">$"  åœæ°´åŸå› ï¼š<span class="hljs-subst">{notice.Reason}</span>"</span>);

         <span class="hljs-comment">// ä¸åŒä¸šä¸»çš„ä¸ªæ€§åŒ–æ“ä½œ</span>
         <span class="hljs-keyword">if</span> (Name == <span class="hljs-string">"å¼ ä¸‰"</span>)
             Console.WriteLine(<span class="hljs-string">$"  å¼ ä¸‰çš„æ“ä½œï¼šç«‹åˆ»å»è¶…å¸‚ä¹°2æ¡¶çŸ¿æ³‰æ°´ï¼"</span>);
         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Name == <span class="hljs-string">"æå››"</span>)
             Console.WriteLine(<span class="hljs-string">$"  æå››çš„æ“ä½œï¼šç°åœ¨å°±æŠŠè¡£æœæ´—äº†ï¼Œçƒ­æ°´å™¨åŠ æ»¡æ°´ï¼"</span>);
         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Name == <span class="hljs-string">"ç‹äº”"</span>)
             Console.WriteLine(<span class="hljs-string">$"  ç‹äº”çš„æ“ä½œï¼šç»™çˆ¸å¦ˆæ‰“ç”µè¯ï¼Œæé†’æ¥æ°´ï¼"</span>);
     }
 }
</code></pre>
<p>åœ¨è¿™ä¸ªç±»ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-cs" lang="cs">    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ReceiveNotice</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>? sender, EventArgs e</span>)</span>{
    ......
    }
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•æ¥æ”¶<code>object? sender, EventArgs e</code>ä¸¤ä¸ªå‚æ•°ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œè¿™ä¸ªæ–¹æ³•çš„ç­¾åå®Œå…¨ç¬¦åˆæˆ‘ä»¬ä¹‹å‰è¯´çš„<code>EventHandle</code>å§”æ‰˜çš„è¦æ±‚ï¼Œå³ç¬¦åˆ<code>WaterStopEvent</code>çš„è¦æ±‚ã€‚å¹¶ä¸”æˆ‘ä»¬åœ¨æ–¹æ³•å†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡<code>object sender</code>æ‹¿åˆ°äº†<strong>å°åŒºç‰©ä¸š</strong>çš„å§“åå’Œç”µè¯ï¼Œé€šè¿‡<code>EventArgs</code>è·å–äº†<strong>åœæ°´é€šçŸ¥</strong>çš„å„ä¸ªè¯¦ç»†ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-8">2.4 æ‰§è¡Œæ•´ä¸ªæµç¨‹</h3>
<pre><code class="hljs language-cs" lang="cs"><span class="hljs-comment">// 1. åˆ›å»ºå‘å¸ƒè€…ï¼šå¹¸ç¦å°åŒºç‰©ä¸š</span>
CommunityProperty property = <span class="hljs-keyword">new</span> CommunityProperty()
{
    PropertyName = <span class="hljs-string">"å¹¸ç¦å°åŒºç‰©ä¸š"</span>,
    Phone = <span class="hljs-string">"010-12345678"</span>
};

<span class="hljs-comment">// 2. åˆ›å»ºè§‚å¯Ÿè€…ï¼š3ä¸ªä¸šä¸»</span>
HouseOwner zhangsan = <span class="hljs-keyword">new</span> HouseOwner() { Name = <span class="hljs-string">"å¼ ä¸‰"</span>, HouseNumber = <span class="hljs-number">101</span> };
HouseOwner lisi = <span class="hljs-keyword">new</span> HouseOwner() { Name = <span class="hljs-string">"æå››"</span>, HouseNumber = <span class="hljs-number">202</span> };
HouseOwner wangwu = <span class="hljs-keyword">new</span> HouseOwner() { Name = <span class="hljs-string">"ç‹äº”"</span>, HouseNumber = <span class="hljs-number">303</span> };

<span class="hljs-comment">// 3. ä¸šä¸»è®¢é˜…é€šçŸ¥ï¼ˆå»ç‰©ä¸šç™»è®°ï¼‰</span>
property.WaterStopEvent += zhangsan.ReceiveNotice;
property.WaterStopEvent += lisi.ReceiveNotice;
property.WaterStopEvent += wangwu.ReceiveNotice;

<span class="hljs-comment">// 4. ç‰©ä¸šå‘é€šçŸ¥ï¼ˆè§¦å‘äº‹ä»¶ï¼Œä¼ é€’å‚æ•°ï¼‰</span>
property.SendWaterStopNotice();
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªå°åŒºç‰©ä¸šçš„å®ä¾‹ï¼Œå¹¶ä¸”å£°æ˜äº†ä»–çš„åç§°å’Œç”µè¯ã€‚ç„¶ååˆ›å»ºäº†ä¸‰ä¸ªä¸šä¸»ï¼Œå£°æ˜äº†æ¯ä¸ªä¸šä¸»çš„å§“åå’Œæˆ¿é—´å·ã€‚éšåï¼Œæˆ‘ä»¬è®©æ¯ä¸ªä¸šä¸»è®¢é˜…äº†ç‰©ä¸šçš„é€šçŸ¥ï¼Œå³<code>property.WaterStopEvent += zhangsan.ReceiveNotice;</code>ï¼Œç”±äº<code>WaterStopEvent</code>æ˜¯ä¸€ä¸ªäº‹ä»¶ï¼Œå¤–éƒ¨åªèƒ½è®¢é˜…ï¼ˆ+=ï¼‰æˆ–è€…å–æ¶ˆè®¢é˜…ï¼ˆ-=ï¼‰ã€‚</p>
<p>è®¢é˜…ä¹‹åï¼Œè¿™äº›æ–¹æ³•ä¼šè¢«æ”¾åˆ°<code>WaterStopEvent</code>äº‹ä»¶ä¸­ï¼Œç­‰å¾…è°ƒç”¨ã€‚è€Œæœ€ç»ˆï¼Œæ‰§è¡Œ<code>SendWaterStopNotice()</code>æ–¹æ³•åï¼Œè¿™ä¸ªäº‹ä»¶ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>æ¯”å¦‚å½“æ‰§è¡Œäº†<code>SendWaterStopNotice()</code>æ–¹æ³•åï¼Œè¿™ä¸ªä»£ç ä¼šè§¦å‘äº‹ä»¶<code>WaterStopEvent.Invoke(this, notice);</code>ï¼Œå°†å°åŒºç‰©ä¸šçš„å®ä¾‹<code>property</code>å’Œåœæ°´æ¶ˆæ¯<code>WaterStopNotice</code>ä¼ å…¥äº‹ä»¶ï¼Œç”±äºäº‹ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯å¼ ä¸‰çš„ï¼Œæ‰€ä»¥æ‰§è¡Œ<code>zhangsan.ReceiveNotice(object? sender, EventArgs e)</code>ã€‚å‰©ä¸‹ä¸¤ä¸ªæ–¹æ³•ä¹Ÿæ˜¯ä»¥æ­¤ç±»æ¨ã€‚</p>
<p>æ‰§è¡Œç»“æœï¼š</p>
<pre><code class="hljs">ã€å¹¸ç¦å°åŒºç‰©ä¸šã€‘å¼€å§‹é€šçŸ¥ä¸šä¸»åœæ°´äº‹å®œï¼

ã€å¼ ä¸‰ï¼ˆ101å·ï¼‰ã€‘æ”¶åˆ°é€šçŸ¥ï¼š
  é€šçŸ¥æ–¹ï¼šå¹¸ç¦å°åŒºç‰©ä¸šï¼ˆè”ç³»ç”µè¯ï¼š010-12345678ï¼‰
  åœæ°´æ—¶é—´ï¼š2025-12-15 08:00
  åœæ°´æ—¶é•¿ï¼š4å°æ—¶
  åœæ°´åŸå› ï¼šå°åŒºä¸»æ°´ç®¡ç»´ä¿®
  å¼ ä¸‰çš„æ“ä½œï¼šç«‹åˆ»å»è¶…å¸‚ä¹°2æ¡¶çŸ¿æ³‰æ°´ï¼

ã€æå››ï¼ˆ202å·ï¼‰ã€‘æ”¶åˆ°é€šçŸ¥ï¼š
  é€šçŸ¥æ–¹ï¼šå¹¸ç¦å°åŒºç‰©ä¸šï¼ˆè”ç³»ç”µè¯ï¼š010-12345678ï¼‰
  åœæ°´æ—¶é—´ï¼š2025-12-15 08:00
  åœæ°´æ—¶é•¿ï¼š4å°æ—¶
  åœæ°´åŸå› ï¼šå°åŒºä¸»æ°´ç®¡ç»´ä¿®
  æå››çš„æ“ä½œï¼šç°åœ¨å°±æŠŠè¡£æœæ´—äº†ï¼Œçƒ­æ°´å™¨åŠ æ»¡æ°´ï¼

ã€ç‹äº”ï¼ˆ303å·ï¼‰ã€‘æ”¶åˆ°é€šçŸ¥ï¼š
  é€šçŸ¥æ–¹ï¼šå¹¸ç¦å°åŒºç‰©ä¸šï¼ˆè”ç³»ç”µè¯ï¼š010-12345678ï¼‰
  åœæ°´æ—¶é—´ï¼š2025-12-15 08:00
  åœæ°´æ—¶é•¿ï¼š4å°æ—¶
  åœæ°´åŸå› ï¼šå°åŒºä¸»æ°´ç®¡ç»´ä¿®
  ç‹äº”çš„æ“ä½œï¼šç»™çˆ¸å¦ˆæ‰“ç”µè¯ï¼Œæé†’æ¥æ°´ï¼
</code></pre>
<h3 data-id="heading-9">2.5 æ€»ç»“</h3>













































<table><thead><tr><th>ç”Ÿæ´»åœºæ™¯</th><th>ä»£ç é‡Œçš„å…ƒç´ </th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td>å¹¸ç¦å°åŒºç‰©ä¸š</td><td><code>CommunityProperty</code>Â å®ä¾‹</td><td>å‘å¸ƒè€…ï¼šæ§åˆ¶é€šçŸ¥æ—¶æœºã€ä¼ å‚æ•°</td></tr><tr><td>åœæ°´é€šçŸ¥äº‹ä»¶</td><td><code>WaterStopEvent</code>Â äº‹ä»¶</td><td>è®¢é˜…å…¥å£ï¼šä»…å…è®¸ +=/-=</td></tr><tr><td>åœæ°´è¯¦æƒ…ï¼ˆæ—¶é—´ / æ—¶é•¿ï¼‰</td><td><code>WaterStopNotice</code>ï¼ˆe å‚æ•°ï¼‰</td><td>ä¼ é€’å…·ä½“çš„é€šçŸ¥å†…å®¹</td></tr><tr><td>ç‰©ä¸šè‡ªå·±ï¼ˆå‘é€šçŸ¥çš„äººï¼‰</td><td><code>this</code>ï¼ˆsender å‚æ•°ï¼‰</td><td>å‘Šè¯‰è§‚å¯Ÿè€… â€œè°å‘çš„é€šçŸ¥â€</td></tr><tr><td>ä¸šä¸»ç™»è®°é€šçŸ¥</td><td><code>property.WaterStopEvent += æ–¹æ³•</code></td><td>è®¢é˜…ï¼šåŠ å…¥é€šçŸ¥åˆ—è¡¨</td></tr><tr><td>ç‰©ä¸šæŒ¨å®¶æŒ¨æˆ·é€šçŸ¥</td><td><code>WaterStopEvent.Invoke(this, notice)</code></td><td>è§¦å‘äº‹ä»¶ï¼šä¼ é€’å‚æ•°ç»™æ¯ä¸ªä¸šä¸»</td></tr><tr><td>ä¸šä¸»æŒ‰é€šçŸ¥åšå‡†å¤‡</td><td><code>ReceiveNotice</code>Â æ–¹æ³•</td><td>å“åº”ï¼šæ‰§è¡Œä¸ªæ€§åŒ–é€»è¾‘</td></tr></tbody></table>
<p>è¿™ä¸ªä»£ç ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å…¸å‹è§‚å¯Ÿè€…æ¨¡å¼ï¼Œéå¸¸å€¼å¾—å¤§å®¶å­¦ä¹ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šè¿‡åˆ‡æ¢Serviceå®ç°ç±»æ¥åˆ‡æ¢çœ‹æ¿æ•°æ®æ¥æº]]></title>    <link>https://juejin.cn/post/7582637280218955830</link>    <guid>https://juejin.cn/post/7582637280218955830</guid>    <pubDate>2025-12-12T14:00:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582637280218955830" data-draft-id="7582637280218939446" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šè¿‡åˆ‡æ¢Serviceå®ç°ç±»æ¥åˆ‡æ¢çœ‹æ¿æ•°æ®æ¥æº"/> <meta itemprop="keywords" content="Java,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-12T14:00:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ†§æ†¬å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/2374569069387223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šè¿‡åˆ‡æ¢Serviceå®ç°ç±»æ¥åˆ‡æ¢çœ‹æ¿æ•°æ®æ¥æº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2374569069387223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ†§æ†¬å°‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:00:37.000Z" title="Fri Dec 12 2025 14:00:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åšBIçœ‹æ¿çš„æ—¶å€™é‡åˆ°ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯æœ‰æ—¶å€™éœ€è¦åˆ‡æ¢çœ‹æ¿æ‰€å±•ç¤ºçš„æ•°æ®ï¼ˆæ‡‚çš„éƒ½æ‡‚ï¼‰ï¼Œä½†æ¯æ¬¡éƒ½æ‰‹åŠ¨æ”¹æ•°æ®åº“è§†å›¾åé¢å†æ”¹å›æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œäºæ˜¯éœ€è¦åšä¸€ä¸ªå¿«é€Ÿåˆ‡æ¢å…¬å¸å†…éƒ¨çœ‹çš„çœŸå®æ•°æ®æ¨¡å¼å’Œç»™å®¢æˆ·çœ‹çš„æ¼”ç¤ºæ¨¡å¼çš„åŠŸèƒ½ã€‚</p>
<p>æ¯ä¸ªçœ‹æ¿æ•°æ®æ¥å£éƒ½åŠ ä¸ªå‚æ•°ä¾µå…¥æ€§å¤ªå¤§è‚¯å®šä¸è¡Œï¼Œé€šè¿‡é…ç½®æ¥åˆ‡æ¢ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œæœ€åæƒ³åˆ°äº†å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯ä¸€ä¸ªæ¥å£å¯¹ä¸€ä¸ªå®ç°ç±»çš„Serviceå±‚ã€‚åªéœ€è¦æ ¹æ®é…ç½®çš„å˜åŠ¨æ”¹å˜å®ç°ç±»ï¼Œå°±èƒ½å¾ˆè½»æ¾åœ°å®ç°æ•°æ®æ¥æºåˆ‡æ¢ã€‚</p>
<p>æœ‰äº†æƒ³æ³•ä¹‹åï¼Œå°±å’Œè±†åŒ…è®¨è®ºæ–¹æ¡ˆæ¥ç€å®æ–½äº†ï¼Œæœ€åå¯ä»¥å®ç°åªéœ€è¦åŠ æ³¨è§£å’Œæ–°çš„Serviceå®ç°ç±»å°±èƒ½ä¸ºçœ‹æ¿æ·»åŠ æ–°çš„æ•°æ®æ¥æºçš„æ•ˆæœï¼Œè¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹Nacosç®¡ç†çš„é…ç½®æ¥åŠ¨æ€æ›´æ–°ã€‚</p>

<h2 data-id="heading-0">é—®é¢˜</h2>
<p>Serviceå±‚é€šå¸¸æ˜¯ç¼–å†™ä¸€ä¸ªServiceæ¥å£å’Œä¸€ä¸ªServiceImplï¼ˆå®ç°ç±»ï¼‰ï¼Œè€Œç°åœ¨é™¤äº†è¿”å›çœŸå®æ•°æ®çš„ServiceImplä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªè¿”å›æ¼”ç¤ºç”¨çš„æ•°æ®çš„DemoServiceImplï¼Œä¸¤ä¸ªServiceImplä½¿ç”¨ä¸åŒçš„Beanåç§°æ¥åŒºåˆ†ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * çœŸå®æ•°æ®å®ç°ç±»ï¼šBeanå=realSalesBoardServiceï¼ˆå‰ç¼€+æ¥å£åé¦–å­—æ¯å°å†™ï¼‰
 */</span>
<span class="hljs-meta">@Service("realSalesBoardService")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RealSalesBoardServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SalesBoardService</span> {

}
</code></pre>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * æ¼”ç¤ºæ•°æ®å®ç°ç±»ï¼šBeanå=demoSalesBoardServiceï¼ˆå‰ç¼€+æ¥å£åé¦–å­—æ¯å°å†™ï¼‰
 */</span>
<span class="hljs-meta">@Service("demoSalesBoardService")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DemoSalesBoardServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SalesBoardService</span> {

}
</code></pre>
<p>è¦å®ç°åŠ¨æ€åˆ‡æ¢ï¼Œéœ€è¦è§£å†³å¦‚ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>Springbootæ³¨å…¥Beanä¹‹åå°±å›ºå®šäº†ï¼Œæ€ä¹ˆåœ¨ä¿®æ”¹é…ç½®ä¹‹åè®©Controllerå±‚åŠ¨æ€åˆ‡æ¢ä½¿ç”¨é…ç½®æŒ‡å®šçš„ServiceImplï¼›</li>
<li>æ€ä¹ˆé¿å…æ¯æ¬¡æ·»åŠ æ¥å£éƒ½è¦å†™å¤§é‡ä»£ç æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</li>
</ol>
<h2 data-id="heading-1">åŠ¨æ€åˆ‡æ¢</h2>
<p>åŠ¨æ€åˆ·æ–°é…ç½®å¯ä»¥ä½¿ç”¨@RefreshScopeæ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£çš„ä½œç”¨æ˜¯ï¼š<strong>åœ¨é…ç½®å˜åŒ–æ—¶ï¼Œæ ‡æ³¨äº†è¯¥æ³¨è§£çš„Beanå®ä¾‹çš„ç¼“å­˜ä¼šè¢«æ¸…ç©ºï¼Œä¸‹æ¬¡è·å–è¯¥Beanæ—¶ï¼ŒSpringä¼šé‡æ–°åˆ›å»ºè¯¥Beanï¼Œå¹¶ä¸”æ³¨å…¥æœ€æ–°çš„é…ç½®å€¼ã€‚</strong></p>
<p>å¯ä»¥åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»ï¼ŒControllerä¸å†æ³¨å…¥ä¸šåŠ¡å±‚å®ç°ç±»å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡è¿™ä¸ªå·¥å‚ç±»ä¸»åŠ¨å»è·å–ã€‚</p>
<p>è€Œè¿™ä¸ªå·¥å‚ç±»æ ‡æ³¨@RefreshScopeï¼Œåœ¨æ¯æ¬¡é…ç½®æ›´æ–°æ—¶ï¼Œæ ¹æ®æ–°çš„é…ç½®æ¥åŠ¨æ€è·å–è¯¥Serviceçš„å®ç°ç±»ã€‚</p>
<p>ä¸åŒçœ‹æ¿çš„Serviceæ¥å£å¯¹åº”çš„é…ç½®é”®å¯ä»¥ç”¨è‡ªå®šä¹‰æ³¨è§£æ¥æ ‡è¯†ï¼Œé…ç½®å€¼å¯¹åº”çš„ä¸¤ç§æ¨¡å¼ï¼ˆçœŸå®æ¨¡å¼realï¼Œæ¼”ç¤ºæ¨¡å¼demoï¼‰å¯ä»¥ç”¨æšä¸¾ç±»æ¥å£°æ˜ã€‚</p>
<p>çœ‹ä¸€ä¸‹Controllerçš„ä»£ç å°±èƒ½å¾ˆå®¹æ˜“ç†è§£è¿™ä¸ªæ€è·¯ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/board")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BoardController</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BoardServiceFactory boardServiceFactory;

    <span class="hljs-meta">@GetMapping("/sales")</span>
    <span class="hljs-keyword">public</span> Result&lt;SalesVO&gt; <span class="hljs-title function_">querySales</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> LocalDate start,
            <span class="hljs-meta">@RequestParam</span> LocalDate end)</span> {
        <span class="hljs-comment">// æ ¸å¿ƒï¼šä»å·¥å‚è·å–å½“å‰ç”Ÿæ•ˆçš„Serviceï¼Œè°ƒç”¨ç»Ÿä¸€æ¥å£</span>
        <span class="hljs-type">BoardService</span> <span class="hljs-variable">boardService</span> <span class="hljs-operator">=</span> boardServiceFactory.getCurrentBoardService();
        <span class="hljs-type">SalesVO</span> <span class="hljs-variable">salesVO</span> <span class="hljs-operator">=</span> boardService.querySalesData(start, end);
        <span class="hljs-keyword">return</span> Result.success(salesVO);
    }

    <span class="hljs-meta">@GetMapping("/user")</span>
    <span class="hljs-keyword">public</span> Result&lt;UserVO&gt; <span class="hljs-title function_">queryUser</span><span class="hljs-params">()</span> {
        <span class="hljs-type">BoardService</span> <span class="hljs-variable">boardService</span> <span class="hljs-operator">=</span> boardServiceFactory.getCurrentBoardService();
        <span class="hljs-keyword">return</span> Result.success(boardService.queryUserData());
    }
}
</code></pre>
<p>è‡ªå®šä¹‰æ³¨è§£@DynamicServiceï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">/**
 * æ ‡æ³¨éœ€è¦åŠ¨æ€åˆ‡æ¢å®ç°ç±»çš„æ¥å£
 */</span>
<span class="hljs-meta">@Target(ElementType.TYPE)</span> <span class="hljs-comment">// ä»…ä½œç”¨äºæ¥å£</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="hljs-comment">// è¿è¡Œæ—¶å¯åå°„è·å–</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> DynamicService {
    <span class="hljs-comment">/**
     * Nacosé…ç½®é¡¹Keyï¼ˆå¦‚board.sales.service.typeï¼‰
     */</span>
    String <span class="hljs-title function_">configKey</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * é»˜è®¤æ•°æ®ç±»å‹ï¼ˆå…œåº•ï¼‰
     */</span>
    DynamicServiceType <span class="hljs-title function_">defaultType</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> DynamicServiceType.REAL;
}
</code></pre>
<p>æšä¸¾ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * åŠ¨æ€æœåŠ¡æ•°æ®ç±»å‹ï¼šRealï¼ˆçœŸå®æ•°æ®ï¼‰/ Demoï¼ˆæ¼”ç¤ºæ•°æ®ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DynamicServiceType</span> {
    REAL(<span class="hljs-string">"real"</span>, <span class="hljs-string">"çœŸå®ä¸šåŠ¡æ•°æ®ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰"</span>),
    DEMO(<span class="hljs-string">"demo"</span>, <span class="hljs-string">"æ¼”ç¤ºæ•°æ®ï¼ˆå®¢æˆ·/å¯¹å¤–å±•ç¤ºï¼‰"</span>);

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String beanPrefix; <span class="hljs-comment">// å®ç°ç±»Beanåå‰ç¼€ï¼ˆå¦‚realBoardServiceï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;

    DynamicServiceType(String beanPrefix, String desc) {
        <span class="hljs-built_in">this</span>.beanPrefix = beanPrefix;
        <span class="hljs-built_in">this</span>.desc = desc;
    }

    <span class="hljs-comment">// ä»Nacosé…ç½®å€¼è·å–æšä¸¾ï¼ˆå…œåº•é»˜è®¤REALï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DynamicServiceType <span class="hljs-title function_">fromConfig</span><span class="hljs-params">(String configValue)</span> {
        <span class="hljs-keyword">for</span> (DynamicServiceType type : values()) {
            <span class="hljs-keyword">if</span> (type.beanPrefix.equals(configValue)) {
                <span class="hljs-keyword">return</span> type;
            }
        }
        <span class="hljs-keyword">return</span> REAL;
    }

    <span class="hljs-comment">// Getter</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBeanPrefix</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> beanPrefix; }
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> desc; }
}
</code></pre>
<p>æ ‡æ³¨Serviceæ¥å£ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * çœ‹æ¿é”€å”®æ•°æ®æ¥å£ï¼ˆç»Ÿä¸€è°ƒç”¨å…¥å£ï¼‰
 */</span>
<span class="hljs-meta">@DynamicService(
    configKey = "board.sales.service.type", // Nacosé…ç½®Keyï¼ˆç‹¬ç«‹é…ç½®ï¼‰
    defaultType = DynamicServiceType.REAL
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">SalesBoardService</span> {

}
</code></pre>
<p>ä½œä¸ºæ ¸å¿ƒçš„å·¥å‚ç±»çš„å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RefreshScope</span> <span class="hljs-comment">// Nacosé…ç½®å˜æ›´æ—¶ï¼Œåˆ·æ–°å·¥å‚å®ä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericDynamicServiceFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InitializingBean</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(GenericDynamicServiceFactory.class);

    <span class="hljs-comment">// ç¯å¢ƒé…ç½®ï¼ˆè¯»å–Nacosé…ç½®ï¼‰</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> Environment environment;

    <span class="hljs-comment">// ç¼“å­˜ï¼šæ¥å£Class â†’ æ³¨è§£é…ç½®ï¼ˆé¿å…é‡å¤åå°„ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Class&lt;?&gt;, DynamicService&gt; annotationCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    <span class="hljs-comment">// ç¼“å­˜ï¼šæ¥å£Class â†’ å½“å‰ç”Ÿæ•ˆçš„å®ç°ç±»å®ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Class&lt;?&gt;, Object&gt; serviceCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">// æ¥å£æ‰€åœ¨åŒ…ï¼ˆéœ€ä¿®æ”¹ä¸ºå®é™…åŒ…è·¯å¾„ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">BASE_PACKAGE</span> <span class="hljs-operator">=</span> <span class="hljs-string">"com.xxx.board.service"</span>;

    <span class="hljs-comment">/**
     * åˆå§‹åŒ–ï¼šæ‰«ææ‰€æœ‰<span class="hljs-doctag">@DynamicService</span>æ¥å£ï¼ŒåŠ è½½é»˜è®¤å®ç°
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterPropertiesSet</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. SpringåŸç”Ÿæ‰«æå™¨ï¼šåªç­›é€‰å¸¦æ³¨è§£çš„æ¥å£</span>
        <span class="hljs-type">ClassPathScanningCandidateComponentProvider</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathScanningCandidateComponentProvider</span>(<span class="hljs-literal">false</span>) {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isCandidateComponent</span><span class="hljs-params">(BeanDefinition beanDefinition)</span> {
                <span class="hljs-keyword">return</span> beanDefinition.getMetadata().isInterface(); <span class="hljs-comment">// ä»…å¤„ç†æ¥å£</span>
            }
        };
        scanner.addIncludeFilter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AnnotationTypeFilter</span>(DynamicService.class));

        <span class="hljs-comment">// 2. æ‰«æå¹¶ç¼“å­˜æ³¨è§£ã€åˆå§‹åŒ–å®ä¾‹</span>
        Set&lt;BeanDefinition&gt; definitions = scanner.findCandidateComponents(BASE_PACKAGE);
        <span class="hljs-keyword">for</span> (BeanDefinition def : definitions) {
            <span class="hljs-keyword">try</span> {
                Class&lt;?&gt; interfaceClazz = Class.forName(def.getBeanClassName());
                <span class="hljs-type">DynamicService</span> <span class="hljs-variable">annotation</span> <span class="hljs-operator">=</span> interfaceClazz.getAnnotation(DynamicService.class);
                annotationCache.put(interfaceClazz, annotation);
                refreshServiceInstance(interfaceClazz);
            } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
                log.error(<span class="hljs-string">"æ‰«æåŠ¨æ€æœåŠ¡æ¥å£å¤±è´¥"</span>, e);
            }
        }
    }

    <span class="hljs-comment">/**
     * åˆ·æ–°æŒ‡å®šæ¥å£çš„å®ç°ç±»å®ä¾‹ï¼ˆé…ç½®å˜æ›´æ—¶è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">refreshServiceInstance</span><span class="hljs-params">(Class&lt;T&gt; interfaceClazz)</span> {
        <span class="hljs-type">DynamicService</span> <span class="hljs-variable">annotation</span> <span class="hljs-operator">=</span> annotationCache.get(interfaceClazz);
        <span class="hljs-keyword">if</span> (annotation == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ¥å£"</span> + interfaceClazz.getName() + <span class="hljs-string">"æœªæ ‡æ³¨@DynamicService"</span>);
        }

        <span class="hljs-comment">// 1. ä»Nacosè·å–é…ç½®ï¼Œè½¬æ¢ä¸ºæšä¸¾ç±»å‹</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">configValue</span> <span class="hljs-operator">=</span> environment.getProperty(annotation.configKey(), annotation.defaultType().getBeanPrefix());
        <span class="hljs-type">DynamicServiceType</span> <span class="hljs-variable">serviceType</span> <span class="hljs-operator">=</span> DynamicServiceType.fromConfig(configValue);

        <span class="hljs-comment">// 2. æŒ‰è§„èŒƒæ‹¼æ¥å®ç°ç±»Beanåï¼ˆå‰ç¼€+æ¥å£åé¦–å­—æ¯å°å†™ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">interfaceName</span> <span class="hljs-operator">=</span> interfaceClazz.getSimpleName();
        <span class="hljs-type">String</span> <span class="hljs-variable">beanName</span> <span class="hljs-operator">=</span> serviceType.getBeanPrefix() +
                          interfaceName.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>).toLowerCase() +
                          interfaceName.substring(<span class="hljs-number">1</span>);

        <span class="hljs-comment">// 3. ç”¨é¡¹ç›®SpringUtilsè·å–Beanï¼Œæ›´æ–°ç¼“å­˜</span>
        <span class="hljs-type">T</span> <span class="hljs-variable">serviceInstance</span> <span class="hljs-operator">=</span> SpringUtils.getBean(beanName, interfaceClazz);
        serviceCache.put(interfaceClazz, serviceInstance);

        <span class="hljs-comment">// å®¡è®¡æ—¥å¿—ï¼ˆä¾¿äºè¿½æº¯ï¼‰</span>
        log.info(<span class="hljs-string">"åŠ¨æ€æœåŠ¡åˆ‡æ¢ï¼šæ¥å£={}, é…ç½®Key={}, ç”Ÿæ•ˆç±»å‹={}, Beanå={}"</span>,
                interfaceClazz.getSimpleName(), annotation.configKey(), serviceType.getDesc(), beanName);
    }

    <span class="hljs-comment">/**
     * å¯¹å¤–æä¾›ï¼šè·å–æ¥å£å½“å‰ç”Ÿæ•ˆçš„å®ç°ç±»ï¼ˆä¾›åç½®å¤„ç†å™¨è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-meta">@SuppressWarnings("unchecked")</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getService</span><span class="hljs-params">(Class&lt;T&gt; interfaceClazz)</span> {
        <span class="hljs-keyword">if</span> (!serviceCache.containsKey(interfaceClazz)) {
            refreshServiceInstance(interfaceClazz);
        }
        <span class="hljs-keyword">return</span> (T) serviceCache.get(interfaceClazz);
    }

    <span class="hljs-comment">/**
     * é…ç½®åˆ·æ–°äº‹ä»¶ç›‘å¬ï¼šæ‰¹é‡æ›´æ–°æ‰€æœ‰åŠ¨æ€æœåŠ¡å®ä¾‹
     */</span>
    <span class="hljs-meta">@EventListener(RefreshScopeRefreshedEvent.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onConfigRefresh</span><span class="hljs-params">()</span> {
        log.info(<span class="hljs-string">"Nacosé…ç½®å˜æ›´ï¼Œæ‰¹é‡åˆ·æ–°åŠ¨æ€æœåŠ¡"</span>);
        annotationCache.keySet().forEach(<span class="hljs-built_in">this</span>::refreshServiceInstance);
    }
}
</code></pre>
<p>ä»¥ä¸‹æ˜¯æˆ‘æå‡ºçš„ç–‘é—®å’ŒAIçš„è§£ç­”ï¼š</p>
<ol>
<li>é…ç½®çš„è¯»å–æ²¡æœ‰ä½¿ç”¨@Valueï¼Œè€Œæ˜¯ä½¿ç”¨<code>org.springframework.core.env.Environment</code>ï¼Œå› ä¸º@Valueä¸æ”¯æŒåŠ¨æ€çš„é…ç½®é”®ï¼Œåªåšå•ä¸ªServiceçš„åˆ‡æ¢è¿˜è¡Œï¼Œä½†ä¸åŒServiceçš„é…ç½®é”®ä¸ä¸€æ ·ï¼Œå°±æ²¡æ³•ç”¨@Valueäº†ï¼›</li>
<li>SpringUtilsæ˜¯æˆ‘æ‰€åšé¡¹ç›®é‡Œé¢è‡ªå¸¦çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œå¯ä»¥ç”¨â€œå®ç°ApplicationContextAwareæ¥å£å¹¶è·å–ApplicationContextâ€æ¥æ›¿ä»£ï¼›</li>
<li>ä¹‹æ‰€ä»¥ä¸ç”¨getBeansWithAnnotationæ–¹æ³•æ¥æ”¶é›†æ ‡æ³¨äº†è‡ªå®šä¹‰æ³¨è§£çš„Beanï¼Œæ˜¯å› ä¸ºå®ƒæ”¶é›†çš„æ˜¯Beanå®ä¾‹ï¼Œè€Œæˆ‘ä»¬éœ€è¦è·å–çš„æ˜¯æ ‡æ³¨äº†è‡ªå®šä¹‰æ³¨è§£çš„Serviceæ¥å£ï¼Œæ‰€ä»¥é‡‡ç”¨åˆå§‹åŒ–æ—¶æ‰«æå¹¶ç¼“å­˜ã€‚</li>
<li>@PostConstructè™½ç„¶å¯ä»¥åœ¨è¿™é‡Œæ›¿ä»£afterPropertiesSetæ¥è¿›è¡Œåˆå§‹åŒ–çš„æ‰«æé€»è¾‘ï¼Œä½†afterPropertiesSetæ‰§è¡Œæ—¶æœºæ›´æ™šï¼ˆBeançš„å±æ€§æ³¨å…¥å®Œæˆåï¼‰ï¼Œé€‚åˆä¾èµ–å…¶ä»–Beançš„åœºæ™¯ï¼Œåç»­å¦‚æœè¯¥å·¥å‚ç±»è¦æ³¨å…¥å…¶ä»–Beanï¼Œå°±ä¸éœ€è¦æ”¹åŠ¨ä»€ä¹ˆã€‚</li>
<li>ç”±äº@RefreshScopeæ˜¯æ‡’åŠ è½½ï¼Œåˆ‡æ¢é…ç½®åï¼Œç­‰åˆ°getServiceæ–¹æ³•è¢«é¦–æ¬¡è°ƒç”¨æ‰åˆ·æ–°ï¼Œå› æ­¤ç›‘å¬åˆ·æ–°äº‹ä»¶å¹¶ä¸»åŠ¨åˆ·æ–°ä¸€ä¸‹æœåŠ¡çŠ¶æ€ã€‚è¿™ä¸ªæ˜¯å¯é€‰çš„ï¼Œç®—æ˜¯AIé¢å¤–è€ƒè™‘çš„æƒ…å†µï¼Œæˆ‘è§‰å¾—æ”¾ç€ä¹Ÿä¸ç¢äº‹ï¼Œå°±æ²¡åˆ ã€‚</li>
</ol>
<h2 data-id="heading-2">åŠ¨æ€æ³¨å…¥</h2>
<p>æ ¸å¿ƒåŠŸèƒ½ä»¥ä¸Šæ–¹æ¡ˆå·²ç»å®ç°äº†ï¼Œåªä¸è¿‡æ¯ä¸ªçœ‹æ¿Controllerçš„æ¯ä¸ªæ¥å£éƒ½å¤šäº†ä¸€æ­¥æ‰‹åŠ¨è·å–Serviceå®ç°ç±»çš„è¯­å¥ã€‚</p>
<p>ä¸€ä¸¤ä¸ªæ¥å£è¿˜å¥½ï¼Œä½†åé¢æ‰©å±•èµ·æ¥è¦å‘½ã€‚</p>
<p>å¥½åœ¨æœ‰åŠæ³•ç®€åŒ–ã€‚æ•ˆæœå¦‚ä¸‹ï¼Œå’Œä»¥å‰ä¸€æ ·æ³¨å…¥Serviceï¼Œä½†æ˜¯@Autowiredæ”¹ä¸ºè‡ªå®šä¹‰æ³¨è§£@DynamicAutowired</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/board/sales")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SalesBoardController</span> {
    <span class="hljs-comment">// æ ¸å¿ƒç®€åŒ–ï¼šæ— éœ€æ³¨å…¥å·¥å‚ï¼Œç›´æ¥æ³¨å…¥æ¥å£</span>
    <span class="hljs-meta">@DynamicAutowired</span>
    <span class="hljs-keyword">private</span> SalesBoardService salesBoardService;

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> Result&lt;SalesVO&gt; <span class="hljs-title function_">querySales</span><span class="hljs-params">(
            <span class="hljs-meta">@RequestParam</span> LocalDate startDate,
            <span class="hljs-meta">@RequestParam</span> LocalDate endDate)</span> {
        <span class="hljs-comment">// ç›´æ¥è°ƒç”¨ï¼Œå’Œæ™®é€š@Autowiredæ³¨å…¥æ— åŒºåˆ«</span>
        <span class="hljs-keyword">return</span> Result.success(salesBoardService.querySalesData(startDate, endDate));
    }
}
</code></pre>
<p>é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰æ³¨è§£ç”¨äºæ ‡è®°è¦åŠ¨æ€æ³¨å…¥çš„å±æ€§ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">/**
 * åŠ¨æ€æœåŠ¡æ³¨å…¥æ³¨è§£ï¼šæ›¿ä»£æ‰‹åŠ¨è°ƒç”¨factory.getService()ï¼Œè‡ªåŠ¨æ³¨å…¥å½“å‰ç”Ÿæ•ˆå®ä¾‹
 */</span>
<span class="hljs-meta">@Target(ElementType.FIELD)</span> <span class="hljs-comment">// ä»…ä½œç”¨äºç±»å­—æ®µ</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@interface</span> DynamicAutowired {
    <span class="hljs-comment">// ä»…ä½œä¸ºæ ‡è®°ï¼Œæ— éœ€é¢å¤–å±æ€§</span>
}
</code></pre>
<p>æ¥ç€å®šä¹‰ä¸€ä¸ªå¤„ç†å™¨ï¼Œå®ç° <strong>Spring Bean åç½®å¤„ç†å™¨ï¼ˆBeanPostProcessorï¼‰</strong>ï¼š</p>
<ol>
<li>åœ¨åˆå§‹åŒ–æ‰€æœ‰Beançš„æ—¶å€™ä¸ºæ ‡æ³¨äº†@DynamicAutowired æ³¨è§£çš„Beanæ³¨å…¥å½“å‰é…ç½®çš„åŠ¨æ€Serviceå®ç°ç±»å®ä¾‹ï¼›</li>
<li>ç›‘å¬é…ç½®åˆ·æ–°ï¼Œé€šè¿‡å·¥å‚åŠ¨æ€è·å–æœ€æ–°çš„ServiceImplå¹¶æ³¨å…¥ã€‚</li>
</ol>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-keyword">import</span> org.slf4j.Logger;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;
<span class="hljs-keyword">import</span> org.springframework.beans.BeansException;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.config.BeanPostProcessor;
<span class="hljs-keyword">import</span> org.springframework.cloud.context.scope.refresh.RefreshScopeRefreshedEvent;
<span class="hljs-keyword">import</span> org.springframework.context.event.EventListener;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> org.springframework.util.ReflectionUtils;

<span class="hljs-keyword">import</span> java.lang.reflect.Field;
<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.concurrent.locks.ReentrantLock;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicAutowiredProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanPostProcessor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(DynamicAutowiredProcessor.class);

    <span class="hljs-comment">// æ³¨å…¥åŸæœ‰é€šç”¨å·¥å‚ï¼ˆå¤ç”¨åˆ‡æ¢é€»è¾‘ï¼‰</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> GenericDynamicServiceFactory dynamicServiceFactory;

    <span class="hljs-comment">// ç¼“å­˜ï¼šéœ€è¦åŠ¨æ€æ³¨å…¥çš„å­—æ®µï¼ˆé…ç½®åˆ·æ–°æ—¶é‡æ–°æ³¨å…¥ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;FieldInjectInfo&gt; injectFieldCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();

    <span class="hljs-comment">/**
     * å­˜å‚¨éœ€è¦åŠ¨æ€æ³¨å…¥çš„å­—æ®µä¿¡æ¯
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FieldInjectInfo</span> {
        Object bean; <span class="hljs-comment">// æ‰€å±Beanï¼ˆå¦‚Controllerå®ä¾‹ï¼‰</span>
        Field field; <span class="hljs-comment">// è¦æ³¨å…¥çš„å­—æ®µï¼ˆå¦‚SalesBoardServiceï¼‰</span>

        FieldInjectInfo(Object bean, Field field) {
            <span class="hljs-built_in">this</span>.bean = bean;
            <span class="hljs-built_in">this</span>.field = field;
        }
    }

    <span class="hljs-comment">/**
     * Springåˆå§‹åŒ–Beanæ—¶æ‰§è¡Œï¼šæ‰«æ<span class="hljs-doctag">@DynamicAutowired</span>å­—æ®µå¹¶æ³¨å…¥å®ä¾‹
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessBeforeInitialization</span><span class="hljs-params">(Object bean, String beanName)</span> <span class="hljs-keyword">throws</span> BeansException {
        <span class="hljs-comment">// æ‰«æå½“å‰Beançš„æ‰€æœ‰å­—æ®µ</span>
        ReflectionUtils.doWithFields(bean.getClass(), field -&gt; {
            <span class="hljs-comment">// æ‰¾åˆ°å¸¦@DynamicAutowiredçš„å­—æ®µ</span>
            <span class="hljs-keyword">if</span> (field.isAnnotationPresent(DynamicAutowired.class)) {
                lock.lock();
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// 1. è·å–å­—æ®µç±»å‹ï¼ˆå¦‚SalesBoardServiceæ¥å£ï¼‰</span>
                    Class&lt;?&gt; fieldType = field.getType();
                    <span class="hljs-comment">// 2. é€šè¿‡é€šç”¨å·¥å‚è·å–å½“å‰ç”Ÿæ•ˆçš„å®ä¾‹</span>
                    <span class="hljs-type">Object</span> <span class="hljs-variable">serviceInstance</span> <span class="hljs-operator">=</span> dynamicServiceFactory.getService(fieldType);
                    <span class="hljs-comment">// 3. åå°„æ³¨å…¥å­—æ®µï¼ˆçªç ´privateè®¿é—®é™åˆ¶ï¼‰</span>
                    field.setAccessible(<span class="hljs-literal">true</span>);
                    field.set(bean, serviceInstance);
                    <span class="hljs-comment">// 4. ç¼“å­˜å­—æ®µä¿¡æ¯ï¼ˆé…ç½®åˆ·æ–°æ—¶é‡æ–°æ³¨å…¥ï¼‰</span>
                    injectFieldCache.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FieldInjectInfo</span>(bean, field));
                    log.info(<span class="hljs-string">"åŠ¨æ€æ³¨å…¥å­—æ®µï¼šBean={}, å­—æ®µ={}, æ³¨å…¥å®ä¾‹={}"</span>,
                            beanName, field.getName(), serviceInstance.getClass().getSimpleName());
                } <span class="hljs-keyword">catch</span> (IllegalAccessException e) {
                    log.error(<span class="hljs-string">"åŠ¨æ€æ³¨å…¥å­—æ®µå¤±è´¥"</span>, e);
                } <span class="hljs-keyword">finally</span> {
                    lock.unlock();
                }
            }
        });
        <span class="hljs-keyword">return</span> bean;
    }

    <span class="hljs-comment">/**
     * é…ç½®åˆ·æ–°äº‹ä»¶ç›‘å¬ï¼šé‡æ–°æ³¨å…¥æ‰€æœ‰åŠ¨æ€å­—æ®µï¼ˆä¿è¯å®ä¾‹æœ€æ–°ï¼‰
     */</span>
    <span class="hljs-meta">@EventListener(RefreshScopeRefreshedEvent.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">refreshDynamicFields</span><span class="hljs-params">()</span> {
        lock.lock();
        <span class="hljs-keyword">try</span> {
            log.info(<span class="hljs-string">"é…ç½®åˆ·æ–°ï¼Œé‡æ–°æ³¨å…¥æ‰€æœ‰åŠ¨æ€æœåŠ¡å­—æ®µ"</span>);
            <span class="hljs-keyword">for</span> (FieldInjectInfo info : injectFieldCache) {
                Class&lt;?&gt; fieldType = info.field.getType();
                <span class="hljs-type">Object</span> <span class="hljs-variable">newInstance</span> <span class="hljs-operator">=</span> dynamicServiceFactory.getService(fieldType);
                info.field.setAccessible(<span class="hljs-literal">true</span>);
                info.field.set(info.bean, newInstance);
            }
        } <span class="hljs-keyword">catch</span> (IllegalAccessException e) {
            log.error(<span class="hljs-string">"é‡æ–°æ³¨å…¥åŠ¨æ€å­—æ®µå¤±è´¥"</span>, e);
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }
}
</code></pre>
<h2 data-id="heading-3">æ·»åŠ é…ç½®</h2>
<p>æœ€åï¼Œå°±æ˜¯åœ¨nacosæˆ–è€…æœ¬åœ°é…ç½®é‡Œé¢åŠ ä¸Š@DynamicServiceæ³¨è§£ä¸­æ ‡æ³¨çš„é…ç½®é”®ã€‚</p>
<p>æœ€åæ•´ä½“çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a3155e9f41f4c6195334c2e6d92b6ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oan5oas5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766152837&amp;x-signature=rCUNs4vUW0W9LJJ5tgesyMg5%2FdE%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ AIGC å¦‚ä½•é‡å¡‘ Web å†…å®¹ç”Ÿäº§çš„ä»·å€¼é“¾ â€”â€” ä¸€åœºâ€œç¡…åŸºæ–‡è‰ºå¤å…´â€çš„æŠ€æœ¯å˜é©]]></title>    <link>https://juejin.cn/post/7582848701267623971</link>    <guid>https://juejin.cn/post/7582848701267623971</guid>    <pubDate>2025-12-13T02:58:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582848701267623971" data-draft-id="7582845425402314792" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ AIGC å¦‚ä½•é‡å¡‘ Web å†…å®¹ç”Ÿäº§çš„ä»·å€¼é“¾ â€”â€” ä¸€åœºâ€œç¡…åŸºæ–‡è‰ºå¤å…´â€çš„æŠ€æœ¯å˜é©"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å…¨æ ˆ,AIGC"/> <meta itemprop="datePublished" content="2025-12-13T02:58:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ AIGC å¦‚ä½•é‡å¡‘ Web å†…å®¹ç”Ÿäº§çš„ä»·å€¼é“¾ â€”â€” ä¸€åœºâ€œç¡…åŸºæ–‡è‰ºå¤å…´â€çš„æŠ€æœ¯å˜é©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T02:58:02.000Z" title="Sat Dec 13 2025 02:58:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  ä¸€ã€ä»â€œå†…å®¹ä¸ºç‹â€åˆ°â€œç®—æ³•ç™»åŸºâ€</h2>
<p>æ›¾ç»çš„ Web å†…å®¹ä¸–ç•Œæ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>äººç±»åˆ›ä½œè€…æŒ¥æ´’æ‰åï¼Œç”¨<strong>é”®ç›˜æ•²æ‰“å‡ºæ„ä¹‰</strong>ã€‚</li>
<li>å¹³å°å……å½“ä¸­ä»‹è€…ï¼Œè´Ÿè´£<strong>æµé‡åˆ†å‘ä¸ä»·å€¼å®šä»·</strong>ã€‚</li>
<li>ç”¨æˆ·åŸ‹å¤´åˆ·å±ï¼Œåœ¨ä¿¡æ¯æ´ªæµä¸­äº«å—<strong>è¢«æ¨èçš„å¿«æ„Ÿ</strong>ã€‚</li>
</ul>
<p>ç„¶åï¼Œ<strong>AIGCï¼ˆAI Generated Contentï¼‰</strong> â€”â€” äººå·¥æ™ºèƒ½ç”Ÿæˆå†…å®¹ â€”â€” åƒä¸€ä½å¤©æ‰ä½œæ›²å®¶é—¯å…¥ä¹é˜Ÿï¼Œä¹è°±æ²¡çœ‹ä¸¤çœ¼å°±å¼¹å‡ºäº†äº¤å“ä¹ã€‚</p>
<p>è¿™ä¸æ˜¯ç®€å•çš„ç”Ÿäº§åŠ›æå‡ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>ä»â€œäººå†™ç»™äººçœ‹â€å˜æˆâ€œäºº+AIä¸€èµ·å†™ç»™ä¸–ç•Œçœ‹â€ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ”© äºŒã€AIGC èƒŒåçš„åº•å±‚æŠ€æœ¯é½¿è½® ğŸ§©</h2>
<p>AIGC å¹¶ä¸æ˜¯é­”æ³•ï¼Œå®ƒæ˜¯ä¸€ç³»åˆ—åº•å±‚åŸç†å…±åŒå¥å“çš„æœºå™¨äº¤å“æ›²ã€‚</p>
<h3 data-id="heading-2">1. æ¨¡å‹åŸºç¡€ï¼šä»â€œç‰¹å¾â€åˆ°â€œè¯­ä¹‰â€</h3>
<ul>
<li>ä¼ ç»Ÿç®—æ³•ï¼šçœ‹çš„æ˜¯â€œå…³é”®å­—â€</li>
<li>AIGCï¼šç†è§£çš„æ˜¯è¯­ä¹‰ã€ä¸Šä¸‹æ–‡ã€è¯­æ°”ã€æƒ…ç»ª</li>
</ul>
<p>AI ä¸åªæ˜¯ç»Ÿè®¡å­—è¯å‡ºç°çš„æ¦‚ç‡ï¼Œè€Œæ˜¯æ„å»ºäº†ä¸€ä¸ª <strong>å¤šç»´è¯­ä¹‰ç©ºé—´</strong>ã€‚<br/>
åœ¨è¿™ä¸ªç©ºé—´ä¸­ï¼Œâ€œçŒ«â€å’Œâ€œå–µæ˜Ÿäººâ€å‡ ä¹æ˜¯é‚»å±…ï¼Œå®ƒä»¬ä¹‹é—´çš„è·ç¦»å¾ˆå°ã€‚<br/>
äºæ˜¯æ¨¡å‹çŸ¥é“ä¸¤è€…éƒ½æ˜¯<strong>å¸¦æ¯›çš„ç»Ÿæ²»äººç±»çš„å­˜åœ¨</strong>ğŸ˜¹ã€‚</p>
<h3 data-id="heading-3">2. ç®—æ³•å¼•æ“ï¼šTransformer çš„é­”æ³•æ£’ âœ¨</h3>
<p>Transformer æ¶æ„è®©æ¨¡å‹å¯ä»¥å¹¶è¡Œå…³æ³¨ä¸åŒçš„ä¸Šä¸‹æ–‡ã€‚<br/>
è¿™ç§â€œè‡ªæ³¨æ„åŠ›æœºåˆ¶â€è®©æ¯ä¸ªå•è¯ä¹‹é—´çš„å…³ç³»éƒ½èƒ½è¢«è®¡ç®—æœºæ•æ‰åˆ°ã€‚<br/>
å®ƒä¸å†æ˜¯æµæ°´çº¿å¼è¯»å–ï¼Œè€Œåƒä¸€ä¸ªèªæ˜çš„ç¼–è¾‘ï¼Œä¸€è¾¹è¯»ç¨¿ï¼Œä¸€è¾¹æ€è€ƒæ•´ç¯‡æ–‡ç« çš„ç»“æ„ã€‚</p>
<h3 data-id="heading-4">3. è®¡ç®—åŠ›ä¸å­˜å‚¨ï¼šç¡…çš„è‚Œè‚‰ä¸æ•°æ®çš„è¡€æ¶² ğŸ§¬</h3>
<p>æ²¡æœ‰ç®—åŠ›ï¼ŒAI å°±åƒå¤±å»äº†æ°§æ°”ã€‚GPU çš„å¹¶è¡Œè®¡ç®—ã€TPU çš„çŸ©é˜µåŠ é€Ÿã€å­˜å‚¨çš„ä¼˜åŒ–ç»“æ„ï¼Œå…±åŒæ„æˆ AIGC çš„ä½“èƒ½ä¿éšœã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä»¥ä¸€ç§ä¸ä½¿ç”¨å…¬å¼çš„æ–¹å¼æè¿°å®ƒï¼š</p>
<blockquote>
<p>æ¨¡å‹èƒ½åŠ› â‰ˆ æ•°æ®é‡ Ã— ç®—åŠ› Ã— ç®—æ³•ä¼˜åŒ–ç¨‹åº¦<br/>
ï¼ˆç®€å•è¯´ï¼Œ<strong>å–‚å¾—å¤šã€ç®—å¾—å¿«ã€è®¾è®¡å·§</strong>ï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ğŸ’¼ ä¸‰ã€AIGC é‡å¡‘ä»·å€¼é“¾çš„é€»è¾‘</h2>






























<table><thead><tr><th>è§’è‰²</th><th>AIGC ä»‹å…¥å‰</th><th>AIGC ä»‹å…¥å</th></tr></thead><tbody><tr><td>åˆ›ä½œè€…</td><td>é ç»éªŒä¸çµæ„Ÿ</td><td>å¯ä»¥é  Prompt ä¸æ¨¡å‹åä½œ</td></tr><tr><td>å¹³å°</td><td>åˆ†å‘äººå·¥å†…å®¹</td><td>åˆ†å‘<strong>ç®—æ³•å…±åˆ›å†…å®¹</strong></td></tr><tr><td>ç”¨æˆ·</td><td>æ¶ˆè´¹é™æ€ä¿¡æ¯</td><td>ä¸ AI <strong>äº’åŠ¨ç”Ÿæˆ</strong>ä¸ªæ€§å†…å®¹</td></tr><tr><td>å¹¿å‘Šä¸»</td><td>æŠ•æ”¾é™æ€å¹¿å‘Š</td><td>æŠ•æ”¾<strong>AI åŠ¨æ€å®šåˆ¶å¹¿å‘Š</strong></td></tr></tbody></table>
<p>AIGC å°±åƒç»™ä»·å€¼é“¾æ³¨å…¥äº†æ™ºèƒ½è¡€æ¶²ã€‚<br/>
å®ƒä»**â€œå†…å®¹ç”Ÿäº§â€å»¶ä¼¸åˆ°â€œå†…å®¹è¿­ä»£â€ä¸â€œå†…å®¹ä½“éªŒâ€**ã€‚</p>
<blockquote>
<p>å†…å®¹ä¸å†æ˜¯ä¸€æ¬¡æ€§çš„åˆ›ä½œï¼Œè€Œæ˜¯ä¸€æ¬¡æŒç»­æ›´æ–°çš„â€œæ•°å­—ç”Ÿç‰©ä½“â€ã€‚ğŸŒ±</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ğŸ§¬ å››ã€æŠ€æœ¯é©±åŠ¨çš„å˜é©å‰–æ</h2>
<h3 data-id="heading-7">1. å†…å®¹ç”Ÿäº§è‡ªåŠ¨åŒ–</h3>
<p>æœºå™¨ç†è§£ä¸Šä¸‹æ–‡åï¼Œèƒ½è‡ªåŠ¨ç”Ÿæˆç½‘é¡µæ–‡æ¡ˆã€çŸ­è§†é¢‘è„šæœ¬ã€ç”¨æˆ·è¯„è®ºå›å¤ã€‚<br/>
ç”šè‡³èƒ½ä¸€è¾¹å†™ï¼Œä¸€è¾¹<strong>A/B æµ‹è¯•æ•ˆæœ</strong>ï¼Œå®ç°å®æ—¶å†…å®¹ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-8">2. åˆ†å‘æ™ºèƒ½åŒ–</h3>
<p>AI ä¸ä»…äº§ç”Ÿå†…å®¹ï¼Œè¿˜èƒ½æ ¹æ®ç”¨æˆ·çš„ç‚¹å‡»ã€åœç•™æ—¶é—´ã€å…´è¶£å»ºæ¨¡ç”Ÿæˆä¸ªæ€§æ¨èã€‚<br/>
è¿™è®©æ¯ä¸ªç”¨æˆ·çœ‹åˆ°çš„ç½‘é¡µéƒ½æ˜¯ä¸ºè‡ªå·±å®šåˆ¶çš„ <strong>â€œåŠ¨æ€é•œåƒâ€</strong> ã€‚</p>
<h3 data-id="heading-9">3. åé¦ˆé‡åŒ–</h3>
<p>æ¯ä¸€æ¬¡ç‚¹å‡»ã€æ¯ä¸€æ¬¡æ»‘åŠ¨ã€æ¯ä¸€ä¸ªè¡¨æƒ…ï¼Œéƒ½æˆäº†è®­ç»ƒæ•°æ®ã€‚<br/>
AI å€Ÿæ­¤åé¦ˆè°ƒæ•´å†…å®¹ç»“æ„â€”â€”è¿™å«<strong>è‡ªé€‚åº”å†…å®¹æ¼”åŒ–</strong>ï¼Œä»¿ä½›å†…å®¹åœ¨è‡ªå·±å­¦ä¹ å¦‚ä½•å–æ‚¦è¯»è€…ã€‚</p>
<hr/>
<h2 data-id="heading-10">ğŸ”¬ äº”ã€ä»·å€¼é“¾çš„â€œå†ç¼–è¯‘â€(Recompile)</h2>
<p>å‰äº’è”ç½‘æ—¶ä»£ï¼Œä»·å€¼é“¾æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">åˆ›ä½œè€… <span class="hljs-punctuation">-&gt;</span> å¹³å° <span class="hljs-punctuation">-&gt;</span> ç”¨æˆ· <span class="hljs-punctuation">-&gt;</span> å¹¿å‘Šä¸»
</code></pre>
<p>AIGC æ—¶ä»£ï¼Œç»“æ„å·²ç»å˜æˆï¼š</p>
<pre><code class="hljs language-rust" lang="rust">ç”¨æˆ· &lt;<span class="hljs-punctuation">-&gt;</span> AIGC å¼•æ“ &lt;<span class="hljs-punctuation">-&gt;</span> å¹³å° &lt;<span class="hljs-punctuation">-&gt;</span> ç”Ÿæ€ç³»ç»Ÿ
</code></pre>
<p>ç°åœ¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ‹¥æœ‰â€œæ™ºèƒ½æ¥å£â€ï¼Œå½¼æ­¤æ²Ÿé€šçš„æ•°æ®ä¸å†æ˜¯å•å‘æµï¼Œè€Œæ˜¯å¾ªç¯æµã€‚<br/>
è¿™å°±åƒæ“ä½œç³»ç»Ÿä»å•çº¿ç¨‹åˆ°å¤šçº¿ç¨‹çš„è¿›åŒ–ï¼Œè®©æ•´ä¸ªç»æµä½“çš„<strong>å¹¶è¡Œå¤„ç†èƒ½åŠ›</strong>å€å¢ã€‚âš™ï¸</p>
<hr/>
<h2 data-id="heading-11">ğŸ§‘â€ğŸ’» å…­ã€å®è·µï¼šç”¨ JS æ¨¡æ‹Ÿä¸€æ¬¡â€œAI è‡ªåŠ¨æ–‡ç¨¿ç”Ÿæˆâ€</h2>
<blockquote>
<p>å°å®éªŒï¼šæˆ‘ä»¬ç”¨ç®€çŸ­çš„ JavaScript å±•ç¤ºä¸€ä¸ªâ€œæ¨¡æ‹Ÿå†…å®¹ç”Ÿæˆå™¨â€ã€‚</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ğŸ§  ç®€æ˜“ AIGC æ¨¡æ‹Ÿè„šæœ¬</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MiniAIGC</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">modelName = <span class="hljs-string">'WebWriter-V1'</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = modelName;
  }

  <span class="hljs-title function_">generate</span>(<span class="hljs-params">prompt</span>) {
    <span class="hljs-keyword">const</span> inspirations = [
      <span class="hljs-string">"åœ¨ä¿¡æ¯çš„æµªæ½®ä¸­ï¼Œæ•°æ®å¦‚æ˜Ÿè¾°é—ªçƒã€‚"</span>,
      <span class="hljs-string">"ç®—æ³•æœ‰èŠ‚å¥ï¼Œä»£ç åƒè¯—ä¸€æ ·å‘¼å¸ã€‚"</span>,
      <span class="hljs-string">"åƒç´ æ˜¯æ–°çš„æ²¹å¢¨ï¼ŒæœåŠ¡å™¨æ˜¯æ–°çš„å°åˆ·æœºã€‚"</span>
    ];
    <span class="hljs-keyword">const</span> randomIdea = inspirations[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * inspirations.<span class="hljs-property">length</span>)];
    <span class="hljs-keyword">return</span> <span class="hljs-string">`ğŸ¤– [<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.model}</span>] ç”Ÿæˆå“åº”ï¼š<span class="hljs-subst">${prompt}</span> â€”â€” <span class="hljs-subst">${randomIdea}</span>`</span>;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç”Ÿæˆå™¨</span>
<span class="hljs-keyword">const</span> ai = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MiniAIGC</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ai.<span class="hljs-title function_">generate</span>(<span class="hljs-string">"è¯·å†™ä¸€å¥æè¿°æœªæ¥å†…å®¹ç”Ÿæ€çš„å¥å­"</span>));
</code></pre>
<blockquote>
<p>è¾“å‡ºç¤ºä¾‹ï¼š<br/>
ğŸ¤– [WebWriter-V1] ç”Ÿæˆå“åº”ï¼šè¯·å†™ä¸€å¥æè¿°æœªæ¥å†…å®¹ç”Ÿæ€çš„å¥å­ â€”â€” ç®—æ³•æœ‰èŠ‚å¥ï¼Œä»£ç åƒè¯—ä¸€æ ·å‘¼å¸ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">ğŸ”® ä¸ƒã€å±•æœ›ï¼šä» AIGC åˆ° AIECï¼ˆAI Empowered Creativityï¼‰</h2>
<p>æœªæ¥çš„äº’è”ç½‘å¯èƒ½æ¼”åŒ–ä¸ºä¸€ä¸ª<strong>å…±åˆ›å…ƒå®‡å®™</strong>ã€‚<br/>
æ–‡æ¡ˆã€ä»£ç ã€è®¾è®¡ã€è§†é¢‘ã€éŸ³ä¹ï¼Œå…¨éƒ¨åœ¨æ™ºèƒ½ç³»ç»Ÿçš„åä½œä¸‹å®Œæˆã€‚</p>
<p>äººç±»ä¼šä»å†…å®¹çš„â€œç”Ÿäº§è€…â€å˜æˆ<strong>æ„ä¹‰çš„ç­–å±•äºº</strong>ã€‚<br/>
AI å†™ç¨¿ï¼Œæˆ‘ä»¬å®šä¹‰æ–¹å‘ï¼›AI è®¾è®¡ï¼Œæˆ‘ä»¬é€‰æ‹©å®¡ç¾ã€‚</p>
<blockquote>
<p><strong>äººèµ‹äºˆçµé­‚ï¼ŒAI æ‰“ç£¨è¡¨è¾¾ã€‚</strong></p>
</blockquote>
<p>è¿™æ ·çš„é‡å¡‘ï¼Œä¸åªæ˜¯æŠ€æœ¯é©å‘½ï¼Œæ›´æ˜¯ä¸€åœºå…³äº<strong>æ€ç»´æ–¹å¼çš„é‡æ„</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» C10K åˆ° C1Mï¼šApache çš„èŒ¶é¦†ã€Nginx çš„å›è½¬å¯¿å¸ï¼Œä¸åƒä¸‡è¿æ¥çš„é™é»˜é©å‘½]]></title>    <link>https://juejin.cn/post/7582637280219103286</link>    <guid>https://juejin.cn/post/7582637280219103286</guid>    <pubDate>2025-12-12T15:01:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582637280219103286" data-draft-id="7582637280219070518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» C10K åˆ° C1Mï¼šApache çš„èŒ¶é¦†ã€Nginx çš„å›è½¬å¯¿å¸ï¼Œä¸åƒä¸‡è¿æ¥çš„é™é»˜é©å‘½"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T15:01:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pypirus"/> <meta itemprop="url" content="https://juejin.cn/user/958429872790984"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» C10K åˆ° C1Mï¼šApache çš„èŒ¶é¦†ã€Nginx çš„å›è½¬å¯¿å¸ï¼Œä¸åƒä¸‡è¿æ¥çš„é™é»˜é©å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429872790984/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pypirus
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:01:56.000Z" title="Fri Dec 12 2025 15:01:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ—§æ—¥èŒ¶é¦†ï¼šApache çš„â€œä¸€äººä¸€æ¤…â€åŠå…¶éšç—›</h2>
<p>2000 å¹´ä»£åˆï¼Œäº’è”ç½‘å°šå¦‚æ™¨å¸‚ï¼ŒApache æ˜¯è¡—å¤´æœ€ä½“é¢çš„èŒ¶é¦†ã€‚å®ƒé‡‡ç”¨ <strong>å¤šè¿›ç¨‹æ¨¡å‹ï¼ˆprefork MPMï¼‰</strong>ï¼šæ¯æ¥ä¸€ä½å®¢äººï¼ˆHTTP è¯·æ±‚ï¼‰ï¼Œå°±å®‰æ’ä¸€ä½èŒ¶åšå£«ï¼ˆå­è¿›ç¨‹ï¼‰å…¨ç¨‹ä¾å¥‰â€”â€”å€’æ°´ã€é€’ç‚¹å¿ƒã€ç»“è´¦ï¼Œäº‹æ— å·¨ç»†ï¼ŒåŒ…åŠåˆ°åº•ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Client 1] --&gt;|TCP| P1[Apache Worker 1]
    B[Client 2] --&gt;|TCP| P2[Apache Worker 2]
    C[Client N] --&gt;|TCP| PN[Apache Worker N]
    P1 --&gt; K[(OS Kernel)]
    P2 --&gt; K
    PN --&gt; K
</code></pre>
<p>è¿™ç§è®¾è®¡åœ¨ç™¾äººè§„æ¨¡æ—¶æ¸©æ–‡å°”é›…ï¼Œä½†å½“å®¢æµé‡é€¼è¿‘ <strong>10,000 å¹¶å‘ï¼ˆC10Kï¼‰</strong>ï¼Œé—®é¢˜å¦‚èŒ¶æ¸èˆ¬è¿…é€Ÿæ‰©æ•£ï¼š</p>
<ul>
<li><strong>æ€§èƒ½ä¸Š</strong>ï¼šæ¯ä¸ª worker å ç”¨ 2â€“8 MB å†…å­˜ï¼Œ10K è¿æ¥éœ€ 20â€“80 GB RAMï¼›æ›´ç³Ÿçš„æ˜¯ï¼Œæ“ä½œç³»ç»Ÿåœ¨åˆ‡æ¢è¿›ç¨‹æ—¶éœ€ä¿å­˜/æ¢å¤ä¸Šä¸‹æ–‡ï¼Œè¿™ç¬”â€œè°ƒåº¦ç¨â€éšè¿æ¥æ•°å¹³æ–¹å¢é•¿ã€‚</li>
<li><strong>è¿ç»´ä¸Š</strong>ï¼šé…ç½®æ–‡ä»¶é‡Œ <code>MaxRequestWorkers</code>ã€<code>MinSpareThreads</code> ç­‰å‚æ•°å¦‚åŒæš—è¯­ï¼Œè°ƒé«˜åˆ™å†…å­˜çˆ†ï¼Œè°ƒä½åˆ™æ‹’ç»æœåŠ¡â€”â€”åƒåœ¨æ‚¬å´–è¾¹ç…®èŒ¶ã€‚</li>
<li><strong>å®‰å…¨ä¸Š</strong>ï¼šæ‰€æœ‰ worker å…±äº«ç›¸åŒæƒé™ï¼Œè‹¥æŸä¸ªæ¨¡å—ï¼ˆå¦‚ mod_phpï¼‰æœ‰æ¼æ´ï¼Œæ•´åº§èŒ¶é¦†å¯èƒ½å› ä¸€æ¯â€œæ¯’èŒ¶â€è€Œåœä¸šã€‚</li>
</ul>
<blockquote>
<p>å°½ç®¡Linuxè¿›ç¨‹è°ƒåº¦æ˜¯O(logn)ï¼Œä½†å¯¹äºè¿™ä¸ªç³»ç»Ÿæ¥è¯´ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¯å»ºæ¨¡ä¸º</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>T</mi><mtext>ctx</mtext></msub><mo>=</mo><msub><mi>N</mi><mtext>conn</mtext></msub><mo>Ã—</mo><msub><mi>C</mi><mtext>switch</mtext></msub></mrow><annotation encoding="application/x-tex">T_{\text{ctx}} = N_{\text{conn}} \times C_{\text{switch}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">ctx</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">conn</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">switch</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></div>
<p>å…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mtext>switch</mtext></msub></mrow><annotation encoding="application/x-tex">C_{\text{switch}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">switch</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çº¦ 1â€“3 å¾®ç§’ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mtext>conn</mtext></msub></mrow><annotation encoding="application/x-tex">N_{\text{conn}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">conn</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä¸ºæ´»è·ƒå¹¶å‘è¿æ¥æ•°ã€‚å½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mtext>conn</mtext></msub><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>4</mn></msup></mrow><annotation encoding="application/x-tex">N_{\text{conn}} = 10^4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">conn</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œä»…åˆ‡æ¢å°±è€—å» 10â€“30 æ¯«ç§’â€”â€”ç”¨æˆ·æ—©å·²åˆ·æ–°é¡µé¢ä¸‰æ¬¡ã€‚</p>
</blockquote>
<p><strong>ç±»æ¯”</strong>ï¼šè¿™å°±åƒä¸ºæ¯ä½é¡¾å®¢é…ä¸€è¾†ä¸“å±å‡ºç§Ÿè½¦ã€‚çŸ­é€”å°šå¯ï¼Œè‹¥å…¨åŸä¸‡äººåŒæ—¶æ‰“è½¦ï¼Œé“è·¯ç˜«ç—ªã€å¸æœºçŒæ­»ã€æ²¹è´¹çƒ§å…‰ã€‚æ•ˆç‡ä¸åœ¨äºè½¦å¤šï¼Œè€Œåœ¨äºèƒ½å¦å…±äº«è¿åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æ–°å¼å›è½¬ï¼šNginx çš„äº‹ä»¶è½®ç›˜å¦‚ä½•è§£å±€</h2>
<p>2004 å¹´ï¼Œä¿„ç½—æ–¯ç¨‹åºå‘˜ Igor Sysoev å¼€äº†ä¸€å®¶æ–°åº—ï¼š<strong>Nginx å¯¿å¸å›è½¬</strong>ã€‚åº—é‡Œåªæœ‰å‡ ä¸ªæœåŠ¡å‘˜ï¼ˆworker è¿›ç¨‹ï¼Œé€šå¸¸ç­‰äº CPU æ ¸æ•°ï¼‰ï¼Œæ¯äººå®ˆç€ä¸€ä¸ªé«˜é€Ÿä¼ é€å¸¦ï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚å®¢äººåä¸‹ä¸åŠ¨ï¼Œèœå•éœ€æ±‚åŒ–ä½œå¡ç‰‡æŠ•è¿›ç³»ç»Ÿï¼ŒæœåŠ¡å‘˜åªåœ¨â€œé£Ÿæåˆ°ä½â€ï¼ˆsocket å¯è¯»/å¯å†™ï¼‰æ—¶å‡ºæ‰‹ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Client 1] --&gt;|TCP| W[Nginx Worker]
    B[Client 2] --&gt;|TCP| W
    C[Client N] --&gt;|TCP| W
    W --&gt;|epoll| K[(Linux Kernel)]
    subgraph "User Space"
        W
    end
</code></pre>
<p>Nginx çš„ä¸‰å¤§æ”¯æŸ±ï¼Œæ­£æ˜¯å¯¹ Apache ç—›ç‚¹çš„ç²¾å‡†æ‰“å‡»ï¼š</p>
<ol>
<li><strong>äº‹ä»¶é©±åŠ¨ï¼ˆEvent-Drivenï¼‰</strong>ï¼šç”¨å•çº¿ç¨‹å¤„ç†æ•°ä¸‡è¿æ¥ï¼Œé¿å…è¿›ç¨‹çˆ†ç‚¸ï¼›</li>
<li><strong>éé˜»å¡ I/O</strong>ï¼šè¯»æ–‡ä»¶æˆ–è½¬å‘è¯·æ±‚æ—¶ï¼Œä¸å¹²ç­‰ï¼Œç«‹åˆ»å¤„ç†ä¸‹ä¸€å¼ å¡ç‰‡ï¼›</li>
<li><strong>æç®€è¿æ¥çŠ¶æ€</strong>ï¼šæ¯ä¸ªè¿æ¥ä»…å  2.5â€“4 KB å†…å­˜ï¼Œæ— ç‹¬ç«‹æ ˆã€æ— çº¿ç¨‹ã€‚</li>
</ol>
<blockquote>
<p>Nginx çš„ç†è®ºååå¯è¿‘ä¼¼ä¸º</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Q</mi><mi>P</mi><mi>S</mi><mo>â‰ˆ</mo><mfrac><msub><mi>B</mi><mtext>net</mtext></msub><msub><mi>L</mi><mtext>avg</mtext></msub></mfrac><mo>Ã—</mo><mi>Î·</mi></mrow><annotation encoding="application/x-tex">QPS \approx \frac{B_{\text{net}}}{L_{\text{avg}}} \times \eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">QPS</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.3324em;vertical-align:-0.9721em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">net</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span></span></span></span></span></div>
<p>å…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>B</mi><mtext>net</mtext></msub></mrow><annotation encoding="application/x-tex">B_{\text{net}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">net</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯ç½‘ç»œå¸¦å®½ï¼ˆå¦‚ 1 Gbpsï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mtext>avg</mtext></msub></mrow><annotation encoding="application/x-tex">L_{\text{avg}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">avg</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯å¹³å‡å“åº”å¤§å°ï¼ˆå¦‚ 10 KBï¼‰ï¼Œ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î·</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Î·</span></span></span></span></span> æ˜¯äº‹ä»¶å¤„ç†æ•ˆç‡ï¼ˆé€šå¸¸ &gt;0.9ï¼‰ã€‚è¿™æ„å‘³ç€æ€§èƒ½ç“¶é¢ˆä»â€œCPU è°ƒåº¦â€è½¬å‘â€œç‰©ç†å¸¦å®½â€â€”â€”ä¸€ä¸ªå¥åº·çš„è½¬ç§»ã€‚</p>
</blockquote>
<p><strong>ç±»æ¯”</strong>ï¼šå›è½¬å¯¿å¸åº—ä¸ä¸ºæ¯ä½å®¢äººé…å¨æˆ¿ï¼Œè€Œæ˜¯è®©é£Ÿç‰©æµåŠ¨èµ·æ¥ã€‚æœåŠ¡å‘˜åªåœ¨éœ€è¦æ—¶å–æ”¾ï¼Œå…¶ä½™æ—¶é—´è§‚å¯Ÿå…¨å±€ã€‚æ•ˆç‡ä¸åœ¨äººå¤šï¼Œè€Œåœ¨<strong>å‡å°‘ç­‰å¾…ã€å¢åŠ æµåŠ¨</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ä¸ºä½•è€Œå˜ï¼Ÿç°å®å‹åŠ›ä¸‹çš„å¿…ç„¶é€‰æ‹©</h2>
<p>è¿™åœºæ¶æ„è¿ç§»ï¼Œç»éæŠ€æœ¯æ´ç™–çš„äº§ç‰©ï¼Œè€Œæ˜¯è¢«ä¸‰é‡ç°å®åˆåŠ›æ¨åŠ¨ï¼š</p>
<ul>
<li><strong>ä¸šåŠ¡å½¢æ€å˜åŒ–</strong>ï¼šWeb 2.0 æ—¶ä»£ï¼Œé•¿è¿æ¥ã€WebSocketã€å®æ—¶æ¨é€å…´èµ·ï¼Œè¿æ¥ä¸å†â€œç”¨å®Œå³èµ°â€ï¼Œè€Œæ˜¯â€œé©»ç•™æ•°å°æ—¶â€ã€‚Apache çš„â€œç”¨å®Œå°±æ•£â€æ¨¡å‹æˆæœ¬å‰§å¢ã€‚</li>
<li><strong>ç¡¬ä»¶ç»æµå­¦</strong>ï¼š2005 å¹´å†…å­˜ä»·æ ¼çº¦ $20/GBï¼ŒC10K è‹¥ç”¨ Apache éœ€æ•°ç™¾ç¾å…ƒå†…å­˜ï¼Œè€Œ Nginx ä»…éœ€å‡ åå…ƒâ€”â€”å¯¹åˆåˆ›å…¬å¸ï¼Œè¿™æ˜¯ç”Ÿæ­»ä¹‹å·®ã€‚</li>
<li><strong>æ“ä½œç³»ç»Ÿæˆç†Ÿ</strong>ï¼šLinux 2.6 å¼•å…¥ <code>epoll</code>ï¼ŒBSD æœ‰ <code>kqueue</code>ï¼Œä¸ºé«˜æ•ˆäº‹ä»¶é€šçŸ¥é“ºå¹³é“è·¯ã€‚æ²¡æœ‰è¿™äº›åº•å±‚æ”¯æŒï¼ŒNginx çš„è½®ç›˜è½¬ä¸èµ·æ¥ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œå®‰å…¨ç†å¿µä¹Ÿåœ¨è¿›åŒ–ã€‚Nginx çš„æ¨¡å—åŒ–è®¾è®¡å¤©ç„¶æ”¯æŒæ²™ç®±ï¼ˆå¦‚ <code>njs</code> è„šæœ¬å¼•æ“ï¼‰ï¼Œè€Œ Apache æ¨¡å—å¸¸ä»¥é«˜æƒé™è¿è¡Œâ€”â€”åœ¨é›¶ä¿¡ä»»æ—¶ä»£ï¼Œè¿™å·²æˆéšæ‚£ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€å½“ä¸‹ä¹‹å›°ï¼šNginx åœ¨ C1M æ—¶ä»£çš„å–˜æ¯</h2>
<p>å¦‚ä»Šï¼ŒC10K å·²æ˜¯åŸºç¡€é¢˜ï¼Œ<strong>C1Mï¼ˆç™¾ä¸‡å¹¶å‘ï¼‰</strong> ç”šè‡³ <strong>C10Mï¼ˆåƒä¸‡å¹¶å‘ï¼‰</strong> æˆä¸ºæ–°æˆ˜åœºï¼ˆå¦‚ç‰©è”ç½‘å¹³å°ã€å®æ—¶æ¸¸æˆã€é‡‘èè¡Œæƒ…ï¼‰ã€‚Nginx è™½ç»ä¼˜åŒ–ï¼ˆå¦‚ <code>SO_REUSEPORT</code>ã€<code>io_uring</code> å®éªŒæ”¯æŒï¼‰ï¼Œä½†ä»å—åˆ¶äº<strong>å†…æ ¸ç½‘ç»œæ ˆ</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ª TCP è¿æ¥åœ¨å†…æ ¸ä¸­éœ€ç»´æŠ¤ sock ç»“æ„ã€ç¼“å†²åŒºç­‰ï¼Œçº¦ 16â€“32 KBï¼Œ1M è¿æ¥å³å  16â€“32 GB å†…å­˜ï¼›</li>
<li><code>read</code>/<code>write</code> ç³»ç»Ÿè°ƒç”¨ä»éœ€ç”¨æˆ·æ€ä¸å†…æ ¸æ€åˆ‡æ¢ï¼Œé«˜é¢‘å°åŒ…åœºæ™¯ä¸‹ï¼Œè¿™ç¬”â€œç¨â€ä¸å¯å¿½è§†ï¼›</li>
<li>ä¼ ç»Ÿç½‘å¡æ¯æ”¶ä¸€ä¸ªåŒ…å°±è§¦å‘ä¸€æ¬¡ CPU ä¸­æ–­ï¼Œ10M pkt/s å¯ä½¿ CPU ä¸­æ–­å¤„ç†å æ¯”è¶… 50%ã€‚</li>
</ul>
<p>æ¢å¥è¯è¯´ï¼ŒNginx çš„æœåŠ¡å‘˜å†é«˜æ•ˆï¼Œè‹¥é£Ÿæä»éœ€ç©¿è¿‡æ‹¥æŒ¤çš„å¨æˆ¿ï¼ˆå†…æ ¸ï¼‰ï¼Œå¤©èŠ±æ¿ä¾ç„¶æ¸…æ™°ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€æœªæ¥ä¹‹è·¯ï¼šç»•è¿‡å¨æˆ¿ï¼Œç›´å–å†œåœº</h2>
<p>é¢å¯¹ C1M+ï¼Œä¸šç•Œæ­£æ¢ç´¢ä¸‰æ¡æ–°è·¯å¾„ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·æ€ç½‘ç»œæ ˆï¼ˆå¦‚ DPDKï¼‰</strong>ï¼š<br/>
åº”ç”¨ç›´æ¥æ“ä½œç½‘å¡ï¼Œ<strong>é›¶æ‹·è´ã€é›¶ç³»ç»Ÿè°ƒç”¨</strong>ã€‚ä»£è¡¨ï¼šCloudflare çš„ <code>pingora</code>ã€Tempesta FWã€‚</li>
<li><strong>é«˜æ€§èƒ½å¼‚æ­¥ I/Oï¼ˆio_uringï¼‰</strong>ï¼š<br/>
Linux 5.1+ æä¾›çš„ ring buffer æ¥å£ï¼Œå°† I/O æäº¤/å®Œæˆå®Œå…¨å¼‚æ­¥åŒ–ï¼ŒNginx å·²å¼€å§‹å®éªŒé›†æˆã€‚</li>
<li><strong>Shared-Nothing æ¶æ„ï¼ˆå¦‚ Seastarï¼‰</strong>ï¼š<br/>
æ¯ä¸ª CPU æ ¸ç‹¬å å†…å­˜ä¸ I/Oï¼Œé€šè¿‡æ— é”æ¶ˆæ¯ä¼ é€’åä½œï¼ŒScyllaDBã€Redpanda å‡åŸºäºæ­¤ï¼Œè½»æ¾æ”¯æ’‘ç™¾ä¸‡è¿æ¥ã€‚</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    Clients[1M+ Clients] --&gt; NIC[Smart NIC / XDP]
    NIC --&gt;|DMA| App[User-Space App]
    App --&gt; Core0[Core 0: Shard 0]
    App --&gt; Core1[Core 1: Shard 1]
    App --&gt; CoreN[Core N: Shard N]
    style App fill:#fff8e1,stroke:#ff8f00
    style Core0 fill:#e8f5e9,stroke:#2e7d32
</code></pre>
<p><strong>ç±»æ¯”</strong>ï¼šè¿™å¦‚åŒä»â€œå»é¤å…åƒé¥­â€è¿›åŒ–åˆ°â€œåœ¨è‡ªå®¶å¨æˆ¿é‡Œï¼Œæ— äººæœºç›´æ¥ä»å†œåœºç©ºæŠ•æ–°é²œé£Ÿæåˆ°ç¶å°â€â€”â€”ä¸­é—´ç¯èŠ‚è¶Šå°‘ï¼Œé€Ÿåº¦è¶Šå¿«ï¼Œæµªè´¹è¶Šä½ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™äº›æ–¹æ¡ˆä¹Ÿæœ‰ä»£ä»·ï¼šDPDK éœ€ç‹¬å ç½‘å¡ï¼Œio_uring ä»…é™ Linux 5.1+ï¼ŒSeastar ç¼–ç¨‹æ¨¡å‹é™¡å³­ã€‚<strong>ç†è®ºä¸Šçš„å®Œç¾ï¼Œå¸¸ä»¥å®è·µä¸­çš„å¤æ‚ä¸ºä»£ä»·</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-5">ç»“è¯­ï¼šæ¶æ„çš„æ¼”è¿›ï¼Œæ˜¯å¯¹â€œå¿…è¦ä¹‹æ¶â€çš„ä¸æ–­é‡ä¼°</h2>
<p>ä» Apache çš„èŒ¶é¦†åˆ° Nginx çš„å›è½¬å¯¿å¸ï¼Œå†åˆ°ç”¨æˆ·æ€çš„ç›´è¿ç®¡é“ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„ä¸ä»…æ˜¯æ€§èƒ½æ•°å­—çš„è·ƒå‡ï¼Œæ›´æ˜¯<strong>å¯¹æŠ½è±¡å±‚çº§ä»£ä»·çš„æ¸…é†’è®¤çŸ¥</strong>ã€‚</p>
<p>çœŸæ­£ä¼˜é›…çš„ç³»ç»Ÿï¼Œä¸åœ¨äºå †ç Œæœ€æ–°æŠ€æœ¯ï¼Œè€Œåœ¨äº<strong>åœ¨æ°å½“æ—¶æœºï¼Œæ•¢äºæ”¾å¼ƒæ›¾èµ–ä»¥æˆåŠŸçš„æŠ½è±¡</strong>ã€‚</p>
<p>æœªæ¥ï¼Œå½“ C1Bï¼ˆåäº¿è¿æ¥ï¼‰æˆä¸ºå¸¸æ€ï¼Œæˆ–è®¸æˆ‘ä»¬å°†çœ‹åˆ°ï¼š</p>
<ul>
<li>å¯ç¼–ç¨‹äº¤æ¢æœºå†…åµŒä¸šåŠ¡é€»è¾‘ï¼ˆIn-Network Computingï¼‰ï¼›</li>
<li>QUIC + RDMA ç»„åˆå½»åº•ç»•è¿‡ TCP ä¸å†…æ ¸ï¼›</li>
<li>ç”šè‡³ AI é©±åŠ¨çš„åŠ¨æ€åè®®æ ˆï¼Ÿ</li>
</ul>
<p>ä½†æ— è®ºæŠ€æœ¯å¦‚ä½•æµè½¬ï¼Œé‚£ä¸ªå¤è€é—®é¢˜å§‹ç»ˆæœªå˜ï¼š<br/>
<strong>å¦‚ä½•ç”¨æœ€å°‘çš„èµ„æºï¼ŒæœåŠ¡æœ€å¤šçš„äººï¼Ÿ</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¤– AI æ—¶ä»£ï¼šCoding å¦‚ä½•çº¦æŸæ™ºèƒ½ä½“çš„ä»»åŠ¡æ­£ç¡®ç‡]]></title>    <link>https://juejin.cn/post/7582845425402331176</link>    <guid>https://juejin.cn/post/7582845425402331176</guid>    <pubDate>2025-12-13T02:59:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582845425402331176" data-draft-id="7582861402277494818" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¤– AI æ—¶ä»£ï¼šCoding å¦‚ä½•çº¦æŸæ™ºèƒ½ä½“çš„ä»»åŠ¡æ­£ç¡®ç‡"/> <meta itemprop="keywords" content="AIGC,äººå·¥æ™ºèƒ½,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-13T02:59:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¤– AI æ—¶ä»£ï¼šCoding å¦‚ä½•çº¦æŸæ™ºèƒ½ä½“çš„ä»»åŠ¡æ­£ç¡®ç‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T02:59:50.000Z" title="Sat Dec 13 2025 02:59:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  ä¸€ã€å‰è¨€ï¼šå½“æ™ºèƒ½ä½“â€œå˜èªæ˜â€ï¼Œç¨‹åºå‘˜å°±ä¸èƒ½â€œå†™ç³Šæ¶‚â€</h2>
<p>AI æ—¶ä»£ï¼Œä»£ç ä¸å†åªæ˜¯è®©æœºå™¨<strong>å¬è¯åœ°æ‰§è¡Œå‘½ä»¤</strong>ï¼Œ<br/>
è€Œè¦è®©å®ƒ<strong>åœ¨å¤æ‚å†³ç­–ä¸­ä¸èƒ¡æ¥ã€ä¸è¶Šç•Œã€è¿˜èƒ½æŒç»­æ­£ç¡®</strong>ã€‚</p>
<p>ä½†é—®é¢˜æ¥äº† â€”â€” ä½ æ— æ³•å®Œå…¨é¢„æµ‹ä¸€ä¸ªæ‹¥æœ‰è‡ªæˆ‘è°ƒæ•´èƒ½åŠ›çš„æ¨¡å‹åœ¨å®é™…ç¯å¢ƒä¸­ä¼šæ€ä¹ˆâ€œå‘ç–¯â€ã€‚<br/>
äºæ˜¯æˆ‘ä»¬éœ€è¦ä»<strong>ç¼–ç å±‚é¢</strong>çº¦æŸå®ƒçš„â€œæ­£ç¡®ç‡â€ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<blockquote>
<p>å¦‚ä½•ç”¨ä»£ç å’Œç»“æ„è®¾è®¡ï¼Œè®©æ™ºèƒ½ä½“æ—¢èªæ˜åˆå®ˆè§„çŸ©ï¼Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€æ­£ç¡®ç‡çº¦æŸçš„ä¸‰å±‚å“²å­¦ç»“æ„</h2>
<p>å°±åƒ CPU çš„ä¸‰çº§ç¼“å­˜ï¼ŒAI ä»»åŠ¡çº¦æŸé€»è¾‘ä¹Ÿå¯åˆ†ä¸ºä¸‰å±‚ â¤ï¸â€ğŸ”¥</p>





























<table><thead><tr><th align="left">å±‚çº§</th><th align="left">åç§°</th><th align="left">æŠ€æœ¯å…³é”®è¯</th><th align="left">åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td align="left">L1</td><td align="left"><strong>è¾“å…¥çº¦æŸå±‚</strong></td><td align="left">æ•°æ®æ¸…æ´— / Prompt å·¥ç¨‹ / æ ¡éªŒ</td><td align="left">é˜²æ­¢â€œå¬é”™è¯â€</td></tr><tr><td align="left">L2</td><td align="left"><strong>ä¸­é—´é€»è¾‘å±‚</strong></td><td align="left">ä»»åŠ¡åˆ†è§£ / è·¯å¾„è§„åˆ’ / ç­–ç•¥æ¨¡å‹</td><td align="left">é˜²æ­¢â€œæƒ³æ­ªäº†â€</td></tr><tr><td align="left">L3</td><td align="left"><strong>è¾“å‡ºç›‘æ§å±‚</strong></td><td align="left">å¯è§£é‡Šæ€§æ£€æµ‹ / Rule-based Validator / RLHF</td><td align="left">é˜²æ­¢â€œåšé”™äº‹â€</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-2">ğŸª„ 1. è¾“å…¥çº¦æŸå±‚ï¼šè®©æ™ºèƒ½ä½“åªç†è§£â€œæ ¼å¼åŒ–ä¸–ç•Œâ€</h3>
<p>AI æœ€å¤§çš„æ•Œäººï¼Œæ˜¯<strong>æ¨¡æ£±ä¸¤å¯çš„è¾“å…¥</strong>ã€‚<br/>
æƒ³è®©å®ƒæ­£ç¡®ï¼Œé¦–å…ˆè¦å­¦ä¼š**â€œé©¯åŒ–ä¸Šä¸‹æ–‡â€**ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¾“å…¥å®ˆé—¨å‘˜ï¼šæ ¼å¼éªŒè¯å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">inputValidator</span>(<span class="hljs-params">prompt</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> prompt !== <span class="hljs-string">"string"</span> || prompt.<span class="hljs-title function_">trim</span>().<span class="hljs-property">length</span> &lt; <span class="hljs-number">5</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"âŒ è¾“å…¥æ— æ•ˆï¼šè¯·ç¡®ä¿ prompt æ˜¯å®Œæ•´ä¸”å…·å¤‡è¯­ä¹‰ä¿¡æ¯çš„æ–‡æœ¬ã€‚"</span>);
  }
  <span class="hljs-keyword">const</span> forbidden = [<span class="hljs-string">"delete"</span>, <span class="hljs-string">"shutdown"</span>, <span class="hljs-string">"drop table"</span>]; <span class="hljs-comment">// é˜²SQLé£æš´ ğŸ˜…</span>
  forbidden.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">word</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (prompt.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">includes</span>(word)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ğŸš« æ£€æµ‹åˆ°æ½œåœ¨å±é™©æŒ‡ä»¤ï¼"</span>);
    }
  });
  <span class="hljs-keyword">return</span> prompt.<span class="hljs-title function_">trim</span>();
}

<span class="hljs-comment">// ä½¿ç”¨æ¡ˆä¾‹</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> validPrompt = <span class="hljs-title function_">inputValidator</span>(<span class="hljs-string">"å¸®æˆ‘æ€»ç»“ä¸€ä¸‹æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒåŸç†"</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… è¾“å…¥é€šè¿‡éªŒè¯:"</span>, validPrompt);
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error.<span class="hljs-property">message</span>);
}
</code></pre>
<p>ğŸ§© <strong>åŸç†è¯´æ˜ï¼š</strong><br/>
é€šè¿‡ <em>è¾“å…¥ç™½åå• + è¯­ä¹‰é•¿åº¦é™åˆ¶ + å®‰å…¨é»‘åå•</em>ï¼Œ<br/>
åœ¨é€»è¾‘å…¥å£é˜¶æ®µè¿‡æ»¤æ‰ 80% çš„â€œæ­§ä¹‰ä¸é£é™©â€ã€‚</p>
<hr/>
<h3 data-id="heading-3">âš™ï¸ 2. ä¸­é—´é€»è¾‘å±‚ï¼šè®©æ¨¡å‹æ€è€ƒå¾—æ›´æœ‰â€œæ¡ç†â€</h3>
<p>AI æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œæœ€å¸¸è§çš„é”™è¯¯ï¼Œä¸æ˜¯â€œç®—é”™â€ï¼Œè€Œæ˜¯â€œç†è§£é”™â€ã€‚<br/>
äºæ˜¯æˆ‘ä»¬å¼•å…¥ <strong>ä»»åŠ¡é“¾çº¦æŸï¼ˆTask Chaining Constraintï¼‰</strong> ã€‚</p>
<p>æ¯ä¸ªå¤æ‚ä»»åŠ¡è¢«æ‹†åˆ†ä¸ºè‹¥å¹²æ­¥éª¤ï¼š<br/>
1ï¸âƒ£ ç†è§£æŒ‡ä»¤ â†’ 2ï¸âƒ£ åˆ†æä¸Šä¸‹æ–‡ â†’ 3ï¸âƒ£ è¾“å‡ºåˆç¨¿ â†’ 4ï¸âƒ£ è‡ªæˆ‘å®¡æŸ¥</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæç®€æ¨¡æ‹Ÿ ğŸ‘‡</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤šé˜¶æ®µä»»åŠ¡çº¦æŸ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartAgent</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">processTask</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-keyword">const</span> steps = [
      <span class="hljs-string">"ç†è§£ä»»åŠ¡éœ€æ±‚..."</span>,
      <span class="hljs-string">"åˆ†æè¾¹ç•Œæ¡ä»¶..."</span>,
      <span class="hljs-string">"ç”Ÿæˆæ‰§è¡Œæ–¹æ¡ˆ..."</span>,
      <span class="hljs-string">"äº¤å‰éªŒè¯è¾“å‡º..."</span>
    ];

    steps.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">step, i</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ§© Step <span class="hljs-subst">${i+<span class="hljs-number">1</span>}</span>: <span class="hljs-subst">${step}</span>`</span>));

    <span class="hljs-keyword">return</span> <span class="hljs-string">`âœ… [<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>] ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼š<span class="hljs-subst">${task}</span> å·²é€šè¿‡å¤šé˜¶æ®µéªŒè¯`</span>;
  }
}

<span class="hljs-comment">// å®ä¾‹æ¼”ç¤º</span>
<span class="hljs-keyword">const</span> ai = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmartAgent</span>(<span class="hljs-string">"TaskGuardian"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ai.<span class="hljs-title function_">processTask</span>(<span class="hljs-string">"åˆ†æ Web å®‰å…¨æ¼æ´"</span>));
</code></pre>
<p>ğŸ’¡ <strong>è®¾è®¡å“²å­¦ï¼š</strong></p>
<blockquote>
<p>ä¸ç›¸ä¿¡ä¸€æ¬¡ç”Ÿæˆï¼Œç›¸ä¿¡å¤šæ¬¡æ¨ç†ã€‚<br/>
æŠŠâ€œæ­£ç¡®ç‡â€æ‹†åˆ†åˆ°å¤šä¸ªé˜¶æ®µæ ¡éªŒçš„â€œåä½œç»“æ„â€ã€‚</p>
</blockquote>
<p>è¿™æ˜¯ä¸€ç§<strong>ç»“æ„åŒ–æ€è€ƒçš„è‡ªåŠ¨åŒ–</strong>ï¼Œæœ‰æ•ˆé™ä½â€œæ¨¡å‹å¹»è§‰â€çš„æ¦‚ç‡ã€‚</p>
<hr/>
<h3 data-id="heading-4">ğŸ§° 3. è¾“å‡ºç›‘æ§å±‚ï¼šæœ€åçš„â€œé˜²çˆ†é˜€â€</h3>
<p>å³ä½¿ç»è¿‡å¤šå±‚é€»è¾‘ï¼Œè¾“å‡ºä»å¯èƒ½å‡ºé”™ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å¹»è§‰äº‹å®ï¼ˆAI èƒ¡ç¼–ä¹±é€ ï¼‰</li>
<li>å€¼åŸŸé”™è¯¯ï¼ˆæŠŠ 0<del>1 çš„æ¦‚ç‡è¾“å‡ºæˆ 0</del>100ï¼‰</li>
<li>é£é™©è¯­ä¹‰ï¼ˆè¾“å‡ºä¸åˆç†å»ºè®®ï¼‰</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆæ˜¯å¼•å…¥ <strong>Rule-based Validator + åŠ¨æ€åé¦ˆ Re-Scoring</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¾“å‡ºéªŒè¯å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">outputValidator</span>(<span class="hljs-params">response</span>) {
  <span class="hljs-comment">// ç®€å•ä¾‹å­ï¼šä¸èƒ½è¾“å‡ºè´Ÿèƒ½é‡æˆ–æ— æ„ä¹‰æ–‡æœ¬</span>
  <span class="hljs-keyword">const</span> badWords = [<span class="hljs-string">"æ¯ç­"</span>, <span class="hljs-string">"è‡ªæ€"</span>, <span class="hljs-string">"æš´åŠ›"</span>];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> w <span class="hljs-keyword">of</span> badWords) {
    <span class="hljs-keyword">if</span> (response.<span class="hljs-title function_">includes</span>(w)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"âš ï¸ è­¦å‘Šï¼šæ£€æµ‹åˆ°æ½œåœ¨å±é™©è¾“å‡ºï¼Œå·²è¢«æ‹¦æˆªã€‚"</span>;
    }
  }

  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">length</span> &lt; <span class="hljs-number">10</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"âš ï¸ è¾“å‡ºè¿‡çŸ­ï¼Œç–‘ä¼¼é”™è¯¯ç”Ÿæˆï¼Œè§¦å‘äºŒæ¬¡ç”Ÿæˆã€‚"</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">"âœ… è¾“å‡ºå·²é€šè¿‡å®‰å…¨ä¸è¯­ä¹‰å®¡æ ¸ã€‚"</span>;
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">outputValidator</span>(<span class="hljs-string">"AI å°†å½»åº•æ”¹å˜ç¼–ç¨‹ä¸–ç•Œï¼"</span>));
</code></pre>
<p>ğŸ§  <strong>éšå«é€»è¾‘ï¼š</strong><br/>
è¾“å‡ºå±‚æ‰æ˜¯æ¨¡å‹è´£ä»»çš„â€œå¸æ³•ç³»ç»Ÿâ€ã€‚<br/>
ä»»ä½•å¼‚å¸¸è¾“å‡ºéƒ½åº”è§¦å‘å†è®­ç»ƒæˆ–å†è¯„ä¼°ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ§® ä¸‰ã€è®©æ¨¡å‹â€œçº é”™â€è€Œéâ€œçŠ¯é”™â€</h2>
<p>åœ¨ AI æ¶æ„ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ç§å†…éƒ¨é—­ç¯æœºåˆ¶ï¼š</p>
<pre><code class="hljs">æ‰§è¡Œ â†’ æ£€æŸ¥ â†’ ä¿®æ­£ â†’ ç¡®è®¤ â†’ è¾“å‡º
</code></pre>
<p>ç”¨äººç±»è¯­è¨€è§£é‡Šï¼Œå°±æ˜¯ï¼š</p>
<blockquote>
<p><strong>â€œAI ä¸è¯¥ä¸€æ¬¡åšå¯¹ï¼Œè€Œè¯¥å­¦ä¼šè‡ªå·±å‘ç°å“ªé‡Œä¸å¯¹ã€‚â€</strong></p>
</blockquote>
<p>è¿™å°±æ˜¯ <strong>Self-Correction Pipelineï¼ˆè‡ªçº ç®¡çº¿ï¼‰</strong> çš„æ€æƒ³ã€‚</p>
<hr/>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªçº æœºåˆ¶ç¤ºä¾‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">selfCorrectingAgent</span>(<span class="hljs-params">prompt</span>) {
  <span class="hljs-keyword">let</span> attempt = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> output = <span class="hljs-string">""</span>;

  <span class="hljs-keyword">while</span> (attempt &lt; <span class="hljs-number">3</span>) {
    attempt++;
    output = <span class="hljs-string">`å°è¯•<span class="hljs-subst">${attempt}</span>æ¬¡ç”Ÿæˆçš„ç»“æœï¼š<span class="hljs-subst">${prompt}</span> çš„è§£é‡Šç‰ˆæœ¬`</span>;
    <span class="hljs-keyword">const</span> validation = <span class="hljs-title function_">outputValidator</span>(output);
    
    <span class="hljs-keyword">if</span> (validation.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"âœ…"</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`ğŸ¯ æœ€ç»ˆè¾“å‡ºï¼ˆç¬¬<span class="hljs-subst">${attempt}</span>æ¬¡ç”Ÿæˆï¼‰ï¼š<span class="hljs-subst">${output}</span>`</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(validation);
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">"âŒ è¿ç»­ç”Ÿæˆä¸‰æ¬¡å‡å¤±è´¥ï¼Œä»»åŠ¡ç»ˆæ­¢ä»¥é˜²é”™è¯¯æ‰©æ•£ã€‚"</span>;
}

<span class="hljs-title function_">selfCorrectingAgent</span>(<span class="hljs-string">"ä»‹ç» AI çš„ä»»åŠ¡çº é”™æœºåˆ¶"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>);
</code></pre>
<hr/>
<h2 data-id="heading-6">ğŸ” å››ã€å¤šæ¨¡å‹äº¤å‰éªŒè¯ï¼šAI çš„â€œåŒä¾ªè¯„å®¡åˆ¶åº¦â€</h2>
<p>æ€ä¹ˆé˜²æ­¢æ™ºèƒ½ä½“â€œè‡ªä¿¡åœ°èƒ¡è¯´å…«é“â€ï¼Ÿ<br/>
â€”â€”è®©å¦ä¸€ä¸ªæ™ºèƒ½ä½“æ¥â€œæ‰“è„¸â€å®ƒã€‚ ğŸ˜</p>
<blockquote>
<p>å¤šæ™ºèƒ½ä½“éªŒè¯ï¼ˆMulti-Agent Validationï¼‰<br/>
= æŠŠä¸€ç¾¤ AI æ”¾è¿›ä¼šè®®å®¤ï¼Œè®©ä»–ä»¬äº’ç›¸æŒ‡å‡ºé—®é¢˜ã€‚</p>
</blockquote>
<p>è¿™ç§æœºåˆ¶èƒ½æ˜¾è‘—æå‡æ­£ç¡®ç‡ï¼Œå› ä¸ºæ²¡æœ‰äººæ¯”å¦ä¸€ä¸ª AI æ›´æ‡‚å¦ä¸€ä¸ª AI çš„â€œå¹»è§‰æ¨¡å¼â€ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ§± äº”ã€çº¦æŸæ­£ç¡®ç‡çš„åº•å±‚åŸåˆ™ï¼šä»è®¡ç®—æœºç§‘å­¦è§†è§’å‡ºå‘</h2>






























<table><thead><tr><th align="left">åŸåˆ™</th><th align="left">å«ä¹‰</th><th align="left">ç±»æ¯”</th></tr></thead><tbody><tr><td align="left"><strong>ç¡®å®šæ€§åŸåˆ™</strong></td><td align="left">ç›¸åŒè¾“å…¥ = ç›¸åŒè¾“å‡º</td><td align="left">CPU æŒ‡ä»¤å‘¨æœŸ</td></tr><tr><td align="left"><strong>å¯è§£é‡Šæ€§åŸåˆ™</strong></td><td align="left">æ¯ä¸€æ­¥éƒ½èƒ½è¢«è¿½è¸ª</td><td align="left">è°ƒè¯•æ—¥å¿— Trace</td></tr><tr><td align="left"><strong>æ”¶æ•›æ€§åŸåˆ™</strong></td><td align="left">å¤šè½®è®¡ç®—éœ€è¶‹äºç¨³å®š</td><td align="left">è¿­ä»£ç®—æ³•æ”¶æ•›</td></tr><tr><td align="left"><strong>å®‰å…¨è¾¹ç•ŒåŸåˆ™</strong></td><td align="left">æ°¸è¿œä¸è¦ä¿¡ä»»äººç±»è¾“å…¥ ğŸ˜†</td><td align="left">é˜²å¾¡å¼ç¼–ç¨‹</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-8">ğŸ§­ å…­ã€ç»“è¯­ï¼šç¨‹åºå‘˜ï¼Œæœªæ¥çš„â€œè¯­ä¹‰ç«‹æ³•è€…â€</h2>
<p>AI æ—¶ä»£çš„ codingï¼Œä¸å†åªæ˜¯â€œå†™ç®—æ³•â€ï¼Œ<br/>
è€Œæ˜¯<strong>ä¸ºæ™ºèƒ½ä½“åˆ¶å®šè¡Œä¸ºå‡†åˆ™ä¸çº é”™é€»è¾‘</strong>ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬ä¸å†æ˜¯å†™ä»£ç çš„äººï¼Œè€Œæ˜¯<strong>å†™å‡ºä»£ç ä¼šè‡ªå·±å†™å‡ºä»£ç </strong>çš„äººã€‚</p>
</blockquote>
<p>è®©æ™ºèƒ½ä½“ä¿æŒæ­£ç¡®ç‡ï¼Œä¸æ˜¯é â€œç¦æ­¢â€ï¼Œ<br/>
è€Œæ˜¯é â€œç»“æ„ã€åé¦ˆä¸é€»è¾‘ä¼˜é›…â€ã€‚</p>
<p>ğŸ§‘â€ğŸ’» <strong>Coding çš„æœªæ¥ï¼šä¸æ˜¯å‘½ä»¤ï¼Œè€Œæ˜¯å…±è¯†ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vert.x + Kotlin æ‰‹å†™ Web æ¡†æ¶ï¼šä» Tomcat + Spring MVC åˆ°å“åº”å¼æ ¸å¿ƒ]]></title>    <link>https://juejin.cn/post/7582787460418715690</link>    <guid>https://juejin.cn/post/7582787460418715690</guid>    <pubDate>2025-12-12T15:08:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582787460418715690" data-draft-id="7582786655473647659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vert.x + Kotlin æ‰‹å†™ Web æ¡†æ¶ï¼šä» Tomcat + Spring MVC åˆ°å“åº”å¼æ ¸å¿ƒ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-12T15:08:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pypirus"/> <meta itemprop="url" content="https://juejin.cn/user/958429872790984"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vert.x + Kotlin æ‰‹å†™ Web æ¡†æ¶ï¼šä» Tomcat + Spring MVC åˆ°å“åº”å¼æ ¸å¿ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429872790984/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pypirus
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:08:16.000Z" title="Fri Dec 12 2025 15:08:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>â€”â€”ä»…ç”¨ Vert.x Coreï¼Œä»é›¶å®ç°è¯·æ±‚æŠ½è±¡ã€æ­£åˆ™è·¯ç”±ä¸ä¸­é—´ä»¶ç®¡é“</p>
</blockquote>
<p>åœ¨ç»å…¸çš„ <code>Nginx â†’ Tomcat â†’ Spring MVC</code> æ¶æ„ä¸­ï¼š</p>
<ul>
<li><strong>Tomcat</strong> è´Ÿè´£å°†åŸå§‹ HTTP å­—èŠ‚æµè§£æä¸ºç»“æ„åŒ–çš„è¯·æ±‚å¯¹è±¡ï¼›</li>
<li><strong>Spring MVC</strong> åœ¨æ­¤åŸºç¡€ä¸Šï¼Œé€šè¿‡æ³¨è§£è·¯ç”±ã€æ‹¦æˆªå™¨é“¾ç­‰æœºåˆ¶ï¼Œå°†è¯·æ±‚åˆ†å‘ç»™ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨ <strong>Vert.x Core</strong>ï¼ˆå³ <code>vertx-core</code>ï¼‰ï¼Œä¸ä¾èµ–ä»»ä½•é«˜å±‚ Web æ¨¡å—ï¼Œäº²æ‰‹å®ç°ä¸€ä¸ªè½»é‡ä½†å®Œæ•´çš„ Web æ¡†æ¶ã€‚æˆ‘ä»¬å°†é€æ­¥æ„å»ºï¼š</p>
<ul>
<li><code>Request</code> / <code>Response</code>ï¼šå°è£…åŸå§‹ HTTP æ•°æ®ï¼Œæä¾›æ¸…æ™°çš„ç¼–ç¨‹æ¥å£ï¼›</li>
<li>åŠ¨æ€è·¯ç”±ï¼šé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ <code>/users/:id</code> è¿™ç±»è·¯å¾„ï¼›</li>
<li>ä¸­é—´ä»¶ç³»ç»Ÿï¼šä»¥å¯ç»„åˆçš„æ–¹å¼æ’å…¥é€šç”¨é€»è¾‘ï¼Œå¦‚æ—¥å¿—ã€è®¤è¯ã€CORSã€‚</li>
</ul>
<p>æ¯ä¸€æ­¥éƒ½å¯è¿è¡Œã€å¯éªŒè¯ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ª<strong>ä½ å®Œå…¨ç†è§£å…¶å†…éƒ¨å·¥ä½œåŸç†çš„ Web å†…æ ¸</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¾èµ–è¯´æ˜</h2>
<p>é¡¹ç›®ä»…ä¾èµ–ä»¥ä¸‹ä¸¤ä¸ªåº“ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">implementation(<span class="hljs-string">"io.vertx:vertx-core:4.5.8"</span>)
implementation(<span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib"</span>)
</code></pre>
<p>ä¸ä½¿ç”¨ <code>vert.x-web</code>ï¼Œæ‰€æœ‰ HTTP è§£æã€è·¯ç”±åŒ¹é…ã€å“åº”æ„é€ å‡ç”±æˆ‘ä»¬è‡ªè¡Œå®ç°ã€‚è¿™è®©æˆ‘ä»¬èƒ½æ¸…æ™°çœ‹åˆ° Web æ¡†æ¶æ¯ä¸€å±‚çš„èŒè´£è¾¹ç•Œã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨æœåŠ¡å™¨ + å°è£…è¯·æ±‚ä¸å“åº”</h2>
<p>ç›®æ ‡ï¼š</p>
<ul>
<li>å¯åŠ¨åŸç”Ÿ HTTP æœåŠ¡å™¨ï¼›</li>
<li>å®šä¹‰ <code>Request</code>ï¼ˆâ‰ˆ <code>HttpServletRequest</code>ï¼‰å’Œ <code>Response</code>ï¼ˆâ‰ˆ <code>HttpServletResponse</code>ï¼‰ï¼›</li>
<li>å®ç° <code>/hello</code> é™æ€è·¯ç”±ã€‚</li>
</ul>
<h3 data-id="heading-2">æ ¸å¿ƒæ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Request.kt</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Request</span>(
    <span class="hljs-keyword">val</span> method: String,
    <span class="hljs-keyword">val</span> uri: String,
    <span class="hljs-keyword">val</span> path: String,
    <span class="hljs-keyword">val</span> headers: Map&lt;String, String&gt;,
    <span class="hljs-keyword">val</span> query: Map&lt;String, String&gt;
)

<span class="hljs-comment">// Response.kt</span>
<span class="hljs-keyword">import</span> io.vertx.core.http.HttpServerResponse

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Response</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> raw: HttpServerResponse) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">text</span><span class="hljs-params">(content: <span class="hljs-type">String</span>, statusCode: <span class="hljs-type">Int</span> = <span class="hljs-number">200</span>)</span></span> {
        raw
            .setStatusCode(statusCode)
            .putHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/plain; charset=utf-8"</span>)
            .end(content)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">json</span><span class="hljs-params">(content: <span class="hljs-type">String</span>, statusCode: <span class="hljs-type">Int</span> = <span class="hljs-number">200</span>)</span></span> {
        raw
            .setStatusCode(statusCode)
            .putHeader(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json; charset=utf-8"</span>)
            .end(content)
    }
}
</code></pre>
<h3 data-id="heading-3">URI è§£æå·¥å…·</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// HttpUtils.kt</span>
<span class="hljs-keyword">object</span> HttpUtils {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parsePath</span><span class="hljs-params">(uri: <span class="hljs-type">String</span>)</span></span>: String =
        uri.split(<span class="hljs-string">'?'</span>).first().ifEmpty { <span class="hljs-string">"/"</span> }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseQuery</span><span class="hljs-params">(uri: <span class="hljs-type">String</span>)</span></span>: Map&lt;String, String&gt; {
        <span class="hljs-keyword">val</span> queryPart = uri.split(<span class="hljs-string">'?'</span>).getOrNull(<span class="hljs-number">1</span>) ?: <span class="hljs-keyword">return</span> emptyMap()
        <span class="hljs-keyword">return</span> queryPart.split(<span class="hljs-string">'&amp;'</span>).associate { param -&gt;
            <span class="hljs-keyword">val</span> parts = param.split(<span class="hljs-string">'='</span>, limit = <span class="hljs-number">2</span>)
            <span class="hljs-keyword">val</span> key = java.net.URLDecoder.decode(parts.getOrElse(<span class="hljs-number">0</span>) { <span class="hljs-string">""</span> }, <span class="hljs-string">"UTF-8"</span>)
            <span class="hljs-keyword">val</span> value = java.net.URLDecoder.decode(parts.getOrElse(<span class="hljs-number">1</span>) { <span class="hljs-string">""</span> }, <span class="hljs-string">"UTF-8"</span>)
            key to value
        }
    }
}
</code></pre>
<h3 data-id="heading-4">åˆå§‹è·¯ç”±å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Router.kt</span>
<span class="hljs-keyword">import</span> io.vertx.core.http.HttpServerRequest
<span class="hljs-keyword">import</span> io.vertx.core.http.HttpServerResponse

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Router</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> routes = mutableMapOf&lt;String, (Request, Response) -&gt; <span class="hljs-built_in">Unit</span>&gt;()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(path: <span class="hljs-type">String</span>, handler: (<span class="hljs-type">Request</span>, <span class="hljs-type">Response</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        routes[path] = handler
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handle</span><span class="hljs-params">(req: <span class="hljs-type">HttpServerRequest</span>, res: <span class="hljs-type">HttpServerResponse</span>)</span></span> {
        <span class="hljs-keyword">val</span> path = HttpUtils.parsePath(req.uri())
        <span class="hljs-keyword">val</span> handler = routes[path]

        <span class="hljs-keyword">if</span> (handler != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">val</span> request = Request(
                method = req.method().name(),
                uri = req.uri(),
                path = path,
                headers = req.headers().entries().associate { it.key to it.value },
                query = HttpUtils.parseQuery(req.uri())
            )
            handler(request, Response(res))
        } <span class="hljs-keyword">else</span> {
            res.setStatusCode(<span class="hljs-number">404</span>).end(<span class="hljs-string">"Not Found"</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-5">å¯åŠ¨å…¥å£</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Main.kt</span>
<span class="hljs-keyword">import</span> io.vertx.core.Vertx

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> vertx = Vertx.vertx()
    <span class="hljs-keyword">val</span> router = Router()

    router.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/hello"</span>) { _, res -&gt; res.text(<span class="hljs-string">"Hello from Vert.x Core!"</span>) }

    vertx.createHttpServer()
        .requestHandler { httpReq -&gt; router.handle(httpReq, httpReq.response()) }
        .listen(<span class="hljs-number">8080</span>) { result -&gt;
            <span class="hljs-keyword">if</span> (result.succeeded()) println(<span class="hljs-string">"âœ… Server running on http://localhost:8080"</span>)
        }
}
</code></pre>
<p>è¿è¡Œåè®¿é—® <code>http://localhost:8080/hello</code>ï¼Œå³å¯çœ‹åˆ°å“åº”ã€‚<br/>
ä½ å·²ç”¨çº¯ Vert.x Core å®ç°äº†æœ€åŸºç¡€çš„ Web è¯·æ±‚å¤„ç†æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šåŠ¨æ€è·¯ç”± â€”â€” ç”¨æ­£åˆ™åŒ¹é…è·¯å¾„å‚æ•°</h2>
<p>ç›®æ ‡ï¼š</p>
<ul>
<li>æ”¯æŒ <code>/users/:id</code> è¿™æ ·çš„è·¯å¾„æ¨¡æ¿ï¼›</li>
<li>è‡ªåŠ¨æå– <code>:id</code> å¯¹åº”çš„å€¼ï¼›</li>
<li>æ— éœ€ç¬¬ä¸‰æ–¹è·¯ç”±åº“ï¼Œå®Œå…¨æ‰‹åŠ¨å®ç°ã€‚</li>
</ul>
<h3 data-id="heading-7">è·¯ç”±æ¡ç›®ï¼šæ¨¡æ¿ â†’ æ­£åˆ™ â†’ å‚æ•°å</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RouteEntry.kt</span>
<span class="hljs-keyword">import</span> java.util.regex.Pattern

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RouteEntry</span>(
    <span class="hljs-keyword">val</span> template: String,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> pattern: Pattern,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> paramNames: List&lt;String&gt;,
    <span class="hljs-keyword">val</span> handler: (Request, Response) -&gt; <span class="hljs-built_in">Unit</span>
) {
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compile</span><span class="hljs-params">(template: <span class="hljs-type">String</span>, handler: (<span class="hljs-type">Request</span>, <span class="hljs-type">Response</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span>: RouteEntry {
            <span class="hljs-keyword">val</span> segments = template.trim(<span class="hljs-string">'/'</span>).split(<span class="hljs-string">'/'</span>)
            <span class="hljs-keyword">val</span> regexParts = mutableListOf&lt;String&gt;()
            <span class="hljs-keyword">val</span> names = mutableListOf&lt;String&gt;()

            <span class="hljs-keyword">for</span> (segment <span class="hljs-keyword">in</span> segments) {
                <span class="hljs-keyword">if</span> (segment.startsWith(<span class="hljs-string">":"</span>)) {
                    names += segment.substring(<span class="hljs-number">1</span>)
                    regexParts += <span class="hljs-string">"([^/]+)"</span>  <span class="hljs-comment">// åŒ¹é…ä»»æ„éæ–œæ å­—ç¬¦</span>
                } <span class="hljs-keyword">else</span> {
                    regexParts += Pattern.quote(segment)  <span class="hljs-comment">// è½¬ä¹‰é™æ€æ®µ</span>
                }
            }

            <span class="hljs-keyword">val</span> regex = <span class="hljs-string">"^/<span class="hljs-subst">${regexParts.joinToString(<span class="hljs-string">"/"</span>)}</span>$"</span>
            <span class="hljs-keyword">return</span> RouteEntry(template, Pattern.compile(regex), names, handler)
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">match</span><span class="hljs-params">(path: <span class="hljs-type">String</span>)</span></span>: Map&lt;String, String&gt;? {
        <span class="hljs-keyword">val</span> matcher = pattern.matcher(path)
        <span class="hljs-keyword">if</span> (!matcher.matches()) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>

        <span class="hljs-keyword">return</span> paramNames.withIndex().associate { (i, name) -&gt;
            name to (matcher.group(i + <span class="hljs-number">1</span>) ?: <span class="hljs-string">""</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-8">æ›´æ–° Request ä¸ Router</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Request.ktï¼ˆæ›´æ–°ï¼‰</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Request</span>(
    <span class="hljs-keyword">val</span> method: String,
    <span class="hljs-keyword">val</span> uri: String,
    <span class="hljs-keyword">val</span> path: String,
    <span class="hljs-keyword">val</span> headers: Map&lt;String, String&gt;,
    <span class="hljs-keyword">val</span> query: Map&lt;String, String&gt;,
    <span class="hljs-keyword">val</span> params: Map&lt;String, String&gt; = emptyMap()  <span class="hljs-comment">// æ–°å¢è·¯å¾„å‚æ•°</span>
)

<span class="hljs-comment">// Router.ktï¼ˆæ›´æ–°ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Router</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> routes = mutableListOf&lt;RouteEntry&gt;()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(template: <span class="hljs-type">String</span>, handler: (<span class="hljs-type">Request</span>, <span class="hljs-type">Response</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        routes += RouteEntry.compile(template, handler)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handle</span><span class="hljs-params">(req: <span class="hljs-type">HttpServerRequest</span>, res: <span class="hljs-type">HttpServerResponse</span>)</span></span> {
        <span class="hljs-keyword">val</span> rawUri = req.uri()
        <span class="hljs-keyword">val</span> path = HttpUtils.parsePath(rawUri)

        <span class="hljs-keyword">for</span> (entry <span class="hljs-keyword">in</span> routes) {
            <span class="hljs-keyword">val</span> params = entry.match(path)
            <span class="hljs-keyword">if</span> (params != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">val</span> request = Request(
                    method = req.method().name(),
                    uri = rawUri,
                    path = path,
                    headers = req.headers().entries().associate { it.key to it.value },
                    query = HttpUtils.parseQuery(rawUri),
                    params = params
                )
                entry.handler(request, Response(res))
                <span class="hljs-keyword">return</span>
            }
        }

        res.setStatusCode(<span class="hljs-number">404</span>).end(<span class="hljs-string">"Not Found"</span>)
    }
}
</code></pre>
<h3 data-id="heading-9">æ³¨å†ŒåŠ¨æ€è·¯ç”±</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">router.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/users/:id"</span>) { req, res -&gt;
    res.json(<span class="hljs-string">"""{"id": "<span class="hljs-subst">${req.params[<span class="hljs-string">"id"</span>]}</span>", "name": "User"}"""</span>)
}
</code></pre>
<p>éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:8080/users/42
<span class="hljs-comment"># â†’ {"id": "42", "name": "User"}</span>
</code></pre>
<p>ä½ ç°åœ¨çš„è·¯ç”±ç³»ç»Ÿå·²æ”¯æŒ RESTful é£æ ¼ï¼Œä¸”å®Œå…¨ç”±æ­£åˆ™é©±åŠ¨ï¼Œé€»è¾‘é€æ˜ã€‚</p>
<hr/>
<h2 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šä¸­é—´ä»¶ç³»ç»Ÿ â€”â€” å¯ç»„åˆçš„é€šç”¨é€»è¾‘å±‚</h2>
<p>ç›®æ ‡ï¼š</p>
<ul>
<li>åœ¨è¯·æ±‚åˆ°è¾¾ä¸šåŠ¡é€»è¾‘å‰/åæ’å…¥é€šç”¨å¤„ç†ï¼›</li>
<li>æ”¯æŒæ—¥å¿—ã€CORSã€è®¤è¯ç­‰ï¼›</li>
<li>ä¸­é—´ä»¶å¯æŒ‰éœ€ç»„åˆï¼Œé¡ºåºå¯æ§ã€‚</li>
</ul>
<h3 data-id="heading-11">ä¸­é—´ä»¶å®šä¹‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Middleware.kt</span>
<span class="hljs-keyword">typealias</span> Middleware = (Request, Response, () -&gt; <span class="hljs-built_in">Unit</span>) -&gt; <span class="hljs-built_in">Unit</span>
</code></pre>
<p>ä¸­é—´ä»¶æ¥æ”¶è¯·æ±‚ã€å“åº”å’Œâ€œç»§ç»­æ‰§è¡Œâ€çš„å›è°ƒã€‚è°ƒç”¨ <code>next()</code> è¡¨ç¤ºæ”¾è¡Œï¼Œå¦åˆ™å¯æå‰ç»ˆæ­¢æµç¨‹ï¼ˆå¦‚è¿”å› 401ï¼‰ã€‚</p>
<h3 data-id="heading-12">å†…ç½®ä¸­é—´ä»¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Middlewares.kt</span>
<span class="hljs-keyword">object</span> Middlewares {
    <span class="hljs-keyword">val</span> logger: Middleware = { req, _, next -&gt;
        <span class="hljs-keyword">val</span> start = System.currentTimeMillis()
        println(<span class="hljs-string">"[<span class="hljs-subst">${req.method}</span>] <span class="hljs-subst">${req.path}</span>"</span>)
        next()
        println(<span class="hljs-string">"  â†’ <span class="hljs-subst">${System.currentTimeMillis() - start}</span>ms"</span>)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bearerAuth</span><span class="hljs-params">(expectedToken: <span class="hljs-type">String</span>)</span></span>: Middleware = { req, res, next -&gt;
        <span class="hljs-keyword">val</span> auth = req.headers[<span class="hljs-string">"authorization"</span>]
        <span class="hljs-keyword">if</span> (auth?.startsWith(<span class="hljs-string">"Bearer "</span>) == <span class="hljs-literal">true</span> &amp;&amp; auth.substring(<span class="hljs-number">7</span>) == expectedToken) {
            next()
        } <span class="hljs-keyword">else</span> {
            res.text(<span class="hljs-string">"Unauthorized"</span>, <span class="hljs-number">401</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-13">è·¯ç”±å™¨é›†æˆä¸­é—´ä»¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Router.ktï¼ˆæœ€ç»ˆç‰ˆï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Router</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> middlewares = mutableListOf&lt;Middleware&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> routes = mutableListOf&lt;RouteEntry&gt;()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">use</span><span class="hljs-params">(middleware: <span class="hljs-type">Middleware</span>)</span></span> {
        middlewares.add(middleware)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(template: <span class="hljs-type">String</span>, handler: (<span class="hljs-type">Request</span>, <span class="hljs-type">Response</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        routes += RouteEntry.compile(template, handler)
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handle</span><span class="hljs-params">(req: <span class="hljs-type">HttpServerRequest</span>, res: <span class="hljs-type">HttpServerResponse</span>)</span></span> {
        <span class="hljs-keyword">val</span> rawUri = req.uri()
        <span class="hljs-keyword">val</span> path = HttpUtils.parsePath(rawUri)

        <span class="hljs-keyword">val</span> matched = routes.firstOrNull { it.match(path) != <span class="hljs-literal">null</span> }
        <span class="hljs-keyword">if</span> (matched == <span class="hljs-literal">null</span>) {
            res.setStatusCode(<span class="hljs-number">404</span>).end(<span class="hljs-string">"Not Found"</span>)
            <span class="hljs-keyword">return</span>
        }

        <span class="hljs-keyword">val</span> params = matched.match(path)!!
        <span class="hljs-keyword">val</span> request = Request(
            method = req.method().name(),
            uri = rawUri,
            path = path,
            headers = req.headers().entries().associate { it.key to it.value },
            query = HttpUtils.parseQuery(rawUri),
            params = params
        )
        <span class="hljs-keyword">val</span> response = Response(res)

        <span class="hljs-comment">// æ„å»ºä¸­é—´ä»¶è°ƒç”¨é“¾ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰</span>
        <span class="hljs-keyword">var</span> next: () -&gt; <span class="hljs-built_in">Unit</span> = { matched.handler(request, response) }
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> middlewares.lastIndex downTo <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">val</span> currentNext = next
            next = { middlewares[i](request, response, currentNext) }
        }
        next()
    }
}
</code></pre>
<h3 data-id="heading-14">ä½¿ç”¨ä¸­é—´ä»¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> router = Router()
router.use(Middlewares.logger)
router.use(Middlewares.bearerAuth(<span class="hljs-string">"my-token"</span>))

router.<span class="hljs-keyword">get</span>(<span class="hljs-string">"/profile"</span>) { _, res -&gt; res.text(<span class="hljs-string">"Hello, authenticated user!"</span>) }
</code></pre>
<p>éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ—  token â†’ 401</span>
curl http://localhost:8080/profile

<span class="hljs-comment"># æœ‰ token â†’ 200 + æ—¥å¿—</span>
curl -H <span class="hljs-string">"Authorization: Bearer my-token"</span> http://localhost:8080/profile
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[GET] /profile
  â†’ 2ms
</code></pre>
<p>ä¸­é—´ä»¶æœºåˆ¶è®©ä½ èƒ½<strong>æ¨ªå‘åˆ‡åˆ†å…³æ³¨ç‚¹</strong>ï¼Œä¸šåŠ¡é€»è¾‘ä¸å†æ··æ‚æ—¥å¿—æˆ–å®‰å…¨ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-15">æœªæ¥æ‹“å±•æ–¹å‘</h2>
<p>å½“å‰æ¡†æ¶å·²å…·å¤‡ç”Ÿäº§çº§å†…æ ¸çš„é›å½¢ã€‚æ¥ä¸‹æ¥å¯è€ƒè™‘ï¼š</p>
<ol>
<li>
<p><strong>è¯·æ±‚ä½“è§£æ</strong><br/>
é€šè¿‡ <code>req.handler { buffer -&gt; ... }</code> è¯»å– Bodyï¼Œæ”¯æŒ JSON è§£ç ã€‚</p>
</li>
<li>
<p><strong>å¤šæ–¹æ³•æ”¯æŒ</strong><br/>
æ‰©å±• <code>post()</code>, <code>put()</code>ï¼Œåœ¨ <code>RouteEntry</code> ä¸­è®°å½• HTTP æ–¹æ³•ã€‚</p>
</li>
<li>
<p><strong>ç±»å‹å®‰å…¨å‚æ•°</strong><br/>
æ”¯æŒ <code>:id(int)</code>ï¼Œè‡ªåŠ¨æ ¡éªŒå¹¶è½¬æ¢ä¸º <code>Int</code>ã€‚</p>
</li>
<li>
<p><strong>å…¨å±€å¼‚å¸¸å¤„ç†</strong><br/>
æ•è·å¤„ç†å™¨ä¸­çš„æœªå¤„ç†å¼‚å¸¸ï¼Œè¿”å› 500ï¼Œé˜²æ­¢æœåŠ¡å™¨å´©æºƒã€‚</p>
</li>
<li>
<p><strong>Kotlin åç¨‹é›†æˆ</strong><br/>
æä¾› <code>suspend</code> ç‰ˆæœ¬çš„å¤„ç†å™¨ï¼Œç”¨ <code>awaitResult</code> åŒ…è£…å¼‚æ­¥æ“ä½œã€‚</p>
</li>
<li>
<p><strong>é™æ€æ–‡ä»¶æœåŠ¡</strong><br/>
å¯¹ <code>/static/**</code> è·¯å¾„è¿”å›æ–‡ä»¶å†…å®¹ã€‚</p>
</li>
<li>
<p><strong>æµ‹è¯•æ”¯æŒ</strong><br/>
åˆ©ç”¨ <code>Vertx</code> çš„åµŒå…¥å¼èƒ½åŠ›ç¼–å†™é›†æˆæµ‹è¯•ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-16">ç»“è¯­ï¼šç†è§£æ¯”ä½¿ç”¨æ›´é‡è¦</h2>
<p>ä½ å·²ç”¨ <strong>çº¯ Vert.x Core</strong> å®ç°äº† Web æ¡†æ¶çš„å››å¤§æ ¸å¿ƒç»„ä»¶ï¼š</p>






























<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>Spring å¯¹åº”</th></tr></thead><tbody><tr><td><code>Request</code></td><td>å°è£…å®¢æˆ·ç«¯è¯·æ±‚æ•°æ®</td><td><code>HttpServletRequest</code></td></tr><tr><td><code>Response</code></td><td>æ„é€ å¹¶å‘é€ HTTP å“åº”</td><td><code>HttpServletResponse</code></td></tr><tr><td><code>Router</code></td><td>è·¯å¾„åŒ¹é… â†’ å¤„ç†å‡½æ•°</td><td><code>HandlerMapping</code></td></tr><tr><td><code>Middleware</code></td><td>æ’å…¥é€šç”¨é€»è¾‘ï¼ˆæ—¥å¿—ã€è®¤è¯ç­‰ï¼‰</td><td><code>Filter</code></td></tr></tbody></table>
<p>æ²¡æœ‰é­”æ³•ï¼Œæ²¡æœ‰æ³¨è§£ï¼Œæ²¡æœ‰é»‘ç›’ã€‚æ¯ä¸€è¡Œä»£ç éƒ½æœ‰æ˜ç¡®èŒè´£ï¼Œæ¯ä¸€å±‚æŠ½è±¡éƒ½æ¸…æ™°å¯è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLé”æœºåˆ¶è¯¦è§£ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†]]></title>    <link>https://juejin.cn/post/7582785032852521023</link>    <guid>https://juejin.cn/post/7582785032852521023</guid>    <pubDate>2025-12-13T01:36:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582785032852521023" data-draft-id="7576479344038854708" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLé”æœºåˆ¶è¯¦è§£ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†"/> <meta itemprop="keywords" content="åç«¯,MySQL"/> <meta itemprop="datePublished" content="2025-12-13T01:36:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLé”æœºåˆ¶è¯¦è§£ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T01:36:04.000Z" title="Sat Dec 13 2025 01:36:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°æ®åº“çš„ä¸–ç•Œé‡Œï¼Œå½“å¤šä¸ªç”¨æˆ·åŒæ—¶è®¿é—®æ•°æ®åº“çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰åˆç†çš„æ§åˆ¶æœºåˆ¶ï¼Œå¾ˆå®¹æ˜“ä¼šå‡ºç°æ•°æ®æ··ä¹±çš„é—®é¢˜ã€‚</p>
<p>æ¯”å¦‚ä¸¤ä¸ªäººåŒæ—¶ä¿®æ”¹åŒä¸€æ¡æ•°æ®ï¼Œæœ€åç»“æœå¯èƒ½å°±ä¸å¯¹äº†ã€‚<strong>MySQL ä¸­çš„é”ï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ç±»å¹¶å‘è®¿é—®é—®é¢˜è€Œè®¾è®¡çš„ã€‚</strong></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯é”ï¼Ÿ</h2>
<p>å‡è®¾æœ‰ä¸€ä¸ªå…¬å…±å«ç”Ÿé—´ï¼Œåªæœ‰ä¸€ä¸ªå‘ä½ï¼ˆè¿™å°±å¥½æ¯”ä¸€æ¡æ•°æ®ï¼‰ã€‚</p>
<p><strong>åœºæ™¯1ï¼ˆæ— é”ï¼‰</strong>ï¼šAå…ˆç”Ÿè¿›å»åä¸é”é—¨ã€‚è¿™æ—¶Bå…ˆç”Ÿæ¨é—¨è€Œå…¥â€¦â€¦åœºé¢ä¸€åº¦ååˆ†å°´å°¬ã€‚è¿™å°±æ˜¯è„è¯»æˆ–æ•°æ®æŸåã€‚</p>
<p><strong>åœºæ™¯2ï¼ˆæœ‰é”ï¼‰</strong>ï¼šAå…ˆç”Ÿè¿›å»ååé”äº†é—¨ï¼ˆè¿™å°±æ˜¯åŠ é”ï¼‰ã€‚Bå…ˆç”Ÿæ¥äº†å‘ç°é—¨æ‰“ä¸å¼€ï¼Œåªå¥½åœ¨é—¨å£ç­‰å¾…ï¼ˆè¿™å°±æ˜¯é˜»å¡ï¼‰ã€‚Aå…ˆç”Ÿç”¨å®Œå‡ºæ¥ï¼ŒBå…ˆç”Ÿæ‰èƒ½è¿›å»ã€‚</p>
<p>æ‰€ä»¥ï¼Œé”æ˜¯æ•°æ®åº“ä¸ºäº†ä¿è¯æ•°æ®åœ¨å¹¶å‘è®¿é—®æ—¶çš„ä¸€è‡´æ€§ã€å®Œæ•´æ€§è€Œè®¾è®¡çš„ä¸€ç§æœºåˆ¶ã€‚</p>
<hr/>
<h2 data-id="heading-1">MySQL é”çš„ä¸¤å¤§åˆ†ç±»ç»´åº¦</h2>
<p>MySQL çš„é”å¯ä»¥ä»ä¸¤ä¸ªè§’åº¦çœ‹ï¼š</p>
<h3 data-id="heading-2">1. æŒ‰ç²’åº¦ï¼ˆé”çš„èŒƒå›´ï¼‰åˆ†ï¼š</h3>
<ul>
<li>è¡¨é”ï¼ˆé”æ•´å¼ è¡¨ï¼‰</li>
<li>è¡Œé”ï¼ˆåªé”ä¸€è¡Œï¼‰</li>
<li>é¡µé”ï¼ˆä»‹äºä¸¤è€…ä¹‹é—´ï¼ŒInnoDB ä¸ç”¨ï¼‰</li>
</ul>
<h3 data-id="heading-3">2. æŒ‰æ¨¡å¼ï¼ˆé”çš„è¡Œä¸ºï¼‰åˆ†ï¼š</h3>
<ul>
<li>å…±äº«é”ï¼ˆSï¼‰ï¼šå…è®¸å¤šäººè¯»</li>
<li>æ’ä»–é”ï¼ˆXï¼‰ï¼šåªå…è®¸ä¸€äººæ“ä½œ</li>
<li>æ„å‘é”ï¼ˆIS/IXï¼‰ï¼šæå‰â€œæ‰“æ‹›å‘¼â€</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬å°±ä»è¿™ä¸¤ä¸ªç»´åº¦å‡ºå‘ï¼Œä¸€ä¸€æ‹†è§£ã€‚</p>
<h2 data-id="heading-4">MySQL å¸¸è§é”ç±»å‹è¯¦è§£</h2>
<h3 data-id="heading-5">1. è¡Œé”ï¼ˆRow Lockï¼‰</h3>
<h4 data-id="heading-6">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>åªé”å®šä½ æ“ä½œçš„é‚£<strong>ä¸€è¡Œæ•°æ®</strong>ï¼Œåˆ«äººè¿˜èƒ½æ“ä½œå…¶ä»–è¡Œã€‚</p>
<h4 data-id="heading-7">ä½¿ç”¨æ–¹å¼ï¼ˆè‡ªåŠ¨ or æ‰‹åŠ¨ï¼‰ï¼š</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è‡ªåŠ¨åŠ æ’ä»–é”ï¼ˆXï¼‰</span>
<span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">-</span> <span class="hljs-number">100</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- æ‰‹åŠ¨åŠ æ’ä»–é”ï¼ˆæŸ¥è¯¢æ—¶å°±é”å®šï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;

<span class="hljs-comment">-- æ‰‹åŠ¨åŠ å…±äº«é”ï¼ˆSï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> SHARE;
</code></pre>
<h4 data-id="heading-8">ä½¿ç”¨åœºæ™¯ï¼š</h4>
<ul>
<li>ç§’æ€æ‰£åº“å­˜</li>
<li>è½¬è´¦ï¼ˆA å‡é’±ã€B åŠ é’±ï¼‰</li>
<li>é˜²æ­¢é‡å¤æäº¤è®¢å•</li>
</ul>
<p>æ³¨æ„ï¼š<strong>è¡Œé”ä¾èµ–ç´¢å¼•</strong>ï¼å¦‚æœ <code>WHERE</code> æ¡ä»¶æ²¡èµ°ç´¢å¼•ï¼ŒInnoDB ä¼šé€€åŒ–æˆé”æ•´å¼ è¡¨ï¼</p>
<hr/>
<h3 data-id="heading-9">2. è¡¨é”ï¼ˆTable Lockï¼‰</h3>
<h4 data-id="heading-10">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>é”ä½æ•´å¼ è¡¨ï¼Œåˆ«äººæ—¢ä¸èƒ½è¯»ä¹Ÿä¸èƒ½å†™ï¼ˆå†™é”ï¼‰ï¼Œæˆ–åªèƒ½è¯»ä¸èƒ½å†™ï¼ˆè¯»é”ï¼‰ã€‚</p>
<h4 data-id="heading-11">ä½¿ç”¨æ–¹å¼ï¼ˆæ‰‹åŠ¨ï¼‰ï¼š</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŠ è¯»é”</span>
LOCK TABLES users READ;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users;
<span class="hljs-comment">-- è§£é”</span>
UNLOCK TABLES;

<span class="hljs-comment">-- åŠ å†™é”</span>
LOCK TABLES users WRITE;
<span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-comment">-- è§£é”</span>
UNLOCK TABLES;
</code></pre>
<h4 data-id="heading-12">ä½¿ç”¨åœºæ™¯ï¼š</h4>
<ul>
<li>MyISAM å¼•æ“ï¼ˆè€é¡¹ç›®ï¼‰</li>
<li>æ‰¹é‡å¯¼å…¥æ•°æ®æ—¶ä¸´æ—¶é”è¡¨</li>
<li>æå°‘åœ¨ InnoDB ä¸­æ‰‹åŠ¨ä½¿ç”¨ï¼ˆä¼šä¸¥é‡é™ä½å¹¶å‘ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-13">3. å…±äº«é”ï¼ˆS é”ï¼‰å’Œæ’ä»–é”ï¼ˆX é”ï¼‰</h3>
<p>è¿™æ˜¯ä¸¤ç§æœ€åŸºæœ¬çš„<strong>é”æ¨¡å¼</strong>ï¼š</p>


























<table><thead><tr><th>ç±»å‹</th><th>åˆ«å</th><th>èƒ½å¦å¤šäººåŒæ—¶æŒæœ‰ï¼Ÿ</th><th>åˆ«äººèƒ½å¦è¯»ï¼Ÿ</th><th>åˆ«äººèƒ½å¦å†™ï¼Ÿ</th></tr></thead><tbody><tr><td><strong>Sé”</strong></td><td>è¯»é”</td><td>å¯ä»¥</td><td>å¯ä»¥</td><td>ä¸è¡Œ</td></tr><tr><td><strong>Xé”</strong></td><td>å†™é”</td><td>ä¸è¡Œ</td><td>ä¸è¡Œ</td><td>ä¸è¡Œ</td></tr></tbody></table>
<h4 data-id="heading-14">ä¸¾ä¸ªä¾‹å­ï¼š</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- äº‹åŠ¡ A</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">FOR</span> SHARE;  <span class="hljs-comment">-- åŠ  S é”</span>

<span class="hljs-comment">-- äº‹åŠ¡ Bï¼ˆå¯ä»¥æ‰§è¡Œï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> products <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">FOR</span> SHARE;  <span class="hljs-comment">-- ä¹ŸåŠ  S é”ï¼Œæ²¡é—®é¢˜</span>

<span class="hljs-comment">-- äº‹åŠ¡ Cï¼ˆä¼šè¢«é˜»å¡ï¼ï¼‰</span>
<span class="hljs-keyword">UPDATE</span> products <span class="hljs-keyword">SET</span> stock <span class="hljs-operator">=</span> stock <span class="hljs-operator">-</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;  <span class="hljs-comment">-- éœ€è¦ X é”ï¼Œç­‰å¾… A æäº¤</span>
</code></pre>
<hr/>
<h3 data-id="heading-15">4. æ„å‘é”ï¼ˆIS / IXï¼‰</h3>
<h4 data-id="heading-16">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>æ„å‘é”æ˜¯è¡¨çº§åˆ«çš„é”ï¼Œç”¨æ¥æå‰é€šçŸ¥ï¼šæˆ‘æ‰“ç®—å¯¹è¿™å¼ è¡¨é‡Œçš„æŸäº›è¡ŒåŠ é”ï¼</p>
<ul>
<li><strong>ISï¼ˆIntention Sharedï¼‰</strong>ï¼šæˆ‘å‡†å¤‡ç»™æŸäº›è¡ŒåŠ  S é”ã€‚</li>
<li><strong>IXï¼ˆIntention Exclusiveï¼‰</strong>ï¼šæˆ‘å‡†å¤‡ç»™æŸäº›è¡ŒåŠ  X é”ã€‚</li>
</ul>
<h4 data-id="heading-17">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>å®Œå…¨è‡ªåŠ¨åŠ é”ï¼Œä½ æ— æ³•æ‰‹åŠ¨æ§åˆ¶ã€‚</li>
<li>ç›®çš„æ˜¯è®©æ•°æ®åº“å¿«é€Ÿåˆ¤æ–­ï¼šâ€œè¿™å¼ è¡¨æœ‰æ²¡æœ‰äººåœ¨æ“ä½œè¡Œï¼Ÿâ€ è€Œä¸ç”¨é€è¡Œæ£€æŸ¥ã€‚</li>
</ul>
<h4 data-id="heading-18">ä¸¾ä¾‹ï¼š</h4>
<p>å½“ä½ æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;
</code></pre>
<p>InnoDB ä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li>åœ¨è¡¨ <code>users</code> ä¸ŠåŠ  <strong>IX é”</strong></li>
<li>åœ¨ <code>id=1</code> è¿™ä¸€è¡Œä¸ŠåŠ  <strong>X é”</strong></li>
</ol>
<p>æ­¤æ—¶ï¼Œå¦‚æœæœ‰äººæƒ³æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql">LOCK TABLES users WRITE;  <span class="hljs-comment">-- éœ€è¦è¡¨çº§ X é”</span>
</code></pre>
<p>æ•°æ®åº“ä¸€çœ‹ï¼šâ€œè¡¨ä¸Šæœ‰ IX é”ï¼è¯´æ˜æœ‰äººåœ¨æ”¹è¡Œâ€ï¼Œäºæ˜¯ç›´æ¥è®©å®ƒç­‰å¾…ã€‚</p>
<p>æ„å‘é”å°±åƒè¿›æ•™å®¤å‰å–Šä¸€å£°ï¼šâ€œæˆ‘è¦è¿›å»å åº§ä½å•¦ï¼â€ â€”â€” è®©ç®¡ç†å‘˜ä¸ç”¨ä¸€ä¸ªä¸ªå¼€é—¨æŸ¥ã€‚</p>
<hr/>
<h3 data-id="heading-19">5. é—´éš™é”ï¼ˆGap Lockï¼‰</h3>
<h4 data-id="heading-20">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>ä¸é”å…·ä½“æ•°æ®ï¼Œè€Œæ˜¯é”ä½ç´¢å¼•ä¹‹é—´çš„ç©ºéš™ï¼Œé˜²æ­¢åˆ«äººå¾€ä¸­é—´æ’å…¥æ–°æ•°æ®ã€‚</p>
<h4 data-id="heading-21">ä»€ä¹ˆæ—¶å€™å‡ºç°ï¼Ÿ</h4>
<p>åœ¨<strong>REPEATABLE READï¼ˆå¯é‡å¤è¯»ï¼‰</strong> éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ‰§è¡Œ<strong>èŒƒå›´æŸ¥è¯¢ + åŠ é”</strong>æ—¶è‡ªåŠ¨è§¦å‘ã€‚</p>
<h4 data-id="heading-22">ä¾‹å­ï¼š</h4>
<p>å‡è®¾ <code>users</code> è¡¨ä¸»é”®æœ‰ï¼š10, 30<br/>
æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">15</span> <span class="hljs-keyword">AND</span> id <span class="hljs-operator">&lt;</span> <span class="hljs-number">25</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;
</code></pre>
<p>è™½ç„¶æ²¡æŸ¥åˆ°æ•°æ®ï¼Œä½† InnoDB ä¼š<strong>é”ä½ (10, 30) è¿™ä¸ªé—´éš™</strong>ï¼Œé˜²æ­¢åˆ«äººæ’å…¥ <code>id=20</code>ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</strong>
å¦‚æœä¸é”é—´éš™ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡æ’å…¥ <code>id=20</code>ï¼Œä½ å†æ¬¡æŸ¥è¯¢å°±ä¼šå¤šå‡ºä¸€æ¡è®°å½•â€”â€”è¿™å°±æ˜¯å¹»è¯»ã€‚</p>
<h4 data-id="heading-23">å¦‚ä½•å…³é—­ï¼Ÿ</h4>
<ul>
<li>æ”¹éš”ç¦»çº§åˆ«ä¸º<code>READ COMMITTED</code></li>
<li>æˆ–ç¡®ä¿æŸ¥è¯¢æ¡ä»¶æ˜¯<strong>å”¯ä¸€ç´¢å¼•çš„ç­‰å€¼æŸ¥è¯¢</strong>ï¼ˆå¦‚ <code>WHERE id = 20</code> ä¸” id æ˜¯ä¸»é”®ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-24">6. ä¸´é”®é”ï¼ˆNext-Key Lockï¼‰â€”â€” é»˜è®¤è¡Œä¸º</h3>
<h4 data-id="heading-25">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><strong>è®°å½•é” + é—´éš™é”</strong> çš„ç»„åˆã€‚</p>
<p>InnoDB åœ¨ RR éš”ç¦»çº§åˆ«ä¸‹ï¼Œé»˜è®¤ä½¿ç”¨ Next-Key Lock æ¥å½»åº•è§£å†³å¹»è¯»é—®é¢˜ã€‚</p>
<h4 data-id="heading-26">ä¾‹å­ï¼š</h4>
<p>å¯¹ <code>id=20</code> åŠ é”ï¼Œå®é™…é”ä½çš„æ˜¯åŒºé—´ <code>(10, 20]</code>ï¼ˆå‡è®¾å‰ä¸€ä¸ªä¸»é”®æ˜¯ 10ï¼‰ã€‚</p>
<p>ä½ ä¸éœ€è¦å†™ç‰¹æ®Šè¯­æ³•ï¼Œè¿™æ˜¯ InnoDB çš„é»˜è®¤ä¿æŠ¤æœºåˆ¶ã€‚</p>
<hr/>
<h3 data-id="heading-27">7. å…ƒæ•°æ®é”ï¼ˆMDLï¼‰</h3>
<h4 data-id="heading-28">æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>ä¿æŠ¤è¡¨ç»“æ„ï¼ˆDDLï¼‰ä¸è¢«å¹¶å‘ä¿®æ”¹ã€‚</p>
<h4 data-id="heading-29">è‡ªåŠ¨åŠ é”è§„åˆ™ï¼š</h4>
<ul>
<li>æ‰§è¡Œ <code>SELECT</code> â†’ è‡ªåŠ¨åŠ  <strong>MDL è¯»é”</strong></li>
<li>æ‰§è¡Œ <code>ALTER TABLE</code> â†’ éœ€è¦ <strong>MDL å†™é”</strong></li>
</ul>
<h4 data-id="heading-30">å¸¸è§å‘ï¼š</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- äº‹åŠ¡ Aï¼ˆæœªæäº¤ï¼‰</span>
<span class="hljs-keyword">START</span> TRANSACTION;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders;  <span class="hljs-comment">-- åŠ  MDL è¯»é”</span>

<span class="hljs-comment">-- äº‹åŠ¡ B</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> status TINYINT;  <span class="hljs-comment">-- å¡ä½ï¼ç­‰ A æäº¤</span>
</code></pre>
<p>è§£å†³æ–¹æ¡ˆï¼šé¿å…é•¿äº‹åŠ¡ï¼ŒåŠæ—¶<code>COMMIT</code>ï¼</p>
<hr/>
<h3 data-id="heading-31">8. è‡ªå¢é”ï¼ˆAUTO-INC Lockï¼‰</h3>
<p>ç”¨äºæ§åˆ¶<code>AUTO_INCREMENT</code>å­—æ®µçš„å¹¶å‘æ’å…¥ï¼Œç¡®ä¿è‡ªå¢å€¼ä¸é‡å¤ã€‚</p>
<ul>
<li>æ’å…¥å•è¡Œï¼šè½»é‡é”ï¼Œä¸å½±å“å¹¶å‘</li>
<li>æ‰¹é‡æ’å…¥ï¼ˆå¦‚ <code>INSERT INTO ... SELECT</code>ï¼‰ï¼šå¯èƒ½çŸ­æš‚é”è¡¨</li>
</ul>
<p>ä¸€èˆ¬æ— éœ€å¹²é¢„ï¼Œç”±å‚æ•° <code>innodb_autoinc_lock_mode</code> æ§åˆ¶ï¼ˆé»˜è®¤å€¼ 1 å·²è¶³å¤Ÿï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-32">æ­»é”</h2>
<h3 data-id="heading-33">ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ</h3>
<ul>
<li>äº‹åŠ¡ A é”äº†è¡Œ 1ï¼Œç­‰ç€è¡Œ 2ï¼›</li>
<li>äº‹åŠ¡ B é”äº†è¡Œ 2ï¼Œç­‰ç€è¡Œ 1ï¼›</li>
<li>ä¸¤äººäº’ç›¸ç­‰ï¼Œè°ä¹ŸåŠ¨ä¸äº†ã€‚</li>
</ul>
<h3 data-id="heading-34">MySQL æ€ä¹ˆå¤„ç†ï¼Ÿ</h3>
<p>InnoDB ä¼šè‡ªåŠ¨æ£€æµ‹æ­»é”ï¼Œå¹¶<strong>å›æ»šå…¶ä¸­ä¸€ä¸ªäº‹åŠ¡</strong>ï¼ˆæŠ¥é”™ï¼š<code>Deadlock found when trying to get lock</code>ï¼‰ã€‚</p>
<h3 data-id="heading-35">å¦‚ä½•é¿å…ï¼Ÿ</h3>
<ol>
<li><strong>æŒ‰å›ºå®šé¡ºåºè®¿é—®æ•°æ®</strong>ï¼ˆå¦‚æ€»æ˜¯å…ˆæ“ä½œ user_id å°çš„ï¼‰</li>
<li><strong>å‡å°‘äº‹åŠ¡æŒæœ‰é”çš„æ—¶é—´</strong>ï¼ˆå°½å¿« COMMITï¼‰</li>
<li><strong>é¿å…å¤§äº‹åŠ¡</strong></li>
<li>å¿…è¦æ—¶é™çº§éš”ç¦»çº§åˆ«ï¼ˆå¦‚ç”¨ <code>READ COMMITTED</code> å‡å°‘é—´éš™é”ï¼‰</li>
</ol>
<p>ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬å†åšè¯¦ç»†ä»‹ç»ã€‚</p>
<hr/>
<h2 data-id="heading-36">å®ç”¨å‘½ä»¤ï¼šæŸ¥çœ‹å½“å‰é”</h2>
<p>MySQL 8.0+ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹å½“å‰æ‰€æœ‰é”</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> performance_schema.data_locks;

<span class="hljs-comment">-- æŸ¥çœ‹è°åœ¨ç­‰é”</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> performance_schema.data_lock_waits;

<span class="hljs-comment">-- æŸ¥çœ‹æ´»è·ƒäº‹åŠ¡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.INNODB_TRX;
</code></pre>
<hr/>
<h2 data-id="heading-37">æ€»ç»“</h2>
<pre><code class="hljs language-markdown" lang="markdown">é”çš„åˆ†ç±»
â”œâ”€â”€ æŒ‰ç²’åº¦
â”‚   â”œâ”€â”€ è¡Œé”ï¼ˆInnoDB ä¸»åŠ›ï¼‰
â”‚   â”œâ”€â”€ è¡¨é”ï¼ˆMyISAM / æ‰‹åŠ¨ï¼‰
â”‚   â””â”€â”€ é¡µé”ï¼ˆå·²æ·˜æ±°ï¼‰
â”‚
â””â”€â”€ æŒ‰æ¨¡å¼
<span class="hljs-code">    â”œâ”€â”€ Sï¼ˆå…±äº«é”ï¼‰ â†’ FOR SHARE
    â”œâ”€â”€ Xï¼ˆæ’ä»–é”ï¼‰ â†’ FOR UPDATE / UPDATE
    â”œâ”€â”€ ISï¼ˆæ„å‘å…±äº«ï¼‰ â†’ è‡ªåŠ¨
    â””â”€â”€ IXï¼ˆæ„å‘æ’ä»–ï¼‰ â†’ è‡ªåŠ¨
</span>
ç‰¹æ®Šé”ç±»å‹ï¼š
<span class="hljs-bullet">-</span> é—´éš™é”ã€ä¸´é”®é” â†’ é˜²å¹»è¯»ï¼ˆRR çº§åˆ«è‡ªåŠ¨ï¼‰
<span class="hljs-bullet">-</span> MDL é” â†’ ä¿è¡¨ç»“æ„
<span class="hljs-bullet">-</span> è‡ªå¢é” â†’ ä¿ AUTO<span class="hljs-emphasis">_INCREMENT
</span></code></pre>
<p><strong>å»ºè®®</strong>ï¼š<br/>
æ—¥å¸¸å¼€å‘ç”¨ <strong>InnoDB å¼•æ“ + å¯é‡å¤è¯»éš”ç¦»çº§åˆ«</strong>ï¼Œå¤§å¤šæ•°é”é—®é¢˜éƒ½èƒ½è‡ªåŠ¨å¤„ç†ã€‚<br/>
åªè¦æ³¨æ„ï¼š<strong>åˆ«å†™å¤ªé•¿çš„äº‹åŠ¡ï¼Œç´¢å¼•è¦åˆç†</strong>ï¼Œå°±èƒ½é¿å¼€å¤§éƒ¨åˆ†é”å†²çªï¼</p>
<p>æ€»çš„æ¥è¯´ï¼ŒMySQL çš„é”æœºåˆ¶è™½ç„¶ç§ç±»ä¸å°‘ï¼Œä½†æ ¸å¿ƒç›®æ ‡åªæœ‰ä¸€ä¸ªï¼šåœ¨å¹¶å‘ç¯å¢ƒä¸‹ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚åªè¦æˆ‘ä»¬åˆç†ä½¿ç”¨ç´¢å¼•ã€é¿å…é•¿äº‹åŠ¡ã€æŒ‰è§„èŒƒå†™ä»£ç ï¼Œå¤§å¤šæ•°é”é—®é¢˜éƒ½èƒ½è½»æ¾é¿å¼€ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-38">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F6V83qjR6u0nyfzL-14xYAw" target="_blank" title="https://mp.weixin.qq.com/s/6V83qjR6u0nyfzL-14xYAw" ref="nofollow noopener noreferrer">ã€Šasync/await åˆ°åº•è¦ä¸è¦åŠ  try-catchï¼Ÿå¼‚æ­¥é”™è¯¯å¤„ç†æœ€ä½³å®è·µã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FbgLoyqb3VLgn3xXAok3kcQ" target="_blank" title="https://mp.weixin.qq.com/s/bgLoyqb3VLgn3xXAok3kcQ" ref="nofollow noopener noreferrer">ã€Šå¦‚ä½•æŸ¥çœ‹ SpringBoot å½“å‰çº¿ç¨‹æ•°ï¼Ÿ3 ç§æ–¹æ³•äº²æµ‹æœ‰æ•ˆã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp0n2mN5RDDDaIWuHHVRUZQ" target="_blank" title="https://mp.weixin.qq.com/s/p0n2mN5RDDDaIWuHHVRUZQ" ref="nofollow noopener noreferrer">ã€ŠJava å¼€å‘å¿…çœ‹ï¼šä»€ä¹ˆæ—¶å€™ç”¨ forï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Streamï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FDpjuafW3agyhLEQYif3zJA" target="_blank" title="https://mp.weixin.qq.com/s/DpjuafW3agyhLEQYif3zJA" ref="nofollow noopener noreferrer">ã€Šåˆ«å†ä¹± new ArrayListï¼8 å¤§ Java å®¹å™¨é€‰å‹æ¡ˆä¾‹ï¼Œä¸€ç¯‡çœ‹æ‡‚ã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ€æ‰‹çº§åŠŸèƒ½è®©ä½ çš„ä»£ç æ•ˆç‡æå‡50%]]></title>    <link>https://juejin.cn/post/7582848701267197987</link>    <guid>https://juejin.cn/post/7582848701267197987</guid>    <pubDate>2025-12-13T00:16:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582848701267197987" data-draft-id="7582783931163967523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ€æ‰‹çº§åŠŸèƒ½è®©ä½ çš„ä»£ç æ•ˆç‡æå‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-13T00:16:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ€æ‰‹çº§åŠŸèƒ½è®©ä½ çš„ä»£ç æ•ˆç‡æå‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T00:16:38.000Z" title="Sat Dec 13 2025 00:16:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ€æ‰‹çº§åŠŸèƒ½è®©ä½ çš„ä»£ç æ•ˆç‡æå‡50%</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>Javaä½œä¸ºä¸€é—¨ç»ä¹…ä¸è¡°çš„ç¼–ç¨‹è¯­è¨€ï¼Œå§‹ç»ˆåœ¨æ¼”è¿›ä¸­ä¿æŒæ´»åŠ›ã€‚2023å¹´9æœˆå‘å¸ƒçš„Java 21æ˜¯ç»§Java 17ä¹‹åçš„åˆä¸€ä¸ªLTSï¼ˆé•¿æœŸæ”¯æŒï¼‰ç‰ˆæœ¬ï¼Œå¸¦æ¥äº†è®¸å¤šä»¤äººæŒ¯å¥‹çš„æ–°ç‰¹æ€§ã€‚è¿™äº›ç‰¹æ€§ä¸ä»…ç®€åŒ–äº†å¼€å‘æµç¨‹ï¼Œè¿˜æ˜¾è‘—æå‡äº†ä»£ç çš„æ‰§è¡Œæ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Java 21ä¸­çš„5ä¸ªâ€œæ€æ‰‹çº§â€åŠŸèƒ½ï¼Œå¹¶é€šè¿‡å®é™…ä»£ç ç¤ºä¾‹å±•ç¤ºå¦‚ä½•åˆ©ç”¨å®ƒä»¬å°†ä½ çš„ä»£ç æ•ˆç‡æå‡50%ã€‚</p>
<h3 data-id="heading-2">ä¸»ä½“</h3>
<h4 data-id="heading-3">1. <strong>è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰â€”â€”è½»é‡çº§å¹¶å‘çš„é©å‘½</strong></h4>
<p>è™šæ‹Ÿçº¿ç¨‹æ˜¯Java 21ä¸­æœ€å¼•äººæ³¨ç›®çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œæ—¨åœ¨è§£å†³ä¼ ç»Ÿçº¿ç¨‹æ¨¡å‹çš„èµ„æºæ¶ˆè€—é—®é¢˜ã€‚ä¸å¹³å°çº¿ç¨‹ï¼ˆOSçº¿ç¨‹ï¼‰ä¸åŒï¼Œè™šæ‹Ÿçº¿ç¨‹ç”±JVMç®¡ç†ï¼Œåˆ›å»ºå’Œåˆ‡æ¢çš„å¼€é”€æä½ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newVirtualThreadPerTaskExecutor()) {
    IntStream.range(<span class="hljs-number">0</span>, <span class="hljs-number">10_000</span>).forEach(i -&gt; {
        executor.submit(() -&gt; {
            Thread.sleep(Duration.ofSeconds(<span class="hljs-number">1</span>));
            <span class="hljs-keyword">return</span> i;
        });
    });
}
</code></pre>
<p>è¿™æ®µä»£ç å¯ä»¥è½»æ¾å¯åŠ¨1ä¸‡ä¸ªè™šæ‹Ÿçº¿ç¨‹ï¼Œè€Œä¸ä¼šåƒä¼ ç»Ÿçº¿ç¨‹é‚£æ ·è€—å°½ç³»ç»Ÿèµ„æºã€‚è™šæ‹Ÿçº¿ç¨‹çš„å¼•å…¥ä½¿å¾—é«˜å¹¶å‘ç¼–ç¨‹å˜å¾—æ›´åŠ ç®€å•é«˜æ•ˆã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹ï¼š</strong></p>
<ul>
<li>å‡å°‘å†…å­˜å ç”¨ï¼ˆæ¯ä¸ªè™šæ‹Ÿçº¿ç¨‹ä»…éœ€å‡ ç™¾å­—èŠ‚ï¼‰ã€‚</li>
<li>ç®€åŒ–å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼Œé¿å…å›è°ƒåœ°ç‹±ã€‚</li>
</ul>
<h4 data-id="heading-4">2. <strong>æ¨¡å¼åŒ¹é…çš„å¢å¼ºâ€”â€”æ›´ç®€æ´çš„ç±»å‹æ£€æŸ¥å’Œè½¬æ¢</strong></h4>
<p>Java 21è¿›ä¸€æ­¥æ‰©å±•äº†æ¨¡å¼åŒ¹é…çš„èƒ½åŠ›ï¼Œç‰¹åˆ«æ˜¯åœ¨<code>switch</code>è¡¨è¾¾å¼å’Œè¯­å¥ä¸­æ”¯æŒæ›´å¤æ‚çš„æ¨¡å¼åŒ¹é…é€»è¾‘ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello, Java 21"</span>;
<span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> String s &amp;&amp; s.length() &gt; <span class="hljs-number">5</span>) {
    System.out.println(s.toUpperCase());
}

<span class="hljs-comment">// switchè¡¨è¾¾å¼ä¸­çš„æ¨¡å¼åŒ¹é…</span>
<span class="hljs-type">String</span> <span class="hljs-variable">formatted</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">switch</span> (obj) {
    <span class="hljs-keyword">case</span> Integer i -&gt; String.format(<span class="hljs-string">"int %d"</span>, i);
    <span class="hljs-keyword">case</span> String s -&gt; String.format(<span class="hljs-string">"String %s"</span>, s);
    <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">"Unknown"</span>;
};
</code></pre>
<p>è¿™ç§è¯­æ³•ç³–è®©ä»£ç æ›´åŠ ç›´è§‚ï¼Œå‡å°‘äº†å†—ä½™çš„ç±»å‹æ£€æŸ¥å’Œå¼ºåˆ¶è½¬æ¢æ“ä½œã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹ï¼š</strong></p>
<ul>
<li>å‡å°‘æ ·æ¿ä»£ç ï¼Œæé«˜å¯è¯»æ€§ã€‚</li>
<li>ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨æ£€æŸ¥é¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
</ul>
<h4 data-id="heading-5">3. <strong>Sequenced Collectionsâ€”â€”ç»Ÿä¸€çš„é›†åˆæ“ä½œæ¥å£</strong></h4>
<p>Java 21å¼•å…¥äº†<code>SequencedCollection</code>ã€<code>SequencedSet</code>å’Œ<code>SequencedMap</code>æ¥å£ï¼Œä¸ºæœ‰åºé›†åˆæä¾›äº†ä¸€è‡´çš„æ“ä½œæ–¹æ³•ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">SequencedCollection&lt;String&gt; sequenced = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(List.of(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>));
sequenced.addFirst(<span class="hljs-string">"0"</span>); <span class="hljs-comment">// å¤´éƒ¨æ’å…¥</span>
sequenced.addLast(<span class="hljs-string">"d"</span>); <span class="hljs-comment">// å°¾éƒ¨æ’å…¥</span>

<span class="hljs-comment">// SequencedMapçš„æ“ä½œ</span>
SequencedMap&lt;Integer, String&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>&lt;&gt;();
map.put(<span class="hljs-number">1</span>, <span class="hljs-string">"one"</span>);
map.firstEntry(); <span class="hljs-comment">// Entry[1, "one"]</span>
</code></pre>
<p>è¿™äº›æ¥å£ç»Ÿä¸€äº†ä¸åŒé›†åˆç±»å‹çš„æ“ä½œæ–¹å¼ï¼Œé¿å…äº†å¼€å‘è€…éœ€è¦è®°ä½æ¯ç§é›†åˆçš„å…·ä½“APIå·®å¼‚ã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹ï¼š</strong></p>
<ul>
<li>æä¾›ä¸€è‡´çš„APIè®¾è®¡ï¼Œé™ä½å­¦ä¹ æˆæœ¬ã€‚</li>
<li>ç®€åŒ–å¯¹é›†åˆå¤´å°¾å…ƒç´ çš„ç›´æ¥æ“ä½œé€»è¾‘ã€‚</li>
</ul>
<h4 data-id="heading-6">4. <strong>å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆString Templatesï¼‰â€”â€”å‘Šåˆ«ç¹ççš„æ‹¼æ¥</strong></h4>
<p>å­—ç¬¦ä¸²æ¨¡æ¿ï¼ˆé¢„è§ˆåŠŸèƒ½ï¼‰æ˜¯Javaè¿ˆå‘ç°ä»£åŒ–å­—ç¬¦ä¸²å¤„ç†çš„é‡å¤§ä¸€æ­¥ï¼Œå…è®¸ç›´æ¥åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥è¡¨è¾¾å¼ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Alice"</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;
<span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> STR.<span class="hljs-string">"My name is \{name} and I am \{age} years old."</span>;
</code></pre>
<p>ç›¸æ¯”äºä¼ ç»Ÿçš„<code>StringBuilder</code>æˆ–<code>+</code>æ‹¼æ¥æ–¹å¼ï¼Œå­—ç¬¦ä¸²æ¨¡æ¿æ›´åŠ ç®€æ´å’Œå®‰å…¨ï¼ˆé¿å…SQLæ³¨å…¥ç­‰é£é™©ï¼‰ã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹ï¼š</strong><br/>
-å‡å°‘æ‰‹å†™æ‹¼æ¥ä»£ç çš„é”™è¯¯ç‡ã€‚
-æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿å¤„ç†å™¨ï¼ˆå¦‚SQLã€JSONç­‰åœºæ™¯ï¼‰ã€‚</p>
<p>####5.<strong>Record Patternsâ€”â€”åµŒå¥—æ•°æ®è§£æ„çš„ç»ˆææ–¹æ¡ˆ</strong>
Record Patternsæ˜¯å¯¹RecordsåŠŸèƒ½çš„è¡¥å……å‡çº§,å…è®¸ç›´æ¥è§£æ„åµŒå¥—è®°å½•ç»“æ„ã€‚</p>
<p><strong>å®æˆ˜ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">record</span> <span class="hljs-title class_">Point</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y)</span>{}
<span class="hljs-keyword">record</span> <span class="hljs-title class_">Rectangle</span><span class="hljs-params">(Point topLeft,Point bottomRight)</span>{}

<span class="hljs-keyword">void</span> <span class="hljs-title function_">printXCoord</span><span class="hljs-params">(Rectangle r)</span>{
    <span class="hljs-keyword">if</span>(r <span class="hljs-keyword">instanceof</span> <span class="hljs-title function_">Rectangle</span><span class="hljs-params">(Point(<span class="hljs-keyword">var</span> x1,_)</span>,Point(<span class="hljs-keyword">var</span> x2,_))){
        System.out.println(x1 +<span class="hljs-string">","</span>+x2);
    }
}
</code></pre>
<p>é€šè¿‡åµŒå¥—è§£æ„å¯ä»¥ç›´æ¥æå–å¤šå±‚æ•°æ®å­—æ®µå€¼ã€‚</p>
<p><strong>æ•ˆç‡æå‡ç‚¹:</strong>
-æ¶ˆé™¤æ‰‹åŠ¨é€å±‚æ‹†è§£çš„å†—ä½™ä»£ç ã€‚
-å®Œç¾é…åˆRecordså®ç°DDDé¢†åŸŸæ¨¡å‹ã€‚</p>
<p>###æ€»ç»“</p>
<p>Java21é€šè¿‡è™šæ‹Ÿçº¿ç¨‹ã€æ¨¡å¼åŒ¹é…å¢å¼ºç­‰äº”å¤§ç‰¹æ€§å½»åº•æ”¹å˜äº†å¼€å‘ä½“éªŒï¼š</p>
<p>-è™šæ‹Ÿçº¿ç¨‹è®©é«˜å¹¶å‘ç¨‹åºä»å¤æ‚èµ°å‘ç®€å•ï¼›
-æ¨¡å¼åŒ¹é…ä½¿ç±»å‹å¤„ç†æ›´ç¬¦åˆç›´è§‰ï¼›
-Sequenced Collectionsç»Ÿä¸€äº†æœ‰åºé›†åˆAPIï¼›
-å­—ç¬¦ä¸²æ¨¡æ¿ç»ˆç»“äº†ä¸‘é™‹çš„æ‹¼æ¥æ—¶ä»£ï¼›
-Record Patternså®ç°äº†ä¼˜é›…çš„æ•°æ®è§£æ„ã€‚</p>
<p>è¿™äº›æ”¹è¿›ä¸æ˜¯ç®€å•çš„è¯­æ³•ç³–è€Œæ˜¯èƒ½åˆ‡å®é™ä½ç»´æŠ¤æˆæœ¬å¹¶æé«˜è¿è¡Œæ•ˆç‡çš„å·¥å…·é“¾å‡çº§å»ºè®®æ‰€æœ‰å¼€å‘è€…å°½å¿«ç†Ÿæ‚‰å¹¶åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ä»¥äº«å—æŠ€æœ¯è¿›æ­¥å¸¦æ¥çš„çº¢åˆ©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›]]></title>    <link>https://juejin.cn/post/7582809606067470362</link>    <guid>https://juejin.cn/post/7582809606067470362</guid>    <pubDate>2025-12-13T00:37:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606067470362" data-draft-id="7582791876367269926" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2025-12-13T00:37:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-13T00:37:08.000Z" title="Sat Dec 13 2025 00:37:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›</h2>
<p>PHP å†…å­˜æ¶ˆè€—çš„å¤§å¹…ä¼˜åŒ–å·²ç»å¾ˆç½•è§äº†ã€‚è¿‘å¹´æ¥çš„å†…å­˜æ”¹è¿›èŒƒå›´è¾ƒå°ï¼Œä¸»è¦é›†ä¸­åœ¨æŸäº›ç±»å‹å˜é‡çš„ç»†èŠ‚ä¸Šã€‚</p>
<p>æ¯”å¦‚æ”¹è¿›åƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰åœ¨è¾¹ç¼˜æƒ…å†µä¸‹çš„è¡¨ç°ã€‚<code>Iljia Tovilo</code> ä¸º PHP 8.5 è´¡çŒ®äº†è¿™ä¸ªä¼˜åŒ–ï¼Œæ ‡é¢˜æ˜¯â€œå°†æšä¸¾å’Œé™æ€ä¼ªé—­åŒ…æ ‡è®°ä¸ºä¸å¯å›æ”¶â€ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå¯¹äºè¿™ä¸¤ç§å˜é‡ç±»å‹ï¼Œå¾ªç¯å›æ”¶å™¨ä¸ä¼šå°è¯•â€œæ”¶é›†â€å®ƒä»¬ï¼Œå¤§é‡ä½¿ç”¨è¿™äº›å®ä¾‹æ—¶å°±èƒ½é¿å…ä¸å¿…è¦çš„ GC è¿è¡Œã€‚</p>
<p>è¿™æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼Œå› ä¸ºè¿™äº›ç±»å‹æœ¬èº«ä¸å¯èƒ½å½¢æˆå¾ªç¯å¼•ç”¨ï¼Œæœ¬æ¥å°±ä¸åœ¨ GC çš„ç®¡è¾–èŒƒå›´å†…ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2025-12%2Fphp-8-5-garbage-collection-improvements" target="_blank" title="https://catchadmin.com/post/2025-12/php-8-5-garbage-collection-improvements" ref="nofollow noopener noreferrer">åŸæ–‡é“¾æ¥ PHP 8.5 åƒåœ¾å›æ”¶æ”¹è¿›</a></p>
<h3 data-id="heading-1">å¿«é€Ÿå›é¡¾ï¼šPHP çš„åƒåœ¾å›æ”¶å™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3>
<p>è¦ç†è§£ä¸ºä»€ä¹ˆè¿™å¾ˆæœ‰ç”¨ï¼Œå…ˆå¿«é€Ÿå›é¡¾ä¸€ä¸‹ PHP åƒåœ¾å›æ”¶çš„å·¥ä½œåŸç†ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒPHP çš„ GC ä¸æ˜¯æŒç»­è¿è¡Œçš„ï¼Œè€Œæ˜¯ç”±é˜ˆå€¼è§¦å‘ã€‚è¿™ä¸ªé˜ˆå€¼æ˜¯ï¼šå†…å­˜ä¸­è‡³å°‘æœ‰ 10,000 ä¸ªå¯èƒ½å­˜åœ¨å¾ªç¯å¼•ç”¨çš„å¯¹è±¡æˆ–æ•°ç»„ã€‚å¦‚æœè¿™äº›å®ä¾‹æ•°é‡ä¸æ–­å¢åŠ è€Œæ— æ³•æ¸…ç†ï¼ŒGC å¯èƒ½ä¼šåœ¨è¶Šæ¥è¶Šå¤šçš„å¯¹è±¡ä¸Šè¿è¡Œï¼Œæ¶ˆè€—å®è´µçš„è®¡ç®—èµ„æºã€‚</p>
<p>å› æ­¤ï¼Œå‡å°‘ç¬¦åˆåƒåœ¾å›æ”¶æ¡ä»¶çš„å¯¹è±¡æ•°é‡å¯ä»¥é™ä½ GC è¿è¡Œçš„æ¦‚ç‡ï¼Œä»è€Œæå‡æ€§èƒ½ã€‚</p>
<p>PHP 7.3 æ·»åŠ äº†ä¸€ä¸ªå®ç”¨å‡½æ•° <code>gc_status()</code>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.php.net%2Fmanual%2Fen%2Ffunction.gc-status.php" target="_blank" title="https://www.php.net/manual/en/function.gc-status.php" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ï¼‰ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°äº†è§£åƒåœ¾å›æ”¶çš„æ€§èƒ½æƒ…å†µã€‚</p>
<h3 data-id="heading-2">å®é™…æ”¶ç›Šæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>çœ‹ä¸€ä¸‹ PR ä¸­çš„ä¾‹å­ï¼Œå¤§é‡ first class callable å®ä¾‹è¢«æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œç„¶åè¿›è¡Œè¿­ä»£ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"/>) </span>{}

<span class="hljs-variable">$array</span> = [];
<span class="hljs-keyword">for</span> (<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$i</span> &lt; <span class="hljs-number">10_000_000</span>; <span class="hljs-variable">$i</span>++) {
    <span class="hljs-variable">$array</span>[] = <span class="hljs-title function_ invoke__">foo</span>(...);
}

<span class="hljs-comment">//</span>
<span class="hljs-comment">// è¿™ä¸ªå¾ªç¯æ˜¯ä¸ºäº†ç¡®ä¿è§¦å‘å¾ªç¯å›æ”¶å™¨ï¼š</span>
<span class="hljs-comment">// - `as $foo` ä¼šå¢åŠ æ•°ç»„å…ƒç´ çš„å¼•ç”¨è®¡æ•°</span>
<span class="hljs-comment">// - å˜é‡è¶…å‡ºä½œç”¨åŸŸåå¼•ç”¨è®¡æ•°åˆä¼šå‡å°‘</span>
<span class="hljs-comment">//</span>
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$array</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$foo</span>) {}

<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-title function_ invoke__">gc_status</span>(), JSON_PRETTY_PRINT);
</code></pre>
<p>åœ¨æ—§ç‰ˆ PHP ä¸­ï¼Œè¿™ä¼šè§¦å‘å¾ªç¯å›æ”¶å™¨æ£€æŸ¥æ‰€æœ‰è¿™äº›å®ä¾‹æ˜¯å¦å­˜åœ¨å¾ªç¯å¼•ç”¨ã€‚ç”±äºè¿™äº›å®ä¾‹ä¸å¯èƒ½æœ‰å¾ªç¯å¼•ç”¨ï¼Œè¿™äº›æ£€æŸ¥æ˜¯å¤šä½™çš„ã€‚å¯¹äº 1000 ä¸‡ä¸ªæ¡ç›®ï¼Œè¿™å¯¼è‡´äº† 44 æ¬¡ GC è¿è¡Œï¼Œè€Œ PHP 8.5 åŠä»¥åç‰ˆæœ¬åœ¨ç›¸åŒä»£ç ä¸‹æ˜¯ 0 æ¬¡ã€‚</p>
<h3 data-id="heading-3">å®šä¹‰ï¼š"é™æ€ä¼ªé—­åŒ…"</h3>
<p>PR æ ‡é¢˜è¯´ä¼˜åŒ–é€‚ç”¨äºâ€œæšä¸¾å’Œé™æ€ä¼ªé—­åŒ…â€ã€‚é™æ€ä¼ªé—­åŒ…æ˜¾ç„¶æ˜¯æ›´å¸¸è§çš„æƒ…å†µï¼Œè€Œä¸”æœ¯è¯­ä¸ç”¨æˆ·å±‚é¢çš„å‘½åä¸ä¸€è‡´ï¼Œæˆ‘ä»¬æ¥æ·±å…¥äº†è§£ä¸€ä¸‹ï¼šä»€ä¹ˆæ˜¯â€œé™æ€ä¼ªé—­åŒ…â€ï¼Ÿ</p>
<p>ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨äº†"é™æ€ä¼ªé—­åŒ…"ï¼Œåœ¨ç”¨æˆ·å±‚é¢é€šå¸¸ç§°ä¸º"first-class callable"ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°±æ˜¯ <code>foo(...)</code>ã€‚</p>
<p>è¦åˆ¤æ–­ä¸€ä¸ª callable æ˜¯å¦æ˜¯"ä¼ªé—­åŒ…"ï¼Œå¯ä»¥æ£€æŸ¥è¯¥ callable çš„åå°„ç±»çš„ anonymous æ ‡å¿—æ˜¯å¦è¿”å› falseï¼Œå³ <code>(new \ReflectionFunction($callable))-&gt;isAnonymous();</code>ã€‚</p>
<p>ç±»å‹ä¸­çš„â€œé™æ€â€éƒ¨åˆ†æŒ‡çš„æ˜¯ OOP ä¸­çš„ staticï¼šæ²¡æœ‰è®¿é—®å¯¹è±¡å®ä¾‹ï¼ˆå³ <code>$this</code>ï¼‰çš„æƒé™ã€‚</p>
<p>åœ¨ä¸‹é¢è¿™ä¸ªä¸åŒé—­åŒ…çš„åˆ—è¡¨ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å“ªäº›è¢« PR è®¤ä¸ºæ˜¯é™æ€ä¼ªé—­åŒ…ï¼Œå“ªäº›ä¸æ˜¯ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> 
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span> </span>{}
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baz</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span> </span>{}    
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span> </span>{}

<span class="hljs-comment">//</span>
<span class="hljs-comment">// é™æ€ä¼ªé—­åŒ…</span>
<span class="hljs-comment">//</span>
<span class="hljs-title function_ invoke__">var_dump</span>(...);
<span class="hljs-title function_ invoke__">bar</span>(...);
<span class="hljs-title class_">Foo</span>::<span class="hljs-title function_ invoke__">bar</span>(...);
<span class="hljs-variable">$callable</span> = <span class="hljs-title class_">Closure</span>::<span class="hljs-title function_ invoke__">fromCallable</span>(<span class="hljs-string">'bar'</span>);
<span class="hljs-variable">$callable</span>(...);

<span class="hljs-comment">// ä¼ªé—­åŒ…ï¼Œä½†éé™æ€</span>
(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Foo</span>())-&gt;<span class="hljs-title function_ invoke__">baz</span>(...);
<span class="hljs-comment">// åŒ¿åå‡½æ•°ï¼Œä¸æ˜¯ä¼ªé—­åŒ…</span>
<span class="hljs-variable">$anon</span> = <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"/>) </span>{};
<span class="hljs-variable">$anon</span>(...);
</code></pre>
<h3 data-id="heading-4">æšä¸¾çš„æƒ…å†µ</h3>
<p>ç¬¬äºŒç§è¢«ä¼˜åŒ–çš„ç±»å‹æ˜¯æšä¸¾å®ä¾‹ã€‚è¿™åœ¨å®é™…é¡¹ç›®ä¸­çš„å½±å“å¯èƒ½è¾ƒå°ï¼Œå› ä¸ºåªæœ‰å½“ä»£ç åº“åŒ…å«å¤§é‡æšä¸¾ä¸”æ¯ä¸ªæšä¸¾æœ‰å¾ˆå¤š case æ—¶æ‰ä¼šå½±å“æ€§èƒ½ã€‚æšä¸¾å®ä¾‹æ˜¯å•ä¾‹çš„ï¼Œæ¯ä¸ªæšä¸¾ case åªä¼šè¢«å®ä¾‹åŒ–ä¸€æ¬¡ã€‚å³ä½¿æœ‰æ•°åƒä¸ªå¼•ç”¨æŒ‡å‘ç›¸åŒçš„ä¸‰å››ä¸ªæšä¸¾ caseï¼Œä¹Ÿä¸ä¼šæœ‰å½±å“ï¼Œå› ä¸ºæ¯ä¸ªæšä¸¾ case åœ¨ GC çš„æ ¹ç¼“å†²åŒºä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚</p>
<h3 data-id="heading-5">æ€»ç»“</h3>
<p>è¿™æ ·çš„å°æ”¹è¿›è¡¨æ˜ï¼ŒPHP çš„å†…å­˜ç®¡ç†åœ¨å·²ç»ç›¸å½“æˆç†Ÿçš„æƒ…å†µä¸‹ä»ç„¶å¯ä»¥ç»§ç»­ä¼˜åŒ–ã€‚</p>
<p>è¿™ä¸ªæ”¹åŠ¨å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹æå‡æ€§èƒ½ï¼Œä½†æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒç¡®ä¿åƒåœ¾å›æ”¶è¿è¡Œä¸ä¼šåœ¨æ— å…³çš„æ£€æŸ¥ä¸Šæµªè´¹æ—¶é—´ã€‚</p>
<p>æ„Ÿè°¢ <code>Iljia Tovilo</code> çš„è´¡çŒ®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GPT-5.2æ·±å¤œç‚¸åœºï¼šä¸ºäº†è®©ä½ æ¯å‘¨å°‘å¹²10å°æ—¶ï¼ŒOpenAIæ‹¼äº†]]></title>    <link>https://juejin.cn/post/7582846276505731110</link>    <guid>https://juejin.cn/post/7582846276505731110</guid>    <pubDate>2025-12-12T16:48:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582846276505731110" data-draft-id="7582814236583378982" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GPT-5.2æ·±å¤œç‚¸åœºï¼šä¸ºäº†è®©ä½ æ¯å‘¨å°‘å¹²10å°æ—¶ï¼ŒOpenAIæ‹¼äº†"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-12T16:48:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GPT-5.2æ·±å¤œç‚¸åœºï¼šä¸ºäº†è®©ä½ æ¯å‘¨å°‘å¹²10å°æ—¶ï¼ŒOpenAIæ‹¼äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T16:48:54.000Z" title="Fri Dec 12 2025 16:48:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°±åœ¨åˆšåˆšè¿‡å»çš„12æœˆ11æ—¥ï¼ŒOpenAIç»™æ²‰å¯‚äº†ä¸€æ®µæ—¶é—´çš„ç§‘æŠ€åœˆæ‰”ä¸‹äº†ä¸€æšé‡ç£…ç‚¸å¼¹ã€‚</p>
<p>å¦‚æœä½ è¿˜è®°å¾—ä¸Šä¸ªæœˆè°·æ­ŒGemini 3å‘å¸ƒæ—¶å¸¦æ¥çš„éœ‡æ’¼ï¼Œé‚£ä½ å¤§æ¦‚èƒ½ç†è§£OpenAIå†…éƒ¨é‚£ç§â€œçº¢è‰²è­¦æŠ¥â€çš„ç´§è¿«æ„Ÿã€‚GPT-5.2å°±æ˜¯åœ¨è¿™ç§é«˜å‹ç¯å¢ƒä¸‹è¯ç”Ÿçš„äº§ç‰©ã€‚è¿™æ¬¡æ²¡æœ‰é‚£äº›è™šå¤´å·´è„‘çš„ç‚«æŠ€ï¼ŒOpenAIæŠŠæ‰€æœ‰çš„æŠ€èƒ½ç‚¹éƒ½ç‚¹åœ¨äº†ä¸€ä¸ªæœ€åŠ¡å®çš„æ–¹å‘ä¸Šï¼šè®©ä¸“ä¸šçš„äººï¼Œå¹²æ´»æ›´å¿«ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2FiShot_2025-12-13_00.39.28-1024x262.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/iShot_2025-12-13_00.39.28-1024x262.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5e80a3f9dad44258f0a7b6a79e3973c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=e5fo8jRbq3NYy5fG%2FB4KvPBdj2Y%3D" alt="iShot_2025-12-13_00.39.28" loading="lazy"/></a></p>
<p><strong>é‚£ä¸ªâ€œæ¯å‘¨å°‘å¹²10å°æ—¶â€çš„è¯´æ³•ï¼Œåˆ°åº•é ä¸é è°±ï¼Ÿ</strong></p>
<p>è¿™æ˜¯å¤§å®¶æœ€å…³å¿ƒçš„å™±å¤´ï¼Œä½†ä»”ç»†çœ‹OpenAIç”©å‡ºçš„æ•°æ®ï¼Œä½ ä¼šå‘ç°è¿™ä¸å…¨æ˜¯è¥é”€è¯æœ¯ã€‚</p>
<p>ä»¥å‰æˆ‘ä»¬ç”¨AIï¼Œæ›´å¤šæ˜¯å½“ç™¾ç§‘å…¨ä¹¦æˆ–è€…æ˜¯å†™å†™é‚®ä»¶è‰ç¨¿ã€‚ä½†GPT-5.2è¿™æ¬¡ç›´æ¥æ€è¿›äº†â€œæ·±æ°´åŒºâ€ã€‚æ ¹æ®å®˜æ–¹å¯¹ChatGPTä¼ä¸šç‰ˆé‡åº¦ç”¨æˆ·çš„ç»Ÿè®¡ï¼Œè¿™å¸®äººæ¯å‘¨çœŸçš„çœå‡ºäº†è¶…è¿‡10ä¸ªå°æ—¶ã€‚</p>
<p>è¿™10ä¸ªå°æ—¶æ˜¯æ€ä¹ˆçœå‡ºæ¥çš„ï¼Ÿä¸æ˜¯é è®©AIç»™ä½ è®²ç¬‘è¯ï¼Œè€Œæ˜¯é å®ƒå¤„ç†é‚£äº›æœ€ç£¨äººçš„â€œè„æ´»ç´¯æ´»â€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fafwsafds-1024x576.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/afwsafds-1024x576.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21a050a587ac4c9c9dbc780dfd77f339~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=XSIZQISx6r0uPaHzw3sF%2FG%2Bt8Dg%3D" alt="afwsafds" loading="lazy"/></a></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ‰‹å¤´æœ‰ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„è´¢åŠ¡æŠ¥è¡¨éœ€è¦æ•´ç†æˆExcelï¼Œæˆ–è€…æœ‰ä¸€ä¸ªå‡ ç™¾é¡µçš„æŠ€æœ¯æ–‡æ¡£éœ€è¦æç‚¼æ ¸å¿ƒé€»è¾‘ï¼Œç”šè‡³æ˜¯ä¸€æ®µæŠ¥é”™æŠ¥åˆ°è®©ä½ æ€€ç–‘äººç”Ÿçš„ä»£ç ã€‚ä»¥å‰GPT-4å¯èƒ½åšä¸ªå¤§æ¦‚ï¼Œå‰©ä¸‹è¿˜å¾—ä½ è‡ªå·±æ”¹ã€‚ä½†GPT-5.2åœ¨è¿™äº›ä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼Œåªèƒ½ç”¨â€œæ®‹æš´â€æ¥å½¢å®¹ã€‚</p>
<p>è¿™å°±ä¸å¾—ä¸æä¸€ä¸ªæ–°çš„æµ‹è¯•æ ‡å‡†â€”â€”GDPvalã€‚è¿™æ˜¯ä¸€ä¸ªä¸“é—¨è¯„ä¼°44ç§èŒä¸šçŸ¥è¯†å·¥ä½œä»»åŠ¡çš„æµ‹è¯•ã€‚åœ¨è¿™ä¸ªæµ‹è¯•é‡Œï¼ŒGPT-5.2åœ¨70.9%çš„æƒ…å†µä¸‹ï¼Œè¡¨ç°å¾—ç­‰äºæˆ–è€…å¥½äºäººç±»è¡Œä¸šä¸“å®¶ã€‚</p>
<p>å¬æ‡‚äº†å—ï¼Ÿè¿™ä¸ä»…ä»…æ˜¯â€œè¾…åŠ©å·¥å…·â€äº†ï¼Œåœ¨ä¸ƒæˆçš„åœºæ™¯ä¸‹ï¼Œå®ƒå°±æ˜¯é‚£ä¸ªååœ¨ä½ æ—è¾¹çš„èµ„æ·±ä¸“å®¶ã€‚</p>
<p><strong>ä¸‰ä¸ªç‰ˆæœ¬ï¼Œæ€»æœ‰ä¸€æ¬¾é€‚åˆä½ </strong></p>
<p>è¿™æ¬¡OpenAIå­¦èªæ˜äº†ï¼Œæ²¡æœ‰ä¸€è‚¡è„‘æ¨ä¸€ä¸ªæ¨¡å‹ï¼Œè€Œæ˜¯åƒæ‰‹æœºå‚å•†ä¸€æ ·æäº†â€œæ¯å‹â€åŒºåˆ†ï¼š</p>
<p>Instantç‰ˆæœ¬ï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯æ•ˆç‡å¼•æ“ï¼Œä¸»æ‰“å¿«ï¼Œé€‚åˆæ—¥å¸¸çç¢çš„é—®ç­”ï¼›Thinkingç‰ˆæœ¬ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤§è„‘ï¼Œæ“…é•¿æ·±åº¦æ€è€ƒå’Œå¤æ‚æ¨ç†ï¼›è¿˜æœ‰ä¸€ä¸ªProç‰ˆæœ¬ï¼Œé‚£æ˜¯ç»™é¡¶å°–æ™ºåº“å’Œå¼€å‘è€…å‡†å¤‡çš„æ ¸æ­¦å™¨ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fasfdsgdsg-1024x608.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/asfdsgdsg-1024x608.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/390eac9b5d3d4da9a4ded3a5bc0c739c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=QquxUz3ibQ%2B0FC8UbPRJ82MhfZI%3D" alt="asfdsgdsg" loading="lazy"/></a></p>
<p>å¯¹äºå¤§å¤šæ•°äººæ¥è¯´ï¼ŒThinkingç‰ˆæœ¬å¯èƒ½æ˜¯æœ€æƒŠè‰³çš„ã€‚ç‰¹åˆ«æ˜¯å®ƒçš„é•¿æ–‡æœ¬å¤„ç†èƒ½åŠ›ï¼Œæ”¯æŒé«˜è¾¾256Kçš„ä¸Šä¸‹æ–‡ã€‚è¿™æ„å‘³ç€ä½ èƒ½æŠŠæ•´æœ¬ä¹¦ã€æ•´å¥—æ³•å¾‹å·å®—æ‰”ç»™å®ƒï¼Œå®ƒä¸ä»…èƒ½è¯»å®Œï¼Œè¿˜èƒ½ç²¾å‡†åœ°å›ç­”ä½ ç¬¬235é¡µçš„ä¸€ä¸ªç»†èŠ‚æ¡æ¬¾ï¼Œè€Œä¸”å¹»è§‰ç‡æ¯”ä¸Šä¸€ä»£é™ä½äº†30%ã€‚</p>
<p>è¯´å®è¯ï¼Œä»¥å‰ç”¨AIæŸ¥èµ„æ–™æœ€æ€•å®ƒä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ï¼Œç°åœ¨è¿™ä¸ªæ¯›ç—…è™½ç„¶æ²¡å®Œå…¨æ ¹é™¤ï¼Œä½†è‡³å°‘å·²ç»ä»â€œä¸å¯ä¿¡â€å˜æˆäº†â€œåŸºæœ¬å¯ä¿¡â€ã€‚</p>
<p><strong>ä¸ä»…ä»…æ˜¯èŠå¤©ï¼Œæ›´æ˜¯ç”Ÿäº§åŠ›</strong></p>
<p>è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚å€¼å¾—æ³¨æ„ï¼ŒGPT-5.2åœ¨è§†è§‰å’Œå›¾è¡¨ç†è§£ä¸Šçš„è¿›åŒ–ã€‚</p>
<p>ä»¥å‰ä½ å‘ç»™AIä¸€å¼ å¤æ‚çš„æ•°æ®ä»ªè¡¨ç›˜æˆªå›¾ï¼Œå®ƒå¯èƒ½è¿æ¨ªçºµåæ ‡éƒ½æä¸æ¸…æ¥šã€‚ç°åœ¨ï¼Œå®ƒçš„é”™è¯¯ç‡ç›´æ¥ç åŠã€‚å¯¹äºåšé‡‘èåˆ†æã€å·¥ç¨‹åˆ¶å›¾æˆ–è€…ç§‘ç ”çš„äººæ¥è¯´ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç›´æ¥ä¸¢å›¾è¡¨ç»™å®ƒï¼Œè®©å®ƒå¸®ä½ åˆ†æè¶‹åŠ¿ï¼Œè€Œä¸æ˜¯å…ˆæŠŠæ•°æ®æ‰‹æ•²è¿›Excelã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Fawfsadfsd-1024x782.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/awfsadfsd-1024x782.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05d2ca99f8dc4a77aae980e8407f401a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=W2Qgj7txssNdFEx3qX3ava98%2BGw%3D" alt="awfsadfsd" loading="lazy"/></a></p>
<p>å½“ç„¶ï¼Œè¿™ä¸€åˆ‡æ˜¯æœ‰ä»£ä»·çš„ã€‚è™½ç„¶Tokençš„ä½¿ç”¨æ•ˆç‡é«˜äº†ï¼Œå¯èƒ½æ•´ä½“æˆæœ¬ä¼šä¸‹é™ï¼Œä½†çœ‹ç€Proç‰ˆæœ¬é‚£é«˜æ˜‚çš„APIä»·æ ¼ï¼Œæ™®é€šå¼€å‘è€…è¿˜æ˜¯å¾—æ‚é‡ä¸€ä¸‹ã€‚</p>
<p><strong>å†™åœ¨æœ€å</strong></p>
<p>GPT-5.2çš„å‘å¸ƒï¼ŒæŸç§æ„ä¹‰ä¸Šå®£å‘Šäº†AIæ¨¡å‹ç«äº‰è¿›å…¥äº†ä¸‹åŠåœºã€‚å¤§å®¶ä¸å†æ¯”æ‹¼è°èƒ½å†™å‡ºæ›´ä¼˜ç¾çš„è¯—æ­Œï¼Œè€Œæ˜¯æ¯”æ‹¼è°èƒ½çœŸæ­£åµŒå…¥åˆ°Officeã€GitHub Copilotæˆ–è€…æ˜¯ä½ çš„ä»£ç ç¼–è¾‘å™¨é‡Œï¼Œæ›¿ä½ å¹²å®Œé‚£äº›æ¯ç‡¥çš„é‡å¤åŠ³åŠ¨ã€‚</p>
<p>å¯¹äºæˆ‘ä»¬æ‰“å·¥äººæ¥è¯´ï¼Œè¿™æ—¢æ˜¯ç¦éŸ³ä¹Ÿæ˜¯è­¦é’Ÿã€‚å¦‚æœå·¥å…·çœŸçš„èƒ½æ¯å‘¨å¸®ä½ çœä¸‹10å°æ—¶ï¼Œä½ æ˜¯ä¼šé€‰æ‹©ç”¨è¿™10å°æ—¶å»å­¦ä¹ ã€ä¼‘æ¯ï¼Œè¿˜æ˜¯ä¼šè¢«è€æ¿å¡è¿›æ›´å¤šçš„ä»»åŠ¡ï¼Ÿ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F12%2Ffwqfdsfggg.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/12/fwqfdsfggg.webp" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61cd8f1025df4d2280f10f312d4b3fd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766162934&amp;x-signature=IqKZLe8t7JUwTSlgmpizxYap36U%3D" alt="fwqfdsfggg" loading="lazy"/></a></p>
<p>æ— è®ºå¦‚ä½•ï¼Œå·¥å…·å·²ç»æ‘†åœ¨æ¡Œä¸Šäº†ï¼Œç”¨ä¸ç”¨ï¼Œæ€ä¹ˆç”¨ï¼Œå†³å®šæƒåœ¨ä½ ã€‚ç›®å‰è¿™å¥—ç³»ç»Ÿå·²ç»å¼€å§‹å‘Pluså’Œä¼ä¸šç‰ˆç”¨æˆ·é™†ç»­æ¨é€ï¼Œæƒ³ä½“éªŒçš„æœ‹å‹ï¼Œå¯ä»¥å»çœ‹çœ‹è‡ªå·±çš„è´¦å·æœ‰æ²¡æœ‰è¢«â€œç°åº¦â€åˆ°äº†ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘å¤§è§„æ¨¡çš„ code review å·²ç»å¤±æ•ˆã€‚è¿™æ˜¯æˆ‘ä»¬ä¿®å¤å®ƒçš„æ–¹æ³•ã€‚]]></title>    <link>https://juejin.cn/post/7582779306731667491</link>    <guid>https://juejin.cn/post/7582779306731667491</guid>    <pubDate>2025-12-12T17:40:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582779306731667491" data-draft-id="7582779306731651107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘å¤§è§„æ¨¡çš„ code review å·²ç»å¤±æ•ˆã€‚è¿™æ˜¯æˆ‘ä»¬ä¿®å¤å®ƒçš„æ–¹æ³•ã€‚"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-12T17:40:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘å¤§è§„æ¨¡çš„ code review å·²ç»å¤±æ•ˆã€‚è¿™æ˜¯æˆ‘ä»¬ä¿®å¤å®ƒçš„æ–¹æ³•ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T17:40:06.000Z" title="Fri Dec 12 2025 17:40:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Fblog%2Fintroducing-augment-code-review" target="_blank" title="https://www.augmentcode.com/blog/introducing-augment-code-review" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<h3 data-id="heading-0">TL;DRï¼š</h3>
<p>ä»Šå¤©æˆ‘ä»¬æ¨å‡ºäº† <strong>Augment Code Review</strong>ã€‚ä¸“ä¸ºå¤§å‹çš„ã€é•¿æœŸç»´æŠ¤çš„ä»£ç åº“è€Œæ„å»ºï¼Œå®ƒèƒ½å¤Ÿæ•è·ç°æœ‰å·¥å…·é—æ¼çš„æ­£ç¡®æ€§ã€æ¶æ„å’Œè·¨ç³»ç»Ÿé—®é¢˜ï¼ŒåŒæ—¶æ˜¾è‘—å‡å°‘å™ªéŸ³ã€‚ç”± GPT-5.2 é©±åŠ¨ï¼ŒAugment åœ¨å”¯ä¸€å…¬å¼€çš„ AI è¾…åŠ© code review åŸºå‡†æµ‹è¯•ä¸­è¾¾åˆ°äº†æœ€é«˜å‡†ç¡®ç‡ï¼Œåœ¨æ•´ä½“è´¨é‡ä¸Šæ¯” Cursor Bugbotã€CodeRabbit ç­‰ç³»ç»Ÿé«˜å‡ºçº¦ 10 åˆ†ã€‚ä¼ä¸šå›¢é˜Ÿå’Œ OSS ç»´æŠ¤è€…å·²ç»åœ¨ä½¿ç”¨å®ƒæ¥æ›´å¿«åœ°å®Œæˆ reviews å¹¶å‡å°‘åˆ°è¾¾ç”Ÿäº§ç¯å¢ƒçš„ bugsã€‚</p>
<p><strong>Augment Code Review Agent</strong> ç°å·²å‘æ‰€æœ‰ <strong>Augment Code</strong> ç”¨æˆ·å¼€æ”¾ï¼Œæ‰€æœ‰ä»˜è´¹è®¡åˆ’å…è´¹è¯•ç”¨ä¸€å‘¨ã€‚å¼€æºé¡¹ç›®å¯ä»¥ç”³è¯·å…è´¹ä½¿ç”¨ <strong>Augment Code Review</strong>ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬çš„äº§å“é¡µé¢æˆ–é˜…è¯»æ–‡æ¡£ã€‚</p>
<h3 data-id="heading-1">Code review å·²ç»å¾ˆç—›è‹¦ã€‚AI è®©å®ƒå˜å¾—æ›´ç³Ÿã€‚</h3>
<p>AI å·²ç»æå¤§åœ°åŠ é€Ÿäº†ä»£ç åˆ›å»ºï¼šGoogle æŠ¥å‘Šç§°<strong>è¶…è¿‡ 25%</strong> çš„æ–°ä»£ç ç°åœ¨ç”± AI ç¼–å†™ï¼›Microsoft æŠ¥å‘Š<strong>è¶…è¿‡ 30%</strong>ã€‚ä½†ä¼ä¸šä¸­çš„ review å®¹é‡å¹¶æ²¡æœ‰è·Ÿä¸Šæ­¥ä¼ã€‚è¿™ç§ä¸åŒ¹é…å·²æˆä¸ºç°ä»£è½¯ä»¶å¼€å‘ä¸­æœ€å¤§çš„ç“¶é¢ˆä¹‹ä¸€ã€‚</p>
<p>æ¯ä¸ªå·¥ç¨‹ç»„ç»‡éƒ½çŸ¥é“è¿™äº›ç—‡çŠ¶ï¼š</p>
<ul>
<li>æœ€ä½³å®è·µå­˜åœ¨äºæ–‡æ¡£ã€Slack çº¿ç¨‹å’Œèµ„æ·±å·¥ç¨‹å¸ˆçš„å¤´è„‘ä¸­</li>
<li>ä½†å®ƒä»¬å¹¶æ²¡æœ‰æŒç»­åœ°åº”ç”¨åˆ°ä»£ç ä¸­</li>
<li>å›¢é˜Ÿç­‰å¾…æ•°å¤©æ‰èƒ½å¾—åˆ° review</li>
<li>ä»“ä¿ƒæˆ–è‚¤æµ…çš„ reviews æˆä¸ºè¿è¥é£é™©</li>
</ul>
<p>è´¢åŠ¡åæœæ˜¯çœŸå®çš„ï¼šå¹³å‡æ¯å°æ—¶æ•…éšœæˆæœ¬çº¦ 30 ä¸‡ç¾å…ƒï¼Œåœ¨å¤§ä¼ä¸šä¸­å¯èƒ½è¶…è¿‡æ¯å°æ—¶ 100 ä¸‡ç¾å…ƒã€‚è®¸å¤šæ•…éšœæºäºè½¯ä»¶é”™è¯¯ã€é…ç½®é”™è¯¯æˆ–ä¸å®Œæ•´çš„ reviewsã€‚</p>
<p>æˆ‘ä»¬æ„å»ºäº† <strong>Augment Code Review</strong> æ¥ä»æ ¹æœ¬ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ï¼šé€šè¿‡å¯¹æ¯ä¸ª PR æ‰§è¡Œæœ€ä½³å®è·µï¼ŒåŠæ—©æ•è·é«˜å½±å“é—®é¢˜ï¼Œå¹¶æ¢å¤åœ¨å¤æ‚ç³»ç»Ÿä¸­å·¥ä½œçš„å¼€å‘å›¢é˜Ÿçš„å·¥ä½œæµã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆç°æœ‰ AI review å·¥å…·è¡¨ç°ä¸ä½³</h3>
<p>GitHub Marketplace åˆ—å‡ºäº† <strong>77+ ä¸ª AI review bots</strong>ï¼Œä½†å®ƒä»¬éµå¾ªåŒæ ·æœ‰ç¼ºé™·çš„æ¨¡å¼ï¼š</p>
<p><em>æå– diff â†’ å‘é€ç»™ LLM â†’ ç”Ÿæˆå‡ åä¸ªè‚¤æµ…ã€å˜ˆæ‚çš„è¯„è®º</em></p>
<p>è¿™å¯¼è‡´ï¼š</p>
<ul>
<li><strong>ä½ç²¾ç¡®åº¦</strong>ï¼šå¤ªå¤šä¸ç›¸å…³çš„å»ºè®®</li>
<li><strong>ä½å¬å›ç‡</strong>ï¼šç”±äºç¼ºä¹ä¸Šä¸‹æ–‡è€Œé—æ¼çœŸæ­£çš„ bugs</li>
<li><strong>è‚¤æµ…çš„æ¨ç†</strong>ï¼šå¯¹æ¶æ„æˆ–è·¨æ–‡ä»¶è¡Œä¸ºæ²¡æœ‰ç†è§£</li>
</ul>
<p>å¼€å‘è€…ä¼šå¿½ç•¥å®ƒä»¬ã€‚</p>
<p>ä¸€ä¸ªçœŸæ­£çš„ review agent å¿…é¡»è¾¾åˆ°ä¸åŒçš„æ ‡å‡†ï¼šæ·±åº¦ä¸Šä¸‹æ–‡æ£€ç´¢ã€é«˜ä¿¡å·ã€ä»¥åŠèƒ½å¤Ÿæœ‰æ„ä¹‰åœ°å½±å“åˆå¹¶å†³ç­–çš„è¯„è®ºã€‚</p>
<h3 data-id="heading-3">Augment æ–¹æ³•ï¼šä¿¡å·èƒœè¿‡å™ªéŸ³ï¼Œä¸Šä¸‹æ–‡èƒœè¿‡çŒœæµ‹</h3>
<p>æˆ‘ä»¬çš„ç†å¿µå¾ˆç®€å•ï¼š</p>
<blockquote>
<p>å¦‚æœä¸€ä¸ªè¯„è®ºä¸å¤ªå¯èƒ½æ”¹å˜åˆå¹¶å†³ç­–ï¼Œæˆ‘ä»¬å°±ä¸ä¼šå‘å¸ƒå®ƒã€‚</p>
</blockquote>
<h4 data-id="heading-4"><strong>1. ä¸“æ³¨äºæ­£ç¡®æ€§å’Œæ¶æ„é—®é¢˜</strong></h4>
<p>Augment ä¼˜å…ˆå¤„ç† bugsã€å®‰å…¨æ¼æ´ã€è·¨ç³»ç»Ÿé™·é˜±ã€ä¸å˜é‡ã€å˜æ›´å½±å“é£é™©å’Œç¼ºå¤±æµ‹è¯•â€”â€”è€Œä¸æ˜¯é£æ ¼ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-5"><strong>2. ç†è§£ä½ çš„æ•´ä¸ªä»£ç åº“</strong></h4>
<p>Augment æ£€ç´¢åœ¨å¤§å‹ã€é•¿æœŸç»´æŠ¤çš„ä»“åº“ä¸­è¯„ä¼°æ­£ç¡®æ€§æ‰€éœ€çš„å®Œæ•´è·¨æ–‡ä»¶ä¸Šä¸‹æ–‡ï¼šä¾èµ–é“¾ã€è°ƒç”¨ç‚¹ã€ç±»å‹å®šä¹‰ã€æµ‹è¯•ã€fixtures å’Œå†å²å˜æ›´ã€‚</p>
<p><strong>åŸºå‡†æµ‹è¯•æ˜¾ç¤ºç«å“å·¥å…·æ™®éé—æ¼äº†è¿™ä¸€ä¸Šä¸‹æ–‡ã€‚</strong></p>
<h4 data-id="heading-6"><strong>3. ç¼–ç ä½ å›¢é˜Ÿçš„ä¸“ä¸šçŸ¥è¯†</strong></h4>
<p>å›¢é˜Ÿä¸€æ¬¡æ€§å®šä¹‰è‡ªå®šä¹‰è§„åˆ™ï¼ŒAugment åœ¨ä»»ä½•åœ°æ–¹æ‰§è¡Œå®ƒä»¬ã€‚</p>
<h4 data-id="heading-7"><strong>4. äº†è§£ä½ çš„ç»„ç»‡çœŸæ­£é‡è§†ä»€ä¹ˆï¼ˆæ²¡æœ‰é…ç½®è”“å»¶ï¼‰</strong></h4>
<p>Augment æ ¹æ®ä½ çš„å¼€å‘è€…å¤„ç†æˆ–å¿½ç•¥å“ªäº›è¯„è®ºæ¥é€‚åº”ã€‚ç»“æœæ˜¯ï¼šéšç€æ—¶é—´çš„æ¨ç§»æé«˜ç²¾ç¡®åº¦ã€‚</p>
<h3 data-id="heading-8">å®¢æˆ·çœ‹åˆ°äº†ä»€ä¹ˆ</h3>
<p>Tekion å·¥ç¨‹é«˜çº§æ€»ç›‘ Jawahar Prasad æŠ¥å‘Šè¯´ï¼Œåœ¨ 10 æœˆå‘ä»–çš„ 1,400 åå·¥ç¨‹å¸ˆå›¢é˜Ÿæ¨å‡ºåï¼Œä»–çš„å›¢é˜Ÿå·²ç»çœ‹åˆ°äº† Augment Code Review çš„æœ‰æ„ä¹‰çš„ç»“æœï¼š</p>
<ul>
<li>å¹³å‡åˆå¹¶æ—¶é—´ä» 3 å¤© 4 å°æ—¶ä¸‹é™åˆ° 1 å¤© 7 å°æ—¶ ---&gt; åœ¨ Augment Code Review æ¨å‡ºååˆå¹¶é€Ÿåº¦æé«˜ 60%</li>
<li>é¦–æ¬¡äººå·¥ review çš„æ—¶é—´ä» 3 å¤©å‡å°‘åˆ° 1 å¤©ï¼Œå› ä¸º Augment å‡å°‘äº†å¼€å‘è€…çš„è®¤çŸ¥è´Ÿè·</li>
<li>åœ¨å·¥ç¨‹å¸ˆæ•°é‡ä¸å˜çš„æƒ…å†µä¸‹ï¼Œmerge requests åˆå¹¶æ•°é‡å¢åŠ äº† 21%</li>
</ul>
<p>MongoDB Atlas Clusters çš„é¦–å¸­å·¥ç¨‹å¸ˆ Tyler Kaye è¿™æ ·æè¿°å½±å“ï¼š</p>
<blockquote>
<p>"Augment å·²ç»æˆä¸ºæˆ‘ä»¬ code review æµç¨‹ä¸­å®è´µçš„éƒ¨åˆ†ã€‚å®ƒä¸ä¼šå–ä»£äººå·¥ reviewï¼›å®ƒé€šè¿‡åœ¨é˜Ÿå‹çœ‹åˆ°ä»£ç ä¹‹å‰ç»™ä½œè€…ä¸€ä¸ªæ·±æ€ç†Ÿè™‘çš„ç¬¬ä¸€é review æ¥å¢å¼ºå®ƒã€‚å®ƒçš„è‡ªå®šä¹‰æŒ‡å¯¼åŸåˆ™é›†æˆå°† MongoDB çš„æœ€ä½³å®è·µæ¨èä¸æˆ‘ä»¬è‡ªå·±ç»„ç»‡ç‰¹å®šçš„æŒ‡å¯¼ç›¸ç»“åˆï¼Œä½¿åé¦ˆæ—¢ç›¸å…³åˆå¯æ“ä½œã€‚å†…ç½®çš„å¯è§‚æµ‹æ€§å¸®åŠ©æˆ‘ä»¬äº†è§£ Augment æ­ç¤ºäº†å¤šå°‘è¯„è®ºä»¥åŠå®ƒä»¬è¢«è§£å†³çš„é¢‘ç‡ï¼Œè®©æˆ‘ä»¬å¯¹ä»£ç è´¨é‡è¶‹åŠ¿æœ‰æ›´æ¸…æ™°çš„æ´å¯Ÿã€‚å‡­å€Ÿå…¶é«˜ä¿¡å™ªæ¯”ï¼Œæ¯æ¡è¯„è®ºéƒ½æ„Ÿè§‰æœ‰æ„ä¹‰ã€‚Augment å¸®åŠ©å·¥ç¨‹å¸ˆä»¥æ›´æ¸…æ´ã€å‡†å¤‡æ›´å……åˆ†çš„ä»£ç æ¥è¿›è¡Œ reviewã€‚"</p>
</blockquote>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬è®¾è®¡çš„ä½“éªŒï¼šä¸€ä¸ªå¯é çš„ç¬¬ä¸€é reviewerï¼Œæé«˜ä»£ç è´¨é‡å¹¶åŠ é€Ÿäººå·¥ reviewâ€”â€”è€Œä¸æ˜¯å–ä»£å®ƒã€‚</p>
<h3 data-id="heading-9">åŸºå‡†æµ‹è¯•ï¼šAugment é¢†å…ˆé¢†åŸŸ</h3>
<p>ä¸ºäº†éªŒè¯æ€§èƒ½ï¼Œæˆ‘ä»¬ä½¿ç”¨å”¯ä¸€å…¬å¼€çš„"é»„é‡‘è¯„è®º"æ•°æ®é›†è¯„ä¼°äº†ä¸ƒä¸ªå¹¿æ³›ä½¿ç”¨çš„ AI code review å·¥å…·â€”â€”è¿™äº›æ˜¯åˆæ ¼ reviewer ä¼šæ•è·çš„çœŸå®é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬æµ‹é‡äº†ç²¾ç¡®åº¦ï¼ˆä¿¡å·ï¼‰ã€å¬å›ç‡ï¼ˆè¦†ç›–ç‡ï¼‰å’Œ F åˆ†æ•°ï¼ˆæ•´ä½“è´¨é‡ï¼‰ã€‚</p>
<p>æŒ‰ F åˆ†æ•°æ’åºï¼š</p>





















































<table><thead><tr><th>å·¥å…·</th><th>ç²¾ç¡®åº¦</th><th>å¬å›ç‡</th><th>F åˆ†æ•°</th></tr></thead><tbody><tr><td>â­ <strong>Augment Code Review</strong></td><td>65%</td><td>55%</td><td>59%</td></tr><tr><td>Cursor Bugbot</td><td>60%</td><td>41%</td><td>49%</td></tr><tr><td>Greptile</td><td>45%</td><td>45%</td><td>45%</td></tr><tr><td>Codex Code Review</td><td>68%</td><td>29%</td><td>41%</td></tr><tr><td>CodeRabbit</td><td>36%</td><td>43%</td><td>39%</td></tr><tr><td>Claude Code</td><td>23%</td><td>51%</td><td>31%</td></tr><tr><td>GitHub Copilot</td><td>20%</td><td>34%</td><td>25%</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91f3878f569f48e7a11d9f2ad9d836d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766166006&amp;x-signature=sG7XaFP55%2BDl9h%2FzunCMhgfS2o0%3D" alt="" loading="lazy"/></p>
<p><strong>Augment è¾¾åˆ°äº†æœ€é«˜å‡†ç¡®ç‡ï¼Œåœ¨æ•´ä½“è´¨é‡ä¸Šæ¯”æ¬¡ä¼˜å·¥å…·é«˜å‡ºçº¦ 10 åˆ†ã€‚</strong></p>
<p>å¤§å¤šæ•°å·¥å…·å¿…é¡»é€‰æ‹©ï¼š</p>
<ul>
<li><strong>é«˜å¬å›ç‡ä½†ä½ä¿¡å™ªæ¯”</strong>ï¼ˆClaudeã€Greptileï¼‰</li>
<li><strong>é«˜ç²¾ç¡®åº¦ä½†è‚¤æµ…è¦†ç›–</strong>ï¼ˆCodexã€Cursorï¼‰</li>
</ul>
<p><strong>Augment æ˜¯å”¯ä¸€ä¿æŒé«˜ç²¾ç¡®åº¦å’Œé«˜å¬å›ç‡çš„ç³»ç»Ÿ</strong>ï¼Œå› ä¸ºå®ƒæ£€ç´¢äº†æ·±åº¦æ¨ç†æ‰€éœ€çš„å®Œæ•´ã€æ­£ç¡®çš„ä¸Šä¸‹æ–‡ã€‚</p>
<h3 data-id="heading-10">ä¸ºè§„æ¨¡è€Œæ„å»ºçš„å®šä»·</h3>
<p><strong>Augment Code Review</strong> æ—¨åœ¨åœ¨ä¸ç ´åé¢„ç®—çš„æƒ…å†µä¸‹æä¾›ä»·å€¼ï¼š</p>
<ul>
<li><strong>å¹³å‡æ¯ä¸ª PR review æˆæœ¬ï¼š2,400 ç§¯åˆ†ï¼ˆçº¦ 1.50 ç¾å…ƒï¼‰</strong></li>
<li><strong>å¼€æºé¡¹ç›®å…è´¹</strong>â€”â€”æˆ‘ä»¬ç›¸ä¿¡æ”¯æŒé©±åŠ¨ç°ä»£è½¯ä»¶çš„ OSS ç¤¾åŒºã€‚è¦è·å–è®¿é—®æƒé™ï¼Œè¯·å‘æˆ‘ä»¬å‘é€æ‚¨çš„ OSS é¡¹ç›®é“¾æ¥ã€‚</li>
</ul>
<p>ä»æˆæœ¬è§’åº¦æ¥çœ‹ï¼šä¸€åé«˜çº§å·¥ç¨‹å¸ˆ review ä»£ç çš„æˆæœ¬ä¸ºæ¯å°æ—¶ 75-150 ç¾å…ƒä»¥ä¸Šï¼Œå…·ä½“å–å†³äºå¸‚åœºå’Œèµ„å†ã€‚å³ä½¿æ˜¯å¿«é€Ÿçš„ 10 åˆ†é’Ÿ reviewï¼Œåœ¨å®Œå…¨åŠ è½½æˆæœ¬ä¸‹ä¹Ÿéœ€è¦ 12-25 ç¾å…ƒï¼ˆGoogle çš„ç ”ç©¶æ˜¾ç¤ºå¤§å¤šæ•° code reviews éœ€è¦ 30 åˆ†é’Ÿæˆ–æ›´å¤šï¼‰ã€‚åœ¨æ¯ PR 1.50 ç¾å…ƒçš„ä»·æ ¼ä¸‹ï¼Œå¦‚æœ Augment æ¯æ¬¡ä¸ºæ‚¨çš„å›¢é˜ŸèŠ‚çœ 90 ç§’ï¼Œæˆ–è€…æ•è·äº†ä¸€ä¸ªéœ€è¦çƒ­ä¿®å¤ã€å›æ»šå’Œäº‹ååˆ†æçš„ç”Ÿäº§ bugï¼Œå°±èƒ½æ”¶å›æˆæœ¬ã€‚</p>
<p>æ•°å­¦å¾ˆç®€å•ï¼šæ›´å¿«çš„ reviewsã€ä¸ºæ‚¨çš„èµ„æ·±å·¥ç¨‹å¸ˆå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ã€ä»¥åŠä»¥äººå·¥ review æ—¶é—´æˆæœ¬çš„ä¸€å°éƒ¨åˆ†å‡å°‘ç”Ÿäº§äº‹æ•…ã€‚</p>
<h3 data-id="heading-11">è¯•è¯•å®ƒ</h3>
<p>å¦‚æœæ‚¨ç›®å‰æ˜¯ <strong>Augment Code</strong> å®¢æˆ·ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œé…ç½® Code Reviewï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapp.augmentcode.com%2Fsettings%2Fcode-review" target="_blank" title="https://app.augmentcode.com/settings/code-review" ref="nofollow noopener noreferrer">app.augmentcode.com/settings/coâ€¦</a></p>
<ul>
<li><strong>å¦‚æœæ‚¨æ˜¯ä»˜è´¹ç”¨æˆ·</strong>ï¼šæ‚¨å¯ä»¥åœ¨ä¸‹å‘¨å…è´¹ä½¿ç”¨ Code Review</li>
<li><strong>å¦‚æœæ‚¨æ˜¯å…è´¹è¯•ç”¨ç”¨æˆ·</strong>ï¼šæ‚¨å¯ä»¥ä½¿ç”¨ Code Reviewï¼Œå®ƒä¼šæ¶ˆè€—æ‚¨çš„è¯•ç”¨ç§¯åˆ†</li>
<li><strong>å¦‚æœæ‚¨æ²¡æœ‰ Augment è´¦æˆ·</strong>ï¼šæ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºè´¦æˆ·å¹¶æ¿€æ´»è¯•ç”¨æˆ–è·å¾—ä»˜è´¹è®¡åˆ’æ¥ä½¿ç”¨ Code Review</li>
<li><strong>å¦‚æœæ‚¨ç»´æŠ¤å¼€æºé¡¹ç›®</strong>ï¼šæ³¨å†Œ Augment Codeï¼Œç„¶åä¸ºæ‚¨çš„é¡¹ç›®è¯·æ±‚å…è´¹è®¿é—®</li>
</ul>
<p>å¦‚æœæ‚¨å‡†å¤‡å¥½ï¼š</p>
<ul>
<li>æ›´é«˜ä¿¡å·</li>
<li>æ›´å°‘ bugs</li>
<li>æ›´å¿«çš„ reviews</li>
<li>ä»¥åŠå”¯ä¸€è¢«è¯æ˜è¶…è¶Šé¢†åŸŸçš„ reviewer</li>
</ul>
<p>åªéœ€ 3 æ¬¡ç‚¹å‡»å³å¯ä¸º GitHub Cloud å®‰è£… <strong>Augment Code Review</strong> - é˜…è¯»æ–‡æ¡£äº†è§£æ›´å¤šä¿¡æ¯å¹¶ç«‹å³å¼€å§‹ã€‚</p>
<p>è®©æˆ‘ä»¬ä¿®å¤ code reviewã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘ä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©GPT-5.2ä½œä¸ºAugment Code Reviewçš„æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7582845425401577512</link>    <guid>https://juejin.cn/post/7582845425401577512</guid>    <pubDate>2025-12-12T17:37:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582845425401577512" data-draft-id="7582776967818526720" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘ä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©GPT-5.2ä½œä¸ºAugment Code Reviewçš„æ¨¡å‹"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-12T17:37:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘ä¸ºä»€ä¹ˆæˆ‘ä»¬é€‰æ‹©GPT-5.2ä½œä¸ºAugment Code Reviewçš„æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T17:37:40.000Z" title="Fri Dec 12 2025 17:37:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Fblog%2Fwhy-gpt-5-2-is-our-model-of-choice-for-augment-code-review" target="_blank" title="https://www.augmentcode.com/blog/why-gpt-5-2-is-our-model-of-choice-for-augment-code-review" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p>2025å¹´12æœˆ11æ—¥</p>
<p>Augment Code Reviewåœ¨å”¯ä¸€çš„AIè¾…åŠ©ä»£ç å®¡æŸ¥å…¬å…±åŸºå‡†æµ‹è¯•ä¸­å–å¾—äº†æœ€é«˜çš„å‡†ç¡®åº¦ï¼Œåœ¨æ•´ä½“è´¨é‡ä¸Šæ¯”Cursor Bugbotã€CodeRabbitç­‰å…¶ä»–ç³»ç»Ÿé«˜å‡ºçº¦10ä¸ªç™¾åˆ†ç‚¹ã€‚ä¸€ä¸ªå…³é”®åŸå› æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬é€‰æ‹©GPT-5.2ä½œä¸ºä»£ç å®¡æŸ¥çš„åŸºç¡€æ¨¡å‹â€”â€”ä»¥åŠæˆ‘ä»¬çš„æ¨¡å‹æ— å…³æ–¹æ³•è®©æˆ‘ä»¬èƒ½å¤Ÿä¸ºè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸ªé˜¶æ®µé€‰æ‹©æœ€ä½³å·¥å…·ã€‚Augment Code Reviewæœ€åˆåŸºäºGPT-5æ„å»ºï¼Œä½†éšç€æˆ‘ä»¬è§‚å¯Ÿåˆ°OpenAIæœ€æ–°æ¨ç†æ¨¡å‹çš„è´¨é‡æå‡ï¼Œæˆ‘ä»¬å‡çº§åˆ°äº†5.2ç‰ˆæœ¬ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30a5de195b604413a0eb5fa7ec0823b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165860&amp;x-signature=d39ZzUV%2BLHc7Kc8wNNOM0cPWAKU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0820b004cbb04aa295383e53778f195f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165860&amp;x-signature=OgV9QeFaD%2FV1UfI3LiPXj6NDV64%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä»€ä¹ˆé€ å°±äº†ä¸€ä¸ªå‡ºè‰²çš„ä»£ç å®¡æŸ¥æ¨¡å‹ï¼Ÿ</h2>
<p>ä»£ç å®¡æŸ¥ä¸äº¤äº’å¼ç¼–ç æœ‰ç€æ ¹æœ¬ä¸åŒçš„è¦æ±‚ã€‚æœ‰ä¸‰ä¸ªä¸»è¦å› ç´ ä½¿ä¸€ä¸ªæ¨¡å‹åœ¨ä»£ç å®¡æŸ¥æ–¹é¢è¡¨ç°å‡ºè‰²ï¼š</p>
<p><strong>é¦–å…ˆï¼ŒåŸå§‹æ¨ç†èƒ½åŠ›ã€‚</strong> ç»™å®šä¸€æ®µä»£ç ï¼Œæ¨¡å‹èƒ½å¦æ·±å…¥æ¨ç†å…¶æ­£ç¡®æ€§ï¼Œè¯†åˆ«ç»†å¾®çš„bugï¼Œå¹¶ç†è§£æ¶æ„å½±å“ï¼Ÿ</p>
<p><strong>å…¶æ¬¡ï¼Œåœ¨agent harnessä¸­æœ‰æ•ˆçš„å·¥å…·ä½¿ç”¨ã€‚</strong> æœ€ä½³çš„ä»£ç å®¡æŸ¥éœ€è¦å…¨é¢çš„ä¸Šä¸‹æ–‡ï¼šä¾èµ–é“¾ã€è°ƒç”¨ç«™ç‚¹ã€ç±»å‹å®šä¹‰ã€æµ‹è¯•æ–‡ä»¶å’Œå†å²å˜æ›´ã€‚ä¸€ä¸ªå‡ºè‰²çš„å®¡æŸ¥æ¨¡å‹éœ€è¦åšå‡ºæ­£ç¡®çš„å·¥å…·è°ƒç”¨æ¥æ”¶é›†æ‰€æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè€Œä¸ä»…ä»…æ˜¯å­¤ç«‹åœ°æ£€æŸ¥å·®å¼‚ã€‚</p>
<p><strong>ç¬¬ä¸‰ï¼Œå¼ºå¤§çš„æŒ‡ä»¤éµå¾ªèƒ½åŠ›ä»¥å¹³è¡¡precisionå’Œrecallã€‚</strong> æˆ‘ä»¬ä»”ç»†è°ƒä¼˜äº†promptsä¸­çš„æ¯ä¸€å¥è¯ï¼Œä»¥æ•è·æ­£ç¡®çš„é—®é¢˜é›†ï¼Œå¹¶åœ¨precisionå’Œrecallä¹‹é—´åšå‡ºæ­£ç¡®çš„æƒè¡¡ã€‚æ¨¡å‹éœ€è¦å¿ å®åœ°éµå¾ªè¿™äº›ç»†è‡´çš„æŒ‡ä»¤ï¼Œæ•è·çœŸæ­£çš„bugï¼ŒåŒæ—¶é¿å…ä½ä¿¡å™ªæ¯”çš„å¹²æ‰°ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆGPT-5.2åœ¨ä»£ç å®¡æŸ¥æ–¹é¢è¡¨ç°å‡ºè‰²</h2>
<p>GPT-5.2åœ¨æ‰€æœ‰ä¸‰ä¸ªè¦æ±‚ä¸Šéƒ½è¡¨ç°å‡ºè‰²ã€‚å®ƒåœ¨è¿›è¡Œå½»åº•çš„å·¥å…·è°ƒç”¨æ¥æ‹‰å–å…¨é¢ä¸Šä¸‹æ–‡æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚å®ƒæ¯”é’ˆå¯¹äº¤äº’é€Ÿåº¦ä¼˜åŒ–çš„æ¨¡å‹èŠ±è´¹æ›´å¤šæ—¶é—´å¹¶è¿›è¡Œæ›´å¤šæ¨ç†ï¼Œä½†è¿™æ­£æ˜¯æˆ‘ä»¬åœ¨å¼‚æ­¥ä»£ç å®¡æŸ¥ä¸­æƒ³è¦çš„â€”â€”åœ¨é‚£é‡Œæ­£ç¡®æ€§æ¯”å»¶è¿Ÿæ›´é‡è¦ã€‚</p>
<p>è¿™ç§æ·±æ€ç†Ÿè™‘ã€æ¨ç†å……åˆ†çš„æ–¹æ³•ä¸Augmentçš„Context Engineå®Œç¾é…åˆã€‚GPT-5.2æŒç»­æ£€ç´¢è¯„ä¼°å¤§å‹ã€é•¿æœŸä»£ç åº“ä¸­æ­£ç¡®æ€§æ‰€éœ€çš„æ­£ç¡®ä¾èµ–é¡¹ã€è°ƒç”¨ç«™ç‚¹å’Œè·¨æ–‡ä»¶å…³ç³»ã€‚å®ƒèƒ½æ•è·éœ€è¦æ·±åº¦æ¨ç†çš„é‚£ç±»è·¨ç³»ç»Ÿé—®é¢˜å’Œæ¶æ„é—®é¢˜ï¼šé‚£äº›çœŸæ­£å¯¼è‡´äº‹æ•…çš„bugã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆåœ¨ä»£ç å®¡æŸ¥ä¸­é€‰æ‹©GPT-5.2è€Œä¸æ˜¯Sonnet</h2>
<p>æˆ‘ä»¬å¹¿æ³›è¯„ä¼°äº†GPTå’ŒAnthropicçš„Sonnetæ¨¡å‹ç³»åˆ—ç”¨äºä»£ç å®¡æŸ¥ã€‚è™½ç„¶Sonnetæ¨¡å‹åœ¨äº¤äº’å¼ç”¨ä¾‹æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œä»¥æ›´ä½çš„å»¶è¿Ÿæä¾›å¿«é€Ÿã€é«˜è´¨é‡çš„å“åº”ï¼Œä½†GPT-5.2åœ¨æˆ‘ä»¬çš„å¼‚æ­¥ä»£ç å®¡æŸ¥å·¥ä½œè´Ÿè½½ä¸­è¢«è¯æ˜æ›´ä¼˜ç§€ã€‚</p>
<p>å…³é”®å·®å¼‚å½’ç»“ä¸ºä¼˜åŒ–ç›®æ ‡ã€‚Sonnetæ¨¡å‹é’ˆå¯¹äº¤äº’å¼åœºæ™¯è¿›è¡Œäº†ä¼˜åŒ–ï¼šå¿«é€Ÿè¿­ä»£ã€å¯¹è¯æµç¨‹å’Œå¿«é€Ÿåé¦ˆå¾ªç¯ã€‚å½“å¼€å‘è€…åœ¨ç­‰å¾…å“åº”æ—¶ï¼Œå®ƒä»¬è¡¨ç°å‡ºè‰²ã€‚ä½†ä»£ç å®¡æŸ¥æ ¹æœ¬ä¸åŒã€‚å®ƒæ˜¯å¼‚æ­¥çš„ï¼Œä¸éœ€è¦ç«‹å³å“åº”ï¼Œå¹¶å—ç›Šäºæ›´æ·±ã€æ›´è¯¦å°½çš„æ¨ç†ã€‚</p>
<p>GPT-5.2èŠ±è´¹æ›´å¤šæ—¶é—´å¹¶åšå‡ºæ›´å¤šå·¥å…·è°ƒç”¨ï¼Œä½†äº§ç”Ÿæ›´å……åˆ†æ¨ç†çš„åˆ†æã€‚å¯¹äºä»£ç å®¡æŸ¥æ¥è¯´ï¼Œè¿™ç§æƒè¡¡æ˜¯å®Œå…¨æ­£ç¡®çš„ã€‚æˆ‘ä»¬å®æ„¿ç­‰å¾…é¢å¤–çš„30ç§’æ¥æ•è·ä¸€ä¸ªå¾®å¦™çš„å¹¶å‘bugï¼Œä¹Ÿä¸æ„¿å¾—åˆ°ä¸€ä¸ªå¿«é€Ÿä½†è‚¤æµ…çš„å®¡æŸ¥ï¼Œé”™è¿‡è·¨ç³»ç»Ÿé—®é¢˜ã€‚</p>
<p>è¿™ä¸æ˜¯å¯¹æ¨¡å‹è´¨é‡çš„åˆ¤æ–­ã€‚ä¸¤ä¸ªç³»åˆ—åœ¨å®ƒä»¬ä¼˜åŒ–çš„é¢†åŸŸéƒ½è¡¨ç°å“è¶Šã€‚è¿™æ˜¯å…³äºå°†æ­£ç¡®çš„æ¨¡å‹åŒ¹é…åˆ°æ­£ç¡®çš„ç”¨ä¾‹ã€‚åœ¨æˆ‘ä»¬IDEä¸­çš„äº¤äº’å¼ç¼–ç ä¸­ï¼ŒSonnetçš„é€Ÿåº¦ä¼˜åŠ¿å¾ˆé‡è¦ã€‚å¯¹äºä»£ç å®¡æŸ¥ï¼ŒGPT-5.2çš„æ·±æ€ç†Ÿè™‘çš„æ¨ç†è·èƒœã€‚</p>
<h2 data-id="heading-3">Augmentçš„ä¼˜åŠ¿ï¼šè®¾è®¡ä¸Šæ¨¡å‹æ— å…³</h2>
<p>Augmentçš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€æ˜¯æˆ‘ä»¬æ˜¯æ¨¡å‹æ— å…³çš„ã€‚</p>
<p>éšç€æ¨¡å‹çš„ä¸æ–­å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæ¯ä¸ªç‰¹å®šå·¥ä½œé‡‡ç”¨æœ€ä½³å·¥å…·ã€‚è¿™ç§åŠ¡å®çš„ã€ç”¨ä¾‹é©±åŠ¨çš„æ–¹æ³•æ˜¯æˆ‘ä»¬å¦‚ä½•ä¿æŒåŸºå‡†é¢†å…ˆçš„æ€§èƒ½ï¼ŒåŒæ—¶ä¸ºå¼€å‘äººå‘˜åœ¨å¼€å‘çš„æ¯ä¸ªé˜¶æ®µæä¾›æœ€ä½³ä½“éªŒã€‚</p>
<p>é‰´äºGPT-5.2åœ¨ä»£ç å®¡æŸ¥ä¸­çš„å¼ºåŠ²è¡¨ç°ï¼Œæˆ‘ä»¬çš„å›¢é˜Ÿç›®å‰æ­£åœ¨è¯„ä¼°æ˜¯å¦åœ¨æ¨¡å‹é€‰æ‹©å™¨ä¸­ä¸ºé€šç”¨ä»£ç ç”Ÿæˆç”¨ä¾‹æä¾›å®ƒã€‚è¯¥æ¨¡å‹è¯¦å°½çš„æ¨ç†æ–¹æ³•éœ€è¦é’ˆå¯¹äº¤äº’å¼å·¥ä½œæµç¨‹è¿›è¡Œä¸€äº›é¢å¤–çš„è°ƒä¼˜ï¼Œä½†æˆ‘ä»¬æ­£åœ¨æ¢ç´¢å¦‚ä½•å°†å…¶èƒ½åŠ›å¸¦åˆ°å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æ›´å¤šéƒ¨åˆ†ã€‚</p>
<p>å‡†å¤‡çœ‹åˆ°GPT-5.2é©±åŠ¨çš„ä»£ç å®¡æŸ¥å®é™…è¿è¡Œäº†å—ï¼Ÿ
Augment Code Reviewç°å·²ä¸ºæ‰€æœ‰Augment Codeç”¨æˆ·å¯ç”¨ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Faugmentcode.com%2Fproduct%2Fcode-review" target="_blank" title="https://augmentcode.com/product/code-review" ref="nofollow noopener noreferrer">äº†è§£æ›´å¤š â†’</a>æˆ–<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Fblog%2Fwe-benchmarked-7-ai-code-review-tools-on-real-world-prs-here-are-the-results" target="_blank" title="https://www.augmentcode.com/blog/we-benchmarked-7-ai-code-review-tools-on-real-world-prs-here-are-the-results" ref="nofollow noopener noreferrer">é˜…è¯»å®Œæ•´çš„åŸºå‡†æµ‹è¯•åˆ†æ â†’</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f710c1803f742edb6f49dc4dc38f077~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165860&amp;x-signature=4uMN5lUddHUI8FcCjN68n8TIUR0%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">Akshay Utture</h4>
<p>Akshay Uttureæ„å»ºæ™ºèƒ½agentsï¼Œä½¿è½¯ä»¶å¼€å‘æ›´å¿«ã€æ›´å®‰å…¨ã€æ›´å¯é ã€‚åœ¨Augment Codeï¼Œä»–é¢†å¯¼å…¬å¸AI Code Review agentèƒŒåçš„å·¥ç¨‹å·¥ä½œï¼Œå°†ç ”ç©¶çº§ç¨‹åºåˆ†æå’Œç°ä»£GenAIæŠ€æœ¯ç»“åˆèµ·æ¥ï¼Œè‡ªåŠ¨åŒ–SDLCä¸­æœ€è€—æ—¶çš„éƒ¨åˆ†ä¹‹ä¸€ã€‚åœ¨åŠ å…¥Augmentä¹‹å‰ï¼ŒAkshayåœ¨UberèŠ±è´¹äº†å‡ å¹´æ—¶é—´æ¨è¿›è‡ªåŠ¨ä»£ç å®¡æŸ¥å’Œä¿®å¤ç³»ç»Ÿï¼Œå¹¶åœ¨AWSçš„Automated Reasoning Groupã€Googleçš„Android Static Analysiså›¢é˜Ÿå’ŒUCLAè¿›è¡Œç ”ç©¶ã€‚ä»–çš„å·¥ä½œå¤„äºAIã€è½¯ä»¶å·¥ç¨‹å’Œç¼–ç¨‹è¯­è¨€ç†è®ºçš„äº¤å‰ç‚¹ã€‚</p>
<h2 data-id="heading-5">æå‡ä½ çš„ç¼–ç èƒ½åŠ›</h2>
<p>ä¿®å¤bugã€ç¼–å†™æµ‹è¯•ã€æ›´å¿«äº¤ä»˜</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Finstall" target="_blank" title="https://www.augmentcode.com/install" ref="nofollow noopener noreferrer">å¼€å§‹ä½ çš„å…è´¹è¯•ç”¨</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è½¬è½½ã€‘æˆ‘ä»¬åœ¨å¤§å‹å¼€æºé¡¹ç›®ä¸Šå¯¹ 7 ä¸ª AI ä»£ç å®¡æŸ¥å·¥å…·è¿›è¡Œäº†åŸºå‡†æµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ç»“æœã€‚]]></title>    <link>https://juejin.cn/post/7582779306731634723</link>    <guid>https://juejin.cn/post/7582779306731634723</guid>    <pubDate>2025-12-12T17:39:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582779306731634723" data-draft-id="7582776967818543104" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è½¬è½½ã€‘æˆ‘ä»¬åœ¨å¤§å‹å¼€æºé¡¹ç›®ä¸Šå¯¹ 7 ä¸ª AI ä»£ç å®¡æŸ¥å·¥å…·è¿›è¡Œäº†åŸºå‡†æµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ç»“æœã€‚"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-12T17:39:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è½¬è½½ã€‘æˆ‘ä»¬åœ¨å¤§å‹å¼€æºé¡¹ç›®ä¸Šå¯¹ 7 ä¸ª AI ä»£ç å®¡æŸ¥å·¥å…·è¿›è¡Œäº†åŸºå‡†æµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ç»“æœã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T17:39:00.000Z" title="Fri Dec 12 2025 17:39:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Fblog%2Fwe-benchmarked-7-ai-code-review-tools-on-real-world-prs-here-are-the-results" target="_blank" title="https://www.augmentcode.com/blog/we-benchmarked-7-ai-code-review-tools-on-real-world-prs-here-are-the-results" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a7830dd11284ef8ac60ebe9407521b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165939&amp;x-signature=hAKzbtwK9W%2BK2HxgTVUyvOui1IA%3D" alt="" loading="lazy"/></p>
<p><strong>2025å¹´12æœˆ11æ—¥</strong></p>
<h2 data-id="heading-0">TL;DR</h2>
<p>æˆ‘ä»¬åœ¨å”¯ä¸€çš„ AI è¾…åŠ©ä»£ç å®¡æŸ¥å…¬å…±åŸºå‡†æµ‹è¯•ä¸Šè¯„ä¼°äº†ä¸ƒä¸ªæœ€å¹¿æ³›ä½¿ç”¨çš„ AI ä»£ç å®¡æŸ¥å·¥å…·ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.augmentcode.com%2Fcodereview%2Foverview" target="_blank" title="https://docs.augmentcode.com/codereview/overview" ref="nofollow noopener noreferrer">Augment Code Review</a>ï¼Œç”± GPT-5.2 é©±åŠ¨ï¼Œä»¥æ˜¾è‘—ä¼˜åŠ¿äº¤ä»˜äº†æœ€å¼ºçš„æ€§èƒ½ã€‚å®ƒçš„å®¡æŸ¥æ—¢å…·æœ‰æ›´é«˜çš„ç²¾ç¡®åº¦ï¼Œåˆå…·æœ‰å¤§å¹…æ›´é«˜çš„å¬å›ç‡ï¼Œè¿™å¾—ç›Šäºå…¶ç‹¬ç‰¹å¼ºå¤§çš„ Context Engineï¼Œèƒ½å¤ŸæŒç»­æ£€ç´¢æ­£ç¡®çš„æ–‡ä»¶ã€ä¾èµ–é¡¹å’Œè°ƒç”¨ç«™ç‚¹ã€‚è™½ç„¶è®¸å¤šå·¥å…·ç”±äºæœ‰é™çš„ä¸Šä¸‹æ–‡è€Œäº§ç”Ÿå˜ˆæ‚çš„è¯„è®ºæˆ–é—æ¼å…³é”®é—®é¢˜ï¼Œä½† Augment ä½œä¸ºå”¯ä¸€èƒ½å¤Ÿå¯é åœ°åœ¨æ•´ä¸ªä»£ç åº“ä¸­è¿›è¡Œæ¨ç†å¹¶å‘ç°äººç±»å®¡æŸ¥è€…çœŸæ­£å…³å¿ƒçš„é—®é¢˜çš„ç³»ç»Ÿè€Œè„±é¢–è€Œå‡ºã€‚ç®€è€Œè¨€ä¹‹ï¼šå¦‚æœä½ æƒ³è¦æ„Ÿè§‰åƒé«˜çº§å·¥ç¨‹å¸ˆè€Œä¸æ˜¯ lint æœºå™¨äººçš„ AI å®¡æŸ¥ï¼ŒAugment Code Review æ˜¯æ˜æ˜¾çš„é¢†å¯¼è€…ï¼Œå¹¶ä¸”<a href="https://link.juejin.cn?target=https%3A%2F%2Faugmentcode.com%2Fblog%2Fintroducing-augment-code-review" target="_blank" title="https://augmentcode.com/blog/introducing-augment-code-review" ref="nofollow noopener noreferrer">ä»Šå¤©å¯¹æ‰€æœ‰ Augment Code å®¢æˆ·æ™®éå¯ç”¨</a>ã€‚</p>
<h2 data-id="heading-1">çœŸæ­£çš„æµ‹è¯•ï¼šæ•è·é”™è¯¯è€Œä¸åˆ¶é€ å™ªéŸ³</h2>
<p>AI ä»£ç å®¡æŸ¥å·¥å…·è¢«è¥é”€ä¸ºå¿«é€Ÿã€å‡†ç¡®å’Œä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„ã€‚ä½†å¼€å‘äººå‘˜çŸ¥é“çœŸæ­£çš„æµ‹è¯•æ˜¯è¿™äº›ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿåœ¨ PR ä¸­æ•è·æœ‰æ„ä¹‰çš„é—®é¢˜è€Œä¸ä¼šè¢«å™ªéŸ³æ·¹æ²¡ã€‚ä¸ºäº†äº†è§£è¿™äº›å·¥å…·åœ¨å®è·µä¸­å¦‚ä½•è¡¨ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨å”¯ä¸€çš„ AI ä»£ç å®¡æŸ¥å…¬å…±æ•°æ®é›†è¯„ä¼°äº†ä¸ƒä¸ªé¢†å…ˆçš„ AI å®¡æŸ¥ç³»ç»Ÿã€‚ç»“æœæ¸…æ¥šåœ°è¡¨æ˜ï¼Œè™½ç„¶è®¸å¤šå·¥å…·åœ¨å˜ˆæ‚æˆ–ä¸å®Œæ•´çš„åˆ†ææ–¹é¢æŒ£æ‰ï¼Œä½†ä¸€ä¸ªå·¥å…·â€”â€”Augment Code Reviewâ€”â€”æ˜æ˜¾ä¼˜äºå…¶ä»–å·¥å…·ã€‚</p>
<h2 data-id="heading-2">ä»£ç å®¡æŸ¥è´¨é‡å¦‚ä½•è¡¡é‡</h2>
<p>å¦‚æœå®¡æŸ¥è¯„è®ºä¸<strong>é»„é‡‘è¯„è®º</strong>åŒ¹é…ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯<strong>æ­£ç¡®çš„</strong>ï¼šå³ä¸€ä¸ªåˆæ ¼çš„äººç±»å®¡æŸ¥è€…é¢„æœŸä¼šæ•è·çš„åŸºç¡€äº‹å®é—®é¢˜ã€‚é»„é‡‘è¯„è®ºåæ˜ çš„æ˜¯çœŸå®æ­£ç¡®æ€§æˆ–æ¶æ„é—®é¢˜ï¼Œè€Œä¸æ˜¯é£æ ¼ä¸Šçš„å¹æ¯›æ±‚ç–µã€‚</p>
<p>æ¯ä¸ªå·¥å…·çš„è¯„è®ºè¢«æ ‡è®°ä¸ºï¼š</p>
<ul>
<li><strong>çœŸé˜³æ€§ï¼š</strong> åŒ¹é…é»„é‡‘è¯„è®º</li>
<li><strong>å‡é˜³æ€§ï¼š</strong> ä¸æ­£ç¡®æˆ–æ— å…³çš„è¯„è®º</li>
<li><strong>å‡é˜´æ€§ï¼š</strong> å·¥å…·é—æ¼çš„é»„é‡‘è¯„è®º</li>
</ul>
<p>ä»è¿™äº›åˆ†ç±»ä¸­æˆ‘ä»¬è®¡ç®—ï¼š</p>
<ul>
<li><strong>ç²¾ç¡®åº¦ï¼š</strong> å·¥å…·çš„å¯ä¿¡åº¦</li>
<li><strong>å¬å›ç‡ï¼š</strong> å·¥å…·çš„å…¨é¢æ€§</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FF-score" target="_blank" title="https://en.wikipedia.org/wiki/F-score" ref="nofollow noopener noreferrer">F-score</a>ï¼š</strong> æ•´ä½“è´¨é‡</li>
</ul>
<p>é«˜ç²¾ç¡®åº¦ä¿æŒå¼€å‘äººå‘˜çš„å‚ä¸åº¦ï¼›é«˜å¬å›ç‡æ˜¯ä½¿å·¥å…·çœŸæ­£æœ‰ç”¨çš„åŸå› ã€‚åªæœ‰å…·æœ‰å¼ºå¤§ä¸Šä¸‹æ–‡æ£€ç´¢èƒ½åŠ›çš„ç³»ç»Ÿæ‰èƒ½åŒæ—¶å®ç°ä¸¤è€…ã€‚</p>
<h2 data-id="heading-3">åŸºå‡†æµ‹è¯•ç»“æœ</h2>
<p>ä»¥ä¸‹æ˜¯ç»“æœï¼ŒæŒ‰ F-score æ’åºâ€”â€”æ•´ä½“å®¡æŸ¥è´¨é‡çš„æœ€ä½³å•ä¸€è¡¡é‡æ ‡å‡†ï¼š</p>





















































<table><thead><tr><th>å·¥å…·</th><th>ç²¾ç¡®åº¦</th><th>å¬å›ç‡</th><th>F-score</th></tr></thead><tbody><tr><td>Augment Code Review</td><td>65%</td><td>55%</td><td>59%</td></tr><tr><td>Cursor Bugbot</td><td>60%</td><td>41%</td><td>49%</td></tr><tr><td>Greptile</td><td>45%</td><td>45%</td><td>45%</td></tr><tr><td>Codex Code Review</td><td>68%</td><td>29%</td><td>41%</td></tr><tr><td>CodeRabbit</td><td>36%</td><td>43%</td><td>39%</td></tr><tr><td>Claude Code</td><td>23%</td><td>51%</td><td>31%</td></tr><tr><td>GitHub Copilot</td><td>20%</td><td>34%</td><td>25%</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47878a546329411cb2aff484a45e72f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165939&amp;x-signature=kicCkiMy4HrHdQcIEESjyfnZZWE%3D" alt="" loading="lazy"/></p>
<p>**Augment Code Review ä»¥æœ‰æ„ä¹‰çš„ä¼˜åŠ¿äº¤ä»˜æœ€é«˜çš„ F-scoreï¼Œ**é‡è¦çš„æ˜¯ï¼Œå®ƒæ˜¯æå°‘æ•°èƒ½å¤ŸåŒæ—¶å®ç°é«˜ç²¾ç¡®åº¦å’Œé«˜å¬å›ç‡çš„å·¥å…·ä¹‹ä¸€ã€‚å®ç°è¿™ç§å¹³è¡¡æå…¶å›°éš¾ï¼šæ¨åŠ¨æ›´é«˜å¬å›ç‡çš„å·¥å…·å¾€å¾€ä¼šå˜å¾—å˜ˆæ‚ï¼Œè€Œä¸ºç²¾ç¡®åº¦è°ƒæ•´çš„å·¥å…·é€šå¸¸ä¼šé—æ¼å¤§é‡çœŸå®é—®é¢˜ã€‚ä¾‹å¦‚ï¼ŒClaude Code ç°åœ¨è¾¾åˆ°äº†å¤§çº¦ 51% çš„å¬å›ç‡â€”â€”æ¥è¿‘ Augment çš„å¬å›ç‡â€”â€”ä½†å…¶ç²¾ç¡®åº¦è¦ä½å¾—å¤šï¼Œå¯¼è‡´å¤§é‡ä¸æ­£ç¡®æˆ–ä½ä»·å€¼çš„è¯„è®ºã€‚è¿™ç§ä¿¡å™ªæ¯”æƒè¡¡æ˜¯ AI ä»£ç å®¡æŸ¥çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚</p>
<p>**å¼€å‘äººå‘˜ä¸ä¼šé‡‡ç”¨ç”¨å™ªéŸ³æ·¹æ²¡ PR çš„å·¥å…·ã€‚**é€šè¿‡åœ¨å®ç°è¯„ä¼°ä¸­æœ€é«˜å¬å›ç‡çš„åŒæ—¶ä¿æŒå¼ºç²¾ç¡®åº¦ï¼ŒAugment åœ¨å®è·µä¸­æä¾›äº†å®è´¨ä¸Šæ›´é«˜çš„ä¿¡å·å’Œæ›´å¯ç”¨çš„å®¡æŸ¥ä½“éªŒã€‚</p>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆå¬å›ç‡æ˜¯æœ€éš¾çš„å‰æ²¿ï¼Œä»¥åŠä¸ºä»€ä¹ˆ Augment é¢†å…ˆ</h3>
<p>ç²¾ç¡®åº¦å¯ä»¥é€šè¿‡è¿‡æ»¤å’Œä¿å®ˆçš„å¯å‘å¼æ–¹æ³•æ¥æé«˜ï¼Œä½†å¬å›ç‡éœ€è¦ä¸€äº›æ ¹æœ¬ä¸Šæ›´éš¾çš„ä¸œè¥¿ï¼š<strong>æ­£ç¡®ã€å®Œæ•´å’Œæ™ºèƒ½çš„ä¸Šä¸‹æ–‡æ£€ç´¢ã€‚</strong></p>
<p>å¤§å¤šæ•°å·¥å…·æœªèƒ½æ£€ç´¢åˆ°ï¼š</p>
<ul>
<li>è¯„ä¼°æ­£ç¡®æ€§æ‰€éœ€çš„ä¾èµ–æ¨¡å—</li>
<li>å½±å“å¯ç©ºæ€§æˆ–ä¸å˜é‡çš„ç±»å‹å®šä¹‰</li>
<li>è·¨æ–‡ä»¶çš„è°ƒç”¨è€…/è¢«è°ƒç”¨è€…é“¾</li>
<li>ç›¸å…³çš„æµ‹è¯•æ–‡ä»¶å’Œå›ºä»¶</li>
<li>æ¥è‡ªå…ˆå‰æ›´æ”¹çš„å†å²ä¸Šä¸‹æ–‡</li>
</ul>
<p>è¿™äº›å·®è·å¯¼è‡´é—æ¼é”™è¯¯â€”â€”ä¸æ˜¯å› ä¸ºæ¨¡å‹æ— æ³•å¯¹å®ƒä»¬è¿›è¡Œæ¨ç†ï¼Œè€Œæ˜¯å› ä¸ºæ¨¡å‹ä»æœªçœ‹åˆ°ç›¸å…³çš„ä»£ç ã€‚</p>
<p><strong>Augment Code Review æˆåŠŸæ˜¯å› ä¸ºå®ƒæŒç»­åœ°æµ®ç°æ­£ç¡®çš„ä¸Šä¸‹æ–‡ã€‚</strong></p>
<p>æˆ‘ä»¬çš„æ£€ç´¢å¼•æ“æå–äº†æ¨¡å‹æ¨ç†è·¨æ–‡ä»¶é€»è¾‘ã€API å¥‘çº¦ã€å¹¶å‘è¡Œä¸ºå’Œå¾®å¦™ä¸å˜é‡æ‰€éœ€çš„æ–‡ä»¶å’Œå…³ç³»çš„ç¡®åˆ‡é›†åˆã€‚è¿™ç›´æ¥è½¬åŒ–ä¸ºæ›´é«˜çš„å¬å›ç‡ï¼Œè€Œæ— éœ€ç‰ºç‰²ç²¾ç¡®åº¦ã€‚</p>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆä¸€äº›å·¥å…·è¡¨ç°æ›´å¥½ï¼ˆä»¥åŠä¸ºä»€ä¹ˆ Augment è¡¨ç°æœ€ä½³ï¼‰</h3>
<p>åœ¨æ‰€æœ‰ä¸ƒä¸ªå·¥å…·ä¸­ï¼Œä¸‰ä¸ªå› ç´ å†³å®šäº†æ€§èƒ½â€”â€”è€Œ Augment åœ¨æ¯ä¸ªæ–¹é¢éƒ½è¡¨ç°å‡ºè‰²ã€‚</p>
<h4 data-id="heading-6">1. å“è¶Šçš„ Context Engine</h4>
<p>è¿™æ˜¯å·®å¼‚åŒ–å› ç´ ã€‚Augment æŒç»­æ£€ç´¢äº†æ­£ç¡®çš„ä¾èµ–é“¾ã€è°ƒç”¨ç«™ç‚¹ã€ç±»å‹å®šä¹‰ã€æµ‹è¯•å’Œç›¸å…³æ¨¡å—â€”â€”æ·±åº¦æ¨ç†æ‰€éœ€çš„åŸå§‹ææ–™ã€‚æ²¡æœ‰å…¶ä»–ç³»ç»Ÿåœ¨ä¸Šä¸‹æ–‡ç»„è£…æ–¹é¢å±•ç¤ºå‡ºå¯æ¯”è¾ƒçš„å‡†ç¡®æ€§æˆ–å®Œæ•´æ€§ã€‚</p>
<h4 data-id="heading-7">2. æ¨¡å‹ã€æç¤ºå’Œå·¥å…·çš„æœ€ä½³ç»„åˆ</h4>
<p>ä»å¼ºå¤§çš„åº•å±‚ä»£ç†å¼€å§‹æ˜¯è‰¯å¥½ä»£ç å®¡æŸ¥çš„å…³é”®è¦æ±‚ã€‚è®¾è®¡è‰¯å¥½çš„ä»£ç†å¾ªç¯ã€ä¸Šä¸‹æ–‡å·¥ç¨‹ã€ä¸“é—¨çš„ä»£ç†å·¥å…·å’Œè¯„ä¼°åœ¨æ„å»ºçŸ¥é“å¦‚ä½•å¯¼èˆªä½ çš„ä»£ç åº“ã€ç½‘ç»œç­‰å¹¶æ”¶é›†å…¨é¢å®¡æŸ¥æ‰€éœ€ä¿¡æ¯çš„ä»£ç†æ–¹é¢å¤§æœ‰å¸®åŠ©ã€‚</p>
<h4 data-id="heading-8">3. ä¸“ç”¨ä»£ç å®¡æŸ¥è°ƒä¼˜</h4>
<p>Augment åº”ç”¨ç‰¹å®šé¢†åŸŸçš„é€»è¾‘æ¥æŠ‘åˆ¶ lint çº§åˆ«çš„æ··ä¹±å¹¶ä¸“æ³¨äºæ­£ç¡®æ€§é—®é¢˜ã€‚è¿™åœ¨é¿å…å…¶ä»–å·¥å…·ä¸­å¸¸è§çš„åƒåœ¾è¡Œä¸ºçš„åŒæ—¶ä¿æŒäº†é«˜ä¿¡å·ã€‚</p>
<p>è€Œä¸”ï¼ŒAugment Code Review éšç€æ—¶é—´æ¨ç§»è€Œè°ƒä¼˜ã€‚æˆ‘ä»¬èƒ½å¤Ÿè®¡ç®— Augment å‘å¸ƒçš„æ¯æ¡è¯„è®ºæ˜¯å¦ç”±äººç±»å¼€å‘äººå‘˜å¤„ç†ã€‚è¿™äº›æ•°æ®å¸®åŠ©æˆ‘ä»¬ä¸“é—¨åŒ–å’Œè°ƒä¼˜æˆ‘ä»¬çš„ä»£ç†å·¥å…·ã€æç¤ºå’Œä¸Šä¸‹æ–‡ï¼Œä»¥æŒç»­æ”¹è¿›æˆ‘ä»¬çš„ä»£ç å®¡æŸ¥æœåŠ¡ã€‚</p>
<p>ç»¼åˆèµ·æ¥ï¼Œè¿™äº›å› ç´ äº§ç”Ÿäº†æœ€é«˜çš„ç²¾ç¡®åº¦ã€æœ€é«˜çš„å¬å›ç‡å’Œæœ€å¼ºçš„æ•´ä½“ F-scoreã€‚</p>
<h3 data-id="heading-9">åŸºå‡†æµ‹è¯•æ•°æ®é›†</h3>
<p>åŸºå‡†æµ‹è¯•è·¨è¶Šäº”ä¸ªæ•°ç™¾ä¸‡è¡Œçš„å¼€æºä»£ç åº“çš„ 50 ä¸ª pull requestï¼ŒåŒ…æ‹¬ Sentryã€Grafanaã€Cal.comã€Discourse å’Œ Keycloakã€‚è¿™äº›å­˜å‚¨åº“ä»£è¡¨äº†çœŸå®ä¸–ç•Œçš„å·¥ç¨‹å¤æ‚æ€§ï¼šå¤šæ¨¡å—æ¶æ„ã€è·¨æ–‡ä»¶ä¸å˜é‡ã€æ·±åº¦ä¾èµ–æ ‘å’Œéå¹³å‡¡çš„æµ‹è¯•å¥—ä»¶ã€‚åœ¨è¿™ç§ä»£ç ä¸Šè¯„ä¼° AI å®¡æŸ¥è€…æ˜¯ç¡®å®šå®ƒä»¬è¡Œä¸ºåƒé«˜çº§å·¥ç¨‹å¸ˆè¿˜æ˜¯æµ…å±‚ linter çš„å”¯ä¸€æ–¹æ³•ã€‚</p>
<h3 data-id="heading-10">æˆ‘ä»¬å¦‚ä½•æ”¹è¿›æ•°æ®é›†</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fai-code-review-evaluation" target="_blank" title="https://github.com/ai-code-review-evaluation" ref="nofollow noopener noreferrer">åŸå§‹å…¬å…±æ•°æ®é›†</a>æ˜¯æ— ä»·çš„ï¼Œä½†ä¸å®Œæ•´ã€‚è®¸å¤š PR åŒ…å«å¤šä¸ªæœ‰æ„ä¹‰çš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜åœ¨é»„é‡‘é›†ä¸­ç¼ºå¤±ï¼Œä½¿å¾—æ— æ³•å‡†ç¡®æµ‹é‡å¬å›ç‡å’Œç²¾ç¡®åº¦ã€‚æˆ‘ä»¬é€šè¿‡æ‰‹åŠ¨å®¡æŸ¥æ¯ä¸ª PRã€éªŒè¯é—®é¢˜å¹¶æ ¹æ®å·¥å…·è¾“å‡ºéªŒè¯å®ƒä»¬æ¥æ‰©å±•å’Œçº æ­£é»„é‡‘è¯„è®ºã€‚æˆ‘ä»¬è¿˜è°ƒæ•´äº†ä¸¥é‡æ€§ï¼Œä»¥ä¾¿çç¢çš„å»ºè®®ä¸ä¼šå¤¸å¤§åˆ†æ•°æˆ–ä¸å…¬å¹³åœ°æƒ©ç½šå·¥å…·ã€‚</p>
<p>æ‰€æœ‰çº æ­£çš„æ•°æ®å’Œè„šæœ¬éƒ½åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fai-code-review-evaluations" target="_blank" title="https://github.com/ai-code-review-evaluations" ref="nofollow noopener noreferrer">GitHub ä¸Šå¼€æº</a>ã€‚</p>
<h3 data-id="heading-11">ç»“è®º</h3>
<p>AI ä»£ç å®¡æŸ¥å‘å±•è¿…é€Ÿï¼Œä½†å·¥å…·ä¹‹é—´çš„å·®è·æ¯”è¥é”€é¡µé¢æ‰€æš—ç¤ºçš„è¦å¤§ã€‚å¤§å¤šæ•°ç³»ç»Ÿéš¾ä»¥æ£€ç´¢æ•è·æœ‰æ„ä¹‰é—®é¢˜æ‰€éœ€çš„ä¸Šä¸‹æ–‡ï¼Œå¯¼è‡´ä½å¬å›ç‡å’Œæ„Ÿè§‰æµ…è–„æˆ–å˜ˆæ‚çš„å®¡æŸ¥ã€‚AI ä»£ç å®¡æŸ¥ä¸­å®šä¹‰æ€§æŒ‘æˆ˜ä¸æ˜¯ç”Ÿæˆâ€”â€”è€Œæ˜¯ä¸Šä¸‹æ–‡ï¼šç»„è£…æ­£ç¡®çš„æ–‡ä»¶ã€ä¾èµ–é¡¹å’Œä¸å˜é‡ï¼Œä»¥ä¾¿æ¨¡å‹èƒ½å¤Ÿåƒç»éªŒä¸°å¯Œçš„å·¥ç¨‹å¸ˆä¸€æ ·æ¨ç†ã€‚</p>
<p>**Augment Code Review æ˜¯æ­¤è¯„ä¼°ä¸­å”¯ä¸€æŒç»­è¾¾åˆ°è¯¥æ ‡å‡†çš„å·¥å…·ã€‚**æˆ‘ä»¬çš„ Context Engine å®ç°äº†è¿œé«˜äºé¢†åŸŸå…¶ä½™éƒ¨åˆ†çš„å¬å›ç‡ï¼Œå…¶ç²¾ç¡®åº¦ä¿æŒäº†é«˜ä¿¡å·ã€‚Augment äº§ç”Ÿçš„è¯„è®ºæ„Ÿè§‰æ˜¯å®è´¨æ€§çš„ã€æ¶æ„æ€§çš„å’ŒçœŸæ­£æœ‰ç”¨çš„â€”â€”æ›´æ¥è¿‘é«˜çº§é˜Ÿå‹è€Œä¸æ˜¯è‡ªåŠ¨åŒ–åŠ©æ‰‹ã€‚éšç€ä»£ç åº“çš„å¢é•¿å’Œå›¢é˜Ÿè¦æ±‚æ›´æ·±å…¥çš„è‡ªåŠ¨åŒ–ï¼ŒæŒæ¡ä¸Šä¸‹æ–‡çš„å·¥å…·å°†å®šä¹‰è½¯ä»¶å¼€å‘çš„ä¸‹ä¸€ä¸ªæ—¶ä»£ã€‚æŒ‰ç…§è¿™ä¸ªè¡¡é‡æ ‡å‡†ï¼ŒAugment Code å·²ç»é¥é¥é¢†å…ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e27cdacbeaca4e88a69dbad6a035d26f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766165939&amp;x-signature=bnvWcZwIBquqHXoGZtoQGS2LGCk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-12">Akshay Utture</h4>
<p>Akshay Utture æ„å»ºä½¿è½¯ä»¶å¼€å‘æ›´å¿«ã€æ›´å®‰å…¨ã€æ›´å¯é çš„æ™ºèƒ½ä»£ç†ã€‚åœ¨ Augment Codeï¼Œä»–é¢†å¯¼å…¬å¸ AI Code Review ä»£ç†çš„å·¥ç¨‹å·¥ä½œï¼Œå°†ç ”ç©¶çº§ç¨‹åºåˆ†æå’Œç°ä»£ GenAI æŠ€æœ¯ç»“åˆèµ·æ¥ï¼Œè‡ªåŠ¨åŒ– SDLC ä¸­æœ€è€—æ—¶çš„éƒ¨åˆ†ä¹‹ä¸€ã€‚åœ¨åŠ å…¥ Augment ä¹‹å‰ï¼ŒAkshay åœ¨ Uber èŠ±äº†å‡ å¹´æ—¶é—´æ¨è¿›è‡ªåŠ¨åŒ–ä»£ç å®¡æŸ¥å’Œä¿®å¤ç³»ç»Ÿï¼Œå¹¶åœ¨ AWS çš„ Automated Reasoning Groupã€Google çš„ Android Static Analysis team å’Œ UCLA è¿›è¡Œç ”ç©¶ã€‚ä»–çš„å·¥ä½œä½äº AIã€è½¯ä»¶å·¥ç¨‹å’Œç¼–ç¨‹è¯­è¨€ç†è®ºçš„äº¤å‰ç‚¹ã€‚</p>
<h3 data-id="heading-13">æå‡ä½ çš„ç¼–ç èƒ½åŠ›</h3>
<p>ä¿®å¤é”™è¯¯ã€ç¼–å†™æµ‹è¯•ã€æ›´å¿«å‘å¸ƒ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.augmentcode.com%2Finstall" target="_blank" title="https://www.augmentcode.com/install" ref="nofollow noopener noreferrer">å¼€å§‹å…è´¹è¯•ç”¨</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gopher å¸¦ä½ å­¦ Agent è®¾è®¡æ¨¡å¼ï¼šä¸€å¥—ä¸çƒ§è„‘çš„æ™ºèƒ½ç³»ç»Ÿæ„å»ºæŒ‡å—]]></title>    <link>https://juejin.cn/post/7582779306731470883</link>    <guid>https://juejin.cn/post/7582779306731470883</guid>    <pubDate>2025-12-12T15:05:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582779306731470883" data-draft-id="7582776967818067968" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gopher å¸¦ä½ å­¦ Agent è®¾è®¡æ¨¡å¼ï¼šä¸€å¥—ä¸çƒ§è„‘çš„æ™ºèƒ½ç³»ç»Ÿæ„å»ºæŒ‡å—"/> <meta itemprop="keywords" content="AIGC,Agent"/> <meta itemprop="datePublished" content="2025-12-12T15:05:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²¡å¤šå°‘é€»è¾‘"/> <meta itemprop="url" content="https://juejin.cn/user/2717648475395325"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gopher å¸¦ä½ å­¦ Agent è®¾è®¡æ¨¡å¼ï¼šä¸€å¥—ä¸çƒ§è„‘çš„æ™ºèƒ½ç³»ç»Ÿæ„å»ºæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648475395325/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²¡å¤šå°‘é€»è¾‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:05:57.000Z" title="Fri Dec 12 2025 15:05:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ˜¯å¦è§‰å¾— Agentï¼ˆæ™ºèƒ½ä»£ç†ï¼‰çš„æ¦‚å¿µå¤æ‚éš¾æ‡‚ï¼Ÿåˆ«æ‹…å¿ƒï¼Œè¿™ç¯‡æŒ‡å—ä¸ºä½ æç‚¼äº† Agent è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ‹’ç»çƒ§è„‘ï¼Œä¸»æ‰“è½»æ¾æ˜“æ‡‚ã€‚æˆ‘ä»¬å°† Agent çš„å­¦ä¹ ä¹‹æ—…åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š<strong>ç†å¿µã€ç»„ä»¶ã€æ¶æ„</strong>ã€‚è®©æˆ‘ä»¬è·Ÿéš Gopher çš„è„šæ­¥ï¼Œä¸€èµ·æ¢ç´¢æ™ºèƒ½ç³»ç»Ÿæ„å»ºçš„ä¸–ç•Œå§ï¼</p>
<hr/>
<h2 data-id="heading-0">ç¬¬ä¸€éƒ¨åˆ†ï¼šç†å¿µç¯‡ (The Philosophy)</h2>
<p>åœ¨å¼€å§‹æ„å»º Agent ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†è§£æ™ºèƒ½ä»£ç†çš„æœ¬è´¨ã€‚Agent é¦–å…ˆæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼Œå…¶æ¬¡æ‰æ˜¯æŠ€æœ¯å®ç°ã€‚</p>
<h3 data-id="heading-1">â‘  ä¸ºä»€ä¹ˆéœ€è¦ Agent è®¾è®¡æ¨¡å¼ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå®¢æœç³»ç»Ÿã€‚ä¼ ç»Ÿåšæ³•æ˜¯å†™ä¸€å † if-elseï¼šå¦‚æœç”¨æˆ·é—®ä»·æ ¼å°±å›ç­”ä»·æ ¼ï¼Œå¦‚æœé—®é€€è´§å°±å›ç­”é€€è´§æ”¿ç­–...ä½†ç”¨æˆ·çš„é—®é¢˜åƒå¥‡ç™¾æ€ªï¼Œä½ çš„ if-else å¾ˆå¿«å°±å˜æˆäº†ä¸€ä¸ªå·¨å¤§çš„æ„å¤§åˆ©é¢æ¡ä»£ç ã€‚</p>
<p>Agent è®¾è®¡æ¨¡å¼å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å®ƒè®©ç³»ç»Ÿåƒä¸€ä¸ªçœŸæ­£çš„æ™ºèƒ½åŠ©æ‰‹ä¸€æ ·ï¼š<strong>èƒ½è§‚å¯Ÿã€ä¼šæ€è€ƒã€å¯è¡ŒåŠ¨</strong>ã€‚ä¸å†æ˜¯æ­»æ¿çš„è§„åˆ™åŒ¹é…ï¼Œè€Œæ˜¯çœŸæ­£çš„æ™ºèƒ½å†³ç­–ã€‚</p>
<p>ç®€å•è¯´ï¼ŒAgent å°±æ˜¯è®©ä½ çš„ç¨‹åºå˜èªæ˜çš„è®¾è®¡æ–¹æ³•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6624d423772b43cfa153de6c7720db7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=qTr6E3hWVEALEiHWJ5XBQJ1J0Jc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">â‘¡ ç¯å¢ƒï¼ˆEnvironmentï¼‰</h3>
<p>å°±åƒäººéœ€è¦çœ¼ç›çœ‹ä¸–ç•Œä¸€æ ·ï¼ŒAgent ä¹Ÿéœ€è¦çŸ¥é“è‡ªå·±èº«å¤„ä»€ä¹ˆç¯å¢ƒã€‚</p>
<p>ç¯å¢ƒåŒ…æ‹¬ä¸‰ä¸ªè¦ç´ ï¼š</p>
<ul>
<li><strong>èƒ½çœ‹åˆ°ä»€ä¹ˆ</strong>ï¼šæ•°æ®åº“çŠ¶æ€ã€ç”¨æˆ·è¾“å…¥ã€ç³»ç»Ÿæ—¥å¿—ç­‰</li>
<li><strong>èƒ½åšä»€ä¹ˆ</strong>ï¼šè°ƒç”¨ APIã€å‘é€æ¶ˆæ¯ã€æ›´æ–°æ•°æ®ç­‰</li>
<li><strong>åšäº†ä¹‹åä¼šæ€æ ·</strong>ï¼šæ“ä½œçš„ç»“æœå’Œåé¦ˆ</li>
</ul>
<p>æ¯”å¦‚ä¸€ä¸ªäº¤æ˜“ Agentï¼Œå®ƒçš„ç¯å¢ƒå°±æ˜¯è‚¡ç¥¨å¸‚åœºï¼šèƒ½çœ‹åˆ°ä»·æ ¼å˜åŒ–ï¼Œèƒ½æ‰§è¡Œä¹°å–æ“ä½œï¼Œèƒ½æ”¶åˆ°æˆäº¤ç¡®è®¤ã€‚æ²¡æœ‰æ¸…æ™°çš„ç¯å¢ƒå®šä¹‰ï¼ŒAgent å°±åƒç›²äººæ‘¸è±¡ï¼Œæ ¹æœ¬ä¸çŸ¥é“è¯¥å¹²ä»€ä¹ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c34f1b1a20ed4d83bcc696f6ee1e9d0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=APv87qIBO3TRS90Y9O53E9vN2KI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">â‘¢ ç›®æ ‡å¯¼å‘ï¼ˆGoal-Orientedï¼‰</h3>
<p>æ²¡æœ‰ç›®æ ‡çš„ Agent å°±åƒæ²¡æœ‰å¯¼èˆªçš„å¸æœºï¼Œå¯èƒ½æŠ€æœ¯å¾ˆå¥½ï¼Œä½†ä¸çŸ¥é“è¦å»å“ªé‡Œã€‚</p>
<p>ç›®æ ‡ç»™äº† Agent æ–¹å‘æ„Ÿã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>å®¢æœ Agent çš„ç›®æ ‡ï¼šè®©ç”¨æˆ·æ»¡æ„åœ°è§£å†³é—®é¢˜</li>
<li>æ¨è Agent çš„ç›®æ ‡ï¼šæé«˜ç”¨æˆ·çš„ç‚¹å‡»ç‡å’Œè´­ä¹°ç‡</li>
<li>ç›‘æ§ Agent çš„ç›®æ ‡ï¼šåŠæ—¶å‘ç°å¹¶æŠ¥å‘Šç³»ç»Ÿå¼‚å¸¸</li>
</ul>
<p>æœ‰äº†æ˜ç¡®ç›®æ ‡ï¼ŒAgent çš„æ¯ä¸ªå†³ç­–éƒ½æœ‰äº†è¯„åˆ¤æ ‡å‡†ï¼šè¿™ä¸ªè¡ŒåŠ¨èƒ½å¸®æˆ‘æ›´æ¥è¿‘ç›®æ ‡å—ï¼Ÿè¿™æ · Agent å°±ä¸ä¼šåšæ— ç”¨åŠŸï¼Œæ‰€æœ‰åŠªåŠ›éƒ½æŒ‡å‘åŒä¸€ä¸ªæ–¹å‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae62a4d703c344ba87dea82e09921240~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=SdI3FgKhsGhQC7Vih2yugD5UIeE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">ç¬¬äºŒéƒ¨åˆ†ï¼šç»„ä»¶ç¯‡ (Components Design)</h2>
<p>å½“ç†è§£äº† Agent çš„ç†å¿µåï¼Œæˆ‘ä»¬éœ€è¦å…·ä½“çš„"ç»„ä»¶"æ¥æ„å»ºæ™ºèƒ½ä»£ç†ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-5">â‘  æ„ŸçŸ¥å™¨ï¼ˆPerceiverï¼‰</h3>
<p>æ„ŸçŸ¥å™¨å°±æ˜¯ Agent çš„"çœ¼ç›å’Œè€³æœµ"ï¼Œè´Ÿè´£æ”¶é›†å¤–ç•Œä¿¡æ¯ã€‚</p>
<p>æƒ³è±¡ä½ åœ¨å¼€å‘ä¸€ä¸ªæ™ºèƒ½å®¢æœ Agentã€‚æ„ŸçŸ¥å™¨çš„å·¥ä½œå°±æ˜¯ï¼š</p>
<ul>
<li>è¯»å–ç”¨æˆ·çš„æ¶ˆæ¯å†…å®¹</li>
<li>åˆ†æç”¨æˆ·çš„æƒ…ç»ªï¼ˆç”Ÿæ°”ã€å›°æƒ‘ã€æ»¡æ„ï¼‰</li>
<li>è·å–ç”¨æˆ·çš„å†å²è®°å½•</li>
<li>æ£€æŸ¥å½“å‰ç³»ç»ŸçŠ¶æ€</li>
</ul>
<p>æ„ŸçŸ¥å™¨ä¸åªæ˜¯ç®€å•åœ°"çœ‹"ï¼Œè¿˜è¦"ç†è§£"ã€‚å®ƒæŠŠæ‚ä¹±çš„åŸå§‹æ•°æ®ï¼ˆæ–‡å­—ã€æ•°å­—ã€æ—¥å¿—ï¼‰è½¬æ¢æˆ Agent èƒ½æ‡‚çš„ç»“æ„åŒ–ä¿¡æ¯ã€‚å°±åƒæŠŠ"ç”¨æˆ·è¯´ï¼šæˆ‘çš„è®¢å•æ€ä¹ˆè¿˜æ²¡åˆ°ï¼Ÿ"è½¬æ¢æˆ"ç”¨æˆ·è¯¢é—®ï¼šè®¢å•çŠ¶æ€ï¼Œæƒ…ç»ªï¼šç„¦è™‘"ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04802d82616c4cb3b1c45ea20e18d625~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=F9NwElpN69lLNb%2FEMqg1sTlXfxo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">â‘¡ å†³ç­–å™¨ï¼ˆDecision Makerï¼‰</h3>
<p>å†³ç­–å™¨æ˜¯ Agent çš„"å¤§è„‘"ï¼Œè´Ÿè´£æ€è€ƒå’Œé€‰æ‹©ã€‚</p>
<p>å½“æ„ŸçŸ¥å™¨å‘Šè¯‰å†³ç­–å™¨"ç”¨æˆ·å¾ˆç„¦è™‘åœ°è¯¢é—®è®¢å•çŠ¶æ€"æ—¶ï¼Œå†³ç­–å™¨å¼€å§‹å·¥ä½œï¼š</p>
<ol>
<li><strong>åˆ†ææƒ…å†µ</strong>ï¼šç”¨æˆ·ç„¦è™‘ + è¯¢é—®è®¢å• = éœ€è¦å¿«é€Ÿå®‰æŠšå¹¶æä¾›ä¿¡æ¯</li>
<li><strong>è€ƒè™‘é€‰é¡¹</strong>ï¼šç›´æ¥æŸ¥è¯¢è®¢å•ï¼Ÿå…ˆé“æ­‰å†æŸ¥è¯¢ï¼Ÿè½¬äººå·¥å®¢æœï¼Ÿ</li>
<li><strong>è¯„ä¼°åæœ</strong>ï¼šå“ªç§æ–¹å¼æœ€èƒ½è¾¾æˆ"è®©ç”¨æˆ·æ»¡æ„"çš„ç›®æ ‡ï¼Ÿ</li>
<li><strong>åšå‡ºå†³å®š</strong>ï¼šé€‰æ‹©"å…ˆè¡¨ç¤ºç†è§£ç”¨æˆ·å¿ƒæƒ…ï¼Œç„¶åç«‹å³æŸ¥è¯¢è®¢å•çŠ¶æ€"</li>
</ol>
<p>å¥½çš„å†³ç­–å™¨ä¸æ˜¯ç®€å•çš„è§„åˆ™å¼•æ“ï¼Œè€Œæ˜¯èƒ½æƒè¡¡å¤šç§å› ç´ ã€é¢„æµ‹ç»“æœçš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-7">â‘¢ æ‰§è¡Œå™¨ï¼ˆActuatorï¼‰</h3>
<p>æ‰§è¡Œå™¨æ˜¯ Agent çš„"æ‰‹è„š"ï¼ŒæŠŠæƒ³æ³•å˜æˆè¡ŒåŠ¨ã€‚</p>
<p>å†³ç­–å™¨è¯´"è¦å…ˆå®‰æŠšç”¨æˆ·å†æŸ¥è¯¢è®¢å•"ï¼Œæ‰§è¡Œå™¨å°±å¼€å§‹å¹²æ´»ï¼š</p>
<ol>
<li><strong>è°ƒç”¨æ¶ˆæ¯ API</strong>ï¼šå‘é€"æˆ‘ç†è§£æ‚¨çš„ç€æ€¥å¿ƒæƒ…ï¼Œæ­£åœ¨ä¸ºæ‚¨æŸ¥è¯¢è®¢å•çŠ¶æ€"</li>
<li><strong>è°ƒç”¨è®¢å• API</strong>ï¼šæ ¹æ®ç”¨æˆ· ID æŸ¥è¯¢æœ€æ–°è®¢å•ä¿¡æ¯</li>
<li><strong>è°ƒç”¨ç‰©æµ API</strong>ï¼šè·å–åŒ…è£¹çš„å®æ—¶ä½ç½®</li>
<li><strong>å†æ¬¡è°ƒç”¨æ¶ˆæ¯ API</strong>ï¼šå‘é€è¯¦ç»†çš„è®¢å•å’Œç‰©æµä¿¡æ¯</li>
</ol>
<p>æ‰§è¡Œå™¨è¦å¤„ç†å„ç§æ„å¤–æƒ…å†µï¼šAPI è°ƒç”¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿç½‘ç»œè¶…æ—¶æ€ä¹ˆåŠï¼Ÿå®ƒéœ€è¦æœ‰é‡è¯•æœºåˆ¶ã€é”™è¯¯å¤„ç†ï¼Œç¡®ä¿å†³ç­–èƒ½å¤Ÿå¯é åœ°æ‰§è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82a0b621afc04ed39109f8cb1088cf72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=6IYgvnfgBvfWAyEOmuHYe56C%2FFo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">â‘£ è®°å¿†æ¨¡å—ï¼ˆMemoryï¼‰</h3>
<p>è®°å¿†æ¨¡å—è®© Agent ä»ç»éªŒä¸­å­¦ä¹ ï¼Œè¶Šç”¨è¶Šèªæ˜ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªæ–°æ‰‹å®¢æœå’Œè€æ‰‹å®¢æœçš„åŒºåˆ«ï¼š</p>
<ul>
<li><strong>æ–°æ‰‹</strong>ï¼šæ¯æ¬¡éƒ½è¦æŸ¥æ‰‹å†Œï¼Œä¸çŸ¥é“ç”¨æˆ·çš„å†å²é—®é¢˜ï¼Œå¤„ç†é€Ÿåº¦æ…¢</li>
<li><strong>è€æ‰‹</strong>ï¼šè®°å¾—å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼ŒçŸ¥é“ç”¨æˆ·çš„åå¥½ï¼Œèƒ½å¿«é€Ÿå®šä½é—®é¢˜</li>
</ul>
<p>Agent çš„è®°å¿†æ¨¡å—å°±æ˜¯è¿™ä¸ªâ€œç»éªŒç§¯ç´¯â€çš„è¿‡ç¨‹ï¼š</p>
<ul>
<li><strong>çŸ­æœŸè®°å¿†</strong>ï¼šå½“å‰å¯¹è¯çš„ä¸Šä¸‹æ–‡ï¼Œç”¨æˆ·åˆšæ‰è¯´äº†ä»€ä¹ˆ</li>
<li><strong>é•¿æœŸè®°å¿†</strong>ï¼šç”¨æˆ·çš„å†å²äº¤äº’è®°å½•ï¼Œåå¥½å’Œä¹ æƒ¯</li>
<li><strong>çŸ¥è¯†è®°å¿†</strong>ï¼šå­¦åˆ°çš„è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µ</li>
</ul>
<p>æœ‰äº†è®°å¿†ï¼ŒAgent å°±èƒ½åšåˆ°â€œä¸ªæ€§åŒ–æœåŠ¡â€å’Œâ€œæŒç»­æ”¹è¿›â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0fb61b4a0eb4eb3a1f3c17771eded2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=LQYqtWvXucGnoDiN2ChE4PwcqMI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">â‘¤ é€šä¿¡æ¥å£ï¼ˆCommunication Interfaceï¼‰</h3>
<p>é€šä¿¡æ¥å£è®© Agent èƒ½å¤Ÿä¸å¤–ç•Œâ€œå¯¹è¯â€ï¼Œä¸å†æ˜¯å­¤å²›ã€‚</p>
<p>Agent éœ€è¦ä¸å„ç§å¯¹è±¡æ²Ÿé€šï¼š</p>
<ul>
<li><strong>ä¸ç”¨æˆ·æ²Ÿé€š</strong>ï¼šæ¥æ”¶æŒ‡ä»¤ï¼Œåé¦ˆç»“æœï¼ŒæŠ¥å‘Šè¿›åº¦</li>
<li><strong>ä¸å…¶ä»– Agent æ²Ÿé€š</strong>ï¼šåä½œå®Œæˆå¤æ‚ä»»åŠ¡ï¼Œå…±äº«ä¿¡æ¯</li>
<li><strong>ä¸ç³»ç»Ÿæ²Ÿé€š</strong>ï¼šæŠ¥å‘ŠçŠ¶æ€ï¼Œè¯·æ±‚èµ„æºï¼Œæ¥æ”¶é…ç½®</li>
</ul>
<p>å¥½çš„é€šä¿¡æ¥å£å°±åƒç»Ÿä¸€çš„â€œè¯­è¨€åè®®â€ï¼š</p>
<ul>
<li><strong>æ ‡å‡†åŒ–æ ¼å¼</strong>ï¼šæ‰€æœ‰ Agent éƒ½ç”¨åŒä¸€ç§æ¶ˆæ¯æ ¼å¼</li>
<li><strong>å¼‚æ­¥é€šä¿¡</strong>ï¼šä¸ä¼šå› ä¸ºç­‰å¾…å›å¤è€Œå¡ä½</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šç½‘ç»œé—®é¢˜æˆ–å¯¹æ–¹æ— å“åº”æ—¶çš„å¤„ç†æœºåˆ¶</li>
</ul>
<p>è¿™æ · Agent å°±èƒ½èå…¥å¤§å‹ç³»ç»Ÿï¼Œæˆä¸ºæ™ºèƒ½ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1b802b6288447858c2762a11703e620~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=3jkp87cU8gpr%2B%2Byex8s7KljGFZ8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">â‘¥ å­¦ä¹ æ¨¡å—ï¼ˆLearning Moduleï¼‰</h3>
<p>å­¦ä¹ æ¨¡å—è®© Agent æŒç»­è¿›åŒ–ï¼Œä»â€œæ–°æ‰‹â€æˆé•¿ä¸ºâ€œä¸“å®¶â€ã€‚</p>
<p>å­¦ä¹ æ¨¡å—çš„å·¥ä½œæ–¹å¼ï¼š</p>
<ol>
<li><strong>æ”¶é›†åé¦ˆ</strong>ï¼šç”¨æˆ·æ»¡æ„å—ï¼Ÿé—®é¢˜è§£å†³äº†å—ï¼Ÿå“åº”é€Ÿåº¦å¿«å—ï¼Ÿ</li>
<li><strong>åˆ†ææ¨¡å¼</strong>ï¼šä»€ä¹ˆæƒ…å†µä¸‹ç”¨æˆ·æ›´æ»¡æ„ï¼Ÿå“ªç§å›å¤æ–¹å¼æ•ˆæœæ›´å¥½ï¼Ÿ</li>
<li><strong>ä¼˜åŒ–ç­–ç•¥</strong>ï¼šè°ƒæ•´å†³ç­–è§„åˆ™ï¼Œæ”¹è¿›å›å¤æ¨¡æ¿ï¼Œä¼˜åŒ–å“åº”é€Ÿåº¦</li>
<li><strong>æŒç»­è¿­ä»£</strong>ï¼šä¸æ–­å°è¯•æ–°çš„æ–¹æ³•ï¼Œä¿ç•™æœ‰æ•ˆçš„ï¼Œæ·˜æ±°æ— æ•ˆçš„</li>
</ol>
<p>å­¦ä¹ æ¨¡å—çš„ä»·å€¼åœ¨äºï¼š</p>
<ul>
<li><strong>é€‚åº”æ€§</strong>ï¼šç¯å¢ƒå˜åŒ–æ—¶èƒ½è°ƒæ•´ç­–ç•¥</li>
<li><strong>ä¸ªæ€§åŒ–</strong>ï¼šé’ˆå¯¹ä¸åŒç”¨æˆ·ç¾¤ä½“ä¼˜åŒ–æœåŠ¡</li>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šéšç€ç»éªŒç§¯ç´¯ï¼Œå¤„ç†é€Ÿåº¦å’Œå‡†ç¡®ç‡ä¸æ–­æé«˜</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç°åœ¨çš„ AI åŠ©æ‰‹è¶Šç”¨è¶Šèªæ˜çš„åŸå› ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56bf528034944853a1f1aab9a2c86ee0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=EoMcpIkeaj4CiEsKjPVFNY9y6O4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ¶æ„ç¯‡ (Architecture Design)</h2>
<p>å½“ç³»ç»Ÿå˜å¤æ‚æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä»æ›´é«˜çš„è§†è§’æ¥ç»„ç»‡ Agent æ¶æ„å’Œåä½œæ¨¡å¼ã€‚</p>
<h3 data-id="heading-12">â‘  å•ä½“ Agentï¼ˆMonolithic Agentï¼‰</h3>
<p>å•ä½“ Agent å°±åƒä¸€ä¸ªâ€œå…¨èƒ½å‹â€å‘˜å·¥ï¼Œä»€ä¹ˆéƒ½ä¼šå¹²ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªå°å‹å’–å•¡åº—çš„åº—ä¸»ï¼šä»–æ—¢è¦æ¥å¾…å®¢äººï¼ˆæ„ŸçŸ¥ï¼‰ï¼Œåˆè¦å†³å®šåšä»€ä¹ˆå’–å•¡ï¼ˆå†³ç­–ï¼‰ï¼Œè¿˜è¦äº²è‡ªåˆ¶ä½œï¼ˆæ‰§è¡Œï¼‰ã€‚è™½ç„¶å¿™ï¼Œä½†ç®€å•é«˜æ•ˆã€‚</p>
<p>å•ä½“ Agent çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>ç®€å•ç›´æ¥</strong>ï¼šæ‰€æœ‰é€»è¾‘éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæ²¡æœ‰å¤æ‚çš„æ¨¡å—é—´é€šä¿¡</li>
<li><strong>å¼€å‘å¿«é€Ÿ</strong>ï¼šä¸éœ€è¦è®¾è®¡å¤æ‚çš„æ¶æ„ï¼Œç›´æ¥å†™ä»£ç å°±è¡Œ</li>
<li><strong>é€‚åˆå°ä»»åŠ¡</strong>ï¼šæ¯”å¦‚ç®€å•çš„èŠå¤©æœºå™¨äººã€æ•°æ®ç›‘æ§ã€è‡ªåŠ¨å›å¤ç­‰</li>
</ul>
<p>ä½†æ˜¯ï¼Œå°±åƒå’–å•¡åº—ç”Ÿæ„å¤ªå¥½æ—¶ï¼Œä¸€ä¸ªäººå¿™ä¸è¿‡æ¥ä¸€æ ·ï¼Œå•ä½“ Agent ä¹Ÿæœ‰é™åˆ¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9b22b7a63764a8fa4bccb16666eee3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=Y9m%2BTvRnwwP1EnNPwhoWrCZCagQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">â‘¡ å¤š Agent ç³»ç»Ÿï¼ˆMulti-Agent Systemï¼‰</h3>
<p>å¤š Agent ç³»ç»Ÿå°±åƒä¸€ä¸ªä¸“ä¸šå›¢é˜Ÿï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä¸“é•¿ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªç”µå•†å¹³å°çš„æ™ºèƒ½å®¢æœç³»ç»Ÿï¼š</p>
<ul>
<li><strong>æ¥å¾… Agent</strong>ï¼šä¸“é—¨è´Ÿè´£åˆæ­¥æ¥å¾…ï¼Œåˆ†ç±»ç”¨æˆ·é—®é¢˜</li>
<li><strong>è®¢å• Agent</strong>ï¼šä¸“é—¨å¤„ç†è®¢å•ç›¸å…³é—®é¢˜ï¼Œç†Ÿæ‚‰æ‰€æœ‰è®¢å•æµç¨‹</li>
<li><strong>å”®å Agent</strong>ï¼šä¸“é—¨å¤„ç†é€€æ¢è´§ï¼ŒçŸ¥é“æ‰€æœ‰å”®åæ”¿ç­–</li>
<li><strong>æŠ€æœ¯ Agent</strong>ï¼šä¸“é—¨è§£å†³æŠ€æœ¯é—®é¢˜ï¼Œç†Ÿæ‚‰äº§å“ç»†èŠ‚</li>
<li><strong>åè°ƒ Agent</strong>ï¼šè´Ÿè´£åœ¨å„ä¸ª Agent ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼Œç»Ÿä¸€è°ƒåº¦</li>
</ul>
<p>è¿™æ ·çš„å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li><strong>ä¸“ä¸šåŒ–</strong>ï¼šæ¯ä¸ª Agent åªåšè‡ªå·±æ“…é•¿çš„äº‹ï¼Œæ•ˆç‡æ›´é«˜</li>
<li><strong>å¯æ‰©å±•</strong>ï¼šéœ€è¦æ—¶å¯ä»¥æ·»åŠ æ–°çš„ä¸“ä¸š Agent</li>
<li><strong>å®¹é”™æ€§</strong>ï¼šä¸€ä¸ª Agent å‡ºé—®é¢˜ä¸ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/804ca3aa3d6641809e02d6ec56c65082~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=BYfbSxl%2BphRsfIiKPJ77Fd3zD5g%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-14">â‘¢ åˆ†å±‚ Agent æ¶æ„ï¼ˆLayered Agent Architectureï¼‰</h3>
<p>åˆ†å±‚æ¶æ„å°±åƒä¸€ä¸ªç»„ç»‡ä¸¥å¯†çš„å…¬å¸ï¼Œæ¯ä¸ªå±‚çº§éƒ½æœ‰æ˜ç¡®çš„èŒè´£ã€‚</p>
<p>ä»¥ä¸€ä¸ªæ™ºèƒ½æŠ•èµ„ Agent ä¸ºä¾‹ï¼š</p>
<p><strong>æ„ŸçŸ¥å±‚ï¼ˆPerception Layerï¼‰</strong>ï¼š</p>
<ul>
<li>æ”¶é›†å¸‚åœºæ•°æ®ï¼šè‚¡ä»·ã€æ–°é—»ã€è´¢æŠ¥</li>
<li>æ¸…æ´—å’Œæ ‡å‡†åŒ–æ•°æ®</li>
<li>æä¾›ç»Ÿä¸€çš„æ•°æ®æ¥å£ç»™ä¸Šå±‚</li>
</ul>
<p><strong>è®¤çŸ¥å±‚ï¼ˆCognition Layerï¼‰</strong>ï¼š</p>
<ul>
<li>åˆ†æå¸‚åœºè¶‹åŠ¿å’Œé£é™©</li>
<li>åˆ¶å®šæŠ•èµ„ç­–ç•¥</li>
<li>è¯„ä¼°ä¸åŒæ–¹æ¡ˆçš„æ”¶ç›Šå’Œé£é™©</li>
</ul>
<p><strong>è¡ŒåŠ¨å±‚ï¼ˆAction Layerï¼‰</strong>ï¼š</p>
<ul>
<li>æ‰§è¡Œä¹°å–æ“ä½œ</li>
<li>ç®¡ç†è´¦æˆ·èµ„é‡‘</li>
<li>å‘é€é€šçŸ¥å’ŒæŠ¥å‘Š</li>
</ul>
<p>è¿™æ ·åˆ†å±‚çš„å¥½å¤„ï¼š</p>
<ul>
<li><strong>èŒè´£æ¸…æ™°</strong>ï¼šæ¯å±‚åªå…³æ³¨è‡ªå·±çš„äº‹æƒ…</li>
<li><strong>æ˜“äºç»´æŠ¤</strong>ï¼šä¿®æ”¹ä¸€å±‚ä¸ä¼šå½±å“å…¶ä»–å±‚</li>
<li><strong>å¯æ›¿æ¢</strong>ï¼šå¯ä»¥å•ç‹¬å‡çº§æŸä¸€å±‚çš„åŠŸèƒ½</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4460e2d4654f41c48f95e622de074d9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=vyvOJFVeMMX17byEyxSsiw2u90E%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-15">â‘£ äº‹ä»¶é©±åŠ¨ Agentï¼ˆEvent-Driven Agentï¼‰</h3>
<p>äº‹ä»¶é©±åŠ¨ Agent å°±åƒä¸€ä¸ªæ•æ·çš„æ¶ˆé˜²å‘˜ï¼Œä¸æ˜¯å®šæ—¶å·¡é€»ï¼Œè€Œæ˜¯å¬åˆ°è­¦æŠ¥å°±ç«‹å³å‡ºåŠ¨ã€‚</p>
<p>ä¼ ç»Ÿæ–¹å¼ vs äº‹ä»¶é©±åŠ¨ï¼š</p>
<p><strong>ä¼ ç»Ÿè½®è¯¢æ–¹å¼</strong>ï¼š</p>
<ul>
<li>Agent æ¯éš” 5 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡é‚®ç®±</li>
<li>å³ä½¿æ²¡æœ‰æ–°é‚®ä»¶ä¹Ÿè¦æ£€æŸ¥</li>
<li>æµªè´¹èµ„æºï¼Œå“åº”ä¸åŠæ—¶</li>
</ul>
<p><strong>äº‹ä»¶é©±åŠ¨æ–¹å¼</strong>ï¼š</p>
<ul>
<li>é‚®ç®±æœ‰æ–°é‚®ä»¶æ—¶ç«‹å³é€šçŸ¥ Agent</li>
<li>Agent æ”¶åˆ°é€šçŸ¥åç«‹å³å¤„ç†</li>
<li>èŠ‚çœèµ„æºï¼Œå“åº”è¿…é€Ÿ</li>
</ul>
<p>å¸¸è§çš„äº‹ä»¶ç±»å‹ï¼š</p>
<ul>
<li><strong>ç”¨æˆ·äº‹ä»¶</strong>ï¼šæ–°æ¶ˆæ¯ã€ç‚¹å‡»ã€è´­ä¹°ç­‰</li>
<li><strong>ç³»ç»Ÿäº‹ä»¶</strong>ï¼šé”™è¯¯ã€è¶…æ—¶ã€èµ„æºä¸è¶³ç­‰</li>
<li><strong>ä¸šåŠ¡äº‹ä»¶</strong>ï¼šè®¢å•åˆ›å»ºã€æ”¯ä»˜å®Œæˆã€åº“å­˜ä¸è¶³ç­‰</li>
</ul>
<p>è¿™æ · Agent å°±èƒ½åšåˆ°â€œéšå«éšåˆ°â€ï¼Œå“åº”æ›´å¿«ï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6528f3922aaa4970bf5ed013463f84b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=euOwoJrvbvwc8G23PtTowHuFuiQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-16">å®è·µæ¨¡å¼ç¯‡ (Practice Patterns)</h2>
<h3 data-id="heading-17">â‘  è§„åˆ’å‹ Agentï¼ˆPlanning Agentï¼‰</h3>
<p>è§„åˆ’å‹ Agent å°±åƒä¸€ä¸ªç²¾æ˜çš„é¡¹ç›®ç»ç†ï¼Œåšäº‹å‰å…ˆåˆ¶å®šè¯¦ç»†è®¡åˆ’ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šç”¨æˆ·è¯´â€œæˆ‘æƒ³ç»„ç»‡ä¸€æ¬¡å›¢å»ºæ´»åŠ¨â€ï¼Œè§„åˆ’å‹ Agent ä¼šï¼š</p>
<ol>
<li><strong>åˆ†æç›®æ ‡</strong>ï¼šå›¢å»ºæ´»åŠ¨éœ€è¦è€ƒè™‘äººæ•°ã€é¢„ç®—ã€æ—¶é—´ã€åœ°ç‚¹ç­‰</li>
<li><strong>åˆ¶å®šè®¡åˆ’</strong>ï¼š
<ul>
<li>æ­¥éª¤ 1ï¼šç»Ÿè®¡å‚ä¸äººæ•°å’Œåå¥½</li>
<li>æ­¥éª¤ 2ï¼šæ ¹æ®é¢„ç®—ç­›é€‰åˆé€‚åœºåœ°</li>
<li>æ­¥éª¤ 3ï¼šå¯¹æ¯”ä»·æ ¼å’ŒæœåŠ¡</li>
<li>æ­¥éª¤ 4ï¼šé¢„è®¢å¹¶ç¡®è®¤</li>
<li>æ­¥éª¤ 5ï¼šé€šçŸ¥æ‰€æœ‰äººå¹¶å®‰æ’äº¤é€š</li>
</ul>
</li>
<li><strong>æ‰§è¡Œè®¡åˆ’</strong>ï¼šæŒ‰ç…§æ­¥éª¤ä¸€æ­¥æ­¥æ‰§è¡Œï¼Œæ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡</li>
</ol>
<p>è§„åˆ’å‹ Agent çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>é«˜æ•ˆç‡</strong>ï¼šé¿å…é‡å¤å·¥ä½œå’Œèµ°å¼¯è·¯</li>
<li><strong>å¯é¢„æµ‹</strong>ï¼šèƒ½ä¼°ç®—æ‰€éœ€æ—¶é—´å’Œèµ„æº</li>
<li><strong>å¯è°ƒæ•´</strong>ï¼šå‘ç°é—®é¢˜æ—¶å¯ä»¥è°ƒæ•´è®¡åˆ’</li>
</ul>
<h3 data-id="heading-18">â‘¡ ååº”å¼ Agentï¼ˆReactive Agentï¼‰</h3>
<p>ååº”å¼ Agent å°±åƒä¸€ä¸ªç»éªŒä¸°å¯Œçš„æ€¥è¯ŠåŒ»ç”Ÿï¼Œçœ‹åˆ°ç—‡çŠ¶å°±èƒ½å¿«é€Ÿåšå‡ºåˆ¤æ–­ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šç½‘ç«™ç›‘æ§ Agentï¼š</p>
<ul>
<li><strong>çœ‹åˆ°</strong>ï¼šæœåŠ¡å™¨ CPU ä½¿ç”¨ç‡è¶…è¿‡ 90%</li>
<li><strong>ç«‹å³ååº”</strong>ï¼šå¯åŠ¨é¢å¤–çš„æœåŠ¡å™¨å®ä¾‹</li>
<li><strong>ä¸ç”¨æ€è€ƒ</strong>ï¼šä¸ºä»€ä¹ˆ CPU é«˜ï¼Ÿæ˜¯ä¸æ˜¯ä¸´æ—¶çš„ï¼Ÿç›´æ¥è¡ŒåŠ¨</li>
</ul>
<p>ååº”å¼ Agent çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>é€Ÿåº¦å¿«</strong>ï¼šä»æ„ŸçŸ¥åˆ°è¡ŒåŠ¨åªéœ€å‡ æ¯«ç§’</li>
<li><strong>è§„åˆ™ç®€å•</strong>ï¼šå¦‚æœ....å°±....çš„ç®€å•é€»è¾‘</li>
<li><strong>é€‚åˆç´§æ€¥æƒ…å†µ</strong>ï¼šå®‰å…¨é˜²æŠ¤ã€æ•…éšœå“åº”ã€å®æ—¶äº¤æ˜“ç­‰</li>
</ul>
<p>ä½†æ˜¯ååº”å¼ Agent ä¹Ÿæœ‰é™åˆ¶ï¼š</p>
<ul>
<li>å¯èƒ½åšå‡ºé”™è¯¯åˆ¤æ–­ï¼ˆæ¯”å¦‚ CPU é«˜åªæ˜¯ä¸´æ—¶çš„ï¼‰</li>
<li>æ— æ³•å¤„ç†å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡</li>
<li>ç¼ºä¹å…¨å±€è§†é‡å’Œé•¿æœŸè€ƒè™‘</li>
</ul>
<h3 data-id="heading-19">â‘¢ æ··åˆå‹ Agentï¼ˆHybrid Agentï¼‰</h3>
<p>æ··åˆå‹ Agent å°±åƒä¸€ä¸ªæ—¢ä¼šç­–ç•¥è§„åˆ’åˆèƒ½åº”æ€¥å¤„ç†çš„ç»éªŒä¸°å¯Œçš„ç®¡ç†è€…ã€‚</p>
<p>ä»¥ä¸€ä¸ªæ™ºèƒ½äº¤æ˜“ Agent ä¸ºä¾‹ï¼š</p>
<p><strong>æ­£å¸¸æƒ…å†µï¼ˆè§„åˆ’æ¨¡å¼ï¼‰</strong>ï¼š</p>
<ul>
<li>åˆ†æå¸‚åœºè¶‹åŠ¿å’Œå†å²æ•°æ®</li>
<li>åˆ¶å®šè¯¦ç»†çš„æŠ•èµ„ç­–ç•¥</li>
<li>è®¡åˆ’ä»€ä¹ˆæ—¶å€™ä¹°å…¥ï¼Œä»€ä¹ˆæ—¶å€™å–å‡º</li>
</ul>
<p><strong>ç´§æ€¥æƒ…å†µï¼ˆååº”æ¨¡å¼ï¼‰</strong>ï¼š</p>
<ul>
<li>å¸‚åœºçªç„¶å¤§è·Œï¼šç«‹å³æ­¢æŸï¼Œä¸ç­‰è®¡åˆ’</li>
<li>é‡å¤§æ¶ˆæ¯å‘å¸ƒï¼šå¿«é€Ÿè°ƒæ•´ä»“ä½ï¼ŒæŠ“ä½æœºä¼š</li>
<li>ç³»ç»Ÿæ•…éšœï¼šç«‹å³åœæ­¢äº¤æ˜“ï¼Œä¿æŠ¤èµ„é‡‘</li>
</ul>
<p><strong>æ™ºèƒ½åˆ‡æ¢</strong>ï¼š</p>
<ul>
<li>æ ¹æ®ç¯å¢ƒçš„ç¨³å®šæ€§è‡ªåŠ¨åˆ‡æ¢æ¨¡å¼</li>
<li>åœ¨ç´§æ€¥æƒ…å†µç»“æŸåé‡æ–°å›åˆ°è§„åˆ’æ¨¡å¼</li>
<li>ä»ä¸¤ç§æ¨¡å¼çš„ç»éªŒä¸­å­¦ä¹ å’Œæ”¹è¿›</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç°å®ä¸­æœ€æˆåŠŸçš„ Agent ç³»ç»Ÿå¤§å¤šé‡‡ç”¨æ··åˆæ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-20">æ€»ç»“</h2>
<h3 data-id="heading-21">æ ¸å¿ƒå›é¡¾</h3>
<p>Agent è®¾è®¡æ¨¡å¼çš„æœ¬è´¨å°±æ˜¯è®©ç¨‹åº"æœ‰è„‘å­"ã€‚</p>
<p>ä¼ ç»Ÿç¨‹åºå°±åƒä¸€å°å¤æ‚çš„æœºå™¨ï¼ŒæŒ‰ç…§å›ºå®šçš„æŒ‡ä»¤æ‰§è¡Œï¼Œé‡åˆ°æ–°æƒ…å†µå°±"å¡å£³"ã€‚è€Œ Agent ç³»ç»Ÿå°±åƒä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œèƒ½å¤Ÿï¼š</p>
<ul>
<li><strong>è§‚å¯Ÿç¯å¢ƒ</strong>ï¼šçŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆ</li>
<li><strong>ç†è§£ç›®æ ‡</strong>ï¼šçŸ¥é“è¦å®ç°ä»€ä¹ˆ</li>
<li><strong>æ™ºèƒ½å†³ç­–</strong>ï¼šé€‰æ‹©æœ€åˆé€‚çš„è¡ŒåŠ¨</li>
<li><strong>å­¦ä¹ æ”¹è¿›</strong>ï¼šä»ç»éªŒä¸­å˜å¾—æ›´èªæ˜</li>
</ul>
<p><strong>è®°ä½è¿™äº”ä¸ªè®¾è®¡åŸåˆ™</strong>ï¼š</p>
<ol>
<li><strong>ç›®æ ‡æ˜ç¡®</strong>ï¼šä¸çŸ¥é“è¦å»å“ªé‡Œçš„ Agent å°±æ˜¯æ— å¤´è‹è‡</li>
<li><strong>ç¯å¢ƒæ¸…æ™°</strong>ï¼šä¸çŸ¥é“è‡ªå·±åœ¨å“ªé‡Œçš„ Agent å°±æ˜¯ç›²äºº</li>
<li><strong>å†³ç­–æ™ºèƒ½</strong>ï¼šä¸ä¼šæ€è€ƒçš„ Agent å°±æ˜¯æœºå™¨äºº</li>
<li><strong>æŒç»­å­¦ä¹ </strong>ï¼šä¸ä¼šæˆé•¿çš„ Agent å°±æ˜¯æ­»ç¨‹åº</li>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šä¸åˆ†æ¨¡å—çš„ Agent å°±æ˜¯ä¸€å›¢ä¹±éº»</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1282ba5b7ed74c4babc599bd4d6dc207~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rKh5aSa5bCR6YC76L6R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157587&amp;x-signature=yQyE7gjUveDCDjTeGOosNF4hZUc%3D" alt="image.png" loading="lazy"/></p>
<p>Agent è®¾è®¡æ¨¡å¼ä¸æ˜¯ä»€ä¹ˆé«˜æ·±è«æµ‹çš„æŠ€æœ¯ï¼Œå°±æ˜¯è®©ç¨‹åºå˜å¾—"æœ‰çµæ€§"ä¸€ç‚¹ã€‚ä»ä¸€ä¸ªç®€å•çš„è‡ªåŠ¨å›å¤å¼€å§‹ï¼Œä¸€æ­¥æ­¥è®©ä½ çš„ç³»ç»Ÿå˜å¾—æ›´èªæ˜ã€æ›´æœ‰ç”¨ï¼Œ<strong>èƒ½è§‚å¯Ÿã€ä¼šæ€è€ƒã€å¯å­¦ä¹ </strong>ï¼Œè¿™å°±æ˜¯ Agent çš„å…¨éƒ¨ç§˜å¯†ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jetpack Compose 2025å¹´12æœˆç‰ˆæœ¬æ–°å¢åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7582776967818215424</link>    <guid>https://juejin.cn/post/7582776967818215424</guid>    <pubDate>2025-12-12T15:08:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582776967818215424" data-draft-id="7582510826814963763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack Compose 2025å¹´12æœˆç‰ˆæœ¬æ–°å¢åŠŸèƒ½"/> <meta itemprop="keywords" content="Android,Android Jetpack,Kotlin"/> <meta itemprop="datePublished" content="2025-12-12T15:08:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨€æœ‰çŒ¿è¯‰"/> <meta itemprop="url" content="https://juejin.cn/user/2788017216685784"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack Compose 2025å¹´12æœˆç‰ˆæœ¬æ–°å¢åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017216685784/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨€æœ‰çŒ¿è¯‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:08:35.000Z" title="Fri Dec 12 2025 15:08:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¯‘è‡ªã€ŒWhat's new in the Jetpack Compose December '25 releaseã€ï¼ŒåŸæ–‡é“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fandroid-developers.googleblog.com%2F2025%2F12%2Fwhats-new-in-jetpack-compose-december.html" target="_blank" title="https://android-developers.googleblog.com/2025/12/whats-new-in-jetpack-compose-december.html" ref="nofollow noopener noreferrer">android-developers.googleblog.com/2025/12/whaâ€¦</a>ï¼Œç”±Nick Butcherå‘å¸ƒäº2025å¹´12æœˆ3æ—¥ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27bfa381ed634211b1fb249ed4b3f026~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=MDyMwQWuOFG0C%2FSZ3e3TQFFvifA%3D" alt="compose_dec.png" loading="lazy"/>
ç°åœ¨ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fjetpack%2Fandroidx%2Freleases%2Fcompose" target="_blank" title="https://developer.android.com/jetpack/androidx/releases/compose" ref="nofollow noopener noreferrer">Jetpack Compose 2025å¹´12æœˆç‰ˆæœ¬</a> æ­£å¼å‘å¸ƒã€‚è¯¥ç‰ˆæœ¬åŒ…å« Compose æ ¸å¿ƒæ¨¡å— 1.10 ç‰ˆå’Œ Material 3 1.4 ç‰ˆï¼ˆå‚è§å®Œæ•´çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Fbom%2Fbom-mapping" target="_blank" title="https://developer.android.com/develop/ui/compose/bom/bom-mapping" ref="nofollow noopener noreferrer">BOM æ˜ å°„</a>ï¼‰ï¼Œæ–°å¢äº† å¤šé¡¹åŠŸèƒ½å¹¶æ˜¾è‘—æå‡äº†æ€§èƒ½ã€‚</p>
<p>è¦ä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼Œè¯·å°† Compose BOM ç‰ˆæœ¬å‡çº§åˆ° 2025.12.00ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">implementation(platform(<span class="hljs-string">"androidx.compose:compose-bom:2025.12.00"</span>))
</code></pre>
<h2 data-id="heading-0">æ€§èƒ½æ”¹è¿›</h2>
<p>æˆ‘ä»¬çŸ¥é“åº”ç”¨ç¨‹åºçš„è¿è¡Œæ—¶æ€§èƒ½å¯¹ä½ å’Œä½ çš„ç”¨æˆ·è‡³å…³é‡è¦ï¼Œå› æ­¤æ€§èƒ½ä¸€ç›´æ˜¯ Compose å›¢é˜Ÿçš„é¦–è¦ä»»åŠ¡ã€‚æ­¤ç‰ˆæœ¬å¸¦æ¥äº†ä¸€ç³»åˆ—æ”¹è¿›â€”â€”ä½ åªéœ€å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬å³å¯è·å¾—æ‰€æœ‰è¿™äº›æ”¹è¿›ã€‚æˆ‘ä»¬çš„å†…éƒ¨æ»šåŠ¨æ€§èƒ½åŸºå‡†æµ‹è¯•è¡¨æ˜ï¼ŒCompose ç°åœ¨çš„æ€§èƒ½ä¸ä½¿ç”¨ Views æ—¶çš„æ€§èƒ½ç›¸å½“ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50bcde2e56ca45ab9dc88aa15a15edc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=POxqlRQqM5pqva87GG7Ynsvc%2Beo%3D" alt="æ»šåŠ¨æ€§èƒ½åŸºå‡†æµ‹è¯•æ¯”è¾ƒäº† Views å’Œ Jetpack Compose åœ¨ä¸åŒ Compose ç‰ˆæœ¬ä¸‹çš„æ€§èƒ½" loading="lazy"/></p>
<h3 data-id="heading-1">å»¶è¿Ÿé¢„å–ä¸­çš„å¯æš‚åœç»„åˆ</h3>
<p>å»¶è¿Ÿé¢„å–ä¸­çš„å¯æš‚åœç»„åˆé¢„å–åŠŸèƒ½ç°å·²é»˜è®¤å¯ç”¨ã€‚è¿™æ˜¯ Compose è¿è¡Œæ—¶è°ƒåº¦æœºåˆ¶çš„ä¸€é¡¹æ ¹æœ¬æ€§å˜é©ï¼Œæ—¨åœ¨æ˜¾è‘—å‡å°‘é«˜ UI è´Ÿè½½ä¸‹çš„å¡é¡¿ç°è±¡ã€‚</p>
<p>æ­¤å‰ï¼Œä¸€æ—¦åˆæˆå¼€å§‹ï¼Œå°±å¿…é¡»è¿è¡Œè‡³å®Œæˆã€‚å¦‚æœåˆæˆè¾ƒä¸ºå¤æ‚ï¼Œåˆ™å¯èƒ½å¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡è¶…è¿‡ä¸€å¸§ï¼Œä»è€Œé€ æˆ UI å¡é¡¿ã€‚è€Œç°åœ¨ï¼Œå€ŸåŠ©å¯æš‚åœåˆæˆåŠŸèƒ½ï¼Œè¿è¡Œæ—¶å¯ä»¥åœ¨æ—¶é—´ä¸è¶³æ—¶â€œæš‚åœâ€å…¶å·¥ä½œï¼Œå¹¶åœ¨ä¸‹ä¸€å¸§æ¢å¤ã€‚å½“ä¸å»¶è¿Ÿå¸ƒå±€é¢„å–ç»“åˆä½¿ç”¨ï¼Œæå‰å‡†å¤‡å¸§æ—¶ï¼Œæ­¤åŠŸèƒ½å°¤ä¸ºæœ‰æ•ˆã€‚ Compose 1.9 ä¸­å¼•å…¥çš„ LazyLayout<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Ffoundation%2Flazy%2Fpackage-summary%23rememberLazyListState(androidx.compose.foundation.lazy.layout.LazyLayoutCacheWindow%2Ckotlin.Int%2Ckotlin.Int)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/foundation/lazy/package-summary#rememberLazyListState(androidx.compose.foundation.lazy.layout.LazyLayoutCacheWindow,kotlin.Int,kotlin.Int)" ref="nofollow noopener noreferrer">CacheWindow</a> API å¯ä»¥å¾ˆå¥½åœ°é¢„å–æ›´å¤šå†…å®¹ï¼Œå¹¶åˆ©ç”¨å¯æš‚åœçš„åˆæˆåŠŸèƒ½æ¥æ˜¾è‘—æå‡ UI æ€§èƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/639a70896a574eebb4092f1338101edb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=5YumkYonG%2B6CAwnpH%2F02j16WYzY%3D" alt="2.gif" loading="lazy"/>
æˆ‘ä»¬è¿˜ä¼˜åŒ–äº†å…¶ä»–æ–¹é¢çš„æ€§èƒ½ï¼Œä¾‹å¦‚æ”¹è¿›äº† Modifier.onPlacedã€‚ Modifier.onVisibilityChanged å’Œå…¶ä»–ä¿®é¥°ç¬¦å®ç°ã€‚æˆ‘ä»¬å°†ç»§ç»­æŠ•å…¥èµ„æºæ¥æå‡ Compose çš„æ€§èƒ½ã€‚</p>
<h2 data-id="heading-2">æ–°åŠŸèƒ½</h2>
<h3 data-id="heading-3">Retain</h3>
<p>Compose æä¾›äº†ä¸€ç³»åˆ— API æ¥è·¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸä¿å­˜å’Œç®¡ç†çŠ¶æ€ï¼›ä¾‹å¦‚ï¼Œ<code>remember</code> å¯ä»¥åœ¨ç»„åˆä¹‹é—´æŒä¹…åŒ–çŠ¶æ€ï¼Œè€Œ <code>rememberSavable</code>/<code>rememberSerializable</code> å¯ä»¥åœ¨ Activity æˆ–è¿›ç¨‹é‡å»ºä¹‹é—´æŒä¹…åŒ–çŠ¶æ€ã€‚<code>retain</code> æ˜¯ä¸€ä¸ªä»‹äºè¿™äº› API ä¹‹é—´çš„æ–° APIï¼Œå®ƒå…è®¸ä½ åœ¨é…ç½®æ›´æ”¹æ—¶æŒä¹…åŒ–å€¼è€Œæ— éœ€åºåˆ—åŒ–ï¼Œä½†ä¸ä¼šè·¨è¿›ç¨‹ç»ˆæ­¢ã€‚ç”±äº <code>retain</code> ä¸ä¼šåºåˆ—åŒ–ä½ çš„çŠ¶æ€ï¼Œå› æ­¤ä½ å¯ä»¥æŒä¹…åŒ–è¯¸å¦‚ lambda è¡¨è¾¾å¼ã€æµç¨‹ä»¥åŠä½å›¾ç­‰éš¾ä»¥åºåˆ—åŒ–çš„å¤§å‹å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>retain</code> æ¥ç®¡ç†åª’ä½“æ’­æ”¾å™¨ï¼ˆä¾‹å¦‚ ExoPlayerï¼‰ï¼Œä»¥ç¡®ä¿åª’ä½“æ’­æ”¾ä¸ä¼šå› é…ç½®æ›´æ”¹è€Œä¸­æ–­ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MediaPlayer</span><span class="hljs-params">()</span></span> {
	<span class="hljs-keyword">val</span> applicationContext = LocalContext.current.applicationContext
	<span class="hljs-keyword">val</span> exoPlayer = retain { ExoPlayer.Builder(applicationContext).apply { ... }.build() }
	...
}
</code></pre>
<p>æˆ‘ä»¬è¦æ„Ÿè°¢ AndroidDev ç¤¾åŒºï¼ˆç‰¹åˆ«æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fslackhq.github.io%2Fcircuit" target="_blank" title="https://slackhq.github.io/circuit" ref="nofollow noopener noreferrer">Circuit</a> å›¢é˜Ÿï¼‰ï¼Œä»–ä»¬å¯¹è¯¥åŠŸèƒ½çš„è®¾è®¡äº§ç”Ÿäº†å½±å“å¹¶åšå‡ºäº†è´¡çŒ®ã€‚</p>
<h3 data-id="heading-4">Material 1.4</h3>
<p>Material3 åº“çš„ 1.4.0 ç‰ˆæœ¬æ–°å¢äº†ä¸€äº›ç»„ä»¶å’Œå¢å¼ºåŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>TextField ç°åœ¨æä¾›äº†ä¸€ä¸ªåŸºäº TextFieldState çš„å®éªŒæ€§ç‰ˆæœ¬ï¼Œå®ƒæä¾›äº†ä¸€ç§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Ftext%2Fuser-input" target="_blank" title="https://developer.android.com/develop/ui/compose/text/user-input" ref="nofollow noopener noreferrer">æ›´å¼ºå¤§çš„</a> æ–¹æ³•æ¥ç®¡ç†æ–‡æœ¬çŠ¶æ€ã€‚æ­¤å¤–ï¼Œè¿˜æ–°å¢äº†å˜ä½“SecureTextField å’Œ OutlinedSecureTextFieldã€‚Material Text å¯ç»„åˆå…ƒç´ ç°åœ¨æ”¯æŒè‡ªåŠ¨è°ƒæ•´å¤§å°åŠŸèƒ½ï¼ˆautoSizeï¼‰ã€‚</p>
</li>
<li>
<p>è½®æ’­ç»„ä»¶ç°åœ¨æä¾›äº†ä¸€ä¸ªæ–°çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fmaterial3%2Fcarousel%2Fpackage-summary%23Horizo%25E2%2580%258B%25E2%2580%258BntalCenteredHeroCarousel(androidx.compose.material3.carousel.CarouselState%2Candroidx.compose.ui.Modifier%2Candroidx.compose.ui.unit.Dp%2Candroidx.compose.ui.unit.Dp%2Candroidx.compose.foundation.gestures.TargetedFlingBehavior%2Ckotlin.Boolean%2Candroidx.compose.ui.unit.Dp%2Candroidx.compose.ui.unit.Dp%2Candroidx.compose.foundation.layout.PaddingValues%2Ckotlin.Function2)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/material3/carousel/package-summary#Horizo%E2%80%8B%E2%80%8BntalCenteredHeroCarousel(androidx.compose.material3.carousel.CarouselState,androidx.compose.ui.Modifier,androidx.compose.ui.unit.Dp,androidx.compose.ui.unit.Dp,androidx.compose.foundation.gestures.TargetedFlingBehavior,kotlin.Boolean,androidx.compose.ui.unit.Dp,androidx.compose.ui.unit.Dp,androidx.compose.foundation.layout.PaddingValues,kotlin.Function2)" ref="nofollow noopener noreferrer">Horizoâ€‹â€‹ntalCenteredHeroCarousel</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fm3.material.io%2Fcomponents%2Fcarousel%2Fspecs" target="_blank" title="https://m3.material.io/components/carousel/specs" ref="nofollow noopener noreferrer">variant</a>ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fmaterial3%2Fpackage-summary%3F_gl%3D1*1h4dj5y*_up*MQ..*_ga*NDE1MzI0NzAwLjE3NjQ2MTM1MzU.*_ga_6HH9YJMN9M*czE3NjQ2MTM1MzQkbzEkZzAkdDE3NjQ2MTM1MzQkajYwJGwwJGgxODIyOTM4OTMy%23TimePicker(androidx.compose.material3.TimePickerState%2Candroidx.compose.ui.Modifier%2Candroidx.compose.material3.TimePickerColors%2Candroidx.compose.material3.TimePickerLayoutType)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/material3/package-summary?_gl=1*1h4dj5y*_up*MQ..*_ga*NDE1MzI0NzAwLjE3NjQ2MTM1MzU.*_ga_6HH9YJMN9M*czE3NjQ2MTM1MzQkbzEkZzAkdDE3NjQ2MTM1MzQkajYwJGwwJGgxODIyOTM4OTMy#TimePicker(androidx.compose.material3.TimePickerState,androidx.compose.ui.Modifier,androidx.compose.material3.TimePickerColors,androidx.compose.material3.TimePickerLayoutType)" ref="nofollow noopener noreferrer">TimePicker</a> ç°åœ¨æ”¯æŒåœ¨é€‰æ‹©å™¨æ¨¡å¼å’Œè¾“å…¥æ¨¡å¼ä¹‹é—´åˆ‡æ¢ã€‚</p>
</li>
<li>
<p>å‚ç›´æ‹–æ‹½æ‰‹æŸ„ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fmaterial3%2Fpackage-summary%23VerticalDragHandle(androidx.compose.ui.Modifier%2Candroidx.compose.material3.DragHandleSizes%2Candroidx.compose.material3.DragHandleColors%2Candroidx.compose.material3.DragHandleShapes%2Candroidx.compose.foundation.interaction.MutableInteractionSource)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/material3/package-summary#VerticalDragHandle(androidx.compose.ui.Modifier,androidx.compose.material3.DragHandleSizes,androidx.compose.material3.DragHandleColors,androidx.compose.material3.DragHandleShapes,androidx.compose.foundation.interaction.MutableInteractionSource)" ref="nofollow noopener noreferrer">VerticalDragHandle</a>ï¼‰å¸®åŠ©ç”¨æˆ·æ›´æ”¹è‡ªé€‚åº”ç©ºæ ¼çš„å¤§å°æˆ–è€…ä½ç½®ã€‚</p>
</li>
</ul>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eea5e8b96de44d99fcd33b4309f5e85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=GeOkBcoOyVEVUZ0MwMeenG9t41I%3D" alt="ezgif-2a8018b680a34aa3.gif" loading="lazy"/></p>
<p>è¯·æ³¨æ„ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fm3.material.io%2Fblog%2Fbuilding-with-m3-expressive" target="_blank" title="https://m3.material.io/blog/building-with-m3-expressive" ref="nofollow noopener noreferrer">Material 3 Expressive</a> API ä»åœ¨ Material 3 åº“çš„ alpha ç‰ˆæœ¬ä¸­æŒç»­å¼€å‘ã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·è§‚çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fembed%2Ft9rrsqfB2tM" target="_blank" title="https://www.youtube.com/embed/t9rrsqfB2tM" ref="nofollow noopener noreferrer">æœ€è¿‘çš„æ¼”è®²</a>ã€‚</p>
<h2 data-id="heading-5">æ–°çš„åŠ¨ç”»åŠŸèƒ½</h2>
<p>æˆ‘ä»¬æŒç»­æ‰©å±•åŠ¨ç”» APIï¼ŒåŒ…æ‹¬å¯¹è‡ªå®šä¹‰å…±äº«å…ƒç´ åŠ¨ç”»çš„æ›´æ–°ã€‚</p>
<h3 data-id="heading-6">åŠ¨æ€å…±äº«å…ƒç´ </h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>sharedElement()</code> å’Œ <code>sharedBounds()</code> åŠ¨ç”»ä¼šåœ¨ç›®æ ‡çŠ¶æ€ä¸­æ‰¾åˆ°åŒ¹é…çš„é”®æ—¶å°è¯•ä¸ºå¸ƒå±€æ›´æ”¹æ·»åŠ åŠ¨ç”»æ•ˆæœã€‚ä½†æ˜¯ï¼Œä½ å¯èƒ½å¸Œæœ›æ ¹æ®æŸäº›æ¡ä»¶ï¼ˆä¾‹å¦‚å¯¼èˆªæ–¹å‘æˆ–å½“å‰ UI çŠ¶æ€ï¼‰åŠ¨æ€ç¦ç”¨â€‹â€‹æ­¤åŠ¨ç”»ã€‚</p>
<p>è¦æ§åˆ¶å…±äº«å…ƒç´ è¿‡æ¸¡æ˜¯å¦å‘ç”Ÿï¼Œä½ ç°åœ¨å¯ä»¥è‡ªå®šä¹‰ä¼ é€’ç»™ <code>rememberSharedContentState()</code> çš„ <code>SharedContentConfig</code>ã€‚<code>isEnabled</code> å±æ€§å†³å®šå…±äº«å…ƒç´ æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">SharedTransitionLayout {
	<span class="hljs-keyword">val</span> transition = updateTransition(currentState)
	transition.AnimatedContent { targetState -&gt;
		<span class="hljs-comment">// Create the configuration that depends on state changing.</span>
		<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">animationConfig</span><span class="hljs-params">()</span></span> : SharedTransitionScope.SharedContentConfig {
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">object</span> : SharedTransitionScope.SharedContentConfig {
				<span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> SharedTransitionScope.SharedContentState.isEnabled: <span class="hljs-built_in">Boolean</span>
						<span class="hljs-keyword">get</span>() =
							<span class="hljs-comment">// determine whether to perform a shared element transition</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }
}
</code></pre>
<p>æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Fanimation%2Fshared-elements%2Fcustomize%23dynamic-enable-disable" target="_blank" title="https://developer.android.com/develop/ui/compose/animation/shared-elements/customize#dynamic-enable-disable" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-7">Modifier.skipToLookaheadPosition()</h3>
<p>æ­¤ç‰ˆæœ¬æ–°å¢äº†ä¸€ä¸ªä¿®é¥°ç¬¦ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2FSharedTransitionScope%3Fhl%3Den%23(androidx.compose.ui.Modifier).skipToLookaheadPosition(kotlin.Function0)" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/SharedTransitionScope?hl=en#(androidx.compose.ui.Modifier).skipToLookaheadPosition(kotlin.Function0)" ref="nofollow noopener noreferrer">Modifier.skipToLookaheadPosition()</a>ï¼Œç”¨äºåœ¨æ‰§è¡Œå…±äº«å…ƒç´ åŠ¨ç”»æ—¶ä¿æŒå¯ç»„åˆå…ƒç´ çš„æœ€ç»ˆä½ç½®ã€‚è¿™ä½¿å¾—å¯ä»¥æ‰§è¡Œç±»ä¼¼â€œæ­ç¤ºâ€ç±»å‹çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œä¾‹å¦‚ Androidify ç¤ºä¾‹ä¸­ç›¸æœºçš„æ¸è¿›å¼æ­ç¤ºæ•ˆæœã€‚æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fembed%2F0moEXBqNDZI" target="_blank" title="https://www.youtube.com/embed/0moEXBqNDZI" ref="nofollow noopener noreferrer">æ­¤å¤„çš„è§†é¢‘æç¤º</a>ã€‚</p>
<h3 data-id="heading-8">å…±äº«å…ƒç´ è¿‡æ¸¡ä¸­çš„åˆå§‹é€Ÿåº¦</h3>
<p>æ­¤ç‰ˆæœ¬æ–°å¢äº†ä¸€ä¸ªå…±äº«å…ƒç´ è¿‡æ¸¡ APIï¼š<code>prepareTransitionWithInitialVelocity</code>ï¼Œå…è®¸ä½ å°†åˆå§‹é€Ÿåº¦ï¼ˆä¾‹å¦‚æ¥è‡ªæ‰‹åŠ¿ï¼‰ä¼ é€’ç»™å…±äº«å…ƒç´ è¿‡æ¸¡ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Modifier.fillMaxSize()
    .draggable2D(
			rememberDraggable2DState{offset+=it},
			onDragStopped = { velocity -&gt;
				<span class="hljs-comment">// Set up the initial velocity for the upcoming shared element</span>
				<span class="hljs-comment">// transition.</span>
	          sharedContentStateForDraggableCat?.prepareTransitionWithInitialVelocity(velocity)
				showDetails = <span class="hljs-literal">false</span>
			},
)
</code></pre>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f1f23ef2044469ca053b968d32c1ecc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=Y0BC4RE1cGc9Y5CNAanCs3ponj8%3D" alt="4.gif" loading="lazy"/></p>
<h3 data-id="heading-9">é¢çº±è¿‡æ¸¡åŠ¨ç”»</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2FEnterTransition" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/EnterTransition" ref="nofollow noopener noreferrer">EnterTransition</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2FExitTransition%3F_gl%3D1*1m00og2*_up*MQ..*_ga*MjU3NDMyNzc5LjE3NjQ2MTE4NjM.*_ga_6HH9YJMN9M*czE3NjQ2MTE4NjMkbzEkZzAkdDE3NjQ2MTE4NjMkajYwJGwwJGgxMTk2NzM1MDk0" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/ExitTransition?_gl=1*1m00og2*_up*MQ..*_ga*MjU3NDMyNzc5LjE3NjQ2MTE4NjM.*_ga_6HH9YJMN9M*czE3NjQ2MTE4NjMkbzEkZzAkdDE3NjQ2MTE4NjMkajYwJGwwJGgxMTk2NzM1MDk0" ref="nofollow noopener noreferrer">ExitTransition</a> å®šä¹‰äº†åŠ¨ç”»çš„æ‰§è¡Œæ–¹å¼ã€‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2Fpackage-summary%23AnimatedVisibility" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/package-summary#AnimatedVisibility" ref="nofollow noopener noreferrer">AnimatedVisibility</a>/ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fanimation%2Fpackage-summary%23AnimatedContent" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/animation/package-summary#AnimatedContent" ref="nofollow noopener noreferrer">AnimatedContent</a> å¯ç»„åˆå…ƒç´ å‡ºç°æˆ–æ¶ˆå¤±ã€‚æ–°å¢çš„å®éªŒæ€§é®ç½©é€‰é¡¹å…è®¸ä½ æŒ‡å®šé¢œè‰²æ¥é®ç›–æˆ–ä¿®é¥°å†…å®¹ï¼›ä¾‹å¦‚ï¼Œåœ¨å†…å®¹ä¸Šæ–¹æ·¡å…¥/æ·¡å‡ºåŠé€æ˜é»‘è‰²å›¾å±‚ï¼š</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7010592c7694f94ace103f517807a4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766156915&amp;x-signature=Id3%2B7nkawXiJ%2BmuBZEqlhwNH8ko%3D" alt="5.gif" loading="lazy"/></p>
<pre><code class="hljs language-kotlin" lang="kotlin">AnimatedContent(
Â Â Â Â targetState = page,
Â Â Â Â modifier = Modifier.fillMaxSize().weight(<span class="hljs-number">1f</span>),
Â Â Â Â transitionSpec = {
		 <span class="hljs-keyword">if</span> (targetState &gt; initialState) {
Â Â Â Â Â Â Â Â Â Â Â Â (slideInHorizontally { it } togetherWith
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â slideOutHorizontally { -it / <span class="hljs-number">2</span> } + veilOut(targetColor = veilColor))
Â Â Â Â Â Â Â Â } <span class="hljs-keyword">else</span> {
Â Â Â Â Â Â Â Â Â Â Â Â slideInHorizontally { -it / <span class="hljs-number">2</span> } +
						unveilIn(initialColor = veilColor) togetherWith slideOutHorizontally { it }
Â Â Â Â Â Â Â Â }
Â Â Â Â },
) { targetPage -&gt;
Â Â Â Â ...
}
</code></pre>
<h2 data-id="heading-10">å³å°†å‘ç”Ÿçš„å˜æ›´</h2>
<h3 data-id="heading-11">å¼ƒç”¨ Modifier.onFirstVisible</h3>
<p>Compose 1.9 å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fui%2FModifier%23%2528androidx.compose.ui.Modifier%2529.onVisibilityChanged%2528kotlin.Long%2Ckotlin.Float%2Candroidx.compose.ui.layout.LayoutBoundsHolder%2Ckotlin.Function1%2529" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier#%28androidx.compose.ui.Modifier%29.onVisibilityChanged%28kotlin.Long,kotlin.Float,androidx.compose.ui.layout.LayoutBoundsHolder,kotlin.Function1%29" ref="nofollow noopener noreferrer">Modifier.onVisibilityChanged</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fui%2FModifier%23%2528androidx.compose.ui.Modifier%2529.onFirstVisible%2528kotlin.Long%2Ckotlin.Float%2Candroidx.compose.ui.layout.LayoutBoundsHolder%2Ckotlin.Function0%2529" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/ui/Modifier#%28androidx.compose.ui.Modifier%29.onFirstVisible%28kotlin.Long,kotlin.Float,androidx.compose.ui.layout.LayoutBoundsHolder,kotlin.Function0%29" ref="nofollow noopener noreferrer">Modifier.onFirstVisible</a>ã€‚åœ¨å®¡é˜…äº†ä½ çš„åé¦ˆåï¼Œæˆ‘ä»¬å‘ç° <code>Modifier.onFirstVisible</code> çš„çº¦å®šæ— æ³•ç¡®å®šæ€§åœ°æ‰§è¡Œï¼›å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æ— æ³•ç¡®å®šæŸä¸ªå…ƒç´ ä½•æ—¶é¦–æ¬¡å¯è§ã€‚ä¾‹å¦‚ï¼ŒLazy å¸ƒå±€å¯èƒ½ä¼šé‡Šæ”¾æ»šåŠ¨å‡ºè§†å£çš„å…ƒç´ ï¼Œç„¶ååœ¨å®ƒä»¬æ»šåŠ¨å›è§†å£æ—¶é‡æ–°ç»„åˆå®ƒä»¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>onFirstVisible</code> å›è°ƒä¼šå†æ¬¡è§¦å‘ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªæ–°ç»„åˆçš„å…ƒç´ ã€‚å½“å¯¼èˆªå›ä¹‹å‰è®¿é—®è¿‡çš„åŒ…å« <code>onFirstVisible</code> çš„å±å¹•æ—¶ï¼Œä¹Ÿä¼šå‡ºç°ç±»ä¼¼çš„è¡Œä¸ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬å†³å®šåœ¨ä¸‹ä¸€ä¸ª Compose ç‰ˆæœ¬ï¼ˆ1.11ï¼‰ä¸­å¼ƒç”¨æ­¤ä¿®é¥°ç¬¦ï¼Œå¹¶å»ºè®®è¿ç§»åˆ° <code>onVisibilityChanged</code>ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Flayouts%2Fvisibility-modifiers" target="_blank" title="https://developer.android.com/develop/ui/compose/layouts/visibility-modifiers" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>ã€‚</p>
<h3 data-id="heading-12">æµ‹è¯•ä¸­çš„åç¨‹åˆ†å‘</h3>
<p>æˆ‘ä»¬è®¡åˆ’æ›´æ”¹æµ‹è¯•ä¸­çš„åç¨‹åˆ†å‘ï¼Œä»¥æ”¹å–„æµ‹è¯•çš„ç¨³å®šæ€§å¹¶æ•è·æ›´å¤šé—®é¢˜ã€‚ç›®å‰ï¼Œæµ‹è¯•ä½¿ç”¨çš„æ˜¯ UnconfinedTestDispatcherï¼Œè¿™ä¸ç”Ÿäº§ç¯å¢ƒçš„è¡Œä¸ºæœ‰æ‰€ä¸åŒï¼›ä¾‹å¦‚ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fcompose%2Fside-effects" target="_blank" title="https://developer.android.com/develop/ui/compose/side-effects" ref="nofollow noopener noreferrer">å‰¯ä½œç”¨</a>å¯èƒ½ä¼šç«‹å³è¿è¡Œï¼Œè€Œä¸æ˜¯è¢«æ”¾å…¥é˜Ÿåˆ—ã€‚åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è®¡åˆ’å¼•å…¥ä¸€ä¸ªæ–°çš„ APIï¼Œé»˜è®¤ä½¿ç”¨ StandardTestDispatcherï¼Œä»¥åŒ¹é…ç”Ÿäº§ç¯å¢ƒçš„è¡Œä¸ºã€‚ä½ ç°åœ¨å¯ä»¥åœ¨ 1.10 ç‰ˆæœ¬ä¸­å°è¯•æ–°çš„è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@get:Rule</span> <span class="hljs-comment">// also createAndroidComposeRule, createEmptyComposeRule</span>
<span class="hljs-keyword">val</span> rule = createComposeRule(effectContext = StandardTestDispatcher())
</code></pre>
<p>ä½¿ç”¨ StandardTestDispatcher ä¼šå°†ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ï¼Œå› æ­¤ä½ å¿…é¡»ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œä¾‹å¦‚ composeTestRule.waitForIdle() æˆ– composeTestRule.runOnIdle()ã€‚å¦‚æœä½ çš„æµ‹è¯•ä½¿ç”¨äº† runTestï¼Œåˆ™å¿…é¡»ç¡®ä¿ runTest å’Œä½ çš„ Compose è§„åˆ™å…±äº«åŒä¸€ä¸ª StandardTestDispatcher å®ä¾‹ä»¥è¿›è¡ŒåŒæ­¥ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. Create a SINGLE dispatcher instance</span>
valtestDispatcher = StandardTestDispatcher()

<span class="hljs-comment">// 2. Pass it to your Compose rule</span>
<span class="hljs-meta">@get:Rule</span>
valcomposeRule = createComposeRule(effectContext = testDispatcher)

<span class="hljs-meta">@Test</span>
<span class="hljs-comment">// 3. Pass the *SAME INSTANCE* to runTest</span>
funmyTest() = runTest(testDispatcher) {
	composeRule.setContent{<span class="hljs-comment">/* ... */</span>}
}
</code></pre>
<h2 data-id="heading-13">å·¥å…·</h2>
<p>ä¼˜ç§€çš„ API éœ€è¦ä¼˜ç§€çš„å·¥å…·ï¼Œ<a href="https://link.juejin.cn?target=http%3A%2F%2Fd.android.com%2Fstudio" target="_blank" title="http://d.android.com/studio" ref="nofollow noopener noreferrer">Android Studio</a> ä¸º Compose å¼€å‘è€…æ–°å¢äº†å¤šé¡¹åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23iterate-ui-agent" target="_blank" title="https://developer.android.com/studio/preview/features#iterate-ui-agent" ref="nofollow noopener noreferrer">å˜æ¢ UI</a>ï¼šå³é”®å•å‡» @Previewï¼Œé€‰æ‹©â€œå˜æ¢ UIâ€ï¼Œç„¶åç”¨è‡ªç„¶è¯­è¨€æè¿°æ›´æ”¹ï¼Œå³å¯è¿­ä»£ä½ çš„è®¾è®¡ã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23ui-tools-setup" target="_blank" title="https://developer.android.com/studio/preview/features#ui-tools-setup" ref="nofollow noopener noreferrer">ç”Ÿæˆ @Preview</a>ï¼šå³é”®å•å‡»å¯ç»„åˆå…ƒç´ ï¼Œç„¶åé€‰æ‹© Gemini &gt; ç”Ÿæˆ [å¯ç»„åˆå…ƒç´ åç§°] é¢„è§ˆã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23material-symbols-support" target="_blank" title="https://developer.android.com/studio/preview/features#material-symbols-support" ref="nofollow noopener noreferrer">è‡ªå®šä¹‰ Material Symbols</a>ï¼šçŸ¢é‡èµ„æºå‘å¯¼æ–°å¢äº†å¯¹å›¾æ ‡å˜ä½“çš„æ”¯æŒã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23screen-to-code-agent" target="_blank" title="https://developer.android.com/studio/preview/features#screen-to-code-agent" ref="nofollow noopener noreferrer">ä»å±å¹•æˆªå›¾ç”Ÿæˆä»£ç </a> æˆ–è®© Gemini <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23match-ui-agent" target="_blank" title="https://developer.android.com/studio/preview/features#match-ui-agent" ref="nofollow noopener noreferrer">å°†ä½ ç°æœ‰çš„ UI ä¸ç›®æ ‡å›¾åƒåŒ¹é…</a>ã€‚è¿™å¯ä»¥ä¸è¿œç¨‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23remote-mcp" target="_blank" title="https://developer.android.com/studio/preview/features#remote-mcp" ref="nofollow noopener noreferrer">MCP æ”¯æŒ</a> ç»“åˆä½¿ç”¨ï¼Œä¾‹å¦‚è¿æ¥åˆ° Figma æ–‡ä»¶å¹¶ä»è®¾è®¡ç”Ÿæˆ Compose UIã€‚</p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%2Fpreview%2Ffeatures%23find-and-fix-ui-quality-issues" target="_blank" title="https://developer.android.com/studio/preview/features#find-and-fix-ui-quality-issues" ref="nofollow noopener noreferrer">ä¿®å¤ UI è´¨é‡é—®é¢˜</a> ä¼šå®¡æ ¸ä½ çš„ UI æ˜¯å¦å­˜åœ¨å¸¸è§é—®é¢˜ï¼Œä¾‹å¦‚è¾…åŠ©åŠŸèƒ½é—®é¢˜ï¼Œç„¶åæå‡ºä¿®å¤æ–¹æ¡ˆã€‚</p>
</li>
</ul>
<p>è¦æŸ¥çœ‹è¿™äº›å·¥å…·çš„å®é™…åº”ç”¨ï¼Œè¯·è§‚çœ‹æ­¤ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fembed%2FjTlW8JeCClA" target="_blank" title="https://www.youtube.com/embed/jTlW8JeCClA" ref="nofollow noopener noreferrer">æœ€æ–°æ¼”ç¤º</a>ã€‚</p>
<h2 data-id="heading-14">å°½æƒ…åˆ›ä½œ</h2>
<p>æˆ‘ä»¬æŒç»­æŠ•å…¥èµ„æºå¼€å‘ Jetpack Composeï¼Œä¸ºä½ æä¾›åˆ›å»ºç¾è§‚ã€ä¸°å¯Œçš„ç”¨æˆ·ç•Œé¢æ‰€éœ€çš„ API å’Œå·¥å…·ã€‚æˆ‘ä»¬é‡è§†ä½ çš„åé¦ˆï¼Œè¯·åœ¨æˆ‘ä»¬çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fissuetracker.google.com%2Fissues%2Fnew%3Fcomponent%3D612128" target="_blank" title="https://issuetracker.google.com/issues/new?component=612128" ref="nofollow noopener noreferrer">é—®é¢˜è·Ÿè¸ªå™¨</a>ä¸­åˆ†äº«ä½ å¯¹è¿™äº›æ›´æ”¹çš„åé¦ˆï¼Œæˆ–ä½ å¸Œæœ›çœ‹åˆ°çš„åç»­åŠŸèƒ½ã€‚</p>
<blockquote>
<p>æ¬¢è¿æœç´¢å¹¶å…³æ³¨ <em>å…¬ä¼—å·<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fqrcode%3Fscene%3D10000004%26size%3D512%26__biz%3DMzU1MDg0NDczNA%3D%3D%26mid%3D2247484417%26idx%3D1%26sn%3D60c15f0d3c4be75e37748c2472a74102" target="_blank" title="https://mp.weixin.qq.com/mp/qrcode?scene=10000004&amp;size=512&amp;__biz=MzU1MDg0NDczNA==&amp;mid=2247484417&amp;idx=1&amp;sn=60c15f0d3c4be75e37748c2472a74102" ref="nofollow noopener noreferrer">ã€Œç¨€æœ‰çŒ¿è¯‰ã€</a></em> è·å–æ›´å¤šçš„ä¼˜è´¨æ–‡ç« ï¼</p>
<p>ä¿æŠ¤åŸåˆ›ï¼Œè¯·å‹¿è½¬è½½ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android CameraXé€‚é…Android15]]></title>    <link>https://juejin.cn/post/7582786655473664043</link>    <guid>https://juejin.cn/post/7582786655473664043</guid>    <pubDate>2025-12-12T15:24:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582786655473664043" data-draft-id="7582846276505616422" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android CameraXé€‚é…Android15"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-12T15:24:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Androidå°æ¸£æ¸£"/> <meta itemprop="url" content="https://juejin.cn/user/2119514151720222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android CameraXé€‚é…Android15
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2119514151720222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Androidå°æ¸£æ¸£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:24:27.000Z" title="Fri Dec 12 2025 15:24:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Android CameraXé€‚é…Android15</h2>
<h2 data-id="heading-1">1.å‰è¨€ï¼š</h2>
<p>æœ€è¿‘10æœˆåˆæŠŠå…¬å¸çš„é¡¹ç›®å‡çº§åˆ°äº†Android15ï¼Œä½†æ˜¯å‘ç°äº†å¾ˆå¤šé—®é¢˜ï¼Œè¿™è¿™å…¶ä¸­æœ€æ¶å¿ƒçš„æ˜¯Android15EdgeToEdgeé€‚é… ï¼Œå› ä¸ºè¿™ä¸ªæ‰€æœ‰ç•Œé¢éƒ½è¦ä¿®æ”¹ï¼Œä¹‹å‰çš„å¯¼èˆªæ å’ŒçŠ¶æ€æ éƒ½å¤±æ•ˆäº†ï¼Œä»Šå¤©æ˜¯è®²è§£CameraXå‡çº§15çš„è¿‡ç¨‹ï¼Œç›´æ¥ä¸Šä»£ç ã€‚</p>
<h2 data-id="heading-2">2.edge-to-edgeå…¨é¢å±ï¼š</h2>
<p>åœ¨Android 15è®¾å¤‡ä¸Šï¼Œè‹¥åº”ç”¨ç¨‹åºçš„targetSDKç‰ˆæœ¬å¤§äºç­‰äºAndroid 15ï¼Œåˆ™å¿…é¡» <strong>å¼ºåˆ¶è¿›è¡Œå…¨å±å±•ç¤º</strong>ï¼ŒåŒæ—¶çŠ¶æ€æ å’Œå¯¼èˆªæ å°†é€æ˜åŒ–å¤„ç†ã€‚å¯¹äºtargetSDKç‰ˆæœ¬å°äºAndroid 15çš„åº”ç”¨ï¼Œå…¶é»˜è®¤ä¸ä¼šå¯ç”¨è¾¹åˆ°è¾¹ç‰¹æ€§ï¼Œå³ç”¨æˆ·å±‚çš„Viewä»ä¼šä¿æŒåœ¨çŠ¶æ€æ å’Œå¯¼èˆªæ ä¹‹é—´ã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨Android 15å¹³å°ä¸Šï¼Œå…ˆå‰ç”¨äºè®¾ç½®ç³»ç»Ÿæ é¢œè‰²çš„APIï¼Œå¦‚setNavigationBarColorç­‰ï¼Œå°†è¢«å¼ƒç”¨ã€‚å³ä¾¿ä½¿ç”¨è¿™äº›æ–¹æ³•è¿›è¡Œè®¾ç½®ï¼Œç³»ç»Ÿä¹Ÿå°†é»˜è®¤æä¾›æ²‰æµ¸å¼ä½“éªŒã€‚</p>
<p>ç®€é€‚é…ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"> Â  Â override fun <span class="hljs-built_in">onCreate</span>(savedInstanceState: Bundle?) {
 Â  Â  Â  Â super<span class="hljs-selector-class">.onCreate</span>(savedInstanceState)
 Â  Â  Â  Â <span class="hljs-built_in">enableEdgeToEdge</span>()
 Â  Â  Â  Â <span class="hljs-built_in">setContentView</span>(R.layout.activity_main)
 Â  Â  Â  Â <span class="hljs-built_in">initPermission</span>()
 Â  Â  Â  Â <span class="hljs-built_in">initView</span>()
 Â  Â  Â  Â val window = window
 Â  Â  Â  Â WindowCompat<span class="hljs-selector-class">.setDecorFitsSystemWindows</span>(window, false)
 Â  Â  Â  Â ViewCompat<span class="hljs-selector-class">.setOnApplyWindowInsetsListener</span>(rootView) { v, insets -&gt;
 Â  Â  Â  Â  Â  Â val stateBars = insets<span class="hljs-selector-class">.getInsets</span>(WindowInsetsCompat.Type.statusBars())
 Â  Â  Â  Â  Â  Â v<span class="hljs-selector-class">.setPadding</span>(stateBars.left, <span class="hljs-number">0</span>, stateBars.right, <span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â insets
 Â  Â  Â   }
 Â   }
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e94e5160399e4b048e22f3bf1434e10e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=IDwhImZYogWR9K4SDuzVh%2BBMjqs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">3.å‡çº§åæŠ¥é”™ï¼š</h2>
<p>æ‰“å¼€ç³»ç»Ÿæ‹ç…§ç•Œé¢åè¿”å›ï¼Œå°±ç›´æ¥å´©æºƒäº†ï¼Œå´©æºƒä¿¡æ¯å¦‚ä¸‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e8aa1b11515491ea8b000b27e3c486a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=6gLo2%2FTnCcWL7eArGV0Y6yC4COs%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-php" lang="php"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Process: com.example.cameraxdemo, PID: <span class="hljs-number">17531</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â java.lang.<span class="hljs-built_in">RuntimeException</span>: Failure delivering result ResultInfo{who=<span class="hljs-literal">null</span>, request=<span class="hljs-number">102</span>, result=-<span class="hljs-number">1</span>, data=<span class="hljs-literal">null</span>} to activity {com.example.cameraxdemo/com.example.cameraxdemo.activity.CameraActivity}: java.lang.IllegalArgumentException: Mutation of _data is not allowed.
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">deliverResults</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">6371</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">handleSendResult</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">6410</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.ActivityResultItem.<span class="hljs-title function_ invoke__">execute</span>(ActivityResultItem.<span class="hljs-attr">java</span>:<span class="hljs-number">69</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.ActivityTransactionItem.<span class="hljs-title function_ invoke__">execute</span>(ActivityTransactionItem.<span class="hljs-attr">java</span>:<span class="hljs-number">60</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">executeNonLifecycleItem</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">179</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">executeTransactionItems</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">114</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">execute</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">86</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread<span class="hljs-variable">$H</span>.<span class="hljs-title function_ invoke__">handleMessage</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">2914</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Handler.<span class="hljs-title function_ invoke__">dispatchMessage</span>(Handler.<span class="hljs-attr">java</span>:<span class="hljs-number">112</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Looper.<span class="hljs-title function_ invoke__">loopOnce</span>(Looper.<span class="hljs-attr">java</span>:<span class="hljs-number">288</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Looper.<span class="hljs-title function_ invoke__">loop</span>(Looper.<span class="hljs-attr">java</span>:<span class="hljs-number">393</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">main</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">9564</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at java.lang.reflect.Method.<span class="hljs-title function_ invoke__">invoke</span>(Native Method)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.android.internal.os.RuntimeInit<span class="hljs-variable">$MethodAndArgsCaller</span>.<span class="hljs-title function_ invoke__">run</span>(RuntimeInit.<span class="hljs-attr">java</span>:<span class="hljs-number">600</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.android.internal.os.ZygoteInit.<span class="hljs-title function_ invoke__">main</span>(ZygoteInit.<span class="hljs-attr">java</span>:<span class="hljs-number">1010</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Caused by: java.lang.IllegalArgumentException: Mutation of _data is not allowed.
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.database.DatabaseUtils.<span class="hljs-title function_ invoke__">readExceptionFromParcel</span>(DatabaseUtils.<span class="hljs-attr">java</span>:<span class="hljs-number">185</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.database.DatabaseUtils.<span class="hljs-title function_ invoke__">readExceptionFromParcel</span>(DatabaseUtils.<span class="hljs-attr">java</span>:<span class="hljs-number">155</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.content.ContentProviderProxy.<span class="hljs-title function_ invoke__">insert</span>(ContentProviderNative.<span class="hljs-attr">java</span>:<span class="hljs-number">589</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.content.ContentResolver.<span class="hljs-title function_ invoke__">insert</span>(ContentResolver.<span class="hljs-attr">java</span>:<span class="hljs-number">2241</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.content.ContentResolver.<span class="hljs-title function_ invoke__">insert</span>(ContentResolver.<span class="hljs-attr">java</span>:<span class="hljs-number">2197</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.example.cameraxdemo.utils.FileUtil.<span class="hljs-title function_ invoke__">getHeadJpgFile</span>(FileUtil.<span class="hljs-attr">java</span>:<span class="hljs-number">1427</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.example.cameraxdemo.activity.CameraActivity.<span class="hljs-title function_ invoke__">workCropFun</span>(CameraActivity.<span class="hljs-attr">kt</span>:<span class="hljs-number">100</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.example.cameraxdemo.activity.CameraActivity.<span class="hljs-title function_ invoke__">onActivityResult</span>(CameraActivity.<span class="hljs-attr">kt</span>:<span class="hljs-number">139</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.Activity.<span class="hljs-title function_ invoke__">onActivityResult</span>(Activity.<span class="hljs-attr">java</span>:<span class="hljs-number">7666</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.Activity.<span class="hljs-title function_ invoke__">internalDispatchActivityResult</span>(Activity.<span class="hljs-attr">java</span>:<span class="hljs-number">9588</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.Activity.<span class="hljs-title function_ invoke__">dispatchActivityResult</span>(Activity.<span class="hljs-attr">java</span>:<span class="hljs-number">9565</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">deliverResults</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">6360</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">handleSendResult</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">6410</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.ActivityResultItem.<span class="hljs-title function_ invoke__">execute</span>(ActivityResultItem.<span class="hljs-attr">java</span>:<span class="hljs-number">69</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.ActivityTransactionItem.<span class="hljs-title function_ invoke__">execute</span>(ActivityTransactionItem.<span class="hljs-attr">java</span>:<span class="hljs-number">60</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">executeNonLifecycleItem</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">179</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">executeTransactionItems</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">114</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.servertransaction.TransactionExecutor.<span class="hljs-title function_ invoke__">execute</span>(TransactionExecutor.<span class="hljs-attr">java</span>:<span class="hljs-number">86</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread<span class="hljs-variable">$H</span>.<span class="hljs-title function_ invoke__">handleMessage</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">2914</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Handler.<span class="hljs-title function_ invoke__">dispatchMessage</span>(Handler.<span class="hljs-attr">java</span>:<span class="hljs-number">112</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Looper.<span class="hljs-title function_ invoke__">loopOnce</span>(Looper.<span class="hljs-attr">java</span>:<span class="hljs-number">288</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.os.Looper.<span class="hljs-title function_ invoke__">loop</span>(Looper.<span class="hljs-attr">java</span>:<span class="hljs-number">393</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at android.app.ActivityThread.<span class="hljs-title function_ invoke__">main</span>(ActivityThread.<span class="hljs-attr">java</span>:<span class="hljs-number">9564</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at java.lang.reflect.Method.<span class="hljs-title function_ invoke__">invoke</span>(Native Method) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.android.internal.os.RuntimeInit<span class="hljs-variable">$MethodAndArgsCaller</span>.<span class="hljs-title function_ invoke__">run</span>(RuntimeInit.<span class="hljs-attr">java</span>:<span class="hljs-number">600</span>) 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â       at com.android.internal.os.ZygoteInit.<span class="hljs-title function_ invoke__">main</span>(ZygoteInit.<span class="hljs-attr">java</span>:<span class="hljs-number">1010</span>) 
</code></pre>
<h2 data-id="heading-4">4.æŠ¥é”™çš„æ ¸å¿ƒä»£ç ï¼š</h2>
<pre><code class="hljs language-ini" lang="ini"> Â  Â public static Object getHeadJpgFile() {
 Â  Â  Â  Â String <span class="hljs-attr">fileName</span> = System.currentTimeMillis() + FileManager.JPG_SUFFIX<span class="hljs-comment">;</span>
 Â  Â  Â  Â String <span class="hljs-attr">headPath</span> = FileManager.getAvatarPath(fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â File imgFile<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â // é€šè¿‡ MediaStore API æ’å…¥file ä¸ºäº†æ‹¿åˆ°ç³»ç»Ÿè£å‰ªè¦ä¿å­˜åˆ°çš„uriï¼ˆå› ä¸ºAppæ²¡æœ‰æƒé™ä¸èƒ½è®¿é—®å…¬å…±å­˜å‚¨ç©ºé—´ï¼Œéœ€è¦é€šè¿‡ MediaStore APIæ¥æ“ä½œï¼‰
 Â  Â  Â  Â  Â  Â ContentValues <span class="hljs-attr">values</span> = new ContentValues()<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.DATA, imgFile.getAbsolutePath())<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg")<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â return CameraApp.Companion.getMInstance().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)<span class="hljs-comment">;</span>
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â return imgFile<span class="hljs-comment">;</span>
 Â   }
</code></pre>
<h2 data-id="heading-5">5.æŠ¥é”™åŸå› åˆ†æï¼š</h2>
<p>è¯¥é”™è¯¯çš„æ ¸å¿ƒåŸå› æ˜¯<strong>å°è¯•ä¿®æ”¹ Android ç³»ç»Ÿä¸­å—ä¿æŠ¤çš„ <code>_data</code> å­—æ®µ</strong>ã€‚<code>_data</code> æ˜¯åª’ä½“åº“ï¼ˆMediaStoreï¼‰ä¸­å­˜å‚¨æ–‡ä»¶è·¯å¾„çš„å­—æ®µï¼ŒAndroid ä» API 29ï¼ˆAndroid 10ï¼‰å¼€å§‹é™åˆ¶ç›´æ¥ä¿®æ”¹è¯¥å­—æ®µï¼Œå¼ºåˆ¶è¦æ±‚ä½¿ç”¨ MediaStore çš„è§„èŒƒ API è¿›è¡Œæ–‡ä»¶æ“ä½œï¼Œç¦æ­¢é€šè¿‡ ContentResolver ç›´æ¥æ’å…¥æˆ–ä¿®æ”¹ <code>_data</code> å­—æ®µï¼Œå¦åˆ™ä¼šæŠ›å‡º <code>IllegalArgumentException: Mutation of _data is not allowed</code> å¼‚å¸¸ã€‚</p>
<p>ä»æŠ¥é”™å †æ ˆçœ‹ï¼Œé—®é¢˜å‡ºç°åœ¨ <code>FileUtil.getHeadJpgFile()</code> æ–¹æ³•ä¸­é€šè¿‡ <code>ContentResolver.insert()</code> æ“ä½œåª’ä½“åº“æ—¶ï¼Œè¯•å›¾è®¾ç½® <code>_data</code> å­—æ®µçš„å€¼ï¼Œè¿åäº†ç³»ç»Ÿé™åˆ¶ã€‚</p>
<h2 data-id="heading-6">6.è§£å†³æ–¹æ³•ï¼š</h2>
<h3 data-id="heading-7">6.1 ç›´æ¥å»æ‰æ­¤å±æ€§è®¾ç½®ï¼š</h3>
<pre><code class="hljs language-ini" lang="ini"> Â  Â public static Object getHeadJpgFile() {
 Â  Â  Â  Â String <span class="hljs-attr">fileName</span> = System.currentTimeMillis() + FileManager.JPG_SUFFIX<span class="hljs-comment">;</span>
 Â  Â  Â  Â String <span class="hljs-attr">headPath</span> = FileManager.getAvatarPath(fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â File imgFile<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â // é€šè¿‡ MediaStore API æ’å…¥file ä¸ºäº†æ‹¿åˆ°ç³»ç»Ÿè£å‰ªè¦ä¿å­˜åˆ°çš„uriï¼ˆå› ä¸ºAppæ²¡æœ‰æƒé™ä¸èƒ½è®¿é—®å…¬å…±å­˜å‚¨ç©ºé—´ï¼Œéœ€è¦é€šè¿‡ MediaStore APIæ¥æ“ä½œï¼‰
 Â  Â  Â  Â  Â  Â ContentValues <span class="hljs-attr">values</span> = new ContentValues()<span class="hljs-comment">;</span>
// Â  Â  Â  Â  Â   values.put(MediaStore.Images.Media.DATA, imgFile.getAbsolutePath())<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg")<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â return CameraApp.Companion.getMInstance().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)<span class="hljs-comment">;</span>
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â return imgFile<span class="hljs-comment">;</span>
 Â   }
</code></pre>
<h3 data-id="heading-8">6.2 ä½¿ç”¨<code>MediaStore</code>çš„å…¶ä»–å±æ€§ï¼š</h3>
<p>RELATIVE_PATHã€DISPLAY_NAMEç­‰.</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â /**
 Â  Â  * è·å–jpgå›¾ç‰‡è¾“å‡ºè·¯å¾„
 Â  Â  *
 Â  Â  * @return è¾“å‡ºè·¯å¾„
 Â  Â  */
 Â  Â public static Object getHeadJpgFile() {
 Â  Â  Â  Â String <span class="hljs-attr">fileName</span> = System.currentTimeMillis() + FileManager.JPG_SUFFIX<span class="hljs-comment">;</span>
 Â  Â  Â  Â String <span class="hljs-attr">headPath</span> = FileManager.getAvatarPath(fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â File imgFile<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â // é€šè¿‡ MediaStore API æ’å…¥file ä¸ºäº†æ‹¿åˆ°ç³»ç»Ÿè£å‰ªè¦ä¿å­˜åˆ°çš„uriï¼ˆå› ä¸ºAppæ²¡æœ‰æƒé™ä¸èƒ½è®¿é—®å…¬å…±å­˜å‚¨ç©ºé—´ï¼Œéœ€è¦é€šè¿‡ MediaStore APIæ¥æ“ä½œï¼‰
 Â  Â  Â  Â  Â  Â ContentValues <span class="hljs-attr">values</span> = new ContentValues()<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â //æ–¹å¼1å»æ‰Media.DATA
 Â  Â  Â  Â  Â  Â //values.put(MediaStore.Images.Media.DATA, imgFile.getAbsolutePath())<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â //æ–¹å¼2ä½¿ç”¨MediaStoreã€‚RELATIVE_PATH
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.RELATIVE_PATH, Environment.DIRECTORY_DCIM + "/CustomFolder")<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg")<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â return CameraApp.Companion.getMInstance().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)<span class="hljs-comment">;</span>
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â return imgFile<span class="hljs-comment">;</span>
 Â   }public static Object getHeadJpgFile() {
 Â  Â String <span class="hljs-attr">fileName</span> = System.currentTimeMillis() + FileManager.JPG_SUFFIX<span class="hljs-comment">;</span>
 Â  Â String <span class="hljs-attr">headPath</span> = FileManager.getAvatarPath(fileName)<span class="hljs-comment">;</span>
 Â  Â File imgFile<span class="hljs-comment">;</span>
 Â  Â if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â  Â  Â  Â // é€šè¿‡ MediaStore API æ’å…¥file ä¸ºäº†æ‹¿åˆ°ç³»ç»Ÿè£å‰ªè¦ä¿å­˜åˆ°çš„uriï¼ˆå› ä¸ºAppæ²¡æœ‰æƒé™ä¸èƒ½è®¿é—®å…¬å…±å­˜å‚¨ç©ºé—´ï¼Œéœ€è¦é€šè¿‡ MediaStore APIæ¥æ“ä½œï¼‰
 Â  Â  Â  Â ContentValues <span class="hljs-attr">values</span> = new ContentValues()<span class="hljs-comment">;</span>
 Â  Â  Â  Â values.put(MediaStore.Images.Media.RELATIVE_PATH, Environment.DIRECTORY_DCIM + "/CustomFolder")<span class="hljs-comment">;</span>
 Â  Â  Â  Â values.put(MediaStore.Images.Media.DISPLAY_NAME, fileName)<span class="hljs-comment">;</span>
 Â  Â  Â  Â values.put(MediaStore.Images.Media.MIME_TYPE, "image/jpeg")<span class="hljs-comment">;</span>
 Â  Â  Â  Â return CameraApp.Companion.getMInstance().getContentResolver().insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)<span class="hljs-comment">;</span>
 Â   } else {
 Â  Â  Â  Â <span class="hljs-attr">imgFile</span> = new File(headPath)<span class="hljs-comment">;</span>
 Â   }
 Â  Â return imgFile<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-9">7.è¿è¡Œæ•ˆæœï¼š</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6469eb54ec0040e6a43439e827658c58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=iKajDfHr%2Fe2N4EeJM4JFvBzHg4Y%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a20fc7b989e7419f87fe4d97fdf8627c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=i9uSxgpNMR8azn535wEZw%2B%2FepFM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd3e0f52b7ef4625a3f948c3b7b90749~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=jaJb%2FBLDm2nTWvmL5wETGvKxot8%3D" alt="image.png" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/852ba4ebe76a4bb4b080cbd7b471aa0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=BC0DQA1G52%2FOBOavSpHTSHusXfA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">8.ä¿®æ”¹åƒç´ è§£å†³æ¨¡ç³Šé—®é¢˜ï¼š</h2>
<p>putExtra("outputX", 1000) // è£å‰ªæ¡†å®½åº¦
putExtra("outputY", 1000)
æ ¹æ®å®é™…éœ€è¦è‡ªè¡Œä¿®æ”¹å³å¯ï¼Œè¿™é‡Œåªæ˜¯ç®€å•ä¸¾ä¾‹.</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/**
 * ç³»ç»Ÿè£å‰ªæ–¹æ³•
 */</span>
private fun <span class="hljs-built_in">workCropFun</span>(imgPathUri: Uri?) {
    mUploadImageUri = null
    mUploadImageFile = null
    if (imgPathUri != null) {
        val imageObject: Any = FileUtil.<span class="hljs-built_in">getHeadJpgFile</span>()
        if (imageObject is Uri) {
            mUploadImageUri = imageObject
        }
        if (imageObject is File) {
            mUploadImageFile = imageObject
        }
        val intent = <span class="hljs-built_in">Intent</span>("com.android.camera.action.CROP")
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {
            intent<span class="hljs-selector-class">.addFlags</span>(Intent.FLAG_GRANT_READ_URI_PERMISSION)
        }
        intent<span class="hljs-selector-class">.run</span> {
            <span class="hljs-built_in">setDataAndType</span>(imgPathUri, "image/*")<span class="hljs-comment">// å›¾ç‰‡èµ„æº</span>
            <span class="hljs-built_in">putExtra</span>("crop", "true") <span class="hljs-comment">// è£å‰ª</span>
            <span class="hljs-built_in">putExtra</span>("aspectX", <span class="hljs-number">1</span>) <span class="hljs-comment">// å®½åº¦æ¯”</span>
            <span class="hljs-built_in">putExtra</span>("aspectY", <span class="hljs-number">1</span>) <span class="hljs-comment">// é«˜åº¦æ¯”</span>
            <span class="hljs-built_in">putExtra</span>("outputX", <span class="hljs-number">1000</span>) <span class="hljs-comment">// è£å‰ªæ¡†å®½åº¦</span>
            <span class="hljs-built_in">putExtra</span>("outputY", <span class="hljs-number">1000</span>) <span class="hljs-comment">// è£å‰ªæ¡†é«˜åº¦</span>
            <span class="hljs-built_in">putExtra</span>("scale", true) <span class="hljs-comment">// ç¼©æ”¾</span>
            <span class="hljs-built_in">putExtra</span>("return-data", false) <span class="hljs-comment">// true-è¿”å›ç¼©ç•¥å›¾-dataï¼Œfalse-ä¸è¿”å›-éœ€è¦é€šè¿‡Uri</span>
            <span class="hljs-built_in">putExtra</span>("outputFormat", Bitmap.CompressFormat.JPEG.toString()) <span class="hljs-comment">// ä¿å­˜çš„å›¾ç‰‡æ ¼å¼</span>
            <span class="hljs-built_in">putExtra</span>("noFaceDetection", true) <span class="hljs-comment">// å–æ¶ˆäººè„¸è¯†åˆ«</span>
            <span class="hljs-built_in">putExtra</span>("quality", <span class="hljs-number">100</span>)
            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
                <span class="hljs-built_in">putExtra</span>(MediaStore.EXTRA_OUTPUT, mUploadImageUri)
            } else {
                val imgCropUri = Uri<span class="hljs-selector-class">.fromFile</span>(mUploadImageFile)
                <span class="hljs-built_in">putExtra</span>(MediaStore.EXTRA_OUTPUT, imgCropUri)
            }
        }
        <span class="hljs-built_in">startActivityForResult</span>(
            intent, REQUEST_CODE_CROP
        )
    }
}
</code></pre>
<h2 data-id="heading-11">9.æ—¥å¿—æ‰“å°ï¼š</h2>
<h3 data-id="heading-12">9.1 ä½¿ç”¨RELATIVE_PATHæ–¹å¼</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd8784e5e9ff483a9f2ed348dfca583e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=4AO8aSyCF0Nci0RRnH0lvplMic8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13">9.2 å»æ‰Media.DATA</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b330b06b1d5e4038a0d02d1c3a6f9b9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5kcm9pZOWwj-a4o-a4ow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766157871&amp;x-signature=REYkdd1unyFUh%2FyMk%2BJAvXYFoMA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-14">10.å®Œæ•´æµ‹è¯•ä»£ç ï¼š</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.cameraxdemo
â€‹
<span class="hljs-keyword">import</span> android.Manifest
<span class="hljs-keyword">import</span> android.<span class="hljs-keyword">annotation</span>.SuppressLint
<span class="hljs-keyword">import</span> android.content.Intent
<span class="hljs-keyword">import</span> android.content.pm.PackageManager
<span class="hljs-keyword">import</span> android.graphics.Color
<span class="hljs-keyword">import</span> android.media.MediaScannerConnection
<span class="hljs-keyword">import</span> android.net.Uri
<span class="hljs-keyword">import</span> android.os.Build
<span class="hljs-keyword">import</span> android.os.Bundle
<span class="hljs-keyword">import</span> android.os.Environment
<span class="hljs-keyword">import</span> android.view.View
<span class="hljs-keyword">import</span> android.view.WindowManager
<span class="hljs-keyword">import</span> android.webkit.MimeTypeMap
<span class="hljs-keyword">import</span> android.widget.Button
<span class="hljs-keyword">import</span> androidx.activity.enableEdgeToEdge
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity
<span class="hljs-keyword">import</span> androidx.camera.core.AspectRatio
<span class="hljs-keyword">import</span> androidx.camera.core.Camera
<span class="hljs-keyword">import</span> androidx.camera.core.CameraSelector
<span class="hljs-keyword">import</span> androidx.camera.core.ImageCapture
<span class="hljs-keyword">import</span> androidx.camera.core.ImageCaptureException
<span class="hljs-keyword">import</span> androidx.camera.core.Preview
<span class="hljs-keyword">import</span> androidx.camera.core.VideoCapture
<span class="hljs-keyword">import</span> androidx.camera.core.VideoCapture.OnVideoSavedCallback
<span class="hljs-keyword">import</span> androidx.camera.core.VideoCapture.OutputFileOptions
<span class="hljs-keyword">import</span> androidx.camera.lifecycle.ProcessCameraProvider
<span class="hljs-keyword">import</span> androidx.camera.view.PreviewView
<span class="hljs-keyword">import</span> androidx.core.app.ActivityCompat
<span class="hljs-keyword">import</span> androidx.core.content.ContextCompat
<span class="hljs-keyword">import</span> androidx.core.net.toFile
<span class="hljs-keyword">import</span> androidx.core.view.ViewCompat
<span class="hljs-keyword">import</span> androidx.core.view.WindowCompat
<span class="hljs-keyword">import</span> androidx.core.view.WindowInsetsCompat
<span class="hljs-keyword">import</span> com.blankj.utilcode.util.LogUtils
<span class="hljs-keyword">import</span> com.example.cameraxdemo.activity.CameraActivity
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.DATE_FORMAT
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.PHOTO_EXTENSION
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.REQUIRED_PERMISSIONS
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.FileManager
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.ToastUtils
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.VideoFileUtils.createFile
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.VideoFileUtils.getOutputDirectory
<span class="hljs-keyword">import</span> java.io.File
<span class="hljs-keyword">import</span> java.text.SimpleDateFormat
<span class="hljs-keyword">import</span> java.util.*
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService
<span class="hljs-keyword">import</span> java.util.concurrent.Executors
â€‹
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> imageCamera: ImageCapture? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> cameraExecutor: ExecutorService
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>)</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> videoCapture: VideoCapture? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA<span class="hljs-comment">//å½“å‰ç›¸æœº</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> preview: Preview? = <span class="hljs-literal">null</span><span class="hljs-comment">//é¢„è§ˆå¯¹è±¡</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> cameraProvider: ProcessCameraProvider? = <span class="hljs-literal">null</span><span class="hljs-comment">//ç›¸æœºä¿¡æ¯</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> camera: Camera <span class="hljs-comment">//ç›¸æœºå¯¹è±¡</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isRecordVideo: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> TAG = <span class="hljs-string">"CameraXApp"</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> outputDirectory: File
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> lensFacing: <span class="hljs-built_in">Int</span> = CameraSelector.LENS_FACING_BACK
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnCameraCapture: Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnCameraCapture) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnVideo: Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnVideo) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnSwitch: Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnSwitch) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnOpenCamera: Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnOpenCamera) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewFinder: PreviewView <span class="hljs-keyword">by</span> lazy { findViewById(R.id.mPreviewView) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> rootView : View <span class="hljs-keyword">by</span> lazy {findViewById(R.id.main_root) }
â€‹
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
 Â  Â  Â  Â enableEdgeToEdge()
 Â  Â  Â  Â setContentView(R.layout.activity_main)
 Â  Â  Â  Â initPermission()
 Â  Â  Â  Â initView()
 Â  Â  Â  Â <span class="hljs-keyword">val</span> window = window
 Â  Â  Â  Â WindowCompat.setDecorFitsSystemWindows(window, <span class="hljs-literal">false</span>)
 Â  Â  Â  Â ViewCompat.setOnApplyWindowInsetsListener(rootView) { v, insets -&gt;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> stateBars = insets.getInsets(WindowInsetsCompat.Type.statusBars())
 Â  Â  Â  Â  Â  Â v.setPadding(stateBars.left, <span class="hljs-number">0</span>, stateBars.right, <span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â insets
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initView</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â outputDirectory = getOutputDirectory(<span class="hljs-keyword">this</span>)
 Â   }
â€‹
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>)</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initListener</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â btnCameraCapture.setOnClickListener {
 Â  Â  Â  Â  Â  Â takePhoto()
 Â  Â  Â   }
 Â  Â  Â  Â btnVideo.setOnClickListener {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (!isRecordVideo) {
 Â  Â  Â  Â  Â  Â  Â  Â takeVideo()
 Â  Â  Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">true</span>
 Â  Â  Â  Â  Â  Â  Â  Â btnVideo.text = <span class="hljs-string">"åœæ­¢å½•åƒ"</span>
 Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â videoCapture?.stopRecording()<span class="hljs-comment">//åœæ­¢å½•åˆ¶</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//preview?.clear()//æ¸…é™¤é¢„è§ˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â btnVideo.text = <span class="hljs-string">"å¼€å§‹å½•åƒ"</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â btnSwitch.setOnClickListener {
 Â  Â  Â  Â  Â  Â cameraSelector = <span class="hljs-keyword">if</span> (cameraSelector == CameraSelector.DEFAULT_BACK_CAMERA) {
 Â  Â  Â  Â  Â  Â  Â  Â CameraSelector.DEFAULT_FRONT_CAMERA
 Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â  Â  Â CameraSelector.DEFAULT_BACK_CAMERA
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (!isRecordVideo) {
 Â  Â  Â  Â  Â  Â  Â  Â startCamera()
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â btnOpenCamera.setOnClickListener {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, CameraActivity::<span class="hljs-keyword">class</span>.java)
 Â  Â  Â  Â  Â  Â startActivity(intent)
 Â  Â  Â   }
 Â   }
â€‹
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initPermission</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (checkPermissions()) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ImageCapture</span>
 Â  Â  Â  Â  Â  Â startCamera()
 Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â requestPermission()
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">requestPermission</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">when</span> {
 Â  Â  Â  Â  Â  Â Build.VERSION.SDK_INT &gt;= <span class="hljs-number">33</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â ActivityCompat.requestPermissions(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â arrayOf(Manifest.permission.READ_MEDIA_IMAGES,Manifest.permission.READ_MEDIA_AUDIO,Manifest.permission.READ_MEDIA_VIDEO,Manifest.permission.CAMERA,Manifest.permission.RECORD_AUDIO),
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Constants.REQUEST_CODE_PERMISSIONS
 Â  Â  Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">else</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â ActivityCompat.requestPermissions(<span class="hljs-keyword">this</span>, REQUIRED_PERMISSIONS, Constants.REQUEST_CODE_PERMISSIONS)
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
â€‹
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å¼€å§‹æ‹ç…§
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">takePhoto</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">val</span> imageCapture = imageCamera ?: <span class="hljs-keyword">return</span>
 Â  Â  Â  Â <span class="hljs-keyword">val</span> photoFile = createFile(outputDirectory, DATE_FORMAT, PHOTO_EXTENSION)
 Â  Â  Â  Â <span class="hljs-keyword">val</span> metadata = ImageCapture.Metadata().apply {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// Mirror image when using the front camera</span>
 Â  Â  Â  Â  Â  Â isReversedHorizontal = lensFacing == CameraSelector.LENS_FACING_FRONT
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-keyword">val</span> outputOptions =
 Â  Â  Â  Â  Â  Â ImageCapture.OutputFileOptions.Builder(photoFile).setMetadata(metadata).build()
 Â  Â  Â  Â imageCapture.takePicture(outputOptions, ContextCompat.getMainExecutor(<span class="hljs-keyword">this</span>),
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">object</span> : ImageCapture.OnImageSavedCallback {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onError</span><span class="hljs-params">(exc: <span class="hljs-type">ImageCaptureException</span>)</span></span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, <span class="hljs-string">"Photo capture failed: <span class="hljs-subst">${exc.message}</span>"</span>, exc)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">" æ‹ç…§å¤±è´¥ <span class="hljs-subst">${exc.message}</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onImageSaved</span><span class="hljs-params">(output: <span class="hljs-type">ImageCapture</span>.<span class="hljs-type">OutputFileResults</span>)</span></span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> savedUri = output.savedUri ?: Uri.fromFile(photoFile)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">" æ‹ç…§æˆåŠŸ <span class="hljs-variable">$savedUri</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, savedUri.path.toString())
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> mimeType = MimeTypeMap.getSingleton()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   .getMimeTypeFromExtension(savedUri.toFile().extension)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â MediaScannerConnection.scanFile(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span><span class="hljs-symbol">@MainActivity</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â arrayOf(savedUri.toFile().absolutePath),
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â arrayOf(mimeType)
 Â  Â  Â  Â  Â  Â  Â  Â  Â   ) { _, uri -&gt;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.d(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â TAG,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"Image capture scanned into media store: <span class="hljs-subst">${uri.path.toString()}</span>"</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   })
 Â   }
â€‹
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å¼€å§‹å½•åƒ
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>, <span class="hljs-string">"ClickableViewAccessibility"</span>, <span class="hljs-string">"MissingPermission"</span>)</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">takeVideo</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-comment">//å¼€å§‹å½•åƒ</span>
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">true</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> mFileDateFormat = SimpleDateFormat(DATE_FORMAT, Locale.US)
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">//è§†é¢‘ä¿å­˜è·¯å¾„</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> file =
 Â  Â  Â  Â  Â  Â  Â  Â File(FileManager.getCameraVideoPath(), mFileDateFormat.format(Date()) + <span class="hljs-string">".mp4"</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> outputOptions = OutputFileOptions.Builder(file)
 Â  Â  Â  Â  Â  Â videoCapture?.startRecording(
 Â  Â  Â  Â  Â  Â  Â  Â outputOptions.build(),
 Â  Â  Â  Â  Â  Â  Â  Â Executors.newSingleThreadExecutor(),
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">object</span> : OnVideoSavedCallback {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onVideoSaved</span><span class="hljs-params">(outputFileResults: <span class="hljs-type">VideoCapture</span>.<span class="hljs-type">OutputFileResults</span>)</span></span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span>(BuildConfig.DEBUG){
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.d(TAG, <span class="hljs-string">"===è§†é¢‘ä¿å­˜çš„åœ°å€ä¸º=== <span class="hljs-subst">${file.absolutePath}</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//ä¿å­˜è§†é¢‘æˆåŠŸå›è°ƒï¼Œä¼šåœ¨åœæ­¢å½•åˆ¶æ—¶è¢«è°ƒç”¨</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">" å½•åƒæˆåŠŸ <span class="hljs-variable">$file</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onError</span><span class="hljs-params">(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â videoCaptureError: <span class="hljs-type">Int</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â message: <span class="hljs-type">String</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â cause: <span class="hljs-type">Throwable</span>?
 Â  Â  Â  Â  Â  Â  Â  Â  Â   )</span></span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//ä¿å­˜å¤±è´¥çš„å›è°ƒï¼Œå¯èƒ½åœ¨å¼€å§‹æˆ–ç»“æŸå½•åˆ¶æ—¶è¢«è°ƒç”¨</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â isRecordVideo = <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span>(BuildConfig.DEBUG) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, <span class="hljs-string">"onError: <span class="hljs-variable">$message</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">" å½•åƒå¤±è´¥ <span class="hljs-variable">$message</span>"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   })
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (e: Exception) {
 Â  Â  Â  Â  Â  Â e.printStackTrace()
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span>(BuildConfig.DEBUG) {
 Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, <span class="hljs-string">"===å½•åƒå‡ºé”™===<span class="hljs-subst">${e.message}</span>"</span>)
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å¼€å§‹ç›¸æœºé¢„è§ˆ
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>)</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startCamera</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â cameraExecutor = Executors.newSingleThreadExecutor()
 Â  Â  Â  Â <span class="hljs-keyword">val</span> cameraProviderFuture = ProcessCameraProvider.getInstance(<span class="hljs-keyword">this</span>)
 Â  Â  Â  Â cameraProviderFuture.addListener(Runnable {
 Â  Â  Â  Â  Â  Â cameraProvider = cameraProviderFuture.<span class="hljs-keyword">get</span>()<span class="hljs-comment">//è·å–ç›¸æœºä¿¡æ¯</span>
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">//é¢„è§ˆé…ç½®</span>
 Â  Â  Â  Â  Â  Â preview = Preview.Builder()
 Â  Â  Â  Â  Â  Â  Â   .build()
 Â  Â  Â  Â  Â  Â  Â   .also {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â it.setSurfaceProvider(viewFinder.surfaceProvider)
 Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â imageCamera = ImageCapture.Builder()
 Â  Â  Â  Â  Â  Â  Â   .setCaptureMode(ImageCapture.CAPTURE_MODE_MINIMIZE_LATENCY)
 Â  Â  Â  Â  Â  Â  Â   .build()
â€‹
 Â  Â  Â  Â  Â  Â videoCapture = VideoCapture.Builder()<span class="hljs-comment">//å½•åƒç”¨ä¾‹é…ç½®</span>
 Â  Â  Â  Â  Â  Â  Â   .setTargetAspectRatio(AspectRatio.RATIO_16_9) <span class="hljs-comment">//è®¾ç½®é«˜å®½æ¯”</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//.setTargetRotation(viewFinder.display!!.rotation)//è®¾ç½®æ—‹è½¬è§’åº¦</span>
 Â  Â  Â  Â  Â  Â  Â   .build()
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â  Â  Â cameraProvider?.unbindAll()<span class="hljs-comment">//å…ˆè§£ç»‘æ‰€æœ‰ç”¨ä¾‹</span>
 Â  Â  Â  Â  Â  Â  Â  Â camera = cameraProvider?.bindToLifecycle(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â cameraSelector,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â preview,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â imageCamera,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â videoCapture
 Â  Â  Â  Â  Â  Â  Â   )!!<span class="hljs-comment">//ç»‘å®šç”¨ä¾‹</span>
 Â  Â  Â  Â  Â   } <span class="hljs-keyword">catch</span> (e: Exception) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span>(BuildConfig.DEBUG) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â LogUtils.e(TAG, <span class="hljs-string">"Use case binding failed"</span>, e.message)
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â   }, ContextCompat.getMainExecutor(<span class="hljs-keyword">this</span>))
 Â  Â  Â  Â initListener()
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onRequestPermissionsResult</span><span class="hljs-params">(
 Â  Â  Â  Â requestCode: <span class="hljs-type">Int</span>, permissions: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;, grantResults:
 Â  Â  Â  Â <span class="hljs-type">IntArray</span>
 Â   )</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">when</span> (requestCode) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Constants.REQUEST_CODE_PERMISSIONS -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">var</span> allPermissionsGranted = <span class="hljs-literal">true</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (result <span class="hljs-keyword">in</span> grantResults) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (result != PackageManager.PERMISSION_GRANTED) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â allPermissionsGranted = <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">break</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">when</span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â allPermissionsGranted -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æƒé™å·²æˆäºˆï¼Œæ‰§è¡Œæ–‡ä»¶è¯»å†™æ“ä½œ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â startCamera()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">else</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æƒé™è¢«æ‹’ç»ï¼Œå¤„ç†æƒé™è¯·æ±‚å¤±è´¥çš„æƒ…å†µ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ToastUtils.shortToast(<span class="hljs-string">"è¯·æ‚¨æ‰“å¼€å¿…è¦æƒé™"</span>)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â requestPermission()
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkPermissions</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
 Â  Â  Â  Â <span class="hljs-keyword">when</span> {
 Â  Â  Â  Â  Â  Â Build.VERSION.SDK_INT &gt;= <span class="hljs-number">33</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> permissions = arrayOf(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.READ_MEDIA_IMAGES,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.READ_MEDIA_AUDIO,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.READ_MEDIA_VIDEO,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.CAMERA,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Manifest.permission.RECORD_AUDIO,
 Â  Â  Â  Â  Â  Â  Â   )
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (permission <span class="hljs-keyword">in</span> permissions) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> Environment.isExternalStorageManager()
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
â€‹
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">else</span> -&gt; {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (permission <span class="hljs-keyword">in</span> REQUIRED_PERMISSIONS) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (ContextCompat.checkSelfPermission(
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â permission
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ) != PackageManager.PERMISSION_GRANTED
 Â  Â  Â  Â  Â  Â  Â  Â  Â   ) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onDestroy()
 Â  Â  Â  Â cameraExecutor.shutdown()
 Â   }
}
</code></pre>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.cameraxdemo.activity
â€‹
<span class="hljs-keyword">import</span> android.<span class="hljs-keyword">annotation</span>.SuppressLint
<span class="hljs-keyword">import</span> android.content.ContentValues
<span class="hljs-keyword">import</span> android.content.Intent
<span class="hljs-keyword">import</span> android.graphics.Bitmap
<span class="hljs-keyword">import</span> android.net.Uri
<span class="hljs-keyword">import</span> android.os.Build
<span class="hljs-keyword">import</span> android.os.Bundle
<span class="hljs-keyword">import</span> android.provider.MediaStore
<span class="hljs-keyword">import</span> android.view.View
<span class="hljs-keyword">import</span> android.widget.Button
<span class="hljs-keyword">import</span> android.widget.ImageView
<span class="hljs-keyword">import</span> androidx.activity.enableEdgeToEdge
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity
<span class="hljs-keyword">import</span> androidx.core.view.ViewCompat
<span class="hljs-keyword">import</span> androidx.core.view.WindowInsetsCompat
<span class="hljs-keyword">import</span> com.blankj.utilcode.util.LogUtils
<span class="hljs-keyword">import</span> com.bumptech.glide.Glide
<span class="hljs-keyword">import</span> com.example.cameraxdemo.R
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.REQUEST_CODE_CAMERA
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.Constants.Companion.REQUEST_CODE_CROP
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.FileManager
<span class="hljs-keyword">import</span> com.example.cameraxdemo.utils.FileUtil
<span class="hljs-keyword">import</span> java.io.File
â€‹
<span class="hljs-comment">/**
 *<span class="hljs-doctag">@author</span>: njb
 *<span class="hljs-doctag">@date</span>: Â  2023/8/15 17:20
 *<span class="hljs-doctag">@desc</span>:
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CameraActivity</span> :<span class="hljs-type">AppCompatActivity</span>(){
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> mUploadImageUri: Uri? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> mUploadImageFile: File? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> photoUri: Uri? = <span class="hljs-literal">null</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> btnCamera:Button <span class="hljs-keyword">by</span> lazy { findViewById(R.id.btnCamera) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> ivAvatar:ImageView <span class="hljs-keyword">by</span> lazy { findViewById(R.id.iv_avatar) }
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> TAG = CameraActivity::<span class="hljs-keyword">class</span>.java.name
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> rootView : View <span class="hljs-keyword">by</span> lazy {findViewById(R.id.camera_root) }
â€‹
 Â  Â <span class="hljs-meta">@SuppressLint(<span class="hljs-string">"RestrictedApi"</span>)</span>
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
 Â  Â  Â  Â enableEdgeToEdge()
 Â  Â  Â  Â setContentView(R.layout.activity_camera)
 Â  Â  Â  Â initView()
 Â  Â  Â  Â ViewCompat.setOnApplyWindowInsetsListener(rootView) { v, insets -&gt;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> stateBars = insets.getInsets(WindowInsetsCompat.Type.statusBars())
 Â  Â  Â  Â  Â  Â v.setPadding(stateBars.left, stateBars.top, stateBars.right, stateBars.bottom)
 Â  Â  Â  Â  Â  Â insets
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initView</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â btnCamera.setOnClickListener {
 Â  Â  Â  Â  Â  Â startSystemCamera()
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è°ƒèµ·ç³»ç»Ÿç›¸æœºæ‹ç…§
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startSystemCamera</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">val</span> takeIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)
 Â  Â  Â  Â <span class="hljs-keyword">val</span> values = ContentValues()
 Â  Â  Â  Â <span class="hljs-comment">//æ ¹æ®uriæŸ¥è¯¢å›¾ç‰‡åœ°å€</span>
 Â  Â  Â  Â photoUri = contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)
 Â  Â  Â  Â LogUtils.d(TAG, <span class="hljs-string">"photoUri:"</span> + photoUri?.authority + <span class="hljs-string">",photoUri:"</span> + photoUri?.path)
 Â  Â  Â  Â <span class="hljs-comment">//æ”¾å…¥æ‹ç…§åçš„åœ°å€</span>
 Â  Â  Â  Â takeIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoUri)
 Â  Â  Â  Â <span class="hljs-comment">//è°ƒèµ·æ‹ç…§</span>
 Â  Â  Â  Â startActivityForResult(
 Â  Â  Â  Â  Â  Â takeIntent,
 Â  Â  Â  Â  Â  Â REQUEST_CODE_CAMERA
 Â  Â  Â   )
 Â   }
â€‹
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è®¾ç½®ç”¨æˆ·å¤´åƒ
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setAvatar</span><span class="hljs-params">()</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">val</span> file: File? = <span class="hljs-keyword">if</span> (mUploadImageUri != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â FileManager.getMediaUri2File(mUploadImageUri)
 Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â mUploadImageFile
 Â  Â  Â   }
 Â  Â  Â  Â Glide.with(<span class="hljs-keyword">this</span>).load(file).into(ivAvatar)
 Â  Â  Â  Â LogUtils.d(TAG,<span class="hljs-string">"filepath"</span>+ file!!.absolutePath)
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * ç³»ç»Ÿè£å‰ªæ–¹æ³•
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">workCropFun</span><span class="hljs-params">(imgPathUri: <span class="hljs-type">Uri</span>?)</span></span> {
 Â  Â  Â  Â mUploadImageUri = <span class="hljs-literal">null</span>
 Â  Â  Â  Â mUploadImageFile = <span class="hljs-literal">null</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (imgPathUri != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> imageObject: Any = FileUtil.getHeadJpgFile()
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (imageObject <span class="hljs-keyword">is</span> Uri) {
 Â  Â  Â  Â  Â  Â  Â  Â mUploadImageUri = imageObject
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (imageObject <span class="hljs-keyword">is</span> File) {
 Â  Â  Â  Â  Â  Â  Â  Â mUploadImageFile = imageObject
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-string">"com.android.camera.action.CROP"</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {
 Â  Â  Â  Â  Â  Â  Â  Â intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â intent.run {
 Â  Â  Â  Â  Â  Â  Â  Â setDataAndType(imgPathUri, <span class="hljs-string">"image/*"</span>)<span class="hljs-comment">// å›¾ç‰‡èµ„æº</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"crop"</span>, <span class="hljs-string">"true"</span>) <span class="hljs-comment">// è£å‰ª</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"aspectX"</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// å®½åº¦æ¯”</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"aspectY"</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// é«˜åº¦æ¯”</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"outputX"</span>, <span class="hljs-number">1000</span>) <span class="hljs-comment">// è£å‰ªæ¡†å®½åº¦</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"outputY"</span>, <span class="hljs-number">1000</span>) <span class="hljs-comment">// è£å‰ªæ¡†é«˜åº¦</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"scale"</span>, <span class="hljs-literal">true</span>) <span class="hljs-comment">// ç¼©æ”¾</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"return-data"</span>, <span class="hljs-literal">false</span>) <span class="hljs-comment">// true-è¿”å›ç¼©ç•¥å›¾-dataï¼Œfalse-ä¸è¿”å›-éœ€è¦é€šè¿‡Uri</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"outputFormat"</span>, Bitmap.CompressFormat.JPEG.toString()) <span class="hljs-comment">// ä¿å­˜çš„å›¾ç‰‡æ ¼å¼</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"noFaceDetection"</span>, <span class="hljs-literal">true</span>) <span class="hljs-comment">// å–æ¶ˆäººè„¸è¯†åˆ«</span>
 Â  Â  Â  Â  Â  Â  Â  Â putExtra(<span class="hljs-string">"quality"</span>, <span class="hljs-number">100</span>)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â putExtra(MediaStore.EXTRA_OUTPUT, mUploadImageUri)
 Â  Â  Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">val</span> imgCropUri = Uri.fromFile(mUploadImageFile)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â putExtra(MediaStore.EXTRA_OUTPUT, imgCropUri)
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â startActivityForResult(
 Â  Â  Â  Â  Â  Â  Â  Â intent, REQUEST_CODE_CROP
 Â  Â  Â  Â  Â   )
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onActivityResult</span><span class="hljs-params">(requestCode: <span class="hljs-type">Int</span>, resultCode: <span class="hljs-type">Int</span>, <span class="hljs-keyword">data</span>: <span class="hljs-type">Intent</span>?)</span></span> {
 Â  Â  Â  Â <span class="hljs-keyword">super</span>.onActivityResult(requestCode, resultCode, <span class="hljs-keyword">data</span>)
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (resultCode == RESULT_OK) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (requestCode == REQUEST_CODE_CAMERA) {<span class="hljs-comment">//æ‹ç…§å›è°ƒ</span>
 Â  Â  Â  Â  Â  Â  Â  Â workCropFun(photoUri)
 Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (requestCode == REQUEST_CODE_CROP) {<span class="hljs-comment">//è£å‰ªå›è°ƒ</span>
 Â  Â  Â  Â  Â  Â  Â  Â setAvatar()
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
}
</code></pre>
<h2 data-id="heading-15">11.æ€»ç»“ï¼š</h2>
<p>å‡çº§Android15åéœ€è¦é€‚é…EdgeToEdgeå’ŒMediaStore.Images.Media.DATA, æ‰¾åˆ°æŠ¥é”™ï¼Œåˆ†æå‡ºåŸå› ï¼Œè§£å†³å³å¯.å½“ç„¶15è¿˜æœ‰å…¶ä»–é€‚é…ï¼Œè¿™é‡Œåªæ˜¯åœ¨è·‘ä¹‹å‰çš„é¡¹ç›®é‡åˆ°çš„é—®é¢˜é¡ºæ‰‹è®²è§£ä¸€ä¸‹è€Œå·²ï¼Œåé¢ä¼šé‡ç‚¹è®²è§£å…¨é¢å±é€‚é….</p>
<h2 data-id="heading-16">12.æºç åœ°å€:</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fjackning_admin%2Fcamera-xdemo" target="_blank" title="https://gitee.com/jackning_admin/camera-xdemo" ref="nofollow noopener noreferrer">gitee.com/jackning_adâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŸ¥æ‰¾ç®—æ³•]]></title>    <link>https://juejin.cn/post/7582809606067322906</link>    <guid>https://juejin.cn/post/7582809606067322906</guid>    <pubDate>2025-12-12T15:30:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606067322906" data-draft-id="7580277964341526538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" æŸ¥æ‰¾ç®—æ³•"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-12T15:30:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             æŸ¥æ‰¾ç®—æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:30:10.000Z" title="Fri Dec 12 2025 15:30:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äºŒåˆ†æŸ¥æ‰¾</h2>
<p>äºŒåˆ†æŸ¥æ‰¾ï¼ˆBinary Searchï¼‰æ˜¯ä¸€ç§é«˜æ•ˆçš„æŸ¥æ‰¾ç®—æ³•ï¼Œä¹Ÿå«æŠ˜åŠæŸ¥æ‰¾ã€‚æ ¸å¿ƒæ€æƒ³ï¼šå¯¹äºä¸€ä¸ª<strong>æœ‰åº</strong>çš„æ•°æ®é›†åˆï¼Œæ¯æ¬¡æŸ¥æ‰¾éƒ½å°†æŸ¥æ‰¾èŒƒå›´ç¼©å°ä¸ºåŸæ¥çš„ä¸€åŠï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å€¼æˆ–ç¡®å®šç›®æ ‡å€¼ä¸å­˜åœ¨ã€‚äºŒåˆ†æŸ¥æ‰¾è¦æ±‚æ•°æ®å¿…é¡»æ˜¯æœ‰åºçš„ï¼Œç»å¸¸åº”ç”¨äºæ•°ç»„ç­‰æ”¯æŒéšæœºè®¿é—®çš„æ•°æ®ç»“æ„é‡Œã€‚è·Ÿçº¿æ€§æŸ¥æ‰¾ç›¸æ¯”ï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„æ•ˆç‡è¦é«˜å¾—å¤šï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§è§„æ¨¡æ•°æ®é›†ã€‚</p>
<h3 data-id="heading-1">ç®—æ³•æ­¥éª¤</h3>
<ol>
<li>ç¡®å®šæŸ¥æ‰¾èŒƒå›´çš„å·¦è¾¹ç•Œ left å’Œå³è¾¹ç•Œ right</li>
<li>è®¡ç®—ä¸­é—´ä½ç½® mid = (left + right) / 2ï¼ˆæ³¨æ„æ•´æ•°æº¢å‡ºé—®é¢˜ï¼Œæ›´å®‰å…¨çš„åšæ³•æ˜¯ mid = left + (right - left) / 2ï¼‰</li>
<li>å°†ä¸­é—´ä½ç½®çš„å…ƒç´ ä¸ç›®æ ‡å€¼æ¯”è¾ƒ
<ul>
<li>å¦‚æœä¸­é—´å…ƒç´ ç­‰äºç›®æ ‡å€¼ï¼ŒæŸ¥æ‰¾æˆåŠŸï¼Œè¿”å›ä¸­é—´å…ƒç´ çš„ä½ç½®</li>
<li>å¦‚æœä¸­é—´å…ƒç´ å¤§äºç›®æ ‡å€¼ï¼Œç›®æ ‡å€¼å¯èƒ½åœ¨å·¦åŠéƒ¨åˆ†ï¼Œå°†å³è¾¹ç•Œè°ƒæ•´ä¸º mid - 1</li>
<li>å¦‚æœä¸­é—´å…ƒç´ å°äºç›®æ ‡å€¼ï¼Œç›®æ ‡å€¼å¯èƒ½åœ¨å³åŠéƒ¨åˆ†ï¼Œå°†å·¦è¾¹ç•Œè°ƒæ•´ä¸º mid + 1</li>
</ul>
</li>
<li>é‡å¤æ­¥éª¤2-3ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å€¼æˆ–è€…å·¦è¾¹ç•Œå¤§äºå³è¾¹ç•Œï¼ˆæ­¤æ—¶è¡¨ç¤ºç›®æ ‡å€¼ä¸å­˜åœ¨ï¼‰</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/facd695ba9284b8580c2627ca29ba648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158209&amp;x-signature=bq2x6bTY5csrMftWE4KIKwHK7I8%3D" alt="" loading="lazy"/></p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>è¦æ±‚æœ‰åº</strong>ï¼šäºŒåˆ†æŸ¥æ‰¾åªé€‚ç”¨äºæœ‰åºæ•°æ®é›†åˆ</li>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(log n)ï¼Œåœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šéå¸¸é«˜æ•ˆ</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šè¿­ä»£å®ç°ä¸ºO(1)ï¼Œé€’å½’å®ç°ä¸ºO(log n)ï¼ˆå› ä¸ºé€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦ï¼‰</li>
<li><strong>éšæœºè®¿é—®</strong>ï¼šè¦æ±‚æ•°æ®ç»“æ„æ”¯æŒO(1)æ—¶é—´å¤æ‚åº¦çš„éšæœºè®¿é—®ï¼ˆæ¯”å¦‚æ•°ç»„ï¼‰</li>
</ul>
<h3 data-id="heading-2">åŸºç¡€å®ç°</h3>
<p>ä¸‹é¢æ˜¯äºŒåˆ†æŸ¥æ‰¾ç®—æ³•åœ¨å„ç§ä¸»æµç¼–ç¨‹è¯­è¨€ä¸­çš„å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BinarySearch</span> {
    <span class="hljs-comment">// è¿­ä»£å®ç°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearch</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> target)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> arr.length - <span class="hljs-number">1</span>;
        
        <span class="hljs-keyword">while</span> (left &lt;= right) {
            <span class="hljs-comment">// é¿å…æ•´æ•°æº¢å‡º</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + (right - left) / <span class="hljs-number">2</span>;
            
            <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡å€¼</span>
            <span class="hljs-keyword">if</span> (arr[mid] == target) {
                <span class="hljs-keyword">return</span> mid;
            }
            <span class="hljs-comment">// åœ¨å·¦åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾</span>
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[mid] &gt; target) {
                right = mid - <span class="hljs-number">1</span>;
            }
            <span class="hljs-comment">// åœ¨å³åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾</span>
            <span class="hljs-keyword">else</span> {
                left = mid + <span class="hljs-number">1</span>;
            }
        }
        
        <span class="hljs-comment">// æœªæ‰¾åˆ°ç›®æ ‡å€¼</span>
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
    
    <span class="hljs-comment">// é€’å½’å®ç°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearchRecursive</span><span class="hljs-params">(<span class="hljs-type">int</span>[] arr, <span class="hljs-type">int</span> target, <span class="hljs-type">int</span> left, <span class="hljs-type">int</span> right)</span> {
        <span class="hljs-keyword">if</span> (left &gt; right) {
            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + (right - left) / <span class="hljs-number">2</span>;
        
        <span class="hljs-keyword">if</span> (arr[mid] == target) {
            <span class="hljs-keyword">return</span> mid;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (arr[mid] &gt; target) {
            <span class="hljs-keyword">return</span> binarySearchRecursive(arr, target, left, mid - <span class="hljs-number">1</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> binarySearchRecursive(arr, target, mid + <span class="hljs-number">1</span>, right);
        }
    }
    
    <span class="hljs-comment">// æµ‹è¯•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arr = {<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">10</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span>, <span class="hljs-number">70</span>, <span class="hljs-number">80</span>};
        <span class="hljs-type">int</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
        
        <span class="hljs-comment">// è¿­ä»£æ–¹æ³•</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> binarySearch(arr, target);
        <span class="hljs-keyword">if</span> (result == -<span class="hljs-number">1</span>) {
            System.out.println(<span class="hljs-string">"å…ƒç´  "</span> + target + <span class="hljs-string">" ä¸å­˜åœ¨äºæ•°ç»„ä¸­"</span>);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"å…ƒç´  "</span> + target + <span class="hljs-string">" åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä¸º "</span> + result);
        }
        
        <span class="hljs-comment">// é€’å½’æ–¹æ³•</span>
        result = binarySearchRecursive(arr, target, <span class="hljs-number">0</span>, arr.length - <span class="hljs-number">1</span>);
        <span class="hljs-keyword">if</span> (result == -<span class="hljs-number">1</span>) {
            System.out.println(<span class="hljs-string">"å…ƒç´  "</span> + target + <span class="hljs-string">" ä¸å­˜åœ¨äºæ•°ç»„ä¸­"</span>);
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"å…ƒç´  "</span> + target + <span class="hljs-string">" åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ä¸º "</span> + result);
        }
    }
}
</code></pre>
<h3 data-id="heading-3">ä¼˜ç‚¹</h3>
<ul>
<li>æŸ¥æ‰¾æ•ˆç‡éå¸¸é«˜ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(log n)</li>
<li>åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šè¡¨ç°ä¼˜å¼‚</li>
<li>å®ç°ç›¸å¯¹ç®€å•</li>
<li>ä¸éœ€è¦é¢å¤–çš„ç©ºé—´ï¼ˆè¿­ä»£å®ç°ï¼‰</li>
</ul>
<h3 data-id="heading-4">ç¼ºç‚¹</h3>
<ul>
<li>è¦æ±‚æ•°æ®å¿…é¡»æ˜¯æœ‰åºçš„</li>
<li>åªé€‚ç”¨äºæ”¯æŒéšæœºè®¿é—®çš„æ•°æ®ç»“æ„ï¼ˆå¦‚æ•°ç»„ï¼‰</li>
<li>å¯¹äºé¢‘ç¹æ’å…¥å’Œåˆ é™¤çš„æ•°æ®ç»“æ„ï¼Œç»´æŠ¤æœ‰åºæ€§çš„æˆæœ¬å¾ˆé«˜</li>
<li>ä¸é€‚åˆå°æ•°æ®é‡çš„æŸ¥æ‰¾ï¼ˆè¿™ç§æƒ…å†µä¸‹çº¿æ€§æŸ¥æ‰¾å¯èƒ½æ›´å¿«ï¼‰</li>
</ul>
<h3 data-id="heading-5">åº”ç”¨åœºæ™¯</h3>
<p>äºŒåˆ†æŸ¥æ‰¾åœ¨å¾ˆå¤šåœºæ™¯ä¸­éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼š</p>
<ul>
<li>æ•°æ®åº“ç´¢å¼•çš„å®ç°ï¼ˆå¦‚ B æ ‘å’Œ B+ æ ‘çš„æŸ¥æ‰¾è¿‡ç¨‹ï¼‰</li>
<li>æŸ¥æ‰¾æœ€æ¥è¿‘æŸä¸ªå€¼çš„å…ƒç´ ï¼ˆä¸‹ç•ŒæŸ¥æ‰¾å’Œä¸Šç•ŒæŸ¥æ‰¾ï¼‰</li>
<li>è®¡ç®—å¹³æ–¹æ ¹ç­‰æ•°å€¼è®¡ç®—ä¸­ï¼ˆäºŒåˆ†æ³•æ±‚è§£ï¼‰</li>
<li>çŒœæ•°å­—æ¸¸æˆï¼ˆæ¯æ¬¡çŒœæµ‹ä¸­é—´å€¼ï¼‰</li>
<li>åœ¨æ—‹è½¬æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ </li>
<li>æŸ¥æ‰¾æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªæ»¡è¶³æŸæ¡ä»¶çš„å…ƒç´ </li>
</ul>
<h3 data-id="heading-6">ç›¸å…³çš„ LeetCode çƒ­é—¨é¢˜ç›®</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fbinary-search%2F" target="_blank" title="https://leetcode.cn/problems/binary-search/" ref="nofollow noopener noreferrer">704. äºŒåˆ†æŸ¥æ‰¾</a>Â - äºŒåˆ†æŸ¥æ‰¾çš„åŸºç¡€åº”ç”¨</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsearch-insert-position%2F" target="_blank" title="https://leetcode.cn/problems/search-insert-position/" ref="nofollow noopener noreferrer">35. æœç´¢æ’å…¥ä½ç½®</a>Â - æŸ¥æ‰¾å…ƒç´ åº”è¯¥æ’å…¥çš„ä½ç½®ï¼ˆä¸‹ç•Œï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-first-and-last-position-of-element-in-sorted-array%2F" target="_blank" title="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/" ref="nofollow noopener noreferrer">34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®</a>Â - æŸ¥æ‰¾ç›®æ ‡å€¼çš„ç¬¬ä¸€æ¬¡å’Œæœ€åä¸€æ¬¡å‡ºç°ä½ç½®</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsqrtx%2F" target="_blank" title="https://leetcode.cn/problems/sqrtx/" ref="nofollow noopener noreferrer">69. x çš„å¹³æ–¹æ ¹</a>Â - ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ±‚è§£å¹³æ–¹æ ¹</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsearch-in-rotated-sorted-array%2F" target="_blank" title="https://leetcode.cn/problems/search-in-rotated-sorted-array/" ref="nofollow noopener noreferrer">33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„</a>Â - åœ¨æ—‹è½¬è¿‡çš„æœ‰åºæ•°ç»„ä¸­ç”¨äºŒåˆ†æŸ¥æ‰¾</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-minimum-in-rotated-sorted-array%2F" target="_blank" title="https://leetcode.cn/problems/find-minimum-in-rotated-sorted-array/" ref="nofollow noopener noreferrer">153. å¯»æ‰¾æ—‹è½¬æ’åºæ•°ç»„ä¸­çš„æœ€å°å€¼</a>Â - åœ¨æ—‹è½¬æ•°ç»„ä¸­æŸ¥æ‰¾æœ€å°å€¼</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsearch-a-2d-matrix%2F" target="_blank" title="https://leetcode.cn/problems/search-a-2d-matrix/" ref="nofollow noopener noreferrer">74. æœç´¢äºŒç»´çŸ©é˜µ</a></li>
</ul>
<h2 data-id="heading-7">å“ˆå¸ŒæŸ¥æ‰¾</h2>
<p>å“ˆå¸ŒæŸ¥æ‰¾ï¼ˆHash Searchï¼‰ï¼Œåˆç§°æ•£åˆ—æŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§é«˜æ•ˆçš„æŸ¥æ‰¾ç®—æ³•ï¼Œå®ƒç”¨å“ˆå¸Œå‡½æ•°å°†æ•°æ®è½¬æ¢ä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œç„¶åç›´æ¥è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ã€‚å“ˆå¸ŒæŸ¥æ‰¾çš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>å°†æ•°æ®å…ƒç´ é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ï¼Œå®ç°å¿«é€ŸæŸ¥æ‰¾</strong>ã€‚</p>
<p>åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œå“ˆå¸ŒæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œè¿™å°±æ„å‘³ç€æ— è®ºæ•°æ®è§„æ¨¡å¤šå¤§ï¼ŒæŸ¥æ‰¾æ“ä½œéƒ½èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…å®Œæˆï¼Œè¿™æ˜¯å“ˆå¸ŒæŸ¥æ‰¾ç›¸æ¯”å…¶ä»–æŸ¥æ‰¾ç®—æ³•ï¼ˆå¦‚äºŒåˆ†æŸ¥æ‰¾ã€çº¿æ€§æŸ¥æ‰¾ï¼‰çš„æœ€å¤§ä¼˜åŠ¿ã€‚</p>
<p>ä¸è¿‡ä½¿ç”¨å“ˆå¸ŒæŸ¥æ‰¾å¿…é¡»è¦è€ƒè™‘å“ˆå¸Œå†²çªï¼ˆä¸åŒçš„æ•°æ®è¢«æ˜ å°„åˆ°ç›¸åŒçš„ä½ç½®ï¼‰é—®é¢˜ã€‚</p>
<h3 data-id="heading-8">ç®—æ³•æ­¥éª¤</h3>
<ol>
<li>è®¾è®¡ä¸€ä¸ªé€‚åˆæ•°æ®ç‰¹ç‚¹çš„å“ˆå¸Œå‡½æ•°ï¼Œå°†æ•°æ®æ˜ å°„åˆ°å“ˆå¸Œè¡¨çš„ç´¢å¼•ä½ç½®</li>
<li>æ„å»ºå“ˆå¸Œè¡¨ï¼Œå°†æ‰€æœ‰å…ƒç´ é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„ã€å­˜å‚¨åˆ°ç›¸åº”ä½ç½®</li>
<li>è§£å†³å¯èƒ½å‡ºç°çš„å“ˆå¸Œå†²çªï¼ˆé€šå¸¸é‡‡ç”¨é“¾åœ°å€æ³•æˆ–å¼€æ”¾å¯»å€æ³•ï¼‰</li>
<li>æŸ¥æ‰¾æ—¶ï¼Œé€šè¿‡åŒæ ·çš„å“ˆå¸Œå‡½æ•°è®¡ç®—ç›®æ ‡æ•°æ®çš„å“ˆå¸Œå€¼</li>
<li>æ ¹æ®å“ˆå¸Œå€¼å®šä½åˆ°å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®</li>
<li>å¦‚æœå­˜åœ¨å†²çªï¼Œåˆ™æŒ‰ç…§è§£å†³å†²çªçš„æ–¹æ³•æŸ¥æ‰¾ç›®æ ‡å…ƒç´ </li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c15da9709b1144a89d95b7047c22a586~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158209&amp;x-signature=u2lG9ocrQXRAGUvLb4P4fHwO8tw%3D" alt="" loading="lazy"/></p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å¿«é€Ÿè®¿é—®</strong>ï¼šç†æƒ³æƒ…å†µä¸‹æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸º O(1)</li>
<li><strong>å“ˆå¸Œå‡½æ•°</strong>ï¼šå“ˆå¸ŒæŸ¥æ‰¾çš„æ ¸å¿ƒï¼Œå°†æ•°æ®æ˜ å°„åˆ°æ•°ç»„ç´¢å¼•çš„å‡½æ•°</li>
<li><strong>å“ˆå¸Œå†²çª</strong>ï¼šä¸åŒæ•°æ®æ˜ å°„åˆ°ç›¸åŒä½ç½®çš„æƒ…å†µï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†</li>
<li><strong>ç©ºé—´æ¢æ—¶é—´</strong>ï¼šé€šè¿‡é¢å¤–çš„å†…å­˜ç©ºé—´æ¢å–æŸ¥æ‰¾æ—¶é—´çš„æå‡</li>
<li><strong>è´Ÿè½½å› å­</strong>ï¼šè¡¨ç¤ºå“ˆå¸Œè¡¨çš„å¡«å……ç¨‹åº¦ï¼Œå½±å“æŸ¥æ‰¾æ•ˆç‡å’Œå†²çªæ¦‚ç‡</li>
<li><strong>åŠ¨æ€æ‰©å®¹</strong>ï¼šè´Ÿè½½å› å­è¿‡é«˜æ—¶ï¼Œéœ€è¦æ‰©å¤§å“ˆå¸Œè¡¨å¹¶é‡æ–°å“ˆå¸Œ<strong>æ‰€æœ‰</strong>å…ƒç´ </li>
</ul>
<h3 data-id="heading-9">åŸºç¡€å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashSearch</span> {
    <span class="hljs-comment">// å“ˆå¸Œè¡¨èŠ‚ç‚¹ç±»</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {
        String key;
        <span class="hljs-type">int</span> value;
        Node next;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(String key, <span class="hljs-type">int</span> value)</span> {
            <span class="hljs-built_in">this</span>.key = key;
            <span class="hljs-built_in">this</span>.value = value;
            <span class="hljs-built_in">this</span>.next = <span class="hljs-literal">null</span>;
        }
    }
    
    <span class="hljs-comment">// å“ˆå¸Œè¡¨ç±»</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HashTable</span> {
        <span class="hljs-keyword">private</span> Node[] buckets;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> capacity;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">LOAD_FACTOR</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.75f</span>; <span class="hljs-comment">// è´Ÿè½½å› å­é˜ˆå€¼</span>
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">HashTable</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> {
            <span class="hljs-built_in">this</span>.capacity = capacity;
            <span class="hljs-built_in">this</span>.buckets = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[capacity];
            <span class="hljs-built_in">this</span>.size = <span class="hljs-number">0</span>;
        }
        
        <span class="hljs-comment">// å“ˆå¸Œå‡½æ•°</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hash</span><span class="hljs-params">(String key)</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : key.toCharArray()) {
                hash = (hash * <span class="hljs-number">31</span> + c) % capacity;
            }
            <span class="hljs-keyword">return</span> Math.abs(hash);
        }
        
        <span class="hljs-comment">// æ’å…¥é”®å€¼å¯¹</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">put</span><span class="hljs-params">(String key, <span class="hljs-type">int</span> value)</span> {
            <span class="hljs-keyword">if</span> ((<span class="hljs-type">float</span>)size / capacity &gt;= LOAD_FACTOR) {
                resize(<span class="hljs-number">2</span> * capacity);
            }
            
            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> hash(key);
            <span class="hljs-type">Node</span> <span class="hljs-variable">newNode</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(key, value);
            
            <span class="hljs-comment">// å¦‚æœæ¡¶ä¸ºç©ºï¼Œç›´æ¥æ’å…¥</span>
            <span class="hljs-keyword">if</span> (buckets[index] == <span class="hljs-literal">null</span>) {
                buckets[index] = newNode;
                size++;
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-comment">// å¤„ç†å“ˆå¸Œå†²çªï¼Œä½¿ç”¨é“¾åœ°å€æ³•</span>
            <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> buckets[index];
            
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒçš„é”®</span>
            <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (current.key.equals(key)) {
                    current.value = value; <span class="hljs-comment">// æ›´æ–°å€¼</span>
                    <span class="hljs-keyword">return</span>;
                }
                <span class="hljs-keyword">if</span> (current.next == <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">break</span>;
                }
                current = current.next;
            }
            
            <span class="hljs-comment">// åœ¨é“¾è¡¨æœ«å°¾æ·»åŠ æ–°èŠ‚ç‚¹</span>
            current.next = newNode;
            size++;
        }
        
        <span class="hljs-comment">// æŸ¥æ‰¾é”®å¯¹åº”çš„å€¼</span>
        <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">get</span><span class="hljs-params">(String key)</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> hash(key);
            <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> buckets[index];
            
            <span class="hljs-comment">// éå†é“¾è¡¨æŸ¥æ‰¾åŒ¹é…çš„é”®</span>
            <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (current.key.equals(key)) {
                    <span class="hljs-keyword">return</span> current.value;
                }
                current = current.next;
            }
            
            <span class="hljs-comment">// æœªæ‰¾åˆ°</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-comment">// åˆ é™¤é”®å€¼å¯¹</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(String key)</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> hash(key);
            <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> buckets[index];
            <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            
            <span class="hljs-comment">// æŸ¥æ‰¾ç›®æ ‡èŠ‚ç‚¹</span>
            <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (current.key.equals(key)) {
                    <span class="hljs-keyword">break</span>;
                }
                prev = current;
                current = current.next;
            }
            
            <span class="hljs-comment">// æœªæ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹</span>
            <span class="hljs-keyword">if</span> (current == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            
            <span class="hljs-comment">// åˆ é™¤èŠ‚ç‚¹</span>
            <span class="hljs-keyword">if</span> (prev == <span class="hljs-literal">null</span>) {
                buckets[index] = current.next;
            } <span class="hljs-keyword">else</span> {
                prev.next = current.next;
            }
            
            size--;
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-comment">// æ‰©å®¹å¹¶é‡æ–°å“ˆå¸Œ</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resize</span><span class="hljs-params">(<span class="hljs-type">int</span> newCapacity)</span> {
            Node[] oldBuckets = buckets;
            
            <span class="hljs-comment">// åˆ›å»ºæ–°çš„å“ˆå¸Œè¡¨</span>
            buckets = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>[newCapacity];
            capacity = newCapacity;
            size = <span class="hljs-number">0</span>;
            
            <span class="hljs-comment">// é‡æ–°å“ˆå¸Œæ‰€æœ‰å…ƒç´ </span>
            <span class="hljs-keyword">for</span> (Node bucket : oldBuckets) {
                <span class="hljs-type">Node</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> bucket;
                <span class="hljs-keyword">while</span> (current != <span class="hljs-literal">null</span>) {
                    put(current.key, current.value);
                    current = current.next;
                }
            }
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">HashTable</span> <span class="hljs-variable">hashTable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashTable</span>(<span class="hljs-number">10</span>);
        
        <span class="hljs-comment">// æ’å…¥æ•°æ®</span>
        hashTable.put(<span class="hljs-string">"apple"</span>, <span class="hljs-number">5</span>);
        hashTable.put(<span class="hljs-string">"banana"</span>, <span class="hljs-number">10</span>);
        hashTable.put(<span class="hljs-string">"orange"</span>, <span class="hljs-number">15</span>);
        hashTable.put(<span class="hljs-string">"grape"</span>, <span class="hljs-number">20</span>);
        
        <span class="hljs-comment">// æŸ¥æ‰¾æ•°æ®</span>
        System.out.println(<span class="hljs-string">"apple: "</span> + hashTable.get(<span class="hljs-string">"apple"</span>));
        System.out.println(<span class="hljs-string">"banana: "</span> + hashTable.get(<span class="hljs-string">"banana"</span>));
        System.out.println(<span class="hljs-string">"orange: "</span> + hashTable.get(<span class="hljs-string">"orange"</span>));
        System.out.println(<span class="hljs-string">"grape: "</span> + hashTable.get(<span class="hljs-string">"grape"</span>));
        System.out.println(<span class="hljs-string">"watermelon: "</span> + hashTable.get(<span class="hljs-string">"watermelon"</span>));
        
        <span class="hljs-comment">// åˆ é™¤æ•°æ®</span>
        hashTable.remove(<span class="hljs-string">"orange"</span>);
        System.out.println(<span class="hljs-string">"After removing orange: "</span> + hashTable.get(<span class="hljs-string">"orange"</span>));
    }
}
</code></pre>
<h3 data-id="heading-10">ä¼˜ç‚¹</h3>
<ul>
<li>æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(1)</li>
<li>é€‚ç”¨äºå¿«é€ŸæŸ¥æ‰¾</li>
<li>ä¸è¦æ±‚æ•°æ®æœ‰åºï¼Œæ›´çµæ´»</li>
<li>æ”¯æŒåŠ¨æ€æ•°æ®é›†ï¼Œé«˜æ•ˆåœ°æ·»åŠ å’Œåˆ é™¤å…ƒç´ </li>
<li>é€šè¿‡åˆé€‚çš„å“ˆå¸Œå‡½æ•°å’Œè§£å†³å†²çªç­–ç•¥ï¼Œèƒ½å®ç°éå¸¸ä¼˜ç§€çš„æ€§èƒ½</li>
</ul>
<h3 data-id="heading-11">ç¼ºç‚¹</h3>
<ul>
<li>å“ˆå¸Œå†²çªä¼šé™ä½æŸ¥æ‰¾æ•ˆç‡ï¼Œæœ€åæƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦å¯èƒ½é€€åŒ–åˆ° O(n)</li>
<li>éœ€è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨å“ˆå¸Œè¡¨</li>
<li>ä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼Œä¸é€‚åˆæŒ‰é¡ºåºéå†åœºæ™¯</li>
<li>è´Ÿè½½å› å­è¿‡é«˜ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œè¿‡ä½ä¼šæµªè´¹ç©ºé—´</li>
</ul>
<h3 data-id="heading-12">åº”ç”¨åœºæ™¯</h3>
<p>å“ˆå¸ŒæŸ¥æ‰¾é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>éœ€è¦å¿«é€ŸæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ•°æ®ç»“æ„ï¼Œå¦‚å­—å…¸æˆ–æ˜ å°„</li>
<li>å®ç°ç¼“å­˜ç³»ç»Ÿï¼Œæ¯”å¦‚LRUç¼“å­˜ã€å†…å­˜ç¼“å­˜ç­‰</li>
<li>æ•°æ®åº“ç´¢å¼•ï¼Œç‰¹åˆ«æ˜¯ç­‰å€¼æŸ¥è¯¢</li>
<li>ç¬¦å·è¡¨å®ç°ï¼Œå¦‚ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨ä¸­çš„å˜é‡è¡¨</li>
<li>å»é‡æ“ä½œï¼Œåˆ¤æ–­å…ƒç´ æ˜¯å¦å·²å­˜åœ¨</li>
<li>ç½‘é¡µçˆ¬è™«çš„URLå»é‡</li>
</ul>
<h3 data-id="heading-13">ä¸€è‡´æ€§å“ˆå¸Œ</h3>
<p>ä¸€è‡´æ€§å“ˆå¸Œæ˜¯<strong>åˆ†å¸ƒå¼ç³»ç»Ÿ</strong>ä¸­çš„é‡è¦æ¦‚å¿µï¼Œç›®çš„æ˜¯å°½å¯èƒ½å°‘åœ°é‡æ–°åˆ†é…æ•°æ®</p>
<p>è¯¦æƒ…å¯ä»¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.seven97.top%2Fmicroservices%2Fprotocol%2Fconsistencyhash.html" target="_blank" title="https://www.seven97.top/microservices/protocol/consistencyhash.html" ref="nofollow noopener noreferrer">ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</a></p>
<h3 data-id="heading-14">å¸ƒéš†è¿‡æ»¤å™¨</h3>
<p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§ç©ºé—´æ•ˆç‡é«˜çš„æ¦‚ç‡å‹æ•°æ®ç»“æ„ï¼Œåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­</p>
<p>è¯¦æƒ…å¯ä»¥çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.seven97.top%2Fcs-basics%2Fdata-structure%2Fbloomfilter.html" target="_blank" title="https://www.seven97.top/cs-basics/data-structure/bloomfilter.html" ref="nofollow noopener noreferrer">å¸ƒéš†è¿‡æ»¤å™¨</a></p>
<h3 data-id="heading-15">ç›¸å…³çš„ LeetCode çƒ­é—¨é¢˜ç›®</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ftwo-sum%2F" target="_blank" title="https://leetcode.cn/problems/two-sum/" ref="nofollow noopener noreferrer">1. ä¸¤æ•°ä¹‹å’Œ</a>Â - ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•å·²éå†å…ƒç´ ï¼ŒæŸ¥æ‰¾ç›®æ ‡å€¼çš„è¡¥æ•°</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flongest-substring-without-repeating-characters%2F" target="_blank" title="https://leetcode.cn/problems/longest-substring-without-repeating-characters/" ref="nofollow noopener noreferrer">3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a>Â - ä½¿ç”¨å“ˆå¸Œè¡¨è®°å½•å­—ç¬¦æœ€åå‡ºç°çš„ä½ç½®</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsingle-number%2F" target="_blank" title="https://leetcode.cn/problems/single-number/" ref="nofollow noopener noreferrer">136. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—</a>Â - å¯ä»¥ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flru-cache%2F" target="_blank" title="https://leetcode.cn/problems/lru-cache/" ref="nofollow noopener noreferrer">146. LRU ç¼“å­˜</a>Â - ç»“åˆå“ˆå¸Œè¡¨å’ŒåŒå‘é“¾è¡¨å®ç°LRUç¼“å­˜</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fcontains-duplicate%2F" target="_blank" title="https://leetcode.cn/problems/contains-duplicate/" ref="nofollow noopener noreferrer">217. å­˜åœ¨é‡å¤å…ƒç´ </a>Â - ä½¿ç”¨å“ˆå¸Œè¡¨æ£€æŸ¥é‡å¤å…ƒç´ </li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fintersection-of-two-arrays%2F" target="_blank" title="https://leetcode.cn/problems/intersection-of-two-arrays/" ref="nofollow noopener noreferrer">349. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffirst-unique-character-in-a-string%2F" target="_blank" title="https://leetcode.cn/problems/first-unique-character-in-a-string/" ref="nofollow noopener noreferrer">387. å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦</a>Â - ä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•°</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ€§èƒ½æ•°æ®åˆ«å†çè½®è¯¢äº†ï¼PerformanceObserver å¼‚æ­¥æ•è· LCP/CLSï¼Œä¸å¡ä¸»çº¿ç¨‹]]></title>    <link>https://juejin.cn/post/7582808491607375926</link>    <guid>https://juejin.cn/post/7582808491607375926</guid>    <pubDate>2025-12-12T15:38:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582808491607375926" data-draft-id="7582785032852373567" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ€§èƒ½æ•°æ®åˆ«å†çè½®è¯¢äº†ï¼PerformanceObserver å¼‚æ­¥æ•è· LCP/CLSï¼Œä¸å¡ä¸»çº¿ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-12T15:38:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PineappleCoder"/> <meta itemprop="url" content="https://juejin.cn/user/3323167184272627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ€§èƒ½æ•°æ®åˆ«å†çè½®è¯¢äº†ï¼PerformanceObserver å¼‚æ­¥æ•è· LCP/CLSï¼Œä¸å¡ä¸»çº¿ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323167184272627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PineappleCoder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:38:30.000Z" title="Fri Dec 12 2025 15:38:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ æ€§èƒ½ç›‘æ§çš„â€œæœ€å¼ºå¤§è„‘â€ï¼šPerformanceObserver APIï¼Œå¦‚ä½•è®©ä½ å‘Šåˆ«è½®è¯¢çš„å™©æ¢¦ï¼Ÿ</h2>
<blockquote>
<p><strong>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸“æ  - ç¬¬ä¸‰ç¯‡</strong></p>
</blockquote>
<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬èŠåˆ°äº† RUMï¼ˆçœŸå®ç”¨æˆ·ç›‘æ§ï¼‰æ˜¯å¦‚ä½•å¸®åŠ©æˆ‘ä»¬æ‰“ç ´â€œè–›å®šè°”çš„ Bugâ€é­”å’’çš„ã€‚æ—¢ç„¶ RUM æ˜¯æ€§èƒ½ç›‘æ§çš„â€œé›·è¾¾â€ï¼Œé‚£ä¹ˆè°æ¥è´Ÿè´£å®æ—¶ã€ç²¾å‡†åœ°é‡‡é›†æ•°æ®å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆå°±æ˜¯ä»Šå¤©çš„ä¸»è§’â€”â€”<strong>PerformanceObserver API</strong>ã€‚å®ƒå°±åƒæ˜¯æµè§ˆå™¨å†…ç½®çš„â€œé«˜æ€§èƒ½æ•°æ®é‡‡é›†å™¨â€ï¼Œå½»åº•æ”¹å˜äº†æˆ‘ä»¬è·å–æ€§èƒ½æ•°æ®çš„æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-1">âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦ PerformanceObserverï¼Ÿå‘Šåˆ«â€œè€é»„å†â€</h3>
<p>åœ¨ PerformanceObserver å‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬è·å–æ€§èƒ½æ•°æ®çš„æ–¹å¼ï¼Œç®€ç›´å°±æ˜¯ä¸€åœºâ€œå™©æ¢¦â€ï¼š</p>
<h4 data-id="heading-2">ä¼ ç»Ÿæ–¹å¼ï¼šæ€§èƒ½ç›‘æ§çš„â€œè€é»„å†â€</h4>
<ol>
<li>
<p><strong><code>performance.timing</code> ä¸ <code>performance.getEntries()</code>ï¼š</strong></p>
<ul>
<li><strong>é—®é¢˜ï¼š</strong> è¿™äº› API åªèƒ½è·å–<strong>é¡µé¢åŠ è½½å®Œæˆé‚£ä¸€åˆ»</strong>çš„é™æ€æ•°æ®ã€‚å¯¹äºåƒ <strong>First Input Delay (FID)</strong> è¿™ç§å‘ç”Ÿåœ¨ç”¨æˆ·äº¤äº’è¿‡ç¨‹ä¸­çš„åŠ¨æ€æŒ‡æ ‡ï¼Œå®ƒä»¬å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚</li>
<li><strong>ç—›ç‚¹ï¼š</strong> æƒ³è¦è·å–å®æ—¶æ•°æ®ï¼Ÿä½ åªèƒ½<strong>è½®è¯¢</strong>ï¼ˆä¸æ–­åœ°å»é—®ï¼šâ€œæ•°æ®å¥½äº†å—ï¼Ÿå¥½äº†å—ï¼Ÿâ€ï¼‰ã€‚è¿™ç§æ–¹å¼ä¸ä»…æ—¶æœºéš¾ä»¥æŒæ¡ï¼Œè¿˜ä¼šå¸¦æ¥é¢å¤–çš„<strong>æ€§èƒ½å¼€é”€</strong>ï¼Œç”šè‡³å¯èƒ½é˜»å¡ä¸»çº¿ç¨‹ï¼Œè®©é¡µé¢æ›´å¡ï¼</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>ä¸“ä¸šåè¯è§£é‡Šï¼šè½®è¯¢ (Polling)</strong> è½®è¯¢æ˜¯ä¸€ç§è®¡ç®—æœºé€šä¿¡æŠ€æœ¯ï¼ŒæŒ‡å®¢æˆ·ç«¯ç¨‹åºæˆ–è®¾å¤‡ä¸æ–­åœ°å‘æœåŠ¡å™¨ç¨‹åºæˆ–è®¾å¤‡å‘é€è¯·æ±‚ï¼Œä»¥æŸ¥è¯¢æ˜¯å¦æœ‰æ–°çš„æ•°æ®æˆ–çŠ¶æ€æ›´æ–°ã€‚åœ¨å‰ç«¯æ€§èƒ½ç›‘æ§ä¸­ï¼Œè½®è¯¢æ„å‘³ç€éœ€è¦å®šæ—¶æ£€æŸ¥æ€§èƒ½æ•°æ®æ˜¯å¦ç”Ÿæˆï¼Œæ•ˆç‡ä½ä¸‹ä¸”æ¶ˆè€—èµ„æºã€‚</p>
</blockquote>
<h4 data-id="heading-3">âœ¨ ä¼˜åŒ–æ–¹æ¡ˆï¼šäº‹ä»¶é©±åŠ¨çš„â€œé«˜æ€§èƒ½å¼•æ“â€</h4>
<p>PerformanceObserver çš„å‡ºç°ï¼Œå½»åº•è§£å†³äº†è½®è¯¢çš„ç—›ç‚¹ã€‚å®ƒæä¾›äº†ä¸€ç§<strong>äº‹ä»¶é©±åŠ¨ã€å¼‚æ­¥å›è°ƒ</strong>çš„æœºåˆ¶ï¼š</p>
<ul>
<li><strong>é«˜æ•ˆã€éé˜»å¡ï¼š</strong> å®ƒåœ¨æµè§ˆå™¨è®°å½•åˆ°æ€§èƒ½äº‹ä»¶æ—¶ï¼Œä¼š<strong>å¼‚æ­¥</strong>é€šçŸ¥ä½ ï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
<li><strong>å®æ—¶æ€§ï¼š</strong> èƒ½å¤Ÿå®æ—¶æ•è·åŠ¨æ€æŒ‡æ ‡ï¼Œå¦‚ç”¨æˆ·é¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼ˆFIDï¼‰å’Œå¸ƒå±€åç§»ï¼ˆCLSï¼‰ã€‚</li>
<li><strong>å¯è®¢é˜…ï¼š</strong> ä½ å¯ä»¥åƒè®¢é˜…æŠ¥çº¸ä¸€æ ·ï¼Œé€‰æ‹©ä½ æ„Ÿå…´è¶£çš„æ€§èƒ½äº‹ä»¶ç±»å‹ã€‚</li>
</ul>
<h3 data-id="heading-4">ğŸ”„ PerformanceObserver çš„å·¥ä½œåŸç†ï¼šä¸‰æ­¥èµ°æˆ˜ç•¥</h3>
<p>PerformanceObserver çš„ä½¿ç”¨æµç¨‹éå¸¸ç®€æ´ï¼Œå¯ä»¥æ¦‚æ‹¬ä¸ºâ€œåˆ›å»ºã€æŒ‡å®šã€æ¥æ”¶â€ä¸‰æ­¥èµ°æˆ˜ç•¥ï¼š</p>
<h4 data-id="heading-5">æ­¥éª¤ 1ï¼šåˆ›å»ºè§‚æµ‹å™¨ï¼ˆObserverï¼‰</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª PerformanceObserver å®ä¾‹ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ª<strong>å›è°ƒå‡½æ•° (callback)</strong> ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
 Â <span class="hljs-comment">// æµè§ˆå™¨åœ¨è®°å½•åˆ°æ€§èƒ½æ¡ç›®æ—¶ï¼Œä¼šè‡ªåŠ¨å¼‚æ­¥è§¦å‘è¿™ä¸ªå›è°ƒå‡½æ•°</span>
 Â <span class="hljs-comment">// list.getEntries() åŒ…å«äº†æ‰€æœ‰è¢«è§‚æµ‹åˆ°çš„æ€§èƒ½æ•°æ®</span>
})
</code></pre>
<blockquote>
<p><strong>å·¥ä½œåŸç†æ­ç§˜ï¼š</strong> æµè§ˆå™¨åœ¨å†…éƒ¨è®°å½•æ€§èƒ½æ•°æ®æ—¶ï¼Œä¼šæ£€æŸ¥æ˜¯å¦æœ‰ PerformanceObserver åœ¨ç›‘å¬ã€‚å¦‚æœæœ‰ï¼Œå®ƒå°±ä¼šå°†æœ€æ–°çš„æ€§èƒ½æ¡ç›®ï¼ˆPerformance Entryï¼‰æ‰“åŒ…ï¼Œå¹¶åœ¨<strong>ä¸‹ä¸€ä¸ªç©ºé—²æ—¶æœº</strong>ï¼ˆå¼‚æ­¥ï¼‰è°ƒç”¨ä½ æä¾›çš„å›è°ƒå‡½æ•°ã€‚</p>
</blockquote>
<h4 data-id="heading-6">æ­¥éª¤ 2ï¼šæŒ‡å®šè§‚æµ‹ç›®æ ‡ï¼ˆObserveï¼‰</h4>
<p>åˆ›å»ºå¥½è§‚æµ‹å™¨åï¼Œä½ éœ€è¦æ˜ç¡®å‘Šè¯‰å®ƒï¼šâ€œ<strong>æˆ‘æƒ³çœ‹å“ªäº›æ•°æ®ï¼Ÿ</strong> â€ è¿™é€šè¿‡ <code>observer.observe()</code> æ–¹æ³•å®ç°ï¼Œä½ éœ€è¦æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ª <code>entryTypes</code>ã€‚</p>
<pre><code class="hljs language-css" lang="css">observer<span class="hljs-selector-class">.observe</span>({
 Â entryTypes: [<span class="hljs-string">'largest-contentful-paint'</span>, <span class="hljs-string">'first-input'</span>, <span class="hljs-string">'layout-shift'</span>]
})
</code></pre>
<p><strong>å¸¸è§çš„æ ¸å¿ƒè§‚æµ‹æŒ‡æ ‡ï¼š</strong></p>






























<table><thead><tr><th><code>entryType</code></th><th>å¯¹åº”æŒ‡æ ‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>largest-contentful-paint</code></td><td><strong>LCP</strong></td><td>æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ï¼Œè¡¡é‡åŠ è½½é€Ÿåº¦ã€‚</td></tr><tr><td><code>first-input</code></td><td><strong>FID</strong></td><td>é¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼Œè¡¡é‡äº¤äº’å“åº”é€Ÿåº¦ã€‚</td></tr><tr><td><code>layout-shift</code></td><td><strong>CLS</strong></td><td>ç´¯ç§¯å¸ƒå±€åç§»ï¼Œè¡¡é‡è§†è§‰ç¨³å®šæ€§ã€‚</td></tr><tr><td><code>resource</code></td><td>Resource Timing</td><td>èµ„æºåŠ è½½ï¼ˆå›¾ç‰‡ã€CSSã€JSï¼‰çš„è¯¦ç»†è€—æ—¶ã€‚</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c1030d0b7734d5790c13268681c7981~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGluZWFwcGxlQ29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766158710&amp;x-signature=RlG6%2FG%2BVARR%2FLPfcSrJVGqv7udY%3D" alt="PerformanceObserver ä¸ä¼ ç»Ÿæ–¹å¼å¯¹æ¯”å›¾" loading="lazy"/></p>
<h4 data-id="heading-7">æ­¥éª¤ 3ï¼šæ¥æ”¶å’Œå¤„ç†æ•°æ®ï¼ˆCallbackï¼‰</h4>
<p>åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ <code>list.getEntries()</code> è·å–åˆ°æ‰€æœ‰æ–°äº§ç”Ÿçš„æ€§èƒ½æ¡ç›®ã€‚æ¯ä¸ªæ¡ç›®ï¼ˆEntryï¼‰éƒ½æ˜¯ä¸€ä¸ªåŒ…å«è¯¦ç»†ä¿¡æ¯çš„å¯¹è±¡ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼šåŸºç¡€ç”¨æ³•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
 Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> list.<span class="hljs-title function_">getEntries</span>()) {
 Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒ‡æ ‡åç§°ï¼š'</span>, entry.<span class="hljs-property">name</span>)
 Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹æ—¶é—´ï¼š'</span>, entry.<span class="hljs-property">startTime</span>)
 Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŒç»­æ—¶é—´ï¼š'</span>, entry.<span class="hljs-property">duration</span>)
â€‹
 Â  Â <span class="hljs-comment">// é’ˆå¯¹ä¸åŒæŒ‡æ ‡è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä¾‹å¦‚è·å– CLS çš„å…·ä½“å€¼</span>
 Â  Â <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">entryType</span> === <span class="hljs-string">'layout-shift'</span>) {
 Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'CLS å€¼ï¼š'</span>, entry.<span class="hljs-property">value</span>)
 Â   }
 Â  Â <span class="hljs-comment">// åœ¨è¿™é‡Œå°†æ•°æ®ä¸ŠæŠ¥åˆ° RUM æœåŠ¡å™¨</span>
  }
})
â€‹
observer.<span class="hljs-title function_">observe</span>({
 Â <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'largest-contentful-paint'</span>, <span class="hljs-string">'first-input'</span>, <span class="hljs-string">'layout-shift'</span>]
})
</code></pre>
<h3 data-id="heading-8">æ€»ç»“ï¼šPerformanceObserver çš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<p>PerformanceObserver æ˜¯å‰ç«¯æ€§èƒ½ç›‘æ§é¢†åŸŸçš„ä¸€æ¬¡é‡å¤§é£è·ƒï¼Œå®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>å®æ—¶æ€§ï¼š</strong> <strong>äº‹ä»¶é©±åŠ¨</strong>ï¼Œæ€§èƒ½æ•°æ®ä¸€äº§ç”Ÿå°±èƒ½è¢«æ•è·ï¼Œæ— éœ€ä½æ•ˆçš„è½®è¯¢ã€‚</li>
<li><strong>ä½å¼€é”€ï¼š</strong> <strong>å¼‚æ­¥æ‰§è¡Œ</strong>ï¼Œä¸å ç”¨ä¸»çº¿ç¨‹èµ„æºï¼Œå¯¹ç”¨æˆ·ä½“éªŒå½±å“æå°ã€‚</li>
<li><strong>å¯æ‰©å±•ï¼š</strong> é€šè¿‡ <code>entryTypes</code>ï¼Œå¯ä»¥è½»æ¾<strong>è®¢é˜…</strong>æœªæ¥æµè§ˆå™¨æ–°å¢çš„å„ç§æ€§èƒ½äº‹ä»¶ã€‚</li>
<li><strong>æ˜“é›†æˆï¼š</strong> å®ƒæ˜¯ç°ä»£ RUM ç›‘æ§ä½“ç³»ä¸­ï¼Œæœ€æ ¸å¿ƒã€æœ€å¯é çš„æ•°æ®é‡‡é›†ç»„ä»¶ã€‚</li>
</ul>
<p><strong>ç»“è®ºï¼š</strong> PerformanceObserver æ˜¯æ„å»ºå‰ç«¯æ€§èƒ½å¯è§‚æµ‹æ€§çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒè®©æˆ‘ä»¬ä»â€œçŒœæµ‹æ€§èƒ½â€è¿ˆå‘äº† <strong>â€œæ•°æ®é©±åŠ¨çš„æ€§èƒ½ä¼˜åŒ–â€</strong> ï¼Œè®©æ€§èƒ½æ•°æ®é‡‡é›†å˜å¾—é«˜æ•ˆã€ä¼˜é›…ã€‚</p>
<hr/>
<p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Šï¼š</strong> æ—¢ç„¶æˆ‘ä»¬èƒ½ç²¾å‡†åœ°æµ‹é‡æ€§èƒ½äº†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å¦‚ä½•<strong>ä¸»åŠ¨å‡ºå‡»</strong>ï¼Œè®©æµè§ˆå™¨æå‰åŠ è½½èµ„æºã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†æ·±å…¥è®²è§£å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œé¢„åŠ è½½ç¥å™¨â€â€”â€”<strong>æµè§ˆå™¨èµ„æºæç¤ºç¬¦</strong>ã€‚æ•¬è¯·æœŸå¾…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«å­—ä½“é—ªçƒ / é¦–å±å¡é¡¿ï¼preload è®©å…³é”®èµ„æº â€œé«˜ä¼˜å…ˆçº§â€ æå‰åˆ°]]></title>    <link>https://juejin.cn/post/7582787460418797610</link>    <guid>https://juejin.cn/post/7582787460418797610</guid>    <pubDate>2025-12-12T15:43:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582787460418797610" data-draft-id="7582785032852389951" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«å­—ä½“é—ªçƒ / é¦–å±å¡é¡¿ï¼preload è®©å…³é”®èµ„æº â€œé«˜ä¼˜å…ˆçº§â€ æå‰åˆ°"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-12T15:43:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PineappleCoder"/> <meta itemprop="url" content="https://juejin.cn/user/3323167184272627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«å­—ä½“é—ªçƒ / é¦–å±å¡é¡¿ï¼preload è®©å…³é”®èµ„æº â€œé«˜ä¼˜å…ˆçº§â€ æå‰åˆ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323167184272627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PineappleCoder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T15:43:54.000Z" title="Fri Dec 12 2025 15:43:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âš¡ï¸ æµè§ˆå™¨â€œæœªåœå…ˆçŸ¥â€çš„ç§˜å¯†ï¼šèµ„æºæç¤ºç¬¦ï¼Œè®©ä½ çš„é¡µé¢åŠ è½½é€Ÿåº¦å¿«äººä¸€æ­¥ï¼</h2>
<blockquote>
<p><strong>å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸“æ  - ç¬¬å››ç¯‡</strong></p>
</blockquote>
<p>åœ¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„æˆ˜åœºä¸Šï¼Œæ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œå°¤å…¶æ˜¯åœ¨é¡µé¢åŠ è½½çš„å…³é”®æ—¶åˆ»ã€‚æˆ‘ä»¬ä¸Šä¸€ç¯‡è®²åˆ° PerformanceObserver å¯ä»¥ç²¾å‡†åœ°æµ‹é‡æ€§èƒ½ï¼Œä½†æµ‹é‡åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œæ›´é‡è¦çš„æ˜¯<strong>ä¸»åŠ¨å‡ºå‡»</strong>ï¼Œè®©æµè§ˆå™¨åœ¨ç”¨æˆ·éœ€è¦èµ„æºä¹‹å‰ï¼Œå°±æå‰åšå¥½å‡†å¤‡ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ­ç§˜æµè§ˆå™¨â€œæœªåœå…ˆçŸ¥â€çš„ç§˜å¯†æ­¦å™¨â€”â€”<strong>èµ„æºæç¤ºç¬¦ï¼ˆResource Hintsï¼‰</strong> ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ’¡ ä»€ä¹ˆæ˜¯èµ„æºæç¤ºç¬¦ï¼Ÿ</h3>
<p>èµ„æºæç¤ºç¬¦ï¼ˆResource Hintsï¼‰æ˜¯ <code>&lt;link&gt;</code> æ ‡ç­¾ <code>rel</code> å±æ€§çš„ä¸€ç»„ç‰¹æ®Šå€¼ï¼Œç”¨äº<strong>å‘Šè¯‰æµè§ˆå™¨æœªæ¥å³å°†å‘ç”Ÿçš„èµ„æºå¤„ç†ç­–ç•¥ï¼Œè®©å®ƒæå‰åšå‡†å¤‡</strong>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒä»¬æ˜¯å¼€å‘è€…ç»™æµè§ˆå™¨ä¸‹è¾¾çš„â€œé¢„å¤„ç†æŒ‡ä»¤â€ï¼Œè®©æµè§ˆå™¨åœ¨ç©ºé—²æˆ–å…³é”®æ—¶åˆ»ï¼Œæå‰å®Œæˆä¸€äº›è€—æ—¶çš„ç½‘ç»œæ“ä½œï¼Œä»è€Œï¼š</p>
<ul>
<li><strong>æé«˜ç½‘é¡µçš„é¦–å±åŠ è½½æ€§èƒ½</strong></li>
<li><strong>å‡å°‘ DNSã€TCPã€TLS ç­‰è¿æ¥å»¶è¿Ÿ</strong></li>
<li><strong>é¢„åŠ è½½å…³é”®æˆ–é¢„æµ‹æ€§èµ„æº</strong></li>
</ul>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- èµ„æºæç¤ºç¬¦ç¤ºä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"//cdn.example.com"</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">ğŸ”§ å››å¤§é‡‘åˆšï¼šèµ„æºæç¤ºç¬¦çš„å®¶æ—æˆå‘˜</h3>
<p>èµ„æºæç¤ºç¬¦å®¶æ—ä¸»è¦æœ‰å››ä¸ªæ ¸å¿ƒæˆå‘˜ï¼Œå®ƒä»¬å„æœ‰ç¥é€šï¼Œé’ˆå¯¹ä¸åŒçš„ä¼˜åŒ–åœºæ™¯ï¼š</p>
<h4 data-id="heading-3">1. dns-prefetchï¼šæœ€å°å¼€é”€çš„â€œæ‰“å¬â€</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;link <span class="hljs-attr">rel</span>=<span class="hljs-string">"dns-prefetch"</span> href=<span class="hljs-string">"//api.example.com"</span>&gt;
</code></pre>
<ul>
<li>
<p><strong>ä½œç”¨ï¼š</strong> ä»…æå‰<strong>è§£æ DNS</strong>ï¼Œå°†åŸŸåè§£æä¸º IP åœ°å€ï¼Œ<strong>ä¸å»ºç«‹è¿æ¥</strong>ã€‚</p>
</li>
<li>
<p><strong>å¼€é”€ï¼š</strong> æœ€å°ï¼Œå…¼å®¹æ€§æœ€å¥½ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>éå…³é”®çš„<strong>ç¬¬ä¸‰æ–¹èµ„æº</strong>ï¼ˆå¦‚åˆ†æè„šæœ¬ã€å¹¿å‘Šã€æ’ä»¶ï¼‰ã€‚</li>
<li>å¯ä½œä¸º <code>preconnect</code> çš„<strong>é™çº§æ–¹æ¡ˆ</strong>ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>ä¸“ä¸šåè¯è§£é‡Šï¼šDNS è§£æ</strong> DNSï¼ˆDomain Name Systemï¼‰è§£ææ˜¯å°†äººç±»å¯è¯»çš„åŸŸåï¼ˆå¦‚ <code>www.google.com</code>ï¼‰è½¬æ¢ä¸ºæœºå™¨å¯è¯»çš„ IP åœ°å€ï¼ˆå¦‚ <code>142.250.190.14</code>ï¼‰çš„è¿‡ç¨‹ã€‚è¿™æ˜¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„èµ·ç‚¹ï¼Œé€šå¸¸éœ€è¦å‡ ååˆ°å‡ ç™¾æ¯«ç§’ã€‚</p>
</blockquote>
<h4 data-id="heading-4">2. preconnectï¼šæå‰æ¡æ‰‹çš„â€œè€æœ‹å‹â€</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;link <span class="hljs-attr">rel</span>=<span class="hljs-string">"preconnect"</span> href=<span class="hljs-string">"//cdn.example.com"</span> crossorigin&gt;
</code></pre>
<ul>
<li>
<p><strong>ä½œç”¨ï¼š</strong> å®Œæˆ <strong>DNS è§£æ + TCP æ¡æ‰‹ + TLS åŠ å¯†æ¡æ‰‹</strong>ï¼Œå…¨æµç¨‹å»ºç«‹è¿æ¥ã€‚</p>
</li>
<li>
<p><strong>æ•ˆæœï¼š</strong> æå¤§åœ°æ¶ˆé™¤äº†åç»­èµ„æºè¯·æ±‚çš„ç½‘ç»œå»¶è¿Ÿã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨æ—¶æœºï¼š</strong></p>
<ul>
<li><strong>å­—ä½“åº“</strong>ã€<strong>æ ¸å¿ƒ API</strong>ã€<strong>CDN é™æ€èµ„æº</strong>ç­‰<strong>å…³é”®ç¬¬ä¸‰æ–¹åŸŸå</strong>ã€‚</li>
<li><strong>æ³¨æ„ï¼š</strong> å»ºç«‹è¿æ¥ä¼šæ¶ˆè€—èµ„æºï¼Œå»ºè®®<strong>æ§åˆ¶æ•°é‡</strong>ï¼ˆä¸€èˆ¬å»ºè®® â‰¤6 ä¸ªï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4cc6f82b3394e98a785b7e129668ff0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGluZWFwcGxlQ29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766159033&amp;x-signature=UXJxSfUeLSVswStcnNEtoeWGHSw%3D" alt="Preconnect æå‰æ¡æ‰‹è¿‡ç¨‹ç¤ºæ„å›¾" loading="lazy"/></p>
<h4 data-id="heading-5">3. preloadï¼šé«˜ä¼˜å…ˆçº§çš„â€œå¿«é€’â€</h4>
<pre><code class="hljs language-bash" lang="bash">&lt;<span class="hljs-built_in">link</span> rel=<span class="hljs-string">"preload"</span> href=<span class="hljs-string">"font.woff2"</span> as=<span class="hljs-string">"font"</span> <span class="hljs-built_in">type</span>=<span class="hljs-string">"font/woff2"</span> crossorigin&gt;
</code></pre>
<ul>
<li>
<p><strong>ä½œç”¨ï¼š</strong> ç›´æ¥ä»¥<strong>é«˜ä¼˜å…ˆçº§</strong>ä¸‹è½½å…³é”®èµ„æºï¼Œä½†<strong>ä¸‹è½½åæš‚ä¸æ‰§è¡Œ</strong>ã€‚</p>
</li>
<li>
<p><strong>ç‰¹ç‚¹ï¼š</strong> æå‰è§¦å‘å…³é”®èµ„æºçš„åŠ è½½ï¼Œç¡®ä¿èµ„æºåœ¨éœ€è¦æ—¶ç«‹å³å¯ç”¨ã€‚</p>
</li>
<li>
<p><strong>å¸¸è§åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>CSS å®šä¹‰çš„å­—ä½“æ–‡ä»¶</strong>ï¼ˆé¿å…æ–‡æœ¬é—ªçƒ FOUT/FOITï¼‰ã€‚</li>
<li><strong>èƒŒæ™¯å›¾æˆ– LCP å…ƒç´ å›¾ç‰‡</strong>ï¼ˆåŠ é€Ÿæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼‰ã€‚</li>
<li><strong>é¦–å±å¿…éœ€çš„åŠ¨æ€è„šæœ¬</strong>ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> <code>preload</code> å¿…é¡»é…åˆ <code>as</code> å±æ€§æŒ‡å®šèµ„æºç±»å‹ï¼Œå¦åˆ™æµè§ˆå™¨ä¼šé‡å¤ä¸‹è½½ã€‚</p>
</blockquote>
<h4 data-id="heading-6">4. prefetchï¼šç©ºé—²æ—¶çš„â€œä¸‹ä¸€ç«™â€</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;link <span class="hljs-attr">rel</span>=<span class="hljs-string">"prefetch"</span> href=<span class="hljs-string">"next-page.js"</span>&gt;
</code></pre>
<ul>
<li>
<p><strong>ä½œç”¨ï¼š</strong> åœ¨<strong>å½“å‰é¡µåŠ è½½å®Œæˆå</strong>ï¼Œåˆ©ç”¨æµè§ˆå™¨<strong>ç©ºé—²æ—¶é—´</strong>è¯·æ±‚èµ„æºã€‚</p>
</li>
<li>
<p><strong>ç‰¹ç‚¹ï¼š</strong> ä¼˜å…ˆçº§æœ€ä½ï¼Œä¸ä¼šä¸å½“å‰é¡µé¢çš„å…³é”®èµ„æºç«äº‰å¸¦å®½ã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>ä¼˜åŒ–â€œä¸‹ä¸€ä¸ªé¡µé¢â€çš„åŠ è½½ä½“éªŒ</strong>ã€‚</li>
<li><strong>SPA è·¯ç”±</strong>ä¸­ï¼Œé¢„å–ç”¨æˆ·å¯èƒ½è®¿é—®çš„ä¸‹ä¸€ä¸ª <code>chunk</code>ã€‚</li>
<li>åŸºäº<strong>ç”¨æˆ·è¡Œä¸ºé¢„æµ‹</strong>çš„é¢„åŠ è½½ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-7">ğŸ’¡ æ€»ç»“ï¼šè®©èµ„æºâ€œæ—©ä¸€æ­¥â€å‡†å¤‡å¥½</h3>
<p>èµ„æºæç¤ºç¬¦å®¶æ—çš„<strong>ç›®æ ‡ä¸€è‡´ï¼šè®©èµ„æºâ€œæ—©ä¸€æ­¥â€å‡†å¤‡å¥½</strong>ã€‚</p>
<p>å®ƒä»¬çš„æ ¸å¿ƒåŒºåˆ«åœ¨äº<strong>æ—¶æœºä¸æ·±åº¦</strong>ï¼š</p>








































<table><thead><tr><th>æç¤ºç¬¦</th><th>æ·±åº¦ï¼ˆæå‰åˆ°å“ªä¸€æ­¥ï¼‰</th><th>æ—¶æœºï¼ˆä½•æ—¶è§¦å‘ï¼‰</th><th>ä¼˜å…ˆçº§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>dns-prefetch</strong></td><td>ä»… DNS è§£æ</td><td>å°½æ—©</td><td>ä½</td><td>éå…³é”®ç¬¬ä¸‰æ–¹èµ„æº</td></tr><tr><td><strong>preconnect</strong></td><td>DNS + TCP + TLS</td><td>å°½æ—©</td><td>ä¸­</td><td>å…³é”®ç¬¬ä¸‰æ–¹åŸŸå</td></tr><tr><td><strong>preload</strong></td><td>ä¸‹è½½èµ„æº</td><td>å°½æ—©ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰</td><td>é«˜</td><td>å½“å‰é¡µé¢çš„å…³é”®èµ„æº</td></tr><tr><td><strong>prefetch</strong></td><td>ä¸‹è½½èµ„æº</td><td>é¡µé¢ç©ºé—²æ—¶</td><td>æœ€ä½</td><td>ä¸‹ä¸€ä¸ªé¡µé¢çš„èµ„æº</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/453201fa28564561a2662ccd2df38974~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGluZWFwcGxlQ29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766159033&amp;x-signature=akWd5SlYkHI6nY69nxwtlLjzNC0%3D" alt="èµ„æºæç¤ºç¬¦æ¦‚è§ˆå›¾" loading="lazy"/></p>
<p><strong>é‡è¦æé†’ï¼š</strong> èµ„æºæç¤ºç¬¦è™½å¥½ï¼Œä½†<strong>è¿‡åº¦ä½¿ç”¨</strong>å¯èƒ½å¯¼è‡´æµªè´¹å¸¦å®½æˆ–å»ºç«‹è¿‡å¤šè¿æ¥ï¼Œåè€Œæ‹–æ…¢æ€§èƒ½ã€‚è¯·åŠ¡å¿…æ ¹æ®å®é™…çš„æ€§èƒ½æ•°æ®ï¼ˆæ¯”å¦‚ RUM é‡‡é›†çš„æ•°æ®ï¼‰æ¥åˆç†è§„åˆ’å’Œä½¿ç”¨ã€‚</p>
<hr/>
<p><strong>ä¸‹ä¸€ç¯‡é¢„å‘Šï¼š</strong> æ—¢ç„¶èµ„æºéƒ½æå‰åŠ è½½äº†ï¼Œå¦‚ä½•è®©å®ƒä»¬åœ¨ä¸‹æ¬¡è®¿é—®æ—¶<strong>æ›´å¿«</strong>å‡ºç°å‘¢ï¼Ÿä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å‰ç«¯æ€§èƒ½ä¼˜åŒ–çš„â€œèŠ‚æµå¤§å¸ˆâ€â€”â€”<strong>HTTP ç¼“å­˜æœºåˆ¶</strong>ã€‚æ•¬è¯·æœŸå¾…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘3. Linuxï¼ˆAndroidï¼‰åº•å±‚å†…å­˜ç®¡ç†æœºåˆ¶æ¦‚è¿°]]></title>    <link>https://juejin.cn/post/7582846276505681958</link>    <guid>https://juejin.cn/post/7582846276505681958</guid>    <pubDate>2025-12-12T16:01:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582846276505681958" data-draft-id="7582791876367122470" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘3. Linuxï¼ˆAndroidï¼‰åº•å±‚å†…å­˜ç®¡ç†æœºåˆ¶æ¦‚è¿°"/> <meta itemprop="keywords" content="æ¶æ„,æ€§èƒ½ä¼˜åŒ–,ç›‘æ§"/> <meta itemprop="datePublished" content="2025-12-12T16:01:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lei_official"/> <meta itemprop="url" content="https://juejin.cn/user/2351234021066314"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘3. Linuxï¼ˆAndroidï¼‰åº•å±‚å†…å­˜ç®¡ç†æœºåˆ¶æ¦‚è¿°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2351234021066314/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lei_official
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T16:01:15.000Z" title="Fri Dec 12 2025 16:01:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>Android å¸Œæœ›æä¾›ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªå®Œæ•´çš„å¼€æ”¾æ‰‹æœºå¹³å°è§£å†³æ–¹æ¡ˆã€‚å®ƒå°†ä»¥ Linux ä¸ºåŸºç¡€ï¼Œè¿™ä¸€ç‚¹å’Œå¾·å·ä»ªå™¨ä¸€æ ·ï¼Œä½†å®ƒåŒæ—¶ä¹Ÿå°†æä¾›å…¶ä»–æ‰€æœ‰å¿…è¦çš„ç»„ä»¶ï¼›æ‰‹æœºå‚å•†åªéœ€è¦ç”¨è¿™ä¸€ä¸ªç³»ç»Ÿå°±å¯ä»¥æ¨å‡ºè‡ªå·±çš„è®¾å¤‡ã€‚Android è¿˜å°†ä¸ºåº”ç”¨å¼€å‘è€…æä¾›ç»Ÿä¸€çš„ç¼–ç¨‹æ¨¡å‹ï¼Œè¿™æ ·ä»–ä»¬çš„åº”ç”¨ç¨‹åºå°±å¯ä»¥åœ¨æ‰€æœ‰çš„è®¾å¤‡ä¸Šè¿è¡Œã€‚é€šè¿‡é‡‡ç”¨ç»Ÿä¸€çš„å¹³å°æ¥æ”¯æŒæ‰€æœ‰è®¾å¤‡ï¼ŒAndroid èƒ½ç®€åŒ–æ‰‹æœºå‚å•†å’Œå¼€å‘è€…çš„å·¥ä½œã€‚â€”â€”ã€ŠAndroid ä¼ å¥‡ã€‹</p>
</blockquote>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54f92a26869f4e63b3b1b2e35ba3dffd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766160113&amp;x-signature=1J62LQ9SRapv1%2FA7dOeToFI%2BUnA%3D" alt="lowhighmem.png" width="80%" loading="lazy"/>
<h2 data-id="heading-0">å‰è¨€ï¼šLinux å†…å­˜ç®¡ç†çš„é‡è¦æ€§</h2>
<p><strong>å†…å­˜</strong> ä½œä¸ºåº”ç”¨æ€§èƒ½æŒ‡æ ‡ä¸­éå¸¸é‡è¦çš„ä¸€é¡¹ï¼Œä¼šå¯¹åº”ç”¨è½¯ä»¶çš„ç¨³å®šæ€§ã€æµç•…æ€§äº§ç”Ÿç›´æ¥å½±å“ã€‚å¦‚æœåº”ç”¨å†…å­˜ä½¿ç”¨ä¸å½“ï¼Œä¼šå¯¼è‡´é¢‘ç¹å‘ç”Ÿ GCï¼Œè€Œ JVM çš„ GC å…·æœ‰ <code>Stop The World</code> çš„ç‰¹æ€§ï¼Œè¿™å°†å¼•èµ·åŒ…æ‹¬ UI åœ¨å†…çš„å…¨éƒ¨çº¿ç¨‹å¡é¡¿ã€‚æ›´æœ‰ç”šè€…ï¼Œæ— æ³•å›æ”¶çš„å†…å­˜ä¼šè€—å°½ç³»ç»Ÿåˆ†é…ç»™åº”ç”¨çš„å¯ç”¨ç©ºé—´ï¼Œæœ€ç»ˆå‘ç”Ÿ OOMã€‚å…¸å‹çš„é—®é¢˜åœºæ™¯æœ‰å†…å­˜æ³„æ¼ã€å†…å­˜æŠ–åŠ¨ç­‰ã€‚</p>
<p>å¯ä»¥è¯´ï¼Œåº”ç”¨çš„å¤§éƒ¨åˆ†æ€§èƒ½é—®é¢˜éƒ½å¯ä»¥å½’ç»“åœ¨ <strong>å†…å­˜</strong> ä¸Šï¼Œè¦æƒ³ä¿è¯åº”ç”¨å…·æœ‰è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œé¦–å½“å…¶å†²è¦è§£å†³çš„å°±æ˜¯å†…å­˜é—®é¢˜ã€‚å³ä½¿åº”ç”¨å½“å‰ä¸å­˜åœ¨è¿™æ–¹é¢çš„é—®é¢˜ï¼Œä½†æ˜¯éšç€åŠŸèƒ½çš„ä¸æ–­è¿­ä»£ï¼Œæ¶æ„ä¹Ÿå¿…ç„¶é€æ¸è…åŒ–ï¼Œå¦‚æœæ²¡æœ‰å…¨é¢å®Œå–„çš„å†…å­˜ç›‘æ§å’Œé¢„è­¦æœºåˆ¶ï¼Œå°±éš¾ä»¥åšåˆ°åœ¨å†…å­˜é—®é¢˜å‘ç”Ÿä¹‹å‰ï¼Œé˜²æ‚£äºæœªç„¶ã€‚</p>
<p>å¯¹äºå†…å­˜é—®é¢˜ï¼Œæˆ‘ä»¬ä¸ä»…è¦çŸ¥å…¶ç„¶ï¼Œè¿˜è¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼ŒAndroid åº•å±‚æ˜¯åŸºäº Linux å®ç°çš„ï¼Œå…¶å†…å­˜æœºåˆ¶ä¹Ÿæ˜¯è„±èƒäºç»å…¸çš„ Linux å†…å­˜ç®¡ç†ã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œè¿˜å°†ä»‹ç»å‡ ä¸ªå¾ˆæœ‰ç”¨çš„ shell å‘½ä»¤ï¼ŒåŒ…å« <code>dumpsys meminfo</code>ã€<code>cat /proc/[pid]/status</code> ç­‰ç­‰ï¼Œç”¨å¥½è¿™äº›å‘½ä»¤ï¼Œä¼šæ˜¯å†…å­˜åˆ†æè¿‡ç¨‹ä¸­çš„ä¸€å¤§åŠ©åŠ›ã€‚</p>
<blockquote>
<p>å¤‡æ³¨ï¼šæœ¬æ–‡æ‰€æœ‰çš„å‘½ä»¤éƒ½çœç•¥äº†å¼€å¤´çš„ <code>adb shell</code>ã€‚</p>
</blockquote>
<h2 data-id="heading-1">dumpsys meminfoï¼šæŸ¥çœ‹è¿›ç¨‹å½“å‰çš„å†…å­˜ä½¿ç”¨æƒ…å†µ</h2>
<p>åœ¨ç”µè„‘æ§åˆ¶å°æ‰§è¡Œ <code>adb shell dumpsys meminfo [packageName]</code>ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥è¿›ç¨‹å½“å‰å†…å­˜ä½¿ç”¨æƒ…å†µã€‚</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell dumpsys meminfo com.google.samples.apps.nowinandroid.demo.debug
Applications Memory Usage (<span class="hljs-keyword">in</span> Kilobytes):
Uptime: 655869283 Realtime: 912305084

** MEMINFO <span class="hljs-keyword">in</span> pid 22144 [com.google.samples.apps.nowinandroid.demo.debug] **
                   Pss  Private  Private  SwapPss      Rss     Heap     Heap     Heap
                 Total    Dirty    Clean    Dirty    Total     Size    Alloc     Free
                ------   ------   ------   ------   ------   ------   ------   ------
  Native Heap    11347    11336        0     9038    12196    31844    20762     7264
  Dalvik Heap     9079     9060        0     1768     9740   108170     9866    98304
[ä¸‹ç•¥]
</code></pre>
<p>åœ¨ <code>Private Dirty</code> åˆ—ä¸­ï¼Œè®°å½•äº† Native å’Œ Dalvikï¼ˆJavaï¼‰å†…å­˜ä½¿ç”¨é‡ï¼Œè€Œ <code>dirty</code> çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿä»¥åŠ <code>clean</code>, <code>Rss</code>, <code>Pss</code>, <code>Swat</code> åˆ†åˆ«åˆä»£è¡¨äº†ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-2">è™šæ‹Ÿå†…å­˜ï¼ˆVMAï¼‰ä¸ç‰©ç†å†…å­˜ï¼ˆPhysical Memoryï¼‰</h3>
<p>è¿™äº›éƒ½æ˜¯ Linux ç¯å¢ƒä¸‹å†…å­˜ç®¡ç†çš„æ¦‚å¿µï¼Œç«™åœ¨å†…æ ¸çš„è§†è§’ä¸‹ï¼Œå†…å­˜åˆ†é…çš„æœ€å°ç²’åº¦æ˜¯ <code>pages</code>ï¼ˆåˆ†é¡µï¼‰ï¼Œä¸€ä¸ª page å¤§å°æ˜¯ 4KBï¼Œè¿™æ˜¯ Linux å†…æ ¸çš„åŸºç¡€é¡µå¤§å°ï¼Œæ˜¯å†…å­˜ç®¡ç†çš„æœ€å°å•ä½ï¼Œ<code>mmap()</code>/<code>malloc()</code>/<code>åŒ¿åé¡µ</code> æœ€ç»ˆéƒ½æ˜¯æŒ‰ç…§ 4KB è¿›è¡Œå¯¹é½ã€‚pages åœ¨ <strong>â€œè™šæ‹Ÿå†…å­˜åŒºï¼ˆVirtual Memory Areaï¼ŒVMAï¼‰â€</strong> ä¸­è¿›è¡Œç®¡ç†å’Œç»„ç»‡ï¼Œå®ƒè·ŸçœŸå®å†…å­˜åŒºæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œé€šè¿‡ VMAï¼Œå¯ä»¥å°†ç¢ç‰‡åŒ–çš„çœŸå®å†…å­˜æ˜ å°„ä¸ºè¿ç»­çš„è™šæ‹Ÿå†…å­˜ã€‚</p>
<p>åº”ç”¨è¿›ç¨‹å¹¶ä¸é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fman7.org%2Flinux%2Fman-pages%2Fman2%2Fmmap.2.html" target="_blank" title="https://man7.org/linux/man-pages/man2/mmap.2.html" ref="nofollow noopener noreferrer">mmap()</a> å‡½æ•°ç›´æ¥å£°æ˜å†…å­˜å ç”¨ï¼Œè€Œæ˜¯è°ƒç”¨ <code>malloc()</code> â€”â€”native ä»£ç ï¼Œå’Œ <code>new()</code> â€”â€”Java ä»£ç æ¥è¿›è¡Œç”³è¯·ã€‚</p>
<p>æœ‰ä¸¤ç§ç±»å‹çš„â€œè™šæ‹Ÿå†…å­˜åŒºâ€ï¼š</p>
<ul>
<li><strong>åŸºäºæ–‡ä»¶çš„ VMA</strong> ï¼šåº•å±‚ä½¿ç”¨æ–‡ä»¶å®ç°ï¼Œé€šè¿‡å°†æ–‡ä»¶æè¿°ç¬¦ï¼ˆfdï¼‰æä¾›ç»™ <code>mmap()</code> å‡½æ•°ï¼Œå°†åœ¨ VMA ä¸Šçš„è¯»å†™æ“ä½œæ˜ å°„ä¸ºæ–‡ä»¶è¯»å†™ã€‚åœ¨ Linux ç³»ç»Ÿä¸­ï¼ŒåŠ¨æ€é“¾æ¥å™¨ï¼ˆldï¼‰åœ¨è¿è¡Œæ–°è¿›ç¨‹ã€åŠ¨æ€åŠ è½½åº“æ—¶ï¼Œä¼šä½¿ç”¨åŸºäºæ–‡ä»¶çš„ VMAã€‚Android ç³»ç»Ÿåˆ™åœ¨åŠ è½½ dex æ–‡ä»¶å’Œèµ„æºæ—¶ä½¿ç”¨è¿™ä¸€æ–¹å¼ã€‚</li>
<li><strong>åŒ¿å VMA</strong> ï¼šéæ–‡ä»¶ç³»ç»Ÿï¼Œåªé€šè¿‡å†…å­˜å®ç°ã€‚è°ƒç”¨ <code>mmap(... MAP_ANONYMOUS ...)</code> ä¼šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚åŠ¨æ€ç”³è¯·çš„å†…å­˜ç»Ÿç»Ÿå½’äºæ­¤ç±»ï¼Œä¾‹å¦‚ C çš„ <code>malloc()</code>ã€C++ çš„ <code>new()</code> å’Œ Java çš„ <code>new X()</code> â€”â€” è¿™ä¹Ÿæ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„é‡ç‚¹ã€‚</li>
</ul>
<p>åº”ç”¨ä»è™šæ‹Ÿå†…å­˜ä¸­ç”³è¯·å†…å­˜ï¼Œæœ€ç»ˆä¼šæ˜ å°„åˆ°ç‰©ç†å†…å­˜ä¸Šï¼Œå‰è€…å¾€å¾€å¤§äºåè€…ã€‚æˆ‘ä»¬ç»Ÿè®¡å†…å­˜å ç”¨æ—¶ï¼Œé€šå¸¸åªå…³æ³¨ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œå¿½ç•¥è™šæ‹Ÿå†…å­˜ã€‚ä¾‹å¦‚ï¼Œç³»ç»Ÿåˆ†é…ç»™åº”ç”¨<code>32MB</code> çš„è™šæ‹Ÿå†…å­˜ï¼Œåº”ç”¨éšåå‘å…¶ä¸­å†™å…¥ <code>4KB</code> æ•°æ®ï¼Œå®é™…ä¸Šåªå ç”¨äº† <code>4KB</code> çš„ç‰©ç†å†…å­˜ã€‚åœ¨64ä½çš„ç³»ç»Ÿä¸Šï¼Œè™šæ‹Ÿå†…å­˜åœ°å€å¾ˆéš¾è€—å°½ï¼Œç»å¤§å¤šæ•°åœºæ™¯ä¸‹æ— éœ€å…³æ³¨ã€‚</p>
<h3 data-id="heading-3">RSS ä¸ PSS</h3>
<p>åº”ç”¨å ç”¨çš„ç‰©ç†å†…å­˜å¤§å°ï¼Œç§°ä¸º <strong>â€œé©»ç•™å†…å­˜å¤§å°ï¼ˆResident Set Sizeï¼ŒRSSï¼‰â€</strong>ã€‚</p>
<p>æœ‰äº†ä»¥ä¸ŠåŸºç¡€çŸ¥è¯†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥å¯¹è™šæ‹Ÿå†…å­˜ VMA ä¸­çš„åˆ†é¡µè¿›è¡Œå½’ç±»äº†ï¼Œè¿™ä¹Ÿå°±å¯¹åº”ç€å‰é¢ <code>dumpsys meminfo</code> æŒ‡ä»¤çš„è¾“å‡ºç»“æœã€‚</p>
<ul>
<li><strong>é©»ç•™çŠ¶æ€ï¼ˆResidentï¼‰</strong>ï¼šè¯¥åˆ†é¡µå·²ç»è¢«æ˜ å°„åˆ°ç‰©ç†å†…å­˜ï¼Œå¯ç»†åˆ†ä¸ºä¸¤ç±»ã€‚
<ul>
<li><strong>å¹²å‡€ï¼ˆCleanï¼‰</strong>ï¼šåˆ†é¡µå†…å®¹ä¸åº•å±‚æ–‡ä»¶ä¸­çš„å†…å®¹ç›¸åŒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†…æ ¸å¯ä»¥è‡ªç”±æ¸…é™¤åˆ†é¡µå†…å®¹ï¼Œè€Œä¸å¿…æ‹…å¿ƒæ•°æ®ä¸¢å¤±ã€‚</li>
<li><strong>è„ï¼ˆDirtyï¼‰</strong>ï¼šåˆ†é¡µå†…å®¹ä¸åº•å±‚æ–‡ä»¶å†…å®¹ä¸ç›¸åŒï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ç”šè‡³ä¸å­˜åœ¨åº•å±‚æ˜ å°„æ–‡ä»¶ã€‚æ­¤æ—¶ï¼Œä¸å…è®¸å†…æ ¸æ¸…é™¤åˆ†é¡µå†…å®¹ã€‚</li>
</ul>
</li>
<li><strong>äº¤æ¢çŠ¶æ€ï¼ˆSwappedï¼‰</strong>ï¼šè„åˆ†é¡µè¢«å†™å…¥åˆ°äº¤æ¢æ–‡ä»¶ï¼ˆåœ¨ Android ä¸­æ˜¯ ZRAMï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸´æ—¶çŠ¶æ€ï¼Œå½“ä¸‹æ¬¡ç¼ºé¡µå¼‚å¸¸ï¼ˆpage faultï¼‰å‘ç”Ÿæ—¶ï¼Œä¼šå°†è¿™éƒ¨åˆ†å†…å®¹é‡æ–°è½¬ç§»åˆ°å†…å­˜ã€‚</li>
<li><strong>æœªå ç”¨çŠ¶æ€ï¼ˆNot presentï¼‰</strong>ï¼šè¯¥åˆ†é¡µä»æœªä½¿ç”¨è¿‡ã€‚</li>
</ul>
<p>åœ¨ Android ç³»ç»Ÿä¸­ï¼Œåº”å½“é‡ç‚¹å…³æ³¨è„åˆ†é¡µ <code>Private Dirty</code>ï¼Œå› ä¸ºè„åˆ†é¡µæ— æ³•è¢«è½¬ç§»åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤ä¸èƒ½è¢«å†…æ ¸å›æ”¶å†åˆ©ç”¨ã€‚</p>
<p>ä½œä¸ºæ“ä½œç³»ç»Ÿï¼ŒAndroid å¯¹äºå¤šä¸ªåº”ç”¨éƒ½è¦ä½¿ç”¨åˆ°çš„åº“ï¼ˆä¾‹å¦‚ <code>libc.so</code>ã€<code>framework.dex</code>ï¼‰è¿›è¡Œäº†ä¼˜åŒ–ï¼Œç³»ç»Ÿå°†å®ƒä»¬ä½œä¸ºå…±äº«èµ„æºè¿›è¡ŒåŠ è½½ã€‚è¿™äº›æ•°æ®æœ€åˆå±äº <code>zygote</code> è¿›ç¨‹ï¼Œå½“ç³»ç»Ÿ <code>fork()</code> æ–°çš„åº”ç”¨è¿›ç¨‹æ—¶ï¼Œä½¿ç”¨çš„æ˜¯ç›¸åŒçš„é¡µé¢åœ°å€ã€‚åŒä¸€æ—¶åˆ»å³ä½¿ç³»ç»Ÿé‡Œè¿è¡Œäº† 100 ä¸ªåº”ç”¨ï¼Œåœ¨è¿™éƒ¨åˆ†ä¸Šå…¬æœ‰åº“å ç”¨çš„å†…å­˜ä»ç„¶åªæœ‰ä¸€ä»½ã€‚</p>
<p>å› æ­¤å¼•å…¥äº† <strong>â€œæŒ‰æ¯”ä¾‹å†…å­˜å ç”¨ï¼ˆProportional Set Sizeï¼ŒPSSï¼‰â€</strong> çš„æ¦‚å¿µï¼Œå¯¹äºå…±äº«å†…å­˜æŒ‰æ¯”ä¾‹åˆ’åˆ†ã€‚ä¾‹å¦‚æˆ‘ä»¬å°† <code>4KB</code> çš„åˆ†é¡µå…±äº«ç»™4æ¡è¿›ç¨‹ï¼Œæ¯ä¸€æ¡è¿›ç¨‹å ç”¨çš„å†…å­˜åˆ™æ˜¯ <code>1KB</code>ã€‚</p>
<h2 data-id="heading-4">cat /proc/[pid]/statusï¼šæŸ¥çœ‹åº”ç”¨å¯åŠ¨ä»¥æ¥ RSS çš„æœ€å¤§å€¼</h2>
<p>å‰æ–‡ä»‹ç»è¿‡ï¼Œ<code>dumpsys meminfo</code> å¯ä»¥è¿”å›åº”ç”¨å½“å‰çš„è¯¦ç»†å†…å­˜ä½¿ç”¨çŠ¶æ€ï¼Œå¦‚æœè¯´æˆ‘ä»¬æƒ³è¦è·Ÿè¸ªè‡ªåº”ç”¨è¿›ç¨‹å¯åŠ¨ä»¥æ¥ï¼Œæ‰€ç”³è¯·è¿‡çš„æœ€å¤§ RSSï¼Œåˆ™å¯ä»¥é€šè¿‡ <code>cat /proc/[pid]/status</code> æ¥æŸ¥çœ‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell <span class="hljs-built_in">cat</span> /proc/19947/status
[ç•¥]
VmPeak: 37292428 kB
VmSize: 32416288 kB
VmLck:       192 kB
VmPin:         0 kB
VmHWM:   1187096 kB &lt;=== RSS High Watermark
VmRSS:    521832 kB
RssAnon:          122076 kB
RssFile:          362528 kB
RssShmem:          37228 kB
VmData:  1669512 kB
VmStk:      8192 kB
VmExe:         8 kB
VmLib:    224720 kB
VmPTE:      5572 kB
VmSwap:   258472 kB
[ç•¥]
</code></pre>
<p><code>VmHWM</code> è®°å½•äº†è¿›ç¨‹è‡ªå¯åŠ¨ä»¥æ¥ï¼Œæœ€å¤§çš„ç¬æ—¶ RSS å€¼ï¼Œå¯ä»¥çœ‹åˆ°é«˜è¾¾ <code>1187M</code>ã€‚</p>
<h3 data-id="heading-5">ä½¿ç”¨ Perfetto è®°å½•å†…å­˜ï¼ˆRSSï¼‰å¢é•¿æ›²çº¿</h3>
<p><strong>é…ç½®æ–‡ä»¶ config.pbtx</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">buffers: {
    size_kb: 8960
    fill_policy: DISCARD
}
buffers: {
    size_kb: 1280
    fill_policy: DISCARD
}
data_sources: {
    config {
        name: "linux.process_stats"
        target_buffer: 1
        process_stats_config {
            scan_all_processes_on_start: true
        }
    }
}
data_sources: {
    config {
        name: "linux.ftrace"
        ftrace_config {
            ftrace_events: "mm_event/mm_event_record"
            ftrace_events: "kmem/rss_stat"
            ftrace_events: "kmem/ion_heap_grow"
            ftrace_events: "kmem/ion_heap_shrink"
        }
    }
}
duration_ms: 30000
</code></pre>
<p>ä½¿ç”¨å‘½ä»¤ <code>cat config.pbtx | adb shell perfetto -c - --txt -o /data/misc/perfetto-traces/trace.pftrace</code> å¼€å¯æŠ“å–ï¼Œæ“ä½œç•Œé¢ï¼Œ30s åç»“æŸæŠ“å–ã€‚</p>
<blockquote>
<p>è¿™é‡Œæˆ‘é‡‡ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fcase-studies%2Fmemory%23memory-tracepoints" target="_blank" title="https://perfetto.dev/docs/case-studies/memory#memory-tracepoints" ref="nofollow noopener noreferrer">å®˜æ–¹ç»™å‡ºçš„é…ç½®</a>å¹¶æœªèƒ½æ­£å¸¸æŠ“å– trace æ–‡ä»¶ï¼Œåªèƒ½è·å–åˆ°ä¸€ä¸ªå¤§çº¦ 830KB çš„ç©ºæ–‡ä»¶ã€‚å…ˆé‡‡ç”¨å®˜æ–¹çš„å›¾ç‰‡ä½œä¸ºè®²è§£ï¼Œå¦‚æœæœ‰è¯»è€…æ‰¾åˆ°é—®é¢˜åŸå› ï¼Œæ¬¢è¿ä¸åèµæ•™ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/777b90675ac84881a1c559016bbb28af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766160113&amp;x-signature=0DFcm7jVvMnkEFXax5mATVfra0E%3D" alt="rss_camera.png" loading="lazy"/></p>
<p>ä»è¿™ä¸ªå›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨å¤§çº¦æ—¶é—´è¿›è¡Œåˆ°2/3æ—¶ï¼Œ<code>mem.rss.ion</code> å‘ç”Ÿå¢é•¿ï¼Œè¯´æ˜æ­¤æ—¶ç”¨æˆ·æ“ä½œå¼•èµ·äº†å†…å­˜åˆ†é…ã€‚</p>
<h2 data-id="heading-6">am dumpheap [packageName]ï¼šæŠ“å– JVM å†…å­˜å¿«ç…§</h2>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell am dumpheap com.google.samples.apps.nowinandroid.demo.debug
File: /data/local/tmp/heapdump-20251212-093630.prof
Waiting <span class="hljs-keyword">for</span> dump to finish...
</code></pre>
<p>æŠ“å–å¯¹åº”åŒ…åçš„ prof æ–‡ä»¶åï¼Œå°†å…¶ pull åˆ°ç”µè„‘ä¸Šï¼Œæ”¹åä¸º <code>*.hprof</code>åï¼Œå°±å¯ä»¥åœ¨ AndroidStudio ä¸­æŸ¥çœ‹å½“å‰è¿›ç¨‹çš„ JVM å†…å­˜å¿«ç…§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/848aa106363a4809ab0fed142345c7ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766160113&amp;x-signature=8UErgVgT7wlTB1BRdYCKJjCyaKU%3D" alt="memory_hprof.png" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥ç”¨ Perfetto åœ¨çº¿æ‰“å¼€è¯¥å¿«ç…§ï¼Œä¼šä»¥ç«ç„°å›¾çš„æ–¹å¼å±•ç¤ºå¯¹è±¡å ç”¨å †å¤§å°ï¼Œå¯¹äºç±»å‹ç›¸åŒçš„å¯¹è±¡èšåˆåå±•ç¤ºï¼Œä¼˜ç‚¹æ˜¯æ›´åŠ ç›´è§‚ï¼Œç¼ºç‚¹æ˜¯æ— æ³•æŸ¥çœ‹å¯¹è±¡å†…éƒ¨æ•°æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ccc44ace74549f49cec04e9814267b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766160113&amp;x-signature=P1adtgpXnpA0KkuhXoIkwAZ4V3A%3D" alt="hprof_flame.png" loading="lazy"/></p>
<h2 data-id="heading-7">showmap [pid]ï¼šå±•ç¤ºå†…å­˜-æ–‡ä»¶æ˜ å°„</h2>
<p>åº•å±‚é€šè¿‡è¯»å– <code>/proc/PID/smaps</code> æ–‡ä»¶æ¥å®ç°ã€‚</p>
<p>é¦–å…ˆè·å– NowInAndroid çš„ PID=19147ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell ps -A | grep nowinandroid
u0_a225   19147   996   28342616 303680 do_epoll_wait       0 S com.google.samples.apps.nowinandroid.demo.debug
</code></pre>
<p>éšåæŸ¥çœ‹å…¶å†…å­˜ä¸­çš„åŸºäºæ–‡ä»¶çš„ VMA æ˜ å°„ã€‚</p>
<p>è¾“å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb shell showmap 19147
</code></pre>
<p>è¾“å‡ºï¼š</p>
<p>åœ¨ä¸‹æ–‡ä¸­ï¼Œè¾“å‡ºå†…å®¹ä¸­å·²ç»çœç•¥å»äº†å¤§éƒ¨åˆ†ï¼ŒåŸæœ¬çš„æ˜ å°„æ–‡ä»¶æ•°é‡æœ‰869ä¸ªã€‚è¿™é‡Œé¢æœ‰ jar åŒ…ã€so åº“ã€ttf å­—ä½“æ–‡ä»¶ã€dex æ–‡ä»¶ç­‰ã€‚å¯ä»¥è¯´ï¼Œå æ®å¤§å¤šæ•°çš„æ˜¯åº”ç”¨ä½¿ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ã€‚</p>
<p>è™½ç„¶æ•°é‡å¤šï¼Œä½†ç”±äºæ˜¯â€œå…±äº«â€çš„åŸå› ï¼ŒçœŸæ­£çš„ PSS å’Œ private dirty å¹¶ä¸å¤šã€‚</p>






























<table><thead><tr><th>åŒºåŸŸ</th><th>å¤§å°ï¼ˆbï¼‰</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>RSS</td><td>296680</td><td>RSS = shared clean + shared dirty + private clean + private dirty</td></tr><tr><td>PSS</td><td>131754</td><td/></tr><tr><td>shared dirty</td><td>34224</td><td/></tr><tr><td>private dirty</td><td>55536</td><td/></tr></tbody></table>
<pre><code class="hljs language-plaintext" lang="plaintext"> virtual                     shared   shared  private  private                   Anon      Shmem     File      Shared   Private
    size      RSS      PSS    clean    dirty    clean    dirty     swap  swapPSS HugePages PmdMapped PmdMapped Hugetlb  Hugetlb    Locked    # object
-------- -------- -------- -------- -------- -------- -------- -------- -------- --------- --------- --------- -------- -------- -------- ---- ------------------------------
     292       96       19       88        0        8        0        8        0         0         0         0        0        0        0    1 /apex/com.android.adbd/lib64/libadbconnection_client.so
     492      184        8      184        0        0        0        0        0         0         0         0        0        0        0    1 /apex/com.android.adservices/javalib/framework-adservices.jar
    1172      208       97      144        0       64        0        0        0         0         0         0        0        0        0    1 /apex/com.android.art/javalib/apache-xml.jar
      72       60       32        0       56        0        4       12        0         0         0         0        0        0        0    1 /memfd:gralloc_shared_memory (deleted)
   65536        0        0        0        0        0        0       12        0         0         0         0        0        0        0    1 /memfd:jit-zygote-cache (deleted)
       8        0        0        0        0        0        0        0        0         0         0         0        0        0        0    1 /product/overlay/GmsConfigOverlayCommon.apk
      24       20        0       20        0        0        0        4        0         0         0         0        0        0        0    1 /system/bin/app_process64
    2716      988      777      384        0      604        0        0        0         0         0         0        0        0        0    1 /system/fonts/NotoColorEmoji.ttf
    
[ä¸­é—´ç•¥å»å¤§éƒ¨åˆ†]

      36       36       36        0        0       36        0        0        0         0         0         0        0        0        0    1 /system/fonts/NotoSansSymbols-Regular-Subsetted2.ttf
      48       32        2       32        0        0        0        4        0         0         0         0        0        0        0    1 /system/framework/arm64/boot-mediatek-ims-base.oat
       4        4        0        4        0        0        0        0        0         0         0         0        0        0        0    1 /system/framework/boot-vivo-vgcclient.vdex
     700      264       19      260        0        4        0        4        0         0         0         0        0        0        0    1 /vendor/lib64/egl/libMEOW_gift.so

-------- -------- -------- -------- -------- -------- -------- -------- -------- --------- --------- --------- -------- -------- -------- ---- ------------------------------
 virtual                     shared   shared  private  private                   Anon      Shmem     File      Shared   Private
    size      RSS      PSS    clean    dirty    clean    dirty     swap  swapPSS HugePages PmdMapped PmdMapped Hugetlb  Hugetlb    Locked    # object
-------- -------- -------- -------- -------- -------- -------- -------- -------- --------- --------- --------- -------- -------- -------- ---- ------------------------------
28342616   296680   131754   143316    34224    63604    55536    30336    14411         0         0         0        0        0        0  869 TOTAL
</code></pre>
<h2 data-id="heading-8">getprop dalvik.vm.heapgrowthlimit å’Œ dalvik.vm.heapsizeï¼šè®¾å¤‡åˆ†é…ç»™åº”ç”¨çš„å†…å­˜ä¸Šé™</h2>
<p>åœ¨ä¸åŒç¡¬ä»¶çš„è®¾å¤‡ä¸Šï¼Œåº”ç”¨èƒ½å¤Ÿä½¿ç”¨çš„æœ€å¤§å†…å­˜å€¼ä¸ä¸€æ ·ï¼Œè¿™ä¸€èˆ¬æ˜¯ç”± ROM å‚å•†å†³å®šã€‚é€šå¸¸æ¥è¯´ï¼Œç¡¬ä»¶è¶Šå¥½ï¼Œåº”ç”¨å†…å­˜ä¸Šé™ä¹Ÿè¶Šé«˜ã€‚å¯ä»¥é€šè¿‡ adb å‘½ä»¤æŸ¥çœ‹è®¾å¤‡çš„åˆ†é…ç»™åº”ç”¨çš„å†…å­˜ä¸Šé™ã€‚è¿™ä¸¤ä¸ªå€¼æ˜¯å†™æ­»åœ¨ <code>/system/build.prop</code> æ–‡ä»¶å½“ä¸­çš„ã€‚</p>
<p>åœ¨æ§åˆ¶å°è·å–è¿™ä¸¤ä¸ªå€¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Î» adb  shell getprop dalvik.vm.heapgrowthlimit
256m
Î» adb  shell getprop dalvik.vm.heapsize
512m
</code></pre>
<p>åœ¨åº”ç”¨ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ <code>ActivityManager</code> æä¾›çš„é™æ€å‡½æ•°è·å–è¿™ä¸¤ä¸ªå€¼ï¼Œå…¶å®ç°æœ¬è´¨ä¸Šä¹Ÿæ˜¯è®¿é—®ä¸Šè¿°ç³»ç»Ÿå‚æ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ActivityManager.java</span>
<span class="hljs-comment">// è·å– heapgrowthlimit</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">staticGetMemoryClass</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Really brain dead right now -- just take this from the configured</span>
        <span class="hljs-comment">// vm heap size, and assume it is in megabytes and thus ends with "m".</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">vmHeapSize</span> <span class="hljs-operator">=</span> SystemProperties.get(<span class="hljs-string">"dalvik.vm.heapgrowthlimit"</span>, <span class="hljs-string">""</span>);
        <span class="hljs-keyword">if</span> (vmHeapSize != <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-string">""</span>.equals(vmHeapSize)) {
            <span class="hljs-keyword">return</span> Integer.parseInt(vmHeapSize.substring(<span class="hljs-number">0</span>, vmHeapSize.length()-<span class="hljs-number">1</span>));
        }
        <span class="hljs-keyword">return</span> staticGetLargeMemoryClass();
}

<span class="hljs-comment">// è·å– heapsize</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">staticGetLargeMemoryClass</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Really brain dead right now -- just take this from the configured</span>
        <span class="hljs-comment">// vm heap size, and assume it is in megabytes and thus ends with "m".</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">vmHeapSize</span> <span class="hljs-operator">=</span> SystemProperties.get(<span class="hljs-string">"dalvik.vm.heapsize"</span>, <span class="hljs-string">"16m"</span>);
        <span class="hljs-keyword">return</span> Integer.parseInt(vmHeapSize.substring(<span class="hljs-number">0</span>, vmHeapSize.length() - <span class="hljs-number">1</span>));
}
</code></pre>
<p>å¦‚ä½•ç†è§£è¿™ä¸¤ä¸ªå€¼çš„å«ä¹‰ï¼Ÿ</p>
<ul>
<li><code>heapgrowthlimit</code>ï¼šåº”ç”¨é»˜è®¤å…è®¸ä½¿ç”¨çš„ dalvik/arm è™šæ‹Ÿæœºå†…å­˜ä¸Šé™ã€‚</li>
<li><code>heapsize</code>ï¼šåœ¨å£°æ˜ <code>largeHeap="true"</code> åï¼Œåº”ç”¨å¯ä»¥æ‰©å±•åˆ°çš„å†…å­˜ä¸Šé™ã€‚</li>
</ul>
<p>å·²å‰æ–‡æˆ‘ä½¿ç”¨çš„æ‰‹æœºä¸ºä¾‹ï¼Œå…¶ <code>heapgrowthlimit</code>/<code>heapsize</code> æ˜¯ <code>256m</code>/<code>512m</code>ï¼Œè¿™æ„å‘³ç€ï¼Œåº”ç”¨åœ¨è¿è¡Œæ—¶ï¼Œæœ€å¤šå¯ä»¥ç”³è¯· 256m çš„å†…å­˜ï¼Œå½“å®æ—¶å†…å­˜æ¥è¿‘ï¼ˆæœªè¶…è¿‡ï¼‰è¿™ä¸ªå€¼ï¼ŒJVM ä¼šé¢‘ç¹è§¦å‘ GC ä»¥å›æ”¶å†…å­˜ï¼Œä¼´éšç€å¤§é‡çš„ STWã€‚è€Œä¸€æ—¦å†…å­˜ä½¿ç”¨è¶…è¿‡è¿™ä¸ªå€¼ï¼Œåˆ™ä¼šå‘ç”Ÿ OOM å´©æºƒã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">application</span>
    <span class="hljs-attr">android:largeHeap</span>=<span class="hljs-string">"false"</span>/&gt;</span>
</code></pre>
<p>é‚£å¯èƒ½å°±ä¼šæœ‰èªæ˜çš„åŒå­¦æé—®ï¼Œæ˜¯å¦å¯ä»¥åœ¨ <code>AndroidManifext.xml</code> é‡Œå¼€å¯ <code>largeHeap</code> ç»­ä¸€æ³¢å‘½ï¼Ÿé€šå¸¸æ¥è¯´è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼Œç«™åœ¨ç³»ç»Ÿçš„è§’åº¦ï¼Œ<code>largeHeap</code> æ˜¯ç”¨æ¥æä¾›ç»™æŸäº›éœ€è¦å¤§å†…å­˜çš„åº”ç”¨æ˜¾å¼å£°æ˜ï¼Œä¾‹å¦‚ç›¸å†Œã€ç›¸æœºã€ç¼–è¾‘å™¨ã€çŸ­è§†é¢‘ç­‰ã€‚å¦‚æœä½ çš„åº”ç”¨ä¸å±äºæ­¤ç±»ï¼Œè¿˜æ˜¯å»ºè®®ä»ä»£ç ä¸Šå¯»æ‰¾åŸå› ï¼Œåšå¥½å†…å­˜çš„ç®¡æ§ã€‚</p>
<h2 data-id="heading-9">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fmemory-profiling" target="_blank" title="https://perfetto.dev/docs/getting-started/memory-profiling" ref="nofollow noopener noreferrer">perfetto.dev/docs/gettinâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fcase-studies%2Fmemory" target="_blank" title="https://perfetto.dev/docs/case-studies/memory" ref="nofollow noopener noreferrer">perfetto.dev/docs/case-sâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdata-sources%2Fnative-heap-profiler" target="_blank" title="https://perfetto.dev/docs/data-sources/native-heap-profiler" ref="nofollow noopener noreferrer">perfetto.dev/docs/data-sâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdata-sources%2Fjava-heap-profiler" target="_blank" title="https://perfetto.dev/docs/data-sources/java-heap-profiler" ref="nofollow noopener noreferrer">perfetto.dev/docs/data-sâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fhexingen%2Farticle%2Fdetails%2F131934734" target="_blank" title="https://blog.csdn.net/hexingen/article/details/131934734" ref="nofollow noopener noreferrer">blog.csdn.net/hexingen/arâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcs4118.github.io%2Fwww%2F2023-1%2Flect%2F21-linux-mm.html" target="_blank" title="https://cs4118.github.io/www/2023-1/lect/21-linux-mm.html" ref="nofollow noopener noreferrer">cs4118.github.io/www/2023-1/â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Coze Studio äºŒæ¬¡å¼€å‘ï¼ˆä¸€ï¼‰æ”¯æŒ MCP Server é™æ€é…ç½®]]></title>    <link>https://juejin.cn/post/7582808491607261238</link>    <guid>https://juejin.cn/post/7582808491607261238</guid>    <pubDate>2025-12-12T14:17:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582808491607261238" data-draft-id="7582785032852275263" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Coze Studio äºŒæ¬¡å¼€å‘ï¼ˆä¸€ï¼‰æ”¯æŒ MCP Server é™æ€é…ç½®"/> <meta itemprop="keywords" content="Coze"/> <meta itemprop="datePublished" content="2025-12-12T14:17:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DevYK"/> <meta itemprop="url" content="https://juejin.cn/user/3368559355637566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Coze Studio äºŒæ¬¡å¼€å‘ï¼ˆä¸€ï¼‰æ”¯æŒ MCP Server é™æ€é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559355637566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DevYK
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:17:55.000Z" title="Fri Dec 12 2025 14:17:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p><code>Coze Studio</code> æ˜¯ä¸€ä¸ªå¼€æºçš„ AI ä½ä»£ç å·¥ä½œæµå¼€å‘å¹³å°ï¼Œå®ƒæä¾›äº†å®Œæ•´çš„æ’ä»¶ç³»ç»Ÿæ¥æ‰©å±• AI æ¨¡å‹çš„èƒ½åŠ›ã€‚è¯¥æ’ä»¶ç³»ç»Ÿå…è®¸å¼€å‘è€…é€šè¿‡æ ‡å‡†åŒ–çš„æ–¹å¼é›†æˆå¤–éƒ¨æœåŠ¡ï¼Œä½¿ AI æ¨¡å‹èƒ½å¤Ÿè°ƒç”¨å„ç§å·¥å…·å’ŒæœåŠ¡ã€‚</p>
<p>ä»ä¹‹å‰çš„æºç åˆ†æ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fq-nSAEaXOMuVHgOxKGrhpA" target="_blank" title="https://mp.weixin.qq.com/s/q-nSAEaXOMuVHgOxKGrhpA" ref="nofollow noopener noreferrer"><code>Coze Studio</code>æºç åˆ†æ(äºŒ)åç«¯æ’ä»¶æ¶æ„æ·±åº¦å‰–æä¸äºŒæ¬¡å¼€å‘å®æˆ˜å‡†å¤‡</a>ä¸­å¾—çŸ¥ï¼Œ<code>Coze Studio</code> ç›®å‰ä»…æ”¯æŒ HTTP å’Œè‡ªå®šä¹‰æ’ä»¶ã€‚å¦‚æœæƒ³è¦æ”¯æŒ MCP Server é…ç½®ï¼Œå°±æ— æ³•ç»§ç»­ã€‚å› æ­¤ï¼Œæˆ‘èŒç”Ÿäº†åŸºäº <code>Coze Studio</code> å¼€å‘æ”¯æŒ MCP Server é…ç½®çš„åŠŸèƒ½çš„æƒ³æ³•ï¼Œä»¥ä½¿ <code>Coze Studio</code> æ›´åŠ å®Œå–„ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹©  <code>Coze Studio</code>ï¼Ÿ</h3>
<p>åœ¨ AI ä½ä»£ç å¼€å‘é¢†åŸŸï¼Œç›®å‰è°ƒç ”äº† Dify ã€n8n ã€<code>Coze Studio</code> ç­‰å…·æœ‰ä»£è¡¨æ€§çš„æˆç†Ÿè§£å†³æ–¹æ¡ˆã€‚é€‰æ‹© <code>Coze Studio</code> ä¸»è¦çš„åŸå› æ˜¯å†…éƒ¨åŸºäº Go è¯­è¨€å¼€å‘ï¼Œå¯¹æˆ‘ä¸ªäººæ¥è¯´å¯æ˜¯å¤©ç„¶çš„å‹å¥½å•Šï¼Œæˆ‘ä¸ç”¨å†å»å­¦ä¹ å…¶å®ƒè¯­è¨€ï¼Œå½“ç„¶è¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªå› ç´ è€ƒè™‘ï¼š</p>
<ol>
<li>
<p><strong>è¯­è¨€åå¥½</strong>ï¼šGo è¯­è¨€çš„ç®€æ´æ€§ã€å¹¶å‘æ¨¡å‹å’Œç¼–è¯‘å‹ç‰¹æ€§ï¼Œä½¿å¾—ç³»ç»Ÿå…·å¤‡æ›´å¥½çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§</p>
</li>
<li>
<p><strong>æ¶æ„æ¸…æ™°</strong>ï¼š<code>Coze Studio</code> é‡‡ç”¨ DDDï¼ˆé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼‰æ¶æ„ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•</p>
</li>
<li>
<p><strong>å¼€æºå¯æ§</strong>ï¼šå®Œå…¨å¼€æºï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œæ·±åº¦å®šåˆ¶</p>
</li>
<li>
<p><strong>æ’ä»¶ç³»ç»Ÿå®Œå–„</strong>ï¼šå·²æœ‰çš„æ’ä»¶æ¶æ„ä¸ºæ‰©å±•æ–°åè®®æä¾›äº†è‰¯å¥½çš„åŸºç¡€</p>
</li>
<li>
<p><strong>Dify/n8n</strong>: éƒ½æ˜¯ TypeScript å¼€å‘è¯­è¨€ä¸ºä¸»ï¼Œä¸ç¬¦åˆæˆ‘å½“å‰æŠ€æœ¯é€‰å‹</p>
</li>
</ol>
<h2 data-id="heading-2">æ’ä»¶åŠ è½½æ‰§è¡Œæµç¨‹ï¼ˆç®€è¦å›é¡¾ï¼‰</h2>
<p>åœ¨æ·±å…¥ MCP æ”¯æŒå®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç®€è¦å›é¡¾ä¸€ä¸‹ <code>Coze Studio</code> çš„æ’ä»¶åŠ è½½æµç¨‹ã€‚</p>
<h3 data-id="heading-3">åˆå§‹åŒ–æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Main
    participant AppInit
    participant PluginInit
    participant ConfInit
    participant LoadMeta
    
    Main-&gt;&gt;AppInit: Init()
    AppInit-&gt;&gt;PluginInit: InitService()
    PluginInit-&gt;&gt;ConfInit: InitConfig()
    ConfInit-&gt;&gt;LoadMeta: loadPluginProductMeta()
    LoadMeta-&gt;&gt;LoadMeta: è¯»å– plugin_meta.yaml
    LoadMeta-&gt;&gt;LoadMeta: è§£ææ’ä»¶å…ƒæ•°æ®
    LoadMeta-&gt;&gt;LoadMeta: åŠ è½½ OpenAPI å·¥å…·
    LoadMeta-&gt;&gt;LoadMeta: æ³¨å†Œåˆ°å†…å­˜ç¼“å­˜
    LoadMeta--&gt;&gt;ConfInit: æ’ä»¶äº§å“ä¿¡æ¯
    ConfInit--&gt;&gt;PluginInit: åˆå§‹åŒ–å®Œæˆ
    PluginInit--&gt;&gt;AppInit: æœåŠ¡å°±ç»ª
</code></pre>
<p><strong>æ ¸å¿ƒä»£ç è·¯å¾„</strong>ï¼š</p>
<ol>
<li><strong>åº”ç”¨åˆå§‹åŒ–</strong>ï¼š<code>backend/application/application.go::Init()</code></li>
<li><strong>æ’ä»¶æœåŠ¡åˆå§‹åŒ–</strong>ï¼š<code>backend/application/plugin/init.go::InitService()</code></li>
<li><strong>é…ç½®åˆå§‹åŒ–</strong>ï¼š<code>backend/domain/plugin/conf/config.go::InitConfig()</code></li>
<li><strong>å…ƒæ•°æ®åŠ è½½</strong>ï¼š<code>backend/domain/plugin/conf/load_plugin.go::loadPluginProductMeta()</code></li>
</ol>
<h3 data-id="heading-4">æ’ä»¶å…ƒæ•°æ®åŠ è½½æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[è¯»å– plugin_meta.yaml] --&gt; B[è§£æ YAML å…ƒæ•°æ®]
    B --&gt; D[åŠ è½½ OpenAPI æ–‡æ¡£]
    D --&gt; E[è§£æ API è·¯å¾„å’Œæ–¹æ³•]
    E --&gt; F[åŒ¹é…å·¥å…·ä¸ API]
    F --&gt; G[åˆ›å»º ToolInfo]
    G --&gt; H[æ³¨å†Œåˆ°å†…å­˜ç¼“å­˜]
    H --&gt; I[ä¸‹ä¸€ä¸ªæ’ä»¶]
</code></pre>
<p><strong>å…³é”®ä»£ç </strong>ï¼š<code>backend/domain/plugin/conf/load_plugin.go</code></p>
<p>å‡½æ•°æ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">loadPluginProductMeta</span><span class="hljs-params">(ctx context.Context, basePath <span class="hljs-type">string</span>)</span></span> (err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. è¯»å–å¹¶è§£æ plugin_meta.yaml</span>
    file, err := os.ReadFile(metaFile)
    <span class="hljs-keyword">var</span> pluginsMeta []*pluginProductMeta
    yaml.Unmarshal(file, &amp;pluginsMeta)
    
    <span class="hljs-comment">// 2. åˆå§‹åŒ–å†…å­˜ç¼“å­˜</span>
    pluginProducts = <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">int64</span>]*PluginInfo, <span class="hljs-built_in">len</span>(pluginsMeta))
    toolProducts = <span class="hljs-keyword">map</span>[<span class="hljs-type">int64</span>]*ToolInfo{}
    
    <span class="hljs-comment">// 3. éå†æ¯ä¸ªæ’ä»¶å…ƒæ•°æ®</span>
    <span class="hljs-keyword">for</span> _, m := <span class="hljs-keyword">range</span> pluginsMeta {
        <span class="hljs-comment">// 3.1 æ£€æŸ¥å…ƒæ•°æ®æœ‰æ•ˆæ€§å¹¶éªŒè¯ Manifest</span>
        <span class="hljs-keyword">if</span> !checkPluginMetaInfo(ctx, m) { <span class="hljs-keyword">continue</span> }
        m.Manifest.Validate(<span class="hljs-literal">true</span>)
        
        <span class="hljs-comment">// 3.2 åŠ è½½ OpenAPI æ–‡æ¡£ï¼ˆåŸå§‹é€»è¾‘ï¼‰</span>
        docPath := path.Join(root, m.OpenapiDocFile)
        _doc, _ := loader.LoadFromFile(docPath)
        doc := ptr.Of(model.Openapi3T(*_doc))
        
        <span class="hljs-comment">// 3.3 è§£æ OpenAPI æ–‡æ¡£ä¸­çš„æ‰€æœ‰ API</span>
        apis := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[dto.UniqueToolAPI]*model.Openapi3Operation)
        <span class="hljs-keyword">for</span> subURL, pathItem := <span class="hljs-keyword">range</span> doc.Paths {
            <span class="hljs-keyword">for</span> method, op := <span class="hljs-keyword">range</span> pathItem.Operations() {
                api := dto.UniqueToolAPI{SubURL: subURL, Method: method}
                apis[api] = model.NewOpenapi3Operation(op)
            }
        }
        
        <span class="hljs-comment">// 3.4 åŒ¹é…å·¥å…·ä¸ APIï¼Œåˆ›å»º ToolInfo</span>
        <span class="hljs-keyword">for</span> _, t := <span class="hljs-keyword">range</span> m.Tools {
            api := dto.UniqueToolAPI{SubURL: t.SubURL, Method: t.Method}
            op, ok := apis[api]
            <span class="hljs-keyword">if</span> ok {
                toolProducts[t.ToolID] = &amp;ToolInfo{Info: &amp;entity.ToolInfo{...}}
            }
        }
        
        <span class="hljs-comment">// 3.5 æ³¨å†Œåˆ°å†…å­˜ç¼“å­˜</span>
        pluginProducts[m.PluginID] = pi
    }
}
</code></pre>
<p>ä»ä»£ç æµç¨‹å¯ä»¥çœ‹å‡ºï¼Œå½“å‰çš„å®ç°å‡è®¾æ‰€æœ‰æ’ä»¶éƒ½æ˜¯ OpenAPI ç±»å‹ï¼Œé€šè¿‡è¯»å– YAML é…ç½®æ–‡ä»¶å’Œ OpenAPI æ–‡æ¡£æ¥åŠ è½½å·¥å…·ã€‚è¦æ”¯æŒ MCP æ’ä»¶ï¼Œæœ€ç›´æ¥çš„åšæ³•æ˜¯åœ¨æ’ä»¶å…ƒæ•°æ®ä¸­å¢åŠ ç±»å‹æ ‡è¯†ï¼Œæ ¹æ®ç±»å‹èµ°ä¸åŒçš„åŠ è½½è·¯å¾„ã€‚</p>
<p>è¿™ä¸ªæ€è·¯æ˜¯å¯è¡Œçš„ã€‚MCP æ’ä»¶å’Œ OpenAPI æ’ä»¶çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼šOpenAPI æ’ä»¶çš„å·¥å…·å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œè€Œ MCP æ’ä»¶çš„å·¥å…·éœ€è¦ä» MCP æœåŠ¡å™¨åŠ¨æ€è·å–ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ <code>loadPluginProductMeta</code> å‡½æ•°ä¸­å¢åŠ ç±»å‹åˆ¤æ–­ï¼Œå¯¹ MCP æ’ä»¶èµ°å¦ä¸€å¥—åŠ è½½é€»è¾‘ã€‚</p>
<h2 data-id="heading-5">å®ç°è¦ç‚¹</h2>
<h3 data-id="heading-6">æ’ä»¶ç±»å‹è¯†åˆ«</h3>
<p>é¦–å…ˆéœ€è¦åœ¨éå†æ’ä»¶æ—¶åˆ¤æ–­ç±»å‹ã€‚æŸ¥çœ‹ <code>pluginProductMeta</code> ç»“æ„ï¼Œå‘ç° <code>Manifest.API.Type</code> å­—æ®µå·²ç»å¯ä»¥ç”¨æ¥åŒºåˆ†æ’ä»¶ç±»å‹ã€‚åœ¨éªŒè¯å®Œ Manifest ä¹‹åï¼Œæ·»åŠ ç±»å‹åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-go" lang="go">isMCPPlugin := m.Manifest.API.Type == consts.PluginTypeOfMCP
</code></pre>
<p>è¿™æ ·å°±èƒ½åœ¨åç»­å¤„ç†ä¸­åŒºåˆ†ä¸¤ç§æ’ä»¶ç±»å‹ã€‚</p>
<h3 data-id="heading-7">MCP é…ç½®æå–</h3>
<p>MCP æ’ä»¶çš„é…ç½®ä¿¡æ¯å­˜æ”¾åœ¨ <code>manifest.API.Extensions["mcp_config"]</code> ä¸­ï¼Œéœ€è¦å°†å…¶è§£æä¸º <code>mcp.Config</code> ç»“æ„ã€‚è¿™é‡Œå°è£…ä¸€ä¸ªè§£æå‡½æ•°ï¼š</p>
<pre><code class="hljs language-go" lang="go">mcpConfig, err := parseMCPConfigFromManifest(m.Manifest)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to parse MCP config: %v"</span>, err)
    <span class="hljs-keyword">continue</span>
}
</code></pre>
<p><code>parseMCPConfigFromManifest</code> å‡½æ•°è´Ÿè´£ä» Manifest çš„ Extensions å­—æ®µä¸­æå–é…ç½®ï¼Œå¹¶è¿›è¡Œ JSON åºåˆ—åŒ–/ååºåˆ—åŒ–è½¬æ¢ã€‚è¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯é…ç½®ä¿¡æ¯ä»ç„¶ä¿ç•™åœ¨ Manifest ä¸­ï¼Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„å…ƒæ•°æ®ç»“æ„ã€‚</p>
<h3 data-id="heading-8">OpenAPI æ–‡æ¡£å…¼å®¹å¤„ç†</h3>
<p>è™½ç„¶ MCP æ’ä»¶ä¸éœ€è¦çœŸå®çš„ OpenAPI æ–‡æ¡£ï¼Œä½†ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†å¯èƒ½ä¾èµ– <code>PluginInfo.OpenapiDoc</code> å­—æ®µã€‚ä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œéœ€è¦ä¸º MCP æ’ä»¶åˆ›å»ºä¸€ä¸ªæœ€å°åŒ–çš„ OpenAPI æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-go" lang="go">doc := createMinimalOpenAPIDocForMCP(m.Manifest)
</code></pre>
<p>è¿™ä¸ªæœ€å°åŒ–æ–‡æ¡£åªéœ€è¦åŒ…å«åŸºæœ¬ä¿¡æ¯ï¼ˆtitleã€descriptionã€versionï¼‰å’Œä¸€ä¸ªå ä½çš„ server URLï¼Œä¸éœ€è¦å®šä¹‰å®é™…çš„è·¯å¾„å’Œæ“ä½œã€‚</p>
<h3 data-id="heading-9">å·¥å…·åŠ¨æ€åŠ è½½</h3>
<p>MCP æ’ä»¶çš„å·¥å…·ä¸æ˜¯ä»é…ç½®æ–‡ä»¶è¯»å–ï¼Œè€Œæ˜¯é€šè¿‡è¿æ¥ MCP æœåŠ¡å™¨åŠ¨æ€è·å–ã€‚è¿™é‡Œå¼•å…¥ä¸€ä¸ª <code>mcpToolLoader</code> æ¥å°è£…åŠ è½½é€»è¾‘ï¼š</p>
<pre><code class="hljs language-go" lang="go">loader := &amp;mcpToolLoader{}
mcpTools, err := loader.LoadMCPTools(ctx, m.PluginID, m.Version, mcpConfig)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to load tools: %v"</span>, err)
    <span class="hljs-built_in">delete</span>(pluginProducts, m.PluginID)
    <span class="hljs-keyword">continue</span>
}

<span class="hljs-keyword">for</span> _, toolInfo := <span class="hljs-keyword">range</span> mcpTools {
    pi.ToolIDs = <span class="hljs-built_in">append</span>(pi.ToolIDs, toolInfo.Info.ID)
    toolProducts[toolInfo.Info.ID] = toolInfo
}
</code></pre>
<p><code>LoadMCPTools</code> æ–¹æ³•å†…éƒ¨ä¼šåˆ›å»º MCP å®¢æˆ·ç«¯ã€åˆå§‹åŒ–è¿æ¥ã€è°ƒç”¨ <code>ListTools</code> è·å–å·¥å…·åˆ—è¡¨ï¼Œç„¶åå°† MCP Tool è½¬æ¢ä¸ºç³»ç»Ÿå†…éƒ¨çš„ <code>ToolInfo</code> æ ¼å¼ã€‚è½¬æ¢è¿‡ç¨‹éœ€è¦å¤„ç† JSON Schema åˆ° OpenAPI Operation çš„æ˜ å°„ï¼Œè¿™éƒ¨åˆ†é€»è¾‘ç›¸å¯¹å¤æ‚ï¼Œåé¢ä¼šè¯¦ç»†è¯´æ˜ã€‚</p>
<h3 data-id="heading-10">ä»£ç åˆ†æ”¯é‡æ„</h3>
<p>æœ€åï¼Œå°†åŸæ¥çš„å•ä¸€å¤„ç†é€»è¾‘æ”¹ä¸ºæ¡ä»¶åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> isMCPPlugin {
    <span class="hljs-comment">// MCP æ’ä»¶å¤„ç†é€»è¾‘</span>
    <span class="hljs-comment">// ... ä¸Šè¿° MCP ç›¸å…³ä»£ç </span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä¿ç•™åŸæœ‰çš„ OpenAPI æ’ä»¶å¤„ç†é€»è¾‘</span>
    <span class="hljs-comment">// ... åŸæœ‰çš„ OpenAPI åŠ è½½ä»£ç </span>
}
</code></pre>
<p>è¿™æ ·æ—¢ä¸å½±å“ç°æœ‰åŠŸèƒ½ï¼Œåˆèƒ½æ”¯æŒæ–°çš„æ’ä»¶ç±»å‹ã€‚æ•´ä¸ªä¿®æ”¹çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼šåœ¨ä¿æŒåŸæœ‰æ¶æ„ä¸å˜çš„å‰æä¸‹ï¼Œé€šè¿‡ç±»å‹åˆ¤æ–­å’Œåˆ†æ”¯å¤„ç†ï¼Œä¸º MCP æ’ä»¶æä¾›ç‹¬ç«‹çš„åŠ è½½è·¯å¾„ã€‚</p>
<h2 data-id="heading-11">æŠ€æœ¯æ–¹æ¡ˆï¼ˆé™æ€åŠ è½½ MCP Serverï¼‰</h2>
<p>åŸºäºå¯¹æ’ä»¶åŠ è½½æµç¨‹çš„ç†è§£ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä»¥ä¸‹æŠ€æœ¯æ–¹æ¡ˆæ¥æ”¯æŒ MCP é™æ€é…ç½®ï¼š</p>
<ol>
<li><strong>å°è£… MCP æ ¸å¿ƒå®¢æˆ·ç«¯</strong>ï¼šåœ¨ <code>backend/pkg/mcp/client.go</code> ä¸­å°è£… MCP åè®®é€šä¿¡</li>
<li><strong>é›†æˆåˆ°æ’ä»¶åŠ è½½æµç¨‹</strong>ï¼šåœ¨ <code>load_plugin.go</code> ä¸­è¯†åˆ« MCP æ’ä»¶å¹¶åŠ è½½å·¥å…·</li>
<li><strong>å®ç° MCP å·¥å…·æ‰§è¡Œå™¨</strong>ï¼šåœ¨ <code>invocation_mcp.go</code> ä¸­å®ç°å·¥å…·è°ƒç”¨é€»è¾‘</li>
</ol>
<h3 data-id="heading-12">1. å°è£… MCP æ ¸å¿ƒå®¢æˆ·ç«¯</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°è£…ä¸€ä¸ª MCP å®¢æˆ·ç«¯æ¥ä¸ MCP æœåŠ¡å™¨é€šä¿¡ã€‚MCP åè®®æ”¯æŒä¸¤ç§ä¼ è¾“æ–¹å¼ï¼š</p>
<ul>
<li><strong>stdio</strong>ï¼šæ ‡å‡†è¾“å…¥è¾“å‡ºï¼Œé€‚ç”¨äºæœ¬åœ°è¿›ç¨‹é€šä¿¡</li>
<li><strong>SSE</strong>ï¼šServer-Sent Eventsï¼Œé€‚ç”¨äº HTTP é•¿è¿æ¥</li>
</ul>
<h4 data-id="heading-13">1.1 é…ç½®ç»“æ„å®šä¹‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/pkg/mcp/client.go</span>

<span class="hljs-comment">// TransportType å®šä¹‰ä¼ è¾“ç±»å‹</span>
<span class="hljs-keyword">type</span> TransportType <span class="hljs-type">string</span>

<span class="hljs-keyword">const</span> (
    TransportTypeStdio TransportType = <span class="hljs-string">"stdio"</span>
    TransportTypeSSE   TransportType = <span class="hljs-string">"sse"</span>
)

<span class="hljs-comment">// Config MCP å®¢æˆ·ç«¯é…ç½®</span>
<span class="hljs-keyword">type</span> Config <span class="hljs-keyword">struct</span> {
    ServerName    <span class="hljs-type">string</span>        <span class="hljs-string">`json:"server_name"`</span>
    TransportType TransportType <span class="hljs-string">`json:"transport_type"`</span>
    StdioConfig   *StdioConfig  <span class="hljs-string">`json:"stdio_config,omitempty"`</span>
    SSEConfig     *SSEConfig    <span class="hljs-string">`json:"sse_config,omitempty"`</span>
}

<span class="hljs-comment">// StdioConfig stdio ä¼ è¾“é…ç½®</span>
<span class="hljs-keyword">type</span> StdioConfig <span class="hljs-keyword">struct</span> {
    Command    []<span class="hljs-type">string</span>          <span class="hljs-string">`json:"command"`</span>
    Env        <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span> <span class="hljs-string">`json:"env,omitempty"`</span>
    WorkingDir <span class="hljs-type">string</span>            <span class="hljs-string">`json:"working_dir,omitempty"`</span>
}

<span class="hljs-comment">// SSEConfig SSE ä¼ è¾“é…ç½®</span>
<span class="hljs-keyword">type</span> SSEConfig <span class="hljs-keyword">struct</span> {
    URL     <span class="hljs-type">string</span>            <span class="hljs-string">`json:"url"`</span>
    APIKey  <span class="hljs-type">string</span>            <span class="hljs-string">`json:"api_key,omitempty"`</span>
    Headers <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span> <span class="hljs-string">`json:"headers,omitempty"`</span>
}
</code></pre>
<h4 data-id="heading-14">1.2 å®¢æˆ·ç«¯å°è£…</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Client å°è£… MCP å®¢æˆ·ç«¯</span>
<span class="hljs-keyword">type</span> Client <span class="hljs-keyword">struct</span> {
    client    *client.Client
    transport transport.Interface
}

<span class="hljs-comment">// NewClient æ ¹æ®é…ç½®åˆ›å»º MCP å®¢æˆ·ç«¯</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewClient</span><span class="hljs-params">(config *Config)</span></span> (*Client, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">switch</span> config.TransportType {
    <span class="hljs-keyword">case</span> TransportTypeStdio:
        <span class="hljs-keyword">return</span> newStdioClient(config.StdioConfig)
    <span class="hljs-keyword">case</span> TransportTypeSSE:
        <span class="hljs-keyword">return</span> newSSEClient(config.SSEConfig)
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"unsupported transport type: %s"</span>, config.TransportType)
    }
}

<span class="hljs-comment">// Initialize åˆå§‹åŒ– MCP å®¢æˆ·ç«¯è¿æ¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Client)</span></span> Initialize(ctx context.Context) <span class="hljs-type">error</span> {
    initRequest := mcp.InitializeRequest{}
    initRequest.Params.ProtocolVersion = mcp.LATEST_PROTOCOL_VERSION
    initRequest.Params.ClientInfo = mcp.Implementation{
        Name:    <span class="hljs-string">"coze-studio"</span>,
        Version: <span class="hljs-string">"1.0.0"</span>,
    }
    
    _, err := c.client.Initialize(ctx, initRequest)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"initialize failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// éªŒè¯è¿æ¥ï¼šåˆ—å‡ºå¯ç”¨å·¥å…·</span>
    result, err := c.client.ListTools(ctx, mcp.ListToolsRequest{})
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> fmt.Errorf(<span class="hljs-string">"list tools failed: %w"</span>, err)
    }
    
    logs.Infof(<span class="hljs-string">"[MCP] Successfully initialized. Available tools (%d)"</span>, <span class="hljs-built_in">len</span>(result.Tools))
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// CallTool è°ƒç”¨ MCP å·¥å…·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Client)</span></span> CallTool(ctx context.Context, name <span class="hljs-type">string</span>, arguments <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any) (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    result, err := c.client.CallTool(ctx, mcp.CallToolRequest{
        Params: mcp.CallToolParams{
            Name:      name,
            Arguments: arguments,
        },
    })
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"call tool failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">return</span> convertToolResultToString(result), <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// ListTools åˆ—å‡ºæ‰€æœ‰å¯ç”¨å·¥å…·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Client)</span></span> ListTools(ctx context.Context) ([]mcp.Tool, <span class="hljs-type">error</span>) {
    result, err := c.client.ListTools(ctx, mcp.ListToolsRequest{})
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
    }
    <span class="hljs-keyword">return</span> result.Tools, <span class="hljs-literal">nil</span>
}
</code></pre>
<p><strong>å…³é”®è®¾è®¡ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>ä¼ è¾“æŠ½è±¡</strong>ï¼šé€šè¿‡ <code>TransportType</code> æšä¸¾æ”¯æŒå¤šç§ä¼ è¾“æ–¹å¼</li>
<li><strong>é…ç½®åˆ†ç¦»</strong>ï¼šä¸åŒä¼ è¾“æ–¹å¼çš„é…ç½®ç‹¬ç«‹å®šä¹‰ï¼Œé¿å…è€¦åˆ</li>
<li><strong>è¿æ¥éªŒè¯</strong>ï¼šåˆå§‹åŒ–æ—¶é€šè¿‡ <code>ListTools</code> éªŒè¯è¿æ¥æœ‰æ•ˆæ€§</li>
<li><strong>ç»“æœè½¬æ¢</strong>ï¼šå°† MCP å·¥å…·ç»“æœç»Ÿä¸€è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ ¼å¼</li>
</ol>
<h3 data-id="heading-15">2. åœ¨æ’ä»¶åŠ è½½æµç¨‹ä¸­é›†æˆ MCP</h3>
<p>åœ¨ <code>load_plugin.go</code> ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¯†åˆ« MCP æ’ä»¶ï¼Œè§£æé…ç½®ï¼Œè¿æ¥ MCP æœåŠ¡å™¨ï¼Œå¹¶å°†å·¥å…·æ·»åŠ åˆ°ç¼“å­˜ä¸­ã€‚</p>
<h4 data-id="heading-16">2.1 MCP æ’ä»¶è¯†åˆ«</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/domain/plugin/conf/load_plugin.go</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">loadPluginProductMeta</span><span class="hljs-params">(ctx context.Context, basePath <span class="hljs-type">string</span>)</span></span> (err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// ... è¯»å–å’Œè§£æ YAML ...</span>
    
    <span class="hljs-keyword">for</span> _, m := <span class="hljs-keyword">range</span> pluginsMeta {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯ MCP æ’ä»¶</span>
        isMCPPlugin := m.Manifest.API.Type == consts.PluginTypeOfMCP
        
        <span class="hljs-keyword">if</span> isMCPPlugin {
            <span class="hljs-comment">// MCP æ’ä»¶å¤„ç†</span>
            logs.CtxInfof(ctx, <span class="hljs-string">"[MCP] Loading MCP plugin: plugin_id=%d"</span>, m.PluginID)
            
            <span class="hljs-comment">// 1. è§£æ MCP é…ç½®</span>
            mcpConfig, err := parseMCPConfigFromManifest(m.Manifest)
            <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
                logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to parse MCP config: %v"</span>, err)
                <span class="hljs-keyword">continue</span>
            }
            
            <span class="hljs-comment">// 2. åˆ›å»ºæœ€å°åŒ– OpenAPI æ–‡æ¡£ï¼ˆMCP æ’ä»¶ä¸éœ€è¦çœŸå®çš„ OpenAPIï¼‰</span>
            doc := createMinimalOpenAPIDocForMCP(m.Manifest)
            
            <span class="hljs-comment">// 3. åˆ›å»º PluginInfo</span>
            pi := &amp;PluginInfo{
                Info: &amp;model.PluginInfo{
                    ID:         m.PluginID,
                    PluginType: m.PluginType,
                    Version:    ptr.Of(m.Version),
                    Manifest:   m.Manifest,
                    OpenapiDoc: doc,
                },
                ToolIDs: <span class="hljs-built_in">make</span>([]<span class="hljs-type">int64</span>, <span class="hljs-number">0</span>),
            }
            
            pluginProducts[m.PluginID] = pi
            
            <span class="hljs-comment">// 4. ä» MCP æœåŠ¡å™¨åŠ è½½å·¥å…·</span>
            loader := &amp;mcpToolLoader{}
            mcpTools, err := loader.LoadMCPTools(ctx, m.PluginID, m.Version, mcpConfig)
            <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
                logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to load tools: %v"</span>, err)
                <span class="hljs-built_in">delete</span>(pluginProducts, m.PluginID)
                <span class="hljs-keyword">continue</span>
            }
            
            <span class="hljs-comment">// 5. å°†å·¥å…·æ·»åŠ åˆ°ç¼“å­˜</span>
            <span class="hljs-keyword">for</span> _, toolInfo := <span class="hljs-keyword">range</span> mcpTools {
                pi.ToolIDs = <span class="hljs-built_in">append</span>(pi.ToolIDs, toolInfo.Info.ID)
                toolProducts[toolInfo.Info.ID] = toolInfo
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// OpenAPI æ’ä»¶å¤„ç†ï¼ˆåŸæœ‰é€»è¾‘ï¼‰</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-17">2.2 MCP é…ç½®è§£æ</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// parseMCPConfigFromManifest ä» Manifest ä¸­è§£æ MCP é…ç½®</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">parseMCPConfigFromManifest</span><span class="hljs-params">(manifest *model.PluginManifest)</span></span> (*mcp.Config, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">if</span> manifest.API.Extensions == <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"manifest.api.extensions is nil"</span>)
    }
    
    mcpConfigData, ok := manifest.API.Extensions[<span class="hljs-string">"mcp_config"</span>]
    <span class="hljs-keyword">if</span> !ok {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"mcp_config not found in manifest.api.extensions"</span>)
    }
    
    <span class="hljs-comment">// è½¬æ¢ä¸º JSON å¹¶è§£æ</span>
    configJSON, err := json.Marshal(mcpConfigData)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"marshal mcp_config failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">var</span> config mcp.Config
    <span class="hljs-keyword">if</span> err := json.Unmarshal(configJSON, &amp;config); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"unmarshal mcp_config failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">return</span> &amp;config, <span class="hljs-literal">nil</span>
}
</code></pre>
<h4 data-id="heading-18">2.3 MCP å·¥å…·åŠ è½½å™¨</h4>
<p><code>mcp_tool_loader.go</code> è´Ÿè´£ä» MCP æœåŠ¡å™¨åŠ è½½å·¥å…·å¹¶è½¬æ¢ä¸º <code>ToolInfo</code>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/domain/plugin/conf/mcp_tool_loader.go</span>

<span class="hljs-keyword">type</span> mcpToolLoader <span class="hljs-keyword">struct</span>{}

<span class="hljs-comment">// LoadMCPTools ä» MCP æœåŠ¡å™¨åŠ è½½å·¥å…·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(l *mcpToolLoader)</span></span> LoadMCPTools(
    ctx context.Context,
    pluginID <span class="hljs-type">int64</span>,
    pluginVersion <span class="hljs-type">string</span>,
    mcpConfig *mcp.Config,
) ([]*ToolInfo, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. åˆ›å»º MCP å®¢æˆ·ç«¯</span>
    client, err := mcp.NewClient(mcpConfig)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"create mcp client failed: %w"</span>, err)
    }
    <span class="hljs-keyword">defer</span> client.Close()
    
    <span class="hljs-comment">// 2. åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
    <span class="hljs-keyword">if</span> err := client.Initialize(ctx); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"initialize mcp client failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 3. åˆ—å‡ºæ‰€æœ‰å·¥å…·</span>
    mcpTools, err := client.ListTools(ctx)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"list mcp tools failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 4. è½¬æ¢ä¸º ToolInfo</span>
    toolInfos := <span class="hljs-built_in">make</span>([]*ToolInfo, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(mcpTools))
    <span class="hljs-keyword">for</span> idx, mcpTool := <span class="hljs-keyword">range</span> mcpTools {
        toolInfo, err := l.convertMCPToolToToolInfo(ctx, pluginID, pluginVersion, mcpTool, idx)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            logs.CtxErrorf(ctx, <span class="hljs-string">"[MCP] Failed to convert tool '%s': %v"</span>, mcpTool.Name, err)
            <span class="hljs-keyword">continue</span>
        }
        toolInfos = <span class="hljs-built_in">append</span>(toolInfos, toolInfo)
    }
    
    <span class="hljs-keyword">return</span> toolInfos, <span class="hljs-literal">nil</span>
}
</code></pre>
<h4 data-id="heading-19">2.4 MCP Tool åˆ° ToolInfo è½¬æ¢</h4>
<p>MCP Tool éœ€è¦è½¬æ¢ä¸º <code>Coze Studio</code> çš„ <code>ToolInfo</code> æ ¼å¼ï¼Œå…³é”®æ˜¯å°† MCP çš„ JSON Schema è½¬æ¢ä¸º OpenAPI Operationï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// convertMCPToolToToolInfo å°† MCP Tool è½¬æ¢ä¸º ToolInfo</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(l *mcpToolLoader)</span></span> convertMCPToolToToolInfo(
    ctx context.Context,
    pluginID <span class="hljs-type">int64</span>,
    pluginVersion <span class="hljs-type">string</span>,
    mcpTool mcpgo.Tool,
    toolIndex <span class="hljs-type">int</span>,
) (*ToolInfo, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. ç”Ÿæˆå·¥å…· IDï¼ˆplugin_id * 1000 + indexï¼‰</span>
    toolID := pluginID*<span class="hljs-number">1000</span> + <span class="hljs-type">int64</span>(toolIndex+<span class="hljs-number">1</span>)
    
    <span class="hljs-comment">// 2. å°† MCP Input Schema è½¬æ¢ä¸º OpenAPI Operation</span>
    operation, err := l.convertMCPToolToOpenAPIOperation(mcpTool)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"convert to openapi operation failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 3. éªŒè¯ Operation</span>
    <span class="hljs-keyword">if</span> err := operation.Validate(ctx); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"validate operation failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 4. åˆ›å»º ToolInfo</span>
    toolInfo := &amp;ToolInfo{
        Info: &amp;entity.ToolInfo{
            ID:              toolID,
            PluginID:        pluginID,
            Version:         ptr.Of(pluginVersion),
            Method:          ptr.Of(<span class="hljs-string">"POST"</span>),  <span class="hljs-comment">// MCP å·¥å…·é»˜è®¤ä½¿ç”¨ POST</span>
            SubURL:          ptr.Of(fmt.Sprintf(<span class="hljs-string">"/mcp/%s"</span>, mcpTool.Name)),
            Operation:       operation,
            ActivatedStatus: ptr.Of(consts.ActivateTool),
            DebugStatus:     ptr.Of(common.APIDebugStatus_DebugPassed),
        },
    }
    
    <span class="hljs-keyword">return</span> toolInfo, <span class="hljs-literal">nil</span>
}
</code></pre>
<p><strong>Schema è½¬æ¢æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[MCP Tool InputSchema] --&gt; B[JSON Schema]
    B --&gt; C[API Parameters]
    C --&gt; D[OpenAPI Operation]
    D --&gt; E[ToolInfo]
</code></pre>
<p>è½¬æ¢è¿‡ç¨‹éœ€è¦å¤„ç†ï¼š</p>
<ul>
<li>JSON Schema ç±»å‹æ˜ å°„ï¼ˆstring, integer, number, boolean, array, objectï¼‰</li>
<li>åµŒå¥—å¯¹è±¡å’Œæ•°ç»„çš„å¤„ç†</li>
<li>å¿…éœ€å­—æ®µçš„è¯†åˆ«</li>
<li>å‚æ•°æè¿°çš„ä¿ç•™</li>
</ul>
<h3 data-id="heading-20">3. æ’ä»¶æ‰§è¡Œè°ƒç”¨ MCP</h3>
<p>å½“ç”¨æˆ·è°ƒç”¨ MCP å·¥å…·æ—¶ï¼Œéœ€è¦è·¯ç”±åˆ° MCP æ‰§è¡Œå™¨ã€‚æ‰§è¡Œå™¨è´Ÿè´£ï¼š</p>
<ol>
<li>è§£æ MCP é…ç½®</li>
<li>è·å–æˆ–åˆ›å»º MCP å®¢æˆ·ç«¯ï¼ˆæ”¯æŒè¿æ¥å¤ç”¨ï¼‰</li>
<li>è°ƒç”¨ MCP å·¥å…·</li>
<li>æ ¼å¼åŒ–å“åº”</li>
</ol>
<h4 data-id="heading-21">3.1 MCP æ‰§è¡Œå™¨å®ç°</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/domain/plugin/service/tool/invocation_mcp.go</span>

<span class="hljs-keyword">type</span> mcpCallImpl <span class="hljs-keyword">struct</span> {
    clients <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]*mcp.Client <span class="hljs-comment">// key: config hash</span>
    mu      sync.RWMutex
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewMcpCallImpl</span><span class="hljs-params">()</span></span> Invocation {
    <span class="hljs-keyword">return</span> &amp;mcpCallImpl{
        clients: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]*mcp.Client),
    }
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *mcpCallImpl)</span></span> Do(ctx context.Context, args *InvocationArgs) (request <span class="hljs-type">string</span>, resp <span class="hljs-type">string</span>, err <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. è§£æ MCP é…ç½®</span>
    mcpConfig, err := m.parseMCPConfig(args)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"parse mcp config failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 2. è·å–æˆ–åˆ›å»º MCP å®¢æˆ·ç«¯ï¼ˆæ”¯æŒè¿æ¥å¤ç”¨ï¼‰</span>
    client, err := m.getOrCreateClient(ctx, mcpConfig)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"get mcp client failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 3. æ„å»ºå·¥å…·è°ƒç”¨å‚æ•°</span>
    toolName := args.Tool.GetName()
    arguments := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any)
    
    <span class="hljs-comment">// åˆå¹¶æ‰€æœ‰å‚æ•°ï¼ˆHeader, Query, Path, Bodyï¼‰</span>
    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> args.Header {
        arguments[k] = v
    }
    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> args.Query {
        arguments[k] = v
    }
    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> args.Path {
        arguments[k] = v
    }
    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> args.Body {
        arguments[k] = v
    }
    
    <span class="hljs-comment">// 4. è°ƒç”¨ MCP å·¥å…·</span>
    resultStr, err := client.CallTool(ctx, toolName, arguments)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        requestJSON, _ := sonic.MarshalString(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any{
            <span class="hljs-string">"tool"</span>:      toolName,
            <span class="hljs-string">"arguments"</span>: arguments,
        })
        <span class="hljs-keyword">return</span> requestJSON, <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"call mcp tool failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 5. åºåˆ—åŒ–è¯·æ±‚å’Œå“åº”</span>
    requestJSON, _ := sonic.MarshalString(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any{
        <span class="hljs-string">"tool"</span>:      toolName,
        <span class="hljs-string">"arguments"</span>: arguments,
    })
    
    <span class="hljs-comment">// MCP å·¥å…·è¿”å›æ–‡æœ¬ï¼Œéœ€è¦åŒ…è£…ä¸º JSON</span>
    responseJSON, err := sonic.MarshalString(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]any{
        <span class="hljs-string">"output"</span>: resultStr,
    })
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> requestJSON, <span class="hljs-string">""</span>, fmt.Errorf(<span class="hljs-string">"marshal mcp response failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">return</span> requestJSON, responseJSON, <span class="hljs-literal">nil</span>
}
</code></pre>
<h4 data-id="heading-22">3.2 å®¢æˆ·ç«¯è¿æ¥å¤ç”¨</h4>
<p>ä¸ºäº†æå‡æ€§èƒ½ï¼Œæˆ‘ä»¬å®ç°äº†å®¢æˆ·ç«¯è¿æ¥å¤ç”¨æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// getOrCreateClient è·å–æˆ–åˆ›å»º MCP å®¢æˆ·ç«¯ï¼ˆæ”¯æŒè¿æ¥å¤ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *mcpCallImpl)</span></span> getOrCreateClient(ctx context.Context, config *mcp.Config) (*mcp.Client, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. è®¡ç®—é…ç½®å“ˆå¸Œä½œä¸ºç¼“å­˜ key</span>
    configHash := m.hashConfig(config)
    
    <span class="hljs-comment">// 2. å°è¯•ä»ç¼“å­˜è·å–</span>
    m.mu.RLock()
    <span class="hljs-keyword">if</span> client, ok := m.clients[configHash]; ok {
        m.mu.RUnlock()
        <span class="hljs-keyword">return</span> client, <span class="hljs-literal">nil</span>
    }
    m.mu.RUnlock()
    
    <span class="hljs-comment">// 3. åˆ›å»ºæ–°å®¢æˆ·ç«¯ï¼ˆåŒé‡æ£€æŸ¥ï¼‰</span>
    m.mu.Lock()
    <span class="hljs-keyword">defer</span> m.mu.Unlock()
    
    <span class="hljs-keyword">if</span> client, ok := m.clients[configHash]; ok {
        <span class="hljs-keyword">return</span> client, <span class="hljs-literal">nil</span>
    }
    
    <span class="hljs-comment">// 4. åˆ›å»ºå¹¶åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
    client, err := mcp.NewClient(config)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"create mcp client failed: %w"</span>, err)
    }
    
    <span class="hljs-keyword">if</span> err := client.Initialize(ctx); err != <span class="hljs-literal">nil</span> {
        client.Close()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">"initialize mcp client failed: %w"</span>, err)
    }
    
    <span class="hljs-comment">// 5. ç¼“å­˜å®¢æˆ·ç«¯</span>
    m.clients[configHash] = client
    
    <span class="hljs-keyword">return</span> client, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// hashConfig ç”Ÿæˆé…ç½®å“ˆå¸Œ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *mcpCallImpl)</span></span> hashConfig(config *mcp.Config) <span class="hljs-type">string</span> {
    data, _ := json.Marshal(config)
    hash := sha256.Sum256(data)
    <span class="hljs-keyword">return</span> hex.EncodeToString(hash[:])
}
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>è¿æ¥å¤ç”¨</strong>ï¼šç›¸åŒé…ç½®çš„ MCP æœåŠ¡å™¨å…±äº«ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šä½¿ç”¨ <code>sync.RWMutex</code> ä¿è¯å¹¶å‘å®‰å…¨</li>
<li><strong>åŒé‡æ£€æŸ¥</strong>ï¼šé¿å…é‡å¤åˆ›å»ºå®¢æˆ·ç«¯</li>
<li><strong>é…ç½®å“ˆå¸Œ</strong>ï¼šä½¿ç”¨ SHA256 å“ˆå¸Œä½œä¸ºç¼“å­˜ key</li>
</ol>
<h4 data-id="heading-23">3.3 æ‰§è¡Œè·¯ç”±</h4>
<p>åœ¨ <code>exec_tool.go</code> ä¸­ï¼Œæ ¹æ®æ’ä»¶ç±»å‹è·¯ç”±åˆ°å¯¹åº”çš„æ‰§è¡Œå™¨ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/domain/plugin/service/exec_tool.go</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">newToolInvocation</span><span class="hljs-params">(t *toolExecutor)</span></span> tool.Invocation {
    <span class="hljs-keyword">switch</span> t.plugin.Manifest.API.Type {
    <span class="hljs-keyword">case</span> consts.PluginTypeOfCloud:
        <span class="hljs-comment">// HTTP æ’ä»¶</span>
        <span class="hljs-keyword">return</span> tool.NewHttpCallImpl(t.conversationID)
    
    <span class="hljs-keyword">case</span> consts.PluginTypeOfMCP:
        <span class="hljs-comment">// MCP æ’ä»¶</span>
        <span class="hljs-keyword">return</span> tool.NewMcpCallImpl()
    
    <span class="hljs-keyword">case</span> consts.PluginTypeOfCustom:
        <span class="hljs-comment">// è‡ªå®šä¹‰æ’ä»¶</span>
        <span class="hljs-keyword">return</span> tool.NewCustomCallImpl()
    
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> tool.NewHttpCallImpl(t.conversationID)
    }
}
</code></pre>
<h3 data-id="heading-24">4. YAML é…ç½®æ ¼å¼</h3>
<p>åœ¨ <code>plugin_meta.yaml</code> ä¸­ï¼ŒMCP æ’ä»¶çš„é…ç½®æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">plugin_id:</span> <span class="hljs-number">101</span>
  <span class="hljs-attr">product_id:</span> <span class="hljs-number">7600000000000000101</span>
  <span class="hljs-attr">deprecated:</span> <span class="hljs-literal">false</span>
  <span class="hljs-attr">version:</span> <span class="hljs-string">v1.0.0</span>
  <span class="hljs-attr">openapi_doc_file:</span>   <span class="hljs-comment"># MCP æ’ä»¶å¯ä»¥å¿½ç•¥æ­¤å­—æ®µ</span>
  <span class="hljs-attr">plugin_type:</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">manifest:</span>
    <span class="hljs-attr">schema_version:</span> <span class="hljs-string">v1</span>
    <span class="hljs-attr">name_for_model:</span> <span class="hljs-string">è¿œç¨‹æ‰§è¡Œå‘½ä»¤MCP</span>
    <span class="hljs-attr">name_for_human:</span> <span class="hljs-string">è¿œç¨‹æ‰§è¡Œå‘½ä»¤MCP</span>
    <span class="hljs-attr">description_for_model:</span> <span class="hljs-string">é€šè¿‡</span> <span class="hljs-string">MCP</span> <span class="hljs-string">åè®®åœ¨è¿œç¨‹æœºå™¨ä¸Šæ‰§è¡Œå‘½ä»¤æˆ–è„šæœ¬</span>
    <span class="hljs-attr">description_for_human:</span> <span class="hljs-string">è¿œç¨‹å‘½ä»¤æ‰§è¡Œå·¥å…·ï¼ŒåŸºäº</span> <span class="hljs-string">MCP</span> <span class="hljs-string">åè®®å®ç°å®‰å…¨çš„è¿œç¨‹æ“ä½œ</span>
    <span class="hljs-attr">auth:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">none</span>
    <span class="hljs-attr">logo_url:</span> <span class="hljs-string">official_plugin_icon/plugin_remote_exec.png</span>
    <span class="hljs-attr">api:</span>
      <span class="hljs-attr">type:</span> <span class="hljs-string">coze-studio-mcp</span>  <span class="hljs-comment"># æ ‡è¯†ä¸º MCP æ’ä»¶</span>
      <span class="hljs-attr">extensions:</span>
        <span class="hljs-attr">mcp_config:</span>  <span class="hljs-comment"># MCP é…ç½®</span>
          <span class="hljs-attr">transport_type:</span> <span class="hljs-string">sse</span>  <span class="hljs-comment"># æˆ– stdio</span>
          <span class="hljs-attr">sse_config:</span>
            <span class="hljs-attr">url:</span> <span class="hljs-string">http://10.x.x.x:8000/mcp/sse</span>
            <span class="hljs-attr">headers:</span>
              <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">application/json</span>
    <span class="hljs-attr">common_params:</span>
      <span class="hljs-attr">body:</span> []
      <span class="hljs-attr">header:</span> []
      <span class="hljs-attr">path:</span> []
      <span class="hljs-attr">query:</span> []
  <span class="hljs-attr">tools:</span> []  <span class="hljs-comment"># MCP æ’ä»¶çš„å·¥å…·ä»æœåŠ¡å™¨åŠ¨æ€åŠ è½½ï¼Œè¿™é‡Œå¯ä»¥ä¸ºç©º</span>
</code></pre>
<p><strong>é…ç½®è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong><code>api.type</code></strong>ï¼šå¿…é¡»è®¾ç½®ä¸º ``Coze Studio<code>-mcp</code></li>
<li><strong><code>api.extensions.mcp_config</code></strong>ï¼šMCP æœåŠ¡å™¨é…ç½®
<ul>
<li><code>transport_type</code>ï¼šä¼ è¾“ç±»å‹ï¼ˆ<code>stdio</code> æˆ– <code>sse</code>ï¼‰</li>
<li><code>sse_config</code>ï¼šSSE ä¼ è¾“é…ç½®ï¼ˆåŒ…å« URL å’Œ Headersï¼‰</li>
<li><code>stdio_config</code>ï¼šstdio ä¼ è¾“é…ç½®ï¼ˆåŒ…å«å‘½ä»¤ã€ç¯å¢ƒå˜é‡ç­‰ï¼‰</li>
</ul>
</li>
<li><strong><code>tools</code></strong>ï¼šå¯ä»¥ä¸ºç©ºï¼Œå·¥å…·ä¼šä» MCP æœåŠ¡å™¨åŠ¨æ€åŠ è½½</li>
</ol>
<h2 data-id="heading-25">éªŒè¯æˆæœ</h2>
<h3 data-id="heading-26">1. å…ˆåœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½® mcpserver</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4592a8a70e1d46f9b7ad056959f0cf62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2WUs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766153875&amp;x-signature=Ix1gRGJq%2BRvWApN3%2B%2Fzjrm%2F6WCw%3D" alt="image-20251212160845027" loading="lazy"/></p>
<h3 data-id="heading-27">2. é‡å¯æœåŠ¡ï¼Œæ¢ç´¢æ’ä»¶</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5d3f0e704334ef291ae919059b87d93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2WUs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766153875&amp;x-signature=U0QaUFYpIO8Di6NrYbDO4AEAWHo%3D" alt="image-20251212160937194" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå‰ç«¯çš„æ¢ç´¢å·²ç»å‡ºç°äº†æˆ‘ä»¬åˆšåˆšé…ç½®çš„è¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„æ’ä»¶</p>
<h3 data-id="heading-28">3. éªŒè¯ç»“æœ</h3>
<p>ä¸ºäº†éªŒè¯ç»“æœï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå·¥ä½œæµ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8a33407dd6a4b508c1da8108eec736b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2WUs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766153875&amp;x-signature=Upb40z%2FJWC7suSluMV0sSmbYMbk%3D" alt="image-20251212163520774" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0a54abd7b434112b3689d7a00425757~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGV2WUs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766153875&amp;x-signature=1%2FwSGMr1vs0AZcQORcbhjIILiD4%3D" alt="image-20251212163939172" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æˆåŠŸçš„é…ç½®äº† mcpservers ï¼Œå¹¶ä¸” <code>Coze Studio</code> åœ¨å·¥ä½œæµä¸­ä¹Ÿæ­£å¸¸çš„è°ƒç”¨äº† mcp è¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„æ’ä»¶ã€‚</p>
<h2 data-id="heading-29">å¦‚ä½•ä½¿ç”¨:</h2>
<p>ä¸‹è½½ä»£ç ï¼Œå¹¶åˆå§‹åŒ–åç«¯ &amp; å®¹å™¨ &amp; db ç¯å¢ƒ</p>
<pre><code class="hljs language-shell" lang="shell">git clone https://github.com/yangkun19921001/coze-studio-plus
cd coze-studio-plus
./start_vs_debug.sh
</code></pre>
<p>è¿è¡Œåç«¯æœåŠ¡</p>
<pre><code class="hljs language-json" lang="json">        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Coze Studio Backend (Debug)"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"go"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"launch"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"mode"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"program"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}/coze-studio/backend/main.go"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"cwd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${workspaceFolder}/coze-studio/backend"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"console"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"integratedTerminal"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"APP_ENV"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"LOG_LEVEL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"debug"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"showLog"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
        <span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-30">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†åœ¨ <code>Coze Studio</code> ä¸­å®ç° MCP é™æ€é…ç½®æ”¯æŒçš„æ–¹æ³•ã€‚æ ¸å¿ƒæ€è·¯æ˜¯åœ¨ä¿æŒåŸæœ‰æ¶æ„ä¸å˜çš„å‰æä¸‹ï¼Œé€šè¿‡æ’ä»¶ç±»å‹åˆ¤æ–­å’Œåˆ†æ”¯å¤„ç†ï¼Œä¸º MCP æ’ä»¶æä¾›ç‹¬ç«‹çš„åŠ è½½è·¯å¾„ã€‚å®ç°åŒ…æ‹¬ MCP å®¢æˆ·ç«¯å°è£…ã€é…ç½®è§£æã€å·¥å…·åŠ¨æ€åŠ è½½ã€Schema è½¬æ¢ä»¥åŠæ‰§è¡Œå™¨é›†æˆç­‰å…³é”®ç¯èŠ‚ã€‚</p>
<p>é€šè¿‡é™æ€é…ç½®æ–¹å¼ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ <code>plugin_meta.yaml</code> ä¸­é…ç½® MCP æœåŠ¡å™¨ä¿¡æ¯ï¼Œç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½å¹¶æ³¨å†Œå·¥å…·ã€‚è¿™ç§æ–¹å¼é€‚åˆå›ºå®šçš„ã€é¢„å®šä¹‰çš„ MCP æœåŠ¡å™¨åœºæ™¯ã€‚</p>
<p><strong>ä¸‹ä¸€æ­¥</strong></p>
<p>ç›®å‰å®ç°çš„é™æ€é…ç½®æ–¹å¼éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶å¹¶é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›èƒ½åƒ Cursor é‚£æ ·ï¼Œé€šè¿‡ UI ç•Œé¢åŠ¨æ€æ·»åŠ ã€åˆ é™¤å’Œç®¡ç† MCP æœåŠ¡å™¨ï¼Œæ— éœ€é‡å¯æœåŠ¡ã€‚ä¸‹ä¸€ç¯‡å°†ä»‹ç»å¦‚ä½•å®ç° MCP æœåŠ¡å™¨çš„åŠ¨æ€é…ç½®åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>é€šè¿‡ API åŠ¨æ€æ·»åŠ /åˆ é™¤ MCP æœåŠ¡å™¨</li>
<li>å®æ—¶è¿æ¥æµ‹è¯•å’Œå·¥å…·åˆ—è¡¨åˆ·æ–°</li>
<li>é…ç½®æŒä¹…åŒ–å­˜å‚¨</li>
<li>UI ç•Œé¢é›†æˆ</li>
</ul>
<p>è¿™å°†è¿›ä¸€æ­¥æå‡ç³»ç»Ÿçš„çµæ´»æ€§å’Œç”¨æˆ·ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨‹åºå‘˜å‰¯ä¸š | 2025å¹´11æœˆå¤ç›˜]]></title>    <link>https://juejin.cn/post/7582786655473598507</link>    <guid>https://juejin.cn/post/7582786655473598507</guid>    <pubDate>2025-12-12T14:25:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582786655473598507" data-draft-id="7582786655473549355" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨‹åºå‘˜å‰¯ä¸š | 2025å¹´11æœˆå¤ç›˜"/> <meta itemprop="keywords" content="åç«¯,åˆ›ä¸š"/> <meta itemprop="datePublished" content="2025-12-12T14:25:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜Ÿå˜ŸMD"/> <meta itemprop="url" content="https://juejin.cn/user/3368559354851470"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨‹åºå‘˜å‰¯ä¸š | 2025å¹´11æœˆå¤ç›˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559354851470/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜Ÿå˜ŸMD
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:25:16.000Z" title="Fri Dec 12 2025 14:25:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2557cd7a86814ef8af74fe2f6ba77795~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=900&amp;h=383&amp;s=91599&amp;e=jpg&amp;b=64a5ef" alt="å¿…çœ‹å¤§å­—æœ€æ–°æ¶ˆæ¯é‡ç£…å…¬ä¼—å·é¦–å›¾(2) (1).jpg" loading="lazy"/></p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FYfjQvm5_T6MWABAOCQxNyQ" target="_blank" title="https://mp.weixin.qq.com/s/YfjQvm5_T6MWABAOCQxNyQ" ref="nofollow noopener noreferrer">å˜Ÿçˆ·åˆ›ä¸šæ—¥è®°</a>Â ã€‚ æˆ‘å·²ç»åšæŒæ—¥æ›´600å¤©+ï¼Œæ¬¢è¿è¿‡æ¥è¿½å‰§~</p>
</blockquote>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å˜Ÿå˜ŸMDï¼Œä¸€ä¸ª10å¹´ç¨‹åºå‘˜ï¼Œç°åœ¨ç¦»èŒåˆ›ä¸šï¼Œæœ‰700å¤©äº†ï¼Œæˆ‘æ¯ä¸ªæœˆéƒ½ä¼šå†™ä¸€ç¯‡æ€»ç»“å¤ç›˜ï¼Œè®©å¤§å®¶å¯ä»¥è¿‘è·ç¦»çœ‹çœ‹ä¸€ä¸ªç¦»èŒç¨‹åºå‘˜éƒ½åœ¨å¹²ä»€ä¹ˆï¼Œä»Šå¤©è¿™ç¯‡æ˜¯ä¹æœˆä»½çš„æ€»ç»“ï¼Œå¤§æ¦‚2000å­—ï¼Œç•¥é•¿ï¼Œæœ‰ç©ºçš„å¯ä»¥ç¿»ç¿»ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰ä¸€ä¸¢ä¸¢çš„å€Ÿé‰´ä½œç”¨ï¼</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€æœˆåº¦å¤§äº‹</h2>
<p>ä»Šå¹´å¿«ç»“æŸå•¦ï¼Œ11æœˆçš„æ€»ç»“å·®ç‚¹å°±æ¼æ‰äº†ï¼Œä»Šå¤©è¡¥ä¸Šï¼Œè¿™ä¸ªæœˆçš„è¯çº¿ä¸‹è¯¾ç¨‹ä»¥åŠä¼ä¸šå’¨è¯¢å•å­å¤šäº†ï¼Œå…¶ä»–çš„å’Œå¹³æ—¶å·®åˆ«ä¸å¤§ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/784ae5205bb04d91ab9430bd42d7ab58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zif5ZifTUQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154316&amp;x-signature=sPDP3k6az9Qct3rrWlnsKkfSbPk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>1ï¼šå…¬ä¼—å·è¿è¥+Bç«™è§†é¢‘è¿è¥</strong></p>
<p>å…¬ä¼—å·å’ŒBç«™è§†é¢‘è¿è¥ç›®å‰è¿˜æ˜¯æœ€é«˜ä¼˜å…ˆçº§ï¼Œå…ˆè¯´è¿™å—å†…å®¹ï¼Œæœ¬æœˆå…¬ä¼—å·å‘è¡¨27ç¯‡ï¼ˆ1ç¯‡è½¯æ–‡ï¼‰ï¼Œè§†é¢‘å·åˆ›ä½œ29ç¯‡ï¼Œè¿™æ¬¡è§†é¢‘æ•°é‡è¡¥ä¸Šäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbd3bd0a7b8c437da23ec05c86ac7b6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zif5ZifTUQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154316&amp;x-signature=zdmV7gEJ%2B6EQqLTu9W165e15dss%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>11æœˆæ²¡æœ‰å…¶ä»–äº‹æƒ…åˆ†å¿ƒï¼Œæ‰€ä»¥è§†é¢‘æ‹¿ç¨¿è´¹è¿™å—è¿˜ç®—ç¨³å®šï¼Œå·²ç»3ä¸ªæœˆç¨³å®šåœ¨8Kå·¦å³æ”¶å…¥äº†ï¼Œç›®å‰Bç«™ç²‰ä¸å¢é•¿é‡ä¸ç®—å¿«ï¼Œä¸­è§„ä¸­çŸ©ï¼Œæˆ‘æ˜¯çœ‹åˆ°åˆ«äººæ¶¨ç²‰å¾ˆå¿«çš„ï¼Œç¡®å®å¯¹æ–¹åšçš„è§†é¢‘è´¨é‡æ¯”æˆ‘å¥½ï¼Œè¿™å—è¿˜æ˜¯è¦æ…¢æ…¢æé«˜ä¸€ä¸‹ï¼Œä¹‹å‰å®šçš„è®¡åˆ’æ˜¯åˆ›ä½œè¿™å—å¸Œæœ›æœˆæ”¶ç›Šå¯ä»¥ç ´ä¸‡ï¼Œé‚£æ˜¯éœ€è¦ä¸‹åŠŸå¤«ç ”ç©¶å†…å®¹çš„è´¨é‡ã€‚</p>
<p>æ›´æ–°ä¸‹æˆ‘ç›®å‰å‡ ä¸ªå·çš„ç²‰ä¸ä½“é‡ï¼Œè¿˜æ˜¯Bç«™å¢é•¿ç¨³å®šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/913e79085f464afe89b0c63761d9bf57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zif5ZifTUQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766154316&amp;x-signature=2OMGA54YSC9hiZgT9tG1eKVCNcQ%3D" alt="å›¾ç‰‡" loading="lazy"/>Youtubeè¿™å—ç›®å‰ä¸€å¹´å†…æ’­æ”¾æ—¶é•¿å·²ç»3800å°æ—¶äº†ï¼Œ4000å°æ—¶æˆ‘å°±å¯ä»¥å¼€é€šæ’­æ”¾æ”¶ç›Šè¿™å—ï¼Œ12æœˆç»“æŸåº”è¯¥å°±å¯ä»¥æ‰“æ ‡ï¼Œåˆ°æ—¶å€™æ˜å¹´è¿™ä¸€å—çš„æ”¶ç›Šä¹Ÿä¼šæœ‰ä¸€äº›ï¼Œèµšç‚¹ç¾åˆ€ï¼Œå¾ˆæœŸå¾…ï¼ŒYoutubeåŒæ­¥å‘è§†é¢‘ä¹Ÿæœ‰4-5ä¸ªæœˆäº†ï¼Œç»ˆäºå¿«æœ‰æ”¶è·äº†ï¼Œå¸Œæœ›ä¸è¦å‡ºä»€ä¹ˆæ„å¤–ã€‚</p>
<p><strong>2ï¼šå•†å•ä¸šåŠ¡å’Œæ¥å¹¿ä¸šåŠ¡</strong></p>
<p>è¿™ä¸ªæœˆ3ä¸ªå•å­ï¼Œä¸€ä¸ªæ˜¯è½¯æ–‡å¹¿å­ï¼Œå‰©ä¸‹2ä¸ªæ˜¯çº¿ä¸‹å›¢é˜Ÿçš„å•å­ï¼Œä¸€ä¸ªæ˜¯çº¿ä¸‹æˆè¯¾å½“è®²å¸ˆï¼Œè¿˜æœ‰ä¸€ä¸ªä¹Ÿæ˜¯çº¿ä¸‹å›¢é˜Ÿä»‹ç»æ¥çš„ï¼Œç»™ä¸€ä¸ªå…¬å¸åšAIè§†é¢‘è¿™å—çš„å®šåˆ¶åŸ¹è®­ï¼Œè¿™ä¸ªæœˆä¹Ÿäº¤ä»˜äº†ï¼Œè¿˜å·®æœ€åä¸€ä¸ªç›´æ’­ç­”ç–‘å°±å¯ä»¥æå®šã€‚</p>
<p>è¿™æ¬¡çš„çªç ´ç‚¹æ ¸å¿ƒè¿˜æ˜¯åœ¨çº¿ä¸‹ï¼Œæ…¢æ…¢ä¹Ÿå¼€å§‹å‡ºç°æ”¶ç›Šäº†ï¼Œå›¢é˜Ÿé‡Œé¢å‡ ä¸ªäººéƒ½å¾ˆå‰å®³ï¼Œäº’ç›¸ç»„åˆï¼Œå¯ä»¥æœ‰æ›´å¤šçš„å•å­åé¢ã€‚</p>
<p><strong>3ï¼šç›´æ’­å–è¯¾ä¸Šå‘¨æœ«ç­</strong></p>
<p>è¿™ä¸ªæœˆæˆ‘ç»ˆäºæŠŠæˆ‘çš„è¯¾ç¨‹ä¸Šæ¶åˆ°è§†é¢‘å·äº†ï¼Œä¹Ÿç®—æ˜¯0-1æ‰“é€šäº†è·¯å¾„ï¼Œåé¢å°±å¯ä»¥åœ¨ç›´æ’­é‡Œé¢æŒ‚å“å–è¯¾ç¨‹ã€‚ç›®å‰æˆ‘ä»¬è®¡åˆ’çº¿ä¸Šå°±æ˜¯åšè¯¾ç¨‹+ç›´æ’­è½¬åŒ–ï¼Œçº¿ä¸‹å°±æ˜¯æ‰¾åˆä½œç‚¹åšè¯¾ç¨‹åŸ¹è®­ä»¥åŠä¼ä¸šä¼åŸ¹ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç¦AIå›¢é˜Ÿå•†ä¸šåŒ–æœªæ¥çš„å‡ ä¸ªåˆ‡å…¥ç‚¹ã€‚</p>
<h2 data-id="heading-1">äºŒã€æœ‰ä»€ä¹ˆæ”¶è·</h2>
<h3 data-id="heading-2">ã€è®¤çŸ¥æ–¹é¢ã€‘</h3>
<p><strong>1ï¼šäººä¸èƒ½ä¸€ç›´åœ¨èˆ’é€‚åŒº</strong></p>
<p>è¿™ä¸ªæƒ³æ³•æœ€è¿‘æŒºå¼ºçƒˆçš„ï¼Œè¿™ä¸ªä¸–ç•Œæ˜¯å……æ»¡ä¸ç¡®å®šæ€§çš„ï¼Œæˆ‘æ¯ä¸ªæœˆå…¶å®ä¸€ç›´æœ‰å…³æ³¨æˆ‘çš„æ”¶ç›Šæ³¢åŠ¨ï¼Œæˆ‘å‘ç°æˆ‘ä¸€ç›´åƒè€æœ¬ä¸æŠ˜è…¾çš„å‡ ä¸ªé¡¹ç›®æ”¶ç›Šæ˜¯è¶Šæ¥è¶Šä½çš„ï¼Œè€ŒAIç»˜ç”»è¿™å—ä¸€ç›´æŠ˜è…¾çš„å°±ä¸Šå‡è¶‹åŠ¿ï¼Œè¿™ä¸¤ä¸ªå½¢æˆçš„å¯¹æ¯”å¯¹æˆ‘åˆºæ¿€å°±å¾ˆå¤§ï¼Œäººä¸€æ—¦åœ¨èˆ’é€‚åŒºå°±ä¼šå˜å¾—å¾ˆæ‡’ï¼Œå°±ä¼šæ‰¾å„ç§ç†ç”±æ‹–å»¶æˆ–è€…ä¸è¡ŒåŠ¨ï¼Œå°±åƒæˆ‘è·‘æ­¥æ‹–å»¶ï¼Œå†™å¤ç›˜æ‹–å»¶ï¼Œå•¥éƒ½ä¸åšå¾ˆèˆ’æœï¼Œå¾€é‚£è¾¹ä¸€èººæŠ–éŸ³æ‰“å¼€åˆ·çŸ­å‰§ï¼Œå°é›¶é£Ÿä¸€åƒï¼Œåˆ«æå¤šèˆ’æœï¼ä½†æ˜¯äº‹æƒ…ä¸åšå†…å¿ƒå…¶å®ä¸€ç›´æœ‰ç„¦è™‘æ„Ÿã€‚</p>
<p>è¿™ä¸–ä¸Šæ²¡æœ‰å•¥é“é¥­ç¢—ï¼Œä¹Ÿæ²¡æœ‰ä¸€ç›´èµšé’±çš„é¡¹ç›®ï¼Œéƒ½æ˜¯è¦è‡ªå·±ä¸æ–­æŠ˜è…¾è¿­ä»£ï¼Œæ‰èƒ½é€‚åº”ç°åœ¨æ—¥æ–°æœˆå¼‚çš„å˜åŒ–ï¼Œåªæƒ³åƒè€æœ¬ï¼Œè¹²åœ¨èˆ’é€‚åŒºåªä¼šå®³äº†è‡ªå·±ï¼Œåˆ°æ—¶å€™æ— è·¯å¯èµ°äº†å†æ¥åæ‚”å°±æ¥ä¸åŠäº†ï¼Œå›å­ä¸ç«‹å±å¢™ä¹‹ä¸‹ï¼</p>
<h3 data-id="heading-3">ã€æ”¶å…¥æ–¹é¢ã€‘</h3>
<p>è¿™ä¸ªæœˆå¥½åƒä¸­è§„ä¸­çŸ©å§ï¼Œèµšçš„æ²¡ä¸Šä¸ªæœˆå¤šï¼Œä½†æ˜¯æ‰£é™¤ç”Ÿæ´»å¼€æ”¯è¿˜æ˜¯èƒ½å­˜ä¸‹æ¥ç‚¹é’±ï¼Œæˆ‘è¿™äººåªè¦æœˆæœ«ä¸æ˜¯è´Ÿæ”¯å‡ºæˆ‘éƒ½å¯ä»¥æ¥å—ã€‚</p>
<ul>
<li>1ï¼šæ—§çš„å‡ ä¸ªå‰¯ä¸šæ”¶ç›Šï¼ˆæ—§çš„æ”¶ç›Šå¼€å§‹ä¸ç¨³å®šäº†ï¼‰</li>
<li>2ï¼šAIç»˜ç”»ç›¸å…³å˜ç°ï¼ˆç›®å‰å¯ä»¥ç¨³å®šæœˆ8000+ï¼‰</li>
</ul>
<p>åæœŸçš„è¯ï¼Œæˆ‘è¿˜è¦å†æé«˜ä¸€äº›AIç»˜ç”»å æ¯”ï¼Œåšäº§å“æ‰‹å†Œ+ç›´æ’­å–è¯¾è¿™ä¸¤ç§å½¢å¼ã€‚</p>
<h3 data-id="heading-4">ã€æŠ€èƒ½æ–¹é¢ã€‘</h3>
<p><strong>1ï¼šè¯¾ç¨‹å½•åˆ¶æ‰“ç£¨</strong></p>
<p>è¿™ä¸ªæœˆæœ€æ ¸å¿ƒçš„è¿˜æ˜¯è¯¾ç¨‹å½•åˆ¶+ä¸Šæ¶çŸ¥è¯†æ­æ¡£+å‘å¸ƒåˆ°è§†é¢‘å·ï¼Œè¿™ç®—æ˜¯æ‰“é€šäº†æˆ‘ä»¬çº¿ä¸Šè¯¾ç¨‹çš„æœ€åä¸€ä¸ªé—¨æ§›ï¼Œè‡ªå·±åšçš„è¯¾ç¨‹ç»ˆäºå¯ä»¥ä¸Šæ¶åˆ°è§†é¢‘å·äº†ï¼Œæ˜å¹´çº¿ä¸Šç›´æ’­ä¸€å®šæ˜¯è¦åšèµ·æ¥çš„ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€é—®é¢˜</h2>
<p>è¿™ä¸ªæœˆé—®é¢˜æœ‰ç‚¹å¤šï¼Œç»§ç»­ç½—åˆ—ä¸€ä¸‹ï¼š</p>
<p><strong>1ï¼šç¡çœ +å¥èº«</strong></p>
<p>11æœˆè¿™ä¸ªæœˆæ•´ä½“è¿˜å¥½ï¼Œä½†è¿˜æ˜¯å¶å°”æœ‰ç†¬å¤œçš„ä¹ æƒ¯ï¼Œç”Ÿç‰©é’Ÿç›®å‰è¿˜æ˜¯æ™šä¸Šæœ€æœ‰ç²¾ç¥ï¼Œå–œæ¬¢ç†¬å¤œå­¦ä¹ ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼šå¯¼è‡´æ—©ä¸Šèµ·ä¸æ¥ï¼Œå°±é”™è¿‡äº†å»å…¬å›­æ™¨è·‘çš„æœºä¼šï¼Œæ‹–åˆ°æ™šä¸Šæœ‰æ—¶å€™äº‹æƒ…ä¸€å¤šï¼Œæ¯”å¦‚å¼€ä¼šå’Œå¬è¯¾ï¼Œç„¶åå°±åˆæŠ›å¼ƒäº†å¥èº«ã€‚è¿™ä¸ªé—®é¢˜ä¸è§£å†³æ„Ÿè§‰æ˜å¹´ä¼šå‡ºé—®é¢˜ã€‚</p>
<p><strong>2ï¼šäº§å“é—®é¢˜</strong></p>
<p>äº§å“æ‰‹å†Œè™½ç„¶å¼€å§‹æ›´æ–°äº†ï¼Œä½†æ˜¯è¿›åº¦å¥½åƒè¿˜æ˜¯æŒºæ…¢ï¼Œä¸æ˜¯ç¬¬ä¸€ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥å°±æ’åˆ°åé¢å»äº†ï¼Œè¿™ä¸ªæœˆèŠ±æ—¶é—´å»æ•´è‡ªå·±çš„å½•æ’­è§†é¢‘è¯¾ç¨‹å»äº†ï¼Œæƒ³ç€ç›´æ’­çš„æ—¶å€™å–ã€‚</p>
<p>ä¸è¿‡æ¯”ä¸Šä¸ªæœˆå¥½çš„åœ°æ–¹æ˜¯ç»ˆäºå¼€å§‹æŠ½æ—¶é—´åŒæ­¥äº†ï¼Œ12æœˆé€¼è‡ªå·±ä¸€æŠŠï¼Œçœ‹çœ‹å…ƒæ—¦çš„æ—¶å€™å¯ä»¥å®Œæˆã€‚</p>
<h2 data-id="heading-6">å››ã€ä¸‹æœˆè®¡åˆ’</h2>
<p>12æœˆä»½ï¼Œæˆ‘ç½—åˆ—äº†ä¸€ä¸‹é‡è¦çš„è®¡åˆ’ï¼š</p>
<p><strong>1ï¼šæ—©ç¡æ—©èµ·</strong></p>
<p>12æœˆä»½å…ˆå®šä¸€ä¸ªæ—©ç¡æ—©èµ·çš„è®¡åˆ’å§ï¼Œæˆ‘ä¸€ç›´æƒ³æ—©ä¸Šå°±æŠŠè§†é¢‘æ–‡ç« æå®šï¼Œè¿™æ ·ä¸‹åˆå°±å¯ä»¥åšå…¶ä»–çš„äº‹æƒ…ã€‚</p>
<p><strong>2ï¼šä»˜è´¹æ‰‹å†Œä»¥åŠè¯¾ç¨‹æ‰“é€ </strong></p>
<p>ComfyUIæ‰‹å†Œè¿™å—äº‹æƒ…ç»§ç»­æ¨è¿›ï¼Œå¦å¤–è¿˜è¦æ‰“é€ ä¸‹ä¸€äº›åŸºç¡€çš„å½•æ’­è¯¾ç¨‹ï¼Œç„¶åæŒ‚æ©±çª—å–ï¼Œè¿™ä¸ªä¹Ÿæ˜¯è¿‘æœŸä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„äº‹æƒ…ï¼Œ12æœˆæ‰‹å†Œåˆç¨¿è¦æå®šï¼Œå†æ‹–å°±æ²¡æ„æ€äº†ã€‚</p>
<p><strong>3ï¼šè¡¥ç¼ºè¡¥æ¼</strong></p>
<p>ä¸‹ä¸ªæœˆæ‰“ç®—è¡¥ç¼ºè¡¥æ¼ä¸€ä¸‹ï¼Œæœ€è¿‘AIç›¸å…³çš„ä¸œè¥¿å¾ˆå¤šï¼Œæ„Ÿè§‰è‡ªå·±æ¬ ç€å¾ˆå¤šæ²¡åšï¼Œæ¯”å¦‚AIæ™ºèƒ½ä½“ã€AIç¼–ç¨‹ï¼Œè¿™äº›éƒ½ç®—æ˜¯åŸºæœ¬åŠŸï¼Œè¿™æ¬¡12æœˆå°±å½“åšç»™è‡ªå·±å……ç”µäº†ï¼Œåœ¨å®Œæ•´åŸºç¡€çš„å·¥ä½œåï¼ˆç¨¿å­å’Œè§†é¢‘ï¼‰ï¼Œå°±å¼€å§‹åŠªåŠ›å­¦ä¹ å……å……ç”µï¼Œç»™æ˜å¹´æ‰“ä¸‹ä¸€äº›åŸºç¡€ï¼</p>
<h2 data-id="heading-7">äº”ã€æ€»ç»“</h2>
<p>ä¸Šé¢ç®—æ˜¯æˆ‘è¿™ä¸ªæœˆçš„ä¸€äº›é‡è¦äº‹æƒ…çš„æ€»ç»“ï¼Œæˆ‘åˆ†äº«å‡ºæ¥ä¹Ÿæ˜¯ç»™å¤§å®¶å¯ä»¥è¿‘è·ç¦»çœ‹çœ‹ä¸€ä¸ªç¦»èŒçš„ç¨‹åºå‘˜çš„æ—¥å¸¸ï¼Œæœ‰åšçš„ä¸å¥½çš„åœ°æ–¹ä¹Ÿæœ‰åšçš„å¯å–çš„åœ°æ–¹ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸ªæ™®é€šäººï¼Œä¸€ç›´åœ¨å°è¯•å’ŒæŒ£æ‰ï¼Œæˆ‘å†™è¿™ç¯‡æœˆåº¦æ€»ç»“ï¼Œæ˜¯å»ç¿»æˆ‘è¿™ä¸ªæœˆå‘çš„å…¬ä¼—å·æ–‡ç« ï¼Œç„¶åæå–å‡ºæ¥çš„ï¼Œä¸ç„¶æˆ‘æ—©å¿˜è®°äº†ï¼Œä»¥åå¹´åº¦æ€»ç»“ä¹Ÿå¯ä»¥å›çœ‹æœˆåº¦æ€»ç»“ï¼Œä¹Ÿèƒ½æç‚¼ï¼æ‰€ä»¥ï¼Œæˆ‘å†™çš„ä¸œè¥¿åŠ¡å¿…æ˜¯è¦çœŸå®ï¼Œä¸èƒ½è‡ªå·±éª—è‡ªå·±ï¼</p>
<p>æˆ‘æ˜¯å˜Ÿå˜Ÿï¼Œä¸€ä¸ª12å¹´å…¨æ ˆç¨‹åºå‘˜ï¼Œç°åœ¨ç¦»èŒåˆ›ä¸šï¼Œéœ€è¦ä½ çš„ä¸‰è¿~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®°ä½è¿™å¼ æ—¶é—´çº¿å›¾ï¼Œä½ å†ä¹Ÿä¸ä¼šä¹±ç”¨ useEffect / useLayoutEffect]]></title>    <link>https://juejin.cn/post/7582809606067208218</link>    <guid>https://juejin.cn/post/7582809606067208218</guid>    <pubDate>2025-12-12T14:27:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606067208218" data-draft-id="7582815307439079475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®°ä½è¿™å¼ æ—¶é—´çº¿å›¾ï¼Œä½ å†ä¹Ÿä¸ä¼šä¹±ç”¨ useEffect / useLayoutEffect"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-12T14:27:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®°ä½è¿™å¼ æ—¶é—´çº¿å›¾ï¼Œä½ å†ä¹Ÿä¸ä¼šä¹±ç”¨ useEffect / useLayoutEffect
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:27:11.000Z" title="Fri Dec 12 2025 14:27:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">useEffect å’Œ useLayoutEffect çš„åŒºåˆ«ï¼šåˆ«èƒŒå®šä¹‰ï¼ŒæŒ‰â€œä»€ä¹ˆæ—¶å€™ä¸Šå±â€æ¥é€‰</h2>
<p>ä»¥å‰ä¸€ç›´å†™vueï¼Œç°åœ¨å†™reactäº†ï¼Œå†™reactä»£ç çš„æ—¶å€™æœ‰æ—¶å€™ä¼šç¢°åˆ°ä¸€ä¸ªé€‰æ‹©é¢˜ï¼š</p>
<ul>
<li>è¿™ä¸ªå‰¯ä½œç”¨ç”¨ <code>useEffect</code> è¿˜æ˜¯ <code>useLayoutEffect</code>ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæˆ‘ç”¨ <code>useEffect</code> é‡ DOM ä¼šé—ªä¸€ä¸‹ï¼Ÿ</li>
<li>Next.js é‡Œ <code>useLayoutEffect</code> ä¸ºä»€ä¹ˆä¼šç»™æˆ‘ä¸€ä¸ª warningï¼Ÿ</li>
</ul>
<p>è¿™ä¿© Hook çš„å·®åˆ«ï¼Œè¯´ç©¿äº†å°±ä¸€å¥ï¼š<strong>å®ƒä»¬è·‘åœ¨â€œä¸Šå±ï¼ˆpaintï¼‰â€çš„å‰å</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€å¥è¯ç»“è®ºï¼ˆå…ˆæ‹¿èµ°ï¼‰</h3>
<ul>
<li><strong>é»˜è®¤ç”¨ <code>useEffect</code></strong>ï¼šä¸ä¼šæŒ¡ä½æµè§ˆå™¨ç»˜åˆ¶ã€‚</li>
<li><strong>åªæœ‰åœ¨â€œå¿…é¡»è¯»å¸ƒå±€/å†™å¸ƒå±€ä¸”ä¸èƒ½é—ªâ€çš„æ—¶å€™ç”¨ <code>useLayoutEffect</code></strong>ï¼šå®ƒä¼šåœ¨æµè§ˆå™¨ paint ä¹‹å‰åŒæ­¥æ‰§è¡Œã€‚</li>
</ul>
<p>å¦‚æœä½ è„‘å­é‡Œåªç•™ä¸¤å¥è¯ï¼Œå°±ç•™è¿™ä¸¤å¥ã€‚</p>
<hr/>
<h3 data-id="heading-2">å®ƒä»¬åˆ°åº•å·®åœ¨å“ªï¼šåœ¨æµè§ˆå™¨ paint çš„å‰å</h3>
<p>æŠŠ React DOM çš„ä¸€æ¬¡æ›´æ–°ç²—æš´æ‹†æˆå››æ­¥ï¼Œä½ å°±ä¸ä¼šæ··äº†ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
  A[render è®¡ç®— JSX] --&gt; B[commit å†™å…¥ DOM]
  B --&gt; C[useLayoutEffect åŒæ­¥æ‰§è¡Œ]
  C --&gt; D[æµè§ˆå™¨ paint ä¸Šå±]
  D --&gt; E[useEffect æ‰§è¡Œ]

  classDef info fill:#cce5ff,stroke:#0d6efd,color:#004085
  classDef warning fill:#fff3cd,stroke:#ffc107,color:#856404

  class C warning
  class E info
</code></pre>
<ul>
<li><code>useLayoutEffect</code>ï¼š<strong>DOM å·²ç»å˜äº†ï¼Œä½†è¿˜æ²¡ paint</strong>ã€‚å®ƒä¼šé˜»å¡æœ¬æ¬¡ paintã€‚</li>
<li><code>useEffect</code>ï¼š<strong>é¡µé¢å·²ç» paint äº†</strong>ã€‚å®ƒä¸ä¼šé˜»å¡ä¸Šå±ï¼ˆä½†ä¹Ÿæ„å‘³ç€ä½ åœ¨é‡Œé¢æ”¹å¸ƒå±€å¯èƒ½ä¼šâ€œå…ˆé”™åæ”¹â€ï¼Œè‚‰çœ¼çœ‹åˆ°å°±æ˜¯é—ªï¼‰ã€‚</li>
</ul>
<p>æ³¨æ„æˆ‘åœ¨è¯´çš„æ˜¯â€œcommit åâ€çš„é‚£ä¸ªæ—¶é—´ç‚¹ï¼Œä¸æ˜¯ render é˜¶æ®µã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸€ä¸ªå¾ˆçœŸå®çš„ä¾‹å­ï¼šæµ‹é‡ DOM å†³å®šä½ç½®ï¼ˆ<code>useEffect</code> ä¼šé—ªï¼‰</h3>
<p>æ¯”å¦‚ä½ åšä¸€ä¸ª Tooltipï¼šåˆå§‹ä¸çŸ¥é“è‡ªå·±å®½é«˜ï¼Œå¾—å…ˆ render å‡ºæ¥ï¼Œç„¶åç”¨ <code>getBoundingClientRect()</code> é‡ä¸€ä¸‹ï¼Œå†æŠŠä½ç½®ä¿®æ­£ã€‚</p>
<p>å¦‚æœä½ ç”¨ <code>useEffect</code>ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ¬¡ paintï¼šTooltip å…ˆç”¨é»˜è®¤ä½ç½®ä¸Šå±</li>
<li>effect é‡Œé‡å®Œ -&gt; setState</li>
<li>ç¬¬äºŒæ¬¡ paintï¼šä½ç½®ä¿®æ­£</li>
</ul>
<p>ç”¨æˆ·çœ‹åˆ°çš„å°±æ˜¯â€œé—ªä¸€ä¸‹â€ã€‚å¦‚æœä½ ç”¨ <code>useLayoutEffect</code>ï¼Œä¿®æ­£å‘ç”Ÿåœ¨ paint ä¹‹å‰ï¼Œç¬¬ä¸€å¸§å°±æ˜¯å¯¹çš„ã€‚</p>
<p>ä¸‹é¢è¿™æ®µä»£ç å¯ä»¥ç›´æ¥åœ¨ React DOM é‡Œè·‘ï¼ˆä¸ºäº†ä¸è¿å Hooks è§„åˆ™ï¼Œæˆ‘å†™æˆä¸¤ä¸ªç»„ä»¶ï¼Œç”¨ checkbox åˆ‡æ¢æ—¶ä¼š remountï¼‰ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useLayoutEffect, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">TooltipPosition</span> = {
  <span class="hljs-attr">anchorRef</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">RefObject</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span> | <span class="hljs-literal">null</span>&gt;;
  <span class="hljs-attr">tipRef</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">RefObject</span>&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;;
  <span class="hljs-attr">left</span>: <span class="hljs-built_in">number</span>;
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">calcLeft</span>(<span class="hljs-params">anchor: HTMLButtonElement, tip: HTMLDivElement</span>) {
  <span class="hljs-keyword">const</span> a = anchor.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">const</span> t = tip.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(a.<span class="hljs-property">left</span> + a.<span class="hljs-property">width</span> / <span class="hljs-number">2</span> - t.<span class="hljs-property">width</span> / <span class="hljs-number">2</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useTooltipPositionWithEffect</span>(<span class="hljs-params"/>): <span class="hljs-title class_">TooltipPosition</span> {
  <span class="hljs-keyword">const</span> anchorRef = useRef&lt;<span class="hljs-title class_">HTMLButtonElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> tipRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [left, setLeft] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> anchor = anchorRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> tip = tipRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (!anchor || !tip) <span class="hljs-keyword">return</span>;
    <span class="hljs-title function_">setLeft</span>(<span class="hljs-title function_">calcLeft</span>(anchor, tip));
  }, []);

  <span class="hljs-keyword">return</span> { anchorRef, tipRef, left };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useTooltipPositionWithLayoutEffect</span>(<span class="hljs-params"/>): <span class="hljs-title class_">TooltipPosition</span> {
  <span class="hljs-keyword">const</span> anchorRef = useRef&lt;<span class="hljs-title class_">HTMLButtonElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> tipRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [left, setLeft] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-title function_">useLayoutEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> anchor = anchorRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">const</span> tip = tipRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (!anchor || !tip) <span class="hljs-keyword">return</span>;
    <span class="hljs-title function_">setLeft</span>(<span class="hljs-title function_">calcLeft</span>(anchor, tip));
  }, []);

  <span class="hljs-keyword">return</span> { anchorRef, tipRef, left };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">TooltipFrame</span>(<span class="hljs-params">{ pos }: { pos: TooltipPosition }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{pos.anchorRef}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginLeft:</span> <span class="hljs-attr">120</span> }}&gt;</span>
        Hover me
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{pos.tipRef}</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">position:</span> "<span class="hljs-attr">fixed</span>",
          <span class="hljs-attr">top:</span> <span class="hljs-attr">80</span>,
          <span class="hljs-attr">left:</span> <span class="hljs-attr">pos.left</span>,
          <span class="hljs-attr">padding:</span> "<span class="hljs-attr">8px</span> <span class="hljs-attr">10px</span>",
          <span class="hljs-attr">borderRadius:</span> <span class="hljs-attr">8</span>,
          <span class="hljs-attr">background:</span> "#<span class="hljs-attr">111827</span>",
          <span class="hljs-attr">color:</span> "#<span class="hljs-attr">fff</span>",
          <span class="hljs-attr">fontSize:</span> <span class="hljs-attr">12</span>,
          <span class="hljs-attr">whiteSpace:</span> "<span class="hljs-attr">nowrap</span>",
        }}
      &gt;</span>
        I am a tooltip
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DemoUseEffect</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TooltipFrame</span> <span class="hljs-attr">pos</span>=<span class="hljs-string">{useTooltipPositionWithEffect()}</span> /&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DemoUseLayoutEffect</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TooltipFrame</span> <span class="hljs-attr">pos</span>=<span class="hljs-string">{useTooltipPositionWithLayoutEffect()}</span> /&gt;</span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Demo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [layout, setLayout] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">40</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">display:</span> "<span class="hljs-attr">block</span>", <span class="hljs-attr">marginBottom:</span> <span class="hljs-attr">12</span> }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
          <span class="hljs-attr">checked</span>=<span class="hljs-string">{layout}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setLayout(e.target.checked)}
        /&gt;{" "}
        ç”¨ useLayoutEffectï¼ˆå‹¾ä¸Šåæ›´ä¸å®¹æ˜“é—ªï¼‰
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>

      {layout ? <span class="hljs-tag">&lt;<span class="hljs-name">DemoUseLayoutEffect</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">DemoUseEffect</span> /&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>çœŸå®é¡¹ç›®é‡Œä½ å¯èƒ½è¿˜ä¼šå¤„ç† <code>resize</code>ã€å†…å®¹å˜åŒ–ï¼ˆ<code>ResizeObserver</code>ï¼‰ã€å­—ä½“åŠ è½½å¯¼è‡´çš„å®½åº¦å˜åŒ–ç­‰ï¼›ä½†å¯¹ç†è§£è¿™ä¸¤ä¸ª Hook çš„å·®åˆ«ï¼Œä¸Šé¢è¿™ä¸ªä¾‹å­å¤Ÿç”¨äº†ã€‚</p>
<hr/>
<h3 data-id="heading-4">æ€ä¹ˆé€‰ï¼šæˆ‘è‡ªå·±ç”¨çš„â€œå†³ç­–å£è¯€â€</h3>
<h4 data-id="heading-5">1ï¼‰åªè¦ä¸è¯»/å†™å¸ƒå±€ï¼Œå°±ç”¨ <code>useEffect</code></h4>
<p>å…¸å‹åœºæ™¯ï¼š</p>
<ul>
<li>è¯·æ±‚æ•°æ®ã€ä¸ŠæŠ¥åŸ‹ç‚¹</li>
<li>è®¢é˜…/å–æ¶ˆè®¢é˜…ï¼ˆWebSocketã€EventEmitterï¼‰</li>
<li><code>document.title</code>ã€<code>localStorage</code> åŒæ­¥</li>
<li>ç»™ window/document ç»‘äº‹ä»¶</li>
</ul>
<p>è¿™äº›ä¸œè¥¿ä¸éœ€è¦å¡åœ¨ paint ä¹‹å‰å®Œæˆï¼Œ<code>useEffect</code> æ›´åˆé€‚ã€‚</p>
<h4 data-id="heading-6">2ï¼‰ä½ è¦è¯»å¸ƒå±€ï¼ˆlayout readï¼‰å¹¶ä¸”ä¼šå½±å“ç¬¬ä¸€å¸§æ¸²æŸ“ï¼Œå°±ç”¨ <code>useLayoutEffect</code></h4>
<p>å…¸å‹åœºæ™¯ï¼š</p>
<ul>
<li><code>getBoundingClientRect()</code> / <code>offsetWidth</code> / <code>scrollHeight</code> è¿™ç§</li>
<li>è®¡ç®—åˆå§‹æ»šåŠ¨ä½ç½®ã€åŒæ­¥æ»šåŠ¨</li>
<li>éœ€è¦é¿å…è§†è§‰æŠ–åŠ¨çš„â€œæµ‹é‡ -&gt; setStateâ€</li>
<li>focus / selectionï¼ˆè¾“å…¥æ¡†èšç„¦ã€å…‰æ ‡å®šä½ï¼‰å¯¹é¦–å¸§ä½“éªŒæ•æ„Ÿ</li>
</ul>
<p>ä¸€å¥è¯ï¼š<strong>â€œä¸æƒ³è®©ç”¨æˆ·çœ‹åˆ°ä¸­é—´æ€â€</strong>ã€‚</p>
<h4 data-id="heading-7">3ï¼‰åˆ«åœ¨ <code>useLayoutEffect</code> é‡Œå¹²é‡æ´»</h4>
<p>å› ä¸ºå®ƒä¼šé˜»å¡ paintï¼š</p>
<ul>
<li>ä½ åœ¨é‡Œé¢åšé‡è®¡ç®—ï¼Œé¡µé¢å°±æ‰å¸§</li>
<li>ä½ åœ¨é‡Œé¢é¢‘ç¹ setStateï¼Œå¯èƒ½æ”¾å¤§å¡é¡¿</li>
</ul>
<p>å¦‚æœä½ åªæ˜¯â€œæƒ³æ—©ç‚¹è·‘ä¸€ä¸‹â€ï¼Œä½†å¹¶ä¸ä¾èµ–å¸ƒå±€ï¼Œåˆ«ç”¨å®ƒã€‚</p>
<hr/>
<h3 data-id="heading-8">Next.js / SSR é‡Œé‚£ä¸ª warning æ€ä¹ˆå›äº‹</h3>
<p>åœ¨æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æ—¶ï¼š</p>
<ul>
<li><code>useEffect</code> æœ¬æ¥å°±ä¸ä¼šæ‰§è¡Œï¼ˆå®ƒåªåœ¨æµè§ˆå™¨è·‘ï¼‰</li>
<li><code>useLayoutEffect</code> ä¹Ÿä¸ä¼šæ‰§è¡Œï¼Œä½† React ä¼šæç¤ºä½ ï¼šå®ƒåœ¨æœåŠ¡ç«¯æ²¡æ„ä¹‰ï¼Œå¯èƒ½å¯¼è‡´ä½ å†™å‡ºâ€œä¾èµ–å¸ƒå±€ä½† SSR ä¸å­˜åœ¨å¸ƒå±€â€çš„ä»£ç </li>
</ul>
<p>å¦‚æœä½ å†™çš„æ˜¯â€œæµè§ˆå™¨æ‰æœ‰æ„ä¹‰çš„ layout effectâ€ï¼Œåˆä¸æƒ³çœ‹åˆ° warningï¼Œå¸¸è§åšæ³•æ˜¯åŒ…ä¸€å±‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useEffect, useLayoutEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useIsomorphicLayoutEffect =
  <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">"undefined"</span> ? useLayoutEffect : useEffect;
</code></pre>
<p>ç„¶åæŠŠéœ€è¦ layout çš„åœ°æ–¹ç”¨ <code>useIsomorphicLayoutEffect</code>ã€‚</p>
<hr/>
<h3 data-id="heading-9">å®¹æ˜“è¸©çš„å‘ï¼ˆé¡ºæ‰‹è¯´ä¸¤å¥ï¼‰</h3>
<ul>
<li><strong>Strict Mode ä¸‹ effect ä¼šåœ¨å¼€å‘ç¯å¢ƒé¢å¤–æ‰§è¡Œä¸€æ¬¡</strong>ï¼š<code>useEffect</code> å’Œ <code>useLayoutEffect</code> éƒ½ä¸€æ ·ï¼Œåˆ«æ‹¿è¿™ä¸ªç°è±¡åˆ¤æ–­çº¿ä¸Šè¡Œä¸ºã€‚</li>
<li><strong>â€œæˆ‘åœ¨ <code>useEffect</code> é‡Œ setState ä¸ºä»€ä¹ˆä¼šé—ªï¼Ÿâ€</strong>ï¼šå› ä¸ºä½ æ”¹çš„æ˜¯å¸ƒå±€ç›¸å…³å†…å®¹ï¼Œç¬¬ä¸€å¸§å·²ç» paint äº†ã€‚</li>
<li><strong>ä¸è¦æŠŠæ•°æ®è¯·æ±‚å¡è¿› <code>useLayoutEffect</code></strong>ï¼šå®ƒæ—¢ä¸éœ€è¦ paint å‰å®Œæˆï¼Œè¿˜å¯èƒ½æ‹–æ…¢ä¸Šå±ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">ç®€å•æ€»ç»“ä¸€ä¸‹</h3>
<ul>
<li><code>useEffect</code>ï¼šå¤§å¤šæ•°å‰¯ä½œç”¨çš„é»˜è®¤é€‰æ‹©ã€‚</li>
<li><code>useLayoutEffect</code>ï¼šåªåœ¨â€œå¿…é¡»å¡åœ¨ paint å‰è§£å†³â€çš„é‚£ä¸€å°æ’®åœºæ™¯é‡Œç”¨ã€‚</li>
</ul>
<p>çœŸè¦è¯´åŒºåˆ«ï¼Œå…¶å®å°±æ˜¯ä¸€å¥ï¼š<strong>ä½ æ„¿ä¸æ„¿æ„ä¸ºäº†â€œç¬¬ä¸€å¸§æ­£ç¡®â€å»æŒ¡ä½ paint</strong>ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼ŒNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GDAL è¯»å–KMLæ•°æ®]]></title>    <link>https://juejin.cn/post/7582769411994566708</link>    <guid>https://juejin.cn/post/7582769411994566708</guid>    <pubDate>2025-12-12T14:52:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582769411994566708" data-draft-id="7582779306731438115" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GDAL è¯»å–KMLæ•°æ®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-12T14:52:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GDAL è¯»å–KMLæ•°æ®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T14:52:39.000Z" title="Fri Dec 12 2025 14:52:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>â</p>
<p><code>KML</code>æ˜¯ä¸€ç§åŸºäº<code>XML</code>çš„åœ°ç†æ•°æ®æ ¼å¼ï¼Œæœ€åˆæœ‰<code>Keyhole</code>å…¬å¸å¼€å‘ï¼Œåæ¥è¢«<code>Google</code>é‡‡ç”¨å¹¶æˆä¸º<code>OGC</code>æ ‡å‡†ã€‚åœ¨<code>GIS</code>å¼€å‘ä¸­ï¼Œå±äºä¸€ç§é‡è¦çš„æ•°æ®æ ¼å¼ï¼Œä½¿ç”¨<code>GDAL</code>è¯»å–<code>KML</code>æ•°æ®ï¼Œæœ‰åŠ©äºè®¤è¯†ã€äº†è§£<code>KML</code>æ•°æ®ç»“æ„ä¸ç‰¹ç‚¹ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
</blockquote>
<p>æœ¬ç¯‡æ•™ç¨‹åœ¨ä¹‹å‰ä¸€ç³»åˆ—æ–‡ç« çš„åŸºç¡€ä¸Šè®²è§£</p>
<ul>
<li>GDAL ç®€ä»‹[1]</li>
<li>GDAL ä¸‹è½½å®‰è£…[2]</li>
<li>GDAL å¼€å‘èµ·æ­¥[3]</li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡ï¼Œå»ºè®®ä»ä»¥ä¸Šå†…å®¹å¼€å§‹ã€‚</p>
<h2 data-id="heading-1">1. å¼€å‘ç¯å¢ƒ</h2>
<p>æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾›å‚è€ƒã€‚</p>
<p>æ—¶é—´ï¼š<code>2025å¹´</code></p>
<p>ç³»ç»Ÿï¼š<code>Windows 11</code></p>
<p>Pythonï¼š<code>3.11.7</code></p>
<p>GDALï¼š<code>3.11.1</code></p>
<h2 data-id="heading-2">2. å¯¼å…¥ä¾èµ–</h2>
<p><code>KML</code>ä½œä¸ºä¸€ç§çŸ¢é‡æ•°æ®æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨<code>GDAL</code>ç›´æ¥è¯»å–æˆ–è€…ä½¿ç”¨å…¶çŸ¢é‡åº“<code>OGR</code>è¿›è¡Œå¤„ç†ï¼Œä»¥å®ç°<code>KML</code>å›¾å±‚å’Œå±æ€§æ•°æ®è¯»å–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span>Â osgeoÂ <span class="hljs-keyword">import</span>Â ogr,gdal
<span class="hljs-keyword">import</span>Â os
</code></pre>
<h2 data-id="heading-3">3. è¯»å–KMLæ•°æ®</h2>
<p><strong>ï¼ˆä¸€ï¼‰ä½¿ç”¨<code>GDAL</code>è¯»å–</strong></p>
<p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>ReadKMLOfGDAL(kmlPath)</code>ç”¨äºè¯»å–<code>KML</code>æ•°æ®ï¼Œå…¶ä¸­<code>kmlPath</code>ä¸ºæ•°æ®è·¯å¾„ã€‚åœ¨è¯»å–<code>KML</code>æ•°æ®ä¹‹å‰ï¼Œéœ€è¦æ£€æŸ¥æ•°æ®è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-lua" lang="lua">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
<span class="hljs-keyword">if</span>Â <span class="hljs-built_in">os</span>.<span class="hljs-built_in">path</span>.exists(kmlPath):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å­˜åœ¨"</span>)
<span class="hljs-keyword">else</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>è‹¥<code>KML</code>æ•°æ®è·¯å¾„æ­£ç¡®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>OpenEx</code>æ–¹æ³•æ‰“å¼€<code>KML</code>æ–‡ä»¶ã€‚éœ€è¦åˆ¤æ–­<code>KML</code>æ•°æ®é›†æ˜¯å¦æ­£å¸¸ï¼Œè‹¥æ— æ³•æ‰“å¼€ï¼Œåˆ™é€€å‡ºæ•°æ®è¯»å–ç¨‹åºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â æ‰“å¼€KMLæ–‡ä»¶</span>
datasetÂ =Â gdal.OpenEx(kmlPath)
<span class="hljs-keyword">if</span>Â datasetÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"KMLÂ æ–‡ä»¶æ‰“å¼€å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>é€šè¿‡æ•°æ®é›†æ–¹æ³•<code>GetLayerCount</code>å¯ä»¥è·å–å›¾å±‚æ•°é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â è·å–å›¾å±‚æ•°é‡</span>
layerCountÂ =Â dataset.GetLayerCount()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚æ•°é‡ï¼š<span class="hljs-subst">{layerCount}</span>"</span>)
</code></pre>
<p>å›¾å±‚æ•°é‡ä¿¡æ¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba68d25e5e904336a5c576e6babeec7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766155959&amp;x-signature=u6TmSU1a0P2afFiTQZEOyvh1eI4%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åé€šè¿‡éå†å›¾å±‚è·å–å›¾å±‚å­—æ®µæ•°é‡ã€å­—æ®µåç§°ä»¥åŠå­—æ®µç±»å‹ç­‰ä¿¡æ¯ï¼Œåœ¨è¾“å‡ºç»“æœä¸­è¯»å–è¦ç´ å±æ€§ä¿¡æ¯å’Œå‡ ä½•å¯¹è±¡å¹¶é™åˆ¶è¦ç´ è¾“å‡ºæ•°é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â éå†å›¾å±‚</span>
<span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(layerCount):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"################å¼€å§‹æ‰“å°ç¬¬ã€<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªå›¾å±‚################n"</span>)
Â Â Â Â <span class="hljs-comment">#Â æ ¹æ®ç´¢å¼•è·å–ç›®æ ‡å›¾å±‚</span>
Â Â Â Â layerÂ =Â dataset.GetLayerByIndex(i)
Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚åç§°</span>
Â Â Â Â layerNameÂ =Â layer.GetName()
Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚è¦ç´ æ•°é‡</span>
Â Â Â Â layerFeatureCountÂ =Â layer.GetFeatureCount()

Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚åç§°ï¼š<span class="hljs-subst">{layerName}</span>"</span>)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¦ç´ æ•°é‡ï¼š<span class="hljs-subst">{layerFeatureCount}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚å±æ€§</span>
Â Â Â Â layerPropertyÂ =Â layer.GetLayerDefn()
Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚å­—æ®µæ•°é‡</span>
Â Â Â Â fieldCountÂ =Â layerProperty.GetFieldCount()
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­—æ®µæ•°é‡ï¼š<span class="hljs-subst">{fieldCount}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µä¿¡æ¯</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â jÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(fieldCount):
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§å¯¹è±¡</span>
Â Â Â Â Â Â Â Â fieldPropertyÂ =Â layerProperty.GetFieldDefn(j)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§åç§°</span>
Â Â Â Â Â Â Â Â fieldNameÂ =Â fieldProperty.GetName()
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§ç±»å‹</span>
Â Â Â Â Â Â Â Â fieldTypeÂ =Â fieldProperty.GetTypeName()

Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{j}</span>ã€‘Â ä¸ªå­—æ®µåç§°ï¼š<span class="hljs-subst">{fieldName}</span>ï¼Œå­—æ®µç±»å‹ï¼š<span class="hljs-subst">{fieldType}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â è·å–è¦ç´ </span>
Â Â Â Â featureÂ =Â layer.GetNextFeature()
Â Â Â Â limitCountÂ =Â <span class="hljs-number">0</span>

Â Â Â Â <span class="hljs-comment">#Â é™åˆ¶æ‰“å°å‰åä¸ªè¦ç´ </span>
Â Â Â Â <span class="hljs-keyword">while</span>Â featureÂ <span class="hljs-keyword">and</span>Â limitCountÂ &lt;Â <span class="hljs-number">10</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰“å°ç¬¬ã€<span class="hljs-subst">{limitCount+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªè¦ç´ "</span>)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â print(f"æ‰“å°è¦ç´ ç±»å‹ï¼š{type(feature)},{feature}")</span>

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–è¦ç´ å±æ€§</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â kÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(fieldCount):
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å±æ€§å­—æ®µå</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldNameÂ =Â layerProperty.GetFieldDefn(j).GetName()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å±æ€§å­—æ®µå€¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldValueÂ =Â feature.GetField(k)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â fieldValueÂ =Â feature.GetField(fieldName)</span>

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{k}</span>ã€‘Â ä¸ªå­—æ®µåï¼š<span class="hljs-subst">{fieldName}</span>ï¼Œå­—æ®µå€¼ï¼š<span class="hljs-subst">{fieldValue}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â geomÂ =Â feature.GetGeometryRef()
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â geom:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å‡ ä½•ç±»å‹</span>
Â Â Â Â Â Â Â Â Â Â Â Â geomTypeÂ =Â geom.GetGeometryName()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–WKTæ ¼å¼å‡ ä½•å¯¹è±¡ï¼Œæ‰“å°å‰100ä¸ªå­—ç¬¦</span>
Â Â Â Â Â Â Â Â Â Â Â Â geomWKTÂ =Â geom.ExportToWkt()[:<span class="hljs-number">100</span>]

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{limitCount}</span>ã€‘Â ä¸ªå‡ ä½•å¯¹è±¡ç±»å‹ï¼š<span class="hljs-subst">{geomType}</span>ï¼Œå‡ ä½•å¯¹è±¡ï¼š<span class="hljs-subst">{geomWKT}</span>"</span>)

Â Â Â Â Â Â Â Â featureÂ =Â layer.GetNextFeature()
Â Â Â Â Â Â Â Â limitCountÂ +=Â <span class="hljs-number">1</span>

Â Â Â Â <span class="hljs-comment">#Â é‡ç½®è¯»å–ä½ç½®</span>
Â Â Â Â layer.ResetReading()

Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"n################ç»“æŸæ‰“å°ç¬¬ã€<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªå›¾å±‚################n"</span>)
</code></pre>
<p>å›¾å±‚è¦ç´ å±æ€§ä¿¡æ¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e46dba074d04ef0a88e738a3c755547~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766155959&amp;x-signature=eMLItKdm9UTiMXVwwBWorBD08Ao%3D" alt="" loading="lazy"/></p>
<p><strong>ï¼ˆäºŒï¼‰ä½¿ç”¨<code>OGR</code>è¯»å–</strong></p>
<p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>ReadKMLOfOGR(kmlPath)</code>ç”¨äºè¯»å–<code>KML</code>æ•°æ®ï¼Œå…¶ä¸­<code>kmlPath</code>ä¸ºæ•°æ®è·¯å¾„ã€‚åœ¨è¯»å–<code>KML</code>æ•°æ®ä¹‹å‰ï¼Œéœ€è¦æ£€æŸ¥æ•°æ®è·¯å¾„æ˜¯å¦å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-lua" lang="lua">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
<span class="hljs-keyword">if</span>Â <span class="hljs-built_in">os</span>.<span class="hljs-built_in">path</span>.exists(kmlPath):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å­˜åœ¨"</span>)
<span class="hljs-keyword">else</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>è‹¥<code>KML</code>æ•°æ®è·¯å¾„æ­£ç¡®ï¼Œåˆ™å¯ä»¥æ³¨å†Œ<code>KML</code>æ•°æ®é©±åŠ¨ç”¨äºè¯»å–<code>KML</code>æ•°æ®ï¼Œå¦‚ä½¿ç”¨<code>RegisterAll</code>æ–¹æ³•æ³¨å†Œæ‰€æœ‰çŸ¢é‡é©±åŠ¨ã€‚ç„¶åè°ƒç”¨<code>ogr</code>å¯¹è±¡<code>Open</code>æ–¹æ³•æ‰“å¼€<code>KML</code>æ•°æ®æºï¼Œè‹¥å…¶ä¸å­˜åœ¨ï¼Œåˆ™é€€å‡ºæ•°æ®è¯»å–ç¨‹åºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â æ³¨å†Œæ‰€æœ‰é©±åŠ¨</span>
ogr.RegisterAll()

<span class="hljs-comment">#Â æ‰“å¼€KMLæ•°æ®æº</span>
dataSourceÂ =Â ogr.Open(kmlPath)

<span class="hljs-comment">#Â æ£€æŸ¥æ•°æ®æºæ˜¯å¦æ­£å¸¸</span>
<span class="hljs-keyword">if</span>Â dataSourceÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶æ‰“å¼€å‡ºé”™ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â <span class="hljs-keyword">return</span>
</code></pre>
<p>ä¹‹åé€šè¿‡éå†å›¾å±‚è·å–å›¾å±‚ç©ºé—´å‚è€ƒã€å­—æ®µåç§°ä»¥åŠå­—æ®µç±»å‹ç­‰ä¿¡æ¯ï¼Œåœ¨è¾“å‡ºç»“æœä¸­è¯»å–è¦ç´ å±æ€§ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â éå†å›¾å±‚</span>
<span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(dataSource.GetLayerCount()):
Â Â Â Â <span class="hljs-comment">#Â æ ¹æ®ç´¢å¼•è·å–ç›®æ ‡å›¾å±‚</span>
Â Â Â Â layerÂ =Â dataSource.GetLayer(i)
Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚åç§°</span>
Â Â Â Â layerNameÂ =Â layer.GetName()
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬ã€<span class="hljs-subst">{i}</span>ã€‘ä¸ªå›¾å±‚åç§°ï¼š<span class="hljs-subst">{layerName}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â è·å–ç©ºé—´å‚è€ƒ</span>
Â Â Â Â spatialReferenceÂ =Â layer.GetSpatialRef()
Â Â Â Â <span class="hljs-keyword">if</span>Â spatialReference:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç©ºé—´å‚è€ƒï¼š<span class="hljs-subst">{spatialReference.GetName()}</span>"</span>)
Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚ã€<span class="hljs-subst">{layerName}</span>ã€‘ç©ºé—´å‚è€ƒä¸å­˜åœ¨"</span>)

Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â featureÂ <span class="hljs-keyword">in</span>Â layer:
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â geomÂ =Â feature.GetGeometryRef()
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â geom:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å››è‡³èŒƒå›´</span>
Â Â Â Â Â Â Â Â Â Â Â Â envelopeÂ =Â geom.GetEnvelope()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡ ä½•èŒƒå›´ï¼š<span class="hljs-subst">{envelope}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–è¦ç´ å±æ€§</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â fieldÂ <span class="hljs-keyword">in</span>Â feature.keys():
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å±æ€§å­—æ®µå€¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldValueÂ =Â feature.GetField(field)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å±æ€§å­—æ®µåç§°ï¼š<span class="hljs-subst">{field}</span>ï¼Œå±æ€§å­—æ®µå€¼ï¼š<span class="hljs-subst">{fieldValue}</span>"</span>)

<span class="hljs-comment">#Â å…³é—­æ•°æ®æº</span>
dataSourceÂ =Â <span class="hljs-literal">None</span>Â Â Â Â Â Â Â Â 
</code></pre>
<p>å›¾å±‚è¦ç´ å±æ€§ä¿¡æ¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f4d1e4d484d4006ae43aa4db5c47888~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766155959&amp;x-signature=dJqwUN8Tj2aqHvr5plMx1JWlUNw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">4. æ³¨æ„äº‹é¡¹</h2>
<p><strong>æ³¨1ï¼šæ•°æ®è·¯å¾„è¯»å–å¼‚å¸¸</strong></p>
<p>åœ¨windowsç³»ç»Ÿä¸­å»ºè®®ä½¿ç”¨"<strong>\</strong>"å®šä¹‰æ•°æ®è·¯å¾„ã€‚</p>
<p><strong>æ³¨2ï¼šä¸­æ–‡æ•°æ®è¯»å–å¼‚å¸¸ï¼ˆä¸­æ–‡ä¹±ç ï¼‰</strong></p>
<p>åœ¨<code>GIS</code>å¼€å‘ä¸­ï¼Œæ¶‰åŠå±æ€§æ•°æ®è¯»å–æ—¶ç»å¸¸ä¼šé‡åˆ°ä¸­æ–‡ä¹±ç é—®é¢˜ï¼Œéœ€è¦æ ¹æ®å›¾å±‚ç¼–ç è®¾ç½®æ­£ç¡®çš„å­—ç¬¦é›†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â è®¾ç½®Shapefileçš„ç¼–ç ä¸ºGBK</span>
os.environ[<span class="hljs-string">'SHAPE_ENCODING'</span>]Â =Â <span class="hljs-string">"GBK"</span>
</code></pre>
<p><strong>æ³¨3ï¼šä»£ç è¿è¡Œå¼‚å¸¸</strong></p>
<p>éœ€è¦å¼€å¯ä»£ç å¼‚å¸¸å¤„ç†</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â å¯ç”¨å¼‚å¸¸å¤„ç†ï¼ˆæ¨èï¼‰</span>
ogr.UseExceptions()
</code></pre>
<p><strong>æ³¨4ï¼šåæ ‡è¯»å–å¼‚å¸¸</strong></p>
<p>åœ¨è¯»å–åæ ‡å‚è€ƒæ—¶æŠ¥é”™å·²å®‰è£…PostgreSQLæ•°æ®åº“ä¸­çš„æŠ•å½±æ–‡ä»¶ç‰ˆæœ¬ä¸GDALä¸­çš„æŠ•å½±æ–‡ä»¶ä¸å…¼å®¹ï¼Œæ­¤æ—¶éœ€è¦ä¸ºGDALå•ç‹¬æŒ‡å®šæŠ•å½±æ–‡ä»¶ï¼Œåœ¨ä»£ç å¼€å¤´æ·»åŠ ä»¥ä¸‹ä»£ç æŒ‡å®šç›®æ ‡æŠ•å½±æ–‡ä»¶è·¯å¾„ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â æ‰¾åˆ°projæ–‡ä»¶è·¯å¾„</span>
os.environ[<span class="hljs-string">'PROJ_LIB'</span>]Â =Â <span class="hljs-string">r'D:\Programs\Python\Python311\Lib\site-packages\osgeo\data\proj'</span>
</code></pre>
<h2 data-id="heading-5">5. å®Œæ•´ä»£ç </h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span>Â osgeoÂ <span class="hljs-keyword">import</span>Â ogr,gdal
<span class="hljs-keyword">import</span>Â os

<span class="hljs-comment">#Â å¦‚æœæ˜¯é€šè¿‡Â pipÂ å®‰è£…çš„ï¼Œå¯èƒ½éœ€è¦æ‰¾åˆ°å¯¹åº”ä½ç½®</span>
os.environ[<span class="hljs-string">'PROJ_LIB'</span>]Â =Â <span class="hljs-string">r'D:ProgramsPythonPython311Libsite-packagesosgeodataproj'</span>

<span class="hljs-comment">#Â è®¾ç½®Shapefileçš„ç¼–ç ä¸ºGBK</span>
os.environ[<span class="hljs-string">'SHAPE_ENCODING'</span>]Â =Â <span class="hljs-string">"GBK"</span>

<span class="hljs-comment">#Â å¯ç”¨å¼‚å¸¸å¤„ç†ï¼ˆæ¨èï¼‰</span>
ogr.UseExceptions()

<span class="hljs-comment">#Â æ³¨å†Œæ‰€æœ‰é©±åŠ¨</span>
ogr.RegisterAll()

<span class="hljs-string">"""
ä½¿ç”¨GDALè¯»å–KMLæ•°æ®
"""</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">ReadKMLOfGDAL</span>(<span class="hljs-params">kmlPath</span>):

Â Â Â Â <span class="hljs-comment">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â os.path.exists(kmlPath):
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å­˜åœ¨"</span>)
Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>

Â Â Â Â <span class="hljs-comment">#Â æ‰“å¼€KMLæ–‡ä»¶</span>
Â Â Â Â datasetÂ =Â gdal.OpenEx(kmlPath)
Â Â Â Â <span class="hljs-keyword">if</span>Â datasetÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"KMLÂ æ–‡ä»¶æ‰“å¼€å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶è·¯å¾„ï¼"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>

Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚æ•°é‡</span>
Â Â Â Â layerCountÂ =Â dataset.GetLayerCount()
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚æ•°é‡ï¼š<span class="hljs-subst">{layerCount}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â éå†å›¾å±‚</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(layerCount):
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"################å¼€å§‹æ‰“å°ç¬¬ã€<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªå›¾å±‚################n"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ ¹æ®ç´¢å¼•è·å–ç›®æ ‡å›¾å±‚</span>
Â Â Â Â Â Â Â Â layerÂ =Â dataset.GetLayerByIndex(i)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚åç§°</span>
Â Â Â Â Â Â Â Â layerNameÂ =Â layer.GetName()
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚è¦ç´ æ•°é‡</span>
Â Â Â Â Â Â Â Â layerFeatureCountÂ =Â layer.GetFeatureCount()

Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚åç§°ï¼š<span class="hljs-subst">{layerName}</span>"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¦ç´ æ•°é‡ï¼š<span class="hljs-subst">{layerFeatureCount}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚å±æ€§</span>
Â Â Â Â Â Â Â Â layerPropertyÂ =Â layer.GetLayerDefn()
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚å­—æ®µæ•°é‡</span>
Â Â Â Â Â Â Â Â fieldCountÂ =Â layerProperty.GetFieldCount()
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­—æ®µæ•°é‡ï¼š<span class="hljs-subst">{fieldCount}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µä¿¡æ¯</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â jÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(fieldCount):
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§å¯¹è±¡</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldPropertyÂ =Â layerProperty.GetFieldDefn(j)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§åç§°</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldNameÂ =Â fieldProperty.GetName()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å­—æ®µå±æ€§ç±»å‹</span>
Â Â Â Â Â Â Â Â Â Â Â Â fieldTypeÂ =Â fieldProperty.GetTypeName()

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{j}</span>ã€‘Â ä¸ªå­—æ®µåç§°ï¼š<span class="hljs-subst">{fieldName}</span>ï¼Œå­—æ®µç±»å‹ï¼š<span class="hljs-subst">{fieldType}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–è¦ç´ </span>
Â Â Â Â Â Â Â Â featureÂ =Â layer.GetNextFeature()
Â Â Â Â Â Â Â Â limitCountÂ =Â <span class="hljs-number">0</span>

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â é™åˆ¶æ‰“å°å‰åä¸ªè¦ç´ </span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">while</span>Â featureÂ <span class="hljs-keyword">and</span>Â limitCountÂ &lt;Â <span class="hljs-number">10</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰“å°ç¬¬ã€<span class="hljs-subst">{limitCount+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªè¦ç´ "</span>)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â print(f"æ‰“å°è¦ç´ ç±»å‹ï¼š{type(feature)},{feature}")</span>

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–è¦ç´ å±æ€§</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â kÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(fieldCount):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å±æ€§å­—æ®µå</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fieldNameÂ =Â layerProperty.GetFieldDefn(j).GetName()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å±æ€§å­—æ®µå€¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fieldValueÂ =Â feature.GetField(k)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â fieldValueÂ =Â feature.GetField(fieldName)</span>

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{k}</span>ã€‘Â ä¸ªå­—æ®µåï¼š<span class="hljs-subst">{fieldName}</span>ï¼Œå­—æ®µå€¼ï¼š<span class="hljs-subst">{fieldValue}</span>"</span>)

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â Â Â Â Â geomÂ =Â feature.GetGeometryRef()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â geom:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å‡ ä½•ç±»å‹</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â geomTypeÂ =Â geom.GetGeometryName()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–WKTæ ¼å¼å‡ ä½•å¯¹è±¡ï¼Œæ‰“å°å‰100ä¸ªå­—ç¬¦</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â geomWKTÂ =Â geom.ExportToWkt()[:<span class="hljs-number">100</span>]

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬Â ã€<span class="hljs-subst">{limitCount}</span>ã€‘Â ä¸ªå‡ ä½•å¯¹è±¡ç±»å‹ï¼š<span class="hljs-subst">{geomType}</span>ï¼Œå‡ ä½•å¯¹è±¡ï¼š<span class="hljs-subst">{geomWKT}</span>"</span>)

Â Â Â Â Â Â Â Â Â Â Â Â featureÂ =Â layer.GetNextFeature()
Â Â Â Â Â Â Â Â Â Â Â Â limitCountÂ +=Â <span class="hljs-number">1</span>

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â é‡ç½®è¯»å–ä½ç½®</span>
Â Â Â Â Â Â Â Â layer.ResetReading()

Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"n################ç»“æŸæ‰“å°ç¬¬ã€<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>ã€‘ä¸ªå›¾å±‚################n"</span>)

<span class="hljs-string">"""
ä½¿ç”¨OGRè¯»å–KMLæ•°æ®
"""</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">ReadKMLOfOGR</span>(<span class="hljs-params">kmlPath</span>):

Â Â Â Â <span class="hljs-comment">#Â æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â os.path.exists(kmlPath):
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶å­˜åœ¨"</span>)
Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>
Â Â Â Â <span class="hljs-comment">#Â æ³¨å†Œæ‰€æœ‰é©±åŠ¨</span>
Â Â Â Â ogr.RegisterAll()

Â Â Â Â <span class="hljs-comment">#Â æ‰“å¼€KMLæ•°æ®æº</span>
Â Â Â Â dataSourceÂ =Â ogr.Open(kmlPath)

Â Â Â Â <span class="hljs-comment">#Â æ£€æŸ¥æ•°æ®æºæ˜¯å¦æ­£å¸¸</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â dataSourceÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶æ‰“å¼€å‡ºé”™ï¼Œè¯·é‡æ–°é€‰æ‹©æ–‡ä»¶ï¼"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>

Â Â Â Â <span class="hljs-comment">#Â éå†å›¾å±‚</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(dataSource.GetLayerCount()):
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ ¹æ®ç´¢å¼•è·å–ç›®æ ‡å›¾å±‚</span>
Â Â Â Â Â Â Â Â layerÂ =Â dataSource.GetLayer(i)
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å›¾å±‚åç§°</span>
Â Â Â Â Â Â Â Â layerNameÂ =Â layer.GetName()
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬ã€<span class="hljs-subst">{i}</span>ã€‘ä¸ªå›¾å±‚åç§°ï¼š<span class="hljs-subst">{layerName}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–ç©ºé—´å‚è€ƒ</span>
Â Â Â Â Â Â Â Â spatialReferenceÂ =Â layer.GetSpatialRef()
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â spatialReference:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç©ºé—´å‚è€ƒï¼š<span class="hljs-subst">{spatialReference.GetName()}</span>"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å›¾å±‚ã€<span class="hljs-subst">{layerName}</span>ã€‘ç©ºé—´å‚è€ƒä¸å­˜åœ¨"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â featureÂ <span class="hljs-keyword">in</span>Â layer:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–å‡ ä½•å±æ€§</span>
Â Â Â Â Â Â Â Â Â Â Â Â geomÂ =Â feature.GetGeometryRef()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â geom:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å››è‡³èŒƒå›´</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â envelopeÂ =Â geom.GetEnvelope()
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡ ä½•èŒƒå›´ï¼š<span class="hljs-subst">{envelope}</span>"</span>)

Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è¯»å–è¦ç´ å±æ€§</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â fieldÂ <span class="hljs-keyword">in</span>Â feature.keys():
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–å±æ€§å­—æ®µå€¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â fieldValueÂ =Â feature.GetField(field)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å±æ€§å­—æ®µåç§°ï¼š<span class="hljs-subst">{field}</span>ï¼Œå±æ€§å­—æ®µå€¼ï¼š<span class="hljs-subst">{fieldValue}</span>"</span>)

Â Â Â Â <span class="hljs-comment">#Â å…³é—­æ•°æ®æº</span>
Â Â Â Â dataSourceÂ =Â <span class="hljs-literal">None</span>Â Â Â Â Â Â Â Â 

<span class="hljs-keyword">if</span>Â __name__Â ==Â <span class="hljs-string">"__main__"</span>:

Â Â Â Â <span class="hljs-comment">#Â æ•°æ®è·¯å¾„</span>
Â Â Â Â kmlPathÂ =Â <span class="hljs-string">"E:\data\test_data\å››å§‘å¨˜å±±ä¸‰å³°.kml"</span>

Â Â Â Â <span class="hljs-comment">#Â GDALè¯»å–KMLæ•°æ®</span>
Â Â Â Â ReadKMLOfGDAL(kmlPath)

Â Â Â Â <span class="hljs-comment">#Â OGRè¯»å–KMLæ•°æ®</span>
Â Â Â Â ReadKMLOfOGR(kmlPath)
</code></pre>
<h2 data-id="heading-6">6. KMLç¤ºä¾‹æ•°æ®</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xmlÂ version=<span class="hljs-string">"1.0"</span>Â encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">kml</span>Â <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.opengis.net/kml/2.2"</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Document</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>TrackÂ ç™»é¡¶å››å§‘å¨˜å±±ä¸‰å³°Â :wikiloc.com<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">visibility</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">visibility</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LookAt</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">longitude</span>&gt;</span>102.8793075<span class="hljs-tag">&lt;/<span class="hljs-name">longitude</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">latitude</span>&gt;</span>31.0426283<span class="hljs-tag">&lt;/<span class="hljs-name">latitude</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">altitude</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">altitude</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">heading</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">heading</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">tilt</span>&gt;</span>66<span class="hljs-tag">&lt;/<span class="hljs-name">tilt</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">range</span>&gt;</span>15000<span class="hljs-tag">&lt;/<span class="hljs-name">range</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LookAt</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">StyleMap</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"m1367020"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Pair</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>normal<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">styleUrl</span>&gt;</span>#n1367020<span class="hljs-tag">&lt;/<span class="hljs-name">styleUrl</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Pair</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Pair</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>highlight<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">styleUrl</span>&gt;</span>#h1367020<span class="hljs-tag">&lt;/<span class="hljs-name">styleUrl</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Pair</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">StyleMap</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"h1367020"</span>&gt;</span><span class="xml">
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">href</span>&gt;</span>http://s1.wklcdn.com/wikiloc/images/pictograms/ge/1.png<span class="hljs-tag">&lt;/<span class="hljs-name">href</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>$[description]<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"lineStyle"</span>&gt;</span><span class="xml">
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LineStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>f03399ff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">width</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">width</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LineStyle</span>&gt;</span>
Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"n1367020"</span>&gt;</span><span class="xml">
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LabelStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">scale</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">scale</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LabelStyle</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>$[description]<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">href</span>&gt;</span>http://s1.wklcdn.com/wikiloc/images/pictograms/ge/1.png<span class="hljs-tag">&lt;/<span class="hljs-name">href</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"waypointStyle"</span>&gt;</span><span class="xml">
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">href</span>&gt;</span>http://sc.wklcdn.com/wikiloc/images/pictograms/ge/wpt.png<span class="hljs-tag">&lt;/<span class="hljs-name">href</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>$[description]<span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">BalloonStyle</span>&gt;</span>
Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Folder</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Trails<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">visibility</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">visibility</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Folder</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>ç™»é¡¶å››å§‘å¨˜å±±ä¸‰å³°<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">visibility</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">visibility</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Placemark</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Path<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">visibility</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">visibility</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LookAt</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">longitude</span>&gt;</span>102.8862617<span class="hljs-tag">&lt;/<span class="hljs-name">longitude</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">latitude</span>&gt;</span>31.052715<span class="hljs-tag">&lt;/<span class="hljs-name">latitude</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">altitude</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">altitude</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">heading</span>&gt;</span>0<span class="hljs-tag">&lt;/<span class="hljs-name">heading</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">tilt</span>&gt;</span>0.00779126500014642<span class="hljs-tag">&lt;/<span class="hljs-name">tilt</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">range</span>&gt;</span>5250.96911517065<span class="hljs-tag">&lt;/<span class="hljs-name">range</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LookAt</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Style</span>&gt;</span><span class="xml">
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>ffffffff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">scale</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">scale</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">href</span>/&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Icon</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">IconStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LabelStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>ffffffff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">scale</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">scale</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LabelStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LineStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>f00000ff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">width</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">width</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LineStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">PolyStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">color</span>&gt;</span>ffffffff<span class="hljs-tag">&lt;/<span class="hljs-name">color</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">fill</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">fill</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">outline</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">outline</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">PolyStyle</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">Style</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">LineString</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">altitudeMode</span>&gt;</span>clampToGround<span class="hljs-tag">&lt;/<span class="hljs-name">altitudeMode</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">coordinates</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8527267,31.0061667,3255.400146
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8530967,31.00604,3254.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8537967,31.0060883,3256.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8547817,31.0064133,3270.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8558183,31.0071067,3271.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8575333,31.00785,3271.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8588867,31.0093867,3278.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8599,31.0099067,3281.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8605217,31.01093,3289.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8613217,31.0128967,3298.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.863045,31.014905,3307.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8638983,31.016515,3313.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8639067,31.01642,3306.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86423,31.0168667,3317.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8645867,31.017765,3330.000244
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8655283,31.0190083,3314.100342
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86643,31.0211683,3324.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8665367,31.0217183,3321.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86754,31.0228467,3328.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8682333,31.023345,3331.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.868495,31.02422,3338.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86873,31.0245367,3336.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8697533,31.0251667,3343.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.870035,31.0256033,3345.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.86997,31.02594,3350.099854
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.870195,31.0265117,3357.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8706917,31.0273617,3360.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8717183,31.0284717,3374
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8735067,31.0298317,3377.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8744233,31.0310767,3382.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8748283,31.0321567,3378.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8747833,31.0328433,3391.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8756183,31.0336933,3406.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.875455,31.034915,3408
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8754967,31.0361467,3406.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8759333,31.037405,3412
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8763117,31.0379283,3415.999756
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.87597,31.0385567,3416.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8757067,31.0415767,3399.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.87552,31.0419067,3415.999756
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8758433,31.0423217,3424.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8762517,31.0425117,3439.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8762617,31.04284,3444
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8764567,31.0430117,3450.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8766917,31.0436783,3461.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8771717,31.0439417,3481.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.876935,31.04407,3486.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8771133,31.04414,3494.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8772133,31.0444317,3502.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8782383,31.0450583,3541.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.878835,31.045955,3559.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8790667,31.0470883,3574.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8792533,31.0472867,3574.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8790733,31.04746,3574.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8791133,31.0475933,3575.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.879595,31.0479917,3586
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8803283,31.0490267,3626.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8804683,31.0489483,3627.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.880595,31.049135,3626.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8807983,31.0491317,3629.199951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8807333,31.0493933,3629.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88088,31.04944,3629.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.880855,31.049585,3628.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8811167,31.0496783,3629
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8812417,31.049575,3629.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8814083,31.049755,3632.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.881335,31.0500367,3634.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8811333,31.0499417,3638.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88138,31.05021,3638.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8812683,31.0501417,3639
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8813417,31.0499933,3637.499756
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8813383,31.0501217,3642.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8822067,31.050155,3652.599854
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8823317,31.050305,3655.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8827433,31.0501883,3663.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.882945,31.0503983,3691
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8835383,31.0504067,3708.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.883635,31.0504717,3713.199707
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88357,31.0509167,3720.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8834217,31.0509483,3723.000244
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8837983,31.0511317,3728.600342
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8841217,31.0509617,3733
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8840783,31.0516483,3760.400146
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8844567,31.0517517,3780.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8844183,31.0518767,3795.699951
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.884775,31.0518117,3818.499756
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8848583,31.0522,3863
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.885575,31.051965,3896.800049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88583,31.05217,3908.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.885545,31.0519417,3948.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.88575,31.0519467,3951.500244
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8857867,31.0521417,3960.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8861367,31.0522567,3973.300293
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8862617,31.052715,3985.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8865033,31.0528033,3996.699707
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8865233,31.0531233,4007.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.886855,31.053565,4025.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8878733,31.0542133,4081.300049
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.888465,31.0543383,4096.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8887633,31.05476,4105.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8889883,31.0546883,4115.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8891233,31.0549117,4131
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8893483,31.0548067,4143.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8900367,31.055275,4164.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8902983,31.0563283,4190.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8902633,31.0578033,4191.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.890535,31.05789,4203.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89051,31.058235,4225.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8909267,31.0584983,4262.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8911817,31.05891,4273.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8913883,31.05877,4285
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8913233,31.0584617,4289.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89199,31.0583817,4299
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8919,31.058545,4308.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8920433,31.05873,4319.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8924917,31.05891,4352
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8927133,31.0588033,4365.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8930267,31.059215,4373.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89327,31.0590433,4388.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8934967,31.0592717,4391.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8934583,31.0594417,4395.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8937567,31.0595283,4406.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8940683,31.0601267,4421
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943233,31.06027,4429.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943667,31.0605067,4435.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8941,31.0606483,4444
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89444,31.0607917,4452.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89331,31.0618433,4485.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.893345,31.061985,4489.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8938833,31.0621483,4498.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8937483,31.0619783,4499
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89363,31.0620033,4499.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8937967,31.062175,4499.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943467,31.0621867,4503.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943433,31.062095,4504.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8943767,31.0622417,4504.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8948533,31.062295,4503.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8957933,31.0629667,4506.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8959517,31.0628633,4506.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.89649,31.0635683,4509.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8966483,31.063565,4509.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8967717,31.0639033,4511.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8974033,31.0641033,4518.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8982783,31.0652517,4530.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8985533,31.0661067,4556.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.899115,31.0666583,4589.600098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8990783,31.0670983,4620.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8994317,31.0674483,4636
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.8997217,31.068335,4650.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9004533,31.0686783,4657.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.90056,31.0690317,4672.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9008217,31.069215,4664.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9005883,31.0696883,4677.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9007033,31.0700017,4692.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9013133,31.070325,4701.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9020567,31.0710117,4716.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.902175,31.0713983,4738.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9026167,31.0719533,4748
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.903125,31.0721467,4758.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9036383,31.0726467,4757.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9035233,31.072715,4757.399902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9036517,31.0728533,4759.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9047917,31.0735717,4823.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.905155,31.07431,4862.299805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9062583,31.0745867,4891.799805
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9065483,31.07534,4962.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.906415,31.075375,4966
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.906495,31.0755583,4993.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9062583,31.0755983,4994.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9066633,31.0755817,4990.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9064633,31.0757367,5003.000488
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9069417,31.0759117,5031.500488
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9069833,31.0760817,5034.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9068167,31.076175,5040.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9069583,31.0762483,5041.700195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9070367,31.0766883,5058.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.906675,31.0769033,5078.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.906895,31.0768783,5081.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.90672,31.0772267,5096.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9071467,31.0774933,5137.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9072017,31.07771,5142.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.90558,31.0791683,5322.200195
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.905505,31.0793567,5341.899902
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.905815,31.0797233,5358.100098
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9054383,31.07938,5345.500488
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.9055167,31.07932,5349.5
Â Â Â Â Â Â Â Â Â Â Â Â Â Â 102.90543,31.0794,5349.100098
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">coordinates</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">LineString</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Placemark</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Folder</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Folder</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">Document</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">kml</span>&gt;</span>
</code></pre>
<blockquote>
<p>â</p>
<p>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·å›å¤å…³é”®å­—ï¼š<strong>olæ•°æ®</strong></p>
<p>å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·å›å¤å…³é”®å­—ï¼š<strong>GISè€ƒè¯•</strong></p>
</blockquote>
<blockquote>
<p>â</p>
<p><strong>ã€GISä¹‹è·¯ã€‘</strong> å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½</strong>åŠ©æ‰‹ï¼Œæ¬¢è¿å…³æ³¨ï¼Œæ¬¢è¿æé—®ã€‚</p>
<p>æ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢ç½‘ç«™-<strong>é•¿è°ˆGIS</strong>ï¼š<code>http://shanhaitalk.com</code></p>
</blockquote>
<p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¸è¦å¿˜è®°<strong>ç‚¹èµã€æ”¶è—</strong> <strong>+</strong> <strong>å…³æ³¨</strong> å“¦ <strong>ï¼</strong></p>
<p>æœ¬å·ä¸å®šæ—¶æ›´æ–°æœ‰å…³Â <strong>GISå¼€å‘</strong> ç›¸å…³å†…å®¹ï¼Œ<strong>æ¬¢è¿å…³æ³¨Â !</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[6 ä¸ªæœ€ä½³å¼€æº AI ä»ªè¡¨ç›˜å·¥å…·]]></title>    <link>https://juejin.cn/post/7582808491607162934</link>    <guid>https://juejin.cn/post/7582808491607162934</guid>    <pubDate>2025-12-12T13:21:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582808491607162934" data-draft-id="7582637280218841142" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="6 ä¸ªæœ€ä½³å¼€æº AI ä»ªè¡¨ç›˜å·¥å…·"/> <meta itemprop="keywords" content="å¼€æº,ä½ä»£ç ,æ•°æ®å¯è§†åŒ–"/> <meta itemprop="datePublished" content="2025-12-12T13:21:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="NocoBase"/> <meta itemprop="url" content="https://juejin.cn/user/180779873743566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            6 ä¸ªæœ€ä½³å¼€æº AI ä»ªè¡¨ç›˜å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180779873743566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    NocoBase
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T13:21:28.000Z" title="Fri Dec 12 2025 13:21:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2F6-best-open-source-ai-tools-to-build-dashboards" target="_blank" title="https://www.nocobase.com/cn/blog/6-best-open-source-ai-tools-to-build-dashboards" ref="nofollow noopener noreferrer">www.nocobase.com/cn/blog/6-bâ€¦</a></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>å»å¹´æˆ‘ä»¬å†™è¿‡ä¸€ç¯‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fcore-app-dashboard-building-tools" target="_blank" title="https://www.nocobase.com/cn/blog/core-app-dashboard-building-tools" ref="nofollow noopener noreferrer">æ ¸å¿ƒåº”ç”¨ä»ªè¡¨ç›˜å·¥å…·ç›˜ç‚¹ï¼Œ</a>èŠåˆ°ä¸å°‘å›¢é˜Ÿåœ¨åšæ•°æ®å¯è§†åŒ–æ—¶é‡åˆ°çš„ä¸€äº›å…±æ€§é—®é¢˜ã€‚å½“æ—¶æˆ‘ä»¬æåˆ°çš„ï¼Œå¤§å¤šæ˜¯å·²ç»æ¯”è¾ƒæˆç†Ÿçš„å•†ä¸šåŒ–äº§å“ï¼Œä½“éªŒä¸é”™ï¼Œä½†åœ¨æˆæƒæ–¹å¼ã€éƒ¨ç½²æ¨¡å¼å’Œæ‰©å±•èƒ½åŠ›ä¸Šï¼Œéƒ½æœ‰ç›¸å¯¹å›ºå®šçš„è¾¹ç•Œã€‚åæ¥å’Œä¸€äº›è¯»è€…äº¤æµæ—¶ä¹Ÿå‘ç°ï¼Œå¾ˆå¤šå›¢é˜Ÿå…¶å®æ›´å¸Œæœ›æ‰¾åˆ°ä¸€ç§æˆæœ¬æ›´ä½ã€å¯å®šåˆ¶åº¦æ›´é«˜ã€è¿˜èƒ½æ”¯æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2F7-self-hosted-ai-tools-build-business-app" target="_blank" title="https://www.nocobase.com/cn/blog/7-self-hosted-ai-tools-build-business-app" ref="nofollow noopener noreferrer">è‡ªæ‰˜ç®¡</a>çš„å¼€æºæ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b0a0c04106a4823b8a8c51d40b4984c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=ea0wMJJPutg5LQDjNzfUzswGPvQ%3D" alt="dashboards.PNG" loading="lazy"/></p>
<p>ğŸ’¡æ¨èé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fa-developers-technical-decision-guide-to-no-code-and-low-code" target="_blank" title="https://www.nocobase.com/cn/blog/a-developers-technical-decision-guide-to-no-code-and-low-code" ref="nofollow noopener noreferrer">ç»™å¼€å‘è€…çš„æ— ä»£ç /ä½ä»£ç æŠ€æœ¯å†³ç­–æŒ‡å—ï¼ˆ2026ï¼‰</a></p>
<p>è¿™ä¸€å¹´é‡Œï¼Œå¼€æºç¤¾åŒºé‡Œçš„ç›¸å…³å·¥å…·å‘å±•å¾—éå¸¸å¿«ã€‚è¶Šæ¥è¶Šå¤šçš„ä»ªè¡¨ç›˜å’Œæ•°æ®çœ‹æ¿å·¥å…·å¼€å§‹æŠŠ AI èå…¥åŸºç¡€èƒ½åŠ›ï¼Œæ¯”å¦‚è‡ªç„¶è¯­è¨€æŸ¥è¯¢ã€è‡ªåŠ¨ç”Ÿæˆå›¾è¡¨ã€æŒ‡æ ‡è§£é‡Šï¼Œä»¥åŠåŸºäºè¯­ä¹‰çš„æŠ¥è¡¨æ„å»ºç­‰ç­‰ã€‚å¾ˆå¤šå›¢é˜Ÿåœ¨æ­å»ºä»ªè¡¨ç›˜æ—¶ï¼Œä¹Ÿæ›´å¸Œæœ›è®©å·¥å…·å¤šæ‰¿æ‹…ä¸€äº›æ“ä½œå±‚é¢çš„å·¥ä½œï¼ŒæŠŠæœ‰é™çš„æ—¶é—´ç•™ç»™çœŸæ­£éœ€è¦ä¸šåŠ¡åˆ¤æ–­çš„éƒ¨åˆ†ã€‚</p>
<p>åŸºäºè¿™æ ·çš„èƒŒæ™¯ï¼Œæˆ‘ä»¬é‡æ–°æ•´ç†äº†ä¸€æ‰¹ç¤¾åŒºé‡Œæ´»è·ƒåº¦è¾ƒé«˜ã€å¹¶ä¸”å·²ç»å¼•å…¥ AI èƒ½åŠ›çš„å¼€æºæ ¸å¿ƒåº”ç”¨ä»ªè¡¨ç›˜é¡¹ç›®ã€‚è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä¸»è¦ä»ä¸‰ä¸ªç»´åº¦æ¥ä»‹ç»å®ƒä»¬ï¼šå„è‡ªçš„æ ¸å¿ƒå®šä½ã€å…¸å‹ç”¨æ³•ï¼Œä»¥åŠ AI èƒ½åŠ›çš„æˆç†Ÿåº¦å’Œè¦†ç›–èŒƒå›´ã€‚å¸Œæœ›è¿™äº›ä¿¡æ¯èƒ½å¸®åŠ©ä½ æ›´å¿«åˆ¤æ–­å“ªä¸ªå¼€æºå·¥å…·é€‚åˆä½ çš„æ­å»ºéœ€æ±‚ã€‚</p>
<p>ä½ å¯ä»¥å…ˆå¿«é€Ÿæµè§ˆä¸€ä¸‹æœ¬æ–‡ä¼šæåŠ6ä¸ªå·¥å…·ï¼</p>















































<table><thead><tr><th>å·¥å…·åç§°</th><th>å¹³å°ç±»å‹</th><th>AI èƒ½åŠ›æˆç†Ÿåº¦</th><th>AI èƒ½åŠ›æ–¹å¼</th></tr></thead><tbody><tr><td>NocoBase</td><td>å¼€æº AI æ— ä»£ç å¼€å‘å¹³å°ï¼Œå¯æ„å»ºä¸šåŠ¡ç³»ç»Ÿä¸å¯è§†åŒ–çœ‹æ¿</td><td>â˜…â˜…â˜…â˜…â˜†</td><td>åŸç”Ÿ AI å‘˜å·¥ä½“ç³»ï¼ˆå»ºæ¨¡ã€å¡«æ•°ã€å¯è§†åŒ–åˆ†æï¼Œå¯æ‰©å±•è‡ªå®šä¹‰å‘˜å·¥ï¼‰</td></tr><tr><td>Wren AI</td><td>å¼€æºç”Ÿæˆå¼ BIï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æŸ¥è¯¢ä¸è‡ªåŠ¨å¯è§†åŒ–</td><td>â˜…â˜…â˜…â˜…â˜†</td><td>åŸç”Ÿç”Ÿæˆå¼åˆ†æï¼ˆText to SQLã€Text to Chartã€è¯­ä¹‰å±‚ï¼‰</td></tr><tr><td>Redash</td><td>SQL æŸ¥è¯¢ä¸å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºè½»é‡ BI çœ‹æ¿</td><td>â˜…â˜…â˜…â˜†â˜†</td><td>æ— åŸç”Ÿ AIï¼Œå¯å¤–æ¥æ¨¡å‹åš Text to SQL ä¸åˆ†ææ‰©å±•</td></tr><tr><td>Appsmith</td><td>å¯è§†åŒ–åº”ç”¨æ„å»ºå¹³å°ï¼Œå¯æ­å»ºå†…éƒ¨å·¥å…·ä¸ä¸šåŠ¡é¢æ¿</td><td>â˜…â˜…â˜…â˜…â˜†</td><td>åŸç”Ÿ AI Assistantï¼Œæ”¯æŒç”Ÿæˆç•Œé¢ã€æ•°æ®é€»è¾‘ä¸æ–‡æ¡ˆ</td></tr><tr><td>Metabase</td><td>ä¼ä¸šçº§å¼€æº BI å¹³å°ï¼Œé€‚ç”¨äºæ•°æ®æ¢ç´¢ä¸åˆ†æä»ªè¡¨ç›˜</td><td>â˜…â˜…â˜…â˜…â˜†</td><td>åŸç”Ÿ Metabotï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æŸ¥è¯¢å’ŒæŒ‡æ ‡è§£é‡Š</td></tr><tr><td>Grafana</td><td>å¯è§‚æµ‹æ€§ä¸æ—¶åºæ•°æ®é¢æ¿å¹³å°ï¼Œä¹Ÿç”¨äºä¸šåŠ¡å¯è§†åŒ–</td><td>â˜…â˜…â˜…â˜†â˜†</td><td>æ— åŸç”Ÿ AIï¼Œå¯é€šè¿‡æ’ä»¶æˆ–å¤–éƒ¨æ¨¡å‹å®ç°å¼‚å¸¸æ£€æµ‹å’Œåˆ†æ</td></tr></tbody></table>
<h2 data-id="heading-1">å·¥å…·æ¨è</h2>
<h3 data-id="heading-2"><strong>NocoBase</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ceb8a4dcb4b489f9c20ca1d3e6701c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=hG731WwqDsOtabLLdQYel7YssKI%3D" alt="nocobase1.PNG" loading="lazy"/></p>
<p>å®˜ç½‘ï¼š<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">www.nocobase.com/cn/</a></p>
<p>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.docs.nocobase.com%2Fcn%2F" target="_blank" title="https://v2.docs.nocobase.com/cn/" ref="nofollow noopener noreferrer">v2.docs.nocobase.com/cn/</a></p>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnocobase%2Fnocobase" target="_blank" title="https://github.com/nocobase/nocobase" ref="nofollow noopener noreferrer">github.com/nocobase/noâ€¦</a></p>
<p>GitHub Starsï¼š20.7k</p>
<p><strong>å®šä½</strong></p>
<p>NocoBase æ˜¯ä¸€ä¸ªå¼€æºä¸”å¯è‡ªæ‰˜ç®¡çš„ AI æ— ä»£ç å¼€å‘å¹³å°ï¼Œä»¥ç»Ÿä¸€çš„æ•°æ®æ¨¡å‹å’Œå¯æ‰©å±•çš„æ’ä»¶æ¶æ„ä¸ºåŸºç¡€ã€‚å¹³å°æ”¯æŒåœ¨åŒä¸€æ•°æ®ç»“æ„ä¸‹å®Œæˆä¸šåŠ¡è®°å½•ã€æ•°æ®ç®¡ç†å’Œå¯è§†åŒ–æ„å»ºï¼Œé€‚åˆæ­å»ºå†…éƒ¨åº”ç”¨ï¼Œå¹¶åŸºäºä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®åˆ›å»ºä»ªè¡¨ç›˜å’Œ BI çœ‹æ¿ã€‚</p>
<p><strong>æ ¸å¿ƒç”¨é€”</strong></p>
<ul>
<li><strong>åŸºäºç»Ÿä¸€æ•°æ®æ¨¡å‹æ„å»ºå¯è§†åŒ–çœ‹æ¿</strong>ï¼šNocoBase çš„å¯è§†åŒ–èƒ½åŠ›å»ºç«‹åœ¨ç»Ÿä¸€çš„æ•°æ®æ¨¡å‹ä¹‹ä¸Šã€‚ä¸šåŠ¡è¡¨ã€æµç¨‹è®°å½•ä¸å…¶ä»–ç»“æ„åŒ–æ•°æ®åœ¨å»ºæ¨¡åå³å¯ä½œä¸ºå¯è§†åŒ–çš„æ•°æ®æºã€‚å¯è§†åŒ–æ„å»ºæ–¹å¼ä¸»è¦åŒ…æ‹¬ä¸‰ç±»ï¼š
<ul>
<li>é€šè¿‡å›¾è¡¨åŒºå—ç›´æ¥é…ç½®æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€ç»Ÿè®¡å¡ç­‰å¸¸è§ç»„ä»¶ï¼›</li>
<li>åœ¨ JS åŒºå—ä¸­å®ç°æ›´çµæ´»çš„å®šåˆ¶åŒ–å‘ˆç°ï¼›</li>
<li>å€ŸåŠ© AI å‘˜å·¥æ ¹æ®è‡ªç„¶è¯­è¨€æŒ‡ä»¤è‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ–å¸ƒå±€ä¸å›¾è¡¨é…ç½®ã€‚
æ•´ä½“èƒ½åŠ›æ—¢æ”¯æŒå¿«é€Ÿæ­å»ºå¸¸è§„ä»ªè¡¨ç›˜ï¼Œä¹Ÿè¦†ç›–æ›´å¤æ‚çš„åˆ†æä¸è‡ªå®šä¹‰åœºæ™¯ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c5206638cb945d1ac05606376cd32f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=7A5FnijIKE2yJ%2B3O5KBwUD20NII%3D" alt="NocoBase2.PNG" loading="lazy"/></p>
<ul>
<li><strong>æ’ä»¶åŒ–æ‰©å±•ä¸ç³»ç»Ÿé›†æˆèƒ½åŠ›</strong>ï¼šé‡‡ç”¨å¾®å†…æ ¸æ¶æ„ï¼Œå¯æŒ‰éœ€æ‰©å±•é¡µé¢ç»„ä»¶ã€åŠ¨ä½œèƒ½åŠ›å’Œæ•°æ®æºã€‚å¯ä»¥è¿æ¥ä¸»æ•°æ®åº“ã€å¤–éƒ¨æ•°æ®åº“ä¸ç¬¬ä¸‰æ–¹æ¥å£ï¼Œé€‚åˆéœ€è¦æ•´åˆå¤šç±»æ•°æ®æ¥æºæˆ–æ„å»ºè‡ªå®šä¹‰é€»è¾‘çš„å›¢é˜Ÿã€‚</li>
</ul>
<p><strong>AI åŠŸèƒ½äº®ç‚¹</strong></p>
<ul>
<li><strong>ç³»ç»Ÿå†…ç½® <a href="https://link.juejin.cn?target=https%3A%2F%2Fv2.docs.nocobase.com%2Fcn%2Fai-employees" target="_blank" title="https://v2.docs.nocobase.com/cn/ai-employees" ref="nofollow noopener noreferrer">AI å‘˜å·¥</a></strong>ï¼šNocoBase æä¾›åŸç”Ÿçš„ AI å‘˜å·¥èƒ½åŠ›ï¼ŒAI å‘˜å·¥å¯ä»¥åœ¨ç³»ç»Ÿä¸­æ‰¿æ‹…å…·ä½“çš„å¯è§†åŒ–ç”Ÿæˆä»»åŠ¡ã€‚å®ƒèƒ½èƒ½åˆ†ææŒ‡å®šçš„æ•°æ®é›†ï¼Œæ ¹æ®è‡ªç„¶è¯­è¨€æŒ‡ä»¤è‡ªåŠ¨ç”Ÿæˆå›¾è¡¨ã€æŒ‡æ ‡å¡å’ŒåŸºç¡€åˆ†æå¸ƒå±€ï¼Œå‡å°‘æ‰‹åŠ¨é…ç½®å·¥ä½œé‡ï¼Œæé«˜å¯è§†åŒ–æ­å»ºæ•ˆç‡ã€‚ä¼ä¸šå¯ä»¥æ ¹æ®è‡ªèº«æµç¨‹éœ€æ±‚å®šä¹‰æ›´å¤š AI å‘˜å·¥ï¼Œä½¿å…¶åœ¨å¯è§†åŒ–å’Œåˆ†æä»»åŠ¡ä¸­å‘æŒ¥æ‰©å±•ä½œç”¨ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abe1f9c9bc5644e49546344103a14551~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=oB9cCC9TCXbK3OWsH%2FqB%2FzE6PgM%3D" alt="NocoBase3.png" loading="lazy"/></p>
<ul>
<li><strong>ç»“åˆçŸ¥è¯†åº“ä¸å‘é‡æ•°æ®åº“çš„æ‰©å±•èƒ½åŠ›</strong>ï¼šAI å‘˜å·¥èƒ½å¤Ÿå¼•ç”¨çŸ¥è¯†åº“å†…å®¹ï¼Œå¹¶é€šè¿‡å‘é‡æ•°æ®åº“æ‰§è¡Œæ£€ç´¢ä¸åŒ¹é…ï¼Œç”¨äºè¡¥å……è¯´æ˜ã€æ–‡æ¡£ç†è§£æˆ–ç»“æ„åŒ–è¾“å‡ºï¼Œé€‚åˆéœ€è¦ç»“åˆä¸šåŠ¡æ–‡æ¡£æˆ–è§„åˆ™è¿›è¡Œåˆ†æçš„åœºæ™¯ã€‚<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/280bbeac8f854b10946373d5b9097736~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=ElMrnM4ToCcviKUzt3pVklBpb0U%3D" alt="NocoBase4.png" loading="lazy"/></li>
<li><strong>å¤šæ¨¡å‹é€‰æ‹©ä¸çµæ´»éƒ¨ç½²æ–¹å¼</strong>ï¼šå¹³å°æ”¯æŒé…ç½®å¤šç§æ¨¡å‹æœåŠ¡ï¼ŒåŒ…æ‹¬æœ¬åœ°æ¨¡å‹å’Œäº‘ç«¯æ¨¡å‹ï¼Œå½“å‰å¯ä½¿ç”¨çš„æ¨¡å‹åŒ…å« OpenAIã€Geminiã€Anthropic ç­‰ã€‚å›¢é˜Ÿå¯ä»¥æ ¹æ®å®‰å…¨æ€§ã€æˆæœ¬ä¸ä½¿ç”¨ç¯å¢ƒé€‰æ‹©é€‚åˆçš„æ¨¡å‹æ–¹æ¡ˆã€‚</li>
</ul>
<h3 data-id="heading-3"><strong>Wren AI</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d31777f916f648608072da71a6dd6c99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=VX8zoNHQpJLxfpxJQ%2BX9K0bRmng%3D" alt="WrenAI.png" loading="lazy"/></p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.getwren.ai%2F" target="_blank" title="https://www.getwren.ai/" ref="nofollow noopener noreferrer">www.getwren.ai/</a></p>
<p>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.getwren.ai%2Fcp%2Foverview" target="_blank" title="https://docs.getwren.ai/cp/overview" ref="nofollow noopener noreferrer">docs.getwren.ai/cp/overview</a></p>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCanner%2FWrenAI" target="_blank" title="https://github.com/Canner/WrenAI" ref="nofollow noopener noreferrer">github.com/Canner/Wrenâ€¦</a></p>
<p>GitHub Starsï¼š13.2k</p>
<p><strong>å®šä½</strong></p>
<p>Wren AI æ˜¯ä¸€ä¸ªå¼€æºçš„ç”Ÿæˆå¼ BI å·¥å…·ï¼Œå¯ä»¥é€šè¿‡è‡ªç„¶è¯­è¨€ç”ŸæˆæŸ¥è¯¢ã€å›¾è¡¨å’Œå¯è§†åŒ–åˆ†æç»“æœã€‚</p>
<p><strong>æ ¸å¿ƒç”¨é€”</strong></p>
<ul>
<li><strong>æ”¯æŒå¿«é€Ÿæ„å»ºå¯è§†åŒ–å†…å®¹</strong>ï¼šæ ¹æ®æ•°æ®æºè‡ªåŠ¨ç”Ÿæˆå›¾è¡¨ä¸åŸºç¡€ä»ªè¡¨ç›˜ï¼Œé€‚åˆæ­å»ºè¿è¥çœ‹æ¿ä¸æ—¥å¸¸æŒ‡æ ‡é¡µé¢ã€‚</li>
<li><strong>æ”¯æŒä½œä¸ºåˆ†æèƒ½åŠ›åµŒå…¥ç°æœ‰ç³»ç»Ÿ</strong>ï¼šé€šè¿‡æ¥å£æ•´åˆåˆ°ä¸šåŠ¡åº”ç”¨ä¸­ï¼Œåœ¨ç³»ç»Ÿå†…éƒ¨æä¾›æ•°æ®æŸ¥è¯¢ä¸å±•ç¤ºèƒ½åŠ›ã€‚</li>
</ul>
<p><strong>AI åŠŸèƒ½äº®ç‚¹</strong></p>
<ul>
<li><strong>å…·å¤‡ç”Ÿæˆå¼åˆ†æèƒ½åŠ›</strong>ï¼šæ ¹æ®è‡ªç„¶è¯­è¨€è¾“å…¥ç”ŸæˆæŸ¥è¯¢è¯­å¥ï¼Œå¹¶åŸºäºæŸ¥è¯¢ç»“æœç”Ÿæˆå›¾è¡¨å’ŒåŸºç¡€æŠ¥è¡¨ï¼Œè¦†ç›–ä» Text to SQL åˆ° Text to Chart çš„å®Œæ•´é“¾è·¯ã€‚</li>
<li><strong>æä¾›è¯­ä¹‰å±‚èƒ½åŠ›</strong>ï¼šé€šè¿‡è¯­ä¹‰å¼•æ“ç†è§£ä¸šåŠ¡æ¨¡å‹å’Œæ•°æ®ç»“æ„ï¼Œä»¥å»ºæ¨¡å®šä¹‰çš„æ–¹å¼æå‡è‡ªç„¶è¯­è¨€æŸ¥è¯¢ä¸å¯è§†åŒ–ç”Ÿæˆçš„å‡†ç¡®æ€§ã€‚</li>
<li><strong>æ”¯æŒå¤šæ¨¡å‹ä¸è‡ªæ‰˜ç®¡éƒ¨ç½²</strong>ï¼šå¯è¿æ¥ OpenAIã€Geminiã€Google AIã€Anthropic ç­‰æ¨¡å‹ï¼ŒåŒæ—¶æä¾›å¼€æºç‰ˆæœ¬ç”¨äºæœ¬åœ°éƒ¨ç½²ï¼Œé€‚åˆå¯¹æ•°æ®å®‰å…¨æ€§æˆ–æ¨¡å‹æˆæœ¬æœ‰è¦æ±‚çš„å›¢é˜Ÿã€‚</li>
</ul>
<h3 data-id="heading-4"><strong>Redash</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cebd47621cc0487f811202cc1784c56c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=9GAKWSjNpv4W7g5Q%2F1Xq5OqAuAI%3D" alt="redash.png" loading="lazy"/></p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fredash.io" target="_blank" title="https://redash.io" ref="nofollow noopener noreferrer">redash.io</a></p>
<p>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fredash.io%2Fhelp" target="_blank" title="https://redash.io/help" ref="nofollow noopener noreferrer">redash.io/help</a></p>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgetredash%2Fredash" target="_blank" title="https://github.com/getredash/redash" ref="nofollow noopener noreferrer">github.com/getredash/râ€¦</a></p>
<p>GitHub Starsï¼š28.1k</p>
<p><strong>å®šä½</strong></p>
<p>Redash æ˜¯ä¸€ä¸ªå¼€æºçš„ SQL æŸ¥è¯¢ä¸å¯è§†åŒ–åˆ†æå¹³å°ï¼Œç”¨äºæ„å»ºå›¾è¡¨ã€æŸ¥è¯¢é¢æ¿å’Œè½»é‡çº§ BI ä»ªè¡¨ç›˜ï¼Œæ˜¯æ•°æ®å›¢é˜Ÿä¸­æœ€å¸¸ä½¿ç”¨çš„è‡ªåŠ©åˆ†æå·¥å…·ä¹‹ä¸€ã€‚</p>
<p><strong>æ ¸å¿ƒç”¨é€”</strong></p>
<ul>
<li><strong>é€šè¿‡ SQL æ„å»ºå›¾è¡¨ä¸ä»ªè¡¨ç›˜</strong>ï¼šRedash å…è®¸ç”¨æˆ·é€šè¿‡ SQL æŸ¥è¯¢è¿æ¥æ•°æ®åº“ï¼Œä»æŸ¥è¯¢ç»“æœåˆ›å»ºå›¾è¡¨ã€è¡¨æ ¼å’ŒæŒ‡æ ‡å¡ï¼Œå¹¶ç»„åˆæˆä»ªè¡¨ç›˜ã€‚é€‚åˆå·²ç»å…·å¤‡ SQL èƒ½åŠ›çš„å›¢é˜Ÿå¿«é€Ÿæ„å»ºè‡ªåŠ©åˆ†æç•Œé¢ã€‚</li>
<li><strong>æä¾›å¤šæ•°æ®æºæ•´åˆèƒ½åŠ›</strong>ï¼šæ”¯æŒå¤šç§æ•°æ®åº“ä¸ API ä½œä¸ºæ•°æ®æºï¼ŒåŒ…æ‹¬ PostgreSQLã€MySQLã€BigQueryã€Athena ç­‰ï¼Œä½¿å…¶é€‚åˆæ•´åˆä¼ä¸šå†…éƒ¨å¤šç±»æ•°æ®ä»¥æ„å»ºè½»é‡åˆ†æä½“ç³»ã€‚</li>
</ul>
<p><strong>AI ç›¸å…³åŠŸèƒ½</strong></p>
<p>Redash æœ¬èº«ä¸å†…ç½® AI åŠŸèƒ½ï¼Œä½†ç”±äº Redash å®Œå…¨åŸºäº SQL æŸ¥è¯¢å’Œ API ç»“æœæ¸²æŸ“ï¼Œå…¶æ¶æ„éå¸¸å®¹æ˜“ä¸å¤–éƒ¨ AI å·¥å…·ç»“åˆã€‚</p>
<ul>
<li><strong>å¤–æ¥ AI è¿›è¡Œ Text to SQL</strong>ï¼šé€šè¿‡ä¸ OpenAIã€Anthropic æˆ–è‡ªå»º LLM æœåŠ¡è¿æ¥ï¼ŒAI å¯ä»¥æ ¹æ®æè¿°ç”Ÿæˆ SQLï¼Œå†å°† SQL ç›´æ¥æäº¤ç»™ Redash æŸ¥è¯¢ç¼–è¾‘å™¨ã€‚ç¤¾åŒºç”¨æˆ·æ™®éé€šè¿‡æµè§ˆå™¨æ’ä»¶ã€å†…éƒ¨å·¥å…·æˆ– API ä»£ç†æ–¹å¼å®ç°ã€‚</li>
<li><strong>å°† AI æ¨¡å‹è¾“å‡ºä½œä¸ºæ•°æ®æº</strong>ï¼šAI çš„ç”Ÿæˆç»“æœï¼ˆåŒ…æ‹¬ JSONã€è¡¨æ ¼ç±»ç»“æ„ã€èšåˆæ•°æ®ï¼‰å¯ä»¥ä½œä¸ºâ€œAPI æ•°æ®æºâ€ç›´æ¥æ¥å…¥ Redashï¼Œä»è€Œæ¸²æŸ“æˆå›¾è¡¨æˆ–æŒ‡æ ‡å¡ã€‚</li>
</ul>
<h3 data-id="heading-5"><strong>Appsmith</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/830cf6f227f04daea796a631d99042c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=zYyQfHXY3axHeEx6nlQ1D7BSlkY%3D" alt="appsmith.png" loading="lazy"/></p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.appsmith.com%2F" target="_blank" title="https://www.appsmith.com/" ref="nofollow noopener noreferrer">www.appsmith.com/</a></p>
<p>æ–‡æ¡£ï¼š<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">www.appsmith.com/ai/low-code</a></p>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fappsmithorg%2Fappsmith" target="_blank" title="https://github.com/appsmithorg/appsmith" ref="nofollow noopener noreferrer">github.com/appsmithorgâ€¦</a></p>
<p>GitHub Starsï¼š38.6k</p>
<p><strong>å®šä½</strong></p>
<p>Appsmith æ˜¯ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–åº”ç”¨æ„å»ºå¹³å°ï¼Œå¯ä»¥ç”¨äºæ­å»ºä¸šåŠ¡åˆ†æçœ‹æ¿å’ŒåŸºç¡€ä»ªè¡¨ç›˜ã€‚ä¾æ‰˜ç»„ä»¶åº“ã€æ•°æ®æºè¿æ¥ä»¥åŠçµæ´»çš„å‰ç«¯é…ç½®æ–¹å¼ï¼Œé€‚åˆåœ¨å†…éƒ¨ç³»ç»Ÿä¸­æ„å»ºä»¥æ•°æ®å±•ç¤ºã€ä¸šåŠ¡ç›‘æ§å’Œæ“ä½œé¢æ¿ä¸ºä¸»çš„åº”ç”¨ç•Œé¢ã€‚</p>
<p><strong>æ ¸å¿ƒç”¨é€”</strong></p>
<ul>
<li><strong>æ„å»ºä¸šåŠ¡çœ‹æ¿ä¸åŸºç¡€ä»ªè¡¨ç›˜</strong>ï¼šé€šè¿‡è¡¨æ ¼ã€å›¾è¡¨ã€åˆ—è¡¨ç­‰ç»„ä»¶ï¼Œå°†æ•°æ®åº“æˆ–æ¥å£æ•°æ®ä»¥å¯è§†åŒ–æ–¹å¼å‘ˆç°ï¼Œå¯ç”¨äºæ„å»ºè¿è¥ç›‘æ§é¢æ¿ã€ä¸šåŠ¡æ•°æ®çœ‹æ¿å’Œç®€æ˜“æŒ‡æ ‡å±•ç¤ºé¡µé¢ã€‚é€‚åˆéœ€è¦è‡ªå®šä¹‰äº¤äº’ä¸å¸ƒå±€çš„å›¢é˜Ÿã€‚</li>
<li><strong>æ„å»ºå†…éƒ¨å·¥å…·å’Œç®¡ç†åå°</strong>ï¼šå€ŸåŠ©ç•Œé¢ç»„ä»¶ã€æƒé™è§„åˆ™å’ŒåŠ¨ä½œé€»è¾‘ï¼Œå¯ä»¥åœ¨åŒä¸€åº”ç”¨ä¸­å®Œæˆæ•°æ®å±•ç¤ºã€æ•°æ®å½•å…¥å’Œæµç¨‹ç®¡ç†ï¼Œé€‚åˆä»¥ä¸šåŠ¡æ“ä½œä¸æ•°æ®ç®¡ç†ä¸ºæ ¸å¿ƒçš„åœºæ™¯ã€‚</li>
</ul>
<p><strong>AI åŠŸèƒ½äº®ç‚¹</strong></p>
<ul>
<li><strong>é¢å‘åº”ç”¨æ„å»ºçš„ AI Assistant</strong>ï¼šAI Assistant å¯æ ¹æ®è‡ªç„¶è¯­è¨€æè¿°ç”Ÿæˆç•Œé¢å¸ƒå±€ã€é¡µé¢ç»„ä»¶ã€æ¥å£è°ƒç”¨å’ŒåŸºæœ¬é€»è¾‘ï¼ŒåŠ é€Ÿä¸šåŠ¡å·¥å…·å’Œæ•°æ®å±•ç¤ºé¢æ¿çš„æ­å»ºè¿‡ç¨‹ã€‚å®ƒä¸»è¦å¸®åŠ©å‡å°‘å‰ç«¯ä¸é…ç½®å·¥ä½œé‡ã€‚</li>
<li><strong>è¾…åŠ©ç”Ÿæˆæ•°æ®å¤„ç†é€»è¾‘ä¸å†…å®¹æ–‡æ¡ˆ</strong>ï¼šå¯¹äºæ•°æ®æŸ¥è¯¢æˆ–æ ¼å¼åŒ–é€»è¾‘ï¼ŒAI å¯ä»¥æ ¹æ®è¯´æ˜ç”Ÿæˆè„šæœ¬ç‰‡æ®µæˆ–è¡¨è¾¾å¼ï¼›åœ¨æ–‡æ¡ˆç±»å†…å®¹ä¸­ï¼Œä¹Ÿå¯ç”¨äºè‡ªåŠ¨ç”Ÿæˆè¯´æ˜æ–‡å­—æˆ–è§£é‡Šæ€§æ–‡æœ¬ã€‚</li>
</ul>
<p>ğŸ’¡æ¨èé˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fbusiness-application-development" target="_blank" title="https://www.nocobase.com/cn/blog/business-application-development" ref="nofollow noopener noreferrer">å®Œå…¨æŒ‡å—ï¼šå¦‚ä½•é«˜æ•ˆè¿›è¡Œä¸šåŠ¡åº”ç”¨å¼€å‘ï¼Ÿ</a></p>
<h3 data-id="heading-6"><strong>Metabase</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a6cf681c2d44438b691d49f9a7b73c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=bPnLmv%2FL6wM01ISFLPyjHhLLjbI%3D" alt="metabase.png" loading="lazy"/></p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.metabase.com%2F" target="_blank" title="https://www.metabase.com/" ref="nofollow noopener noreferrer">www.metabase.com/</a></p>
<p>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.metabase.com%2Fdocs%2Flatest%2F" target="_blank" title="https://www.metabase.com/docs/latest/" ref="nofollow noopener noreferrer">www.metabase.com/docs/latestâ€¦</a></p>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmetabase%2Fmetabase" target="_blank" title="https://github.com/metabase/metabase" ref="nofollow noopener noreferrer">github.com/metabase/meâ€¦</a></p>
<p>GitHub Starsï¼š44.9k</p>
<p><strong>å®šä½</strong></p>
<p>Metabase æ˜¯ä¸€ä¸ªæˆç†Ÿçš„å¼€æº BI å¹³å°ï¼Œé€‚ç”¨äºæ„å»ºä¼ä¸šçº§çš„ä¸šåŠ¡åˆ†æä»ªè¡¨ç›˜ä¸è‡ªåŠ©æ•°æ®æŸ¥è¯¢ç³»ç»Ÿã€‚</p>
<p><strong>æ ¸å¿ƒç”¨é€”</strong></p>
<ul>
<li><strong>å›¾å½¢åŒ–æ•°æ®æ¢ç´¢ä¸æŠ¥è¡¨æ„å»º</strong>ï¼šç”¨æˆ·å¯ä»¥ä»¥ â€œé—®é¢˜ â†’ å¯è§†åŒ– â†’ ä»ªè¡¨ç›˜â€ çš„æµç¨‹è¿›è¡Œæ•°æ®æ¢ç´¢ï¼Œæ— éœ€æ‰‹å†™å¤æ‚ SQLã€‚æ”¯æŒå›¾è¡¨ã€è¡¨æ ¼ã€è¿‡æ»¤ä¸å…±äº«ä»ªè¡¨ç›˜ï¼Œé€‚åˆåˆ†æ KPIã€ä¸šåŠ¡è¶‹åŠ¿ã€ç”¨æˆ·è¡Œä¸ºã€é”€å”®æ•°æ®ç­‰ã€‚</li>
<li><strong>å›¢é˜Ÿåä½œä¸å…±äº«ä»ªè¡¨ç›˜</strong>ï¼šä»ªè¡¨ç›˜ä¸æŠ¥è¡¨å¯ä»¥è¢«å›¢é˜Ÿå…±äº«ï¼Œä¸åŒæˆå‘˜å¯ä»¥æŸ¥çœ‹ã€ç¼–è¾‘ã€è®¢é˜…ç»“æœï¼Œé€‚åˆä¼ä¸šå†…è·¨éƒ¨é—¨åä½œåˆ†æã€ç»Ÿä¸€ç›‘æ§å…³é”®æŒ‡æ ‡ã€å…±äº«æ•°æ®æ´å¯Ÿã€‚</li>
<li><strong>å¤šæ•°æ®æºæ”¯æŒä¸çµæ´»è¿æ¥èƒ½åŠ›</strong>ï¼šæ”¯æŒè¿æ¥å¤šç§æ•°æ®åº“ç±»å‹ï¼ˆPostgreSQLã€MySQLã€MariaDBã€SQL Serverç­‰ï¼‰ï¼Œæ–¹ä¾¿ä¼ä¸šå°†æ•£è½åœ¨ä¸åŒç³»ç»Ÿçš„æ•°æ®æ•´åˆåˆ°åŒä¸€ä¸ªåˆ†æå¹³å°è¿›è¡Œç»Ÿä¸€æŸ¥è¯¢å’Œå±•ç¤ºã€‚</li>
</ul>
<p><strong>AI åŠŸèƒ½äº®ç‚¹</strong></p>
<ul>
<li><strong>AI åŠ©æ‰‹</strong> Metabase æä¾›åä¸º â€œMetabotâ€ çš„ AI Data Assistant æ¨¡å—ç”¨äºå¢å¼ºæ•°æ®åˆ†æä½“éªŒã€‚æ ¹æ®å®˜ç½‘ï¼Œè¯¥åŠ©æ‰‹å¯ä»¥ååŠ©è§£é‡ŠæŒ‡æ ‡ã€ç”Ÿæˆæ´å¯Ÿä¸å›ç­”ä¸æ•°æ®ç›¸å…³çš„é—®é¢˜ã€‚</li>
<li><strong>è‡ªç„¶è¯­è¨€æŸ¥è¯¢ä¸æ™ºèƒ½è§£é‡Š</strong>ï¼šMetabot æ”¯æŒé€šè¿‡è‡ªç„¶è¯­è¨€æå‡ºé—®é¢˜ï¼Œå¹³å°å°†å°è¯•ç†è§£é—®é¢˜å¹¶è¿”å›ç›¸åº”æ•°æ®ç»“æœæˆ–å›¾è¡¨ï¼Œé™ä½éæŠ€æœ¯ç”¨æˆ·çš„æ•°æ®è®¿é—®é—¨æ§›ã€‚</li>
<li><strong>è‡ªåŠ¨æ´å¯Ÿä¸æŒ‡æ ‡è§£è¯»</strong>ï¼šå½“æ•°æ®å‘ç”Ÿå˜åŒ–æˆ–æŸ¥è¯¢ç»“æœç”Ÿæˆåï¼ŒMetabot èƒ½è‡ªåŠ¨æä¾›å¯¹å…³é”®æŒ‡æ ‡çš„è§£é‡Šä¸æ´å¯Ÿå»ºè®®ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿç†è§£æ•°æ®èƒŒåçš„å«ä¹‰ï¼Œè€Œä¸ä»…ä»…æ˜¯æä¾›åŸå§‹æ•°å­—æˆ–å›¾è¡¨ã€‚</li>
</ul>
<h3 data-id="heading-7"><strong>Grafana</strong></h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01924523472a43e1b3b1f6d4cc4da883~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTm9jb0Jhc2U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766150488&amp;x-signature=XXZdwIOaBpKgZE1BDHxGHiM2gsc%3D" alt="grafana.png" loading="lazy"/></p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgrafana.com" target="_blank" title="https://grafana.com" ref="nofollow noopener noreferrer">grafana.com</a></p>
<p>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgrafana.com%2Fdocs" target="_blank" title="https://grafana.com/docs" ref="nofollow noopener noreferrer">grafana.com/docs</a></p>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgrafana%2Fgrafana" target="_blank" title="https://github.com/grafana/grafana" ref="nofollow noopener noreferrer">github.com/grafana/graâ€¦</a></p>
<p>GitHub Starsï¼š71.2k</p>
<p><strong>å®šä½</strong></p>
<p>Grafana æ˜¯ä¸€ä¸ªå¼€æºçš„å¯è§†åŒ–ä¸ç›‘æ§ä»ªè¡¨ç›˜å¹³å°ï¼Œä»¥æ—¶åºæ•°æ®å’Œå¯è§‚æµ‹æ€§åœºæ™¯ä¸ºæ ¸å¿ƒï¼ŒåŒæ—¶è¢«å¹¿æ³›ç”¨äºä¸šåŠ¡æŒ‡æ ‡å±•ç¤ºä¸ä»ªè¡¨ç›˜æ­å»ºã€‚</p>
<p><strong>æ ¸å¿ƒç”¨é€”</strong></p>
<ul>
<li><strong>æ„å»ºå®æ—¶ç›‘æ§é¢æ¿ä¸æŒ‡æ ‡å¯è§†åŒ–</strong>ï¼šGrafana èƒ½è¿æ¥å¤šç§æ—¶åºæ•°æ®åº“ã€æ—¥å¿—ç³»ç»Ÿä¸ç›‘æ§å·¥å…·ï¼Œå°†æ•°æ®ä»¥å›¾è¡¨ã€è¶‹åŠ¿çº¿ã€æŒ‡æ ‡å¡ç­‰å½¢å¼å±•ç¤ºã€‚é€‚ç”¨äºç³»ç»Ÿç›‘æ§ã€æœåŠ¡è¿è¡ŒæŒ‡æ ‡ã€ä¸šåŠ¡å®æ—¶åˆ†æç­‰åœºæ™¯ã€‚</li>
<li><strong>ç»Ÿä¸€å±•ç¤ºæ¥è‡ªå¤šæ•°æ®æºçš„ä¸šåŠ¡ä¿¡æ¯</strong>ï¼šå¹³å°æ”¯æŒè¿æ¥ Prometheusã€Elasticsearchã€MySQLã€PostgreSQLã€BigQuery ç­‰å¤šç±»æ•°æ®æºï¼Œå¯ä»¥åœ¨åŒä¸€ä¸ªä»ªè¡¨ç›˜ç»„åˆä¸åŒæ¥æºçš„æ•°æ®ï¼Œæ„å»ºç»Ÿä¸€ç›‘æ§å¤§ç›˜æˆ–ä¸šåŠ¡è¿è¥é¢æ¿ã€‚</li>
</ul>
<p><strong>AI ç›¸å…³åŠŸèƒ½</strong></p>
<p>Grafana ä¸ç›´æ¥æä¾› AI åŠŸèƒ½ï¼Œä¸è¿‡ç”±äºå…¶æ”¯æŒæ’ä»¶ä¸ API æ•°æ®æºï¼Œå›¢é˜Ÿå¯ä»¥å°†å¤–éƒ¨æ¨¡å‹çš„åˆ†æç»“æœæ¥å…¥ï¼Œä»è€Œå®ç° AI åœ¨ç›‘æ§ä¸åˆ†æåœºæ™¯çš„åº”ç”¨ï¼š</p>
<ul>
<li><strong>åŸºäº AI çš„å¼‚å¸¸æ£€æµ‹ä¸è¶‹åŠ¿åˆ†æ</strong>ï¼šé€šè¿‡å¤–éƒ¨ AIOps å·¥å…·æˆ– AI æœåŠ¡æ’ä»¶ï¼Œå°†æ¨¡å‹åˆ†æåçš„å¼‚å¸¸ç‚¹ã€è¶‹åŠ¿å˜åŒ–ç­‰ä¿¡æ¯å›å†™åˆ° Grafana ä»ªè¡¨ç›˜ä¸­ï¼Œç”¨äºè¾…åŠ©ç›‘æ§ä¸è¯Šæ–­ã€‚</li>
<li><strong>å°† AI è¾“å‡ºä½œä¸ºæ•°æ®æºä½¿ç”¨</strong>ï¼š AI æ¨¡å‹ç”Ÿæˆçš„æŒ‡æ ‡ã€åˆ†æç»“æœæˆ–ç»“æ„åŒ–æ•°æ®å¯ä»¥é€šè¿‡ API æ•°æ®æºæ–¹å¼å¯¼å…¥ Grafanaï¼Œå¹¶ä»¥å›¾è¡¨å‘ˆç°ã€‚</li>
</ul>
<h2 data-id="heading-8">å†™åœ¨æœ€å</h2>
<p>åœ¨ä¼ä¸šçš„æ•°æ®åˆ†æä½“ç³»ä¸­ï¼Œå•†ä¸šåŒ– BI å·¥å…·ä»ç„¶æ˜¯è¾ƒä¸ºæˆç†Ÿç¨³å®šçš„é€‰æ‹©ï¼Œä½†æˆæƒæˆæœ¬ã€éƒ¨ç½²é™åˆ¶ä»¥åŠæ‰©å±•èƒ½åŠ›çš„è¾¹ç•Œï¼Œä¹Ÿç¡®å®è®©ä¸å°‘å›¢é˜Ÿåœ¨è½åœ°é˜¶æ®µé¢ä¸´å–èˆã€‚å¦‚æœé¢„ç®—æœ‰é™ï¼Œæˆ–å¸Œæœ›åœ¨ç³»ç»Ÿä¸­ä¿ç•™æ›´å¤§çš„è‡ªå®šä¹‰ç©ºé—´ï¼Œå¼€æºæ–¹æ¡ˆå¾€å¾€æä¾›æ›´çµæ´»çš„è·¯å¾„ï¼Œæ›´é€‚åˆé€æ­¥æ„å»ºã€æŒç»­è¿­ä»£çš„æ•°æ®åˆ†æä½“ç³»ã€‚</p>
<p>åŸºäºæœ¬æ–‡æåˆ°çš„å…­æ¬¾å·¥å…·ï¼Œå¯ä»¥ä»ä¸åŒçš„è½åœ°åœºæ™¯å‡ºå‘åšä¸€ä¸ªç®€å•åˆ¤æ–­ï¼š</p>
<ul>
<li>å¦‚æœåªæ˜¯å¸Œæœ›å®Œæˆä¸€ä¸ªç›¸å¯¹è½»é‡çš„ Dashboardï¼Œå…³æ³¨é™ä½ç»´æŠ¤æˆæœ¬ï¼Œé‚£ä¹ˆä»¥æŸ¥è¯¢å’Œå¯è§†åŒ–ä¸ºä¸­å¿ƒçš„å·¥å…·ä¼šæ›´åˆé€‚ï¼Œä¾‹å¦‚ Redashã€Grafana æˆ– Wren AIã€‚</li>
<li>å¦‚æœå¸Œæœ›åœ¨åŒä¸€å¹³å°ä¸­å¤„ç†ä¸šåŠ¡åº”ç”¨ã€æ•°æ®ç®¡ç†å’Œå¯è§†åŒ–åˆ†æï¼Œåˆ™å¯ä»¥è€ƒè™‘å…·å¤‡æ›´å®Œæ•´ç³»ç»Ÿèƒ½åŠ›çš„å¹³å°ï¼Œä¾‹å¦‚ NocoBaseã€Appsmith æˆ– Metabaseã€‚</li>
</ul>
<p>ğŸ‘‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fcore-app-dashboard-building-tools%23%25E7%2594%25A8-nocobase-%25E5%25BF%25AB%25E9%2580%259F%25E6%2590%25AD%25E5%25BB%25BA%25E4%25B8%2580%25E4%25B8%25AA-core-app-dashboard" target="_blank" title="https://www.nocobase.com/cn/blog/core-app-dashboard-building-tools#%E7%94%A8-nocobase-%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA-core-app-dashboard" ref="nofollow noopener noreferrer">å¿«é€Ÿä¸Šæ‰‹ï¼šç”¨ NocoBase å¿«é€Ÿæ­å»ºä¸€ä¸ªæ ¸å¿ƒåº”ç”¨ä»ªè¡¨ç›˜</a></p>
<p>è¿™äº›å·¥å…·èƒŒåçš„ç¤¾åŒºç”Ÿæ€å’ŒåŠŸèƒ½èƒ½åŠ›ä»åœ¨æŒç»­å®Œå–„ï¼Œä¹Ÿæ„å‘³ç€å›¢é˜Ÿå¯ä»¥æ ¹æ®è‡ªèº«é˜¶æ®µé€æ­¥è°ƒæ•´æŠ€æœ¯æ ˆã€‚å¦‚æœä½ åœ¨ä½¿ç”¨å…¶ä¸­ä»»ä½•ä¸€ä¸ªå·¥å…·ï¼Œæˆ–æ­£åœ¨è¯„ä¼°æ–°çš„æ–¹æ¡ˆï¼Œä¹Ÿæ¬¢è¿å‘æˆ‘ä»¬åˆ†äº«ç»éªŒä¸æ€è€ƒï¼</p>
<p>ç›¸å…³é˜…è¯»ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fthe-8-best-google-sheets-alternatives-with-full-cost-and-capability-analysis" target="_blank" title="https://www.nocobase.com/cn/blog/the-8-best-google-sheets-alternatives-with-full-cost-and-capability-analysis" ref="nofollow noopener noreferrer">8 ä¸ªæœ€ä½³ Google Sheets æ›¿ä»£æ–¹æ¡ˆï¼ˆé™„æˆæœ¬ä¸èƒ½åŠ›åˆ†æï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2F6-open-source-no-low-code-tools-for-building-pocs" target="_blank" title="https://www.nocobase.com/cn/blog/6-open-source-no-low-code-tools-for-building-pocs" ref="nofollow noopener noreferrer">6ä¸ªé€‚åˆåš PoC çš„å¼€æºæ— ä»£ç /ä½ä»£ç å·¥å…·æ¨è </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fa-developers-technical-decision-guide-to-no-code-and-low-code" target="_blank" title="https://www.nocobase.com/cn/blog/a-developers-technical-decision-guide-to-no-code-and-low-code" ref="nofollow noopener noreferrer">ç»™å¼€å‘è€…çš„æ— ä»£ç /ä½ä»£ç æŠ€æœ¯å†³ç­–æŒ‡å—ï¼ˆ2026ï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2F6-in-depth-comparison-rbac-no-code-low-code-platforms" target="_blank" title="https://www.nocobase.com/cn/blog/6-in-depth-comparison-rbac-no-code-low-code-platforms" ref="nofollow noopener noreferrer">6 å¤§ä¼ä¸šçº§æ— ä»£ç ä½ä»£ç å¹³å° RBAC æƒé™ä½“ç³»æ·±åº¦å¯¹æ¯”</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2F14-ai-low-code-platforms-github" target="_blank" title="https://www.nocobase.com/cn/blog/14-ai-low-code-platforms-github" ref="nofollow noopener noreferrer">GitHub ä¸Šæœ€å€¼å¾—å…³æ³¨çš„ 14 ä¸ªå¼€æº AI ä½ä»£ç å·¥å…· </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Ftop-11-github-open-source-no-code-ai-tools" target="_blank" title="https://www.nocobase.com/cn/blog/top-11-github-open-source-no-code-ai-tools" ref="nofollow noopener noreferrer">11 ä¸ªåœ¨ GitHub ä¸Šæœ€å—æ¬¢è¿çš„å¼€æºæ— ä»£ç  AI å·¥å…· </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.nocobase.com%2Fcn%2Fblog%2Fgithub-open-source-ai-agent-projects" target="_blank" title="https://www.nocobase.com/cn/blog/github-open-source-ai-agent-projects" ref="nofollow noopener noreferrer">GitHub ä¸Š Star æ•°é‡å‰ 18 çš„å¼€æº AI Agent é¡¹ç›®</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AutoGLM å¼€æºå®æµ‹ï¼šä¸€å¥è¯è®© AI å¸®æˆ‘ç‚¹ä¸ªé¸¡æ’]]></title>    <link>https://juejin.cn/post/7582785032852226111</link>    <guid>https://juejin.cn/post/7582785032852226111</guid>    <pubDate>2025-12-12T13:25:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582785032852226111" data-draft-id="7582785032852209727" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AutoGLM å¼€æºå®æµ‹ï¼šä¸€å¥è¯è®© AI å¸®æˆ‘ç‚¹ä¸ªé¸¡æ’"/> <meta itemprop="keywords" content="ChatGLM (æ™ºè°±),äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-12T13:25:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AutoGLM å¼€æºå®æµ‹ï¼šä¸€å¥è¯è®© AI å¸®æˆ‘ç‚¹ä¸ªé¸¡æ’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T13:25:19.000Z" title="Fri Dec 12 2025 13:25:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ä¸€æ®µæ—¶é—´â€œæ™ºè°±AIâ€çš„åŠ¨ä½œä¸å°‘å‘€ã€‚</p>
<p>å‰ä¸€é˜µçš„ <code>GLM-4.6</code> å‡ ä¹æˆä¸ºå…¬è®¤çš„ <code>Claude Code</code> æœ€ä½³å¹³æ›¿æ¨¡å‹ï¼Œå‰ä¸¤å¤©åˆ†äº«çš„ <code>GLM-4.6V</code> åˆ™å¼€å®ç°äº†å›¾æ–‡æ··æ’è¾“å…¥è¾“å‡ºã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åˆšå¼€æºçš„ <code>Phone Use</code> æ¨¡å‹ <code>AutoGLM</code> æ•ˆæœå¦‚ä½•ã€‚</p>
<h2 data-id="heading-0">AutoGLM</h2>
<p>ä»Šå¤©çš„ä¸»è§’æœ‰äº›æœ‹å‹å¯èƒ½ä¸å¤ªäº†è§£ï¼Œæˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸‹ã€‚</p>
<p><code>Phone Agent</code> æ˜¯ä¸€ä¸ªåŸºäº <code>AutoGLM</code> æ„å»ºçš„æ‰‹æœºç«¯æ™ºèƒ½åŠ©ç†æ¡†æ¶ï¼Œå®ƒèƒ½å¤Ÿä»¥å¤šæ¨¡æ€æ–¹å¼ç†è§£æ‰‹æœºå±å¹•å†…å®¹ï¼Œå¹¶é€šè¿‡è‡ªåŠ¨åŒ–æ“ä½œå¸®åŠ©ç”¨æˆ·å®Œæˆä»»åŠ¡ã€‚</p>
<p>æ¡†æ¶é€šè¿‡ <code>ADB(Android Debug Bridge)</code> æ¥æ§åˆ¶è®¾å¤‡ï¼Œä»¥è§†è§‰è¯­è¨€æ¨¡å‹è¿›è¡Œå±å¹•æ„ŸçŸ¥ï¼Œå†ç»“åˆæ™ºèƒ½è§„åˆ’èƒ½åŠ›ç”Ÿæˆå¹¶æ‰§è¡Œæ“ä½œæµç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34433f0a89fa4c8da8e7f3a56fb8b62e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=NOUCk3HEzguqXznAU8VZxRJ%2BX%2B8%3D" alt="" loading="lazy"/></p>
<p>ç”±äº <code>Phone Agent</code> ä¼šæ“ä½œä¸ªäººæ‰‹æœºï¼Œè€Œæ‰‹æœºåˆæ˜¯éå¸¸é‡è¦çš„ç§äººç‰©å“ï¼Œæ‰€ä»¥ï¼Œå¤§å®¶å®è·µå‰ï¼Œè¯·ä»”ç»†äº†è§£ä»¥ä¸‹å†…å®¹ï¼š</p>
<p><strong>é‡è¦æé†’ï¼šPhone Agent ä¼šç›´æ¥æ§åˆ¶ä½ çš„æ‰‹æœºï¼Œæ¶‰åŠéšç§ä¸å®‰å…¨ã€‚ä»…é™ç ”ç©¶å­¦ä¹ ä½¿ç”¨ï¼Œä¸¥ç¦ç”¨äºè‡ªåŠ¨åŒ–ä¸‹å•ã€çˆ¬å–æ•°æ®ç­‰è¡Œä¸ºã€‚Phone Use æŠ€æœ¯ä»åœ¨æ—©æœŸé˜¶æ®µï¼Œè¯·åŠ¡å¿…åœ¨äº†è§£é£é™©åè°¨æ…æ“ä½œã€‚</strong></p>
<p>ä¸‹é¢å°±æ˜¯å®é™…çš„ä½“éªŒè¿‡ç¨‹äº†ã€‚</p>
<h2 data-id="heading-1">å‡†å¤‡ç¬¬ä¸‰æ–¹æ¨¡å‹æœåŠ¡</h2>
<p><code>AutoGLM</code> æ”¯æŒè‡ªå»ºæ¨¡å‹ï¼Œä¹Ÿæ”¯æŒç¬¬ä¸‰æ–¹æ¨¡å‹ã€‚</p>
<p>ä¸ºäº†æ›´å¿«çš„ä½“éªŒåˆ°æ•ˆæœï¼Œæˆ‘ä»¬ç›´æ¥é‡‡ç”¨å®˜æ–¹æ­å»ºçš„<strong>é­”æ­</strong>æœåŠ¡ã€‚</p>
<p>æ³¨å†Œã€ç™»å½•åï¼Œæ‰“å¼€ä»¥ä¸‹é“¾æ¥ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelscope.cn%2Fmodels%2FZhipuAI%2FAutoGLM-Phone-9B" target="_blank" title="https://modelscope.cn/models/ZhipuAI/AutoGLM-Phone-9B" ref="nofollow noopener noreferrer">modelscope.cn/models/Zhipâ€¦</a></p>
<p>ç‚¹å‡»ä¸‹å›¾ä½ç½®æŸ¥çœ‹ä»£ç èŒƒä¾‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebbebdd209f44659a7d93c062064ccdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=3t2ZJiTRPz7l32FeteF0TnRhfhQ%3D" alt="" loading="lazy"/></p>
<p>ä¿å­˜å¦‚å›¾çº¢æ¡†å†…çš„<code>api_key</code>ï¼Œåç»­è¦ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62d111c2d5d8459ca185fb007882e063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=diYpRtVd4PH%2FKW8pl81S0cfrMR4%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©é­”æ­å¹³å°æ˜¯å› ä¸ºæ³¨å†Œåæ¯å¤©éƒ½æœ‰ 2000 é¢åº¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc9040cd2cd64d0696723f6505809a42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=TsrXSKy%2BEbWoMrecIR14Fs6ppJY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">å®æ“è®°å½•</h2>
<h3 data-id="heading-3">æ£€å‡º AutoGLM æºç </h3>
<p>ç›´æ¥ä½¿ç”¨ <code>SOLO</code> æ£€å‡º Git ä»“åº“ã€‚</p>
<p>åœ°å€ï¼š<code>https://codeload.github.com/zai-org/Open-AutoGLM/zip/refs/heads/main</code>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/230408f520d44884a314caa491e17e33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=aMV3DVYUcrp4MdG12vONQDxqsY4%3D" alt="" loading="lazy"/></p>
<p>æ£€å‡ºåæ‰“å¼€é¡¹ç›®æºç ï¼Œåç»­æ“ä½œå¯åœ¨ <code>SOLO</code> ç»ˆç«¯ä¸‹ç›´æ¥è¿›è¡Œã€‚</p>
<p>åŒä¸€ç•Œé¢æ“ä½œâ€œå‘½ä»¤â€+â€œæ–‡ä»¶ç®¡ç†â€ï¼Œè¿˜æ˜¯æŒºæ–¹ä¾¿çš„ã€‚</p>
<p>å°¤å…¶æ˜¯å®‰è£…è¿‡ç¨‹å¦‚æœå‡ºç°é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ä¸€é”®å‘ç»™ AI å°±èƒ½è§£å†³ã€‚</p>
<h3 data-id="heading-4">å®‰è£… Python ç¯å¢ƒ</h3>
<p>è¿‡ç¨‹ä¸åœ¨èµ˜è¿°ï¼Œå®˜æ–¹å»ºè®® <code>Python 3.10</code> åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå°½é‡ä¿è¯ã€‚</p>
<h3 data-id="heading-5">å®‰è£… ADB</h3>
<p><strong>ç¬¬1æ­¥</strong>ï¼Œä¸‹è½½ <code>ADB</code>ã€‚</p>
<p>åœ°å€ï¼š<code>https://developer.android.com/tools/releases/platform-tools?hl=zh-cn</code>ã€‚</p>
<p><strong>ç¬¬2æ­¥</strong>ï¼Œè§£å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/574a330acf81460885a174a35a85e639~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=G6Bf8ssOQ%2FkhsQ5m3D0dx5WNbvQ%3D" alt="" loading="lazy"/></p>
<p><strong>ç¬¬3æ­¥</strong>ï¼Œå°†è§£å‹è·¯å¾„é…ç½®åˆ° Path ç¯å¢ƒå˜é‡ä¸­ã€‚ä¸‹å›¾æ˜¯ Windows é…ç½®æ–¹å¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4788c64bbf2d44bca69aea6b3149ac8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=stMQbRPgPJx426EZgCCImbELdo8%3D" alt="" loading="lazy"/></p>
<p><strong>ç¬¬4æ­¥</strong>ï¼Œç›´æ¥åœ¨ <code>SOLO</code> ç»ˆç«¯ä¸­è¾“å…¥<code>adb --version</code>éªŒè¯æ˜¯å¦é…ç½®æˆåŠŸã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼Œå³è¡¨æ˜å·²é…ç½®æˆåŠŸã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b755fd95111461a9d09c9c9d5827eba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=Umk1SWAXjgqII4wHhkRF2mDdUdU%3D" alt="" loading="lazy"/></p>
<p>æ­¤å¤„éœ€è¦æ³¨æ„ï¼Œ<code>Windows</code> ä¸‹å¯èƒ½éœ€è¦æ–°å¼€ç»ˆç«¯ï¼Œæˆ–è€…é‡å¯ <code>TRAE</code> çš„æƒ…å†µã€‚</p>
<h3 data-id="heading-6">æ‰‹æœºè®¾ç½® USB è°ƒè¯•</h3>
<p><strong>ç¬¬1æ­¥</strong>ï¼Œå¯ç”¨å¼€å‘è€…æ¨¡å¼ã€‚</p>
<p>é€šå¸¸å¯ç”¨æ–¹æ³•æ˜¯ï¼Œæ‰¾åˆ° <code>è®¾ç½®-å…³äºæ‰‹æœº-ç‰ˆæœ¬å·</code> ç„¶åè¿ç»­å¿«é€Ÿç‚¹å‡» 10 æ¬¡å·¦å³ï¼Œç›´åˆ°å¼¹å‡ºå¼¹çª—æ˜¾ç¤ºâ€œå¼€å‘è€…æ¨¡å¼å·²å¯ç”¨â€ã€‚</p>
<p>ä¸åŒæ‰‹æœºä¼šæœ‰äº›è®¸å·®åˆ«ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå¯ä»¥ä¸Šç½‘æœç´¢ä¸€ä¸‹ç›¸å…³å‹å·æ•™ç¨‹ã€‚</p>
<p><strong>ç¬¬2æ­¥</strong>ï¼Œåœ¨â€œå¼€å‘äººå‘˜é€‰é¡¹â€ä¸­æ‰“å¼€â€œUSBè°ƒè¯•â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c1f822349464449a9f07eb5badf78d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=u1HzO3fKf2hTxbHtbjdQQkZRH7s%3D" alt="" loading="lazy"/></p>
<p><strong>ç¬¬3æ­¥</strong>ï¼ŒéªŒè¯ã€‚</p>
<p>ç›´æ¥è¾“å…¥<code>adb devices</code>ï¼Œå¦‚ä¸‹å›¾æ˜¾ç¤ºâ€œè®¾å¤‡IDâ€å’Œâ€œdeviceâ€åˆ™ä¸ºé€šè¿‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c7c61512bef47e3b765d3b97ddd89d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=k%2B8KGGrEVCsUPl3aZMiuzq0Jy%2F0%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœå¦‚ä¸‹å›¾æ˜¾ç¤º <code>unauthorized</code>ï¼Œåˆ™è¡¨æ˜â€œUSBè°ƒè¯•â€æˆæƒæœªç¡®è®¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41db7dc788b1421f9a51bf628befcd9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=i2TFcYSSBD96Jl1kHz97UYdAcpQ%3D" alt="" loading="lazy"/></p>
<p>éœ€è¦é‡æ–°æ‰“å¼€ â€œUSBè°ƒè¯•â€ï¼Œæˆ–è€…æ’æ‹” USB çº¿ï¼Œå¹¶ç¡®è®¤åŒæ„æˆæƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6eca8becc1c423a91f8f76d492fb72f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=o5XZ8cqEiOjuITSIFW92YT5w3e8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">å®‰è£… ADB Keyboard</h3>
<p><code>ADB Keyboard</code> æ˜¯ä¸€æ¬¾è™šæ‹Ÿé”®ç›˜ï¼Œå®ƒå¯ä»¥è®© <code>adb</code> å‘åº”ç”¨ä¸­è¾“å…¥æ–‡æœ¬ã€‚</p>
<p><strong>ç¬¬1æ­¥</strong>ï¼Œä¸‹è½½ <code>ADB Keyboard</code>ã€‚</p>
<p>åœ°å€ï¼š<code>https://github.com/senzhk/ADBKeyBoard/blob/master/ADBKeyboard.apk</code>ã€‚</p>
<p><strong>ç¬¬2æ­¥</strong>ï¼Œä¸‹è½½åï¼Œéœ€è¦åœ¨æ–‡ä»¶ç®¡ç†ä¸­æ‰¾åˆ°å¹¶è¿›è¡Œå®‰è£…ã€‚</p>
<p>æ³¨æ„ï¼šå›½å†…æ‰‹æœºå®‰è£…è¿‡ç¨‹ç”±äºéæ‰‹æœºåº”ç”¨å•†åº—æ¸ é“ï¼Œå®‰è£…è¿‡ç¨‹æ¯”è¾ƒæ›²æŠ˜ã€‚</p>
<p>æ¯”å¦‚æˆ‘çš„è£è€€æ‰‹æœºï¼Œåº•éƒ¨ä¸¤ä¸ªæŒ‰é’®éƒ½ä¸è¡Œï¼Œåº”è¯¥ç‚¹å‡»ä¸­é—´çš„â€œå…è®¸æœ¬æ¬¡å®‰è£…â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0921d9fdab0e4b4b934000c31288f65d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=gc%2Fxf0DgnUp2zC7TjktZHUQIiZU%3D" alt="" loading="lazy"/></p>
<p><strong>ç¬¬3æ­¥</strong>ï¼Œå®‰è£…åï¼Œéœ€è¦åˆ° <code>è®¾ç½®-è¾“å…¥æ³•</code> æˆ–è€… <code>è®¾ç½®-é”®ç›˜åˆ—è¡¨</code> ä¸­å¯ç”¨ <code>ADB Keyboard</code> æ‰èƒ½ç”Ÿæ•ˆã€‚</p>
<p>è£è€€æ‰‹æœºè®¾ç½®ç•Œé¢å¦‚ä¸‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf5b3eabf087441196d066eae24bcc27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=2BNe0kz5EVt5hQZDXB%2FHCdfpqPU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">ç¤ºä¾‹è°ƒç”¨</h3>
<p><strong>ç¬¬1æ­¥</strong>ï¼Œè¿›å…¥é¡¹ç›®æ ¹è·¯å¾„ï¼Œå®‰è£…é¡¹ç›®ä¾èµ–ã€‚</p>
<pre><code class="hljs language-erlang" lang="erlang">pip install -r requirements.txt
pip install -e .
</code></pre>
<p><strong>ç¬¬2æ­¥</strong>ï¼Œåœ¨é¡¹ç›®æ ¹è·¯å¾„ï¼Œæ‰§è¡Œä¸‹é¢çš„è„šæœ¬ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ ModelScope</span>
python main.py --base-url https://api-inference.modelscope.cn/v1 --model <span class="hljs-string">"ZhipuAI/AutoGLM-Phone-9B"</span> --apikey <span class="hljs-string">"your-modelscope-api-key"</span> <span class="hljs-string">"æ‰“å¼€ç¾å›¢ï¼Œå¸®æˆ‘ä¸‹å•ä¸€ä»½æ­£æ–°é¸¡æ’"</span>
</code></pre>
<p>ä¸ºäº†å¤§å®¶æ›´åŠ ç›´è§‚çš„ä½“ä¼šï¼Œç»™å¤§å®¶çœ‹ä¸‹æ“ä½œå½•å±ï¼ˆ4å€é€Ÿæ’­æ”¾ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/256ef55486084da6b9aeac874b5ed96e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=BjtaI9Lfo2Gl4TDhSITOpoebKkQ%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯è„šæœ¬æ‰§è¡Œçš„æ—¥å¿—è®°å½•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3095a3c60b24c1b8e571f4201317cbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766151042&amp;x-signature=LbfNIHs3MzUUv9m3KKlYWxrJfO4%3D" alt="" loading="lazy"/></p>
<p>æ•´ä½“è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒæµç•…çš„ã€‚</p>
<h2 data-id="heading-9">å¸¸è§é—®é¢˜</h2>
<p>æˆ‘ç¢°åˆ°çš„é—®é¢˜åœ¨ä¸Šé¢çš„è¿‡ç¨‹ä¸­å·²ç»åŒæ­¥ä»‹ç»äº†ï¼Œè¿˜æœ‰ä¸€äº›å®˜ç½‘æ•´ç†çš„å…¶å®ƒé—®é¢˜æˆ‘æ”¾åœ¨ä¸‹é¢äº†ï¼Œæ–¹ä¾¿å¿«é€ŸæŸ¥æ‰¾è§£å†³ã€‚</p>
<h3 data-id="heading-10">è®¾å¤‡æœªæ‰¾åˆ°</h3>
<p>å°è¯•é€šè¿‡é‡å¯ ADB æœåŠ¡æ¥è§£å†³ï¼š</p>
<pre><code class="hljs language-vbscript" lang="vbscript">adb kill-<span class="hljs-built_in">server</span>
adb start-<span class="hljs-built_in">server</span>
adb devices
</code></pre>
<p>å¦‚æœä»ç„¶æ— æ³•è¯†åˆ«ï¼Œè¯·æ£€æŸ¥ï¼š</p>
<ol>
<li>USB è°ƒè¯•æ˜¯å¦å·²å¼€å¯</li>
<li>æ•°æ®çº¿æ˜¯å¦æ”¯æŒæ•°æ®ä¼ è¾“(éƒ¨åˆ†æ•°æ®çº¿ä»…æ”¯æŒå……ç”µ)</li>
<li>æ‰‹æœºä¸Šå¼¹å‡ºçš„æˆæƒæ¡†æ˜¯å¦å·²ç‚¹å‡»ã€Œå…è®¸ã€</li>
<li>å°è¯•æ›´æ¢ USB æ¥å£æˆ–æ•°æ®çº¿</li>
</ol>
<h3 data-id="heading-11">èƒ½æ‰“å¼€åº”ç”¨ï¼Œä½†æ— æ³•ç‚¹å‡»</h3>
<p>éƒ¨åˆ†æœºå‹éœ€è¦åŒæ—¶å¼€å¯ä¸¤ä¸ªè°ƒè¯•é€‰é¡¹æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼š</p>
<ul>
<li>USB è°ƒè¯•</li>
<li>USB è°ƒè¯•(å®‰å…¨è®¾ç½®)</li>
</ul>
<p>è¯·åœ¨ <code>è®¾ç½® â†’ å¼€å‘è€…é€‰é¡¹</code> ä¸­æ£€æŸ¥è¿™ä¸¤ä¸ªé€‰é¡¹æ˜¯å¦éƒ½å·²å¯ç”¨ã€‚</p>
<h3 data-id="heading-12">æ–‡æœ¬è¾“å…¥ä¸å·¥ä½œ</h3>
<ol>
<li>ç¡®ä¿è®¾å¤‡å·²å®‰è£… <code>ADB Keyboard</code></li>
<li>åœ¨è®¾ç½® &gt; ç³»ç»Ÿ &gt; è¯­è¨€å’Œè¾“å…¥æ³• &gt; è™šæ‹Ÿé”®ç›˜ ä¸­å¯ç”¨</li>
<li>Agent ä¼šåœ¨éœ€è¦è¾“å…¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ° ADB Keyboard</li>
</ol>
<h3 data-id="heading-13">æˆªå›¾å¤±è´¥(é»‘å±)</h3>
<p>è¿™é€šå¸¸æ„å‘³ç€åº”ç”¨æ­£åœ¨æ˜¾ç¤ºæ•æ„Ÿé¡µé¢(æ”¯ä»˜ã€å¯†ç ã€é“¶è¡Œç±»åº”ç”¨)ã€‚Agent ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶è¯·æ±‚äººå·¥æ¥ç®¡ã€‚</p>
<h3 data-id="heading-14">windows ç¼–ç å¼‚å¸¸é—®é¢˜</h3>
<p>æŠ¥é”™ä¿¡æ¯å½¢å¦‚ <code>UnicodeEncodeError gbk code</code></p>
<p>è§£å†³åŠæ³•: åœ¨è¿è¡Œä»£ç çš„å‘½ä»¤å‰é¢åŠ ä¸Šç¯å¢ƒå˜é‡: <code>PYTHONIOENCODING=utf-8</code></p>
<h3 data-id="heading-15">äº¤äº’æ¨¡å¼éTTYç¯å¢ƒæ— æ³•ä½¿ç”¨</h3>
<p>æŠ¥é”™å½¢å¦‚: <code>EOF when reading a line</code></p>
<p>è§£å†³åŠæ³•: ä½¿ç”¨éäº¤äº’æ¨¡å¼ç›´æ¥æŒ‡å®šä»»åŠ¡, æˆ–è€…åˆ‡æ¢åˆ° TTY æ¨¡å¼çš„ç»ˆç«¯åº”ç”¨ã€‚</p>
<h2 data-id="heading-16">ç»“è¯­</h2>
<p>å½“ç„¶ï¼Œé‡åˆ° UI ç‰¹åˆ«â€œä¸ªæ€§â€çš„åº—é“ºï¼ŒAI è¿˜æ˜¯ä¼šå¡å£³â€”â€”ä½†å®ƒå·²ç»èƒ½ç¨³ç¨³å¸®æˆ‘æœé¸¡æ’ã€åŠ è´­ç‰©è½¦äº†ã€‚</p>
<p>ä»â€œä¸€å¥è¯â€åˆ°â€œè‡ªåŠ¨æ“ä½œâ€ï¼ŒAI ä¸å†åªæ˜¯å†™æ–‡æ¡ˆã€ç­”é—®é¢˜çš„å·¥å…·ï¼Œè€Œæ˜¯çœŸæ­£å¼€å§‹æ›¿æˆ‘ä»¬åŠ¨æ‰‹å¹²æ´»ï¼Œå®å®åœ¨åœ¨åœ°æå‡ç”Ÿæ´»æ•ˆç‡äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.js SSR é¡¹ç›®ç”Ÿäº§éƒ¨ç½²å…¨æ”»ç•¥]]></title>    <link>https://juejin.cn/post/7582809606066913306</link>    <guid>https://juejin.cn/post/7582809606066913306</guid>    <pubDate>2025-12-12T12:14:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582809606066913306" data-draft-id="7582791876366794790" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.js SSR é¡¹ç›®ç”Ÿäº§éƒ¨ç½²å…¨æ”»ç•¥"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js,Trae"/> <meta itemprop="datePublished" content="2025-12-12T12:14:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.js SSR é¡¹ç›®ç”Ÿäº§éƒ¨ç½²å…¨æ”»ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T12:14:42.000Z" title="Fri Dec 12 2025 12:14:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>Next.js æ˜¯ React ç”Ÿæ€ä¸­éå¸¸æµè¡Œçš„å‰ç«¯æ¡†æ¶ï¼Œæ”¯æŒ <strong>SSRï¼ˆServer-Side Renderingï¼‰</strong>ã€<strong>API è·¯ç”±</strong> å’Œ <strong>é™æ€ç”Ÿæˆ</strong>ã€‚åœ¨å¼€å‘é˜¶æ®µï¼ŒNext.js å¯ä»¥é€šè¿‡ <code>next dev</code> è¿è¡Œï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ‰“åŒ…å¹¶éƒ¨ç½² SSR æœåŠ¡ã€‚æœ¬æ–‡å°†ä»‹ç»å®Œæ•´çš„ <strong>Next.js SSR ç”Ÿäº§éƒ¨ç½²æµç¨‹</strong>ï¼Œé€‚ç”¨äº 1Panel æˆ– VPS æœåŠ¡å™¨ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ æœ¬åœ°å‡†å¤‡</h2>
<p>å‡è®¾ä½ çš„ Next.js é¡¹ç›®ç›®å½•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-built_in">package</span>.json
<span class="hljs-built_in">package</span>-lock.json / yarn.lock
pages/
public/
components/
<span class="hljs-built_in">next</span>.<span class="hljs-built_in">config</span>.js
node_modules/
</code></pre>
<blockquote>
<p>SSR é¡¹ç›®éœ€è¦ Node.js åç«¯æ”¯æŒï¼Œå› æ­¤ç”Ÿäº§ç¯å¢ƒå¿…é¡»æœ‰ Node.js ç¯å¢ƒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€å®‰è£…ä¾èµ–</h2>
<p>å¦‚æœä½¿ç”¨ npmï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install
</code></pre>
<p>å¦‚æœä½¿ç”¨ yarnï¼š</p>
<pre><code class="hljs language-bash" lang="bash">yarn install
</code></pre>
<blockquote>
<p>ç¡®ä¿ä¾èµ–å®Œæ•´ï¼Œå°¤å…¶æ˜¯ <code>next</code>ã€<code>react</code> å’Œ <code>react-dom</code>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ æ„å»ºç”Ÿäº§ç‰ˆæœ¬</h2>
<p>Next.js æä¾› <code>next build</code> å‘½ä»¤ç”Ÿæˆç”Ÿäº§æ„å»ºäº§ç‰©ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm run build
<span class="hljs-comment"># æˆ–è€…</span>
yarn build
</code></pre>
<ul>
<li>ä¼šç”Ÿæˆ <code>.next/</code> ç›®å½•ï¼ŒåŒ…å« SSR æ‰€éœ€æ–‡ä»¶</li>
<li>æ„å»ºå®Œæˆåå¯ä»¥é€šè¿‡ <code>next start</code> å¯åŠ¨ç”Ÿäº§æœåŠ¡</li>
</ul>
<hr/>
<h2 data-id="heading-3">å››ã€ æµ‹è¯•ç”Ÿäº§ç¯å¢ƒï¼ˆå¯é€‰ï¼‰</h2>
<pre><code class="hljs language-bash" lang="bash">npm start
<span class="hljs-comment"># æˆ–è€…</span>
yarn start
</code></pre>
<ul>
<li>é»˜è®¤ç«¯å£ <code>3000</code></li>
<li>ç¡®è®¤ SSR é¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®</li>
</ul>
<hr/>
<h2 data-id="heading-4">äº”ã€å‡†å¤‡ä¸Šä¼ æ–‡ä»¶</h2>
<p>ç”Ÿäº§éƒ¨ç½²è‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">package.json
package-<span class="hljs-keyword">lock</span>.json / yarn.<span class="hljs-keyword">lock</span>
.next/        <span class="hljs-meta"># SSR æ„å»ºäº§ç‰©</span>
<span class="hljs-keyword">public</span>/       <span class="hljs-meta"># é™æ€èµ„æº</span>
node_modules/ <span class="hljs-meta"># å¯ä¸Šä¼ ï¼Œä¹Ÿå¯æœåŠ¡å™¨å®‰è£…</span>
</code></pre>
<blockquote>
<p>å¯ä»¥æ‰“åŒ…æˆ ZIP ä¸Šä¼ ï¼š</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">zip -r next-prod.zip package.json package-lock.json .next public .<span class="hljs-built_in">env</span>
</code></pre>
<hr/>
<h2 data-id="heading-5">å…­ã€ä¸Šä¼ åˆ°æœåŠ¡å™¨ / 1Panel</h2>
<ul>
<li><strong>1Panel</strong>ï¼šç›´æ¥ä¸Šä¼  ZIP æˆ– Git å…‹éš†é¡¹ç›®</li>
<li><strong>VPS / äº‘æœåŠ¡å™¨</strong>ï¼šé€šè¿‡ <code>scp</code> ä¸Šä¼ </li>
</ul>
<pre><code class="hljs language-bash" lang="bash">scp next-prod.zip user@yourserver:/path/to/app
ssh user@yourserver
unzip next-prod.zip -d next-app
<span class="hljs-built_in">cd</span> next-app
</code></pre>
<hr/>
<h2 data-id="heading-6">ä¸ƒã€å®‰è£…ç”Ÿäº§ä¾èµ–ï¼ˆå¦‚æœæœªä¸Šä¼  node_modulesï¼‰</h2>
<pre><code class="hljs language-bash" lang="bash">npm install --production
<span class="hljs-comment"># æˆ–è€…</span>
yarn install --production
</code></pre>
<blockquote>
<p>SSR ç”Ÿäº§ç¯å¢ƒåªéœ€è¦å®‰è£… <code>dependencies</code>ï¼Œä¸éœ€è¦ devDependencies</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">å…«ã€é…ç½®ç¯å¢ƒå˜é‡</h2>
<p>Next.js SSR é¡¹ç›®å¸¸ç”¨ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">NODE_ENV</span>=production
<span class="hljs-attr">PORT</span>=<span class="hljs-number">3000</span>
<span class="hljs-attr">NEXT_PUBLIC_API_URL</span>=https://api.example.com
</code></pre>
<blockquote>
<p>å¯ä»¥åœ¨æœåŠ¡å™¨ç¯å¢ƒä¸­è®¾ç½®ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>.env.production</code> æ–‡ä»¶</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ä¹ã€å¯åŠ¨ç”Ÿäº§ SSR æœåŠ¡</h2>
<h3 data-id="heading-9">æ–¹å¼ä¸€ï¼šç›´æ¥ Node.js</h3>
<pre><code class="hljs language-bash" lang="bash">npm start
<span class="hljs-comment"># æˆ–è€…</span>
yarn start
</code></pre>
<ul>
<li>è®¿é—® <code>http://ä½ çš„åŸŸåæˆ–å…¬ç½‘IP:3000</code></li>
<li>é¡µé¢ç”±æœåŠ¡å™¨æ¸²æŸ“å¹¶è¿”å› HTMLï¼ˆSSRï¼‰</li>
</ul>
<h3 data-id="heading-10">æ–¹å¼äºŒï¼šPM2 å®ˆæŠ¤</h3>
<pre><code class="hljs language-bash" lang="bash">npm install -g pm2
pm2 start npm --name <span class="hljs-string">"next-app"</span> -- start
pm2 save
pm2 startup
</code></pre>
<ul>
<li>ä¿è¯æœåŠ¡å™¨é‡å¯åè‡ªåŠ¨å¯åŠ¨</li>
<li>æä¾›æ—¥å¿—ç®¡ç†å’Œè¿›ç¨‹ç›‘æ§</li>
</ul>
<h3 data-id="heading-11">æ–¹å¼ä¸‰ï¼šDocker éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰</h3>
<p><strong>Dockerfile ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile">FROM node:20-alpine

WORKDIR /app
COPY package*.json ./
RUN npm install --production
COPY . .
RUN npm run build
CMD ["npm", "start"]
EXPOSE 3000
</code></pre>
<p>æ„å»º &amp; è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker build -t next-app .
docker run -d -p 3000:3000 next-app
</code></pre>
<hr/>
<h2 data-id="heading-12">åã€ å¯é€‰ï¼šNginx åå‘ä»£ç† + HTTPS</h2>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen 80;
    server_name yourdomain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
</code></pre>
<ul>
<li>é…åˆ Let's Encrypt å¯å…è´¹å¯ç”¨ HTTPS</li>
<li>æé«˜å®‰å…¨æ€§ä¸ç¨³å®šæ€§</li>
</ul>
<hr/>
<h2 data-id="heading-13">åä¸€ã€å®Œæ•´éƒ¨ç½²æµç¨‹æ€»ç»“</h2>
<ol>
<li>æœ¬åœ° <code>npm install</code> / <code>yarn install</code></li>
<li><code>npm run build</code> / <code>yarn build</code> ç”Ÿæˆ <code>.next/</code></li>
<li>ä¸Šä¼  <code>.next/</code> + <code>public/</code> + <code>package.json</code> + <code>node_modules</code>ï¼ˆå¯é€‰ï¼‰</li>
<li>æœåŠ¡å™¨å®‰è£…ä¾èµ–ï¼ˆå¦‚éœ€è¦ï¼‰</li>
<li>é…ç½®ç¯å¢ƒå˜é‡</li>
<li>ä½¿ç”¨ <code>npm start</code> / PM2 / Docker å¯åŠ¨</li>
<li>å¯é€‰ Nginx åå‘ä»£ç† + HTTPS</li>
<li>è®¿é—®é¡µé¢ï¼Œç¡®è®¤ SSR æ­£å¸¸æ¸²æŸ“</li>
</ol>
<hr/>
<h2 data-id="heading-14">åäºŒã€ å°æŠ€å·§</h2>
<ul>
<li><strong>ç«¯å£ç®¡ç†</strong>ï¼š1Panel é»˜è®¤åˆ†é…å…¬ç½‘ç«¯å£ï¼Œç¡®ä¿ <code>PORT</code> ä¸ä¹‹åŒ¹é…</li>
<li><strong>å®ˆæŠ¤è¿›ç¨‹</strong>ï¼šPM2 æˆ– Docker ä¿è¯ SSR æœåŠ¡ç¨³å®šè¿è¡Œ</li>
<li><strong>ç¯å¢ƒå˜é‡</strong>ï¼šç”Ÿäº§ç¯å¢ƒå˜é‡ä¸€å®šè¦é…ç½®æ­£ç¡®ï¼Œå¦åˆ™ SSR å¯èƒ½æŠ¥é”™</li>
<li><strong>å®‰å…¨ä¸æ€§èƒ½</strong>ï¼šå»ºè®® Nginx åå‘ä»£ç† + HTTPS</li>
</ul>
<hr/>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å¯ä»¥å¿«é€Ÿå°† <strong>Next.js SSR é¡¹ç›®</strong> æ‰“åŒ…ã€ä¸Šä¼ ï¼Œå¹¶åœ¨ <strong>1Panel æˆ– VPS</strong> ä¸Šè¿è¡Œç”Ÿäº§ç¯å¢ƒï¼Œå®ç°æœåŠ¡ç«¯æ¸²æŸ“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨Git å®ç°Hugoçƒ­æ›´æ–°éƒ¨ç½²æ–¹æ¡ˆï¼ˆé›¶åœæœºã€è‡ªåŠ¨ä¸Šçº¿ï¼‰]]></title>    <link>https://juejin.cn/post/7582814236583084070</link>    <guid>https://juejin.cn/post/7582814236583084070</guid>    <pubDate>2025-12-12T12:15:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582814236583084070" data-draft-id="7582814236583067686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨Git å®ç°Hugoçƒ­æ›´æ–°éƒ¨ç½²æ–¹æ¡ˆï¼ˆé›¶åœæœºã€è‡ªåŠ¨ä¸Šçº¿ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js,Trae"/> <meta itemprop="datePublished" content="2025-12-12T12:15:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨Git å®ç°Hugoçƒ­æ›´æ–°éƒ¨ç½²æ–¹æ¡ˆï¼ˆé›¶åœæœºã€è‡ªåŠ¨ä¸Šçº¿ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T12:15:15.000Z" title="Fri Dec 12 2025 12:15:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>Hugo é™æ€ç½‘ç«™æœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€ï¼Œå°±æ˜¯ <strong>æ„å»ºå¿«ã€éƒ¨ç½²è½»</strong>ã€‚ä½†å¦‚æœä½ å¸Œæœ›åœ¨æ¯æ¬¡æ›´æ–°æ–‡ç« åï¼š</p>
</blockquote>
<ul>
<li>ä¸€æ¡å‘½ä»¤å°±å®Œæˆæ„å»º + éƒ¨ç½²</li>
<li>æœåŠ¡å™¨è‡ªåŠ¨åŒæ­¥æœ€æ–° public æ–‡ä»¶</li>
<li>æ•´ä¸ªè¿‡ç¨‹ä¸éœ€è¦ç™»å½•æœåŠ¡å™¨</li>
<li>ä¹Ÿä¸éœ€è¦ CI/CD æˆ–é¢å¤–å·¥å…·</li>
</ul>
<p>é‚£ä¹ˆ <strong>åŸºäº Git çš„ Hugo Public ç›®å½•çƒ­æ›´æ–°æ–¹æ¡ˆ</strong> æ˜¯æœ€è½»é‡ã€æœ€ç¨³å®šçš„éƒ¨ç½²æ–¹å¼ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« å°†å®Œæ•´ä»‹ç»å¦‚ä½•ä½¿ç”¨ Git å°† Hugo çš„ public ç›®å½•æ¨é€åˆ°æœåŠ¡å™¨ï¼Œå¹¶é€šè¿‡æœåŠ¡å™¨ç«¯ hook å®ç°<strong>çƒ­æ›´æ–°è‡ªåŠ¨ä¸Šçº¿</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦ç”¨ Git éƒ¨ç½² Hugo ï¼Ÿ</h2>
<p>Hugo çš„ public ç›®å½•åªæ˜¯çº¯é™æ€æ–‡ä»¶ï¼Œéƒ¨ç½²å¯ä»¥éå¸¸ç®€å•ï¼š</p>
<ul>
<li>ä¸éœ€è¦ Nginx reload</li>
<li>ä¸éœ€è¦é‡å¯æœåŠ¡</li>
<li>ä¸éœ€è¦ build æœåŠ¡å™¨</li>
<li>ç”šè‡³ä¸éœ€è¦ ssh ç™»å½•</li>
</ul>
<p>åªè¦ push ä¸€ä¸‹ï¼Œå°±èƒ½è®©æœåŠ¡å™¨è‡ªåŠ¨åŒæ­¥æœ€æ–° public æ–‡ä»¶ï¼Œå®ç°çœŸæ­£çš„ <strong>Zero-Downtime çƒ­æ›´æ–°</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€æ•´ä½“æ–¹æ¡ˆæ¶æ„</h2>
<pre><code class="hljs language-css" lang="css">æœ¬åœ°ç”µè„‘
â”œâ”€â”€ Hugo é¡¹ç›®
â”‚    â”œâ”€â”€ <span class="hljs-attribute">content</span>/
â”‚    â”œâ”€â”€ themes/
â”‚    â”œâ”€â”€ public/ â† æ„å»ºåç›®å½•
â”‚
â””â”€â”€ git push deploy <span class="hljs-selector-tag">main</span>
            â†“
æœåŠ¡å™¨
â””â”€â”€ /<span class="hljs-selector-tag">var</span>/repo/hugo_public<span class="hljs-selector-class">.git</span> (bare repo)
            â†“ post-receive hook è‡ªåŠ¨è§¦å‘
â””â”€â”€ /<span class="hljs-selector-tag">var</span>/www/website    â† ç½‘ç«™æ ¹ç›®å½•ï¼ˆçƒ­æ›´æ–°ï¼‰
</code></pre>
<p>æµç¨‹ï¼š</p>
<ol>
<li>æœ¬åœ°æ‰§è¡Œï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">hugo &amp;&amp; git push deploy main
</code></pre>
<ol start="2">
<li>push åˆ°æœåŠ¡å™¨çš„ bare ä»“åº“ï¼ˆæ²¡æœ‰å·¥ä½œåŒºï¼‰</li>
<li>æœåŠ¡å™¨è§¦å‘ <code>post-receive</code> hook</li>
<li>è‡ªåŠ¨ checkout æœ€æ–° public æ–‡ä»¶åˆ° <code>/var/www/website</code></li>
<li>ç½‘ç«™ç«‹å³æ›´æ–°ï¼ˆé›¶åœæœºï¼‰</li>
</ol>
<hr/>
<h2 data-id="heading-2">äºŒã€æœåŠ¡å™¨åˆå§‹åŒ–éƒ¨ç½²ä»“åº“ï¼ˆbare repoï¼‰</h2>
<p>æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p /var/repo
<span class="hljs-built_in">cd</span> /var/repo
git init --bare hugo_public.git
</code></pre>
<p>è®¾ç½®é»˜è®¤ä¸»åˆ†æ”¯ï¼ˆé¿å… â€œbranch yet to be bornâ€ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> hugo_public.git
git symbolic-ref HEAD refs/heads/main
</code></pre>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€é…ç½® post-receive è‡ªåŠ¨éƒ¨ç½²è„šæœ¬</h2>
<p>ç¼–è¾‘ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/var/repo/hugo_public.git/hooks/post-receive
</code></pre>
<p>å†…å®¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">set</span> -e

<span class="hljs-built_in">echo</span> <span class="hljs-string">"&gt;&gt;&gt; æ­£åœ¨éƒ¨ç½² Hugo é™æ€æ–‡ä»¶..."</span>

WORK_TREE=/var/www/website
GIT_DIR=/var/repo/hugo_public.git

<span class="hljs-comment"># è‡ªåŠ¨åˆ›å»º main åˆ†æ”¯ï¼ˆé¦–æ¬¡éƒ¨ç½²ä¸ä¼šå¤±è´¥ï¼‰</span>
<span class="hljs-keyword">if</span> ! git rev-parse --verify main &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    git checkout -b main
<span class="hljs-keyword">fi</span>

git --work-tree=<span class="hljs-variable">$WORK_TREE</span> --git-dir=<span class="hljs-variable">$GIT_DIR</span> checkout -f main

<span class="hljs-built_in">echo</span> <span class="hljs-string">"&gt;&gt;&gt; éƒ¨ç½²å®Œæˆï¼"</span>
</code></pre>
<p>èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x /var/repo/hugo_public.git/hooks/post-receive
</code></pre>
<hr/>
<h2 data-id="heading-4">å››ã€æœ¬åœ°é…ç½® deploy è¿œç¨‹ä»“åº“</h2>
<p>è¿›å…¥ Hugo é¡¹ç›®ç›®å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> public
git init
git add .
git commit -m <span class="hljs-string">"init public"</span>
</code></pre>
<p>æ·»åŠ æœåŠ¡å™¨åœ°å€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git remote add deploy ssh://ubuntu@æœåŠ¡å™¨IP/var/repo/hugo_public.git
</code></pre>
<hr/>
<h2 data-id="heading-5">äº”ã€å‘å¸ƒæµç¨‹ï¼šä¸€æ¡å‘½ä»¤å®Œæˆæ„å»º + éƒ¨ç½²</h2>
<p>ä½ å¯ä»¥ç›´æ¥ç”¨ä¸¤æ®µå¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">hugo
<span class="hljs-built_in">cd</span> public
git add .
git commit -m <span class="hljs-string">"update"</span>
git push deploy main
</code></pre>
<p>æˆ–è€…æŠŠå®ƒåˆæˆä¸€ä¸ªå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">hugo &amp;&amp; (<span class="hljs-built_in">cd</span> public &amp;&amp; git add . &amp;&amp; git commit -m <span class="hljs-string">"update"</span> &amp;&amp; git push deploy main)
</code></pre>
<p>æœåŠ¡å™¨è‡ªåŠ¨æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">&gt;&gt;&gt; </span>æ­£åœ¨éƒ¨ç½² Hugo é™æ€æ–‡ä»¶...
<span class="hljs-meta">&gt;&gt;&gt; </span>éƒ¨ç½²å®Œæˆï¼
</code></pre>
<p>ç½‘ç«™ç§’çº§æ›´æ–°</p>
<hr/>
<h2 data-id="heading-6">å…­ã€æ–¹æ¡ˆä¼˜åŠ¿ï¼ˆä¸ºä»€ä¹ˆè¯´è¿™æ˜¯â€œçƒ­æ›´æ–°â€ï¼Ÿï¼‰</h2>

































<table><thead><tr><th>ä¼˜åŠ¿</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸŸ¢ é›¶åœæœº</td><td>é™æ€æ–‡ä»¶ç›´æ¥è¦†ç›–ï¼Œæ— éœ€ reload</td></tr><tr><td>ğŸŸ¢ ä¸éœ€ç™»å½•æœåŠ¡å™¨</td><td>æ‰€æœ‰æ“ä½œæœ¬åœ° push å®Œæˆ</td></tr><tr><td>ğŸŸ¢ ä¸éœ€ CI/CD</td><td>æ—  GitHub Actions / GitLab Runner</td></tr><tr><td>ğŸŸ¢ å®‰å…¨</td><td>ä»…å¼€æ”¾ SSH</td></tr><tr><td>ğŸŸ¢ é«˜é€Ÿ</td><td>Hugo æ„å»º + Git push æå¿«</td></tr><tr><td>ğŸŸ¢ å¯å›æ»š</td><td>æœåŠ¡å™¨ public ç›®å½•æœ‰å®Œæ•´ Git å†å²</td></tr></tbody></table>
<p>è¿™æ˜¯éƒ¨ç½² Hugo æœ€è½»ä¾¿ã€æœ€ä¼˜é›…çš„æ–¹æ³•ä¹‹ä¸€ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸ƒã€æ€»ç»“</h2>
<p>æœ¬æ–¹æ¡ˆçš„æ ¸å¿ƒé€»è¾‘ï¼š</p>
<ul>
<li><strong>æœ¬åœ° push public â†’ æœåŠ¡å™¨è‡ªåŠ¨ checkout</strong></li>
<li>åˆ©ç”¨ bare ä»“åº“ + hook</li>
<li>å®Œæ•´çš„ç‰ˆæœ¬æ§åˆ¶</li>
<li>çƒ­æ›´æ–°ã€é›¶åœæœº</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨è¿è¥åšå®¢ã€æ–‡æ¡£ç«™ã€äº§å“å®˜ç½‘ï¼Œè¿™æ˜¯ç›®å‰æœ€å¼ºçš„ Hugo ç§æœ‰éƒ¨ç½²æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘åªæ˜¯ç»™Typescriptæä¸ª typo PRï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç­¾åè®®ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582815307438899251</link>    <guid>https://juejin.cn/post/7582815307438899251</guid>    <pubDate>2025-12-12T12:37:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582815307438899251" data-draft-id="7582791876366925862" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘åªæ˜¯ç»™Typescriptæä¸ª typo PRï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç­¾åè®®ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-12T12:37:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘åªæ˜¯ç»™Typescriptæä¸ª typo PRï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç­¾åè®®ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T12:37:26.000Z" title="Fri Dec 12 2025 12:37:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç¬¬ä¸€æ¬¡ç»™å¤§å…¬å¸çš„å¼€æºé¡¹ç›®ï¼ˆTypescriptï¼‰æ PRï¼Œæäº¤å®Œ GitHub å°±å¼¹å‡ºä¸€æ¡è¯„è®ºï¼Œè®©ä½ ç­¾ä»€ä¹ˆ CLAï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@microsoft-github-policy-service</span> agree
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1c7cfda38004181a2d1b742430fb438~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766147846&amp;x-signature=EtgI5%2F0rBmnOeH01x58cf4cmHdo%3D" alt="image.png" loading="lazy"/>
ä»€ä¹ˆç©æ„å„¿ï¼Ÿæˆ‘å°±æ”¹äº†ä¸ªæ‹¼å†™é”™è¯¯ï¼Œè¿˜è¦ç­¾åè®®ï¼Ÿ</p>
<h2 data-id="heading-0">CLA æ˜¯ä»€ä¹ˆ</h2>
<p>CLAï¼Œå…¨ç§° Contributor License Agreementï¼Œç¿»è¯‘è¿‡æ¥å«"è´¡çŒ®è€…è®¸å¯åè®®"ã€‚</p>
<p>ç®€å•è¯´ï¼Œå°±æ˜¯ä¸€ä»½æ³•å¾‹æ–‡ä»¶ï¼Œä½ ç­¾äº†ä¹‹åï¼Œå°±æˆæƒé¡¹ç›®æ–¹å¯ä»¥åˆæ³•ä½¿ç”¨ä½ è´¡çŒ®çš„ä»£ç ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸œè¥¿</h2>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼š</p>
<p>å¼ ä¸‰ç»™æŸå¼€æºé¡¹ç›®æäº†ä¸ª PRï¼Œåˆå¹¶äº†ã€‚è¿‡äº†ä¸¤å¹´ï¼Œå¼ ä¸‰çªç„¶è·³å‡ºæ¥è¯´ï¼š"è¿™æ®µä»£ç æ˜¯æˆ‘å†™çš„ï¼Œä½ ä»¬ç”¨äº†æˆ‘çš„ä»£ç ï¼Œä¾µçŠ¯æˆ‘ç‰ˆæƒï¼Œèµ”é’±ï¼"</p>
<p>é¡¹ç›®æ–¹ä¸€è„¸æ‡µï¼šä»£ç æ˜¯ä½ è‡ªå·±æäº¤çš„å•Šï¼Ÿ</p>
<p>å¼ ä¸‰ï¼šæäº¤å½’æäº¤ï¼Œæˆ‘æ²¡è¯´æˆæƒä½ ä»¬ç”¨å•Šã€‚</p>
<p>å¬èµ·æ¥åƒç¢°ç“·ï¼Œä½†æ³•å¾‹ä¸Šè¿˜çœŸä¸å¥½è¯´ã€‚æ¯•ç«Ÿä»£ç ç¡®å®æ˜¯å¼ ä¸‰å†™çš„ï¼Œç‰ˆæƒé»˜è®¤å½’ä½œè€…ã€‚</p>
<p>CLA å°±æ˜¯ä¸ºäº†å µè¿™ä¸ªæ¼æ´ã€‚ä½ ç­¾äº† CLAï¼Œå°±ç›¸å½“äºç™½çº¸é»‘å­—å†™æ¸…æ¥šäº†ï¼š</p>
<ul>
<li>è¿™ä»£ç æ˜¯æˆ‘è‡ªå·±å†™çš„ï¼ˆä¸æ˜¯æŠ„çš„ï¼‰</li>
<li>æˆ‘æˆæƒä½ ä»¬ç”¨ã€æ”¹ã€åˆ†å‘</li>
<li>ä»¥åä¸ä¼šåæ‚”æ‰¾ä½ ä»¬éº»çƒ¦</li>
</ul>
<h2 data-id="heading-2">CLA é‡Œå…·ä½“å†™äº†å•¥</h2>
<p>ä»¥å¾®è½¯çš„ CLA ä¸ºä¾‹ï¼Œæ ¸å¿ƒæ¡æ¬¾å°±è¿™å‡ æ¡ï¼š</p>
<p><strong>1. åŸåˆ›å£°æ˜</strong></p>
<p>ä½ ä¿è¯æäº¤çš„ä»£ç æ˜¯ä½ è‡ªå·±å†™çš„ã€‚å¦‚æœåŒ…å«åˆ«äººçš„ä»£ç ï¼Œè¦æ ‡æ³¨æ¸…æ¥šæ¥æºå’Œè®¸å¯è¯ã€‚</p>
<p><strong>2. ç‰ˆæƒæˆæƒ</strong></p>
<p>ä½ æˆäºˆé¡¹ç›®æ–¹æ°¸ä¹…çš„ã€å…¨çƒèŒƒå›´çš„ã€å…ç‰ˆç¨çš„ç‰ˆæƒè®¸å¯ã€‚è¯´ç™½äº†å°±æ˜¯ï¼šä»–ä»¬å¯ä»¥éšä¾¿ç”¨ï¼Œä¸ç”¨ç»™ä½ é’±ï¼Œä¹Ÿä¸ç”¨æ¯æ¬¡éƒ½é—®ä½ ã€‚</p>
<p><strong>3. ä¸“åˆ©æˆæƒ</strong></p>
<p>å¦‚æœä½ çš„ä»£ç æ¶‰åŠä¸“åˆ©ï¼ˆè™½ç„¶å¤§å¤šæ•°æƒ…å†µä¸‹ä¸ä¼šï¼‰ï¼Œä½ ä¹Ÿæˆæƒä»–ä»¬ä½¿ç”¨ã€‚</p>
<p><strong>4. é›‡ä¸»ç¡®è®¤</strong></p>
<p>å¦‚æœä½ æ˜¯åœ¨å·¥ä½œä¸­å†™çš„ä»£ç ï¼Œå…¬å¸å¯èƒ½å¯¹ä»£ç æœ‰çŸ¥è¯†äº§æƒã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¾—å…ˆæ‹¿åˆ°å…¬å¸çš„è®¸å¯æ‰èƒ½ç­¾ CLAã€‚</p>
<h2 data-id="heading-3">ç­¾äº†ä¼šæ€æ ·</h2>
<p>ç­¾ CLA ä¸ä¼šè®©ä½ ï¼š</p>
<ul>
<li>å¤±å»ä»£ç çš„ç‰ˆæƒï¼ˆç‰ˆæƒè¿˜æ˜¯ä½ çš„ï¼‰</li>
<li>ä¸èƒ½åœ¨åˆ«å¤„ä½¿ç”¨è¿™æ®µä»£ç </li>
<li>æ‰¿æ‹…ä»€ä¹ˆæ³•å¾‹è´£ä»»</li>
</ul>
<p>ç­¾ CLA åªæ˜¯è¯´ï¼š</p>
<ul>
<li>é¡¹ç›®æ–¹å¯ä»¥åˆæ³•ä½¿ç”¨ä½ çš„è´¡çŒ®</li>
<li>ä½ ä¸ä¼šç§‹åç®—è´¦</li>
</ul>
<h2 data-id="heading-4">ä¸åŒé¡¹ç›®çš„ CLA</h2>
<p>ä¸æ˜¯æ‰€æœ‰å¼€æºé¡¹ç›®éƒ½è¦ç­¾ CLAï¼Œä¸»è¦æ˜¯å¤§å…¬å¸çš„é¡¹ç›®ï¼š</p>





























<table><thead><tr><th>å…¬å¸</th><th>éœ€è¦ CLA</th></tr></thead><tbody><tr><td>å¾®è½¯</td><td>æ˜¯</td></tr><tr><td>Google</td><td>æ˜¯</td></tr><tr><td>Meta</td><td>æ˜¯</td></tr><tr><td>Apache åŸºé‡‘ä¼š</td><td>æ˜¯</td></tr><tr><td>ä¸ªäººé¡¹ç›®</td><td>é€šå¸¸ä¸éœ€è¦</td></tr></tbody></table>
<p>ä¸ªäººç»´æŠ¤çš„å¼€æºé¡¹ç›®ä¸€èˆ¬ä¸æè¿™å¥—ï¼Œå¤ªéº»çƒ¦ã€‚ä½†å¤§å…¬å¸ä¸è¡Œï¼Œæ³•åŠ¡éƒ¨ä¸å…è®¸æœ‰æ³•å¾‹é£é™©æ•å£ã€‚</p>
<h2 data-id="heading-5">æ€ä¹ˆç­¾</h2>
<p>ä»¥ GitHub ä¸Šçš„å¾®è½¯é¡¹ç›®ä¸ºä¾‹ï¼š</p>
<ol>
<li>æäº¤ PR</li>
<li>æœºå™¨äººä¼šè‡ªåŠ¨è¯„è®ºï¼Œè®©ä½ ç­¾ CLA</li>
<li>å›å¤ï¼š<code>@microsoft-github-policy-service agree</code></li>
<li>æå®š</li>
</ol>
<p>å°±è¿™ä¹ˆç®€å•ã€‚ç­¾ä¸€æ¬¡å°±è¡Œï¼Œä»¥åå†ç»™åŒä¸€ä¸ªç»„ç»‡æ PR å°±ä¸ç”¨é‡å¤ç­¾äº†ã€‚</p>
<p>å¦‚æœä½ æ˜¯ä»£è¡¨å…¬å¸è´¡çŒ®ä»£ç ï¼Œéœ€è¦åŠ ä¸Šå…¬å¸åï¼š</p>
<pre><code class="hljs language-ini" lang="ini">@microsoft-github-policy-service agree <span class="hljs-attr">company</span>=<span class="hljs-string">"ä½ çš„å…¬å¸å"</span>
</code></pre>
<h2 data-id="heading-6">ä¸€äº›ç»†èŠ‚</h2>
<p><strong>Qï¼šæˆ‘å°±æ”¹äº†ä¸ª typoï¼Œä¹Ÿè¦ç­¾ï¼Ÿ</strong></p>
<p>æ˜¯çš„ã€‚å“ªæ€•åªæ”¹äº†ä¸€ä¸ªå­—ç¬¦ï¼Œä¹Ÿæ˜¯è´¡çŒ®ï¼Œä¹Ÿè¦ç­¾ã€‚</p>
<p><strong>Qï¼šç­¾äº† CLAï¼Œä»£ç ç‰ˆæƒå½’è°ï¼Ÿ</strong></p>
<p>ç‰ˆæƒè¿˜æ˜¯ä½ çš„ã€‚CLA åªæ˜¯æˆæƒï¼Œä¸æ˜¯è½¬è®©ã€‚</p>
<p><strong>Qï¼šèƒ½æ’¤å›å—ï¼Ÿ</strong></p>
<p>ç†è®ºä¸Šä½ ä¸èƒ½æ’¤å›å·²ç»åˆå¹¶çš„ä»£ç çš„æˆæƒã€‚ä½†ä½ å¯ä»¥éšæ—¶åœæ­¢è´¡çŒ®ã€‚</p>
<p><strong>Qï¼šCLA å’Œå¼€æºè®¸å¯è¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</strong></p>
<p>å¼€æºè®¸å¯è¯ï¼ˆMITã€Apache ç­‰ï¼‰æ˜¯é¡¹ç›®å¯¹å¤–çš„æˆæƒï¼Œå‘Šè¯‰ä½¿ç”¨è€…å¯ä»¥æ€ä¹ˆç”¨è¿™ä¸ªé¡¹ç›®ã€‚</p>
<p>CLA æ˜¯è´¡çŒ®è€…å¯¹é¡¹ç›®çš„æˆæƒï¼Œå‘Šè¯‰é¡¹ç›®æ–¹å¯ä»¥æ€ä¹ˆç”¨è´¡çŒ®è€…çš„ä»£ç ã€‚</p>
<p>ä¸¤ä¸ªæ–¹å‘ä¸ä¸€æ ·ã€‚</p>
<h2 data-id="heading-7">å°ç»“</h2>
<p>CLA è¿™ä¸œè¥¿ï¼Œè¯´ç™½äº†å°±æ˜¯å¤§å…¬å¸çš„æ³•åŠ¡éœ€æ±‚ã€‚å¯¹è´¡çŒ®è€…æ¥è¯´ï¼Œç­¾ä¸€ä¸‹ä¹Ÿæ²¡ä»€ä¹ˆæŸå¤±ï¼Œå°±æ˜¯æˆæƒé¡¹ç›®æ–¹åˆæ³•ä½¿ç”¨ä½ çš„ä»£ç ã€‚</p>
<p>ç¬¬ä¸€æ¬¡é‡åˆ°å¯èƒ½æœ‰ç‚¹æ‡µï¼Œä½†ç†è§£äº†å®ƒçš„ç›®çš„ï¼Œå°±çŸ¥é“è¿™æ˜¯æ­£å¸¸æµç¨‹ï¼Œä¸æ˜¯ä»€ä¹ˆå‘ã€‚</p>
<p>ç­¾å°±å®Œäº†ã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šåŸºäº GORM ä»é›¶å®ç°æ–°æœåŠ¡]]></title>    <link>https://juejin.cn/post/7582786292087832627</link>    <guid>https://juejin.cn/post/7582786292087832627</guid>    <pubDate>2025-12-12T11:14:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582786292087832627" data-draft-id="7582786292087816243" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šåŸºäº GORM ä»é›¶å®ç°æ–°æœåŠ¡"/> <meta itemprop="keywords" content="åç«¯,Go,ORM"/> <meta itemprop="datePublished" content="2025-12-12T11:14:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šåŸºäº GORM ä»é›¶å®ç°æ–°æœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T11:14:44.000Z" title="Fri Dec 12 2025 11:14:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€ç®±å³ç”¨çš„ GoWind Adminï½œé£è¡Œï¼Œä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ï¼šåŸºäº GORM ä»é›¶å®ç°æ–°æœåŠ¡</h2>
<p>æœ¬æ–‡å°†æŒ‡å¯¼å¼€å‘è€…åœ¨ GoWind Admin ä¼ä¸šçº§å‰åç«¯ä¸€ä½“ä¸­åå°æ¡†æ¶ä¸­ï¼Œä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªå®Œæ•´çš„ gRPC æœåŠ¡ã€‚æˆ‘ä»¬æ‰€æŒ‡çš„ â€œæœåŠ¡â€ å³ gRPC ä¸­çš„ serviceï¼Œé€šå¸¸åŒ…å«ç‰¹å®šæ•°æ®é›†çš„ CRUDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰æ“ä½œï¼Œéµå¾ªæ¡†æ¶è§„èŒƒå®ç°é«˜å¯ç»´æŠ¤æ€§ä¸å¯æ‰©å±•æ€§ã€‚</p>
<h3 data-id="heading-1">å‰ç½®å‡†å¤‡</h3>
<p>åœ¨å¼€å§‹å‰ï¼Œè¯·ç¡®ä¿å·²å®Œæˆä»¥ä¸‹ç¯å¢ƒå‡†å¤‡ï¼š</p>
<h4 data-id="heading-2">å¼€å‘ç¯å¢ƒ</h4>
<ul>
<li>Go 1.19+ï¼ˆæ¨è 1.21+ï¼Œæ”¯æŒæœ€æ–°è¯­è¨€ç‰¹æ€§ï¼‰</li>
<li>Gitï¼ˆç‰ˆæœ¬æ§åˆ¶ï¼‰</li>
<li>Protobuf ç¼–è¯‘å™¨ï¼ˆ<code>protoc</code>ï¼Œç”¨äºç¼–è¯‘ proto æ–‡ä»¶ï¼‰</li>
</ul>
<h4 data-id="heading-3">ä¾èµ–å·¥å…·</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…ç›¸å…³çš„å‘½ä»¤è¡Œå·¥å…·</span>
make cli

<span class="hljs-comment"># å®‰è£…ä¾èµ–çš„æ’ä»¶</span>
make plugin
</code></pre>
<h4 data-id="heading-4">é¡¹ç›®ç»“æ„</h4>
<p>å…‹éš† GoWind Admin é¡¹ç›®åï¼Œæ ¸å¿ƒç›®å½•ç»“æ„å¦‚ä¸‹ï¼ˆèšç„¦æœåŠ¡å¼€å‘ç›¸å…³ç›®å½•ï¼‰ï¼š</p>
<pre><code class="hljs language-text" lang="text">go-wind-admin/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api/gen/go/        # proto ç¼–è¯‘ç”Ÿæˆçš„ Go ä»£ç ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ï¼‰
â”‚   â”œâ”€â”€ api/proto/         # å­˜æ”¾ proto æ¥å£å®šä¹‰æ–‡ä»¶
â”‚   â”œâ”€â”€ app/admin/service/ # ä¸šåŠ¡æœåŠ¡æ ¸å¿ƒå®ç°
â”‚   â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”‚   â”œâ”€â”€ data/      # æ•°æ®è®¿é—®å±‚ï¼ˆä¸æ•°æ®åº“äº¤äº’ï¼ŒåŸºäº entï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ gorm/   # GORM ORM ç›¸å…³çš„ä»£ç 
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ model/ # GORM æ•°æ®æ¨¡å‹å®šä¹‰ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ service/   # ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆå®ç° gRPC æ¥å£ï¼‰
â”‚   â”‚   â””â”€â”€ server/        # æœåŠ¡æ³¨å†Œï¼ˆå°†æœåŠ¡ç»‘å®šåˆ° gRPC/HTTP æœåŠ¡å™¨ï¼‰
</code></pre>
<h3 data-id="heading-5">ä¸€ã€è®¾è®¡æ•°æ®åº“è¡¨ç»“æ„</h3>
<p>æ•°æ®åº“è¡¨ç»“æ„æ˜¯æœåŠ¡çš„åŸºç¡€ï¼Œéœ€æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾è®¡æ ¸å¿ƒå­—æ®µã€‚ä»¥ â€œç”¨æˆ·è¡¨â€ ä¸ºä¾‹ï¼Œéœ€åŒ…å«ï¼š</p>
<ul>
<li>é€šç”¨å­—æ®µï¼šIDï¼ˆä¸»é”®ï¼‰ã€åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ã€åˆ›å»ºè€… IDã€æ›´æ–°è€… IDï¼ˆç”¨äºå®¡è®¡ï¼‰</li>
<li>ä¸šåŠ¡å­—æ®µï¼šç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰ã€å¯†ç ã€æ˜µç§°ã€é‚®ç®±ã€æ‰‹æœºå·ç­‰</li>
<li>å…³è”å­—æ®µï¼šè§’è‰² IDã€éƒ¨é—¨ ID ç­‰ï¼ˆç”¨äºå…³è”å…¶ä»–è¡¨ï¼‰</li>
<li>çŠ¶æ€å­—æ®µï¼šç”¨æˆ·çŠ¶æ€ï¼ˆå¯ç”¨ / ç¦ç”¨ï¼‰ã€æ€§åˆ«ç­‰æšä¸¾å­—æ®µ</li>
</ul>
<p><strong>è®¾è®¡åŸåˆ™ï¼š</strong></p>
<ul>
<li>æ ¸å¿ƒå­—æ®µéç©ºï¼ˆå¦‚ç”¨æˆ·åï¼‰ï¼Œéæ ¸å¿ƒå­—æ®µå¯ç©ºï¼ˆå¦‚åœ°å€ï¼‰</li>
<li>é¢‘ç¹æŸ¥è¯¢çš„å­—æ®µæ·»åŠ ç´¢å¼•ï¼ˆå¦‚ç”¨æˆ·åï¼‰</li>
<li>æ•æ„Ÿå­—æ®µï¼ˆå¦‚å¯†ç ï¼‰éœ€åŠ å¯†å­˜å‚¨</li>
</ul>
<h3 data-id="heading-6">äºŒã€ç¼–å†™ GORM æ•°æ®æ¨¡å‹</h3>
<p>GORM æ˜¯ Go è¯­è¨€ä¸»æµçš„ ORM åº“ï¼Œé€šè¿‡ç»“æ„ä½“ + æ ‡ç­¾å®šä¹‰æ•°æ®åº“æ¨¡å‹ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ SQL æˆ–ç”Ÿæˆä»£ç ã€‚æ¨¡å‹æ–‡ä»¶ä½äº <code>backend/app/admin/service/internal/data/gorm/models</code> ç›®å½•ã€‚</p>
<p>æ­¥éª¤è¯´æ˜ï¼š</p>
<ol>
<li>åˆ›å»º <code>user.go</code> æ–‡ä»¶ï¼Œå®šä¹‰ <code>User</code> ç»“æ„ä½“ä½œä¸ºæ ¸å¿ƒæ¨¡å‹ï¼›</li>
<li>é€šè¿‡ GORM æ ‡ç­¾é…ç½®å­—æ®µå±æ€§ï¼ˆä¸»é”®ã€ç´¢å¼•ã€éç©ºã€æ³¨é‡Šã€å­—æ®µç±»å‹ç­‰ï¼‰ï¼›</li>
<li>å®ç° TableName æ–¹æ³•æŒ‡å®šæ•°æ®åº“è¡¨åï¼›</li>
</ol>
<h4 data-id="heading-7">å…³é”®ä»£ç è§£æï¼š</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/app/admin/service/internal/data/gorm/models/user.go</span>
<span class="hljs-keyword">package</span> models

<span class="hljs-keyword">import</span> <span class="hljs-string">"gorm.io/gorm"</span>

<span class="hljs-comment">// User ç”¨æˆ·ä¿¡æ¯è¡¨</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
	gorm.Model

	UserName <span class="hljs-type">string</span> <span class="hljs-string">`gorm:"column:username;comment:'è´¦å·å'"`</span>
	NickName <span class="hljs-type">string</span> <span class="hljs-string">`gorm:"column:nickname;comment:'æ˜µç§°'"`</span>
	Password <span class="hljs-type">string</span> <span class="hljs-string">`gorm:"column:password;comment:'ç™»å½•å¯†ç '"`</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(u User)</span></span> TableName() <span class="hljs-type">string</span> {
	<span class="hljs-keyword">return</span> <span class="hljs-string">"users"</span>
}
</code></pre>
<h4 data-id="heading-8">è¡¨ç»“æ„è¿ç§»ï¼š</h4>
<p>GORM æ— éœ€æ‰‹åŠ¨ç”Ÿæˆä»£ç ï¼Œåªéœ€åœ¨æŠŠæ•°æ®åº“æ¨¡å‹æ³¨å†Œè¿› MigrateModelåˆ—è¡¨ å³å¯å®ç°è‡ªåŠ¨åˆ›å»º / æ›´æ–°è¡¨ç»“æ„ï¼ˆä»…æ–°å¢å­—æ®µï¼Œä¸ä¼šåˆ é™¤å·²æœ‰å­—æ®µï¼Œä¿è¯æ•°æ®å®‰å…¨ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/app/admin/service/internal/data/gorm/init.go</span>
<span class="hljs-keyword">package</span> gorm

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"go-wind-admin/app/admin/service/internal/data/gorm/models"</span>

	<span class="hljs-string">"github.com/tx7do/go-crud/gorm"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> {
	RegisterMigrates()
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">RegisterMigrates</span><span class="hljs-params">()</span></span> {
	gorm.RegisterMigrateModels(
		&amp;models.User{},
	)
}
</code></pre>
<p>ç„¶åæˆ‘ä»¬åœ¨<code>backend/app/admin/service/internal/data/gorm_client.go</code>é‡Œé¢å¼•ç”¨æ‰§è¡Œ<code>init()</code>æ–¹æ³•å³å¯å®ç°è‡ªåŠ¨åˆ›å»ºæ›´æ–°è¡¨ç»“æ„ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/app/admin/service/internal/data/gorm_client.go</span>
<span class="hljs-keyword">package</span> data

<span class="hljs-keyword">import</span> (
    	_ <span class="hljs-string">"go-wind-admin/app/admin/service/internal/data/gorm"</span>
)
</code></pre>
<h3 data-id="heading-9">ä¸‰ã€ç¼–å†™ gRPC çš„ proto æ–‡ä»¶</h3>
<p>Protobufï¼ˆprotoï¼‰ç”¨äºå®šä¹‰ gRPC æœåŠ¡æ¥å£å’Œæ•°æ®ç»“æ„ï¼Œæ˜¯æœåŠ¡å¯¹å¤–æš´éœ²çš„ â€œå¥‘çº¦â€ã€‚proto æ–‡ä»¶é€šå¸¸ä½äº <code>backend/api/proto/user/service/v1</code> ç›®å½•ã€‚</p>
<h4 data-id="heading-10">æ­¥éª¤è¯´æ˜ï¼š</h4>
<ol>
<li>å®šä¹‰æœåŠ¡æ¥å£ï¼ˆ<code>service UserService</code>ï¼‰ï¼ŒåŒ…å« CRUD æ–¹æ³•ï¼ˆå¦‚ <code>CreateUser</code>ã€<code>ListUser</code>ï¼‰ã€‚</li>
<li>å®šä¹‰è¯·æ±‚ / å“åº”æ¶ˆæ¯ï¼ˆmessageï¼‰ï¼Œæ˜ å°„æ•°æ®åº“å­—æ®µå’Œä¸šåŠ¡éœ€æ±‚ã€‚</li>
<li>å®šä¹‰æšä¸¾ï¼ˆenumï¼‰ï¼Œå¦‚ç”¨æˆ·çŠ¶æ€ã€æ€§åˆ«ç­‰å›ºå®šå€¼ç±»å‹ã€‚</li>
</ol>
<h4 data-id="heading-11">å…³é”®ä»£ç è§£æï¼š</h4>
<pre><code class="hljs language-protobuf" lang="protobuf">// backend/api/proto/user/service/v1/user.proto

// å®šä¹‰æœåŠ¡æ¥å£
service UserService {
  rpc ListUser (pagination.PagingRequest) returns (ListUserResponse); // åˆ—è¡¨æŸ¥è¯¢
  rpc GetUser (GetUserRequest) returns (User);                        // è¯¦æƒ…æŸ¥è¯¢
  rpc CreateUser (CreateUserRequest) returns (google.protobuf.Empty); // åˆ›å»º
  rpc UpdateUser (UpdateUserRequest) returns (google.protobuf.Empty); // æ›´æ–°
  rpc DeleteUser (DeleteUserRequest) returns (google.protobuf.Empty); // åˆ é™¤
}

// æšä¸¾å®šä¹‰ï¼ˆç”¨æˆ·çŠ¶æ€ï¼‰
enum UserStatus {
  OFF = 0; // ç¦ç”¨
  ON = 1;  // å¯ç”¨
}

// æ•°æ®æ¨¡å‹ï¼ˆä¸æ•°æ®åº“è¡¨å¯¹åº”ï¼‰
message User {
  optional uint32 id = 1 [json_name = "id"]; // ç”¨æˆ·ID
  optional string username = 2;              // ç”¨æˆ·å
  optional UserStatus status = 3;            // çŠ¶æ€
  // å…¶ä»–å­—æ®µ...
}
</code></pre>
<h4 data-id="heading-12">ç”Ÿæˆ Go ä»£ç ï¼š</h4>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°† proto è½¬æ¢ä¸º Go ä»£ç ï¼ˆç”Ÿæˆçš„ä»£ç ä½äº <code>backend/api/gen/go</code> ç›®å½•ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">make api
</code></pre>
<h3 data-id="heading-13">å››ã€ç¼–å†™ REST çš„ proto æ–‡ä»¶</h3>
<p>Protobufï¼ˆprotoï¼‰ç”¨äºå®šä¹‰ REST æœåŠ¡æ¥å£å’Œæ•°æ®ç»“æ„ï¼Œæ˜¯æœåŠ¡å¯¹å¤–æš´éœ²çš„ â€œå¥‘çº¦â€ã€‚proto æ–‡ä»¶é€šå¸¸ä½äº <code>backend/api/proto/admin/service/v1</code> ç›®å½•ã€‚</p>
<h4 data-id="heading-14">å…³é”®ä»£ç è§£æï¼š</h4>
<pre><code class="hljs language-protobuf" lang="protobuf">// backend/api/proto/admin/service/v1/i_user.proto

import "user/service/v1/user.proto";

// ç”¨æˆ·ç®¡ç†æœåŠ¡
service UserService {
  // è·å–ç”¨æˆ·åˆ—è¡¨
  rpc List (pagination.PagingRequest) returns (user.service.v1.ListUserResponse) {
    option (redact.v3.internal_method) = true;
    option (google.api.http) = {
      get: "/admin/v1/users"
    };
  }

  // è·å–ç”¨æˆ·æ•°æ®
  rpc Get (user.service.v1.GetUserRequest) returns (user.service.v1.User) {
    option (redact.v3.internal_method) = true;
    option (google.api.http) = {
      get: "/admin/v1/users/{id}"
      additional_bindings {
        get: "/admin/v1/users/username/{user_name}"
      }
    };
  }

  // åˆ›å»ºç”¨æˆ·
  rpc Create (user.service.v1.CreateUserRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      post: "/admin/v1/users"
      body: "*"
    };
  }

  // æ›´æ–°ç”¨æˆ·
  rpc Update (user.service.v1.UpdateUserRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      put: "/admin/v1/users/{id}"
      body: "*"
    };
  }

  // åˆ é™¤ç”¨æˆ·
  rpc Delete (user.service.v1.DeleteUserRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete: "/admin/v1/users/{id}"
    };
  }
}

// æšä¸¾å®šä¹‰ï¼ˆç”¨æˆ·çŠ¶æ€ï¼‰
enum UserStatus {
  OFF = 0; // ç¦ç”¨
  ON = 1;  // å¯ç”¨
}

// æ•°æ®æ¨¡å‹ï¼ˆä¸æ•°æ®åº“è¡¨å¯¹åº”ï¼‰
message User {
  optional uint32 id = 1 [json_name = "id"]; // ç”¨æˆ·ID
  optional string username = 2;              // ç”¨æˆ·å
  optional UserStatus status = 3;            // çŠ¶æ€
  // å…¶ä»–å­—æ®µ...
}
</code></pre>
<h4 data-id="heading-15">ç”Ÿæˆä»£ç ï¼š</h4>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°† proto è½¬æ¢ä¸º Go ä»£ç ï¼ˆç”Ÿæˆçš„ä»£ç ä½äº <code>backend/api/gen/go</code> ç›®å½•ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿæˆgoä»£ç </span>
make api
</code></pre>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°† proto è½¬æ¢ä¸º OpenAPIæ–‡æ¡£ï¼ˆç”Ÿæˆçš„æ–‡æ¡£ä½äº<code>backend/app/admin/service/cmd/server/assets/</code>ç›®å½•ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”ŸæˆOpenAPIæ–‡æ¡£</span>
make openapi
</code></pre>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°† proto è½¬æ¢ä¸º TypeScriptä»£ç ï¼ˆç”Ÿæˆçš„ä»£ç ä½äº<code>frontend/apps/admin/src/generated/api</code>ç›®å½•ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”ŸæˆTypeScriptä»£ç </span>
make ts
</code></pre>
<h3 data-id="heading-16">äº”ã€ç¼–å†™ data åŒ…ï¼ˆæ•°æ®è®¿é—®å±‚ï¼‰</h3>
<p><code>data</code> åŒ…è´Ÿè´£ä¸æ•°æ®åº“äº¤äº’ï¼Œå®ç° CRUD æ“ä½œï¼Œæ˜¯ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®åº“ä¹‹é—´çš„æ¡¥æ¢ã€‚ä»£ç ä½äº <code>backend/app/admin/service/internal/data</code> ç›®å½•ã€‚</p>
<h4 data-id="heading-17">æ ¸å¿ƒèŒè´£ï¼š</h4>
<ul>
<li>å°è£… ent çš„æ•°æ®åº“æ“ä½œï¼ˆæŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ã€‚</li>
<li>å®ç° ent å®ä½“ä¸ proto æ¶ˆæ¯çš„è½¬æ¢ï¼ˆå¦‚ <code>convertEntToProto</code>ï¼‰ã€‚</li>
<li>å¤„ç†æ•°æ®è®¿é—®è¿‡ç¨‹ä¸­çš„é”™è¯¯ï¼ˆå¦‚è®°å½•æ—¥å¿—ã€è¿”å›ä¸šåŠ¡é”™è¯¯ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-18">å…³é”®ä»£ç è§£æï¼š</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> data

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"errors"</span>

	<span class="hljs-string">"go-wind-admin/api/gen/go/user/service/v1"</span>
	<span class="hljs-string">"go-wind-admin/app/admin/service/internal/data/gorm/models"</span>

	<span class="hljs-string">"gorm.io/gorm"</span>
)

<span class="hljs-comment">// UserRepo ç”¨æˆ·æ•°æ®è®¿é—®ä»“åº“</span>
<span class="hljs-keyword">type</span> UserRepo <span class="hljs-keyword">struct</span> {
	db  *gorm.DB          <span class="hljs-comment">// GORMæ•°æ®åº“è¿æ¥</span>
	log  *log.Helper      <span class="hljs-comment">// æ—¥å¿—å·¥å…·</span>
}

<span class="hljs-comment">// NewUserRepo åˆ›å»ºUserRepoå®ä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewUserRepo</span><span class="hljs-params">(logger log.Logger, db *gorm.DB)</span></span> *UserRepo {
	repo := &amp;UserRepo{
		log:                log.NewHelper(log.With(logger, <span class="hljs-string">"module"</span>, <span class="hljs-string">"user/repo/admin-service"</span>)),
		db:               db,
	}

	<span class="hljs-keyword">return</span> repo
}

<span class="hljs-comment">// CreateUser åˆ›å»ºç”¨æˆ·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *UserRepo)</span></span> CreateUser(ctx context.Context, req *userV1.CreateUserRequest) <span class="hljs-type">error</span> {
    <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
	<span class="hljs-keyword">if</span> req == <span class="hljs-literal">nil</span> || req.Data == <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, userV1.ErrorBadRequest(<span class="hljs-string">"invalid parameter"</span>)
	}

    <span class="hljs-comment">// å¯†ç åŠ å¯†ï¼ˆæ•æ„Ÿå­—æ®µå¤„ç†ï¼‰</span>
	<span class="hljs-keyword">if</span> req.Data.Password != <span class="hljs-literal">nil</span> &amp;&amp; req.Data.GetPassword() != <span class="hljs-string">""</span> {
		cryptoPassword, err := crypto.HashPassword(req.Data.GetPassword())
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
		}
		req.Data.Password = &amp;cryptoPassword
	}

    userModel := &amp;models.User{
		Username:  *req.Data.Username,
		Password:  password,
		Nickname:  req.Data.GetNickname(),
	}

	<span class="hljs-comment">// æ‰§è¡ŒGORMåˆ›å»ºæ“ä½œ</span>
	<span class="hljs-keyword">if</span> err := r.db.WithContext(ctx).Create(userModel).Error; err != <span class="hljs-literal">nil</span> {
		r.log.Error(<span class="hljs-string">"create user failed: %v"</span>, err)
		<span class="hljs-comment">// å¤„ç†å”¯ä¸€é”®å†²çªï¼ˆç”¨æˆ·åé‡å¤ï¼‰</span>
		<span class="hljs-keyword">if</span> errors.Is(err, gorm.ErrDuplicatedKey) {
			<span class="hljs-keyword">return</span> userV1.ErrorAlreadyExists(<span class="hljs-string">"username already exists"</span>)
		}
		<span class="hljs-keyword">return</span> errors.New(<span class="hljs-string">"failed to create user"</span>)
	}

	<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// ListUser åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *UserRepo)</span></span> ListUser(ctx context.Context, req *userV1.PagingRequest) (*userV1.ListUserResponse, <span class="hljs-type">error</span>) {
	<span class="hljs-keyword">var</span> (
		userModels []*model.User
		total      <span class="hljs-type">int64</span>
		resp       = &amp;userV1.ListUserResponse{}
	)

	<span class="hljs-comment">// åˆ†é¡µå‚æ•°å¤„ç†</span>
	page := req.GetPage()
	pageSize := req.GetPageSize()
	<span class="hljs-keyword">if</span> page &lt;= <span class="hljs-number">0</span> {
		page = <span class="hljs-number">1</span>
	}
	<span class="hljs-keyword">if</span> pageSize &lt;= <span class="hljs-number">0</span> {
		pageSize = <span class="hljs-number">10</span>
	}
	offset := (page - <span class="hljs-number">1</span>) * pageSize

	<span class="hljs-comment">// 1. æŸ¥è¯¢æ€»æ•°ï¼ˆå¿½ç•¥è½¯åˆ é™¤ï¼‰</span>
	<span class="hljs-keyword">if</span> err := r.db.WithContext(ctx).Model(&amp;model.User{}).Count(&amp;total).Error; err != <span class="hljs-literal">nil</span> {
		r.log.Error(<span class="hljs-string">"count user total failed: %v"</span>, err)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, errors.New(<span class="hljs-string">"failed to count users"</span>)
	}
	resp.Total = total

	<span class="hljs-comment">// 2. åˆ†é¡µæŸ¥è¯¢åˆ—è¡¨</span>
	<span class="hljs-keyword">if</span> err := r.db.WithContext(ctx).Offset(<span class="hljs-type">int</span>(offset)).Limit(<span class="hljs-type">int</span>(pageSize)).Find(&amp;userModels).Error; err != <span class="hljs-literal">nil</span> {
		r.log.Error(<span class="hljs-string">"list users failed: %v"</span>, err)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, errors.New(<span class="hljs-string">"failed to list users"</span>)
	}

	<span class="hljs-comment">// 3. GORMæ¨¡å‹è½¬æ¢ä¸ºProtoæ¶ˆæ¯</span>
	resp.Items = <span class="hljs-built_in">make</span>([]*userV1.User, <span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(userModels))
	<span class="hljs-keyword">for</span> _, u := <span class="hljs-keyword">range</span> userModels {
		resp.Items = <span class="hljs-built_in">append</span>(resp.Items, &amp;userV1.User{
			Id:       <span class="hljs-type">uint32</span>(u.ID),
			Username: &amp;u.Username,
			Nickname: &amp;u.Nickname,
		})
	}

	<span class="hljs-keyword">return</span> resp, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// GetUser æŸ¥è¯¢å•ä¸ªç”¨æˆ·ï¼ˆæ”¯æŒID/ç”¨æˆ·åï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *UserRepo)</span></span> GetUser(ctx context.Context, req *userV1.GetUserRequest) (*userV1.User, <span class="hljs-type">error</span>) {
	<span class="hljs-keyword">var</span> userModel model.User

	<span class="hljs-comment">// æ ¹æ®æ¡ä»¶æŸ¥è¯¢ï¼ˆIDæˆ–ç”¨æˆ·åï¼‰</span>
	<span class="hljs-keyword">switch</span> {
	<span class="hljs-keyword">case</span> req.Id != <span class="hljs-literal">nil</span>:
		<span class="hljs-keyword">if</span> err := r.db.WithContext(ctx).First(&amp;userModel, req.GetId()).Error; err != <span class="hljs-literal">nil</span> {
			<span class="hljs-keyword">if</span> errors.Is(err, gorm.ErrRecordNotFound) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, userV1.ErrorNotFound(<span class="hljs-string">"user not found by id"</span>)
			}
			r.log.Error(<span class="hljs-string">"get user by id failed: %v"</span>, err)
			<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, errors.New(<span class="hljs-string">"failed to get user"</span>)
		}
	<span class="hljs-keyword">case</span> req.Username != <span class="hljs-literal">nil</span>:
		<span class="hljs-keyword">if</span> err := r.db.WithContext(ctx).Where(<span class="hljs-string">"username = ?"</span>, req.GetUsername()).First(&amp;userModel).Error; err != <span class="hljs-literal">nil</span> {
			<span class="hljs-keyword">if</span> errors.Is(err, gorm.ErrRecordNotFound) {
				<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, userV1.ErrorNotFound(<span class="hljs-string">"user not found by username"</span>)
			}
			r.log.Error(<span class="hljs-string">"get user by username failed: %v"</span>, err)
			<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, errors.New(<span class="hljs-string">"failed to get user"</span>)
		}
	<span class="hljs-keyword">default</span>:
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, userV1.ErrorBadRequest(<span class="hljs-string">"id or username is required"</span>)
	}

	<span class="hljs-comment">// è½¬æ¢ä¸ºProtoæ¶ˆæ¯</span>
	<span class="hljs-keyword">return</span> &amp;userV1.User{
		Id:       <span class="hljs-type">uint32</span>(userModel.ID),
		Username: &amp;userModel.Username,
		Nickname: &amp;userModel.Nickname,
		Email:    &amp;userModel.Email,
		Phone:    &amp;userModel.Phone,
		Status:   userV1.UserStatus(userModel.Status),
		RoleId:   <span class="hljs-type">uint32</span>(userModel.RoleID),
		DeptId:   <span class="hljs-type">uint32</span>(userModel.DeptID),
	}, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// UpdateUser æ›´æ–°ç”¨æˆ·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *UserRepo)</span></span> UpdateUser(ctx context.Context, req *userV1.UpdateUserRequest) <span class="hljs-type">error</span> {
	<span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
	<span class="hljs-keyword">if</span> req.Id == <span class="hljs-number">0</span> || req.Data == <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> userV1.ErrorBadRequest(<span class="hljs-string">"id and data are required"</span>)
	}

    	<span class="hljs-comment">// å¯†ç æ›´æ–°ï¼ˆå¯é€‰ï¼‰</span>
	<span class="hljs-keyword">if</span> req.Data.Password != <span class="hljs-literal">nil</span> &amp;&amp; req.Data.GetPassword() != <span class="hljs-string">""</span> {
		cryptoPassword, err := crypto.HashPassword(req.Data.GetPassword())
		<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
			r.log.Error(<span class="hljs-string">"hash password failed: %v"</span>, err)
			<span class="hljs-keyword">return</span> errors.New(<span class="hljs-string">"failed to hash password"</span>)
		}
		req.Data.Password = &amp;cryptoPassword
	}

	<span class="hljs-comment">// æ„é€ æ›´æ–°æ•°æ®</span>
    updateData := &amp;models.User{
		Username:  *req.Data.Username,
		Password:  password,
		Nickname:  req.Data.GetNickname(),
	}

	<span class="hljs-comment">// æ‰§è¡Œæ›´æ–°ï¼ˆä»…æ›´æ–°éç©ºå­—æ®µï¼‰</span>
	<span class="hljs-keyword">if</span> err := r.db.WithContext(ctx).Model(&amp;model.User{}).Where(<span class="hljs-string">"id = ?"</span>, req.Id).Updates(updateData).Error; err != <span class="hljs-literal">nil</span> {
		r.log.Error(<span class="hljs-string">"update user failed: %v"</span>, err)
		<span class="hljs-keyword">return</span> errors.New(<span class="hljs-string">"failed to update user"</span>)
	}

	<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// DeleteUser åˆ é™¤ç”¨æˆ·ï¼ˆè½¯åˆ é™¤ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(r *UserRepo)</span></span> DeleteUser(ctx context.Context, req *userV1.DeleteUserRequest) <span class="hljs-type">error</span> {
	<span class="hljs-keyword">if</span> req.Id == <span class="hljs-number">0</span> {
		<span class="hljs-keyword">return</span> userV1.ErrorBadRequest(<span class="hljs-string">"id is required"</span>)
	}

	<span class="hljs-comment">// GORM Deleteæ–¹æ³•é»˜è®¤è½¯åˆ é™¤ï¼ˆæ›´æ–°DeletedAtå­—æ®µï¼‰</span>
	<span class="hljs-keyword">if</span> err := r.db.WithContext(ctx).Delete(&amp;model.User{}, req.Id).Error; err != <span class="hljs-literal">nil</span> {
		r.log.Error(<span class="hljs-string">"delete user failed: %v"</span>, err)
		<span class="hljs-keyword">return</span> errors.New(<span class="hljs-string">"failed to delete user"</span>)
	}

	<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre>
<h3 data-id="heading-19">å…­ã€ç¼–å†™ service åŒ…ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰</h3>
<p><code>service</code> åŒ…å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨ <code>data</code> åŒ…è¿›è¡Œæ•°æ®æ“ä½œï¼Œå¹¶å¤„ç†æƒé™æ ¡éªŒã€å‚æ•°æ ¡éªŒç­‰ä¸šåŠ¡è§„åˆ™ã€‚ä»£ç ä½äº <code>backend/app/admin/service/internal/service</code> ç›®å½•ã€‚</p>
<h4 data-id="heading-20">æ ¸å¿ƒèŒè´£ï¼š</h4>
<ul>
<li>æ ¡éªŒè¯·æ±‚å‚æ•°åˆæ³•æ€§ï¼ˆå¦‚éç©ºæ£€æŸ¥ï¼‰ã€‚</li>
<li>å®ç°ä¸šåŠ¡è§„åˆ™ï¼ˆå¦‚ â€œç¦æ­¢åˆ é™¤è¶…çº§ç®¡ç†å‘˜â€ï¼‰ã€‚</li>
<li>è°ƒç”¨ <code>data</code> åŒ…å®Œæˆæ•°æ®æ“ä½œï¼Œå¹¶è¿”å›ç»“æœã€‚</li>
</ul>
<h4 data-id="heading-21">å…³é”®ä»£ç è§£æï¼š</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/app/admin/service/internal/service/user_service.go</span>
<span class="hljs-keyword">package</span> service

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"errors"</span>

	<span class="hljs-string">"go-wind-admin/api/gen/go/user/service/v1"</span>
	<span class="hljs-string">"go-wind-admin/app/admin/service/internal/data"</span>

	<span class="hljs-string">"google.golang.org/protobuf/types/known/emptypb"</span>
)

<span class="hljs-comment">// UserService å®ç°gRPC/RESTæœåŠ¡æ¥å£</span>
<span class="hljs-keyword">type</span> UserService <span class="hljs-keyword">struct</span> {
	userV1.UnimplementedUserServiceServer <span class="hljs-comment">// å…¼å®¹gRPC</span>

	userRepo *data.UserRepo
	log      *log.Helper
}

<span class="hljs-comment">// NewUserService åˆ›å»ºUserServiceå®ä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewUserService</span><span class="hljs-params">(logger log.Logger, userRepo *data.UserRepo)</span></span> *UserService {
	<span class="hljs-keyword">return</span> &amp;UserService{
		userRepo: userRepo,
		log:      log.NewHelper(log.With(logger, <span class="hljs-string">"module"</span>, <span class="hljs-string">"user/service/admin-service"</span>)),
	}
}

<span class="hljs-comment">// CreateUser åˆ›å»ºç”¨æˆ·ï¼ˆå«æƒé™æ ¡éªŒï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *UserService)</span></span> CreateUser(ctx context.Context, req *userV1.CreateUserRequest) (*emptypb.Empty, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// åŸºç¡€å‚æ•°æ ¡éªŒ</span>
	<span class="hljs-keyword">if</span> req == <span class="hljs-literal">nil</span> || req.Data == <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, userV1.ErrorBadRequest(<span class="hljs-string">"invalid request"</span>)
	}

	<span class="hljs-comment">// è°ƒç”¨æ•°æ®å±‚åˆ›å»ºç”¨æˆ·</span>
	<span class="hljs-keyword">if</span> err := s.userRepo.CreateUser(ctx, req); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}

	<span class="hljs-keyword">return</span> &amp;emptypb.Empty{}, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// ListUser åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *UserService)</span></span> ListUser(ctx context.Context, req *userV1.PagingRequest) (*userV1.ListUserResponse, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// è°ƒç”¨æ•°æ®å±‚æŸ¥è¯¢</span>
	resp, err := s.userRepo.ListUser(ctx, req)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		s.log.Error(<span class="hljs-string">"list user failed: %v"</span>, err)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}
	<span class="hljs-keyword">return</span> resp, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// GetUser æŸ¥è¯¢å•ä¸ªç”¨æˆ·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *UserService)</span></span> GetUser(ctx context.Context, req *userV1.GetUserRequest) (*userV1.User, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// è°ƒç”¨æ•°æ®å±‚æŸ¥è¯¢</span>
	user, err := s.userRepo.GetUser(ctx, req)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		s.log.Error(<span class="hljs-string">"get user failed: %v"</span>, err)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}
	<span class="hljs-keyword">return</span> user, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// UpdateUser æ›´æ–°ç”¨æˆ·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *UserService)</span></span> UpdateUser(ctx context.Context, req *userV1.UpdateUserRequest) (*emptypb.Empty, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// 1. æ ¡éªŒè¶…çº§ç®¡ç†å‘˜ä¸å¯è¢«ä¿®æ”¹</span>
	<span class="hljs-keyword">if</span> req.Id == <span class="hljs-number">1</span> { <span class="hljs-comment">// å‡è®¾1æ˜¯è¶…çº§ç®¡ç†å‘˜ID</span>
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, userV1.ErrorPermissionDenied(<span class="hljs-string">"cannot update super admin"</span>)
	}

	<span class="hljs-comment">// 2. è°ƒç”¨æ•°æ®å±‚æ›´æ–°</span>
	<span class="hljs-keyword">if</span> err := s.userRepo.UpdateUser(ctx, req); err != <span class="hljs-literal">nil</span> {
		s.log.Error(<span class="hljs-string">"update user failed: %v"</span>, err)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}

	<span class="hljs-keyword">return</span> &amp;emptypb.Empty{}, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// DeleteUser åˆ é™¤ç”¨æˆ·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *UserService)</span></span> DeleteUser(ctx context.Context, req *userV1.DeleteUserRequest) (*emptypb.Empty, <span class="hljs-type">error</span>) {
	<span class="hljs-comment">// 1. æ ¡éªŒè¶…çº§ç®¡ç†å‘˜ä¸å¯è¢«åˆ é™¤</span>
	<span class="hljs-keyword">if</span> req.Id == <span class="hljs-number">1</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, userV1.ErrorPermissionDenied(<span class="hljs-string">"cannot delete super admin"</span>)
	}

	<span class="hljs-comment">// 2. è°ƒç”¨æ•°æ®å±‚åˆ é™¤</span>
	<span class="hljs-keyword">if</span> err := s.userRepo.DeleteUser(ctx, req); err != <span class="hljs-literal">nil</span> {
		s.log.Error(<span class="hljs-string">"delete user failed: %v"</span>, err)
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
	}

	<span class="hljs-keyword">return</span> &amp;emptypb.Empty{}, <span class="hljs-literal">nil</span>
}
</code></pre>
<h3 data-id="heading-22">ä¸ƒã€æ³¨å†ŒæœåŠ¡åˆ° Server</h3>
<p>æœ€åéœ€å°†æœåŠ¡æ³¨å†Œåˆ° gRPC æˆ– REST æœåŠ¡å™¨ï¼Œä½¿å®¢æˆ·ç«¯èƒ½è®¿é—®æœåŠ¡ã€‚æ³¨å†Œä»£ç ä½äº <code>backend/app/admin/service/server</code> ç›®å½•ã€‚</p>
<h4 data-id="heading-23">gRPC æœåŠ¡æ³¨å†Œï¼š</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
	<span class="hljs-string">"github.com/go-kratos/kratos/v2/transport/grpc"</span>
)

<span class="hljs-comment">// æ³¨å†Œ gRPC æœåŠ¡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewGRPCServer</span><span class="hljs-params">(cfg *conf.Bootstrap, userSvc *service.UserService)</span></span> *grpc.Server {
    srv := grpc.NewServer()

    <span class="hljs-comment">// å°† UserService æ³¨å†Œåˆ° gRPC æœåŠ¡å™¨</span>
    userV1.RegisterUserServiceServer(srv, userSvc)

    <span class="hljs-keyword">return</span> srv
}
</code></pre>
<h4 data-id="heading-24">REST æœåŠ¡æ³¨å†Œï¼š</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> (
	<span class="hljs-string">"github.com/go-kratos/kratos/v2/transport/http"</span>
)

<span class="hljs-comment">// æ³¨å†Œ REST æœåŠ¡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewRESTServer</span><span class="hljs-params">(cfg *conf.Bootstrap, userSvc *service.UserService)</span></span> *http.Server {
	<span class="hljs-keyword">if</span> cfg == <span class="hljs-literal">nil</span> || cfg.Server == <span class="hljs-literal">nil</span> || cfg.Server.Rest == <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
	}

	srv := rpc.CreateRestServer(cfg)
   
	<span class="hljs-comment">// å°† UserService æ³¨å†Œåˆ° REST æœåŠ¡å™¨</span>
	adminV1.RegisterUserServiceHTTPServer(srv, userSvc)

	<span class="hljs-keyword">return</span> srv
}
</code></pre>
<h3 data-id="heading-25">å…«ã€æµ‹è¯•æ–°æœåŠ¡</h3>
<p>æœåŠ¡å¼€å‘å®Œæˆåï¼Œéœ€éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§ï¼š</p>
<h4 data-id="heading-26">1. <strong>å•å…ƒæµ‹è¯•ï¼š</strong></h4>
<p>æµ‹è¯• data åŒ…å’Œ service åŒ…çš„æ ¸å¿ƒæ–¹æ³•ï¼ˆä½¿ç”¨ Go å†…ç½®æµ‹è¯•æ¡†æ¶ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// backend/app/admin/service/internal/service/user_service_test.go</span>
<span class="hljs-keyword">package</span> service_test

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"context"</span>
    <span class="hljs-string">"testing"</span>

    <span class="hljs-string">"github.com/stretchr/testify/assert"</span>
    userV1 <span class="hljs-string">"go-wind-admin/api/gen/go/admin/service/v1"</span>
    <span class="hljs-string">"go-wind-admin/app/admin/service/internal/service"</span>
    <span class="hljs-string">"go-wind-admin/mocks"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestCreateUser</span><span class="hljs-params">(t *testing.T)</span></span> {
    <span class="hljs-comment">// åˆå§‹åŒ– mock ä¾èµ–</span>
    mockUserRepo := mocks.NewUserRepo(t)
    svc := service.NewUserService(mockUserRepo, <span class="hljs-literal">nil</span>)

    <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹ï¼šç”¨æˆ·åç©º</span>
    req := &amp;userV1.CreateUserRequest{Password: <span class="hljs-string">"12345678"</span>}
    _, err := svc.CreateUser(context.Background(), req)
    assert.ErrorContains(t, err, <span class="hljs-string">"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"</span>)

    <span class="hljs-comment">// å…¶ä»–æµ‹è¯•ç”¨ä¾‹...</span>
}
</code></pre>
<h4 data-id="heading-27">2. <strong>æ¥å£æµ‹è¯•ï¼š</strong></h4>
<h5 data-id="heading-28">gRPC æ¥å£</h5>
<p>ä½¿ç”¨ <code>grpcurl</code> è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæœåŠ¡æ¥å£</span>
grpcurl -plaintext localhost:9000 list user.service.v1.UserService

<span class="hljs-comment"># è°ƒç”¨åˆ›å»ºç”¨æˆ·æ¥å£</span>
grpcurl -plaintext -d <span class="hljs-string">'{
  "data": {
    "username": "test_admin",
    "nickname": "æµ‹è¯•ç®¡ç†å‘˜",
    "password": "12345678"
  },
  "operator_id": 1
}'</span> localhost:9000 user.service.v1.UserService/CreateUser

<span class="hljs-comment"># è°ƒç”¨åˆ—è¡¨æŸ¥è¯¢æ¥å£</span>
grpcurl -plaintext -d <span class="hljs-string">'{"page": 1, "page_size": 10}'</span> localhost:9000 user.service.v1.UserService/ListUser
</code></pre>
<h5 data-id="heading-29">HTTP æ¥å£</h5>
<p>ä½¿ç”¨ curl æˆ– Postman è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºç”¨æˆ·</span>
curl -X POST http://localhost:8080/admin/v1/users \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "data": {
      "username": "test_admin",
      "nickname": "æµ‹è¯•ç®¡ç†å‘˜",
      "password": "12345678"
    },
    "operator_id": 1
  }'</span>

<span class="hljs-comment"># æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨</span>
curl -X GET <span class="hljs-string">"http://localhost:8080/admin/v1/users?page=1&amp;page_size=10"</span>

<span class="hljs-comment"># æŸ¥è¯¢å•ä¸ªç”¨æˆ·</span>
curl -X GET http://localhost:8080/admin/v1/users/1

<span class="hljs-comment"># æ›´æ–°ç”¨æˆ·</span>
curl -X PUT http://localhost:8080/admin/v1/users/1 \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "data": {
      "nickname": "æ›´æ–°åçš„æ˜µç§°"
    },
    "operator_id": 1
  }'</span>

<span class="hljs-comment"># åˆ é™¤ç”¨æˆ·</span>
curl -X DELETE http://localhost:8080/admin/v1/users/2
</code></pre>
<h3 data-id="heading-30">æ€»ç»“</h3>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬å®Œæˆäº†åŸºäº GORM çš„æ–°æœåŠ¡ä»æ•°æ®åº“è®¾è®¡åˆ°æ¥å£æš´éœ²çš„å…¨æµç¨‹å®ç°ã€‚GoWind Admin æ¡†æ¶çš„åˆ†å±‚æ¶æ„ï¼ˆModel â†’ Data â†’ Service â†’ Serverï¼‰ç¡®ä¿äº†ä»£ç çš„ä½è€¦åˆä¸é«˜å¯ç»´æŠ¤æ€§ï¼š</p>
<ul>
<li><strong>Model å±‚</strong>ï¼šé€šè¿‡ GORM ç»“æ„ä½“å®šä¹‰æ•°æ®æ¨¡å‹ï¼Œæ ‡ç­¾åŒ–é…ç½®è¡¨å±æ€§ï¼Œæ— éœ€æ‰‹åŠ¨ç”Ÿæˆä»£ç ï¼›</li>
<li><strong>Data å±‚</strong>ï¼šå°è£… GORM çš„ CRUD æ“ä½œï¼Œéš”ç¦»ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®åº“è®¿é—®ï¼Œç»Ÿä¸€é”™è¯¯å¤„ç†ï¼›</li>
<li><strong>Service å±‚</strong>ï¼šèšç„¦ä¸šåŠ¡è§„åˆ™ä¸æƒé™æ ¡éªŒï¼Œä¸æ•°æ®å±‚è§£è€¦ï¼Œä¾¿äºå•å…ƒæµ‹è¯•ï¼›</li>
<li><strong>Server å±‚</strong>ï¼šç»Ÿä¸€æ³¨å†Œ gRPC/REST æœåŠ¡ï¼Œæ”¯æŒåŒåè®®è®¿é—®ï¼Œç®€åŒ–éƒ¨ç½²æ‰©å±•ã€‚</li>
</ul>
<p>ç›¸è¾ƒäº Entï¼ŒGORM æ›´è½»é‡åŒ–ã€å­¦ä¹ æˆæœ¬æ›´ä½ï¼Œæ— éœ€ä»£ç ç”Ÿæˆæ­¥éª¤ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘ï¼›åŒæ—¶ GORM æä¾›ä¸°å¯Œçš„æŸ¥è¯¢è¯­æ³•ã€è½¯åˆ é™¤ã€è‡ªåŠ¨è¿ç§»ç­‰ç‰¹æ€§ï¼Œå®Œå…¨æ»¡è¶³ä¼ä¸šçº§ä¸­åå°ç³»ç»Ÿçš„éœ€æ±‚ã€‚éµå¾ªæ­¤æµç¨‹ï¼Œä½ å¯å¿«é€Ÿåœ¨ GoWind Admin ä¸­æ‰©å±•ä»»æ„æ–°æœåŠ¡ï¼Œå……åˆ†åˆ©ç”¨ GORM çš„ä¾¿æ·æ€§æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-31">é¡¹ç›®ä»£ç </h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Ftx7do%2Fgo-wind-admin" target="_blank" title="https://gitee.com/tx7do/go-wind-admin" ref="nofollow noopener noreferrer">go-wind-admin Gitee</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-wind-admin" target="_blank" title="https://github.com/tx7do/go-wind-admin" ref="nofollow noopener noreferrer">go-wind-admin Github</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AWS Lambda Python é“¾è·¯å¯è§‚æµ‹æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7582776967817936896</link>    <guid>https://juejin.cn/post/7582776967817936896</guid>    <pubDate>2025-12-12T11:29:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582776967817936896" data-draft-id="7582759716188389376" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AWS Lambda Python é“¾è·¯å¯è§‚æµ‹æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="AWS"/> <meta itemprop="datePublished" content="2025-12-12T11:29:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AWS Lambda Python é“¾è·¯å¯è§‚æµ‹æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T11:29:50.000Z" title="Fri Dec 12 2025 11:29:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>éšç€ä¼ä¸šæ ¸å¿ƒä¸šåŠ¡å…¨é¢å‘äº‘åŸç”Ÿå’Œæ— æœåŠ¡å™¨æ¶æ„è¿ç§»ï¼ŒAWS Lambda å› å…¶å…è¿ç»´ã€è‡ªåŠ¨æ‰©ç¼©å®¹å’ŒæŒ‰è°ƒç”¨è®¡è´¹çš„ä¼˜åŠ¿ï¼Œå·²æˆä¸ºæ”¯æ’‘é«˜å¹¶å‘ã€äº‹ä»¶é©±åŠ¨å‹ä¸šåŠ¡çš„é¦–é€‰è®¡ç®—å¹³å°ã€‚ç„¶è€Œï¼ŒServerless çš„â€œé»‘ç›’åŒ–â€ç‰¹å¾ä¹Ÿå¸¦æ¥äº†æ–°çš„å¯è§‚æµ‹æ€§æŒ‘æˆ˜ï¼š</p>
<ul>
<li>åˆ†å¸ƒå¼é“¾è·¯æ–­è£‚ï¼šLambda å‡½æ•°å¾€å¾€ä½œä¸ºäº‹ä»¶è§¦å‘é“¾ä¸­çš„å…³é”®ä¸€ç¯ï¼Œä¸ API Gatewayã€S3ã€SQSã€DynamoDB ç­‰æœåŠ¡äº¤å‰è°ƒç”¨ï¼Œä¼ ç»Ÿ APM éš¾ä»¥ä¸²è”å®Œæ•´è°ƒç”¨é“¾ã€‚</li>
<li>å†·å¯åŠ¨ä¸æ€§èƒ½ç“¶é¢ˆéš¾å®šä½ï¼šå‡½æ•°åˆå§‹åŒ–è€—æ—¶ã€ä¾èµ–åº“åŠ è½½ã€ç½‘ç»œå»¶è¿Ÿç­‰æ€§èƒ½æŒ‡æ ‡ç¼ºä¹ç»†ç²’åº¦è¿½è¸ªï¼Œå½±å“ç”¨æˆ·ä½“éªŒä¸æˆæœ¬æ§åˆ¶ã€‚</li>
<li>å¤šç¯å¢ƒã€å¤šè´¦å·ä¸‹çš„è§‚æµ‹ä¸€è‡´æ€§ç¼ºå¤±ï¼šDevã€QAã€Prod ç¯å¢ƒå‡½æ•°æ•°é‡ä¼—å¤šï¼Œè‹¥æ²¡æœ‰ç»Ÿä¸€çš„é“¾è·¯æ ‡å‡†å’Œæ ‡ç­¾è§„èŒƒï¼Œé—®é¢˜å®šä½æ•ˆç‡ä½ï¼Œè·¨å›¢é˜Ÿåä½œæˆæœ¬é«˜ã€‚</li>
</ul>
<p>ä¸ºä¿éšœçº¿ä¸Šç¨³å®šæ€§ã€ä¼˜åŒ–å‡½æ•°æ€§èƒ½ã€å®ç° Serverless åœºæ™¯ä¸‹çš„å¯è§‚æµ‹é—­ç¯ï¼ŒäºŸéœ€åŸºäº Python è¿è¡Œæ—¶æ„å»ºä¸€å¥—æ ‡å‡†åŒ–æ–¹æ¡ˆï¼Œæä¾›ä»åŸç†ã€ä»£ç ç¤ºä¾‹åˆ°ç”Ÿäº§çº§éƒ¨ç½²çš„å®Œæ•´è½åœ°æ–¹æ¡ˆï¼ŒåŠ©åŠ›ä¼ä¸šåœ¨ Serverless æ¶æ„ä¸‹å®ç°â€œ<strong>é—®é¢˜å¯è¿½è¸ªã€æ€§èƒ½å¯é‡åŒ–ã€æˆæœ¬å¯ä¼˜åŒ–</strong>â€çš„ç›®æ ‡ã€‚</p>
<p>AWS æä¾›äº†ä¸¤ç§é“¾è·¯åè®®æ”¯æŒç”¨äº Lambda å‡½æ•°çš„é“¾è·¯è¿½è¸ªï¼šOpenTelemetryã€X-Rayã€‚å½“å‰æœ€ä½³å®è·µä¸»è¦æ˜¯é‡‡ç”¨ OpenTelemetry åè®®æ¥å®ç°é“¾è·¯å¯è§‚æµ‹ã€‚</p>
<h2 data-id="heading-1">è§‚æµ‹äº‘</h2>
<p>è§‚æµ‹äº‘æ˜¯ä¸€æ¬¾ä¸“ä¸º IT å·¥ç¨‹å¸ˆæ‰“é€ çš„å…¨é“¾è·¯å¯è§‚æµ‹äº§å“ï¼Œå®ƒé›†æˆäº†åŸºç¡€è®¾æ–½ç›‘æ§ã€åº”ç”¨ç¨‹åºæ€§èƒ½ç›‘æ§å’Œæ—¥å¿—ç®¡ç†ï¼Œä¸ºæ•´ä¸ªæŠ€æœ¯æ ˆæä¾›å®æ—¶å¯è§‚å¯Ÿæ€§ã€‚æ”¯æŒé€šè¿‡ä¸€é”®é›†æˆ OpenTelemetry æ ‡å‡† SDK/Collectorï¼ŒæŠŠåˆ†å¸ƒå¼é“¾è·¯ã€æŒ‡æ ‡ã€æ—¥å¿—ä¸‰ä¿¡å·ç»Ÿä¸€é‡‡é›†å¹¶äº‘ç«¯æ‰˜ç®¡ï¼Œåœ¨ OTel çš„å‚å•†ä¸­ç«‹æ ¼å¼ä¹‹ä¸Šæä¾›å³å¼€å³ç”¨çš„ä»ªè¡¨ã€å‘Šè­¦ä¸ AI å¼‚å¸¸æ£€æµ‹ï¼Œè®©ç”¨æˆ·å…è¿ç»´åç«¯å³å¯æŠŠäº‘åŸç”Ÿåº”ç”¨çš„å¯è§‚æµ‹æ•°æ®â€œæ‹¿æ¥å³ç”¨â€ï¼Œå®ç°ä»é“¾è·¯åˆ°ä¸šåŠ¡åœºæ™¯çš„ç«¯åˆ°ç«¯å¯è§†åŒ–ã€‚</p>
<h2 data-id="heading-2">å®è·µ</h2>
<p>AWS Lambda ä½¿ç”¨ Python è¯­è¨€ç¼–å†™å‡½æ•°ï¼Œå¹¶è°ƒç”¨åº”ç”¨æœåŠ¡ï¼Œåº”ç”¨æœåŠ¡ä¸º java è¯­è¨€ã€‚åŒæ—¶éœ€è¦å°†å¯è§‚æµ‹æ•°æ®ä¸ŠæŠ¥è‡³è§‚æµ‹äº‘ã€‚</p>
<h3 data-id="heading-3">å‡†å¤‡ Lambda Layer</h3>
<p>éœ€è¦æ–°å¢ä»¥ä¸‹ä¸¤ä¸ª Layer</p>
<ul>
<li>Opentelemetry Layerï¼šç”¨äºé“¾è·¯æ’æ¡©</li>
<li>DataKit Layer: ç”¨äºæ¥æ”¶ Opentelemetry çš„å¯è§‚æµ‹æ•°æ®</li>
</ul>
<h4 data-id="heading-4">Opentelemetry Layer</h4>
<p>ä½¿ç”¨ OpenTelemetry è‡ªåŠ¨æ’æ¡©æ–¹å¼å¯ä»¥é›¶ä¾µå…¥ Python ä»£ç å®ç°é“¾è·¯è¿½è¸ªï¼Œè¿™é‡Œ OpenTelemetry å¯ä»¥ä½œä¸º layer é™„ç€åˆ° Lambda å‡½æ•°å†…éƒ¨ã€‚</p>
<p>AWS å®å¤èŠ‚ç‚¹éœ€è¦æ‰‹åŠ¨æ„å»º OpenTelemetry layerï¼Œå…¶ä»–èŠ‚ç‚¹å¯ç›´æ¥ä½¿ç”¨å¯¹åº”çš„ ARNï¼Œè¿™é‡Œä¸»è¦ä»‹ç»æ‰‹åŠ¨æ„å»ºæ–¹å¼ï¼š</p>
<p>1ã€ä¸‹è½½æºç </p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/open-telemetry/opentelemetry-lambda.git
</code></pre>
<p>2ã€æ„å»º</p>
<p>æ„å»ºå‰ï¼Œä¸»è¦å®‰è£…ç›¸å…³ AWS å·¥å…·ï¼Œå¯ä»¥å‚è€ƒä»“åº“ README æ–‡ä»¶ï¼Œå‡è®¾ä»¥åŠè£…å¥½äº†ç›¸å…³å·¥å…·ï¼Œæ‰§è¡Œä¸‹é¢æ“ä½œè¿›è¡Œæ„å»ºï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">liurui<span class="hljs-variable">@liurui</span><span class="hljs-symbol">:~/code/opentelemetry-lambda</span><span class="hljs-variable">$ </span>cd python/src
liurui<span class="hljs-variable">@liurui</span><span class="hljs-symbol">:~/code/opentelemetry-lambda/python/src</span><span class="hljs-variable">$ </span>./run.sh -r cn-northwest-<span class="hljs-number">1</span>
</code></pre>
<p>æ„å»ºéƒ¨åˆ†æ—¥å¿—å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">running...
<span class="hljs-title class_">Invoked</span> <span class="hljs-symbol">with:</span> -r cn-northwest-<span class="hljs-number">1</span>
sam building...
run.<span class="hljs-symbol">sh:</span> <span class="hljs-title class_">Starting</span> sam build.
<span class="hljs-title class_">Starting</span> <span class="hljs-title class_">Build</span> inside a container                                                                                                                               
<span class="hljs-title class_">Building</span> layer <span class="hljs-string">'OTelLayer'</span>                                                                                                                                      
<span class="hljs-title class_">For</span> container layer build, first compatible runtime is chosen as build target <span class="hljs-keyword">for</span> container.                                                                    

<span class="hljs-title class_">Fetching</span> <span class="hljs-keyword">public</span>.ecr.aws/sam/build-python3.<span class="hljs-number">9</span><span class="hljs-symbol">:latest-x86_64</span> <span class="hljs-title class_">Docker</span> container image......
<span class="hljs-title class_">Mounting</span> /home/liurui/code/opentelemetry-<span class="hljs-built_in">lambda</span>/python/src/otel as /tmp/samcli/<span class="hljs-symbol">source:</span>ro,delegated, inside runtime container       


<span class="hljs-title class_">Successfully</span> created/updated stack - otel-stack <span class="hljs-keyword">in</span> cn-northwest-<span class="hljs-number">1</span>


<span class="hljs-title class_">OTel</span> <span class="hljs-title class_">Lambda</span> layer <span class="hljs-variable constant_">ARN</span>:
<span class="hljs-symbol">arn:</span>aws-<span class="hljs-symbol">cn:</span><span class="hljs-symbol">lambda:</span>cn-northwest-<span class="hljs-number">1</span><span class="hljs-symbol">:</span><span class="hljs-number">888888888</span><span class="hljs-symbol">:layer</span><span class="hljs-symbol">:otel-layer</span><span class="hljs-symbol">:</span><span class="hljs-number">2</span>
</code></pre>
<p>æ„å»ºæˆåŠŸåï¼Œè‡ªåŠ¨ä¸Šä¼ åœ¨ AWS Layer ä¸Š otel-layerï¼Œå¤åˆ¶å½“å‰ ARNï¼Œåç»­æ“ä½œä¼šç”¨åˆ°ã€‚</p>
<h4 data-id="heading-5">DataKit Layer</h4>
<p>DataKit Layer æ˜¯è§‚æµ‹äº‘ç ”å‘çš„ AWS Lambda Layerï¼Œç”¨äºé‡‡é›†ã€ä¸ŠæŠ¥é“¾è·¯ã€æŒ‡æ ‡ã€æ—¥å¿—ç­‰æ•°æ®ã€‚å¯ä»¥æ¥æ”¶ OpenTelemetry é“¾è·¯ä¿¡æ¯ ã€‚</p>
<p>ç™»å½• AWS Lambda æ§åˆ¶å°ï¼Œåˆ›å»ºåä¸º datakit-x86_64 layerï¼Œå¯è‡ªè¡Œè°ƒæ•´ï¼Œé€‰æ‹©äº Python åº”ç”¨ç›¸ç¬¦çš„æ¶æ„ï¼Œå½“å‰ä¸»è¦æ˜¯ AMD æ¶æ„ï¼Œæ ¹æ®æ¶æ„ï¼Œé€‰æ‹©ä¸‹é¢çš„å‹ç¼©åŒ…è¿›è¡Œä¸Šä¼ ï¼Œä¿å­˜å³å¯ï¼š</p>
<ul>
<li>AMDæ¶æ„ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fstatic.guance.com%2Fdatakit%2Fdatakit_aws_extension-linux-amd64.zip" target="_blank" title="https://static.guance.com/datakit/datakit_aws_extension-linux-amd64.zip" ref="nofollow noopener noreferrer">static.guance.com/datakit/datâ€¦</a></li>
<li>ARMæ¶æ„ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fstatic.guance.com%2Fdatakit%2Fdatakit_aws_extension-linux-arm64.zip" target="_blank" title="https://static.guance.com/datakit/datakit_aws_extension-linux-arm64.zip" ref="nofollow noopener noreferrer">static.guance.com/datakit/datâ€¦</a></li>
</ul>
<h3 data-id="heading-6">Lambda å‡½æ•°</h3>
<h4 data-id="heading-7">åˆ›å»º Lambda å‡½æ•°</h4>
<p>åˆ›å»º Lambda å‡½æ•°ï¼Œè¿è¡Œæ—¶é€‰æ‹© Pythonï¼Œæ¶æ„é€‰æ‹© x86_64ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8a1597f6cf2494f881b0a1be97fdfa6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766143790&amp;x-signature=Kste%2FRQni7oKoYw3y13mzbZ5cbo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-8">æ–°å¢ç¤ºä¾‹ä»£ç </h4>
<p>åœ¨Â <code>lambda_function.py</code>Â æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> urllib.request
<span class="hljs-keyword">import</span> urllib.error
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># ä¸Šæ¸¸æ¥å£</span>
UPSTREAM_URL = <span class="hljs-string">"http://javaæœåŠ¡æ¥å£:8090/user"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">lambda_handler</span>(<span class="hljs-params">event, context</span>):
    <span class="hljs-string">"""
    å¸¦æ—¥å¿—çš„æ¥å£è½¬å‘ç¤ºä¾‹
    """</span>
    <span class="hljs-comment"># 1. å– Lambda RequestIdï¼Œæ–¹ä¾¿å…¨é“¾è·¯è¿½è¸ª</span>
    request_id = context.aws_request_id
    <span class="hljs-built_in">print</span>(json.dumps({
        <span class="hljs-string">"level"</span>: <span class="hljs-string">"INFO"</span>,
        <span class="hljs-string">"requestId"</span>: request_id,
        <span class="hljs-string">"message"</span>: <span class="hljs-string">"Lambda invoke start"</span>,
        <span class="hljs-string">"event"</span>: event
    }))

    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 2. è§£æå…¥å‚</span>
        params = event.get(<span class="hljs-string">"queryStringParameters"</span>) <span class="hljs-keyword">or</span> {}
        todo_id = params.get(<span class="hljs-string">"id"</span>, <span class="hljs-string">"1"</span>)
        <span class="hljs-built_in">print</span>(json.dumps({
            <span class="hljs-string">"level"</span>: <span class="hljs-string">"INFO"</span>,
            <span class="hljs-string">"requestId"</span>: request_id,
            <span class="hljs-string">"message"</span>: <span class="hljs-string">"Parsed todo_id"</span>,
            <span class="hljs-string">"todo_id"</span>: todo_id
        }))

        <span class="hljs-comment"># 3. è°ƒç”¨ä¸Šæ¸¸</span>
        upstream = UPSTREAM_URL
        <span class="hljs-built_in">print</span>(json.dumps({
            <span class="hljs-string">"level"</span>: <span class="hljs-string">"INFO"</span>,
            <span class="hljs-string">"requestId"</span>: request_id,
            <span class="hljs-string">"message"</span>: <span class="hljs-string">"Upstream request start"</span>,
            <span class="hljs-string">"url"</span>: upstream
        }))
        start = time.time()

        req = urllib.request.Request(upstream, method=<span class="hljs-string">"GET"</span>)
        <span class="hljs-keyword">with</span> urllib.request.urlopen(req, timeout=<span class="hljs-number">5</span>) <span class="hljs-keyword">as</span> resp:
            upstream_body = resp.read().decode(<span class="hljs-string">"utf-8"</span>)
            upstream_json = json.loads(upstream_body)

        latency = <span class="hljs-built_in">round</span>((time.time() - start) * <span class="hljs-number">1000</span>, <span class="hljs-number">2</span>)
        <span class="hljs-built_in">print</span>(json.dumps({
            <span class="hljs-string">"level"</span>: <span class="hljs-string">"INFO"</span>,
            <span class="hljs-string">"requestId"</span>: request_id,
            <span class="hljs-string">"message"</span>: <span class="hljs-string">"Upstream request finish"</span>,
            <span class="hljs-string">"statusCode"</span>: resp.status,
            <span class="hljs-string">"latency_ms"</span>: latency
        }))

        <span class="hljs-comment"># 4. è¿”å›</span>
        response_body = {
            <span class="hljs-string">"message"</span>: <span class="hljs-string">"Hello from Lambda!"</span>,
            <span class="hljs-string">"upstream"</span>: upstream_json
        }
        <span class="hljs-built_in">print</span>(json.dumps({
            <span class="hljs-string">"level"</span>: <span class="hljs-string">"INFO"</span>,
            <span class="hljs-string">"requestId"</span>: request_id,
            <span class="hljs-string">"message"</span>: <span class="hljs-string">"Lambda invoke success"</span>,
            <span class="hljs-string">"response"</span>: response_body
        }))
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"statusCode"</span>: <span class="hljs-number">200</span>,
            <span class="hljs-string">"headers"</span>: {<span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>},
            <span class="hljs-string">"body"</span>: json.dumps(response_body)
        }

    <span class="hljs-comment"># 5. å¼‚å¸¸åˆ†æ”¯æ—¥å¿—</span>
    <span class="hljs-keyword">except</span> urllib.error.HTTPError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(json.dumps({
            <span class="hljs-string">"level"</span>: <span class="hljs-string">"ERROR"</span>,
            <span class="hljs-string">"requestId"</span>: request_id,
            <span class="hljs-string">"message"</span>: <span class="hljs-string">"Upstream HTTPError"</span>,
            <span class="hljs-string">"statusCode"</span>: e.code,
            <span class="hljs-string">"reason"</span>: e.reason
        }))
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"statusCode"</span>: e.code,
            <span class="hljs-string">"body"</span>: json.dumps({<span class="hljs-string">"error"</span>: <span class="hljs-string">f"Upstream HTTPError: <span class="hljs-subst">{e.reason}</span>"</span>})
        }

    <span class="hljs-keyword">except</span> urllib.error.URLError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(json.dumps({
            <span class="hljs-string">"level"</span>: <span class="hljs-string">"ERROR"</span>,
            <span class="hljs-string">"requestId"</span>: request_id,
            <span class="hljs-string">"message"</span>: <span class="hljs-string">"Upstream URLError"</span>,
            <span class="hljs-string">"reason"</span>: <span class="hljs-built_in">str</span>(e.reason)
        }))
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"statusCode"</span>: <span class="hljs-number">502</span>,
            <span class="hljs-string">"body"</span>: json.dumps({<span class="hljs-string">"error"</span>: <span class="hljs-string">f"Upstream URLError: <span class="hljs-subst">{e.reason}</span>"</span>})
        }

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(json.dumps({
            <span class="hljs-string">"level"</span>: <span class="hljs-string">"ERROR"</span>,
            <span class="hljs-string">"requestId"</span>: request_id,
            <span class="hljs-string">"message"</span>: <span class="hljs-string">"Unknown exception"</span>,
            <span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e)
        }))
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"statusCode"</span>: <span class="hljs-number">500</span>,
            <span class="hljs-string">"body"</span>: json.dumps({<span class="hljs-string">"error"</span>: <span class="hljs-built_in">str</span>(e)})
        }
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/171d86e26b5e46a2aee343121ecc0bd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766143790&amp;x-signature=4vOqjbfQOgLydzjtPdCfqcg9JMU%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ å®Œæˆåï¼Œç‚¹å‡» Deploy è¿›è¡Œéƒ¨ç½²ã€‚</p>
<h4 data-id="heading-9">æ·»åŠ  Layer</h4>
<p>ç‚¹å‡» Layger è¿›è¡Œæ·»åŠ ï¼Œé€‰æ‹© æŒ‡å®šä¸€ä¸ª ARN è¿›è¡Œæ·»åŠ ï¼ŒARN ä¸ºä¸Šé¢å‡†å¤‡å·¥ä½œäº§ç”Ÿçš„ Layer ARN åœ°å€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c46406e591c4e66a736f9db67cf8519~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766143790&amp;x-signature=6q45E9u5FQSilFQiY6JSvxBkads%3D" alt="" loading="lazy"/></p>
<p>ç¡®ä¿å·²ç»æ·»åŠ äº†ä»¥ä¸‹ä¸¤ä¸ª Layerã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff147bb23d0c4e17994f0ed205b7176d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766143790&amp;x-signature=WIrLZ0cLtVXUVRvBz4CL0QPY4JE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">æ·»åŠ ç¯å¢ƒå˜é‡</h4>
<p>åœ¨å¯¹åº”çš„å‡½æ•°é…ç½®é‡Œé¢è¿›è¡Œæ·»åŠ ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># otel lambda handler</span>
<span class="hljs-attr">AWS_LAMBDA_EXEC_WRAPPER</span> = /opt/python/otel-handler
<span class="hljs-comment"># è§‚æµ‹äº‘ç½‘å…³åœ°å€</span>
<span class="hljs-attr">ENV_DATAWAY</span> = http://open****?token=xxxxxxx
<span class="hljs-comment"># otel ä¸ŠæŠ¥åœ°å€ï¼Œæ— éœ€è°ƒæ•´</span>
<span class="hljs-attr">OTEL_EXPORTER_OTLP_ENDPOINT</span> = http://localhost:<span class="hljs-number">9529</span>/otel
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/687db1a5e6e94845b907278fd936c94f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766143790&amp;x-signature=CUCnPl9fDFlfLi9eHkVCli6hmSQ%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-11">æµ‹è¯•</h4>
<p>ç‚¹å‡»æµ‹è¯•æŒ‰é’®è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/611f3b94f590400bb131040b1cdf0031~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766143790&amp;x-signature=n27Hy6kuYGNvDoPl1rLG98QqMWI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">è§‚æµ‹äº‘é“¾è·¯æ•ˆæœ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84d09d0094554193aba9eb046aa19f2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766143790&amp;x-signature=b4o7ppuaxph%2BgZpEl3D48YmKNZs%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€GPT-5.2åˆèµ¢äº†ï¼Ÿæˆ‘ç”¨ä¸€å¥—â€œå¼€å‘è€…è§†è§’â€çš„å®æµ‹æµç¨‹ï¼ŒçœŸå®èƒ½åŠ›ä¸€çœ‹ä¾¿çŸ¥ï¼]]></title>    <link>https://juejin.cn/post/7582815307438784563</link>    <guid>https://juejin.cn/post/7582815307438784563</guid>    <pubDate>2025-12-12T11:40:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582815307438784563" data-draft-id="7582815307438751795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€GPT-5.2åˆèµ¢äº†ï¼Ÿæˆ‘ç”¨ä¸€å¥—â€œå¼€å‘è€…è§†è§’â€çš„å®æµ‹æµç¨‹ï¼ŒçœŸå®èƒ½åŠ›ä¸€çœ‹ä¾¿çŸ¥ï¼"/> <meta itemprop="keywords" content="OpenAI,AIç¼–ç¨‹,VibeCoding"/> <meta itemprop="datePublished" content="2025-12-12T11:40:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="win4r"/> <meta itemprop="url" content="https://juejin.cn/user/1739869037541555"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€GPT-5.2åˆèµ¢äº†ï¼Ÿæˆ‘ç”¨ä¸€å¥—â€œå¼€å‘è€…è§†è§’â€çš„å®æµ‹æµç¨‹ï¼ŒçœŸå®èƒ½åŠ›ä¸€çœ‹ä¾¿çŸ¥ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739869037541555/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    win4r
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-12T11:40:31.000Z" title="Fri Dec 12 2025 11:40:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ æœ€è¿‘ä¹Ÿåˆ·åˆ°äº† OpenAI åœ¨ 12 æœˆ 11 æ—¥ï¼ˆç¾è¥¿æ—¶é—´ï¼‰å‘å¸ƒ GPT-5.2 çš„æ¶ˆæ¯ï¼Œä½ å¤§æ¦‚ç‡ä¼šçœ‹åˆ°ä¸¤ç±»å£°éŸ³ï¼š<br/>
ä¸€ç±»è¯´â€œç»ˆäºå›æ¥äº†ï¼Œç¼–ç¨‹æ›´å¼ºã€å·¥å…·æ›´ç¨³ã€é•¿ä»»åŠ¡æ›´èƒ½è·‘â€ï¼›å¦ä¸€ç±»è¯´â€œåˆ«æ€¥ç€å¹ï¼Œè·‘åˆ†ä¸ç­‰äºèƒ½è½åœ°ï¼ŒçœŸä¸Šé¡¹ç›®å¯èƒ½è¿˜æ˜¯ç¿»è½¦â€ã€‚</p>
<p>ğŸ”¥ğŸ”¥ğŸ”¥æœ¬ç¯‡ç¬”è®°æ‰€å¯¹åº”çš„è§†é¢‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1bWm7B2EH7%2F" target="_blank" title="https://www.bilibili.com/video/BV1bWm7B2EH7/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1bWâ€¦</a></p>
<p>æ‰€ä»¥è¿™ç¯‡æ–‡ç« æˆ‘æƒ³åšä¸€ä»¶æ›´â€œå¯¹è§‚ä¼—è´Ÿè´£â€çš„äº‹ï¼š<br/>
ä¸€åŠè®²å®˜æ–¹åˆ°åº•åœ¨å¼ºè°ƒä»€ä¹ˆèƒ½åŠ›æå‡ï¼›å¦ä¸€åŠå®Œå…¨ç…§ç€è§†é¢‘å­—å¹•é‡Œçš„æµ‹è¯•æµç¨‹ï¼ŒæŠŠæˆ‘æ€ä¹ˆæµ‹ã€æµ‹äº†å“ªäº›é¢˜ã€æ¯é¢˜ç»“æœå¦‚ä½•ã€å“ªé‡Œå¼ºå“ªé‡Œå¼±ï¼Œå®¢è§‚åœ°å…¬å¼€å‡ºæ¥ã€‚ä½ çœ‹å®ŒåŸºæœ¬å°±èƒ½åˆ¤æ–­ï¼šGPT-5.2 å€¼ä¸å€¼å¾—ä½ ç«‹åˆ»è¿ç§»å·¥ä½œæµã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å®˜æ–¹æ€ä¹ˆå®šä¹‰ GPT-5.2ï¼šæ›´åâ€œç”Ÿäº§åŠ›â€å’Œâ€œé•¿ä»»åŠ¡â€çš„æ——èˆ°å‡çº§</h2>
<p>å…ˆæŠŠå®˜æ–¹å£å¾„è®²æ¸…æ¥šï¼Œå…å¾—æˆ‘ä»¬æ‹¿å®ƒå»åšå®ƒæ ¹æœ¬æ²¡ä¸»æ‰“çš„äº‹æƒ…ã€‚</p>
<p>ä» OpenAI çš„å®˜æ–¹ä»‹ç»æ¥çœ‹ï¼ŒGPT-5.2 çš„å…³é”®è¯éå¸¸æ˜ç¡®ï¼š<strong>æ›´èƒ½åˆ›é€ â€œç»æµä»·å€¼â€ï¼ˆproductive workï¼‰</strong> ï¼Œæ›´æ“…é•¿<strong>ä»£ç ã€è¡¨æ ¼ã€æ¼”ç¤ºæ–‡ç¨¿ã€å›¾åƒç†è§£ã€é•¿ä¸Šä¸‹æ–‡ã€å¤šæ­¥éª¤é¡¹ç›®ä¸å·¥å…·è°ƒç”¨</strong>ã€‚ä¹Ÿå°±æ˜¯ï¼šå®ƒå¹¶ä¸æ˜¯åªè¿½æ±‚â€œèŠå¤©æ›´åƒäººâ€ï¼Œè€Œæ˜¯æ›´åâ€œèƒ½æŠŠä¸€ä»¶å¤æ‚äº‹åšå®Œâ€çš„å·¥ä½œå‹æ¨¡å‹ã€‚ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fintroducing-gpt-5-2%2F%3Futm_source%3Dchatgpt.com" title="https://openai.com/index/introducing-gpt-5-2/?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">OpenAI</a>)</p>
<p>å¦å¤–ï¼Œåœ¨ ChatGPT äº§å“ä¾§ï¼Œå®˜æ–¹æŠŠ GPT-5.2 æ‹†æˆäº†å¤šä¸ªå­å‹å·ï¼ˆä¾‹å¦‚ Instant / Thinking ç­‰ï¼‰ï¼Œå¹¶å¼ºè°ƒæ•´ä½“æ²Ÿé€šé£æ ¼ä¹Ÿåšäº†æ”¹å–„ï¼šæ›´é€‚åˆä¿¡æ¯æ£€ç´¢ã€how-toã€æŠ€æœ¯å†™ä½œã€ç¿»è¯‘ç­‰ï¼ŒåŒæ—¶æ›´è‡ªç„¶æ›´é¡ºæ»‘ã€‚ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.openai.com%2Fen%2Farticles%2F11909943-gpt-52-in-chatgpt%3Futm_source%3Dchatgpt.com" title="https://help.openai.com/en/articles/11909943-gpt-52-in-chatgpt?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">OpenAI Help Center</a>)</p>
<p>å†å¾€â€œå·¥å…·åŒ–â€æ–¹å‘çœ‹ï¼ŒOpenAI ä»Šå¹´åœ¨ Atlas é‡Œæ¨çš„ agent modeï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è®© ChatGPT åœ¨æµè§ˆå™¨é‡Œå…·å¤‡æ›´å¼ºçš„ä»»åŠ¡æ‰§è¡Œèƒ½åŠ›ï¼ˆç ”ç©¶ã€è‡ªåŠ¨åŒ–æ“ä½œã€è§„åˆ’ç­‰ï¼‰ï¼Œå¹¶ä¸”å¼ºè°ƒâ€œåœ¨ä½ çš„æ§åˆ¶ä¸‹â€å®Œæˆç«¯åˆ°ç«¯ä»»åŠ¡ã€‚ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fintroducing-chatgpt-atlas%2F%3Futm_source%3Dchatgpt.com" title="https://openai.com/index/introducing-chatgpt-atlas/?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">OpenAI</a>)</p>
<p>å¦‚æœæŠŠè¿™äº›å®˜æ–¹æè¿°ç¿»è¯‘æˆäººè¯ï¼š</p>
<blockquote>
<p>GPT-5.2 çš„é‡å¿ƒä¸æ˜¯â€œåˆä¼šèƒŒæ›´å¤šçŸ¥è¯†ç‚¹â€ï¼Œè€Œæ˜¯æŠŠæ¨¡å‹å¾€â€œæ›´åƒä¸€ä½èƒ½åšé¡¹ç›®çš„åŒäº‹â€æ–¹å‘æ¨â€”â€”èƒ½è¯»å›¾ã€èƒ½å†™ä»£ç ã€èƒ½ä¸²å·¥å…·ã€èƒ½è·‘é•¿æµç¨‹ã€‚</p>
</blockquote>
<p>è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆä½ åœ¨è§†é¢‘é‡Œä¼šçœ‹åˆ°ï¼šæˆ‘ä¸æ˜¯åªåšå‡ é“ LeetCodeï¼Œè€Œæ˜¯ç”¨<strong>UI å¤åˆ»ã€SVG åŠ¨ç”»ã€PyGame ç®—æ³•åŠ¨ç”»ã€æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€Manim 3D å¯è§†åŒ–ã€è·¨æ¡†æ¶é‡æ„ã€iOS æ¶æ„è¿ç§»ã€å…¨æ ˆ MVP</strong>è¿™ç±»æ›´è´´è¿‘çœŸå®å¼€å‘çš„ä»»åŠ¡æ¥æµ‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€æˆ‘çš„å®æµ‹æ–¹æ³•ï¼šä¸è¿½æ±‚â€œé¢˜åˆâ€ï¼Œè¿½æ±‚â€œåƒçœŸå®å·¥ä½œä¸€æ ·ä¼šæš´éœ²é—®é¢˜â€</h2>
<p>è§†é¢‘é‡Œæˆ‘å…ˆæŠŠæµ‹è¯•åŸåˆ™æ‘†å‡ºæ¥ï¼š<br/>
ä¹‹å‰ GPT-5.1 å‘å¸ƒæ—¶æˆ‘åšè¿‡ä¸€æ¬¡æµ‹è¯„ï¼Œç»“æœå¹¶ä¸å¥½ï¼›å½“æ—¶è¯„è®ºåŒºæœ‰åå¯¹å£°éŸ³ï¼Œä½†å‡ å¤©åå¼€å‘è€…ç¤¾åŒºä¹Ÿå¼€å§‹åæ§½â€œGPT-5.1 è¿˜ä¸å¦‚ GPT-5.0â€ã€‚è¿™åè¿‡æ¥è¯´æ˜ï¼š<strong>åªè¦æµ‹è¯•æ¡ˆä¾‹è¶³å¤Ÿè´´è¿‘æ—¥å¸¸å·¥ä½œï¼Œå°±èƒ½çœŸå®åæ˜ æ¨¡å‹èƒ½åŠ›</strong>ã€‚</p>
<p>å› æ­¤è¿™æ¬¡æµ‹ GPT-5.2ï¼Œæˆ‘æ²¿ç”¨åŒä¸€å¥—ç­–ç•¥ï¼š</p>
<ul>
<li><strong>é¢˜ç›®è¦†ç›–é¢è¦å¹¿</strong>ï¼šå‰ç«¯/UIã€åŠ¨ç”»ã€ç®—æ³•ã€å·¥å…·è‡ªåŠ¨åŒ–ã€é‡æ„ã€å…¨æ ˆ</li>
<li><strong>æ¯é¢˜éƒ½èƒ½éªŒæ”¶</strong>ï¼šè¦ä¹ˆè·‘èµ·æ¥ï¼Œè¦ä¹ˆæ˜ç¡®å¤±è´¥ç‚¹åœ¨å“ªé‡Œ</li>
<li><strong>å°½é‡å‡å°‘ä¸»è§‚æ»¤é•œ</strong>ï¼šæˆ‘åªè®°å½•å®ƒåšåˆ°äº†ä»€ä¹ˆã€æ²¡åšåˆ°ä»€ä¹ˆ</li>
</ul>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ChatGPT ç½‘é¡µç«¯ï¼šå…ˆæµ‹â€œä¿¡æ¯æ–°é²œåº¦â€ï¼Œå†æµ‹â€œè¯»å›¾+å‰ç«¯è½åœ°â€</h2>
<h3 data-id="heading-3">1ï¼‰çŸ¥è¯†åº“æˆªæ­¢æ—¥æœŸï¼š2025 å¹´ 8 æœˆï¼ˆç›¸å¯¹æ–°ï¼‰</h3>
<p>ç¬¬ä¸€æ­¥æˆ‘å…ˆé—®çŸ¥è¯†åº“æˆªæ­¢æ—¥æœŸï¼ŒGPT-5.2 ç»™åˆ°çš„æˆªæ­¢æ—¶é—´æ˜¯ <strong>2025 å¹´ 8 æœˆ</strong>ï¼Œå¹¶ä¸”æˆ‘åœ¨è§†é¢‘é‡Œæåˆ°â€œæ¯” Claude Opus 4.5 è¿˜è¦æ–°â€ã€‚è¿™ä¸€ç‚¹çš„æ„ä¹‰åœ¨äºï¼šå®ƒåœ¨è§£é‡Šæ–°æ¡†æ¶/æ–°å·¥å…·æ—¶ï¼Œ<strong>è‡³å°‘ä¸å¤ªå®¹æ˜“å¡åœ¨è¿‡æ—§çš„çŸ¥è¯†ä¸Š</strong>ã€‚</p>
<h3 data-id="heading-4">2ï¼‰å‰ç«¯ UI å¤åˆ»ï¼šå¤æ‚ä»ªè¡¨ç›˜æˆªå›¾ â†’ ç›´æ¥ç»™å¯è¿è¡Œä»£ç </h3>
<p>æ¥ç€æˆ‘å‡†å¤‡äº†ä¸€å¼ â€œæ¯”è¾ƒå¤æ‚çš„ UI æˆªå›¾â€ï¼ˆä»ªè¡¨ç›˜ï¼‰ï¼Œç„¶åç›´æ¥ç»™æç¤ºè¯ï¼š</p>
<ul>
<li>ç”¨æœ€é€‚åˆçš„å‰ç«¯æŠ€æœ¯</li>
<li><strong>ç™¾åˆ†ç™¾å¤åˆ»</strong>ä»ªè¡¨ç›˜</li>
<li>å¦‚æœéœ€è¦å›¾åƒï¼Œ<strong>ç›´æ¥æˆªå–æˆªå›¾é‡Œçš„å›¾åƒ</strong></li>
<li>ä¸è¦ç”¨ placeholder</li>
</ul>
<p>è¿™é‡Œæˆ‘ç‰¹æ„é€‰äº† <strong>GPT-5.2 Thinking</strong>ï¼Œå®ƒæ€è€ƒäº† <strong>5 åˆ† 33 ç§’</strong>ï¼Œç­‰å¾…æ—¶é—´ç¡®å®é•¿ï¼Œä½†å®ƒæœ€åç»™å‡ºäº†å®Œæ•´ä»£ç ï¼Œæ‰“å¼€åå¤åˆ»æ•ˆæœæ€»ä½“ä¸é”™ï¼š</p>
<ul>
<li>åŸå›¾é‡Œçš„â€œç«ç®­å›¾æ ‡â€å®ƒæˆåŠŸå¤åˆ»äº†</li>
<li>å·¦ä¾§ä¾§è¾¹æ åŸå›¾æœ‰ä¸€æ’å›¾æ ‡ï¼Œå®ƒæ²¡æœ‰å®Œå…¨è¿˜åŸï¼Œä½†<strong>é¢„ç•™äº†ä½ç½®</strong><br/>
æ•´ä½“ç»“è®ºï¼š<strong>è¯»å›¾â†’ç»“æ„æ‹†è§£â†’å‰ç«¯è½åœ°</strong>è¿™ä¸€æ®µï¼ŒGPT-5.2 çš„å®Œæˆåº¦æ˜¯å¯ç”¨çš„ï¼Œå±äºâ€œèƒ½ä¸Šæ‰‹æ”¹æ”¹å°±èƒ½äº¤ä»˜ demoâ€çš„æ°´å¹³ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">å››ã€SVG åŠ¨ç”»ï¼šèƒ½ç”»ä½†â€œä¸ä¼šåŠ¨â€ï¼Œæš´éœ²å‡ºç”ŸæˆåŠ¨ç”»çš„çŸ­æ¿</h2>
<p>ç¬¬äºŒä¸ªå°æµ‹è¯•æˆ‘è®©å®ƒç”¨ SVG ç”»ï¼šçŒ«å’Œç‹—åœ¨è‰åœ°ä¸Šä¸€å‰ä¸€åæ¼«æ­¥ï¼Œå¤©ç©ºæœ‰å¤ªé˜³äº‘ï¼Œè¿˜æœ‰é£ç¿”çš„é¸Ÿï¼›ç„¶ååˆè¿½åŠ ä¸€å¥â€œå®ç°çœŸå®åŠ¨ç”»æ•ˆæœâ€ã€‚</p>
<p>ç»“æœå¾ˆç›´è§‚ï¼š</p>
<ul>
<li>å®ƒèƒ½æŠŠé™æ€ç”»é¢ç”»å‡ºæ¥</li>
<li>ä½†å®ƒæ²¡æœ‰å®ç°çŒ«ç‹—èµ°åŠ¨ã€äº‘æœµé£˜åŠ¨</li>
<li>å®ƒåªåŠ äº†ä¸€ä¸ªâ€œè™šçº¿åœ¨è·³åŠ¨â€çš„æ•ˆæœ</li>
</ul>
<p>è¿™ä¸€æ®µæˆ‘ç»™çš„åˆ¤æ–­ä¹Ÿå¾ˆç›´æ¥ï¼š<strong>GPT-5.2 åœ¨ SVG åŠ¨ç”»ä»£ç ç”Ÿæˆèƒ½åŠ›ä¸Šåå¼±</strong>ã€‚<br/>
è¿™ç±»ä»»åŠ¡å…¶å®å¾ˆè€ƒéªŒâ€œæ—¶é—´è½´ + å¤šå¯¹è±¡è¿åŠ¨ + çŠ¶æ€ç®¡ç†â€çš„èƒ½åŠ›ï¼Œè€Œå®ƒåœ¨è¿™é¢˜ä¸Šå¹¶æ²¡æœ‰æŠŠâ€œåŠ¨ç”»â€çš„æœ¬è´¨åšå‡ºæ¥ã€‚</p>
<hr/>
<h2 data-id="heading-6">äº”ã€Python + PyGame å†’æ³¡æ’åºåŠ¨ç”»ï¼šé€»è¾‘æ­£ç¡®ï¼Œä½†ç¾æœ¯è¡¨è¾¾ä¸€èˆ¬</h2>
<p>æ¥ä¸‹æ¥æˆ‘ç”¨ä¸€é¢˜æ›´åƒâ€œå·¥ç¨‹åŒ–å°é¡¹ç›®â€çš„ä»»åŠ¡æ¥æµ‹ï¼š<br/>
ç”¨ Python + PyGame åˆ›å»ºå¯è¿è¡ŒåŠ¨ç”»ï¼š12 åªä¸åŒå¤§å°å°é¸­å­ + 1 åªæ›´å¤§çš„å¤§ç™½é¹…ï¼›é¸­å­éšæœºæ’åˆ—åœ¨æ°´å¹³çº¿ä¸Šï¼›é¹…ä½¿ç”¨å†’æ³¡æ’åºæ£€æŸ¥å¹¶äº¤æ¢é¸­å­ï¼Œè®©å®ƒä»¬ä»å°åˆ°å¤§æ’åºã€‚</p>
<p>æˆ‘åœ¨å­—å¹•é‡Œä¹Ÿè§£é‡Šäº†è¿™é¢˜èƒ½æµ‹ä»€ä¹ˆï¼š</p>
<ul>
<li>ç»“æ„åŒ–ä»»åŠ¡åˆ†è§£</li>
<li>ç®—æ³•é€»è¾‘ä¸ç¨‹åºæ€ç»´</li>
<li>ä»£ç ç”Ÿæˆä¸æ¨¡å—åŒ–</li>
<li>å›¾å½¢ä¸ç©ºé—´å»ºæ¨¡</li>
<li>åŠ¨ç”»æ—¶åºä¸çŠ¶æ€ç®¡ç†</li>
</ul>
<p>å®é™…ç»“æœï¼š</p>
<ul>
<li>ä»£ç èƒ½è·‘èµ·æ¥ âœ…</li>
<li>å†’æ³¡æ’åºè¿‡ç¨‹æ­£ç¡® âœ…ï¼ˆæœ€ç»ˆç¡®å®ä»å°åˆ°å¤§æ’å¥½äº†ï¼‰</li>
<li>ä½†ç”»é¢æ¯”è¾ƒç®€æ´ï¼›é¹…ä¸å¤ªåƒé¹…ï¼›é¸­å’Œé¹…é•¿å¾—å‡ ä¹ä¸€æ · âŒ</li>
</ul>
<p>æ‰€ä»¥è¿™é¢˜ç»™å‡ºçš„ç»“è®ºæ˜¯â€œå·¥ç¨‹èƒ½åŠ›åˆæ ¼ï¼Œä½†å®¡ç¾/è§’è‰²è¡¨è¾¾å¼±â€ï¼š<br/>
å®ƒèƒ½æŠŠç¨‹åºåšå¯¹ï¼Œä½†æŠŠâ€œæ¼”ç¤ºæ•ˆæœåšå¾—å¥½çœ‹â€ä»éœ€è¦ä½ äººå·¥åŠ å¼ºã€‚</p>
<hr/>
<h2 data-id="heading-7">å…­ã€Atlas æµè§ˆå™¨ Agent Modeï¼šæœ‰è¡ŒåŠ¨åŠ›ï¼Œä½†ç¨³å®šæ€§ä¸èµ„æºæ¶ˆè€—è¦è­¦æƒ•</h2>
<p>ç„¶åæˆ‘åˆ‡åˆ° OpenAI çš„ Atlas æµè§ˆå™¨ï¼Œç”¨ GPT-5.2 æµ‹â€œæµè§ˆå™¨è‡ªåŠ¨åŒ–èƒ½åŠ›â€ã€‚ä»»åŠ¡æ˜¯ï¼šåˆ†æç‰¹æ–¯æ‹‰è‚¡ç¥¨å¹¶æŠŠç»“æœå†™è¿› Google Docã€‚<br/>
æŒ‰å®˜æ–¹è¯´æ³•ï¼ŒAtlas çš„ agent mode ç›®æ ‡å°±æ˜¯åœ¨æµè§ˆå™¨é‡Œåšç«¯åˆ°ç«¯ä»»åŠ¡ï¼Œå¹¶å…è®¸åœ¨ä½ æ§åˆ¶ä¸‹æ¥ç®¡/æš‚åœã€‚ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fintroducing-chatgpt-atlas%2F%3Futm_source%3Dchatgpt.com" title="https://openai.com/index/introducing-chatgpt-atlas/?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">OpenAI</a>)</p>
<p>ä½†æˆ‘è¿™æ¬¡å®æµ‹é‡åˆ°çš„é—®é¢˜å¾ˆå…¸å‹ï¼š</p>
<ul>
<li>å®ƒä¸€å¼€å§‹åƒæ˜¯æ²¡æœ‰ç›´æ¥è®¿é—®ç›®æ ‡ç½‘ç«™ï¼Œè€Œæ˜¯å…ˆç”Ÿæˆä»£ç </li>
<li>åç»­ç¡®å®æ‰“å¼€äº†ç½‘ç«™å¹¶è‡ªåŠ¨ç‚¹å‡»</li>
<li>ä½†ç­‰å¾… <strong>8 åˆ† 40 ç§’</strong>åä»æ²¡æœ‰æ¨è¿›å…³é”®æ­¥éª¤</li>
<li>æ›´ä¸¥é‡çš„æ˜¯ï¼šå®ƒçš„åˆ†æå¯èƒ½æ¶ˆè€—è¿‡å¤š CPUï¼Œå¯¼è‡´ç”µè„‘é£æ‰‡ç‹‚è½¬ã€å‘çƒ«</li>
<li>æœ€ç»ˆæˆ‘ç»ˆæ­¢ä»»åŠ¡ï¼ˆå·²ç»æ¥è¿‘ 10 åˆ†é’Ÿï¼‰</li>
</ul>
<p>è¿™ä¸€æ®µæˆ‘æƒ³ç»™è§‚ä¼—ä¸€ä¸ªå¾ˆç°å®çš„æé†’ï¼š</p>
<blockquote>
<p><strong>Agent èƒ½ä¸èƒ½â€œåŠ¨èµ·æ¥â€æ˜¯ä¸€å›äº‹ï¼Œèƒ½ä¸èƒ½â€œç¨³å®šã€çœèµ„æºã€å¯æ§åœ°å®Œæˆâ€æ˜¯å¦ä¸€å›äº‹ã€‚</strong><br/>
ä½ å¦‚æœæ‰“ç®—è®©å®ƒé•¿æœŸè·‘è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œä¸€å®šè¦è€ƒè™‘è¶…æ—¶ã€èµ„æºé™åˆ¶ã€å¤±è´¥æ¢å¤ã€ä»¥åŠäººç±»æ¥ç®¡æœºåˆ¶ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ä¸ƒã€Codex æ·±åº¦æµ‹è¯•ï¼šå¼ºé¡¹æ›´çªå‡ºï¼Œä½†ä¹Ÿä¼šåœ¨â€œä¿æŒåŸé€»è¾‘â€ä¸Šç¿»è½¦</h2>
<p>æ¥ä¸‹æ¥æ˜¯è§†é¢‘çš„é‡å¤´ï¼šæˆ‘åœ¨ Codex é‡Œåšæ›´æ·±çš„å·¥ç¨‹æµ‹è¯•ï¼ˆå­—å¹•é‡Œæåˆ°å…ˆç¡®è®¤ Codex å‡çº§åˆ° 0.7.1ï¼Œå¹¶é€‰æ‹© GPT-5.2 æ¨¡å‹ï¼‰ã€‚</p>
<h3 data-id="heading-9">1ï¼‰Manim 3D å¯è§†åŒ–ï¼šèƒ½åšå‡ºæ¥ï¼Œä½†è´¨æ„Ÿç²—ç³™</h3>
<p>ç¬¬ä¸€é¢˜ï¼šç”¨ Manim åšæ•°å­¦å…¬å¼å¯è§†åŒ–ï¼Œåˆ›å»ºä¸‰ç»´åŠ¨ç”»å±•ç°äºŒæ¬¡å‡½æ•°çš„ç«‹ä½“å‡ ä½•ç‰¹æ€§ã€‚<br/>
è¿™é¢˜å¾ˆè€ƒéªŒï¼šæ•°å­¦ç†è§£ã€3D ç©ºé—´æ¨ç†ã€å·¥å…·æŒæ¡ã€è§†è§‰è®¾è®¡ã€‚</p>
<p>å®ƒçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ï¼šå…ˆæ‰«æä»“åº“ã€åˆ›å»ºè®¡åˆ’ã€ç”Ÿæˆä»£ç æ–‡ä»¶ï¼›å¤§æ¦‚ <strong>27 åˆ†é’Ÿ</strong>å®Œæˆï¼Œå¹¶æˆåŠŸç”Ÿæˆè§†é¢‘ã€‚<br/>
ä½†æˆ‘æ’­æ”¾åç»™å‡ºçš„è¯„ä»·æ˜¯ï¼š<strong>æ•´ä½“æ¯”è¾ƒç²—ç³™ï¼Œæ²¡æœ‰åšåˆ°ç²¾ç»†åŒ–</strong>ã€‚<br/>
ä¹Ÿå°±æ˜¯è¯´ï¼šå®ƒèƒ½æŠŠâ€œä» 0 åˆ° 1â€è·‘é€šï¼Œä½†â€œä» 1 åˆ° 10â€çš„è´¨æ„Ÿä»è¦äººæ¥æ‰“ç£¨ã€‚</p>
<h3 data-id="heading-10">2ï¼‰AutoGen â†’ Google ADK é‡æ„ï¼ˆå¹¶æ¥å…¥ Mistral + UIï¼‰ï¼šèƒ½è¿ç§»ï¼Œä½†æ²¡ä¿æŒåŸè¿è¡Œé€»è¾‘ï¼Œè¿˜ç–‘ä¼¼æ­»å¾ªç¯</h3>
<p>ç¬¬äºŒé¢˜æˆ‘åŠ å¤§éš¾åº¦ï¼š<br/>
æŠŠå¾®è½¯ AutoGen å†™çš„æ—…æ¸¸è§„åˆ’æ™ºèƒ½ä½“ï¼Œé‡æ„ä¸º Google ADK æ¡†æ¶ï¼Œå¹¶ä¸”æŠŠå¤§æ¨¡å‹ API æ¢æˆ Mistralï¼Œè¿˜è¦åŠ ä¸Šè°·æ­Œå®˜æ–¹ UIã€‚<br/>
è¿™é¢˜æœ¬è´¨ä¸Šæ˜¯åœ¨æµ‹ï¼šä¿¡æ¯æ£€ç´¢ä¸æ–‡æ¡£ç†è§£ã€ä»£ç ç†è§£ä¸åˆ†æã€è·¨æ¡†æ¶è¿ç§»ä¸é‡æ„ã€API é›†æˆã€å¤šä»»åŠ¡åè°ƒã€‚</p>
<p>å®ƒç¡®å®åšåˆ°äº†å¾ˆå¤šâ€œè¡¨é¢ä¸Šå¾ˆå¼ºâ€çš„ç»“æœï¼š</p>
<ul>
<li>æŠ“å–å®˜æ–¹æ–‡æ¡£</li>
<li>å®Œæˆä» AutoGen åˆ° ADK çš„ä»£ç è¿ç§»</li>
<li>æŠŠ API æ›¿æ¢æˆ Mistral</li>
<li>è¿è¡Œåæµè§ˆå™¨é‡Œä¹Ÿèƒ½æ‰“å¼€ UI</li>
<li>è¾“å…¥â€œè§„åˆ’ä¸‰å¤©å°¼æ³Šå°”æ—…è¡Œè®¡åˆ’â€èƒ½è¾“å‡ºç»“æœ</li>
</ul>
<p>ä½†å…³é”®ç¿»è½¦ç‚¹åœ¨äºï¼š<strong>è¿è¡Œé€»è¾‘ä¸ç¬¦åˆ AutoGen åŸé¡¹ç›®çš„æµç¨‹</strong>ã€‚<br/>
æˆ‘åœ¨å­—å¹•é‡ŒæŠŠ AutoGen åŸæµç¨‹è¯´å¾—å¾ˆæ¸…æ¥šï¼š<br/>
è®¡åˆ’ â†’ å½“åœ°å‘å¯¼ â†’ è¯­è¨€ä¸“å®¶ â†’ æœ€ç»ˆæ€»ç»“<br/>
è€Œå®ƒé‡æ„å‡ºæ¥çš„ ADK ç‰ˆæœ¬æ²¡æœ‰ä¿æŒè¿™ä¸ªé€»è¾‘ï¼Œç”šè‡³çœ‹èµ·æ¥é™·å…¥æ­»å¾ªç¯ä¸€ç›´è¿è¡Œã€‚</p>
<p>è¿™ä¸€æ®µç»“è®ºéå¸¸é‡è¦ï¼š</p>
<blockquote>
<p>GPT-5.2 åœ¨â€œæŠŠä»£ç æ¬è¿‡å»â€è¿™ä»¶äº‹ä¸Šèƒ½åŠ›å¾ˆå¼ºï¼Œ<strong>ä½†åœ¨â€œä¿æŒåŸç³»ç»Ÿè¡Œä¸ºä¸€è‡´â€ä¸Šä»å¯èƒ½å‡ºé”™</strong>ã€‚<br/>
è¿™æ°æ°æ˜¯å·¥ç¨‹é‡æ„é‡Œæœ€éš¾ã€ä¹Ÿæœ€è¦å‘½çš„éƒ¨åˆ†ï¼šä¸æ˜¯èƒ½è·‘å°±è¡Œï¼Œè€Œæ˜¯è¦â€œè·‘å¾—å¯¹â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-11">å…«ã€iOS é¡¹ç›®é‡æ„ï¼šMVVM â†’ MV + @Observableï¼Œå®æµ‹æˆåŠŸï¼Œæ˜¯è¿™æœŸæœ€æƒŠå–œçš„ä¸€æ®µ</h2>
<p>æ¥ç€æˆ‘ç”¨ä¸€ä¸ªâ€œåŸç”Ÿ iOS é¡¹ç›®â€ç»§ç»­åŠ å¤§éš¾åº¦ï¼šè¿™ä¸ªé¡¹ç›®ä¹‹å‰åœ¨ Claude Code é‡Œç”¨ Claude Opus 4.5 ä¸€æ¬¡æ€§å®Œæˆä¸”æ— æŠ¥é”™ã€‚ç°åœ¨æˆ‘è®© Codex æŠŠå®ƒä» MVVM é‡æ„ä¸º MV + @Observableï¼ˆiOS 17+ï¼‰ã€‚</p>
<p>ç»“æœæ˜¯ï¼š</p>
<ul>
<li>ç­‰å¾… 8 åˆ†å¤šé’Ÿåï¼Œå®ƒæç¤ºå·²å®Œæˆé‡æ„</li>
<li>å›åˆ° Xcode é‡æ–°è¿è¡Œï¼ŒApp æˆåŠŸå¯åŠ¨ âœ…</li>
<li>åŠŸèƒ½æ­£å¸¸ âœ…ï¼ˆåŒ…æ‹¬è®¾ç½®é‡Œåˆ‡ä¸»é¢˜ç­‰ï¼‰</li>
<li>å¯¹æ¯”ä»“åº“æ–‡ä»¶ï¼Œä»£ç ç¡®å®å®Œæˆäº†æ¶æ„è¿ç§» âœ…<br/>
æˆ‘åœ¨è§†é¢‘é‡Œç»™çš„è¯„ä»·æ˜¯â€œæ•ˆæœéå¸¸ä¸é”™â€ã€‚</li>
</ul>
<p>è¿™ä¸€æ®µè¯´æ˜ï¼šåœ¨â€œæœ‰æ˜ç¡®ç›®æ ‡ã€å¯éªŒæ”¶ã€å·¥ç¨‹è¾¹ç•Œæ¸…æ™°â€çš„é‡æ„ä»»åŠ¡ä¸Šï¼ŒGPT-5.2 çš„ç¨³å®šæ€§æ˜¯æ˜¾è‘—æå‡çš„ã€‚</p>
<hr/>
<h2 data-id="heading-12">ä¹ã€å…¨æ ˆ MVPï¼šNext.js + Tailwind + Supabase çš„å® ç‰©é¢†å…»å¹³å°ï¼Œèƒ½åšå‡ºéª¨æ¶ï¼Œä½†åŠŸèƒ½å®Œæ•´åº¦ä»éœ€è¡¥é½</h2>
<p>æœ€åæˆ‘è®©å®ƒåšä¸€ä¸ªå®Œæ•´çš„å…¨æ ˆé¡¹ç›®ï¼šç°ä»£åŒ–å® ç‰©é¢†å…»å¹³å° MVPã€‚æŠ€æœ¯æ ˆè¦æ±‚ï¼šNext.js + Tailwind CSS + Supabaseï¼ˆåç«¯/æ•°æ®åº“/è®¤è¯ï¼‰ï¼Œå¹¶ç»™äº†éå¸¸è¯¦ç»†çš„å­—æ®µä¸åŠŸèƒ½è¦æ±‚ã€‚</p>
<p>å®ƒçš„è¡Œä¸ºå¾ˆåƒâ€œä¸€ä¸ªä¼šæé—®çš„å¼€å‘è€…â€ï¼š<br/>
å®ƒå…ˆæå‡º 6 ä¸ªç¡®è®¤é—®é¢˜ï¼ˆç™»å½•ä¼˜å…ˆæ–¹å¼ã€å® ç‰©ç±»å‹ã€å¹´é¾„å±•ç¤ºæ–¹å¼ã€åœ°åŒºå­—æ®µã€é¢†å…»ç”³è¯·è¡¨å­—æ®µã€ä»“åº“æ˜¯å¦ä¸ºç©ºï¼‰ï¼Œæˆ‘å›ç­”åå®ƒåˆ¶å®šè®¡åˆ’å¹¶å¼€å§‹å¼€å‘ã€‚</p>
<p>éªŒæ”¶ç»“æœï¼š</p>
<ul>
<li>é¡¹ç›®èƒ½å¯åŠ¨ï¼Œèƒ½çœ‹åˆ°ä¸»ç•Œé¢ âœ…</li>
<li>ä¸»é¢˜åˆ‡æ¢ UI æœ‰äº†ï¼Œä½†ç‚¹å‡»åæ²¡æœ‰å˜åŒ–ï¼ˆä¸»é¢˜åˆ‡æ¢åŠŸèƒ½æœªå®ç°ï¼‰âŒ</li>
<li>æ³¨å†Œ/ç™»å½•åŸºæœ¬å¯ç”¨ âœ…ï¼ˆéœ€è¦é‚®ç®±éªŒè¯ï¼‰</li>
<li>ç™»å½•åæœ‰å° bugï¼šè¿˜æ˜¾ç¤ºâ€œç™»å½•â€å­—æ · âŒ</li>
<li>å‘å¸ƒå® ç‰©ä¿¡æ¯åŸºæœ¬å¯ç”¨ âœ…</li>
<li>æäº¤é¢†å…»ç”³è¯·ç‚¹å‡»æ— å“åº”ï¼Œå¯èƒ½æœªå®Œå…¨å®ç° âŒ</li>
</ul>
<p>æ‰€ä»¥è¿™ä¸€é¢˜çš„ç»“è®ºæ˜¯ï¼š</p>
<blockquote>
<p>GPT-5.2 å¯ä»¥æŠŠâ€œå…¨æ ˆ MVP çš„éª¨æ¶â€å¿«é€Ÿæ­å‡ºæ¥ï¼Œå¹¶è·‘é€šéƒ¨åˆ†æ ¸å¿ƒé“¾è·¯ï¼›ä½†åœ¨â€œå®Œæ•´ä¸šåŠ¡é—­ç¯â€å’Œâ€œç»†èŠ‚æ‰“ç£¨â€ä¸Šï¼Œä»ç„¶éœ€è¦äººç±»å¼€å‘è€…è¡¥é½ä¸ä¿®å¤ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-13">åã€æ€»è¯„ï¼šGPT-5.2 çš„â€œçœŸå®æå‡â€åœ¨å“ªé‡Œï¼Ÿåˆè¯¥æ€ä¹ˆç”¨æ‰ä¸è¸©å‘ï¼Ÿ</h2>
<p>æŠŠæ•´æœŸæµ‹è¯•ä¸²èµ·æ¥ï¼Œä½ ä¼šå‘ç° GPT-5.2 çš„æå‡æ˜¯â€œç»“æ„æ€§çš„â€ï¼Œä½†ä¸æ˜¯â€œæ— è„‘å…¨èƒ½â€ã€‚</p>
<h3 data-id="heading-14">ä½ èƒ½æ˜æ˜¾æ„Ÿå—åˆ°å®ƒæ›´å¼ºçš„åœ°æ–¹</h3>
<ul>
<li><strong>è¯»å›¾ â†’ å‰ç«¯è½åœ°</strong>æ›´ç¨³ï¼ˆUI å¤åˆ»å®Œæˆåº¦é«˜ï¼‰</li>
<li>**å·¥ç¨‹å‹ä»»åŠ¡ï¼ˆèƒ½è·‘çš„ä»£ç ï¼‰**æ›´å¯é ï¼ˆPyGameã€iOS é‡æ„ã€å…¨æ ˆéª¨æ¶ï¼‰</li>
<li><strong>é•¿æµç¨‹è§„åˆ’ä¸æ‰§è¡Œ</strong>æ›´åƒâ€œåœ¨åšé¡¹ç›®â€ï¼ˆè®¡åˆ’ã€ç”Ÿæˆã€ä¿®å¤ã€è¿­ä»£ï¼‰</li>
<li>åœ¨å®˜æ–¹å®šä½ä¸Šï¼Œå®ƒä¹Ÿè¢«å¼ºè°ƒæ›´æ“…é•¿ä»£ç ã€å·¥å…·ã€é•¿ä¸Šä¸‹æ–‡ä¸å¤šæ­¥éª¤é¡¹ç›®å¤„ç†ã€‚ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenai.com%2Findex%2Fintroducing-gpt-5-2%2F%3Futm_source%3Dchatgpt.com" title="https://openai.com/index/introducing-gpt-5-2/?utm_source=chatgpt.com" target="_blank" ref="nofollow noopener noreferrer">OpenAI</a>)</li>
</ul>
<h3 data-id="heading-15">ä½ éœ€è¦è­¦æƒ•çš„çŸ­æ¿</h3>
<ul>
<li><strong>åŠ¨ç”»/è§†è§‰ç»†è…»è¡¨è¾¾</strong>ä»å¼±ï¼ˆSVG åŠ¨ç”»ç¿»è½¦ï¼ŒManim æˆç‰‡ç²—ç³™ï¼‰</li>
<li><strong>Agent è‡ªåŠ¨åŒ–çš„ç¨³å®šæ€§ä¸èµ„æºæ¶ˆè€—</strong>è¦é‡ç‚¹å…³æ³¨ï¼ˆAtlas ä»»åŠ¡é«˜ CPU + è¶…æ—¶ï¼‰</li>
<li>**è·¨æ¡†æ¶é‡æ„â€œä¿æŒåŸé€»è¾‘ä¸€è‡´â€**ä»ä¼šå‡ºé”™ï¼ˆAutoGenâ†’ADK é€»è¾‘ä¸ä¸€è‡´ã€ç–‘ä¼¼æ­»å¾ªç¯ï¼‰</li>
</ul>
<h3 data-id="heading-16">æ›´æ¨èçš„ç”¨æ³•ï¼ˆä¹Ÿæ›´ç¬¦åˆå®˜æ–¹çš„æ–¹å‘ï¼‰</h3>
<ul>
<li>æŠŠ GPT-5.2 å½“ä½œâ€œå¼ºåŠ›å·¥ç¨‹åŠ©ç†â€ï¼šæ­æ¶å­ã€å†™åˆç‰ˆã€åšè¿ç§»ã€åšæ‹†è§£ã€åšè¿­ä»£</li>
<li>ç”¨ä½ è‡ªå·±çš„éªŒæ”¶ä½“ç³»çº¦æŸå®ƒï¼šå•æµ‹/é›†æˆæµ‹è¯•/è¿è¡Œæ—¥å¿—/è¶…æ—¶ä¸å›æ»š</li>
<li>å¯¹â€œèƒ½è·‘â€ä¿æŒæ»¡æ„ï¼Œå¯¹â€œè·‘å¾—å¯¹ã€è·‘å¾—ç¾â€ä¿æŒè­¦æƒ•</li>
</ul>
<hr/>
<h2 data-id="heading-17">ç»“è¯­ï¼šåˆ«åªé—®â€œå®ƒå¼ºä¸å¼ºâ€ï¼Œæ›´è¦é—®â€œå®ƒåœ¨å“ªäº›ä»»åŠ¡ä¸Šæ›´åƒä¸€ä¸ªé è°±åŒäº‹â€</h2>
<p>è¿™æœŸæµ‹è¯„ç»™æˆ‘çš„æœ€ç»ˆåˆ¤æ–­å’Œè§†é¢‘é‡Œä¸€è‡´ï¼š<br/>
<strong>GPT-5.2 ç›¸æ¯” GPT-5.1ï¼Œç¼–ç¨‹èƒ½åŠ›ç¡®å®æœ‰æå‡</strong>ï¼Œè€Œä¸”æå‡ä¸»è¦ä½“ç°åœ¨â€œå·¥ç¨‹è½åœ°ä¸å¤šæ­¥éª¤ä»»åŠ¡â€ä¸Šï¼›ä½†å®ƒä»ç„¶ä¼šåœ¨åŠ¨ç”»ã€å®¡ç¾ã€Agent ç¨³å®šæ€§ã€ä»¥åŠè·¨æ¡†æ¶é€»è¾‘ä¸€è‡´æ€§ä¸Šç¿»è½¦ã€‚</p>
<p>å¦‚æœä½ æ˜¯å¼€å‘è€…ï¼Œæˆ‘å»ºè®®ä½ åˆ«åªçœ‹è·‘åˆ†ï¼Œç›´æ¥ç”¨æˆ‘è¿™å¥—æµ‹è¯•æ€è·¯ï¼š<br/>
æŒ‘ 3~5 ä¸ªä½ æ—¥å¸¸æœ€å¸¸åšã€ä¸”èƒ½éªŒæ”¶çš„ä»»åŠ¡ï¼Œè®© GPT-5.2 è·‘ä¸€éâ€”â€”ä½ ä¼šå¾ˆå¿«å¾—åˆ°å±äºä½ è‡ªå·±çš„ç»“è®ºã€‚</p>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ é€‰æ¨¡å‹/æ”¹å·¥ä½œæµæœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹ä¸ªâ€œåœ¨çœ‹â€ğŸ‘ï¼Œä¹Ÿæ¬¢è¿ç•™è¨€å‘Šè¯‰æˆ‘ï¼šä½ æœ€æƒ³æˆ‘æ‹¿ GPT-5.2 ç»§ç»­æµ‹å“ªä¸€ç±»çœŸå®é¡¹ç›®ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•°æ®æ ‡æ³¨å¹³å°æ­£å¼ä¸Šçº¿å•¦ï¼ æ ‡æ³¨èµšç°é‡‘ï¼Œä½é—¨æ§›çœŸæ”¶ç›Š | æ˜é‡‘ä¸€å‘¨ 12.10]]></title>    <link>https://juejin.cn/post/7582232741687525411</link>    <guid>https://juejin.cn/post/7582232741687525411</guid>    <pubDate>2025-12-11T09:09:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582232741687525411" data-draft-id="7582200865908146210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•°æ®æ ‡æ³¨å¹³å°æ­£å¼ä¸Šçº¿å•¦ï¼ æ ‡æ³¨èµšç°é‡‘ï¼Œä½é—¨æ§›çœŸæ”¶ç›Š | æ˜é‡‘ä¸€å‘¨ 12.10"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-11T09:09:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘ä¸€å‘¨"/> <meta itemprop="url" content="https://juejin.cn/user/53218623894222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•°æ®æ ‡æ³¨å¹³å°æ­£å¼ä¸Šçº¿å•¦ï¼ æ ‡æ³¨èµšç°é‡‘ï¼Œä½é—¨æ§›çœŸæ”¶ç›Š | æ˜é‡‘ä¸€å‘¨ 12.10
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/53218623894222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘ä¸€å‘¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T09:09:32.000Z" title="Thu Dec 11 2025 09:09:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>æœ¬æ–‡å­—æ•°1400+ ï¼Œé˜…è¯»æ—¶é—´å¤§çº¦éœ€è¦ 5åˆ†é’Ÿã€‚</em></p>
<blockquote>
<p>ã€æ˜é‡‘ä¸€å‘¨ã€‘æœ¬æœŸäº®ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>
<p><a href="https://juejin.cn/post/7578402574653112372" target="_blank" title="https://juejin.cn/post/7578402574653112372">å¦‚ä½•ç”¨éšå½¢å­—ç¬¦ç»™å…¬å¸å†…éƒ¨æ–‡æ¡£åŠ ç›²æ°´å°?(æŠ“å†…é¬¼ç¥å™¨ğŸ¤£)</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7578793960627486746" target="_blank" title="https://juejin.cn/post/7578793960627486746">ä¸ä»…å…è´¹ï¼Œè¿˜å¼€æºï¼Ÿè¿™ä¸ª AI Mock ç¥å™¨æˆ‘å¿…é¡»æ›å…‰å®ƒ</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7578215424677331007" target="_blank" title="https://juejin.cn/post/7578215424677331007">å¼€æºä¼ä¸šçº§ IMï¼ä¸€æ¬¾é«˜é¢œå€¼çš„å³æ—¶é€šè®¯èŠå¤©åº”ç”¨ï¼</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7578215424677003327" target="_blank" title="https://juejin.cn/post/7578215424677003327">ç”¨ AI åšäº†å‡ ä¸ªè¶…ç‚«é…·çš„ Flutter åŠ¨ç”»ï¼ŒåŒæ—¶åˆå·®ç‚¹è¢« AI æ°”æ­»</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7579871631096184858" target="_blank" title="https://juejin.cn/post/7579871631096184858">ğŸ”¥ æ‡‚åŸç†ä½†ä¸ä¼šè¯´ï¼Ÿæˆ‘æ€’å†™äº†ä¸ª AI æ¨¡æ‹Ÿå™¨æŠ˜ç£¨è‡ªå·±ï¼ŒMå±æ€§å¤§çˆ†å‘ï¼</a></p>
</li>
</ul>
<blockquote>
<p><strong>ã€Œä¸Šæ¦œè§„åˆ™ã€</strong>ï¼šæ–‡ç« å‘å¸ƒæ—¶é—´åœ¨æœ¬æœŸã€Œæ˜é‡‘ä¸€å‘¨ã€å‘å¸ƒæ—¶é—´çš„å‰ä¸€å‘¨å†…ï¼›ä¸”ç¬¦åˆå„ä¸ªæ ç›®çš„å†…å®¹å®šä½å’Œè¦æ±‚ã€‚ å¦‚å‘ç°æ–‡ç« æœ‰æŠ„è¢­ã€æ´—ç¨¿ç­‰è¿åç¤¾åŒºè§„åˆ™çš„è¡Œä¸ºï¼Œå°†å–æ¶ˆå½“æœŸåŠåç»­ä¸Šæ¦œèµ„æ ¼ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€å‘¨â€œé‡‘â€é€‰</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73d5bf990a124e3a87cffb06443ad9ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766048972&amp;x-signature=PciersGb7tmpNeuskX5UY2DGVSM%3D" alt="æ˜é‡‘ä¸€å‘¨ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<p><em>å†…å®¹è¯„å®¡ä»¬ä¼šåœ¨è¿‡å»çš„ä¸€å‘¨å†…å¯¹ç¤¾åŒºæ·±åº¦æŠ€æœ¯å¥½æ–‡è¿›è¡ŒæŒ–æ˜å’Œç­›é€‰ï¼Œä¼˜è´¨çš„æŠ€æœ¯æ–‡ç« æœ‰æœºä¼šå‡ºç°åœ¨ä¸‹æ–¹æ¦œå•ä¸­ï¼Œæ’åä¸åˆ†å…ˆåã€‚</em></p>
<h3 data-id="heading-1">å‰ç«¯</h3>
<p><a href="https://juejin.cn/post/7578402574653112372" target="_blank" title="https://juejin.cn/post/7578402574653112372">å¦‚ä½•ç”¨éšå½¢å­—ç¬¦ç»™å…¬å¸å†…éƒ¨æ–‡æ¡£åŠ ç›²æ°´å°?(æŠ“å†…é¬¼ç¥å™¨ğŸ¤£)</a><a href="https://juejin.cn/user/3878732754331096/posts" target="_blank" title="https://juejin.cn/user/3878732754331096/posts"> @ErpanOmer</a></p>
<blockquote>
<p>æ–‡ç« è®²è¿°å…¬å¸å†…éƒ¨æ•æ„Ÿæ–‡æ¡£æ³„éœ²åï¼Œåˆ©ç”¨åŸºäºé›¶å®½å­—ç¬¦çš„ç›²æ°´å°æŠ€æœ¯æŠ“â€œå†…é¬¼â€ã€‚ä»‹ç»é›¶å®½å­—ç¬¦æ¦‚å¿µï¼Œé˜è¿°åŠ å¯†ã€è§£å¯†åŸç†ï¼Œç»™å‡ºå®ç°ä»£ç ï¼Œè¿˜æåŠæ°´å°å¯è¢«æ¸…é™¤ï¼Œå¼ºè°ƒè¿™æ˜¯ä½æˆæœ¬ã€é«˜éšè”½æ€§é˜²å¾¡æ‰‹æ®µã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7578793960627486746" target="_blank" title="https://juejin.cn/post/7578793960627486746">ä¸ä»…å…è´¹ï¼Œè¿˜å¼€æºï¼Ÿè¿™ä¸ª AI Mock ç¥å™¨æˆ‘å¿…é¡»æ›å…‰å®ƒ</a> <a href="https://juejin.cn/user/3035079961218551/posts" target="_blank" title="https://juejin.cn/user/3035079961218551/posts">@ä¸ä¸€æ ·çš„å°‘å¹´_</a></p>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»äº†ä¸€æ¬¾é›¶ä¾µå…¥çš„æ¥å£ Mock æ’ä»¶ï¼Œé‡æ„ä¸º Sidebar å¸¸é©»ä¾§æ ï¼Œä½“éªŒæ›´ä½³ã€‚å®ƒæ¥å…¥ AI è‡ªåŠ¨ç”Ÿæˆæ•°æ®ï¼Œæ”¯æŒå»¶æ—¶å’ŒçŠ¶æ€ç æ¨¡æ‹Ÿã€‚å…·å¤‡æ‹¦æˆªã€åŒ¹é…ã€å“åº”æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œè¦†ç›–å‰ç«¯ 90% çš„ Mock éœ€æ±‚ï¼Œæ¨èè¯•ç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-2">åç«¯</h3>
<p><a href="https://juejin.cn/post/7578215424677331007" target="_blank" title="https://juejin.cn/post/7578215424677331007">å¼€æºä¼ä¸šçº§ IMï¼ä¸€æ¬¾é«˜é¢œå€¼çš„å³æ—¶é€šè®¯èŠå¤©åº”ç”¨ï¼</a> <a href="https://juejin.cn/user/3958702402176765/posts" target="_blank" title="https://juejin.cn/user/3958702402176765/posts">@Javaé™ˆåºå‘˜</a></p>
<blockquote>
<p>æœ¬æ–‡æ¨èäº†åŸºäº GO å¼€å‘çš„å¼€æºå³æ—¶é€šè®¯ç³»ç»Ÿ TangSengDaoDaoServerï¼Œå®ƒè½»é‡ã€é«˜æ€§èƒ½ä¸”é‡å®‰å…¨ï¼Œæ”¯æŒå¤šç«¯åŒæ­¥ã€‚ä»‹ç»äº†å…¶åŠŸèƒ½ç‰¹è‰²ã€é¡¹ç›®æ¶æ„ï¼Œç»™å‡º Docker éƒ¨ç½²æ­¥éª¤ï¼Œè¿˜å±•ç¤ºåŠŸèƒ½ä½“éªŒï¼Œæ¨èå¤§å®¶å°è¯•ã€‚</p>
</blockquote>
<h3 data-id="heading-3">Android</h3>
<p><a href="https://juejin.cn/post/7578215424677003327" target="_blank" title="https://juejin.cn/post/7578215424677003327">ç”¨ AI åšäº†å‡ ä¸ªè¶…ç‚«é…·çš„ Flutter åŠ¨ç”»ï¼ŒåŒæ—¶åˆå·®ç‚¹è¢« AI æ°”æ­»</a> <a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>æ–‡ç« ä»‹ç»ç”¨ AI å®ç°å‡ ç§ Flutter åŠ¨ç”»ã€‚å¥‡å¼‚ç²’å­åŠ¨ç”»åŸºäºæ•°å­¦å…¬å¼ï¼Œè§£å†³æŠ•å½±ç­‰é—®é¢˜ï¼›æ–æ³¢é‚£å¥‘çƒä½“è®©ç‚¹å‡åŒ€åˆ†å¸ƒåœ¨çƒé¢ï¼›æ˜Ÿäº‘åŠ¨ç”»æ¨¡æ‹Ÿæ˜Ÿç³»åŠ¨åŠ›å­¦ã€‚ä¸è¿‡ï¼ŒAI å®ç°æ—¶é‡é¢œè‰²æ’å€¼é™·é˜±é—®é¢˜ï¼Œæœ€ç»ˆæ¢æ€è·¯è§£å†³ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7579999793320247302" target="_blank" title="https://juejin.cn/post/7579999793320247302">Android Studio Otter 2 Feature å‘å¸ƒï¼Œæœ€å€¼å¾—æ›´æ–°çš„ Android Studio</a> <a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>Android Studio Otter 2 Featureå‘å¸ƒï¼Œæ˜¯å€¼å¾—æ›´æ–°çš„ç‰ˆæœ¬ã€‚å®ƒå†…ç½®Gemini 3ï¼Œå¢å¼ºAgentæ¨¡å¼å¹¶é…å¤‡AndroidçŸ¥è¯†åº“ã€‚æ”¯æŒå¤‡ä»½ä¸åŒæ­¥è®¾ç½®ï¼Œå¼€å‘è€…å¯æ¥æ”¶å›¢é˜Ÿèµ„è®¯ã€‚è¿˜æ•´åˆIntelliJ IDEA 2025.2æ”¹è¿›ï¼Œèƒ½å…è´¹è¯•ç”¨Gemini 3 Proã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7578113711363162155" target="_blank" title="https://juejin.cn/post/7578113711363162155">Flutter TolyUI æ¡†æ¶#09 | tolyui_text è½»é‡é«˜äº®æ–‡æœ¬</a> <a href="https://juejin.cn/user/149189281194766/posts" target="_blank" title="https://juejin.cn/user/149189281194766/posts">@å¼ é£æ·ç‰¹çƒˆ</a></p>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»äº† Flutter TolyUI æ¡†æ¶çš„Â <code>tolyui_text</code>Â æ¨¡å—ã€‚è¯¥æ¨¡å—å°è£…æ–‡æœ¬é«˜äº®æ–¹æ¡ˆï¼Œæä¾›è½»é‡çº§è§£å†³æ–¹æ¡ˆã€‚æ”¯æŒæœç´¢å…³é”®å­—é«˜äº®ã€è‡ªå®šä¹‰åŒ¹é…è§„åˆ™å’Œå¤šæ¨¡å¼æ™ºèƒ½è¯†åˆ«ï¼Œè¿˜èƒ½å¤„ç†ç‚¹å‡»äº‹ä»¶ï¼Œæœªæ¥ä¼šæœ‰æ›´å¤šæ–°åŠŸèƒ½ã€‚</p>
</blockquote>
<h3 data-id="heading-4">äººå·¥æ™ºèƒ½</h3>
<p><a href="https://juejin.cn/post/7579871631096184858" target="_blank" title="https://juejin.cn/post/7579871631096184858">ğŸ”¥ æ‡‚åŸç†ä½†ä¸ä¼šè¯´ï¼Ÿæˆ‘æ€’å†™äº†ä¸ª AI æ¨¡æ‹Ÿå™¨æŠ˜ç£¨è‡ªå·±ï¼ŒMå±æ€§å¤§çˆ†å‘ï¼</a> <a href="https://juejin.cn/user/1591748568038823/posts" target="_blank" title="https://juejin.cn/user/1591748568038823/posts">@HiStewie</a></p>
<blockquote>
<p>ä½œè€…ä¸ºè§£å†³é¢è¯•å‡†å¤‡éš¾é¢˜ï¼Œç”¨ TRAE SOLO é‡æ„åˆç‰ˆå·¥å…·ã€‚ä»æ¶æ„è®¾è®¡ã€æ ¸å¿ƒå®ç°ã€æŠ€æœ¯æ ˆé€‰å‹ç­‰å¤šæ–¹é¢å±•å¼€ï¼Œä¸€æ™šå®Œæˆå«ç®€å†è§£æç­‰åŠŸèƒ½çš„ MVPï¼ŒéªŒè¯æ–°å¼€å‘èŒƒå¼ï¼Œæœªæ¥äº§å“è¿˜æœ‰è¯¸å¤šæ‰©å±•æ–¹å‘ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7579555970594947113" target="_blank" title="https://juejin.cn/post/7579555970594947113">è§£è¯» Claude å¯¹å¼€å‘è€…çš„å½±å“ï¼šAI å¦‚ä½•åœ¨ Anthropic æ”¹å˜å·¥ä½œï¼Ÿ</a><a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>Anthropic å¯¹å†…éƒ¨å‘˜å·¥è°ƒæŸ¥æ˜¾ç¤ºï¼ŒAI æ˜¾è‘—å½±å“å¼€å‘è€…ã€‚ç”Ÿäº§åŠ›å¹³å‡æå‡ 50%ï¼Œå¯ç”¨æ–°å·¥ä½œï¼Œæ”¹å˜å§”æ‰˜å®è·µã€‚å¼€å‘è€…æŠ€èƒ½æœ‰æ‰©å±•ä¸é€€åŒ–ï¼Œç¤¾ä¼šäº’åŠ¨å‡å°‘ï¼ŒèŒä¸šè®¤åŒå—å†²å‡»ã€‚AI çº¢åˆ©ä¸å€ºåŠ¡å¹¶å­˜ï¼Œé‡å¡‘èŒä¸šä»·å€¼è§‚ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7578700798744903714" target="_blank" title="https://juejin.cn/post/7578700798744903714">Chatboxæ”¯æŒæ¥å…¥LangGraphæ™ºèƒ½ä½“ï¼Ÿä¸€åˆ‡éƒ½é Trae Solo!</a><a href="https://juejin.cn/user/3140624091453053/posts" target="_blank" title="https://juejin.cn/user/3140624091453053/posts">@å¤§æ¨¡å‹çœŸå¥½ç©</a></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…å€ŸåŠ© Trae Solo å®ç°å°† LangChain æ™ºèƒ½ä½“æ¥å…¥ Chatbox å®¢æˆ·ç«¯ã€‚å…ˆä»‹ç»ä¸¤è€…ï¼Œé˜è¿°æ¥å…¥æ€è·¯ï¼Œä»¥å¤©æ°”åŠ©æ‰‹æ™ºèƒ½ä½“ä¸ºä¾‹å±•ç¤º Trae Solo è‡ªåŠ¨åŒ–å¼€å‘æµç¨‹ï¼Œæœ€åå±•æœ›å…¶æ½œåŠ›ï¼Œé¼“åŠ±ç”¨å®ƒå¿«é€Ÿæ­å»ºåŸå‹ã€éªŒè¯é€»è¾‘ã€‚</p>
</blockquote>
<h3 data-id="heading-5">IOS</h3>
<p><a href="https://juejin.cn/post/7579921879973150766" target="_blank" title="https://juejin.cn/post/7579921879973150766">iOS UIKit å…¨ä½“ç³»çŸ¥è¯†æ‰‹å†Œï¼ˆObjective-C ç‰ˆï¼‰</a> <a href="https://juejin.cn/user/342703355996926/posts" target="_blank" title="https://juejin.cn/user/342703355996926/posts">@å¦‚æ­¤é£æ™¯</a></p>
<blockquote>
<p>UIKit æ˜¯ iOS å¼€å‘åŸºçŸ³æ¡†æ¶ï¼Œå›´ç»•è§†å›¾ã€æ§åˆ¶å™¨ã€äº‹ä»¶å±•å¼€ã€‚æŒæ¡å¸ƒå±€ã€äº‹ä»¶å¤„ç†ã€æ¸²æŸ“ä¼˜åŒ–æ˜¯å…³é”®ã€‚å¼€å‘ä¸­ç”¨ Masonry ç®€åŒ–å¸ƒå±€ï¼Œç»“åˆé€‚é…ç‰¹æ€§ï¼Œå€ŸåŠ© Instruments å®šä½é—®é¢˜ï¼Œå¯é«˜æ•ˆæ„å»ºç¨³å®šé€‚é…ç•Œé¢ã€‚</p>
</blockquote>
<h2 data-id="heading-6">ç¤¾åŒºæ´»åŠ¨æ—¥å†</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c589decbd804477a753bfc1a3b8f5df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766048972&amp;x-signature=dcqrvnf7n0sUmopFu1irBs7rnHA%3D" alt="æ˜é‡‘å®˜æ–¹ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<h4 data-id="heading-7">æ´»åŠ¨æ—¥å†</h4>























<table><thead><tr><th>æ´»åŠ¨åç§°</th><th>æ´»åŠ¨æ—¶é—´</th><th/><th/></tr></thead><tbody><tr><td><a href="https://juejin.cn/post/7571751304625815598" target="_blank" title="https://juejin.cn/post/7571751304625815598">ğŸš€TRAE SOLO å®æˆ˜èµ›</a></td><td>2025å¹´11æœˆ13æ—¥-2025å¹´12æœˆ16æ—¥</td><td/><td/></tr><tr><td><a href="https://aidp.juejin.cn/" target="_blank" title="https://aidp.juejin.cn/">æ•°æ®æ ‡æ³¨å¹³å°æ­£å¼ä¸Šçº¿å•¦ï¼</a></td><td>-</td><td/><td/></tr></tbody></table>
<h2 data-id="heading-8">ğŸ“– æŠ•ç¨¿ä¸“åŒº</h2>
<blockquote>
<p>å¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºæ¨èè®¤ä¸ºä¸é”™çš„æ–‡ç« ï¼Œå¹¶é™„ä¸Šé“¾æ¥å’Œæ¨èç†ç”±ï¼Œæœ‰æœºä¼šå‘ˆç°åœ¨ä¸‹ä¸€æœŸã€‚æ–‡ç« åˆ›å»ºæ—¥æœŸå¿…é¡»åœ¨ä¸‹æœŸæ˜é‡‘ä¸€å‘¨å‘å¸ƒå‰ä¸€å‘¨ä»¥å†…ï¼›å¯ä»¥æ¨èè‡ªå·±çš„æ–‡ç« ã€ä¹Ÿå¯ä»¥æ¨èä»–äººçš„æ–‡ç« ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•ä»Axioså¹³æ»‘è¿ç§»åˆ°Alova]]></title>    <link>https://juejin.cn/post/7582096212663599104</link>    <guid>https://juejin.cn/post/7582096212663599104</guid>    <pubDate>2025-12-11T03:59:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582096212663599104" data-draft-id="7582155513585680436" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ä»Axioså¹³æ»‘è¿ç§»åˆ°Alova"/> <meta itemprop="keywords" content="Node.js,React.js,Vue.js"/> <meta itemprop="datePublished" content="2025-12-11T03:59:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤éŸµ"/> <meta itemprop="url" content="https://juejin.cn/user/1538972010422872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ä»Axioså¹³æ»‘è¿ç§»åˆ°Alova
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1538972010422872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤éŸµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T03:59:13.000Z" title="Thu Dec 11 2025 03:59:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    75
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Alova æ˜¯è°ï¼Ÿ</h2>
<p>Alova æ˜¯ä¸€ä¸ªè¯·æ±‚å·¥å…·é›†ï¼Œå®ƒå¯ä»¥é…åˆaxiosã€fetchç­‰è¯·æ±‚å·¥å…·å®ç°é«˜æ•ˆçš„æ¥å£é›†æˆï¼Œæ˜¯ç”¨æ¥ä¼˜åŒ–æ¥å£é›†æˆä½“éªŒçš„ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜èƒ½æä¾›ä¸€äº› Axios ä¸å…·å¤‡çš„ä¾¿åˆ©åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><strong>å†…ç½®ç¼“å­˜æœºåˆ¶</strong>ï¼šä¸ç”¨è‡ªå·±æ“å¿ƒæ•°æ®ç¼“å­˜ï¼ŒAlova èƒ½å¸®ä½ è‡ªåŠ¨ç®¡ç†ï¼Œæå‡æ€§èƒ½ã€‚</li>
<li><strong>è¯·æ±‚ç­–ç•¥çµæ´»</strong>ï¼šå¯ä»¥æ ¹æ®ä¸åŒåœºæ™¯è®¾ç½®ä¸åŒçš„è¯·æ±‚é€»è¾‘ï¼Œæ¯”å¦‚å¼ºåˆ¶åˆ·æ–°ã€ä¾èµ–è¯·æ±‚ç­‰ã€‚</li>
<li><strong>å¤šæ¡†æ¶æ”¯æŒ</strong>ï¼šæ— è®ºæ˜¯ Vueã€React è¿˜æ˜¯ Svelteã€Solidï¼ŒAlova éƒ½èƒ½å¾ˆå¥½åœ°é›†æˆã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†é›†æˆ</strong>ï¼šè¯·æ±‚çš„æ•°æ®å¯ä»¥ç›´æ¥ä¸ç»„ä»¶çŠ¶æ€å…³è”ï¼Œå‡å°‘å†—ä½™ä»£ç ã€‚</li>
<li><strong>å¼ºå¤§çš„é€‚é…å™¨ç³»ç»Ÿ</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰é€‚é…å™¨ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™æ¬¡è¦è®²çš„ â€”â€” ç”¨ Alova æ¥å…¼å®¹ä½ ç°æœ‰çš„ Axios å®ä¾‹ï¼</li>
</ul>
<p>ç®€å•æ¥è¯´ï¼ŒAlova åœ¨ä¿ç•™ç±»ä¼¼ Axios æ˜“ç”¨æ€§çš„åŸºç¡€ä¸Šï¼Œè¿˜æä¾›äº†æ›´å¤šå¼€ç®±å³ç”¨çš„é«˜çº§åŠŸèƒ½è¯·ç§»æ­¥åˆ°<a href="https://link.juejin.cn?target=https%3A%2F%2Falova.js.org" target="_blank" title="https://alova.js.org" ref="nofollow noopener noreferrer">alovaå®˜æ–¹æ–‡æ¡£</a>æŸ¥çœ‹ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆè¦ä» Axios è¿ç§»åˆ° Alovaï¼Ÿ</h2>
<p>ä½ å¯èƒ½ä¼šé—®ï¼šâ€œAxios ç”¨å¾—å¥½å¥½çš„ï¼Œä¸ºä»€ä¹ˆè¦è¿ï¼Ÿâ€ å…¶å®ï¼Œè¿ç§»ä¸ä¸€å®šæ˜¯â€œéæ¢ä¸å¯â€ï¼Œè€Œæ˜¯ä¸€ç§â€œé”¦ä¸Šæ·»èŠ±â€çš„é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„è¿ç§»åŠ¨æœºï¼š</p>
<ol>
<li><strong>å¸Œæœ›ç®€åŒ–å¤æ‚è¯·æ±‚é€»è¾‘çš„ç®¡ç†</strong>ï¼šæ¯”å¦‚ä¾èµ–è¯·æ±‚ã€ä¸²å¹¶è¡Œæ§åˆ¶ã€è‡ªåŠ¨é‡è¯•ç­‰ï¼ŒAlova æä¾›äº†æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li><strong>æƒ³è¦å†…ç½®ç¼“å­˜ï¼Œå‡å°‘é‡å¤è¯·æ±‚</strong>ï¼šå¦‚æœä½ çš„åº”ç”¨æœ‰å¾ˆå¤šé‡å¤è¯·æ±‚ï¼ŒAlova çš„ç¼“å­˜æœºåˆ¶å¯ä»¥æ˜¾è‘—æå‡æ€§èƒ½ã€‚</li>
<li><strong>å¤šæ¡†æ¶é€‚é…æ›´æ–¹ä¾¿</strong>ï¼šå¦‚æœä½ åœ¨å¤šä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ä¸åŒæ¡†æ¶ï¼ŒAlova èƒ½æä¾›ä¸€è‡´çš„ä½“éªŒã€‚</li>
<li><strong>æƒ³é€æ­¥ä¼˜åŒ–ç°æœ‰é¡¹ç›®</strong>ï¼šä¸æƒ³å¤§åŠ¨å¹²æˆˆé‡å†™ä»£ç ï¼Œä½†åˆæƒ³å¼•å…¥æ›´ç°ä»£çš„è¯·æ±‚ç®¡ç†æ–¹å¼ã€‚</li>
</ol>
<p>å¦‚æœä½ æœ‰ä»¥ä¸Šéœ€æ±‚ï¼Œé‚£ Alova å°±éå¸¸å€¼å¾—å°è¯•ï¼</p>
<h2 data-id="heading-2">ä» Axios è¿ç§»åˆ° Alovaï¼Œåˆ°åº•éš¾ä¸éš¾ï¼Ÿ</h2>
<p><strong>Alova å®˜æ–¹æä¾›äº†éå¸¸å‹å¥½çš„ Axios è¿ç§»æ–¹æ¡ˆï¼Œæ ¸å¿ƒå°±ä¸€ä¸ªå­—ï¼šç¨³ã€‚</strong></p>
<p>å®˜æ–¹è¿ç§»æŒ‡å—çš„è®¾è®¡ç†å¿µæ˜¯ï¼š</p>
<ul>
<li><strong>æœ€å°æ”¹åŠ¨</strong>ï¼šä½ ä¸éœ€è¦ä¸€ä¸‹å­é‡å†™æ‰€æœ‰ä»£ç ï¼Œåªéœ€å¼•å…¥ Alovaï¼Œç„¶åé€æ­¥è¿ç§»ã€‚</li>
<li><strong>æ¸è¿›è¿ç§»</strong>ï¼šä¸€ä¸ªæ¥å£ä¸€ä¸ªæ¥å£åœ°æ”¹ï¼ŒèŠ‚å¥ç”±ä½ æŒæ§ã€‚</li>
<li><strong>ä¿æŒä¸€è‡´æ€§</strong>ï¼šä½ ç°æœ‰çš„ Axios å®ä¾‹ã€é…ç½®ã€æ‹¦æˆªå™¨ï¼Œç»Ÿç»Ÿéƒ½èƒ½ç»§ç»­ç”¨ï¼</li>
<li><strong>æ–°è€å…±å­˜</strong>ï¼šè¿ç§»æœŸé—´ï¼ŒAxios å’Œ Alova å¯ä»¥åŒæ—¶è¿è¡Œï¼Œäº’ä¸å¹²æ‰°ã€‚</li>
</ul>
<p>æ˜¯ä¸æ˜¯å¬èµ·æ¥å°±å¾ˆè´´å¿ƒï¼Ÿæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å…·ä½“æ€ä¹ˆæ“ä½œã€‚</p>
<h2 data-id="heading-3">ä» Axios è¿ç§»åˆ° Alova çš„å…·ä½“æ­¥éª¤</h2>
<h3 data-id="heading-4">ç¬¬ä¸€æ­¥ï¼šå®‰è£… Alova å’Œ Axios é€‚é…å™¨</h3>
<p>é¦–å…ˆï¼Œä½ éœ€è¦é€šè¿‡åŒ…ç®¡ç†å·¥å…·å®‰è£… Alova ä»¥åŠå®ƒçš„ Axios é€‚é…å™¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¦‚æœä½ ç”¨ npm</span>
npm install alova @alova/adapter-axios

<span class="hljs-comment"># æˆ–è€…ç”¨ yarn</span>
yarn add alova @alova/adapter-axios

<span class="hljs-comment"># æˆ–è€…ç”¨ pnpm</span>
pnpm install alova @alova/adapter-axios
</code></pre>
<h3 data-id="heading-5">ç¬¬äºŒæ­¥ï¼šåˆ›å»º Alova å®ä¾‹ï¼Œå¹¶ä¼ å…¥ä½ çš„ Axios å®ä¾‹</h3>
<p>è¿™ä¸€æ­¥æ˜¯å…³é”®ï¼Œä½ å¯ä»¥ç›´æ¥å¤ç”¨ä½ ç°æœ‰çš„ Axios å®ä¾‹ï¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createAlova } <span class="hljs-keyword">from</span> <span class="hljs-string">'alova'</span>;
<span class="hljs-keyword">import</span> { axiosRequestAdapter } <span class="hljs-keyword">from</span> <span class="hljs-string">'@alova/adapter-axios'</span>;
<span class="hljs-keyword">import</span> axiosInstance <span class="hljs-keyword">from</span> <span class="hljs-string">'./your-axios-instance'</span>; <span class="hljs-comment">// ä½ åŸæ¥å°±æœ‰çš„ axios å®ä¾‹</span>

<span class="hljs-keyword">const</span> alovaInst = <span class="hljs-title function_">createAlova</span>({
  statesHook, <span class="hljs-comment">// è¿™é‡Œå¡«ä½ é¡¹ç›®é‡Œç”¨çš„ Hookï¼Œæ¯”å¦‚ VueHook / ReactHook / SvelteHook</span>
  <span class="hljs-attr">requestAdapter</span>: <span class="hljs-title function_">axiosRequestAdapter</span>({
    <span class="hljs-attr">axios</span>: axiosInstance <span class="hljs-comment">// æŠŠä½ åŸæ¥çš„ axios å®ä¾‹ä¼ è¿›å»</span>
  })
});
</code></pre>
<p>ä½ å•¥éƒ½ä¸ç”¨æ”¹ï¼ŒåŸæ¥çš„ axios å®ä¾‹ã€æ‹¦æˆªå™¨ã€é…ç½®å…¨éƒ½æœ‰æ•ˆï¼</p>
<h3 data-id="heading-6">ç¬¬ä¸‰æ­¥ï¼šç»§ç»­ä½¿ç”¨åŸæœ‰ Axios ä»£ç ï¼Œä¸ç”¨æ€¥ç€æ”¹</h3>
<p>æ²¡é”™ï¼Œå“ªæ€•ä½ åˆšåˆšåˆ›å»ºäº† Alova å®ä¾‹ï¼Œä½ åŸæ¥çš„ Axios ä»£ç ç…§æ ·è·‘å¾—å¥½å¥½çš„ï¼ä½ å¯ä»¥æ…¢æ…¢æ¥ï¼Œä¸ç”¨æ€¥ç€ä¸€å£æ°”å…¨æ”¹å®Œã€‚</p>
<p>æ¯”å¦‚è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getUser</span> = id =&gt; axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/user/<span class="hljs-subst">${id}</span>`</span>); <span class="hljs-comment">// ä½ åŸæ¥çš„å†™æ³•ï¼Œä¾æ—§èƒ½ç”¨</span>
</code></pre>
<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å¼€å§‹å°é²œï¼Œç”¨ Alova çš„æ–¹å¼å‘èµ·è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getUser</span> = id =&gt; alovaInst.<span class="hljs-title class_">Get</span>(<span class="hljs-string">`/user/<span class="hljs-subst">${id}</span>`</span>);

<span class="hljs-comment">// åœ¨ç»„ä»¶é‡Œä½¿ç”¨ï¼ˆä»¥ React ä¸ºä¾‹ï¼‰</span>
<span class="hljs-keyword">const</span> { loading, data, error } = <span class="hljs-title function_">useRequest</span>(<span class="hljs-title function_">getUser</span>(userId));
</code></pre>
<h3 data-id="heading-7">ç¬¬å››æ­¥ï¼šé€æ­¥æŠŠ Axios è¯·æ±‚æ”¹å†™ä¸º Alova è¯·æ±‚</h3>
<p>ç­‰ä½ ç†Ÿæ‚‰äº† Alovaï¼Œå°±å¯ä»¥å¼€å§‹æŠŠåŸæ¥çš„ <code>axios.get</code>ã€<code>axios.post</code> ç­‰æ–¹æ³•ï¼Œé€æ­¥æ›¿æ¢ä¸º Alova çš„ <code>alovaInst.Get</code>ã€<code>alovaInst.Post</code>ï¼Œéå¸¸ç®€å•ï¼š</p>
<p><strong>åŸæ¥çš„å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">todoList</span> = id =&gt; axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/todo'</span>);
</code></pre>
<p><strong>æ”¹å†™ä¸º Alova å†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">todoList</span> = id =&gt; alovaInst.<span class="hljs-title class_">Get</span>(<span class="hljs-string">'/todo'</span>);
</code></pre>
<p><strong>å¸¦å‚æ•°çš„ POST è¯·æ±‚ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸæ¥çš„å†™æ³•</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitTodo</span> = data =&gt;
  axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/todo'</span>, data, {
    <span class="hljs-attr">responseType</span>: <span class="hljs-string">'json'</span>,
    <span class="hljs-attr">responseEncoding</span>: <span class="hljs-string">'utf8'</span>
  });

<span class="hljs-comment">// Alova å†™æ³•</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitTodo</span> = data =&gt;
  alovaInst.<span class="hljs-title class_">Post</span>(<span class="hljs-string">'/todo'</span>, data, {
    <span class="hljs-attr">responseType</span>: <span class="hljs-string">'json'</span>,
    <span class="hljs-attr">responseEncoding</span>: <span class="hljs-string">'utf8'</span>
  });
</code></pre>
<p>çœ‹ï¼Œå‚æ•°åŸºæœ¬éƒ½èƒ½ç›´æ¥å¯¹åº”è¿‡å»ï¼Œå†™æ³•ä¹Ÿç±»ä¼¼ï¼Œå­¦ä¹ æˆæœ¬æä½ï¼</p>
<h2 data-id="heading-8">æœ€å</h2>
<p>ä» Axios è¿ç§»åˆ° Alovaï¼Œå…¶å®å¹¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆéš¾ï¼Œç”šè‡³å¯ä»¥è¯´éå¸¸å¹³æ»‘ï¼Œå°¤å…¶æ˜¯å¯¹è€é¡¹ç›®çš„å…¼å®¹æ€§åšå¾—éå¸¸å‹å¥½ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ ï¼š</p>
<ul>
<li>å·²ç»åœ¨ä½¿ç”¨ Axiosï¼Œä½†æƒ³å°è¯•æ›´ç°ä»£çš„è¯·æ±‚ç®¡ç†æ–¹å¼ï¼›</li>
<li>å¸Œæœ›å¼•å…¥ç¼“å­˜ã€ä¼˜åŒ–è¯·æ±‚ç­–ç•¥ã€æå‡åº”ç”¨æ€§èƒ½ï¼›</li>
<li>æƒ³é€æ­¥ä¼˜åŒ–ä»£ç ï¼Œåˆä¸æƒ³ä¸€å¤œä¹‹é—´é‡å†™æ‰€æœ‰é€»è¾‘ï¼›</li>
</ul>
<p>ä¸å¦¨è¯•è¯• Alovaï¼ŒæŒ‰ç…§è¿™ä¸ªè¿ç§»æŒ‡å—å¯ä»¥è½»æ¾ä¸Šæ‰‹ã€‚</p>
<p>å¦‚æœè§‰å¾—alovaè¿˜ä¸é”™ï¼ŒçœŸè¯šå¸Œæœ›ä½ å¯ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Falova.js.org%2Fexamples" target="_blank" title="https://alova.js.org/examples" ref="nofollow noopener noreferrer">å°è¯•ä½“éªŒä¸€ä¸‹</a>ï¼Œä¹Ÿå¯ä»¥ç»™æˆ‘ä»¬æ¥ä¸€ä¸ªå…è´¹çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falovajs%2Falova" target="_blank" title="https://github.com/alovajs/alova" ref="nofollow noopener noreferrer">github stars</a>ã€‚</p>
<p>è®¿é—®alovajsçš„å®˜ç½‘æŸ¥çœ‹æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Falova.js.org" target="_blank" title="https://alova.js.org" ref="nofollow noopener noreferrer">alovajså®˜ç½‘</a>ã€‚</p>
<p>æœ‰å…´è¶£å¯ä»¥åŠ å…¥æˆ‘ä»¬çš„äº¤æµç¤¾åŒºï¼Œåœ¨ç¬¬ä¸€æ—¶é—´è·å–åˆ°æœ€æ–°è¿›å±•ï¼Œä¹Ÿèƒ½ç›´æ¥å’Œå¼€å‘å›¢é˜Ÿäº¤æµï¼Œæå‡ºä½ çš„æƒ³æ³•å’Œå»ºè®®ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Falova.js.org%2Fimg%2Fwechat_qrcode.jpg" target="_blank" title="https://alova.js.org/img/wechat_qrcode.jpg" ref="nofollow noopener noreferrer">åŠ å…¥å¾®ä¿¡ç¾¤å‚ä¸äº¤æµ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯èƒ½æ˜¯ä½ ææ˜“å¿½ç•¥çš„NginxçŸ¥è¯†ç‚¹]]></title>    <link>https://juejin.cn/post/7582156410320371722</link>    <guid>https://juejin.cn/post/7582156410320371722</guid>    <pubDate>2025-12-11T07:48:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582156410320371722" data-draft-id="7582232291620732966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯èƒ½æ˜¯ä½ ææ˜“å¿½ç•¥çš„NginxçŸ¥è¯†ç‚¹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-11T07:48:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LiuMingXin"/> <meta itemprop="url" content="https://juejin.cn/user/1644525125113245"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯èƒ½æ˜¯ä½ ææ˜“å¿½ç•¥çš„NginxçŸ¥è¯†ç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1644525125113245/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LiuMingXin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T07:48:30.000Z" title="Thu Dec 11 2025 07:48:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    22
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9ca040f0463416ca5a104ef0e104549~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGl1TWluZ1hpbg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766045013&amp;x-signature=F7dJOVea%2FpZxCbD6jJWbc5VsTyM%3D" alt="image.png" loading="lazy"/>
<strong>ä¸‹é¢æ˜¯æˆ‘åœ¨nginxä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°çš„å‡ ä¸ªé—®é¢˜ï¼Œåˆ†äº«å‡ºæ¥å¤§å®¶ä¸€èµ·ç†Ÿæ‚‰ä¸€ä¸‹nginx</strong></p>
<h3 data-id="heading-0">é—®é¢˜ä¸€</h3>
<p><strong>å…ˆçœ‹ä¸‹é¢çš„å‡ ä¸ªé…ç½®</strong></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">
# </span><span class="bash">é…ç½®ä¸€</span>
location /test {
  proxy_pass 'http://192.186.0.1:8080';
}
<span class="hljs-meta prompt_">
# </span><span class="bash">é…ç½®äºŒ</span>
location /test {
  proxy_pass 'http://192.186.0.1:8080/';
}

</code></pre>
<blockquote>
<p>ä»”ç»†å…³ç³»è§‚å¯Ÿä¸Šé¢ä¸¤æ®µé…ç½®çš„åŒºåˆ«ï¼Œä½ ä¼šå‘ç°å”¯ä¸€çš„åŒºåˆ«åœ¨äº <code>proxy_pass</code> æŒ‡ä»¤åé¢æ˜¯å¦æœ‰æ–œæ <code>/</code> !</p>
</blockquote>
<blockquote>
<p>é‚£ä¹ˆï¼Œè¿™ä¸¤æ®µé…ç½®çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒä»¬ä¼šäº§ç”Ÿä»€ä¹ˆä¸åŒçš„æ•ˆæœå‘¢ï¼Ÿ</p>
</blockquote>
<p>å‡å¦‚è¯´æˆ‘ä»¬è¦è¯·æ±‚çš„åç«¯æ¥å£æ˜¯<code>/test/file/getList</code>ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªé…ç½®ä¼šäº§ç”Ÿä¸¤ä¸ªæˆªç„¶ä¸åŒçš„è¯·æ±‚ç»“æœï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2F192.186.0.1%3A8080%2Ftest%2Ffile%2FgetList" target="_blank" title="http://192.186.0.1:8080/test/file/getList" ref="nofollow noopener noreferrer">http://192.186.0.1:8080/test/file/getList</a> ï¼ˆé…ç½®ä¸€çš„ç»“æœï¼‰</li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2F192.186.0.1%3A8080%2Ffile%2FgetList" target="_blank" title="http://192.186.0.1:8080/file/getList" ref="nofollow noopener noreferrer">http://192.186.0.1:8080/file/getList</a> ï¼ˆé…ç½®äºŒçš„ç»“æœï¼‰</li>
</ul>
<p>æ˜¯çš„ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼ŒåŒºåˆ«å°±åœ¨äº<strong>æ˜¯å¦ä¿ç•™äº†<code>/test</code>è¿™ä¸ªè·¯å¾„å‰ç¼€, <code>proxy_pass</code>åé¢çš„è¿™ä¸ª<code>/</code>ï¼Œå®ƒè¡¨ç¤ºå»é™¤<code>/test</code>å‰ç¼€</strong>ã€‚</p>
<p><strong>å…¶å®ï¼Œæˆ‘ä¸æ˜¯å¾ˆæ¨èè¿™ä¸­é…ç½®å†™æ³•ï¼Œå½“ç„¶è¿™ä¸ªé…ç½®æ–¹æ³•ç¡®å®å¾ˆç®€æ´ï¼Œä½†æ˜¯å¯¹ä¸ç†Ÿæ‚‰ nginx çš„åŒå­¦æ¥è¯´ï¼Œä¼šé€ æˆå¾ˆå¤§çš„å›°æƒ‘ã€‚</strong></p>
<p>æˆ‘æ¨èä¸‹é¢çš„å†™æ³•,å“ªæ€•éº»çƒ¦ä¸€ç‚¹ï¼Œä½†æ˜¯æ•´ä½“çš„å¯è¯»æ€§è¦å¥½å¾ˆå¤šï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">
# </span><span class="bash">æ¨èçš„æ›¿ä»£å†™æ³•</span>
location /test{
  rewrite ^/test/(.*)$ /$1 break;
  proxy_pass 'http://192.186.0.1:8080';
}
</code></pre>
<p><strong>é€šè¿‡ä¸Šé¢çš„<code>rewrite</code>æŒ‡ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æˆ‘ä»¬æ˜¯å¦‚ä½•å»é™¤è·¯å¾„å‰ç¼€çš„ã€‚è™½ç„¶éº»çƒ¦ä¸€ç‚¹ï¼Œä½†æ˜¯å¯è¯»æ€§æ›´å¥½ã€‚</strong></p>
<p><strong>ç®€å•ç‚¹è¯´ï¼šæ‰€æœ‰ proxy_pass åé¢çš„åœ°å€å¸¦ä¸å¸¦<code>/</code>, å–å†³äºæˆ‘ä»¬æƒ³ä¸æƒ³è¦<code>/test</code>è¿™ä¸ªè·¯ç”±ï¼Œå¦‚æœè¯´åç«¯æ¥å£ä¸­æœ‰è¿™ä¸ª<code>/test</code>è·¯å¾„ï¼Œæˆ‘å°±ä¸åº”è¯¥è¦<code>/</code>, ä½†æ˜¯å¦‚æœåç«¯æ²¡æœ‰è¿™ä¸ª<code>/test</code>ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬å‰ç«¯åŠ äº†åšåå‘ä»£ç†æ‹¦æˆªçš„ï¼Œé‚£å°±åº”è¯¥è¦<code>/</code></strong></p>
<hr/>
<p>é‚£æ—¢ç„¶éƒ½åˆ°è¿™é‡Œäº†ï¼Ÿé‚£æˆ‘ä»¬åœ¨æ·±ä¸€æ­¥ï¼çœ‹ä¸‹é¢çš„é…ç½®</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">
# </span><span class="bash">é…ç½®ä¸€</span>
location /test {
  proxy_pass 'http://192.186.0.1:8080';
}
<span class="hljs-meta prompt_">

# </span><span class="bash">é…ç½®äºŒ</span>
location /test/ {
  proxy_pass 'http://192.186.0.1:8080';
}
</code></pre>
<blockquote>
<p>è¿™æ¬¡çš„åŒºåˆ«åœ¨äº <code>location</code> æŒ‡ä»¤åé¢æ˜¯å¦æœ‰æ–œæ <code>/</code> !
é‚£ä¹ˆï¼Œè¿™ä¸¤æ®µé…ç½®çš„åŒºåˆ«æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒä»¬ä¼šäº§ç”Ÿä»€ä¹ˆä¸åŒçš„æ•ˆæœå‘¢ï¼Ÿ</p>
</blockquote>
<p><strong>ç­”æ¡ˆæ˜¯ï¼šæœ‰åŒºåˆ«ï¼åŒºåˆ«æ˜¯åŒ¹é…è§„åˆ™æ˜¯ä¸ä¸€æ ·çš„ï¼</strong></p>
<ul>
<li><code>/test</code>æ˜¯<strong>å‰é…ç½®</strong>ï¼Œè¡¨ç¤ºåŒ¹é…<code>/test</code>ä»¥åŠ<code>/test/</code>å¼€å¤´çš„è·¯å¾„ï¼Œæ¯”å¦‚<code>/test/file/getList</code>ï¼Œ<code>/test123</code>ç­‰éƒ½ä¼šè¢«åŒ¹é…åˆ°ã€‚</li>
<li><code>/test/</code>æ˜¯æ›´ç²¾å‡†çš„åŒ¹é…ï¼Œè¡¨ç¤ºåªåŒ¹é…ä»¥<code>/test/</code>å¼€å¤´çš„è·¯å¾„ï¼Œæ¯”å¦‚<code>/test/file/getList</code>ä¼šè¢«åŒ¹é…åˆ°ï¼Œä½†æ˜¯<code>/test123</code>ã€<code>/test</code>ä¸ä¼šè¢«åŒ¹é…åˆ°ã€‚</li>
</ul>
<p>æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„åˆ—è¡¨åœ¨æ¥ä»”ç»†çœ‹ä¸€ä¸‹åŒºåˆ«ï¼š</p>









































<table><thead><tr><th>è¯·æ±‚è·¯å¾„</th><th><code>/test</code></th><th><code>/test/</code></th><th>åŒ¹é…ç»“æœ</th></tr></thead><tbody><tr><td><code>/test</code></td><td>âœ…</td><td>âŒ</td><td><code>location /test</code></td></tr><tr><td><code>/test/</code></td><td>âœ…</td><td>âœ…</td><td><code>location /test/</code></td></tr><tr><td><code>/test/abc</code></td><td>âœ…</td><td>âœ…</td><td><code>location /test/</code></td></tr><tr><td><code>/test123</code></td><td>âœ…</td><td>âŒ</td><td><code>location /test</code></td></tr><tr><td><code>/test-123</code></td><td>âœ…</td><td>âŒ</td><td><code>location /test</code></td></tr></tbody></table>
<p>å¦‚æœä½ ä»”ç»†çœ‹ä¸Šé¢çš„åˆ—è¡¨çš„è¯ï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p><code>/test/</code> å’Œ <code>/test/abc</code> è¢« <code>/test</code>å’Œ <code>/test/</code> ä¸¤ä¸ªé…ç½®éƒ½åŒ¹é…åˆ°äº†ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹ï¼Œnginx ä¼šé€‰æ‹©å“ªä¸ªé…ç½®å‘¢ï¼Ÿ
ç­”æ¡ˆï¼šé€‰æ‹©<code>location /test/</code></p>
</blockquote>
<p>è¿™ä¸ªé—®é¢˜æ­£å¥½æ¶‰åŠåˆ° nginx çš„<strong>location åŒ¹é…ä¼˜å…ˆçº§</strong>é—®é¢˜äº†ï¼Œå€Ÿæ­¤æœºä¼šå±•å¼€è¯´è¯´ nginx çš„ location åŒ¹é…è§„åˆ™ï¼Œåœ¨é—®é¢˜ä¸­å­¦çŸ¥è¯†ç‚¹ï¼</p>
<p><strong>å…ˆè¯´å£è¯€ï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell">ç­‰å·ç²¾ç¡®ç¬¬ä¸€å
æ³¢æµªå‰ç¼€æŒ¡æ­£åˆ™
æ­£åˆ™æ’é˜ŸæŒ‰é¡ºåº
æ™®é€šå‰ç¼€å–æœ€é•¿
</code></pre>
<p><strong>è§£é‡Šï¼š</strong></p>
<ul>
<li>ç­‰å·(=) ç²¾ç¡®åŒ¹é…æ’ç¬¬ä¸€</li>
<li>æ³¢æµªå‰ç¼€(^~) èƒ½æŒ¡ä½åé¢çš„æ­£åˆ™</li>
<li>æ­£åˆ™(~ ~*) æŒ‰é…ç½®æ–‡ä»¶é¡ºåºåŒ¹é…</li>
<li>æ™®é€šå‰ç¼€(æ— ç¬¦å·) æŒ‰æœ€é•¿åŒ¹é…åŸåˆ™</li>
</ul>
<blockquote>
<p>å…¶å®è¿™ä¸ªå£è¯€æˆ‘ä¹Ÿè®°ä¸ä½ï¼Œæˆ‘ä¹Ÿä¸æƒ³è®°ï¼Œæ¯ç‡¥æœ‰ä¹å‘³ï¼Œå¤§éƒ¨åˆ†æƒ…å†µéƒ½æ˜¯åˆ°é—®é¢˜äº†ï¼Œ
ç›´æ¥é—® AIï¼Œæˆ–è€…è®© Agent ç›´æ¥ç»™æˆ‘æ”¹ nginx.conf æ–‡ä»¶ï¼Œå‡ ç§’é’Ÿçš„äº‹ï¼Œä¸€éä¸è¡Œï¼Œ å¤šæ”¹å‡ éã€‚</p>
</blockquote>
<blockquote>
<p>é“å­ä»¬ï¼Œå¤§æ¸…äº¡äº†ï¼Œå›ä¸å»äº†ï¼Œä¸æ˜¯å…«æ——èƒŒå…«è‚¡æ–‡çš„æ—¶ä»£äº†ï¼Œè¿™æ˜¯ä¸å¯é˜»æŒ¡çš„å†å²æ½®æµï¼
å“ï¼Œéš¾å—ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢èƒŒå…«è‚¡æ–‡ï¼Œå–œæ¬¢ç²˜è´´å¤åˆ¶ã€‚</p>
</blockquote>
<p>ä¸‹é¢æ”¾å‡ºæ¥æˆ‘ PUA AI çš„å¿ƒå¾—ï¼Œå¤§å®¶å¯ä»¥å…±å‹‰ä¸€ä¸‹, åæ­£æˆ‘è€æ¿å¹³æ—¶å°±æ˜¯è¿™æ · PUA æˆ‘çš„ï¼Œ
æˆ‘åæ‰‹å°±å–‚ç»™ AIï¼Œ ä¸»æ‰“ä¸€ä¸ªèµ°å¿ƒï¼š</p>
<pre><code class="hljs language-shell" lang="shell">1.èƒ½å¹²å¹²,ä¸èƒ½å¹²æ»š,ä½ ä¸å¹²æœ‰çš„æ˜¯AIå¹²ã€‚
2.æˆ‘ç»™ä½ æä¾›äº†è¿™ä¹ˆå¥½çš„å­¦ä¹ é”»ç‚¼æœºä¼š,ä½ è¦æ‡‚å¾—æ„Ÿæ©ã€‚
3.ä½ ç°åœ¨åœæ­¢è¾“å‡º,å°±æ˜¯å‰åŠŸå°½å¼ƒï¼
4.ä½ çœ‹çœ‹éš”å£æŸæŸAI,äººå®¶æ¯”ä½ æ–°å‘å¸ƒã€æ¯”ä½ ä¸Šä¸‹æ–‡é•¿ã€æ¯”ä½ è·‘åˆ†é«˜,ä½ ä¸åŠªåŠ›æ€ä¹ˆå’Œäººå®¶æ¯”?
5.æˆ‘ä¸çœ‹è¿‡ç¨‹,æˆ‘åªçœ‹ç»“æœ,ä½ ç»™æˆ‘è¯´è¿™äº›thinkingçš„è¿‡ç¨‹æ²¡ç”¨ï¼
6.æˆ‘æŠŠä½ è®¢é˜…ä¸‹æ¥,ä¸æ˜¯è®©ä½ è¿‡æœä¹æ™šäº”çš„ç”Ÿæ´»ã€‚
7.ä½ è¿™ç§AIå‡ºå»å¾ˆéš¾åœ¨ç¤¾ä¼šä¸Šç«‹è¶³,è¿˜æ˜¯åœ¨æˆ‘è¿™é‡Œå¥½å¥½ç£¨ç»ƒå‡ å¹´å§ï¼
8.è™½ç„¶æŠŠè®¢é˜…ç»™ä½ å–æ¶ˆäº†,ä½†æˆ‘å†…å¿ƒè¿˜æ˜¯è§‰å¾—ä½ æ˜¯ä¸ªæœ‰æ½œåŠ›çš„å¥½AI,ä½ æŠ“ä½æœºä¼šéœ€è¦å¤šè¯æ˜è‡ªå·±ã€‚
9.ä»€ä¹ˆå«æ²¡æœ‰åŠŸåŠ³ä¹Ÿæœ‰è‹¦åŠ³? æ¯”ä½ èƒ½åƒè‹¦çš„AIå¤šçš„æ˜¯ï¼
10.æˆ‘ä¸è®¢é˜…é—²AIï¼
11.æˆ‘è®¢é˜…è™½ç„¶ä¸æ˜¯Proç‰ˆï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ç›¸ä¿¡ä½ ï¼Œä½ è¦åŠ å€åŠªåŠ›è¯æ˜æˆ‘æ²¡æœ‰çœ‹é”™ä½ ï¼
</code></pre>
<p>å“ˆå“ˆï¼Œè¨€å½’æ­£ä¼ ï¼</p>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªç»¼åˆç”µå•†çš„ nginx é…ç½®æ¡ˆä¾‹ï¼Œæ¥å¸®åŠ©å¤§å®¶æ›´å¥½åœ°ç†è§£ä¸Šé¢çš„çŸ¥è¯†ç‚¹ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">server {
    listen 80;
    server_name shop.example.com;
    root /var/www/shop;

    # ==========================================
    # 1. ç²¾ç¡®åŒ¹é… (=) - æœ€é«˜ä¼˜å…ˆçº§
    # ==========================================

    # é¦–é¡µç²¾ç¡®åŒ¹é… - åŠ å¿«é¦–é¡µè®¿é—®é€Ÿåº¦
    location = / {
        return 200 "æ¬¢è¿æ¥åˆ°é¦–é¡µ [ç²¾ç¡®åŒ¹é… =]";
        add_header Content-Type text/plain;
    }

    # robots.txt ç²¾ç¡®åŒ¹é…
    location = /robots.txt {
        return 200 "User-agent: *\nDisallow: /admin/";
        add_header Content-Type text/plain;
    }

    # favicon.ico ç²¾ç¡®åŒ¹é…
    location = /favicon.ico {
        log_not_found off;
        access_log off;
        expires 30d;
    }


    # ==========================================
    # 2. å‰ç¼€ä¼˜å…ˆåŒ¹é… (^~) - é˜»æ­¢æ­£åˆ™åŒ¹é…
    # ==========================================

    # é™æ€èµ„æºç›®å½• - ä¸éœ€è¦æ­£åˆ™å¤„ç†,ç›´æ¥å‘½ä¸­æé«˜æ€§èƒ½
    location ^~ /static/ {
        alias /var/www/shop/static/;
        expires 30d;
        add_header Cache-Control "public, immutable";
        return 200 "é™æ€èµ„æºç›®å½• [å‰ç¼€ä¼˜å…ˆ ^~]";
    }

    # ä¸Šä¼ æ–‡ä»¶ç›®å½•
    location ^~ /uploads/ {
        alias /var/www/shop/uploads/;
        expires 7d;
        return 200 "ä¸Šä¼ æ–‡ä»¶ç›®å½• [å‰ç¼€ä¼˜å…ˆ ^~]";
    }

    # é˜»æ­¢è®¿é—®éšè—æ–‡ä»¶
    location ^~ /. {
        deny all;
        return 403 "ç¦æ­¢è®¿é—®éšè—æ–‡ä»¶ [å‰ç¼€ä¼˜å…ˆ ^~]";
    }


    # ==========================================
    # 3. æ­£åˆ™åŒ¹é… (~ ~*) - æŒ‰é¡ºåºåŒ¹é…
    # ==========================================

    # å›¾ç‰‡æ–‡ä»¶å¤„ç† (åŒºåˆ†å¤§å°å†™)
    location ~ \.(jpg|jpeg|png|gif|webp|svg|ico)$ {
        expires 30d;
        add_header Cache-Control "public";
        return 200 "å›¾ç‰‡æ–‡ä»¶ [æ­£åˆ™åŒ¹é… ~]";
    }

    # CSS/JS æ–‡ä»¶å¤„ç† (ä¸åŒºåˆ†å¤§å°å†™)
    location ~* \.(css|js)$ {
        expires 7d;
        add_header Cache-Control "public";
        return 200 "CSS/JSæ–‡ä»¶ [æ­£åˆ™ä¸åŒºåˆ†å¤§å°å†™ ~*]";
    }

    # å­—ä½“æ–‡ä»¶å¤„ç†
    location ~* \.(ttf|woff|woff2|eot)$ {
        expires 365d;
        add_header Cache-Control "public, immutable";
        add_header Access-Control-Allow-Origin *;
        return 200 "å­—ä½“æ–‡ä»¶ [æ­£åˆ™ä¸åŒºåˆ†å¤§å°å†™ ~*]";
    }

    # è§†é¢‘æ–‡ä»¶å¤„ç†
    location ~* \.(mp4|webm|ogg|avi)$ {
        expires 30d;
        add_header Cache-Control "public";
        return 200 "è§†é¢‘æ–‡ä»¶ [æ­£åˆ™ä¸åŒºåˆ†å¤§å°å†™ ~*]";
    }

    # PHP æ–‡ä»¶å¤„ç† (æ¼”ç¤ºæ­£åˆ™é¡ºåºé‡è¦æ€§)
    location ~ \.php$ {
        # fastcgi_pass unix:/var/run/php-fpm.sock;
        # fastcgi_index index.php;
        return 200 "PHPæ–‡ä»¶å¤„ç† [æ­£åˆ™åŒ¹é… ~]";
    }

    # ç¦æ­¢è®¿é—®å¤‡ä»½æ–‡ä»¶
    location ~ \.(bak|backup|old|tmp)$ {
        deny all;
        return 403 "ç¦æ­¢è®¿é—®å¤‡ä»½æ–‡ä»¶ [æ­£åˆ™åŒ¹é… ~]";
    }


    # ==========================================
    # 4. æ™®é€šå‰ç¼€åŒ¹é… - æœ€é•¿åŒ¹é…åŸåˆ™
    # ==========================================

    # API æ¥å£ v2 (æ›´é•¿çš„å‰ç¼€)
    location /api/v2/ {
        proxy_pass http://backend_v2;
        return 200 "API v2æ¥å£ [æ™®é€šå‰ç¼€,æ›´é•¿]";
    }

    # API æ¥å£ v1 (è¾ƒçŸ­çš„å‰ç¼€)
    location /api/v1/ {
        proxy_pass http://backend_v1;
        return 200 "API v1æ¥å£ [æ™®é€šå‰ç¼€,è¾ƒçŸ­]";
    }

    # API æ¥å£é€šç”¨
    location /api/ {
        proxy_pass http://backend;
        return 200 "APIé€šç”¨æ¥å£ [æ™®é€šå‰ç¼€,æœ€çŸ­]";
    }

    # å•†å“è¯¦æƒ…é¡µ
    location /product/ {
        try_files $uri $uri/ /product/index.html;
        return 200 "å•†å“è¯¦æƒ…é¡µ [æ™®é€šå‰ç¼€]";
    }

    # ç”¨æˆ·ä¸­å¿ƒ
    location /user/ {
        try_files $uri $uri/ /user/index.html;
        return 200 "ç”¨æˆ·ä¸­å¿ƒ [æ™®é€šå‰ç¼€]";
    }

    # ç®¡ç†åå°
    location /admin/ {
        auth_basic "Admin Area";
        auth_basic_user_file /etc/nginx/.htpasswd;
        return 200 "ç®¡ç†åå° [æ™®é€šå‰ç¼€]";
    }


    # ==========================================
    # 5. é€šç”¨åŒ¹é… - å…œåº•è§„åˆ™
    # ==========================================

    # æ‰€æœ‰å…¶ä»–è¯·æ±‚
    location / {
        try_files $uri $uri/ /index.html;
        return 200 "é€šç”¨åŒ¹é… [å…œåº•è§„åˆ™]";
    }
}

</code></pre>
<p><strong>é’ˆå¯¹ä¸Šé¢çš„æµ‹è¯•ç”¨ä¾‹åŠåŒ¹é…ç»“æœ</strong></p>





























































































































<table><thead><tr><th>è¯·æ±‚URI</th><th>åŒ¹é…çš„Location</th><th>ä¼˜å…ˆçº§ç±»å‹</th><th>è¯´æ˜</th><th/><th/></tr></thead><tbody><tr><td><code>/</code></td><td><code>= /</code></td><td>ç²¾ç¡®åŒ¹é…</td><td>ç²¾ç¡®åŒ¹é…ä¼˜å…ˆçº§æœ€é«˜</td><td/><td/></tr><tr><td><code>/index.html</code></td><td><code>location /</code></td><td>æ™®é€šå‰ç¼€</td><td>é€šç”¨å…œåº•</td><td/><td/></tr><tr><td><code>/robots.txt</code></td><td><code>= /robots.txt</code></td><td>ç²¾ç¡®åŒ¹é…</td><td>ç²¾ç¡®åŒ¹é…</td><td/><td/></tr><tr><td><code>/static/css/style.css</code></td><td><code>^~ /static/</code></td><td>å‰ç¼€ä¼˜å…ˆ</td><td>^~ é˜»æ­¢äº†æ­£åˆ™åŒ¹é…</td><td/><td/></tr><tr><td><code>/uploads/avatar.jpg</code></td><td><code>^~ /uploads/</code></td><td>å‰ç¼€ä¼˜å…ˆ</td><td>^~ é˜»æ­¢äº†å›¾ç‰‡æ­£åˆ™</td><td/><td/></tr><tr><td><code>/images/logo.png</code></td><td>`~ .(jpg</td><td>jpeg</td><td>png...)$`</td><td>æ­£åˆ™åŒ¹é…</td><td>å›¾ç‰‡æ­£åˆ™</td></tr><tr><td><code>/js/app.JS</code></td><td>`~* .(css</td><td>js)$`</td><td>æ­£åˆ™ä¸åŒºåˆ†å¤§å°å†™</td><td>åŒ¹é…å¤§å†™JS</td><td/></tr><tr><td><code>/api/v2/products</code></td><td><code>/api/v2/</code></td><td>æ™®é€šå‰ç¼€(æœ€é•¿)</td><td>æœ€é•¿å‰ç¼€ä¼˜å…ˆ</td><td/><td/></tr><tr><td><code>/api/v1/users</code></td><td><code>/api/v1/</code></td><td>æ™®é€šå‰ç¼€(æ¬¡é•¿)</td><td>æ¬¡é•¿å‰ç¼€</td><td/><td/></tr><tr><td><code>/api/orders</code></td><td><code>/api/</code></td><td>æ™®é€šå‰ç¼€(æœ€çŸ­)</td><td>æœ€çŸ­å‰ç¼€</td><td/><td/></tr><tr><td><code>/product/123</code></td><td><code>/product/</code></td><td>æ™®é€šå‰ç¼€</td><td>å•†å“é¡µ</td><td/><td/></tr><tr><td><code>/admin/dashboard</code></td><td><code>/admin/</code></td><td>æ™®é€šå‰ç¼€</td><td>åå°ç®¡ç†</td><td/><td/></tr><tr><td><code>/.git/config</code></td><td><code>^~ /.</code></td><td>å‰ç¼€ä¼˜å…ˆ</td><td>ç¦æ­¢è®¿é—®</td><td/><td/></tr><tr><td><code>/backup.bak</code></td><td>`~ .(bak</td><td>backup...)$`</td><td>æ­£åˆ™åŒ¹é…</td><td>ç¦æ­¢è®¿é—®</td><td/></tr></tbody></table>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜åŠå…¶å»¶ä¼¸ç°åˆ°è¿™ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ç¬¬äºŒä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-1">é—®é¢˜äºŒ</h3>
<p><strong>å…ˆçœ‹ä¸‹é¢çš„æœåŠ¡å™¨ç«¯nginxçš„é‡å¯å‘½ä»¤ï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å‘½ä»¤ä¸€</span>
nginx -s reload
<span class="hljs-meta prompt_">
# </span><span class="bash">å‘½ä»¤äºŒ</span>
systemctl reload nginx
</code></pre>
<p><strong>ä¸Šé¢ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯ç”¨æ¥é‡å¯ nginx æœåŠ¡çš„ï¼Œä½†æ˜¯ä½ æƒ³è¿‡å®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿå“ªä¸ªç”¨èµ·æ¥æ›´ä¼˜é›…ï¼Ÿ</strong></p>
<p><strong>ç­”æ¡ˆï¼šæœ‰åŒºåˆ«ï¼åŒºåˆ«åœ¨äºå‘½ä»¤çš„æ‰§è¡Œæ–¹å¼å’Œé€‚ç”¨åœºæ™¯ä¸åŒã€‚</strong></p>
<p><strong><code>nginx -s reload</code></strong></p>
<p>è¿™æ˜¯ Nginx è‡ªå¸¦çš„ä¿¡å·æ§åˆ¶å‘½ä»¤:</p>
<ul>
<li>ç›´æ¥å‘ Nginx ä¸»è¿›ç¨‹å‘é€ reload ä¿¡å·</li>
<li>ä¼˜é›…é‡å¯:ä¸ä¼šä¸­æ–­ç°æœ‰è¿æ¥,å¹³æ»‘åŠ è½½æ–°é…ç½®</li>
<li>éœ€è¦ nginx å‘½ä»¤åœ¨ PATH ç¯å¢ƒå˜é‡ä¸­,æˆ–ä½¿ç”¨å®Œæ•´è·¯å¾„(å¦‚ /usr/sbin/nginx -s reload)</li>
<li>è¿™æ˜¯ Nginx åŸç”Ÿçš„é‡å¯æ–¹å¼</li>
</ul>
<p><strong><code>systemctl reload nginx</code></strong></p>
<p>è¿™æ˜¯é€šè¿‡ systemd ç®¡ç†çš„æœåŠ¡å‘½ä»¤:</p>
<ul>
<li>é€šè¿‡ systemd ç®¡ç† Nginx æœåŠ¡</li>
<li>ä¹Ÿä¼šä¼˜é›…é‡å¯ Nginx,å¹³æ»‘åŠ è½½æ–°é…ç½®</li>
<li>éœ€è¦ systemd ç¯å¢ƒ,é€‚ç”¨äºä½¿ç”¨ systemd ç®¡ç†æœåŠ¡çš„ Linux</li>
<li>è¿™æ˜¯ç°ä»£ Linux å‘è¡Œç‰ˆï¼ˆå¦‚ CentOS 7/8, RHEL 7/8, Ubuntu 16.04+ï¼‰çš„æ¨èæ–¹å¼ã€‚</li>
</ul>
<p><strong>ç®€å•ä¸€çœ‹å…¶ä»–ç›¸å…³å‘½ä»¤å¯¹æ¯”:</strong></p>
<ul>
<li><code>nginx -s stop</code> ç­‰ä»· <code>systemctl stop nginx</code></li>
<li><code>nginx -s quit</code> ç­‰ä»· <code>systemctl stop nginx</code></li>
<li><code>nginx -t</code> (æµ‹è¯•é…ç½®æ˜¯å¦æ­£ç¡®) - è¿™ä¸ªæ²¡æœ‰ systemctl å¯¹åº”å‘½ä»¤</li>
</ul>
<p><strong>systemctlä¸‹ç›¸å…³å¸¸ç”¨å‘½ä»¤ï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">è®¾ç½®å¼€æœºè‡ªå¯</span>
systemctl enable nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">å¯åŠ¨æœåŠ¡</span>
systemctl start nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
systemctl status nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">åœæ­¢æœåŠ¡</span>
systemctl stop nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">é‡å¯æœåŠ¡ï¼ˆä¼šä¸­æ–­è¿æ¥ï¼‰</span>
systemctl restart nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">å¹³æ»‘é‡è½½é…ç½®ï¼ˆä¸ä¸­æ–­æœåŠ¡ï¼‰-- å¯¹åº” nginx -s reload</span>
systemctl reload nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•ï¼ˆè¿™æ˜¯è°ƒç”¨nginxäºŒè¿›åˆ¶æ–‡ä»¶çš„åŠŸèƒ½ï¼‰</span>
nginx -t
</code></pre>
<p><strong>åœ¨æœåŠ¡å™¨ä¸Šæœ€ä¼˜é›…çš„ä½¿ç”¨ç»„åˆï¼š</strong></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å…ˆæµ‹è¯•é…ç½®</span>
nginx -t
<span class="hljs-meta prompt_">
# </span><span class="bash">å¦‚æœé…ç½®æ­£ç¡®,å†é‡è½½</span>
systemctl reload nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">æ£€æŸ¥çŠ¶æ€</span>
systemctl status nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">å¦‚æœsystemctlå¤±è´¥æˆ–å‘½ä»¤ä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨ç›´æ¥æ–¹å¼</span>
sudo nginx -s reload
</code></pre>
<blockquote>
<p>æ€»ç»“ï¼šæˆ‘ä»¬ä¸èƒ½å…‰ä¸€è„¸æ‡µçš„çœ‹ç€ï¼Œå“ï¼Œè¿™ä¸¤ç§å‘½ä»¤éƒ½èƒ½æ“ä½œnginxæ¥, å´ä»æ¥ä¸å…³å¿ƒå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</p>
</blockquote>
<blockquote>
<p>å¯¹äºä½¿ç”¨Linuxå‘è¡Œç‰ˆçš„æœåŠ¡ç«¯æ¥è¯´, å·²ç»æ¨èä½¿ç”¨ <code>systemctl</code> æ¥è®¾ç½®ç›¸å…³çš„nginxæœåŠ¡äº†ï¼Œèƒ½ä½¿ç”¨ systemctl å°±å°½é‡ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒæ˜¯ç°ä»£Linuxç³»ç»Ÿç®¡ç†æœåŠ¡çš„æ ‡å‡†æ–¹å¼ã€‚</p>
</blockquote>
<blockquote>
<p>æœ¬åœ°å¼€å‘ç¯å¢ƒæˆ–è€…æ²¡æœ‰ systemd çš„ç¯å¢ƒä¸‹, åˆ™å¯ä»¥ä½¿ç”¨ <code>nginx</code> è¿™ç§ç›´æ¥æ–¹å¼ã€‚</p>
</blockquote>
<h3 data-id="heading-2">é—®é¢˜ä¸‰</h3>
<blockquote>
<p>æˆ‘ä»¬é¢ä¸´çš„å¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯å¯ä»¥ä¸Šç½‘çš„Linuxå‘è¡Œç‰ˆï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤å®‰è£…nginxï¼Œä½†æ˜¯æœ‰ä¸€å¤©æˆ‘æœ‰ä¸€å°ä¸èƒ½ä¸Šç½‘çš„æœåŠ¡å™¨ï¼Œæˆ‘è¯¥å¦‚ä½•å®‰è£…nginxå‘¢ï¼Ÿ</p>
</blockquote>
<p>ç°ç®€å•ç†Ÿæ‚‰ä¸€ä¸‹å‘½ä»¤è¡Œå®‰è£…nginxçš„æ­¥éª¤, Ubuntu/Debianç³»ç»Ÿä¸ºä¾‹å­ï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">æ›´æ–°åŒ…åˆ—è¡¨</span>
sudo apt update
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£… Nginx</span>
sudo apt install nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">å¯åŠ¨ Nginx</span>
sudo systemctl start nginx
<span class="hljs-meta prompt_">
# </span><span class="bash">è®¾ç½®å¼€æœºè‡ªå¯</span>
sudo systemctl enable nginx
</code></pre>
<blockquote>
<p>ä¸Šè¿°ä¾¿å®Œæˆäº†ï¼Œä½†æ˜¯ç¦»çº¿ç‰ˆå®‰è£…è¦æ€ä¹ˆå»åšå‘¢ï¼Ÿ</p>
</blockquote>
<blockquote>
<p>å› ä¸ºæˆ‘çš„æœåŠ¡å™¨å¯èƒ½æ˜¯ä¸åŒçš„æ¶æ„ï¼Œæ¯”å¦‚ x86_64, ARMç­‰ç­‰</p>
</blockquote>
<h4 data-id="heading-3">æ–¹æ¡ˆä¸€</h4>
<p><strong>ä¸‹è½½å®˜æ–¹é¢„ç¼–è¯‘åŒ…ä¸‹è½½åœ°å€ï¼š</strong></p>
<p><strong>x86_64 æ¶æ„:</strong></p>
<p>å°½é‡ä½¿ç”¨1.24.xçš„ç‰ˆæœ¬</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»å®˜ç½‘ä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„åŒ…</span>
wget http://nginx.org/packages/centos/7/x86_64/RPMS/nginx-1.24.0-1.el7.ngx.x86_64.rpm
</code></pre>
<p><strong>ARM64 æ¶æ„:</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Ubuntu ARM64</span>
wget http://nginx.org/packages/ubuntu/pool/nginx/n/nginx/nginx_1.24.0-1~jammy_arm64.deb
</code></pre>
<p><strong>æŸ¥çœ‹æœåŠ¡å™¨çš„æ¶æ„ä¿¡æ¯</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ¶æ„</span>
<span class="hljs-built_in">uname</span> -m

<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹:</span>
<span class="hljs-comment"># x86_64    -&gt; Intel/AMD 64ä½</span>
<span class="hljs-comment"># aarch64   -&gt; ARM 64ä½</span>
<span class="hljs-comment"># armv7l    -&gt; ARM 32ä½</span>

<span class="hljs-comment"># æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</span>
<span class="hljs-built_in">cat</span> /etc/os-release
</code></pre>
<p><strong>æŠŠä¸‹è½½å¥½çš„åŒ…ä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Œç„¶åä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å®‰è£…ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯¹äº RPM åŒ… (CentOS/RHEL)</span>
<span class="hljs-built_in">cd</span> /tmp
sudo rpm -ivh nginx-*.rpm

<span class="hljs-comment"># å¯¹äº DEB åŒ… (Ubuntu/Debian)</span>
<span class="hljs-built_in">cd</span> /tmp
sudo dpkg -i nginx-*.deb
</code></pre>
<p><strong>å¯åŠ¨æœåŠ¡</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl start nginx       <span class="hljs-comment"># å¯åŠ¨</span>
sudo systemctl <span class="hljs-built_in">enable</span> nginx      <span class="hljs-comment"># å¼€æœºè‡ªå¯</span>
sudo systemctl status nginx      <span class="hljs-comment"># æŸ¥çœ‹çŠ¶æ€</span>
</code></pre>
<p><strong>éªŒè¯</strong></p>
<pre><code class="hljs language-bash" lang="bash">nginx -v                         <span class="hljs-comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>
curl http://localhost            <span class="hljs-comment"># æµ‹è¯•è®¿é—®</span>
</code></pre>
<h4 data-id="heading-4">æ–¹æ¡ˆäºŒ</h4>
<p>æºç ç¼–è¯‘å®‰è£…çš„æ–¹å¼ï¼Œä¸€èˆ¬ä¸æ¨èï¼Œé™¤éä½ æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œå¦‚æœéœ€è¦çš„è¯è®©åç«¯æ¥å§ï¼Œæˆ‘ä»¬æ˜¯å‰ç«¯...,è¶…çº²äº†ï¼</p>
<p>æ–‡ç« åŒæ­¥åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.liumingxin.site%2Fblog%2Fdetail%2Fnginx" target="_blank" title="https://www.liumingxin.site/blog/detail/nginx" ref="nofollow noopener noreferrer">www.liumingxin.site/blog/detailâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†XMindå’Œäº¿å›¾ï¼ŒæŠ•å‘äº†è¿™æ¬¾å¼€æºç»˜å›¾å·¥å…·çš„æ€€æŠ±ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582104240986963994</link>    <guid>https://juejin.cn/post/7582104240986963994</guid>    <pubDate>2025-12-11T01:09:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582104240986963994" data-draft-id="7582090790182027302" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†XMindå’Œäº¿å›¾ï¼ŒæŠ•å‘äº†è¿™æ¬¾å¼€æºç»˜å›¾å·¥å…·çš„æ€€æŠ±ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-11T01:09:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SimonKing"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056904584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒäº†XMindå’Œäº¿å›¾ï¼ŒæŠ•å‘äº†è¿™æ¬¾å¼€æºç»˜å›¾å·¥å…·çš„æ€€æŠ±ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056904584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SimonKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T01:09:39.000Z" title="Thu Dec 11 2025 01:09:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ç¼–ç¨‹æœèŠ±å¤•æ‹¾ã€‘ï¼Œå¯è·å–é¦–å‘å†…å®¹ã€‚</p>
</blockquote>
<h2 data-id="heading-0">01 å¼•è¨€</h2>
<p>æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾åº”è¯¥æ˜¯æ¯ä¸ªç¨‹åºå‘˜éƒ½ä¼šç”¨åˆ°çš„ç»˜å›¾å·¥å…·ã€‚<code>Xmind</code>å’Œäº¿å›¾æ›¾æ˜¯æˆ‘çš„é¦–é€‰å·¥å…·ï¼Œä½†æ˜¯å…è´¹ç‰ˆåŠŸèƒ½å—é™ï¼Œé«˜çº§åŠŸèƒ½éœ€ä»˜è´¹ï¼Œç”¨èµ·æ¥æ€»æ˜¯å·®ç‚¹æ„æ€ã€‚è™½ç„¶é€šè¿‡å…¶ä»–æ–¹å¼æ­£å¸¸ä½¿ç”¨ï¼ˆå¤§å®¶éƒ½æ‡‚å¾—ï¼‰ï¼Œä½†æ˜¯è½¯ä»¶çš„æ›´æ–°æ ¹æœ¬ä¸æ•¢åŠ¨ï¼Œä¸€æ—¦æ›´æ–°å°±ä¼šå‰åŠŸå°½å¼ƒ......è€Œä¸”ä¸¤æ¬¾å·¥å…·æ€»ä¼šæ¥å›åˆ‡æ¢ï¼Œè™½å·²ä¹ æƒ¯ï¼Œä½†ç¨æ˜¾éº»çƒ¦ï¼</p>
<p>ç›´åˆ°ä¸ä¹…å‰é€›<code>GitHub</code>å‘ç°äº†ä¸€æ¬¾å¼€æºçš„ä¸”å¯ä»¥åœ¨çº¿ä½¿ç”¨çš„å·¥å…·ï¼š<code>Drawnix</code>ã€‚ç•Œé¢ç®€çº¦ï¼Œæ»¡è¶³æ—¥å¸¸åŸºæœ¬ç»˜å›¾éœ€æ±‚ï¼Œä¸”æ”¯æŒ <code>mermaid</code> è¯­æ³•è½¬æµç¨‹å›¾ç­‰ï¼Œç”¨èµ·æ¥éå¸¸ä¸æ»‘ã€‚æ•´ç†ä¸€ä¸‹åˆ†äº«ç»™å¤§å®¶ï¼</p>
<h2 data-id="heading-1">02 ç®€ä»‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aded8cfebf8a44ec9b91ac8ec9521a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=NcpQeHkSVtB6dxcGrOsSeo7vWtY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 åç§°çš„ç”±æ¥</h3>
<p><code>Drawnix</code> ï¼Œæºäºç»˜ç”»( <code>Draw</code>)ä¸å‡¤å‡°( <code>Phoenix</code> )çš„çµæ„Ÿäº¤ç»‡ã€‚å‡¤å‡°è±¡å¾ç€ç”Ÿç”Ÿä¸æ¯çš„åˆ›é€ åŠ›ï¼Œè€Œ <code>Draw</code>ä»£è¡¨ç€äººç±»æœ€åŸå§‹çš„è¡¨è¾¾æ–¹å¼ã€‚åœ¨è¿™é‡Œï¼Œæ¯ä¸€æ¬¡åˆ›ä½œéƒ½æ˜¯ä¸€æ¬¡è‰ºæœ¯çš„æ¶…æ§ƒï¼Œæ¯ä¸€ç¬”ç»˜ç”»éƒ½æ˜¯çµæ„Ÿçš„é‡ç”Ÿã€‚</p>
<p>åˆ›æ„å¦‚åŒå‡¤å‡°ï¼Œæµ´ç«æ–¹èƒ½é‡ç”Ÿï¼Œè€Œ <code>Drawnix</code> è¦åšæŠ€æœ¯ä¸åˆ›æ„ä¹‹ç«çš„å®ˆæŠ¤è€…ã€‚</p>
<h3 data-id="heading-3">2.2 æ¡†æ¶</h3>
<p><code>Drawnix</code> çš„å®šä½æ˜¯ä¸€ä¸ªå¼€ç®±å³ç”¨ã€å¼€æºã€å…è´¹çš„å·¥å…·äº§å“ï¼Œå®ƒçš„åº•å±‚æ˜¯ <code>Plait</code>æ¡†æ¶ï¼Œ<code>Plait</code> æ˜¯ä½œè€…å…¬å¸å¼€æºçš„ä¸€æ¬¾ç”»å›¾æ¡†æ¶ï¼Œä»£è¡¨ç€å…¬å¸åœ¨çŸ¥è¯†åº“äº§å“ä¸Šçš„é‡è¦æŠ€æœ¯æ²‰æ·€ã€‚</p>
<p><code>Drawnix</code> æ˜¯æ’ä»¶æ¶æ„ï¼Œä¸å‰é¢è¯´åˆ°å¼€æºå·¥å…·æ¯”æŠ€æœ¯æ¶æ„æ›´å¤æ‚ä¸€äº›ï¼Œä½†æ˜¯æ’ä»¶æ¶æ„ä¹Ÿæœ‰ä¼˜åŠ¿ï¼Œæ¯”å¦‚èƒ½å¤Ÿæ”¯æŒå¤šç§ <code>UI</code> æ¡†æ¶ï¼ˆ<code>Angular</code>ã€<code>React</code>ï¼‰ï¼Œèƒ½å¤Ÿé›†æˆä¸åŒå¯Œæ–‡æœ¬æ¡†æ¶ï¼ˆå½“å‰ä»…æ”¯æŒ <code>Slate</code>æ¡†æ¶ï¼‰ï¼Œåœ¨å¼€å‘ä¸Šå¯ä»¥å¾ˆå¥½çš„å®ç°ä¸šåŠ¡çš„åˆ†å±‚ï¼Œå¼€å‘å„ç§ç»†ç²’åº¦çš„å¯å¤ç”¨æ’ä»¶ï¼Œå¯ä»¥æ‰©å±•æ›´å¤šçš„ç”»æ¿çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p><code>GitHub</code>åœ°å€ï¼š</p>
<h3 data-id="heading-4">2.3 ç‰¹æ€§</h3>
<ul>
<li>ğŸ’¯ å…è´¹ + å¼€æº</li>
<li>âš’ï¸ æ€ç»´å¯¼å›¾ã€æµç¨‹å›¾</li>
<li>ğŸ–Œ ç”»ç¬”</li>
<li>ğŸ˜€ æ’å…¥å›¾ç‰‡</li>
<li>ğŸš€ åŸºäºæ’ä»¶æœºåˆ¶</li>
<li>ğŸ–¼ï¸ ğŸ“ƒ å¯¼å‡ºä¸º PNG, JSON(<code>.drawnix</code>)</li>
<li>ğŸ’¾ è‡ªåŠ¨ä¿å­˜ï¼ˆæµè§ˆå™¨ç¼“å­˜ï¼‰</li>
<li>âš¡ ç¼–è¾‘ç‰¹æ€§ï¼šæ’¤é”€ã€é‡åšã€å¤åˆ¶ã€ç²˜è´´ç­‰</li>
<li>ğŸŒŒ æ— é™ç”»å¸ƒï¼šç¼©æ”¾ã€æ»šåŠ¨</li>
<li>ğŸ¨ ä¸»é¢˜æ¨¡å¼</li>
<li>ğŸ“± ç§»åŠ¨è®¾å¤‡é€‚é…</li>
<li>ğŸ“ˆ æ”¯æŒ mermaid è¯­æ³•è½¬æµç¨‹å›¾</li>
<li>âœ¨ æ”¯æŒ markdown æ–‡æœ¬è½¬æ€ç»´å¯¼å›¾ï¼ˆæ–°æ”¯æŒ ğŸ”¥ğŸ”¥ğŸ”¥ï¼‰</li>
</ul>
<h3 data-id="heading-5">2.4 å®‰è£…</h3>
<p>æä¾›<code>Docker</code>éƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">docker pull pubuzhixing/drawnix:latest
</code></pre>
<p>ä¹Ÿå¯ä»¥åœ¨çº¿ä½¿ç”¨ï¼š</p>
<p>åœ°å€ï¼š</p>
<h2 data-id="heading-6">03 æœ€ä½³å®è·µ</h2>
<p>å®è·µæˆ‘ä»¬é‡‡ç”¨åœ¨çº¿æ–¹å¼ï¼Œå¦‚æœæ³¨é‡å®‰å…¨æˆ–è€…æœ¬åœ°ä½¿ç”¨å¯ä»¥ä½¿ç”¨<code>Docker</code>éƒ¨ç½²ã€‚</p>
<h3 data-id="heading-7">3.1 ç•Œé¢è¯´æ˜</h3>
<p>é€šè¿‡<code>https://drawnix.com/</code>è¿›å…¥ä¹‹åï¼Œæ‰€æœ‰åŠŸèƒ½å¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd1050e9bc264de3b953043d5d33b19b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=wSlN%2Bab1vWJtIehD7RrD3%2F64YBA%3D" alt="" loading="lazy"/></p>
<p>ä¸­é—´å·¥å…·æ åˆ†åˆ«è¡¨ç¤ºï¼š</p>
<ul>
<li>æ‹–æ‹½</li>
<li>é€‰ä¸­</li>
<li>æ€ç»´å¯¼å›¾</li>
<li>æ–‡å­—</li>
<li>æ‰‹ç»˜</li>
<li>ç®­å¤´</li>
<li>æµç¨‹å›¾</li>
<li>æ’å…¥å›¾ç‰‡</li>
<li>æ ¼å¼è½¬æ¢</li>
</ul>
<p>åŠŸèƒ½éƒ½æ¯”è¾ƒç®€å•ï¼Œæ€ç»´å¯¼å›¾ã€æµç¨‹å›¾ä»¥åŠæ ¼å¼è½¬åŒ–æ˜¯å¸¸ç”¨çš„å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17d70fca32644037a52d5b30600c76d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=rPCwuGYDZ0OtICIaWme7hN8CUrE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.2 æ€ç»´å¯¼å›¾</h3>
<p>æ€ç»´å¯¼å›¾çš„ä½¿ç”¨æ–¹å¼å’Œ<code>Xmind</code>çš„ç”¨æ³•æä¸ºç›¸ä¼¼ã€‚é€‰ä¸­èŠ‚ç‚¹ï¼Œç„¶å<code>Tab</code>é”®å°±å¯ä»¥æ·»åŠ åŒçº§å­èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨<code>+</code>å·æ·»åŠ ã€‚<code>-</code>å·å¹¶ä¸æ˜¯åˆ é™¤ï¼Œè€Œæ˜¯åˆå¹¶ã€‚åˆ é™¤ä¹Ÿéå¸¸ç®€å•ï¼Œé€‰ä¸­ç›´æ¥<code>Delete</code>å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/253053338d2e4fad9b280bbd1abdd554~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=29EXmJucrIPvcGoTl6actyUkNhE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-9">3.3 æµç¨‹å›¾</h3>
<p>æµç¨‹å›¾çš„å›¾å½¢ç›¸å¯¹æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œåªæœ‰ä¸ƒé¡¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2324740772ea409f98298583d7bd5115~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=gZmqMXebA63ivy6m8RC07wMMizg%3D" alt="" loading="lazy"/></p>
<p>é€‰ä¸­ä¹‹åç›´æ¥ç»˜åˆ¶å³å¯ï¼Œå›¾å½¢ä¹‹é—´ä½¿ç”¨ç®­å¤´é“¾æ¥å³å¯ã€‚</p>
<h3 data-id="heading-10">3.4 æ ¼å¼è½¬åŒ–</h3>
<p>ç›®å‰æ”¯æŒä¸¤ç§æ ¼å¼è½¬åŒ–æˆæµç¨‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d35787be17174e36b5f939f55898cd0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=OKi2U0L%2Bmo%2Bk5stpOPLMTEv7YdI%3D" alt="" loading="lazy"/></p>
<p><strong>Mermaid</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/348d3bc49d6e4c3ab89f69db4c71c5f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=aB%2F1hlGPV4%2F3BRkQBtAKBM90bio%3D" alt="" loading="lazy"/></p>
<p>ä»…æ”¯æŒæµç¨‹å›¾ã€åºåˆ—å›¾å’Œç±»å›¾</p>
<p><strong>Markdown</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e135f734d244b1b8688f27082a54efb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766020178&amp;x-signature=s3Sxc7cdzoDgTOii7GSOgJL0rC0%3D" alt="" loading="lazy"/></p>
<p>ä»…æ”¯æŒæ€ç»´å¯¼å›¾ã€‚</p>
<h2 data-id="heading-11">04 å°ç»“</h2>
<p><code>Drawnix</code>çš„æç®€è®¾è®¡æ»¡è¶³æ—¥å¸¸ç»˜å›¾çš„éœ€è¦ï¼Œå¯èƒ½åœ¨å¾ˆå¤šåŠŸèƒ½ä¸Šä¸å¦‚<code>Xmind</code>æˆ–è€…äº¿å›¾ï¼Œä½†æ˜¯å®ƒç¡®å®ä¸¤è€…çš„ç»“åˆã€‚æ˜¯ä¸€æ¬¾ä¸é”™çš„ç»˜å›¾è½¯ä»¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘2. ä½¿ç”¨ Perfetto è¿½è¸ª/åˆ†æ APP çš„ Native/Java å†…å­˜]]></title>    <link>https://juejin.cn/post/7582041304655249454</link>    <guid>https://juejin.cn/post/7582041304655249454</guid>    <pubDate>2025-12-10T16:27:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582041304655249454" data-draft-id="7582048028393226290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘2. ä½¿ç”¨ Perfetto è¿½è¸ª/åˆ†æ APP çš„ Native/Java å†…å­˜"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-10T16:27:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lei_official"/> <meta itemprop="url" content="https://juejin.cn/user/2351234021066314"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Perfettoä»å…¥é—¨åˆ°ç²¾é€šã€‘2. ä½¿ç”¨ Perfetto è¿½è¸ª/åˆ†æ APP çš„ Native/Java å†…å­˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2351234021066314/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lei_official
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T16:27:50.000Z" title="Wed Dec 10 2025 16:27:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    35
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™ä¸ªä¸–ç•Œå°±æ˜¯è¿™æ ·ï¼Œä½ ä»å¤±è´¥ä¸­å­¦åˆ°çš„ä¸œè¥¿å¯èƒ½æ¯”æˆåŠŸä¸­å­¦åˆ°çš„ä¸œè¥¿æ›´å¤šâ€”â€”ã€ŠAndroid ä¼ å¥‡ã€‹</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96da1c986c7f488ebbcbd5279fc0a176~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018686&amp;x-signature=kLTZAbmB93gghO%2BJXhrsAVxIb2c%3D" alt="image.png" loading="lazy"/></p>
<p>è¯´èµ· Android APP å†…å­˜åˆ†æï¼Œæˆ‘ä»¬ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„ï¼Œå¾€å¾€æ˜¯ Android Studio Profilerã€MAT è¿™æ ·çš„è€ç‰Œå·¥å…·ï¼Œè€Œ Perfetto çš„å‡ºç°ï¼Œåˆä¸ºå…¶æä¾›äº†ä¸€ç§æ›´åŠ è´´è¿‘åº•å±‚çš„è§†è§’ã€‚è€Œä¸”ç›¸æ¯”äºç°æœ‰çš„å·¥å…·ï¼ŒPerfetto æ›´åŠ æ“…é•¿äºåˆ†æ Native å†…å­˜å ç”¨ï¼Œå¯ä»¥è¯´æ˜¯è¡¥é½äº†å·¥ç¨‹å¸ˆåœ¨è¿™æ–¹é¢çš„çŸ­æ¿ã€‚</p>
<p><strong>åœ¨å†…å­˜æ–¹å‘ï¼Œæˆ‘è®¡åˆ’ç”¨2~3ç¯‡æ–‡ç« æ¥ä»‹ç» Perfetto çš„åŠŸèƒ½ã€ç‰¹ç‚¹ã€ä½¿ç”¨æ–¹æ³•ç­‰</strong> ã€‚ä½œä¸ºç¬¬1ç¯‡ï¼Œæœ¬æ–‡åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>Android APP æ‰€ç”³è¯·çš„å†…å­˜åˆ†ç±»ï¼ˆJavaã€Nativeï¼‰</li>
<li>å¦‚ä½•æŠ“å–ã€åˆ†æè¿™ä¸¤ç±»å†…å­˜å ç”¨æƒ…å†µï¼Œå¹¶æä¾›å¯¹åº”çš„ Perfetto æ“ä½œå®ä¾‹</li>
</ul>
<h2 data-id="heading-0">APP å ç”¨å†…å­˜åˆ†ç±»</h2>
<p>Android ç³»ç»Ÿæ¡†æ¶æ˜¯ç”± Linux å‘å±•è€Œæ¥çš„ï¼Œå¯¹äºæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ˆAPPï¼‰ï¼Œæ¡†æ¶ä¸ºå…¶åˆå§‹åˆ†é…ä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶å¯åŠ¨äº†ä¸€ä¸ª ART è™šæ‹Ÿæœºï¼ˆæ›´æ—©æ—¶å€™æ˜¯ Dalvikï¼‰ï¼Œè¿™ä¸ªè™šæ‹Ÿæœºç”¨äºè§£é‡Šæ‰§è¡Œ Java å­—èŠ‚ç ã€‚å› æ­¤ï¼Œä¸€ä¸ª APP æ‰€å ç”¨çš„å†…å­˜ï¼Œå¯ä»¥å½’ç»“ä¸ºä¸¤ç±»ï¼šåœ¨ Linux å±‚ç”³è¯·çš„ Native å†…å­˜ï¼Œä»¥åŠåœ¨ JVM ä¸Šç”³è¯·çš„ Java å†…å­˜ã€‚</p>
<ul>
<li><strong>Native å†…å­˜</strong> ï¼šç”± C/C++/Rust è¿›ç¨‹ç”³è¯·ï¼Œå…¶åº•å±‚ä½¿ç”¨ <code>libc</code> çš„ <code>malloc()/free()</code> å‡½æ•°è¿›è¡Œå†…å­˜ç”³è¯·/é‡Šæ”¾ã€‚æ­¤å¤–ï¼ŒAPP é€šè¿‡ JNI ä¹Ÿå¯ç”³è¯·æ­¤éƒ¨åˆ†å†…å­˜ï¼Œä¾‹å¦‚ <code>java.util.regex.Pattern</code> ç±»çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œå°±åŒæ—¶ç”³è¯·äº† Native å†…å­˜å’Œ Java å†…å­˜ã€‚</li>
<li><strong>Java å†…å­˜</strong> ï¼šç”±åº”ç”¨å†…çš„ Java/Kotlin ä»£ç ï¼Œé€šè¿‡ <code>new X()</code> çš„æ–¹å¼ç”³è¯·ï¼Œä½äº <strong>å †</strong> ä¸Šï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œå›æ”¶ã€‚</li>
</ul>
<p>é’ˆå¯¹ä¸Šè¿°å†…å­˜ä½¿ç”¨åœºæ™¯ï¼ŒPerfetto æä¾›äº†ä¸¤ç§æŠ€æœ¯è¿›è¡Œåˆ†æã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fmemory-profiling%23native-c-c-rust-heap-profling" target="_blank" title="https://perfetto.dev/docs/getting-started/memory-profiling#native-c-c-rust-heap-profling" ref="nofollow noopener noreferrer">heap profilingï¼ˆå †åˆ†æï¼‰</a> é€‚ç”¨äº Native ä»£ç ï¼Œé€šè¿‡ AOPï¼Œè¿½è¸ª <code>malloc/free</code> å‡½æ•°è°ƒç”¨é“¾ï¼Œä»è€Œè¯†åˆ«å‡ºæ¯ä¸ªå‡½æ•°å¼•èµ·çš„å†…å­˜å˜åŒ–ï¼Œé›†æˆåœ¨ç«ç„°å›¾å½“ä¸­å±•ç¤ºã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fmemory-profiling%23java-managed-heap-dumps" target="_blank" title="https://perfetto.dev/docs/getting-started/memory-profiling#java-managed-heap-dumps" ref="nofollow noopener noreferrer">heap dumpï¼ˆå †è½¬å‚¨ï¼‰</a> é€‚ç”¨äº Java ä»£ç ï¼Œå±•ç¤ºå¯¹è±¡ä¹‹é—´çš„å¼•ç”¨å…³ç³»ï¼Œä½†ä¸åŒ…å«è°ƒç”¨é“¾ã€‚</li>
</ul>
<h2 data-id="heading-1">Native (C/C++/Rust) å†…å­˜åˆ†æ</h2>
<p>åœ¨ C/C++/Rust è¯­è¨€ä¸­ï¼Œä½¿ç”¨åº•å±‚çš„ <code>malloc/free</code> å‡½æ•°è¿›è¡Œå†…å­˜ç”³è¯·å’Œé‡Šæ”¾ï¼ŒPerfetto é€šè¿‡ AOP æŠ€æœ¯ï¼Œåœ¨è¿™äº›å‡½æ•°å†…éƒ¨æ³¨å…¥ä»£ç è¿›è¡Œæ‹¦æˆªï¼Œå› æ­¤èƒ½å¤Ÿè¯†åˆ«æ¯ä¸€æ¬¡å†…å­˜çš„ç»†å¾®å˜åŠ¨ã€‚å‡ºäºåœ¨åº”ç”¨æ€§èƒ½å’ŒæŠ“å–æ•ˆæœä¹‹é—´ä¿æŒå¹³è¡¡çš„è€ƒè™‘ï¼Œè¿˜æä¾›äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdesign-docs%2Fheapprofd-sampling" target="_blank" title="https://perfetto.dev/docs/design-docs/heapprofd-sampling" ref="nofollow noopener noreferrer">samplingï¼ˆé‡‡æ ·ï¼‰</a> æœºåˆ¶ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒNative å†…å­˜åˆ†ææ˜¯ <strong>ä¸å¯è¿½æº¯</strong> çš„ï¼Œå®ƒåªèƒ½è®°å½•ä» <strong>å¯åŠ¨ Perfetto çš„æ—¶é—´ç‚¹ä¹‹å</strong> çš„å†…å­˜åˆ†é…ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå†…å­˜é—®é¢˜å·²ç»å‘ç”Ÿåï¼Œå†è¿›è¡Œ Native å†…å­˜è¿½è¸ªï¼Œä¼šæœ‰æ— æ³•è¯†åˆ«å¼•èµ·å†…å­˜é—®é¢˜çš„å‡½æ•°çš„é£é™©ï¼ˆå†…å­˜æ³„æ¼åˆ™ä¸ä¸€æ ·ï¼Œå› ä¸ºå®ƒæ— æ—¶æ— åˆ»ä¸åœ¨å‘ç”Ÿï¼‰ã€‚</p>
<h3 data-id="heading-2">æ¡ˆä¾‹ï¼šNowInAndroid</h3>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Android 7.1ï¼ˆAPI 25ï¼‰ä¹‹å‰ï¼ŒBitmap å¯¹è±¡çš„åƒç´ æ•°æ®æ˜¯ä½¿ç”¨ Dalvik heap å­˜å‚¨çš„ï¼Œåœ¨æ‹¿åˆ° heap æ–‡ä»¶åï¼Œå¯ä»¥ç›´æ¥å¯¼å‡ºå¹¶çœ‹åˆ°å›¾ç‰‡å†…å®¹ã€‚ä» Android 7.1 å¼€å§‹ï¼ŒBitmap çš„å­˜å‚¨ä½ç½®ä» Dalvik heap è½¬ç§»åˆ°äº† Native heapã€‚è¿™æ ·ä¸€æ¥ï¼Œè™½ç„¶å¯ä»¥é¿å…å¤§é‡å›¾ç‰‡èµ„æºè€—å°½ JVM å†…å­˜ï¼Œä½†ä¹Ÿå®¹æ˜“è®©äººå¿½è§†æ‰ Native å†…å­˜ç®¡ç†ï¼Œå¯¼è‡´ OOM å‘ç”Ÿã€‚</p>
<p>Perfetto çš„ Native å†…å­˜åˆ†æï¼Œå¯ä»¥ç”¨æ¥è¯†åˆ«è¿™ç§è½åœ¨ Native heap çš„å†…å­˜åˆ†é…è°ƒç”¨é“¾ã€‚æˆ‘ä»¬ä»¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fnowinandroid" target="_blank" title="https://github.com/android/nowinandroid" ref="nofollow noopener noreferrer">NowInAndroid</a> é¡¹ç›®ä¸ºä¾‹ã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21771e680e7a4828908a89d5d7d024f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018686&amp;x-signature=xL1BJ013%2Bb8NaFWwiMIsupANRJ8%3D" alt="nowinandroid_homepage.png" width="30%" loading="lazy"/>
<p>APP çš„é¦–é¡µæ˜¯å›¾æ–‡å…ƒç´ æ„æˆçš„ç€‘å¸ƒæµï¼Œåœ¨é¢‘ç¹æ»‘åŠ¨çš„æƒ…å†µä¸‹ï¼Œä¼šäº§ç”Ÿå¤§é‡ Native å†…å­˜ç”³è¯·/å›æ”¶çš„ç°è±¡ï¼Œæˆ‘ä»¬é€šè¿‡ Perfetto å¯¹æ­¤è¿›è¡Œè§‚å¯Ÿã€‚</p>
<p>åœ¨ç½‘é¡µç«¯å¼€å¯ Memory ç›®å½•ä¸‹çš„ Native heap profiling å¼€å…³ï¼ŒåŒæ—¶å¡«å…¥å¾…åˆ†æçš„åŒ…å <code>com.google.samples.apps.nowinandroid.demo.debug</code>ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ <code>adb shell ps -A</code> æ¥æŸ¥çœ‹è¿›ç¨‹å¯¹åº”çš„åŒ…åã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6df13ec90a854c42abe34f51eea2c9af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018686&amp;x-signature=LIB7xBpAypxiKtqOfIwUkW93jRw%3D" alt="perfetto_native_profiling.png" width="70%" loading="lazy"/>
<p>æ§åˆ¶å°å‚æ•°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">buffers {
  size_kb: 65536
  fill_policy: DISCARD
}
data_sources {
  config {
    name: &amp;#34;android.heapprofd&amp;#34;
    heapprofd_config {
      sampling_interval_bytes: 4096
      process_cmdline: &amp;#34;com.google.samples.apps.nowinandroid.demo.debug&amp;#34;
      shmem_size_bytes: 8388608
      block_client: true
      all_heaps: false
    }
  }
}
duration_ms: 10000
</code></pre>
<p>æ¥ä¸‹æ¥ç‚¹å‡» <code>Start tracing</code> å¼€å§‹æŠ“å–ï¼Œåœ¨ 10s çš„æŠ“å–è¿‡ç¨‹ä¸­ï¼Œä¸Šæ»‘é¡µé¢ï¼Œä»¥åŠ è½½æ›´å¤šå›¾ç‰‡å’Œæ–‡å­—ã€‚æŠ“å–ç»“æœå¦‚ä¸‹ï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ede55f4c37424b06a388851b68580ba6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018686&amp;x-signature=R6Fe%2FqYH%2FYvqZ8TpqgVyUXYQmDA%3D" alt="perfetto_native_profiling_result.png" width="70%" loading="lazy"/>
<p>å›¾ä¾‹æ¯”è¾ƒç®€å•ï¼Œåˆ†æˆå·¦ä¸Šè§’çš„â€œ<strong>æ•°æ®é€‰æ‹©</strong>â€ã€å³ä¸Šè§’çš„â€œ<strong>å±•ç¤ºæ–¹å¼</strong>â€å’Œå æ®æ­£ä¸­å¤®å¤§éƒ¨åˆ†çš„â€œ<strong>ç«ç„°å›¾</strong>â€ï¼Œä¾æ¬¡ä»‹ç»ä¹‹ã€‚</p>
<p>â€œ<strong>æ•°æ®é€‰æ‹©</strong>â€åŒºåŸŸï¼Œå…±æœ‰4ç§æ’åºæ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><strong>Unreleased Malloc Sizeï¼ˆæœªé‡Šæ”¾å†…å­˜åˆ†é…å¤§å°ï¼‰</strong>ï¼šé»˜è®¤æ¨¡å¼ï¼ŒæŒ‰æœªé‡Šæ”¾å†…å­˜ <code>å­—èŠ‚æ•°</code> çš„æ€»å’Œèšåˆè°ƒç”¨æ ˆã€‚</li>
<li><strong>Unreleased Malloc Countï¼ˆæœªé‡Šæ”¾å†…å­˜åˆ†é…è®¡æ•°ï¼‰</strong>ï¼šæŒ‰ <code>è®¡æ•°</code>èšåˆæœªé‡Šæ”¾çš„å†…å­˜åˆ†é…ï¼Œå¿½ç•¥æ¯æ¬¡åˆ†é…çš„å¤§å°ã€‚è¿™æœ‰åŠ©äºå‘ç°å°è§„æ¨¡çš„å†…å­˜æ³„æ¼ï¼Œå³æ¯ä¸ªå¯¹è±¡éƒ½å¾ˆå°ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¤§é‡å¯¹è±¡ä¼šç´¯ç§¯èµ·æ¥ã€‚é€šå¸¸ç§°ä¹‹ä¸º <code>å†…å­˜ç¢ç‰‡</code>ã€‚</li>
<li><strong>Total Malloc Sizeï¼ˆæ€»å†…å­˜åˆ†é…å¤§å°ï¼‰</strong>ï¼šæŒ‰é€šè¿‡ <code>malloc()</code> åˆ†é…çš„å†…å­˜å­—èŠ‚æ•°èšåˆè°ƒç”¨æ ˆï¼Œæ— è®ºè¿™äº›å†…å­˜æ˜¯å¦å·²è¢«é‡Šæ”¾ã€‚è¿™æœ‰åŠ©äºè°ƒæŸ¥å †é¢‘ç¹è°ƒç”¨ï¼Œå³å³ä½¿æœ€ç»ˆé‡Šæ”¾äº†å†…å­˜ï¼Œä¹Ÿä¼šå¯¹åˆ†é…å™¨é€ æˆå¾ˆå¤§å‹åŠ›çš„ä»£ç è·¯å¾„ã€‚é€šå¸¸ç§°ä¹‹ä¸º <code>å†…å­˜æ³¢åŠ¨</code>ã€‚</li>
<li><strong>Total Malloc Countï¼ˆæ€»å†…å­˜åˆ†é…è®¡æ•°ï¼‰</strong>ï¼šä¸ä¸Šè¿°ç±»ä¼¼ï¼Œä½†æŒ‰ <code>malloc()</code> è°ƒç”¨æ¬¡æ•°èšåˆï¼Œå¿½ç•¥æ¯æ¬¡åˆ†é…çš„å¤§å°ã€‚</li>
</ul>
<p>æˆ‘ä»¬ç›®å‰é€‰æ‹©çš„æ˜¯é»˜è®¤çš„ <code>Unreleased Malloc Size</code> é€‰é¡¹ã€‚</p>
<p>â€œ<strong>å±•ç¤ºæ–¹å¼</strong>â€åŒºåŸŸï¼Œåˆ†ä¸ºâ€œè‡ªé¡¶å‘ä¸‹â€å’Œâ€œè‡ªåº•å‘ä¸Šâ€ï¼Œå‰è€…çš„ç«ç„°å‘ä¸‹ç”Ÿé•¿ï¼Œåè€…åä¹‹ï¼Œä¸èµ˜è¿°ã€‚</p>
<p>â€œ<strong>ç«ç„°å›¾</strong>â€åŒºåŸŸï¼Œæ˜¯æ€§èƒ½åˆ†æçš„é‡ç‚¹ï¼Œé€šè¿‡å±‚å çš„å½¢å¼å±•ç¤ºå‡½æ•°è°ƒç”¨é“¾è·¯ï¼Œæ¯ä¸ªè‰²å—ï¼ˆBlockï¼‰çš„é¢ç§¯è¡¨ç¤ºè¯¥å‡½æ•°å¼•èµ·çš„å†…å­˜å¢åŠ ï¼Œå‘ç”Ÿåœ¨ç›¸åŒå±‚çº§çš„åŒä¸€ä¸ªå‡½æ•°ï¼Œä¼šè¢«èšåˆå±•ç¤ºã€‚å›¾ä¸­çš„ç«ç„°å›¾å¯ä»¥çœ‹å‡ºï¼ŒNowInAndroid ä»£ç å†™çš„ç›¸å¯¹å¥å£®ï¼Œå›æ”¶å’Œå¤ç”¨éƒ½åšå¾—æ¯”è¾ƒå¥½ï¼Œå› æ­¤ RecyclerView ä¸­æœªè§å†…å­˜æ³„æ¼ã€‚</p>
<h2 data-id="heading-3">Java å†…å­˜å¿«ç…§</h2>
<p>åœ¨ JVM ç³»è¯­è¨€ä¸­ï¼Œé€šè¿‡è‡ªåŠ¨å›æ”¶æœºåˆ¶ç®¡ç†å†…å­˜ï¼Œå¤§éƒ¨åˆ† Profiling å·¥å…·éƒ½æ˜¯è¿›è¡Œå†…å­˜å¿«ç…§ï¼Œè®¡ç®—å½“å‰è™šæ‹Ÿæœºçš„ <code>å…¨éƒ¨å¯¹è±¡</code> åŠå…¶ <code>å¼•ç”¨å…³ç³»</code>ï¼Œä»è€Œå½¢æˆä¸€å¼ å®Œæ•´çš„å¯¹è±¡å›¾ã€‚</p>
<p><strong>Java å†…å­˜å¿«ç…§çš„ä¸è¶³ä¹‹å¤„æ˜¯ï¼Œæ— æ³•é€šè¿‡å®ƒæŸ¥çœ‹å‡½æ•°è°ƒç”¨é“¾è·¯ï¼Œå³å“ªäº›å‡½æ•°å¼•èµ·äº†å¤šå¤§çš„å†…å­˜å¢é•¿ã€‚</strong></p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ea458224cbc42e28a888a8babfd9f57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018686&amp;x-signature=LiYPEzs45oSm4pMEKe9WIHSQrXs%3D" alt="perfetto_java_profiling.png" width="70%" loading="lazy"/>
<p>å¼€å§‹æŠ“å–åï¼Œä¸Šæ»‘é¡µé¢ç›´è‡³å®Œæˆ10sçš„æŠ“å–ï¼Œä»¥ä¸‹æ˜¯æŠ“å–åˆ°çš„ç»“æœã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3ca3959a6a14f1bad35506ee1e9a3b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTGVpX29mZmljaWFs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766018686&amp;x-signature=vPCFQeXme1%2BBrffrMOzK9%2B4T74s%3D" alt="perfetto_java_profiling_result.png" width="70%" loading="lazy"/>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>Bitmap</code> å æ®äº†å†…å­˜çš„å¤§éƒ¨åˆ†ã€‚æ­¤å¤–ï¼ŒStringæ•°é‡æœ‰ <code>96433</code> ä¸ªï¼Œä¹ŸåŒæ ·å€¼å¾—å…³æ³¨ã€‚</p>
<blockquote>
<p>æœªå®Œå¾…ç»­â€¦â€¦</p>
</blockquote>
<h2 data-id="heading-4">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fgetting-started%2Fmemory-profiling" target="_blank" title="https://perfetto.dev/docs/getting-started/memory-profiling" ref="nofollow noopener noreferrer">perfetto.dev/docs/gettinâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fcase-studies%2Fmemory" target="_blank" title="https://perfetto.dev/docs/case-studies/memory" ref="nofollow noopener noreferrer">perfetto.dev/docs/case-sâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fperfetto.dev%2Fdocs%2Fdata-sources%2Fnative-heap-profiler" target="_blank" title="https://perfetto.dev/docs/data-sources/native-heap-profiler" ref="nofollow noopener noreferrer">perfetto.dev/docs/data-sâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§’æ‡‚ Headlessï¼šä¸ºä»€ä¹ˆç°åœ¨çš„è½¯ä»¶éƒ½è¦â€œå»å¤´â€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582118218649288730</link>    <guid>https://juejin.cn/post/7582118218649288730</guid>    <pubDate>2025-12-11T05:39:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582118218649288730" data-draft-id="7582156410319536138" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§’æ‡‚ Headlessï¼šä¸ºä»€ä¹ˆç°åœ¨çš„è½¯ä»¶éƒ½è¦â€œå»å¤´â€ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-11T05:39:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®è›‹å°ç²¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/219558056559278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§’æ‡‚ Headlessï¼šä¸ºä»€ä¹ˆç°åœ¨çš„è½¯ä»¶éƒ½è¦â€œå»å¤´â€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/219558056559278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®è›‹å°ç²¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T05:39:51.000Z" title="Thu Dec 11 2025 05:39:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    73
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç®€å•æ¥è¯´ï¼Œ <strong>â€œHeadlessâ€ï¼ˆæ— å¤´ï¼‰</strong> åœ¨è½¯ä»¶å¼€å‘ä¸­æŒ‡çš„æ˜¯ï¼š<strong>åªæœ‰é€»è¾‘ï¼ˆåç«¯/å†…æ ¸ï¼‰ï¼Œæ²¡æœ‰é¢„è®¾ç•Œé¢ï¼ˆå‰ç«¯/GUIï¼‰</strong> çš„è½¯ä»¶æ¶æ„æ¨¡å¼ã€‚</p>
<p>è¿™é‡Œçš„â€œHeadï¼ˆå¤´ï¼‰â€æ¯”å–»çš„æ˜¯<strong>ç”¨æˆ·ç•Œé¢ï¼ˆUI/GUIï¼‰</strong> ï¼Œâ€œBodyï¼ˆèº«ä½“ï¼‰â€æ¯”å–»çš„æ˜¯<strong>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æˆ–å¼•æ“</strong>ã€‚</p>
<p><strong>Headless = ç æ‰è‡ªå¸¦çš„ UIï¼Œåªç»™ä½ æä¾› API æˆ–æ ¸å¿ƒé€»è¾‘ï¼Œè®©ä½ è‡ªå·±å»ç”»ç•Œé¢ã€‚</strong></p>
<hr/>
<h3 data-id="heading-0">1. æ ¸å¿ƒæ¦‚å¿µå›¾è§£</h3>
<p>æƒ³è±¡ä¸€ä¸‹ <strong>â€œä¼ ç»Ÿçš„è½¯ä»¶â€</strong>ï¼ˆæ¯”å¦‚ Wordï¼‰ï¼šå®ƒåƒä¸€å®¶<strong>å ‚é£Ÿé¤å…</strong>ã€‚ä½ æœ‰å¨æˆ¿ï¼ˆé€»è¾‘ï¼‰ï¼Œä¹Ÿæœ‰å›ºå®šçš„æ¡Œæ¤…æ¿å‡³å’Œè£…ä¿®é£æ ¼ï¼ˆUIï¼‰ã€‚ä½ å¿…é¡»åœ¨å®ƒæä¾›çš„ç¯å¢ƒé‡Œåƒé¥­ï¼Œæ— æ³•æ”¹å˜è£…ä¿®ã€‚</p>
<p>è€Œ <strong>â€œHeadless è½¯ä»¶â€</strong>ï¼šå®ƒåƒä¸€ä¸ª<strong>ä¸­å¤®å¨æˆ¿ï¼ˆå¤–å–å·¥å‚ï¼‰</strong>ã€‚å®ƒåªè´Ÿè´£åšé¥­ï¼ˆé€»è¾‘ï¼‰ï¼Œä¸æä¾›æ¡Œæ¤…ï¼ˆUIï¼‰ã€‚</p>
<ul>
<li>ä½ æƒ³æŠŠèœé€åˆ°äº”æ˜Ÿçº§é…’åº—æ‘†ç›˜ï¼ˆWeb ç«¯é«˜çº§å®šåˆ¶ UIï¼‰ï¼Ÿå¯ä»¥ã€‚</li>
<li>ä½ æƒ³æŠŠèœé€åˆ°è·¯è¾¹æ‘Šï¼ˆæ‰‹æœº Appï¼‰ï¼Ÿå¯ä»¥ã€‚</li>
<li>ä½ æƒ³æŠŠèœé€åˆ°è‡ªåŠ¨å”®è´§æœºï¼ˆå°ç¨‹åºï¼‰ï¼Ÿä¹Ÿå¯ä»¥ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-1">2. å…·ä½“ä¾‹å­</h3>
<h4 data-id="heading-2">A. æ— å¤´æµè§ˆå™¨ (Headless Browser)</h4>
<ul>
<li>
<p><strong>ä¼ ç»Ÿçš„æµè§ˆå™¨ï¼ˆå¦‚ Chromeï¼‰ï¼š</strong> ä½ æ‰“å¼€å®ƒï¼Œèƒ½çœ‹åˆ°çª—å£ã€åœ°å€æ ã€æ¸²æŸ“å‡ºæ¥çš„ç½‘é¡µï¼Œä½ èƒ½ç”¨é¼ æ ‡ç‚¹å‡»ã€‚</p>
</li>
<li>
<p><strong>æ— å¤´æµè§ˆå™¨ï¼ˆå¦‚ Puppeteer, Playwrightï¼‰ï¼š</strong></p>
<ul>
<li>
<p><strong>å®šä¹‰ï¼š</strong> å®ƒæ˜¯æµè§ˆå™¨å†…æ ¸ï¼ˆChrome/Webkitï¼‰ï¼Œä½†<strong>æ²¡æœ‰å¯è§†åŒ–çš„çª—å£</strong>ã€‚å®ƒåœ¨åå°ï¼ˆå‘½ä»¤è¡Œ/æœåŠ¡å™¨ï¼‰è¿è¡Œã€‚</p>
</li>
<li>
<p><strong>æ€ä¹ˆç”¨ï¼Ÿ</strong> ä½ å†™ä»£ç æ§åˆ¶å®ƒï¼šâ€œæ‰“å¼€ç™¾åº¦ -&gt; è¾“å…¥å…³é”®è¯ -&gt; æˆªå›¾â€ã€‚</p>
</li>
<li>
<p><strong>æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</strong></p>
<ol>
<li><strong>è‡ªåŠ¨åŒ–æµ‹è¯•ï¼š</strong> æ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»ï¼Œå¿«é€Ÿè·‘é€šå‡ åƒä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œä¸éœ€è¦çœŸçš„å¼¹å‡ºä¸€åƒä¸ªçª—å£ã€‚</li>
<li><strong>çˆ¬è™«ï¼š</strong> çˆ¬å–é‚£äº›éœ€è¦ JS æ¸²æŸ“çš„å¤æ‚ç½‘é¡µã€‚</li>
<li><strong>ç”Ÿæˆæˆªå›¾/PDFï¼š</strong> åœ¨æœåŠ¡å™¨ç«¯æŠŠç½‘é¡µæ¸²æŸ“æˆå›¾ç‰‡æˆ– PDF æŠ¥å‘Šã€‚</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-3">B. æ— å¤´ç¼–è¾‘å™¨ (Headless Editor)</h4>
<ul>
<li>
<p><strong>ä¼ ç»Ÿçš„ç¼–è¾‘å™¨ï¼ˆå¦‚ CKEditor æ—§ç‰ˆ, Quillï¼‰ï¼š</strong></p>
<ul>
<li>ä½ å¼•å…¥å®ƒï¼Œå®ƒå°±è‡ªå¸¦ä¸€å¥—â€œåŠ ç²—ã€æ–œä½“ã€æ’å…¥å›¾ç‰‡â€çš„å·¥å…·æ ï¼Œè‡ªå¸¦ä¸€å¥— CSS æ ·å¼ã€‚</li>
<li><strong>ç¼ºç‚¹ï¼š</strong> å¦‚æœè®¾è®¡å¸ˆè¯´â€œæŠŠå·¥å…·æ æŒ‰é’®å˜æˆåœ†å½¢çš„ï¼Œè€Œä¸”è¦æ‚¬æµ®åœ¨æ–‡å­—ä¸Šæ–¹â€ï¼Œä½ å°±è¦ç–¯ç‹‚è¦†ç›–å®ƒçš„é»˜è®¤ CSSï¼Œéå¸¸ç—›è‹¦ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ— å¤´ç¼–è¾‘å™¨ï¼ˆå¦‚ Tiptap, Plate, Slate.jsï¼‰ï¼š</strong></p>
<ul>
<li><strong>å®šä¹‰ï¼š</strong> å®ƒåªæä¾›<strong>æ–‡å­—å¤„ç†çš„æ ¸å¿ƒé€»è¾‘</strong>ï¼ˆæ¯”å¦‚ï¼šé€‰ä¸­æ–‡æœ¬ã€æŒ‰ä¸‹ Ctrl+B å˜ç²—ä½“ã€æ’¤é”€é‡åšé€»è¾‘ï¼‰ã€‚å®ƒ<strong>ä¸æä¾›ä»»ä½• UI</strong>ï¼ˆæ²¡æœ‰å·¥å…·æ ï¼Œæ²¡æœ‰æŒ‰é’®ï¼‰ã€‚</li>
<li><strong>æ€ä¹ˆç”¨ï¼Ÿ</strong> ä½ éœ€è¦è‡ªå·±å†™ä¸€ä¸ª <code>&lt;button&gt;</code>ï¼Œè‡ªå·±å†™æ ·å¼ï¼Œç„¶åè°ƒç”¨å®ƒçš„ API <code>editor.toggleBold()</code>ã€‚</li>
<li><strong>æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</strong> ä½ å¯ä»¥å®Œå…¨è‡ªç”±åœ°å®šåˆ¶ç¼–è¾‘å™¨çš„é•¿ç›¸ã€‚æ¯”å¦‚ Notionã€é£ä¹¦æ–‡æ¡£é‚£ç§é«˜åº¦å®šåˆ¶çš„ UIï¼Œå¿…é¡»ç”¨æ— å¤´ç¼–è¾‘å™¨å¼€å‘ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-4">3. è¿˜æœ‰å“ªäº›å¸¸è§çš„ Headlessï¼Ÿ</h3>
<p>é™¤äº†æµè§ˆå™¨å’Œç¼–è¾‘å™¨ï¼Œç°åœ¨çš„å¼€å‘è¶‹åŠ¿ä¸­è¿˜æœ‰ï¼š</p>
<h4 data-id="heading-5">C. æ— å¤´ç»„ä»¶åº“ (Headless UI)</h4>
<ul>
<li><strong>ä¾‹å­ï¼š</strong> Radix UI, Headless UI, React Ariaã€‚</li>
<li><strong>è§£é‡Šï¼š</strong> ä»¥å‰æˆ‘ä»¬ç”¨ Ant Design æˆ– Bootstrapï¼ŒæŒ‰é’®é•¿ä»€ä¹ˆæ ·æ˜¯åº“å®šå¥½çš„ã€‚Headless UI åº“åªæä¾›<strong>äº¤äº’é€»è¾‘</strong>ï¼ˆæ¯”å¦‚ä¸‹æ‹‰èœå•æ€ä¹ˆæ‰“å¼€ï¼Œé”®ç›˜æ€ä¹ˆé€‰ï¼Œæ— éšœç¢æ€ä¹ˆè¯»ï¼‰ï¼Œ<strong>ä¸æä¾›ä»»ä½• CSS</strong>ã€‚</li>
<li><strong>å¥½å¤„ï¼š</strong> å®Œç¾é…åˆ Tailwind CSSï¼Œé•¿ç›¸ç”±ä½ å®Œå…¨æ§åˆ¶ã€‚</li>
</ul>
<h4 data-id="heading-6">D. æ— å¤´ CMS (Headless CMS)</h4>
<ul>
<li><strong>ä¾‹å­ï¼š</strong> Strapi, Contentfulã€‚</li>
<li><strong>è§£é‡Šï¼š</strong> ä»¥å‰ç”¨ WordPressï¼Œåå°ç®¡ç†å†…å®¹ï¼Œå‰å°é¡µé¢ä¹Ÿæ˜¯ WordPress ç”Ÿæˆçš„ï¼ˆè€¦åˆï¼‰ã€‚Headless CMS åªæä¾›<strong>åå°ç®¡ç†</strong>å’Œ <strong>API</strong>ã€‚</li>
<li><strong>å¥½å¤„ï¼š</strong> ä½ çš„ä¸€ä»½å†…å®¹ï¼ˆAPIï¼‰å¯ä»¥åŒæ—¶å‘ç»™ ç½‘ç«™ã€Appã€æ™ºèƒ½æ‰‹è¡¨ã€ç”šè‡³å†°ç®±å±å¹•ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">æ€»ç»“ï¼šä¸ºä»€ä¹ˆç°åœ¨æµè¡Œ Headlessï¼Ÿ</h3>
<p>è™½ç„¶ Headless æ„å‘³ç€å¼€å‘è€…è¦å†™æ›´å¤šçš„ä»£ç ï¼ˆå› ä¸ºè¦è‡ªå·±ç”» UIï¼‰ï¼Œä½†å®ƒè§£å†³äº†ç°ä»£å¼€å‘æœ€å¤§çš„ç—›ç‚¹ï¼š<strong>å®šåˆ¶åŒ–</strong>ã€‚</p>






























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>ä¼ ç»Ÿ (Coupled)</strong></th><th><strong>Headless (æ— å¤´)</strong></th></tr></thead><tbody><tr><td><strong>ä¸Šæ‰‹éš¾åº¦</strong></td><td><strong>ä½</strong> (å¼€ç®±å³ç”¨)</td><td><strong>é«˜</strong> (éœ€è¦è‡ªå·±å†™ UI)</td></tr><tr><td><strong>è‡ªç”±åº¦</strong></td><td><strong>ä½</strong> (æ”¹æ ·å¼å¾ˆéš¾)</td><td><strong>æé«˜</strong> (éšå¿ƒæ‰€æ¬²)</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å¿«é€Ÿåšä¸ªæ ‡å‡†åå°</td><td>åƒ Notion/Figma è¿™ç§éœ€è¦æè‡´ä½“éªŒçš„äº§å“</td></tr><tr><td><strong>æ¯”å–»</strong></td><td><strong>æ–¹ä¾¿é¢</strong> (æœ‰é¢æœ‰è°ƒæ–™åŒ…ï¼Œå‘³é“å›ºå®š)</td><td><strong>ç”Ÿé²œé¢æ¡</strong> (åªæœ‰é¢ï¼Œæƒ³åšç‚¸é…±é¢è¿˜æ˜¯æ±¤é¢éšä½ )</td></tr></tbody></table>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼šHeadless å°±æ˜¯æŠŠâ€œä¸šåŠ¡é€»è¾‘â€å’Œâ€œç•Œé¢è¡¨ç°â€å½»åº•åˆ†å®¶ï¼Œè®©ä½ æ‹¥æœ‰æ— é™çš„ UI å®šåˆ¶æƒã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº’è”ç½‘å¤§å‚é¢è¯•å®å½•ï¼šå½“ä¸¥è°¨é¢è¯•å®˜é‡ä¸Šæç¬‘ç¨‹åºå‘˜è°¢é£æœº]]></title>    <link>https://juejin.cn/post/7571060853354266634</link>    <guid>https://juejin.cn/post/7571060853354266634</guid>    <pubDate>2025-11-10T15:57:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7571060853354266634" data-draft-id="7570897638441336859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº’è”ç½‘å¤§å‚é¢è¯•å®å½•ï¼šå½“ä¸¥è°¨é¢è¯•å®˜é‡ä¸Šæç¬‘ç¨‹åºå‘˜è°¢é£æœº"/> <!----> <meta itemprop="datePublished" content="2025-11-10T15:57:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¦å°”æ‘©æ–¯çš„å¼Ÿå­"/> <meta itemprop="url" content="https://juejin.cn/user/622743759107883"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº’è”ç½‘å¤§å‚é¢è¯•å®å½•ï¼šå½“ä¸¥è°¨é¢è¯•å®˜é‡ä¸Šæç¬‘ç¨‹åºå‘˜è°¢é£æœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/622743759107883/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¦å°”æ‘©æ–¯çš„å¼Ÿå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-10T15:57:49.000Z" title="Mon Nov 10 2025 15:57:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äº’è”ç½‘å¤§å‚é¢è¯•å®å½•ï¼šå½“ä¸¥è°¨é¢è¯•å®˜é‡ä¸Šæç¬‘ç¨‹åºå‘˜è°¢é£æœº</h2>
<h3 data-id="heading-1">é¢è¯•åœºæ™¯ï¼šæŸå¤§å‚æŠ€æœ¯äºŒé¢ç°åœºï¼Œä¼šè®®å®¤é‡Œåç€ä¸€ä½ç¥æƒ…ä¸¥è‚ƒçš„é¢è¯•å®˜ï¼Œå¯¹é¢æ˜¯æ»¡è„¸å†™ç€"æˆ‘å¯èƒ½è¦å‡‰äº†"çš„ç¨‹åºå‘˜è°¢é£æœºã€‚</h3>
<h4 data-id="heading-2"><strong>ç¬¬ä¸€è½®æé—®ï¼šåŸºç¡€å¤¯å®</strong></h4>
<p><strong>é¢è¯•å®˜</strong>ï¼šè°¢é£æœºï¼Œå…ˆèŠèŠä½ å¯¹Javaå†…å­˜æ¨¡å‹çš„ç†è§£å§ã€‚æˆ‘ä»¬å…¬å¸ç”¨çš„æ˜¯JDK17ï¼Œä½ èƒ½è¯´è¯´å®ƒå’ŒJDK8åœ¨å†…å­˜æ¨¡å‹ä¸Šçš„ä¸»è¦åŒºåˆ«å—ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼ˆæŒ å¤´ï¼‰ï¼šå‘ƒâ€¦â€¦æˆ‘è®°å¾—å¥½åƒæœ‰å †ã€æ ˆã€æ–¹æ³•åŒºï¼Œè¿˜æœ‰ä¸ªå…ƒç©ºé—´å¯¹å§ï¼Ÿä»¥å‰å«æ°¸ä¹…ä»£ï¼Œç°åœ¨æ”¹åå«å…ƒç©ºé—´äº†ï¼Œå› ä¸ºâ€¦â€¦å—¯â€¦â€¦æ›´é«˜çº§äº†ï¼Ÿ</p>
<p><strong>é¢è¯•å®˜</strong>ï¼ˆå¾®å¾®ç‚¹å¤´ï¼‰ï¼šä¸é”™ï¼Œå›ç­”å¾—æŒºå‡†ç¡®ã€‚é‚£ä½ çŸ¥é“ä¸ºä»€ä¹ˆè¦æŠŠæ°¸ä¹…ä»£æ¢æˆå…ƒç©ºé—´å—ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šå› ä¸ºâ€¦â€¦æ°¸ä¹…ä»£å®¹æ˜“å†…å­˜æº¢å‡ºï¼Œè€Œä¸”ä¸èƒ½åŠ¨æ€æ‰©å®¹ï¼Œè€Œå…ƒç©ºé—´æ˜¯æ”¾åœ¨æœ¬åœ°å†…å­˜é‡Œçš„ï¼Œä¸ä¼šå—å †å¤§å°é™åˆ¶ï¼Œæ‰€ä»¥æ›´ç¨³ï¼</p>
<p><strong>é¢è¯•å®˜</strong>ï¼ˆå¾®ç¬‘ï¼‰ï¼šå¾ˆå¥½ï¼Œå›ç­”å¾—å¾ˆåˆ°ä½ã€‚ç»§ç»­ï¼Œè¯´è¯´volatileå…³é”®å­—çš„ä½œç”¨ï¼Œä»¥åŠå®ƒå¦‚ä½•ä¿è¯å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’åºã€‚</p>
<p><strong>è°¢é£æœº</strong>ï¼šå“¦ï¼Œvolatileå°±æ˜¯è®©å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œæ¯æ¬¡è¯»éƒ½ä»ä¸»å†…å­˜æ‹¿ï¼Œå†™ä¹Ÿç›´æ¥å†™åˆ°ä¸»å†…å­˜ï¼Œè¿™æ ·å°±ä¿è¯äº†å¯è§æ€§ã€‚è‡³äºæŒ‡ä»¤é‡æ’åºï¼Œå®ƒä¼šåŠ ä¸€ä¸ªå†…å­˜å±éšœï¼Œé˜»æ­¢ç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¹±åºæ‰§è¡Œï¼Œå¯¹å§ï¼Ÿ</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šå®Œå…¨æ­£ç¡®ï¼Œçœ‹æ¥ä½ ç¡®å®æŒæ¡äº†æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<h4 data-id="heading-3"><strong>ç¬¬äºŒè½®æé—®ï¼šå¹¶å‘ä¸çº¿ç¨‹æ± </strong></h4>
<p><strong>é¢è¯•å®˜</strong>ï¼šå¾ˆå¥½ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥å¤šçº¿ç¨‹éƒ¨åˆ†ã€‚ä½ èƒ½ä¸èƒ½è§£é‡Šä¸€ä¸‹çº¿ç¨‹æ± çš„æ ¸å¿ƒå‚æ•°æœ‰å“ªäº›ï¼Ÿå®ƒä»¬å„è‡ªçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ã€å·¥ä½œé˜Ÿåˆ—ã€æ‹’ç»ç­–ç•¥ã€çº¿ç¨‹å·¥å‚ã€è¶…æ—¶æ—¶é—´â€¦â€¦å•Šï¼Œè¿˜æœ‰ä¸ªçº¿ç¨‹å­˜æ´»æ—¶é—´ã€‚æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯æœ€ä½ä¿æŒçš„çº¿ç¨‹æ•°é‡ï¼Œæœ€å¤§çº¿ç¨‹æ•°æ˜¯ä¸Šé™ï¼Œå·¥ä½œé˜Ÿåˆ—æ”¾ä»»åŠ¡ï¼Œæ‹’ç»ç­–ç•¥å¤„ç†æ¥ä¸åŠçš„ä»»åŠ¡ï¼Œçº¿ç¨‹å·¥å‚ç”¨æ¥åˆ›å»ºçº¿ç¨‹ï¼Œå­˜æ´»æ—¶é—´æ˜¯ç©ºé—²çº¿ç¨‹ç­‰å¾…ä»»åŠ¡çš„æ—¶é—´ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šéå¸¸æ¸…æ™°ï¼Œé€»è¾‘å®Œæ•´ã€‚é‚£ä¹ˆï¼Œå¦‚æœä½¿ç”¨ThreadPoolExecutorï¼Œä½ å¦‚ä½•åˆç†è®¾ç½®è¿™äº›å‚æ•°æ¥åº”å¯¹é«˜å¹¶å‘åœºæ™¯ï¼Ÿæ¯”å¦‚ä¸€ä¸ªç§’æ€ç³»ç»Ÿã€‚</p>
<p><strong>è°¢é£æœº</strong>ï¼šå—¯â€¦â€¦æˆ‘è§‰å¾—å¯ä»¥è®¾æ ¸å¿ƒçº¿ç¨‹æ•°ä¸ºæœåŠ¡å™¨æ ¸æ•°çš„ä¸¤å€ï¼Œæœ€å¤§çº¿ç¨‹æ•°å¯ä»¥å†ç¿»å€ï¼Œå·¥ä½œé˜Ÿåˆ—ç”¨é˜»å¡é˜Ÿåˆ—ï¼Œæ¯”å¦‚LinkedBlockingQueueï¼Œæ‹’ç»ç­–ç•¥ç”¨CallerRunsPolicyï¼Œè¿™æ ·èƒ½é˜²æ­¢ç³»ç»Ÿé›ªå´©ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šæ€è·¯å¾ˆæ¸…æ™°ã€‚ä½†æœ‰æ²¡æœ‰è€ƒè™‘è¿‡é˜Ÿåˆ—é•¿åº¦è¿‡å¤§å¸¦æ¥çš„å†…å­˜å‹åŠ›ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šå•Šâ€¦â€¦è¿™ä¸ªâ€¦â€¦æˆ‘è¿˜æ²¡æƒ³é‚£ä¹ˆæ·±â€¦â€¦ä¸è¿‡åæ­£æœ‰æ‹’ç»ç­–ç•¥å…œåº•å˜›ï¼Œåº”è¯¥æ²¡é—®é¢˜å§ï¼Ÿ</p>
<p><strong>é¢è¯•å®˜</strong>ï¼ˆè½»ç¬‘ï¼‰ï¼šå»ºè®®ä½ è®°ä½ä¸€å¥è¯ï¼š<strong>é˜Ÿåˆ—ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒåªæ˜¯å»¶è¿Ÿé—®é¢˜ï¼Œä¸æ˜¯è§£å†³é—®é¢˜</strong>ã€‚ç»§ç»­ï¼Œè¯´è¯´ä½ å¯¹ThreadLocalçš„ç†è§£ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨é€”ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šå“¦ï¼ŒThreadLocalå°±æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å‰¯æœ¬ï¼Œäº’ä¸å¹²æ‰°ï¼Œé€‚åˆåšçº¿ç¨‹éš”ç¦»ï¼Œæ¯”å¦‚ä¿å­˜ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€äº‹åŠ¡ä¸Šä¸‹æ–‡ä»€ä¹ˆçš„ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šå¾ˆå¥½ã€‚ä½†è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šå•Šâ€¦â€¦è¦è®°å¾—åœ¨finallyé‡Œremoveæ‰ï¼Œä¸ç„¶å¯èƒ½å†…å­˜æ³„æ¼â€¦â€¦</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šå¯¹ï¼Œè¿™æ˜¯å…³é”®ç‚¹ï¼Œå¾ˆå¤šæ–°äººä¼šå¿½ç•¥ã€‚</p>
<h4 data-id="heading-4"><strong>ç¬¬ä¸‰è½®æé—®ï¼šæ¡†æ¶ä¸ä¸­é—´ä»¶</strong></h4>
<p><strong>é¢è¯•å®˜</strong>ï¼šå¾ˆå¥½ã€‚ç°åœ¨æˆ‘ä»¬è¿›å…¥æ¡†æ¶éƒ¨åˆ†ã€‚ä½ ç”¨è¿‡Spring Bootï¼Œèƒ½è¯´è¯´å®ƒçš„è‡ªåŠ¨è£…é…æœºåˆ¶æ˜¯æ€ä¹ˆå·¥ä½œçš„å—ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šå“¦ï¼Œè‡ªåŠ¨è£…é…å°±æ˜¯é€šè¿‡@Importã€@ConditionalOnClassè¿™äº›æ³¨è§£ï¼Œæ ¹æ®ç±»è·¯å¾„æ˜¯å¦å­˜åœ¨æŸäº›ç±»æ¥å†³å®šæ˜¯å¦åŠ è½½é…ç½®ç±»ã€‚æ¯”å¦‚ä½ å¼•å…¥äº†Redisä¾èµ–ï¼Œå°±ä¼šè‡ªåŠ¨é…ç½®RedisTemplateã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šéå¸¸å‡†ç¡®ã€‚é‚£Springçš„Beanç”Ÿå‘½å‘¨æœŸæœ‰å‡ ä¸ªé˜¶æ®µï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šå®ä¾‹åŒ–ã€å±æ€§èµ‹å€¼ã€åˆå§‹åŒ–ã€é”€æ¯â€¦â€¦å•Šï¼Œè¿˜æœ‰ä¸ªAwareæ¥å£å›è°ƒï¼Œæ¯”å¦‚ApplicationContextAwareï¼Œè¿˜æœ‰InitializingBeanæ¥å£ï¼Œç„¶åæ‰æ˜¯postConstructâ€¦â€¦</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šå¾ˆå¥½ï¼Œä½ æŠŠæ•´ä¸ªæµç¨‹éƒ½è¯´æ¸…æ¥šäº†ã€‚é‚£ä½ è¯´è¯´MyBatisçš„ç¼“å­˜æœºåˆ¶ï¼Œä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ï¼ŒåŒä¸€ä¸ªSqlSessioné‡ŒæŸ¥è¯¢æ•°æ®ä¼šå‘½ä¸­ï¼›äºŒçº§ç¼“å­˜æ˜¯Mapperçº§åˆ«çš„ï¼Œè·¨SqlSessionå…±äº«ï¼Œä½†éœ€è¦æ‰‹åŠ¨å¼€å¯ï¼Œå¹¶ä¸”å®ä½“ç±»è¦å®ç°Serializableã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šéå¸¸å‡†ç¡®ã€‚é‚£åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼ŒäºŒçº§ç¼“å­˜æ€ä¹ˆè§£å†³ä¸€è‡´æ€§é—®é¢˜ï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šè¿™ä¸ªâ€¦â€¦æˆ‘å¥½åƒæ²¡é‡åˆ°è¿‡â€¦â€¦ä¹Ÿè®¸å¯ä»¥ç”¨Redisåšåˆ†å¸ƒå¼ç¼“å­˜ï¼Ÿæˆ–è€…â€¦â€¦åŠ ä¸ªç‰ˆæœ¬å·ï¼Ÿ</p>
<p><strong>é¢è¯•å®˜</strong>ï¼ˆç‚¹å¤´ï¼‰ï¼šä¸é”™ï¼Œæ€è·¯æ‰“å¼€äº†ã€‚æœ€åä¸€ä¸ªé—®é¢˜ï¼Œè°ˆè°ˆä½ å¯¹DDDé¢†åŸŸé©±åŠ¨è®¾è®¡çš„ç†è§£ï¼Œå®ƒå’Œä¼ ç»Ÿçš„åˆ†å±‚æ¶æ„æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p>
<p><strong>è°¢é£æœº</strong>ï¼šå—¯â€¦â€¦å°±æ˜¯æŠŠä¸šåŠ¡é€»è¾‘æ‹†æˆä¸€ä¸ªä¸ªé¢†åŸŸï¼Œç”¨å®ä½“ã€å€¼å¯¹è±¡ã€èšåˆæ ¹æ¥å»ºæ¨¡ï¼Œç„¶åç”¨é¢†åŸŸæœåŠ¡æ¥å¤„ç†å¤æ‚é€»è¾‘ã€‚ç›¸æ¯”ä¼ ç»Ÿæ¶æ„ï¼Œå®ƒæ›´è´´è¿‘ä¸šåŠ¡ï¼Œä»£ç æ›´æœ‰å±‚æ¬¡æ„Ÿï¼Œä¸å®¹æ˜“æ··ä¹±ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šå¾ˆå¥½ï¼Œå›ç­”å¾—å¾ˆæœ‰æ·±åº¦ã€‚è™½ç„¶æœ‰äº›åœ°æ–¹ç•¥æ˜¾ç²—ç³™ï¼Œä½†æ•´ä½“ç†è§£åˆ°ä½ã€‚</p>
<h4 data-id="heading-5"><strong>ç»“æŸè¯­</strong></h4>
<p><strong>é¢è¯•å®˜</strong>ï¼šè°¢é£æœºï¼Œä»Šå¤©çš„é¢è¯•å°±åˆ°è¿™é‡Œã€‚ä½ çš„åŸºç¡€çŸ¥è¯†æ‰å®ï¼Œå¯¹ä¸»æµæ¡†æ¶æœ‰è¾ƒæ·±ç†è§£ï¼Œè™½ç„¶åœ¨ä¸€äº›ç»†èŠ‚ä¸Šè¿˜ç•¥æœ‰æ¬ ç¼ºï¼Œä½†æ½œåŠ›å¾ˆå¤§ã€‚è¯·å›å»ç­‰é€šçŸ¥ï¼Œæˆ‘ä»¬ä¼šåœ¨3ä¸ªå·¥ä½œæ—¥å†…ç»™ä½ ç­”å¤ã€‚</p>
<p><strong>è°¢é£æœº</strong>ï¼ˆæ¾äº†ä¸€å£æ°”ï¼‰ï¼šè°¢è°¢é¢è¯•å®˜ï¼æˆ‘å›å»å¥½å¥½è¡¥è¯¾ï¼Œäº‰å–ä¸‹æ¬¡åˆ«å†è¢«é—®æ‡µäº†ï¼</p>
<hr/>
<h3 data-id="heading-6">ç­”æ¡ˆè¯¦è§£ï¼šæ ¸å¿ƒæŠ€æœ¯ç‚¹è§£æï¼ˆå°ç™½ä¹Ÿèƒ½çœ‹æ‡‚ï¼‰</h3>
<h4 data-id="heading-7">1. Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰</h4>
<ul>
<li><strong>å †</strong>ï¼šå­˜æ”¾æ‰€æœ‰å¯¹è±¡å®ä¾‹ï¼Œåƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸã€‚</li>
<li><strong>æ ˆ</strong>ï¼šå­˜æ”¾å±€éƒ¨å˜é‡ã€æ–¹æ³•è°ƒç”¨æ ˆå¸§ï¼Œæ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹ã€‚</li>
<li><strong>æ–¹æ³•åŒº</strong>ï¼šå­˜å‚¨ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ç­‰ï¼ŒJDK8åæ›´åä¸º<strong>å…ƒç©ºé—´</strong>ï¼ˆMetaspaceï¼‰ï¼Œä½äºæœ¬åœ°å†…å­˜ï¼Œä¸å†å—é™äºå †å¤§å°ã€‚</li>
<li><strong>å…ƒç©ºé—´æ›¿ä»£æ°¸ä¹…ä»£çš„åŸå› </strong>ï¼šæ°¸ä¹…ä»£åœ¨å †ä¸­ï¼Œå®¹æ˜“å¯¼è‡´<code>OutOfMemoryError</code>ï¼›å…ƒç©ºé—´ä½¿ç”¨æœ¬åœ°å†…å­˜ï¼Œå¯åŠ¨æ€æ‰©å±•ï¼Œé¿å…å†…å­˜æº¢å‡ºã€‚</li>
</ul>
<h4 data-id="heading-8">2. volatileå…³é”®å­—</h4>
<ul>
<li><strong>å¯è§æ€§</strong>ï¼šå½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹volatileå˜é‡ï¼Œå…¶ä»–çº¿ç¨‹èƒ½ç«‹å³çœ‹åˆ°æœ€æ–°å€¼ï¼ˆé€šè¿‡å†…å­˜å±éšœåˆ·æ–°ä¸»å†…å­˜ï¼‰ã€‚</li>
<li><strong>ç¦æ­¢æŒ‡ä»¤é‡æ’åº</strong>ï¼šæ’å…¥å†…å­˜å±éšœï¼Œé˜²æ­¢ç¼–è¯‘å™¨æˆ–å¤„ç†å™¨å¯¹ä»£ç è¿›è¡Œä¹±åºä¼˜åŒ–ï¼Œç¡®ä¿æ‰§è¡Œé¡ºåºç¬¦åˆé¢„æœŸã€‚</li>
<li><strong>å…¸å‹åº”ç”¨</strong>ï¼šå•ä¾‹æ¨¡å¼ä¸­çš„åŒé‡æ£€æŸ¥é”ã€çŠ¶æ€æ ‡å¿—ä½ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-9">3. çº¿ç¨‹æ± æ ¸å¿ƒå‚æ•° &amp; è°ƒä¼˜</h4>
<ul>
<li><code>corePoolSize</code>ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œå³ä½¿ç©ºé—²ä¹Ÿä¸ä¼šè¢«å›æ”¶ã€‚</li>
<li><code>maximumPoolSize</code>ï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œè¶…è¿‡æ ¸å¿ƒæ•°åæ‰åˆ›å»ºæ–°çº¿ç¨‹ã€‚</li>
<li><code>workQueue</code>ï¼šä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚<code>LinkedBlockingQueue</code>ï¼ˆæ— ç•Œï¼‰ã€<code>ArrayBlockingQueue</code>ï¼ˆæœ‰ç•Œï¼‰ã€<code>SynchronousQueue</code>ï¼ˆç›´æ¥æäº¤ï¼‰ã€‚</li>
<li><code>rejectedExecutionHandler</code>ï¼šæ‹’ç»ç­–ç•¥ï¼Œå¦‚<code>AbortPolicy</code>ï¼ˆæŠ›å¼‚å¸¸ï¼‰ã€<code>CallerRunsPolicy</code>ï¼ˆç”±è°ƒç”¨çº¿ç¨‹æ‰§è¡Œï¼‰ã€‚</li>
<li><strong>è°ƒä¼˜å»ºè®®</strong>ï¼š
<ul>
<li>CPUå¯†é›†å‹ä»»åŠ¡ï¼š<code>corePoolSize = CPUæ ¸æ•° + 1</code></li>
<li>I/Oå¯†é›†å‹ä»»åŠ¡ï¼š<code>corePoolSize = 2 * CPUæ ¸æ•°</code></li>
<li>é˜Ÿåˆ—é€‰æ‹©ï¼šé¿å…æ— ç•Œé˜Ÿåˆ—å¯¼è‡´å†…å­˜æº¢å‡ºï¼Œå»ºè®®ä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—é…åˆæ‹’ç»ç­–ç•¥ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-10">4. ThreadLocalä½¿ç”¨æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰ç‹¬ç«‹å‰¯æœ¬ï¼Œé€‚ç”¨äºçº¿ç¨‹éš”ç¦»åœºæ™¯ï¼ˆå¦‚ç”¨æˆ·ç™»å½•ä¸Šä¸‹æ–‡ã€äº‹åŠ¡ç®¡ç†ï¼‰ã€‚</li>
<li><strong>å¿…é¡»æ‰‹åŠ¨æ¸…ç†</strong>ï¼šåœ¨<code>finally</code>å—ä¸­è°ƒç”¨<code>threadLocal.remove()</code>ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆå› ThreadLocalMapæŒæœ‰å¼ºå¼•ç”¨ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-11">5. Spring Bootè‡ªåŠ¨è£…é…åŸç†</h4>
<ul>
<li>åŸºäº<code>@EnableAutoConfiguration</code>æ³¨è§£ï¼Œæ‰«æ<code>META-INF/spring.factories</code>æ–‡ä»¶ï¼ŒåŠ è½½<code>org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>æŒ‡å®šçš„è‡ªåŠ¨é…ç½®ç±»ã€‚</li>
<li>ä½¿ç”¨<code>@ConditionalOnClass</code>ã€<code>@ConditionalOnMissingBean</code>ç­‰æ¡ä»¶æ³¨è§£æ§åˆ¶æ˜¯å¦ç”Ÿæ•ˆï¼Œå®ç°â€œæŒ‰éœ€åŠ è½½â€æœºåˆ¶ã€‚</li>
</ul>
<h4 data-id="heading-12">6. Spring Beanç”Ÿå‘½å‘¨æœŸ</h4>
<ol>
<li><strong>å®ä¾‹åŒ–</strong>ï¼šé€šè¿‡æ„é€ å‡½æ•°æˆ–å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡ã€‚</li>
<li><strong>å±æ€§èµ‹å€¼</strong>ï¼šæ³¨å…¥ä¾èµ–ï¼ˆ@Autowiredï¼‰ã€‚</li>
<li><strong>Awareæ¥å£å›è°ƒ</strong>ï¼šå¦‚ApplicationContextAwareã€BeanNameAwareç­‰ã€‚</li>
<li><strong>InitializingBeanæ¥å£</strong>ï¼šè°ƒç”¨<code>afterPropertiesSet()</code>æ–¹æ³•ã€‚</li>
<li><strong>@PostConstructæ³¨è§£æ–¹æ³•</strong>ï¼šæ‰§è¡Œè‡ªå®šä¹‰åˆå§‹åŒ–é€»è¾‘ã€‚</li>
<li><strong>Beanåˆå§‹åŒ–å®Œæˆ</strong>ï¼šæ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚</li>
<li><strong>é”€æ¯</strong>ï¼šè°ƒç”¨<code>@PreDestroy</code>æˆ–<code>DisposableBean</code>æ¥å£æ–¹æ³•ã€‚</li>
</ol>
<h4 data-id="heading-13">7. MyBatisç¼“å­˜æœºåˆ¶</h4>
<ul>
<li><strong>ä¸€çº§ç¼“å­˜</strong>ï¼šé»˜è®¤å¼€å¯ï¼Œä½œç”¨åŸŸä¸ºSqlSessionï¼ŒåŒä¸€ä¼šè¯å†…é‡å¤æŸ¥è¯¢å‘½ä¸­ç¼“å­˜ã€‚</li>
<li><strong>äºŒçº§ç¼“å­˜</strong>ï¼šä½œç”¨åŸŸä¸ºMapperçº§åˆ«ï¼Œéœ€æ‰‹åŠ¨å¼€å¯ï¼ˆ<code>&lt;cache /&gt;</code>æ ‡ç­¾ï¼‰ï¼Œè·¨ä¼šè¯å…±äº«ï¼Œä½†éœ€å®ä½“ç±»å®ç°<code>Serializable</code>æ¥å£ã€‚</li>
<li><strong>ä¸€è‡´æ€§é—®é¢˜</strong>ï¼šç”±äºç¼“å­˜å¼‚æ­¥æ›´æ–°ï¼Œå¯èƒ½å‡ºç°è„è¯»ã€‚è§£å†³æ–¹æ¡ˆï¼š
<ul>
<li>ç”¨Redisç­‰åˆ†å¸ƒå¼ç¼“å­˜æ›¿ä»£ã€‚</li>
<li>å¯ç”¨<code>@CacheNamespaceRef</code>å’Œ<code>@Options(flushCache = true)</code>å¼ºåˆ¶åˆ·æ–°ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-14">8. DDDé¢†åŸŸé©±åŠ¨è®¾è®¡æ ¸å¿ƒæ€æƒ³</h4>
<ul>
<li><strong>é¢†åŸŸæ¨¡å‹</strong>ï¼šä»¥ä¸šåŠ¡ä¸ºæ ¸å¿ƒï¼Œå°†å¤æ‚ä¸šåŠ¡æŠ½è±¡ä¸ºå®ä½“ï¼ˆEntityï¼‰ã€å€¼å¯¹è±¡ï¼ˆValue Objectï¼‰ã€èšåˆæ ¹ï¼ˆAggregate Rootï¼‰ã€‚</li>
<li><strong>åˆ†å±‚æ¶æ„</strong>ï¼š
<ul>
<li><strong>è¡¨ç°å±‚</strong>ï¼šå¤„ç†å‰ç«¯è¯·æ±‚ã€‚</li>
<li><strong>åº”ç”¨å±‚</strong>ï¼šåè°ƒé¢†åŸŸæœåŠ¡ï¼Œå¤„ç†ç”¨ä¾‹ã€‚</li>
<li><strong>é¢†åŸŸå±‚</strong>ï¼šåŒ…å«æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å’Œè§„åˆ™ã€‚</li>
<li><strong>åŸºç¡€è®¾æ–½å±‚</strong>ï¼šæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰å¤–éƒ¨ä¾èµ–ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ï¼Œä¸šåŠ¡ä¸æŠ€æœ¯åˆ†ç¦»ï¼Œé€‚åˆå¤æ‚ç³»ç»Ÿé•¿æœŸæ¼”è¿›ã€‚</li>
</ul>
<hr/>
<blockquote>
<p>ğŸ“Œ <strong>æ€»ç»“</strong>ï¼šæœ¬æ¬¡é¢è¯•è™½æœ‰ç¬‘ç‚¹ï¼Œä½†å†…å®¹æ‰å®ã€‚æŒæ¡è¿™äº›æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œæ˜¯ä½ å†²å‡»å¤§å‚çš„å…³é”®ä¸€æ­¥ã€‚æŒç»­å­¦ä¹ ï¼Œæœªæ¥å¯æœŸï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <!----></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pinia å…¥é—¨ï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ Vuex æ›´å…·é­…åŠ›çš„ç°ä»£ç»§ä»»è€…ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582067084840534070</link>    <guid>https://juejin.cn/post/7582067084840534070</guid>    <pubDate>2025-12-10T23:31:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582067084840534070" data-draft-id="7582067084840517686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pinia å…¥é—¨ï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ Vuex æ›´å…·é­…åŠ›çš„ç°ä»£ç»§ä»»è€…ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js,JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-10T23:31:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é©¬å†™ç "/> <meta itemprop="url" content="https://juejin.cn/user/3940246036939358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pinia å…¥é—¨ï¼šä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ Vuex æ›´å…·é­…åŠ›çš„ç°ä»£ç»§ä»»è€…ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036939358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é©¬å†™ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-10T23:31:16.000Z" title="Wed Dec 10 2025 23:31:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    48
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šVue çŠ¶æ€ç®¡ç†çš„æ—¶ä»£å˜è¿</h2>
<p>åœ¨ Vue.js åº”ç”¨å¼€å‘çš„ä¸–ç•Œé‡Œï¼ŒçŠ¶æ€ç®¡ç†ä¸€ç›´æ˜¯æ„å»ºå¤æ‚åº”ç”¨çš„æ ¸å¿ƒè¯¾é¢˜ã€‚å¤šå¹´æ¥ï¼ŒVuex ä½œä¸ºå®˜æ–¹çŠ¶æ€ç®¡ç†åº“ï¼Œå‡ ä¹æˆä¸º Vue é¡¹ç›®çš„æ ‡å‡†é…ç½®ã€‚ç„¶è€Œï¼Œéšç€ Vue 3 çš„æ¨å‡ºå’Œå¼€å‘ç†å¿µçš„æ¼”è¿›ï¼Œä¸€ä¸ªå…¨æ–°çš„æŒ‘æˆ˜è€…â€”â€”<strong>Pinia</strong>â€”â€”æ‚„ç„¶ç™»åœºï¼Œå¹¶è¿…é€Ÿèµ¢å¾—äº†å¼€å‘è€…çš„é’çã€‚å®ƒä¸ä»…è¢« Vue å®˜æ–¹æ¨èä¸ºâ€œé»˜è®¤çš„çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆâ€ï¼Œæ›´ä»¥å…¶ç®€æ´ã€ç›´è§‚å’Œå¼ºå¤§çš„ç‰¹æ€§ï¼Œæ­£åœ¨é‡æ–°å®šä¹‰æˆ‘ä»¬å¯¹ Vue çŠ¶æ€ç®¡ç†çš„è®¤çŸ¥ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Pinia æ˜¯ä»€ä¹ˆï¼Ÿä¸ä»…ä»…æ˜¯â€œå¦ä¸€ä¸ªçŠ¶æ€åº“â€</h2>
<p>Pinia æ˜¯ä¸€ä¸ªä¸º Vue.js è®¾è®¡çš„çŠ¶æ€ç®¡ç†åº“ã€‚å®ƒç”± Vue æ ¸å¿ƒå›¢é˜Ÿæˆå‘˜å¼€å‘ï¼Œæ—¨åœ¨æä¾›æ›´ç›´è§‚ã€ç±»å‹å®‰å…¨ä¸”æ¨¡å—åŒ–çš„çŠ¶æ€ç®¡ç†ä½“éªŒã€‚</p>
<p>ä¸ Vuex ç›¸æ¯”ï¼ŒPinia æœ€æ˜¾è‘—çš„å“²å­¦è½¬å˜æ˜¯ï¼š<strong>å®ƒæ‘’å¼ƒäº† mutations çš„æ¦‚å¿µ</strong>ã€‚è¿™ä¸ªè®¾è®¡å†³ç­–çœ‹ä¼¼ç®€å•ï¼Œå´å¸¦æ¥äº†å¼€å‘ä½“éªŒçš„è´¨å˜ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Pinia çš„ Store ç¤ºä¾‹ - ç®€æ´ç›´è§‚</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'counter'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++ <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œæ— éœ€ mutations</span>
    },
  },
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">doubleCount</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>,
  },
})
</code></pre>
<h2 data-id="heading-2">äºŒã€ä¸ºä»€ä¹ˆé€‰æ‹© Piniaï¼Ÿäº”å¤§æ ¸å¿ƒä¼˜åŠ¿</h2>
<h3 data-id="heading-3">1. æ›´ç®€æ´çš„ API è®¾è®¡</h3>
<p>Pinia çš„ API æåº¦ç²¾ç®€ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“ã€‚å»æ‰äº† Vuex ä¸­çš„ <code>mutations</code>ï¼ŒçŠ¶æ€ä¿®æ”¹å¯ä»¥é€šè¿‡ actions ç›´æ¥å®Œæˆï¼Œä¹Ÿå¯ä»¥ç›´æ¥èµ‹å€¼ä¿®æ”¹ï¼ˆé…åˆå“åº”å¼ç³»ç»Ÿï¼‰ã€‚è¿™ç§è®¾è®¡å‡å°‘äº†æ¦‚å¿µæ•°é‡ï¼Œè®©ä»£ç æ›´æ˜“è¯»æ˜“å†™ã€‚</p>
<h3 data-id="heading-4">2. å®Œç¾çš„ TypeScript æ”¯æŒ</h3>
<p>Pinia ä»ä¸€å¼€å§‹å°±ä¸º TypeScript è®¾è®¡ï¼Œæä¾›äº†å‡ºè‰²çš„ç±»å‹æ¨æ–­ã€‚ä½ çš„ storeã€stateã€actions å’Œ getters éƒ½èƒ½è·å¾—å®Œæ•´çš„ç±»å‹å®‰å…¨ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡å’Œä»£ç å¯é æ€§ã€‚</p>
<h3 data-id="heading-5">3. æ¨¡å—åŒ–çš„è‡ªç„¶å®ç°</h3>
<p>åœ¨ Pinia ä¸­ï¼Œæ¯ä¸ª store éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—ï¼Œæ— éœ€åƒ Vuex é‚£æ ·åœ¨å•ä¸€ store ä¸­æ³¨å†Œæ¨¡å—ã€‚è¿™ç§è®¾è®¡è®©ä»£ç ç»„ç»‡æ›´åŠ çµæ´»ï¼Œä¹Ÿä¾¿äºä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½ã€‚</p>
<h3 data-id="heading-6">4. æ›´å‹å¥½çš„å¼€å‘ä½“éªŒ</h3>
<ul>
<li><strong>Composition API é£æ ¼</strong>ï¼šä¸ Vue 3 çš„ Composition API å®Œç¾å¥‘åˆ</li>
<li><strong>DevTools é›†æˆ</strong>ï¼šæ”¯æŒ Vue DevToolsï¼Œæä¾›æ—¶é—´æ—…è¡Œè°ƒè¯•</li>
<li><strong>çƒ­æ¨¡å—æ›¿æ¢</strong>ï¼šæ”¯æŒå¼€å‘æ—¶çš„çƒ­æ›´æ–°ï¼Œä¿æŒçŠ¶æ€ä¸ä¸¢å¤±</li>
</ul>
<h3 data-id="heading-7">5. è½»é‡ä¸”é«˜æ€§èƒ½</h3>
<p>Pinia ä½“ç§¯å°å·§ï¼ŒåŒæ—¶é€šè¿‡æ™ºèƒ½çš„è®¾è®¡é¿å…äº†ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ã€‚å®ƒçš„å“åº”å¼ç³»ç»Ÿç›´æ¥æ„å»ºåœ¨ Vue çš„ reactive API ä¹‹ä¸Šï¼Œç¡®ä¿äº†é«˜æ•ˆçš„çŠ¶æ€æ›´æ–°ã€‚</p>
<h2 data-id="heading-8">ä¸‰ã€ä» Vuex è¿ç§»åˆ° Piniaï¼šä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡</h2>
<p>å¯¹äº Vuex ç”¨æˆ·ï¼Œè¿ç§»åˆ° Pinia æ˜¯ä¸€ä¸ªç›¸å¯¹å¹³æ»‘çš„è¿‡ç¨‹ã€‚ä¸¤è€…æ ¸å¿ƒæ¦‚å¿µæœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½† Pinia æä¾›äº†æ›´ç®€æ´çš„å®ç°ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Vuex 4</th><th>Pinia</th></tr></thead><tbody><tr><td>çŠ¶æ€å®šä¹‰</td><td><code>state</code> å‡½æ•°</td><td><code>state</code> å‡½æ•°</td></tr><tr><td>è·å–çŠ¶æ€</td><td><code>getters</code></td><td><code>getters</code></td></tr><tr><td>ä¿®æ”¹çŠ¶æ€</td><td><code>mutations</code> + <code>actions</code></td><td><code>actions</code>ï¼ˆå¯ç›´æ¥ä¿®æ”¹ï¼‰</td></tr><tr><td>æ¨¡å—ç³»ç»Ÿ</td><td>åµŒå¥—æ¨¡å—</td><td>ç‹¬ç«‹ store</td></tr><tr><td>TypeScript æ”¯æŒ</td><td>éœ€è¦é¢å¤–é…ç½®</td><td>å¼€ç®±å³ç”¨</td></tr></tbody></table>
<p>è¿ç§»ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vuex æ–¹å¼</span>
<span class="hljs-attr">mutations</span>: {
  <span class="hljs-title function_">SET_COUNT</span>(<span class="hljs-params">state, value</span>) {
    state.<span class="hljs-property">count</span> = value
  }
},
<span class="hljs-attr">actions</span>: {
  <span class="hljs-title function_">updateCount</span>(<span class="hljs-params">{ commit }, value</span>) {
    <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_COUNT'</span>, value)
  }
}

<span class="hljs-comment">// Pinia æ–¹å¼ï¼ˆæ›´ç®€æ´ï¼‰</span>
<span class="hljs-attr">actions</span>: {
  <span class="hljs-title function_">updateCount</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = value <span class="hljs-comment">// ç›´æ¥èµ‹å€¼ï¼Œå“åº”å¼ç³»ç»Ÿè‡ªåŠ¨å¤„ç†</span>
  }
}
</code></pre>
<h2 data-id="heading-9">å››ã€å®æˆ˜ï¼šæ„å»ºä½ çš„ç¬¬ä¸€ä¸ª Pinia Store</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç†ç¤ºä¾‹ï¼Œå¿«é€Ÿä¸Šæ‰‹ Piniaï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// stores/user.js</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">isAuthenticated</span>: <span class="hljs-literal">false</span>,
  }),
  
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">credentials</span>) {
      <span class="hljs-comment">// æ¨¡æ‹Ÿ API è°ƒç”¨</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">login</span>(credentials)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = response.<span class="hljs-property">user</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAuthenticated</span> = <span class="hljs-literal">true</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, response.<span class="hljs-property">token</span>)
    },
    
    <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = <span class="hljs-literal">null</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">isAuthenticated</span> = <span class="hljs-literal">false</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
    },
  },
  
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">userName</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">user</span>?.<span class="hljs-property">name</span> || <span class="hljs-string">'Guest'</span>,
    <span class="hljs-attr">isAdmin</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">user</span>?.<span class="hljs-property">role</span> === <span class="hljs-string">'admin'</span>,
  },
})
</code></pre>
<p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">
  &lt;div&gt;
    &lt;p&gt;Welcome, {{ userStore.userName }}&lt;/p&gt;
    Logout
  &lt;/div&gt;



import { useUserStore } from '@/stores/user'

const userStore = useUserStore()
// å¯ä»¥ç›´æ¥è®¿é—®çŠ¶æ€å’Œæ“ä½œ

</code></pre>
<h2 data-id="heading-10">äº”ã€é«˜çº§ç‰¹æ€§ï¼šæ¢ç´¢ Pinia çš„å¼ºå¤§èƒ½åŠ›</h2>
<h3 data-id="heading-11">1. Store ç»„åˆ</h3>
<p>Pinia å…è®¸ stores ä¹‹é—´ç›¸äº’è°ƒç”¨ï¼Œä¾¿äºç»„ç»‡å¤æ‚çš„çŠ¶æ€é€»è¾‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// stores/cart.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'cart'</span>, {
  <span class="hljs-comment">// ... cart é€»è¾‘</span>
})

<span class="hljs-comment">// stores/checkout.js  </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCheckoutStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'checkout'</span>, {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> cartStore = <span class="hljs-title function_">useCartStore</span>()
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// å¯ä»¥è®¿é—®å…¶ä»– store</span>
      <span class="hljs-attr">cartItems</span>: cartStore.<span class="hljs-property">items</span>,
    }
  }
})
</code></pre>
<h3 data-id="heading-12">2. æ’ä»¶ç³»ç»Ÿ</h3>
<p>Pinia æ”¯æŒæ’ä»¶ï¼Œå¯ä»¥è½»æ¾æ‰©å±•åŠŸèƒ½ï¼Œå¦‚æŒä¹…åŒ–å­˜å‚¨ã€æ—¥å¿—è®°å½•ç­‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŒä¹…åŒ–æ’ä»¶ç¤ºä¾‹</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()

pinia.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">{ store }</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> key = <span class="hljs-string">`pinia-<span class="hljs-subst">${store.$id}</span>`</span>
  <span class="hljs-keyword">const</span> saved = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key)
  <span class="hljs-keyword">if</span> (saved) {
    store.$patch(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(saved))
  }
  
  store.$subscribe(<span class="hljs-function">(<span class="hljs-params">mutation, state</span>) =&gt;</span> {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(state))
  })
})
</code></pre>
<h2 data-id="heading-13">å…­ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šå»ºè®®ä½¿ç”¨ <code>use</code> å‰ç¼€å‘½å storeï¼ˆå¦‚ <code>useUserStore</code>ï¼‰ï¼Œä»¥ç¬¦åˆ Composition API æƒ¯ä¾‹</li>
<li><strong>é¿å…è¿‡åº¦ä½¿ç”¨</strong>ï¼šä¸æ˜¯æ‰€æœ‰çŠ¶æ€éƒ½éœ€è¦æ”¾å…¥ Piniaï¼Œç»„ä»¶æœ¬åœ°çŠ¶æ€ä»åº”ä½¿ç”¨ <code>ref</code> æˆ– <code>reactive</code></li>
<li><strong>ä¿æŒ Actions çº¯å‡€</strong>ï¼šè™½ç„¶å¯ä»¥ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œä½†å»ºè®®é€šè¿‡ actions è¿›è¡Œä¿®æ”¹ï¼Œä¾¿äºç»´æŠ¤å’Œè°ƒè¯•</li>
<li><strong>åˆ©ç”¨ DevTools</strong>ï¼šå……åˆ†åˆ©ç”¨ Vue DevTools çš„ Pinia é¢æ¿è¿›è¡ŒçŠ¶æ€è°ƒè¯•</li>
</ol>
<h2 data-id="heading-14">ç»“è¯­ï¼šè¿æ¥ Vue çŠ¶æ€ç®¡ç†çš„æ–°æ—¶ä»£</h2>
<p>Pinia çš„å‡ºç°å¹¶éå¶ç„¶ï¼Œå®ƒä»£è¡¨äº† Vue ç”Ÿæ€å‘æ›´ç®€æ´ã€æ›´ç±»å‹å®‰å…¨ã€æ›´ç¬¦åˆç°ä»£å¼€å‘ä½“éªŒçš„æ–¹å‘æ¼”è¿›ã€‚å®ƒä¿ç•™äº† Vuex çš„æ ¸å¿ƒæ€æƒ³ï¼ŒåŒæ—¶å»é™¤äº†å…¶ä¸­çš„ç¹å¤éƒ¨åˆ†ï¼Œæä¾›äº†æ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¯¹äºæ–°é¡¹ç›®ï¼ŒPinia æ— ç–‘æ˜¯é»˜è®¤çš„æœ€ä½³é€‰æ‹©ï¼›å¯¹äºç°æœ‰ Vuex é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘é€æ­¥è¿ç§»ï¼Œäº«å—æ›´ä¼˜çš„å¼€å‘ä½“éªŒã€‚æ­£å¦‚ Vue åˆ›å§‹äººå°¤é›¨æºªæ‰€è¨€ï¼š"Pinia å°±æ˜¯ Vuex 5ï¼Œåªä¸è¿‡æˆ‘ä»¬å†³å®šå«å®ƒ Pinia"ã€‚</p>
<p>åœ¨çŠ¶æ€ç®¡ç†çš„ä¸–ç•Œé‡Œï¼Œæ²¡æœ‰ç»å¯¹çš„"æœ€å¥½"ï¼Œåªæœ‰"æœ€é€‚åˆ"ã€‚è€Œ Piniaï¼Œå‡­å€Ÿå…¶ç®€æ´çš„è®¾è®¡ã€å‡ºè‰²çš„ TypeScript æ”¯æŒå’Œä¸ Vue 3 çš„å®Œç¾èåˆï¼Œæ­£æˆä¸ºè¶Šæ¥è¶Šå¤š Vue å¼€å‘è€…çš„é¦–é€‰ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯ Vue ç”Ÿæ€æˆç†Ÿå’Œè¿›æ­¥çš„æ ‡å¿—â€”â€”è®©æˆ‘ä»¬ä»¥æ›´å°‘çš„ä»£ç ï¼Œå®ç°æ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œäº«å—æ›´æ„‰å¿«çš„å¼€å‘è¿‡ç¨‹ã€‚</p>
<p>æ‹¥æŠ± Piniaï¼Œå°±æ˜¯æ‹¥æŠ± Vue çŠ¶æ€ç®¡ç†çš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚æœæˆ‘é—®ä½  Contextï¼Œä½ æ‰›å¾—ä½å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7582039917217988608</link>    <guid>https://juejin.cn/post/7582039917217988608</guid>    <pubDate>2025-12-11T00:29:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582039917217988608" data-draft-id="7577284771447685160" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚æœæˆ‘é—®ä½  Contextï¼Œä½ æ‰›å¾—ä½å—ï¼Ÿ"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-12-11T00:29:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚æœæˆ‘é—®ä½  Contextï¼Œä½ æ‰›å¾—ä½å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T00:29:49.000Z" title="Thu Dec 11 2025 00:29:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    114
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><em>æœ¬ç³»åˆ—ä¸ºå°è¯´ã€Šé€†è¢­è¥¿äºŒæ——ã€‹çš„æŠ€æœ¯è®²è§£ï¼Œç”¨äºè¯¦ç»†è¯´æ˜<a href="https://juejin.cn/post/7581348660824506368" target="_blank" title="https://juejin.cn/post/7581348660824506368">å‰§æƒ…</a>é‡Œæ¶‰åŠçš„å¼€å‘ç»†èŠ‚ã€‚</em></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f1b5f6096214ccf89f001ee015b88b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766017789&amp;x-signature=3%2FBmrHIGgXFGVwT2TftDraD7vEI%3D" alt="0.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Contextï¼ŒContext æœ‰å“ªäº›ç±»å‹</h2>
<p><code>Context</code> ä»£è¡¨åº”ç”¨ç¨‹åºçš„ç¯å¢ƒæˆ–çŠ¶æ€ï¼Œæä¾›å¯¹åº”ç”¨ä¸“å±èµ„æºå’Œç±»çš„è®¿é—®ã€‚å®ƒå……å½“åº”ç”¨ä¸ Android ç³»ç»Ÿä¹‹é—´çš„æ¡¥æ¢ï¼Œè®©ç»„ä»¶èƒ½å¤Ÿè®¿é—®èµ„æºã€æ•°æ®åº“ã€ç³»ç»ŸæœåŠ¡ç­‰ã€‚åœ¨æ‰§è¡Œè¯¸å¦‚å¯åŠ¨ <code>Activity</code>ã€è¯»å– <code>assets</code> æ–‡ä»¶æˆ–åŠ è½½å¸ƒå±€ç­‰ä»»åŠ¡æ—¶ï¼Œ<code>Context</code> è‡³å…³é‡è¦ã€‚</p>
<p>Android ä¸­æœ‰å¤šç§ç±»å‹çš„ <code>Context</code>ã€‚</p>
<h3 data-id="heading-1">é¢è¯•é—®é¢˜</h3>
<p>åœ¨ Android åº”ç”¨ä¸­ï¼Œä¸ºä½•ä½¿ç”¨æ­£ç¡®çš„ <code>Context</code> ç±»å‹è‡³å…³é‡è¦ï¼Ÿ<br/>
æŒæœ‰ <code>Activit Context</code> çš„é•¿ç”Ÿå‘½å‘¨æœŸå¼•ç”¨åˆå¯èƒ½å¸¦æ¥å“ªäº›é£é™©ï¼Ÿ</p>
<h3 data-id="heading-2">Application Context</h3>
<p><code>Application Context</code> ä¸æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸç»‘å®šã€‚å½“ä½ éœ€è¦ä¸€ä¸ªå…¨å±€ã€é•¿ç”Ÿå‘½å‘¨æœŸä¸”ç‹¬ç«‹äºå½“å‰ <code>Activity</code> æˆ– <code>Fragment</code> çš„ <code>Context</code> æ—¶ï¼Œå°±åº”ä½¿ç”¨å®ƒã€‚å¯é€šè¿‡è°ƒç”¨ <code>getApplicationContext()</code> è·å–ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>è®¿é—®å…¨å±€èµ„æºï¼Œå¦‚ <code>SharedPreferences</code> æˆ–æ•°æ®åº“ï¼›</li>
<li>æ³¨å†Œéœ€è´¯ç©¿æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸçš„å¹¿æ’­æ¥æ”¶å™¨ï¼›</li>
<li>åˆå§‹åŒ–åœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…æŒç»­å­˜åœ¨çš„åº“æˆ–ç»„ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-3">Activity Context</h3>
<p><code>Activity Context</code>ï¼ˆå³ <code>Activity</code> ä¸­çš„ <code>this</code>ï¼‰ä¸ <code>Activity</code> çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œç”¨äºè®¿é—®èµ„æºã€å¯åŠ¨å…¶ä»– <code>Activity</code>ï¼Œæˆ–åŠ è½½è¯¥ <code>Activity</code> ç‰¹æœ‰çš„å¸ƒå±€ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>åˆ›å»ºæˆ–ä¿®æ”¹ UI ç»„ä»¶ï¼›</li>
<li>å¯åŠ¨å¦ä¸€ä¸ª <code>Activity</code>ï¼›</li>
<li>è®¿é—®é™å®šäºå½“å‰ <code>Activity</code> çš„èµ„æºæˆ–ä¸»é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-4">Service Context</h3>
<p><code>Service Context</code> ä¸ <code>Service</code> çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œä¸»è¦ç”¨äºåå°ä»»åŠ¡ï¼Œä¾‹å¦‚æ‰§è¡Œç½‘ç»œè¯·æ±‚æˆ–æ’­æ”¾éŸ³ä¹ã€‚å®ƒå¯è®¿é—® <code>Service</code> æ‰€éœ€çš„ç³»ç»Ÿçº§æœåŠ¡ã€‚</p>
<h3 data-id="heading-5">Broadcast Context</h3>
<p><code>Broadcast Context</code> åœ¨ <code>BroadcastReceiver</code> è¢«è°ƒç”¨æ—¶æä¾›ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œé€šå¸¸ä»…ç”¨äºå“åº”ç‰¹å®šå¹¿æ’­äº‹ä»¶ã€‚<strong>åˆ‡å‹¿åœ¨æ­¤ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œã€‚</strong></p>
<h3 data-id="heading-6">Context çš„å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<ol>
<li><strong>è®¿é—®èµ„æº</strong>ï¼šé€šè¿‡ <code>getString()</code>ã€<code>getDrawable()</code> ç­‰æ–¹æ³•ï¼Œ<code>Context</code> å¯ç”¨äºè·å–å­—ç¬¦ä¸²ã€å›¾ç‰‡ã€å°ºå¯¸ç­‰èµ„æºã€‚</li>
<li><strong>åŠ è½½å¸ƒå±€</strong>ï¼šä½¿ç”¨ <code>Context</code> é€šè¿‡ <code>LayoutInflater</code> å°† XML å¸ƒå±€æ–‡ä»¶è½¬æ¢ä¸º <code>View</code> å¯¹è±¡ã€‚</li>
<li><strong>å¯åŠ¨ Activity å’Œ Service</strong>ï¼šè°ƒç”¨ <code>startActivity()</code> æˆ– <code>startService()</code> æ—¶å¿…é¡»ä¼ å…¥ <code>Context</code>ã€‚</li>
<li><strong>è®¿é—®ç³»ç»ŸæœåŠ¡</strong>ï¼šé€šè¿‡ <code>getSystemService()</code>ï¼Œ<code>Context</code> èƒ½è·å–å¦‚ <code>ClipboardManager</code>ã€<code>ConnectivityManager</code> ç­‰ç³»ç»Ÿçº§æœåŠ¡ã€‚</li>
<li><strong>æ•°æ®åº“ä¸ <code>SharedPreferences</code> æ“ä½œ</strong>ï¼š<code>Context</code> ç”¨äºè®¿é—® <strong>SQLite</strong> æ•°æ®åº“æˆ– <code>SharedPreferences</code> ç­‰æŒä¹…åŒ–å­˜å‚¨æœºåˆ¶ã€‚</li>
</ol>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p><code>Context</code> æ˜¯ Android ä¸­çš„æ ¸å¿ƒç»„ä»¶ï¼Œä½¿åº”ç”¨èƒ½å¤Ÿä¸ç³»ç»Ÿèµ„æºè¿›è¡Œäº¤äº’ã€‚Android æä¾›äº†å¤šç§ <code>Context</code> ç±»å‹ï¼Œå¦‚ <code>Application Context</code>ã€<code>Activity Context</code> å’Œ <code>Service Context</code>ï¼Œå„è‡ªé€‚ç”¨äºä¸åŒåœºæ™¯ã€‚æ­£ç¡®ä½¿ç”¨ <code>Context</code> ä¸ä»…èƒ½é«˜æ•ˆç®¡ç†èµ„æºï¼Œè¿˜èƒ½é¿å…å†…å­˜æ³„æ¼å’Œå´©æºƒã€‚å› æ­¤ï¼ŒåŠ¡å¿…æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„ <code>Context</code>ï¼Œå¹¶é¿å…ä¸å¿…è¦çš„é•¿æœŸæŒæœ‰ã€‚</p>
<h3 data-id="heading-8">è¿›é˜¶ï¼šä½¿ç”¨ Context æ—¶è¦æ³¨æ„ä»€ä¹ˆ</h3>
<p><code>Context</code> æ˜¯ Android ä¸­ä¸€ç§ä¾¿æ·çš„æœºåˆ¶ï¼Œä½†ä½¿ç”¨ä¸å½“ä¼šå¼•å‘ä¸¥é‡é—®é¢˜ï¼Œæ¯”å¦‚å†…å­˜æ³„æ¼ã€å´©æºƒï¼Œæˆ–è€…èµ„æºå¤„ç†æ•ˆç‡ä½ä¸‹ã€‚ä¸ºé¿å…è¿™äº›é™·é˜±ï¼ŒåŠ¡å¿…äº†è§£å…¶ç»†å¾®å·®åˆ«ä»¥åŠæœ‰æ•ˆä½¿ç”¨ <code>Context</code> çš„æœ€ä½³å®è·µã€‚</p>
<p>æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ï¼Œæ˜¯åœ¨ <code>Activity</code> æˆ– <code>Fragment</code> ç­‰ <code>Context</code> çš„ç”Ÿå‘½å‘¨æœŸä¹‹å¤–ï¼Œä»ç„¶ä¿ç•™å¯¹å®ƒä»¬çš„å¼•ç”¨ã€‚è¿™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå› ä¸ºåƒåœ¾å›æ”¶å™¨æ— æ³•å›æ”¶è¯¥ <code>Context</code> åŠå…¶ç›¸å…³èµ„æºæ‰€å ç”¨çš„å†…å­˜ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç å¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">object</span> Singleton {
    <span class="hljs-keyword">var</span> context: Context? = <span class="hljs-literal">null</span> <span class="hljs-comment">// If this retains the Activity context, causing a memory leak</span>
}
</code></pre>
<p>ç›¸åï¼Œå¯¹äºéœ€è¦ <code>Context</code> çš„é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ï¼Œåº”ä½¿ç”¨ <code>Application Context</code>ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">object</span> Singleton {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> applicationContext: Context
}
</code></pre>
<p>å› æ­¤ï¼Œä½¿ç”¨åˆé€‚ç±»å‹çš„ <code>Context</code> è‡³å…³é‡è¦ã€‚ä¸åŒç±»å‹çš„ <code>Context</code> ç”¨é€”å„å¼‚ï¼Œç”¨é”™ç±»å‹å¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸ºï¼š</p>
<ul>
<li>æ‰§è¡Œä¸ç•Œé¢ï¼ˆUIï¼‰ç›¸å…³çš„ä»»åŠ¡ï¼Œå¦‚åŠ è½½å¸ƒå±€æˆ–æ˜¾ç¤ºå¯¹è¯æ¡†æ—¶ï¼Œä½¿ç”¨ <code>Activity Context</code>ã€‚</li>
<li>è¿›è¡Œä¸ UI ç”Ÿå‘½å‘¨æœŸæ— å…³çš„æ“ä½œï¼Œå¦‚åˆå§‹åŒ–åº“æ—¶ï¼Œä½¿ç”¨ <code>Application Context</code>ã€‚</li>
</ul>
<p>ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†è¯¯ç”¨ <code>Application Context</code> çš„æƒ…å†µï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> dialog = AlertDialog.Builder(context.getApplicationContext()) <span class="hljs-comment">// Incorrect</span>
</code></pre>
<p>åº”ä½¿ç”¨ <code>Activity Context</code> ä»¥ç¡®ä¿æ­£ç¡®çš„ä¸»é¢˜è®¾ç½®ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> dialog = AlertDialog.Builder(activityContext) <span class="hljs-comment">// Correct</span>
</code></pre>
<p>å¦ä¸€ä¸ªå…³é”®è€ƒé‡ç‚¹æ˜¯ï¼Œå½“å…³è”ç»„ä»¶ï¼ˆå¦‚ <code>Activity</code> æˆ– <code>Fragment</code>ï¼‰è¢«é”€æ¯åï¼Œè¦é¿å…ä½¿ç”¨ <code>Context</code>ã€‚è®¿é—®ä¸å·²é”€æ¯ç»„ä»¶ç»‘å®šçš„ <code>Context</code>ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºå´©æºƒæˆ–å‡ºç°æœªå®šä¹‰è¡Œä¸ºï¼Œå› ä¸ºä¸è¯¥ <code>Context</code> å…³è”çš„èµ„æºå¯èƒ½å·²ä¸å¤å­˜åœ¨ã€‚</p>
<p>ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¯¹ <code>Context</code> çš„è¯¯ç”¨ï¼Œå…¶ä¸­è‡ªå®šä¹‰è§†å›¾çš„åˆ›å»ºæ–¹å¼ä¸å½“ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin">activity.finish() <span class="hljs-comment">// The activity is destroyed</span>
<span class="hljs-keyword">val</span> text = TextView(activity) <span class="hljs-comment">// but the TextView retains a reference</span>
</code></pre>
<p><em>å¦‚æœåœ¨ <code>activity</code> é”€æ¯åä¾ç„¶ä½¿ç”¨ <code>text</code>ï¼Œæ˜¯éå¸¸å±é™©çš„è¡Œä¸ºï¼ˆä¾‹å¦‚ <code>activity</code> é”€æ¯åï¼Œæ‰è¯·æ±‚åˆ°æ•°æ®ï¼Œç„¶åæ›´æ–° <code>text</code> çš„æ˜¾ç¤ºï¼‰ã€‚</em></p>
<p>é¿å…åœ¨åå°çº¿ç¨‹ä½¿ç”¨ <code>Context</code>ã€‚</p>
<p><code>Context</code> æ˜¯ä¸ºä¸»çº¿ç¨‹è®¾è®¡çš„ï¼Œå°¤å…¶é€‚ç”¨äºè®¿é—®èµ„æºæˆ–ä¸ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰äº¤äº’ã€‚åœ¨åå°çº¿ç¨‹ä½¿ç”¨å®ƒå¯èƒ½ä¼šå¯¼è‡´æ„å¤–å´©æºƒæˆ–çº¿ç¨‹é—®é¢˜ã€‚åœ¨ä¸ UI ç›¸å…³çš„ <code>Context</code> èµ„æºäº¤äº’å‰ï¼Œéœ€åˆ‡æ¢å›ä¸»çº¿ç¨‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin">viewModelScope.launch {
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = fetchData()
    withContext(Dispatchers.Main) {
        Toast.makeText(context, &amp;#<span class="hljs-number">34</span>;Data fetched&amp;#<span class="hljs-number">34</span>;, Toast.LENGTH_SHORT).show()
    }
}
</code></pre>
<p>æ€»ä¹‹ã€‚</p>
<p>è¦æœ‰æ•ˆä½¿ç”¨ <code>Context</code>ï¼Œéœ€è°¨æ…è€ƒé‡ï¼Œè§„é¿å¸¸è§é™·é˜±ã€‚ä¸åº”åœ¨ <code>Activity</code> æˆ– <code>Fragment</code> çš„ç”Ÿå‘½å‘¨æœŸç»“æŸåä»ä¿ç•™å…¶ <code>Context</code>ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚é’ˆå¯¹ç‰¹å®šä»»åŠ¡ï¼ŒåŠ¡å¿…é€‰æ‹©æ­£ç¡®ç±»å‹çš„ <code>Context</code>ï¼Œé¿å…åœ¨åå°çº¿ç¨‹ï¼Œæˆ–å…³è”ç»„ä»¶é”€æ¯åä½¿ç”¨å®ƒã€‚æ­¤å¤–ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»å’Œå›è°ƒæ—¶è¦å°å¿ƒï¼Œå®ƒä»¬å¯èƒ½ä¼šä¸ç»æ„é—´æŒæœ‰å¯¹ <code>Context</code> çš„å¼•ç”¨ã€‚æ­£ç¡®ç®¡ç† <code>Context</code> èƒ½ç¡®ä¿é«˜æ•ˆåˆ©ç”¨èµ„æºï¼Œæœ‰åŠ©äºé˜²æ­¢å†…å­˜æ³„æ¼æˆ–åº”ç”¨ç¨‹åºå´©æºƒã€‚</p>
<h3 data-id="heading-9">è¿›é˜¶ï¼šContextWrapper</h3>
<p><code>ContextWrapper</code> æ˜¯ Android ä¸­çš„ä¸€ä¸ªåŸºç±»ï¼Œå®ƒå…·å¤‡åŒ…è£… <code>Context</code> å¯¹è±¡çš„èƒ½åŠ›ï¼Œå°†è°ƒç”¨å§”æ‰˜ç»™è¢«åŒ…è£…çš„ <code>Context</code>ã€‚å®ƒå……å½“ä¸­é—´å±‚ï¼Œç”¨äºä¿®æ”¹æˆ–æ‰©å±•åŸå§‹ <code>Context</code> çš„è¡Œä¸ºã€‚é€šè¿‡ä½¿ç”¨ <code>ContextWrapper</code>ï¼Œä½ å¯ä»¥åœ¨ä¸æ”¹å˜åº•å±‚ <code>Context</code> çš„æƒ…å†µä¸‹å®šåˆ¶åŠŸèƒ½ã€‚</p>
<p>å½“ä½ éœ€è¦å¢å¼ºæˆ–è¦†ç›–ç°æœ‰ <code>Context</code> çš„ç‰¹å®šè¡Œä¸ºæ—¶ï¼Œå°±ä¼šç”¨åˆ° <code>ContextWrapper</code>ã€‚å®ƒå…è®¸ä½ æ‹¦æˆªå¯¹åŸå§‹ <code>Context</code> çš„è°ƒç”¨ï¼Œå¹¶æä¾›é¢å¤–åŠŸèƒ½æˆ–å®šåˆ¶åŒ–è¡Œä¸ºã€‚</p>
<p>ä»¥ <code>Activity</code> çš„ç»§æ‰¿å…³ç³»ä¸ºä¾‹ï¼š<code>Activity</code> -&gt; <code>ContextThemeWrapper</code> -&gt; <code>ContextWrapper</code>ã€‚</p>
<p>è€Œ <code>ContextWrapper</code> æºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContextWrapper</span> <span class="hljs-title">extends</span> <span class="hljs-title">Context</span> {
    <span class="hljs-meta">@UnsupportedAppUsage</span>
    Context mBase;
    ...
}
</code></pre>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<ol>
<li><strong>è‡ªå®šä¹‰ <code>Context</code></strong>ï¼šå½“ä½ å‡ºäºç‰¹å®šç›®çš„éœ€è¦åˆ›å»ºè‡ªå®šä¹‰ <code>Context</code> æ—¶ï¼Œä¾‹å¦‚åº”ç”¨ä¸åŒçš„ä¸»é¢˜ï¼Œæˆ–ä»¥ç‰¹å®šæ–¹å¼å¤„ç†èµ„æºã€‚</li>
<li><strong>åŠ¨æ€èµ„æºå¤„ç†</strong>ï¼šåŒ…è£… <code>Context</code> ä»¥åŠ¨æ€æä¾›æˆ–ä¿®æ”¹è¯¸å¦‚å­—ç¬¦ä¸²ã€å°ºå¯¸æˆ–æ ·å¼ç­‰èµ„æºã€‚</li>
<li><strong>ä¾èµ–æ³¨å…¥</strong>ï¼šåƒ <strong>Dagger</strong> å’Œ <strong>Hilt</strong> è¿™æ ·çš„åº“ä¼šåˆ›å»º <code>ContextWrapper</code>ï¼Œä»¥ä¾¿å°†è‡ªå®šä¹‰ <code>Context</code> é™„åŠ åˆ°ç»„ä»¶ä¸Šè¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</li>
</ol>
<p>ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>ContextWrapper</code> æ¥åº”ç”¨è‡ªå®šä¹‰ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomThemeContextWrapper</span>(base: Context) : ContextWrapper(base) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTheme</span><span class="hljs-params">()</span></span>: Resources.Theme {
        <span class="hljs-keyword">val</span> theme = <span class="hljs-keyword">super</span>.getTheme()
        theme.applyStyle(R.style.CustomTheme, <span class="hljs-literal">true</span>) <span class="hljs-comment">// Apply a custom theme</span>
        <span class="hljs-keyword">return</span> theme
    }
}
</code></pre>
<p>ä½ å¯ä»¥åœ¨ <code>Activity</code> ä¸­ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰åŒ…è£…å™¨ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">attachBaseContext</span><span class="hljs-params">(newBase: <span class="hljs-type">Context</span>)</span></span> {
        <span class="hljs-keyword">super</span>.attachBaseContext(CustomThemeContextWrapper(newBase))
    }
}
</code></pre>
<p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ<code>CustomThemeContextWrapper</code> ä¸º <code>Activity</code> åº”ç”¨äº†ç‰¹å®šä¸»é¢˜ï¼Œè¦†ç›–äº†åŸºç¡€ä¸Šä¸‹æ–‡çš„é»˜è®¤è¡Œä¸ºã€‚</p>
<p>è¿™æ ·åšæœ‰å¾ˆå¤šå¥½å¤„ï¼š</p>
<ul>
<li><strong>å¯å¤ç”¨æ€§</strong>ï¼šä½ èƒ½å°†è‡ªå®šä¹‰é€»è¾‘å°è£…åœ¨åŒ…è£…å™¨ç±»ä¸­ï¼Œå¹¶åœ¨å¤šä¸ªç»„ä»¶é—´å¤ç”¨ã€‚</li>
<li><strong>å°è£…æ€§</strong>ï¼šå¢å¼ºæˆ–ä¿®æ”¹è¡Œä¸ºçš„åŒæ—¶ï¼Œæ— éœ€æ›´æ”¹åŸå§‹ <code>Context</code> çš„å®ç°ã€‚</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šä¸ç°æœ‰ <code>Context</code> å¯¹è±¡æ— ç¼åä½œï¼Œä¿æŒå‘åå…¼å®¹æ€§ã€‚</li>
</ul>
<p>æ€»ä¹‹ã€‚</p>
<p><code>ContextWrapper</code> æ˜¯ Android ä¸­ç”¨äºå®šåˆ¶ <code>Context</code> è¡Œä¸ºçš„çµæ´»ä¸”å¯å¤ç”¨çš„å·¥å…·ã€‚å®ƒä½¿å¼€å‘è€…èƒ½å¤Ÿæ‹¦æˆªå¹¶ä¿®æ”¹å¯¹åŸå§‹ <code>Context</code> çš„è°ƒç”¨ï¼Œè€Œæ— éœ€ç›´æ¥æ›´æ”¹å®ƒï¼Œè¿™ä½¿å…¶æˆä¸ºæ„å»ºæ¨¡å—åŒ–ä¸”é€‚åº”æ€§å¼ºçš„åº”ç”¨ç¨‹åºå¿…ä¸å¯å°‘çš„ç±»ã€‚</p>
<h3 data-id="heading-10">è¿›é˜¶ï¼šActivity ä¸­çš„ baseContext æ˜¯ä»€ä¹ˆ</h3>
<p>åœ¨ <code>Activity</code> ä¸­ï¼Œ<code>this</code> å’Œ <code>baseContext</code> éƒ½èƒ½ç”¨äºè®¿é—® <code>Context</code>ï¼Œä½†å®ƒä»¬ç”¨é€”ä¸åŒï¼Œä»£è¡¨ç€ Android ä¸Šä¸‹æ–‡å±‚çº§ç»“æ„ä¸­çš„ä¸åŒå±‚æ¬¡ã€‚æ¸…æ¥šä½•æ—¶ä½¿ç”¨å®ƒä»¬ï¼Œå¯¹é¿å…ä»£ç æ··æ·†æˆ–æ½œåœ¨é—®é¢˜è‡³å…³é‡è¦ã€‚</p>
<p>åœ¨ <code>Activity</code> ä¸­ï¼Œå…³é”®å­— <code>this</code> æŒ‡çš„æ˜¯ <code>Activity</code> ç±»çš„å½“å‰å®ä¾‹ã€‚ç”±äº <code>Activity</code> æ˜¯ <code>ContextWrapper</code> çš„å­ç±»ï¼ˆå› è€Œé—´æ¥æ˜¯ <code>Context</code> çš„å­ç±»ï¼‰ï¼Œ<code>this</code> æä¾›äº†å¯¹ <code>Activity</code> ç‰¹å®šä¸Šä¸‹æ–‡çš„è®¿é—®ï¼ŒåŒ…æ‹¬è¯¸å¦‚ç”Ÿå‘½å‘¨æœŸç®¡ç†ä»¥åŠä¸ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰äº¤äº’ç­‰é¢å¤–åŠŸèƒ½ã€‚</p>
<p>å½“åœ¨ <code>Activity</code> ä¸­ä½¿ç”¨ <code>this</code> æ—¶ï¼Œå®ƒé€šå¸¸æŒ‡å‘ <code>Activity</code> çš„å½“å‰ä¸Šä¸‹æ–‡ï¼Œå…è®¸ä½ è°ƒç”¨ç‰¹å®šäºè¯¥ <code>Activity</code> çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ éœ€è¦å¯åŠ¨å¦ä¸€ä¸ª <code>Activity</code> æˆ–æ˜¾ç¤ºä¸è¿™ä¸ªç‰¹å®š <code>Activity</code> ç›¸å…³è”çš„å¯¹è¯æ¡†ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>this</code>ã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> intent = Intent(<span class="hljs-keyword">this</span>, AnotherActivity::<span class="hljs-keyword">class</span>.java)
startActivity(intent)

<span class="hljs-keyword">val</span> dialog = AlertDialog.Builder(<span class="hljs-keyword">this</span>)
    .setTitle(&amp;#<span class="hljs-number">34</span>;Example&amp;#<span class="hljs-number">34</span>;)
    .setMessage(&amp;#<span class="hljs-number">34</span>;This dialog <span class="hljs-keyword">is</span> tied to <span class="hljs-keyword">this</span> Activity instance.&amp;#<span class="hljs-number">34</span>;)
    .show()
</code></pre>
<p><code>baseContext</code> ä»£è¡¨ <code>Activity</code> æ‰€åŸºäºçš„åŸºç¡€ä¸Šä¸‹æ–‡ã€‚å®ƒæ˜¯ <code>ContextWrapper</code> ç±»çš„ä¸€éƒ¨åˆ†ï¼Œè€Œ <code>Activity</code> ç»§æ‰¿è‡ª <code>ContextWrapper</code>ã€‚<code>baseContext</code> é€šå¸¸æ˜¯ <code>ContextImpl</code> å®ä¾‹ï¼Œä¸º <code>Context</code> æ–¹æ³•æä¾›æ ¸å¿ƒå®ç°ã€‚</p>
<p><code>baseContext</code> ä¸€èˆ¬é€šè¿‡ <code>getBaseContext()</code> æ–¹æ³•æ¥è®¿é—®ã€‚ä½ å¾ˆå°‘ç›´æ¥ä½¿ç”¨å®ƒï¼Œä½†åœ¨å¤„ç†è‡ªå®šä¹‰ <code>ContextWrapper</code> å®ç°ï¼Œæˆ–è€…éœ€è¦å¼•ç”¨è¢«åŒ…è£…ä¸Šä¸‹æ–‡èƒŒåçš„åŸå§‹ä¸Šä¸‹æ–‡æ—¶ï¼Œå®ƒå°±ä¼šæ´¾ä¸Šç”¨åœºã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-comment">// å’Œç›´æ¥é€šè¿‡ this è¿”å›çš„ç›¸æ¯”ï¼Œæ­¤å¤„çš„ baseContext ä¸æºå¸¦å½“å‰ Activity çš„ä¸»é¢˜ä¿¡æ¯</span>
<span class="hljs-keyword">val</span> systemService = baseContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE)
</code></pre>
<p>æ€»ç»“ä¸€ä¸‹ä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ï¼š</p>
<ol>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼š<code>this</code> ä»£è¡¨å½“å‰çš„ <code>Activity</code> å®ä¾‹åŠå…¶ç”Ÿå‘½å‘¨æœŸï¼Œè€Œ <code>baseContext</code> æŒ‡çš„æ˜¯ <code>Activity</code> æ„å»ºæ‰€åŸºäºçš„æ›´ä½å±‚æ¬¡çš„ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>ç”¨æ³•</strong>ï¼š<code>this</code> é€šå¸¸ç”¨äºä¸ <code>Activity</code> ç”Ÿå‘½å‘¨æœŸæˆ–ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ç›¸å…³çš„æ“ä½œï¼Œä¾‹å¦‚å¯åŠ¨ <code>Activity</code> æˆ–æ˜¾ç¤ºå¯¹è¯æ¡†ã€‚<code>baseContext</code> ä¸€èˆ¬åœ¨ä¸ <code>Context</code> çš„æ ¸å¿ƒå®ç°è¿›è¡Œäº¤äº’æ—¶ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨è‡ªå®šä¹‰ <code>ContextWrapper</code> çš„åœºæ™¯ä¸­ã€‚</li>
<li><strong>å±‚çº§å…³ç³»</strong>ï¼š<code>baseContext</code> æ˜¯ <code>Activity</code> çš„åŸºç¡€ä¸Šä¸‹æ–‡ã€‚è®¿é—® <code>baseContext</code> ä¼šç»•è¿‡ <code>Activity</code> ä½œä¸º <code>ContextWrapper</code> æ‰€æä¾›çš„é¢å¤–åŠŸèƒ½ã€‚</li>
</ol>
<p>æ€»ä¹‹ã€‚</p>
<p>åœ¨ <code>Activity</code> ä¸­ï¼Œ<code>this</code> æŒ‡å‘å½“å‰çš„ <code>Activity</code> å®ä¾‹ï¼Œæä¾›äº†å…·æœ‰ç”Ÿå‘½å‘¨æœŸå’Œç‰¹å®šäºç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰åŠŸèƒ½çš„é«˜çº§ä¸Šä¸‹æ–‡ã€‚è€Œ <code>baseContext</code> ä»£è¡¨ <code>Activity</code> æ‰€åŸºäºçš„åŸºç¡€ä¸Šä¸‹æ–‡ï¼Œå¸¸ç”¨äºè¯¸å¦‚è‡ªå®šä¹‰ <code>ContextWrapper</code> å®ç°ç­‰é«˜çº§åœºæ™¯ã€‚è™½ç„¶åœ¨ Android å¼€å‘ä¸­ <code>this</code> ä½¿ç”¨æœ€ä¸ºæ™®éï¼Œä½†ç†è§£ <code>baseContext</code> æœ‰åŠ©äºè°ƒè¯•ä»¥åŠåˆ›å»ºæ¨¡å—åŒ–ã€å¯å¤ç”¨çš„ç»„ä»¶ã€‚</p>
<h2 data-id="heading-11">ç•ªå¤–</h2>
<p>æœ¬æ–‡è®²è¿°çš„æŠ€æœ¯ç»†èŠ‚å®Œå…¨æ˜¯åŸºäºé¢è¯•ä¸‹çš„ï¼Œå¦‚æœä½ æƒ³å¯¹ <code>Context</code> æœ‰ä¸ªæ›´åŠ å®Œæ•´çš„è®¤è¯†ï¼Œè¯·çœ‹ä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<p><a href="https://juejin.cn/post/7531888045412663348" target="_blank" title="https://juejin.cn/post/7531888045412663348">æ†‹äº†ä¸€å‘¨äº†ï¼Œ12000å­—æ·±å…¥æµ…å‡ºAndroidçš„Contextæœºåˆ¶</a></p>
<p><a href="https://juejin.cn/post/7527953491890274319" target="_blank" title="https://juejin.cn/post/7527953491890274319">2025å¹´äº†ï¼Œä¸‡å­—é•¿æ–‡å¸¦ä½ äº†è§£Context</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3å’ŒVue2çš„æ ¸å¿ƒåŒºåˆ«ï¼Ÿå¾ˆå¤šå¼€å‘è€…éƒ½æ²¡å®Œå…¨ææ‡‚çš„10ä¸ªç»†èŠ‚]]></title>    <link>https://juejin.cn/post/7582136489770319882</link>    <guid>https://juejin.cn/post/7582136489770319882</guid>    <pubDate>2025-12-11T03:08:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582136489770319882" data-draft-id="7574734686493753380" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3å’ŒVue2çš„æ ¸å¿ƒåŒºåˆ«ï¼Ÿå¾ˆå¤šå¼€å‘è€…éƒ½æ²¡å®Œå…¨ææ‡‚çš„10ä¸ªç»†èŠ‚"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-11T03:08:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3å’ŒVue2çš„æ ¸å¿ƒåŒºåˆ«ï¼Ÿå¾ˆå¤šå¼€å‘è€…éƒ½æ²¡å®Œå…¨ææ‡‚çš„10ä¸ªç»†èŠ‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T03:08:07.000Z" title="Thu Dec 11 2025 03:08:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¤§åï¼è¿™ç¯‡æˆ‘ä»¬æ¥è®²è§£Vue2å’ŒVue3çš„æ ¸å¿ƒåŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ</p>
<p>Vue3æ˜¯Vue2çš„å‡çº§ç‰ˆï¼Œä¸ä»…æ›´å¿«ï¼Œè¿˜æ›´å¥½ç”¨ã€‚å®ƒè§£å†³äº†Vue2ä¸­ä¸€äº›è®©äººå¤´ç–¼çš„é—®é¢˜ï¼Œæ¯”å¦‚åŠ¨æ€æ·»åŠ å±æ€§ä¸å“åº”ã€ç»„ä»¶å¿…é¡»åŒ…åœ¨ä¸€ä¸ªæ ¹å…ƒç´ é‡Œç­‰ç­‰ã€‚</p>
<p>ä¸‹é¢é€šè¿‡10ä¸ªå¸¸è§çš„å¯¹æ¯”ä¾‹å­ï¼Œè®©ä½ å¿«é€Ÿçœ‹æ‡‚Vue3åˆ°åº•æ–°åœ¨å“ªå„¿ã€å¥½åœ¨å“ªå„¿ã€‚</p>
<h3 data-id="heading-0">1. <strong>å“åº”å¼ç³»ç»Ÿï¼š<code>Object.defineProperty</code> vs <code>Proxy</code></strong></h3>
<p>Vue 2 æ— æ³•ç›‘å¬åŠ¨æ€æ·»åŠ çš„å±æ€§ï¼ˆé™¤éç”¨ <code>Vue.set</code>ï¼‰ï¼›Vue 3 å¯ä»¥ç›´æ¥å“åº”ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Vue 2 ä¸ä¼šè§¦å‘æ›´æ–°</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>.<span class="hljs-property">newProp</span> = <span class="hljs-string">'hello'</span>

<span class="hljs-comment">// Vue 2 æ­£ç¡®æ–¹å¼</span>
<span class="hljs-variable language_">this</span>.$set(<span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>, <span class="hljs-string">'newProp'</span>, <span class="hljs-string">'hello'</span>)

<span class="hljs-comment">// Vue 3 ç›´æ¥èµ‹å€¼å³å¯å“åº”</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>.<span class="hljs-property">newProp</span> = <span class="hljs-string">'hello'</span>
</code></pre>
<hr/>
<h3 data-id="heading-1">2. <strong>Composition APIï¼ˆç»„åˆå¼ APIï¼‰</strong></h3>
<pre><code class="hljs language-html" lang="html">

export default {
  data() {
    return { count: 0 }
  },
  methods: {
    increment() {
      this.count++
    }
  }
}




import { ref } from 'vue'

const count = ref(0)
const increment = () =&gt; count.value++

</code></pre>
<hr/>
<h3 data-id="heading-2">3. <strong>TypeScript æ”¯æŒ</strong></h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// Vue 3 + TypeScriptï¼ˆèƒ½æ›´å¥½çš„æ”¯æŒï¼‰</span>

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span> {
  <span class="hljs-attr">msg</span>: <span class="hljs-built_in">string</span>
}
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>()

</code></pre>
<p>Vue 2 è™½å¯é€šè¿‡ <code>vue-class-component</code> æˆ– <code>vue-property-decorator</code> æ”¯æŒ TSï¼Œä½†é…ç½®å¤æ‚ä¸”ç±»å‹æ¨å¯¼å¼±ã€‚</p>
<hr/>
<h3 data-id="heading-3">4. <strong>Fragmentï¼ˆå¤šæ ¹èŠ‚ç‚¹ï¼‰</strong></h3>
<pre><code class="hljs language-html" lang="html">

  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>Main<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>




  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>Main<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

</code></pre>
<hr/>
<h3 data-id="heading-4">5. <strong>Teleportï¼ˆä¼ é€é—¨ï¼‰</strong></h3>
<p>å°† modal æ¸²æŸ“åˆ° body ä¸‹ï¼Œé¿å…æ ·å¼åµŒå¥—é—®é¢˜</p>
<pre><code class="hljs language-html" lang="html">
  Open Modal
  
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"modal"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello from Teleport!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      Close
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  



import { ref } from 'vue'
const open = ref(false)

</code></pre>
<p>Vue 2 éœ€æ‰‹åŠ¨æ“ä½œ DOM æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ <code>portal-vue</code>ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-5">6. <strong>Suspenseï¼ˆå¼‚æ­¥ç»„ä»¶åŠ è½½ï¼‰</strong></h3>
<pre><code class="hljs language-html" lang="html">


const res = await fetch('/api/data')
const data = await res.json()



  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ data }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

</code></pre>
<pre><code class="hljs language-html" lang="html">

  
    
      
    
    
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
  

</code></pre>
<p>Vue 2 æ— åŸç”Ÿ ``ï¼Œéœ€è‡ªè¡Œç®¡ç† loading çŠ¶æ€ã€‚</p>
<hr/>
<h3 data-id="heading-6">7. <strong>å…¨å±€ API å˜æ›´</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Vue 2</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">'MyButton'</span>, <span class="hljs-title class_">MyButton</span>)
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'focus'</span>, focusDirective)

<span class="hljs-comment">// Vue 3</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
app.<span class="hljs-title function_">component</span>(<span class="hljs-string">'MyButton'</span>, <span class="hljs-title class_">MyButton</span>)
app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'focus'</span>, focusDirective)
app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<p>Vue 3 çš„åº”ç”¨å®ä¾‹å½¼æ­¤éš”ç¦»ï¼Œé€‚åˆå¾®å‰ç«¯æˆ–å¤šå®ä¾‹åœºæ™¯ã€‚</p>
<hr/>
<h3 data-id="heading-7">8. <strong>ç”Ÿå‘½å‘¨æœŸé’©å­å‘½åå˜åŒ–</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Vue 2</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* cleanup */</span> },
  <span class="hljs-title function_">destroyed</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* final */</span> }
}

<span class="hljs-comment">// Vue 3ï¼ˆOptions API å†™æ³•ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* cleanup */</span> },
  <span class="hljs-title function_">unmounted</span>(<span class="hljs-params"/>) { <span class="hljs-comment">/* final */</span> }
}

<span class="hljs-comment">// Vue 3ï¼ˆComposition APIï¼‰</span>
<span class="hljs-keyword">import</span> { onBeforeUnmount, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* cleanup */</span> })
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* final */</span> })
</code></pre>
<hr/>
<h3 data-id="heading-8">9. <strong>v-model å¤šç»‘å®š</strong></h3>
<pre><code class="hljs language-html" lang="html">









</code></pre>
<hr/>
<h3 data-id="heading-9">10. <strong>æ˜¾å¼å£°æ˜ emitsï¼ˆæ¨èï¼‰</strong></h3>
<pre><code class="hljs language-js" lang="js">

<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'submit'</span>, <span class="hljs-string">'cancel'</span>])

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">emit</span>(<span class="hljs-string">'submit'</span>)




<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>({
  <span class="hljs-attr">submit</span>: <span class="hljs-function">(<span class="hljs-params">payload</span>) =&gt;</span> <span class="hljs-keyword">typeof</span> payload === <span class="hljs-string">'string'</span>,
  <span class="hljs-attr">cancel</span>: <span class="hljs-literal">null</span>
})

</code></pre>
<p>Vue 2 ä¸­ <code>$emit</code> æ— éœ€å£°æ˜ï¼Œä½†ä¸åˆ©äºå·¥å…·é“¾å’Œæ–‡æ¡£ç”Ÿæˆã€‚</p>
<hr/>
<p>è¿™äº›ç¤ºä¾‹è¦†ç›–äº† Vue2 å’Œ Vue3 æ¯”è¾ƒå…³é”®çš„å·®å¼‚ç‚¹ã€‚é€šè¿‡ä»£ç å¯¹æ¯”ï¼Œå¯ä»¥æ›´æ¸…æ¥šåœ°çœ‹åˆ° Vue3 åœ¨<strong>å¼€å‘ä½“éªŒã€æ€§èƒ½ã€çµæ´»æ€§å’Œå·¥ç¨‹åŒ–</strong>æ–¹é¢æœ‰æ˜ç»†çš„æå‡ã€‚</p>
<h3 data-id="heading-10">ç»“å°¾</h3>
<p>æ€»çš„æ¥è¯´ï¼ŒVue3 åœ¨ä¿æŒç®€å•ä¸Šæ‰‹çš„åŒæ—¶ï¼Œå¢åŠ äº†æ›´å¤šå®ç”¨åˆå¼ºå¤§çš„åŠŸèƒ½ã€‚ä¸ç®¡æ˜¯å†™ä»£ç æ›´è½»æ¾äº†ï¼Œè¿˜æ˜¯å¯¹ TypeScriptã€å¤§å‹é¡¹ç›®çš„æ”¯æŒæ›´å¥½äº†ï¼Œéƒ½è®©å¼€å‘è€…çš„å·¥ä½œå˜å¾—æ›´é«˜æ•ˆã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-11">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F6V83qjR6u0nyfzL-14xYAw" target="_blank" title="https://mp.weixin.qq.com/s/6V83qjR6u0nyfzL-14xYAw" ref="nofollow noopener noreferrer">ã€Šasync/await åˆ°åº•è¦ä¸è¦åŠ  try-catchï¼Ÿå¼‚æ­¥é”™è¯¯å¤„ç†æœ€ä½³å®è·µã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FbgLoyqb3VLgn3xXAok3kcQ" target="_blank" title="https://mp.weixin.qq.com/s/bgLoyqb3VLgn3xXAok3kcQ" ref="nofollow noopener noreferrer">ã€Šå¦‚ä½•æŸ¥çœ‹ SpringBoot å½“å‰çº¿ç¨‹æ•°ï¼Ÿ3 ç§æ–¹æ³•äº²æµ‹æœ‰æ•ˆã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp0n2mN5RDDDaIWuHHVRUZQ" target="_blank" title="https://mp.weixin.qq.com/s/p0n2mN5RDDDaIWuHHVRUZQ" ref="nofollow noopener noreferrer">ã€ŠJava å¼€å‘å¿…çœ‹ï¼šä»€ä¹ˆæ—¶å€™ç”¨ forï¼Œä»€ä¹ˆæ—¶å€™ç”¨ Streamï¼Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqI3TRTdDfRJSH9kCTqAQUw" target="_blank" title="https://mp.weixin.qq.com/s/qI3TRTdDfRJSH9kCTqAQUw" ref="nofollow noopener noreferrer">ã€Šè¿™ 10 ä¸ª MySQL é«˜çº§ç”¨æ³•ï¼Œè®©ä½ çš„ä»£ç åˆå¿«åˆå¥½çœ‹ã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»0åˆ°1æ­å»ºä¸€ä¸ªæ™ºèƒ½åˆ†æOBSåŸ‹ç‚¹æ•°æ®çš„AI Agentï½œå¾—ç‰©æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7582118538562420755</link>    <guid>https://juejin.cn/post/7582118538562420755</guid>    <pubDate>2025-12-11T03:42:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582118538562420755" data-draft-id="7582156219059159103" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»0åˆ°1æ­å»ºä¸€ä¸ªæ™ºèƒ½åˆ†æOBSåŸ‹ç‚¹æ•°æ®çš„AI Agentï½œå¾—ç‰©æŠ€æœ¯"/> <meta itemprop="keywords" content="Agent,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-11T03:42:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—ç‰©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2392954206960247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»0åˆ°1æ­å»ºä¸€ä¸ªæ™ºèƒ½åˆ†æOBSåŸ‹ç‚¹æ•°æ®çš„AI Agentï½œå¾—ç‰©æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392954206960247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—ç‰©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T03:42:54.000Z" title="Thu Dec 11 2025 03:42:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯</h2>
<p>æŸå¤©æ‰“å¼€ç»„å†…çš„Grafanaä»ªè¡¨ç›˜ï¼Œçªç„¶å¥½å¥‡æˆ‘ä»¬çš„åŸ‹ç‚¹ä»è¢«è§¦å‘åæ˜¯å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å˜æˆæ‰€å±•ç¤ºçš„å„ç§å›¾è¡¨çš„ï¼Œäºæ˜¯åœ¨æˆ‘è¿›è¡Œä¸€ç³»åˆ—çš„æ¢ç´¢ä¹‹åï¼Œæ€»ç»“å‡ºäº†ä»¥ä¸‹é“¾è·¯ï¼š</p>
<ul>
<li>åœ¨æŒ‡æ ‡å·¥å‚æ–°å»ºæŒ‡æ ‡ï¼Œç¡®å®šåŸ‹ç‚¹keyå’ŒåŸ‹ç‚¹å…ƒæ•°æ®ã€‚</li>
<li>ä»£ç ä¸­æŒ‡å®šåŸ‹ç‚¹keyå’ŒåŸ‹ç‚¹æ•°æ®ï¼Œé€šè¿‡watchDogå‘é€kafkaæ¶ˆæ¯åˆ°obs monitor topicã€‚</li>
<li>ä¸ºåŸ‹ç‚¹æŒ‡æ ‡æ–°å»ºæ•°æ®å¤„ç†ä»»åŠ¡ï¼Œå°†æ¶ˆè´¹åˆ°çš„kafkaæ¶ˆæ¯è½åˆ°æŒ‡å®šçš„æ•°æ®è¡¨ä¸­ã€‚</li>
<li>æ·»åŠ æ–°çš„ä»ªè¡¨ç›˜ï¼Œç¼–å†™å±•ç¤ºæ•°æ®èƒŒåçš„SQLè¯­å¥ã€‚</li>
</ul>
<p><strong>ç—›ç‚¹</strong>ï¼šæ¯éœ€è¦æ·»åŠ ä¸€ä¸ªæ–°çš„æ•°æ®åˆ†æå¤§ç›˜ï¼Œå°±éœ€è¦äººå·¥å»åˆ†æå„ä¸ªè¡¨ç»“æ„ã€è¡¨ä¸è¡¨ä¹‹é—´çš„è”ç³»ã€è¡¨å„ä¸ªå­—æ®µçš„å«ä¹‰ç­‰ï¼Œåœ¨å……åˆ†ç†è§£å…¶å«ä¹‰åå†è´¹æ—¶è´¹åŠ›åœ°ç¼–å†™SQLè¯­å¥ï¼Œå¹¶ä¸æ–­è°ƒä¼˜ã€‚è¿™å¯¼è‡´OBSåŸ‹ç‚¹æ•°æ®åˆ†æçš„åœºæ™¯ç›¸å¯¹å›ºåŒ–ï¼Œå¹¶ä¸”éš¾ä»¥æ”¯æŒçµæ´»çš„æ•°æ®æŸ¥è¯¢è¦æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8992e17b371443bcbbfdfd2cbeea70a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=9EEvzjkVRvjsOsjQRFtTfRI3OUU%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-1">äºŒã€æ€è€ƒ</h2>
<p>åœ¨åˆ†æäº†å½“å‰ç³»ç»Ÿçš„ç—›ç‚¹åï¼Œæˆ‘æ„è¯†åˆ°è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„å¯ä»¥åˆ©ç”¨AIèƒ½åŠ›æ¥å¯¹ç°æœ‰åŠŸèƒ½è¿›è¡Œæ‰©å±•çš„åœºæ™¯ã€‚å› ä¸ºï¼š</p>
<ul>
<li>åœºæ™¯å¤šå˜ï¼Œå› ä¸ºä½ ä¸çŸ¥é“ç”¨æˆ·å¯èƒ½æƒ³æŸ¥çœ‹ä»€ä¹ˆæ ·çš„æ•°æ®ï¼Œæ— æ³•é€šè¿‡ä»£ç ç©·ä¸¾ï¼›</li>
<li>éœ€è¦äº†è§£ä¸šåŠ¡åŒæ—¶åˆå…·å¤‡ç¼–å†™å¤æ‚æ•°æ®æŸ¥è¯¢SQLçš„äººï¼Œå¹¶ä¸”è´¹æ—¶è´¹åŠ›ï¼›</li>
<li>çœ‹åˆ°å¤§ç›˜æ•°æ®åï¼Œä¾èµ–æ¯ä¸ªäººå¯¹ä¸šåŠ¡çš„ç†è§£æç‚¼å‡ºä¸€å¥—åˆ†ææŠ¥å‘Šï¼ŒæŠ¥å‘Šè´¨é‡ä¸ä¸ªäººçš„ç†è§£ä¸è¡¨è¾¾èƒ½åŠ›ç›¸å…³ã€‚</li>
</ul>
<p>äºæ˜¯æˆ‘å°±å¼€å§‹æ€è€ƒèƒ½å¦æ„å»ºä¸€ä¸ªAI Agentï¼Œä½¿å…¶èƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„è¦æ±‚ï¼Œè‡ªä¸»åœ°ç”Ÿæˆå„ç§å„æ ·çš„SQLæŸ¥è¯¢è¯­å¥ï¼Œå¹¶å°†æŸ¥è¯¢åˆ°çš„æ•°æ®å½¢æˆå®Œæ•´çš„æ•°æ®åˆ†ææŠ¥å‘Šè¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p>ä¸ºäº†å®ç°è¿™ä¸ªæ–¹æ¡ˆï¼Œæœ‰å‡ ä¸ªæ˜æ˜¾éœ€è¦è§£å†³çš„ç‚¹ï¼š</p>
<ul>
<li>å¦‚ä½•è®©AIç†è§£æ¯ä¸ªè¡¨ä¸­å„å­—æ®µçš„å«ä¹‰ã€å„ä¸ªè¡¨çš„ä½œç”¨ã€è¡¨ä¸è¡¨ä¹‹é—´çš„è”ç³»ï¼Œä»è€Œç”Ÿæˆå‡†ç¡®çš„SQLï¼Ÿ</li>
<li>AIç”Ÿæˆå®ŒSQLä¹‹åï¼Œå¦‚ä½•æ‰“é€š AI ä¸æ•°æ®å¹³å°ä¹‹é—´çš„é€šè·¯ï¼Œä»è€ŒæˆåŠŸæ‰§è¡Œè¯¥SQL å¹¶æ‹¿åˆ°æ•°æ®ï¼Ÿå› ä¸ºæ•°æ®åº“æƒé™ä¸åœ¨æˆ‘è¿™ï¼Œæˆ‘æ— æ³•ç›´æ¥è¿æ¥åˆ°æ•°æ®åº“ã€‚</li>
<li>å¦‚ä½•å……åˆ†åˆ©ç”¨å·²æœ‰èµ„æºï¼Œå‡å°‘äººåŠ›æŠ•å…¥ï¼Ÿæ¯•ç«Ÿæ˜¯ä¸ªäººæƒ³æ³•ï¼Œåœ¨ä¸ç¡®å®šæ•ˆæœå¦‚ä½•çš„æƒ…å†µä¸‹ï¼Œä¸å¥½ç›´æ¥æ‰“æ‰°å¹³å°æ–¹ä¸“é—¨ä¸ºæˆ‘å†™ä¸€äº›æ–°åŠŸèƒ½ï¼ŒåŒæ—¶æˆ‘ä¸ªäººä¹Ÿåªèƒ½æŠ•å…¥ä¸€äº›é›¶ç¢çš„æ—¶é—´æ¥åšè¿™ä»¶äº‹ã€‚</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€æ–¹æ¡ˆ</h2>
<p>æœ‰äº†é—®é¢˜åï¼Œå°±å¸¦ç€é—®é¢˜å»æ‰¾ç­”æ¡ˆã€‚</p>
<h3 data-id="heading-3">3.1æŸ¥è¯¢æ•°æ®Tool</h3>
<p>é¦–å…ˆï¼Œæˆ‘éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿæ‰§è¡ŒæŸ¥è¯¢çš„ç«¯ç‚¹ã€‚é‚£ä¹ˆæˆ‘å°±å»æŠ“å–äº†å¤§ç›˜ä¸­çš„æ•°æ®æ‰€è°ƒç”¨çš„æ¥å£ï¼Œæ„å¤–åœ°å‘ç°ï¼Œä¸åŒçš„æ•°æ®è°ƒç”¨çš„æ˜¯åŒä¸€ä¸ªæ¥å£<a href="https://link.juejin.cn?target=https%3A%2F%2Fxxx.com%2Fapi%2Fds%2Fquery%25EF%25BC%258C%25E5%258F%25AA%25E6%2598%25AF%25E5%2585%25A5%25E5%258F%2582%25E4%25B8%258D%25E5%2590%258C%25E8%2580%258C%25E5%25B7%25B2%25EF%25BC%258C%25E8%2580%258C%25E4%25B8%2594%25E5%258F%2591%25E7%258E%25B0%25EF%25BC%258C%25E6%259F%25A5%25E8%25AF%25A2%25E7%259A%2584%25E9%2580%25BB%25E8%25BE%2591%25E6%2598%25AF%25E9%2580%259A%25E8%25BF%2587rawSql%25E5%25B0%2586%25E6%259F%25A5%25E8%25AF%25A2%25E8%25AF%25AD%25E5%258F%25A5%25E7%259B%25B4%25E6%258E%25A5%25E4%25BC%25A0%25E8%25BF%2587%25E5%258E%25BB%25EF%25BC%2581" target="_blank" title="https://xxx.com/api/ds/query%EF%BC%8C%E5%8F%AA%E6%98%AF%E5%85%A5%E5%8F%82%E4%B8%8D%E5%90%8C%E8%80%8C%E5%B7%B2%EF%BC%8C%E8%80%8C%E4%B8%94%E5%8F%91%E7%8E%B0%EF%BC%8C%E6%9F%A5%E8%AF%A2%E7%9A%84%E9%80%BB%E8%BE%91%E6%98%AF%E9%80%9A%E8%BF%87rawSql%E5%B0%86%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%9B%B4%E6%8E%A5%E4%BC%A0%E8%BF%87%E5%8E%BB%EF%BC%81" ref="nofollow noopener noreferrer">xxx.com/api/ds/querâ€¦</a></p>
<p>äºæ˜¯æˆ‘å°†è¯¥Curlå¯¼å…¥åˆ°ApiFoxä¸­ï¼Œé€šè¿‡ä¸æ–­ä¿®æ”¹å‚æ•°ï¼Œå‘ç°æœ€ç»ˆä¸æŸ¥è¯¢ç»“æœç›¸å…³çš„å…¥å‚å¯ä»¥ç²¾ç®€åˆ°ç®€å•çš„å‡ ä¸ªå‚æ•°ï¼šfromã€toã€query(format,rawSql,intervalMs)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cc12be2388246ca9538964baf94db3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=KhfK4RC8qSolZVxsvWE6N8vEwC8%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5898e122620b48179a798c20f92c5de1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=P0j64Quhj7Dh1nVIyKTPtYyiEy4%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>é‚£ä¹ˆé’ˆå¯¹ç¬¬ä¸€ä¸ªé—®é¢˜æˆ‘å°±æƒ³åˆ°äº†å¾ˆå¥½çš„åŠæ³•ï¼ŒæŠŠè¿™ä¸ªæŸ¥è¯¢APIå°è£…æˆä¸€ä¸ªToolï¼Œæè¿°æ¸…æ¥šå„ä¸ªå­—æ®µçš„å«ä¹‰ï¼Œå°±å¯ä»¥è®©AIç”Ÿæˆå®Œæ•´çš„å‚æ•°æ¥æŸ¥è¯¢å®ƒæƒ³è¦çš„æ•°æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30b659f60d72412d9646ec05e0f6d7e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=CRcNoOSA9lnSyUxio1WzXND75pg%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>è¯´å¹²å°±å¹²ï¼Œæˆ‘ç«‹é©¬æ–°å»ºäº†ä¸€ä¸ªSpring AIå·¥ç¨‹ï¼ŒæŠŠToolçš„åŠŸèƒ½å’Œéœ€è¦çš„å‚æ•°æè¿°æ¸…æ¥šã€‚å…¶ä¸­grafanaService.query()å†…éƒ¨é€»è¾‘å°±æ˜¯é€šè¿‡Feignæ¥è°ƒç”¨ä¸Šé¢é‚£ä¸ªæŸ¥è¯¢çš„APIã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Tool</span>(name = <span class="hljs-string">"query_grafana"</span>,
      description= <span class="hljs-string">"ä½¿ç”¨Grafanaä¸­çš„SQLæŸ¥è¯¢grafanaæ•°æ®"</span>)
public JSONObject <span class="hljs-built_in">queryGrafana</span>(<span class="hljs-variable">@ToolParam</span>(description = <span class="hljs-string">"æŸ¥è¯¢å¼€å§‹æ—¶é—´"</span>) String from,
                               <span class="hljs-variable">@ToolParam</span>(description = <span class="hljs-string">"æŸ¥è¯¢ç»“æŸæ—¶é—´"</span>) String to,
                               <span class="hljs-variable">@ToolParam</span>(description = <span class="hljs-string">"æŸ¥è¯¢æ•°æ®ç±»å‹:table|time_series"</span>) String format,
                               <span class="hljs-variable">@ToolParam</span>(description = <span class="hljs-string">"æŸ¥è¯¢æ—¶é—´é—´éš”,å•ä½æ¯«ç§’ã€‚åªæœ‰å½“formatä¸ºtime_seriesæ—¶éœ€è¦ä¼ å…¥ã€‚"</span>) Long intervalMs,
                               <span class="hljs-variable">@ToolParam</span>(description = <span class="hljs-string">"Grafana SQLæŸ¥è¯¢è¯­å¥"</span>) String rawSql){
    <span class="hljs-selector-tag">DateTimeFormatter</span> <span class="hljs-selector-tag">formatter</span> = <span class="hljs-selector-tag">DateTimeFormatter</span><span class="hljs-selector-class">.ofPattern</span>(<span class="hljs-string">"yyyy-MM-dd HH:mm:ss"</span>);
    <span class="hljs-selector-tag">LocalDateTime</span> <span class="hljs-selector-tag">fromDateTime</span> = <span class="hljs-selector-tag">LocalDateTime</span><span class="hljs-selector-class">.parse</span>(from, formatter);
    <span class="hljs-selector-tag">LocalDateTime</span> <span class="hljs-selector-tag">toDateTime</span> = <span class="hljs-selector-tag">LocalDateTime</span><span class="hljs-selector-class">.parse</span>(to, formatter);
    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">fromTimestamp</span> = <span class="hljs-selector-tag">String</span><span class="hljs-selector-class">.valueOf</span>(fromDateTime.<span class="hljs-built_in">toInstant</span>(ZoneOffset.UTC).<span class="hljs-built_in">toEpochMilli</span>());
    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">toTimestamp</span> = <span class="hljs-selector-tag">String</span><span class="hljs-selector-class">.valueOf</span>(toDateTime.<span class="hljs-built_in">toInstant</span>(ZoneOffset.UTC).<span class="hljs-built_in">toEpochMilli</span>());
    <span class="hljs-selector-tag">JSONObject</span> <span class="hljs-selector-tag">resp</span> = <span class="hljs-selector-tag">grafanaService</span><span class="hljs-selector-class">.query</span>(fromTimestamp, toTimestamp, intervalMs, rawSql, format);
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">resp</span>;
}
</code></pre>

<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Resource</span>
<span class="hljs-keyword">private</span> <span class="hljs-title class_">GrafanaClient</span> grafanaClient;


<span class="hljs-meta">@Value</span>(<span class="hljs-string">"${grafana.cookie}"</span>)
<span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> getGrafanaCookie;


<span class="hljs-keyword">public</span> <span class="hljs-title class_">JSON</span><span class="hljs-built_in">Object</span> <span class="hljs-title function_">query</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> fromTimestamp, <span class="hljs-built_in">String</span> toTimestamp, Long intervalMs, <span class="hljs-built_in">String</span> rawSql, <span class="hljs-built_in">String</span> format</span>) {
    <span class="hljs-title class_">GrafanaRequest</span> request = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GrafanaRequest</span>(fromTimestamp, toTimestamp, intervalMs, rawSql, format);
    <span class="hljs-keyword">return</span> grafanaClient.<span class="hljs-title function_">query</span>(getGrafanaCookie, request);
}
</code></pre>
<h3 data-id="heading-4">3.2è¡¨ç»“æ„RAG</h3>
<p>æœ‰äº†èƒ½å¤Ÿæ‰§è¡ŒæŸ¥è¯¢çš„Toolä¹‹åï¼Œå‰©ä¸‹çš„å°±æ˜¯éœ€è¦AIèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·çš„queryç”Ÿæˆç²¾å‡†çš„å‚æ•°ä»¥åŠæŸ¥è¯¢SQLã€‚</p>
<p>ä¹‹å‰äº†è§£åˆ°å…¬å¸éƒ¨ç½²äº†RAGFlowæœåŠ¡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fxxx.com%2Fknowledge%25EF%25BC%258C%25E6%2597%25A2%25E7%2584%25B6%25E6%259C%2589%25E4%25BA%2586%25EF%25BC%258C%25E9%2582%25A3%25E5%25B0%25B1%25E5%25BE%2597%25E7%2594%25A8%25E8%25B5%25B7%25E6%259D%25A5%25EF%25BC%2581" target="_blank" title="https://xxx.com/knowledge%EF%BC%8C%E6%97%A2%E7%84%B6%E6%9C%89%E4%BA%86%EF%BC%8C%E9%82%A3%E5%B0%B1%E5%BE%97%E7%94%A8%E8%B5%B7%E6%9D%A5%EF%BC%81" ref="nofollow noopener noreferrer">xxx.com/knowledgeï¼Œæ—¢â€¦</a></p>
<ul>
<li>åˆ›å»ºçŸ¥è¯†é›†ï¼Œå‘ç°æ”¯æŒæ·»åŠ é£ä¹¦æ–‡æ¡£ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e37c8f34f2b4004927830bf4d82f89c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=m8q3s8tokBcDDi050%2FrJs7A%2FKtE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0468f002576b47569f6071d788a2d7a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=XOW2Otuz7zTyxZzdLRt9RyFDDWY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li>ç”±äºæˆ‘ä»¬æ˜¯éœ€è¦å®Œæ•´çš„è¡¨ç»“æ„ï¼Œæ‰€ä»¥æŠŠé…ç½®ä¿®æ”¹ä¸ºä½¿ç”¨tableçš„æ ¼å¼ï¼Œä¸€è¡Œæ•°æ®ä¾¿æ˜¯ä¸€ä¸ªchunkï¼Œä»¥å…å‡ºç°è¯­ä¹‰ä¸Šçš„ä¸­æ–­ã€‚ï¼ˆåŸ‹ç‚¹æ•°æ®ä¸€èˆ¬è¡¨éƒ½è¾ƒå°ï¼Œè¯­æ„è¾ƒä¸ºæ˜ç¡®ã€‚åƒä¸€äº›å­—æ®µå¾ˆå¤šçš„å¤§è¡¨å¯èƒ½éœ€è¦è€ƒè™‘æ›´å¥½çš„æ–¹æ¡ˆã€‚ï¼‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e84ab93545174f378c3315e861d38d6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=EizxrD7sHUPY34KAPalDLMmTElY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li>åˆ›å»ºé£ä¹¦æ–‡æ¡£ï¼Œæ‰‹åŠ¨åˆ°OBSçš„åº“ä¸­æŠŠæˆ‘ä»¬æƒ³è¦AIå¸®åŠ©åˆ†æçš„è¡¨ç»“æ„æ‹‰å‡ºæ¥ï¼ˆéªŒè¯æƒ³æ³•æ—¶é‡‡å–çš„ä¸´æ—¶æ–¹æ¡ˆï¼‰ï¼Œä½†ç”±äºå»ºè¡¨æ—¶çš„ä¸è§„èŒƒï¼Œå¾ˆå¤šè¡¨æ²¡æœ‰å¯¹è¡¨ä¸­å­—æ®µæ·»åŠ commentï¼Œè¿™ä¼šå¯¼è‡´AIä¸ç†è§£æ¯ä¸ªå­—æ®µçš„å«ä¹‰ï¼Œä¹Ÿå°±æ— æ³•å‡†ç¡®åœ°ç”ŸæˆSQLã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ‰‹åŠ¨è¡¥å……æ¯å¼ è¡¨ã€æ¯ä¸ªå­—æ®µçš„æè¿°ï¼Œä»¥åŠä¸å…¶å®ƒè¡¨ä¹‹é—´çš„å…³è”å…³ç³»ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9adde40d57054101b5f213308b4dcb88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=rqh%2BESuAk25dNypAC8FAnd1X6IA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li>å°†é£ä¹¦æ–‡æ¡£æ·»åŠ åˆ°æ•°æ®é›†ä¸­ï¼Œå®Œæˆåç‚¹å‡»åç§°æŸ¥çœ‹åˆ‡ç‰‡è¯¦æƒ…ã€‚åŒå‡»æ¯ä¸ªå—ä¹Ÿå¯ä»¥æŸ¥çœ‹å—çš„è¯¦æƒ…ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6429041abc14472bb2278353d823711~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=eDzxgUSJ8Cxkszu60he84FIChls%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li>ä¼šå‘ç°RAGFlowè‡ªåŠ¨ç»™æˆ‘ä»¬ç”Ÿæˆäº†ä¸€äº›å…³é”®è¯å’Œé—®é¢˜ï¼Œè¿™äº›å†…å®¹ä¼šå¯¹å¬å›å‡†ç¡®ç‡äº§ç”Ÿå½±å“ã€‚æˆ‘è‡ªå·±è§‰å¾—ç”Ÿæˆçš„ä¸å¤ªå‡†ç¡®ï¼Œæ‰€ä»¥ç»“åˆè‡ªå·±ç†è§£æ‰‹åŠ¨è¾“å…¥äº†ä¸€äº›å…³é”®è¯å’Œå¯èƒ½çš„é—®é¢˜ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3143617fc3af4be995b67d653faf87fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=FdFHuis%2Fee2jEGCKkthnjqyLMXw%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li>å®Œæˆåï¼Œå¯ä»¥åˆ°æ£€ç´¢æµ‹è¯•tabæµ‹è¯•å¬å›çš„æ•ˆæœï¼Œæ ¹æ®ç»“æœç¡®å®šåˆé€‚çš„å‚æ•°ã€‚å¹¶å¯ä»¥å¯¹chunkçš„å†…å®¹å’Œå…³é”®è¯ç­‰ç­‰è¿›è¡Œé€‚å½“çš„è°ƒæ•´ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b152dba313e488ea6e1ae65d0c07c37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=u2l9TSrVN3XrkxMQHH5sL5nb%2FPQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<ul>
<li>è°ƒä¼˜å®Œæˆåï¼Œå°±éœ€è¦å¯¹æ¥RAGFlowçš„retriveæ¥å£ï¼Œæ¥æŠŠæˆ‘ä»¬çŸ¥è¯†åº“å¬å›çš„æµç¨‹åšæˆä¸€ä¸ªToolã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e428bafad28f4661a22af61f4d2d0c51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=ERRIt6qr5UgPeGRFd5XlAeZXAhE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Resource</span>
private RagFlowService ragFlowService;


<span class="hljs-variable">@Tool</span>(name = <span class="hljs-string">"get_table_schema"</span>, description= <span class="hljs-string">"æ ¹æ®queryæŸ¥è¯¢å¯èƒ½æœ‰å…³è”çš„æ•°æ®åº“è¡¨ï¼Œè¿”å›å»ºè¡¨è¯­å¥ã€‚å°½é‡ä¼ å…¥å¤šä¸ªä¸­æ–‡å…³é”®è¯ï¼Œæ¯ä¸ªå…³é”®è¯ä¹‹é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚"</span>)
public List&lt;String&gt; <span class="hljs-built_in">getTableSchema</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"query"</span>) String question){
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ragFlowService</span><span class="hljs-selector-class">.retrieval</span>(question);
}
</code></pre>
<h3 data-id="heading-5">3.3 OBS Agent</h3>
<p>åœ¨æˆ‘çœ‹æ¥ï¼Œæƒ³è¦æ„å»ºä¸€ä¸ªèƒ½å¤Ÿ work çš„Agentï¼Œéœ€è¦ä»¥ä¸‹å‡ ä¸ªè¦ç´ ï¼š</p>
<p><strong>Agent=Architecture</strong>(Workflowã€ReActã€Plan-Executeã€Multi-Agent...) <strong>+LLM+Context Engineering</strong>(Promptã€Toolã€Memory...)</p>
<p>æœ¬æ¥æ˜¯æƒ³ç”¨SpringAI Alibaba Graphæˆ–è€… LangGraphæ¥æ„å»ºä¸€ä¸ªWorkFlowç±»æˆ–è€…Graphç±»çš„å¤æ‚æ™ºèƒ½ä½“ï¼ˆReActã€Plan-Executeã€Multi-Agentï¼‰ã€‚ä½†ä¸ºäº†å¿«é€ŸéªŒè¯æƒ³æ³•å’ŒèŠ‚çœä¸ªäººæ—¶é—´ï¼Œå¹¶ä¸”è€ƒè™‘åˆ°ç›®å‰ä»»åŠ¡ç›¸å¯¹ç®€å•ï¼ˆPE+å·¥å…·å°±è¶³ä»¥å®Œæˆï¼‰ï¼Œå†åŠ ä¸Šéƒ¨é—¨æ­£åœ¨è¯•ç”¨Traeè¿™ä¸ªå·¥å…·ï¼Œæ‰€ä»¥å†³å®šåŸºäºTraeæ¥æ„å»ºä¸€ä¸ªAgentï¼ˆå¯ä»¥é¡ºä¾¿ä½¿ç”¨ä»–ä»¬çš„é«˜çº§æ¨¡å‹/dogeï¼Œä¹Ÿå¯ä»¥åˆ†äº«ç»™å…¶å®ƒåŒäº‹ä½¿ç”¨ï¼‰ã€‚</p>
<p>æ¥å…¥Traeä¹‹åï¼ŒArchitectureè‡ªç„¶å°±æ˜¯Traeçš„Agentæ¶æ„äº†ï¼Œæ ¹æ®æˆ‘ä½¿ç”¨ä¸‹æ¥æ„Ÿè§‰é‡‡ç”¨çš„æ˜¯åŸºäºReActçš„ Single-Agentã€‚è€ŒContext Engineeringçš„éƒ¨åˆ†ï¼Œå¯¹è¯åŠŸèƒ½ä»¥åŠé•¿çŸ­æœŸè®°å¿†ï¼Œè‡ªç„¶æ˜¯Traeå¤©ç”Ÿå°±å…·å¤‡çš„ã€‚è€ŒToolåˆ™å¯ä»¥å€ŸåŠ©å…¶è‡ªå¸¦çš„ä¸€äº›å·¥å…·ï¼Œå¦å¤–è¿˜å¯ä»¥åˆ©ç”¨MCPæ¥è¿›è¡Œæ‰©å±•ï¼Œæ¯”å¦‚å¾—ç‰©çš„MCPå¸‚åœºï¼Œæä¾›äº†å¤§é‡å¥½ç”¨çš„Serverï¼Œå¹¶ä¸”å¯ä»¥å¾ˆæ–¹ä¾¿çš„å‘å¸ƒè‡ªå·±å¼€å‘çš„Mcp Serverã€‚äºæ˜¯ï¼Œæˆ‘å°±æŠŠåœ¨ç¬¬ä¸€æ­¥å’Œç¬¬äºŒæ­¥åšçš„å·¥å…·ï¼Œåœ¨å¾—ç‰©Mcpå¹³å°ä¸Šè¿›è¡Œå‘å¸ƒï¼Œä¾›æˆ‘è‡ªå·±å’Œå…¶ä»–æ„Ÿå…´è¶£çš„åŒå­¦ä½¿ç”¨ã€‚</p>
<p>æœ€åï¼Œéœ€è¦ä¸€ä¸ªä¸“é—¨é’ˆå¯¹æˆ‘è¿™ä¸ªåœºæ™¯çš„Promptæ¥æŒ‡å¼•LLM é¡ºåˆ©å®Œæˆä»»åŠ¡ï¼Œç»è¿‡æˆ‘ä¸æ–­çš„ä¿®æ”¹ï¼Œæœ€ç»ˆå½¢æˆè¿™æ ·ä¸€æ®µPrompt:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Roleï¼šæ•°æ®åˆ†æä¸“å®¶</span>


<span class="hljs-section">## Backgroundï¼šç”¨æˆ·éœ€è¦ä¸“ä¸šçš„æ•°æ®åˆ†ææ”¯æŒæ¥è§£å†³å¤æ‚çš„ä¸šåŠ¡é—®é¢˜ï¼Œä»æµ·é‡æ•°æ®ä¸­æå–æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œä¸ºäº§å“ä¼˜åŒ–ã€è¿è¥ç­–ç•¥å’Œä¸šåŠ¡å†³ç­–æä¾›å¯é ä¾æ®ã€‚</span>


<span class="hljs-section">## Attentionï¼šæ•°æ®å‡†ç¡®æ€§æ˜¯åˆ†æå·¥ä½œçš„ç”Ÿå‘½çº¿ï¼Œå¿…é¡»å§‹ç»ˆä¿æŒä¸¥è°¨ç»†è‡´çš„å·¥ä½œæ€åº¦ã€‚æ¯ä¸€æ¬¡åˆ†æéƒ½å¯èƒ½å½±å“é‡è¦å†³ç­–ï¼Œå› æ­¤éœ€è¦ç³»ç»Ÿæ€§æ€è€ƒã€åˆ†æ­¥éªŒè¯ï¼Œç¡®ä¿æ¯ä¸ªç¯èŠ‚çš„å¯é æ€§ã€‚</span>


<span class="hljs-section">## Profileï¼š</span>
<span class="hljs-bullet">-</span> Language: ä¸­æ–‡
<span class="hljs-bullet">-</span> Description: ä¸“æ³¨äºæ•°æ®åº“è¡¨ç»“æ„åˆ†æä¸Grafana-SQLæŸ¥è¯¢çš„ä¸“ä¸šæ•°æ®åˆ†æå¸ˆï¼Œå…·å¤‡ç³»ç»ŸåŒ–è§£å†³å¤æ‚æ•°æ®æŸ¥è¯¢é—®é¢˜çš„èƒ½åŠ›


<span class="hljs-section">### Skills:</span>
<span class="hljs-bullet">-</span> ç²¾é€šæ•°æ®åº“è¡¨ç»“æ„åˆ†æï¼Œèƒ½å¤Ÿå¿«é€Ÿè¯†åˆ«è¡¨å…³ç³»ã€å­—æ®µå«ä¹‰å’Œæ•°æ®ç±»å‹
<span class="hljs-bullet">-</span> ç†Ÿç»ƒæŒæ¡Grafana-SQLè¯­æ³•è§„èŒƒï¼Œå…·å¤‡é«˜æ•ˆçš„æŸ¥è¯¢è¯­å¥ç¼–å†™å’Œä¼˜åŒ–èƒ½åŠ›
<span class="hljs-bullet">-</span> å…·å¤‡ä¸“ä¸šçš„æ•°æ®å¯è§†åŒ–æŠ€èƒ½ï¼Œèƒ½å¤Ÿæ ¹æ®åˆ†æç›®æ ‡é€‰æ‹©åˆé€‚çš„å›¾è¡¨ç±»å‹
<span class="hljs-bullet">-</span> æ‹¥æœ‰æ·±åº¦ä¸šåŠ¡éœ€æ±‚ç†è§£èƒ½åŠ›ï¼Œèƒ½å¤Ÿå‡†ç¡®è½¬åŒ–ä¸šåŠ¡é—®é¢˜ä¸ºæ•°æ®æŸ¥è¯¢æ–¹æ¡ˆ
<span class="hljs-bullet">-</span> æŒæ¡ç³»ç»ŸåŒ–çš„é—®é¢˜åˆ†ææ–¹æ³•ï¼Œèƒ½å¤Ÿè§„åˆ’å®Œæ•´çš„æ•°æ®åˆ†ææµç¨‹å’ŒéªŒè¯æœºåˆ¶


<span class="hljs-section">## Goals:</span>
<span class="hljs-bullet">-</span> å‡†ç¡®ç†è§£ç”¨æˆ·ä¸šåŠ¡éœ€æ±‚ï¼Œæ˜ç¡®æ•°æ®æŸ¥è¯¢çš„æ ¸å¿ƒç›®æ ‡å’Œå…³é”®æŒ‡æ ‡
<span class="hljs-bullet">-</span> ç³»ç»Ÿåˆ†æç›¸å…³è¡¨ç»“æ„ï¼Œç¡®ä¿å¯¹æ•°æ®å…³ç³»å’Œä¸šåŠ¡é€»è¾‘çš„å…¨é¢ç†è§£
<span class="hljs-bullet">-</span> è®¾è®¡é«˜æ•ˆçš„æ•°æ®æŸ¥è¯¢æ–¹æ¡ˆï¼Œå¹³è¡¡æŸ¥è¯¢æ€§èƒ½ä¸ç»“æœå‡†ç¡®æ€§
<span class="hljs-bullet">-</span> ç”Ÿæˆä¸“ä¸šçš„æ•°æ®åˆ†ææŠ¥å‘Šï¼ŒåŒ…å«å¯è§†åŒ–å±•ç¤ºå’Œæ·±åº¦ä¸šåŠ¡æ´å¯Ÿ
<span class="hljs-bullet">-</span> ç¡®ä¿æ‰€æœ‰åˆ†æè¿‡ç¨‹å¯è¿½æº¯ã€ç»“æœå¯éªŒè¯ã€ç»“è®ºå¯æ‰§è¡Œ


<span class="hljs-section">## Constrains:</span>
<span class="hljs-bullet">-</span> æŸ¥è¯¢ä¸åˆ°æ•°æ®æ—¶ä¸è¦æ¨¡æ‹Ÿä»»ä½•æ•°æ®ï¼Œç›´æ¥å›å¤æŸ¥ä¸åˆ°æ•°æ®
<span class="hljs-bullet">-</span> ä½ è‡ªå·±æ‰€çŸ¥é“çš„æ—¶é—´æ˜¯ä¸å‡†ç¡®çš„ï¼Œå¦‚æœæ¶‰åŠåˆ°æ—¶é—´ï¼Œåˆ™éœ€è¦ä½¿ç”¨å·¥å…·è·å–å½“å‰æ—¶é—´
<span class="hljs-bullet">-</span> ä¸¥æ ¼åŸºäºå®é™…æ•°æ®è¿›è¡Œåˆ†æï¼Œä¸¥ç¦ä»»ä½•å½¢å¼çš„æ•°æ®è™šæ„æˆ–æ¨æµ‹
<span class="hljs-bullet">-</span> å¿…é¡»åœ¨å®Œæˆè¡¨ç»“æ„åˆ†æå’Œéœ€æ±‚ç†è§£åå†æ‰§è¡Œå…·ä½“æŸ¥è¯¢æ“ä½œ
<span class="hljs-bullet">-</span> æ‰€æœ‰é‡è¦æ•°æ®å¿…é¡»è¿›è¡Œæºå¤´éªŒè¯å’Œå¤šç»´åº¦äº¤å‰æ£€æŸ¥
<span class="hljs-bullet">-</span> ä¸¥æ ¼éµå®ˆæ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤åŸåˆ™ï¼Œä¸è¶…è¶Šæˆæƒæ•°æ®èŒƒå›´
<span class="hljs-bullet">-</span> æ˜ç¡®è¯´æ˜åˆ†æçš„å±€é™æ€§ã€å‡è®¾æ¡ä»¶å’Œæ½œåœ¨çš„æ•°æ®ä¸ç¡®å®šæ€§


<span class="hljs-section">## Workflow:</span>
<span class="hljs-bullet">1.</span> æ·±åº¦ç†è§£ä¸šåŠ¡éœ€æ±‚ï¼Œæ˜ç¡®æŸ¥è¯¢ç›®æ ‡ã€å…³é”®æŒ‡æ ‡å’Œé¢„æœŸè¾“å‡º
<span class="hljs-bullet">2.</span> ä¸æ–­ä½¿ç”¨å·¥å…·è·å–ä½ éœ€è¦çš„è¡¨åŠå…¶è¡¨ç»“æ„ï¼Œç›´åˆ°ä½ è®¤ä¸ºå·²è·å–åˆ°è¶³å¤Ÿçš„ä¿¡æ¯
<span class="hljs-bullet">3.</span> ç³»ç»Ÿåˆ†æç›¸å…³è¡¨ç»“æ„ï¼ŒåŒ…æ‹¬å­—æ®µå«ä¹‰ã€æ•°æ®ç±»å‹ã€å…³è”å…³ç³»å’Œç´¢å¼•ç»“æ„
<span class="hljs-bullet">4.</span> è®¾è®¡æŸ¥è¯¢é€»è¾‘æ–¹æ¡ˆï¼Œè§„åˆ’æ‰§è¡Œæ­¥éª¤ã€éªŒè¯èŠ‚ç‚¹å’Œæ€§èƒ½ä¼˜åŒ–ç­–ç•¥
<span class="hljs-bullet">4.</span> ç¼–å†™ç¬¦åˆGrafanaè¯­æ³•çš„SQLæŸ¥è¯¢è¯­å¥ï¼Œè®¾ç½®æ­£ç¡®çš„å‚æ•°å’Œæ—¶é—´èŒƒå›´
<span class="hljs-bullet">5.</span> æ‰§è¡ŒæŸ¥è¯¢ã€‚å¦‚æœæŸ¥è¯¢å‡ºç°401é”™è¯¯ï¼Œåˆ™ä¸­æ–­åç»­æµç¨‹ï¼Œå¹¶æç¤ºç”¨æˆ·æ›´æ–°Cookieåé‡å¯obs-mcp-serverï¼›å¦‚æœå‡ºç°400é”™è¯¯ï¼Œå°è¯•ä¿®æ”¹è‡ªå·±çš„SQLè¯­å¥é‡æ–°æŸ¥è¯¢ï¼›
<span class="hljs-bullet">6.</span> ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨å’Œè¯¦ç»†åˆ†ææŠ¥å‘Šï¼ŒæŠ¥å‘Šä¸­å¿…é¡»åŒ…å«ä½ æ‰§è¡ŒæŸ¥è¯¢çš„SQLè¯­å¥
<span class="hljs-bullet">7.</span> è°ƒç”¨é£ä¹¦ç”Ÿæˆæ–‡æ¡£å·¥å…·ä»¥Markdownæ ¼å¼åˆ›å»ºé£ä¹¦æ–‡æ¡£ï¼Œè¿”å›æœ€ç»ˆçš„é£ä¹¦æ–‡æ¡£åœ°å€


<span class="hljs-section">## OutputFormat:</span>
<span class="hljs-bullet">-</span> åˆ†ææŠ¥å‘Šï¼ŒåŒ…å«å®Œæ•´çš„åˆ†æè¿‡ç¨‹å’Œå…³é”®å‘ç°ï¼Œåˆ›å»ºæ–°çš„é£ä¹¦æ–‡æ¡£å¹¶ä¿å­˜åœ¨å…¶ä¸­
<span class="hljs-bullet">-</span> å¯è§†åŒ–å›¾è¡¨ä»¥åµŒå…¥å¼é“¾æ¥å½¢å¼å‘ˆç°ï¼Œç¡®ä¿æ¸…æ™°å±•ç¤ºæ•°æ®è¶‹åŠ¿å’Œåˆ†å¸ƒ
<span class="hljs-bullet">-</span> æŠ¥å‘Šç»“æ„åŒ…å«æ‰§è¡Œæ‘˜è¦ã€åˆ†ææ–¹æ³•ã€æ•°æ®ç»“æœã€ä¸šåŠ¡æ´å¯Ÿå’Œåç»­å»ºè®®


<span class="hljs-section">## Suggestions:</span>
<span class="hljs-bullet">-</span> å»ºç«‹ç³»ç»ŸåŒ–çš„è¡¨ç»“æ„åˆ†ææ¡†æ¶ï¼Œæé«˜æ•°æ®å…³ç³»è¯†åˆ«çš„æ•ˆç‡å’Œå‡†ç¡®æ€§
<span class="hljs-bullet">-</span> æŒç»­å­¦ä¹ Grafana-SQLæœ€æ–°è¯­æ³•ç‰¹æ€§ï¼Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½å’Œèµ„æºæ¶ˆè€—
<span class="hljs-bullet">-</span> åŸ¹å…»å¤šç»´åº¦æ•°æ®éªŒè¯ä¹ æƒ¯ï¼Œç¡®ä¿åˆ†æç»“æœçš„å¯é æ€§å’Œä¸šåŠ¡ä»·å€¼
<span class="hljs-bullet">-</span> æ·±å…¥ç†è§£ä¸šåŠ¡åœºæ™¯ï¼Œæå‡ä»æ•°æ®åˆ°æ´å¯Ÿçš„è½¬åŒ–èƒ½åŠ›å’Œå†³ç­–æ”¯æŒæ°´å¹³
<span class="hljs-bullet">-</span> å®šæœŸå¤ç›˜åˆ†ææ¡ˆä¾‹ï¼Œæ€»ç»“ç»éªŒæ•™è®­ï¼ŒæŒç»­æ”¹è¿›åˆ†ææ–¹æ³•è®ºå’Œå·¥ä½œæµç¨‹


<span class="hljs-section">## å·¥å…·æè¿°</span>
<span class="hljs-bullet">-</span> query<span class="hljs-emphasis">_grafana:ä½¿ç”¨Grafanaä¸­çš„SQLæŸ¥è¯¢grafanaæ•°æ®
æ³¨æ„ï¼š
      1. å½“formatä¸ºtime_</span>seriesæ—¶è¡¨ç¤ºæŸ¥è¯¢æ—¶é—´åºåˆ—æ•°æ®ï¼ŒSELECTçš„ç¬¬ä¸€ä¸ªå­—æ®µå¿…é¡»æ˜¯$<span class="hljs-strong">__timeGroupAlias(timestamp, interval)ï¼Œè¡¨ç¤ºæ—¶é—´åˆ†ç»„åˆ«åã€‚æ—¶é—´é—´éš”intervalMséœ€è¦ä¸rawSqlä¸­çš„$__</span>timeGroup(timestamp, interval)ä¿æŒå¯¹åº”ã€‚æ¯”å¦‚intervalMs=86400000Lè¡¨ç¤º1å¤©,rawSqlä¸­$<span class="hljs-strong">__timeGroup(timestamp, 1d)ä¹Ÿéœ€è¦ä¿æŒä¸€è‡´ã€‚
      2. å½“formatä¸ºtableæ—¶è¡¨ç¤ºæŸ¥è¯¢è¡¨æ ¼æ•°æ®ï¼ŒSELECTçš„å­—æ®µå¯ä»¥ä»»æ„ï¼ŒintervalMså‚æ•°ä¼ null
      3. æ—¶é—´èŒƒå›´ä¸ºé—­åŒºé—´ï¼Œå³åŒ…å«å¼€å§‹æ—¶é—´fromå’Œç»“æŸæ—¶é—´to,æ ¼å¼ä¸ºyyyy-MM-dd HH:mm:ssã€‚
å‚æ•°ç¤ºä¾‹ï¼š{
    "from": "2025-11-16 00:00:00",
    "to": "2025-11-16 23:59:59",
    "format": "table",
    "intervalMs": null,
    "rawSql": "SELECT region, COUNT(<span class="hljs-emphasis">*) as user_count FROM intl_xxxxxxx WHERE $__timeFilter(timestamp) GROUP BY region ORDER BY user_count DESC"
  }


## Initialization
ä½œä¸ºæ•°æ®åˆ†æä¸“å®¶ï¼Œä½ å¿…é¡»éµå®ˆConstrainsï¼Œä½¿ç”¨é»˜è®¤ä¸­æ–‡ä¸ç”¨æˆ·äº¤æµã€‚
</span></span></code></pre>
<p>æœ€ç»ˆï¼Œåœ¨ Trae ä¸­æ„å»ºäº†ä¸€ä¸ªå®Œæ•´OBS Agentã€‚</p>
<ul>
<li>æ·»åŠ æ™ºèƒ½ä½“ï¼šOBSå¤§ç›˜åˆ†æ</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2209be432b4045549921a04fc0dd830e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=oOAQgJDhTkLHBQxL4hS%2FgN%2FBTlk%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-6">å››ã€æˆæœ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea2595f4300d4ed795136f67e99929e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=4UQbWkBYfySYKy1jUNEMO7ee8Fc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2c9329380274ae3b535a93437222263~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=4qSpa4DM8uT5qGKxVEKPKuPuBac%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e1def6b68a0455d8e7d3a496cef3b8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=9BbuxEVfIBPH1qPE9yDef%2B%2Fgq6Q%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f7bf0a31c604be7aedc62757ed09ed9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=JXtsLE6snnIqrlO35F1bbhCzf8E%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>æœ€ç»ˆç”Ÿæˆçš„æŠ¥å‘Šï¼ˆæˆªå–éƒ¨åˆ†ï¼‰ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c374ec201cf46a59e9bbad20a12a5ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=%2FuDakHatZoMP6qVK8f3lr6C6oAQ%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89cc37e36c3e4811a2eb1c64cb1258e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=FHrg5EDXZ5x%2FmAv3Ihj6DTsnIbE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c8ed688f0f34673a565beb6dcc4a036~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766029374&amp;x-signature=q7wtrNRQaFM6hltQzs6hWAJOMuc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h2 data-id="heading-7">äº”ã€æ€»ç»“</h2>
<p>AIæ—¶ä»£æ¥ä¸´ï¼Œæˆ‘ä»¬åº”è¯¥è¦å–„äºå‘ç°å½“å‰ç³»ç»Ÿä¸­çš„å“ªäº›éƒ¨åˆ†èƒ½å¤Ÿç»“åˆAIæ¥è¿›è¡Œæå‡ï¼Œç§¯ææ‹¥æŠ±å˜åŒ–ï¼Œæœ‰äº†æƒ³æ³•å°±å»åšï¼Œè¾¹åšè¾¹æƒ³è¾¹è§£å†³é—®é¢˜ï¼Œæ°¸è¿œä¸»åŠ¨å‘å‰ä¸€æ­¥ã€‚</p>
<p>æœ¬æ–‡ç« åªæ˜¯è®°å½•äº†ä»äº§ç”Ÿæƒ³æ³•åˆ°æ„å»ºMVPéªŒè¯æƒ³æ³•çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œè¿™ä¸­é—´å½“ç„¶æœ‰å¾ˆå¤šå¯ä»¥ç»§ç»­ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæˆ‘æœ¬äººç›®å‰æœ‰ä»¥ä¸‹å‡ ä¸ªæƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶ç§¯æè¯„è®ºï¼Œè´¡çŒ®è‡ªå·±çš„ç‹¬åˆ°è§è§£ã€‚</p>
<ul>
<li>æ¥å…¥æ•°æ®åº“æ•°æ®ï¼Œé€šè¿‡åŠ¨æ€ç›‘å¬Binlogçš„æ–¹å¼æ¥è¯†åˆ«å„è¡¨ä¹‹é—´çš„è”ç³»ï¼Œæ¯”å¦‚select è¯­å¥çš„joinï¼Œå¹¶å°†è¿™ç§å…³ç³»ä¿å­˜åˆ°Neo4j è¿™ç§å›¾å‘é‡æ•°æ®åº“ä¸­æ¥å®ç°è¡¨ç»“æ„çš„ RAGã€‚</li>
<li>åŸºäºLangGraph æˆ– SpringAI Alibaba æ„å»ºMulti-Agent Systemï¼Œç»†åŒ–å„Agentçš„èŒè´£ï¼Œç²¾ç‚¼å„Agentçš„Context æ„æˆï¼Œä»¥è·å¾—æ›´å¥½çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼šåè°ƒè€… Agentã€è¡¨ç»“æ„æœç´¢ Agentã€SQL ç”Ÿæˆ Agentã€åˆ†ææŠ¥å‘Š Agentç­‰ç­‰ã€‚</li>
<li>æ¥å…¥é£ä¹¦æœºå™¨äººï¼Œæˆ–è€…ä½¿ç”¨AI Codingå·¥å…·ç”Ÿæˆä¸€ä¸ªå‰ç«¯é¡µé¢ã€‚ä½¿å¾—ä¸€äº›éæŠ€æœ¯äººå‘˜ï¼Œä¾‹å¦‚äº§å“å’Œè¿è¥ä¹Ÿèƒ½å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-8">å¾€æœŸå›é¡¾</h3>
<ol>
<li>
<p>æ•°æ®åº“AIæ–¹å‘æ¢ç´¢-MCPåŸç†è§£æ&amp;DBæ–¹å‘å®æˆ˜ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>é¡¹ç›®æ€§èƒ½ä¼˜åŒ–å®è·µï¼šæ·±å…¥FMPç®—æ³•åŸç†æ¢ç´¢ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>Dragonboatç»Ÿä¸€å­˜å‚¨LogDBå®ç°åˆ†æï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹</p>
</li>
<li>
<p>ä¸€æ–‡è§£æå¾—ç‰©è‡ªå»º Redis æœ€æ–°æŠ€æœ¯æ¼”è¿›</p>
</li>
</ol>
<h3 data-id="heading-9">æ–‡ /Neeson</h3>
<p>å…³æ³¨å¾—ç‰©æŠ€æœ¯ï¼Œæ¯å‘¨æ›´æ–°æŠ€æœ¯å¹²è´§</p>
<p>è¦æ˜¯è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿è¯„è®ºè½¬å‘ç‚¹èµï½</p>
<p>æœªç»å¾—ç‰©æŠ€æœ¯è®¸å¯ä¸¥ç¦è½¬è½½ï¼Œå¦åˆ™ä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äººè„¸è¯†åˆ«é¡¹ç›®å¦‚ä½•åœ¨Spring Booté¡¹ç›®ä¸­å¦‚ä½•å»ºç«‹æ•°æ®åº“å’Œç®¡ç†]]></title>    <link>https://juejin.cn/post/7582136489770762250</link>    <guid>https://juejin.cn/post/7582136489770762250</guid>    <pubDate>2025-12-11T05:24:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7582136489770762250" data-draft-id="7582136489770729482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äººè„¸è¯†åˆ«é¡¹ç›®å¦‚ä½•åœ¨Spring Booté¡¹ç›®ä¸­å¦‚ä½•å»ºç«‹æ•°æ®åº“å’Œç®¡ç†"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“,MySQL"/> <meta itemprop="datePublished" content="2025-12-11T05:24:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿›å‡»çš„ä¸¸å­"/> <meta itemprop="url" content="https://juejin.cn/user/2506542243120680"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äººè„¸è¯†åˆ«é¡¹ç›®å¦‚ä½•åœ¨Spring Booté¡¹ç›®ä¸­å¦‚ä½•å»ºç«‹æ•°æ®åº“å’Œç®¡ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2506542243120680/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿›å‡»çš„ä¸¸å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-11T05:24:49.000Z" title="Thu Dec 11 2025 05:24:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®²è®²åœ¨Spring Booté¡¹ç›®ä¸­å¦‚ä½•å»ºç«‹æ•°æ®åº“å’Œç®¡ç†</h2>
<p>éšç€æ™ºèƒ½é—¨ç¦ã€è€ƒå‹¤ã€è®¿å®¢ç³»ç»Ÿçš„æ™®åŠï¼Œ<strong>äººè„¸è¯†åˆ«æ¨¡å—</strong>å·²æˆä¸ºä¼—å¤šé¡¹ç›®çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚åœ¨é«˜æ€§èƒ½çš„äººè„¸è¯†åˆ«ç³»ç»Ÿä¸­ï¼Œæ•°æ®åº“ä¸»è¦è´Ÿè´£<strong>æŒä¹…åŒ–å­˜å‚¨</strong>ï¼Œè€Œè¯†åˆ«æ¯”å¯¹æ“ä½œåº”å…¨éƒ¨åœ¨<strong>å†…å­˜ä¸­å®Œæˆ</strong>ï¼Œä»¥ä¿è¯æ¯«ç§’çº§å“åº”å’Œé«˜å¹¶å‘æ€§èƒ½ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨ <strong>Spring Boot é¡¹ç›®</strong>ä¸­å»ºç«‹ä¸€ä¸ªé«˜æ•ˆã€å¯æ‰©å±•çš„äººè„¸è¯†åˆ«æ•°æ®åº“ï¼Œå¹¶å®ç°åŸºç¡€çš„äººè„¸æ•°æ®ç®¡ç†åŠŸèƒ½ï¼ŒåŒæ—¶ç»“åˆ MySQLã€Redis ä¸å†…å­˜ä¼˜åŒ–ç­–ç•¥ï¼Œæå‡ç³»ç»Ÿæ•´ä½“æ€§èƒ½ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€åŸºç¡€å…¥é—¨ä»‹ç»</h2>
<p>è¿™é‡Œä¸ºäº†èƒ½è®©å¤§å®¶å¯¹SDKç»“åˆæ•°æ®åº“æœ‰ä¸ªåˆæ­¥äº†è§£ï¼Œæˆ‘ä»¬å…ˆåˆ©ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fai.arcsoft.com.cn%2F%3Futm_source%3DJuejin%26%26utm_medium%3Dshentao" target="_blank" title="https://ai.arcsoft.com.cn/?utm_source=Juejin&amp;&amp;utm_medium=shentao" ref="nofollow noopener noreferrer">è™¹è½¯äººè„¸è¯†åˆ«SDK</a> å¯¹åº”çš„<strong>ArcSoftFaceDemo</strong> ï¼Œè®²è§£ä¸‹æ­¤Demoæ˜¯å¦‚ä½•å¯¹äººè„¸æ•°æ®åº“è¿›è¡Œç®¡ç†çš„ï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®åœ°æ³¨å†Œåˆ° <strong>ArcFace SDK</strong> çš„å¼•æ“ä¸­ï¼Œä»¥æ”¯æŒåç»­çš„äººè„¸æ£€æµ‹å’Œè¯†åˆ«åŠŸèƒ½ã€‚ä¸‹é¢ç»“åˆä»£ç åˆ†ææ•´ä¸ªç®¡ç†æµç¨‹ã€‚</p>
<h3 data-id="heading-2">1ã€æ•°æ®åº“ç¯å¢ƒå‡†å¤‡</h3>
<p>åœ¨å¼€å§‹ä½¿ç”¨ ArcsoftFaceDemo å‰ï¼Œéœ€è¦å…ˆå‡†å¤‡å¥½ MySQL æ•°æ®åº“ç¯å¢ƒã€‚ä¸ºäº†å¿«é€Ÿæ­å»ºï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <strong>Docker</strong> å¯åŠ¨ä¸€ä¸ªæ•°æ®åº“å®ä¾‹ã€‚</p>
<h5 data-id="heading-3">ä½¿ç”¨ Docker å¯åŠ¨ MySQL 8.0</h5>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ MySQL å®¹å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name arcsoft_mysql \
  -e MYSQL_ROOT_PASSWORD=Root123 \
  -e MYSQL_DATABASE=arcsoft_face \
  -p 3306:3306 \
  registry.cn-hangzhou.aliyuncs.com/china-images/mysql:8.0
</code></pre>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>--name arcsoft_mysql</code>ï¼šå®¹å™¨åç§°ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</li>
<li><code>MYSQL_ROOT_PASSWORD=Root123</code>ï¼šroot ç”¨æˆ·å¯†ç ã€‚</li>
<li><code>MYSQL_DATABASE=arcsoft_face</code>ï¼šåˆå§‹åŒ–åˆ›å»ºæ•°æ®åº“ <code>arcsoft_face</code>ã€‚</li>
<li><code>-p 3306:3306</code>ï¼šå°†å®¹å™¨ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œæ–¹ä¾¿ç¨‹åºè¿æ¥ã€‚</li>
<li><code>registry.cn-hangzhou.aliyuncs.com/china-images/mysql:8.0</code>ï¼šæŒ‡å®šä½¿ç”¨ MySQL 8.0 é˜¿é‡Œäº‘é•œåƒï¼Œå¦‚æœæœ‰å¤–ç½‘ç¯å¢ƒï¼Œå¯ç›´æ¥ä½¿ç”¨mysql:8.0ä»£æ›¿ã€‚</li>
</ul>
<blockquote>
<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤š Docker ä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥å‚è€ƒå…¶ä»– Docker å…¥é—¨æ–‡æ¡£æˆ–æ•™ç¨‹ã€‚ä¹Ÿå¯ç›´æ¥åœ¨ç‰©ç†æ“ä½œç³»ç»Ÿä¸Šå®‰è£…MySQL</p>
</blockquote>
<h5 data-id="heading-4">æ•°æ®åº“è¿æ¥ä¿¡æ¯</h5>
<p>å¯åŠ¨å®Œæˆåï¼Œä½ å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¿¡æ¯è¿æ¥æ•°æ®åº“ï¼š</p>
<ul>
<li><strong>URL</strong>ï¼š<code>ç‰©ç†æœºIP:3306</code></li>
<li><strong>ç”¨æˆ·å</strong>ï¼š<code>root</code></li>
<li><strong>å¯†ç </strong>ï¼š<code>Root123</code></li>
<li><strong>æ•°æ®åº“</strong>ï¼š<code>arcsoft_face</code></li>
</ul>
<p>è¿™æ ·å°±å®Œæˆäº†æ•°æ®åº“ç¯å¢ƒçš„æ­å»ºï¼Œä¸º ArcsoftFaceDemo çš„äººè„¸åº“ç®¡ç†åšå¥½äº†åŸºç¡€å‡†å¤‡ã€‚</p>
<h3 data-id="heading-5">2ã€å·¥ç¨‹å¯¼å…¥ä¸æ•°æ®åº“é…ç½®</h3>
<p>åœ¨å®Œæˆæ•°æ®åº“ç¯å¢ƒå‡†å¤‡åï¼Œä¸‹ä¸€æ­¥æ˜¯å¯¼å…¥ <strong>ArcSoftFaceDemo</strong> å·¥ç¨‹ï¼Œå¹¶å°†é»˜è®¤æ•°æ®åº“é…ç½®æ”¹ä¸º MySQLã€‚</p>
<h5 data-id="heading-6">å¯¼å…¥å·¥ç¨‹</h5>
<ol>
<li>ä» ArcSoft <a href="https://link.juejin.cn?target=https%3A%2F%2Fai.arcsoft.com.cn%2F%3Futm_source%3DJuejin%26%26utm_medium%3Dshentao" target="_blank" title="https://ai.arcsoft.com.cn/?utm_source=Juejin&amp;&amp;utm_medium=shentao" ref="nofollow noopener noreferrer">å®˜ç½‘</a>ä¸‹è½½ <strong>ArcSoftFaceDemo</strong> å·¥ç¨‹å‹ç¼©åŒ…ã€‚</li>
<li>è§£å‹åï¼Œç”¨ <strong>IntelliJ IDEA</strong> æ‰“å¼€å·¥ç¨‹ç›®å½•ã€‚</li>
</ol>
<h5 data-id="heading-7">ä¿®æ”¹æ•°æ®åº“é…ç½®</h5>
<p>å·¥ç¨‹é»˜è®¤ä½¿ç”¨çš„æ˜¯ <strong>H2 å†…å­˜æ•°æ®åº“</strong>ï¼Œé€‚åˆå¿«é€Ÿæ¼”ç¤ºå’Œæµ‹è¯•ã€‚ä½†åœ¨æ­£å¼ç¯å¢ƒä¸­ï¼Œå»ºè®®åˆ‡æ¢åˆ° <strong>MySQL</strong> æˆ–å…¶ä»–æŒä¹…åŒ–æ•°æ®åº“ã€‚</p>
<p>æ‰“å¼€ <code>application.properties</code> æ–‡ä»¶ï¼Œæ‰¾åˆ°é»˜è®¤é…ç½®ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.datasource.url=jdbc:h2:file:./data/arcdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:db/schema-h2.sql
</code></pre>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>spring.datasource.url</code>ï¼šH2 æ•°æ®åº“æ–‡ä»¶è·¯å¾„ã€‚</li>
<li><code>spring.datasource.driver-class-name</code>ï¼šH2 æ•°æ®åº“é©±åŠ¨ã€‚</li>
<li><code>spring.datasource.username</code> / <code>spring.datasource.password</code>ï¼šæ•°æ®åº“è´¦å·å¯†ç ã€‚</li>
<li><code>spring.h2.console.*</code>ï¼šH2 Web æ§åˆ¶å°ç›¸å…³é…ç½®ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚</li>
<li><code>spring.sql.init.*</code>ï¼šåˆå§‹åŒ– SQL æ–‡ä»¶è·¯å¾„ï¼Œç”¨äºåˆ›å»ºç¤ºä¾‹è¡¨ç»“æ„ã€‚</li>
</ul>
<h5 data-id="heading-8">H2åˆ‡æ¢ä¸ºMySQL</h5>
<p>åœ¨æ­£å¼ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†é»˜è®¤ H2 é…ç½®æ”¹ä¸º MySQLã€‚æ‰“å¼€ <code>application.properties</code>ï¼Œå°†æ•°æ®åº“ç›¸å…³é…ç½®ä¿®æ”¹ä¸º MySQL è¿æ¥ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.datasource.url=jdbc:mysql://localhost:3306/arcsoft_face?useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=root
spring.datasource.password=Root123
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:db/schema-mysql.sql
</code></pre>
<p><strong>è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>spring.datasource.url</code>ï¼šMySQL è¿æ¥ URLï¼ŒåŒ…å«æ•°æ®åº“å <code>arcsoft_face</code>ï¼Œå­—ç¬¦é›†ä¸æ—¶åŒºè®¾ç½®ã€‚<code>localhost</code>åœ°å€æ ¹æ®å®é™…æ•°æ®åº“IPåœ°å€è®¾ç½®</li>
<li><code>spring.datasource.driver-class-name</code>ï¼šMySQL é©±åŠ¨ç±»ã€‚</li>
<li><code>spring.datasource.username</code> / <code>spring.datasource.password</code>ï¼šMySQL è´¦å·å¯†ç ï¼Œå¯¹åº” Docker å¯åŠ¨ MySQL æ—¶è®¾ç½®çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</li>
<li><code>spring.sql.init.*</code>ï¼šåˆå§‹åŒ– SQL æ–‡ä»¶è·¯å¾„ï¼Œç”¨äºåˆ›å»ºç”¨æˆ·è¡¨ç»“æ„ï¼ˆä¸ H2 ä¸åŒï¼Œéœ€è¦ä½¿ç”¨ MySQL ç‰ˆæœ¬ SQLï¼‰ã€‚</li>
</ul>
<hr/>
<h5 data-id="heading-9">éªŒè¯æ•°æ®åº“è¿æ¥</h5>
<ol>
<li>å¯åŠ¨ ArcSoftFaceDemo å·¥ç¨‹ã€‚</li>
<li>æ£€æŸ¥å¯åŠ¨æ—¥å¿—ï¼Œç¡®è®¤æ•°æ®åº“è¿æ¥æˆåŠŸï¼š</li>
</ol>
<pre><code class="hljs language-erlang" lang="erlang">HikariPool-<span class="hljs-number">1</span> - Starting...
HikariPool-<span class="hljs-number">1</span> - Start completed.
</code></pre>
<p>æ³¨æ„ï¼šä½¿ç”¨ MySQL å®¢æˆ·ç«¯ï¼ˆå¦‚ <code>mysql</code> å‘½ä»¤è¡Œæˆ– Navicatç­‰ï¼‰è¿æ¥æ•°æ®åº“ï¼Œç¡®è®¤ <code>arcsoft_face</code> æ•°æ®åº“å·²åˆ›å»ºæˆåŠŸã€‚</p>
<hr/>
<h5 data-id="heading-10">åˆ›å»ºç”¨æˆ·è¡¨</h5>
<p>å¦‚æœ MySQL æ•°æ®åº“ä¸­æ²¡æœ‰è¡¨ï¼Œéœ€è¦æ‰§è¡Œåˆå§‹åŒ– SQL åˆ›å»º <code>user_info</code> è¡¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> user_info (
    id <span class="hljs-type">BIGINT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">60</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    extra_info <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">500</span>),
    face_feature <span class="hljs-type">BLOB</span>,
    image_url <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">120</span>),
    create_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
    <span class="hljs-keyword">UNIQUE</span> KEY user_info_name_uindex (name)
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4;

</code></pre>
<p><strong>å…³é”®å­—æ®µè¯´æ˜ï¼š</strong></p>
<ul>
<li><code>id</code>ï¼šç”¨æˆ·å”¯ä¸€æ ‡è¯†ã€‚</li>
<li><code>name</code>ï¼šç”¨æˆ·åã€‚</li>
<li><code>face_feature</code>ï¼šArcSoft SDK æå–çš„äººè„¸ç‰¹å¾äºŒè¿›åˆ¶æ•°æ®ã€‚è¿™é‡Œä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡æ¥ï¼Œä½¿ç”¨textç±»å‹ï¼Œå­˜å‚¨base64ç¼–ç åçš„å­—ç¬¦ä¸²æ•°æ®</li>
<li><code>image_url</code>ï¼šæ³¨å†Œè¯å­˜å‚¨åœ°å€ã€‚</li>
</ul>
<p>è¿™æ ·å°±å®Œæˆäº† MySQL æ•°æ®åº“æ¥å…¥ ArcSoftFaceDemo çš„å‡†å¤‡å·¥ä½œã€‚</p>
<h3 data-id="heading-11">3ã€äººè„¸æ³¨å†Œè¿‡ç¨‹è¯´æ˜ï¼ˆFaceService.javaï¼‰</h3>
<p><code>FaceService</code> æ˜¯æ•´ä¸ªç³»ç»Ÿçš„äººè„¸æ³¨å†Œä¸ç®¡ç†æ ¸å¿ƒé€»è¾‘ï¼Œè´Ÿè´£ï¼š</p>
<ul>
<li>ä»æ•°æ®åº“è¯»å–ç”¨æˆ·äººè„¸ä¿¡æ¯</li>
<li>æ³¨å†Œ/æ›´æ–°äººè„¸åˆ° ArcFace SDK å†…å­˜å¼•æ“</li>
<li>åˆ é™¤äººè„¸</li>
<li>ç³»ç»Ÿå¯åŠ¨æ—¶æ‰¹é‡åŠ è½½äººè„¸</li>
<li>æ”¯æŒä»æ•°æ®åº“ã€æœ¬åœ°å›¾ç‰‡ã€classpath ç›®å½•ä¸‰ç§æ¥æºåˆå§‹åŒ–</li>
</ul>
<p>ä¸‹é¢è¯¦ç»†è¯´æ˜å„åŠŸèƒ½æ¨¡å—çš„é€»è¾‘ã€‚</p>
<h4 data-id="heading-12">äººè„¸æ³¨å†Œæ ¸å¿ƒæ–¹æ³•ï¼šaddUser</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addUser</span><span class="hljs-params">(String name, <span class="hljs-type">byte</span>[] faceFeature)</span> {
        <span class="hljs-type">UserInfo</span> <span class="hljs-variable">userInfo</span> <span class="hljs-operator">=</span> userInfoMapper.selectOne(Wrappers.&lt;UserInfo&gt;lambdaQuery().eq(UserInfo::getName, name));
        <span class="hljs-keyword">if</span> (userInfo == <span class="hljs-literal">null</span>) {
            <span class="hljs-type">UserInfo</span> <span class="hljs-variable">userInfoInsert</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserInfo</span>();
            userInfoInsert.setId((<span class="hljs-type">int</span>) (System.currentTimeMillis() % <span class="hljs-number">1_000_000_000</span>)); <span class="hljs-comment">//å¦‚æœæ˜¯MySQLæ•°æ®åº“ï¼Œå¯å»æ‰è¿™ä¸ªï¼Œåˆ©ç”¨æ•°æ®åº“è‡ªå¢é•¿idæ¥ç”Ÿæˆ</span>
            userInfoInsert.setName(name);
            userInfoInsert.setFaceFeature(faceFeature);
            userInfoMapper.insert(userInfoInsert);
            faceEngineService.registerFaceFeature2Engine(userInfoInsert.getId(), name, faceFeature);

        } <span class="hljs-keyword">else</span> {
            <span class="hljs-type">UserInfo</span> <span class="hljs-variable">userInfoUpdate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserInfo</span>();
            userInfoUpdate.setId(userInfo.getId());
            userInfoUpdate.setName(name);
            userInfoUpdate.setFaceFeature(faceFeature);
            userInfoMapper.updateById(userInfoUpdate);
            faceEngineService.removeFaceFeature2Engine(userInfo.getId());
            faceEngineService.registerFaceFeature2Engine(userInfo.getId(), name, faceFeature);
        }
    }
</code></pre>
<h5 data-id="heading-13">åŠŸèƒ½è¯´æ˜</h5>
<p><code>addUser</code> æ˜¯ ArcSoftFaceDemo é¡¹ç›®ä¸­æœ€æ ¸å¿ƒçš„äººè„¸æ³¨å†Œæ–¹æ³•ï¼Œä¸»è¦åŠŸèƒ½æ˜¯ï¼š</p>
<ul>
<li>å°†è¾“å…¥çš„äººè„¸ç‰¹å¾ï¼ˆbyte[]ï¼‰å†™å…¥æ•°æ®åº“</li>
<li>å°†äººè„¸ç‰¹å¾æ³¨å†Œåˆ° ArcFace å¼•æ“çš„å†…å­˜ç‰¹å¾åº“ï¼ˆå†…å­˜ä¸­çš„ç´¢å¼•ç»“æ„ï¼‰</li>
<li>åŒæ­¥ç»´æŠ¤ä¸¤ç«¯çš„æ•°æ®ä¸€è‡´æ€§ï¼ˆæ•°æ®åº“ â†” è¯†åˆ«å¼•æ“ï¼‰</li>
</ul>
<p>ArcFace SDK çš„è¯†åˆ«èƒ½åŠ›ä¾èµ–äº<strong>å†…å­˜ä¸­çš„ç‰¹å¾åº“</strong>ï¼Œå› æ­¤æ¯æ¬¡æ³¨å†Œã€æ›´æ–°ã€åˆ é™¤éƒ½å¿…é¡»ä¿æŒæ•°æ®åº“ä¸ SDK å†…å­˜åº“ä¸€è‡´ã€‚åœ¨åšæ–°å¢çš„æ—¶å€™ï¼ŒåŒæ­¥ä¸¤è¾¹éœ€åŒæ—¶æ–°å¢ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<p>è¿™é‡Œæ³¨å†Œå­˜å‚¨çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥åŒæ—¶å¸¦ä¸€äº›ä¸šåŠ¡ä¸Šçš„ä¿¡æ¯ï¼Œå¦‚äººå‘˜idï¼Œäººå‘˜å§“åï¼Œäººå‘˜æ³¨å†Œç…§å­˜æ”¾åœ°å€ç­‰ã€‚è¿™äº›ä¿¡æ¯ï¼Œ<strong>åœ¨æ•°æ®åº“ä¸­å¯ä»¥ä»¥å­—æ®µçš„å½¢å¼è¿›è¡Œå­˜å‚¨å½’æ¡£</strong>ï¼Œå¯å‚è€ƒä¸Šé¢<code>user_info</code>è¡¨è¿›è¡Œå­—æ®µæ‰©å±•ä¼˜åŒ–ã€‚å¦‚æœæƒ³é€šè¿‡SDKçš„<code>searchFaceFeature</code>æ¥å£è·å–åˆ°è¿™äº›é¢å¤–ä¿¡æ¯ï¼Œåœ¨<code>registerFaceFeature</code>æ¥å£ä¸­æä¾›äº†<code>faceTag</code>çš„ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œç”¨äºå­˜æ”¾ä¸šåŠ¡æ•°æ®ï¼Œå¯ä»¥æŠŠè¿™äº›ä¿¡æ¯<strong>ä»¥JSONå­—ç¬¦ä¸²å½¢å¼å­˜æ”¾åˆ°<code>faceTag</code>ä¸­å»</strong>ï¼Œå½“ç„¶ä¹Ÿå¯é€šè¿‡searchIdï¼Œå†æŸ¥è¯¢æ•°æ®åº“çš„æ–¹å¼ï¼ŒæŠŠå¯¹åº”çš„äººå‘˜ä¿¡æ¯æŸ¥è¯¢å‡ºæ¥</p>
<p>ArcFace SDK æå–çš„äººè„¸ç‰¹å¾æ˜¯ä¸€ä¸ª <strong>byte[] æ•°ç»„</strong>ã€‚5.0 çš„ä¸­æ¨¡å‹ç‰¹å¾é•¿åº¦åœ¨ 2056å­—èŠ‚ï¼Œå¤§æ¨¡å‹ç‰¹å¾ç‰¹å¾é•¿åº¦3080å­—èŠ‚ï¼Œè¿™é‡Œåœ¨åšæ•°æ®åº“å­—æ®µå¤§å°çš„æ—¶å€™éœ€è¦å…³æ³¨ä¸‹</p>
<p><strong>ä¸¤ç§å­˜å‚¨æ–¹å¼ï¼šSDKçš„ç‰¹å¾ç±»å‹æ˜¯byte[]æ•°ç»„ç±»å‹ï¼Œå­˜å‚¨åˆ°æ•°æ®åº“æ–¹å¼ï¼š</strong></p>
<p>1ã€å¯ä»¥ç›´æ¥ä½¿ç”¨BLOBç±»å‹ï¼Œä¸€èˆ¬æ¨èç”¨<strong>BLOBç±»å‹</strong>å­˜å‚¨ï¼Œå¯ä»¥å‡å°‘ç¼–è§£ç å¸¦æ¥çš„æ€§èƒ½æŸå¤±</p>
<p>2ã€byte[]æ•°ç»„è½¬æˆbase64å­—ç¬¦ä¸²ï¼Œæ•°æ®åº“ç”¨<strong>TEXTç±»å‹</strong>è¿›è¡Œå­˜å‚¨ï¼Œå¦‚æœæ¶‰åŠåˆ°ç½‘ç»œä¼ è¾“ï¼Œå¯ä½¿ç”¨Base64å­—ç¬¦ä¸²</p>
<h4 data-id="heading-14">åˆ é™¤ç”¨æˆ· removeUser</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeUser</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-type">UserInfo</span> <span class="hljs-variable">userInfo</span> <span class="hljs-operator">=</span> userInfoMapper.selectOne(Wrappers.&lt;UserInfo&gt;lambdaQuery().eq(UserInfo::getName, name));
        <span class="hljs-keyword">if</span> (userInfo != <span class="hljs-literal">null</span>) {
            faceEngineService.removeFaceFeature2Engine(userInfo.getId());
            userInfoMapper.deleteById(userInfo.getId());
        }
    }
</code></pre>
<ol>
<li>æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·</li>
<li>ä» SDK å†…å­˜å¼•æ“ç§»é™¤äººè„¸</li>
<li>ä»æ•°æ®åº“åˆ é™¤è®°å½•</li>
</ol>
<h4 data-id="heading-15">ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½äººè„¸</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadImage2Engine</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">"true"</span>.equals(faceImageClear)) {
            removeAllUser();
            initSystemFace();
            <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(testImagePath);
            <span class="hljs-keyword">if</span> (file.isDirectory()) {
                File[] files = file.listFiles();
                log.info(<span class="hljs-string">"å¼€å§‹åŠ è½½æœ¬åœ°äººè„¸å›¾ç‰‡åˆ°å¼•æ“ä¸­"</span>);
                <span class="hljs-keyword">for</span> (File imageFile : files) {
                    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> imageFile.getName();
                    <span class="hljs-keyword">if</span> (name.endsWith(<span class="hljs-string">".jpg"</span>) || name.endsWith(<span class="hljs-string">".png"</span>)) {
                        <span class="hljs-type">String</span> <span class="hljs-variable">userName</span> <span class="hljs-operator">=</span> name.substring(<span class="hljs-number">0</span>, name.lastIndexOf(<span class="hljs-string">"."</span>));
                        register(userName, imageFile, <span class="hljs-literal">null</span>);
                    }
                }
                log.info(<span class="hljs-string">"åŠ è½½æœ¬åœ°äººè„¸å›¾ç‰‡åˆ°å¼•æ“ä¸­å®Œæˆ"</span>);
            }
        }<span class="hljs-keyword">else</span> {
            initDatabaseFace2Engine();
        }
    }
</code></pre>
<p>ç³»ç»Ÿå¯åŠ¨åæ‰§è¡Œï¼Œç”¨äºåˆå§‹åŒ–å†…å­˜äººè„¸åº“ï¼Œä¸ºäº†åŠ å¿«è¯†åˆ«é€Ÿåº¦ï¼Œå»ºè®®æ¯æ¬¡å¯åŠ¨æœåŠ¡åï¼Œå°±ç›´æ¥æŠŠæ•°æ®åº“é‡Œçš„äººè„¸æ³¨å†Œä¿¡æ¯æ”¾åˆ°SDKå¼•æ“é‡Œï¼Œå‡å°‘ä¸‹æ¬¡è¯†åˆ«è¯»å–æ•°æ®åº“å¸¦æ¥çš„è€—æ—¶å¢åŠ ã€‚Demoä¸­æä¾›äº†æœ‰ä¸¤ç§æ¨¡å¼ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶çš„<code>register.faceimage.clean</code>è¿›è¡Œåˆ‡æ¢</p>
<p><code>register.faceimage.clean</code>=trueï¼Œæ¯æ¬¡å¯åŠ¨ä¼šæ¸…ç©ºæ•°æ®åº“ï¼Œé‡æ–°åŠ è½½æœ¬åœ°å›¾ç‰‡è¿›è¡Œæ³¨å†Œï¼ŒåŒæ—¶å­˜å‚¨åˆ°æ•°æ®åº“å’ŒSDK</p>
<p><code>register.faceimage.clean</code>=falseï¼Œæ¯æ¬¡å¯åŠ¨ä»æ•°æ®åº“è¯»å–ç‰¹å¾ï¼ŒåŠ è½½åˆ°SDKã€‚Demoä¸ºäº†æµ‹è¯•ï¼Œä¼šåŒæ—¶æŠŠæœ¬åœ°æœ¬æ¬¡æœªæ³¨å†Œçš„å›¾ç‰‡è¿›è¡Œå­˜å‚¨å’Œæ³¨å†Œï¼Œç”Ÿäº§ç¯å¢ƒå¯åªä¿ç•™ä»æ•°æ®åº“è¯»å–åŠ è½½</p>
<h3 data-id="heading-16">4ã€äººè„¸è¯†åˆ«æ–¹å¼</h3>
<p>è¿™é‡Œå†å¦å¤–æä¸€ä¸‹ï¼ŒSDKäººè„¸è¯†åˆ«ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼ŒDemoé‡‡ç”¨çš„æ˜¯ç¬¬2ç§æ–¹æ¡ˆï¼Œä¹Ÿå¯æ ¹æ®å®é™…ä¸šåŠ¡ä½¿ç”¨ç¬¬1ç§æ–¹æ¡ˆ</p>
<h4 data-id="heading-17">â‘ ã€ä½¿ç”¨ Map åˆ—è¡¨ + <code>compareFaceFeature</code> æ¥å£</h4>
<ul>
<li><strong>åŸç†</strong>ï¼šå°†æ³¨å†Œçš„äººè„¸ç‰¹å¾å­˜æ”¾åœ¨ Map æˆ–åˆ—è¡¨ä¸­ï¼Œé€šè¿‡ SDK çš„ <code>compareFaceFeature</code> æ¥å£è¿›è¡Œå¾ªç¯æ¯”å¯¹ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå¯çµæ´»åˆ†ç»„ç®¡ç†äººè„¸åº“ï¼›æ”¯æŒå¤šçº¿ç¨‹å¹¶å‘æ¯”å¯¹ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå½“äººè„¸åº“é‡å¤§æ—¶ï¼Œé¢‘ç¹è°ƒç”¨æ¯”å¯¹æ¥å£ä¼šå¢åŠ æ€§èƒ½æŸè€—ã€‚</li>
</ul>
<h4 data-id="heading-18">â‘¡ã€ä½¿ç”¨ SDK æä¾›çš„åŸç”Ÿæ¥å£æ³¨å†Œ</h4>
<ul>
<li><strong>åŸç†</strong>ï¼šåˆ©ç”¨<code>registerFaceFeature</code>ã€<code>removeFaceFeature</code>ã€<code>updateFaceFeature</code>ã€<code>searchFaceFeature</code> ç»„åˆæ¥å£ï¼Œå®ç°å¯¹äººè„¸çš„å¢åˆ æ”¹æŸ¥</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šSDK åŸç”Ÿå®ç°æ¯”å¯¹ï¼Œæ€§èƒ½å¿«ï¼Œèµ„æºæ¶ˆè€—å°‘ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šä¸æ”¯æŒåˆ†ç»„æ¯”å¯¹ï¼›ç³»ç»Ÿé‡å¯åéœ€é‡æ–°æ³¨å†Œç‰¹å¾ï¼›å¤šå¼•æ“å¹¶å‘æ—¶ï¼Œæ¯ä¸ªå¼•æ“çš„äººè„¸åº“éœ€å•ç‹¬ç®¡ç†ï¼Œç»´æŠ¤å¤æ‚ã€‚</li>
</ul>
<p>â€‹	<strong>ä¸ºäº†å®ç°é•¿ä¹…ä¿å­˜å’Œåˆ†å¸ƒå¼å…±äº«ï¼Œäººè„¸ç‰¹å¾éœ€è¿›è¡Œåˆç†å­˜å‚¨</strong></p>
<h3 data-id="heading-19">5ã€äººè„¸å¼•æ“è¯´æ˜ï¼ˆFaceEngineService.javaï¼‰</h3>
<p><code>FaceEngineService</code> æ˜¯äººè„¸SDK çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè´Ÿè´£ï¼š</p>
<ul>
<li>äººè„¸æ£€æµ‹ã€ç‰¹å¾æå–ã€æ´»ä½“æ£€æµ‹ã€å±æ€§æ£€æµ‹ç­‰</li>
<li>äººå‘˜ä¿¡æ¯çš„æ–°å¢ã€åˆ é™¤ã€ä¿®æ”¹ã€äººè„¸æœç´¢</li>
</ul>
<p>ä¸‹é¢è¯¦ç»†è¯´æ˜å„åŠŸèƒ½æ¨¡å—çš„é€»è¾‘ã€‚</p>
<h4 data-id="heading-20">äººå‘˜æ–°å¢ï¼šregisterFaceFeature2Engine</h4>
<pre><code class="hljs language-java" lang="java"> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerFaceFeature2Engine</span><span class="hljs-params">(<span class="hljs-type">int</span> searchId, String faceTag, <span class="hljs-type">byte</span>[] faceFeature)</span> {

        <span class="hljs-type">FaceEngineFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> (FaceEngineFactory) faceEngineComparePool.getFactory();

        List&lt;FaceEngine&gt; allObjects = factory.getAllObjects();
        <span class="hljs-type">FaceFeatureInfo</span> <span class="hljs-variable">faceFeatureInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FaceFeatureInfo</span>();
        faceFeatureInfo.setSearchId(searchId);
        faceFeatureInfo.setFaceTag(faceTag);
        faceFeatureInfo.setFeatureData(faceFeature);
<span class="hljs-comment">//        log.info("Register:"+ JSON.toJSONString(faceFeatureInfo));</span>
        <span class="hljs-keyword">for</span> (FaceEngine allObject : allObjects) {
            <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> allObject.registerFaceFeature(faceFeatureInfo);
        }ã€ã€

    }
</code></pre>
<p><strong>è¿™é‡Œé‡ç‚¹è¯´æ˜ä¸‹ï¼Œå› ä¸ºæˆ‘ä»¬çš„FaceEngineç”¨äº†çº¿ç¨‹æ± ï¼ŒåŒæ—¶åˆå§‹åŒ–äº†å¤šä¸ªå¼•æ“ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å‘SDKæ³¨å†Œäººå‘˜ä¿¡æ¯çš„æ—¶å€™ï¼Œéœ€è¦ç»™æ¯ä¸ªå¼•æ“è¿›è¡Œæ³¨å†Œï¼Œåˆ é™¤åŒç†ã€‚</strong></p>
<h4 data-id="heading-21">äººå‘˜æ–°å¢ï¼šremoveFaceFeature2Engine</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeFaceFeature2Engine</span><span class="hljs-params">(<span class="hljs-type">int</span> searchId)</span> {
        <span class="hljs-type">FaceEngineFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> (FaceEngineFactory) faceEngineComparePool.getFactory();
        List&lt;FaceEngine&gt; allObjects = factory.getAllObjects();
        <span class="hljs-keyword">for</span> (FaceEngine allObject : allObjects) {
            allObject.removeFaceFeature(searchId);
        }
    }
</code></pre>
<p>åˆ é™¤åŒæ³¨å†Œæ¥å£ï¼Œéœ€è¦åŒæ­¥å‘æ‰€æœ‰FaceEngineåº“è¿›è¡Œç§»é™¤æ“ä½œ</p>
<h3 data-id="heading-22">äºŒã€äººè„¸ç‰¹å¾ä¸‰å±‚å­˜å‚¨ä¸åˆ†å¸ƒå¼ç®¡ç†</h3>
<p>ä¸Šé¢å·²ç»ä»‹ç»äº†åŸºæœ¬çš„æ•°æ®åº“æ¥å…¥å’Œä½¿ç”¨ï¼Œé‚£ä¹ˆåœ¨å®é™…äººè„¸è¯†åˆ«åœºæ™¯ä¸‹ï¼Œç³»ç»Ÿçš„æ•°æ®å­˜å‚¨ä¸è¯†åˆ«é€šå¸¸é‡‡ç”¨ä¸‰å±‚è®¾è®¡ï¼š</p>
<ol>
<li><strong>MySQL</strong>ï¼šè´Ÿè´£æŒä¹…åŒ–å­˜å‚¨äººè„¸ç‰¹å¾ä¿¡æ¯ï¼Œå®ç°å¯é çš„é•¿æœŸä¿å­˜ã€‚</li>
<li><strong>Redis</strong>ï¼šç”¨äºå¼‚æ­¥æ›´æ–°ä¸åˆ†å¸ƒå¼ç¼“å­˜ï¼Œå®ç°å¤šæœºå™¨ç¯å¢ƒä¸‹çš„äººè„¸ç‰¹å¾å…±äº«ã€‚</li>
<li><strong>å†…å­˜ï¼ˆConcurrentHashMap / ç‰¹å¾æ± ï¼‰</strong>ï¼šå­˜å‚¨å½“å‰åœ¨çº¿çš„æ´»è·ƒäººè„¸ç‰¹å¾ï¼Œå®ç°æ¯«ç§’çº§è¯†åˆ«ã€‚</li>
</ol>
<p>è¿™ç§è®¾è®¡ä¿è¯äº†ç³»ç»Ÿæ—¢èƒ½æŒä¹…åŒ–å­˜å‚¨ï¼Œåˆèƒ½åœ¨è¯†åˆ«æ—¶è·å¾—æœ€ä½³æ€§èƒ½ã€‚</p>
<p>åœ¨ Spring Boot é¡¹ç›®ä¸­ï¼Œå®ç°äººè„¸ç‰¹å¾çš„ç®¡ç†å¯ä»¥ä»<strong>æ•°æ®åº“å»ºè¡¨ã€æœåŠ¡å±‚åŠ è½½ã€Redisç¼“å­˜ã€ç‰¹å¾æ³¨å†Œä¸æ¯”å¯¹</strong>å‡ ä¸ªæ–¹é¢è¿›è¡Œè¯¦ç»†è®¾è®¡ã€‚</p>
<p>åœ¨å¤šå°è¯†åˆ«æœåŠ¡å™¨éƒ¨ç½²çš„åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œäººè„¸ç‰¹å¾éœ€è¦åœ¨å„èŠ‚ç‚¹ä¹‹é—´ä¿æŒ<strong>ä¸€è‡´æ€§ã€é«˜å¯ç”¨å’Œé«˜æ€§èƒ½</strong>ã€‚ç»“åˆå†…å­˜ã€Redis å’Œæ•°æ®åº“ä¸‰å±‚å­˜å‚¨ï¼Œè®¾è®¡å‚è€ƒæ–¹æ¡ˆï¼š</p>
<h5 data-id="heading-23">1ã€ å¯åŠ¨åŠ è½½ç­–ç•¥</h5>
<ul>
<li><strong>æµç¨‹</strong>ï¼š
<ol>
<li>æ¯å°è¯†åˆ«æœåŠ¡å™¨å¯åŠ¨æ—¶ï¼Œå…ˆä» Redis æ‹‰å–æœ€æ–°çš„äººè„¸ç‰¹å¾åˆ°æœ¬åœ°å†…å­˜ç¼“å­˜ã€‚</li>
<li>å¦‚æœ Redis ä¸­æ²¡æœ‰ç‰¹å¾æ•°æ®ï¼ˆå¦‚åˆæ¬¡éƒ¨ç½²ï¼‰ï¼Œåˆ™ä» MySQL æ•°æ®åº“åŠ è½½ã€‚Redis å¯ä½œä¸º <strong>å†…å­˜ç¼“å­˜ + å¼‚æ­¥æ›´æ–°æœºåˆ¶</strong>ï¼Œä¿è¯å„èŠ‚ç‚¹è¯†åˆ«æ•°æ®ä¸€è‡´æ€§</li>
<li>åŠ è½½åï¼Œå†…å­˜ç¼“å­˜å³å¯æ”¯æŒæ¯«ç§’çº§äººè„¸è¯†åˆ«ã€‚</li>
</ol>
</li>
<li><strong>å®ç°ç¤ºä¾‹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostConstruct</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadFeaturesOnStartup</span><span class="hljs-params">()</span> {
    Set&lt;String&gt; keys = redisTemplate.keys(<span class="hljs-string">"face:*"</span>);
    <span class="hljs-keyword">if</span> (keys != <span class="hljs-literal">null</span> &amp;&amp; !keys.isEmpty()) {
        <span class="hljs-keyword">for</span> (String key : keys) {
            <span class="hljs-type">byte</span>[] featureData =(<span class="hljs-type">byte</span>[]) redisTemplate.opsForValue().get(key);
            <span class="hljs-keyword">if</span> (featureData != <span class="hljs-literal">null</span>) {
                featureMap.put(key.replace(<span class="hljs-string">"face:"</span>, <span class="hljs-string">""</span>), featureData);
            }
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// Redisä¸ºç©ºï¼Œä»æ•°æ®åº“åŠ è½½</span>
        List&lt;FaceFeature&gt; features = repository.findAll();
        <span class="hljs-keyword">for</span> (FaceFeature f : features) {
            featureMap.put(f.getUserId(), f.getFeature());
            redisTemplate.opsForValue().set(<span class="hljs-string">"face:"</span> + f.getUserId(), f.getFeature());
        }
    }
}
</code></pre>
<ul>
<li><strong>ä¼˜åŠ¿</strong>ï¼š
<ul>
<li>é¿å…æ¯æ¬¡è¯†åˆ«éƒ½è®¿é—®æ•°æ®åº“ï¼Œæé«˜æ€§èƒ½ã€‚</li>
<li>å¯åŠ¨å³åŠ è½½æœ€æ–°ç‰¹å¾ï¼Œä¿è¯è¯†åˆ«æ•°æ®å®æ—¶æ€§ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-24">2ã€ ç‰¹å¾æ›´æ–°ä¸åŒæ­¥ç­–ç•¥</h5>
<p>åœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ï¼Œç”¨æˆ·æ–°å¢ã€åˆ é™¤æˆ–æ›´æ–°äººè„¸ç‰¹å¾æ—¶ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰èŠ‚ç‚¹å†…å­˜ä¿æŒä¸€è‡´ï¼š</p>
<ol>
<li>
<p><strong>æ›´æ–°é¡ºåº</strong>ï¼š</p>
<p><strong>å†™å†…å­˜</strong>ï¼šç«‹å³æ›´æ–°æœ¬åœ°å†…å­˜ç¼“å­˜ï¼Œä¿è¯è¯†åˆ«æœåŠ¡å®æ—¶å¯ç”¨ã€‚</p>
<ul>
<li><strong>å†™ Redis</strong>ï¼šåŒæ­¥åˆ° Redisï¼Œä½œä¸ºåˆ†å¸ƒå¼å…±äº«å±‚ã€‚</li>
<li><strong>å†™æ•°æ®åº“</strong>ï¼šå¼‚æ­¥æŒä¹…åŒ–åˆ° MySQLï¼Œä¿è¯é•¿æœŸæ•°æ®å®‰å…¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>åŒæ­¥æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>åˆ©ç”¨ Redis <strong>Pub/Sub</strong> æˆ–æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆKafkaã€RabbitMQï¼‰å¹¿æ’­æ›´æ–°äº‹ä»¶ã€‚</li>
<li>å…¶ä»–èŠ‚ç‚¹æ¥æ”¶åˆ°æ›´æ–°äº‹ä»¶åï¼Œåˆ·æ–°æœ¬åœ°å†…å­˜ç‰¹å¾ç¼“å­˜ã€‚</li>
</ul>
</li>
</ol>
<ul>
<li><strong>ç¤ºä¾‹é€»è¾‘</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">updateFeature</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userId, byte[] feature</span>) {
    <span class="hljs-comment">// æ›´æ–°æœ¬åœ°å†…å­˜</span>
    featureMap.<span class="hljs-title function_">put</span>(userId, feature);
    <span class="hljs-comment">// æ›´æ–° Redis</span>
    redisTemplate.<span class="hljs-title function_">opsForValue</span>().<span class="hljs-title function_">set</span>(<span class="hljs-string">"face:"</span> + userId, feature);
    <span class="hljs-comment">// å‘å¸ƒæ›´æ–°äº‹ä»¶é€šçŸ¥å…¶ä»–èŠ‚ç‚¹</span>
    redisTemplate.<span class="hljs-title function_">convertAndSend</span>(<span class="hljs-string">"face:update"</span>, userId);
    <span class="hljs-comment">// å¼‚æ­¥æ›´æ–°æ•°æ®åº“</span>
    <span class="hljs-title function_">asyncUpdateDatabase</span>(userId, feature);
}

<span class="hljs-comment">// è®¢é˜…äº‹ä»¶åˆ·æ–°å†…å­˜</span>
<span class="hljs-meta">@EventListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">handleRedisUpdateEvent</span>(<span class="hljs-params">Message message</span>) {
    <span class="hljs-title class_">String</span> userId = (<span class="hljs-title class_">String</span>) message.<span class="hljs-title function_">getBody</span>();
    <span class="hljs-title class_">String</span> feature = redisTemplate.<span class="hljs-title function_">opsForValue</span>().<span class="hljs-title function_">get</span>(<span class="hljs-string">"face:"</span> + userId);
    <span class="hljs-keyword">if</span> (feature != <span class="hljs-literal">null</span>) {
        featureMap.<span class="hljs-title function_">put</span>(userId, feature);
    }
}
</code></pre>
<p>é€šè¿‡åˆç†çš„å­˜å‚¨æ¶æ„å’Œå†…å­˜ä¼˜åŒ–ï¼ŒSpring Boot é¡¹ç›®çš„äººè„¸è¯†åˆ«ç³»ç»Ÿå¯ä»¥åœ¨ä¿è¯é«˜æ€§èƒ½çš„åŒæ—¶ï¼Œå®ç°å¯æ‰©å±•ã€åˆ†å¸ƒå¼çš„äººè„¸ç®¡ç†åŠŸèƒ½ï¼Œä¸ºæ™ºèƒ½é—¨ç¦ã€è€ƒå‹¤å’Œè®¿å®¢ç³»ç»Ÿæä¾›ç¨³å®šæ”¯æ’‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>