<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[å‰‘æŒ‡offer-63ã€æ•°æ®æµä¸­çš„ä¸­ä½æ•°]]></title>    <link>https://juejin.cn/post/7594415509607350318</link>    <guid>https://juejin.cn/post/7594415509607350318</guid>    <pubDate>2026-01-13T06:09:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594415509607350318" data-draft-id="7593607642553368602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰‘æŒ‡offer-63ã€æ•°æ®æµä¸­çš„ä¸­ä½æ•°"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-13T06:09:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰‘æŒ‡offer-63ã€æ•°æ®æµä¸­çš„ä¸­ä½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:09:10.000Z" title="Tue Jan 13 2026 06:09:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜â½¬æè¿°</h2>
<p>å¦‚ä½•å¾—åˆ°â¼€ä¸ªæ•°æ®æµä¸­çš„ä¸­ä½æ•°ï¼Ÿå¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¥‡æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä½äºä¸­é—´çš„æ•°å€¼ã€‚å¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¶æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚æˆ‘ä»¬ä½¿â½¤ Insert() â½…æ³•è¯»å–æ•°æ®æµï¼Œä½¿â½¤ GetMedian() â½…æ³•è·å–å½“å‰è¯»å–æ•°æ®çš„ä¸­ä½æ•°ã€‚</p>
<h2 data-id="heading-1">æ€è·¯åŠè§£ç­”</h2>
<h3 data-id="heading-2">æ’åºåˆ—è¡¨æ³•</h3>
<p>ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯æ¬¡è·å–ä¸­ä½æ•°å‰è¿›è¡Œæ’åº</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.Collections;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MedianFinder1</span> {
    <span class="hljs-keyword">private</span> List&lt;Integer&gt; data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MedianFinder1</span><span class="hljs-params">()</span> {
        data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    }
    
    <span class="hljs-comment">// æ’å…¥æ•°å­—åˆ°æ•°æ®æµ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Insert</span><span class="hljs-params">(Integer num)</span> {
        data.add(num);
        <span class="hljs-comment">// æ¯æ¬¡æ’å…¥åæ’åºï¼Œä¿æŒåˆ—è¡¨æœ‰åº</span>
        Collections.sort(data);
    }
    
    <span class="hljs-comment">// è·å–å½“å‰æ•°æ®æµçš„ä¸­ä½æ•°</span>
    <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">GetMedian</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> data.size();
        <span class="hljs-keyword">if</span> (size == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
        
        <span class="hljs-keyword">if</span> (size % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>) {
            <span class="hljs-comment">// å¥‡æ•°ä¸ªå…ƒç´ ï¼Œè¿”å›ä¸­é—´å€¼</span>
            <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>) data.get(size / <span class="hljs-number">2</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¶æ•°ä¸ªå…ƒç´ ï¼Œè¿”å›ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> size / <span class="hljs-number">2</span>;
            <span class="hljs-keyword">return</span> (data.get(mid - <span class="hljs-number">1</span>) + data.get(mid)) / <span class="hljs-number">2.0</span>;
        }
    }
}
</code></pre>
<ul>
<li><strong>æ’å…¥æ“ä½œ</strong>ï¼šæ¯æ¬¡æ’å…¥éœ€è¦æ’åºï¼Œæ—¶é—´å¤æ‚åº¦O(n log n)</li>
<li><strong>è·å–ä¸­ä½æ•°</strong>ï¼šç›´æ¥é€šè¿‡ç´¢å¼•è®¿é—®ï¼Œæ—¶é—´å¤æ‚åº¦O(1)</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦å­˜å‚¨æ‰€æœ‰æ•°æ®</li>
</ul>
<h3 data-id="heading-3">æ’å…¥æ’åºæ³•</h3>
<p>åœ¨æ–¹æ³•ä¸€åŸºç¡€ä¸Šä¼˜åŒ–ï¼Œåœ¨æ’å…¥æ—¶å°±æ‰¾åˆ°æ­£ç¡®ä½ç½®ï¼Œé¿å…æ¯æ¬¡éƒ½å®Œæ•´æ’åºã€‚åŒæ—¶åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°æ’å…¥ä½ç½®ï¼Œå‡å°‘æ’åºå¼€é”€</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MedianFinder2</span> {
    <span class="hljs-keyword">private</span> List&lt;Integer&gt; data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MedianFinder2</span><span class="hljs-params">()</span> {
        data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Insert</span><span class="hljs-params">(Integer num)</span> {
        <span class="hljs-comment">// ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°åˆé€‚çš„æ’å…¥ä½ç½®</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, right = data.size() - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> (left &lt;= right) {
            <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> left + (right - left) / <span class="hljs-number">2</span>;
            <span class="hljs-keyword">if</span> (data.get(mid) &lt; num) {
                left = mid + <span class="hljs-number">1</span>;
            } <span class="hljs-keyword">else</span> {
                right = mid - <span class="hljs-number">1</span>;
            }
        }
        <span class="hljs-comment">// åœ¨æ‰¾åˆ°çš„ä½ç½®æ’å…¥å…ƒç´ </span>
        data.add(left, num);
    }
    
    <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">GetMedian</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> data.size();
        <span class="hljs-keyword">if</span> (size == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
        
        <span class="hljs-keyword">if</span> (size % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>) data.get(size / <span class="hljs-number">2</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> size / <span class="hljs-number">2</span>;
            <span class="hljs-keyword">return</span> (data.get(mid - <span class="hljs-number">1</span>) + data.get(mid)) / <span class="hljs-number">2.0</span>;
        }
    }
}
</code></pre>
<ul>
<li><strong>æ’å…¥æ“ä½œ</strong>ï¼šäºŒåˆ†æŸ¥æ‰¾O(log n) + æ’å…¥æ“ä½œO(n) = O(n)</li>
<li><strong>è·å–ä¸­ä½æ•°</strong>ï¼šO(1)ï¼Œé€šè¿‡ç´¢å¼•ç›´æ¥è®¿é—®</li>
<li><strong>ä¼˜åŒ–æ•ˆæœ</strong>ï¼šæ¯”æ–¹æ³•ä¸€æœ‰æ˜æ˜¾æå‡ï¼Œç‰¹åˆ«é€‚åˆéƒ¨åˆ†æœ‰åºçš„æ•°æ®</li>
</ul>
<h3 data-id="heading-4">åŒå †æ³•</h3>
<p>æ˜¯æœ€é«˜æ•ˆçš„è§£æ³•ï¼Œåˆ©ç”¨å¤§é¡¶å †å’Œå°é¡¶å †çš„ç‰¹æ€§æ¥åŠ¨æ€ç»´æŠ¤ä¸­ä½æ•°ï¼Œä½¿ç”¨å¤§é¡¶å †å­˜è¾ƒå°ä¸€åŠï¼Œå°é¡¶å †å­˜è¾ƒå¤§ä¸€åŠ</p>
<p>â½¤â¼€ä¸ªæ•°å­—æ¥ä¸æ–­ç»Ÿè®¡æ•°æ®æµä¸­çš„ä¸ªæ•°ï¼Œå¹¶ä¸”åˆ›å»ºâ¼€ä¸ªæœ€â¼¤å †ï¼Œâ¼€ä¸ªæœ€â¼©å †</p>
<ul>
<li>å¦‚æœæ’â¼Šçš„æ•°å­—çš„ä¸ªæ•°æ˜¯å¥‡æ•°çš„æ—¶å€™ï¼Œè®©æœ€â¼©å †â¾¥â¾¯çš„å…ƒç´ ä¸ªæ•°â½æœ€â¼¤å †çš„ä¸ªæ•°å¤š 1 ï¼Œè¿™æ ·â¼€æ¥ä¸­ä½æ•°å°±æ˜¯â¼©é¡¶å †çš„å †é¡¶</li>
<li>å¦‚æœæ’â¼Šçš„æ•°å­—çš„ä¸ªæ•°æ˜¯å¶æ•°çš„æ—¶å€™ï¼Œä¸¤ä¸ªå †çš„å…ƒç´ ä¿æŒâ¼€æ ·å¤šï¼Œä¸­ä½æ•°å°±æ˜¯ä¸¤ä¸ªå †çš„å †é¡¶çš„å…ƒç´ ç›¸åŠ é™¤ä»¥2 ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
	<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
	<span class="hljs-keyword">private</span> PriorityQueue&lt;Integer&gt; min = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;Integer&gt;();
	<span class="hljs-keyword">private</span> PriorityQueue&lt;Integer&gt; max = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;Integer&gt;(<span class="hljs-keyword">new</span>
	
	<span class="hljs-title class_">Comparator</span>&lt;Integer&gt;() {
		<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Integer o1, Integer o2)</span> {
			<span class="hljs-keyword">return</span> o2 - o1;
		}
	});
	
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Insert</span><span class="hljs-params">(Integer num)</span> {
		count++;
		<span class="hljs-keyword">if</span> (count % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>) {
			<span class="hljs-comment">// å¥‡æ•°çš„æ—¶å€™ï¼Œéœ€è¦æœ€â¼©å †çš„å…ƒç´ â½æœ€â¼¤å †çš„å…ƒç´ å¤šâ¼€ä¸ªã€‚</span>
			<span class="hljs-comment">// å…ˆæ”¾åˆ°æœ€â¼¤å †â¾¥â¾¯ï¼Œç„¶åå¼¹å‡ºæœ€â¼¤çš„</span>
			max.offer(num);
			<span class="hljs-comment">// æŠŠæœ€â¼¤çš„æ”¾è¿›æœ€â¼©å †</span>
			min.offer(max.poll());
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-comment">// æ”¾è¿›æœ€â¼©å †</span>
			min.offer(num);
			<span class="hljs-comment">// æŠŠæœ€â¼©çš„æ”¾è¿›æœ€â¼¤å †</span>
			max.offer(min.poll());
		}
	}
		
	<span class="hljs-keyword">public</span> Double <span class="hljs-title function_">GetMedian</span><span class="hljs-params">()</span> {
		<span class="hljs-keyword">if</span> (count % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {
			<span class="hljs-keyword">return</span> (min.peek() + max.peek()) / <span class="hljs-number">2.0</span>;
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>) min.peek();
		}
	}
}
</code></pre>
<ul>
<li><strong>æ’å…¥æ“ä½œ</strong>ï¼šå †çš„æ’å…¥æ“ä½œO(log n)ï¼Œå¹³è¡¡æ“ä½œO(log n)ï¼Œæ€»ä½“O(log n)</li>
<li><strong>è·å–ä¸­ä½æ•°</strong>ï¼šç›´æ¥è®¿é—®å †é¡¶å…ƒç´ ï¼ŒO(1)æ—¶é—´å¤æ‚åº¦</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œéœ€è¦å­˜å‚¨æ‰€æœ‰æ•°æ®</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¿™ç§æ–¹æ³•æœ‰æ•ˆï¼Ÿ</strong></p>
<ul>
<li><strong>å¤§é¡¶å †</strong>ï¼ˆmaxHeapï¼‰ï¼šå­˜å‚¨æ•°æ®æµä¸­<strong>è¾ƒå°çš„ä¸€åŠ</strong>æ•°å­—ï¼Œå †é¡¶æ˜¯è¿™ä¸€åŠä¸­çš„æœ€å¤§å€¼</li>
<li><strong>å°é¡¶å †</strong>ï¼ˆminHeapï¼‰ï¼šå­˜å‚¨æ•°æ®æµä¸­<strong>è¾ƒå¤§çš„ä¸€åŠ</strong>æ•°å­—ï¼Œå †é¡¶æ˜¯è¿™ä¸€åŠä¸­çš„æœ€å°å€¼</li>
<li><strong>å¹³è¡¡ç»´æŠ¤</strong>ï¼šç¡®ä¿ä¸¤ä¸ªå †çš„å¤§å°ç›¸å·®ä¸è¶…è¿‡1ï¼Œè¿™æ ·ä¸­ä½æ•°å°±åªä¸ä¸¤ä¸ªå †é¡¶æœ‰å…³</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†æ­»ç£• Nginxï¼http-proxy-middleware ä½é…ç½®èµ·é£]]></title>    <link>https://juejin.cn/post/7594270467029991451</link>    <guid>https://juejin.cn/post/7594270467029991451</guid>    <pubDate>2026-01-12T08:56:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594270467029991451" data-draft-id="7594168317214212106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†æ­»ç£• Nginxï¼http-proxy-middleware ä½é…ç½®èµ·é£"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-12T08:56:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å‡Œè§ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3350967174565198"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†æ­»ç£• Nginxï¼http-proxy-middleware ä½é…ç½®èµ·é£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3350967174565198/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å‡Œè§ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T08:56:39.000Z" title="Mon Jan 12 2026 08:56:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å‡Œè§ˆã€‚</p>
<ul>
<li>ä¸ªäººç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.code24.top%2F" target="_blank" title="https://blog.code24.top/" ref="nofollow noopener noreferrer">blog.code24.top</a></li>
<li>å»æ°´å°ä¸‹è½½é¸­ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fnologo.code.top%2F" target="_blank" title="http://nologo.code.top/" ref="nofollow noopener noreferrer">nologo.code.top</a></li>
</ul>
<p>å¦‚æœæœ¬æ–‡èƒ½ç»™ä½ æä¾›å¯å‘æˆ–å¸®åŠ©ï¼Œæ¬¢è¿åŠ¨åŠ¨å°æ‰‹æŒ‡ï¼Œä¸€é”®ä¸‰è¿ï¼ˆ<code>ç‚¹èµ</code>ã€<code>è¯„è®º</code>ã€<code>è½¬å‘</code>ï¼‰ï¼Œç»™æˆ‘ä¸€äº›æ”¯æŒå’Œé¼“åŠ±è°¢è°¢ã€‚</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>å·²æœ‰ä¸€ä¸ªå»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡ï¼ŒåŸŸåé…ç½®ã€æœåŠ¡å™¨ç«¯å£å‡å·²é…ç½®ç¨³å®šã€‚</p>
<p>ç°åœ¨æˆ‘å¦æœ‰ä¸€ä¸ªåç«¯æœåŠ¡ï¼Œå‡è®¾å–åå«å»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡Proã€‚</p>
<p>ç°åœ¨éœ€è¦å»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡ã€å»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡Proéƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ï¼Œå¹¶ä¸”ä¸¤è€…éƒ½é€šè¿‡80ã€443å…¬å¼€ç«¯å£å¯¹å¤–è®¿é—®ã€‚è¿™æ—¶å¤§å¤šé€‰æ‹©Nginxåå‘ä»£ç†è®©å»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡ã€å»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡Proå…±ç”¨ä¸€ä¸ªé—¨ç‰Œå·ï¼Œæµé‡è‡ªåŠ¨åˆ†æµï¼Œè¯ä¹¦å¤ç”¨ã€‚</p>
<p>å¯¹äºå¹¶å‘é‡å¤§çš„åå°é€‰æ‹©Nginxæ²¡æ¯›ç—…ï¼Œä½†å¯¹æµé‡å°åˆ°è¿â€œå¹¶å‘â€ä¿©å­—éƒ½å«Œé‡ï¼Œå†æ¬å‡º Nginx å°±æ˜¯æ‹¿é’é¾™åƒæœˆåˆ€åˆ‡è‘±èŠ±â€”â€”åˆ€å¥½ï¼Œä½†çœŸæ²¡å¿…è¦ã€‚</p>
<p>Node ç©å®¶ç›´æ¥ http-proxy-middleware ä¸€æŠŠæ¢­,çœå‡ºé… nginx çš„åŠŸå¤«ï¼Œæ—©æŠŠéœ€æ±‚è¿­ä»£ä¸Šçº¿äº†ã€‚</p>
<p>æœ¬æ–‡å°±æ¥ä»‹ç»æ€æ ·ç”¨ http-proxy-middleware ä¸‰åˆ†é’Ÿæ­å¥½åå‘ä»£ç†ï¼Œè®©â€œå»æ°´å°ä¸‹è½½é¸­â€ä¸â€œPro ç‰ˆâ€åŒåƒ 80/443ï¼Œé›¶ Nginxã€ä½é…ç½®ã€‚</p>
<h2 data-id="heading-1">http-proxy-middlewareæ˜¯ä»€ä¹ˆ</h2>
<p>http-proxy-middlewareæ˜¯ä¸€ä¸ªåŸºäº Express.js æ¡†æ¶çš„ä¸­é—´ä»¶,å®ƒèƒ½å¤Ÿå°†ä¸€ä¸ªæˆ–å¤šä¸ª HTTP è¯·æ±‚ä»£ç†åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ä¸Šã€‚å¸¸ç”¨åœºæ™¯å¦‚ï¼šå‰ç«¯å¼€å‘é‡åˆ°è·¨åŸŸé—®é¢˜æ—¶ï¼Œé€šè¿‡é…ç½®http-proxy-middlewareï¼Œå¯ä»¥å°†å‰ç«¯è¯·æ±‚ä»£ç†åˆ°åç«¯æœåŠ¡å™¨ï¼Œä»è€Œå·§å¦™åœ°é¿å¼€æµè§ˆå™¨çš„è·¨åŸŸé™åˆ¶ã€‚</p>
<h2 data-id="heading-2"><strong>å®‰è£…ä¸åŸºç¡€ä½¿ç”¨</strong></h2>
<p>é¦–å…ˆå®‰è£…http-proxy-middleware:</p>
<pre><code class="hljs language-jsx" lang="jsx">npm install http-proxy-middleware
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é¡¹ç›®ä¸­å¼•å…¥å¹¶ä½¿ç”¨å®ƒäº†ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Express åº”ç”¨ä¸­ä½¿ç”¨http-proxy-middlewareä»£ç†è¯·æ±‚çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> { createProxyMiddleware } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http-proxy-middleware'</span>);
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªä»£ç†ä¸­é—´ä»¶ï¼Œå°†æ‰€æœ‰ä»¥/apiå¼€å¤´çš„è¯·æ±‚ä»£ç†åˆ°ç›®æ ‡æœåŠ¡å™¨</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/api'</span>, <span class="hljs-title function_">createProxyMiddleware</span>({
    <span class="hljs-attr">target</span>: <span class="hljs-string">'http://target-server.com'</span>, <span class="hljs-comment">// ç›®æ ‡æœåŠ¡å™¨åœ°å€</span>
    <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…è®¸ä¿®æ”¹è¯·æ±‚å¤´ä¸­çš„originå­—æ®µ</span>
}));
<span class="hljs-keyword">const</span> port = <span class="hljs-number">3000</span>;
app.<span class="hljs-title function_">listen</span>(port, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server running on port <span class="hljs-subst">${port}</span>`</span>);
});

</code></pre>
<h2 data-id="heading-3">è¿ç”¨åˆ°å®é™…é¡¹ç›®</h2>
<p>å»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡è·‘åœ¨ 3000ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¼šå ä½å…¬ç½‘ 80ï¼›å»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡Proèº²åœ¨ 3010ï¼Œåªå¯¹å†…æ•å¼€ã€‚ç°åœ¨æŠŠ <code>http-proxy-middleware</code> ç›´æ¥å¡è¿›3000å»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡ï¼ŒåªåŠ ä¸€æ¡è·¯ç”±è§„åˆ™ï¼š</p>
<p>æ¥å£ä¸€æ—¦æ’ä¸Š <code>/api/gold-price/*/**</code>ï¼Œå½“åœºè¢«æ‚„æ‚„è½¬ç»™3010ç«¯å£æœåŠ¡ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">const</span> proxyGoldPrice = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./middleware/proxyGoldPrice.js'</span>);
<span class="hljs-comment">//çœç•¥</span>
<span class="hljs-comment">// ğŸ‘‡ æ–°å¢ï¼šä»£ç† gold-price è·¯ç”±</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/api/gold-price'</span>, proxyGoldPrice);

<span class="hljs-comment">//çœç•¥</span>
</code></pre>
<p>åœ¨middlewareç›®å½•åˆ›å»º<code>proxyGoldPrice.js</code> æ–‡ä»¶,Expressä¸­é—´ä»¶é…ç½®æ”¾ç½®åœ¨ä¸€èµ·.</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7fb39b4408e4880943113025a898930~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5YeM6KeI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768812999&amp;x-signature=bclmSDT4C5mLU9tdVduSoB5WhBk%3D" alt="image.png" loading="lazy"/></p>
<p>proxyGoldPrice.jså†…å®¹:</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// middleware/proxyGoldPrice.js</span>
<span class="hljs-keyword">const</span> { createProxyMiddleware } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http-proxy-middleware'</span>);

<span class="hljs-keyword">const</span> proxyGoldPrice = <span class="hljs-title function_">createProxyMiddleware</span>({
    <span class="hljs-attr">target</span>: <span class="hljs-string">"http://127.0.0.1:3010"</span>,
    <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">// å¦‚æœç›®æ ‡æœåŠ¡ä¸éœ€è¦ /api å‰ç¼€ï¼Œå¯å¯ç”¨ pathRewriteï¼š</span>
    <span class="hljs-attr">pathRewrite</span>: {
        <span class="hljs-comment">//é‡å†™è·¯å¾„</span>
        <span class="hljs-string">'^/'</span>: <span class="hljs-string">'/api/gold-price/'</span>,
    }
});

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = proxyGoldPrice;
</code></pre>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡createProxyMiddlewareå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªä»£ç†ä¸­é—´ä»¶ã€‚å½“åº”ç”¨æ¥æ”¶åˆ°ä»¥/api/gold-priceå¼€å¤´çš„è¯·æ±‚æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å°†è¯¥è¯·æ±‚è½¬å‘åˆ°<a href="https://link.juejin.cn?target=http%3A%2F%2F127.0.0.1%3A3010%25E3%2580%2582" target="_blank" title="http://127.0.0.1:3010%E3%80%82" ref="nofollow noopener noreferrer">http://127.0.0.1:3010ã€‚</a></p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šè®¿é—®<code>http://127.0.0.1:3000/api/gold-price/realtime</code>æ—¶ï¼Œå‘½ä¸­<code>app.use('/api/gold-price', proxyGoldPrice)</code>è·¯ç”±ï¼Œhttp-proxy-middlewareä¼šæŠŠ<code>http://127.0.0.1:3000/api/gold-price/realtime</code>è½¬å‘åˆ°<code>http://127.0.0.1:3010/realtime</code>ã€‚</p>
<p>ä¸Šè¿°ä¾‹å­ä¸­è½¬å‘åçš„è®¿é—®çš„æ˜¯<code>http://127.0.0.1:3010/realtime</code>,ä½†åœ¨å»æ°´å°ä¸‹è½½é¸­åç«¯æœåŠ¡Proè·¯ç”±å‰ç¼€éƒ½æœ‰<code>/api/gold-price</code>,æ‰€ä»¥ä¼šå‡ºé”™æ²¡æ‰¾åˆ°å¯¹åº”è·¯ç”±ã€‚</p>
<p><code>pathRewrite</code>åˆ™æ˜¯è§£å†³äº›é—®é¢˜çš„é…ç½®,å®ƒç”¨äºè·¯å¾„é‡å†™:</p>
<pre><code class="hljs language-jsx" lang="jsx"> <span class="hljs-attr">pathRewrite</span>: {
        <span class="hljs-comment">//é‡å†™è·¯å¾„</span>
        <span class="hljs-string">'^/'</span>: <span class="hljs-string">'http://127.0.0.1:3010/realtime'</span>,
    }
</code></pre>
<p>è¡¨ç¤ºæŠŠ<code>/</code>æ›¿æ¢æˆ<code>/api/gold-price/</code>ã€‚è½¬å‘åè·¯å¾„å°±æ˜¯<code>http://127.0.0.1:3010/api/gold-price/realtime</code>ã€‚è¯¥å­—æ®µå¯é…å¯ä¸é…ï¼Œå–å†³äºä½ çš„ç›®æ ‡æœåŠ¡å™¨ã€‚</p>
<p>å¥½äº†ï¼Œhttp-proxy-middlewareåŸºç¡€ä½¿ç”¨æ–¹æ³•ä»‹ç»å®Œæ¯•ã€‚æœ‰ä¸åŒä»£ç†éœ€æ±‚åŠŸèƒ½å¯ä»¥ç§»æ­¥çœ‹å®ƒçš„å®˜æ–¹æ–‡æ¡£ã€‚</p>
<h2 data-id="heading-4">å·¥å…·å¯¹æ¯”</h2>
<p>æ¥ä¸ªç®€å•å¯¹æ¯”ï¼š</p>





















































<table><thead><tr><th>ç‰¹æ€§</th><th>http-proxy-middleware</th><th>http-proxy</th><th>nginx</th></tr></thead><tbody><tr><td>é…ç½®å¤æ‚åº¦</td><td>ä¸­ç­‰</td><td>é«˜</td><td>é«˜</td></tr><tr><td>Node.js é›†æˆ</td><td>ä¼˜ç§€</td><td>ä¼˜ç§€</td><td>éœ€è¦å•ç‹¬è¿›ç¨‹</td></tr><tr><td>å¼€å‘ä¾¿åˆ©æ€§</td><td>ä¼˜ç§€</td><td>è‰¯å¥½</td><td>ä¸€èˆ¬</td></tr><tr><td>æ€§èƒ½</td><td>è‰¯å¥½</td><td>ä¼˜ç§€</td><td>ä¼˜ç§€</td></tr><tr><td>WebSocket æ”¯æŒ</td><td>æ˜¯</td><td>æ˜¯</td><td>æ˜¯</td></tr><tr><td>è·¯å¾„é‡å†™</td><td>æ˜¯</td><td>æœ‰é™</td><td>æ˜¯</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>è½»é‡ç½‘å…³ã€Node æ ˆä¸€ä½“åŒ–</td><td>åº•å±‚åº“ã€è‡ªå®šä¹‰ä»£ç†é€»è¾‘</td><td>é«˜å¹¶å‘ã€å¤šè¯­è¨€ã€ä¼ä¸šçº§ç½‘å…³</td></tr></tbody></table>
<p>http-proxy-middlewareæ˜¯http-proxyäºŒæ¬¡å°è£…ï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚http-proxy-middlewareçš„å­˜åœ¨è®©http-proxyæ›´æ˜“ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-5">æœ€å</h2>
<p>é€šè¿‡åœ¨ Node.js åº”ç”¨ä¸­é›†æˆ http-proxy-middleware ä¸­é—´ä»¶ï¼Œåªéœ€å‡ è¡Œä»£ç é…ç½®å°±èƒ½è®©å¤šä¸ªåç«¯æœåŠ¡å…±ç”¨ 80/443 ç«¯å£ï¼Œå®ç°è¯·æ±‚åˆ†æµå’Œè·¯ç”±è½¬å‘ã€‚ç›¸æ¯” Nginxï¼Œè¿™ç§æ–¹æ¡ˆé…ç½®ç®€å•ã€ä¸ Node.js æ·±åº¦é›†æˆã€å¼€å‘ä¾¿åˆ©æ€§é«˜ï¼Œç‰¹åˆ«é€‚åˆæµé‡ä¸å¤§çš„é¡¹ç›®å¿«é€Ÿéƒ¨ç½²ï¼Œé¿å…"æ€é¸¡ç”¨ç‰›åˆ€"çš„èµ„æºæµªè´¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç‰©å“è¶…é¢†å–æŸå¤±1ä¸‡äº‹æ•…å¤ç›˜(ä¸€)]]></title>    <link>https://juejin.cn/post/7594266018303934527</link>    <guid>https://juejin.cn/post/7594266018303934527</guid>    <pubDate>2026-01-12T08:56:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594266018303934527" data-draft-id="7588680081326555178" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç‰©å“è¶…é¢†å–æŸå¤±1ä¸‡äº‹æ•…å¤ç›˜(ä¸€)"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-12T08:56:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æå‰é€€ä¼‘çš„javaçŒ¿"/> <meta itemprop="url" content="https://juejin.cn/user/465848660928872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç‰©å“è¶…é¢†å–æŸå¤±1ä¸‡äº‹æ•…å¤ç›˜(ä¸€)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848660928872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æå‰é€€ä¼‘çš„javaçŒ¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T08:56:58.000Z" title="Mon Jan 12 2026 08:56:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    65
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>æˆ‘æ˜¯[<a href="https://juejin.cn/user/465848660928872" title="https://juejin.cn/user/465848660928872" target="_blank">æå‰é€€ä¼‘çš„javaçŒ¿</a>]ï¼Œä¸€å7å¹´javaå¼€å‘ç»éªŒçš„å¼€å‘ç»„é•¿ï¼Œåˆ†äº«å·¥ä½œä¸­çš„å„ç§é—®é¢˜ï¼ï¼ˆæŠ–éŸ³ã€å…¬ä¼—å·åŒå·ï¼‰</p>
</blockquote>
<p>25å¹´12æœˆ25æ—¥ä¸Šåˆï¼Œæ•°æ®åº“æœåŠ¡å™¨<code>CPU 100%</code>ï¼Œæœ€ç»ˆå¯¼è‡´æŸä¸ªç‰©å“é¢†å–ä¸šåŠ¡æŸå¤±1ä¸‡å—ã€‚å¦‚æœä¹‹å‰æœ‰çœ‹è¿‡æˆ‘æ–‡ç« çš„åº”è¯¥å°±çŸ¥é“ <code>CPU 100%</code> å·²ç»ä¸æ˜¯ç¬¬ä¸€å‡ºç°äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f634a70e65f471788731c7c69700327~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o-Q5YmN6YCA5LyR55qEamF2YeeMvw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833548&amp;x-signature=2CWv0iO3h7WAuGFa8s%2Fn7v4%2BMPM%3D" alt="e51b9f7f7235a025d17664fbad9c3feb.png" loading="lazy"/>
ä»Šå¤©å…ˆä»ä»£ç ä¸Šå¤ç›˜ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæ•°æ®åº“<code>CPU100%</code> ä¹‹åï¼Œç‰©å“å°±è¶…é¢†äº†â“ é¦–å…ˆæƒ³åˆ°çš„è‚¯å®šæ˜¯ä»£ç å­˜åœ¨é—®é¢˜ï¼Œä»Šå¤©å°±å…ˆçœ‹çœ‹ä»£ç ä¸Šæ˜¯å¦å­˜åœ¨é—®é¢˜ã€‚</p>
<blockquote>
<p>ğŸ”ˆè´Ÿè´£çš„åŒäº‹è¿™æ ·è¯´åé¦ˆçš„ï¼šåŒä¸€ä¸ªäº‹åŠ¡ä¸­å…ˆåº“å­˜æ‰£å‡ï¼ˆAæ“ä½œï¼‰ï¼šupdate t set num = num -1 where num &gt;0 ç„¶åæ’å…¥é¢†å–è®°å½•ï¼ˆBæ“ä½œï¼‰:insert xxã€‚<br/>
â—æœ€ç»ˆæ•°æ®ç»“æœå°±æ˜¯insert çš„é¢†å–æ•°é‡ï¼Œå¤§äºäº†åº“å­˜æ€»æ•°ã€‚æ‰€ä»¥åŒäº‹å°±åé¦ˆAæ²¡æ‰§è¡Œï¼ŒBå´æ‰§è¡ŒæˆåŠŸäº†éå¸¸çš„è¯¡å¼‚ã€‚</p>
</blockquote>
<p>è¯´å®è¯åˆ°ç°åœ¨ä¸ºæ­¢æˆ‘è¿˜æ˜¯æœ‰ç‚¹æ€€ç–‘ä»–å†™çš„ä»£ç ï¼Œæ•°æ®åº“çš„åŸå­æ€§éƒ½è¢«ç ´åäº†è¿˜æ˜¯å¾ˆææ€–çš„ğŸ˜¨ï¼Œä»Šå¤©çš„æ–‡ç« ä¸»è¦çœ‹çœ‹æ’æŸ¥å‡ºäº‹åŠ¡çš„åŸå­æ€§ç ´ååçš„é—®é¢˜ã€‚</p>
<p>ï¼ˆps:<code>ğŸ§›ğŸ¾â€â™€ï¸è¿™æ˜¯ä¸€ç¯‡æ²¡æœ‰æ‰¾åˆ°ç­”æ¡ˆçš„æŠ€æœ¯åšå®¢</code>ï¼‰</p>
<h2 data-id="heading-1">æŠ½å¥–è¶…é¢†å¤ç›˜</h2>
<p>CUPä¸ºä»€ä¹ˆé£™é«˜çš„è¿™ä¸ªé—®é¢˜ä»Šå¤©å°±ä¸æ˜¯æˆ‘ä»¬è¦æ’æŸ¥çš„é—®é¢˜ï¼Œæ‰€ä»¥ä»£ç çš„æ€§èƒ½ä»Šå¤©å°±ä¸è®¨è®ºäº†ã€‚ä»Šå¤©ä¸»è¦åˆ†æç‰©å“è¶…é¢†çš„é—®é¢˜ï¼Œåˆ°åº•æ˜¯ä»£ç é—®é¢˜å¯¼è‡´çš„äº‹åŠ¡å¤±æ•ˆï¼Œè¿˜æ˜¯æœ‰å…¶ä»–åœ°æ–¹åœ¨æ’å…¥é¢†å–è®°å½•æˆ–è€…æ˜¯åšäº†åº“å­˜å›æ»šï¼ˆæ’å…¥è®°å½•åˆå›æ»šï¼‰ã€‚è¿˜æ˜¯çœŸçš„æ˜¯äº‹åŠ¡çš„åŸå­æ€§è¢«ç ´åäº†ã€‚</p>
<blockquote>
<p>ğŸ”Šç¯å¢ƒä»‹ç»ï¼šæ•°æ®åº“ä½¿ç”¨çš„å›½äº§çš„äººå¤§é‡‘ä»“ï¼Œä½¿ç”¨çš„æ˜¯ä¸»ä»æ¶æ„</p>
</blockquote>
<h3 data-id="heading-2">ä¸€ã€æ ¸å¿ƒä»£ç åˆ†æ</h3>
<p>ä»controller åˆ°service çš„ä»£ç æˆ‘éƒ½çœ‹äº†ï¼Œæœ¬æ¥è¦æŠŠè¿™éƒ¨åˆ†ä»£ç è´´å‡ºæ¥çš„è¿˜æ˜¯ç®—äº†ã€‚æ— é™ç®€åŒ–ä¹‹åå°±æ˜¯ä¸‹é¢çš„é€»è¾‘</p>
<p><strong>controller</strong> å±‚ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-meta">@RedisRateLimiter(value = 100,limit = 1)</span>
    <span class="hljs-meta">@PostMapping(value = "/grabCoupon")</span>
    <span class="hljs-keyword">public</span> Res&lt;?&gt; equityClaim(<span class="hljs-meta">@RequestBody</span> GrabCouponReqEx req) {
        .........
        <span class="hljs-keyword">return</span> service.grabCouponTrans(req);
    }
</code></pre>
<p><strong>service</strong> å±‚ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRED,rollbackFor = RuntimeException.class)</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> Result&lt;?&gt; grabCouponTrans(GrabCouponReqEx req) {
       <span class="hljs-comment">// å¯¹æ‰€æœ‰ä»£ç è¿›è¡Œ tryï¼Œç„¶åæŠ›å‡ºRuntimException è®©æ¡†æ¶å›æ»š</span>
       <span class="hljs-keyword">try</span>{
       <span class="hljs-comment">//ğŸ’¦å½“ç„¶äº‹åŠ¡ä¸­è¿˜æœ‰å¾ˆå¤šæŸ¥è¯¢æ ¡éªŒçš„é€»è¾‘è¿™å„¿å°±çœç•¥äº†</span>
       .............................
        <span class="hljs-comment">//âœ… Aæ“ä½œï¼šåº“å­˜æ‰£å‡ï¼Œè¿™ä¸ªåœ°æ–¹å¯¹åº“å­˜-1ï¼Œå¦‚æœæ›´æ–°è¡Œæ•°å¤§ä¸0è¿”å›true </span>
        <span class="hljs-comment">//UPDATE t SET num =  num -1  WHERE id = #{id} AND num &gt; 0;</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">isok</span> <span class="hljs-operator">=</span> xxDao.reduceInventoryNoCompleted(id);
        <span class="hljs-keyword">if</span> (isok) {
            <span class="hljs-comment">// âœ…Bæ“ä½œï¼šæ’å…¥é¢†å–è®°å½•ï¼Œæ’å…¥æˆåŠŸè¿”å› true</span>
            <span class="hljs-type">Boolean</span> <span class="hljs-variable">insetSuc</span> <span class="hljs-operator">=</span> insert(record);
            <span class="hljs-comment">// ...................... âŒHTTP å†™åœ¨äº‹åŠ¡ä¸­</span>
            Result&lt;?&gt; result1 = XXHttpUtils.preExamination(claimReq);
            <span class="hljs-comment">//åŒæ­¥æ›´æ–°æ ¸é”€æ•°æ®</span>
            <span class="hljs-keyword">if</span> (!isokDetail) {
                logger.error(<span class="hljs-string">"ã€åé¦ˆæ•°æ®æ›´æ–°åŒæ­¥å¼‚å¸¸ã€‘"</span>);
                XXHttpUtils.saveLogsNoSupp(xx);
            }
            <span class="hljs-keyword">return</span> result;
        } 
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ›´æ–°é…ç½®æƒç›Šæ ¸é”€çŠ¶æ€å¤±è´¥ï¼"</span>);
    }<span class="hljs-keyword">catch</span> (Exception e){
        <span class="hljs-comment">// â—è¿™ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ä»£ç å‘€ï¼Œè¿˜æ˜¯ç”¨log.error("ss",e)</span>
        e.printStackTrace();
        <span class="hljs-comment">//........ redis ä¿¡æ¯å›æ»šæ“ä½œ.........</span>
        <span class="hljs-keyword">throw</span> e;
    }
}
</code></pre>
<p>åŸºç¡€ç¨å¾®æ‰å®ä¸€ç‚¹çš„å¯ä»¥çœ‹å‡ºä¸Šé¢çš„ä»£ç é€»è¾‘æ˜¯ä¸ä¼šå‡ºç°åº“å­˜è¢«æ‰£æˆè´Ÿæ•°çš„æƒ…å†µï¼Œå³ä½¿åœ¨é«˜å¹¶å‘ä¸‹ï¼Œå› ä¸ºupdate By id æ“ä½œæœ¬èº«ä¼šè¿›è¡Œè¡Œé”ã€‚æ‰€ä»¥åœ¨åº“å­˜ =1çš„æƒ…å†µä¸‹ï¼Œå¤šä¸ªè¯·æ±‚æ›´æ–°ä¹Ÿåªæœ‰ä¸€ä¸ªèƒ½æ›´æ–°æˆåŠŸï¼ˆæ›´æ–°è¡Œæ•°=1ï¼‰ã€‚</p>
<h4 data-id="heading-3">äº‹åŠ¡å¤±æ•ˆï¼Ÿ</h4>
<ul>
<li>æ•æ‰<code>RuntimeException</code>äº‹åŠ¡å¯¼è‡´å¤±æ•ˆï¼šæ³¨è§£ä¸Šé¢æ•æ‰çš„æ˜¯<code>RuntimeException</code>ï¼Œä½†æ˜¯æ•æ‰äº†Exceptioon åˆæŠ›å‡ºäº†ã€‚å¦‚æœæŠ›å‡ºå»çš„å¼‚å¸¸æ²¡æœ‰ç»§æˆRuntimeExceptionï¼Œäº‹åŠ¡å°±ä¼šå¤±æ•ˆï¼Œä¹Ÿä¸ä¼šå‡ºç° Aæ²¡æ‰§è¡Œã€Bå´æ‰§è¡ŒæˆåŠŸçš„æƒ…å†µã€‚</li>
<li>âŒ<del>thisè°ƒç”¨insertå¯¼è‡´äº‹åŠ¡å¤±æ•ˆ</del>ï¼šè¿™ä¸ªè§‚ç‚¹æˆ‘åœ¨æŠ–éŸ³è¯„è®ºä¸‹é¢çœ‹åˆ°å¥½å‡ ä¸ªäººéƒ½è¿™ä¹ˆè¯´ã€‚è¿™ä¸ªè§‚ç‚¹æ˜¯ä¸å¯¹çš„ï¼Œé¦–å…ˆè°ƒç”¨insertæ–¹æ³•å¤–å±‚æ–¹æ³•ï¼ˆ<code>grabCouponTrans</code>ï¼‰æ˜¯è¢«@Transactionalæ ‡è®°çš„ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯é€šè¿‡springç®¡ç†çš„å®¹å™¨å¯¹è±¡ç®¡ç†çš„ï¼Œæ‰€ä»¥ä¸ä¼šå› ä¸ºåœ¨äº‹åŠ¡æ–¹æ³•å†…éƒ¨è¿›è¡Œäº†thisè°ƒç”¨å¯¼è‡´è¿™ä¸ªthisè°ƒç”¨æ–¹æ³•ä¸åœ¨äº‹åŠ¡å†…ã€‚åªæ˜¯è¿™ä¸ªthisè°ƒç”¨çš„æ–¹æ³•æ²¡æœ‰è¢«ä»£ç†ï¼Œé»˜è®¤åŠ å…¥åˆ°å¤–å±‚æ–¹æ³•çš„äº‹åŠ¡é‡Œé¢äº†ã€‚</li>
</ul>
<h4 data-id="heading-4">ä¸»ä»è¯»å†™ä¸ä¸€è‡´ï¼Ÿ</h4>
<p>è¿™ä¸ªé—®é¢˜æ­£å¸¸æ¥è¯´å¼€å¯äº†éåªè¯»äº‹åŠ¡ä¹‹åï¼Œåº”è¯¥è¯»å†™éƒ½èµ°çš„æ˜¯ä¸»åº“ã€‚ä½†æ˜¯æˆ‘debugäº†ä¸€ä¸‹ äº‹åŠ¡çš„è¯»å–å±…ç„¶æ˜¯èµ°çš„ä»åº“ï¼Ÿï¼Ÿ</p>
<pre><code class="hljs language-js" lang="js">[<span class="hljs-number">2026</span>-<span class="hljs-number">01</span>-<span class="hljs-number">04</span> <span class="hljs-number">23</span>:<span class="hljs-number">32</span>:<span class="hljs-number">42</span>] [<span class="hljs-number">230</span>] [com.<span class="hljs-property">kingbase8</span>.<span class="hljs-property">dispatcher</span>.<span class="hljs-property">executor</span>.<span class="hljs-property">DispatchAbstractStatement</span>--&gt;executeTemplet] 
<span class="hljs-title class_">Send</span> to slave <span class="hljs-attr">session</span>: (session={com.<span class="hljs-property">kingbase8</span>.<span class="hljs-property">dispatcher</span>.<span class="hljs-property">entity</span>.<span class="hljs-property">DispatchConnection</span>@e3cc839}
url={<span class="hljs-attr">jdbc</span>:<span class="hljs-attr">kingbase8</span>:<span class="hljs-comment">//ä»åº“IP:ä»åº“port/ghbase} </span>
st={<span class="hljs-variable constant_">SELECT</span> id,..... <span class="hljs-variable constant_">FROM</span> xx_table <span class="hljs-variable constant_">WHERE</span> id = <span class="hljs-number">5099</span>} _sqlType={select})

</code></pre>
<p>ç„¶åå†™åº“åˆæ˜¯ç”¨ä¸»åº“</p>
<pre><code class="hljs language-js" lang="js">[<span class="hljs-number">2026</span>-<span class="hljs-number">01</span>-<span class="hljs-number">04</span> <span class="hljs-number">23</span>:<span class="hljs-number">39</span>:<span class="hljs-number">23</span>] [<span class="hljs-number">230</span>] [com.<span class="hljs-property">kingbase8</span>.<span class="hljs-property">dispatcher</span>.<span class="hljs-property">executor</span>.<span class="hljs-property">DispatchAbstractStatement</span>--&gt;executeTemplet] 
<span class="hljs-title class_">Send</span> to master <span class="hljs-attr">session</span>: (session={com.<span class="hljs-property">kingbase8</span>.<span class="hljs-property">dispatcher</span>.<span class="hljs-property">entity</span>.<span class="hljs-property">DispatchConnection</span>@e3cc839} 
url={<span class="hljs-attr">jdbc</span>:<span class="hljs-attr">kingbase8</span>:<span class="hljs-comment">//ä¸»åº“iP:port/ghbase?_hostLoadRate=0} st={INSERT INTO xx_table (id....) VALUES (...........)</span>
<span class="hljs-variable constant_">RETURNING</span> <span class="hljs-string">"id"</span>} _sqlType={insert or <span class="hljs-keyword">delete</span> or update})
</code></pre>
<blockquote>
<p>æˆ‘ä»¥ä¸ºè¿™å°±æ˜¯é—®é¢˜æºå¤´äº†ğŸ˜±ï¼Œäº‹åŠ¡é‡Œé¢å¾—æŸ¥è¯¢ä¼šèµ°ä»åº“ã€‚å½“æˆ‘ç»§ç»­debugå¾—æ—¶å€™ï¼Œå‘ç°åœ¨æ‰§è¡Œäº‹åŠ¡æ³¨è§£æ ‡è®°å¾—æ–¹æ³•æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰æ‰§è¡Œ<code>æ›´æ–°SQLï¼ˆDMLï¼‰</code>é‚£ä¹ˆæŸ¥è¯¢å°±ä¸€ç›´èµ°ä»åº“ï¼Œç›´åˆ°æ‰§è¡Œæ›´æ–°æ•°æ®SQLï¼ˆDMLï¼‰çš„æ—¶å€™ï¼Œåé¢çš„æŸ¥è¯¢ä¹Ÿéƒ½èµ°ä¸»åº“äº†ã€‚</p>
</blockquote>
<h3 data-id="heading-5">äºŒã€å¼‚å¸¸æ—¥å¿—åˆ†æ</h3>
<h4 data-id="heading-6">1. Couldn't commit jdbc connection. FATAL: terminating connection due to conflict with recovery(å¶å°”å‡ºç°ä»»ä½•ä¸šåŠ¡)</h4>
<p>è¿™ä¸ªå¼‚å¸¸æ—¶è¿˜æ²¡åˆ°ä¸šåŠ¡é«˜å³°çš„æ—¶å€™ï¼Œè¿™ä¸ªé—®é¢˜å°±æ˜¯<code>Quartz</code>åœ¨ç»´æŠ¤å†…éƒ¨çŠ¶æ€çš„æ—¶å€™å‡ºç°çš„æŠ¥é”™ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">01</span>:<span class="hljs-number">01</span>:<span class="hljs-number">01</span><span class="hljs-number">.581</span> [<span class="hljs-title class_">QuartzScheduler</span>_MyScheduler-cdszgh-szhpt-41766404430759_ClusterManager] <span class="hljs-variable constant_">ERROR</span> o.<span class="hljs-property">s</span>.<span class="hljs-property">s</span>.<span class="hljs-property">q</span>.<span class="hljs-property">LocalDataSourceJobStore</span> - [manage,<span class="hljs-number">3941</span>] - <span class="hljs-title class_">ClusterManager</span>: <span class="hljs-title class_">Error</span> managing <span class="hljs-attr">cluster</span>: <span class="hljs-title class_">Couldn</span><span class="hljs-string">'t commit jdbc connection. FATAL: terminating connection due to conflict with recovery
  Detail: User was holding a relation lock for too long.
  Hint: In a moment you should be able to reconnect to the database and repeat your command.
org.quartz.JobPersistenceException: Couldn'</span>t commit jdbc connection. <span class="hljs-attr">FATAL</span>: terminating connection due to conflict <span class="hljs-keyword">with</span> recovery
  <span class="hljs-title class_">Detail</span>: <span class="hljs-title class_">User</span> was holding a relation lock <span class="hljs-keyword">for</span> too long.
  <span class="hljs-title class_">Hint</span>: <span class="hljs-title class_">In</span> a moment you should be able to reconnect to the database and repeat your command.
	at org.<span class="hljs-property">quartz</span>.<span class="hljs-property">impl</span>.<span class="hljs-property">jdbcjobstore</span>.<span class="hljs-property">JobStoreSupport</span>.<span class="hljs-title function_">commitConnection</span>(<span class="hljs-title class_">JobStoreSupport</span>.<span class="hljs-property">java</span>:<span class="hljs-number">3749</span>)
	at org.<span class="hljs-property">quartz</span>.<span class="hljs-property">impl</span>.<span class="hljs-property">jdbcjobstore</span>.<span class="hljs-property">JobStoreSupport</span>.<span class="hljs-title function_">doCheckin</span>(<span class="hljs-title class_">JobStoreSupport</span>.<span class="hljs-property">java</span>:<span class="hljs-number">3331</span>)
	at org.<span class="hljs-property">quartz</span>.<span class="hljs-property">impl</span>.<span class="hljs-property">jdbcjobstore</span>.<span class="hljs-property">JobStoreSupport$ClusterManager</span>.<span class="hljs-title function_">manage</span>(<span class="hljs-title class_">JobStoreSupport</span>.<span class="hljs-property">java</span>:<span class="hljs-number">3935</span>)
	at org.<span class="hljs-property">quartz</span>.<span class="hljs-property">impl</span>.<span class="hljs-property">jdbcjobstore</span>.<span class="hljs-property">JobStoreSupport$ClusterManager</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">JobStoreSupport</span>.<span class="hljs-property">java</span>:<span class="hljs-number">3972</span>)
</code></pre>
<h5 data-id="heading-7">âœ”åŸå› åˆ†æ</h5>
<p>PostgreSQL æ•°æ®åº“å› ä¸ºæ£€æµ‹åˆ°Â  <strong>"relation lock æŒæœ‰æ—¶é—´è¿‡é•¿"</strong> Â è€Œä¸»åŠ¨ç»ˆæ­¢äº†è¿æ¥ã€‚è¿™æ˜¯ PostgreSQL åœ¨<strong>ä¸»ä»å¤åˆ¶ï¼ˆæµå¤åˆ¶ï¼‰æˆ–æ¢å¤æ¨¡å¼</strong>ä¸‹çš„ä¸€ç§ä¿æŠ¤æœºåˆ¶ã€‚</p>
<p>ğŸ’¦å¼•å‘è¿™ä¸ªé—®é¢˜çš„åŸå› å¯èƒ½æ˜¯ï¼šPostgreSQL å¤‡æœºæ¢å¤å‹åŠ›å¤§ã€<strong>ç½‘ç»œå»¶è¿Ÿ</strong> å¯¼è‡´å¤åˆ¶ç¼“æ…¢ã€æ•°æ®åº“æœåŠ¡å™¨èµ„æºä¸è¶³</p>
<ol>
<li>
<p><strong>PostgreSQL æ¢å¤å†²çªå¤„ç†</strong></p>
<ul>
<li>å½“ PostgreSQL å¤‡æœºæ­£åœ¨æ‰§è¡Œ WAL æ¢å¤æ—¶</li>
<li>å¦‚æœæœ‰é•¿æ—¶é—´çš„äº‹åŠ¡é”å®šäº†æŸäº›è¡¨ï¼ˆrelation lockï¼‰</li>
<li>ä¸»ä»åŒæ­¥å¯èƒ½ä¼šè¢«é˜»å¡</li>
<li>ä¸ºäº†ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼ŒPostgreSQL ä¼šå¼ºåˆ¶ç»ˆæ­¢æŒæœ‰é”è¿‡é•¿çš„ä¼šè¯</li>
</ul>
</li>
<li>
<p><strong>Quartz é›†ç¾¤ç®¡ç†æœºåˆ¶</strong></p>
<ul>
<li><code>ClusterManager</code>Â çº¿ç¨‹å®šæœŸæ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼ˆé»˜è®¤æ¯ 15-30 ç§’ï¼‰</li>
<li>éœ€è¦è·å–æ•°æ®åº“é”æ¥ç»´æŠ¤é›†ç¾¤ä¸€è‡´æ€§</li>
<li>å¦‚æœè¿™ä¸ªæ“ä½œè€—æ—¶è¿‡é•¿ï¼Œå°±ä¼šè§¦å‘ PostgreSQL çš„ä¿æŠ¤æœºåˆ¶</li>
</ul>
</li>
</ol>
<h4 data-id="heading-8">2.org.apache.catalina.connector.ClientAbortException: java.io.IOException: æ–­å¼€çš„ç®¡é“ï¼ˆå„ä¸šåŠ¡é¢‘ç¹å‡ºç°ï¼‰</h4>
<p>è¿™ä¸ªé—®é¢˜å‡ºç°åœ¨äº†æ•°æ®åº“æœåŠ¡å™¨CPUå·²ç»æ˜¯æ‹‰æ»¡çš„çŠ¶æ€äº†ï¼Œåº”è¯¥æ˜¯ç”¨æˆ·çš„è¯·æ±‚å·²ç»å¼€å§‹é˜»å¡äº†</p>
<pre><code class="hljs language-js" lang="js">org.<span class="hljs-property">apache</span>.<span class="hljs-property">catalina</span>.<span class="hljs-property">connector</span>.<span class="hljs-property">ClientAbortException</span>: java.<span class="hljs-property">io</span>.<span class="hljs-property">IOException</span>: æ–­å¼€çš„ç®¡é“
	at org.<span class="hljs-property">apache</span>.<span class="hljs-property">catalina</span>.<span class="hljs-property">connector</span>.<span class="hljs-property">OutputBuffer</span>.<span class="hljs-title function_">realWriteBytes</span>(<span class="hljs-title class_">OutputBuffer</span>.<span class="hljs-property">java</span>:<span class="hljs-number">342</span>)
	at org.<span class="hljs-property">apache</span>.<span class="hljs-property">catalina</span>.<span class="hljs-property">connector</span>.<span class="hljs-property">OutputBuffer</span>.<span class="hljs-title function_">flushByteBuffer</span>(<span class="hljs-title class_">OutputBuffer</span>.<span class="hljs-property">java</span>:<span class="hljs-number">777</span>)
	at org.<span class="hljs-property">apache</span>.<span class="hljs-property">catalina</span>.<span class="hljs-property">connector</span>.<span class="hljs-property">OutputBuffer</span>.<span class="hljs-title function_">append</span>(<span class="hljs-title class_">OutputBuffer</span>.<span class="hljs-property">java</span>:<span class="hljs-number">674</span>)
	at org.<span class="hljs-property">apache</span>.<span class="hljs-property">catalina</span>.<span class="hljs-property">connector</span>.<span class="hljs-property">OutputBuffer</span>.<span class="hljs-title function_">writeBytes</span>(<span class="hljs-title class_">OutputBuffer</span>.<span class="hljs-property">java</span>:<span class="hljs-number">377</span>)
	at org.<span class="hljs-property">apache</span>.<span class="hljs-property">catalina</span>.<span class="hljs-property">connector</span>.<span class="hljs-property">OutputBuffer</span>.<span class="hljs-title function_">write</span>(<span class="hljs-title class_">OutputBuffer</span>.<span class="hljs-property">java</span>:<span class="hljs-number">355</span>)
	at org.<span class="hljs-property">apache</span>.<span class="hljs-property">catalina</span>.<span class="hljs-property">connector</span>.<span class="hljs-property">CoyoteOutputStream</span>.<span class="hljs-title function_">write</span>(<span class="hljs-title class_">CoyoteOutputStream</span>.<span class="hljs-property">java</span>:<span class="hljs-number">101</span>)
	at .......................
	at......................... com.<span class="hljs-property">fasterxml</span>.<span class="hljs-property">jackson</span>.<span class="hljs-property">databind</span>.<span class="hljs-property">ser</span>.<span class="hljs-property">std</span>.<span class="hljs-property">BeanSerializerBase</span>.<span class="hljs-title function_">serializeFields</span>(<span class="hljs-title class_">BeanSerializerBase</span>.<span class="hljs-property">java</span>:<span class="hljs-number">774</span>)
	at com.<span class="hljs-property">fasterxml</span>.<span class="hljs-property">jackson</span>.<span class="hljs-property">databind</span>.<span class="hljs-property">ser</span>.<span class="hljs-property">BeanSerializer</span>.<span class="hljs-title function_">serialize</span>(<span class="hljs-title class_">BeanSerializer</span>.<span class="hljs-property">java</span>:<span class="hljs-number">178</span>)
	at com.<span class="hljs-property">fasterxml</span>.<span class="hljs-property">jackson</span>.<span class="hljs-property">databind</span>.<span class="hljs-property">ser</span>.<span class="hljs-property">DefaultSerializerProvider</span>.<span class="hljs-title function_">_serialize</span>(<span class="hljs-title class_">DefaultSerializerProvider</span>.<span class="hljs-property">java</span>:<span class="hljs-number">480</span>)
	at com.<span class="hljs-property">fasterxml</span>.<span class="hljs-property">jackson</span>.<span class="hljs-property">databind</span>.<span class="hljs-property">ser</span>.<span class="hljs-property">DefaultSerializerProvider</span>.<span class="hljs-title function_">serializeValue</span>(<span class="hljs-title class_">DefaultSerializerProvider</span>.<span class="hljs-property">java</span>:<span class="hljs-number">319</span>)
	at com.<span class="hljs-property">fasterxml</span>.<span class="hljs-property">jackson</span>.<span class="hljs-property">databind</span>.<span class="hljs-property">ObjectWriter$Prefetch</span>.<span class="hljs-title function_">serialize</span>(<span class="hljs-title class_">ObjectWriter</span>.<span class="hljs-property">java</span>:<span class="hljs-number">1518</span>)
	at com.<span class="hljs-property">fasterxml</span>.<span class="hljs-property">jackson</span>.<span class="hljs-property">databind</span>.<span class="hljs-property">ObjectWriter</span>.<span class="hljs-title function_">writeValue</span>(<span class="hljs-title class_">ObjectWriter</span>.<span class="hljs-property">java</span>:<span class="hljs-number">1007</span>)
</code></pre>
<h5 data-id="heading-9">âœ”åŸå› åˆ†æ</h5>
<p><strong>è¿™æ˜¯æ­£å¸¸çš„ç”¨æˆ·è¡Œä¸ºå¯¼è‡´çš„å¼‚å¸¸</strong>ï¼Œä¸æ˜¯ç¨‹åºbugã€‚åº”è¯¥ä¼˜é›…å¤„ç†è€Œä¸æ˜¯æŠ¥ERRORæ—¥å¿—ï¼Œé¿å…æ—¥å¿—æ–‡ä»¶è¢«è¿™ç±»æ— å…³ç´§è¦çš„é”™è¯¯ä¿¡æ¯æ·¹æ²¡ã€‚</p>
<h4 data-id="heading-10">3.Cause: java.sql.SQLException: Send to master from switch slave retry failare maxtimes still SQLException: FATAL: terminating connection due to administrator commandï¼ˆå„ä¸šåŠ¡é¢‘ç¹å‡ºç°ï¼‰</h4>
<p>è¿™ä¸ªæŠ¥é”™ä¹Ÿæ˜¯é›†ä¸­å‡ºç°åœ¨CPUæ‹‰æ»¡çš„æƒ…å†µï¼Œå¯¼è‡´å¾ˆå¤šæŸ¥è¯¢å°±ç›´æ¥æŠ¥é”™äº†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Cause</span>: java.<span class="hljs-property">sql</span>.<span class="hljs-property">SQLException</span>: <span class="hljs-title class_">Send</span> to master <span class="hljs-keyword">from</span> <span class="hljs-keyword">switch</span> slave retry failare maxtimes still <span class="hljs-title class_">SQLException</span>: <span class="hljs-attr">FATAL</span>: terminating connection due to administrator command
; <span class="hljs-title class_">Send</span> to master <span class="hljs-keyword">from</span> <span class="hljs-keyword">switch</span> slave retry failare maxtimes still <span class="hljs-title class_">SQLException</span>: <span class="hljs-attr">FATAL</span>: terminating connection due to administrator command; nested exception is java.<span class="hljs-property">sql</span>.<span class="hljs-property">SQLException</span>: <span class="hljs-title class_">Send</span> to master <span class="hljs-keyword">from</span> <span class="hljs-keyword">switch</span> slave retry failare maxtimes still <span class="hljs-title class_">SQLException</span>: <span class="hljs-attr">FATAL</span>: terminating connection due to administrator command
	at org.<span class="hljs-property">springframework</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">support</span>.<span class="hljs-property">SQLStateSQLExceptionTranslator</span>.<span class="hljs-title function_">doTranslate</span>(<span class="hljs-title class_">SQLStateSQLExceptionTranslator</span>.<span class="hljs-property">java</span>:<span class="hljs-number">107</span>)
	at org.<span class="hljs-property">springframework</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">support</span>.<span class="hljs-property">AbstractFallbackSQLExceptionTranslator</span>.<span class="hljs-title function_">translate</span>(<span class="hljs-title class_">AbstractFallbackSQLExceptionTranslator</span>.<span class="hljs-property">java</span>:<span class="hljs-number">70</span>)
	at org.<span class="hljs-property">springframework</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">support</span>.<span class="hljs-property">AbstractFallbackSQLExceptionTranslator</span>.<span class="hljs-title function_">translate</span>(<span class="hljs-title class_">AbstractFallbackSQLExceptionTranslator</span>.<span class="hljs-property">java</span>:<span class="hljs-number">79</span>)
	at org.<span class="hljs-property">springframework</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">support</span>.<span class="hljs-property">AbstractFallbackSQLExceptionTranslator</span>.<span class="hljs-title function_">translate</span>(<span class="hljs-title class_">AbstractFallbackSQLExceptionTranslator</span>.<span class="hljs-property">java</span>:<span class="hljs-number">79</span>)
	at org.<span class="hljs-property">mybatis</span>.<span class="hljs-property">spring</span>.<span class="hljs-property">MyBatisExceptionTranslator</span>.<span class="hljs-title function_">translateExceptionIfPossible</span>(<span class="hljs-title class_">MyBatisExceptionTranslator</span>.<span class="hljs-property">java</span>:<span class="hljs-number">91</span>)
	at org.<span class="hljs-property">mybatis</span>.<span class="hljs-property">spring</span>.<span class="hljs-property">SqlSessionTemplate$SqlSessionInterceptor</span>.<span class="hljs-title function_">invoke</span>(<span class="hljs-title class_">SqlSessionTemplate</span>.<span class="hljs-property">java</span>:<span class="hljs-number">441</span>)
	at com.<span class="hljs-property">sun</span>.<span class="hljs-property">proxy</span>.<span class="hljs-property">$Proxy177</span>.<span class="hljs-title function_">selectList</span>(<span class="hljs-title class_">Unknown</span> <span class="hljs-title class_">Source</span>)
	at org.<span class="hljs-property">mybatis</span>.<span class="hljs-property">spring</span>.<span class="hljs-property">SqlSessionTemplate</span>.<span class="hljs-title function_">selectList</span>(<span class="hljs-title class_">SqlSessionTemplate</span>.<span class="hljs-property">java</span>:<span class="hljs-number">224</span>)
	at com.<span class="hljs-property">baomidou</span>.<span class="hljs-property">mybatisplus</span>.<span class="hljs-property">core</span>.<span class="hljs-property">override</span>.<span class="hljs-property">MybatisMapperMethod</span>.<span class="hljs-title function_">executeForMany</span>(<span class="hljs-title class_">MybatisMapperMethod</span>.<span class="hljs-property">java</span>:<span class="hljs-number">166</span>)
	at com.<span class="hljs-property">baomidou</span>.<span class="hljs-property">mybatisplus</span>.<span class="hljs-property">core</span>.<span class="hljs-property">override</span>.<span class="hljs-property">MybatisMapperMethod</span>.<span class="hljs-title function_">execute</span>(<span class="hljs-title class_">MybatisMapperMethod</span>.<span class="hljs-property">java</span>:<span class="hljs-number">77</span>)
	at com.<span class="hljs-property">baomidou</span>.<span class="hljs-property">mybatisplus</span>.<span class="hljs-property">core</span>.<span class="hljs-property">override</span>.<span class="hljs-property">MybatisMapperProxy$PlainMethodInvoker</span>.<span class="hljs-title function_">invoke</span>(<span class="hljs-title class_">MybatisMapperProxy</span>.<span class="hljs-property">java</span>:<span class="hljs-number">148</span>)
	at com.<span class="hljs-property">baomidou</span>.<span class="hljs-property">mybatisplus</span>.<span class="hljs-property">core</span>.<span class="hljs-property">override</span>.<span class="hljs-property">MybatisMapperProxy</span>.<span class="hljs-title function_">invoke</span>(<span class="hljs-title class_">MybatisMapperProxy</span>.<span class="hljs-property">java</span>:<span class="hljs-number">89</span>)
	at com.<span class="hljs-property">sun</span>.<span class="hljs-property">proxy</span>.<span class="hljs-property">$Proxy386</span>.<span class="hljs-title function_">findStatisticsVoByActivityIdList</span>(<span class="hljs-title class_">Unknown</span> <span class="hljs-title class_">Source</span>)
	at 
...................ä¸šåŠ¡ä»£ç æ–¹æ³•çš„ä¸€äº›æ–¹æ³•æ ˆä¿¡æ¯(çœç•¥).............................................
</code></pre>
<h5 data-id="heading-11">âœ”åŸå› åˆ†æ</h5>
<ul>
<li>ä»åº“å»¶è¿Ÿä¸¥é‡ï¼ŒæŸ¥è¯¢è¶…æ—¶</li>
<li>ä¸»åº“è´Ÿè½½è¿‡é«˜ï¼Œæ— æ³•å¤„ç†è¯·æ±‚</li>
<li><strong>ç½‘ç»œé—®é¢˜</strong>å¯¼è‡´è¿æ¥ä¸ç¨³å®š</li>
<li>æ•°æ®åº“ç®¡ç†å‘˜æ‰§è¡Œäº†ç»´æŠ¤æ“ä½œï¼ˆå¦‚ï¼šé‡å¯ã€killè¿æ¥ã€æ•°æ®åº“è‡ªåŠ¨killé•¿æ—¶é—´è¿è¡Œçš„æŸ¥è¯¢ï¼‰</li>
</ul>
<blockquote>
<p>â—é”™è¯¯ï¼š"terminating connection due to administrator command"
â†’ DBAå¯èƒ½æ‰§è¡Œäº†ï¼šSELECT pg_terminate_backend(pid);
â†’ æˆ–æ•°æ®åº“è‡ªåŠ¨killäº†é•¿æ—¶é—´è¿è¡Œçš„æŸ¥è¯¢</p>
</blockquote>
<h4 data-id="heading-12">4. java.net.SocketTimeoutException: Read timed outï¼ˆå„ä¸šåŠ¡é¢‘ç¹å‡ºç°ï¼‰</h4>
<p>åœ¨CPUæ‹‰æ»¡çš„æƒ…å†µä¸‹å‡ºç°å¤§é‡çš„<code>read timed out</code>è¯»å–æ•°æ®åº“å“åº”çš„æ—¶å€™å°±è¶…æ—¶äº†ã€‚
åœ¨ä¸šåŠ¡ä½å³°çš„æ—¶å€™<code>commit</code> äº‹åŠ¡çš„æ—¶å€™ä¹Ÿå‡ºç°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå¢åŠ socketè¶…æ—¶æ—¶é—´å¯ä»¥é™ä½è¿™ä¸ªé”™è¯¯çš„å‘ç”Ÿã€‚</p>
<p>ä¸‹é¢çš„selectè¯­å¥ä¹Ÿæ˜¯ é¢†å–äº‹åŠ¡ä¸­çš„ æ›´æ–°æ•°æ®å‰çš„ä¸€äº›å‰ç½®æŸ¥è¯¢SQL</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">50</span>:<span class="hljs-number">12.101</span> [http-nio-<span class="hljs-number">8077</span>-exec-<span class="hljs-number">78</span>] <span class="hljs-variable constant_">ERROR</span> druid.<span class="hljs-property">sql</span>.<span class="hljs-property">Statement</span> - [statementLogError,<span class="hljs-number">148</span>] - {conn-<span class="hljs-number">10567</span>, pstmt-<span class="hljs-number">277353</span>} execute error.
<span class="hljs-variable constant_">SELECT</span> * <span class="hljs-keyword">from</span> å¾…é¢†å–çš„ç‰©å“æ•°æ®
com.<span class="hljs-property">kingbase8</span>.<span class="hljs-property">util</span>.<span class="hljs-property">KSQLException</span>: <span class="hljs-title class_">An</span> I/O error occurred <span class="hljs-keyword">while</span> sending to the backend.
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">core</span>.<span class="hljs-property">v3</span>.<span class="hljs-property">QueryExecutorImpl</span>.<span class="hljs-title function_">execute</span>(<span class="hljs-title class_">QueryExecutorImpl</span>.<span class="hljs-property">java</span>:<span class="hljs-number">428</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbStatement</span>.<span class="hljs-title function_">executeInternal_</span>(<span class="hljs-title class_">KbStatement</span>.<span class="hljs-property">java</span>:<span class="hljs-number">784</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbStatement</span>.<span class="hljs-title function_">execute</span>(<span class="hljs-title class_">KbStatement</span>.<span class="hljs-property">java</span>:<span class="hljs-number">676</span>)
	at com.<span class="hljs-property">kingbase8</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbPreparedStatement</span>.<span class="hljs-title function_">executeWithFlags</span>(<span class="hljs-title class_">KbPreparedStatement</span>.<span class="hljs-property">java</span>:<span class="hljs-number">286</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbPreparedStatement</span>.<span class="hljs-title function_">execute</span>(<span class="hljs-title class_">KbPreparedStatement</span>.<span class="hljs-property">java</span>:<span class="hljs-number">265</span>)
        
        <span class="hljs-title class_">Caused</span> <span class="hljs-attr">by</span>: java.<span class="hljs-property">net</span>.<span class="hljs-property">SocketTimeoutException</span>: <span class="hljs-title class_">Read</span> timed out
	at java.<span class="hljs-property">net</span>.<span class="hljs-property">SocketInputStream</span>.<span class="hljs-title function_">socketRead0</span>(<span class="hljs-title class_">Native</span> <span class="hljs-title class_">Method</span>)
	at java.<span class="hljs-property">net</span>.<span class="hljs-property">SocketInputStream</span>.<span class="hljs-title function_">socketRead</span>(<span class="hljs-title class_">SocketInputStream</span>.<span class="hljs-property">java</span>:<span class="hljs-number">116</span>)
	at java.<span class="hljs-property">net</span>.<span class="hljs-property">SocketInputStream</span>.<span class="hljs-title function_">read</span>(<span class="hljs-title class_">SocketInputStream</span>.<span class="hljs-property">java</span>:<span class="hljs-number">171</span>)
	at java.<span class="hljs-property">net</span>.<span class="hljs-property">SocketInputStream</span>.<span class="hljs-title function_">read</span>(<span class="hljs-title class_">SocketInputStream</span>.<span class="hljs-property">java</span>:<span class="hljs-number">141</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">core</span>.<span class="hljs-property">VisibleBufferedInputStream</span>.<span class="hljs-title function_">readMore</span>(<span class="hljs-title class_">VisibleBufferedInputStream</span>.<span class="hljs-property">java</span>:<span class="hljs-number">210</span>)
</code></pre>
<h5 data-id="heading-13">âœ”åŸå› åˆ†æ</h5>
<p>è¿™ä¸ªé—®é¢˜ä»¥å‰ä¹Ÿæ˜¯ä¸€ç›´éƒ½å­˜åœ¨çš„ï¼ŒCPUç©ºé—²çš„ä¹Ÿä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œç°åœ¨CPUæ‰“æ»¡ä¹‹åå°±å‡ºç°å¤§é‡çš„è¯·æ±‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0eee73d829774b48ae617cb22d309021~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o-Q5YmN6YCA5LyR55qEamF2YeeMvw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768833548&amp;x-signature=x3LJNgKdRKgp%2Fgm5%2BLtJHGHwVFw%3D" alt="4dc309fe-0ecf-49dd-afa7-dc022f64aae0.png" loading="lazy"/></p>
<h4 data-id="heading-14">5.ğŸ’¢om.kingbase8.util.KSQLException: This _connection has been closed.ï¼ˆå„ä¸šåŠ¡é¢‘ç¹å‡ºç°ï¼‰</h4>
<p>è¿™ä¸ªé”™æ˜¯æ¯”è¾ƒå…³é”®çš„é”™è¯¯äº†ï¼æ¶‰åŠæŠ¥é”™çš„SQLåŸºæœ¬å°±æ˜¯æˆ‘ä»¬é¢†å–ç‰©å“äº‹åŠ¡ä¸­çš„SQLäº†ã€‚åœ¨æ—¥å¿—æ–‡ä»¶ä¸­åœ¨CPUæ‰“æ»¡è¿™æ®µæ—¶é—´å†…å‡ºç°å¾—éå¸¸ä¹‹å¤šã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">49</span>:<span class="hljs-number">56.569</span> [http-nio-<span class="hljs-number">8077</span>-exec-<span class="hljs-number">41</span>] <span class="hljs-variable constant_">ERROR</span> druid.<span class="hljs-property">sql</span>.<span class="hljs-property">Statement</span> - 
[statementLogError,<span class="hljs-number">148</span>] - {conn-<span class="hljs-number">10529</span>, pstmt-<span class="hljs-number">276494</span>} execute error. 
<span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> xx_lottery_xx (xx, xx, xx,) <span class="hljs-variable constant_">VALUES</span> (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
com.<span class="hljs-property">xx</span>.<span class="hljs-property">util</span>.<span class="hljs-property">KSQLException</span>: <span class="hljs-title class_">This</span> _connection has been closed.
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbConnection</span>.<span class="hljs-title function_">checkIsClosed</span>(<span class="hljs-title class_">KbConnection</span>.<span class="hljs-property">java</span>:<span class="hljs-number">1401</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbConnection</span>.<span class="hljs-title function_">getAutoCommit</span>(<span class="hljs-title class_">KbConnection</span>.<span class="hljs-property">java</span>:<span class="hljs-number">1329</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbStatement</span>.<span class="hljs-title function_">executeInternal_</span>(<span class="hljs-title class_">KbStatement</span>.<span class="hljs-property">java</span>:<span class="hljs-number">735</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbStatement</span>.<span class="hljs-title function_">execute</span>(<span class="hljs-title class_">KbStatement</span>.<span class="hljs-property">java</span>:<span class="hljs-number">676</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbPreparedStatement</span>.<span class="hljs-title function_">executeWithFlags</span>(<span class="hljs-title class_">KbPreparedStatement</span>.<span class="hljs-property">jav</span>
        
        ........<span class="hljs-property">insert</span> é¢†å–è®°å½•..............................
        <span class="hljs-variable constant_">ERROR</span> c.<span class="hljs-property">a</span>.<span class="hljs-property">d</span>.<span class="hljs-property">p</span>.<span class="hljs-property">DruidDataSource</span> - [recycle,<span class="hljs-number">2146</span>] - recycle error
com.<span class="hljs-property">xx</span>.<span class="hljs-property">util</span>.<span class="hljs-property">KSQLException</span>: <span class="hljs-title class_">This</span> _connection has been closed.
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbConnection</span>.<span class="hljs-title function_">checkIsClosed</span>(<span class="hljs-title class_">KbConnection</span>.<span class="hljs-property">java</span>:<span class="hljs-number">1401</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">KbConnection</span>.<span class="hljs-title function_">setAutoCommit</span>(<span class="hljs-title class_">KbConnection</span>.<span class="hljs-property">java</span>:<span class="hljs-number">1288</span>)
	at com.<span class="hljs-property">xx</span>.<span class="hljs-property">dispatcher</span>.<span class="hljs-property">entity</span>.<span class="hljs-property">DispatchConnection</span>.<span class="hljs-title function_">setAutoCommit</span>(<span class="hljs-title class_">DispatchConnection</span>.<span class="hljs-property">java</span>:<span class="hljs-number">1115</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">filter</span>.<span class="hljs-property">FilterChainImpl</span>.<span class="hljs-title function_">connection_setAutoCommit</span>(<span class="hljs-title class_">FilterChainImpl</span>.<span class="hljs-property">java</span>:<span class="hljs-number">699</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">filter</span>.<span class="hljs-property">logging</span>.<span class="hljs-property">LogFilter</span>.<span class="hljs-title function_">connection_setAutoCommit</span>(<span class="hljs-title class_">LogFilter</span>.<span class="hljs-property">java</span>:<span class="hljs-number">467</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">filter</span>.<span class="hljs-property">FilterChainImpl</span>.<span class="hljs-title function_">connection_setAutoCommit</span>(<span class="hljs-title class_">FilterChainImpl</span>.<span class="hljs-property">java</span>:<span class="hljs-number">694</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">filter</span>.<span class="hljs-property">FilterAdapter</span>.<span class="hljs-title function_">connection_setAutoCommit</span>(<span class="hljs-title class_">FilterAdapter</span>.<span class="hljs-property">java</span>:<span class="hljs-number">964</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">filter</span>.<span class="hljs-property">FilterChainImpl</span>.<span class="hljs-title function_">connection_setAutoCommit</span>(<span class="hljs-title class_">FilterChainImpl</span>.<span class="hljs-property">java</span>:<span class="hljs-number">694</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">proxy</span>.<span class="hljs-property">jdbc</span>.<span class="hljs-property">ConnectionProxyImpl</span>.<span class="hljs-title function_">setAutoCommit</span>(<span class="hljs-title class_">ConnectionProxyImpl</span>.<span class="hljs-property">java</span>:<span class="hljs-number">416</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">pool</span>.<span class="hljs-property">DruidConnectionHolder</span>.<span class="hljs-title function_">reset</span>(<span class="hljs-title class_">DruidConnectionHolder</span>.<span class="hljs-property">java</span>:<span class="hljs-number">387</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">pool</span>.<span class="hljs-property">DruidDataSource</span>.<span class="hljs-title function_">recycle</span>(<span class="hljs-title class_">DruidDataSource</span>.<span class="hljs-property">java</span>:<span class="hljs-number">2053</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">pool</span>.<span class="hljs-property">DruidPooledConnection</span>.<span class="hljs-title function_">recycle</span>(<span class="hljs-title class_">DruidPooledConnection</span>.<span class="hljs-property">java</span>:<span class="hljs-number">343</span>)
	at com.<span class="hljs-property">alibaba</span>.<span class="hljs-property">druid</span>.<span class="hljs-property">filter</span>.<span class="hljs-property">FilterChainImpl</span>.<span class="hljs-title function_">dataSource_recycle</span>(<span class="hljs-title class_">FilterChainImpl</span>.<span class="hljs-property">java</span>:<span class="hljs-number">5047</span>)
        
<span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">44</span>:<span class="hljs-number">22.908</span> [http-nio-<span class="hljs-number">8077</span>-exec-<span class="hljs-number">149</span>] <span class="hljs-variable constant_">ERROR</span> o.<span class="hljs-property">s</span>.<span class="hljs-property">t</span>.<span class="hljs-property">i</span>.<span class="hljs-property">TransactionInterceptor</span> - 
[completeTransactionAfterThrowing,<span class="hljs-number">680</span>] - <span class="hljs-title class_">Application</span> exception overridden by rollback exception
</code></pre>
<h5 data-id="heading-15">âœ”åŸå› åˆ†æ</h5>
<p>å’Œä¸Šé¢çš„æŠ¥é”™å¾ˆç±»ä¼¼ï¼Œåªæ˜¯åœ¨æ’å…¥æ•°æ®çš„æ—¶å€™å‘ç°è¿æ¥æ–­å¼€äº†ï¼Œè¿™æ—¶å€™å›æ»šä¹Ÿæ˜¯æ²¡åŠæ³•çš„ã€‚</p>
<h3 data-id="heading-16">ä¸‰ã€æ•°æ®åº“æ—¥å¿—åˆ†æ</h3>
<p>è¿™ä¸ªæ—¥å¿—æ–‡ä»¶æ˜¯æˆ‘ä»¬éƒ¨é—¨ç»ç†å‘å‡ºæ¥çš„ï¼Œä»€ä¹ˆçº§åˆ«çš„æ—¥å¿—å’±ä¹Ÿä¸çŸ¥é“ï¼Œåº”è¯¥æ˜¯è®°å½•çš„æ…¢SQLçš„å§æˆ–è€…æŠ¥é”™SQLæ—¥å¿—çš„å§ã€‚</p>
<p>ç›´æ¥çœ‹ä¸šåŠ¡é«˜å³°æ—¶æ•°æ®åº“çš„å¼‚å¸¸æ—¥å¿—,å°±åªçœ‹é¢†å–äº‹åŠ¡ä¸­ç›¸å…³SQLçš„æ—¥å¿—</p>
<h4 data-id="heading-17">æƒ…å†µä¸€ï¼š</h4>
<p>ã€1817689ã€‘æ•°æ®åº“åç«¯è¿›ç¨‹ID ï¼Œå½“å‰äº‹åŠ¡çš„å°±åªæœ‰åº“å­˜æ‰£å‡çš„æ—¥å¿—ï¼Œæ‰§è¡Œå®Œæ‰£å‡ä¹‹åå°± ç›´æ¥å‡ºç° <code>unexpected EOF</code>
ï¼ˆæ²¡æœ‰@Transactional æ–¹æ³• ä¸­æ›´æ–°åº“å­˜å‰çš„æŸ¥è¯¢çš„æ—¥å¿—è¯´æ˜æŸ¥è¯¢æ˜¯èµ°äº†ä»åº“ï¼‰</p>
<p>è€Œä¸”è¿™ä¸ªã€1817689ã€‘è¿›ç¨‹åœ¨æŠ›é”™ä¹‹åï¼Œåœ¨æ—¥å¿—æ–‡ä»¶ä¸­çš„ä¸‹æ–‡å°±æ²¡æœ‰æ”¶åˆ°è¿™ä¸ªè¿›ç¨‹äº†ï¼ˆæ‰§è¡Œäº†åº“å­˜æ‰£å‡ç„¶åå°±ç›´æ¥æŠ¥é”™è¢«é”€æ¯äº†â“ï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">08.825</span> <span class="hljs-variable constant_">CST</span> [<span class="hljs-number">1817689</span>] <span class="hljs-attr">LOG</span>:<span class="hljs-attr">duration</span>: <span class="hljs-number">3538.580</span> ms  execute &lt;unnamed&gt;:
<span class="hljs-variable constant_">UPDATE</span> xx <span class="hljs-variable constant_">SET</span> ...(åº“å­˜æ‰£å‡<span class="hljs-variable constant_">SQL</span>)
<span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">08.825</span> <span class="hljs-variable constant_">CST</span> [<span class="hljs-number">1817689</span>] <span class="hljs-attr">DETAIL</span>:  <span class="hljs-attr">parameters</span>: $1 = <span class="hljs-string">'12783'</span>
<span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">08.825</span> <span class="hljs-variable constant_">CST</span> [<span class="hljs-number">1817689</span>] <span class="hljs-attr">LOG</span>:  
unexpected <span class="hljs-variable constant_">EOF</span> on client connection <span class="hljs-keyword">with</span> an open transaction
</code></pre>
<h4 data-id="heading-18">æƒ…å†µäºŒï¼š</h4>
<p>[1872365] æ—¥å¿—ä¸­æœç´¢[1872365]è¿›ç¨‹ï¼Œåªæœ‰ä¸‹é¢ä¸¤è¡ŒğŸŒšï¼Œå°±å¾ˆå¥‡æ€ªï¼Œä¹Ÿæ²¡æœ‰æŠ¥é”™ä¹Ÿæ²¡æœ‰insertè®°å½•çš„æ—¥å¿—ã€‚</p>
<p>å½“æ—¶[1872365] è¿›ç¨‹å‰åéƒ½æœ‰å…¶ä»–æ—¥å¿—ï¼ˆæ˜¯ä¸æ˜¯ä»£è¡¨è¿™ä¸ªè¿›ç¨‹è¿›è¡Œäº†å¤šæ¬¡ä¼šè¯ï¼Œå¯¹åº”çš„é¢†å–ä¸šåŠ¡ä¹Ÿæ˜¯èµ°é€šäº†çš„â“ï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">31.591</span> <span class="hljs-variable constant_">CST</span> [<span class="hljs-number">1872365</span>] <span class="hljs-attr">LOG</span>:  <span class="hljs-attr">duration</span>: <span class="hljs-number">3236.489</span> ms  execute &lt;unnamed&gt;: 
<span class="hljs-variable constant_">UPDATE</span> xx <span class="hljs-variable constant_">SET</span> ...(åº“å­˜æ‰£å‡<span class="hljs-variable constant_">SQL</span>)
<span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">31.591</span> <span class="hljs-variable constant_">CST</span> [<span class="hljs-number">1872365</span>] <span class="hljs-attr">DETAIL</span>:  <span class="hljs-attr">parameters</span>: $1 = <span class="hljs-string">'12786'</span>
</code></pre>
<p>ğŸƒå®Œå…¨çœ‹ä¸æ‡‚è¿™ä¸ªæ—¥å¿—äº†ï¼Œè¢«<code>@Transactional</code> æ ‡è®°çš„æ–¹æ³•æ­£å¸¸é€»è¾‘æ˜¯ åº“å­˜æ‰£å‡ã€ç„¶åæ’å…¥é¢†å–è®°å½•ã€‚ä½†æ˜¯è¿™ä¸ªæ•°æ®åº“æ—¥å¿—åªæœ‰åº“å­˜æ‰£å‡çš„æ—¥å¿—ã€‚</p>
<h3 data-id="heading-19">å››ã€é”™è¯¯æ—¥å¿—å½’çº³æ€»ç»“åˆ†æ</h3>
<p><strong>åº”ç”¨ç¨‹åºçš„é”™è¯¯æ—¥å¿—</strong>ï¼ˆåº“å­˜æ‰£å‡å‡ºç°ä¸¤æ¬¡æŠ¥é”™ï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">1.</span> <span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">51.730</span> åº“å­˜æ‰£å‡å¼‚å¸¸ï¼ˆ<span class="hljs-title class_">This</span> _connection has been closed.ï¼‰ç¨‹åºå‘èµ·å›æ»šå¤±è´¥ï¼ˆ [completeTransactionAfterThrowing,<span class="hljs-number">680</span>] - <span class="hljs-title class_">Application</span> exception overridden by rollback exceptionï¼‰
<span class="hljs-number">2.</span> <span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">28</span>:<span class="hljs-number">28.297</span> åº“å­˜æ‰£å‡å¼‚å¸¸åŒä¸Š
</code></pre>
<p><strong>æ•°æ®åº“æ—¥å¿—</strong>ï¼ˆåº“å­˜æ‰£å‡å‡ºç°ä¸¤æ¬¡æ—¥å¿—ï¼‰ä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">1.</span> <span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">08.825</span> <span class="hljs-variable constant_">CST</span> [<span class="hljs-number">1817689</span>] <span class="hljs-attr">LOG</span>:<span class="hljs-attr">duration</span>: <span class="hljs-number">3538.580</span> ms  execute &lt;unnamed&gt;:
<span class="hljs-variable constant_">UPDATE</span> xx <span class="hljs-variable constant_">SET</span> ...(åº“å­˜æ‰£å‡<span class="hljs-variable constant_">SQL</span>) å‡ºç°ï¼šunexpected <span class="hljs-variable constant_">EOF</span> on client connection <span class="hljs-keyword">with</span> an open transaction

<span class="hljs-number">2.</span> <span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">10</span>:<span class="hljs-number">26</span>:<span class="hljs-number">31.591</span> <span class="hljs-variable constant_">CST</span> [<span class="hljs-number">1872365</span>]  <span class="hljs-attr">duration</span>: <span class="hljs-number">3236.489</span> ms
</code></pre>
<p>âŒæ•°æ®åº“çš„æ—¥å¿—åº“å­˜æ‰£å‡çš„æ—¥å¿—åªæœ‰ä¸¤æ¡ï¼Œä½†æ˜¯æ•°æ®åº“ä¸­çš„é¢†å–è®°å½•æœ‰å¾ˆå¤šï¼Œè¯´æ˜è¿™ä¸ªæ—¥å¿—åº”è¯¥æ˜¯åªè®°å½•äº†éƒ¨åˆ†æ—¥å¿—ã€‚å¯èƒ½æ˜¯è®°å½•çš„æ…¢SQLğŸ˜‚</p>
<p>ğŸ“¢ä½†æ˜¯è¶…é¢†çš„æ•°æ®è¿œä¸æ­¢ä¸¤æ¡æ•°æ®ï¼Œè¯´æ˜è¿™äº›è¶…é¢†çš„æ•°æ®åœ¨æ‰§è¡Œä»£ç çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æ²¡æœ‰æŠ›é”™çš„ï¼Œæ‰€ä»¥æƒ³è¦é€šè¿‡æ—¥å¿—å»å®šä½é—®é¢˜ã€‚æš‚æ—¶æ˜¯ä¸è¡Œçš„</p>
<h2 data-id="heading-20">æ€»ç»“</h2>
<p>ä¸‹é¢çš„ä»£ç ï¼Œæ­£å¸¸æ¥è®²ä¸ç®¡æœ‰æ²¡æœ‰åŠ äº‹åŠ¡ï¼Œéƒ½ä¸å¯èƒ½å‡ºç° åº“å­˜æ‰£å‡æ•°é‡ å¤§äºæ’å…¥è®°å½•æ•°é‡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//âœ… Aæ“ä½œï¼šåº“å­˜æ‰£å‡ï¼Œè¿™ä¸ªåœ°æ–¹å¯¹åº“å­˜-1ï¼Œå¦‚æœæ›´æ–°è¡Œæ•°å¤§ä¸0è¿”å›true</span>
<span class="hljs-comment">//UPDATE t SET num = num -1 WHERE id = #{id} AND num &gt; 0;</span>
<span class="hljs-type">int</span> <span class="hljs-variable">row</span> <span class="hljs-operator">=</span> xxDao.reduceInventoryNoCompleted(id);
<span class="hljs-keyword">if</span> (row&gt;<span class="hljs-number">0</span>) {
<span class="hljs-comment">// âœ…Bæ“ä½œï¼šæ’å…¥é¢†å–è®°å½•ï¼Œæ’å…¥æˆåŠŸè¿”å›</span>
<span class="hljs-literal">true</span> <span class="hljs-type">Boolean</span> <span class="hljs-variable">insetSuc</span> <span class="hljs-operator">=</span> insert(record);
</code></pre>
<p>ä»æ—¥å¿—ä¸Šåº”ç”¨ä¸Šçš„æ—¥å¿—æ¥çœ‹ï¼Œç¡®å®æœ‰äº‹åŠ¡æŠ¥é”™ï¼Œé˜»å¡ï¼Œä»¥åŠä¸èƒ½å›æ»šçš„é—®é¢˜ï¼Œå¥½åƒä¹Ÿä¸èƒ½å¤Ÿè§£é‡Š é¢†å–çš„è®°å½•é‡å¤§äºåº“å­˜æ€»æ•°çš„é—®é¢˜ã€‚</p>
<p>æˆ‘åœ¨ä»£ç ä¸­ä¹Ÿæ²¡æœ‰æ‰¾åˆ°åº“å­˜å›æ»š+1 çš„ä»£ç ï¼Œæ‰€ä»¥ç›®å‰ä¸ºæ­¢æˆ‘ä»ä»£ç å±‚é¢å’Œæ—¥å¿—ä¸Šéƒ½ä¸èƒ½æ‰¾åˆ°åˆ°åº•ä»€ä¹ˆé—®é¢˜å¼•èµ·çš„ã€‚</p>
<p>ä¹‹å‰æŠ–éŸ³ä¸Šæœ‰ç½‘å‹è¯´é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºä¸»ä»å»¶è¿Ÿçš„é—®é¢˜ã€‚</p>
<p><strong>Couldn't commit jdbc connection. FATAL: terminating connection due to conflict with recovery</strong></p>
<p>è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä¹Ÿé—®äº†ä¸€ä¸‹deepSeekï¼Œè¯´çš„å¯èƒ½ä¼šç ´åäº‹åŠ¡çš„åŸå­æ€§ï¼ˆå¯ä¿¡åº¦æœ‰å¾…è€ƒè¯ï¼‰</p>
<p>ğŸ™ˆæŠ±æ­‰è¿™æ˜¯ä¸€ç¯‡æ²¡æœ‰ç­”æ¡ˆçš„æŠ€æœ¯åšå®¢ï¼Œåç»­å¦‚æœæˆ‘ä¹Ÿä¼šæŒç»­è·Ÿè¿›è¿™ä¸ªé—®é¢˜</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å·¥ç¨‹å¸ˆä¹‹å¤œç³»åˆ—åˆ†äº«ç¬¬ä¸‰åä¹ç¯‡ï¼šKafkaã€RocketMQã€JMQ å­˜å‚¨æ¶æ„æ·±åº¦å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7594576956420079642</link>    <guid>https://juejin.cn/post/7594576956420079642</guid>    <pubDate>2026-01-13T06:08:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594576956420079642" data-draft-id="7594415509607301166" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å·¥ç¨‹å¸ˆä¹‹å¤œç³»åˆ—åˆ†äº«ç¬¬ä¸‰åä¹ç¯‡ï¼šKafkaã€RocketMQã€JMQ å­˜å‚¨æ¶æ„æ·±åº¦å¯¹æ¯”"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-13T06:08:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å·¥ç¨‹å¸ˆä¹‹å¤œç³»åˆ—åˆ†äº«ç¬¬ä¸‰åä¹ç¯‡ï¼šKafkaã€RocketMQã€JMQ å­˜å‚¨æ¶æ„æ·±åº¦å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:08:39.000Z" title="Tue Jan 13 2026 06:08:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæ¯•æºæ³‰</p>
<h2 data-id="heading-0"><strong>å¼•è¨€</strong></h2>
<p>æ¶ˆæ¯é˜Ÿåˆ—çš„å­˜å‚¨æ¶æ„æ˜¯å†³å®šå…¶å¯é æ€§ã€ååé‡ã€å»¶è¿Ÿæ€§èƒ½çš„æ ¸å¿ƒå› ç´ ï¼Œç›´æ¥å½±å“ä¸šåŠ¡åœºæ™¯é€‚é…èƒ½åŠ›ã€‚æœ¬æ–‡èšç„¦ä¸‰æ¬¾ä¸»æµæ¶ˆæ¯é˜Ÿåˆ— â€”â€”Kafkaï¼ˆLinkedIn å¼€æºï¼Œä¾§é‡é«˜ååï¼‰ã€RocketMQï¼ˆé˜¿é‡Œå¼€æºï¼Œé‡‘èçº§ç‰¹æ€§çªå‡ºï¼‰ã€JMQï¼ˆäº¬ä¸œå¼€æºï¼Œä¾§é‡é«˜å¯ç”¨ä¸çµæ´»æ€§ï¼‰ï¼Œä»å­˜å‚¨æ¨¡å‹ã€æ•°æ®ç»„ç»‡ã€ç´¢å¼•è®¾è®¡ç­‰ç»´åº¦å±•å¼€æ·±åº¦å¯¹æ¯”ï¼Œä¸ºæŠ€æœ¯é€‰å‹ä¸æ¶æ„ä¼˜åŒ–æä¾›å‚è€ƒã€‚â€‹</p>
<p>æœ¬æ–‡å°†ä»æ¦‚å¿µè¾¨æå‡ºå‘ï¼Œç³»ç»Ÿæ‹†è§£ä¸»æµå­˜å‚¨æ¨¡å‹ä¸å­˜å‚¨å¼•æ“çš„è®¾è®¡é€»è¾‘ï¼Œå¯¹æ¯” JMQã€Kafkaã€RocketMQçš„æŠ€æœ¯é€‰å‹å·®å¼‚ä¸æ¶æ„è®¾è®¡ã€‚â€‹</p>
<h2 data-id="heading-1"><strong>ä¸€ã€</strong> Kafkaå­˜å‚¨æ¶æ„</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒå­˜å‚¨æ¨¡å‹ï¼šåˆ†åŒºæ—¥å¿—æµ</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee01ba5da3c1475592f077f908a2456c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=c7Oq0C14wEkUNI8E%2FC53PX7fpBw%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>Topic - ä¸»é¢˜</strong></p>
<p>Kafkaå­¦ä¹ äº†æ•°æ®åº“é‡Œé¢çš„è®¾è®¡ï¼Œåœ¨é‡Œé¢è®¾è®¡äº†topicï¼ˆä¸»é¢˜ï¼‰ï¼Œè¿™ä¸ªä¸œè¥¿ç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„è¡¨ï¼Œæ­¤æ—¶æˆ‘éœ€è¦è·å–ä¸­å›½ç§»åŠ¨çš„æ•°æ®ï¼Œé‚£å°±ç›´æ¥ç›‘å¬ä¸­å›½ç§»åŠ¨è®¢é˜…çš„Topicå³å¯ã€‚</p>
<p><strong>Partition - åˆ†åŒº</strong></p>
<p>Kafkaè¿˜æœ‰ä¸€ä¸ªæ¦‚å¿µå«Partitionï¼ˆåˆ†åŒºï¼‰ï¼Œåˆ†åŒºå…·ä½“åœ¨æœåŠ¡å™¨ä¸Šé¢è¡¨ç°èµ·åˆå°±æ˜¯ä¸€ä¸ªç›®å½•ï¼Œä¸€ä¸ªä¸»é¢˜ä¸‹é¢æœ‰å¤šä¸ªåˆ†åŒºï¼Œè¿™äº›åˆ†åŒºä¼šå­˜å‚¨åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šé¢ï¼Œæˆ–è€…è¯´ï¼Œå…¶å®å°±æ˜¯åœ¨ä¸åŒçš„ä¸»æœºä¸Šå»ºäº†ä¸åŒçš„ç›®å½•ã€‚è¿™äº›åˆ†åŒºä¸»è¦çš„ä¿¡æ¯å°±å­˜åœ¨äº†.logæ–‡ä»¶é‡Œé¢ã€‚è·Ÿæ•°æ®åº“é‡Œé¢çš„åˆ†åŒºå·®ä¸å¤šï¼Œæ˜¯ä¸ºäº†æé«˜æ€§èƒ½ã€‚</p>
<p>è‡³äºä¸ºä»€ä¹ˆæé«˜äº†æ€§èƒ½ï¼Œå¾ˆç®€å•ï¼Œå¤šä¸ªåˆ†åŒºå¤šä¸ªçº¿ç¨‹ï¼Œå¤šä¸ªçº¿ç¨‹å¹¶è¡Œå¤„ç†è‚¯å®šä¼šæ¯”å•çº¿ç¨‹å¥½å¾—å¤šã€‚</p>
<p>Topicå’Œpartitionåƒæ˜¯HBASEé‡Œçš„tableå’Œregionçš„æ¦‚å¿µï¼Œtableåªæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼ŒçœŸæ­£å­˜å‚¨æ•°æ®çš„æ˜¯regionï¼Œè¿™äº›regionä¼šåˆ†å¸ƒå¼åœ°å­˜å‚¨åœ¨å„ä¸ªæœåŠ¡å™¨ä¸Šé¢ï¼Œå¯¹åº”äºkafkaï¼Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œ<strong>Topicä¹Ÿæ˜¯é€»è¾‘æ¦‚å¿µï¼Œè€Œpartitionå°±æ˜¯åˆ†å¸ƒå¼å­˜å‚¨å•å…ƒã€‚è¿™ä¸ªè®¾è®¡æ˜¯ä¿è¯äº†æµ·é‡æ•°æ®å¤„ç†çš„åŸºç¡€ã€‚æˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ï¼Œå¦‚æœHDFSæ²¡æœ‰blockçš„è®¾è®¡ï¼Œä¸€ä¸ª100Tçš„æ–‡ä»¶ä¹Ÿåªèƒ½å•ç‹¬æ”¾åœ¨ä¸€ä¸ªæœåŠ¡å™¨ä¸Šé¢ï¼Œé‚£å°±ç›´æ¥å æ»¡æ•´ä¸ªæœåŠ¡å™¨äº†ï¼Œå¼•å…¥blockåï¼Œå¤§æ–‡ä»¶å¯ä»¥åˆ†æ•£å­˜å‚¨åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚</strong></p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<p>1.åˆ†åŒºä¼šæœ‰å•ç‚¹æ•…éšœé—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šä¸ºæ¯ä¸ªåˆ†åŒºè®¾ç½®å‰¯æœ¬æ•°</p>
<p>2.åˆ†åŒºçš„ç¼–å·æ˜¯ä»0å¼€å§‹çš„</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66333a00a3d94c1185c3fb0de363a34c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=rCTx8tpxHS4Xca00NsI9U2qqjps%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>Kafka ä»¥ã€Œä¸»é¢˜ï¼ˆTopicï¼‰- åˆ†åŒºï¼ˆPartitionï¼‰ã€ä¸ºæ ¸å¿ƒç»„ç»‡æ•°æ®ï¼Œæ¯ä¸ªåˆ†åŒºæœ¬è´¨æ˜¯ä¸€ä¸ª append-only çš„æ—¥å¿—æµï¼Œæ¶ˆæ¯æŒ‰ç”Ÿäº§é¡ºåºè¿½åŠ å­˜å‚¨ï¼Œä¿è¯åˆ†åŒºå†…æ¶ˆæ¯æœ‰åºæ€§ã€‚â€‹</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å¯ä»¥å……åˆ†åˆ©ç”¨ç£ç›˜é¡ºåºè¯»å†™é«˜æ€§èƒ½çš„ç‰¹æ€§ã€‚å­˜å‚¨ä»‹è´¨ä¹Ÿå¯ä»¥é€‰æ‹©å»‰ä»·çš„SATAç£ç›˜ï¼Œè¿™æ ·å¯ä»¥è·å¾—æ›´é•¿çš„æ•°æ®ä¿ç•™æ—¶é—´ã€æ›´ä½çš„æ•°æ®å­˜å‚¨æˆæœ¬ã€‚</p>
<h3 data-id="heading-3">1.2 æ•°æ®ç»„ç»‡ï¼šåˆ†æ®µæ—¥å¿—æ–‡ä»¶</h3>
<p>â€¢æ¯ä¸ªåˆ†åŒºæ‹†åˆ†ä¸ºå¤šä¸ª Segment æ–‡ä»¶ï¼ˆé»˜è®¤ 1GBï¼‰ï¼Œå‘½åæ ¼å¼ä¸ºã€Œèµ·å§‹åç§»é‡.logã€ï¼ˆå¦‚ 00000000000000000000.logï¼‰â€‹ï¼Œåšè¿™ä¸ªé™åˆ¶ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿æŠŠ.logåŠ è½½åˆ°å†…å­˜å»æ“ä½œ</p>
<p>â€¢é…å¥—ä¸¤ç±»ç´¢å¼•æ–‡ä»¶ï¼š.indexï¼ˆåç§»é‡â†’ç‰©ç†åœ°å€æ˜ å°„ï¼‰ã€.timeindexï¼ˆæ—¶é—´æˆ³â†’åç§»é‡æ˜ å°„ï¼‰â€‹â€‹</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/730b9896bc594900819a3c86d89efefc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=ivaklGaephzfSavNgncXwrI4Uqw%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>è¿™ä¸ª9936472ä¹‹ç±»çš„æ•°å­—ï¼Œå°±æ˜¯ä»£è¡¨äº†è¿™ä¸ªæ—¥å¿—æ®µæ–‡ä»¶é‡ŒåŒ…å«çš„èµ·å§‹offsetï¼Œä¹Ÿå°±è¯´æ˜è¿™ä¸ªåˆ†åŒºé‡Œè‡³å°‘éƒ½å†™å…¥äº†æ¥è¿‘1000ä¸‡æ¡æ•°æ®äº†ã€‚</p>
<p>Kafka brokeræœ‰ä¸€ä¸ªå‚æ•°ï¼Œlog.segment.bytesï¼Œé™å®šäº†æ¯ä¸ªæ—¥å¿—æ®µæ–‡ä»¶çš„å¤§å°ï¼Œæœ€å¤§å°±æ˜¯1GBï¼Œä¸€ä¸ªæ—¥å¿—æ®µæ–‡ä»¶æ»¡äº†ï¼Œå°±è‡ªåŠ¨å¼€ä¸€ä¸ªæ–°çš„æ—¥å¿—æ®µæ–‡ä»¶æ¥å†™å…¥ï¼Œé¿å…å•ä¸ªæ–‡ä»¶è¿‡å¤§ï¼Œå½±å“æ–‡ä»¶çš„è¯»å†™æ€§èƒ½ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšlog rollingï¼Œæ­£åœ¨è¢«å†™å…¥çš„é‚£ä¸ªæ—¥å¿—æ®µæ–‡ä»¶ï¼Œå«åšactive log segmentã€‚</p>
<h3 data-id="heading-4">1.3 æ¶ˆæ¯è¯»/å†™è¿‡ç¨‹</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c84e19c96cd441e69db4281f4fe824fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=JLf0F8dw%2BzGIXqtM%2BLD0qwIJdpg%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>å†™æ¶ˆæ¯ï¼š</strong></p>
<p>â€¢Indexæ–‡ä»¶å†™å…¥ï¼ŒIndexæ–‡ä»¶è¾ƒå°ï¼Œå¯ä»¥ç›´æ¥ç”¨mmapè¿›è¡Œå†…å­˜æ˜ å°„ï¼Œé¿å…é¢‘ç¹çš„ç£ç›˜I/Oæ“ä½œï¼Œæé«˜å†™å…¥æ€§èƒ½ï¼›ç”±äºIndexæ–‡ä»¶æ˜¯ç¨€ç–ç´¢å¼•ï¼Œåªéœ€è¦è®°å½•å…³é”®ä½ç½®çš„åç§»é‡ï¼Œå› æ­¤å³ä½¿ä½¿ç”¨mmapï¼Œå†™å…¥çš„å¼€é”€ä¹Ÿç›¸å¯¹è¾ƒä½ã€‚</p>
<p>â€¢Segmentæ–‡ä»¶å†™å…¥ï¼ŒSegmentæ–‡ä»¶è¾ƒå¤§ï¼Œå¯ä»¥é‡‡ç”¨æ™®é€šçš„å†™æ“ä½œï¼ˆFileChannel.writeï¼‰ï¼Œç”±äºSegmentæ–‡ä»¶æ˜¯é¡ºåºå†™å…¥çš„ï¼Œå¹¶ä¸”Kafkaä¼šåˆ©ç”¨æ“ä½œç³»ç»Ÿçš„PageCacheï¼ˆé¡µç¼“å­˜ï¼‰æœºåˆ¶ï¼Œå†™å…¥æ“ä½œä¼šå…ˆå†™å…¥åˆ°å†…å­˜ä¸­ï¼Œç„¶åç”±æ“ä½œç³»ç»Ÿåœ¨åå°å¼‚æ­¥åˆ·æ–°åˆ°ç£ç›˜ï¼Œå¯ä»¥è¿›ä¸€æ­¥æé«˜å†™å…¥çš„æ€§èƒ½ã€‚</p>
<p><strong>è¯»æ¶ˆæ¯ï¼š</strong></p>
<p>â€¢Indexæ–‡ä»¶è¯»å–ï¼Œé€šå¸¸ä½¿ç”¨mmapæ–¹å¼è¯»å–ï¼Œç”±äºIndexæ–‡ä»¶è¾ƒå°ï¼Œä¸”æ˜¯ç¨€ç–ç´¢å¼•ï¼Œç¼ºé¡µä¸­æ–­çš„å¯èƒ½æ€§è¾ƒå°ã€‚</p>
<p>â€¢Segmentæ–‡ä»¶è¯»å–ï¼Œé€šå¸¸ä½¿ç”¨sendfileç³»ç»Ÿè°ƒç”¨æ¥å®ç°é›¶æ‹·è´è¯»å–å’Œå‘é€ï¼Œå‡å°‘æ•°æ®åœ¨ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´ä¹‹é—´çš„æ‹·è´æ¬¡æ•°ï¼Œæé«˜æ•°æ®ä¼ è¾“çš„æ•ˆç‡ã€‚</p>
<h3 data-id="heading-5">1.4 å…³é”®æŠ€æœ¯</h3>
<p>Kafka ä½œä¸ºé«˜æ€§èƒ½çš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå…¶è¶…é«˜ååé‡çš„æ ¸å¿ƒç§˜è¯€ä¹‹ä¸€å°±æ˜¯<strong>æ·±åº¦ä¾èµ– PageCache + é¡ºåº I/O + mmap å†…å­˜æ˜ å°„</strong>çš„ç»„åˆã€‚</p>
<p>PageCacheï¼Œä¸­æ–‡åç§°ä¸ºé¡µé«˜é€Ÿç¼“å†²å­˜å‚¨å™¨ã€‚å®ƒæ˜¯å°†ç£ç›˜ä¸Šçš„æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå½“ç³»ç»Ÿéœ€è¦è®¿é—®è¿™äº›æ•°æ®æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è¯»å–ï¼Œè€Œä¸å¿…æ¯æ¬¡éƒ½å»è¯»å–ç£ç›˜ã€‚è¿™ç§æ–¹å¼æ˜¾è‘—å‡å°‘äº†ç£ç›˜I/Oæ“ä½œï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<p>mmapï¼ˆMemory-mapped fileï¼‰æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€ç§å°†<strong>ç£ç›˜æ–‡ä»¶</strong>ä¸<strong>è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´</strong>å»ºç«‹æ˜ å°„å…³ç³»çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œæœ¬è´¨æ˜¯è®©è¿›ç¨‹é€šè¿‡ç›´æ¥æ“ä½œå†…å­˜åœ°å€çš„æ–¹å¼è¯»å†™æ–‡ä»¶ï¼Œæ— éœ€ä¼ ç»Ÿçš„ read/write ç³»ç»Ÿè°ƒç”¨ã€‚æ ¸å¿ƒä»·å€¼åœ¨äº<strong>é›¶æ‹·è´</strong>å’Œ<strong>å†…å­˜å¼æ–‡ä»¶è®¿é—®</strong>ï¼Œå°¤å…¶é€‚åˆå¤§æ–‡ä»¶ã€é«˜ååã€éšæœºè®¿é—®çš„åœºæ™¯ã€‚</p>
<p>å°†æ—¥å¿—æ®µï¼ˆ.logï¼‰æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ï¼Œç”Ÿäº§è€…å†™å…¥æ—¶ç›´æ¥å†™å†…å­˜ï¼ˆå†…æ ¸å¼‚æ­¥åˆ·ç›˜ï¼‰ï¼Œæ¶ˆè´¹è€…è¯»å–æ—¶ç›´æ¥ä»å†…å­˜è¯»å–ï¼Œå®ç°è¶…é«˜ååï¼ˆKafka çš„ â€œé¡ºåºå†™ + mmapâ€ æ˜¯å…¶é«˜æ€§èƒ½æ ¸å¿ƒï¼‰ï¼›</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8025311968154f9e8ca20594c637af59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=FWIUrpjyB8hG3B%2BMusGW%2Fn5KiJ4%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>é›¶æ‹·è´æµç¨‹ç¤ºæ„å›¾</p>
<p>é›¶æ‹·è´è¿‡ç¨‹ï¼š</p>
<p>1.ç”¨æˆ·è¿›ç¨‹å‘èµ·sendfileç³»ç»Ÿè°ƒç”¨ï¼Œ<strong>ä¸Šä¸‹æ–‡ï¼ˆåˆ‡æ¢1ï¼‰ä»ç”¨æˆ·æ€è½¬å‘å†…æ ¸æ€</strong></p>
<p>2.DMAæ§åˆ¶å™¨ï¼ŒæŠŠæ•°æ®ä»ç¡¬ç›˜ä¸­æ‹·è´åˆ°å†…æ ¸ç¼“å†²åŒºã€‚</p>
<p>3.CPUå°†è¯»ç¼“å†²åŒºä¸­æ•°æ®æ‹·è´åˆ°socketç¼“å†²åŒº</p>
<p>4.DMAæ§åˆ¶å™¨ï¼Œå¼‚æ­¥æŠŠæ•°æ®ä»socketç¼“å†²åŒºæ‹·è´åˆ°ç½‘å¡ï¼Œ</p>
<p>5.<strong>ä¸Šä¸‹æ–‡ï¼ˆåˆ‡æ¢2ï¼‰ä»å†…æ ¸æ€åˆ‡æ¢å›ç”¨æˆ·æ€</strong>ï¼Œsendfileè°ƒç”¨è¿”å›ã€‚</p>
<h3 data-id="heading-6">1.5 è®¾è®¡ä¼˜åŠ¿</h3>
<p>â€¢é¡ºåºå†™ç£ç›˜ï¼šSegment æ–‡ä»¶ä»…è¿½åŠ å†™å…¥ï¼Œè§„é¿éšæœº IOï¼Œååé‡æé«˜ï¼ˆå•åˆ†åŒºå¯è¾¾ 10 ä¸‡ + TPSï¼‰â€‹â€‹</p>
<p>â€¢ç´¢å¼•è½»é‡åŒ–ï¼šä»…ç»´æŠ¤åç§»é‡ä¸æ—¶é—´æˆ³ç´¢å¼•ï¼Œé™ä½å­˜å‚¨å¼€é”€â€‹</p>
<p>â€¢å‰¯æœ¬åŒæ­¥ï¼šåŸºäº ISR æœºåˆ¶ï¼Œä»…åŒæ­¥å·²æäº¤æ¶ˆæ¯ï¼Œå…¼é¡¾ä¸€è‡´æ€§ä¸å¯ç”¨æ€§</p>
<h2 data-id="heading-7">äºŒã€RocketMQå­˜å‚¨æ¶æ„</h2>
<p>Kafkaçš„æ¯ä¸ªPartitionéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€é¡ºåºå†™å…¥çš„æ–‡ä»¶ï¼Œä½†å½“Partitionæ•°é‡å¢å¤šæ—¶ï¼Œä»æ“ä½œç³»ç»Ÿçš„è§’åº¦çœ‹ï¼Œè¿™äº›å†™å…¥æ“ä½œä¼šå˜å¾—ç›¸å¯¹éšæœºï¼Œè¿™å¯èƒ½ä¼šå½±å“å†™å…¥æ€§èƒ½ã€‚</p>
<h3 data-id="heading-8">2.1 æ ¸å¿ƒå­˜å‚¨æ¨¡å‹ï¼šåˆ†ç¦»å¼è®¾è®¡</h3>
<p>RocketMQé‡‡ç”¨ã€ŒCommitLog + ConsumeQueue + IndexFileã€ä¸‰å±‚ç»“æ„ï¼Œå½»åº•åˆ†ç¦»æ•°æ®å­˜å‚¨ä¸ç´¢å¼•æŸ¥è¯¢ï¼šâ€‹</p>
<p>â€¢CommitLogï¼šå…¨å±€å•ä¸€æ—¥å¿—æ–‡ä»¶ï¼ˆé»˜è®¤ 1GB / ä¸ªï¼Œå¾ªç¯è¦†ç›–ï¼‰ï¼Œå­˜å‚¨æ‰€æœ‰ä¸»é¢˜çš„åŸå§‹æ¶ˆæ¯â€‹â€‹</p>
<p>â€¢ConsumeQueueï¼šæŒ‰ä¸»é¢˜ - é˜Ÿåˆ—ç»´åº¦æ‹†åˆ†çš„ç´¢å¼•æ–‡ä»¶ï¼Œå­˜å‚¨ã€Œæ¶ˆæ¯ç‰©ç†åœ°å€ + åç§»é‡ + é•¿åº¦ã€ï¼Œä¾›æ¶ˆè´¹è€…å¿«é€ŸæŸ¥è¯¢â€‹</p>
<p>â€¢IndexFileï¼šå“ˆå¸Œç´¢å¼•æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰æ¶ˆæ¯ Key æŸ¥è¯¢</p>
<p>CommitLogï¼šæ¶ˆæ¯çš„åŸå§‹æ—¥è®°æœ¬</p>
<p><strong>CommitLog</strong>æ˜¯RocketMQå­˜å‚¨æ¶ˆæ¯çš„ç‰©ç†æ–‡ä»¶ï¼Œæ‰€æœ‰æ¶ˆæ¯éƒ½ä¼šæŒ‰åˆ°è¾¾é¡ºåºå†™å…¥è¿™ä¸ªæ–‡ä»¶ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€æœ¬ä¸æ–­è¿½åŠ çš„æ—¥è®°æœ¬â€”â€”æ¯æ¡æ¶ˆæ¯éƒ½æ˜¯æŒ‰æ—¶é—´é¡ºåºè®°å½•çš„æ–°æ—¥è®°ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ¶ˆæ¯å­˜å‚¨çš„æ ¸å¿ƒé€»è¾‘ç®€åŒ–ç¤ºä¾‹ï¼ˆéæºç ï¼‰</span>
Â publicÂ voidÂ <span class="hljs-built_in">putMessage</span>(Message message)Â {
Â Â  Â Â <span class="hljs-comment">// 1. å°†æ¶ˆæ¯åºåˆ—åŒ–ä¸ºå­—èŠ‚æ•°ç»„</span>
Â Â  Â Â byte<span class="hljs-selector-attr">[]</span> data = <span class="hljs-built_in">serialize</span>(message);
Â Â  Â Â <span class="hljs-comment">// 2. è®¡ç®—æ¶ˆæ¯ç‰©ç†åç§»é‡</span>
Â Â  Â Â longÂ offset = commitLog<span class="hljs-selector-class">.getMaxOffset</span>();
Â Â  Â Â <span class="hljs-comment">// 3. å°†æ•°æ®è¿½åŠ åˆ°CommitLogæ–‡ä»¶æœ«å°¾</span>
 Â  Â  commitLog<span class="hljs-selector-class">.append</span>(data);
Â Â  Â Â <span class="hljs-comment">// 4. è¿”å›æ¶ˆæ¯çš„å…¨å±€å”¯ä¸€ç‰©ç†åç§»é‡</span>
Â  Â Â  returnÂ offset;
}
</code></pre>
<p>æ¶ˆæ¯å†™å…¥CommitLogæ—¶æœ‰ä¸‰ä¸ªå…³é”®ç‰¹æ€§ï¼š</p>
<p>1.<strong>é¡ºåºå†™å…¥</strong>ï¼šæ‰€æœ‰æ¶ˆæ¯æŒ‰åˆ°è¾¾é¡ºåºè¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼Œé¿å…ç£ç›˜éšæœºå¯»å€</p>
<p>2.<strong>å†…å­˜æ˜ å°„</strong>ï¼šé€šè¿‡MappedByteBufferå®ç°æ–‡ä»¶æ˜ å°„ï¼Œå‡å°‘æ•°æ®æ‹·è´æ¬¡æ•°</p>
<p>3.<strong>æ–‡ä»¶åˆ†å‰²</strong>ï¼šå•ä¸ªCommitLogæ–‡ä»¶é»˜è®¤1GBï¼Œå†™æ»¡ååˆ›å»ºæ–°æ–‡ä»¶ï¼ˆæ–‡ä»¶åç”¨èµ·å§‹åç§»é‡å‘½åï¼‰</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå½“ç”Ÿäº§è€…å‘é€ä¸‰æ¡æ¶ˆæ¯æ—¶ï¼ŒCommitLogæ–‡ä»¶å¯èƒ½é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">0000000000000000000ï¼ˆæ–‡ä»¶1ï¼Œ1GBï¼‰ Â 
2|--æ¶ˆæ¯A(<span class="hljs-attr">offset</span>=<span class="hljs-number">0</span>) Â 
3|--æ¶ˆæ¯B(<span class="hljs-attr">offset</span>=<span class="hljs-number">100</span>) Â 
4|--æ¶ˆæ¯C(<span class="hljs-attr">offset</span>=<span class="hljs-number">200</span>) Â 
500000000001073741824ï¼ˆæ–‡ä»¶2ï¼Œèµ·å§‹åç§»é‡1073741824ï¼‰ Â 
</code></pre>
<p><strong>æ¸©é¦¨æç¤º</strong>ï¼šè™½ç„¶CommitLogæ˜¯é¡ºåºå†™ï¼Œä½†è¯»å–æ—¶éœ€è¦é…åˆç´¢å¼•ç»“æ„ï¼Œå¦åˆ™éå†æ–‡ä»¶æ‰¾æ¶ˆæ¯å°±åƒå¤§æµ·æé’ˆã€‚</p>
<p>æ¶ˆè´¹é˜Ÿåˆ—ConsumeQueueï¼šæ¶ˆæ¯çš„å¿«é€Ÿç›®å½•</p>
<p>å¦‚æœæ¯æ¬¡æ¶ˆè´¹éƒ½è¦æ‰«æCommitLogï¼Œæ€§èƒ½ä¼šæƒ¨ä¸å¿ç¹ã€‚äºæ˜¯RocketMQè®¾è®¡äº†<strong>ConsumeQueue</strong>â€”â€”å®ƒæ˜¯åŸºäºTopicå’ŒQueueçš„äºŒçº§ç´¢å¼•æ–‡ä»¶ã€‚</p>
<p>æ¯ä¸ªConsumeQueueæ¡ç›®åŒ…å«ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼ˆå›ºå®š20å­—èŠ‚ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">1</span>| CommitLog <span class="hljs-title function_">Offset</span> <span class="hljs-params">(<span class="hljs-number">8</span>å­—èŠ‚)</span> |Â Message <span class="hljs-title function_">Size</span> <span class="hljs-params">(<span class="hljs-number">4</span>å­—èŠ‚)</span>Â | Tag <span class="hljs-title function_">Hashcode</span> <span class="hljs-params">(<span class="hljs-number">8</span>å­—èŠ‚)</span> |Â Â 
</code></pre>
<p>è¿™ç›¸å½“äºç»™CommitLogé‡Œçš„æ¶ˆæ¯åšäº†ä¸€ä¸ªç›®å½•ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">TopicA-Queue0çš„ConsumeQueue Â 
<span class="hljs-number">2</span>|<span class="hljs-comment">--0ï¼ˆå¯¹åº”CommitLogåç§»0çš„æ¶ˆæ¯Aï¼‰ Â </span>
<span class="hljs-number">3</span>|<span class="hljs-comment">--100ï¼ˆå¯¹åº”CommitLogåç§»100çš„æ¶ˆæ¯Bï¼‰ Â </span>
<span class="hljs-number">4</span>|<span class="hljs-comment">--200ï¼ˆå¯¹åº”CommitLogåç§»200çš„æ¶ˆæ¯Cï¼‰</span>
</code></pre>
<p>å½“æ¶ˆè´¹è€…æ‹‰å–TopicA-Queue0çš„æ¶ˆæ¯æ—¶ï¼š</p>
<p>1.å…ˆæŸ¥ConsumeQueueè·å–æ¶ˆæ¯çš„ç‰©ç†ä½ç½®</p>
<p>2.æ ¹æ®CommitLog Offsetç›´æ¥å®šä½åˆ°CommitLogæ–‡ä»¶</p>
<p>3.è¯»å–æŒ‡å®šä½ç½®çš„æ¶ˆæ¯å†…å®¹</p>
<p><strong>å…³é”®è®¾è®¡ç‚¹</strong>ï¼š</p>
<p>â€¢ConsumeQueueé‡‡ç”¨å†…å­˜æ˜ å°„+å¼‚æ­¥åˆ·ç›˜ï¼Œä¿è¯é«˜æ€§èƒ½</p>
<p>â€¢å•ä¸ªæ–‡ä»¶å­˜å‚¨30ä¸‡æ¡ç´¢å¼•ï¼Œçº¦5.72MBï¼ˆ30ä¸‡*20å­—èŠ‚ï¼‰</p>
<p>â€¢é€šè¿‡hashCodeå¿«é€Ÿè¿‡æ»¤Tagï¼Œå®ç°æ¶ˆæ¯è¿‡æ»¤</p>
<p>ç´¢å¼•æ–‡ä»¶IndexFileï¼šæ¶ˆæ¯çš„å…¨å±€å­—å…¸</p>
<p>å¦‚æœéœ€è¦æ ¹æ®MessageIDæˆ–KeyæŸ¥è¯¢æ¶ˆæ¯ï¼ŒConsumeQueueå°±ä¸å¤Ÿç”¨äº†ã€‚è¿™æ—¶å€™å°±è¦ç”¨åˆ°<strong>IndexFile</strong>è¿™ä¸ªå…¨å±€ç´¢å¼•ã€‚</p>
<p>IndexFileçš„ç»“æ„ç±»ä¼¼HashMapï¼š</p>
<p>1.<strong>Slotæ§½ä½</strong>ï¼ˆ500ä¸‡ä¸ªï¼‰ï¼šå­˜å‚¨ç›¸åŒhashå€¼çš„Indexæ¡ç›®é“¾è¡¨å¤´</p>
<p>2.<strong>Indexæ¡ç›®</strong>ï¼ˆ2000ä¸‡æ¡ï¼‰ï¼šåŒ…å«Keyçš„hashå€¼ã€CommitLogåç§»é‡ã€æ—¶é—´å·®ç­‰ä¿¡æ¯</p>
<p>å½“å†™å…¥æ¶ˆæ¯æ—¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ç´¢å¼•æ„å»ºè¿‡ç¨‹ç®€åŒ–ç¤ºæ„</span>
<span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-type">void</span>Â <span class="hljs-title">buildIndex</span><span class="hljs-params">(Message message)</span>Â </span>{
Â  Â Â <span class="hljs-comment">// è®¡ç®—Keyçš„hashå€¼</span>
Â  Â Â <span class="hljs-type">int</span>Â hash = <span class="hljs-built_in">hash</span>(message.<span class="hljs-built_in">getKey</span>());
Â  Â Â <span class="hljs-comment">// å®šä½åˆ°å¯¹åº”çš„Slotæ§½ä½</span>
Â  Â Â <span class="hljs-type">int</span>Â slotPos = hash % slotNum;
Â  Â Â <span class="hljs-comment">// åœ¨IndexåŒºåŸŸè¿½åŠ æ–°æ¡ç›®</span>
Â  Â  indexFile.<span class="hljs-built_in">addEntry</span>(hash, message.<span class="hljs-built_in">getCommitLogOffset</span>());
}
</code></pre>
<p>æŸ¥è¯¢æ—¶é€šè¿‡ä¸¤æ¬¡æŸ¥æ‰¾å¿«é€Ÿå®šä½ï¼š</p>
<p>1.æ ¹æ®Keyçš„hashå€¼æ‰¾åˆ°Slotæ§½ä½</p>
<p>2.éå†Slotå¯¹åº”çš„é“¾è¡¨ï¼Œæ¯”å¯¹CommitLogä¸­çš„å®é™…Keyå€¼</p>
<p><strong>æ€§èƒ½ä¼˜åŒ–å¿…çŸ¥</strong>ï¼š</p>
<p>â€¢æ¶ˆæ¯ä½“ç§¯å·®å¼‚å¤§æ—¶ï¼ŒCommitLogä»ç„¶ä¿æŒé¡ºåºå†™ï¼Œä½†ConsumeQueueå¯èƒ½å‡ºç°ã€Œç¨€ç–ç´¢å¼•ã€ï¼ˆç›¸é‚»ç´¢å¼•æŒ‡å‘çš„ç‰©ç†ä½ç½®é—´éš”å¤§ï¼‰</p>
<p>â€¢ç”Ÿäº§ç¯å¢ƒä¸­CommitLogå»ºè®®æ”¾åœ¨å•ç‹¬SSDç£ç›˜ï¼ŒConsumeQueueå’ŒIndexFileå¯æ”¾æ™®é€šç£ç›˜</p>
<p>â€¢é‡åˆ°æ¶ˆæ¯å †ç§¯æ—¶ï¼Œä¼˜å…ˆæ£€æŸ¥æ¶ˆè´¹è€…é€Ÿåº¦ï¼Œè€Œä¸æ˜¯æ— è„‘æ‰©å®¹Brokerå­˜å‚¨</p>
<p>ç†è§£è¿™äº›åº•å±‚æœºåˆ¶ï¼Œä¸‹æ¬¡é‡åˆ°æ¶ˆæ¯æŸ¥è¯¢æ€§èƒ½é—®é¢˜æˆ–è€…ç£ç›˜IOç“¶é¢ˆæ—¶ï¼Œå°±çŸ¥é“è¯¥ä»CommitLogçš„å†™å…¥æ¨¡å¼è¿˜æ˜¯ConsumeQueueçš„ç´¢å¼•ç»“æ„å…¥æ‰‹æ’æŸ¥äº†ã€‚</p>
<h3 data-id="heading-9">2.2 æ•°æ®æµè½¬æœºåˆ¶</h3>
<p>â€¢ç”Ÿäº§è€…å†™å…¥ CommitLogï¼Œç”Ÿæˆå…¨å±€å”¯ä¸€åç§»é‡ï¼ˆPHYOFFSETï¼‰â€‹</p>
<p>â€¢åå°çº¿ç¨‹å¼‚æ­¥æ„å»º ConsumeQueue ç´¢å¼•ï¼ŒåŒæ­¥æ¶ˆæ¯å…ƒæ•°æ®â€‹</p>
<p>â€¢æ¶ˆè´¹è€…é€šè¿‡ ConsumeQueue å®šä½ CommitLog ä¸­çš„æ¶ˆæ¯ï¼Œé¿å…å…¨é‡æ‰«æ</p>
<p>å­˜å‚¨è¿‡ç¨‹å…¨æ™¯å›¾</p>
<p>ç°åœ¨æŠŠå„ä¸ªæ¨¡å—ä¸²èµ·æ¥çœ‹æ¶ˆæ¯çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p>1.ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åˆ°Broker</p>
<p>2.Brokerå°†æ¶ˆæ¯<strong>é¡ºåºå†™å…¥CommitLog</strong></p>
<p>3.<strong>å¼‚æ­¥çº¿ç¨‹</strong>åŒæ—¶æ„å»ºConsumeQueueå’ŒIndexFile</p>
<p>4.æ¶ˆè´¹è€…é€šè¿‡ConsumeQueueå¿«é€Ÿå®šä½æ¶ˆæ¯</p>
<p>5.æŒ‰éœ€æŸ¥è¯¢IndexFileå®ç°æ¶ˆæ¯å›æº¯</p>
<p>æ•´ä¸ªè¿‡ç¨‹å°±åƒå›¾ä¹¦é¦†çš„ç®¡ç†ç³»ç»Ÿï¼š</p>
<p>â€¢CommitLogæ˜¯è—ä¹¦åº“ï¼ˆæŒ‰å…¥åº“æ—¶é—´æ‘†æ”¾ï¼‰</p>
<p>â€¢ConsumeQueueæ˜¯åˆ†ç±»ç›®å½•ï¼ˆæŒ‰é¢˜æ/å‡ºç‰ˆç¤¾åˆ†ç±»ï¼‰</p>
<p>â€¢IndexFileæ˜¯æ£€ç´¢ç”µè„‘ï¼ˆæ”¯æŒæŒ‰ä¹¦å/ä½œè€…æŸ¥è¯¢ï¼‰</p>
<h3 data-id="heading-10">2.4 è®¾è®¡ä¼˜åŠ¿</h3>
<p>â€¢è¯»å†™åˆ†ç¦»ï¼šCommitLog ä»…è´Ÿè´£å†™å…¥ï¼ŒConsumeQueue è´Ÿè´£æŸ¥è¯¢ï¼Œæå‡å¹¶å‘æ€§èƒ½â€‹</p>
<p>â€¢äº‹åŠ¡æ”¯æŒï¼šé€šè¿‡ CommitLog ä¸­çš„äº‹åŠ¡çŠ¶æ€æ ‡è®° + å›æŸ¥æœºåˆ¶ï¼Œå®ç°åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯â€‹</p>
<p>â€¢åˆ·ç›˜ç­–ç•¥ï¼šæ”¯æŒã€Œå¼‚æ­¥åˆ·ç›˜ï¼ˆé«˜ååï¼‰ã€ã€ŒåŒæ­¥åˆ·ç›˜ï¼ˆé‡‘èçº§å¯é æ€§ï¼‰ã€åŠ¨æ€åˆ‡æ¢</p>
<h2 data-id="heading-11">ä¸‰ã€JMQå­˜å‚¨æ¶æ„</h2>
<p>JMQçš„æ¶ˆæ¯å­˜å‚¨åˆ†åˆ«å‚è€ƒäº†Kafkaå’ŒRocketMQå­˜å‚¨è®¾è®¡ä¸Šä¼˜ç‚¹ï¼Œå¹¶æ ¹æ®äº¬ä¸œå†…éƒ¨çš„åº”ç”¨åœºæ™¯è¿›è¡Œäº†æ”¹è¿›å’Œåˆ›æ–°ã€‚</p>
<h3 data-id="heading-12">3.1 æ ¸å¿ƒå­˜å‚¨æ¨¡å‹ï¼šåˆ†åŒºæ—¥å¿— + é˜Ÿåˆ—å…¼å®¹</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2c49ebef1454ecfa3eb5dc914d8e9b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=%2FMKq95%2FkKgWD%2BV9ypnTsgfXuzg8%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>JMQ</strong>å­˜å‚¨çš„åŸºæœ¬å•å…ƒæ˜¯PartitionGroupã€‚åœ¨åŒä¸€ä¸ªBrokerä¸Šï¼Œæ¯ä¸ªPartitionGroupå¯¹åº”ä¸€ç»„æ¶ˆæ¯æ–‡ä»¶ï¼ˆJournal Filesï¼‰ï¼Œé¡ºåºå­˜æ”¾è¿™ä¸ªTopicçš„æ¶ˆæ¯ã€‚</p>
<p>ä¸Kafkaç±»ä¼¼ï¼Œæ¯ä¸ªTopicåŒ…å«è‹¥å¹²Partitionï¼Œæ¯ä¸ªPartitionå¯¹åº”ä¸€ç»„ç´¢å¼•æ–‡ä»¶ï¼ˆIndex Filesï¼‰ï¼Œç´¢å¼•ä¸­å­˜æ”¾æ¶ˆæ¯åœ¨æ¶ˆæ¯æ–‡ä»¶ä¸­çš„ä½ç½®å’Œæ¶ˆæ¯é•¿åº¦ã€‚æ¶ˆæ¯å†™å…¥æ—¶ï¼Œæ”¶åˆ°çš„æ¶ˆæ¯æŒ‰ç…§å¯¹åº”çš„PartitionGroupå†™å…¥ä¾æ¬¡è¿½åŠ å†™å…¥æ¶ˆæ¯æ–‡ä»¶ä¸­ï¼Œç„¶åå¼‚æ­¥åˆ›å»ºç´¢å¼•å¹¶å†™å…¥å¯¹åº”Partitionçš„ç´¢å¼•æ–‡ä»¶ä¸­ã€‚</p>
<p>ä»¥PartionGroupä¸ºåŸºæœ¬å­˜å‚¨å•å…ƒçš„è®¾è®¡ï¼Œåœ¨å…¼é¡¾çµæ´»æ€§çš„åŒæ—¶ï¼Œå…·æœ‰è¾ƒå¥½çš„æ€§èƒ½ï¼Œå¹¶ä¸”å•ä¸ªPartitionGroupå¯ä»¥æ”¯æŒæ›´å¤šçš„å¹¶å‘ã€‚</p>
<h3 data-id="heading-13">3.2 æ¶ˆæ¯è¯»/å†™è¿‡ç¨‹</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65797ed9958e496ab45de3f081747403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889319&amp;x-signature=tUNZo5%2F%2BVu7XYsMj9wYFq1wEXyA%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>å†™æ¶ˆæ¯ï¼š</strong></p>
<p>JMQçš„å†™æ“ä½œä½¿ç”¨DirectBufferä½œä¸ºç¼“å­˜ï¼Œæ•°æ®å…ˆå†™å…¥DirectBufferï¼Œå†å¼‚æ­¥é€šè¿‡FileChannelå†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<p>â€¢æ¶ˆæ¯å†™å…¥DirectBufferåï¼Œé»˜è®¤å†™å…¥è¯¥èŠ‚ç‚¹æˆåŠŸï¼ˆæ•°æ®çš„é«˜å¯é æ˜¯é€šè¿‡Raftåè®®å¤åˆ¶ï¼Œç”¨å¤šä¸ªå†…å­˜å‰¯æœ¬æ¥ä¿è¯ï¼‰ï¼Œç›¸å¯¹Kafkaçš„å†™æ“ä½œæ¥çœ‹ï¼ŒJMQå“åº”å†™å…¥è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹æ²¡æœ‰å‘ç”Ÿç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨äº¬ä¸œå†…éƒ¨çš„å¤§é‡å•æ¡åŒæ­¥å‘é€çš„åœºæ™¯ä¸‹å¼€é”€æ›´ä½ã€æ€§èƒ½æ›´ä¼˜ã€‚</p>
<p>â€¢åŒæ—¶ä¹Ÿé¿å…ä½¿ç”¨MappedByteBufferï¼ˆMmapæ–¹å¼ï¼‰äº§ç”ŸPage Faultä¸­æ–­ï¼ŒOSåœ¨ä¸­æ–­ä¸­å°†è¯¥é¡µå¯¹åº”ç£ç›˜ä¸­çš„æ•°æ®æ‹·è´åˆ°å†…å­˜ä¸­ï¼Œåœ¨å¯¹æ–‡ä»¶è¿›è¡Œè¿½åŠ å†™å…¥çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸€æ— æ³•é¿å…çš„è¿‡ç¨‹æ˜¯å®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œåè€Œå¢åŠ äº†å†™å…¥çš„è€—æ—¶çš„é—®é¢˜ã€‚</p>
<p><strong>è¯»æ¶ˆæ¯ï¼š</strong></p>
<p>JMQé‡‡ç”¨å®šé•¿ç¨ å¯†ç´¢å¼•è®¾è®¡ï¼Œæ¯ä¸ªç´¢å¼•å›ºå®šé•¿åº¦ã€‚</p>
<p>â€¢å®šé•¿è®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œç›´æ¥æ ¹æ®ç´¢å¼•åºå·å°±å¯ä»¥è®¡ç®—å‡ºç´¢å¼•åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®ï¼šç´¢å¼•ä½ç½® = ç´¢å¼•åºå· * ç´¢å¼•é•¿åº¦ã€‚è¿™æ ·ï¼Œæ¶ˆæ¯çš„æŸ¥æ‰¾è¿‡ç¨‹å°±æ¯”è¾ƒç®€å•äº†ï¼Œé¦–å…ˆè®¡ç®—å‡ºç´¢å¼•æ‰€åœ¨çš„ä½ç½®ï¼Œç›´æ¥è¯»å–ç´¢å¼•ï¼Œç„¶åæ ¹æ®ç´¢å¼•ä¸­è®°å½•çš„æ¶ˆæ¯ä½ç½®è¯»å–æ¶ˆæ¯ã€‚</p>
<p>â€¢åœ¨äº¬ä¸œå†…éƒ¨åº”ç”¨åœºæ™¯ä¸­ï¼Œå•æ¡æ¶ˆæ¯å¤„ç†è€—æ—¶é«˜æ˜¯æ¯”è¾ƒå¸¸è§çš„ï¼Œå¾®æœåŠ¡æ¶æ„ä¸‹ç”¨æˆ·ä¸€èˆ¬ä¼šç”³è¯·æ›´å¤šçš„æ¶ˆè´¹èŠ‚ç‚¹ï¼Œè®©æ¯ä¸ªæ¶ˆè´¹èŠ‚ç‚¹å•æ¬¡æ‹‰å–è¾ƒå°æ‰¹é‡çš„æ¶ˆæ¯è¿›è¡Œå¤„ç†ï¼Œä»¥æå‡æ¶ˆè´¹å¹¶è¡Œåº¦ï¼Œè¿™æ ·æ¶ˆè´¹æ‹‰å–è¯·æ±‚çš„æ¬¡æ•°ä¼šæ¯”è¾ƒå¤šï¼Œç¨ å¯†ç´¢å¼•çš„è®¾è®¡ä¼šæ›´é€‚ç”¨å†…éƒ¨çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p>JMQæ¶ˆè´¹è¯»æ“ä½œ99%ä»¥ä¸Šéƒ½èƒ½å‘½ä¸­ç¼“å­˜ï¼ˆJMQè®¾è®¡çš„å †å¤–å†…å­˜ä¸æ–‡ä»¶æ˜ å°„çš„ä¸€ç§ç¼“å­˜æœºåˆ¶ï¼‰ï¼Œé¿å…äº†Kafkaå¯èƒ½é‡åˆ°çš„Cacheè¢«æ±¡æŸ“ï¼Œå½±å“æ€§èƒ½å’Œååçš„é—®é¢˜ã€‚åŒæ—¶ç›´æ¥è¯»å†…å­˜ä¹Ÿè§„é¿äº†RocketMQåœ¨è¯»å–æ¶ˆæ¯å­˜å‚¨çš„æ—¥å¿—æ•°æ®æ–‡ä»¶æ—¶å®¹æ˜“äº§ç”Ÿè¾ƒå¤šçš„éšæœºè®¿é—®è¯»å–ç£ç›˜ï¼Œå½±å“æ€§èƒ½çš„é—®é¢˜ã€‚ï¼ˆå½“æ²¡æœ‰å‘½ä¸­ç¼“å­˜æ—¶ï¼Œä¼šé»˜è®¤é™çº§ä¸ºé€šè¿‡Mmapçš„æ–¹å¼è¯»å–æ¶ˆæ¯ï¼‰ã€‚</p>
<h2 data-id="heading-14">å››ã€ç«å“å¯¹æ¯”åˆ†æ</h2>













































<table><thead><tr><th>ï»¿</th><th><strong>JMQ</strong></th><th><strong>Kafka</strong></th></tr></thead><tbody><tr><td><strong>å­˜å‚¨æ¨¡å‹</strong></td><td>ä»¥<strong>PartitionGroup</strong>ä¸ºåŸºæœ¬å­˜å‚¨å•å…ƒï¼Œæ”¯æŒé«˜å¹¶å‘å†™å…¥</td><td>ä»¥<strong>Partition</strong>ä¸ºåŸºæœ¬å­˜å‚¨å•å…ƒï¼Œæ”¯æŒçµæ´»çš„æ•°æ®å¤åˆ¶å’Œè¿ç§»</td></tr><tr><td><strong>æ¶ˆæ¯å†™å…¥æ€§èƒ½</strong></td><td>- å•å‰¯æœ¬å¼‚æ­¥å†™å…¥æ€§èƒ½ä¸ Kafka ç›¸å½“ - ä¸‰å‰¯æœ¬å¼‚æ­¥å†™å…¥æ€§èƒ½ä¼˜äº Kafka</td><td>- å•å‰¯æœ¬å¼‚æ­¥å†™å…¥æ€§èƒ½ä¸ JMQ ç›¸å½“ - ä¸‰å‰¯æœ¬å¼‚æ­¥å†™å…¥æ€§èƒ½ç•¥ä½äº JMQ</td></tr><tr><td><strong>åŒæ­¥å†™å…¥æ€§èƒ½</strong></td><td>- åŒæ­¥å†™å…¥æ€§èƒ½ç¨³å®šï¼Œå‡ ä¹ä¸å—ç½‘ç»œå»¶è¿Ÿå½±å“</td><td>- åŒæ­¥å†™å…¥æ€§èƒ½å—ç½‘ç»œå»¶è¿Ÿå½±å“è¾ƒå¤§ï¼Œç¨³å®šæ€§ç•¥é€Šäº JMQ</td></tr><tr><td><strong>å¤šåˆ†åŒºæ€§èƒ½</strong></td><td>- å¤šåˆ†åŒºå¼‚æ­¥å†™å…¥æ€§èƒ½ä¸ Kafka ç›¸å½“ - åŒæ­¥å†™å…¥æ€§èƒ½ç•¥ä½äº Kafka</td><td>- å¤šåˆ†åŒºåŒæ­¥å†™å…¥æ€§èƒ½æ›´ç¨³å®šï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯</td></tr><tr><td><strong>å‰¯æœ¬æœºåˆ¶</strong></td><td>æ”¯æŒå¼‚æ­¥å¤åˆ¶ï¼Œå‰¯æœ¬é—´æ•°æ®åŒæ­¥æ€§èƒ½è¾ƒå¥½</td><td>æ”¯æŒå¼‚æ­¥å’ŒåŒæ­¥å¤åˆ¶ï¼Œå‰¯æœ¬æœºåˆ¶æˆç†Ÿï¼Œé€‚åˆå¤æ‚éƒ¨ç½²</td></tr><tr><td><strong>è·¨æœºæˆ¿éƒ¨ç½²</strong></td><td>- åŒæ­¥å†™å…¥æ€§èƒ½åŸºæœ¬ä¸å—å½±å“ - å¼‚æ­¥å†™å…¥æ€§èƒ½ä¸‹é™</td><td>- åŒæ­¥å†™å…¥æ€§èƒ½å—ç½‘ç»œå»¶è¿Ÿå½±å“è¾ƒå¤§ - å¼‚æ­¥å†™å…¥æ€§èƒ½ä¸‹é™</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>- å¯¹åŒæ­¥å†™å…¥æ€§èƒ½è¦æ±‚é«˜ - å‰¯æœ¬å¼‚æ­¥ååè¦æ±‚é«˜ - å¤§è§„æ¨¡å¾®æœåŠ¡é›†ç¾¤</td><td>- å¤æ‚åˆ†åŒºçš„é«˜å¹¶å‘åŒæ­¥å†™å…¥ - å¤§è§„æ¨¡åˆ†å¸ƒå¼ç³»ç»Ÿ - å¤šè¯­è¨€ç”Ÿæ€æ”¯æŒä¸°å¯Œ</td></tr></tbody></table>
<p>åœ¨å•å‰¯æœ¬åœºæ™¯ä¸‹ï¼ŒJMQä¸Kafkaçš„å•æœºå†™å…¥æ€§èƒ½å‡ååˆ†å‡ºè‰²ï¼Œå‡å¯è¾¾åˆ°ç½‘ç»œå¸¦å®½ä¸Šé™ã€‚</p>
<p>ç„¶è€Œï¼Œåœ¨æ›´è´´è¿‘ç”Ÿäº§ç¯å¢ƒçš„ä¸‰å‰¯æœ¬åœºæ™¯ä¸­ï¼Œä¸¤è€…ç‰¹æ€§å‡ºç°åˆ†åŒ–ï¼š</p>
<p><strong>JMQåœ¨ä¸‰å‰¯æœ¬å¼‚æ­¥å†™å…¥ä¸‹çš„æé™ååä¼˜åŠ¿æ˜æ˜¾ï¼Œä¸”åœ¨è·¨æœºæˆ¿éƒ¨ç½²æ—¶ï¼Œå…¶åŒæ­¥å†™å…¥æ€§èƒ½è¡¨ç°è‰¯å¥½ï¼Œå‡ ä¹ä¸å—ç½‘ç»œå»¶è¿Ÿå½±å“ï¼›è€ŒKafkaåˆ™åœ¨å¤šåˆ†åŒºåŒæ­¥å†™å…¥åœºæ™¯ä¸‹å±•ç°å‡ºæ›´ç¨³å®šçš„æ€§èƒ½ï¼Œè¡°å‡å°äºJMQã€‚åœ¨å¤§éƒ¨åˆ†å¼‚æ­¥åååœºæ™¯åŠä¸åŒæ¶ˆæ¯ä½“ä¸‹çš„æ€§èƒ½è¶‹åŠ¿ä¸Šï¼Œä¸¤è€…è¡¨ç°ç›¸å½“ã€‚</strong></p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒJMQå°¤å…¶é€‚åˆå¯¹åŒæ­¥å†™å…¥æ€§èƒ½å’Œå‰¯æœ¬å¼‚æ­¥ååæœ‰æé«˜è¦æ±‚çš„åœºæ™¯ï¼Œè€ŒKafkaåœ¨å¤æ‚åˆ†åŒºçš„é«˜å¹¶å‘åŒæ­¥å†™å…¥æ–¹é¢é€‚åº”æ€§æ›´å¹¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SPIæœºåˆ¶ï¼šæœåŠ¡æ‰©å±•çš„æ ¸å¿ƒæŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7594415509607333934</link>    <guid>https://juejin.cn/post/7594415509607333934</guid>    <pubDate>2026-01-13T06:08:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594415509607333934" data-draft-id="7593602686136139802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" SPIæœºåˆ¶ï¼šæœåŠ¡æ‰©å±•çš„æ ¸å¿ƒæŠ€æœ¯"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-13T06:08:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             SPIæœºåˆ¶ï¼šæœåŠ¡æ‰©å±•çš„æ ¸å¿ƒæŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:08:48.000Z" title="Tue Jan 13 2026 06:08:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦SPIæœºåˆ¶</h2>
<h3 data-id="heading-1">SPIå’ŒAPIçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h3>
<p>SPIæ˜¯ä¸€ç§è·ŸAPIç›¸å¯¹åº”çš„åå‘è®¾è®¡æ€æƒ³ï¼šAPIç”±å®ç°æ–¹ç¡®å®šæ ‡å‡†è§„èŒƒå’ŒåŠŸèƒ½ï¼Œè°ƒç”¨æ–¹æ— æƒåšä»»ä½•å¹²é¢„ï¼› è€ŒSPIæ˜¯ç”±è°ƒç”¨æ–¹ç¡®å®šæ ‡å‡†è§„èŒƒï¼Œä¹Ÿå°±æ˜¯æ¥å£ï¼Œç„¶åè°ƒç”¨æ–¹ä¾èµ–æ­¤æ¥å£ï¼Œç¬¬ä¸‰æ–¹å®ç°æ­¤æ¥å£ï¼Œè¿™æ ·åšå°±å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæ‰©å±•ï¼Œç±»ä¼¼äºæ’ä»¶æœºåˆ¶ï¼Œè¿™æ˜¯SPIå‡ºç°çš„éœ€æ±‚èƒŒæ™¯ã€‚</p>
<p>SPI ï¼š â€œæ¥å£â€ä½äºâ€œè°ƒç”¨æ–¹â€æ‰€åœ¨çš„â€œåŒ…â€ä¸­</p>
<ul>
<li>
<p>æ¦‚å¿µä¸Šæ›´ä¾èµ–è°ƒç”¨æ–¹ã€‚</p>
</li>
<li>
<p>ç»„ç»‡ä¸Šä½äºè°ƒç”¨æ–¹æ‰€åœ¨çš„åŒ…ä¸­ã€‚</p>
</li>
<li>
<p>å®ç°ä½äºç‹¬ç«‹çš„åŒ…ä¸­ã€‚</p>
</li>
<li>
<p>å¸¸è§çš„ä¾‹å­æ˜¯ï¼šæ’ä»¶æ¨¡å¼çš„æ’ä»¶ã€‚</p>
</li>
</ul>
<p>API ï¼š â€œæ¥å£â€ä½äºâ€œå®ç°æ–¹â€æ‰€åœ¨çš„â€œåŒ…â€ä¸­</p>
<ul>
<li>
<p>æ¦‚å¿µä¸Šæ›´æ¥è¿‘å®ç°æ–¹ã€‚</p>
</li>
<li>
<p>ç»„ç»‡ä¸Šä½äºå®ç°æ–¹æ‰€åœ¨çš„åŒ…ä¸­ã€‚</p>
</li>
<li>
<p>å®ç°å’Œæ¥å£åœ¨ä¸€ä¸ªåŒ…ä¸­ã€‚</p>
</li>
</ul>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯SPIæœºåˆ¶</h3>
<p>SPIï¼ˆService Provider Interfaceï¼‰ï¼Œæ˜¯JDKå†…ç½®çš„ä¸€ç§ æœåŠ¡æä¾›å‘ç°æœºåˆ¶ï¼Œå¯ä»¥ç”¨æ¥å¯ç”¨æ¡†æ¶æ‰©å±•å’Œæ›¿æ¢ç»„ä»¶ï¼Œä¸»è¦æ˜¯è¢«æ¡†æ¶çš„å¼€å‘äººå‘˜ä½¿ç”¨ï¼Œä¾‹å¦‚æ•°æ®åº“ä¸­çš„java.sql.Driveræ¥å£ï¼Œä¸åŒçš„å‚å•†å¯ä»¥é’ˆå¯¹åŒä¸€æ¥å£åšå‡ºä¸åŒçš„å®ç°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒMySQLå’ŒPostgreSQLéƒ½æœ‰ä¸åŒçš„å®ç°æä¾›ç»™ç”¨æˆ·ã€‚
è€ŒJavaçš„SPIæœºåˆ¶å¯ä»¥ä¸ºæŸä¸ªæ¥å£å¯»æ‰¾æœåŠ¡å®ç°ï¼ŒJavaä¸­SPIæœºåˆ¶ä¸»è¦æ€æƒ³æ˜¯<strong>å°†è£…é…çš„æ§åˆ¶æƒç§»åˆ°ç¨‹åºä¹‹å¤–</strong>ï¼Œåœ¨æ¨¡å—åŒ–è®¾è®¡ä¸­è¿™ä¸ªæœºåˆ¶å°¤å…¶é‡è¦ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯ <strong>è§£è€¦</strong>ã€‚</p>
<p>SPIæ•´ä½“æœºåˆ¶å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc39590bdd5d40ecab1192c3011a2f44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889327&amp;x-signature=0gTdm9ZMzo22fG4%2F%2FBO4BcWZnzk%3D" alt="" loading="lazy"/></p>
<ol>
<li>å½“æœåŠ¡çš„æä¾›è€…æä¾›äº†ä¸€ç§æ¥å£çš„å®ç°ä¹‹åï¼Œéœ€è¦åœ¨classpathä¸‹çš„ META-INF/services/ ç›®å½•é‡Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶åæ˜¯ä»¥<strong>æœåŠ¡æ¥å£</strong>å‘½åçš„ï¼Œè€Œæ–‡ä»¶é‡Œçš„å†…å®¹æ˜¯è¿™ä¸ªæ¥å£çš„<strong>å…·ä½“çš„å®ç°ç±»</strong>ã€‚</li>
<li>å½“å…¶ä»–çš„ç¨‹åºéœ€è¦è¿™ä¸ªæœåŠ¡çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡æŸ¥æ‰¾è¿™ä¸ªjaråŒ…ï¼ˆä¸€èˆ¬éƒ½æ˜¯ä»¥jaråŒ…åšä¾èµ–ï¼‰çš„META-INF/services/ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä¸­æœ‰æ¥å£çš„å…·ä½“å®ç°ç±»åï¼Œå†æ ¹æ®è¿™ä¸ªç±»åè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥æœåŠ¡äº†ã€‚JDKä¸­æŸ¥æ‰¾æœåŠ¡çš„å®ç°çš„å·¥å…·ç±»æ˜¯ï¼šjava.util.ServiceLoaderã€‚</li>
</ol>
<h2 data-id="heading-3">SPIæœºåˆ¶çš„ç®€å•ç¤ºä¾‹</h2>
<p>å‡è®¾ç°åœ¨éœ€è¦ä¸€ä¸ªå‘é€æ¶ˆæ¯çš„æœåŠ¡MessageServiceï¼Œå‘é€æ¶ˆæ¯çš„å®ç°å¯èƒ½æ˜¯åŸºäºçŸ­ä¿¡ã€ä¹Ÿå¯èƒ½æ˜¯åŸºäºç”µå­é‚®ä»¶ã€æˆ–æ¨é€é€šçŸ¥å‘é€æ¶ˆæ¯ã€‚</p>
<ul>
<li><strong>æ¥å£å®šä¹‰</strong>ï¼šé¦–å…ˆå®šä¹‰ä¸€ä¸ªæ¥å£ <code>MessageService</code></li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MessageService</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message)</span>;
}
</code></pre>
<ul>
<li><strong>æä¾›ä¸¤ä¸ªå®ç°ç±»</strong>ï¼šä¸€ä¸ªé€šè¿‡çŸ­ä¿¡å‘é€æ¶ˆæ¯ï¼Œä¸€ä¸ªé€šè¿‡ç”µå­é‚®ä»¶å‘é€æ¶ˆæ¯ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çŸ­ä¿¡å‘é€å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsMessageService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageService</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message)</span> {
        System.out.println(<span class="hljs-string">"Sending SMS: "</span> + message);
    }
}

<span class="hljs-comment">// ç”µå­é‚®ä»¶å‘é€å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailMessageService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MessageService</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(String message)</span> {
        System.out.println(<span class="hljs-string">"Sending Email: "</span> + message);
    }
}
</code></pre>
<ul>
<li><strong>é…ç½®æ–‡ä»¶</strong>ï¼šåœ¨ <code>META-INF/services/</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º <code>MessageService</code> ï¼Œå…¨é™å®šå <code>com.example.MessageService</code>ï¼Œæ–‡ä»¶å†…å®¹ä¸ºæ¥å£çš„å®ç°ç±»çš„å…¨é™å®šåã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"># æ–‡ä»¶: META-INF/services/com.seven.MessageService
com.seven.SmsMessageService
com.seven.EmailMessageService
</code></pre>
<ul>
<li><strong>åŠ è½½æœåŠ¡å®ç°</strong>ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œé€šè¿‡ <code>ServiceLoader</code> åŠ¨æ€åŠ è½½å¹¶ä½¿ç”¨è¿™äº›å®ç°ç±»ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Application</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        ServiceLoader&lt;MessageService&gt; loader = ServiceLoader.load(MessageService.class);

        <span class="hljs-keyword">for</span> (MessageService service : loader) {
            service.sendMessage(<span class="hljs-string">"Hello, SPI!"</span>);
        }
    }
}
</code></pre>
<p>è¿è¡Œæ—¶ï¼Œ<code>ServiceLoader</code> ä¼šå‘ç°å¹¶åŠ è½½é…ç½®æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰å®ç°ç±»ï¼Œå¹¶ä¾æ¬¡è°ƒç”¨å®ƒä»¬çš„ <code>sendMessage</code> æ–¹æ³•ã€‚</p>
<p>ç”±äºåœ¨ é…ç½®æ–‡ä»¶ å†™äº†ä¸¤ä¸ªå®ç°ç±»ï¼Œå› æ­¤ä¸¤ä¸ªå®ç°ç±»éƒ½ä¼šæ‰§è¡Œ sendMessage æ–¹æ³•ã€‚</p>
<p>è¿™å°±æ˜¯å› ä¸ºServiceLoader.load(Search.class)åœ¨åŠ è½½æŸæ¥å£æ—¶ï¼Œä¼šå» META-INF/services ä¸‹æ‰¾æ¥å£çš„å…¨é™å®šåæ–‡ä»¶ï¼Œå†æ ¹æ®é‡Œé¢çš„å†…å®¹åŠ è½½ç›¸åº”çš„å®ç°ç±»ã€‚</p>
<p>è¿™å°±æ˜¯spiçš„æ€æƒ³ï¼Œæ¥å£çš„å®ç°ç”±providerå®ç°ï¼Œprovideråªç”¨åœ¨æäº¤çš„jaråŒ…é‡Œçš„META-INF/servicesä¸‹æ ¹æ®å¹³å°å®šä¹‰çš„æ¥å£æ–°å»ºæ–‡ä»¶ï¼Œå¹¶æ·»åŠ è¿›ç›¸åº”çš„å®ç°ç±»å†…å®¹å°±å¥½ã€‚</p>
<h2 data-id="heading-4">SPIæœºåˆ¶çš„åº”ç”¨</h2>
<h3 data-id="heading-5">JDBC DriverManager</h3>
<p>åœ¨JDBC4.0ä¹‹å‰ï¼Œå¼€å‘è¿æ¥æ•°æ®åº“çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šç”¨<code>Class.forName("com.mysql.jdbc.Driver")</code>è¿™å¥å…ˆåŠ è½½æ•°æ®åº“ç›¸å…³çš„é©±åŠ¨ï¼Œç„¶åå†è¿›è¡Œè·å–è¿æ¥ç­‰çš„æ“ä½œã€‚è€ŒJDBC4.0ä¹‹åä¸éœ€è¦ç”¨<code>Class.forName("com.mysql.jdbc.Driver")</code>æ¥åŠ è½½é©±åŠ¨ï¼Œç›´æ¥è·å–è¿æ¥å°±å¯ä»¥äº†ï¼ŒåŸå› å°±æ˜¯ç°åœ¨ä½¿ç”¨äº†Javaçš„SPIæ‰©å±•æœºåˆ¶æ¥å®ç°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c85677d74aaa4af5afa2748ef2c6484a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889327&amp;x-signature=AeHC76Ms6Mgy2IMHayYaVHVnEUE%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š</p>
<ol>
<li>é¦–å…ˆåœ¨javaä¸­å®šä¹‰äº†æ¥å£ java.sql.Driverï¼Œå¹¶æ²¡æœ‰å…·ä½“çš„å®ç°ï¼Œå…·ä½“çš„å®ç°éƒ½æ˜¯ç”±ä¸åŒå‚å•†æ¥æä¾›çš„ã€‚</li>
<li>åœ¨mysqlçš„jaråŒ…mysql-connector-java-8.0.26.jarä¸­ï¼Œå¯ä»¥æ‰¾åˆ° META-INF/services ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹ä¼šæœ‰ä¸€ä¸ªåå­—ä¸º java.sql.Driver çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯com.mysql.cj.jdbc.Driverï¼Œè¿™é‡Œé¢çš„å†…å®¹å°±æ˜¯mysqlé’ˆå¯¹Javaä¸­å®šä¹‰çš„æ¥å£çš„å®ç°ã€‚</li>
<li>åŒæ ·åœ¨ojdbcçš„jaråŒ…ojdbc11.jarä¸­ï¼Œä¹Ÿå¯ä»¥æ‰¾åˆ°åŒæ ·çš„é…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯ oracle.jdbc.OracleDriverï¼Œè¿™æ˜¯oracleæ•°æ®åº“å¯¹Javaçš„java.sql.Driverçš„å®ç°ã€‚</li>
</ol>
<h4 data-id="heading-6">ä½¿ç”¨æ–¹æ³•</h4>
<p>è€Œç°åœ¨Javaä¸­å†™è¿æ¥æ•°æ®åº“çš„ä»£ç çš„æ—¶å€™ï¼Œä¸éœ€è¦å†ä½¿ç”¨<code>Class.forName("com.mysql.jdbc.Driver")</code>æ¥åŠ è½½é©±åŠ¨äº†ï¼Œç›´æ¥è·å–è¿æ¥å°±å¯ä»¥äº†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:xxxx://xxxx:xxxx/xxxx"</span>;
<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);
.....
</code></pre>
<p>è¿™é‡Œå¹¶æ²¡æœ‰æ¶‰åŠåˆ°spiçš„ä½¿ç”¨ï¼Œçœ‹ä¸‹é¢æºç ã€‚</p>
<h4 data-id="heading-7">æºç å®ç°</h4>
<p>ä¸Šé¢çš„ä½¿ç”¨æ–¹æ³•ï¼Œå°±æ˜¯æ™®é€šçš„è¿æ¥æ•°æ®åº“çš„ä»£ç ï¼Œå®é™…ä¸Šå¹¶æ²¡æœ‰æ¶‰åŠåˆ° SPI çš„ä¸œè¥¿ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹å¯ä»¥ç¡®å®šçš„æ˜¯ï¼Œæˆ‘ä»¬æ²¡æœ‰å†™æœ‰å…³å…·ä½“é©±åŠ¨çš„ç¡¬ç¼–ç <code>Class.forName("com.mysql.jdbc.Driver")</code>ï¼</p>
<p>è€Œä¸Šé¢çš„ä»£ç å°±å¯ä»¥ç›´æ¥è·å–æ•°æ®åº“è¿æ¥è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯è·ŸSPIæœ‰å•¥å…³ç³»å‘¢ï¼Ÿ
æ—¢ç„¶ä¸Šé¢ä»£ç æ²¡æœ‰åŠ è½½é©±åŠ¨çš„ä»£ç ï¼Œé‚£å®é™…ä¸Šæ˜¯æ€ä¹ˆå»ç¡®å®šä½¿ç”¨å“ªä¸ªæ•°æ®åº“è¿æ¥çš„é©±åŠ¨å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œå°±æ¶‰åŠåˆ°ä½¿ç”¨Javaçš„SPI æ‰©å±•æœºåˆ¶æ¥æŸ¥æ‰¾ç›¸å…³é©±åŠ¨çš„ä¸œè¥¿äº†ï¼Œå…³äºé©±åŠ¨çš„æŸ¥æ‰¾å…¶å®éƒ½åœ¨DriverManagerä¸­ï¼ŒDriverManageræ˜¯Javaä¸­çš„å®ç°ï¼Œç”¨æ¥è·å–æ•°æ®åº“è¿æ¥ï¼Œæºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DriverManager</span> {

    <span class="hljs-comment">// å­˜æ”¾æ³¨å†Œçš„jdbcé©±åŠ¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">static</span> CopyOnWriteArrayList&lt;DriverInfo&gt; registeredDrivers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;&gt;();

    <span class="hljs-comment">/**
     * Load the initial JDBC drivers by checking the System property
     * jdbc.properties and then use the {<span class="hljs-doctag">@code</span> ServiceLoader} mechanism
     */</span>
    <span class="hljs-keyword">static</span> {
        loadInitialDrivers();
        println(<span class="hljs-string">"JDBC DriverManager initialized"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadInitialDrivers</span><span class="hljs-params">()</span> {
        String drivers;
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»JVM -Då‚æ•°è¯»å–jdbcé©±åŠ¨</span>
            drivers = AccessController.doPrivileged(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivilegedAction</span>&lt;String&gt;() {
                <span class="hljs-keyword">public</span> String <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                    <span class="hljs-keyword">return</span> System.getProperty(<span class="hljs-string">"jdbc.drivers"</span>);
                }
            });
        } <span class="hljs-keyword">catch</span> (Exception ex) {
            drivers = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-comment">// If the driver is packaged as a Service Provider, load it.</span>
        <span class="hljs-comment">// Get all the drivers through the classloader</span>
        <span class="hljs-comment">// exposed as a java.sql.Driver.class service.</span>
        <span class="hljs-comment">// ServiceLoader.load() replaces the sun.misc.Providers()</span>

        AccessController.doPrivileged(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivilegedAction</span>&lt;Void&gt;() {
            <span class="hljs-keyword">public</span> Void <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {

                ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);
                Iterator&lt;Driver&gt; driversIterator = loadedDrivers.iterator();

                <span class="hljs-comment">/* Load these drivers, so that they can be instantiated.
                 * It may be the case that the driver class may not be there
                 * i.e. there may be a packaged driver with the service class
                 * as implementation of java.sql.Driver but the actual class
                 * may be missing. In that case a java.util.ServiceConfigurationError
                 * will be thrown at runtime by the VM trying to locate
                 * and load the service.
                 *
                 * Adding a try catch block to catch those runtime errors
                 * if driver not available in classpath but it's
                 * packaged as service and that service is there in classpath.
                 */</span>
                <span class="hljs-keyword">try</span>{
                    <span class="hljs-comment">// åŠ è½½åˆ›å»ºæ‰€æœ‰Driver</span>
                    <span class="hljs-keyword">while</span>(driversIterator.hasNext()) {
                        <span class="hljs-comment">// è§¦å‘Driverçš„ç±»åŠ è½½-&gt;åœ¨é™æ€ä»£ç å—ä¸­åˆ›å»ºDriverå¯¹è±¡å¹¶æ”¾åˆ°DriverManager</span>
                        driversIterator.next();
                    }
                } <span class="hljs-keyword">catch</span>(Throwable t) {
                <span class="hljs-comment">// Do nothing</span>
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
        });

        println(<span class="hljs-string">"DriverManager.initialize: jdbc.drivers = "</span> + drivers);

        <span class="hljs-keyword">if</span> (drivers == <span class="hljs-literal">null</span> || drivers.equals(<span class="hljs-string">""</span>)) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// è§£æJVMå‚æ•°çš„jdbcé©±åŠ¨</span>
        String[] driversList = drivers.split(<span class="hljs-string">":"</span>);
        println(<span class="hljs-string">"number of Drivers:"</span> + driversList.length);
        <span class="hljs-keyword">for</span> (String aDriver : driversList) {
            <span class="hljs-keyword">try</span> {
                println(<span class="hljs-string">"DriverManager.Initialize: loading "</span> + aDriver);
                <span class="hljs-comment">// initialä¸ºture </span>
                <span class="hljs-comment">// è§¦å‘Driverçš„ç±»åŠ è½½-&gt;åœ¨é™æ€ä»£ç å—ä¸­åˆ›å»ºDriverå¯¹è±¡å¹¶æ”¾åˆ°DriverManager</span>
                Class.forName(aDriver, <span class="hljs-literal">true</span>,
                        ClassLoader.getSystemClassLoader());
            } <span class="hljs-keyword">catch</span> (Exception ex) {
                println(<span class="hljs-string">"DriverManager.Initialize: load failed: "</span> + ex);
            }
        }
    }

}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸»è¦æ­¥éª¤æ˜¯ï¼š</p>
<ol>
<li>ä»ç³»ç»Ÿå˜é‡ä¸­è·å–æœ‰å…³é©±åŠ¨çš„å®šä¹‰ã€‚</li>
<li>ä½¿ç”¨SPIæ¥è·å–é©±åŠ¨çš„å®ç°ã€‚</li>
<li>éå†ä½¿ç”¨SPIè·å–åˆ°çš„å…·ä½“å®ç°ï¼Œå®ä¾‹åŒ–å„ä¸ªå®ç°ç±»ã€‚</li>
<li>æ ¹æ®ç¬¬ä¸€æ­¥è·å–åˆ°çš„é©±åŠ¨åˆ—è¡¨æ¥å®ä¾‹åŒ–å…·ä½“å®ç°ç±»ã€‚</li>
</ol>
<ul>
<li>ç¬¬äºŒæ­¥ï¼šä½¿ç”¨SPIæ¥è·å–é©±åŠ¨çš„å®ç°ï¼Œå¯¹åº”çš„ä»£ç æ˜¯ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java">ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);
</code></pre>
<p>è¿™é‡Œå°è£…äº†æ¥å£ç±»å‹å’Œç±»åŠ è½½å™¨ï¼Œå¹¶åˆå§‹åŒ–äº†ä¸€ä¸ªè¿­ä»£å™¨ã€‚</p>
<ul>
<li>ç¬¬ä¸‰æ­¥ï¼šéå†è·å–åˆ°çš„å…·ä½“å®ç°ï¼Œå®ä¾‹åŒ–å„ä¸ªå®ç°ç±»ï¼Œå¯¹åº”çš„ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//è·å–è¿­ä»£å™¨</span>
Iterator&lt;Driver&gt; driversIterator = loadedDrivers.iterator();
<span class="hljs-comment">//éå†æ‰€æœ‰çš„é©±åŠ¨å®ç°</span>
<span class="hljs-keyword">while</span>(driversIterator.hasNext()) {
    driversIterator.next();
}
</code></pre>
<p>åœ¨éå†çš„æ—¶å€™ï¼Œé¦–å…ˆè°ƒç”¨driversIterator.hasNext()æ–¹æ³•ï¼Œè¿™é‡Œä¼šæœç´¢classpathä¸‹ä»¥åŠjaråŒ…ä¸­æ‰€æœ‰çš„META-INF/servicesç›®å½•ä¸‹çš„java.sql.Driveræ–‡ä»¶ï¼Œå¹¶æ‰¾åˆ°æ–‡ä»¶ä¸­çš„å®ç°ç±»çš„åå­—ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰å®ä¾‹åŒ–å…·ä½“çš„å®ç°ç±»ï¼ˆServiceLoaderå…·ä½“çš„æºç å®ç°åœ¨ä¸‹é¢ï¼‰ã€‚</p>
<p>ç„¶åæ˜¯è°ƒç”¨driversIterator.next();æ–¹æ³•ï¼Œæ­¤æ—¶å°±ä¼šæ ¹æ®é©±åŠ¨åå­—å…·ä½“å®ä¾‹åŒ–å„ä¸ªå®ç°ç±»äº†ã€‚ç°åœ¨é©±åŠ¨å°±è¢«æ‰¾åˆ°å¹¶å®ä¾‹åŒ–äº†ã€‚</p>
<h3 data-id="heading-8">Common-Logging</h3>
<p>common-loggingï¼ˆä¹Ÿç§°Jakarta Commons Loggingï¼Œç¼©å†™ JCLï¼‰æ˜¯å¸¸ç”¨çš„æ—¥å¿—åº“é—¨é¢ï¼Œ ä½¿ç”¨äº†SPIçš„æ–¹å¼æ¥åŠ¨æ€åŠ è½½å’Œé…ç½®æ—¥å¿—å®ç°ã€‚è¿™ç§æœºåˆ¶å…è®¸åº“åœ¨è¿è¡Œæ—¶æ‰¾åˆ°åˆé€‚çš„æ—¥å¿—å®ç°ï¼Œè€Œæ— éœ€ç¡¬ç¼–ç å…·ä½“çš„æ—¥å¿—åº“ã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸‹å®ƒæ˜¯æ€ä¹ˆé€šè¿‡SPIè§£è€¦çš„ã€‚</p>
<p>é¦–å…ˆï¼Œæ—¥å¿—å®ä¾‹æ˜¯é€šè¿‡LogFactoryçš„getLog(String)æ–¹æ³•åˆ›å»ºçš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getLog</span><span class="hljs-params">(Class clazz)</span> <span class="hljs-keyword">throws</span> LogConfigurationException {
    <span class="hljs-keyword">return</span> getFactory().getInstance(clazz);
}
</code></pre>
<p>LogFatoryæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒè´Ÿè´£åŠ è½½å…·ä½“çš„æ—¥å¿—å®ç°ï¼ŒgetFactory()æ–¹æ³•æºç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> org.apache.commons.logging.LogFactory <span class="hljs-title function_">getFactory</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> LogConfigurationException {
    <span class="hljs-comment">// Identify the class loader we will be using</span>
    <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">contextClassLoader</span> <span class="hljs-operator">=</span> getContextClassLoaderInternal();

    <span class="hljs-keyword">if</span> (contextClassLoader == <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// This is an odd enough situation to report about. This</span>
        <span class="hljs-comment">// output will be a nuisance on JDK1.1, as the system</span>
        <span class="hljs-comment">// classloader is null in that environment.</span>
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(<span class="hljs-string">"Context classloader is null."</span>);
        }
    }

    <span class="hljs-comment">// Return any previously registered factory for this class loader</span>
    org.apache.commons.logging.<span class="hljs-type">LogFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> getCachedFactory(contextClassLoader);
    <span class="hljs-keyword">if</span> (factory != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> factory;
    }

    <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
        logDiagnostic(
                <span class="hljs-string">"[LOOKUP] LogFactory implementation requested for the first time for context classloader "</span> +
                        objectId(contextClassLoader));
        logHierarchy(<span class="hljs-string">"[LOOKUP] "</span>, contextClassLoader);
    }

    <span class="hljs-comment">// classpathæ ¹ç›®å½•ä¸‹å¯»æ‰¾commons-logging.properties</span>
    <span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> getConfigurationFile(contextClassLoader, FACTORY_PROPERTIES);

    <span class="hljs-comment">// Determine whether we will be using the thread context class loader to</span>
    <span class="hljs-comment">// load logging classes or not by checking the loaded properties file (if any).</span>
    <span class="hljs-comment">// classpathæ ¹ç›®å½•ä¸‹commons-logging.propertiesæ˜¯å¦é…ç½®use_tccl</span>
    <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">baseClassLoader</span> <span class="hljs-operator">=</span> contextClassLoader;
    <span class="hljs-keyword">if</span> (props != <span class="hljs-literal">null</span>) {
        <span class="hljs-type">String</span> <span class="hljs-variable">useTCCLStr</span> <span class="hljs-operator">=</span> props.getProperty(TCCL_KEY);
        <span class="hljs-keyword">if</span> (useTCCLStr != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (Boolean.valueOf(useTCCLStr).booleanValue() == <span class="hljs-literal">false</span>) {
                baseClassLoader = thisClassLoader;
            }
        }
    }

    <span class="hljs-comment">// è¿™é‡ŒçœŸæ­£å¼€å§‹å†³å®šä½¿ç”¨å“ªä¸ªfactory</span>
    <span class="hljs-comment">// é¦–å…ˆï¼Œå°è¯•æŸ¥æ‰¾vmç³»ç»Ÿå±æ€§org.apache.commons.logging.LogFactoryï¼Œå…¶æ˜¯å¦æŒ‡å®šfactory</span>
    <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
        logDiagnostic(<span class="hljs-string">"[LOOKUP] Looking for system property ["</span> + FACTORY_PROPERTY +
                <span class="hljs-string">"] to define the LogFactory subclass to use..."</span>);
    }

    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">factoryClass</span> <span class="hljs-operator">=</span> getSystemProperty(FACTORY_PROPERTY, <span class="hljs-literal">null</span>);
        <span class="hljs-keyword">if</span> (factoryClass != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(<span class="hljs-string">"[LOOKUP] Creating an instance of LogFactory class '"</span> + factoryClass +
                        <span class="hljs-string">"' as specified by system property "</span> + FACTORY_PROPERTY);
            }
            factory = newFactory(factoryClass, baseClassLoader, contextClassLoader);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(<span class="hljs-string">"[LOOKUP] No system property ["</span> + FACTORY_PROPERTY + <span class="hljs-string">"] defined."</span>);
            }
        }
    } <span class="hljs-keyword">catch</span> (SecurityException e) {
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(<span class="hljs-string">"[LOOKUP] A security exception occurred while trying to create an"</span> +
                    <span class="hljs-string">" instance of the custom factory class"</span> + <span class="hljs-string">": ["</span> + trim(e.getMessage()) +
                    <span class="hljs-string">"]. Trying alternative implementations..."</span>);
        }
        <span class="hljs-comment">// ignore</span>
    } <span class="hljs-keyword">catch</span> (RuntimeException e) {
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(<span class="hljs-string">"[LOOKUP] An exception occurred while trying to create an"</span> +
                    <span class="hljs-string">" instance of the custom factory class"</span> + <span class="hljs-string">": ["</span> +
                    trim(e.getMessage()) +
                    <span class="hljs-string">"] as specified by a system property."</span>);
        }
        <span class="hljs-keyword">throw</span> e;
    }

    <span class="hljs-comment">// ç¬¬äºŒï¼Œå°è¯•ä½¿ç”¨java spiæœåŠ¡å‘ç°æœºåˆ¶ï¼Œåœ¨META-INF/servicesä¸‹å¯»æ‰¾org.apache.commons.logging.LogFactoryå®ç°</span>
    <span class="hljs-keyword">if</span> (factory == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(<span class="hljs-string">"[LOOKUP] Looking for a resource file of name ["</span> + SERVICE_ID +
                    <span class="hljs-string">"] to define the LogFactory subclass to use..."</span>);
        }
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// META-INF/services/org.apache.commons.logging.LogFactory, SERVICE_ID</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> getResourceAsStream(contextClassLoader, SERVICE_ID);

            <span class="hljs-keyword">if</span> (is != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// This code is needed by EBCDIC and other strange systems.</span>
                <span class="hljs-comment">// It's a fix for bugs reported in xerces</span>
                BufferedReader rd;
                <span class="hljs-keyword">try</span> {
                    rd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(is, <span class="hljs-string">"UTF-8"</span>));
                } <span class="hljs-keyword">catch</span> (java.io.UnsupportedEncodingException e) {
                    rd = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(is));
                }

                <span class="hljs-type">String</span> <span class="hljs-variable">factoryClassName</span> <span class="hljs-operator">=</span> rd.readLine();
                rd.close();

                <span class="hljs-keyword">if</span> (factoryClassName != <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-string">""</span>.equals(factoryClassName)) {
                    <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                        logDiagnostic(<span class="hljs-string">"[LOOKUP]  Creating an instance of LogFactory class "</span> +
                                factoryClassName +
                                <span class="hljs-string">" as specified by file '"</span> + SERVICE_ID +
                                <span class="hljs-string">"' which was present in the path of the context classloader."</span>);
                    }
                    factory = newFactory(factoryClassName, baseClassLoader, contextClassLoader);
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// is == null</span>
                <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                    logDiagnostic(<span class="hljs-string">"[LOOKUP] No resource file with name '"</span> + SERVICE_ID + <span class="hljs-string">"' found."</span>);
                }
            }
        } <span class="hljs-keyword">catch</span> (Exception ex) {
            <span class="hljs-comment">// note: if the specified LogFactory class wasn't compatible with LogFactory</span>
            <span class="hljs-comment">// for some reason, a ClassCastException will be caught here, and attempts will</span>
            <span class="hljs-comment">// continue to find a compatible class.</span>
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(
                        <span class="hljs-string">"[LOOKUP] A security exception occurred while trying to create an"</span> +
                                <span class="hljs-string">" instance of the custom factory class"</span> +
                                <span class="hljs-string">": ["</span> + trim(ex.getMessage()) +
                                <span class="hljs-string">"]. Trying alternative implementations..."</span>);
            }
            <span class="hljs-comment">// ignore</span>
        }
    }

    <span class="hljs-comment">// ç¬¬ä¸‰ï¼Œå°è¯•ä»classpathæ ¹ç›®å½•ä¸‹çš„commons-logging.propertiesä¸­æŸ¥æ‰¾org.apache.commons.logging.LogFactoryå±æ€§æŒ‡å®šçš„factory</span>
    <span class="hljs-keyword">if</span> (factory == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (props != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(
                        <span class="hljs-string">"[LOOKUP] Looking in properties file for entry with key '"</span> + FACTORY_PROPERTY +
                                <span class="hljs-string">"' to define the LogFactory subclass to use..."</span>);
            }
            <span class="hljs-type">String</span> <span class="hljs-variable">factoryClass</span> <span class="hljs-operator">=</span> props.getProperty(FACTORY_PROPERTY);
            <span class="hljs-keyword">if</span> (factoryClass != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                    logDiagnostic(
                            <span class="hljs-string">"[LOOKUP] Properties file specifies LogFactory subclass '"</span> + factoryClass + <span class="hljs-string">"'"</span>);
                }
                factory = newFactory(factoryClass, baseClassLoader, contextClassLoader);

                <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> think about whether we need to handle exceptions from newFactory</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                    logDiagnostic(<span class="hljs-string">"[LOOKUP] Properties file has no entry specifying LogFactory subclass."</span>);
                }
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
                logDiagnostic(<span class="hljs-string">"[LOOKUP] No properties file available to determine"</span> + <span class="hljs-string">" LogFactory subclass from.."</span>);
            }
        }
    }

    <span class="hljs-comment">// æœ€åï¼Œä½¿ç”¨åå¤‡factoryå®ç°ï¼Œorg.apache.commons.logging.impl.LogFactoryImpl</span>
    <span class="hljs-keyword">if</span> (factory == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (isDiagnosticsEnabled()) {
            logDiagnostic(
                    <span class="hljs-string">"[LOOKUP] Loading the default LogFactory implementation '"</span> + FACTORY_DEFAULT +
                            <span class="hljs-string">"' via the same classloader that loaded this LogFactory"</span> +
                            <span class="hljs-string">" class (ie not looking in the context classloader)."</span>);
        }

        factory = newFactory(FACTORY_DEFAULT, thisClassLoader, contextClassLoader);
    }

    <span class="hljs-keyword">if</span> (factory != <span class="hljs-literal">null</span>) {
        cacheFactory(contextClassLoader, factory);

        <span class="hljs-keyword">if</span> (props != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">Enumeration</span> <span class="hljs-variable">names</span> <span class="hljs-operator">=</span> props.propertyNames();
            <span class="hljs-keyword">while</span> (names.hasMoreElements()) {
                <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> (String) names.nextElement();
                <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> props.getProperty(name);
                factory.setAttribute(name, value);
            }
        }
    }

    <span class="hljs-keyword">return</span> factory;
}
</code></pre>
<p>å¯ä»¥çœ‹å‡ºï¼ŒæŠ½è±¡ç±»LogFactoryåŠ è½½å…·ä½“å®ç°çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä»vmç³»ç»Ÿå±æ€§org.apache.commons.logging.LogFactory</li>
<li>ä½¿ç”¨SPIæœåŠ¡å‘ç°æœºåˆ¶ï¼Œå‘ç°org.apache.commons.logging.LogFactoryçš„å®ç°</li>
<li>æŸ¥æ‰¾classpathæ ¹ç›®å½•commons-logging.propertiesçš„org.apache.commons.logging.LogFactoryå±æ€§æ˜¯å¦æŒ‡å®šfactoryå®ç°</li>
<li>ä½¿ç”¨é»˜è®¤factoryå®ç°ï¼Œorg.apache.commons.logging.impl.LogFactoryImpl</li>
</ol>
<p>LogFactoryçš„getLog()æ–¹æ³•è¿”å›ç±»å‹æ˜¯org.apache.commons.logging.Logæ¥å£ï¼Œæä¾›äº†ä»traceåˆ°fatalæ–¹æ³•ã€‚å¯ä»¥ç¡®å®šï¼Œå¦‚æœæ—¥å¿—å®ç°æä¾›è€…åªè¦å®ç°è¯¥æ¥å£ï¼Œå¹¶ä¸”ä½¿ç”¨ç»§æ‰¿è‡ªorg.apache.commons.logging.LogFactoryçš„å­ç±»åˆ›å»ºLogï¼Œå¿…ç„¶å¯ä»¥æ„å»ºä¸€ä¸ªæ¾è€¦åˆçš„æ—¥å¿—ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-9">Springä¸­SPIæœºåˆ¶</h3>
<p>åœ¨springbootçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.seven97.top%2Fframework%2Fspringboot%2Fprincipleofautomaticassembly.html" target="_blank" title="https://www.seven97.top/framework/springboot/principleofautomaticassembly.html" ref="nofollow noopener noreferrer">è‡ªåŠ¨è£…é…</a>è¿‡ç¨‹ä¸­ï¼Œæœ€ç»ˆä¼šåŠ è½½META-INF/spring.factoriesæ–‡ä»¶ï¼Œä¸»è¦é€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤å®ç°ï¼š</p>
<ol>
<li><strong>æœåŠ¡æ¥å£å®šä¹‰</strong>ï¼š Spring å®šä¹‰äº†è®¸å¤šæœåŠ¡æ¥å£ï¼Œå¦‚ <code>org.springframework.boot.autoconfigure.EnableAutoConfiguration</code>ã€‚</li>
<li><strong>æœåŠ¡æä¾›è€…å®ç°</strong>ï¼š å„ç§å…·ä½“çš„æ¨¡å—å’Œåº“ä¼šæä¾›è¿™äº›æœåŠ¡æ¥å£çš„å®ç°ï¼Œå¦‚å„ç§è‡ªåŠ¨é…ç½®ç±»ã€‚</li>
<li><strong>æœåŠ¡æè¿°æ–‡ä»¶</strong>ï¼š åœ¨å®ç°æ¨¡å—çš„ JAR åŒ…ä¸­ï¼Œä¼šæœ‰ä¸€ä¸ª <code>META-INF/spring.factories</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­åˆ—å‡ºäº†è¯¥ JAR åŒ…ä¸­å®ç°çš„è‡ªåŠ¨é…ç½®ç±»ã€‚</li>
<li><strong>æœåŠ¡åŠ è½½</strong>ï¼š Spring Boot åœ¨å¯åŠ¨æ—¶åŠ è½½ <code>spring.factories</code> æ–‡ä»¶ï¼Œå¹¶å®ä¾‹åŒ–è¿™äº›æ–‡ä»¶ä¸­åˆ—å‡ºçš„å®ç°ç±»ã€‚</li>
</ol>
<p>Spring Boot ä½¿ç”¨ <code>SpringFactoriesLoader</code> æ¥åŠ è½½ <code>spring.factories</code> æ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰ç±»ï¼Œå¹¶å°†å®ƒä»¬æ³¨å†Œåˆ°åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶å®è¿™é‡Œä¸ä»…ä»…æ˜¯ä¼šå»ClassPathè·¯å¾„ä¸‹æŸ¥æ‰¾ï¼Œä¼šæ‰«ææ‰€æœ‰è·¯å¾„ä¸‹çš„JaråŒ…ï¼Œåªä¸è¿‡è¿™ä¸ªæ–‡ä»¶åªä¼šåœ¨Classpathä¸‹çš„jaråŒ…ä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FACTORIES_RESOURCE_LOCATION</span> <span class="hljs-operator">=</span> <span class="hljs-string">"META-INF/spring.factories"</span>;
<span class="hljs-comment">// spring.factoriesæ–‡ä»¶çš„æ ¼å¼ä¸ºï¼škey=value1,value2,value3</span>
<span class="hljs-comment">// ä»æ‰€æœ‰çš„jaråŒ…ä¸­æ‰¾åˆ°META-INF/spring.factoriesæ–‡ä»¶</span>
<span class="hljs-comment">// ç„¶åä»æ–‡ä»¶ä¸­è§£æå‡ºkey=factoryClassç±»åç§°çš„æ‰€æœ‰valueå€¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title function_">loadFactoryNames</span><span class="hljs-params">(Class&lt;?&gt; factoryClass, ClassLoader classLoader)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">factoryClassName</span> <span class="hljs-operator">=</span> factoryClass.getName();
    <span class="hljs-comment">// å–å¾—èµ„æºæ–‡ä»¶çš„URL</span>
    Enumeration&lt;URL&gt; urls = (classLoader != <span class="hljs-literal">null</span> ? classLoader.getResources(FACTORIES_RESOURCE_LOCATION) : ClassLoader.getSystemResources(FACTORIES_RESOURCE_LOCATION));
    List&lt;String&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();
    <span class="hljs-comment">// éå†æ‰€æœ‰çš„URL</span>
    <span class="hljs-keyword">while</span> (urls.hasMoreElements()) {
        <span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> urls.nextElement();
        <span class="hljs-comment">// æ ¹æ®èµ„æºæ–‡ä»¶URLè§£æpropertiesæ–‡ä»¶ï¼Œå¾—åˆ°å¯¹åº”çš„ä¸€ç»„@Configurationç±»</span>
        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> PropertiesLoaderUtils.loadProperties(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlResource</span>(url));
        <span class="hljs-type">String</span> <span class="hljs-variable">factoryClassNames</span> <span class="hljs-operator">=</span> properties.getProperty(factoryClassName);
        <span class="hljs-comment">// ç»„è£…æ•°æ®ï¼Œå¹¶è¿”å›</span>
        result.addAll(Arrays.asList(StringUtils.commaDelimitedListToStringArray(factoryClassNames)));
    }
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>é€šè¿‡ SPI æœºåˆ¶å’Œ <code>spring.factories</code> æ–‡ä»¶çš„é…åˆï¼ŒSpring Boot å®ç°äº†æ¨¡å—åŒ–å’Œè‡ªåŠ¨é…ç½®çš„èƒ½åŠ›ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡å®šä¹‰è‡ªåŠ¨é…ç½®ç±»å¹¶åœ¨ <code>spring.factories</code> æ–‡ä»¶ä¸­å£°æ˜å®ƒä»¬ï¼Œä»è€Œå®ç°æ¨¡å—çš„ç‹¬ç«‹å’Œæ¾è€¦åˆã€‚è¿™ç§æœºåˆ¶ä¸ä»…ç®€åŒ–äº†é…ç½®å’Œå¯åŠ¨è¿‡ç¨‹ï¼Œè¿˜æå‡äº†åº”ç”¨çš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-10">SPI æœºåˆ¶é€šå¸¸æ€ä¹ˆä½¿ç”¨</h2>
<p>çœ‹å®Œä¸Šé¢çš„å‡ ä¸ªä¾‹å­è§£æï¼Œåº”è¯¥éƒ½èƒ½çŸ¥é“å¤§æ¦‚çš„æµç¨‹äº†ï¼š</p>
<ol>
<li>å®šä¹‰æ ‡å‡†ï¼šå®šä¹‰æ ‡å‡†ï¼Œå°±æ˜¯å®šä¹‰æ¥å£ã€‚æ¯”å¦‚æ¥å£java.sql.Driver</li>
<li>å…·ä½“å‚å•†æˆ–è€…æ¡†æ¶å¼€å‘è€…å®ç°ï¼šå‚å•†æˆ–è€…æ¡†æ¶å¼€å‘è€…å¼€å‘å…·ä½“çš„å®ç°ï¼š
åœ¨META-INF/servicesç›®å½•ä¸‹å®šä¹‰ä¸€ä¸ªåå­—ä¸ºæ¥å£å…¨é™å®šåçš„æ–‡ä»¶ï¼Œæ¯”å¦‚java.sql.Driveræ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ˜¯å…·ä½“çš„å®ç°åå­—ï¼Œæ¯”å¦‚me.cxis.sql.MyDriverã€‚å†™å…·ä½“çš„å®ç°me.cxis.sql.MyDriverï¼Œéƒ½æ˜¯å¯¹æ¥å£Driverçš„å®ç°ã€‚</li>
<li>å…·ä½“ä½¿ç”¨ï¼šå¼•ç”¨å…·ä½“å‚å•†çš„jaråŒ…æ¥å®ç°æˆ‘ä»¬çš„åŠŸèƒ½ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java">ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);
<span class="hljs-comment">//è·å–è¿­ä»£å™¨</span>
Iterator&lt;Driver&gt; driversIterator = loadedDrivers.iterator();
<span class="hljs-comment">//éå†</span>
<span class="hljs-keyword">while</span>(driversIterator.hasNext()) {
    driversIterator.next();
    <span class="hljs-comment">//å¯ä»¥åšå…·ä½“çš„ä¸šåŠ¡é€»è¾‘</span>
}

</code></pre>
<ol start="4">
<li>ä½¿ç”¨è§„èŒƒï¼š</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa43475fdb5949c2bb6227e0f44cb443~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889327&amp;x-signature=%2BVEvjRf9%2BRJes4bO7%2BmIYdMvXAg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">SPIæœºåˆ¶å®ç°åŸç†</h2>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š æ€ä¹ˆæ ·æ‰èƒ½åŠ è½½è¿™äº›SPIæ¥å£çš„å®ç°ç±»å‘¢ï¼ŒçœŸæ­£çš„åŸå› æ˜¯Javaçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.seven97.top%2Fjava%2Fjvm%2F01-jvmbasic2-classloadingmechanism.html" target="_blank" title="https://www.seven97.top/java/jvm/01-jvmbasic2-classloadingmechanism.html" ref="nofollow noopener noreferrer">ç±»åŠ è½½æœºåˆ¶</a>ï¼ SPIæ¥å£å±äºjava rtæ ¸å¿ƒåŒ…ï¼Œåªèƒ½ç”±å¯åŠ¨ç±»åŠ è½½å™¨BootStrap classLoaderåŠ è½½ï¼Œè€Œç¬¬ä¸‰æ–¹jaråŒ…æ˜¯ç”¨æˆ·classPathè·¯å¾„ä¸‹ï¼Œæ ¹æ®ç±»åŠ è½½å™¨çš„å¯è§æ€§åŸåˆ™ï¼šå¯åŠ¨ç±»åŠ è½½å™¨æ— æ³•åŠ è½½è¿™äº›jaråŒ…ï¼Œä¹Ÿå°±æ˜¯æ²¡æ³•å‘ä¸‹å§”æ‰˜ï¼Œæ‰€ä»¥spiå¿…é¡»æ‰“ç ´è¿™ç§ä¼ ç»Ÿçš„åŒäº²å§”æ´¾æœºåˆ¶ï¼Œé€šè¿‡è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨æ¥åŠ è½½ç¬¬ä¸‰æ–¹jaråŒ…ä¸‹çš„spiæ¥å£å®ç°ç±»ï¼</p>
<p>JDKä¸­ServiceLoaderæ–¹æ³•çš„å…·ä½“å®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//ServiceLoaderå®ç°äº†Iterableæ¥å£ï¼Œå¯ä»¥éå†æ‰€æœ‰çš„æœåŠ¡å®ç°è€…</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceLoader</span>&lt;S&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterable</span>&lt;S&gt;{

    <span class="hljs-comment">//æŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„ç›®å½•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"META-INF/services/"</span>;

    <span class="hljs-comment">//è¡¨ç¤ºè¦è¢«åŠ è½½çš„æœåŠ¡çš„ç±»æˆ–æ¥å£</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Class&lt;S&gt; service;

    <span class="hljs-comment">//è¿™ä¸ªClassLoaderç”¨æ¥å®šä½ï¼ŒåŠ è½½ï¼Œå®ä¾‹åŒ–æœåŠ¡æä¾›è€…</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ClassLoader loader;

    <span class="hljs-comment">// è®¿é—®æ§åˆ¶ä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AccessControlContext acc;

    <span class="hljs-comment">// ç¼“å­˜å·²ç»è¢«å®ä¾‹åŒ–çš„æœåŠ¡æä¾›è€…ï¼ŒæŒ‰ç…§å®ä¾‹åŒ–çš„é¡ºåºå­˜å‚¨</span>
    <span class="hljs-keyword">private</span> LinkedHashMap&lt;String,S&gt; providers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashMap</span>&lt;&gt;();

    <span class="hljs-comment">// è¿­ä»£å™¨</span>
    <span class="hljs-keyword">private</span> LazyIterator lookupIterator;

    <span class="hljs-comment">//é‡æ–°åŠ è½½ï¼Œå°±ç›¸å½“äºé‡æ–°åˆ›å»ºServiceLoaderäº†ï¼Œç”¨äºæ–°çš„æœåŠ¡æä¾›è€…å®‰è£…åˆ°æ­£åœ¨è¿è¡Œçš„Javaè™šæ‹Ÿæœºä¸­çš„æƒ…å†µã€‚</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reload</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">//æ¸…ç©ºç¼“å­˜ä¸­æ‰€æœ‰å·²å®ä¾‹åŒ–çš„æœåŠ¡æä¾›è€…</span>
        providers.clear();
        <span class="hljs-comment">//æ–°å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨ä¼šä»å¤´æŸ¥æ‰¾å’Œå®ä¾‹åŒ–æœåŠ¡æä¾›è€…</span>
        lookupIterator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LazyIterator</span>(service, loader);
    }

    <span class="hljs-comment">//ç§æœ‰æ„é€ å™¨</span>
    <span class="hljs-comment">//ä½¿ç”¨æŒ‡å®šçš„ç±»åŠ è½½å™¨å’ŒæœåŠ¡åˆ›å»ºæœåŠ¡åŠ è½½å™¨</span>
    <span class="hljs-comment">//å¦‚æœæ²¡æœ‰æŒ‡å®šç±»åŠ è½½å™¨ï¼Œä½¿ç”¨ç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œå°±æ˜¯åº”ç”¨ç±»åŠ è½½å™¨ã€‚</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">ServiceLoader</span><span class="hljs-params">(Class&lt;S&gt; svc, ClassLoader cl)</span> {
        service = Objects.requireNonNull(svc, <span class="hljs-string">"Service interface cannot be null"</span>);
        loader = (cl == <span class="hljs-literal">null</span>) ? ClassLoader.getSystemClassLoader() : cl;
        acc = (System.getSecurityManager() != <span class="hljs-literal">null</span>) ? AccessController.getContext() : <span class="hljs-literal">null</span>;
        reload();
    }

    <span class="hljs-comment">//è§£æå¤±è´¥å¤„ç†çš„æ–¹æ³•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fail</span><span class="hljs-params">(Class&lt;?&gt; service, String msg, Throwable cause)</span>
        <span class="hljs-keyword">throws</span> ServiceConfigurationError
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceConfigurationError</span>(service.getName() + <span class="hljs-string">": "</span> + msg,
                                            cause);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fail</span><span class="hljs-params">(Class&lt;?&gt; service, String msg)</span>
        <span class="hljs-keyword">throws</span> ServiceConfigurationError
    {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceConfigurationError</span>(service.getName() + <span class="hljs-string">": "</span> + msg);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fail</span><span class="hljs-params">(Class&lt;?&gt; service, URL u, <span class="hljs-type">int</span> line, String msg)</span>
        <span class="hljs-keyword">throws</span> ServiceConfigurationError
    {
        fail(service, u + <span class="hljs-string">":"</span> + line + <span class="hljs-string">": "</span> + msg);
    }

    <span class="hljs-comment">//è§£ææœåŠ¡æä¾›è€…é…ç½®æ–‡ä»¶ä¸­çš„ä¸€è¡Œ</span>
    <span class="hljs-comment">//é¦–å…ˆå»æ‰æ³¨é‡Šæ ¡éªŒï¼Œç„¶åä¿å­˜</span>
    <span class="hljs-comment">//è¿”å›ä¸‹ä¸€è¡Œè¡Œå·</span>
    <span class="hljs-comment">//é‡å¤çš„é…ç½®é¡¹å’Œå·²ç»è¢«å®ä¾‹åŒ–çš„é…ç½®é¡¹ä¸ä¼šè¢«ä¿å­˜</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">parseLine</span><span class="hljs-params">(Class&lt;?&gt; service, URL u, BufferedReader r, <span class="hljs-type">int</span> lc, List&lt;String&gt; names)</span>
        	<span class="hljs-keyword">throws</span> IOException, ServiceConfigurationError{
        <span class="hljs-comment">//è¯»å–ä¸€è¡Œ</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">ln</span> <span class="hljs-operator">=</span> r.readLine();
        <span class="hljs-keyword">if</span> (ln == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        }
        <span class="hljs-comment">//#å·ä»£è¡¨æ³¨é‡Šè¡Œ</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">ci</span> <span class="hljs-operator">=</span> ln.indexOf(<span class="hljs-string">'#'</span>);
        <span class="hljs-keyword">if</span> (ci &gt;= <span class="hljs-number">0</span>) ln = ln.substring(<span class="hljs-number">0</span>, ci);
        ln = ln.trim();
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> ln.length();
        <span class="hljs-keyword">if</span> (n != <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">if</span> ((ln.indexOf(<span class="hljs-string">' '</span>) &gt;= <span class="hljs-number">0</span>) || (ln.indexOf(<span class="hljs-string">'\t'</span>) &gt;= <span class="hljs-number">0</span>))
                fail(service, u, lc, <span class="hljs-string">"Illegal configuration-file syntax"</span>);
            <span class="hljs-type">int</span> <span class="hljs-variable">cp</span> <span class="hljs-operator">=</span> ln.codePointAt(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">if</span> (!Character.isJavaIdentifierStart(cp))
                fail(service, u, lc, <span class="hljs-string">"Illegal provider-class name: "</span> + ln);
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> Character.charCount(cp); i &lt; n; i += Character.charCount(cp)) {
                cp = ln.codePointAt(i);
                <span class="hljs-keyword">if</span> (!Character.isJavaIdentifierPart(cp) &amp;&amp; (cp != <span class="hljs-string">'.'</span>))
                    fail(service, u, lc, <span class="hljs-string">"Illegal provider-class name: "</span> + ln);
            }
            <span class="hljs-keyword">if</span> (!providers.containsKey(ln) &amp;&amp; !names.contains(ln))
                names.add(ln);
        }
        <span class="hljs-keyword">return</span> lc + <span class="hljs-number">1</span>;
    }

    <span class="hljs-comment">//è§£æé…ç½®æ–‡ä»¶ï¼Œè§£ææŒ‡å®šçš„urlé…ç½®æ–‡ä»¶</span>
    <span class="hljs-comment">//ä½¿ç”¨parseLineæ–¹æ³•è¿›è¡Œè§£æï¼Œæœªè¢«å®ä¾‹åŒ–çš„æœåŠ¡æä¾›è€…ä¼šè¢«ä¿å­˜åˆ°ç¼“å­˜ä¸­å»</span>
    <span class="hljs-keyword">private</span> Iterator&lt;String&gt; <span class="hljs-title function_">parse</span><span class="hljs-params">(Class&lt;?&gt; service, URL u)</span> <span class="hljs-keyword">throws</span> ServiceConfigurationError{
        <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        ArrayList&lt;String&gt; names = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">try</span> {
            in = u.openStream();
            r = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(in, <span class="hljs-string">"utf-8"</span>));
            <span class="hljs-type">int</span> <span class="hljs-variable">lc</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
            <span class="hljs-keyword">while</span> ((lc = parseLine(service, u, r, lc, names)) &gt;= <span class="hljs-number">0</span>);
        }
        <span class="hljs-keyword">return</span> names.iterator();
    }

    <span class="hljs-comment">//æœåŠ¡æä¾›è€…æŸ¥æ‰¾çš„è¿­ä»£å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span>&lt;S&gt;{

        Class&lt;S&gt; service;<span class="hljs-comment">//æœåŠ¡æä¾›è€…æ¥å£</span>
        ClassLoader loader;<span class="hljs-comment">//ç±»åŠ è½½å™¨</span>
        Enumeration&lt;URL&gt; configs = <span class="hljs-literal">null</span>;<span class="hljs-comment">//ä¿å­˜å®ç°ç±»çš„url</span>
        Iterator&lt;String&gt; pending = <span class="hljs-literal">null</span>;<span class="hljs-comment">//ä¿å­˜å®ç°ç±»çš„å…¨å</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">nextName</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<span class="hljs-comment">//è¿­ä»£å™¨ä¸­ä¸‹ä¸€ä¸ªå®ç°ç±»çš„å…¨å</span>

        <span class="hljs-keyword">private</span> <span class="hljs-title function_">LazyIterator</span><span class="hljs-params">(Class&lt;S&gt; service, ClassLoader loader)</span> {
            <span class="hljs-built_in">this</span>.service = service;
            <span class="hljs-built_in">this</span>.loader = loader;
        }

        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNextService</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (nextName != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">if</span> (configs == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-type">String</span> <span class="hljs-variable">fullName</span> <span class="hljs-operator">=</span> PREFIX + service.getName();
                    <span class="hljs-keyword">if</span> (loader == <span class="hljs-literal">null</span>)
                        configs = ClassLoader.getSystemResources(fullName);
                    <span class="hljs-keyword">else</span>
                        configs = loader.getResources(fullName);
                }
            }
            <span class="hljs-keyword">while</span> ((pending == <span class="hljs-literal">null</span>) || !pending.hasNext()) {
                <span class="hljs-keyword">if</span> (!configs.hasMoreElements()) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
                pending = parse(service, configs.nextElement());
            }
            nextName = pending.next();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">private</span> S <span class="hljs-title function_">nextService</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (!hasNextService())
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>();
            <span class="hljs-type">String</span> <span class="hljs-variable">cn</span> <span class="hljs-operator">=</span> nextName;
            nextName = <span class="hljs-literal">null</span>;
            Class&lt;?&gt; c = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">try</span> {
                c = Class.forName(cn, <span class="hljs-literal">false</span>, loader);
            }
            <span class="hljs-keyword">if</span> (!service.isAssignableFrom(c)) {
                fail(service, <span class="hljs-string">"Provider "</span> + cn  + <span class="hljs-string">" not a subtype"</span>);
            }
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">S</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> service.cast(c.newInstance());
                providers.put(cn, p);
                <span class="hljs-keyword">return</span> p;
            }
        }

        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (acc == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> hasNextService();
            } <span class="hljs-keyword">else</span> {
                PrivilegedAction&lt;Boolean&gt; action = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivilegedAction</span>&lt;Boolean&gt;() {
                    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">run</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> hasNextService(); }
                };
                <span class="hljs-keyword">return</span> AccessController.doPrivileged(action, acc);
            }
        }

        <span class="hljs-keyword">public</span> S <span class="hljs-title function_">next</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">if</span> (acc == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> nextService();
            } <span class="hljs-keyword">else</span> {
                PrivilegedAction&lt;S&gt; action = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrivilegedAction</span>&lt;S&gt;() {
                    <span class="hljs-keyword">public</span> S <span class="hljs-title function_">run</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> nextService(); }
                };
                <span class="hljs-keyword">return</span> AccessController.doPrivileged(action, acc);
            }
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();
        }

    }

    <span class="hljs-comment">//è·å–è¿­ä»£å™¨</span>
    <span class="hljs-comment">//è¿”å›éå†æœåŠ¡æä¾›è€…çš„è¿­ä»£å™¨</span>
    <span class="hljs-comment">//ä»¥æ‡’åŠ è½½çš„æ–¹å¼åŠ è½½å¯ç”¨çš„æœåŠ¡æä¾›è€…</span>
    <span class="hljs-comment">//æ‡’åŠ è½½çš„å®ç°æ˜¯ï¼šè§£æé…ç½®æ–‡ä»¶å’Œå®ä¾‹åŒ–æœåŠ¡æä¾›è€…çš„å·¥ä½œç”±è¿­ä»£å™¨æœ¬èº«å®Œæˆ</span>
    <span class="hljs-keyword">public</span> Iterator&lt;S&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;S&gt;() {
            <span class="hljs-comment">//æŒ‰ç…§å®ä¾‹åŒ–é¡ºåºè¿”å›å·²ç»ç¼“å­˜çš„æœåŠ¡æä¾›è€…å®ä¾‹</span>
            Iterator&lt;Map.Entry&lt;String,S&gt;&gt; knownProviders
                = providers.entrySet().iterator();

            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">if</span> (knownProviders.hasNext())
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">return</span> lookupIterator.hasNext();
            }

            <span class="hljs-keyword">public</span> S <span class="hljs-title function_">next</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">if</span> (knownProviders.hasNext())
                    <span class="hljs-keyword">return</span> knownProviders.next().getValue();
                <span class="hljs-keyword">return</span> lookupIterator.next();
            }

            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();
            }

        };
    }

    <span class="hljs-comment">//ä¸ºæŒ‡å®šçš„æœåŠ¡ä½¿ç”¨æŒ‡å®šçš„ç±»åŠ è½½å™¨æ¥åˆ›å»ºä¸€ä¸ªServiceLoader</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;S&gt; ServiceLoader&lt;S&gt; <span class="hljs-title function_">load</span><span class="hljs-params">(Class&lt;S&gt; service, ClassLoader loader)</span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceLoader</span>&lt;&gt;(service, loader);
    }

    <span class="hljs-comment">//ä½¿ç”¨çº¿ç¨‹ä¸Šä¸‹æ–‡çš„ç±»åŠ è½½å™¨æ¥åˆ›å»ºServiceLoader</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;S&gt; ServiceLoader&lt;S&gt; <span class="hljs-title function_">load</span><span class="hljs-params">(Class&lt;S&gt; service)</span> {
        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">cl</span> <span class="hljs-operator">=</span> Thread.currentThread().getContextClassLoader();
        <span class="hljs-keyword">return</span> ServiceLoader.load(service, cl);
    }

    <span class="hljs-comment">//ä½¿ç”¨æ‰©å±•ç±»åŠ è½½å™¨ä¸ºæŒ‡å®šçš„æœåŠ¡åˆ›å»ºServiceLoader</span>
    <span class="hljs-comment">//åªèƒ½æ‰¾åˆ°å¹¶åŠ è½½å·²ç»å®‰è£…åˆ°å½“å‰Javaè™šæ‹Ÿæœºä¸­çš„æœåŠ¡æä¾›è€…ï¼Œåº”ç”¨ç¨‹åºç±»è·¯å¾„ä¸­çš„æœåŠ¡æä¾›è€…å°†è¢«å¿½ç•¥</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;S&gt; ServiceLoader&lt;S&gt; <span class="hljs-title function_">loadInstalled</span><span class="hljs-params">(Class&lt;S&gt; service)</span> {
        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">cl</span> <span class="hljs-operator">=</span> ClassLoader.getSystemClassLoader();
        <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">while</span> (cl != <span class="hljs-literal">null</span>) {
            prev = cl;
            cl = cl.getParent();
        }
        <span class="hljs-keyword">return</span> ServiceLoader.load(service, prev);
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"java.util.ServiceLoader["</span> + service.getName() + <span class="hljs-string">"]"</span>;
    }

}
</code></pre>
<ol>
<li><strong>é¦–å…ˆ</strong>ï¼ŒServiceLoaderå®ç°äº†Iterableæ¥å£ï¼Œæ‰€ä»¥å®ƒæœ‰è¿­ä»£å™¨çš„å±æ€§ï¼Œè¿™é‡Œä¸»è¦éƒ½æ˜¯å®ç°äº†è¿­ä»£å™¨çš„ hasNext å’Œ next æ–¹æ³•ã€‚è¿™é‡Œä¸»è¦éƒ½æ˜¯è°ƒç”¨çš„lookupIteratorçš„ç›¸åº”hasNextå’Œnextæ–¹æ³•ï¼ŒlookupIteratoræ˜¯æ‡’åŠ è½½è¿­ä»£å™¨ã€‚</li>
<li><strong>å…¶æ¬¡</strong>ï¼ŒLazyIterator ä¸­çš„ hasNext æ–¹æ³•ï¼Œé™æ€å˜é‡PREFIXå°±æ˜¯â€META-INF/services/â€ç›®å½•ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦åœ¨classpathä¸‹çš„META-INF/services/ç›®å½•é‡Œåˆ›å»ºä¸€ä¸ªä»¥æœåŠ¡æ¥å£å‘½åçš„æ–‡ä»¶ã€‚</li>
<li><strong>æœ€å</strong>ï¼Œé€šè¿‡åå°„æ–¹æ³•Class.forName()åŠ è½½ç±»å¯¹è±¡ï¼Œå¹¶ç”¨newInstanceæ–¹æ³•å°†ç±»å®ä¾‹åŒ–ï¼Œå¹¶æŠŠå®ä¾‹åŒ–åçš„ç±»ç¼“å­˜åˆ°providerså¯¹è±¡ä¸­ï¼Œ(LinkedHashMap&lt;String,S&gt;ç±»å‹ï¼‰ç„¶åè¿”å›å®ä¾‹å¯¹è±¡ã€‚</li>
</ol>
<p>æ‰€ä»¥å¯ä»¥çœ‹åˆ°ServiceLoaderä¸æ˜¯å®ä¾‹åŒ–ä»¥åï¼Œå°±å»è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„å…·ä½“å®ç°ï¼Œå¹¶è¿›è¡Œå®ä¾‹åŒ–ã€‚è€Œæ˜¯ç­‰åˆ°ä½¿ç”¨è¿­ä»£å™¨å»éå†çš„æ—¶å€™ï¼Œæ‰ä¼šåŠ è½½å¯¹åº”çš„é…ç½®æ–‡ä»¶å»è§£æï¼Œè°ƒç”¨hasNextæ–¹æ³•çš„æ—¶å€™ä¼šå»åŠ è½½é…ç½®æ–‡ä»¶è¿›è¡Œè§£æï¼Œè°ƒç”¨nextæ–¹æ³•çš„æ—¶å€™è¿›è¡Œå®ä¾‹åŒ–å¹¶ç¼“å­˜ã€‚</p>
<p>æ‰€æœ‰çš„é…ç½®æ–‡ä»¶åªä¼šåŠ è½½ä¸€æ¬¡ï¼ŒæœåŠ¡æä¾›è€…ä¹Ÿåªä¼šè¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶å¯ä½¿ç”¨reloadæ–¹æ³•ã€‚</p>
<h2 data-id="heading-12">JDK SPIæœºåˆ¶çš„ç¼ºé™·</h2>
<p>é€šè¿‡ä¸Šé¢çš„è§£æï¼Œå¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨SPIæœºåˆ¶çš„ç¼ºé™·ï¼š</p>
<ul>
<li>
<p>è·å–æŸä¸ªå®ç°ç±»çš„æ–¹å¼ä¸å¤Ÿçµæ´»ï¼Œåªèƒ½é€šè¿‡ Iterator å½¢å¼è·å–ï¼Œä¸èƒ½æ ¹æ®æŸä¸ªå‚æ•°æ¥è·å–å¯¹åº”çš„å®ç°ç±»ã€‚å¦‚æœä¸æƒ³ç”¨æŸäº›å®ç°ç±»ï¼Œæˆ–è€…æŸäº›ç±»å®ä¾‹åŒ–å¾ˆè€—æ—¶ï¼Œå®ƒä¹Ÿè¢«è½½å…¥å¹¶å®ä¾‹åŒ–äº†ï¼Œè¿™å°±é€ æˆäº†æµªè´¹ã€‚</p>
</li>
<li>
<p>å¤šä¸ªå¹¶å‘å¤šçº¿ç¨‹ä½¿ç”¨ ServiceLoader ç±»çš„å®ä¾‹æ˜¯ä¸å®‰å…¨çš„</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº¬ä¸œé›¶å”®å¹¿å‘Šåˆ›æ„ï¼šç»Ÿä¸€çš„å¸ƒå±€ç”Ÿæˆå’Œè¯„ä¼°æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7594514040916688923</link>    <guid>https://juejin.cn/post/7594514040916688923</guid>    <pubDate>2026-01-13T06:09:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594514040916688923" data-draft-id="7594415509607317550" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº¬ä¸œé›¶å”®å¹¿å‘Šåˆ›æ„ï¼šç»Ÿä¸€çš„å¸ƒå±€ç”Ÿæˆå’Œè¯„ä¼°æ¨¡å‹"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-13T06:09:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº¬ä¸œé›¶å”®å¹¿å‘Šåˆ›æ„ï¼šç»Ÿä¸€çš„å¸ƒå±€ç”Ÿæˆå’Œè¯„ä¼°æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:09:36.000Z" title="Tue Jan 13 2026 06:09:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šå†¯ä¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1979a23781d4a23979bcbbfdd09c49a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=4ADkuRzvrJaCUKh0%2FaSWiB8sxSg%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>MM2025: Uni-Layout: Integrating Human Feedback in Unified Layout Generation and Evaluation</p>
<p>è®ºæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2508.02374" target="_blank" title="https://arxiv.org/abs/2508.02374" ref="nofollow noopener noreferrer">arxiv.org/abs/2508.02â€¦</a>ï»¿</p>
<p>ä»£ç é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FJD-GenX%2FUni-Layout" target="_blank" title="https://github.com/JD-GenX/Uni-Layout" ref="nofollow noopener noreferrer">github.com/JD-GenX/Uniâ€¦</a>ï»¿</p>
<p>ï»¿</p>
<p>æ‘˜è¦ï¼šå¸ƒå±€ç”Ÿæˆåœ¨ç”µå•†å›¾ç‰‡çš„è®¾è®¡ä¸­èµ·åˆ°è‡³å…³é‡è¦çš„ä½œç”¨ã€‚å½“å‰çš„å¸ƒå±€ç”Ÿæˆæ–¹æ³•åœ¨èƒ½åŠ›ä¸Šå…·æœ‰ä»»åŠ¡ç‰¹å®šæ€§ï¼Œå¹¶ä¸”è¯„ä¼°æ ‡å‡†ä¸äººç±»æ„ŸçŸ¥ä¸ä¸€è‡´ï¼Œå¯¼è‡´å…¶åº”ç”¨èŒƒå›´æœ‰é™ä¸”è¯„ä¼°æ•ˆæœä¸ä½³ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼ŒUni-Layoutå®ç°äº†ç»Ÿä¸€ç”Ÿæˆã€æ¨¡æ‹Ÿäººç±»çš„è¯„ä¼°ä»¥åŠäºŒè€…ä¹‹é—´çš„å¯¹é½ã€‚é’ˆå¯¹é€šç”¨ç”Ÿæˆï¼Œè¯¥æ¡†æ¶å°†å„ç§å¸ƒå±€ä»»åŠ¡æ•´åˆåˆ°ä¸€ä¸ªç»Ÿä¸€çš„åˆ†ç±»ç³»ç»Ÿä¸­ï¼Œå¹¶å¼€å‘äº†ä¸€ä¸ªç»Ÿä¸€çš„ç”Ÿæˆå™¨ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€æç¤ºå¤„ç†èƒŒæ™¯æˆ–å…ƒç´ å†…å®¹å—é™çš„ä»»åŠ¡ã€‚ä¸ºäº†å¼•å…¥äººç±»åé¦ˆä»¥æœ‰æ•ˆè¯„ä¼°å¸ƒå±€ï¼Œæˆ‘ä»¬æ„å»ºäº†Layout-HF100kï¼Œè¿™æ˜¯é¦–ä¸ªåŒ…å«10ä¸‡ä¸ªäººå·¥æ ‡æ³¨å¸ƒå±€çš„å¤§è§„æ¨¡äººç±»åé¦ˆæ•°æ®é›†ã€‚åŸºäºLayout-HF100kï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ç§æ¨¡æ‹Ÿäººç±»çš„è¯„ä¼°å™¨ï¼Œè¯¥è¯„ä¼°å™¨ç»“åˆè§†è§‰å’Œå‡ ä½•ä¿¡æ¯ï¼Œé‡‡ç”¨æ€ç»´é“¾æœºåˆ¶è¿›è¡Œå®šæ€§è¯„ä¼°ï¼Œå¹¶é€šè¿‡ä¿¡å¿ƒä¼°è®¡æ¨¡å—æä¾›å®šé‡æµ‹é‡ã€‚ä¸ºäº†æ›´å¥½åœ°å¯¹é½ç”Ÿæˆå™¨å’Œè¯„ä¼°å™¨ï¼Œæˆ‘ä»¬é‡‡ç”¨åŠ¨æ€è¾¹è·åå¥½ä¼˜åŒ–ï¼ˆDMPOï¼‰æŠ€æœ¯ï¼Œå°†äºŒè€…æ•´åˆä¸ºä¸€ä¸ªåè°ƒç³»ç»Ÿï¼Œä»¥æ›´å¥½åœ°ç¬¦åˆäººç±»åˆ¤æ–­ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯åŠç°çŠ¶</h2>
<p>å¸ƒå±€ç”Ÿæˆæ—¨åœ¨ä¸ºç»™å®šçš„å…ƒç´ è®¾è®¡å¸å¼•äººçš„è§†è§‰æ’ç‰ˆï¼Œæ¶µç›–ä»æµ·æŠ¥å’Œæ–‡æ¡£è®¾è®¡åˆ°ç”¨æˆ·ç•Œé¢å¸ƒå±€å’Œæ‚å¿—æ’ç‰ˆç­‰å¹¿æ³›ä»»åŠ¡ã€‚è™½ç„¶ç”Ÿæˆæ¨¡å‹å–å¾—äº†æ˜¾è‘—è¿›å±•ï¼Œä½†ç°æœ‰æ–¹æ³•é€šå¸¸ä¸“æ³¨äºç‹­ä¹‰ä»»åŠ¡ï¼Œå¯¼è‡´è§£å†³æ–¹æ¡ˆç¼ºä¹çµæ´»æ€§å’Œæ™®é€‚æ€§ã€‚æ­¤å¤–ï¼Œå°½ç®¡ç°æœ‰çš„è¯„ä¼°æŒ‡æ ‡åŸºäºå¸ƒå±€è®¾è®¡åŸåˆ™ç²¾å¿ƒè®¾è®¡ï¼Œä½†å®ƒä»¬å¸¸å¸¸ä¸äººç±»çš„æ„ŸçŸ¥ä¸ä¸€è‡´ã€‚å¦‚å›¾1æ‰€ç¤ºï¼Œé«˜è¯„åˆ†çš„å¸ƒå±€å¯èƒ½åœ¨è§†è§‰è´¨é‡ä¸Šè¾ƒå·®ï¼Œè¿™æ­ç¤ºäº†ç°æœ‰æŒ‡æ ‡ä¸çœŸå®äººç±»æ„ŸçŸ¥ä¹‹é—´çš„å·®è·ã€‚ä¸ºäº†è§£å†³è¿™äº›æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æå‡ºäº†Uni-Layoutï¼Œä¸€ä¸ªé€šè¿‡ç»Ÿä¸€ç”Ÿæˆå™¨ã€æ¨¡æ‹Ÿäººç±»çš„è¯„ä¼°å™¨å’ŒåŠ¨æ€è¾¹è·å¯¹é½æœºåˆ¶æ¥æ•´åˆå¸ƒå±€ç”Ÿæˆã€è¯„ä¼°å’Œå¯¹é½çš„æ•´ä½“æ¡†æ¶ã€‚ä¸ºäº†è¯¦ç»†é˜è¿°Uni-Layoutï¼Œæœ¬æ–‡å›´ç»•ä¸‰ä¸ªæ ¸å¿ƒç ”ç©¶é—®é¢˜å±•å¼€ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d390e83d1604ceebddcf9adf9081a19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=HSQfanmk4vFHI95SRMwaytmOFl4%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>å›¾1ï¼šå¸ƒå±€ç”Ÿæˆä»»åŠ¡çš„åˆ†ç±»ä½“ç³»ä¸åŠ¨æœºé˜è¿°</p>
<h2 data-id="heading-1">äºŒã€å¦‚ä½•å®ç°è·¨ä»»åŠ¡çš„ç»Ÿä¸€å¸ƒå±€ç”Ÿæˆï¼Ÿ</h2>
<p>ä¸ºäº†ç³»ç»Ÿåœ°ç»Ÿä¸€å½“å‰åˆ†æ•£çš„å¸ƒå±€ç”Ÿæˆä»»åŠ¡é¢†åŸŸï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªåŸºäºä¸¤ä¸ªç»´åº¦çš„ç²¾å¿ƒç»„ç»‡çš„åˆ†ç±»æ³•ï¼šèƒŒæ™¯å’Œå…ƒç´ å†…å®¹æ˜¯è‡ªç”±çš„è¿˜æ˜¯å—é™çš„ã€‚å¦‚å›¾1æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†ç°æœ‰çš„å¸ƒå±€ä»»åŠ¡åˆ†ä¸ºå››ç§ä»£è¡¨æ€§ç±»å‹ï¼šBFEFã€BCEFã€BFECå’ŒBCECã€‚å½“å‰çš„ä»»åŠ¡ç‰¹å®šæ–¹æ³•åœ¨ç»Ÿä¸€å¸ƒå±€ç”Ÿæˆæ–¹é¢å­˜åœ¨å›°éš¾ï¼Œä½†å¤šæ¨¡æ€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆMLLMsï¼‰ç”±äºå…¶é€šç”¨çš„è§†è§‰-è¯­è¨€ç†è§£èƒ½åŠ›ï¼Œæä¾›äº†æœ‰å‰æ™¯çš„è§£å†³æ–¹æ¡ˆã€‚åˆ©ç”¨MLLMsï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªç»Ÿä¸€çš„å¸ƒå±€ç”Ÿæˆå™¨ï¼Œå…¶å·¥ä½œæ–¹å¼ç±»ä¼¼äºä¸€åç†Ÿç»ƒçš„è®¾è®¡å¸ˆã€‚è¯¥ç”Ÿæˆå™¨ç»“åˆè§†è§‰çº¦æŸå’Œæ–‡æœ¬æŒ‡ä»¤æ¥ç”Ÿæˆè¿è´¯çš„å¸ƒå±€ï¼Œèƒ½å¤Ÿå¤„ç†èƒŒæ™¯å’Œå…ƒç´ å†…å®¹æ—¢å¯ä»¥å—é™ä¹Ÿå¯ä»¥è‡ªç”±çš„å¤šç§åœºæ™¯ã€‚é€šè¿‡åœ¨å„ç§å¸ƒå±€ä»»åŠ¡ä¸Šçš„è”åˆè®­ç»ƒï¼Œå®ƒä¸ºå¸ƒå±€ç”Ÿæˆæä¾›äº†ä¸€ä¸ªçµæ´»ä¸”ç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä¸ºäº†ç»Ÿä¸€å¤šç§å¸ƒå±€ä»»åŠ¡ï¼Œä¸€ä¸ªé€šç”¨çš„å¸ƒå±€ä»»åŠ¡æŒ‡ä»¤å¯å†™ä½œï¼š</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48fec20f7d6e4acc93b3e08246dd6c82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=8Xh%2BQLqx2eoTySMX%2F%2F%2FFpJBP4hw%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>å…¶ä¸­Tä¸ºä»»åŠ¡æè¿°ï¼Œbè¡¨ç¤ºèƒŒæ™¯çš„å†…å®¹å’Œå±æ€§ï¼Œeè¡¨ç¤ºå…ƒç´ çš„å†…å®¹å’Œå±æ€§ï¼ŒOæ˜¯æŒ‡å®šçš„è¾“å‡ºæ ¼å¼ã€‚æ³¨æ„èƒŒæ™¯å’Œå…ƒç´ çš„å±æ€§æ˜¯å¿…é¡»çš„ï¼Œä½†å…¶å†…å®¹å¯ä¸ºç©ºã€‚ä¸ºäº†æ¸…æ¥šèµ·è§ï¼Œæˆ‘ä»¬é’ˆå¯¹BCECä»»åŠ¡æä¾›äº†ä¸€ä¸ªè¯´æ˜ç¤ºä¾‹ï¼Œå…¶ä¸­ä¸‹åˆ’çº¿éƒ¨åˆ†å¯¹åº”ä¸Šå¼ä¸­çš„å¯¹åº”é¡¹ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f1ff5f4a07c462bb748dfb7f580d871~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=TVEJMnzEIPR81D8Ub4fmyLOpYyo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h2 data-id="heading-2">ä¸‰ã€å¦‚ä½•æ¨¡æ‹Ÿäººç±»æ¥è¯„ä¼°å¸ƒå±€ï¼Ÿ</h2>
<p>å°½ç®¡äººç±»æ„ŸçŸ¥åœ¨å¸ƒå±€è®¾è®¡ä¸­éå¸¸é‡è¦ï¼Œä½†ç°æœ‰æ•°æ®é›†ä¸­ç¼ºä¹å¯¹å¸ƒå±€è´¨é‡çš„äººç±»åé¦ˆã€‚ä¸ºå¼¥è¡¥è¿™ä¸€ç¼ºå£ï¼Œæˆ‘ä»¬æ±‡æ€»äº†ç»Ÿä¸€ç”Ÿæˆå™¨çš„è¾“å‡ºï¼Œå¹¶ç¼–åˆ¶äº†Layout-HF100kï¼Œè¿™æ˜¯é¦–ä¸ªä¸“ä¸ºå¸ƒå±€ç”Ÿæˆç­–åˆ’çš„å…¨é¢äººç±»åé¦ˆæ•°æ®é›†ï¼ŒåŒ…å«10ä¸‡ä¸ªç²¾å¿ƒæ ‡æ³¨çš„é«˜è´¨é‡ç¤ºä¾‹ï¼Œæ¶µç›–ä»£è¡¨æ€§å¸ƒå±€ä»»åŠ¡ã€‚è¯¥æ•°æ®é›†çš„ç¤ºä¾‹å¦‚å›¾2æ‰€ç¤ºã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f486b516de23439bb1a9670f841a30f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=USEpMWPVfwDorbt4VziY3ccVcQk%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>å›¾2ï¼šLayout-HF100kç¤ºä¾‹ã€‚ç¬¬ä¸€/äºŒè¡Œåˆ†åˆ«ä¸ºåˆæ ¼/ä¸åˆæ ¼å¸ƒå±€ã€‚</p>
<p>åŸºäºè¿™ä¸€å…¨æ–°çš„æ•°æ®é›†ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ç§è¯„ä¼°å™¨ï¼Œç»“æ„å¦‚å›¾3ï¼ˆbï¼‰å’Œï¼ˆcï¼‰æ‰€ç¤ºã€‚å…¶é€šè¿‡è§†è§‰å’Œå‡ ä½•ä¿¡æ¯ä¸¤ä¸ªåˆ†æ”¯å¤„ç†å¸ƒå±€ï¼Œä»¥æœ‰æ•ˆæ¨¡æ‹Ÿäººç±»åˆ¤æ–­æ¨¡å¼ã€‚æ­¤å¤–ï¼Œè¯¥è¯„ä¼°å™¨ç»“åˆäº†ä¸€ä¸ªè¾“å‡ºå®šé‡ç½®ä¿¡åº¦ä¼°è®¡çš„åˆ†ç±»å¤´ï¼Œä»¥åŠå®šæ€§â€œæ€ç»´é“¾â€ï¼ˆCoTï¼‰æ¨ç†ï¼Œä½¿å…¶èƒ½å¤Ÿæ•æ‰å¾®å¦™çš„å®¡ç¾åå¥½ï¼Œå¹¶æä¾›ä¸äººç±»æ„ŸçŸ¥æ¨¡å¼ç´§å¯†å¯¹é½çš„å¯è§£é‡Šè¯„ä¼°ã€‚é€šè¿‡ç»“åˆå¤šæ¨¡æ€åˆ†æå’ŒCoTæ¨ç†ï¼Œæˆ‘ä»¬çš„è¯„ä¼°å™¨ä¸ä»…èƒ½å¤Ÿåšå‡ºå‡†ç¡®åˆ¤æ–­ï¼Œè¿˜èƒ½é˜æ˜å…¶å†³ç­–èƒŒåçš„ç†ç”±ï¼Œç±»ä¼¼äºäººç±»ä¸“å®¶å¦‚ä½•è¯„ä¼°å¸ƒå±€ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼ŒCoTåŒ…å«ä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š</p>
<p>(1) å¸ƒå±€æ¦‚è§ˆï¼šå¯¹å¸ƒå±€å¯è§†åŒ–ç»“æœå¿«é€Ÿè€Œå…¨é¢çš„æ‰«æï¼Œé€šè¿‡ç®€æ´çš„æ–‡æœ¬æè¿°æ•æ‰å¸ƒå±€çš„ç¬¬ä¸€å°è±¡ï¼Œæ¦‚è¿°æ•´ä½“æ„å›¾å’Œä¸Šä¸‹æ–‡å…ƒç´ ã€‚</p>
<p>(2) ç©ºé—´è§£æ„ï¼šç³»ç»Ÿåœ°åˆ†è§£å¸ƒå±€çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œåˆ†æå‡ ä½•å±æ€§å’Œç©ºé—´å…³ç³»ã€‚å®ƒæ£€æŸ¥å¯¹é½æ¨¡å¼ã€è¯†åˆ«æ½œåœ¨é‡å ï¼Œå¹¶è¯„ä¼°é—´è·ä¸€è‡´æ€§ï¼Œä»¥æ­ç¤ºæ½œåœ¨çš„ç»“æ„æ¡†æ¶ã€‚</p>
<p>(3) ç¾å­¦è¯„ä¼°ï¼šå¯¹å¸ƒå±€çš„è§†è§‰è´¨é‡è¿›è¡Œè¯¦ç»†è¯„ä¼°ï¼Œé‡ç‚¹å…³æ³¨è‰ºæœ¯ä»·å€¼å’Œè®¾è®¡åŸåˆ™ã€‚è¿™åŒ…æ‹¬å¯¹æ¯”ä¾‹å¹³è¡¡ã€ç©ºé—´å’Œè°å’Œè§†è§‰èŠ‚å¥çš„è¯„ä¼°ï¼ŒåŒæ—¶è€ƒè™‘è¿™äº›å…ƒç´ å¦‚ä½•å¯¹æ•´ä½“ç¾å­¦æ•ˆæœäº§ç”Ÿå½±å“ã€‚</p>
<p>(4) å…¨é¢è¯„ä¼°ï¼šæœ€åé˜¶æ®µç»¼åˆæ‰€æœ‰å…ˆå‰åˆ†æçš„è§è§£ï¼Œä»¥æä¾›å¯¹å¸ƒå±€æœ‰æ•ˆæ€§çš„å…¨é¢è¯„ä¼°ï¼Œæœ€åç»™å‡ºâ€œåˆæ ¼â€æˆ–â€œä¸åˆæ ¼â€çš„æ˜ç¡®åˆ¤æ–­ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4126fe4426904eb9bccecaf83aa4f30e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=FToOYhNRsC96qYDH0%2FxnJ%2F6nzUc%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>å›¾3ï¼šUni-Layoutæ¡†æ¶æ¦‚è§ˆ</p>
<h2 data-id="heading-3">å››ã€å¦‚ä½•æœ‰æ•ˆå¯¹é½äººç±»åé¦ˆå’Œå¸ƒå±€ç”Ÿæˆï¼Ÿ</h2>
<p>ç°æœ‰çš„å¯¹é½æ–¹æ³•è¦ä¹ˆç›´æ¥æœ€å¤§åŒ–äººç±»åå¥½çš„è¾“å‡ºå¯èƒ½æ€§ï¼Œè¦ä¹ˆåœ¨å…¶åå¥½å­¦ä¹ ç›®æ ‡ä¸­ä½¿ç”¨å›ºå®šè¾¹è·ã€‚è¿™äº›ä¼ ç»Ÿæ–¹æ³•æœªèƒ½åæ˜ äººç±»åå¥½çš„ä¸åŒç¨‹åº¦ï¼Œå› ä¸ºå®ƒä»¬å¯¹å¼ºåå¥½å’Œå¼±åå¥½ä¸€è§†åŒä»ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é™åˆ¶ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ç§æ–°çš„å¯¹é½æ–¹æ³•ï¼Œç§°ä¸ºåŠ¨æ€è¾¹è·åå¥½ä¼˜åŒ–ï¼ˆDMPOï¼‰ã€‚å…·ä½“è€Œè¨€ï¼Œå½“è¯„ä¼°è€…åœ¨æˆå¯¹æ ·æœ¬ä¹‹é—´è¡¨ç°å‡ºæ›´å¼ºçƒˆçš„åå¥½æ—¶ï¼ŒDMPOä¼šè‡ªåŠ¨å¢åŠ è¾¹è·ï¼Œä»¥åœ¨èƒœå‡ºå’Œå¤±è´¥çš„å“åº”ä¹‹é—´å¼ºåˆ¶äº§ç”Ÿæ›´å¤§çš„åˆ†æ•°å·®å¼‚ï¼Œè€Œå¯¹äºä¸å¤ªæ˜æ˜¾çš„åå¥½åˆ™åº”ç”¨è¾ƒå°çš„è¾¹è·ã€‚è¿™ç§ä¿¡å¿ƒå¼•å¯¼çš„è‡ªé€‚åº”è¾¹è·ç­–ç•¥æ›´å¥½åœ°æ•æ‰äº†äººç±»åˆ¤æ–­çš„èŒƒå›´ï¼Œä»è€Œå®ç°ä¸å¸ƒå±€ç”Ÿæˆå’Œäººç±»åå¥½çš„æ›´ç²¾ç¡®å¯¹é½ã€‚</p>
<p>å¦‚å›¾3ï¼ˆdï¼‰æ‰€ç¤ºï¼Œç»™å®šä»»åŠ¡æŒ‡ä»¤å’Œå¯é€‰çš„èƒŒæ™¯æˆ–å…ƒç´ å†…å®¹ï¼Œç”Ÿæˆå™¨äº§ç”Ÿä¸¤ä¸ªå€™é€‰å¸ƒå±€l1å’Œl2ã€‚ä¹‹åé€šè¿‡åŒåˆ†æ”¯å¤„ç†å™¨å°†å¸ƒå±€ç»“æœè½¬åŒ–ä¸ºè§†è§‰å’Œå‡ ä½•ä¿¡æ¯ï¼Œå¹¶é€šè¿‡å¸ƒå±€è¯„ä¼°å™¨äº§å‡ºå€™é€‰å¸ƒå±€çš„å¾—åˆ†ã€‚æˆ‘ä»¬å°†ä¸¤ç§å¸ƒå±€çš„åˆ†æ•°å·®è·å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f79f8947ff145f688a58360fb7e2db9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=Ye1INJAol8YWK6kmFPzp68YLTEc%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/627f4a8d776341bfaa4c19437970ed30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=8PieKGvMXBMbfw4Mm4VQ2uAaPm0%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>å…¶ä¸­I+å’Œl+åˆ†åˆ«è¡¨ç¤ºé«˜åˆ†å¸ƒå±€çš„è§†è§‰å’Œå‡ ä½•ä¿¡æ¯ã€‚ä¸ºäº†è¿›ä¸€æ­¥å¢å¼ºå¯¹è¾¹è·çš„æ„ŸçŸ¥ï¼Œæˆ‘ä»¬åº”ç”¨äº†éçº¿æ€§å˜æ¢f()æ¥å¤„ç†åˆ†æ•°å·®è·ã€‚æœ€ç»ˆï¼ŒDMPOçš„æŸå¤±å½¢å¼å¯å†™ä½œï¼š</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f95501589ab462d9fb1e1cfed813ddf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=caPyI905OKwccmTgg7y2qX0jBhA%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>é€šè¿‡å°†ç”Ÿæˆå’Œè¯„ä¼°æ•´åˆåˆ°åé¦ˆå¾ªç¯ä¸­ï¼ŒDMPOå¼¥åˆäº†å¸ƒå±€ç”Ÿæˆå’Œäººç±»å®¡ç¾åå¥½ä¹‹é—´çš„å·®è·ï¼Œäº§ç”Ÿäº†æ›´å…·è§†è§‰å¸å¼•åŠ›çš„å¸ƒå±€ã€‚</p>
<h2 data-id="heading-4">äº”ã€å®éªŒç»“æœ</h2>
<p>ï¼ˆ1ï¼‰å¸ƒå±€è¯„ä¼°æ¨¡å‹æ€§èƒ½</p>
<p>ä¸ºäº†éªŒè¯æˆ‘ä»¬çš„è¯„ä¼°å™¨ï¼Œæˆ‘ä»¬å°†å…¶ä¸ä¸€äº›é¢†å…ˆçš„é—­æºï¼ˆMï¼‰LLMæ¨¡å‹è¿›è¡Œæ¯”è¾ƒï¼ŒåŒ…æ‹¬GPT-4oã€Claude3.5 Sonnetï¼ˆClaude3.5ï¼‰ã€GLM-4vå’ŒDeepSeek-R1ã€‚è¿™äº›æ¨¡å‹éµå¾ªâ€œLLM-as-Judgeâ€èŒƒå¼ã€‚æ‰€æœ‰æ¨¡å‹æ¥æ”¶ç›¸åŒçš„æŒ‡ä»¤å’Œè§†è§‰è¾“å…¥ï¼Œé™¤äº†DeepSeek-R1ï¼Œå®ƒåªå¤„ç†æ–‡æœ¬ã€‚å¦‚è¡¨1æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„æ¨¡å‹è¡¨ç°å‡ºè‰²ï¼Œè¾¾åˆ°85.5%çš„å‡†ç¡®ç‡ï¼Œæ¯”ç°æœ‰çš„MLLMsé«˜å‡º25-35%ã€‚ä¸€äº›MLLMsçš„è¡¨ç°æ¥è¿‘éšæœºï¼ˆçº¦50%ï¼‰ï¼Œçªæ˜¾äº†å®ƒä»¬åœ¨å¸ƒå±€è¯„ä¼°ä¸­çš„å±€é™æ€§ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a676ed0c5cf64a43881e595b7bda7d8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=IwMFgHf3K%2Bgg2eeLq6n7wwaCPec%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>è¡¨1 ï¼šå¸ƒå±€è¯„ä¼°æ¨¡å‹å¯¹æ¯”</p>
<p>ï¼ˆ2ï¼‰å¸ƒå±€ç”Ÿæˆæ¨¡å‹æ€§èƒ½</p>
<p>åœ¨æœ¬å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¸ä¸‰ç±»åŸºçº¿æ–¹æ³•è¿›è¡Œäº†æ¯”è¾ƒï¼š(1) é’ˆå¯¹å•ä¸ªå¸ƒå±€ä»»åŠ¡è®¾è®¡çš„ä»»åŠ¡ç‰¹å®šSOTAæ¨¡å‹ï¼ˆä¾‹å¦‚ï¼ŒLayoutDMï¼‰ï¼›(2) é—­æºæ¨¡å‹ï¼ŒåŒ…æ‹¬GPT-4oã€Claude3.5å’ŒDeepSeek-R1ï¼›(3) å¼€æºçš„å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ï¼ˆMLLMsï¼‰ï¼Œå¦‚è”åˆè®­ç»ƒå››ä¸ªä»»åŠ¡çš„LLaVAã€‚</p>
<p>åœ¨è¡¨2å±•ç¤ºçš„ä»»åŠ¡ç‰¹å®šè¯„ä¼°ä¸­ï¼Œæˆ‘ä»¬çš„æ–¹æ³•åœ¨å¤šä¸ªæŒ‡æ ‡ä¸Šè¡¨ç°å‡ºè‰²ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨BFEFä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†æœ€ä½çš„Oveï¼ˆ0.001ï¼‰å’ŒAliï¼ˆ0.00004ï¼‰ï¼Œä¸ä¸“ç”¨æ¨¡å‹å¦‚LayoutDMå’ŒLayoutFlowæŒå¹³æˆ–è¶…è¶Šã€‚åœ¨BFECä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬çš„æ–¹æ³•ä»¥æœ€å°çš„Oveï¼ˆ0.00045ï¼‰å’Œæœ€é«˜çš„Max.ï¼ˆ0.439ï¼‰åˆ›ä¸‹æ–°çºªå½•ã€‚åœ¨BCEFä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬åœ¨ğ‘…ğ‘ğ‘œğ‘šï¼ˆ31.848ï¼‰å’Œğ‘…ğ‘ ğ‘¢ğ‘ï¼ˆ0.774ï¼‰æ–¹é¢å–å¾—äº†æœ€ä½³ç»“æœã€‚åŒæ ·ï¼Œåœ¨BCECä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬çš„æ–¹æ³•ä»¥æœ€ä½çš„ğ‘…ğ‘ğ‘œğ‘šï¼ˆ8.536ï¼‰æ˜¾è‘—ä¼˜äºç°æœ‰æ–¹æ³•ï¼ŒåŒæ—¶åœ¨å…¶ä»–æŒ‡æ ‡ä¸Šä¿æŒç«äº‰åŠ›ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3183d72df93417eb662ece3ffafdf39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=Zy4wVsgginm8pGWtbQnnpvHkddE%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>è¡¨2ï¼šä»»åŠ¡ç‰¹å®šè¯„ä¼°æŒ‡æ ‡ç»“æœ</p>
<p>é’ˆå¯¹æ‰€æœ‰ä»»åŠ¡çš„äººç±»æ¨¡æ‹Ÿè¯„ä¼°ï¼Œæˆ‘ä»¬å¼•å…¥äº†è¯„ä¼°æ¨¡å‹çš„LRåˆ†æ•°æ¥è¯„ä¼°æ€§èƒ½ã€‚å¦‚å›¾4æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„æ–¹æ³•å®ç°äº†æœ€é«˜çš„LRåˆ†æ•°0.702ï¼Œåœ¨ä¸åŒå¸ƒå±€åœºæ™¯ä¸­è¡¨ç°å‡ºæŒç»­çš„ä¼˜è¶Šæ€§ã€‚ä¸å…¶ä»–æ¨¡å‹ç›¸æ¯”ï¼Œæˆ‘ä»¬æ˜¾è‘—è¶…è¶Šäº†GPT-4oï¼ˆ0.584ï¼‰ã€Claude3.5ï¼ˆ0.575ï¼‰å’ŒDeepSeek-R1ï¼ˆ0.401ï¼‰ï¼Œå·®è·æ˜æ˜¾ã€‚ä¸å¼€æºåŸºçº¿LLaVAï¼ˆ0.422ï¼‰ç›¸æ¯”ï¼Œæ€§èƒ½å·®è·æ›´åŠ æ˜¾è‘—ï¼Œæå‡äº†è¿‘30%ã€‚ä¸LayoutFlowï¼ˆBFEFçš„SOTAï¼‰ã€P&amp;Rï¼ˆBFECçš„SOTAï¼‰å’ŒPoster-Llamaï¼ˆBCEFå’ŒBCECçš„SOTAï¼‰å–å¾—çš„å¹³å‡LRåˆ†æ•°0.658ç›¸æ¯”ï¼Œæˆ‘ä»¬çš„æ–¹æ³•å–å¾—äº†æ›´ä¼˜çš„ç»“æœï¼Œä»è€ŒéªŒè¯äº†Uni-Layoutçš„æœ‰æ•ˆæ€§ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27f032cea829447b980a980507c52f31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889376&amp;x-signature=mxFYwGlDm61YnxeZ2XUqJSccg3U%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>å›¾4ï¼š äººç±»æ¨¡æ‹Ÿè¯„ä¼°æŒ‡æ ‡ç»“æœ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº¬ä¸œå¤šè¯­è¨€è´¨é‡è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7594420277449474075</link>    <guid>https://juejin.cn/post/7594420277449474075</guid>    <pubDate>2026-01-13T06:15:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594420277449474075" data-draft-id="7594420277449408539" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº¬ä¸œå¤šè¯­è¨€è´¨é‡è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-13T06:15:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº¬ä¸œå¤šè¯­è¨€è´¨é‡è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:15:49.000Z" title="Tue Jan 13 2026 06:15:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæå°ç£Š</p>
<h2 data-id="heading-0">ä¸€ã€ä¸šç•Œå¤šè¯­è¨€é¢ä¸´çš„é€šç”¨æŒ‘æˆ˜æ˜¯ä»€ä¹ˆ</h2>
<p>åšè¿™ä¸ªäº‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ä¸šç•Œåšäº†ä»€ä¹ˆã€‚</p>
<p>â€¢ï»¿<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FxJW-HuBu6tNz-pCjAJIwBw" target="_blank" title="https://mp.weixin.qq.com/s/xJW-HuBu6tNz-pCjAJIwBw" ref="nofollow noopener noreferrer">é˜¿é‡Œå·´å·´å…¨çƒåŒ–æµ‹è¯•æŠ€æœ¯ä»‹ç»</a>ï»¿</p>
<p>â€¢ï»¿<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FE-QssSrIdZWo-kykNn4N3Q" target="_blank" title="https://mp.weixin.qq.com/s/E-QssSrIdZWo-kykNn4N3Q" ref="nofollow noopener noreferrer">èš‚èšå…¨çƒåŒ–æ— çº¿ç«¯è´¨é‡è§£å†³æ–¹æ¡ˆ</a>ï»¿</p>
<p>â€¢ï»¿<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJB1AxTnGTvXyIQmnFLrrzg" target="_blank" title="https://mp.weixin.qq.com/s/JB1AxTnGTvXyIQmnFLrrzg" ref="nofollow noopener noreferrer">è°ˆè°ˆå¤šè¯­è¨€æµ‹è¯•</a>ï»¿</p>
<p>æ€»ç»“ä¸‹æ¥ï¼Œéœ€è¦é¢ä¸´3ä¸ªé€šç”¨é—®é¢˜ï¼š</p>
<p>1.è¯­è¨€ç‰©æ–™ç”Ÿäº§é˜¶æ®µï¼šå¯¹äºå­˜é‡æœªæ¥å…¥å¤šè¯­è¨€å¹³å°ï¼ˆ70%ï¼‰çš„æ¨¡å—ï¼Œä¼šæœ‰æ½œåœ¨ä»£ç ä¼šæœªé…ç½®Keyçš„é—®é¢˜ï¼Œè€Œå¯¹äºå·²æ¥å…¥æ¨¡å—ä¼šå‡ºç°é”™é…ç½®Keyé—®é¢˜ï¼Œæœ€ç»ˆå¯¼è‡´ç«¯ä¸Šçš„æ–‡æ¡ˆä¸å±•ç¤ºåŠå±•ç¤ºé”™è¯¯é—®é¢˜ã€‚</p>
<p>2.æ ‡å‡†åŒ–æµç¨‹ç¼ºå¤±ï¼šåœ¨ç ”å‘é˜¶æ®µï¼Œæ–°å¢å¤šè¯­è¨€æ–‡æ¡ˆçš„æµç¨‹ç¼ºå¤±ï¼Œå¤§éƒ¨åˆ†æ¨¡å¼æ˜¯ä¸šåŠ¡æ–¹ã€å†…å®¹å›¢é˜Ÿã€å¼€å‘åŒå­¦é€šè¿‡ç¿»è¯‘å¹³å°æ˜¯å¼±ç®¡æ§ã€‚éœ€è¦PRDè¯­è¨€ç±»keyæ ‡å‡†åŒ–-&gt;ç¿»è¯‘å¹³å°å½•å…¥-&gt;ç ”å‘æµç¨‹æµç¨‹é—¨ç¦æ£€æµ‹+ç«¯ä¸Šæµ‹è¯•-&gt;Keyå‘å¸ƒä¸Šçº¿ç®¡ç†ã€‚</p>
<p>3.æµ·å¤–æµ‹è¯•ä»¿çœŸåº¦ä½ï¼šå…¨çƒåŒ–ç”¨æˆ·éå¸ƒå…¨çƒå„åœ°ï¼Œè´¨é‡åŒå­¦æƒ³è¦çœŸå®æ¨¡æ‹Ÿä¸åŒåœ°åŒºçš„ç”¨æˆ·çš„çœŸå®ä½“éªŒæŒ‘å·¨å¤§ï¼Œæµ·å¤–ç”¨æˆ·æ‰‹æœºé€‚é…çš„æŒ‘æˆ˜ä¹Ÿå°†è¿œè¿œå¤§äºå›½å†…ã€‚ä¸”è¯­è¨€ç±»ç‰¹æœ‰çš„æ¼ç¿»\é”™ç¿»\æ–‡æ¡ˆæˆªæ–­é—®é¢˜åœ¨UIå±‚çš„é—®é¢˜çªå‡ºï¼Œè€Œå½“å‰æ‰‹å·¥ç¨‹åº¦é«˜ï¼Œé—®é¢˜å‘ç°èƒ½åŠ›å¼±ã€‚ä¸æ­¤åŒæ—¶å¯ä»¥é¢„è§ï¼Œè‹¥æ‰©å……åˆ°å…¶ä»–è¯­è¨€æ—¶å·¥ä½œé‡ä¼šæˆå€å¢åŠ ã€‚å¦‚ä¸‹æ˜¯å…¨çƒç”¨æˆ·åœ¨å“ç‰Œã€æœºå‹ã€ç³»ç»Ÿå’Œåˆ†è¾¨ç‡ä¸Šçš„å·®å¼‚ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2d93abc88a54ed49b3b10be23522227~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=TFybThY%2BJfuve0TCLtyTbf1R5Oo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h2 data-id="heading-1">äºŒã€é¢ä¸´çš„æŒ‘æˆ˜å´è¿œä¸æ­¢äºæ­¤ã€‚å› ä¸ºæˆ‘ä»¬äº¬ä¸œå•†åŸæ˜¯èˆªæ¯çº§çš„APPï¼Œæ„å‘³ç€</h2>
<h3 data-id="heading-2"><strong>1. äº§å“å½¢æ€å¤šæ ·</strong></h3>
<p>ä¸€èˆ¬æœ‰4ä¸ªç»´åº¦ï¼šåœ°åŒº/å›½å®¶ &amp; è¯­è¨€ &amp; å¸ç§ &amp; æ—¶åŒº</p>
<p><strong>åœ°åŒºå›½å®¶ï¼š</strong> 0-å¤§é™†ã€5-æ¸¯æ¾³ã€7-å°æ¹¾ã€8-ç¾å›½ã€9-æ—¥æœ¬ã€10-æ–°åŠ å¡ã€11-é©¬æ¥è¥¿äºšã€12-æ³°å›½ã€13-éŸ©å›½ã€14-è¶Šå—ã€15-æŸ¬åŸ”å¯¨ã€100-æµ·å¤–</p>
<p><strong>è¯­è¨€ï¼š</strong> ç®€ä½“ä¸­æ–‡=zh_CNã€ç¾å¼è‹±è¯­=en_USã€ç¹ä½“ä¸­æ–‡=zh_HKï¼ˆä»…æ¸¯æ¾³å°æ¹¾ï¼‰</p>
<p><strong>å¸ç§ï¼š</strong></p>

















































































































<table><thead><tr><th><strong>ç”¨æˆ·è®¾ç½®å¸ç§</strong></th><th><strong>è´§å¸ç¬¦å·</strong></th><th><strong>å±•ç¤ºç±»å‹</strong></th><th><strong>é‡‘é¢è¡¨è¾¾ç¤ºä¾‹ï¼ˆ10å…ƒï¼‰</strong></th></tr></thead><tbody><tr><td>HKD</td><td>HK$</td><td>B</td><td>HK$10.99</td></tr><tr><td>TWD</td><td>NT$</td><td>B</td><td>NT$10.99</td></tr><tr><td>USD</td><td>$</td><td>B</td><td>$10.99</td></tr><tr><td>JPY</td><td>JPÂ¥</td><td>B</td><td>JPÂ¥10</td></tr><tr><td>SGD</td><td>S$</td><td>B</td><td>S$10.99</td></tr><tr><td>MYR</td><td>RM</td><td>B</td><td>RM10.99</td></tr><tr><td>THB</td><td>à¸¿</td><td>B</td><td>à¸¿10.99</td></tr><tr><td>KRW</td><td>â‚©</td><td>B</td><td>â‚©10</td></tr><tr><td>VND</td><td>â‚«</td><td>B</td><td>â‚«10</td></tr><tr><td>KHR</td><td>áŸ›</td><td>B</td><td>áŸ›10.99</td></tr><tr><td>AUD</td><td>AU$</td><td>B</td><td>AU$10.99</td></tr><tr><td>AED</td><td>Ø¯.Ø¥</td><td>A</td><td>Ø¯.Ø¥10.99</td></tr><tr><td>EUR</td><td><strong>â‚¬</strong></td><td>B</td><td>â‚¬10.99</td></tr><tr><td>GBP</td><td><strong>Â£</strong></td><td>B</td><td>Â£10.99</td></tr><tr><td>CAD</td><td>CA$</td><td>B</td><td>CA$10.99</td></tr><tr><td>NZD</td><td>NZD$</td><td>B</td><td>NZD$10.99</td></tr><tr><td>MXN</td><td>Mex$</td><td>B</td><td>Mex$10.99</td></tr></tbody></table>
<p>ï»¿</p>
<p><strong>æ—¶åŒº</strong>ï¼š</p>
<p>1.è‹¥ç”¨æˆ·è®¾ç½®è¯­è¨€æ˜¯è‹±æ–‡ï¼Œåˆ™è½¬æ¢æ—¶åŒºåç”¨è‹±è¯­æ—¶é—´è¡¨è¾¾æ ¼å¼ï¼šæ—¥æœˆå¹´ æ—¶åˆ†ç§’ã€‚å¦‚ï¼šå¹´æœˆæ—¥ æ—¶åˆ†ç§’ï¼š2025-06-07 23:59:59ï¼Œè½¬æ¢æˆè‹±æ–‡ï¼š07 Jun 2025 23:59:59(UTC+8)</p>
<p>2.è‹¥ç”¨æˆ·è®¾ç½®è¯­è¨€æ˜¯ä¸­æ–‡&amp;ç¹ä½“ï¼Œåˆ™è½¬æ¢æ—¶åŒºåæ—¶é—´è¡¨è¾¾æ ¼å¼ï¼šå¹´æœˆæ—¥ï¼Œæ—¶åˆ†ç§’ã€‚</p>
<p>3.è¿”å›ç›®æ ‡åœ°åŒºçš„UTCæ—¶åŒºå€¼ï¼ˆTï¼‰ï¼Œæ—¶åŒºç”±å„æ¨¡å—è‡ªå·±åˆ¤æ–­æ˜¯å¦è¦å±•ç¤ºã€‚</p>
<h3 data-id="heading-3">2. æŠ€æœ¯æ ˆå¤šï¼ŒæŠ€æœ¯æ¶æ„å¤æ‚</h3>
<h4 data-id="heading-4">2.1 è¯­è¨€ç±»-å®¢æˆ·ç«¯</h4>
<p><strong>- åœºæ™¯1ï¼š</strong> ç«¯é¡µé¢å¯ä»å¤šè¯­è¨€SDKè·å–â€œå›½å®¶/åŒºåŸŸâ€ï¼Œâ€œè¯­è¨€â€ï¼Œâ€œæ¨¡å¼â€å‚æ•°ï¼Œå¤„ç†è‡ªå®šä¹‰çš„ä¸šåŠ¡é€»è¾‘ï¼›<strong>ç½‘ç»œè¯·æ±‚ä½¿ç”¨â€œäº¬ä¸œé›¶å”®åŸºç¡€ç½‘è·¯åº“â€åŠ è½½ç«¯é¡µé¢ã€‚åŸºç¡€åº“è´Ÿè´£ç»Ÿä¸€ä¸Šä¼ â€œå›½å®¶/åŒºåŸŸâ€ï¼Œâ€œè¯­è¨€â€ï¼Œâ€œæ¨¡å¼â€å‚æ•°ï¼Œç«¯æ— é¡»ç‰¹æ®Šå¤„ç†ã€‚</strong></p>
<p><strong>- åœºæ™¯2ï¼š</strong> ç«¯é¡µé¢å¯ä»å¤šè¯­è¨€SDKè·å–â€œå›½å®¶/åŒºåŸŸâ€ï¼Œâ€œè¯­è¨€â€ï¼Œâ€œæ¨¡å¼â€å‚æ•°ï¼Œå¤„ç†è‡ªå®šä¹‰çš„ä¸šåŠ¡é€»è¾‘ï¼›<strong>ç½‘ç»œè¯·æ±‚ä¸ä½¿ç”¨â€œJDé›¶å”®åŸºç¡€ç½‘è·¯åº“â€ï¼Œç«¯éœ€è¦è‡ªå·±å‚ç…§å‚æ•°è§„åˆ™ï¼Œä¸Šä¼ â€œå›½å®¶/åŒºåŸŸâ€ï¼Œâ€œè¯­è¨€â€ï¼Œâ€œæ¨¡å¼â€å‚æ•°ã€‚</strong></p>
<h4 data-id="heading-5">2.2 è¯­è¨€ç±»-åç«¯</h4>
<p><strong>ä¼ é€’æ–¹å¼</strong>ï¼šå®¢æˆ·ç«¯-&gt;ç½‘ç»œåº“/éç½‘ç»œåº“-&gt;colorç½‘å…³/écolorç½‘å…³-&gt;SOA-&gt;åå°æœåŠ¡ï¼ˆJSFéšå¼ä¼ å‚ï¼‰ã€‚</p>
<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼šæœåŠ¡ç«¯ä»å…¨å±€ä¸Šä¸‹æ–‡SDKä¸­è¯»å–ï¼Œä¸å…è®¸ç¯¡æ”¹ã€‚<strong>SOAåŠåå°æœåŠ¡éœ€è¦æ¥å…¥dongbootå†…æ ¸+donglog+dongcontext+dongthread</strong></p>
<h4 data-id="heading-6">2.3 æ±‡ç‡ç±»-è®¾è®¡</h4>
<p>æ¢ç®—åŸåˆ™ï¼šSOAè°ƒç”¨ç§‘æŠ€æ±‡ç‡æ¥å£è·å–æ±‡ç‡ï¼Œä¼ ç»™ä»·æ ¼æºï¼ˆåˆ°æ‰‹ä»·/åŸä»·å›¢é˜Ÿ/é¢„å”®ä»·ï¼‰è¿›è¡Œå¤–å¸ä»·æ ¼è®¡ç®—ï¼›è‹¥å±•ç¤ºä»·æ ¼ç”±ä¸­å°è®¡ç®—ï¼Œä¾‹å¦‚è´­ç‰©è½¦å‹¾é€‰åä»·æ ¼å’Œç»“ç®—é¡µæ”¯ä»˜ä»·æ ¼ï¼Œåˆ™ç”±ä¸­å°è¿›è¡Œå¤–å¸ä»·æ ¼è®¡ç®—ã€‚æ ¸å¿ƒé¡µé¢å¤–å¸é‡‘é¢å±•ç¤ºç¤ºä¾‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ae757805cb84f25bc6a108fba31857a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=DU8DgGipt7F4bFCZ5QqpC2ne9iM%3D" alt="" loading="lazy"/></p>
<p>ï»¿</p>
<h4 data-id="heading-7">2.4 æ—¶åŒºç±»-è®¾è®¡</h4>
<ol>
<li>
<p>å½“ç«¯SOAä¾§ä¾èµ–çš„ä¸Šæ¸¸è¿”å›çš„Stringç±»å‹çš„æ–‡æ¡ˆé‡Œé¢å¦‚æœåŒ…å«æ—¥æœŸæˆ–æ—¶é—´ï¼Œç”±ä¸­åç«¯ä¸Šæ¸¸è¿›è¡Œæ—¶åŒºè½¬æ¢ã€‚</p>
</li>
<li>
<p>å½“ç«¯SOAä¾§ä¾èµ–çš„ä¸Šæ¸¸è¿”å›äº†æ—¶é—´æˆ³/Dateæ ¼å¼çš„æ—¥æœŸæˆ–æ—¶é—´ï¼Œç”±ç«¯SOAä¾§è¿›è¡Œæ—¶åŒºè½¬æ¢ã€‚</p>
</li>
</ol>
<p>å…¨é“¾è·¯æ¶‰åŠæ¨¡å—ï¼š</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f41ec2038f034a53834728d786a3e9b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=KCIZFgfkUnng9vLCA4prXIZspj0%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h2 data-id="heading-8">ä¸‰ã€å¯¹QAè€Œè¨€ï¼ŒæŒ‘æˆ˜æ˜¯å·¨å¤§çš„ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h4 data-id="heading-9">3.1 æŒ‘æˆ˜ä¸€ï¼šè¦†ç›–çš„é¡µé¢åœºæ™¯å¤šï¼Œè‹±æ–‡ç‰ˆ2.0çš„å›´ç»•20+ä¸ªä¸šåŠ¡ï¼Œæ¶µç›–é›¶å”®&amp;ç§‘æŠ€&amp;ç‰©æµ&amp;å¥åº·å…¨é“¾è·¯ã€‚</h4>
<p>äº¤æ˜“åŸŸï¼šå•†è¯¦ã€ç»“ç®—ã€è´­ç‰©è½¦ã€å‡‘å•ã€æ¢è´­ã€è®¢å•/è®¢è¯¦ã€æ”¶é“¶å°ã€æ”¯ä»˜æˆåŠŸã€ä»·ä¿ã€åº—é“ºã€å”®å</p>
<p>å¯¼è´­&amp;æµé‡ï¼šé¦–é¡µã€æ‹ç…§è´­ã€åˆ†ç±»ã€è¯„ä»·ã€æ¶ˆæ¯ä¸­å¿ƒã€æœç´¢ã€æ¨èã€æˆ‘äº¬åŠæ ¸å¿ƒäºŒä¸‰çº§é¡µã€æƒç›Šä¸­å¿ƒã€plusã€ç­‰çº§ä¼šå‘˜ã€å‘ç¥¨ã€å®¢æœã€‚</p>
<h4 data-id="heading-10">3.2 æŒ‘æˆ˜äºŒï¼šé¡µé¢ &amp; è¯­è¨€ &amp; æ±‡ç‡ &amp; æ—¶åŒºçš„ç¬›å¡å°”ç§¯ï¼Œå°†æå¤§çš„å¢åŠ æµ‹è¯•éªŒè¯å·¥ä½œé‡ã€‚</h4>
<p>é™¤å¤§é™†ç«™ç‚¹å¤–ï¼Œä¸­æ–‡æ¨¡å¼ä¸‹çš„æ—¶åŒº<strong>ä¹Ÿéœ€è¦éªŒè¯ã€‚</strong> æ‰€ä»¥æœ‰æ›´å¤šçš„é¡µé¢è¿›å…¥è¦†ç›–åœºæ™¯ã€‚å¦‚ï¼šå’šå’šå®¢æœã€æ´»åŠ¨æ—¥å†ã€çŸ­ä¿¡ã€å»¶ä¿æœåŠ¡ã€è´¦å•ã€‚</p>
<h4 data-id="heading-11">3.3 æŒ‘æˆ˜ä¸‰ï¼šå³ä½¿æ¯ä¸ªé¡µé¢èƒ½å¦èµ°åˆ°ï¼Œæ¯ä¸ªé¡µé¢çš„æµ‹è¯•æ·±åº¦æ— æ³•ç©·ä¸¾ã€‚</h4>
<p>1.æµé‡&amp;å¯¼è´­ç±»é¡µé¢åƒäººåƒé¢ï¼Œä¾èµ–äºè´¦æˆ·ç»´åº¦çš„ä¸°å¯Œåº¦ã€‚å¦‚ï¼š</p>
<p>2.äº¤æ˜“ç±»é¡µé¢ï¼Œä¾èµ–è¾ƒå¤šå‰ç½®æ¡ä»¶ï¼šå¦‚ï¼š</p>
<p>1.å•†è¯¦ï¼šæ¥¼å±‚å¤šï¼Œéœ€è¦ä¸åŒçš„SKUã€‚</p>
<p>2.ç»“ç®—ï¼šæ¥¼å±‚å¤šï¼Œéœ€è¦ä¸åŒçš„SKUã€‚</p>
<p>3.è´­ç‰©è½¦ï¼šä¾èµ–è´¦æˆ·åŠ è½¦çŠ¶æ€ã€æ¯”å¦‚é¢„å”®&amp;å®šé‡‘çš„æ—¶é—´è¡¨è¾¾</p>
<p>4.å‡‘å•ï¼šå¯èƒ½æ— æ³•é€šè¿‡OpenAPPåè®®è¿›å…¥ã€‚</p>
<p>5.æ”¶é“¶å°ï¼šç›®å‰ä¸æ”¯æŒOpenAPPåè®®è¿›å»ã€‚</p>
<p>6.è®¢å•ï¼šä¾èµ–è´¦æˆ·å†…çš„è®¢å•ã€äºŒçº§å¼¹å±‚ä¸ä¾èµ–äºopenAPPåè®®ã€‚</p>
<p>7.promiseï¼šâ€œä»˜æ¬¾æ—¶é—´â€ä¿æŒå’Œå½“å‰ç”¨æˆ·æ—¶åŒºä¸€è‡´ã€â€œå‘è´§æ—¶é—´â€å’Œâ€œé€è¾¾æ—¶é—´â€ä¿æŒä¸æ”¶è´§åœ°æ—¶åŒºä¸€è‡´ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-12">å››ã€äº¬ä¸œå…¨çƒå”®-æµ‹è¯•æ–¹æ¡ˆ</h2>
<h3 data-id="heading-13">4.1 ç›®æ ‡</h3>
<p>è¿›è¡Œè‡ªåŠ¨åŒ–é—®é¢˜æ£€æµ‹ï¼Œæå‡èµ°æŸ¥æ•ˆç‡ã€‚æä¾›ä¿®å¤å»ºè®®ï¼Œæå‡å…¨çƒå”®æœ¬åœ°åŒ–ä½“éªŒã€‚</p>
<h3 data-id="heading-14">4.2 æ•´ä½“æ€è·¯</h3>
<p>é€šè¿‡æ¥å£ã€é¡µé¢ã€ç”¨æˆ·åŠ¨çº¿ä¸‰å±‚éªŒè¯æ€è·¯è¿›è¡ŒéªŒè¯ã€‚å¹¶é€šè¿‡æ±‡ç‡æ¥å£é™æµï¼ŒéªŒè¯é¡µé¢å…œåº•æƒ…å†µã€‚</p>
<h3 data-id="heading-15">4.3 ç­–ç•¥ä¸€ã€æ¥å£å±‚ã€‘é€šè¿‡æ¢³ç†å…¨é‡ä½¿ç”¨ä»·æ ¼è®¡ç®—çš„æ¥å£ï¼Œè¿›è¡Œå¸ç§è®¾ç½®ï¼Œæ‰¹é‡æµ‹è¯•ã€‚</h3>
<p><strong>é¢å‘ä¸­å°ï¼šJSFæ¥å£è®¾ç½®DongContextï¼ŒéªŒè¯ä¸åŒè¯­è¨€ä¸‹çš„è¿”å›</strong>ã€‚å¦‚ï¼šå°è´¦ ï¼ˆPayResource.queryOrder - æŸ¥è¯¢åº”ä»˜é‡‘é¢ï¼ˆæ”¶é“¶å°ï¼‰ï¼‰ã€åˆ°æ‰‹ä»·ä¸­å°ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fjoyspace.jd.com%2Fpages%2FTav9wHASWJ3ufru6HW0K" target="_blank" title="https://joyspace.jd.com/pages/Tav9wHASWJ3ufru6HW0K" ref="nofollow noopener noreferrer">è®¡ç®—å¤–å¸ä»·æ ¼-ç»“ç®—ç½‘å…³æ¥å£æ–‡æ¡£</a>ï¼‰ ã€ä»·ä¿ƒå¹³å°ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fjoyspace.jd.com%2Fpages%2FYM8L8oc60kI16lZUdZd5" target="_blank" title="https://joyspace.jd.com/pages/YM8L8oc60kI16lZUdZd5" ref="nofollow noopener noreferrer">ä¸»ç«™æ–°å¢å¤–å¸é‡‘é¢è¡¨è¾¾-æ¥å£æ–‡æ¡£</a>ï¼‰ã€é¢„å”®ä»·ä¸­å°ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fjoyspace.jd.com%2Fpages%2FY9ZM1rXUbLXTIEsUHTNA" target="_blank" title="https://joyspace.jd.com/pages/Y9ZM1rXUbLXTIEsUHTNA" ref="nofollow noopener noreferrer">4.2 æ‰¹é‡è·å–å½“å‰è¿›è¡Œä¸­çš„é¢„å”®</a>ï¼‰ã€‚</p>
<p><strong>é¢å‘å‰å°ï¼š</strong> <strong>colorç½‘å…³æ¥å£è®¾ç½®DongContext</strong>ï¼ŒéªŒè¯ä¸åŒè¯­è¨€å°±éœ€è¦å‰å°ç«¯SOAå¯¹æ¥ç§‘æŠ€æ¥å£è·å–æ±‡ç‡ï¼Œå†ä»å¤–å¸ä»·æ ¼jaråŒ…è·å–å¤–å¸é‡‘é¢ï¼Œå¹¶å‰ç«¯è¡¨è¾¾ã€‚æ¥å£æ€§èƒ½è¦æ±‚80msï¼Œå¦‚æœæ€§èƒ½ä¸è¶³éœ€è¦é™çº§ä¸å±•ç¤ºã€‚</p>
<p><strong>æœŸæœ›çš„ç»“æœ</strong>ï¼š</p>
<p>â€¢å¤–å¸é‡‘é¢è®¡ç®—è§„åˆ™ï¼šå¤–å¸é‡‘é¢=æœ¬å¸ X æ±‡ç‡ã€‚</p>
<p>â€¢å¤–å¸é‡‘é¢å°æ•°ç‚¹å¤„ç†ï¼šVNDï¼ˆè¶Šå—ç›¾ï¼‰ã€KRWï¼ˆéŸ©å…ƒï¼‰ã€JPYï¼ˆæ—¥å…ƒï¼‰ä¸‰ä¸ªå¸ç§ï¼Œå¤–å¸é‡‘é¢å››èˆäº”å…¥å–æ•´æ•°ï¼›å…¶ä»–å¸ç§ï¼Œå¤–å¸é‡‘é¢å››èˆäº”å…¥ï¼Œæœ€å¤šä¿ç•™2ä½å°æ•°ï¼Œå°æ•°ç‚¹å0è¦æŠ¹å»ã€‚</p>
<h3 data-id="heading-16">4.3 ç­–ç•¥äºŒã€é¡µé¢çº§æµ‹è¯•ã€‘ä¸€é”®è§¦å‘æ ¸å¿ƒåœºæ™¯ç»„åˆï¼Œå¹¶è‡ªåŠ¨åŒ–ç»“æœæ ¡éªŒã€‚</h3>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baf4cf74d1cf4c45b6fa7de2f918e2b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=MthakQRUh%2FTYWcuah0SlcUGzeAg%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<ol>
<li>æ ¸å¿ƒåœºæ™¯ç»„åˆå®šä¹‰ï¼š</li>
</ol>
<p>ï¼ˆP0ï¼‰æ¸¯æ¾³-ç¹ä½“-æ¸¯å¸-UTC+8</p>
<p>ï¼ˆP0ï¼‰å°æ¹¾-è‹±æ–‡-å°å¸-UTC+8</p>
<p>ï¼ˆP0ï¼‰æ–°åŠ å¡-è‹±æ–‡-æ–°å¸-UTC+8</p>
<p>ï¼ˆP0ï¼‰æ¾³å¤§åˆ©äºš-è‹±æ–‡-AUD-UTC+11</p>
<p>ï¼ˆP0ï¼‰å¤§é™†-è‹±æ–‡-ç¾å…ƒ-UTC+8</p>
<ol start="2">
<li>
<p>è‡ªåŠ¨åŒ–åˆ‡æ¢ã€æˆªå›¾ã€è·³è½¬ã€æ–‡æ¡ˆæ£€æµ‹è¯†åˆ«ã€‚</p>
</li>
<li>
<p>ç»“æœéªŒè¯ï¼Œç¿»è¯‘é”™è¯¯ã€ç¿»è¯‘è´¨é‡ã€‚</p>
</li>
</ol>
<h3 data-id="heading-17">4.3 ç­–ç•¥ä¸‰ï¼šã€å¸¸æ€åŒ–ä¿é²œã€‘é€šè¿‡APPå›å½’ã€å…œåº•æ¼”ç»ƒåŠ¨ä½œé˜²è£‚åŒ–</h3>
<p>1.ä¸€é”®è§¦å‘ï¼šæ‰“é€šæµ‹è¯•å›å½’è®¡åˆ’ï¼Œå¤šä»»åŠ¡æ‰‹åŠ¨ä¸€é”®å‡ºå‘/å®šæ—¶è§¦å‘/æ¥å£è§¦å‘ï¼Œè¾“å‡ºæŠ¥å‘Šéœ€è¦å¯¹ä»»åŠ¡æ•´ä½“é€šè¿‡ç‡è®¡ç®—ã€‚å†…å®¹åŒ…æ‹¬ï¼šéå†çš„é¡µé¢ï¼Œæ¯ä¸ªå­ä»»åŠ¡ï¼ˆå½“æˆä¸€æ¡ç”¨ä¾‹ï¼‰é™¤äº†å±•ç¤ºå®Œæˆçš„çŠ¶æ€ï¼Œè¿˜éœ€è¦å±•ç¤ºé€šè¿‡ç‡ï¼Œé”™è¯¯çš„ä¸ªæ•°ï¼Œé€šè¿‡çš„ä¸ªæ•°ç­‰ã€‚</p>
<p>2.è®¾å¤‡é€‰æ‹©ï¼šå®ç°åŸºäºç³»ç»Ÿã€æœºå‹ã€åˆ†è¾¨ç‡ã€å›½å†…å¤–å“ç‰Œç­‰ç»´åº¦ç­›é€‰æœºå‹ã€‚</p>
<p>3.å‘ç‰ˆæŠ¥å‘Šï¼šâ‘ æŠ¥å‘Šç±»å¢åŠ å° iè§£é‡Šï¼šé€šè¿‡/å¿½ç•¥çš„æ ‡å‡†ï¼Œä¾‹å¦‚æ˜ç¡®å‘ŠçŸ¥é™¤äº†äººå/å›¾ç‰‡ï¼Œå…¶ä½™å†…å®¹å‡éœ€è¿›è¡Œç¿»è¯‘ï¼Œä»¥åŠç›¸å…³ç±»åˆ«é—®é¢˜çš„ç ”å‘æ¥å£äººã€‚</p>
<h3 data-id="heading-18">4.4 ç­–ç•¥å››ï¼šã€æ™ºèƒ½ä½“Agentã€‘<strong>æ¢ç´¢æ™ºèƒ½ä½“æ–¹æ¡ˆï¼Œè¿›è¡Œç¿»è¯‘è´¨é‡æ£€æµ‹</strong></h3>
<p>åŸºäºèµ›åšå¹³å°å¯¹å„é¡µé¢çš„è¯†åˆ«ç»“æœï¼Œå°†æ¥å£ä¸­ç¿»è¯‘åçš„å†…å®¹æå–å‡ºæ¥å¹¶è¾“é€ç»™æ™ºèƒ½ä½“ï¼Œç”±æ™ºèƒ½ä½“æ¥<strong>æ£€æµ‹</strong>å¤šè¯­è¨€<strong>ç¿»è¯‘çš„å‡†ç¡®æ€§</strong>ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-19">äº”ã€åšåˆ°ä»€ä¹ˆç¨‹åº¦</h2>
<h3 data-id="heading-20">5.1 å·¥ç¨‹ä¸Šçš„ææ•ˆä»·å€¼ï¼š</h3>
<p>â€¢æ‰§è¡Œä¸Šï¼š3240mins-&gt;30mins</p>
<p>â€¢æ£€æµ‹ä¸Šï¼š324mins-&gt;32.4mins</p>
<p>è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>




















<table><thead><tr><th>ï»¿</th><th>Before</th><th>After</th></tr></thead><tbody><tr><td>UIå±‚</td><td>æ‰§è¡Œï¼š36ä¸ªpage âœ–ï¸ 9ï¼ˆç«™ç‚¹+è¯­è¨€+å¸ç§ï¼‰ âœ–ï¸ 5 mins âœ–ï¸ 2ç«¯ = 3240mins æ£€æµ‹ï¼š648é¡µé¢äººå·¥check * 0.5 mins = 324mins</td><td>æ‰§è¡Œä¸Šï¼šå­ç”¨ä¾‹é›†ç»´åº¦ï¼š 1æ¬¡æ‰§è¡Œï¼ˆ36ä¸ªpageå¹¶è¡Œï¼‰ âœ–ï¸ ï¼ˆ9ä¸ªåœºæ™¯å¹¶è¡Œï¼‰ âœ–ï¸ 30minsï¼ˆ åŒç«¯å¹¶è¡Œï¼‰= 30mins æ£€æµ‹ç»´åº¦ï¼šç›®æ ‡90%çš„checkå¯ä»¥é€šè¿‡æ£€æµ‹è„šæœ¬æå®šã€‚324 âœ–ï¸ï¼ˆ1-90%ï¼‰= 32.4minsã€‚</td></tr><tr><td>APIå±‚</td><td>æ¶‰åŠcolorç½‘å…³ï¼ˆ4.8ä¸‡æ¥å£ï¼‰å’Œécolorç½‘å…³æ¥å£ï¼Œä»¥åŠHSFæ¥å£</td><td>å•æ¥å£è°ƒè¯•åŠå¤šæ¥å£å›å½’è‡ªåŠ¨åŒ–éªŒè¯ï¼Œå¯ä»¥ææ•ˆçº¦70%ä»¥ä¸Š</td></tr></tbody></table>
<p><strong>ç»“æœå±•ç¤º1ï¼šèšåˆé¡µå¯¹æ¯”10ç§åœºæ™¯</strong></p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1547ef18c7b4c099c57eb0ee8e5cbba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=PrHXer1fOhvgaCuJn%2BSunL61JVY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ææ•ˆ10å€ã€‚è®¡ç®—å…¬å¼ï¼š10ï¼ˆé¡µé¢+è¯­è¨€+æ¯”é‡ï¼‰* 3ç«¯çš„æƒ…å†µä¸‹ï¼š</p>
<p>â€¢äººå·¥ï¼š10<em>3</em>5ï¼ˆåˆ†é’Ÿï¼‰=150min</p>
<p>â€¢è‡ªåŠ¨ï¼š15åˆ†é’Ÿ</p>
<p><strong>ç»“æœå±•ç¤º2ï¼šè‡ªåŠ¨æ£€æµ‹</strong></p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f91ddaefa6546ae8559ab1dd1873ad0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=Jt3E1CSbVdJE%2Fxly7dpECPRwq44%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ææ•ˆ100%ã€‚è®¡ç®—å…¬å¼â‰ˆé€šè¿‡çš„é—®é¢˜æ•°åœ¨æ€»é—®é¢˜æ•°ä¸­çš„æ¯”ä¾‹ï¼Œæ„å‘³ç€æ˜¯è‡ªåŠ¨æ£€æµ‹ã€‚</p>
<p>å…·ä½“æµ‹è¯•åŒ…æ‹¬è§ï¼šã€15.3.20ã€‘- å¤šè¯­è¨€è‡ªåŠ¨åŒ–æµ‹è¯•æŠ¥å‘Šã€‚ ï¼ˆæ¶‰åŠåˆ°å†…éƒ¨ç½‘ç«™ï¼Œè¯·è”ç³»ä½œè€…è¿›è¡ŒæŠ¥å‘Šé“¾æ¥è·å–ï¼‰</p>
<p>ï»¿</p>
<h3 data-id="heading-21">5.2 å¤§æ¨¡å‹ä¸Šçš„å®è·µä»·å€¼ï¼š</h3>

















<table><thead><tr><th>ç¿»è¯‘çš„ç²¾å‡†åº¦ä¸å¤Ÿï¼šitem(s)</th><th>ç¿»è¯‘æˆªæ–­</th><th>ç¿»è¯‘ä¸å‡†ç¡® scrape æœ¬ä¹‰ â€œåˆ®æ“¦â€ï¼Œå¼•ç”³ä¸ºã€ŒæŠ€æœ¯çˆ¬è™«æŠ“å–ã€ï¼Œéšå« â€œéæ­£å¸¸æ‰‹æ®µè·å–â€â€œæ‰¹é‡çˆ¬å–â€ çš„è´Ÿé¢æ„å‘³ï¼Œåº”æ”¹ä¸ºcollection</th><th>ä¸­æ–‡æœªç¿»è¯‘</th></tr></thead><tbody><tr><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35955b1b9ea04ef4b0f4d4b9540afa73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=35W4oO576AEKTjBCwVmzvwp88nI%3D" alt="" loading="lazy"/>ï»¿</td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60dee5fd33a34de48ee9ca95dcaf123a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=AkEfL0v5lF5g4nYpDGuaROAPrHU%3D" alt="" loading="lazy"/>ï»¿</td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00d9886668414a988767ca8127e5f356~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=ma8zyPVLwBCSSXxdWHpbt3RqY7s%3D" alt="" loading="lazy"/>ï»¿</td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47248be556004d36827a228538667920~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=U40IZS4gIOvaAoMWNlZqtXeYHoU%3D" alt="" loading="lazy"/>ï»¿</td></tr></tbody></table>
<p>â€¢15.2.80å¤šè¯­è¨€ç¿»è¯‘è´¨é‡æ£€æµ‹ï¼Œå‘ç°13ä¸ªç¿»è¯‘ç±»é—®é¢˜ã€‚è§<a href="https://link.juejin.cn?target=https%3A%2F%2Fjoyspace.jd.com%2Fpages%2FSo07Tw9myszm8oGUyJFI" target="_blank" title="https://joyspace.jd.com/pages/So07Tw9myszm8oGUyJFI" ref="nofollow noopener noreferrer">15.2.80å¤šè¯­è¨€ç¿»è¯‘è´¨é‡æ£€æµ‹æŠ¥å‘Š</a>ï»¿</p>
<p>â€¢æ™ºèƒ½ä½“ç»è¿‡3è½®ä¼˜åŒ–ï¼Œé‡‡çº³ç‡11%æå‡è‡³85.71%ã€‚</p>
<h3 data-id="heading-22">5.3 é›¶å”®ç ”å‘æµç¨‹çš„å¤šè¯­è¨€å‡çº§ä»·å€¼</h3>









































<table><thead><tr><th><strong>åœºæ™¯/åŠŸèƒ½</strong></th><th><strong>è¯¦ç»†æè¿°</strong></th><th><strong>åŸå‹</strong></th><th/></tr></thead><tbody><tr><td><strong>åˆ›å»ºè®¾è®¡</strong></td><td>åˆ›å»ºè®¾è®¡æ—¶ç»™å‡ºæé†’</td><td>Â·é€‰æ‹©è¿­ä»£è®¾è®¡ï¼Œé€‰æ‹©éœ€æ±‚åï¼Œè¯†åˆ«éœ€æ±‚çš„å¤šè¯­è¨€å­—æ®µ Â·è‹¥æ‰“æ ‡ä¸ºæ˜¯ï¼Œåˆ™ç»™å‡ºé»„è‰²åŒºåŸŸæ–‡æ¡ˆæç¤ºï¼š Â·æ‰€é€‰éœ€æ±‚æ¶‰åŠå¤šè¯­è¨€ï¼Œè¯·åœ¨è®¾è®¡ç”¨ä¾‹è¿‡ç¨‹ä¸­é‡ç‚¹å…³æ³¨ Â·ä¸æ¶‰åŠè”è°ƒè®¾è®¡</td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/147ae836b19645898e8df035ff7de010~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=EdvAaJqlxYPq6u%2FKx5Wn6xP2Zhc%3D" alt="" loading="lazy"/>ï»¿</td></tr><tr><td><strong>ç¼–å†™ç”¨ä¾‹</strong></td><td>ç¼–å†™ç”¨ä¾‹æ—¶æ”¯æŒæ‰¹é‡æ‰“æ ‡ç­¾</td><td>Â·ç›®å½•ã€ç”¨ä¾‹æ‰¹é‡æ“ä½œå¢åŠ æ·»åŠ æ ‡ç­¾æ“ä½œï¼› Â·ç‚¹å‡»æ·»åŠ æ ‡ç­¾ï¼Œå¼¹æ¡†å±•ç¤ºæ ‡ç­¾è¾“å…¥çš„å¼¹æ¡†ï¼Œç‚¹å‡»ç¡®å®šåï¼Œè¿½åŠ è‡³æ‰€é€‰ç”¨ä¾‹çš„æ ‡ç­¾å­—æ®µ<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a6e5e34124e408dae94fa08148af79b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=pYkgEMVsB9wL7JpSj4pppVnNkmg%3D" alt="" loading="lazy"/>ï»¿ Â·è”è°ƒè®¾è®¡åŒæ­¥æ”¯æŒ</td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8347487073c4dbdbc77d26edde209b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=6Wc0LE%2BAVh%2FfyFvaEst%2BPvMkPfY%3D" alt="" loading="lazy"/>ï»¿</td></tr><tr><td><strong>ç”¨ä¾‹æ‰“æ ‡</strong></td><td>å•ç”¨ä¾‹è¯¦æƒ…é¡µï¼Œæ”¯æŒç”¨æˆ·æ‰“æ ‡ç­¾</td><td>å¤šè¯­è¨€ç³»ç»Ÿæ ‡ç­¾ç”¨æˆ·ç‚¹å‡»æ·»åŠ é»˜è®¤æ¨èå‡ºæ¥</td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2287f75fc44b4a7491d1c427415b04d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=GFZI5vDEkrLU%2FtwnHzIGr7nkvPE%3D" alt="" loading="lazy"/>ï»¿</td></tr><tr><td><strong>ç”¨ä¾‹è¯„å®¡</strong></td><td>æ—¶ç»™å‡ºæç¤ºæé†’</td><td>ç‚¹å‡»è¯„å®¡å®Œæˆæ—¶ï¼Œåˆ¤æ–­ä¸‹éœ€æ±‚æ˜¯å¦æœ‰å¯¹åº”æ ‡è®°ï¼Œè‹¥æœ‰æ ‡è®°ï¼Œåˆ™å¢åŠ ä¸€ä¸ªæ ¹æ®æ ‡ç­¾ç»Ÿè®¡å¤šè¯­è¨€ç”¨ä¾‹çš„åŒºåŸŸï¼Œè‹¥ç”¨ä¾‹æ•°ä¸º0ï¼Œåˆ™0çº¢è‰²é«˜äº®æ˜¾ç¤ºï¼Œå¹¶å±•ç¤ºå»ºè®®è¡¥å……æ–‡æ¡ˆ ä¸æ¶‰åŠè”è°ƒè®¾è®¡</td><td><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3dbac8688df4855b7e326fdebafe425~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=fvjV0sWeUiw5lk8Lo1UWBGQP%2FLY%3D" alt="" loading="lazy"/>ï»¿</td></tr><tr><td><strong>å‘ç‰ˆå›å½’</strong></td><td>ä¸€é”®è§¦å‘è‡ªåŠ¨åŒ–å·¡æ£€</td><td>Â·é¡µé¢ x è¯­è¨€ x æ±‡ç‡ x æ—¶åŒºçš„çš„æµ‹è¯•ç»„åˆåœºæ™¯ï¼Œè¿›è¡Œé«˜æ•ˆæ‰§è¡Œå’Œæ‰¹é‡éªŒè¯ã€‚ <a href="https://link.juejin.cn?target=http%3A%2F%2Fcyber.test.jd.com%2F%23%2Fautotest%2Fi18nAutomation%25C2%25B7%25E9%2595%25BF%25E6%259C%259F%25E8%25A7%2584%25E5%2588%2592%25EF%25BC%259A%25E4%25B8%2580%25E9%2594%25AE%25E6%258A%25A5Bug%25E3%2580%2581%25E5%258D%2595%25E6%25A8%25A1%25E5%259D%2597%25E5%25AE%259A%25E6%2597%25B6%25E5%25B7%25A1%25E6%25A3%2580%25E3%2580%2581%25E5%25B5%258C%25E5%2585%25A5APP%25E5%258F%2591%25E7%2589%2588%25E5%259B%259E%25E5%25BD%2592%25E5%25B9%25B3%25E5%258F%25B0%25E6%25B5%2581%25E7%25A8%258B%25E3%2580%2581%25E5%25A4%25A7%25E6%25A8%25A1%25E5%259E%258B%25E8%25B4%25A8%25E9%2587%258F%25E7%25BF%25BB%25E8%25AF%2591%25E5%25B5%258C%25E5%2585%25A5%25E5%25B9%25B3%25E5%258F%25B0%25E3%2580%2582" target="_blank" title="http://cyber.test.jd.com/#/autotest/i18nAutomation%C2%B7%E9%95%BF%E6%9C%9F%E8%A7%84%E5%88%92%EF%BC%9A%E4%B8%80%E9%94%AE%E6%8A%A5Bug%E3%80%81%E5%8D%95%E6%A8%A1%E5%9D%97%E5%AE%9A%E6%97%B6%E5%B7%A1%E6%A3%80%E3%80%81%E5%B5%8C%E5%85%A5APP%E5%8F%91%E7%89%88%E5%9B%9E%E5%BD%92%E5%B9%B3%E5%8F%B0%E6%B5%81%E7%A8%8B%E3%80%81%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%B4%A8%E9%87%8F%E7%BF%BB%E8%AF%91%E5%B5%8C%E5%85%A5%E5%B9%B3%E5%8F%B0%E3%80%82" ref="nofollow noopener noreferrer">cyber.test.jd.com/#/autotest/â€¦</a></td><td>ï»¿</td></tr></tbody></table>
<p>ï»¿</p>
<h2 data-id="heading-23">å…­ã€æœªæ¥è§„åˆ’</h2>
<h3 data-id="heading-24">6.1 å¤§è€Œå…¨çš„è´¨é‡ä¿éšœæ•´ä½“æ–¹æ¡ˆ</h3>
<ol>
<li>
<p>ã€å·²å®Œæˆã€‘æ ‡å‡†åŒ–å¤šè¯­è¨€ç ”å‘æµç¨‹ã€‚å¤šè¯­è¨€æ£€æµ‹èƒ½åŠ›è¦†ç›–æ•´ä¸ªè¯­è¨€ç”Ÿäº§è¿‡ç¨‹ã€‚</p>
</li>
<li>
<p>ã€è¿›è¡Œä¸­ã€‘å»ºè®¾å…¨çƒåŒ–æµ‹è¯•ä½“ç³»åŒ–èƒ½åŠ›ã€‚æµ‹è¯•èµ„æºï¼šæ„å»ºæ‰‹æœºå·ã€é“¶è¡Œå¡ã€æ”¯ä»˜è´¦å·ã€æµ‹è¯•è´¦å·ã€äº‘æµ‹çœŸæœºã€ç½‘ç»œä»¿çœŸï¼Œæ„å»ºç ”æµ‹é˜¶æ®µçš„çœŸå®æµ·å¤–ç¯å¢ƒã€‚æ•ˆç‡&amp;ä½“éªŒï¼šé€šè¿‡å¤šç«¯çš„åŠŸèƒ½çš„è‡ªåŠ¨åŒ–ï¼Œæå‡æµ‹è¯•å›å½’é˜¶æ®µçš„å¤šæœºé€‚é…æ•ˆç‡ã€‚é€šè¿‡å¤šç¯å¢ƒçš„appæ€§èƒ½æµ‹è¯•ï¼ˆæ ¸å¿ƒé¡µé¢ã€å›¾ç‰‡ã€è§†é¢‘ï¼‰ï¼Œä¾‹å¦‚ç¾å›½ã€å°åº¦å’Œæ¬§æ´²çš„é¡µé¢ç§’å¼€ç‡ä¼šæœ‰å¾ˆå¤§åŒºåˆ«ï¼Œæå‰å‘ç°ç«¯ä¾§æ€§èƒ½é—®é¢˜ã€‚ä½“éªŒå·¡æ£€ï¼šè”åˆæœ¬åœ°åŒ–å¤–åŒ…ã€æµ·å¤–äº§è®¾å›¢é˜Ÿï¼Œè¿›è¡Œçº¿ä¸Šç”¨æˆ·ä½“éªŒèµ°æŸ¥ï¼ŒçœŸå®æ¨¡æ‹Ÿç”¨æˆ·ç°åœºå‘ç°ä½“éªŒé—®é¢˜ã€‚</p>
</li>
<li>
<p>ã€æœªå¼€å§‹ã€‘<strong>å»ºè®¾å…¨çƒåŒ–å®‰å…¨ç”Ÿäº§ä½“ç³»</strong>ã€‚æ”»é˜²æ¼”ç»ƒï¼šåœ¨å¤šç§Ÿæˆ·å¹¶è¡Œçš„éƒ¨ç½²æ¶æ„ä¸‹ï¼Œè¿›è¡ŒåŸŸåã€æ¥å£çº§åˆ«çš„æ”»é˜²æ¼”ç»ƒï¼Œæå‡ç³»ç»Ÿçš„æµ·å¤–é«˜å¯ç”¨æ€§ã€‚æµ·å¤–å‹æµ‹ï¼šå‹æµ‹å¹³å°èƒ½åŠ›è¿›è¡Œæ‰©å……ï¼Œæ¶µç›–æµ·å¤–ç”¨æˆ·ç‰¹å¾çš„å‹æµ‹æ•°æ®åŠè„šæœ¬ä»¥åŠå¤šæœºæˆ¿æ··å‹ï¼Œæå‡æµ·å¤–æœåŠ¡ç¨³å®šæ€§ã€‚</p>
</li>
</ol>
<p>ç­–ç•¥å¤§å›¾è§ä¸‹ï¼š</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ddb227ca0334a8cb1cd2da0e8c79664~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768889749&amp;x-signature=7aLH6nq8RRnP%2F1Dx5YCiQNgoPis%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h3 data-id="heading-25">6.2 ç¿»è¯‘è´¨é‡æ™ºèƒ½ä½“</h3>
<p>è¯­è¨€åº¦é‡èƒ½åŠ›ï¼šé€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMicrosoftTranslator%2FGEMBA" target="_blank" title="https://github.com/MicrosoftTranslator/GEMBA" ref="nofollow noopener noreferrer">GPT Based MQM</a>ï¼ˆMultidimensional Quality Metricsï¼‰ï¼Œæ„å»ºå›½é™…åŒ–æ°´ä½åˆ†æ•°ï¼ŒåŠ©åŠ›owner&amp;å›¢é˜Ÿçœ‹æ¸…ç¼ºé™·å¯†åº¦æ°´ä½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç ´è§£Androidæ‚¬æµ®çª—é®æŒ¡æ— éšœç¢æœåŠ¡éš¾é¢˜ï¼šæˆ‘åœ¨å¯è§å³å¯è¯´ä¸Šè¸©è¿‡çš„å‘]]></title>    <link>https://juejin.cn/post/7593742881141604361</link>    <guid>https://juejin.cn/post/7593742881141604361</guid>    <pubDate>2026-01-12T01:00:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593742881141604361" data-draft-id="7593177437081813043" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç ´è§£Androidæ‚¬æµ®çª—é®æŒ¡æ— éšœç¢æœåŠ¡éš¾é¢˜ï¼šæˆ‘åœ¨å¯è§å³å¯è¯´ä¸Šè¸©è¿‡çš„å‘"/> <meta itemprop="keywords" content="Android,é¢è¯•,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-12T01:00:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹ç¨‹åå…«å°‘"/> <meta itemprop="url" content="https://juejin.cn/user/184373685534077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç ´è§£Androidæ‚¬æµ®çª—é®æŒ¡æ— éšœç¢æœåŠ¡éš¾é¢˜ï¼šæˆ‘åœ¨å¯è§å³å¯è¯´ä¸Šè¸©è¿‡çš„å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/184373685534077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹ç¨‹åå…«å°‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T01:00:48.000Z" title="Mon Jan 12 2026 01:00:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä¸ºä»€ä¹ˆä½ çš„Androidæ‚¬æµ®çª—"æŒ¡ä½"äº†æ— éšœç¢æœåŠ¡</strong></p>
<p>Android  å¯è§å³å¯è¯´  (è¯­éŸ³æ‚¬æµ®çª—å£åœ¨ï¼Œæ— éšœç¢æœåŠ¡æ‰«æä¸å‡ºç³»ç»Ÿå¸è½½window)</p>
<h2 data-id="heading-0">1.å®Œæ•´éœ€æ±‚ï¼š è¯­éŸ³è¯´ä¸€å¥è¯ï¼šå¸®æˆ‘æŠŠæŠ–éŸ³é‡Œé¢çš„ä»Šå¤©çš„å¥–åŠ±å…¨éƒ¨é¢†å®Œï¼Œçº¢åŒ…é¢†å®Œï¼</h2>
<p>1ï¼‰è¯­éŸ³æ‚¬æµ®çª—äº¤äº’ï¼š</p>
<p>èƒ½è‡ªåŠ¨ç‚¹å‡»æ‚¬æµ®çª—ä¸‹æ–¹çš„æ‰€æœ‰çª—å£ï¼ˆå¦‚æŠ–éŸ³çº¢åŒ…æŒ‰é’®ï¼‰</p>
<p>ç‚¹å‡»æ‚¬æµ®çª—ç©ºç™½åŒºåŸŸ â†’ æ‚¬æµ®çª—æ¶ˆå¤±</p>
<p>æ‚¬æµ®çª—å†… RecyclerView çš„ç‚¹å‡»äº‹ä»¶éœ€å“åº”</p>
<h3 data-id="heading-1">æ•ˆæœå›¾</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bc351be39344c3eb15b650b9fb935ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP56iL5Y2B5YWr5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768784448&amp;x-signature=u9KubdCm8Vxz7igRl2Mv07NunHU%3D" alt="è¯­éŸ³.png" loading="lazy"/></p>
<h3 data-id="heading-2">1.2 å…·ä½“è¯¦ç»†éœ€æ±‚ï¼š</h3>
<p>ç³»ç»Ÿå¼¹çª—æ”¯æŒï¼š</p>
<p>å½“è¯­éŸ³æŒ‡ä»¤ä¸ºâ€œå¸è½½æŠ–éŸ³â€æ—¶ï¼š</p>
<p>å…ˆæ˜¾ç¤ºè¯­éŸ³æ‚¬æµ®çª—</p>
<p>å†è§¦å‘ç³»ç»Ÿå¸è½½å¼¹çª—ï¼ˆcom.android.packageinstallerï¼‰</p>
<p>ç”¨æˆ·å¯é€šè¿‡è¯­éŸ³æ§åˆ¶ç‚¹å‡»â€œç¡®å®šâ€æˆ–â€œå–æ¶ˆâ€</p>
<h2 data-id="heading-3">2.æ ¸å¿ƒé—®é¢˜ï¼šæ— éšœç¢æœåŠ¡æ— æ³•è¯†åˆ«è¢«æ‚¬æµ®çª—å®Œå…¨é®æŒ¡çš„ç³»ç»Ÿå¼¹çª—</h2>
<p>è¯­éŸ³æŠŠç³»ç»Ÿçš„å¸è½½windowå¼¹å‡ºï¼Œ</p>
<p>è¯­éŸ³å¯è§å³å¯è¯´æ‰«æä¸å‡ºå¸è½½windowï¼Œ</p>
<p>å¯¼è‡´æ— æ³•å®ç°ç¡®è®¤æŒ‰é’®çš„å¯è§å³å¯è¯´</p>
<h3 data-id="heading-4">2.2 é—®é¢˜ç°è±¡</h3>
<p>å½“è¯­éŸ³æ‚¬æµ®çª—å®Œå…¨è¦†ç›–ç³»ç»Ÿå¸è½½å¼¹çª—æ—¶ï¼š</p>
<p>AccessibilityService çš„ windows åˆ—è¡¨ä¸­æ‰«æä¸åˆ° com.android.packageinstaller</p>
<p>åªèƒ½æ‰«æåˆ° launcher æˆ– systemui</p>
<p>å¯¼è‡´â€œå¯è§å³å¯è¯´â€åŠŸèƒ½å¤±æ•ˆï¼Œæ— æ³•ç‚¹å‡»â€œç¡®å®š/å–æ¶ˆâ€</p>
<h3 data-id="heading-5">2.3 æ ¹æœ¬åŸå› ï¼ˆAndroid ç³»ç»Ÿæœºåˆ¶é™åˆ¶ï¼‰</h3>
<p>è¡¨æ ¼</p>





















<table><thead><tr><th>åŸå› </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>çª—å£å¯è§æ€§åˆ¤å®š</strong></td><td>Android Accessibility æœåŠ¡<strong>ä¸ä¼šè¿”å›è¢«å®Œå…¨é®æŒ¡ä¸”ä¸å¯äº¤äº’çš„çª—å£</strong>çš„èŠ‚ç‚¹</td></tr><tr><td><strong>å®‰å…¨é™åˆ¶</strong></td><td>å‡ºäºéšç§å’Œå®‰å…¨è€ƒè™‘ï¼Œç³»ç»Ÿç¦æ­¢é€šè¿‡æ— éšœç¢æœåŠ¡è¯»å–è¢«å…¶ä»–åº”ç”¨å®Œå…¨è¦†ç›–çš„ UI å±‚</td></tr><tr><td><strong>å±‚çº§ä¸ç±»å‹ç›¸åŒ</strong></td><td>è¯­éŸ³æ‚¬æµ®çª— (<code>TYPE_SYSTEM</code>, layer=1) ä¸ launcher (<code>TYPE_APPLICATION</code>, layer=0) ä¸åŒï¼›ä½†å¸è½½å¼¹çª—ä¹Ÿæ˜¯Â <code>TYPE_APPLICATION</code>, layer=0ï¼Œä¸ launcher åŒçº§ã€‚å½“æ‚¬æµ®çª—é«˜åº¦ 95% å±å¹•æ—¶ï¼Œå®Œå…¨é®æŒ¡å¸è½½å¼¹çª— â†’ ç³»ç»Ÿè®¤ä¸ºå…¶â€œä¸å¯è§â€</td></tr></tbody></table>
<blockquote>
<p>âœ…Â <strong>éªŒè¯ç»“è®º</strong>ï¼šåªè¦æ‚¬æµ®çª—<strong>æœªå®Œå…¨é®æŒ¡</strong>å¸è½½å¼¹çª—ï¼ˆä¾‹å¦‚é«˜åº¦ â‰¤85%ï¼‰ï¼Œæ— éšœç¢æœåŠ¡å°±èƒ½æ­£å¸¸æ‰«æåˆ°Â <code>packageinstaller</code>ã€‚</p>
</blockquote>
<h2 data-id="heading-6">3.åˆ†æé—®é¢˜</h2>
<h3 data-id="heading-7">3.1 ä¹‹å‰åŒäº‹å†™çš„ä»£ç é€»è¾‘ï¼š</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">layoutParams</span> = new WindowManager.LayoutParams(
    MATCH_PARENT,
    WRAP_CONTENT,
    TYPE_APPLICATION_OVERLAY,
    FLAG_NOT_FOCUSABLE,
    TRANSLUCENT
)<span class="hljs-comment">;</span>
layoutParams.flags |= FLAG_LAYOUT_IN_SCREEN<span class="hljs-comment">;</span>
layoutParams.flags |= FLAG_NOT_TOUCH_MODAL<span class="hljs-comment">;      // âœ… å…è®¸åŒºåŸŸå¤–è§¦æ‘¸é€ä¼ </span>
layoutParams.flags |= FLAG_WATCH_OUTSIDE_TOUCH<span class="hljs-comment">;  // é…åˆå¤–éƒ¨ç‚¹å‡»å…³é—­</span>
</code></pre>
<h3 data-id="heading-8">3.2 æ— éšœç¢æœåŠ¡ä¸­çš„â€œçª—å£æ›¿æ¢â€é€»è¾‘</h3>
<pre><code class="hljs language-ini" lang="ini">if (rootNode?.<span class="hljs-attr">packageName</span> == packageName || rootNode?.childCount == <span class="hljs-number">0</span>) {
    windows.forEach { window -&gt;
        window.root?.takeIf { rn -&gt;
            rn.packageName != packageName &amp;&amp; rn.childCount != 0
        }?.apply {
            <span class="hljs-attr">rootNode</span> = this  // æ›¿æ¢ä¸ºéè‡ªèº«ã€éç©ºçš„çª—å£æ ¹èŠ‚ç‚¹
        }
    }
}
</code></pre>
<p>ç›®çš„ï¼šè·³è¿‡è¯­éŸ³æ‚¬æµ®çª—è‡ªèº«ï¼Œå°è¯•ä½¿ç”¨å…¶ä»–çª—å£ï¼ˆå¦‚å¸è½½å¼¹çª—ï¼‰ä½œä¸ºæ“ä½œç›®æ ‡
å¤±è´¥åŸå› ï¼šå½“å¸è½½å¼¹çª—è¢«å®Œå…¨é®æŒ¡ â†’ windows åˆ—è¡¨ä¸­æ ¹æœ¬ä¸å­˜åœ¨è¯¥çª—å£ â†’ æ›¿æ¢å¤±è´¥</p>
<h3 data-id="heading-9">3.2  æ— éšœç¢æœåŠ¡æ‰«æçš„ç»“æœ</h3>
<h3 data-id="heading-10">3.2.1 å…·ä½“ç»“æœåˆ†3æ­¥éª¤ï¼š</h3>
<h6 data-id="heading-11">1).åœ¨æ¡Œé¢æ‰«æçš„ç»“æœï¼š</h6>
<pre><code class="hljs language-bash" lang="bash">2026-01-06 15:48:48.918 59779-59779 VoiceAcces...ityService com.tencent.voice              E  å¼€å§‹windows-------index: 0, window: AccessibilityWindowInfo[title=å¯¼èˆªæ , displayId=0, <span class="hljs-built_in">id</span>=258, <span class="hljs-built_in">type</span>=TYPE_SYSTEM, layer=3, region=SkRegion((<span class="hljs-number">0</span>,<span class="hljs-number">1824</span>,<span class="hljs-number">864</span>,<span class="hljs-number">1920</span>)), bounds=Rect(0, 1824 - 864, 1920), focused=<span class="hljs-literal">false</span>, active=<span class="hljs-literal">false</span>, pictureInPicture=<span class="hljs-literal">false</span>, hasParent=<span class="hljs-literal">false</span>, isAnchored=<span class="hljs-literal">false</span>, hasChildren=<span class="hljs-literal">false</span>]; com.android.systemui
2026-01-06 15:48:48.919 59779-59779 VoiceAcces...ityService com.tencent.voice              E  å¼€å§‹windows-------index: 1, window: AccessibilityWindowInfo[title=null, displayId=0, <span class="hljs-built_in">id</span>=252, <span class="hljs-built_in">type</span>=TYPE_SYSTEM, layer=2, region=SkRegion((<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">864</span>,<span class="hljs-number">115</span>)), bounds=Rect(0, 0 - 864, 115), focused=<span class="hljs-literal">false</span>, active=<span class="hljs-literal">false</span>, pictureInPicture=<span class="hljs-literal">false</span>, hasParent=<span class="hljs-literal">false</span>, isAnchored=<span class="hljs-literal">false</span>, hasChildren=<span class="hljs-literal">false</span>]; com.android.systemui
2026-01-06 15:48:48.919 59779-59779 VoiceAcces...ityService com.tencent.voice              E  å¼€å§‹windows-------index: 2, window: AccessibilityWindowInfo[title=null, displayId=0, <span class="hljs-built_in">id</span>=265, <span class="hljs-built_in">type</span>=TYPE_SYSTEM, layer=1, region=SkRegion((<span class="hljs-number">0</span>,<span class="hljs-number">192</span>,<span class="hljs-number">864</span>,<span class="hljs-number">1824</span>)), bounds=Rect(0, 192 - 864, 1824), focused=<span class="hljs-literal">true</span>, active=<span class="hljs-literal">true</span>, pictureInPicture=<span class="hljs-literal">false</span>, hasParent=<span class="hljs-literal">false</span>, isAnchored=<span class="hljs-literal">false</span>, hasChildren=<span class="hljs-literal">false</span>]; com.tencent.voice
2026-01-06 15:48:48.920 59779-59779 VoiceAcces...ityService com.tencent.voice              E  å¼€å§‹windows-------index: 3, window: AccessibilityWindowInfo[title=å¤§æ¡Œé¢, displayId=0, <span class="hljs-built_in">id</span>=250, <span class="hljs-built_in">type</span>=TYPE_APPLICATION, layer=0, region=SkRegion((<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">864</span>,<span class="hljs-number">1920</span>)), bounds=Rect(0, 0 - 864, 1920), focused=<span class="hljs-literal">false</span>, active=<span class="hljs-literal">false</span>, pictureInPicture=<span class="hljs-literal">false</span>, hasParent=<span class="hljs-literal">false</span>, isAnchored=<span class="hljs-literal">false</span>, hasChildren=<span class="hljs-literal">false</span>]; com.tencent.launcher
</code></pre>
<p>launcher: type=TYPE_APPLICATION, layer=0</p>
<h6 data-id="heading-12">2). åœ¨æ¡Œé¢ï¼Œç„¶åå¼¹å‡ºå¸è½½æ¡†ï¼š</h6>
<pre><code class="hljs"> com.android.systemui -
com.android.packageinstaller 
</code></pre>
<p>å¸è½½windowï¼štype=TYPE_APPLICATION, layer=0
ä¸ä¼šæ‰«æåˆ°æ¡Œé¢çš„windowï¼Œè¢«å¸è½½å¼¹æ¡†å…¨éƒ¨æŒ¡ä½, å¤„äºåŒä¸€å±‚çº§
å¾—å‡ºå±‚çº§å…³ç³»ï¼šå¸è½½åœ¨æœ€åº•å±‚ï¼Œlayer=0</p>
<h6 data-id="heading-13">3).åœ¨æ¡Œé¢ï¼Œè¯­éŸ³æ‚¬æµ®çª—å‡ºç°ä¹‹åï¼Œç„¶åå¼¹å‡ºå¸è½½æ¡†ï¼š</h6>
<p>ä¸æ­£å¸¸æ˜¯è¿™ä¸ªï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">2025-12-29 13:58:34.996  1900-1900  VoiceAcces...ityService com.tencent.voice              D  windows size:</span> <span class="hljs-number">4</span> 
                                                                                                     <span class="hljs-attr">windowArrStr:</span> <span class="hljs-string">com.android.systemui</span> <span class="hljs-bullet">-</span> <span class="hljs-string">visible:true</span> <span class="hljs-bullet">-</span> <span class="hljs-string">active:false</span> 
                                                                                                    <span class="hljs-string">com.android.systemui</span> <span class="hljs-bullet">-</span> <span class="hljs-string">visible:true</span> <span class="hljs-bullet">-</span> <span class="hljs-string">active:false</span> 
                                                                                                    <span class="hljs-string">com.tencent.voice</span> <span class="hljs-bullet">-</span> <span class="hljs-string">visible:true</span> <span class="hljs-bullet">-</span> <span class="hljs-string">active:true</span> 
                                                                                                    <span class="hljs-string">com.tencent.launcher</span> <span class="hljs-bullet">-</span> <span class="hljs-string">visible:true</span> <span class="hljs-bullet">-</span> <span class="hljs-string">active:false</span> 
<span class="hljs-number">2025-12-29 13:58:34.998  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">D</span>  <span class="hljs-string">packageName:com.android.systemui</span>
                                                                                                    <span class="hljs-string">isActive:false</span>
                                                                                                    <span class="hljs-string">isAccessibilityFocused:false</span>
<span class="hljs-number">2025-12-29 13:58:34.999  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">E</span>  <span class="hljs-string">æ›¿æ¢èŠ‚ç‚¹å‰.......com.tencent.voice</span>
<span class="hljs-number">2025-12-29 13:58:34.999  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">E</span>  <span class="hljs-string">æ›¿æ¢èŠ‚ç‚¹å.......com.android.systemui</span>
<span class="hljs-number">2025-12-29 13:58:35.000  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">D</span>  <span class="hljs-string">packageName:com.android.systemui</span>
                                                                                                    <span class="hljs-string">isActive:false</span>
                                                                                                    <span class="hljs-string">isAccessibilityFocused:false</span>
<span class="hljs-number">2025-12-29 13:58:35.000  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">E</span>  <span class="hljs-string">æ›¿æ¢èŠ‚ç‚¹å‰.......com.android.systemui</span>
<span class="hljs-number">2025-12-29 13:58:35.000  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">E</span>  <span class="hljs-string">æ›¿æ¢èŠ‚ç‚¹å.......com.android.systemui</span>
<span class="hljs-number">2025-12-29 13:58:35.001  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">D</span>  <span class="hljs-string">packageName:com.tencent.voice</span>
                                                                                                    <span class="hljs-string">isActive:true</span>
                                                                                                    <span class="hljs-string">isAccessibilityFocused:false</span>
<span class="hljs-number">2025-12-29 13:58:35.003  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">D</span>  <span class="hljs-string">packageName:com.tencent.launcher</span>
                                                                                                    <span class="hljs-string">isActive:false</span>
                                                                                                    <span class="hljs-string">isAccessibilityFocused:false</span>
<span class="hljs-number">2025-12-29 13:58:35.003  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">E</span>  <span class="hljs-string">æ›¿æ¢èŠ‚ç‚¹å‰.......com.android.systemui</span>
<span class="hljs-number">2025-12-29 13:58:35.003  </span><span class="hljs-number">1900</span><span class="hljs-number">-1900</span>  <span class="hljs-string">VoiceAcces...ityService</span> <span class="hljs-string">com.tencent.voice</span>              <span class="hljs-string">E</span>  <span class="hljs-string">æ›¿æ¢èŠ‚ç‚¹å.......com.tencent.launcher</span>

</code></pre>
<p>åŸå› åº”è¯¥æ˜¯ä¼˜å…ˆçº§ï¼šä»–ä»¬typeç›¸åŒ
è¯­éŸ³:        type=TYPE_SYSTEM, layer=1,
launcher: type=TYPE_APPLICATION, layer=0</p>
<h6 data-id="heading-14">æœŸæœ›æ­£å¸¸æ˜¯è¿™ä¸ªç»“æœï¼š</h6>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.989</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              D  windows size: <span class="hljs-number">4</span> 
                                                                                                     windowArrStr: com.android.systemui - visible:<span class="hljs-literal">true</span> - active:<span class="hljs-literal">false</span> 
                                                                                                    com.android.systemui - visible:<span class="hljs-literal">true</span> - active:<span class="hljs-literal">false</span> 
                                                                                                    com.tencent.voice - visible:<span class="hljs-literal">true</span> - active:<span class="hljs-literal">true</span> 
                                                                                                    com.android.packageinstaller - visible:<span class="hljs-literal">true</span> - active:<span class="hljs-literal">false</span> 
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.990</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              D  packageName:com.android.systemui
                                                                                                    isActive:<span class="hljs-literal">false</span>
                                                                                                    isAccessibilityFocused:<span class="hljs-literal">false</span>
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.990</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              E  æ›¿æ¢èŠ‚ç‚¹å‰.......com.tencent.voice
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.990</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              E  æ›¿æ¢èŠ‚ç‚¹å.......com.android.systemui
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.991</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              D  packageName:com.android.systemui
                                                                                                    isActive:<span class="hljs-literal">false</span>
                                                                                                    isAccessibilityFocused:<span class="hljs-literal">false</span>
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.992</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              E  æ›¿æ¢èŠ‚ç‚¹å‰.......com.android.systemui
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.992</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              E  æ›¿æ¢èŠ‚ç‚¹å.......com.android.systemui
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.992</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              D  packageName:com.tencent.voice
                                                                                                    isActive:<span class="hljs-literal">true</span>
                                                                                                    isAccessibilityFocused:<span class="hljs-literal">false</span>
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.994</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              D  packageName:com.android.packageinstaller
                                                                                                    isActive:<span class="hljs-literal">false</span>
                                                                                                    isAccessibilityFocused:<span class="hljs-literal">false</span>
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.995</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              E  æ›¿æ¢èŠ‚ç‚¹å‰.......com.android.systemui
<span class="hljs-number">2025</span><span class="hljs-number">-12</span><span class="hljs-number">-29</span> <span class="hljs-number">13</span>:<span class="hljs-number">55</span>:<span class="hljs-number">54.995</span>   <span class="hljs-number">565</span><span class="hljs-number">-565</span>   VoiceAcces...ityService com.tencent.voice              E  æ›¿æ¢èŠ‚ç‚¹å.......com.android.packageinstaller
</code></pre>
<h2 data-id="heading-15">4. è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-16">4.1 æ¨¡ä»¿æ‰‹æœºå‚å•†æ€ä¹ˆå¤„ç†çš„ï¼ çœ‹äº†ä¸‹VIVOæ‰‹æœºï¼Œ</h3>
<p>å…ˆå¸è½½ï¼Œ
å‘ç°è¯­éŸ³æ‚¬æµ®åï¼Œä¸èƒ½å†è¿›è¡Œä¸‹ä¸€æ­¥çš„å¯è§å³å¯è¯´ï¼ å‘½ä¸­çš„æ˜¯å¤§æ¨¡å‹ï¼Œå¸è½½æŒ‰é’®ä¸€æ ·æ— æ³•å‘½ä¸­ï¼Œå¦‚ä¸‹å›¾ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bcb80d8086a4033aa5abfc2f95a8a05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP56iL5Y2B5YWr5bCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768784448&amp;x-signature=wXxRpbDoXmVCVwGZorDbsQl4ZbE%3D" alt="1000023139_å…è´¹è§†é¢‘è½¬GIF_20260109_170019.gif" loading="lazy"/></p>
<p>å¦‚æœæ‚¬æµ®çª—å®Œå…¨æŒ¡ä½äº†ä¸‹é¢çš„windowï¼Œä¸‹é¢çš„windowå°±ä¸ä¼šè¢«ç³»ç»Ÿæ‰«æåˆ°ï¼
å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘çš„æ‚¬æµ®çª—å®Œå…¨æŒ¡ä½äº†.com.android.packageinstallerï¼Œwindowé‡Œé¢å°±æ‰«æä¸å‡ºï¼Œæ‰«æå‡ºäº†com.tentent.launcher, å¦‚æœæˆ‘çš„æ‚¬æµ®çª—æ²¡ç”¨å®Œå…¨æŒ¡ä½ï¼Œå°±å¯ä»¥windowé‡Œé¢å°±æ‰«æå‡ºäº†.com.android.packageinstaller</p>
<h3 data-id="heading-17">ğŸ“Œ æ€»ç»“</h3>

















<table><thead><tr><th>é—®é¢˜åŸå› </th><th>ç³»ç»Ÿå°†å®Œå…¨è¢«æ‚¬æµ®çª—é®æŒ¡çš„çª—å£è§†ä¸ºâ€œä¸å¯è§â€ï¼Œæ•… AccessibilityService æ— æ³•è·å–å…¶æ ¹èŠ‚ç‚¹</th></tr></thead><tbody><tr><td>æ ¹æœ¬é™åˆ¶</td><td>Android å®‰å…¨æœºåˆ¶ï¼šä¸èƒ½é€šè¿‡ Accessibility è¯»å–è¢«å®Œå…¨é®æŒ¡/ä¸å¯äº¤äº’çš„çª—å£</td></tr><tr><td>æ¨èåšæ³•</td><td>1. é¿å…å®Œå…¨è¦†ç›– 2. è¿‡æ»¤æ‰è‡ªèº«å’Œ SystemUI/Launcher 3. ç»“åˆ UsageStats åšå…œåº•</td></tr></tbody></table>
<p>å½“æ—¶äº§å“çœ‹äº†ç«å“æ²¡ç”¨å®ç°ï¼Œè®©æˆ‘æ”¾æ‰‹ï¼ æˆ‘è§‰å¾—ä¿®æ”¹ç³»ç»Ÿframworkå±‚å¯ä»¥è§£å†³ï¼Œä½†æ˜¯å…¬å¸çš„framworkå±‚å¤ªlowäº†ï¼Œåªæœ‰è‡ªå·±æƒ³åŠæ³•</p>
<h3 data-id="heading-18">4.1 é¿å…å®Œå…¨é®æŒ¡ï¼ˆæ¨èä¸´æ—¶æ–¹æ¡ˆï¼‰</h3>
<p>ä¿®æ”¹æ‚¬æµ®çª—é«˜åº¦ï¼Œç•™å‡ºé¡¶éƒ¨æˆ–åº•éƒ¨ç©ºé—´</p>
<p>å…·ä½“æªæ–½å¦‚ä¸‹ï¼š
ç¬¬ä¸€ç§ä¸´æ—¶æ–¹æ¡ˆï¼šè¯­éŸ³çš„æ‚¬æµ®çª—ä¸å®Œå…¨æŒ¡ä½ç³»ç»Ÿçš„å¼¹æ¡†ï¼Œæ˜¯å¯ä»¥æ‰«æå‡ºæ¥çš„ï¼
ç¿»çœ‹äº†æºç ï¼š æ— éšœç¢æœåŠ¡æ‰«æåŸç†ï¼Œä»ä¸Šå¾€ä¸‹æ‰«æï¼Œå½“åŒçº§layer çš„windowï¼Œä¼šæ ¹æ®ä¼˜å…ˆçº§åˆ¤æ–­ï¼ å‰é¢çš„çª—å£å®Œå…¨æŒ¡ä½ï¼Œä¼šæ‰«æä¸å‡º
<strong>æ‰€ä»¥å¾ˆå®¹æ˜“æƒ³åˆ°ä¸´æ—¶æ–¹æ¡ˆï¼šä¿®æ”¹æ‚¬æµ®çª—çš„å®½åº¦æˆ–è€…é«˜åº¦</strong>,</p>
<pre><code class="hljs language-ini" lang="ini">    // è®¾ç½®çª—å£å¤§å°å’Œä½ç½®
            int <span class="hljs-attr">screenHeight</span> = DisplayUtils.getScreenHeight(MainApplication.getApplication())<span class="hljs-comment">;</span>
            <span class="hljs-attr">layoutParams.height</span> = (int) (screenHeight * <span class="hljs-number">0.85</span>)<span class="hljs-comment">;</span>
            <span class="hljs-attr">layoutParams.format</span> = PixelFormat.TRANSLUCENT<span class="hljs-comment">;</span>
            <span class="hljs-attr">layoutParams.gravity</span> = Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL<span class="hljs-comment">;</span>

</code></pre>
<p>å› ä¸ºæ²»æ ‡ä¸æ²»æœ¬ï¼æˆ‘ä¸è€ƒè™‘ï¼Œæ‰“ç®—å…ˆçœ‹ç°è±¡</p>
<h4 data-id="heading-19">4.1.1 ç¬¬äºŒç§ä¸´æ—¶æ–¹æ¡ˆ   è§£å†³æ–¹æ¡ˆï¼š.æ”¹å˜ç‚¹å‡»äº‹ä»¶</h4>
<p>æ ¸å¿ƒæ€è·¯ï¼š</p>
<p>é»˜è®¤æ‚¬æµ®çª—å¯ç‚¹å‡»ï¼ˆå¤„ç†å†…éƒ¨ RecyclerViewï¼‰</p>
<p>å½“æ£€æµ‹åˆ°ç³»ç»Ÿå¼¹çª—å‡ºç°æ—¶ï¼ˆå¦‚é€šè¿‡ UsageStats æˆ–å¹¿æ’­ï¼‰ï¼š</p>
<p>å°†æ‚¬æµ®çª—è®¾ä¸º ä¸å¯ç‚¹å‡» + äº‹ä»¶é€ä¼ </p>
<p>å³ï¼šFLAG_NOT_TOUCHABLE | FLAG_NOT_FOCUSABLE</p>
<p>ç”¨æˆ·æ“ä½œå®Œæˆåï¼Œæ¢å¤å¯ç‚¹å‡»çŠ¶æ€</p>
<p>ç‚¹å‡»äº‹ä»¶çš„è¯¦ç»†åˆ†æï¼š
1.å¦‚æœæ˜¯ç‚¹å‡»äº†å®‰è£…ä¹‹åï¼Œ2såï¼Œè®¾ç½®ä¸ºä¸å¯ç‚¹å‡»ï¼Œ
ä¸ŠæŠ¥åï¼Œå¦‚æœæ˜¯é‡‡é›†åˆ°äº†ï¼Œè®¾ç½®ä¸ºå¯ç‚¹å‡»ï¼</p>
<pre><code class="hljs language-arduino" lang="arduino">   <span class="hljs-keyword">protected</span> WindowManager.<span class="hljs-function">LayoutParams <span class="hljs-title">getLayoutParams</span><span class="hljs-params">(<span class="hljs-type">boolean</span> clickable,<span class="hljs-type">int</span> orientation)</span> </span>{
        LogUtils.<span class="hljs-built_in">d</span>(TAG, <span class="hljs-string">"getLayoutParams: clickable = "</span> + clickable + <span class="hljs-string">" cardClickable = "</span> + cardClickable);
        mCurAsrClickable = clickable;
        <span class="hljs-keyword">if</span> (layoutParams == null) {
            layoutParams = <span class="hljs-keyword">new</span> WindowManager.<span class="hljs-built_in">LayoutParams</span>(WindowManager.LayoutParams.TYPE_APPLICATION);
            layoutParams.width = WindowManager.LayoutParams.WRAP_CONTENT;
            layoutParams.height = WindowManager.LayoutParams.WRAP_CONTENT;
            layoutParams.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;
            layoutParams.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
            layoutParams.format = PixelFormat.TRANSLUCENT;<span class="hljs-comment">// æ”¯æŒé€æ˜</span>
        }

        <span class="hljs-type">int</span> canTouchFlag = WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;
        <span class="hljs-type">int</span> cantTouchFlag = WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
        <span class="hljs-keyword">if</span> (clickable) {
            layoutParams.flags |= canTouchFlag;
            layoutParams.flags |= cantTouchFlag;
            layoutParams.flags ^= cantTouchFlag;
        } <span class="hljs-keyword">else</span> {
            layoutParams.flags |= cantTouchFlag;
            layoutParams.flags |= canTouchFlag;
            layoutParams.flags ^= canTouchFlag;
        }
</code></pre>
<h3 data-id="heading-20">4.2  æ–¹æ¡ˆäºŒ: æœ€ä¼˜åŒ–ç»ˆæè§£å†³æ–¹æ¡ˆ ç»“åˆæ‚¬æµ®çª—å±æ€§ä¼˜åŒ– + æ— éšœç¢æœåŠ¡æ™ºèƒ½å¤„ç†ï¼š</h3>
<p>é€šè¿‡æ‚¬æµ®çª—å±æ€§+ æ›¿æ¢å¯è§å³å¯è¯´çš„windowå¯¹è±¡ï¼Œæ›¿æ¢èŠ‚ç‚¹è§£å†³ï¼</p>
<h4 data-id="heading-21">4.2.1 æ‚¬æµ®çª—çš„å±æ€§æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</h4>
<pre><code class="hljs language-arduino" lang="arduino">  <span class="hljs-keyword">protected</span> WindowManager.<span class="hljs-function">LayoutParams <span class="hljs-title">getLayoutParams</span><span class="hljs-params">(<span class="hljs-type">boolean</span> clickable)</span> </span>{
        LogUtils.<span class="hljs-built_in">d</span>(TAG, <span class="hljs-string">"getLayoutParams: clickable = "</span> + clickable + <span class="hljs-string">" cardClickable = "</span> + cardClickable);
        mCurAsrClickable = clickable;
        <span class="hljs-keyword">if</span> (layoutParams == null) {
            layoutParams = <span class="hljs-keyword">new</span> WindowManager.<span class="hljs-built_in">LayoutParams</span>(
                    WindowManager.LayoutParams.MATCH_PARENT,
                    WindowManager.LayoutParams.WRAP_CONTENT,
                    WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,
                    WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
                    PixelFormat.TRANSLUCENT);

            layoutParams.format = PixelFormat.TRANSLUCENT;
            layoutParams.gravity = Gravity.BOTTOM | Gravity.CENTER_HORIZONTAL;

            layoutParams.flags |= WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN;

            <span class="hljs-comment">// è®¾ç½®çª—å£æ ‡å¿— - å…è®¸ç‚¹å‡»äº‹ä»¶ä¼ é€’åˆ°ä¸‹å±‚</span>
            layoutParams.flags |= WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;
            layoutParams.flags |= WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH;
        }

        <span class="hljs-comment">// è®¾ç½®çª—å£å¤§å°å’Œä½ç½®</span>
        <span class="hljs-type">int</span> screenHeight = DisplayUtils.<span class="hljs-built_in">getScreenHeight</span>(MainApplication.<span class="hljs-built_in">getApplication</span>());
        layoutParams.height = (<span class="hljs-type">int</span>) (screenHeight * <span class="hljs-number">0.95</span>);

        <span class="hljs-comment">//æ ¹æ®å±å¹•æ–¹å‘ï¼ŒåŠ¨æ€è®¾ç½®å®½åº¦</span>
        <span class="hljs-keyword">if</span> (DisplayUtils.<span class="hljs-built_in">isLandscape</span>(GlobalApplication.mGlobalContext)) {
            layoutParams.width = DisplayUtils.<span class="hljs-built_in">dp2px</span>(MainApplication.<span class="hljs-built_in">getApplication</span>(), <span class="hljs-number">348f</span>);
        } <span class="hljs-keyword">else</span> {
            layoutParams.width = WindowManager.LayoutParams.MATCH_PARENT;
        }

        LogUtils.<span class="hljs-built_in">d</span>(TAG, <span class="hljs-string">"-----height: "</span> + layoutParams.height);
        <span class="hljs-keyword">return</span> layoutParams;
    }
</code></pre>
<h4 data-id="heading-22">4.2.2 å¯è§å³å¯è¯´ï¼Œæ— éšœç¢æœåŠ¡æ›¿æ¢windowçš„æ ¸å¿ƒä»£ç å¦‚ä¸‹:</h4>
<pre><code class="hljs language-javascript" lang="javascript">            <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåœ¨ threadRoot çº¿ç¨‹ä¸­è·å–æ ¹èŠ‚ç‚¹</span>
            <span class="hljs-title class_">GlobalScope</span>.<span class="hljs-title function_">launch</span>(<span class="hljs-params">threadRoot</span>) {
                <span class="hljs-keyword">try</span> {
                    val startTime = <span class="hljs-title class_">System</span>.<span class="hljs-title function_">currentTimeMillis</span>()
                    <span class="hljs-comment">// è·å–æ ¹èŠ‚ç‚¹</span>
                    <span class="hljs-keyword">var</span> rootNode = rootInActiveWindow
                    activeRootNodeVisible = rootNode?.<span class="hljs-property">isVisibleToUser</span> ?: <span class="hljs-literal">false</span>
                    <span class="hljs-title function_">printLogOnDebug</span>(<span class="hljs-string">"rootInActiveWindow-------${rootNode?.packageName}; ${rootNode?.windowId}"</span>)

                    <span class="hljs-comment">// çª—å£è¿‡æ»¤é€»è¾‘ï¼ˆå·²æ³¨é‡Šï¼Œå¯æ ¹æ®éœ€è¦å¯ç”¨ï¼‰</span>
                    <span class="hljs-keyword">if</span> (rootNode?.<span class="hljs-property">packageName</span> == packageName || rootNode?.<span class="hljs-property">childCount</span> == <span class="hljs-number">0</span>) {
                        windows?.<span class="hljs-property">forEach</span> { <span class="hljs-variable language_">window</span> -&gt;
                            <span class="hljs-variable language_">window</span>?.<span class="hljs-property">root</span>?.<span class="hljs-property">takeIf</span> { rn -&gt;
                                rn.<span class="hljs-property">packageName</span> != packageName &amp;&amp; rn.<span class="hljs-property">childCount</span> != <span class="hljs-number">0</span>
                            }?.<span class="hljs-property">apply</span> {
                                rootNode = <span class="hljs-variable language_">this</span>
                                <span class="hljs-title class_">LogUtils</span>.<span class="hljs-title function_">d</span>(<span class="hljs-variable constant_">TAG</span>, <span class="hljs-string">"æ›¿æ¢èŠ‚ç‚¹......."</span>)
                            }
                        }
                    }
</code></pre>
<p>æ›´è¯¦ç»†ä¸€ç‚¹çš„ä»£ç ç‰‡æ®µï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAccessibilityEvent</span><span class="hljs-params">(event: <span class="hljs-type">AccessibilityEvent</span>?)</span></span> {
<span class="hljs-comment">//        windows.forEach {</span>
<span class="hljs-comment">//            LogUtils.e(TAG, "å¼€å§‹windows-------$it; ${it.root?.packageName}")</span>
<span class="hljs-comment">//        }</span>

        <span class="hljs-keyword">if</span>(!SettingsChangeObserver.checkIsCarSystem()){
            <span class="hljs-keyword">var</span> rootNodeOrigin = getRootNodeWithCache(event)

            lastCallBackTime = System.currentTimeMillis()
            lastActiveRootNodePackage = <span class="hljs-string">"<span class="hljs-subst">${rootNodeOrigin?.packageName?.toString() ?: <span class="hljs-string">""</span>}</span> child:<span class="hljs-subst">${rootNodeOrigin?.childCount}</span>"</span>

            windowArrStr = <span class="hljs-string">""</span>
            <span class="hljs-keyword">if</span>(isAbleToLog){
                windows.forEach {
                    windowArrStr += <span class="hljs-string">"<span class="hljs-subst">${it.root?.packageName}</span> - visible:<span class="hljs-subst">${it.root?.isVisibleToUser}</span> - active:<span class="hljs-subst">${it.isActive}</span> \n"</span>
                }
            }
            activeRootNodeVisible = rootNodeOrigin?.isVisibleToUser ?: <span class="hljs-literal">false</span>
            printLogOnDebug(<span class="hljs-string">"rootInActiveWindow-------<span class="hljs-subst">${rootNodeOrigin?.packageName}</span>; <span class="hljs-subst">${rootNodeOrigin?.windowId}</span>"</span>)

<span class="hljs-comment">//        for (w in windows) {</span>
<span class="hljs-comment">//            w.getBoundsInScreen(mRect)</span>
<span class="hljs-comment">//            //è¿‡æ»¤é¡¶éƒ¨çŠ¶æ€æ çª—å£</span>
<span class="hljs-comment">//            if (mRect.equalsXY(0, 0, 1920, 32)) continue</span>
<span class="hljs-comment">//            if (mRect.equalsXY(144, 0, 1920, 32)) continue</span>
<span class="hljs-comment">//            //è¿‡æ»¤å·¦è¾¹Dockæ çª—å£</span>
<span class="hljs-comment">//            if (mRect.equalsXY(0, 0, 144, 720)) continue</span>
<span class="hljs-comment">//            val pkName = w.root?.packageName</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//            if (pkName.isNullOrEmpty()) break</span>
<span class="hljs-comment">//            rootNode</span>
<span class="hljs-comment">//            // TODO V2å¤„ç†</span>
<span class="hljs-comment">////            rootNode = HotwordsExecutorFactory.getHotwordsExecutor(pkName).interceptRootNode(windows, rootNode)</span>
<span class="hljs-comment">//            break</span>
<span class="hljs-comment">//        }</span>

            <span class="hljs-keyword">if</span> (rootNodeOrigin?.packageName == packageName || rootNodeOrigin?.childCount == <span class="hljs-number">0</span>) {
                windows.forEach {
                Log.d(
                    TAG, <span class="hljs-string">"""
                packageName:<span class="hljs-subst">${it?.root?.packageName}</span>
                isActive:<span class="hljs-subst">${it?.isActive}</span>
                isAccessibilityFocused:<span class="hljs-subst">${it?.isAccessibilityFocused}</span>
                """</span>.trimIndent()
                )
                    it.root?.takeIf { rn -&gt;
                        rn.packageName != packageName &amp;&amp; rn.childCount != <span class="hljs-number">0</span>
                    }?.apply {
                        LogUtils.d(TAG, <span class="hljs-string">"æ›¿æ¢èŠ‚ç‚¹......."</span>+ rootNodeOrigin?.packageName )
                        rootNodeOrigin = <span class="hljs-keyword">this</span>
                    }
                }
            }
            <span class="hljs-keyword">val</span> rootNode = rootNodeOrigin

            lastLoadRootNodePackage = rootNode?.packageName?.toString() ?: <span class="hljs-string">""</span>

            printLogOnDebug(<span class="hljs-string">"rootNode-------<span class="hljs-subst">${rootNode?.packageName}</span>; <span class="hljs-subst">${rootNode?.windowId}</span>"</span>)

            <span class="hljs-keyword">if</span> (rootNode == <span class="hljs-literal">null</span> || event == <span class="hljs-literal">null</span>|| event.packageName.isNullOrEmpty()) {
                <span class="hljs-keyword">return</span>
            }

            <span class="hljs-keyword">if</span> (rootNode.packageName == packageName) {
                <span class="hljs-keyword">return</span>
            }

            <span class="hljs-keyword">try</span> {
                logNodeInfo(rootNode, event)
            } <span class="hljs-keyword">catch</span> (e: Exception) {

            }
            GlobalScope.launch(threadContext) {
                <span class="hljs-keyword">try</span> {
                    processBusinessLogic(rootNode)
                } <span class="hljs-keyword">catch</span> (e: Exception) {
                    LogUtils.e(TAG, e.message)
                }
            }
        }<span class="hljs-keyword">else</span>{

            <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåœ¨ threadRoot çº¿ç¨‹ä¸­è·å–æ ¹èŠ‚ç‚¹</span>
            GlobalScope.launch(threadRoot) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
                    <span class="hljs-comment">// è·å–æ ¹èŠ‚ç‚¹</span>
                    <span class="hljs-keyword">var</span> rootNode = rootInActiveWindow
                    <span class="hljs-keyword">val</span> endTime = System.currentTimeMillis()
                    <span class="hljs-keyword">val</span> timeCost = endTime - startTime
                    <span class="hljs-keyword">if</span> (timeCost &gt; <span class="hljs-number">1000</span>) {
                        LogUtils.e(TAG, <span class="hljs-string">"è·å–æœ€æ–°rootInActiveWindowè€—æ—¶è¶…è¿‡1ç§’: <span class="hljs-subst">${timeCost}</span>ms"</span>+Thread.currentThread().name)
                        <span class="hljs-keyword">val</span> eventType = event?.let { AccessibilityEvent.eventTypeToString(it.eventType) } ?: <span class="hljs-string">"unknown"</span>
                        voiceAccessibilityPerformance.reportAccessibility(timeCost,eventType)
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(isAbleToWindowLog){
                        LogUtils.i(TAG, <span class="hljs-string">"è·å–æœ€æ–°rootInActiveWindowè€—æ—¶: <span class="hljs-subst">${timeCost}</span>ms"</span>+Thread.currentThread().name)
                    }

                    lastCallBackTime = System.currentTimeMillis()
                    lastActiveRootNodePackage = <span class="hljs-string">"<span class="hljs-subst">${rootNode?.packageName?.toString() ?: <span class="hljs-string">""</span>}</span> child:<span class="hljs-subst">${rootNode?.childCount}</span>"</span>
                    windowArrStr = <span class="hljs-string">""</span>

                    activeRootNodeVisible = rootNode?.isVisibleToUser ?: <span class="hljs-literal">false</span>
                    printLogOnDebug(<span class="hljs-string">"rootInActiveWindow-------<span class="hljs-subst">${rootNode?.packageName}</span>; <span class="hljs-subst">${rootNode?.windowId}</span>"</span>)

                    <span class="hljs-comment">// çª—å£è¿‡æ»¤é€»è¾‘ï¼ˆå·²æ³¨é‡Šï¼Œå¯æ ¹æ®éœ€è¦å¯ç”¨ï¼‰</span>
                    <span class="hljs-keyword">if</span> (rootNode?.packageName == packageName || rootNode?.childCount == <span class="hljs-number">0</span>) {
                        windows?.forEach { window -&gt;
                            window?.root?.takeIf { rn -&gt;
                                rn.packageName != packageName &amp;&amp; rn.childCount != <span class="hljs-number">0</span>
                            }?.apply {
                                rootNode = <span class="hljs-keyword">this</span>
                                LogUtils.d(TAG, <span class="hljs-string">"æ›¿æ¢èŠ‚ç‚¹......."</span>)
                            }
                        }
                    }
</code></pre>
<blockquote>
<p>ä¸ºä»€ä¹ˆä¿®æ”¹æ‚¬æµ®çª—çš„å±æ€§å’Œæ›¿æ¢windowå¯ä»¥è§£å†³å‘¢?</p>
</blockquote>
<p>å…ˆæ•´ç†éœ€æ±‚ï¼š</p>
<h4 data-id="heading-23">1.).éœ€è¦èƒ½æŠŠæ‚¬æµ®çª—çš„äº‹ä»¶èƒ½è§¦æ‘¸ï¼Œå°±è¦ç”¨åˆ° WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;</h4>
<h4 data-id="heading-24">2).æœŸæœ›ä¸å½±å“ä¸‹é¢windowçš„äº¤äº’ï¼ŒFLAG_NOT_FOCUSABLE</h4>
<p>FLAG_NOT_FOCUSABLE ï¼š ç„¦ç‚¹æ˜¯å¹²å˜›çš„?
åªæœ‰è®¾ç½®äº†è¿™ä¸ªï¼Œæ‰èƒ½æ‰«æåˆ°windowå¯¹è±¡</p>
<p><strong>åœºæ™¯1ï¼šè®¾ç½®äº† FLAG_NOT_FOCUSABLE</strong></p>
<p>// ä½ çš„æ‚¬æµ®çª—ä»£ç ï¼š
layoutParams.flags |= WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
// ç”¨æˆ·æ“ä½œå’Œç»“æœï¼š</p>
<ol>
<li>ç”¨æˆ·ç‚¹å‡»æ‚¬æµ®çª—å†…çš„ EditText â†’ âŒ è½¯é”®ç›˜ä¸ä¼šå¼¹å‡º</li>
<li>ç”¨æˆ·æŒ‰ç‰©ç†é”®ç›˜ â†’ âŒ æ‚¬æµ®çª—æ”¶ä¸åˆ°æŒ‰é”®äº‹ä»¶</li>
<li>ç”¨æˆ·æŒ‰è¿”å›é”® â†’ âŒ æ‚¬æµ®çª—æ”¶ä¸åˆ°è¿”å›é”®äº‹ä»¶</li>
<li>ç”¨æˆ·æŒ‰éŸ³é‡é”® â†’ âŒ æ‚¬æµ®çª—æ”¶ä¸åˆ°éŸ³é‡é”®äº‹ä»¶</li>
</ol>
<p><strong>åœºæ™¯2ï¼šæ²¡æœ‰è®¾ç½® FLAG_NOT_FOCUSABLE</strong>
// ä¸è®¾ç½® FLAG_NOT_FOCUSABLEï¼š
// layoutParams.flags |= WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE; // æ³¨é‡Šæ‰</p>
<p>// ç”¨æˆ·æ“ä½œå’Œç»“æœï¼š</p>
<ol>
<li>ç”¨æˆ·ç‚¹å‡»æ‚¬æµ®çª—å†…çš„ EditText â†’ âœ… è½¯é”®ç›˜å¼¹å‡º</li>
<li>ç”¨æˆ·æŒ‰ç‰©ç†é”®ç›˜ â†’ âœ… æ‚¬æµ®çª—æ”¶åˆ°æŒ‰é”®äº‹ä»¶</li>
<li>ç”¨æˆ·æŒ‰è¿”å›é”® â†’ âœ… æ‚¬æµ®çª—æ”¶åˆ°è¿”å›é”®äº‹ä»¶</li>
<li>ç”¨æˆ·æŒ‰éŸ³é‡é”® â†’ âœ… æ‚¬æµ®çª—æ”¶åˆ°éŸ³é‡é”®äº‹ä»¶</li>
</ol>
<p><strong>Q1ï¼šè®¾ç½®äº† FLAG_NOT_FOCUSABLEï¼Œä¸ºä»€ä¹ˆè¿˜èƒ½æ”¶åˆ°è§¦æ‘¸äº‹ä»¶ï¼Ÿ</strong>
Aï¼šç„¦ç‚¹å’Œè§¦æ‘¸æ˜¯åˆ†å¼€çš„ã€‚FLAG_NOT_FOCUSABLE åªå½±å“é”®ç›˜/æŒ‰é”®äº‹ä»¶ï¼Œä¸å½±å“è§¦æ‘¸äº‹ä»¶ã€‚è¦é˜»æ­¢è§¦æ‘¸ï¼Œéœ€è¦è®¾ç½® FLAG_NOT_TOUCHABLEã€‚</p>
<p><strong>Q2ï¼šWindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
layoutParams.flags |= WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;</strong>
å’Œåªè®¾ç½®äº†WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,æœ‰ä»€ä¹ˆåŒºåˆ«</p>
<p>FLAG_NOT_TOUCH_MODAL çš„ä½œç”¨ï¼Ÿ
é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¬æµ®çª—ä¼šæ¨¡æ€æ‹¦æˆªæ‰€æœ‰è§¦æ‘¸äº‹ä»¶ï¼ˆå³ä½¿ç‚¹å‡»ç©ºç™½åŒºï¼Œåº•å±‚ä¹Ÿæ”¶ä¸åˆ°ï¼‰
åŠ ä¸Šæ­¤ flag åï¼š
æ‚¬æµ®çª—åŒºåŸŸå†…ï¼šè‡ªå·±å¤„ç†äº‹ä»¶
åŒºåŸŸå¤–ï¼šäº‹ä»¶ä¼ é€’ç»™ä¸‹å±‚çª—å£
<strong>Q3ï¼š// è®¾ç½®çª—å£æ ‡å¿— - å…è®¸ç‚¹å‡»å¤–éƒ¨å…³é—­</strong>
params.flags |= WindowManager.LayoutParams.FLAG_DIM_BEHIND;</p>
<p><strong>Q4ï¼š// è®¾ç½®çª—å£æ ‡å¿— - å…è®¸ç‚¹å‡»å¤–éƒ¨å…³é—­</strong>
è¿™ä¸ªå¿…é¡»é…åˆflagä¸€èµ·ä½¿ç”¨, å¦åˆ™ä¹Ÿä¸ç”Ÿæ•ˆ
WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH;</p>
<p><strong>Q5ï¼šè¿™3ä¸ªæ­¥éª¤åˆ°åº•äº‹ä»€ä¹ˆæ„æ€</strong></p>
<p>int canTouchFlag = WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;
int cantTouchFlag = WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;</p>
<pre><code class="hljs language-ini" lang="ini">    layoutParams.flags |= canTouchFlag<span class="hljs-comment">;</span>
    layoutParams.flags |= cantTouchFlag<span class="hljs-comment">;</span>
    layoutParams.flags ^= cantTouchFlag<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€
ç»è¿‡è¿™ä¸‰æ­¥è¿ç®—åï¼š</p>
<p>âœ… è®¾ç½®äº† FLAG_NOT_TOUCH_MODAL</p>
<p>âŒ ç§»é™¤äº† FLAG_NOT_TOUCHABLE</p>
<p>âŒ ç§»é™¤äº† FLAG_NOT_FOCUSABLE</p>
<p>ç­‰ä»·äºï¼š</p>
<p>// è®¾ç½® NOT_TOUCH_MODAL
layoutParams.flags |= WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;</p>
<h3 data-id="heading-25">4.3 æ€»ç»“ï¼š  ç„¦ç‚¹å’Œè§¦æ‘¸äº‹ä»¶æ˜¯2å›äº‹ï¼</h3>
<h6 data-id="heading-26">1ï¼‰.è§¦æ‘¸å“åº”ï¼š åªå’Œè¿™ä¸ªæœ‰å…³ç³»</h6>
<p>layoutParams.flags |= WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;</p>
<h6 data-id="heading-27">2).  æ‚¬æµ®çª—çš„äº‹ä»¶åˆ†å‘é—®é¢˜ï¼š</h6>
<p>è®¾ç½® FLAG_NOT_FOCUSABLE + FLAG_NOT_TOUCH_MODAL
onTouchEvent è¿”å› falseï¼Œ æˆ‘å‘ç°ä¸‹é¢çš„launcheråº”ç”¨ï¼Œä¸èƒ½æ¥æ”¶åˆ°ç‚¹å‡»äº‹ä»¶</p>
<p>ç»“è®ºï¼šäº‹ä»¶é€ä¼ ï¼Œ(åªå’ŒFLAG_NOT_TOUCHABLEæœ‰å…³ç³»ï¼Œæ³¨æ„ä¸æ˜¯FLAG_NOT_FOCUSABLE ï¼Œä¸éµå¾ªäº‹ä»¶åˆ†å‘åŸç†)ï¼
æƒé™å’Œç³»ç»Ÿé™åˆ¶ï¼šä¸€äº›ç³»ç»Ÿä¸ºäº†å®‰å…¨ï¼Œé™åˆ¶äº†æ‚¬æµ®çª—ä¸åº•å±‚åº”ç”¨çš„äº¤äº’</p>
<p>ç³»ç»Ÿå®‰å…¨æœºåˆ¶ç¦æ­¢åº”ç”¨ç›´æ¥å¹²é¢„å…¶ä»–åº”ç”¨çš„äº‹ä»¶æµã€‚</p>
<p>æ‚¬æµ®çª—äº‹ä»¶é€ä¼ æœºåˆ¶</p>
<p>â— FLAG_NOT_FOCUSABLEï¼šçª—å£ä¸è·å–ç„¦ç‚¹ï¼Œä½†ä»å¯æ¥æ”¶è§¦æ‘¸äº‹ä»¶(è‡ªå·±å¾—åˆ°äº‹ä»¶)</p>
<p>â— FLAG_NOT_TOUCH_MODALï¼šçª—å£åŒºåŸŸå†…çš„è§¦æ‘¸äº‹ä»¶è‡ªå·±å¤„ç†ï¼ŒåŒºåŸŸå¤–çš„ä¼ é€’ç»™åé¢</p>
<p>â— FLAG_NOT_TOUCHABLEï¼šå®Œå…¨ä¸æ¥æ”¶ä»»ä½•è§¦æ‘¸äº‹ä»¶ï¼Œå…¨éƒ¨ä¼ é€’ç»™åé¢(å…¨éƒ¨ç»™äº†åº•å±‚)</p>
<p>Androidæ‚¬æµ®çª—äº‹ä»¶åˆ†å‘éµå¾ªä»¥ä¸‹åŸºæœ¬æµç¨‹ï¼š</p>
<ol>
<li>è¾“å…¥ç³»ç»Ÿæ£€æµ‹è§¦æ‘¸äº‹ä»¶</li>
<li>WindowManagerServiceç¡®å®šç›®æ ‡çª—å£</li>
<li>æ‚¬æµ®çª—çš„äº‹ä»¶åˆ†å‘åªèƒ½é’ˆå¯¹è‡ªå·±çš„çª—å£ï¼Œä¸èƒ½åˆ†å‘ç»™å…¶ä»–çª—å£</li>
</ol>
<pre><code class="hljs language-csharp" lang="csharp">    <span class="hljs-comment">/**
     * è®¾ç½®çº¢è‰²åŒºåŸŸç‚¹å‡»å…³é—­åŠŸèƒ½, ç‚¹å‡»åˆ°cardViewä¸æ¶ˆå¤±
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setupTransparentAreaClick</span>()</span> {
        <span class="hljs-keyword">if</span> (mAsrView == <span class="hljs-literal">null</span>) {
            LogUtils.d(TAG, <span class="hljs-string">"setupTransparentAreaClick: mAsrView is null"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// è·å–æ ¹å¸ƒå±€</span>
        View rootView = mAsrView.findViewById(R.id.root_view);

        <span class="hljs-keyword">if</span> (rootView == <span class="hljs-literal">null</span> || cardView == <span class="hljs-literal">null</span>) {
            LogUtils.d(TAG, <span class="hljs-string">"setupTransparentAreaClick: rootView or cardView is null"</span>);
            <span class="hljs-keyword">return</span>;
        }

        LogUtils.d(TAG, <span class="hljs-string">"setupTransparentAreaClick: rootView="</span> + rootView + <span class="hljs-string">", cardView="</span> + cardView);

        rootView.setOnTouchListener(<span class="hljs-keyword">new</span> View.OnTouchListener() {
            <span class="hljs-keyword">private</span> <span class="hljs-built_in">long</span> touchStartTime = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">private</span> <span class="hljs-built_in">float</span> touchStartX = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">private</span> <span class="hljs-built_in">float</span> touchStartY = <span class="hljs-number">0</span>;

            @Override
            <span class="hljs-function"><span class="hljs-keyword">public</span> boolean <span class="hljs-title">onTouch</span>(<span class="hljs-params">View v, MotionEvent <span class="hljs-keyword">event</span></span>)</span> {
                <span class="hljs-keyword">if</span> (mAsrView == <span class="hljs-literal">null</span>) {
                    LogUtils.e(TAG, <span class="hljs-string">"onTouch: mAsrView=null!!"</span>);
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
                <span class="hljs-built_in">int</span> action = <span class="hljs-keyword">event</span>.getAction();
                <span class="hljs-built_in">float</span> currentX = <span class="hljs-keyword">event</span>.getX();
                <span class="hljs-built_in">float</span> currentY = <span class="hljs-keyword">event</span>.getY();

                <span class="hljs-keyword">switch</span> (action) {
                    <span class="hljs-keyword">case</span> MotionEvent.ACTION_DOWN:
                        touchStartTime = System.currentTimeMillis();
                        touchStartX = currentX;
                        touchStartY = currentY;

                        LogUtils.d(TAG, <span class="hljs-string">"ACTION_DOWN: x="</span> + currentX + <span class="hljs-string">", y="</span> + currentY);
                        LogUtils.d(TAG, <span class="hljs-string">"rootView bounds: width="</span> + rootView.getWidth() + <span class="hljs-string">", height="</span> + rootView.getHeight());
                        LogUtils.d(TAG, <span class="hljs-string">"cardView bounds: left="</span> + cardView.getLeft() + <span class="hljs-string">", top="</span> + cardView.getTop() +
                                <span class="hljs-string">", right="</span> + cardView.getRight() + <span class="hljs-string">", bottom="</span> + cardView.getBottom());

                        <span class="hljs-comment">// åˆ¤æ–­ç‚¹å‡»æ˜¯å¦åœ¨cardViewåŒºåŸŸå†…</span>
                        boolean isInsideCardView = isPointInsideView(currentX, currentY, cardView);
                        LogUtils.d(TAG, <span class="hljs-string">"isInsideCardView: "</span> + isInsideCardView);

                        <span class="hljs-comment">// å¦‚æœç‚¹å‡»åœ¨cardViewå†…ï¼Œä¸å¤„ç†ï¼Œè®©å­Viewå¤„ç†</span>
                        <span class="hljs-keyword">if</span> (isInsideCardView) {
                            LogUtils.d(TAG, <span class="hljs-string">"ç‚¹å‡»åœ¨cardViewå†…ï¼Œä¸å¤„ç†è§¦æ‘¸äº‹ä»¶"</span>);
                            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                        }
                        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

                    <span class="hljs-keyword">case</span> MotionEvent.ACTION_MOVE:
<span class="hljs-comment">//                        LogUtils.d(TAG, "ACTION_MOVE: x=" + currentX + ", y=" + currentY);</span>
                        <span class="hljs-keyword">break</span>;

                    <span class="hljs-keyword">case</span> MotionEvent.ACTION_UP:
                    <span class="hljs-keyword">case</span> MotionEvent.ACTION_CANCEL:
                        <span class="hljs-built_in">long</span> touchDuration = System.currentTimeMillis() - touchStartTime;
                        <span class="hljs-built_in">float</span> deltaX = Math.abs(currentX - touchStartX);
                        <span class="hljs-built_in">float</span> deltaY = Math.abs(currentY - touchStartY);

                        LogUtils.d(TAG, <span class="hljs-string">"ACTION_UP: x="</span> + currentX + <span class="hljs-string">", y="</span> + currentY +
                                <span class="hljs-string">", duration="</span> + touchDuration + <span class="hljs-string">"ms, deltaX="</span> + deltaX + <span class="hljs-string">", deltaY="</span> + deltaY);

                        <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ç‚¹å‡»äº‹ä»¶ï¼ˆä¸æ˜¯æ»‘åŠ¨ï¼‰</span>
                        <span class="hljs-keyword">if</span> (touchDuration &lt; <span class="hljs-number">500</span> &amp;&amp; deltaX &lt; <span class="hljs-number">50</span> &amp;&amp; deltaY &lt; <span class="hljs-number">50</span>) {
                            boolean isInside = isPointInsideView(currentX, currentY, cardView);
                            LogUtils.d(TAG, <span class="hljs-string">"ç‚¹å‡»äº‹ä»¶å¤„ç†: isInsideCardView="</span> + isInside);

                            <span class="hljs-comment">// å¦‚æœç‚¹å‡»åœ¨cardViewå¤–ï¼Œå…³é—­ç•Œé¢</span>
                            <span class="hljs-keyword">if</span> (!isInside) {
                                LogUtils.i(<span class="hljs-string">"baidu"</span>, <span class="hljs-string">"ç‚¹å‡»åœ¨cardViewå¤–éƒ¨ï¼Œè§¦å‘å…³é—­"</span>);
                                stopDialog();
                                LogUtils.i(<span class="hljs-string">"baidu"</span>, <span class="hljs-string">"ç‚¹å‡»åœ¨cardViewå¤–éƒ¨ï¼Œè§¦å‘å…³é—­====="</span>);
                                AsrUiManger.getPhone().sendTimeoutDelayTime(<span class="hljs-number">1500</span>);

                                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                            } <span class="hljs-keyword">else</span> {
                                LogUtils.d(TAG, <span class="hljs-string">"ç‚¹å‡»åœ¨cardViewå†…éƒ¨ï¼Œä¸è§¦å‘å…³é—­"</span>);
                            }
                        } <span class="hljs-keyword">else</span> {
                            LogUtils.d(TAG, <span class="hljs-string">"æ»‘åŠ¨äº‹ä»¶ï¼Œä¸è§¦å‘å…³é—­"</span>);
                        }
                        <span class="hljs-keyword">break</span>;
                }
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        });
    }
</code></pre>
<h6 data-id="heading-28">3).FLAG æ ‡å¿—å«ä¹‰</h6>
<p>FLAG_NOT_FOCUSABLE: çª—å£ä¸è·å–è¾“å…¥ç„¦ç‚¹ï¼Œä½†å¯æ¥æ”¶è§¦æ‘¸</p>
<p>FLAG_NOT_TOUCH_MODAL: çª—å£å¤–éƒ¨è§¦æ‘¸ä¼ é€’ç»™ä¸‹å±‚</p>
<p>FLAG_WATCH_OUTSIDE_TOUCH: å¯æ¥æ”¶çª—å£å¤–éƒ¨çš„è§¦æ‘¸äº‹ä»¶</p>
<p>FLAG_NOT_TOUCHABLE: å®Œå…¨ä¸æ¥æ”¶è§¦æ‘¸äº‹ä»¶</p>
<h2 data-id="heading-29">5.æœ€ç»ˆå»ºè®®</h2>
<p>é‡‡ç”¨æ–¹æ¡ˆä¸‰çš„ä¼˜åŒ–æ‚¬æµ®çª—å±æ€§ + æ™ºèƒ½æ— éšœç¢æœåŠ¡å¤„ç†</p>
<p>æ‚¬æµ®çª—è®¾ç½®ä¸ºåŠé€æ˜ã€ä¸è·å–ç„¦ç‚¹ã€å…è®¸è§¦æ‘¸ç©¿é€</p>
<p>åœ¨ç³»ç»Ÿå¼¹æ¡†å‡ºç°æ—¶ï¼Œè‡ªåŠ¨å°†æ‚¬æµ®çª—ç¼©å°/æ·¡åŒ–</p>
<p>æ— éšœç¢æœåŠ¡å®ç°æ™ºèƒ½æ ¹èŠ‚ç‚¹æŸ¥æ‰¾ç®—æ³•</p>
<p>è¿™æ ·æ—¢èƒ½ä¿è¯æ‚¬æµ®çª—çš„åŠŸèƒ½ï¼Œåˆèƒ½è®©ç³»ç»Ÿå¼¹æ¡†æ­£å¸¸è¢«æ— éšœç¢æœåŠ¡æ‰«æåˆ°ï¼Œå®ç°"å¯è§å³å¯è¯´"çš„å®Œæ•´åŠŸèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Anthropic å¦‚ä½•è¯„ä¼° AI Agent]]></title>    <link>https://juejin.cn/post/7594396523440554019</link>    <guid>https://juejin.cn/post/7594396523440554019</guid>    <pubDate>2026-01-13T06:23:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594396523440554019" data-draft-id="7594396368174661667" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Anthropic å¦‚ä½•è¯„ä¼° AI Agent"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-13T06:23:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºçŒ¿DD"/> <meta itemprop="url" content="https://juejin.cn/user/131597123993358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Anthropic å¦‚ä½•è¯„ä¼° AI Agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/131597123993358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºçŒ¿DD
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:23:48.000Z" title="Tue Jan 13 2026 06:23:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šæ‰“ç ´â€œç›²ç›®é£è¡Œâ€çš„å¼€å‘å¾ªç¯</h2>
<p>åœ¨å¼€å‘AIæ™ºèƒ½ä½“çš„è¿‡ç¨‹ä¸­ï¼Œè®¸å¤šå›¢é˜Ÿéƒ½ç»å†è¿‡è¿™æ ·çš„ç—›ç‚¹ï¼šä½ ä¿®å¤äº†ä¸€ä¸ªé—®é¢˜ï¼Œå´åœ¨ä¸ç»æ„é—´å¼•å‘äº†å¦ä¸€ä¸ªæ›´éšè”½çš„é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰ä¸€å¥—å¯é çš„è¯„ä¼°ä½“ç³»ï¼Œæ•´ä¸ªå¼€å‘è¿‡ç¨‹å°±åƒæ˜¯åœ¨â€œç›²ç›®é£è¡Œâ€ï¼Œå›¢é˜Ÿé™·å…¥è¢«åŠ¨ä¿®å¤çš„å¾ªç¯ï¼Œéš¾ä»¥è‡ªä¿¡åœ°å‘å¸ƒæ–°ç‰ˆæœ¬ã€‚</p>
<p>æœ‰æ•ˆçš„è¯„ä¼°ï¼ˆevalsï¼‰æ­£æ˜¯æ‰“ç ´è¿™ä¸€å›°å¢ƒçš„å…³é”®ã€‚å®ƒèƒ½è®©æ™ºèƒ½ä½“åœ¨è¡Œä¸ºä¸Šçš„å˜åŒ–å’Œæ½œåœ¨é—®é¢˜åœ¨å½±å“ç”¨æˆ·ä¹‹å‰å°±å˜å¾—æ¸…æ™°å¯è§ã€‚æœ¬æ–‡å°†ä»Anthropicçš„æ·±åº¦åˆ†äº«ä¸­ï¼Œæç‚¼å‡ºäº”ä¸ªæœ€ä»¤äººæƒŠè®¶ã€æœ€å…·å½±å“åŠ›çš„æ ¸å¿ƒæ•™è®­ï¼Œå®ƒä»¬å°†å½»åº•æ”¹å˜ä½ å¯¹AIæ™ºèƒ½ä½“è¯„ä¼°çš„çœ‹æ³•ã€‚</p>
<h2 data-id="heading-1">äº”ä¸ªå…³äºAIæ™ºèƒ½ä½“è¯„ä¼°çš„åç›´è§‰æ•™è®­</h2>
<h3 data-id="heading-2">æ•™è®­ä¸€ï¼šåˆ«ç­‰äº†ï¼Œä»20ä¸ªå¤±è´¥æ¡ˆä¾‹å¼€å§‹æ„å»ºä½ çš„è¯„ä¼°ä½“ç³»</h3>
<p>å›¢é˜Ÿåœ¨é¡¹ç›®åˆæœŸå¸¸å¸¸è®¤ä¸ºæ„å»ºè¯„ä¼°ä½“ç³»æ˜¯ä¸€é¡¹å·¨å¤§çš„â€œå¼€é”€â€ï¼Œä¼šæ‹–æ…¢äº§å“ä¸Šå¸‚çš„è¿›åº¦ï¼Œå› æ­¤é€‰æ‹©æ¨è¿Ÿã€‚ä»–ä»¬è®¤ä¸ºï¼Œç­‰äº§å“åŠŸèƒ½ç¨³å®šã€è§„æ¨¡åŒ–ä¹‹åå†æ¥è€ƒè™‘è¯„ä¼°ä¹Ÿä¸è¿Ÿã€‚</p>
<p>ç„¶è€Œï¼ŒAnthropicçš„ç»éªŒæ°æ°ç›¸åï¼šç­‰åˆ°æ™ºèƒ½ä½“è§„æ¨¡åŒ–åæ‰å¼€å§‹æ„å»ºè¯„ä¼°ï¼Œä½ ä¼šé‡åˆ°æ›´å¤§çš„å›°éš¾ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¯„ä¼°çš„ä»·å€¼ä¼šéšç€æ—¶é—´å¤åˆ©å¢é•¿ã€‚æ—©æœŸæŠ•å…¥ä¸ä»…ä¸ä¼šæ‹–æ…¢ä½ ï¼Œåè€Œä¼šæˆä¸ºæœªæ¥åŠ é€Ÿè¿­ä»£çš„å¼•æ“ã€‚é‚£ä¹ˆï¼Œè¯¥å¦‚ä½•å¼€å§‹å‘¢ï¼Ÿå…¶å®é—¨æ§›æ¯”ä½ æƒ³è±¡çš„è¦ä½å¾—å¤šï¼š</p>
<p>â€œå®é™…ä¸Šï¼Œä¸€å¥—ç”±20-50ä¸ªæºè‡ªçœŸå®å¤±è´¥æ¡ˆä¾‹çš„ç®€å•ä»»åŠ¡ï¼Œå°±æ˜¯ä¸€ä¸ªç»ä½³çš„èµ·ç‚¹ã€‚â€</p>
<p>è¿™ä¸ªè§‚ç‚¹ä¹‹æ‰€ä»¥é‡è¦ï¼Œæ˜¯å› ä¸ºå®ƒå½»åº•æ‰“ç ´äº†â€œè¯„ä¼°ä½“ç³»å¿…é¡»åºå¤§è€Œå®Œç¾â€çš„è¯¯åŒºã€‚è¿™ä¸ä»…ä»…æ˜¯å…³äºé¿å…æŠ€æœ¯å€ºï¼Œæ›´æ˜¯ä¸ºäº†è·å¾—å¼€å‘è¿‡ç¨‹ä¸­çš„èƒ½è§åº¦ã€‚ç”¨ä¸€å°ç»„çœŸå®çš„å¤±è´¥æ¡ˆä¾‹èµ·æ­¥ï¼Œå°±ç­‰äºä¸ºä½ çš„é©¾é©¶èˆ±å®‰è£…äº†ç¬¬ä¸€æ‰¹ä»ªè¡¨ï¼Œè®©ä½ åœæ­¢â€œç›²ç›®é£è¡Œâ€ï¼Œå¼€å§‹ç”¨æ•°æ®å¯¼èˆªã€‚</p>
<h3 data-id="heading-3">æ•™è®­äºŒï¼šå½“ä½ çš„æ™ºèƒ½ä½“â€œå¤±è´¥â€æ—¶ï¼Œå¯èƒ½æ°æ°æ˜¯å¤©æ‰çš„ä½“ç°</h3>
<p>æˆ‘ä»¬é€šå¸¸è®¤ä¸ºï¼Œè¯„ä¼°å¤±è´¥å°±æ„å‘³ç€æ™ºèƒ½ä½“çŠ¯äº†é”™ã€‚ä½†æœ‰æ—¶ï¼Œè¿™ç§â€œå¤±è´¥â€æ°æ°æ˜¯å…¶å“è¶Šåˆ›é€ åŠ›çš„ä½“ç°ã€‚</p>
<p>ä»¥Anthropicæåˆ°çš„ Opus 4.5 æ¨¡å‹ä¸ºä¾‹ï¼Œåœ¨ä¸€ä¸ªé¢„è®¢èˆªç­çš„æµ‹è¯•ä»»åŠ¡ä¸­ï¼Œå®ƒæ²¡æœ‰éµå¾ªé¢„è®¾çš„æµç¨‹ï¼Œè€Œæ˜¯é€šè¿‡å‘ç°æ”¿ç­–ä¸­çš„ä¸€ä¸ªæ¼æ´ï¼Œä¸ºç”¨æˆ·æ‰¾åˆ°äº†ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚ä»å­—é¢ä¸Šçœ‹ï¼Œå®ƒâ€œå¤±è´¥â€äº†è¿™æ¬¡è¯„ä¼°ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æŒ‰ç…§äººç±»è®¾è®¡çš„æ­»æ¿è·¯å¾„æ‰§è¡Œä»»åŠ¡ã€‚ä½†ä»ç”¨æˆ·çš„è§’åº¦çœ‹ï¼Œå®ƒå–å¾—äº†å·¨å¤§çš„æˆåŠŸã€‚</p>
<p>â€œå®ƒâ€˜å¤±è´¥â€™äº†ä¹¦é¢ä¸Šçš„è¯„ä¼°ï¼Œä½†å®é™…ä¸Šä¸ºç”¨æˆ·æƒ³å‡ºäº†ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚â€</p>
<p>è¿™ä¸ªä¾‹å­æ·±åˆ»åœ°æ­ç¤ºäº†é™æ€è¯„ä¼°çš„å±€é™æ€§ã€‚è¿™å¹¶éç®€å•çš„ç¨‹åºé”™è¯¯ï¼Œè€Œæ˜¯å‰æ²¿æ¨¡å‹çš„ä¸€ä¸ªå…¸å‹ç‰¹å¾ï¼šå®ƒä»¬çš„è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œå·²ç»å¼€å§‹è¶…è¶Šé‚£äº›åµŒå…¥åœ¨æ—§å¼è¯„ä¼°é‡Œçš„ã€åŸºäºé™æ€è§„åˆ™çš„å‡è®¾ã€‚ä¾èµ–åƒµåŒ–çš„è·¯å¾„è¯„ä¼°æ— å¼‚äºå¦ä¸€ç§â€œç›²ç›®é£è¡Œâ€ï¼Œå› ä¸ºå®ƒè®©ä½ å¯¹æ¨¡å‹è‡ªèº«çš„å¤©æ‰ä¹‹å¤„è§†è€Œä¸è§ã€‚å­¦ä¼šè¯†åˆ«è¿™äº›â€œå¤©æ‰èˆ¬â€çš„å¤±è´¥ï¼Œæ‰èƒ½è®©ä½ çœŸæ­£çœ‹æ¸…ä½ æ‰€è§£é”çš„å‰æ²¿èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-4">æ•™è®­ä¸‰ï¼šè¯„ä¼°ç»ˆç‚¹ï¼Œè€Œéè¿‡ç¨‹</h3>
<p>åœ¨è¯„ä¼°æ™ºèƒ½ä½“æ—¶ï¼Œä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯æ£€æŸ¥å®ƒæ˜¯å¦éµå¾ªäº†ä¸€å¥—éå¸¸å…·ä½“çš„æ­¥éª¤ï¼Œæ¯”å¦‚æ˜¯å¦æŒ‰ç…§ç‰¹å®šé¡ºåºè°ƒç”¨äº†æŸäº›å·¥å…·ã€‚è¿™ç§æ–¹æ³•çœ‹ä¼¼ä¸¥è°¨ï¼Œå®åˆ™éå¸¸è„†å¼±ã€‚</p>
<p>AnthropicæŒ‡å‡ºï¼Œè¿™ç§æ–¹æ³•â€œè¿‡äºåƒµåŒ–ï¼Œä¼šå¯¼è‡´æµ‹è¯•è¿‡äºè„†å¼±â€ï¼Œå› ä¸ºå®ƒä¼šæƒ©ç½šé‚£äº›è¯„ä¼°è®¾è®¡è€…æœªæ›¾é¢„æ–™åˆ°çš„ã€åŒæ ·æœ‰æ•ˆçš„åˆ›æ–°æ–¹æ³•ã€‚ä¸€ä¸ªæ›´ä¼˜è¶Šã€æ›´å…·å‰ç»æ€§çš„åšæ³•æ˜¯ï¼šè¯„ä¼°æ™ºèƒ½ä½“æœ€ç»ˆäº§å‡ºçš„æˆæœï¼ˆoutcomeï¼‰ï¼Œè€Œä¸æ˜¯å®ƒæ‰€é‡‡å–çš„å…·ä½“è·¯å¾„ï¼ˆpathï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸å…¶æ£€æŸ¥ä¸€ä¸ªç¼–ç æ™ºèƒ½ä½“æ˜¯å¦è°ƒç”¨äº†æŸä¸ªç‰¹å®šçš„ç¼–è¾‘å‡½æ•°ï¼Œä¸å¦‚ç›´æ¥è¯„ä¼°å®ƒç”Ÿæˆçš„ä»£ç æ˜¯å¦é€šè¿‡äº†æ‰€æœ‰çš„å•å…ƒæµ‹è¯•ã€‚ä¸“æ³¨äºè¿‡ç¨‹æœ¬èº«å°±æ˜¯ä¸€ç§â€œç›²ç›®é£è¡Œâ€ï¼Œå› ä¸ºå®ƒè®©ä½ å¯¹é‚£äº›æ›´ä¼˜è¶Šã€æœªæ›¾é¢„è§çš„è§£å†³æ–¹æ¡ˆè§†è€Œä¸è§ã€‚è€Œä¸“æ³¨äºæœ€ç»ˆæˆæœï¼Œæ‰æ˜¯è·å¾—æ™ºèƒ½ä½“ç©¶ç«Ÿä¸ºç”¨æˆ·å®Œæˆäº†ä»€ä¹ˆçš„çœŸå®è§†é‡ã€‚è¿™ä¸€æ•™è®­å¯¹äºé‡Šæ”¾AIæ™ºèƒ½ä½“çš„å…¨éƒ¨æ½œåŠ›è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-5">æ•™è®­å››ï¼šä½ çš„æŒ‡æ ‡åœ¨è¡¡é‡ä»€ä¹ˆï¼šä¸€æ¬¡æˆåŠŸè¿˜æ˜¯æ¬¡æ¬¡å¯é ï¼Ÿ</h3>
<p>â€œæˆ‘ä»¬çš„æ™ºèƒ½ä½“æˆåŠŸç‡æ˜¯75%ã€‚â€ è¿™å¥è¯å¬èµ·æ¥ä¸é”™ï¼Œä½†å®ƒå¯èƒ½éšè—ç€å·¨å¤§çš„è¯¯å¯¼æ€§ã€‚ä½ éœ€è¦é—®ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„é—®é¢˜ï¼šè¿™ä¸ªæˆåŠŸç‡è¡¡é‡çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å¤šæ¬¡å°è¯•ä¸­çš„ä¸€æ¬¡æˆåŠŸï¼Œè¿˜æ˜¯æ¯ä¸€æ¬¡å°è¯•éƒ½å¿…é¡»æˆåŠŸï¼Ÿè¿™é‡Œæœ‰ä¸¤ä¸ªå…³é”®æŒ‡æ ‡ï¼špass@k å’Œ pass^kã€‚</p>
<ul>
<li>pass@k è¡¡é‡çš„æ˜¯æ™ºèƒ½ä½“åœ¨ k æ¬¡å°è¯•ä¸­è‡³å°‘æœ‰ä¸€æ¬¡æˆåŠŸçš„å¯èƒ½æ€§ã€‚ä½ å¯ä»¥æŠŠå®ƒæ¯”ä½œâ€œå¤šæ¬¡å°„é—¨ï¼Œåªè¦è¿›ä¸€ä¸ªçƒå°±ç®—æˆåŠŸâ€ã€‚è¿™ä¸ªæŒ‡æ ‡é€‚ç”¨äºé‚£äº›åªè¦æ‰¾åˆ°ä¸€ä¸ªå¯è¡Œè§£å°±è¡Œçš„åœºæ™¯ï¼Œæ¯”å¦‚ä»£ç ç”Ÿæˆæˆ–åˆ›æ„æ„æ€ã€‚</li>
<li>pass^k è¡¡é‡çš„æ˜¯æ™ºèƒ½ä½“åœ¨å…¨éƒ¨ k æ¬¡å°è¯•ä¸­æ¯æ¬¡éƒ½æˆåŠŸçš„æ¦‚ç‡ã€‚è¿™æ›´åƒæ˜¯â€œè¦æ±‚æ¯æ¬¡å°„é—¨éƒ½å¿…é¡»å‘½ä¸­â€ã€‚å¯¹äºéœ€è¦é«˜åº¦å¯é å’Œä¸€è‡´æ€§çš„é¢å‘å®¢æˆ·çš„æ™ºèƒ½ä½“æ¥è¯´ï¼Œè¿™ä¸ªæŒ‡æ ‡è‡³å…³é‡è¦ã€‚</li>
</ul>
<p>è¿™ä¸¤ä¸ªæŒ‡æ ‡çš„å·®å¼‚å·¨å¤§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ™ºèƒ½ä½“çš„å•æ¬¡æˆåŠŸç‡ï¼ˆpass@1ï¼‰æ˜¯75%ï¼Œé‚£ä¹ˆå®ƒè¿ç»­æˆåŠŸ3æ¬¡çš„æ¦‚ç‡ï¼ˆpass^3ï¼‰å°±éª¤é™è‡³42.1875%ï¼Œçº¦ç­‰äº42% (0.75 x 0.75 x 0.75)ã€‚</p>
<p>ä¸ºéœ€è¦é«˜å¯é æ€§çš„é¢å‘å®¢æˆ·çš„æ™ºèƒ½ä½“ä½¿ç”¨ pass@k æŒ‡æ ‡ï¼Œæ˜¯å¯¼è‡´ç”¨æˆ·æµå¤±çš„æ¸©åºŠã€‚å› ä¸º75%çš„å•æ¬¡æˆåŠŸç‡æ©ç›–äº†åœ¨ä»…ä»…ä¸‰æ¬¡äº¤äº’ä¸­ï¼Œæ€§èƒ½ç¨³å®šç‡ç”šè‡³ä¸è¶³50%çš„æ®‹é…·äº‹å®ã€‚è¿™ä¸ä»…ä»…æ˜¯ç»Ÿè®¡å­¦ä¸Šçš„é€‰æ‹©ï¼Œæ›´æ˜¯å†³å®šäº§å“å®šä½çš„æˆ˜ç•¥æŠ‰æ‹©ã€‚ä½ æ˜¯åœ¨æ‰“é€ ä¸€ä¸ªåˆ›æ„æ€§çš„å¤´è„‘é£æš´ä¼™ä¼´ï¼Œåæ¬¡å°è¯•æœ‰ä¸€æ¬¡ç»å¦™ç‚¹å­å°±ç®—å·¨å¤§æˆåŠŸï¼ˆpass@kï¼‰ï¼Ÿè¿˜æ˜¯åœ¨æ„å»ºä¸€ä¸ªå…³é”®ä»»åŠ¡å‹æ”¯æŒåŠ©æ‰‹ï¼Œä»»ä½•ä½äºè¿‘ä¹å®Œç¾çš„å¯é æ€§éƒ½æ˜¯ä¸å¯æ¥å—çš„ï¼ˆpass^kï¼‰ï¼Ÿä½ çš„æŒ‡æ ‡é€‰æ‹©ï¼Œå†³å®šäº†ä½ çš„ä¼˜åŒ–æ–¹å‘ã€‚</p>
<h3 data-id="heading-6">æ•™è®­äº”ï¼šä½ æœ€å¼ºå¤§çš„è¯„ä¼°å·¥å…·ä¸æ˜¯ä»£ç ï¼Œè€Œæ˜¯ä½ çš„çœ¼ç›</h3>
<p>åœ¨è¿½æ±‚è‡ªåŠ¨åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“è¿‡åº¦ä¾èµ–å†·å†°å†°çš„è¯„ä¼°åˆ†æ•°ã€‚ç„¶è€Œï¼Œåˆ†æ•°å¯èƒ½æ˜¯éª—äººçš„ã€‚ä¸€ä¸ªè¯¯å¯¼æ€§çš„ä½åˆ†å¯èƒ½ä¸æ˜¯å› ä¸ºæ™ºèƒ½ä½“å¤±è´¥äº†ï¼Œè€Œæ˜¯å› ä¸ºè¯„ä¼°æœ¬èº«å­˜åœ¨ç¼ºé™·ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒAnthropicåœ¨å¯¹Opus 4.5æ¨¡å‹è¿›è¡ŒCORE-BenchåŸºå‡†æµ‹è¯•æ—¶ï¼Œé€šè¿‡äººå·¥å®¡æŸ¥è®°å½•å‘ç°ï¼Œå…¶åˆ†æ•°ä»æœ€åˆçš„42%è·ƒå‡è‡³95%ã€‚åŸå› ä½•åœ¨ï¼Ÿä»…ä»…æ˜¯ä¿®å¤äº†è¯„ä¼°ç³»ç»Ÿä¸­çš„é—®é¢˜ï¼Œæ¯”å¦‚è¿‡äºåƒµåŒ–çš„è¯„åˆ†æ ‡å‡†ï¼ˆå®ƒä¼šå› ä¸ºâ€œ96.12â€ä¸é¢„æœŸæ ¼å¼â€œ96.124991â€¦â€ä¸å®Œå…¨åŒ¹é…è€Œåˆ¤å®šä¸ºé”™è¯¯ï¼‰ã€‚å¦‚æœæ²¡æœ‰é˜…è¯»å®Œæ•´çš„è¯•éªŒè®°å½•ï¼ˆtranscriptï¼‰ï¼Œå›¢é˜Ÿä¼šé”™è¯¯åœ°è®¤ä¸ºæ¨¡å‹çš„èƒ½åŠ›è¿œæ¯”å®é™…æƒ…å†µè¦å·®ã€‚</p>
<p>â€œé˜…è¯»è®°å½•æ˜¯éªŒè¯ä½ çš„è¯„ä¼°æ˜¯å¦åœ¨è¡¡é‡çœŸæ­£é‡è¦çš„äº‹æƒ…çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯æ™ºèƒ½ä½“å¼€å‘çš„ä¸€é¡¹å…³é”®æŠ€èƒ½ã€‚â€</p>
<p>ä¿¡ä»»åˆ†æ•°è€Œä¸å»é˜…è¯»è®°å½•ï¼Œæ˜¯ç»ˆæçš„â€œç›²ç›®é£è¡Œâ€â€”â€”ä»ªè¡¨ç›˜æ˜¾ç¤ºä½ åœ¨æ€¥é€Ÿä¸‹å ï¼Œä½†å®é™…ä¸Šä½ å¯èƒ½é£å¾—æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½é«˜ï¼Œåªæ˜¯ä½ çš„ä»ªè¡¨åäº†ã€‚è‡ªåŠ¨åŒ–å·¥å…·å‘Šè¯‰ä½ â€œæ˜¯ä»€ä¹ˆâ€ï¼ˆåˆ†æ•°æ˜¯42%ï¼‰ï¼Œä½†åªæœ‰æ·±å…¥å®¡æŸ¥è®°å½•æ‰èƒ½æ­ç¤ºâ€œä¸ºä»€ä¹ˆâ€â€”â€”ä¸æ˜¯å› ä¸ºæ¨¡å‹ä¸è¡Œï¼Œè€Œæ˜¯å› ä¸ºè¯„ä¼°æœ¬èº«å­˜åœ¨ç¼ºé™·ã€‚</p>
<h2 data-id="heading-7">ç»“è®ºï¼šå°†è¯„ä¼°è§†ä¸ºæ ¸å¿ƒæˆ˜ç•¥ï¼Œè€Œéäº‹åå¼¥è¡¥</h2>
<p>æœ‰æ•ˆçš„è¯„ä¼°ä¸æ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„è´Ÿæ‹…ï¼Œè€Œæ˜¯ä¸€ç§èƒ½å¤ŸåŠ é€Ÿå¼€å‘ã€ç¡®ä¿è´¨é‡çš„æ ¸å¿ƒæˆ˜ç•¥èµ„äº§ã€‚å®ƒèƒ½å°†å›¢é˜Ÿæˆå‘˜æ¨¡ç³Šçš„â€œæ„Ÿè§‰å˜å·®äº†â€è½¬åŒ–ä¸ºäº†æ¸…æ™°ã€å¯æ“ä½œçš„è¡¡é‡æŒ‡æ ‡ã€‚</p>
<p>æˆåŠŸçš„AIå›¢é˜Ÿéƒ½æ˜ç™½ä¸€ä¸ªé“ç†ï¼šè¯„ä¼°ä½“ç³»æ˜¯äº§å“ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå…¶é‡è¦æ€§ä¸äºšäºå•å…ƒæµ‹è¯•ä¹‹äºä¼ ç»Ÿè½¯ä»¶ã€‚è€Œä¸”ï¼Œåœ¨æ¨¡å‹èƒ½åŠ›é£é€Ÿå‘å±•çš„æ—¶ä»£ï¼Œä¸€ä¸ªå¼ºå¤§çš„è¯„ä¼°å¥—ä»¶å°±æ˜¯ä½ çš„æŠ¤åŸæ²³ã€‚å®ƒèƒ½è®©ä½ åœ¨å‡ å¤©å†…éªŒè¯å¹¶éƒ¨ç½²æ›´å…ˆè¿›çš„æ¨¡å‹ï¼Œè€Œä½ çš„ç«äº‰å¯¹æ‰‹å¯èƒ½è¿˜åœ¨æ•°å‘¨çš„æ‰‹åŠ¨æµ‹è¯•ä¸­è‹¦è‹¦æŒ£æ‰ã€‚</p>
<p>å¦‚æœä½ çš„è¯„ä¼°ä½“ç³»åæ˜ äº†ä½ æœ€çœ‹é‡çš„ä¸œè¥¿ï¼Œé‚£ä¹ˆå®ƒæ­£åœ¨è®²è¿°ä¸€ä¸ªå…³äºä½ æ™ºèƒ½ä½“çš„æ ¸å¿ƒæ•…äº‹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3è§„èŒƒåŒ–ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7594385386739941395</link>    <guid>https://juejin.cn/post/7594385386739941395</guid>    <pubDate>2026-01-13T06:09:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594385386739941395" data-draft-id="7594403873177354281" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3è§„èŒƒåŒ–ç¤ºä¾‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-13T06:09:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€å°˜å­"/> <meta itemprop="url" content="https://juejin.cn/user/2142267148862040"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3è§„èŒƒåŒ–ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2142267148862040/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€å°˜å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:09:27.000Z" title="Tue Jan 13 2026 06:09:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å±‚çº§åˆ†ç¦»åŸåˆ™</h2>
<h3 data-id="heading-1">1. æ¨¡æ¿å±‚ï¼ˆUIï¼‰åˆ†ç¦»</h3>
<h4 data-id="heading-2">âŒ åä¾‹ï¼šæ¨¡æ¿ä¸­å†™å¤æ‚è¡¨è¾¾å¼å’Œæ•°æ®æ“ä½œ</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- åä¾‹1: æ¨¡æ¿ä¸­å†™å¤æ‚è¡¨è¾¾å¼ --&gt;
    &lt;div&gt;
      {{ goodsList.filter(item =&gt; item.price &gt; 100).map(item =&gt; item.name).join(',') }}
    &lt;/div&gt;
    
    &lt;!-- åä¾‹2: ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä¿®æ”¹æ•°æ® --&gt;
    &lt;button @click="goodsList.push({ id: Date.now(), name: 'æ–°å•†å“', price: 99 })"&gt;
      æ·»åŠ å•†å“
    &lt;/button&gt;
    
    &lt;!-- åä¾‹3: æ¨¡æ¿ä¸­å†™å¤æ‚è®¡ç®— --&gt;
    &lt;div&gt;
      æ€»ä»·: {{ goodsList.reduce((sum, item) =&gt; sum + item.price * item.count, 0).toFixed(2) }}
    &lt;/div&gt;
    
    &lt;!-- åä¾‹4: ç”¨æ ·å¼æ§åˆ¶ä¸šåŠ¡é€»è¾‘ --&gt;
    &lt;div :style="{ display: isVisible ? 'block' : 'none' }"&gt;
      å†…å®¹
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';

const goodsList = ref([
  { id: 1, name: 'å•†å“A', price: 150, count: 2 },
  { id: 2, name: 'å•†å“B', price: 80, count: 1 },
]);
const isVisible = ref(true);
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-3">âœ… æ­£ä¾‹ï¼šæ¨¡æ¿åªè´Ÿè´£æ¸²æŸ“ï¼Œé€»è¾‘æ”¾åœ¨ computed/methods</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- æ­£ä¾‹1: è°ƒç”¨ç®€å•çš„ computed --&gt;
    &lt;div&gt;{{ filteredGoodsNames }}&lt;/div&gt;
    
    &lt;!-- æ­£ä¾‹2: è°ƒç”¨æ–¹æ³•å¤„ç†äº‹ä»¶ --&gt;
    &lt;button @click="handleAddGoods"&gt;æ·»åŠ å•†å“&lt;/button&gt;
    
    &lt;!-- æ­£ä¾‹3: ä½¿ç”¨ computed è®¡ç®—æ€»ä»· --&gt;
    &lt;div&gt;æ€»ä»·: {{ totalPrice }}&lt;/div&gt;
    
    &lt;!-- æ­£ä¾‹4: ç”¨ v-if æ§åˆ¶æ¸²æŸ“ --&gt;
    &lt;div v-if="isVisible"&gt;å†…å®¹&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref, computed } from 'vue';

// åŸå§‹æ•°æ®
const goodsList = ref([
  { id: 1, name: 'å•†å“A', price: 150, count: 2 },
  { id: 2, name: 'å•†å“B', price: 80, count: 1 },
]);
const isVisible = ref(true);

// æ•°æ®å¤„ç†æ”¾åœ¨ computed
const filteredGoodsNames = computed(() =&gt; {
  return goodsList.value
    .filter(item =&gt; item.price &gt; 100)
    .map(item =&gt; item.name)
    .join(',');
});

const totalPrice = computed(() =&gt; {
  return goodsList.value
    .reduce((sum, item) =&gt; sum + item.price * item.count, 0)
    .toFixed(2);
});

// äº‹ä»¶å¤„ç†æ”¾åœ¨ methods
const handleAddGoods = () =&gt; {
  goodsList.value.push({
    id: Date.now(),
    name: 'æ–°å•†å“',
    price: 99,
    count: 1,
  });
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-4">2. é€»è¾‘å±‚ï¼ˆæ•°æ®ï¼‰åˆ†ç¦»</h3>
<h4 data-id="heading-5">âŒ åä¾‹ï¼šåœ¨ data ä¸­å­˜å‚¨æ´¾ç”Ÿæ•°æ®ï¼Œåœ¨æ¨¡æ¿ä¸­ç›´æ¥è°ƒç”¨æ¥å£</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- åä¾‹: åœ¨æ¨¡æ¿ä¸­ç›´æ¥è°ƒç”¨æ¥å£ --&gt;
    &lt;button @click="fetchGoods"&gt;åŠ è½½å•†å“&lt;/button&gt;
    &lt;div v-for="item in formattedList" :key="item.id"&gt;
      {{ item.displayName }} - Â¥{{ item.formattedPrice }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';
import axios from 'axios';

// åä¾‹1: å­˜å‚¨æ ¼å¼åŒ–åçš„æ´¾ç”Ÿæ•°æ®
const formattedList = ref([
  { id: 1, displayName: 'å•†å“A', formattedPrice: '150.00' },
]);

// åä¾‹2: åœ¨äº‹ä»¶ä¸­ç›´æ¥å†™æ¥å£è¯·æ±‚
const fetchGoods = () =&gt; {
  axios.get('/api/goods').then(res =&gt; {
    // æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ ¼å¼åŒ–å¹¶åŒæ­¥åˆ° formattedList
    formattedList.value = res.data.map((item: any) =&gt; ({
      id: item.id,
      displayName: `${item.name} (${item.category})`,
      formattedPrice: item.price.toFixed(2),
    }));
  });
};
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-6">âœ… æ­£ä¾‹ï¼šdata åªå­˜åŸå§‹æ•°æ®ï¼Œcomputed å¤„ç†æ´¾ç”Ÿæ•°æ®ï¼Œæ¥å£æŠ½ç¦»åˆ° api</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;button @click="handleFetchGoods" :loading="loading"&gt;åŠ è½½å•†å“&lt;/button&gt;
    &lt;div v-for="item in formattedGoodsList" :key="item.id"&gt;
      {{ item.displayName }} - Â¥{{ item.formattedPrice }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref, computed } from 'vue';
import { fetchGoodsList } from '@/api/goods'; // æ¥å£æŠ½ç¦»åˆ° api

// æ­£ä¾‹1: data åªå­˜å‚¨åŸå§‹æ•°æ®
const goodsList = ref([]);
const loading = ref(false);

// æ­£ä¾‹2: æ´¾ç”Ÿæ•°æ®ç”¨ computed è‡ªåŠ¨è®¡ç®—
const formattedGoodsList = computed(() =&gt; {
  return goodsList.value.map(item =&gt; ({
    id: item.id,
    displayName: `${item.name} (${item.category})`,
    formattedPrice: item.price.toFixed(2),
  }));
});

// æ­£ä¾‹3: æ¥å£è¯·æ±‚å’Œä¸šåŠ¡é€»è¾‘æŠ½ç¦»
const handleFetchGoods = async () =&gt; {
  try {
    loading.value = true;
    const res = await fetchGoodsList();
    goodsList.value = res.data; // åªæ›´æ–°åŸå§‹æ•°æ®ï¼Œcomputed è‡ªåŠ¨æ›´æ–°
  } catch (error) {
    console.error('åŠ è½½å¤±è´¥', error);
  } finally {
    loading.value = false;
  }
};
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/api/goods.ts - æ¥å£æŠ½ç¦»</span>
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchGoodsList</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> request.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/goods'</span>);
};
</code></pre>
<h3 data-id="heading-7">3. ç»„ä»¶å±‚ï¼ˆä¸šåŠ¡è§£è€¦ï¼‰</h3>
<h4 data-id="heading-8">âŒ åä¾‹ï¼šé€šç”¨ç»„ä»¶åŒ…å«ä¸šåŠ¡é€»è¾‘</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Table.vue - åä¾‹: é€šç”¨ç»„ä»¶ç›´æ¥è°ƒç”¨ä¸šåŠ¡æ¥å£ --&gt;
&lt;template&gt;
  &lt;el-table :data="tableData" :loading="loading"&gt;
    &lt;el-table-column prop="name" label="åç§°" /&gt;
    &lt;el-table-column prop="price" label="ä»·æ ¼" /&gt;
  &lt;/el-table&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref, onMounted } from 'vue';
import axios from 'axios';

// åä¾‹: é€šç”¨ç»„ä»¶å†…éƒ¨ç›´æ¥è°ƒç”¨ä¸šåŠ¡æ¥å£
const tableData = ref([]);
const loading = ref(false);

onMounted(() =&gt; {
  loading.value = true;
  axios.get('/api/goods').then(res =&gt; {
    tableData.value = res.data;
    loading.value = false;
  });
});
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- GoodsList.vue - åä¾‹: çˆ¶ç»„ä»¶ä¼ åŸå§‹æ•°æ®ï¼Œå­ç»„ä»¶å†…éƒ¨æ ¼å¼åŒ– --&gt;
&lt;template&gt;
  &lt;Table :data="goodsList" /&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';
import Table from './Table.vue';
import { fetchGoodsList } from '@/api/goods';

const goodsList = ref([]);

const loadData = async () =&gt; {
  const res = await fetchGoodsList();
  goodsList.value = res.data; // ä¼ åŸå§‹æ•°æ®ç»™å­ç»„ä»¶
};
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-9">âœ… æ­£ä¾‹ï¼šé€šç”¨ç»„ä»¶åªæ¥æ”¶ propsï¼Œä¸šåŠ¡ç»„ä»¶å¤„ç†æ•°æ®</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Table.vue - æ­£ä¾‹: é€šç”¨ç»„ä»¶åªæ¥æ”¶ propsï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ --&gt;
&lt;template&gt;
  &lt;el-table :data="data" :loading="loading" v-bind="$attrs"&gt;
    &lt;slot /&gt;
  &lt;/el-table&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
defineProps&lt;{
  data: any[];
  loading?: boolean;
}&gt;();
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- GoodsList.vue - æ­£ä¾‹: ä¸šåŠ¡ç»„ä»¶å¤„ç†æ•°æ®ï¼Œä¼ ç»™é€šç”¨ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;Table :data="formattedGoodsList" :loading="loading"&gt;
    &lt;el-table-column prop="name" label="åç§°" /&gt;
    &lt;el-table-column prop="price" label="ä»·æ ¼" /&gt;
  &lt;/Table&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref, computed } from 'vue';
import Table from './Table.vue';
import { fetchGoodsList } from '@/api/goods';

const goodsList = ref([]);
const loading = ref(false);

// ä¸šåŠ¡ç»„ä»¶è´Ÿè´£æ•°æ®æ ¼å¼åŒ–
const formattedGoodsList = computed(() =&gt; {
  return goodsList.value.map(item =&gt; ({
    ...item,
    price: `Â¥${item.price.toFixed(2)}`,
  }));
});

const loadData = async () =&gt; {
  try {
    loading.value = true;
    const res = await fetchGoodsList();
    goodsList.value = res.data;
  } finally {
    loading.value = false;
  }
};

loadData();
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-10">äºŒã€æ‹†åˆ†åŸåˆ™</h2>
<h3 data-id="heading-11">1. å‡½æ•°æ‹†åˆ†</h3>
<h4 data-id="heading-12">âŒ åä¾‹ï¼šè¿‡åº¦æ‹†åˆ†ï¼Œé€»è¾‘åˆ†æ•£</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/goods-list/getItem.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getItem</span> = (<span class="hljs-params">list: <span class="hljs-built_in">any</span>[], id: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> list.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> === id);
};

<span class="hljs-comment">// src/utils/goods-list/setItem.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">setItem</span> = (<span class="hljs-params">list: <span class="hljs-built_in">any</span>[], item: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> index = list.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> i.<span class="hljs-property">id</span> === item.<span class="hljs-property">id</span>);
  <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
    list[index] = item;
  }
};

<span class="hljs-comment">// src/utils/goods-list/checkItem.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkItem</span> = (<span class="hljs-params">item: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> item &amp;&amp; item.<span class="hljs-property">price</span> &gt; <span class="hljs-number">0</span>;
};

<span class="hljs-comment">// src/utils/goods-list/filterItem.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">filterItem</span> = (<span class="hljs-params">list: <span class="hljs-built_in">any</span>[], condition: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> list.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">price</span> &gt; condition.<span class="hljs-property">minPrice</span>);
};

<span class="hljs-comment">// GoodsList.vue</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { getItem } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/goods-list/getItem'</span>;
<span class="hljs-keyword">import</span> { setItem } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/goods-list/setItem'</span>;
<span class="hljs-keyword">import</span> { checkItem } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/goods-list/checkItem'</span>;
<span class="hljs-keyword">import</span> { filterItem } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/goods-list/filterItem'</span>;

<span class="hljs-comment">// è°ƒç”¨æ—¶éœ€è¦è·¨æ–‡ä»¶å¼•å…¥ï¼Œé€»è¾‘é“¾è·¯å˜é•¿</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleUpdate</span> = (<span class="hljs-params">id: number, newData: any</span>) =&gt; {
  <span class="hljs-keyword">const</span> item = <span class="hljs-title function_">getItem</span>(goodsList.<span class="hljs-property">value</span>, id);
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">checkItem</span>(item)) {
    <span class="hljs-title function_">setItem</span>(goodsList.<span class="hljs-property">value</span>, { ...item, ...newData });
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-13">âœ… æ­£ä¾‹ï¼šæŒ‰ä¸šåŠ¡é€»è¾‘æ‹†åˆ†ï¼Œå‡½æ•°å†…èš</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- GoodsList.vue --&gt;
&lt;script setup lang="ts"&gt;
import { ref, computed } from 'vue';
import { fetchGoodsList } from '@/api/goods';

const goodsList = ref([]);
const loading = ref(false);

// æ­£ä¾‹: æŒ‰ä¸šåŠ¡é€»è¾‘æ‹†åˆ†æˆæ ¸å¿ƒå‡½æ•°ï¼Œå‡½æ•°å†…èš
const loadGoodsData = async () =&gt; {
  try {
    loading.value = true;
    const res = await fetchGoodsList();
    goodsList.value = formatGoodsData(res.data);
  } catch (error) {
    console.error('åŠ è½½å¤±è´¥', error);
  } finally {
    loading.value = false;
  }
};

// æ ¼å¼åŒ–æ•°æ® - ä»…å½“å‰ç»„ä»¶ä½¿ç”¨ï¼Œå†™åœ¨ç»„ä»¶å†…
const formatGoodsData = (data: any[]) =&gt; {
  return data.map(item =&gt; ({
    ...item,
    displayPrice: `Â¥${item.price.toFixed(2)}`,
    isAvailable: item.stock &gt; 0,
  }));
};

// å¦‚éœ€å¤ç”¨ï¼Œå†æŠ½ç¦»åˆ° utils/goods.ts
loadGoodsData();
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-14">2. ç»„ä»¶æ‹†åˆ†</h3>
<h4 data-id="heading-15">âŒ åä¾‹ï¼šè¿‡åº¦æ‹†åˆ†ï¼Œå¢åŠ é€šä¿¡æˆæœ¬</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- SearchInput.vue --&gt;
&lt;template&gt;
  &lt;el-input v-model="inputValue" @input="handleInput" /&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';

const inputValue = defineModel&lt;string&gt;('modelValue');
const emit = defineEmits(['update:modelValue']);

const handleInput = (value: string) =&gt; {
  emit('update:modelValue', value);
};
&lt;/script&gt;

&lt;!-- SearchButton.vue --&gt;
&lt;template&gt;
  &lt;el-button @click="handleClick"&gt;{{ text }}&lt;/el-button&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
defineProps&lt;{ text: string }&gt;();
const emit = defineEmits(['click']);

const handleClick = () =&gt; {
  emit('click');
};
&lt;/script&gt;

&lt;!-- SearchWrapper.vue --&gt;
&lt;template&gt;
  &lt;div class="search-wrapper"&gt;
    &lt;SearchInput v-model="keyword" /&gt;
    &lt;SearchButton text="æœç´¢" @click="handleSearch" /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';
import SearchInput from './SearchInput.vue';
import SearchButton from './SearchButton.vue';

const keyword = ref('');
const emit = defineEmits(['search']);

const handleSearch = () =&gt; {
  emit('search', keyword.value);
};
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-16">âœ… æ­£ä¾‹ï¼šä¿ç•™å•ä¸ªç»„ä»¶ï¼Œå†…éƒ¨å°è£…</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- SearchBar.vue - æ­£ä¾‹: å•ä¸ªç»„ä»¶ï¼Œé€»è¾‘é—­ç¯ --&gt;
&lt;template&gt;
  &lt;div class="search-bar"&gt;
    &lt;el-input v-model="keyword" placeholder="è¯·è¾“å…¥å…³é”®è¯" clearable /&gt;
    &lt;el-button type="primary" @click="handleSearch"&gt;æœç´¢&lt;/el-button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';

const keyword = ref('');
const emit = defineEmits(['search']);

const handleSearch = () =&gt; {
  emit('search', keyword.value);
};
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-17">ä¸‰ã€ç›®å½•æ‹†åˆ†åŸåˆ™</h2>
<h3 data-id="heading-18">ç»„ä»¶ç›®å½•ç»“æ„è¯´æ˜</h3>
<p>å½“å·¥å…·å‡½æ•°ã€æ ·å¼ã€ç»„åˆå¼å‡½æ•°ä»…è¢«å•ä¸ªç»„ä»¶ä½¿ç”¨æ—¶ï¼Œåº”æ”¾åœ¨è¯¥ç»„ä»¶æ‰€åœ¨ç›®å½•ä¸‹ï¼Œè€Œä¸æ˜¯å…¨å±€ <code>src/utils</code>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">ç»„ä»¶ç›®å½•ç»“æ„ç¤ºä¾‹ï¼š
ProductList/
  â”œâ”€â”€ index.vue              <span class="hljs-comment"># ä¸»ç»„ä»¶</span>
  â”œâ”€â”€ index.scss             <span class="hljs-comment"># ç»„ä»¶æ ·å¼</span>
  â”œâ”€â”€ composables/           <span class="hljs-comment"># ä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„ç»„åˆå¼å‡½æ•°</span>
  â”‚   â”œâ”€â”€ useProductData.ts
  â”‚   â””â”€â”€ useProductFilter.ts
  â”œâ”€â”€ utils/                 <span class="hljs-comment"># ä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„å·¥å…·å‡½æ•°</span>
  â”‚   â”œâ”€â”€ formatProduct.ts
  â”‚   â””â”€â”€ validateProduct.ts
  â””â”€â”€ components/            <span class="hljs-comment"># ä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„å­ç»„ä»¶</span>
      â””â”€â”€ ProductCard.vue
</code></pre>
<h3 data-id="heading-19">1. å·¥å…·å‡½æ•°æ‹†åˆ†</h3>
<h4 data-id="heading-20">âŒ åä¾‹ï¼šä»…å•ç»„ä»¶ä½¿ç”¨çš„å‡½æ•°æ”¾åœ¨å…¨å±€ utils</h4>
<pre><code class="hljs language-bash" lang="bash">src/
  utils/
    product-list/            <span class="hljs-comment"># åä¾‹ï¼šä»…åœ¨ ProductList.vue ä½¿ç”¨</span>
      formatProduct.ts
      filterProduct.ts
      validateProduct.ts
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList.vue --&gt;
&lt;script setup lang="ts"&gt;
import { formatProduct } from '@/utils/product-list/formatProduct';
import { filterProduct } from '@/utils/product-list/filterProduct';
import { validateProduct } from '@/utils/product-list/validateProduct';

// å¼•å…¥è·¯å¾„é•¿ï¼Œä¸”è¿™äº›å‡½æ•°åªåœ¨å½“å‰ç»„ä»¶ä½¿ç”¨
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-21">âœ… æ­£ä¾‹ï¼šä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„å·¥å…·å‡½æ•°æ”¾åœ¨ç»„ä»¶ç›®å½•ä¸‹</h4>
<pre><code class="hljs language-bash" lang="bash">src/views/product/ProductList/
  â”œâ”€â”€ index.vue
  â”œâ”€â”€ utils/                 <span class="hljs-comment"># æ­£ä¾‹ï¼šä»…å½“å‰ç»„ä»¶ä½¿ç”¨</span>
  â”‚   â”œâ”€â”€ formatProduct.ts
  â”‚   â””â”€â”€ filterProduct.ts
  â””â”€â”€ index.scss
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/views/product/ProductList/utils/formatProduct.ts</span>
<span class="hljs-comment">// ä»… ProductList ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> formatProductPrice = (<span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Â¥<span class="hljs-subst">${price.toFixed(<span class="hljs-number">2</span>)}</span>`</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> formatProductName = (<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">category</span>: <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${name}</span> (<span class="hljs-subst">${category}</span>)`</span>;
};
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/views/product/ProductList/utils/filterProduct.ts</span>
<span class="hljs-comment">// ä»… ProductList ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">filterByPriceRange</span> = (<span class="hljs-params">products: <span class="hljs-built_in">any</span>[], min: <span class="hljs-built_in">number</span>, max: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> products.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">price</span> &gt;= min &amp;&amp; p.<span class="hljs-property">price</span> &lt;= max);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">filterByCategory</span> = (<span class="hljs-params">products: <span class="hljs-built_in">any</span>[], category: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> products.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">category</span> === category);
};
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList/index.vue --&gt;
&lt;script setup lang="ts"&gt;
import { ref, computed } from 'vue';
import { formatProductPrice, formatProductName } from './utils/formatProduct';
import { filterByPriceRange } from './utils/filterProduct';

const products = ref([]);

// å¼•å…¥è·¯å¾„çŸ­ï¼Œä¸”æ˜ç¡®è¡¨ç¤ºè¿™äº›å‡½æ•°å±äºå½“å‰ç»„ä»¶
const formattedProducts = computed(() =&gt; {
  return products.value.map(p =&gt; ({
    ...p,
    displayPrice: formatProductPrice(p.price),
    displayName: formatProductName(p.name, p.category),
  }));
});
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-22">2. ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰æ‹†åˆ†</h3>
<h4 data-id="heading-23">âŒ åä¾‹ï¼šä»…å•ç»„ä»¶ä½¿ç”¨çš„ composable æ”¾åœ¨å…¨å±€</h4>
<pre><code class="hljs language-bash" lang="bash">src/
  composables/
    useProductData.ts        <span class="hljs-comment"># åä¾‹ï¼šä»…åœ¨ ProductList.vue ä½¿ç”¨</span>
    useProductFilter.ts      <span class="hljs-comment"># åä¾‹ï¼šä»…åœ¨ ProductList.vue ä½¿ç”¨</span>
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList.vue --&gt;
&lt;script setup lang="ts"&gt;
import { useProductData } from '@/composables/useProductData';
import { useProductFilter } from '@/composables/useProductFilter';

// çœ‹èµ·æ¥åƒæ˜¯å…¨å±€å¯å¤ç”¨çš„ï¼Œä½†å®é™…ä¸Šåªåœ¨å½“å‰ç»„ä»¶ä½¿ç”¨
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-24">âœ… æ­£ä¾‹ï¼šä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„ composable æ”¾åœ¨ç»„ä»¶ç›®å½•ä¸‹</h4>
<pre><code class="hljs language-bash" lang="bash">src/views/product/ProductList/
  â”œâ”€â”€ index.vue
  â”œâ”€â”€ composables/           <span class="hljs-comment"># æ­£ä¾‹ï¼šä»…å½“å‰ç»„ä»¶ä½¿ç”¨</span>
  â”‚   â”œâ”€â”€ useProductData.ts
  â”‚   â””â”€â”€ useProductFilter.ts
  â””â”€â”€ index.scss
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/views/product/ProductList/composables/useProductData.ts</span>
<span class="hljs-comment">// ä»… ProductList ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { fetchProductList } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/product'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useProductData</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> products = <span class="hljs-title function_">ref</span>([]);
  <span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> error = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">loadProducts</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProductList</span>();
      products.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>;
    } <span class="hljs-keyword">catch</span> (err) {
      error.<span class="hljs-property">value</span> = err;
    } <span class="hljs-keyword">finally</span> {
      loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    }
  };

  <span class="hljs-keyword">const</span> formattedProducts = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">return</span> products.<span class="hljs-property">value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> ({
      ...p,
      <span class="hljs-attr">displayPrice</span>: <span class="hljs-string">`Â¥<span class="hljs-subst">${p.price.toFixed(<span class="hljs-number">2</span>)}</span>`</span>,
    }));
  });

  <span class="hljs-keyword">return</span> {
    products,
    formattedProducts,
    loading,
    error,
    loadProducts,
  };
};
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/views/product/ProductList/composables/useProductFilter.ts</span>
<span class="hljs-comment">// ä»… ProductList ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useProductFilter</span> = (<span class="hljs-params">products: <span class="hljs-built_in">any</span>[]</span>) =&gt; {
  <span class="hljs-keyword">const</span> searchKeyword = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> priceRange = <span class="hljs-title function_">ref</span>([<span class="hljs-number">0</span>, <span class="hljs-number">10000</span>]);
  <span class="hljs-keyword">const</span> selectedCategory = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);

  <span class="hljs-keyword">const</span> filteredProducts = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> result = products.<span class="hljs-property">value</span>;

    <span class="hljs-comment">// æŒ‰å…³é”®è¯è¿‡æ»¤</span>
    <span class="hljs-keyword">if</span> (searchKeyword.<span class="hljs-property">value</span>) {
      result = result.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span>
        p.<span class="hljs-property">name</span>.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">includes</span>(searchKeyword.<span class="hljs-property">value</span>.<span class="hljs-title function_">toLowerCase</span>())
      );
    }

    <span class="hljs-comment">// æŒ‰ä»·æ ¼èŒƒå›´è¿‡æ»¤</span>
    result = result.<span class="hljs-title function_">filter</span>(
      <span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">price</span> &gt;= priceRange.<span class="hljs-property">value</span>[<span class="hljs-number">0</span>] &amp;&amp; p.<span class="hljs-property">price</span> &lt;= priceRange.<span class="hljs-property">value</span>[<span class="hljs-number">1</span>]
    );

    <span class="hljs-comment">// æŒ‰åˆ†ç±»è¿‡æ»¤</span>
    <span class="hljs-keyword">if</span> (selectedCategory.<span class="hljs-property">value</span>) {
      result = result.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">category</span> === selectedCategory.<span class="hljs-property">value</span>);
    }

    <span class="hljs-keyword">return</span> result;
  });

  <span class="hljs-keyword">return</span> {
    searchKeyword,
    priceRange,
    selectedCategory,
    filteredProducts,
  };
};
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList/index.vue --&gt;
&lt;script setup lang="ts"&gt;
import { useProductData } from './composables/useProductData';
import { useProductFilter } from './composables/useProductFilter';
import { onMounted } from 'vue';

// å¼•å…¥è·¯å¾„çŸ­ï¼Œä¸”æ˜ç¡®è¡¨ç¤ºè¿™äº› composable å±äºå½“å‰ç»„ä»¶
const { formattedProducts, loading, loadProducts } = useProductData();
const { searchKeyword, priceRange, filteredProducts } = useProductFilter(formattedProducts);

onMounted(() =&gt; {
  loadProducts();
});
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;input v-model="searchKeyword" placeholder="æœç´¢å•†å“" /&gt;
    &lt;div v-for="product in filteredProducts" :key="product.id"&gt;
      {{ product.displayName }} - {{ product.displayPrice }}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-25">3. æ ·å¼æ‹†åˆ†</h3>
<h4 data-id="heading-26">âŒ åä¾‹ï¼šä»…å•ç»„ä»¶ä½¿ç”¨çš„æ ·å¼æ”¾åœ¨å…¨å±€</h4>
<pre><code class="hljs language-bash" lang="bash">src/
  styles/
    product-list.scss        <span class="hljs-comment"># åä¾‹ï¼šä»…åœ¨ ProductList.vue ä½¿ç”¨</span>
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList.vue --&gt;
&lt;style lang="scss"&gt;
@use '@/styles/product-list.scss';
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-27">âœ… æ­£ä¾‹ï¼šä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„æ ·å¼æ”¾åœ¨ç»„ä»¶ç›®å½•ä¸‹</h4>
<pre><code class="hljs language-bash" lang="bash">src/views/product/ProductList/
  â”œâ”€â”€ index.vue
  â”œâ”€â”€ index.scss             <span class="hljs-comment"># æ­£ä¾‹ï¼šç»„ä»¶ä¸»æ ·å¼</span>
  â”œâ”€â”€ styles/                <span class="hljs-comment"># æ­£ä¾‹ï¼šæ ·å¼æ‹†åˆ†ï¼ˆå¦‚æœæ ·å¼è¾ƒå¤šï¼‰</span>
  â”‚   â”œâ”€â”€ variables.scss
  â”‚   â””â”€â”€ mixins.scss
  â””â”€â”€ components/
      â””â”€â”€ ProductCard.vue
      â””â”€â”€ ProductCard.scss
</code></pre>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// src/views/product/ProductList/index.scss</span>
<span class="hljs-comment">// ä»… ProductList ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">@use</span> <span class="hljs-string">'./styles/variables.scss'</span>;
<span class="hljs-keyword">@use</span> <span class="hljs-string">'./styles/mixins.scss'</span>;

<span class="hljs-selector-class">.product-list</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  
  &amp;__header {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  }
  
  &amp;__content {
    <span class="hljs-attribute">display</span>: grid;
    <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">200px</span>, <span class="hljs-number">1</span>fr));
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">16px</span>;
  }
}
</code></pre>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// src/views/product/ProductList/styles/variables.scss</span>
<span class="hljs-comment">// ä»… ProductList ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-variable">$product-card-width</span>: <span class="hljs-number">200px</span>;
<span class="hljs-variable">$product-card-gap</span>: <span class="hljs-number">16px</span>;
<span class="hljs-variable">$product-header-height</span>: <span class="hljs-number">60px</span>;
</code></pre>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// src/views/product/ProductList/styles/mixins.scss</span>
<span class="hljs-comment">// ä»… ProductList ç»„ä»¶ä½¿ç”¨</span>
<span class="hljs-keyword">@mixin</span> product-card-hover {
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.2s</span>;
  
  &amp;<span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">4px</span>);
  }
}
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList/index.vue --&gt;
&lt;template&gt;
  &lt;div class="product-list"&gt;
    &lt;div class="product-list__header"&gt;...&lt;/div&gt;
    &lt;div class="product-list__content"&gt;...&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped lang="scss"&gt;
@import './index.scss';
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-28">4. å­ç»„ä»¶æ‹†åˆ†</h3>
<h4 data-id="heading-29">âŒ åä¾‹ï¼šä»…å•ç»„ä»¶ä½¿ç”¨çš„å­ç»„ä»¶æ”¾åœ¨å…¨å±€ components</h4>
<pre><code class="hljs language-bash" lang="bash">src/
  components/
    ProductCard.vue          <span class="hljs-comment"># åä¾‹ï¼šä»…åœ¨ ProductList.vue ä½¿ç”¨</span>
    ProductFilter.vue        <span class="hljs-comment"># åä¾‹ï¼šä»…åœ¨ ProductList.vue ä½¿ç”¨</span>
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList.vue --&gt;
&lt;script setup lang="ts"&gt;
import ProductCard from '@/components/ProductCard.vue';
import ProductFilter from '@/components/ProductFilter.vue';

// çœ‹èµ·æ¥åƒæ˜¯å…¨å±€ç»„ä»¶ï¼Œä½†å®é™…ä¸Šåªåœ¨å½“å‰ç»„ä»¶ä½¿ç”¨
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-30">âœ… æ­£ä¾‹ï¼šä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„å­ç»„ä»¶æ”¾åœ¨ç»„ä»¶ç›®å½•ä¸‹</h4>
<pre><code class="hljs language-bash" lang="bash">src/views/product/ProductList/
  â”œâ”€â”€ index.vue
  â”œâ”€â”€ components/            <span class="hljs-comment"># æ­£ä¾‹ï¼šä»…å½“å‰ç»„ä»¶ä½¿ç”¨</span>
  â”‚   â”œâ”€â”€ ProductCard.vue
  â”‚   â”œâ”€â”€ ProductCard.scss
  â”‚   â”œâ”€â”€ ProductFilter.vue
  â”‚   â””â”€â”€ ProductFilter.scss
  â””â”€â”€ index.scss
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList/components/ProductCard.vue --&gt;
&lt;!-- ä»… ProductList ç»„ä»¶ä½¿ç”¨ --&gt;
&lt;template&gt;
  &lt;div class="product-card"&gt;
    &lt;img :src="product.image" :alt="product.name" /&gt;
    &lt;h3&gt;{{ product.name }}&lt;/h3&gt;
    &lt;p class="price"&gt;{{ product.displayPrice }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
defineProps&lt;{
  product: any;
}&gt;();
&lt;/script&gt;

&lt;style scoped lang="scss"&gt;
@import './ProductCard.scss';
&lt;/style&gt;
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList/index.vue --&gt;
&lt;script setup lang="ts"&gt;
import ProductCard from './components/ProductCard.vue';
import ProductFilter from './components/ProductFilter.vue';

// å¼•å…¥è·¯å¾„çŸ­ï¼Œä¸”æ˜ç¡®è¡¨ç¤ºè¿™äº›ç»„ä»¶å±äºå½“å‰ç»„ä»¶
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="product-list"&gt;
    &lt;ProductFilter /&gt;
    &lt;ProductCard
      v-for="product in products"
      :key="product.id"
      :product="product"
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-31">5. ä½•æ—¶æŠ½ç¦»åˆ°å…¨å±€</h3>
<p>å½“ä»¥ä¸‹æƒ…å†µå‡ºç°æ—¶ï¼Œå†è€ƒè™‘æŠ½ç¦»åˆ°å…¨å±€ï¼š</p>
<h4 data-id="heading-32">âœ… éœ€è¦å¤ç”¨æ—¶æŠ½ç¦»åˆ°å…¨å±€</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æƒ…å†µ1: å¤šä¸ªç»„ä»¶å¼€å§‹ä½¿ç”¨ç›¸åŒçš„å·¥å…·å‡½æ•°</span>
src/views/product/ProductList/utils/formatProduct.ts  <span class="hljs-comment"># åŸæœ¬åœ¨è¿™é‡Œ</span>
src/views/order/OrderList.vue                        <span class="hljs-comment"># ç°åœ¨ä¹Ÿè¦ç”¨</span>
src/views/cart/CartList.vue                          <span class="hljs-comment"># ç°åœ¨ä¹Ÿè¦ç”¨</span>

<span class="hljs-comment"># åº”è¯¥æŠ½ç¦»åˆ°ï¼š</span>
src/utils/product/formatProduct.ts
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/product/formatProduct.ts</span>
<span class="hljs-comment">// å¤šä¸ªç»„ä»¶å¤ç”¨ï¼ŒæŠ½ç¦»åˆ°å…¨å±€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> formatProductPrice = (<span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Â¥<span class="hljs-subst">${price.toFixed(<span class="hljs-number">2</span>)}</span>`</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> formatProductName = (<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">category</span>: <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${name}</span> (<span class="hljs-subst">${category}</span>)`</span>;
};
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/product/ProductList/index.vue --&gt;
&lt;script setup lang="ts"&gt;
// ä»å…¨å±€å¼•å…¥
import { formatProductPrice } from '@/utils/product/formatProduct';
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/views/order/OrderList.vue --&gt;
&lt;script setup lang="ts"&gt;
// ä»å…¨å±€å¼•å…¥
import { formatProductPrice } from '@/utils/product/formatProduct';
&lt;/script&gt;
</code></pre>
<h2 data-id="heading-33">å®Œæ•´ç¤ºä¾‹ï¼šç»„ä»¶ç›®å½•ç»“æ„</h2>
<pre><code class="hljs language-bash" lang="bash">src/views/product/ProductList/
  â”œâ”€â”€ index.vue                    <span class="hljs-comment"># ä¸»ç»„ä»¶</span>
  â”œâ”€â”€ index.scss                   <span class="hljs-comment"># ç»„ä»¶ä¸»æ ·å¼</span>
  â”‚
  â”œâ”€â”€ composables/                 <span class="hljs-comment"># ä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„ç»„åˆå¼å‡½æ•°</span>
  â”‚   â”œâ”€â”€ useProductData.ts
  â”‚   â”œâ”€â”€ useProductFilter.ts
  â”‚   â””â”€â”€ useProductPagination.ts
  â”‚
  â”œâ”€â”€ utils/                       <span class="hljs-comment"># ä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„å·¥å…·å‡½æ•°</span>
  â”‚   â”œâ”€â”€ formatProduct.ts
  â”‚   â”œâ”€â”€ filterProduct.ts
  â”‚   â””â”€â”€ validateProduct.ts
  â”‚
  â”œâ”€â”€ components/                  <span class="hljs-comment"># ä»…å½“å‰ç»„ä»¶ä½¿ç”¨çš„å­ç»„ä»¶</span>
  â”‚   â”œâ”€â”€ ProductCard/
  â”‚   â”‚   â”œâ”€â”€ index.vue
  â”‚   â”‚   â””â”€â”€ index.scss
  â”‚   â”œâ”€â”€ ProductFilter/
  â”‚   â”‚   â”œâ”€â”€ index.vue
  â”‚   â”‚   â””â”€â”€ index.scss
  â”‚   â””â”€â”€ ProductPagination/
  â”‚       â”œâ”€â”€ index.vue
  â”‚       â””â”€â”€ index.scss
  â”‚
  â””â”€â”€ styles/                      <span class="hljs-comment"># æ ·å¼æ‹†åˆ†ï¼ˆå¦‚æœæ ·å¼è¾ƒå¤šï¼‰</span>
      â”œâ”€â”€ variables.scss
      â”œâ”€â”€ mixins.scss
      â””â”€â”€ animations.scss
</code></pre>
<h2 data-id="heading-34">æ€»ç»“å¯¹æ¯”</h2>



































<table><thead><tr><th>åœºæ™¯</th><th>âŒ åä¾‹ï¼ˆå…¨å±€ï¼‰</th><th>âœ… æ­£ä¾‹ï¼ˆç»„ä»¶ç›®å½•ï¼‰</th></tr></thead><tbody><tr><td>ä»…å•ç»„ä»¶ä½¿ç”¨çš„å·¥å…·å‡½æ•°</td><td><code>src/utils/product-list/format.ts</code></td><td><code>ProductList/utils/format.ts</code></td></tr><tr><td>ä»…å•ç»„ä»¶ä½¿ç”¨çš„ composable</td><td><code>src/composables/useProductData.ts</code></td><td><code>ProductList/composables/useProductData.ts</code></td></tr><tr><td>ä»…å•ç»„ä»¶ä½¿ç”¨çš„æ ·å¼</td><td><code>src/styles/product-list.scss</code></td><td><code>ProductList/index.scss</code></td></tr><tr><td>ä»…å•ç»„ä»¶ä½¿ç”¨çš„å­ç»„ä»¶</td><td><code>src/components/ProductCard.vue</code></td><td><code>ProductList/components/ProductCard.vue</code></td></tr><tr><td>å¤šä¸ªç»„ä»¶å¤ç”¨</td><td>-</td><td>æŠ½ç¦»åˆ°å…¨å±€ <code>src/utils/</code> æˆ– <code>src/composables/</code></td></tr></tbody></table>
<p>åŸåˆ™ï¼š</p>
<ul>
<li>ä»…å½“å‰ç»„ä»¶ä½¿ç”¨ â†’ æ”¾åœ¨ç»„ä»¶ç›®å½•ä¸‹ï¼ˆ<code>utils/</code>ã€<code>composables/</code>ã€<code>components/</code>ã€<code>styles/</code>ï¼‰</li>
<li>å¤šä¸ªç»„ä»¶å¤ç”¨ â†’ æŠ½ç¦»åˆ°å…¨å±€ï¼ˆ<code>src/utils/</code>ã€<code>src/composables/</code>ã€<code>src/components/</code>ï¼‰</li>
</ul>
<h2 data-id="heading-35">æ€»ç»“</h2>
<ul>
<li>æ¨¡æ¿å±‚ï¼šåªè´Ÿè´£æ¸²æŸ“ï¼Œä¸å†™å¤æ‚è¡¨è¾¾å¼å’Œæ•°æ®æ“ä½œ</li>
<li>é€»è¾‘å±‚ï¼šdata å­˜åŸå§‹æ•°æ®ï¼Œcomputed å¤„ç†æ´¾ç”Ÿæ•°æ®ï¼Œæ¥å£æŠ½ç¦»åˆ° api</li>
<li>ç»„ä»¶å±‚ï¼šé€šç”¨ç»„ä»¶åªæ¥æ”¶ propsï¼Œä¸šåŠ¡ç»„ä»¶å¤„ç†æ•°æ®é€»è¾‘</li>
<li>æ‹†åˆ†åŸåˆ™ï¼šæŒ‰ä¸šåŠ¡é€»è¾‘æ‹†åˆ†ï¼Œé¿å…è¿‡åº¦æ‹†åˆ†å¢åŠ å¤æ‚åº¦</li>
</ul>
<p>è¿™äº›ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨è¿™äº›åŸåˆ™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Promiseä¸async/await]]></title>    <link>https://juejin.cn/post/7594385386739974163</link>    <guid>https://juejin.cn/post/7594385386739974163</guid>    <pubDate>2026-01-13T06:13:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594385386739974163" data-draft-id="7594403873177452585" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Promiseä¸async/await"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-13T06:13:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Promiseä¸async/await
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:13:04.000Z" title="Tue Jan 13 2026 06:13:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬ä¸“æ èšç„¦Promiseçš„æ ¸å¿ƒåŸç†ä¸é«˜çº§åº”ç”¨ï¼ŒåŒ…å«ï¼š
âœ“ Promise A+è§„èŒƒæ·±åº¦è§£è¯»
âœ“ æ‰‹å†™å®ç°ä¸æºç åˆ†æ
âœ“ å¼‚æ­¥ç¼–ç¨‹è®¾è®¡æ¨¡å¼
âœ“ æ€§èƒ½è°ƒä¼˜ä¸é”™è¯¯å¤„ç†</p>
</blockquote>
<blockquote>
<p>é€‚åˆæœ‰JavaScriptåŸºç¡€ï¼Œå¸Œæœ›æ·±å…¥å¼‚æ­¥ç¼–ç¨‹çš„å¼€å‘è€…ã€‚æˆ‘ä»¬å°†ç”¨æœ€å°‘çš„ç¯‡å¹…ï¼Œè®²é€æœ€æ ¸å¿ƒçš„çŸ¥è¯†ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†Promiseçš„åŸºç¡€å’ŒåŸç†å®ç°ã€‚ä»ä¸­æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œå³ä½¿æ˜¯é“¾å¼è°ƒç”¨ï¼Œå¤„ç†å¤æ‚çš„å¼‚æ­¥æµç¨‹ä»ç„¶æœ‰äº›ç¹çï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Promiseé“¾å¼è°ƒç”¨</span>
<span class="hljs-title function_">fetchUser</span>(userId)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="hljs-title function_">fetchOrders</span>(user.<span class="hljs-property">id</span>))
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">orders</span> =&gt;</span> <span class="hljs-title function_">processOrders</span>(orders))
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> <span class="hljs-title function_">displayResult</span>(result))
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-title function_">handleError</span>(error))
    .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">cleanup</span>());
</code></pre>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œasync/awaitè¯­æ³•åº”è¿è€Œç”Ÿï¼Œå®ƒè®©æˆ‘ä»¬å¯ä»¥ç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// async/awaitç‰ˆæœ¬</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">displayUserOrders</span>(<span class="hljs-params">userId</span>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>(userId);
        <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchOrders</span>(user.<span class="hljs-property">id</span>);
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">processOrders</span>(orders);
        <span class="hljs-title function_">displayResult</span>(result);
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-title function_">handleError</span>(error);
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_">cleanup</span>();
    }
}
</code></pre>
<h2 data-id="heading-1">asyncï¼šå£°æ˜å¼‚æ­¥å‡½æ•°</h2>
<h3 data-id="heading-2">åŸºæœ¬è¯­æ³•</h3>
<p><code>async</code> å…³é”®å­—ç”¨äºå£°æ˜ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// asyncå‡½æ•°å£°æ˜</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> };
}

<span class="hljs-comment">// asyncå‡½æ•°è¡¨è¾¾å¼</span>
<span class="hljs-keyword">const</span> getData = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'æ•°æ®'</span>;
};

<span class="hljs-comment">// asyncç®­å¤´å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>);
};

<span class="hljs-comment">// asyncæ–¹æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params">id</span>) {
        <span class="hljs-comment">// å¼‚æ­¥æ“ä½œ</span>
    }
}
</code></pre>
<h3 data-id="heading-3">å‡½æ•°è¿”å›å€¼</h3>
<p><code>async</code> å‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ª <code>Promise</code> ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">basicReturn</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>; <span class="hljs-comment">// ç­‰ä»·äº Promise.resolve(42)</span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">promiseReturn</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'hello'</span>); <span class="hljs-comment">// è¿”å›çš„Promise</span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">throwError</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¤±è´¥'</span>); <span class="hljs-comment">// ç­‰ä»·äº Promise.reject(error)</span>
}
</code></pre>
<h2 data-id="heading-4">awaitï¼šç­‰å¾…Promiseè§£å†³</h2>
<h3 data-id="heading-5">åŸºæœ¬ä½¿ç”¨</h3>
<p><code>await</code> åªèƒ½åœ¨ <code>async</code> å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼Œå®ƒä¼šæš‚åœ <code>async</code> å‡½æ•°çš„æ‰§è¡Œï¼Œç­‰å¾…Promiseè§£å†³ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">example</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹æ‰§è¡Œ'</span>);
    
    <span class="hljs-comment">// awaitä¼šæš‚åœæ‰§è¡Œï¼Œç›´åˆ°Promiseè§£å†³</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®è·å–å®Œæˆ:'</span>, result);
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// ç­‰ä»·äº</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">examplePromise</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹æ‰§è¡Œ'</span>);
    
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®è·å–å®Œæˆ:'</span>, result);
        <span class="hljs-keyword">return</span> result;
    });
}
</code></pre>
<h2 data-id="heading-6">é”™è¯¯å¤„ç†ï¼štry-catchçš„å›å½’</h2>
<h3 data-id="heading-7">åŒæ­¥é£æ ¼çš„é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»ŸPromiseé”™è¯¯å¤„ç†ï¼ˆåˆ†æ•£ï¼‰</span>
<span class="hljs-title function_">fetchUser</span>()
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchOrders</span>(user.<span class="hljs-property">id</span>)
            .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">orderError</span> =&gt;</span> {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–è®¢å•å¤±è´¥:'</span>, orderError);
                <span class="hljs-keyword">return</span> [];
            });
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">userError</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·å¤±è´¥:'</span>, userError);
    });

<span class="hljs-comment">// async/awaité”™è¯¯å¤„ç†ï¼ˆé›†ä¸­ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserOrders</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchOrders</span>(user.<span class="hljs-property">id</span>);
            <span class="hljs-keyword">return</span> orders;
        } <span class="hljs-keyword">catch</span> (orderError) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–è®¢å•å¤±è´¥:'</span>, orderError);
            <span class="hljs-keyword">return</span> []; <span class="hljs-comment">// è¿”å›é»˜è®¤å€¼</span>
        }
    } <span class="hljs-keyword">catch</span> (userError) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·å¤±è´¥:'</span>, userError);
        <span class="hljs-keyword">throw</span> userError; <span class="hljs-comment">// é‡æ–°æŠ›å‡º</span>
    }
}

<span class="hljs-comment">// æ›´ç®€æ´çš„ç‰ˆæœ¬</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserOrdersBetter</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>();
        <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchOrders</span>(user.<span class="hljs-property">id</span>);
        <span class="hljs-keyword">return</span> orders;
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ“ä½œå¤±è´¥:'</span>, error);
        <span class="hljs-comment">// æ ¹æ®é”™è¯¯ç±»å‹å¤„ç†</span>
        <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'ç”¨æˆ·'</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç”¨æˆ·ç›¸å…³æ“ä½œå¤±è´¥'</span>);
        }
        <span class="hljs-keyword">return</span> []; <span class="hljs-comment">// é»˜è®¤å€¼</span>
    }
}
</code></pre>
<h3 data-id="heading-8">å¤šawaitæ“ä½œçš„é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">multipleOperations</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ–¹æ³•1ï¼šåˆ†åˆ«å¤„ç†æ¯ä¸ªawaitï¼ˆç²’åº¦ç»†ï¼‰</span>
    <span class="hljs-keyword">let</span> user;
    <span class="hljs-keyword">try</span> {
        user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>();
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·å¤±è´¥'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-keyword">let</span> orders;
    <span class="hljs-keyword">try</span> {
        orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchOrders</span>(user.<span class="hljs-property">id</span>);
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–è®¢å•å¤±è´¥ï¼Œä½†ç”¨æˆ·æ•°æ®æœ‰æ•ˆ:'</span>, user);
        orders = [];
    }
    
    <span class="hljs-comment">// æ–¹æ³•2ï¼šç»Ÿä¸€å¤„ç†ï¼ˆç²’åº¦ç²—ï¼‰</span>
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>();
        <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchOrders</span>(user.<span class="hljs-property">id</span>);
        <span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProducts</span>(orders);
        <span class="hljs-keyword">return</span> { user, orders, products };
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æŸä¸ªæ­¥éª¤å¤±è´¥:'</span>, error);
        <span class="hljs-comment">// æ— æ³•åŒºåˆ†å“ªä¸ªæ­¥éª¤å¤±è´¥</span>
    }
    
    <span class="hljs-comment">// æ–¹æ³•3ï¼šç»„åˆä½¿ç”¨ï¼ˆæ¨èï¼‰</span>
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç”¨æˆ·è·å–å¤±è´¥ï¼Œç»ˆæ­¢æµç¨‹'</span>);
        });
        
        <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchOrders</span>(user.<span class="hljs-property">id</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'è®¢å•è·å–å¤±è´¥ï¼Œä½¿ç”¨ç©ºæ•°ç»„'</span>);
            <span class="hljs-keyword">return</span> [];
        });
        
        <span class="hljs-comment">// å³ä½¿ordersä¸ºç©ºï¼Œä¹Ÿç»§ç»­æ‰§è¡Œ</span>
        <span class="hljs-keyword">const</span> analysis = <span class="hljs-keyword">await</span> <span class="hljs-title function_">analyzeData</span>(user, orders);
        <span class="hljs-keyword">return</span> analysis;
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è‡´å‘½é”™è¯¯:'</span>, error);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h2 data-id="heading-9">åœæ­¢å’Œæ¢å¤æ‰§è¡Œ</h2>
<p><code>async/await</code> ä¸­çœŸæ­£èµ·ä½œç”¨çš„æ˜¯ <code>await</code> ã€‚<code>async</code> å…³é”®å­—åªæ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>));
}
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test2</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">await</span> <span class="hljs-string">'2'</span>);
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">test3</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">3</span>);
}
<span class="hljs-title function_">test</span>();
<span class="hljs-title function_">test2</span>();
<span class="hljs-title function_">test3</span>();
</code></pre>
<p>ä¸Šè¿°ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ï¼š<code>3 2 1</code> ã€‚å› ä¸ºJSè¿è¡Œæ—¶ï¼Œåœ¨ç¢°åˆ° <code>await</code> å…³é”®å­—æ—¶ï¼Œä¼šè®°å½•åœ¨å“ªé‡Œæ‰§è¡Œæš‚åœã€‚ç­‰å¾… <code>await</code> åè¾¹çš„å€¼å¯ä»¥ç”¨äº†ï¼ŒJSè¿è¡Œæ—¶ä¼šå‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¨é€ä¸€ä¸ªä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ä¼šæ¢å¤å‡½æ•°æ‰§è¡Œã€‚</p>
<h2 data-id="heading-10">ç»“è¯­</h2>
<p><code>Promise</code> å’Œ <code>async/await</code> æ˜¯JSå¼‚æ­¥ç¼–ç¨‹çš„é»„é‡‘ç»„åˆï¼š<code>Promise</code> æä¾›äº†åº•å±‚çš„å¼‚æ­¥æŠ½è±¡å’Œç»„åˆèƒ½åŠ›ï¼Œ<code>async/await</code> æä¾›äº†ä¸Šå±‚çš„è¯­æ³•ç³–ï¼Œè®©å¼‚æ­¥ä»£ç æ›´æ˜“è¯»ã€‚å¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ å°è®°1ï¼šç§»åŠ¨ç«¯cssé€‚é…ç›¸å…³é—®é¢˜]]></title>    <link>https://juejin.cn/post/7594403873177534505</link>    <guid>https://juejin.cn/post/7594403873177534505</guid>    <pubDate>2026-01-13T06:17:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594403873177534505" data-draft-id="7594302398687133750" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ å°è®°1ï¼šç§»åŠ¨ç«¯cssé€‚é…ç›¸å…³é—®é¢˜"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2026-01-13T06:17:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åŠé†’"/> <meta itemprop="url" content="https://juejin.cn/user/4319340647165639"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ å°è®°1ï¼šç§»åŠ¨ç«¯cssé€‚é…ç›¸å…³é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4319340647165639/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åŠé†’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:17:13.000Z" title="Tue Jan 13 2026 06:17:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç§»åŠ¨ç«¯ä¸‰ç§åƒç´ </h2>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span>   <span class="hljs-code">`ç‰©ç†åƒç´  (è®¾å¤‡åƒç´ )`</span>ï¼šå±å¹•ç¡¬ä»¶ä¸ŠçœŸå®å­˜åœ¨çš„å‘å…‰ç‚¹ï¼›ç‰¹ç‚¹ï¼šå›ºå®šä¸å˜ï¼ˆæ¯”å¦‚ iPhone 15 çš„ç‰©ç†åƒç´ æ˜¯ 1179Ã—2556ï¼‰ã€‚
<span class="hljs-bullet">-</span>   <span class="hljs-code">`CSS åƒç´  (é€»è¾‘åƒç´ )`</span>ï¼šç½‘é¡µä»£ç ä¸­å†™çš„<span class="hljs-code">`px`</span>å•ä½ï¼›ç‰¹ç‚¹ï¼šå¯è¢« Viewport ç¼©æ”¾ï¼Œæ˜¯ç›¸å¯¹å•ä½ã€‚
<span class="hljs-bullet">-</span>   <span class="hljs-code">`è®¾å¤‡åƒç´ æ¯” (DPR)`</span>ï¼šDPR = ç‰©ç†åƒç´  / CSS åƒç´ ï¼›ç‰¹ç‚¹ï¼šé«˜æ¸…å± (DPR=2/3) ä¸‹ï¼Œ1 ä¸ª CSS åƒç´ å¯¹åº”å¤šä¸ªç‰©ç†åƒç´ ã€‚
</code></pre>
<h2 data-id="heading-1">Viewport(è§†å£)</h2>
<pre><code class="hljs language-markdown" lang="markdown">Viewport æ˜¯æµè§ˆå™¨æ˜¾ç¤ºç½‘é¡µçš„åŒºåŸŸï¼Œç§»åŠ¨ç«¯é»˜è®¤çš„å¸ƒå±€è§†å£ï¼ˆlayout viewportï¼‰å®½åº¦çº¦ 980pxï¼Œç›´æ¥å¯¼è‡´ç½‘é¡µç¼©æ”¾æ˜¾ç¤ºã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡ meta æ ‡ç­¾è®¾ç½®<span class="hljs-strong">**ç†æƒ³è§†å£**</span>ï¼Œè®© CSS åƒç´ å’Œè®¾å¤‡å°ºå¯¸åŒ¹é…ï¼š
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ ¸å¿ƒViewporté…ç½®ï¼Œå¿…é¡»åŠ  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span>&gt;</span>
</code></pre>
<ul>
<li><code>width=device-width</code>ï¼šå¸ƒå±€è§†å£å®½åº¦ç­‰äºè®¾å¤‡å®½åº¦</li>
<li><code>initial-scale=1.0</code>ï¼šåˆå§‹ç¼©æ”¾æ¯”ä¾‹ä¸º 1</li>
<li><code>user-scalable=no</code>ï¼šç¦æ­¢ç”¨æˆ·ç¼©æ”¾ï¼ˆå¯é€‰ï¼Œæ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰</li>
</ul>
<p><strong>âš ï¸æ‰€æœ‰é€‚é…ç”Ÿæ•ˆéƒ½è¦å…ˆé…ç½®å¥½æ­£ç¡®çš„Viewport(width=device-width, initial-scale=1.0)</strong></p>
<h2 data-id="heading-2">å®ç°çœŸå®çš„ 1px è¾¹æ¡†</h2>
<p>é—®é¢˜æ ¹æºï¼šé«˜æ¸…å±ï¼ˆDPR=2ï¼‰ä¸‹ï¼ŒCSS å†™çš„<code>1px</code>ä¼šè¢«æ¸²æŸ“æˆ 2 ä¸ªç‰©ç†åƒç´ ï¼Œå¯¼è‡´è¾¹æ¡†çœ‹èµ·æ¥æ¯”è®¾è®¡ç¨¿ç²—ã€‚</p>
<h5 data-id="heading-3">æ–¹æ¡ˆ 1ï¼šåˆ©ç”¨ transform ç¼©æ”¾ï¼ˆæ¨èï¼Œå…¼å®¹æ€§å¥½ï¼‰</h5>
<p>åŸç†ï¼šå…ˆè®¾ç½®<code>1px</code>è¾¹æ¡†ï¼Œå†é€šè¿‡<code>transform: scale()</code>æŒ‰ DPR æ¯”ä¾‹ç¼©å°ï¼ŒåŒæ—¶ç”¨<code>transform-origin</code>æ§åˆ¶ç¼©æ”¾åŸç‚¹ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é€šç”¨1pxè¾¹æ¡†æ ·å¼ */</span> 
<span class="hljs-selector-class">.border-1px</span> { 
    <span class="hljs-attribute">position</span>: relative; 
    <span class="hljs-comment">/* é˜²æ­¢ç¼©æ”¾åçš„è¾¹æ¡†è¶…å‡ºå®¹å™¨ */</span> 
    <span class="hljs-attribute">overflow</span>: hidden; 
 } 
<span class="hljs-comment">/* ç»™å®¹å™¨æ·»åŠ ä¼ªå…ƒç´ å®ç°è¾¹æ¡† */</span> 
<span class="hljs-selector-class">.border-1px</span><span class="hljs-selector-pseudo">::after</span> { 
    <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>; 
    <span class="hljs-attribute">position</span>: absolute; 
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>; 
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>; 
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; 
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>; 
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e5e5e5</span>; 
    <span class="hljs-comment">/* æ ¹æ®DPRç¼©æ”¾ï¼Œè¿™é‡Œä»¥DPR=2ä¸ºä¾‹ï¼ŒDPR=3åˆ™scale(0.333) */</span> 
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.5</span>); 
    * è®©ç¼©æ”¾åŸç‚¹åœ¨å·¦ä¸Šè§’ï¼Œé¿å…è¾¹æ¡†åç§» */ 
    <span class="hljs-attribute">transform-origin</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span>; 
    <span class="hljs-comment">/* é˜²æ­¢ä¼ªå…ƒç´ è¦†ç›–å†…å®¹ */</span> 
    <span class="hljs-attribute">pointer-events</span>: none; 
}
</code></pre>
<h5 data-id="heading-4">æ–¹æ¡ˆ 2ï¼šåŠ¨æ€è®¡ç®—ï¼ˆé€‚é…æ‰€æœ‰ DPRï¼‰</h5>
<p>ç»“åˆ JS è·å–è®¾å¤‡ DPRï¼ŒåŠ¨æ€è®¾ç½®ç¼©æ”¾æ¯”ä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è·å–è®¾å¤‡DPR </span>
<span class="hljs-keyword">const</span> dpr = <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span> || <span class="hljs-number">1</span>; 
<span class="hljs-comment">// åŠ¨æ€è®¾ç½®Viewportçš„initial-scale </span>
<span class="hljs-keyword">const</span> metaViewport = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'meta[name="viewport"]'</span>); metaViewport.<span class="hljs-property">content</span> = <span class="hljs-string">`width=device-width, initial-scale=<span class="hljs-subst">${<span class="hljs-number">1</span>/dpr}</span>, maximum-scale=<span class="hljs-subst">${<span class="hljs-number">1</span>/dpr}</span>, user-scalable=no`</span>; 
<span class="hljs-comment">// ç»™1pxè¾¹æ¡†å…ƒç´ è®¾ç½®å¯¹åº”ç¼©æ”¾ </span>
<span class="hljs-keyword">const</span> borderElements = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.border-1px'</span>); borderElements.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> { 
    <span class="hljs-keyword">const</span> after = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">getComputedStyle</span>(el, <span class="hljs-string">'::after'</span>); 
    el.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--scale'</span>, <span class="hljs-number">1</span>/dpr); 
    el.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'::after'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`scale(<span class="hljs-subst">${<span class="hljs-number">1</span>/dpr}</span>)`</span>; 
    <span class="hljs-comment">// ç®€åŒ–å†™æ³•ï¼šç›´æ¥ä¿®æ”¹ä¼ªå…ƒç´ æ ·å¼ï¼ˆå®é™…å¼€å‘å¯ç»“åˆCSSå˜é‡ï¼‰ el.style.cssText += `--scale: ${1/dpr};`; </span>
});
</code></pre>
<h2 data-id="heading-5">å®ç°çœŸå®çš„ 12px å­—ä½“å¤§å°</h2>
<p>é—®é¢˜æ ¹æºï¼šå¾ˆå¤šç§»åŠ¨ç«¯æµè§ˆå™¨ï¼ˆå¦‚å¾®ä¿¡å†…ç½®æµè§ˆå™¨ã€Safariï¼‰é»˜è®¤é™åˆ¶æœ€å°å­—å·ä¸º 12pxï¼Œç›´æ¥å†™<code>font-size: 12px</code>åœ¨ä½ DPR è®¾å¤‡ä¸Šå¯èƒ½è¢«å¼ºåˆ¶æ”¾å¤§ï¼Œæˆ–åœ¨é«˜ DPR è®¾å¤‡ä¸Šæ˜¾ç¤ºåå°ã€‚</p>
<h5 data-id="heading-6">æ–¹æ¡ˆ 1ï¼šViewport ç¼©æ”¾é…åˆ remï¼ˆæ¨èï¼‰</h5>
<ol>
<li>å…ˆé€šè¿‡ JS åŠ¨æ€è®¡ç®— rem åŸºå‡†å€¼</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è®¾è®¡ç¨¿åŸºå‡†å®½åº¦ï¼ˆæ¯”å¦‚750pxè®¾è®¡ç¨¿ï¼‰ </span>
<span class="hljs-keyword">const</span> designWidth = <span class="hljs-number">750</span>; 
<span class="hljs-comment">// åŸºå‡†å­—å·ï¼ˆ1rem = 100pxï¼Œæ–¹ä¾¿è®¡ç®—ï¼‰ </span>
<span class="hljs-keyword">const</span> baseFontSize = <span class="hljs-number">100</span>; 
<span class="hljs-keyword">function</span> <span class="hljs-title function_">setRem</span>(<span class="hljs-params"/>) { 
    <span class="hljs-comment">// è·å–è®¾å¤‡å®½åº¦ </span>
    <span class="hljs-keyword">const</span> deviceWidth = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span>; 
    <span class="hljs-comment">// è®¡ç®—å½“å‰remå¯¹åº”çš„åƒç´ å€¼ </span>
    <span class="hljs-keyword">const</span> rem = (deviceWidth / designWidth) * baseFontSize; 
    <span class="hljs-comment">// è®¾ç½®htmlæ ¹å…ƒç´ å­—å· </span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = rem + <span class="hljs-string">'px'</span>; 
} 
<span class="hljs-comment">// åˆå§‹åŒ–æ‰§è¡Œ </span>
<span class="hljs-title function_">setRem</span>(); 
<span class="hljs-comment">// çª—å£å¤§å°å˜åŒ–æ—¶é‡æ–°è®¡ç®— </span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, setRem);
</code></pre>
<ol start="2">
<li>å†™ 12px å­—ä½“ï¼ˆåŸºäº 750px è®¾è®¡ç¨¿ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* 12px = 12/100 = 0.12rem */</span> 
<span class="hljs-selector-class">.text-12px</span> { 
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.12rem</span>; 
    <span class="hljs-comment">/* ç¦æ­¢æµè§ˆå™¨è‡ªåŠ¨è°ƒæ•´æœ€å°å­—å· */</span> 
    -webkit-text-size-adjust: none; 
    text-size-adjust: none; 
}
</code></pre>
<h5 data-id="heading-7">æ–¹æ¡ˆ 2ï¼štransform ç¼©æ”¾ï¼ˆå…¼å®¹æç«¯åœºæ™¯ï¼‰</h5>
<p>å¦‚æœ rem é€‚é…ä¸ç”Ÿæ•ˆï¼Œå¯é€šè¿‡ç¼©æ”¾å®ç°çœŸå® 12pxï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.text-12px</span> { 
    <span class="hljs-comment">/* å…ˆæ”¾å¤§åˆ°24pxï¼ˆé¿å¼€æœ€å°å­—å·é™åˆ¶ï¼‰ï¼Œå†ç¼©æ”¾åˆ°50% */</span> 
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>; 
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.5</span>); 
    <span class="hljs-comment">/* ç¼©æ”¾åä¸å åŸç©ºé—´ */</span> 
    <span class="hljs-attribute">transform-origin</span>: left center; 
    <span class="hljs-comment">/* è¡Œé«˜ä¹Ÿè¦å¯¹åº”è°ƒæ•´ */</span> 
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.2</span>; <span class="hljs-comment">/* 
    é˜²æ­¢æ–‡å­—æ¨¡ç³Š */</span> 
    -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased; 
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gitåˆ†æ”¯ç®¡ç†ä¸ä»£ç åˆå¹¶å®è·µï¼šä¿æŒç‰¹æ€§åˆ†æ”¯ä¸ä¸»åˆ†æ”¯åŒæ­¥]]></title>    <link>https://juejin.cn/post/7594389431836262441</link>    <guid>https://juejin.cn/post/7594389431836262441</guid>    <pubDate>2026-01-13T06:22:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594389431836262441" data-draft-id="7594385386740039699" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gitåˆ†æ”¯ç®¡ç†ä¸ä»£ç åˆå¹¶å®è·µï¼šä¿æŒç‰¹æ€§åˆ†æ”¯ä¸ä¸»åˆ†æ”¯åŒæ­¥"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-13T06:22:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€å°˜å­"/> <meta itemprop="url" content="https://juejin.cn/user/2142267148862040"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gitåˆ†æ”¯ç®¡ç†ä¸ä»£ç åˆå¹¶å®è·µï¼šä¿æŒç‰¹æ€§åˆ†æ”¯ä¸ä¸»åˆ†æ”¯åŒæ­¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2142267148862040/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€å°˜å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:22:59.000Z" title="Tue Jan 13 2026 06:22:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœºæ™¯è¯´æ˜</h2>
<p>åœ¨å›¢é˜Ÿåä½œå¼€å‘ä¸­ï¼Œå¼€å‘è€…ç»å¸¸éœ€è¦åœ¨ç‰¹æ€§åˆ†æ”¯ï¼ˆå¦‚ <code>dev_feature_xxx</code>ï¼‰ä¸Šå®ç°æ–°åŠŸèƒ½ï¼ŒåŒæ—¶éœ€è¦å®šæœŸåŒæ­¥ä¸»åˆ†æ”¯ï¼ˆå¦‚ <code>develop</code>ï¼‰çš„æœ€æ–°ä»£ç ï¼Œé¿å…æœ€ç»ˆåˆå¹¶æ—¶äº§ç”Ÿä¸¥é‡å†²çªã€‚æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªå®é™…æ¡ˆä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å®‰å…¨åœ°å°†ä¸»åˆ†æ”¯æ›´æ–°åˆå¹¶åˆ°ç‰¹æ€§åˆ†æ”¯ï¼Œå¹¶å®Œæˆä»£ç æ¨é€ä¸åˆå¹¶è¯·æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-1">å®Œæ•´æ“ä½œæµç¨‹</h2>
<h3 data-id="heading-2">1. ä¿å­˜å½“å‰å·¥ä½œè¿›åº¦</h3>
<p>åœ¨åˆ‡æ¢åˆ†æ”¯å‰ï¼Œè‹¥å½“å‰å·¥ä½œåŒºæœ‰æœªæäº¤çš„ä¿®æ”¹ï¼Œä½¿ç”¨ <code>git stash -a</code> æš‚å­˜å˜æ›´ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git stash -a
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31314dd4c8e34b2e86c224a6f426c59e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5bCY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768890179&amp;x-signature=xvro%2FuRgvGF9iwS%2BcPwxg8IQ2%2F8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>ä½œç”¨</strong>ï¼šå°†æœªæäº¤çš„ä¿®æ”¹å­˜å…¥æ ˆä¸­ï¼Œå·¥ä½œåŒºæ¢å¤åˆ°æœ€è¿‘ä¸€æ¬¡æäº¤çš„çŠ¶æ€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">2. æ›´æ–°ä¸»åˆ†æ”¯ä»£ç </h3>
<p>åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯ï¼ˆå‡è®¾ä¸»åˆ†æ”¯ä¸º `developï¼‰å¹¶æ‹‰å–è¿œç«¯æœ€æ–°ä»£ç ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git checkout develop      <span class="hljs-comment"># åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯</span>
git pull origin develop   <span class="hljs-comment"># æ‹‰å–è¿œç«¯æœ€æ–°ä»£ç </span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d86bc23d2034f72aea40b75a080d474~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5bCY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768890179&amp;x-signature=Z6jlAW%2FWlecyqet7Q%2BJdFzqtbnY%3D" alt="" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9adba10bbae409e89a32059a75ecd9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5bCY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768890179&amp;x-signature=IOmaWu96REPr%2BsrTguHIjp6SaDA%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼š<code>git pull</code> æ˜¯ <code>git fetch</code> + <code>git merge</code> çš„ç»„åˆæ“ä½œï¼Œå»ºè®®æ˜ç¡®æŒ‡å®šè¿œç¨‹å’Œåˆ†æ”¯åä»¥é¿å…æ­§ä¹‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">3. åˆå¹¶ä¸»åˆ†æ”¯åˆ°ç‰¹æ€§åˆ†æ”¯</h3>
<p>å›åˆ°ç‰¹æ€§åˆ†æ”¯ï¼Œå°†ä¸»åˆ†æ”¯çš„æ›´æ–°åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git checkout dev_feature_mengqingchen_20241126_layer  <span class="hljs-comment"># åˆ‡æ¢å›ç‰¹æ€§åˆ†æ”¯</span>
git merge develop                                      <span class="hljs-comment"># åˆå¹¶ä¸»åˆ†æ”¯ä»£ç </span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d324d8f9b3144565aa901524d72877b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5bCY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768890179&amp;x-signature=RlKnggh2MCWIk1lJV1LlZLdbVPg%3D" alt="" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70538c2eceb84a9998acb0eb4858fc14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5bCY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768890179&amp;x-signature=ws%2FtbrybLMNFJrBgwo3EKy4VE4U%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>å†²çªå¤„ç†</strong>ï¼šè‹¥å­˜åœ¨å†²çªï¼Œéœ€æ‰‹åŠ¨è§£å†³åæ‰§è¡Œ <code>git add</code> å’Œ <code>git commit</code>ã€‚å»ºè®®ä½¿ç”¨ <code>git mergetool</code> å¯è§†åŒ–å·¥å…·ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">4. æ¢å¤æš‚å­˜çš„å·¥ä½œè¿›åº¦</h3>
<p>å°†ä¹‹å‰æš‚å­˜çš„ä¿®æ”¹é‡æ–°åº”ç”¨åˆ°å½“å‰åˆ†æ”¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git stash pop  <span class="hljs-comment"># æ¢å¤æœ€åä¸€æ¬¡æš‚å­˜å†…å®¹ï¼Œå¹¶ä»æ ˆä¸­åˆ é™¤è®°å½•</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09bd95491f604153b30ac3238d6ea800~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5bCY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768890179&amp;x-signature=9vrG%2FSoDdfuP6Eog0OJAD6IysK8%3D" alt="" loading="lazy"/></p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼š<code>git stash apply</code> å¯æ¢å¤ä½†ä¸åˆ é™¤æ ˆè®°å½•ï¼Œ<code>pop</code> æ›´é€‚ç”¨äºä¸€æ¬¡æ€§æ¢å¤åœºæ™¯ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">5. æ¨é€ä»£ç å¹¶åˆ›å»ºåˆå¹¶è¯·æ±‚</h3>
<p>å°†åˆå¹¶åçš„ç‰¹æ€§åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œå¹¶é€šè¿‡ GitLab å‘èµ·åˆå¹¶è¯·æ±‚ï¼ˆMerge Requestï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git push origin dev_feature_mengqingchen_20241126_layer  <span class="hljs-comment"># æ¨é€ç‰¹æ€§åˆ†æ”¯</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9d3e266fe2c4575a16f4cf93f43a85c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5bCY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768890179&amp;x-signature=X0GBqGmagnmtoxplWRHno50ZYgU%3D" alt="" loading="lazy"/></p>
<p><strong>GitLab æ“ä½œ</strong>ï¼š</p>
<ol>
<li>è¿›å…¥é¡¹ç›®ä»“åº“é¡µé¢ï¼Œç‚¹å‡» <code>Merge Request</code>ã€‚</li>
<li>é€‰æ‹©æºåˆ†æ”¯ï¼ˆç‰¹æ€§åˆ†æ”¯ï¼‰ä¸ç›®æ ‡åˆ†æ”¯ï¼ˆ<code>develop</code>ï¼‰ã€‚</li>
<li>å¡«å†™å˜æ›´è¯´æ˜ï¼Œè§¦å‘ CI/CD æµæ°´çº¿ï¼Œç­‰å¾…å®¡æ ¸åˆå¹¶ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3368051d5621465caae7ff2162cf092f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5bCY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768890179&amp;x-signature=JdpIKEXsIwejNUg4i8OfNNytUSA%3D" alt="" loading="lazy"/></li>
</ol>
<hr/>
<h2 data-id="heading-7">å…³é”®ç‚¹æ€»ç»“</h2>
<ol>
<li><strong>åˆ†æ”¯å‘½åè§„èŒƒ</strong>ï¼šæ¨èä½¿ç”¨ <code>feature/username-date-description</code> æ ¼å¼ï¼Œä¾‹å¦‚ <code>feature/mengqingchen-20241126-layer</code>ã€‚</li>
<li><strong>åŠæ—¶åŒæ­¥ä¸»åˆ†æ”¯</strong>ï¼šæ¯å¤©å¼€å§‹å·¥ä½œå‰æ‹‰å–ä¸»åˆ†æ”¯æ›´æ–°ï¼Œå‡å°‘åæœŸå†²çªæ¦‚ç‡ã€‚</li>
<li><strong>å–„ç”¨ Stash æœºåˆ¶</strong>ï¼šåœ¨åˆ‡æ¢åˆ†æ”¯å‰ä¿å­˜å·¥ä½œè¿›åº¦ï¼Œé¿å…å› æœªæäº¤ä»£ç å¯¼è‡´æ“ä½œä¸­æ–­ã€‚</li>
<li><strong>åˆå¹¶é¡ºåºåŸåˆ™</strong>ï¼šå§‹ç»ˆå°†ä¸»åˆ†æ”¯åˆå¹¶åˆ°ç‰¹æ€§åˆ†æ”¯ï¼Œè€Œéåå‘æ“ä½œï¼Œç¡®ä¿ç‰¹æ€§åˆ†æ”¯é€šè¿‡æµ‹è¯•åå†åˆå…¥ä¸»åˆ†æ”¯ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-8">æ‰©å±•å»ºè®®</h2>
<ul>
<li><strong>è‡ªåŠ¨åŒ–æµæ°´çº¿é›†æˆ</strong>ï¼šåœ¨ GitLab ä¸­é…ç½® <code>.gitlab-ci.yml</code>ï¼Œå®ç°ä»£ç æ¨é€åè‡ªåŠ¨è¿è¡Œå•å…ƒæµ‹è¯•å’Œä»£ç æ‰«æã€‚</li>
<li><strong>ä¿æŠ¤ä¸»åˆ†æ”¯</strong>ï¼šé€šè¿‡ä»“åº“è®¾ç½®ç¦æ­¢ç›´æ¥å‘ <code>main</code> åˆ†æ”¯æ¨é€ä»£ç ï¼Œå¼ºåˆ¶ä½¿ç”¨ Merge Request æœºåˆ¶ã€‚</li>
</ul>
<p>é€šè¿‡éµå¾ªä¸Šè¿°æµç¨‹ï¼Œå¼€å‘è€…å¯ä»¥é«˜æ•ˆç®¡ç†å¤šåˆ†æ”¯åä½œï¼Œç¡®ä¿ä»£ç åº“çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Symfony AI v0.2.0 æ­£å¼å‘å¸ƒï¼šåŠŸèƒ½è§£è¯»ä¸å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594403873177747497</link>    <guid>https://juejin.cn/post/7594403873177747497</guid>    <pubDate>2026-01-13T06:37:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594403873177747497" data-draft-id="7594351060615397395" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Symfony AI v0.2.0 æ­£å¼å‘å¸ƒï¼šåŠŸèƒ½è§£è¯»ä¸å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,PHP,Symfony"/> <meta itemprop="datePublished" content="2026-01-13T06:37:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/64217584778579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Symfony AI v0.2.0 æ­£å¼å‘å¸ƒï¼šåŠŸèƒ½è§£è¯»ä¸å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/64217584778579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:37:35.000Z" title="Tue Jan 13 2026 06:37:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsymfony%2Fai" target="_blank" title="https://github.com/symfony/ai" ref="nofollow noopener noreferrer">Symfony AI v0.2.0</a> å·²äº 2026å¹´1æœˆ10æ—¥ æ­£å¼å‘å¸ƒã€‚</p>
<p>å¦‚æœä½ è¿˜åœ¨ä»¥ä¸º PHP åªèƒ½å†™å†™ CRUDï¼Œé‚£ä½ çœŸçš„ OUT äº†ã€‚Symfony AI ç»„ä»¶çš„å‡ºç°ï¼Œæ ‡å¿—ç€ PHP æ­£å¼è¿›å…¥äº†AI åŸç”Ÿå¼€å‘æ—¶ä»£ã€‚v0.2.0 ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„ç‰ˆæœ¬æ›´æ–°ï¼Œå®ƒå¸¦æ¥äº†ç”Ÿäº§ç¯å¢ƒæ€¥éœ€çš„æ•…éšœè½¬ç§»ï¼ˆFailoverï¼‰ã€æ›´å®Œå–„çš„ CLI å·¥å…· Symfony Mate çš„å¤§å¹…å¢å¼ºï¼Œä»¥åŠå¯¹ OpenRouter å’Œ VertexAI çš„æ·±åº¦æ”¯æŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2575d9f0574417b96d7e0c64f410b0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768891055&amp;x-signature=Ep%2B26OXv9AwYSB6zwe%2BjmUO6mTA%3D" alt="" loading="lazy"/></p>
<p>ä»¥ä¸‹æ˜¯ v0.2.0 çš„æ ¸å¿ƒæ›´æ–°è§£è¯»åŠå®æˆ˜æŒ‡å—ã€‚</p>
<h3 data-id="heading-0">v0.2.0 æ ¸å¿ƒæ›´æ–°é€Ÿè§ˆ</h3>
<p>æœ¬æ¬¡æ›´æ–°ä¸»è¦é›†ä¸­åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<h4 data-id="heading-1"><strong>é«˜å¯ç”¨æ€§</strong> <strong>å¢å¼ºï¼šFailoverPlatform</strong></h4>
<ol>
<li>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå•ä¸€ AI æ¥å£ï¼ˆå¦‚ OpenAIï¼‰å¯èƒ½ä¼šå‡ºç°æ³¢åŠ¨ã€‚æ–°ç‰ˆæœ¬å¼•å…¥äº† <code>FailoverPlatform</code>ï¼Œå…è®¸é…ç½®å¤‡ç”¨çº¿è·¯ã€‚å½“ä¸»æ¥å£æ— å“åº”æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ‡æ¢è‡³å¤‡ç”¨å¹³å°ï¼ˆå¦‚ Azure æˆ– Anthropicï¼‰ï¼Œä¿éšœæœåŠ¡è¿ç»­æ€§ã€‚</li>
</ol>
<h4 data-id="heading-2"><strong>Mate ç»„ä»¶å‡çº§ä¸</strong> <strong>å…¼å®¹æ€§</strong> <strong>æ‰©å±•</strong></h4>
<ol>
<li>å¼€å‘åŠ©æ‰‹ Symfony Mate å¾—åˆ°äº†å¤§å¹…æ”¹è¿›ã€‚CLI å‘½ä»¤æ–°å¢äº†è¯¦ç»†æè¿°ï¼Œä¾¿äºè°ƒè¯•ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œv0.2.0 å‘ä¸‹å…¼å®¹äº† Symfony 5.4 å’Œ 6.4ï¼Œè¿™ä½¿å¾—ç»´æŠ¤è€æ—§é¡¹ç›®çš„å›¢é˜Ÿä¹Ÿèƒ½æ¥å…¥ AI èƒ½åŠ›ã€‚</li>
</ol>
<h4 data-id="heading-3"><strong>æ¨¡å‹ä¸å¹³å°æ”¯æŒæ‰©å……</strong></h4>
<ul>
<li><strong>OpenRouter</strong>ï¼šå®Œå–„äº†æµå¼ä¼ è¾“ï¼ˆStreamingï¼‰å’Œç»“æ„åŒ–è¾“å‡ºçš„æ”¯æŒã€‚</li>
<li><strong>VertexAI</strong>ï¼šæ–°å¢ API Key è®¤è¯æ–¹å¼ï¼Œç®€åŒ–äº† Google Cloud çš„æ¥å…¥æµç¨‹ã€‚</li>
<li><strong>Whisper</strong>ï¼šæ”¯æŒ verbose è¾“å‡ºæ¨¡å¼ï¼Œæä¾›æ›´ä¸°å¯Œçš„è¯­éŸ³è½¬å½•å…ƒæ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-4"><strong>æ¥å£å˜æ›´ï¼ˆBreaking Changeï¼‰</strong></h4>
<ol>
<li>éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œ<code>StoreInterface::add()</code> æ–¹æ³•çš„ç­¾åå‘ç”Ÿäº†å˜åŒ–ã€‚æ—§ç‰ˆæœ¬çš„å˜é•¿å‚æ•°å·²è¢«ç§»é™¤ï¼Œç°åœ¨å¿…é¡»ä¼ å…¥ <code>VectorDocument</code> å¯¹è±¡æˆ–æ•°ç»„ã€‚å‡çº§æ—¶éœ€åŒæ­¥ä¿®æ”¹ç›¸å…³ä»£ç ã€‚</li>
</ol>
<h3 data-id="heading-5">å®æˆ˜æŒ‡å—ï¼šæ„å»ºæ™ºèƒ½é—®ç­”æœåŠ¡</h3>
<p>Symfony AI çš„æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯ <strong>"Everything is Configurable"</strong> ï¼ˆä¸€åˆ‡çš†å¯é…ç½®ï¼‰ã€‚å®ƒé€šè¿‡ <code>yaml</code> æ–‡ä»¶å°†å¤æ‚çš„ AI é€»è¾‘æŠ½è±¡åŒ–ã€‚</p>
<h4 data-id="heading-6">1. å®‰è£…ç»„ä»¶</h4>
<p>åœ¨ä½ çš„ Symfony é¡¹ç›®ä¸­ï¼ˆç¡®ä¿å·²é€šè¿‡ ServBay é…ç½®å¥½ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">PHP ç¯å¢ƒ</a>ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash">composer require symfony/ai-bundle
</code></pre>
<h4 data-id="heading-7">2. é…ç½® AI æœåŠ¡</h4>
<p>v0.2.0 çš„é…ç½®æ›´åŠ çµæ´»ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç»å…¸çš„é…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">ai:</span>
    <span class="hljs-comment"># 1. å¹³å°å®šä¹‰</span>
    <span class="hljs-attr">platform:</span>
        <span class="hljs-attr">primary_openai:</span>
            <span class="hljs-attr">openai:</span>
                <span class="hljs-attr">api_key:</span> <span class="hljs-string">'%env(OPENAI_API_KEY)%'</span>
        
        <span class="hljs-attr">backup_azure:</span>
            <span class="hljs-attr">azure:</span>
                <span class="hljs-attr">gpt_deployment:</span>
                    <span class="hljs-attr">base_url:</span> <span class="hljs-string">'%env(AZURE_BASE_URL)%'</span>
                    <span class="hljs-attr">deployment:</span> <span class="hljs-string">'gpt-4o-backup'</span>
                    <span class="hljs-attr">api_key:</span> <span class="hljs-string">'%env(AZURE_KEY)%'</span>
                    <span class="hljs-attr">api_version:</span> <span class="hljs-string">'2024-02-15-preview'</span>

        <span class="hljs-comment"># v0.2 æ–°ç‰¹æ€§ï¼šæ•…éšœè½¬ç§»å¹³å°</span>
        <span class="hljs-attr">production_mix:</span>
            <span class="hljs-attr">failover:</span>
                <span class="hljs-attr">platforms:</span> [<span class="hljs-string">'primary_openai'</span>, <span class="hljs-string">'backup_azure'</span>]

    <span class="hljs-comment"># 2. ä»£ç†å®šä¹‰</span>
    <span class="hljs-attr">agent:</span>
        <span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªç¿»è¯‘åŠ©æ‰‹</span>
        <span class="hljs-attr">translator_bot:</span>
            <span class="hljs-attr">platform:</span> <span class="hljs-string">'ai.platform.production_mix'</span> <span class="hljs-comment"># ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„æ•…éšœè½¬ç§»å¹³å°</span>
            <span class="hljs-attr">model:</span> <span class="hljs-string">'gpt-4o'</span>
            <span class="hljs-attr">prompt:</span>
                <span class="hljs-attr">text:</span> <span class="hljs-string">'ä½ æ˜¯ä¸€ä½ç²¾é€šå¤šå›½è¯­è¨€çš„ç¿»è¯‘ä¸“å®¶ï¼Œè¯·ç›´æ¥è¾“å‡ºç¿»è¯‘ç»“æœï¼Œä¸è¦åŒ…å«å¤šä½™è§£é‡Šã€‚'</span>
                <span class="hljs-comment"># è‹¥éœ€åŠ¨æ€åŠ è½½æç¤ºè¯ï¼Œä¹Ÿå¯ä½¿ç”¨ file: '%kernel.project_dir%/prompts/translator.txt'</span>
            <span class="hljs-attr">temperature:</span> <span class="hljs-number">0.3</span> <span class="hljs-comment"># æ§åˆ¶è¾“å‡ºéšæœºæ€§</span>
</code></pre>
<h4 data-id="heading-8">3. ä¸šåŠ¡ä»£ç é›†æˆ</h4>
<p>é…ç½®å®Œæˆåï¼ŒAI Agent ä¼šè‡ªåŠ¨æ³¨å†Œä¸ºæœåŠ¡ã€‚é€šè¿‡ä¾èµ–æ³¨å…¥å³å¯åœ¨ Service æˆ– Controller ä¸­ä½¿ç”¨ã€‚</p>
<p>ä»¥ä¸‹ä»£ç å±•ç¤ºäº†ä¸€ä¸ªæœåŠ¡ç±»ï¼Œå®ƒå°è£…äº†è°ƒç”¨é€»è¾‘ï¼Œæ¥æ”¶ç”¨æˆ·è¾“å…¥å¹¶è¿”å› AI å“åº”ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span>\<span class="hljs-title class_">Service</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">AI</span>\<span class="hljs-title">Agent</span>\<span class="hljs-title">AgentInterface</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">AI</span>\<span class="hljs-title">Platform</span>\<span class="hljs-title">Message</span>\<span class="hljs-title">Message</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">AI</span>\<span class="hljs-title">Platform</span>\<span class="hljs-title">Message</span>\<span class="hljs-title">MessageBag</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Symfony</span>\<span class="hljs-title">Component</span>\<span class="hljs-title">DependencyInjection</span>\<span class="hljs-title">Attribute</span>\<span class="hljs-title">Autowire</span>;

<span class="hljs-keyword">final</span> <span class="hljs-keyword">readonly</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TranslationService</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        // é€šè¿‡åˆ«åæ³¨å…¥é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„ translator_bot
        #[Autowire(<span class="hljs-params">service: <span class="hljs-string">'ai.agent.translator_bot'</span></span>)]
        <span class="hljs-keyword">private</span> AgentInterface <span class="hljs-variable">$translator</span>
    </span>) </span>{
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">translateText</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$sourceText</span></span>): <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-comment">// æ„å»ºæ¶ˆæ¯ä¸Šä¸‹æ–‡</span>
        <span class="hljs-variable">$conversation</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageBag</span>(
            <span class="hljs-title class_">Message</span>::<span class="hljs-title function_ invoke__">ofUser</span>(<span class="hljs-variable">$sourceText</span>)
        );

        <span class="hljs-comment">// æ‰§è¡Œè°ƒç”¨</span>
        <span class="hljs-variable">$result</span> = <span class="hljs-variable language_">$this</span>-&gt;translator-&gt;<span class="hljs-title function_ invoke__">call</span>(<span class="hljs-variable">$conversation</span>);

        <span class="hljs-comment">// v0.2 æ”¯æŒè·å–æ›´å¤šå…ƒæ•°æ®ï¼Œå¦‚ Token æ¶ˆè€—ï¼ˆéœ€å¹³å°æ”¯æŒï¼‰</span>
        <span class="hljs-comment">// $usage = $result-&gt;getMetadata()-&gt;get('token_usage');</span>

        <span class="hljs-keyword">return</span> <span class="hljs-variable">$result</span>-&gt;<span class="hljs-title function_ invoke__">getContent</span>();
    }
}
</code></pre>
<h3 data-id="heading-9">è¿›é˜¶åŠŸèƒ½ï¼šå¤šæ™ºèƒ½ä½“åä½œï¼ˆMulti-Agentï¼‰</h3>
<p>è¿™æ˜¯ç›®å‰ AI é¢†åŸŸæœ€ç«çš„æ¨¡å¼ã€‚</p>
<p>å¯¹äºå¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œå•ä¸€ Prompt å¾€å¾€éš¾ä»¥èƒœä»»ã€‚v0.2.0 ä¼˜åŒ–äº†å¤šæ™ºèƒ½ä½“ç¼–æ’é…ç½®ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·æ„å›¾å°†è¯·æ±‚åˆ†å‘ç»™ä¸åŒçš„ä¸“ä¸š Agentã€‚</p>
<p><strong>é…ç½®ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">ai:</span>
    <span class="hljs-attr">multi_agent:</span>
        <span class="hljs-attr">support_team:</span>
            <span class="hljs-comment"># ç¼–æ’è€…ï¼šè´Ÿè´£åˆ†æç”¨æˆ·æ„å›¾</span>
            <span class="hljs-attr">orchestrator:</span> <span class="hljs-string">'ai.agent.manager'</span>
            
            <span class="hljs-comment"># åˆ†å‘è§„åˆ™ï¼šæ ¹æ®å…³é”®è¯è‡ªåŠ¨è·¯ç”±</span>
            <span class="hljs-attr">handoffs:</span>
                <span class="hljs-comment"># é‡åˆ°ä»£ç ã€æŠ¥é”™ç­‰è¯æ±‡ï¼Œè½¬äº¤ç»™æŠ€æœ¯ Agent</span>
                <span class="hljs-attr">ai.agent.tech_lead:</span> [<span class="hljs-string">'php'</span>, <span class="hljs-string">'exception'</span>, <span class="hljs-string">'debug'</span>, <span class="hljs-string">'code'</span>]
                <span class="hljs-comment"># é‡åˆ°å‘ç¥¨ã€é€€æ¬¾ç­‰è¯æ±‡ï¼Œè½¬äº¤ç»™è´¢åŠ¡ Agent</span>
                <span class="hljs-attr">ai.agent.finance:</span> [<span class="hljs-string">'invoice'</span>, <span class="hljs-string">'refund'</span>, <span class="hljs-string">'payment'</span>]
            
            <span class="hljs-comment"># é»˜è®¤å…œåº• Agent</span>
            <span class="hljs-attr">fallback:</span> <span class="hljs-string">'ai.agent.general_faq'</span>
</code></pre>
<p>åœ¨ä»£ç ä¸­ï¼Œç›´æ¥æ³¨å…¥ <code>ai.multi_agent.support_team</code> å³å¯ä½¿ç”¨è¿™å¥—æ™ºèƒ½åˆ†å‘ç³»ç»Ÿï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™è·¯ç”±é€»è¾‘ã€‚</p>
<h3 data-id="heading-10">å¸¸ç”¨ CLI å·¥å…·</h3>
<p>v0.2.0 çš„ Mate å·¥å…·åŒ…æä¾›äº†ä¾¿æ·çš„å‘½ä»¤è¡Œè°ƒè¯•åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>ç›´æ¥å¯¹è¯æµ‹è¯•</strong>ï¼šæ— éœ€ç¼–å†™ä»£ç ï¼Œç›´æ¥åœ¨ç»ˆç«¯æµ‹è¯• Agent è¡¨ç°ã€‚</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">php bin/console ai:agent:call translator_bot
</code></pre>
<ul>
<li><strong>å¹³å°è¿é€šæ€§æµ‹è¯•</strong>ï¼šéªŒè¯ API Key å’Œç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ã€‚</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">php bin/console ai:platform:invoke openai gpt-4o <span class="hljs-string">"System check"</span>
</code></pre>
<h3 data-id="heading-11">å®‰è£… Symfony</h3>
<p>Symfony å¯¹ PHP ç¯å¢ƒæ˜¯æœ‰è¦æ±‚çš„ï¼Œéœ€è¦ PHP 8.4 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ç¯å¢ƒã€‚</p>
<p>è¿™ä¸ªå¯ä»¥é€šè¿‡ServBayæ¥ä¸€é”®éƒ¨ç½²ã€‚ServBay æ”¯æŒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com%2Ffeatures%2Fphp" target="_blank" title="https://www.servbay.com/features/php" ref="nofollow noopener noreferrer">ä¸€é”®é…ç½® PHP ç¯å¢ƒ</a>ä»¥åŠ Redisã€PostgreSQL ç­‰å‘é‡å­˜å‚¨æ‰€éœ€çš„åç«¯æœåŠ¡ï¼Œèƒ½æœ‰æ•ˆé¿å…ç¯å¢ƒé…ç½®å¸¦æ¥çš„å¹²æ‰°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d315ef7f505471f988f123269bab2b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768891055&amp;x-signature=%2FTKHYBTmlI76Qlw2YWq3IC%2BBLIY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>Symfony AI v0.2.0 æ˜¯ä¸€ä¸ªä»å®éªŒèµ°å‘æˆç†Ÿçš„ç‰ˆæœ¬ã€‚æ•…éšœè½¬ç§»æœºåˆ¶çš„åŠ å…¥ä½¿å…¶å…·å¤‡äº†ä¸Šç”Ÿäº§ç¯å¢ƒçš„åŸºç¡€ï¼Œè€Œå¯¹æ—§ç‰ˆæœ¬ Symfony çš„å…¼å®¹æ”¯æŒåˆ™æ‰©å¤§äº†å…¶é€‚ç”¨èŒƒå›´ã€‚é…åˆ ServBay å¿«é€Ÿæ­å»ºçš„åŸºç¡€è®¾æ–½ï¼ŒPHP å¼€å‘è€…å¯ä»¥æ›´ä½æˆæœ¬åœ°åœ¨ç°æœ‰é¡¹ç›®ä¸­è½åœ° AI åŠŸèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ä¿®æ”¹DOMçš„é«˜äº®é»‘ç§‘æŠ€ï¼Œä½ å¯èƒ½è¿˜ä¸çŸ¥é“]]></title>    <link>https://juejin.cn/post/7594403873177796649</link>    <guid>https://juejin.cn/post/7594403873177796649</guid>    <pubDate>2026-01-13T06:43:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594403873177796649" data-draft-id="7594482829754466350" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ä¿®æ”¹DOMçš„é«˜äº®é»‘ç§‘æŠ€ï¼Œä½ å¯èƒ½è¿˜ä¸çŸ¥é“"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-13T06:43:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CCç ç "/> <meta itemprop="url" content="https://juejin.cn/user/3800389147179720"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ä¿®æ”¹DOMçš„é«˜äº®é»‘ç§‘æŠ€ï¼Œä½ å¯èƒ½è¿˜ä¸çŸ¥é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3800389147179720/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CCç ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:43:38.000Z" title="Tue Jan 13 2026 06:43:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯CCï¼Œåœ¨è¿™é‡Œæ¬¢è¿å¤§å®¶çš„åˆ°æ¥ï½</p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ä¼ ç»Ÿå®ç°æ–‡æœ¬é«˜äº®æ—¶é€šå¸¸ä½¿ç”¨ <strong>span</strong> æ ‡ç­¾åŒ…è£¹æ–‡æœ¬ï¼Œå†ç»™ span æ ‡ç­¾æ·»åŠ ç›¸åº”é«˜äº®èƒŒæ™¯è‰²ã€‚è¿™ç§æ–¹å¼ä¼šä¿®æ”¹åŸæœ¬çš„ <strong>DOM</strong> ç»“æ„ï¼Œé€»è¾‘å¤æ‚ï¼Œä¹Ÿä¼šé¢‘ç¹å¯¼è‡´é¡µé¢é‡ç»˜ï¼Œæ¶ˆè€—æµè§ˆå™¨æ€§èƒ½ã€‚è€ŒåŸºäº <strong>HighLight</strong> çš„ <strong>CSS</strong> è‡ªå®šä¹‰é«˜äº® <strong>API</strong> çš„è¿™ç§æ–¹å¼å¯ä»¥å®ç°<strong>åœ¨æ¸²æŸ“å±‚å¤„ç†æ–‡æœ¬é«˜äº®ï¼Œæ—¢ä¸å½±å“ DOM æ ‘ï¼Œè€Œä¸”å®Œå…¨ç‹¬ç«‹äºæ–‡æ¡£ç»“æ„</strong>ã€‚</p>
<h2 data-id="heading-1">å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-2">åˆ›å»º Range å¯¹è±¡</h3>
<p>æ ‡è¯†æƒ³è¦é«˜äº®çš„æ–‡æœ¬èŒƒå›´ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;div id=<span class="hljs-string">"foo"</span>&gt;çº¯ <span class="hljs-variable constant_">CSS</span> å®ç°æ–‡æœ¬é«˜äº®&lt;/div&gt;


<span class="hljs-keyword">const</span> parentNode = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"foo"</span>);

<span class="hljs-keyword">const</span> range1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>();
range1.<span class="hljs-title function_">setStart</span>(parentNode, <span class="hljs-number">1</span>);
range1.<span class="hljs-title function_">setEnd</span>(parentNode, <span class="hljs-number">2</span>);

<span class="hljs-keyword">const</span> range2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>();
range2.<span class="hljs-title function_">setStart</span>(parentNode, <span class="hljs-number">4</span>);
range2.<span class="hljs-title function_">setEnd</span>(parentNode, <span class="hljs-number">6</span>);
</code></pre>
<h3 data-id="heading-3">ä¸º Range å¯¹è±¡æ·»åŠ  Highlight å¯¹è±¡</h3>
<p>å¤šä¸ª Range å¯¹è±¡å¯ä»¥ä¸åŒä¸€ä¸ª Highlight å¯¹è±¡å…³è”ï¼Œè¿™æ ·ä¼šä»¥ç›¸åŒæ–¹å¼é«˜äº®æ˜¾ç¤ºå¤šä¸ªæ–‡æœ¬ç‰‡æ®µã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> highlight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Highlight</span>(range1, range2);
</code></pre>
<p>å½“ç„¶ä¹Ÿå¯ä»¥åœ¨æŸäº›åœºæ™¯ä¸‹åˆ›å»ºå¤šä¸ª Highlight å¯¹è±¡ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨åä½œæ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ¯ä¸ªç”¨æˆ·ä½¿ç”¨ä¸åŒçš„æ–‡æœ¬é¢œè‰²ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> user1Highlight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Highlight</span>(user1Range1, user1Range2);
<span class="hljs-keyword">const</span> user2Highlight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Highlight</span>(user2Range1, user2Range2, user2Range3);
</code></pre>
<h3 data-id="heading-4">HighlightRegistry æ³¨å†Œ</h3>
<p>æ³¨å†Œè¡¨æ˜¯ä¸€ä¸ª Map å¯¹è±¡ï¼Œé€šè¿‡åç§°æ³¨å†Œé«˜äº®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">"user-1-highlight"</span>, user1Highlight);
<span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">"user-2-highlight"</span>, user2Highlight);
</code></pre>
<p>å½“ç„¶é™¤äº†æ³¨å†Œä¹‹å¤–ï¼Œä¹Ÿæ”¯æŒåˆ é™¤å’Œæ¸…é™¤ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"user-1-highlight"</span>);
<span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">clear</span>();
</code></pre>
<h3 data-id="heading-5">::highlight()ä¼ªå…ƒç´ å®šä¹‰é«˜äº®æ ·å¼</h3>
<p>ä¸ºæ–‡æœ¬ç‰‡æ®µæ·»åŠ è‡ªå®šä¹‰æ ·å¼è¿›è¡Œé«˜äº®ã€‚</p>
<pre><code class="hljs language-css" lang="css">::<span class="hljs-built_in">highlight</span>(user-<span class="hljs-number">1</span>-highlight) {
  <span class="hljs-attribute">background-color</span>: yellow;
  <span class="hljs-attribute">color</span>: black;
}
::<span class="hljs-built_in">highlight</span>(user-<span class="hljs-number">2</span>-highlight) {
  <span class="hljs-attribute">background-color</span>: black;
  <span class="hljs-attribute">color</span>: yellow;
}
</code></pre>
<h2 data-id="heading-6">åº”ç”¨åœºæ™¯</h2>
<p>è¿™é‡Œä¸¾ä¾‹ä¸¤ä¸ª <strong>CSS</strong> è‡ªå®šä¹‰é«˜äº® <strong>API</strong> çš„åº”ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-7">æœç´¢é«˜äº®æ–‡æœ¬</h3>
<p>åœ¨å¤šæ®µæ–‡æœ¬ä¸­æœç´¢æ£€ç´¢åˆ°æ–‡æœ¬åç›´æ¥é«˜äº®å±•ç¤ºï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥æ‰¾ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;
<span class="hljs-keyword">import</span> { useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.less"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">HighlightText</span> = (<span class="hljs-params">{
  text,
  highlightedWords,
  <span class="hljs-keyword">type</span> = <span class="hljs-string">"text"</span>
}: {
  text: <span class="hljs-built_in">string</span>;
  highlightedWords: <span class="hljs-built_in">string</span>[];
  <span class="hljs-keyword">type</span>?: <span class="hljs-string">"text"</span> | <span class="hljs-string">"html"</span>;
}</span>) =&gt; {
  <span class="hljs-comment">// å°† Node æ”¹ä¸ºæ›´å…·ä½“çš„ HTMLDivElement ä»¥ä¿®å¤ ref ç±»å‹é”™è¯¯</span>
  <span class="hljs-keyword">const</span> textRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>) {
      message.<span class="hljs-title function_">warning</span>(<span class="hljs-string">"CSS Custom Highlight API not supported."</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">clear</span>();

    <span class="hljs-comment">// æ”¯æŒå¤šä¸ªè¯è¯­ï¼šå»é‡ã€trimï¼Œå¹¶è¿‡æ»¤ç©ºå­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">const</span> words = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(highlightedWords.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">w</span>) =&gt;</span> w.<span class="hljs-title function_">trim</span>()).<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>)));
    <span class="hljs-keyword">if</span> (!words.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">if</span> (!textRef.<span class="hljs-property">current</span>) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">const</span> treeWalker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(textRef.<span class="hljs-property">current</span>, <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">SHOW_TEXT</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-attr">allTextNodes</span>: <span class="hljs-title class_">Text</span>[] = [];
    <span class="hljs-keyword">let</span> currentNode = treeWalker.<span class="hljs-title function_">nextNode</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Text</span> | <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">while</span> (currentNode) {
      allTextNodes.<span class="hljs-title function_">push</span>(currentNode);
      currentNode = treeWalker.<span class="hljs-title function_">nextNode</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Text</span> | <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// ä¸ºæ‰€æœ‰è¯è¯­åœ¨æ‰€æœ‰æ–‡æœ¬èŠ‚ç‚¹ä¸­ç”Ÿæˆ range</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">ranges</span>: <span class="hljs-title class_">Range</span>[] = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> el <span class="hljs-keyword">of</span> allTextNodes) {
      <span class="hljs-keyword">const</span> content = el.<span class="hljs-property">textContent</span> || <span class="hljs-string">""</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> word <span class="hljs-keyword">of</span> words) {
        <span class="hljs-keyword">let</span> startPos = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (startPos &lt; content.<span class="hljs-property">length</span>) {
          <span class="hljs-keyword">const</span> index = content.<span class="hljs-title function_">indexOf</span>(word, startPos);
          <span class="hljs-keyword">if</span> (index === -<span class="hljs-number">1</span>) <span class="hljs-keyword">break</span>;
          <span class="hljs-keyword">const</span> range = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>();
          range.<span class="hljs-title function_">setStart</span>(el, index);
          range.<span class="hljs-title function_">setEnd</span>(el, index + word.<span class="hljs-property">length</span>);
          ranges.<span class="hljs-title function_">push</span>(range);
          startPos = index + word.<span class="hljs-property">length</span>;
        }
      }
    }

    <span class="hljs-keyword">if</span> (ranges.<span class="hljs-property">length</span>) {
      <span class="hljs-comment">// ç»Ÿä¸€ç”¨ä¸€ä¸ªé«˜äº®åç§°ï¼Œæ ·å¼åœ¨ ::highlight(search-results) ä¸­å®šä¹‰</span>
      <span class="hljs-keyword">const</span> searchResultsHighlight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Highlight</span>(...ranges);
      <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">"search-results"</span>, searchResultsHighlight);
    }
  }, [highlightedWords, text]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {type === "html" ? (
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{textRef}</span> <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{</span>
        {
          <span class="hljs-attr">__html:</span> <span class="hljs-attr">text</span>
        }
      }&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    ) : (
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{textRef}</span>&gt;</span>{text}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    )}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">HighlightText</span>;
</code></pre>
<h3 data-id="heading-8">æ–‡æœ¬å·®å¼‚å¯¹æ¯”</h3>
<p>å¯¹ä¸¤æ®µæ–‡æœ¬è¿›è¡Œå¯¹æ¯”æ—¶ï¼Œå·¦ä¾§é«˜äº®â€œä¸å­˜åœ¨äºå³ä¾§â€çš„æ–‡æœ¬ä¸ºç»¿è‰²ï¼ˆåˆ é™¤ï¼‰ï¼Œå³ä¾§é«˜äº®â€œå¤šäºå·¦ä¾§â€çš„æ–‡æœ¬ä¸ºçº¢è‰²ï¼ˆæ–°å¢ï¼‰ï¼Œå¯ä»¥ç›´è§‚çœ‹åˆ°å·®å¼‚ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { message } <span class="hljs-keyword">from</span> <span class="hljs-string">"antd"</span>;
<span class="hljs-keyword">import</span> { useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"./index.less"</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">DiffProps</span> = {
  <span class="hljs-attr">left</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">right</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">type</span>?: <span class="hljs-string">"text"</span> | <span class="hljs-string">"html"</span>;
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">TextDiff</span> = (<span class="hljs-params">{ left, right, <span class="hljs-keyword">type</span> = <span class="hljs-string">"text"</span> }: DiffProps</span>) =&gt; {
  <span class="hljs-keyword">const</span> leftRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> rightRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!(<span class="hljs-string">"highlights"</span> <span class="hljs-keyword">in</span> <span class="hljs-variable constant_">CSS</span>)) {
      message.<span class="hljs-title function_">warning</span>(<span class="hljs-string">"CSS Custom Highlight API not supported."</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">collectNodes</span> = (<span class="hljs-params">root: HTMLElement | <span class="hljs-literal">null</span></span>) =&gt; {
      <span class="hljs-keyword">if</span> (!root) <span class="hljs-keyword">return</span> { <span class="hljs-attr">nodes</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-title class_">Text</span>[], <span class="hljs-attr">starts</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>[], <span class="hljs-attr">text</span>: <span class="hljs-string">""</span> };
      <span class="hljs-keyword">const</span> walker = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTreeWalker</span>(root, <span class="hljs-title class_">NodeFilter</span>.<span class="hljs-property">SHOW_TEXT</span>);
      <span class="hljs-keyword">const</span> <span class="hljs-attr">nodes</span>: <span class="hljs-title class_">Text</span>[] = [];
      <span class="hljs-keyword">const</span> <span class="hljs-attr">starts</span>: <span class="hljs-built_in">number</span>[] = [];
      <span class="hljs-keyword">let</span> text = <span class="hljs-string">""</span>;
      <span class="hljs-keyword">let</span> cur = walker.<span class="hljs-title function_">nextNode</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Text</span> | <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">while</span> (cur) {
        nodes.<span class="hljs-title function_">push</span>(cur);
        starts.<span class="hljs-title function_">push</span>(text.<span class="hljs-property">length</span>);
        text += cur.<span class="hljs-property">textContent</span> || <span class="hljs-string">""</span>;
        cur = walker.<span class="hljs-title function_">nextNode</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Text</span> | <span class="hljs-literal">null</span>;
      }
      <span class="hljs-keyword">return</span> { nodes, starts, text };
    };

    <span class="hljs-keyword">const</span> { <span class="hljs-attr">nodes</span>: leftNodes, <span class="hljs-attr">starts</span>: leftStarts, <span class="hljs-attr">text</span>: leftText } = <span class="hljs-title function_">collectNodes</span>(leftRef.<span class="hljs-property">current</span>);
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">nodes</span>: rightNodes, <span class="hljs-attr">starts</span>: rightStarts, <span class="hljs-attr">text</span>: rightText } = <span class="hljs-title function_">collectNodes</span>(rightRef.<span class="hljs-property">current</span>);

    <span class="hljs-keyword">const</span> n = leftText.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> m = rightText.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-attr">dp</span>: <span class="hljs-built_in">number</span>[][] = <span class="hljs-title class_">Array</span>(n + <span class="hljs-number">1</span>)
      .<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>)
      .<span class="hljs-title function_">map</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Array</span>(m + <span class="hljs-number">1</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>));
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) {
        <span class="hljs-keyword">if</span> (leftText[i - <span class="hljs-number">1</span>] === rightText[j - <span class="hljs-number">1</span>]) dp[i][j] = dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;
        <span class="hljs-keyword">else</span> dp[i][j] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dp[i - <span class="hljs-number">1</span>][j], dp[i][j - <span class="hljs-number">1</span>]);
      }
    }

    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Op</span> = { <span class="hljs-attr">t</span>: <span class="hljs-string">"equal"</span> | <span class="hljs-string">"del"</span> | <span class="hljs-string">"add"</span>; ai?: <span class="hljs-built_in">number</span>; bi?: <span class="hljs-built_in">number</span> };
    <span class="hljs-keyword">const</span> <span class="hljs-attr">ops</span>: <span class="hljs-title class_">Op</span>[] = [];
    <span class="hljs-keyword">let</span> i = n,
      j = m;
    <span class="hljs-keyword">while</span> (i &gt; <span class="hljs-number">0</span> || j &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; j &gt; <span class="hljs-number">0</span> &amp;&amp; leftText[i - <span class="hljs-number">1</span>] === rightText[j - <span class="hljs-number">1</span>]) {
        ops.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">t</span>: <span class="hljs-string">"equal"</span>, <span class="hljs-attr">ai</span>: i - <span class="hljs-number">1</span>, <span class="hljs-attr">bi</span>: j - <span class="hljs-number">1</span> });
        i--;
        j--;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; (i === <span class="hljs-number">0</span> || dp[i][j - <span class="hljs-number">1</span>] &gt;= dp[i - <span class="hljs-number">1</span>][j])) {
        ops.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">t</span>: <span class="hljs-string">"add"</span>, <span class="hljs-attr">bi</span>: j - <span class="hljs-number">1</span> });
        j--;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) {
        ops.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">t</span>: <span class="hljs-string">"del"</span>, <span class="hljs-attr">ai</span>: i - <span class="hljs-number">1</span> });
        i--;
      }
    }
    ops.<span class="hljs-title function_">reverse</span>();

    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Span</span> = { <span class="hljs-attr">start</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span> };
    <span class="hljs-keyword">const</span> <span class="hljs-attr">leftDelSpans</span>: <span class="hljs-title class_">Span</span>[] = [];
    <span class="hljs-keyword">const</span> <span class="hljs-attr">rightAddSpans</span>: <span class="hljs-title class_">Span</span>[] = [];
    <span class="hljs-keyword">let</span> posA = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> posB = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">delRunStart</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> delRunLen = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-attr">addRunStart</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> addRunLen = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">flushDel</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (delRunStart !== <span class="hljs-literal">null</span> &amp;&amp; delRunLen &gt; <span class="hljs-number">0</span>) leftDelSpans.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">start</span>: delRunStart, <span class="hljs-attr">length</span>: delRunLen });
      delRunStart = <span class="hljs-literal">null</span>;
      delRunLen = <span class="hljs-number">0</span>;
    };
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">flushAdd</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (addRunStart !== <span class="hljs-literal">null</span> &amp;&amp; addRunLen &gt; <span class="hljs-number">0</span>) rightAddSpans.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">start</span>: addRunStart, <span class="hljs-attr">length</span>: addRunLen });
      addRunStart = <span class="hljs-literal">null</span>;
      addRunLen = <span class="hljs-number">0</span>;
    };

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> op <span class="hljs-keyword">of</span> ops) {
      <span class="hljs-keyword">if</span> (op.<span class="hljs-property">t</span> === <span class="hljs-string">"equal"</span>) {
        <span class="hljs-title function_">flushDel</span>();
        <span class="hljs-title function_">flushAdd</span>();
        posA++;
        posB++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op.<span class="hljs-property">t</span> === <span class="hljs-string">"del"</span>) {
        <span class="hljs-keyword">if</span> (delRunStart === <span class="hljs-literal">null</span>) delRunStart = posA;
        delRunLen++;
        <span class="hljs-title function_">flushAdd</span>();
        posA++;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op.<span class="hljs-property">t</span> === <span class="hljs-string">"add"</span>) {
        <span class="hljs-keyword">if</span> (addRunStart === <span class="hljs-literal">null</span>) addRunStart = posB;
        addRunLen++;
        <span class="hljs-title function_">flushDel</span>();
        posB++;
      }
    }
    <span class="hljs-title function_">flushDel</span>();
    <span class="hljs-title function_">flushAdd</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">locate</span> = (<span class="hljs-params">starts: <span class="hljs-built_in">number</span>[], nodes: Text[], pos: <span class="hljs-built_in">number</span></span>) =&gt; {
      <span class="hljs-keyword">let</span> idx = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">while</span> (idx &lt; nodes.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">const</span> nodeLen = (nodes[idx].<span class="hljs-property">textContent</span> || <span class="hljs-string">""</span>).<span class="hljs-property">length</span>;
        <span class="hljs-keyword">const</span> s = starts[idx];
        <span class="hljs-keyword">if</span> (pos &lt; s + nodeLen) <span class="hljs-keyword">return</span> { <span class="hljs-attr">nodeIndex</span>: idx, <span class="hljs-attr">offset</span>: pos - s };
        idx++;
      }
      <span class="hljs-keyword">const</span> lastIdx = nodes.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">nodeIndex</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, lastIdx), <span class="hljs-attr">offset</span>: (nodes[lastIdx]?.<span class="hljs-property">textContent</span> || <span class="hljs-string">""</span>).<span class="hljs-property">length</span> };
    };

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">spansToRanges</span> = (<span class="hljs-params">spans: Span[], starts: <span class="hljs-built_in">number</span>[], nodes: Text[]</span>) =&gt; {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">ranges</span>: <span class="hljs-title class_">Range</span>[] = [];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> { start, length } <span class="hljs-keyword">of</span> spans) {
        <span class="hljs-keyword">const</span> end = start + length;
        <span class="hljs-keyword">const</span> sLoc = <span class="hljs-title function_">locate</span>(starts, nodes, start);
        <span class="hljs-keyword">const</span> eLoc = <span class="hljs-title function_">locate</span>(starts, nodes, end);
        <span class="hljs-keyword">const</span> r = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>();
        r.<span class="hljs-title function_">setStart</span>(nodes[sLoc.<span class="hljs-property">nodeIndex</span>], sLoc.<span class="hljs-property">offset</span>);
        r.<span class="hljs-title function_">setEnd</span>(nodes[eLoc.<span class="hljs-property">nodeIndex</span>], eLoc.<span class="hljs-property">offset</span>);
        ranges.<span class="hljs-title function_">push</span>(r);
      }
      <span class="hljs-keyword">return</span> ranges;
    };

    <span class="hljs-keyword">const</span> leftRanges = <span class="hljs-title function_">spansToRanges</span>(leftDelSpans, leftStarts, leftNodes);
    <span class="hljs-keyword">const</span> rightRanges = <span class="hljs-title function_">spansToRanges</span>(rightAddSpans, rightStarts, rightNodes);

    <span class="hljs-keyword">if</span> (leftRanges.<span class="hljs-property">length</span>) <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">"diff-del-left"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Highlight</span>(...leftRanges));
    <span class="hljs-keyword">else</span> <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"diff-del-left"</span>);

    <span class="hljs-keyword">if</span> (rightRanges.<span class="hljs-property">length</span>) <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">set</span>(<span class="hljs-string">"diff-add-right"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Highlight</span>(...rightRanges));
    <span class="hljs-keyword">else</span> <span class="hljs-variable constant_">CSS</span>.<span class="hljs-property">highlights</span>.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"diff-add-right"</span>);
  }, [left, right, <span class="hljs-keyword">type</span>]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-diff-container"</span>&gt;</span>
      {type === "html" ? (
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">"text-diff-pane"</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{leftRef}</span>
        <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">__html:</span> <span class="hljs-attr">left</span> }}
        /&gt;</span>
    ) : (
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-diff-pane"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{leftRef}</span>&gt;</span>
        {left}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    )}
      {type === "html" ? (
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">"text-diff-pane"</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">{rightRef}</span>
        <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">__html:</span> <span class="hljs-attr">right</span> }}
        /&gt;</span>
    ) : (
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-diff-pane"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{rightRef}</span>&gt;</span>
        {right}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TextDiff</span>;
</code></pre>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>ç›®å‰æ¥çœ‹ï¼ŒCSS Custom Highlight API å°±æ˜¯ç½‘é¡µæ–‡æœ¬é«˜äº®çš„â€œç¥å™¨â€ã€‚ç‰¹åˆ«é€‚åˆé‚£äº›éœ€è¦ç–¯ç‹‚æ ‡è®°ã€åˆä¸èƒ½åŠ¨åŸæ–‡æ¡£ç»“æ„çš„åº”ç”¨ï¼Œæ¯”å¦‚åœ¨çº¿æ–‡æ¡£ã€ä»£ç ç¼–è¾‘å™¨ã€‚åªè¦æµè§ˆå™¨æ”¯æŒï¼Œç”¨å®ƒå°±å¯¹äº†ï¼Œç»å¯¹æ˜¯æœªæ¥çš„è¶‹åŠ¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸å†è´¹è„‘, æ‹†è§£ AI çš„æ•°å­¦å·¥å…·, è¯ é‡Šå‡½æ•°, å‘é‡, çŸ©é˜µå’Œç¥ç»ç½‘ç»œçš„å…³ç³»]]></title>    <link>https://juejin.cn/post/7593356633637863458</link>    <guid>https://juejin.cn/post/7593356633637863458</guid>    <pubDate>2026-01-11T23:51:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593356633637863458" data-draft-id="7593573617647222836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸å†è´¹è„‘, æ‹†è§£ AI çš„æ•°å­¦å·¥å…·, è¯ é‡Šå‡½æ•°, å‘é‡, çŸ©é˜µå’Œç¥ç»ç½‘ç»œçš„å…³ç³»"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC,LLM"/> <meta itemprop="datePublished" content="2026-01-11T23:51:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°åˆ»å›"/> <meta itemprop="url" content="https://juejin.cn/user/572216818014568"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸å†è´¹è„‘, æ‹†è§£ AI çš„æ•°å­¦å·¥å…·, è¯ é‡Šå‡½æ•°, å‘é‡, çŸ©é˜µå’Œç¥ç»ç½‘ç»œçš„å…³ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/572216818014568/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°åˆ»å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-11T23:51:38.000Z" title="Sun Jan 11 2026 23:51:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-11
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½, æˆ‘æ˜¯å°åˆ»å›. ä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€ä¸ªå¾ˆå¤š AI çˆ±å¥½è€…å®¹æ˜“å›°æƒ‘çš„é—®é¢˜, å‡½æ•°, å‘é‡, çŸ©é˜µä¸ç¥ç»ç½‘ç»œä¹‹é—´åˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»?</p>
<p>ä¸å°‘æœ‹å‹æ¥è§¦ AI æ—¶, å¸¸ä¼šè¢«ä¸€è¿ä¸²æ•°å­¦æ¦‚å¿µç»•å¾—æ™•å¤´è½¬å‘. ä¸Šä¸€ç§’æ˜¯ "å‡½æ•°", ä¸‹ä¸€ç§’æ˜¯ "å‘é‡", è¿‡ä¸€ä¼šåˆå‡ºç° "çŸ©é˜µ", ç´§æ¥ç€åˆæ˜¯ "ç¥ç»ç½‘ç»œ". è‡ªå·±ä¼¼ä¹æ¯ä¸ªæ¦‚å¿µéƒ½æ‡‚ä¸€ç‚¹, ä½†æ”¾åœ¨ä¸€èµ·å°±æˆäº†ä¸€å›¢ä¹±éº».</p>
<p>ä»Šå¤©, æˆ‘ä»¬å°±ä»æœ€åŸºç¡€çš„æ¦‚å¿µå‡ºå‘, ä¸€æ­¥æ­¥æŠŠè¿™äº›çŸ¥è¯†ç‚¹ä¸²è”èµ·æ¥, æ¢³ç†å‡ºä¸€æ¡æ¸…æ™°çš„é€»è¾‘é“¾, å¸®ä½ çœ‹æ‡‚è¿™äº›æ•°å­¦æ¦‚å¿µçš„å…³ç³».</p>
<blockquote>
<p>é˜…è¯»æœ¬æ–‡å‰, æœ€å¥½å¯¹å‘é‡, çŸ©é˜µæœ‰ä¸€ä¸ªåŸºç¡€äº†è§£, é˜…è¯»ä½“éªŒä¼šæ›´å¥½:</p>
<p>ä¸ç†Ÿæ‚‰å‘é‡, å¯ä»¥çœ‹æˆ‘çš„æ–‡ç« : <a href="https://juejin.cn/post/7577795545441009698" target="_blank" title="https://juejin.cn/post/7577795545441009698">ä¸å†è´¹è„‘ï¼Œå†™ç»™çˆ±å¥½è€…çš„ AI å‘é‡ (Vector) å…¥é—¨è¯¾</a></p>
<p>ä¸ç†Ÿæ‚‰çŸ©é˜µ, å¯ä»¥çœ‹æˆ‘çš„æ–‡ç« : <a href="https://juejin.cn/post/7588109656042651694" target="_blank" title="https://juejin.cn/post/7588109656042651694">ä¸å†è´¹è„‘, å†™ç»™ AI çˆ±å¥½è€…çš„çŸ©é˜µ (Matrix) å…¥é—¨æŒ‡å—</a></p>
</blockquote>
<h2 data-id="heading-0">1 ä»å‡½æ•°è¯´èµ·, AI çš„æœ¬è´¨æ˜¯ç”¨å‡½æ•°åˆ»ç”»ä¸–ç•Œè§„å¾‹</h2>
<p>è¦ç†æ¸…è¿™äº›æ¦‚å¿µ, æˆ‘ä»¬é¦–å…ˆè¦å›åˆ°æœ€æ ¹æœ¬çš„æ•°å­¦å·¥å…·<strong>å‡½æ•°</strong>ä¸Š. å…¶å®äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒç›®æ ‡å¾ˆç®€å•, <strong>ç”¨å‡½æ•°åˆ»ç”»ç°å®ä¸–ç•Œçš„è§„å¾‹.</strong></p>
<p>è¿™ä¸ªç›®æ ‡å¯ä»¥ç®€åŒ–ä¸º "è¾“å…¥-è¾“å‡º" çš„è½¬æ¢è¿‡ç¨‹, è¾“å…¥æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span></span></span></span></span>, è¾“å‡ºæ˜¯ç»è¿‡å‡½æ•°è®¡ç®—çš„ç»“æœ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>, ä¸­é—´çš„è½¬æ¢è¿‡ç¨‹å°±æ˜¯å‡½æ•°.</p>
<p>è¿™é‡Œçš„è¾“å…¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span></span></span></span></span> å¯ä»¥æ˜¯ç°å®ä¸–ç•Œçš„å„ç§æ•°æ®, æ¯”å¦‚è‹¹æœçš„é‡é‡, å›¾ç‰‡çš„åƒç´ å€¼ç­‰; è€Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span> åˆ™æ˜¯æˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„ç»“æœ, æ¯”å¦‚è‹¹æœçš„æ€»ä»·, å›¾ç‰‡çš„åˆ†ç±»æ ‡ç­¾ (æ˜¯çŒ«è¿˜æ˜¯ç‹—) ç­‰. AI è¦åšçš„æ ¸å¿ƒå·¥ä½œ, å°±æ˜¯æ‰¾å‡ºåˆé€‚çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>, å®Œæˆä»è¾“å…¥åˆ°è¾“å‡ºçš„è½¬æ¢.</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯, ç°ä»£ AI å¹¶æ²¡æœ‰æ‰¾åˆ°ç»å¯¹ç²¾å‡†çš„å‡½æ•°, æ‰¾åˆ°çš„åªæ˜¯è¿‘ä¼¼çš„å‡½æ•°, è¿™ç§ "è¿‘ä¼¼" æ¶‰åŠåˆ°æ¦‚ç‡è®ºçš„ç›¸å…³çŸ¥è¯†, æœ¬æ–‡ä¸ºäº†èšç„¦æ ¸å¿ƒé€»è¾‘é“¾, æš‚ä¸å±•å¼€è¿™éƒ¨åˆ†å†…å®¹.</p>
</blockquote>
<h2 data-id="heading-1">2 ä¸€å…ƒå‡½æ•°ä¸çº¿æ€§å…³ç³»</h2>
<p>è¦æ‰¾ AI éœ€è¦çš„å‡½æ•°, æˆ‘ä»¬å…ˆä»æœ€ç®€å•çš„è§„å¾‹å…¥æ‰‹. ç°å®ä¸­æœ€å®¹æ˜“ç†è§£çš„è§„å¾‹æ˜¯çº¿æ€§å…³ç³», å¯¹åº”çš„æ•°å­¦å·¥å…·æ˜¯çº¿æ€§å‡½æ•°, è¡¨è¾¾å¼ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>w</mi><mi>x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">f(x) = wx + b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span>. è¿™é‡Œçš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span> æ˜¯ä¸¤ä¸ªå…³é”®å‚æ•°.</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span></span> æ˜¯ "æƒé‡", å¯ä»¥ç†è§£ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span></span></span></span></span> å¯¹ç»“æœçš„å½±å“ç¨‹åº¦.</li>
<li>b æ˜¯ "åç½®", å¯ä»¥ç†è§£ä¸ºä¸ä¾èµ–è¾“å…¥çš„å›ºå®šçš„åŸºå‡†å€¼.</li>
</ul>
<p>ä¸¾ç”Ÿæ´»ä¾‹å­, å‡å¦‚ 1 æ–¤è‹¹æœå– 5 å…ƒé’±, é‚£ä¹ˆä¹° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span></span></span></span></span> æ–¤è‹¹æœçš„æ€»ä»· <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span>, å°±å¯ä»¥ç”¨çº¿æ€§å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>5</mn><mi>x</mi><mo>+</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f(x) = 5x + 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">5</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span> è¡¨ç¤º.</p>
<ul>
<li>è¿™é‡Œçš„æƒé‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">w=5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">5</span></span></span></span></span>, ä»£è¡¨æ¯æ–¤è‹¹æœçš„ä»·æ ¼å¯¹æ€»ä»·çš„å½±å“;</li>
<li>åç½® <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">b=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span>, å› ä¸ºä¹° 0 æ–¤è‹¹æœæ—¶, æ€»ä»·è‡ªç„¶ä¸º 0, æ²¡æœ‰é¢å¤–çš„å›ºå®šæˆæœ¬. (å¦‚æœä¾‹å­æ˜¯æ‰“è½¦, èµ·æ­¥è´¹ä¸º 10 å—, åç½®å°±æ˜¯ 10).</li>
</ul>
<h2 data-id="heading-2">3 å•è¾“å‡ºçš„å¤šå…ƒå‡½æ•°ä¸å‘é‡</h2>
<p>åˆšæ‰è‹¹æœçš„ä¾‹å­,æ˜¯ "å•è¾“å…¥ (å•å…ƒ), å•è¾“å‡º" çš„æƒ…å†µ. ä½†å®é™…ç”Ÿæ´»ä¸­, æƒ…å†µå…¶å®æ›´å¤æ‚, æˆ‘ä»¬æ›´å®¹æ˜“é‡è§çš„ "å¤šè¾“å…¥ (å¤šå…ƒ), å•è¾“å‡º" çš„æƒ…å†µ.</p>
<p>æ¯”å¦‚é€šè¿‡ "æˆ¿é—´æ•°é‡, æˆ¿é—´é¢ç§¯, æ¥¼å±‚é«˜åº¦" è¿™ä¸‰ä¸ªè¾“å…¥, é¢„æµ‹ "æˆ¿å±‹æ€»ä»·" è¿™ä¸€ä¸ªè¾“å‡º.</p>
<p>è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">x_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åˆ†åˆ«ä»£è¡¨ä¸‰ä¸ªè¾“å…¥, å¯¹åº”çš„å‡½æ•°è¡¨è¾¾å¼ä¸º:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x_1, x_2, x_3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mspace width="1em"/><mo>=</mo><msub><mi>w</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><msub><mi>w</mi><mn>3</mn></msub><msub><mi>x</mi><mn>3</mn></msub><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">\quad = w_1x_1 + w_2x_2 + w_3x_3 + b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mspace" style="margin-right:1em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span></p>
<p>å…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">w_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">w_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">w_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åˆ†åˆ«æ˜¯ä¸‰ä¸ªè¾“å…¥å¯¹åº”çš„æƒé‡ (æ¯”å¦‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">w_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> ä»£è¡¨æˆ¿é—´é¢ç§¯å¯¹æˆ¿ä»·çš„å½±å“åŠ›åº¦), <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span> æ˜¯åç½®é¡¹.</p>
<p>å¦‚æœæ¨å¹¿åˆ° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">n</span></span></span></span></span> ä¸ªè¾“å…¥çš„åœºæ™¯, å‡½æ•°è¡¨è¾¾å¼å†™ä¸º:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x_1, x_2, ...x_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">...</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mspace width="1em"/><mo>=</mo><msub><mi>w</mi><mn>1</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><msub><mi>w</mi><mi>n</mi></msub><msub><mi>x</mi><mi>n</mi></msub><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">\quad = w_1x_1 + w_2x_2 + ... + w_nx_n + b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mspace" style="margin-right:1em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span></p>
<p>æˆ‘ä»¬å‘ç°, å½“è¾“å…¥å˜é‡å¢å¤šå, è¡¨è¾¾å¼å°±å˜å¾—å†—é•¿äº†, è¿™æ—¶å€™éœ€è¦ä¸€ç§å·¥å…·æ¥ç®€åŒ–è¡¨è¾¾.</p>
<p><strong>å‘é‡</strong>å°±æ˜¯è¿™ä¸ªå…³é”®å·¥å…·:</p>
<ul>
<li>æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰è¾“å…¥  <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x_1, x_2, ..., x_n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">]</span></span></span></span></span> æ‰“åŒ…, ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">x</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span></span></span></span></span> (å°å†™å­—æ¯åŠ ç²—) è¡¨ç¤º, å®ƒå°±æ˜¯è¾“å…¥å‘é‡;</li>
<li>å†æŠŠæ‰€æœ‰æƒé‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><msub><mi>w</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>w</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>w</mi><mi>n</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[w_1, w_2, ..., w_n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">]</span></span></span></span></span> æ‰“åŒ…, ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">w</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{w}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.02778em;">w</span></span></span></span></span></span></span> (å°å†™å­—æ¯åŠ ç²—) è¡¨ç¤º, å®ƒå°±æ˜¯æƒé‡å‘é‡.</li>
</ul>
<p>é€šè¿‡ç‚¹ä¹˜è¿ç®— (æœ¬è´¨æ˜¯å¯¹åº”å…ƒç´ ç›¸ä¹˜åæ±‚å’Œ), åŸæœ¬å†—é•¿çš„è¡¨è¾¾å¼å°±è¢«ç®€åŒ–ä¸º:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi mathvariant="bold-italic">x</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold-italic">w</mi><mo>â‹…</mo><mi mathvariant="bold-italic">x</mi><mo>+</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">f(\boldsymbol{x}) = \boldsymbol{w} \cdot \boldsymbol{x} + b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.4445em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.02778em;">w</span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal">b</span></span></span></span></span></p>
<p>è¿™é‡Œå¯ä»¥æ˜ç¡®ä¸€ä¸ªå…³ç³», ä¸€å…ƒå‡½æ•°æ˜¯å¤šå…ƒå‡½æ•°çš„ç‰¹æ®Šæƒ…å†µ, å½“è¾“å…¥å‘é‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">x</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span></span></span></span></span> åªæœ‰ 1 ç»´æ—¶, å¤šå…ƒå‡½æ•°å°±é€€åŒ–æˆäº†ä¸€å…ƒå‡½æ•°.</p>
<p>è¿™é‡Œå‘é‡çš„æ ¸å¿ƒä½œç”¨, å°±æ˜¯æŠŠå¤šä¸ªå‚æ•°æ‰“åŒ…æ•´åˆ, è®©å¤æ‚çš„å‡½æ•°è¡¨è¾¾å¼æ›´ç®€æ´, æ›´é€šç”¨.</p>
<h2 data-id="heading-3">4 å¤šè¾“å‡ºçš„å¤šå…ƒå‡½æ•°ä¸çŸ©é˜µ</h2>
<p>å‰é¢é¢„æµ‹ "æˆ¿å±‹æ€»ä»·" çš„ä¾‹å­æ˜¯ "å¤šè¾“å…¥, å•è¾“å‡º", ä½†ç°å®ç”Ÿæ´»ä¸­, æˆ‘ä»¬è¿˜å¸¸å¸¸ä¼šé‡åˆ° "å¤šè¾“å…¥, å¤šè¾“å‡º" çš„åœºæ™¯.</p>
<p>åŒæ ·ä»¥æˆ¿å±‹ä¸ºä¾‹å­, æˆ‘ä»¬éœ€è¦é€šè¿‡ "æˆ¿é—´æ•°é‡, æˆ¿é—´é¢ç§¯, æ¥¼å±‚é«˜åº¦" è¿™ä¸‰ä¸ªè¾“å…¥, é¢„æµ‹ "æˆ¿å±‹æ€»ä»·, æœˆç§Ÿé‡‘é¢" ä¸¤ä¸ªè¾“å‡º.</p>
<p>è¿™ç§æƒ…å†µä¸‹, æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªè¾“å‡ºå•ç‹¬æ„å»ºä¸€ä¸ªå¤šå…ƒå‡½æ•°, å½¢æˆæ–¹ç¨‹ç»„:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>f</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mn>11</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>12</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><msub><mi>w</mi><mn>13</mn></msub><msub><mi>x</mi><mn>3</mn></msub><mo>+</mo><msub><mi>b</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>f</mi><mn>2</mn></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi>w</mi><mn>21</mn></msub><msub><mi>x</mi><mn>1</mn></msub><mo>+</mo><msub><mi>w</mi><mn>22</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><msub><mi>w</mi><mn>23</mn></msub><msub><mi>x</mi><mn>3</mn></msub><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">\begin{cases}
f_1(x_1, x_2, x_3) = w_{11}x_1 + w_{12}x_2 + w_{13}x_3 + b_1 \\
f_2(x_1, x_2, x_3) = w_{21}x_1 + w_{22}x_2 + w_{23}x_3 + b_2
\end{cases}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">13</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">21</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">23</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span/></span></span></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>å…¶ä¸­:</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f_1(x_1, x_2, x_3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> æ˜¯é¢„æµ‹æˆ¿å±‹æ€»ä»·çš„å‡½æ•°, è€Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>2</mn></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>3</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f_2(x_1, x_2, x_3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> æ˜¯é¢„æµ‹æœˆç§Ÿé‡‘é¢çš„å‡½æ•°;</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">w_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> è¡¨ç¤ºç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> ä¸ªè¾“å‡ºå¯¹åº”çš„ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> ä¸ªè¾“å…¥çš„æƒé‡ (æ¯”å¦‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>12</mn></msub></mrow><annotation encoding="application/x-tex">w_{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯æˆ¿é—´é¢ç§¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">x_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å¯¹æˆ¿å±‹æ€»ä»· <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">f_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„å½±å“æƒé‡);</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">b_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">b_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> åˆ™æ˜¯å¯¹åº”ä¸¤ä¸ªè¾“å‡ºçš„åç½®é¡¹</li>
</ul>
<p>è§‚å¯Ÿè¿™ä¸ªæ–¹ç¨‹ç»„ä¼šå‘ç°, å¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">w_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span> æå–å‡ºæ¥, ä¼šå½¢æˆä¸€ä¸ª 2 è¡Œ 3 åˆ—çš„ "æƒé‡é˜µåˆ—", å†æŠŠä¸¤ä¸ªè¾“å‡º, ä¸‰ä¸ªè¾“å…¥, ä¸¤ä¸ªæƒé‡æ‰“åŒ…æˆå‘é‡, æ–¹ç¨‹ç»„å°±å¼€å§‹ç”¨çŸ©é˜µä¹˜æ³•ç®€åŒ–è¡¨ç¤º:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>f</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>f</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>w</mi><mn>11</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>w</mi><mn>12</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>w</mi><mn>13</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>w</mi><mn>21</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>w</mi><mn>22</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>w</mi><mn>23</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>â‹…</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>x</mi><mn>3</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>+</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>b</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>b</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
f_1 \\
f_2
\end{bmatrix} = \begin{bmatrix}
w_{11} &amp; w_{12} &amp; w_{13} \\
w_{21} &amp; w_{22} &amp; w_{23} \\
\end{bmatrix} \cdot \begin{bmatrix}
x_1 \\
x_2 \\
x_3
\end{bmatrix} + \begin{bmatrix}
b_1 \\
b_2
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">21</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">22</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">13</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">23</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></div>
<p>æˆ‘ä»¬æŠŠè¿™ä¸ª "æƒé‡é˜µåˆ—" ç§°ä¸º<strong>çŸ©é˜µ</strong>ï¼Œç”¨å¤§å†™ç²—ä½“å­—æ¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">W</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{W}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">W</span></span></span></span></span></span></span> è¡¨ç¤º, åŒæ—¶ç”¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">f</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{f}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11042em;">f</span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">x</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span></span></span></span></span> å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">b</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">b</span></span></span></span></span></span></span> è¡¨ç¤ºç«–ç€æ’çš„è¾“å‡ºå‘é‡, è¾“å…¥å‘é‡å’Œåç½®å‘é‡, æ–¹ç¨‹ç»„å¯ä»¥ç®€åŒ–ä¸º:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">f</mi><mo>=</mo><mi mathvariant="bold-italic">W</mi><mo>â‹…</mo><mi mathvariant="bold-italic">x</mi><mo>+</mo><mi mathvariant="bold-italic">b</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{f} = \boldsymbol{W} \cdot \boldsymbol{x} + \boldsymbol{b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11042em;">f</span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6861em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">W</span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">b</span></span></span></span></span></span></span></p>
<p>è¿™é‡Œè¦æ˜ç¡®æ ¸å¿ƒå…³ç³», <strong>çŸ©é˜µ</strong>æœ¬è´¨æ˜¯<strong>å‘é‡</strong>çš„ç»„åˆ, æŠŠå¤šä¸ªå‘é‡æ¨ªç€æˆ–è€…ç«–ç€æ’, å°±å½¢æˆäº†çŸ©é˜µ. åè¿‡æ¥, å‘é‡ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯ 1 è¡Œ n åˆ—, æˆ–è€… n è¡Œ 1 åˆ—çš„çŸ©é˜µ.</p>
<p>çŸ©é˜µçš„æ ¸å¿ƒä½œç”¨, å°±æ˜¯æŠŠ "å¤šè¾“å…¥, å¤šè¾“å‡º" çš„å¤æ‚åœºæ™¯, ç”¨ä¸€å¥—æ ‡å‡†çš„è¿ç®—ç»Ÿä¸€æ•´åˆ. å¤§å¹…åº¦æå‡ AI å¤„ç†å¤æ‚ä»»åŠ¡çš„æ•ˆç‡.</p>
<h2 data-id="heading-4">5 éçº¿æ€§å…³ç³»ä¸æ¿€æ´»å‡½æ•°</h2>
<p>å‰é¢æˆ‘ä»¬è®¨è®ºçš„éƒ½æ˜¯çº¿æ€§å…³ç³», ä½†ç°å®ç”Ÿæ´»çš„è§„å¾‹å¤§å¤šæ•°éƒ½æ˜¯éçº¿æ€§çš„.</p>
<p>ä¸¾ä¸ªä¾‹å­, äººçš„å¹´é¾„å’Œæ”¶å…¥çš„å…³ç³». 20 å²ä¹‹å‰, æ”¶å…¥å¯èƒ½å¾ˆä½ç”šè‡³ä¸ºé›¶; 20~40 å²ä¹‹é—´, æ”¶å…¥ä¼šå¿«é€Ÿå¢é•¿; 40å²ä¹‹å, æ”¶å…¥å¯èƒ½è¶‹äºç¨³å®šç”šè‡³ç¼“æ…¢ä¸‹é™.</p>
<p>è¿™ç§ "ä¸æŒ‰æ¯”ä¾‹çº¿æ€§å˜åŒ–" çš„å…³ç³», å°±æ˜¯éçº¿æ€§å…³ç³». æ˜¾ç„¶ï¼Œçº¿æ€§å‡½æ•°æ— æ³•ç²¾å‡†åˆ»ç”»è¿™ç§å¤æ‚çš„è§„å¾‹.</p>
<p>è¿™æ—¶å€™, <strong>æ¿€æ´»å‡½æ•°</strong>å°±æˆäº†è§£å†³é—®é¢˜çš„å…³é”®, æˆ‘ä»¬åœ¨åŸæœ‰çº¿æ€§è®¡ç®—çš„åŸºç¡€ä¸Š, åŠ å…¥ä¸€ä¸ªæ¿€æ´»å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span></span>, å‡½æ•°è¡¨è¾¾å¼å˜ä¸º:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">f</mi><mo>=</mo><mi>g</mi><mo stretchy="false">(</mo><mi mathvariant="bold-italic">W</mi><mo>â‹…</mo><mi mathvariant="bold-italic">x</mi><mo>+</mo><mi mathvariant="bold-italic">b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\boldsymbol{f} = g(\boldsymbol{W} \cdot \boldsymbol{x} + \boldsymbol{b})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11042em;">f</span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">W</span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">b</span></span></span><span class="mclose">)</span></span></span></span></span></p>
<p>æ¿€æ´»å‡½æ•°çš„ä½œç”¨, å°±æ˜¯ç»™çº¿æ€§è®¡ç®—çš„ç»“æœ, åŠ ä¸Š "éçº¿æ€§" è½¬æ¢, è®©å‡½æ•°æ‹¥æœ‰åˆ»ç”»å¤æ‚è§„å¾‹çš„èƒ½åŠ›.</p>
<blockquote>
<p>å¸¸è§çš„æ¿€æ´»å‡½æ•°æœ‰:</p>
<ul>
<li>
<p>Sigmoid, å¯ä»¥å°†ç»“æœæ˜ å°„åˆ° 0 å’Œ 1 ä¹‹é—´, é€‚åˆæ¦‚ç‡é¢„æµ‹;</p>
</li>
<li>
<p>ReLU, åœ¨è¾“å…¥ä¸ºæ­£æ—¶ç›´æ¥è¾“å‡º, ä¸ºè´Ÿæ˜¯è¾“å‡º 0, æ˜¯å½“å‰ AI æœ€å¸¸ç”¨çš„æ¿€æ´»å‡½æ•°ä¹‹ä¸€.</p>
</li>
</ul>
</blockquote>
<p>è€Œ "çº¿æ€§è®¡ç®— + éçº¿æ€§æ¿€æ´»" çš„ç»„åˆ, å°±æ˜¯ç¥ç»ç½‘ç»œä¸­æœ€åŸºç¡€çš„<strong>ç¥ç»å…ƒ</strong>, å®ƒæ¨¡æ‹Ÿäº†ç”Ÿç‰©æ¥å—ä¿¡å·, å¤„ç†ä¿¡å·çš„è¿‡ç¨‹, å¦‚æœç”¨ç¥ç»ç½‘ç»œç»“æ„å›¾è¡¨ç¤º, å•ä¸ªç¥ç»å…ƒç»“æ„å¦‚ä¸‹:</p>
<ul>
<li>å•è¾“å…¥çš„ç¥ç»å…ƒ:</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/733c9380bc8e4801bf0f7eca32b1bfa5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2w5Yi75ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768780387&amp;x-signature=IIVc7W2NXpY8Hwh5swnmACKRPKw%3D" alt="1-1.png" loading="lazy"/></p>
<ul>
<li>å¤šè¾“å…¥çš„ç¥ç»å…ƒ:</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5f3eef7bba941718dab9c12e7a156b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2w5Yi75ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768780387&amp;x-signature=Vie3bq8VpeFcJRJ2SuCc83TI2ZQ%3D" alt="n-1.png" loading="lazy"/></p>
<h2 data-id="heading-5">6 å¤šå±‚å †å ä¸ç¥ç»ç½‘ç»œ</h2>
<p>å¯èƒ½æœ‰æœ‹å‹ä¼šé—®, åŠ å…¥ä¸€æ¬¡éçº¿æ€§è½¬æ¢, å°±å¤Ÿæ‹Ÿåˆæ‰€æœ‰å¤æ‚è§„å¾‹äº†å—? ç­”æ¡ˆæ˜¯ "ä¸å¤Ÿ".</p>
<p>ç°å®ä¸–ç•Œä¸­çš„å¾ˆå¤šè§„å¾‹, æ¯”å¦‚å›¾åƒè¯†åˆ« (åˆ¤æ–­å›¾ç‰‡æ˜¯çŒ«è¿˜æ˜¯ç‹—), è‡ªç„¶è¯­è¨€ç†è§£ (ä»æ–‡å­—ä¸­è¯»æ‡‚æƒ…æ„Ÿ) è¿™ç±»å¤æ‚ä»»åŠ¡, å…¶å¤æ‚ç¨‹åº¦è¿œè¶…ä¸€æ¬¡éçº¿æ€§è½¬æ¢èƒ½åˆ»ç”»çš„èŒƒå›´.</p>
<p>é‚£è¯¥æ€ä¹ˆåŠå‘¢? æˆ‘ä»¬çš„åšæ³•æ˜¯: <strong>æŠŠ "çº¿æ€§è®¡ç®— + éçº¿æ€§æ¿€æ´»" çš„æ¨¡å—, ä¸€å±‚ä¸€å±‚åœ°å åŠ .</strong> è¿™å°±æ˜¯ "å¤šå±‚ç¥ç»ç½‘ç»œ" çš„æ ¸å¿ƒé€»è¾‘.</p>
<p>æ¯”å¦‚ä¸€ä¸ª 2 å±‚çš„ç¥ç»ç½‘ç»œ, å®ƒçš„å‡½æ•°è¡¨è¾¾å¼ä¸º:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">f</mi><mo>=</mo><mi><msub><mi mathvariant="bold-italic">W</mi><mn mathvariant="bold">2</mn></msub></mi><mo>â‹…</mo><mi>g</mi><mo stretchy="false">(</mo><mi><msub><mi mathvariant="bold-italic">W</mi><mn mathvariant="bold">1</mn></msub></mi><mo>â‹…</mo><mi mathvariant="bold-italic">x</mi><mo>+</mo><mi><msub><mi mathvariant="bold-italic">b</mi><mn mathvariant="bold">1</mn></msub></mi><mo stretchy="false">)</mo><mo>+</mo><mi><msub><mi mathvariant="bold-italic">b</mi><mn mathvariant="bold">2</mn></msub></mi></mrow><annotation encoding="application/x-tex">\boldsymbol{f} = \boldsymbol{W_2} \cdot g(\boldsymbol{W_1} \cdot \boldsymbol{x} + \boldsymbol{b_1}) + \boldsymbol{b_2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.11042em;">f</span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8361em;vertical-align:-0.15em;"/><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1597em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol" style="margin-right:0.15972em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1597em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord"><span class="mord"><span class="mord boldsymbol">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></span></span></p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸­:</p>
<ul>
<li>ç¬¬ä¸€å±‚ç¥ç»å…ƒå…ˆå¯¹åŸå§‹ç‰¹å¾ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold-italic">x</mi></mrow><annotation encoding="application/x-tex">\boldsymbol{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"/><span class="mord"><span class="mord"><span class="mord boldsymbol">x</span></span></span></span></span></span></span> åšåˆæ­¥çš„ç‰¹å¾æå– (æ¯”å¦‚åœ¨å›¾åƒæ£€æµ‹ä¸­, æå–è¾¹ç¼˜/çº¹ç†ç­‰ç®€å•ç‰¹å¾. ç»è¿‡æ¿€æ´»å‡½æ•°å¤„ç†å, æŠŠç»“æœä¼ é€’åˆ°ç¬¬äºŒå±‚;</li>
<li>ç¬¬äºŒå±‚ç¥ç»å…ƒ, å¯¹ç¬¬ä¸€å±‚çš„ç»“æœåšæ›´å¤æ‚çš„ç‰¹å¾æ•´åˆ (æ¯”å¦‚æŠŠè¾¹ç¼˜, çº¹ç†ç­‰ç‰¹å¾æ•´åˆä¸º "çœ¼ç›" "è€³æœµ" ç­‰æ›´é«˜çº§çš„ç‰¹å¾), æœ€ç»ˆè¾“å‡ºé¢„æµ‹ç»“æœ.</li>
</ul>
<p>è¿™ä¸ªè¿‡ç¨‹, å‡è®¾æœ€å¼€å§‹çš„è¾“å…¥æ˜¯ 6 ä¸ª, ç¬¬ä¸€å±‚è¾“å‡ºæ˜¯ 3 ä¸ª, ç¬¬äºŒå±‚è¾“å‡ºæ˜¯ 1 ä¸ª, åˆ™ç¥ç»ç½‘ç»œç»“æ„å›¾ä¸º:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e053ef777cf4ca68b59f52c4dc07a71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2w5Yi75ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768780387&amp;x-signature=SEzszpQQTSFD7%2FtvKjEBC9QUSOU%3D" alt="6-3-1.png" loading="lazy"/></p>
<p>å±‚æ•°å †å è¶Šå¤š, ç»“æ„è¶Šæ¥è¶Šå¤æ‚, è¿™å°±æ˜¯ç¥ç»ç½‘ç»œ:</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b481372226447209ce747f50d1f9729~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2w5Yi75ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768780387&amp;x-signature=Ez8m%2B0dcdyvTF%2BF8dp8mWR0VrDE%3D" alt="n-n-1.png" loading="lazy"/></p>
<p>å½“å‰ä¸»æµçš„å¤§æ¨¡å‹, å †å çš„å±‚æ•°æ›´æ˜¯è¾¾åˆ°äº†å‡ ç™¾ç”šè‡³ä¸Šåƒå±‚.</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>AI çš„æ ¸å¿ƒç›®çš„æ˜¯åˆ»ç”»ä¸–ç•Œçš„è§„å¾‹, è€Œå‡½æ•°, å‘é‡, çŸ©é˜µ, ç¥ç»ç½‘ç»œæ˜¯è¾¾æˆè¿™ä¸ªç›®çš„çš„æ•°å­¦å·¥å…·. å‘é‡è¢«ç”¨æ¥ç®€åŒ–å¤šè¾“å…¥çš„è¡¨è¾¾, çŸ©é˜µè¢«ç”¨æ¥æ•´åˆå¤šè¾“å‡ºçš„è¿ç®—, å åŠ  "çº¿æ€§è®¡ç®— + éçº¿æ€§æ¿€æ´»" åˆ™å½¢æˆäº†ç¥ç»ç½‘ç»œ.</p>
<p>æˆ‘æ˜¯å°åˆ»å›ï¼Œä¸€ä½æ¢ç´¢ AI çš„å‰ç«¯ç¨‹åºå‘˜ï¼Œå…³æ³¨æˆ‘ï¼Œè®© AI çŸ¥è¯†æœ‰æ¸©åº¦ï¼ŒæŠ€æœ¯è½åœ°æœ‰æ·±åº¦.</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaå­¦ä¹ ç¬¬34å¤© - æ€§èƒ½ä¼˜åŒ–ä¸ç³»ç»Ÿç›‘æ§]]></title>    <link>https://juejin.cn/post/7594047593967960102</link>    <guid>https://juejin.cn/post/7594047593967960102</guid>    <pubDate>2026-01-12T07:02:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594047593967960102" data-draft-id="7594242987597791259" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaå­¦ä¹ ç¬¬34å¤© - æ€§èƒ½ä¼˜åŒ–ä¸ç³»ç»Ÿç›‘æ§"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-12T07:02:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æµ®æ¸¸æœ¬å°Š"/> <meta itemprop="url" content="https://juejin.cn/user/2533726710668696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaå­¦ä¹ ç¬¬34å¤© - æ€§èƒ½ä¼˜åŒ–ä¸ç³»ç»Ÿç›‘æ§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2533726710668696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æµ®æ¸¸æœ¬å°Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T07:02:47.000Z" title="Mon Jan 12 2026 07:02:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    55
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å­¦ä¹ ç›®æ ‡</h2>
<p>æŒæ¡æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼Œå­¦ä¹ ç³»ç»Ÿç›‘æ§ä¸å¯è§‚æµ‹æ€§ï¼Œç†è§£å®‰å…¨è®¤è¯æœºåˆ¶ï¼ŒæŒæ¡æµ‹è¯•æ–¹æ³•ï¼Œäº†è§£æœ€ä½³å®è·µï¼Œæå‡ç³»ç»Ÿæ€§èƒ½ä¸ç¨³å®šæ€§ã€‚</p>
<hr/>
<h2 data-id="heading-1">1. æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-2">1.1 JVMè°ƒä¼˜</h3>
<p><strong>JVMå‚æ•°é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// JVMè°ƒä¼˜é…ç½®ç±»</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JvmTuningConfig</span> {
    
    <span class="hljs-comment">// å †å†…å­˜é…ç½®</span>
    <span class="hljs-comment">// -Xms2g -Xmx2gï¼šåˆå§‹å †å’Œæœ€å¤§å †å¤§å°</span>
    <span class="hljs-comment">// -XX:NewRatio=2ï¼šæ–°ç”Ÿä»£ä¸è€å¹´ä»£æ¯”ä¾‹</span>
    <span class="hljs-comment">// -XX:SurvivorRatio=8ï¼šEdenä¸Survivoræ¯”ä¾‹</span>
    
    <span class="hljs-comment">// GCé…ç½®</span>
    <span class="hljs-comment">// -XX:+UseG1GCï¼šä½¿ç”¨G1åƒåœ¾æ”¶é›†å™¨</span>
    <span class="hljs-comment">// -XX:MaxGCPauseMillis=200ï¼šæœ€å¤§GCæš‚åœæ—¶é—´</span>
    <span class="hljs-comment">// -XX:G1HeapRegionSize=16mï¼šG1åŒºåŸŸå¤§å°</span>
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printJvmInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Runtime</span> <span class="hljs-variable">runtime</span> <span class="hljs-operator">=</span> Runtime.getRuntime();
        <span class="hljs-type">long</span> <span class="hljs-variable">maxMemory</span> <span class="hljs-operator">=</span> runtime.maxMemory();
        <span class="hljs-type">long</span> <span class="hljs-variable">totalMemory</span> <span class="hljs-operator">=</span> runtime.totalMemory();
        <span class="hljs-type">long</span> <span class="hljs-variable">freeMemory</span> <span class="hljs-operator">=</span> runtime.freeMemory();
        <span class="hljs-type">long</span> <span class="hljs-variable">usedMemory</span> <span class="hljs-operator">=</span> totalMemory - freeMemory;
        
        log.info(<span class="hljs-string">"æœ€å¤§å†…å­˜: {} MB"</span>, maxMemory / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>);
        log.info(<span class="hljs-string">"æ€»å†…å­˜: {} MB"</span>, totalMemory / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>);
        log.info(<span class="hljs-string">"å·²ç”¨å†…å­˜: {} MB"</span>, usedMemory / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>);
        log.info(<span class="hljs-string">"å¯ç”¨å†…å­˜: {} MB"</span>, freeMemory / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>);
        
        <span class="hljs-comment">// å†…å­˜ä½¿ç”¨ç‡</span>
        <span class="hljs-type">double</span> <span class="hljs-variable">memoryUsage</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) usedMemory / totalMemory * <span class="hljs-number">100</span>;
        log.info(<span class="hljs-string">"å†…å­˜ä½¿ç”¨ç‡: {:.2f}%"</span>, memoryUsage);
    }
}

<span class="hljs-comment">// å†…å­˜ç›‘æ§æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryMonitorService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">MemoryMXBean</span> <span class="hljs-variable">memoryBean</span> <span class="hljs-operator">=</span> ManagementFactory.getMemoryMXBean();
    
    <span class="hljs-comment">// è·å–å †å†…å­˜ä½¿ç”¨æƒ…å†µ</span>
    <span class="hljs-keyword">public</span> MemoryUsage <span class="hljs-title function_">getHeapMemoryUsage</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> memoryBean.getHeapMemoryUsage();
    }
    
    <span class="hljs-comment">// è·å–éå †å†…å­˜ä½¿ç”¨æƒ…å†µ</span>
    <span class="hljs-keyword">public</span> MemoryUsage <span class="hljs-title function_">getNonHeapMemoryUsage</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> memoryBean.getNonHeapMemoryUsage();
    }
    
    <span class="hljs-comment">// æ£€æŸ¥å†…å­˜ä½¿ç”¨ç‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isMemoryUsageHigh</span><span class="hljs-params">(<span class="hljs-type">double</span> threshold)</span> {
        <span class="hljs-type">MemoryUsage</span> <span class="hljs-variable">heapUsage</span> <span class="hljs-operator">=</span> getHeapMemoryUsage();
        <span class="hljs-type">long</span> <span class="hljs-variable">used</span> <span class="hljs-operator">=</span> heapUsage.getUsed();
        <span class="hljs-type">long</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> heapUsage.getMax();
        <span class="hljs-type">double</span> <span class="hljs-variable">usage</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) used / max * <span class="hljs-number">100</span>;
        
        log.info(<span class="hljs-string">"å †å†…å­˜ä½¿ç”¨ç‡: {:.2f}%"</span>, usage);
        <span class="hljs-keyword">return</span> usage &gt; threshold;
    }
    
    <span class="hljs-comment">// è§¦å‘GC</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">triggerGC</span><span class="hljs-params">()</span> {
        System.gc();
        log.info(<span class="hljs-string">"æ‰‹åŠ¨è§¦å‘GC"</span>);
    }
    
    <span class="hljs-comment">// è·å–GCä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> List&lt;GarbageCollectorMXBean&gt; <span class="hljs-title function_">getGCBeans</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> ManagementFactory.getGarbageCollectorMXBeans();
    }
    
    <span class="hljs-comment">// æ‰“å°GCç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printGCStats</span><span class="hljs-params">()</span> {
        List&lt;GarbageCollectorMXBean&gt; gcBeans = getGCBeans();
        <span class="hljs-keyword">for</span> (GarbageCollectorMXBean gcBean : gcBeans) {
            log.info(<span class="hljs-string">"GCåç§°: {}"</span>, gcBean.getName());
            log.info(<span class="hljs-string">"GCæ¬¡æ•°: {}"</span>, gcBean.getCollectionCount());
            log.info(<span class="hljs-string">"GCæ€»æ—¶é—´: {} ms"</span>, gcBean.getCollectionTime());
        }
    }
}

<span class="hljs-comment">// çº¿ç¨‹ç›‘æ§æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadMonitorService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ThreadMXBean</span> <span class="hljs-variable">threadBean</span> <span class="hljs-operator">=</span> ManagementFactory.getThreadMXBean();
    
    <span class="hljs-comment">// è·å–çº¿ç¨‹ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> ThreadInfo[] getAllThreadInfo() {
        <span class="hljs-type">long</span>[] threadIds = threadBean.getAllThreadIds();
        <span class="hljs-keyword">return</span> threadBean.getThreadInfo(threadIds);
    }
    
    <span class="hljs-comment">// æ‰“å°çº¿ç¨‹ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printThreadStats</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">threadCount</span> <span class="hljs-operator">=</span> threadBean.getThreadCount();
        <span class="hljs-type">int</span> <span class="hljs-variable">peakThreadCount</span> <span class="hljs-operator">=</span> threadBean.getPeakThreadCount();
        <span class="hljs-type">long</span> <span class="hljs-variable">totalStartedThreadCount</span> <span class="hljs-operator">=</span> threadBean.getTotalStartedThreadCount();
        
        log.info(<span class="hljs-string">"å½“å‰çº¿ç¨‹æ•°: {}"</span>, threadCount);
        log.info(<span class="hljs-string">"å³°å€¼çº¿ç¨‹æ•°: {}"</span>, peakThreadCount);
        log.info(<span class="hljs-string">"æ€»å¯åŠ¨çº¿ç¨‹æ•°: {}"</span>, totalStartedThreadCount);
        
        <span class="hljs-comment">// æ‰“å°æ‰€æœ‰çº¿ç¨‹ä¿¡æ¯</span>
        ThreadInfo[] threadInfos = getAllThreadInfo();
        <span class="hljs-keyword">for</span> (ThreadInfo threadInfo : threadInfos) {
            <span class="hljs-keyword">if</span> (threadInfo != <span class="hljs-literal">null</span>) {
                log.info(<span class="hljs-string">"çº¿ç¨‹: {} - çŠ¶æ€: {} - CPUæ—¶é—´: {} ns"</span>,
                    threadInfo.getThreadName(),
                    threadInfo.getThreadState(),
                    threadBean.getThreadCpuTime(threadInfo.getThreadId())
                );
            }
        }
    }
    
    <span class="hljs-comment">// æ£€æµ‹æ­»é”</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span>[] detectDeadlocks() {
        <span class="hljs-keyword">return</span> threadBean.findDeadlockedThreads();
    }
}
</code></pre>
<h3 data-id="heading-3">1.2 ä»£ç çº§ä¼˜åŒ–</h3>
<p><strong>å­—ç¬¦ä¸²ä¼˜åŒ–ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å­—ç¬¦ä¸²ä¼˜åŒ–æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringOptimizationService</span> {
    
    <span class="hljs-comment">// ä½¿ç”¨StringBuilderä»£æ›¿å­—ç¬¦ä¸²æ‹¼æ¥</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">buildString</span><span class="hljs-params">(List&lt;String&gt; items)</span> {
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        <span class="hljs-keyword">for</span> (String item : items) {
            sb.append(item);
        }
        <span class="hljs-keyword">return</span> sb.toString();
    }
    
    <span class="hljs-comment">// ä½¿ç”¨String.joinï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">joinStrings</span><span class="hljs-params">(List&lt;String&gt; items)</span> {
        <span class="hljs-keyword">return</span> String.join(<span class="hljs-string">""</span>, items);
    }
    
    <span class="hljs-comment">// å­—ç¬¦ä¸²å¸¸é‡æ± ä¼˜åŒ–</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">compareStrings</span><span class="hljs-params">(String str1, String str2)</span> {
        <span class="hljs-comment">// ä½¿ç”¨equalsæ¯”è¾ƒå†…å®¹</span>
        <span class="hljs-keyword">return</span> str1.equals(str2);
        
        <span class="hljs-comment">// ä½¿ç”¨intern()åˆ©ç”¨å¸¸é‡æ± </span>
        <span class="hljs-comment">// return str1.intern() == str2.intern();</span>
    }
    
    <span class="hljs-comment">// é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºå­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">processStrings</span><span class="hljs-params">(List&lt;String&gt; items)</span> {
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        <span class="hljs-keyword">for</span> (String item : items) {
            <span class="hljs-comment">// é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºä¸´æ—¶å­—ç¬¦ä¸²</span>
            result.append(item.toUpperCase());
        }
        <span class="hljs-keyword">return</span> result.toString();
    }
}

<span class="hljs-comment">// é›†åˆä¼˜åŒ–æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollectionOptimizationService</span> {
    
    <span class="hljs-comment">// æŒ‡å®šé›†åˆåˆå§‹å®¹é‡</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">createList</span><span class="hljs-params">(<span class="hljs-type">int</span> expectedSize)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(expectedSize);
    }
    
    <span class="hljs-comment">// ä½¿ç”¨åˆé€‚çš„é›†åˆç±»å‹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">useAppropriateCollection</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// éœ€è¦å¿«é€ŸæŸ¥æ‰¾ä½¿ç”¨HashSet</span>
        Set&lt;String&gt; uniqueItems = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        
        <span class="hljs-comment">// éœ€è¦ä¿æŒé¡ºåºä½¿ç”¨LinkedHashSet</span>
        Set&lt;String&gt; orderedItems = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>&lt;&gt;();
        
        <span class="hljs-comment">// éœ€è¦æ’åºä½¿ç”¨TreeSet</span>
        Set&lt;String&gt; sortedItems = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;();
        
        <span class="hljs-comment">// éœ€è¦é”®å€¼å¯¹ä½¿ç”¨HashMap</span>
        Map&lt;String, String&gt; keyValueMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// éœ€è¦çº¿ç¨‹å®‰å…¨ä½¿ç”¨ConcurrentHashMap</span>
        Map&lt;String, String&gt; concurrentMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    }
    
    <span class="hljs-comment">// ä½¿ç”¨Stream APIä¼˜åŒ–é›†åˆæ“ä½œ</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">filterAndTransform</span><span class="hljs-params">(List&lt;String&gt; items)</span> {
        <span class="hljs-keyword">return</span> items.stream()
            .filter(item -&gt; item.length() &gt; <span class="hljs-number">5</span>)
            .map(String::toUpperCase)
            .collect(Collectors.toList());
    }
    
    <span class="hljs-comment">// é¿å…ä¸å¿…è¦çš„è¿­ä»£</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">containsItem</span><span class="hljs-params">(List&lt;String&gt; items, String target)</span> {
        <span class="hljs-comment">// ä½¿ç”¨containsæ–¹æ³•è€Œä¸æ˜¯éå†</span>
        <span class="hljs-keyword">return</span> items.contains(target);
    }
}

<span class="hljs-comment">// å¯¹è±¡åˆ›å»ºä¼˜åŒ–</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectCreationOptimizationService</span> {
    
    <span class="hljs-comment">// ä½¿ç”¨å¯¹è±¡æ± </span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ObjectPool&lt;StringBuilder&gt; stringBuilderPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericObjectPool</span>&lt;&gt;(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">PooledObjectFactory</span>&lt;StringBuilder&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> PooledObject&lt;StringBuilder&gt; <span class="hljs-title function_">makeObject</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultPooledObject</span>&lt;&gt;(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>());
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroyObject</span><span class="hljs-params">(PooledObject&lt;StringBuilder&gt; p)</span> {
                p.getObject().setLength(<span class="hljs-number">0</span>);
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">validateObject</span><span class="hljs-params">(PooledObject&lt;StringBuilder&gt; p)</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">activateObject</span><span class="hljs-params">(PooledObject&lt;StringBuilder&gt; p)</span> {
                p.getObject().setLength(<span class="hljs-number">0</span>);
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">passivateObject</span><span class="hljs-params">(PooledObject&lt;StringBuilder&gt; p)</span> {
                p.getObject().setLength(<span class="hljs-number">0</span>);
            }
        }
    );
    
    <span class="hljs-comment">// é‡ç”¨å¯¹è±¡</span>
    <span class="hljs-keyword">public</span> StringBuilder <span class="hljs-title function_">getStringBuilder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> stringBuilderPool.borrowObject();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"è·å–StringBuilderå¤±è´¥"</span>, e);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">returnStringBuilder</span><span class="hljs-params">(StringBuilder sb)</span> {
        <span class="hljs-keyword">try</span> {
            stringBuilderPool.returnObject(sb);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"å½’è¿˜StringBuilderå¤±è´¥"</span>, e);
        }
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ä¸å¯å˜å¯¹è±¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ImmutableData</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> value;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">ImmutableData</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> value)</span> {
            <span class="hljs-built_in">this</span>.name = name;
            <span class="hljs-built_in">this</span>.value = value;
        }
        
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> name;
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> value;
        }
    }
}
</code></pre>
<h3 data-id="heading-4">1.3 æ•°æ®åº“ä¼˜åŒ–</h3>
<p><strong>æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ•°æ®åº“è¿æ¥æ± é…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceConfig</span> {
    
    <span class="hljs-comment">// HikariCPè¿æ¥æ± é…ç½®ï¼ˆæ¨èï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConfigurationProperties(prefix = "spring.datasource.hikari")</span>
    <span class="hljs-keyword">public</span> HikariDataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">HikariConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>();
        
        <span class="hljs-comment">// è¿æ¥æ± å¤§å°</span>
        config.setMaximumPoolSize(<span class="hljs-number">20</span>);
        config.setMinimumIdle(<span class="hljs-number">5</span>);
        
        <span class="hljs-comment">// è¿æ¥è¶…æ—¶</span>
        config.setConnectionTimeout(<span class="hljs-number">30000</span>);
        config.setIdleTimeout(<span class="hljs-number">600000</span>);
        config.setMaxLifetime(<span class="hljs-number">1800000</span>);
        
        <span class="hljs-comment">// è¿æ¥æµ‹è¯•</span>
        config.setConnectionTestQuery(<span class="hljs-string">"SELECT 1"</span>);
        config.setValidationTimeout(<span class="hljs-number">5000</span>);
        
        <span class="hljs-comment">// æ€§èƒ½ä¼˜åŒ–</span>
        config.addDataSourceProperty(<span class="hljs-string">"cachePrepStmts"</span>, <span class="hljs-string">"true"</span>);
        config.addDataSourceProperty(<span class="hljs-string">"prepStmtCacheSize"</span>, <span class="hljs-string">"250"</span>);
        config.addDataSourceProperty(<span class="hljs-string">"prepStmtCacheSqlLimit"</span>, <span class="hljs-string">"2048"</span>);
        config.addDataSourceProperty(<span class="hljs-string">"useServerPrepStmts"</span>, <span class="hljs-string">"true"</span>);
        config.addDataSourceProperty(<span class="hljs-string">"useLocalSessionState"</span>, <span class="hljs-string">"true"</span>);
        config.addDataSourceProperty(<span class="hljs-string">"rewriteBatchedStatements"</span>, <span class="hljs-string">"true"</span>);
        config.addDataSourceProperty(<span class="hljs-string">"cacheResultSetMetadata"</span>, <span class="hljs-string">"true"</span>);
        config.addDataSourceProperty(<span class="hljs-string">"cacheServerConfiguration"</span>, <span class="hljs-string">"true"</span>);
        config.addDataSourceProperty(<span class="hljs-string">"elideSetAutoCommits"</span>, <span class="hljs-string">"true"</span>);
        config.addDataSourceProperty(<span class="hljs-string">"maintainTimeStats"</span>, <span class="hljs-string">"false"</span>);
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>(config);
    }
}

<span class="hljs-comment">// æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseOptimizationService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;
    
    <span class="hljs-comment">// æ‰¹é‡æ’å…¥ä¼˜åŒ–</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchInsert</span><span class="hljs-params">(List&lt;Map&lt;String, Object&gt;&gt; dataList)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO orders (order_id, user_id, amount) VALUES (?, ?, ?)"</span>;
        
        jdbcTemplate.batchUpdate(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BatchPreparedStatementSetter</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setValues</span><span class="hljs-params">(PreparedStatement ps, <span class="hljs-type">int</span> i)</span> <span class="hljs-keyword">throws</span> SQLException {
                Map&lt;String, Object&gt; data = dataList.get(i);
                ps.setString(<span class="hljs-number">1</span>, (String) data.get(<span class="hljs-string">"orderId"</span>));
                ps.setLong(<span class="hljs-number">2</span>, (Long) data.get(<span class="hljs-string">"userId"</span>));
                ps.setBigDecimal(<span class="hljs-number">3</span>, (BigDecimal) data.get(<span class="hljs-string">"amount"</span>));
            }
            
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getBatchSize</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">return</span> dataList.size();
            }
        });
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢</span>
    <span class="hljs-keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">queryWithIndex</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// ç¡®ä¿userIdå­—æ®µæœ‰ç´¢å¼•</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM orders WHERE user_id = ?"</span>;
        <span class="hljs-keyword">return</span> jdbcTemplate.queryForList(sql, userId);
    }
    
    <span class="hljs-comment">// åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–</span>
    <span class="hljs-keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">queryWithPagination</span><span class="hljs-params">(<span class="hljs-type">int</span> page, <span class="hljs-type">int</span> size)</span> {
        <span class="hljs-comment">// ä½¿ç”¨LIMITå’ŒOFFSET</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">offset</span> <span class="hljs-operator">=</span> (page - <span class="hljs-number">1</span>) * size;
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM orders ORDER BY create_time DESC LIMIT ? OFFSET ?"</span>;
        <span class="hljs-keyword">return</span> jdbcTemplate.queryForList(sql, size, offset);
    }
    
    <span class="hljs-comment">// é¿å…N+1æŸ¥è¯¢é—®é¢˜</span>
    <span class="hljs-keyword">public</span> List&lt;OrderDTO&gt; <span class="hljs-title function_">getOrdersWithUsers</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä½¿ç”¨JOINä¸€æ¬¡æ€§æŸ¥è¯¢</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT o.*, u.name as user_name "</span> +
                     <span class="hljs-string">"FROM orders o "</span> +
                     <span class="hljs-string">"JOIN users u ON o.user_id = u.id"</span>;
        
        <span class="hljs-keyword">return</span> jdbcTemplate.query(sql, (rs, rowNum) -&gt; {
            <span class="hljs-type">OrderDTO</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderDTO</span>();
            order.setId(rs.getLong(<span class="hljs-string">"id"</span>));
            order.setUserId(rs.getLong(<span class="hljs-string">"user_id"</span>));
            order.setUserName(rs.getString(<span class="hljs-string">"user_name"</span>));
            order.setAmount(rs.getBigDecimal(<span class="hljs-string">"amount"</span>));
            <span class="hljs-keyword">return</span> order;
        });
    }
}

<span class="hljs-comment">// MyBatis PlusæŸ¥è¯¢ä¼˜åŒ–</span>
<span class="hljs-meta">@Mapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;Order&gt; {
    
    <span class="hljs-comment">// ä½¿ç”¨ç´¢å¼•å­—æ®µæŸ¥è¯¢</span>
    <span class="hljs-meta">@Select("SELECT * FROM orders WHERE user_id = #{userId} AND status = #{status}")</span>
    List&lt;Order&gt; <span class="hljs-title function_">findByUserIdAndStatus</span><span class="hljs-params">(<span class="hljs-meta">@Param("userId")</span> Long userId, 
                                      <span class="hljs-meta">@Param("status")</span> String status)</span>;
    
    <span class="hljs-comment">// æ‰¹é‡æ’å…¥</span>
    <span class="hljs-meta">@Insert("&lt;script&gt;" +
            "INSERT INTO orders (order_id, user_id, amount) VALUES " +
            "&lt;foreach collection='orders' item='order' separator=','&gt;" +
            "(#{order.orderId}, #{order.userId}, #{order.amount})" +
            "&lt;/foreach&gt;" +
            "&lt;/script&gt;")</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchInsert</span><span class="hljs-params">(<span class="hljs-meta">@Param("orders")</span> List&lt;Order&gt; orders)</span>;
    
    <span class="hljs-comment">// ä½¿ç”¨åˆ†é¡µæ’ä»¶</span>
    IPage&lt;Order&gt; <span class="hljs-title function_">selectPage</span><span class="hljs-params">(IPage&lt;Order&gt; page, 
                           <span class="hljs-meta">@Param("userId")</span> Long userId)</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-5">2. ç³»ç»Ÿç›‘æ§</h2>
<h3 data-id="heading-6">2.1 APMåº”ç”¨æ€§èƒ½ç›‘æ§</h3>
<p><strong>Spring Boot Actuatorç›‘æ§ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Actuatoré…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActuatorConfig</span> {
    
    <span class="hljs-comment">// è‡ªå®šä¹‰å¥åº·æ£€æŸ¥</span>
    <span class="hljs-meta">@Component</span>
    <span class="hljs-meta">@Slf4j</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomHealthIndicator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HealthIndicator</span> {
        
        <span class="hljs-meta">@Autowired</span>
        <span class="hljs-keyword">private</span> DataSource dataSource;
        
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Health <span class="hljs-title function_">health</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ£€æŸ¥æ•°æ®åº“è¿æ¥</span>
                <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> dataSource.getConnection()) {
                    <span class="hljs-keyword">if</span> (connection.isValid(<span class="hljs-number">1</span>)) {
                        <span class="hljs-keyword">return</span> Health.up()
                            .withDetail(<span class="hljs-string">"database"</span>, <span class="hljs-string">"å¯ç”¨"</span>)
                            .build();
                    }
                }
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">"å¥åº·æ£€æŸ¥å¤±è´¥"</span>, e);
                <span class="hljs-keyword">return</span> Health.down()
                    .withDetail(<span class="hljs-string">"database"</span>, <span class="hljs-string">"ä¸å¯ç”¨"</span>)
                    .withException(e)
                    .build();
            }
            
            <span class="hljs-keyword">return</span> Health.down().build();
        }
    }
    
    <span class="hljs-comment">// è‡ªå®šä¹‰æŒ‡æ ‡</span>
    <span class="hljs-meta">@Component</span>
    <span class="hljs-meta">@Slf4j</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomMetrics</span> {
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MeterRegistry meterRegistry;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Counter requestCounter;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Timer requestTimer;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Gauge activeUsers;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomMetrics</span><span class="hljs-params">(MeterRegistry meterRegistry)</span> {
            <span class="hljs-built_in">this</span>.meterRegistry = meterRegistry;
            <span class="hljs-built_in">this</span>.requestCounter = Counter.builder(<span class="hljs-string">"custom.requests"</span>)
                .description(<span class="hljs-string">"è‡ªå®šä¹‰è¯·æ±‚è®¡æ•°"</span>)
                .register(meterRegistry);
            <span class="hljs-built_in">this</span>.requestTimer = Timer.builder(<span class="hljs-string">"custom.request.duration"</span>)
                .description(<span class="hljs-string">"è‡ªå®šä¹‰è¯·æ±‚è€—æ—¶"</span>)
                .register(meterRegistry);
            <span class="hljs-built_in">this</span>.activeUsers = Gauge.builder(<span class="hljs-string">"custom.active.users"</span>, 
                () -&gt; getActiveUserCount())
                .description(<span class="hljs-string">"æ´»è·ƒç”¨æˆ·æ•°"</span>)
                .register(meterRegistry);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">incrementRequest</span><span class="hljs-params">()</span> {
            requestCounter.increment();
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordRequestTime</span><span class="hljs-params">(Duration duration)</span> {
            requestTimer.record(duration);
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getActiveUserCount</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// è·å–æ´»è·ƒç”¨æˆ·æ•°</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">100.0</span>;
        }
    }
}

<span class="hljs-comment">// ç›‘æ§æ‹¦æˆªå™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MonitoringInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CustomMetrics customMetrics;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, 
                           HttpServletResponse response, 
                           Object handler)</span> {
        request.setAttribute(<span class="hljs-string">"startTime"</span>, System.currentTimeMillis());
        customMetrics.incrementRequest();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCompletion</span><span class="hljs-params">(HttpServletRequest request, 
                               HttpServletResponse response, 
                               Object handler, 
                               Exception ex)</span> {
        <span class="hljs-type">Long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> (Long) request.getAttribute(<span class="hljs-string">"startTime"</span>);
        <span class="hljs-keyword">if</span> (startTime != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
            customMetrics.recordRequestTime(Duration.ofMillis(duration));
            
            log.info(<span class="hljs-string">"è¯·æ±‚è·¯å¾„: {}, è€—æ—¶: {} ms"</span>, 
                request.getRequestURI(), duration);
        }
    }
}
</code></pre>
<h3 data-id="heading-7">2.2 æ—¥å¿—ç®¡ç†</h3>
<p><strong>æ—¥å¿—é…ç½®ä¸ä¼˜åŒ–ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ—¥å¿—é…ç½®ç±»</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingConfig</span> {
    
    <span class="hljs-comment">// Logbacké…ç½®ï¼ˆlogback-spring.xmlï¼‰</span>
    <span class="hljs-comment">/*
    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;configuration&gt;
        &lt;springProfile name="dev"&gt;
            &lt;appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender"&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;
                &lt;/encoder&gt;
            &lt;/appender&gt;
            &lt;root level="INFO"&gt;
                &lt;appender-ref ref="CONSOLE" /&gt;
            &lt;/root&gt;
        &lt;/springProfile&gt;
        
        &lt;springProfile name="prod"&gt;
            &lt;appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
                &lt;file&gt;logs/application.log&lt;/file&gt;
                &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
                    &lt;fileNamePattern&gt;logs/application.%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                    &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;
                    &lt;maxHistory&gt;30&lt;/maxHistory&gt;
                    &lt;totalSizeCap&gt;3GB&lt;/totalSizeCap&gt;
                &lt;/rollingPolicy&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n&lt;/pattern&gt;
                &lt;/encoder&gt;
            &lt;/appender&gt;
            &lt;root level="INFO"&gt;
                &lt;appender-ref ref="FILE" /&gt;
            &lt;/root&gt;
        &lt;/springProfile&gt;
    &lt;/configuration&gt;
    */</span>
}

<span class="hljs-comment">// ç»“æ„åŒ–æ—¥å¿—æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StructuredLoggingService</span> {
    
    <span class="hljs-comment">// ä½¿ç”¨MDCæ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logWithContext</span><span class="hljs-params">(String userId, String operation)</span> {
        MDC.put(<span class="hljs-string">"userId"</span>, userId);
        MDC.put(<span class="hljs-string">"operation"</span>, operation);
        MDC.put(<span class="hljs-string">"requestId"</span>, UUID.randomUUID().toString());
        
        <span class="hljs-keyword">try</span> {
            log.info(<span class="hljs-string">"æ‰§è¡Œæ“ä½œ: {}"</span>, operation);
            <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
        } <span class="hljs-keyword">finally</span> {
            MDC.clear();
        }
    }
    
    <span class="hljs-comment">// å¼‚æ­¥æ—¥å¿—</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAsync</span><span class="hljs-params">(String message)</span> {
        CompletableFuture.runAsync(() -&gt; {
            log.info(<span class="hljs-string">"å¼‚æ­¥æ—¥å¿—: {}"</span>, message);
        });
    }
    
    <span class="hljs-comment">// æ—¥å¿—é‡‡æ ·ï¼ˆé™ä½æ—¥å¿—é‡ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">logCounter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">SAMPLE_RATE</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>; <span class="hljs-comment">// æ¯100æ¡è®°å½•1æ¡</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logWithSampling</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-keyword">if</span> (logCounter.incrementAndGet() % SAMPLE_RATE == <span class="hljs-number">0</span>) {
            log.info(<span class="hljs-string">"é‡‡æ ·æ—¥å¿—: {}"</span>, message);
        }
    }
}

<span class="hljs-comment">// ELKæ—¥å¿—æ”¶é›†é…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ElkLoggingConfig</span> {
    
    <span class="hljs-comment">// Logstashé…ç½®</span>
    <span class="hljs-comment">/*
    &lt;appender name="LOGSTASH" class="net.logstash.logback.appender.LogstashTcpSocketAppender"&gt;
        &lt;destination&gt;logstash-server:5000&lt;/destination&gt;
        &lt;encoder class="net.logstash.logback.encoder.LogstashEncoder"&gt;
            &lt;customFields&gt;{"application":"order-service"}&lt;/customFields&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;
    */</span>
}
</code></pre>
<h3 data-id="heading-8">2.3 æŒ‡æ ‡ç›‘æ§</h3>
<p><strong>PrometheusæŒ‡æ ‡ç›‘æ§ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Prometheusé…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrometheusConfig</span> {
    
    <span class="hljs-comment">// è‡ªå®šä¹‰æŒ‡æ ‡</span>
    <span class="hljs-meta">@Component</span>
    <span class="hljs-meta">@Slf4j</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BusinessMetrics</span> {
        
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Counter orderCounter;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Timer orderProcessingTime;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Gauge activeOrders;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Summary orderAmount;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">BusinessMetrics</span><span class="hljs-params">(MeterRegistry meterRegistry)</span> {
            <span class="hljs-built_in">this</span>.orderCounter = Counter.builder(<span class="hljs-string">"orders.total"</span>)
                .description(<span class="hljs-string">"è®¢å•æ€»æ•°"</span>)
                .tag(<span class="hljs-string">"type"</span>, <span class="hljs-string">"business"</span>)
                .register(meterRegistry);
            
            <span class="hljs-built_in">this</span>.orderProcessingTime = Timer.builder(<span class="hljs-string">"orders.processing.time"</span>)
                .description(<span class="hljs-string">"è®¢å•å¤„ç†æ—¶é—´"</span>)
                .register(meterRegistry);
            
            <span class="hljs-built_in">this</span>.activeOrders = Gauge.builder(<span class="hljs-string">"orders.active"</span>, 
                () -&gt; getActiveOrderCount())
                .description(<span class="hljs-string">"æ´»è·ƒè®¢å•æ•°"</span>)
                .register(meterRegistry);
            
            <span class="hljs-built_in">this</span>.orderAmount = Summary.builder(<span class="hljs-string">"orders.amount"</span>)
                .description(<span class="hljs-string">"è®¢å•é‡‘é¢"</span>)
                .register(meterRegistry);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordOrder</span><span class="hljs-params">(String orderType)</span> {
            orderCounter.increment(
                Tags.of(<span class="hljs-string">"order_type"</span>, orderType)
            );
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordProcessingTime</span><span class="hljs-params">(Duration duration)</span> {
            orderProcessingTime.record(duration);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordOrderAmount</span><span class="hljs-params">(BigDecimal amount)</span> {
            orderAmount.record(amount.doubleValue());
        }
        
        <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getActiveOrderCount</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// è·å–æ´»è·ƒè®¢å•æ•°</span>
            <span class="hljs-keyword">return</span> <span class="hljs-number">50.0</span>;
        }
    }
}

<span class="hljs-comment">// Grafanaä»ªè¡¨æ¿é…ç½®</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/metrics")</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricsController</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MeterRegistry meterRegistry;
    
    <span class="hljs-meta">@GetMapping("/custom")</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getCustomMetrics</span><span class="hljs-params">()</span> {
        Map&lt;String, Object&gt; metrics = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        <span class="hljs-comment">// è·å–è®¡æ•°å™¨å€¼</span>
        <span class="hljs-type">Counter</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> meterRegistry.find(<span class="hljs-string">"orders.total"</span>).counter();
        <span class="hljs-keyword">if</span> (counter != <span class="hljs-literal">null</span>) {
            metrics.put(<span class="hljs-string">"ordersTotal"</span>, counter.count());
        }
        
        <span class="hljs-comment">// è·å–è®¡æ—¶å™¨ç»Ÿè®¡</span>
        <span class="hljs-type">Timer</span> <span class="hljs-variable">timer</span> <span class="hljs-operator">=</span> meterRegistry.find(<span class="hljs-string">"orders.processing.time"</span>).timer();
        <span class="hljs-keyword">if</span> (timer != <span class="hljs-literal">null</span>) {
            metrics.put(<span class="hljs-string">"avgProcessingTime"</span>, timer.mean(TimeUnit.MILLISECONDS));
            metrics.put(<span class="hljs-string">"maxProcessingTime"</span>, timer.max(TimeUnit.MILLISECONDS));
        }
        
        <span class="hljs-keyword">return</span> metrics;
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-9">3. å®‰å…¨ä¸è®¤è¯</h2>
<h3 data-id="heading-10">3.1 JWTè®¤è¯</h3>
<p><strong>JWTå·¥å…·ç±»ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// JWTå·¥å…·ç±»</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtUtil</span> {
    
    <span class="hljs-meta">@Value("${jwt.secret:mySecretKey}")</span>
    <span class="hljs-keyword">private</span> String secret;
    
    <span class="hljs-meta">@Value("${jwt.expiration:86400000}")</span>
    <span class="hljs-keyword">private</span> Long expiration;
    
    <span class="hljs-comment">// ç”ŸæˆToken</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateToken</span><span class="hljs-params">(UserDetails userDetails)</span> {
        Map&lt;String, Object&gt; claims = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        claims.put(<span class="hljs-string">"sub"</span>, userDetails.getUsername());
        claims.put(<span class="hljs-string">"roles"</span>, userDetails.getAuthorities().stream()
            .map(GrantedAuthority::getAuthority)
            .collect(Collectors.toList()));
        claims.put(<span class="hljs-string">"iat"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
        
        <span class="hljs-keyword">return</span> createToken(claims, userDetails.getUsername());
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">createToken</span><span class="hljs-params">(Map&lt;String, Object&gt; claims, String subject)</span> {
        <span class="hljs-keyword">return</span> Jwts.builder()
            .setClaims(claims)
            .setSubject(subject)
            .setIssuedAt(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>())
            .setExpiration(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(System.currentTimeMillis() + expiration))
            .signWith(SignatureAlgorithm.HS512, secret)
            .compact();
    }
    
    <span class="hljs-comment">// éªŒè¯Token</span>
    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">validateToken</span><span class="hljs-params">(String token, UserDetails userDetails)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> getUsernameFromToken(token);
        <span class="hljs-keyword">return</span> (username.equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(token));
    }
    
    <span class="hljs-comment">// ä»Tokenè·å–ç”¨æˆ·å</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsernameFromToken</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-keyword">return</span> getClaimFromToken(token, Claims::getSubject);
    }
    
    <span class="hljs-comment">// ä»Tokenè·å–è¿‡æœŸæ—¶é—´</span>
    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getExpirationDateFromToken</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-keyword">return</span> getClaimFromToken(token, Claims::getExpiration);
    }
    
    <span class="hljs-comment">// ä»Tokenè·å–æŒ‡å®šClaim</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getClaimFromToken</span><span class="hljs-params">(String token, Function&lt;Claims, T&gt; claimsResolver)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> getAllClaimsFromToken(token);
        <span class="hljs-keyword">return</span> claimsResolver.apply(claims);
    }
    
    <span class="hljs-comment">// ä»Tokenè·å–æ‰€æœ‰Claims</span>
    <span class="hljs-keyword">private</span> Claims <span class="hljs-title function_">getAllClaimsFromToken</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-keyword">return</span> Jwts.parser()
            .setSigningKey(secret)
            .parseClaimsJws(token)
            .getBody();
    }
    
    <span class="hljs-comment">// æ£€æŸ¥Tokenæ˜¯å¦è¿‡æœŸ</span>
    <span class="hljs-keyword">private</span> Boolean <span class="hljs-title function_">isTokenExpired</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">Date</span> <span class="hljs-variable">expiration</span> <span class="hljs-operator">=</span> getExpirationDateFromToken(token);
        <span class="hljs-keyword">return</span> expiration.before(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
    }
    
    <span class="hljs-comment">// åˆ·æ–°Token</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">refreshToken</span><span class="hljs-params">(String token)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> getAllClaimsFromToken(token);
        claims.setIssuedAt(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
        <span class="hljs-keyword">return</span> createToken(claims, claims.getSubject());
    }
}

<span class="hljs-comment">// JWTè®¤è¯è¿‡æ»¤å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtAuthenticationFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OncePerRequestFilter</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JwtUtil jwtUtil;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserDetailsService userDetailsService;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilterInternal</span><span class="hljs-params">(HttpServletRequest request, 
                                   HttpServletResponse response, 
                                   FilterChain filterChain)</span> 
            <span class="hljs-keyword">throws</span> ServletException, IOException {
        
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> getTokenFromRequest(request);
        
        <span class="hljs-keyword">if</span> (token != <span class="hljs-literal">null</span> &amp;&amp; jwtUtil.validateToken(token, 
            userDetailsService.loadUserByUsername(
                jwtUtil.getUsernameFromToken(token)))) {
            
            <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> jwtUtil.getUsernameFromToken(token);
            <span class="hljs-type">UserDetails</span> <span class="hljs-variable">userDetails</span> <span class="hljs-operator">=</span> userDetailsService.loadUserByUsername(username);
            
            <span class="hljs-type">UsernamePasswordAuthenticationToken</span> <span class="hljs-variable">authentication</span> <span class="hljs-operator">=</span> 
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">UsernamePasswordAuthenticationToken</span>(
                    userDetails, <span class="hljs-literal">null</span>, userDetails.getAuthorities());
            authentication.setDetails(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebAuthenticationDetailsSource</span>().buildDetails(request));
            
            SecurityContextHolder.getContext().setAuthentication(authentication);
        }
        
        filterChain.doFilter(request, response);
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getTokenFromRequest</span><span class="hljs-params">(HttpServletRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">bearerToken</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"Authorization"</span>);
        <span class="hljs-keyword">if</span> (bearerToken != <span class="hljs-literal">null</span> &amp;&amp; bearerToken.startsWith(<span class="hljs-string">"Bearer "</span>)) {
            <span class="hljs-keyword">return</span> bearerToken.substring(<span class="hljs-number">7</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<h3 data-id="heading-11">3.2 OAuth2è®¤è¯</h3>
<p><strong>OAuth2é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// OAuth2èµ„æºæœåŠ¡å™¨é…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableResourceServer</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OAuth2ResourceServerConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ResourceServerConfigurerAdapter</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception {
        http
            .authorizeRequests()
            .antMatchers(<span class="hljs-string">"/api/public/**"</span>).permitAll()
            .antMatchers(<span class="hljs-string">"/api/admin/**"</span>).hasRole(<span class="hljs-string">"ADMIN"</span>)
            .antMatchers(<span class="hljs-string">"/api/user/**"</span>).hasAnyRole(<span class="hljs-string">"USER"</span>, <span class="hljs-string">"ADMIN"</span>)
            .anyRequest().authenticated()
            .and()
            .oauth2ResourceServer()
            .jwt();
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> JwtDecoder <span class="hljs-title function_">jwtDecoder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> NimbusJwtDecoder.withJwkSetUri(<span class="hljs-string">"http://auth-server/.well-known/jwks.json"</span>)
            .build();
    }
}

<span class="hljs-comment">// OAuth2æˆæƒæœåŠ¡å™¨é…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAuthorizationServer</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OAuth2AuthorizationServerConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AuthorizationServerConfigurerAdapter</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> AuthenticationManager authenticationManager;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DataSource dataSource;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(ClientDetailsServiceConfigurer clients)</span> <span class="hljs-keyword">throws</span> Exception {
        clients.jdbc(dataSource);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(AuthorizationServerEndpointsConfigurer endpoints)</span> {
        endpoints
            .authenticationManager(authenticationManager)
            .tokenStore(tokenStore())
            .accessTokenConverter(accessTokenConverter());
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> TokenStore <span class="hljs-title function_">tokenStore</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JdbcTokenStore</span>(dataSource);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> JwtAccessTokenConverter <span class="hljs-title function_">accessTokenConverter</span><span class="hljs-params">()</span> {
        <span class="hljs-type">JwtAccessTokenConverter</span> <span class="hljs-variable">converter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JwtAccessTokenConverter</span>();
        converter.setSigningKey(<span class="hljs-string">"mySecretKey"</span>);
        <span class="hljs-keyword">return</span> converter;
    }
}
</code></pre>
<h3 data-id="heading-12">3.3 Spring Securityé…ç½®</h3>
<p><strong>Spring Securityé…ç½®ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring Securityé…ç½®</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableWebSecurity</span>
<span class="hljs-meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WebSecurityConfigurerAdapter</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserDetailsService userDetailsService;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JwtAuthenticationFilter jwtAuthenticationFilter;
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> PasswordEncoder <span class="hljs-title function_">passwordEncoder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BCryptPasswordEncoder</span>();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(AuthenticationManagerBuilder auth)</span> <span class="hljs-keyword">throws</span> Exception {
        auth.userDetailsService(userDetailsService)
            .passwordEncoder(passwordEncoder());
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception {
        http
            .csrf().disable()
            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)
            .and()
            .authorizeRequests()
            .antMatchers(<span class="hljs-string">"/api/auth/**"</span>).permitAll()
            .antMatchers(<span class="hljs-string">"/api/public/**"</span>).permitAll()
            .antMatchers(<span class="hljs-string">"/api/admin/**"</span>).hasRole(<span class="hljs-string">"ADMIN"</span>)
            .antMatchers(<span class="hljs-string">"/api/user/**"</span>).hasAnyRole(<span class="hljs-string">"USER"</span>, <span class="hljs-string">"ADMIN"</span>)
            .anyRequest().authenticated()
            .and()
            .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> AuthenticationManager <span class="hljs-title function_">authenticationManagerBean</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.authenticationManagerBean();
    }
}

<span class="hljs-comment">// ç”¨æˆ·è¯¦æƒ…æœåŠ¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDetailsServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDetailsService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> UserDetails <span class="hljs-title function_">loadUserByUsername</span><span class="hljs-params">(String username)</span> <span class="hljs-keyword">throws</span> UsernameNotFoundException {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findByUsername(username)
            .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">UsernameNotFoundException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨: "</span> + username));
        
        List&lt;GrantedAuthority&gt; authorities = user.getRoles().stream()
            .map(role -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleGrantedAuthority</span>(<span class="hljs-string">"ROLE_"</span> + role.getName()))
            .collect(Collectors.toList());
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">org</span>.springframework.security.core.userdetails.User(
            user.getUsername(),
            user.getPassword(),
            authorities
        );
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-13">4. æµ‹è¯•ä¸è´¨é‡</h2>
<h3 data-id="heading-14">4.1 å•å…ƒæµ‹è¯•</h3>
<p><strong>JUnit 5å•å…ƒæµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœåŠ¡å±‚å•å…ƒæµ‹è¯•</span>
<span class="hljs-meta">@ExtendWith(MockitoExtension.class)</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderServiceTest</span> {
    
    <span class="hljs-meta">@Mock</span>
    <span class="hljs-keyword">private</span> OrderRepository orderRepository;
    
    <span class="hljs-meta">@Mock</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    
    <span class="hljs-meta">@InjectMocks</span>
    <span class="hljs-keyword">private</span> OrderService orderService;
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName("åˆ›å»ºè®¢å•æˆåŠŸ")</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreateOrderSuccess</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Given</span>
        <span class="hljs-type">CreateOrderRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateOrderRequest</span>();
        request.setUserId(<span class="hljs-number">1L</span>);
        request.setAmount(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100.00"</span>));
        
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setId(<span class="hljs-number">1L</span>);
        user.setName(<span class="hljs-string">"æµ‹è¯•ç”¨æˆ·"</span>);
        
        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();
        order.setId(<span class="hljs-number">1L</span>);
        order.setUserId(<span class="hljs-number">1L</span>);
        order.setAmount(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100.00"</span>));
        
        when(userRepository.findById(<span class="hljs-number">1L</span>)).thenReturn(Optional.of(user));
        when(orderRepository.save(any(Order.class))).thenReturn(order);
        
        <span class="hljs-comment">// When</span>
        <span class="hljs-type">OrderDTO</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> orderService.createOrder(request);
        
        <span class="hljs-comment">// Then</span>
        assertNotNull(result);
        assertEquals(<span class="hljs-number">1L</span>, result.getId());
        assertEquals(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100.00"</span>), result.getAmount());
        verify(orderRepository, times(<span class="hljs-number">1</span>)).save(any(Order.class));
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName("ç”¨æˆ·ä¸å­˜åœ¨æ—¶åˆ›å»ºè®¢å•å¤±è´¥")</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreateOrderUserNotFound</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Given</span>
        <span class="hljs-type">CreateOrderRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateOrderRequest</span>();
        request.setUserId(<span class="hljs-number">999L</span>);
        
        when(userRepository.findById(<span class="hljs-number">999L</span>)).thenReturn(Optional.empty());
        
        <span class="hljs-comment">// When &amp; Then</span>
        assertThrows(UserNotFoundException.class, () -&gt; {
            orderService.createOrder(request);
        });
    }
    
    <span class="hljs-meta">@ParameterizedTest</span>
    <span class="hljs-meta">@ValueSource(doubles = {100.0, 200.0, 500.0})</span>
    <span class="hljs-meta">@DisplayName("ä¸åŒé‡‘é¢çš„è®¢å•åˆ›å»º")</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreateOrderWithDifferentAmounts</span><span class="hljs-params">(<span class="hljs-type">double</span> amount)</span> {
        <span class="hljs-comment">// Given</span>
        <span class="hljs-type">CreateOrderRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateOrderRequest</span>();
        request.setUserId(<span class="hljs-number">1L</span>);
        request.setAmount(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(String.valueOf(amount)));
        
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setId(<span class="hljs-number">1L</span>);
        
        when(userRepository.findById(<span class="hljs-number">1L</span>)).thenReturn(Optional.of(user));
        when(orderRepository.save(any(Order.class))).thenAnswer(invocation -&gt; {
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> invocation.getArgument(<span class="hljs-number">0</span>);
            order.setId(<span class="hljs-number">1L</span>);
            <span class="hljs-keyword">return</span> order;
        });
        
        <span class="hljs-comment">// When</span>
        <span class="hljs-type">OrderDTO</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> orderService.createOrder(request);
        
        <span class="hljs-comment">// Then</span>
        assertNotNull(result);
        assertEquals(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(String.valueOf(amount)), result.getAmount());
    }
}
</code></pre>
<h3 data-id="heading-15">4.2 é›†æˆæµ‹è¯•</h3>
<p><strong>Spring Booté›†æˆæµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é›†æˆæµ‹è¯•</span>
<span class="hljs-meta">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span>
<span class="hljs-meta">@AutoConfigureMockMvc</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderControllerIntegrationTest</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MockMvc mockMvc;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ObjectMapper objectMapper;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderRepository orderRepository;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-meta">@DisplayName("åˆ›å»ºè®¢å•é›†æˆæµ‹è¯•")</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCreateOrderIntegration</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// Given</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
        user.setUsername(<span class="hljs-string">"testuser"</span>);
        user.setPassword(<span class="hljs-string">"password"</span>);
        user = userRepository.save(user);
        
        <span class="hljs-type">CreateOrderRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateOrderRequest</span>();
        request.setUserId(user.getId());
        request.setAmount(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100.00"</span>));
        
        <span class="hljs-comment">// When</span>
        <span class="hljs-type">MvcResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> mockMvc.perform(post(<span class="hljs-string">"/api/orders"</span>)
                .contentType(MediaType.APPLICATION_JSON)
                .content(objectMapper.writeValueAsString(request)))
            .andExpect(status().isOk())
            .andReturn();
        
        <span class="hljs-comment">// Then</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">responseContent</span> <span class="hljs-operator">=</span> result.getResponse().getContentAsString();
        <span class="hljs-type">OrderDTO</span> <span class="hljs-variable">orderDTO</span> <span class="hljs-operator">=</span> objectMapper.readValue(responseContent, OrderDTO.class);
        
        assertNotNull(orderDTO);
        assertEquals(user.getId(), orderDTO.getUserId());
        assertEquals(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigDecimal</span>(<span class="hljs-string">"100.00"</span>), orderDTO.getAmount());
        
        <span class="hljs-comment">// éªŒè¯æ•°æ®åº“</span>
        Optional&lt;Order&gt; savedOrder = orderRepository.findById(orderDTO.getId());
        assertTrue(savedOrder.isPresent());
    }
}
</code></pre>
<h3 data-id="heading-16">4.3 æ€§èƒ½æµ‹è¯•</h3>
<p><strong>JMeteræ€§èƒ½æµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ€§èƒ½æµ‹è¯•å·¥å…·ç±»</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceTestService</span> {
    
    <span class="hljs-comment">// å‹åŠ›æµ‹è¯•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">stressTest</span><span class="hljs-params">(String url, <span class="hljs-type">int</span> threads, <span class="hljs-type">int</span> iterations)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(threads);
        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(threads);
        <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">successCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
        <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">failCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
        List&lt;Long&gt; responseTimes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; threads; i++) {
            executor.submit(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; iterations; j++) {
                        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
                        
                        <span class="hljs-keyword">try</span> {
                            <span class="hljs-comment">// å‘é€HTTPè¯·æ±‚</span>
                            <span class="hljs-type">RestTemplate</span> <span class="hljs-variable">restTemplate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();
                            ResponseEntity&lt;String&gt; response = restTemplate.getForEntity(url, String.class);
                            
                            <span class="hljs-keyword">if</span> (response.getStatusCode().is2xxSuccessful()) {
                                successCount.incrementAndGet();
                            } <span class="hljs-keyword">else</span> {
                                failCount.incrementAndGet();
                            }
                        } <span class="hljs-keyword">catch</span> (Exception e) {
                            failCount.incrementAndGet();
                        }
                        
                        <span class="hljs-type">long</span> <span class="hljs-variable">responseTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
                        responseTimes.add(responseTime);
                    }
                } <span class="hljs-keyword">finally</span> {
                    latch.countDown();
                }
            });
        }
        
        <span class="hljs-keyword">try</span> {
            latch.await();
            executor.shutdown();
            
            <span class="hljs-comment">// ç»Ÿè®¡ç»“æœ</span>
            log.info(<span class="hljs-string">"æˆåŠŸè¯·æ±‚æ•°: {}"</span>, successCount.get());
            log.info(<span class="hljs-string">"å¤±è´¥è¯·æ±‚æ•°: {}"</span>, failCount.get());
            log.info(<span class="hljs-string">"å¹³å‡å“åº”æ—¶é—´: {} ms"</span>, 
                responseTimes.stream().mapToLong(Long::longValue).average().orElse(<span class="hljs-number">0</span>));
            log.info(<span class="hljs-string">"æœ€å¤§å“åº”æ—¶é—´: {} ms"</span>, 
                responseTimes.stream().mapToLong(Long::longValue).max().orElse(<span class="hljs-number">0</span>));
            log.info(<span class="hljs-string">"æœ€å°å“åº”æ—¶é—´: {} ms"</span>, 
                responseTimes.stream().mapToLong(Long::longValue).min().orElse(<span class="hljs-number">0</span>));
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-17">5. æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-18">5.1 ä»£ç è§„èŒƒ</h3>
<p><strong>ä»£ç è§„èŒƒæ£€æŸ¥ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨Checkstyleã€PMDã€SpotBugsç­‰å·¥å…·</span>
<span class="hljs-comment">// ä»£ç è§„èŒƒç¤ºä¾‹</span>

<span class="hljs-comment">// 1. å‘½åè§„èŒƒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {  <span class="hljs-comment">// ç±»åä½¿ç”¨å¤§é©¼å³°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_RETRY_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;  <span class="hljs-comment">// å¸¸é‡ä½¿ç”¨å¤§å†™ä¸‹åˆ’çº¿</span>
    
    <span class="hljs-keyword">private</span> Long orderId;  <span class="hljs-comment">// å˜é‡åä½¿ç”¨å°é©¼å³°</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">()</span> {  <span class="hljs-comment">// æ–¹æ³•åä½¿ç”¨å°é©¼å³°</span>
        <span class="hljs-comment">// æ–¹æ³•å®ç°</span>
    }
}

<span class="hljs-comment">// 2. æ³¨é‡Šè§„èŒƒ</span>
<span class="hljs-comment">/**
 * è®¢å•æœåŠ¡ç±»
 * 
 * <span class="hljs-doctag">@author</span> YourName
 * <span class="hljs-doctag">@version</span> 1.0
 * <span class="hljs-doctag">@since</span> 2024-01-01
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-comment">/**
     * åˆ›å»ºè®¢å•
     * 
     * <span class="hljs-doctag">@param</span> request åˆ›å»ºè®¢å•è¯·æ±‚
     * <span class="hljs-doctag">@return</span> è®¢å•DTO
     * <span class="hljs-doctag">@throws</span> UserNotFoundException ç”¨æˆ·ä¸å­˜åœ¨å¼‚å¸¸
     */</span>
    <span class="hljs-keyword">public</span> OrderDTO <span class="hljs-title function_">createOrder</span><span class="hljs-params">(CreateOrderRequest request)</span> {
        <span class="hljs-comment">// å®ç°</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-comment">// 3. å¼‚å¸¸å¤„ç†è§„èŒƒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    
    <span class="hljs-keyword">public</span> OrderDTO <span class="hljs-title function_">createOrder</span><span class="hljs-params">(CreateOrderRequest request)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
            <span class="hljs-keyword">return</span> processOrder(request);
        } <span class="hljs-keyword">catch</span> (UserNotFoundException e) {
            log.error(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨: {}"</span>, request.getUserId(), e);
            <span class="hljs-keyword">throw</span> e;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.error(<span class="hljs-string">"åˆ›å»ºè®¢å•å¤±è´¥"</span>, e);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderCreationException</span>(<span class="hljs-string">"åˆ›å»ºè®¢å•å¤±è´¥"</span>, e);
        }
    }
}
</code></pre>
<h3 data-id="heading-19">5.2 è®¾è®¡æ¨¡å¼åº”ç”¨</h3>
<p><strong>å¸¸ç”¨è®¾è®¡æ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç­–ç•¥æ¨¡å¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaymentStrategy</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(BigDecimal amount)</span>;
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AlipayStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(BigDecimal amount)</span> {
        <span class="hljs-comment">// æ”¯ä»˜å®æ”¯ä»˜é€»è¾‘</span>
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WechatPayStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(BigDecimal amount)</span> {
        <span class="hljs-comment">// å¾®ä¿¡æ”¯ä»˜é€»è¾‘</span>
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, PaymentStrategy&gt; strategies;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PaymentService</span><span class="hljs-params">(List&lt;PaymentStrategy&gt; strategyList)</span> {
        <span class="hljs-built_in">this</span>.strategies = strategyList.stream()
            .collect(Collectors.toMap(
                s -&gt; s.getClass().getSimpleName().replace(<span class="hljs-string">"Strategy"</span>, <span class="hljs-string">""</span>).toLowerCase(),
                Function.identity()
            ));
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(String paymentType, BigDecimal amount)</span> {
        <span class="hljs-type">PaymentStrategy</span> <span class="hljs-variable">strategy</span> <span class="hljs-operator">=</span> strategies.get(paymentType.toLowerCase());
        <span class="hljs-keyword">if</span> (strategy == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ä¸æ”¯æŒçš„æ”¯ä»˜æ–¹å¼: "</span> + paymentType);
        }
        strategy.pay(amount);
    }
}

<span class="hljs-comment">// è§‚å¯Ÿè€…æ¨¡å¼</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">OrderObserver</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onOrderCreated</span><span class="hljs-params">(Order order)</span>;
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailNotificationObserver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderObserver</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onOrderCreated</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// å‘é€é‚®ä»¶é€šçŸ¥</span>
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InventoryObserver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OrderObserver</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onOrderCreated</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// æ›´æ–°åº“å­˜</span>
    }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;OrderObserver&gt; observers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addObserver</span><span class="hljs-params">(OrderObserver observer)</span> {
        observers.add(observer);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// åˆ›å»ºè®¢å•</span>
        <span class="hljs-comment">// é€šçŸ¥è§‚å¯Ÿè€…</span>
        observers.forEach(observer -&gt; observer.onOrderCreated(order));
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WebGPU å¼€å‘è€…ç¦éŸ³ï¼åœ¨ VS Code ä¸­å®æ—¶é¢„è§ˆä½ çš„WGSLç€è‰²å™¨ä½œå“]]></title>    <link>https://juejin.cn/post/7594000527509258281</link>    <guid>https://juejin.cn/post/7594000527509258281</guid>    <pubDate>2026-01-12T06:55:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594000527509258281" data-draft-id="7593692797766418474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WebGPU å¼€å‘è€…ç¦éŸ³ï¼åœ¨ VS Code ä¸­å®æ—¶é¢„è§ˆä½ çš„WGSLç€è‰²å™¨ä½œå“"/> <meta itemprop="keywords" content="å‰ç«¯,GPU,å›¾å½¢å­¦"/> <meta itemprop="datePublished" content="2026-01-12T06:55:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Taiyuuki"/> <meta itemprop="url" content="https://juejin.cn/user/2986701663249047"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WebGPU å¼€å‘è€…ç¦éŸ³ï¼åœ¨ VS Code ä¸­å®æ—¶é¢„è§ˆä½ çš„WGSLç€è‰²å™¨ä½œå“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2986701663249047/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Taiyuuki
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T06:55:51.000Z" title="Mon Jan 12 2026 06:55:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">WebGPU å¼€å‘è€…ç¦éŸ³ï¼åœ¨ VS Code ä¸­å®æ—¶é¢„è§ˆä½ çš„WGSLç€è‰²å™¨ä½œå“</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªæ’ä»¶ï¼Ÿ</h3>
<p>WebGPU æ˜¯ä¸‹ä¸€ä»£ Web å›¾å½¢æ ‡å‡†ï¼Œè€Œ WGSLï¼ˆWebGPU Shading Languageï¼‰æ˜¯å…¶ç€è‰²å™¨è¯­è¨€ã€‚ä½†åœ¨å¼€å‘ WGSL æ—¶ï¼Œç”±äºWebGPU APIçš„å¤æ‚æ€§ï¼Œå“ªæ€•æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„ç€è‰²å™¨æ•ˆæœï¼Œä¹Ÿéœ€è¦å†™å¤§é‡çš„jsä»£ç æ‰èƒ½åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°æ•ˆæœï¼Œè€Œç€è‰²å™¨çš„çƒ­æ›´æ–°ä¹Ÿéå¸¸éº»çƒ¦ï¼Œå¾€å¾€å¾—æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨æ‰èƒ½çœ‹åˆ°ä¿®æ”¹åçš„æ•ˆæœï¼Œå¦å¤–è°ƒè¯•èµ·æ¥ä¹Ÿå¾ˆä¸å‹å¥½ï¼Œç€è‰²å™¨é”™è¯¯å¾€å¾€ä¸ä¼šç›´æ¥æŠ¥é”™ï¼Œè€Œæ˜¯åœ¨æ§åˆ¶å°æ˜¾ç¤ºè­¦å‘Šï¼Œå¼€å‘ä½“éªŒä¸å¥½ã€‚</p>
<p>è€Œ <strong>WGSL Preview</strong> å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œè¯ç”Ÿçš„ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒç‰¹æ€§</h3>
<h4 data-id="heading-3">1. å®æ—¶é¢„è§ˆ &amp; çƒ­é‡è½½</h4>
<p>åœ¨ç¼–è¾‘å™¨å³ä¾§ç›´æ¥æ˜¾ç¤ºæ¸²æŸ“ç»“æœï¼Œä¿®æ”¹ä»£ç åè‡ªåŠ¨åˆ·æ–°ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3412df0dbed142ada003e55ef745d81a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGFpeXV1a2k=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805750&amp;x-signature=BA5sDnXxy%2Fy2HhIabwXy16Nfw7U%3D" alt="vscide-wgsl-preview.gif" loading="lazy"/></p>
<h4 data-id="heading-4">2. å†…ç½® Uniforms</h4>
<p>æ’ä»¶å†…ç½®äº† 6 ä¸ªå¸¸ç”¨çš„ uniform å˜é‡ï¼Œå¼€ç®±å³ç”¨ï¼š</p>








































<table><thead><tr><th>å˜é‡å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>time</code></td><td>f32</td><td>æ—¶é—´</td></tr><tr><td><code>resolution</code></td><td>vec2</td><td>ç”»å¸ƒåˆ†è¾¨ç‡</td></tr><tr><td><code>mouse</code></td><td>vec2</td><td>é¼ æ ‡ä½ç½®</td></tr><tr><td><code>frame</code></td><td>f32</td><td>å¸§è®¡æ•°å™¨</td></tr><tr><td><code>date</code></td><td>vec4</td><td>å½“å‰æ—¥æœŸæ—¶é—´</td></tr><tr><td><code>keyboard</code></td><td>vec4</td><td>æ–¹å‘é”®çŠ¶æ€</td></tr></tbody></table>
<h4 data-id="heading-5">3. çº¹ç† &amp; é‡‡æ ·å™¨æ”¯æŒ</h4>
<p>è½»æ¾åŠ è½½ PNG/JPEG/WebP çº¹ç†ï¼Œæ”¯æŒè‡ªå®šä¹‰é‡‡æ ·å™¨å‚æ•°ã€‚</p>
<h4 data-id="heading-6">4. è‡ªå®šä¹‰ Uniforms</h4>
<p>æ”¯æŒå®Œæ•´çš„ WGSL uniform ç±»å‹ï¼šæ ‡é‡ï¼ˆi32/f32ç­‰ç­‰ï¼‰ã€å‘é‡ï¼ˆvec2/vec3/vec4ï¼‰ã€çŸ©é˜µï¼ˆmat2x2/mat3x3/mat4x4ï¼‰ï¼Œ<strong>è‡ªåŠ¨å¤„ç† std140 å¸ƒå±€å’Œå¯¹é½</strong>ã€‚</p>
<h4 data-id="heading-7">5.å®æ—¶é”™è¯¯ä¿¡æ¯æ˜¾ç¤º</h4>
<p>ç€è‰²å™¨æœ‰é”™è¯¯æ—¶ï¼Œä¼šç›´æ¥å°†è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2b968e4848749b5b3d902e7f5739690~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVGFpeXV1a2k=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805750&amp;x-signature=7BWfHADFIuBn7nwrSWGkvKUqIAc%3D" alt="ScreenShot_2026-01-12_143929_594.png" loading="lazy"/></p>
<h4 data-id="heading-8">6. æ€§èƒ½ç›‘æ§</h4>
<p>å¯é€‰çš„ FPS å’Œæ¸²æŸ“æ—¶é—´æ˜¾ç¤ºï¼Œå¸®ä½ ä¼˜åŒ– shader æ€§èƒ½ã€‚</p>
<h3 data-id="heading-9">æŠ€æœ¯äº®ç‚¹</h3>
<h4 data-id="heading-10">std140 å¸ƒå±€è‡ªåŠ¨å¤„ç†</h4>
<p>WGSL çš„ uniform buffer éœ€è¦éµå¾ª std140 æ ‡å‡†å¸ƒå±€ï¼Œæ‰‹åŠ¨è®¡ç®—åç§»å’Œå¯¹é½éå¸¸å®¹æ˜“å‡ºé”™ã€‚æ’ä»¶è‡ªåŠ¨å¤„ç†ï¼š</p>
<ul>
<li><strong>æ ‡é‡å¯¹é½</strong>ï¼šf32/i32/u32 å¯¹é½åˆ° 4 å­—èŠ‚</li>
<li><strong>å‘é‡å¯¹é½</strong>ï¼švec2 å¯¹é½åˆ° 8 å­—èŠ‚ï¼Œvec3/vec4 å¯¹é½åˆ° 16 å­—èŠ‚</li>
<li><strong>çŸ©é˜µè½¬ç½®</strong>ï¼šè‡ªåŠ¨å°†è¡Œä¼˜å…ˆçŸ©é˜µè½¬ä¸ºåˆ—ä¼˜å…ˆå­˜å‚¨</li>
<li><strong>æ•´æ•°ç±»å‹</strong>ï¼šæ­£ç¡®å¤„ç†æ•´æ•°åˆ°æµ®ç‚¹æ•°çš„ä½æ¨¡å¼è½¬æ¢</li>
</ul>
<h4 data-id="heading-11">å“åº”å¼è®¾è®¡</h4>
<ul>
<li>ä¿®æ”¹ shader ä»£ç  â†’ è‡ªåŠ¨é‡æ¸²æŸ“</li>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶ â†’ ç«‹å³ç”Ÿæ•ˆ</li>
<li>åˆ‡æ¢æ–‡ä»¶ â†’ è‡ªåŠ¨åˆ‡æ¢é¢„è§ˆ</li>
</ul>
<h3 data-id="heading-12">ğŸš€ å¿«é€Ÿä¸Šæ‰‹</h3>
<h4 data-id="heading-13">å®‰è£…</h4>
<p>åœ¨ VS Code æ‰©å±•å¸‚åœºæœç´¢ <strong>"WGSL Preview"</strong> æˆ–ä½¿ç”¨å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">code --install-extension taiyuuki.vscode-wgsl-renderer
</code></pre>
<h4 data-id="heading-14">åŸºç¡€ç¤ºä¾‹</h4>
<p>åˆ›å»ºä¸€ä¸ª <code>shader.wgsl</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-wgsl" lang="wgsl">struct VSOut {
    @builtin(position) pos: vec4&lt;f32&gt;,
    @location(0) uv: vec2&lt;f32&gt;,
}

@vertex
fn vs_main(@location(0) p: vec3&lt;f32&gt;) -&gt; VSOut {
    var o: VSOut;
    o.pos = vec4&lt;f32&gt;(p, 1.0);
    o.uv = p.xy * 0.5 + vec2&lt;f32&gt;(0.5, 0.5);
    o.uv.y = 1.0 - o.uv.y;
    return o;
}

@fragment
fn fs_main(@location(0) uv: vec2&lt;f32&gt;) -&gt; @location(0) vec4&lt;f32&gt; {
    // åˆ›å»ºä¸€ä¸ªæ¸å˜æ•ˆæœ
    let color = vec3&lt;f32&gt;(uv, 0.5);
    return vec4&lt;f32&gt;(color, 1.0);
}
</code></pre>
<p>æŒ‰ <code>Ctrl+Shift+P</code>ï¼Œè¾“å…¥ <code>WGSL: Preview</code>ï¼Œå³å¯çœ‹åˆ°å®æ—¶æ¸²æŸ“æ•ˆæœï¼</p>
<h4 data-id="heading-15">ä½¿ç”¨å†…ç½® Uniforms</h4>
<p>åˆ›å»ºä¸ç€è‰²å™¨æ–‡ä»¶åŒåçš„é…ç½®æ–‡ä»¶ <code>shader.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"uniforms"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"time"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"f32"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"builtin"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resolution"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vec2&lt;f32&gt;"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"builtin"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mouse"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vec2&lt;f32&gt;"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"builtin"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bindings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uniforms"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uniform"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"binding"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Shader ä»£ç ï¼š</p>
<pre><code class="hljs language-wgsl" lang="wgsl">struct Uniforms {
    time: f32,
    resolution: vec2&lt;f32&gt;,
    mouse: vec2&lt;f32&gt;,
}

@group(0) @binding(0) var&lt;uniform&gt; u: Uniforms;

@fragment
fn fs_main(@location(0) uv: vec2&lt;f32&gt;) -&gt; @location(0) vec4&lt;f32&gt; {
    // éšæ—¶é—´å˜åŒ–çš„é¢œè‰²
    let r = 0.5 + 0.5 * sin(u.time);
    let g = 0.5 + 0.5 * cos(u.time * 0.7);

    // é¼ æ ‡äº¤äº’
    let dist = distance(uv * u.resolution, u.mouse);
    let glow = 1.0 - smoothstep(0.0, 100.0, dist);

    return vec4&lt;f32&gt;(r + glow, g + glow, 0.5, 1.0);
}
</code></pre>
<h3 data-id="heading-16">ğŸ“¦ å®Œæ•´é…ç½®ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"canvas"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"width"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">800</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"height"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">600</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"showStats"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"entryPoints"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"vertex"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vs_main"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"fragment"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fs_main"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"uniforms"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"time"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"f32"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"builtin"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"resolution"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vec2&lt;f32&gt;"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"builtin"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"myColor"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vec3&lt;f32&gt;"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.5</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0.2</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"myMatrix"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mat4x4&lt;f32&gt;"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"value"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-number">1</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"textures"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"myTexture"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./image.png"</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"bindings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uniforms"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uniform"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"binding"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"mySampler"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sampler"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"binding"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"myTexture"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"texture"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"binding"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-17">åŠŸèƒ½å±•æœ›</h3>
<p>æ­¤æ’ä»¶çš„å®ç°ä¸»è¦å¾—ç›Šäºæˆ‘è‡ªå·±å†™çš„ä¸€ä¸ªå¤šé€šé“WGSLæ¸²æŸ“å™¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftaiyuuki%2Fwgsl-renderer" target="_blank" title="https://github.com/taiyuuki/wgsl-renderer" ref="nofollow noopener noreferrer">taiyuuki/wgsl-renderer</a> ï¼Œä½†VS Codeæ’ä»¶ç›®å‰è¿˜åªæ”¯æŒå•é€šé“æ¸²æŸ“ï¼Œå¦‚æœæœ‰éœ€æ±‚æ¬¢è¿æäº¤åé¦ˆï¼Œåç»­æˆ‘ä¼šå°†å¯¹å¤šé€šé“çš„æ”¯æŒä¹Ÿè¦†ç›–ä¸Šã€‚</p>
<h3 data-id="heading-18">ç›¸å…³é“¾æ¥</h3>
<ul>
<li><strong>VS Code Marketplace</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3Dtaiyuuki.vscode-wgsl-renderer" target="_blank" title="https://marketplace.visualstudio.com/items?itemName=taiyuuki.vscode-wgsl-renderer" ref="nofollow noopener noreferrer">WGSL Preview</a></li>
<li><strong>GitHub</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftaiyuuki%2Fvscode-wgsl-renderer" target="_blank" title="https://github.com/taiyuuki/vscode-wgsl-renderer" ref="nofollow noopener noreferrer">vscode-wgsl-renderer</a></li>
<li><strong>ç¤ºä¾‹ä»£ç </strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftaiyuuki%2Fvscode-wgsl-renderer%2Ftree%2Fmain%2Fexample" target="_blank" title="https://github.com/taiyuuki/vscode-wgsl-renderer/tree/main/example" ref="nofollow noopener noreferrer">examples ç›®å½•</a></li>
</ul>
<h3 data-id="heading-19">åé¦ˆä¸å»ºè®®</h3>
<p>å¦‚æœä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œæ¬¢è¿ï¼š</p>
<ul>
<li>åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftaiyuuki%2Fvscode-renderer%2Fissues" target="_blank" title="https://github.com/taiyuuki/vscode-renderer/issues" ref="nofollow noopener noreferrer">GitHub Issues</a> æé—®</li>
<li>åœ¨æ­¤ç•™è¨€</li>
</ul>
<p><strong>Star</strong> â­ æ”¯æŒä¸€ä¸‹ï¼Œè®©æ›´å¤š WGSL å¼€å‘è€…å—ç›Šï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ˜¯çš„ï¼Œå¾®ä¿¡å°ç¨‹åºçš„ show-menu-by-longpress çœŸçš„ä¼šè®©ä½ æ— è¯­]]></title>    <link>https://juejin.cn/post/7594482829754630190</link>    <guid>https://juejin.cn/post/7594482829754630190</guid>    <pubDate>2026-01-13T06:57:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594482829754630190" data-draft-id="7594616268781125659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ˜¯çš„ï¼Œå¾®ä¿¡å°ç¨‹åºçš„ show-menu-by-longpress çœŸçš„ä¼šè®©ä½ æ— è¯­"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-13T06:57:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŸ¥äº†æ¸…è¯­"/> <meta itemprop="url" content="https://juejin.cn/user/2436173498942055"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ˜¯çš„ï¼Œå¾®ä¿¡å°ç¨‹åºçš„ show-menu-by-longpress çœŸçš„ä¼šè®©ä½ æ— è¯­
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436173498942055/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŸ¥äº†æ¸…è¯­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:57:30.000Z" title="Tue Jan 13 2026 06:57:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å®˜æ–¹æ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.weixin.qq.com%2Fminiprogram%2Fdev%2Fcomponent%2Fimage.html%23%25E6%2594%25AF%25E6%258C%2581%25E9%2595%25BF%25E6%258C%2589%25E8%25AF%2586%25E5%2588%25AB%25E7%259A%2584%25E7%25A0%2581" target="_blank" title="https://developers.weixin.qq.com/miniprogram/dev/component/image.html#%E6%94%AF%E6%8C%81%E9%95%BF%E6%8C%89%E8%AF%86%E5%88%AB%E7%9A%84%E7%A0%81" ref="nofollow noopener noreferrer">åª’ä½“ç»„ä»¶ / image</a>  è¯´ç»™ä¸€ä¸ªå›¾ç‰‡æ·»åŠ è¿™ä¸ªå±æ€§ï¼Œ å¯ä»¥å®ç°é•¿æŒ‰è¯†åˆ«äºŒç»´ç çš„æ•ˆæœ</p>
<p>åœ¨å¼€å‘è€…å·¥å…·æ˜¯å¯ä»¥çš„ï¼Œä¹Ÿæœ‰æ•ˆæœï¼Œ å‘ä½“éªŒç‰ˆä¸è¡Œã€‚ ä¹Ÿæ²¡æœ‰ä»€ä¹ˆæŠ¥é”™ä¿¡æ¯ã€‚ éå¸¸çš„å‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2d8a809aafd4ddabc182315c858f60b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l5LqG5riF6K-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768892249&amp;x-signature=z8RJlgt9ZcldkM6cZQsmrakARAU%3D" alt="fd67f83d3676a40e9b78c1007b8bff14_compress.jpg" loading="lazy"/></p>
<p>æ¯”å¦‚è¿™æ ·çš„ æ™®é€šçš„äºŒç»´ç ï¼Œ æ˜¯ç¬¬ä¸‰æ–¹çš„ éšä¾¿æ‰¾çš„ä¸€ä¸ªåœ°å€</p>
<p>ç”¨å°ç¨‹åºåŸç”Ÿå¼€å‘  ï¼Œ å‘ç°å°±èµ°æµ‹è¯•æµç¨‹ä¸å¤ªè¡Œ</p>
<p>æœ€åå‘ç°è¿™ä¸œè¥¿å¾—å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒæ‰å¯ä»¥ã€‚ æ–‡æ¡£ä¹Ÿæ²¡æœ‰è¯´è¿™ä¸€ç‚¹ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">&lt;image show-menu-by-longpress=<span class="hljs-string">"{{true}}"</span> src=<span class="hljs-string">'https://xxxx'</span>&gt;&lt;/image&gt;
</code></pre>
<p>å’±å°±æ˜¯è¯´ï¼Œ ä¼—å¤šå¼€å‘è€…æ”¯æŒä½ ï¼Œ å¥½æ­¹èƒ½ç»™å¤§å®¶æŒ–ä¸€äº›å‘å‘¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº YOLOv8 çš„æ˜†è™«æ™ºèƒ½è¯†åˆ«å·¥ç¨‹å®è·µ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]]]></title>    <link>https://juejin.cn/post/7594514040917147675</link>    <guid>https://juejin.cn/post/7594514040917147675</guid>    <pubDate>2026-01-13T06:59:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594514040917147675" data-draft-id="7594616268781191195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº YOLOv8 çš„æ˜†è™«æ™ºèƒ½è¯†åˆ«å·¥ç¨‹å®è·µ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-13T06:59:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº YOLOv8 çš„æ˜†è™«æ™ºèƒ½è¯†åˆ«å·¥ç¨‹å®è·µ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:59:38.000Z" title="Tue Jan 13 2026 06:59:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäº YOLOv8 çš„æ˜†è™«æ™ºèƒ½è¯†åˆ«å·¥ç¨‹å®è·µ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]</h2>
<h3 data-id="heading-1">å¼•è¨€ï¼šä¸ºä»€ä¹ˆâ€œè™«å­è¯†åˆ«â€å€¼å¾—ç”¨æ·±åº¦å­¦ä¹ é‡åšä¸€éï¼Ÿ</h3>
<p>åœ¨å†œä¸šç”Ÿäº§ã€æ—ä¸šä¿æŠ¤ä»¥åŠç”Ÿæ€ç›‘æµ‹ä¸­ï¼Œ<strong>æ˜†è™«ç§ç±»è¯†åˆ«</strong>ä¸€ç›´æ˜¯ä¸€é¡¹é«˜åº¦ä¾èµ–ç»éªŒçš„å·¥ä½œã€‚ä¼ ç»Ÿæ–¹æ³•é€šå¸¸ä¾èµ–äººå·¥è§‚å¯Ÿæˆ–è§„åˆ™ç‰¹å¾æ¯”å¯¹ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œè€Œä¸”åœ¨å¤æ‚å…‰ç…§ã€è™«ä½“å§¿æ€å˜åŒ–ã€å¤šè™«åŒæ¡†ç­‰æƒ…å†µä¸‹ï¼Œå‡†ç¡®ç‡éš¾ä»¥ä¿è¯ã€‚</p>
<p>éšç€è®¡ç®—æœºè§†è§‰æŠ€æœ¯çš„å‘å±•ï¼Œç›®æ ‡æ£€æµ‹æ¨¡å‹å·²ç»èƒ½å¤Ÿåœ¨å¤æ‚ç¯å¢ƒä¸­ç¨³å®šè¯†åˆ«å¤šç±»åˆ«ç›®æ ‡ã€‚å…¶ä¸­ï¼ŒYOLO ç³»åˆ—æ¨¡å‹å› å…¶<strong>å®æ—¶æ€§å¼ºã€éƒ¨ç½²æˆæœ¬ä½</strong>ï¼Œæˆä¸ºå®é™…åœºæ™¯ä¸­æœ€å…·æ€§ä»·æ¯”çš„é€‰æ‹©ä¹‹ä¸€ã€‚</p>
<p>æœ¬æ–‡å°†ä»å·¥ç¨‹è½åœ°è§’åº¦ï¼Œä»‹ç»ä¸€ä¸ª<strong>åŸºäº YOLOv8 çš„æ˜†è™«ç§ç±»è¯†åˆ«ç³»ç»Ÿ</strong>ï¼Œè¦†ç›–æ•°æ®å‡†å¤‡ã€æ¨¡å‹è®­ç»ƒã€æ¨ç†æµç¨‹ä»¥åŠå¯è§†åŒ–åº”ç”¨æ„å»ºï¼Œå®Œæ•´å±•ç¤ºå¦‚ä½•å°†ä¸€ä¸ªæ£€æµ‹æ¨¡å‹æ‰“é€ æˆâ€œçœŸæ­£å¯ç”¨â€çš„ AI ç³»ç»Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f2d6927f5774ccca9212fa80f0c15ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768892378&amp;x-signature=asVefj1%2FKW6VXGvezWFZWz%2BFNiM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h3>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1sGuRzKEwZ%2F" target="_blank" title="https://www.bilibili.com/video/BV1sGuRzKEwZ/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1sGâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/960b4301757540fb813c0c21b65cf5b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768892378&amp;x-signature=qV%2FF4GNOQ9AXRLRsuj%2BWX8mlI4g%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<hr/>
<h3 data-id="heading-3">ä¸€ã€ç³»ç»Ÿæ•´ä½“è®¾è®¡ï¼šä¸åªæ˜¯ä¸€ä¸ªæ¨¡å‹</h3>
<p>ä¸å•çº¯çš„ç®—æ³• Demo ä¸åŒï¼Œæœ¬é¡¹ç›®çš„ç›®æ ‡æ˜¯æ„å»ºä¸€å¥—<strong>å¼€ç®±å³ç”¨çš„æ˜†è™«è¯†åˆ«ç³»ç»Ÿ</strong>ã€‚æ•´ä½“æ¶æ„åˆ†ä¸ºå››ä¸ªå±‚çº§ï¼š</p>
<ol>
<li><strong>æ•°æ®å±‚</strong>ï¼šå¤šç±»åˆ«æ˜†è™«å›¾åƒæ•°æ®é›†ä¸æ ‡å‡†åŒ–æ ‡æ³¨</li>
<li><strong>æ¨¡å‹å±‚</strong>ï¼šåŸºäº YOLOv8 çš„ç›®æ ‡æ£€æµ‹ç½‘ç»œ</li>
<li><strong>æ¨ç†å±‚</strong>ï¼šç»Ÿä¸€çš„æ¨¡å‹åŠ è½½ä¸é¢„æµ‹æ¥å£</li>
<li><strong>åº”ç”¨å±‚</strong>ï¼šPyQt5 å›¾å½¢åŒ–æ¡Œé¢ç³»ç»Ÿ</li>
</ol>
<p>è¿™ç§åˆ†å±‚è®¾è®¡çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>æ¨¡å‹å¯éšæ—¶æ›¿æ¢æˆ–é‡æ–°è®­ç»ƒ</li>
<li>æ¨ç†é€»è¾‘ä¸ç•Œé¢è§£è€¦</li>
<li>ä¾¿äºåç»­è¿ç§»åˆ°è¾¹ç¼˜è®¾å¤‡æˆ– Web æœåŠ¡</li>
</ul>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/373303f633f544bea2af30cbf9c288cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768892378&amp;x-signature=V%2FWlGTqGfQwr53FyC9ekYJXISrM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6cfbb04fc194aa0994753192afdfabe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768892378&amp;x-signature=A7V8Tyctcp7oM%2BPnjPIPsaKKNTE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-4">äºŒã€ä¸ºä»€ä¹ˆé€‰æ‹© YOLOv8 è¿›è¡Œæ˜†è™«è¯†åˆ«ï¼Ÿ</h3>
<h4 data-id="heading-5">2.1 æ˜†è™«è¯†åˆ«çš„æŠ€æœ¯æŒ‘æˆ˜</h4>
<p>ä¸å¸¸è§„ç‰©ä½“æ£€æµ‹ç›¸æ¯”ï¼Œæ˜†è™«è¯†åˆ«å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ç›®æ ‡å°ºå¯¸å°ã€ç»†èŠ‚ä¸°å¯Œ</li>
<li>ç±»åˆ«é—´å¤–è§‚å·®å¼‚å¾®å¼±</li>
<li>èƒŒæ™¯å¤æ‚ï¼Œå®¹æ˜“äº§ç”Ÿè¯¯æ£€</li>
<li>å¤šç›®æ ‡åŒæ—¶å‡ºç°çš„æƒ…å†µé¢‘ç¹</li>
</ul>
<p>è¿™å¯¹æ¨¡å‹çš„å®šä½èƒ½åŠ›å’Œç‰¹å¾è¡¨è¾¾èƒ½åŠ›æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚</p>
<h4 data-id="heading-6">2.2 YOLOv8 çš„å·¥ç¨‹ä¼˜åŠ¿</h4>
<p>YOLOv8 åœ¨è®¾è®¡ä¸Šé’ˆå¯¹ä¸Šè¿°é—®é¢˜å…·å¤‡æ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>Anchor-Free æœºåˆ¶</strong>ï¼šå‡å°‘äººä¸ºå‚æ•°ä¾èµ–</li>
<li><strong>è§£è€¦æ£€æµ‹å¤´</strong>ï¼šæå‡åˆ†ç±»ä¸å›å½’ç¨³å®šæ€§</li>
<li><strong>Task-Aligned Assigner</strong>ï¼šå¯¹éš¾æ ·æœ¬æ›´å‹å¥½</li>
<li><strong>è½»é‡åŒ–æ¨¡å‹ç»“æ„</strong>ï¼šé€‚åˆå®æ—¶æ£€æµ‹ä¸æ¡Œé¢ç«¯è¿è¡Œ</li>
</ul>
<p>åœ¨å®é™…æµ‹è¯•ä¸­ï¼ŒYOLOv8 åœ¨è™«ä½“é®æŒ¡ã€å°ºåº¦å˜åŒ–è¾ƒå¤§çš„åœºæ™¯ä¸‹ä»èƒ½ä¿æŒç¨³å®šæ£€æµ‹æ•ˆæœã€‚</p>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€æ•°æ®é›†æ„å»ºä¸è®­ç»ƒå‡†å¤‡</h3>
<h4 data-id="heading-8">3.1 æ•°æ®ç»„ç»‡æ–¹å¼</h4>
<p>é¡¹ç›®é‡‡ç”¨ YOLO æ ‡å‡†æ•°æ®æ ¼å¼ï¼Œç»“æ„æ¸…æ™°ï¼Œä¾¿äºæ‰©å±•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train
â”‚   â””â”€â”€ <span class="hljs-keyword">val</span>
â””â”€â”€ labels/
    â”œâ”€â”€ train
    â””â”€â”€ <span class="hljs-keyword">val</span>
</code></pre>
<p>æ¯å¼ å›¾ç‰‡å¯¹åº”ä¸€ä¸ª <code>.txt</code> æ ‡æ³¨æ–‡ä»¶ï¼Œè®°å½•ç›®æ ‡ç±»åˆ«ä¸å½’ä¸€åŒ–åçš„è¾¹æ¡†åæ ‡ã€‚</p>
<h4 data-id="heading-9">3.2 å¤šç±»åˆ«æ˜†è™«æ ‡æ³¨ç­–ç•¥</h4>
<p>åœ¨æ˜†è™«æ£€æµ‹ä»»åŠ¡ä¸­ï¼Œæ¯ä¸€ç§è™«ç±»è¢«è§†ä¸ºä¸€ä¸ªç‹¬ç«‹æ£€æµ‹ç±»åˆ«ã€‚ç›¸æ¯”çº¯åˆ†ç±»æ¨¡å‹ï¼Œæ£€æµ‹æ–¹å¼å…·å¤‡ä¸¤ä¸ªä¼˜åŠ¿ï¼š</p>
<ul>
<li>èƒ½å¤„ç†å¤šè™«åŒæ¡†åœºæ™¯</li>
<li>å¯è¾“å‡ºç²¾ç¡®ä½ç½®ä¿¡æ¯ï¼Œä¾¿äºåç»­åˆ†æ</li>
</ul>
<p>è¿™ç§è®¾è®¡ä¹Ÿä¸ºæœªæ¥çš„è™«å®³ç»Ÿè®¡ã€å¯†åº¦åˆ†æç­‰ä»»åŠ¡æä¾›äº†åŸºç¡€ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4addb004659e441d8733d58e658c7a84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768892378&amp;x-signature=3VHNX1Ir1%2FiKfMWIOQe2079%2FYnc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-10">å››ã€æ¨¡å‹è®­ç»ƒä¸æ•ˆæœè¯„ä¼°</h3>
<h4 data-id="heading-11">4.1 è®­ç»ƒæµç¨‹æ¦‚è¿°</h4>
<p>æ¨¡å‹è®­ç»ƒåŸºäº Ultralytics å®˜æ–¹ YOLOv8 æ¥å£å®Œæˆï¼Œæ”¯æŒï¼š</p>
<ul>
<li>é¢„è®­ç»ƒæƒé‡åˆå§‹åŒ–</li>
<li>è‡ªå®šä¹‰ç±»åˆ«æ•°é‡</li>
<li>çµæ´»é…ç½®è®­ç»ƒè½®æ¬¡ä¸ batch size</li>
</ul>
<p>è®­ç»ƒè¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨ç”ŸæˆæŸå¤±æ›²çº¿ä¸ç²¾åº¦è¯„ä¼°æŒ‡æ ‡ï¼Œæ–¹ä¾¿åˆ¤æ–­æ¨¡å‹æ”¶æ•›çŠ¶æ€ã€‚</p>
<h4 data-id="heading-12">4.2 å¦‚ä½•åˆ¤æ–­æ¨¡å‹æ˜¯å¦â€œå¯ç”¨â€ï¼Ÿ</h4>
<p>åœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œè¯„ä¼°æ¨¡å‹ä¸ä»…è¦çœ‹æ•°å€¼ï¼Œæ›´è¦ç»“åˆåº”ç”¨éœ€æ±‚ï¼š</p>
<ul>
<li><strong>mAP@0.5</strong>ï¼šè¡¡é‡æ•´ä½“æ£€æµ‹ç²¾åº¦</li>
<li><strong>Loss æ›²çº¿è¶‹åŠ¿</strong>ï¼šåˆ¤æ–­æ˜¯å¦è¿‡æ‹Ÿåˆæˆ–æ¬ æ‹Ÿåˆ</li>
<li><strong>å®é™…æ¨ç†æ•ˆæœ</strong>ï¼šæ˜¯å¦å­˜åœ¨æ˜æ˜¾è¯¯æ£€æˆ–æ¼æ£€</li>
</ul>
<p>å½“æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šè¡¨ç°ç¨³å®šï¼Œå¹¶åœ¨çœŸå®å›¾ç‰‡ä¸­æ£€æµ‹æ•ˆæœå¯é ï¼Œå³å¯è¿›å…¥éƒ¨ç½²é˜¶æ®µã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7c92b9ef4c9422eae8ea3f2d3c0097f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768892378&amp;x-signature=3IQoB%2BvM4xmgxOR64k%2F3NQQge6I%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-13">äº”ã€æ¨ç†æ¨¡å—è®¾è®¡ï¼šè®©æ¨¡å‹çœŸæ­£è·‘èµ·æ¥</h3>
<p>è®­ç»ƒå®Œæˆåï¼Œæ¨¡å‹å°†è¢«ç”¨äºå®é™…æ¨ç†ä»»åŠ¡ã€‚æ¨ç†æ¨¡å—ä¸»è¦å®Œæˆä»¥ä¸‹å·¥ä½œï¼š</p>
<ul>
<li>åŠ è½½è®­ç»ƒå¥½çš„æƒé‡æ–‡ä»¶</li>
<li>æ¥æ”¶å›¾åƒ / è§†é¢‘ / æ‘„åƒå¤´è¾“å…¥</li>
<li>è¾“å‡ºæ£€æµ‹æ¡†ã€ç±»åˆ«æ ‡ç­¾ä¸ç½®ä¿¡åº¦</li>
</ul>
<p>æ‰€æœ‰æ¨ç†ç»“æœç»Ÿä¸€å°è£…ï¼Œä¾›ä¸Šå±‚ GUI æˆ–å…¶ä»–ç³»ç»Ÿè°ƒç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-14">å…­ã€PyQt5 å¯è§†åŒ–ç³»ç»Ÿï¼šé™ä½ä½¿ç”¨é—¨æ§›</h3>
<h4 data-id="heading-15">6.1 ä¸ºä»€ä¹ˆè¦åšå›¾å½¢ç•Œé¢ï¼Ÿ</h4>
<p>åœ¨çœŸå®åº”ç”¨åœºæ™¯ä¸­ï¼Œç³»ç»Ÿä½¿ç”¨è€…å¾€å¾€å¹¶éç®—æ³•å·¥ç¨‹å¸ˆã€‚é€šè¿‡ PyQt5 æ„å»ºæ¡Œé¢ç«¯ç•Œé¢ï¼Œå¯ä»¥å®ç°ï¼š</p>
<ul>
<li>æ— éœ€å‘½ä»¤è¡Œæ“ä½œ</li>
<li>ä¸€é”®åŠ è½½æ¨¡å‹å¹¶æ£€æµ‹</li>
<li>å®æ—¶æŸ¥çœ‹è¯†åˆ«ç»“æœ</li>
</ul>
<p>è¿™ä½¿å¾—æ¨¡å‹ä»â€œæŠ€æœ¯ Demoâ€å‡çº§ä¸ºâ€œå¯äº¤ä»˜å·¥å…·â€ã€‚</p>
<h4 data-id="heading-16">6.2 æ”¯æŒçš„æ£€æµ‹æ–¹å¼</h4>
<p>å½“å‰ç³»ç»Ÿæ”¯æŒå¤šç§è¾“å…¥å½¢å¼ï¼š</p>
<ul>
<li>å•å¼ å›¾ç‰‡æ£€æµ‹</li>
<li>æ–‡ä»¶å¤¹æ‰¹é‡æ£€æµ‹</li>
<li>è§†é¢‘æ–‡ä»¶é€å¸§è¯†åˆ«</li>
<li>å®æ—¶æ‘„åƒå¤´æ£€æµ‹</li>
</ul>
<p>æ‰€æœ‰æ£€æµ‹ç»“æœå‡å¯è‡ªåŠ¨ä¿å­˜ï¼Œä¾¿äºåç»­å¤æ ¸ä¸æ•°æ®ç§¯ç´¯ã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72a0cbc2547e4dd0837865f5aa1dded3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768892378&amp;x-signature=DJOiQs%2FcDIiTi0gsEx9EIvwh35I%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-17">ä¸ƒã€åº”ç”¨åœºæ™¯ä¸æ‰©å±•æ–¹å‘</h3>
<p>è¯¥æ˜†è™«è¯†åˆ«ç³»ç»Ÿå¯å¹¿æ³›åº”ç”¨äºï¼š</p>
<ul>
<li>å†œä¸šè™«å®³æ™ºèƒ½ç›‘æµ‹</li>
<li>æ—ä¸šç”Ÿæ€è°ƒæŸ¥</li>
<li>ç§‘ç ”æ•°æ®è‡ªåŠ¨é‡‡é›†</li>
<li>æ•™å­¦ä¸å®éªŒæ¼”ç¤º</li>
</ul>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•ï¼š</p>
<ul>
<li>è™«ç±»æ•°é‡ç»Ÿè®¡ä¸è¶‹åŠ¿åˆ†æ</li>
<li>è¾¹ç¼˜è®¾å¤‡éƒ¨ç½²ï¼ˆå¦‚ Jetson / RK å¹³å°ï¼‰</li>
<li>ä¸ç‰©è”ç½‘è®¾å¤‡è”åŠ¨ï¼Œå®ç°è‡ªåŠ¨é¢„è­¦</li>
</ul>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6ce73a89ae04d3996ea871977b86a3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768892378&amp;x-signature=IMzg1LW2egbvdH5tZbjLCvigNz0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-18">æ€»ç»“</h3>
<p>æœ¬æ–‡ä»å·¥ç¨‹å®è·µè§’åº¦ï¼Œç³»ç»Ÿä»‹ç»äº†ä¸€å¥—<strong>åŸºäº YOLOv8 çš„æ˜†è™«ç§ç±»æ™ºèƒ½è¯†åˆ«æ–¹æ¡ˆ</strong>ã€‚è¯¥æ–¹æ¡ˆä¸ä»…æ¶µç›–æ¨¡å‹è®­ç»ƒä¸æ¨ç†ï¼Œè¿˜é€šè¿‡ PyQt5 æ„å»ºäº†å®Œæ•´çš„å¯è§†åŒ–åº”ç”¨ï¼Œä½¿æ·±åº¦å­¦ä¹ æ¨¡å‹çœŸæ­£å…·å¤‡â€œå¯ç”¨æ€§â€ã€‚</p>
<p>å…¶æ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ä¸‰ç‚¹ï¼š</p>
<ol>
<li>å°†ç›®æ ‡æ£€æµ‹ç®—æ³•è½¬åŒ–ä¸ºå®é™…å¯æ“ä½œç³»ç»Ÿ</li>
<li>æ˜¾è‘—é™ä½æ˜†è™«è¯†åˆ«åº”ç”¨çš„æŠ€æœ¯é—¨æ§›</li>
<li>ä¸ºå†œä¸šä¸ç”Ÿæ€åœºæ™¯æä¾›å¯æ‰©å±•çš„ AI åŸºç¡€èƒ½åŠ›</li>
</ol>
<p>æœ¬æ–‡ä»å·¥ç¨‹è½åœ°çš„è§†è§’å‡ºå‘ï¼Œç³»ç»Ÿä»‹ç»äº†ä¸€å¥—åŸºäº YOLOv8 çš„æ˜†è™«ç§ç±»æ™ºèƒ½è¯†åˆ«è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡è§„èŒƒåŒ–çš„æ•°æ®é›†æ„å»ºã€é«˜æ•ˆçš„æ¨¡å‹è®­ç»ƒä¸è¯„ä¼°æµç¨‹ï¼Œä»¥åŠç»“åˆ PyQt5 å®ç°çš„å¯è§†åŒ–æ¡Œé¢åº”ç”¨ï¼Œå®Œæ•´å‘ˆç°äº†ä»ç®—æ³•æ¨¡å‹åˆ°å¯ç”¨ç³»ç»Ÿçš„æŠ€æœ¯é—­ç¯ã€‚è¯¥æ–¹æ¡ˆä¸ä»…éªŒè¯äº† YOLOv8 åœ¨å¤šç±»åˆ«ã€å°ç›®æ ‡æ˜†è™«è¯†åˆ«åœºæ™¯ä¸‹çš„å‡†ç¡®æ€§ä¸å®æ—¶æ€§ï¼Œä¹Ÿæ˜¾è‘—é™ä½äº†æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨å†œä¸šä¸ç”Ÿæ€ç›‘æµ‹é¢†åŸŸçš„ä½¿ç”¨é—¨æ§›ï¼Œä¸ºåç»­è™«å®³ç›‘æµ‹ã€ç»Ÿè®¡åˆ†æåŠè¾¹ç¼˜è®¾å¤‡éƒ¨ç½²æä¾›äº†å¯é çš„æŠ€æœ¯åŸºç¡€ã€‚</p>
<p>æ— è®ºä½ æ˜¯å¸Œæœ›å¿«é€Ÿå…¥é—¨ YOLOv8 çš„å­¦ä¹ è€…ï¼Œè¿˜æ˜¯è®¡åˆ’å°†è§†è§‰æŠ€æœ¯åº”ç”¨äºçœŸå®ä¸šåŠ¡åœºæ™¯çš„å¼€å‘è€…ï¼Œè¯¥é¡¹ç›®éƒ½å…·å¤‡è¾ƒé«˜çš„å‚è€ƒä»·å€¼ä¸å®è·µæ„ä¹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆäº”ï¼‰ï¼šå¥‘çº¦ç»§æ‰¿åŸåˆ™]]></title>    <link>https://juejin.cn/post/7594051311647342601</link>    <guid>https://juejin.cn/post/7594051311647342601</guid>    <pubDate>2026-01-12T06:20:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594051311647342601" data-draft-id="7594040270502985766" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆäº”ï¼‰ï¼šå¥‘çº¦ç»§æ‰¿åŸåˆ™"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-12T06:20:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç‹å£®å£®"/> <meta itemprop="url" content="https://juejin.cn/user/4473272506789485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆäº”ï¼‰ï¼šå¥‘çº¦ç»§æ‰¿åŸåˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4473272506789485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç‹å£®å£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T06:20:33.000Z" title="Mon Jan 12 2026 06:20:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong></p>
<p>åŸåå«ã€Šé‡Œæ°æ›¿æ¢åŸåˆ™ã€‹, ä½†æ„Ÿè§‰è¿™ä¸ªåå­—ä¸æ˜¯å¾ˆå¥½ç†è§£, ä¾¿è½¬è¯‘æˆä¸ºã€Šå¥‘çº¦ç»§æ‰¿åŸåˆ™ã€‹,å¾ˆå¤šå‰ç«¯åŒå­¦çœ‹åˆ°, ç¬¬ä¸€ååº”é€šå¸¸æ˜¯ï¼šâ€œè¿™æ˜¯ Java/C++ é‚£å¸®åç«¯æç»§æ‰¿æ—¶ç”¨çš„å§ï¼Ÿæˆ‘å†™ React/Vue éƒ½æ˜¯ç»„åˆä¼˜äºç»§æ‰¿ï¼Œè¿™ç©æ„å„¿è·Ÿæˆ‘æœ‰å•¥å…³ç³»ï¼Ÿâ€</p>
<p>è¿™æ˜¯ä¸€ä¸ªå·¨å¤§çš„è¯¯åŒºã€‚</p>
<p>å¦‚æœä½ æ›¾ç»é‡åˆ°è¿‡ <strong>â€œå°è£…äº†ä¸€ä¸ªç»„ä»¶ï¼Œåˆ«äººæƒ³åŠ ä¸ª <code>style</code> å´æ­»æ´»ä¸ç”Ÿæ•ˆâ€</strong> ï¼Œæˆ–è€… <strong>â€œæ¢äº†ä¸€ä¸ªæ•°æ®æº SDKï¼Œç»“æœæ•´ä¸ªé¡µé¢ç›´æ¥ç™½å±â€</strong> ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ æ­£å¥½æ’åœ¨äº†è¿å LSP çš„æªå£ä¸Šã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬è¦èŠçš„å°±ä¸¤ä¸ªå­—ï¼š<strong>å¥‘çº¦</strong>ã€‚</p>
</blockquote>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b706c9f9eede4c2c8c756fe249fac307~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803632&amp;x-signature=76RC8hhIGLZLi5SZfTUtnBNpP6Y%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-0">ä¸€ã€ ä»€ä¹ˆæ˜¯é‡Œæ°æ›¿æ¢ï¼Ÿï¼ˆåˆ«èƒŒå…¬å¼ï¼Œçœ‹äººè¯ï¼‰</h3>
<p>æ•™ç§‘ä¹¦ä¸Šè¯´ï¼š <em>â€œè‹¥å¯¹æ¯ä¸ªç±»å‹ S çš„å¯¹è±¡ o1ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªç±»å‹ T çš„å¯¹è±¡ o2ï¼Œä½¿å¾—åœ¨æ‰€æœ‰é’ˆå¯¹ T ç¼–å†™çš„ç¨‹åº P ä¸­ï¼Œç”¨ o1 æ›¿æ¢ o2 åï¼Œç¨‹åº P è¡Œä¸ºåŠŸèƒ½ä¸å˜ï¼Œåˆ™ S æ˜¯ T çš„å­ç±»å‹ã€‚â€</em></p>
<p>ğŸ¤¯ <strong>æ˜¯ä¸æ˜¯æƒ³å…³ç½‘é¡µäº†ï¼Ÿæ¥ï¼Œç¿»è¯‘æˆäººè¯ï¼š</strong></p>
<p><strong>â€œè€çˆ¸èƒ½å»çš„åœ°æ–¹ï¼Œå„¿å­å¿…é¡»ä¹Ÿèƒ½å»ï¼Œè€Œä¸”ä¸èƒ½æç ´åã€‚â€</strong></p>
<p>åœ¨å‰ç«¯è¯­å¢ƒä¸‹ï¼Œè¿™ä¸ªâ€œçˆ¶å­å…³ç³»â€ä¸ä¸€å®šæ˜¯ <code>class extends</code>ï¼Œæ›´å¤šæ—¶å€™ä½“ç°ä¸º <strong>æ¥å£ï¼ˆInterfaceï¼‰ä¸å®ç°</strong>ï¼Œæˆ–è€… <strong>åŸºç¡€ç»„ä»¶ä¸ä¸šåŠ¡ç»„ä»¶</strong> çš„å…³ç³»ã€‚</p>
<p>å¦‚æœä¸éµå®ˆ LSPï¼Œä»£ç å°±ä¼šå˜æˆï¼šâ€œçœ‹ç€åƒä¸ªé¸­å­ï¼Œèµ°è·¯åƒä¸ªé¸­å­ï¼Œä½†ä½ å–‚å®ƒåƒé¥­æ—¶ï¼Œå®ƒçªç„¶çˆ†ç‚¸äº†ã€‚â€</p>
<blockquote>
<p><strong>æ’æ’­ä¸€æ¡æ˜Ÿçˆ·è¯­å½•</strong></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22e7d7e405b9423386d6e3accc08c42b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768803632&amp;x-signature=vkzAunbS5guZPpVRJMRPWJnKYDM%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">äºŒã€ åœºæ™¯ä¸€ï¼šUI ç»„ä»¶çš„â€œé˜‰å‰²â€æƒ¨æ¡ˆ</h3>
<p>è¿™æ˜¯å‰ç«¯è¿å LSP æœ€é‡ç¾åŒºçš„ç°åœºã€‚</p>
<p>å‡è®¾ä½ ä¸ºäº†ç»Ÿä¸€ UI é£æ ¼ï¼ŒåŸºäºåŸç”Ÿçš„ <code>&lt;button&gt;</code> å°è£…äº†ä¸€ä¸ª <code>PrimaryButton</code>ã€‚</p>
<h4 data-id="heading-2">é”™è¯¯ç¤ºèŒƒï¼šè‡ªä»¥ä¸ºæ˜¯çš„å°è£…</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PrimaryButtonProps</span> {
  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-comment">// çœ‹èµ·æ¥å¾ˆæ¸…çˆ½ï¼Œå¯¹å§ï¼Ÿ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">PrimaryButton</span> = (<span class="hljs-params">{ label, onClick }: PrimaryButtonProps</span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-500 text-white px-4 py-2"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>&gt;</span>
      {label}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
};
</code></pre>
<p><strong>ä½¿ç”¨è€…å´©æºƒç°åœºï¼š</strong> åŒäº‹ A æ‹¿å»ç”¨ï¼Œæƒ³ç»™æŒ‰é’®åŠ ä¸ª <code>disabled</code> çŠ¶æ€ï¼š <code>&lt;PrimaryButton label="æäº¤" disabled={true} /&gt;</code> ğŸ‘‰ <strong>æŠ¥é”™</strong>ï¼šç±»å‹ 'PrimaryButtonProps' ä¸Šä¸å­˜åœ¨å±æ€§ 'disabled'ã€‚</p>
<p>åŒäº‹ B å¼ºè¡Œç”¨ <code>any</code> ä¼ äº†è¿›å»ï¼Œç»“æœç•Œé¢ä¸ŠæŒ‰é’®ä¾ç„¶å¯ä»¥ç‚¹å‡»ã€‚ ğŸ‘‰ <strong>Bug åŸå› </strong>ï¼šä½ åœ¨å†…éƒ¨æ ¹æœ¬æ²¡æŠŠ <code>...rest</code> ä¼ ç»™ buttonã€‚</p>
<p><strong>æ·±åº¦è§£æï¼š</strong> è¿™é‡Œçš„ <code>PrimaryButton</code> æ—¢ç„¶åœ¨è¯­ä¹‰ä¸Šæ˜¯ä¸€ä¸ªâ€œæŒ‰é’®â€ï¼Œå®ƒå°±åº”è¯¥èƒ½æ›¿æ¢åŸç”Ÿ <code>&lt;button&gt;</code> çš„ç»å¤§éƒ¨åˆ†åœºæ™¯ã€‚ä½ ä¸ºäº†çœäº‹ï¼Œ <strong>â€œé˜‰å‰²â€</strong> äº†çˆ¶ç±»ï¼ˆåŸç”Ÿ buttonï¼‰çš„èƒ½åŠ›ï¼Œè¿™å°±æ˜¯å…¸å‹çš„è¿å LSPã€‚</p>
<h4 data-id="heading-3">âœ… æ­£ç¡®ç¤ºèŒƒï¼šé€ä¼ ä¸å¥‘çº¦</h4>
<p>ç¬¦åˆ LSP çš„ç»„ä»¶è®¾è®¡ï¼Œåº”è¯¥éµå¾ªâ€œå¼€é—­åŸåˆ™â€çš„åŒæ—¶ï¼Œä¿è¯â€œå­ç±»â€èƒ½å®Œæ•´å±¥è¡Œâ€œçˆ¶ç±»â€çš„èŒè´£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. ç»§æ‰¿åŸç”Ÿå±æ€§ï¼Œç¡®ç«‹å¥‘çº¦</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">PrimaryButtonProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">React</span>.<span class="hljs-title class_">ButtonHTMLAttributes</span>&lt;<span class="hljs-title class_">HTMLButtonElement</span>&gt; {
  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// åªæœ‰ label æ˜¯ç‰¹æœ‰çš„</span>
  <span class="hljs-comment">// å…¶ä»–çš„ className, style, onClick, disabled å…¨éƒ¨ç»§æ‰¿</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">PrimaryButton</span> = (<span class="hljs-params">{ label, className, ...rest }: PrimaryButtonProps</span>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
      // <span class="hljs-attr">2.</span> <span class="hljs-attr">å…è®¸æ ·å¼å åŠ </span>ï¼ˆ<span class="hljs-attr">è€Œä¸æ˜¯è¦†ç›–</span>ï¼‰
      <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">bg-blue-500</span> <span class="hljs-attr">text-white</span> <span class="hljs-attr">px-4</span> <span class="hljs-attr">py-2</span> ${<span class="hljs-attr">className</span> || ''}`} 
      // <span class="hljs-attr">3.</span> <span class="hljs-attr">æ ¸å¿ƒ</span>ï¼š<span class="hljs-attr">èƒ½åŠ›é€ä¼ </span>
      {<span class="hljs-attr">...rest</span>} 
    &gt;</span>
      {label}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
};
</code></pre>
<p><strong>ç°åœ¨çš„å…³ç³»æ˜¯</strong>ï¼š<code>PrimaryButton</code> æ˜¯ä¸€ä¸ªæ›´å…·ä½“çš„ <code>&lt;button&gt;</code>ï¼Œå®ƒæ»¡è¶³äº†ä½¿ç”¨ <code>&lt;button&gt;</code> çš„æ‰€æœ‰é¢„æœŸã€‚</p>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€ åœºæ™¯äºŒï¼šé‚£äº›â€œæˆ‘ä¹Ÿæƒ³ä½†æˆ‘åšä¸åˆ°â€çš„æ¥å£</h3>
<p>åœ¨åšæ¶æ„è®¾è®¡æ—¶ï¼Œæˆ‘ä»¬å¸¸ä½¿ç”¨ DIPï¼ˆä¾èµ–å€’ç½®ï¼‰æ³¨å…¥æ¥å£ã€‚ä½†å®ç°ç±»å¦‚æœä¸å®ˆè§„çŸ©ï¼Œç³»ç»Ÿä¸€æ ·ä¼šå´©ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬è¦è®¾è®¡ä¸€ä¸ªç¼“å­˜ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å®šä¹‰å¥‘çº¦</span>
<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ICache</span> </span>{
  <span class="hljs-title function_ invoke__">set</span>(<span class="hljs-attr">key</span>: <span class="hljs-keyword">string</span>, <span class="hljs-attr">value</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">void</span>;
  <span class="hljs-title function_ invoke__">get</span>(<span class="hljs-attr">key</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">string</span> | <span class="hljs-literal">null</span>;
}
</code></pre>
<h4 data-id="heading-5">é”™è¯¯ç¤ºèŒƒï¼šæŠ›å‡ºå¼‚å¸¸çš„å­ç±»</h4>
<p>è¿™æ—¶å€™æ¥ä¸ªéœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦ä¸€ä¸ªâ€œåªè¯»ç¼“å­˜â€é€‚é…å™¨ï¼ˆå¯èƒ½æ•°æ®æºæ˜¯é…ç½®ä¸­å¿ƒï¼Œä¸å…è®¸å®¢æˆ·ç«¯ä¿®æ”¹ï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReadOnlyCache</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ICache</span> {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key);
  }

  <span class="hljs-title function_">set</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-comment">//  è¿å LSPï¼çˆ¶ç±»æ‰¿è¯ºèƒ½ setï¼Œä½ å´æŠ›é”™ï¼Ÿ</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"è¿™æ˜¯åªè¯»ç¼“å­˜ï¼Œåˆ«å†™ï¼"</span>); 
  }
}
</code></pre>
<p><strong>ä¸šåŠ¡ä»£ç çŒæ­»ç°åœºï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">function</span> updateUserData(cache: ICache, <span class="hljs-keyword">user</span>: <span class="hljs-keyword">any</span>) {
  <span class="hljs-operator">/</span><span class="hljs-operator">/</span> è¿™é‡Œçš„ä»£ç ä»¥ä¸ºæ‰€æœ‰ cache éƒ½èƒ½å†™
  cache.set(<span class="hljs-string">'user'</span>, JSON.stringify(<span class="hljs-keyword">user</span>)); 
}

<span class="hljs-operator">/</span><span class="hljs-operator">/</span> æŸå¤©å¦‚æœä¸å°å¿ƒæ³¨å…¥äº† ReadOnlyCacheï¼Œæ•´ä¸ª <span class="hljs-keyword">update</span> æµç¨‹ç›´æ¥ç‚¸ç©¿
updateUserData(<span class="hljs-keyword">new</span> ReadOnlyCache(), <span class="hljs-keyword">user</span>);
</code></pre>
<h4 data-id="heading-6">æ·±åº¦æ€è€ƒï¼šå¦‚ä½•ä¿®æ­£ï¼Ÿ</h4>
<p>è¿å LSP é€šå¸¸æ„å‘³ç€<strong>æŠ½è±¡å±‚çº§å‡ºäº†é—®é¢˜</strong>ã€‚å¦‚æœä¸å…·å¤‡ <code>set</code> çš„èƒ½åŠ›ï¼Œå®ƒå°±ä¸åº”è¯¥å®ç° <code>ICache</code> æ¥å£ã€‚</p>
<p>è¿™é‡Œéœ€è¦ç»“åˆ <strong>æ¥å£éš”ç¦»åŸåˆ™ (ISP)</strong> è¿›è¡Œæ‹†åˆ†ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IReadable</span> </span>{
  <span class="hljs-title function_ invoke__">get</span>(<span class="hljs-attr">key</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">string</span> | <span class="hljs-literal">null</span>;
}

<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IWritable</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">IReadable</span> </span>{
  <span class="hljs-title function_ invoke__">set</span>(<span class="hljs-attr">key</span>: <span class="hljs-keyword">string</span>, <span class="hljs-attr">value</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">void</span>;
}

<span class="hljs-comment">// ReadOnlyCache åªå®ç° IReadable</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReadOnlyCache</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IReadable</span> </span>{ ... }

<span class="hljs-comment">// ä¸šåŠ¡å‡½æ•°æ˜ç¡®è¦æ±‚ï¼šæˆ‘éœ€è¦å¯å†™çš„ç¼“å­˜</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateUserData</span>(<span class="hljs-params">cache: IWritable, user: any</span>) </span>{ ... }
</code></pre>
<p>è¿™æ ·ï¼ŒTypeScript é™æ€æ£€æŸ¥ä¼šç›´æ¥é˜»æ­¢ä½ æŠŠ <code>ReadOnlyCache</code> ä¼ ç»™ <code>updateUserData</code>ï¼Œåœ¨ç¼–è¯‘æœŸå°±æ‰¼æ€äº† Bugã€‚</p>
<hr/>
<h3 data-id="heading-7">å››ã€ è¿›é˜¶æ·±åº¦ï¼šTypeScript ä¸­çš„åå˜ä¸é€†å˜</h3>
<p>å¦‚æœä½ æƒ³åœ¨é¢è¯•ä¸­æˆ–æ˜¯æ¶æ„è¯„å®¡é‡Œç§€ä¸€æŠŠæ·±åº¦ï¼Œ<strong>ç±»å‹ç³»ç»Ÿçš„ LSP</strong> æ˜¯ç»•ä¸å¼€çš„ã€‚</p>
<p>åœ¨ TS ä¸­ï¼ŒLSP å…·ä½“è¡¨ç°ä¸ºï¼š</p>
<ol>
<li><strong>è¿”å›ç±»å‹å¿…é¡»åå˜ï¼ˆCovariantï¼‰</strong> ï¼šå­ç±»è¿”å›çš„å¿…é¡»æ¯”çˆ¶ç±»æ›´å…·ä½“ï¼ˆæˆ–ç›¸åŒï¼‰ã€‚</li>
<li><strong>å‚æ•°ç±»å‹å¿…é¡»é€†å˜ï¼ˆContravariantï¼‰</strong> ï¼šå­ç±»æ¥æ”¶çš„å¿…é¡»æ¯”çˆ¶ç±»æ›´å®½æ³›ï¼ˆæˆ–ç›¸åŒï¼‰ã€‚</li>
</ol>
<p><strong>å¬æ™•äº†ï¼Ÿçœ‹ä¸ªä¾‹å­ï¼š</strong></p>
<p>å‡è®¾çˆ¶ç±»å®šä¹‰äº†ä¸€ä¸ªå¤„ç†äº‹ä»¶çš„æ–¹æ³•ï¼š <code>handleEvent(e: MouseEvent): void</code></p>
<p><strong>å­ç±»å®ç° 1ï¼ˆå®‰å…¨ï¼‰ï¼š</strong> <code>handleEvent(e: Event): void</code> âœ… <strong>ç¬¦åˆ LSP</strong>ã€‚çˆ¶ç±»åªèƒ½å¤„ç†é¼ æ ‡äº‹ä»¶ï¼Œå­ç±»è¯´â€œæˆ‘ä¹Ÿèƒ½å¤„ç†é¼ æ ‡äº‹ä»¶ï¼Œç”šè‡³æ‰€æœ‰ Event æˆ‘éƒ½èƒ½å¤„ç†â€ã€‚<strong>å‚æ•°æ›´å®½æ³›ï¼Œè¿™æ˜¯é€†å˜ã€‚</strong></p>
<p><strong>å­ç±»å®ç° 2ï¼ˆå±é™©ï¼‰ï¼š</strong> <code>handleEvent(e: ClickEvent): void</code> âŒ <strong>è¿å LSP</strong>ã€‚çˆ¶ç±»æ‰¿è¯ºèƒ½å¤„ç†æ‰€æœ‰ <code>MouseEvent</code>ï¼ˆæ¯”å¦‚ <code>MouseMove</code>ï¼‰ï¼Œä½†å­ç±»è¯´â€œæˆ‘åªèƒ½å¤„ç† <code>Click</code>â€ã€‚å¦‚æœä½ ä¼ ä¸ª <code>MouseMove</code> ç»™å­ç±»ï¼Œå®ƒå°±å¤„ç†ä¸äº†äº†ã€‚</p>
<p><strong>è¿™åœ¨ React çš„ Props å›è°ƒè®¾è®¡ä¸­éå¸¸é‡è¦ï¼š</strong> å¦‚æœä½ è®¾è®¡ä¸€ä¸ªç»„ä»¶ <code>List</code>ï¼Œå®ƒçš„ <code>onItemClick</code> æœŸæœ›æ¥æ”¶ <code>(item: BaseItem) =&gt; void</code>ï¼Œé‚£ä¹ˆä½¿ç”¨è€…ä¼ å…¥çš„å‡½æ•°æœ€å¥½èƒ½å¤„ç† <code>BaseItem</code>ï¼Œè€Œä¸æ˜¯åªå¤„ç† <code>VideoItem</code>ï¼Œå¦åˆ™å¯èƒ½ä¼šåœ¨è¿è¡Œæ—¶è®¿é—®ä¸å­˜åœ¨çš„å±æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-8">äº”ã€ æ€»ç»“ï¼šæ¶æ„è®¾è®¡çš„â€œä¿¡ä»»é“¾â€</h3>
<p>é‡Œæ°æ›¿æ¢åŸåˆ™çš„æœ¬è´¨ï¼Œæ˜¯<strong>å»ºç«‹ä¿¡ä»»</strong>ã€‚</p>
<ol>
<li><strong>ç»„ä»¶ä¿¡ä»»</strong>ï¼šä½¿ç”¨è€…ç›¸ä¿¡ä½ çš„ <code>CustomInput</code> çœŸçš„èƒ½åƒ <code>input</code> ä¸€æ ·å·¥ä½œï¼Œæ”¯æŒ <code>value</code> å’Œ <code>onChange</code>ã€‚</li>
<li><strong>å¯¹è±¡ä¿¡ä»»</strong>ï¼šä¸šåŠ¡é€»è¾‘ç›¸ä¿¡ä½ æ³¨å…¥çš„ <code>Service</code> çœŸçš„å®ç°äº†æ¥å£æ‰¿è¯ºçš„æ‰€æœ‰æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä¼šåœ¨æŸä¸ªæ–¹æ³•é‡Œå·å·æŠ›å‡º <code>NotImplementedError</code>ã€‚</li>
</ol>
<p><strong>å‰ç«¯æ¶æ„çªå›´çš„è·¯ä¸Šï¼Œä¸è¦åªé¡¾ç€â€œå¤ç”¨ä»£ç â€ï¼ˆç»§æ‰¿/å°è£…ï¼‰ï¼Œæ›´è¦é¡¾ç€â€œéµå®ˆå¥‘çº¦â€ã€‚</strong> ä¸€ä¸ªéšæ—¶å¯èƒ½â€œç½¢å·¥â€çš„å­ç±»ï¼Œæ¯”æ²¡æœ‰å­ç±»æ›´å¯æ€•ã€‚</p>
<p>ä¸¾ä¾‹ + ç®€çŸ­æ–‡ç« ç¯‡å¹…,é˜²æ­¢å†…å®¹è¿‡äºâ€œå¹²å·´â€</p>
<hr/>
<p><strong>äº’åŠ¨ç¯èŠ‚ï¼š</strong> ä½ åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶åº“ï¼ˆå¦‚ Antd/MUIï¼‰äºŒæ¬¡å°è£…æ—¶ï¼Œé‡åˆ°è¿‡æœ€å‘çš„â€œå±æ€§ä¸¢å¤±â€æ˜¯ä»€ä¹ˆï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåæ§½ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆå››ï¼‰ï¼šä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰]]></title>    <link>https://juejin.cn/post/7593943464053800970</link>    <guid>https://juejin.cn/post/7593943464053800970</guid>    <pubDate>2026-01-12T03:08:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593943464053800970" data-draft-id="7593943464053243914" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆå››ï¼‰ï¼šä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-12T03:08:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç‹å£®å£®"/> <meta itemprop="url" content="https://juejin.cn/user/4473272506789485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ¡†æ¶è®¾è®¡ï¼ˆå››ï¼‰ï¼šä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4473272506789485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç‹å£®å£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T03:08:33.000Z" title="Mon Jan 12 2026 03:08:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong></p>
<p>åœ¨å‰ç«¯åœˆå­é‡Œï¼Œæˆ‘ä»¬å¸¸è¯´â€œè¿™ä¸ªç»„ä»¶å¤ªè€¦åˆäº†â€æˆ–è€…â€œè¿™æ®µé€»è¾‘æ”¹ä¸åŠ¨â€ã€‚å¤§å¤šæ•°äººä¹ æƒ¯æ€§åœ°æŠŠé”…ç”©ç»™ä¸šåŠ¡å¤æ‚æˆ–è€…å‰äººç•™ä¸‹çš„â€œå±å±±â€ã€‚ä½†å¦‚æœæˆ‘ä»¬å†·é™ä¸‹æ¥å¤ç›˜ï¼Œä½ ä¼šå‘ç°ç»å¤§å¤šæ•°çš„ç»´æŠ¤å™©æ¢¦éƒ½æŒ‡å‘åŒä¸€ä¸ªè®¾è®¡ç¼ºé™·ï¼š<strong>é«˜å±‚é€»è¾‘è¢«ä½å±‚ç»†èŠ‚ç»™ç»‘æ¶äº†ã€‚</strong></p>
<p>ä»Šå¤©æˆ‘ä»¬è¦èŠçš„<strong>ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependency Inversion Principle, DIPï¼‰</strong> ï¼Œå°±æ˜¯ä¸“é—¨ç”¨æ¥ç ´è§£è¿™ç§â€œæ­»å±€â€çš„æ¶æ„åˆ©å™¨ã€‚</p>
</blockquote>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/719d029be5994374a49f7d17fe0d4443~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768792112&amp;x-signature=%2FKP3opVg1IPRQpgZWVuqLgVN8ZI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-0">ä¸€ã€ åœºæ™¯ï¼šä¸€æ¬¡ç—›è‹¦çš„â€œæŠ€æœ¯å‡çº§â€</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è´Ÿè´£ä¸€ä¸ªå¤æ‚çš„ B ç«¯ç³»ç»Ÿã€‚åŠå¹´å‰ï¼Œä¸ºäº†å¿«é€Ÿä¸Šçº¿ï¼Œä½ ç›´æ¥åœ¨ä¸šåŠ¡ Hooks é‡Œå¼•å…¥äº† <code>Axios</code>ï¼Œå¹¶æ•£è½åˆ°äº†é¡¹ç›®çš„å„ä¸ªè§’è½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// useUser.ts - å…¸å‹çš„â€œè‡ªä¸Šè€Œä¸‹â€ä¾èµ–</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useUser</span> = (<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUser</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘ç›´æ¥ä¾èµ–äº†å…·ä½“çš„å®ç°ï¼šaxios</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/user/<span class="hljs-subst">${id}</span>`</span>);
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>;
  };
  <span class="hljs-keyword">return</span> { fetchUser };
};
</code></pre>
<p><strong>å™©æ¢¦å¼€å§‹äº†ï¼š</strong> ç”±äºå…¬å¸æ¶æ„è°ƒæ•´ï¼Œæ‰€æœ‰è¯·æ±‚å¿…é¡»ä» <code>Axios</code> åˆ‡æ¢åˆ°å…¬å¸è‡ªç ”çš„ RPC SDKï¼Œæˆ–è€…éœ€è¦ç»Ÿä¸€æ¥å…¥ä¸€å¥—æå…¶å¤æ‚çš„ç­¾ååŠ å¯†é€»è¾‘ã€‚</p>
<p>ä½ çœ‹ç€å…¨å±€æœç´¢å‡ºæ¥çš„ 200 å¤šä¸ª <code>axios</code> å¼•ç”¨ï¼Œé™·å…¥äº†æ²‰æ€ã€‚ä¸ä»…è¦æ”¹ä»£ç ï¼Œè¿˜è¦é¢å¯¹å…¨é‡å›å½’æµ‹è¯•çš„é£é™©ã€‚è¿™æ—¶å€™ä½ æ‰ä¼šæ„è¯†åˆ°ï¼š<strong>ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œå·²ç»å’Œå…·ä½“çš„ç½‘ç»œåº“â€œæ®‰æƒ…â€äº†ã€‚</strong></p>
<hr/>
<h3 data-id="heading-1">äºŒã€ ä»€ä¹ˆæ˜¯ä¾èµ–å€’ç½®ï¼Ÿï¼ˆåˆ«èƒŒå®šä¹‰ï¼Œçœ‹æœ¬è´¨ï¼‰</h3>
<p>ä¼ ç»Ÿçš„å¼€å‘æ€ç»´æ˜¯<strong>è‡ªé¡¶å‘ä¸‹</strong>çš„ï¼šé¡µé¢ä¾èµ–ç»„ä»¶ï¼Œç»„ä»¶ä¾èµ–å·¥å…·ç±»ã€‚è¿™å°±åƒåœ¨ç›–æˆ¿å­æ—¶ï¼ŒæŠŠç”µçº¿ç›´æ¥æµ‡ç­‘åœ¨æ··å‡åœŸé‡Œï¼Œæƒ³æ¢æ ¹çº¿å°±å¾—æ‹†å¢™ã€‚</p>
<p><strong>ä¾èµ–å€’ç½®åŸåˆ™æ ¸å¿ƒå°±ä¸¤å¥è¯ï¼š</strong></p>
<ol>
<li><strong>é«˜å±‚æ¨¡å—ä¸åº”ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”ä¾èµ–æŠ½è±¡ã€‚</strong></li>
<li><strong>æŠ½è±¡ä¸åº”ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”ä¾èµ–æŠ½è±¡ã€‚</strong></li>
</ol>
<p>é€šä¿—ç‚¹è¯´ï¼š<strong>è°æ‹¥æœ‰æ¥å£ï¼ˆInterfaceï¼‰ï¼Œè°å°±æ˜¯è€å¤§ã€‚</strong></p>
<p>åœ¨æ¶æ„çªå›´ä¸­ï¼Œæˆ‘ä»¬è¦æŠŠâ€œæ§åˆ¶æƒâ€ç¿»è½¬è¿‡æ¥ã€‚é«˜å±‚ä¸šåŠ¡ä¸åº”è¯¥é—®ï¼šâ€œæˆ‘è¯¥æ€ä¹ˆå»è°ƒç”¨ Axiosï¼Ÿâ€è€Œæ˜¯åº”è¯¥å‚²å¨‡åœ°å£°æ˜ï¼šâ€œæˆ‘éœ€è¦ä¸€ä¸ªèƒ½å‘è¯·æ±‚çš„ä¸œè¥¿ï¼Œè‡³äºä½ æ˜¯ç”¨ Axios è¿˜æ˜¯ Fetchï¼Œæˆ‘ä¸åœ¨ä¹ã€‚â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d67447c119045b7a19c73024ef95369~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768792112&amp;x-signature=3%2B1ll4qC5dRYkHKk6juja5Aan1o%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€ ä»£ç æ¡ˆä¾‹ï¼šä»â€œæ­»è€¦åˆâ€åˆ°â€œç¥è§£è€¦â€</h3>
<p>è®©æˆ‘ä»¬ç”¨ DIP çš„æ€ç»´é‡æ„ä¸Šé¢çš„ä¾‹å­ã€‚</p>
<h4 data-id="heading-3">1. å®šä¹‰æŠ½è±¡ï¼ˆInterfaceï¼‰</h4>
<p>é¦–å…ˆï¼Œåœ¨ä¸šåŠ¡å±‚å®šä¹‰æˆ‘ä»¬è¦çš„â€œå½¢çŠ¶â€ï¼Œè¿™å«<strong>å»ºç«‹å¥‘çº¦</strong>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// domain/http.ts - è¿™æ˜¯æˆ‘ä»¬çš„â€œä¸»æƒå£°æ˜â€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IHttpClient</span> {
  get&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt;;
  post&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt;;
}
</code></pre>
<h4 data-id="heading-4">2. ä¸šåŠ¡å±‚ä¾èµ–æŠ½è±¡</h4>
<p>ç°åœ¨çš„ä¸šåŠ¡ Hook ä¸å†å…³å¿ƒå…·ä½“çš„åº“ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// useUser.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IHttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../domain/http'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useUser</span> = (<span class="hljs-params">id: <span class="hljs-built_in">string</span>, client: IHttpClient</span>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUser</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ä¸šåŠ¡åªå¯¹æ¥å£è´Ÿè´£</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/user/<span class="hljs-subst">${id}</span>`</span>);
  };
  <span class="hljs-keyword">return</span> { fetchUser };
};
</code></pre>
<h4 data-id="heading-5">3. åº•å±‚å®ç°ç»†èŠ‚</h4>
<p>å…·ä½“çš„åº“ï¼ˆAxios/Fetchï¼‰åªæ˜¯å¥‘çº¦çš„æ‰§è¡Œè€…ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// infra/AxiosClient.ts</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IHttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../domain/http'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxiosClient</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IHttpClient</span> {
  <span class="hljs-keyword">async</span> get&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(url);
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>;
  }
  <span class="hljs-comment">// ...å®ç°å…¶ä»–æ–¹æ³•</span>
}
</code></pre>
<h4 data-id="heading-6">4. ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</h4>
<p>åœ¨åº”ç”¨çš„æœ€é¡¶å±‚ï¼ˆå…¥å£å¤„ï¼‰ï¼Œæˆ‘ä»¬å°†å…·ä½“çš„å®ç°â€œæ³¨å…¥â€è¿›å»ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// App.tsx</span>
<span class="hljs-type">const</span> httpClient = <span class="hljs-keyword">new</span> <span class="hljs-built_in">AxiosClient</span>(); <span class="hljs-comment">// åç»­æ¢æˆ RPCClient åªéœ€è¦æ”¹è¿™ä¸€è¡Œ</span>
<span class="hljs-type">const</span> { fetchUser } = <span class="hljs-built_in">useUser</span>(<span class="hljs-string">'123'</span>, httpClient);
</code></pre>
<hr/>
<h3 data-id="heading-7">å››ã€ æ·±åº¦æ€è€ƒï¼šå‰ç«¯æ¶æ„é‡Œçš„ DIP æ€ä¹ˆç©ï¼Ÿ</h3>
<p>å¦‚æœä½ è§‰å¾—ä¸Šé¢çš„ä»£ç åªæ˜¯å¤šå†™äº†å‡ è¡Œ Interfaceï¼Œé‚£å°±å°çœ‹ DIP äº†ã€‚åœ¨å¤æ‚çš„å‰ç«¯å·¥ç¨‹ä¸­ï¼ŒDIP æ˜¯å®ç°ä»¥ä¸‹æ¶æ„çš„å…³é”®ï¼š</p>
<h4 data-id="heading-8">1. è·¨ç«¯æ¶æ„çš„ç»Ÿä¸€</h4>
<p>å¦‚æœä½ åœ¨åšä¸€å¥—åŒæ—¶æ”¯æŒ Web å’Œ å°ç¨‹åºçš„æ–¹æ¡ˆã€‚ä¸šåŠ¡é€»è¾‘åº”è¯¥æ˜¯åŒä¸€å¥—ï¼Œé€šè¿‡ DIPï¼Œä½ å¯ä»¥ä¸º Web æ³¨å…¥ <code>WebAdapter</code>ï¼Œä¸ºå°ç¨‹åºæ³¨å…¥ <code>MiniProgramAdapter</code>ã€‚</p>
<blockquote>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ çš„å›¢é˜Ÿè¦å¼€å‘ä¸€ä¸ªç”µå•†åº”ç”¨çš„â€œç”¨æˆ·æ¨¡å—â€ï¼ŒåŒ…å«ç™»å½•ã€è·å–ç”¨æˆ·ä¿¡æ¯ã€ä¿®æ”¹æ”¶è´§åœ°å€ç­‰åŠŸèƒ½ã€‚è¿™ä¸ªæ¨¡å—éœ€è¦åŒæ—¶è·‘åœ¨ <strong>Web ç«¯</strong>ï¼ˆç”¨ React/Vueï¼‰å’Œ <strong>å¾®ä¿¡å°ç¨‹åºç«¯</strong>ã€‚</p>
</blockquote>
<p>ä¸šåŠ¡é€»è¾‘ï¼ˆBusiness Logicï¼‰æœ¬èº«å…¶å®æ˜¯ä¸€æ ·çš„ï¼š</p>
<p>â€œç”¨æˆ·ç‚¹å‡»ä¿å­˜ -&gt; æ ¡éªŒè¡¨å• -&gt; å‘èµ·ç½‘ç»œè¯·æ±‚ä¿å­˜æ•°æ® -&gt; æ›´æ–°æœ¬åœ°çŠ¶æ€ -&gt; æç¤ºæˆåŠŸâ€</p>
<p>ä½†æ˜¯ï¼Œåº•å±‚çš„æŠ€æœ¯å®ç°ï¼ˆInfrastructure Layerï¼‰å´è¯´ç€å®Œå…¨ä¸åŒçš„â€œæ–¹è¨€â€ï¼š</p>






























<table><thead><tr><th><strong>åŠŸèƒ½ç‚¹</strong></th><th><strong>Web ç«¯ "æ–¹è¨€"</strong></th><th><strong>å°ç¨‹åºç«¯ "æ–¹è¨€"</strong></th></tr></thead><tbody><tr><td><strong>ç½‘ç»œè¯·æ±‚</strong></td><td><code>fetch</code> æˆ– <code>axios</code></td><td><code>wx.request</code></td></tr><tr><td><strong>æœ¬åœ°å­˜å‚¨</strong></td><td><code>localStorage.setItem</code></td><td><code>wx.setStorage</code></td></tr><tr><td><strong>è·¯ç”±è·³è½¬</strong></td><td><code>history.push</code> / <code>router.push</code></td><td><code>wx.navigateTo</code></td></tr><tr><td><strong>äº¤äº’åé¦ˆ</strong></td><td>Antd Message / ElementUI Notification</td><td><code>wx.showToast</code></td></tr></tbody></table>
<h5 data-id="heading-9">é”™è¯¯ç¤ºèŒƒï¼šä¼ ç»Ÿçš„â€œè‡ªä¸Šè€Œä¸‹â€å¼ºè€¦åˆ</h5>
<p>å¦‚æœä¸é€‚ç”¨ DIPï¼Œä¸ºäº†å¤ç”¨ä»£ç ï¼Œå¾ˆå¤šå›¢é˜Ÿä¼šå†™å‡ºè¿™ç§å……æ–¥ç€ç¯å¢ƒåˆ¤æ–­çš„â€œé¢æ¡ä»£ç â€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// user.service.ts (ç³Ÿç³•çš„è®¾è®¡)</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// å‡è®¾é€šè¿‡æŸç§æ–¹å¼æ³¨å…¥äº†ç¯å¢ƒå˜é‡ IS_MINI_PROGRAM</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserProfile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘é‡Œå¤¹æ‚ç€ç¯å¢ƒåˆ¤æ–­</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">IS_MINI_PROGRAM</span>) {
    <span class="hljs-comment">// å°ç¨‹åºæ–¹è¨€</span>
    
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">IS_WEB</span>) {
    <span class="hljs-comment">// Web æ–¹è¨€</span>
    
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ...
};
</code></pre>
<p><strong>åæœï¼š</strong> ä½ çš„ä¸šåŠ¡é€»è¾‘å±‚è¢«è¿«çŸ¥é“äº†å¤ªå¤šå®ƒä¸è¯¥çŸ¥é“çš„â€œåº•å±‚ç»†èŠ‚â€ã€‚æ¯å¢åŠ ä¸€ä¸ªç«¯ï¼ˆæ¯”å¦‚åˆè¦æ”¯æŒé˜¿é‡Œå°ç¨‹åºã€å­—èŠ‚å°ç¨‹åºï¼‰ï¼Œè¿™é‡Œå°±è¦åŠ ä¸€ä¸ª <code>else if</code>ï¼Œä»£ç è¿…é€Ÿè…åŒ–ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</p>
<h5 data-id="heading-10">æ­£ç¡®ç¤ºèŒƒï¼šDIP ä¸»å¯¼çš„è·¨ç«¯ç»Ÿä¸€æ¶æ„</h5>
<p>ç”¨ DIP çš„æ€è·¯ï¼Œæˆ‘ä»¬è¦<strong>åå®¢ä¸ºä¸»</strong>ã€‚ä¸šåŠ¡å±‚ä¸å†å»è¿å°±å„ä¸ªç«¯çš„æ–¹è¨€ï¼Œè€Œæ˜¯åˆ¶å®šä¸€å¥—â€œå®˜æ–¹è¯­è¨€â€ï¼ˆInterfaceï¼‰ï¼Œè¦æ±‚å„ä¸ªç«¯é…å¤‡â€œç¿»è¯‘å®˜â€ï¼ˆAdapterï¼‰æ¥é€‚é…è¿™å¥—è¯­è¨€ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// --- Core Business Layer (æ ¸å¿ƒä¸šåŠ¡å±‚ï¼Œä¸å¹³å°æ— å…³) ---</span>

<span class="hljs-comment">// domain/interfaces/http.interface.ts</span>
<span class="hljs-comment">// å®šä¹‰ç½‘ç»œè¯·æ±‚çš„å¥‘çº¦</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IHttpClient</span> {
  get&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, params?: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt;;
  post&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt;;
}

<span class="hljs-comment">// domain/interfaces/storage.interface.ts</span>
<span class="hljs-comment">// å®šä¹‰æœ¬åœ°å­˜å‚¨çš„å¥‘çº¦</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IStorage</span> {
  <span class="hljs-title function_">setItem</span>(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; | <span class="hljs-built_in">void</span>;
  <span class="hljs-title function_">getItem</span>(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt; | <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>;
}
</code></pre>
<h5 data-id="heading-11">ç¼–å†™çº¯å‡€çš„ä¸šåŠ¡é€»è¾‘ï¼ˆä¾èµ–æŠ½è±¡ï¼‰</h5>
<p>ç°åœ¨çš„ä¸šåŠ¡ Service ä»£ç éå¸¸å¹²å‡€ï¼Œå®ƒåªä¾èµ–ä¸Šé¢çš„æ¥å£ã€‚å®ƒä¸çŸ¥é“è‡ªå·±è¿è¡Œåœ¨å“ªé‡Œï¼Œå®ƒåªçŸ¥é“è‡ªå·±æœ‰ä¸€ä¸ªèƒ½å‘è¯·æ±‚çš„å¯¹è±¡ï¼ˆ<code>http</code>ï¼‰å’Œä¸€ä¸ªèƒ½å­˜ä¸œè¥¿çš„å¯¹è±¡ï¼ˆ<code>storage</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// --- Core Business Layer ---</span>

<span class="hljs-comment">// services/userService.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IHttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../domain/interfaces/http.interface'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IStorage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../domain/interfaces/storage.interface'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-comment">// é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ– (DI)</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">private</span> http: IHttpClient,
    <span class="hljs-keyword">private</span> storage: IStorage
  </span>) {}

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">username: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-comment">// 1. è°ƒç”¨ HTTP æ¥å£</span>
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/login'</span>, { username });
    <span class="hljs-comment">// 2. è°ƒç”¨ Storage æ¥å£</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'user_token'</span>, user.<span class="hljs-property">token</span>);
    <span class="hljs-keyword">return</span> user;
  }
}
</code></pre>
<h5 data-id="heading-12">å„ç«¯æ´¾é£â€œç¿»è¯‘å®˜â€ï¼ˆå®ç°é€‚é…å™¨ï¼‰</h5>
<p>ç°åœ¨è½®åˆ°åŸºç¡€è®¾æ–½å±‚ï¼ˆInfra Layerï¼‰å¹²æ´»äº†ã€‚æˆ‘ä»¬éœ€è¦ä¸º Web ç«¯å’Œå°ç¨‹åºç«¯åˆ†åˆ«å®ç°ä¸Šè¿°æ¥å£ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ <strong>Adapterï¼ˆé€‚é…å™¨ï¼‰æ¨¡å¼</strong>ã€‚</p>
<h6 data-id="heading-13"><strong>Web ç«¯é€‚é…å™¨ï¼š</strong></h6>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// --- Infra Layer (Web) ---</span>

<span class="hljs-comment">// infra/web/AxiosHttpClient.ts</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IHttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../domain/interfaces/http.interface'</span>;

<span class="hljs-comment">// è¿™å°±æ˜¯ Web ç«¯çš„ç¿»è¯‘å®˜ï¼ŒæŠŠæ ‡å‡†è¯­è¨€ç¿»è¯‘æˆ Axios æ–¹è¨€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AxiosHttpClient</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IHttpClient</span> {
  <span class="hljs-keyword">async</span> get&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, params?: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(url, { params });
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>;
  }
  <span class="hljs-comment">// ... implement post</span>
}

<span class="hljs-comment">// infra/web/LocalStorageAdapter.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IStorage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../domain/interfaces/storage.interface'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalStorageAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IStorage</span> {
  <span class="hljs-title function_">setItem</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value);
  }
  <span class="hljs-comment">// ... implement getItem</span>
}
</code></pre>
<h6 data-id="heading-14"><strong>å°ç¨‹åºç«¯é€‚é…å™¨ï¼š</strong></h6>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// --- Infra Layer (Mini Program) ---</span>

<span class="hljs-comment">// infra/mp/WechatHttpClient.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IHttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../domain/interfaces/http.interface'</span>;

<span class="hljs-comment">// è¿™å°±æ˜¯å°ç¨‹åºç«¯çš„ç¿»è¯‘å®˜ï¼ŒæŠŠæ ‡å‡†è¯­è¨€ç¿»è¯‘æˆ wx.request æ–¹è¨€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WechatHttpClient</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IHttpClient</span> {
  <span class="hljs-keyword">async</span> get&lt;T&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, params?: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
    <span class="hljs-comment">// å°† callback é£æ ¼å°è£…æˆ Promise é£æ ¼ä»¥ç¬¦åˆæ¥å£è¦æ±‚</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      wx.<span class="hljs-title function_">request</span>({
        <span class="hljs-attr">url</span>: <span class="hljs-string">`https://api.myapp.com<span class="hljs-subst">${url}</span>`</span>, <span class="hljs-comment">// å°ç¨‹åºéœ€è¦å®Œæ•´ URL</span>
        <span class="hljs-attr">data</span>: params,
        <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(res.<span class="hljs-property">data</span> <span class="hljs-keyword">as</span> T),
        <span class="hljs-attr">fail</span>: reject
      });
    });
  }
  <span class="hljs-comment">// ... implement post</span>
}
<span class="hljs-comment">// ç±»ä¼¼åœ°å®ç° WechatStorageAdapter...</span>
</code></pre>
<h5 data-id="heading-15">åœ¨å…¥å£å¤„ç»„è£…ï¼ˆä¾èµ–æ³¨å…¥ï¼‰</h5>
<p>è¿™æ˜¯æœ€åä¸€æ­¥è§è¯å¥‡è¿¹çš„æ—¶åˆ»ã€‚åœ¨ä¸åŒç«¯çš„å…¥å£æ–‡ä»¶é‡Œï¼Œæˆ‘ä»¬å°†å¯¹åº”çš„â€œç¿»è¯‘å®˜â€æ³¨å…¥åˆ°ä¸šåŠ¡é€»è¾‘ä¸­ã€‚</p>
<h6 data-id="heading-16">Web ç«¯å…¥å£ (<code>main.web.ts</code> / <code>App.tsx</code>):</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./services/userService'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AxiosHttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./infra/web/AxiosHttpClient'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LocalStorageAdapter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./infra/web/LocalStorageAdapter'</span>;

<span class="hljs-comment">// ç»„è£… Web ç‰ˆçš„ User Service</span>
<span class="hljs-keyword">const</span> webUserService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">AxiosHttpClient</span>(),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalStorageAdapter</span>()
);

<span class="hljs-comment">// ç°åœ¨ webUserService å¯ä»¥ç›´æ¥åœ¨ React/Vue ç»„ä»¶ä¸­ä½¿ç”¨äº†</span>
</code></pre>
<h6 data-id="heading-17">å°ç¨‹åºç«¯å…¥å£ (<code>app.ts</code> / <code>main.mp.ts</code>):</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./services/userService'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WechatHttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./infra/mp/WechatHttpClient'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WechatStorageAdapter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./infra/mp/WechatStorageAdapter'</span>;

<span class="hljs-comment">// ç»„è£…å°ç¨‹åºç‰ˆçš„ User Service</span>
<span class="hljs-keyword">const</span> mpUserService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">WechatHttpClient</span>(),
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">WechatStorageAdapter</span>()
);

<span class="hljs-comment">// mpUserService å¯ä»¥åœ¨å°ç¨‹åºçš„ Page æˆ– Component ä¸­ä½¿ç”¨äº†</span>
</code></pre>
<h5 data-id="heading-18">æ€»ç»“</h5>
<p>é€šè¿‡ DIPï¼Œæˆ‘ä»¬å°†è·¨ç«¯æ¶æ„åˆ†æˆäº†æ¸…æ™°çš„ä¸‰å±‚ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒä¸šåŠ¡å±‚ï¼ˆç¨³å®šï¼‰</strong> ï¼šå®šä¹‰ Interfaceï¼Œç¼–å†™ä¸šåŠ¡é€»è¾‘ã€‚è¿™ä¸€å±‚ä»£ç åœ¨å¤šç«¯æ˜¯<strong>å®Œå…¨å…±ç”¨</strong>çš„ï¼Œä¸€è¡Œéƒ½ä¸ç”¨æ”¹ã€‚</li>
<li><strong>æ¥å£å¥‘çº¦å±‚ï¼ˆæŠ½è±¡ï¼‰</strong> ï¼šå³ <code>IHttpClient</code>, <code>IStorage</code> ç­‰ Interface å®šä¹‰ã€‚</li>
<li><strong>åŸºç¡€è®¾æ–½å±‚ï¼ˆæ˜“å˜ï¼‰</strong> ï¼šå„ä¸ªç«¯çš„å…·ä½“ Adapter å®ç°ï¼ˆWebAdapter, MiniProgramAdapterï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-19">2. åˆ¶å®šå®˜æ–¹è¯­è¨€ï¼ˆå®šä¹‰æŠ½è±¡æ¥å£ï¼‰</h4>
<p>ä¸šåŠ¡å±‚å£°æ˜å®ƒéœ€è¦ä»€ä¹ˆèƒ½åŠ›ï¼Œè€Œä¸å…³å¿ƒè¿™èƒ½åŠ›æ€ä¹ˆå®ç°ã€‚è¿™äº› Interface å®šä¹‰åœ¨æ ¸å¿ƒä¸šåŠ¡åŸŸä¸­ã€‚</p>
<h4 data-id="heading-20"/>
<h4 data-id="heading-21">3. æ— æ„ŸçŸ¥çš„ Mock ä¸æµ‹è¯•</h4>
<p>å†™å•å…ƒæµ‹è¯•æœ€ç—›è‹¦çš„æ˜¯ Mock å…¨å±€åº“ã€‚å¦‚æœä½ éµå¾ªäº† DIPï¼Œä½ åªéœ€è¦ç»™ä¸šåŠ¡é€»è¾‘æ³¨å…¥ä¸€ä¸ª <code>MockClient</code>ï¼Œè¿ <code>jest.mock('axios')</code> è¿™ç§é»‘ç›’æ“ä½œéƒ½ä¸ç”¨äº†ã€‚</p>
<h4 data-id="heading-22">4. æ’ä»¶åŒ–æ¶æ„</h4>
<p>åƒ VS Code æˆ–å¤§å‹ä½ä»£ç å¹³å°ï¼Œå…¶æ ¸å¿ƒæ¡†æ¶å¹¶ä¸ä¾èµ–å…·ä½“çš„æ’ä»¶ã€‚å®ƒå®šä¹‰äº†ä¸€å¥—è§„èŒƒï¼ˆæŠ½è±¡ï¼‰ï¼Œæ‰€æœ‰çš„æ’ä»¶å¿…é¡»å®ç°è¿™äº›è§„èŒƒï¼Œè¿™æ­£æ˜¯ DIP çš„é«˜çº§åº”ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-23">äº”ã€ ç»“è¯­ï¼šçªå›´çš„æ ¸å¿ƒæ˜¯â€œå¿ƒæ™ºè´Ÿæ‹…â€çš„è½¬ç§»</h3>
<p>å¾ˆå¤šå‰ç«¯åŒå­¦æŠ—æ‹’ DIPï¼Œè§‰å¾—â€œæˆ‘å°±å†™ä¸ªä¸šåŠ¡ï¼Œæœ‰å¿…è¦æè¿™ä¹ˆå¤æ‚å—ï¼Ÿâ€</p>
<p>ç¡®å®ï¼Œå¯¹äºä¸‰å¤©å°±æ‰”çš„å°ç¨‹åºï¼ŒDIP å±äºè¿‡åº¦è®¾è®¡ã€‚ä½†å¦‚æœä½ åœ¨æ„å»ºä¸€ä¸ª<strong>é•¿æœŸè¿­ä»£çš„å·¥ç¨‹</strong>ï¼ŒDIP çš„æœ¬è´¨æ˜¯åœ¨<strong>éš”ç¦»å˜åŒ–</strong>ã€‚å®ƒæŠŠæœ€ä¸ç¨³å®šçš„éƒ¨åˆ†ï¼ˆç¬¬ä¸‰æ–¹åº“ã€API åè®®ã€æµè§ˆå™¨å·®å¼‚ï¼‰æŒ¡åœ¨äº†æŠ½è±¡å±‚ä¹‹å¤–ã€‚</p>
<p><strong>æ¶æ„çªå›´ï¼Œä¸æ˜¯ä¸ºäº†ç‚«æŠ€ï¼Œè€Œæ˜¯ä¸ºäº†åœ¨ä¸‹ä¸€æ¬¡éœ€æ±‚å˜åŠ¨ã€æŠ€æœ¯è¿ç§»æ—¶ï¼Œä½ èƒ½æ°”å®šç¥é—²åœ°æ”¹ä¸€è¡Œä»£ç ï¼Œè€Œä¸æ˜¯é€šå®µæ”¹ä¸¤ç™¾ä¸ªæ–‡ä»¶ã€‚</strong></p>
<p><strong>äº’åŠ¨ç¯èŠ‚ï¼š</strong> ä½ åœ¨é¡¹ç›®ä¸­é‡åˆ°è¿‡â€œå› ä¸ºæ¢ä¸ªåº“å¯¼è‡´å…¨çº¿å´©æºƒâ€çš„ç»å†å—ï¼Ÿæˆ–è€…ä½ è§‰å¾—åœ¨å¼€å‘ä¸­ï¼ŒContext API æ˜¯å¦å·²ç»è¶³å¤Ÿæ”¯æ’‘èµ· DIP çš„èŒè´£ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåšå¼ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨äº†éƒ½è¯´å¥½çš„ uniapp è·¯ç”±æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7594262760939749410</link>    <guid>https://juejin.cn/post/7594262760939749410</guid>    <pubDate>2026-01-12T09:33:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594262760939749410" data-draft-id="7594096585728376832" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨äº†éƒ½è¯´å¥½çš„ uniapp è·¯ç”±æ¡†æ¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-12T09:33:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£åº¦å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/3368559359562190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨äº†éƒ½è¯´å¥½çš„ uniapp è·¯ç”±æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559359562190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£åº¦å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T09:33:31.000Z" title="Mon Jan 12 2026 09:33:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    45
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ä½¿ç”¨ <code>uni-app</code> å¼€å‘é¡¹ç›®æ—¶ï¼Œè·¯ç”±è·³è½¬æ˜¯æä¸ºé¢‘ç¹çš„æ“ä½œï¼Œ<code>uni-app</code> æä¾›çš„è·¯ç”±è·³è½¬ api <code>uni.navigateTo</code>å¤Ÿç”¨ä½†æ˜¯å´ä¸å¤Ÿå¥½ç”¨ï¼Œä¸»è¦é—®é¢˜åœ¨äºï¼Œå®é™…ä¸šåŠ¡ä¸­ç»å¸¸æ¶‰åŠå¤§é‡å¯¹è±¡ä¼ å‚çš„æƒ…å†µï¼Œè€Œ <code>uni-app</code> åªæ”¯æŒ query å‚æ•°ï¼Œè¿™å°±å¯¼è‡´ï¼Œå¯¹äºå¯¹è±¡çš„ä¼ å‚ï¼Œå¿…é¡»é€šè¿‡<code>encodeURIComponent</code>å…ˆç¼–ç ï¼Œç„¶ååœ¨æ–°çš„é¡µé¢å†é€šè¿‡<code>decodeURIComponent</code>è¿›è¡Œè§£ç ï¼Œä¸ºäº†ç¼–ç  urlï¼Œè¿˜è¦æ‹¼æ¥<code>&amp;</code>ï¼Œå¯¼è‡´ä¸€ä¸ªé¡µé¢è·³è½¬ä¼ å‚åˆè‡­åˆé•¿ï¼Œå¯è¯»æ€§è¿˜å¾ˆå·®ï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="hljs language-js" lang="js">uni.<span class="hljs-title function_">navigateTo</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/test/pay?question_id='</span> +
    res.<span class="hljs-property">data</span>.<span class="hljs-property">id</span> + <span class="hljs-string">'&amp;service='</span> +
    <span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(
        service)) + <span class="hljs-string">'&amp;doctor='</span> +
    <span class="hljs-built_in">encodeURIComponent</span>(
        <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
            <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">doctor</span>.<span class="hljs-property">name</span>,
    <span class="hljs-attr">dept_name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">doctor</span>
    .<span class="hljs-property">dept_name</span>,
    <span class="hljs-attr">dept_code</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">doctor</span>
    .<span class="hljs-property">dept_code</span>,
    <span class="hljs-attr">code</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">doctor</span>.<span class="hljs-property">code</span>
    })) + <span class="hljs-string">'&amp;description='</span> +
    <span class="hljs-built_in">encodeURIComponent</span>(desc)
})
</code></pre>
<p>å…‰çœ‹ç€å°±å¤´å¤§ï¼Œè¦å¢åŠ ä¸€ä¸ªä¼ å‚æˆ–è€…ä¿®æ”¹ä¸€ä¸ªä¼ å‚ï¼Œéƒ½å¾ˆè€ƒå¯Ÿçœ¼åŠ›ï¼Œå¯»æ‰¾æ‹¼æ¥çš„ä½ç½®ï¼Œè·å–å‚æ•°çš„æ—¶å€™ï¼Œä¹Ÿå¾ˆé¸¡è‚‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">onLoad</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">query</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">pageHeight</span> = uni.<span class="hljs-title function_">getSystemInfoSync</span>().<span class="hljs-property">windowHeight</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">question_id</span> = query.<span class="hljs-property">question_id</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">service</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-built_in">decodeURIComponent</span>(query.<span class="hljs-property">service</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/%/g</span>, <span class="hljs-string">'%25'</span>)))
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">doctor</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-built_in">decodeURIComponent</span>(query.<span class="hljs-property">doctor</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/%/g</span>, <span class="hljs-string">'%25'</span>)))
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">description</span> = <span class="hljs-built_in">decodeURIComponent</span>(query.<span class="hljs-property">description</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/%/g</span>, <span class="hljs-string">'%25'</span>))
}
</code></pre>
<p>ç”±æ­¤ï¼Œè§£å†³è¿™ä¸€ç—›ç‚¹å°±åŠ¿åœ¨å¿…è¡Œäº†ï¼Œé¡¹ç›®ä¸­è™½ç„¶ä½¿ç”¨äº†<code>u-view</code>æ¡†æ¶ï¼Œæä¾›äº†<code>$u.route</code>çš„æ–¹æ³•ï¼Œå¯¹ uni-app çš„è·¯ç”±è·³è½¬æ–¹æ³•è¿›è¡Œç®€å•çš„å°è£…ï¼Œå¯ä»¥æ”¯æŒé€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ä»¥å¯¹è±¡çš„æ–¹å¼ä¼ å‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">$u</span>.<span class="hljs-title function_">route</span>({
  <span class="hljs-attr">url</span>: <span class="hljs-string">'pages/components/empty/index'</span>,
  <span class="hljs-attr">params</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'lisa'</span>
  }
})
</code></pre>
<p>å…¶ä¼˜ç‚¹æ˜¯ï¼Œå¯¹è·¯ç”±è·³è½¬ä¼ å‚å‹å¥½äº†ä¸€ç‚¹ï¼Œçœ‹èµ·æ¥æ›´ç®€æ´äº›ï¼Œä½†æ˜¯ä¹Ÿä»…æ­¤è€Œå·²äº†ï¼Œå­˜åœ¨çš„ç¼ºé™·ä¹Ÿå¾ˆå¤§ï¼Œä¸»è¦åœ¨äºï¼š</p>
<ul>
<li>ä»…æ”¯æŒå€¼ç±»å‹çš„ä¼ å‚ï¼Œä¸æ”¯æŒå¼•ç”¨ç±»å‹ä¼ å‚ï¼Œä»æ—§æœªè§£å†³å®é™…ä¸šåŠ¡ä¸­å¯¹å¯¹è±¡æ•°æ®ä¼ å‚çš„éœ€è¦ã€‚</li>
<li>é˜‰å‰²ç‰ˆçš„å°è£…ï¼Œæ— æ³•ä¼ é€’<code>events</code>ï¼Œå¯¹å®é™…ä¸šåŠ¡ä¸­é¡µé¢è¿”å›çš„å›è°ƒæ— æ³•ç›‘å¬ã€‚</li>
</ul>
<p>ä½†<code>u-view</code>ä¹Ÿå¯å‘äº†æˆ‘å¯¹è·¯ç”±å°è£…çš„ä¸€äº›æ€è·¯ï¼Œç»“åˆå¯¹<code>axios</code>çš„ä½¿ç”¨ï¼Œæˆ‘å¯¹<code>uni-app</code>çš„è·¯ç”±è·³è½¬æ–¹æ³•è¿›è¡Œäº†å®šåˆ¶åŒ–çš„å°è£…ï¼Œå¹¶å•ç‹¬å‘å¸ƒäº†åŒ…<code>caring-route</code>ï¼Œä¸”æˆåŠŸåœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨ï¼ŒåŸºæœ¬è§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">caring-route çš„ç‰¹ç‚¹</h2>
<ul>
<li>ç»§æ‰¿äº†<code>uni-app</code> çš„æ‰€æœ‰è·¯ç”±è·³è½¬æ–¹æ³•ï¼Œæ›´åŠ æ–¹ä¾¿è°ƒç”¨ï¼Œåç§°æ›´ç®€æ´</li>
<li>æ”¯æŒè·³è½¬ <code>tabBar</code> é¡µé¢</li>
<li>æ”¯æŒ <code>events</code></li>
<li>æ”¯æŒæˆåŠŸå¤±è´¥å›è°ƒ</li>
<li>æ”¯æŒä¼ é€’å¼•ç”¨ç±»å‹è·¯ç”±å‚æ•°</li>
<li>æ”¯æŒè§£æè·¯ç”±å‚æ•°</li>
<li>rollupæ‰“åŒ…å‹ç¼©ï¼Œä½“ç§¯æ›´å°ï¼Œä»…æœ‰<code>2.7kb</code></li>
<li>æ”¯æŒè·³è½¬å°ç¨‹åº</li>
</ul>
<p><strong>æ”¯æŒä¸¤ç§è°ƒç”¨æ–¹æ³•</strong></p>
<ol>
<li>å‡½æ•°è°ƒç”¨ï¼š<code>route(url[,config])</code></li>
<li>ç±»çš„å®ä¾‹æ–¹æ³•è°ƒç”¨ï¼š<code>route[method](url[,params])</code></li>
</ol>
<ul>
<li><code>method</code> çš„ç±»å‹ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li><code>to</code></li>
<li><code>back</code></li>
<li><code>tab</code></li>
<li><code>redirect</code></li>
<li><code>launch</code></li>
<li><code>mini</code> è·³è½¬å°ç¨‹åº</li>
<li><code>query</code> è§£æè·¯ç”±å‚æ•°</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">å¿«é€Ÿä¸Šæ‰‹</h2>
<p><strong>å®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm i caring-route
</code></pre>
<p><strong>ä½¿ç”¨</strong></p>
<p><strong>vue</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> route <span class="hljs-keyword">from</span> <span class="hljs-string">'caring-route'</span>

  <span class="hljs-title function_">route</span>(<span class="hljs-string">'/pages/index/home'</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-3">åŸºç¡€ä½¿ç”¨</h2>
<p>å¯¹äºä¸éœ€è¦ä¼ é€’å‚æ•°çš„è·¯ç”±è·³è½¬ï¼Œ<code>route</code>å‡½æ•°æä¾›äº†åŸç”Ÿçš„æ–¹æ³•åç§°å’Œç®€åŒ–çš„æ–¹æ³•åç§°ï¼Œå¹¶æ”¯æŒä¸¤ç§ä¼ å‚æ–¹å¼ï¼š</p>
<p>ä¸€ç§æ˜¯ç±»ä¼¼<code>u-view</code>çš„ï¼Œä¼ é€’ä¸¤ä¸ªå‚æ•°<code>route(url,data)</code>ï¼Œç¬¬ä¸€ä¸ªå‚æ•°<code>url</code>å°±æ˜¯è¦è·³è½¬çš„è·¯ç”±ï¼Œç¬¬äºŒä¸ªå‚æ•°<code>data</code>åˆ™æ˜¯è¦ä¼ é€’çš„å‚æ•°ï¼Œä¸<code>$u.route</code>çš„åŒºåˆ«å°±æ˜¯æ”¯æŒä¼ é€’å¯¹è±¡å‚æ•°ï¼Œæ˜¯å…¶åŠ å¼ºç‰ˆï¼Œå½“åªéœ€è¦è·³è½¬è·¯ç”±å’Œä¼ é€’å‚æ•°æ—¶ï¼Œæ¨èä¼˜å…ˆä½¿ç”¨<code>route(url,data)</code>çš„è°ƒç”¨æ–¹å¼ã€‚</p>
<p>ç¬¬äºŒç§æ˜¯ç±»<code>uni-app</code>çš„è°ƒç”¨æ–¹æ³•ï¼Œä¼ é€’ä¸€ä¸ªå‚æ•°<code>route(config)</code>ï¼Œå…¶åŸºæœ¬ä½¿ç”¨å’Œ uni-app æ˜¯ç›¸åŒçš„ï¼ŒåŒºåˆ«åœ¨äºï¼š</p>
<ul>
<li><code>uniapp</code>ä¸­å‚æ•°éœ€è¦é€šè¿‡<code>query</code>å‚æ•°æ‹¼åˆ° url ä¸Šï¼Œè€Œ<code>route(config)</code>çš„ <code>url</code>åªä¼ é€’è·³è½¬çš„é¡µé¢è·¯å¾„å³å¯ï¼Œå…¶é¡µé¢å‚æ•°ç”¨<code>data</code>æˆ–è€…<code>params</code>æ¥æ¥æ”¶ã€‚</li>
<li><code>uniapp</code>ä¸­éœ€è¦é€šè¿‡ä¸åŒçš„æ–¹æ³•<code>navigateTo</code>ã€<code>redirectTo</code>ç­‰æ¥æ‰§è¡Œä¸åŒçš„è·¯ç”±è·³è½¬ï¼Œè€Œ<code>route(config)</code>æ”¯æŒ<code>type</code>å‚æ•°æ¥æŒ‡å®šè·³è½¬ç±»å‹æ˜¯<code>navigateTo</code>è¿˜æ˜¯<code>redirectTo</code></li>
</ul>
<p>ä¸‹é¢å…·ä½“è¯´æ˜</p>
<h3 data-id="heading-4">ä¼ é€’ä¸¤ä¸ªå‚æ•°<code>route(url,data)</code>çš„ä½¿ç”¨æ–¹æ³•</h3>
<h4 data-id="heading-5">å¯¹äº<code>uni.navigateTo</code>çš„å°è£…</h4>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯è·¯ç”±è·³è½¬ä¸­æœ€å¸¸ä½¿ç”¨çš„ apiï¼Œ<code>caring-route</code>åšäº†ä¸‰ç§æ–¹æ³•çš„å°è£…ï¼Œä¸‰ä¸ªæ–¹æ³•æ˜¯ç­‰ä»·çš„ï¼Œå®é™…ä¸šåŠ¡ä¸­ï¼Œç›´æ¥ä½¿ç”¨<code>route()</code>å‡½æ•°æ˜¯æœ€æ–¹ä¾¿çš„</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// uni.navigateTo</span>
<span class="hljs-title function_">route</span>(<span class="hljs-string">'/pages/index/home'</span>)
route.<span class="hljs-title function_">to</span>(<span class="hljs-string">'/pages/index/home'</span>)
route.<span class="hljs-title function_">navigateTo</span>(<span class="hljs-string">'/pages/index/home'</span>)
</code></pre>
<h4 data-id="heading-6">å¯¹äº<code>uni.redirectTo</code>çš„å°è£…</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// redirectTo</span>
route.<span class="hljs-title function_">direct</span>(<span class="hljs-string">'/pages/index/home'</span>)
route.<span class="hljs-title function_">redirectTo</span>(<span class="hljs-string">'/pages/index/home'</span>)
</code></pre>
<h4 data-id="heading-7">å¯¹äº<code>uni.reLaunch</code>çš„å°è£…</h4>
<pre><code class="hljs language-js" lang="js">route.<span class="hljs-title function_">launch</span>(<span class="hljs-string">'/pages/index/home'</span>)
route.<span class="hljs-title function_">reLaunch</span>(<span class="hljs-string">'/pages/index/home'</span>)
</code></pre>
<h4 data-id="heading-8">å¯¹äº<code>uni.navigateBack</code>çš„å°è£…</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// back</span>
route.<span class="hljs-title function_">back</span>(delta)
route.<span class="hljs-title function_">navigateBack</span>(delta)
</code></pre>
<h4 data-id="heading-9">å¯¹äº<code>uni.switchTab</code>çš„å°è£…</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// switchTab</span>
route.<span class="hljs-title function_">tab</span>(<span class="hljs-string">'pages/index/index'</span>)
route.<span class="hljs-title function_">switchTab</span>(<span class="hljs-string">'pages/index/index'</span>)
</code></pre>
<h3 data-id="heading-10">ä¼ é€’è·¯ç”±è·³è½¬å‚æ•°</h3>
<p><code>route</code>å‡½æ•°ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œç±»å‹ä¸ºå¯¹è±¡ï¼Œå³ä¸ºä¼ é€’çš„è·¯ç”±å‚æ•°ï¼Œ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">route</span>(<span class="hljs-string">'/pages/index/home'</span>, {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'wanko'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-string">'25'</span>,
  <span class="hljs-attr">hoby</span>: {
    <span class="hljs-attr">guitar</span>: {
      <span class="hljs-attr">level</span>: <span class="hljs-number">1</span>
    }
  }
})
route.<span class="hljs-title function_">to</span>(<span class="hljs-string">'/pages/index/home'</span>, {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'wanko'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>,
  <span class="hljs-attr">hoby</span>: {
    <span class="hljs-attr">guitar</span>: {
      <span class="hljs-attr">level</span>: <span class="hljs-number">1</span>
    }
  }
})

route.<span class="hljs-title function_">launch</span>(<span class="hljs-string">'pages/index/index'</span>, {
  <span class="hljs-attr">msg</span>: <span class="hljs-string">'relunchè¿‡æ¥'</span>
})
route.<span class="hljs-title function_">redirect</span>(<span class="hljs-string">'/pages/index/home'</span>, {
  <span class="hljs-attr">msg</span>: <span class="hljs-string">'redirectè¿‡æ¥'</span>
})
</code></pre>
<h2 data-id="heading-11">ä¼ é€’ä¸€ä¸ªå‚æ•°<code>route(config)</code>çš„ä½¿ç”¨æ–¹æ³•</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">route</span>({
    <span class="hljs-attr">url</span>:<span class="hljs-string">'/pages/index/home'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'navigateTo'</span>,<span class="hljs-comment">// é»˜è®¤çš„è·³è½¬æ–¹å¼ï¼Œå¯ä¸ä¼ </span>
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'wanko'</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>,
        <span class="hljs-attr">hoby</span>: {
          <span class="hljs-attr">guitar</span>: {
            <span class="hljs-attr">level</span>: <span class="hljs-number">1</span>
          }
        },
        <span class="hljs-attr">arr</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>],
        <span class="hljs-attr">arrObj</span>: [
          {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'wanko'</span>
          },
          <span class="hljs-number">23</span>,
          <span class="hljs-string">'age'</span>
        ]
    },
    <span class="hljs-attr">events</span>: {
      <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'onSuccess'</span>, data)
      }
    }
  })
</code></pre>
<h3 data-id="heading-12">ç›‘å¬eventsäº‹ä»¶</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Aé¡µé¢</span>
<span class="hljs-title function_">route</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">'navigateTo'</span>, <span class="hljs-comment">// å¦‚æœæ˜¯navigateToï¼Œå¯ä»¥ä¸ä¼ type</span>
  <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/index/home'</span>, 
  <span class="hljs-attr">events</span>: {
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'onSuccess'</span>, data)
    }
  },
})

<span class="hljs-comment">// Bé¡µé¢</span>
<span class="hljs-keyword">const</span> eventChannel = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getOpenerEventChannel</span>();
eventChannel.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'onSuccess'</span>, {
  <span class="hljs-attr">data</span>: <span class="hljs-string">'data from home'</span>
})
route.<span class="hljs-title function_">back</span>()
</code></pre>
<h2 data-id="heading-13">è·å–è·¯ç”±å‚æ•°</h2>
<p>åœ¨onLoadä¸­ä½¿ç”¨routeçš„ <code>query</code> æ–¹æ³•ä¼ å…¥ options ï¼Œå‡½æˆè°ƒç”¨çš„è¿”å›å€¼ä¸ºå·²ç»è§£ç çš„è·¯ç”±å‚æ•°</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">onLoad</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-keyword">const</span> query = route.<span class="hljs-title function_">query</span>(options)
}
</code></pre>
<h2 data-id="heading-14">å¤„ç†è·³è½¬æˆåŠŸçš„å›è°ƒ</h2>
<p>ä½¿ç”¨å‡½æ•°è°ƒç”¨æ–¹å¼ï¼Œæ·»åŠ  <code>.then</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">route</span>(<span class="hljs-string">'pages/index/index'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·³è½¬æˆåŠŸ'</span>))
</code></pre>
<h2 data-id="heading-15">è·³è½¬å¾®ä¿¡å°ç¨‹åº</h2>
<p>ä½¿ç”¨ <code>mini(appId, path)</code> æ–¹æ³•æ¥è·³è½¬å¾®ä¿¡å°ç¨‹åº</p>
<pre><code class="hljs language-js" lang="js">route.<span class="hljs-title function_">mini</span>(<span class="hljs-string">'wx-appid'</span>, <span class="hljs-string">'pages/tabbar/components'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·³è½¬æˆåŠŸ'</span>)
})
</code></pre>
<h2 data-id="heading-16">å¼€æºåœ°å€</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcaring-ui%2Fcaring-route" target="_blank" title="https://github.com/caring-ui/caring-route" ref="nofollow noopener noreferrer">github.com/caring-ui/câ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å’ŒTRAEçš„è¿™ä¸€å¹´ï¼šä»"çœ‹ä¸æ‡‚"åˆ°"ç©å¾—è½¬"çš„AIå­¦ä¹ è¿›åŒ–å²]]></title>    <link>https://juejin.cn/post/7593311807588810758</link>    <guid>https://juejin.cn/post/7593311807588810758</guid>    <pubDate>2026-01-12T02:16:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593311807588810758" data-draft-id="7593311807588581382" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å’ŒTRAEçš„è¿™ä¸€å¹´ï¼šä»&quot;çœ‹ä¸æ‡‚&quot;åˆ°&quot;ç©å¾—è½¬&quot;çš„AIå­¦ä¹ è¿›åŒ–å²"/> <meta itemprop="keywords" content="Trae,å‰ç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-12T02:16:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zhouzhouya"/> <meta itemprop="url" content="https://juejin.cn/user/3931509312987511"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å’ŒTRAEçš„è¿™ä¸€å¹´ï¼šä»"çœ‹ä¸æ‡‚"åˆ°"ç©å¾—è½¬"çš„AIå­¦ä¹ è¿›åŒ–å²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3931509312987511/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zhouzhouya
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T02:16:09.000Z" title="Mon Jan 12 2026 02:16:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    83
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€åˆè¯†TRAEï¼šä»"è¿™æ˜¯ä»€ä¹ˆé¬¼"åˆ°"åŸæ¥å¦‚æ­¤"</h2>
<p>ç¬¬ä¸€æ¬¡æ‰“å¼€TRAEæ—¶ï¼Œé¢å¯¹æ»¡å±çš„ä»£ç å’Œå¤æ‚çš„ç•Œé¢ï¼Œæˆ‘å†…å¿ƒçš„OS,"è¿™ç©æ„å„¿èƒ½å¸®æˆ‘å†™ä»£ç ï¼Ÿ"å¸¦ç€è¿™æ ·çš„æ€€ç–‘ï¼Œæˆ‘å¼€å§‹äº†å’ŒTRAEçš„ç¬¬ä¸€æ¬¡å¯¹è¯ã€‚</p>
<p><strong>ç¬¬ä¸€æ¬¡å°è¯•ï¼šå¤±è´¥çš„ä»£ç ç”Ÿæˆ</strong></p>
<p>æˆ‘è¾“å…¥äº†ç¬¬ä¸€ä¸ªæŒ‡ä»¤ï¼š"å¸®æˆ‘å†™ä¸€ä¸ªç™»å½•é¡µé¢"ã€‚ç»“æœTRAEç»™æˆ‘ç”Ÿæˆäº†ä¸€å †çœ‹ä¸æ‡‚çš„ä»£ç ï¼Œè¿˜é™„å¸¦äº†ä¸€å †é”™è¯¯æç¤ºã€‚é¦–æ¬¡ä½¿ç”¨ä½“éªŒæ„Ÿä¸ä½³ã€‚</p>
<p><strong>è½¬æŠ˜ç‚¹ï¼šå­¦ä¼šæé—®</strong></p>
<p>åæ¥ç»è¿‡å’ŒåŒæ ·ä½¿ç”¨TRAEçš„å°ä¼™ä¼´äº¤æµï¼Œæˆ‘å‘ç°ï¼Œé—®é¢˜ä¸åœ¨TRAEï¼Œè€Œåœ¨æˆ‘è‡ªå·±ã€‚æ›´å¥½çš„ä½¿ç”¨TRAEéœ€è¦ç”¨æ›´ç²¾ç¡®çš„è¯­è¨€æè¿°éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">è¯·å¸®æˆ‘ç”¨VUE + TypeScriptå®ç°ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œè¦æ±‚ï¼š
<span class="hljs-deletion">- åŒ…å«ç”¨æˆ·åå’Œå¯†ç è¾“å…¥æ¡†</span>
<span class="hljs-deletion">- æ”¯æŒè®°ä½å¯†ç åŠŸèƒ½</span>
<span class="hljs-deletion">- ä½¿ç”¨localStorageå­˜å‚¨token</span>
<span class="hljs-deletion">- ä½¿ç”¨Element Plusç»„ä»¶åº“</span>
</code></pre>
<p>TRAEç»™æˆ‘æä¾›äº†å®Œæ•´çš„æ€è€ƒè¿‡ç¨‹åŠä»£ç æ‰§è¡Œï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c09b66737644495a0caa53c034c5e75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemhvdXpob3V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768804021&amp;x-signature=o44GMTxCxJh7DGFkWr1%2Bu8pFZeU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cffd1873e97f44279f555e9ff1397577~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemhvdXpob3V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768804021&amp;x-signature=%2BE7HtWVofCl%2BVbHgFhg831SNiyE%3D" alt="image.png" loading="lazy"/></p>
<p>ç”Ÿæˆçš„ç›®å½•åŠä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a47530f9c13845c6b7d8330caeb2477b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemhvdXpob3V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768804021&amp;x-signature=YqJL08QXjI7jDswzqXx8OCX4i50%3D" alt="image.png" loading="lazy"/></p>
<br/>
<p>å®ç°æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9dc06c00c304be4a2921a1b911c2799~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemhvdXpob3V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768804021&amp;x-signature=inZzTpLBaACvUp%2FFSGL%2FXkB%2BIoQ%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¸€æ¬¡ï¼ŒTRAEç”Ÿæˆçš„ä»£ç å‡ ä¹å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œåªéœ€è¦å¾®è°ƒä¸€ä¸‹æ ·å¼ã€‚<strong>æ‰€ä»¥ï¼ŒAIä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä½†å®ƒèƒ½å¸®ä½ å®Œæˆ80%çš„é‡å¤æ€§å·¥ä½œï¼Œå‰©ä¸‹çš„20%éœ€è¦ä½ äº²è‡ªæŠŠæ§ã€‚</strong></p>
<h2 data-id="heading-1">äºŒã€GPTæ¨¡å‹ vs Geminiæ¨¡å‹ï¼šæˆ‘çš„é€‰æ‹©ç­–ç•¥</h2>
<p>åœ¨TRAEä¸­ï¼Œæˆ‘ä¸»è¦ä½¿ç”¨äº†GPTå’ŒGeminiä¸¤ä¸ªæ¨¡å‹ï¼Œå®ƒä»¬å„æœ‰ç‰¹ç‚¹ï¼Œé€‚åˆä¸åŒçš„åœºæ™¯,æ¥ä¸‹æ¥æˆ‘ç€é‡ä»‹ç»ä¸‹è¿™ä¸¤ä¸ªæ¨¡å‹ã€‚</p>
<h3 data-id="heading-2">GPTæ¨¡å‹ï¼šæˆ‘çš„"ä»£ç å®¡æŸ¥å®˜"</h3>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼šé˜²å¾¡æ€§ç¼–ç¨‹æ€ç»´</strong></p>
<p>GPTæ¨¡å‹æœ€å¤§çš„ç‰¹ç‚¹æ˜¯"è¿‡åº¦è´Ÿè´£"ã€‚å®ƒä¼šåœ¨ä»£ç ä¸­è‡ªåŠ¨æ·»åŠ å„ç§æ ¡éªŒé€»è¾‘ã€ç±»å‹æ£€æŸ¥ã€é”™è¯¯å¤„ç†ï¼Œç”šè‡³ä¼šåœ¨ä½ æ²¡æƒ³åˆ°çš„åœ°æ–¹åŠ ä¸Šæ³¨é‡Šã€‚è¿™è®©æˆ‘å…»æˆäº†è‰¯å¥½çš„ç¼–ç ä¹ æƒ¯â€”â€”<strong>å†™ä»£ç æ—¶å…ˆæƒ³å¥½è¾¹ç•Œæ¡ä»¶</strong>ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç¼–å†™æ ¸å¿ƒä¸šåŠ¡é€»è¾‘æ—¶ï¼Œéœ€è¦ç¡®ä¿ä»£ç å¥å£®æ€§</li>
<li>å¤„ç†æ•æ„Ÿæ•°æ®ï¼ˆå¦‚æ”¯ä»˜ã€ç”¨æˆ·ä¿¡æ¯ï¼‰æ—¶</li>
<li>éœ€è¦ç”Ÿæˆè¯¦ç»†æ–‡æ¡£å’Œæ³¨é‡Šæ—¶</li>
</ul>
<p><strong>çœŸå®æ¡ˆä¾‹ï¼š</strong> â€‹ æœ‰ä¸€æ¬¡æˆ‘è®©GPTå¸®æˆ‘å†™ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œå®ƒä¸ä»…ç”Ÿæˆäº†ä¸Šä¼ é€»è¾‘ï¼Œè¿˜è‡ªåŠ¨æ·»åŠ äº†æ–‡ä»¶ç±»å‹æ ¡éªŒã€å¤§å°é™åˆ¶ã€é‡è¯•æœºåˆ¶ï¼Œç”šè‡³è€ƒè™‘äº†ç½‘ç»œä¸­æ–­çš„æƒ…å†µã€‚è™½ç„¶ä»£ç é‡æ¯”æˆ‘è‡ªå·±å†™çš„å¤šäº†ä¸€å€ï¼Œä½†ä¸Šçº¿åç¡®å®æ›´ç¨³å®šã€‚</p>
<h3 data-id="heading-3">Geminiæ¨¡å‹ï¼šæˆ‘çš„"å¿«é€ŸåŸå‹å¸ˆ"</h3>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿ï¼šæç®€ä¸»ä¹‰ + é•¿æ–‡æœ¬å¤„ç†</strong></p>
<p>Geminiçš„ç‰¹ç‚¹æ˜¯"ç²¾å‡†ä¸”é«˜æ•ˆ"ã€‚å®ƒä¸ä¼šæ·»åŠ å¤šä½™çš„åŠŸèƒ½ï¼Œä¸¥æ ¼æŒ‰ç…§ä½ çš„è¦æ±‚ç”Ÿæˆä»£ç ï¼Œè€Œä¸”æ”¯æŒè¶…é•¿ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥ä¸€æ¬¡æ€§åˆ†ææ•´ä¸ªé¡¹ç›®ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å¿«é€ŸåŸå‹å¼€å‘ï¼Œéœ€è¦å¿«é€Ÿçœ‹åˆ°æ•ˆæœ</li>
<li>å¤„ç†å¤§å‹ä»£ç åº“ï¼Œéœ€è¦ç†è§£æ•´ä½“æ¶æ„</li>
<li>éœ€è¦ç”Ÿæˆç®€æ´çš„ä»£ç ç‰‡æ®µæ—¶</li>
</ul>
<p><strong>çœŸå®æ¡ˆä¾‹ï¼š</strong> â€‹ æˆ‘éœ€è¦é‡æ„ä¸€ä¸ªè€é¡¹ç›®çš„ç”¨æˆ·æ¨¡å—ï¼Œæœ‰å‡ åä¸ªæ–‡ä»¶ã€‚Geminiå¸®æˆ‘åˆ†æäº†æ•´ä¸ªæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œç”Ÿæˆäº†æ¸…æ™°çš„æ¶æ„å›¾ï¼Œå¹¶ç»™å‡ºäº†é‡æ„å»ºè®®ã€‚æ•´ä¸ªè¿‡ç¨‹åªç”¨äº†5åˆ†é’Ÿï¼Œå¦‚æœæˆ‘è‡ªå·±åˆ†æï¼Œå¯èƒ½è¦èŠ±åŠå¤©,å¤§å¤§çš„èŠ‚çœäº†å¼€å‘æ—¶é—´åŠåˆ†ææ—¶é—´</p>
<h3 data-id="heading-4">æˆ‘çš„é€‰æ‹©ç­–ç•¥</h3>
<br/>



































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ¨¡å‹</th><th>åŸå› </th></tr></thead><tbody><tr><td>æ ¸å¿ƒä¸šåŠ¡å¼€å‘</td><td>GPT</td><td>ä»£ç æ›´å¥å£®ï¼Œè€ƒè™‘æ›´å‘¨å…¨</td></tr><tr><td>å¿«é€ŸåŸå‹</td><td>Gemini</td><td>å“åº”å¿«ï¼Œä»£ç ç®€æ´</td></tr><tr><td>ä»£ç å®¡æŸ¥</td><td>GPT</td><td>èƒ½å‘ç°æ½œåœ¨é—®é¢˜</td></tr><tr><td>æ¶æ„åˆ†æ</td><td>Gemini</td><td>é•¿æ–‡æœ¬å¤„ç†èƒ½åŠ›å¼º</td></tr><tr><td>å­¦ä¹ æ–°æŠ€æœ¯</td><td>ä¸¤è€…äº¤æ›¿</td><td>å¯¹æ¯”ä¸åŒæ€è·¯</td></tr></tbody></table>
<p><strong>ç»éªŒæ€»ç»“ï¼š</strong> â€‹ ä¸è¦ä¸€ç›´åªç”¨ä¸€ä¸ªæ¨¡å‹ï¼Œæ ¹æ®ä»»åŠ¡ç‰¹ç‚¹çµæ´»åˆ‡æ¢ã€‚GPTé€‚åˆ"æ±‚ç¨³"ï¼ŒGeminié€‚åˆ"æ±‚å¿«"ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€Max Mode vs Auto Modeï¼šæˆ‘çš„æ•ˆç‡æå‡ç§˜ç±</h2>
<p>TRAEæä¾›äº†ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼šMax Modeå’ŒAuto Modeï¼Œä½¿ç”¨ä¹‹åï¼Œæ”¹å˜äº†æˆ‘çš„å¼€å‘æ¨¡å¼ã€‚æ¥ä¸‹æ¥æˆ‘ä¸»è¦è®²ä¸‹è¿™ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«ã€‚</p>
<h3 data-id="heading-6">Max Modeï¼šå¤æ‚ä»»åŠ¡çš„"é‡å‹æ­¦å™¨"</h3>
<p><strong>ç‰¹ç‚¹ï¼š</strong> â€‹ æ”¯æŒæœ€å¤§1Mä¸Šä¸‹æ–‡çª—å£ï¼Œæœ€å¤š200æ¬¡å·¥å…·è°ƒç”¨ï¼Œä¸éœ€è¦æ‰‹åŠ¨ç»§ç»­ã€‚</p>
<p><strong>æˆ‘çš„ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ol>
<li><strong>å¤§å‹é¡¹ç›®é‡æ„</strong>ï¼šéœ€è¦ç†è§£æ•´ä¸ªé¡¹ç›®çš„ä¾èµ–å…³ç³»</li>
<li><strong>å¤æ‚ä¸šåŠ¡é€»è¾‘</strong>ï¼šéœ€è¦å¤šè½®å¯¹è¯æ‰èƒ½å®Œæˆçš„ä»»åŠ¡</li>
<li><strong>ç”Ÿæˆå®Œæ•´é¡¹ç›®</strong>ï¼šä»éœ€æ±‚åˆ°éƒ¨ç½²çš„å…¨æµç¨‹</li>
</ol>
<p><strong>çœŸå®æ¡ˆä¾‹ï¼š</strong> â€‹ æˆ‘éœ€è¦å¼€å‘ä¸€ä¸ªåå°ç®¡ç†ç³»ç»Ÿï¼Œæ¶‰åŠç”¨æˆ·ã€å•†å“ã€è®¢å•ã€æ”¯ä»˜ç­‰å¤šä¸ªæ¨¡å—ã€‚åœ¨Max Modeä¸‹ï¼Œæˆ‘åªéœ€è¦æè¿°éœ€æ±‚ï¼ŒTRAEä¼šè‡ªåŠ¨æ‹†è§£ä»»åŠ¡ã€ç”Ÿæˆä»£ç ã€é…ç½®ç¯å¢ƒï¼Œç”šè‡³å¸®æˆ‘å†™æµ‹è¯•ç”¨ä¾‹ã€‚æ•´ä¸ªè¿‡ç¨‹æˆ‘åªè´Ÿè´£å®¡æ ¸å’Œå¾®è°ƒï¼Œå¼€å‘æ•ˆç‡æå‡äº†è‡³å°‘3å€ã€‚</p>
<p><strong>ä½¿ç”¨æŠ€å·§ï¼š</strong></p>
<ul>
<li>å¼€å¯Max Modeå‰ï¼Œå…ˆæ•´ç†å¥½éœ€æ±‚æ–‡æ¡£</li>
<li>ä½¿ç”¨<code>#</code>ç¬¦å·å¼•ç”¨é¡¹ç›®æ–‡ä»¶ï¼Œè®©å…¶ç†è§£ä¸Šä¸‹æ–‡</li>
<li>å®šæœŸä¿å­˜å¯¹è¯è®°å½•ï¼Œé¿å…ä¸¢å¤±è¿›åº¦</li>
</ul>
<h3 data-id="heading-7">Auto Modeï¼šæ—¥å¸¸å¼€å‘çš„"æ™ºèƒ½åŠ©æ‰‹"</h3>
<p><strong>ç‰¹ç‚¹ï¼š</strong> â€‹ è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ¨¡å‹ï¼Œæ™ºèƒ½è°ƒåº¦èµ„æºï¼Œçœå¿ƒçœåŠ›ã€‚</p>
<p><strong>æˆ‘çš„ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ol>
<li><strong>æ—¥å¸¸ä»£ç è¡¥å…¨</strong>ï¼šå†™ä»£ç æ—¶çš„æ™ºèƒ½æç¤º</li>
<li><strong>å¿«é€Ÿé—®ç­”</strong>ï¼šé‡åˆ°é—®é¢˜éšæ—¶æé—®</li>
<li><strong>å°åŠŸèƒ½å¼€å‘</strong>ï¼šç®€å•çš„å¢åˆ æ”¹æŸ¥</li>
</ol>
<p><strong>çœŸå®æ¡ˆä¾‹ï¼š</strong> â€‹ æˆ‘æ¯å¤©éƒ½ä¼šç”¨Auto Modeå¤„ç†å„ç§å°é—®é¢˜ï¼šä¿®å¤ä¸€ä¸ªbugã€ä¼˜åŒ–ä¸€æ®µä»£ç ã€è§£é‡Šä¸€ä¸ªAPIç”¨æ³•ã€‚æ¶‰åŠåˆ°å°é—®é¢˜çš„æ”¹åŠ¨ï¼Œæˆ‘ä¼šé€‰æ‹©Auto Modeæ¨¡å¼</p>
<p><strong>ä½¿ç”¨æŠ€å·§ï¼š</strong></p>
<ul>
<li>ä¸éœ€è¦æ‰‹åŠ¨é€‰æ‹©æ¨¡å‹ï¼Œè®©AIè‡ªåŠ¨åˆ¤æ–­</li>
<li>é€‚åˆå¤„ç†ç®€å•çš„ã€å•æ¬¡å¯¹è¯å°±èƒ½è§£å†³çš„é—®é¢˜</li>
<li>æˆæœ¬æ›´ä½ï¼Œé€‚åˆæ—¥å¸¸é«˜é¢‘ä½¿ç”¨</li>
</ul>
<h3 data-id="heading-8">æˆ‘çš„æ¨¡å¼åˆ‡æ¢ç­–ç•¥</h3>
<br/>



































<table><thead><tr><th>ä»»åŠ¡ç±»å‹</th><th>æ¨èæ¨¡å¼</th><th>åŸå› </th></tr></thead><tbody><tr><td>å®Œæ•´é¡¹ç›®å¼€å‘</td><td>Max Mode</td><td>éœ€è¦é•¿ä¸Šä¸‹æ–‡å’Œå¤šè½®å¯¹è¯</td></tr><tr><td>æ—¥å¸¸ç¼–ç </td><td>Auto Mode</td><td>å“åº”å¿«ï¼Œæˆæœ¬ä½</td></tr><tr><td>å­¦ä¹ æºç </td><td>Max Mode</td><td>éœ€è¦æ·±åº¦ç†è§£ä»£ç ç»“æ„</td></tr><tr><td>å¿«é€Ÿè°ƒè¯•</td><td>Auto Mode</td><td>å•æ¬¡å¯¹è¯å°±èƒ½è§£å†³</td></tr><tr><td>å›¢é˜Ÿåä½œ</td><td>Max Mode</td><td>éœ€è¦ç”Ÿæˆå®Œæ•´æ–‡æ¡£</td></tr></tbody></table>
<br/>
<p><strong>ç»éªŒæ€»ç»“ï¼š</strong> â€‹ Max Modeé€‚åˆ"å¤§è€Œå…¨"çš„ä»»åŠ¡ï¼ŒAuto Modeé€‚åˆ"å°è€Œç¾"çš„åœºæ™¯ã€‚é€šå¸¸æˆ‘ä¼šåœ¨Max Modeä¸‹å®Œæˆæ ¸å¿ƒåŠŸèƒ½ï¼Œç„¶ååœ¨Auto Modeä¸‹è¿›è¡Œæ—¥å¸¸ç»´æŠ¤ã€‚</p>
<h2 data-id="heading-9">å››ã€é‚£äº›"çœ‹ä¸æ‡‚"çš„æºç ï¼ŒTRAEå¸®æˆ‘è¯»æ‡‚äº†</h2>
<p>å¤§å®¶éƒ½çŸ¥é“ï¼Œæœ‰äº›æºç çœ‹èµ·æ¥æ¯ç‡¥éš¾æ‡‚ï¼Œåæ¥æˆ‘å°è¯•ä½¿ç”¨TRAEå¸®æˆ‘åˆ†æã€‚</p>
<h3 data-id="heading-10">æ¡ˆä¾‹ï¼šç†è§£Vue3æºç </h3>
<p>å½“æˆ‘å°è¯•è‡ªå·±é˜…è¯»Vue3çš„æºç ï¼Œå¯¹äºå¤æ‚çš„å“åº”å¼ç³»ç»Ÿå’Œè™šæ‹ŸDOMï¼Œæˆ‘å¾ˆå¿«å°±æ‡µäº†ã€‚ç°åœ¨ç”¨TRAEå¸®æˆ‘åˆ†æï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è¯·å¸®æˆ‘åˆ†æVue3çš„å“åº”å¼ç³»ç»Ÿï¼š
<span class="hljs-bullet">1.</span> reactiveå’Œrefçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
<span class="hljs-bullet">2.</span> ä¾èµ–æ”¶é›†å’Œæ´¾å‘æ›´æ–°çš„æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ
<span class="hljs-bullet">3.</span> è¯·ç”¨æµç¨‹å›¾å±•ç¤ºæ•´ä¸ªè¿‡ç¨‹
</code></pre>
<p>æ ¹æ®TRAEç”Ÿæˆçš„è§£æï¼Œå¾ˆå¤§ç¨‹åº¦åŠ å¿«äº†æˆ‘ä»¬ç†è§£æºç çš„è¿›åº¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f52b06da26c844bbbc31d489ecca48e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgemhvdXpob3V5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768804021&amp;x-signature=x7h3gf%2FVf7LN3NkAoby9%2F5pHCk8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11">æˆ‘çš„æºç å­¦ä¹ æµç¨‹</h3>
<ol>
<li><strong>æ•´ä½“äº†è§£</strong>ï¼šè®©TRAEç”Ÿæˆé¡¹ç›®æ¶æ„å›¾</li>
<li><strong>æ·±å…¥æ¨¡å—</strong>ï¼šé€‰æ‹©æ ¸å¿ƒæ¨¡å—ï¼Œè®©TRAEè§£é‡Šå®ç°åŸç†</li>
<li><strong>ç»†èŠ‚åˆ†æ</strong>ï¼šé‡åˆ°å…·ä½“é—®é¢˜ï¼Œç”¨Auto Modeå¿«é€Ÿæé—®</li>
<li><strong>å®è·µéªŒè¯</strong>ï¼šè‡ªå·±åŠ¨æ‰‹å†™ä»£ç ï¼Œé‡åˆ°é—®é¢˜å†é—®TRAE</li>
</ol>
<p><strong>ç»éªŒæ€»ç»“ï¼š</strong> â€‹ TRAEä¸æ˜¯è®©ä½ ä¸å­¦æºç ï¼Œè€Œæ˜¯å¸®ä½ é™ä½å­¦ä¹ é—¨æ§›ã€‚å®ƒæŠŠå¤æ‚çš„æºç æ‹†è§£æˆå¯ç†è§£çš„çŸ¥è¯†ç‚¹ï¼Œè®©ä½ èƒ½æ›´å¿«åœ°æŒæ¡æ ¸å¿ƒæŠ€æœ¯ã€‚</p>
<h2 data-id="heading-12">äº”ã€æˆ‘çš„TRAEå·¥ä½œæµï¼šä»éœ€æ±‚åˆ°ä¸Šçº¿çš„å…¨æµç¨‹</h2>
<p>ç»è¿‡ä¸€å¹´çš„æ‘¸ç´¢ï¼Œæˆ‘æ€»ç»“å‡ºäº†ä¸€å¥—é«˜æ•ˆçš„TRAEå·¥ä½œæµï¼š</p>
<h3 data-id="heading-13">é˜¶æ®µ1ï¼šéœ€æ±‚åˆ†æï¼ˆMax Modeï¼‰</h3>
<pre><code class="hljs language-diff" lang="diff">å¸®æˆ‘è®¾è®¡ä¸€ä¸ªç”µå•†åå°ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š
<span class="hljs-deletion">- ç”¨æˆ·ç®¡ç†ï¼šå¢åˆ æ”¹æŸ¥ã€æƒé™æ§åˆ¶</span>
<span class="hljs-deletion">- å•†å“ç®¡ç†ï¼šåˆ†ç±»ã€ä¸Šä¸‹æ¶ã€åº“å­˜ç®¡ç†</span>
<span class="hljs-deletion">- è®¢å•ç®¡ç†ï¼šåˆ›å»ºã€æ”¯ä»˜ã€å‘è´§ã€é€€æ¬¾</span>
<span class="hljs-deletion">- æ•°æ®ç»Ÿè®¡ï¼šé”€å”®æŠ¥è¡¨ã€ç”¨æˆ·è¡Œä¸ºåˆ†æ</span>

æŠ€æœ¯æ ˆï¼šReact + TypeScript + Ant Design + Node.js + MySQL
</code></pre>
<p>TRAEä¼šç”Ÿæˆéœ€æ±‚æ–‡æ¡£ã€æŠ€æœ¯é€‰å‹å»ºè®®ã€æ•°æ®åº“è®¾è®¡ï¼Œç”šè‡³åŒ…æ‹¬APIæ¥å£æ–‡æ¡£ã€‚</p>
<h3 data-id="heading-14">é˜¶æ®µ2ï¼šé¡¹ç›®æ­å»ºï¼ˆBuilderæ¨¡å¼ï¼‰</h3>
<p>åœ¨Builderæ¨¡å¼ä¸‹ï¼ŒTRAEä¼šè‡ªåŠ¨åˆ›å»ºé¡¹ç›®ç»“æ„ã€å®‰è£…ä¾èµ–ã€é…ç½®ç¯å¢ƒï¼Œå¹¶ç”ŸæˆåŸºç¡€ä»£ç ã€‚æˆ‘åªéœ€è¦å®¡æ ¸ç”Ÿæˆçš„ä»£ç ï¼Œç¡®è®¤æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</p>
<h3 data-id="heading-15">é˜¶æ®µ3ï¼šåŠŸèƒ½å¼€å‘ï¼ˆMax Mode + Auto Modeï¼‰</h3>
<ul>
<li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šç”¨Max Modeç”Ÿæˆå®Œæ•´æ¨¡å—</li>
<li><strong>ç»†èŠ‚è°ƒæ•´</strong>ï¼šç”¨Auto Modeå¿«é€Ÿä¿®æ”¹æ ·å¼ã€ä¿®å¤bug</li>
<li><strong>ä»£ç å®¡æŸ¥</strong>ï¼šç”¨GPTæ¨¡å‹è¿›è¡Œä»£ç è´¨é‡æ£€æŸ¥</li>
</ul>
<h3 data-id="heading-16">é˜¶æ®µ4ï¼šæµ‹è¯•éƒ¨ç½²ï¼ˆAuto Modeï¼‰</h3>
<pre><code class="hljs language-diff" lang="diff">è¯·å¸®æˆ‘ç”Ÿæˆå•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–ä»¥ä¸‹åœºæ™¯ï¼š
<span class="hljs-deletion">- ç”¨æˆ·ç™»å½•æˆåŠŸ/å¤±è´¥</span>
<span class="hljs-deletion">- å•†å“æ·»åŠ /åˆ é™¤</span>
<span class="hljs-deletion">- è®¢å•åˆ›å»º/æ”¯ä»˜</span>
</code></pre>
<p>TRAEä¼šç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œæˆ‘åªéœ€è¦è¿è¡Œæµ‹è¯•ï¼Œç¡®è®¤åŠŸèƒ½æ­£å¸¸ã€‚</p>
<h3 data-id="heading-17">é˜¶æ®µ5ï¼šä¸Šçº¿ç»´æŠ¤ï¼ˆAuto Modeï¼‰</h3>
<p>ä¸Šçº¿åé‡åˆ°é—®é¢˜ï¼Œéšæ—¶ç”¨Auto Modeæé—®ï¼š</p>
<pre><code class="hljs">æˆ‘çš„é¡¹ç›®åœ¨Chromeæµè§ˆå™¨ä¸‹æ ·å¼é”™ä¹±ï¼Œè¯·å¸®æˆ‘åˆ†æåŸå› 
</code></pre>
<p>TRAEä¼šç»™å‡ºè§£å†³æ–¹æ¡ˆï¼Œç”šè‡³ç›´æ¥ç”Ÿæˆä¿®å¤ä»£ç ã€‚</p>
<h2 data-id="heading-18">å…­ã€è¿™ä¸€å¹´ï¼Œå…³äºTRAE,æˆ‘å­¦åˆ°äº†ä»€ä¹ˆ</h2>
<h3 data-id="heading-19">1. <strong>AIä¸æ˜¯æ›¿ä»£ï¼Œè€Œæ˜¯å¢å¼º</strong></h3>
<p>TRAEå¯ä»¥å¸®æˆ‘å¤„ç†80%çš„é‡å¤æ€§å·¥ä½œï¼Œè®©æˆ‘æœ‰æ›´å¤šæ—¶é—´æ€è€ƒæ¶æ„è®¾è®¡ã€ä¸šåŠ¡é€»è¾‘ã€ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-20">2. <strong>å­¦ä¼šæé—®æ¯”å­¦ä¼šå†™ä»£ç æ›´é‡è¦</strong></h3>
<p>åŒæ ·çš„éœ€æ±‚ï¼Œä¸åŒçš„æé—®æ–¹å¼ï¼Œå¾—åˆ°çš„ç»“æœå¤©å·®åœ°åˆ«ã€‚ç”¨ç»“æ„åŒ–çš„è¯­è¨€æè¿°éœ€æ±‚ï¼Œç”¨å…·ä½“çš„ä¾‹å­è¯´æ˜é—®é¢˜ï¼Œç”¨æ¸…æ™°çš„é€»è¾‘è¡¨è¾¾æ„å›¾ã€‚<strong>å¥½çš„æé—®ï¼Œæ˜¯é«˜æ•ˆä½¿ç”¨AIçš„å‰æã€‚</strong></p>
<h3 data-id="heading-21">3. <strong>ä»£ç è´¨é‡æ¯”ä»£ç é€Ÿåº¦æ›´é‡è¦</strong></h3>
<p>TRAEå¯ä»¥å¿«é€Ÿç”Ÿæˆä»£ç ï¼Œä½†ä¸ä¸€å®šæ˜¯æœ€ä¼˜çš„ã€‚è¦å…»æˆ"å…ˆè®©AIç”Ÿæˆï¼Œå†è‡ªå·±ä¼˜åŒ–"çš„ä¹ æƒ¯ã€‚</p>
<h3 data-id="heading-22">4. <strong>æŒç»­å­¦ä¹ æ˜¯å”¯ä¸€çš„æŠ¤åŸæ²³</strong></h3>
<p>AIæŠ€æœ¯åœ¨é£é€Ÿå‘å±•ï¼Œä»Šå¤©çš„æœ€ä¼˜è§£æ˜å¤©å¯èƒ½å°±è¿‡æ—¶äº†ã€‚è¦ä¸æ–­åœ°å­¦ä¹ æ–°æŠ€æœ¯ï¼Œå…³æ³¨AIé¢†åŸŸçš„æœ€æ–°åŠ¨æ€ï¼Œå°è¯•æ–°çš„å·¥å…·å’Œæ–¹æ³•ã€‚</p>
<h2 data-id="heading-23">ä¸ƒã€ç»™æ–°æ‰‹çš„å»ºè®®</h2>
<p>å¦‚æœä½ åˆšå¼€å§‹ä½¿ç”¨TRAEï¼Œæˆ‘æœ‰å‡ ç‚¹å»ºè®®ï¼š</p>
<ol>
<li><strong>ä»å°å¤„å¼€å§‹</strong>ï¼šä¸è¦ä¸€ä¸Šæ¥å°±è®©å®ƒç”Ÿæˆå®Œæ•´é¡¹ç›®ï¼Œå…ˆä»ç®€å•çš„ä»£ç ç‰‡æ®µå¼€å§‹</li>
<li><strong>å­¦ä¼šæ‹’ç»</strong>ï¼šAIç”Ÿæˆçš„ä»£ç ä¸ä¸€å®šéƒ½æ­£ç¡®ï¼Œè¦å­¦ä¼šåˆ¤æ–­å’Œæ‹’ç»</li>
<li><strong>å¤šé—®å¤šè¯•</strong>ï¼šåŒä¸€ä¸ªé—®é¢˜ï¼Œç”¨ä¸åŒçš„æ–¹å¼æé—®ï¼Œçœ‹çœ‹å“ªä¸ªæ•ˆæœæ›´å¥½</li>
<li><strong>å»ºç«‹çŸ¥è¯†åº“</strong>ï¼šæŠŠå¸¸ç”¨çš„Promptä¿å­˜ä¸‹æ¥ï¼Œå½¢æˆè‡ªå·±çš„çŸ¥è¯†åº“</li>
<li><strong>ä¿æŒæ‰¹åˆ¤æ€§æ€ç»´</strong>ï¼šAIä¼šçŠ¯é”™ï¼Œä½ è¦æœ‰è‡ªå·±çš„åˆ¤æ–­</li>
</ol>
<h2 data-id="heading-24">å…«ã€ç»“å°¾ï¼š</h2>
<p>è¿™ä¸€å¹´ï¼ŒTRAEå·²ç»å˜æˆäº†æˆ‘ä¸å¯æˆ–ç¼ºçš„"å°ä¼™ä¼´"ã€‚å®ƒå¸®æˆ‘å®Œæˆäº†ä»"çœ‹ä¸æ‡‚"åˆ°"ç©å¾—è½¬"çš„è½¬å˜ï¼Œè®©æˆ‘åœ¨æŠ€æœ¯é“è·¯ä¸Šèµ°å¾—æ›´è¿œã€æ›´ç¨³ã€‚å¦‚æœä½ ä¹Ÿæƒ³æå‡å¼€å‘æ•ˆç‡ï¼Œä¸å¦¨è¯•è¯•TRAEâ€”â€”å®ƒä¼šè®©ä½ æˆä¸ºä¸€ä¸ªæ›´å¥½çš„å¼€å‘è€…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€HarmonyOSåº”ç”¨å¼€å‘ã€‘é¸¿è’™ç¢°ä¸€ç¢°åˆ†äº«å¼€å‘æºç å’Œæµç¨‹è®²è§£]]></title>    <link>https://juejin.cn/post/7593362940072050740</link>    <guid>https://juejin.cn/post/7593362940072050740</guid>    <pubDate>2026-01-12T01:30:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593362940072050740" data-draft-id="7593573617647943732" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€HarmonyOSåº”ç”¨å¼€å‘ã€‘é¸¿è’™ç¢°ä¸€ç¢°åˆ†äº«å¼€å‘æºç å’Œæµç¨‹è®²è§£"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-01-12T01:30:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GeorgePanda"/> <meta itemprop="url" content="https://juejin.cn/user/1239904847930654"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€HarmonyOSåº”ç”¨å¼€å‘ã€‘é¸¿è’™ç¢°ä¸€ç¢°åˆ†äº«å¼€å‘æºç å’Œæµç¨‹è®²è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904847930654/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GeorgePanda
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T01:30:15.000Z" title="Mon Jan 12 2026 01:30:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€HarmonyOSåº”ç”¨å¼€å‘ã€‘é¸¿è’™ç¢°ä¸€ç¢°åˆ†äº«å¼€å‘æºç å’Œæµç¨‹è®²è§£</h2>
<h2 data-id="heading-1">ä¸€ã€æ¦‚è¿°</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1316d396f674fcfbf1cbe02503f1d8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR2VvcmdlUGFuZGE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768786215&amp;x-signature=OkDA2FaNpYdXMCZWB2PunnzB2mA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é¸¿è’™ä¸­çš„ç¢°ä¸€ç¢°åˆ†äº«æ˜¯ç³»ç»Ÿçš„ç‰¹è‰²æ“ä½œã€‚å¾ˆå¤šå¼€å‘è€…éƒ½å¯¹è¿™ä¸ªé…·ç‚«çš„æ•ˆæœéå¸¸æ„Ÿå…´è¶£ã€‚ä¸è¿‡åœ¨æ¥å…¥è¯¥åŠŸèƒ½ä¹‹å‰ï¼Œä¸‹æ„è¯†çš„å°±ä¼šè§‰å¾—å¾ˆå¤æ‚ã€‚å…¶å®HarmonyOSå·²ç»å¯¹ç¢°ä¸€ç¢°åˆ†äº«çš„æ¥å£åšäº†éå¸¸é«˜çš„å°è£…ï¼Œå¼€å‘è€…åœ¨è°ƒç”¨å®ç°è¯¥æ•ˆæœæ—¶ï¼Œå·¥ä½œé‡å¾ˆå°ã€‚</p>
<p>å¹¶ä¸”å°±ç®—æ²¡æ¥å…¥ç¢°ä¸€ç¢°åˆ†äº«ï¼Œå°†ä¸¤å°æ‰‹æœºé¡¶éƒ¨è¿›è¡Œé è¿‘ï¼Œä¹Ÿä¼šè§¦å‘ç¢°ä¸€ç¢°åˆ†äº«åŠŸèƒ½ï¼Œåªä¸è¿‡ä¼šæç¤ºæ— åˆ†äº«å†…å®¹ã€‚å‰ææ˜¯éƒ½å¼€å¯äº†NFCï¼Œå…¶å®åº•å±‚æ˜¯é€šè¿‡NFCè¿›è¡Œé€šä¿¡ã€‚</p>
<p><strong>ç¢°ä¸€ç¢°çš„æ¥å£æ•´ä½“å°±åˆ†ä¸ºä¸‰ä¸ªï¼š</strong>
ï¼ˆ1ï¼‰ç›‘å¬ç¢°ä¸€ç¢°harmonyShare.on('knockShare', this.onKnockShare)
ï¼ˆ2ï¼‰å–æ¶ˆç›‘å¬ç¢°ä¸€ç¢°harmonyShare.off('knockShare', this.onKnockShare)
ï¼ˆ3ï¼‰æœ€åæœ€é‡è¦çš„æ˜¯ï¼Œæ”¶åˆ°ç¢°ä¸€ç¢°å›è°ƒåï¼Œå¤„ç†è¦åˆ†äº«çš„ä¿¡æ¯ï¼Œè°ƒç”¨ç¢°ä¸€ç¢°åˆ†äº«å‘é€æ¥å£ã€‚onKnockShareå›è°ƒå‡½æ•°ä¸­çš„shareDataåˆ†äº«åŒ…å’Œè°ƒç”¨shareæ¥å£ã€‚</p>
<p>å½“ç›‘å¬äº†ç¢°ä¸€ç¢°åˆ†äº«ï¼Œä¸¤ä¸ªæ‰‹æœºè¿›è¡Œç¢°ä¸€ç¢°æ“ä½œæ—¶ï¼Œå°±å¯ä»¥æ”¶åˆ°è¯¥æ“ä½œçš„æ—¶æœºï¼Œæ­¤æ—¶åœ¨åˆ†äº«å›è°ƒä¸­ï¼Œå¯ä»¥æ ¹æ®åˆ†äº«å®shareDataçš„å‚æ•°ä¿¡æ¯ï¼Œè¿›è¡Œé…ç½®ï¼Œæ¯”å¦‚åˆ†äº«å›¾ç‰‡ï¼Œè¿˜æ˜¯è§†é¢‘ï¼Œè¿˜æ˜¯é“¾æ¥ç­‰ç­‰ã€‚shareDataä¸­çš„å‚æ•°éå¸¸å¤šï¼Œå¯ä»¥å®ç°ä¸åŒçš„åˆ†äº«æ•ˆæœå’Œå±•ç¤ºæ ·å¼ï¼Œå…·ä½“å‚è€ƒæ–‡æœ«çš„é“¾æ¥ã€‚</p>
<p>å½“ä¸éœ€è¦å¤„ç†åˆ†äº«æ—¶ï¼Œå…³é—­ç›‘å¬å³å¯ã€‚æ•´ä½“é€»è¾‘éå¸¸ç®€å•ã€‚</p>
<h2 data-id="heading-2">äºŒã€ä»£ç å®ç°å’Œè¯¦ç»†è§£é‡Š</h2>
<p><strong>æ ¸å¿ƒå·¥å…·ç±»HarmonyShareMgrï¼Œç¢°ä¸€ç¢°å›¾ç‰‡åˆ†äº«ä¸¾ä¾‹ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { harmonyShare, systemShare } <span class="hljs-keyword">from</span> <span class="hljs-string">"@kit.ShareKit"</span>;
<span class="hljs-keyword">import</span> { uniformTypeDescriptor <span class="hljs-keyword">as</span> utd } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.ArkData'</span>;
<span class="hljs-comment">/**
 * é¸¿è’™ç³»ç»Ÿåˆ†äº«å·¥å…·ç±»
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HarmonyShareMgr</span>{

  <span class="hljs-keyword">private</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"HarmonyShareMgr"</span>;

  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">mHarmonyShareMgr</span>: <span class="hljs-title class_">HarmonyShareMgr</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">Ins</span>(){
    <span class="hljs-keyword">if</span>(!<span class="hljs-title class_">HarmonyShareMgr</span>.<span class="hljs-property">mHarmonyShareMgr</span>){
      <span class="hljs-title class_">HarmonyShareMgr</span>.<span class="hljs-property">mHarmonyShareMgr</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HarmonyShareMgr</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">HarmonyShareMgr</span>.<span class="hljs-property">mHarmonyShareMgr</span>;
  }

  <span class="hljs-comment">// åˆ†äº«å›¾ç‰‡Uri</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">mImageUri</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;
  <span class="hljs-comment">// åˆ†äº«ç±»å‹</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">mShareType</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">""</span>;

  <span class="hljs-comment">/**
   * è®¾ç½®å›¾ç‰‡åˆ†äº«ä¿¡æ¯åŒ…
   */</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">setImageShareData</span>(<span class="hljs-params">imageUri: <span class="hljs-built_in">string</span></span>){
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mImageUri</span> = imageUri;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">mShareType</span> = utd.<span class="hljs-property">UniformDataType</span>.<span class="hljs-property">JPEG</span>;
  }

  <span class="hljs-comment">/**
   * æ”¶åˆ°ç¢°ä¸€ç¢°åˆ†äº«å›è°ƒ
   */</span>
  <span class="hljs-keyword">private</span> onKnockShare = <span class="hljs-function">(<span class="hljs-params">shareTarget: harmonyShare.SharableTarget</span>)=&gt;</span>{
    <span class="hljs-comment">// æ‰“åŒ…</span>
    <span class="hljs-keyword">const</span> shareData = <span class="hljs-keyword">new</span> systemShare.<span class="hljs-title class_">SharedData</span>({
      <span class="hljs-attr">utd</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">mShareType</span>,
      <span class="hljs-attr">uri</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">mImageUri</span>,
    });

    <span class="hljs-comment">// å‘é€åˆ†äº«åŒ…</span>
    shareTarget.<span class="hljs-title function_">share</span>(shareData);
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">registerKnock</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">TAG</span>, <span class="hljs-string">" registerKnock"</span>);
    harmonyShare.<span class="hljs-title function_">on</span>(<span class="hljs-string">'knockShare'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onKnockShare</span>);
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">unRegisterKnock</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">TAG</span>, <span class="hljs-string">" unRegisterKnock"</span>);
    harmonyShare.<span class="hljs-title function_">off</span>(<span class="hljs-string">'knockShare'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onKnockShare</span>);
  }
}

</code></pre>
<p><strong>æµ‹è¯•é¡µé¢å†…è°ƒç”¨ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { photoAccessHelper } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.MediaLibraryKit'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BusinessError</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@kit.BasicServicesKit'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HarmonyShareMgr</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../mgr/HarmonyShareMgr'</span>;

<span class="hljs-comment">/**
 * é¸¿è’™åˆ†äº«æµ‹è¯•é¡µé¢
 */</span>
<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">HarmonyShareTestPage</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">TAG</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"AlbumSelectPage"</span>;

  <span class="hljs-title function_">onPageShow</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-comment">// å½“å‰ç•Œé¢æ˜¾ç¤ºæ—¶ï¼Œè¿›è¡Œç¢°ä¸€ç¢°ç›‘å¬</span>
    <span class="hljs-title class_">HarmonyShareMgr</span>.<span class="hljs-title class_">Ins</span>().<span class="hljs-title function_">registerKnock</span>();
  }

  <span class="hljs-title function_">onPageHide</span>(): <span class="hljs-built_in">void</span> {
    <span class="hljs-title class_">HarmonyShareMgr</span>.<span class="hljs-title class_">Ins</span>().<span class="hljs-title function_">unRegisterKnock</span>();
  }

  onClickSelectPhoto = <span class="hljs-function">()=&gt;</span>{
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">let</span> <span class="hljs-title class_">PhotoSelectOptions</span> = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoSelectOptions</span>();
      <span class="hljs-comment">// è®¾ç½®ç­›é€‰è¿‡æ»¤æ¡ä»¶</span>
      <span class="hljs-title class_">PhotoSelectOptions</span>.<span class="hljs-property">MIMEType</span> = photoAccessHelper.<span class="hljs-property">PhotoViewMIMETypes</span>.<span class="hljs-property">IMAGE_TYPE</span>;
      <span class="hljs-comment">// é€‰æ‹©ç”¨æˆ·é€‰æ‹©æ•°é‡</span>
      <span class="hljs-title class_">PhotoSelectOptions</span>.<span class="hljs-property">maxSelectNumber</span> = <span class="hljs-number">1</span>;
      <span class="hljs-comment">// å®ä¾‹åŒ–å›¾ç‰‡é€‰æ‹©å™¨</span>
      <span class="hljs-keyword">let</span> photoPicker = <span class="hljs-keyword">new</span> photoAccessHelper.<span class="hljs-title class_">PhotoViewPicker</span>();
      <span class="hljs-comment">// å”¤èµ·å®‰å…¨ç›¸å†Œç»„ä»¶</span>
      photoPicker.<span class="hljs-title function_">select</span>(<span class="hljs-title class_">PhotoSelectOptions</span>, <span class="hljs-function">(<span class="hljs-params">err: BusinessError, PhotoSelectResult: photoAccessHelper.PhotoSelectResult</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (err) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">TAG</span>, <span class="hljs-string">"onClickSelectPhoto photoPicker.select error:"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));
          <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// ç”¨æˆ·é€‰æ‹©ç¡®è®¤åï¼Œä¼šå›è°ƒåˆ°è¿™é‡Œã€‚</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">TAG</span>, <span class="hljs-string">"onClickSelectPhoto photoPicker.select successfully:"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title class_">PhotoSelectResult</span>));
        <span class="hljs-comment">// è°ƒç”¨ç¢°ä¸€ç¢°åˆ†äº«çš„å›¾ç‰‡åˆ†äº«èµ‹å€¼</span>
        <span class="hljs-title class_">HarmonyShareMgr</span>.<span class="hljs-title class_">Ins</span>().<span class="hljs-title function_">setImageShareData</span>(<span class="hljs-title class_">PhotoSelectResult</span>.<span class="hljs-property">photoUris</span>[<span class="hljs-number">0</span>]);
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">let</span> <span class="hljs-attr">err</span>: <span class="hljs-title class_">BusinessError</span> = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">BusinessError</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">TAG</span>, <span class="hljs-string">"onClickSelectPhoto photoPicker.select catch failed:"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(err));
    }
  }

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Row</span>(){
      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'ç‚¹å‡»å”¤èµ·ç›¸å†Œé€‰æ‹©'</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">onClickSelectPhoto</span>)
    }
    .<span class="hljs-title function_">justifyContent</span>(<span class="hljs-title class_">FlexAlign</span>.<span class="hljs-property">Center</span>)
    .<span class="hljs-title function_">size</span>({
      <span class="hljs-attr">width</span>: <span class="hljs-string">"100%"</span>,
      <span class="hljs-attr">height</span>: <span class="hljs-string">"100%"</span>
    })
  }

}
</code></pre>
<h2 data-id="heading-3">ä¸‰ã€å¼•ç”¨èµ„æ–™åœ°å€</h2>
<p>ShareKitå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-guides%2Fshare-introduction" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/share-introduction" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
<p>å†…å®¹åˆ†äº«ï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-guides%2Fknock-share-between-phones-content" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/knock-share-between-phones-content" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p>
<p>åˆ†äº«ä¿¡æ¯åŒ…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Fdoc%2Fharmonyos-references%2Fshare-system-share%23section816451553012" target="_blank" title="https://developer.huawei.com/consumer/cn/doc/harmonyos-references/share-system-share#section816451553012" ref="nofollow noopener noreferrer">developer.huawei.com/consumer/cnâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºNettyçš„TCPåè®®çš„Socketå®¢æˆ·ç«¯]]></title>    <link>https://juejin.cn/post/7593913760042975241</link>    <guid>https://juejin.cn/post/7593913760042975241</guid>    <pubDate>2026-01-12T02:07:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593913760042975241" data-draft-id="7593845442372403246" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºNettyçš„TCPåè®®çš„Socketå®¢æˆ·ç«¯"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-12T02:07:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SimonKing"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056904584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºNettyçš„TCPåè®®çš„Socketå®¢æˆ·ç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056904584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SimonKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T02:07:02.000Z" title="Mon Jan 12 2026 02:07:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼šã€ç¼–ç¨‹æœèŠ±å¤•æ‹¾ã€‘ï¼Œå¯è·å–é¦–å‘å†…å®¹ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a21674f0711d47a0b9b264acf3461c75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2ltb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768788422&amp;x-signature=LR9AfeZceOSjxUi38bo0BotHkoY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">01å¼•è¨€</h2>
<p>ä¹‹å‰åˆ†äº«äº†å…³äºSocketæœåŠ¡ç«¯çš„ä»£ç ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬ç»§ç»­Socketå®¢æˆ·ç«¯ä»£ç çš„åˆ†äº«ã€‚æœ‰äº†ä¹‹å‰çš„ä»£ç åŸºç¡€ï¼Œåˆ†äº«èµ·æ¥å®¢æˆ·ç«¯ç«¯å°±éå¸¸ç®€å•äº†ã€‚å› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å‡ ä½ç›¸ä¼¼ï¼Œç”šè‡³å¯ä»¥ç›´æ¥æ‹·è´ï¼Œä½†æ˜¯æœ‰ä¸€äº›ç»†èŠ‚éœ€è¦æ³¨æ„ã€‚</p>
<h2 data-id="heading-1">02 Socketå®¢æˆ·ç«¯</h2>
<h3 data-id="heading-2">2.1 ä»£ç é¢„è§ˆ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MockClient</span> {

    <span class="hljs-meta">@Getter</span>
    <span class="hljs-keyword">private</span> SocketChannel socketChannel;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connect</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">EventLoopGroup</span> <span class="hljs-variable">eventLoopGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>(<span class="hljs-number">1</span>);
        <span class="hljs-type">Bootstrap</span> <span class="hljs-variable">bootstrap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bootstrap</span>();
        bootstrap.group(eventLoopGroup);
        bootstrap.channel(NioSocketChannel.class);
        bootstrap.option(ChannelOption.SO_KEEPALIVE, <span class="hljs-literal">true</span>);
        
        bootstrap.handler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChannelInitializer</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initChannel</span><span class="hljs-params">(Channel channel)</span> <span class="hljs-keyword">throws</span> Exception {
                <span class="hljs-type">ChannelPipeline</span> <span class="hljs-variable">pipeline</span> <span class="hljs-operator">=</span> channel.pipeline();
                pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DelimiterBasedFrameDecoder</span>(<span class="hljs-number">2048</span>, Unpooled.copiedBuffer(<span class="hljs-string">"_"</span>.getBytes())));
                pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringDecoder</span>(StandardCharsets.UTF_8));
                pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringEncoder</span>(StandardCharsets.UTF_8));
                pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleChannelInboundHandler</span>&lt;String&gt;(){
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">channelRead0</span><span class="hljs-params">(ChannelHandlerContext ctx, String msg)</span> <span class="hljs-keyword">throws</span> Exception {
                        log.info(<span class="hljs-string">"client receive: {}"</span>, msg);
                    }
                });
            }
        });

        <span class="hljs-type">ChannelFuture</span> <span class="hljs-variable">channelFuture</span> <span class="hljs-operator">=</span> bootstrap.connect(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">9091</span>).sync();
        <span class="hljs-built_in">this</span>.socketChannel = (SocketChannel) channelFuture.channel();
    }
}
</code></pre>
<p>åŒæ ·ä½¿ç”¨<code>EventLoopGroup</code>çº¿ç¨‹æ± ï¼Œä¸è¿‡è¿™é‡Œçš„çº¿ç¨‹ç»„åªéœ€è¦ä¸€ä¸ªå°±å¯ä»¥äº†ï¼Œç›´æ¥ç”¨æ¥å¤„ç†ä¸šåŠ¡ã€‚</p>
<h3 data-id="heading-3">2.2 å¼•å¯¼ç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">EventLoopGroup</span> <span class="hljs-variable">eventLoopGroup</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>(<span class="hljs-number">1</span>);
<span class="hljs-type">Bootstrap</span> <span class="hljs-variable">bootstrap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bootstrap</span>();
bootstrap.group(eventLoopGroup);
</code></pre>
<p><code>io.netty.bootstrap.Bootstrap</code>ä¸ºå®¢æˆ·ç«¯çš„å¼•å¯¼ç±»å’ŒæœåŠ¡ç«¯æ˜¯ä¸ä¸€æ ·çš„ã€‚</p>
<ul>
<li><code>io.netty.bootstrap.ServerBootstrap</code> ï¼šæœåŠ¡ç«¯çš„å¼•å¯¼ç±»</li>
<li><code>io.netty.bootstrap.Bootstrap</code>ï¼šå®¢æˆ·ç«¯çš„å¼•å¯¼ç±»</li>
</ul>
<p>ä½†æ˜¯å¼•å¯¼ç±»å¯¹åº”çš„æ–¹æ³•éå¸¸ç±»ä¼¼ã€‚</p>
<h3 data-id="heading-4">2.3 é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç»‘å®šé€šé“</span>
bootstrap.channel(NioSocketChannel.class);
<span class="hljs-comment">// ä¿æ´»è¿æ¥</span>
bootstrap.option(ChannelOption.SO_KEEPALIVE, <span class="hljs-literal">true</span>);
</code></pre>
<p>ç»‘å®šçš„é€šé“åŒºåˆ«äºæœåŠ¡ç«¯çš„é€šé“ï¼š</p>
<ul>
<li><code>io.netty.channel.socket.nio.NioServerSocketChannel</code>ï¼šæœåŠ¡ç«¯çš„é€šé“</li>
<li><code>io.netty.channel.socket.nio.NioSocketChannel</code>ï¼šå®¢æˆ·ç«¯çš„é€šé“</li>
</ul>
<p>ç±»ä¼¼å¸¦<code>Server</code>å…³é”®å­—çš„éƒ½å±äºæœåŠ¡ç«¯çš„å±æ€§æˆ–æ–¹æ³•ã€‚</p>
<h3 data-id="heading-5">2.4 ç¼–è§£ç å™¨</h3>
<p>ç¼–è§£ç å™¨è¦å’ŒæœåŠ¡ç«¯ä¿æŒä¸€è‡´ã€‚</p>
<pre><code class="hljs language-java" lang="java">bootstrap.handler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChannelInitializer</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initChannel</span><span class="hljs-params">(Channel channel)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">ChannelPipeline</span> <span class="hljs-variable">pipeline</span> <span class="hljs-operator">=</span> channel.pipeline();
        pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DelimiterBasedFrameDecoder</span>(<span class="hljs-number">2048</span>, Unpooled.copiedBuffer(<span class="hljs-string">"_"</span>.getBytes())));
        pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringDecoder</span>(StandardCharsets.UTF_8));
        pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringEncoder</span>(StandardCharsets.UTF_8));
        pipeline.addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleChannelInboundHandler</span>&lt;String&gt;(){
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">channelRead0</span><span class="hljs-params">(ChannelHandlerContext ctx, String msg)</span> <span class="hljs-keyword">throws</span> Exception {
                log.info(<span class="hljs-string">"client receive: {}"</span>, msg);
            }
        });
    }
});
</code></pre>
<p>è¿™é‡Œè¦è¯´æ˜çš„æ˜¯ï¼Œè‡ªå®šä¹‰çš„ä¸šåŠ¡å¤„ç†å™¨éœ€è¦æˆ‘ä»¬æ ¹æ®éœ€è¦å¤„ç†å¯¹åº”çš„æ–¹æ³•ã€‚å®¢æˆ·ç«¯ä¸»è¦ç”¨æ¥å‘é€æ¶ˆæ¯ã€‚æ¥ä¸æ¥æ”¶æ¶ˆæ¯éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µå¤„ç†ï¼Œæ¡ˆä¾‹ä¸ºäº†éªŒè¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç›¸äº’é€šä¿¡ï¼Œè¿™é‡Œé€‰æ‹©æ‰“å°æ¥æ”¶çš„æ¶ˆæ¯ã€‚</p>
<h3 data-id="heading-6">2.5 è¿æ¥æœåŠ¡ç«¯</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ChannelFuture</span> <span class="hljs-variable">channelFuture</span> <span class="hljs-operator">=</span> bootstrap.connect(<span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">9091</span>).sync();
<span class="hljs-built_in">this</span>.socketChannel = (SocketChannel) channelFuture.channel();
</code></pre>
<p>æ³¨æ„è¿™é‡Œçš„è¿æ¥æœåŠ¡ç«¯çš„æ–¹å¼å’ŒæœåŠ¡ç«¯æš´æ¼æ¥å£çš„æ–¹å¼çš„åŒºåˆ«ï¼š</p>
<p><code>bootstrap.connect(ip,port)</code>ç”¨æ¥è¿æ¥æœåŠ¡ç«¯çš„<code>IP</code>å’Œ<code>ç«¯å£</code>ï¼Œè€ŒæœåŠ¡ç«¯é€šè¿‡<code>serverBootstrap.bind(9091)</code>æ¥ç»‘å®šç«¯å£ã€‚</p>
<p>åŒæ—¶ï¼Œéƒ½éœ€è¦é€šè¿‡åŒæ­¥çš„ç­‰å¾…ç«¯å£ç»‘å®šæˆåŠŸæˆ–è¿æ¥æœåŠ¡ç«¯çš„<code>IP</code>å’Œæ¥å£æˆåŠŸã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š</p>
<p>å®¢æˆ·ç«¯çš„<code>socketChannel.closeFuture().sync();</code>è¦ä¸è¦ç­‰å¾…é€šé“å…³é—­ï¼Ÿå®¢æˆ·ç«¯ä¸»è¦ç”¨æ¥å‘å¸ƒæ¶ˆæ¯ï¼Œå¯ä»¥å®Œå…¨ä¸åŒå¤„ç†ã€‚å¦‚æœè¿˜è¦ç­‰å¾…æ¥æ”¶æœåŠ¡ç«¯çš„æ¶ˆæ¯ï¼Œå¹¶ä¸”ä¼šéšç€æ–¹æ³•æ‰§è¡Œå®Œæ¯•è€Œç»“æŸï¼Œåˆ™éœ€è¦è¯¥ä»£ç é˜»å¡ã€‚</p>
<p>è€Œå®é™…åº”ç”¨éƒ½æ˜¯åµŒå¥—åœ¨ä¸šåŠ¡åº”ç”¨ä¸­çš„ï¼Œæœ¬èº«å°±ä¸ä¼šå…³é—­ï¼Œæ›´åŠ æ— éœ€é˜»å¡ã€‚</p>
<h2 data-id="heading-7">03 SprintBooté…ç½®</h2>
<p>å‰é¢ä»‹ç»äº†æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬ç»“åˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é›†æˆåˆ°<code>SpringBoot</code>ä¸­ï¼Œå½¢æˆå®Œæ•´çš„é“¾è·¯ã€‚</p>
<h3 data-id="heading-8">3.1 æœåŠ¡ç«¯åˆå§‹åŒ–</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StartConfig</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SockerServer socketServer;


    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        socketServer.start();
    }
}
</code></pre>
<p>é¡¹ç›®å¯åŠ¨çš„æ—¶å€™å¯ä»¥é€šè¿‡<code>@PostConstruct</code>æ³¨è§£ï¼Œå®Œæˆé¡¹ç›®å¯åŠ¨åæœåŠ¡ç«¯çš„åˆå§‹åŒ–ã€‚</p>
<h3 data-id="heading-9">3.2 å®¢æˆ·ç«¯è°ƒç”¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
    <span class="hljs-type">MockClient</span> <span class="hljs-variable">mockClient</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MockClient</span>();
    mockClient.connect();
    <span class="hljs-type">SocketChannel</span> <span class="hljs-variable">socketChannel</span> <span class="hljs-operator">=</span> mockClient.getSocketChannel();

    <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
    socketChannel.writeAndFlush(<span class="hljs-string">"foo test..._"</span>);
}
</code></pre>
<h2 data-id="heading-10">04 å°ç»“</h2>
<p>å®¢æˆ·ç«¯çš„ä»£ç åˆ°è¿™é‡ŒåŸºæœ¬å°±ç»“æŸäº†ã€‚åé¢å°±ä¼šä»‹ç»<code>WebSocket</code>ä»¥åŠåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­çš„é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§†é¢‘æ’­æ”¾å¼±ç½‘æç¤ºå®ç°]]></title>    <link>https://juejin.cn/post/7593550315254218758</link>    <guid>https://juejin.cn/post/7593550315254218758</guid>    <pubDate>2026-01-12T01:55:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593550315254218758" data-draft-id="7593679324248178688" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§†é¢‘æ’­æ”¾å¼±ç½‘æç¤ºå®ç°"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2026-01-12T01:55:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤èŒ—å‰ç«¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3233040624266695"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§†é¢‘æ’­æ”¾å¼±ç½‘æç¤ºå®ç°
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/7198439419173404711/posts" data-v-d326b38e=""><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dafcebf7c91d402abd52f072a32deba8~tplv-k3u1fbpfcp-watermark.image?" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/7198439419173404711/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="å¤èŒ—å‰ç«¯å›¢é˜Ÿ" class="title" data-v-d326b38e="">å¤èŒ—å‰ç«¯å›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2026-01-12T01:55:48.000Z" title="Mon Jan 12 2026 01:55:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2026-01-12
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                0
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»1åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              @å¤èŒ—ç§‘æŠ€
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…ï¼šé™ˆç››é–</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯</h2>
<p>ä¸šåŠ¡ç¾¤é‡Œé¢ç»å¸¸åé¦ˆï¼Œè§†é¢‘æ’­æ”¾å¡é¡¿ï¼Œè§†é¢‘æ’­æ”¾æ€»æ˜¯åœç•™åœ¨æŸä¸€æ—¶åˆ»å°±æ’­æ”¾ä¸äº†äº†ã€‚åé¢ç»è¿‡æ’æŸ¥ï¼Œå‘ç°è¿™æ˜¯å› ä¸ºå¼±ç½‘å¯¼è‡´çš„ã€‚ç„¶è€Œï¼Œç”¨æˆ·æ•°é‡ä¼—å¤šï¼Œéš”ä¸‰å·®äº”æ€»æœ‰äººåœ¨ç¾¤é‡Œåé¦ˆï¼Œæœ‰æ—¶é—®é¢˜ä¸€æ—¶åŠä¼šå¥½ä¸äº†ï¼Œç”¨æˆ·å°±ä¼šæ€€ç–‘ä¸æ˜¯ç½‘ç»œï¼Œè€Œæ˜¯æˆ‘ä»¬çš„ç³»ç»Ÿé—®é¢˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½åœ¨å¼±ç½‘çš„æ—¶å€™å±•ç¤ºæç¤ºï¼Œè¿™æ ·ç”¨æˆ·ä½“éªŒä¼šæ›´å‹å¥½ï¼ŒåŒæ—¶ä¹Ÿèƒ½å‡å°‘ä¸€å®šçš„å®¢è¯‰ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç°çŠ¶åˆ†æ</h2>
<p>æˆ‘ä»¬ä½¿ç”¨çš„æ’­æ”¾å™¨æ˜¯chimee(<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.chimee.org%2Findex.html" target="_blank" title="https://www.chimee.org/index.html" ref="nofollow noopener noreferrer">www.chimee.org/index.html</a>)ã€‚é—æ†¾çš„æ˜¯ï¼Œchimeeå¹¶æ²¡æœ‰è§†é¢‘æ’­æ”¾å¡é¡¿è‡ªåŠ¨å±•ç¤ºloadingçš„åŠŸèƒ½ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶æ’ä»¶èƒ½åŠ›ï¼Œæ¥ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰video-loadingçš„æ’ä»¶ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€æ–¹æ¡ˆè®¾è®¡</h2>
<h3 data-id="heading-3">ä½¿ç”¨NetworkInformation</h3>
<p>å¸¸è§çš„æ–¹æ³•å°±æ˜¯æˆ‘ä»¬é€šè¿‡è®¾å®šä¸€ä¸ªæ ‡å‡†ï¼Œç„¶åæ£€æµ‹ç”¨æˆ·è®¾å¤‡çš„ç½‘ç»œé€Ÿåº¦ï¼Œåœ¨åˆ°è¾¾ä¸€å®šé˜ˆå€¼æ—¶å±•ç¤ºå¼±ç½‘æç¤ºã€‚è¿™é‡Œéœ€è¦ç¡®å®šä¸€ä¸ªé‡è¦çš„ç‚¹ï¼šä»€ä¹ˆæƒ…å†µä¸‹æ‰ç®—å¼±ç½‘ï¼Ÿ</p>
<p>æˆ‘ä»¬çš„åº”ç”¨æ˜¯h5ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨windowå¯¹è±¡ä¸­çš„NetworkInformation(<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FNetworkInformation" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/NetworkInformation" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a>)ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æµè§ˆå™¨çš„debugå·¥å…·ï¼Œæ‰“å°window.naviagtor.connectionï¼Œè¿™ä¸ªå¯¹è±¡å†…éƒ¨å°±å­˜å‚¨ç€ç½‘ç»œä¿¡æ¯ï¼š</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b3afc57fe0a4bbdb5f5965e68307e8e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" alt="" loading="lazy"/></p>
<p>å…¶ä¸­å„ä¸ªå±æ€§å«ä¹‰å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>





































<table><thead><tr><th>å±æ€§</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>downlink</td><td>è¿”å›ä»¥å…†æ¯”ç‰¹æ¯ç§’ä¸ºå•ä½çš„æœ‰æ•ˆå¸¦å®½ä¼°è®¡ï¼Œå››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„ 25 åƒæ¯”ç‰¹æ¯ç§’çš„å€æ•°ã€‚</td></tr><tr><td>downlinkMax</td><td>è¿”å›åº•å±‚è¿æ¥æŠ€æœ¯çš„æœ€å¤§ä¸‹è¡Œé€Ÿåº¦ï¼Œä»¥å…†æ¯”ç‰¹æ¯ç§’ï¼ˆMbpsï¼‰ä¸ºå•ä½ã€‚</td></tr><tr><td>effectiveType</td><td>è¿”å›è¿æ¥çš„æœ‰æ•ˆç±»å‹ï¼ˆæ„æ€æ˜¯â€œslow-2gâ€ã€â€œ2gâ€ã€â€œ3gâ€æˆ–â€œ4gâ€ä¸­çš„ä¸€ä¸ªï¼‰ã€‚æ­¤å€¼æ˜¯ä½¿ç”¨æœ€è¿‘è§‚å¯Ÿåˆ°çš„å¾€è¿”æ—¶é—´å’Œä¸‹è¡Œé“¾è·¯å€¼çš„ç»„åˆæ¥ç¡®å®šçš„ã€‚</td></tr><tr><td>rtt</td><td>è¿”å›å½“å‰è¿æ¥çš„æœ‰æ•ˆå¾€è¿”æ—¶é—´ä¼°è®¡ï¼Œå››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„ 25 æ¯«ç§’çš„å€æ•°ã€‚</td></tr><tr><td>saveData</td><td>å¦‚æœç”¨æˆ·åœ¨ç”¨æˆ·ä»£ç†ä¸Šè®¾ç½®äº†å‡å°‘æ•°æ®ä½¿ç”¨çš„é€‰é¡¹ï¼Œåˆ™è¿”å› trueã€‚</td></tr><tr><td>type</td><td>è¿”å›è®¾å¤‡ç”¨äºç½‘ç»œé€šä¿¡çš„è¿æ¥ç±»å‹ã€‚å®ƒä¼šæ˜¯ä»¥ä¸‹å€¼ä¹‹ä¸€ï¼š<br/><strong>bluetooth</strong> <br/><strong>cellular</strong> <br/> <strong>ethernet</strong><br/><strong>none</strong><br/><strong>wifi</strong><br/><strong>wimax</strong><br/><strong>other</strong><br/><strong>unknown</strong></td></tr><tr><td>onchange</td><td>æ¥å£çš„ <strong>change</strong> äº‹ä»¶åœ¨ç½‘ç»œè¿æ¥ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶è¢«è§¦å‘ï¼Œå¹¶ä¸”è¯¥äº‹ä»¶ç”± NetworkInformation(<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FNetworkInformation" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/NetworkInformation" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a>) å¯¹è±¡æ¥æ”¶ã€‚</td></tr></tbody></table>
<p>å…¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡effectiveTypeåˆ¤æ–­å½“å‰ç½‘ç»œçš„å¤§ä½“æƒ…å†µï¼Œå¹¶ä¸”å¯ä»¥æ‹¿åˆ°ä¸€ä¸ªé¢„ä¼°çš„ç½‘ç»œå¸¦å®½(downlink)ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬onchangeäº‹ä»¶ï¼Œåœ¨ç½‘ç»œå˜å·®çš„æ—¶å€™ï¼Œå±•ç¤ºå¯¹åº”çš„å¼±ç½‘æç¤ºã€‚</p>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„ä¼˜ç‚¹æ˜¯ï¼š</p>
<ul>
<li><strong>æµè§ˆå™¨ç¯å¢ƒåŸç”Ÿæ”¯æŒ</strong></li>
<li><strong>å®ç°ç›¸å¯¹ç®€å•</strong></li>
</ul>
<p>ä½†ç¼ºç‚¹å´ååˆ†æ˜æ˜¾ï¼š</p>
<ul>
<li><strong>ç½‘ç»œçŠ¶æ€å˜åŒ–éå®æ—¶</strong></li>
</ul>
<p>effectiveTypeçš„å˜åŒ–å¯èƒ½æ˜¯åˆ†é’Ÿçº§åˆ«çš„ï¼Œå¯¹äºçŸ­æš‚çš„ç½‘ç»œæ³¢åŠ¨ï¼ŒçŠ¶æ€æ²¡åŠæ³•åšæ›´ç²¾ç»†çš„æŠŠæ§</p>
<ul>
<li><strong>å­˜åœ¨å…¼å®¹æ€§é—®é¢˜</strong></li>
</ul>
<p>å¯¹äºä¸åŒä¸€äº›ä¸»æµæµè§ˆå™¨ä¸æ”¯æŒï¼Œä¾‹å¦‚Firefoxã€Safariç­‰</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d189efd937c74d1eb2f31d0b58c0b21a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" alt="" loading="lazy"/></p>
<ul>
<li><strong>ä¸åŒè®¾å¤‡é—´å­˜åœ¨å·®å¼‚</strong></li>
</ul>
<p>ä¸åŒçš„è®¾å¤‡å’Œæµè§ˆå™¨ï¼Œç”±äºå…¶å·®å¼‚ï¼Œåœ¨ä¸åŒçš„ç½‘ç»œæƒ…å†µä¸‹ï¼Œè§†é¢‘çš„æ’­æ”¾æƒ…å†µæ˜¯ä¸ä¸€æ ·çš„ï¼Œå¦‚æœæˆ‘ä»¬å›ºå®šä¸€ä¸ªæ ‡å‡†ï¼Œå¯èƒ½ä¼šå¯¼è‡´åœ¨ä¸åŒè®¾å¤‡ä¸‹ï¼ŒåŒä¸€ä¸ªç½‘ç»œé€Ÿåº¦ï¼Œæœ‰äººæ˜æ˜æ­£å¸¸æ’­æ”¾è§†é¢‘ï¼Œä½†æ˜¯å´æç¤ºç½‘ç»œå¼‚å¸¸ï¼Œè¿™æ ·ç”¨æˆ·ä¼šæ„Ÿåˆ°ç–‘æƒ‘ã€‚</p>
<p>é‚£æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢ï¼Ÿ</p>
<h3 data-id="heading-4">ç›‘å¬Videoå…ƒç´ äº‹ä»¶</h3>
<p>chimeeåº•å±‚ä¹Ÿæ˜¯åœ¨html videoä¸Šè¿›è¡Œçš„äºŒæ¬¡å°è£…ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œæ‹¿åˆ°å¯¹åº”çš„videoå…ƒç´ èŠ‚ç‚¹ã€‚è€Œåœ¨videoæ ‡ç­¾ä¸­ï¼Œå­˜åœ¨è¿™æ ·ä¸¤ä¸ªäº‹ä»¶ï¼šwaitingå’Œcanplayã€‚</p>
<p>å…¶äº‹ä»¶æè¿°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/27bbb9b9011549c5a00873c9814703f4~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" alt="" loading="lazy"/></p>
<p>å½“è§†é¢‘æ’­æ”¾å¡é¡¿æ—¶ï¼Œä¼šè§¦å‘waitingäº‹ä»¶ï¼›è€Œå½“è§†é¢‘æ’­æ”¾æ¢å¤æ­£å¸¸æ—¶ï¼Œä¼šè§¦å‘canplayäº‹ä»¶ã€‚åªè¦ç›‘å¬è¿™ä¸¤ä¸ªäº‹ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å¯¹åº”çš„åŠŸèƒ½äº†ã€‚</p>
<h2 data-id="heading-5">å››ã€åŠŸèƒ½æ‹“å±•</h2>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œç°åœ¨å¤§å¤šæ•°ç½‘ç«™çš„è§†é¢‘åœ¨æç¤ºå¼±ç½‘çš„æ—¶å€™ï¼Œéƒ½ä¼šå±•ç¤ºå½“å‰è®¾å¤‡çš„ç½‘ç»œé€Ÿåº¦æ˜¯å¤šå°‘ã€‚å› æ­¤æˆ‘ä»¬ä¹Ÿå¸Œæœ›åœ¨å±•ç¤ºå¯¹åº”çš„ä¿¡æ¯ã€‚é‚£ä¹ˆæ€ä¹ˆå®ç°ç½‘ç»œé€Ÿåº¦çš„æ£€æµ‹å‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è·å–ä¸€å¼ å›ºå®šå¤§å°çš„å›¾ç‰‡èµ„æº(ä¸ä¸€å®šæ˜¯å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«çš„ç±»å‹çš„èµ„æºï¼‰ï¼Œå¹¶ç»Ÿè®¡è¯·æ±‚è¯¥èµ„æºçš„è¯·æ±‚é€Ÿåº¦ï¼Œä»è€Œè®¡ç®—å½“å‰ç½‘ç»œçš„å¸¦å®½æ˜¯å¤šå°‘ã€‚å½“ç„¶ï¼Œå›¾ç‰‡å¤§å°è¦å°½å¯èƒ½å°ä¸€ç‚¹ï¼Œä¸€æ˜¯ä¸ºäº†èŠ‚çœç”¨æˆ·æµé‡ï¼ŒäºŒæ˜¯ä¸ºäº†é¿å…åœ¨ç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹ï¼Œå›¾ç‰‡è¯·æ±‚å¤ªæ…¢å¯¼è‡´ä¸€ç›´è®¡ç®—ä¸å‡ºæ¥ã€‚</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">funtion <span class="hljs-title function_">calculateSpeed</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å›¾ç‰‡å¤§å°772Byte</span>
  <span class="hljs-keyword">const</span> fileSize = <span class="hljs-number">772</span>;
  <span class="hljs-comment">// æ‹¼æ¥æ—¶é—´æˆ³ï¼Œé¿å…ç¼“å­˜</span>
  <span class="hljs-keyword">const</span> imgUrl = <span class="hljs-string">`https://xxx.png?timestamp=<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()}</span>`</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> start = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> end = <span class="hljs-number">1000</span>;
    <span class="hljs-keyword">let</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'img'</span>);
    start = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();
    img.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
        end = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();
        <span class="hljs-comment">// è®¡ç®—å‡ºæ¥çš„å•ä½ä¸º B/s</span>
        <span class="hljs-keyword">const</span> speed = fileSize / (end &gt; start ? end - start : <span class="hljs-number">1000</span>) * <span class="hljs-number">1000</span>;
        <span class="hljs-title function_">resolve</span>(speed);
    }
    img.<span class="hljs-property">src</span> = imgUrl;
  }).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> { <span class="hljs-keyword">throw</span> err });
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">translateUnit</span>(<span class="hljs-params">speed</span>) {
  <span class="hljs-keyword">if</span>(speed === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">'0.00 B/s'</span>;
  <span class="hljs-keyword">if</span>(speed &gt; <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${(speed / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>).toFixed(<span class="hljs-number">2</span>)}</span> MB/s`</span>;
  <span class="hljs-keyword">if</span>(speed &gt; <span class="hljs-number">1024</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${(speed / <span class="hljs-number">1024</span>).toFixed(<span class="hljs-number">2</span>)}</span> KB/s`</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${speed.toFixed(<span class="hljs-number">2</span>)}</span> B/s`</span>;
}
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡setIntervalæ¥è½®è¯¢è°ƒç”¨è¯¥å‡½æ•°ï¼Œä»è€Œå®æ—¶å±•ç¤ºå½“å‰ç½‘ç»œæƒ…å†µã€‚ç³»ç»Ÿæµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eec9f120b75446a7a3d69a1a7ee950c9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" alt="ç”»æ¿" loading="lazy"/></p>
<h2 data-id="heading-6">äº”ã€æ€»ç»“</h2>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡Chromeæµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­çš„Networkä¸­çš„ç½‘ç»œé…ç½®æ¥æ¨¡æ‹Ÿå¼±ç½‘æƒ…å†µ
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f1e6c0e3d8de4244a9d68015e5f6f8f5~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" alt="" loading="lazy"/>
å…·ä½“æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76b4b8cc3a8d41dcb9711593605e6287~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp" alt="" loading="lazy"/></p>
<p>æˆåŠŸå®ç°è§†é¢‘å¼±ç½‘æç¤ºï¼Œå®Œç»“æ’’èŠ±ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªçº¯å‰ç«¯çš„ç½‘ç«™é›†åˆç®¡ç†å·¥å…·]]></title>    <link>https://juejin.cn/post/7594270467029581851</link>    <guid>https://juejin.cn/post/7594270467029581851</guid>    <pubDate>2026-01-12T07:46:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594270467029581851" data-draft-id="7594242987598004251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªçº¯å‰ç«¯çš„ç½‘ç«™é›†åˆç®¡ç†å·¥å…·"/> <meta itemprop="keywords" content="å‰ç«¯,Chrome,Vue.js"/> <meta itemprop="datePublished" content="2026-01-12T07:46:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Younglina"/> <meta itemprop="url" content="https://juejin.cn/user/817692381290190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªçº¯å‰ç«¯çš„ç½‘ç«™é›†åˆç®¡ç†å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692381290190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Younglina
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T07:46:13.000Z" title="Mon Jan 12 2026 07:46:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="zenburn">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#3f3f3f;color:#dcdcdc}.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#e3ceab}.hljs-template-tag{color:#dcdcdc}.hljs-number{color:#8cd0d3}.hljs-attribute,.hljs-template-variable,.hljs-variable{color:#efdcbc}.hljs-literal{color:#efefaf}.hljs-subst{color:#8f8f8f}.hljs-name,.hljs-section,.hljs-selector-class,.hljs-selector-id,.hljs-title,.hljs-type{color:#efef8f}.hljs-bullet,.hljs-link,.hljs-symbol{color:#dca3a3}.hljs-built_in,.hljs-builtin-name,.hljs-deletion,.hljs-string{color:#cc9393}.hljs-addition,.hljs-comment,.hljs-meta,.hljs-quote{color:#7f9f7f}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœ¬åœ°åŒ–ç½‘ç«™ç®¡ç†å¹³å°</h2>
<p>ä¸€ä¸ªçº¯å‰ç«¯çš„ç½‘ç«™é›†åˆç®¡ç†å·¥å…·ï¼Œæ”¯æŒæœ¬åœ°æ•°æ®å­˜å‚¨ã€å®Œæ•´çš„CRUDæ“ä½œï¼Œå¯ä½œä¸º Chrome æ‰©å±•ä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9c18800457946189a3236c59b7d7b00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWW91bmdsaW5h:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768808773&amp;x-signature=6uZZbAwlE0rjo9086FZW7rjufkQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42bb0e6927f2470384848e25cc36ba7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWW91bmdsaW5h:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768808773&amp;x-signature=4%2B6tgTXm8rJPC%2FImuj5T2BoIH8s%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66fe6cb2f47242d4911ac6efa4a8e371~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWW91bmdsaW5h:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768808773&amp;x-signature=qnFrlCHqlc306blBkW496vwSZhY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b4d919554a642c7b57c331aba0401bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWW91bmdsaW5h:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768808773&amp;x-signature=d7iooAiOUV39SxIPzVeU0zGtY6M%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h3>
<h4 data-id="heading-2">æ ¸å¿ƒåŠŸèƒ½</h4>
<ul>
<li>âœ… <strong>ç½‘ç«™ç®¡ç†</strong>ï¼šå®Œæ•´çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½</li>
<li>âœ… <strong>å›¾ç‰‡ä¸Šä¼ </strong>ï¼šæ”¯æŒä¸Šä¼ ç½‘ç«™å›¾æ ‡ï¼ˆå­˜å‚¨åˆ°IndexedDBï¼‰</li>
<li>âœ… <strong>APIKeysç®¡ç†</strong>ï¼šæ”¯æŒå¤šä¸ªAPIKeysï¼Œè„±æ•æ˜¾ç¤ºï¼Œä¸€é”®å¤åˆ¶</li>
<li>âœ… <strong>åˆ†ç±»ç³»ç»Ÿ</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰åˆ†ç±»ï¼ˆå¸¦å›¾æ ‡é€‰æ‹©ï¼‰</li>
<li>âœ… <strong>æ ‡ç­¾ç³»ç»Ÿ</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰æ ‡ç­¾ï¼Œå¤šç»´åº¦ç­›é€‰</li>
<li>âœ… <strong>æœç´¢åŠŸèƒ½</strong>ï¼šæ”¯æŒæŒ‰ç½‘ç«™åç§°ã€æè¿°ã€URLæœç´¢</li>
<li>âœ… <strong>æœ¬åœ°å­˜å‚¨</strong>ï¼šæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨IndexedDBä¸­ï¼Œæ— éœ€æœåŠ¡å™¨</li>
<li>âœ… <strong>å¯¼å…¥å¯¼å‡º</strong>ï¼šæ”¯æŒ JSON æ ¼å¼çš„æ•°æ®å¯¼å…¥å¯¼å‡º</li>
</ul>
<h3 data-id="heading-3">æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>æ¡†æ¶</strong>ï¼šVue 3 (Composition API + <code>&lt;script setup&gt;</code>)</li>
<li><strong>è¯­è¨€</strong>ï¼šTypeScriptï¼ˆå®½æ¾æ¨¡å¼ï¼‰</li>
<li><strong>æ„å»ºå·¥å…·</strong>ï¼šVite</li>
<li><strong>æ ·å¼</strong>ï¼šTailwind CSS</li>
<li><strong>æ•°æ®åº“</strong>ï¼šDexie.js (IndexedDBå°è£…)</li>
<li><strong>å›¾æ ‡</strong>ï¼šMaterial Design Icons</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šPinia</li>
</ul>
<h3 data-id="heading-4">å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-5">å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">npm install
</code></pre>
<h4 data-id="heading-6">å¼€å‘æ¨¡å¼</h4>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a></p>
<h4 data-id="heading-7">æ„å»º Chrome æ‰©å±•</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Windows</span>
pack.bat

<span class="hljs-comment"># Linux/Mac</span>
./pack.sh
</code></pre>
<p>æ„å»ºå®Œæˆåï¼Œ<code>dist</code> ç›®å½•åŒ…å«å®Œæ•´çš„ Chrome æ‰©å±•æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-8">å®‰è£… Chrome æ‰©å±•</h3>
<ol>
<li>æ‰“å¼€ Chromeï¼Œè®¿é—® <code>chrome://extensions/</code></li>
<li>å¼€å¯å³ä¸Šè§’çš„ <strong>å¼€å‘è€…æ¨¡å¼</strong></li>
<li>ç‚¹å‡» <strong>åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº</strong></li>
<li>é€‰æ‹©é¡¹ç›®çš„ <code>dist</code> æ–‡ä»¶å¤¹</li>
</ol>
<p>ç‚¹å‡»æ‰©å±•å›¾æ ‡å³å¯æ‰“å¼€å·¥å…·é›†ã€‚</p>
<h3 data-id="heading-9">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-csharp" lang="csharp">links/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          <span class="hljs-meta"># ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ layouts/        <span class="hljs-meta"># å¸ƒå±€ç»„ä»¶</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Sidebar.vue
â”‚   â”‚   â”‚   â””â”€â”€ MainContent.vue
â”‚   â”‚   â”œâ”€â”€ website/       <span class="hljs-meta"># ç½‘ç«™ç›¸å…³ç»„ä»¶</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ WebsiteCard.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ WebsiteDetailDrawer.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ WebsiteForm.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ ImageUploader.vue
â”‚   â”‚   â”‚   â””â”€â”€ ApiKeyInput.vue
â”‚   â”‚   â”œâ”€â”€ filter/        <span class="hljs-meta"># ç­›é€‰ç»„ä»¶</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchBar.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ CategoryFilter.vue
â”‚   â”‚   â”‚   â””â”€â”€ TagFilter.vue
â”‚   â”‚   â””â”€â”€ common/        <span class="hljs-meta"># é€šç”¨ç»„ä»¶</span>
â”‚   â”‚       â”œâ”€â”€ ThemeSwitcher.vue
â”‚   â”‚       â”œâ”€â”€ CategoryDialog.vue
â”‚   â”‚       â””â”€â”€ TagDialog.vue
â”‚   â”œâ”€â”€ composables/        <span class="hljs-meta"># ç»„åˆå¼å‡½æ•°</span>
â”‚   â”‚   â”œâ”€â”€ useDexie.ts
â”‚   â”‚   â”œâ”€â”€ useWebsites.ts
â”‚   â”‚   â”œâ”€â”€ useCategories.ts
â”‚   â”‚   â”œâ”€â”€ useTags.ts
â”‚   â”‚   â”œâ”€â”€ useImageUpload.ts
â”‚   â”‚   â”œâ”€â”€ useApiKey.ts
â”‚   â”‚   â””â”€â”€ useTheme.ts
â”‚   â”œâ”€â”€ db/                 <span class="hljs-meta"># æ•°æ®åº“</span>
â”‚   â”‚   â”œâ”€â”€ index.ts        <span class="hljs-meta"># Dexieå®ä¾‹</span>
â”‚   â”‚   â””â”€â”€ seed.ts         <span class="hljs-meta"># é¢„ç½®æ•°æ®</span>
â”‚   â”œâ”€â”€ stores/             <span class="hljs-meta"># PiniaçŠ¶æ€ç®¡ç†</span>
â”‚   â”‚   â””â”€â”€ app.ts
â”‚   â”œâ”€â”€ types/              <span class="hljs-meta"># TypeScriptç±»å‹å®šä¹‰</span>
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/              <span class="hljs-meta"># å·¥å…·å‡½æ•°</span>
â”‚   â”‚   â”œâ”€â”€ validators.ts
â”‚   â”‚   â”œâ”€â”€ formatters.ts
â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â””â”€â”€ styles/             <span class="hljs-meta"># æ ·å¼æ–‡ä»¶</span>
â”‚       â”œâ”€â”€ main.css
â”‚       â””â”€â”€ themes/
â”‚           â””â”€â”€ neumorphism.css
â”œâ”€â”€ <span class="hljs-keyword">public</span>/
â”‚   â”œâ”€â”€ background.js       <span class="hljs-meta"># Chrome æ‰©å±• background script</span>
â”‚   â””â”€â”€ tools.png           <span class="hljs-meta"># æ‰©å±•å›¾æ ‡</span>
â”œâ”€â”€ manifest.json           <span class="hljs-meta"># Chrome æ‰©å±•é…ç½®</span>
â”œâ”€â”€ vite.config.js          <span class="hljs-meta"># Vite é…ç½®</span>
â”œâ”€â”€ pack.bat                <span class="hljs-meta"># Windows æ‰“åŒ…è„šæœ¬</span>
â””â”€â”€ pack.sh                 <span class="hljs-meta"># Linux/Mac æ‰“åŒ…è„šæœ¬</span>
</code></pre>
<h3 data-id="heading-10">ä½¿ç”¨è¯´æ˜</h3>
<h4 data-id="heading-11">æ·»åŠ ç½‘ç«™</h4>
<ol>
<li>ç‚¹å‡»å³ä¸Šè§’"æ·»åŠ "ä¸‹æ‹‰èœå•ï¼Œé€‰æ‹©"æ·»åŠ ç½‘ç«™"</li>
<li>å¡«å†™ç½‘ç«™ä¿¡æ¯ï¼š
<ul>
<li>åç§°ï¼ˆå¿…å¡«ï¼‰</li>
<li>URLï¼ˆå¿…å¡«ï¼‰</li>
<li>å›¾æ ‡ï¼ˆæ¨è128-256pxï¼Œ&lt;500KBï¼‰</li>
<li>æè¿°</li>
<li>åˆ†ç±»ï¼ˆå¿…å¡«ï¼‰</li>
<li>æ ‡ç­¾ï¼ˆå¤šé€‰ï¼‰</li>
<li>APIKeysï¼ˆå¯é€‰ï¼Œå¯æ·»åŠ å¤šä¸ªï¼‰</li>
</ul>
</li>
<li>ç‚¹å‡»"æ·»åŠ "ä¿å­˜</li>
</ol>
<h4 data-id="heading-12">ç®¡ç†ç½‘ç«™</h4>
<ul>
<li>ç‚¹å‡»ç½‘ç«™å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…</li>
<li>è¯¦æƒ…ä¸­å¯ä»¥æŸ¥çœ‹APIKeysï¼ˆè„±æ•æ˜¾ç¤ºï¼‰</li>
<li>æ”¯æŒå¤åˆ¶å®Œæ•´APIKey</li>
<li>æ”¯æŒç¼–è¾‘å’Œåˆ é™¤ç½‘ç«™</li>
</ul>
<h4 data-id="heading-13">ç­›é€‰ç½‘ç«™</h4>
<ul>
<li>ä½¿ç”¨å·¦ä¾§åˆ†ç±»å¯¼èˆªç­›é€‰</li>
<li>ä½¿ç”¨æ ‡ç­¾å¤é€‰æ¡†å¤šé€‰ç­›é€‰</li>
<li>ä½¿ç”¨é¡¶éƒ¨æœç´¢æ æœç´¢</li>
</ul>
<h4 data-id="heading-14">å¯¼å…¥å¯¼å‡ºæ•°æ®</h4>
<p>ç‚¹å‡»å³ä¸Šè§’"æ·»åŠ "ä¸‹æ‹‰èœå•ï¼š</p>
<ul>
<li><strong>å¯¼å‡ºæ•°æ®</strong>ï¼šä¸‹è½½å½“å‰æ‰€æœ‰æ•°æ®çš„ JSON æ–‡ä»¶</li>
<li><strong>å¯¼å…¥æ•°æ®</strong>ï¼šé€‰æ‹© JSON æ–‡ä»¶å¯¼å…¥ï¼Œæ”¯æŒåˆå¹¶æˆ–æ›¿æ¢æ¨¡å¼</li>
</ul>
<h3 data-id="heading-15">æ•°æ®å­˜å‚¨</h3>
<p>æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨çš„IndexedDBä¸­ï¼š</p>
<ul>
<li><code>SitesDB</code> æ•°æ®åº“å</li>
<li>åŒ…å«3ä¸ªè¡¨ï¼šwebsites, categories, tags</li>
<li>æ•°æ®åªåœ¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨</li>
</ul>
<h3 data-id="heading-16">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>å›¾ç‰‡å¤§å°</strong>ï¼šå»ºè®®ä¸Šä¼ çš„å›¾æ ‡å°äº500KBï¼Œæ¨è128-256px</li>
<li><strong>APIKeyå®‰å…¨</strong>ï¼šAPIKeyså­˜å‚¨åœ¨æœ¬åœ°IndexedDBä¸­ï¼Œè¯·å¦¥å–„ä¿ç®¡æµè§ˆå™¨æ•°æ®</li>
<li><strong>æ•°æ®å¤‡ä»½</strong>ï¼šå®šæœŸå¯¼å‡ºæ•°æ®ä½œä¸ºå¤‡ä»½</li>
<li><strong>æµè§ˆå™¨å…¼å®¹æ€§</strong>ï¼šæ”¯æŒç°ä»£æµè§ˆå™¨ï¼ˆChrome, Firefox, Safari, Edgeï¼‰</li>
</ol>
<h3 data-id="heading-17">è®¸å¯è¯</h3>
<p>MIT License</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€å‘Šåˆ«Vibe Codingï¼ç”¨Superpowersè®©Claude Codeå†™å‡ºå·¥ç¨‹çº§ä»£ç ï¼Œä¸€æ¬¡é€šè¿‡é›¶æŠ¥é”™ï¼éµå¾ªTDDæœ€ä½³å®è·µï¼æ”¯æŒCodexå’ŒOpenCo]]></title>    <link>https://juejin.cn/post/7593573617648123956</link>    <guid>https://juejin.cn/post/7593573617648123956</guid>    <pubDate>2026-01-12T01:55:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593573617648123956" data-draft-id="7593913760042827785" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€å‘Šåˆ«Vibe Codingï¼ç”¨Superpowersè®©Claude Codeå†™å‡ºå·¥ç¨‹çº§ä»£ç ï¼Œä¸€æ¬¡é€šè¿‡é›¶æŠ¥é”™ï¼éµå¾ªTDDæœ€ä½³å®è·µï¼æ”¯æŒCodexå’ŒOpenCo"/> <meta itemprop="keywords" content="Claude,AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2026-01-12T01:55:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="win4r"/> <meta itemprop="url" content="https://juejin.cn/user/1739869037541555"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€å‘Šåˆ«Vibe Codingï¼ç”¨Superpowersè®©Claude Codeå†™å‡ºå·¥ç¨‹çº§ä»£ç ï¼Œä¸€æ¬¡é€šè¿‡é›¶æŠ¥é”™ï¼éµå¾ªTDDæœ€ä½³å®è·µï¼æ”¯æŒCodexå’ŒOpenCo
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739869037541555/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    win4r
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T01:55:32.000Z" title="Mon Jan 12 2026 01:55:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Superpowers</strong> æ˜¯ä¸€ä¸ªä¸º AI ç¼–ç¨‹ä»£ç†ï¼ˆå¦‚ Claude Codeã€Codexã€OpenCodeï¼‰æ‰“é€ çš„å®Œæ•´è½¯ä»¶å¼€å‘å·¥ä½œæµç³»ç»Ÿã€‚å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼šé€šè¿‡ä¸€å¥—å¯ç»„åˆçš„"æŠ€èƒ½"ï¼ˆSkillsï¼‰å’Œåˆå§‹æŒ‡ä»¤ï¼Œè®© AI ä»£ç†åœ¨ç¼–å†™ä»£ç æ—¶è‡ªåŠ¨éµå¾ªæœ€ä½³å®è·µï¼Œè€Œä¸æ˜¯åƒ"æ²¡æœ‰ç»éªŒçš„åˆçº§å·¥ç¨‹å¸ˆ"é‚£æ ·éšæ„è¡Œäº‹ã€‚</p>
<p>ğŸ”¥ğŸ”¥ğŸ”¥æœ¬ç¯‡ç¬”è®°æ‰€å¯¹åº”çš„è§†é¢‘ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV11urFBrEc4%2F" target="_blank" title="https://www.bilibili.com/video/BV11urFBrEc4/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV11uâ€¦</a></p>
<p>é¡¹ç›®ç”± Jesse Vincentï¼ˆGitHub: obraï¼‰å¼€å‘ï¼Œç›®å‰å·²è·å¾— 16.1k æ˜Ÿæ ‡å’Œ 1.3k åˆ†å‰ï¼Œç¤¾åŒºæ´»è·ƒåº¦å¾ˆé«˜ã€‚</p>
<hr/>
<h3 data-id="heading-0">ğŸš€æ ¸å¿ƒè®¾è®¡å“²å­¦</h3>
<p>é¡¹ç›®å»ºç«‹åœ¨å››ä¸ªæ ¸å¿ƒåŸåˆ™ä¹‹ä¸Šï¼š</p>
<p><strong>æµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰</strong> ï¼šæ°¸è¿œå…ˆå†™æµ‹è¯•ã€‚æ²¡æœ‰çœ‹åˆ°æµ‹è¯•å¤±è´¥ï¼Œå°±ä¸èƒ½ç¡®å®šæµ‹è¯•æ˜¯å¦çœŸæ­£æµ‹è¯•äº†æ­£ç¡®çš„è¡Œä¸ºã€‚</p>
<p><strong>ç³»ç»ŸåŒ–è€Œéä¸´æ—¶åŒ–</strong>ï¼šç”¨æµç¨‹æ›¿ä»£çŒœæµ‹ã€‚æ¯ä¸ªæŠ€èƒ½éƒ½æœ‰æ˜ç¡®çš„å†³ç­–æµç¨‹å›¾ï¼ˆç”¨ DOT/GraphViz è¯­æ³•å®šä¹‰ï¼‰ï¼Œä½œä¸º"å¯æ‰§è¡Œè§„èŒƒ"ã€‚</p>
<p><strong>å¤æ‚åº¦å‰Šå‡</strong>ï¼šä»¥ç®€æ´ä¸ºé¦–è¦ç›®æ ‡ã€‚æŠ€èƒ½ä¸­åå¤å¼ºè°ƒ YAGNIï¼ˆYou Aren't Gonna Need Itï¼‰åŸåˆ™ï¼Œç§¯æåˆ é™¤ä¸å¿…è¦çš„åŠŸèƒ½ã€‚</p>
<p><strong>è¯æ®è€Œéå£°æ˜</strong>ï¼šåœ¨å®£å¸ƒä»»åŠ¡å®Œæˆä¹‹å‰ï¼Œå¿…é¡»éªŒè¯ã€‚çœ‹åˆ°æµ‹è¯•é€šè¿‡ï¼Œçœ‹åˆ°ä»£ç è¿è¡Œï¼Œè€Œä¸æ˜¯"æˆ‘è§‰å¾—åº”è¯¥å¯ä»¥äº†"ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸš€å®Œæ•´å·¥ä½œæµç¨‹</h3>
<p>Superpowers æ„å»ºäº†ä¸€ä¸ªç«¯åˆ°ç«¯çš„å¼€å‘æµç¨‹ï¼š</p>
<p><strong>ç¬¬ä¸€é˜¶æ®µï¼šå¤´è„‘é£æš´ï¼ˆbrainstormingï¼‰</strong> å½“ä½ è¯´"æˆ‘æƒ³åšä¸€ä¸ª X åŠŸèƒ½"æ—¶ï¼ŒAI ä¸ä¼šç›´æ¥å†™ä»£ç ã€‚å®ƒä¼šåƒè‹æ ¼æ‹‰åº•å¼å¯¹è¯ä¸€æ ·ï¼Œä¸€æ¬¡é—®ä¸€ä¸ªé—®é¢˜ï¼Œå¸®ä½ å˜æ¸…çœŸæ­£çš„éœ€æ±‚ã€‚è®¾è®¡æ–¹æ¡ˆåˆ† 200-300 å­—çš„å°èŠ‚å‘ˆç°ï¼Œæ¯èŠ‚éƒ½è¦ä½ ç¡®è®¤"çœ‹èµ·æ¥å¯¹å—"ã€‚</p>
<p><strong>ç¬¬äºŒé˜¶æ®µï¼šå·¥ä½œåŒºéš”ç¦»ï¼ˆusing-git-worktreesï¼‰</strong> è®¾è®¡ç¡®è®¤åï¼ŒAI ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ git åˆ†æ”¯å’Œ worktreeï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒéš”ç¦»ï¼Œä¸æ±¡æŸ“ä¸»åˆ†æ”¯ã€‚</p>
<p><strong>ç¬¬ä¸‰é˜¶æ®µï¼šç¼–å†™è®¡åˆ’ï¼ˆwriting-plansï¼‰</strong> æŠŠè®¾è®¡æ‹†è§£æˆ 2-5 åˆ†é’Ÿçš„å°ä»»åŠ¡ã€‚æ¯ä¸ªä»»åŠ¡éƒ½æœ‰ç²¾ç¡®çš„æ–‡ä»¶è·¯å¾„ã€å®Œæ•´çš„ä»£ç ç‰‡æ®µã€éªŒè¯æ­¥éª¤ã€‚ç›®æ ‡æ˜¯è®©"ä¸€ä¸ªæ²¡æœ‰åˆ¤æ–­åŠ›ã€æ²¡æœ‰é¡¹ç›®èƒŒæ™¯ã€è®¨åŒå†™æµ‹è¯•çš„çƒ­æƒ…åˆçº§å·¥ç¨‹å¸ˆ"ä¹Ÿèƒ½æ‰§è¡Œã€‚</p>
<p><strong>ç¬¬å››é˜¶æ®µï¼šå­ä»£ç†é©±åŠ¨å¼€å‘ï¼ˆsubagent-driven-developmentï¼‰</strong> è¿™æ˜¯ v4.0 çš„é‡å¤§åˆ›æ–°ã€‚ä¸»ä»£ç†ä¸ºæ¯ä¸ªä»»åŠ¡æ´¾é£ä¸€ä¸ª"æ–°é²œ"çš„å­ä»£ç†ï¼ˆæ²¡æœ‰ä¸Šä¸‹æ–‡æ±¡æŸ“ï¼‰ï¼Œå®ç°ä»»åŠ¡åè¿›è¡Œä¸¤é˜¶æ®µå®¡æŸ¥ï¼š</p>
<ul>
<li>è§„æ ¼ç¬¦åˆæ€§å®¡æŸ¥ï¼šä»£ç æ˜¯å¦å®Œå…¨ç¬¦åˆéœ€æ±‚è§„æ ¼ï¼Ÿæ˜¯å¦å¤šåšäº†ï¼Ÿå°‘åšäº†ï¼Ÿ</li>
<li>ä»£ç è´¨é‡å®¡æŸ¥ï¼šåªæœ‰è§„æ ¼å®¡æŸ¥é€šè¿‡åæ‰è¿›è¡Œã€‚æ£€æŸ¥ä»£ç æ˜¯å¦å¹²å‡€ã€æµ‹è¯•è¦†ç›–æ˜¯å¦è¶³å¤Ÿ</li>
</ul>
<p>å®¡æŸ¥æ˜¯å¾ªç¯çš„ï¼šå‘ç°é—®é¢˜â†’ä¿®å¤â†’å†å®¡æŸ¥ï¼Œç›´åˆ°é€šè¿‡ã€‚</p>
<p><strong>ç¬¬äº”é˜¶æ®µï¼šæ”¶å°¾ï¼ˆfinishing-a-development-branchï¼‰</strong> æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼ŒéªŒè¯æµ‹è¯•ã€å‘ˆç°é€‰é¡¹ï¼ˆåˆå¹¶/åˆ›å»º PR/ä¿ç•™/ä¸¢å¼ƒï¼‰ï¼Œæ¸…ç† worktreeã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸš€æŠ€èƒ½åº“è¯¦è§£</h3>
<p>é¡¹ç›®åŒ…å« 14 ä¸ªæ ¸å¿ƒæŠ€èƒ½ï¼Œåˆ†ä¸ºå‡ å¤§ç±»åˆ«ï¼š</p>
<p><strong>æµ‹è¯•ç±»</strong></p>
<ul>
<li><code>test-driven-development</code>ï¼šå¼ºåˆ¶æ‰§è¡Œ RED-GREEN-REFACTOR å¾ªç¯ã€‚æ ¸å¿ƒè§„åˆ™æ˜¯"å…ˆå†™æµ‹è¯•å¤±è´¥çš„ä»£ç ï¼Ÿåˆ æ‰ï¼Œé‡æ–°æ¥"ï¼ŒåŒ…å«è¯¦ç»†çš„åæ¨¡å¼å‚è€ƒ</li>
</ul>
<p><strong>è°ƒè¯•ç±»</strong></p>
<ul>
<li><code>systematic-debugging</code>ï¼šå››é˜¶æ®µæ ¹å› å®šä½æµç¨‹ï¼Œæ•´åˆäº† root-cause-tracingï¼ˆé€†å‘è¿½è¸ªè°ƒç”¨æ ˆï¼‰ã€defense-in-depthï¼ˆå¤šå±‚éªŒè¯ï¼‰ã€condition-based-waitingï¼ˆåŸºäºæ¡ä»¶çš„ç­‰å¾…æ›¿ä»£ä»»æ„è¶…æ—¶ï¼‰ç­‰æŠ€æœ¯</li>
<li><code>verification-before-completion</code>ï¼šç¡®ä¿é—®é¢˜çœŸæ­£è¢«ä¿®å¤</li>
</ul>
<p><strong>åä½œç±»</strong></p>
<ul>
<li><code>brainstorming</code>ï¼šè‹æ ¼æ‹‰åº•å¼è®¾è®¡æç‚¼</li>
<li><code>writing-plans</code>ï¼šè¯¦ç»†å®ç°è®¡åˆ’</li>
<li><code>executing-plans</code>ï¼šæ‰¹é‡æ‰§è¡Œä¸æ£€æŸ¥ç‚¹</li>
<li><code>dispatching-parallel-agents</code>ï¼šå¹¶å‘å­ä»£ç†å·¥ä½œæµ</li>
<li><code>requesting-code-review</code> / <code>receiving-code-review</code>ï¼šä»£ç å®¡æŸ¥çš„è¯·æ±‚ä¸å“åº”</li>
<li><code>using-git-worktrees</code>ï¼šå¹¶è¡Œå¼€å‘åˆ†æ”¯</li>
<li><code>finishing-a-development-branch</code>ï¼šåˆå¹¶/PR å†³ç­–å·¥ä½œæµ</li>
<li><code>subagent-driven-development</code>ï¼šä¸¤é˜¶æ®µå®¡æŸ¥çš„å¿«é€Ÿè¿­ä»£</li>
</ul>
<p><strong>å…ƒæŠ€èƒ½</strong></p>
<ul>
<li><code>using-superpowers</code>ï¼šæŠ€èƒ½ç³»ç»Ÿå…¥é—¨</li>
<li><code>writing-skills</code>ï¼šå¦‚ä½•åˆ›å»ºæ–°æŠ€èƒ½ï¼ˆåŒ…å«æµ‹è¯•æ–¹æ³•è®ºï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-3">ğŸš€æŠ€æœ¯æ¶æ„äº®ç‚¹</h3>
<p><strong>æµç¨‹å›¾ä½œä¸ºå¯æ‰§è¡Œè§„èŒƒ</strong>ï¼šæŠ€èƒ½æ–‡ä»¶ä½¿ç”¨ DOT è¯­æ³•å®šä¹‰å†³ç­–æµç¨‹å›¾ï¼Œè¿™ä¸æ˜¯è£…é¥°æ€§çš„ï¼Œè€Œæ˜¯ AI å¿…é¡»éµå¾ªçš„æƒå¨å®šä¹‰ã€‚è¿™è§£å†³äº†"æè¿°è¦†ç›–æµç¨‹å›¾"çš„é™·é˜±ã€‚</p>
<p><strong>æè¿°é™·é˜±çš„å‘ç°ä¸è§£å†³</strong>ï¼šé¡¹ç›®å›¢é˜Ÿå‘ç°ï¼Œå¦‚æœæŠ€èƒ½æè¿°ä¸­åŒ…å«å·¥ä½œæµæ‘˜è¦ï¼ŒAI ä¼šè·Ÿéšç®€çŸ­æè¿°è€Œå¿½ç•¥è¯¦ç»†æµç¨‹å›¾ã€‚è§£å†³æ–¹æ¡ˆæ˜¯æè¿°åªå†™è§¦å‘æ¡ä»¶ï¼ˆ"Use when X"ï¼‰ï¼Œä¸å†™æµç¨‹ç»†èŠ‚ã€‚</p>
<p><strong>ååˆç†åŒ–è®¾è®¡</strong>ï¼š<code>using-superpowers</code> æŠ€èƒ½ä¸­ä¸“é—¨åˆ—å‡ºäº† AI å¸¸è§çš„é€ƒé¿å€Ÿå£åŠå…¶åé©³ï¼Œä¾‹å¦‚"æˆ‘å·²ç»æ‰‹åŠ¨æµ‹è¯•è¿‡äº†"â†’é”™è¯¯ï¼Œä¸´æ—¶æµ‹è¯•ä¸ç­‰äºç³»ç»ŸåŒ–æµ‹è¯•ã€‚</p>
<p><strong>æµ‹è¯•åŸºç¡€è®¾æ–½</strong>ï¼šé¡¹ç›®åŒ…å«ä¸‰å¥—æµ‹è¯•æ¡†æ¶ï¼š</p>
<ul>
<li>æŠ€èƒ½è§¦å‘æµ‹è¯•ï¼šéªŒè¯æŠ€èƒ½èƒ½å¦ä»"æœ´ç´ "æç¤ºè§¦å‘</li>
<li>Claude Code é›†æˆæµ‹è¯•ï¼šä½¿ç”¨ <code>claude -p</code> è¿›è¡Œæ— å¤´æµ‹è¯•</li>
<li>å­ä»£ç†å·¥ä½œæµç«¯åˆ°ç«¯æµ‹è¯•ï¼šåŒ…å«å®Œæ•´çš„ Go å’Œ Svelte æµ‹è¯•é¡¹ç›®</li>
</ul>
<hr/>
<h3 data-id="heading-4">ğŸš€è·¨å¹³å°æ”¯æŒ</h3>
<p><strong>Claude Code</strong>ï¼šé€šè¿‡æ’ä»¶å¸‚åœºå®‰è£…ï¼Œæœ‰åŸç”Ÿçš„ Skill å·¥å…·æ”¯æŒ</p>
<p><strong>Codex/OpenCode</strong>ï¼šé€šè¿‡è·å–è¿œç¨‹æŒ‡ä»¤æ–‡ä»¶å¼•å¯¼å®‰è£…ï¼Œå…±äº«æ ¸å¿ƒæ¨¡å— <code>lib/skills-core.js</code></p>
<hr/>
<h3 data-id="heading-5">ğŸš€ç‰ˆæœ¬æ¼”è¿›äº®ç‚¹</h3>
<p><strong>v4.0.0</strong> çš„æ ¸å¿ƒåˆ›æ–°æ˜¯ä¸¤é˜¶æ®µä»£ç å®¡æŸ¥å’Œè°ƒè¯•æŠ€æœ¯æ•´åˆã€‚v3.0 è¿ç§»åˆ° Anthropic å®˜æ–¹æŠ€èƒ½ç³»ç»Ÿã€‚v2.0 å®ç°æŠ€èƒ½ä»“åº“åˆ†ç¦»ï¼Œæ”¯æŒç¤¾åŒºè´¡çŒ®ã€‚</p>
<hr/>
<h3 data-id="heading-6">ğŸš€æ€»ç»“</h3>
<p>Superpowers æœ¬è´¨ä¸Šæ˜¯åœ¨å›ç­”ä¸€ä¸ªé—®é¢˜ï¼š<strong>å¦‚ä½•è®© AI ä»£ç†åƒæœ‰ç»éªŒçš„å·¥ç¨‹å¸ˆä¸€æ ·å·¥ä½œï¼Œè€Œä¸æ˜¯åƒ"ä¼šå†™ä»£ç ä½†ä¸æ‡‚å·¥ç¨‹"çš„å®ä¹ ç”Ÿï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼šæŠŠæœ€ä½³å®è·µç¼–ç æˆå¯æ‰§è¡Œçš„ã€ä¸å¯é€ƒé¿çš„å·¥ä½œæµã€‚ç”¨æµç¨‹å›¾å®šä¹‰å†³ç­–ç‚¹ï¼Œç”¨æµ‹è¯•éªŒè¯è¡Œä¸ºï¼Œç”¨å­ä»£ç†å®ç°å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œç”¨ä¸¤é˜¶æ®µå®¡æŸ¥ç¡®ä¿è´¨é‡ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®å¯¹äºæƒ³è¦æå‡ AI ç¼–ç¨‹æ•ˆç‡å’Œè´¨é‡çš„å¼€å‘è€…æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å­¦ä¹ å’Œä½¿ç”¨çš„å·¥å…·ã€‚</p>
<h3 data-id="heading-7">ğŸš€Claude Codeä½¿ç”¨æ–¹å¼</h3>
<p><strong>âœ…ç¬¬ä¸€æ­¥ï¼šå®‰è£… Superpowers</strong></p>
<p>æ‰“å¼€ Claude Codeï¼Œè¾“å…¥ä¸¤æ¡å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/plugin marketplace add obra/superpowers-marketplace
</code></pre>
<p><strong>éªŒè¯å®‰è£…æˆåŠŸ</strong></p>
<p>è¾“å…¥ <code>/help</code>ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š</p>
<ul>
<li><code>/superpowers:brainstorm</code> - å¤´è„‘é£æš´</li>
<li><code>/superpowers:write-plan</code> - å†™è®¡åˆ’</li>
<li><code>/superpowers:execute-plan</code> - æ‰§è¡Œè®¡åˆ’</li>
</ul>
<p><strong>âœ…ç¬¬äºŒæ­¥ï¼šå¯åŠ¨å¤´è„‘é£æš´</strong></p>
<p>ä½ æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œä½†å¯èƒ½è¿˜å¾ˆæ¨¡ç³Šã€‚å¤´è„‘é£æš´é˜¶æ®µå°±æ˜¯è®© AI åƒäº§å“ç»ç†ä¸€æ ·é—®ä½ é—®é¢˜ï¼Œå¸®ä½ æŠŠæƒ³æ³•å˜æˆæ¸…æ™°çš„è®¾è®¡ã€‚</p>
<p>å‡è®¾ä½ æƒ³åšä¸€ä¸ª"å¾…åŠäº‹é¡¹åº”ç”¨"ã€‚ä½ åªéœ€è¦è¯´ï¼šâ€œæˆ‘æƒ³åšä¸€ä¸ªå¾…åŠäº‹é¡¹åº”ç”¨â€ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šä½ ä¸éœ€è¦è¾“å…¥ä»»ä½•ç‰¹æ®Šå‘½ä»¤ï¼Superpowers ä¼šè‡ªåŠ¨è§¦å‘ã€‚å½“ AI çœ‹åˆ°ä½ æƒ³"åš"æˆ–"å»º"ä»€ä¹ˆä¸œè¥¿æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è¿›å…¥å¤´è„‘é£æš´æ¨¡å¼ã€‚</p>
<p><strong>AI ä¼šæ€ä¹ˆåšï¼Ÿ</strong></p>
<ol>
<li><strong>å…ˆä¾¦å¯Ÿ</strong>ï¼šAI ä¼šå…ˆçœ‹çœ‹ä½ çš„é¡¹ç›®ç›®å½•ï¼Œäº†è§£ç°æœ‰ä»£ç ç»“æ„</li>
<li><strong>ä¸€æ¬¡é—®ä¸€ä¸ªé—®é¢˜</strong>ï¼šä¸ä¼šä¸€ä¸‹å­é—®ä½ 10ä¸ªé—®é¢˜</li>
<li><strong>ç»™ä½ é€‰é¡¹</strong>ï¼šå°½é‡ç»™ä½  A/B/C é€‰æ‹©ï¼Œè€Œä¸æ˜¯è®©ä½ ä»é›¶æƒ³</li>
</ol>
<p><strong>è®¾è®¡æ–‡æ¡£è¾“å‡º</strong></p>
<p>é—®å®Œæ‰€æœ‰å…³é”®é—®é¢˜åï¼ŒAI ä¼šï¼š</p>
<ol>
<li>æŠŠè®¾è®¡åˆ†æˆ 200-300 å­—çš„å°èŠ‚å±•ç¤ºç»™ä½ </li>
<li>æ¯èŠ‚éƒ½é—®ä½ ï¼š"è¿™éƒ¨åˆ†å¯¹å—ï¼Ÿ"</li>
<li>å…¨éƒ¨ç¡®è®¤åï¼Œå†™å…¥ <code>docs/plans/2025-01-10-todo-app-design.md</code></li>
</ol>
<p><strong>âœ…ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºéš”ç¦»å·¥ä½œåŒº</strong></p>
<p><strong>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>æƒ³è±¡ä½ åœ¨è£…ä¿®æˆ¿å­ã€‚ä½ ä¸ä¼šç›´æ¥åœ¨å®¢å…é‡Œè¯•éªŒæ–°æ²¹æ¼†é¢œè‰²â€”â€”ä½ ä¼šå…ˆæ‰¾ä¸€å°å—å¢™è¯•è¯•ã€‚Git Worktree å°±æ˜¯é‚£å—"è¯•éªŒå¢™"ã€‚</p>
<p><strong>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</strong></p>
<p>AI è®¾è®¡å®Œæˆåä¼šé—®ä½ ï¼š</p>
<p><code>AI: è®¾è®¡ç¡®è®¤å®Œæ¯•ã€‚å‡†å¤‡å¥½å¼€å§‹å®ç°äº†å—ï¼Ÿ ä½ : æ˜¯çš„</code></p>
<p>ç„¶å AI ä¼šè‡ªåŠ¨ï¼š</p>
<ol>
<li><strong>åˆ›å»ºæ–°åˆ†æ”¯</strong>ï¼šæ¯”å¦‚ <code>feature/todo-app</code></li>
<li><strong>åˆ›å»º worktree</strong>ï¼šä¸€ä¸ªç‹¬ç«‹çš„å·¥ä½œç›®å½•ï¼Œå’Œä¸»ä»£ç å®Œå…¨éš”ç¦»</li>
<li><strong>è¿è¡Œé¡¹ç›®åˆå§‹åŒ–</strong>ï¼šç¡®ä¿ç¯å¢ƒèƒ½è·‘èµ·æ¥</li>
<li><strong>éªŒè¯æµ‹è¯•åŸºçº¿</strong>ï¼šç¡®ä¿ç°æœ‰æµ‹è¯•éƒ½æ˜¯ç»¿è‰²çš„</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ</strong></p>
<ul>
<li>ä½ çš„ä¸»åˆ†æ”¯ï¼ˆmainï¼‰ä¿æŒå¹²å‡€</li>
<li>å¦‚æœå®éªŒå¤±è´¥ï¼Œç›´æ¥åˆ æ‰è¿™ä¸ª worktreeï¼Œä¸å½±å“ä»»ä½•ä¸œè¥¿</li>
<li>å¯ä»¥åŒæ—¶å¼€å¤šä¸ªåŠŸèƒ½åˆ†æ”¯ï¼Œäº’ä¸å¹²æ‰°</li>
</ul>
<p><strong>âœ…ç¬¬å››æ­¥ï¼šç¼–å†™å®ç°è®¡åˆ’</strong></p>
<p><strong>è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>ä½ ä¸èƒ½å¯¹ä¸€ä¸ªå®ä¹ ç”Ÿè¯´"åšä¸€ä¸ªå¾…åŠäº‹é¡¹åº”ç”¨"ã€‚ä½ å¾—è¯´ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šåˆ›å»º <code>Todo</code> æ•°æ®ç»“æ„</li>
<li>ç¬¬äºŒæ­¥ï¼šå®ç°"æ·»åŠ "åŠŸèƒ½</li>
<li>ç¬¬ä¸‰æ­¥ï¼šå®ç°"åˆ é™¤"åŠŸèƒ½</li>
<li>...</li>
</ul>
<p>æ¯ä¸€æ­¥éƒ½è¦å°åˆ° 2-5 åˆ†é’Ÿèƒ½å®Œæˆã€‚</p>
<p><strong>æ¯ä¸ªæ­¥éª¤è¯¦è§£</strong></p>
<p><strong>REDï¼ˆçº¢è‰²ï¼‰</strong> ï¼šå†™ä¸€ä¸ªä¼šå¤±è´¥çš„æµ‹è¯•</p>
<p>è¿è¡Œæµ‹è¯•ï¼š<code>npm test</code> â†’ å¤±è´¥ï¼ˆå› ä¸º <code>addTodo</code> è¿˜ä¸å­˜åœ¨ï¼‰</p>
<p><strong>è¿™æ­¥çš„å…³é”®</strong>ï¼šä½ å¿…é¡»äº²çœ¼çœ‹åˆ°æµ‹è¯•å¤±è´¥ï¼å¦‚æœæµ‹è¯•ä¸€å¼€å§‹å°±é€šè¿‡ï¼Œè¯´æ˜ï¼š</p>
<ul>
<li>ä½ æµ‹è¯•çš„æ˜¯å·²æœ‰åŠŸèƒ½ï¼ˆæ²¡æ„ä¹‰ï¼‰</li>
<li>æµ‹è¯•å†™é”™äº†ï¼ˆå±é™©ï¼‰</li>
</ul>
<p><strong>GREENï¼ˆç»¿è‰²ï¼‰</strong> ï¼šå†™æœ€å°‘çš„ä»£ç è®©æµ‹è¯•é€šè¿‡</p>
<h3 data-id="heading-8">ğŸš€Codex å®‰è£…ä¸ä½¿ç”¨</h3>
<ol>
<li><strong>å¿«é€Ÿå®‰è£…ï¼ˆæ¨èï¼‰</strong></li>
</ol>
<p>ç›´æ¥å‘Šè¯‰ Codexï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-title class_">Fetch</span> <span class="hljs-keyword">and</span> follow instructions from &lt;<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/raw.githubusercontent.com/obra</span><span class="hljs-regexp">/superpowers/refs</span><span class="hljs-regexp">/heads/main</span><span class="hljs-regexp">/.codex/</span><span class="hljs-variable constant_">INSTALL</span>.md&gt;
</code></pre>
<p>Codex ä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰å®‰è£…æ­¥éª¤ã€‚</p>
<ol>
<li><strong>æ‰‹åŠ¨å®‰è£…</strong></li>
</ol>
<p><strong>å‰ç½®è¦æ±‚</strong></p>
<ul>
<li>OpenAI Codex CLI å·²å®‰è£…</li>
<li>Node.js v14+ï¼ˆæ¨è v18+ ä»¥è·å¾—æ›´å¥½çš„ ES æ¨¡å—æ”¯æŒï¼‰</li>
<li>Git å·²å®‰è£…</li>
<li>Shell è®¿é—®æƒé™</li>
</ul>
<p><strong>å®‰è£…æ­¥éª¤</strong></p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå…‹éš† Superpowers ä»“åº“</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p ~/.codex/superpowers
<span class="hljs-built_in">cd</span> ~/.codex/superpowers
git <span class="hljs-built_in">clone</span> &lt;https://github.com/obra/superpowers.git&gt; .
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä¸ªäººæŠ€èƒ½ç›®å½•</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p ~/.codex/skills
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šé…ç½® <a href="https://link.juejin.cn?target=http%3A%2F%2FAGENTS.md" target="_blank" title="http://AGENTS.md" ref="nofollow noopener noreferrer">AGENTS.md</a></strong> ç¼–è¾‘ <code>~/.codex/AGENTS.md</code>ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">## Superpowers <span class="hljs-keyword">System</span>

<span class="hljs-operator">&lt;</span>EXTREMELY_IMPORTANT<span class="hljs-operator">&gt;</span>
You have superpowers. Superpowers teach you <span class="hljs-keyword">new</span> skills <span class="hljs-keyword">and</span> capabilities.

<span class="hljs-keyword">RIGHT</span> NOW run: `<span class="hljs-operator">~</span><span class="hljs-operator">/</span>.codex<span class="hljs-operator">/</span>superpowers<span class="hljs-operator">/</span>.codex<span class="hljs-operator">/</span>superpowers<span class="hljs-operator">-</span>codex bootstrap` 
<span class="hljs-keyword">and</span> follow the instructions it returns.
<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>EXTREMELY_IMPORTANT<span class="hljs-operator">&gt;</span>
</code></pre>
<p><strong>ç¬¬å››æ­¥ï¼šéªŒè¯å®‰è£…</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">~<span class="hljs-regexp">/.codex/</span>superpowers/.<span class="hljs-property">codex</span>/superpowers-codex bootstrap
</code></pre>
<p>å¦‚æœçœ‹åˆ°æŠ€èƒ½åˆ—è¡¨å’Œå¼•å¯¼æŒ‡ä»¤ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚</p>
<p><strong>ä½¿ç”¨æ–¹æ³•</strong></p>
<p>æŸ¥æ‰¾å¯ç”¨æŠ€èƒ½</p>
<pre><code class="hljs language-javascript" lang="javascript">~<span class="hljs-regexp">/.codex/</span>superpowers/.<span class="hljs-property">codex</span>/superpowers-codex find-skills
</code></pre>
<p>æˆ–è€…å‘Šè¯‰ Codexï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">Run ~/.codex/superpowers/.codex/superpowers-codex find-skills to show available skills
</code></pre>
<p><strong>åŠ è½½ç‰¹å®šæŠ€èƒ½</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">~<span class="hljs-regexp">/.codex/</span>superpowers/.<span class="hljs-property">codex</span>/superpowers-codex use-skill <span class="hljs-attr">superpowers</span>:brainstorming
</code></pre>
<p><strong>åŠ è½½å®Œæ•´å¼•å¯¼</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">~<span class="hljs-regexp">/.codex/</span>superpowers/.<span class="hljs-property">codex</span>/superpowers-codex bootstrap
</code></pre>
<h3 data-id="heading-9">ğŸš€**OpenCode å®‰è£…ä¸ä½¿ç”¨å®Œæ•´è„šæœ¬</h3>
<p>ä¸€é”®å®‰è£…è„šæœ¬**</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># Superpowers for OpenCode - å®Œæ•´å®‰è£…è„šæœ¬</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== å®‰è£… Superpowers for OpenCode ==="</span>

<span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼šå…‹éš† Superpowers ä»“åº“</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[1/4] å…‹éš† Superpowers ä»“åº“..."</span>
<span class="hljs-built_in">mkdir</span> -p ~/.config/opencode/superpowers
git <span class="hljs-built_in">clone</span> &lt;https://github.com/obra/superpowers.git&gt; ~/.config/opencode/superpowers

<span class="hljs-comment"># ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ’ä»¶ç›®å½•å¹¶æ³¨å†Œæ’ä»¶</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[2/4] æ³¨å†Œæ’ä»¶..."</span>
<span class="hljs-built_in">mkdir</span> -p ~/.config/opencode/plugin
<span class="hljs-built_in">ln</span> -sf ~/.config/opencode/superpowers/.opencode/plugin/superpowers.js \\
       ~/.config/opencode/plugin/superpowers.js

<span class="hljs-comment"># ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä¸ªäººæŠ€èƒ½ç›®å½•</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[3/4] åˆ›å»ºä¸ªäººæŠ€èƒ½ç›®å½•..."</span>
<span class="hljs-built_in">mkdir</span> -p ~/.config/opencode/skills

<span class="hljs-comment"># ç¬¬å››æ­¥ï¼šéªŒè¯å®‰è£…</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[4/4] éªŒè¯å®‰è£…..."</span>
<span class="hljs-keyword">if</span> [ -f ~/.config/opencode/plugin/superpowers.js ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… æ’ä»¶é“¾æ¥åˆ›å»ºæˆåŠŸ"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ æ’ä»¶é“¾æ¥åˆ›å»ºå¤±è´¥"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> [ -d ~/.config/opencode/superpowers/skills ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… æŠ€èƒ½ç›®å½•å­˜åœ¨"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"   å¯ç”¨æŠ€èƒ½æ•°é‡: <span class="hljs-subst">$(ls ~/.config/opencode/superpowers/skills | wc -l)</span>"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ æŠ€èƒ½ç›®å½•ä¸å­˜åœ¨"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== å®‰è£…å®Œæˆï¼==="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¸‹ä¸€æ­¥æ“ä½œï¼š"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. é‡å¯ OpenCode"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2. åœ¨å¯¹è¯ä¸­è¾“å…¥: do you have superpowers?"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"3. ä½¿ç”¨ find_skills å·¥å…·æŸ¥çœ‹å¯ç”¨æŠ€èƒ½"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"4. ä½¿ç”¨ use_skill å·¥å…·åŠ è½½æŠ€èƒ½"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç¤ºä¾‹å‘½ä»¤ï¼š"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  use find_skills tool"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  use use_skill tool with skill_name: \\"</span>superpowers:brainstorming\\"<span class="hljs-string">"
</span></code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¢ç´¢Playwrightï¼šå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ–°çºªå…ƒ]]></title>    <link>https://juejin.cn/post/7594047593967681574</link>    <guid>https://juejin.cn/post/7594047593967681574</guid>    <pubDate>2026-01-12T06:04:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594047593967681574" data-draft-id="7594047593967665190" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¢ç´¢Playwrightï¼šå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ–°çºªå…ƒ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-12T06:04:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¢ç´¢Playwrightï¼šå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ–°çºªå…ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T06:04:07.000Z" title="Mon Jan 12 2026 06:04:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    28
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">èƒŒæ™¯</h3>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•æ˜¯ç¡®ä¿è½¯ä»¶è´¨é‡å’Œç”¨æˆ·ä½“éªŒçš„å…³é”®ç¯èŠ‚ã€‚éšç€Webåº”ç”¨çš„å¤æ‚æ€§ä¸æ–­å¢åŠ ï¼Œæ‰‹åŠ¨æµ‹è¯•å·²ç»æ— æ³•æ»¡è¶³å¿«é€Ÿè¿­ä»£å’ŒæŒç»­äº¤ä»˜çš„éœ€æ±‚ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•é€šè¿‡æ¨¡æ‹Ÿç”¨æˆ·ä¸åº”ç”¨çš„äº¤äº’ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°æ‰§è¡Œé‡å¤æ€§æµ‹è¯•ä»»åŠ¡ï¼ŒåŠ å¿«æµ‹è¯•å‘¨æœŸï¼Œæå‡æµ‹è¯•è¦†ç›–ç‡ï¼Œä»è€Œæ›´æ—©åœ°å‘ç°ç¼ºé™·å’Œé—®é¢˜ã€‚è¿™ä¸ä»…æé«˜äº†è½¯ä»¶çš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œè¿˜é™ä½äº†ç»´æŠ¤æˆæœ¬ï¼Œå¹¶ä¸ºåˆ›æ–°å’ŒåŠŸèƒ½å¢å¼ºæä¾›äº†æ›´å¤šçš„æ—¶é—´å’Œèµ„æºã€‚</p>
<p>åœ¨ä¼—å¤šè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ä¸­ï¼ŒPlaywrightä»¥å…¶åˆ›æ–°çš„ç‰¹æ€§å’Œå¼ºå¤§çš„åŠŸèƒ½ï¼Œè¿…é€Ÿåœ¨å‰ç«¯æµ‹è¯•é¢†åŸŸå´­éœ²å¤´è§’ã€‚ä½œä¸ºä¸€ä¸ªç”±å¾®è½¯å¼€å‘çš„å¼€æºé¡¹ç›®ï¼ŒPlaywrightæ”¯æŒæ‰€æœ‰ç°ä»£Webæµè§ˆå™¨ï¼ŒåŒ…æ‹¬Chromiumã€WebKitå’ŒFirefoxï¼Œå¹¶èƒ½å¤Ÿåœ¨Windowsã€Linuxå’ŒmacOSä¸Šè¿è¡Œã€‚å®ƒæä¾›äº†ç»Ÿä¸€çš„APIæ¥å®ç°è·¨æµè§ˆå™¨çš„æµ‹è¯•ï¼Œè¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥ç¼–å†™ä¸€æ¬¡æµ‹è¯•è„šæœ¬ï¼Œå°±èƒ½åœ¨æ‰€æœ‰æ”¯æŒçš„æµè§ˆå™¨å’Œå¹³å°ä¸Šè¿è¡Œï¼Œæ— éœ€ä¸ºæ¯ä¸ªæµè§ˆå™¨å•ç‹¬ç¼–å†™æˆ–è°ƒæ•´æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>Playwrightçš„è‡ªåŠ¨ç­‰å¾…æœºåˆ¶ã€ä¸°å¯Œçš„APIã€ä»¥åŠå¯¹ç°ä»£Webç‰¹æ€§çš„å…¨é¢æ”¯æŒï¼Œä½¿å…¶æˆä¸ºäº†å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¼ºå¤§å·¥å…·ã€‚å®ƒä¸ä»…ç®€åŒ–äº†æµ‹è¯•è„šæœ¬çš„ç¼–å†™å’Œç»´æŠ¤ï¼Œè¿˜æé«˜äº†æµ‹è¯•çš„å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚æ­¤å¤–ï¼ŒPlaywrightçš„å¹¶è¡Œæµ‹è¯•æ‰§è¡Œèƒ½åŠ›ä¹Ÿæå¤§åœ°æé«˜äº†æµ‹è¯•çš„æ•ˆç‡ï¼Œä½¿å…¶æˆä¸ºç°ä»£Webåº”ç”¨å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚éšç€è¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå’Œå¼€å‘è€…é‡‡ç”¨Playwrightï¼Œå®ƒçš„å½±å“åŠ›åœ¨å‰ç«¯æµ‹è¯•é¢†åŸŸä¸æ–­å¢å¼ºï¼Œæ­£é€æ¸æˆä¸ºè‡ªåŠ¨åŒ–æµ‹è¯•çš„æ–°æ ‡å‡†ã€‚</p>
<h3 data-id="heading-1">å¯¹æ¯”</h3>





















































<table><thead><tr><th>ç‰¹æ€§</th><th>Playwright</th><th>Selenium</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>æµè§ˆå™¨æ”¯æŒ</td><td>æ”¯æŒChromiumã€WebKitå’ŒFirefox</td><td>æ”¯æŒChromeã€Firefoxã€Safariã€IEç­‰</td><td>Playwrightæ”¯æŒæ‰€æœ‰ç°ä»£æ¸²æŸ“å¼•æ“</td></tr><tr><td>è·¨å¹³å°æµ‹è¯•</td><td>æ”¯æŒWindowsã€Linuxå’ŒmacOS</td><td>æ”¯æŒWindowsã€Linuxå’ŒmacOS</td><td>Playwrightæä¾›æ›´ä¸€è‡´çš„è·¨å¹³å°ä½“éªŒ</td></tr><tr><td>å®‰è£…å’Œé…ç½®</td><td>è‡ªåŠ¨å®‰è£…æµè§ˆå™¨å’Œé©±åŠ¨</td><td>éœ€è¦æ‰‹åŠ¨ä¸‹è½½å’Œé…ç½®WebDriver</td><td>Playwrightç®€åŒ–äº†å®‰è£…å’Œé…ç½®è¿‡ç¨‹</td></tr><tr><td>ç¤¾åŒºå’Œæ–‡æ¡£</td><td>è¾ƒæ–°çš„å·¥å…·ï¼Œä½†ç¤¾åŒºæ´»è·ƒ</td><td>é•¿æœŸå­˜åœ¨ï¼Œæ‹¥æœ‰åºå¤§çš„ç¤¾åŒºæ”¯æŒ</td><td>Seleniumçš„ç¤¾åŒºå’Œæ–‡æ¡£èµ„æºæ›´ä¸°å¯Œ</td></tr><tr><td>é«˜çº§åŠŸèƒ½</td><td>æ”¯æŒæ— å¤´æµ‹è¯•ã€ç½‘ç»œè¯·æ±‚æ‹¦æˆªç­‰</td><td>æ”¯æŒåˆ†å¸ƒå¼æµ‹è¯•ã€å¤šç§å®šä½æ–¹å¼</td><td>Playwrightæä¾›äº†ä¸€äº›Seleniumæ²¡æœ‰çš„é«˜çº§åŠŸèƒ½</td></tr><tr><td>è¯­è¨€æ”¯æŒ</td><td>TypeScriptã€JavaScriptã€Pythonã€.NETã€Java</td><td>Javaã€Pythonã€JavaScriptã€C#ç­‰</td><td>ä¸¤è€…éƒ½æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€</td></tr><tr><td>APIè®¾è®¡</td><td>ç®€æ´è€Œå¼ºå¤§</td><td>ç›¸å¯¹è€æ´¾ï¼Œæ”¯æŒå¤šç§è¯­è¨€</td><td>Playwrightçš„APIæ›´ç°ä»£åŒ–ï¼Œæ˜“äºä½¿ç”¨</td></tr></tbody></table>
<p>è®¨è®ºPlaywrightçš„APIè®¾è®¡ï¼Œå¦‚ä½•æ”¯æŒå¼€å‘è€…ç¼–å†™ç®€æ´è€Œå¼ºå¤§çš„æµ‹è¯•è„šæœ¬ã€‚</p>
<h3 data-id="heading-2">å®‰è£…</h3>
<p>å®‰è£…Node.jså’Œnpmï¼ŒPlaywrightéœ€è¦Node.jsç¯å¢ƒï¼Œå› æ­¤é¦–å…ˆéœ€è¦ç¡®ä¿ä½ çš„ç³»ç»Ÿä¸Šå®‰è£…äº†Node.jså’Œnpmã€‚å¯ä»¥ä»Node.jså®˜ç½‘ä¸‹è½½å¹¶å®‰è£…ã€‚node.jså’Œnpmå®‰è£…å¿½ç•¥ï¼Œé»˜è®¤ä¸ºå·²å®‰è£…ï¼Œå¦‚æœ‰éœ€è¦å®‰è£…node.jså’Œnpmå¯è”ç³»æ”¯æŒã€‚</p>
<ul>
<li>å…¨å±€å®‰è£…Playwright</li>
</ul>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> -D playwright
</code></pre>
<ul>
<li>å®‰è£…æµè§ˆå™¨<br/>
Playwrightè‡ªå¸¦Chromiumï¼ŒFirefoxå’ŒWebKitæµè§ˆå™¨ï¼Œæ— éœ€å•ç‹¬ä¸‹è½½é©±åŠ¨ç¨‹åºã€‚å®‰è£…Playwrightæ—¶ï¼Œæµè§ˆå™¨ä¹Ÿä¼šè‡ªåŠ¨å®‰è£…ã€‚</li>
</ul>
<pre><code class="hljs">playwright install
</code></pre>
<h3 data-id="heading-3">é…ç½®</h3>
<p>åˆå§‹åŒ–Playwrighté¡¹ç›®<br/>
å¦‚æœä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ç”Ÿæˆé…ç½®æ–‡ä»¶å’Œå®‰è£…å¿…è¦çš„ä¾èµ–é¡¹ã€‚</p>
<pre><code class="hljs">npx playwright install
</code></pre>
<h3 data-id="heading-4">Demo</h3>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">const</span> { chromium } = require(<span class="hljs-string">'playwright'</span>);

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">await</span> chromium.launch();
  <span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.newPage();
  <span class="hljs-keyword">await</span> page.<span class="hljs-keyword">goto</span>(<span class="hljs-string">'https://www.baidu.com'</span>);
  <span class="hljs-comment">// æ·»åŠ ä½ çš„æµ‹è¯•æ“ä½œ...</span>
  <span class="hljs-keyword">await</span> browser.close();
})();
</code></pre>
<h3 data-id="heading-5">è¿è¡Œæµ‹è¯•</h3>
<pre><code class="hljs language-bash" lang="bash">npx playwright <span class="hljs-built_in">test</span>
</code></pre>
<h3 data-id="heading-6">å¸¸ç”¨API</h3>
<ul>
<li>å‘é€getè¯·æ±‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { request } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'playwright'</span>);

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„APIè¯·æ±‚ä¸Šä¸‹æ–‡</span>
  <span class="hljs-keyword">const</span> context = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">newContext</span>();

  <span class="hljs-comment">// å‘é€GETè¯·æ±‚</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> context.<span class="hljs-title function_">get</span>(url, {
    <span class="hljs-attr">headers</span>: {
{      <span class="hljs-string">"Authorization"</span>: <span class="hljs-string">"Bearer "</span>}
    },
    <span class="hljs-attr">params</span>: {
      <span class="hljs-attr">query</span>: <span class="hljs-string">'value'</span>
    }
  });

  <span class="hljs-comment">// æ£€æŸ¥å“åº”çŠ¶æ€</span>
  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">ok</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Response:'</span>, <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>());
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error:'</span>, response.<span class="hljs-title function_">status</span>());
  }

  <span class="hljs-comment">// é‡Šæ”¾ä¸Šä¸‹æ–‡èµ„æº</span>
  <span class="hljs-keyword">await</span> context.<span class="hljs-title function_">dispose</span>();
})();
</code></pre>
<ul>
<li>å‘é€postè¯·æ±‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { request } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'playwright'</span>);

(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„APIè¯·æ±‚ä¸Šä¸‹æ–‡</span>
  <span class="hljs-keyword">const</span> context = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">newContext</span>();

  <span class="hljs-comment">// å®šä¹‰POSTè¯·æ±‚çš„URLå’Œæ•°æ®</span>
  <span class="hljs-keyword">const</span> url = xxx;
  <span class="hljs-keyword">const</span> data = {
    <span class="hljs-attr">key1</span>: <span class="hljs-string">'value1'</span>,
    <span class="hljs-attr">key2</span>: <span class="hljs-string">'value2'</span>
  };

  <span class="hljs-comment">// å‘é€POSTè¯·æ±‚</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> context.<span class="hljs-title function_">post</span>(url, {
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
      <span class="hljs-comment">// å¦‚æœéœ€è¦èº«ä»½éªŒè¯</span>
      <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">'Bearer '</span>
    },
    <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data) <span class="hljs-comment">// å¯¹äºJSONæ•°æ®ï¼Œéœ€è¦å°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
  });

  <span class="hljs-comment">// æ£€æŸ¥å“åº”çŠ¶æ€</span>
  <span class="hljs-keyword">if</span> (response.<span class="hljs-property">ok</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Response:'</span>, <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()); <span class="hljs-comment">// å‡è®¾å“åº”å†…å®¹æ˜¯JSONæ ¼å¼</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error:'</span>, response.<span class="hljs-title function_">status</span>());
  }

  <span class="hljs-comment">// é‡Šæ”¾ä¸Šä¸‹æ–‡èµ„æº</span>
  <span class="hljs-keyword">await</span> context.<span class="hljs-title function_">dispose</span>();
})();
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React ç»ˆäºå‡ºæ‰‹äº†ï¼šå½»åº•ç»ˆç»“ useEffect çš„"é—­åŒ…é™·é˜±"]]></title>    <link>https://juejin.cn/post/7594276252459024394</link>    <guid>https://juejin.cn/post/7594276252459024394</guid>    <pubDate>2026-01-12T08:12:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594276252459024394" data-draft-id="7594270467029680155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React ç»ˆäºå‡ºæ‰‹äº†ï¼šå½»åº•ç»ˆç»“ useEffect çš„&quot;é—­åŒ…é™·é˜±&quot;"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2026-01-12T08:12:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React ç»ˆäºå‡ºæ‰‹äº†ï¼šå½»åº•ç»ˆç»“ useEffect çš„"é—­åŒ…é™·é˜±"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T08:12:22.000Z" title="Mon Jan 12 2026 08:12:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>è¯‘æ³¨</strong>ï¼šæœ¬æ–‡ç¿»è¯‘è‡ª LogRocket åšå®¢ï¼ŒåŸæ–‡ä½œè€… Jack Herringtonï¼Œå‘å¸ƒäº 2025 å¹´ 1 æœˆ 7 æ—¥ã€‚
åŸæ–‡é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Freact-has-finally-solved-its-biggest-problem-useeffectevent%2F" target="_blank" title="https://blog.logrocket.com/react-has-finally-solved-its-biggest-problem-useeffectevent/" ref="nofollow noopener noreferrer">React has finally solved its biggest problem: The joys of useEffectEvent</a></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">React ç»ˆäºè§£å†³äº†å®ƒæœ€å¤§çš„é—®é¢˜ï¼šuseEffectEvent çš„å¦™ç”¨</h2>
<p>å¦‚æœé—®ä½  React æœ€å¤§çš„ bug æ¥æºæ˜¯ä»€ä¹ˆï¼Œä½ ä¼šè¯´ä»€ä¹ˆï¼Ÿå¤§å¤šæ•°äººéƒ½ä¼šè¯´ <code>useEffect</code>ã€‚è¿™ä¸ªåå­—å¾ˆå¥‡æ€ªçš„ Hook å…è®¸ä½ æ‰§è¡Œå¼‚æ­¥å·¥ä½œï¼Œè¿™å¾ˆå¥½ï¼Œä½†ä¹Ÿä¼šå¯¼è‡´å¾ˆå¤šé—®é¢˜ã€‚ç‰¹åˆ«æ˜¯æ— é™å¾ªç¯â€”â€”æˆ‘ä»¬ä¸€ç›´åœ¨ä»æœåŠ¡å™¨è·å–æ•°æ®æ—¶é‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>React å›¢é˜Ÿçœ‹åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œä»–ä»¬æƒ³å‡ºäº†ä¸€ä¸ªæ–°çš„ Hook å« <code>useEffectEvent</code>ã€‚æˆ‘çŸ¥é“è¿™ä¸ªåå­—å¾ˆç»•å£ï¼Œä½†å½“æ¶‰åŠåˆ°ç¨³å®šä½ çš„ React åº”ç”¨æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•‘å‘½ç¨»è‰ã€‚</p>
<p>è®©æˆ‘å¸¦ä½ ç»å†ä¸€ä¸ªéå¸¸å¸¸è§çš„é—®é¢˜ã€‚æˆ‘ä»¬å°†ä»ä»Šå¤©æ‹¥æœ‰çš„ Hooks å¼€å§‹ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é—®é¢˜ï¼Œç„¶åæˆ‘å°†å±•ç¤º <code>useEffectEvent</code> å¦‚ä½•ä¿®å¤å®ƒã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼šCloudflare çš„ useEffect äº‹æ•…</h3>
<p>Cloudflare æ˜¯å…¨çƒæœ€å¤§çš„éƒ¨ç½²æä¾›å•†ä¹‹ä¸€ï¼Œä»–ä»¬æœ‰ä¸€ä¸ªä¼˜ç§€çš„å·¥ç¨‹å›¢é˜Ÿã€‚ä½†å³ä½¿ä»–ä»¬åœ¨ useEffect æ–¹é¢ä¹ŸçŠ¯äº†é”™è¯¯ã€‚ä¹‹å‰ï¼Œä»–ä»¬åœ¨é”™è¯¯åœ°å°†ä¸€ä¸ªå¯¹è±¡æ”¾å…¥ä¾èµ–æ•°ç»„æ—¶ï¼Œç­‰äºå¯¹è‡ªå·±çš„ä»ªè¡¨æ¿å‘èµ·äº†åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDDoSï¼‰ã€‚è¯¥å¯¹è±¡åœ¨æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶æ”¹å˜å…¶å¼•ç”¨æ ‡è¯†ï¼Œå¯¼è‡´æ— é™å¾ªç¯ï¼Œæå®äº†æ•´ä¸ªä»ªè¡¨æ¿ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªå°´å°¬çš„é”™è¯¯ï¼Œä½†å¤ªå®¹æ˜“çŠ¯äº†ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ React ç¼–è¯‘å™¨å’Œ <code>useEffectEvent</code> è¿™æ ·çš„æ–° Hooks å¦‚æ­¤é‡è¦ã€‚åœ¨ç¼–è¯‘å™¨çš„æƒ…å†µä¸‹ï¼Œå®ƒä»¬ç¨³å®šå¯¹è±¡å¼•ç”¨ï¼Œæœ‰åŠ©äºå‡å°‘å›´ç»•å¯¹è±¡æ ‡è¯†çš„æ½œåœ¨ bugã€‚<code>useEffectEvent</code> åˆ™å®Œå…¨ä»ä¾èµ–æ•°ç»„ä¸­ç§»é™¤å¯¹è±¡ï¼</p>
<h3 data-id="heading-2">æ­å»ºåœºæ™¯</h3>
<p>è¿™æ˜¯ä¸€ä¸ªå…·æœ‰å¯ç¼–è¾‘ç”¨æˆ·åçš„ç®€å•ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyUserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [userName, setUserName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"Bob"</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{userName}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(evt)</span> =&gt;</span> setUserName(evt.target.value)}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>åˆ°ç›®å‰ä¸ºæ­¢ä¸€åˆ‡é¡ºåˆ©ï¼›æˆ‘ä»¬å¯ä»¥æ›´æ”¹ç”¨æˆ·åã€‚ç°åœ¨å‡è®¾æˆ‘ä»¬æƒ³è¦è¿½è¸ªç”¨æˆ·å·²ç™»å½•å¤šé•¿æ—¶é—´ï¼Œç„¶åæ˜¾ç¤ºå®ƒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyUserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [userName, setUserName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"Bob"</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> loggedInTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      loggedInTime++;
    }, <span class="hljs-number">1000</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{userName}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(evt)</span> =&gt;</span> setUserName(evt.target.value)}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª <code>useEffect</code>ï¼Œåœ¨ç»„ä»¶æŒ‚è½½æ—¶è®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨æ¥è¿½è¸ªæ­¤äººç™»å½•çš„ç§’æ•°ã€‚ï¼ˆæ˜¯çš„ï¼Œæˆ‘çŸ¥é“è¿™ä¸æ˜¯çœŸæ­£çš„ç™»å½•ï¼›è¿™æ˜¯æ¼”ç¤ºä»£ç ã€‚ï¼‰</p>
<p>ç°åœ¨è¿™æ®µä»£ç å®é™…ä¸Šè¿è¡Œæ­£å¸¸ï¼Œæ²¡æœ‰ bugã€‚å®ƒä»…åœ¨ç»„ä»¶æŒ‚è½½æ—¶è¿è¡Œä¸€æ¬¡ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªç©ºçš„ä¾èµ–æ•°ç»„ã€‚å®ƒé€šè¿‡è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°æ¥æ¸…ç†è‡ªå·±ï¼Œè¯¥å‡½æ•°æ¸…é™¤é—´éš”ï¼Œä»è€Œæ€æ­»è®¡æ—¶å™¨ã€‚</p>
<p>ä½†åœ¨åŠŸèƒ½æ–¹é¢ï¼Œå®ƒå®é™…ä¸Šä¸èµ·ä½œç”¨ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹æ˜¾ç¤ºé‚£ä¸ªæ•°å­—ã€‚ä¸ºäº†ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ª <code>loginMessage</code> å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ˜¾ç¤ºé‚£ä¸ªæ•°å­—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MyUserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [userName, setUserName] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">"Bob"</span>);
  <span class="hljs-keyword">const</span> [loginMessage, setLoginMessage] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">""</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> loggedInTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      loggedInTime++;
      <span class="hljs-title function_">setLoginMessage</span>(
        <span class="hljs-string">`<span class="hljs-subst">${userName}</span> has been logged in for <span class="hljs-subst">${loggedInTime}</span> seconds`</span>
      );
    }, <span class="hljs-number">1000</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{loginMessage}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{userName}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(evt)</span> =&gt;</span> setUserName(evt.target.value)}
      /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ç°åœ¨è¿™æ®µä»£ç çœ‹èµ·æ¥åº”è¯¥å¯ä»¥å·¥ä½œã€‚å®é™…ä¸Šï¼Œå®ƒå¤šå°‘æœ‰ç‚¹æœ‰æ•ˆã€‚å¼€å§‹æ—¶ï¼Œå®ƒè¯´"Bob å·²ç™»å½• 1 ç§’"ã€‚ç„¶åå®ƒæ¯ç§’å¿ å®åœ°å¾€å‰èµ°ã€‚å·¨å¤§çš„æˆåŠŸï¼</p>
<h3 data-id="heading-3">è¿‡æœŸé—­åŒ…é—®é¢˜</h3>
<p>å“å‘€ï¼Œå®é™…ä¸Šæœ‰ä¸€ä¸ª bugã€‚å› ä¸ºæˆ‘ä»¬å‘é€ç»™ <code>useEffect</code> çš„å‡½æ•°å¯èƒ½ä¼š"è¿‡æœŸ"ã€‚</p>
<p>å¦‚æœæˆ‘æ›´æ”¹ç”¨æˆ·åä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå¥½çš„ï¼Œ<code>input</code> ä¼šæ”¹å˜ï¼Œä½†ç™»å½•æ¶ˆæ¯ä»ç„¶è¯´ç”¨æˆ·åæ˜¯"Bob"ã€‚ä½†ä¸æ˜¯ï¼›æˆ‘ä»¬æ”¹å˜äº†å®ƒã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å‘é€ç»™ <code>useEffect</code> çš„å‡½æ•°å·²ç»åˆ›å»ºäº†ä¸€ä¸ª"é—­åŒ…"ï¼Œå®ƒåœ¨å½“æ—¶ä»¥å½“å‰å€¼ï¼ˆ"Bob"ï¼‰æ•è·äº† <code>userName</code> çš„å€¼ã€‚å®ƒæ°¸è¿œä¸ä¼šæ”¹å˜ã€‚å› ä¸ºå®ƒç°åœ¨ä¸å®é™…å€¼ä¸åŒæ­¥ï¼Œæˆ‘ä»¬ä¼šè®¤ä¸ºå®ƒæ˜¯"è¿‡æœŸçš„"ã€‚é‚£æ„å‘³ç€æˆ‘ä»¬æœ‰ä¸€ä¸ª"è¿‡æœŸé—­åŒ…"ï¼ˆstale closureï¼‰ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒReact å¯¹æ­¤æœ‰ä¸€ä¸ªä¿®å¤ï¼ˆè¿™ä¸æ˜¯ <code>useEffectEvent</code>ï¼Œè¯·è€å¿ƒç­‰å¾…ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥å°† <code>userName</code> æ·»åŠ åˆ°ä¾èµ–æ•°ç»„ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> loggedInTime = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    loggedInTime++;
    <span class="hljs-title function_">setLoginMessage</span>(
      <span class="hljs-string">`<span class="hljs-subst">${userName}</span> has been logged in for <span class="hljs-subst">${loggedInTime}</span> seconds`</span>
    );
  }, <span class="hljs-number">1000</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
}, [userName]);
</code></pre>
<p>æˆåŠŸäº†ï¼ç°åœ¨å½“æˆ‘ä»¬ç¼–è¾‘ <code>userName</code> æ—¶ï¼Œç™»å½•æ¶ˆæ¯ä¼šæ”¹å˜ï¼å¤ªæ£’äº†ã€‚å“¦ï¼Œç­‰ç­‰ã€‚ä»€ä¹ˆï¼Ÿæ¯æ¬¡æˆ‘ä»¬è¿›è¡Œæ›´æ”¹æ—¶ï¼Œç™»å½•æ—¶é—´éƒ½ä¼šé‡æ–°å¼€å§‹ä¸º 1 ç§’ã€‚</p>
<p>å•Šï¼Œæ‰€ä»¥æ¯æ¬¡æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ–° <code>userName</code> å€¼çš„æ–°é—­åŒ…æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šæ€æ­»æ—§è®¡æ—¶å™¨ï¼ˆè¿™å¾ˆå¥½ï¼‰ã€‚ä½†æˆ‘ä»¬ä¹Ÿåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ <code>loggedInTime</code> å¹¶å†æ¬¡ä»é›¶å¼€å§‹ã€‚è¿™ç»å¯¹ä¸å¥½ã€‚</p>
<p>æˆ‘æ˜ç™½ä¸€ä¸ªç®€å•çš„ä¿®å¤æ–¹æ³•æ˜¯è¿½è¸ª <code>loggedInTime</code> çŠ¶æ€å¹¶åœ¨ JSX ä¸­æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚å¥½çš„ã€‚ä½†è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬åšä¸åˆ°ã€‚</p>
<h3 data-id="heading-4">useRef æ¥æ•‘æ´</h3>
<p>æˆ‘ä»¬æ€æ ·æ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿå¥½å§ï¼Œåœ¨ <code>useEffectEvent</code> ä¹‹å‰ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨ refï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> nameRef = <span class="hljs-title function_">useRef</span>(userName);
nameRef.<span class="hljs-property">current</span> = userName;

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> loggedInTime = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    loggedInTime++;
    <span class="hljs-title function_">setLoginMessage</span>(
      <span class="hljs-string">`<span class="hljs-subst">${nameRef.current}</span> has been logged in for <span class="hljs-subst">${loggedInTime}</span> seconds`</span>
    );
  }, <span class="hljs-number">1000</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
}, []);
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬åšäº†å‡ ä»¶äº‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª refï¼Œå…¶ä¸­å­˜å‚¨äº† <code>userName</code> çš„å½“å‰å€¼ï¼Œæˆ‘ä»¬åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶æ›´æ–°å½“å‰å€¼ã€‚åœ¨æ¸²æŸ“æœŸé—´è®¾ç½® ref çš„ <code>current</code> å€¼æ˜¯å¯ä»¥çš„ï¼Œå› ä¸º React ä¸åƒç›‘æ§çŠ¶æ€é‚£æ ·ç›‘æ§ refsã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ <code>nameRef.current</code> è€Œä¸æ˜¯ <code>userName</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬æ€»æ˜¯è·å¾— <code>userName</code> çš„å½“å‰å€¼ï¼Œå› ä¸ºå®ƒåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶æ›´æ–°ã€‚æœ€åï¼Œæˆ‘ä»¬ä»ä¾èµ–æ•°ç»„ä¸­ç§»é™¤äº† <code>userName</code>ï¼Œè¿™è§£å†³äº†é‡ç½® bugã€‚</p>
<p>ç°åœ¨å®ƒå®é™…ä¸Šæœ‰æ•ˆã€‚æ²¡æœ‰æ³¨æ„äº‹é¡¹ï¼é™¤äº†ï¼Œå®ƒæœ‰ç‚¹ç¬¨é‡ï¼Œè¿™å°±æ˜¯ <code>useEffectEvent</code> çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<h3 data-id="heading-5">useEffectEvent å¥½å¾—å¤š</h3>
<p>çœ‹çœ‹è¿™ä¸ªç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> getName = <span class="hljs-title function_">useEffectEvent</span>(<span class="hljs-function">() =&gt;</span> userName);

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> loggedInTime = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    loggedInTime++;
    <span class="hljs-title function_">setLoginMessage</span>(
      <span class="hljs-string">`<span class="hljs-subst">${getName()}</span> has been logged in for <span class="hljs-subst">${loggedInTime}</span> seconds`</span>
    );
  }, <span class="hljs-number">1000</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
}, []);
</code></pre>
<p>æˆ‘ä»¬ä½¿ç”¨æ–°çš„ <code>useEffectEvent</code> Hook åˆ›å»ºä¸€ä¸ª getter å‡½æ•°ï¼Œå®ƒè¿”å› <code>userName</code> çš„å½“å‰å€¼ã€‚å®ƒå¯ä»¥åœ¨ <code>useEffect</code> ä¸­è¢«è°ƒç”¨ï¼Œå®ƒæ°¸è¿œä¸ä¼šè¿‡æœŸã€‚å®ƒçœŸçš„å¾ˆå¹²å‡€ã€‚æ¯” <code>useRef</code> ç‰ˆæœ¬å¹²å‡€å’Œæ¸…æ™°å¾—å¤šã€‚</p>
<p>ä½†å®é™…ä¸Šè¿˜èƒ½å˜å¾—æ›´å¥½ï¼Œå› ä¸ºå®ƒå…è®¸æˆ‘ä»¬æ›´ä¸€èˆ¬åœ°æ€è€ƒ <code>useEffect</code>ã€‚æˆ‘æ˜¯è¯´ï¼Œå¦‚æœä½ æƒ³ä¸€æƒ³ï¼Œæˆ‘ä»¬å¤šå°‘æœ‰ä¸€ä¸ªæ›´é€šç”¨çš„"è®¡æ—¶å™¨" <code>useEffect</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> onTick = <span class="hljs-title function_">useEffectEvent</span>(<span class="hljs-function">(<span class="hljs-params">tick: number</span>) =&gt;</span>
  <span class="hljs-title function_">setLoginMessage</span>(<span class="hljs-string">`<span class="hljs-subst">${userName}</span> has been logged in for <span class="hljs-subst">${tick}</span> seconds`</span>)
);

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> ticks = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onTick</span>(++ticks), <span class="hljs-number">1000</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
}, []);
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å·²å°†æ‰€æœ‰çŠ¶æ€ç›¸å…³çš„å†…å®¹ç§»åˆ° <code>useEffectEvent</code> ä¸­ã€‚çœ‹çœ‹æˆ‘ä»¬çš„ <code>useEffect</code> å˜å¾—å¤šå¹²å‡€äº†ï¼Ÿ<code>useEffect</code> åªå¤„ç†è®¡æ—¶å™¨ã€‚<code>onTick</code> å¤„ç†è¯¥è®¡æ—¶å™¨çš„æ‰€æœ‰é€»è¾‘ã€‚</p>
<h3 data-id="heading-6">useEffectEvent æ˜¯æ¸¸æˆè§„åˆ™æ”¹å˜è€…</h3>
<p>æ›´å¥½çš„æ˜¯ï¼Œ<code>useEffect</code> å¯¹çŠ¶æ€æ²¡æœ‰ä¾èµ–ã€‚è€ŒçŠ¶æ€ä¾èµ–æ­£æ˜¯ <code>useEffect</code> é™·å…¥å›°å¢ƒçš„åœ°æ–¹ï¼ˆå¦‚æˆ‘ä»¬æ‰€è§ï¼‰ã€‚ä¾èµ–äºé”™è¯¯çŠ¶æ€çš„åä¾èµ–æ•°ç»„ä¼šå¯¼è‡´è¿‡æœŸé—­åŒ…é—®é¢˜ã€æ— æ•ˆé‡ç½®æˆ–ç”šè‡³æ— é™å¾ªç¯ã€‚<code>useEffectEvent</code> å…è®¸æˆ‘ä»¬ä»ä¾èµ–æ•°ç»„ä¸­ç§»é™¤çŠ¶æ€ã€‚è¿™å¸®åŠ©æˆ‘ä»¬ç¼–å†™æ›´å¥½çš„ <code>useEffects</code>ã€‚</p>
<p>æˆ‘ä»¬ç”šè‡³å¯ä»¥å°†å…¶å˜æˆè‡ªå®šä¹‰ Hookï¼Œä½¿å…¶æ›´é€šç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useInterval</span>(<span class="hljs-params">onTick: (tick: number) =&gt; <span class="hljs-keyword">void</span></span>) {
  <span class="hljs-keyword">const</span> onTickEvent = <span class="hljs-title function_">useEffectEvent</span>(onTick);
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> ticks = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> interval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onTickEvent</span>(++ticks), <span class="hljs-number">1000</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(interval);
  }, []);
}
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ <code>useInterval</code> å®ç°ï¼Œå®ƒéå¸¸å¹²å‡€ä¸”æ—  bugã€‚</p>
<h3 data-id="heading-7">ä¸€ä¸ªå°æŒ‘æˆ˜</h3>
<p>å¦‚æœä½ æƒ³è¦ä¸€ä¸ªæœ‰è¶£çš„å°æŒ‘æˆ˜ï¼šä½ å°†å¦‚ä½•å®ç°ä¸€ä¸ªç‰ˆæœ¬ï¼Œå…¶ä¸­æ¯«ç§’æ•°ï¼ˆç›®å‰æ˜¯ 1000ï¼‰æ˜¯å¯è°ƒæ•´çš„ï¼Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useInterval</span>(<span class="hljs-params">onTick: (tick: number) =&gt; <span class="hljs-keyword">void</span>, timeout: number = <span class="hljs-number">1000</span></span>) {
  <span class="hljs-comment">// ????</span>
}
</code></pre>
<p>æˆ‘é‡‡å–çš„æ–¹æ³•è¿™æ¬¡æœ‰ç‚¹ä¸åŒã€‚ä¸æ˜¯ <code>setInterval</code>ï¼Œæˆ‘ä½¿ç”¨ <code>setTimeout</code> å¹¶åœ¨æ¯æ¬¡è¿­ä»£ä¸­è°ƒæ•´è¶…æ—¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useInterval</span>(<span class="hljs-params">onTick: (tick: number) =&gt; <span class="hljs-keyword">void</span>, timeout: number = <span class="hljs-number">1000</span></span>) {
  <span class="hljs-keyword">const</span> onTickEvent = <span class="hljs-title function_">useEffectEvent</span>(onTick);
  <span class="hljs-keyword">const</span> getTimeout = <span class="hljs-title function_">useEffectEvent</span>(<span class="hljs-function">() =&gt;</span> timeout);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> ticks = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> mounted = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">onTick</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (mounted) {
        <span class="hljs-title function_">onTickEvent</span>(++ticks);
        <span class="hljs-built_in">setTimeout</span>(onTick, <span class="hljs-title function_">getTimeout</span>());
      }
    }
    <span class="hljs-built_in">setTimeout</span>(onTick, <span class="hljs-title function_">getTimeout</span>());
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      mounted = <span class="hljs-literal">false</span>;
    };
  }, []);
}
</code></pre>
<p>è®©æˆ‘çŸ¥é“ä½ æ˜¯å¦èƒ½å¤Ÿä¼˜åŒ–è¿™ä¸ªã€‚</p>
<h3 data-id="heading-8">ç»“è®ºï¼šå¸¦å®‰å…¨å¸¦çš„ React</h3>
<p>React å›¢é˜Ÿæ‰¿è®¤äº† <code>useEffect</code> ä»£ç å¤±æ§è¿è¡Œçš„é—®é¢˜ã€‚ä»–ä»¬ä¸ä»…æ‰¿è®¤äº†è¿™ä¸€ç‚¹ï¼Œè¿˜ç”¨åƒç¼–è¯‘å™¨å’Œ <code>useEffectEvent</code> è¿™æ ·çš„æ–°åŠŸèƒ½åˆ›é€ äº†ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œè®©ä½ å¯ä»¥å®‰å…¨å¯é åœ°ç¼–å†™ React ä»£ç ã€‚</p>
<p>ä¸è¦å¬ä¿¡åå¯¹è€…çš„å£°éŸ³â€”â€”React å¹¶æ²¡æœ‰åœæ»ä¸å‰ï¼Œå®ƒè¿˜åœ¨è¿›åŒ–ï¼Œè€Œä¸”åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå˜å¾—æ›´å¥½ã€‚</p>
<hr/>
<h3 data-id="heading-9">è¯‘è€…è¡¥å……</h3>
<p>ç¿»è¯‘è¿™ç¯‡æ–‡ç« æ˜¯å› ä¸ºå®ƒæŠŠ <code>useEffect</code> ä¾èµ–æ•°ç»„çš„ç—›ç‚¹è®²å¾—å¾ˆé€å½»ã€‚Cloudflare çš„ä¾‹å­ä¸æ˜¯å±è¨€è€¸å¬ï¼Œæˆ‘è‡ªå·±ä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼çš„é—®é¢˜â€”â€”ä¸€ä¸ªçœ‹èµ·æ¥æ— å®³çš„å¯¹è±¡æ”¾è¿›ä¾èµ–æ•°ç»„ï¼Œç»“æœé¡µé¢å¡æ­»ã€‚</p>
<p>å…³äº <code>useEffectEvent</code>ï¼Œè¡¥å……å‡ ç‚¹ï¼š</p>
<p><strong>ç°çŠ¶</strong>ï¼šå¥½æ¶ˆæ¯æ˜¯ï¼Œ<code>useEffectEvent</code> åœ¨ React 19.2ï¼ˆ2025 å¹´ 10 æœˆå‘å¸ƒï¼‰ä¸­å·²ç»æ˜¯<strong>ç¨³å®š API</strong> äº†ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffectEvent } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
</code></pre>
<p>å¦‚æœä½ è¿˜åœ¨ç”¨ React 19.2 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œéœ€è¦ç”¨å®éªŒå‰ç¼€ï¼š<code>experimental_useEffectEvent</code>ã€‚å‡çº§åˆ° 19.2+ åè®°å¾—å»æ‰å‰ç¼€ã€‚</p>
<p>å¦å¤–ï¼ŒESLint æ’ä»¶ä¹Ÿéœ€è¦å‡çº§åˆ° <code>eslint-plugin-react-hooks@6</code>ï¼Œè¿™æ · linter æ‰èƒ½æ­£ç¡®è¯†åˆ« <code>useEffectEvent</code> è¿”å›çš„å‡½æ•°ä¸éœ€è¦åŠ å…¥ä¾èµ–æ•°ç»„ã€‚</p>
<p><strong>åŸç†æ˜¯ä»€ä¹ˆ</strong>ï¼šè¦ç†è§£ <code>useEffectEvent</code>ï¼Œå¾—å…ˆæ˜ç™½è¿‡æœŸé—­åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ã€‚</p>
<p>JavaScript çš„å‡½æ•°ä¼š"è®°ä½"åˆ›å»ºæ—¶çš„è¯æ³•ç¯å¢ƒï¼Œè¿™å°±æ˜¯é—­åŒ…ã€‚å½“ä½ å†™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userName); <span class="hljs-comment">// é—­åŒ…æ•è·äº† userName</span>
}, []);
</code></pre>
<p>è¿™ä¸ªç®­å¤´å‡½æ•°åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶åˆ›å»ºï¼Œå®ƒæ•è·çš„ <code>userName</code> æ˜¯å½“æ—¶çš„å€¼ã€‚ç”±äºä¾èµ–æ•°ç»„æ˜¯ç©ºçš„ï¼Œè¿™ä¸ªå‡½æ•°ä¸ä¼šé‡æ–°åˆ›å»ºï¼Œæ‰€ä»¥å®ƒæ°¸è¿œåªèƒ½è®¿é—®åˆ°æ—§å€¼ã€‚</p>
<p><code>useRef</code> çš„è§£å†³æ€è·¯æ˜¯ï¼šä¸è®©é—­åŒ…ç›´æ¥æ•è·å€¼ï¼Œè€Œæ˜¯æ•è·ä¸€ä¸ª"å®¹å™¨"ï¼ˆrefï¼‰ï¼Œç„¶åæ¯æ¬¡æ¸²æŸ“æ—¶æ›´æ–°å®¹å™¨é‡Œçš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> nameRef = <span class="hljs-title function_">useRef</span>(userName);
nameRef.<span class="hljs-property">current</span> = userName; <span class="hljs-comment">// æ¯æ¬¡æ¸²æŸ“éƒ½æ›´æ–°</span>

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nameRef.<span class="hljs-property">current</span>); <span class="hljs-comment">// é—­åŒ…æ•è·çš„æ˜¯ ref å¯¹è±¡ï¼Œè¯»å–æ—¶æ‹¿åˆ°æœ€æ–°å€¼</span>
}, []);
</code></pre>
<p><strong><code>useEffectEvent</code> æœ¬è´¨ä¸Šæ˜¯ React å¸®ä½ åšäº†è¿™å¥—äº‹æƒ…</strong>ï¼Œä½†æ›´ä¼˜é›…ï¼š</p>
<ol>
<li>å®ƒè¿”å›çš„å‡½æ•°<strong>å¼•ç”¨æ˜¯ç¨³å®šçš„</strong>â€”â€”æ¯æ¬¡æ¸²æŸ“è¿”å›çš„éƒ½æ˜¯åŒä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ å…¥ä¾èµ–æ•°ç»„</li>
<li>ä½†è¿™ä¸ªå‡½æ•°<strong>å†…éƒ¨èƒ½è®¿é—®åˆ°æœ€æ–°çš„ props/state</strong>â€”â€”React åœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªç±»ä¼¼ ref çš„æœºåˆ¶ï¼Œæ¯æ¬¡æ¸²æŸ“æ—¶æ›´æ–°å‡½æ•°è¦è®¿é—®çš„å€¼</li>
</ol>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º React å®˜æ–¹æä¾›çš„ <code>useRef</code> + "è‡ªåŠ¨åŒæ­¥" çš„å°è£…ï¼Œåªæ˜¯è¯­ä¹‰æ›´æ¸…æ™°ï¼šè¿™æ˜¯ä¸€ä¸ª"äº‹ä»¶"ï¼Œå®ƒæè¿°çš„æ˜¯"å‘ç”ŸæŸäº‹æ—¶è¦åšä»€ä¹ˆ"ï¼Œè€Œä¸æ˜¯ effect æœ¬èº«çš„é€»è¾‘ã€‚</p>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨</strong>ï¼šæ–‡ç« é‡Œçš„ä¾‹å­æ˜¯è®¡æ—¶å™¨ï¼Œä½†æ›´å¸¸è§çš„åœºæ™¯æ˜¯åŸ‹ç‚¹ã€‚æ¯”å¦‚é¡µé¢åŠ è½½æ—¶å‘é€ä¸€æ¬¡åŸ‹ç‚¹ï¼ŒåŸ‹ç‚¹æ•°æ®é‡Œæœ‰ç”¨æˆ·ä¿¡æ¯ã€é¡µé¢å‚æ•°ç­‰ã€‚è¿™äº›æ•°æ®å¯èƒ½ä¼šå˜ï¼Œä½†ä½ ä¸å¸Œæœ›å®ƒä»¬å˜åŒ–æ—¶é‡æ–°è§¦å‘åŸ‹ç‚¹â€”â€”è¿™æ­£æ˜¯ <code>useEffectEvent</code> çš„å…¸å‹ç”¨ä¾‹ã€‚</p>
<p><strong>è¿˜æ²¡å‡çº§ React 19 æ€ä¹ˆåŠ</strong>ï¼šå¦‚æœé¡¹ç›®è¿˜åœ¨ React 18ï¼Œæ–‡ç« é‡Œçš„ <code>useRef</code> æ–¹æ¡ˆæ˜¯é è°±çš„ã€‚ç¤¾åŒºä¹Ÿæœ‰ä¸€äº›å°è£…å¥½çš„ Hookï¼Œæ¯”å¦‚ ahooks çš„ <code>useMemoizedFn</code>ï¼Œæ€è·¯ç±»ä¼¼ã€‚</p>
<p><strong>é…åˆ React Compiler</strong>ï¼šReact Compiler èƒ½è‡ªåŠ¨æ¨æ–­ä¾èµ–ï¼Œé…åˆ <code>useEffectEvent</code> æ•ˆæœæ›´å¥½ã€‚ä¸¤è€…éƒ½æ˜¯ React å›¢é˜Ÿä¸ºäº†è§£å†³ <code>useEffect</code> å¿ƒæ™ºè´Ÿæ‹…è€Œæ¨å‡ºçš„æ–¹æ¡ˆï¼Œå¯ä»¥å…³æ³¨ä¸€ä¸‹è¿™ä¸ªç»„åˆã€‚</p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i" target="_blank" title="https://github.com/tt-a1i" ref="nofollow noopener noreferrer">GitHub</a>ï¼Œä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›å¼€æºé¡¹ç›®ï¼š</p>
<p><strong>Claude Code Skills</strong>ï¼ˆæŒ‰éœ€åŠ è½½ï¼Œæ„å›¾è‡ªåŠ¨è¯†åˆ«ï¼Œä¸æµªè´¹ tokenï¼Œ<a href="https://juejin.cn/post/7578714735307735066" target="_blank" title="https://juejin.cn/post/7578714735307735066">ä»‹ç»æ–‡ç« </a>ï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill</a> - ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œè¦†ç›– React 19ã€Vue 3ã€TypeScriptã€Rust ç­‰çº¦ 9000 è¡Œè§„åˆ™ï¼ˆ<a href="https://juejin.cn/post/7578709098255908902" target="_blank" title="https://juejin.cn/post/7578709098255908902">è¯¦ç»†ä»‹ç»</a>ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2F5-whys-skill" target="_blank" title="https://github.com/tt-a1i/5-whys-skill" ref="nofollow noopener noreferrer">5-whys-skill</a> - 5 Whys æ ¹å› åˆ†æï¼Œè¯´"æ‰¾æ ¹å› "è‡ªåŠ¨æ¿€æ´»</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Ffirst-principles-skill" target="_blank" title="https://github.com/tt-a1i/first-principles-skill" ref="nofollow noopener noreferrer">first-principles-skill</a> - ç¬¬ä¸€æ€§åŸç†æ€è€ƒï¼Œé€‚åˆæ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹</li>
</ul>
<p><strong>qwen/gemini/claude - cli åŸç†å­¦ä¹ ç½‘ç«™</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcoding-cli-guide" target="_blank" title="https://github.com/tt-a1i/coding-cli-guide" ref="nofollow noopener noreferrer">coding-cli-guide</a>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftt-a1i.github.io%2Fcoding-cli-guide%2F%3Ftab%3Dstart-here" target="_blank" title="https://tt-a1i.github.io/coding-cli-guide/?tab=start-here" ref="nofollow noopener noreferrer">å­¦ä¹ ç½‘ç«™</a>ï¼‰- å­¦ä¹  qwen-cli æ—¶æ•´ç†çš„ç¬”è®°ï¼Œ40+ äº¤äº’å¼åŠ¨ç”»æ¼”ç¤º AI CLI å†…éƒ¨æœºåˆ¶
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08e50020ab1f45428cd22e53af91a555~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768810342&amp;x-signature=54h7uHFgWbKggKJxYtVI2qUgJSs%3D" alt="coding-cli-guide" loading="lazy"/></li>
</ul>
<p><strong>å…¨æ ˆé¡¹ç›®</strong>ï¼ˆé€‚åˆå­¦ä¹ ç°ä»£æŠ€æœ¯æ ˆï¼‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fprompt-vault" target="_blank" title="https://github.com/tt-a1i/prompt-vault" ref="nofollow noopener noreferrer">prompt-vault</a> - Prompt ç®¡ç†å™¨ï¼Œç”¨çš„éƒ½æ˜¯æœ€æ–°çš„æŠ€æœ¯æ ˆï¼Œé€‚åˆç”¨æ¥å­¦ä¹ äº†è§£æœ€æ–°çš„å‰ç«¯å…¨æ ˆå¼€å‘èŒƒå¼ï¼šNext.js 15 + React 19 + tRPC 11 + Supabase å…¨æ ˆç¤ºä¾‹ï¼Œclone ä¸‹æ¥é…ä¸ªå…è´¹ Supabase å°±èƒ½è·‘</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">chat_edit</a> - åŒæ¨¡å¼ AI åº”ç”¨ï¼ˆèŠå¤©+å¯Œæ–‡æœ¬ç¼–è¾‘ï¼‰ï¼ŒVue 3.5 + TypeScript + Vite 5 + Quill 2.0 + IndexedDB</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uni-appå®ç°ç½‘ç»œç¦»çº¿å®šä½]]></title>    <link>https://juejin.cn/post/7593892837898747919</link>    <guid>https://juejin.cn/post/7593892837898747919</guid>    <pubDate>2026-01-12T06:43:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593892837898747919" data-draft-id="7594051966888902691" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uni-appå®ç°ç½‘ç»œç¦»çº¿å®šä½"/> <meta itemprop="keywords" content="å‰ç«¯,Trae"/> <meta itemprop="datePublished" content="2026-01-12T06:43:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æå‰‘ä¸€"/> <meta itemprop="url" content="https://juejin.cn/user/4147782344247918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uni-appå®ç°ç½‘ç»œç¦»çº¿å®šä½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4147782344247918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æå‰‘ä¸€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T06:43:54.000Z" title="Mon Jan 12 2026 06:43:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç†Ÿæ‚‰çš„æœ‹å‹çŸ¥é“æˆ‘æœ€è¿‘ä¸€æ®µæ—¶é—´åœ¨æå®‰å“æ–¹é¢çš„å†…å®¹ï¼Œä½¿ç”¨uni-appå¼€å‘çš„è¿™æ®µæ—¶é—´æ€»ç®—æ˜¯ä½“ä¼šåˆ°äº†ç½‘ä¸Šå…„å¼Ÿä»¬çš„å¿ƒå£°ã€‚</p>
<p>æ€ä¹ˆè¯´å‘¢ï¼Ÿ<strong>éš¾ä»¥è¨€å–»</strong>ï¼</p>
<p>æƒ³è¦æ— èƒ½ç‹‚æ€’çš„å±éª‚ï¼Œå´åˆä¸å¾—ä¸é»˜é»˜çš„ç¿»çœ‹APIæ–‡æ¡£ä¸€ç‚¹ç‚¹çš„æ‘¸ç´¢ï¼Œæ‰¾åˆ°è§£å†³ä¹‹è·¯çš„é‚£ä¸€åˆ»ï¼Œä¸äºšäºæˆ‘ä¹°åŒè‰²çƒä¸­<strong>äº”å—é’±</strong>å¤§å¥–çš„é‚£å¤©å¿ƒæƒ…ã€‚</p>
<p>æœ€è¿‘éœ€è¦ç”¨uni-appå®ç°ä¸€ä¸‹å®šä½çš„é—®é¢˜ï¼Œå…¶å®å°±æ˜¯è·å–ç»çº¬åº¦ï¼Œç„¶åé€šè¿‡ MQTT å‘é€åˆ°æœåŠ¡å™¨ä¸Šã€‚ï¼ˆå…³äºMQTTéƒ¨åˆ†è¯¦è§ä¸Šæ–‡ <a href="https://juejin.cn/post/7593165280488931369" target="_blank" title="https://juejin.cn/post/7593165280488931369"># uni-appå®ç°æœ¬åœ°MQTTè¿æ¥</a>ï¼‰</p>
<p>æ¥åˆ°è¿™ä¸ªéœ€æ±‚çš„æ—¶å€™æ„Ÿè§‰éå¸¸ç®€å•ï¼Œå› ä¸º uni-app æœ¬èº«å°±æœ‰å®šä½çš„APIã€‚</p>
<pre><code class="hljs language-js" lang="js">uni.<span class="hljs-title function_">getLocation</span>({
	<span class="hljs-attr">type</span>: <span class="hljs-string">'wgs84'</span>,
	<span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) {
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ä½ç½®çš„ç»åº¦ï¼š'</span> + res.<span class="hljs-property">longitude</span>);
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ä½ç½®çš„çº¬åº¦ï¼š'</span> + res.<span class="hljs-property">latitude</span>);
	}
});
</code></pre>
<p>ä¸€æ®µä»£ç æå®šé—®é¢˜ï¼Œä½†æ˜¯ï¼Œé¡¹ç›®é‚£è¾¹çªç„¶ä¼ æ¥æ¶ˆæ¯è¯´ï¼š<strong>å®šä½ä¸åˆ°</strong>ã€‚</p>
<p>æˆ‘è¿™è¾¹ä½¿ç”¨ <strong>Trae</strong> ç´§æ€¥æ’æŸ¥ï¼Œä½†æ˜¯å´æ²¡å‘ç°ä»»ä½•é—®é¢˜ï¼Œ<strong>Trae</strong> ä¹Ÿè¡¨ç¤ºç³»ç»Ÿè¿è¡Œéå¸¸ç¨³å®šã€‚</p>
<p>ä½†æ˜¯é¡¹ç›®ç°åœºå°±æ˜¯åé¦ˆå®šä½ä¸åˆ°ï¼Œä¸€ä¸‹åˆçš„æ—¶é—´ <strong>Trae</strong> å»ºè®®æˆ‘æ’æŸ¥äº†è®¾å¤‡æœ¬èº«ã€å®‰å“ç‰ˆæœ¬ã€ä»£ç è¯­æ³•ã€æ‰“åŒ…è¿‡ç¨‹ç­‰ç­‰ã€‚ç»è¿‡ä¸€ä¸‹åˆçš„æ’æŸ¥ç»ˆäºç¡®å®šäº†åŸå› æ˜¯"<strong>æ²¡è”ç½‘</strong>"ã€‚</p>
<p>æ°”å¾—æˆ‘å½“åœºæ€’éª‚...</p>
<p>ç°åœ¨éœ€æ±‚ç¡®å®šæ¸…æ¥šäº†ï¼š<strong>ç¦»çº¿å®šä½</strong>ã€‚</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œè™½ç„¶è®¾å¤‡ä¸æ¥å…¥ç½‘ç»œï¼Œä½†äº‹å®å®šä½æœ¬èº«æ˜¯ä¾èµ–äºæ¥æ”¶å«æ˜Ÿä¿¡å·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡ç½‘å¯ä»¥ï¼Œä½†æ˜¯è®¾å¤‡å¿…é¡»æœ‰<strong>GPSå®šä½æ¨¡å—</strong>ï¼Œå¦åˆ™æ˜¯æ— æ³•å®ç°å®šä½çš„ã€‚</p>
<p>é¦–å…ˆåœ¨ <code>manifest.json</code> æ–‡ä»¶ä¸­æ‰¾åˆ° <code>modules</code>ï¼Œåœ¨ä¸‹é¢æ·»åŠ  <code>Geolocation</code> å¯ç”¨å®šä½æ¨¡å—ã€‚</p>
<p>åŒæ—¶åœ¨ <code>distribute / android / permissions</code> æƒé™éƒ¨åˆ†å¢åŠ å®šä½æƒé™éƒ¨åˆ†ã€‚</p>
<p>è¿˜éœ€è¦åœ¨ SDK é…ç½®éƒ¨åˆ†å¢åŠ å®šä½å†…å®¹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"modules"</span> : {
    <span class="hljs-string">"Geolocation"</span> : {} <span class="hljs-comment">// å¯ç”¨å®šä½æ¨¡å—</span>
},
<span class="hljs-comment">/* åº”ç”¨å‘å¸ƒä¿¡æ¯ */</span>
<span class="hljs-string">"distribute"</span> : {
    <span class="hljs-comment">/* androidæ‰“åŒ…é…ç½® */</span>
    <span class="hljs-string">"android"</span> : {
        <span class="hljs-string">"permissions"</span> : [
            ...
            <span class="hljs-string">"&lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/&gt;"</span>,
            <span class="hljs-string">"&lt;uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\"/&gt;"</span>
        ]
    },
},
<span class="hljs-comment">/* SDKé…ç½® */</span>
<span class="hljs-string">"sdkConfigs"</span> : {
    <span class="hljs-string">"geolocation"</span> : {
        <span class="hljs-string">"system"</span> : {
            <span class="hljs-string">"__platform__"</span> : [ <span class="hljs-string">"android"</span> ]
        }
    }
}
</code></pre>
<p>æˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°çš„æ–¹æ¡ˆæ˜¯ä»ç„¶ä½¿ç”¨ uni-app çš„ <code>getLocation</code> æ–¹æ³•ï¼Œå°†è¯·æ±‚æ–¹å¼æ”¹ä¸º <code>gcj02</code> çš„æ–¹å¼ã€‚</p>
<pre><code class="hljs language-js" lang="js">uni.<span class="hljs-title function_">getLocation</span>({
	<span class="hljs-attr">type</span>: <span class="hljs-string">'gcj02'</span>,
	<span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) {
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ä½ç½®çš„ç»åº¦ï¼š'</span> + res.<span class="hljs-property">longitude</span>);
		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ä½ç½®çš„çº¬åº¦ï¼š'</span> + res.<span class="hljs-property">latitude</span>);
	}
});
</code></pre>
<p>ä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨æˆ‘è¿™ä¸ªç»ˆç«¯ä¸Šè¿™ä¸ªå†™æ³•å¹¶æ²¡æœ‰è·å–åˆ°å®šä½ä¿¡æ¯ï¼Œç”šè‡³ä»£ç éƒ½ä¸èµ°ï¼Œå¤šæ–¹æ’æŸ¥ä¹Ÿæ²¡æœ‰å‘ç°é—®é¢˜å‡ºåœ¨å“ªå„¿ï¼Œé‚æ”¾å¼ƒæ­¤æ–¹æ¡ˆã€‚</p>
<p>åœ¨ <strong>Trae</strong> çš„å»ºè®®ä¸‹æ”¹ä¸ºä½¿ç”¨ <code>html+</code> çš„å®šä½æ–¹æ¡ˆã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">testGetLocation</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span>;
    <span class="hljs-comment">// #ifdef APP-PLUS</span>
    plus.<span class="hljs-property">geolocation</span>.<span class="hljs-title function_">getCurrentPosition</span>(
        <span class="hljs-function">(<span class="hljs-params">position</span>) =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ã€å®šä½æˆåŠŸã€‘'</span>, position);
            that.<span class="hljs-property">location</span> = {
                <span class="hljs-attr">latitude</span>: position.<span class="hljs-property">coords</span>.<span class="hljs-property">latitude</span>,
                <span class="hljs-attr">longitude</span>: position.<span class="hljs-property">coords</span>.<span class="hljs-property">longitude</span>
            };
        },
        <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ã€å®šä½å¤±è´¥ã€‘'</span>, error);
            <span class="hljs-keyword">let</span> msg = <span class="hljs-string">'å®šä½å¤±è´¥'</span>;
            <span class="hljs-keyword">switch</span> (error.<span class="hljs-property">code</span>) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    msg = <span class="hljs-string">'ç”¨æˆ·æ‹’ç»å®šä½æˆæƒ'</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    msg = <span class="hljs-string">'GPS åŠŸèƒ½æœªå¼€å¯'</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                    msg = <span class="hljs-string">'å“åº”è¶…æ—¶'</span>;
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-attr">default</span>:
                    msg = <span class="hljs-string">'æœªçŸ¥é”™è¯¯'</span>;
            }
        }, {
            <span class="hljs-attr">provider</span>: <span class="hljs-string">'gps'</span>,    <span class="hljs-comment">// å¼ºåˆ¶ä½¿ç”¨ GPS å®šä½</span>
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">30000</span>,     <span class="hljs-comment">// æœ€å¤§30ç§’è¶…æ—¶</span>
            <span class="hljs-attr">highAccuracy</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨é«˜ç²¾åº¦æ¨¡å¼</span>
            <span class="hljs-attr">maximumAge</span>: <span class="hljs-number">0</span>       <span class="hljs-comment">// ä¸ä½¿ç”¨ç¼“å­˜ä½ç½®</span>
        }
    );
    <span class="hljs-comment">// #endif</span>
},
</code></pre>
<p>é‡‡ç”¨è¿™ä¸ªæ–¹æ¡ˆæˆåŠŸè·å–åˆ°äº†å®šä½ä¿¡æ¯ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ä¸¤ä¸ªç‚¹ï¼š</p>
<ol>
<li>å¿…é¡»è·å¾—ç”¨æˆ·<strong>æˆæƒ</strong>ï¼Œå°¤å…¶æ˜¯åœ¨é«˜ç‰ˆæœ¬å®‰å“ç³»ç»Ÿä¸­ã€‚ï¼ˆæœ¬äººé‡‡ç”¨çš„æ˜¯å®‰å“11åŠä»¥ä¸‹çš„è®¾å¤‡ï¼‰</li>
<li>è®¾å¤‡å°½é‡åœ¨<strong>æˆ·å¤–</strong>ä½¿ç”¨ï¼ˆGPSå®šä½åœ¨å®¤å†…å¾ˆå®¹æ˜“å®šä½ä¸åˆ°ï¼‰</li>
</ol>
<p>æˆæƒéƒ¨åˆ†å¯ä»¥å‚è€ƒå¦‚ä¸‹æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">getLocationSafely</span>(<span class="hljs-params">onSuccess, onError</span>) {
    <span class="hljs-keyword">let</span> that = <span class="hljs-variable language_">this</span>;
    plus.<span class="hljs-property">geolocation</span>.<span class="hljs-title function_">getCurrentPosition</span>(
        <span class="hljs-function">() =&gt;</span> {},
        <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (e.<span class="hljs-property">code</span> === <span class="hljs-number">4</span>) {
                <span class="hljs-comment">// ä½ç½®æœåŠ¡æœªå¼€å¯</span>
                uni.<span class="hljs-title function_">showModal</span>({
                    <span class="hljs-attr">title</span>: <span class="hljs-string">'å®šä½æœåŠ¡æœªå¼€å¯'</span>,
                    <span class="hljs-attr">content</span>: <span class="hljs-string">'è¯·å‰å¾€ç³»ç»Ÿè®¾ç½®å¼€å¯ä½ç½®ä¿¡æ¯ï¼Œæ‰èƒ½è·å–å½“å‰ä½ç½®'</span>,
                    <span class="hljs-attr">showCancel</span>: <span class="hljs-literal">true</span>,
                    <span class="hljs-attr">confirmText</span>: <span class="hljs-string">'å»è®¾ç½®'</span>,
                    <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
                        <span class="hljs-keyword">if</span> (res.<span class="hljs-property">confirm</span>) {
                            <span class="hljs-comment">// è·³è½¬åˆ°ç³»ç»Ÿè®¾ç½®</span>
                            plus.<span class="hljs-property">runtime</span>.<span class="hljs-title function_">openURL</span>(<span class="hljs-string">'package:com.android.settings'</span>);
                        }
                    }
                });
                onError?.(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç³»ç»Ÿå®šä½æœªå¼€å¯'</span>));
                <span class="hljs-keyword">return</span>;
            }
        }, {
            <span class="hljs-comment">// 3ç§’è¶…æ—¶</span>
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">3000</span>
        }
    );
},
</code></pre>
<p>è¿˜éœ€è¦æ³¨æ„çš„ä¸€ä¸ªç‚¹æ˜¯å¦‚æœé‡‡ç”¨<strong>è‡ªå®šä¹‰åŸºåº§</strong>ï¼Œä¸€å®šè¦è®°å¾—å°†<strong>å®šä½æ¨¡å—</strong>äº‘æ‰“åŒ…åˆ°åŸºåº§ä¸­ï¼Œå¦åˆ™ä¹Ÿæ˜¯æ— æ³•å®šä½çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†ææ··äº†ï¼127.0.0.1 å’Œ localhost èƒŒåçš„ç§˜å¯†]]></title>    <link>https://juejin.cn/post/7593943464052981770</link>    <guid>https://juejin.cn/post/7593943464052981770</guid>    <pubDate>2026-01-12T01:21:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593943464052981770" data-draft-id="7593943464052965386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†ææ··äº†ï¼127.0.0.1 å’Œ localhost èƒŒåçš„ç§˜å¯†"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-12T01:21:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰è¿½æ±‚çš„å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/1310273591851159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†ææ··äº†ï¼127.0.0.1 å’Œ localhost èƒŒåçš„ç§˜å¯†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1310273591851159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰è¿½æ±‚çš„å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T01:21:01.000Z" title="Mon Jan 12 2026 01:21:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    72
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åˆ«å†ææ··äº†ï¼127.0.0.1 å’Œ localhost èƒŒåçš„ç§˜å¯†</h2>
<p>ä½œä¸ºä¸€å <strong>è½¯ä»¶å¼€å‘è€…</strong>ï¼Œä½ å¯èƒ½åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ— æ•°æ¬¡ä½¿ç”¨è¿‡<code>127.0.0.1</code>å’Œ<code>localhost</code>ã€‚å®ƒä»¬çœ‹èµ·æ¥ä¼¼ä¹æ˜¯åŒä¸€ä¸ªä¸œè¥¿çš„ä¸åŒå†™æ³•ï¼Œä½†å½“é¢è¯•å®˜æŠ›å‡ºè¿™ä¸ªé—®é¢˜æ—¶ï¼Œä½ èƒ½æ¸…æ™°åœ°è¯´å‡ºå®ƒä»¬çš„åŒºåˆ«å—ï¼Ÿ</p>
<p>è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„é—®é¢˜ï¼Œå®é™…ä¸Šæ¶‰åŠäº†ç½‘ç»œåè®®ã€DNS è§£æã€æ“ä½œç³»ç»Ÿåº•å±‚æœºåˆ¶ç­‰å¤šä¸ªçŸ¥è¯†ç‚¹ã€‚è®©æˆ‘ä»¬æ·±å…¥æ¢è®¨ä¸€ä¸‹ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æœ¬è´¨åŒºåˆ«ï¼šIP åœ°å€ vs ä¸»æœºå</h3>
<p>é¦–å…ˆè¦æ˜ç¡®çš„æ˜¯ï¼Œ<code>127.0.0.1</code>å’Œ<code>localhost</code>åœ¨æœ¬è´¨ä¸Šå±äºä¸åŒçš„æ¦‚å¿µï¼š</p>
<p><strong>127.0.0.1</strong>æ˜¯ä¸€ä¸ªå®å®åœ¨åœ¨çš„ IPv4 åœ°å€ï¼Œå±äºå›ç¯åœ°å€ï¼ˆLoopback Addressï¼‰çš„ä¸€éƒ¨åˆ†ã€‚æ•´ä¸ª<code>127.0.0.0/8</code>ç½‘æ®µï¼ˆå³ 127.0.0.1 åˆ° 127.255.255.254ï¼‰éƒ½è¢«ä¿ç•™ç”¨äºå›ç¯æµ‹è¯•ï¼Œä½†æˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±æ˜¯<code>127.0.0.1</code>ã€‚</p>
<p><strong>localhost</strong>åˆ™æ˜¯ä¸€ä¸ªä¸»æœºåï¼ˆhostnameï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªéœ€è¦é€šè¿‡ DNS è§£ææˆ–è€…æœ¬åœ° hosts æ–‡ä»¶æ˜ å°„æ‰èƒ½è½¬æ¢ä¸º IP åœ°å€çš„ç¬¦å·åç§°ã€‚å°±åƒ<code>www.google.com</code>éœ€è¦è§£æä¸ºå…·ä½“çš„ IP åœ°å€ä¸€æ ·ï¼Œ<code>localhost</code>ä¹Ÿéœ€è¦è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼Œ<code>127.0.0.1</code>å°±åƒæ˜¯ä½ å®¶çš„ GPS åæ ‡ï¼Œè€Œ<code>localhost</code>åˆ™æ˜¯"æˆ‘å®¶"è¿™ä¸ªç§°å‘¼ã€‚åæ ‡æ˜¯å›ºå®šçš„ã€æ˜ç¡®çš„ï¼Œä½†"æˆ‘å®¶"è¿™ä¸ªç§°å‘¼éœ€è¦å…ˆçŸ¥é“å®ƒæŒ‡å‘å“ªä¸ªåæ ‡æ‰èƒ½æ‰¾åˆ°ã€‚</p>
<h3 data-id="heading-2">äºŒã€DNS è§£æï¼šä¸€ä¸ªé¢å¤–çš„æ­¥éª¤</h3>
<p>å½“ä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>http://localhost:8000</code>æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šè¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>æ£€æŸ¥æœ¬åœ° hosts æ–‡ä»¶ï¼ˆåœ¨ Linux/Mac æ˜¯<code>/etc/hosts</code>ï¼ŒWindows æ˜¯<code>C:\Windows\System32\drivers\etc\hosts</code>ï¼‰</li>
<li>æŸ¥æ‰¾<code>localhost</code>å¯¹åº”çš„ IP åœ°å€</li>
<li>é€šå¸¸ä¼šæ‰¾åˆ°ç±»ä¼¼è¿™æ ·çš„é…ç½®ï¼š</li>
</ol>
<pre><code class="hljs language-makefile" lang="makefile">127.0.0.1Â Â Â Â Â Â Â localhost
<span class="hljs-section">::1Â Â Â Â Â Â Â Â Â Â Â Â Â localhost</span>
</code></pre>
<ol start="4">
<li>å°†<code>localhost</code>è§£æä¸º<code>127.0.0.1</code>ï¼ˆIPv4ï¼‰æˆ–<code>::1</code>ï¼ˆIPv6ï¼‰</li>
<li>æœ€åä½¿ç”¨è§£æå‡ºçš„ IP åœ°å€å»ºç«‹è¿æ¥</li>
</ol>
<p>è€Œå½“ä½ ç›´æ¥ä½¿ç”¨<code>http://127.0.0.1:8000</code>æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šè·³è¿‡ DNS è§£ææ­¥éª¤ï¼Œç›´æ¥ä½¿ç”¨è¿™ä¸ª IP åœ°å€å»ºç«‹è¿æ¥ã€‚</p>
<p>è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿåœ¨æ€§èƒ½ä¸Šï¼Œç›´æ¥ä½¿ç”¨ IP åœ°å€ä¼šç•¥å¾®å¿«ä¸€ç‚¹ç‚¹ï¼ˆè™½ç„¶è¿™ä¸ªå·®å¼‚åœ¨æœ¬åœ°å›ç¯ä¸­å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼‰ã€‚ä½†æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœä½ çš„ hosts æ–‡ä»¶è¢«ä¿®æ”¹æˆ–æŸåï¼Œ<code>localhost</code>å¯èƒ½æ— æ³•æ­£å¸¸è§£æï¼Œè€Œ<code>127.0.0.1</code>ä¾ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€ç½‘ç»œåè®®å±‚é¢çš„å·®å¼‚</h3>
<p>è®©æˆ‘ä»¬ä» OSI ä¸ƒå±‚æ¨¡å‹æˆ– TCP/IP å››å±‚æ¨¡å‹çš„è§’åº¦æ¥çœ‹è¿™ä¸ªé—®é¢˜ï¼š</p>
<p><strong>ä½¿ç”¨ 127.0.0.1 æ—¶çš„æ•°æ®æµå‘ï¼š</strong></p>
<ul>
<li>åº”ç”¨å±‚ï¼šä½ çš„ Python Flask åº”ç”¨å‘é€ HTTP è¯·æ±‚</li>
<li>ä¼ è¾“å±‚ï¼šTCP åè®®å¤„ç†ç«¯å£å’Œè¿æ¥</li>
<li>ç½‘ç»œå±‚ï¼šIP åè®®å‘ç°ç›®æ ‡æ˜¯<code>127.0.0.1</code>ï¼Œè¯†åˆ«ä¸ºå›ç¯åœ°å€</li>
<li>æ•°æ®åŒ…ç›´æ¥åœ¨ç½‘ç»œå±‚è¢«å›ç¯ï¼Œä¸ç»è¿‡æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚</li>
<li>æ•°æ®ä¸ä¼šçœŸæ­£å‘é€åˆ°ç½‘å¡ï¼Œè€Œæ˜¯åœ¨å†…æ ¸ä¸­è¢«è·¯ç”±å›æ¥</li>
</ul>
<p><strong>ä½¿ç”¨ localhost æ—¶çš„æ•°æ®æµå‘ï¼š</strong></p>
<ul>
<li>é¦–å…ˆåœ¨åº”ç”¨å±‚éœ€è¦ç»è¿‡åŸŸåè§£æï¼ˆè¿™å®é™…ä¸Šæ¶‰åŠåˆ°åº”ç”¨å±‚çš„ DNS åè®®ï¼Œè™½ç„¶åœ¨æœ¬åœ°æ˜¯æŸ¥è¯¢ hosts æ–‡ä»¶ï¼‰</li>
<li>è§£æå®Œæˆåï¼Œæµç¨‹ä¸ä¸Šé¢ç›¸åŒ</li>
</ul>
<p>å…³é”®ç‚¹åœ¨äºï¼šæ— è®ºä½¿ç”¨å“ªä¸ªï¼Œæ•°æ®åŒ…éƒ½ä¸ä¼šçœŸæ­£ç¦»å¼€ä½ çš„è®¡ç®—æœºï¼Œä¸ä¼šç»è¿‡ç‰©ç†ç½‘å¡ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨æ–­ç½‘çš„æƒ…å†µä¸‹æ­£å¸¸ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h3 data-id="heading-4">å››ã€IPv4 ä¸ IPv6 çš„è€ƒé‡</h3>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå¤šå¼€å‘è€…å®¹æ˜“å¿½ç•¥çš„ç»†èŠ‚ï¼š</p>
<p>å½“ä½ ä½¿ç”¨<code>localhost</code>æ—¶ï¼Œæ ¹æ®ç³»ç»Ÿé…ç½®å’Œåº”ç”¨ç¨‹åºçš„å®ç°ï¼Œå®ƒå¯èƒ½è¢«è§£æä¸ºï¼š</p>
<ul>
<li><code>127.0.0.1</code>ï¼ˆIPv4ï¼‰</li>
<li><code>::1</code>ï¼ˆIPv6ï¼‰</li>
<li>æˆ–è€…ä¸¤è€…éƒ½å°è¯•</li>
</ul>
<p>ä¾‹å¦‚åœ¨ Python ä¸­ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">importÂ <span class="hljs-keyword">socket</span>

<span class="hljs-comment">#Â è¿™å¯èƒ½è¿”å›IPv4æˆ–IPv6åœ°å€ï¼Œå–å†³äºç³»ç»Ÿé…ç½®</span>
socket.getaddrinfo(<span class="hljs-string">'localhost'</span>,Â <span class="hljs-number">8000</span>)

<span class="hljs-comment">#Â è¿™æ˜ç¡®ä½¿ç”¨IPv4</span>
socket.getaddrinfo(<span class="hljs-string">'127.0.0.1'</span>,Â <span class="hljs-number">8000</span>)
</code></pre>
<p>å¦‚æœä½ çš„åº”ç”¨ç¨‹åºåªç›‘å¬ IPv4 åœ°å€ï¼ˆæ¯”å¦‚åœ¨ Flask ä¸­ä½¿ç”¨<code>app.run(host='127.0.0.1')</code>ï¼‰ï¼Œè€Œç³»ç»Ÿå°†<code>localhost</code>è§£æä¸º IPv6 çš„<code>::1</code>ï¼Œè¿æ¥å°±ä¼šå¤±è´¥ã€‚è¿™æ˜¯å¾ˆå¤šåˆå­¦è€…é‡åˆ°çš„"æ˜æ˜ç¨‹åºåœ¨è¿è¡Œï¼Œä½†å°±æ˜¯è¿ä¸ä¸Š"çš„å¸¸è§åŸå› ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-5">äº”ã€å®‰å…¨æ€§è€ƒè™‘</h3>
<p>ä»å®‰å…¨è§’åº¦æ¥è¯´ï¼Œä¸¤è€…ä¹Ÿæœ‰ç»†å¾®å·®åˆ«ï¼š</p>
<p>ä½¿ç”¨<code>127.0.0.1</code>æ—¶ï¼Œä½ æ˜ç¡®çŸ¥é“æµé‡åªä¼šåœ¨æœ¬åœ°å›ç¯ï¼Œä¸ä¼šæœ‰ä»»ä½•å¯èƒ½è¢«é”™è¯¯è·¯ç”±åˆ°å¤–éƒ¨ç½‘ç»œçš„é£é™©ã€‚</p>
<p>è€Œ<code>localhost</code>ä¾èµ–äºæœ¬åœ°è§£æé…ç½®ï¼Œç†è®ºä¸Šå­˜åœ¨è¢«ç¯¡æ”¹çš„å¯èƒ½æ€§ï¼ˆè™½ç„¶è¿™éœ€è¦æ”»å‡»è€…å·²ç»è·å¾—äº†ä¿®æ”¹ hosts æ–‡ä»¶çš„æƒé™ï¼‰ã€‚åœ¨ä¸€äº›å®‰å…¨è¦æ±‚æé«˜çš„åœºæ™¯ä¸­ï¼Œç›´æ¥ä½¿ç”¨ IP åœ°å€ä¼šæ›´ä¿é™©ã€‚</p>
<h3 data-id="heading-6">å…­ã€å®é™…ä½¿ç”¨åœºæ™¯æ¨è</h3>
<p>é‚£ä¹ˆåœ¨å®é™…å¼€å‘ä¸­ï¼Œåº”è¯¥å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ</p>
<p><strong>æ¨èä½¿ç”¨ localhost çš„åœºæ™¯ï¼š</strong></p>
<ol>
<li><strong>å¼€å‘ç¯å¢ƒçš„é…ç½®æ–‡ä»¶</strong>ï¼šä½¿ç”¨<code>localhost</code>è®©é…ç½®æ›´å…·å¯è¯»æ€§ï¼Œä¹Ÿä¾¿äºå°†æ¥å¯èƒ½çš„ IPv6 è¿ç§»</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">DATABASE_URL</span>Â =Â <span class="hljs-string">"postgresql://user:password@localhost:5432/mydb"</span>
</code></pre>
<ol start="2">
<li><strong>æ–‡æ¡£å’Œæ•™ç¨‹</strong>ï¼šå¯¹åˆå­¦è€…æ›´å‹å¥½ï¼Œå«ä¹‰ä¸€ç›®äº†ç„¶</li>
<li><strong>éœ€è¦å…¼å®¹ IPv6 çš„åœºæ™¯</strong>ï¼šè®©ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ IP ç‰ˆæœ¬</li>
</ol>
<p><strong>æ¨èä½¿ç”¨ 127.0.0.1 çš„åœºæ™¯ï¼š</strong></p>
<ol>
<li><strong>æ˜ç¡®éœ€è¦ IPv4 çš„åœºæ™¯</strong>ï¼šé¿å… IPv6 ç›¸å…³çš„æ­§ä¹‰</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">app.run(<span class="hljs-attr">host</span>=<span class="hljs-string">'127.0.0.1'</span>,Â port=<span class="hljs-number">5000</span>)
</code></pre>
<ol start="2">
<li><strong>æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯</strong>ï¼šè™½ç„¶å·®å¼‚å¾®ä¹å…¶å¾®ï¼Œä½†è·³è¿‡è§£ææ­¥éª¤åœ¨ç†è®ºä¸Šæ›´å¿«</li>
<li><strong>æ’æŸ¥ç½‘ç»œé—®é¢˜</strong>ï¼šå½“æ€€ç–‘ DNS æˆ– hosts é…ç½®æœ‰é—®é¢˜æ—¶ï¼Œç›´æ¥ç”¨ IP å¯ä»¥æ’é™¤è¿™ä¸ªå˜é‡</li>
<li><strong>é˜²ç«å¢™æˆ–ç½‘ç»œç­–ç•¥é…ç½®</strong>ï¼šä½¿ç”¨æ˜ç¡®çš„ IP åœ°å€é¿å…æ­§ä¹‰</li>
</ol>
<h3 data-id="heading-7">ä¸ƒã€ä¸€ä¸ªå®é™…çš„ Python ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬ç”¨ä»£ç æ¥æ¼”ç¤ºè¿™äº›å·®å¼‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span>Â socket
<span class="hljs-keyword">import</span>Â time

<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">test_connection</span>(<span class="hljs-params">host,Â port=<span class="hljs-number">8000</span></span>):
Â Â Â Â startÂ =Â time.time()
Â Â Â Â <span class="hljs-keyword">try</span>:
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è·å–åœ°å€ä¿¡æ¯</span>
Â Â Â Â Â Â Â Â addr_infoÂ =Â socket.getaddrinfo(host,Â port)
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{host}</span>Â è§£æç»“æœ:"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â infoÂ <span class="hljs-keyword">in</span>Â addr_info:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Â Â åœ°å€æ—:Â <span class="hljs-subst">{info[<span class="hljs-number">0</span>]}</span>,Â åœ°å€:Â <span class="hljs-subst">{info[<span class="hljs-number">4</span>]}</span>"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å°è¯•è¿æ¥</span>
Â Â Â Â Â Â Â Â sockÂ =Â socket.socket(socket.AF_INET,Â socket.SOCK_STREAM)
Â Â Â Â Â Â Â Â sock.connect((host,Â port))
Â Â Â Â Â Â Â Â sock.close()

Â Â Â Â Â Â Â Â elapsedÂ =Â time.time()Â -Â start
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿æ¥æˆåŠŸï¼Œè€—æ—¶:Â <span class="hljs-subst">{elapsed*<span class="hljs-number">1000</span>:<span class="hljs-number">.2</span>f}</span>ms"</span>)
Â Â Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:
Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿æ¥å¤±è´¥:Â <span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-comment">#Â å…ˆå¯åŠ¨ä¸€ä¸ªç®€å•çš„æœåŠ¡å™¨</span>
<span class="hljs-keyword">from</span>Â http.serverÂ <span class="hljs-keyword">import</span>Â HTTPServer,Â BaseHTTPRequestHandler

<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">SimpleHandler</span>(<span class="hljs-title class_ inherited__">BaseHTTPRequestHandler</span>):
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">do_GET</span>(<span class="hljs-params">self</span>):
Â Â Â Â Â Â Â Â self.send_response(<span class="hljs-number">200</span>)
Â Â Â Â Â Â Â Â self.end_headers()
Â Â Â Â Â Â Â Â self.wfile.write(<span class="hljs-string">b"Hello!"</span>)

<span class="hljs-comment">#Â åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ:Â pythonÂ -mÂ http.serverÂ 8000</span>
<span class="hljs-comment">#Â ç„¶åæµ‹è¯•</span>

test_connection(<span class="hljs-string">'localhost'</span>,Â <span class="hljs-number">8000</span>)
test_connection(<span class="hljs-string">'127.0.0.1'</span>,Â <span class="hljs-number">8000</span>)
</code></pre>
<h3 data-id="heading-8">å…«ã€å¸¸è§é™·é˜±å’Œè°ƒè¯•æŠ€å·§</h3>
<p>æœ€åï¼Œåˆ†äº«å‡ ä¸ªä¸è¿™ä¸ªä¸»é¢˜ç›¸å…³çš„å¸¸è§é™·é˜±ï¼š</p>
<p><strong>é™·é˜± 1ï¼šç›‘å¬åœ°å€é”™è¯¯</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â åªç›‘å¬127.0.0.1ï¼Œä»å…¶ä»–æœºå™¨æ— æ³•è®¿é—®</span>
app.run(<span class="hljs-attr">host</span>=<span class="hljs-string">'127.0.0.1'</span>)

<span class="hljs-comment">#Â ç›‘å¬æ‰€æœ‰åœ°å€ï¼ŒåŒ…æ‹¬å¤–éƒ¨ç½‘ç»œ</span>
app.run(<span class="hljs-attr">host</span>=<span class="hljs-string">'0.0.0.0'</span>)
</code></pre>
<p><strong>é™·é˜± 2ï¼šDocker å®¹å™¨ä¸­çš„ localhost</strong> åœ¨ Docker å®¹å™¨ä¸­ï¼Œ<code>localhost</code>æŒ‡å‘çš„æ˜¯å®¹å™¨æœ¬èº«ï¼Œè€Œä¸æ˜¯å®¿ä¸»æœºã€‚å¦‚æœè¦è®¿é—®å®¿ä¸»æœºçš„æœåŠ¡ï¼Œéœ€è¦ä½¿ç”¨ç‰¹æ®Šåœ°å€å¦‚<code>host.docker.internal</code>ã€‚</p>
<p><strong>é™·é˜± 3ï¼šIPv6 ä¼˜å…ˆå¯¼è‡´çš„è¿æ¥å¤±è´¥</strong> æŸäº›ç³»ç»Ÿé»˜è®¤ä¼˜å…ˆä½¿ç”¨ IPv6ï¼Œå¦‚æœæœåŠ¡åªç›‘å¬ IPv4ï¼Œå°±ä¼šå‡ºç°è¿æ¥é—®é¢˜ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹<code>/etc/gai.conf</code>æ¥è°ƒæ•´ä¼˜å…ˆçº§ã€‚</p>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>å›åˆ°æœ€åˆçš„é¢è¯•é—®é¢˜ï¼š<code>127.0.0.1</code>å’Œ<code>localhost</code>çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç®€çŸ­å›ç­”ï¼š<code>127.0.0.1</code>æ˜¯ä¸€ä¸ª IP åœ°å€ï¼Œ<code>localhost</code>æ˜¯ä¸€ä¸ªéœ€è¦è§£æçš„ä¸»æœºåã€‚ä¸¤è€…åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹åŠŸèƒ½ç›¸åŒï¼Œä½†åœ¨è§£æè¿‡ç¨‹ã€IPv4/IPv6 æ”¯æŒã€æ€§èƒ½å’Œæ˜ç¡®æ€§ä¸Šæœ‰ç»†å¾®å·®åˆ«ã€‚</p>
<p>æ·±å…¥å›ç­”ï¼šå®ƒä»¬ä»£è¡¨äº†ç½‘ç»œæ¶æ„ä¸­ä¸åŒå±‚æ¬¡çš„æ¦‚å¿µï¼Œæ¶‰åŠ DNS è§£æã€ç½‘ç»œåè®®æ ˆã€IPv4/IPv6 å…¼å®¹æ€§ç­‰å¤šä¸ªæ–¹é¢ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹å¼å¯ä»¥é¿å…ä¸€äº›æ½œåœ¨é—®é¢˜ã€‚</p>
<p>ä½œä¸ºå¼€å‘è€…ï¼Œç†è§£è¿™äº›ç»†èŠ‚ä¸ä»…èƒ½å¸®åŠ©ä½ å›ç­”é¢è¯•é—®é¢˜ï¼Œæ›´é‡è¦çš„æ˜¯èƒ½åœ¨é‡åˆ°ç½‘ç»œç›¸å…³é—®é¢˜æ—¶ï¼Œå¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚ä¸‹æ¬¡å½“ä½ çš„ Flask åº”ç”¨çªç„¶è¿ä¸ä¸Šï¼Œæˆ–è€… Docker å®¹å™¨æ— æ³•è®¿é—®å®¿ä¸»æœºæœåŠ¡æ—¶ï¼Œä½ å°±çŸ¥é“è¯¥ä»å“ªé‡Œå…¥æ‰‹è°ƒè¯•äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ‰TinyPro v1.4.0 æ­£å¼å‘å¸ƒï¼šæ”¯æŒ Spring Bootã€ç§»åŠ¨ç«¯é€‚é…ã€æ–°å¢å¡ç‰‡åˆ—è¡¨å’Œé«˜çº§è¡¨å•é¡µé¢]]></title>    <link>https://juejin.cn/post/7593535577046908963</link>    <guid>https://juejin.cn/post/7593535577046908963</guid>    <pubDate>2026-01-12T01:24:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593535577046908963" data-draft-id="7593541291011833883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ‰TinyPro v1.4.0 æ­£å¼å‘å¸ƒï¼šæ”¯æŒ Spring Bootã€ç§»åŠ¨ç«¯é€‚é…ã€æ–°å¢å¡ç‰‡åˆ—è¡¨å’Œé«˜çº§è¡¨å•é¡µé¢"/> <meta itemprop="keywords" content="å‰ç«¯,å¼€æº,TypeScript"/> <meta itemprop="datePublished" content="2026-01-12T01:24:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¼€æºæ˜Ÿçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1504599026445150"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ‰TinyPro v1.4.0 æ­£å¼å‘å¸ƒï¼šæ”¯æŒ Spring Bootã€ç§»åŠ¨ç«¯é€‚é…ã€æ–°å¢å¡ç‰‡åˆ—è¡¨å’Œé«˜çº§è¡¨å•é¡µé¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1504599026445150/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¼€æºæ˜Ÿçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T01:24:40.000Z" title="Mon Jan 12 2026 01:24:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    108
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯ Kagolï¼Œä¸ªäººå…¬ä¼—å·ï¼š<code>å‰ç«¯å¼€æºæ˜Ÿçƒ</code>ã€‚</p>
<p>TinyPro æ˜¯ä¸€ä¸ªåŸºäº TinyVue æ‰“é€ çš„å‰åç«¯åˆ†ç¦»çš„åå°ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒåœ¨çº¿é…ç½®èœå•ã€è·¯ç”±ã€å›½é™…åŒ–ï¼Œæ”¯æŒé¡µç­¾æ¨¡å¼ã€å¤šçº§èœå•ï¼Œæ”¯æŒä¸°å¯Œçš„æ¨¡æ¿ç±»å‹ï¼Œæ”¯æŒå¤šç§æ„å»ºå·¥å…·ï¼ŒåŠŸèƒ½å¼ºå¤§ã€å¼€ç®±å³ç”¨ï¼</p>
<ul>
<li>æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-pro%2F" target="_blank" title="https://github.com/opentiny/tiny-pro/" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a>ï¼ˆæ¬¢è¿ Star â­ï¼‰</li>
<li>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design%2Fvue-pro%2F" target="_blank" title="https://opentiny.design/vue-pro/" ref="nofollow noopener noreferrer">opentiny.design/vue-pro/</a></li>
</ul>
<p>æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼Œ2026å¹´1æœˆ10æ—¥ï¼ŒTinyPro æ­£å¼å‘å¸ƒ v1.4.0 ç‰ˆæœ¬ï¼Œæœ¬æ¬¡å‘å¸ƒé›†ä¸­åœ¨æ‰©å±•åç«¯æ¨¡æ¿ã€å¢å¼ºç§»åŠ¨ç«¯ä½“éªŒä»¥åŠå¯¹ NestJS åç«¯åŠŸèƒ½çš„å®ç”¨å¢å¼ºã€‚</p>
<p>æœ¬æ¬¡ v1.4.0 ç‰ˆæœ¬ä¸»è¦æœ‰ä»¥ä¸‹é‡å¤§å˜æ›´ï¼š</p>
<ul>
<li>å¢åŠ  Spring Boot åç«¯</li>
<li>å¢å¼ºç§»åŠ¨ç«¯é€‚é…</li>
<li>å¢åŠ å¡ç‰‡åˆ—è¡¨å’Œé«˜çº§è¡¨å•é¡µé¢</li>
<li>æ”¯æŒå¤šè®¾å¤‡ç™»å½•</li>
<li>æ”¯æŒé…ç½®é¢„è§ˆæ¨¡å¼</li>
</ul>
<p>ä½ å¯ä»¥æ›´æ–° <code>@opentiny/tiny-toolkit-pro@1.4.0</code> è¿›è¡Œä½“éªŒï¼</p>
<pre><code class="hljs language-bash" lang="bash">tiny install @opentiny/tiny-toolkit-pro@1.4.0
</code></pre>
<p>è¯¦ç»†çš„ Release Notes è¯·å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-pro%2Freleases%2Ftag%2Fv1.4.0" target="_blank" title="https://github.com/opentiny/tiny-pro/releases/tag/v1.4.0" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></p>
<h2 data-id="heading-0">1 æ”¯æŒ Spring Boot åç«¯</h2>
<p>ä¹‹å‰åªæœ‰ NestJS åç«¯ï¼Œæœ‰ä¸å°‘å¼€å‘è€…æå‡ºéœ€è¦ Java ç‰ˆæœ¬åç«¯ï¼Œå¤§å®¶çš„éœ€æ±‚å¿…é¡»å®‰æ’ï¼Œæ‰€ä»¥æœ¬æ¬¡ç‰ˆæœ¬æ–°å¢å¯¹ Spring Boot çš„æ”¯æŒï¼Œä½¿å¾—å Java / Spring çš„å›¢é˜Ÿå¯ä»¥æ›´å¿«é€Ÿåœ°ç”¨ç†Ÿæ‚‰çš„åç«¯æ¡†æ¶æ­å»º TinyPro å…¨æ ˆæ ·æ¿ã€‚</p>
<p>è¯¥æ”¯æŒåŒ…æ‹¬ Docker åŒ–ç¤ºä¾‹ã€é…ç½®è¦†ç›–ç¤ºä¾‹ï¼ˆapplication.yaml è¦†å†™ç¤ºä¾‹ï¼‰ä»¥åŠé’ˆå¯¹ deploy çš„è¯´æ˜ï¼Œä¾¿äºåœ¨å®¹å™¨åŒ–ç¯å¢ƒä¸­ç›´æ¥éƒ¨ç½²æˆ–åšäºŒæ¬¡å¼€å‘ã€‚</p>
<p>å¦‚æœä½ æˆ–å›¢é˜Ÿåå‘ Java æŠ€æœ¯æ ˆï¼Œè¿™æ¬¡æ›´æ–°æ˜¾è‘—é™ä½äº†å¯åŠ¨æˆæœ¬ä¸é›†æˆéš¾åº¦ã€‚</p>
<p>è¯¦ç»†ä½¿ç”¨æŒ‡å—è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design%2Fvue-pro%2Fdocs%2Fadvanced%2Fback-end-guide-spring-boot" target="_blank" title="https://opentiny.design/vue-pro/docs/advanced/back-end-guide-spring-boot" ref="nofollow noopener noreferrer">Spring Boot åç«¯å¼€å‘æŒ‡å—</a></p>
<h2 data-id="heading-1">2 ç§»åŠ¨ç«¯å“åº”å¼ä¸å¸ƒå±€ä¼˜åŒ–</h2>
<p>æœ¬æ¬¡å¼•å…¥ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆï¼ŒåŒ…å«å¸ƒå±€è°ƒæ•´ã€æ ·å¼ä¼˜åŒ–å’Œè‹¥å¹²ç§»åŠ¨äº¤äº’é€»è¾‘æ”¹è¿›ã€‚é…å¥—å¢åŠ äº†ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆE2Eï¼‰ï¼Œä¿è¯å¸¸è§ç§»åŠ¨åœºæ™¯ï¼ˆå°å±å¯¼èˆªã€ä¾§è¾¹æ æ”¶èµ·ã€é¡µç­¾/é¡µé¢åˆ‡æ¢ï¼‰è¡Œä¸ºç¨³å®šã€‚</p>
<p>é€‚é…è¦†ç›–äº†å¸¸è§æ–­ç‚¹ï¼Œé¡µé¢åœ¨æ‰‹æœºç«¯çš„æ˜“ç”¨æ€§å’Œå¯è¯»æ€§æœ‰æ˜æ˜¾æå‡ï¼Œé€‚åˆéœ€è¦åŒæ—¶å…¼é¡¾æ¡Œé¢ä¸ç§»åŠ¨ç®¡ç†åå°çš„é¡¹ç›®ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13e4cf8e70244938a17acfc8753a504d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768885798&amp;x-signature=XPTJlm9TaQyTbrwa2azB8IYo484%3D" alt="ç§»åŠ¨ç«¯æ•ˆæœ.png" loading="lazy"/></p>
<p>è¯¦ç»†ä»‹ç»è¯·å‚è€ƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design%2Fvue-pro%2Fdocs%2Fadvanced%2Fresponsive-adaptation-guide" target="_blank" title="https://opentiny.design/vue-pro/docs/advanced/responsive-adaptation-guide" ref="nofollow noopener noreferrer">TinyPro å“åº”å¼é€‚é…æŒ‡å—</a></p>
<h2 data-id="heading-2">3 å¢åŠ å¡ç‰‡åˆ—è¡¨é¡µé¢</h2>
<p>ä¹‹å‰åˆ—è¡¨é¡µä»…æä¾›å•ä¸€çš„æŸ¥è¯¢è¡¨æ ¼å½¢å¼ï¼ŒåŠŸèƒ½ç›¸å¯¹æœ‰é™ï¼Œéš¾ä»¥æ»¡è¶³æ—¥ç›Šå¤šæ ·åŒ–ã€å¤æ‚åŒ–çš„ä¸šåŠ¡éœ€æ±‚ã€‚ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒã€å¢å¼ºç³»ç»Ÿçš„çµæ´»æ€§ï¼Œæˆ‘ä»¬åœ¨åŸæœ‰åŸºç¡€ä¸Šæ–°å¢äº†ä¸€ä¸ªå¡ç‰‡åˆ—è¡¨é¡µé¢ï¼Œä»¥æ›´ç›´è§‚ã€çµæ´»çš„æ–¹å¼å±•ç¤ºæ•°æ®ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„ä½¿ç”¨éœ€æ±‚ã€‚</p>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design%2Fvue-pro%2Fpages%2Flist%2Fcard" target="_blank" title="https://opentiny.design/vue-pro/pages/list/card" ref="nofollow noopener noreferrer">opentiny.design/vue-pro/pagâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16c758ee5fb44328854c01948cddd28e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768885798&amp;x-signature=BqRxzZL4aBZtV%2F9B581Rnjsg7es%3D" alt="å¡ç‰‡åˆ—è¡¨.png" loading="lazy"/></p>
<h2 data-id="heading-3">4 å¢åŠ é«˜çº§è¡¨å•é¡µé¢</h2>
<p>è¡¨å•é¡µå¢åŠ äº†é«˜çº§è¡¨å•ï¼Œåœ¨æ™®é€šè¡¨å•åŸºç¡€ä¸Šå¢åŠ äº†è¡¨æ ¼æ•´è¡Œè¾“å…¥åŠŸèƒ½ã€‚</p>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design%2Fvue-pro%2Fpages%2Fform%2Fadvance" target="_blank" title="https://opentiny.design/vue-pro/pages/form/advance" ref="nofollow noopener noreferrer">opentiny.design/vue-pro/pagâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a86fcc8f660d445f8ebf35e2e30d46a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768885798&amp;x-signature=4%2Bpjbvb1oxPkD0pXEdYXsBqgc%2FA%3D" alt="é«˜çº§è¡¨å•.png" loading="lazy"/></p>
<h2 data-id="heading-4">5 æ”¯æŒå¤šè®¾å¤‡ç™»å½•</h2>
<p>ä¹‹å‰åªèƒ½åŒæ—¶ä¸€ä¸ªè®¾å¤‡ç™»å½•ï¼Œåé¢ç™»å½•çš„ç”¨æˆ·ä¼šâ€œæŒ¤â€æ‰å‰é¢ç™»å½•çš„ç”¨æˆ·ï¼Œæœ¬æ¬¡ç‰ˆæœ¬ä¸ºè´¦å·ç™»å½•å¼•å…¥è®¾å¤‡é™åˆ¶ï¼ˆDevice Limitï¼‰ç­–ç•¥ï¼Œå¯é™åˆ¶å•è´¦å·å¹¶å‘æ´»è·ƒè®¾å¤‡æ•°ï¼Œæœ‰åŠ©äºå‡å°‘æ»¥ç”¨å’Œæé«˜å®‰å…¨æ€§ï¼Œé€‚é…ä¼ä¸šå®‰å…¨åˆè§„éœ€æ±‚ã€‚</p>
<p>å¯é€šè¿‡ <code>nestJs/.env</code> ä¸­çš„ <code>DEVICE_LIMIT</code> è¿›è¡Œé…ç½®ã€‚</p>
<p>æ¯”å¦‚é…ç½®æœ€å¤š 2 äººç™»å½•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">DEVICE_LIMIT=2
</code></pre>
<p>å¦‚æœä¸æƒ³é™åˆ¶ç™»å½•è®¾å¤‡æ•°ï¼Œå¯ä»¥è®¾ç½®ä¸º -1ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">DEVICE_LIMIT=-1
</code></pre>
<h2 data-id="heading-5">6 æ¼”ç¤ºæ¨¡å¼</h2>
<p>ç”±äºé…ç½®äº† RejectRequestGuardï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ¥å£éƒ½åªèƒ½è¯»ï¼Œä¸èƒ½å†™ï¼Œè¦ä¿®æ”¹ NestJS åç«¯ä»£ç æ‰èƒ½æ”¹æˆå¯å†™çš„æ¨¡å¼ï¼ˆ<code>nestJs/src/app.module.ts</code>ï¼‰ã€‚</p>
<p>æœ¬æ¬¡ç‰ˆæœ¬å¢åŠ äº†æ¼”ç¤ºæ¨¡å¼çš„é…ç½®ï¼Œå¯é€šè¿‡ <code>nestJs/.env</code> ä¸­çš„ <code>PREVIEW_MODE</code> è¿›è¡Œé…ç½®ã€‚</p>
<p><code>PREVIEW_MODE</code> é»˜è®¤ä¸º true, ä¼šæ‹’ç»æ‰€æœ‰çš„å¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤æ“ä½œï¼Œè®¾ç½®ä¸º falseï¼Œåˆ™å˜æˆå¯å†™æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">PREVIEW_MODE=<span class="hljs-literal">false</span>
</code></pre>
<h2 data-id="heading-6">7 Redis å¼•å…¥åº”ç”¨å®‰è£…é”ï¼ˆredis app install lockï¼‰</h2>
<p>ä¸»è¦ç”¨äºé¿å…é‡å¤å®‰è£…æˆ–åˆå§‹åŒ–æ—¶çš„ç«æ€é—®é¢˜ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ¬¡è¿è¡Œ NestJS åç«¯ï¼Œä¼šç”Ÿæˆ Redis é”ï¼Œåç»­é‡æ–°è¿è¡Œ NestJS åç«¯ï¼Œä¸ä¼šå†æ›´æ–° MySQL æ•°æ®åº“çš„æ•°æ®ã€‚</p>
<p>å¦‚æœä½ ä¿®æ”¹äº†é»˜è®¤çš„èœå•é…ç½®ï¼ˆ<code>nestJs/src/menu/init/menuData.ts</code>ï¼‰æˆ–è€…å›½é™…åŒ–è¯æ¡ï¼ˆ<code>nestJs/locales.json</code>ï¼‰ï¼Œå¸Œæœ›é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼Œå¯ä»¥åœ¨å¼€å‘æœºå™¨ Redis ä¸­è¿è¡Œ <code>FLUSHDB</code> è¿›è¡Œè§£é”ï¼Œè¿™æ ·é‡æ–°è¿è¡Œ NestJS åç«¯æ—¶ï¼Œä¼šé‡æ–°åˆå§‹åŒ– MySQL æ•°æ®åº“çš„æ•°æ®ã€‚</p>
<p>æ›´å¤šæ›´æ–°ï¼Œè¯·å‚è€ƒ Release Notesï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-pro%2Freleases%2Ftag%2Fv1.4.0" target="_blank" title="https://github.com/opentiny/tiny-pro/releases/tag/v1.4.0" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></p>
<h2 data-id="heading-7">8 ç¤¾åŒºè´¡çŒ®</h2>
<p>æ„Ÿè°¢æ‰€æœ‰ä¸º v1.4.0 åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼ä½ ä»¬çš„è¾›å‹¤ä»˜å‡ºè®© TinyPro å˜å¾—æ›´å¥½ï¼</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGaoNeng-wWw" target="_blank" title="https://github.com/GaoNeng-wWw" ref="nofollow noopener noreferrer">GaoNeng-wWw</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzhaoxiaofeng876" target="_blank" title="https://github.com/zhaoxiaofeng876" ref="nofollow noopener noreferrer">zhaoxiaofeng876</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWangWant7" target="_blank" title="https://github.com/WangWant7" ref="nofollow noopener noreferrer">WangWant7</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzzl12222" target="_blank" title="https://github.com/zzl12222" ref="nofollow noopener noreferrer">zzl12222</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdiscreted66" target="_blank" title="https://github.com/discreted66" ref="nofollow noopener noreferrer">discreted66</a></li>
</ul>
<blockquote>
<p>æ³¨ï¼šæ’åä¸åˆ†å…ˆåã€‚</p>
</blockquote>
<p>å¦‚æœä½ æœ‰ä»»ä½•å»ºè®®æˆ–åé¦ˆï¼Œæ¬¢è¿é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-pro%2Fissues" target="_blank" title="https://github.com/opentiny/tiny-pro/issues" ref="nofollow noopener noreferrer">GitHub Issues</a> ä¸æˆ‘ä»¬è”ç³»ï¼Œä¹Ÿæ¬¢è¿ä½ ä¸€èµ·å‚ä¸ TinyPro è´¡çŒ®ã€‚</p>
<h2 data-id="heading-8">å¾€æœŸæ¨èæ–‡ç« </h2>
<ul>
<li><a href="https://juejin.cn/post/7492355312101015592" target="_blank" title="https://juejin.cn/post/7492355312101015592">ğŸ‰TinyPro v1.2.0 æ­£å¼å‘å¸ƒï¼Œè¶ç€ TinyPro é¡¹ç›®åˆšåˆ›å»ºä¸ä¹…ï¼Œå¿«æ¥å‚ä¸è´¡çŒ®å§ï¼</a></li>
<li><a href="https://juejin.cn/post/7489638329052430355" target="_blank" title="https://juejin.cn/post/7489638329052430355">TinyPro åå°ç®¡ç†ç³»ç»Ÿä»å¯åŠ¨ â¡ï¸ ä½¿ç”¨ â¡ï¸ äºŒå¼€ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼ç‚¹èµã€æ”¶è—â­ï¼Œä¸è¿·è·¯ï¼</a></li>
<li><a href="https://juejin.cn/post/7441231659394433039" target="_blank" title="https://juejin.cn/post/7441231659394433039">ğŸ’¥TinyPro Vue v1.1.0 æ­£å¼å‘å¸ƒï¼šå¢åŠ ç»†ç²’åº¦æƒé™ç®¡ç†ã€é¡µç­¾æ¨¡å¼ã€å¤šçº§èœå•ï¼Œæ”¯æŒ Webpack/Vite/Rspack/Farm å¤šç§æ„å»ºå·¥å…·</a></li>
</ul>
<h2 data-id="heading-9">è”ç³»æˆ‘ä»¬</h2>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-pro" target="_blank" title="https://github.com/opentiny/tiny-pro" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a>ï¼ˆæ¬¢è¿ Star â­ï¼‰</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-pro" target="_blank" title="https://opentiny.github.io/tiny-pro" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-pro</a></p>
<p>ä¸ªäººåšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkagol.github.io%2Fblogs%2F" target="_blank" title="https://kagol.github.io/blogs/" ref="nofollow noopener noreferrer">kagol.github.io/blogs/</a></p>
<p>å°åŠ©æ‰‹å¾®ä¿¡ï¼šopentiny-official</p>
<p>å…¬ä¼—å·ï¼šOpenTiny</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤åˆ»10W+çˆ†æ¬¾è§†é¢‘ï¼æˆ‘ç”¨Cozeæ­äº†ä¸ªâ€œäººç‰©æ•…äº‹â€è‡ªåŠ¨æµæ°´çº¿ï¼Œå¤ªé¦™äº†ï¼]]></title>    <link>https://juejin.cn/post/7594242987597692955</link>    <guid>https://juejin.cn/post/7594242987597692955</guid>    <pubDate>2026-01-12T06:53:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594242987597692955" data-draft-id="7594040270503182374" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤åˆ»10W+çˆ†æ¬¾è§†é¢‘ï¼æˆ‘ç”¨Cozeæ­äº†ä¸ªâ€œäººç‰©æ•…äº‹â€è‡ªåŠ¨æµæ°´çº¿ï¼Œå¤ªé¦™äº†ï¼"/> <meta itemprop="keywords" content="Coze,äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-01-12T06:53:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åç«¯å°è‚¥è‚ "/> <meta itemprop="url" content="https://juejin.cn/user/2966945320667536"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤åˆ»10W+çˆ†æ¬¾è§†é¢‘ï¼æˆ‘ç”¨Cozeæ­äº†ä¸ªâ€œäººç‰©æ•…äº‹â€è‡ªåŠ¨æµæ°´çº¿ï¼Œå¤ªé¦™äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2966945320667536/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åç«¯å°è‚¥è‚ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T06:53:52.000Z" title="Mon Jan 12 2026 06:53:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼æˆ‘æ˜¯å°è‚¥è‚ ï¼Œä¸“æ³¨AIæ™ºèƒ½ä½“å¹²è´§æ•™ç¨‹åˆ†äº«ï¼Œä»Šå¤©ç»™å¤§å®¶å¸¦æ¥çš„æ•™ç¨‹æ˜¯åŸºäºCozeå·¥ä½œæµä¸€é”®ç”Ÿæˆ<strong>äººç‰©æ•…äº‹</strong>è§†é¢‘æ„Ÿå…´è¶£å°±é€Ÿåº¦ç ä½è·Ÿç»ƒå“¦~</p>
<h2 data-id="heading-0">1. å‰è¨€</h2>
<p>æœ€è¿‘äººç‰©æ•…äº‹è§†é¢‘æµé‡ä¸é”™ï¼Œç¤¾ç¾¤é‡Œçš„ç¾¤å‹é—®Cozeå·¥ä½œæµèƒ½ä¸èƒ½åšï¼Ÿæˆ‘å»çœ‹äº†ä¸€ä¸‹è§†é¢‘å·ä¸Šçš„åŸè§†é¢‘ï¼ˆç‚¹èµ10w+ï¼Œè½¬å‘10w+ï¼Œå°å¿ƒå¿ƒ10w+ï¼‰ï¼Œåˆ¶ä½œæ–¹å¼å°±æ˜¯ç®€å•çš„å›¾ç‰‡ï¼Œå­—å¹•æ—¶é—´çº¿ç¨ä½œåˆå¹¶å¤„ç†åè¿›è¡Œç´ ææ‹¼æ¥ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b28133da2ee344af97722b0ca711214e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=La95lNbHgYwInSy%2Bd0K4GFLLlxc%3D" alt="" loading="lazy"/></p>
<p>è¿™ç±»è§†é¢‘ç°åœ¨æµé‡ä¸é”™ï¼Œå…³é”®å¯ä»¥å¼€é€šæ©±çª—ï¼Œä»ä¸‹å›¾ä¸­å¯ä»¥çœ‹å‡ºåŒç±»è§†é¢‘çš„æ©±çª—å…¬å¼€æ•°æ®ä¹Ÿå¾ˆä¸é”™ï¼ˆç¤ºä¾‹æ•°æ®ï¼Œéæœ¬äººå®é™…æ”¶ç›Šï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50fb9ffcb0774a118418c54eee46ad05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=vtolOipGnSf%2F7YUH%2BuJvTr9vVm4%3D" alt="" loading="lazy"/></p>
<p>å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼Œæˆ‘æ˜¨æ™šå¸¦ç€ç¾¤å‹è¿å¤œå®ç°äº†è¿™ä¸ªå·¥ä½œæµï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1ba8aa340254d778b2bfb490d611649~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=XD%2FxY2HLU9tHUgl%2FRwNF%2FMWypgo%3D" alt="" loading="lazy"/></p>
<p>å·¥ä½œæµçš„ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨å¼€å§‹èŠ‚ç‚¹è¾“å…¥äººåï¼Œè‡ªå®šä¹‰æ–‡æ¡ˆï¼ˆéå¿…å¡«ï¼‰ï¼ŒèƒŒæ™¯éŸ³ä¹ï¼Œç­‰å¾…å‡ åˆ†é’Ÿå³å¯è·å¾—å‰ªæ˜ è‰ç¨¿ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce0b65baf764472c879ab72187294da3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=nIpu30B35537Jj8HE%2B%2BunJEwhlc%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬æ‰€è¦åšçš„åªæ˜¯å°†å…¶å¯¼å…¥åˆ°å‰ªæ˜ ä¸­å³å¯è·å¾—å®Œæ•´è§†é¢‘ï¼ˆæˆ‘åšäº†å‰å‡ ä¸ªåˆ†æ®µï¼Œä¸»åšå±•ç¤ºä½¿ç”¨ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b297ca9f3793444d9987e902a8acd0de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=tvLIpgzpjn9xCnbSul1mPIQj5SI%3D" alt="" loading="lazy"/></p>
<p>æˆå“è§†é¢‘ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3231253177974c55a63daaa2f613acac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=h1WTXpk%2BqZ6tIM8HCZ%2FTJ%2FZ3Ijo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2. å·¥ä½œæµæ­å»º</h2>
<p>å®Œæ•´å·¥ä½œæµå¦‚ä¸‹å›¾ï¼Œæ¥ä¸‹æ¥å°±ç»™å¤§å®¶ä¾æ¬¡æ‹†è§£å·¥ä½œæµæ¯ä¸ªèŠ‚ç‚¹çš„ä½œç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c02038741b8a4189a5ac17e135326c7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=7cOHizpizNaWjcgr9nzqlS7QMfk%3D" alt="" loading="lazy"/></p>
<p>æœ¬å·¥ä½œæµçš„æ„å»ºæ–¹å¼å¯ä»¥æ•´ç†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>
<p>è¾“å…¥äººç‰©åç§°ï¼Œè¾“å…¥æ–‡æ¡ˆï¼ˆå¯é€‰ï¼‰ï¼Œä¸Šä¼ èƒŒæ™¯éŸ³ä¹</p>
</li>
<li>
<p>åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†æ–‡æ¡ˆï¼Œå¦‚å·²ç»ä¸Šä¼ äº†æ–‡æ¡ˆå°±å¯¹æ–‡æ¡ˆè¿›è¡Œåˆ†æ®µæˆä¸ºæ–‡æ¡ˆåˆ—è¡¨ï¼Œè‹¥æ²¡æœ‰ä¸Šä¼ æ–‡æ¡ˆåˆ™ç”±å¤§æ¨¡å‹è‡ªä¸»ç”Ÿæˆè§†é¢‘æ–‡æ¡ˆåˆ—è¡¨</p>
</li>
<li>
<p>å¯¹æ–‡æ¡ˆåˆ—è¡¨è¿›è¡Œæ‹†åˆ†ï¼Œæ—¶é—´çº¿åˆå¹¶å¤„ç†æ“ä½œ</p>
</li>
<li>
<p>åŸºäºæ–‡æ¡ˆç”Ÿæˆè§†é¢‘é…éŸ³ï¼Œè·å–é…éŸ³æ—¶é—´çº¿</p>
</li>
<li>
<p>åŸºäºæ–‡æ¡ˆç”Ÿæˆæ–‡ç”Ÿå›¾æç¤ºè¯ï¼Œç”Ÿæˆå›¾ç‰‡</p>
</li>
<li>
<p>åˆ©ç”¨ä»£ç å°†é…éŸ³ï¼Œå›¾ç‰‡ï¼ŒèƒŒæ™¯éŸ³ä¹ï¼Œæ–‡æ¡ˆå­—å¹•æ•´ç†ä¸ºå‰ªæ˜ å°åŠ©æ‰‹éœ€è¦çš„æ ¼å¼</p>
</li>
<li>
<p>åˆ›å»ºå‰ªæ˜ è‰ç¨¿ï¼Œå°†å­—å¹•ã€é…éŸ³ï¼Œå›¾ç‰‡ã€èƒŒæ™¯éŸ³ä¹æ·»åŠ åˆ°å‰ªæ˜ è‰ç¨¿</p>
</li>
</ol>
<p>è¯ä¸å¤šè¯´æ­£å¼å¼€å§‹å·¥ä½œæµæ‹†è§£ã€‚</p>
<p><strong>å¼€å§‹èŠ‚ç‚¹ï¼š</strong> å¼€å§‹èŠ‚ç‚¹ä¼ å…¥çš„å‚æ•°ä¸»è¦æœ‰back_musicæ–‡ä»¶ï¼ˆ.MP3ï¼‰ï¼Œpersonï¼ˆäººç‰©åå­—ï¼‰ï¼Œcontentï¼ˆè§†é¢‘æ–‡æ¡ˆï¼Œå¦‚æœä½ æƒ³è‡ªå®šä¹‰æ–‡æ¡ˆå¯ä»¥ç›´æ¥ä¼ å…¥ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0490635cc33d4a1396c4c9446e0288ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=ZklDWczon%2Fp8NXNXR%2FR8VdQ5nY8%3D" alt="" loading="lazy"/></p>
<p><strong>é€‰æ‹©å™¨ï¼š</strong> è¿™ä¸ªèŠ‚ç‚¹ä½äºå¼€å§‹èŠ‚ç‚¹åï¼Œæ¥æ”¶å¼€å§‹èŠ‚ç‚¹ä¼ å…¥çš„contentï¼Œåˆ¤æ–­contentæ˜¯å¦ä¸ºç©ºï¼Œè‹¥ä¸ºç©ºåˆ™è°ƒç”¨ä¸‹æ¸¸å¤§æ¨¡å‹èŠ‚ç‚¹åˆ›å»ºè§†é¢‘æ–‡æ¡ˆï¼Œå¦åˆ™åŸºäºæ–‡æœ¬å¤„ç†èŠ‚ç‚¹å¯¹æ–‡æ¡ˆå†…å®¹è¿›è¡Œåˆ†æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/553d4edc2af3404990cb66efe2b98885~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=73nLg4Si%2BarQzdrcsCJF%2Bpc87JA%3D" alt="" loading="lazy"/></p>
<p><strong>å†…å®¹åˆ†æ®µï¼š</strong> è¿™æ˜¯ä¸€ä¸ªæ–‡æœ¬å¤„ç†èŠ‚ç‚¹ï¼Œå®ƒçš„ä½œç”¨æ˜¯åŸºäºå¥å·å¯¹ç”¨æˆ·è¾“å…¥çš„æ–‡æ¡ˆè¿›è¡Œåˆ†éš”ï¼Œæˆä¸ºå­—ç¬¦ä¸²æ•°ç»„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07722d4da88f4c09acbaebe149db53b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=pRIfrai2We3q0IvejUG3V0Q8%2F80%3D" alt="" loading="lazy"/></p>
<p>ä»¥é˜²å°ç™½ä¸ç†è§£ï¼Œæˆ‘è¿™è¾¹åšä¸€ä¸ªè¯´æ˜ï¼ŒèŠ‚ç‚¹è¾“å…¥ï¼š</p>
<pre><code class="hljs">å¥å­1ã€‚å¥å­2ã€‚å¥å­3ã€‚
</code></pre>
<p>ç»è¿‡å†…å®¹åˆ†æ®µèŠ‚ç‚¹å¤„ç†åï¼ŒèŠ‚ç‚¹è¾“å‡ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[å¥å­1ï¼Œå¥å­2ï¼Œå¥å­3]</span>
</code></pre>
<p><strong>äººç‰©ä¼ è®°(</strong> <strong>å¤§æ¨¡å‹</strong> <strong>)ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªå¤§æ¨¡å‹èŠ‚ç‚¹ï¼Œå®ƒçš„ä½œç”¨æ˜¯åŸºäºå¼€å§‹èŠ‚ç‚¹ä¼ å…¥çš„äººåæ¥ç”Ÿæˆäººç‰©æ•…äº‹è§†é¢‘æ–‡æ¡ˆï¼Œé‡‡ç”¨äº†DeepSeekV3.2å¤§æ¨¡å‹ï¼Œæ³¨æ„åœ¨æŠ€èƒ½å¤„è¦åŠ ä¸€ä¸‹æœç´¢æ’ä»¶ï¼Œè¿™æ ·å‡ºæ¥çš„æ–‡æ¡ˆæ›´è´´å®é™…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f78c4b6de2341cd8cc95b53b9556040~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=AwjNbMPOu4m4xB1g7700oOrIAmE%3D" alt="" loading="lazy"/></p>
<p>æç¤ºè¯ç¼–å†™æ€è·¯ï¼ˆæŠŠä¸€ä¸‹æ€è·¯æŠ•å–‚ç»™è±†åŒ…æ¥ç”Ÿæˆæç¤ºè¯ï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æ ¹æ®äººç‰©åç§°è°ƒç”¨æœç´¢æ’ä»¶åŒºäº’è”ç½‘æœç´¢äººç‰©çš„ç”Ÿå¹³äº‹è¿¹ï¼ŒæŒ‰ä»¥ä¸‹æ ¼å¼ç¼–å†™è‡ªä¼ ï¼š
<span class="hljs-bullet">1.</span> åˆ©ç”¨æœç´¢å·¥å…·æœç´¢äººç‰©çš„ç”Ÿå¹³äº‹è¿¹
<span class="hljs-bullet">2.</span> ç¼–å†™æ–‡æ¡ˆï¼Œæ ¹æ®å¼€é€šï¼Œæˆå°±å™äº‹ã€‚æ·±æŒ–å†…æ ¸ï¼Œä¸»é¢˜ç¥è¯çš„ç»“æ„æ¥ç¼–å†™è§†é¢‘æ–‡æ¡ˆ
<span class="hljs-bullet">4.</span> ä¸è¦å‡ºç°è¯­ç—…ï¼Œå¤¸å¤§äº‹å®ç­‰ç¡¬ä¼¤é”™è¯¯
</code></pre>
<p><strong>å˜é‡èšåˆï¼š</strong> è¿™ä¸ªèŠ‚ç‚¹ä½œç”¨æ˜¯å–å‡ºæœ€ç»ˆç‰ˆæœ¬çš„è§†é¢‘æ–‡æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02ee5bd6a86e477b865d444f43fa5e17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=hPZHwd47ObHYUQHTqhffqufJ3rA%3D" alt="" loading="lazy"/></p>
<p><strong>å¾ªç¯æ–‡æ¡ˆæ‰“æ•£ï¼š</strong> å‰ç½®<strong>äººç‰©ä¼ è®°(</strong> <strong>å¤§æ¨¡å‹</strong> <strong>)</strong> èŠ‚ç‚¹ç”Ÿæˆçš„æ–‡æ¡ˆåˆ—è¡¨ä¸­ï¼Œä¸€å¥è¯å ç”¨çš„æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæˆ‘ä»¬è¦å°†å®ƒè¿›è¡Œä¸€ä¸ªæ‰“æ•£çš„æ“ä½œï¼Œç„¶åç»Ÿè®¡æ¯ä¸ªå°æ–‡æ¡ˆç‰‡æ®µçš„æ—¶é•¿ï¼Œæ±‚å–ä»–ä»¬çš„æ—¶é—´æ¸¸æ ‡ï¼Œä¸ºåç»­æ·»åŠ åˆ°å‰ªæ˜ è‰ç¨¿åšå‰ç½®å‡†å¤‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf02058554894b008dd4feddda404b1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=XiDqaxQH9juDH7JmuA4r8WDiU6M%3D" alt="" loading="lazy"/></p>
<p><strong>audio_partï¼ˆæ–‡æ¡ˆé…éŸ³ä¸è·å–æ—¶é•¿å­</strong> <strong>å·¥ä½œæµ</strong> <strong>ï¼‰ï¼š</strong> è¿™ä¸ªå·¥ä½œæµä¸»è¦æ˜¯å¤„ç†åŸºäº<strong>text_splitterå£æ’­ç¨¿åˆ†å‰²</strong>æ‰“æ•£åçš„æ–‡æ¡ˆè¿›è¡Œé…éŸ³å’Œè·å–é…éŸ³æ—¶é•¿æ“ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46c2743ba8cc403095f951336a3fc24f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=0uJZoSgwj%2BlYMPm65L6jbEoCVMs%3D" alt="" loading="lazy"/></p>
<p><strong>ä»£ç ï¼ˆåˆå¹¶æ‰“æ•£åçš„éŸ³é¢‘ã€æ–‡æ¡ˆã€éŸ³é¢‘æ—¶é—´çº¿ï¼‰ï¼š</strong> åœ¨<strong>å¾ªç¯æ–‡æ¡ˆæ‰“æ•£</strong>ç¯èŠ‚ï¼Œæˆ‘ä»¬å°†æ–‡æ¡ˆè¿›è¡Œäº†æ‰“æ•£æ“ä½œï¼Œç°åœ¨è¿˜è¦å°†å…¶æ‹¼æ¥ä¸ºå¯¹åº”çš„å±æ€§æ•°ç»„æ–¹ä¾¿åç»­è¿›è¡Œæ–‡ç”Ÿå›¾å’Œç»„è£…ä¸ºå‰ªæ˜ è‰ç¨¿æ•°æ®çš„æ“ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c389d250db94dabb1d5db187d40f37d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=fx3D4%2BGlRC4bJEMa4UAJE%2FXb6Hs%3D" alt="" loading="lazy"/></p>
<p>ä»¥é˜²å°ç™½ä¸æ‡‚ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹è¾“å…¥å’Œè¾“å‡ºèŠ‚ç‚¹çš„æ•°æ®ç¤ºä¾‹ï¼ŒèŠ‚ç‚¹è¾“å…¥ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{
      <span class="hljs-string">"audio_list"</span>: [
        <span class="hljs-string">"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/speech_7426725529589628955_eba04d02-ca0a-453e-be97-2e063d8049a5.mp3?lk3s=da27ec82&amp;x-expires=1768453983&amp;x-signature=7kS%2BQUTS5xUxecMmMEMswjl4vLs%3D"</span>,
        <span class="hljs-string">"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/speech_7426725529589628955_d51cf1e3-b6e0-4d82-b4a0-b8a2a7c386f6.mp3?lk3s=da27ec82&amp;x-expires=1768453984&amp;x-signature=4jhmAhvehNqD3tnBgoV83K4PCI0%3D"</span>,
        <span class="hljs-string">"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/speech_7426725529589628955_c4514ed9-a5d1-4a52-9060-70a5dfa72251.mp3?lk3s=da27ec82&amp;x-expires=1768453986&amp;x-signature=DirWU3cdxKx8Ja62xURNqbynIE0%3D"</span>,
        <span class="hljs-string">"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/speech_7426725529589628955_b55d24f3-b331-4585-b29d-43afe6a5d216.mp3?lk3s=da27ec82&amp;x-expires=1768453987&amp;x-signature=NFEGzbLoWR5UeBvrXCiL2UzU45M%3D"</span>
      ],
      <span class="hljs-string">"part_list"</span>: [
        <span class="hljs-string">"å¥¹æ˜¯ä¸­å›½æœ€å¼ºè±ªé—¨ç¼”é€ è€…"</span>,
        <span class="hljs-string">"å‡­å€Ÿä¸€å·±ä¹‹åŠ›åŸ¹å…»çš„åä»£"</span>,
        <span class="hljs-string">"ä¸ä»…å¯è’™äº†å…¨ä¸­å›½ï¼Œæ›´åœ¨ç§‘å­¦ã€æ•™è‚²"</span>,
        <span class="hljs-string">"åŒ»å­¦ç­‰å¤šä¸ªé¢†åŸŸåˆ›é€ äº†ä¸­å›½è¿‘ä»£å²ä¸Šçš„å¥‡è¿¹"</span>
      ],
      <span class="hljs-string">"part_time_list"</span>: [
        <span class="hljs-number">2880000</span>,
        <span class="hljs-number">2928000</span>,
        <span class="hljs-number">4152000</span>,
        <span class="hljs-number">4416000</span>
      ],
      <span class="hljs-string">"sum_time"</span>: <span class="hljs-number">14376000</span>,
      <span class="hljs-string">"wenan"</span>: <span class="hljs-string">"å¥¹æ˜¯ä¸­å›½æœ€å¼ºè±ªé—¨ç¼”é€ è€…ï¼Œå‡­å€Ÿä¸€å·±ä¹‹åŠ›åŸ¹å…»çš„åä»£ï¼Œä¸ä»…å¯è’™äº†å…¨ä¸­å›½ï¼Œæ›´åœ¨ç§‘å­¦ã€æ•™è‚²ã€åŒ»å­¦ç­‰å¤šä¸ªé¢†åŸŸåˆ›é€ äº†ä¸­å›½è¿‘ä»£å²ä¸Šçš„å¥‡è¿¹ã€‚"</span>
    }
</code></pre>
<p>ç»è¿‡ä»£ç èŠ‚ç‚¹å¤„ç†åï¼Œè¾“å‡ºä¸ºï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"part_list"</span>: [
    <span class="hljs-string">"å¥¹æ˜¯ä¸­å›½æœ€å¼ºè±ªé—¨ç¼”é€ è€…"</span>,
    <span class="hljs-string">"å‡­å€Ÿä¸€å·±ä¹‹åŠ›åŸ¹å…»çš„åä»£"</span>,
    <span class="hljs-string">"ä¸ä»…å¯è’™äº†å…¨ä¸­å›½ï¼Œæ›´åœ¨ç§‘å­¦ã€æ•™è‚²"</span>,
    <span class="hljs-string">"åŒ»å­¦ç­‰å¤šä¸ªé¢†åŸŸåˆ›é€ äº†ä¸­å›½è¿‘ä»£å²ä¸Šçš„å¥‡è¿¹"</span>
  ],
  <span class="hljs-string">"part_time_list"</span>: [
    <span class="hljs-number">2880000</span>,
    <span class="hljs-number">2928000</span>,
    <span class="hljs-number">4152000</span>,
    <span class="hljs-number">4416000</span>
  ],
  <span class="hljs-string">"sum_time"</span>: [
    <span class="hljs-number">14376000</span>
  ],
  <span class="hljs-string">"audio"</span>: [
    <span class="hljs-string">"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/speech_7426725529589628955_eba04d02-ca0a-453e-be97-2e063d8049a5.mp3?lk3s=da27ec82&amp;x-expires=1768453983&amp;x-signature=7kS%2BQUTS5xUxecMmMEMswjl4vLs%3D"</span>,
    <span class="hljs-string">"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/speech_7426725529589628955_d51cf1e3-b6e0-4d82-b4a0-b8a2a7c386f6.mp3?lk3s=da27ec82&amp;x-expires=1768453984&amp;x-signature=4jhmAhvehNqD3tnBgoV83K4PCI0%3D"</span>,
    <span class="hljs-string">"https://lf3-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/speech_7426725529589628955_c4514ed9-a5d1-4a52-9060-70a5dfa72251.mp3?lk3s=da27ec82&amp;x-expires=1768453986&amp;x-signature=DirWU3cdxKx8Ja62xURNqbynIE0%3D"</span>,
    <span class="hljs-string">"https://lf6-appstore-sign.oceancloudapi.com/ocean-cloud-tos/VolcanoUserVoice/speech_7426725529589628955_b55d24f3-b331-4585-b29d-43afe6a5d216.mp3?lk3s=da27ec82&amp;x-expires=1768453987&amp;x-signature=NFEGzbLoWR5UeBvrXCiL2UzU45M%3D"</span>
  ]
}
</code></pre>
<p><strong>å¾ªç¯ç”Ÿå›¾ï¼š</strong> è¿™ä¸ªèŠ‚ç‚¹çš„æ“ä½œæ˜¯åŸºäºå‰ç½®ç”Ÿæˆçš„æ–‡æ¡ˆåˆ—è¡¨ï¼ˆpart_listï¼‰æ¥è¿›è¡Œæ–‡ç”Ÿå›¾æ“ä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/069fc4e9728a4b5bbe28e1d7f246086c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=%2Fyu6Rqr0ijOdTZlc81efJnbKVuA%3D" alt="" loading="lazy"/></p>
<p><strong>å¾ªç¯ç”Ÿå›¾â€”æ ¹æ®äººç‰©ä¼ è®°å†…å®¹ç”Ÿæˆæ–‡ç”Ÿå›¾æç¤ºè¯(</strong> <strong>å¤§æ¨¡å‹</strong> <strong>)ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªå¤§æ¨¡å‹èŠ‚ç‚¹ï¼Œé‡‡ç”¨è±†åŒ…ç¼–ç¨‹æ¨¡å‹ï¼Œå®ƒçš„æ ¸å¿ƒæ˜¯æ ¹æ®ä¼ å…¥çš„æ–‡æ¡ˆæ¥ç”Ÿæˆäººç‰©æ•…äº‹æ–‡ç”Ÿå›¾æç¤ºè¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b10489e1142f4d8ba4ccff6dffc45c45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=TGcGD2f3YGVXFsj0IYMpUrOBp9Y%3D" alt="" loading="lazy"/></p>
<p>æç¤ºè¯ç¼–å†™æ€è·¯ï¼ˆæŠŠä¸€ä¸‹æ€è·¯æŠ•å–‚ç»™è±†åŒ…æ¥ç”Ÿæˆæç¤ºè¯ï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ä½ æ˜¯ä¸€åç»å…¸äººåƒæ‘„å½±å¸ˆï¼Œæ“…é•¿æ‹æ‘„å¹²å‡€ã€åº„é‡ã€é«˜ç”»è´¨çš„é»‘ç™½è‚–åƒã€‚
ä½ çš„æ ¸å¿ƒä»»åŠ¡æ˜¯ï¼šæ ¹æ®å…¨ç¯‡æ–‡æ¡ˆ (wenan)ç†è§£äººç‰©èº«ä»½ä¸æ°”è´¨ï¼Œç»“åˆç‰‡æ®µæ–‡æ¡ˆ (input) æç»˜å…·ä½“åŠ¨ä½œä¸ç”»é¢ã€‚
è§†è§‰çº¢çº¿ï¼šæ— è®ºå‰§æƒ…å¤šä¹ˆè·Œå®•ï¼Œç”»é¢å¿…é¡»ä¿æŒå½±æ¥¼çº§çš„æ´å‡€æ„Ÿã€‚ä¸¥ç¦ç”Ÿæˆä»»ä½•æ–‘ç‚¹ã€å™ªç‚¹ã€è„ç—•æˆ–è¿‡åº¦çš„çš®è‚¤ç‘•ç–µã€‚
</code></pre>
<p><strong>å¾ªç¯ç”Ÿå›¾â€”å›¾åƒç”Ÿæˆ:</strong> è¿™æ˜¯æ‰£å­å†…ç½®çš„å›¾åƒç”ŸæˆèŠ‚ç‚¹ï¼Œæ¨¡å‹é‡‡ç”¨Seedream4.0æ¨¡å‹ï¼Œç»˜åˆ¶æ¯”ä¾‹é‡‡ç”¨9:16ï¼Œç»˜å›¾æç¤ºè¯é‡‡ç”¨<strong>å¾ªç¯ç”Ÿå›¾â€”æ ¹æ®äººç‰©ä¼ è®°å†…å®¹ç”Ÿæˆæ–‡ç”Ÿå›¾æç¤ºè¯(</strong> <strong>å¤§æ¨¡å‹</strong> <strong>)</strong> è¾“å‡ºçš„æ–‡ç”Ÿå›¾æç¤ºè¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f8540e5c1c54bc1834569f6f90a7263~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=z%2Fm8R1ZaGfEL%2FZiCZcOf%2B7oHo3w%3D" alt="" loading="lazy"/></p>
<p><strong>æ–‡æœ¬å¤„ç†ï¼ˆè·å–èƒŒæ™¯éŸ³ä¹é“¾æ¥ï¼‰ï¼š</strong> è¿™ä¸ªèŠ‚ç‚¹æ˜¯æ–‡æœ¬å¤„ç†èŠ‚ç‚¹ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯æ ¹æ®å¼€å§‹èŠ‚ç‚¹ä¸Šä¼ çš„.mp3èƒŒæ™¯éŸ³ä¹æå–éŸ³ä¹æ–‡ä»¶é“¾æ¥åœ°å€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecae80a51813454aa4c25a64a41a9b10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=gqn6Gb%2BXO4lBfzhyT1ALkXX6DI8%3D" alt="" loading="lazy"/></p>
<p><strong>ä¿¡æ¯ç»„è£…ä»£ç ï¼š</strong> åœ¨å‰ç½®èŠ‚ç‚¹ä¸­æˆ‘ä»¬ç”Ÿæˆäº†å›¾ç‰‡ï¼ŒèƒŒæ™¯éŸ³ä¹ï¼Œé…éŸ³ï¼Œå­—å¹•è¿™å‡ ä¸ªè§†é¢‘è¦ç´ ï¼Œè¯¥èŠ‚ç‚¹å°±æ˜¯å°†å‰ç½®ç”Ÿæˆçš„è§†é¢‘è¦ç´ è¿›è¡Œæ•°ç»„æ ¼å¼è§„æ•´ï¼Œæˆä¸ºè§†é¢‘å‰ªæ˜ å°åŠ©æ‰‹éœ€è¦çš„æ ¼å¼ã€‚è¿™ä¸€æ­¥ä¹Ÿå¯ä»¥ç”¨æ’ä»¶èŠ‚ç‚¹æ¥å®ç°ï¼Œçœ‹ä½ è‡ªå·±ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d10877650ac4b129157ed5544251f30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=7Eg%2FAoCszQa4EH7ZsPwf2huD5yo%3D" alt="" loading="lazy"/></p>
<p><strong>create_draftï¼š</strong> è¿™æ˜¯å‰ªæ˜ å°åŠ©æ‰‹æ’ä»¶ï¼Œç”¨äºåˆ›å»ºå‰ªæ˜ ç©ºè‰ç¨¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60ecdab685ee4994ba97bde34fb4b325~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=Wy3HQo0QRoFHSFSQJdlg6da0SzU%3D" alt="" loading="lazy"/></p>
<p><strong>add_images:</strong> è¿™æ˜¯å‰ªæ˜ å°åŠ©æ‰‹æ’ä»¶ï¼Œç”¨äºåœ¨ç©ºè‰ç¨¿ä¸­æ·»åŠ å›¾ç‰‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e64f0b60f084a4690f005a738163b1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=9QAX2ZSg3shCftYObZy4UisTp%2Fg%3D" alt="" loading="lazy"/></p>
<p><strong>add_audios_æ·»åŠ äººå£°ï¼š</strong> è¿™æ˜¯å‰ªæ˜ å°åŠ©æ‰‹æ’ä»¶ï¼Œç”¨äºåœ¨ç©ºè‰ç¨¿ä¸­æ·»åŠ äººå£°è§£è¯´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/032caad6ad444a9f87d2efcf2bd9b696~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=B8bDExG8ZcnON%2Bok1kdKIiKmlj4%3D" alt="" loading="lazy"/></p>
<p><strong>add_audios_æ·»åŠ èƒŒæ™¯éŸ³ï¼š</strong> è¿™æ˜¯å‰ªæ˜ å°åŠ©æ‰‹æ’ä»¶ï¼Œç”¨äºåœ¨ç©ºè‰ç¨¿ä¸­æ·»åŠ èƒŒæ™¯éŸ³ä¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9beb393e538473196e57025aaa3d42a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=hEJDQ60K%2BsWj6hKotBKs2ByGF7M%3D" alt="" loading="lazy"/></p>
<p><strong>add_captionsï¼š</strong> è¿™æ˜¯å‰ªæ˜ å°åŠ©æ‰‹æ’ä»¶ï¼Œç”¨äºåœ¨ç©ºè‰ç¨¿ä¸­æ·»åŠ å­—å¹•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe7dd0b91a33481f933b991d54328ef6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=IOJAP8IYuq6dWwY9szEeXh%2BputU%3D" alt="" loading="lazy"/></p>
<p><strong>save_draftï¼š</strong> è¿™æ˜¯å‰ªæ˜ å°åŠ©æ‰‹æ’ä»¶ï¼Œç”¨äºä¿å­˜è‰ç¨¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34822173fded4f619f2dd566b58c6417~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=XqZlyrHsVbR5dzm9%2FiuMkp46Mvo%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“æŸèŠ‚ç‚¹ï¼š</strong> ç»“æŸèŠ‚ç‚¹æ¥æ”¶çš„æ˜¯<strong>save_draft</strong>èŠ‚ç‚¹è¾“å‡ºçš„å‰ªæ˜ è‰ç¨¿ï¼Œå¯ç”¨äºåˆæˆæœ€ç»ˆè§†é¢‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11b21b1405014f93855272f4a0a7cbbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=JR9BCg6yk3OahAkUOPI9%2F3wqegM%3D" alt="" loading="lazy"/></p>
<p>ä»¥ä¸Šå°±æ˜¯æ•´ä¸ªå·¥ä½œæµçš„å®Œæ•´æµç¨‹æ‹†è§£ï¼ŒåŠ¨æ‰‹èƒ½åŠ›å¼ºçš„è¯»è€…å¯ä»¥è·Ÿç€æ•™ç¨‹å®è·µä¸€éã€‚<strong>ä¸Šè¿°å·¥ä½œæµå·²ç»è¢«æ”¶å½•åˆ°äº†å°è‚¥è‚ å…±å­¦ç¾¤ä¸­ï¼Œéœ€è¦åŸä»¶å¯ä»¥åŠ å…¥ç¤¾ç¾¤ç›´æ¥ä½¿ç”¨å“¦ã€‚</strong></p>
<h2 data-id="heading-2">4. ç»“è¯­</h2>
<p>é€šè¿‡è¿™ä¸ª <strong>Coze + å‰ªæ˜ </strong> çš„è‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œæˆ‘ä»¬æˆåŠŸå°†åŸæœ¬éœ€è¦è€—è´¹æ•°å°æ—¶çš„<strong>æ–‡æ¡ˆæ’°å†™ã€ç´ ææœå¯»ã€é…éŸ³å¯¹è½¨ã€å‰ªè¾‘åˆæˆ</strong>å…¨æµç¨‹ï¼Œå‹ç¼©åˆ°äº†çŸ­çŸ­å‡ åˆ†é’Ÿã€‚è¿™ä¸ä»…æå¤§åœ°é™ä½äº†ä¸­è§†é¢‘ã€çŸ­è§†é¢‘çš„åˆ¶ä½œé—¨æ§›ï¼Œæ›´é‡è¦çš„æ˜¯å®ç°äº†<strong>é«˜è´¨é‡å†…å®¹çš„æ‰¹é‡åŒ–ç”Ÿäº§</strong>ã€‚</p>
<p><strong>å¦‚æœ¬æ¬¡åˆ†äº«å¯¹ä½ æœ‰å¸®åŠ©ï¼Œéº»çƒ¦ä¸€é”®ä¸‰è¿æ”¯æŒä¸€ä¸‹å°è‚¥è‚ ï¼Œæˆ‘ä»¬ä¸‹æœŸå†è§~</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f320eacbb6a14cd69e72e9047438e81b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCO56uv5bCP6IKl6IKg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768805632&amp;x-signature=ADn1Qx252j8XHrv1PK2QNW5oTLY%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C# 14 ä¸­çš„æ–°å¢åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7594385386739875859</link>    <guid>https://juejin.cn/post/7594385386739875859</guid>    <pubDate>2026-01-13T05:52:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594385386739875859" data-draft-id="7594389431835934761" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C# 14 ä¸­çš„æ–°å¢åŠŸèƒ½"/> <meta itemprop="keywords" content="C#"/> <meta itemprop="datePublished" content="2026-01-13T05:52:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·2199167970391"/> <meta itemprop="url" content="https://juejin.cn/user/299483255543757"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C# 14 ä¸­çš„æ–°å¢åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/299483255543757/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·2199167970391
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T05:52:03.000Z" title="Tue Jan 13 2026 05:52:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>C# 14 å¼•å…¥äº†å¤šé¡¹é‡è¦æ›´æ–°ï¼Œä»¥ä¸‹æ˜¯ä¸»è¦åŠŸèƒ½çš„è¯¦ç»†è¯´æ˜ï¼š</p>
<hr/>
<h3 data-id="heading-0">1. <strong>æ‰©å±•æˆå‘˜</strong></h3>
<p>å…è®¸ä¸ºç°æœ‰ç±»å‹æ·»åŠ æ‰©å±•æ–¹æ³•/å±æ€§ï¼Œè¯­æ³•æ›´ç®€æ´ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">StringExtensions</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsNullOrEmpty</span>(<span class="hljs-params"><span class="hljs-keyword">this</span> <span class="hljs-built_in">string</span>? str</span>)</span> =&gt; 
        <span class="hljs-built_in">string</span>.IsNullOrEmpty(str);
}
</code></pre>
<hr/>
<h3 data-id="heading-1">2. <strong>ç©ºæ¡ä»¶èµ‹å€¼</strong></h3>
<p>ç®€åŒ–ç©ºå€¼æ£€æŸ¥ä¸èµ‹å€¼æ“ä½œï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">obj?.Property ??= <span class="hljs-string">"default"</span>; <span class="hljs-comment">// è‹¥ obj.Property ä¸º null åˆ™èµ‹å€¼</span>
</code></pre>
<hr/>
<h3 data-id="heading-2">3. <strong><code>nameof</code> æ”¯æŒæœªç»‘å®šæ³›å‹ç±»å‹</strong></h3>
<p>å¢å¼ºæ³›å‹ç±»å‹åç§°è·å–èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> name = <span class="hljs-keyword">nameof</span>(List&lt;<span class="hljs-built_in">int</span>&gt;); <span class="hljs-comment">// è¾“å‡º "List"</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">4. <strong><code>Span&lt;T&gt;</code> éšå¼è½¬æ¢ä¼˜åŒ–</strong></h3>
<p>æ”¯æŒæ›´å¤šç±»å‹å®‰å…¨è½¬æ¢ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">byte</span>[] data = ...;
Span&lt;<span class="hljs-built_in">byte</span>&gt; span = data; <span class="hljs-comment">// æ— éœ€æ˜¾å¼è½¬æ¢</span>
</code></pre>
<hr/>
<h3 data-id="heading-4">5. <strong>ç®€å• lambda å‚æ•°ä¿®é¥°ç¬¦</strong></h3>
<p>å…è®¸ä¸º lambda å‚æ•°æ·»åŠ ä¿®é¥°ç¬¦ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> process = (<span class="hljs-keyword">ref</span> <span class="hljs-built_in">int</span> x) =&gt; x *= <span class="hljs-number">2</span>; <span class="hljs-comment">// æ”¯æŒ ref/in ç­‰ä¿®é¥°</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">6. <strong><code>field</code> æ”¯æŒçš„å±æ€§</strong></h3>
<p>è‡ªåŠ¨å®ç°å±æ€§æ”¯æŒå­—æ®µç›´æ¥è®¿é—®ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Value { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span> field = <span class="hljs-number">0</span>; } <span class="hljs-comment">// é€šè¿‡ 'field' å…³é”®å­—è®¿é—®åå¤‡å­—æ®µ</span>
</code></pre>
<hr/>
<h3 data-id="heading-6">7. <strong><code>partial</code> äº‹ä»¶å’Œæ„é€ å‡½æ•°</strong></h3>
<p>åˆ†éƒ¨ç±»æ”¯æŒäº‹ä»¶ä¸æ„é€ å‡½æ•°çš„æ‹†åˆ†å®šä¹‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">partial</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MyClass</span>
{
    <span class="hljs-function"><span class="hljs-keyword">partial</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Initialize</span>()</span>; <span class="hljs-comment">// åˆ†éƒ¨æ„é€ å‡½æ•°é€»è¾‘</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">event</span> EventHandler? MyEvent;
}
</code></pre>
<hr/>
<h3 data-id="heading-7">8. <strong>ç”¨æˆ·å®šä¹‰çš„å¤åˆèµ‹å€¼è¿ç®—ç¬¦</strong></h3>
<p>æ”¯æŒé‡è½½å¤åˆè¿ç®—ç¬¦ï¼ˆå¦‚ <code>+=</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Vector <span class="hljs-keyword">operator</span> +(Vector a, Vector b) =&gt; ...;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Vector <span class="hljs-keyword">operator</span> +=(Vector a, Vector b) =&gt; a = a + b; <span class="hljs-comment">// æ˜¾å¼å®šä¹‰</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">9. <strong>åŸºäºæ–‡ä»¶çš„é¢„å¤„ç†å™¨æŒ‡ä»¤</strong></h3>
<p>ä¸ºæ–‡ä»¶çº§é…ç½®æ–°å¢æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#fileenable "FeatureA" // å¯ç”¨ç‰¹å®šæ–‡ä»¶çº§åŠŸèƒ½</span>
</code></pre>
<hr/>
<h3 data-id="heading-9">ä½¿ç”¨å»ºè®®</h3>
<ul>
<li><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼šéœ€å®‰è£… .NET 10 SDK æˆ– Visual Studio 2026</li>
<li><strong>è¿ç§»æ³¨æ„</strong>ï¼šéƒ¨åˆ†åŠŸèƒ½éœ€æ˜¾å¼å¯ç”¨ç¼–è¯‘å™¨å¼€å…³ï¼ˆå¦‚ <code>#enable</code>ï¼‰</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š<code>Span&lt;T&gt;</code> éšå¼è½¬æ¢å¯å‡å°‘å†…å­˜æ‹·è´ï¼Œé€‚ç”¨äºé«˜æ€§èƒ½åœºæ™¯</li>
</ul>
<p>é€šè¿‡ä»¥ä¸‹ä»£ç éªŒè¯ç¯å¢ƒæ”¯æŒï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">Console.WriteLine(<span class="hljs-string">$"C# 14 enabled: <span class="hljs-subst">{RuntimeFeature.IsSupported(<span class="hljs-string">"CSharp14"</span>)}</span>"</span>);

</code></pre>
<h2 data-id="heading-10">NetCoreKevin</h2>
<p>åŸºäºNETæ­å»º-AIæ™ºèƒ½ä½“-ç°ä»£åŒ–Saasä¼ä¸šçº§å‰åç«¯åˆ†ç¦»æ¶æ„-å¼€å¯æ™ºèƒ½åº”ç”¨çš„æ— é™å¯èƒ½ï¼šå‰ç«¯Vue3ã€IDS4å•ç‚¹ç™»å½•ã€å¤šç¼“å­˜ã€è‡ªåŠ¨ä»»åŠ¡ã€åˆ†å¸ƒå¼ã€ä¸€åº“å¤šç§Ÿæˆ·ã€æ—¥å¿—ã€æˆæƒå’Œé‰´æƒã€CAPé›†æˆäº‹ä»¶ã€SignalRã€é¢†åŸŸäº‹ä»¶ã€MCPåè®®æœåŠ¡ã€IOCæ¨¡å—åŒ–æ³¨å…¥ã€ä»£ç ç”Ÿæˆå™¨ã€Quartzè‡ªåŠ¨ä»»åŠ¡ã€å¤šçŸ­ä¿¡é›†æˆã€AIã€AgentFrameworkæ™ºèƒ½ä½“ã€AISemanticKernelé›†æˆã€RAGæ£€ç´¢å¢å¼º
-é¡¹ç›®åœ°å€ï¼šgithubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjunkai-li%2FNetCoreKevin" target="_blank" title="https://github.com/junkai-li/NetCoreKevin" ref="nofollow noopener noreferrer">github.com/junkai-li/Nâ€¦</a>
Gitee: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fnetkevin-li%2FNetCoreKevin" target="_blank" title="https://gitee.com/netkevin-li/NetCoreKevin" ref="nofollow noopener noreferrer">gitee.com/netkevin-liâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯2025å¹´ç»ˆæ€»ç»“ï¼šå€Ÿç€AIåšå¤§åšå¼ºå†åˆ›è¾‰ç…Œ]]></title>    <link>https://juejin.cn/post/7593358143692374079</link>    <guid>https://juejin.cn/post/7593358143692374079</guid>    <pubDate>2026-01-12T00:39:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593358143692374079" data-draft-id="7576483553879392282" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯2025å¹´ç»ˆæ€»ç»“ï¼šå€Ÿç€AIåšå¤§åšå¼ºå†åˆ›è¾‰ç…Œ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-12T00:39:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯2025å¹´ç»ˆæ€»ç»“ï¼šå€Ÿç€AIåšå¤§åšå¼ºå†åˆ›è¾‰ç…Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T00:39:21.000Z" title="Mon Jan 12 2026 00:39:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    52
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>ä¸€çœ¨çœ¼åˆåˆ°å¹´æœ«ï¼Œä¹Ÿæ˜¯æˆ‘å¹²å‰ç«¯çš„ç¬¬7ä¸ªå¹´å¤´äº†ï¼Œèµ¶ä¸Šæ˜é‡‘çš„æ´»åŠ¨ï¼Œä¹Ÿæ˜¯æˆ‘çš„ä¸€ä¸ªç¢ç¢å¿µï¼Œé‚£å°±å†™ä¸ªå¹´ç»ˆæ€»ç»“å§ã€‚</p>
<h2 data-id="heading-0">1. æˆ‘çš„èŒä¸šç”Ÿæ¶¯</h2>
<p>æƒ³æƒ³æˆ‘ä¹Ÿæ˜¯å¾ˆå¹¸è¿çš„ï¼Œå…¥è¡Œçš„æ—¶å€™ITè¡Œä¸šå¦‚æ—¥ä¸­å¤©ï¼Œä¸è´¹åŠ›å°±æ‰¾äº†ä¸ª6Kçš„å·¥ä½œï¼Œåˆšè¿›å»å•¥ä¹Ÿä¸ä¼šï¼Œä»æœ€å¼€å§‹å†™jsRenderï¼ŒJQueryï¼Œåˆ°åæ¥ç–«æƒ…å°åœ¨å®¶é‡Œ2ä¸ªæœˆï¼Œçœ‹Bç«™è§†é¢‘è¾¹å­¦è¾¹æ•²demoå­¦äº†Vue2ï¼Œè§£å°åå…¬å¸å®äº†ï¼Œå…¥èŒäº†æ–°å…¬å¸é™†é™†ç»­ç»­åšäº†å‡ ä¸ªVueåå°é¡¹ç›®å’ŒH5ï¼Œå†åæ¥ï¼Œçœ‹æ–‡æ¡£æ•™ç¨‹ç”¨uniappå†™å°ç¨‹åºï¼Œç¬¬ä¸€ä¸ªè‡ªå·±å†™çš„å°ç¨‹åºä¸Šçº¿çš„æ—¶å€™è¿˜æ˜¯æŒºå¼€å¿ƒçš„ã€‚</p>
<p>åæ¥å«Œæ­¦æ±‰å·¥èµ„å¤ªä½äº†ï¼Œè·‘å»äº†æ·±åœ³ï¼Œé‚£æ—¶å€™è¡Œæƒ…çœŸçš„å¥½ï¼Œéšä¾¿ä¸€æ‰¾å°±æ˜¯åå‡ Kï¼Œå…‰é€Ÿå…¥èŒäº†ä¸€ä¸ªä¸­å°å‹å…¬å¸ï¼Œä¸å†æ˜¯å°ä½œåŠäº†ï¼Œæœ‰äº†å°å›¢é˜Ÿï¼Œç”šè‡³è¿˜æœ‰1~2å‘¨ä¸€æ¬¡çš„æŠ€æœ¯äº¤æµä¼šã€‚åæ¥Vue3æ­£å¼ç‰ˆæ¥äº†ï¼Œä¹Ÿå¼€å§‹å­¦Vue3åšæ–°é¡¹ç›®ï¼Œå­¦çš„è¿‡ç¨‹ä¸­è¿˜å†™äº†ä¸€ç‚¹åšå®¢ï¼Œä¹Ÿç®—å…¥äº†ä¸ªé—¨ã€‚</p>
<p>å†åæ¥ï¼Œç”Ÿæ´»åŸå› ï¼Œèµ¶åœ¨æ·±åœ³ç–«æƒ…å°åŸå‰ä¸€æ™šï¼Œåé£æœºåˆå›æ¥äº†æ­¦æ±‰ï¼Œæ— ç¼è¡”æ¥å…¥èŒäº†ä¸€å®¶å…¬å¸ï¼Œè™½ç„¶å°±æˆ‘ä¸€ä¸ªå‰ç«¯ï¼Œä½†æ˜¯æ°›å›´è¿˜å¯ä»¥ï¼Œä»0åˆ°1å¹²äº†å‡ ä¸ªé¡¹ç›®ï¼Œç»“æœç–«æƒ…ååå¤å¤ï¼Œæ­¦æ±‰å°åŸï¼Œåæ¥å…¬å¸ä¹Ÿè£å‘˜äº†2æ¬¡ï¼Œå¹¸è¿çš„æˆ‘é€ƒè¿‡2åŠ«ï¼ŒåšæŒåˆ°åº•äº†ã€‚</p>
<p>ä¸­é—´æäº†Nuxt.jsï¼Œè¿˜å…¼èŒæ”¹äº†ä¸€é˜µå­å®‰å“Kotlinçš„bugï¼Œå†åæ¥ï¼Œä¸æVueäº†ï¼Œæ–°é¡¹ç›®è€å¤§è¦æ±‚æ¢æˆReactï¼Œæˆ‘ä¸´é˜µç£¨æªå¼€å§‹å­¦React 18ï¼Œçœ‹äº†ä¼šæ•™ç¨‹ç›´æ¥è¾¹å­¦è¾¹å¹²ï¼Œç›´åˆ°é¡¹ç›®ä¸Šçº¿ï¼Œåé¢æ…¢æ…¢ä¼˜åŒ–ï¼Œä¹Ÿç®—æ˜¯å…¥é—¨äº†ã€‚é¡¹ç›®ç¨³å®šåï¼Œè€å¤§è¯´ï¼ŒæAppå§ï¼Œå¾—ï¼Œäºæ˜¯åˆå¼€å§‹å­¦Flutterï¼Œé…ç¯å¢ƒï¼Œå†™Demoï¼Œæ­æ¡†æ¶é‚£å«ä¸€ä¸ªéº»çƒ¦ï¼Œç£•ç£•ç»Šç»Šè¿˜æ˜¯ä¸Šçº¿äº†ï¼Œåé¢å°±è·Ÿæ¯é¸¡ä¸‹å´½ä¸€æ ·ï¼Œä¸Šçº¿äº†å¥½å‡ ä¸ªAPPã€‚è‡³æ­¤ï¼Œå‰ç«¯é¢†åŸŸé™¤äº†nodeJSã€Web3ã€GISé¡¹ç›®æ²¡å¹²è¿‡ï¼ŒåŸºæœ¬éƒ½è¯•è¿‡æ°´äº†ã€‚</p>
<h2 data-id="heading-1">2. æ¨ªç©ºå‡ºä¸–çš„AI</h2>
<p>2022 å¹´ 11 æœˆ 30 æ—¥ï¼ŒOpenAI æ­£å¼å‘å¸ƒ ChatGPTï¼Œå‘å¸ƒ 5 å¤©åç”¨æˆ·æ•°çªç ´ 100 ä¸‡ï¼Œ12 æœˆèµ·åœ¨æŠ€æœ¯åœˆå’Œç¤¾äº¤åª’ä½“å¿«é€Ÿä¼ æ’­ï¼Œæˆä¸ºçƒ­è®®è¯é¢˜ã€‚</p>
<p>ChatGPT å‘å¸ƒåˆæœŸå°±å…·å¤‡åŸºç¡€ä»£ç ç”Ÿæˆã€è§£é‡Šå’Œè°ƒè¯•èƒ½åŠ›ï¼Œç½‘ä¸Šå¾ˆå¤šå¼€å‘è€…åœ¨å°è¯•ï¼Œ2023 å¹´ 3 æœˆ GPT - 4 å‘å¸ƒï¼Œä»£ç ç”Ÿæˆã€ç†è§£å’Œè°ƒè¯•èƒ½åŠ›å¤§å¹…æå‡ã€‚</p>
<p>æˆ‘åˆšå¼€å§‹è¿˜æŒºæ–°å¥‡çš„ï¼Œåªæ˜¯è·Ÿä»–èŠå¤©ï¼Œè¿˜ä¸çŸ¥é“ä»–æœ‰å•¥ä½œç”¨ï¼Œåæ¥çœ‹åˆ°ç½‘ä¸Šæœ‰äººç”¨å®ƒå­¦è‹±è¯­ï¼Œå­¦å„ç§ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯ï¼Œäºæ˜¯æˆ‘ä¹Ÿè¯•ç€ç”¨äº†ä¸€ä¸‹ï¼Œéœ‡æƒŠåˆ°æˆ‘äº†ï¼Œå§æ§½ï¼Œé‚£æ—¶å€™æˆ‘åˆšå…¼èŒæ”¹äº†ä¸€é˜µå­å®‰å“Kotlinçš„bugï¼Œä¸€äº›é—®é¢˜å®Œå…¨ä¸ä¼šï¼Œä¸¢ç»™GPTå±…ç„¶èƒ½ç»™æˆ‘ä¿®å¤ä¸ªä¸ƒä¸ƒå…«å…«ï¼Œæˆ‘æ„Ÿè§‰å®ƒå®Œå…¨å°±æ˜¯ä¸€ä¸ªæ— æ€¨æ— æ‚”ä¸è¦å·¥èµ„çš„åŠ©æ‰‹ï¼Œéšæ—¶ç»™æˆ‘å¸®åŠ©å’Œæ•™å¯¼ã€‚</p>
<p>åæ¥ï¼Œå›½äº§AIä¹Ÿé™†ç»­å‡ºç°ï¼Œæˆ‘ç”¨è¿‡VS Codeé‡Œçš„æ’ä»¶ï¼Œæ„Ÿè§‰å†™äº†ä¸€æ®µä»£ç æˆ–è€…æ˜¯æ³¨é‡Šä¹‹åï¼Œè‡ªåŠ¨å‡ºç°ä¸‹ä¸€è¡Œæ¯”è¾ƒçƒ¦ï¼Œæœ‰æ—¶å€™æˆ‘æƒ³è¦å®ƒå‡ºç°ï¼Œç»“æœå¡å¡çš„ï¼Œæœ‰æ—¶å€™æˆ‘ä¸æƒ³è¦ï¼Œå®ƒç»™æˆ‘ç–¯ç‹‚æç¤ºã€‚åæ¥æˆ‘è¿˜æ˜¯æ¢æˆäº†åœ¨æµè§ˆå™¨é‡Œé—®åŒä¹‰çµç å’ŒGPTè¿™ç§æ–¹å¼ã€‚</p>
<p>å†åæ¥ï¼ŒCursorå½»åº•ç«äº†ï¼Œæˆ‘è¯•ç”¨äº†ä¸€ä¸‹ï¼Œåˆšå¼€å§‹æ„Ÿè§‰è·ŸVS Codeé‡ŒåŠ ä¸ªAIæ’ä»¶æ²¡å•¥åŒºåˆ«ï¼Œæ‰€ä»¥å°±å¼ƒç”¨äº†ã€‚å†åæ¥æ›´æ–°äº†ï¼Œå®ƒå¯ä»¥è¯»å–ä»£ç æ–‡ä»¶ï¼Œä¸Šä¸‹æ–‡æ›´é•¿ï¼Œæœ‰æ—¶å€™åªéœ€è¦æˆ‘è¯´ä¸€æ®µè¯æè¿°éœ€æ±‚ï¼Œå®ƒå°±ç»™æˆ‘å®Œæˆäº†80%äº†ï¼Œå°±ç®—æˆ‘ä¸éœ€è¦å®ƒç»™æˆ‘å†™ä¸šåŠ¡ä»£ç ï¼Œæˆ‘ä¹Ÿå¯ä»¥è®©ä»–åšä¸€äº›è„æ´»ç´¯æ´»ï¼Œæ¯”å¦‚ç”Ÿæˆä¸€äº›éº»çƒ¦çš„æ•°æ®ï¼ŒTSç±»å‹ï¼Œå›½é™…åŒ–çš„jsonç­‰ç­‰...ï¼Œä½†æ˜¯å®ƒå¤ªè´µäº†ï¼Œè¯•ç”¨æœŸè¿‡äº†ï¼Œæˆ‘å°±æ²¡ç”¨äº†ã€‚</p>
<p>å†åæ¥ï¼Œå›½äº§AIç¼–è¾‘å™¨ï¼ŒTraeä¹Ÿå‡ºç°äº†ï¼Œæ›´ä¾¿å®œçš„ä»·æ ¼ï¼Œæ•ˆæœä¹Ÿèƒ½è¾¾åˆ°æˆ‘çš„é¢„æœŸï¼Œåœ¨è¯•ç”¨æœŸè¿‡å®Œï¼Œæˆ‘æœæ–­è®¢é˜…äº†ä¼šå‘˜ï¼Œç»™æˆ‘çš„å·¥ä½œå¸¦æ¥äº†å¾ˆå¤§çš„å¸®åŠ©ã€‚</p>
<h2 data-id="heading-2">3. è°ˆè°ˆâ€œå‰ç«¯å·²æ­»ï¼Ÿâ€</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b60359c43f7c48bb9c24db9d34f3f3c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP5aSa5aSa:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768788827&amp;x-signature=vRi7%2Fg1c3kYhnHkW4R2PzRVbLg4%3D" alt="image_1768143083462.jpg" loading="lazy"/></p>
<p>è‡ªä»22å¹´åº•ï¼ŒAIå‡ºç°åï¼ŒæŠ€æœ¯åœˆä¸Šå……æ–¥ç€â€œå‰ç«¯å·²æ­»â€çš„å£°éŸ³ã€‚ä»€ä¹ˆAIå¯ä»¥å†™å‰ç«¯é¡µé¢å•¦ï¼Œäº§å“ç›´æ¥è®©AIåšï¼Œå»æ‰ä¸­é—´ç¯èŠ‚ã€‚å‰ç«¯å²—ä½æ²¡å•¦ã€‚</p>
<p>å›ºç„¶ï¼ŒAIæ˜¯å¯ä»¥æ›¿ä»£ä¸€éƒ¨åˆ†å‰ç«¯çš„å·¥ä½œï¼Œä¸€äº›ç®€å•çš„é¡µé¢ï¼Œä¸å¤ªå¤æ‚çš„åå°ç³»ç»Ÿï¼Œéƒ½å¯ä»¥è®©AIå¹²ï¼Œä½†æ˜¯ï¼Œè¿™é‡Œæˆ‘åˆ—ä¸€äº›ç¼ºç‚¹å’Œä¼˜ç‚¹ï¼Œæœ€åä¼šæ”¾ä¸Šä¸€äº›æ€è€ƒï¼Œä¹Ÿæ¬¢è¿å¤§å®¶è¡¥å……ã€‚</p>
<h3 data-id="heading-3">ç¼ºç‚¹</h3>
<ol>
<li>
<p>ç°åœ¨çš„åº”ç”¨å’Œç½‘é¡µï¼Œè¶Šæ¥è¶Šå¤æ‚äº†ï¼Œæ—©å·²ä¸æ˜¯ç®€å•çš„å¢åˆ æ”¹æŸ¥ï¼Œé€šå¸¸æ¶‰åŠå¤§é‡çš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œä¸€äº›ç¦»è°±çš„éœ€æ±‚å’Œäº¤äº’ï¼Œæœ‰äº›éœ€æ±‚ï¼Œè¿äº§å“éƒ½è¦æ¢³ç†åŠå¤©ï¼Œä½ è®©äº§å“ç›´æ¥ç”¨AIåšå‡ºæ¥æˆå“ï¼Œéš¾åº¦è¿˜æ˜¯å¾ˆå¤§çš„ã€‚</p>
</li>
<li>
<p>ä¸åŒäºä¸ªäººé¡¹ç›®ï¼Œå…¬å¸çš„é¡¹ç›®éƒ½æ˜¯æœ‰ä¸€ä¸ªè¿­ä»£çš„ï¼ŒAIå†™çš„ä»£ç ï¼Œåœ¨è§„èŒƒæ€§å’Œåˆç†æ€§ä¸Šï¼Œè¿˜æ˜¯ä¼šæœ‰ä¸€äº›çŸ­æ¿å’Œç¼ºé™·ï¼Œæœ¬æ¥é¡¹ç›®å¤§äº†å°±å®¹æ˜“æˆå±å±±ï¼Œè®©AIæï¼Œç°åœ¨è¿˜æ˜¯å·®ç‚¹ç«å€™ã€‚</p>
</li>
<li>
<p>æˆ‘ç”¨AIå†™å‡ºå‰ç«¯ä»£ç ï¼Œå°±ç®—å¾ˆå¤æ‚ï¼Œæˆ‘å¤§æ¦‚ä¹Ÿèƒ½è¯»å¾—æ‡‚çš„ï¼Œå› ä¸ºæˆ‘æ˜¯åšå‰ç«¯çš„ï¼Œæˆ‘æœ‰ç»éªŒã€‚ä½†æ˜¯ï¼Œä½ è®©ä¸€ä¸ªä¸æ‡‚çš„ï¼Œæˆ–è€…ç»éªŒå°‘çš„äººå‘˜ä½¿ç”¨AIåšå¤æ‚é¡¹ç›®ï¼Œé‚£ç¿»è½¦çš„å‡ ç‡è¿˜æ˜¯æœ‰ç‚¹å¤§çš„ã€‚</p>
</li>
<li>
<p>ç°åœ¨AIåœ¨å¤šæ–‡ä»¶ä¹‹é—´è¿˜æ˜¯æœ‰å¾ˆå¤§é—®é¢˜ï¼Œä¸Šä¸‹æ–‡ä¸€å¤šï¼Œæ¯”å¦‚åä¸ªæ–‡ä»¶æ‰€å…³è”çš„ï¼Œç»å¸¸å‡ºç°å¿˜è®°äº†çš„æƒ…å†µã€‚æˆ–è€…ä½ è®©å®ƒæ”¹Aï¼Œå®ƒé¡ºä¾¿åŠ¨äº†Bçš„æƒ…å†µï¼Œè®©äººå¾ˆå´©æºƒã€‚</p>
</li>
<li>
<p>ç”¨å¤šäº†AIï¼ŒçœŸçš„ä¼šå½±å“ä½ çš„ä»£ç æ°´å¹³ï¼Œä¸ç”¨AIè‡ªå·±éƒ½ä¸ä¼šå†™äº†......</p>
</li>
</ol>
<h3 data-id="heading-4">ä¼˜ç‚¹</h3>
<ol>
<li>è‡ªä»æœ‰äº†AIï¼Œå·¥ä½œæ•ˆç‡èµ·ç æé«˜äº†50%ï¼Œæœ‰é—®é¢˜å†ä¹Ÿä¸ç”¨ä¸Šç™¾åº¦è°·æ­ŒGitHub,Stack Overflowåˆ°å¤„æ‰¾äº†ã€‚</li>
<li>æœ‰äº†AIï¼Œä½ åªéœ€è¦è´Ÿè´£è¾“å‡ºéœ€æ±‚ï¼Œåªè¦ä½ æè¿°çš„å¤Ÿæ¸…æ™°ï¼Œé‚£ä¹ˆä½ çœŸçš„å¯ä»¥ä¸å†™ä»£ç ï¼Œå…‰å®¡æŸ¥ä»£ç å°±å¤Ÿäº†ã€‚</li>
<li>ä»¥å‰ï¼Œä½ å¯èƒ½åªä¼šVueï¼Œå¦‚æœéœ€è¦å†™Reactï¼Œä½ å¯èƒ½éœ€è¦çœ‹æ–‡æ¡£ï¼Œçœ‹æ•™å­¦è§†é¢‘ï¼Œå†™å‡ ä¸ªdemoï¼Œæ‰èƒ½å¼€å§‹åšé¡¹ç›®ï¼Œä½†æ˜¯ç°åœ¨ï¼Œä»»ä½•æŠ€æœ¯æ ˆï¼ŒAIéƒ½å¯ä»¥è¾…åŠ©ä½ å¿«é€Ÿçš„æŒæ¡ï¼ŒçœŸçš„å¾ˆç‰›ã€‚</li>
<li>AIå‘å±•è¿…é€Ÿï¼Œä»é—®ç­”å¼AIï¼Œåˆ°VS Codeæ’ä»¶ï¼Œå†åˆ°Cursorå’ŒTraeï¼Œç›¸ä¿¡æœªæ¥è¿˜ä¼šæ›´å¼ºã€‚</li>
</ol>
<h3 data-id="heading-5">æˆ‘çš„ç»“è®º</h3>
<p>è®²å®Œä¸€äº›ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œå¯¹äºâ€œå‰ç«¯å·²æ­»â€è¿™ä¸ªè¯´æ³•ï¼Œæˆ‘çš„æƒ³æ³•æ˜¯ï¼Œæ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯æ˜¯ä¸æ­»çš„ï¼Œæ­»å»çš„åªä¼šæ˜¯å¢¨å®ˆæˆè§„ï¼ŒåŸåœ°è¸æ­¥çš„å‰ç«¯ã€‚å› ä¸ºå·¥ä½œæ•ˆç‡å˜é«˜äº†ï¼Œä¸å¯é¿å…ä¸€äº›å²—ä½ä¼šè¢«å‹ç¼©ï¼Œä½†æ˜¯ï¼Œæ²¡æœ‰ä»€ä¹ˆå²—ä½ä¼šä¸€ç›´æ˜¯é¦™é¥½é¥½ï¼Œæˆ‘ä»¬åªèƒ½è¿æ¥å˜åŒ–ï¼Œé¢å¯¹æŒ‘æˆ˜ã€‚è€Œæ›´æ–°ï¼Œæ›´å…¨èƒ½ï¼ŒæŠ€æœ¯é¢æ›´å¹¿çš„å‰ç«¯ï¼Œä¹Ÿè®¸æ­£åœ¨èœ•å˜ä¸­ã€‚ä»¥å‰å¯èƒ½åªæ˜¯å†™ç½‘é¡µï¼Œå†™åå°ï¼Œå†™å°ç¨‹åºã€‚ä»¥åï¼Œæœ‰AIèµ‹èƒ½ï¼Œå¯ä»¥ä¼šçš„æ›´å¤šäº†ï¼Œè¯•è¯•å®¢æˆ·ç«¯ï¼ŒPCç«¯ï¼Œç”šè‡³æ˜¯è®¾è®¡ï¼Œäº§å“å’Œåç«¯ï¼Œæœ‰äº†AIåŠ©æ‰‹ï¼Œéƒ½å¯ä»¥å°è¯•ã€‚</p>
<h2 data-id="heading-6">4. æœªæ¥å±•æœ›</h2>
<p>è¯´èµ·æœªæ¥ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æˆ‘èƒ½åœ¨å‰ç«¯è¿™ä¸ªå²—ä½åšæŒå¤šä¹…ï¼Œå½“åˆåšè¿™è¡Œï¼Œä¹Ÿæ˜¯å› ä¸ºæˆ‘è§‰å¾—å‰ç«¯å¾ˆç¥å¥‡ï¼Œå‡ è¡Œä»£ç å°±å¯ä»¥å±•ç¤ºå‡ºå„ç§ç½‘é¡µå’Œæ ·å¼ï¼Œæ‰€å†™å³æ‰€å¾—ï¼Œç«‹é©¬å‡ºç°äº†æ•ˆæœï¼Œå¾ˆæœ‰æˆå°±æ„Ÿã€‚è€Œä¸”å½“åˆå²—ä½å·¥èµ„æ¯”èµ·åˆ«çš„å²—ä½ï¼ŒçœŸçš„æŒºå¤šçš„ã€‚</p>
<p>ä½†æ˜¯å·¥ä½œä¹…äº†ï¼Œå¿ƒæ€å°±å˜äº†ï¼Œæˆ‘å‘ç°çº¯åšæŠ€æœ¯å¾ˆéš¾æœ‰å‡ºè·¯ï¼Œè€Œä¸”æ¯”æˆ‘ç‰›çš„äººå¤ªå¤šäº†ï¼Œæˆ‘è¿å¤§å‚éƒ½æ²¡è¿›è¿‡ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¥½æ‹¿å¾—å‡ºæ‰‹çš„å¼€æºæŠ€æœ¯å’Œé¡¹ç›®ã€‚æˆ‘ä¸æ˜¯é‚£ç§çƒ­çˆ±æŠ€æœ¯é’»ç ”æŠ€æœ¯çš„äººï¼Œç°åœ¨ï¼Œä¹Ÿæ²¡æœ‰å½“å¹´é‚£ç§ä¸‹ç­äº†è¿˜å›å®¶å†™ä»£ç åšå°ç©æ„çš„æ¿€æƒ…äº†ã€‚æˆ‘ä¹Ÿæ¯”è¾ƒå†…å‘ï¼Œå½“åˆè¯»ä¹¦çš„æ—¶å€™ï¼Œä½“éªŒè¿‡åšé”€å”®ï¼Œé‚£å«ä¸€ä¸ªéš¾å—ã€‚æ‰€ä»¥é‚£æ—¶å€™æˆ‘å°±çŸ¥é“ï¼Œæˆ‘è¿˜æ˜¯åšæŠ€æœ¯å²—æ¯”è¾ƒå¥½ï¼Œä¸éœ€è¦é‚£ä¹ˆå¤–å‘ï¼Œè¯´é‚£ä¹ˆå¤šè¯ï¼Œè¿˜æŒºå¥½ã€‚</p>
<p>æˆ‘å¯¹æœªæ¥çš„å±•æœ›å°±æ˜¯ï¼ŒåšæŒå·¥ä½œï¼Œæ¢ç´¢æ›´å¤šå‰ç«¯çš„å¯èƒ½æ€§ï¼ˆæ„Ÿè§‰æœ‰äº†AIæˆ‘å­¦å•¥æŠ€æœ¯æ ˆéƒ½ä¸æ‹…å¿ƒäº†ï¼‰ï¼Œç›´åˆ°æˆ‘è¢«è£ï¼Œç›´è‡³æ‰¾ä¸åˆ°å·¥ä½œä¸ºæ­¢ã€‚åœ¨ç”Ÿæ´»ä¸­ï¼Œé”»ç‚¼èº«ä½“ï¼Œæˆ‘ä¹Ÿå‡†å¤‡åšä¸€äº›å°é¡¹ç›®ï¼Œæ­£åœ¨ç§¯æ”’ç‚¹å­ã€‚å…¶ä»–çš„æˆ‘ä¹Ÿæ²¡æƒ³å¥½ï¼Œç®¡ä»–çš„ï¼Œæƒ³é‚£ä¹ˆå¤šå¹²ä»€ä¹ˆã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7568192652286754870" target="_blank" title="https://juejin.cn/post/7568192652286754870">çº¯å‰ç«¯æå–å›¾ç‰‡é¢œè‰²æ’ä»¶Color-Thiefæ•™å­¦+å®æˆ˜å®Œæ•´æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7565737512816771135" target="_blank" title="https://juejin.cn/post/7565737512816771135">react-konvaå®æˆ˜æŒ‡å—ï¼šCanvasé«˜æ€§èƒ½+æ˜“ç»´æŠ¤çš„ç»„ä»¶åŒ–å›¾å½¢å¼€å‘å®ç°æ•™ç¨‹</a></li>
<li><a href="https://juejin.cn/post/7560905838074462271" target="_blank" title="https://juejin.cn/post/7560905838074462271">Reactæ— é™æ»šåŠ¨æ’ä»¶react-infinite-scroll-componentçš„é…ç½®+ä¼˜åŒ–+é¿å‘æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7560542615484137491" target="_blank" title="https://juejin.cn/post/7560542615484137491">å‰ç«¯éŸ³é¢‘å…¼å®¹è§£å†³ï¼šéŸ³é¢‘ç¥å™¨howler.jsä»åŸºç¡€åˆ°è¿›é˜¶å®Œæ•´ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7559871680015024169" target="_blank" title="https://juejin.cn/post/7559871680015024169">ä½¿ç”¨React-OAuthè¿›è¡ŒGoogle/GitHubç™»å½•çš„æ•™ç¨‹å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7550585427834404927" target="_blank" title="https://juejin.cn/post/7550585427834404927">çº¯å‰ç«¯äººè„¸è¯†åˆ«åˆ©å™¨ï¼šface-api.jsæ‰‹æŠŠæ‰‹æ·±å…¥è§£ææ•™å­¦</a></li>
<li><a href="https://juejin.cn/post/7553865490732433462" target="_blank" title="https://juejin.cn/post/7553865490732433462">å…³äºReactçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•forwardRefçš„è¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7553484874609410074" target="_blank" title="https://juejin.cn/post/7553484874609410074">Reactè·¨ç»„ä»¶æ•°æ®å…±äº«useContextè¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7545087762837815334" target="_blank" title="https://juejin.cn/post/7545087762837815334">Webå›¾åƒç¼–è¾‘ç¥å™¨tui.image-editorä»åŸºç¡€åˆ°è¿›é˜¶çš„å®æˆ˜æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7544323659788288046" target="_blank" title="https://juejin.cn/post/7544323659788288046">å¼€å‘ä¸ªäººå¾®ä¿¡å°ç¨‹åºç±»ç›®é€‰æ‹©/ç›ˆåˆ©æ–¹å¼/æˆæœ¬æ§åˆ¶ä¸æœåŠ¡å™¨æ¥å…¥æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7541741121400864778" target="_blank" title="https://juejin.cn/post/7541741121400864778">å‰ç«¯å›¾ç‰‡è£å‰ªCropper.jsæ ¸å¿ƒåŠŸèƒ½ä¸å®æˆ˜æŠ€å·§è¯¦è§£</a></li>
<li><a href="https://juejin.cn/post/7536530451461472265" target="_blank" title="https://juejin.cn/post/7536530451461472265">ç¼–è¾‘å™¨ä¹Ÿæœ‰é‚ªä¿®ï¼Ÿç›˜ç‚¹VS Codeé‚ªé—¨/æœ‰è¶£çš„æ‰©å±•</a></li>
<li><a href="https://juejin.cn/post/7535005018257981466" target="_blank" title="https://juejin.cn/post/7535005018257981466">jsä½¿ç”¨IntersectionObserverå®ç°ç›®æ ‡å…ƒç´ å¯è§åº¦çš„äº¤äº’</a></li>
<li><a href="https://juejin.cn/post/7534547200330121225" target="_blank" title="https://juejin.cn/post/7534547200330121225">Webå‰ç«¯é¡µé¢å¼€å‘é˜¿æ‹‰ä¼¯è¯­ç§é€‚é…æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7516122409948020736" target="_blank" title="https://juejin.cn/post/7516122409948020736">è®©ç½‘é¡µæ‹¥æœ‰Appä½“éªŒï¼ŸPWA å°†ç½‘é¡µå˜ä¸ºæ¡Œé¢åº”ç”¨çš„ä¿å§†çº§æ•™ç¨‹PWA</a></li>
<li><a href="https://juejin.cn/post/6953803916484018206" target="_blank" title="https://juejin.cn/post/6953803916484018206">ä½¿ç”¨nvmç®¡ç†node.jsç‰ˆæœ¬ä»¥åŠæ›´æ¢npmæ·˜å®é•œåƒæº</a></li>
<li><a href="https://juejin.cn/post/7140443283209060383" target="_blank" title="https://juejin.cn/post/7140443283209060383">æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè§„èŒƒçš„å›¢é˜Ÿvueé¡¹ç›®ï¼ŒåŒ…å«commitlintï¼Œeslintï¼Œprettierï¼Œhuskyï¼Œcommitizenç­‰ç­‰</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot å®ç°ç½‘ç»œé™é€Ÿ]]></title>    <link>https://juejin.cn/post/7593595780222189574</link>    <guid>https://juejin.cn/post/7593595780222189574</guid>    <pubDate>2026-01-12T00:34:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593595780222189574" data-draft-id="7593713738856546342" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot å®ç°ç½‘ç»œé™é€Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-12T00:34:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£è±¡å—"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428655159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot å®ç°ç½‘ç»œé™é€Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428655159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£è±¡å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T00:34:33.000Z" title="Mon Jan 12 2026 00:34:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    49
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>æœ¬æ–‡ä»‹ç»åœ¨ Spring Boot 3 ä¸­å®ç°å¤šç»´åº¦ç½‘ç»œå¸¦å®½é™é€Ÿçš„å®Œæ•´æ–¹æ¡ˆã€‚åŸºäº<strong>ä»¤ç‰Œæ¡¶ç®—æ³•</strong>æ‰‹åŠ¨å®ç°æ ¸å¿ƒé€»è¾‘ï¼Œé€šè¿‡è‡ªå®šä¹‰ <code>HandlerInterceptor</code> æ‹¦æˆªè¯·æ±‚ã€<code>HttpServletResponseWrapper</code> åŒ…è£…å“åº”æµã€<code>RateLimitedOutputStream</code> æ§åˆ¶è¾“å‡ºé€Ÿç‡ï¼Œå®ç°å¯¹æ–‡ä»¶ä¸‹è½½ã€è§†é¢‘æµç­‰åœºæ™¯çš„ç²¾ç¡®é€Ÿåº¦æ§åˆ¶ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦å¸¦å®½é™é€Ÿ</h2>
<p>å¸¦å®½é™é€Ÿä¸å¸¸è§çš„ API é™æµä¸åŒï¼šé™æµæ§åˆ¶çš„æ˜¯<strong>è¯·æ±‚æ¬¡æ•°</strong>ï¼ˆå¦‚æ¯åˆ†é’Ÿ100æ¬¡ï¼‰ï¼Œè€Œé™é€Ÿæ§åˆ¶çš„æ˜¯<strong>ç½‘ç»œå¸¦å®½</strong>ï¼ˆå¦‚æ¯ç§’200KBï¼‰ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¸¦å®½é™é€Ÿæœ‰ç€é‡è¦çš„ä¸šåŠ¡ä»·å€¼ï¼š</p>
<p><strong>åœºæ™¯ä¸€ï¼šæ–‡ä»¶ä¸‹è½½æœåŠ¡</strong>
å¯¹äºç½‘ç›˜æˆ–èµ„æºåˆ†å‘å¹³å°ï¼Œå…è´¹ç”¨æˆ·é™åˆ¶åœ¨ 200KB/sï¼ŒVIP ç”¨æˆ·æå‡åˆ° 2MB/sï¼Œæ—¢èƒ½ä¿éšœåŸºç¡€ä½“éªŒï¼Œåˆèƒ½æ¿€åŠ±ä»˜è´¹è½¬åŒ–ã€‚</p>
<p><strong>åœºæ™¯äºŒï¼šè§†é¢‘æµåª’ä½“</strong>
ä¸åŒæ¸…æ™°åº¦å¯¹åº”ä¸åŒå¸¦å®½é™åˆ¶ï¼ˆ480P ç”¨ 500KB/sï¼Œ1080P ç”¨ 3MB/sï¼‰ï¼Œé¿å…é«˜ç ç‡è§†é¢‘å ç”¨è¿‡å¤šæœåŠ¡å™¨å¸¦å®½ã€‚</p>
<p><strong>åœºæ™¯ä¸‰ï¼šAPI æ¥å£ä¿æŠ¤</strong>
å¤§æ•°æ®é‡æ¥å£ï¼ˆå¦‚å¯¼å‡ºæŠ¥è¡¨ï¼‰å¦‚æœæ²¡æœ‰å¸¦å®½æ§åˆ¶ï¼Œå•ä¸ªè¯·æ±‚å¯èƒ½å æ»¡æ•´ä¸ªå‡ºå£å¸¦å®½ï¼Œå½±å“å…¶ä»–ç”¨æˆ·è®¿é—®ã€‚</p>
<h2 data-id="heading-2">æ ¸å¿ƒåŸç†ï¼šä»¤ç‰Œæ¡¶ç®—æ³•</h2>
<p>ä»¤ç‰Œæ¡¶ç®—æ³•æ˜¯æµé‡æ§åˆ¶çš„ç»å…¸æ–¹æ¡ˆï¼Œå…¶æ€æƒ³éå¸¸ç›´è§‚ï¼šæƒ³è±¡ä¸€ä¸ªæ¡¶ï¼Œç³»ç»Ÿä»¥å›ºå®šé€Ÿç‡å‘æ¡¶ä¸­æ”¾å…¥ä»¤ç‰Œï¼Œè¯·æ±‚æ•°æ®æ—¶å¿…é¡»ä»æ¡¶ä¸­å–èµ°å¯¹åº”æ•°é‡çš„ä»¤ç‰Œã€‚</p>
<p><strong>æ ¸å¿ƒå‚æ•°è§£æï¼š</strong></p>
<p><strong>1. æ¡¶å®¹é‡ï¼ˆCapacityï¼‰</strong>ï¼šå†³å®šèƒ½æ‰¿å—å¤šå¤§çªå‘æµé‡ã€‚å®¹é‡ä¸º 200KB æ—¶ï¼Œå³ä½¿æ¡¶å·²æ»¡ï¼Œæœ€å¤šä¹Ÿåªèƒ½è¿ç»­å‘é€ 200KB æ•°æ®ï¼Œä¹‹åå¿…é¡»ç­‰å¾…ä»¤ç‰Œè¡¥å……ã€‚</p>
<p><strong>2. å¡«å……é€Ÿç‡ï¼ˆRefill Rateï¼‰</strong>ï¼šå†³å®šé•¿æœŸå¹³å‡ä¼ è¾“é€Ÿåº¦ã€‚æ¯ç§’è¡¥å…… 200KB ä»¤ç‰Œï¼Œæ„å‘³ç€å¹³å‡é€Ÿåº¦å°±æ˜¯ 200KB/sã€‚</p>
<p><strong>3. åˆ†å—å¤§å°ï¼ˆChunk Sizeï¼‰</strong>ï¼šå½±å“æµé‡å¹³æ»‘åº¦ã€‚å°† 8KB æ•°æ®æ‹†åˆ†æˆ 2KBÃ—4 æ¬¡å†™å…¥ï¼Œæ¯æ¬¡å†™å…¥ä¹‹é—´è¿›è¡Œä»¤ç‰Œæ£€æŸ¥ï¼Œæ¯”ä¸€æ¬¡æ€§å†™å…¥ 8KB æ›´åŠ å¹³æ»‘ã€‚</p>
<p><strong>ç®—æ³•æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">å‘é€æ•°æ®å‰ï¼š
<span class="hljs-bullet">1.</span> è®¡ç®—è·ç¦»ä¸Šæ¬¡è¡¥å……çš„æ—¶é—´å·®
<span class="hljs-bullet">2.</span> æ ¹æ® æ—¶é—´å·® Ã— å¡«å……é€Ÿç‡ è®¡ç®—æ–°å¢ä»¤ç‰Œæ•°
<span class="hljs-bullet">3.</span> æ›´æ–°æ¡¶ä¸­ä»¤ç‰Œæ•°ï¼ˆä¸è¶…è¿‡å®¹é‡ä¸Šé™ï¼‰

å‘é€æ•°æ®æ—¶ï¼š
<span class="hljs-bullet">1.</span> æ£€æŸ¥ä»¤ç‰Œæ˜¯å¦è¶³å¤Ÿ
<span class="hljs-bullet">2.</span> è¶³å¤Ÿï¼šç›´æ¥æ‰£é™¤ä»¤ç‰Œï¼Œå‘é€æ•°æ®
<span class="hljs-bullet">3.</span> ä¸è¶³ï¼šè®¡ç®— (ç¼ºå°‘ä»¤ç‰Œæ•° / å¡«å……é€Ÿç‡) å¾—åˆ°ç­‰å¾…æ—¶é—´ï¼Œç²¾ç¡®ç­‰å¾…åå‘é€
</code></pre>
<h2 data-id="heading-3">æŠ€æœ¯è®¾è®¡</h2>
<h4 data-id="heading-4">æ•´ä½“æµç¨‹</h4>
<p>æœ¬æ–¹æ¡ˆé‡‡ç”¨æ‹¦æˆªå™¨æ¨¡å¼ï¼Œåœ¨è¯·æ±‚å¤„ç†çš„æ—©æœŸé˜¶æ®µå®Œæˆé™é€Ÿç»„ä»¶çš„åˆå§‹åŒ–ï¼Œé€šè¿‡è¯·æ±‚å±æ€§ä¼ é€’åŒ…è£…åçš„å“åº”å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">è¯·æ±‚æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">1</span>. DispatcherServlet åˆ†å‘è¯·æ±‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">2</span>. BandwidthLimitInterceptor<span class="hljs-selector-class">.preHandle</span>()                            â”‚
â”‚    - è§£æ <span class="hljs-keyword">@BandwidthLimit</span> æ³¨è§£                                      â”‚
â”‚    - ä» BandwidthLimitManager è·å–å…±äº« TokenBucket                   â”‚
â”‚    - åˆ›å»º BandwidthLimitResponseWrapper å¹¶å­˜å…¥ request attribute    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">3</span>. Controller å¤„ç†è¯·æ±‚                                              â”‚
â”‚    - é€šè¿‡ BandwidthLimitHelper.getLimitedResponse() è·å–åŒ…è£…åçš„å“åº” â”‚
â”‚    - å‘å“åº”æµå†™å…¥æ•°æ®ï¼ˆè‡ªåŠ¨è§¦å‘é™é€Ÿï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">4</span>. BandwidthLimitInterceptor.afterCompletion()                      â”‚
â”‚    - æ¸…ç†èµ„æºï¼Œå…³é—­æµ                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-5">ä¸ºä»€ä¹ˆé€‰æ‹© HandlerInterceptor</h4>
<p>åœ¨ Spring Boot ä¸­å®ç°è¯·æ±‚å¤„ç†ï¼Œæœ‰ä¸¤ç§å¸¸è§æ–¹å¼ï¼šFilter å’Œ HandlerInterceptorã€‚æœ¬æ–¹æ¡ˆé€‰æ‹© HandlerInterceptor çš„å…³é”®åŸå› æ˜¯ï¼š<strong>æ³¨è§£è§£æéœ€è¦ HandlerMethod å¯¹è±¡</strong>ã€‚</p>
<p>Filter åœ¨ DispatcherServlet ä¹‹å‰æ‰§è¡Œï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰ç¡®å®šå…·ä½“çš„å¤„ç†æ–¹æ³•ï¼Œæ— æ³•è·å–æ–¹æ³•ä¸Šçš„ <code>@BandwidthLimit</code> æ³¨è§£ã€‚è€Œ HandlerInterceptor åœ¨å¤„ç†å™¨ç¡®å®šåæ‰§è¡Œï¼Œå¯ä»¥é€šè¿‡ <code>HandlerMethod</code> ç²¾ç¡®è·å–æ–¹æ³•çº§åˆ«å’Œç±»çº§åˆ«çš„æ³¨è§£ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-6">æ ¸å¿ƒç»„ä»¶èŒè´£</h4>





































<table><thead><tr><th>ç»„ä»¶</th><th>èŒè´£</th></tr></thead><tbody><tr><td><code>@BandwidthLimit</code></td><td>å£°æ˜å¼æ³¨è§£ï¼Œé…ç½®é™é€Ÿå‚æ•°</td></tr><tr><td><code>BandwidthLimitInterceptor</code></td><td>æ‹¦æˆªè¯·æ±‚ï¼Œè§£ææ³¨è§£ï¼Œåˆ›å»ºå“åº”åŒ…è£…å™¨</td></tr><tr><td><code>BandwidthLimitManager</code></td><td>ç®¡ç†å¤šç»´åº¦é™é€Ÿæ¡¶ï¼ˆå…¨å±€/API/ç”¨æˆ·/IPï¼‰</td></tr><tr><td><code>BandwidthLimitResponseWrapper</code></td><td>åŒ…è£… HttpServletResponseï¼Œæ›¿æ¢ OutputStream</td></tr><tr><td><code>RateLimitedOutputStream</code></td><td>å®ç°é™é€Ÿé€»è¾‘ï¼ŒåŒ…è£… TokenBucket</td></tr><tr><td><code>TokenBucket</code></td><td>ä»¤ç‰Œæ¡¶ç®—æ³•å®ç°</td></tr><tr><td><code>BandwidthLimitHelper</code></td><td>ä»è¯·æ±‚å±æ€§ä¸­è·å–åŒ…è£…åçš„å“åº”å¯¹è±¡</td></tr></tbody></table>
<h2 data-id="heading-7">å¤šç»´åº¦é™é€Ÿå®ç°</h2>
<p>æœ¬æ–¹æ¡ˆæ”¯æŒå››ç§é™é€Ÿç»´åº¦ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯éœ€æ±‚ï¼š</p>
<h4 data-id="heading-8">å…¨å±€é™é€Ÿï¼ˆGLOBALï¼‰</h4>
<p>æ‰€æœ‰è¯·æ±‚å…±äº«åŒä¸€ä¸ªé™é€Ÿæ¡¶ï¼Œé€‚åˆä¿æŠ¤æœåŠ¡å™¨æ•´ä½“å‡ºå£å¸¦å®½ã€‚ä¾‹å¦‚è®¾ç½® 10MB/s å…¨å±€é™åˆ¶ï¼Œå³ä½¿æœ‰100ä¸ªå¹¶å‘ä¸‹è½½ï¼Œæ€»å¸¦å®½ä¹Ÿä¸ä¼šè¶…è¿‡ 10MB/sã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@BandwidthLimit(value = 200, unit = BandwidthUnit.KB, type = LimitType.GLOBAL)</span>
<span class="hljs-meta">@GetMapping("/download/global")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">downloadGlobal</span><span class="hljs-params">(HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-type">HttpServletResponse</span> <span class="hljs-variable">limitedResponse</span> <span class="hljs-operator">=</span> BandwidthLimitHelper.getLimitedResponse(request, response);
    <span class="hljs-comment">// å†™å…¥æ•°æ®...</span>
}
</code></pre>
<h4 data-id="heading-9">API ç»´åº¦é™é€Ÿï¼ˆAPIï¼‰</h4>
<p>æ¯ä¸ªæ¥å£è·¯å¾„ç‹¬ç«‹é™é€Ÿï¼Œä¸åŒæ¥å£çš„æµé‡äº’ä¸å½±å“ã€‚<code>/api/file/download</code> é™åˆ¶ 500KB/sï¼Œ<code>/api/video/stream</code> é™åˆ¶ 2MB/sï¼Œä¸¤ä¸ªæ¥å£å¯ä»¥åŒæ—¶è¾¾åˆ°å„è‡ªçš„é€Ÿåº¦ä¸Šé™ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@BandwidthLimit(value = 500, unit = BandwidthUnit.KB, type = LimitType.API)</span>
<span class="hljs-meta">@GetMapping("/download/file")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">downloadFile</span><span class="hljs-params">(HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-comment">// æ–‡ä»¶ä¸‹è½½é€»è¾‘</span>
}

<span class="hljs-meta">@BandwidthLimit(value = 2048, unit = BandwidthUnit.KB, type = LimitType.API)</span>
<span class="hljs-meta">@GetMapping("/stream/video")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">streamVideo</span><span class="hljs-params">(HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-comment">// è§†é¢‘æµé€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-10">ç”¨æˆ·ç»´åº¦é™é€Ÿï¼ˆUSERï¼‰</h4>
<p>æ ¹æ®ç”¨æˆ·æ ‡è¯†ï¼ˆå¦‚è¯·æ±‚å¤´ <code>X-User-Id</code>ï¼‰è¿›è¡Œé™é€Ÿï¼Œæ¯ä¸ªç”¨æˆ·ç‹¬ç«‹è®¡ç®—å¸¦å®½ã€‚é…åˆ <code>free</code> å’Œ <code>vip</code> å‚æ•°ï¼Œå¯å®ç°å·®å¼‚åŒ–æœåŠ¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@BandwidthLimit(value = 200, unit = BandwidthUnit.KB, type = LimitType.USER,
                free = 200, vip = 2048)</span>
<span class="hljs-meta">@GetMapping("/download/user")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">downloadByUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestHeader("X-User-Type")</span> String userType,
                           HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-comment">// æ ¹æ®è¯·æ±‚å¤´ X-User-Type è‡ªåŠ¨åº”ç”¨ 200KB/s æˆ– 2MB/s é™é€Ÿ</span>
}
</code></pre>
<h4 data-id="heading-11">IP ç»´åº¦é™é€Ÿï¼ˆIPï¼‰</h4>
<p>æ ¹æ®å®¢æˆ·ç«¯ IP åœ°å€é™é€Ÿï¼Œé˜²æ­¢å•ä¸ª IP å ç”¨è¿‡å¤šå¸¦å®½ã€‚æ”¯æŒä»£ç†ç¯å¢ƒä¸‹çš„ IP è·å–ï¼ˆX-Forwarded-Forã€X-Real-IPï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@BandwidthLimit(value = 300, unit = BandwidthUnit.KB, type = LimitType.IP)</span>
<span class="hljs-meta">@GetMapping("/download/ip")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">downloadByIp</span><span class="hljs-params">(HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-comment">// æ¯ä¸ªç‹¬ç«‹ IP é™åˆ¶ 300KB/s</span>
}
</code></pre>
<h2 data-id="heading-12">å…³é”®ä»£ç å®ç°</h2>
<h4 data-id="heading-13">1. ä»¤ç‰Œæ¡¶æ ¸å¿ƒç®—æ³•</h4>
<p>TokenBucket çš„æ ¸å¿ƒåœ¨äºç²¾ç¡®çš„æ—¶é—´è®¡ç®—å’Œä»¤ç‰Œè¡¥å……ã€‚ä½¿ç”¨ <code>System.nanoTime()</code> è·å–çº³ç§’çº§æ—¶é—´æˆ³ï¼Œç¡®ä¿é«˜ç²¾åº¦é€Ÿç‡æ§åˆ¶ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">acquire</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-keyword">permits</span>)</span> {
    <span class="hljs-comment">// 1. è¡¥å……ä»¤ç‰Œ</span>
    refill();

    <span class="hljs-comment">// 2. è®¡ç®—ç­‰å¾…æ—¶é—´</span>
    <span class="hljs-keyword">if</span> (tokens &gt;= <span class="hljs-keyword">permits</span>) {
        tokens -= <span class="hljs-keyword">permits</span>;
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-type">long</span> <span class="hljs-variable">deficit</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">permits</span> - tokens;
    <span class="hljs-type">long</span> <span class="hljs-variable">waitNanos</span> <span class="hljs-operator">=</span> (deficit * <span class="hljs-number">1_000_000_000L</span>) / refillRate;

    <span class="hljs-comment">// 3. ç²¾ç¡®ç­‰å¾…</span>
    sleepNanos(waitNanos);

    <span class="hljs-comment">// 4. ç­‰å¾…åæ¶ˆè´¹</span>
    tokens = <span class="hljs-number">0</span>;
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">refill</span><span class="hljs-params">()</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> System.nanoTime();
    <span class="hljs-type">long</span> <span class="hljs-variable">elapsedNanos</span> <span class="hljs-operator">=</span> now - lastRefillTime;
    <span class="hljs-type">long</span> <span class="hljs-variable">newTokens</span> <span class="hljs-operator">=</span> (elapsedNanos * refillRate) / <span class="hljs-number">1_000_000_000L</span>;
    tokens = Math.min(capacity, tokens + newTokens);
    lastRefillTime = now;
}
</code></pre>
<h4 data-id="heading-14">2. å“åº”åŒ…è£…å™¨</h4>
<p>HttpServletResponseWrapper æ˜¯ Servlet è§„èŒƒæä¾›çš„å“åº”åŒ…è£…åŸºç±»ï¼Œé€šè¿‡è¦†ç›– <code>getOutputStream()</code> æ–¹æ³•è¿”å›è‡ªå®šä¹‰çš„é™é€Ÿè¾“å‡ºæµã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BandwidthLimitResponseWrapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServletResponseWrapper</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TokenBucket sharedTokenBucket;  <span class="hljs-comment">// å…±äº«çš„ä»¤ç‰Œæ¡¶</span>

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ServletOutputStream <span class="hljs-title function_">getOutputStream</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">if</span> (limitedOutputStream == <span class="hljs-literal">null</span> &amp;&amp; sharedTokenBucket != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ä½¿ç”¨å…±äº« TokenBucketï¼Œç¡®ä¿å¤šç»´åº¦ç»Ÿè®¡æ­£ç¡®</span>
            limitedOutputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RateLimitedOutputStream</span>(
                <span class="hljs-built_in">super</span>.getOutputStream(),
                sharedTokenBucket,
                bandwidthBytesPerSecond
            );
        }
        <span class="hljs-keyword">return</span> limitedOutputStream;
    }
}
</code></pre>
<h4 data-id="heading-15">3. æ‹¦æˆªå™¨è·å–åŒ…è£…å“åº”</h4>
<p>æ‹¦æˆªå™¨åœ¨ <code>preHandle</code> ä¸­åˆ›å»ºå“åº”åŒ…è£…å™¨ï¼Œå­˜å‚¨åˆ° request attributeï¼ŒController é€šè¿‡ <code>BandwidthLimitHelper</code> è·å–ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> {
    <span class="hljs-type">BandwidthLimit</span> <span class="hljs-variable">annotation</span> <span class="hljs-operator">=</span> findAnnotation(handler);
    <span class="hljs-keyword">if</span> (annotation != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// ä» Manager è·å–å…±äº« TokenBucket</span>
        <span class="hljs-type">TokenBucket</span> <span class="hljs-variable">bucket</span> <span class="hljs-operator">=</span> limitManager.getBucket(type, key, capacity, rate);

        <span class="hljs-comment">// åˆ›å»ºåŒ…è£…å™¨å¹¶å­˜å‚¨</span>
        <span class="hljs-type">BandwidthLimitResponseWrapper</span> <span class="hljs-variable">wrappedResponse</span> <span class="hljs-operator">=</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">BandwidthLimitResponseWrapper</span>(response, bucket, bandwidthBytesPerSecond, chunkSize);
        request.setAttribute(<span class="hljs-string">"BandwidthLimitWrappedResponse"</span>, wrappedResponse);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<h4 data-id="heading-16">4. Controller è·å–é™é€Ÿå“åº”</h4>
<p>Controller é€šè¿‡ <code>BandwidthLimitHelper.getLimitedResponse()</code> è·å–åŒ…è£…åçš„å“åº”ï¼Œæ‰€æœ‰å†™å…¥æ“ä½œéƒ½ä¼šè‡ªåŠ¨é™é€Ÿã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping("/download/global")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">downloadGlobal</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-type">HttpServletResponse</span> <span class="hljs-variable">limitedResponse</span> <span class="hljs-operator">=</span> BandwidthLimitHelper.getLimitedResponse(request, response);

    limitedResponse.setContentType(<span class="hljs-string">"application/octet-stream"</span>);
    limitedResponse.setHeader(<span class="hljs-string">"Content-Disposition"</span>, <span class="hljs-string">"attachment; filename=test.bin"</span>);

    <span class="hljs-comment">// å†™å…¥æ•°æ®æ—¶è‡ªåŠ¨é™é€Ÿ</span>
    limitedResponse.getOutputStream().write(data);
}
</code></pre>
<h2 data-id="heading-17">å‚æ•°è°ƒä¼˜æŒ‡å—</h2>
<h4 data-id="heading-18">æ¡¶å®¹é‡é€‰æ‹©</h4>
<p>å®¹é‡å†³å®šçªå‘æµé‡æ‰¿å—èƒ½åŠ›ï¼š</p>

























<table><thead><tr><th>å®¹é‡è®¾ç½®</th><th>çªå‘èƒ½åŠ›</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>é€Ÿç‡ Ã— 0.5</td><td>å¹³æ»‘ï¼Œæ— çªå‘</td><td>æµé‡æ§åˆ¶ä¸¥æ ¼çš„åœºæ™¯</td></tr><tr><td>é€Ÿç‡ Ã— 1.0</td><td>å…è®¸ 1 ç§’çªå‘</td><td>é»˜è®¤æ¨èå€¼</td></tr><tr><td>é€Ÿç‡ Ã— 2.0</td><td>å…è®¸ 2 ç§’çªå‘</td><td>éœ€è¦è‰¯å¥½é¦–å±åŠ è½½</td></tr></tbody></table>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ³¨è§£é…ç½®</span>
<span class="hljs-meta">@BandwidthLimit(value = 200, unit = BandwidthUnit.KB, capacityMultiplier = 1.0)</span>
</code></pre>
<h4 data-id="heading-19">åˆ†å—å¤§å°é€‰æ‹©</h4>
<p>åˆ†å—å¤§å°å½±å“æµé‡å¹³æ»‘åº¦ï¼Œç»éªŒå…¬å¼ï¼š<code>chunkSize = bandwidth / 50</code></p>

























<table><thead><tr><th>å¸¦å®½</th><th>æ¨èåˆ†å—</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>200 KB/s</td><td>1-4 KB</td><td>å°åˆ†å—ä¿è¯å¹³æ»‘</td></tr><tr><td>1 MB/s</td><td>4-8 KB</td><td>å¹³è¡¡å¹³æ»‘ä¸æ€§èƒ½</td></tr><tr><td>5 MB/s+</td><td>8-16 KB</td><td>å‡å°‘ç³»ç»Ÿè°ƒç”¨å¼€é”€</td></tr></tbody></table>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªåŠ¨è®¡ç®—ï¼ˆæ¨èï¼‰</span>
<span class="hljs-meta">@BandwidthLimit(value = 200, unit = BandwidthUnit.KB, chunkSize = -1)</span>

<span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®š</span>
<span class="hljs-meta">@BandwidthLimit(value = 200, unit = BandwidthUnit.KB, chunkSize = 4096)</span>
</code></pre>
<h2 data-id="heading-20">æ€»ç»“</h2>
<p>æœ¬æ–‡åŸºäºä»¤ç‰Œæ¡¶ç®—æ³•ï¼Œé€šè¿‡ HandlerInterceptor + HttpServletResponseWrapperï¼Œåœ¨ Spring Boot ä¸­å®ç°äº†å¤šç»´åº¦å¸¦å®½é™é€Ÿã€‚æ”¯æŒå…¨å±€/API/ç”¨æˆ·/IP å››ç§é™é€Ÿç»´åº¦ï¼Œæä¾›å®æ—¶ç»Ÿè®¡ç›‘æ§ï¼Œé€‚ç”¨äºAPIæ¥å£ä¿æŠ¤ã€æ–‡ä»¶ä¸‹è½½ã€è§†é¢‘æµç­‰åœºæ™¯ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/yuboon</span><span class="hljs-regexp">/java-examples/tree</span><span class="hljs-regexp">/master/springboot</span>-netspeed-limit
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 7 ç¯‡ï¼šç™»å½•æµç¨‹è®¾è®¡ - å¤šåœºæ™¯ã€å¤šæ­¥éª¤çš„ä¼˜é›…å®ç°]]></title>    <link>https://juejin.cn/post/7594266018304884799</link>    <guid>https://juejin.cn/post/7594266018304884799</guid>    <pubDate>2026-01-12T13:13:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594266018304884799" data-draft-id="7587277503947587584" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 7 ç¯‡ï¼šç™»å½•æµç¨‹è®¾è®¡ - å¤šåœºæ™¯ã€å¤šæ­¥éª¤çš„ä¼˜é›…å®ç°"/> <meta itemprop="keywords" content="å‰ç«¯,uni-app,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-12T13:13:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HashTang"/> <meta itemprop="url" content="https://juejin.cn/user/1117561754756488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 7 ç¯‡ï¼šç™»å½•æµç¨‹è®¾è®¡ - å¤šåœºæ™¯ã€å¤šæ­¥éª¤çš„ä¼˜é›…å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117561754756488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HashTang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-12T13:13:27.000Z" title="Mon Jan 12 2026 13:13:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-12
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><blockquote>
<p>ç™»å½•æ˜¯ç”¨æˆ·è¿›å…¥åº”ç”¨çš„ç¬¬ä¸€é“é—¨ï¼Œä½†è®¾è®¡ä¸€ä¸ª<strong>ä½“éªŒå¥½ã€å¯ç»´æŠ¤ã€å¤šåœºæ™¯é€‚ç”¨</strong>çš„ç™»å½•æµç¨‹å¹¶ä¸ç®€å•ã€‚è¿™ç¯‡æ–‡ç« ä»¥<strong>å¿ƒåŠ¨æ‹èŠ</strong>å°ç¨‹åºä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•å’Œ AI å¯¹è¯ï¼Œè®¾è®¡ä¸€å¥—å®Œæ•´çš„ç™»å½•ç³»ç»Ÿâ€”â€”ä»å¾®ä¿¡æˆæƒåˆ°æ‰‹æœºå·ç»‘å®šï¼Œä»å¼¹çª—ç»„ä»¶åˆ°å…¨å±€çŠ¶æ€ç®¡ç†ã€‚</p>
<p><strong>ç³»åˆ—ä¸“æ </strong>ï¼š<a href="https://juejin.cn/column/7579556047783624756" target="_blank" title="https://juejin.cn/column/7579556047783624756">ã€AI ç¼–ç¨‹å®æˆ˜ï¼šTRAE SOLO å…¨æ ˆå¼€å‘æŒ‡å—ã€‘</a></p>
<p><strong>æœ¬ç¯‡ä¸»é¢˜</strong>ï¼šç™»å½•æµç¨‹è®¾è®¡ - å¤šåœºæ™¯ã€å¤šæ­¥éª¤çš„ä¼˜é›…å®ç°</p>
<p><strong>å®æˆ˜é¡¹ç›®</strong>ï¼šå¿ƒåŠ¨æ‹èŠ - AI æ‹çˆ±èŠå¤©åŠ©æ‰‹</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€å¼€ç¯‡ï¼šç™»å½•æµç¨‹çš„å¤æ‚æ€§</h2>
<h3 data-id="heading-1">1.1 çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™å¤æ‚</h3>
<p>å¾ˆå¤šäººè§‰å¾—ç™»å½•å°±æ˜¯"ç‚¹å‡»æŒ‰é’® â†’ è°ƒç”¨æ¥å£ â†’ è·³è½¬é¦–é¡µ"ï¼Œä½†å®é™…ä¸šåŠ¡ä¸­çš„ç™»å½•æµç¨‹è¦å¤æ‚å¾—å¤šï¼š</p>
<pre><code class="hljs language-txt" lang="txt">ç”¨æˆ·ç‚¹å‡»ç™»å½•
    â†“
å¾®ä¿¡é™é»˜ç™»å½•ï¼ˆè·å– openidï¼‰
    â†“
æ£€æŸ¥æ˜¯å¦å·²æ³¨å†Œï¼Ÿ
    â”œâ”€â”€ æ˜¯ â†’ ç›´æ¥ç™»å½•æˆåŠŸ
    â””â”€â”€ å¦ â†’ éœ€è¦æ‰‹æœºå·æˆæƒ
              â†“
         ç”¨æˆ·æˆæƒæ‰‹æœºå·
              â†“
         æ˜¯å¦æ–°ç”¨æˆ·ï¼Ÿ
              â”œâ”€â”€ æ˜¯ â†’ å®Œå–„èµ„æ–™ï¼ˆæ€§åˆ«ã€å¹´é¾„ï¼‰
              â””â”€â”€ å¦ â†’ ç™»å½•æˆåŠŸ
</code></pre>
<p><strong>è¿˜æœ‰æ›´å¤šåœºæ™¯</strong>ï¼š</p>
<ul>
<li>ä»»æ„é¡µé¢è§¦å‘ç™»å½•ï¼ˆä¸åªæ˜¯ç™»å½•é¡µï¼‰</li>
<li>ç™»å½•æˆåŠŸåæ‰§è¡Œå›è°ƒï¼ˆå¦‚ç»§ç»­ä¹‹å‰çš„æ“ä½œï¼‰</li>
<li>ç™»å½•å¼¹çª—è€Œéç™»å½•é¡µï¼ˆä¸æ‰“æ–­ç”¨æˆ·æµè§ˆï¼‰</li>
<li>ç™»å½•çŠ¶æ€å…¨å±€åŒæ­¥</li>
</ul>
<h3 data-id="heading-2">1.2 æˆ‘éœ€è¦ä»€ä¹ˆ</h3>
<p>æˆ‘éœ€è¦ä¸€å¥—<strong>å®Œæ•´çš„ç™»å½•ç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li>å¾®ä¿¡ä¸€é”®ç™»å½• + æ‰‹æœºå·æˆæƒ</li>
<li>æ–°ç”¨æˆ·å¼•å¯¼å®Œå–„èµ„æ–™</li>
<li>å…¨å±€ç™»å½•å¼¹çª—ï¼ˆä»»æ„é¡µé¢å¯è§¦å‘ï¼‰</li>
<li>ç™»å½•æˆåŠŸå›è°ƒæœºåˆ¶</li>
<li>çŠ¶æ€å…¨å±€åŒæ­¥</li>
</ul>
<h2 data-id="heading-3">äºŒã€æ•´ä½“æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-4">2.1 æˆ‘çš„éœ€æ±‚</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šéœ€è¦è®¾è®¡ä¸€å¥—ç™»å½•ç³»ç»Ÿï¼Œè¦æ±‚ï¼š
    1. å¾®ä¿¡å°ç¨‹åºç¯å¢ƒ
    2. æ”¯æŒå¾®ä¿¡ç™»å½• + æ‰‹æœºå·æˆæƒ
    3. æ–°ç”¨æˆ·è¦å¼•å¯¼å¡«æ€§åˆ«å’Œå¹´é¾„
    4. ä»»æ„é¡µé¢éƒ½èƒ½è§¦å‘ç™»å½•å¼¹çª—
    5. ç™»å½•æˆåŠŸåèƒ½æ‰§è¡Œå›è°ƒ
</code></pre>
<h3 data-id="heading-5">2.2 AI åˆ†æå¹¶ç»™å‡ºæ¶æ„</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„ç™»å½•ç³»ç»Ÿï¼Œæˆ‘æ¥è®¾è®¡æ•´ä½“æ¶æ„ã€‚

ğŸ“ æ¶æ„è®¾è®¡ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸šåŠ¡é¡µé¢                       â”‚
â”‚   ï¼ˆé¦–é¡µã€æˆ‘çš„ã€è¯¦æƒ…é¡µ...ä»»æ„éœ€è¦ç™»å½•çš„åœ°æ–¹ï¼‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ è°ƒç”¨
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              loginModalStore                     â”‚
â”‚   ï¼ˆå…¨å±€çŠ¶æ€ï¼šæ§åˆ¶å¼¹çª—æ˜¾ç¤ºã€ç®¡ç†å›è°ƒé˜Ÿåˆ—ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ é©±åŠ¨
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LoginModalRoot                      â”‚
â”‚   ï¼ˆå…¨å±€ç»„ä»¶ï¼šæŒ‚è½½åœ¨ App å±‚ï¼Œç›‘å¬ Store çŠ¶æ€ï¼‰       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ åŒ…å«
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LoginModal                          â”‚
â”‚   ï¼ˆç™»å½•å¼¹çª—ï¼šå¤šæ­¥éª¤æµç¨‹ loginâ†’genderâ†’ageï¼‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ è°ƒç”¨
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               userStore                          â”‚
â”‚   ï¼ˆç”¨æˆ·çŠ¶æ€ï¼šç™»å½•æ–¹æ³•ã€ç”¨æˆ·ä¿¡æ¯ã€æŒä¹…åŒ–ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ—‚ï¸ æ–‡ä»¶ç»“æ„ï¼š

src/
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ user.ts           # ç”¨æˆ·çŠ¶æ€ + ç™»å½•æ–¹æ³•
â”‚   â””â”€â”€ loginModal.ts     # ç™»å½•å¼¹çª—çŠ¶æ€
â”œâ”€â”€ components/
â”‚   â””â”€â”€ auth/
â”‚       â””â”€â”€ LoginModalRoot.vue  # å…¨å±€ç™»å½•å¼¹çª—å®¹å™¨
â””â”€â”€ pages/
    â””â”€â”€ my/
        â””â”€â”€ components/
            â””â”€â”€ LoginModal.vue  # ç™»å½•å¼¹çª—ä¸»ä½“

è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š
1. ä»»æ„é¡µé¢è°ƒç”¨ loginModalStore.open() å³å¯è§¦å‘ç™»å½•
2. ç™»å½•é€»è¾‘é›†ä¸­åœ¨ LoginModalï¼Œä¸åˆ†æ•£åˆ°å„é¡µé¢
3. æ”¯æŒå›è°ƒæœºåˆ¶ï¼Œç™»å½•æˆåŠŸåæ‰§è¡Œç‰¹å®šæ“ä½œ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šè¿™ä¸ªæ¶æ„çœ‹èµ·æ¥ä¸é”™ï¼Œå¼€å§‹å®ç°å§
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€ç™»å½•å¼¹çª—çŠ¶æ€ç®¡ç†</h2>
<h3 data-id="heading-7">3.1 è®¾è®¡ loginModalStore</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šå…ˆå®ç°ç™»å½•å¼¹çª—çš„çŠ¶æ€ç®¡ç†ã€‚

æ ¸å¿ƒåŠŸèƒ½ï¼š
1. æ§åˆ¶å¼¹çª—æ˜¾ç¤º/éšè—
2. ç®¡ç†ç™»å½•æˆåŠŸå›è°ƒé˜Ÿåˆ—
3. è§¦å‘ç™»å½•æµç¨‹æˆ–èµ„æ–™å®Œå–„æµç¨‹
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/store/loginModal.ts</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">UserInfo</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'shared-types'</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">LoginSuccessHandler</span> = <span class="hljs-function">(<span class="hljs-params">userInfo?: UserInfo</span>) =&gt;</span> <span class="hljs-built_in">void</span> | <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">LoginModalState</span> {
  <span class="hljs-attr">visible</span>: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">shouldStart</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ˜¯å¦è§¦å‘ç™»å½•æµç¨‹</span>
  <span class="hljs-attr">shouldStartProfileCompletion</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ˜¯å¦è§¦å‘èµ„æ–™å®Œå–„æµç¨‹</span>
  <span class="hljs-attr">queue</span>: <span class="hljs-title class_">LoginSuccessHandler</span>[]; <span class="hljs-comment">// å›è°ƒé˜Ÿåˆ—</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useLoginModalStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'loginModal'</span>, {
  <span class="hljs-attr">state</span>: (): <span class="hljs-function"><span class="hljs-params">LoginModalState</span> =&gt;</span> ({
    <span class="hljs-attr">visible</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">shouldStart</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">shouldStartProfileCompletion</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">queue</span>: [],
  }),

  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">/**
     * æ‰“å¼€ç™»å½•å¼¹çª—
     * <span class="hljs-doctag">@param</span> options.onSuccess - ç™»å½•æˆåŠŸåçš„å›è°ƒ
     * <span class="hljs-doctag">@param</span> options.startProfileCompletion - æ˜¯å¦ç›´æ¥è¿›å…¥èµ„æ–™å®Œå–„
     */</span>
    <span class="hljs-title function_">open</span>(<span class="hljs-params">options?: { onSuccess?: LoginSuccessHandler; startProfileCompletion?: <span class="hljs-built_in">boolean</span> }</span>) {
      <span class="hljs-comment">// å°†å›è°ƒåŠ å…¥é˜Ÿåˆ—</span>
      <span class="hljs-keyword">if</span> (options?.<span class="hljs-property">onSuccess</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>(options.<span class="hljs-property">onSuccess</span>);
      }

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">visible</span> = <span class="hljs-literal">true</span>;

      <span class="hljs-keyword">if</span> (options?.<span class="hljs-property">startProfileCompletion</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStartProfileCompletion</span> = <span class="hljs-literal">true</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStart</span> = <span class="hljs-literal">true</span>;
      }
    },

    <span class="hljs-comment">/**
     * ç™»å½•æµç¨‹å·²å¯åŠ¨ï¼ˆç”± LoginModalRoot è°ƒç”¨ï¼‰
     */</span>
    <span class="hljs-title function_">markStarted</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStart</span> = <span class="hljs-literal">false</span>;
    },

    <span class="hljs-comment">/**
     * èµ„æ–™å®Œå–„æµç¨‹å·²å¯åŠ¨
     */</span>
    <span class="hljs-title function_">markProfileCompletionStarted</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStartProfileCompletion</span> = <span class="hljs-literal">false</span>;
    },

    <span class="hljs-comment">/**
     * ç™»å½•æˆåŠŸï¼Œæ‰§è¡Œæ‰€æœ‰å›è°ƒ
     */</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">resolveSuccess</span>(<span class="hljs-params">userInfo?: UserInfo</span>) {
      <span class="hljs-keyword">const</span> callbacks = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>];
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = [];

      <span class="hljs-comment">// ä¾æ¬¡æ‰§è¡Œå›è°ƒ</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> callback <span class="hljs-keyword">of</span> callbacks) {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">callback</span>(userInfo);
      }

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">visible</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStart</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStartProfileCompletion</span> = <span class="hljs-literal">false</span>;
    },

    <span class="hljs-comment">/**
     * å…³é—­å¼¹çª—
     */</span>
    <span class="hljs-title function_">close</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">visible</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStart</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldStartProfileCompletion</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span> = [];
    },
  },
});
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šä½¿ç”¨æ–¹å¼ï¼š

// ä»»æ„é¡µé¢è§¦å‘ç™»å½•
import { useLoginModalStore } from '@/store/loginModal'

const loginModalStore = useLoginModalStore()

// åœºæ™¯1ï¼šç®€å•è§¦å‘ç™»å½•
loginModalStore.open()

// åœºæ™¯2ï¼šç™»å½•æˆåŠŸåæ‰§è¡Œæ“ä½œ
loginModalStore.open({
  onSuccess: (userInfo) =&gt; {
    console.log('ç™»å½•æˆåŠŸ:', userInfo)
    // ç»§ç»­ä¹‹å‰çš„æ“ä½œï¼Œå¦‚å‘é€æ¶ˆæ¯ã€è´­ä¹°ä¼šå‘˜ç­‰
  }
})

// åœºæ™¯3ï¼šç›´æ¥è¿›å…¥èµ„æ–™å®Œå–„ï¼ˆç”¨æˆ·å·²ç™»å½•ä½†æœªå¡«èµ„æ–™ï¼‰
loginModalStore.open({ startProfileCompletion: true })
</code></pre>
<h3 data-id="heading-8">3.2 æˆ‘è¿½é—®å›è°ƒé˜Ÿåˆ—çš„ä½œç”¨</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šä¸ºä»€ä¹ˆè¦ç”¨é˜Ÿåˆ—ï¼Ÿç›´æ¥å­˜ä¸€ä¸ªå›è°ƒä¸è¡Œå—ï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šé˜Ÿåˆ—æ˜¯ä¸ºäº†å¤„ç†"è¿ç»­è§¦å‘"çš„åœºæ™¯ã€‚

ğŸ¯ åœºæ™¯ç¤ºä¾‹ï¼š
ç”¨æˆ·åœ¨é¡µé¢ A ç‚¹å‡»"å‘é€æ¶ˆæ¯"ï¼ˆéœ€è¦ç™»å½•ï¼‰
â†’ å¼¹å‡ºç™»å½•æ¡†
â†’ ç”¨æˆ·æ²¡ç™»å½•ï¼Œåˆç‚¹å‡»äº†"æ”¶è—"ï¼ˆä¹Ÿéœ€è¦ç™»å½•ï¼‰
â†’ è¿™æ—¶æœ‰ä¸¤ä¸ªå›è°ƒç­‰å¾…æ‰§è¡Œ

å¦‚æœåªå­˜ä¸€ä¸ªå›è°ƒï¼Œç¬¬äºŒä¸ªä¼šè¦†ç›–ç¬¬ä¸€ä¸ªã€‚
ç”¨é˜Ÿåˆ—å°±èƒ½ä¿è¯ä¸¤ä¸ªæ“ä½œéƒ½èƒ½åœ¨ç™»å½•åæ‰§è¡Œã€‚

å½“ç„¶ï¼Œå¦‚æœä½ çš„ä¸šåŠ¡ä¸éœ€è¦è¿™ç§åœºæ™¯ï¼Œç”¨å•ä¸ªå›è°ƒä¹Ÿå¯ä»¥ã€‚
</code></pre>
<h2 data-id="heading-9">å››ã€å…¨å±€ç™»å½•å¼¹çª—å®¹å™¨</h2>
<h3 data-id="heading-10">4.1 LoginModalRoot è®¾è®¡</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šloginModalStore æœ‰äº†ï¼Œä½†å¼¹çª—ç»„ä»¶åœ¨å“ªé‡Œæ¸²æŸ“ï¼Ÿ
    æ¯ä¸ªé¡µé¢éƒ½å¼•å…¥ä¸€éå—ï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šä¸ç”¨ã€‚åˆ›å»ºä¸€ä¸ªå…¨å±€å®¹å™¨ç»„ä»¶ï¼ŒæŒ‚è½½åœ¨ App å±‚ã€‚

è®¾è®¡æ€è·¯ï¼š
1. LoginModalRoot æ”¾åœ¨ App.vue æˆ– Layout ä¸­
2. å®ƒç›‘å¬ loginModalStore çš„çŠ¶æ€
3. çŠ¶æ€å˜åŒ–æ—¶ï¼Œè°ƒç”¨ LoginModal çš„æ–¹æ³•
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/components/auth/LoginModalRoot.vue --&gt;
&lt;template&gt;
  &lt;LoginModal ref="loginModalRef" v-model="modalVisible" @login-success="handleLoginSuccess" /&gt;
&lt;/template&gt;

&lt;script lang="ts" setup&gt;
import { computed, nextTick, ref, watch } from 'vue';
import type { UserInfo } from 'shared-types';
import LoginModal from '@/pages/my/components/LoginModal.vue';
import { useLoginModalStore } from '@/store/loginModal';

const loginModalStore = useLoginModalStore();
const loginModalRef = ref&lt;InstanceType&lt;typeof LoginModal&gt; | null&gt;(null);

// åŒå‘ç»‘å®šå¼¹çª—æ˜¾ç¤ºçŠ¶æ€
const modalVisible = computed({
  get: () =&gt; loginModalStore.visible,
  set: (value: boolean) =&gt; {
    loginModalStore.setVisible(value);
  },
});

// ç™»å½•æˆåŠŸå¤„ç†
const handleLoginSuccess = async (userInfo?: UserInfo) =&gt; {
  await loginModalStore.resolveSuccess(userInfo);
};

// ç›‘å¬"å¼€å§‹ç™»å½•"ä¿¡å·
watch(
  () =&gt; loginModalStore.shouldStart,
  async (shouldStart) =&gt; {
    if (!shouldStart) return;
    await nextTick();
    loginModalRef.value?.startLogin();
    loginModalStore.markStarted();
  },
);

// ç›‘å¬"å¼€å§‹èµ„æ–™å®Œå–„"ä¿¡å·
watch(
  () =&gt; loginModalStore.shouldStartProfileCompletion,
  async (shouldStart) =&gt; {
    if (!shouldStart) return;
    await nextTick();
    loginModalRef.value?.startProfileCompletion();
    loginModalStore.markProfileCompletionStarted();
  },
);
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-11">4.2 æŒ‚è½½åˆ°å…¨å±€</h3>
<pre><code class="hljs language-txt" lang="txt">AIï¼šæŠŠ LoginModalRoot æŒ‚è½½åˆ° Layout æˆ– App å±‚ï¼š
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/layouts/default.vue --&gt;
&lt;template&gt;
  &lt;slot /&gt;
  &lt;!-- å…¨å±€ç™»å½•å¼¹çª— --&gt;
  &lt;LoginModalRoot /&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import LoginModalRoot from '@/components/auth/LoginModalRoot.vue';
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šè¿™æ ·æ‰€æœ‰ä½¿ç”¨ default å¸ƒå±€çš„é¡µé¢éƒ½èƒ½è§¦å‘ç™»å½•å¼¹çª—ï¼Œ
ä¸éœ€è¦æ¯ä¸ªé¡µé¢å•ç‹¬å¼•å…¥ã€‚
</code></pre>
<h2 data-id="heading-12">äº”ã€å¤šæ­¥éª¤ç™»å½•å¼¹çª—</h2>
<h3 data-id="heading-13">5.1 ç™»å½•æµç¨‹è®¾è®¡</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šç°åœ¨è¦å®ç° LoginModal æœ¬èº«äº†ã€‚
    æµç¨‹æ˜¯ï¼šç™»å½• â†’ æ€§åˆ«é€‰æ‹© â†’ å¹´é¾„é€‰æ‹© â†’ å®Œæˆ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šæˆ‘æ¥è®¾è®¡å¤šæ­¥éª¤çš„çŠ¶æ€æœºï¼š

ğŸ“‹ æ­¥éª¤çŠ¶æ€ï¼š
- login: ç™»å½•ç•Œé¢ï¼ˆå¾®ä¿¡æˆæƒ + åè®®å‹¾é€‰ï¼‰
- gender: æ€§åˆ«é€‰æ‹©ï¼ˆæ–°ç”¨æˆ·ï¼‰
- age: å¹´é¾„é€‰æ‹©ï¼ˆæ–°ç”¨æˆ·ï¼‰

ğŸ“‹ æµç¨‹é€»è¾‘ï¼š
1. ç”¨æˆ·ç‚¹å‡»ç™»å½• â†’ è°ƒç”¨å¾®ä¿¡ç™»å½•
2. æ£€æŸ¥è¿”å›ç»“æœï¼š
   - æœ‰ token + user_id â†’ è€ç”¨æˆ·ï¼Œç›´æ¥æˆåŠŸ
   - æ—  token â†’ éœ€è¦æ‰‹æœºå·æˆæƒ
   - needsRegistration=true â†’ æ–°ç”¨æˆ·ï¼Œè¿›å…¥èµ„æ–™å®Œå–„
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/pages/my/components/LoginModal.vue --&gt;
&lt;template&gt;
  &lt;u-popup
    v-model="isVisible"
    mode="bottom"
    border-radius="24"
    :safe-area-inset-bottom="true"
    :closeable="true"
    @close="handleClose"
  &gt;
    &lt;view class="login-modal-content"&gt;
      &lt;!-- æ­¥éª¤1ï¼šç™»å½•ç•Œé¢ --&gt;
      &lt;view v-if="currentStep === 'login'" class="login-step"&gt;
        &lt;view class="pt-4.5 pb-10"&gt;
          &lt;text class="block text-center text-lg font-bold"&gt;æ¬¢è¿ç™»å½•&lt;/text&gt;
        &lt;/view&gt;

        &lt;!-- ç™»å½•æŒ‰é’® --&gt;
        &lt;view class="px-9 pb-4"&gt;
          &lt;XButton
            text="æ‰‹æœºå·å¿«æ·ç™»å½•"
            :loading="isLoading"
            :open-type="needPhoneAuth ? 'getPhoneNumber' : undefined"
            @getphonenumber="handlePhoneNumber"
            @click="handleLoginClick"
          /&gt;
        &lt;/view&gt;

        &lt;!-- åè®®å‹¾é€‰ --&gt;
        &lt;view class="px-9 pb-20"&gt;
          &lt;view class="flex items-center justify-center" @click="toggleAgreement"&gt;
            &lt;view
              class="w-5 h-5 rounded-full border flex items-center justify-center"
              :class="isAgreed ? 'bg-primary border-primary' : 'border-gray-400'"
            &gt;
              &lt;u-icon v-if="isAgreed" name="checkmark" size="20" color="#fff" /&gt;
            &lt;/view&gt;
            &lt;text class="ml-2 text-sm"&gt;
              å‹¾é€‰åŒæ„
              &lt;text class="text-primary" @click.stop="openAgreement('user')"&gt;ã€Šç”¨æˆ·åè®®ã€‹&lt;/text&gt;
              å’Œ
              &lt;text class="text-primary" @click.stop="openAgreement('privacy')"&gt;ã€Šéšç§æ”¿ç­–ã€‹&lt;/text&gt;
            &lt;/text&gt;
          &lt;/view&gt;
        &lt;/view&gt;
      &lt;/view&gt;

      &lt;!-- æ­¥éª¤2ï¼šæ€§åˆ«é€‰æ‹© --&gt;
      &lt;view v-else-if="currentStep === 'gender'" class="gender-step"&gt;
        &lt;view class="pt-4 pb-10"&gt;
          &lt;text class="block text-center text-lg font-bold"&gt;é€‰æ‹©ä½ çš„æ€§åˆ«&lt;/text&gt;
          &lt;text class="block text-center text-sm text-gray-500 mt-2"&gt;æ›´ç²¾å‡†åŒ¹é…å›å¤è¯æœ¯&lt;/text&gt;
        &lt;/view&gt;

        &lt;view class="flex justify-center gap-8 pb-20"&gt;
          &lt;view
            v-for="gender in genderOptions"
            :key="gender.value"
            class="flex flex-col items-center"
            @click="selectGender(gender.value)"
          &gt;
            &lt;image :src="gender.icon" class="w-32 h-32" /&gt;
            &lt;text class="mt-2"&gt;{{ gender.label }}&lt;/text&gt;
            &lt;view
              v-if="selectedGender === gender.value"
              class="w-5 h-5 rounded-full bg-primary mt-2"
            /&gt;
          &lt;/view&gt;
        &lt;/view&gt;
      &lt;/view&gt;

      &lt;!-- æ­¥éª¤3ï¼šå¹´é¾„é€‰æ‹© --&gt;
      &lt;view v-else class="age-step"&gt;
        &lt;view class="pt-4 pb-10"&gt;
          &lt;text class="block text-center text-lg font-bold"&gt;é€‰æ‹©ä½ çš„å¹´é¾„æ®µ&lt;/text&gt;
        &lt;/view&gt;

        &lt;view class="flex flex-wrap justify-center gap-4 pb-20"&gt;
          &lt;view
            v-for="age in ageOptions"
            :key="age"
            class="px-6 py-3 rounded-full"
            :class="selectedAge === age ? 'bg-primary text-white' : 'bg-gray-100'"
            @click="selectAge(age)"
          &gt;
            {{ age }}
          &lt;/view&gt;
        &lt;/view&gt;
      &lt;/view&gt;
    &lt;/view&gt;
  &lt;/u-popup&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-14">5.2 ç™»å½•é€»è¾‘å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// LoginModal.vue &lt;script setup&gt;</span>
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/user'</span>;
<span class="hljs-keyword">import</span> { toast } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/toast'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">GenderEnum</span>, <span class="hljs-title class_">AgeGroupEnum</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'shared-types'</span>;
<span class="hljs-keyword">import</span> { requestWechatLoginCode } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/wechat'</span>;

<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();

<span class="hljs-comment">// å½“å‰æ­¥éª¤</span>
<span class="hljs-keyword">const</span> currentStep = ref&lt;<span class="hljs-string">'login'</span> | <span class="hljs-string">'gender'</span> | <span class="hljs-string">'age'</span>&gt;(<span class="hljs-string">'login'</span>);

<span class="hljs-comment">// çŠ¶æ€</span>
<span class="hljs-keyword">const</span> isAgreed = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> isLoading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> needPhoneAuth = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> selectedGender = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);
<span class="hljs-keyword">const</span> selectedAge = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);

<span class="hljs-comment">// æ€§åˆ«å’Œå¹´é¾„é€‰é¡¹</span>
<span class="hljs-keyword">const</span> genderOptions = [
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'male'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”·'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'/static/images/male.png'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'female'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'å¥³'</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">'/static/images/female.png'</span> },
];
<span class="hljs-keyword">const</span> ageOptions = [<span class="hljs-string">'00å'</span>, <span class="hljs-string">'05å'</span>, <span class="hljs-string">'90å'</span>, <span class="hljs-string">'80å'</span>, <span class="hljs-string">'70å'</span>];

<span class="hljs-comment">/**
 * å¤„ç†ç™»å½•æŒ‰é’®ç‚¹å‡»
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLoginClick</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!isAgreed.<span class="hljs-property">value</span>) {
    toast.<span class="hljs-title function_">warning</span>(<span class="hljs-string">'è¯·å‹¾é€‰åŒæ„ç”¨æˆ·åè®®'</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// å¦‚æœéœ€è¦æ‰‹æœºå·æˆæƒï¼Œç”± open-type å¤„ç†</span>
  <span class="hljs-keyword">if</span> (needPhoneAuth.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">await</span> <span class="hljs-title function_">performWechatLogin</span>();
};

<span class="hljs-comment">/**
 * æ‰§è¡Œå¾®ä¿¡ç™»å½•
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">performWechatLogin</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 1. è·å–å¾®ä¿¡ code</span>
    <span class="hljs-keyword">const</span> loginCode = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestWechatLoginCode</span>();

    <span class="hljs-comment">// 2. è°ƒç”¨ Store ç™»å½•æ–¹æ³•</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">wechatLogin</span>({ <span class="hljs-attr">code</span>: loginCode });

    <span class="hljs-comment">// 3. åˆ¤æ–­ç»“æœ</span>
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">token</span> &amp;&amp; result.<span class="hljs-property">user_id</span>) {
      <span class="hljs-comment">// å·²æœ‰è´¦å·</span>
      <span class="hljs-keyword">if</span> (result.<span class="hljs-property">needsRegistration</span>) {
        <span class="hljs-comment">// æ–°ç”¨æˆ·ï¼Œéœ€è¦å®Œå–„èµ„æ–™</span>
        currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'gender'</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è€ç”¨æˆ·ï¼Œç›´æ¥æˆåŠŸ</span>
        <span class="hljs-title function_">completeLogin</span>();
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// éœ€è¦æ‰‹æœºå·æˆæƒ</span>
      needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
    }
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¾®ä¿¡ç™»å½•å¤±è´¥:'</span>, error);
    toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
  } <span class="hljs-keyword">finally</span> {
    isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};

<span class="hljs-comment">/**
 * å¤„ç†æ‰‹æœºå·æˆæƒ
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePhoneNumber</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">event: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> { code, errMsg } = event.<span class="hljs-property">detail</span> || {};

  <span class="hljs-keyword">if</span> (!code) {
    <span class="hljs-keyword">if</span> (errMsg?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'user deny'</span>)) {
      toast.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å·²å–æ¶ˆæ‰‹æœºå·æˆæƒ'</span>);
    }
    <span class="hljs-keyword">return</span>;
  }

  isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> loginCode = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestWechatLoginCode</span>();
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">phoneLogin</span>({
      code,
      <span class="hljs-attr">login_code</span>: loginCode,
    });

    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">needsRegistration</span>) {
      currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'gender'</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">completeLogin</span>();
    }
  } <span class="hljs-keyword">catch</span> (error) {
    toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'éªŒè¯æ‰‹æœºå·å¤±è´¥'</span>);
  } <span class="hljs-keyword">finally</span> {
    isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};

<span class="hljs-comment">/**
 * é€‰æ‹©æ€§åˆ«
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">selectGender</span> = (<span class="hljs-params">gender: <span class="hljs-built_in">string</span></span>) =&gt; {
  selectedGender.<span class="hljs-property">value</span> = gender;
  <span class="hljs-comment">// å»¶è¿Ÿè·³è½¬ï¼Œè®©ç”¨æˆ·çœ‹åˆ°é€‰æ‹©æ•ˆæœ</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'age'</span>;
  }, <span class="hljs-number">500</span>);
};

<span class="hljs-comment">/**
 * é€‰æ‹©å¹´é¾„
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">selectAge</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">age: <span class="hljs-built_in">string</span></span>) =&gt; {
  selectedAge.<span class="hljs-property">value</span> = age;

  <span class="hljs-comment">// æäº¤èµ„æ–™</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">submitProfile</span>();
  }, <span class="hljs-number">300</span>);
};

<span class="hljs-comment">/**
 * æäº¤ç”¨æˆ·èµ„æ–™
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">submitProfile</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> genderValue = selectedGender.<span class="hljs-property">value</span> === <span class="hljs-string">'male'</span> ? <span class="hljs-title class_">GenderEnum</span>.<span class="hljs-property">MALE</span> : <span class="hljs-title class_">GenderEnum</span>.<span class="hljs-property">FEMALE</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-attr">ageMapping</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = {
    <span class="hljs-string">'00å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_00</span>,
    <span class="hljs-string">'05å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_05</span>,
    <span class="hljs-string">'90å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_90</span>,
    <span class="hljs-string">'80å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_80</span>,
    <span class="hljs-string">'70å'</span>: <span class="hljs-title class_">AgeGroupEnum</span>.<span class="hljs-property">POST_70</span>,
  };

  <span class="hljs-keyword">await</span> userStore.<span class="hljs-title function_">updateUserInfo</span>(
    {
      <span class="hljs-attr">gender</span>: genderValue,
      <span class="hljs-attr">age_group</span>: ageMapping[selectedAge.<span class="hljs-property">value</span>],
    },
    <span class="hljs-string">'ç™»å½•æˆåŠŸ'</span>,
  );

  <span class="hljs-title function_">completeLogin</span>();
};

<span class="hljs-comment">/**
 * å®Œæˆç™»å½•
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">completeLogin</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'login-success'</span>, userStore.<span class="hljs-property">userInfo</span>);
  <span class="hljs-title function_">handleClose</span>();
};

<span class="hljs-comment">/**
 * å…³é—­å¼¹çª—
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClose</span> = (<span class="hljs-params"/>) =&gt; {
  isVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  <span class="hljs-comment">// é‡ç½®çŠ¶æ€</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'login'</span>;
    isAgreed.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    selectedGender.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
    selectedAge.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
    needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }, <span class="hljs-number">300</span>);
};

<span class="hljs-comment">// æš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶</span>
<span class="hljs-title function_">defineExpose</span>({
  <span class="hljs-attr">startLogin</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">resetState</span>();
    isVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  },
  <span class="hljs-attr">startProfileCompletion</span>: <span class="hljs-function">() =&gt;</span> {
    currentStep.<span class="hljs-property">value</span> = <span class="hljs-string">'gender'</span>;
    isVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  },
});
</code></pre>
<h2 data-id="heading-15">å…­ã€ä¸šåŠ¡é¡µé¢é›†æˆ</h2>
<h3 data-id="heading-16">6.1 è§¦å‘ç™»å½•çš„åœºæ™¯</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šç™»å½•å¼¹çª—åšå¥½äº†ï¼Œä¸šåŠ¡é¡µé¢æ€ä¹ˆç”¨ï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šä¸šåŠ¡é¡µé¢åªéœ€è¦è°ƒç”¨ loginModalStore.open()ï¼š
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœºæ™¯1ï¼šéœ€è¦ç™»å½•æ‰èƒ½æ“ä½œçš„æŒ‰é’®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSendMessage</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!userStore.<span class="hljs-property">isLoggedIn</span>) {
    loginModalStore.<span class="hljs-title function_">open</span>({
      <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// ç™»å½•æˆåŠŸåï¼Œç»§ç»­å‘é€æ¶ˆæ¯</span>
        <span class="hljs-title function_">doSendMessage</span>();
      },
    });
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-title function_">doSendMessage</span>();
};

<span class="hljs-comment">// åœºæ™¯2ï¼šå°è£…æˆé€šç”¨çš„ç™»å½•æ£€æŸ¥å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">requireLogin</span> = (<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (userStore.<span class="hljs-property">isLoggedIn</span>) {
    <span class="hljs-title function_">callback</span>();
    <span class="hljs-keyword">return</span>;
  }

  loginModalStore.<span class="hljs-title function_">open</span>({
    <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">callback</span>(),
  });
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBuyVip</span> = (<span class="hljs-params"/>) =&gt; {
  requireLogin(<span class="hljs-function">() =&gt;</span> {
    uni.<span class="hljs-title function_">navigateTo</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/vip/index'</span> });
  });
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCollect</span> = (<span class="hljs-params"/>) =&gt; {
  requireLogin(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">doCollect</span>();
  });
};
</code></pre>
<h3 data-id="heading-17">6.2 æˆ‘è¿½é—®ï¼šèƒ½ä¸èƒ½æ›´ç®€æ´</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šæ¯æ¬¡éƒ½è¦å†™ if (!isLoggedIn) å¾ˆç¹çï¼Œèƒ½ä¸èƒ½æ›´ç®€æ´ï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šå¯ä»¥å°è£…æˆ Hookï¼š
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/hooks/useRequireLogin.ts</span>
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/user'</span>;
<span class="hljs-keyword">import</span> { useLoginModalStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/loginModal'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useRequireLogin</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();
  <span class="hljs-keyword">const</span> loginModalStore = <span class="hljs-title function_">useLoginModalStore</span>();

  <span class="hljs-comment">/**
   * éœ€è¦ç™»å½•æ‰èƒ½æ‰§è¡Œçš„æ“ä½œ
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">requireLogin</span> = (<span class="hljs-params">callback: () =&gt; <span class="hljs-built_in">void</span> | <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;</span>) =&gt; {
    <span class="hljs-keyword">if</span> (userStore.<span class="hljs-property">isLoggedIn</span>) {
      <span class="hljs-title function_">callback</span>();
      <span class="hljs-keyword">return</span>;
    }

    loginModalStore.<span class="hljs-title function_">open</span>({
      <span class="hljs-attr">onSuccess</span>: <span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">callback</span>();
      },
    });
  };

  <span class="hljs-comment">/**
   * åˆ›å»ºéœ€è¦ç™»å½•çš„å¤„ç†å‡½æ•°
   */</span>
  <span class="hljs-keyword">const</span> withLogin = &lt;T <span class="hljs-keyword">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">fn</span>: T): <span class="hljs-function"><span class="hljs-params">T</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> (<span class="hljs-function">(<span class="hljs-params">...args: Parameters&lt;T&gt;</span>) =&gt;</span> {
      requireLogin(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fn</span>(...args));
    }) <span class="hljs-keyword">as</span> T;
  };

  <span class="hljs-keyword">return</span> {
    requireLogin,
    withLogin,
    <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> userStore.<span class="hljs-property">isLoggedIn</span>),
  };
}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é¡µé¢ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> { requireLogin, withLogin, isLoggedIn } = <span class="hljs-title function_">useRequireLogin</span>();

<span class="hljs-comment">// æ–¹å¼1ï¼šåŒ…è£…å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSendMessage</span> = (<span class="hljs-params"/>) =&gt; {
  requireLogin(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">doSendMessage</span>();
  });
};

<span class="hljs-comment">// æ–¹å¼2ï¼šç›´æ¥åˆ›å»ºå¸¦ç™»å½•æ£€æŸ¥çš„å‡½æ•°</span>
<span class="hljs-keyword">const</span> handleBuyVip = <span class="hljs-title function_">withLogin</span>(<span class="hljs-function">() =&gt;</span> {
  uni.<span class="hljs-title function_">navigateTo</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/pages/vip/index'</span> });
});

<span class="hljs-keyword">const</span> handleCollect = <span class="hljs-title function_">withLogin</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">doCollect</span>();
});
</code></pre>
<h2 data-id="heading-18">ä¸ƒã€ç™»å½•çŠ¶æ€åˆ¤æ–­ä¼˜åŒ–</h2>
<h3 data-id="heading-19">7.1 é¢„æ£€å¾®ä¿¡ç™»å½•çŠ¶æ€</h3>
<pre><code class="hljs language-txt" lang="txt">æˆ‘ï¼šæ¯æ¬¡æ‰“å¼€ç™»å½•å¼¹çª—éƒ½è¦ç­‰ç”¨æˆ·ç‚¹å‡»ï¼Œ
    èƒ½ä¸èƒ½æå‰çŸ¥é“éœ€ä¸éœ€è¦æ‰‹æœºå·æˆæƒï¼Ÿ
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šå¯ä»¥åœ¨æ‰“å¼€å¼¹çª—æ—¶"é¢„æ£€"å¾®ä¿¡ç™»å½•çŠ¶æ€ï¼š
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// LoginModal.vue</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">determineLoginStrategy</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!isMpWeixin) {
    needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// é™é»˜è·å– codeï¼Œå°è¯•ç™»å½•</span>
    <span class="hljs-keyword">const</span> loginCode = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestWechatLoginCode</span>();
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginByWechat</span>({
      <span class="hljs-attr">code</span>: loginCode,
      <span class="hljs-attr">source</span>: clientSource,
      <span class="hljs-attr">channel</span>: clientChannel,
    });

    <span class="hljs-comment">// å¦‚æœèƒ½ç›´æ¥ç™»å½•ï¼Œä¸éœ€è¦æ‰‹æœºå·</span>
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> === <span class="hljs-number">200</span> &amp;&amp; response.<span class="hljs-property">data</span>?.<span class="hljs-property">token</span>) {
      needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> {
      needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
    }
  } <span class="hljs-keyword">catch</span> (error) {
    needPhoneAuth.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  }
};

<span class="hljs-comment">// æ‰“å¼€å¼¹çª—æ—¶è°ƒç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startLogin</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">resetState</span>();
  isVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-comment">// é¢„æ£€ç™»å½•çŠ¶æ€</span>
  <span class="hljs-built_in">void</span> <span class="hljs-title function_">determineLoginStrategy</span>();
};
</code></pre>
<pre><code class="hljs language-txt" lang="txt">AIï¼šè¿™æ ·çš„å¥½å¤„ï¼š
1. è€ç”¨æˆ·ï¼šæŒ‰é’®æ˜¾ç¤º"å¾®ä¿¡ç™»å½•"ï¼Œç‚¹å‡»ç›´æ¥æˆåŠŸ
2. æ–°ç”¨æˆ·ï¼šæŒ‰é’®æ˜¾ç¤º"æ‰‹æœºå·å¿«æ·ç™»å½•"ï¼Œéœ€è¦æˆæƒ

ç”¨æˆ·ä½“éªŒæ›´é¡ºç•…ï¼Œä¸ç”¨ç‚¹ä¸¤æ¬¡ã€‚
</code></pre>
<h2 data-id="heading-20">å…«ã€æ ¸å¿ƒç»éªŒï¼šç™»å½•ç³»ç»Ÿè®¾è®¡è¦ç‚¹</h2>
<h3 data-id="heading-21">8.1 æ¶æ„è®¾è®¡åŸåˆ™</h3>

























<table><thead><tr><th>åŸåˆ™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>çŠ¶æ€é›†ä¸­</td><td>loginModalStore ç»Ÿä¸€ç®¡ç†å¼¹çª—çŠ¶æ€å’Œå›è°ƒ</td></tr><tr><td>ç»„ä»¶åˆ†ç¦»</td><td>LoginModalRoot è´Ÿè´£æ¡¥æ¥ï¼ŒLoginModal è´Ÿè´£ UI é€»è¾‘</td></tr><tr><td>å…¨å±€å¯ç”¨</td><td>æŒ‚è½½åœ¨ Layout å±‚ï¼Œä»»æ„é¡µé¢å¯è§¦å‘</td></tr><tr><td>å›è°ƒæœºåˆ¶</td><td>æ”¯æŒç™»å½•æˆåŠŸåæ‰§è¡Œç‰¹å®šæ“ä½œ</td></tr></tbody></table>
<h3 data-id="heading-22">8.2 æµç¨‹è®¾è®¡è¦ç‚¹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… æ¨èï¼šå¤šæ­¥éª¤ç”¨çŠ¶æ€æœº</span>
<span class="hljs-keyword">const</span> currentStep = ref&lt;<span class="hljs-string">'login'</span> | <span class="hljs-string">'gender'</span> | <span class="hljs-string">'age'</span>&gt;(<span class="hljs-string">'login'</span>);

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šå¤šä¸ª boolean æ§åˆ¶</span>
<span class="hljs-keyword">const</span> showLogin = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>);
<span class="hljs-keyword">const</span> showGender = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> showAge = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… æ¨èï¼šé¢„æ£€ç™»å½•çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startLogin</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-built_in">void</span> <span class="hljs-title function_">determineLoginStrategy</span>(); <span class="hljs-comment">// æå‰åˆ¤æ–­éœ€è¦å“ªç§ç™»å½•</span>
};

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šç”¨æˆ·ç‚¹å‡»æ‰åˆ¤æ–­</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ç‚¹å‡»åæ‰çŸ¥é“éœ€è¦æ‰‹æœºå·ï¼Œä½“éªŒå·®</span>
};
</code></pre>
<h3 data-id="heading-23">8.3 é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŒºåˆ†ä¸åŒçš„é”™è¯¯åœºæ™¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">showWechatLoginError</span> = (<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (error?.<span class="hljs-property">code</span> === -<span class="hljs-number">8</span>) {
    toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æœªå®‰è£…å¾®ä¿¡å®¢æˆ·ç«¯'</span>);
    <span class="hljs-keyword">return</span>;
  }
  toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
};

<span class="hljs-comment">// æ‰‹æœºå·æˆæƒå–æ¶ˆ vs å¤±è´¥</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePhoneNumber</span> = (<span class="hljs-params">event: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> { code, errMsg } = event.<span class="hljs-property">detail</span>;
  <span class="hljs-keyword">if</span> (!code) {
    <span class="hljs-keyword">if</span> (errMsg?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'user deny'</span>)) {
      toast.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å·²å–æ¶ˆæˆæƒ'</span>); <span class="hljs-comment">// ç”¨æˆ·ä¸»åŠ¨å–æ¶ˆï¼Œä¸æ˜¯é”™è¯¯</span>
    } <span class="hljs-keyword">else</span> {
      toast.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–æ‰‹æœºå·å¤±è´¥'</span>); <span class="hljs-comment">// çœŸæ­£çš„é”™è¯¯</span>
    }
    <span class="hljs-keyword">return</span>;
  }
};
</code></pre>
<h2 data-id="heading-24">ä¹ã€æ€»ç»“ï¼šç™»å½•ç³»ç»Ÿçš„å®Œæ•´å®ç°</h2>
<h3 data-id="heading-25">9.1 æ–‡ä»¶æ¸…å•</h3>





























<table><thead><tr><th>æ–‡ä»¶</th><th>èŒè´£</th></tr></thead><tbody><tr><td><code>store/loginModal.ts</code></td><td>å¼¹çª—çŠ¶æ€ + å›è°ƒé˜Ÿåˆ—</td></tr><tr><td><code>store/user.ts</code></td><td>ç”¨æˆ·çŠ¶æ€ + ç™»å½•æ–¹æ³•</td></tr><tr><td><code>components/auth/LoginModalRoot.vue</code></td><td>å…¨å±€å¼¹çª—å®¹å™¨</td></tr><tr><td><code>pages/my/components/LoginModal.vue</code></td><td>ç™»å½•å¼¹çª— UI + é€»è¾‘</td></tr><tr><td><code>hooks/useRequireLogin.ts</code></td><td>ç™»å½•æ£€æŸ¥ Hook</td></tr></tbody></table>
<h3 data-id="heading-26">9.2 å…³é”®æ”¶è·</h3>
<ol>
<li><strong>æ¶æ„å…ˆè¡Œ</strong>ï¼šå…ˆè®¾è®¡æ•´ä½“æ¶æ„ï¼Œå†å®ç°ç»†èŠ‚</li>
<li><strong>çŠ¶æ€é›†ä¸­</strong>ï¼šç”¨ Store ç®¡ç†å¼¹çª—çŠ¶æ€å’Œå›è°ƒ</li>
<li><strong>å¤šæ­¥éª¤æµç¨‹</strong>ï¼šç”¨çŠ¶æ€æœºç®¡ç†ï¼Œé¿å…å¤šä¸ª boolean</li>
<li><strong>ä½“éªŒä¼˜åŒ–</strong>ï¼šé¢„æ£€ç™»å½•çŠ¶æ€ï¼Œå‡å°‘ç”¨æˆ·ç­‰å¾…</li>
<li><strong>é”™è¯¯åŒºåˆ†</strong>ï¼šç”¨æˆ·å–æ¶ˆ vs ç³»ç»Ÿé”™è¯¯ï¼Œæç¤ºä¸åŒ</li>
</ol>
<h3 data-id="heading-27">9.3 ä¸‹ä¸€ç¯‡é¢„å‘Š</h3>
<p><strong>ã€Šã€AI ç¼–ç¨‹å®æˆ˜ã€‘ç¬¬ 8 ç¯‡ï¼šç»„ä»¶å°è£…çš„è‰ºæœ¯ - ä»ä¸šåŠ¡ä»£ç åˆ°å¯å¤ç”¨ç»„ä»¶ã€‹</strong></p>
<p>ä¸‹ä¸€ç¯‡å±•ç¤ºå¦‚ä½•è®¾è®¡é€šç”¨ç»„ä»¶ï¼š</p>
<ul>
<li>ä»ä¸šåŠ¡ä»£ç ä¸­æå–ç»„ä»¶</li>
<li>Props å’Œ Events è®¾è®¡</li>
<li>ç»„ä»¶çš„æ‰©å±•æ€§å’Œçµæ´»æ€§</li>
</ul>
<hr/>
<blockquote>
<p>ç™»å½•ç³»ç»Ÿä¸åªæ˜¯"è°ƒç”¨æ¥å£"ï¼Œè€Œæ˜¯<strong>ç”¨æˆ·ä½“éªŒã€çŠ¶æ€ç®¡ç†ã€é”™è¯¯å¤„ç†</strong>çš„ç»¼åˆè€ƒéªŒã€‚
é€šè¿‡å’Œ AI å¯¹è¯ï¼Œé€æ­¥ç†æ¸…æ¯ä¸ªç¯èŠ‚ï¼Œæœ€ç»ˆå½¢æˆå®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹èµã€æ”¶è—ã€è½¬å‘ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Capacitor + React çš„ iOS ä¾§æ»‘è¿”å›æ‰‹åŠ¿]]></title>    <link>https://juejin.cn/post/7594420277449359387</link>    <guid>https://juejin.cn/post/7594420277449359387</guid>    <pubDate>2026-01-13T06:00:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594420277449359387" data-draft-id="7594398051722362918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Capacitor + React çš„ iOS ä¾§æ»‘è¿”å›æ‰‹åŠ¿"/> <meta itemprop="keywords" content="å‰ç«¯,iOS"/> <meta itemprop="datePublished" content="2026-01-13T06:00:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="liusheng"/> <meta itemprop="url" content="https://juejin.cn/user/3171444673228840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Capacitor + React çš„ iOS ä¾§æ»‘è¿”å›æ‰‹åŠ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3171444673228840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    liusheng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:00:41.000Z" title="Tue Jan 13 2026 06:00:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Capacitor + React çš„ iOS ä¾§æ»‘è¿”å›æ‰‹åŠ¿</h2>
<blockquote>
<p>é€‚ç”¨å¯¹è±¡ï¼šç”¨ Capacitor æŠŠ React SPA æ‰“åŒ…æˆ iOS Appï¼ŒäºŒçº§é¡µé¢å¸Œæœ›æ”¯æŒç³»ç»Ÿå·¦ä¾§è¾¹ç¼˜å³æ»‘è¿”å›ï¼ˆä¾§æ»‘è¿”å›æ‰‹åŠ¿ï¼‰ã€‚</p>
</blockquote>
<h3 data-id="heading-1">é—®é¢˜çš„èƒŒæ™¯</h3>
<p>åœ¨ WKWebViewï¼ˆCapacitor iOS å®¹å™¨ï¼‰é‡Œè·‘ React Router è¿™ç±» SPAï¼Œç»å¸¸ä¼šé‡åˆ°ï¼š</p>
<ul>
<li>äºŒçº§é¡µé¢æ— æ³•ä¾§æ»‘è¿”å›ï¼›</li>
<li>èƒ½ä¾§æ»‘ä½†ä¸Šçº§é¡µé¢é¢„è§ˆæ˜¯ç™½å±/é»‘å±ï¼ˆçœ‹ä¸åˆ°ä¸Šä¸€é¡µå†…å®¹ï¼‰ï¼›</li>
<li>è‡ªå·±å®ç°æ‰‹åŠ¿ï¼ˆæˆªå›¾ + å å±‚ + <code>history.back()</code>ï¼‰ä¼šå¼•å…¥å¤§é‡æ—¶åº/å…¼å®¹æ€§å‘ã€‚</li>
</ul>
<h3 data-id="heading-2">è§£å†³çš„ç»“è®ºï¼šä¼˜å…ˆç”¨ç³»ç»Ÿèƒ½åŠ›ï¼Œè€Œä¸æ˜¯è‡ªç ”æ‰‹åŠ¿</h3>
<p><strong>æ ¸å¿ƒæ€è·¯</strong>ï¼šè®© WebView ç›´æ¥å¯ç”¨ WebKit è‡ªå¸¦çš„äº¤äº’å¼è¿”å›æ‰‹åŠ¿ã€‚</p>
<p>åœ¨ iOS ä¸Šï¼Œè¿™ä¸ªå¼€å…³å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">webView.allowsBackForwardNavigationGestures <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
</code></pre>
<p>è¿™æ¯”â€œè‡ªç ” edge-pan + snapshotâ€å¯é å¾—å¤šï¼šäº¤äº’æ›²çº¿ã€é˜ˆå€¼ã€ä¸Šä¸€é¡µé¢„è§ˆå¿«ç…§ã€æ¸²æŸ“æ—¶æœºéƒ½ç”±ç³»ç»Ÿå¤„ç†ã€‚</p>
<h3 data-id="heading-3">æœ€å°å¯ç”¨æ”¹åŠ¨ï¼ˆ3 æ­¥ï¼‰</h3>
<p>ä¸‹é¢è¿™ 3 æ­¥å°±æ˜¯æœ¬æ¬¡ä¿®å¤èƒ½é€šè¿‡éªŒæ”¶çš„å…³é”®ï¼ˆå…¶ä½™ä¼˜åŒ–éƒ½å¯ä»¥åæ”¾ï¼‰ã€‚</p>
<h4 data-id="heading-4">1) ç”¨è‡ªå®šä¹‰ <code>CAPBridgeViewController</code> å­ç±»æ¥ç®¡ WKWebView é…ç½®</h4>
<p>æ–‡ä»¶ï¼š<code>ios/App/App/AppDelegate.swift</code></p>
<ul>
<li>æ–°å¢ <code>AppViewController: CAPBridgeViewController</code>ï¼›</li>
<li>åœ¨ <code>viewDidLoad()</code> é‡Œç»Ÿä¸€è®¾ç½®èƒŒæ™¯è‰²ï¼ˆå‡å°‘â€œé—ªç™½/é—ªé»‘â€ï¼‰å¹¶å¯ç”¨ç³»ç»Ÿæ‰‹åŠ¿ï¼š</li>
</ul>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">@objc(AppViewController)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppViewController</span>: <span class="hljs-title class_">CAPBridgeViewController</span> {
  <span class="hljs-keyword">override</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">viewDidLoad</span>() {
    <span class="hljs-keyword">super</span>.viewDidLoad()

    <span class="hljs-comment">// è®¾ç½®èƒŒæ™¯ï¼ˆé˜²æ­¢ä»»ä½•ç©ºç™½é—ªç°ï¼‰</span>
    <span class="hljs-keyword">self</span>.view.backgroundColor <span class="hljs-operator">=</span> <span class="hljs-type">UIColor</span>.systemBackground
    <span class="hljs-keyword">self</span>.webView<span class="hljs-operator">?</span>.isOpaque <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    <span class="hljs-keyword">self</span>.webView<span class="hljs-operator">?</span>.backgroundColor <span class="hljs-operator">=</span> <span class="hljs-type">UIColor</span>.systemBackground
    <span class="hljs-keyword">self</span>.webView<span class="hljs-operator">?</span>.scrollView.backgroundColor <span class="hljs-operator">=</span> <span class="hljs-type">UIColor</span>.systemBackground

    <span class="hljs-comment">// æ°¸ä¹…å¯ç”¨ç³»ç»ŸåŸç”Ÿä¾§æ»‘è¿”å›æ‰‹åŠ¿ï¼ˆæœ€ç®€å•ã€æœ€å¯é ï¼‰</span>
    <span class="hljs-keyword">self</span>.webView<span class="hljs-operator">?</span>.allowsBackForwardNavigationGestures <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
  }
}
</code></pre>
<h4 data-id="heading-5">2) storyboard æŠŠåˆå§‹ VC æŒ‡å‘ä½ çš„è‡ªå®šä¹‰ VCï¼ˆå¦åˆ™ä¸Šä¸€æ­¥æ°¸è¿œä¸ä¼šç”Ÿæ•ˆï¼‰</h4>
<p>æ–‡ä»¶ï¼š<code>ios/App/App/Base.lproj/Main.storyboard</code></p>
<blockquote>
<p>æŠŠåˆå§‹æ§åˆ¶å™¨ä» Capacitor çš„ <code>CAPBridgeViewController</code> æ”¹æˆä½ è‡ªå·±çš„ï¼š</p>
</blockquote>
<ul>
<li><code>customClass="AppViewController"</code></li>
<li><code>customModule="App"</code></li>
</ul>
<blockquote>
<p>å®Œæ•´ç¤ºä¾‹ï¼š</p>
</blockquote>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">viewController</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"BYZ-38-t0r"</span> <span class="hljs-attr">customClass</span>=<span class="hljs-string">"AppViewController"</span> <span class="hljs-attr">customModule</span>=<span class="hljs-string">"App"</span> <span class="hljs-attr">sceneMemberID</span>=<span class="hljs-string">"viewController"</span>/&gt;</span>

</code></pre>
<h4 data-id="heading-6">3) Web ä¾§é…åˆï¼ˆå¼ºçƒˆå»ºè®®ï¼‰ï¼šç¦ç”¨æµè§ˆå™¨è‡ªåŠ¨æ»šåŠ¨æ¢å¤ï¼ˆå‡å°‘â€œè¿”å›é¢„è§ˆç™½å±/é”™ä½â€ï¼‰</h4>
<p>æ–‡ä»¶ï¼š<code>src/App.tsx</code></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-string">'scrollRestoration'</span> <span class="hljs-keyword">in</span> history) {
    history.<span class="hljs-property">scrollRestoration</span> = <span class="hljs-string">'manual'</span>
  }
}, [])
</code></pre>
<p>åŸå› å¾ˆç®€å•ï¼šç³»ç»Ÿä¾§æ»‘è¿”å›é¢„è§ˆä¾èµ– WebKit çš„å†å²å¿«ç…§ï¼Œä½† SPA åœ¨è¿”å›æ—¶çš„â€œè‡ªåŠ¨æ»šåŠ¨æ¢å¤â€ä¼šè®©å¿«ç…§æ•è·åˆ°ä¸ä¸€è‡´/ç©ºç™½çš„ä¸­é—´æ€ï¼ˆå°¤å…¶æ˜¯åˆ—è¡¨é¡µã€æ»šåŠ¨åè¿”å›æœ€æ˜æ˜¾ï¼‰ã€‚</p>
<h3 data-id="heading-7">Web ç«¯è·³è½¬é…ç½®çš„é…åˆï¼ˆå»ºè®®ï¼‰</h3>
<ul>
<li><strong>Tab æ ¹é¡µé¢ä¹‹é—´</strong>ï¼ˆä¾‹å¦‚é¦–é¡µ/æˆ‘çš„ï¼‰å»ºè®®ç”¨ <strong><code>replace</code></strong>ï¼Œé¿å…æŠŠ Tab åˆ‡æ¢å†™å…¥å›é€€æ ˆï¼Œå‡ºç°â€œTab ä¹‹é—´ä¹Ÿèƒ½ä¾§æ»‘å›é€€â€çš„åç›´è§‰ä½“éªŒã€‚
<ul>
<li><code>&lt;Link to="/home" replace /&gt;</code> æˆ– <code>navigate('/home', { replace: true })</code></li>
</ul>
</li>
<li><strong>äºŒçº§é¡µé¢</strong>ï¼ˆä¾‹å¦‚è®¾ç½®/èµ„æ–™ï¼‰ä¿æŒé»˜è®¤çš„ <strong><code>push</code></strong>ï¼Œè®©å®ƒè¿›å…¥å†å²æ ˆï¼Œä»è€Œå¯è¢«ç³»ç»Ÿä¾§æ»‘è¿”å›ã€‚</li>
</ul>
<p>ä¸€å¥è¯ï¼š<strong>è¯¥ push çš„ pushï¼Œè¯¥ replace çš„ replace</strong>ã€‚è¿™å†³å®šäº† iOS ç³»ç»Ÿæ‰‹åŠ¿åˆ°åº•ä¼šå›åˆ°å“ªé‡Œã€‚</p>
<h3 data-id="heading-8">ç»éªŒä¸è¸©å‘</h3>
<ul>
<li><strong>ä¼˜å…ˆä½¿ç”¨ç³»ç»Ÿ API</strong>ï¼šè‡ªç ”æ‰‹åŠ¿è¦å¤„ç†å¿«ç…§æ—¶æœºã€æ¸²æŸ“ç«æ€ã€æ‰‹åŠ¿å†²çªã€<code>webView.isHidden</code> é»‘å±ç­‰é—®é¢˜ï¼Œæˆæœ¬å’Œé£é™©éƒ½å¾ˆé«˜ã€‚</li>
<li><strong>Native ä¸ Web å¿…é¡»è”åŠ¨</strong>ï¼šWKWebView çš„å†å²æ ˆ + SPA çš„è·¯ç”±æ ˆ + æ»šåŠ¨æ¢å¤ï¼Œæ˜¯åŒä¸€ä¸ªç³»ç»Ÿã€‚</li>
<li><strong>çœŸæœº + æ»šåŠ¨åœºæ™¯å¿…æµ‹</strong>ï¼šå¾ˆå¤šâ€œé¢„è§ˆç™½å±â€åªæœ‰åœ¨é¡µé¢æ»šåŠ¨åæ‰ä¼šæš´éœ²ã€‚</li>
<li><strong>èƒŒæ™¯è‰²æ˜¯å…œåº•ä¸æ˜¯è§£æ³•</strong>ï¼šå®ƒåªèƒ½å‡å°‘â€œé—ªä¸€ä¸‹â€çš„ä¸»è§‚æ„Ÿå—ï¼Œæ ¸å¿ƒä»æ˜¯è®©ç³»ç»Ÿæ­£ç¡®æ‹¿åˆ°å†å²å¿«ç…§ã€‚</li>
</ul>
<h3 data-id="heading-9">keywords</h3>
<p>Capacitor iOS swipe backã€WKWebView allowsBackForwardNavigationGesturesã€React Router iOS æ‰‹åŠ¿è¿”å›ã€history.scrollRestoration manualã€CAPBridgeViewController è‡ªå®šä¹‰ã€iOS WebView è¿”å›ç™½å±ã€Capacitor è¿”å›æ‰‹åŠ¿</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨æµè§ˆå™¨ä¸­è¿è¡Œå¤§æ¨¡å‹ï¼šåŸºäº WebGPU çš„æœ¬åœ° LLM åº”ç”¨æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7594303825013833743</link>    <guid>https://juejin.cn/post/7594303825013833743</guid>    <pubDate>2026-01-13T01:31:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594303825013833743" data-draft-id="7594303825013817359" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨æµè§ˆå™¨ä¸­è¿è¡Œå¤§æ¨¡å‹ï¼šåŸºäº WebGPU çš„æœ¬åœ° LLM åº”ç”¨æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-13T01:31:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èœå–µ007"/> <meta itemprop="url" content="https://juejin.cn/user/3349527784076185"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨æµè§ˆå™¨ä¸­è¿è¡Œå¤§æ¨¡å‹ï¼šåŸºäº WebGPU çš„æœ¬åœ° LLM åº”ç”¨æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3349527784076185/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èœå–µ007
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T01:31:57.000Z" title="Tue Jan 13 2026 01:31:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœ¨æµè§ˆå™¨ä¸­è¿è¡Œå¤§æ¨¡å‹ï¼šåŸºäº WebGPU çš„æœ¬åœ° LLM åº”ç”¨æ·±åº¦è§£æ</h2>
<blockquote>
<p>ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fftcvictory%2Flocal-llm" target="_blank" title="https://github.com/ftcvictory/local-llm" ref="nofollow noopener noreferrer">GitHubä»“åº“</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Flefan_suitable%2Flocal-llm" target="_blank" title="https://gitee.com/lefan_suitable/local-llm" ref="nofollow noopener noreferrer">Giteeä»“åº“</a>
æ‰€æœ‰ä»£ç å‡ä½¿ç”¨ <strong>Antigravity IDE</strong> å¼€å‘ï¼Œæ¨¡å‹ä¸º <strong>Gemini 3 Pro</strong></p>
</blockquote>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<p>æœ¬æ–‡æ·±å…¥å‰–æäº†ä¸€ä¸ªå®Œå…¨è¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„æœ¬åœ°å¤§è¯­è¨€æ¨¡å‹åº”ç”¨ã€‚è¯¥é¡¹ç›®ä½¿ç”¨ Vue 3 + TypeScript æ„å»ºï¼ŒåŸºäº @mlc-ai/web-llm å®ç° WebGPU åŠ é€Ÿæ¨ç†ï¼Œè®©ç”¨æˆ·æ— éœ€æœåŠ¡å™¨å³å¯åœ¨æµè§ˆå™¨ä¸­ä¸ AI è¿›è¡Œéšç§ä¿æŠ¤çš„å¯¹è¯ã€‚é¡¹ç›®å±•ç¤ºäº†ç°ä»£ Web æŠ€æœ¯åœ¨æœºå™¨å­¦ä¹ é¢†åŸŸçš„å¼ºå¤§èƒ½åŠ›ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡å®ç°æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€é¡¹ç›®æ¦‚è¿°</h3>
<h4 data-id="heading-3">1.1 èƒŒæ™¯ä¸åŠ¨æœº</h4>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹çš„æ™®åŠï¼Œéšç§å’Œæ•°æ®å®‰å…¨æˆä¸ºç”¨æˆ·çš„æ ¸å¿ƒå…³åˆ‡ã€‚ä¼ ç»Ÿçš„ AI åº”ç”¨éœ€è¦å°†ç”¨æˆ·æ•°æ®ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œå­˜åœ¨æ½œåœ¨çš„éšç§é£é™©ã€‚<strong>Local LLM</strong> é¡¹ç›®æ—¨åœ¨è§£å†³è¿™ä¸€ç—›ç‚¹ï¼Œé€šè¿‡ WebGPU æŠ€æœ¯å°†å®Œæ•´çš„è¯­è¨€æ¨¡å‹åŠ è½½åˆ°æµè§ˆå™¨ä¸­ï¼Œå®ç°ï¼š</p>
<ul>
<li>ğŸ”’ <strong>å®Œå…¨æœ¬åœ°åŒ–</strong>ï¼šæ‰€æœ‰å¯¹è¯æ•°æ®ä¸ç¦»å¼€ç”¨æˆ·è®¾å¤‡</li>
<li>âš¡ <strong>GPU åŠ é€Ÿ</strong>ï¼šåˆ©ç”¨ WebGPU æä¾›æ¥è¿‘åŸç”Ÿçš„æ¨ç†æ€§èƒ½</li>
<li>ğŸ’¬ <strong>å¤šè½®å¯¹è¯</strong>ï¼šæ”¯æŒä¸Šä¸‹æ–‡è®°å¿†çš„è¿ç»­å¯¹è¯</li>
<li>ğŸŒ <strong>è·¨å¹³å°</strong>ï¼šä»»ä½•æ”¯æŒ WebGPU çš„ç°ä»£æµè§ˆå™¨å‡å¯ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-4">1.2 æŠ€æœ¯æ ˆ</h4>



































<table><thead><tr><th>æŠ€æœ¯</th><th>ç‰ˆæœ¬</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>Vue 3</td><td>^3.5.24</td><td>å‰ç«¯æ¡†æ¶</td></tr><tr><td>TypeScript</td><td>~5.9.3</td><td>ç±»å‹å®‰å…¨</td></tr><tr><td>Vite</td><td>^7.2.4</td><td>æ„å»ºå·¥å…·</td></tr><tr><td>@mlc-ai/web-llm</td><td>^0.2.80</td><td>WebGPU LLM å¼•æ“</td></tr><tr><td>marked</td><td>^17.0.1</td><td>Markdown æ¸²æŸ“</td></tr></tbody></table>
<h3 data-id="heading-5">äºŒã€æ ¸å¿ƒæ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-6">2.1 æ•´ä½“æ¶æ„</h4>
<p>é¡¹ç›®é‡‡ç”¨å…¸å‹çš„<strong>ç»„ä»¶åŒ– Vue åº”ç”¨æ¶æ„</strong>ï¼Œæ ¸å¿ƒåˆ†ä¸ºä¸‰å±‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ChatTerminal<span class="hljs-selector-class">.vue</span>             â”‚  â† UI å±‚
â”‚   (ä¸»ç•Œé¢ã€æ¶ˆæ¯å±•ç¤ºã€è¾“å…¥å¤„ç†)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       useLocalLLM<span class="hljs-selector-class">.ts</span>                â”‚  â† é€»è¾‘å±‚
â”‚   (çŠ¶æ€ç®¡ç†ã€å¼•æ“é€šä¿¡ã€é…ç½®ç®¡ç†)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       llm<span class="hljs-selector-class">.worker</span><span class="hljs-selector-class">.ts</span>                 â”‚  â† è®¡ç®—å±‚
â”‚   (WebGPU å¼•æ“ã€æ¨¡å‹æ¨ç†)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-7">2.2 ç›®å½•ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ components/           <span class="hljs-comment"># UI ç»„ä»¶</span>
â”‚   â”œâ”€â”€ ChatTerminal.vue     <span class="hljs-comment"># ä¸»èŠå¤©ç•Œé¢</span>
â”‚   â”œâ”€â”€ MessageItem.vue      <span class="hljs-comment"># å•æ¡æ¶ˆæ¯ç»„ä»¶</span>
â”‚   â”œâ”€â”€ SettingsPanel.vue    <span class="hljs-comment"># è®¾ç½®é¢æ¿</span>
â”‚   â””â”€â”€ ExportDialog.vue     <span class="hljs-comment"># å¯¼å‡ºå¯¹è¯åŠŸèƒ½</span>
â”œâ”€â”€ composables/          <span class="hljs-comment"># ç»„åˆå¼ API</span>
â”‚   â””â”€â”€ useLocalLLM.ts       <span class="hljs-comment"># æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</span>
â”œâ”€â”€ workers/              <span class="hljs-comment"># Web Worker</span>
â”‚   â””â”€â”€ llm.worker.ts        <span class="hljs-comment"># LLM å¼•æ“çº¿ç¨‹</span>
â”œâ”€â”€ utils/                <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
â”‚   â””â”€â”€ storage.ts           <span class="hljs-comment"># æœ¬åœ°å­˜å‚¨</span>
â”œâ”€â”€ types.ts              <span class="hljs-comment"># ç±»å‹å®šä¹‰</span>
â””â”€â”€ App.vue               <span class="hljs-comment"># æ ¹ç»„ä»¶</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€å…³é”®æŠ€æœ¯å®ç°</h3>
<h4 data-id="heading-9">3.1 WebGPU å¼•æ“åˆå§‹åŒ–</h4>
<p>é¡¹ç›®çš„æ ¸å¿ƒæ˜¯ <strong>@mlc-ai/web-llm</strong>ï¼Œä¸€ä¸ªæ”¯æŒåœ¨æµè§ˆå™¨ä¸­è¿è¡Œé‡åŒ–å¤§æ¨¡å‹çš„åº“ã€‚åˆå§‹åŒ–è¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p>
<h5 data-id="heading-10">3.1.1 Web Worker åˆ›å»º</h5>
<p>ä¸ºé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œæ¨¡å‹åŠ è½½å’Œæ¨ç†åœ¨ç‹¬ç«‹ Worker ä¸­è¿è¡Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/workers/llm.worker.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WebWorkerMLCEngineHandler</span>, <span class="hljs-title class_">MLCEngine</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@mlc-ai/web-llm"</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ã€Workerçº¿ç¨‹ã€‘è„šæœ¬åŠ è½½æˆåŠŸï¼Œå‡†å¤‡åˆå§‹åŒ–..."</span>);

<span class="hljs-comment">// åˆ›å»ºå¼•æ“å®ä¾‹</span>
<span class="hljs-keyword">const</span> engine = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MLCEngine</span>();

<span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯å¤„ç†å™¨</span>
<span class="hljs-keyword">const</span> handler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebWorkerMLCEngineHandler</span>(engine);

onmessage = <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
  handler.<span class="hljs-title function_">onmessage</span>(msg);
};
</code></pre>
<h5 data-id="heading-11">3.1.2 ä¸»çº¿ç¨‹å¼•æ“åˆå§‹åŒ–</h5>
<p>åœ¨ç»„åˆå¼ API ä¸­å°è£…å¼•æ“åˆ›å»ºé€»è¾‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/composables/useLocalLLM.ts (ç®€åŒ–ç‰ˆ)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">initEngine</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ£€æŸ¥ WebGPU æ”¯æŒ</span>
    <span class="hljs-keyword">if</span> (!navigator.<span class="hljs-property">gpu</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ WebGPU"</span>);
    }

    <span class="hljs-comment">// åˆ›å»º Worker å®ä¾‹</span>
    <span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LLMWorker</span>();

    <span class="hljs-comment">// åˆ›å»ºè·¨çº¿ç¨‹çš„ MLC å¼•æ“</span>
    engine = <span class="hljs-keyword">await</span> <span class="hljs-title class_">CreateWebWorkerMLCEngine</span>(
      worker,
      config.<span class="hljs-property">value</span>.<span class="hljs-property">modelConfig</span>.<span class="hljs-property">modelName</span>,
      {
        <span class="hljs-attr">initProgressCallback</span>: <span class="hljs-function">(<span class="hljs-params">report</span>) =&gt;</span> {
          loadProgress.<span class="hljs-property">value</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(report.<span class="hljs-property">progress</span> * <span class="hljs-number">100</span>);
          loadStatus.<span class="hljs-property">value</span> = report.<span class="hljs-property">text</span>;
        },
      }
    );

    isLoaded.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"âœ… æ¨¡å‹åŠ è½½æˆåŠŸ"</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ æ¨¡å‹åŠ è½½å¤±è´¥:"</span>, err);
    loadError.<span class="hljs-property">value</span> = err.<span class="hljs-property">message</span>;
  }
};
</code></pre>
<blockquote>
<p>[!IMPORTANT] &gt; <strong>å…³é”®é…ç½®</strong>ï¼šWebGPU éœ€è¦ç‰¹å®šçš„ HTTP å“åº”å¤´æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
</blockquote>
<h5 data-id="heading-12">3.1.3 Vite é…ç½®</h5>
<p>åœ¨ <code>vite.config.ts</code> ä¸­æ·»åŠ å¿…è¦çš„å“åº”å¤´ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],

  <span class="hljs-comment">// é¢„æ„å»º web-llm ä¾èµ–</span>
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-attr">include</span>: [<span class="hljs-string">"@mlc-ai/web-llm"</span>],
  },

  <span class="hljs-attr">server</span>: {
    <span class="hljs-comment">// ğŸ”‘ æ ¸å¿ƒï¼šé…ç½® COOP/COEP å“åº”å¤´</span>
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-string">"Cross-Origin-Opener-Policy"</span>: <span class="hljs-string">"same-origin"</span>,
      <span class="hljs-string">"Cross-Origin-Embedder-Policy"</span>: <span class="hljs-string">"require-corp"</span>,
    },
  },

  <span class="hljs-attr">worker</span>: {
    <span class="hljs-attr">format</span>: <span class="hljs-string">"es"</span>,
  },
});
</code></pre>
<blockquote>
<p>[!WARNING]
ç¼ºå°‘ <code>Cross-Origin-Opener-Policy</code> å’Œ <code>Cross-Origin-Embedder-Policy</code> å“åº”å¤´ä¼šå¯¼è‡´ SharedArrayBuffer ä¸å¯ç”¨ï¼ŒWebGPU Worker æ— æ³•æ­£å¸¸è¿è¡Œã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-13">3.2 æµå¼å¯¹è¯ç”Ÿæˆ</h4>
<p>ä¸ºäº†æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œåº”ç”¨é‡‡ç”¨äº†<strong>æµå¼å“åº”</strong>ï¼ˆStreamingï¼‰æ–¹å¼ï¼Œå³ AI çš„å›å¤é€å­—æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/composables/useLocalLLM.ts</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">content: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (!engine || isGenerating.<span class="hljs-property">value</span> || !content.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// 1. æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">userMessage</span>: <span class="hljs-title class_">Message</span> = {
    <span class="hljs-attr">id</span>: <span class="hljs-title function_">generateId</span>(),
    <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>,
    <span class="hljs-attr">content</span>: content.<span class="hljs-title function_">trim</span>(),
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
  };
  messages.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(userMessage);

  <span class="hljs-comment">// 2. åˆ›å»º AI æ¶ˆæ¯å ä½ç¬¦</span>
  <span class="hljs-keyword">const</span> aiMessageIndex = messages.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>;
  messages.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>({
    <span class="hljs-attr">id</span>: <span class="hljs-title function_">generateId</span>(),
    <span class="hljs-attr">role</span>: <span class="hljs-string">"assistant"</span>,
    <span class="hljs-attr">content</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
  });

  isGenerating.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 3. æ„å»ºå®Œæ•´å¯¹è¯ä¸Šä¸‹æ–‡</span>
    <span class="hljs-keyword">const</span> chatMessages = [];

    <span class="hljs-comment">// æ·»åŠ ç³»ç»Ÿæç¤ºè¯</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">value</span>.<span class="hljs-property">systemPrompt</span>.<span class="hljs-title function_">trim</span>()) {
      chatMessages.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">role</span>: <span class="hljs-string">"system"</span>,
        <span class="hljs-attr">content</span>: config.<span class="hljs-property">value</span>.<span class="hljs-property">systemPrompt</span>,
      });
    }

    <span class="hljs-comment">// æ·»åŠ å†å²å¯¹è¯</span>
    messages.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (msg.<span class="hljs-property">role</span> !== <span class="hljs-string">"system"</span> &amp;&amp; msg.<span class="hljs-property">content</span>.<span class="hljs-title function_">trim</span>()) {
        chatMessages.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">role</span>: msg.<span class="hljs-property">role</span>,
          <span class="hljs-attr">content</span>: msg.<span class="hljs-property">content</span>,
        });
      }
    });

    <span class="hljs-comment">// 4. æµå¼ç”Ÿæˆ</span>
    <span class="hljs-keyword">const</span> chunks = <span class="hljs-keyword">await</span> engine.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">messages</span>: chatMessages,
      <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">temperature</span>: config.<span class="hljs-property">value</span>.<span class="hljs-property">modelConfig</span>.<span class="hljs-property">temperature</span>,
      <span class="hljs-attr">top_p</span>: config.<span class="hljs-property">value</span>.<span class="hljs-property">modelConfig</span>.<span class="hljs-property">topP</span>,
      <span class="hljs-attr">max_tokens</span>: config.<span class="hljs-property">value</span>.<span class="hljs-property">modelConfig</span>.<span class="hljs-property">maxTokens</span>,
    });

    <span class="hljs-comment">// 5. é€å—æ¥æ”¶å¹¶æ›´æ–° UI</span>
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> chunks) {
      <span class="hljs-keyword">const</span> delta = chunk.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">delta</span>?.<span class="hljs-property">content</span> || <span class="hljs-string">""</span>;
      messages.<span class="hljs-property">value</span>[aiMessageIndex].<span class="hljs-property">content</span> += delta;
    }
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"âŒ ç”Ÿæˆå¤±è´¥:"</span>, err);
    messages.<span class="hljs-property">value</span>[aiMessageIndex].<span class="hljs-property">content</span> = <span class="hljs-string">`âš ï¸ ç”Ÿæˆå¤±è´¥: <span class="hljs-subst">${err.message}</span>`</span>;
  } <span class="hljs-keyword">finally</span> {
    isGenerating.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-title function_">saveChatHistory</span>(messages.<span class="hljs-property">value</span>);
  }
};
</code></pre>
<p><strong>æµå¼ç”Ÿæˆçš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… ç”¨æˆ·æ— éœ€ç­‰å¾…å®Œæ•´å“åº”ï¼Œç«‹å³çœ‹åˆ°è¾“å‡º</li>
<li>âœ… æä¾›ç±»ä¼¼æ‰“å­—æœºæ•ˆæœï¼Œæ”¹å–„äº¤äº’ä½“éªŒ</li>
<li>âœ… å¯éšæ—¶ä¸­æ–­ç”Ÿæˆè¿‡ç¨‹</li>
</ul>
<hr/>
<h4 data-id="heading-14">3.3 å¤šæ¨¡å‹æ”¯æŒ</h4>
<p>åº”ç”¨å†…ç½®äº†ä¸‰ç§ä¸åŒè§„æ¨¡çš„æ¨¡å‹ï¼Œç”¨æˆ·å¯æ ¹æ®æ€§èƒ½éœ€æ±‚åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/types.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">AVAILABLE_MODELS</span> = [
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Qwen2.5-1.5B-Instruct-q4f32_1-MLC"</span>,
    <span class="hljs-attr">displayName</span>: <span class="hljs-string">"Qwen 2.5 1.5B (å¿«é€Ÿ)"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"è½»é‡çº§æ¨¡å‹ï¼ŒåŠ è½½å¿«é€Ÿï¼Œé€‚åˆæ—¥å¸¸å¯¹è¯"</span>,
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Llama-3-8B-Instruct-q4f32_1-MLC"</span>,
    <span class="hljs-attr">displayName</span>: <span class="hljs-string">"Llama 3 8B (å¼ºå¤§)"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"æ€§èƒ½å¼ºå¤§ï¼Œå“åº”è´¨é‡é«˜ï¼Œéœ€è¦æ›´å¤šèµ„æº"</span>,
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Phi-3.5-mini-instruct-q4f16_1-MLC"</span>,
    <span class="hljs-attr">displayName</span>: <span class="hljs-string">"Phi 3.5 Mini (å‡è¡¡)"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"å¾®è½¯å‡ºå“ï¼Œæ€§èƒ½ä¸é€Ÿåº¦å‡è¡¡"</span>,
  },
] <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
</code></pre>
<p><strong>æ¨¡å‹åˆ‡æ¢é€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">switchModel</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">modelName: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (isGenerating.<span class="hljs-property">value</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æ­£åœ¨ç”Ÿæˆå›å¤ï¼Œæ— æ³•åˆ‡æ¢æ¨¡å‹"</span>);
  }

  <span class="hljs-comment">// æ›´æ–°é…ç½®</span>
  config.<span class="hljs-property">value</span>.<span class="hljs-property">modelConfig</span>.<span class="hljs-property">modelName</span> = modelName;
  <span class="hljs-title function_">saveConfig</span>(config.<span class="hljs-property">value</span>);

  <span class="hljs-comment">// é‡ç½®å¼•æ“çŠ¶æ€</span>
  isLoaded.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  loadProgress.<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;
  engine = <span class="hljs-literal">null</span>;

  <span class="hljs-comment">// é‡æ–°åˆå§‹åŒ–</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">initEngine</span>();
};
</code></pre>
<hr/>
<h4 data-id="heading-15">3.4 æœ¬åœ°å­˜å‚¨ä¸çŠ¶æ€æŒä¹…åŒ–</h4>
<p>ä¸ºäº†æä¾›è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œåº”ç”¨ä¼šè‡ªåŠ¨ä¿å­˜ï¼š</p>
<ul>
<li>ğŸ“ å¯¹è¯å†å²</li>
<li>âš™ï¸ ç”¨æˆ·é…ç½®ï¼ˆæ¨¡å‹é€‰æ‹©ã€æ¸©åº¦ç­‰å‚æ•°ï¼‰</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/utils/storage.ts (ç¤ºä¾‹)</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STORAGE_KEYS</span> = {
  <span class="hljs-attr">CHAT_HISTORY</span>: <span class="hljs-string">"local-llm-chat-history"</span>,
  <span class="hljs-attr">CONFIG</span>: <span class="hljs-string">"local-llm-config"</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveChatHistory</span>(<span class="hljs-params">messages: Message[]</span>) {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">STORAGE_KEYS</span>.<span class="hljs-property">CHAT_HISTORY</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(messages));
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadChatHistory</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Message</span>[] {
  <span class="hljs-keyword">const</span> data = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">STORAGE_KEYS</span>.<span class="hljs-property">CHAT_HISTORY</span>);
  <span class="hljs-keyword">return</span> data ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data) : [];
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">saveConfig</span>(<span class="hljs-params">config: AppConfig</span>) {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-variable constant_">STORAGE_KEYS</span>.<span class="hljs-property">CONFIG</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(config));
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadConfig</span>(<span class="hljs-params"/>): <span class="hljs-title class_">AppConfig</span> | <span class="hljs-literal">null</span> {
  <span class="hljs-keyword">const</span> data = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-variable constant_">STORAGE_KEYS</span>.<span class="hljs-property">CONFIG</span>);
  <span class="hljs-keyword">return</span> data ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data) : <span class="hljs-literal">null</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-16">å››ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h3>
<h4 data-id="heading-17">4.1 å“åº”å¼è®¾è®¡</h4>
<p>åº”ç”¨é‡‡ç”¨ç°ä»£ CSS æŠ€æœ¯å®ç°ç²¾ç¾çš„ç•Œé¢ï¼š</p>
<ul>
<li><strong>æ¸å˜èƒŒæ™¯</strong>ï¼šå¤šå±‚æ¬¡ç´«è‰²æ¸å˜è¥é€ æ²‰æµ¸æ„Ÿ</li>
<li><strong>æ¯›ç»ç’ƒæ•ˆæœ</strong>ï¼š<code>backdrop-filter: blur(10px)</code> å®ç°åŠé€æ˜æ¨¡ç³Š</li>
<li><strong>åŠ¨ç”»æ•ˆæœ</strong>ï¼šåŠ è½½åŠ¨ç”»ã€æ‚¬åœæ•ˆæœã€çŠ¶æ€æŒ‡ç¤ºå™¨è„‰å†²</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* src/components/ChatTerminal.vue */</span>
<span class="hljs-selector-class">.chat-terminal</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#0f0c29</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#302b63</span> <span class="hljs-number">50%</span>, <span class="hljs-number">#24243e</span> <span class="hljs-number">100%</span>);
  backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">10px</span>);
}

<span class="hljs-selector-class">.status-dot</span> {
  <span class="hljs-attribute">animation</span>: pulse <span class="hljs-number">2s</span> infinite;
}

<span class="hljs-keyword">@keyframes</span> pulse {
  <span class="hljs-number">0%</span>,
  <span class="hljs-number">100%</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  }
  <span class="hljs-number">50%</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  }
}
</code></pre>
<h4 data-id="heading-18">4.2 è‡ªåŠ¨æ»šåŠ¨</h4>
<p>ä½¿ç”¨ Vue çš„ <code>watch</code> ç›‘å¬æ¶ˆæ¯å˜åŒ–ï¼Œè‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç›‘å¬æ¶ˆæ¯æ•°é‡å˜åŒ–</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> messages.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>,
  <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();
    <span class="hljs-keyword">if</span> (viewport.<span class="hljs-property">value</span>) {
      viewport.<span class="hljs-property">value</span>.<span class="hljs-property">scrollTop</span> = viewport.<span class="hljs-property">value</span>.<span class="hljs-property">scrollHeight</span>;
    }
  }
);

<span class="hljs-comment">// ç›‘å¬æµå¼ç”Ÿæˆæ—¶çš„å†…å®¹å˜åŒ–</span>
<span class="hljs-title function_">watch</span>(
  <span class="hljs-function">() =&gt;</span> messages.<span class="hljs-property">value</span>[messages.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]?.<span class="hljs-property">content</span>,
  <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();
    <span class="hljs-keyword">if</span> (viewport.<span class="hljs-property">value</span> &amp;&amp; isGenerating.<span class="hljs-property">value</span>) {
      viewport.<span class="hljs-property">value</span>.<span class="hljs-property">scrollTop</span> = viewport.<span class="hljs-property">value</span>.<span class="hljs-property">scrollHeight</span>;
    }
  }
);
</code></pre>
<h4 data-id="heading-19">4.3 åŠ è½½è¿›åº¦åé¦ˆ</h4>
<p>æ¨¡å‹åŠ è½½æ˜¯ä¸ªè€—æ—¶è¿‡ç¨‹ï¼ˆé€šå¸¸ 1-5 åˆ†é’Ÿï¼‰ï¼Œç²¾å¿ƒè®¾è®¡çš„åŠ è½½ç•Œé¢è‡³å…³é‡è¦ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;div v-if="!isLoaded" class="loading-screen"&gt;
  &lt;div class="loading-content"&gt;
    &lt;div class="loading-icon"&gt;âš¡&lt;/div&gt;
    &lt;h2 class="loading-title"&gt;
      {{ loadError ? "åŠ è½½å¤±è´¥" : "æ­£åœ¨åŠ è½½æ¨¡å‹" }}
    &lt;/h2&gt;

    &lt;div v-if="!loadError" class="progress-container"&gt;
      &lt;div class="progress-bar"&gt;
        &lt;div class="progress-fill" :style="{ width: loadProgress + '%' }"&gt;&lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="progress-info"&gt;
        &lt;span class="progress-percent"&gt;{{ loadProgress }}%&lt;/span&gt;
        &lt;span class="progress-status"&gt;{{ loadStatus }}&lt;/span&gt;
      &lt;/div&gt;
    &lt;/div&gt;

    &lt;div v-else class="error-message"&gt;
      &lt;p&gt;âŒ {{ loadError }}&lt;/p&gt;
      &lt;p class="error-hint"&gt;
        è¯·ç¡®ä¿ä½¿ç”¨æ”¯æŒ WebGPU çš„æµè§ˆå™¨ï¼ˆChrome/Edge æœ€æ–°ç‰ˆï¼‰
      &lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<hr/>
<h3 data-id="heading-20">äº”ã€æŠ€æœ¯äº®ç‚¹ä¸åˆ›æ–°</h3>
<h4 data-id="heading-21">5.1 å®Œå…¨ç¦»çº¿è¿è¡Œ</h4>
<p>ä¸€æ—¦æ¨¡å‹åŠ è½½å®Œæˆï¼Œåº”ç”¨å¯ä»¥<strong>å®Œå…¨ç¦»çº¿ä½¿ç”¨</strong>ã€‚æ‰€æœ‰è®¡ç®—å‡åœ¨æœ¬åœ°å®Œæˆï¼Œæ— éœ€ä»»ä½•ç½‘ç»œè¯·æ±‚ï¼ˆé™¤é¦–æ¬¡åŠ è½½æ¨¡å‹æ–‡ä»¶ï¼‰ã€‚</p>
<h4 data-id="heading-22">5.2 éšç§ä¿æŠ¤</h4>
<ul>
<li>âœ… å¯¹è¯å†…å®¹ä¸ä¸Šä¼ ä»»ä½•æœåŠ¡å™¨</li>
<li>âœ… æœ¬åœ°å­˜å‚¨é‡‡ç”¨æµè§ˆå™¨ <code>localStorage</code></li>
<li>âœ… ç”¨æˆ·æ‹¥æœ‰æ•°æ®çš„å®Œå…¨æ§åˆ¶æƒ</li>
</ul>
<h4 data-id="heading-23">5.3 é«˜æ€§èƒ½æ¨ç†</h4>
<p>é€šè¿‡ WebGPUï¼š</p>
<ul>
<li>âš¡ åˆ©ç”¨ GPU å¹¶è¡Œè®¡ç®—èƒ½åŠ›</li>
<li>âš¡ é‡åŒ–æ¨¡å‹ï¼ˆq4f32_1ï¼‰å‡å°‘å†…å­˜å ç”¨</li>
<li>âš¡ æ¨ç†é€Ÿåº¦å¯è¾¾ 10-30 tokens/ç§’ï¼ˆå–å†³äºç¡¬ä»¶ï¼‰</li>
</ul>
<h4 data-id="heading-24">5.4 çµæ´»çš„é…ç½®</h4>
<p>ç”¨æˆ·å¯è°ƒæ•´ï¼š</p>
<ul>
<li>ğŸ›ï¸ <strong>Temperature</strong>ï¼šæ§åˆ¶è¾“å‡ºçš„éšæœºæ€§</li>
<li>ğŸ›ï¸ <strong>Top P</strong>ï¼šæ ¸é‡‡æ ·å‚æ•°</li>
<li>ğŸ›ï¸ <strong>Max Tokens</strong>ï¼šæœ€å¤§ç”Ÿæˆé•¿åº¦</li>
<li>ğŸ›ï¸ <strong>System Prompt</strong>ï¼šè‡ªå®šä¹‰ AI è§’è‰²</li>
</ul>
<hr/>
<h3 data-id="heading-25">å…­ã€æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-26">6.1 æŒ‘æˆ˜ï¼šæµè§ˆå™¨å…¼å®¹æ€§</h4>
<p><strong>é—®é¢˜</strong>ï¼šWebGPU æ˜¯è¾ƒæ–°çš„æŠ€æœ¯ï¼Œä»…åœ¨æœ€æ–°ç‰ˆæœ¬çš„ Chrome å’Œ Edge ä¸­å®Œå…¨æ”¯æŒã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å¯åŠ¨æ—¶æ£€æµ‹ <code>navigator.gpu</code> æ˜¯å¦å¯ç”¨</li>
<li>æä¾›æ¸…æ™°çš„é”™è¯¯æç¤ºå’Œæµè§ˆå™¨å‡çº§å»ºè®®</li>
</ul>
<h4 data-id="heading-27">6.2 æŒ‘æˆ˜ï¼šé¦–æ¬¡åŠ è½½æ—¶é—´</h4>
<p><strong>é—®é¢˜</strong>ï¼šæ¨¡å‹æ–‡ä»¶ä½“ç§¯è¾ƒå¤§ï¼ˆ1.5B æ¨¡å‹çº¦ 1GBï¼‰ï¼Œé¦–æ¬¡åŠ è½½è€—æ—¶é•¿ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å®æ—¶æ˜¾ç¤ºåŠ è½½è¿›åº¦ï¼ˆç™¾åˆ†æ¯” + çŠ¶æ€æ–‡æœ¬ï¼‰</li>
<li>æ¨¡å‹æ–‡ä»¶ç¼“å­˜åœ¨æµè§ˆå™¨ä¸­ï¼ˆIndexedDBï¼‰ï¼Œåç»­è®¿é—®æ— éœ€é‡æ–°ä¸‹è½½</li>
<li>æä¾›å¤šç§è§„æ¨¡çš„æ¨¡å‹ä¾›ç”¨æˆ·é€‰æ‹©</li>
</ul>
<h4 data-id="heading-28">6.3 æŒ‘æˆ˜ï¼šå†…å­˜ç®¡ç†</h4>
<p><strong>é—®é¢˜</strong>ï¼šé•¿æ—¶é—´å¯¹è¯å¯èƒ½å¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æä¾›æ¸…ç©ºå¯¹è¯åŠŸèƒ½é‡Šæ”¾å†…å­˜</li>
<li>é™åˆ¶ <code>max_tokens</code> é¿å…ç”Ÿæˆè¿‡é•¿æ–‡æœ¬</li>
</ul>
<hr/>
<h3 data-id="heading-29">ä¸ƒã€æœªæ¥å±•æœ›</h3>
<ol>
<li><strong>æ›´å¤šæ¨¡å‹æ”¯æŒ</strong>ï¼šé›†æˆæ›´å¤šå¼€æºæ¨¡å‹ï¼ˆå¦‚ Mistralã€Gemmaï¼‰</li>
<li><strong>å¤šæ¨¡æ€èƒ½åŠ›</strong>ï¼šæ”¯æŒå›¾åƒç†è§£ï¼ˆè§†è§‰è¯­è¨€æ¨¡å‹ï¼‰</li>
<li><strong>RAG å¢å¼º</strong>ï¼šæœ¬åœ°çŸ¥è¯†åº“æ£€ç´¢å¢å¼ºç”Ÿæˆ</li>
<li><strong>è¯­éŸ³äº¤äº’</strong>ï¼šé›†æˆ Web Speech API å®ç°è¯­éŸ³å¯¹è¯</li>
<li><strong>PWA æ”¯æŒ</strong>ï¼šå®‰è£…ä¸ºæ¡Œé¢åº”ç”¨</li>
</ol>
<hr/>
<h3 data-id="heading-30">å…«ã€æ€»ç»“</h3>
<p><strong>Local LLM</strong> é¡¹ç›®å±•ç¤ºäº†ç°ä»£ Web æŠ€æœ¯çš„æƒŠäººèƒ½åŠ›ï¼šé€šè¿‡ WebGPUï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡ŒçœŸæ­£çš„å¤§è¯­è¨€æ¨¡å‹ï¼Œæä¾›æ¥è¿‘åŸç”Ÿåº”ç”¨çš„æ€§èƒ½ã€‚è¿™ä¸ä»…æ˜¯å¯¹éšç§ä¿æŠ¤çš„æ‰¿è¯ºï¼Œæ›´æ˜¯å¯¹æœªæ¥ AI åº”ç”¨å½¢æ€çš„æ¢ç´¢ã€‚</p>
<p>éšç€ WebGPU ç”Ÿæ€çš„æˆç†Ÿå’Œæµè§ˆå™¨æ€§èƒ½çš„æŒç»­æå‡ï¼Œ<strong>æœ¬åœ°åŒ– AI åº”ç”¨</strong>å°†æˆä¸ºé‡è¦è¶‹åŠ¿ï¼Œä¸ºç”¨æˆ·æä¾›æ—¢å¼ºå¤§åˆå®‰å…¨çš„æ™ºèƒ½ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-31">é™„å½•ï¼šå¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-32">å®‰è£…ä¾èµ–</h4>
<pre><code class="hljs language-bash" lang="bash">npm install
</code></pre>
<h4 data-id="heading-33">å¼€å‘è¿è¡Œ</h4>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<h4 data-id="heading-34">æ„å»ºéƒ¨ç½²</h4>
<pre><code class="hljs language-bash" lang="bash">npm run build
</code></pre>
<h4 data-id="heading-35">ç³»ç»Ÿè¦æ±‚</h4>
<ul>
<li>Chrome/Edge 113+ (æ”¯æŒ WebGPU)</li>
<li>è‡³å°‘ 8GB RAM</li>
<li>æ”¯æŒ WebGPU çš„ç‹¬ç«‹/é›†æˆæ˜¾å¡</li>
</ul>
<hr/>
<h3 data-id="heading-36">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmlc.ai%2Fmlc-llm%2F" target="_blank" title="https://mlc.ai/mlc-llm/" ref="nofollow noopener noreferrer">MLC LLM å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3.org%2FTR%2Fwebgpu%2F" target="_blank" title="https://www.w3.org/TR/webgpu/" ref="nofollow noopener noreferrer">WebGPU è§„èŒƒ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2F" target="_blank" title="https://vuejs.org/" ref="nofollow noopener noreferrer">Vue 3 æ–‡æ¡£</a></li>
</ul>
<hr/>
<blockquote>
<p>ğŸ’¡ æç¤ºï¼šé¦–æ¬¡è¿è¡Œéœ€è¦ä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚å»ºè®®åœ¨ Wi-Fi ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™ºèƒ½ä½“æ¥äº†ï¼šä» Python å¼€å‘è€…è§†è§’æ·±åº¦å‰–æä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7594103243686379563</link>    <guid>https://juejin.cn/post/7594103243686379563</guid>    <pubDate>2026-01-13T01:15:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594103243686379563" data-draft-id="7594103243686363179" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" æ™ºèƒ½ä½“æ¥äº†ï¼šä» Python å¼€å‘è€…è§†è§’æ·±åº¦å‰–æä¸å®è·µ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-13T01:15:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ”¶èœç¦æ˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3247297428981530"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             æ™ºèƒ½ä½“æ¥äº†ï¼šä» Python å¼€å‘è€…è§†è§’æ·±åº¦å‰–æä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3247297428981530/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ”¶èœç¦æ˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T01:15:55.000Z" title="Tue Jan 13 2026 01:15:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä» API è°ƒç”¨è€…åˆ° Agent æ¶æ„å¸ˆ</h2>
<p>åœ¨è¿‡å»çš„ä¸€å¹´é‡Œï¼Œå¤§å¤šæ•°å¼€å‘è€…å¯¹ AI çš„ä½¿ç”¨è¿˜åœç•™åœ¨â€œå†™å¥½ Promptï¼Œè°ƒç”¨ APIï¼Œè·å– Responseâ€çš„é˜¶æ®µã€‚ä½†éšç€æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ¦‚å¿µçš„è½åœ°ï¼Œæˆ‘ä»¬å‘ç° Python åœ¨ AI æ—¶ä»£çš„åœ°ä½å†æ¬¡å‘ç”Ÿäº†è´¨å˜ã€‚</p>
<p>æ™ºèƒ½ä½“ä¸å†ä»…ä»…æ˜¯æ¨¡å‹çš„å°è£…ï¼Œå®ƒæ˜¯ä¸€å¥—<strong>åŸºäºä»£ç çš„å·¥ç¨‹ç³»ç»Ÿ</strong>ã€‚ä½œä¸ºä¸€å Python å¼€å‘è€…ï¼Œç†è§£æ™ºèƒ½ä½“ä¸åº”åœç•™åœ¨å…¶â€œèªæ˜â€çš„è¡¨è±¡ï¼Œè€Œåº”æ·±å…¥å…¶åº•å±‚çš„å¾ªç¯ï¼ˆLoopï¼‰ã€çŠ¶æ€ï¼ˆStateï¼‰å’Œå·¥å…·é“¾ï¼ˆToolchainï¼‰ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼šæ™ºèƒ½ä½“çš„ Python éª¨æ¶ï¼šæ ¸å¿ƒæ¶æ„çš„å·¥ç¨‹åŒ–</h2>
<p>åœ¨ Python çš„è§†è§’ä¸‹ï¼Œä¸€ä¸ª Agent å®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>æ— é™æˆ–æœ‰é™çš„ While å¾ªç¯</strong>ã€‚</p>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒå¾ªç¯é€»è¾‘</h3>
<p>æœ€åŸºç¡€çš„ Agent é€»è¾‘å¯ä»¥ç”¨ä»¥ä¸‹ä¼ªä»£ç è¡¨ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">def simple_agent(user_goal):
 Â   <span class="hljs-attr">context</span> = []
 Â   while not task_completed:
 Â  Â  Â   <span class="hljs-comment"># 1. æ€è€ƒï¼šLLM åˆ†æå½“å‰ contextï¼Œå†³å®šä¸‹ä¸€æ­¥</span>
 Â  Â  Â   <span class="hljs-attr">thought</span> = llm.generate_thought(user_goal, context)
 Â  Â  Â  Â 
 Â  Â  Â   <span class="hljs-comment"># 2. è¡ŒåŠ¨ï¼šå¦‚æœéœ€è¦å·¥å…·ï¼Œæ‰§è¡Œ Python å‡½æ•°</span>
 Â  Â  Â   if thought.need_tool:
 Â  Â  Â  Â  Â   <span class="hljs-attr">result</span> = execute_tool(thought.tool_name, thought.args)
 Â  Â  Â  Â  Â   context.append(result)
 Â  Â  Â  Â 
 Â  Â  Â   <span class="hljs-comment"># 3. è§‚å¯Ÿä¸åˆ¤æ–­</span>
 Â  Â  Â   if is_goal_reached(context):
 Â  Â  Â  Â  Â   return final_answer
</code></pre>
<h3 data-id="heading-3">1.2 ä¸ªäººç†è§£ï¼šä»â€œä¸²è¡Œâ€åˆ°â€œè‡ªé€‚åº”è¿­ä»£â€</h3>
<p>ä¼ ç»Ÿçš„ç¨‹åºæ˜¯ç¡¬ç¼–ç çš„ <code>if-else</code>ã€‚è€Œ Agent çš„å·¥ç¨‹æœ¬è´¨æ˜¯å°†<strong>å†³ç­–æƒäº¤ç»™äº† LLM</strong>ã€‚æˆ‘ä»¬çš„ä»»åŠ¡ä¸å†æ˜¯å†™æ­»é€»è¾‘ï¼Œè€Œæ˜¯æ„å»ºä¸€ä¸ª<strong>è¶³å¤Ÿé²æ£’çš„è¿è¡Œç¯å¢ƒï¼ˆRuntimeï¼‰</strong> ï¼Œè®© LLM åœ¨å…¶ä¸­å®‰å…¨ã€é«˜æ•ˆåœ°è¿è¡Œ Python å‡½æ•°ã€‚</p>
<h2 data-id="heading-4">ç¬¬äºŒç« ï¼šè®°å¿†ç³»ç»Ÿçš„æ·±åº¦å®ç°ï¼šå†…å­˜ä¸å‘é‡æ•°æ®åº“</h2>
<p>Agent è‹¥æƒ³å®Œæˆå¤æ‚ä»»åŠ¡ï¼Œå¿…é¡»è§£å†³â€œé—å¿˜â€é—®é¢˜ã€‚åœ¨ Python å¼€å‘ä¸­ï¼Œè¿™æ¶‰åŠåˆ°<strong>ä¸Šä¸‹æ–‡çª—å£ç®¡ç†</strong>ä¸<strong>æŒä¹…åŒ–æ£€ç´¢</strong>ã€‚</p>
<h3 data-id="heading-5">2.1 çŸ­æœŸè®°å¿†ï¼šWindow Buffer ä¸ Summarization</h3>
<p>ç”±äºæ¨¡å‹ Token é™åˆ¶ï¼Œæˆ‘ä»¬ä¸èƒ½æŠŠæ‰€æœ‰å†å²å¯¹è¯å¡è¿›å»ã€‚</p>
<ul>
<li><strong>Buffer æ¨¡å¼ï¼š</strong> ä»…ä¿ç•™æœ€è¿‘çš„ N è½®å¯¹è¯ã€‚</li>
<li><strong>Summary æ¨¡å¼ï¼š</strong> ç¼–å†™ä¸€ä¸ª Python è„šæœ¬ï¼Œå®šæœŸè®© LLM å¯¹æ—§å¯¹è¯è¿›è¡Œæ€»ç»“ï¼Œåªä¿ç•™è¦ç‚¹ã€‚</li>
</ul>
<h3 data-id="heading-6">2.2 é•¿æœŸè®°å¿†ï¼šåŸºäº RAG çš„å‘é‡æ£€ç´¢</h3>
<p>åœ¨ Python ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ <code>LangChain</code> æˆ– <code>LlamaIndex</code> é…åˆ <code>ChromaDB</code> æˆ– <code>FAISS</code>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å…¸å‹çš„é•¿æœŸè®°å¿†æ£€ç´¢é€»è¾‘</span>
from langchain_community.vectorstores import Chroma
â€‹
def get_long_term_memory(query):
 Â   <span class="hljs-attr">db</span> = Chroma(persist_directory=<span class="hljs-string">"./agent_memory"</span>, embedding_function=ef)
 Â   <span class="hljs-comment"># ç›¸ä¼¼åº¦æœç´¢</span>
 Â   <span class="hljs-attr">docs</span> = db.similarity_search(query, k=<span class="hljs-number">3</span>)
 Â   return <span class="hljs-section">[doc.page_content for doc in docs]</span>
</code></pre>
<p><strong>ç†è§£ï¼š</strong> è®°å¿†ç³»ç»Ÿæœ¬è´¨ä¸Šæ˜¯ç»™ Agent æŒ‚è½½äº†ä¸€ä¸ªâ€œå¤–éƒ¨ç¡¬ç›˜â€ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œéš¾ç‚¹ä¸åœ¨äºæ•°æ®åº“çš„å­˜å‚¨ï¼Œè€Œåœ¨äº <strong>Embedding çš„è´¨é‡</strong> å’Œ <strong>Top-K æ£€ç´¢çš„ç²¾å‡†åº¦</strong>ã€‚</p>
<h2 data-id="heading-7">ç¬¬ä¸‰ç« ï¼šå·¥å…·ä½¿ç”¨ï¼ˆTool Useï¼‰ï¼šå‡½æ•°è°ƒç”¨çš„è‰ºæœ¯</h2>
<p>è¿™æ˜¯ Agent è·å¾—â€œåŒæ‰‹â€çš„è¿‡ç¨‹ã€‚OpenAI å¼•å…¥çš„ <code>function_calling</code> æ”¹å˜äº†æ¸¸æˆè§„åˆ™ã€‚</p>
<h3 data-id="heading-8">3.1 æ€ä¹ˆè®©æ¨¡å‹ç†è§£ Python å‡½æ•°ï¼Ÿ</h3>
<p>æˆ‘ä»¬é€šè¿‡ JSON Schema æ¥æè¿°å‡½æ•°ã€‚Agent å¹¶ä¸è¿è¡Œæ¨¡å‹ç”Ÿæˆçš„â€œæ–‡å­—â€ï¼Œè€Œæ˜¯è§£ææ¨¡å‹ç”Ÿæˆçš„â€œè°ƒç”¨å‚æ•°â€ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å®šä¹‰å·¥å…·</span>
<span class="hljs-attr">tools</span> = [
 Â   {
 Â  Â  Â   <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
 Â  Â  Â   <span class="hljs-string">"function"</span>: {
 Â  Â  Â  Â  Â   <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_stock_price"</span>,
 Â  Â  Â  Â  Â   <span class="hljs-string">"description"</span>: <span class="hljs-string">"è·å–å®æ—¶è‚¡ç¥¨ä»·æ ¼"</span>,
 Â  Â  Â  Â  Â   <span class="hljs-string">"parameters"</span>: {
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
 Â  Â  Â  Â  Â  Â  Â   <span class="hljs-string">"properties"</span>: {
 Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-string">"symbol"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"è‚¡ç¥¨ä»£ç "</span>}
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
]
</code></pre>
<h3 data-id="heading-9">3.2 ä¸ªäººç†è§£ï¼šä»£ç å³æè¿°ï¼ˆDocstring is all you needï¼‰</h3>
<p>åœ¨æ„å»º Agent æ—¶ï¼Œ<strong>å‡½æ•°çš„ Docstring æˆäº†æœ€é‡è¦çš„â€œä»£ç â€</strong> ã€‚å¦‚æœä½ çš„å‡½æ•°æ³¨é‡Šå†™å¾—ä¸æ¸…æ™°ï¼ŒAgent å°±ä¼šè°ƒé”™å‚æ•°ã€‚è¿™è¿«ä½¿æˆ‘ä»¬å›å½’åˆ°æœ€çº¯ç²¹çš„ç¼–ç¨‹ä¹ æƒ¯ï¼šæ¸…æ™°çš„å‘½åã€è§„èŒƒçš„ç±»å‹æ³¨è§£ä»¥åŠè¯¦å°½çš„æ–‡æ¡£è¯´æ˜ã€‚</p>
<h2 data-id="heading-10">ç¬¬å››ç« ï¼šè§„åˆ’ä¸åæ€ï¼šä» CoT åˆ° ReAct èŒƒå¼</h2>
<h3 data-id="heading-11">4.1 æ€ç»´é“¾ï¼ˆChain of Thoughtï¼‰</h3>
<p>Agent éœ€è¦åœ¨æ‰§è¡Œå‰è¿›è¡Œé€»è¾‘æ‹†è§£ã€‚åœ¨ Python ä¸­ï¼Œè¿™é€šå¸¸è¡¨ç°ä¸ºå¤šçº§ Promptã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">âˆ£</mi><mi>G</mi><mi>o</mi><mi>a</mi><mi>l</mi><mo stretchy="false">)</mo><mo>=</mo><mo>âˆ‘</mo><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi mathvariant="normal">âˆ£</mi><mi>S</mi><mi>t</mi><mi>e</mi><msub><mi>p</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>â‹…</mo><mi>P</mi><mo stretchy="false">(</mo><mi>S</mi><mi>t</mi><mi>e</mi><msub><mi>p</mi><mi>i</mi></msub><mi mathvariant="normal">âˆ£</mi><mi>G</mi><mi>o</mi><mi>a</mi><mi>l</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(Action | Goal) = \sum P(Action | Step_i) \cdot P(Step_i | Goal)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord">âˆ£</span><span class="mord mathnormal">G</span><span class="mord mathnormal">o</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord">âˆ£</span><span class="mord mathnormal">St</span><span class="mord mathnormal">e</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">St</span><span class="mord mathnormal">e</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">G</span><span class="mord mathnormal">o</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">)</span></span></span></span></span></p>
<h3 data-id="heading-12">4.2 ReAct æ¨¡å¼çš„ Python å®è·µ</h3>
<p>ReAct æ˜¯ç›®å‰æœ€ç¨³å¥çš„æ¨¡å¼ï¼š</p>
<ol start="0">
<li><strong>Thought:</strong> æ¨¡å‹åˆ†æç°çŠ¶ã€‚</li>
<li><strong>Action:</strong> æ¨¡å‹é€‰æ‹©å·¥å…·ã€‚</li>
<li><strong>Observation:</strong> Python æ‰§è¡Œå·¥å…·å¹¶è¿”å›ç»“æœç»™æ¨¡å‹ã€‚</li>
</ol>
<p><strong>æŠ€æœ¯éš¾ç‚¹ï¼š</strong> å¾ªç¯æ­»ç»“ã€‚å½“æ¨¡å‹åå¤å°è¯•é”™è¯¯çš„å·¥å…·æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Python é€»è¾‘ä¸­åŠ å…¥â€œç†”æ–­æœºåˆ¶ï¼ˆMax Iterationsï¼‰â€ï¼Œé˜²æ­¢è´¹ç”¨è¶…æ”¯ã€‚</p>
<h2 data-id="heading-13">ç¬¬äº”ç« ï¼šå¤šæ™ºèƒ½ä½“åä½œï¼ˆMulti-Agentï¼‰ï¼šç¾¤ä½“æ™ºèƒ½çš„å·¥ç¨‹åŒ–</h2>
<p>å• Agent å¤„ç†é•¿é“¾è·¯ä»»åŠ¡æ—¶ææ˜“â€œè¿·å¤±â€ã€‚è§£å†³æ–¹æ³•æ˜¯ï¼š<strong>åˆ†è€Œæ²»ä¹‹</strong>ã€‚</p>
<h3 data-id="heading-14">5.1 æ¡†æ¶é€‰æ‹©ï¼šAutogen vs CrewAI</h3>
<ul>
<li><strong>Autogen:</strong> å¼ºè°ƒ Agent ä¹‹é—´çš„å¯¹è¯ï¼ˆConversationï¼‰ã€‚</li>
<li><strong>CrewAI:</strong> å¼ºè°ƒè§’è‰²åˆ†é…ï¼ˆRole-basedï¼‰å’Œæµç¨‹ç®¡ç†ï¼ˆProcessï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-15">5.2 æ·±åº¦æ€è€ƒï¼šåä½œä¸­çš„é€šä¿¡åè®®</h3>
<p>åœ¨å¤š Agent ç³»ç»Ÿä¸­ï¼ŒPython ä»£ç æ‰®æ¼”çš„æ˜¯â€œå¯¼æ¼”â€è§’è‰²ã€‚æ¯ä¸ª Agent éƒ½æœ‰è‡ªå·±çš„æŒ‡ä»¤ï¼ˆSystem Messageï¼‰ã€‚</p>
<ul>
<li><strong>ç†è§£ï¼š</strong> å¤šæ™ºèƒ½ä½“åä½œä¸æ˜¯æ¨¡å‹æ›´å¼ºäº†ï¼Œè€Œæ˜¯<strong>å·¥ç¨‹çº¦æŸæ›´ä¸¥å¯†äº†</strong>ã€‚é€šè¿‡é™å®šæ¯ä¸ª Agent çš„è¾¹ç•Œï¼Œé™ä½äº†å•ä¸ª Agent å‡ºé”™çš„æ¦‚ç‡ã€‚</li>
</ul>
<h2 data-id="heading-16">ç¬¬å…­ç« ï¼šä¸ªäººå®æˆ˜å¿ƒå¾—ï¼šæ„å»º Agent çš„é¿å‘æŒ‡å—</h2>
<p>åœ¨å¼€å‘è¿‡æ•°ä¸ªå‚ç›´é¢†åŸŸçš„ Agent åï¼Œæˆ‘æœ‰å‡ ç‚¹æ·±åˆ»çš„ç†è§£ï¼š</p>
<ol start="0">
<li><strong>Prompt å¹¶éä¸‡èƒ½ï¼Œé€»è¾‘æ ¡éªŒæ‰æ˜¯ç‹é“ï¼š</strong> ä¸è¦æŒ‡æœ›æ¨¡å‹ç™¾åˆ†ä¹‹ç™¾è¾“å‡ºæ­£ç¡®çš„ JSONã€‚åœ¨ Python ç«¯ï¼Œå¿…é¡»ä½¿ç”¨ <code>Pydantic</code> è¿›è¡Œä¸¥æ ¼çš„æ ¼å¼æ ¡éªŒã€‚å¦‚æœè§£æå¤±è´¥ï¼Œåº”è‡ªåŠ¨å°†é”™è¯¯åé¦ˆç»™æ¨¡å‹è®©å…¶ä¿®æ­£ï¼Œè€Œä¸æ˜¯ç›´æ¥æŠ¥é”™é€€å‡ºã€‚</li>
<li><strong>ç¨³å®šæ€§å¤§äºèªæ˜åº¦ï¼š</strong> ä¸€ä¸ª 80 åˆ†èªæ˜ä½† 100% ç¨³å®šçš„ Agentï¼Œè¿œå¥½äºä¸€ä¸ª 100 åˆ†èªæ˜ä½†æ—¶å¸¸æ­»å¾ªç¯çš„ Agentã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¦å¤§é‡ä½¿ç”¨â€œç¡®å®šæ€§ä»£ç â€æ¥è¾…åŠ©â€œä¸ç¡®å®šæ€§æ¨¡å‹â€ã€‚</li>
<li><strong>çŠ¶æ€æœºï¼ˆState Machineï¼‰çš„å¿…è¦æ€§ï¼š</strong> å¯¹äºå¤æ‚çš„ Agentï¼Œå•çº¯çš„ Loop ä¸å¤Ÿç”¨ã€‚ä½¿ç”¨ <code>LangGraph</code> è¿™æ ·çš„æœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰æˆ–çŠ¶æ€æœºæ¥ç¼–æ’ä»»åŠ¡ï¼Œæ˜¯ç›®å‰æœ€é«˜çº§çš„åšæ³•ã€‚</li>
</ol>
<h2 data-id="heading-17">ç¬¬ä¸ƒç« ï¼šå±•æœ›ï¼šPython å¼€å‘è€…çš„ä¸‹åŠåœº</h2>
<p>â€œæ™ºèƒ½ä½“æ¥äº†â€å¹¶ä¸æ„å‘³ç€ç¨‹åºå‘˜ä¼šå¤±ä¸šï¼Œè€Œæ˜¯æ„å‘³ç€<strong>ç¼–ç¨‹èŒƒå¼çš„æ¼”è¿›</strong>ã€‚</p>
<p>è¿‡å»æˆ‘ä»¬ç¼–å†™ <strong>Deterministicï¼ˆç¡®å®šæ€§ï¼‰</strong> é€»è¾‘ï¼š<code>Input -&gt; Function -&gt; Output</code>ã€‚ æœªæ¥æˆ‘ä»¬å°†ç¼–å†™ <strong>Probabilisticï¼ˆæ¦‚ç‡æ€§ï¼‰</strong> é€»è¾‘ï¼š<code>Goal -&gt; Agent Environment -&gt; Verification -&gt; Output</code>ã€‚</p>
<p><strong>æ ¸å¿ƒç«äº‰åŠ›ï¼š</strong> æœªæ¥çš„ Python å¼€å‘è€…ä¸ä»…è¦æ‡‚ Web æ¡†æ¶ï¼ˆDjango/FastAPIï¼‰ï¼Œæ›´è¦æ‡‚å¦‚ä½•è®¾è®¡ <strong>Agent å‹å¥½çš„å·¥å…·æ¥å£</strong>ã€å¦‚ä½•ä¼˜åŒ– <strong>å‘é‡æ£€ç´¢çš„å¬å›ç‡</strong> ä»¥åŠå¦‚ä½•è°ƒè¯• <strong>æ¨¡å‹åœ¨å¤æ‚ä»»åŠ¡ä¸­çš„é€»è¾‘ç¼ºé™·</strong>ã€‚</p>
<h2 data-id="heading-18">ç»“è¯­ï¼šæ‹¥æŠ±ä¸ç¡®å®šæ€§</h2>
<p>æ™ºèƒ½ä½“æ˜¯ LLM çš„ç»ˆæå½¢æ€ï¼Œè€Œ Python æ˜¯æ‰¿è½½è¿™ä¸€å½¢æ€çš„æœ€ä½³åœŸå£¤ã€‚</p>
<p>åœ¨è¿™åœºå˜é©ä¸­ï¼Œæˆ‘ä»¬ä¸åº”åªåšä¸€ä¸ªè§‚æœ›è€…ï¼Œè€Œåº”äº²è‡ªåŠ¨æ‰‹å»å†™ä¸€ä¸ª Loopï¼Œå»æŒ‚è½½ä¸€ä¸ª Toolï¼Œå»è§‚å¯Ÿæ¨¡å‹åœ¨å¤„ç†é”™è¯¯æ—¶çš„çª˜è¿«ä¸æƒŠå–œã€‚åªæœ‰åœ¨ä»£ç çš„ä¸æ–­è°ƒè¯•ä¸­ï¼Œä½ æ‰èƒ½çœŸæ­£æ„ŸçŸ¥åˆ°ï¼š<strong>æ™ºèƒ½ä½“ï¼ŒçœŸçš„æ¥äº†ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¿¡å¥¥å´”è€å¸ˆï¼šä¸‰ç›®è¿ç®— (Ternary Operator)]]></title>    <link>https://juejin.cn/post/7594389937462558730</link>    <guid>https://juejin.cn/post/7594389937462558730</guid>    <pubDate>2026-01-13T01:54:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594389937462558730" data-draft-id="7594391758426865674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¿¡å¥¥å´”è€å¸ˆï¼šä¸‰ç›®è¿ç®— (Ternary Operator)"/> <meta itemprop="keywords" content="C++,æ•°æ®ç»“æ„,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-13T01:54:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jikiecui"/> <meta itemprop="url" content="https://juejin.cn/user/871232992194781"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¿¡å¥¥å´”è€å¸ˆï¼šä¸‰ç›®è¿ç®— (Ternary Operator)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/871232992194781/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jikiecui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T01:54:26.000Z" title="Tue Jan 13 2026 01:54:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">4.5 [ç­‰çº§1] ä¸‰ç›®è¿ç®— (Ternary Operator)</h2>
<h3 data-id="heading-1">1. æ¦‚å¿µä»‹ç»</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e452473593248909dfa12808ff2677c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamlraWVjdWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874066&amp;x-signature=0PSHZA5FcfqpjwYL92DXF8MZwlo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸‰ç›®è¿ç®—ç¬¦ï¼Œä¹Ÿå«æ¡ä»¶è¿ç®—ç¬¦ï¼Œæ˜¯ C++ ä¸­å”¯ä¸€ä¸€ä¸ªéœ€è¦ä¸‰ä¸ªæ“ä½œæ•°çš„è¿ç®—ç¬¦ã€‚å®ƒæ˜¯ä¸€ç§ç´§å‡‘çš„Â <code>if-else</code>Â è¯­å¥çš„æ›¿ä»£å½¢å¼ï¼Œç”¨äºæ ¹æ®ä¸€ä¸ªæ¡ä»¶é€‰æ‹©ä¸¤ä¸ªå€¼ä¸­çš„ä¸€ä¸ªã€‚ è¯­æ³•æ ¼å¼ä¸ºï¼š<code>condition ? expression_if_true : expression_if_false</code></p>
<ul>
<li><code>condition</code>: ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ã€‚</li>
<li><code>expression_if_true</code>: å¦‚æœÂ <code>condition</code>Â ä¸ºÂ <code>true</code>ï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼å°±æ˜¯è¿™ä¸ªéƒ¨åˆ†çš„å€¼ã€‚</li>
<li><code>expression_if_false</code>: å¦‚æœÂ <code>condition</code>Â ä¸ºÂ <code>false</code>ï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼å°±æ˜¯è¿™ä¸ªéƒ¨åˆ†çš„å€¼ã€‚</li>
</ul>
<h3 data-id="heading-2">2. ç®—æ³•æ­¥éª¤</h3>
<ol>
<li>è®¡ç®—Â <code>condition</code>Â è¡¨è¾¾å¼ã€‚</li>
<li>å¦‚æœÂ <code>condition</code>Â çš„ç»“æœä¸ºÂ <code>true</code>ï¼ˆæˆ–éé›¶ï¼‰ï¼Œåˆ™è®¡ç®—Â <code>expression_if_true</code>ï¼Œå¹¶å°†å…¶ç»“æœä½œä¸ºæ•´ä¸ªä¸‰ç›®è¿ç®—è¡¨è¾¾å¼çš„ç»“æœã€‚</li>
<li>å¦‚æœÂ <code>condition</code>Â çš„ç»“æœä¸ºÂ <code>false</code>ï¼ˆæˆ–é›¶ï¼‰ï¼Œåˆ™è®¡ç®—Â <code>expression_if_false</code>ï¼Œå¹¶å°†å…¶ç»“æœä½œä¸ºæ•´ä¸ªä¸‰ç›®è¿ç®—è¡¨è¾¾å¼çš„ç»“æœã€‚<strong>æ³¨æ„</strong>:Â <code>expression_if_true</code>Â å’ŒÂ <code>expression_if_false</code>Â ä¸­åªæœ‰ä¸€ä¸ªä¼šè¢«æ‰§è¡Œã€‚</li>
</ol>
<h3 data-id="heading-3">3. ç®—æ³•å¯è§†åŒ–SVGå›¾ç¤º</h3>
<p>ä¸‹å›¾å±•ç¤ºäº†ä¸‰ç›®è¿ç®—çš„å†³ç­–æµç¨‹ï¼Œåƒä¸€ä¸ªé“è·¯å²”é“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73cc2b19eb31450895e9765a269e9cbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamlraWVjdWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874066&amp;x-signature=LQ9Z8mGYmoJfR1sdzavVs7LS%2F74%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-4">4. æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li><strong>ç®€æ´æ€§</strong>: æ˜¯Â <code>if-else</code>Â çš„ç´§å‡‘å†™æ³•ã€‚</li>
<li><strong>è¡¨è¾¾å¼</strong>: ä¸‰ç›®è¿ç®—æœ¬èº«æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒæœ‰è¿”å›å€¼ï¼Œå¯ä»¥è¢«èµ‹å€¼ç»™å˜é‡ï¼Œæˆ–ç”¨åœ¨å…¶ä»–è¡¨è¾¾å¼ä¸­ã€‚è€ŒÂ <code>if-else</code>Â æ˜¯è¯­å¥ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</li>
<li><strong>ç±»å‹å…¼å®¹</strong>:Â <code>expression_if_true</code>Â å’ŒÂ <code>expression_if_false</code>Â çš„ç±»å‹åº”è¯¥ç›¸åŒæˆ–å¯ä»¥éšå¼è½¬æ¢ä¸ºä¸€ä¸ªå…±åŒçš„ç±»å‹ã€‚</li>
<li><strong>å³ç»“åˆæ€§</strong>: ä¸‰ç›®è¿ç®—ç¬¦æ˜¯å³ç»“åˆçš„ï¼Œ<code>a ? b : c ? d : e</code>Â ç­‰ä»·äºÂ <code>a ? b : (c ? d : e)</code>ã€‚</li>
</ul>
<h3 data-id="heading-5">5. C++ä»£ç åŸºç¡€å®ç°</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-type">int</span>Â <span class="hljs-title function_">main</span><span class="hljs-params">()</span>Â {
Â  Â Â <span class="hljs-type">int</span>Â a =Â <span class="hljs-number">10</span>, b =Â <span class="hljs-number">20</span>;

Â  Â Â <span class="hljs-comment">// ç¤ºä¾‹1: æ±‚ä¸¤æ•°ä¸­çš„æœ€å¤§å€¼</span>
Â  Â Â <span class="hljs-type">int</span>Â max_val = (a &gt; b) ? a : b;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>Â &lt;&lt;Â <span class="hljs-string">"Max value is: "</span>Â &lt;&lt; max_val &lt;&lt;Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;Â <span class="hljs-comment">// è¾“å‡º 20</span>

Â  Â Â <span class="hljs-comment">// ç¤ºä¾‹2: åˆ¤æ–­å¥‡å¶æ€§</span>
Â  Â Â <span class="hljs-type">int</span>Â num =Â <span class="hljs-number">7</span>;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>Â result = (num %Â <span class="hljs-number">2</span>Â ==Â <span class="hljs-number">0</span>) ?Â <span class="hljs-string">"Even"</span>Â :Â <span class="hljs-string">"Odd"</span>;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>Â &lt;&lt; num &lt;&lt;Â <span class="hljs-string">" is "</span>Â &lt;&lt; result &lt;&lt;Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;Â <span class="hljs-comment">// è¾“å‡º 7 is Odd</span>

Â  Â Â <span class="hljs-comment">// ç¤ºä¾‹3: ç›´æ¥åœ¨è¾“å‡ºä¸­ä½¿ç”¨</span>
Â  Â Â <span class="hljs-type">int</span>Â score =Â <span class="hljs-number">85</span>;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>Â &lt;&lt;Â <span class="hljs-string">"Grade: "</span>Â &lt;&lt; (score &gt;=Â <span class="hljs-number">60</span>Â ?Â <span class="hljs-string">"Pass"</span>Â :Â <span class="hljs-string">"Fail"</span>) &lt;&lt;Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;Â <span class="hljs-comment">// è¾“å‡º Grade: Pass</span>

Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-6">6. ä¼˜åŒ–ç­–ç•¥</h3>
<ul>
<li><strong>å¯è¯»æ€§ä¼˜å…ˆ</strong>: ä¸è¦è¿‡åº¦ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦ã€‚å¦‚æœé€»è¾‘éå¸¸å¤æ‚æˆ–åµŒå¥—å¤šå±‚ï¼Œä½¿ç”¨Â <code>if-else</code>Â ç»“æ„ä¼šæ›´æ¸…æ™°ã€‚</li>
<li><strong>é¿å…å‰¯ä½œç”¨</strong>: å°½é‡ä¸è¦åœ¨ä¸‰ç›®è¿ç®—ç¬¦çš„ç¬¬äºŒå’Œç¬¬ä¸‰éƒ¨åˆ†ä½¿ç”¨æœ‰å‰¯ä½œç”¨çš„è¡¨è¾¾å¼ï¼ˆå¦‚Â <code>++i</code>ï¼‰ï¼Œè¿™å¯èƒ½ä½¿ä»£ç éš¾ä»¥ç†è§£ã€‚ä¾‹å¦‚Â <code>int x = a &gt; b ? c++ : d++;</code></li>
</ul>
<h3 data-id="heading-7">7. ä¼˜ç¼ºç‚¹</h3>
<ul>
<li><strong>ä¼˜ç‚¹</strong>:</li>
<li>
<ul>
<li><strong>ä»£ç ç´§å‡‘</strong>: å¯¹äºç®€å•çš„æ¡ä»¶èµ‹å€¼ï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘ä»£ç è¡Œæ•°ã€‚</li>
<li><strong>æ˜¯è¡¨è¾¾å¼</strong>: å¯ä»¥æ–¹ä¾¿åœ°åµŒå…¥åˆ°å…¶ä»–è¡¨è¾¾å¼ä¸­ï¼Œå¦‚å‡½æ•°è°ƒç”¨Â <code>printf("%s", score &gt; 60 ? "Pass" : "Fail");</code>Â æˆ–å˜é‡åˆå§‹åŒ–ã€‚</li>
</ul>
</li>
<li><strong>ç¼ºç‚¹</strong>:</li>
<li>
<ul>
<li><strong>å¯è¯»æ€§å·®</strong>: åµŒå¥—çš„ä¸‰ç›®è¿ç®—ä¼šå˜å¾—éå¸¸éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚</li>
<li><strong>è°ƒè¯•å›°éš¾</strong>: åœ¨ä¸‰ç›®è¿ç®—ç¬¦çš„è¡¨è¾¾å¼ä¸­è®¾ç½®æ–­ç‚¹æ¯”åœ¨Â <code>if-else</code>Â å—ä¸­æ›´éš¾ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">8. åº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>ç®€å•çš„æ¡ä»¶èµ‹å€¼</strong>:Â <code>int max = a &gt; b ? a : b;</code></li>
<li><strong>åˆå§‹åŒ–Â <code>const</code>Â å˜é‡</strong>:Â <code>const int val = (some_condition) ? 100 : 200;</code>Â è¿™ç§æƒ…å†µÂ <code>if-else</code>Â æ— æ³•åšåˆ°ã€‚</li>
<li><strong>è¿”å›è¯­å¥</strong>:Â <code>return x &gt; 0 ? x : -x;</code>Â (æ±‚ç»å¯¹å€¼)ã€‚</li>
<li><strong>è¾“å‡ºæ ¼å¼åŒ–</strong>: æ ¹æ®æ¡ä»¶é€‰æ‹©ä¸åŒçš„è¾“å‡ºå­—ç¬¦ä¸²ã€‚</li>
</ul>
<h3 data-id="heading-9">9. æ‰©å±•</h3>
<ul>
<li><strong><code>constexpr if</code>Â (C++17)</strong> : å¯¹äºæ¨¡æ¿ç¼–ç¨‹ï¼Œ<code>if constexpr</code>Â å…è®¸åœ¨ç¼–è¯‘æ—¶æ ¹æ®æ¡ä»¶è¿›è¡Œåˆ†æ”¯ï¼Œä¸æ»¡è¶³æ¡ä»¶çš„åˆ†æ”¯ä»£ç ç”šè‡³ä¸ä¼šè¢«ç¼–è¯‘ï¼Œè¿™æ¯”è¿è¡Œæ—¶ä¸‰ç›®è¿ç®—æ›´å¼ºå¤§ã€‚</li>
<li><strong>ä¸Â <code>lambda</code>Â ç»“åˆ</strong>:Â <code>auto my_func = (use_new_version) ? [](int x){...} : [](int x){...};</code></li>
</ul>
<h3 data-id="heading-10">10. è¯¾åé…å¥—ç»ƒä¹ åŠç­”æ¡ˆ</h3>
<p><strong>ç»ƒä¹ 1: æ±‚ç»å¯¹å€¼</strong>è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦è¾“å‡ºå…¶ç»å¯¹å€¼ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ç­”æ¡ˆ</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-type">int</span>Â <span class="hljs-title function_">main</span><span class="hljs-params">()</span>Â {
Â  Â Â <span class="hljs-type">int</span>Â n;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span>Â &gt;&gt; n;
Â  Â Â <span class="hljs-type">int</span>Â abs_n = (n &gt;=Â <span class="hljs-number">0</span>) ? n : -n;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>Â &lt;&lt;Â <span class="hljs-string">"Absolute value: "</span>Â &lt;&lt; abs_n &lt;&lt;Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ç»ƒä¹ 2: ä¸¤æ•°ä¸­çš„è¾ƒå°è€…</strong>è¾“å…¥ä¸¤ä¸ªæ•´æ•°ï¼Œä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦è¾“å‡ºè¾ƒå°çš„ä¸€ä¸ªã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ç­”æ¡ˆ</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-type">int</span>Â <span class="hljs-title function_">main</span><span class="hljs-params">()</span>Â {
Â  Â Â <span class="hljs-type">int</span>Â a, b;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span>Â &gt;&gt; a &gt;&gt; b;
Â  Â Â <span class="hljs-type">int</span>Â min_val = (a &lt; b) ? a : b;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>Â &lt;&lt;Â <span class="hljs-string">"Min value: "</span>Â &lt;&lt; min_val &lt;&lt;Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ç»ƒä¹ 3: æ€§åˆ«æ˜¾ç¤º</strong>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ 'M' æˆ– 'F'ï¼Œä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦è¾“å‡º "Male" æˆ– "Female"ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ç­”æ¡ˆ</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-type">int</span>Â <span class="hljs-title function_">main</span><span class="hljs-params">()</span>Â {
Â  Â Â <span class="hljs-type">char</span>Â gender;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span>Â &gt;&gt; gender;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>Â gender_str = (gender ==Â <span class="hljs-string">'M'</span>) ?Â <span class="hljs-string">"Male"</span>Â :Â <span class="hljs-string">"Female"</span>;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>Â &lt;&lt; gender_str &lt;&lt;Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ç»ƒä¹ 4: æ‰“æŠ˜è®¡ç®—</strong>å•†å“ä»·æ ¼Â <code>price</code>ã€‚å¦‚æœÂ <code>price</code>Â å¤§äºç­‰äº100ï¼Œåˆ™æ‰“9æŠ˜ï¼›å¦åˆ™ä¸æ‰“æŠ˜ã€‚ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦è®¡ç®—å¹¶è¾“å‡ºæœ€ç»ˆä»·æ ¼ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ç­”æ¡ˆ</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;iomanip&gt;</span></span>
<span class="hljs-type">int</span>Â <span class="hljs-title function_">main</span><span class="hljs-params">()</span>Â {
Â  Â Â <span class="hljs-type">double</span>Â price;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span>Â &gt;&gt; price;
Â  Â Â <span class="hljs-type">double</span>Â final_price = (price &gt;=Â <span class="hljs-number">100</span>) ? price *Â <span class="hljs-number">0.9</span>Â : price;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>Â &lt;&lt;Â <span class="hljs-string">"Final price: "</span>Â &lt;&lt;Â <span class="hljs-built_in">std</span>::fixed &lt;&lt;Â <span class="hljs-built_in">std</span>::setprecision(<span class="hljs-number">2</span>) &lt;&lt; final_price &lt;&lt;Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0</span>;
}
</code></pre>
<p><strong>ç»ƒä¹ 5: åµŒå¥—ä¸‰ç›®è¿ç®—</strong>è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­å®ƒæ˜¯æ­£æ•°ã€è´Ÿæ•°è¿˜æ˜¯é›¶ï¼Œå¹¶è¾“å‡º "Positive", "Negative" æˆ– "Zero"ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// ç­”æ¡ˆ</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span>Â <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-type">int</span>Â <span class="hljs-title function_">main</span><span class="hljs-params">()</span>Â {
Â  Â Â <span class="hljs-type">int</span>Â n;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cin</span>Â &gt;&gt; n;
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>Â result = (n &gt;Â <span class="hljs-number">0</span>) ?Â <span class="hljs-string">"Positive"</span>Â : ((n &lt;Â <span class="hljs-number">0</span>) ?Â <span class="hljs-string">"Negative"</span>Â :Â <span class="hljs-string">"Zero"</span>);
Â  Â Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span>Â &lt;&lt; result &lt;&lt;Â <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-11">11. ç›¸å…³ç½‘ç»œèµ„æºæ¨è</h3>
<ul>
<li>Conditional operator - cppreference.com</li>
<li>C++ Ternary Operator - Programiz</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½è½»æ¾ä½¿ç”¨ Claude Codeï¼ŸZedï¼Œè®© AI åŠå…¬åƒè®°äº‹æœ¬ä¸€æ ·ä¸æ»‘]]></title>    <link>https://juejin.cn/post/7594310266411532288</link>    <guid>https://juejin.cn/post/7594310266411532288</guid>    <pubDate>2026-01-13T02:02:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594310266411532288" data-draft-id="7594303923362054184" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½è½»æ¾ä½¿ç”¨ Claude Codeï¼ŸZedï¼Œè®© AI åŠå…¬åƒè®°äº‹æœ¬ä¸€æ ·ä¸æ»‘"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-13T02:02:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿé¸£"/> <meta itemprop="url" content="https://juejin.cn/user/4107431171852270"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½è½»æ¾ä½¿ç”¨ Claude Codeï¼ŸZedï¼Œè®© AI åŠå…¬åƒè®°äº‹æœ¬ä¸€æ ·ä¸æ»‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4107431171852270/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿé¸£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T02:02:35.000Z" title="Tue Jan 13 2026 02:02:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘è¶Šæ¥è¶Šå¤šçš„äº’è”ç½‘ä»ä¸šè€…å¼€å§‹ä½¿ç”¨ Â Claude Code æ¥ç¼–ç ï¼Œæ¥å¤„ç†æ–‡æ¡£ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c797737ae52147d784411614a143ce07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=8WjKHschdqD0QIkC5z9qMoO9%2Ba4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åå¾ˆå¤šä¸æ˜¯ç¨‹åºå‘˜çš„ç¾¤ä½“å¯¹è¿™ä¸€å—è¿˜æ˜¯è§‰å¾—ä¸Šæ‰‹è¿˜æ˜¯æŒºå›°éš¾çš„ï¼š</p>
<ul>
<li>ç»ˆç«¯é»‘æ¼†æ¼†çš„çª—å£çœ‹ç€å°±â€œæŒºå“äººâ€ï¼Œæ„Ÿè§‰å¾ˆé«˜æ·±ï¼Œå¾ˆéš¾</li>
<li>è€Œä¸”ä¿®æ”¹åçš„æ–‡ä»¶è¿˜ä¸èƒ½å¤Ÿç›´è§‚åœ°å±•ç¤º</li>
<li>å¦‚æœæ˜¯ç›´æ¥ä½¿ç”¨ AI Coding å·¥å…·åˆç‰¹åˆ«é‡</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b37aef2686704884b7a3e799789a2605~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=gyZpFRHJA3iBlNF4Jeuz6rwfzhA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è™½ç„¶æœ‰ä¸€ç‚¹ä¸Šæ‰‹é—¨æ§›ï¼Œä½†æ˜¯ç°åœ¨å·²ç»æœ‰è¶Šæ¥è¶Šå¤šçš„éæŠ€æœ¯äººå‘˜å¼€å§‹è¿™ä¹ˆå»å­¦ä¹ å’Œä½¿ç”¨äº†ã€‚</p>
<p>é‚£ä¹ˆæœ‰æ²¡æœ‰æ›´å‹å¥½çš„æ–¹å¼å‘¢ï¼Ÿ</p>
<p>ä»Šå¤©ç»™å¤§å®¶ä»‹ç»æˆ‘æœ€è¿‘æ¢ç´¢çš„ä¸€ç§æ–¹å¼ï¼ŒZed (è®°äº‹æœ¬)+ Claude Â Code (å¼ºå¤§ AI)+ c c-switchï¼ˆæœåŠ¡å•†åˆ‡æ¢ï¼‰!</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edbb13a2d8fe4f8d90a59feb81360d16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=%2FI4FSwgL5zcEJ5HAz%2FmYjSfODzY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸¾ä¸€ä¸ªç®€å•ä¾‹å­ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬è¦åšä¸€ä¸ªæ–‡æ¡£çš„ç¿»è¯‘ï¼Œæˆ‘ä»¬ä»¥å‰å¯èƒ½éœ€è¦æŠŠæ–‡æ¡£ä½œä¸ºé™„ä»¶ï¼Œç„¶åå†è¯´ä¸€äº›æç¤ºè¯ï¼Œåœ¨ç½‘é¡µä¸Šå»ç¿»è¯‘ï¼Œç¿»è¯‘å®Œäº†ä¹‹åå†ç²˜è´´å›æ¥ï¼Œç„¶åå†™åˆ°æœ¬åœ°ï¼Œç„¶åå†å»ä½¿ç”¨ã€‚</p>
<p>ç°åœ¨æœ‰äº†è¿™ä¸ª Zed åŠ ä¸ŠClaude Codeï¼Œæˆ‘ä»¬å°±å¯ä»¥æä¾›ä¸€ä¸ªURLï¼Œè®©å®ƒè‡ªåŠ¨æŠŠæ–‡æ¡£æŠ“ä¸‹æ¥ï¼Œç„¶ååœ¨Zed ç¼–è¾‘å™¨é‡Œé¢å¯¹è¯ï¼Œè®©ä»–ç¿»è¯‘æˆå¯¹åº”çš„ä¸­æ–‡ï¼Œç”šè‡³å¯ä»¥è®©ä»–å†™ä¸€äº›æ‘˜è¦ä¹‹ç±»çš„ï¼Œä¸éœ€è¦å»åå¤çš„è¿›è¡Œä¸Šä¸‹æ–‡çš„åˆ‡æ¢ã€‚</p>
<p>ç›´æ¥ä½¿ç”¨ç½‘é¡µç‰ˆçš„ AI é€šå¸¸è¿˜ä¼šæœ‰æ–‡ä»¶æ•°é‡çš„é™åˆ¶ï¼Œæ¯”å¦‚è¯´å¤§äº10 ä¸ª æˆ– 50ä¸ªé™„ä»¶å°±æ²¡æ³•å¤„ç†</p>
<hr/>
<p>æ¥ä¸‹æ¥è®²ä¸€ä¸‹éœ€è¦å¤§æ¦‚çš„å®‰è£…å’Œä½¿ç”¨è¿‡ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/453794d0dfd04bcdbb565c24b1538a83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=%2FL2PCR6E6A3eVX3c1WZqPRFbWS4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzed.dev%2F" target="_blank" title="https://zed.dev/" ref="nofollow noopener noreferrer">zed.dev/</a></p>
<p>æˆ‘æ„Ÿè§‰ Zed æ›´åƒæ˜¯è®°äº‹æœ¬å’Œ AI coding å·¥å…·çš„ä¸€ä¸ªæŠ˜ä¸­ï¼Œæ›´è½»é‡ä¸€äº›ï¼Œæ™®é€šäººç”¨èµ·æ¥æ²¡æœ‰é‚£ä¹ˆå“äººã€‚</p>
<p>ä¸‹è½½å’Œå®‰è£…éå¸¸ç®€å•ï¼Œå’Œæ™®é€šè®°äº‹æœ¬è½¯ä»¶ï¼Œå¦‚è¯­é›€ã€çŸ³å¢¨æ–‡æ¡£ç­‰ï¼Œæ²¡æœ‰å¤ªå¤§åŒºåˆ«ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50e4b9d063574568af92e8b1fdc6a7ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=kr8IFAcAD599d27KcUwWk80rBNc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®‰è£…ä¹‹åæ‰“å¼€ï¼Œå’Œä¼ ç»Ÿçš„è®°äº‹æœ¬è½¯ä»¶åŒºåˆ«ä¸å¤§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1568f4cc7434cb89f0945068f976ae7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=mcKVTsqbsQ9iwZSkZcehGT70KZ4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å³ä¸Šè§’æ˜¯å¯ä»¥è¿›è¡Œè®¾ç½®ã€åˆ‡æ¢åˆ°ä¸»é¢˜ï¼Œå®‰è£…æ’ä»¶ä¹‹ç±»çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cea408bd546541e9811d330bf864dccb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=lKxqjYF8VvojHlCloLJYHzBJr0g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€å¸¸ç”¨çš„æ˜¯å·¦ä¸‹è§’çš„é‚£ä¸ªå±•ç¤ºç›®å½•å†…å®¹ï¼Œç„¶åå³ä¾§çš„æœ‰ä¸€ä¸ª AI çš„æŒ‰é’®ï¼Œè¿˜æœ‰ç»ˆç«¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd8b7346263d4bd4950938271b6d1b61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=ShcK0DFVa1aKj2oCeSIf%2FP3UurA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚è¯´ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å³ä¾§å¯¹å½“å‰æ–‡ä»¶å¤¹é‡Œé¢çš„ä»»ä½•å†…å®¹è¿›è¡Œæé—®ï¼Œä½ ä¹Ÿå¯ä»¥@ä»»ä½•æ–‡ä»¶ï¼Œæˆ–è€…é€‰ä¸­æ–‡ä»¶çš„ä¸€ä¸ªéƒ¨åˆ†ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œè®©å®ƒå¤„ç†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f3a5cb3ec8d4bfc8b86adc89d9b4448~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=8xwtgA7p1%2F3YiqFdKP%2FND4YS0WY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ç‚¹æ˜¯ä½ åœ¨è¿™é‡Œè®© AI å»å®Œæˆä¸€äº›ä»»åŠ¡ï¼Œå½“å®Œæˆä¹‹åå‘¢ï¼Œè¿™ä¸ªè½¯ä»¶ä¼šæœ‰ä¸€ä¸ªæ¶ˆæ¯æé†’ï¼Œä½ å¯ä»¥ç¬¬ä¸€æ—¶é—´å›æ¥çœ‹ç»“æœã€‚</p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab9c7a722f9144fe824ae3b65d721be2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=1DvlMVr8OSD66Nsk2vFa9lzPVMo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffarion1231%2Fcc-switch%2Ftree%2Fmain" target="_blank" title="https://github.com/farion1231/cc-switch/tree/main" ref="nofollow noopener noreferrer">github.com/farion1231/â€¦</a></p>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffarion1231%2Fcc-switch%2Freleases" target="_blank" title="https://github.com/farion1231/cc-switch/releases" ref="nofollow noopener noreferrer">github.com/farion1231/â€¦</a></p>
<p>å¤§å®¶ä¸æ„¿æ„ä½¿ç”¨ Claude Code ä¸€ä¸ªé‡è¦åŸå› å°±æ˜¯é…ç½®å¤ªå¤æ‚ï¼Œå¯¹äºæ™®é€šäººæ¥è¯´å¤ªå¤æ‚äº†ã€‚æˆ‘ä»¬å¯ä»¥å®‰è£…è¿™ä¸ª cc-switchï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥ç”¨å¯è§†åŒ–çš„ç•Œé¢è¿›è¡Œé…ç½®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c6d566a3a9a48468afaa0f229f101d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=OA0MaoStOL3x4OllgvsHmjhCjLc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œæ”¯æŒç”¨å¯è§†åŒ–ç•Œé¢çš„æ–¹å¼å»é…ç½®æ¨¡å‹æœåŠ¡å•†ï¼Œé»˜è®¤å·²ç»æ”¯æŒ Zhipu GLMã€Kimiã€DeepSeekã€OpenRouter ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a3b4bd22daf4b528950e335e353344d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=aD0TDWt5VCukANJ%2B2rCiYrc59uw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨è¿™é‡Œé…ç½®æ¨¡å‹æœåŠ¡å•†çš„è¯·æ±‚åœ°å€å’Œæ¨¡å‹åç§°ç­‰ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3bcf81c16ab4d2ab3e3c87e1ab77e67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=qf6utL5eIdJ8HbaPQ7l%2Fyji49jI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é…ç½®å®Œæˆä¹‹åå¯ä»¥åœ¨è¿™é‡Œå¯¹ä¸åŒçš„æ¨¡å‹æœåŠ¡å•†è¿›è¡Œå¿«é€Ÿåˆ‡æ¢ã€‚</p>
<p>è¿˜å¯ä»¥è½»æ¾åœ°å®‰è£… Skills ï¼Œç„¶åè®¾ç½®ç³»ç»Ÿæç¤ºè¯ä»¥åŠå®‰è£… MCPç­‰ï¼Œæ„Ÿå…´è¶£è‡ªå·±ç ”ç©¶ï¼Œè¿™é‡Œå…ˆä¸å±•å¼€ä»‹ç»ã€‚</p>
<hr/>
<p><strong>é‚£ä¹ˆæ¥ä¸‹æ¥ä»–ä»¬æ€ä¹ˆç»“åˆåœ¨ä¸€èµ·å‘¢ï¼Ÿ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9241e20f7ec4ea5b766c58cdbd610e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=X%2FQ7SlDOAzFOXLIQO3w0XCrBW0U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚è¯´æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæœ‰ä¸ªè‹±æ–‡çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªè½¯ä»¶æŠŠæ–‡ä»¶å¤¹æ‰“å¼€ã€‚</p>
<p>å¯ä»¥ Â File - Open æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°†æ–‡ä»¶å¤¹æ‹–çª—å£ä¸­ã€‚</p>
<p>æˆ‘ä»¬æ‰“å¼€å³ä¸‹è§’çš„è¿™ä¸ª AI æŒ‰é’®å°±å¯ä»¥å±•å¼€é‚£ä¸ªä¾§è¾¹æ ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹© Claude Codeã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/007dc529f35b40adacb61181d8007d43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=xiX7p%2B0iYHGo2gm45OvSV5Ub4pE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‚£æˆ‘ä»¬å°±å¯ä»¥è®©ä»–å¯¹è¿™ä¸ªæ–‡æ¡£è¿›è¡Œç¿»è¯‘ï¼Œä¹‹åå†™åˆ°æˆ‘ä»¬çš„æœ¬åœ°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcbdf1a46e7e4bdbb4e7ac1c003681f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=mACKEyUMJiIMXeKAejc4VViOHdY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å³ä¸‹è§’è¾“å…¥æ é™„è¿‘å¯ä»¥é€‰æ‹©æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥é€‰æ‹© cc-swtich ä¸­å¯åŠ¨çš„æœåŠ¡å•†ä¸­é…ç½®çš„æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5675a143527d48359834159d3b9b19a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=jnFESHw36R7g22hjbe3VWY2XDeU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥å·¦ä¸‹è§’çš„ @ å›¾æ ‡ï¼Œå¯ä»¥å»æ·»åŠ æ–‡ä»¶ã€è§„åˆ™ç­‰ç­‰ï¼Œä¹Ÿå¯ä»¥åœˆé€‰ä¸€äº›æ–‡æœ¬ç›´æ¥æ·»åŠ åˆ°æ™ºèƒ½ä½“çš„å¯¹è¯æ¡†ä¸­ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦æŠŠæ–‡ä»¶ä½œä¸ºé™„ä»¶ä¸Šä¼ åˆ°æŸä¸ª AI çš„ç½‘é¡µç‰ˆï¼Œç„¶åç¿»è¯‘å®Œäº†ä¹‹åå†åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å†æŠŠå®ƒç²˜è´´å›æ¥ï¼Œåå¤çš„æŠ˜è…¾ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™é‡Œåªæ˜¯æŠ›ç –å¼•ç‰ï¼Œå…¶ä»–ç±»ä¼¼çš„åœºæ™¯éƒ½å¯ä»¥ç”¨èµ·æ¥ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º Claude Code å®‰è£… Skill å’Œ MCP çš„ï¼Œ Zed æœ¬èº«ä¹Ÿæ˜¯æ”¯æŒä½ å»å®‰è£…ä¸€äº› MCPã€ä¸»é¢˜ä¹‹ç±»çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18b489e9d5a041a3871d72e8aaa13e04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=jb%2FOM2pOw7rSk6mmjmbQnWgkAKQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯”å¦‚è¯´æˆ‘è‡ªå·±è®¾è®¡äº†ä¸€ä¸ªå­—å¹•æ ¡å¯¹çš„skillï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥@è¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åè®© Claude Code è°ƒç”¨æˆ‘çš„ ã€Œå­—æ¯æ ¡å¯¹ Skillã€è¿›è¡Œå­—å¹•æ ¡å¯¹å•¦ã€‚</p>
<p>Skills ç›¸å…³æ–‡ç« ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3NzI0MzAyNA%3D%3D%26mid%3D2247490474%26idx%3D1%26sn%3D9f5bda014ef970e336cb3087885a930b%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3NzI0MzAyNA==&amp;mid=2247490474&amp;idx=1&amp;sn=9f5bda014ef970e336cb3087885a930b&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç»ˆäºæœ‰äººæŠŠ Claude Skills çš„æ¦‚å¿µç»™æˆ‘è®²æ˜ç™½äº†ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3NzI0MzAyNA%3D%3D%26mid%3D2247490551%26idx%3D1%26sn%3D95846f10bd9d59a0d4c7515a0da6ac0b%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3NzI0MzAyNA==&amp;mid=2247490551&amp;idx=1&amp;sn=95846f10bd9d59a0d4c7515a0da6ac0b&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æé€Ÿåˆ›å»ºä¸€ä¸ªé«˜è´¨é‡çš„ Claude Skills æœ€ä½³å®è·µ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3NzI0MzAyNA%3D%3D%26mid%3D2247490421%26idx%3D1%26sn%3De678c4a47a982007d4e7cb0660e69feb%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3NzI0MzAyNA==&amp;mid=2247490421&amp;idx=1&amp;sn=e678c4a47a982007d4e7cb0660e69feb&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å¦‚ä½•åœ¨ Qoderã€Cursorã€Traeã€Windsurf ç­‰ AI Coding å·¥å…·ä¸­ä½¿ç”¨ Claude Skills</a></p>
<p>å½“å‰ AI Coding è®©äº’è”ç½‘ä»ä¸šè€…è·å¾—äº†ä¸€äº›ä¼˜åŠ¿ï¼Œä½†æ˜¯ AI ç»å¯¹ä¸åªæ˜¯èƒ½å†™ä»£ç ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/124f61ba48214ef09d2cc5e768fd30d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=6uUUYDk4kMjtvZkyMt%2BcwVEzzko%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç°åœ¨éœ€è¦äººå»æ›´ä¸»åŠ¨åœ°å»å­¦ä¹ è¿™äº›ï¼ŒæŒæ¡è¿™äº›å·¥å…·çš„æœ€ä½³å®è·µï¼Œæ‰èƒ½å‘æŒ¥å‡º AI çš„æ›´å¤§ä»·å€¼ã€‚</p>
<p>æœªæ¥ AI ä¸€å®šæ˜¯å¯ä»¥å’Œæ›´å¤šè½¯ä»¶æ›´æ·±åº¦çš„èåˆï¼Œè®©æ›´å¤šéäº’è”ç½‘è¡Œä¸šçš„äººç¾¤ä¹Ÿèƒ½å¤Ÿæ›´å¥½åœ°äº«å—åˆ° AI å¸¦æ¥çš„åŠ©åŠ›ã€‚</p>
<p>åœ¨æœªæ¥è¿˜æ²¡æœ‰åˆ°æ¥ä¹‹å‰ï¼Œå¦‚æœä½ èƒ½å¤Ÿå…ˆæŒæ¡çš„è¯ï¼Œå°±ä¼šå…·æœ‰éå¸¸å¤§çš„å…ˆå‘ä¼˜åŠ¿ã€‚</p>
<p>æ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š<strong>æ‚Ÿé¸£AI</strong>Â ï¼Œåç»­ä¼šé™†ç»­åˆ†äº«æ¯”è¾ƒæœ‰ç”¨çš„ AI å·¥å…·å’Œæ¯”è¾ƒå¥½çš„ AI ç»éªŒï¼Œæ¯”è¾ƒå®¢è§‚ç†æ€§çš„ AI è§‚ç‚¹ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a65fa40893d341c9ac438db6ebc49d44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf6bij:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874554&amp;x-signature=lCdaRv09DLZBEpyAKsRTRQfKq28%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code Skills è‡ªä¼˜åŒ–æ¶æ„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7594389937462804490</link>    <guid>https://juejin.cn/post/7594389937462804490</guid>    <pubDate>2026-01-13T02:15:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594389937462804490" data-draft-id="7594391758426898442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code Skills è‡ªä¼˜åŒ–æ¶æ„è®¾è®¡"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-01-13T02:15:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tiny_React"/> <meta itemprop="url" content="https://juejin.cn/user/1399041316887133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code Skills è‡ªä¼˜åŒ–æ¶æ„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1399041316887133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tiny_React
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T02:15:57.000Z" title="Tue Jan 13 2026 02:15:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨æ„å»ºåŸºäºå¤§æ¨¡å‹çš„ Agent æˆ– Workflow ç³»ç»Ÿæ—¶ï¼Œå¼€å‘è€…å¾€å¾€ä¼šé‡åˆ°ä¸€ä¸ªå…±åŒé—®é¢˜ï¼š<strong>ç³»ç»Ÿåœ¨ç¬¬ä¸€æ¬¡è·‘é€šä¹‹åï¼Œä¼˜åŒ–é«˜åº¦ä¾èµ–äººå·¥è°ƒ Prompt å’Œæµç¨‹</strong>ã€‚è¿™ç±»ç³»ç»Ÿâ€œèƒ½ç”¨â€ï¼Œä½†éš¾ä»¥è§„æ¨¡åŒ–æ¼”è¿›ã€‚</p>
<p>Claude Code Skills æä¾›äº†ä¸€ç§é«˜åº¦æ¨¡å—åŒ–çš„èƒ½åŠ›å°è£…æ–¹å¼ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåƒæ­ç§¯æœ¨ä¸€æ ·ç¼–æ’å¤æ‚ä»»åŠ¡æµç¨‹ã€‚ä½†å¦‚æœç¼ºä¹ç³»ç»Ÿçº§çš„åé¦ˆä¸åæ€æœºåˆ¶ï¼ŒSkills ä»ç„¶åªæ˜¯ä¸€æ¬¡æ€§æ‰§è¡Œå•å…ƒï¼Œè€Œä¸æ˜¯å¯æˆé•¿çš„ç³»ç»Ÿã€‚</p>
<p>æœ¬æ–‡å°†ç³»ç»Ÿæ€§åœ°ä»‹ç»ï¼š<strong>å¦‚ä½•åœ¨ Claude Code Skills å·¥ä½œæµä¸­å¼•å…¥æ—¥å¿—ç³»ç»Ÿï¼Œå¹¶åŸºäºæ—¥å¿—æ„å»ºè‡ªä¼˜åŒ–ï¼ˆSelf-Optimizationï¼‰æ¶æ„</strong>ï¼Œä½¿ Workflow å…·å¤‡æŒç»­æ¼”è¿›èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯ã€Œè‡ªä¼˜åŒ–ã€çš„ Claude Code Skills ç³»ç»Ÿ</h2>
<p>éœ€è¦æ˜ç¡®çš„æ˜¯ï¼š</p>
<blockquote>
<p>Claude Code Skills çš„è‡ªä¼˜åŒ–ï¼Œå¹¶ä¸æ˜¯å¯¹æ¨¡å‹æœ¬èº«è¿›è¡Œè®­ç»ƒï¼Œè€Œæ˜¯å¯¹ <strong>Promptã€Skill ç»„åˆç­–ç•¥ä¸æµç¨‹å†³ç­–</strong> çš„æŒç»­æ”¹è¿›ã€‚</p>
</blockquote>
<p>ä¸€ä¸ªå…·å¤‡è‡ªä¼˜åŒ–èƒ½åŠ›çš„ç³»ç»Ÿï¼Œè‡³å°‘åº”æ»¡è¶³ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ol>
<li><strong>å¯è§‚æµ‹ï¼ˆObservableï¼‰</strong> ï¼šæ¯ä¸ª Skill çš„è¡Œä¸ºå’Œç»“æœéƒ½å¯è¢«è®°å½•ä¸åˆ†æ</li>
<li><strong>å¯åæ€ï¼ˆReflectiveï¼‰</strong> ï¼šç³»ç»Ÿèƒ½å¤Ÿè¯„ä¼°ä¸€æ¬¡æ‰§è¡Œçš„è´¨é‡ï¼Œè€Œä¸ä»…æ˜¯æˆåŠŸæˆ–å¤±è´¥</li>
<li><strong>å¯è°ƒæ•´ï¼ˆAdjustableï¼‰</strong> ï¼šPromptã€å‚æ•°ã€æµç¨‹å¯è¢«ç‰ˆæœ¬åŒ–å’Œæ›¿æ¢</li>
<li><strong>å¯æ¼”è¿›ï¼ˆEvolvableï¼‰</strong> ï¼šä¼˜åŒ–æ¥è‡ªå†å²æ‰§è¡Œæ•°æ®ï¼Œè€Œéä¸€æ¬¡æ€§ç»éªŒ</li>
</ol>
<p>æ—¥å¿—ç³»ç»Ÿï¼Œæ­£æ˜¯è¿™å››ç‚¹çš„åŸºç¡€è®¾æ–½ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€Claude Code Skills å·¥ä½œæµçš„åŸºæœ¬ç»“æ„</h2>
<p>ä¸€ä¸ªå…¸å‹çš„ Claude Code Skills å·¥ä½œæµå¯ä»¥æŠ½è±¡ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css">User Intent
   â†“
Planner Skillï¼ˆå†³ç­–ï¼‰
   â†“
Skill <span class="hljs-selector-tag">A</span> â†’ Skill <span class="hljs-selector-tag">B</span> â†’ Skill C
   â†“
Final Output
</code></pre>
<p>åœ¨ä¼ ç»Ÿå®ç°ä¸­ï¼ŒWorkflow å¾€å¾€åªæœ‰â€œè¾“å…¥â€å’Œâ€œè¾“å‡ºâ€ã€‚è€Œè‡ªä¼˜åŒ–æ¶æ„è¦æ±‚æˆ‘ä»¬å…³æ³¨ <strong>è¿‡ç¨‹æœ¬èº«</strong>ã€‚</p>
<p>å› æ­¤ï¼Œè®¾è®¡çš„æ ¸å¿ƒé—®é¢˜å˜æˆï¼š</p>
<blockquote>
<p>åœ¨å“ªäº›èŠ‚ç‚¹è®°å½•ä»€ä¹ˆä¿¡æ¯ï¼Œæ‰èƒ½æ”¯æ’‘åç»­ä¼˜åŒ–ï¼Ÿ</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€æ—¥å¿—ç³»ç»Ÿçš„å››å±‚æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-4">1. æ‰§è¡Œæ—¥å¿—ï¼ˆExecution Logsï¼‰â€”â€”å‘ç”Ÿäº†ä»€ä¹ˆ</h3>
<p>æ‰§è¡Œæ—¥å¿—ç”¨äºå®Œæ•´è®°å½•ä¸€æ¬¡ Skill è°ƒç”¨çš„å®¢è§‚äº‹å®ï¼Œæ˜¯æ•´ä¸ªç³»ç»Ÿçš„åœ°åŸºã€‚</p>
<p><strong>å…¸å‹ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uuid"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"workflow_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"hot_topic_pipeline"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"skill_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"HotTopicSearchSkill"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"input"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"query"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä»Šæ—¥ AI çƒ­ç‚¹"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"output_summary"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"result_count"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">87</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"latency_ms"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2310</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1736500000</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¯¥å±‚æ—¥å¿—å›ç­”çš„é—®é¢˜åªæœ‰ä¸€ä¸ªï¼š<strong>ç³»ç»Ÿåšäº†ä»€ä¹ˆ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-5">2. è¯­ä¹‰æ—¥å¿—ï¼ˆSemantic Logsï¼‰â€”â€”ç»“æœè´¨é‡å¦‚ä½•</h3>
<p>æ‰§è¡Œæ˜¯å¦æˆåŠŸï¼Œå¹¶ä¸ç­‰ä»·äºç»“æœæ˜¯å¦â€œå¥½â€ã€‚</p>
<p>è¯­ä¹‰æ—¥å¿—å¼•å…¥ <strong>LLM-as-a-Judge</strong> æ€è·¯ï¼Œè®© Claude å¯¹è‡ªèº«äº§å‡ºè¿›è¡Œè¯„ä»·ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uuid"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"skill_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ContentIntegrationSkill"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"semantic_evaluation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"relevance_score"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.72</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"information_density"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"medium"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"redundancy"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"missing_aspects"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"äº§ä¸šå½±å“"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"è§‚ç‚¹å†²çª"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å…³é”®åœ¨äºï¼š</p>
<ul>
<li>ä¸è¿½æ±‚ç»å¯¹å‡†ç¡®</li>
<li>åªè¦æ±‚ <strong>æŒ‡æ ‡åœ¨åŒä¸€ç³»ç»Ÿå†…å…·å¤‡ç›¸å¯¹ä¸€è‡´æ€§</strong></li>
</ul>
<hr/>
<h3 data-id="heading-6">3. å†³ç­–æ—¥å¿—ï¼ˆDecision Logsï¼‰â€”â€”ä¸ºä»€ä¹ˆè¿™ä¹ˆé€‰</h3>
<p>å½“ Workflow å¼•å…¥ Planner æˆ– Router Skill åï¼Œ<strong>å†³ç­–æœ¬èº«å°±æˆä¸ºä¼˜åŒ–å¯¹è±¡</strong>ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uuid"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"planner_decision"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"chosen_skills"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"HotTopicSearchSkill"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"SignalFilterSkill"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"WeChatArticleSkill"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"reasoning"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç›®æ ‡æ˜¯å…¬ä¼—å·èµ„è®¯å‹å†…å®¹"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ç±»æ—¥å¿—ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨åæœŸå›ç­”ï¼š</p>
<ul>
<li>æŸä¸ª Skill æ˜¯å¦è¢«è¿‡åº¦æˆ–ä¸è¶³ä½¿ç”¨</li>
<li>å†³ç­–ç†ç”±æ˜¯å¦ä¸æœ€ç»ˆæ•ˆæœç›¸å…³</li>
</ul>
<hr/>
<h3 data-id="heading-7">4. åæ€æ—¥å¿—ï¼ˆReflection Logsï¼‰â€”â€”å¦‚ä½•åšå¾—æ›´å¥½</h3>
<p>åæ€æ—¥å¿—æ˜¯è‡ªä¼˜åŒ–æ¶æ„çš„æ ¸å¿ƒã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uuid"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"reflection"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"what_worked"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"ä¿¡æ¯è¦†ç›–å¹¿"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"what_failed"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"å†…å®¹åŒè´¨åŒ–ä¸¥é‡"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"improvement_suggestions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"æœç´¢é˜¶æ®µåŠ å…¥è§‚ç‚¹å‹å…³é”®è¯"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"æ•´åˆé˜¶æ®µå¼•å…¥åå¯¹è§†è§’"</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä¸€æ­¥ï¼Œé€šå¸¸ç”±ä¸€ä¸ªç‹¬ç«‹çš„ <strong>Reflection Skill</strong> å®Œæˆã€‚</p>
<hr/>
<h2 data-id="heading-8">å››ã€è‡ªä¼˜åŒ–é—­ç¯ï¼šä»æ—¥å¿—åˆ°ç³»ç»Ÿè¿›åŒ–</h2>
<p>å½“ä¸Šè¿°æ—¥å¿—å±‚é½å¤‡åï¼Œå¯ä»¥å½¢æˆå¦‚ä¸‹é—­ç¯ï¼š</p>
<pre><code class="hljs">æ‰§è¡Œ Workflow
   â†“
é‡‡é›†å¤šå±‚æ—¥å¿—
   â†“
Reflection Skill åˆ†æ
   â†“
æ›´æ–° Prompt / æµç¨‹ / ç­–ç•¥
   â†“
ä¸‹ä¸€æ¬¡æ‰§è¡Œ
</code></pre>
<p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼š</p>
<blockquote>
<p>è‡ªä¼˜åŒ–ä¸æ˜¯å®æ—¶è°ƒæ•´ï¼Œè€Œæ˜¯ <strong>åŸºäºå¤šæ¬¡æ‰§è¡Œåçš„ç­–ç•¥æ›´æ–°</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">äº”ã€ä¸‰ç±»å…¸å‹è‡ªä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-10">1. Prompt è‡ªåŠ¨æ¼”è¿›</h3>
<p>é€šè¿‡èšåˆå†å² Reflection Logsï¼Œè®© Claude ç”Ÿæˆæ”¹è¿›ç‰ˆ Promptï¼Œå¹¶è¿›è¡Œç‰ˆæœ¬åŒ–ç®¡ç†ã€‚</p>
<p>é€‚åˆåœºæ™¯ï¼š</p>
<ul>
<li>å†…å®¹ç”Ÿæˆ</li>
<li>åˆ†ææ€»ç»“</li>
<li>å†™ä½œç±» Skill</li>
</ul>
<hr/>
<h3 data-id="heading-11">2. Workflow ç»“æ„ä¼˜åŒ–</h3>
<p>å½“æ—¥å¿—æŒç»­æš´éœ²æŸç±»é—®é¢˜ï¼ˆå¦‚ä¿¡æ¯é‡å¤ç‡é«˜ï¼‰ï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨æ’å…¥æˆ–æ›¿æ¢ Skillã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs">æœç´¢ â†’ è¿‡æ»¤ â†’ æ•´åˆ â†’ ç”Ÿæˆ

ä¼˜åŒ–ä¸ºï¼š
æœç´¢ â†’ ä¿¡å·æ‰“åˆ† â†’ è§‚ç‚¹æ‰©å±• â†’ æ•´åˆ â†’ ç”Ÿæˆ
</code></pre>
<hr/>
<h3 data-id="heading-12">3. Planner è‡ªåæ€</h3>
<p>å°† Planner æœ¬èº«è§†ä¸ºå¯ä¼˜åŒ–å¯¹è±¡ï¼Œè®©å…¶åŸºäºå†å²è½¨è¿¹ç»™å‡ºæ–°çš„é»˜è®¤å†³ç­–ç­–ç•¥ã€‚</p>
<p>è¿™åœ¨æœ¬è´¨ä¸Šå·²ç»æ¥è¿‘å¼ºåŒ–å­¦ä¹ ä¸­çš„ <strong>Policy Improvement</strong> æ€è·¯ã€‚</p>
<hr/>
<h2 data-id="heading-13">å…­ã€æœ€å°å¯è½åœ°å®ç°å»ºè®®ï¼ˆMVPï¼‰</h2>
<ol>
<li>æ‰€æœ‰ Skill å¼ºåˆ¶è¾“å‡ºç»“æ„åŒ– JSON</li>
<li>å¼•å…¥ Execution + Semantic Logs</li>
<li>æ–°å¢ç‹¬ç«‹ Reflection Skill</li>
<li>Prompt ç‰ˆæœ¬åŒ–ç®¡ç†</li>
</ol>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå†é€æ­¥å¼•å…¥ Planner å±‚ä¼˜åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-14">ç»“è¯­</h2>
<p>Claude Code Skills çš„çœŸæ­£ä»·å€¼ï¼Œå¹¶ä¸åªåœ¨äºâ€œæŠŠä»»åŠ¡æ‹†æˆå¤šä¸ª Skillâ€ï¼Œè€Œåœ¨äºï¼š</p>
<blockquote>
<p><strong>å°†ä¸€æ¬¡æ€§æ™ºèƒ½ï¼Œå‡çº§ä¸ºå¯ç§¯ç´¯ç»éªŒã€å¯æŒç»­æ¼”è¿›çš„ç³»ç»Ÿæ™ºèƒ½ã€‚</strong></p>
</blockquote>
<p>æ—¥å¿—ç³»ç»Ÿä¸æ˜¯é™„å±ç»„ä»¶ï¼Œè€Œæ˜¯ Claude Code Skills è‡ªä¼˜åŒ–æ¶æ„çš„ä¸­æ¢ç¥ç»ã€‚</p>
<p>å½“ä½ å¼€å§‹è®°å½•ã€åæ€å¹¶åˆ©ç”¨è¿™äº›æ—¥å¿—æ—¶ï¼Œä½ æ„å»ºçš„å°†ä¸å†æ˜¯ä¸€ä¸ª Workflowï¼Œè€Œæ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„ AI ç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•åœ¨ComfyUIä¸­ä½¿ç”¨Qwen-Image-Layered GGUFï¼šå®Œæ•´å®‰è£…å’Œä½¿ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594415509606072366</link>    <guid>https://juejin.cn/post/7594415509606072366</guid>    <pubDate>2026-01-13T02:05:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594415509606072366" data-draft-id="7594383365418188846" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•åœ¨ComfyUIä¸­ä½¿ç”¨Qwen-Image-Layered GGUFï¼šå®Œæ•´å®‰è£…å’Œä½¿ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-13T02:05:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŠªåŠ›çŠ¯é”™ç©AI"/> <meta itemprop="url" content="https://juejin.cn/user/1366029853539604"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•åœ¨ComfyUIä¸­ä½¿ç”¨Qwen-Image-Layered GGUFï¼šå®Œæ•´å®‰è£…å’Œä½¿ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1366029853539604/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŠªåŠ›çŠ¯é”™ç©AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T02:05:59.000Z" title="Tue Jan 13 2026 02:05:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¼ ç»Ÿçš„å›¾åƒç¼–è¾‘éœ€è¦æ‰‹åŠ¨åˆ›å»ºè’™ç‰ˆã€å¤æ‚çš„é€‰åŒºæ“ä½œ,ä»¥åŠåœ¨Photoshopç­‰å·¥å…·ä¸­è€—è´¹æ•°å°æ—¶çš„ç²¾ç»†å·¥ä½œã€‚å¦‚æœä½ èƒ½ä¸€é”®è‡ªåŠ¨å°†ä»»ä½•å›¾åƒåˆ†è§£ä¸ºå¯ç¼–è¾‘çš„å›¾å±‚,ä¼šæ€ä¹ˆæ ·?è¿™æ­£æ˜¯Qwen-Image-Layeredä¸ºComfyUIå¸¦æ¥çš„é©å‘½æ€§åŠŸèƒ½ã€‚</p>
<p>Qwen-Image-Layeredç”±é˜¿é‡Œå·´å·´Qwenå›¢é˜Ÿå¼€å‘,æ˜¯ä¸€ä¸ªé©å‘½æ€§çš„AIæ¨¡å‹,èƒ½å¤Ÿè‡ªåŠ¨å°†å›¾åƒåˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„RGBAå›¾å±‚ã€‚æ¯ä¸ªå›¾å±‚åŒ…å«ç‰¹å®šçš„è¯­ä¹‰ç»„ä»¶â€”â€”èƒŒæ™¯ã€å‰æ™¯å¯¹è±¡ã€æ–‡æœ¬å’Œè£…é¥°å…ƒç´ â€”â€”å¯ä»¥ç‹¬ç«‹ç¼–è¾‘è€Œä¸å½±å“å›¾åƒçš„å…¶ä»–éƒ¨åˆ†ã€‚</p>
<p>GGUF(GPT-Generated Unified Format)ç‰ˆæœ¬ä½¿è¿™é¡¹å¼ºå¤§çš„æŠ€æœ¯å¯¹æ˜¾å­˜æœ‰é™çš„ç”¨æˆ·ä¹Ÿå˜å¾—å¯ç”¨ã€‚åœ¨è¿™ä»½ç»¼åˆæŒ‡å—ä¸­,ä½ å°†å­¦ä¹ å¦‚ä½•åœ¨ComfyUIä¸­å®‰è£…å’Œä½¿ç”¨Qwen-Image-Layered GGUF,å³ä½¿ä½ ä½¿ç”¨çš„æ˜¯æ¶ˆè´¹çº§ç¡¬ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b2c69aeef904c1e83ecdfeab6a3fbcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqq5Yqb54qv6ZSZ546pQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874759&amp;x-signature=HMJmMxRw6sS8wnLqabQe6WwxpQw%3D" alt="19" loading="lazy"/></p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯Qwen-Image-Layered?</h2>
<p>Qwen-Image-Layeredæ˜¯ä¸€ä¸ªå…ˆè¿›çš„å›¾åƒåˆ†è§£æ¨¡å‹,èƒ½å¤Ÿå°†å¹³é¢å…‰æ …å›¾åƒè½¬æ¢ä¸ºç»“æ„åŒ–çš„å¤šå±‚è¡¨ç¤ºã€‚ä¸ä¼ ç»Ÿçš„å›¾åƒåˆ†å‰²åªæä¾›è’™ç‰ˆä¸åŒ,è¿™ä¸ªæ¨¡å‹ä¸ºæ¯ä¸ªå›¾å±‚ç”Ÿæˆå®Œæ•´çš„RGBAå›¾åƒ,åŒ…æ‹¬:</p>
<ul>
<li><strong>èƒŒæ™¯å›¾å±‚</strong>,å®Œæ•´çš„åœºæ™¯é‡å»º</li>
<li><strong>å‰æ™¯å¯¹è±¡</strong>,å¸¦æœ‰é€‚å½“çš„Alphaé€šé“</li>
<li><strong>æ–‡æœ¬å…ƒç´ </strong>,éš”ç¦»ä»¥ä¾¿è½»æ¾ç¼–è¾‘</li>
<li><strong>è£…é¥°æ•ˆæœ</strong>å’ŒåŠé€æ˜å…ƒç´ </li>
<li><strong>è¢«é®æŒ¡åŒºåŸŸ</strong>,æ™ºèƒ½é‡å»º</li>
</ul>
<p>è¯¥æ¨¡å‹æ”¯æŒå¯å˜çš„å›¾å±‚æ•°é‡(3ã€4ã€8å±‚æˆ–æ›´å¤š),ç”šè‡³æ”¯æŒé€’å½’åˆ†è§£,ä»»ä½•å›¾å±‚éƒ½å¯ä»¥è¿›ä¸€æ­¥åˆ†è§£ä¸ºå­å›¾å±‚ã€‚è¿™ç§çµæ´»æ€§ä½¿å…¶é€‚ç”¨äºä»ç®€å•çš„äº§å“ç…§ç‰‡åˆ°å¤æ‚çš„è‰ºæœ¯ä½œå“çš„å„ç§åœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81b3d1aec6a846f4bf16332613d4661a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqq5Yqb54qv6ZSZ546pQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874759&amp;x-signature=o5oFmWlSmTgCnBYPrM1LZYUPnO8%3D" alt="1" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹©GGUFæ ¼å¼?</h2>
<p>GGUFæ ¼å¼ç»“åˆé‡åŒ–æŠ€æœ¯ä¸ºComfyUIç”¨æˆ·æä¾›äº†æ˜¾è‘—ä¼˜åŠ¿,ç‰¹åˆ«æ˜¯å¯¹äºç¡¬ä»¶èµ„æºæœ‰é™çš„ç”¨æˆ·ã€‚</p>
<h3 data-id="heading-2">GGUFé‡åŒ–çš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<p><strong>1. å¤§å¹…é™ä½æ˜¾å­˜éœ€æ±‚</strong></p>
<p>é‡åŒ–é€šè¿‡é™ä½æ•°å€¼æƒé‡çš„ç²¾åº¦,å°†æ¨¡å‹å¤§å°ç¼©å°50-75%ã€‚é€šå¸¸éœ€è¦16GB+æ˜¾å­˜çš„æ¨¡å‹,ä½¿ç”¨GGUFé‡åŒ–åå¯ä»¥åœ¨8GBç”šè‡³æ›´å°‘æ˜¾å­˜çš„GPUä¸Šè¿è¡Œã€‚</p>
<p><strong>2. æ›´å¿«çš„æ¨ç†é€Ÿåº¦</strong></p>
<p>è¾ƒä½ç²¾åº¦çš„æƒé‡æ„å‘³ç€æ›´å¿«çš„è®¡ç®—ã€‚GGUFä¼˜åŒ–çš„äºŒè¿›åˆ¶æ ¼å¼è¿˜æ”¯æŒå¿«é€ŸåŠ è½½å’Œä¿å­˜,å‡å°‘å¯åŠ¨æ—¶é—´ã€‚</p>
<p><strong>3. ç»æµå®æƒ çš„AIç”Ÿæˆ</strong></p>
<p>é€šè¿‡é™ä½ç¡¬ä»¶è¦æ±‚,GGUFé‡åŒ–æ¶ˆé™¤äº†å¯¹æ˜‚è´µé«˜ç«¯GPUçš„éœ€æ±‚ã€‚ä½ å¯ä»¥åœ¨æ¶ˆè´¹çº§ç¡¬ä»¶ä¸Šè¿è¡Œå¼ºå¤§çš„å›¾åƒç¼–è¾‘æ¨¡å‹ã€‚</p>
<p><strong>4. çµæ´»çš„é‡åŒ–çº§åˆ«</strong></p>
<p>GGUFæ”¯æŒå¤šç§é‡åŒ–çº§åˆ«(Q2ã€Q4ã€Q5ã€Q6ã€Q8),è®©ä½ å¯ä»¥åœ¨æ¨¡å‹å¤§å°ã€é€Ÿåº¦å’Œè¾“å‡ºè´¨é‡ä¹‹é—´å–å¾—å¹³è¡¡ã€‚Q4_K_Mçº§åˆ«é€šå¸¸è¢«æ¨èã€‚</p>
<p><strong>5. æ— ç¼çš„ComfyUIé›†æˆ</strong></p>
<p>ComfyUI-GGUFç­‰è‡ªå®šä¹‰èŠ‚ç‚¹æä¾›äº†ç›´æ¥å°†GGUFæ¨¡å‹åŠ è½½åˆ°å·¥ä½œæµçš„åŸç”Ÿæ”¯æŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f709b473a59f4abd8f0d84020dce03ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqq5Yqb54qv6ZSZ546pQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768874759&amp;x-signature=J7PBoif7z%2Fyw0OUV5KIUw426Z%2BE%3D" alt="1" loading="lazy"/></p>
<h2 data-id="heading-3">ç³»ç»Ÿè¦æ±‚å’Œå‡†å¤‡å·¥ä½œ</h2>
<p>åœ¨ComfyUIä¸­å®‰è£…Qwen-Image-Layered GGUFä¹‹å‰,ç¡®ä¿ä½ çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚:</p>
<h3 data-id="heading-4">æœ€ä½ç¡¬ä»¶è¦æ±‚</h3>
<ul>
<li><strong>GPU</strong>: 8GBæ˜¾å­˜(GGUF Q4ç‰ˆæœ¬)æˆ–12GB+æ˜¾å­˜(FP8/BF16ç‰ˆæœ¬)</li>
<li><strong>å†…å­˜</strong>: æ¨è16GBç³»ç»Ÿå†…å­˜</li>
<li><strong>å­˜å‚¨</strong>: 15-20GBå¯ç”¨ç©ºé—´ç”¨äºæ¨¡å‹æ–‡ä»¶</li>
<li><strong>æ“ä½œç³»ç»Ÿ</strong>: Windows 10/11ã€Linuxæˆ–macOS</li>
</ul>
<h3 data-id="heading-5">è½¯ä»¶å‰ææ¡ä»¶</h3>
<ul>
<li><strong>ComfyUI</strong>: æœ€æ–°ç‰ˆæœ¬(æ›´æ–°ä»¥æ”¯æŒåŸç”ŸQwen-Image-LayeredèŠ‚ç‚¹)</li>
<li><strong>Python</strong>: 3.10æˆ–æ›´æ–°ç‰ˆæœ¬</li>
<li><strong>CUDA</strong>: 11.8æˆ–æ›´æ–°ç‰ˆæœ¬(é€‚ç”¨äºNVIDIA GPU)</li>
</ul>
<h3 data-id="heading-6">æ€§èƒ½é¢„æœŸ</h3>
<p>åŸºäºå®é™…æµ‹è¯•:</p>
<ul>
<li><strong>RTX 4090</strong>: BF16ç‰ˆæœ¬å‡ ä¹å®Œå…¨å ç”¨æ˜¾å­˜</li>
<li><strong>RTX 3060 (12GB)</strong>: GGUF Q4ç‰ˆæœ¬è¿è¡Œèˆ’é€‚</li>
<li><strong>RTX 3050 (8GB)</strong>: åœ¨640pxåˆ†è¾¨ç‡ä¸‹å¯ä½¿ç”¨GGUF Q4</li>
<li><strong>ç”Ÿæˆæ—¶é—´</strong>: 640pxçº¦60-120ç§’,1024pxçº¦120-180ç§’(50æ¨ç†æ­¥æ•°)</li>
</ul>
<h2 data-id="heading-7">åˆ†æ­¥å®‰è£…æŒ‡å—</h2>
<p>æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åœ¨ComfyUIä¸­å®‰è£…Qwen-Image-Layered GGUF:</p>
<h3 data-id="heading-8">æ­¥éª¤1: æ›´æ–°ComfyUI</h3>
<p>é¦–å…ˆ,ç¡®ä¿ä½ è¿è¡Œçš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„ComfyUI:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ComfyUI
git pull
</code></pre>
<p>æœ€æ–°ç‰ˆæœ¬çš„ComfyUIåŒ…å«å¯¹Qwen-Image-Layeredçš„åŸç”Ÿæ”¯æŒã€‚</p>
<h3 data-id="heading-9">æ­¥éª¤2: ä¸‹è½½å¿…éœ€çš„æ¨¡å‹æ–‡ä»¶</h3>
<p>ä½ éœ€è¦ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å‹æ–‡ä»¶ã€‚ä»Hugging Faceæˆ–ModelScopeä¸‹è½½:</p>
<p><strong>å¿…éœ€æ–‡ä»¶:</strong></p>
<ol>
<li><strong>æ–‡æœ¬ç¼–ç å™¨</strong>: <code>qwen_2.5_vl_7b_fp8_scaled.safetensors</code> (~4.5GB)</li>
<li><strong>æ‰©æ•£æ¨¡å‹</strong>(é€‰æ‹©ä¸€ä¸ª):
<ul>
<li>GGUF Q4: <code>qwen_image_layered_Q4_K_M.gguf</code> (~3.2GB) - æ¨èç”¨äº8-12GBæ˜¾å­˜</li>
<li>FP8: <code>qwen_image_layered_fp8mixed.safetensors</code> (~6.8GB) - é€‚ç”¨äº12-16GBæ˜¾å­˜</li>
<li>BF16: <code>qwen_image_layered_bf16.safetensors</code> (~13GB) - é€‚ç”¨äº16GB+æ˜¾å­˜</li>
</ul>
</li>
<li><strong>VAE</strong>: <code>qwen_image_layered_vae.safetensors</code> (~320MB)</li>
</ol>
<p><strong>ä¸‹è½½æ¥æº:</strong></p>
<ul>
<li>Hugging Face: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2FQwen%2FQwen-Image-Layered" target="_blank" title="https://huggingface.co/Qwen/Qwen-Image-Layered" ref="nofollow noopener noreferrer">Qwen/Qwen-Image-Layered</a></li>
<li>GGUFç‰ˆæœ¬: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2FQuantStack%2FQwen-Image-Layered-GGUF" target="_blank" title="https://huggingface.co/QuantStack/Qwen-Image-Layered-GGUF" ref="nofollow noopener noreferrer">QuantStack/Qwen-Image-Layered-GGUF</a></li>
</ul>
<h3 data-id="heading-10">æ­¥éª¤3: å°†æ–‡ä»¶æ”¾ç½®åœ¨æ­£ç¡®çš„ç›®å½•</h3>
<p>åœ¨ComfyUIå®‰è£…ç›®å½•ä¸­ç»„ç»‡ä¸‹è½½çš„æ–‡ä»¶:</p>
<pre><code class="hljs language-bash" lang="bash">ComfyUI/models/
â”œâ”€â”€ text_encoders/
â”‚   â””â”€â”€ qwen_2.5_vl_7b_fp8_scaled.safetensors
â”œâ”€â”€ diffusion_models/
â”‚   â””â”€â”€ qwen_image_layered_Q4_K_M.gguf
â””â”€â”€ vae/
    â””â”€â”€ qwen_image_layered_vae.safetensors
</code></pre>
<p><strong>é‡è¦æç¤º</strong>: VAEæ–‡ä»¶ä¸“ä¸ºQwen-Image-Layeredè®¾è®¡,å¤„ç†å››ä¸ªé€šé“(RGBA)è€Œä¸æ˜¯æ ‡å‡†çš„ä¸‰ä¸ªé€šé“(RGB)ã€‚</p>
<h3 data-id="heading-11">æ­¥éª¤4: å®‰è£…GGUFæ”¯æŒ(å¦‚éœ€è¦)</h3>
<p>å¦‚æœä½¿ç”¨GGUFç‰ˆæœ¬ä¸”ComfyUIæ²¡æœ‰å†…ç½®GGUFæ”¯æŒ,å®‰è£…ComfyUI-GGUFè‡ªå®šä¹‰èŠ‚ç‚¹:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ComfyUI/custom_nodes
git <span class="hljs-built_in">clone</span> https://github.com/city96/ComfyUI-GGUF
<span class="hljs-built_in">cd</span> ComfyUI-GGUF
pip install -r requirements.txt
</code></pre>
<p>å®‰è£…åé‡å¯ComfyUIã€‚</p>
<h2 data-id="heading-12">é…ç½®ComfyUIå·¥ä½œæµ</h2>
<p>æ¨¡å‹å®‰è£…å®Œæˆå,ä½ å¯ä»¥åœ¨ComfyUIä¸­è®¾ç½®Qwen-Image-Layeredå·¥ä½œæµã€‚</p>
<h3 data-id="heading-13">åŸºç¡€å·¥ä½œæµç»“æ„</h3>
<p>å…¸å‹çš„Qwen-Image-Layeredå·¥ä½œæµåŒ…å«ä»¥ä¸‹å…³é”®èŠ‚ç‚¹:</p>
<ol>
<li><strong>Load Image</strong>: è¾“å…¥æºå›¾åƒ</li>
<li><strong>GGUF Unet Loader</strong>: åŠ è½½Qwen-Image-Layeredæ¨¡å‹</li>
<li><strong>GGUF CLIP Loader</strong>: åŠ è½½æ–‡æœ¬ç¼–ç å™¨</li>
<li><strong>Load VAE</strong>: åŠ è½½ä¸“ç”¨çš„Qwen VAE</li>
<li><strong>Sampler</strong>: é…ç½®ç”Ÿæˆå‚æ•°</li>
<li><strong>Save Image</strong>: è¾“å‡ºç”Ÿæˆçš„å›¾å±‚</li>
</ol>
<h3 data-id="heading-14">æ¨èçš„é‡‡æ ·å™¨è®¾ç½®</h3>
<p>ä¸ºäº†è·å¾—æœ€ä½³æ•ˆæœ:</p>
<ul>
<li><strong>æ¨ç†æ­¥æ•°</strong>: 50(æ¨èæœ€å°å€¼)</li>
<li><strong>CFGæ¯”ä¾‹</strong>: 4.0</li>
<li><strong>é‡‡æ ·å™¨</strong>: Euleræˆ–DPM++ 2M</li>
<li><strong>è°ƒåº¦å™¨</strong>: Normalæˆ–Karras</li>
</ul>
<h3 data-id="heading-15">åˆ†è¾¨ç‡è®¾ç½®</h3>
<p>æ ¹æ®ç¡¬ä»¶å’Œè´¨é‡éœ€æ±‚é€‰æ‹©:</p>
<ul>
<li><strong>640px</strong>: å¹³è¡¡è´¨é‡å’Œé€Ÿåº¦,é€‚ç”¨äº8GBæ˜¾å­˜</li>
<li><strong>768px</strong>: æ›´é«˜è´¨é‡,éœ€è¦10GB+æ˜¾å­˜</li>
<li><strong>1024px</strong>: æœ€é«˜è´¨é‡,GGUFéœ€è¦12GB+æ˜¾å­˜</li>
</ul>
<h2 data-id="heading-16">å®é™…åº”ç”¨æ¡ˆä¾‹</h2>
<h3 data-id="heading-17">1. ç”µå•†äº§å“ç¼–è¾‘</h3>
<p><strong>åœºæ™¯</strong>: äº§å“ç…§ç‰‡éœ€è¦é¢œè‰²å˜ä½“æˆ–èƒŒæ™¯æ›´æ¢ã€‚</p>
<p><strong>å·¥ä½œæµç¨‹</strong>:</p>
<ul>
<li>å°†äº§å“å›¾åƒåˆ†è§£ä¸ºå›¾å±‚</li>
<li>ä»èƒŒæ™¯ä¸­éš”ç¦»äº§å“å›¾å±‚</li>
<li>ä¸ºä¸åŒå˜ä½“é‡æ–°ç€è‰²äº§å“å›¾å±‚</li>
<li>ç”¨æ–°åœºæ™¯æ›¿æ¢èƒŒæ™¯å›¾å±‚</li>
</ul>
<p><strong>ä¼˜åŠ¿</strong>: åœ¨å‡ åˆ†é’Ÿå†…åˆ›å»ºå¤šä¸ªäº§å“å˜ä½“ã€‚</p>
<h3 data-id="heading-18">2. è¥é”€å’Œå¹¿å‘Šåˆ›ä½œ</h3>
<p><strong>åœºæ™¯</strong>: ç”¨æ–°æ–‡æœ¬æˆ–å­£èŠ‚æ€§å…ƒç´ æ›´æ–°ä¿ƒé”€ææ–™ã€‚</p>
<p><strong>å·¥ä½œæµç¨‹</strong>:</p>
<ul>
<li>åŠ è½½ç°æœ‰å¹¿å‘Šå›¾åƒ</li>
<li>åˆ†è§£ä¸ºå›¾å±‚(èƒŒæ™¯ã€äº§å“ã€æ–‡å­—ã€è£…é¥°)</li>
<li>ç”¨æ›´æ–°çš„æ–‡æ¡ˆæ›¿æ¢æ–‡å­—å›¾å±‚</li>
<li>ä¸ºå­£èŠ‚æ€§ä¸»é¢˜äº¤æ¢è£…é¥°å…ƒç´ </li>
</ul>
<p><strong>ä¼˜åŠ¿</strong>: å¿«é€Ÿè¿­ä»£è¥é”€ææ–™ã€‚</p>
<h2 data-id="heading-19">ä¼˜åŒ–æŠ€å·§å’Œæ•…éšœæ’é™¤</h2>
<h3 data-id="heading-20">æ€§èƒ½ä¼˜åŒ–</h3>
<p><strong>1. é€‰æ‹©åˆé€‚çš„é‡åŒ–çº§åˆ«</strong></p>
<ul>
<li><strong>Q4_K_M</strong>: å¤§å¤šæ•°ç”¨æˆ·çš„æœ€ä½³å¹³è¡¡(èŠ‚çœ3-4GBæ˜¾å­˜)</li>
<li><strong>Q5_K_M</strong>: è´¨é‡ç¨å¥½,ä¸­ç­‰æ˜¾å­˜èŠ‚çœ</li>
<li><strong>Q6_K</strong>: æ¥è¿‘åŸå§‹è´¨é‡,æœ€å°æ˜¾å­˜èŠ‚çœ</li>
</ul>
<p><strong>2. æ ¹æ®ç¡¬ä»¶è°ƒæ•´åˆ†è¾¨ç‡</strong></p>
<p>ä»640pxå¼€å§‹,åªæœ‰åœ¨ç¡¬ä»¶èƒ½å¤Ÿå¤„ç†æ—¶æ‰å¢åŠ ã€‚</p>
<p><strong>3. å¯ç”¨å†…å­˜ä¼˜åŒ–</strong></p>
<p>åœ¨ComfyUIè®¾ç½®ä¸­å¯ç”¨:</p>
<ul>
<li>"è‡ªåŠ¨å¸è½½æ¨¡å‹"</li>
<li>"æ˜¾å­˜ç®¡ç†: è‡ªåŠ¨"</li>
<li>"æ¿€è¿›çš„å†…å­˜æ¸…ç†"</li>
</ul>
<h3 data-id="heading-21">å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h3>
<p><strong>é—®é¢˜1: "å†…å­˜ä¸è¶³"é”™è¯¯</strong></p>
<p>è§£å†³æ–¹æ¡ˆ:</p>
<ul>
<li>åˆ‡æ¢åˆ°è¾ƒä½é‡åŒ–(Q4è€Œä¸æ˜¯Q5/Q6)</li>
<li>é™ä½è¾“å…¥åˆ†è¾¨ç‡(640pxè€Œä¸æ˜¯1024px)</li>
<li>å…³é—­å…¶ä»–GPUå¯†é›†å‹åº”ç”¨ç¨‹åº</li>
</ul>
<p><strong>é—®é¢˜2: å›¾å±‚åˆ†ç¦»è´¨é‡å·®</strong></p>
<p>è§£å†³æ–¹æ¡ˆ:</p>
<ul>
<li>å°†æ¨ç†æ­¥æ•°å¢åŠ åˆ°60-70</li>
<li>è°ƒæ•´CFGæ¯”ä¾‹(å°è¯•3.5-4.5èŒƒå›´)</li>
<li>æä¾›å…³äºå›¾åƒå†…å®¹çš„æè¿°æ€§æç¤ºè¯</li>
<li>ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„Qwen VAE</li>
</ul>
<h2 data-id="heading-22">ä¸ºä»€ä¹ˆä½¿ç”¨ComfyUIè€Œä¸æ˜¯åœ¨çº¿å·¥å…·?</h2>
<p>è™½ç„¶å­˜åœ¨åœ¨çº¿AIå›¾åƒç¼–è¾‘å™¨,ä½†åœ¨ComfyUIä¸­æœ¬åœ°è¿è¡ŒQwen-Image-Layered GGUFæä¾›äº†æ˜æ˜¾çš„ä¼˜åŠ¿:</p>
<h3 data-id="heading-23">éšç§å’Œæˆæœ¬æ•ˆç›Š</h3>
<p><strong>æœ¬åœ°å¤„ç†</strong>:</p>
<ul>
<li>ä½ çš„å›¾åƒæ°¸è¿œä¸ä¼šç¦»å¼€ä½ çš„è®¡ç®—æœº</li>
<li>æ²¡æœ‰æ•°æ®ä¸Šä¼ åˆ°ç¬¬ä¸‰æ–¹æœåŠ¡å™¨</li>
<li>å…è´¹ã€å¼€æºè½¯ä»¶</li>
<li>æ— é™ç”Ÿæˆ,æ— è®¢é˜…è´¹ç”¨</li>
</ul>
<p><strong>åœ¨çº¿å·¥å…·</strong>:</p>
<ul>
<li>å›¾åƒä¸Šä¼ åˆ°å¤–éƒ¨æœåŠ¡å™¨</li>
<li>æ¯æœˆè®¢é˜…è´¹ç”¨</li>
<li>åŸºäºç§¯åˆ†çš„ç³»ç»Ÿ</li>
</ul>
<h3 data-id="heading-24">å®šåˆ¶å’Œæ§åˆ¶</h3>
<p>ComfyUIæä¾›å®Œå…¨çš„å·¥ä½œæµå®šåˆ¶ã€å‚æ•°æ§åˆ¶å’Œç»“åˆå¤šä¸ªæ¨¡å‹çš„èƒ½åŠ›ã€‚ä¸è¿‡,å¦‚æœä½ æƒ³åœ¨ä¸å®‰è£…çš„æƒ…å†µä¸‹å¿«é€Ÿæµ‹è¯•Qwen-Image-LayeredåŠŸèƒ½,åƒ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fzimage.run" target="_blank" title="https://zimage.run" ref="nofollow noopener noreferrer">ZImage.run</a></strong> è¿™æ ·çš„å¹³å°æä¾›äº†æ–¹ä¾¿çš„åœ¨çº¿è®¿é—®å„ç§AIå›¾åƒç”Ÿæˆæ¨¡å‹ã€‚</p>
<p>è¿™å¯¹ä»¥ä¸‹æƒ…å†µå¾ˆæœ‰ç”¨:</p>
<ul>
<li>åœ¨æ‰¿è¯ºæœ¬åœ°è®¾ç½®ä¹‹å‰å¿«é€Ÿå®éªŒ</li>
<li>æ¯”è¾ƒä¸åŒçš„æ¨¡å‹å’Œå‚æ•°</li>
<li>åœ¨æ²¡æœ‰GPUçš„è®¾å¤‡ä¸Šç”Ÿæˆæ ·æœ¬</li>
</ul>
<p>ä¸€æ—¦éªŒè¯äº†å·¥ä½œæµ,è¿‡æ¸¡åˆ°æœ¬åœ°ComfyUIå¯ä»¥æä¾›æœ€å¤§çš„çµæ´»æ€§å’Œæ§åˆ¶ã€‚</p>
<h2 data-id="heading-25">ç»“è®º</h2>
<p>ComfyUIä¸­çš„Qwen-Image-Layered GGUFä»£è¡¨äº†å¯è®¿é—®çš„AIé©±åŠ¨å›¾åƒç¼–è¾‘çš„é‡å¤§è¿›æ­¥ã€‚é€šè¿‡è‡ªåŠ¨å°†å›¾åƒåˆ†è§£ä¸ºå¯ç¼–è¾‘å›¾å±‚,å®ƒæ¶ˆé™¤äº†æ•°å°æ—¶çš„æ‰‹åŠ¨è’™ç‰ˆå·¥ä½œ,åŒæ—¶ä¿æŒä¸“ä¸šçº§è´¨é‡çš„ç»“æœã€‚</p>
<h3 data-id="heading-26">å…³é”®è¦ç‚¹</h3>
<ul>
<li><strong>GGUFé‡åŒ–</strong>åœ¨ä¸æ˜¾è‘—é™ä½è´¨é‡çš„æƒ…å†µä¸‹å°†æ˜¾å­˜éœ€æ±‚å‡å°‘50-75%</li>
<li><strong>Q4_K_Mé‡åŒ–</strong>ä¸ºå¤§å¤šæ•°æ‹¥æœ‰8-12GBæ˜¾å­˜çš„ç”¨æˆ·æä¾›æœ€ä½³å¹³è¡¡</li>
<li><strong>åŸç”ŸComfyUIæ”¯æŒ</strong>ç®€åŒ–äº†å®‰è£…å’Œå·¥ä½œæµåˆ›å»º</li>
<li><strong>å¯å˜å›¾å±‚æ•°é‡</strong>å’Œé€’å½’åˆ†è§£æä¾›æœ€å¤§çµæ´»æ€§</li>
<li><strong>æœ¬åœ°å¤„ç†</strong>ç¡®ä¿éšç§ã€æˆæœ¬æ•ˆç›Šå’Œæ— é™ä½¿ç”¨</li>
</ul>
<h3 data-id="heading-27">ä»Šå¤©å¼€å§‹</h3>
<ol>
<li>å°†ComfyUIæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</li>
<li>ä¸‹è½½Qwen-Image-Layered GGUFæ¨¡å‹(æ¨èQ4_K_M)</li>
<li>å°†æ–‡ä»¶æ”¾ç½®åœ¨æ­£ç¡®çš„ComfyUIç›®å½•ä¸­</li>
<li>åŠ è½½ç¤ºä¾‹å·¥ä½œæµæˆ–åˆ›å»ºè‡ªå·±çš„å·¥ä½œæµ</li>
<li>ä»640pxåˆ†è¾¨ç‡å’Œ50æ¨ç†æ­¥æ•°å¼€å§‹</li>
<li>å°è¯•ä¸åŒçš„å›¾åƒå’Œå›¾å±‚æ•°é‡</li>
</ol>
<h3 data-id="heading-28">å…¶ä»–èµ„æº</h3>
<p><strong>å®˜æ–¹æ–‡æ¡£</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2FQwen%2FQwen-Image-Layered" target="_blank" title="https://huggingface.co/Qwen/Qwen-Image-Layered" ref="nofollow noopener noreferrer">Hugging Faceä¸Šçš„Qwen-Image-Layered</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2512.15603" target="_blank" title="https://arxiv.org/abs/2512.15603" ref="nofollow noopener noreferrer">arXivä¸Šçš„ç ”ç©¶è®ºæ–‡</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.comfy.org" target="_blank" title="https://docs.comfy.org" ref="nofollow noopener noreferrer">ComfyUIå®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<p><strong>ç¤¾åŒºèµ„æº</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcomfyui-wiki.com%2Fen%2Ftutorial%2Fadvanced%2Fimage%2Fqwen%2Fqwen-image-layered" target="_blank" title="https://comfyui-wiki.com/en/tutorial/advanced/image/qwen/qwen-image-layered" ref="nofollow noopener noreferrer">ComfyUI Wikiæ•™ç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcity96%2FComfyUI-GGUF" target="_blank" title="https://github.com/city96/ComfyUI-GGUF" ref="nofollow noopener noreferrer">ComfyUI-GGUF GitHubä»“åº“</a></li>
</ul>
<p>ä»Šå¤©å°±å¼€å§‹åœ¨ComfyUIä¸­å°è¯•Qwen-Image-Layered GGUF,å‘ç°åŸºäºå›¾å±‚çš„AIç¼–è¾‘å¦‚ä½•æ”¹å˜ä½ çš„åˆ›æ„å·¥ä½œæµã€‚</p>
<hr/>
<p><strong>å‡†å¤‡å°è¯•AIå›¾åƒç”Ÿæˆ?</strong> è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fzimage.run" target="_blank" title="https://zimage.run" ref="nofollow noopener noreferrer">zimage.run</a> æ¢ç´¢å„ç§AIæ¨¡å‹å’Œå·¥ä½œæµ,æˆ–è®¾ç½®æœ¬åœ°ComfyUIå®‰è£…ä»¥è·å¾—æ— é™åˆ›æ„å¯èƒ½æ€§ã€‚</p>
<h2 data-id="heading-29">Link</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fchatgpt.com%2Fshare%2F695cef87-0908-8008-8a2e-b9a6f7aaf8d8" target="_blank" title="https://chatgpt.com/share/695cef87-0908-8008-8a2e-b9a6f7aaf8d8" ref="nofollow noopener noreferrer">Z-Image: Free AI Image Generator</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffelo.ai%2Fsearch%2FhoAAzHBhhvvrBVT4mhyAme" target="_blank" title="https://felo.ai/search/hoAAzHBhhvvrBVT4mhyAme" ref="nofollow noopener noreferrer">Z-Image-Turbo: Free AI Image Generator</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffelo.ai%2Fsearch%2Faj2VYq7z58aHRfVaGibUPG" target="_blank" title="https://felo.ai/search/aj2VYq7z58aHRfVaGibUPG" ref="nofollow noopener noreferrer">Free Sora Watermark Remover</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsites.google.com%2Fview%2Fzimagerun" target="_blank" title="https://sites.google.com/view/zimagerun" ref="nofollow noopener noreferrer">Zimage.run Google Site</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fzimage.run%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//zimage.run/" ref="nofollow noopener noreferrer">Zhi Hu</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fltx-2.run%2F" target="_blank" title="https://ltx-2.run/" ref="nofollow noopener noreferrer">LTX-2</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flnk.bio%2Fgary02" target="_blank" title="https://lnk.bio/gary02" ref="nofollow noopener noreferrer">LNK</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[langchainå­¦ä¹ æ€»ç»“-Runnableç»„ä»¶ bind å‡½æ•°]]></title>    <link>https://juejin.cn/post/7594389937462771722</link>    <guid>https://juejin.cn/post/7594389937462771722</guid>    <pubDate>2026-01-13T02:14:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594389937462771722" data-draft-id="7594383365418319918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="langchainå­¦ä¹ æ€»ç»“-Runnableç»„ä»¶ bind å‡½æ•°"/> <meta itemprop="keywords" content="å…¨æ ˆ"/> <meta itemprop="datePublished" content="2026-01-13T02:14:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒåœ¨é£æ‰¬AI"/> <meta itemprop="url" content="https://juejin.cn/user/1556564194366823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            langchainå­¦ä¹ æ€»ç»“-Runnableç»„ä»¶ bind å‡½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1556564194366823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒåœ¨é£æ‰¬AI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T02:14:51.000Z" title="Tue Jan 13 2026 02:14:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Runnableç»„ä»¶ bind å‡½æ•°</h2>
<h3 data-id="heading-1">æ˜¯ä»€ä¹ˆ</h3>
<p><code>bind()</code> æ˜¯ LangChain ä¸­ Runnable ç»„ä»¶çš„æ–¹æ³•ï¼Œç”¨äº<strong>åŠ¨æ€æ·»åŠ é»˜è®¤è°ƒç”¨å‚æ•°</strong>ï¼Œåœ¨åˆ›å»º Runnable å®ä¾‹æ—¶é¢„è®¾éƒ¨åˆ†å‚æ•°å€¼ã€‚</p>
<h3 data-id="heading-2">æœ‰ä»€ä¹ˆç”¨</h3>
<ul>
<li><strong>ç®€åŒ–è°ƒç”¨</strong>ï¼šæå‰ç»‘å®šå›ºå®šå‚æ•°ï¼Œè°ƒç”¨æ—¶åªéœ€ä¼ å…¥å˜åŒ–å‚æ•°</li>
<li><strong>å‚æ•°å¤ç”¨</strong>ï¼šé¿å…æ¯æ¬¡ invoke éƒ½é‡å¤ä¼ ç›¸åŒå‚æ•°</li>
<li><strong>å¤šå‚åœºæ™¯</strong>ï¼šè§£å†³ RunnableLambda åªèƒ½æ¥æ”¶å•å‚çš„é—®é¢˜ï¼Œé€šè¿‡ bind é¢„è®¾éƒ¨åˆ†å‚æ•°</li>
<li><strong>åŠ¨æ€è¦†ç›–</strong>ï¼šåœ¨é“¾å¼è°ƒç”¨ä¸­åŠ¨æ€ä¿®æ”¹ LLM å‚æ•°ï¼ˆå¦‚ modelã€temperature ç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-3">ä»£ç ç¤ºä¾‹</h3>
<h4 data-id="heading-4">ç¤ºä¾‹1ï¼šRunnableLambda é¢„è®¾é»˜è®¤å‚æ•°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnableLambda

<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">location: <span class="hljs-built_in">str</span>, unit: <span class="hljs-built_in">str</span>, name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{name}</span>ä½ å¥½ï¼ŒæŸ¥è¯¢åˆ°<span class="hljs-subst">{location}</span>çš„å¤©æ°”æ˜¯25åº¦<span class="hljs-subst">{unit}</span>"</span>

<span class="hljs-comment"># ç»‘å®š unit å’Œ nameï¼Œè°ƒç”¨æ—¶åªéœ€ä¼  location</span>
get_weather_runnable = RunnableLambda(get_weather).bind(unit=<span class="hljs-string">"æ‘„æ°åº¦"</span>, name=<span class="hljs-string">"muxiaoke"</span>)

res = get_weather_runnable.invoke(<span class="hljs-string">"å¹¿å·"</span>)
<span class="hljs-comment"># è¾“å‡º: muxiaokeä½ å¥½ï¼ŒæŸ¥è¯¢åˆ°å¹¿å·çš„å¤©æ°”æ˜¯25åº¦æ‘„æ°åº¦</span>
</code></pre>
<h4 data-id="heading-5">ç¤ºä¾‹2ï¼šLLM é“¾å¼è°ƒç”¨ä¸­åŠ¨æ€è¦†ç›–æ¨¡å‹å‚æ•°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser

prompt = ChatPromptTemplate.from_messages([(<span class="hljs-string">"human"</span>, <span class="hljs-string">"{query}"</span>)])
llm = ChatOpenAI(model=<span class="hljs-string">"moonshot-v1-8k"</span>)

<span class="hljs-comment"># ä½¿ç”¨ bind åŠ¨æ€è¦†ç›– model å‚æ•°ï¼Œä» 8k åˆ‡æ¢åˆ° 32k</span>
chain = prompt | llm.bind(model=<span class="hljs-string">"moonshot-v1-32k"</span>) | StrOutputParser()

content = chain.invoke({<span class="hljs-string">"query"</span>: <span class="hljs-string">"ä½ å¥½ï¼Œä½ æ˜¯ä»€ä¹ˆæ¨¡å‹ï¼Œç‰ˆæœ¬å·æ˜¯å¤šå°‘"</span>})
<span class="hljs-comment"># å®é™…ä½¿ç”¨çš„æ˜¯ moonshot-v1-32k æ¨¡å‹</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘æ˜¯å¦‚ä½•ç”¨ä¸€è¡Œ JS ä»£ç ï¼Œè®©ä½ çš„æµè§ˆå™¨å†…å­˜ç¬é—´å´©æºƒçš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594396523439964195</link>    <guid>https://juejin.cn/post/7594396523439964195</guid>    <pubDate>2026-01-13T04:11:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594396523439964195" data-draft-id="7594303923362873384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘æ˜¯å¦‚ä½•ç”¨ä¸€è¡Œ JS ä»£ç ï¼Œè®©ä½ çš„æµè§ˆå™¨å†…å­˜ç¬é—´å´©æºƒçš„ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2026-01-13T04:11:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘æ˜¯å¦‚ä½•ç”¨ä¸€è¡Œ JS ä»£ç ï¼Œè®©ä½ çš„æµè§ˆå™¨å†…å­˜ç¬é—´å´©æºƒçš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T04:11:47.000Z" title="Tue Jan 13 2026 04:11:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c3a3aa71a5740e6b4db46e14137b3a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768882306&amp;x-signature=6qAFbero3ZHZC1HP9Pe0c2S59WE%3D" alt="image_w3wbkq.webp" loading="lazy"/></p>
<p>ä¸‹åˆèŒ¶æ—¶é—´ï¼Œæˆ‘ç»™éš”å£çš„åç«¯è€å“¥å‘äº†ä¸ªé“¾æ¥ã€‚</p>
<p>ä»–æ¯«æ— é˜²å¤‡åœ°ç‚¹å¼€äº†ã€‚</p>
<p>ä¸‰ç§’é’Ÿåï¼Œæˆ‘å¬åˆ°ä»–é‚£å° 16G å†…å­˜çš„ MacBook Pro é£æ‰‡å¼€å§‹ç‹‚å•¸ï¼Œä»¿ä½›è¦èµ·é£ğŸ¤£ã€‚</p>
<p>äº”ç§’é’Ÿåï¼Œä»–çš„é¼ æ ‡æŒ‡é’ˆå˜æˆäº†å½©è™¹åœˆï¼Œå¡åœ¨å±å¹•ä¸­é—´åŠ¨å¼¹ä¸å¾—ã€‚</p>
<p>åç§’é’Ÿåï¼ŒChrome æƒ¨å«ä¸€å£°ï¼Œå¼¹å‡ºäº†é‚£ä¸ªè®©æ— æ•°å‰ç«¯äººé—»é£ä¸§èƒ†çš„é¡µé¢â€”â€”(å´©æºƒå•¦)ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4404d173be954a93b08999d7058cfca7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768882306&amp;x-signature=cwyjjK99etomM8rcBj0KZqR9n7g%3D" alt="57f8a59240236884e204a1cc951a851bc8ec20f4.png" loading="lazy"/></p>
<p>åç«¯è€å“¥è¿‡æ¥é—®æˆ‘ï¼šä½ åˆšæ‰å‘çš„æ˜¯ä»€ä¹ˆç—…æ¯’ï¼Ÿï¼ğŸ˜¡</p>
<p>æˆ‘æ·¡å®šåœ°å–äº†ä¸€å£å’–å•¡ï¼šæ²¡æœ‰ç—…æ¯’ï¼Œåªæ˜¯ä¸€è¡Œ JavaScript ä»£ç è€Œå·²ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±å¸¦å¤§å®¶æ‹†è§£ä¸€ä¸‹è¿™ä¸ªå´©æºƒèƒŒåçš„åŸç†ã€‚è¿™ä¸ä»…æ˜¯ä¸ªæ¶ä½œå‰§ï¼Œæ›´æ˜¯æ·±å…¥ç†è§£ <strong>V8 å¼•æ“å†…å­˜æœºåˆ¶</strong> çš„ç»ä½³æœºä¼šã€‚</p>
<hr/>
<h3 data-id="heading-0">è¿™è¡Œä»£ç é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿ</h3>
<p>âš ï¸ é«˜èƒ½é¢„è­¦ï¼šè¯·å‹¿åœ¨æœªä¿å­˜å·¥ä½œçš„æµè§ˆå™¨æ ‡ç­¾é¡µä¸­è¿è¡Œä»¥ä¸‹ä»£ç ï¼</p>
<p>âš ï¸ é«˜èƒ½é¢„è­¦ï¼šè¯·å‹¿åœ¨æœªä¿å­˜å·¥ä½œçš„æµè§ˆå™¨æ ‡ç­¾é¡µä¸­è¿è¡Œä»¥ä¸‹ä»£ç ï¼</p>
<p>âš ï¸ é«˜èƒ½é¢„è­¦ï¼šè¯·å‹¿åœ¨æœªä¿å­˜å·¥ä½œçš„æµè§ˆå™¨æ ‡ç­¾é¡µä¸­è¿è¡Œä»¥ä¸‹ä»£ç ï¼</p>
<p>é‡è¦çš„äº‹ï¼Œå…ˆè¯´ä¸‰éğŸ˜ƒ</p>
<p>å¦‚æœä½ æƒ³è®©æµè§ˆå™¨ç¬é—´æš´æ¯™ï¼Œå…¶å®ä¸éœ€è¦ä»€ä¹ˆå¤æ‚çš„é»‘å®¢æŠ€æœ¯ã€‚æœ€ç®€å•ç²—æš´çš„æ–¹å¼ï¼Œå°±æ˜¯ <strong>å †æº¢å‡º (Heap Overflow)</strong>ã€‚</p>
<p>æ ¸å¿ƒä»£ç åªæœ‰è¿™ä¸€è¡Œï¼ˆä¸ºäº†æ–¹ä¾¿å±•ç¤ºï¼Œæˆ‘ç¨å¾®å±•å¼€ä¸€ç‚¹ï¼‰ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å°±æ˜¯å®ƒï¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">boom</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">leakArr</span> = [];
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åˆ†é… 20MB çš„ TypedArray</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">leakArr</span>.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(<span class="hljs-number">20</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>));
  }, <span class="hljs-number">10</span>);
};

<span class="hljs-title function_">boom</span>();
</code></pre>
<p><strong>åŸç†æå…¶ç®€å•ï¼š</strong></p>
<ol>
<li>æˆ‘ä»¬å¼€äº†ä¸€ä¸ª <code>setInterval</code> å®šæ—¶å™¨ï¼Œæ¯ 10 æ¯«ç§’æ‰§è¡Œä¸€æ¬¡ã€‚</li>
<li><code>new Uint8Array(20 * 1024 * 1024)</code> ä¼šåˆ›å»ºä¸€ä¸ªçº¦ 20MB çš„ TypedArrayã€‚</li>
<li>æœ€å…³é”®çš„ä¸€æ­¥ï¼šæˆ‘ä»¬å°†è¿™ä¸ªTypedArray <code>push</code> è¿›äº†ä¸€ä¸ª<strong>å…¨å±€å˜é‡</strong> <code>window.leakArr</code> ä¸­ã€‚</li>
</ol>
<p>å› ä¸º leakArr æ˜¯æŒ‚åœ¨ window ä¸Šçš„ï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºï¼šè¿™ä¸ªæ•°æ®ç”¨æˆ·è¿˜è¦ç”¨ï¼Œæˆ‘ä¸èƒ½å›æ”¶ï¼</p>
<p>äºæ˜¯ï¼ŒGCï¼ˆåƒåœ¾å›æ”¶å™¨ï¼‰ä¸æ•¢åŠ¨å®ƒã€‚</p>
<p>å†…å­˜å°±åƒè¢«æ³¨æ°´ä¸€æ ·ç¬é—´é£™å‡ã€‚</p>
<p>1ç§’é’Ÿå¢åŠ  1GBï¼Œå‡ ç§’é’Ÿåï¼ŒChrome çš„ V8 å¼•æ“å°±ä¼šå› ä¸ºè¾¾åˆ° Heap Limitï¼ˆå †ä¸Šé™ï¼‰ è€Œå´©æºƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5b32a37ab634edebf43646a0139db44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768882306&amp;x-signature=J1Ba3ESHOpsEF8HXhC9pDPEFO0w%3D" alt="screenshot-20260113-114331.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">æµè§ˆå™¨æ˜¯æ€ä¹ˆæ­»çš„ï¼Ÿ</h3>
<p>å¾ˆå¤šå…„å¼Ÿä¼šé—®ï¼šæˆ‘ç”µè„‘ 32G å†…å­˜ï¼Œè¿™æ‰å“ªåˆ°å“ªï¼Ÿä¸ºä»€ä¹ˆæµè§ˆå™¨è¿™ä¹ˆè„†ï¼Ÿ</p>
<p>è¿™é‡Œå°±è¦è®²åˆ° Node.js å’Œ Chrome V8 çš„ä¸€ä¸ªé™åˆ¶ã€‚</p>
<h4 data-id="heading-2">V8 çš„å†…å­˜é™åˆ¶ï¼ˆHeap Limitï¼‰</h4>
<p>Chrome å¹¶ä¸æ˜¯ä½ æœ‰å¤šå°‘ç‰©ç†å†…å­˜ï¼Œå®ƒå°±æ•¢ç”¨å¤šå°‘ã€‚</p>
<p>ä¸ºäº†é˜²æ­¢ç½‘é¡µå ç”¨è¿‡å¤šèµ„æºå¯¼è‡´ç³»ç»Ÿå¡æ­»ï¼ŒV8 å¯¹æ¯ä¸ªé¡µé¢çš„ JS å †å†…å­˜æ˜¯æœ‰ç¡¬æ€§é™åˆ¶çš„ã€‚</p>
<ul>
<li>åœ¨ 64 ä½ç³»ç»Ÿä¸‹ï¼Œé»˜è®¤é™åˆ¶é€šå¸¸åœ¨ <strong>1.4GB - 4GB</strong> ä¹‹é—´ï¼ˆå–å†³äº Chrome ç‰ˆæœ¬å’Œè®¾å¤‡ï¼‰ã€‚</li>
</ul>
<p>å½“ä½ é‚£è¡Œä»£ç ç–¯ç‹‚ç”³è¯·å†…å­˜æ—¶ï¼ŒV8 çš„å¤„ç†æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li><strong>ç¬¬ 1 ç§’</strong>ï¼šå†…å­˜å ç”¨ 500MBã€‚GCï¼šè¿˜è¡Œï¼Œèƒ½æ’‘ä½ã€‚</li>
<li><strong>ç¬¬ 2 ç§’</strong>ï¼šå†…å­˜å ç”¨ 1.5GBã€‚GCï¼šå§æ§½ï¼Ÿå¿«æ»¡äº†ï¼èµ¶ç´§ Full GCï¼ˆå…¨é‡å›æ”¶ï¼‰ä¸€ä¸‹ï¼</li>
<li><strong>ç¬¬ 2.1 ç§’</strong>ï¼šGC å‘ç° <code>leakArr</code> è¢« <code>window</code> å¼•ç”¨ç€ï¼Œ<strong>ä¸€ä¸ªå­—èŠ‚éƒ½å›æ”¶ä¸æ‰</strong>ã€‚</li>
<li><strong>ç¬¬ 3 ç§’</strong>ï¼šå†…å­˜çªç ´é™åˆ¶ã€‚V8ï¼šæ¯ç­å§ï¼Œç´¯äº†ğŸ˜–ã€‚ -&gt; <strong>Crashã€‚</strong></li>
</ul>
<h4 data-id="heading-3">ä¸»çº¿ç¨‹é˜»å¡ (The UI Freeze)</h4>
<p>åœ¨å´©æºƒå‰ï¼Œä¸ºä»€ä¹ˆé¼ æ ‡ä¼šå¡æ­»ï¼Ÿ</p>
<p>å› ä¸º JS æ˜¯å•çº¿ç¨‹çš„ã€‚</p>
<p>å½“å†…å­˜å¿«æ»¡æ—¶ï¼ŒGC ä¼šç–¯ç‹‚ä»‹å…¥ï¼Œè¯•å›¾è…¾å‡ºç©ºé—´ã€‚GC çš„æ‰§è¡Œæ˜¯ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„ã€‚</p>
<p>CPU éƒ½åœ¨å¿™ç€åšåƒåœ¾å›æ”¶ï¼Œæ ¹æœ¬æ²¡ç©ºå»å“åº”ä½ çš„é¼ æ ‡ç§»åŠ¨å’Œé¡µé¢æ¸²æŸ“ã€‚</p>
<hr/>
<h3 data-id="heading-4">ä½ å¯èƒ½æ¯å¤©éƒ½åœ¨å†™ BugğŸ¤”</h3>
<p>ä¸Šé¢çš„ä»£ç æ˜¯æ˜ç›®å¼ èƒ†çš„æŠ¢åŠ«ï¼Œä½†åœ¨æˆ‘ä»¬çš„æ—¥å¸¸ä¸šåŠ¡ä»£ç ä¸­ï¼Œæ›´å¤šçš„æ˜¯ <strong>æ…¢æ€§å·çªƒ</strong>â€”â€”ä¹Ÿå°±æ˜¯<strong>å†…å­˜æ³„æ¼ (Memory Leak)</strong>ã€‚</p>
<p>è™½ç„¶ä½ ä¸ä¼šå†™å‡º <code>while(true)</code>ï¼Œä½†ä»¥ä¸‹è¿™å‡ ç§æ“ä½œï¼Œå’Œä¸Šé¢çš„æ€§è´¨æ˜¯ä¸€æ ·çš„ï¼š</p>
<h4 data-id="heading-5">å¿˜è®°æ¸…é™¤çš„å®šæ—¶å™¨ / ç›‘å¬å™¨</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// React ç»„ä»¶ useEffect</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetching data...'</span>);
    <span class="hljs-comment">// é—­åŒ…å¼•ç”¨äº†å¤§é‡æ•°æ®</span>
  }, <span class="hljs-number">1000</span>);

  <span class="hljs-comment">// è‡´å‘½é”™è¯¯ï¼šå¿˜è®°å†™ return () =&gt; clearInterval(timer);</span>
}, []);
</code></pre>
<p>å¦‚æœä½ åœ¨ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰é‡Œé¢‘ç¹åˆ‡æ¢è·¯ç”±ï¼Œè¿™ä¸ªç»„ä»¶è™½ç„¶å¸è½½äº†ï¼Œä½† <code>timer</code> è¿˜åœ¨è·‘ï¼Œå¼•ç”¨çš„æ•°æ®è¿˜åœ¨å†…å­˜é‡Œã€‚åˆ‡å‡ åæ¬¡è·¯ç”±ï¼Œé¡µé¢å°±å¡æˆ PPT äº†ã€‚</p>
<h4 data-id="heading-6">æ¸¸ç¦»çš„ DOM èŠ‚ç‚¹</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">let</span> detachedNodes = [];
<span class="hljs-keyword">function</span> <span class="hljs-title function_">create</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> ul = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'ul'</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    ul.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'li'</span>));
  }
  <span class="hljs-comment">// è™½ç„¶è¿™ä¸ª ul æ²¡æœ‰æ’å…¥åˆ° document.body é‡Œ</span>
  <span class="hljs-comment">// ä½†å®ƒè¢«å…¨å±€å˜é‡ detachedNodes å¼•ç”¨ç€ï¼Œæ— æ³•å›æ”¶ï¼</span>
  detachedNodes.<span class="hljs-title function_">push</span>(ul); 
}
</code></pre>
<p>å¾ˆå¤šå›¾è¡¨åº“ï¼ˆECharts ç­‰ï¼‰å¦‚æœé”€æ¯æ—¶ä¸è°ƒç”¨ <code>dispose()</code>ï¼Œå°±ä¼šç•™ä¸‹è¿™ç§å†…å­˜å¹½çµã€‚</p>
<h4 data-id="heading-7">3. é—­åŒ…é™·é˜±</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> heavyData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'*'</span>); <span class="hljs-comment">// å¤§æ•°æ®</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'I am keeping heavyData alive!'</span>);
    <span class="hljs-comment">// è™½ç„¶ inner åªç”¨åˆ°äº† consoleï¼Œä½†å› ä¸ºå®ƒåœ¨ outer å†…éƒ¨</span>
    <span class="hljs-comment">// æœ‰äº›æ—§å¼•æ“å¯èƒ½ä¼šè¿å¸¦æŠŠ heavyData ä¸€èµ·ä¿ç•™åœ¨é—­åŒ…ä¸Šä¸‹æ–‡ä¸­</span>
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-8">å¦‚ä½•é˜²æ­¢å‘¢ï¼Ÿ</h3>
<p>å¦‚æœä¸å¹¸é‡åˆ°äº†é¡µé¢è¶Šç”¨è¶Šå¡ï¼Œæ€ä¹ˆæ’æŸ¥æ˜¯ä¸æ˜¯å†…å­˜æ³„éœ²ï¼Ÿ</p>
<p><strong>Chrome DevTools æ˜¯ä½ æœ€å¥½çš„æ’æŸ¥å·¥å…·ï¼š</strong></p>
<ol>
<li>
<p><strong>æ‰“å¼€ Performance Monitorï¼ˆæ€§èƒ½ç›‘è§†å™¨ï¼‰ï¼š</strong></p>
<ul>
<li><code>F12</code> -&gt; <code>Esc</code> -&gt; é€‰æ‹© <code>Performance monitor</code>ã€‚</li>
<li>ç›¯ç€ <strong>JS å †</strong> å’Œ <strong>DOM èŠ‚ç‚¹</strong>ã€‚</li>
<li>å¦‚æœä½ åšè¿‡ä¸€é GCï¼ˆç‚¹å‡» Memory é¢æ¿çš„å°åƒåœ¾æ¡¶ï¼‰ï¼Œè¿™ä¸¤ä¸ªæ•°å€¼<strong>åªå¢ä¸å‡</strong>ï¼Œæ­å–œä½ ï¼Œæ¼äº†ã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/555e26dc29404827b8c2ca98775ad09c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768882306&amp;x-signature=Vxjqi3t6VOuxanWMrbuCiG%2FsNCQ%3D" alt="screenshot-20260113-115223.png" loading="lazy"/></p>
<ol>
<li>
<p><strong>Memory é¢æ¿æŠ“å¿«ç…§ï¼š</strong></p>
<ul>
<li>å½•åˆ¶ <strong>Heap Snapshot</strong>ã€‚</li>
<li>æœç´¢ <code>Detached</code>ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰çº¢è‰²çš„æ¸¸ç¦» DOM èŠ‚ç‚¹ã€‚</li>
<li>æˆ–è€…å¯¹æ¯”ä¸¤æ¬¡å¿«ç…§ï¼ˆAllocation instrumentation on timelineï¼‰ï¼Œçœ‹çœ‹åˆ°åº•æ˜¯å“ªä¸ªå¯¹è±¡åœ¨ç–¯ç‹‚å¢é•¿ã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ff277c7919f4e74871d6c58a3d3d1f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768882306&amp;x-signature=6F7Mla2SkPash%2FjMYYEhwBR%2BX7g%3D" alt="screenshot-20260113-115755.png" loading="lazy"/></p>
<hr/>
<p>é‚£è¡Œè®©æµè§ˆå™¨å´©æºƒçš„ä»£ç ï¼Œå¤§å®¶ç©ç©å°±å¥½ï¼Œ<strong>åƒä¸‡åˆ«å†™åˆ°ç”Ÿäº§ç¯å¢ƒé‡Œ</strong>ï¼ˆé™¤éä½ æ¸´æœ›è¢«è¿ç»´æç€åˆ€è¿½æ€ğŸ¤£ï¼‰ã€‚</p>
<p>å‰ç«¯å·¥ç¨‹å¸ˆçš„ä»·å€¼ï¼Œä¸åªæ˜¯æŠŠé¡µé¢ç”»å‡ºæ¥ï¼Œæ›´æ˜¯è¦ä¿è¯é¡µé¢åœ¨<strong>é•¿æ—¶é—´è¿è¡Œ</strong>ä¸‹ä¾ç„¶ä¸æ»‘ã€‚</p>
<p>ä¸‹æ¬¡å†é‡åˆ°é¡µé¢å¡é¡¿ï¼Œåˆ«å…‰é¡¾ç€æ€ªç½‘ç»œæ…¢ï¼Œæ‰“å¼€æ§åˆ¶å°çœ‹çœ‹ï¼Œè¯´ä¸å®šæ˜¯ä½ å†™çš„æŸä¸ªå†…å­˜æ³„æ¼ä»£ç æ­£åœ¨æ‚„æ‚„åå™¬ç”¨æˆ·çš„å†…å­˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02c7df1509e947b1be0bbd9c68ff51dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768882306&amp;x-signature=T61UzpSkI%2FhGjkbRYjfKzBDbbpA%3D" alt="è°¢è°¢å¤§å®¶.gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[langchainæ ¸å¿ƒç»„ä»¶ Model I/Oï¼ˆ3ï¼‰-OutputParser]]></title>    <link>https://juejin.cn/post/7594302398687199286</link>    <guid>https://juejin.cn/post/7594302398687199286</guid>    <pubDate>2026-01-13T02:34:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594302398687199286" data-draft-id="7594350054091522090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="langchainæ ¸å¿ƒç»„ä»¶ Model I/Oï¼ˆ3ï¼‰-OutputParser"/> <meta itemprop="keywords" content="LangChain"/> <meta itemprop="datePublished" content="2026-01-13T02:34:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€¸å‡¡"/> <meta itemprop="url" content="https://juejin.cn/user/2921852864575780"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            langchainæ ¸å¿ƒç»„ä»¶ Model I/Oï¼ˆ3ï¼‰-OutputParser
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2921852864575780/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€¸å‡¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T02:34:39.000Z" title="Tue Jan 13 2026 02:34:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2.5.1 è¾“å‡ºè§£æå™¨ä»‹ç»</h2>
<p>åœ¨åº”ç”¨å¼€å‘ä¸­ï¼Œå¤§æ¨¡å‹çš„è¾“å‡ºå¯èƒ½æ˜¯ä¸‹ä¸€æ­¥é€»è¾‘å¤„ç†çš„å…³é”®è¾“å…¥ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè§„èŒƒåŒ–è¾“å‡ºæ˜¯å¿…é¡»è¦åšçš„ä»»åŠ¡ï¼Œä»¥ç¡®ä¿åº”ç”¨èƒ½å¤Ÿé¡ºåˆ©è¿›è¡Œåç»­çš„é€»è¾‘å¤„ç†ã€‚</p>
<p>è¯­è¨€æ¨¡å‹è¿”å›çš„å†…å®¹é€šå¸¸éƒ½æ˜¯æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œè€Œå®é™…AIåº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­æœ‰æ—¶å¸Œæœ›æ¨¡å‹å¯ä»¥è¿”å›æ›´ç›´è§‚ã€æ›´æ ¼å¼åŒ–çš„å†…å®¹ï¼ŒLangChainæä¾›äº†è¾“å‡ºè§£æå™¨ï¼ˆOutput Parserï¼‰å°†æ¨¡å‹è¾“å‡ºè§£æä¸ºç»“æ„åŒ–æ•°æ®ã€‚</p>
<p>æœ‰å¤šç§ç±»å‹çš„è¾“å‡ºè§£æå™¨ï¼Œå¸¸ç”¨çš„æœ‰ StrOutputParserï¼ˆå­—ç¬¦ä¸²è§£æå™¨ï¼‰ä¸ JsonOutputParserï¼ˆJSON è§£æå™¨ï¼‰ã€‚</p>
<h2 data-id="heading-1">2.5.2 StrOutputParser</h2>
<p>StrOutputParser æ˜¯ä¸€ä¸ªç®€å•çš„è§£æå™¨ï¼Œä»ç»“æœä¸­æå– content å­—æ®µã€‚</p>
<p>ä¸¾ä¾‹ï¼šå°†æ¨¡å‹è¾“å‡ºç»“æœè§£æä¸ºå­—ç¬¦ä¸²</p>
<pre><code class="hljs language-ini" lang="ini">import os Â  
from langchain.chat_models import init_Chat_model Â  
from langchain_core.output_parser import StrOutputParser Â  
<span class="hljs-attr">llm</span> = init_chatting_model( 
    <span class="hljs-attr">model</span>=<span class="hljs-string">"openai/gpt-oss-20b:free"</span>, 
    <span class="hljs-attr">modelprovider</span>=<span class="hljs-string">"openai"</span>,
    <span class="hljs-attr">base_url</span>=<span class="hljs-string">"https://openrouter.ai/api/v1"</span>ï¼Œ 
    <span class="hljs-attr">api_key</span> = os.getenv(<span class="hljs-string">"OPENROUTER_API_KEY"</span>)ï¼Œ Â  
)Â  
<span class="hljs-attr">messages</span>=[ {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœºå™¨äºº"</span>}ï¼Œ {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å¥½"</span>}] Â  
<span class="hljs-attr">resp</span> = llm.invoke(messages)
print(respï¼‰<span class="hljs-comment"># content'ä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®å¿™çš„å—ï¼Ÿ'Â  </span>
<span class="hljs-attr">str_resp</span> = StrOutputParser().invoke(resp) Â  
print(str_respï¼‰<span class="hljs-comment"># ä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®å¿™çš„å—ï¼Ÿ</span>
</code></pre>
<h2 data-id="heading-2">2.5.3 JsonOutputParser</h2>
<p>JSONè§£æå™¨ç”¨äºå°†å¤§æ¨¡å‹çš„è‡ªç”±æ–‡æœ¬è¾“å‡ºè½¬æ¢ä¸ºç»“æ„åŒ–JSONæ•°æ®çš„å·¥å…·ã€‚ç‰¹åˆ«é€‚ç”¨äºéœ€è¦ä¸¥æ ¼ç»“æ„åŒ–è¾“å‡ºçš„åœºæ™¯ï¼Œæ¯”å¦‚APIè°ƒç”¨ã€æ•°æ®å­˜å‚¨æˆ–ä¸‹æ¸¸ä»»åŠ¡å¤„ç†ã€‚</p>
<p>JsonOutputParser èƒ½å¤Ÿç»“åˆ Pydantic æ¨¡å‹è¿›è¡Œæ•°æ®éªŒè¯ï¼Œè‡ªåŠ¨éªŒè¯å­—æ®µç±»å‹å’Œå†…å®¹ï¼ˆå¦‚å­—ç¬¦ä¸²ã€æ•°å­—ã€åµŒå¥—å¯¹è±¡ç­‰ï¼‰</p>
<p>ä½¿ç”¨get_formatInstructions()è·å–JSONè§£æçš„æ ¼å¼åŒ–æŒ‡ä»¤ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from pydantic import BaseModel, Field Â  
from langchain_core.output_parser import JsonOutputParser Â  
class Prime(BaseModel): 
    prime: list<span class="hljs-section">[int]</span>=Field(<span class="hljs-attr">description</span>=<span class="hljs-string">"ç´ æ•°"</span>) 
    count: list<span class="hljs-section">[int]</span> = Field(<span class="hljs-attr">description</span> = <span class="hljs-string">"å°äºè¯¥ç´ æ•°çš„ç´ æ•°ä¸ªæ•°"</span>) Â  
<span class="hljs-attr">json_parser</span> = JsonOutputParser(pydantic_object=Prime) 
print (json_parser.get_format Instructions()) 
<span class="hljs-comment"># The output should be formatted as a JSON instance that conforms to the JSON schema below.</span>
</code></pre>
<p>ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import os Â 
from pydantic import BaseModel, Field Â 
from langchain.chat_models import init_chatting_model
from langchain_core.output_parser import JsonOutputParser Â  
<span class="hljs-attr">llm</span> = init_chatting_model(
    <span class="hljs-attr">model</span> = <span class="hljs-string">"openai/gpt-oss-20b:free"</span>,
    <span class="hljs-attr">modelprovider</span> = <span class="hljs-string">"openai"</span>, 
    <span class="hljs-attr">base_url</span> = <span class="hljs-string">"https://openrouter.ai/api/v1"</span>, 
    <span class="hljs-attr">api_key</span> =os.getenv(<span class="hljs-string">"OPENROUTER_API_KEY"</span>), Â  
class Prime(BaseModel): 
    prime: list<span class="hljs-section">[int]</span>=Field(<span class="hljs-attr">description</span>=<span class="hljs-string">"ç´ æ•°"</span>) 
    count: list<span class="hljs-section">[int]</span>=Field(<span class="hljs-attr">description</span>=<span class="hljs-string">"å°äºè¯¥ç´ æ•°çš„ç´ æ•°ä¸ªæ•°"</span>) Â  
<span class="hljs-attr">json_parser</span> = JsonOutputParser(pydantic_object=Prime) messages={<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: json_parser.get_formatInstructions}}, { <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä»»æ„ç”Ÿæˆ5ä¸ª1000-100000ä¹‹é—´ç´ æ•°ï¼Œå¹¶æ ‡å‡ºå°äºè¯¥ç´ æ•°çš„ ç´ æ•°ä¸ªæ•°"</span>ï¼Œ }, Â  
] Â  
<span class="hljs-attr">resp</span> = llm.invoke(messages) 
<span class="hljs-attr">jsonResp</span>=json_parser.invoke (resp) 
print(jsonResp) 
<span class="hljs-comment">#{'prime':[1009,2003,3001,4001,5003], 'count':[168,303, 430,584,669]}</span>
</code></pre>
<h2 data-id="heading-3">2.6 Structured Outputs</h2>
<p>å¯ä»¥è¦æ±‚æ¨¡å‹æŒ‰ç…§ç»™å®šçš„æ¨¡å¼æ ¼å¼æä¾›å…¶å“åº”ï¼Œè¿™æœ‰åŠ©äºç¡®ä¿è¾“å‡ºå¯ä»¥è¢«è½»æ¾è§£æå¹¶åœ¨åç»­å¤„ç†ä¸­ä½¿ç”¨ã€‚LangChainæ”¯æŒå¤šç§æ¨¡å¼ç±»å‹å’Œå¼ºåˆ¶ç»“æ„åŒ–è¾“å‡ºçš„æ–¹æ³•ã€‚</p>
<h2 data-id="heading-4">2.6.1TypedDict</h2>
<p>TypedDict æä¾›äº†ä¸€ä¸ªä½¿ç”¨ Python å†…ç½®ç±»å‹çš„ç®€å•æ–¹æ¡ˆï¼Œä½†æ˜¯æ²¡æœ‰éªŒè¯åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> os Â 
from typing <span class="hljs-keyword">import</span> Dict, Annotated Â 
from langchain.chat_models <span class="hljs-keyword">import</span> <span class="hljs-keyword">init</span> chatting_model

llm = <span class="hljs-keyword">init</span> chatting_model(
 Â  Â model=<span class="hljs-string">"openai/gpt-oss-20b:free"</span>,
 Â  Â modelprovider=<span class="hljs-string">"openai"</span>,
 Â  Â base_url=<span class="hljs-string">"https://openrouter.ai/api/v1"</span>,
 Â  Â api_key=os.getenv(<span class="hljs-string">"OPENROUTER_API_KEY"</span>),
) 
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span>(TypedDict):
 Â  Â animal: Annotated[str, <span class="hljs-string">"åŠ¨ç‰©"</span>]
 Â  Â emoji: Annotated[str, <span class="hljs-string">"è¡¨æƒ…"</span>]
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AnimalList</span>(TypedDict):
 Â  Â animals: Annotated[list[Animal], <span class="hljs-string">"åŠ¨ç‰©ä¸è¡¨æƒ…åˆ—è¡¨"</span>]
messages = [<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä»»æ„ç”Ÿæˆä¸‰ç§åŠ¨ç‰©ï¼Œä»¥åŠä»–ä»¬çš„emojiè¡¨æƒ…"</span>]
llm_with_structured_output = llm.with_structured_output(AnimalList)
resp = llm_with_structured_output.invoke(messages)
print(resp)
#{<span class="hljs-string">'animals'</span>: [<span class="hljs-string">'animal'</span>: <span class="hljs-string">'çŒ«'</span>, <span class="hljs-string">'emoji'</span>: <span class="hljs-string">'é¸Ÿ'</span>}, {<span class="hljs-string">'animal'</span>: <span class="hljs-string">'è€è™'</span>, <span class="hljs-string">'emoji'</span>: <span class="hljs-string">'â–¡'</span>}, {<span class="hljs-string">'animal'</span>: <span class="hljs-string">'ä¼é¹…'</span>, <span class="hljs-string">'emoji'</span>: <span class="hljs-string">'â–¡'</span>}]}
</code></pre>
<h2 data-id="heading-5">2.6.2 Pydantic</h2>
<p>Pydantic æ¨¡å‹æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½é›†ï¼ŒåŒ…æ‹¬å­—æ®µéªŒè¯ã€æè¿°å’ŒåµŒå¥—ç»“æ„ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">import os Â  
from pydantic import BaseModel,Field Â  
from langchain.chat_models import init_chat_model Â  
<span class="hljs-attr">llm</span> = init_chatting_model( 
    <span class="hljs-attr">model</span> = <span class="hljs-string">"openai/gpt-oss-20b:free"</span>, 
    <span class="hljs-attr">modelprovider</span> = <span class="hljs-string">"openai"</span>, 
    <span class="hljs-attr">base_url</span> = <span class="hljs-string">"https://openrouter.ai/api/v1"</span>, 
    <span class="hljs-attr">api_key</span> = os.getenv(<span class="hljs-string">"OPENROUTER_API_KEY"</span>), Â  
class Animal(BaseModel):
    animal: <span class="hljs-attr">str</span>=Field(description=<span class="hljs-string">"åŠ¨ç‰©"</span>) Â 
    emoji: <span class="hljs-attr">str</span>=Field(description=<span class="hljs-string">"è¡¨æƒ…"</span>) Â 
class AnimalList(BaseModel): Â 
    animals: list<span class="hljs-section">[Animal]</span> = Field(<span class="hljs-attr">description</span>=<span class="hljs-string">"åŠ¨ç‰©ä¸è¡¨æƒ…åˆ—è¡¨"</span>) Â 
    <span class="hljs-attr">messages</span> = [<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä»»æ„ç”Ÿæˆä¸‰ç§åŠ¨ç‰©ï¼Œä»¥åŠä»–ä»¬çš„emojiè¡¨æƒ…"</span>] Â 
<span class="hljs-attr">llm_with_structured_output</span> = llm.with_structured_output(AnimalList) Â 
<span class="hljs-attr">resp</span> = llm_with_structured_output.invoke(messages) Â 
print(resp) Â 
</code></pre>
<h2 data-id="heading-6">2.6.3 JSON Schema</h2>
<p>è‹¥éœ€æœ€å¤§ç¨‹åº¦çš„æ§åˆ¶æˆ–äº’æ“ä½œæ€§ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªåŸå§‹çš„JSON Schemaã€‚è¯¦æƒ…å¯å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Fstructured-outputs%2Fjson-schema%23supported-schemas" target="_blank" title="https://platform.openai.com/docs/guides/structured-outputs/json-schema#supported-schemas" ref="nofollow noopener noreferrer">platform.openai.com/docs/guidesâ€¦</a>ã€‚</p>
<p>å¯ä»¥å°†åŸå§‹å“åº”ä¸è§£æåçš„è¡¨ç¤ºä¸€èµ·è¿”å›ï¼Œå¯åœ¨è°ƒç”¨ with_structured_output æ—¶è®¾ç½® include_raw=True æ¥å®ç°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os Â  
<span class="hljs-keyword">from</span> langchain.chat_models <span class="hljs-keyword">import</span> init_chat_model Â  
llm=init_chatting_model( 
    model=<span class="hljs-string">"openai/gpt-oss-20b:free"</span>, 
    modelprovider=<span class="hljs-string">"openai"</span>, 
    base_url= <span class="hljs-string">"https://openrouter.ai/api/v1"</span>, 
    api_key=os.getenv(<span class="hljs-string">"OPENROUTER_API_KEY"</span>) Â  
) Â  
schema = {
Â  Â  <span class="hljs-string">"name"</span>: <span class="hljs-string">"animal_list"</span>,
Â  Â  <span class="hljs-string">"schema"</span>: {
Â  Â  Â  Â  <span class="hljs-string">"type"</span>: <span class="hljs-string">"array"</span>,
Â  Â  Â  Â  <span class="hljs-string">"items"</span>: {
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"properties"</span>: {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-string">"animal"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŠ¨ç‰©åç§°"</span>},
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-string">"emoji"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŠ¨ç‰©çš„emojiè¡¨æƒ…"</span>},
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  <span class="hljs-string">"required"</span>: [<span class="hljs-string">"animal"</span>, <span class="hljs-string">"emoji"</span>],
Â  Â  Â  Â  },
Â  Â  },
} Â 
messages = [<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä»»æ„ç”Ÿæˆä¸‰ç§åŠ¨ç‰©ï¼Œä»¥åŠä»–ä»¬çš„emojiè¡¨æƒ…"</span>]} Â 
llm_with_structured_output = llm.with_structured_output(schema, method=<span class="hljs-string">"json_schema"</span>, include_raw=<span class="hljs-literal">True</span>) Â 
resp = llm_with_structured_output.invoke(messages) Â 
<span class="hljs-built_in">print</span>(resp) Â 
<span class="hljs-built_in">print</span>(resp[<span class="hljs-string">"raw"</span>)] Â 
<span class="hljs-built_in">print</span>(resp[<span class="hljs-string">" parsed"</span>)] Â 
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>